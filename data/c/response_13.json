[{"tags": ["c", "post-increment", "pre-increment"], "comments": [{"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 2, "creation_date": 1428537005, "post_id": 29527255, "comment_id": 47208858, "body": "This question gets asked about six times a week. Punch &quot;sequence point preincrement postincrement&quot; into your favorite search engine."}, {"owner": {"reputation": 55943, "user_id": 3933332, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zuzev.png?s=128&g=1", "display_name": "Rizier123", "link": "https://stackoverflow.com/users/3933332/rizier123"}, "edited": false, "score": 0, "creation_date": 1428537010, "post_id": 29527255, "comment_id": 47208860, "body": "I guess you asked, because if you search on google the browser crashed, because there were just too many dupes ?"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 2, "creation_date": 1428537078, "post_id": 29527255, "comment_id": 47208877, "body": "See: <a href=\"http://stackoverflow.com/questions/2989704/order-of-operations-for-pre-increment-and-post-increment-in-a-function-argument?rq=1\" title=\"order of operations for pre increment and post increment in a function argument\">stackoverflow.com/questions/2989704/&hellip;</a>"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 2, "creation_date": 1428537184, "post_id": 29527255, "comment_id": 47208914, "body": "<i>I know in variable length argument it is executed from left to right</i>... No you don&#39;t!  <b>order of evaluation</b> of function arguments is <b>unspecified</b>, even for variable argument functions."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1428537211, "post_id": 29527255, "comment_id": 47208919, "body": "Read the C FAQ at least once: <a href=\"http://c-faq.com/expr/evalorder2.html\" rel=\"nofollow noreferrer\">Under my compiler, the code  ...</a>"}, {"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1428537242, "post_id": 29527255, "comment_id": 47208929, "body": "You should bold &quot;evaluation&quot;. It&#39;s important to understand that you&#39;re talking about the order in which the arguments are <b>evaluated</b> that&#39;s unspecified."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1428538525, "post_id": 29527255, "comment_id": 47209236, "body": "Why do people keep posting sewage code?   Only a total moron would ever use such crap."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1428543671, "post_id": 29527255, "comment_id": 47210669, "body": "@Martin James: newbies are trying to understand increment and order of evaluation.  They use trial and error: they try something, print stuff and interpret the output... Undefined behaviour, like pointers, is a difficult concept for beginners. Insulting them is as useless as complaining about the rain."}, {"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1428552731, "post_id": 29527255, "comment_id": 47212985, "body": "There should be a canonical answer somewhere explaining that you <i>can&#39;t</i> learn this stuff by trial and error. You <i>must</i> read and understand specifications. Trial and error will teach you that crossing a road without looking both ways works fine -- until you happen to be near a busy road."}], "answers": [{"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 1, "creation_date": 1428537662, "post_id": 29527346, "comment_id": 47209045, "body": "Is the OP&#39;s code just unspecified behaviour or plain undefined behaviour per multiple reads on <code>a</code>?"}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1428541807, "post_id": 29527346, "comment_id": 47210153, "body": "UB, @chqrlie... You&#39;re right. &quot;If a side effect on a scalar object is unsequenced relative to either a different side effect on the same scalar object or a value computation using the value of the same scalar object, the behavior is undefined. If there are multiple allowable orderings of the subexpressions of an expression, the behavior is undefined if such an unsequenced side effect occurs in any of the orderings.&quot;"}], "tags": [], "owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": -1, "last_activity_date": 1428537291, "creation_date": 1428537291, "answer_id": 29527346, "question_id": 29527255, "link": "https://stackoverflow.com/questions/29527255/variable-length-argument-in-c-program/29527346#29527346", "title": "variable length argument in c program", "body": "<p>The order in which arguments to a function are <em>evaluated</em> is unspecified. It's your responsibility to write code that works the same regardless of this order.</p>\n"}], "owner": {"reputation": 93, "user_id": 1305353, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/KvC1h.jpg?s=128&g=1", "display_name": "night_hawk", "link": "https://stackoverflow.com/users/1305353/night-hawk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "closed_date": 1428537558, "answer_count": 1, "score": -3, "last_activity_date": 1428537812, "creation_date": 1428536722, "question_id": 29527255, "link": "https://stackoverflow.com/questions/29527255/variable-length-argument-in-c-program", "closed_reason": "Duplicate", "title": "variable length argument in c program", "body": "<p>In the following program</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\nint a;\na=5; printf(\"%d %d %d\\n\", a, a++ , a++);  //statement 1\na=5; printf(\"%d %d %d\\n\", a, ++a , ++a);  //statement 2\nreturn 0;\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>7 6 5\n7 7 7\n</code></pre>\n\n<p>My question why there is different behavior with a++ and ++a. I know in variable length argument it is executed from left to right and statement 1 make sense but I am wondering the result for statement2 and I was expecting results like 7 7 6..Am I missing something here ?</p>\n"}, {"tags": ["c", "arm", "gnu"], "comments": [{"owner": {"reputation": 1927, "user_id": 2636112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb03890b531eee7d4d3090bb2d52e11a?s=128&d=identicon&r=PG", "display_name": "wavemode", "link": "https://stackoverflow.com/users/2636112/wavemode"}, "edited": false, "score": 2, "creation_date": 1428535250, "post_id": 29526962, "comment_id": 47208325, "body": "You can&#39;t run ARM executables on x64. I guess you&#39;re supposed to have an ARM system available, like an emulator or a Raspberry Pi."}, {"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "reply_to_user": {"reputation": 1927, "user_id": 2636112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb03890b531eee7d4d3090bb2d52e11a?s=128&d=identicon&r=PG", "display_name": "wavemode", "link": "https://stackoverflow.com/users/2636112/wavemode"}, "edited": false, "score": 0, "creation_date": 1428535968, "post_id": 29526962, "comment_id": 47208535, "body": "@wavemode I think you should write that as an answer."}, {"owner": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 1, "creation_date": 1428536278, "post_id": 29526962, "comment_id": 47208622, "body": "The whole point of cross-compiling is to generate code for a <i>different</i> architecture to the one running the compiler, thus you should never expect to run cross-compiled code on the host machine. Why generate ARM code in the first place if you don&#39;t have anything to run it on?"}, {"owner": {"reputation": 9132, "user_id": 913098, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e3e07b09128f889209b738276d42d7ef?s=128&d=identicon&r=PG", "display_name": "Gulzar", "link": "https://stackoverflow.com/users/913098/gulzar"}, "edited": false, "score": 0, "creation_date": 1428567058, "post_id": 29526962, "comment_id": 47219358, "body": "I dont have my chip YET. But still want to start development. Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 9132, "user_id": 913098, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e3e07b09128f889209b738276d42d7ef?s=128&d=identicon&r=PG", "display_name": "Gulzar", "link": "https://stackoverflow.com/users/913098/gulzar"}, "edited": false, "score": 0, "creation_date": 1428537382, "post_id": 29527178, "comment_id": 47208976, "body": "allright, that sounds good. How do i get an emulator going? Thanks"}, {"owner": {"reputation": 1927, "user_id": 2636112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb03890b531eee7d4d3090bb2d52e11a?s=128&d=identicon&r=PG", "display_name": "wavemode", "link": "https://stackoverflow.com/users/2636112/wavemode"}, "reply_to_user": {"reputation": 9132, "user_id": 913098, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e3e07b09128f889209b738276d42d7ef?s=128&d=identicon&r=PG", "display_name": "Gulzar", "link": "https://stackoverflow.com/users/913098/gulzar"}, "edited": false, "score": 0, "creation_date": 1428538432, "post_id": 29527178, "comment_id": 47209221, "body": "@Gulzar I haven&#39;t the faintest idea."}], "tags": [], "owner": {"reputation": 1927, "user_id": 2636112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb03890b531eee7d4d3090bb2d52e11a?s=128&d=identicon&r=PG", "display_name": "wavemode", "link": "https://stackoverflow.com/users/2636112/wavemode"}, "is_accepted": false, "score": 2, "last_activity_date": 1428536224, "creation_date": 1428536224, "answer_id": 29527178, "question_id": 29526962, "link": "https://stackoverflow.com/questions/29526962/cant-run-gnu-arm-hello-world/29527178#29527178", "title": "Can&#39;t run GNU ARM Hello world", "body": "<p>You can't run ARM executables on an x64 processor. The tutorial expects you to have an ARM system available, like an emulator or a Raspberry Pi.</p>\n"}, {"tags": [], "owner": {"reputation": 400, "user_id": 4761313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fb6832d56a54e93d97ec251c3596d96?s=128&d=identicon&r=PG&f=1", "display_name": "James T. Smith", "link": "https://stackoverflow.com/users/4761313/james-t-smith"}, "is_accepted": false, "score": 2, "last_activity_date": 1428543696, "creation_date": 1428543696, "answer_id": 29528316, "question_id": 29526962, "link": "https://stackoverflow.com/questions/29526962/cant-run-gnu-arm-hello-world/29528316#29528316", "title": "Can&#39;t run GNU ARM Hello world", "body": "<p>I can't make comments yet, so this is actually a follow up to wavemode's answer:</p>\n\n<p>The quickest way to set up an emulator is with (depending on your platform) VirtualBox, or QEMU. Install Linux(or another OS that supports ARM binaries) into the image and boot from it. You'll need to transfer the binary to the emulated system, for example by SSH or HTTP.</p>\n\n<p>Finding ARM images is relatively easy, and Debian, Fedora, ArchLinux, and others all provide pre-made images.</p>\n"}, {"comments": [{"owner": {"reputation": 2458, "user_id": 244342, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/0a48db9c075f6df7fb59d2a28f970d6b?s=128&d=identicon&r=PG", "display_name": "mbmcavoy", "link": "https://stackoverflow.com/users/244342/mbmcavoy"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1503449778, "post_id": 45825535, "comment_id": 78615825, "body": "The point is that Stack Exchange works best when questions have answers. The question, while old, is a perfectly valid question, and does not have an answer marked, nor are the other answers complete or informative. I&#39;m probably not helping @Gulzar, but I might help someone else. It&#39;s still coming up in search results. I was looking with similar words, and saw it multiple times. Old is not dead: I still get frequent upvotes on a question I asked in 2010 (as in literally <i>today</i>), and regularly find solutions in questions from that timeframe."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1503481439, "post_id": 45825535, "comment_id": 78629398, "body": "But this answer do not add anything to the previous answers"}, {"owner": {"reputation": 2458, "user_id": 244342, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/0a48db9c075f6df7fb59d2a28f970d6b?s=128&d=identicon&r=PG", "display_name": "mbmcavoy", "link": "https://stackoverflow.com/users/244342/mbmcavoy"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1503516390, "post_id": 45825535, "comment_id": 78653920, "body": "The other answers mention either emulators with an OS or a Raspberry Pi (typically also used with an OS). These come with their own compilers, and are not typically used with a cross-compiler on a separate computer, and are not a suitable targets when learn how to use the GNU ARM toolchain. My answer identifies the type of hardware needed and the specific board used for the tutorial."}], "tags": [], "owner": {"reputation": 2458, "user_id": 244342, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/0a48db9c075f6df7fb59d2a28f970d6b?s=128&d=identicon&r=PG", "display_name": "mbmcavoy", "link": "https://stackoverflow.com/users/244342/mbmcavoy"}, "is_accepted": false, "score": -1, "last_activity_date": 1503430114, "creation_date": 1503430114, "answer_id": 45825535, "question_id": 29526962, "link": "https://stackoverflow.com/questions/29526962/cant-run-gnu-arm-hello-world/45825535#45825535", "title": "Can&#39;t run GNU ARM Hello world", "body": "<p>As others have stated, the GNU ARM tools are intended to target an external ARM microprocessor or microcontroller and the compiled programs will not run on your workstation.</p>\n\n<p>There are a great number of ARM-based chips and development boards from several manufacturers that can be used with the GNU ARM tools and the idea is usually to create your own system with an embedded microcontroller. The program will need to be adapted for the specific microcontroller and board you are using.</p>\n\n<p>The tutorial isn't clear, but the \"Prerequisites\" page linked from the tutorial has a section \"Assign a device to the project\", with a screenshot showing STM32F4-Discovery/STM32F407VG circled - I would assume the author is using that board.</p>\n\n<p>The <a href=\"http://www.st.com/en/evaluation-tools/stm32-mcu-discovery-kits.html\" rel=\"nofollow noreferrer\">STM32 Discovery</a> boards are low-cost (some under US$20), and include an ST-Link programmer/debugger and interesting peripherals to learn with. Other manufacturers usually have similar development boards featuring their parts.</p>\n"}], "owner": {"reputation": 9132, "user_id": 913098, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e3e07b09128f889209b738276d42d7ef?s=128&d=identicon&r=PG", "display_name": "Gulzar", "link": "https://stackoverflow.com/users/913098/gulzar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 746, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1503430114, "creation_date": 1428534959, "last_edit_date": 1428535112, "question_id": 29526962, "link": "https://stackoverflow.com/questions/29526962/cant-run-gnu-arm-hello-world", "title": "Can&#39;t run GNU ARM Hello world", "body": "<p>I'm trying to follow this tutorial\n<a href=\"http://gnuarmeclipse.livius.net/blog/test-project/\" rel=\"nofollow\">http://gnuarmeclipse.livius.net/blog/test-project/</a></p>\n\n<p>to run a GNU ARM hello world.</p>\n\n<p>I'm using eclipse luna on windows 8.1 x64.</p>\n\n<p>I've installed the GNU ARM toolchain, and everything else the tutorial states.</p>\n\n<p>The build passes, and gives the result specified in the tutorial</p>\n\n<pre><code>&gt; 02:15:01 **** Build of configuration Debug for project ARMTest4 ****\n&gt; make all  Building file: ../src/main.c Invoking: Cross ARM C Compiler\n&gt; arm-none-eabi-gcc -mcpu=cortex-m3 -mthumb -O0 -fmessage-length=0\n&gt; -fsigned-char -ffunction-sections -fdata-sections  -g3 -std=gnu11 -MMD -MP -MF\"src/main.d\" -MT\"src/main.o\" -c -o \"src/main.o\" \"../src/main.c\" Finished building: ../src/main.c   Building target: ARMTest4.elf\n&gt; Invoking: Cross ARM C Linker arm-none-eabi-gcc -mcpu=cortex-m3 -mthumb\n&gt; -O0 -fmessage-length=0 -fsigned-char -ffunction-sections -fdata-sections  -g3 -Xlinker --gc-sections -Wl,-Map,\"ARMTest4.map\" --specs=rdimon.specs -Wl,--start-group -lgcc -lc -lc -lm -lrdimon -Wl,--end-group -o \"ARMTest4.elf\"  ./src/main.o    Finished building target: ARMTest4.elf   Invoking: Cross ARM GNU Create Flash Image\n&gt; arm-none-eabi-objcopy -O ihex \"ARMTest4.elf\"  \"ARMTest4.hex\" Finished\n&gt; building: ARMTest4.hex   Invoking: Cross ARM GNU Print Size\n&gt; arm-none-eabi-size --format=berkeley \"ARMTest4.elf\"    text      data   \n&gt; bss       dec     hex filename    8256       2396     260   10912   \n&gt; 2aa0  ARMTest4.elf Finished building: ARMTest4.siz  \n&gt; \n&gt; 02:15:06 Build Finished (took 5s.110ms)\n</code></pre>\n\n<p>Then, I try to run, and it fails, I have no idea why. It says \"Error starting process\"</p>\n\n<p>The details in the error box state </p>\n\n<pre><code>&gt; Error starting process. Cannot run program\n&gt; \"C:\\Users\\Noam\\workspace\\cpp\\ARMTest3\\Debug\\ARMTest3.elf\": Launching\n&gt; failed Cannot run program\n&gt; \"C:\\Users\\Noam\\workspace\\cpp\\ARMTest3\\Debug\\ARMTest3.elf\": Launching\n&gt; failed Cannot run program\n&gt; \"C:\\Users\\Noam\\workspace\\cpp\\ARMTest3\\Debug\\ARMTest3.elf\": Launching\n&gt; failed\n</code></pre>\n\n<p>The only thing I can come up with is the code is supposed to run on some emulator and not my PC, which i have no idea how to do.\nIf this isn't the problem, please tell me what is.</p>\n\n<p>I have also tried many other configurations for the hello world project, to no success.</p>\n\n<p>My expected output for a working result: some console saying \"Hello ARM world\" to me.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c", "arrays", "reverse"], "comments": [{"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "edited": false, "score": 0, "creation_date": 1428535280, "post_id": 29526868, "comment_id": 47208333, "body": "What is q for? Use meaningful variable names."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1428535600, "post_id": 29526868, "comment_id": 47208436, "body": "Out of curiosity, what is this supposed to do when <code>arr[0] &gt; n</code>, where <code>n</code> is assumedly the maximum number of items in the input sequence?"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1428536031, "post_id": 29526868, "comment_id": 47208552, "body": "Are you sure about the question? It is surprising to have the first element of the array be both the number of items to reverse and be part of the slice so reversed."}], "answers": [{"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 1, "creation_date": 1428535845, "post_id": 29527015, "comment_id": 47208492, "body": "Did you even try this code?  It prints <code>6 2 3 4 5 5 7 8 9 10</code>.  Not what the OP expects"}, {"owner": {"reputation": 155, "user_id": 3539833, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/18e24c34a2d9ce257197af6a7b7fe4cd?s=128&d=identicon&r=PG&f=1", "display_name": "LearningCODE", "link": "https://stackoverflow.com/users/3539833/learningcode"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1428536410, "post_id": 29527015, "comment_id": 47208652, "body": "thank you, I didn&#39;t run it, I was confident it was correct, thank you for pointing that out!"}], "tags": [], "owner": {"reputation": 155, "user_id": 3539833, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/18e24c34a2d9ce257197af6a7b7fe4cd?s=128&d=identicon&r=PG&f=1", "display_name": "LearningCODE", "link": "https://stackoverflow.com/users/3539833/learningcode"}, "is_accepted": false, "score": -1, "last_activity_date": 1428536380, "last_edit_date": 1428536380, "creation_date": 1428535218, "answer_id": 29527015, "question_id": 29526868, "link": "https://stackoverflow.com/questions/29526868/reversing-an-array-of-the-first-n-numbers-in-c-programming/29527015#29527015", "title": "Reversing an array of the first n numbers in C programming", "body": "<p>This is the code to reverse the first n numbers</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(){\nint arr [10] = {5,2,3,4,5,6,7,8,9,10};\nint i,n=arr[0];\nfor (i=0; i&lt;n--; ++i){\n    int temp = arr[i];\n    arr[i]=arr[n];\n    arr[n] = temp;\n\n       }\n           for (i=0; i&lt;10; ++i){\n    printf(\"%d \",arr[i]);\n\n       }}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1428535524, "post_id": 29527036, "comment_id": 47208418, "body": "Note: the number of items to reverse is not supposed to be <code>n</code>, it is supposed to be the initial value of <code>arr[0]</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1428535727, "post_id": 29527036, "comment_id": 47208466, "body": "I do not think that&#39;s very do so. It is ridiculous."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1428535836, "post_id": 29527036, "comment_id": 47208490, "body": "I wouldn&#39;t either, but <code>&quot;since the first number is a 2&quot;</code> would seem to contradict <code>n</code> being meaningful for anything besides an upper limit. Either that or the OP outright misunderstood the very task now being asked about (a definite possibility). And no, I didn&#39;t down vote your answer. If the OP misunderstood the actual problem, your&#39;s is very likely a <i>correct</i> solution."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1428536129, "post_id": 29527036, "comment_id": 47208575, "body": "@WhozCraig but <code>&quot;the problem is to reverse the first n integers of an array&quot;</code>."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1428536260, "post_id": 29527036, "comment_id": 47208615, "body": "Again, I agree. Unfortunately the statements that follow contradict that very problem, as <code>n</code> is never mentioned again and the very number of values to reverse is assessed to be the first element value of the array. &quot;{2,4,1,3} would be reversed to {4,2,1,3} since the first number is a 2&quot;. It is a dreadfully written question, as it is impossible to fix something if you don&#39;t know how it is supposed to work."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1428536294, "post_id": 29527036, "comment_id": 47208627, "body": "The title <i>Reversing an array of the first n numbers in C programming</i> disagrees with the OP&#39;s explanation. As with comments and code, they are probably both wrong.  The question deserves a down vote until clarified."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1428536592, "post_id": 29527036, "comment_id": 47208701, "body": "I think the interpretation of the OP is incorrect.  I want discussions to end with this."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1428536794, "post_id": 29527036, "comment_id": 47208780, "body": "A good illustration of the famous <i>upto</i> operator: <code>i &lt;-- n</code> (just joking)"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1428538821, "post_id": 29527036, "comment_id": 47209320, "body": "It isn&#39;t  to be moved  If the beginning of the elements has a special meaning."}], "tags": [], "owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "is_accepted": false, "score": 1, "last_activity_date": 1428535346, "creation_date": 1428535346, "answer_id": 29527036, "question_id": 29526868, "link": "https://stackoverflow.com/questions/29526868/reversing-an-array-of-the-first-n-numbers-in-c-programming/29527036#29527036", "title": "Reversing an array of the first n numbers in C programming", "body": "<pre><code>int *reverse(int *arr,int n){\n    int i, temp;\n\n    for(i = 0; i &lt; --n ; i++){\n        temp = arr[i];\n        arr[i] = arr[n];\n        arr[n] = temp;\n    }\n\n    return arr;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 1, "last_activity_date": 1428535513, "creation_date": 1428535513, "answer_id": 29527071, "question_id": 29526868, "link": "https://stackoverflow.com/questions/29526868/reversing-an-array-of-the-first-n-numbers-in-c-programming/29527071#29527071", "title": "Reversing an array of the first n numbers in C programming", "body": "<p>You try and reverse the subarray twice, but fail to swap elements and go one step too far.  You should stop at the middle of the array:</p>\n\n<pre><code>int *reverse(int *arr, int n) {\n    int w, q = arr[0];\n    if (q &gt; n) {\n        /* handle this error! */\n        return NULL;\n    }\n    for (w = 0; w &lt; --q; w++) {\n        int e = arr[w];\n        arr[w] = arr[q];\n        arr[q] = e;\n    }\n    return arr;\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 4766428, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-8Z-prhf_nGg/AAAAAAAAAAI/AAAAAAAAAEs/dyeyFxXstg4/photo.jpg?sz=128", "display_name": "strongxbeliever", "link": "https://stackoverflow.com/users/4766428/strongxbeliever"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2715, "favorite_count": 0, "closed_date": 1428561316, "answer_count": 3, "score": -2, "last_activity_date": 1428539049, "creation_date": 1428534442, "last_edit_date": 1428539049, "question_id": 29526868, "link": "https://stackoverflow.com/questions/29526868/reversing-an-array-of-the-first-n-numbers-in-c-programming", "closed_reason": "Needs details or clarity", "title": "Reversing an array of the first n numbers in C programming", "body": "<p>My function is going into an infinite loop. The problem is to reverse the first n integers of an array ex: array <code>{2,4,1,3}</code> would be reversed to <code>{4,2,1,3}</code> since the first number is a 2, it switches the first 2 numbers and etc.</p>\n\n<p>Any ideas? :) </p>\n\n<p>My code:</p>\n\n<pre><code>int *reverse(int *arr,int n)\n{\n    int w; \n    int q=arr[0]-1; \n    int first_value = arr[0];\n\n    for(w=0; w&lt;=first_value; w++) \n    {\n        arr[w] = arr[q];\n        q--;\n    }\n\n    return (arr); \n}\n</code></pre>\n"}, {"tags": ["c", "haskell", "ffi", "c2hs"], "comments": [{"owner": {"reputation": 10320, "user_id": 453616, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f5c35ad8a6275273c50d1274fd549d84?s=128&d=identicon&r=PG", "display_name": "gspr", "link": "https://stackoverflow.com/users/453616/gspr"}, "edited": false, "score": 0, "creation_date": 1428561377, "post_id": 29526738, "comment_id": 47216201, "body": "Does it work when just built with GHC (i.e. not loaded with GHCi, but turned into a proper executable)?"}, {"owner": {"reputation": 702, "user_id": 2890063, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/07aeeae7c14c12cefde16bf826eceb4a?s=128&d=identicon&r=PG", "display_name": "ocramz", "link": "https://stackoverflow.com/users/2890063/ocramz"}, "reply_to_user": {"reputation": 10320, "user_id": 453616, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f5c35ad8a6275273c50d1274fd549d84?s=128&d=identicon&r=PG", "display_name": "gspr", "link": "https://stackoverflow.com/users/453616/gspr"}, "edited": false, "score": 0, "creation_date": 1428564526, "post_id": 29526738, "comment_id": 47217890, "body": "<code>ghc --make Structs.hs</code> gives what I believe is the same error, I&#39;ve edited the question"}], "answers": [{"tags": [], "owner": {"reputation": 965, "user_id": 229255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/588fe10267b620e1c0d0d188a8db2621?s=128&d=identicon&r=PG", "display_name": "Ian Ross", "link": "https://stackoverflow.com/users/229255/ian-ross"}, "is_accepted": true, "score": 5, "last_activity_date": 1428565807, "creation_date": 1428565807, "answer_id": 29532796, "question_id": 29526738, "link": "https://stackoverflow.com/questions/29526738/linker-error-in-c2hs-generated-c-binding/29532796#29532796", "title": "linker error in C2HS generated C binding", "body": "<p>The <code>get_foo</code> C function is defined in <code>Structs.c</code>, so you need to make that available to GHC.  This ought to work:</p>\n\n<pre><code>gcc -o Structs_c.o -c Structs.c\nghc --make Structs.hs Structs_c.o\n</code></pre>\n\n<p>For GHCi, I think you can then just say <code>ghci Structs.hs Structs_c.o</code>.  But you definitely need the C object file!</p>\n"}], "owner": {"reputation": 702, "user_id": 2890063, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/07aeeae7c14c12cefde16bf826eceb4a?s=128&d=identicon&r=PG", "display_name": "ocramz", "link": "https://stackoverflow.com/users/2890063/ocramz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 1, "accepted_answer_id": 29532796, "answer_count": 1, "score": 3, "last_activity_date": 1428571697, "creation_date": 1428533718, "last_edit_date": 1428571697, "question_id": 29526738, "link": "https://stackoverflow.com/questions/29526738/linker-error-in-c2hs-generated-c-binding", "title": "linker error in C2HS generated C binding", "body": "<p>I build and run the following minimal example (no external dependencies) with \n<code>C-&gt;Haskell Compiler, version 0.25.2 Snowboundest, 31 Oct 2014\n  build platform is \"x86_64-darwin\" &lt;1, True, True, 1&gt;</code> ; build command: </p>\n\n<pre><code>c2hs Structs.chs\nghci Structs.hs\n</code></pre>\n\n<p>but the linker complains with a </p>\n\n<pre><code>During interactive linking, GHCi couldn't find the following symbol: get_foo\n</code></pre>\n\n<p>Q : Why is this and how can I fix it? Thx in advance</p>\n\n<p>A : tl;dr : I wasn't compiling the .c into .o object code, DUH!</p>\n\n<p>Code follows:</p>\n\n<p><em>Structs.chs</em></p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>module Main where\n\nimport Foreign\nimport Foreign.C\n\n#include \"Structs.h\"\n\n{#pointer *foo as Foo#}\n\n{#fun get_foo {`Int'} -&gt; `Foo' return* #}\n\nmain :: IO ()\nmain = do\n  foo &lt;- get_foo 3\n  a1 &lt;- {#get struct foo-&gt;a#} foo\n  print a1\n</code></pre>\n\n<p><em>Structs.h</em></p>\n\n<pre class=\"lang-c prettyprint-override\"><code>struct foo {\n  int a;\n};\n\nstruct foo *get_foo(int n);\n</code></pre>\n\n<p><em>Structs.c</em></p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include \"Structs.h\"\n\nstruct foo f;\n\nstruct foo *get_foo(int n)\n{\n  f.a = n;\n  return &amp;f;\n}\n</code></pre>\n\n<p><em>Structs.hs</em></p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>-- -- C2HS generated Hs file, edited for clarity\nmodule Main where\n\nimport Foreign\nimport Foreign.C\n\ntype Foo = Ptr ()\n\nget_foo :: Int -&gt; IO Foo\nget_foo p =\n  get_foo'_ (fromIntegral p)\n\nmain :: IO ()\nmain = do\n  foo &lt;- get_foo 3\n  a1 &lt;- (\\ptr -&gt; peekByteOff ptr 0 :: IO CInt) foo\n  print a1\n\nforeign import ccall safe \"Structs.chs.h get_foo\"\n  get_foo'_ :: CInt -&gt; IO Foo\n</code></pre>\n\n<p>EDIT : <code>ghc --make Structs.hs</code> gives the same linker error:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>$ ghc --make Structs.hs\nLinking Structs1a ...\nUndefined symbols for architecture x86_64:\n\"_get_foo\", referenced from:\n    _c2MX_info in Structs.o\n    _c2Or_info in Structs.o\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n</code></pre>\n"}, {"tags": ["python", "c", "arrays", "numpy", "swig"], "answers": [{"tags": [], "owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": false, "score": 1, "last_activity_date": 1429291443, "creation_date": 1429291443, "answer_id": 29705709, "question_id": 29526701, "link": "https://stackoverflow.com/questions/29526701/passing-and-array-argument-to-c-from-python-using-swig/29705709#29705709", "title": "Passing and array argument to C from Python using SWIG", "body": "<p>Parse the Python list inside <code>my_setup()</code> instead of trying to translate it in your SWIG <code>.i</code> file.  Change</p>\n\n<pre><code>my_setup(char * my_string, int my_count, int my_types[], double my_rate, int my_mode);\n</code></pre>\n\n<p>to</p>\n\n<pre><code>my_setup(char * my_string, int my_count, PyObject *int_list, double my_rate, int my_mode);\n</code></pre>\n\n<p>and in my_setup</p>\n\n<pre><code>    int *array = NULL;\n    if ( PyList_Check( int_list ) )\n    {\n        int nInts = PyList_Size( int_list );\n        array = malloc( nInts * sizeof( *array ) );\n        for ( int ii = 0; ii &lt; nInts; ii++ )\n        {\n            PyObject *oo = PyList_GetItem( int_list, ii );\n            if ( PyInt_Check( oo ) )\n            {\n                array[ ii ] = ( int ) PyInt_AsLong( oo );\n            }\n        }\n    }\n</code></pre>\n\n<p>You'll have to add error checking.  And from C, always return a <code>PyObject *</code> back to Python when you're using SWIG.  That way, you can use <code>PyErr_SetString()</code> and return NULL to toss an exception.</p>\n"}], "owner": {"reputation": 31, "user_id": 1132982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bbb800bc6a6b440eece77c0f50fa07e?s=128&d=identicon&r=PG", "display_name": "polymath", "link": "https://stackoverflow.com/users/1132982/polymath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 963, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1429291443, "creation_date": 1428533541, "question_id": 29526701, "link": "https://stackoverflow.com/questions/29526701/passing-and-array-argument-to-c-from-python-using-swig", "title": "Passing and array argument to C from Python using SWIG", "body": "<p>I am using SWIG + Python + C for the first time, and I am having trouble passing an array from Python to C. </p>\n\n<p>Here is a function signature in C.</p>\n\n<pre><code>my_setup(char * my_string, int my_count, int my_types[], double my_rate, int my_mode);\n</code></pre>\n\n<p>I would like to call this C function from Python as follows</p>\n\n<pre><code>my_array = [1, 2, 3, 4, 5, 6]\nmy_setup(\"My string\", 6, my_array, 50, 0)\n</code></pre>\n\n<p>but I do not know how to construct the array <code>my_array</code>. The error I am getting is</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"test_script.py\", line 9, in &lt;module&gt;\n    r = my_library.my_setup(\"My string\", 6, my_types, 50, 0)\nTypeError: in method 'my_setup', argument 3 of type 'int []'\n</code></pre>\n\n<p>I have tried unsuccessfully to use the <a href=\"http://docs.scipy.org/doc/numpy/reference/swig.interface-file.html\" rel=\"nofollow\">SWIG interface file for numpy</a> and <a href=\"https://docs.python.org/2/library/ctypes.html\" rel=\"nofollow\">ctypes</a>.</p>\n\n<p>I hope someone can help me pass an array as the third argument of the function <code>my_setup</code>. </p>\n\n<p>Also, this is my first stack overflow post!</p>\n"}, {"tags": ["c", "matlab", "mex"], "answers": [{"tags": [], "owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "is_accepted": true, "score": 2, "last_activity_date": 1428533945, "creation_date": 1428533945, "answer_id": 29526788, "question_id": 29526646, "link": "https://stackoverflow.com/questions/29526646/mex-calculation-right-but-i-am-getting-wrong-output/29526788#29526788", "title": "mex: Calculation right; but, I am getting wrong output", "body": "<p>The problem is here</p>\n\n<pre><code>c = &amp;p;\n</code></pre>\n\n<p>You're relocating the pointer <code>c</code> so that it now points to the address of <code>p</code>. </p>\n\n<p>What you want to do is copy the contents of <code>p</code> to the address currently pointed to by <code>c</code> (the real part of the scalar you previously created).</p>\n\n<pre><code>*c = p;\n</code></pre>\n"}], "owner": {"reputation": 1082, "user_id": 1138921, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28e465db4c6f6e1260d382283c0b4f26?s=128&d=identicon&r=PG", "display_name": "Garima Singh", "link": "https://stackoverflow.com/users/1138921/garima-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 29526788, "answer_count": 1, "score": 1, "last_activity_date": 1428533945, "creation_date": 1428533222, "question_id": 29526646, "link": "https://stackoverflow.com/questions/29526646/mex-calculation-right-but-i-am-getting-wrong-output", "title": "mex: Calculation right; but, I am getting wrong output", "body": "<p>I am trying to use mex to be able to call c-function from Matlab.</p>\n\n<p>It seems that I can get inputs right and even calculations are right. But, it returns wrong input. Somehow I am messing up with output pointer Please help.</p>\n\n<p>Matlab code:</p>\n\n<pre><code>cd /home/dkumar/MatlabCodes_DKU;\nsmA_System = ConstructSystemMatrix();\n\nDir2  = '/home/dkumar/Mex_Codes_DKU/MexCode_Working/Mex_C_Codes_DKU_makefile_Working';\n\n% MEX\ncd(Dir2);\nsystem('make');\ntic\n    y = normpdfDKU(1/2,0,1)\ntoc\n</code></pre>\n\n<p>C-code</p>\n\n<pre><code>#include \"mex.h\"\n#include &lt;math.h&gt;\n#include &lt;stdio.h&gt;\n\n/* using namespace std; */\n\n#define pi (3.141592653589793)\n\nextern void _main();\n\nconst int numInputArgs  = 3;\nconst int numOutputArgs = 1;\n\n// Function declarations.\n// -----------------------------------------------------------------\ndouble  getMatlabScalar    (const mxArray* ptr);\n//double&amp; createMatlabScalar (mxArray*&amp; ptr);\n\n// Function definitions.\n// -----------------------------------------------------------------\nvoid mexFunction (int nlhs, mxArray *plhs[],\n          int nrhs, const mxArray *prhs[]) {\n\n\n  int res = TestingLibraries() ; \n\n  //declare variables\n  mxArray *c_out_m;\n  double  *c, p, c1;\n\n  #define B_OUT plhs[0]\n\n  // Check to see if we have the correct number of input and output\n  // arguments.\n  if (nrhs != numInputArgs)\n    mexErrMsgTxt(\" DKU-1: Incorrect number of input arguments\");\n  if (nlhs != numOutputArgs)\n    mexErrMsgTxt(\"DKU-2: Incorrect number of output arguments\");\n\n  // Get the inputs.\n  double x  = getMatlabScalar(prhs[0]);\n  double mu = getMatlabScalar(prhs[1]);\n  double v  = getMatlabScalar(prhs[2]);\n\n  // Create the output. It is also a double-precision scalar.\n  //double&amp; p = createMatlabScalar(plhs[0]);\n\n  //associate outputs\n  plhs[0] = mxCreateDoubleMatrix(1,1,mxREAL);\n  //associate pointers\n  c = mxGetPr(plhs[0]);\n\n  // Compute the value of the univariate Normal at x.\n  p = (double)(exp(-(x-mu)*(x-mu)/(2*v)) / sqrt(2*pi*v));\n  printf(\"First normal value: %f\\n\", p);\n\n  c = &amp;p; \n}\n\ndouble getMatlabScalar (const mxArray* ptr) {\n\n  // Make sure the input argument is a scalar in double-precision.\n  if (!mxIsDouble(ptr) || mxGetNumberOfElements(ptr) != 1)\n    mexErrMsgTxt(\"The input argument must be a double-precision scalar\");\n\n  return *mxGetPr(ptr);\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>First normal value: 0.352065\n\ny =\n\n     0\n\nElapsed time is 0.002202 seconds.\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 3, "creation_date": 1428533069, "post_id": 29526612, "comment_id": 47207660, "body": "<code>fgets(user_input, 30</code> seems wrong considering the buffer is only 25 bytes."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1428533219, "post_id": 29526612, "comment_id": 47207707, "body": "<code>var1</code> is uninitialized when you first enter the loop."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "reply_to_user": {"reputation": 1006, "user_id": 3888756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mPnk1.jpg?s=128&g=1", "display_name": "DigitalNinja", "link": "https://stackoverflow.com/users/3888756/digitalninja"}, "edited": false, "score": 0, "creation_date": 1428533366, "post_id": 29526612, "comment_id": 47207744, "body": "@DigitalNinja: I think some commands have only one word, in which case the second word should be passed as a zero length string."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1428533422, "post_id": 29526612, "comment_id": 47207763, "body": "Indeed, if <code>user_input</code> only holds 1 word, <code>var2</code> will stay untouched and if <code>user_input</code> only contains space characters, both <code>var1</code> and <code>var2</code> will stay untouched.  You should set <code>var1[0]</code> and <code>var2[0]</code> to <code>&#39;\\0&#39;</code> before the <code>sscanf</code>"}, {"owner": {"reputation": 1006, "user_id": 3888756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mPnk1.jpg?s=128&g=1", "display_name": "DigitalNinja", "link": "https://stackoverflow.com/users/3888756/digitalninja"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1428533427, "post_id": 29526612, "comment_id": 47207768, "body": "@MooingDuck Oh, thanks... the &quot;quit&quot;, didn&#39;t notice that."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1428533543, "post_id": 29526612, "comment_id": 47207800, "body": "<code>do_stuff</code> will be called for the <code>&quot;quit&quot;</code> command... probably not intended.  move the test after the <code>sscanf()</code> and break from the loop if it matches."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1428533652, "post_id": 29526612, "comment_id": 47207831, "body": "You should test <code>fgets()</code> return value, avoiding an infinite loop upon end of file and making <code>clear_buffer()</code> useless."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 1, "creation_date": 1428533695, "post_id": 29526612, "comment_id": 47207850, "body": "<code>printf(&quot;%s&quot;, &quot;Done\\n&quot;);</code> -&gt; <code>printf(&quot;Done\\n&quot;);</code>"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 1, "creation_date": 1428534386, "post_id": 29526612, "comment_id": 47208060, "body": "<i>If the user only inputs one word, the second variable will stay the same value from the previous loop.</i>  is this a requirement or a problem?"}], "answers": [{"comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1428533314, "post_id": 29526622, "comment_id": 47207731, "body": "Heh, correction to your last sentance: if <code>scanf</code> doesn&#39;t read both strings, it <i>needs to clear</i> the parameter(s)."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 2, "last_activity_date": 1428541259, "last_edit_date": 1428541259, "creation_date": 1428533083, "answer_id": 29526622, "question_id": 29526612, "link": "https://stackoverflow.com/questions/29526612/how-do-you-declare-temporary-strings-for-reuse-in-c/29526622#29526622", "title": "How do you declare temporary strings for reuse in C?", "body": "<p>Multiple problems</p>\n\n<ol>\n<li><p>You never initialize <code>var1</code> but you use <code>strcmp()</code>, you need to initialize <code>var1</code> before trying to use <code>strcmp()</code>, if you want to initialize to an empty string just</p>\n\n<pre><code>var1[0] = '\\0';\n</code></pre></li>\n<li><p>You pass <code>30</code> to <code>fgets()</code> but <code>user_input</code> can only hold <code>25</code> characters.</p></li>\n</ol>\n\n<p>Now to why is the program behaving the way it is, you need to check that <code>sscanf()</code> did read both strings, if it doesn't it does not alter the passed parameters.</p>\n\n<p>The <code>scanf()</code> function returns the number of specifiers matched by the input, so if</p>\n\n<ol>\n<li><code>scanf()</code> returns <code>0</code>, it means both parameters are not initialized/modified.</li>\n<li><code>scanf()</code> returns <code>1</code> one of the parameters is initialized/modified.</li>\n<li>When both were initialized/modified, then it will return <code>2</code>, so checking for that would let you know what is going wrong, and you can print the input string to verify that <code>scanf()</code> was right, and the input was wrong..</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1428534310, "post_id": 29526793, "comment_id": 47208037, "body": "Why should <code>quit now</code> invoke <code>do_stuff</code> and more importantly, why should commands without arguments be ignored?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1428534419, "post_id": 29526793, "comment_id": 47208075, "body": "If there are two inputs to the input I is considered not want to enable a quit. This is because when you want to stop it there is no need to specify a second argument. also If the two inputs are not it I is considered to be invalid. The reason is because the <code>do_stuff</code> requires two arguments."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1428534914, "post_id": 29526793, "comment_id": 47208225, "body": "The requirements are not clear from the OP&#39;s question, to say the least. Your argument on <code>quit</code> it debatable.  What about commands without an argument? Just ignoring them seems incorrect."}], "tags": [], "owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "is_accepted": false, "score": 1, "last_activity_date": 1428534338, "last_edit_date": 1428534338, "creation_date": 1428533976, "answer_id": 29526793, "question_id": 29526612, "link": "https://stackoverflow.com/questions/29526612/how-do-you-declare-temporary-strings-for-reuse-in-c/29526793#29526793", "title": "How do you declare temporary strings for reuse in C?", "body": "<pre><code>char user_input[50+1];\nchar var1[25], var2[25];\n\nwhile(fgets(user_input, sizeof(user_input), stdin)){\n    int state = sscanf(user_input, \"%24s %24s\", var1, var2);\n    if(state == 1 &amp;&amp; strcmp(var1, \"quit\") == 0)\n        break;\n    else if(state == 2)\n        do_stuff(var1, var2);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 1, "last_activity_date": 1428534148, "creation_date": 1428534148, "answer_id": 29526822, "question_id": 29526612, "link": "https://stackoverflow.com/questions/29526612/how-do-you-declare-temporary-strings-for-reuse-in-c/29526822#29526822", "title": "How do you declare temporary strings for reuse in C?", "body": "<p>Here is a modified version taking comments into account and protecting <code>sscanf</code> arguments:</p>\n\n<pre><code>int main(int argc, char *argv[]) {\n    char user_input[80];\n    char var1[25], var2[25];\n\n    while (fgets(user_input, (int)(sizeof user_input), stdin)) {\n        *var2 = '\\0';\n        if (sscanf(user_input, \"%24s %24s\", var1, var2) &gt; 0) {\n            if (!strcmp(var1, \"quit\"))\n                break;\n            do_stuff(var1, var2);\n        }\n    }\n    printf(\"Done\\n\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "is_accepted": false, "score": 5, "last_activity_date": 1454945735, "last_edit_date": 1454945735, "creation_date": 1428537148, "answer_id": 29527318, "question_id": 29526612, "link": "https://stackoverflow.com/questions/29526612/how-do-you-declare-temporary-strings-for-reuse-in-c/29527318#29527318", "title": "How do you declare temporary strings for reuse in C?", "body": "<blockquote>\n  <p>i am not sure how to declare the strings properly</p>\n</blockquote>\n\n<p>Strings aren't a type. They're a value pattern, and like other values we don't declare them; we assign them (using <code>strcpy</code> and other functions, in this case). If you say an <code>int</code> stores a multiple of ten, then it ends in 0... If you say an array of <code>char</code> stores a string, then it ends at the first <code>'\\0'</code>. Do you see the pattern yet? We can store multiples of ten in different kinds of integer variables, and likewise for strings we can choose different types of character arrays. Similarly for storing numeric values in <code>integer</code> variables, when declaring an array to store a string, you'll want to be sure the array has enough space to store all of the characters for the string plus a <code>'\\0'</code> at the end.</p>\n\n<blockquote>\n  <p>If the user only inputs one word, the second variable will stay the same value from the previous loop.</p>\n</blockquote>\n\n<p>Check the return value of <code>sscanf</code>.</p>\n\n<p>For example, when considering <code>int x = sscanf(user_input, \"%s %s\", var1, var2);</code> you may want to be sure the 2 arguments you give <code>sscanf</code> are assigned to, in which case you'll be checking that <code>x == 2</code>. If you only care about the first argument being assigned, then you'll be happy when <code>x == 1</code>, too. However, if <code>x &lt;= 0</code> then you can't trust either <code>var1</code> or <code>var2</code></p>\n"}], "owner": {"reputation": 31, "user_id": 4766367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fee354126a83f512c526d61ed2021551?s=128&d=identicon&r=PG&f=1", "display_name": "carlo ballesteros", "link": "https://stackoverflow.com/users/4766367/carlo-ballesteros"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1715, "favorite_count": 0, "answer_count": 4, "score": 3, "last_activity_date": 1454945735, "creation_date": 1428532996, "question_id": 29526612, "link": "https://stackoverflow.com/questions/29526612/how-do-you-declare-temporary-strings-for-reuse-in-c", "title": "How do you declare temporary strings for reuse in C?", "body": "<p>I have a while loop that takes a user input until the user says quit but i am not sure how to declare the strings properly. If the user only inputs one word, the second variable will stay the same value from the previous loop.     </p>\n\n<pre><code>int main(int argc, char * argv[]){\n    char user_input[25];\n    char var1[25], var2[25];\n    while(strcmp(var1, \"quit\") != 0){\n        clear_buffer(user_input);\n        fgets(user_input, 30, stdin);\n        sscanf(user_input, \"%s %s\", var1, var2);\n        do_stuff(var1, var2);\n    }\n    printf(\"%s\", \"Done\\n\");\n</code></pre>\n"}, {"tags": ["android", "c", "android-ndk", "java-native-interface", "surfaceview"], "comments": [{"owner": {"reputation": 48475, "user_id": 294248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b5dbf3643399236154fbf7f94c20367?s=128&d=identicon&r=PG&f=1", "display_name": "fadden", "link": "https://stackoverflow.com/users/294248/fadden"}, "edited": false, "score": 0, "creation_date": 1428532962, "post_id": 29526488, "comment_id": 47207630, "body": "<code>surfaceChanged()</code> is called when the surface characteristics change, not when the surface contents change. Are you able to draw on the surface with a Canvas from Java code? There are various things that can prevent a SurfaceView surface from being visible (like setting a background on the View), and it would be good to rule them out."}, {"owner": {"reputation": 2609, "user_id": 3014036, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Q7ZiN.jpg?s=128&g=1", "display_name": "ahmed_khan_89", "link": "https://stackoverflow.com/users/3014036/ahmed-khan-89"}, "reply_to_user": {"reputation": 48475, "user_id": 294248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b5dbf3643399236154fbf7f94c20367?s=128&d=identicon&r=PG&f=1", "display_name": "fadden", "link": "https://stackoverflow.com/users/294248/fadden"}, "edited": false, "score": 0, "creation_date": 1428533722, "post_id": 29526488, "comment_id": 47207863, "body": "I am setting a background to the surfaceview, just to see that it has been created and drawn. I will try to remove the background. Thanks"}, {"owner": {"reputation": 2609, "user_id": 3014036, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Q7ZiN.jpg?s=128&g=1", "display_name": "ahmed_khan_89", "link": "https://stackoverflow.com/users/3014036/ahmed-khan-89"}, "reply_to_user": {"reputation": 48475, "user_id": 294248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b5dbf3643399236154fbf7f94c20367?s=128&d=identicon&r=PG&f=1", "display_name": "fadden", "link": "https://stackoverflow.com/users/294248/fadden"}, "edited": false, "score": 0, "creation_date": 1428533903, "post_id": 29526488, "comment_id": 47207917, "body": "it made it !!! thanks !!! it was the background :) If you don&#39;t mind, I would propose that you write your comment in an answer, it can help other people..."}], "answers": [{"tags": [], "owner": {"reputation": 48475, "user_id": 294248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b5dbf3643399236154fbf7f94c20367?s=128&d=identicon&r=PG&f=1", "display_name": "fadden", "link": "https://stackoverflow.com/users/294248/fadden"}, "is_accepted": true, "score": 3, "last_activity_date": 1428540341, "creation_date": 1428540341, "answer_id": 29527819, "question_id": 29526488, "link": "https://stackoverflow.com/questions/29526488/android-how-to-update-a-surfaceview-from-the-ndk-by-updating-the-surface-buffer/29527819#29527819", "title": "android: how to Update a SurfaceView from the ndk by updating the Surface buffer?", "body": "<p>One of the most common problems leading to a blank SurfaceView is setting a background for the View.  The View contents are intended to be a transparent \"hole\", used only for layout.  The Surface contents are on a separate layer, below the View layer, so they are only visible if the View remains transparent.</p>\n\n<p>The View background should generally be disabled, and nothing drawn on the View, unless you want some sort of \"mask\" effect (like rounded corners).</p>\n"}], "owner": {"reputation": 2609, "user_id": 3014036, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Q7ZiN.jpg?s=128&g=1", "display_name": "ahmed_khan_89", "link": "https://stackoverflow.com/users/3014036/ahmed-khan-89"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2750, "favorite_count": 1, "accepted_answer_id": 29527819, "answer_count": 1, "score": 3, "last_activity_date": 1428540341, "creation_date": 1428532300, "question_id": 29526488, "link": "https://stackoverflow.com/questions/29526488/android-how-to-update-a-surfaceview-from-the-ndk-by-updating-the-surface-buffer", "title": "android: how to Update a SurfaceView from the ndk by updating the Surface buffer?", "body": "<p>I am working on an image processing project. I have a <code>SurfaceView</code> where I want to show \"images\" form the jni side.</p>\n\n<p>I followed this <a href=\"https://vec.io/posts/how-to-render-image-buffer-in-android-ndk-native-code\" rel=\"nofollow\">blog</a>  , the <strong>NDK ANativeWindow API</strong> instructions to get the pointer of the buffer and updated from the C side.</p>\n\n<p>I got the code to run but my SurfaceView is not updating (not showing any image...). Also the callback <code>surfaceChanged</code> is not called when the buffer is updated.</p>\n\n<p>Here is what I am doing:</p>\n\n<p><strong><em>JNI SIDE :</em></strong></p>\n\n<pre><code>/*\n  * Class:     com_example_myLib\n  * Method:    renderImage\n  * Signature: (JI)V\n  */\n\nJNIEXPORT void JNICALL com_example_myLib_renderImage\n  (JNIEnv *mJNIEnv, jobject mjobject, jobject javaSurface) {\n\n#ifdef DEBUG_I\n    LOGI(\"renderImage attempt !\");\n#endif\n\n// load an ipl image. code tested and works well with ImageView.\nIplImage *iplimage = loadMyIplImage();\n\nint iplImageWidth = iplimage-&gt;width;\nint iplImageHeitgh = iplimage-&gt;height;\n\nchar * javalBmpPointer = malloc(iplimage-&gt;width * iplimage-&gt;height * 4);\nint _javaBmpRowBytes = iplimage-&gt;width * 4;\n\n\n\n // code tested and works well with ImageView.\n    copyIplImageToARGBPointer(iplimage, javalBmpPointer, _javaBmpRowBytes,\n            iplimage-&gt;width, iplimage-&gt;height);\n#ifdef DEBUG_I\n    LOGI(\"ANativeWindow_fromSurface\");\n #endif\nANativeWindow* window = ANativeWindow_fromSurface(env, javaSurface);\n\n#ifdef DEBUG_I\n    LOGI(\"Got window %p\", window);\n #endif\n\n if(window != 0 ){\n    ANativeWindow_Buffer buffer;\n    if (ANativeWindow_lock(window, &amp;buffer, NULL) == 0) {\n        #ifdef DEBUG_I\n            LOGI(\"GANativeWindow_lock %p\", buffer);\n         #endif\n        memcpy(buffer.bits, javalBmpPointer,  iplimage-&gt;width* iplimage-&gt;height* 4); // ARGB_8888\n        ANativeWindow_unlockAndPost(window);\n    }\n\n    ANativeWindow_release(window);\n\n }\n</code></pre>\n\n<p>}</p>\n\n<p><strong><em>java SIDE :</em></strong></p>\n\n<pre><code>// every time that I want to reload the image:\n   renderImage(mySurfaceView.getHolder().getSurface());\n</code></pre>\n\n<p>Thanks for your time and help! </p>\n"}, {"tags": ["c", "segmentation-fault", "argv", "argc"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 3, "creation_date": 1428531132, "post_id": 29526243, "comment_id": 47206940, "body": "You never check if <code>fopen()</code> succeeded! And <a href=\"http://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\"><code>while (!feof(file))</code></a> is always wrong."}, {"owner": {"reputation": 10702, "user_id": 2079103, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XlVYy.png?s=128&g=1", "display_name": "clearlight", "link": "https://stackoverflow.com/users/2079103/clearlight"}, "edited": false, "score": 0, "creation_date": 1428531191, "post_id": 29526243, "comment_id": 47206958, "body": "Did you try running <code>pstack</code> on the core file left behind when it crashed (assuming you have your core dump settings configured properly on your system), or run it in a debugger such as gdb so when it crash you can learn the line #?  When a program segv&#39;s first thing you need to do is figure out the line it occurs on."}, {"owner": {"reputation": 10702, "user_id": 2079103, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XlVYy.png?s=128&g=1", "display_name": "clearlight", "link": "https://stackoverflow.com/users/2079103/clearlight"}, "edited": false, "score": 0, "creation_date": 1428531297, "post_id": 29526243, "comment_id": 47207001, "body": "Actually <code>pstack &lt;core&gt;</code> works on Solaris but might not on Linux, but this should:  <code>gdb path&#47;to&#47;corefile&#47;&lt;core&gt;</code> <code>(gdb) where</code> <code>(gdb) thread apply all bt</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1428531427, "post_id": 29526243, "comment_id": 47207057, "body": "<code>if ((BlackBox[i].firstName = (char*)calloc(strlen(firstName),</code> +1 for NUL"}, {"owner": {"reputation": 643, "user_id": 3337714, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/5e27d23461546118aec89517a1d643c2?s=128&d=identicon&r=PG&f=1", "display_name": "user3337714", "link": "https://stackoverflow.com/users/3337714/user3337714"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1428531653, "post_id": 29526243, "comment_id": 47207154, "body": "@iharob I did not because the file was with me and this is not an enterprise code. I do understand it is wrong but IS that causing the SF fault?"}, {"owner": {"reputation": 643, "user_id": 3337714, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/5e27d23461546118aec89517a1d643c2?s=128&d=identicon&r=PG&f=1", "display_name": "user3337714", "link": "https://stackoverflow.com/users/3337714/user3337714"}, "reply_to_user": {"reputation": 10702, "user_id": 2079103, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XlVYy.png?s=128&g=1", "display_name": "clearlight", "link": "https://stackoverflow.com/users/2079103/clearlight"}, "edited": false, "score": 0, "creation_date": 1428531701, "post_id": 29526243, "comment_id": 47207169, "body": "@Allaboutthatbase2 I do not know how to run pstack or gdb? But I can try. Also what can be the cause for SF here?"}, {"owner": {"reputation": 643, "user_id": 3337714, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/5e27d23461546118aec89517a1d643c2?s=128&d=identicon&r=PG&f=1", "display_name": "user3337714", "link": "https://stackoverflow.com/users/3337714/user3337714"}, "reply_to_user": {"reputation": 5486, "user_id": 1236397, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/67c4831541a7ce09aeccf0a3abbf008b?s=128&d=identicon&r=PG", "display_name": "James Wilkins", "link": "https://stackoverflow.com/users/1236397/james-wilkins"}, "edited": false, "score": 0, "creation_date": 1428531744, "post_id": 29526243, "comment_id": 47207186, "body": "@JamesWilkins So I do need to make some specific change to my code and will that correct the SF fault"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1428532166, "post_id": 29526243, "comment_id": 47207325, "body": "<code>if (!strcasecmp(firstName,</code> : <code>firstName</code> is uninitialized when parameter of <code>input</code> == 1."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1428532290, "post_id": 29526243, "comment_id": 47207379, "body": "Do not give your functions all uppercase names, it is classically reserved for macro names."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1428532630, "post_id": 29526243, "comment_id": 47207506, "body": "Change <code>(char*)calloc(strlen(lastName), sizeof(char))</code> to <code>strdup(lastName)</code> and the same for the other string duplication, and get rid of the <code>strcpy()</code> below that.  Also note that <code>lastName    = strtok(text, &quot; &quot;);</code> should take <code>NULL</code> instead of <code>text</code>."}, {"owner": {"reputation": 643, "user_id": 3337714, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/5e27d23461546118aec89517a1d643c2?s=128&d=identicon&r=PG&f=1", "display_name": "user3337714", "link": "https://stackoverflow.com/users/3337714/user3337714"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1428533038, "post_id": 29526243, "comment_id": 47207651, "body": "@iharob you are taking it personal. I am novice and SF error has not relation to check&#39;s of <code>fopen()</code> or <code>while(!feof(file))</code> instead of helping. You are simply criticizing. I am sorry to offend you."}, {"owner": {"reputation": 643, "user_id": 3337714, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/5e27d23461546118aec89517a1d643c2?s=128&d=identicon&r=PG&f=1", "display_name": "user3337714", "link": "https://stackoverflow.com/users/3337714/user3337714"}, "reply_to_user": {"reputation": 5486, "user_id": 1236397, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/67c4831541a7ce09aeccf0a3abbf008b?s=128&d=identicon&r=PG", "display_name": "James Wilkins", "link": "https://stackoverflow.com/users/1236397/james-wilkins"}, "edited": false, "score": 0, "creation_date": 1428533134, "post_id": 29526243, "comment_id": 47207681, "body": "@JamesWilkins I made the changes to the <code>size</code> but still <code>SF</code> error. :("}, {"owner": {"reputation": 5486, "user_id": 1236397, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/67c4831541a7ce09aeccf0a3abbf008b?s=128&d=identicon&r=PG", "display_name": "James Wilkins", "link": "https://stackoverflow.com/users/1236397/james-wilkins"}, "edited": false, "score": 0, "creation_date": 1428561467, "post_id": 29526243, "comment_id": 47216243, "body": "Besides the fact that the last line might not have a new line character, you also forgot that strcpy copies the null char, so <code>calloc(strlen(firstName),...</code> does not create a large enough string buffer (same goes for &#39;lastName&#39;)."}], "answers": [{"comments": [{"owner": {"reputation": 643, "user_id": 3337714, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/5e27d23461546118aec89517a1d643c2?s=128&d=identicon&r=PG&f=1", "display_name": "user3337714", "link": "https://stackoverflow.com/users/3337714/user3337714"}, "edited": false, "score": 0, "creation_date": 1428532024, "post_id": 29526407, "comment_id": 47207275, "body": "I am trying to read a file which contains line in this format &quot;John Doe 777777&quot; and I am trying to split them in the form of <code>firstName, lastName, number</code>. What would be the best way to correct this situation. Thank you."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 643, "user_id": 3337714, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/5e27d23461546118aec89517a1d643c2?s=128&d=identicon&r=PG&f=1", "display_name": "user3337714", "link": "https://stackoverflow.com/users/3337714/user3337714"}, "edited": false, "score": 0, "creation_date": 1428532216, "post_id": 29526407, "comment_id": 47207346, "body": "I told you.  The second <code>strtok()</code> call must pass <code>NULL</code> as its first argument.  That is how you instruct it to return the <i>next</i> token instead of tokenizing again from the beginning.  As a secondary -- but nevertheless important -- matter, you should always check the return value of <code>strtok()</code> in order to handle errors in the input data more gracefully than by crashing."}, {"owner": {"reputation": 643, "user_id": 3337714, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/5e27d23461546118aec89517a1d643c2?s=128&d=identicon&r=PG&f=1", "display_name": "user3337714", "link": "https://stackoverflow.com/users/3337714/user3337714"}, "edited": false, "score": 0, "creation_date": 1428532518, "post_id": 29526407, "comment_id": 47207465, "body": "I have made the changes. <code>lastName = strtok(NULL, &quot; &quot;);</code> and I still get the same error."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 643, "user_id": 3337714, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/5e27d23461546118aec89517a1d643c2?s=128&d=identicon&r=PG&f=1", "display_name": "user3337714", "link": "https://stackoverflow.com/users/3337714/user3337714"}, "edited": false, "score": 0, "creation_date": 1428590994, "post_id": 29526407, "comment_id": 47235367, "body": "That&#39;s because you have more errors than that, as others have observed.  I have updated my answer to call out two more."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 0, "last_activity_date": 1428590903, "last_edit_date": 1428590903, "creation_date": 1428531837, "answer_id": 29526407, "question_id": 29526243, "link": "https://stackoverflow.com/questions/29526243/c-program-segmentation-fault-main/29526407#29526407", "title": "C Program Segmentation Fault main()", "body": "<p>You have a problem in this code:</p>\n\n<pre><code>    firstName   = strtok(text, \" \");\n    lastName    = strtok(text, \" \");\n    number      = strtok(NULL, \"\\n\");\n</code></pre>\n\n<p>...</p>\n\n<pre><code>    BlackBox[i].number = atol(number);\n</code></pre>\n\n<p>The second <code>strtok()</code> call should pass <code>NULL</code> as its first argument.  As it is, the third <code>strtok()</code> call is <em>certain</em> to return <code>NULL</code> because the first call modifies <code>text</code> in such a way that the second consumes the whole thing (when tokenizing again from the beginning, as it erroneously does).  You do not test for that, however, and as a result, <code>atol()</code> attempts to dereference a null pointer.</p>\n\n<p><strong>Update</strong>:</p>\n\n<p>Additionally, as @chqrlie and later @JamesWilkins observed, you do not allocate sufficient space for <code>BlackBox[i].firstName</code> and <code>BlackBox[i].lastName</code>, as you need room for the string terminators as well.  This is an entirely separate problem that could <em>also</em> produce a segfault.  I like @chqrlie's suggestion to switch to <code>strdup()</code>, but it would be sufficient to just increase each allocation by one unit.</p>\n\n<p><strong>Update 2</strong>:</p>\n\n<p>Furthermore, you have an issue with this line:</p>\n\n<pre><code>    getline(&amp;text, &amp;chrCount, stream);\n</code></pre>\n\n<p>You do not initialize variable <code>text</code> before the first call, so it contains a junk value.  The function allocates a buffer only when its first argument points to a NULL pointer; otherwise it writes the line to the buffer pointed to by the pointer obtained by dereferencing the first argument.  Writing to a random location in memory certainly produces undefined behavior, which in practice often manifests as a segfault.</p>\n\n<p>Moreover, unless you can rely on no line of the file being longer than the first, you also need to free the <code>text</code> pointer at the end of each loop iteration AND reset its value to <code>NULL</code>, so that <code>getline()</code> allocates a fresh buffer on the next iteration.  If you do not free it on each iteration, then you need instead to free it after the end of the loop; else you will leak memory.</p>\n"}, {"tags": [], "owner": {"reputation": 5486, "user_id": 1236397, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/67c4831541a7ce09aeccf0a3abbf008b?s=128&d=identicon&r=PG", "display_name": "James Wilkins", "link": "https://stackoverflow.com/users/1236397/james-wilkins"}, "is_accepted": false, "score": 0, "last_activity_date": 1428602050, "last_edit_date": 1428602050, "creation_date": 1428563680, "answer_id": 29532102, "question_id": 29526243, "link": "https://stackoverflow.com/questions/29526243/c-program-segmentation-fault-main/29532102#29532102", "title": "C Program Segmentation Fault main()", "body": "<p>Try this (though I'm using Visual Studio on Windows).  I added code to check for a missing '\\n' on the last line, and also allowed for a variable number of search terms.  I also increased the memory allocation for strings by 1 to account for the null terminating character.  I noticed you are using <code>getline(const char*...</code>, which I think is GNU (Linux?), so I change that to <code>fgets()</code> just so I could compile and test it in VS (so you can change it back if you like).  I put in various null checks as well, to be safer.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nstruct _data\n{\n    char *firstName;\n    char *lastName;\n    long number;\n};\n\n// SCAN FILE\nint SCAN(FILE *(*stream))\n{\n    *stream = fopen(\"inputFile.data\", \"r\");\n    if (*stream == NULL)\n    {\n        perror(\"Error opening file\");\n        return 0;\n    }\n\n    char ch = 0, lines = 0, linesize = 0;\n\n    while ((ch = fgetc(*stream)) != EOF)\n    {\n        if (ch == '\\n')\n        {\n            lines++;\n            linesize = 0;\n        }\n        else linesize++;\n    }\n\n    if (linesize &gt; 0)\n        lines++; // (last line doesn't have '\\n')\n\n    return lines;\n}\n\n// LOAD FILE\nstruct _data *LOAD(FILE *stream, int lineCount)\n{\n    int i;\n    size_t chrCount = 256;\n    char text[256], *result, *number, *firstName, *lastName;\n    struct _data *BlackBox;\n\n    if ((BlackBox = (struct _data*)calloc(lineCount, sizeof(struct _data))) == NULL)\n    {\n        printf(\"ERROR - Could not allocate memory.\\n\");\n        exit(0);\n    }\n    else memset(BlackBox, 0, sizeof(struct _data) * lineCount); // (make sure all data members are null to begin)\n\n    rewind(stream);\n\n\n    for (i = 0; i &lt; lineCount; i++)\n    {\n        result = fgets(text, chrCount, stream);\n        if (result == NULL)\n            break; // (EOF)\n\n        firstName = strtok(text, \" \");\n        lastName = strtok(NULL, \" \");\n        number = strtok(NULL, \"\\n\");\n\n        // Allocate memory for name part of struct.\n        if ((BlackBox[i].firstName = (char*)calloc(strlen(firstName) + 1, sizeof(char))) == NULL)\n        {\n            printf(\"ERROR - Could not allocate memory.\\n\");\n            exit(0);\n        }\n        if ((BlackBox[i].lastName = (char*)calloc(strlen(lastName) + 1, sizeof(char))) == NULL)\n        {\n            printf(\"ERROR - Could not allocate memory.\\n\");\n            exit(0);\n        }\n\n        strcpy(BlackBox[i].firstName, firstName);\n        strcpy(BlackBox[i].lastName, lastName);\n        BlackBox[i].number = atol(number);\n    }\n\n    fclose(stream);\n\n    return BlackBox;\n}\n\n\nvoid SEARCH(struct _data *BlackBox, char **names, int lineCount, int inputs)\n{\n    int i, l;\n    int found = 0;\n\n    printf(\"*******************************************\\n\");\n\n    for (i = 0; i &lt; inputs; ++i)\n    {\n        for (l = 0; l &lt; lineCount; ++l)\n        {\n            if (BlackBox[l].firstName != NULL &amp;&amp; !_stricmp(names[i], BlackBox[l].firstName)\n                || BlackBox[l].lastName != NULL &amp;&amp; !_stricmp(names[i], BlackBox[l].lastName))\n            {\n                printf(\"The name was found on line %d.\\n\", 1 + l);\n                found = 1;\n                break;\n            }\n        }\n        if (found) break;\n    }\n\n    if (!found)\n        printf(\"The name was NOT found.\\n\");\n\n    printf(\"*******************************************\\n\");\n}\n\n// FREE MEMORY\nvoid FREE(struct _data *BlackBox, int lineCount)\n{\n    int i;\n    for (i = 0; i &lt; lineCount; i++)\n    {\n        if (BlackBox[i].firstName != NULL)\n            free(BlackBox[i].firstName);\n        if (BlackBox[i].lastName != NULL)\n            free(BlackBox[i].lastName);\n    }\n    free(BlackBox);\n}\n\n\n// MAIN\nint main(int argc, char **argv)\n{\n    int lineCount;\n    FILE *stream;\n    struct _data *BlackBox;\n\n    // argc == 1 WORKS, Below message is printed.\n    if (argc == 1)\n    {\n        printf(\"*******************************************\\n\");\n        printf(\"* You must include a name to search for.  *\\n\");\n        printf(\"*******************************************\\n\");\n    }\n    // argc == 2 DOES NOT WORK, Segmentation Fault.     \n    if (argc &gt; 1)\n    {\n        lineCount = SCAN(&amp;stream);\n        if (lineCount &gt; 0)\n        {\n            BlackBox = LOAD(stream, lineCount);\n            SEARCH(BlackBox, argv + 1, lineCount, argc - 1);\n            FREE(BlackBox, lineCount);\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Tested it on the command line, and it works.</p>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1488002358, "post_id": 42452436, "comment_id": 72048561, "body": "This is unconventional but it is correct code.  The parameters to <code>main</code> do not have special names, you could call them <code>donald</code> and <code>sean</code> if you wanted"}, {"owner": {"reputation": 113, "user_id": 7603779, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7d5cb463ed628d40daaab866402a759b?s=128&d=identicon&r=PG&f=1", "display_name": "moosefoot", "link": "https://stackoverflow.com/users/7603779/moosefoot"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1488063307, "post_id": 42452436, "comment_id": 72067272, "body": "I see, thank you for pointing that out. Regardless, it is better to follow conventions in cases like this (especially when using the names <code>argc</code> and <code>argv</code>). It just makes the code more readable for others."}], "tags": [], "owner": {"reputation": 113, "user_id": 7603779, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7d5cb463ed628d40daaab866402a759b?s=128&d=identicon&r=PG&f=1", "display_name": "moosefoot", "link": "https://stackoverflow.com/users/7603779/moosefoot"}, "is_accepted": false, "score": -2, "last_activity_date": 1488001519, "creation_date": 1488001519, "answer_id": 42452436, "question_id": 29526243, "link": "https://stackoverflow.com/questions/29526243/c-program-segmentation-fault-main/42452436#42452436", "title": "C Program Segmentation Fault main()", "body": "<p>The problem is the <code>argv</code> and <code>argc</code>. <code>argc</code> is supposed to be an int (think argument <em>count</em>), while argv is meant to be <code>char**</code>. You have them mixed up in your <code>main</code>.</p>\n"}], "owner": {"reputation": 643, "user_id": 3337714, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/5e27d23461546118aec89517a1d643c2?s=128&d=identicon&r=PG&f=1", "display_name": "user3337714", "link": "https://stackoverflow.com/users/3337714/user3337714"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 239, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1488001519, "creation_date": 1428530917, "question_id": 29526243, "link": "https://stackoverflow.com/questions/29526243/c-program-segmentation-fault-main", "title": "C Program Segmentation Fault main()", "body": "<p>I am novice to C programming and I have written a code to a requirement specification but I am consistently getting Segmentation Fault and unable to proceed ahead.\nIf the file name is 'code.c' and it runs with an error of not passing the argument (filename). But if the filename is passed, we land in Segmentation Fault.\nAny help/suggestions will be appreciated.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n#include &lt;string.h&gt;\n\n\n\nstruct _data \n{               \n   char *firstName;\n   char *lastName;\n   long number;\n}; \n\n// SCAN FILE\nint SCAN(FILE *(*stream))\n{\n    *stream = fopen(\"inputFile.data\", \"r\");\n\n    int ch = 0, lines = 0;\n\n    while (!feof(*stream))\n    {\n        ch = fgetc(*stream);\n        if (ch == '\\n')\n        {\n            lines++;\n        }\n    }\n    return lines;\n}\n\n// LOAD FILE\nstruct _data *LOAD(FILE *stream, int size) \n{\n    int i;\n    size_t chrCount;\n    char *text, *number, *firstName, *lastName;\n    struct _data *BlackBox;\n\n    if ((BlackBox = (struct _data*)calloc(size, sizeof(struct _data))) == NULL) \n    {\n          printf(\"ERROR - Could not allocate memory.\\n\");\n          exit(0);\n    }\n\n    rewind(stream);\n\n\n    for (i = 0; i &lt; size; i++) \n    {\n        getline(&amp;text, &amp;chrCount, stream);\n        firstName   = strtok(text, \" \");\n        lastName    = strtok(text, \" \");\n        number      = strtok(NULL, \"\\n\");\n\n        // Allocate memory for name part of struct.\n        if ((BlackBox[i].firstName = (char*)calloc(strlen(firstName), sizeof(char))) == NULL) \n        {\n           printf(\"ERROR - Could not allocate memory.\\n\");\n           exit(0);\n        }\n        if ((BlackBox[i].lastName = (char*)calloc(strlen(lastName), sizeof(char))) == NULL)\n        {\n           printf(\"ERROR - Could not allocate memory.\\n\");\n           exit(0);\n        }\n\n        strcpy(BlackBox[i].firstName, firstName);\n        strcpy(BlackBox[i].lastName, lastName);\n        BlackBox[i].number = atol(number);\n    }\n    fclose(stream);\n    return BlackBox;\n}\n\n\nvoid SEARCH(struct _data *BlackBox, char *name, int size, int inputs) \n{\n    int i;\n    int found = 0;\n    char *search = \" \";\n    char *firstName;\n    char *lastName; \n\n    if (inputs == 2)\n    {\n        firstName = strtok(name, search);\n        lastName = strtok(NULL, search);\n    }\n\n\n    printf(\"*******************************************\\n\");\n    if (inputs == 2)\n    {   \n        for (i = 0; i &lt; size; i++) \n        {          \n            if (!strcasecmp(firstName, BlackBox[i].firstName) &amp;&amp; !strcasecmp(firstName, BlackBox[i].firstName))\n            {\n                printf(\"The name was found at the %d entry.\\n\", i);\n                found = 1;\n                break;\n            }\n        }\n    }\n    else\n    {\n        for (i = 0; i &lt; size; i++) \n        {          \n            if (!strcasecmp(firstName, BlackBox[i].firstName) || !strcasecmp(firstName, BlackBox[i].firstName))\n            {\n                printf(\"The name was found at the %d entry.\\n\", i);\n                found = 1;\n                break;\n            }\n        }\n    }\n\n    if (found == 0) \n    {\n          printf(\"The name was NOT found.\\n\");\n    }\n    printf(\"*******************************************\\n\");\n}\n\n// FREE MEMORY\nvoid FREE(struct _data *BlackBox, int size) \n{\n    int i;\n    for (i = 0; i &lt; size; i++) \n    {\n        free(BlackBox[i].firstName);\n        free(BlackBox[i].lastName);\n    } \n    free(BlackBox);\n    BlackBox = NULL;\n}\n\n\n// MAIN\nint main(int argv, char **argc) \n{\n    int size;\n    FILE *stream;\n    struct _data *BlackBox;\n\n    // argv == 1 WORKS, Below message is printed.\n    if (argv == 1) \n    {          \n        printf(\"*******************************************\\n\");\n        printf(\"* You must include a name to search for.  *\\n\");\n        printf(\"*******************************************\\n\");\n    }\n    // argv == 2 DOES NOT WORK, Segmentation Fault.     \n    if (argv == 2) \n    {\n        size = SCAN (&amp;stream);\n        BlackBox = LOAD(stream, size);\n        SEARCH(BlackBox, argc[1], size, 1);\n    }\n    if (argv == 3) \n    {\n        size = SCAN(&amp;stream);\n        BlackBox = LOAD(stream, size);\n        SEARCH(BlackBox, argc[2], size, 2);\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1006, "user_id": 3888756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mPnk1.jpg?s=128&g=1", "display_name": "DigitalNinja", "link": "https://stackoverflow.com/users/3888756/digitalninja"}, "edited": false, "score": 0, "creation_date": 1428530155, "post_id": 29526040, "comment_id": 47206496, "body": "Probably a silly question but the author doesn&#39;t offer his/her own solution? Not even in the back of the book?"}, {"owner": {"reputation": 129, "user_id": 3709246, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/082d399b05c4d8eea3039b4b3b23ab0c?s=128&d=identicon&r=PG&f=1", "display_name": "sbnation", "link": "https://stackoverflow.com/users/3709246/sbnation"}, "reply_to_user": {"reputation": 1006, "user_id": 3888756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mPnk1.jpg?s=128&g=1", "display_name": "DigitalNinja", "link": "https://stackoverflow.com/users/3888756/digitalninja"}, "edited": false, "score": 0, "creation_date": 1428530494, "post_id": 29526040, "comment_id": 47206662, "body": "@DigitalNinja Not that I&#39;ve seen, I may have scrolled past it perhaps! I&#39;d imagine the author would, as it&#39;d be stupid not to :)"}], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 3709246, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/082d399b05c4d8eea3039b4b3b23ab0c?s=128&d=identicon&r=PG&f=1", "display_name": "sbnation", "link": "https://stackoverflow.com/users/3709246/sbnation"}, "edited": false, "score": 0, "creation_date": 1428530532, "post_id": 29526120, "comment_id": 47206676, "body": "I&#39;ve never felt so stupid in my entire life. Thanks for the response!"}, {"owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "edited": false, "score": 1, "creation_date": 1428530538, "post_id": 29526120, "comment_id": 47206678, "body": "100% agree with this answer. When it comes to <b>maintaining</b> code that does formatted output to the console, absolute string literals are the best compared to fancy loops and condensed code."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1428530568, "post_id": 29526120, "comment_id": 47206695, "body": "You might as well use <code>puts()</code>"}, {"owner": {"reputation": 81337, "user_id": 91757, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/afaf752cb41c3968dbd570c6f6fa0dc3?s=128&d=identicon&r=PG", "display_name": "Frerich Raabe", "link": "https://stackoverflow.com/users/91757/frerich-raabe"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 3, "creation_date": 1428530630, "post_id": 29526120, "comment_id": 47206723, "body": "@chqrlie Probably not a good idea given that the task is to <code>Write a program that uses printf</code>."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1428530804, "post_id": 29526120, "comment_id": 47206795, "body": "Oops! you have to use printf... I wonder if arrays have been covered yet. If not, use the nicely aligned array initalizer directly as an argument to <code>printf</code>. A clever compiler will generate a call to <code>puts()</code> with a different string literal.  At least <code>gcc</code> does."}], "tags": [], "owner": {"reputation": 81337, "user_id": 91757, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/afaf752cb41c3968dbd570c6f6fa0dc3?s=128&d=identicon&r=PG", "display_name": "Frerich Raabe", "link": "https://stackoverflow.com/users/91757/frerich-raabe"}, "is_accepted": true, "score": 4, "last_activity_date": 1428530304, "creation_date": 1428530304, "answer_id": 29526120, "question_id": 29526040, "link": "https://stackoverflow.com/questions/29526040/more-of-an-efficient-way-to-write-this/29526120#29526120", "title": "More of an efficient way to write this?", "body": "<p>It might be nicer to just have a single string literal, as in:</p>\n\n<pre><code>const char checkmark[] =\n    \"       *\\n\"\n    \"      * \\n\"\n    \"     *  \\n\"\n    \"*   *   \\n\"\n    \" * *    \\n\"\n    \"  *     \\n\"\n    ;\n\nprintf(\"%s\", checkmark);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 129, "user_id": 3709246, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/082d399b05c4d8eea3039b4b3b23ab0c?s=128&d=identicon&r=PG&f=1", "display_name": "sbnation", "link": "https://stackoverflow.com/users/3709246/sbnation"}, "edited": false, "score": 0, "creation_date": 1428530579, "post_id": 29526181, "comment_id": 47206700, "body": "Arrays and loops haven&#39;t been covered yet :)"}], "tags": [], "owner": {"reputation": 7641, "user_id": 4282370, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0WI7C.jpg?s=128&g=1", "display_name": "Amnon Shochot", "link": "https://stackoverflow.com/users/4282370/amnon-shochot"}, "is_accepted": false, "score": 0, "last_activity_date": 1428530553, "creation_date": 1428530553, "answer_id": 29526181, "question_id": 29526040, "link": "https://stackoverflow.com/questions/29526040/more-of-an-efficient-way-to-write-this/29526181#29526181", "title": "More of an efficient way to write this?", "body": "<p>I don't know if arrays and loops were already covered, but in case they were then you could just translate it into an array of formats (e.g. <code>char *formats[] = { \"%10c\\n\", \"%9c\\n\", ... }</code>), and then loop over these formats and print the asterisk:</p>\n\n<pre><code>for (int i = 0; i &lt; num_of_formats; i++)\n{\n    printf(formats[i], asterisk);\n}\n</code></pre>\n\n<p>Note that in this case you'll have to treat lines with two asterisks as having two formats. I.e. instead of using <code>\"%c %3c\\n\"</code>, you'll define the following two formats <code>\"%c \"</code> and <code>\"%3c\\n\"</code></p>\n"}], "owner": {"reputation": 129, "user_id": 3709246, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/082d399b05c4d8eea3039b4b3b23ab0c?s=128&d=identicon&r=PG&f=1", "display_name": "sbnation", "link": "https://stackoverflow.com/users/3709246/sbnation"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 209, "favorite_count": 0, "accepted_answer_id": 29526120, "answer_count": 2, "score": -1, "last_activity_date": 1428530553, "creation_date": 1428529983, "question_id": 29526040, "link": "https://stackoverflow.com/questions/29526040/more-of-an-efficient-way-to-write-this", "title": "More of an efficient way to write this?", "body": "<p>I'm reading a book on C, and the question it asks me to do is:</p>\n\n<blockquote>\n  <p>Write a program that uses printf to display the following picture on the screen</p>\n</blockquote>\n\n<p>and then it's a checkmark with asteriks. So the first thing that came to mind was write a bunch of printf() statements that use the format width specifier. So I came out with this:</p>\n\n<pre><code>int main() {\n    printf(\"This program prints a checkmark using asteriks\\n\"); \n\n    char asterik = '*';\n\n\n    printf(\"%10c\\n\", asterik);\n    printf(\"%9c\\n\", asterik);\n    printf(\"%8c\\n\", asterik);\n    printf(\"%7c\\n\", asterik);\n    printf(\"%6c\\n\", asterik);\n    printf(\"%c %3c\\n\", asterik, asterik);\n    printf(\"%2c %c\\n\", asterik, asterik);\n    printf(\"%3c\\n\", asterik);\n\n    return 0;\n\n}\n</code></pre>\n\n<p>I know this code is hideous, disgusting all the 9 yards, but I'm really wondering if there is a more efficient and cleaner looking way? I'm not sure if the author intended it to be written like this, considering this lesson is asked in Chapter 2, where we just went over some very basic things, none pertaining to this. (I only remember how to adjust the width thanks to K&amp;R)</p>\n"}, {"tags": ["c", "linux", "grep", "pipe", "redirect"], "comments": [{"owner": {"reputation": 9006, "user_id": 2257664, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d9f0c8cfc4646b1ad1e7030785967ea7?s=128&d=identicon&r=PG", "display_name": "A.L", "link": "https://stackoverflow.com/users/2257664/a-l"}, "edited": false, "score": 0, "creation_date": 1428530629, "post_id": 29525990, "comment_id": 47206722, "body": "What are these gaps? Is it your homework?"}, {"owner": {"reputation": 11, "user_id": 4766246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31bddf7abcc5ecda2bc73142aee58b18?s=128&d=identicon&r=PG&f=1", "display_name": "Akram Abdulaziz", "link": "https://stackoverflow.com/users/4766246/akram-abdulaziz"}, "reply_to_user": {"reputation": 9006, "user_id": 2257664, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d9f0c8cfc4646b1ad1e7030785967ea7?s=128&d=identicon&r=PG", "display_name": "A.L", "link": "https://stackoverflow.com/users/2257664/a-l"}, "edited": false, "score": 0, "creation_date": 1428533427, "post_id": 29525990, "comment_id": 47207767, "body": "the gaps are the lines, and no it is not homework, just some practice examples. for the line if (dup2(fd[1], __________) == -1, i figured the gap must be just 1, and for if (dup2(fd[0], __________) == -1), the gap would be 0."}, {"owner": {"reputation": 11, "user_id": 4766246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31bddf7abcc5ecda2bc73142aee58b18?s=128&d=identicon&r=PG&f=1", "display_name": "Akram Abdulaziz", "link": "https://stackoverflow.com/users/4766246/akram-abdulaziz"}, "reply_to_user": {"reputation": 9006, "user_id": 2257664, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d9f0c8cfc4646b1ad1e7030785967ea7?s=128&d=identicon&r=PG", "display_name": "A.L", "link": "https://stackoverflow.com/users/2257664/a-l"}, "edited": false, "score": 0, "creation_date": 1428533637, "post_id": 29525990, "comment_id": 47207827, "body": "the gaps are essentially just small calls missing, like either creating a pipe with the given info, or wherfe it says for a child, you would fork a child but set it to compare to -1 so that the error line would kick in"}, {"owner": {"reputation": 5277, "user_id": 4745527, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mVYxV.png?s=128&g=1", "display_name": "Aracthor", "link": "https://stackoverflow.com/users/4745527/aracthor"}, "edited": false, "score": 0, "creation_date": 1428659219, "post_id": 29525990, "comment_id": 47266649, "body": "Take some good looks at <a href=\"http://linux.die.net/man/2/pipe\" rel=\"nofollow noreferrer\">pipe</a> <a href=\"http://linux.die.net/man/2/dup2\" rel=\"nofollow noreferrer\">dup2</a> and <a href=\"http://linux.die.net/man/2/fork\" rel=\"nofollow noreferrer\">fork</a> manuals, you should success to find your answers."}], "owner": {"reputation": 11, "user_id": 4766246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31bddf7abcc5ecda2bc73142aee58b18?s=128&d=identicon&r=PG&f=1", "display_name": "Akram Abdulaziz", "link": "https://stackoverflow.com/users/4766246/akram-abdulaziz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 151, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1428529828, "creation_date": 1428529828, "question_id": 29525990, "link": "https://stackoverflow.com/questions/29525990/pipes-and-redirection-home-output", "title": "Pipes and Redirection home output", "body": "<pre><code>#include&lt;errno.h&gt;\n#include&lt;stdio.h&gt;\n#include&lt;unistd.h&gt;\n#include&lt;sys/types.h&gt;\n\nint main(void) {\npid_t childpid;\nint fd[2];\n\nif (pipe(fd) == -1) { /* setup a pipe */\n    perror(\"Failed to setup pipeline\");\n    return 1;\n}\nif ((childpid = fork()) == -1) { /* fork a child */\n    perror(\"Failed to fork a child\");\n    return 1;\n}\nif (__________) {/* env is the child */\n\n    if (dup2(fd[1], __________) == -1)\n        perror(\"Failed to redirect stdout of env\");\n    else if (____________________) /* close unused file descriptor */\n        perror(\"Failed to close extra pipe descriptors on env\");\n    else {\n        execl(__________); /* execute env */\n        perror(\"Failed to exec env\");\n    }\n    return 1;\n}\nif (dup2(fd[0],__________) == -1)\n/* grep is the parent */\n    perror(\"Failed to redirect stdin of grep\");\nelse if (____________________)\n    perror(\"Failed to close extra pipe file descriptors on grep\");\nelse {\n    execl(__________); /*execute \"grep HOME\"*/\n    perror(\"Failed to exec grep\");\n}\nreturn 1;\n}\n</code></pre>\n\n<p>i figured out most of the gaps but i couldn't seem to get the others to work the way  as intended. So basically, this program is meant uses redirect to implement env | grep HOME, which prints out my home directory. I am to use dup2 and excel, but need the gaps filled using c and linux system calls.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 1, "creation_date": 1428529675, "post_id": 29525907, "comment_id": 47206252, "body": "Your <code>append</code> is declared inside of another function due to a missing right brace <code>}</code>. You will see this easily if you fix the indentation in your code."}, {"owner": {"reputation": 1, "user_id": 4745996, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204178323641687/picture?type=large", "display_name": "Elias Khoury", "link": "https://stackoverflow.com/users/4745996/elias-khoury"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1428529782, "post_id": 29525907, "comment_id": 47206312, "body": "i fixed it ... but the function won&#39;t work"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 1, "creation_date": 1428529806, "post_id": 29525907, "comment_id": 47206325, "body": "<i>won&#39;t work</i> is not very descriptive."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1428529839, "post_id": 29525907, "comment_id": 47206343, "body": "use a debugger to step through your code"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1428530156, "post_id": 29525907, "comment_id": 47206498, "body": "0)<code>i&lt;strlen(array1)</code> at divide2. change to <code>i &lt; 20</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4745996, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204178323641687/picture?type=large", "display_name": "Elias Khoury", "link": "https://stackoverflow.com/users/4745996/elias-khoury"}, "edited": false, "score": 0, "creation_date": 1428530790, "post_id": 29526033, "comment_id": 47206787, "body": "that seemed to be the problem .. but still the last part of the array does not go through the function"}], "tags": [], "owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": true, "score": 1, "last_activity_date": 1428529954, "creation_date": 1428529954, "answer_id": 29526033, "question_id": 29525907, "link": "https://stackoverflow.com/questions/29525907/dividing-polynomials-into-separate-parts-and-printing-their-coefficients-and-pow/29526033#29526033", "title": "dividing polynomials into separate parts and printing their coefficients and power", "body": "<pre><code>  if(array[i]!='+'||array[i]!='-')\n</code></pre>\n\n<p>is always true. You mean (I think)</p>\n\n<pre><code>if(array[i]!='+'&amp;&amp; array[i]!='-') \n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4745996, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204178323641687/picture?type=large", "display_name": "Elias Khoury", "link": "https://stackoverflow.com/users/4745996/elias-khoury"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 29526033, "answer_count": 1, "score": -1, "last_activity_date": 1428529954, "creation_date": 1428529436, "last_edit_date": 1428529737, "question_id": 29525907, "link": "https://stackoverflow.com/questions/29525907/dividing-polynomials-into-separate-parts-and-printing-their-coefficients-and-pow", "title": "dividing polynomials into separate parts and printing their coefficients and power", "body": "<pre><code>    #include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;math.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;windows.h&gt;\n#include &lt;conio.h&gt;\nint isnumber(char *temp) ;\nvoid divide(char array[]);\nvoid divide2(char array[]);\nvoid append(char* s, char c);\nint main()\n{\n    char array[20];\n    scanf(\"%s\",array);\n    divide2(array);\n\n\n   return 0;\n\n}\nint isnumber(char *temp) {\n  int i = 0;\nint flag=0 ;\n for (i=0;i&lt;strlen(temp);i++) {\nif (!isdigit(temp[i])){\nflag = 1;\n }\n else if(temp[0]=='-' &amp;&amp; isdigit(temp[i])){\n flag=0;\n  }\n}\nreturn flag;\n}\nvoid divide2( char array[]){\n    char array1[20];\n    int j=0,i;\n    for(i=0 ; i&lt;strlen(array1);i++)\n                {\n                    array1[i]=NULL;\n                }\n\n\n    for(i=0;i&lt;strlen(array);i++){\n            if(array[i]!='+'||array[i]!='-')\n            {\n\n                append(array1,array[i]);\n                j++;\n            }\n            else{\n\n\n                divide(array1);\n                for(i=0 ; i&lt;strlen(array1);i++)\n                {\n                    array1[i]='\\0';\n                }\n            }\n\n    }\n}\nvoid divide(char array[]){\n\n    int co,pow,i;\n    char *token1;\n    char t[20];\n   char *t_3[2];\n\n\n\n    token1= strtok(array,\"+\");\n    strcpy(t,token1);\n\n   while(token1!=NULL){\n\n\nt_3[0] = strtok(t,\"x^\");\n\n\nt_3[1] = strtok(NULL,\"x^\");\n\n\n\nif((t_3[0] == NULL)&amp;&amp;(t_3[1] == NULL)) {\n\nco = 1;\n pow = 1;\n }\n else if((token1[0]=='-')&amp;&amp; (token1[1]== 'x') &amp;&amp; (t_3[1] != NULL)){\n    co=-1;\n    pow=atoi(t_3[1]);\n }\n else if ((token1[0]=='-') &amp;&amp;(t_3[0] != NULL)&amp;&amp;(t_3[1] != NULL)){\n    co=atoi(t_3[0]);\n    pow=atoi(t_3[1]);\n}\n\n else if((token1[0]=='-')&amp;&amp; (token1[1]== 'x') &amp;&amp; (t_3[1] == NULL)){\n    co=-1;\n    pow=1;\n }\n\n\n    else if(isnumber(token1)==0) {\n co = atoi(t);\npow = 0;\n}\nelse if ((t_3[0] != NULL)&amp;&amp;(t_3[1] == NULL) &amp;&amp; (token1[0]=='x')){\npow = atoi(t_3[0]);\nco= 1;\n }\n else if ((t_3[0] != NULL)&amp;&amp;(t_3[1] == NULL)) {\nco = atoi(t_3[0]);\npow = 1;\n }\n\nelse {\n\n co = atoi(t_3[0]);\npow = atoi(t_3[1]);\n }\n\n printf(\"coefficient is : %d   power is :%d\\n\",co,pow);\n\n co=0;\n pow=0;\n t_3[0]='\\0';\n t_3[1]='\\0';\nfor(i=0 ; i&lt;sizeof(t);i++){\n        t[i]='\\0';\n        }\ntoken1 = strtok(NULL,\"+\");\n        if(token1==NULL){\n            printf(\"...............\");\n            printf(\"\\n\");\n        }\n        else{\n        strcat(t,token1);\n        }\n   }\n}\n\nvoid append(char* s, char c)\n{\n        int len = strlen(s);\n        s[len] = c;\n        s[len+1] = '\\0';\n}\n</code></pre>\n\n<p>This code is supposed to split polynomials and print their power and coefficient but I keep getting the error <code>undefined reference</code> to append. Can any one tell me why? I have tried searching for this error but did not find a solution .\ni fixed the problem .. but the function itself won't work</p>\n"}, {"tags": ["java", "c", "websocket"], "comments": [{"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 2, "creation_date": 1428529581, "post_id": 29525882, "comment_id": 47206203, "body": "This depends on what kind of fragments you mean. You don&#39;t need to handle IP fragments. However you do need to handle your own data or messages, TCP is just a stream and does not preserve any message boundaries. If you do one write() call, it might take several read() calls to read that data, and vice versa, data written by many write() calls might be read with just one read() call."}], "answers": [{"tags": [], "owner": {"reputation": 765, "user_id": 2661551, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/621133c045364c2063d4d943d09a3b97?s=128&d=identicon&r=PG", "display_name": "Shade", "link": "https://stackoverflow.com/users/2661551/shade"}, "is_accepted": false, "score": 1, "last_activity_date": 1428530826, "last_edit_date": 1428530826, "creation_date": 1428530129, "answer_id": 29526070, "question_id": 29525882, "link": "https://stackoverflow.com/questions/29525882/do-i-have-to-handle-message-fragmentation-for-sockets/29526070#29526070", "title": "Do I have to handle message fragmentation for Sockets?", "body": "<p>Expanding on what nos said, TCP will break up large messages into smaller chunks, <em>if the message is large enough</em>. Often, it isn't. Often, the data you write is already split into parts (by you), into meaningful chunks like discrete messages.</p>\n\n<p>The stuff about the reads/writes taking different amounts of calls comes from how the data is written, how it travels over the wire, and how you read it.</p>\n\n<p>If you write 2 bytes 100 times, and then 20 seconds later go to read, it will say there is 200 bytes to be read, which you can read all at once if you want. If you pass a massive 2mb buffer to be written (I dont even know if thats possible), it would take longer to write out, giving more of a chance to the reading program to get different read calls.</p>\n"}, {"tags": [], "owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "is_accepted": false, "score": 1, "last_activity_date": 1428530972, "creation_date": 1428530972, "answer_id": 29526255, "question_id": 29525882, "link": "https://stackoverflow.com/questions/29525882/do-i-have-to-handle-message-fragmentation-for-sockets/29526255#29526255", "title": "Do I have to handle message fragmentation for Sockets?", "body": "<blockquote>\n  <p>Details: Currently, in Java, the server creates a socket and reads the first byte from the message with InputStream#read(). That first byte determines the length of the entire message, and creates a byte array of the appropriate length, and calls InputStream#read(byte[]) once and assumes that the entire message has been read.</p>\n</blockquote>\n\n<p>That won't work. Have a look at the contract for <code>InputStream.read(byte[]).</code> It isn't obliged to transfer more than one byte. The correct technique is to read the length byte and then use <code>DataInputStream.readFully(),</code> which has the obligation to fill the buffer.</p>\n"}, {"tags": [], "owner": {"reputation": 31897, "user_id": 307976, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/zSNAW.jpg?s=128&g=1", "display_name": "vtortola", "link": "https://stackoverflow.com/users/307976/vtortola"}, "is_accepted": true, "score": 3, "last_activity_date": 1428581288, "last_edit_date": 1428581288, "creation_date": 1428580977, "answer_id": 29537986, "question_id": 29525882, "link": "https://stackoverflow.com/questions/29525882/do-i-have-to-handle-message-fragmentation-for-sockets/29537986#29537986", "title": "Do I have to handle message fragmentation for Sockets?", "body": "<p>If you are talking about WebSockets,you may be mixing different concepts.</p>\n\n<p>One thing is TCP/IP message fragmentation.</p>\n\n<p>Other thing is how buffering works. You read buffers of data, and you need a framing protocol that tells you when you have a complete \"message\" (or frame). Basically you:</p>\n\n<ol>\n<li>Read buffer. </li>\n<li>Has complete header? No-> Goto 1, Yes-> continue </li>\n<li>Read until having all the bytes that the head indicates as message\nlength. </li>\n<li>Has complete message? No-> Goto 3, Yes -> continue </li>\n<li>Yield message. </li>\n<li>Goto 1.</li>\n</ol>\n\n<p>Other different thing is WebSocket message fragmentation. WebSocket has already a framing protocol and messages can be split in different data frames, and control frames can be interleaved with data frames: <a href=\"https://developer.mozilla.org/en-US/docs/WebSockets/Writing_WebSocket_servers#Message_Fragmentation\" rel=\"nofollow\">https://developer.mozilla.org/en-US/docs/WebSockets/Writing_WebSocket_servers#Message_Fragmentation</a></p>\n\n<p>If you are writing a WebSocket client or server you have to be ready for this situation.</p>\n"}], "owner": {"reputation": 611, "user_id": 835500, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9c3e8744f9ff9a35ec073edfeda7e55c?s=128&d=identicon&r=PG", "display_name": "Aura", "link": "https://stackoverflow.com/users/835500/aura"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1784, "favorite_count": 0, "accepted_answer_id": 29537986, "answer_count": 3, "score": 2, "last_activity_date": 1428581288, "creation_date": 1428529311, "question_id": 29525882, "link": "https://stackoverflow.com/questions/29525882/do-i-have-to-handle-message-fragmentation-for-sockets", "title": "Do I have to handle message fragmentation for Sockets?", "body": "<p>I am currently using java.net.Socket to send messages from the client and reading messages from the server. All my messages are fairly short so far, and I have never had any problems.</p>\n\n<p>One of my friends noticed that I was not handling message fragmentation, where the data could come in pieces, and has advised that I should create a buffer to handle this. I insisted that TCP handles this for me, but I'm not 100% sure.</p>\n\n<p>Who is right?</p>\n\n<p>Also, I plan on creating a client in C as well in the future. Do Berkeley sockets handle message fragmentation?</p>\n\n<p>Details: Currently, in Java, the server creates a socket and reads the first byte from the message with InputStream#read(). That first byte determines the length of the entire message, and creates a byte array of the appropriate length, and calls InputStream#read(byte[]) once and assumes that the entire message has been read.</p>\n"}, {"tags": ["c", "function", "struct", "arguments", "parameter-passing"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1428529483, "post_id": 29525818, "comment_id": 47206152, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/29522741/is-it-faster-to-pass-a-struct-or-its-members-individually\">Is it faster to pass a struct or its members individually?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 4286, "user_id": 1440105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/QxCty.jpg?s=128&g=1", "display_name": "Dweeberly", "link": "https://stackoverflow.com/users/1440105/dweeberly"}, "is_accepted": true, "score": 1, "last_activity_date": 1428534518, "creation_date": 1428534518, "answer_id": 29526883, "question_id": 29525818, "link": "https://stackoverflow.com/questions/29525818/is-there-a-difference-in-terms-of-performance-if-a-function-accepts-a-ton-of-par/29526883#29526883", "title": "Is there a difference in terms of performance if a function accepts a ton of parameters or a single struct?", "body": "<p>Every parameter needs to be stored somewhere (usually on the stack, or in a process register).  Each of those stores requires some amount of time.  Then there is the difference required to pass variables by value.  If you have a struct of size 100 bytes and you pass the struct by reference you only need to pass the address (usually 4 or 8 bytes).  If you pass by value you have to copy 100 bytes (to the stack).  Compilers attempt to optimize stack and register usage, as best they can.  L2 misses are effected most by the frequency a memory address is referenced over time.  If your function is non-trivial you will likely spend much more time within it that calling it (cache usage will be largely determined by what the function does).  If it's trivial then the compiler might very well in line it.</p>\n"}], "owner": {"reputation": 102, "user_id": 1973207, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/557d7fa74d7ec23c6726f1c16986b032?s=128&d=identicon&r=PG", "display_name": "DuckQueen", "link": "https://stackoverflow.com/users/1973207/duckqueen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 29526883, "answer_count": 1, "score": 0, "last_activity_date": 1428534518, "creation_date": 1428529040, "last_edit_date": 1428529788, "question_id": 29525818, "link": "https://stackoverflow.com/questions/29525818/is-there-a-difference-in-terms-of-performance-if-a-function-accepts-a-ton-of-par", "title": "Is there a difference in terms of performance if a function accepts a ton of parameters or a single struct?", "body": "<p>What is a principal difference in terms of performance (compiler optimizations such as inlining, L2 misses)  if a function accepts a ton of parameters or a single struct?</p>\n\n<p>example (used in some C code in Visual Studio) </p>\n\n<pre><code>void OnMessage(const char * senderId, const int &amp; senderIdLength, const char * topic, const int &amp; topicLength, const void * data, const int &amp; dataLength);\n</code></pre>\n"}, {"tags": ["c++", "c", "variables", "language-lawyer", "undefined-behavior"], "comments": [{"owner": {"reputation": 1724, "user_id": 3241687, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d947e2e67319fa6adcf088098adf3079?s=128&d=identicon&r=PG&f=1", "display_name": "horns", "link": "https://stackoverflow.com/users/3241687/horns"}, "edited": false, "score": 0, "creation_date": 1428529186, "post_id": 29525797, "comment_id": 47206003, "body": "Are you interested in the answer for c++ or for c? It is possible that they are different, considering they have different standards."}, {"owner": {"reputation": 86959, "user_id": 1735406, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IF9uS.png?s=128&g=1", "display_name": "Maroun", "link": "https://stackoverflow.com/users/1735406/maroun"}, "edited": false, "score": 2, "creation_date": 1428529186, "post_id": 29525797, "comment_id": 47206004, "body": "It is undefined behavior."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1428533066, "post_id": 29525797, "comment_id": 47207659, "body": "One more good reason to turn on compiler warnings: <code>-Wall -Werror</code> are your friends."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1428544097, "post_id": 29525797, "comment_id": 47210802, "body": "For C++ see <a href=\"http://stackoverflow.com/q/14935722/1708801\">Does initialization entail lvalue-to-rvalue conversion? Is int x = x; UB?</a> and <a href=\"http://stackoverflow.com/q/23415661/1708801\">Has C++ standard changed with respect to the use of indeterminate values and undefined behavior in C++14</a>? Both question offer a very detailed discussion of this issue."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 1, "creation_date": 1428551476, "post_id": 29525797, "comment_id": 47212635, "body": "@ShafikYaghmour I knew it was a bad idea to allow the dual tag question :X Perhaps this question should be edited to be C++-only (and closed as duplicate), and a new C question posted"}], "answers": [{"comments": [{"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1428544820, "post_id": 29525852, "comment_id": 47211019, "body": "Most of what you are quoting is a note which is not normative and it does not really explain whether this is undefined behavior or not. See <a href=\"http://stackoverflow.com/questions/29525797/can-a-variable-be-used-while-being-declared#comment47210802_29525797\">my comment above</a> for two questions that answers this question for C++ in detail for both pre C++14 and C++14 and forward."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1428546162, "post_id": 29525852, "comment_id": 47211360, "body": "@ShafikYaghmour: The question isn&#39;t whether this is undefined behavior, it is whether the variable can be used in its own initialization.  There are plenty of cases which use the variable without using its value, e.g. <code>void* p = &amp;p;</code> so it is a perfectly reasonable question."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1428546271, "post_id": 29525852, "comment_id": 47211386, "body": "@BenVoigt in the C++ case this example is clearly undefined behavior and not saying so is a poor answer IMHO. Sure there are caveats but none of them are explained. The way modern optimizing compilers work we need to be very clear on what is and what is not UB b/c the optimizers can do very aggressive things with code that it believes invokes UB."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1428547049, "post_id": 29525852, "comment_id": 47211582, "body": "Note that C++14 amended this example to use <code>unsigned char</code> since the <code>int</code> case invokes UB."}], "tags": [], "owner": {"reputation": 38119, "user_id": 3959454, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4d3d3eb6143879550d0e5bd67a6bf647?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Savin", "link": "https://stackoverflow.com/users/3959454/anton-savin"}, "is_accepted": false, "score": 3, "last_activity_date": 1428530846, "last_edit_date": 1428530846, "creation_date": 1428529199, "answer_id": 29525852, "question_id": 29525797, "link": "https://stackoverflow.com/questions/29525797/can-a-variable-be-used-while-being-declared/29525852#29525852", "title": "Can a variable be used while being declared?", "body": "<p>C++14 draft N4140 [basic.scope.pdecl]/1:</p>\n\n<blockquote>\n  <p>The <em>point of declaration</em> for a name is immediately after its complete declarator (Clause 8) and before its\n  <em>initializer</em> (if any), except as noted below. [ <em>Example:</em></p>\n</blockquote>\n\n<pre><code>unsigned char x = 12;\n{ unsigned char x = x; }\n</code></pre>\n\n<blockquote>\n  <p>Here the second <code>x</code> is initialized with its own (indeterminate) value. <em>\u2014end example</em> ]</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1428529730, "post_id": 29525932, "comment_id": 47206281, "body": "&quot;Using&quot; <code>x</code> could include <code>sizeof x</code> or <code>&amp;x</code>.  Both of those are not obviously undefined behavior."}, {"owner": {"reputation": 18728, "user_id": 2382136, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eMbhT.jpg?s=128&g=1", "display_name": "Wojtek Surowka", "link": "https://stackoverflow.com/users/2382136/wojtek-surowka"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1428529793, "post_id": 29525932, "comment_id": 47206317, "body": "@chux Agreed - I modified the answer."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1428529902, "post_id": 29525932, "comment_id": 47206370, "body": "Yes, I suspect even <code>int x = x - x;</code> is not even safe."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1428529977, "post_id": 29525932, "comment_id": 47206408, "body": "@chux <a href=\"http://stackoverflow.com/questions/25074180/is-aa-or-a-a-undefined-behaviour-if-a-is-not-initialized/25074258#25074258\">see here</a> for discussion of something similar"}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1428544908, "post_id": 29525932, "comment_id": 47211045, "body": "See <a href=\"http://stackoverflow.com/questions/29525797/can-a-variable-be-used-while-being-declared#comment47210802_29525797\">my comment above</a> this does not really explain why it is undefined behavior."}], "tags": [], "owner": {"reputation": 18728, "user_id": 2382136, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eMbhT.jpg?s=128&g=1", "display_name": "Wojtek Surowka", "link": "https://stackoverflow.com/users/2382136/wojtek-surowka"}, "is_accepted": false, "score": 3, "last_activity_date": 1428529768, "last_edit_date": 1428529768, "creation_date": 1428529546, "answer_id": 29525932, "question_id": 29525797, "link": "https://stackoverflow.com/questions/29525797/can-a-variable-be-used-while-being-declared/29525932#29525932", "title": "Can a variable be used while being declared?", "body": "<p>The answer for C++ - I am quoting C++11 standard:</p>\n\n<p>3.3.3.1:</p>\n\n<blockquote>\n  <p>A name declared in a block (6.3) is local to that block; it has block scope. Its potential scope begins at its point of declaration (3.3.2) and ends at the end of its block.</p>\n</blockquote>\n\n<p>And the point of declaration is defined in 3.3.2 as</p>\n\n<blockquote>\n  <p>The point of declaration for a name is immediately after its complete declarator (Clause 8) and before its initializer (if any), except as noted below.</p>\n  \n  <p>[ Example:</p>\n</blockquote>\n\n<pre><code> int x = 12;\n { int x = x; }\n</code></pre>\n\n<blockquote>\n  <p>Here the second x is initialized with its own (indeterminate) value. \u2014 end example ]</p>\n</blockquote>\n\n<p>Obviously, using the value of <code>x</code> before it is initialised is undefined behaviour.</p>\n"}, {"comments": [{"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 1, "creation_date": 1428547181, "post_id": 29526012, "comment_id": 47211611, "body": "Pascal provides a very nice summary of the evolution of indeterminate values in C in <a href=\"http://blog.frama-c.com/index.php?post/2013/03/13/indeterminate-undefined\" rel=\"nofollow noreferrer\">Reading indeterminate contents might as well be undefined</a>"}, {"owner": {"reputation": 2917, "user_id": 4031604, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d800dd437bdbb2645b3c71236583fd?s=128&d=identicon&r=PG&f=1", "display_name": "AnArrayOfFunctions", "link": "https://stackoverflow.com/users/4031604/anarrayoffunctions"}, "edited": false, "score": 0, "creation_date": 1428617582, "post_id": 29526012, "comment_id": 47251467, "body": "Hmm - shouldn&#39;t declaring &#39;a&#39; with &#39;volatile&#39; keyword do the same job as a request of the variable address (&amp;a)?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 2917, "user_id": 4031604, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d800dd437bdbb2645b3c71236583fd?s=128&d=identicon&r=PG&f=1", "display_name": "AnArrayOfFunctions", "link": "https://stackoverflow.com/users/4031604/anarrayoffunctions"}, "edited": false, "score": 0, "creation_date": 1428619435, "post_id": 29526012, "comment_id": 47252152, "body": "@FISOCPP the standard doesn&#39;t say that"}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": true, "score": 6, "last_activity_date": 1428531336, "last_edit_date": 1495535219, "creation_date": 1428529887, "answer_id": 29526012, "question_id": 29525797, "link": "https://stackoverflow.com/questions/29525797/can-a-variable-be-used-while-being-declared/29526012#29526012", "title": "Can a variable be used while being declared?", "body": "<p>This question has a slightly different answer in C than in C++.</p>\n\n<p>In both cases, <code>int x = x;</code> tries to initialize <code>x</code> with itself.</p>\n\n<hr>\n\n<p><strong>In C++</strong>: [dcl.init]/12 (N3936) says that any evaluation of an object with indeterminate value causes undefined behaviour, <em>except for</em> certain cases involving unsigned <code>char</code>. In fact there is an <em>Example</em>:</p>\n\n<pre><code>int f(bool b) {\n    unsigned char c;\n    unsigned char d = c; // OK, d has an indeterminate value\n    int e = d;        // undefined behavior\n    return b ? d : 0; // undefined behavior if b is true\n}\n</code></pre>\n\n<hr>\n\n<p><strong>In C:</strong> It is more complicated. This is very similar to the behaviour of <code>int b;  foo(b - b);</code> which is <a href=\"https://stackoverflow.com/questions/25074180/is-aa-or-a-a-undefined-behaviour-if-a-is-not-initialized/\">covered in full here</a>.</p>\n\n<p>I won't repeat that text but the conclusions are, in C11:</p>\n\n<ul>\n<li><code>int a = a; &amp;a;</code> causes UB if and only if the system has trap representations for <code>int</code></li>\n<li><code>int a = a;</code>, with no subsequent occurrence of <code>&amp;a</code>, causes UB.</li>\n</ul>\n\n<hr>\n\n<p>Historical note: In C90 this caused UB. In C99 the <em>trap representation</em> was introduced, and in C11 the possibility of register trap was introduced (for Itanium).  The C++ standard doesn't deal with trap representations at all, it seems underspecified in the case of things like <a href=\"https://stackoverflow.com/questions/29394518/whats-the-result-of-a-b\">bitwise operators</a> generating negative zero.</p>\n"}, {"tags": [], "owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "is_accepted": false, "score": 0, "last_activity_date": 1428547386, "last_edit_date": 1428547386, "creation_date": 1428546859, "answer_id": 29528757, "question_id": 29525797, "link": "https://stackoverflow.com/questions/29525797/can-a-variable-be-used-while-being-declared/29528757#29528757", "title": "Can a variable be used while being declared?", "body": "<p>There really are two parts to this question, the one asked:</p>\n\n<blockquote>\n  <p>Can a variable be used while being declared?</p>\n</blockquote>\n\n<p>where there answer clearly is Yes, due to the point of declaration rule quoted in other answers.</p>\n\n<p>And, equally important but not asked:</p>\n\n<blockquote>\n  <p>What usages of a variable during its declaration are safe?</p>\n</blockquote>\n\n<p>Well, within the initializer, the variable has not yet completed initialization (a matter of object lifetime), and in fact construction hasn't yet even started.  The object lifetime rules (section 3.8 of the Standard) state that some but not all operations are permitted on such a variable:</p>\n\n<blockquote>\n  <p>Before  the  lifetime  of  an  object  has  started  but  after  the  storage  which  the  object  will  occupy  has  been allocated or, after the lifetime of an object has ended and before the storage which the object occupied is reused or released, any pointer that refers to the storage location where the object will be or was located may be used but only in limited ways.  For an object under construction or destruction, see 12.7.  Otherwise,\n  such a pointer refers to allocated storage, and using the pointer as if the pointer were of type <code>void*</code>, is well-defined.  Indirection through such a pointer is permitted but the resulting lvalue may only be used in limited ways, as described below.  The program has undefined behavior if:</p>\n  \n  <ul>\n  <li>the  object  will  be  or  was  of  a  class  type  with  a  non-trivial  destructor  and  the  pointer  is  used  as  the operand of a delete-expression,</li>\n  <li>the  pointer  is  used  to  access  a  non-static  data  member  or  call  a  non-static  member  function  of  the object, or</li>\n  <li>the  pointer  is  implicitly  converted  to  a  pointer  to  a  virtual  base  class,  or</li>\n  <li>the  pointer  is  used  as  the  operand  of  a  <code>static_cast</code>,  except  when  the  conversion  is  to  pointer to <em><code>cv</code></em> <code>void</code>, or to pointer to <em><code>cv</code></em> <code>void</code> and subsequently to pointer to either <em><code>cv</code></em> <code>char</code> or <em><code>cv</code></em>  <code>unsigned char</code>, or </li>\n  <li>the  pointer  is  used  as  the  operand  of  a  <code>dynamic_cast</code>.</li>\n  </ul>\n</blockquote>\n\n<p>Effectively, for types with non-trivial initialization, the memory location doesn't contain an object yet, so it has no dynamic type, and attempting to access it as any type except <code>char</code> or <code>unsigned char</code> immediately falls afoul of strict aliasing.</p>\n\n<p>For types with trivial initialization, including <code>int</code>, an object exists as soon as properly aligned storage is acquired.  But if that storage has automatic or dynamic storage duration, the value is indeterminate until the variable is written to.  This rule from section 8.5 applies:</p>\n\n<blockquote>\n  <p>If  no  initializer  is  speci\ufb01ed  for  an  object,  the  object  is  default-initialized.   When  storage  for  an  object with  automatic  or  dynamic  storage  duration  is  obtained,  the  object  has  an  indeterminate  value,  and  if no initialization is performed for the object, that object retains an indeterminate value until that value is replaced.  [ Note:  Objects with static or thread storage duration are zero-initialized,  see 3.6.2.   \u2014\n  end note ] If an indeterminate value is produced by an evaluation, the behavior is undefined except in the following cases:</p>\n</blockquote>\n\n<p>and all the exceptional cases listed are specific to <code>unsigned char</code>.</p>\n\n<p>At first glance, this rule appears not to apply, because an initializer is specified.  However, during evaluation of the initializer, we are exactly in the case that \"When  storage  for  an  object with  automatic  or  dynamic  storage  duration  is  obtained\" where the rule does apply.</p>\n"}], "owner": {"reputation": 53, "user_id": 4766219, "user_type": "registered", "profile_image": "https://graph.facebook.com/826470240756000/picture?type=large", "display_name": "Abo-Mahmoud Al-Homsi", "link": "https://stackoverflow.com/users/4766219/abo-mahmoud-al-homsi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 1, "accepted_answer_id": 29526012, "answer_count": 4, "score": 5, "last_activity_date": 1428547386, "creation_date": 1428528957, "last_edit_date": 1428545010, "question_id": 29525797, "link": "https://stackoverflow.com/questions/29525797/can-a-variable-be-used-while-being-declared", "title": "Can a variable be used while being declared?", "body": "<p>Why does the following compile without an error?:</p>\n\n<pre><code>int main()\n{\n    int x = x;  //I thought this should cause an error\n    return 0;\n}\n</code></pre>\n\n<p>Where in the standards is it explained why this is allowed?</p>\n"}, {"tags": ["c", "malloc", "allocation", "calloc"], "comments": [{"owner": {"reputation": 1, "user_id": 4725176, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204214760752749/picture?type=large", "display_name": "Mrjiang1992", "link": "https://stackoverflow.com/users/4725176/mrjiang1992"}, "edited": false, "score": 0, "creation_date": 1428528154, "post_id": 29525508, "comment_id": 47205501, "body": "in my case sern = 4;"}, {"owner": {"reputation": 8984, "user_id": 2485966, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dZj6A.jpg?s=128&g=1", "display_name": "Ruud Helderman", "link": "https://stackoverflow.com/users/2485966/ruud-helderman"}, "edited": false, "score": 0, "creation_date": 1428528326, "post_id": 29525508, "comment_id": 47205582, "body": "Allocation is right; calculation of array index is wrong. Tip: draw a picture of the matrix."}, {"owner": {"reputation": 1, "user_id": 4725176, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204214760752749/picture?type=large", "display_name": "Mrjiang1992", "link": "https://stackoverflow.com/users/4725176/mrjiang1992"}, "reply_to_user": {"reputation": 8984, "user_id": 2485966, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dZj6A.jpg?s=128&g=1", "display_name": "Ruud Helderman", "link": "https://stackoverflow.com/users/2485966/ruud-helderman"}, "edited": false, "score": 0, "creation_date": 1428528470, "post_id": 29525508, "comment_id": 47205662, "body": "I drew the matrix and when through step by step, the results i get is the same as  printf(&quot;row: %d, and column: %d, data: %d\\n&quot;,row, 2*column,Rtable[row<i>sern +2*column]); printf(&quot;row: %d, and column: %d, data: %d\\n&quot;,row, 2*column+1,Rtable[row</i>sern +2*column+1]); but the for(i = 0; i &lt;sern; i++){loop} the value is different"}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1428529494, "post_id": 29525508, "comment_id": 47206163, "body": "Use a <i>struct</i> to stop shooting your leg off."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1428562590, "post_id": 29525508, "comment_id": 47216819, "body": "Allocation is wrong.  Don&#39;t use type casting on return value from <b>malloc(3)</b>.  Just <code>#include &lt;stdlib.h&gt;</code> (or <code>#include &lt;malloc.h&gt;</code> if you have an old compiler)  Type casting makes the compiler to assume you are right in the use you are making of <b>malloc(3)</b> and won&#39;t check for correctness."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4725176, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204214760752749/picture?type=large", "display_name": "Mrjiang1992", "link": "https://stackoverflow.com/users/4725176/mrjiang1992"}, "edited": false, "score": 0, "creation_date": 1428528762, "post_id": 29525638, "comment_id": 47205816, "body": "THANK YOU! that makes totally sense, i can&#39;t believe i didn&#39;t notice that."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 1, "user_id": 4725176, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204214760752749/picture?type=large", "display_name": "Mrjiang1992", "link": "https://stackoverflow.com/users/4725176/mrjiang1992"}, "edited": false, "score": 0, "creation_date": 1428529004, "post_id": 29525638, "comment_id": 47205924, "body": "@Mrjiang1992 you could make a macro like <code>#define R(r,c) Rtable[(r)*2*sern + (c)]</code> which will make the code a bit more readable"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1428530936, "post_id": 29525638, "comment_id": 47206847, "body": "@HansPassant it looks OK to me. The table has <code>sern</code> rows and <code>2*sern</code> columns."}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 1, "last_activity_date": 1428528343, "creation_date": 1428528343, "answer_id": 29525638, "question_id": 29525508, "link": "https://stackoverflow.com/questions/29525508/am-i-allocating-memory-wrong/29525638#29525638", "title": "am I allocating memory wrong?", "body": "<p>The number of columns is actually <code>2*sern</code>. So the expression <code>Rtable[row*sern + 2*column]</code> should be <code>Rtable[row*(2*sern) + 2*column]</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 4725176, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204214760752749/picture?type=large", "display_name": "Mrjiang1992", "link": "https://stackoverflow.com/users/4725176/mrjiang1992"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1428528343, "creation_date": 1428527833, "question_id": 29525508, "link": "https://stackoverflow.com/questions/29525508/am-i-allocating-memory-wrong", "title": "am I allocating memory wrong?", "body": "<p>I'm not sure what i'm doing wrong but some how Rtable[0,7] charges from 0 to 2 out of no where, i thought it was a allocation problem but I don't think i'm allocating it wrong, but th question is am i actually allocating memory wrong?</p>\n\n<pre><code>int *Rtable;\nRtable = (int *) malloc(sern * (2*sern) * sizeof(int));\ninitialize(sern, Rtable);\n\nand my initialize method is:\n\nvoid initialize(int sern, int *Rtable){\n    int row, column;\n    for(row = 0; row &lt; sern; row++){\n        for(column = 0; column &lt; sern; column++){\n            Rtable[row*sern + 2*column] = (row == column) ? 0 : 1000;\n            Rtable[row*sern + (2*column) + 1] = (row == column) ?  row+1 : 0;\n            printf(\"row: %d, and column: %d, data: %d\\n\",row, 2*column, Rtable[row*sern +2*column]);\n            printf(\"row: %d, and column: %d, data: %d\\n\",row, 2*column+1, Rtable[row*sern +2*column+1]);\n            //Rtable[row][2*column] = (row == column) ? 0 : 1000;\n            //Rtable[row][(2*column)+1] = (row == column) ?  row+1 : 0;\n        }\n    }\n    int i, k;\n    for(i = 0; i &lt; sern; i++){\n        printf(\"data[%d] is : \", i);\n        for(k = 0; k &lt; (2*sern); k++)\n            printf(\"%d:%d, \",k,Rtable[i*sern + k]);\n        printf(\"\\n\");\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "function", "types", "parameters"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1428527825, "post_id": 29525489, "comment_id": 47205319, "body": "You can&#39;t .... Sorry. C++ (and also C) is a typed language."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1428528112, "post_id": 29525489, "comment_id": 47205482, "body": "Well, you can work around of it to some extent by using a structure bundling a void pointer to <b>some</b> data and some custom type designator (as enum type, for example)"}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1428528222, "post_id": 29525489, "comment_id": 47205532, "body": "You can have &quot;overloaded macros&quot; in C11 using type-generic expressions (see <a href=\"http://en.wikipedia.org/wiki/C11_%28C_standard_revision%29\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/C11_%28C_standard_revision%29</a>) but it might or might not be what you want."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 2, "creation_date": 1428528239, "post_id": 29525489, "comment_id": 47205543, "body": "You can use a variadic function as long as you have at least one named and typed parameter -- but the type information is not passed to the function. You need a convention to specify the type (like, for example, <code>printf</code>&#39;s format string)."}], "answers": [{"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1428591373, "last_edit_date": 1495535445, "creation_date": 1428588082, "answer_id": 29540689, "question_id": 29525489, "link": "https://stackoverflow.com/questions/29525489/c-function-parameter-with-undefined-type-parameters/29540689#29540689", "title": "C : Function parameter with undefined type parameters", "body": "<p>Since code is avoiding two functions with a lot of similar codes, write a large helper function for 2 wrapper functions (1 for each struct type).</p>\n\n<pre><code>struct type1 {\n  int i;\n};\n\nstruct type2 {\n  long l;\n};\n\nstatic int foo_void(void *data, int type) {\n  printf(\"%d\\n\", type);\n  // lots of code\n  }\n\nint foo_struct1(struct type1 *data) {\n  return foo_void(data, 1);\n}\n\nint foo_struct2(struct type2 *data) {\n  return foo_void(data, 2);\n}\n</code></pre>\n\n<p>With C11, use of <code>_Generic</code>, code could get you there: <a href=\"https://stackoverflow.com/a/17290414/2410359\">Example</a> or as commented by <a href=\"https://stackoverflow.com/users/481267/brian\">@Brian</a></p>\n\n<p>Example</p>\n\n<pre><code>int foo_default(void *data) {\n  return foo_void(data, 0);\n}\n\n#define foo(x) _Generic((x),   \\\n   struct type1*: foo_struct1, \\\n   struct type2*: foo_struct2, \\\n   default: foo_default        \\\n   )(x)\n\nvoid test(void) {\n  struct type1 v1;\n  struct type2 v2;\n  foo(&amp;v1);  // prints 1\n  foo(&amp;v2);  // prints 2\n}\n</code></pre>\n"}], "owner": {"reputation": 1159, "user_id": 3347966, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/SDc9F.png?s=128&g=1", "display_name": "Jean", "link": "https://stackoverflow.com/users/3347966/jean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2021, "favorite_count": 2, "answer_count": 1, "score": 2, "last_activity_date": 1428591373, "creation_date": 1428527765, "question_id": 29525489, "link": "https://stackoverflow.com/questions/29525489/c-function-parameter-with-undefined-type-parameters", "title": "C : Function parameter with undefined type parameters", "body": "<p>How can I code a function that accept not defined parameters ?\nI imagine it could work like that :</p>\n\n<pre><code>void foo(void undefined_param)\n{\n    if(typeof(undefined_param) == int) {/...do something}\n\n    else if(typeof(undefined_param) == long) {/...do something else}\n}\n</code></pre>\n\n<p>I'have read that templates could maybe solve my problem, but in C++ and I need it in C.</p>\n\n<p>I'm just trying to avoid coding two functions with a lot of similar codes. In my case, I wont be looking for <code>int</code> or <code>long</code> but struct types that I defined.</p>\n"}, {"tags": ["c", "arrays", "scanf"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1428525560, "post_id": 29524835, "comment_id": 47204158, "body": "You can print <code>xKonc[i]</code> and <code>xZac[i]</code> to be sure that there no errors in reading the data from the file."}, {"owner": {"reputation": 89, "user_id": 4440356, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bcd7148ac27d0605392b6661f06847e8?s=128&d=identicon&r=PG&f=1", "display_name": "LukaTheLegend", "link": "https://stackoverflow.com/users/4440356/lukathelegend"}, "edited": false, "score": 0, "creation_date": 1428525654, "post_id": 29524835, "comment_id": 47204207, "body": "It reads 4910, when it should read 49, any solutions on that?"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1428525759, "post_id": 29524835, "comment_id": 47204264, "body": "your code looks right so there is something odd going on, put printf(&quot;%d %d&quot; xConc[i], xZac[i])"}, {"owner": {"reputation": 306, "user_id": 3508350, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e8b4d87030697e2b69d6bdcf6c681c0?s=128&d=identicon&r=PG", "display_name": "Joe Sewell", "link": "https://stackoverflow.com/users/3508350/joe-sewell"}, "edited": false, "score": 1, "creation_date": 1428525854, "post_id": 29524835, "comment_id": 47204320, "body": "How about a sample of your input, especially if you&#39;re reading from a file? Also, try using <code>printf(&quot;%d\\n&quot;, c);</code> to display items on separate lines. You might be getting the right input, but your output may be running together."}, {"owner": {"reputation": 89, "user_id": 4440356, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bcd7148ac27d0605392b6661f06847e8?s=128&d=identicon&r=PG&f=1", "display_name": "LukaTheLegend", "link": "https://stackoverflow.com/users/4440356/lukathelegend"}, "edited": false, "score": 0, "creation_date": 1428525926, "post_id": 29524835, "comment_id": 47204351, "body": "Thanks joe, i completely missed that, so we got that part fixed"}], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 4440356, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bcd7148ac27d0605392b6661f06847e8?s=128&d=identicon&r=PG&f=1", "display_name": "LukaTheLegend", "link": "https://stackoverflow.com/users/4440356/lukathelegend"}, "edited": false, "score": 0, "creation_date": 1428526022, "post_id": 29525014, "comment_id": 47204415, "body": "That was the issue, i completely missed that, thanks"}], "tags": [], "owner": {"reputation": 736, "user_id": 3695941, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/d09ea15b72ed247b054bc6b1df37ab44?s=128&d=identicon&r=PG&f=1", "display_name": "AndrewGrant", "link": "https://stackoverflow.com/users/3695941/andrewgrant"}, "is_accepted": true, "score": 0, "last_activity_date": 1428525884, "creation_date": 1428525884, "answer_id": 29525014, "question_id": 29524835, "link": "https://stackoverflow.com/questions/29524835/c-array-manipulation-questions/29525014#29525014", "title": "C Array manipulation questions", "body": "<p>I don't see anything obviously wrong with this. Can you include your input file? I would venture to bet you are printing a 49 and a 0, without a newline character, causing you to think you are printing 490</p>\n"}], "owner": {"reputation": 89, "user_id": 4440356, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bcd7148ac27d0605392b6661f06847e8?s=128&d=identicon&r=PG&f=1", "display_name": "LukaTheLegend", "link": "https://stackoverflow.com/users/4440356/lukathelegend"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 29525014, "answer_count": 1, "score": 0, "last_activity_date": 1428525884, "creation_date": 1428525249, "question_id": 29524835, "link": "https://stackoverflow.com/questions/29524835/c-array-manipulation-questions", "title": "C Array manipulation questions", "body": "<p>So i have a few questions about reading into arrays(very new to c)\nI have this code so far</p>\n\n<pre><code>int xZac[stCrt];\nint xKonc[stCrt];\nint yZac[stCrt];\nint yKonc[stCrt];\nfor (int i=0; i &lt; stCrt; i++) {\n    scanf(\"%d\", &amp;xZac[i]); \n    scanf(\"%d\", &amp;yZac[i]);\n    scanf(\"%d\", &amp;xKonc[i]);\n    scanf(\"%d\", &amp;yKonc[i]);\n    int c = xKonc[i]-xZac[i];\n    printf(\"%d\", c);\n    //the values here shoud be  xKonc[0]=49, xZac[0] = 0, it outprints 490\n   // but i need the actual difference between those in other inputs\n   //it also only returns it once even tho on the first input there should     be 2 such values\n  //on another instance(maybe im reading them wrong?) xKonc[0]=29 and xZac[0]=0 but the output is 2907220\n}\n</code></pre>\n\n<p>Is this the proper way of reading into an array?\nHow do i then get the value of this, i need to use it in for statement later on but i cant seem to get it right. How would i say get the number of xKonc[i]-xZac[i]. it seems to return pointers or something when i try it. So what id like to know is how to subtract actual integers from arrays, and if im reading the data right or is the problem there</p>\n"}, {"tags": ["c", "string", "int"], "comments": [{"owner": {"reputation": 5871, "user_id": 1995006, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/4oxFd.png?s=128&g=1", "display_name": "Mr.Web", "link": "https://stackoverflow.com/users/1995006/mr-web"}, "edited": false, "score": 0, "creation_date": 1428524824, "post_id": 29524682, "comment_id": 47203773, "body": "Try splitting every bit and convert each to an int, than the number on the left to INT and add the right ones: 234(int)+0.89"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1428524878, "post_id": 29524682, "comment_id": 47203800, "body": "At least paste it properly..."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1428524926, "post_id": 29524682, "comment_id": 47203824, "body": "And how exactly 234.89 can be converted to &quot;integer type&quot;?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1428525264, "post_id": 29524682, "comment_id": 47204003, "body": "@EugeneSh. how <i>dare</i> you miss the <i>homework</i> tag? ;-)"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1428526746, "post_id": 29524682, "comment_id": 47204795, "body": "<a href=\"http://www.opensource.apple.com/source/xnu/xnu-1456.1.26/bsd/libkern/strtol.c\" rel=\"nofollow noreferrer\">opensource.apple.com/source/xnu/xnu-1456.1.26/bsd/libkern/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 736, "user_id": 3695941, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/d09ea15b72ed247b054bc6b1df37ab44?s=128&d=identicon&r=PG&f=1", "display_name": "AndrewGrant", "link": "https://stackoverflow.com/users/3695941/andrewgrant"}, "is_accepted": false, "score": 0, "last_activity_date": 1428525488, "creation_date": 1428525488, "answer_id": 29524893, "question_id": 29524682, "link": "https://stackoverflow.com/questions/29524682/how-to-convert-a-string-into-a-integer-type/29524893#29524893", "title": "How to convert a string into a integer type", "body": "<p>Well first off, if an int cannot store a decimal value. You might want to do some more reading on C data types. There are methods already built to do it for you, but you since this seems like a HW assignment, you want to implement it yourself.</p>\n\n<p>I recommend you loop through each character in the string, and convert that to an int. You will have to deal with some base 10 stuff to get the places right.</p>\n"}], "owner": {"reputation": 1, "user_id": 4766001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c82ed0339e696afba7eabf6b8b95952?s=128&d=identicon&r=PG&f=1", "display_name": "bryanDF", "link": "https://stackoverflow.com/users/4766001/bryandf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1428525488, "creation_date": 1428524702, "question_id": 29524682, "link": "https://stackoverflow.com/questions/29524682/how-to-convert-a-string-into-a-integer-type", "title": "How to convert a string into a integer type", "body": "<p>Starting with a string such as \u201c234.89\u201d, convert it</p>\n\n<p>to a number without using built-in  string  to  </p>\n\n<p>number  conversion  methods.</p>\n"}, {"tags": ["c", "linux", "macos"], "comments": [{"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1428523272, "post_id": 29524251, "comment_id": 47202933, "body": "first of all - you cannot execute c code, you can compile into binary and then run, so, difference not between linux/osx, but between different compilers"}, {"owner": {"reputation": 51, "user_id": 4765895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76b0f660bc7965e609f16dcbd3c880a5?s=128&d=identicon&r=PG&f=1", "display_name": "MetricSystem93", "link": "https://stackoverflow.com/users/4765895/metricsystem93"}, "edited": false, "score": 0, "creation_date": 1428523395, "post_id": 29524251, "comment_id": 47203015, "body": "A technicality, but you are correct none the less. OS X uses LLVM, while those on Linux were using gcc. I compiled using the command gcc sample.c -o sample on OS X."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1428523729, "post_id": 29524251, "comment_id": 47203206, "body": "@EugeneSh. Calling and returning from a function are sequence points. The problem is order of evaluation, not sequence points, as explained in the answers."}, {"owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1428523768, "post_id": 29524251, "comment_id": 47203226, "body": "@EugeneSh. Not undefined behaviour. Just unspecified behaviour. Exactly one of two behaviours is guaranteed to happen."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1428523828, "post_id": 29524251, "comment_id": 47203257, "body": "@Barmar, gnasher729 You are right."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1428523879, "post_id": 29524251, "comment_id": 47203280, "body": "its a nice case of &#39;well behaved&#39; undefined behavior. Ie there are 2 distinct possible outcomes (in practice not theory) and the 2 compilers have interestingly chosen one each. Interesting to investigate why - I mean is it accidental, deliberate, a natural outcome of the compiler architectures..."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1428524213, "post_id": 29524251, "comment_id": 47203462, "body": "@pm100 I guess it is natural consequence of a deliberate design consideration."}], "answers": [{"tags": [], "owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "is_accepted": false, "score": 8, "last_activity_date": 1428523963, "last_edit_date": 1428523963, "creation_date": 1428523637, "answer_id": 29524370, "question_id": 29524251, "link": "https://stackoverflow.com/questions/29524251/c-code-produces-different-results-on-os-x-vs-linux/29524370#29524370", "title": "C code produces different results on OS X vs Linux", "body": "<p>The order of evaluation of parameters to operator <code>+</code> is unspecified. That means that there is no particular ordering, and <code>fun1()</code> can be evaluated before or after the read of <code>a</code> in the expression <code>a + fun1()</code><sup>*</sup>. You are seeing the effect of different orders of evaluation on different platforms.</p>\n\n<hr>\n\n<p><sup>* Note that the function call <code>fun1()</code> introduces a sequence point, so the behaviour of <code>a + fun1();</code> is well defined, even if the order of evaluation of the operands is <em>unspecified</em>. Without a function call there would be no sequence point (e.g. <code>a + a++</code>), which would yield <em>undefined behaviour</em>.</sup></p>\n"}, {"tags": [], "owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "is_accepted": false, "score": 3, "last_activity_date": 1428523680, "creation_date": 1428523680, "answer_id": 29524381, "question_id": 29524251, "link": "https://stackoverflow.com/questions/29524251/c-code-produces-different-results-on-os-x-vs-linux/29524381#29524381", "title": "C code produces different results on OS X vs Linux", "body": "<p>The order in which operands are evaluated is unspecified. That means in the expression a + fun1 () the compiler can choose to evaluate a before or after calling fun1 (). Both results are correct. Your code isn't. </p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 3334720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XmHzx.jpg?s=128&g=1", "display_name": "capac", "link": "https://stackoverflow.com/users/3334720/capac"}, "is_accepted": false, "score": 1, "last_activity_date": 1428524018, "creation_date": 1428524018, "answer_id": 29524465, "question_id": 29524251, "link": "https://stackoverflow.com/questions/29524251/c-code-produces-different-results-on-os-x-vs-linux/29524465#29524465", "title": "C code produces different results on OS X vs Linux", "body": "<p>There is no specification for how to evaluate these operands, so the compiler may choose either order. It seems in this case that the compiler you use on your Mac has a different implementation for evaluation order than the compiler on your Linux, thus the apparent inconsistency. Writing cleaner code greatly helps for things like this.</p>\n"}], "owner": {"reputation": 51, "user_id": 4765895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76b0f660bc7965e609f16dcbd3c880a5?s=128&d=identicon&r=PG&f=1", "display_name": "MetricSystem93", "link": "https://stackoverflow.com/users/4765895/metricsystem93"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1072, "favorite_count": 0, "answer_count": 3, "score": 5, "last_activity_date": 1428524018, "creation_date": 1428523173, "question_id": 29524251, "link": "https://stackoverflow.com/questions/29524251/c-code-produces-different-results-on-os-x-vs-linux", "title": "C code produces different results on OS X vs Linux", "body": "<p>I'm attempting to execute the following C code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint a = 5;\nint fun1(){\n  a = 17;\n  return 3;\n}\n\nint main(){\n  int b;\n  b = a + fun1();\n  printf(\"%d\\n\", b);\n}\n</code></pre>\n\n<p>When I run it on my macbook I get an answer of 8, but when I run it in Linux I get an answer of 20. I've had a few friends run it and everyone with a Mac gets 8, while everyone running Linux gets 20. What would cause this?</p>\n\n<p>I'm not so much interested in the correct answer as I am on the reason behind the two environments giving different answers. What about OS X and Linux causes the discrepancy?</p>\n"}, {"tags": ["c", "function-pointers", "nxp-microcontroller"], "comments": [{"owner": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "edited": false, "score": 0, "creation_date": 1428523181, "post_id": 29523973, "comment_id": 47202879, "body": "Just as a sanity check, could you post the code you use to declare and initialize the function pointer?"}, {"owner": {"reputation": 37702, "user_id": 129805, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/F1gxS.png?s=128&g=1", "display_name": "fadedbee", "link": "https://stackoverflow.com/users/129805/fadedbee"}, "reply_to_user": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "edited": false, "score": 0, "creation_date": 1428523955, "post_id": 29523973, "comment_id": 47203330, "body": "I&#39;ll dig out the code tomorrow."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1428524061, "post_id": 29523973, "comment_id": 47203385, "body": "Anyway, a life without a debugger is tough. You really should look at the <code>PSP</code>, <code>MSP</code> and friends.."}, {"owner": {"reputation": 1304, "user_id": 1073171, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zrsir.jpg?s=128&g=1", "display_name": "Brian Sidebotham", "link": "https://stackoverflow.com/users/1073171/brian-sidebotham"}, "edited": false, "score": 0, "creation_date": 1428529258, "post_id": 29523973, "comment_id": 47206031, "body": "Are you sure it&#39;s position independent code? Unlikely I&#39;d say, which means the code is likely to only run at the linked address, an exact copy is therefore not what you want to see! Disassemble the section, and post the result"}, {"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1428654137, "post_id": 29523973, "comment_id": 47263633, "body": "also many embedded systems have a Harvard architecture, meaning that the executable code and the data reside in physically different memory regions. Hence, if you&#39;ve generated some code, you won&#39;t be able to execute it because a function pointer into the data memory isn&#39;t meaningful."}, {"owner": {"reputation": 37702, "user_id": 129805, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/F1gxS.png?s=128&g=1", "display_name": "fadedbee", "link": "https://stackoverflow.com/users/129805/fadedbee"}, "reply_to_user": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1428654244, "post_id": 29523973, "comment_id": 47263708, "body": "@TheParamagneticCroissant the array is forced into the <code>.text</code> section, so even if the LPC810 couldn&#39;t execute code from RAM, it wouldn&#39;t be an issue.  As you can see, <code>machine_code</code> is in the same section as <code>fn</code> and <code>main</code>."}, {"owner": {"reputation": 37702, "user_id": 129805, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/F1gxS.png?s=128&g=1", "display_name": "fadedbee", "link": "https://stackoverflow.com/users/129805/fadedbee"}, "reply_to_user": {"reputation": 1304, "user_id": 1073171, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zrsir.jpg?s=128&g=1", "display_name": "Brian Sidebotham", "link": "https://stackoverflow.com/users/1073171/brian-sidebotham"}, "edited": false, "score": 0, "creation_date": 1428654406, "post_id": 29523973, "comment_id": 47263792, "body": "@BrianSidebotham code and disassembly provided, but it doesn&#39;t work with <code>fnptr</code>, using <code>fn</code> everything is fine."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1428916453, "post_id": 29523973, "comment_id": 47349402, "body": "Maybe you want to use some JIT library (e.g. GNU <a href=\"http://www.gnu.org/software/lightning/\" rel=\"nofollow noreferrer\">lightning</a>, <a href=\"http://git.savannah.gnu.org/cgit/libjit.git\" rel=\"nofollow noreferrer\">libjit</a>...)"}, {"owner": {"reputation": 37702, "user_id": 129805, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/F1gxS.png?s=128&g=1", "display_name": "fadedbee", "link": "https://stackoverflow.com/users/129805/fadedbee"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1428924301, "post_id": 29523973, "comment_id": 47353849, "body": "@BasileStarynkevitch Thanks, those are interesting projects of which I was unaware.  Unfortunately I doubt that they are small enough to be useful - the LPC810 which I&#39;m using has 1KB of RAM."}], "answers": [{"tags": [], "owner": {"reputation": 37702, "user_id": 129805, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/F1gxS.png?s=128&g=1", "display_name": "fadedbee", "link": "https://stackoverflow.com/users/129805/fadedbee"}, "is_accepted": true, "score": 1, "last_activity_date": 1428924694, "creation_date": 1428924694, "answer_id": 29604243, "question_id": 29523973, "link": "https://stackoverflow.com/questions/29523973/lpc810-why-wont-machine-code-execute-from-an-array-of-uint8-t-in-flash/29604243#29604243", "title": "LPC810 - why won&#39;t machine code execute from an array of uint8_t in flash?", "body": "<p>I amended the code to call the original <code>fn</code> though a function pointer too, in order to be able to generate working and non-working assembly code that was hopefully near-identical.</p>\n\n<p><code>machine_code</code> has become much longer, as I am now using no optimisation (<code>-O0</code>).</p>\n\n<pre><code>#include \"stdio.h\"\n#include \"serial.h\"\n\nextern \"C\" void SysTick_Handler() {\n  // generate an interrupt for delay\n}\n\nvoid delay(int millis) {\n    while (--millis &gt;= 0) {\n        __WFI(); // wait for SysTick interrupt\n    }\n}\n\nextern \"C\" int fn(int a, int b) {\n    return a + b;\n}\n\n/*\n000002bc &lt;fn&gt;:\n 2bc:   b580        push    {r7, lr}\n 2be:   b082        sub sp, #8\n 2c0:   af00        add r7, sp, #0\n 2c2:   6078        str r0, [r7, #4]\n 2c4:   6039        str r1, [r7, #0]\n 2c6:   687a        ldr r2, [r7, #4]\n 2c8:   683b        ldr r3, [r7, #0]\n 2ca:   18d3        adds    r3, r2, r3\n 2cc:   1c18        adds    r0, r3, #0\n 2ce:   46bd        mov sp, r7\n 2d0:   b002        add sp, #8\n 2d2:   bd80        pop {r7, pc}\n*/\nextern \"C\" const uint8_t machine_code[24] __attribute__((aligned (4))) __attribute__((section (\".text\"))) = {\n0x80,0xb5,\n0x82,0xb0,\n0x00,0xaf,\n0x78,0x60,\n0x39,0x60,\n0x7a,0x68,\n0x3b,0x68,\n0xd3,0x18,\n0x18,0x1c,\n0xbd,0x46,\n0x02,0xb0,\n0x80,0xbd\n};\n\nint main() {\n    LPC_SWM-&gt;PINASSIGN0 = 0xFFFFFF04UL;\n    serial.init(LPC_USART0, 115200);\n\n    SysTick_Config(12000000/1000); // 1ms ticks\n\n    int(*fnptr)(int a, int b) = (int(*)(int, int))fn;\n    //int(*fnptr)(int a, int b) = (int(*)(int, int))machine_code;\n\n    for (int a = 0; ; a++) {\n        int c = fnptr(a, 1000000);\n        printf(\"Hello world2 %d.\\n\", c);\n        delay(1000);\n    }\n}\n</code></pre>\n\n<p>I compiled the code above, generating <code>firmware.fn.elf</code> and <code>firmware.machinecode.elf</code> by uncommenting <code>//int(*fnptr)(int a, int b) = (int(*)(int, int))machine_code;</code> (and commenting-out the line above).</p>\n\n<p>The first code (<code>fn</code>) worked, the second code (<code>machine_code</code>) crashed.</p>\n\n<p><code>fn</code>'s text and the code at <code>machine_code</code> are identical:</p>\n\n<pre><code>000002bc &lt;fn&gt;:\n 2bc:   b580            push    {r7, lr}\n 2be:   b082            sub     sp, #8\n 2c0:   af00            add     r7, sp, #0\n 2c2:   6078            str     r0, [r7, #4]\n 2c4:   6039            str     r1, [r7, #0]\n 2c6:   687a            ldr     r2, [r7, #4]\n 2c8:   683b            ldr     r3, [r7, #0]\n 2ca:   18d3            adds    r3, r2, r3\n 2cc:   1c18            adds    r0, r3, #0\n 2ce:   46bd            mov     sp, r7\n 2d0:   b002            add     sp, #8\n 2d2:   bd80            pop     {r7, pc}\n\n000002d4 &lt;machine_code&gt;:\n 2d4:   b580            push    {r7, lr}\n 2d6:   b082            sub     sp, #8\n 2d8:   af00            add     r7, sp, #0\n 2da:   6078            str     r0, [r7, #4]\n 2dc:   6039            str     r1, [r7, #0]\n 2de:   687a            ldr     r2, [r7, #4]\n 2e0:   683b            ldr     r3, [r7, #0]\n 2e2:   18d3            adds    r3, r2, r3\n 2e4:   1c18            adds    r0, r3, #0\n 2e6:   46bd            mov     sp, r7\n 2e8:   b002            add     sp, #8\n 2ea:   bd80            pop     {r7, pc}\n\n000002ec &lt;main&gt;:\n...\n</code></pre>\n\n<p>The only difference in the calling code is the location of the code called:</p>\n\n<pre><code>$ diff firmware.fn.bin.xxd firmware.machine_code.bin.xxd\n54c54\n&lt; 0000350: 0040 0640 e02e 0000 bd02 0000 4042 0f00  .@.@........@B..\n---\n&gt; 0000350: 0040 0640 e02e 0000 d402 0000 4042 0f00  .@.@........@B..\n</code></pre>\n\n<p>The second address <code>d402</code> is the address of the <code>machine_code</code> array.</p>\n\n<p>Curiously, the first address <code>bd02</code> is a little-endian odd number (<code>d</code> is odd in hex).</p>\n\n<p>The address of <code>fn</code> is <code>02bc</code> (<code>bc02</code> in big endian), so the pointer to <code>fn</code> is <em>not</em> the address of <code>fn</code>, but the address of <code>fn</code> plus one (or with the low bit set).</p>\n\n<p>Changing the code to:</p>\n\n<pre><code>...\n\nint main() {\n    LPC_SWM-&gt;PINASSIGN0 = 0xFFFFFF04UL;\n    serial.init(LPC_USART0, 115200);\n\n    SysTick_Config(12000000/1000); // 1ms ticks\n\n    //int(*fnptr)(int a, int b) = (int(*)(int, int))fn;\n    int machine_code_addr_low_bit_set = (int)machine_code | 1;\n    int(*fnptr)(int a, int b) = (int(*)(int, int))machine_code_addr_low_bit_set;\n\n    for (int a = 0; ; a++) {\n        int c = fnptr(a, 1000000);\n        printf(\"Hello world2 %d.\\n\", c);\n        delay(1000);\n    }\n}\n</code></pre>\n\n<p>Makes it work.</p>\n\n<hr>\n\n<p>Googling, I found:</p>\n\n<p>The mechanism for switching makes use of the fact that all instructions must be (at least) halfword-aligned, which means that bit[0] of the branch target address is redundant. Therefore this bit can be re-used to indicate the target instruction set at that address. Bit[0] cleared to 0 means ARM and bit[0] set to 1 means Thumb.</p>\n\n<p>on <a href=\"http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.faqs/ka12545.html\" rel=\"nofollow\">http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.faqs/ka12545.html</a></p>\n\n<hr>\n\n<p>tl;dr</p>\n\n<p>You need to set the low bit on function pointers when executing data as code on ARM Thumb.</p>\n"}], "owner": {"reputation": 37702, "user_id": 129805, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/F1gxS.png?s=128&g=1", "display_name": "fadedbee", "link": "https://stackoverflow.com/users/129805/fadedbee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 315, "favorite_count": 1, "accepted_answer_id": 29604243, "answer_count": 1, "score": 1, "last_activity_date": 1428977492, "creation_date": 1428522217, "last_edit_date": 1428977492, "question_id": 29523973, "link": "https://stackoverflow.com/questions/29523973/lpc810-why-wont-machine-code-execute-from-an-array-of-uint8-t-in-flash", "title": "LPC810 - why won&#39;t machine code execute from an array of uint8_t in flash?", "body": "<p>I'm writing embedded C/assembler code for the NXP LPC810 microcontroller (just a hobby project).</p>\n\n<p>I have a function <code>fn</code>.  I also have an <em>exact</em> copy of that function's machine code in an array of <code>uint8_t</code>.  (I have checked the hex file.)</p>\n\n<p>I create a function pointer <code>fnptr</code>, with the same type as <code>fn</code> and point it at the array, using a cast.</p>\n\n<p>It all cross-compiles without warnings.</p>\n\n<p>When the MCU executes <code>fn</code> it works correctly.</p>\n\n<p>When the MCU executes <code>fnptr</code> it crashes (I can't see any debug, as there are only 8 pins, all in use).</p>\n\n<p>The code is position independent.</p>\n\n<p>The array has the correct 4 byte alignment.</p>\n\n<p><code>fn</code> is in the <code>.text</code> section of the elf file.</p>\n\n<p>The array is forced into the <code>.text</code> section of the elf file (still in flash, not RAM).</p>\n\n<p>I have <em>assumed</em> that there is no NX-like functionality on such a basic Coretex M0+ MCU.  (Cortex M3 and M4 do have some form of read-only memory protection for code.)</p>\n\n<p>Are there other reasons why the machine code in the array does not work?</p>\n\n<hr>\n\n<p>Update:</p>\n\n<p>Here is the code:</p>\n\n<pre><code>#include \"stdio.h\"\n#include \"serial.h\"\n\nextern \"C\" void SysTick_Handler() {\n  // generate an interrupt for delay\n}\n\nvoid delay(int millis) {\n    while (--millis &gt;= 0) {\n        __WFI(); // wait for SysTick interrupt\n    }\n}\n\nextern \"C\" int fn(int a, int b) {\n    return a + b;\n}\n\n/* arm-none-eabi-objdump -d firmware.elf\n00000162 &lt;fn&gt;:\n 162:   1840        adds    r0, r0, r1\n 164:   4770        bx  lr\n 166:   46c0        nop         ; (mov r8, r8)\n*/\nextern \"C\" const uint8_t machine_code[6] __attribute__((aligned (4))) __attribute__((section (\".text\"))) = {\n0x40,0x18,\n0x70,0x47,\n0xc0,0x46\n};\n\nint main() {\n    LPC_SWM-&gt;PINASSIGN0 = 0xFFFFFF04UL;\n    serial.init(LPC_USART0, 115200);\n\n    SysTick_Config(12000000/1000); // 1ms ticks\n    int(*fnptr)(int a, int b) = (int(*)(int, int))machine_code;\n\n    for (int a = 0; ; a++) {\n        int c = fnptr(a, 1000000);\n        printf(\"Hello world2 %d.\\n\", c);\n        delay(1000);\n    }\n}\n</code></pre>\n\n<p>And here is the disassembled output from <code>arm-none-eabi-objdump -D -Mforce-thumb firmware.elf</code>:</p>\n\n<pre><code>00000162 &lt;fn&gt;:\n 162:   1840        adds    r0, r0, r1\n 164:   4770        bx  lr\n 166:   46c0        nop         ; (mov r8, r8)\n\n00000168 &lt;machine_code&gt;:\n 168:   1840        adds    r0, r0, r1\n 16a:   4770        bx  lr\n 16c:   46c0        nop         ; (mov r8, r8)\n 16e:   46c0        nop         ; (mov r8, r8)\n\n00000170 &lt;main&gt;:\n...\n</code></pre>\n"}, {"tags": ["c", "header"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 2, "creation_date": 1428522074, "post_id": 29523885, "comment_id": 47202185, "body": "Yes, of course - you could have just tried this yourself, no ?"}, {"owner": {"reputation": 1177, "user_id": 3057900, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/3fd5c1a3141c1130fc18771498169887?s=128&d=identicon&r=PG&f=1", "display_name": "ratzip", "link": "https://stackoverflow.com/users/3057900/ratzip"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1428522136, "post_id": 29523885, "comment_id": 47202227, "body": "yes, I can, but I need to have some communication with others"}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1428522073, "creation_date": 1428522073, "answer_id": 29523917, "question_id": 29523885, "link": "https://stackoverflow.com/questions/29523885/include-header-files-in-c/29523917#29523917", "title": "include header files in C", "body": "<p>Yes, it can be used. That is the sole purpose of <code>#include</code>ing of header files.</p>\n\n<p>For more information, you can see the preprocessed version of code. Use</p>\n\n<pre><code>gcc -E &lt;filename.c&gt;  //main.c, in this case\n</code></pre>\n\n<p>There you can see the presence of the <code>struct</code> and MACROS definde in the included header files.</p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 0, "last_activity_date": 1428522874, "creation_date": 1428522874, "answer_id": 29524168, "question_id": 29523885, "link": "https://stackoverflow.com/questions/29523885/include-header-files-in-c/29524168#29524168", "title": "include header files in C", "body": "<p>Yes, <code>#include</code> directives themselves appearing in included files have their normal effect, up to an implementation-defined limit on the number of levels of inclusion.  The \"normal effect\" is equivalent to textual interpolation -- that is, there is no separate scoping for the contents of included files -- so any declaration appearing in any directly or indirectly included file is visible to all code following the point of inclusion.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 3334720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XmHzx.jpg?s=128&g=1", "display_name": "capac", "link": "https://stackoverflow.com/users/3334720/capac"}, "is_accepted": false, "score": 0, "last_activity_date": 1428523243, "creation_date": 1428523243, "answer_id": 29524268, "question_id": 29523885, "link": "https://stackoverflow.com/questions/29523885/include-header-files-in-c/29524268#29524268", "title": "include header files in C", "body": "<p>Yep, #include statements can chain multiple files together. #include literally copies and pastes the contents of one file into another, so you can think of it as a one-after-another effect.</p>\n"}, {"tags": [], "owner": {"reputation": 156, "user_id": 2227353, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SbTDE.jpg?s=128&g=1", "display_name": "Ayman Younis", "link": "https://stackoverflow.com/users/2227353/ayman-younis"}, "is_accepted": true, "score": 1, "last_activity_date": 1428531887, "creation_date": 1428531887, "answer_id": 29526419, "question_id": 29523885, "link": "https://stackoverflow.com/questions/29523885/include-header-files-in-c/29526419#29526419", "title": "include header files in C", "body": "<p>Sure you can use both Struct and MACROS in the main.c</p>\n\n<p>You need to be aware of the C Compilation Process, Before main.c is being compiled or linked, there is the pre-processor step:</p>\n\n<p><strong>Preprocessor</strong>:</p>\n\n<ul>\n<li>The input to this phase is the .c File and .h Files</li>\n<li>The preprocess process the preprocessor keywords like #define, #ifdef, #include, etc. and generate a new .pre file or .i file after the text replacement process.</li>\n<li>The output of this phase is a C Code without any preprocessor keyword.</li>\n</ul>\n\n<p><img src=\"https://i.stack.imgur.com/aAgFU.jpg\" alt=\"enter image description here\"></p>\n\n<p>So the main.c will actually look like this:</p>\n\n<pre><code>#define HELLO (1)\ntypedef struct\n{\n   int a;\n   int b;\n} hello;\n#define NUMBER (3)\n</code></pre>\n\n<p>And then replace all macros, here you don't use HELLO or NUMBER, so the pure c main file will be:</p>\n\n<pre><code>typedef struct\n{\n   int a;\n   int b;\n} hello;\n</code></pre>\n"}], "owner": {"reputation": 1177, "user_id": 3057900, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/3fd5c1a3141c1130fc18771498169887?s=128&d=identicon&r=PG&f=1", "display_name": "ratzip", "link": "https://stackoverflow.com/users/3057900/ratzip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 29526419, "answer_count": 4, "score": 0, "last_activity_date": 1428531887, "creation_date": 1428521955, "last_edit_date": 1428522854, "question_id": 29523885, "link": "https://stackoverflow.com/questions/29523885/include-header-files-in-c", "title": "include header files in C", "body": "<p>I am a newbie to C and C++ language, I have a question about header files in C:</p>\n\n<p><strong>a.h</strong></p>\n\n<pre><code>#define HELLO (1)\ntypedef struct\n{\n   int a;\n   int b;\n} hello;\n</code></pre>\n\n<p><strong>b.h</strong></p>\n\n<pre><code>#include \"a.h\"\n#define NUMBER (3)\n</code></pre>\n\n<p><strong>main.c</strong></p>\n\n<pre><code>#include \"b.h\"\n</code></pre>\n\n<p>in <code>main.c</code>, does <code>struct</code> and <code>macro</code> defined in <code>a.h</code> can be used in <code>main.c</code>?</p>\n"}, {"tags": ["c", "segmentation-fault", "malloc"], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1428522257, "post_id": 29523825, "comment_id": 47202299, "body": "As a side-effect <code>free(ptr);</code> won&#39;t release the memory, since you lost its pointer."}, {"owner": {"reputation": 17, "user_id": 4171304, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/68a968d31d2f8568ff9919ab6bb75330?s=128&d=identicon&r=PG&f=1", "display_name": "vaibhav agnihotri", "link": "https://stackoverflow.com/users/4171304/vaibhav-agnihotri"}, "edited": false, "score": 0, "creation_date": 1428522463, "post_id": 29523825, "comment_id": 47202425, "body": "In this case what will free(ptr); since it is now pointing to null??"}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 1, "creation_date": 1428522811, "post_id": 29523825, "comment_id": 47202637, "body": "the standard guarantees that <code>free</code>ing a <code>NULL</code> pointer does nothing."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1428522865, "post_id": 29523825, "comment_id": 47202668, "body": "@mch So I amend my comment."}], "tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": true, "score": 6, "last_activity_date": 1428521791, "creation_date": 1428521791, "answer_id": 29523825, "question_id": 29523765, "link": "https://stackoverflow.com/questions/29523765/why-is-the-following-code-producing-segmentation-fault/29523825#29523825", "title": "Why is the following code producing segmentation fault?", "body": "<p><code>if(ptr=NULL)</code> should be <code>if(ptr == NULL)</code>. Otherwise you are setting <code>ptr</code> to <code>NULL</code> and trying to access it. Generally a compiler should warn about it. Some programmers are using the following method to avoid this type of bugs: \n<code>if(NULL == ptr)</code>. In this case, if you forget one <code>=</code> you will get a compilation error.</p>\n"}], "owner": {"reputation": 17, "user_id": 4171304, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/68a968d31d2f8568ff9919ab6bb75330?s=128&d=identicon&r=PG&f=1", "display_name": "vaibhav agnihotri", "link": "https://stackoverflow.com/users/4171304/vaibhav-agnihotri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 29523825, "answer_count": 1, "score": 0, "last_activity_date": 1428521791, "creation_date": 1428521581, "question_id": 29523765, "link": "https://stackoverflow.com/questions/29523765/why-is-the-following-code-producing-segmentation-fault", "title": "Why is the following code producing segmentation fault?", "body": "<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\n  int main(void)\n{\n\n   int *ptr;\n   int max;\n   int i=0,number=0;\n\n    printf(\"Enter the size of array \\n\");\n\n\n  if( scanf(\"%i\",&amp;max) != 1)\n{\n     printf(\"number not enterd correctly\\n\");\n     exit(EXIT_FAILURE);\n}\n\n     ptr=(int *)malloc(max * sizeof(int));\n\n\n   if(ptr=NULL)\n{ \n\n      puts(\"Error in recieving memory\");\n      exit(EXIT_FAILURE);\n}\n\n   else\n{\n    puts(\"Enter array\");\n\n    while(i&lt;max &amp;&amp;  scanf(\"%d\",&amp;ptr[i]) == 1)\n    ++i;\n\n/*    number=i;\n      puts(\"Array entered is \");\n      for(i=0;i&lt;number;i++)\n      printf(\"%i  %i\\n\",i,ptr[i]);\n*/\n\n\n}\n\n    puts(\"Done!\");\n    free(ptr);\n\n    return 0;\n}\n</code></pre>\n\n<p>The program is compiling successfully without any errors.On running the program and after entering the first value in the array the program terminates with the segmentation fault.I'm using gcc compiler on ubuntu 12.04 running on vmware.</p>\n"}, {"tags": ["c", "pointers", "memcpy"], "comments": [{"owner": {"reputation": 434, "user_id": 3703709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7935f2798b555f61085fd5827c9095?s=128&d=identicon&r=PG&f=1", "display_name": "mstbaum", "link": "https://stackoverflow.com/users/3703709/mstbaum"}, "edited": false, "score": 0, "creation_date": 1428521459, "post_id": 29523680, "comment_id": 47201823, "body": "You need to terminate myName.firstName with a null char after you memcpy."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 3, "creation_date": 1428521585, "post_id": 29523680, "comment_id": 47201912, "body": "String literals can not be changed. the result is undefined  If could even change."}], "answers": [{"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 5, "last_activity_date": 1428522273, "last_edit_date": 1428522273, "creation_date": 1428521743, "answer_id": 29523807, "question_id": 29523680, "link": "https://stackoverflow.com/questions/29523680/memcpy-error-segmentation-fault-core-dumped/29523807#29523807", "title": "memcpy error : Segmentation fault (core dumped)", "body": "<p>In these statements</p>\n\n<pre><code>myName.firstName =  \"aaaaaaa\";\nhisName.firstName = \"bbbbbb\";\n</code></pre>\n\n<p>you initialized pointers with addresses of string literals.</p>\n\n<p>In next statement</p>\n\n<pre><code>memcpy(myName.firstName, hisName.firstName, sizeof(hisName.firstName));\n</code></pre>\n\n<p>you try to modify one of the string literals.</p>\n\n<p>According to the C Standard (6.4.5 String literals)</p>\n\n<blockquote>\n  <p>7 It is unspecified whether these arrays are distinct provided their\n  elements have the appropriate values. <strong>If the program attempts to\n  modify such an array, the behavior is undefined.</strong></p>\n</blockquote>\n\n<p>Also this expression</p>\n\n<pre><code>sizeof(hisName.firstName)\n</code></pre>\n\n<p>returns size of the pointer itself. It is not the same as the size of the corresponding string literal.</p>\n\n<p>The valid program could look the following way</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n\ntypedef struct fullName\n{\n    char firstName[8];\n    char lastName[8];\n} NAME;\n\nint main()\n{              \n    NAME myName = { \"aaaaaaa\" };\n    NAME hisName = { \"bbbbbb\" };\n\n    memcpy( myName.firstName, hisName.firstName, sizeof( hisName.firstName ) );\n\n    printf( \"myName.firstName = %s\\n\", myName.firstName );\n    printf( \"hisName.firstName = %s\\n\", hisName.firstName );\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 0, "last_activity_date": 1428521931, "creation_date": 1428521931, "answer_id": 29523876, "question_id": 29523680, "link": "https://stackoverflow.com/questions/29523680/memcpy-error-segmentation-fault-core-dumped/29523876#29523876", "title": "memcpy error : Segmentation fault (core dumped)", "body": "<p>This did not crash in MSVC, it produced the output:</p>\n\n<pre><code>myName.firstName = bbbbaaa\nhisName.firstName = bbbbbb\n</code></pre>\n\n<p>Notice that only 4 chars from <code>hisName</code> have been copied to <code>myName</code>. That is because </p>\n\n<pre><code>sizeof(hisName.firstName)\n</code></pre>\n\n<p>is 4 on your platform, the size of the pointer. But manipulating such strings is Undefined Behaviour anyway.</p>\n"}, {"tags": [], "owner": {"reputation": 2556, "user_id": 3488231, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/da4ac79b71c44d696f3567d4b53f6239?s=128&d=identicon&r=PG&f=1", "display_name": "user12205", "link": "https://stackoverflow.com/users/3488231/user12205"}, "is_accepted": true, "score": 1, "last_activity_date": 1428522188, "creation_date": 1428522188, "answer_id": 29523960, "question_id": 29523680, "link": "https://stackoverflow.com/questions/29523680/memcpy-error-segmentation-fault-core-dumped/29523960#29523960", "title": "memcpy error : Segmentation fault (core dumped)", "body": "<p>You are assigning <code>myName.firstName</code> and <code>hisName.firstName</code> with pointers to string literals. String literals cannot be modified, which is what's causing your error.</p>\n\n<p>To achieve what you want, you can either declare <code>firstName</code> as a <code>char</code> array, or allocate memory to it (as a <code>char</code> pointer).</p>\n\n<p>Array method:</p>\n\n<pre><code>typedef struct fullName\n{\n        char firstName[256]; // a sufficiently large number\n        char lastName[256];\n} NAME;\n\nint main()\n{              \n        NAME myName, hisName;\n        strcpy(myName.firstName, \"aaaaaaa\"); // You can't assign a string directly\n        strcpy(hisName.firstName, \"bbbbbb\");\n        memcpy(myName.firstName, hisName.firstName, sizeof(hisName.firstName));\n        printf(\"myName.firstName = %s\\n\", myName.firstName);\n        printf(\"hisName.firstName = %s\\n\", hisName.firstName);\n\n}\n</code></pre>\n\n<p>Allocation method:</p>\n\n<pre><code>typedef struct fullName\n{\n        char* firstName;\n        char* lastName;\n} NAME;\n\nint main()\n{              \n        NAME myName, hisName;\n        size_t buffersize = 256; // a sufficiently large number\n        myName.firstName = malloc(buffersize);\n        hisName.firstName = malloc(buffersize); // same for lastName\n\n        strcpy(myName.firstName, \"aaaaaaa\");\n        strcpy(hisName.firstName, \"bbbbbb\");\n        memcpy(myName.firstName, hisName.firstName, buffersize); // You can't use sizeof() as this will give the size of a pointer\n        printf(\"myName.firstName = %s\\n\", myName.firstName);\n        printf(\"hisName.firstName = %s\\n\", hisName.firstName);\n\n}\n</code></pre>\n"}], "owner": {"reputation": 226, "user_id": 4731958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/678891541/picture?type=large", "display_name": "Mohamed Abd El Raouf", "link": "https://stackoverflow.com/users/4731958/mohamed-abd-el-raouf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3801, "favorite_count": 0, "accepted_answer_id": 29523960, "answer_count": 3, "score": 1, "last_activity_date": 1428523046, "creation_date": 1428521329, "last_edit_date": 1428523046, "question_id": 29523680, "link": "https://stackoverflow.com/questions/29523680/memcpy-error-segmentation-fault-core-dumped", "title": "memcpy error : Segmentation fault (core dumped)", "body": "<p>I'm trying to copy one string to another in c using memcpy with the following code: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\n\ntypedef struct fullName\n{\n    char* firstName;\n    char* lastName;\n} NAME;\n\nint main()\n{              \n    NAME myName, hisName;\n\n    myName.firstName =  \"aaaaaaa\";\n    hisName.firstName = \"bbbbbb\";\n\n    memcpy(myName.firstName, hisName.firstName, sizeof(hisName.firstName));\n\n    printf(\"myName.firstName = %s\\n\", myName.firstName);\n    printf(\"hisName.firstName = %s\\n\", hisName.firstName);\n}\n</code></pre>\n\n<p>and it gives Segmentation fault (core dumped) Error after running the program\nI tried to declare <code>firstName</code> and <code>lastName</code> as pointer to an array of chars rather than pointer to char but the error persists . what am I missing ?! plz help...</p>\n\n<p>FYI .. I'm working on Ubuntu 14 and I'm using gcc (Ubuntu 4.8.2-19ubuntu1)...</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 4, "creation_date": 1428521250, "post_id": 29523590, "comment_id": 47201696, "body": "<code>len = max;</code> should be <code>max = len;</code>"}, {"owner": {"reputation": 2556, "user_id": 3488231, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/da4ac79b71c44d696f3567d4b53f6239?s=128&d=identicon&r=PG&f=1", "display_name": "user12205", "link": "https://stackoverflow.com/users/3488231/user12205"}, "edited": false, "score": 0, "creation_date": 1428521400, "post_id": 29523590, "comment_id": 47201788, "body": "Note that <code>getline()</code> is now a POSIX function and this name should not be used for custom functions in new code."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1428521406, "post_id": 29523590, "comment_id": 47201792, "body": "Did you check what the value of max is?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1428521576, "post_id": 29523590, "comment_id": 47201909, "body": "<code>main()</code> should be <code>int main(void)</code>"}, {"owner": {"reputation": 83, "user_id": 4673532, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-DQz9ZB4aCKU/AAAAAAAAAAI/AAAAAAAAADE/BEYUr48sebI/photo.jpg?sz=128", "display_name": "swapnil mandavkar", "link": "https://stackoverflow.com/users/4673532/swapnil-mandavkar"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1428521694, "post_id": 29523590, "comment_id": 47201968, "body": "@BLUEPIXY that worked..!! it was a silly mistake though..:| Thank you..:)"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1428527348, "post_id": 29523590, "comment_id": 47205104, "body": "<code>extern</code> in function scope? What, why?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1428606772, "post_id": 29523590, "comment_id": 47245495, "body": "these kinds of line: &#39;extern char line[];     extern char longest[];&#39; are not needed because the array definitions are in the same file.  &#39;extern&#39; is for data defined in other files."}, {"owner": {"reputation": 83, "user_id": 4673532, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-DQz9ZB4aCKU/AAAAAAAAAAI/AAAAAAAAADE/BEYUr48sebI/photo.jpg?sz=128", "display_name": "swapnil mandavkar", "link": "https://stackoverflow.com/users/4673532/swapnil-mandavkar"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1428940816, "post_id": 29523590, "comment_id": 47365191, "body": "@user3629249 I know that.. this is the first program i have written using &#39;extern&#39; so for understanding purpose i kept that there"}], "answers": [{"tags": [], "owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "is_accepted": false, "score": 0, "last_activity_date": 1452608935, "last_edit_date": 1452608935, "creation_date": 1428988247, "answer_id": 29619564, "question_id": 29523590, "link": "https://stackoverflow.com/questions/29523590/k-r-section-1-10-example-program-skipping-printf-line/29619564#29619564", "title": "K &amp; R section 1.10 example program skipping &#39;printf()&#39; line", "body": "<p>The <em>intent</em> of this code is to start <code>max</code> at zero then, for every line longer than the current <code>max</code>, copy the line and update <code>max</code> to the longer value:</p>\n\n<pre><code>max = 0;\nwhile( ( len = getline() ) &gt; 0 )  \n{\n    if( len &gt; max )\n    {\n        len = max;\n        copy();\n    }\n}\n</code></pre>\n\n<p>However, the line that's supposed to update <code>max</code> is assigning in the wrong direction. It sets <code>len</code> to be the current value of <code>max</code> and <em>never updates</em> <code>max</code> at all. This is something that would have been obvious with a bit of \"Debugging 101\", placing the following line after the call to <code>copy()</code>:</p>\n\n<pre><code>printf (\"New long line, len = %d, str = '%s'\\n\", max, longest);\n</code></pre>\n\n<p>That fact that you would never have seen the length changing would have (hopefully) narrowed down the problem pretty fast. The line in question should instead be:</p>\n\n<pre><code>max = len;\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 4673532, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-DQz9ZB4aCKU/AAAAAAAAAAI/AAAAAAAAADE/BEYUr48sebI/photo.jpg?sz=128", "display_name": "swapnil mandavkar", "link": "https://stackoverflow.com/users/4673532/swapnil-mandavkar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1452608935, "creation_date": 1428521074, "last_edit_date": 1428521273, "question_id": 29523590, "link": "https://stackoverflow.com/questions/29523590/k-r-section-1-10-example-program-skipping-printf-line", "title": "K &amp; R section 1.10 example program skipping &#39;printf()&#39; line", "body": "<p>I'm learning C through K &amp; R. I have reached to <strong>section 1.10 External Variables and Scope.</strong><br>\nIn that section they have written and explained program regarding external variable and their scope. I typed that code myself and tried to execute it. It does not show any run time or compile time error. However, it does not print any output also, which should be longest line from given input. I did debug the program and I found that program is <strong>skipping 'printf()' statement</strong>. I tried both on <strong>sublime text 2 + gcc and Turbo c++ v4.5</strong>, but still I don't get an output. I'm using Windows xpsp 3.<br>\nHere is my code :</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\n/* program to pring longest line using external variables */\n\n#define MAXSIZE 1000\n\nint max;\nchar line[ MAXSIZE ];\nchar longest[ MAXSIZE ];\n\nint getline( void );\nvoid copy( void );\n\nmain()\n{\n    int len;\n\n    extern int max;\n    extern char longest[];\n\n    max = 0;\n\n    while( ( len = getline() ) &gt; 0 )  \n    {\n        if( len &gt; max )\n        {\n            len = max;\n            copy();\n        }\n    }\n\n    if( max &gt; 0)\n        printf(\"\\n%s\\n\", longest);  /* This line is skipped */\n    return 0;\n}\n\nint getline( void )  /* Check if there is line */\n{\n    int c, i;\n    extern char line[];\n\n    for( i = 0; i &lt; MAXSIZE -1 &amp;&amp; ( c = getchar()) != EOF &amp;&amp;  c != '\\n'; ++i )\n        line[ i ] = c;\n\n     if( c == '\\n' )\n    {\n        line[ i ] = c;\n        ++i;\n    }\n\n    line[ i ] = '\\0';\n\n    return i;\n}\n\nvoid copy( void )  /* copy current line to longest if it is long */\n{\n    int i = 0;\n    extern char line[];\n    extern char longest[];\n\n    while( ( longest[ i ] = line[ i ] ) != '\\0' )\n        ++i;\n}\n</code></pre>\n\n<p>So my questions are :<br>\n<strong>Why is this happening?<br>\nWhat should I do so that program won't skip 'printf()' and will print an output?</strong><br>\nPlease help. Thank you.</p>\n"}, {"tags": ["c", "unix", "subshell"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1428521014, "post_id": 29523509, "comment_id": 47201564, "body": "What is the question? Subshell is the same shell when invoked from another shell. It&#39;s not any different from any other executable."}, {"owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 0, "creation_date": 1428521143, "post_id": 29523509, "comment_id": 47201638, "body": "<code>fork()</code> is pretty much not in use anymore these days.... ... ..."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 0, "creation_date": 1428521435, "post_id": 29523509, "comment_id": 47201806, "body": "@user2225104 What do you mean? The <code>fork</code> system call is not in use, but the library function is still there, but implemented differently."}, {"owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1428521848, "post_id": 29523509, "comment_id": 47202059, "body": "@EugeneSh. fork() was mainly useful in times when Unix V had no notion of threads. Using it today for new code is a bit on the anachronistic side. (1970 retro style)."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 0, "creation_date": 1428522108, "post_id": 29523509, "comment_id": 47202205, "body": "@user2225104 How would you spawn a child process?"}, {"owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1428525755, "post_id": 29523509, "comment_id": 47204262, "body": "@EugeneSh. I wouldn&#39;t."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 0, "creation_date": 1428525895, "post_id": 29523509, "comment_id": 47204337, "body": "@user2225104 So you are claiming that multiprocessing is outdated? Really?"}, {"owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1428526719, "post_id": 29523509, "comment_id": 47204783, "body": "@EugeneSh. Yup, as in &quot;same process NCores times&quot;. Other forms of multiprocessing, not but then you would use <code>exec()</code> and not <code>fork()</code>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 0, "creation_date": 1428527016, "post_id": 29523509, "comment_id": 47204945, "body": "@user2225104 I afraid I don&#39;t understand. Are you considering single (or limited) core platforms?"}, {"owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1428527265, "post_id": 29523509, "comment_id": 47205069, "body": "@EugeneSh. The simple fact, that you can achieve the same in a cheaper fashion with N threads as you can with N-1 child processes + main process does it for me. Along with all the memory footprint involved (copy on write of global data, ...) and other implications coming with child processes. If you want parallel processing, threads will do. If you want a chain of responsibities (pipelined actors or however  one wants to call it), using threads also produces better design."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 0, "creation_date": 1428527684, "post_id": 29523509, "comment_id": 47205257, "body": "@user2225104 That&#39;s all good if you are designing a fully independent system. But once you need to run some external executables requiring a private virtual memory space, how would you do this with threads?"}], "owner": {"reputation": 894, "user_id": 2445065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ecf68818f0f24fa84153c8e57d77e577?s=128&d=identicon&r=PG&f=1", "display_name": "rjs44", "link": "https://stackoverflow.com/users/2445065/rjs44"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1014, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1428520826, "creation_date": 1428520826, "question_id": 29523509, "link": "https://stackoverflow.com/questions/29523509/implementing-a-subshell-unix-c", "title": "Implementing a subshell Unix C", "body": "<p>I'm trying to implement a subshell in C. I already have a normal shell, which looks like this:</p>\n\n<pre><code>int status;\npid = fork();\nif (pid &lt; 0) {\n    exit(1);\n}\nelse if (pid == 0) {\n    if (execvp(node-&gt;command.program, node-&gt;command.argv) &lt; 0) {\n        exit(1);\n    }\n}\nelse {\n    waitpid(pid, &amp;status, 0);\n}\n</code></pre>\n\n<p>I'm trying to figure out how a subshell works, and how it differs from the code above.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c", "arrays", "memory", "memcpy"], "comments": [{"owner": {"reputation": 7053, "user_id": 1162141, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7db6bfbfbb420620e6df76c0e406098d?s=128&d=identicon&r=PG", "display_name": "technosaurus", "link": "https://stackoverflow.com/users/1162141/technosaurus"}, "edited": false, "score": 0, "creation_date": 1428520668, "post_id": 29523206, "comment_id": 47201372, "body": "You should probably just modify the bitmap data  to be {0x1616, 0x1616, ...} which is pretty easy to do with a simple C program for(i=0; i&lt;9216; i+=2) printf(&quot;0x%X%X, &quot;,bitheart_Bitmap[i],bitheart_Bitmap[i+1])."}, {"owner": {"reputation": 351, "user_id": 2905124, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/Q5HZk.jpg?s=128&g=1", "display_name": "Punchki", "link": "https://stackoverflow.com/users/2905124/punchki"}, "reply_to_user": {"reputation": 7053, "user_id": 1162141, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7db6bfbfbb420620e6df76c0e406098d?s=128&d=identicon&r=PG", "display_name": "technosaurus", "link": "https://stackoverflow.com/users/1162141/technosaurus"}, "edited": false, "score": 0, "creation_date": 1428521800, "post_id": 29523206, "comment_id": 47202034, "body": "So sorry guys, I found out the issue I was having!  You are all right, it did write it correctly... The problem I had was I thought sqrt(9216) = 98... when in fact it is 96..."}], "answers": [{"comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1428520384, "post_id": 29523308, "comment_id": 47201214, "body": "There could be a problem with endianness, (I don&#39;t know if the OP wants to <i>use</i> the 16bits values as 16 bit values)"}, {"owner": {"reputation": 138, "user_id": 2138244, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/672e718c5581f0c50cbc1ecc857bcdaf?s=128&d=identicon&r=PG", "display_name": "Qnoobish", "link": "https://stackoverflow.com/users/2138244/qnoobish"}, "edited": false, "score": 0, "creation_date": 1566914142, "post_id": 29523308, "comment_id": 101799606, "body": "How come this code: b = (a[0] &lt;&lt; 8) + a[1]; is endian independent?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 138, "user_id": 2138244, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/672e718c5581f0c50cbc1ecc857bcdaf?s=128&d=identicon&r=PG", "display_name": "Qnoobish", "link": "https://stackoverflow.com/users/2138244/qnoobish"}, "edited": false, "score": 1, "creation_date": 1566917897, "post_id": 29523308, "comment_id": 101801801, "body": "@Qnoobish, those operations have standards defined behavior, regardless of endianness."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 0, "last_activity_date": 1428520776, "last_edit_date": 1428520776, "creation_date": 1428520181, "answer_id": 29523308, "question_id": 29523206, "link": "https://stackoverflow.com/questions/29523206/how-do-i-write-an-8-bit-array-to-a-16-bit-array-of-1-2-size/29523308#29523308", "title": "How do I write an 8 bit array to a 16 bit array of 1/2 size", "body": "<blockquote>\n  <p>How can I get it to copy two consecutive 8 bit values into a 16 bit space?</p>\n</blockquote>\n\n<p>Simple example:</p>\n\n<pre><code>int8_t a[2];\nint16_t b;\nmemcpy(&amp;b, a, sizeof(a));\n</code></pre>\n\n<p>Now, you can extend that logic to your data.</p>\n\n<p><strong>Caution</strong></p>\n\n<p>If you want to treat <code>b</code> as a <code>16</code> bit integer, you have to account for the endianness of your platform. To make the code endian independent, you can use:</p>\n\n<pre><code>b = (a[0] &lt;&lt; 8) + a[1];\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 0, "last_activity_date": 1428520190, "creation_date": 1428520190, "answer_id": 29523314, "question_id": 29523206, "link": "https://stackoverflow.com/questions/29523206/how-do-i-write-an-8-bit-array-to-a-16-bit-array-of-1-2-size/29523314#29523314", "title": "How do I write an 8 bit array to a 16 bit array of 1/2 size", "body": "<p>You're overthinking this.  Given, say,</p>\n\n<pre><code>uint8_t bytes[16] = {0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0xa, 0xb, 0xc, 0xd, 0xe, 0xf};\nuint16_t shorts[8];\n</code></pre>\n\n<p>A plain memcpy will do the right thing:</p>\n\n<pre><code>memcpy(shorts, bytes, sizeof(shorts));\n</code></pre>\n\n<p>Arrays are laid out in memory as contiguous sequences of representations of their element types.</p>\n"}], "owner": {"reputation": 351, "user_id": 2905124, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/Q5HZk.jpg?s=128&g=1", "display_name": "Punchki", "link": "https://stackoverflow.com/users/2905124/punchki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3008, "favorite_count": 1, "accepted_answer_id": 29523308, "answer_count": 2, "score": 0, "last_activity_date": 1428520776, "creation_date": 1428519872, "question_id": 29523206, "link": "https://stackoverflow.com/questions/29523206/how-do-i-write-an-8-bit-array-to-a-16-bit-array-of-1-2-size", "title": "How do I write an 8 bit array to a 16 bit array of 1/2 size", "body": "<p>Hey so I'm doing some programming for GBA, and I'm running into a problem.</p>\n\n<p>I have a bitmap FILE that looks something like this:</p>\n\n<pre><code>const unsigned char bitheart_Bitmap[9216] = \n{\n    0x16, 0x16, 0x16, 0x16, 0x16, 0x16, 0x16, 0x16, 0x16, 0x16, 0x16, 0x16, 0x16, 0x16, 0x16, 0x16, \n    0x16, 0x16, 0x16, 0x16, 0x16, 0x16, 0x16, 0x16, 0x16, 0x16, 0x16, 0x16, 0x16, 0x16, 0x16, 0x16, \n    0x16, 0x16, 0x16, 0x16, 0x16, 0x16, 0x16, 0x16, 0x16, 0x16, 0x16, 0x16, 0x16, 0x16, 0x16, 0x16, \n    0x16, 0x16, 0x16, 0x16, 0x16, 0x16, 0x16, 0x16, 0x16, 0x16, 0x16, 0x16, 0x16, 0x16, 0x16, 0x16, \n    0x16, 0x16, 0x16, 0x16, 0x16, 0x16, 0x16, 0x16, 0x16, 0x16, 0x16, 0x16, 0x16, 0x16, 0x16, 0x16, \n...}\n</code></pre>\n\n<p>Ofcourse not all the values are 0x16, but you get the point.  What I am trying to do is copy these values into a memory location that holds 16 bit spaces.</p>\n\n<p>How can I write this?</p>\n\n<p>My original code was this: </p>\n\n<pre><code>for(ii=0; ii&lt;98; ii++)\n{\n    memcpy(&amp;vid_mem_front[ii*120], &amp;bitheart_Bitmap[ii*98], 98);\n}\n</code></pre>\n\n<p>But again, this only copies 8 bits into a 16 bit space right?</p>\n\n<p>How can I get it to copy two consecutive 8 bit values into a 16 bit space?</p>\n\n<p>Expected output: </p>\n\n<pre><code>0x1616, 0x1616, 0x1616, etc.\n</code></pre>\n\n<p>Let me know if this isn't very clear, I'm pretty bad at explaining my problems... Thanks! :)</p>\n\n<p>-punchki</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1428519526, "post_id": 29523080, "comment_id": 47200704, "body": "It might be possible if there is a way to compute the offset of the first parameter, which is why you need to start to count varargs from the last named parameter provided, but I don&#39;t think it&#39;s possible because you need to find out where the function parameters start."}, {"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1428519968, "post_id": 29523080, "comment_id": 47200952, "body": "i never see things like this. how do you think the parameters should be cleaned? by caller or callee? though, you indeed can get the head of the parameter list, if arch is provided."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1428520451, "post_id": 29523080, "comment_id": 47201245, "body": "In C, a declaration without parameter list is compatible with a definition with any <i>fixed</i> number of parameters, but it is explicitly not compatible with a varargs definition. In short, if you have a varargs function, you <i>must</i> declare it as a varargs function; otherwise, it is quite possible that the call will not work."}, {"owner": {"reputation": 2991, "user_id": 4394382, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ec6051aa680b77974eee192444340495?s=128&d=identicon&r=PG&f=1", "display_name": "wallek876", "link": "https://stackoverflow.com/users/4394382/wallek876"}, "reply_to_user": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1428520922, "post_id": 29523080, "comment_id": 47201507, "body": "@KeithThompson @HuStmpHrrr @rici i know this is old-style and should not be used, and a correct way is to use the functionality of <code>stdarg.h</code>, the question is just out of curiosity since i&#39;ve read in several places that empty pharenteses means unknown number of arguments."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1428521408, "post_id": 29523080, "comment_id": 47201795, "body": "@wallek876: That&#39;s not quite what empty parentheses mean. Empty parentheses in a function declaration mean that the number of arguments is not communicated to the caller (more precisely, to the compiler when processing a call), but the required number and types of arguments are determined by the definition."}], "answers": [{"comments": [{"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1428519897, "post_id": 29523180, "comment_id": 47200899, "body": "But they did ask about doing this <i>without</i> <code>stdarg.h</code>"}, {"owner": {"reputation": 1146, "user_id": 1248449, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d8cdc612a969f3cc7bb32757dce1d4f?s=128&d=identicon&r=PG", "display_name": "Diti", "link": "https://stackoverflow.com/users/1248449/diti"}, "edited": false, "score": 0, "creation_date": 1428519929, "post_id": 29523180, "comment_id": 47200921, "body": "The poster specifically asked (in the question&#39;s title) for a solution without <code>stdarg.h</code>."}, {"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1428520099, "post_id": 29523180, "comment_id": 47201028, "body": "i think this is a good enough answer, since not using <code>stdarg.h</code> doesn&#39;t prevent me from copying all these three macros from the header file to the source."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1428520326, "post_id": 29523180, "comment_id": 47201173, "body": "@HuStmpHrrr: Why on Earth would you want to do that? Just write <code>#include &lt;stdarg.h&gt;</code>. The macro definitions in the system header are non-portable; copying them just means your code will break when ported to another system, or on a later release of the same system."}, {"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1428520931, "post_id": 29523180, "comment_id": 47201512, "body": "@KeithThompson really shouldn&#39;t pick it word by word. the question itself has no portable answer, so if it&#39;s answered, the solution should be arch dependent anyway. besides, the question itself doesn&#39;t seem to make sense, why on earth i want to do something without using standard library? that&#39;s as senseless as asking <i>how can i convert int to float without using casting</i>."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1428521317, "post_id": 29523180, "comment_id": 47201735, "body": "@HuStmpHrrr: <code>int n = 42; float x = n;</code>"}], "tags": [], "owner": {"reputation": 6643, "user_id": 2032021, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/c1c31bca855c458b3f218ef6a303184d?s=128&d=identicon&r=PG", "display_name": "Dr. Debasish Jana", "link": "https://stackoverflow.com/users/2032021/dr-debasish-jana"}, "is_accepted": false, "score": -1, "last_activity_date": 1428519769, "creation_date": 1428519769, "answer_id": 29523180, "question_id": 29523080, "link": "https://stackoverflow.com/questions/29523080/access-unnamed-arguments-in-function-without-stdarg-h-in-c/29523180#29523180", "title": "Access unnamed arguments in function without stdarg.h in C", "body": "<p>Use variable list of arguments as below:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include&lt;stdarg.h&gt;\n\nvoid emptyParent(int first, ...)\n{\n    // print arguments\n    va_list ap;\n    va_start(ap, first);\n    // print first\n    int max = va_arg(ap, int);\n    int next = 0;\n    while (next != -1) {\n        next = va_arg(ap, int);\n        // print next\n    }\n    va_end(ap);\n    return 0; // something\n}\n\nint main(void)\n{\n    emptyParent(1, 2, 3, -1); // -1 marks the end of arguments\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "is_accepted": true, "score": 4, "last_activity_date": 1428520226, "creation_date": 1428520226, "answer_id": 29523330, "question_id": 29523080, "link": "https://stackoverflow.com/questions/29523080/access-unnamed-arguments-in-function-without-stdarg-h-in-c/29523330#29523330", "title": "Access unnamed arguments in function without stdarg.h in C", "body": "<p>In a function <em>definition</em>:</p>\n\n<pre><code>void func() {\n    /* ... */\n}\n</code></pre>\n\n<p>empty parentheses indicate that the function has no parameters. There is no way to access the parameters simply because there are none.</p>\n\n<p>In a function <em>declaration</em>, empty parentheses indicate that the function requires an unspecified but fixed number and type(s) of arguments. In a call, you must pass the correct number and type(s) of arguments specified by the definition; failing to do so has undefined behavior. (Each argument must match the promoted type of the corresponding parameter.) The compiler will not enforce this for you.</p>\n\n<p>In both cases, this is an <em>old-style</em> syntax that should not be used in new code. If a function has no parameters, declare and define it with <code>(void)</code>. If it has a fixed number of parameters (one or more), declare and define it with a prototype that specifies the type of each parameter, so that the compiler can enforce the correct arguments in calls (and, in some cases, can implicitly convert arguments to the appropriate type).</p>\n\n<p>If it takes a variable number of parameters, you need to use the <code>, ...</code> syntax and the <code>&lt;stdarg.h&gt;</code> mechanism to access the parameters inside the function. This mechanism requires a final named parameter to start; you cannot declare or define a function like</p>\n\n<pre><code>void this_is_invalid(...);\n</code></pre>\n\n<p>There might be ways to simulate this mechanism without using the features provided by the language, but there are no other <em>portable</em> ways to do so.</p>\n"}, {"comments": [{"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 1, "creation_date": 1428521079, "post_id": 29523529, "comment_id": 47201598, "body": "this may not work. parameters aren&#39;t necessary to be passed by stack. give a shot <a href=\"http://ideone.com/jssrXL\" rel=\"nofollow noreferrer\">ideone.com/jssrXL</a>"}, {"owner": {"reputation": 2991, "user_id": 4394382, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ec6051aa680b77974eee192444340495?s=128&d=identicon&r=PG&f=1", "display_name": "wallek876", "link": "https://stackoverflow.com/users/4394382/wallek876"}, "edited": false, "score": 0, "creation_date": 1428521600, "post_id": 29523529, "comment_id": 47201918, "body": "I tested and works in my system but you are off by two positions, args[2] is 1, args[3] would be 2 and args[4] 3"}], "tags": [], "owner": {"reputation": 1422, "user_id": 4538770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adfd2f0b91001372439c7e23c60e4c52?s=128&d=identicon&r=PG", "display_name": "Jo&#235;l Hecht", "link": "https://stackoverflow.com/users/4538770/jo%c3%abl-hecht"}, "is_accepted": false, "score": 1, "last_activity_date": 1428520871, "creation_date": 1428520871, "answer_id": 29523529, "question_id": 29523080, "link": "https://stackoverflow.com/questions/29523080/access-unnamed-arguments-in-function-without-stdarg-h-in-c/29523529#29523529", "title": "Access unnamed arguments in function without stdarg.h in C", "body": "<p>Since parameters and local variables are all allocated on the stack, and supposing the saved registers pushed on the stack for a function call are always the same, you can compute the offset between the first local variable and the first parameter in a function (here <code>computeOffset</code>) and re-use this offset in the function with the undefined number of parameters:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint offset;\n\nvoid computeOffset(int end)\n{\n    int start;\n\n    offset = &amp;end - &amp;start;\n}\n\nvoid emptyParent()\n{\n    int *args;\n\n    args = (int *)(&amp;args + offset);\n    printf(\"arg0 = %d\\n\", args[0]);\n    printf(\"arg1 = %d\\n\", args[1]);\n    printf(\"arg2 = %d\\n\", args[2]);\n}\n\nint main(void)\n{\n    computeOffset(0);\n    emptyParent(1, 2, 3);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 2991, "user_id": 4394382, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ec6051aa680b77974eee192444340495?s=128&d=identicon&r=PG&f=1", "display_name": "wallek876", "link": "https://stackoverflow.com/users/4394382/wallek876"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 528, "favorite_count": 2, "accepted_answer_id": 29523330, "answer_count": 3, "score": 2, "last_activity_date": 1428560521, "creation_date": 1428519380, "last_edit_date": 1428560521, "question_id": 29523080, "link": "https://stackoverflow.com/questions/29523080/access-unnamed-arguments-in-function-without-stdarg-h-in-c", "title": "Access unnamed arguments in function without stdarg.h in C", "body": "<p>i've always been told that when you leave a function definition with empty parentheses for the arguments, the function can accept any number of arguments or unknown number of arguments, but i never seen this being used.</p>\n\n<p>Just out of curiosity i wonder if there is a way to access the arguments passed to a function defined this way.</p>\n\n<p>Just as an example a function that prints the arguments:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid emptyParent()\n{\n    // print arguments\n}\n\nint main(void)\n{\n    emptyParent(1, 2, 3);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "gcc", "memory-alignment"], "comments": [{"owner": {"reputation": 2558, "user_id": 655436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98da4e7757d5f0e8596fd832bebee3d0?s=128&d=identicon&r=PG", "display_name": "fukanchik", "link": "https://stackoverflow.com/users/655436/fukanchik"}, "edited": false, "score": 0, "creation_date": 1428519637, "post_id": 29523052, "comment_id": 47200764, "body": "which command line do you use to compile?"}, {"owner": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "edited": false, "score": 0, "creation_date": 1428521092, "post_id": 29523052, "comment_id": 47201604, "body": "Properly aligning string literals or at least making sure that standard string functions deal with unaligned strings seems like something that should be handled with a GCC/libc port. For manually aligning individual strings, I found the following: <a href=\"https://gcc.gnu.org/ml/gcc-help/2011-10/msg00068.html\" rel=\"nofollow noreferrer\">gcc.gnu.org/ml/gcc-help/2011-10/msg00068.html</a>."}, {"owner": {"reputation": 16941, "user_id": 814803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LUo4b.png?s=128&g=1", "display_name": "OdatNurd", "link": "https://stackoverflow.com/users/814803/odatnurd"}, "reply_to_user": {"reputation": 2558, "user_id": 655436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98da4e7757d5f0e8596fd832bebee3d0?s=128&d=identicon&r=PG", "display_name": "fukanchik", "link": "https://stackoverflow.com/users/655436/fukanchik"}, "edited": false, "score": 0, "creation_date": 1428522112, "post_id": 29523052, "comment_id": 47202209, "body": "@fukanchik just a simple &quot;gcc sample.c&quot;."}, {"owner": {"reputation": 16941, "user_id": 814803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LUo4b.png?s=128&g=1", "display_name": "OdatNurd", "link": "https://stackoverflow.com/users/814803/odatnurd"}, "reply_to_user": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "edited": false, "score": 0, "creation_date": 1428522275, "post_id": 29523052, "comment_id": 47202312, "body": "@Ulfalizer I&#39;m afraid you may be right but I was hoping that something like this was possible. The fact that you have to jump through hoops to turn alignment checking on makes me worry that glibc doesn&#39;t take too many pains by default, though."}, {"owner": {"reputation": 2558, "user_id": 655436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98da4e7757d5f0e8596fd832bebee3d0?s=128&d=identicon&r=PG", "display_name": "fukanchik", "link": "https://stackoverflow.com/users/655436/fukanchik"}, "edited": false, "score": 0, "creation_date": 1428523256, "post_id": 29523052, "comment_id": 47202927, "body": "gcc should automatically apply platform required alignment. try compiling with gcc -S sample.c. This will produce assembly output which might give some clues."}, {"owner": {"reputation": 16941, "user_id": 814803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LUo4b.png?s=128&g=1", "display_name": "OdatNurd", "link": "https://stackoverflow.com/users/814803/odatnurd"}, "reply_to_user": {"reputation": 2558, "user_id": 655436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98da4e7757d5f0e8596fd832bebee3d0?s=128&d=identicon&r=PG", "display_name": "fukanchik", "link": "https://stackoverflow.com/users/655436/fukanchik"}, "edited": false, "score": 0, "creation_date": 1428528435, "post_id": 29523052, "comment_id": 47205634, "body": "@fukanchik it doesn&#39;t show anything special happening, which makes sense I guess since x86 doesn&#39;t have any specific alignment requirements. Looks like the better way to go might be to just to make my own small subset of the libc that&#39;s more compliant."}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1428529970, "post_id": 29523052, "comment_id": 47206398, "body": "Are you running a compiler/using a libc that is actually ported to this odd architecture that doesn&#39;t seem to follow normal x86 alignment requirements ?"}, {"owner": {"reputation": 16941, "user_id": 814803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LUo4b.png?s=128&g=1", "display_name": "OdatNurd", "link": "https://stackoverflow.com/users/814803/odatnurd"}, "reply_to_user": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1428531487, "post_id": 29523052, "comment_id": 47207088, "body": "@nos I assume so since this is just a vanilla Slackware Linux machine, and that&#39;s what falls out of gcc."}], "answers": [{"tags": [], "owner": {"reputation": 16941, "user_id": 814803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LUo4b.png?s=128&g=1", "display_name": "OdatNurd", "link": "https://stackoverflow.com/users/814803/odatnurd"}, "is_accepted": true, "score": 1, "last_activity_date": 1429043699, "last_edit_date": 1429043699, "creation_date": 1429033144, "answer_id": 29633956, "question_id": 29523052, "link": "https://stackoverflow.com/questions/29523052/is-it-possible-to-force-gcc-to-pad-string-constants-in-rodata/29633956#29633956", "title": "Is it possible to force GCC to pad string constants in .rodata", "body": "<p>There does not seem to be any way to accomplish this, at least with GCC. Testing seems to indicate that although the compiler will align integers, doubles and so on,because string constants are made of characters and alignment for character data is on byte boundaries, the compiler feels no need to align them.</p>\n\n<p>The particulars of this bus error seem to indicate that glibc uses optimized routines that copy data words at a time without checking for alignment first (having not looked at the source, I don't know if this is true or not however).</p>\n\n<p>This led me to investigating <a href=\"http://www.musl-libc.org/\" rel=\"nofollow\">musl</a>, an alternative libc implementation that is simple to install and use on a project by project basis.The C source code of the musl version of strcat takes care to copy unaligned bytes before copying words at a time, and thus this particular issue goes away, although naturally others remain.</p>\n"}], "owner": {"reputation": 16941, "user_id": 814803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LUo4b.png?s=128&g=1", "display_name": "OdatNurd", "link": "https://stackoverflow.com/users/814803/odatnurd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1096, "favorite_count": 0, "accepted_answer_id": 29633956, "answer_count": 1, "score": 2, "last_activity_date": 1429043699, "creation_date": 1428519283, "last_edit_date": 1428528291, "question_id": 29523052, "link": "https://stackoverflow.com/questions/29523052/is-it-possible-to-force-gcc-to-pad-string-constants-in-rodata", "title": "Is it possible to force GCC to pad string constants in .rodata", "body": "<p>I'm working on porting some code to an environment with more strict alignment requirements than x86 has, but I'm changing/testing on an x86 Linux machine for the time being due to this being easier for hardware access reasons, among other things.</p>\n\n<p>I've distilled the first problem that I've run into into the following   concise example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n#define BUFFER_SIZE 1024\n#define DMQUOTE_LOG \"DMQUOTELOG\"\n\nvoid aFunction (const char *configPath)\n{\n    char LogFilename[BUFFER_SIZE] __attribute ((aligned));\n\n//     printf (\"A\\n\");\n    strcpy (LogFilename, configPath);\n    strcat (LogFilename, DMQUOTE_LOG);\n\n    printf (\"Log: %s\\n\", LogFilename);\n}\n\nint main (int argc, char **argv)\n{\n    __asm__(\"pushf\\n\"  \n            \"orl $0x40000, (%esp)\\n\"  \n            \"popf\");  \n\n    aFunction (\"\");\n\n    return 0;\n}\n</code></pre>\n\n<p>Running this code as is provides the expected output. However, uncommenting the other printf causes a bus error to trigger on the strcat line.</p>\n\n<p>It looks to me as if the reason for this is that by introducing a second string constant, the constant from the define is shifted so that it's not aligned. This is upheld by noticing that if the string constant is changed from \"A\\n\" to \"AAA\\n\", everything works again (and magically gcc replaces the call to printf with a call to puts and drops the \\n from the constant).</p>\n\n<p>Is there some nice way to make gcc insert extra padding between all of the string constants that it's inserting into the .rodata section so that things align properly? </p>\n\n<p>[EDIT]  </p>\n\n<p>As mentioned by fucanchik below, here's what the .rodata section of the above is (with the extra printf enabled):</p>\n\n<pre><code>    .file   \"sample.c\"\n    .section    .rodata\n.LC0:\n    .string \"A\"\n.LC1:\n    .string \"DMQUOTELOG\"\n.LC2:\n    .string \"Log: %s\\n\"\n    .text\n.globl aFunction\n...\n</code></pre>\n\n<p>There is no alignment forced, which makes sense because I'm compiling under x86, which doesn't strictly require it. Naturally, modifying the assembler to this has the desired effect. However, I can't see a way to get gcc to apply this on its own on the fly. This may of course be moot if glibc itself can't handle being run in this mode in the general case, though.</p>\n\n<pre><code>    .file   \"sample.c\"\n    .section    .rodata\n.LC0:\n    .string \"A\"\n    .align 4,0\n.LC1:\n    .string \"DMQUOTELOG\"\n.LC2:\n    .string \"Log: %s\\n\"\n    .text\n.globl aFunction\n...\n</code></pre>\n"}, {"tags": ["c", "sockets", "network-programming"], "comments": [{"owner": {"reputation": 1570, "user_id": 2501921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba89206691a9b80f87abe01cebe4660c?s=128&d=identicon&r=PG", "display_name": "cmidi", "link": "https://stackoverflow.com/users/2501921/cmidi"}, "edited": false, "score": 0, "creation_date": 1428522099, "post_id": 29523027, "comment_id": 47202198, "body": "you should post your client code specifically the sendto logic also add 1. bind the sockets on the servers to the addresses you are sending from the client 2. have timeout in select or else it will block forever"}, {"owner": {"reputation": 19, "user_id": 1735819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/541051870f7873388172804e7ee505cf?s=128&d=identicon&r=PG", "display_name": "Kunal Waghmare", "link": "https://stackoverflow.com/users/1735819/kunal-waghmare"}, "reply_to_user": {"reputation": 1570, "user_id": 2501921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba89206691a9b80f87abe01cebe4660c?s=128&d=identicon&r=PG", "display_name": "cmidi", "link": "https://stackoverflow.com/users/2501921/cmidi"}, "edited": false, "score": 0, "creation_date": 1428638621, "post_id": 29523027, "comment_id": 47257363, "body": "Is there need to write bind, if we are using sendto and recvfrom? Off course if timeout mentioned it will pass the select statement but this is not what i required."}, {"owner": {"reputation": 1570, "user_id": 2501921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba89206691a9b80f87abe01cebe4660c?s=128&d=identicon&r=PG", "display_name": "cmidi", "link": "https://stackoverflow.com/users/2501921/cmidi"}, "edited": false, "score": 0, "creation_date": 1428806907, "post_id": 29523027, "comment_id": 47319020, "body": "You need to bind to the address you are sending to using sendto or maybe you can atleast bind to the interface where you are expecting your packet"}], "owner": {"reputation": 19, "user_id": 1735819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/541051870f7873388172804e7ee505cf?s=128&d=identicon&r=PG", "display_name": "Kunal Waghmare", "link": "https://stackoverflow.com/users/1735819/kunal-waghmare"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 248, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1428638501, "creation_date": 1428519215, "last_edit_date": 1428638501, "question_id": 29523027, "link": "https://stackoverflow.com/questions/29523027/raw-socket-select-event-not-occuring", "title": "Raw Socket Select Event Not occuring", "body": "<p>I have sent message from client side and it sent successfully using sendto. But on server side I have created multiple raw sockets, to monitor event on them, used select. But event on rfds not getting noticed by select. Why so? It remains blocked on select system call.</p>\n\n<pre><code>   void main()\n    {\n        int readSet[2],i;\n        struct sockaddr_in source;\n        socklen_t client_addr_size;\n\n        //Creating Socket\n        readSet[0]=socket(AF_INET,SOCK_RAW,221);\n        readSet[1]=socket(AF_INET,SOCK_RAW,222);\n\n\n        fd_set rfds;\n        struct timeval tv;\n\n\n        if(readSet[0]==-1 || readSet[1]==-1)\n        {\n            perror(\"\\nSocket:\");\n            exit(0);\n        }\n\n        printf(\"\\nSocket Created\\n\");\n\n        memset(&amp;source, 0, sizeof(struct sockaddr_in));\n        source.sin_family=AF_INET;\n        source.sin_addr.s_addr=inet_addr(\"127.0.0.1\");\n\n         FD_ZERO(&amp;rfds);\n        while(1)\n        {\n\n            for(i=0; i&lt;2; i++)\n                FD_SET(readSet[i],&amp;rfds);\n\n            printf(\"\\nBefore select\\n\");\n            int ret = select(readSet[1]+1, &amp;rfds, NULL, NULL, NULL);\n\n            printf(\"\\nRetval:%d\\n\",ret);\n            if(ret&gt;0)\n            {\n                for(i=0; i&lt;2; i++)\n                {\n                    if(FD_ISSET(readSet[i],&amp;rfds))\n                    {\n                        char buff[4096];\n                        int ds=0;\n                        if( (ds=recvfrom(readSet[i], buff, 4096, 0, (struct sockaddr *)&amp;source, &amp;client_addr_size)) &lt;0 )\n                            perror(\"Error in recv: \\n\");\n\n                        printf(\"\\nData Receved successfully...%d\\n\",ds);\n\n                        printIPHeader((unsigned char *)buff);\n                        break;\n                    }\n\n                }//For loop\n            }\n        }\n\n        sleep(1);\n    }\n\n\n //Client siode code\nvoid main()\n{\n    int rsfd1=0,rsfd2;\n\n    struct sockaddr_in dest_addr;\n    socklen_t client_addr_size;\n\n    //Creating Socket \n    rsfd1=socket(AF_INET,SOCK_RAW,221);\n    rsfd2=socket(AF_INET,SOCK_RAW,221);\n\n    if(rsfd1==-1 || rsfd2==-1)\n    {\n        perror(\"\\nSocket:\");\n        exit(0);\n    }\n\n    printf(\"\\nSocket Created: \\n\"); \n\n    const int val = 1;\n    if(setsockopt(rsfd1, IPPROTO_IP, IP_HDRINCL, &amp;val, sizeof(val)) &lt; 0)\n    {\n        perror(\"\\nsetsockopt() error:\");\n        exit(-1);\n    }\n\n    if(setsockopt(rsfd2, IPPROTO_IP, IP_HDRINCL, &amp;val, sizeof(val)) &lt; 0)\n    {\n        perror(\"\\nsetsockopt() error:\");\n        exit(-1);\n    }\n\n   //Constructing IP Header\n    char buffer[4096];\n    memset(&amp;buffer,0,sizeof(buffer));\n    char *msg=\"Hey there, how are you\";\n    // Our own headers' structures\n    struct iphdr *iph= (struct iphdr *) buffer;\n\n    iph-&gt;version=4;\n    iph-&gt;ihl=5;\n    iph-&gt;tos=16;\n    iph-&gt;tot_len=htons(sizeof(iph)+sizeof(msg));\n    iph-&gt;id=0;\n    iph-&gt;ttl=255;    //Number of hops\n    iph-&gt;protocol=253;\n    iph-&gt;saddr=inet_addr(\"127.0.0.1\");\n    iph-&gt;daddr=inet_addr(\"127.0.0.1\");\n\n    int iphdrlen =iph-&gt;ihl*4;\n    strcat(buffer+iphdrlen,msg);\n    //End\n\n    memset(&amp;dest_addr, 0, sizeof(struct sockaddr_in));\n    dest_addr.sin_family=AF_INET;\n    dest_addr.sin_addr.s_addr=inet_addr(\"127.0.0.1\");\n\n\n    printf(\"\\nCustom IP Header to sent...\\n\");\n    printIPHeader((unsigned char *)buffer);\n    int n=0;\n\n    if( (n=sendto(rsfd1,buffer,23,0,(struct sockaddr *)&amp;dest_addr,sizeof(dest_addr))) &lt;0 )\n        perror(\"Sendto error: \");\n\n\n    char * msg1=\"I am fine\\0\";\n\n    strcat(buffer+iphdrlen,msg1);\n\n    //if( (n=sendto(rsfd2,buffer,23,0,(struct sockaddr *)&amp;dest_addr,sizeof(dest_addr))) &lt;0 )\n        //perror(\"Sendto error: \");\n\n\n    printf(\"\\nData Sent Succefully:%d\\n\",n);\n\n}\n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1428518905, "post_id": 29522897, "comment_id": 47200350, "body": "Why <code>string[count]&lt;2</code>? And <code>scanf  (&quot;%d\\n&quot;);</code> where are you going to store the value? <b>Do I need to use some more advanced function or can it be done with if statements, for loops, arrays, and random function?</b>, yes everything can be done with that. You are too lost for it to be possible to help you."}, {"owner": {"reputation": 115, "user_id": 4493153, "user_type": "registered", "accept_rate": 47, "profile_image": "https://graph.facebook.com/29715292/picture?type=large", "display_name": "Raphael Jones", "link": "https://stackoverflow.com/users/4493153/raphael-jones"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1428520243, "post_id": 29522897, "comment_id": 47201119, "body": "I was just trying to look for a way that the program can record how many questions were asked. I said &lt;2 so it would ask 0,1 and 2. Finally I wanted to calculate the percentage answered correctly."}], "owner": {"reputation": 115, "user_id": 4493153, "user_type": "registered", "accept_rate": 47, "profile_image": "https://graph.facebook.com/29715292/picture?type=large", "display_name": "Raphael Jones", "link": "https://stackoverflow.com/users/4493153/raphael-jones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 636, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1428520766, "creation_date": 1428518789, "question_id": 29522897, "link": "https://stackoverflow.com/questions/29522897/can-i-use-arrays-to-make-multiple-choice-quiz", "title": "Can I use arrays to make multiple choice quiz?", "body": "<p>I'm a beginner at C program.\nAs a teacher if you want to make a program to generate random Multiple Choice questions for your students to practice:\nCan I use random function for arrays? To generate questions.\nCan I use a 2nd array to give \"a\",\"b\",\"c\" answers referring to the question array?\nDo I need to use some more advanced function or can it be done with if statements, for loops, arrays, and random function?</p>\n\n<p>The code I inserted is far from correct or the way to program my Multiple Choice Quiz. However I hope it illustrates what I am trying to achieve with my C program.</p>\n\n<p>Any help I would really appreciate. Thanks</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main (void){\n\n    int ans;\n    int count;\n    const char*string[]={\"What's your name?\",\"How old are you\",\"Where are you from\"};\n\n\n\n    for (count=0; string[count]&lt;2;count++){\n        printf (\"%s\\n\",rand(string[]));\n        printf (\"Answer : \\n\");\n        scanf  (\"%d\\n\");\n        }\n\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "optimization"], "comments": [{"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 2, "creation_date": 1428518516, "post_id": 29522741, "comment_id": 47200085, "body": "You should try timing it yourself. Having said that it might be quicker to pass a pointer to the <code>struct</code> i.e. <code>void Bar(Foo* MyFoo)</code>."}, {"owner": {"reputation": 454, "user_id": 4525932, "user_type": "registered", "accept_rate": 15, "profile_image": "https://lh4.googleusercontent.com/-2dHCJYSOCSE/AAAAAAAAAAI/AAAAAAAAABo/pZ1mLVANuzc/photo.jpg?sz=128", "display_name": "dmedine", "link": "https://stackoverflow.com/users/4525932/dmedine"}, "edited": false, "score": 0, "creation_date": 1428518555, "post_id": 29522741, "comment_id": 47200108, "body": "Definitely pass a pointer to the struct."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 1, "creation_date": 1428524551, "post_id": 29522741, "comment_id": 47203643, "body": "@Paul Rooney A weakness to using <code>void Bar(Foo* MyFoo)</code> is that the the top level <code>MyFoo</code> can get altered by <code>Bar()</code>.  Better to use <code>void Bar(const Foo* MyFoo)</code> for comparable functionality to <code>void Bar(Foo MyFoo)</code> and <code>void Bar(int A, int B)</code>.  OTOH, doubt using <code>const</code> will affect timing."}, {"owner": {"reputation": 4535, "user_id": 3478852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vzDyD.jpg?s=128&g=1", "display_name": "Nisse Engstr&#246;m", "link": "https://stackoverflow.com/users/3478852/nisse-engstr%c3%b6m"}, "edited": false, "score": 0, "creation_date": 1428525468, "post_id": 29522741, "comment_id": 47204112, "body": "The answer will depend on the hardware, OS, compiler, optimization level, how the function is defined, the size of the function, how it is called, the size of the arguments compared to the size of hardware registers, and so on and so forth."}], "answers": [{"tags": [], "owner": {"reputation": 1754, "user_id": 4449640, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-me4y5aVPCrY/AAAAAAAAAAI/AAAAAAAAABI/0dkBJMaB1IE/photo.jpg?sz=128", "display_name": "Kyle Williamson", "link": "https://stackoverflow.com/users/4449640/kyle-williamson"}, "is_accepted": false, "score": 1, "last_activity_date": 1428518571, "creation_date": 1428518571, "answer_id": 29522844, "question_id": 29522741, "link": "https://stackoverflow.com/questions/29522741/is-it-faster-to-pass-a-struct-or-its-members-individually/29522844#29522844", "title": "Is it faster to pass a struct or its members individually?", "body": "<p>In this case, they are the same.</p>\n\n<p>The more parameters you pass in a fuction, the more expensive the call will be.  This is due to multiple pushes on the stack on each call.  Passing complete structures will be the same as passing each individual part of a struct.  You should use pointers and references in such cases.</p>\n\n<p>As paul stated, use <code>void Bar(Foo* MyFoo)</code></p>\n"}, {"tags": [], "owner": {"reputation": 97, "user_id": 4757418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/122480a2abfb1b7de533aba69968c1ad?s=128&d=identicon&r=PG&f=1", "display_name": "please delete me", "link": "https://stackoverflow.com/users/4757418/please-delete-me"}, "is_accepted": false, "score": -2, "last_activity_date": 1428518641, "creation_date": 1428518641, "answer_id": 29522867, "question_id": 29522741, "link": "https://stackoverflow.com/questions/29522741/is-it-faster-to-pass-a-struct-or-its-members-individually/29522867#29522867", "title": "Is it faster to pass a struct or its members individually?", "body": "<p>Spend a memory address (by reference) is better than spending the values (by values).</p>\n"}, {"tags": [], "owner": {"reputation": 155, "user_id": 4765567, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Mw5eKkatU2Q/AAAAAAAAAAI/AAAAAAAAAGA/evVjOm1_v3M/photo.jpg?sz=128", "display_name": "Kent Dahl", "link": "https://stackoverflow.com/users/4765567/kent-dahl"}, "is_accepted": true, "score": 6, "last_activity_date": 1428521193, "creation_date": 1428521193, "answer_id": 29523624, "question_id": 29522741, "link": "https://stackoverflow.com/questions/29522741/is-it-faster-to-pass-a-struct-or-its-members-individually/29523624#29523624", "title": "Is it faster to pass a struct or its members individually?", "body": "<p>This can actually be platform and compiler dependent. Especially when the sizeof(Foo) is small.</p>\n\n<p>If the ints are 16 bit, only one stack push of 32 bits is needed, which is less than a pointer on 64 bits architectures, but on those ints are often more than 16 bits. </p>\n\n<p>As separate arguments, each will be a separate push to the stack, unless the compiler does something clever,... Which it frequently does. This struct could likely be handled as a single push to the stack on most modern platforms. </p>\n\n<p>When you get into more interesting structs that are still small, such as containing single chars or bit fields, passing the struct can be faster, even when passed by value. </p>\n\n<p>But these are insignificant differences unless you're working on a platform closer to an old calculator than a cheap modern phone. </p>\n\n<p>Chiming in with the rest; pass by reference is generally the fastest, but measurement or inspecting the generated assembly is the only way to be sure for the platform at hand. </p>\n\n<p>Side note: If you cross into C++ land, things can get a bit more complicated, but there you should rather pass the struct as a const reference, which is basically a pointer, but gives the computer even more chances to be clever. </p>\n"}], "owner": {"reputation": 71, "user_id": 4714172, "user_type": "registered", "profile_image": "https://graph.facebook.com/463019390517482/picture?type=large", "display_name": "Sasha Krassovsky", "link": "https://stackoverflow.com/users/4714172/sasha-krassovsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 29523624, "answer_count": 3, "score": 1, "last_activity_date": 1428521193, "creation_date": 1428518212, "question_id": 29522741, "link": "https://stackoverflow.com/questions/29522741/is-it-faster-to-pass-a-struct-or-its-members-individually", "title": "Is it faster to pass a struct or its members individually?", "body": "<p>If I have a </p>\n\n<pre><code>struct Foo\n{\n    int A;\n    int B;\n};\n</code></pre>\n\n<p>Which method call is faster?</p>\n\n<pre><code>void Bar(Foo MyFoo)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>void Bar(int A, int B)\n</code></pre>\n\n<p>?</p>\n\n<p>Or are they the same?</p>\n"}, {"tags": ["c++", "c", "string"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 1, "creation_date": 1428518039, "post_id": 29522621, "comment_id": 47199812, "body": "It is an array of pointers (each points to an char array of it&#39;s own length) and make it <code>const char *messages[NUM_THREADS];</code>"}, {"owner": {"reputation": 13757, "user_id": 1270003, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d5ed9123b92a6e4dffa75f9f6dd9e382?s=128&d=identicon&r=PG&f=1", "display_name": "texasbruce", "link": "https://stackoverflow.com/users/1270003/texasbruce"}, "edited": false, "score": 0, "creation_date": 1428520047, "post_id": 29522621, "comment_id": 47200995, "body": "This is illegal for ISO standard, although gcc and clang allow it without error."}, {"owner": {"reputation": 317, "user_id": 3740387, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/569d27732cfc28ce3dd092fe30d2e900?s=128&d=identicon&r=PG&f=1", "display_name": "user3740387", "link": "https://stackoverflow.com/users/3740387/user3740387"}, "edited": false, "score": 0, "creation_date": 1428520710, "post_id": 29522621, "comment_id": 47201394, "body": "What is it that&#39;s illegal? Also could you pl go through my comments in Blindy&#39;s answer and answer them? I&#39;m interested in knowing the entire mechanism as to how and in which segment the string is stored and accessed. In addition why does a certain way work with compile time strings but doesn&#39;t work with input entered at runtime. Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 3, "creation_date": 1428518192, "post_id": 29522677, "comment_id": 47199904, "body": "&quot;This is C.&quot;  Awesome."}, {"owner": {"reputation": 317, "user_id": 3740387, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/569d27732cfc28ce3dd092fe30d2e900?s=128&d=identicon&r=PG&f=1", "display_name": "user3740387", "link": "https://stackoverflow.com/users/3740387/user3740387"}, "edited": false, "score": 0, "creation_date": 1428520002, "post_id": 29522677, "comment_id": 47200970, "body": "Am I right in assuming that the strings reside in the data segment and the same works for cin&gt;&gt;messages[i] i.e. the string goes into the data segment even at runtime?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1428520093, "post_id": 29522677, "comment_id": 47201026, "body": "<code>cin&gt;&gt;messages[i]</code> is undefined behavior."}, {"owner": {"reputation": 317, "user_id": 3740387, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/569d27732cfc28ce3dd092fe30d2e900?s=128&d=identicon&r=PG&f=1", "display_name": "user3740387", "link": "https://stackoverflow.com/users/3740387/user3740387"}, "edited": false, "score": 0, "creation_date": 1428520382, "post_id": 29522677, "comment_id": 47201211, "body": "Oh, thanks for pointing that out to me. I wrote that on Xcode and it didn&#39;t give any compilation error. But it faulted on running. Could you please explain as to why this is so? Why doesn&#39;t the same mechanism work even for runtime input. This actually was my primary question."}, {"owner": {"reputation": 317, "user_id": 3740387, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/569d27732cfc28ce3dd092fe30d2e900?s=128&d=identicon&r=PG&f=1", "display_name": "user3740387", "link": "https://stackoverflow.com/users/3740387/user3740387"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1428521090, "post_id": 29522677, "comment_id": 47201603, "body": "@drescherjm From the link you recently posted(<a href=\"http://stackoverflow.com/questions/1614723/why-is-this-string-reversal-c-code-causing-a-segmentation-fault/1614739#1614739\" title=\"why is this string reversal c code causing a segmentation fault\">stackoverflow.com/questions/1614723/&hellip;</a>), I understand that the data segment I was referring to is read-only and can&#39;t be written to at runtime. So why does the data segment exist at all? Just to hold strings literals declared at runtime and save space in stack and some time during execution(stack writing/loading)?"}, {"owner": {"reputation": 54437, "user_id": 108796, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/1yySS.jpg?s=128&g=1", "display_name": "Blindy", "link": "https://stackoverflow.com/users/108796/blindy"}, "edited": false, "score": 0, "creation_date": 1428528740, "post_id": 29522677, "comment_id": 47205807, "body": "The read only data segment as you call it isn&#39;t the opposite of the stack. It could be held literally anywhere in RAM. It&#39;s actually a code segment, your executable is memory mapped when loaded and since the strings are assembled as is you can just use the address right away. Also it&#39;s not &quot;runtime&quot;, the runtime has no write access to these pages (hence the crash in any protected OS)."}], "tags": [], "owner": {"reputation": 54437, "user_id": 108796, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/1yySS.jpg?s=128&g=1", "display_name": "Blindy", "link": "https://stackoverflow.com/users/108796/blindy"}, "is_accepted": false, "score": 4, "last_activity_date": 1428518017, "creation_date": 1428518017, "answer_id": 29522677, "question_id": 29522621, "link": "https://stackoverflow.com/questions/29522621/how-is-space-allocated-char-arrays/29522677#29522677", "title": "How is space allocated char* arrays?", "body": "<p>The memory used by those strings is exactly as long as the string length plus one (the terminating null character). The array you defined has <code>4*NUM_THREADS</code> bytes (assuming your vanilla variety of 32-bit C compiler) since it only holds pointers, not copies of the entire strings.</p>\n\n<p>There's no rounding, no guessing, no fuzzing of data. This is C.</p>\n"}], "owner": {"reputation": 317, "user_id": 3740387, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/569d27732cfc28ce3dd092fe30d2e900?s=128&d=identicon&r=PG&f=1", "display_name": "user3740387", "link": "https://stackoverflow.com/users/3740387/user3740387"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1428518017, "creation_date": 1428517854, "question_id": 29522621, "link": "https://stackoverflow.com/questions/29522621/how-is-space-allocated-char-arrays", "title": "How is space allocated char* arrays?", "body": "<p>For example, in</p>\n\n<pre><code>#define NUM_THREADS 8\nchar *messages[NUM_THREADS];\nmessages[0] = \"English: Hello World!\";\nmessages[1] = \"French: Bonjour, le monde!\";\nmessages[2] = \"Spanish: Hola al mundo\";\nmessages[3] = \"Klingon: Nuq neH!\";\nmessages[4] = \"German: Guten Tag, Welt!\"; \nmessages[5] = \"Russian: Zdravstvytye, mir!\";\nmessages[6] = \"Japan: Sekai e konnichiwa!\";\nmessages[7] = \"Latin: Orbis, te saluto!\";\n</code></pre>\n\n<p>During compile time, does the compiler calculate the maximum length of all those strings and then reserve space = NUM_THREADS * ( max_len + 1 ). Added 1 for the null byte at the end of strings. Or is different amount of space allocated for each of those strings depending on their length rounded up to the nearest word?</p>\n\n<p>However, this can't always be possible since the initialization need not necessarily happen at compile time. I'm assuming a pointer to the data section where the strings will be stored is held with messages[i].</p>\n"}, {"tags": ["c", "ansi-c"], "comments": [{"owner": {"reputation": 1368, "user_id": 3878405, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cd7fbf1b3f55fad1bb62300c97593fe5?s=128&d=identicon&r=PG&f=1", "display_name": "Poriferous", "link": "https://stackoverflow.com/users/3878405/poriferous"}, "edited": false, "score": 0, "creation_date": 1428517634, "post_id": 29522408, "comment_id": 47199545, "body": "It&#39;s an implicit type conversion from bool to an integer. You see, u will always be positive and may be greater than Vdc. U ends up being equal to Vdc * (1 (true) - 0)). Effectively, it&#39;s a longhand version of u = Vdc."}, {"owner": {"reputation": 434, "user_id": 3703709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7935f2798b555f61085fd5827c9095?s=128&d=identicon&r=PG&f=1", "display_name": "mstbaum", "link": "https://stackoverflow.com/users/3703709/mstbaum"}, "reply_to_user": {"reputation": 1368, "user_id": 3878405, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cd7fbf1b3f55fad1bb62300c97593fe5?s=128&d=identicon&r=PG&f=1", "display_name": "Poriferous", "link": "https://stackoverflow.com/users/3878405/poriferous"}, "edited": false, "score": 0, "creation_date": 1428517760, "post_id": 29522408, "comment_id": 47199623, "body": "@Poriferous that is not true.  u can be negative (assuming it is declared as a signed int)."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1428519858, "post_id": 29522408, "comment_id": 47200875, "body": "Certainly <code>u</code> better be an <code>int</code> or narrower signed integer, else <code>abs(u)</code>, which returns an <code>int</code>, is a problem.  <code>u == INT_MIN</code> is a problem. Code using <code>if (u &gt; Vdc) u == Vdc else if (u &lt; -Vdc) u = -Vdc;</code> would be clearer - <i>maybe</i> not as fast."}, {"owner": {"reputation": 1368, "user_id": 3878405, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cd7fbf1b3f55fad1bb62300c97593fe5?s=128&d=identicon&r=PG&f=1", "display_name": "Poriferous", "link": "https://stackoverflow.com/users/3878405/poriferous"}, "edited": false, "score": 0, "creation_date": 1428536257, "post_id": 29522408, "comment_id": 47208613, "body": "abs(u) means u will ALWAYS be positive; it&#39;s the absolute value. The if statement is therefore always true. Because u is always greater than 0 (always positive) it will always be 1 as a result. However this is not the case with u &lt; 0, therefore that part of the statement is 0. 1 - 0 = 1; therefore u = Vdc * 1, and is therefore the entire code is equivalent to u = Vdc. Whether the integer is signed or not is irrelevant; it&#39;s always positive."}], "answers": [{"tags": [], "owner": {"reputation": 2643, "user_id": 2444293, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/12e2df5d1a7f43ca9123592dbf8f9f99?s=128&d=identicon&r=PG", "display_name": "VHarisop", "link": "https://stackoverflow.com/users/2444293/vharisop"}, "is_accepted": false, "score": 5, "last_activity_date": 1428517449, "creation_date": 1428517449, "answer_id": 29522479, "question_id": 29522408, "link": "https://stackoverflow.com/questions/29522408/what-is-this-code-block-doing-u-0-u-0/29522479#29522479", "title": "What is this code block doing ? (u &gt; 0) - (u &lt; 0)", "body": "<p>The expression in parentheses is the sign function.\nIf <code>u &gt; 0</code> holds, the expression becomes</p>\n\n<pre><code>(u &gt; 0) - (u &lt; 0) -&gt; 1 - 0 -&gt; 1\n</code></pre>\n\n<p>because the first condition is true and the second is false.\nSame for the <code>u &lt; 0</code> case.</p>\n"}, {"comments": [{"owner": {"reputation": 434, "user_id": 3703709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7935f2798b555f61085fd5827c9095?s=128&d=identicon&r=PG&f=1", "display_name": "mstbaum", "link": "https://stackoverflow.com/users/3703709/mstbaum"}, "edited": false, "score": 1, "creation_date": 1428518064, "post_id": 29522540, "comment_id": 47199829, "body": "The caveat worth noting is that <code>Vdc</code> would have to be positive for this to be true. If <code>Vdc</code> were negative, <code>u</code> would fall in the set of all real numbers."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 434, "user_id": 3703709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7935f2798b555f61085fd5827c9095?s=128&d=identicon&r=PG&f=1", "display_name": "mstbaum", "link": "https://stackoverflow.com/users/3703709/mstbaum"}, "edited": false, "score": 0, "creation_date": 1428518666, "post_id": 29522540, "comment_id": 47200176, "body": "@mstbaum Thanks, added the note."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1428519416, "post_id": 29522540, "comment_id": 47200634, "body": "Note that clamping may not occur if <code>u == INT_MIN</code> due to <code>abs(u)</code> may return a negative value."}, {"owner": {"reputation": 434, "user_id": 3703709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7935f2798b555f61085fd5827c9095?s=128&d=identicon&r=PG&f=1", "display_name": "mstbaum", "link": "https://stackoverflow.com/users/3703709/mstbaum"}, "edited": false, "score": 0, "creation_date": 1428519455, "post_id": 29522540, "comment_id": 47200659, "body": "and actually I would like to amend my comment. If <code>Vdc</code> were negative, then <code>u</code> could only equal +/-<code>Vdc</code> after this snippet"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 434, "user_id": 3703709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7935f2798b555f61085fd5827c9095?s=128&d=identicon&r=PG&f=1", "display_name": "mstbaum", "link": "https://stackoverflow.com/users/3703709/mstbaum"}, "edited": false, "score": 0, "creation_date": 1428519531, "post_id": 29522540, "comment_id": 47200707, "body": "@mstbaum It is still valid comment, since the code is obviously not designed for such a scenario"}, {"owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1428526362, "post_id": 29522540, "comment_id": 47204601, "body": "@chux: That&#39;s UB, not a negative value. GCC optimizes <code>if(abs(x) &lt; 0)</code> to <code>if(0)</code>, for example."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "edited": false, "score": 0, "creation_date": 1428527254, "post_id": 29522540, "comment_id": 47205064, "body": "@mafso True that <code>int(INT_MIN)</code> could be undefined behavior C11 7.22.6.1 2.  A common undefined behavior result is that <code>int(INT_MIN)</code> returns <code>INT_MIN</code> : a negative value.  IAC, <code>abs(INT_MIN)</code> is a problem."}, {"owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1428527706, "post_id": 29522540, "comment_id": 47205268, "body": "@chux: As illustrated with <code>if(abs(x) &lt; 0)</code>, Gcc makes use of that UB and assumes <code>INT_MIN</code> is never passed to <code>abs</code> (tested with 4.7.2 and 4.9.2). Though I&#39;m not sure if I got what you&#39;re saying; what is &quot;IAC&quot;?"}], "tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": true, "score": 7, "last_activity_date": 1428518650, "last_edit_date": 1428518650, "creation_date": 1428517634, "answer_id": 29522540, "question_id": 29522408, "link": "https://stackoverflow.com/questions/29522408/what-is-this-code-block-doing-u-0-u-0/29522540#29522540", "title": "What is this code block doing ? (u &gt; 0) - (u &lt; 0)", "body": "<p>If <code>u &gt; 0</code> the statement will become <code>1 - 0</code> (true - false) = <code>1</code>. If <code>u &lt; 0</code> it will become <code>-1</code>. If it is zero, it will become <code>0</code> as well. So basically it is returning the \"sign\" of <code>u</code> (or more precisely <code>1</code> with corresponding sign). The overall code snippet is for clamping <code>u</code> between <code>+Vdc</code> and <code>-Vdc</code>. (As suggested, it will work only for positive <code>Vdc</code>).</p>\n"}, {"tags": [], "owner": {"reputation": 1228, "user_id": 995959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXPWG.png?s=128&g=1", "display_name": "gibertoni", "link": "https://stackoverflow.com/users/995959/gibertoni"}, "is_accepted": false, "score": 2, "last_activity_date": 1428517836, "creation_date": 1428517836, "answer_id": 29522611, "question_id": 29522408, "link": "https://stackoverflow.com/questions/29522408/what-is-this-code-block-doing-u-0-u-0/29522611#29522611", "title": "What is this code block doing ? (u &gt; 0) - (u &lt; 0)", "body": "<p>This is a technique to model the function</p>\n\n<pre><code>    |0,  if u = 0\n f= |1,  if u &gt; 0\n    |-1, if u &lt; 0\n</code></pre>\n\n<p>It avoids using an if clause to do this comparison, and evaluates like so</p>\n\n<pre><code>//For positive values of u \n(u&gt;0) - (u&lt;0) = 1 - 0 = 1\n//For negative values of u\n(u&gt;0) - (u&lt;0) = 0 - 1 = -1\n//For u = 0\n(u&gt;0) - (u&lt;0) = 0 - 0 = 0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2558, "user_id": 655436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98da4e7757d5f0e8596fd832bebee3d0?s=128&d=identicon&r=PG", "display_name": "fukanchik", "link": "https://stackoverflow.com/users/655436/fukanchik"}, "is_accepted": false, "score": 2, "last_activity_date": 1428517866, "creation_date": 1428517866, "answer_id": 29522628, "question_id": 29522408, "link": "https://stackoverflow.com/questions/29522408/what-is-this-code-block-doing-u-0-u-0/29522628#29522628", "title": "What is this code block doing ? (u &gt; 0) - (u &lt; 0)", "body": "<p>This is mathematical function <a href=\"https://en.wikipedia.org/wiki/Sign_function\" rel=\"nofollow\">Sign</a>\nit's value is</p>\n\n<ol>\n<li>1 if u > 0</li>\n<li>0 if u = 0</li>\n<li>-1 if u &lt; 0</li>\n</ol>\n\n<p>this is how it works: </p>\n\n<p>as per C standard section 6.5.8 relational operators </p>\n\n<blockquote>\n  <p>shall yield 1 if the specified relation is true and 0 if it is false. The result has type int.</p>\n</blockquote>\n\n<p>now if u is greater than 0 then <code>u &gt; 0</code> returns 1 and <code>u &lt; 0</code> returns 0. <code>1-0</code> is 1, e.g. any <code>u</code> greater than 0 converted to 1. Similarly, any <code>u</code> less than 0 is converted into -1.</p>\n"}], "owner": {"reputation": 437, "user_id": 3861330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb65ed2eef092ea6ed24d1d60378f895?s=128&d=identicon&r=PG&f=1", "display_name": "Dhruv", "link": "https://stackoverflow.com/users/3861330/dhruv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "accepted_answer_id": 29522540, "answer_count": 4, "score": 4, "last_activity_date": 1428518650, "creation_date": 1428517269, "question_id": 29522408, "link": "https://stackoverflow.com/questions/29522408/what-is-this-code-block-doing-u-0-u-0", "title": "What is this code block doing ? (u &gt; 0) - (u &lt; 0)", "body": "<pre><code>if (abs(u) &gt; Vdc)\n    u = Vdc*((u &gt; 0) - (u &lt; 0));\n</code></pre>\n\n<p>This code is in C \nconsidering we enter the if condition what will happen ?\nVdc = 24;\nconsider any arbitrary value of u for an explanation </p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1428517424, "post_id": 29522368, "comment_id": 47199433, "body": "Are you looking for something like <a href=\"http://isocpp.org/wiki/faq/dtors#placement-new\" rel=\"nofollow noreferrer\">placement new</a>?"}, {"owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "edited": false, "score": 0, "creation_date": 1428522596, "post_id": 29522368, "comment_id": 47202493, "body": "A lot of low-level system programming depends on this behavior. What specifically are you trying to achieve. Your question is too broad."}, {"owner": {"reputation": 238, "user_id": 1922340, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7bdd07153e1903a04e9f0d0f0fa0bbea?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/1922340/sam"}, "edited": false, "score": 0, "creation_date": 1428523224, "post_id": 29522368, "comment_id": 47202908, "body": "Rob, I have a large memory that needs to stay in one location in a system. Functions that access this memory will only know it&#39;s location and after reading data at the beginning of the location they will know how the data is arranged. I would like to have the function then associate the proper struct with the location.  Is this possible? Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 238, "user_id": 1922340, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7bdd07153e1903a04e9f0d0f0fa0bbea?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/1922340/sam"}, "edited": false, "score": 0, "creation_date": 1428518259, "post_id": 29522460, "comment_id": 47199954, "body": "Thanks!   Is there a way to do that without changing the data stored at pages? Eg just changing the structure of the memory and leaving the data intact?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 238, "user_id": 1922340, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7bdd07153e1903a04e9f0d0f0fa0bbea?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/1922340/sam"}, "edited": false, "score": 0, "creation_date": 1428519357, "post_id": 29522460, "comment_id": 47200593, "body": "I don&#39;t understand what you mean by &quot;changing the structure of the memory and leaving the data intact?&quot; Memory is just bits and bytes. The language gives them structure and meaning. There is no such thing as changing the structure of memory."}, {"owner": {"reputation": 238, "user_id": 1922340, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7bdd07153e1903a04e9f0d0f0fa0bbea?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/1922340/sam"}, "edited": false, "score": 0, "creation_date": 1428522107, "post_id": 29522460, "comment_id": 47202202, "body": "I guess I am asking if I was passed page_pointer which was filled with integer data, could I somehow access that data using the struct a, which is the same size?  Thanks for the help!"}, {"owner": {"reputation": 238, "user_id": 1922340, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7bdd07153e1903a04e9f0d0f0fa0bbea?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/1922340/sam"}, "edited": false, "score": 0, "creation_date": 1428523810, "post_id": 29522460, "comment_id": 47203247, "body": "That is exactly it! Thank you"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 1, "last_activity_date": 1428523129, "last_edit_date": 1428523129, "creation_date": 1428517410, "answer_id": 29522460, "question_id": 29522368, "link": "https://stackoverflow.com/questions/29522368/is-it-possible-to-convert-a-pointer-to-contiguous-memory-of-known-size-into-a-st/29522460#29522460", "title": "Is it possible to convert a pointer to contiguous memory of known size into a structure?", "body": "<blockquote>\n  <p>I want to take a structure (test) of same size as pages and place it at the memory location of pages. Is this possible?</p>\n</blockquote>\n\n<p>Yes, it is possible. However, instead of using</p>\n\n<pre><code>*page_pointer = a; \n</code></pre>\n\n<p>you should use <code>memcpy</code>.</p>\n\n<pre><code>memcpy(page_pointer, &amp;a, sizeof(pages));\n</code></pre>\n\n<p><strong>Update, in response to comment by OP</strong></p>\n\n<p>I think you are asking whether you can do something like:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nstruct foo\n{\n   int a;\n   int b;\n   int c;\n};\n\nint main()\n{\n   int array[3] = {10, 20, 30};\n   foo* ptr = static_cast&lt;foo*&gt;((void*)array);\n   std::cout &lt;&lt; ptr-&gt;a &lt;&lt; \", \" &lt;&lt; ptr-&gt;b &lt;&lt; \", \" &lt;&lt; ptr-&gt;c &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>I tried it on g++ 4.9.2 and works OK. I am not sure whether it violates any type aliasing rules.</p>\n"}], "owner": {"reputation": 238, "user_id": 1922340, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7bdd07153e1903a04e9f0d0f0fa0bbea?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/1922340/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 29522460, "answer_count": 1, "score": 0, "last_activity_date": 1428523129, "creation_date": 1428517145, "last_edit_date": 1428522278, "question_id": 29522368, "link": "https://stackoverflow.com/questions/29522368/is-it-possible-to-convert-a-pointer-to-contiguous-memory-of-known-size-into-a-st", "title": "Is it possible to convert a pointer to contiguous memory of known size into a structure?", "body": "<p>Ex.</p>\n\n<pre><code>int pages[3];\nint *page_ptr;\npage_ptr = pages;\n\n//\n\ntest a;\n*page_pointer = a; \n</code></pre>\n\n<p>I want to take a structure (<code>test</code>) of same size as <code>pages</code> and place it at the memory location of <code>pages</code>. Is this possible?</p>\n\n<ul>\n<li>without changing the data at pages, just how pages is accessed.</li>\n</ul>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1428517648, "post_id": 29522455, "comment_id": 47199555, "body": "Why not put <code>\\n</code> at the beginning of a <code>printf()</code> format control string?  That&#39;s perfectly legitimate."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1428517783, "post_id": 29522455, "comment_id": 47199636, "body": "Because of buffering."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1428518089, "post_id": 29522455, "comment_id": 47199848, "body": "Ok, then perhaps it would be sensible to qualify your advice to make it clear that it applies specifically to printing interactive prompts."}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 0, "last_activity_date": 1428518599, "last_edit_date": 1495542505, "creation_date": 1428517401, "answer_id": 29522455, "question_id": 29522364, "link": "https://stackoverflow.com/questions/29522364/consecutive-calls-to-scanf/29522455#29522455", "title": "Consecutive calls to scanf", "body": "<p>First, you should (in general, notably for interactive programs) rather put <code>\\n</code> at <em>end</em> not beginning of <code>printf</code> of <code>fprintf</code> format control string. Or else use <code>fflush</code></p>\n\n<p>BTW, <code>%d</code> is for <code>int</code>s so declare <code>int input1, input2;</code> and if enabling all warnings with <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a> e.g. compiling with <code>gcc -Wall -Wextra -g</code> you would have been warned.</p>\n\n<p>Then, you should <em>always</em> test the result of <code>scanf</code> (or <code>fscanf</code>); it gives the number of read items.</p>\n\n<p>See <a href=\"http://man7.org/linux/man-pages/man3/printf.3.html\" rel=\"nofollow noreferrer\">printf(3)</a>, <a href=\"http://man7.org/linux/man-pages/man3/fprintf.3.html\" rel=\"nofollow noreferrer\">fprintf(3)</a>, <a href=\"http://man7.org/linux/man-pages/man3/fflush.3.html\" rel=\"nofollow noreferrer\">fflush(3)</a>, <a href=\"http://man7.org/linux/man-pages/man3/fscanf.3.html\" rel=\"nofollow noreferrer\">fscanf(3)</a></p>\n\n<p>If on Linux, see also <a href=\"https://stackoverflow.com/a/29361728/841108\">this answer</a> about not waiting for full lines.</p>\n"}, {"comments": [{"owner": {"reputation": 243, "user_id": 4095923, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/3q5rn.jpg?s=128&g=1", "display_name": "Mozzy", "link": "https://stackoverflow.com/users/4095923/mozzy"}, "edited": false, "score": 0, "creation_date": 1428517640, "post_id": 29522458, "comment_id": 47199550, "body": "It works, but what if i want to treat it as a char? What would you suggest?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1428517876, "post_id": 29522458, "comment_id": 47199698, "body": "But be aware that if you use <code>%c</code> to scan a digit character such as &#39;0&#39;, the <i>numeric</i> value of the resulting <code>char</code> is different from the value the digit <i>represents</i>.  That is, <code>&#39;0&#39; != 0</code>."}, {"owner": {"reputation": 243, "user_id": 4095923, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/3q5rn.jpg?s=128&g=1", "display_name": "Mozzy", "link": "https://stackoverflow.com/users/4095923/mozzy"}, "edited": false, "score": 0, "creation_date": 1428519014, "post_id": 29522458, "comment_id": 47200416, "body": "Yeah I ran across that earlier. Just looking for that 1 byte storage."}], "tags": [], "owner": {"reputation": 287, "user_id": 4696892, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Wxd6pVB7x8w/AAAAAAAAAAI/AAAAAAAAACM/9YlASP0sEt0/photo.jpg?sz=128", "display_name": "huxley", "link": "https://stackoverflow.com/users/4696892/huxley"}, "is_accepted": false, "score": 1, "last_activity_date": 1428517408, "creation_date": 1428517408, "answer_id": 29522458, "question_id": 29522364, "link": "https://stackoverflow.com/questions/29522364/consecutive-calls-to-scanf/29522458#29522458", "title": "Consecutive calls to scanf", "body": "<p>change <code>char input1, input2;</code> to <code>int input1, input2;</code></p>\n"}, {"comments": [{"owner": {"reputation": 243, "user_id": 4095923, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/3q5rn.jpg?s=128&g=1", "display_name": "Mozzy", "link": "https://stackoverflow.com/users/4095923/mozzy"}, "edited": false, "score": 0, "creation_date": 1428518806, "post_id": 29522507, "comment_id": 47200270, "body": "Thanks man. You make a good point. I&#39;m dealing with two things though 1&#39;s and 0&#39;s performing logic gates. I only need one byte storage."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 243, "user_id": 4095923, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/3q5rn.jpg?s=128&g=1", "display_name": "Mozzy", "link": "https://stackoverflow.com/users/4095923/mozzy"}, "edited": false, "score": 0, "creation_date": 1428519620, "post_id": 29522507, "comment_id": 47200751, "body": "Supposing that you have a bunch of these, so that one-byte vs. (probably) four-byte storage makes a real difference, you can scan into a temporary <code>int</code>, validate the result, and if it&#39;s ok then assign it to a separate <code>char</code> variable.  On output, all you need to do is cast to <code>int</code> if you want to use a <code>%d</code> field descriptor."}, {"owner": {"reputation": 243, "user_id": 4095923, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/3q5rn.jpg?s=128&g=1", "display_name": "Mozzy", "link": "https://stackoverflow.com/users/4095923/mozzy"}, "edited": false, "score": 0, "creation_date": 1428520833, "post_id": 29522507, "comment_id": 47201460, "body": "I see, good idea. It doesn&#39;t entirely matter, but I like to know all my options."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 0, "last_activity_date": 1428517543, "creation_date": 1428517543, "answer_id": 29522507, "question_id": 29522364, "link": "https://stackoverflow.com/questions/29522364/consecutive-calls-to-scanf/29522507#29522507", "title": "Consecutive calls to scanf", "body": "<p>You are lying both to <code>scanf()</code> and to <code>printf()</code> about the types of variables <code>input1</code> and <code>input2</code>.  The <code>%d</code> field descriptor promises that the corresponding argument is an <code>int</code> (or a pointer to one, for <code>scanf()</code>), but the actual type in your code is <code>char</code>.  The behavior of the resulting program is undefined.</p>\n\n<p>Your program works fine for me if I change the variables' type to <code>int</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 97, "user_id": 4757418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/122480a2abfb1b7de533aba69968c1ad?s=128&d=identicon&r=PG&f=1", "display_name": "please delete me", "link": "https://stackoverflow.com/users/4757418/please-delete-me"}, "is_accepted": false, "score": 0, "last_activity_date": 1428519422, "creation_date": 1428519422, "answer_id": 29523091, "question_id": 29522364, "link": "https://stackoverflow.com/questions/29522364/consecutive-calls-to-scanf/29523091#29523091", "title": "Consecutive calls to scanf", "body": "<p>You used %d that reads an integer and store in a variable of type char, which is totally wrong.</p>\n"}], "owner": {"reputation": 243, "user_id": 4095923, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/3q5rn.jpg?s=128&g=1", "display_name": "Mozzy", "link": "https://stackoverflow.com/users/4095923/mozzy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 316, "favorite_count": 0, "accepted_answer_id": 29522507, "answer_count": 4, "score": 0, "last_activity_date": 1428519422, "creation_date": 1428517111, "question_id": 29522364, "link": "https://stackoverflow.com/questions/29522364/consecutive-calls-to-scanf", "title": "Consecutive calls to scanf", "body": "<p>I was helping a classmate with his code and had run across this.\nI have had some issues with scanf in the past probably due to my lack of experience, but that is why I'm here.</p>\n\n<p>So, I noticed that two consecutive calls to scanf or grabbing multiple input from one call can be problematic. Consider the following.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid main(){\n\nchar input1, input2;\n\n//In\nfprintf(stdout,\"\\nInput1: \");\nfscanf(stdin,\"%d\",&amp;input1);\nfprintf(stdout,\"\\nInput2: \");\nfscanf(stdin, \"%d\", &amp;input2);\n\n//Out\nfprintf(stdout,\"\\nInput1: %d Input2: %d\\n\",input1,input2);\n\n}\n</code></pre>\n\n<p>Why is it that scanf will print to the screen the desired values of input1 &amp; input2 yet when I print back those same two variables with printf, the second value (input2) seems to have overwritten Input1?</p>\n\n<p>This is the output.</p>\n\n<pre><code>Input1: 1\n\nInput2: 0\n\nInput1: 0 Input2: 0\n</code></pre>\n\n<p>Does this have anything to do with the line buffer? If so, could someone explain this to me.</p>\n\n<p>Thank you kindly.</p>\n"}, {"tags": ["c", "pointers", "struct", "linked-list", "free"], "comments": [{"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1428517088, "post_id": 29522264, "comment_id": 47199243, "body": "what you did is correct(at least no obvious error), but your idea is a little bit biased. <code>malloc</code> <b>allocates</b> a block of memory for you, only. it doesn&#39;t know and doesn&#39;t care about the fields inside. and yes, <code>free</code> only frees one layer only so you need to free the fields inside if necessary."}, {"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1428517162, "post_id": 29522264, "comment_id": 47199281, "body": "but there is a regular arguable issue: <a href=\"http://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\" title=\"do i cast the result of malloc\">stackoverflow.com/questions/605845/&hellip;</a> ."}, {"owner": {"reputation": 1685, "user_id": 2406824, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b9e6d42de16d7fd42a75edf7470f0ebc?s=128&d=identicon&r=PG", "display_name": "napkinsterror", "link": "https://stackoverflow.com/users/2406824/napkinsterror"}, "reply_to_user": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1428518913, "post_id": 29522264, "comment_id": 47200357, "body": "I usually don&#39;t cast in C, unless I am unsure about what I am doing, but now I definitely won&#39;t thanks!"}, {"owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 0, "creation_date": 1428519177, "post_id": 29522264, "comment_id": 47200504, "body": "The don&#39;t cast in C always comes up. And always a link to that idiomatic question. My corollary to that is (as usual): Don&#39;t cast in C IFFFFFFF you are sure you that code will only be compiled by a C-compiler for the next 500 years."}], "answers": [{"comments": [{"owner": {"reputation": 1685, "user_id": 2406824, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b9e6d42de16d7fd42a75edf7470f0ebc?s=128&d=identicon&r=PG", "display_name": "napkinsterror", "link": "https://stackoverflow.com/users/2406824/napkinsterror"}, "edited": false, "score": 0, "creation_date": 1428518486, "post_id": 29522595, "comment_id": 47200063, "body": "This seems great. I&#39;m guessing by your answer that setting the fields (like <i>listPointer-&gt;next = NULL</i>) is doing enough and that I don&#39;t need to malloc it. Secondly, I need to be sure to destroy the <i>str</i> field inside of the list as well. I was pretty much asking, if what your <i>free()</i> statement destroys the <i>list-&gt;str</i> as well as destroying the <i>list</i> pointer."}, {"owner": {"reputation": 1685, "user_id": 2406824, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b9e6d42de16d7fd42a75edf7470f0ebc?s=128&d=identicon&r=PG", "display_name": "napkinsterror", "link": "https://stackoverflow.com/users/2406824/napkinsterror"}, "edited": false, "score": 0, "creation_date": 1428519034, "post_id": 29522595, "comment_id": 47200423, "body": "can you explain why we <code>malloc()</code> and <code>free()</code> for the <code>str</code> field, but not for the <code>next</code> field? I am going to eventually put an address for this node to point to (in most cases). So I am led to believe I need to <code>malloc()</code> space for it. I think this might be at the root of my misunderstanding of linked lists in C. Thanks again!"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 1685, "user_id": 2406824, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b9e6d42de16d7fd42a75edf7470f0ebc?s=128&d=identicon&r=PG", "display_name": "napkinsterror", "link": "https://stackoverflow.com/users/2406824/napkinsterror"}, "edited": false, "score": 0, "creation_date": 1428519242, "post_id": 29522595, "comment_id": 47200543, "body": "@napkinsterror <i>but not for the next field?</i>  <code>next</code> delegate to <code>List_destroy(list-&gt;next);</code>."}], "tags": [], "owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "is_accepted": true, "score": 2, "last_activity_date": 1428518597, "last_edit_date": 1428518597, "creation_date": 1428517792, "answer_id": 29522595, "question_id": 29522264, "link": "https://stackoverflow.com/questions/29522264/correct-way-to-use-malloc-and-free-with-linked-lists/29522595#29522595", "title": "Correct way to use malloc() and free with linked lists", "body": "<pre><code>List * List_createNode(const char * str){\n  List * listPointer = (List *) malloc(sizeof(List));\n\n  if(listPointer == NULL)\n    return NULL;\n\n  listPointer-&gt;next = NULL;\n\n  listPointer-&gt;str = strdup(str);\n  if(listPointer-&gt;str == NULL){\n    free(listPointer);\n    return NULL;\n  }\n\n  return listPointer;\n}\n\nvoid List_destory(List * list){\n  if(list == NULL)\n    return;\n  List_destroy(list-&gt;next);\n  free(list-&gt;str);\n  free(list);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1685, "user_id": 2406824, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b9e6d42de16d7fd42a75edf7470f0ebc?s=128&d=identicon&r=PG", "display_name": "napkinsterror", "link": "https://stackoverflow.com/users/2406824/napkinsterror"}, "edited": false, "score": 0, "creation_date": 1428518678, "post_id": 29522748, "comment_id": 47200185, "body": "Thanks! I only wish you would have done it more like my example, but I get it. I have a great understanding of stacks, heaps, and low level computer hardware, but I just wanted to know why or why not to malloc the fields inside of the node after it has been malloc&#39;ed. (Especially for the <code>next</code> field as it would require me to malloc another struct)."}, {"owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "reply_to_user": {"reputation": 1685, "user_id": 2406824, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b9e6d42de16d7fd42a75edf7470f0ebc?s=128&d=identicon&r=PG", "display_name": "napkinsterror", "link": "https://stackoverflow.com/users/2406824/napkinsterror"}, "edited": false, "score": 0, "creation_date": 1428518960, "post_id": 29522748, "comment_id": 47200384, "body": "It all depends on what you are planning on doing. Having each node allocated individually on the heap does not help with &quot;locality&quot;. So, while many schoolbooks do exactly that, you might as well allocate a chunk of nodes in one go (and have them in contiguous memory) and then set the pointers to next to individual members of the chunk. A pointer is just a pointer and it does not determine how the memory it points to was obtained."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 1685, "user_id": 2406824, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b9e6d42de16d7fd42a75edf7470f0ebc?s=128&d=identicon&r=PG", "display_name": "napkinsterror", "link": "https://stackoverflow.com/users/2406824/napkinsterror"}, "edited": false, "score": 0, "creation_date": 1428519140, "post_id": 29522748, "comment_id": 47200481, "body": "@napkinsterror initialise the <code>next</code> field to <code>NULL</code>, or the current list head (depending on your method). Otherwise you&#39;ll have an infinite task with <i>that</i> one&#39;s <code>next</code> field."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1428519197, "post_id": 29522748, "comment_id": 47200511, "body": "&quot;Where does the memory for y come from now&quot; - the same place the memory for <code>x</code> came from. They&#39;re <i>both</i> automatic variables. The difference is what each is intended to <i>hold</i>. <code>x</code> holds an <code>int</code> value, <code>y</code> holds an <i>address</i> that, properly determined, refers to memory that holds an <code>int</code> value. Nor does the latter <i>have to be</i> dynamic. One could just as easily <code>int x = 5; int *y = &amp;x;</code>. Ultimately a pointer variable holds an address. The source of that address, be it dynamic or not, determines how it should eventually be managed."}], "tags": [], "owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "is_accepted": false, "score": 2, "last_activity_date": 1428518226, "creation_date": 1428518226, "answer_id": 29522748, "question_id": 29522264, "link": "https://stackoverflow.com/questions/29522264/correct-way-to-use-malloc-and-free-with-linked-lists/29522748#29522748", "title": "Correct way to use malloc() and free with linked lists", "body": "<p>Let's warm up a little before we tackle your question.</p>\n\n<pre><code>int x = 42; \n</code></pre>\n\n<p>Where does the memory of x come from? Is it allocated? Where? If this line is inside a function, the answer is: it is an \"automatic\" variable and the memory it uses is on the stack.</p>\n\n<pre><code>int * y = NULL;\n</code></pre>\n\n<p>Where does the memory for y come from now? There was no call to <code>malloc()</code> here and yet, <code>y</code> exists. </p>\n\n<p>By now, you should be able to answer the first part of your question. <code>malloc()</code> is not allocating the memory for your pointer in this case.</p>\n\n<pre><code>struct Node\n{\n    struct Node * next;\n    int value;\n};\n\nvoid InitNode( Node *node, int value )\n{\n    if(NULL != node)\n    {\n        node-&gt;next = NULL;\n        node-&gt;value = value;\n    }\n}\n\n// Not on HEAP, not on stack! Where? \n// This one gets its memory from \"initvars\" section.\nint foo = 69; \n\nint main( int argc, const char * argv[] )\n{\n     struct Node n1; // instance located on stack...\n     InitNode(&amp;n1); // no malloc() to be seen... \n\n     // Instance located on HEAP, but n2, the pointer is located on stack,    \n     // just like an int x = 42 would be.\n     struct Node *n2 = malloc(sizeof(struct Node)); \n}\n</code></pre>\n\n<p>So, obviously in order to de-mystify what <code>malloc()</code> does requires to understand the different types of memory and how to deal with it.</p>\n\n<p>So far we saw \"automatic\" aka \"stack memory\", we saw \"initvars\" memory. And we saw \"heap\" memory. malloc() is the function you use to allocate memory on the heap. </p>\n\n<p>Last not least, there are yet other types of memory I will not mention here.</p>\n"}, {"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 3, "last_activity_date": 1428518664, "last_edit_date": 1428518664, "creation_date": 1428518288, "answer_id": 29522774, "question_id": 29522264, "link": "https://stackoverflow.com/questions/29522264/correct-way-to-use-malloc-and-free-with-linked-lists/29522774#29522774", "title": "Correct way to use malloc() and free with linked lists", "body": "<p>Please don't cast the return value from <code>malloc()</code>.</p>\n\n<pre><code>malloc(sizeof(SomeStruct))\n</code></pre>\n\n<p>allocates enough memory for one struct, and you then have to initialise every field within the struct.</p>\n\n<pre><code>calloc(1, sizeof(SomeStruct))\n</code></pre>\n\n<p>does the same but every byte of the struct is initialised to <code>0</code>. <code>malloc()</code> and <code>calloc()</code> know nothing about your struct, they simply allocate the amount of memory you asked for. They return a <code>void*</code> pointer so that they can be used with any data type, about which they neither know nor care.</p>\n\n<p>When you come to <code>free()</code> the allocated memory, the same applies - <code>free()</code> knows nothing about your struct, or even if it <em>is</em> a struct. It's up to you to <code>free()</code> any memory allocation within that struct, before you <code>free()</code> the memory for the struct. It does not free a struct. It frees the memory where the struct is.</p>\n\n<p>So the answer is yes, you do need to walk through the whole data structure, otherwise any nested memory allocation pointers will be lost, resulting in memory leak.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 1, "last_activity_date": 1428520984, "creation_date": 1428520984, "answer_id": 29523571, "question_id": 29522264, "link": "https://stackoverflow.com/questions/29522264/correct-way-to-use-malloc-and-free-with-linked-lists/29523571#29523571", "title": "Correct way to use malloc() and free with linked lists", "body": "<blockquote> Does this create memory for the pointer to the list as well as the fields inside of it? \n</blockquote>\n\n<p>Given your struct type</p>\n\n<pre><code>typedef struct ListNode_st\n{\n    char * str;\n    struct ListNode_st * next;\n} List;\n</code></pre>\n\n<p>the following call will create memory for an instance of that struct:</p>\n\n<pre><code>List *l = malloc( sizeof *l ); // note no cast, operand of sizeof\n</code></pre>\n\n<p><code>l</code> points to a block of memory large enough to contain two pointers; however, nothing's been allocated for either <code>str</code> or <code>next</code> to point <em>to</em>.  You would have to allocate memory for the string and the next node separately:</p>\n\n<pre><code>l-&gt;str = malloc( N * sizeof *l-&gt;str ); // allocate N characters\n</code></pre>\n\n<p>or</p>\n\n<pre><code>l-&gt;str = strdup( str );\n</code></pre>\n\n<p>Note that in most linked list implementations, you don't allocate memory for <code>next</code> when you create a new node; that field is meant to point to another, previously allocated node in the list.  You will set it when you insert a node following the current node.</p>\n\n<blockquote>\n  <p>Alongside this, if I am trying to free this node AND the fields inside of it. Do I need to walk through all the fields (see code below). Does this just free the pointer (created from the line above) or does it free the pointer and and the fields.</p>\n</blockquote>\n\n<p>You need to free any allocated members first before deleting the entire node, such as</p>\n\n<pre><code>free( l-&gt;str );\nfree( l );\n</code></pre>\n\n<p>Freeing <code>l</code> does not free the memory that <code>l-&gt;str</code> points to.  </p>\n"}], "owner": {"reputation": 1685, "user_id": 2406824, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b9e6d42de16d7fd42a75edf7470f0ebc?s=128&d=identicon&r=PG", "display_name": "napkinsterror", "link": "https://stackoverflow.com/users/2406824/napkinsterror"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24444, "favorite_count": 0, "accepted_answer_id": 29522595, "answer_count": 4, "score": 0, "last_activity_date": 1428520984, "creation_date": 1428516777, "question_id": 29522264, "link": "https://stackoverflow.com/questions/29522264/correct-way-to-use-malloc-and-free-with-linked-lists", "title": "Correct way to use malloc() and free with linked lists", "body": "<p>I am trying to understand malloc() better when it comes to linked list. Does this create memory for the pointer to the list as well as the fields inside of it?\nSuch as:</p>\n\n<pre><code>  SomeStruct * someStructPtr = (SomeStruct *) malloc(sizeof(SomeStruct));\n</code></pre>\n\n<p>Alongside this, if I am trying to free this node AND the fields inside of it. Do I need to walk through all the fields (see code below). Does this just free the pointer (created from the line above) or does it free the pointer and and the fields.</p>\n\n<pre><code>free(someStructPtr);\n</code></pre>\n\n<p>For a more direct example. I have a struct of List and I'm trying to allocate space for this struct AND it's fields when it is created. I want to make sure I am creating, deleting, and using stdrup() correctly. My code is below: </p>\n\n<p>Struct Declaration:</p>\n\n<pre><code>typedef struct ListNode_st\n{\n    char * str;\n    struct ListNode_st * next;\n} List;\n</code></pre>\n\n<p>Create Node:</p>\n\n<pre><code>List * List_createNode(const char * str){\n  List * listPointer = (List *) malloc(sizeof(List));\n\n  //make sure there was enough memory\n  if(listPointer == NULL)\n    return NULL;\n\n  //malloc for next\n  listPointer.next = (List *) malloc(sizeof(List *));\n  if(listPointer.next == NULL)\n    return NULL;\n  listPointer.next = NULL;\n\n  //malloc for str\n  listPointer.str = strdup(str);\n  //make sure enough space for the string to be copied\n  if(listPointer.str == NULL)\n    return NULL;\n\n  //return value\n  return listPointer;\n}\n</code></pre>\n\n<p>Delete Node:</p>\n\n<pre><code>void List_destory(List * list){\n  //base case -- (last item)\n  if(list == NULL)\n    return;\n  //recurse case -- (there are more items)\n  List_destroy(list-&gt;next);\n  if(list-&gt;str != NULL)\n    free(list-&gt;str);\n  if(list-&gt;next != NULL)\n    free(list-&gt;next);\n\n  free(list);\n}\n</code></pre>\n"}, {"tags": ["c", "linked-list", "segmentation-fault"], "comments": [{"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 1, "creation_date": 1428516723, "post_id": 29522215, "comment_id": 47199023, "body": "What is <code>string</code>? And for C, don&#39;t cast the result of <code>malloc</code>."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1428516757, "post_id": 29522215, "comment_id": 47199046, "body": "0)<code>string readFile=malloc(FILENAME_MAX+1);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 6643, "user_id": 2032021, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/c1c31bca855c458b3f218ef6a303184d?s=128&d=identicon&r=PG", "display_name": "Dr. Debasish Jana", "link": "https://stackoverflow.com/users/2032021/dr-debasish-jana"}, "is_accepted": false, "score": 1, "last_activity_date": 1428517469, "creation_date": 1428517469, "answer_id": 29522485, "question_id": 29522215, "link": "https://stackoverflow.com/questions/29522215/segmentation-fault-runtime-error/29522485#29522485", "title": "Segmentation Fault. Runtime error", "body": "<p>For linked list, addition of new node  must have it's next as null, if you are adding the node at the end.</p>\n"}, {"tags": [], "owner": {"reputation": 59348, "user_id": 522663, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OKOEw.png?s=128&g=1", "display_name": "Jonathan Wood", "link": "https://stackoverflow.com/users/522663/jonathan-wood"}, "is_accepted": false, "score": 1, "last_activity_date": 1428521537, "last_edit_date": 1428521537, "creation_date": 1428517617, "answer_id": 29522528, "question_id": 29522215, "link": "https://stackoverflow.com/questions/29522215/segmentation-fault-runtime-error/29522528#29522528", "title": "Segmentation Fault. Runtime error", "body": "<p>I personally do not like this syntax.</p>\n\n<pre><code>while(temp2-&gt;next != NULL)\n{\n    temp2=temp2-&gt;next;\n}\n</code></pre>\n\n<p>The following seems a lot safer to me.</p>\n\n<pre><code>for (position p = temp2; p != NULL; p = p-&gt;next)\n{\n}\n</code></pre>\n\n<p>The second version would've prevented the segmentation fault in your code.</p>\n"}], "owner": {"reputation": 11, "user_id": 4765459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3743c32e4fef880dbc5d4bb4e7beda8f?s=128&d=identicon&r=PG&f=1", "display_name": "RayaR", "link": "https://stackoverflow.com/users/4765459/rayar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1513348512, "creation_date": 1428516587, "last_edit_date": 1513348512, "question_id": 29522215, "link": "https://stackoverflow.com/questions/29522215/segmentation-fault-runtime-error", "title": "Segmentation Fault. Runtime error", "body": "<p>I'm writing a code that should read data from a file and then add them to a linked list , following is the code to read from the file:</p>\n\n<pre><code>void readFromFile(List l)\n{\nsystem(\"cls\");\nFILE *eqFile;\nstring readFile,line;\nprintf(\"\\n\\t\\t\\tEnter the title of the file to read equations from\\n\\t\\t\\t\");\nscanf(\"\\t\\t\\t%s\",readFile);\neqFile=fopen(readFile,\"r\");\n\n/*To make sure that the file does exist*/\nwhile (eqFile == NULL)\n{\n    printf(\"\\n\\t\\t\\tERROR!! The file you requested doesn't exist. Enter the title correctly please\\n\\t\\t\\t\");\n    scanf(\"\\t\\t\\t%s\",readFile);\n    eqFile=fopen(readFile,\"r\");\n}\n\nwhile (fscanf(eqFile,\"%s\",line) != EOF)\n{\n    addNode(l,line);//create a new node and fill it with the data\n    count++; //Counter to count the number of nodes in the list\n}\n\nfclose(eqFile);\nsystem(\"cls\");\nprintf(\"\\n\\t\\t\\tDATA READ SUCCESSFULLY!\\n\\t\\tPress any key to return to the menu.\\t\\t\\t\");\ngetch();\nmenu();\n\n}\n</code></pre>\n\n<p>But it gives runtime error when I worked in the debug mode I found out that the problem is in the \"addNode\" function, following is the function :</p>\n\n<pre><code>/*Function that adds a node to the list*/\nvoid addNode(List l, string s)\n{\nposition temp,temp2;\ntemp2=l;\n\ntemp = (position)malloc(sizeof(struct node));\nif(temp == NULL)\n    printf(\"\\n\\t\\t\\tSORRY! MEMORY OUT OF SPACE!!\\n\");\nelse\n{\n    strcpy(temp-&gt;eq,s);\n    while(temp2-&gt;next != NULL)\n    {\n        temp2=temp2-&gt;next;\n    }\n\n    (temp2)-&gt; next= temp;\n\n}\n}\n</code></pre>\n\n<p>The error happens at this statement :</p>\n\n<pre><code>  while(temp2-&gt;next != NULL)\n      {\n          temp2=temp2-&gt;next;\n      }\n</code></pre>\n\n<p>I looked for the reason of the error and I found that it occurs when I try to access something that can't be accessed by memory. But I have used this statement several times before in different codes and it didn't cause any problem. Could any one help me please telling me what's wrong with my code? Or how can I avoid this error?</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 28, "creation_date": 1428516621, "post_id": 29522179, "comment_id": 47198950, "body": "Because you&#39;re using a vector of vector, which means each of your columns (or rows) is a separate allocation which may or may not be in a cache friendly location."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 6, "creation_date": 1428516646, "post_id": 29522179, "comment_id": 47198971, "body": "Are those times from single runs, or averages over multiple runs?"}, {"owner": {"reputation": 14111, "user_id": 1126943, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yeuHw.png?s=128&g=1", "display_name": "zch", "link": "https://stackoverflow.com/users/1126943/zch"}, "edited": false, "score": 0, "creation_date": 1428516761, "post_id": 29522179, "comment_id": 47199052, "body": "How do you allocate <code>matrix</code> in C?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 4, "creation_date": 1428516815, "post_id": 29522179, "comment_id": 47199089, "body": "Are your optimisations on? Some C++ compilers enable range-checking on vectors when it&#39;s off, like in debug builds."}, {"owner": {"reputation": 2743, "user_id": 2554810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bcabfe7eb829de8fb40e2f3d1719128?s=128&d=identicon&r=PG", "display_name": "IllusiveBrian", "link": "https://stackoverflow.com/users/2554810/illusivebrian"}, "edited": false, "score": 7, "creation_date": 1428516846, "post_id": 29522179, "comment_id": 47199106, "body": "What compiler options are you using?  Why does the C++ solution get wrapped in a class, are you including the class initialization in your timer?  Speaking of which, how are you timing the execution?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 4, "creation_date": 1428516901, "post_id": 29522179, "comment_id": 47199139, "body": "Are the allocating schemes different? A single block in C vs. multiple blocks (vectors) in C++. Anyway you should prefer a single block of memory (no vector of vector)."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 3, "creation_date": 1428517403, "post_id": 29522179, "comment_id": 47199425, "body": "Try a thin <a href=\"http://stackoverflow.com/a/12009991/179910\">wrapper around a single vector instead</a>."}, {"owner": {"reputation": 10530, "user_id": 521897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5ZTZI.jpg?s=128&g=1", "display_name": "amdn", "link": "https://stackoverflow.com/users/521897/amdn"}, "edited": false, "score": 1, "creation_date": 1428517517, "post_id": 29522179, "comment_id": 47199488, "body": "Although identical syntactically, the expression &quot;matrix[i][j]&quot; in C and in C++ are likely implemented very differently in your case (you can make it equivalent in C++ by allocating matrix as one single block of memory stored in row major order).  Look for a definition of &quot;operator []&quot; in your matrix class, it will likely point to where the problem is."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1428518493, "post_id": 29522179, "comment_id": 47200069, "body": "Additionally, the C++ was probably compiled with exceptions enabled, and the C wasn&#39;t, which can <i>sometimes</i> incur a performance penalty.  To reduce this, mark C++ functions as <code>noexcept</code> or <code>nothrow</code> (depending on your compiler)."}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 2, "creation_date": 1428518764, "post_id": 29522179, "comment_id": 47200234, "body": "With most halfway-modern compilers, exception don&#39;t incur an overhead unless they are thrown, @MooingDuck. The exception-handling code is not stored inline with the &quot;normal&quot; code and thus doesn&#39;t increase size and cache misses. An IMHO more likely influence is a container implementation with debug diagnostics."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "reply_to_user": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 1, "creation_date": 1428519203, "post_id": 29522179, "comment_id": 47200515, "body": "@UlrichEckhardt: Except, you know, <a href=\"http://stackoverflow.com/a/3590198/845092\">MSVC compiling x86</a> (<a href=\"https://msdn.microsoft.com/en-us/library/vstudio/c0hwkhwe(v=vs.100).aspx\" rel=\"nofollow noreferrer\">and here</a>), and <a href=\"http://sourceforge.net/p/mingw-w64/mailman/message/30171170/\" rel=\"nofollow noreferrer\">GCC on x86</a> (due to patent issues)...   But you&#39;re right the containers + debug are a <i>way</i> bigger consideration."}, {"owner": {"reputation": 30596, "user_id": 134702, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7c1594304f3515b88e31bc8888f0f593?s=128&d=identicon&r=PG", "display_name": "Matt Hook", "link": "https://stackoverflow.com/users/134702/matt-hook"}, "edited": false, "score": 0, "creation_date": 1428521809, "post_id": 29522179, "comment_id": 47202040, "body": "Create a matrix class and represent 2D matrices with an inline (x, y) overloaded function call that internally calculates position into a single dimension vector.  It&#39;ll then be almost on par with C rather than vector of vector as others have pointed out."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1428541843, "post_id": 29522179, "comment_id": 47210163, "body": "For benchmark questions you should post <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>s including the benchmarking code and your compiler switches.   See bames53&#39;s code sample for what you should be posting."}, {"owner": {"reputation": 309, "user_id": 3284190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0edfcd17c09577e60803235d0820ec0c?s=128&d=identicon&r=PG&f=1", "display_name": "nwod", "link": "https://stackoverflow.com/users/3284190/nwod"}, "reply_to_user": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 0, "creation_date": 1428584960, "post_id": 29522179, "comment_id": 47230815, "body": "@Robinson That makes sense. I have found simpler examples that avoid vectors of vectors and any complex data structures in general."}, {"owner": {"reputation": 309, "user_id": 3284190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0edfcd17c09577e60803235d0820ec0c?s=128&d=identicon&r=PG&f=1", "display_name": "nwod", "link": "https://stackoverflow.com/users/3284190/nwod"}, "reply_to_user": {"reputation": 2743, "user_id": 2554810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bcabfe7eb829de8fb40e2f3d1719128?s=128&d=identicon&r=PG", "display_name": "IllusiveBrian", "link": "https://stackoverflow.com/users/2554810/illusivebrian"}, "edited": false, "score": 0, "creation_date": 1428585275, "post_id": 29522179, "comment_id": 47231099, "body": "@Namfuak I have no control over the compiler options, and the C++ solution is wrapped in a class because that&#39;s the format the LeetCode website requires for C++ solutions. The code I have shown is all that I am allowed to provide as an answer, and the compiling and benchmarking is done by the LeetCode backend, presumably in a reasonable way. Or maybe not so reasonable way. I can&#39;t know. But they do specify that C++ environment is g++ 4.9.1 and the C one is gcc 4.9.1."}, {"owner": {"reputation": 309, "user_id": 3284190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0edfcd17c09577e60803235d0820ec0c?s=128&d=identicon&r=PG&f=1", "display_name": "nwod", "link": "https://stackoverflow.com/users/3284190/nwod"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1428585896, "post_id": 29522179, "comment_id": 47231499, "body": "@MattMcNabb Unfortunately, I don&#39;t have any control over the benchmarking code and compiler switches used on LeetCode. I have provided a couple of simpler MCVEs though. I know it&#39;s far from ideal but you can just copy and paste the whole example on the LeetCode website for completeness and verification..."}], "answers": [{"comments": [{"owner": {"reputation": 156256, "user_id": 33732, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7ea2bfac80ecc1d368ff3a5bb0e58568?s=128&d=identicon&r=PG", "display_name": "Rob Kennedy", "link": "https://stackoverflow.com/users/33732/rob-kennedy"}, "edited": false, "score": 3, "creation_date": 1428518901, "post_id": 29522744, "comment_id": 47200345, "body": "I don&#39;t see how this answers the question. Is the C++ code changing the size of the vectors? Of not, then why should that contribute to the running time? The vector is already being passed by reference. Although you&#39;ve made true statements, I don&#39;t quite see how they&#39;re relevant to the question at hand."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 3, "creation_date": 1428519161, "post_id": 29522744, "comment_id": 47200495, "body": "There is absolutely no reason why C++ should be faster (or slower) than C, having this simple data structure."}, {"owner": {"reputation": 8325, "user_id": 1350209, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bd2f0eb2365d2a1fcd6f4eb4d40366b1?s=128&d=identicon&r=PG", "display_name": "Cole Johnson", "link": "https://stackoverflow.com/users/1350209/cole-johnson"}, "edited": false, "score": 0, "creation_date": 1428529338, "post_id": 29522744, "comment_id": 47206067, "body": "Adding to @DieterL&#252;cking: C++&#39;s original &quot;compiler&quot; output was simply C code. All it did was transform (then) &quot;C++&quot; into C code to be fed to a C compiler. No reason why C++ would be slower. Its original name (I think) was &quot;C with classes&quot;."}, {"owner": {"reputation": 13828, "user_id": 1146881, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/wZqsm.jpg?s=128&g=1", "display_name": "nick", "link": "https://stackoverflow.com/users/1146881/nick"}, "reply_to_user": {"reputation": 156256, "user_id": 33732, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7ea2bfac80ecc1d368ff3a5bb0e58568?s=128&d=identicon&r=PG", "display_name": "Rob Kennedy", "link": "https://stackoverflow.com/users/33732/rob-kennedy"}, "edited": false, "score": 0, "creation_date": 1428540651, "post_id": 29522744, "comment_id": 47209807, "body": "@RobKennedy Do you know why this question was downvoted? Robinson&#39;s comment and bames53&#39;s answer said essentially the same thing."}, {"owner": {"reputation": 156256, "user_id": 33732, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7ea2bfac80ecc1d368ff3a5bb0e58568?s=128&d=identicon&r=PG", "display_name": "Rob Kennedy", "link": "https://stackoverflow.com/users/33732/rob-kennedy"}, "reply_to_user": {"reputation": 13828, "user_id": 1146881, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/wZqsm.jpg?s=128&g=1", "display_name": "nick", "link": "https://stackoverflow.com/users/1146881/nick"}, "edited": false, "score": 0, "creation_date": 1428544010, "post_id": 29522744, "comment_id": 47210774, "body": "I don&#39;t know why you&#39;re asking me, @Nick. Robinson&#39;s comment suggests the problem is cache locality. Bames&#39;s answer says the problem is optimization. Those aren&#39;t the same things."}], "tags": [], "owner": {"reputation": 6643, "user_id": 2032021, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/c1c31bca855c458b3f218ef6a303184d?s=128&d=identicon&r=PG", "display_name": "Dr. Debasish Jana", "link": "https://stackoverflow.com/users/2032021/dr-debasish-jana"}, "is_accepted": false, "score": -4, "last_activity_date": 1428518511, "last_edit_date": 1428518511, "creation_date": 1428518221, "answer_id": 29522744, "question_id": 29522179, "link": "https://stackoverflow.com/questions/29522179/why-is-my-c-code-three-times-slower-than-the-c-equivalent-on-leetcode/29522744#29522744", "title": "Why is my C++ code three times slower than the C equivalent on LeetCode?", "body": "<p>You are using vector of vector in your C++ code snippet. Vectors are sequence containers in C++ that are like arrays that can change in size. Instead of <code>vector&lt;vector&lt;int&gt;&gt;</code> if you use statically allocated arrays, that would be better. You may use your own Array class as well with operator [] overloaded, but vector has more overhead as it dynamically resizes when you add more elements than its original size. In C++, you use call by reference to further reduce your time if you compare that with C. C++ should run even faster if written well.</p>\n"}, {"comments": [{"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 1, "creation_date": 1428523765, "post_id": 29523732, "comment_id": 47203224, "body": "I&#39;ve often seen <code>std::vector&lt;T&gt;</code> being optimized down to &quot;raw&quot; arrays, but, as you correctly say, you need to turn optimizations on. With C you&#39;re already using that kind of arrays, so unoptimized code will be faster."}, {"owner": {"reputation": 9542, "user_id": 985296, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/fb867640ddc6aee363d96530573845b0?s=128&d=identicon&r=PG", "display_name": "stefan", "link": "https://stackoverflow.com/users/985296/stefan"}, "edited": false, "score": 0, "creation_date": 1428524671, "post_id": 29523732, "comment_id": 47203704, "body": "@bames53 Actually, it&#39;s not always the case that <code>vector&lt;vector&lt;T&gt;&gt;</code> is worse than a custom struct. This depends a lot on the application. (E.g. adding another column is an extremely costly thing for the struct, but not for the nested vector). As always, one should profile the actual use case."}, {"owner": {"reputation": 1130, "user_id": 3494492, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/j7gkb.png?s=128&g=1", "display_name": "kiwixz", "link": "https://stackoverflow.com/users/3494492/kiwixz"}, "edited": false, "score": 2, "creation_date": 1428525485, "post_id": 29523732, "comment_id": 47204119, "body": "On a side note, gcc use <code>-Og</code> for debugger-friendly optimizations."}, {"owner": {"reputation": 15322, "user_id": 291737, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/432bda8139dee981e1411f40cab0a13e?s=128&d=identicon&r=PG", "display_name": "StilesCrisis", "link": "https://stackoverflow.com/users/291737/stilescrisis"}, "reply_to_user": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 0, "creation_date": 1428525814, "post_id": 29523732, "comment_id": 47204299, "body": "@black: You&#39;ve seen <code>vector</code> optimized into a raw array? That shouldn&#39;t be possible, unless the optimizer is able to turn a heap allocation into a stack-based one, which is far beyond the optimization abilities of any compiler I&#39;ve ever seen."}, {"owner": {"reputation": 2021, "user_id": 321935, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/PiKZc.jpg?s=128&g=1", "display_name": "SilverbackNet", "link": "https://stackoverflow.com/users/321935/silverbacknet"}, "edited": false, "score": 0, "creation_date": 1428539710, "post_id": 29523732, "comment_id": 47209536, "body": "Pointers to a heap allocation are often referred to as raw arrays, because array and pointer syntax are interchangeable in C. Never heard that phrase to mean stack arrays specifically."}, {"owner": {"reputation": 79428, "user_id": 365496, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1397eae94e7fe715f040459c988c40b1?s=128&d=identicon&r=PG", "display_name": "bames53", "link": "https://stackoverflow.com/users/365496/bames53"}, "reply_to_user": {"reputation": 9542, "user_id": 985296, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/fb867640ddc6aee363d96530573845b0?s=128&d=identicon&r=PG", "display_name": "stefan", "link": "https://stackoverflow.com/users/985296/stefan"}, "edited": false, "score": 0, "creation_date": 1428540195, "post_id": 29523732, "comment_id": 47209650, "body": "@stefan That&#39;s true, it does depend. However cases where <code>vector&lt;vector&lt;int&gt;&gt;</code> has an advantage are specialized and uncommon compared to how often a contiguous block of memory is a better arrangement."}, {"owner": {"reputation": 309, "user_id": 3284190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0edfcd17c09577e60803235d0820ec0c?s=128&d=identicon&r=PG&f=1", "display_name": "nwod", "link": "https://stackoverflow.com/users/3284190/nwod"}, "edited": false, "score": 0, "creation_date": 1428584480, "post_id": 29523732, "comment_id": 47230484, "body": "@bames53 That&#39;s a really good point. Sadly I have no control over how the code was compiled or benchmarked. However, I can see how it makes a lot of sense for LeetCode to be compiling and comparing the code people submit without compiler optimisations. I have gathered a couple of simpler minimal examples that don&#39;t involve any complicated data structures and updated the question. Do you suppose lack of compiler optimisation might still be the cause of the issue?"}, {"owner": {"reputation": 1544, "user_id": 1536934, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/b289b3c15836cb88791f192c99d4b122?s=128&d=identicon&r=PG", "display_name": "baordog", "link": "https://stackoverflow.com/users/1536934/baordog"}, "edited": false, "score": 0, "creation_date": 1428600276, "post_id": 29523732, "comment_id": 47241547, "body": "@barnes53 and to all: Just to be clear, he&#39;s not benchmarking the code himself. He&#39;s submitting this code to a competitive coding website which gives him back it&#39;s own interpretation of what the codes timing is. I imagine they don&#39;t give him control over optimization options."}, {"owner": {"reputation": 79428, "user_id": 365496, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1397eae94e7fe715f040459c988c40b1?s=128&d=identicon&r=PG", "display_name": "bames53", "link": "https://stackoverflow.com/users/365496/bames53"}, "reply_to_user": {"reputation": 309, "user_id": 3284190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0edfcd17c09577e60803235d0820ec0c?s=128&d=identicon&r=PG&f=1", "display_name": "nwod", "link": "https://stackoverflow.com/users/3284190/nwod"}, "edited": false, "score": 0, "creation_date": 1428614056, "post_id": 29523732, "comment_id": 47249823, "body": "@nwod In those later examples optimization shouldn&#39;t make a difference, since the C++ is not using any abstraction beyond what the C version is doing. I&#39;m guessing that the explanation for this is that the examples are being compiled with different compilers or with some other different compiler options. Without knowing how the compilation is done I would say it makes no sense to compare these runtime numbers; it&#39;s clearly not an apples to apples comparison."}, {"owner": {"reputation": 309, "user_id": 3284190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0edfcd17c09577e60803235d0820ec0c?s=128&d=identicon&r=PG&f=1", "display_name": "nwod", "link": "https://stackoverflow.com/users/3284190/nwod"}, "edited": false, "score": 0, "creation_date": 1428747024, "post_id": 29523732, "comment_id": 47301636, "body": "@bames53 That&#39;s what I thought too but the LeetCode website gives you a plot of the run time distributions for all accepted solutions in all programming languages on the same graph, so the implication is that the comparison is valid. On the other hand, having used LeetCode for a few days now, I&#39;m becoming more and more convinced that there&#39;s a lot of corner cutting and roughness around the edges of that website..."}], "tags": [], "owner": {"reputation": 79428, "user_id": 365496, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1397eae94e7fe715f040459c988c40b1?s=128&d=identicon&r=PG", "display_name": "bames53", "link": "https://stackoverflow.com/users/365496/bames53"}, "is_accepted": true, "score": 43, "last_activity_date": 1428757057, "last_edit_date": 1495542227, "creation_date": 1428521486, "answer_id": 29523732, "question_id": 29522179, "link": "https://stackoverflow.com/questions/29522179/why-is-my-c-code-three-times-slower-than-the-c-equivalent-on-leetcode/29523732#29523732", "title": "Why is my C++ code three times slower than the C equivalent on LeetCode?", "body": "<p>Lately I've been seeing the <code>vector&lt;vector&lt;int&gt;&gt;</code> suggestion a lot for doing 2d arrays in C++, and I've been pointing out to people why this really isn't a good idea. It's a handy trick to know when slapping together temporary code, but there's (almost) never any reason to ever use it for real code. The <a href=\"https://stackoverflow.com/a/29055366/365496\">right thing to do</a> is to use a class that wraps a contiguous block of memory.</p>\n\n<p>So my first reaction might be to point to this as a possible source for the disparity. However you're also using <code>int**</code> in the C version, which is generally a sign of the exact same problem as <code>vector&lt;vector&lt;int&gt;&gt;</code>.</p>\n\n<p>So instead I decided to just compare the two solutions.</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/fa8441cc5baa0391\" rel=\"nofollow noreferrer\">http://coliru.stacked-crooked.com/a/fa8441cc5baa0391</a></p>\n\n<blockquote>\n  <p>6468424<br>\n  6588511</p>\n</blockquote>\n\n<p>That's the time taken by the 'C version' vs the 'C++ version' in nanoseconds.</p>\n\n<p>My results don't show anything like the disparity you describe. Then it occurred to me to check a common mistake people make when benchmarking</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/e57d791876b9252b\" rel=\"nofollow noreferrer\">http://coliru.stacked-crooked.com/a/e57d791876b9252b</a></p>\n\n<blockquote>\n  <p>18386695<br>\n  42400612</p>\n</blockquote>\n\n<p>Notice that the -O3 flag from the first example has become -O0, which disables optimization.</p>\n\n<p>Conclusion: you're probably comparing unoptimized executables.</p>\n\n<p>C++ supports building rich abstractions that don't require overhead, but eliminating the the overhead does require certain code transformations that play havoc with the 'debuggability' of code.</p>\n\n<p>That means debug builds avoid those transformations and therefore C++ debug builds are often slower than debug builds of C style code because C style code just doesn't use much abstraction. Seeing a 130% slowdown such as the above is not at all surprising when timing, for example, machine code that uses function calls in place of simple store instructions.</p>\n\n<hr>\n\n<p>Some code really needs optimizations in order to have reasonable performance even for debugging, so compilers often offer a mode that applies some optimizations which don't cause too much trouble for debuggers. Clang and gcc use <code>-O1</code> for this, and you can see that even this level of optimization essentially eliminates the gap in this program between C style code and the more C++ style code:</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/13967ebcfcfa4073\" rel=\"nofollow noreferrer\">http://coliru.stacked-crooked.com/a/13967ebcfcfa4073</a></p>\n\n<blockquote>\n  <p>8389992<br>\n  8196935</p>\n</blockquote>\n\n<hr>\n\n<p><strong>Update:</strong></p>\n\n<p>In those later examples optimization shouldn't make a difference, since the C++ is not using any abstraction beyond what the C version is doing. I'm guessing that the explanation for this is that the examples are being compiled with different compilers or with some other different compiler options. Without knowing how the compilation is done I would say it makes no sense to compare these runtime numbers; LeetCode is clearly not producing an apples to apples comparison.</p>\n"}], "owner": {"reputation": 309, "user_id": 3284190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0edfcd17c09577e60803235d0820ec0c?s=128&d=identicon&r=PG&f=1", "display_name": "nwod", "link": "https://stackoverflow.com/users/3284190/nwod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2662, "favorite_count": 3, "closed_date": 1428544279, "accepted_answer_id": 29523732, "answer_count": 2, "score": 11, "last_activity_date": 1594083628, "creation_date": 1428516495, "last_edit_date": 1594083628, "question_id": 29522179, "link": "https://stackoverflow.com/questions/29522179/why-is-my-c-code-three-times-slower-than-the-c-equivalent-on-leetcode", "closed_reason": "Not suitable for this site", "title": "Why is my C++ code three times slower than the C equivalent on LeetCode?", "body": "<p>I've been doing some of the <a href=\"http://leetcode.com/\" rel=\"nofollow\">LeetCode problems</a>, and I notice that the C solutions are a couple of times faster than the exact same thing in C++. For example:</p>\n\n<p><strong>Updated with a couple of simpler examples:</strong></p>\n\n<blockquote>\n  <p>Given a sorted array and a target value, return the index if the target is found. If not, return the index where it would be if it were inserted in order. You may assume no duplicates in the array. (<a href=\"http://leetcode.com/problems/search-insert-position/\" rel=\"nofollow\">Link to question on LeetCode</a>)</p>\n</blockquote>\n\n<p>My solution in C, runs in 3&nbsp;ms:</p>\n\n<pre><code>int searchInsert(int A[], int n, int target) {\n    int left = 0;\n    int right = n;\n    int mid = 0;\n    while (left&lt;right) {\n        mid = (left + right) / 2;\n        if (A[mid]&lt;target) {\n            left = mid + 1;\n        }\n        else if (A[mid]&gt;target) {\n            right = mid;\n        }\n        else {\n            return mid;\n        }\n    }\n    return left;\n}\n</code></pre>\n\n<p>My other C++ solution, exactly the same but as a member function of the Solution class runs in 13&nbsp;ms:</p>\n\n<pre><code>class Solution {\npublic:\n    int searchInsert(int A[], int n, int target) {\n        int left = 0;\n        int right = n;\n        int mid = 0;\n        while (left&lt;right) {\n            mid = (left + right) / 2;\n            if (A[mid]&lt;target) {\n                left = mid + 1;\n            }\n            else if (A[mid]&gt;target) {\n                right = mid;\n            }\n            else {\n                return mid;\n            }\n        }\n        return left;\n    }\n};\n</code></pre>\n\n<p>Even simpler example:</p>\n\n<blockquote>\n  <p>Reverse the digits of an integer. Return 0 if the result will overflow. (<a href=\"http://leetcode.com/problems/reverse-integer/\" rel=\"nofollow\">Link to question on LeetCode</a>)</p>\n</blockquote>\n\n<p>The C version runs in 6&nbsp;ms:</p>\n\n<pre><code>int reverse(int x) {\n    long rev = x % 10;\n    x /= 10;\n    while (x != 0) {\n        rev *= 10L;\n        rev += x % 10;\n        x /= 10;\n        if (rev&gt;(-1U &gt;&gt; 1) || rev &lt; (1 &lt;&lt; 31)) {\n            return 0;\n        }\n    }\n    return rev;\n}\n</code></pre>\n\n<p>And the C++ version is exactly the same but as a member function of the Solution class, and runs for 19&nbsp;ms:</p>\n\n<pre><code>class Solution {\npublic:\n    int reverse(int x) {\n        long rev = x % 10;\n        x /= 10;\n        while (x != 0) {\n            rev *= 10L;\n            rev += x % 10;\n            x /= 10;\n            if (rev&gt;(-1U &gt;&gt; 1) || rev &lt; (1 &lt;&lt; 31)) {\n                return 0;\n            }\n        }\n        return rev;\n    }\n};\n</code></pre>\n\n<p>I see how there would be considerable overhead from using vector of vector as a 2D array in the original example if the LeetCode testing system doesn't compile the code with optimisation enabled. But the simpler examples above shouldn't suffer that issue because the data structures are pretty raw, especially in the second case where all you have is long or integer arithmetics. That's still slower by a factor of three.</p>\n\n<p>I'm starting to think that there might be something odd happening with the way LeetCode do the benchmarking in general because even in the C version of the integer reversing problem you get a huge bump in running time from just replacing the line\n    if (rev>(-1U >> 1) || rev &lt; (1 &lt;&lt; 31)) {\nwith\n    if (rev>INT_MAX || rev &lt; INT_MIN) {</p>\n\n<p>Now, I suppose having to <code>#include&lt;limits.h&gt;</code> might have something to do with that but it seems a bit extreme that this simple change bumps the execution time from just 6&nbsp;ms to 19&nbsp;ms.</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "edited": false, "score": 2, "creation_date": 1428516435, "post_id": 29522079, "comment_id": 47198826, "body": "Make that <code>int x = 4;</code> and do <code>*num = (*num) * (*num);</code> (with some parentheses for clarity, or just do <code>*num *= *num</code>) inside the function. Not meant to sound snarky, but the best use of your time would probably be to find a basic reference on how pointers work, as you don&#39;t seem to have it down. They&#39;re not really something you can &quot;guess&quot; your way to."}, {"owner": {"reputation": 67, "user_id": 4760723, "user_type": "registered", "profile_image": "https://graph.facebook.com/966670813345225/picture?type=large", "display_name": "George Othen", "link": "https://stackoverflow.com/users/4760723/george-othen"}, "reply_to_user": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "edited": false, "score": 0, "creation_date": 1428516915, "post_id": 29522079, "comment_id": 47199144, "body": "I realise I can&#39;t guess my way through, I&#39;ve read a lot of material on it, I&#39;m just trying to get a better understanding through some exercises. This has been most eye opening."}, {"owner": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "edited": false, "score": 0, "creation_date": 1428517113, "post_id": 29522079, "comment_id": 47199257, "body": "This is a shameless self-plug, but maybe this answer could be helpful: <a href=\"http://stackoverflow.com/questions/29247824/when-changing-the-value-of-a-variable-in-c-is-a-new-primitive-created-or-is-the/29248076#29248076\" title=\"when changing the value of a variable in c is a new primitive created or is the\">stackoverflow.com/questions/29247824/&hellip;</a>. It&#39;s C contrasted with Java in that case, but it might be useful purely for understanding how C works too."}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 4760723, "user_type": "registered", "profile_image": "https://graph.facebook.com/966670813345225/picture?type=large", "display_name": "George Othen", "link": "https://stackoverflow.com/users/4760723/george-othen"}, "edited": false, "score": 0, "creation_date": 1428516577, "post_id": 29522125, "comment_id": 47198916, "body": "It still seems to have a problem with my *num = num * num; line. Giving me the 2nd error I described in OP"}, {"owner": {"reputation": 67, "user_id": 4760723, "user_type": "registered", "profile_image": "https://graph.facebook.com/966670813345225/picture?type=large", "display_name": "George Othen", "link": "https://stackoverflow.com/users/4760723/george-othen"}, "edited": false, "score": 0, "creation_date": 1428516796, "post_id": 29522125, "comment_id": 47199081, "body": "Thank you! why is void recommended?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 67, "user_id": 4760723, "user_type": "registered", "profile_image": "https://graph.facebook.com/966670813345225/picture?type=large", "display_name": "George Othen", "link": "https://stackoverflow.com/users/4760723/george-othen"}, "edited": false, "score": 0, "creation_date": 1428516868, "post_id": 29522125, "comment_id": 47199121, "body": "@GeorgeOthen it&#39;s the <code>C</code> standard. It makes sure no command line arguments are read by your application. :-)"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 3, "last_activity_date": 1428516379, "last_edit_date": 1428516379, "creation_date": 1428516316, "answer_id": 29522125, "question_id": 29522079, "link": "https://stackoverflow.com/questions/29522079/modify-code-to-pass-by-reference/29522125#29522125", "title": "Modify code to pass by reference", "body": "<p>You have to change</p>\n\n<pre><code> int* x = 4;\n</code></pre>\n\n<p>to</p>\n\n<pre><code> int x = 4;\n</code></pre>\n\n<p>because, <code>x</code> is of type <code>int</code> and <code>&amp;x</code> will be of type <code>int *</code>, which you need to pass to <code>square()</code>.</p>\n\n<p>Then, inside the <code>square()</code>, you need to use</p>\n\n<pre><code>*num = *num * *num;  //*num === type int, num == type int *\n</code></pre>\n\n<p>Note: it's recommended to use <code>int main(void)</code> as the function prototype.</p>\n"}], "owner": {"reputation": 67, "user_id": 4760723, "user_type": "registered", "profile_image": "https://graph.facebook.com/966670813345225/picture?type=large", "display_name": "George Othen", "link": "https://stackoverflow.com/users/4760723/george-othen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1428516379, "creation_date": 1428516165, "question_id": 29522079, "link": "https://stackoverflow.com/questions/29522079/modify-code-to-pass-by-reference", "title": "Modify code to pass by reference", "body": "<pre><code>void square(int num) {\nnum = num * num;\n}\n\nint main()\n{\nint x = 4;\nsquare(x);\nprintf(\"%d\\n\", x);\n}\n</code></pre>\n\n<p>I've been given this code, it's supposed to give answer '16' by squaring my integer 'x'.</p>\n\n<p>However, I've been asked to modify the code to \"pass by reference\".</p>\n\n<p>I've tried a fair few things here and there and can't see any other options to get this code running without errors such as \"invalid operands to binary\" or \"invalid type argument of 'unary *' \"</p>\n\n<p>this is what I've got currently:</p>\n\n<pre><code>void square(int* num) {\n     *num = num * num;\n}\n\nint main()\n{\n    int* x = 4;\n    square(&amp;x);\n    printf(\"%d\\n\", x);\n\n}\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["c", "multithreading", "pthreads", "ipc"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1428516352, "post_id": 29521928, "comment_id": 47198765, "body": "This is no C++ and bad formatted (Please fix the tags and dispaly)"}, {"owner": {"reputation": 80, "user_id": 4765093, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0daaa553bdeab5370830d351ee102e70?s=128&d=identicon&r=PG&f=1", "display_name": "tech_123", "link": "https://stackoverflow.com/users/4765093/tech-123"}, "edited": false, "score": 0, "creation_date": 1428516924, "post_id": 29521928, "comment_id": 47199147, "body": "Ok..I removed that tag"}], "answers": [{"comments": [{"owner": {"reputation": 80, "user_id": 4765093, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0daaa553bdeab5370830d351ee102e70?s=128&d=identicon&r=PG&f=1", "display_name": "tech_123", "link": "https://stackoverflow.com/users/4765093/tech-123"}, "edited": false, "score": 0, "creation_date": 1428518101, "post_id": 29522579, "comment_id": 47199856, "body": "But after change index=1 starting from loop I got same error..I can display 2 strings.but after that got segmentation problem.after using gdb ..my argv[index] is null when reaching index is last string..so can&#39;t find string length and allocation..."}, {"owner": {"reputation": 38119, "user_id": 3959454, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4d3d3eb6143879550d0e5bd67a6bf647?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Savin", "link": "https://stackoverflow.com/users/3959454/anton-savin"}, "reply_to_user": {"reputation": 80, "user_id": 4765093, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0daaa553bdeab5370830d351ee102e70?s=128&d=identicon&r=PG&f=1", "display_name": "tech_123", "link": "https://stackoverflow.com/users/4765093/tech-123"}, "edited": false, "score": 0, "creation_date": 1428518266, "post_id": 29522579, "comment_id": 47199959, "body": "@roger the problem is not in the loop, I made my answer clearer"}], "tags": [], "owner": {"reputation": 38119, "user_id": 3959454, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4d3d3eb6143879550d0e5bd67a6bf647?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Savin", "link": "https://stackoverflow.com/users/3959454/anton-savin"}, "is_accepted": true, "score": 1, "last_activity_date": 1428518222, "last_edit_date": 1428518222, "creation_date": 1428517755, "answer_id": 29522579, "question_id": 29521928, "link": "https://stackoverflow.com/questions/29521928/segmentation-fault-occur-on-thread-program/29522579#29522579", "title": "segmentation fault occur on thread program", "body": "<pre><code>pthread_t id[index];\n</code></pre>\n\n<p><code>id</code> has zero length because <code>index == 0</code>. So any assignment to its elements is undefined behavior. Initialize the array with some positive length, e.g:</p>\n\n<pre><code>const int MAX_THREADS = 10;\npthread_t id[MAX_THREADS];  /*thread identifier*/\n</code></pre>\n"}], "owner": {"reputation": 80, "user_id": 4765093, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0daaa553bdeab5370830d351ee102e70?s=128&d=identicon&r=PG&f=1", "display_name": "tech_123", "link": "https://stackoverflow.com/users/4765093/tech-123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 29522579, "answer_count": 1, "score": -1, "last_activity_date": 1428518222, "creation_date": 1428515748, "last_edit_date": 1428517886, "question_id": 29521928, "link": "https://stackoverflow.com/questions/29521928/segmentation-fault-occur-on-thread-program", "title": "segmentation fault occur on thread program", "body": "<p>I am new in thread program. I wrote a C program for executing threads which reverse the command line string and print the both original and reversed string. My program is here:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;unistd.h&gt;\n#include&lt;sys/types.h&gt;\n#include&lt;pthread.h&gt;\n#include&lt;string.h&gt;\n\ntypedef struct\n{\n    char *input_string;\n    char *rev_string;\n}data;\n\nvoid* rev_string(void* arg)\n{\n    int len = 0,index1 = 0,\n    index2 = 0;\n    data* names = NULL; /*bject creation*/\n    names = (data*)malloc(sizeof(data));\n    if( NULL == names)\n    {\n        printf(\"malloc failure\\n\");\n        exit(1);\n    }\n    printf(\"thread recvd  = %s\\n\",(char*)arg);\n    len = strlen((char*)arg);\n    names-&gt;input_string = (char*)malloc(sizeof(char)*(len+1));\n    if( NULL == names-&gt;input_string)\n    {\n        printf(\"malloc failure\\n\");\n        exit(1);\n    }\n    strncpy(names-&gt;input_string,(char*)arg,len); /*copying input_string to the struct*/\n    names-&gt;rev_string = (char*)malloc(sizeof(char)*(len+1));\n    if( NULL == names-&gt;rev_string)\n    {\n        printf(\"malloc failure\\n\");\n        exit(1);\n    }\n\n    for(index1 = len-1 ; index1 &gt;= 0 ; index1--)\n    {\n        names-&gt;rev_string[index2] = names-&gt;input_string[index1];\n        index2++;\n    }\n\n\n    pthread_exit((void*)names);\n}\n</code></pre>\n\n<p>Main program:</p>\n\n<pre><code>int main(int argc,char* argv[])\n{\n    int no_of_strings = 0,\n        len = 0,\n        status = 0,\n        ret = 0 ,\n        index = 0;\n\n    pthread_t id[index];  /*thread identifier*/\n    void* retval = NULL; /*retval to store the value returned by thread job */\n\n    data *strings = NULL;/*object creation*/\n\n    if(1 &gt;= argc)\n    {\n        printf(\" please do enter the commands as of below shown format\\n\");\n        printf(\"&lt;exe.c&gt; &lt;string1&gt; &lt;string2&gt; ...&lt;string(N)&gt;\\n\");\n        exit(1);\n    }\n    no_of_strings = argc - 1 ; /* no of strings entered */\n    /*creation of threads*/\n    for(index = 0; index &lt; no_of_strings ;index++)\n    {\n        status = pthread_create(&amp;id[index],NULL,rev_string,(void*)argv[index + 1]);\n\n        if(status != 0)\n        {\n            printf(\"ERROR in creating thread\\n\");\n            exit(1);\n        }\n\n        else\n        {\n            printf(\"thread %d created\\n\",index+1);         }\n\n    }\n\n    for(index = 0 ;index &lt; no_of_strings;index++)\n    {\n        ret = pthread_join(id[index],&amp;retval);\n        if(ret)\n        {\n            printf(\"Error in joining %d\\n\", ret);\n            exit(1);\n        }\n\n        printf(\"the input_string = %s and its reverse = %s\\n\",((data*)retval)-&gt;input_string,((data*)retval)-&gt;rev_string);\n\n    }\n\n    //      free(retval-&gt;input_string);\n    //      free(retval-&gt;rev_string);\n    //      free(retval);\n\n    pthread_exit(NULL);\n    exit(0);\n}\n</code></pre>\n\n<p>It works on 2 string from command line argument. But got segmentation fault when more than strings. Why? Any errors? Help me.</p>\n"}, {"tags": ["c", "arrays", "sizeof"], "comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 6, "creation_date": 1428515051, "post_id": 29521648, "comment_id": 47198047, "body": "Trying to be clever? <code>sizeof</code> is unsigned, hence the comparison <code>i &lt; sizeof(...)</code> will compare a huge unsigned number (namely -1 as unsigned) with a small number, which is false. You should have gotten a warning."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1428515157, "post_id": 29521648, "comment_id": 47198101, "body": "You&#39;re lucky the loop doesn&#39;t run the way you would like it to, because then you would have <a href=\"http://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><i>undefined behavior</i></a> as the index would have gone out of bounds of the array."}, {"owner": {"reputation": 139, "user_id": 4187022, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4bd4ac601ae398d722164559391968df?s=128&d=identicon&r=PG&f=1", "display_name": "Rajesh Sethi", "link": "https://stackoverflow.com/users/4187022/rajesh-sethi"}, "edited": false, "score": 2, "creation_date": 1428515784, "post_id": 29521648, "comment_id": 47198443, "body": "but when i put 5 in place of &quot;(sizeof(array)/sizeof(array[0]))&quot; in loop it prints the array.."}, {"owner": {"reputation": 139, "user_id": 4187022, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4bd4ac601ae398d722164559391968df?s=128&d=identicon&r=PG&f=1", "display_name": "Rajesh Sethi", "link": "https://stackoverflow.com/users/4187022/rajesh-sethi"}, "edited": false, "score": 1, "creation_date": 1428516060, "post_id": 29521648, "comment_id": 47198615, "body": "yes it printed 1 2 3 4 5 6"}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 3, "last_activity_date": 1428515406, "last_edit_date": 1428515406, "creation_date": 1428515054, "answer_id": 29521697, "question_id": 29521648, "link": "https://stackoverflow.com/questions/29521648/why-the-following-code-doesnt-print-anything/29521697#29521697", "title": "Why the following code doesn&#39;t print anything ..?", "body": "<p>You are not using the array index properly. With your current code, you'll be overrunning the array bound, producing <a href=\"http://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behavior</a>. Remember, array index in <code>c</code> is <code>0</code> based, meaning an array defined as <code>arr[n]</code> will have valid index from <code>arr[0]</code> to <code>arr[n-1]</code>.</p>\n\n<p>That said, please keep in mind, <code>sizeof</code> operator returns a <code>size_t</code> which is usually <code>unsigned</code> type. So, the comparison of <code>signed</code> and <code>unsigned</code> will produce weird behavior.</p>\n\n<p>Change your code to</p>\n\n<pre><code>int size = sizeof(array) / sizeof(array[0]);\nfor(i = 0; i &lt; size; i++)\nprintf(\"%d\\n\", array[i]); \n</code></pre>\n"}], "owner": {"reputation": 139, "user_id": 4187022, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4bd4ac601ae398d722164559391968df?s=128&d=identicon&r=PG&f=1", "display_name": "Rajesh Sethi", "link": "https://stackoverflow.com/users/4187022/rajesh-sethi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1428515808, "creation_date": 1428514912, "last_edit_date": 1428515808, "question_id": 29521648, "link": "https://stackoverflow.com/questions/29521648/why-the-following-code-doesnt-print-anything", "title": "Why the following code doesn&#39;t print anything ..?", "body": "<p>Why doesn't the following code doesn't output anything?</p>\n\n<pre><code>#include&lt;string.h&gt;\n#include&lt;stdio.h&gt;\nint array[] = {1, 2, 3, 4, 5, 6, 7};\nint main()\n{\n    int i;\n    for(i = -1; i &lt;= (sizeof(array)/sizeof(array[0])); i++)\n        printf(\"%d\\n\", array[i+1]); \n    return 0;\n}\n</code></pre>\n"}, {"tags": ["mysql", "c", "database", "sqlite"], "comments": [{"owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1428519991, "post_id": 29521498, "comment_id": 47200963, "body": "What do you expect to gain from reopening the database? Also, read <a href=\"http://www.sqlite.org/whentouse.html\" rel=\"nofollow noreferrer\">appropriate uses for SQLite</a>."}, {"owner": {"reputation": 157, "user_id": 752602, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ef59d360c998387a3cfd63a991f8ca8?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/752602/daniel"}, "reply_to_user": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1428527666, "post_id": 29521498, "comment_id": 47205246, "body": "I&#39;m just curious if having a handler of the db open all the time and only closing it when I exit the program is a good practice."}, {"owner": {"reputation": 157, "user_id": 752602, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ef59d360c998387a3cfd63a991f8ca8?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/752602/daniel"}, "reply_to_user": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1428527721, "post_id": 29521498, "comment_id": 47205273, "body": "Also would it drastically decrease speed if I reopen the connection for every access I have to the database?"}, {"owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1428528408, "post_id": 29521498, "comment_id": 47205619, "body": "Whether something is good practice is somewhat subjective. As for speed, you have to measure yourself."}], "owner": {"reputation": 157, "user_id": 752602, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ef59d360c998387a3cfd63a991f8ca8?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/752602/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1428514423, "creation_date": 1428514423, "question_id": 29521498, "link": "https://stackoverflow.com/questions/29521498/is-having-a-database-handle-open-through-the-whole-runtime-good-practice", "title": "Is having a database handle open through the whole runtime good practice?", "body": "<p>I did some research and may have missed better keywords for what I want to find out:</p>\n\n<ul>\n<li>Is it good practice to have something like a init_db() function that gives me a handler of the database at startup of a program and then close it when I exit the application.</li>\n</ul>\n\n<p>Maybe to put more context: I'm trying to build a server executable in C, that should (in the best case) run non-stop / until updated, accessing a SQLite db.</p>\n\n<ul>\n<li>Also at what scale should I change from SQLite to MySQL. Maybe transactions per minute or size of db. Is there any chart for this?</li>\n</ul>\n\n<p>Thanks!</p>\n"}, {"tags": ["c", "byte", "md5"], "answers": [{"comments": [{"owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "reply_to_user": {"reputation": 1339, "user_id": 2419822, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/DWBfd.png?s=128&g=1", "display_name": "Bakus123", "link": "https://stackoverflow.com/users/2419822/bakus123"}, "edited": false, "score": 0, "creation_date": 1428514878, "post_id": 29521586, "comment_id": 47197939, "body": "@Bakus123: what is value of <code>size</code>?"}, {"owner": {"reputation": 1339, "user_id": 2419822, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/DWBfd.png?s=128&g=1", "display_name": "Bakus123", "link": "https://stackoverflow.com/users/2419822/bakus123"}, "edited": false, "score": 0, "creation_date": 1428514935, "post_id": 29521586, "comment_id": 47197974, "body": "Size = message length (from 1 to 10). It&#39;s integer."}, {"owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "reply_to_user": {"reputation": 1339, "user_id": 2419822, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/DWBfd.png?s=128&g=1", "display_name": "Bakus123", "link": "https://stackoverflow.com/users/2419822/bakus123"}, "edited": false, "score": 0, "creation_date": 1428515114, "post_id": 29521586, "comment_id": 47198079, "body": "@Bakus123: I am sorry the question as it stands now I don&#39;t exactly understand what you want to achieve. btw md5 output length is 16 bytes; if you can make it more clear .."}, {"owner": {"reputation": 1339, "user_id": 2419822, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/DWBfd.png?s=128&g=1", "display_name": "Bakus123", "link": "https://stackoverflow.com/users/2419822/bakus123"}, "edited": false, "score": 0, "creation_date": 1428515388, "post_id": 29521586, "comment_id": 47198236, "body": "I want create 512bit block where first bits = message, next is 0x80 and zeros until 448 bit and next(last bits) = message length."}, {"owner": {"reputation": 1339, "user_id": 2419822, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/DWBfd.png?s=128&g=1", "display_name": "Bakus123", "link": "https://stackoverflow.com/users/2419822/bakus123"}, "edited": false, "score": 0, "creation_date": 1428519456, "post_id": 29521586, "comment_id": 47200662, "body": "How can I do the same using bitwise operators (I use little endian)? Because i write program on GPU and I&#39;m not sure if memory references it&#39;s good idea for me..."}, {"owner": {"reputation": 1339, "user_id": 2419822, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/DWBfd.png?s=128&g=1", "display_name": "Bakus123", "link": "https://stackoverflow.com/users/2419822/bakus123"}, "edited": false, "score": 0, "creation_date": 1428519524, "post_id": 29521586, "comment_id": 47200702, "body": "In your code I get error - &quot;subscript out of range&quot;"}, {"owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "reply_to_user": {"reputation": 1339, "user_id": 2419822, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/DWBfd.png?s=128&g=1", "display_name": "Bakus123", "link": "https://stackoverflow.com/users/2419822/bakus123"}, "edited": false, "score": 1, "creation_date": 1428519668, "post_id": 29521586, "comment_id": 47200773, "body": "@Bakus123: please check that link for endianness I gave. about out of range that should not happen your buffer is 64 bytes so there should be space for 8 more bytes. please look at how memcpy is used also"}, {"owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "reply_to_user": {"reputation": 1339, "user_id": 2419822, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/DWBfd.png?s=128&g=1", "display_name": "Bakus123", "link": "https://stackoverflow.com/users/2419822/bakus123"}, "edited": false, "score": 0, "creation_date": 1428520413, "post_id": 29521586, "comment_id": 47201224, "body": "@Bakus123:I added another link about endianness in answer"}, {"owner": {"reputation": 1339, "user_id": 2419822, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/DWBfd.png?s=128&g=1", "display_name": "Bakus123", "link": "https://stackoverflow.com/users/2419822/bakus123"}, "edited": false, "score": 0, "creation_date": 1428521139, "post_id": 29521586, "comment_id": 47201634, "body": "Thx for link. I received error: &quot;subscript out of range&quot; because I had buffer[8]. But I have one problem yet. When I use uint8_t <i>bytes = (uint8_t</i>)malloc(64); it works but when I use uint8_t bytes[64]; it doesn&#39;t works. What is different? I prefer second way because og GPU I shouldn&#39;t use malloc."}, {"owner": {"reputation": 1339, "user_id": 2419822, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/DWBfd.png?s=128&g=1", "display_name": "Bakus123", "link": "https://stackoverflow.com/users/2419822/bakus123"}, "edited": false, "score": 0, "creation_date": 1428521301, "post_id": 29521586, "comment_id": 47201726, "body": "I get wrong MD5 hash.I&#39;m checking it accurately now."}, {"owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "reply_to_user": {"reputation": 1339, "user_id": 2419822, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/DWBfd.png?s=128&g=1", "display_name": "Bakus123", "link": "https://stackoverflow.com/users/2419822/bakus123"}, "edited": false, "score": 0, "creation_date": 1428521377, "post_id": 29521586, "comment_id": 47201773, "body": "@Bakus123: It really should not have to do with whether you allocate it as pointer (first example) or on the stack(uint8_t bytes[64]); usage is mostly similar"}, {"owner": {"reputation": 1339, "user_id": 2419822, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/DWBfd.png?s=128&g=1", "display_name": "Bakus123", "link": "https://stackoverflow.com/users/2419822/bakus123"}, "edited": false, "score": 0, "creation_date": 1428521795, "post_id": 29521586, "comment_id": 47202030, "body": "I made pritf in loop and in case without malloc on 61 and 62 bits are values other tan 0 but I don&#39;t know why... the rest is the same"}, {"owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "reply_to_user": {"reputation": 1339, "user_id": 2419822, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/DWBfd.png?s=128&g=1", "display_name": "Bakus123", "link": "https://stackoverflow.com/users/2419822/bakus123"}, "edited": false, "score": 0, "creation_date": 1428521835, "post_id": 29521586, "comment_id": 47202053, "body": "@Bakus123: really can&#39;t tell maybe you can ask other question about that; but like I said their usage is mostly similar you should not get that difference"}], "tags": [], "owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "is_accepted": true, "score": 1, "last_activity_date": 1428520389, "last_edit_date": 1495540613, "creation_date": 1428514677, "answer_id": 29521586, "question_id": 29521436, "link": "https://stackoverflow.com/questions/29521436/md5-add-message-length/29521586#29521586", "title": "MD5 - add message length", "body": "<p>You declared <code>buffer</code> of length 8, how come you expect this to work:</p>\n\n<pre><code>for (int i = size + 1; i &lt; 56; i++)\n    buffer[i] = 0;\n</code></pre>\n\n<p>Out of bounds access?</p>\n\n<p>Ok you said from 56th element you want to store length. Why not\ndo something like this:</p>\n\n<pre><code>memcpy(&amp;buffer[56], &amp;length, sizeof(int)); // you may want to check sizeof(int) on your machine to know how many bytes were written\n</code></pre>\n\n<p>but you should be careful about endianness. This will write the <code>length</code> according to the endianness your machine has. If you want to store it in some particular endianness maybe you can do it manually using bit wise operators. Check some more info <a href=\"https://stackoverflow.com/questions/544928/reading-integer-size-bytes-from-a-char-array\">here</a>, and <a href=\"https://stackoverflow.com/questions/22400511/convert-int-to-char-array-big-endian\">here</a></p>\n\n<p>If you want <code>length</code> to have fixed size, you can declare it as <code>uint32_t</code> and use 4 as last parameter in <code>memcpy</code> directly.</p>\n"}], "owner": {"reputation": 1339, "user_id": 2419822, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/DWBfd.png?s=128&g=1", "display_name": "Bakus123", "link": "https://stackoverflow.com/users/2419822/bakus123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 29521586, "answer_count": 1, "score": 0, "last_activity_date": 1428520389, "creation_date": 1428514223, "last_edit_date": 1428516492, "question_id": 29521436, "link": "https://stackoverflow.com/questions/29521436/md5-add-message-length", "title": "MD5 - add message length", "body": "<p>I would like to create block for MD5 algorithm. This is my code:</p>\n\n<pre><code>uint8_t buffer[64];\nfor (int i = size + 1; i &lt; 56; i++)\n    buffer[i] = 0;\n</code></pre>\n\n<p>But I don't know how can I add message length on the last 64bits. Any idea?</p>\n"}, {"tags": ["c", "file", "output", "fwrite"], "comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1428514381, "post_id": 29521433, "comment_id": 47197630, "body": "What is this <code>sleep</code> function that you&#39;re calling with no arguments?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1428514424, "post_id": 29521433, "comment_id": 47197650, "body": "What the ... <code>while (1) { if (head &gt; tail) break; ... }</code> is it that you like to use <code>break</code> even when you don&#39;t need it? why don&#39;t you just <code>while (head &lt;= tail)</code>? And mixing declarations with code is not nice in c, it&#39;s necessary in c++ and it&#39;s one of the reasons I think c++ code is harder to understand."}, {"owner": {"reputation": 43, "user_id": 4674230, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/45300e0f14d614861f77b93eda81f381?s=128&d=identicon&r=PG&f=1", "display_name": "geforce", "link": "https://stackoverflow.com/users/4674230/geforce"}, "edited": false, "score": 0, "creation_date": 1428514694, "post_id": 29521433, "comment_id": 47197813, "body": "sleep() just makes the thread sleep for 1 - 0.01 seconds"}, {"owner": {"reputation": 43, "user_id": 4674230, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/45300e0f14d614861f77b93eda81f381?s=128&d=identicon&r=PG&f=1", "display_name": "geforce", "link": "https://stackoverflow.com/users/4674230/geforce"}, "edited": false, "score": 0, "creation_date": 1428514733, "post_id": 29521433, "comment_id": 47197842, "body": "This isn&#39;t a final copy of my code, I am trying to fix a different problem which is output of my file not my loop condition. I left the break statement there because I will later go back and fix it ."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1428518919, "post_id": 29521433, "comment_id": 47200360, "body": "@geforce, it would be wiser to choose function names that do not conflict with library function names.  <code>sleep()</code> is a POSIX-standardized function, but the POSIX version take the time to sleep (in seconds) as an argument."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1428519352, "post_id": 29521433, "comment_id": 47200590, "body": "@geforce, Have you considered looking at the output file in a hex editor to determine what it actually does contain?  That might give you a hint about what&#39;s going on.  My guess, though, would be that you never write anything into the file at offset 0 (but do write at higher offsets), so that when you&#39;re done, the file starts with one or more null bytes where you never wrote anything."}, {"owner": {"reputation": 43, "user_id": 4674230, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/45300e0f14d614861f77b93eda81f381?s=128&d=identicon&r=PG&f=1", "display_name": "geforce", "link": "https://stackoverflow.com/users/4674230/geforce"}, "edited": false, "score": 0, "creation_date": 1428535644, "post_id": 29521433, "comment_id": 47208442, "body": "I checked the file using a hex editor called Frhed and it shows about 2 letters printed which is &#39;MI&#39; and the rest it shows dots. What would this mean?"}, {"owner": {"reputation": 43, "user_id": 4674230, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/45300e0f14d614861f77b93eda81f381?s=128&d=identicon&r=PG&f=1", "display_name": "geforce", "link": "https://stackoverflow.com/users/4674230/geforce"}, "edited": false, "score": 0, "creation_date": 1428561206, "post_id": 29521433, "comment_id": 47216111, "body": "How would I be able to make sure offset 0 is written in and other ones also?"}], "answers": [{"tags": [], "owner": {"reputation": 79, "user_id": 4107638, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-AQR0KKfSnLg/AAAAAAAAAAI/AAAAAAAAB3I/cn28_X4a8Jg/photo.jpg?sz=128", "display_name": "Stewart Grant", "link": "https://stackoverflow.com/users/4107638/stewart-grant"}, "is_accepted": false, "score": 0, "last_activity_date": 1428556775, "creation_date": 1428556775, "answer_id": 29530337, "question_id": 29521433, "link": "https://stackoverflow.com/questions/29521433/issue-writing-to-filenot-recognized-as-readable-file-in-c/29530337#29530337", "title": "Issue writing to file(not recognized as readable file) in C", "body": "<p>My first instinct would be that you are not closing your file properly. Try adding a block of code to the end of your execution that both flushes and closes your file descriptor.</p>\n\n<pre><code>fflush(file_out);\nfclose(file_out);\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 4674230, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/45300e0f14d614861f77b93eda81f381?s=128&d=identicon&r=PG&f=1", "display_name": "geforce", "link": "https://stackoverflow.com/users/4674230/geforce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 121, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1428556775, "creation_date": 1428514210, "question_id": 29521433, "link": "https://stackoverflow.com/questions/29521433/issue-writing-to-filenot-recognized-as-readable-file-in-c", "title": "Issue writing to file(not recognized as readable file) in C", "body": "<p>Any idea why it is not printing each char into my output file? When I check my output file is displays this message </p>\n\n<p>\"gedit has not been able to detect the character coding.\nPlease check that you are not trying to open a binary file.\nSelect a character coding from the menu and try again.\" with utf-8 encoding</p>\n\n<p>Is this possibly because a bad character or null character was written into the output file?</p>\n\n<p>Because when I checked each char before it is written it is not null and matches the encoding.      </p>\n\n<pre><code> void *OUTgroup(void *arg)\n {     \n   sleep();\n\n   printf(\"OUT Thread working\\n\");\n   while(1)\n   {\n      if(head &gt; tail)\n        break;\n\n      if(isEmpty())\n        sleep(); \n\n       BufferItem item = readItem();\n\n\n       writeFile(item.data, item.offset);\n\n        sleep();\n   }\n\n   pthread_exit(0);\n }\n\n\nvoid writeFile(char data, off_t offset)\n{\n   pthread_mutex_lock(&amp;lock);\n\n   /********* CRITICAL SECTION *********/\n   if(fseek(file_out, offset, SEEK_SET) == -1)\n   {\n      printf(\"Did not successfully find position to output\\n\");\n      exit(0);\n   }\n   if(fputc(data, file_out) == EOF) \n   {\n     printf(\"Did not successfully write byte to output\\n\");\n     exit(0);\n   }\n   /********* CRITICAL SECTION *********/\n  pthread_mutex_unlock(&amp;lock);\n}\n</code></pre>\n"}, {"tags": ["c", "for-loop", "matrix"], "comments": [{"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 5, "creation_date": 1428513883, "post_id": 29521272, "comment_id": 47197331, "body": "How is <code>matrix</code> declared? Please post a complete, compilable, example."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 1, "creation_date": 1428513927, "post_id": 29521272, "comment_id": 47197351, "body": "Why don&#39;t you print the whole matrix, complete with indices?"}, {"owner": {"reputation": 1459, "user_id": 669567, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/VOmJA.jpg?s=128&g=1", "display_name": "holgac", "link": "https://stackoverflow.com/users/669567/holgac"}, "edited": false, "score": 1, "creation_date": 1428514132, "post_id": 29521272, "comment_id": 47197474, "body": "<code>int matrix[1][1];</code> is wrong. You need [2][2] instead. In array declaration, you need to specify actual size (which is 2)."}, {"owner": {"reputation": 899, "user_id": 4303296, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/211bac632ae1c8bb299a05019e25ff15?s=128&d=identicon&r=PG&f=1", "display_name": "Beko", "link": "https://stackoverflow.com/users/4303296/beko"}, "edited": false, "score": 0, "creation_date": 1428514225, "post_id": 29521272, "comment_id": 47197532, "body": "Also, don&#39;t use numbers in your array declaration. Either define them as const variables, or as macros, so that you can write <code>int matrix[N][M]</code> for example. This is considered better design as it allows you to be more flexible and it&#39;s less error prone once you have to undergo changes."}], "answers": [{"comments": [{"owner": {"reputation": 155, "user_id": 3539833, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/18e24c34a2d9ce257197af6a7b7fe4cd?s=128&d=identicon&r=PG&f=1", "display_name": "LearningCODE", "link": "https://stackoverflow.com/users/3539833/learningcode"}, "edited": false, "score": 0, "creation_date": 1428537705, "post_id": 29521388, "comment_id": 47209055, "body": "may i ask why people down vote my answers? Is it my format of answering ?"}], "tags": [], "owner": {"reputation": 155, "user_id": 3539833, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/18e24c34a2d9ce257197af6a7b7fe4cd?s=128&d=identicon&r=PG&f=1", "display_name": "LearningCODE", "link": "https://stackoverflow.com/users/3539833/learningcode"}, "is_accepted": false, "score": -1, "last_activity_date": 1428514332, "last_edit_date": 1428514332, "creation_date": 1428514053, "answer_id": 29521388, "question_id": 29521272, "link": "https://stackoverflow.com/questions/29521272/c-filling-a-matrix/29521388#29521388", "title": "C: Filling a matrix", "body": "<p>It seems as if its working for me, and it looks correct.\ntry declaring matrix like <code>matrix [2][2];</code></p>\n\n<p>When I run it, I enter <code>1,2,3,4</code> printing <code>matrix [0][1]</code>, yields 2. \nwhich is correct.</p>\n"}, {"tags": [], "owner": {"reputation": 29810, "user_id": 423170, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/H9kNQ.png?s=128&g=1", "display_name": "Frxstrem", "link": "https://stackoverflow.com/users/423170/frxstrem"}, "is_accepted": false, "score": 4, "last_activity_date": 1428514363, "last_edit_date": 1428514363, "creation_date": 1428514089, "answer_id": 29521398, "question_id": 29521272, "link": "https://stackoverflow.com/questions/29521272/c-filling-a-matrix/29521398#29521398", "title": "C: Filling a matrix", "body": "<p>You need to declare your matrix to be a 2&times;2 matrix:</p>\n\n<pre><code>int matrix[2][2];\n</code></pre>\n\n<p>When declaring a matrix, the numbers declare the size of the matrix, not its highest index (which is always one less than the size).</p>\n"}, {"comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1428514553, "post_id": 29521404, "comment_id": 47197726, "body": "@iharob thanks. What black magic have you used for this symbol? :)"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1428515036, "post_id": 29521404, "comment_id": 47198035, "body": "It&#39;s a html <code>&amp;times;</code>, I know it from writing cross products when doing physics homework."}], "tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": false, "score": 1, "last_activity_date": 1428514251, "last_edit_date": 1428514251, "creation_date": 1428514119, "answer_id": 29521404, "question_id": 29521272, "link": "https://stackoverflow.com/questions/29521272/c-filling-a-matrix/29521404#29521404", "title": "C: Filling a matrix", "body": "<p>the declaration \n<code>int matrix[1][1];</code></p>\n\n<p>is declaring 1&times;1 array. But you work with it as 2&times;2. Replace it by <code>int matrix[2][2];</code></p>\n"}, {"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 2, "last_activity_date": 1428514210, "creation_date": 1428514210, "answer_id": 29521434, "question_id": 29521272, "link": "https://stackoverflow.com/questions/29521272/c-filling-a-matrix/29521434#29521434", "title": "C: Filling a matrix", "body": "<p>It appears that you are confisuing indexing with allocation, </p>\n\n<pre><code>int matrix[1][1]\n</code></pre>\n\n<p>allocates a 1&times;1 matrix, and</p>\n\n<pre><code>int matrix[2][2]\n</code></pre>\n\n<p>allocates a 2&times;2 matrix where the <code>matrix[1][1]</code> is the actual <em>M</em><sub>2,2</sub> element of the matrix, because the index of the <em>first-row,first-column</em> is <em>0,0</em>.</p>\n"}], "owner": {"reputation": 53, "user_id": 4469865, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1c073b7956770e5888fa044fa470ef99?s=128&d=identicon&r=PG&f=1", "display_name": "Narlok", "link": "https://stackoverflow.com/users/4469865/narlok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5914, "favorite_count": 0, "accepted_answer_id": 29521434, "answer_count": 4, "score": 0, "last_activity_date": 1428514363, "creation_date": 1428513644, "last_edit_date": 1428514028, "question_id": 29521272, "link": "https://stackoverflow.com/questions/29521272/c-filling-a-matrix", "title": "C: Filling a matrix", "body": "<p>I'm trying to fill a matrix with a for loop, however I'm coming up with a problem where any two coordinates x_0 and y_0 are interchangeable. To emphasize the problem I've simplified it down to the most basic example:</p>\n\n<p>I'm filling the following 2x2 matrix and having it print the value at 1,2 (Or [0][1] within the array):</p>\n\n<pre><code>int matrix[1][1];\n\n for(j=0; j&lt;2; j++){\n   for(i=0; i&lt;2; ++i){\n        scanf(\"%d\", &amp;matrix[j][i]);\n   }\n}\n\nprintf(\"%d \\n\", matrix[0][1]);\n</code></pre>\n\n<p>However it always returns the value which is entered third, or [1][0]. I originally thought I might have messed up my for loop, but printing matrix[1][0] returns the same (although here appropriate value).</p>\n\n<p>Thank you for any help</p>\n\n<p>Edit: Added declaration. </p>\n"}, {"tags": ["c", "arrays", "string", "char", "printf"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1428513594, "post_id": 29521192, "comment_id": 47197167, "body": "<code>for(int i=0;i &lt; 10; ++i) printf( &quot;digit %d : %d\\n&quot;, i, digits[i]);</code>"}, {"owner": {"reputation": 360, "user_id": 4393375, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/4HnA9.png?s=128&g=1", "display_name": "jimo", "link": "https://stackoverflow.com/users/4393375/jimo"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1428514120, "post_id": 29521192, "comment_id": 47197464, "body": "I want to make it work using &#39;char&#39; and &#39;%s&#39; and it is giving me repeated printing of &#39;digits:&#39; when I am running it"}], "answers": [{"comments": [{"owner": {"reputation": 360, "user_id": 4393375, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/4HnA9.png?s=128&g=1", "display_name": "jimo", "link": "https://stackoverflow.com/users/4393375/jimo"}, "edited": false, "score": 0, "creation_date": 1428513960, "post_id": 29521265, "comment_id": 47197375, "body": "Sorry there was a typo in the code, it is &#39;char&#39; not &#39;int&#39;, and I am still getting an error, as mentioned in my question."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 360, "user_id": 4393375, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/4HnA9.png?s=128&g=1", "display_name": "jimo", "link": "https://stackoverflow.com/users/4393375/jimo"}, "edited": false, "score": 0, "creation_date": 1428514159, "post_id": 29521265, "comment_id": 47197490, "body": "@diplodocus Please do not change the question in a way that make the existing answer appear wrong."}, {"owner": {"reputation": 360, "user_id": 4393375, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/4HnA9.png?s=128&g=1", "display_name": "jimo", "link": "https://stackoverflow.com/users/4393375/jimo"}, "edited": false, "score": 0, "creation_date": 1428514732, "post_id": 29521265, "comment_id": 47197841, "body": "I know the difference you mentioned in your recent edit, but how is that causing the problem? Repeated values of &#39;digits:&#39;, where is the link?"}, {"owner": {"reputation": 360, "user_id": 4393375, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/4HnA9.png?s=128&g=1", "display_name": "jimo", "link": "https://stackoverflow.com/users/4393375/jimo"}, "edited": false, "score": 0, "creation_date": 1428514868, "post_id": 29521265, "comment_id": 47197933, "body": "So there is no other way than going the &#39;int&#39; way here?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 360, "user_id": 4393375, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/4HnA9.png?s=128&g=1", "display_name": "jimo", "link": "https://stackoverflow.com/users/4393375/jimo"}, "edited": false, "score": 1, "creation_date": 1428514898, "post_id": 29521265, "comment_id": 47197951, "body": "@diplodocus you cannot use <code>%s</code>, use a for loop and use <code>%d</code>."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 1, "last_activity_date": 1428514868, "last_edit_date": 1428514868, "creation_date": 1428513630, "answer_id": 29521265, "question_id": 29521192, "link": "https://stackoverflow.com/questions/29521192/error-in-printing-a-string/29521265#29521265", "title": "Error in printing a string", "body": "<p>In your code, <code>digits</code> is an arry of type <code>int</code>. You cannot use <code>%s</code> format specifier to print an <code>int</code> array. You've to print the elements one-by-one using a loop using <code>%d</code> format specifier.</p>\n\n<p>As per <code>C11</code> standard document, chapter 7.21.6.1, <code>fprintf()</code> function</p>\n\n<blockquote>\n  <p>s </p>\n  \n  <p>If no l length modifier is present, the argument shall be a <em>pointer to the initial\n  element of an array of character type.</em></p>\n</blockquote>\n\n<p>OTOH, if you change the <code>digits</code> to be an array of type <code>char</code>, you can use <code>%s</code>. No need to use loop to print one-by-one in that case.</p>\n\n<p>Note: An array of <code>int</code> is not a <em>string</em>.</p>\n\n<hr>\n\n<p>Edit:</p>\n\n<p>Even if you change the <code>digits</code> array to type of <code>char</code>, you may not get the desired output while printing out the array using <code>%s</code>. Remember, <code>0</code> and <code>'0'</code> are not the same. </p>\n\n<ul>\n<li><code>0</code> is having ASCII value of <code>0</code>, which represents <code>nul</code>.</li>\n<li><code>'0'</code> is having an ASCII value of <code>48</code> which represents a <em>character</em> <code>0</code>.</li>\n</ul>\n\n<p>Solution: As per the current approach, you've to print the <code>int</code> elements one-by-one using a loop using <code>%d</code> format specifire.</p>\n"}], "owner": {"reputation": 360, "user_id": 4393375, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/4HnA9.png?s=128&g=1", "display_name": "jimo", "link": "https://stackoverflow.com/users/4393375/jimo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 29521265, "answer_count": 1, "score": 0, "last_activity_date": 1428514868, "creation_date": 1428513406, "last_edit_date": 1428514624, "question_id": 29521192, "link": "https://stackoverflow.com/questions/29521192/error-in-printing-a-string", "title": "Error in printing a string", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n\n{\n\n\n  int c, i, wspace, others;\n\n  int digits[10];\n\n  wspace = others = 0;\n\n  for (i=0; i&lt;10; i++){\n\n    digits[i] = 0;\n\n  }\n\n  while ((c =getchar())!=EOF){\n\n    if (c &gt;= '0' &amp;&amp; c &lt;= '9'){\n\n      ++digits[c-'0'];\n    }\n\n    else if ( c == ' ' || c == '\\n' || c == '\\t'){\n\n      ++wspace;\n    }\n\n    else {\n\n      ++others;\n    }\n\n    printf(\"digits: %s\", digits);\n    printf(\"whitespace: %d, others: %d\", wspace, others);\n\n      }}\n</code></pre>\n\n<p>In the above stated code, I am trying to count the number of digits, whitespaces, and other inputs. However, when I am running the program it is printing 'digits' repeatedly. The program works fine if I put the data type of digits[10] as 'char' and use a 'for loop' to print it. I can't find whats wrong with my current way of doing it.</p>\n"}, {"tags": ["python", "c", "ncurses"], "comments": [{"owner": {"reputation": 89490, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 1, "creation_date": 1428513259, "post_id": 29521053, "comment_id": 47196988, "body": "&quot;<i>This doesn&#39;t run</i>&quot; is not helpful. What is the <b>exact</b> problem? Does the code compile? Are there any errors/warnings during compilation? If it compiles, what happens when you run the binary? Does anything display? Have you tried debugging at all? Please <a href=\"https://stackoverflow.com/posts/29521053/edit\">edit</a> your post and add as much information as possible about the issue."}, {"owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "edited": false, "score": 0, "creation_date": 1428531923, "post_id": 29521053, "comment_id": 47207248, "body": "There was more than adequate information provided."}], "answers": [{"comments": [{"owner": {"reputation": 139, "user_id": 3310346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af4082fff872a770c6427baeea723fa3?s=128&d=identicon&r=PG", "display_name": "Pedro A. Aranda", "link": "https://stackoverflow.com/users/3310346/pedro-a-aranda"}, "edited": false, "score": 0, "creation_date": 1428557884, "post_id": 29524963, "comment_id": 47214614, "body": "Thanks a lot, I was mixing too many things in the first step :-)"}], "tags": [], "owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "is_accepted": true, "score": 2, "last_activity_date": 1428525735, "creation_date": 1428525735, "answer_id": 29524963, "question_id": 29521053, "link": "https://stackoverflow.com/questions/29521053/osx-iterm2-can-use-mouse-with-python-ncurses-but-not-with-curses-in-c/29524963#29524963", "title": "OSX iTerm2 can use mouse with python-ncurses but not with curses in C", "body": "<p>The example in C is reading input from <code>menu_win</code> (the call on <code>wgetch(menu_win)</code>), but you did not call</p>\n\n<pre><code>keypad(menu_win, TRUE);\n</code></pre>\n\n<p>before, to enable <em>special keys</em>.  In ncurses, <code>KEY_MOUSE</code> will not be returned if you do not enable this mode.</p>\n\n<p>The <a href=\"http://invisible-island.net/ncurses/man/curs_getch.3x.html#h3-Function-Keys\" rel=\"nofollow\"><code>wgetch</code></a> manpage says</p>\n\n<blockquote>\n  <p>The following function keys, defined in <code>&lt;curses.h&gt;</code>,  might\n  be  returned  by  <strong>getch</strong>  if <strong>keypad</strong> has been enabled.  Note\n  that not all of these are  necessarily  supported  on  any\n  particular terminal.</p>\n</blockquote>\n"}], "owner": {"reputation": 139, "user_id": 3310346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af4082fff872a770c6427baeea723fa3?s=128&d=identicon&r=PG", "display_name": "Pedro A. Aranda", "link": "https://stackoverflow.com/users/3310346/pedro-a-aranda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 349, "favorite_count": 0, "accepted_answer_id": 29524963, "answer_count": 1, "score": -1, "last_activity_date": 1428525735, "creation_date": 1428512920, "last_edit_date": 1428513683, "question_id": 29521053, "link": "https://stackoverflow.com/questions/29521053/osx-iterm2-can-use-mouse-with-python-ncurses-but-not-with-curses-in-c", "title": "OSX iTerm2 can use mouse with python-ncurses but not with curses in C", "body": "<p>I'm thinking about including mouse support to a small editor written in C. The editor is built around ncurses, so I thought it should be possible. I got this Python source from another post and it runs:</p>\n\n<pre><code>import curses\nfrom contextlib import contextmanager\n\n@contextmanager\ndef open_screen():\n    scr = curses.initscr()\n    curses.noecho()\n    curses.cbreak()\n    scr.keypad(1)\n    try:\n        yield scr\n    finally:\n        curses.nocbreak()\n        scr.keypad(0)\n        curses.echo()\n        curses.endwin()\n\ncurses_mouse_states = {\n    curses.BUTTON1_PRESSED: 'Button 1 Pressed', \n    curses.BUTTON1_RELEASED: 'Button 1 Released', \n    curses.BUTTON1_CLICKED: 'Button 1 Clicked',\n    curses.BUTTON1_DOUBLE_CLICKED: 'Button 1 Double-Clicked',\n    curses.BUTTON1_TRIPLE_CLICKED: 'Button 1 Triple-Clicked',\n\n    curses.BUTTON2_PRESSED: 'Button 2 Pressed', \n    curses.BUTTON2_RELEASED: 'Button 2 Released', \n    curses.BUTTON2_CLICKED: 'Button 2 Clicked',\n    curses.BUTTON2_DOUBLE_CLICKED: 'Button 2 Double-Clicked',\n    curses.BUTTON2_TRIPLE_CLICKED: 'Button 2 Triple-Clicked',\n\n    curses.BUTTON3_PRESSED: 'Button 3 Pressed', \n    curses.BUTTON3_RELEASED: 'Button 3 Released', \n    curses.BUTTON3_CLICKED: 'Button 3 Clicked',\n    curses.BUTTON3_DOUBLE_CLICKED: 'Button 3 Double-Clicked',\n    curses.BUTTON3_TRIPLE_CLICKED: 'Button 3 Triple-Clicked',\n\n    curses.BUTTON4_PRESSED: 'Button 4 Pressed', \n    curses.BUTTON4_RELEASED: 'Button 4 Released', \n    curses.BUTTON4_CLICKED: 'Button 4 Clicked',\n    curses.BUTTON4_DOUBLE_CLICKED: 'Button 4 Double-Clicked',\n    curses.BUTTON4_TRIPLE_CLICKED: 'Button 4 Triple-Clicked',\n\n    curses.BUTTON_SHIFT: 'Button Shift', \n    curses.BUTTON_CTRL: 'Button Ctrl', \n    curses.BUTTON_ALT: 'Button Alt'\n}\n\nwith open_screen() as scr:\n    curses.mousemask(-1)\n    while True:\n        c = scr.getch()\n        if c == curses.KEY_MOUSE:\n            gmouse = curses.getmouse()\n            mouse_state = gmouse[4]\n            states = '; '.join(state_string for state, state_string \n                               in curses_mouse_states.viewitems() \n                               if mouse_state &amp; state)\n            scr.addstr(0, 0, states)\n            scr.clrtoeol()\n            scr.addstr(1, 0, \"x = %3d\" % gmouse[1] )\n            scr.addstr(2, 0, \"y = %3d\" % gmouse[2] )\n            scr.refresh()\n        elif c == ord('q'):\n            break\n</code></pre>\n\n<p>But then, I have this source code in C:</p>\n\n<pre><code>#include &lt;ncurses.h&gt;\n#include &lt;string.h&gt;\n\n#define WIDTH 30\n#define HEIGHT 10 \n\nint startx = 0;\nint starty = 0;\n\nchar *choices[] = {     \"Choice 1\",\n            \"Choice 2\",\n            \"Choice 3\",\n            \"Choice 4\",\n            \"Exit\",\n        };\n\nint n_choices = sizeof(choices) / sizeof(char *);\n\nvoid print_menu(WINDOW *menu_win, int highlight);\nvoid report_choice(int mouse_x, int mouse_y, int *p_choice);\n\nint main()\n{   int c, choice = 0;\n    WINDOW *myscreen, *menu_win;\n    MEVENT  event;\n    mmask_t oldmask;\n\n    /* Initialize curses */\n    myscreen = initscr();\n    clear();\n    noecho();\n    cbreak();   //Line buffering disabled. pass on everything\n    keypad(myscreen,TRUE);\n\n    /* Try to put the window in the middle of screen */\n    startx = (80 - WIDTH) / 2;\n    starty = (24 - HEIGHT) / 2;\n\n    attron(A_REVERSE);\n    mvprintw(23, 1, \"Click on Exit to quit (Works best in a virtual console)\");\n    refresh();\n    attroff(A_REVERSE);\n\n    /* Print the menu for the first time */\n    menu_win = newwin(HEIGHT, WIDTH, starty, startx);\n    print_menu(menu_win, 1);\n    /* Get all the mouse events */\n    mousemask(ALL_MOUSE_EVENTS, &amp;oldmask);\n\n    while(1)\n    {\n        c = wgetch(menu_win);\n        switch(c) {\n        case KEY_MOUSE:\n            if(getmouse(&amp;event) == OK)\n            {   /* When the user clicks left mouse button */\n                mvprintw(21,1,\"Event: x = %3d y = %3d\",event.x,event.y);\n\n                if(event.bstate &amp; BUTTON1_PRESSED)\n                {   report_choice(event.x + 1, event.y + 1, &amp;choice);\n                    if(choice == -1) //Exit chosen\n                        goto end;\n                    mvprintw(22, 1, \"Choice made is : %d String Chosen is \\\"%10s\\\"\", choice, choices[choice - 1]);\n                    refresh(); \n                }\n            } else {\n                mvprintw(21,1,\"Couldn't get event!\");\n            }\n            print_menu(menu_win, choice);\n            break;\n        case 'Q':\n        case 'q': \n            goto end;\n        default:\n            break;\n        }\n    }       \nend:\n    mousemask(oldmask,&amp;oldmask);\n    nocbreak();\n    keypad(myscreen,FALSE);\n    echo();\n    endwin();\n\n    return 0;\n}\n\n\nvoid print_menu(WINDOW *menu_win, int highlight)\n{\n    int x, y, i;    \n\n    x = 2;\n    y = 2;\n    box(menu_win, 0, 0);\n    for(i = 0; i &lt; n_choices; ++i)\n    {   if(highlight == i + 1)\n        {   wattron(menu_win, A_REVERSE); \n            mvwprintw(menu_win, y, x, \"%s\", choices[i]);\n            wattroff(menu_win, A_REVERSE);\n        }\n        else\n            mvwprintw(menu_win, y, x, \"%s\", choices[i]);\n        ++y;\n    }\n    wrefresh(menu_win);\n}\n\n/* Report the choice according to mouse position */\nvoid report_choice(int mouse_x, int mouse_y, int *p_choice)\n{   int i,j, choice;\n\n    i = startx + 2;\n    j = starty + 3;\n\n    for(choice = 0; choice &lt; n_choices; ++choice)\n        if(mouse_y == j + choice &amp;&amp; mouse_x &gt;= i &amp;&amp; mouse_x &lt;= i + strlen(choices[choice]))\n        {   if(choice == n_choices - 1)\n                *p_choice = -1;     \n            else\n                *p_choice = choice + 1; \n            break;\n        }\n}\n</code></pre>\n\n<p>And this doesn't run. Apparently, the initialisation stuff is right and I'm starting to not understand the world :( Any help?</p>\n"}, {"tags": ["c++", "c", "sockets"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1428513193, "post_id": 29520968, "comment_id": 47196951, "body": "You have not presented the code by which you create the socket, so I don&#39;t know what kind it is.  Inasmuch as you seem to think that there is a meaningful sense in which it can be &quot;disconnected&quot;, however, it must be some type of stream socket.  In that case, why should your program continue to try to read from it after a disconnection?  No data will ever be forthcoming until the socket is reconnected, and that doesn&#39;t happen automatically."}, {"owner": {"reputation": 668, "user_id": 3859951, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w86J6.png?s=128&g=1", "display_name": "hypheni", "link": "https://stackoverflow.com/users/3859951/hypheni"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1428514747, "post_id": 29520968, "comment_id": 47197861, "body": "I think I am exiting the receive loop once I get a SOCKET_ERROR and thats the wrong. As for a single read it might return SOCKET_ERROR and evetually for next reads it might report a success, so I guess here I need to check for time elapsed. Is it so?"}, {"owner": {"reputation": 2558, "user_id": 655436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98da4e7757d5f0e8596fd832bebee3d0?s=128&d=identicon&r=PG", "display_name": "fukanchik", "link": "https://stackoverflow.com/users/655436/fukanchik"}, "edited": false, "score": 0, "creation_date": 1428515514, "post_id": 29520968, "comment_id": 47198283, "body": "Use write and error sets: select(&lt;MAXSOCK+1&gt;, &lt;read-set&gt;, &lt;write-set&gt;, &lt;error-set&gt;, timeout);"}], "answers": [{"comments": [{"owner": {"reputation": 668, "user_id": 3859951, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w86J6.png?s=128&g=1", "display_name": "hypheni", "link": "https://stackoverflow.com/users/3859951/hypheni"}, "edited": false, "score": 0, "creation_date": 1428514558, "post_id": 29521431, "comment_id": 47197729, "body": "Here I&#39;m dealing with a single socket instance. So shall I really need to consider that (socket_fd + 1)? Moreover I cannot loop like this, I need to check whether my receive method has failed to received data for maximum timeout limit."}, {"owner": {"reputation": 6823, "user_id": 2382728, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ILv9S.jpg?s=128&g=1", "display_name": "Philip Stuyck", "link": "https://stackoverflow.com/users/2382728/philip-stuyck"}, "reply_to_user": {"reputation": 668, "user_id": 3859951, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w86J6.png?s=128&g=1", "display_name": "hypheni", "link": "https://stackoverflow.com/users/3859951/hypheni"}, "edited": false, "score": 0, "creation_date": 1428514667, "post_id": 29521431, "comment_id": 47197797, "body": "I am not saying you have to take this code as is. But you should check your return codes, and see if it has EINTR if so you need to take it into account, and yes you need socketdescriptor +1"}, {"owner": {"reputation": 6823, "user_id": 2382728, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ILv9S.jpg?s=128&g=1", "display_name": "Philip Stuyck", "link": "https://stackoverflow.com/users/2382728/philip-stuyck"}, "reply_to_user": {"reputation": 668, "user_id": 3859951, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w86J6.png?s=128&g=1", "display_name": "hypheni", "link": "https://stackoverflow.com/users/3859951/hypheni"}, "edited": false, "score": 0, "creation_date": 1428514741, "post_id": 29521431, "comment_id": 47197850, "body": "if EINTR is in the picture you have to create a time variable and take the elapsed time into account. Can complicate the code a bit."}, {"owner": {"reputation": 668, "user_id": 3859951, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w86J6.png?s=128&g=1", "display_name": "hypheni", "link": "https://stackoverflow.com/users/3859951/hypheni"}, "edited": false, "score": 0, "creation_date": 1428514840, "post_id": 29521431, "comment_id": 47197913, "body": "I think I am exiting the receive loop once I get a SOCKET_ERROR and thats the wrong. As for a single read it might return SOCKET_ERROR and evetually for next reads it might report a success, so I guess here I need to check for time elapsed. Is it so? If that be the case I need not to use the select() to wait for a timout. Only need to set the socket into non blocking mode. Am I correct?"}, {"owner": {"reputation": 6823, "user_id": 2382728, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ILv9S.jpg?s=128&g=1", "display_name": "Philip Stuyck", "link": "https://stackoverflow.com/users/2382728/philip-stuyck"}, "reply_to_user": {"reputation": 668, "user_id": 3859951, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w86J6.png?s=128&g=1", "display_name": "hypheni", "link": "https://stackoverflow.com/users/3859951/hypheni"}, "edited": false, "score": 0, "creation_date": 1428514942, "post_id": 29521431, "comment_id": 47197978, "body": "blocking is easier, you cannot get EINTR if it is blocking mode."}, {"owner": {"reputation": 668, "user_id": 3859951, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w86J6.png?s=128&g=1", "display_name": "hypheni", "link": "https://stackoverflow.com/users/3859951/hypheni"}, "edited": false, "score": 0, "creation_date": 1428515021, "post_id": 29521431, "comment_id": 47198023, "body": "Yes, blocking is easier. In blocking mode I can simply set a timeout with setsockopt()."}], "tags": [], "owner": {"reputation": 6823, "user_id": 2382728, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ILv9S.jpg?s=128&g=1", "display_name": "Philip Stuyck", "link": "https://stackoverflow.com/users/2382728/philip-stuyck"}, "is_accepted": false, "score": 1, "last_activity_date": 1428514856, "last_edit_date": 1428514856, "creation_date": 1428514205, "answer_id": 29521431, "question_id": 29520968, "link": "https://stackoverflow.com/questions/29520968/c-tcp-socket-non-blocking-receive-timeout/29521431#29521431", "title": "c tcp socket non blocking receive timeout", "body": "<p>The first parameter to select should not be 0.\nCorrect usage of select can be found here :\n<a href=\"http://developerweb.net/viewtopic.php?id=2933\" rel=\"nofollow\">http://developerweb.net/viewtopic.php?id=2933</a></p>\n\n<p>the first parameter should be the max value of your socket +1 and take interrupted system calls into account if it is non blocking:</p>\n\n<pre><code>/* Call select() */\ndo {\n   FD_ZERO(&amp;readset);\n   FD_SET(socket_fd, &amp;readset);\n   result = select(socket_fd + 1, &amp;readset, NULL, NULL, NULL);\n} while (result == -1 &amp;&amp; errno == EINTR);\n</code></pre>\n\n<p>This is just example code you probably need the timeout parameter as well.\nIf you can get EINTR this will complicate your required logic, because if you get EINTR you have to do the same call again, but with the remaining time to wait for.</p>\n"}, {"comments": [{"owner": {"reputation": 668, "user_id": 3859951, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w86J6.png?s=128&g=1", "display_name": "hypheni", "link": "https://stackoverflow.com/users/3859951/hypheni"}, "edited": false, "score": 0, "creation_date": 1428523652, "post_id": 29522376, "comment_id": 47203162, "body": "Anyone with review comments?"}], "tags": [], "owner": {"reputation": 668, "user_id": 3859951, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w86J6.png?s=128&g=1", "display_name": "hypheni", "link": "https://stackoverflow.com/users/3859951/hypheni"}, "is_accepted": false, "score": 0, "last_activity_date": 1428517814, "last_edit_date": 1428517814, "creation_date": 1428517167, "answer_id": 29522376, "question_id": 29520968, "link": "https://stackoverflow.com/questions/29520968/c-tcp-socket-non-blocking-receive-timeout/29522376#29522376", "title": "c tcp socket non blocking receive timeout", "body": "<p>I think for non blocking mode one needs to check the recv() failure along with a timeout value. That mean first select() will return whether the socket is ready to receive data or not. If yes it will go forward else it will sleep until timeout elapses on the select() method call line. But if the receive fails due to some uncertain situations while inside read loop there we need to manually check for socket error and maximum timeout value. If the socket error continues and timeout elapses we need to break it.</p>\n\n<p>I'm done with my receive timeout logic with non blocking mode. \nPlease correct me if I am wrong.</p>\n\n<pre><code>  bool bReturn = true;\n  SetNonBlockingMode(true);\n\n  //check whether the socket is ready to receive\n  fd_set stRead;\n  FD_ZERO(&amp;stRead);\n  FD_SET(m_hSocket, &amp;stRead);\n  int iRet = select(0, &amp;stRead, NULL, NULL, &amp;m_stTimeout);\n\n  DWORD dwStartTime = GetTickCount();\n  DWORD dwCurrentTime = 0;\n\n  //if socket is not ready this line will be hit after 3 sec timeout and go to the end\n  //if it is ready control will go inside the read loop and reads data until data ends or\n  //socket error is getting triggered continuously for more than 3 secs.\n  if ((iRet &gt; 0) &amp;&amp; (FD_ISSET(m_hSocket, &amp;stRead)))\n  {\n    while ((iBuffLen-1) &gt; 0)\n    {\n      int iRcvLen = recv(m_hSocket, pchBuff, iBuffLen-1, 0);\n      dwCurrentTime = GetTickCount();\n\n      if ((iRcvLen == SOCKET_ERROR) &amp;&amp; ((dwCurrentTime - dwStartTime) &gt;= SOCK_TIMEOUT_SECONDS * 1000))\n      {\n        bReturn = false;\n        break;\n      }\n      else if (iRcvLen == 0)\n      {\n        break;\n      }\n\n      pchBuff  += iRcvLen;\n      iBuffLen -= iRcvLen;\n    }\n  }\n\n  SetNonBlockingMode(false);\n  return bReturn;\n</code></pre>\n"}], "owner": {"reputation": 668, "user_id": 3859951, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w86J6.png?s=128&g=1", "display_name": "hypheni", "link": "https://stackoverflow.com/users/3859951/hypheni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1106, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1428517814, "creation_date": 1428512686, "last_edit_date": 1428513422, "question_id": 29520968, "link": "https://stackoverflow.com/questions/29520968/c-tcp-socket-non-blocking-receive-timeout", "title": "c tcp socket non blocking receive timeout", "body": "<p>Trying to write a client which will try to receive data till 3 seconds. I have implemented the connect method using select by below code. </p>\n\n<pre><code>//socket creation \nm_hSocket = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);\n\nm_stAddress.sin_family           = AF_INET;\n  m_stAddress.sin_addr.S_un.S_addr = inet_addr(pchIP);\nm_stAddress.sin_port             = htons(iPort);\n\nm_stTimeout.tv_sec = SOCK_TIMEOUT_SECONDS;\nm_stTimeout.tv_usec = 0;\n\n//connecting to server\nlong iMode = 1;\nint iResult = ioctlsocket(m_hSocket, FIONBIO, &amp;iMode);\n\nconnect(m_hSocket, (struct sockaddr *)&amp;m_stAddress, sizeof(m_stAddress));\n\nlong iMode = 0;\niResult = ioctlsocket(m_hSocket, FIONBIO, &amp;iMode);\n\nfd_set stWrite;\nFD_ZERO(&amp;stWrite);\nFD_SET(m_hSocket, &amp;stWrite);\n\niResult = select(0, NULL, &amp;stWrite, NULL, &amp;m_stTimeout);            \n\nif((iResult &gt; 0) &amp;&amp; (FD_ISSET(m_hSocket, &amp;stWrite)))\n  return true;\n</code></pre>\n\n<p>But I cannot figure out what I am missing at receiving timeout with below code? It doesn't wait if the server connection got disconnected. It just returns instantly from select method. \nAlso how can I write a non blocking socket call with timeout for socket send.</p>\n\n<pre><code>long iMode = 1;\nint iResult = ioctlsocket(m_hSocket, FIONBIO, &amp;iMode);\n\nfd_set stRead;\nFD_ZERO(&amp;stRead);\nFD_SET(m_hSocket, &amp;stRead);\n\nint iRet = select(0, &amp;stRead, NULL, NULL, &amp;m_stTimeout);\n\nif ((iRet &gt; 0) &amp;&amp; (FD_ISSET(m_hSocket, &amp;stRead)))\n{\n  while ((iBuffLen-1) &gt; 0)\n  {\n    int iRcvLen = recv(m_hSocket, pchBuff, iBuffLen-1, 0);\n    if (iRcvLen == SOCKET_ERROR)\n    {\n      return false;\n    }\n    else if (iRcvLen == 0)\n    {\n      break;\n    }\n\n    pchBuff  += iRcvLen;\n    iBuffLen -= iRcvLen;\n  }\n}    \n</code></pre>\n"}, {"tags": ["c", "unix", "linux-kernel", "operating-system", "pipe"], "comments": [{"owner": {"reputation": 13673, "user_id": 1599004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9d2a02744f666e97375e05fdc54255?s=128&d=identicon&r=PG", "display_name": "sawdust", "link": "https://stackoverflow.com/users/1599004/sawdust"}, "edited": false, "score": 2, "creation_date": 1428514680, "post_id": 29520947, "comment_id": 47197805, "body": "Possible duplicate: <a href=\"http://stackoverflow.com/questions/29296007/bidirectional-message-passing-between-2-processes-within-an-os\" title=\"bidirectional message passing between 2 processes within an os\">stackoverflow.com/questions/29296007/&hellip;</a>"}, {"owner": {"reputation": 14607, "user_id": 1793718, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/o5ujD.jpg?s=128&g=1", "display_name": "Lucky", "link": "https://stackoverflow.com/users/1793718/lucky"}, "reply_to_user": {"reputation": 13673, "user_id": 1599004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9d2a02744f666e97375e05fdc54255?s=128&d=identicon&r=PG", "display_name": "sawdust", "link": "https://stackoverflow.com/users/1599004/sawdust"}, "edited": false, "score": 0, "creation_date": 1428517684, "post_id": 29520947, "comment_id": 47199576, "body": "@sawdust that question you mentioned doesn&#39;t have an upvoted or accepted answer.."}, {"owner": {"reputation": 38430, "user_id": 429063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd38783123814dee889d28c991e56fb?s=128&d=identicon&r=PG", "display_name": "Chris Stratton", "link": "https://stackoverflow.com/users/429063/chris-stratton"}, "edited": false, "score": 1, "creation_date": 1428519392, "post_id": 29520947, "comment_id": 47200619, "body": "It has a good answer, which now has an upvote."}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 4765217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73cffc43cb7de85153790ff07766a303?s=128&d=identicon&r=PG&f=1", "display_name": "nimajji", "link": "https://stackoverflow.com/users/4765217/nimajji"}, "edited": false, "score": 0, "creation_date": 1428513408, "post_id": 29521071, "comment_id": 47197070, "body": "You mean using one pipe ? And 2 file descriptors ?"}], "tags": [], "owner": {"reputation": 49, "user_id": 4443794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20044ca65d53696b604aa28e05860faf?s=128&d=identicon&r=PG", "display_name": "sonaxaton", "link": "https://stackoverflow.com/users/4443794/sonaxaton"}, "is_accepted": false, "score": -2, "last_activity_date": 1428512986, "creation_date": 1428512986, "answer_id": 29521071, "question_id": 29520947, "link": "https://stackoverflow.com/questions/29520947/can-a-single-pipe-be-used-for-2-way-communication-between-parent-and-a-child/29521071#29521071", "title": "Can a single pipe be used for 2 way communication between parent and a child?", "body": "<p>Yes it can, I've done that before. I had a parent and child send each other different messages using the same 2 pipes and receive them correctly. Just make sure you're always reading from the first file descriptor and writing to the second.</p>\n"}, {"comments": [{"owner": {"reputation": 38430, "user_id": 429063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd38783123814dee889d28c991e56fb?s=128&d=identicon&r=PG", "display_name": "Chris Stratton", "link": "https://stackoverflow.com/users/429063/chris-stratton"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1428520257, "post_id": 29521108, "comment_id": 47201133, "body": "@BasileStarynkevitch adding in entirely distinct methods like sockets really crosses the line from editing someone else&#39;s answer to writing your own."}], "tags": [], "owner": {"reputation": 1175, "user_id": 1654526, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/3287ef88010dfa6ae54dfadd74a0d5e0?s=128&d=identicon&r=PG", "display_name": "Jack", "link": "https://stackoverflow.com/users/1654526/jack"}, "is_accepted": false, "score": 0, "last_activity_date": 1428519810, "last_edit_date": 1428519810, "creation_date": 1428513102, "answer_id": 29521108, "question_id": 29520947, "link": "https://stackoverflow.com/questions/29520947/can-a-single-pipe-be-used-for-2-way-communication-between-parent-and-a-child/29521108#29521108", "title": "Can a single pipe be used for 2 way communication between parent and a child?", "body": "<p>No sorry. Linux pipe() is unidirectional. See <a href=\"http://linux.die.net/man/2/pipe\" rel=\"nofollow\">the man page</a>, and also <a href=\"http://man7.org/linux/man-pages/man7/pipe.7.html\" rel=\"nofollow\">pipe(7)</a> &amp; <a href=\"http://man7.org/linux/man-pages/man7/fifo.7.html\" rel=\"nofollow\">fifo(7)</a>. Consider also <code>AF_UNIX</code> sockets, see <a href=\"http://man7.org/linux/man-pages/man7/unix.7.html\" rel=\"nofollow\">unix(7)</a>.</p>\n"}], "owner": {"reputation": 17, "user_id": 4765217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73cffc43cb7de85153790ff07766a303?s=128&d=identicon&r=PG&f=1", "display_name": "nimajji", "link": "https://stackoverflow.com/users/4765217/nimajji"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 862, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1592761120, "creation_date": 1428512616, "last_edit_date": 1428520328, "question_id": 29520947, "link": "https://stackoverflow.com/questions/29520947/can-a-single-pipe-be-used-for-2-way-communication-between-parent-and-a-child", "title": "Can a single pipe be used for 2 way communication between parent and a child?", "body": "<p>Suppose I use <code>pipefdn[2]</code> and <code>pipe()</code> on it , can bidirectional communication be implemented using a single pipe or do you need 2 pipes ?</p>\n"}, {"tags": ["c", "sorting", "logic", "bubble-sort"], "comments": [{"owner": {"reputation": 8876, "user_id": 1545171, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TiAiM.jpg?s=128&g=1", "display_name": "DrKoch", "link": "https://stackoverflow.com/users/1545171/drkoch"}, "edited": false, "score": 0, "creation_date": 1428512322, "post_id": 29520777, "comment_id": 47196442, "body": "Please fix indentation"}], "answers": [{"tags": [], "owner": {"reputation": 3785, "user_id": 4427938, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/M6mua.png?s=128&g=1", "display_name": "Ayushi Jha", "link": "https://stackoverflow.com/users/4427938/ayushi-jha"}, "is_accepted": true, "score": 4, "last_activity_date": 1428512239, "creation_date": 1428512239, "answer_id": 29520835, "question_id": 29520777, "link": "https://stackoverflow.com/questions/29520777/bubble-sort-example/29520835#29520835", "title": "Bubble Sort Example", "body": "<p>There is a very small error in your code:</p>\n\n<pre><code>for( i = 0; i &amp; SIZE - 1; ++i){\n</code></pre>\n\n<p>should have been:</p>\n\n<pre><code>for( i = 0; i &lt; SIZE - 1; ++i){\n</code></pre>\n\n<p>Here's the link to the code with the minor edit: <a href=\"http://ideone.com/YZQPHY\" rel=\"nofollow\">http://ideone.com/YZQPHY</a></p>\n"}], "owner": {"reputation": 15, "user_id": 4765146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9697c1f5f9878eca152216242d4b9783?s=128&d=identicon&r=PG&f=1", "display_name": "Cidricc", "link": "https://stackoverflow.com/users/4765146/cidricc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 0, "accepted_answer_id": 29520835, "answer_count": 1, "score": -1, "last_activity_date": 1477941089, "creation_date": 1428512058, "question_id": 29520777, "link": "https://stackoverflow.com/questions/29520777/bubble-sort-example", "title": "Bubble Sort Example", "body": "<p>This program is suppose to take the given integers and sort it in a ascending order. I wanted to see if the program that was given actually sorted the given integers in ascending order, but instead kept it in the original order. What's wrong with the logic of this example?</p>\n\n<pre><code>//Fig. 6.15: fig06_15.c\n//Sorting an array's value in ascending order.\n#include &lt;stdio.h&gt;\n#define SIZE 10\n\n// function main begins program execution\nint main()\n{\n// initialize a\nint a[ SIZE ] = { 2, 6, 4, 8, 10, 12, 89, 68, 45, 37};\nint pass; // passes counter\nsize_t i; // comparisons counter\nint hold; // temporary-location used to swap array elements\n\nputs(\"Data items in original order\");\n\n//output original array\nfor( i = 0; i &lt; SIZE; ++i) {\nprintf(\"%4d\", a[ i ]);\n}// end for\n\n//bubble sort\n//loop to control number of passes\nfor( pass = 1; pass &lt; SIZE; ++pass ) {\n\n//loop to control number of comparisons per pass\nfor( i = 0; i &amp; SIZE - 1; ++i){\n\n    //compare adjacent elements and swap them if first\n    //element is greater than second element\n    if ( a[ i ] &gt; a[ i + 1 ] ){\n\n        hold = a[ i ];\n        a[ i ] = a[ i + 1 ];\n        a[ i + 1 ] = hold;\n    }//end if\n}//end inner for\n}//end outer for\n\nputs(\"\\nData items in ascending order\");\n\n//output sorted array\nfor( i = 0; i &lt; SIZE; ++i ) {\nprintf( \"%4d\", a[ i ] );\n}//end for\n\nputs(\"\");\n}//end main\n</code></pre>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "edited": false, "score": 2, "creation_date": 1428512086, "post_id": 29520756, "comment_id": 47196312, "body": "Because they happen to lie one <code>int</code> apart in memory, and pointer arithmetic counts in terms the underlying type rather than bytes."}, {"owner": {"reputation": 139, "user_id": 4187022, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4bd4ac601ae398d722164559391968df?s=128&d=identicon&r=PG&f=1", "display_name": "Rajesh Sethi", "link": "https://stackoverflow.com/users/4187022/rajesh-sethi"}, "edited": false, "score": 1, "creation_date": 1428512240, "post_id": 29520756, "comment_id": 47196403, "body": "but is it always that pointers would lie one int apart in memory..?"}, {"owner": {"reputation": 8876, "user_id": 1545171, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TiAiM.jpg?s=128&g=1", "display_name": "DrKoch", "link": "https://stackoverflow.com/users/1545171/drkoch"}, "edited": false, "score": 2, "creation_date": 1428512424, "post_id": 29520756, "comment_id": 47196501, "body": "No, this is unspecified, you cannot rely on the fact but often you will find it to be true because the compiler allocates local variables on the stack in the order he finds them in code. Things are very different if you have int and float variables however."}, {"owner": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "edited": false, "score": 0, "creation_date": 1428513490, "post_id": 29520756, "comment_id": 47197120, "body": "@RajeshSethi: Note that it&#39;s <code>a</code> and <code>b</code> that happen to lie one <code>int</code> apart in memory (this is not guaranteed -- see DrKoch&#39;s comment), not <code>p</code> and <code>q</code>. <code>p-q</code> is just subtracting two pointers (addresses) that happen to be stored in <code>p</code> and <code>q</code>. At the machine code level, subtracting two pointers will give a difference in bytes (likely, on practical machines), but the semantics of C transform that into a count of <code>int</code>s (or whatever the pointed-to type is), by implicitly dividing by <code>sizeof(int)</code> if you will."}], "answers": [{"comments": [{"owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "edited": false, "score": 0, "creation_date": 1428512456, "post_id": 29520774, "comment_id": 47196529, "body": "seems I missed smth:&quot;and the result point to elements of the same array &quot;-how can result of subtraction point to some element?"}, {"owner": {"reputation": 21711, "user_id": 418729, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Vm1jt.jpg?s=128&g=1", "display_name": "Sadique", "link": "https://stackoverflow.com/users/418729/sadique"}, "reply_to_user": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "edited": false, "score": 2, "creation_date": 1428512590, "post_id": 29520774, "comment_id": 47196615, "body": "@Giorgi - if you would substract 2 pointers within the same array then you may reach an element in the same array. Eg. <code>arr[10]</code> - <code>8 - 2  = 6</code> - note 6 is valid index here."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "edited": false, "score": 0, "creation_date": 1428512741, "post_id": 29520774, "comment_id": 47196698, "body": "@Giorgi; Read the complete para quoted from the standard and you will understand the whole story."}, {"owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "reply_to_user": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1428513491, "post_id": 29520774, "comment_id": 47197121, "body": "@haccks:yeah thought so-just didn&#39;t have that doc nearby"}], "tags": [], "owner": {"reputation": 21711, "user_id": 418729, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Vm1jt.jpg?s=128&g=1", "display_name": "Sadique", "link": "https://stackoverflow.com/users/418729/sadique"}, "is_accepted": false, "score": 2, "last_activity_date": 1428512462, "last_edit_date": 1592644375, "creation_date": 1428512049, "answer_id": 29520774, "question_id": 29520756, "link": "https://stackoverflow.com/questions/29520756/why-the-following-code-prints-1-as-output/29520774#29520774", "title": "Why the following code prints 1 as output?", "body": "<p>You are subtracting pointers here:</p>\n<pre><code>int c=p-q;\n</code></pre>\n<p>You ought to do this:</p>\n<pre><code>int c=*p-*q;\n</code></pre>\n<p>Its a matter of chance that the location of the 2 pointers are near otherwise you could get any value. Thanks to <a href=\"https://stackoverflow.com/questions/29520756/why-the-following-code-prints-1-as-output/29520783#29520783\">haccks answer</a> - please read this:</p>\n<h3>C11: 6.5.6 Additive operators (p8)</h3>\n<blockquote>\n<p>[...] If both the pointer operand and the result point to elements of the same array object, or one past the last element of the array object, the evaluation shall not produce an overflow; otherwise, the <strong>behavior is undefined</strong>.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "edited": false, "score": 0, "creation_date": 1428513278, "post_id": 29520783, "comment_id": 47197002, "body": "It might be worth mentioning that non-array objects are considered arrays of length 1 the purposes of this sentence."}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 3, "last_activity_date": 1428513371, "last_edit_date": 1592644375, "creation_date": 1428512077, "answer_id": 29520783, "question_id": 29520756, "link": "https://stackoverflow.com/questions/29520756/why-the-following-code-prints-1-as-output/29520783#29520783", "title": "Why the following code prints 1 as output?", "body": "<p>Subtracting two pointers which are not pointing to same array make no sense.</p>\n<h3>C11: 6.5.6 Additive operators (p8)</h3>\n<blockquote>\n<p>[...] If both the pointer operand and the result point to elements of the <strong>same array object</strong>, or one past the last element of the array object, the evaluation shall not produce an overflow; otherwise, the <strong>behavior is undefined</strong>.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 1840, "user_id": 2952011, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/16d6c7bf2e0842791df8ec9b05758bfb?s=128&d=identicon&r=PG&f=1", "display_name": "Mukit09", "link": "https://stackoverflow.com/users/2952011/mukit09"}, "is_accepted": false, "score": 0, "last_activity_date": 1428512139, "creation_date": 1428512139, "answer_id": 29520807, "question_id": 29520756, "link": "https://stackoverflow.com/questions/29520756/why-the-following-code-prints-1-as-output/29520807#29520807", "title": "Why the following code prints 1 as output?", "body": "<p>Here, <strong>c</strong> holds difference of two integer type address. And this difference is 1. 5 is stored in an address and 10 is also stored in an address. <strong>p</strong> and <strong>q</strong> are those address who stores this 5 and 10.</p>\n"}, {"tags": [], "owner": {"reputation": 945, "user_id": 4695394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75268cada6fa92af6fa9eb3f2da0d109?s=128&d=identicon&r=PG&f=1", "display_name": "kiviak", "link": "https://stackoverflow.com/users/4695394/kiviak"}, "is_accepted": false, "score": 1, "last_activity_date": 1428512481, "creation_date": 1428512481, "answer_id": 29520907, "question_id": 29520756, "link": "https://stackoverflow.com/questions/29520756/why-the-following-code-prints-1-as-output/29520907#29520907", "title": "Why the following code prints 1 as output?", "body": "<p>to let <code>p-q</code> make sense,p and q should point to the same array.<br>but <code>p-q</code> in your code is Undefined</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "is_accepted": false, "score": 1, "last_activity_date": 1428512890, "creation_date": 1428512890, "answer_id": 29521040, "question_id": 29520756, "link": "https://stackoverflow.com/questions/29520756/why-the-following-code-prints-1-as-output/29521040#29521040", "title": "Why the following code prints 1 as output?", "body": "<p>The way C is usually implemented is that a function allocates some space on the <em>stack</em>, and all local variables that need to have memory addresses are placed in this space.</p>\n\n<p>It seems natural that the variables would be placed in this memory in some natural ordering, such as the order they are declared or its reverse, or maybe alphabetically.</p>\n\n<p>Furthermore, <code>int</code> variables usually pack well into memory.</p>\n\n<p>Thus, it's natural to expect that <code>a</code> and <code>b</code> are stored in adjacent memory locations, and that <code>&amp;a - &amp;b</code> would either be <code>1</code> or <code>-1</code>.</p>\n\n<p>Now, you shouldn't rely on anything reasonable happening here; the C standard doesn't guarantee anything about what result you should get, or even imply that it's meaningful to ask for the difference in the first place. This is <em>undefined behavior</em>, because <code>a</code> and <code>b</code> are completely independent objects. The C standard permits this difference to return <code>1</code>, <code>-1</code>, <code>42</code>, and even allows your program to wipe your hard drive, ruin your credit score, or even return a result so unfathomable to the human mind it's only by analogy we call it a number at all.</p>\n"}], "owner": {"reputation": 139, "user_id": 4187022, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4bd4ac601ae398d722164559391968df?s=128&d=identicon&r=PG&f=1", "display_name": "Rajesh Sethi", "link": "https://stackoverflow.com/users/4187022/rajesh-sethi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "answer_count": 5, "score": 1, "last_activity_date": 1428513371, "creation_date": 1428511982, "last_edit_date": 1428512023, "question_id": 29520756, "link": "https://stackoverflow.com/questions/29520756/why-the-following-code-prints-1-as-output", "title": "Why the following code prints 1 as output?", "body": "<p>difference of pointer gives 1 as output..</p>\n\n<pre><code>#include&lt;string.h&gt;\n#include&lt;stdio.h&gt;\nint main()\n{  \n    int a=5,b=10;\n    int *p=&amp;a,*q=&amp;b;\n    int c=p-q;\n    printf(\"%d\",c); \n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "sockets", "network-programming"], "comments": [{"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1428515168, "post_id": 29520523, "comment_id": 47198104, "body": "The documentation for SO_SNDTIMEO contradicts your assumption in pretty clear words. Honor the documentation."}], "answers": [{"comments": [{"owner": {"reputation": 583, "user_id": 1525573, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/982e0112d167af292207d91c9f55235d?s=128&d=identicon&r=PG&f=1", "display_name": "BalticMusicFan", "link": "https://stackoverflow.com/users/1525573/balticmusicfan"}, "edited": false, "score": 0, "creation_date": 1428512587, "post_id": 29520664, "comment_id": 47196612, "body": "This answers about preferable alternatives that i could use instead. But you did not answered if this timeout logic is valid for Windows systems."}, {"owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "reply_to_user": {"reputation": 583, "user_id": 1525573, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/982e0112d167af292207d91c9f55235d?s=128&d=identicon&r=PG&f=1", "display_name": "BalticMusicFan", "link": "https://stackoverflow.com/users/1525573/balticmusicfan"}, "edited": false, "score": 0, "creation_date": 1428512655, "post_id": 29520664, "comment_id": 47196655, "body": "The answer is supposed to tell that using timeouts for regular operations is not the best of ideas."}, {"owner": {"reputation": 583, "user_id": 1525573, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/982e0112d167af292207d91c9f55235d?s=128&d=identicon&r=PG&f=1", "display_name": "BalticMusicFan", "link": "https://stackoverflow.com/users/1525573/balticmusicfan"}, "edited": false, "score": 0, "creation_date": 1428513688, "post_id": 29520664, "comment_id": 47197213, "body": "this would be used to kill connections for HTTP server that should be closed. See related question <a href=\"http://serverfault.com/questions/680855/how-to-configure-apache-to-kill-stalled-data-transfers\" title=\"how to configure apache to kill stalled data transfers\">serverfault.com/questions/680855/&hellip;</a>"}], "tags": [], "owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "is_accepted": false, "score": 3, "last_activity_date": 1428513153, "last_edit_date": 1428513153, "creation_date": 1428511688, "answer_id": 29520664, "question_id": 29520523, "link": "https://stackoverflow.com/questions/29520523/how-to-send-and-receive-data-up-to-so-sndtimeo-and-so-rcvtimeo-without-corruptin/29520664#29520664", "title": "How to send and receive data up to SO_SNDTIMEO and SO_RCVTIMEO without corrupting connection?", "body": "<p>While you MIGHT implement something along the ideas you have given in your question, there are preferable alternatives on all major systems.</p>\n\n<p>Namely:</p>\n\n<ul>\n<li>kqueue on FreeBSD and family. And on MAC OSX.</li>\n<li>epoll on linux and related types of operating systems.</li>\n<li>IO completion ports on Windows.</li>\n</ul>\n\n<p>Using those technologies allows you to process traffic on multiple sockets without timeout logics and polling in an efficient, reactive manner. They all can be considered successors of the ancient <code>select()</code> function in socket API.</p>\n\n<p>As for the quoted documentation for send() in your question, it is not really confusing or contradicting. Useful network protocols implement a mechanism to create \"backpressure\" for situations where a sender tries to send more data than a receiver (and/or the transport channel) can accomodate for. So, an application can only provide more data to send() if the network stack has buffer space ready for it. </p>\n\n<p>If, for example an application tries to send 3Kb worth of data and the tcp/ip stack has only room for 800 bytes, <code>send()</code> might succeed and return that it used 800 bytes of the 3k offered bytes.</p>\n\n<p>The basic approach to forwarding the data on a connection is: Do not read from the incoming socket until you know you can send that data to the outgoing socket. If you read greedily (and buffer on application layer), you deprive the communication channel of its backpressure mechanism. </p>\n\n<p>So basically, the \"send capability\" should drive the receive actions.</p>\n\n<p>As for using timeouts for this \"middle man\", there are 2 major scenarios:</p>\n\n<ol>\n<li>You know the sending behavior of the sender application. I.e. if it has some intent on sending any data within your chosen receive timeout at any time. Some applications only send sporadically and any chosen value for a receive timeout could be wrong. Even if it is supposed to send at a specific time interval, your timeouts will cause trouble once someone debugs the sending application. </li>\n<li>You want the \"middle man\" to work for unknown applications (which must not use some encryption for middle man to have a chance, of course). There, you cannot pick any \"adequate\" timeout value because you know nothing about the sending behavior of the involved application(s).</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 0, "creation_date": 1428515227, "post_id": 29521649, "comment_id": 47198141, "body": "It is also possible (and probably also desirable in some scenarios) to use IO completion ports from 1 thread (without thread pool). It is a bit hard to figure that one out from the existing sources of documentation, though. The reason why I mention this is mainly because if you go ultra-high performance (which the author of this question probably will not attempt), you end in the field of user mode scheduling, avoiding of context switches and scalability. For &quot;normal high performance&quot;, the thread pool approach probably is good to go for."}, {"owner": {"reputation": 49, "user_id": 4765219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae3058f70f3ae16d894d7309a4ddf51e?s=128&d=identicon&r=PG", "display_name": "Tom Dial", "link": "https://stackoverflow.com/users/4765219/tom-dial"}, "reply_to_user": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 0, "creation_date": 1428516846, "post_id": 29521649, "comment_id": 47199107, "body": "+1 Totally agree. In fact, for I/O bound systems, as this may very well be, you may not see a benefit at all from &gt;1 thread. Servers written with libevent use a single-threaded model, and where I work at FactSet, we have a similar framework in place for some applications-- I/O is handled by a main thread, long-running work is delegated to a background thread pool."}], "tags": [], "owner": {"reputation": 49, "user_id": 4765219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae3058f70f3ae16d894d7309a4ddf51e?s=128&d=identicon&r=PG", "display_name": "Tom Dial", "link": "https://stackoverflow.com/users/4765219/tom-dial"}, "is_accepted": false, "score": 3, "last_activity_date": 1428514915, "creation_date": 1428514915, "answer_id": 29521649, "question_id": 29520523, "link": "https://stackoverflow.com/questions/29520523/how-to-send-and-receive-data-up-to-so-sndtimeo-and-so-rcvtimeo-without-corruptin/29521649#29521649", "title": "How to send and receive data up to SO_SNDTIMEO and SO_RCVTIMEO without corrupting connection?", "body": "<p>As a previous poster has suggested, I strongly urge you to reconsider the design of your server so that it employs an asynchronous I/O strategy. This may very well require that you spend significant time learning about each operating systems' preferred approach. It will be time well-spent.</p>\n\n<p>For anything other than a toy application, using blocking I/O in the manner that you suggest will not perform well. Even with short timeouts, it sounds to me as though you won't be able to service new connections until you have completed the work for the current connection. You may also find (with short timeouts) that you're burning more CPU time spinning waiting for work to do than actually doing work.</p>\n\n<p>A previous poster wisely suggested taking a look at Windows I/O completion ports. Take a look at this article I wrote in 2007 for Dr. Dobbs. It's not perfect, but I try to do a decent job of explaining how you can design a simple server that uses a small thread pool to handle potentially large numbers of connections:  </p>\n\n<p>Windows I/O Completion Ports\n<a href=\"http://www.drdobbs.com/cpp/multithreaded-asynchronous-io-io-comple/201202921\" rel=\"nofollow\">http://www.drdobbs.com/cpp/multithreaded-asynchronous-io-io-comple/201202921</a></p>\n\n<p>If you're on Linux/FreeBSD/MacOSX, take a look at libevent:</p>\n\n<p>Libevent\n<a href=\"http://libevent.org/\" rel=\"nofollow\">http://libevent.org/</a></p>\n\n<p>Finally, a good, practical book on writing TCP/IP servers and clients is \"Practical TCP/IP Sockets in C\" by Michael Donahoe and Kenneth Calvert. You could also check out the W. Richard Stevens texts (which cover the topic completely for UNIX.)</p>\n\n<p>In summary, I think you should take some time to learn more about asynchronous socket I/O and the established, best-of-breed approaches for developing servers. </p>\n\n<p>Feel free to private message me if you have questions down the road.</p>\n"}], "owner": {"reputation": 583, "user_id": 1525573, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/982e0112d167af292207d91c9f55235d?s=128&d=identicon&r=PG&f=1", "display_name": "BalticMusicFan", "link": "https://stackoverflow.com/users/1525573/balticmusicfan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1646, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1428514915, "creation_date": 1428511251, "question_id": 29520523, "link": "https://stackoverflow.com/questions/29520523/how-to-send-and-receive-data-up-to-so-sndtimeo-and-so-rcvtimeo-without-corruptin", "title": "How to send and receive data up to SO_SNDTIMEO and SO_RCVTIMEO without corrupting connection?", "body": "<p>I am currently planning how to develop a <em>man in the middle</em> network application for TCP server that would transfer data between server and client. It would behave as regular client for server and server for remote client without modifying any data. It will be optionally used to detect and measure how long server or client is not able to receive data that is ready to be received in situation when connection is inactive.</p>\n\n<p>I am planning to use blocking send and recv functions. Before any data transfer I would call a setsockopt function to set SO_SNDTIMEO and SO_RCVTIMEO to about 10 - 20 miliseconds assuming it will force blocking send and recv functions to return early in order to let another active connection data to be routed. Running thread per connection looks too expensive. I would not use async sockets here because I can not find guarantee that they will get complete in a parts of second especially when large data amount is being sent or received. High data delays does not look good. I would use very small buffers here but calling function for each received byte looks overkill.</p>\n\n<p>My next assumption would be that is safe to call send or recv later if it has previously terminated by timeout and data was received less than requested.</p>\n\n<p>But I am confused by contradicting information available at msdn.</p>\n\n<blockquote>\n  <p>send function</p>\n  \n  <p><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms740149%28v=vs.85%29.aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/windows/desktop/ms740149%28v=vs.85%29.aspx</a></p>\n  \n  <p>If no error occurs, send returns the total number of bytes sent, which\n  can be less than the number requested to be sent in the len parameter.</p>\n</blockquote>\n\n<hr>\n\n<blockquote>\n  <p>SOL_SOCKET Socket Options</p>\n  \n  <p><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms740532%28v=vs.85%29.aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/windows/desktop/ms740532%28v=vs.85%29.aspx</a></p>\n  \n  <p>SO_SNDTIMEO - The timeout, in milliseconds, for blocking send calls.\n  The default for this option is zero, which indicates that a send\n  operation will not time out. If a blocking send call times out, the\n  connection is in an indeterminate state and should be closed.</p>\n</blockquote>\n\n<p>Are my assumptions correct that I can use these functions like this? Maybe there is more effective way to do this?</p>\n\n<p>Thanks for answers</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 3004, "user_id": 1359034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e97eaac4d6ba8f0c3f95900f02b45b42?s=128&d=identicon&r=PG", "display_name": "dwcanillas", "link": "https://stackoverflow.com/users/1359034/dwcanillas"}, "edited": false, "score": 3, "creation_date": 1428510864, "post_id": 29520336, "comment_id": 47195527, "body": "you should use <a href=\"http://www.cplusplus.com/reference/string/string/\" rel=\"nofollow noreferrer\">std::string</a>.  It has methods to split and maniuplate the characters within the string."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1428511498, "post_id": 29520336, "comment_id": 47195944, "body": "In C, you&#39;re probably best off returning a dynamically allocated structure and relying on the caller to free it. C++ has other methods I can&#39;t speak to."}, {"owner": {"reputation": 1401, "user_id": 2003821, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/o7Hlt.jpg?s=128&g=1", "display_name": "Aadam", "link": "https://stackoverflow.com/users/2003821/aadam"}, "edited": false, "score": 0, "creation_date": 1428511563, "post_id": 29520336, "comment_id": 47195971, "body": "error: &#39;string&#39; is not a member of &#39;std&#39;"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1428513396, "post_id": 29520336, "comment_id": 47197060, "body": "@Aadam: <code>#include &lt;string&gt;</code>"}, {"owner": {"reputation": 1401, "user_id": 2003821, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/o7Hlt.jpg?s=128&g=1", "display_name": "Aadam", "link": "https://stackoverflow.com/users/2003821/aadam"}, "edited": false, "score": 0, "creation_date": 1428514379, "post_id": 29520336, "comment_id": 47197629, "body": "I got that after #include &lt;string&gt;"}, {"owner": {"reputation": 1401, "user_id": 2003821, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/o7Hlt.jpg?s=128&g=1", "display_name": "Aadam", "link": "https://stackoverflow.com/users/2003821/aadam"}, "edited": false, "score": 0, "creation_date": 1428514421, "post_id": 29520336, "comment_id": 47197649, "body": "Can i get a simple example?"}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 1, "creation_date": 1428514639, "post_id": 29520336, "comment_id": 47197776, "body": "I don&#39;t see any return values so I&#39;m not sure where you want to return a string array. You should use <code>std::vector&lt;std::string&gt;</code> for a dynamic array of strings. Or replace with <code>String</code> if this is the type you want to use."}, {"owner": {"reputation": 1401, "user_id": 2003821, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/o7Hlt.jpg?s=128&g=1", "display_name": "Aadam", "link": "https://stackoverflow.com/users/2003821/aadam"}, "edited": false, "score": 0, "creation_date": 1428516901, "post_id": 29520336, "comment_id": 47199138, "body": "This std is irritating..... Anyway the whole world is distraught with it :p"}], "owner": {"reputation": 1401, "user_id": 2003821, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/o7Hlt.jpg?s=128&g=1", "display_name": "Aadam", "link": "https://stackoverflow.com/users/2003821/aadam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 145, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1428512997, "creation_date": 1428510660, "last_edit_date": 1428512997, "question_id": 29520336, "link": "https://stackoverflow.com/questions/29520336/return-string-array", "title": "Return String array", "body": "<p>I don't know if this question is asked. But I couldn't find any clear answer after searching full day on net. I would like to return a string array from a function. Right now I can make a String array by splitting a string.</p>\n\n<p>I am new to this but familiar with Java, very hard to split a string though. I tried as below. Someone please make a function out of it which can be used thru out.</p>\n\n<pre><code>void setup(){\n   Serial.begin(9600);\n   Serial.println(\"Starting..\");\n // Define \n  String txt = \"A@10,20,30:B@40,50,60:B@70,80,90:A@100,110,120\"; \n  int str_len = txt.length() + 1; \n  char char_array[str_len];\n  txt.toCharArray(char_array, str_len);\n\n  Serial.println(char_array);\n\n  char *p = char_array;\n  char *str;\n  int i=0;\n  String arr[20];\n  while ((str = strtok_r(p, \":\", &amp;p)) != NULL) {// delimiter is the semicolon\n    String stringOne =  String(str);\n    arr[i++]=stringOne;\n  }\n}\nvoid loop(){}\n</code></pre>\n\n<p>Also is it possible to make String array \"arr\" size dynamic?</p>\n"}, {"tags": ["c", "printf", "format-specifiers"], "answers": [{"tags": [], "owner": {"reputation": 3169, "user_id": 4114124, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k73hh.jpg?s=128&g=1", "display_name": "Politank-Z", "link": "https://stackoverflow.com/users/4114124/politank-z"}, "is_accepted": true, "score": 4, "last_activity_date": 1428511009, "last_edit_date": 1592644375, "creation_date": 1428510642, "answer_id": 29520329, "question_id": 29520231, "link": "https://stackoverflow.com/questions/29520231/e-format-in-printf-and-precision-modifiers/29520329#29520329", "title": "e format in printf() and precision modifiers", "body": "<p>According to <a href=\"https://en.wikipedia.org/wiki/Scientific_notation#Normalized_notation\" rel=\"nofollow noreferrer\">Wikipedia</a>:</p>\n<blockquote>\n<p>In normalized scientific notation, the exponent b is chosen so that the absolute value of a remains at least one but less than ten (1 \u2264 |a| &lt; 10). Thus 350 is written as 3.5\u00d710<sup>2</sup>. This form allows easy comparison of numbers, as the exponent b gives the number's order of magnitude. In normalized notation, the exponent b is negative for a number with absolute value between 0 and 1 (e.g. 0.5 is written as 5\u00d710<sup>\u22121</sup>). The 10 and exponent are often omitted when the exponent is 0.</p>\n<p>Normalized scientific form is the typical form of expression of large numbers in many fields, unless an unnormalised form, such as engineering notation, is desired. Normalized scientific notation is often called exponential notation\u2014although the latter term is more general and also applies when a is not restricted to the range 1 to 10 (as in engineering notation for instance) and to bases other than 10 (as in 3.15\u00d7\u20092<sup>20</sup>).</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 8876, "user_id": 1545171, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TiAiM.jpg?s=128&g=1", "display_name": "DrKoch", "link": "https://stackoverflow.com/users/1545171/drkoch"}, "is_accepted": false, "score": 2, "last_activity_date": 1428510681, "creation_date": 1428510681, "answer_id": 29520347, "question_id": 29520231, "link": "https://stackoverflow.com/questions/29520231/e-format-in-printf-and-precision-modifiers/29520347#29520347", "title": "e format in printf() and precision modifiers", "body": "<p>The <code>%e</code> format uses scientifoc notation, i.e. one digit before the decimal seperator and an exponent for scaling. You can't set the digits <em>before</em> the decimal separator using this format.</p>\n"}, {"comments": [{"owner": {"reputation": 179, "user_id": 2898281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/FP3VV.png?s=128&g=1", "display_name": "pb.", "link": "https://stackoverflow.com/users/2898281/pb"}, "edited": false, "score": 0, "creation_date": 1428511937, "post_id": 29520366, "comment_id": 47196206, "body": "Thanks a lot! I found similar example in review questions in my programming book, it was tricky."}], "tags": [], "owner": {"reputation": 5284, "user_id": 2040925, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/191d1998634eaa0af6129682394dc560?s=128&d=identicon&r=PG", "display_name": "typ1232", "link": "https://stackoverflow.com/users/2040925/typ1232"}, "is_accepted": false, "score": 1, "last_activity_date": 1428510732, "creation_date": 1428510732, "answer_id": 29520366, "question_id": 29520231, "link": "https://stackoverflow.com/questions/29520231/e-format-in-printf-and-precision-modifiers/29520366#29520366", "title": "e format in printf() and precision modifiers", "body": "<p>This is just how the scientific notation is defined. The result you expect is a very weird notation. I don't think you can get it with printf.</p>\n\n<p>The number before the dot in the format specifier defines the minimum width of the resulting sub-string. Try <code>%20.2e</code> to see what that means.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1428511950, "creation_date": 1428511950, "answer_id": 29520744, "question_id": 29520231, "link": "https://stackoverflow.com/questions/29520231/e-format-in-printf-and-precision-modifiers/29520744#29520744", "title": "e format in printf() and precision modifiers", "body": "<p>The first <code>2</code> in <code>\"%2.2e\"</code> is the <em>minimum</em> character width to print.  <code>1.20e+03</code> is 8 characters which is more than 2.  </p>\n\n<p><code>e</code> directs that the number is printed: (sign), 1 digit, <code>'.'</code>, followed by some digits and an exponent.</p>\n\n<p>The 2nd <code>2</code> in <code>\"%2.2e\"</code> is the number of digits after the decimal point to print.  6 is used if this 2nd value is not provided.</p>\n"}], "owner": {"reputation": 179, "user_id": 2898281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/FP3VV.png?s=128&g=1", "display_name": "pb.", "link": "https://stackoverflow.com/users/2898281/pb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4447, "favorite_count": 1, "accepted_answer_id": 29520329, "answer_count": 4, "score": 1, "last_activity_date": 1573222687, "creation_date": 1428510345, "question_id": 29520231, "link": "https://stackoverflow.com/questions/29520231/e-format-in-printf-and-precision-modifiers", "title": "e format in printf() and precision modifiers", "body": "<p>Could you explain me why line:</p>\n\n<blockquote>\n  <p>printf(\"Value %2.2e \",  1201.0);</p>\n</blockquote>\n\n<p>give a result: <strong>Value 1.20e+03</strong> </p>\n\n<p>not just a <strong>12.01e2?</strong> </p>\n\n<p>My way of thinking: default number is 1201.0, specifier tells are that there should be 2 numbers after the digit. </p>\n\n<p>Please explain me what is wrong? </p>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 7216, "user_id": 1030449, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/4uEa5.png?s=128&g=1", "display_name": "Kalel Wade", "link": "https://stackoverflow.com/users/1030449/kalel-wade"}, "edited": false, "score": 0, "creation_date": 1428509536, "post_id": 29519841, "comment_id": 47194741, "body": "What error or debug info do you get when it crashes?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1428509580, "post_id": 29519841, "comment_id": 47194783, "body": "<code>FUN(&amp;ARR1[i]);</code> : <code>i</code> is 20, this is out of bound. just call <code>FUN(ARR1);</code> then print use for-loop;"}, {"owner": {"reputation": 2075, "user_id": 2724125, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/KlwGM.jpg?s=128&g=1", "display_name": "Amit G", "link": "https://stackoverflow.com/users/2724125/amit-g"}, "edited": false, "score": 1, "creation_date": 1428509581, "post_id": 29519841, "comment_id": 47194784, "body": "ARR2[20]; line2 from function FUN() looks like the culprit"}], "answers": [{"comments": [{"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "edited": false, "score": 1, "creation_date": 1428509691, "post_id": 29519964, "comment_id": 47194864, "body": "Also he needs to get rid of <code>ARR2[20];</code>"}, {"owner": {"reputation": 19, "user_id": 4686126, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-GfQ5mnBbX50/AAAAAAAAAAI/AAAAAAAAAC0/NiIj52YWt2Y/photo.jpg?sz=128", "display_name": "Gabriella Coronell", "link": "https://stackoverflow.com/users/4686126/gabriella-coronell"}, "edited": false, "score": 0, "creation_date": 1428514975, "post_id": 29519964, "comment_id": 47197993, "body": "I figured it out with your help. Thanks!!"}], "tags": [], "owner": {"reputation": 20231, "user_id": 1342730, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/36543a7316596ec6e930bc8c996bf14b?s=128&d=identicon&r=PG", "display_name": "mathematician1975", "link": "https://stackoverflow.com/users/1342730/mathematician1975"}, "is_accepted": true, "score": 1, "last_activity_date": 1428509753, "last_edit_date": 1428509753, "creation_date": 1428509659, "answer_id": 29519964, "question_id": 29519841, "link": "https://stackoverflow.com/questions/29519841/program-that-calls-integers-and-uses-function-to-add-a-number-to-user-input-cras/29519964#29519964", "title": "Program that calls integers and uses function to add a number to user input crashing", "body": "<p>When you reach this line</p>\n\n<pre><code>FUN(&amp;ARR1[i]);\n</code></pre>\n\n<p>the value of your <code>i</code> variable is 20 so you are accessing the 21st element in <code>ARR</code> which is probably giving you an access violation. If you replace this line with </p>\n\n<pre><code>FUN(ARR1);\n</code></pre>\n\n<p>and remove the line</p>\n\n<pre><code>ARR2[20];\n</code></pre>\n\n<p>from your function <code>FUN</code> you might get the behaviour you are expecting</p>\n"}, {"tags": [], "owner": {"reputation": 5511, "user_id": 4516316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBirF.jpg?s=128&g=1", "display_name": "Arun A S", "link": "https://stackoverflow.com/users/4516316/arun-a-s"}, "is_accepted": false, "score": 1, "last_activity_date": 1428510085, "creation_date": 1428510085, "answer_id": 29520129, "question_id": 29519841, "link": "https://stackoverflow.com/questions/29519841/program-that-calls-integers-and-uses-function-to-add-a-number-to-user-input-cras/29520129#29520129", "title": "Program that calls integers and uses function to add a number to user input crashing", "body": "<p>After your first for loop, <code>i</code> get's the value <code>20</code> but <code>ARR1</code> is indexed <code>0</code> to <code>19</code>. So, you might get a Segmentation Fault when you call</p>\n\n<pre><code>FUN(&amp;ARR1[i]);\n</code></pre>\n\n<p>You should change that to</p>\n\n<pre><code>FUN(ARR1);\n</code></pre>\n\n<p>Also, in your function <code>void FUN(int ARR2[])</code> , you have</p>\n\n<pre><code>ARR2[20];\n</code></pre>\n\n<p>Which also causes this error. Remove it.</p>\n\n<p>You are also giving output the wrong way. You are doing</p>\n\n<pre><code>printf(\"The new numbers are: %i\", ARR1[i]);\n</code></pre>\n\n<p>which also tries to access <code>ARR1[20]</code> , again causing problems.</p>\n\n<p>You should change it to</p>\n\n<pre><code>  printf(\"The new numbers are: \\n\");\n  for ( i=0 ; i &lt; 20 ; i++)\n     printf(\"%d\\n\", ARR1[i]);\n</code></pre>\n\n<p>You should change your code to</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid FUN(int ARR2[]);\n\nint main()\n{\n  int i=0;\n  int ARR1[20];\n  printf(\"Please enter 20 integers.\\n\");\n\n  for(i=0; i&lt;20; i++) // switch back to 20\n  {\n    scanf(\"%i\", &amp;ARR1[i]);\n  }\n\n  FUN(ARR1);\n  printf(\"The new numbers are: \\n\");\n  for ( i=0 ; i &lt; 20 ; i++)\n     printf(\"%d\\n\", ARR1[i]);\n\n  return 0;\n}\n\nvoid FUN(int ARR2[])\n{\n    int i=0;\n\n    for(i=0;i&lt;20;i++)\n        ARR2[i]+=5;\n}\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 4686126, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-GfQ5mnBbX50/AAAAAAAAAAI/AAAAAAAAAC0/NiIj52YWt2Y/photo.jpg?sz=128", "display_name": "Gabriella Coronell", "link": "https://stackoverflow.com/users/4686126/gabriella-coronell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 29519964, "answer_count": 2, "score": 0, "last_activity_date": 1428510085, "creation_date": 1428509309, "last_edit_date": 1428509758, "question_id": 29519841, "link": "https://stackoverflow.com/questions/29519841/program-that-calls-integers-and-uses-function-to-add-a-number-to-user-input-cras", "title": "Program that calls integers and uses function to add a number to user input crashing", "body": "<p>Okay so I am trying to make my program ask for user integers (all working fine) and then call the function, which adds 5 to each array element, which i think is fine? then i need to print in the main program: the original integers with 5 added to them. anyone see what is wrong? my program crashes </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid FUN(int ARR2[]);\n\nint main()\n{\n  int i=0;\n  int ARR1[20];\n  printf(\"Please enter 20 integers.\\n\");\n\n  for(i=0; i&lt;20; i++) // switch back to 20\n  {\n    scanf(\"%i\", &amp;ARR1[i]);\n  }\n\n  FUN(&amp;ARR1[i]);\n  printf(\"The new numbers are: %i\", ARR1[i]);\n\n  return 0;\n}\n\nvoid FUN(int ARR2[])\n{\n    int i=0;\n    ARR2[20];\n\n    for(i=0;i&lt;20;i++)\n        ARR2[i]+=5;\n}\n</code></pre>\n"}, {"tags": ["c", "math", "random", "graphics", "bitmap"], "comments": [{"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1428510201, "post_id": 29519839, "comment_id": 47195160, "body": "<a href=\"http://stackoverflow.com/questions/4060478/how-to-randomly-but-evenly-distribute-nodes-on-a-plane/24947180#24947180\" title=\"how to randomly but evenly distribute nodes on a plane\">stackoverflow.com/questions/4060478/&hellip;</a>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1428511568, "post_id": 29519839, "comment_id": 47195973, "body": "uniformly scattered?"}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1428512180, "post_id": 29520738, "comment_id": 47196370, "body": "<code>for (int i = size; i &gt; 0; i-- {</code> will index outside the array when you use <code>&amp;arr[i]</code>."}, {"owner": {"reputation": 121, "user_id": 2551017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5eedf55445558352ee6049ca45a9cbbc?s=128&d=identicon&r=PG", "display_name": "user2551017", "link": "https://stackoverflow.com/users/2551017/user2551017"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1428513011, "post_id": 29520738, "comment_id": 47196854, "body": "Thanks for the catch, modified the answer."}], "tags": [], "owner": {"reputation": 121, "user_id": 2551017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5eedf55445558352ee6049ca45a9cbbc?s=128&d=identicon&r=PG", "display_name": "user2551017", "link": "https://stackoverflow.com/users/2551017/user2551017"}, "is_accepted": false, "score": 0, "last_activity_date": 1428512922, "last_edit_date": 1428512922, "creation_date": 1428511935, "answer_id": 29520738, "question_id": 29519839, "link": "https://stackoverflow.com/questions/29519839/how-to-randomly-choose-screen-positions-for-drawing-same-bitmap/29520738#29520738", "title": "How to randomly choose screen positions for drawing same bitmap", "body": "<ol>\n<li>Divide the entire screen to tiles:</li>\n</ol>\n\n<p>(0, 0) - (20, 20) Tile #0 <br>\n(21, 0) - (21, 20) Tile #1 <br>\n... <br>\n(299, 0) - (319, 20) Tile #14 <br>\n(0, 20) - (20, 40) Tile #15 <br>\n... <br>\n(299, 459) - (319, 478) Tile #383 <br></p>\n\n<ol start=\"2\">\n<li><p>Create an array of size 384, such that arr[i] = i<br>\nint arr[384]; <br>\nfor (int i = 0; i &lt; 384; i++) {<br>\n    arr[i] = i;<br>\n}<br></p></li>\n<li><p>Randomize the contents of the array:<br>\nvoid randomize(int arr[], int size) {<br>\n    for (int i = size - 1; i > 0; i-- {<br>\n        int place = rand(i);<br>\n        swap(&amp;arr[i], &amp;arr[place]);<br>\n    }<br>\n}<br></p></li>\n<li><p>Use contents of the first 3 cells of the array to choose tiles you set in step 1<br></p></li>\n</ol>\n"}], "owner": {"reputation": 584, "user_id": 4642538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a644d5166f1cbb8ce07d4b66d872df37?s=128&d=identicon&r=PG&f=1", "display_name": "sray", "link": "https://stackoverflow.com/users/4642538/sray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1428512922, "creation_date": 1428509308, "last_edit_date": 1428510788, "question_id": 29519839, "link": "https://stackoverflow.com/questions/29519839/how-to-randomly-choose-screen-positions-for-drawing-same-bitmap", "title": "How to randomly choose screen positions for drawing same bitmap", "body": "<p>I am trying to draw a 20x20 size bitmap at random positions on the screen. I want that the bitmaps should not overlap each other and should be scattered uniformly.</p>\n\n<p>For accomplishing this, I am generating the positions as below -</p>\n\n<pre><code>void function() {\n   int bitmap_size = 20*20;\n   int i, width = 320, height = 480;\n   int numslots = width*height/bitmap_size;\n\n   int *array = malloc(sizeof(int)*numslots);\n   for(i=0; i&lt;numslots; i++)\n      array[i] = i;\n\n   // Randomize pixel indices\n   for(i=0; i&lt;numslots; i++) {\n      int x = (rand()%(numslots-i)) + i;\n      swap(array+i, array+x);\n   }\n\n   // Generate positions for 20 bitmaps\n   for(i=0; i&lt;20; i++) {\n      int pos = array[i];\n      pos *= bitmap_size;\n      int y = pos / height;\n      int x = pos % width;\n      printf(\"%d, %d\\n\", x, y);\n   }\n\n   free(array);\n}\n</code></pre>\n\n<p>However, when i run this code, the pixel positions are somewhat cluttered as you can see from the sample output (x, y) below for 20 positions -</p>\n\n<pre><code>240, 85\n160, 255\n80, 37\n240, 115\n80, 280\n160, 118\n0, 223\n80, 170\n80, 147\n240, 45\n0, 253\n160, 225\n160, 261\n0, 66\n80, 230\n80, 30\n0, 236\n80, 27\n160, 238\n0, 200\n</code></pre>\n\n<p>3 positions are at x=240, 5 positions are at x=160 and x=0 each and 7 positions are at x=80. How to generate more uniformly scattered locations for the bitmaps?</p>\n"}, {"tags": ["c", "compiler-errors"], "comments": [{"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1428508509, "post_id": 29519468, "comment_id": 47194096, "body": "Post code <i>here</i>, not on external sites."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1428508525, "post_id": 29519468, "comment_id": 47194101, "body": "Do not ignore <code>scanf()</code>&#39;s return value."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1428508574, "post_id": 29519468, "comment_id": 47194145, "body": "You need to find where the problem is by bisection.  Place <code>#if 0</code> and <code>#endif</code> around half the code and see whether the problem is still there.  If so, it&#39;s in what is not commented out; if it went, it is probably in the commented out section.  Rinse and repeat until it is obvious what the problem is."}], "answers": [{"comments": [{"owner": {"reputation": 434, "user_id": 3703709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7935f2798b555f61085fd5827c9095?s=128&d=identicon&r=PG&f=1", "display_name": "mstbaum", "link": "https://stackoverflow.com/users/3703709/mstbaum"}, "edited": false, "score": 0, "creation_date": 1428509692, "post_id": 29519631, "comment_id": 47194865, "body": "I think technically the missing brace was from one of the for loops because Idt OP was trying to return <code>count</code> after one iteration of the outer loop."}], "tags": [], "owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "is_accepted": false, "score": 5, "last_activity_date": 1428508803, "creation_date": 1428508803, "answer_id": 29519631, "question_id": 29519468, "link": "https://stackoverflow.com/questions/29519468/c-error-expected-declaration-or-statement-at-end-of-input/29519631#29519631", "title": "C error: expected declaration or statement at end of input", "body": "<p>Run your code through <code>indent</code>. It can help you find this sort of problem very quickly.</p>\n\n<p><a href=\"http://pastebin.com/AxBtf7c6\">Here's the output from your code.</a> As you can see, the problem is caused by a missing brace at the end of <code>count_match()</code>:</p>\n\n<pre><code>int\ncount_match(int x[][MAX], int y[], int size, int r)\n{\n        int             i         , j, count;\n        for (i = 0; i &lt; size; i++) {\n                for (j = 0; j &lt; size; j++) {\n                        if (y[i] == x[r][j])\n                                count++;\n                }\n                return count;\n        }\n /*** CLOSING BRACE MISSING HERE ***/\n        int             closest_row(int x[][MAX], int y[], int size){\n                int             l         , i, j;\n                              //counters\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4764899, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VWKtWhyQzt0/AAAAAAAAAAI/AAAAAAAAASA/OrvDRR-kQxM/photo.jpg?sz=128", "display_name": "hotelmariofan", "link": "https://stackoverflow.com/users/4764899/hotelmariofan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5953, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1428511231, "creation_date": 1428508370, "last_edit_date": 1428511231, "question_id": 29519468, "link": "https://stackoverflow.com/questions/29519468/c-error-expected-declaration-or-statement-at-end-of-input", "title": "C error: expected declaration or statement at end of input", "body": "<p>Alright, so from what I've seen, it seems these errors usually show up whenever there's a semicolon missing, or a misplaced curly-brace or something of that nature. I'm surely just missing it somehow, but I'm not able to find where the error is, or if it is due to an error of that sort. This error in pointing toward line 235, so the end of the last function. </p>\n\n<p>This is the code</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;time.h&gt;\n#define MAX 100\n\nvoid display_menu();\nint check_option(int option);\nint check_size(int size);\nvoid initialize_2Darray(int x[][MAX], int size);\nvoid print_2Darray(int x[][MAX], int size);\nvoid initialize_1Darray(int y[], int size);\nvoid print_1Darray(int y[], int size);\nint search_min(int x[][MAX], int r, int c, int size);\nint count_match(int x[][MAX], int y[], int size, int r);\nint closest_row(int x[][MAX], int y[], int size);\nvoid sort_1Darray(int y[], int size);\nvoid sort_2Darray(int x[][MAX], int size);\n\nint main()\n{\n        int size, r, c, option;\n        int exit = 0; //exits program when = 1\n        int x[MAX][MAX], y[MAX];\n        srand(time(NULL));\n        printf(\"Enter the size: \");\n        scanf(\"%d\", &amp;size);\n        while(check_size(size) == 0) {\n                printf(\"\\nInvalid input, enter the size of the array again: \");\n                scanf(\"%d\", &amp;size);\n        }\n        while(exit != 6) {\n            initialize_2Darray(x, size);\n            initialize_1Darray(y, size);\n            display_menu();\n            scanf(\"%d\", &amp;option);\n            while(check_option(option) == 0) {\n                printf(\"Invalid option, enter again: \");\n                scanf(\"%d\", &amp;option);\n            }\n            //Search Min Operation\n            if(option == 1) {\n                print_2Darray(x, size);\n                printf(\"Enter the row: \");\n                scanf(\"%d\", &amp;r);\n                printf(\"\\nEnter the col: \");\n                scanf(\"%d\", &amp;c);\n                printf(\"The smallest number present in row %d and col %d is %d\", r, c, search_min(x, r, c, size));\n            }\n            //Count Matches Op.\n            else if(option == 2) {\n                printf(\"Count Matches Operation\\n\\n2D array\\n\");\n                print_2Darray(x, size);\n                printf(\"\\n1D array\\n\");\n                print_1Darray(y, size);\n                printf(\"\\nEnter the row: \");\n                scanf(\"%d\", &amp;r);\n                if(count_match(x, y, size, r) &gt; 0)\n                        printf(\"There are %d matches from 1D array present in 2D array\", count_match(x, y, size, r));\n                else\n                        printf(\"There are no numbers from 1D array present in 2D array\");\n            }\n            //Closest Row Op.\n            else if(option == 3) {\n                printf(\"\\nClosest Row Operation\\n\\n2D array\\n\");\n                print_2Darray(x, size);\n                printf(\"\\n1D array\\n\");\n                print_1Darray(y, size);\n                printf(\"Row closest to the 1D array is row %d\", closest_row(x, y, size));\n            }\n            //Sort 1D Array Op.\n            else if(option == 4) {\n                printf(\"Sort 1D Array Operation\\n\\n1D Array before sorting:\\n\");\n                print_1Darray(y, size);\n                sort_1Darray(y, size);\n                printf(\"\\n\\n1D Array after sorting:\\n\");\n                print_1Darray(y, size);\n            }\n            //Sort 2D Array Op.\n            else if(option == 5) {\n                printf(\"\\nSort 2D Array Option\\n\\n2D Array before sorting:\\n\");\n                print_2Darray(x, size);\n                sort_2Darray(x, size);\n                printf(\"\\n\\n2D Array after sorting:\\n\");\n                print_2Darray(x, size);\n            }\n            //Exit\n            else if(option == 6)\n                exit = 6;\n        }\n        return 0;\n}\n\nvoid display_menu()\n{\n        printf(\"\\nArray operations, your options are:\\n\\n1: Search Min\\n2: Count Matches\\n3: Closest Row\\n4: Sort 1D Array\\n5: Sort 2D Array\\n6: Exit\\nEnter the operation you want to perform: \");\n}\n\nint check_option(int option)\n{\n    if(option &gt; 0 &amp;&amp; option &lt; 7)\n        return 1;\n    else\n        return 0;\n}\n\nint check_size(int size)\n{\n    if(size &gt; 0 &amp;&amp; size &lt;= 100)\n       return 1;\n    else\n       return 0;\n}\n\nvoid initialize_2Darray(int x[][MAX], int size)\n{\n    int i, s; //counters\n    for(i=0; i &lt; size; i++) {\n        for(s=0; s &lt; size; s++) {\n            x[i][s] = rand()%10;\n        }\n    }\n}\n\nvoid print_2Darray(int x[][MAX], int size)\n{\n    int i, s; //counters\n    for(i=0; i &lt; size; i++) {\n        printf(\"\\n\");\n        for(s=0; s &lt; size; s++) {\n            printf(\"%d \", x[i][s]);\n        }\n    }\n    printf(\"\\n\");\n}\n\nvoid initialize_1Darray(int y[], int size)\n{\n    int i, r;\n    for(i=0; i &lt; size; i++) {\n        r = rand()%10;\n        y[i] = r;\n    }\n}\n\nvoid print_1Darray(int y[], int size)\n{\n    int i;\n    //Prints array values until (s)ize is reached\n    for(i=0; i &lt; size; i++) {\n        printf(\"%d \", y[i]);\n    }\n}\n\nint search_min(int x[][MAX], int r, int c, int size)\n{\n    int i, j; //counters\n    int min = 9;\n    for(i=0; i &lt; size; i++) {\n        if(x[r][i] &lt; min) {\n            min = x[r][i];\n        }\n    }\n    for(j=0; j &lt; size; j++) {\n        if(x[j][c] &lt; min) {\n            min = x[j][c];\n        }\n    }\n    return min;\n}\n\nint count_match(int x[][MAX], int y[], int size, int r)\n{\n    int i, j, count;\n    for(i=0; i &lt; size; i++) {\n        for(j=0; j &lt; size; j++) {\n            if(y[i] == x[r][j])\n                count++;\n        }\n    return count;\n}\n\nint closest_row(int x[][MAX], int y[], int size)\n{\n    int l, i, j; //counters\n    int sum = 0;\n    int dif = 0;\n    int row, totaldif; //best matching row &amp; total dif\n    for(l=0; l &lt; size; l++) {\n        for(i=0; i &lt; size; i++) {\n            for(j=0; j &lt; size; j++) {\n                dif = abs(y[j] - x[i][j]);\n                sum += dif;\n            }\n            if(sum &lt; totaldif) {\n                totaldif = sum;\n                row = i;\n            }\n\n            sum = 0;\n        }\n    }\n    return row;\n}\n\nvoid sort_1Darray(int y[], int size)\n{\n    int a, b, temp;\n    //Loops through the array, swapping values until in proper order of ascension\n    for(a = 0; a &lt; size; a++) {\n        for(b = 0; b &lt; size-1; b++) {\n            if(y[b] &gt; y[b+1]) {\n                temp = y[b+1];\n                y[b+1] = y[b];\n                y[b] = temp;\n            }\n        }\n    }\n}\n\nvoid sort_2Darray(int x[][MAX], int size)\n{\n    int a, b, c, temp;\n    //Loops through the array, swapping values until in proper order of ascension\n    for(c=0; c &lt; size; c++) {\n        for(a = 0; a &lt; size; a++) {\n            for(b = 0; b &lt; size-1; b++) {\n                if(x[a][b] &gt; x[a][b+1]) {\n                    temp = x[a][b+1];\n                    x[a][b+1] = x[a][b];\n                    x[a][b] = temp;\n                }\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 2, "creation_date": 1428508424, "post_id": 29519358, "comment_id": 47194040, "body": "It seems that this question is really an issue with your compiler and not the program itself."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1428508527, "post_id": 29519358, "comment_id": 47194104, "body": "It looks like you project settings/makefile are not set up correctly."}, {"owner": {"reputation": 3, "user_id": 4643369, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u0qc1.jpg?s=128&g=1", "display_name": "La V\u0103n Ti\u1ebfn", "link": "https://stackoverflow.com/users/4643369/la-v%c4%83n-ti%e1%ba%bfn"}, "edited": false, "score": 0, "creation_date": 1428508954, "post_id": 29519358, "comment_id": 47194388, "body": "Thank for the advise, but when I paste the code to Code:Blocks and run, it get a ton of words that I really don&#39;t understand. Here: &quot;&quot;TESTa - Debug&quot;: The compiler&#39;s setup (GNU GCC Compiler) is invalid, so Code::Blocks cannot find/run the compiler. Probably the toolchain path within the compiler options is not setup correctly?! (Do you have a compiler installed?) Goto &quot;Settings-&gt;Compiler...-&gt;Global compiler settings-&gt;GNU GCC Compiler-&gt;Toolchain executables&quot; and fix the compiler&#39;s setup. Skipping... Nothing to be done (all items are up-to-date).&quot;"}, {"owner": {"reputation": 3, "user_id": 4643369, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u0qc1.jpg?s=128&g=1", "display_name": "La V\u0103n Ti\u1ebfn", "link": "https://stackoverflow.com/users/4643369/la-v%c4%83n-ti%e1%ba%bfn"}, "edited": false, "score": 0, "creation_date": 1428509213, "post_id": 29519358, "comment_id": 47194548, "body": "After I follow the instruction and re-build, it promp another error: &quot;||=== Build: Debug in TESTa (compiler: GNU GCC Compiler) ===|  can&#39;t create obj\\Debug\\Test.o||No such file or directory| ||=== Build failed: 1 error(s), 0 warning(s) (0 minute(s), 5 second(s)) ===| &quot;"}, {"owner": {"reputation": 2556, "user_id": 3488231, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/da4ac79b71c44d696f3567d4b53f6239?s=128&d=identicon&r=PG&f=1", "display_name": "user12205", "link": "https://stackoverflow.com/users/3488231/user12205"}, "edited": false, "score": 0, "creation_date": 1428510879, "post_id": 29519358, "comment_id": 47195542, "body": "I&#39;d probably just do <code>system(&quot;cls&quot;);</code>."}, {"owner": {"reputation": 3, "user_id": 4643369, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u0qc1.jpg?s=128&g=1", "display_name": "La V\u0103n Ti\u1ebfn", "link": "https://stackoverflow.com/users/4643369/la-v%c4%83n-ti%e1%ba%bfn"}, "reply_to_user": {"reputation": 2556, "user_id": 3488231, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/da4ac79b71c44d696f3567d4b53f6239?s=128&d=identicon&r=PG&f=1", "display_name": "user12205", "link": "https://stackoverflow.com/users/3488231/user12205"}, "edited": false, "score": 0, "creation_date": 1428817789, "post_id": 29519358, "comment_id": 47320692, "body": "@ace: But using system(...) funtion is very creepy."}, {"owner": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "edited": false, "score": 0, "creation_date": 1550595448, "post_id": 29519358, "comment_id": 96322713, "body": "To compile a Windows code in PellesC requires Microsoft extensions enablled. If you&#39;re using the IDE open project options dialog and select Microsofte extensions. If you&#39;re compiling from command line add the switch /Ze to the compiler command."}], "owner": {"reputation": 3, "user_id": 4643369, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u0qc1.jpg?s=128&g=1", "display_name": "La V\u0103n Ti\u1ebfn", "link": "https://stackoverflow.com/users/4643369/la-v%c4%83n-ti%e1%ba%bfn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 182, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1428508598, "creation_date": 1428508033, "last_edit_date": 1428508598, "question_id": 29519358, "link": "https://stackoverflow.com/questions/29519358/fatal-error-with-a-manual-clear-screen-function", "title": "Fatal error with a manual clear screen function", "body": "<p>I'm finding a proper solution for clearing the screen without include conio.h, and <a href=\"http://www.cplusplus.com/forum/articles/10515/#msg49080\" rel=\"nofollow\">found this</a>.</p>\n\n<p>I use CPU <em>AMD Athlon X64 3200+</em> and Windows XP SP3</p>\n\n<p>My code:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;windows.h&gt;\n\nvoid Clrscr(void);\n\nint main(void) {\n    puts(\"Are you ready?\");\n    getchar();\n    Clrscr();\n    puts(\"See? The screen is cleared ^_^\");\n    return 0;\n}\n\nvoid Clrscr(void) {\n    HANDLE hStdOut;\n    CONSOLE_SCREEN_BUFFER_INFO csbi;\n    DWORD count;\n    DWORD cellCount;\n    COORD homeCoords={0,0};\n    hStdOut=GetStdHandle(STD_OUTPUT_HANDLE);\n    if(hStdOut==INVALID_HANDLE_VALUE)\n        return;\n    if(!GetConsoleScreenBufferInfo(hStdOut,&amp;csbi))\n        return;\n    if(!FillConsoleOutputCharacter(hStdOut,(TCHAR)' ',cellCount,homeCoords,&amp;count))\n        return;\n    if(!FillConsoleOutputAttribute(hStdOut,csbi.wAttributes,cellCount,homeCoords,&amp;count))\n        return;\n    SetConsoleCursorPosition(hStdOut,homeCoords);\n}\n</code></pre>\n\n<p>But when I test it in Pelles C IDE I get the error \"<strong>C:\\Program Files\\PellesC\\Include\\Win\\winnt.h(559): fatal error #1014: #error: \"No target architecture\".</strong>\"</p>\n\n<p>Then I double click on that line and it get me to <em>winnt.h</em> and highlight row 559, here is a piece of code with include row 559</p>\n\n<pre><code>#if defined(_68K_) || defined(_MPPC_) || defined(_M_IA64) || defined(_M_AMD64)\n\n#define Int32x32To64(a,b)  (((__int64)((long)(a))) * ((__int64)((long)(b))))\n#define UInt32x32To64(a,b)  (((unsigned __int64)((unsigned int)(a))) * ((unsigned __int64)((unsigned int)(b))))\n\n#define Int64ShllMod32(a,b)  (((unsigned __int64)(a)) &lt;&lt; (b))\n#define Int64ShraMod32(a,b)  (((__int64)(a)) &gt;&gt; (b))\n#define Int64ShrlMod32(a,b)  (((unsigned __int64)(a)) &gt;&gt; (b))\n\n#elif defined(_M_IX86)\n\n#define Int32x32To64(a, b)  ((__int64)(((__int64)((long)(a))) * ((long)(b))))\n#define UInt32x32To64(a, b) ((unsigned __int64)(((unsigned __int64)((unsigned int)(a))) * ((unsigned int)(b))))\n\nULONGLONG NTAPI Int64ShllMod32(ULONGLONG, DWORD);\nLONGLONG NTAPI Int64ShraMod32(LONGLONG, DWORD);\nULONGLONG NTAPI Int64ShrlMod32(ULONGLONG, DWORD);\n\n__inline ULONGLONG NTAPI Int64ShllMod32(ULONGLONG Value, DWORD ShiftCount) {\n    __asm {\n        mov ecx, ShiftCount\n        mov eax, dword ptr[Value]\n        mov edx, dword ptr[Value +4]\n        shld edx, eax, cl\n        shl eax, cl\n    }\n}\n\n__inline LONGLONG NTAPI Int64ShraMod32(LONGLONG Value, DWORD ShiftCount) {\n    __asm {\n        mov ecx, ShiftCount\n        mov eax, dword ptr[Value]\n        mov edx, dword ptr[Value +4]\n        shrd eax, edx, cl\n        sar edx, cl\n    }\n}\n\n__inline ULONGLONG NTAPI Int64ShrlMod32(ULONGLONG Value, DWORD ShiftCount) {\n    __asm {\n        mov ecx, ShiftCount\n        mov eax, dword ptr[Value]\n        mov edx, dword ptr[Value +4]\n        shrd eax, edx, cl\n        shr edx, cl\n    }\n}\n\n#elif defined(RC_INVOKED)\n#else\n#error \"No target architecture\" //line 559\n#endif /* machine */\n</code></pre>\n\n<p>I don't know what is going on, I'm new to C programming and I'm just trying to make my coding style more standard.\nPlease let me know what's happened and how to fix this.\nThanks for reading my question!</p>\n"}, {"tags": ["ios", "objective-c", "c", "math", "arm"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 2, "creation_date": 1428508411, "post_id": 29519270, "comment_id": 47194033, "body": "There is something suspicious about your armv7 result - post the actual code you used, the build command line, compiler version, etc. Also, did you use <code>double</code> or did you use <code>CGFloat</code> ?"}, {"owner": {"reputation": 329, "user_id": 2996639, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4eBjp.jpg?s=128&g=1", "display_name": "maross", "link": "https://stackoverflow.com/users/2996639/maross"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1428509786, "post_id": 29519270, "comment_id": 47194926, "body": "I&#39;ve edited the question, I used Apple LLVM 6.0 with Xcode 6.2"}, {"owner": {"reputation": 24609, "user_id": 1974224, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/rQQMq.png?s=128&g=1", "display_name": "Cristik", "link": "https://stackoverflow.com/users/1974224/cristik"}, "edited": false, "score": 0, "creation_date": 1428515905, "post_id": 29519270, "comment_id": 47198510, "body": "There is a similar question, but for Visual Studio (PC) builds: <a href=\"http://stackoverflow.com/questions/22710272/difference-in-floating-point-arithmetics-between-x86-and-x64\" title=\"difference in floating point arithmetics between x86 and x64\">stackoverflow.com/questions/22710272/&hellip;</a>. It might be that a similar explanation applies for the arm family of processors too."}, {"owner": {"reputation": 3870, "user_id": 2336725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20a0b96a26cf233d752469445595f872?s=128&d=identicon&r=PG", "display_name": "Teepeemm", "link": "https://stackoverflow.com/users/2336725/teepeemm"}, "edited": false, "score": 2, "creation_date": 1428520388, "post_id": 29519270, "comment_id": 47201216, "body": "Your &quot;complete code&quot; doesn&#39;t use the values you originally posted.  If those four lines are enough to cause the problem, don&#39;t post more.  But do post the other information."}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1428565378, "post_id": 29519270, "comment_id": 47218373, "body": "integrated FPU or software?"}, {"owner": {"reputation": 8600, "user_id": 450758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2ccb382a98f56c846d0e064f44920dc?s=128&d=identicon&r=PG", "display_name": "marko", "link": "https://stackoverflow.com/users/450758/marko"}, "reply_to_user": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1428738976, "post_id": 29519270, "comment_id": 47299487, "body": "@Spektre: These are Apple ARM parts. They&#39;re all high-end ARM cores with FPUs and NEON.  Furthermore, Apple doesn&#39;t indulge in the soft-float-abi brain-damange found on Android."}, {"owner": {"reputation": 8600, "user_id": 450758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2ccb382a98f56c846d0e064f44920dc?s=128&d=identicon&r=PG", "display_name": "marko", "link": "https://stackoverflow.com/users/450758/marko"}, "edited": false, "score": 1, "creation_date": 1428739035, "post_id": 29519270, "comment_id": 47299506, "body": "I would check the instructions generated for <code>double result = a &#47; (double)(b * c);</code> and check that it is double precision throughout.  You might try casting <code>a</code> to <code>double</code> for belt and braces, and I don&#39;t think you should need it.   The error is about 0.28%  Also, be aware that double precision floating point is expensive on ArmV7 parts- and likely, divide particularly so. You might want to check whether the default compiler flags don&#39;t enable a trade-off between less compliant IEEE 754 and higher performance."}, {"owner": {"reputation": 5482, "user_id": 3079266, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3957246a6593b75c3b706364f0c553d?s=128&d=identicon&r=PG&f=1", "display_name": "Mints97", "link": "https://stackoverflow.com/users/3079266/mints97"}, "edited": false, "score": 0, "creation_date": 1429892077, "post_id": 29519270, "comment_id": 47830815, "body": "There exists an alternative algorithm for floating point division, which technically finds the inverse of the divisor (via smt like the Newton\u2013Raphson method) and then performs multiplication. It&#39;s much faster than the classic long division (alias digit-recurrence algorithm/s) IEE 754-conforming implementation, but loses lots of precision. This could very well be the case. I also heard that sometimes other stuff (like Goldschmidt division) can be applied, too.."}, {"owner": {"reputation": 44714, "user_id": 581994, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d2ae9ac6fb51918297a0ce5dada0eb22?s=128&d=identicon&r=PG", "display_name": "Hot Licks", "link": "https://stackoverflow.com/users/581994/hot-licks"}, "edited": false, "score": 3, "creation_date": 1429901799, "post_id": 29519270, "comment_id": 47836626, "body": "For the &quot;wrong&quot; operation <code>b</code> (presumably <code>width</code>) has a value of 361 (yielding a result of  0.24986030696800732).  Has nothing to do with the precision of the operations.  (Reproduced this in Java, on a Windows-based PC.)"}], "answers": [{"comments": [{"owner": {"reputation": 44714, "user_id": 581994, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d2ae9ac6fb51918297a0ce5dada0eb22?s=128&d=identicon&r=PG", "display_name": "Hot Licks", "link": "https://stackoverflow.com/users/581994/hot-licks"}, "edited": false, "score": 0, "creation_date": 1429913859, "post_id": 29855115, "comment_id": 47842797, "body": "Plug in 361 for <code>b</code> and see what you get."}, {"owner": {"reputation": 89, "user_id": 457670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe9df40bfaf964e80323db62cbcd2f1a?s=128&d=identicon&r=PG", "display_name": "Andy Steinmann", "link": "https://stackoverflow.com/users/457670/andy-steinmann"}, "reply_to_user": {"reputation": 44714, "user_id": 581994, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d2ae9ac6fb51918297a0ce5dada0eb22?s=128&d=identicon&r=PG", "display_name": "Hot Licks", "link": "https://stackoverflow.com/users/581994/hot-licks"}, "edited": false, "score": 0, "creation_date": 1430132985, "post_id": 29855115, "comment_id": 47911013, "body": "I&#39;m sure that if you change results, you will get different results."}, {"owner": {"reputation": 44714, "user_id": 581994, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d2ae9ac6fb51918297a0ce5dada0eb22?s=128&d=identicon&r=PG", "display_name": "Hot Licks", "link": "https://stackoverflow.com/users/581994/hot-licks"}, "edited": false, "score": 0, "creation_date": 1430133938, "post_id": 29855115, "comment_id": 47911654, "body": "You will get <i>exactly</i> the &quot;bad&quot; value the OP gets, strongly suggesting that 361 is his input value.  Has nothing to do with compiler versions or floating point math -- it&#39;s down to the changes in the screen geometry."}], "tags": [], "owner": {"reputation": 89, "user_id": 457670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe9df40bfaf964e80323db62cbcd2f1a?s=128&d=identicon&r=PG", "display_name": "Andy Steinmann", "link": "https://stackoverflow.com/users/457670/andy-steinmann"}, "is_accepted": false, "score": 0, "last_activity_date": 1429900793, "creation_date": 1429900793, "answer_id": 29855115, "question_id": 29519270, "link": "https://stackoverflow.com/questions/29519270/objective-c-division-on-32-64-bit-device-produces-different-results/29855115#29855115", "title": "Objective-C division on 32/64-bit device produces different results", "body": "<p>Tested the code below in Xcode 6.3.1 using iOS 8.3 LLVM 6.1 on an iPad 3(armv7) and an iPhone 6 (arm64) and they produced the same values to at least 15 points of precision.</p>\n\n<pre><code>unsigned int a = 42033;\nunsigned int b = 360;\nunsigned int c = 466;\ndouble result = a / (double)(b * c);\n// on arm64 -&gt; result = 0.25055436337625181\n// on armv7 -&gt; result = 0.24986030696800732\n\nNSString *msg = [NSString stringWithFormat:@\"result: %.15f\", result];\n\n[[[UIAlertView alloc] initWithTitle:@\"\" message:msg delegate:nil cancelButtonTitle:@\"#jolo\" otherButtonTitles:nil] show];\n</code></pre>\n\n<p>That being said, Xcode 6.3 includes LVVM 6.1 and that includes changes for arm64 and floating point math.  See the Apple LLVM Compiler Version 6.1 section in the release notes.\n<a href=\"https://developer.apple.com/library/ios/releasenotes/DeveloperTools/RN-Xcode/Chapters/xc6_release_notes.html\" rel=\"nofollow\">https://developer.apple.com/library/ios/releasenotes/DeveloperTools/RN-Xcode/Chapters/xc6_release_notes.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 44714, "user_id": 581994, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d2ae9ac6fb51918297a0ce5dada0eb22?s=128&d=identicon&r=PG", "display_name": "Hot Licks", "link": "https://stackoverflow.com/users/581994/hot-licks"}, "is_accepted": false, "score": 0, "last_activity_date": 1429914108, "creation_date": 1429914108, "answer_id": 29858502, "question_id": 29519270, "link": "https://stackoverflow.com/questions/29519270/objective-c-division-on-32-64-bit-device-produces-different-results/29858502#29858502", "title": "Objective-C division on 32/64-bit device produces different results", "body": "<p>Java code:</p>\n\n<pre><code>public class Division {\n    public static void main(String[] args) {\n        int a = 42033;\n        int b = 360;\n        int c = 466;\n        double result = a / (double)(b * c);\n        System.out.println(\"Result = \" + result);\n        double result2 = (a - 1) / (double) (b * c);\n        double result3 = (a) / (double) ((b + 1) * c);\n        double result4 = (a) / (double) (b * (c + 1));\n        System.out.println(\"Result2 = \" + result2);\n        System.out.println(\"Result3 = \" + result3);\n        System.out.println(\"Result4 = \" + result4);\n    }\n}\n</code></pre>\n\n<p>Results:</p>\n\n<pre><code>C:\\JavaTools&gt;java Division\nResult = 0.2505543633762518\nResult2 = 0.250548402479733\nResult3 = 0.24986030696800732\nResult4 = 0.25001784439685937\n</code></pre>\n\n<p>As can be seen, the \"wrong\" results are explained by having a value for <code>b</code> other than what was stated by the OP.  Has nothing to do with the precision of the arithmetic.</p>\n"}], "owner": {"reputation": 329, "user_id": 2996639, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4eBjp.jpg?s=128&g=1", "display_name": "maross", "link": "https://stackoverflow.com/users/2996639/maross"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 460, "favorite_count": 4, "answer_count": 2, "score": 5, "last_activity_date": 1429914108, "creation_date": 1428507773, "last_edit_date": 1428511696, "question_id": 29519270, "link": "https://stackoverflow.com/questions/29519270/objective-c-division-on-32-64-bit-device-produces-different-results", "title": "Objective-C division on 32/64-bit device produces different results", "body": "<p>As described in the title, when I try to do the following divsion I get two different results depending on the architecture of the device:</p>\n\n<pre><code>unsigned int a = 42033;\nunsigned int b = 360;\nunsigned int c = 466\ndouble result = a / (double)(b * c);\n// on arm64 -&gt; result = 0.25055436337625181\n// on armv7 -&gt; result = 0.24986030696800732\n</code></pre>\n\n<p>Why the results do not match?</p>\n\n<p>According to Apple <a href=\"https://developer.apple.com/library/ios/documentation/General/Conceptual/CocoaTouch64BitGuide/Major64-BitChanges/Major64-BitChanges.html#//apple_ref/doc/uid/TP40013501-CH2-TPXREF103\" rel=\"nofollow\">64-Bit Transition Guide for Cocoa Touch</a> these data type have the same size in 32 and 64 bit runtime. </p>\n\n<p>EDIT</p>\n\n<p>The complete code:</p>\n\n<pre><code>#import \"UIImage+MyCategory.h\"\n\n#define CLIP_THRESHOLD 0.74 // if this much of the image is the clip color, leave it alone\n\ntypedef struct {\n    unsigned int leftNonColorIndex;\n    unsigned int rightNonColorIndex;\n    unsigned int nonColorCount;\n} scanLineResult;\n\nstatic inline scanLineResult scanOneLine(unsigned int *scanline, unsigned int count, unsigned int color, unsigned int mask) {\n    scanLineResult result = {UINT32_MAX, 0, 0};\n\n    for (int i = 0; i &lt; count; i++) {\n        if ((*scanline++ &amp; mask) != color) {\n            result.nonColorCount++;\n            result.leftNonColorIndex = MIN(result.leftNonColorIndex, i);\n            result.rightNonColorIndex = MAX(result.rightNonColorIndex, i);\n        }\n    }\n\n    return result;\n}\n\ntypedef struct {\n    unsigned int leftNonColorIndex;\n    unsigned int topNonColorIndex;\n    unsigned int rightNonColorIndex;\n    unsigned int bottomNonColorIndex;\n    unsigned int nonColorCount;\n\n    double colorRatio;\n} colorBoundaries;\n\nstatic colorBoundaries findTrimColorBoundaries(unsigned int *buffer,\n                                               unsigned int width,\n                                               unsigned int height,\n                                               unsigned int bytesPerRow,\n                                               unsigned int color,\n                                               unsigned int mask)\n{\n    colorBoundaries result = {UINT32_MAX, UINT32_MAX, 0, 0, 0.0};\n    unsigned int *currentLine = buffer;\n\n    for (int i = 0; i &lt; height; i++) {\n        scanLineResult lineResult = scanOneLine(currentLine, width, color, mask);\n        if (lineResult.nonColorCount) {\n            result.nonColorCount += lineResult.nonColorCount;\n            result.topNonColorIndex = MIN(result.topNonColorIndex, i);\n            result.bottomNonColorIndex = MAX(result.bottomNonColorIndex, i);\n            result.leftNonColorIndex = MIN(result.leftNonColorIndex, lineResult.leftNonColorIndex);\n            result.rightNonColorIndex = MAX(result.rightNonColorIndex, lineResult.rightNonColorIndex);\n        }\n\n        currentLine = (unsigned int *)((char *)currentLine + bytesPerRow);\n    }\n\n    double delta = result.nonColorCount / (double)(width * height);\n    result.colorRatio = 1.0 - delta;\n\n    return result;\n}\n\n@implementation UIImage (MyCategory)\n\n- (UIImage *)crop:(CGRect)rect {\n\n    rect = CGRectMake(rect.origin.x * self.scale,\n                      rect.origin.y * self.scale,\n                      rect.size.width * self.scale,\n                      rect.size.height * self.scale);\n\n    CGImageRef imageRef = CGImageCreateWithImageInRect([self CGImage], rect);\n    UIImage *result = [UIImage imageWithCGImage:imageRef\n                                          scale:self.scale\n                                    orientation:self.imageOrientation];\n    CGImageRelease(imageRef);\n    return result;\n}\n\n- (UIImage*)trimWhiteBorders {\n#ifdef __BIG_ENDIAN__\n    // undefined\n#else\n    const unsigned int whiteXRGB = 0x00ffffff;\n    // Which bits to actually check\n    const unsigned int maskXRGB = 0x00ffffff;\n#endif\n\n    CGImageRef image = [self CGImage];\n    CGBitmapInfo bitmapInfo = CGImageGetBitmapInfo(image);\n\n    // Only support default image formats\n    if (bitmapInfo != (kCGImageAlphaNoneSkipFirst | kCGBitmapByteOrder32Host))\n        return nil;\n\n    CGDataProviderRef dataProvider = CGImageGetDataProvider(image);\n    CFDataRef imageData = CGDataProviderCopyData(dataProvider);\n\n    colorBoundaries result = findTrimColorBoundaries((unsigned int *)CFDataGetBytePtr(imageData),\n                                                     (unsigned int)CGImageGetWidth(image),\n                                                     (unsigned int)CGImageGetHeight(image),\n                                                     (unsigned int)CGImageGetBytesPerRow(image),\n                                                     whiteXRGB,\n                                                     maskXRGB);\n\n    CFRelease(imageData);\n\n    if (result.nonColorCount == 0 || result.colorRatio &gt; CLIP_THRESHOLD)\n        return self;\n\n    CGRect trimRect = CGRectMake(result.leftNonColorIndex,\n                                 result.topNonColorIndex,\n                                 result.rightNonColorIndex - result.leftNonColorIndex + 1,\n                                 result.bottomNonColorIndex - result.topNonColorIndex + 1);\n\n\n    return [self crop:trimRect];\n}\n\n@end\n</code></pre>\n"}, {"tags": ["c++", "c", "operating-system"], "comments": [{"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 7, "creation_date": 1428507347, "post_id": 29519068, "comment_id": 47193269, "body": "What is wrong with <code>sizeof</code>?"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1428507404, "post_id": 29519068, "comment_id": 47193315, "body": "You&#39;re assuming a byte has eight bits."}, {"owner": {"reputation": 189, "user_id": 2923228, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/oUCDA.jpg?s=128&g=1", "display_name": "JY0284", "link": "https://stackoverflow.com/users/2923228/jy0284"}, "edited": false, "score": 0, "creation_date": 1428508206, "post_id": 29519068, "comment_id": 47193898, "body": "That means &#39;unsigned&#39; is not an official description in standard C?"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1428508341, "post_id": 29519068, "comment_id": 47193983, "body": "I tried to clarify your question based on your comments. If I failed to capture your intent, feel free to improve or rollback the edit."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1428508365, "post_id": 29519068, "comment_id": 47194005, "body": "Compiler will determine the size of the <code>int</code>, regardless to system. but you can use <code>int64_t</code> or <code>int32_t</code>."}, {"owner": {"reputation": 1459, "user_id": 669567, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/VOmJA.jpg?s=128&g=1", "display_name": "holgac", "link": "https://stackoverflow.com/users/669567/holgac"}, "edited": false, "score": 0, "creation_date": 1428508471, "post_id": 29519068, "comment_id": 47194066, "body": "If you mean getting 64-bit for 64-bit CPUs and 32-bit for 32-bit CPUs, <code>long</code> is usually used instead. note that int is 32 bit in 64-bit CPUs and for pointer-copying and storing, <code>long</code> or (more often) <code>unsigned long</code> are used to match CPU word size."}, {"owner": {"reputation": 189, "user_id": 2923228, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/oUCDA.jpg?s=128&g=1", "display_name": "JY0284", "link": "https://stackoverflow.com/users/2923228/jy0284"}, "edited": false, "score": 0, "creation_date": 1428508949, "post_id": 29519068, "comment_id": 47194381, "body": "Can I say the word length of long is always the same as the word length of CPU no matter I am using 32-bit OS or 64-bit OS?"}, {"owner": {"reputation": 1459, "user_id": 669567, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/VOmJA.jpg?s=128&g=1", "display_name": "holgac", "link": "https://stackoverflow.com/users/669567/holgac"}, "edited": false, "score": 0, "creation_date": 1428509152, "post_id": 29519068, "comment_id": 47194509, "body": "@JY___ yeah, it&#39;s guaranteed by the C standard. Check my comment in Jonathon&#39;s reply."}, {"owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1428512493, "post_id": 29519068, "comment_id": 47196552, "body": "@JohnBollinger: No, <code>num_copy</code> is unsigned, so not negative. Both the shift and the conversion from -1 are well defined (the conversion giving the largest representable value)."}, {"owner": {"reputation": 5284, "user_id": 2040925, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/191d1998634eaa0af6129682394dc560?s=128&d=identicon&r=PG", "display_name": "typ1232", "link": "https://stackoverflow.com/users/2040925/typ1232"}, "reply_to_user": {"reputation": 1459, "user_id": 669567, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/VOmJA.jpg?s=128&g=1", "display_name": "holgac", "link": "https://stackoverflow.com/users/669567/holgac"}, "edited": false, "score": 2, "creation_date": 1428512574, "post_id": 29519068, "comment_id": 47196602, "body": "@holgac Whether an architecture is 32-bit or 64-bit is typically determined by the size of pointers. I think even there are exceptions with weird data models. But <code>intptr_t</code> should be the better option than <code>long</code>. For example the data model on 64-bit Windows has 32-bit longs."}, {"owner": {"reputation": 1459, "user_id": 669567, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/VOmJA.jpg?s=128&g=1", "display_name": "holgac", "link": "https://stackoverflow.com/users/669567/holgac"}, "reply_to_user": {"reputation": 5284, "user_id": 2040925, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/191d1998634eaa0af6129682394dc560?s=128&d=identicon&r=PG", "display_name": "typ1232", "link": "https://stackoverflow.com/users/2040925/typ1232"}, "edited": false, "score": 0, "creation_date": 1428513258, "post_id": 29519068, "comment_id": 47196986, "body": "@typ1232 usually, but not always. word size actually represents CPU register size. There are some architectures using different sized addresses. I think the best way would be bit shifting a register in assembly."}], "answers": [{"comments": [{"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "reply_to_user": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 1, "creation_date": 1428507571, "post_id": 29519151, "comment_id": 47193446, "body": "@Angew Agreed, but I interpreted <i>&quot;system int size&quot;</i> to mean the size of <code>int</code> on your compiler."}, {"owner": {"reputation": 189, "user_id": 2923228, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/oUCDA.jpg?s=128&g=1", "display_name": "JY0284", "link": "https://stackoverflow.com/users/2923228/jy0284"}, "edited": false, "score": 0, "creation_date": 1428507974, "post_id": 29519151, "comment_id": 47193745, "body": "@Anger is right, it&#39;s different between compiler&#39;s int size and system&#39;s"}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "reply_to_user": {"reputation": 189, "user_id": 2923228, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/oUCDA.jpg?s=128&g=1", "display_name": "JY0284", "link": "https://stackoverflow.com/users/2923228/jy0284"}, "edited": false, "score": 0, "creation_date": 1428508013, "post_id": 29519151, "comment_id": 47193770, "body": "@JY___ I completely understand that. Your question was ambiguous."}, {"owner": {"reputation": 189, "user_id": 2923228, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/oUCDA.jpg?s=128&g=1", "display_name": "JY0284", "link": "https://stackoverflow.com/users/2923228/jy0284"}, "edited": false, "score": 0, "creation_date": 1428508080, "post_id": 29519151, "comment_id": 47193814, "body": "Can you help me with the correct title of this question?"}, {"owner": {"reputation": 1459, "user_id": 669567, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/VOmJA.jpg?s=128&g=1", "display_name": "holgac", "link": "https://stackoverflow.com/users/669567/holgac"}, "edited": false, "score": 0, "creation_date": 1428508538, "post_id": 29519151, "comment_id": 47194115, "body": "<code>long</code> is always the same size as CPU word length."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 1459, "user_id": 669567, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/VOmJA.jpg?s=128&g=1", "display_name": "holgac", "link": "https://stackoverflow.com/users/669567/holgac"}, "edited": false, "score": 0, "creation_date": 1428508710, "post_id": 29519151, "comment_id": 47194226, "body": "@holgac is that required by the standard?"}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "reply_to_user": {"reputation": 1459, "user_id": 669567, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/VOmJA.jpg?s=128&g=1", "display_name": "holgac", "link": "https://stackoverflow.com/users/669567/holgac"}, "edited": false, "score": 0, "creation_date": 1428508711, "post_id": 29519151, "comment_id": 47194227, "body": "@holgac Citation would be great."}, {"owner": {"reputation": 1459, "user_id": 669567, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/VOmJA.jpg?s=128&g=1", "display_name": "holgac", "link": "https://stackoverflow.com/users/669567/holgac"}, "edited": false, "score": 1, "creation_date": 1428508842, "post_id": 29519151, "comment_id": 47194315, "body": "Linux Kernel Development, Ch 17 (3rd edition, pg 381) says that &quot;A word is the amount of data that a machine can process at one time.&quot; &quot;The size of a processor\u2019s general-purpose registers (GPRs) is equal to its word size.&quot; &quot;Additionally, the size of the C type long is equal to the word size, whereas the size of the int type is sometimes less than that of the word size&quot;"}, {"owner": {"reputation": 1459, "user_id": 669567, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/VOmJA.jpg?s=128&g=1", "display_name": "holgac", "link": "https://stackoverflow.com/users/669567/holgac"}, "edited": false, "score": 0, "creation_date": 1428508981, "post_id": 29519151, "comment_id": 47194408, "body": "@JonathonReinhart also pg 383: &quot;The size of the C long type is guaranteed to be the machine\u2019s word size.&quot;"}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "reply_to_user": {"reputation": 1459, "user_id": 669567, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/VOmJA.jpg?s=128&g=1", "display_name": "holgac", "link": "https://stackoverflow.com/users/669567/holgac"}, "edited": false, "score": 0, "creation_date": 1428509028, "post_id": 29519151, "comment_id": 47194443, "body": "@holgac Great, thank you. I&#39;ve incorporated your comments into my answer. If you&#39;d prefer, you can write your own answer, which I would up-vote."}, {"owner": {"reputation": 1459, "user_id": 669567, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/VOmJA.jpg?s=128&g=1", "display_name": "holgac", "link": "https://stackoverflow.com/users/669567/holgac"}, "edited": false, "score": 0, "creation_date": 1428509252, "post_id": 29519151, "comment_id": 47194572, "body": "@JonathonReinhart No need, thank you for the offer :)"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1428509851, "post_id": 29519151, "comment_id": 47194967, "body": "Downvote:  The <code>long</code> type is based on a range of values not the processor&#39;s word size.  On 8-bit and 16-bit processors, the <code>long</code> type would take up more than one processor word in order to meet the range specification. So, by your statement, on an 8-bit processor, the <code>long</code> type would have the range of 8 bits, which is smaller than the range of an <code>int</code>."}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1428510021, "post_id": 29519151, "comment_id": 47195061, "body": "Sigh, I give up. I&#39;ll leave this answer for the discussion in the comments only."}, {"owner": {"reputation": 1459, "user_id": 669567, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/VOmJA.jpg?s=128&g=1", "display_name": "holgac", "link": "https://stackoverflow.com/users/669567/holgac"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1428510961, "post_id": 29519151, "comment_id": 47195590, "body": "@ThomasMatthews You may be right, the book I&#39;ve read might be misinforming. Sorry for the confusion, but the book so certainly states that fact that I didn&#39;t question it. See this section of the 2nd edition of the same book: <a href=\"http://www.makelinux.net/books/lkd2/ch19lev1sec2\" rel=\"nofollow noreferrer\">makelinux.net/books/lkd2/ch19lev1sec2</a>"}, {"owner": {"reputation": 18530, "user_id": 3344003, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/988af95d5692ee66b1fc2fe725ba738e?s=128&d=identicon&r=PG&f=1", "display_name": "user3344003", "link": "https://stackoverflow.com/users/3344003/user3344003"}, "edited": false, "score": 0, "creation_date": 1428511897, "post_id": 29519151, "comment_id": 47196169, "body": "Implementations of C on 16-bit processors routinely use 32-bits for long and 16-bits for int."}], "tags": [], "owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "is_accepted": true, "score": 2, "last_activity_date": 1428510085, "last_edit_date": 1592644375, "creation_date": 1428507430, "answer_id": 29519151, "question_id": 29519068, "link": "https://stackoverflow.com/questions/29519068/how-to-determine-processor-word-length-in-c/29519151#29519151", "title": "How to determine processor word length in C?", "body": "<p>As <a href=\"https://stackoverflow.com/questions/29519068/how-to-determine-processor-word-length-in-c/29519151?noredirect=1#comment47194315_29519151\">@holgac mentioned</a>, the <code>long</code> datatype is always the same size as the machine's native word size:</p>\n<blockquote>\n<p>&quot;A word is the amount of data that a machine can process at one time.&quot; &quot;The size of a processor\u2019s general-purpose registers (GPRs) is equal to its word size.&quot; &quot;Additionally, the size of the C type long is equal to the word size, whereas the size of the int type is sometimes less than that of the word size&quot;</p>\n<p>-- Linux Kernel Development, Ch 17 (3rd edition, pg 381)</p>\n</blockquote>\n<p>As <a href=\"https://stackoverflow.com/questions/29519068/how-to-determine-processor-word-length-in-c/29519151#comment47194967_29519151\">indicated by Thomas Matthews</a> however, this may not apply to machines with small word lengths.</p>\n<p>To determine the size of <code>long</code> on your compiler, just use <code>sizeof(long)</code>:</p>\n<pre><code>int main(void)\n{\n    printf(&quot;long is %d bits on this system\\n&quot;, (int)sizeof(long)*CHAR_BIT);\n    return 0;\n}\n</code></pre>\n<p>See also:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/q/3200954/119527\">What is CHAR_BIT?</a></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 189, "user_id": 2923228, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/oUCDA.jpg?s=128&g=1", "display_name": "JY0284", "link": "https://stackoverflow.com/users/2923228/jy0284"}, "edited": false, "score": 0, "creation_date": 1428507884, "post_id": 29519183, "comment_id": 47193683, "body": "You are right about this. sizeof() also gets the compiler&#39;s int size.I was thinking whether there is some way like macro #program to get this done."}], "tags": [], "owner": {"reputation": 8789, "user_id": 539465, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2acba600ecfbe1cc2e7f3c94b686ac84?s=128&d=identicon&r=PG", "display_name": "Valentin Lorentz", "link": "https://stackoverflow.com/users/539465/valentin-lorentz"}, "is_accepted": false, "score": 1, "last_activity_date": 1428507513, "creation_date": 1428507513, "answer_id": 29519183, "question_id": 29519068, "link": "https://stackoverflow.com/questions/29519068/how-to-determine-processor-word-length-in-c/29519183#29519183", "title": "How to determine processor word length in C?", "body": "<p>Wasn't <code>sizeof</code>\u00a0allowed?</p>\n\n<p>Also, a slightly improved implementation (no need for a copy, less runs of the loop and no division):</p>\n\n<pre><code>int main(){\n    int num = 1;\n    int count = 0;    \n\n    while(num &lt;&lt;= 8){\n        count++;\n    }\n\n    printf(\"System size of int:%d\", count+1);\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1428510139, "post_id": 29520119, "comment_id": 47195127, "body": "Will this work on architectures where function pointers are more than just a pointer? I recall Itanium being strange in that regard, with a function &quot;descriptor&quot; or the like."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "reply_to_user": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1428510491, "post_id": 29520119, "comment_id": 47195342, "body": "@JonathonReinhart: I changed it to a regular pointer. The idea is to choose something that the machine is willing to use an entire register to hold. This is likely to work for 16-bit systems, for which <code>sizeof(long)</code> has to fail."}, {"owner": {"reputation": 1459, "user_id": 669567, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/VOmJA.jpg?s=128&g=1", "display_name": "holgac", "link": "https://stackoverflow.com/users/669567/holgac"}, "edited": false, "score": 0, "creation_date": 1428511511, "post_id": 29520119, "comment_id": 47195950, "body": "There are some 64bit architectures using 32bit pointers. See <a href=\"http://en.wikipedia.org/wiki/Memory_address#Word_size_versus_address_size\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/&hellip;</a>"}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "reply_to_user": {"reputation": 1459, "user_id": 669567, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/VOmJA.jpg?s=128&g=1", "display_name": "holgac", "link": "https://stackoverflow.com/users/669567/holgac"}, "edited": false, "score": 0, "creation_date": 1428511855, "post_id": 29520119, "comment_id": 47196143, "body": "@holgac: Thanks, noted in the answer."}], "tags": [], "owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "is_accepted": false, "score": 0, "last_activity_date": 1428512470, "last_edit_date": 1428512470, "creation_date": 1428510059, "answer_id": 29520119, "question_id": 29519068, "link": "https://stackoverflow.com/questions/29519068/how-to-determine-processor-word-length-in-c/29520119#29520119", "title": "How to determine processor word length in C?", "body": "<p>As an interview question, the only correct way to do it in straight C is to use conditional compilation. The conditional compilation allows the word size to be defined differently for the various platforms the software runs on, or identified in a way so that the correct size can be obtained from a database. Since a company knows which platforms the product will run on, or which platforms they are willing to support, the platform can be chosen at compile or run-time, and the right word size will be selected as a result.</p>\n\n<p>Any other way of sussing out the word size will either be platform/system specific code or a heuristic. One possible heuristic is to use the size of a pointer to represent the machine word size.</p>\n\n<pre><code>word_size = sizeof(void *);\n</code></pre>\n\n<p>Given this is a heuristic, <a href=\"http://en.wikipedia.org/wiki/Memory_address#Word_size_versus_address_size\" rel=\"nofollow\">there are platforms for which it will fail</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 87, "user_id": 2492012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7318406207d3b030cc417d0da883d6c5?s=128&d=identicon&r=PG", "display_name": "Erich Horn", "link": "https://stackoverflow.com/users/2492012/erich-horn"}, "edited": false, "score": 0, "creation_date": 1446273180, "post_id": 33448646, "comment_id": 54685149, "body": "that was run on a 32 bit windows 7"}, {"owner": {"reputation": 87, "user_id": 2492012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7318406207d3b030cc417d0da883d6c5?s=128&d=identicon&r=PG", "display_name": "Erich Horn", "link": "https://stackoverflow.com/users/2492012/erich-horn"}, "edited": false, "score": 0, "creation_date": 1446273616, "post_id": 33448646, "comment_id": 54685234, "body": "I added long and put it in a gist (<a href=\"https://gist.github.com/f03f1071bce240654ec4.git\" rel=\"nofollow noreferrer\">gist.github.com/f03f1071bce240654ec4.git</a>)"}, {"owner": {"reputation": 87, "user_id": 2492012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7318406207d3b030cc417d0da883d6c5?s=128&d=identicon&r=PG", "display_name": "Erich Horn", "link": "https://stackoverflow.com/users/2492012/erich-horn"}, "edited": false, "score": 0, "creation_date": 1446274669, "post_id": 33448646, "comment_id": 54685432, "body": "And I guess I should add so it will be on point that the sizeof(void*) * CHAR_BIT should be the machine word size in bits, however it might actually be sizeof(void*) * 8.  Not really sure, but should actually be the same I think.  UTC-8 or 16 or what ever, a char is 8 bits in C.  But then again there will always be acceptations.  One thing you can rely on is that a nibble is always 4 bits.  So using sprintf should validate that."}], "tags": [], "owner": {"reputation": 87, "user_id": 2492012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7318406207d3b030cc417d0da883d6c5?s=128&d=identicon&r=PG", "display_name": "Erich Horn", "link": "https://stackoverflow.com/users/2492012/erich-horn"}, "is_accepted": false, "score": 2, "last_activity_date": 1446276034, "last_edit_date": 1446276034, "creation_date": 1446271991, "answer_id": 33448646, "question_id": 29519068, "link": "https://stackoverflow.com/questions/29519068/how-to-determine-processor-word-length-in-c/33448646#33448646", "title": "How to determine processor word length in C?", "body": "<p>I think my OCD kicked in a bit here, here is the result:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;limits.h&gt;\n\n#define SIZEOF_CHAR sizeof(char)\n#define SIZEOF_INT sizeof(int)\n#define SIZEOF_LONG sizeof(long)\n#define SIZEOF_POINTER sizeof(void *)\n\n#define NIBBLE_BIT 4\n#ifndef CHAR_BIT\n#define CHAR_BIT 8    // should have been defined in &lt;limits.h&gt;\n#endif\n#define INT_BIT (SIZEOF_INT * CHAR_BIT)\n#define LONG_BIT (SIZEOF_LONG * CHAR_BIT)\n#define POINTER_BIT (SIZEOF_POINTER * CHAR_BIT)\n\nint main(void)\n{\n  char hexchar[SIZEOF_CHAR * 2 + 1],\n       hexint[SIZEOF_INT * 2 + 1],\n       hexlong[SIZEOF_LONG * 2 + 1],\n       hexpointer[SIZEOF_POINTER * 2 + 1];\n  int strlen_hexchar, strlen_hexint, strlen_hexlong, strlen_hexpointer;\n\n  strlen_hexchar = sprintf(hexchar, \"%x\", (unsigned char)-1);\n  strlen_hexint = sprintf(hexint, \"%x\", (unsigned int)-1);\n  strlen_hexlong = sprintf(hexlong, \"%x\", (unsigned long)-1l);\n  strlen_hexpointer = sprintf(hexpointer, \"%p\", (void*)-1l);\n\n  printf(\"#define SIZEOF_CHAR sizeof(char)                // %2d\\n\", SIZEOF_CHAR);\n  printf(\"#define SIZEOF_INT sizeof(int)                  // %2d\\n\", SIZEOF_INT);\n  printf(\"#define SIZEOF_LONG sizeof(long)                  // %2d\\n\", SIZEOF_LONG);\n  printf(\"#define SIZEOF_POINTER sizeof(void *)           // %2d\\n\", SIZEOF_POINTER);\n\n  printf(\"\\n\");\n\n  printf(\"#define NIBBLE_BIT %-2d\\n\", NIBBLE_BIT);\n  printf(\"#ifndef CHAR_BIT\\n\");\n  printf(\"#define CHAR_BIT %-2d   // should have been defined in &lt;limits.h&gt;\\n\", CHAR_BIT);\n  printf(\"#endif\\n\");\n  printf(\"#define INT_BIT (SIZEOF_INT * CHAR_BIT)         // %2d\\n\", INT_BIT);\n  printf(\"#define INT_LONG (INT_LONG * CHAR_BIT)         // %2d\\n\", LONG_BIT);\n  printf(\"#define POINTER_BIT (SIZEOF_POINTER * CHAR_BIT) // %2d\\n\", POINTER_BIT);\n\n  printf(\"\\n\");\n\n  printf(\"\\nTest setup...\\n\");\n  printf(\"\\n\");\n\n  printf(\"char hexchar[CHAR_BIT * SIZEOF_CHAR + 1],\\n\");\n  printf(\"    hexint[CHAR_BIT * SIZEOF_INT + 1],\\n\");\n  printf(\"    hexlong[CHAR_BIT * SIZEOF_LONG + 1],\\n\");\n  printf(\"    hexpointer[CHAR_BIT * SIZEOF_POINTER + 1];\\n\");\n  printf(\"int strlen_hexchar, strlen_hexint, strlen_hexlong, strlen_hexpointer;\\n\");\n  printf(\"\\n\");\n  printf(\"strlen_hexchar = sprintf(hexchar, \\\"%%x\\\", (unsigned char)-1);\\n//    returned %d, hexchar populated with \\\"%s\\\"\\n\",\n      strlen_hexchar, hexchar);\n  printf(\"strlen_hexint = sprintf(hexint, \\\"%%x\\\", (unsigned int)-1);\\n//    returned %d, hexint populated with \\\"%s\\\"\\n\",\n      strlen_hexint, hexint);\n  printf(\"strlen_hexlong = sprintf(hexlong, \\\"%%x\\\", (unsigned long)-1);\\n//    returned %d, hexlong populated with \\\"%s\\\"\\n\",\n      strlen_hexlong, hexlong);\n  printf(\"strlen_hexpointer = sprintf(hexpointer, \\\"%%x\\\", (void*)-1l);\\n//    returned %d, hexpointer populated with \\\"%s\\\"\\n\",\n      strlen_hexpointer, hexpointer);\n\n  printf(\"\\n\\nTest results...\\n\");\n  printf(\"\\n\");\n\n  if (SIZEOF_CHAR * 2 == strlen_hexchar) {\n    printf(\"testing (SIZEOF_CHAR * 2 == strlen_hexchar) [pass]\\n\");\n  } else {\n    printf(\"testing (SIZEOF_CHAR * 2 == strlen_hexchar) [fail]\\n\");\n    printf(\"  (%d != $d)\\n\", SIZEOF_CHAR * 2, strlen_hexchar);\n  }\n\n  if (SIZEOF_INT * 2 == strlen_hexint) {\n    printf(\"testing (SIZEOF_INT * 2 == strlen_hexint) [pass]\\n\");\n  } else {\n    printf(\"testing (SIZEOF_INT * 2 == strlen_hexint) [fail]\\n\");\n    printf(\"  (%d != $d)\\n\", SIZEOF_INT * 2, strlen_hexint);\n  }\n\n  if (SIZEOF_LONG * 2 == strlen_hexlong) {\n    printf(\"testing (SIZEOF_LONG * 2 == strlen_hexlong) [pass]\\n\");\n  } else {\n    printf(\"testing (SIZEOF_LONG * 2 == strlen_hexlong) [fail]\\n\");\n    printf(\"  (%d != $d)\\n\", SIZEOF_LONG * 2, strlen_hexlong);\n  }\n\n  if (SIZEOF_POINTER * 2 == strlen_hexpointer) {\n    printf(\"testing (SIZEOF_POINTER * 2 == strlen_hexpointer) [pass]\\n\");\n  } else {\n    printf(\"testing (SIZEOF_POINTER * 2 == strlen_hexpointer) [fail]\\n\");\n    printf(\"  (%d != $d)\\n\", SIZEOF_POINTER * 2, strlen_hexpointer);\n  }\n\n  printf(\"\\n\");\n\n  if (CHAR_BIT == strlen_hexchar * NIBBLE_BIT) {\n    printf(\"testing (CHAR_BIT == strlen_hexchar * NIBBLE_BIT) [pass]\\n\");\n  } else {\n    printf(\"testing (CHAR_BIT == strlen_hexchar * NIBBLE_BIT) [fail]\\n\");\n    printf(\"  (%d != $d)\\n\", CHAR_BIT, strlen_hexchar * NIBBLE_BIT);\n  }\n\n  if (INT_BIT == strlen_hexint * NIBBLE_BIT) {\n    printf(\"testing (INT_BIT == strlen_hexint * NIBBLE_BIT) [pass]\\n\");\n  } else {\n    printf(\"testing (INT_BIT == strlen_hexint * NIBBLE_BIT) [fail]\\n\");\n    printf(\"  (%d != $d)\\n\", INT_BIT, strlen_hexint * NIBBLE_BIT);\n  }\n\n  if (LONG_BIT == strlen_hexlong * NIBBLE_BIT) {\n    printf(\"testing (LONG_BIT == strlen_hexlong * NIBBLE_BIT) [pass]\\n\");\n  } else {\n    printf(\"testing (LONG_BIT == strlen_hexlong * NIBBLE_BIT) [fail]\\n\");\n    printf(\"  (%d != $d)\\n\", LONG_BIT, strlen_hexlong * NIBBLE_BIT);\n  }\n\n  if (POINTER_BIT == strlen_hexpointer * 4) {\n    printf(\"testing (POINTER_BIT == strlen_hexpointer * NIBBLE_BIT) [pass]\\n\");\n  } else {\n    printf(\"testing (POINTER_BIT == strlen_hexpointer * NIBBLE_BIT) [fail]\\n\");\n    printf(\"  (%d != $d)\\n\", POINTER_BIT, strlen_hexpointer * NIBBLE_BIT);\n  }\n\n  printf(\"\\n\");\n\n  if ((int)(SIZEOF_POINTER * CHAR_BIT) == strlen_hexpointer * NIBBLE_BIT) {\n    printf(\"testing ((int)(SIZEOF_POINTER * CHAR_BIT) == strlen_hexpointer * NIBBLE_BIT) [pass]\\n\");\n  } else {\n    printf(\"testing ((int)(SIZEOF_POINTER * CHAR_BIT) == strlen_hexpointer * NIBBLE_BIT) [fail]\\n\");\n    printf(\"  (%d != %d)\\n\", (int)(SIZEOF_POINTER * CHAR_BIT), strlen_hexpointer * NIBBLE_BIT);\n  }\n\n  printf(\"\\nConclusion: this machine word is %d bytes and %d bits\\n\", SIZEOF_POINTER * 8 / CHAR_BIT, strlen_hexpointer * NIBBLE_BIT);\n  if ((int)(SIZEOF_POINTER * CHAR_BIT) != strlen_hexpointer * NIBBLE_BIT) {\n    printf(\" * however this conclusion did not pass the (int)(SIZEOF_POINTER * 8 / CHAR_BIT) == strlen_hexpointer * NIBBLE_BIT) test\\n\");\n  }\n\n  return 0;\n}\n</code></pre>\n\n<p>The output from this code shows the following on my machine:</p>\n\n<pre><code>$ sizeofword.exe # from mingw32 shell on windows7\n#define SIZEOF_CHAR sizeof(char)                //  1\n#define SIZEOF_INT sizeof(int)                  //  4\n#define SIZEOF_LONG sizeof(long)                  //  4\n#define SIZEOF_POINTER sizeof(void *)           //  4\n\n#define NIBBLE_BIT 4\n#ifndef CHAR_BIT\n#define CHAR_BIT 8    // should have been defined in &lt;limits.h&gt;\n#endif\n#define INT_BIT (SIZEOF_INT * CHAR_BIT)         // 32\n#define INT_LONG (INT_LONG * CHAR_BIT)         // 32\n#define POINTER_BIT (SIZEOF_POINTER * CHAR_BIT) // 32\n\n\nTest setup...\n\nchar hexchar[CHAR_BIT * SIZEOF_CHAR + 1],\n    hexint[CHAR_BIT * SIZEOF_INT + 1],\n    hexlong[CHAR_BIT * SIZEOF_LONG + 1],\n    hexpointer[CHAR_BIT * SIZEOF_POINTER + 1];\nint strlen_hexchar, strlen_hexint, strlen_hexlong, strlen_hexpointer;\n\nstrlen_hexchar = sprintf(hexchar, \"%x\", (unsigned char)-1);\n//    returned 2, hexchar populated with \"ff\"\nstrlen_hexint = sprintf(hexint, \"%x\", (unsigned int)-1);\n//    returned 8, hexint populated with \"ffffffff\"\nstrlen_hexlong = sprintf(hexlong, \"%x\", (unsigned long)-1);\n//    returned 8, hexlong populated with \"ffffffff\"\nstrlen_hexpointer = sprintf(hexpointer, \"%x\", (void*)-1l);\n//    returned 8, hexpointer populated with \"FFFFFFFF\"\n\n\nTest results...\n\ntesting (SIZEOF_CHAR * 2 == strlen_hexchar) [pass]\ntesting (SIZEOF_INT * 2 == strlen_hexint) [pass]\ntesting (SIZEOF_LONG * 2 == strlen_hexlong) [pass]\ntesting (SIZEOF_POINTER * 2 == strlen_hexpointer) [pass]\n\ntesting (CHAR_BIT == strlen_hexchar * NIBBLE_BIT) [pass]\ntesting (INT_BIT == strlen_hexint * NIBBLE_BIT) [pass]\ntesting (LONG_BIT == strlen_hexlong * NIBBLE_BIT) [pass]\ntesting (POINTER_BIT == strlen_hexpointer * NIBBLE_BIT) [pass]\n\ntesting ((int)(SIZEOF_POINTER * CHAR_BIT) == strlen_hexpointer * NIBBLE_BIT) [pass]\n\nConclusion: this machine word is 4 bytes and 32 bits\n</code></pre>\n"}], "owner": {"reputation": 189, "user_id": 2923228, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/oUCDA.jpg?s=128&g=1", "display_name": "JY0284", "link": "https://stackoverflow.com/users/2923228/jy0284"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1880, "favorite_count": 0, "accepted_answer_id": 29519151, "answer_count": 4, "score": 2, "last_activity_date": 1446276034, "creation_date": 1428507220, "last_edit_date": 1428508688, "question_id": 29519068, "link": "https://stackoverflow.com/questions/29519068/how-to-determine-processor-word-length-in-c", "title": "How to determine processor word length in C?", "body": "<p>I have met a question \"How to determine processor word length without using sizeof() in C?\" in an interview and I believed I gave the wrong answer.</p>\n\n<p>My code was as follows:</p>\n\n<pre><code>int main(){\n    int num = -1;\n    int count = 0;    \n\n    unsigned int num_copy = (unsigned int)num;\n    while(num_copy &gt;&gt;= 1){\n        count++;\n    }\n\n    printf(\"System size of int:%d\", (count  + 1)/ 8);\n\n    return 0;\n}\n</code></pre>\n\n<p>The output answer is only decided by compiler options. So, how can I get the right answer (system word length)?</p>\n\n<p>What if I change part of this question from 'processor word length' to 'operating system word length'?</p>\n"}, {"tags": ["c", "stack", "infix-notation"], "comments": [{"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 1, "creation_date": 1428507330, "post_id": 29519006, "comment_id": 47193251, "body": "The debugger can tell you exactly which line is causing the segfault. It can also show you the value of the variables at that time.  Determine which pointer is bad, then work your way backwards to determine how it got that bad value. This is standard debugging work, which all C programmers should eventually be very familiar with."}, {"owner": {"reputation": 306, "user_id": 4531112, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/1025390600811463/picture?type=large", "display_name": "Brandon Tomblinson", "link": "https://stackoverflow.com/users/4531112/brandon-tomblinson"}, "reply_to_user": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1428507748, "post_id": 29519006, "comment_id": 47193579, "body": "The gdb debugger just said Program received signal SIGSEGV, Segmentation fault. 0x0000000000400a87 in infix_to_postfix () (gdb)"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1428508277, "post_id": 29519006, "comment_id": 47193944, "body": "Use gdb&#39;s backtrace (<code>bt</code>) command after the segfault.  Use the <code>frame</code> command to examine the context of the various levels of the resulting call tree.  If you have not compiled with debugging symbols available (<code>-g</code> option in GCC), then recompiling with them will yield a program that gdb can explain to you more clearly."}, {"owner": {"reputation": 306, "user_id": 4531112, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/1025390600811463/picture?type=large", "display_name": "Brandon Tomblinson", "link": "https://stackoverflow.com/users/4531112/brandon-tomblinson"}, "edited": false, "score": 0, "creation_date": 1428519537, "post_id": 29519006, "comment_id": 47200713, "body": "I found out the following    tempPtr\tnode *\tNULL\t0x0000000000000000 temp\tchar [2]\t\t [0]\tchar\t&#39;\\xcf&#39;\t&#39; [1]\tchar\t&#39;\\0&#39;\t&#39;\\0&#39; postfix\tchar *\t0x100105420\t s\tstack *\t0x100105490\t next\tchar\t&#39;\\0&#39;  Also the seg fault occurred in this while loop while(s-&gt;size != 0 &amp;&amp; top(s) != &#39;(&#39;)             {                 next = tempPtr-&gt;data;                 temp[0] = next;                 pop(s);                 strcat(postfix, temp);                 tempPtr = s-&gt;stack;                 if(tempPtr-&gt;data == &#39;(&#39;)                 {                     pop(s);                 }             }"}], "owner": {"reputation": 306, "user_id": 4531112, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/1025390600811463/picture?type=large", "display_name": "Brandon Tomblinson", "link": "https://stackoverflow.com/users/4531112/brandon-tomblinson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 120, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1428507066, "creation_date": 1428507066, "question_id": 29519006, "link": "https://stackoverflow.com/questions/29519006/using-a-stack-to-do-an-infix-to-postfix", "title": "Using a stack to do an infix to postfix", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;string.h&gt;\n#include \"stack.h\"\n\n#define MAX_EQU_LEN 100\n\nstatic int prec(char operator)\n{\n    switch (operator)\n    {\n        case '*':\n            return 5;\n        case '/':\n            return 4;\n        case '%':\n            return 3;\n        case '+':\n            return 2;\n        case '-':\n            return 1;\n        default:\n            break;\n    }\n\n    return 0;\n}\n\nstatic int isNumeric(char* num)\n{\n    if(atoi(num) == 0)\n    {\n        return 0;\n    }\n            return 1;\n}\n\nchar* infix_to_postfix(char* infix)\n{\n    char* postfix = malloc(MAX_EQU_LEN);\n    stack* s = create_stack();\n    s-&gt;size = strlen(infix);\n    node* tempPtr = s-&gt;stack;\n    unsigned int i;\n    char symbol,next;\n    char temp[2] = {0};\n\n    for(i = 0; i &lt; s-&gt;size ; i++)\n    {\n        symbol = *((infix + i));\n        temp[0] = symbol;\n        tempPtr = s-&gt;stack;\n        if(isNumeric(temp) != 1)\n        {\n            strcat(postfix, temp);\n        }\n        else if(symbol == '(')\n        {\n            push(s, symbol);\n        }\n        else if(symbol == ')')\n        {\n            while(s-&gt;size != 0 &amp;&amp; top(s) != '(')\n            {\n                next = tempPtr-&gt;data;\n                temp[0] = next;\n                pop(s);\n                strcat(postfix, temp);\n                tempPtr = s-&gt;stack;\n                if(tempPtr-&gt;data == '(')\n                {\n                    pop(s);\n                }\n            }\n        }\n        else\n        {\n            while(s-&gt;size != 0 &amp;&amp; prec(top(s)) &gt; prec(symbol))\n            {\n                next = tempPtr-&gt;data;\n                temp[0] = next;\n                pop(s);\n                strcat(postfix,temp);\n                push(s,next);\n            }\n        }\n        while(s-&gt;size != 0)\n        {\n            next = tempPtr-&gt;data;\n            temp[0] = next;\n            pop(s);\n            strcat(postfix, temp);\n        }\n    }\n    return postfix;\n\n}\n\nint evaluate_postfix(char* postfix) {\n\n    //For each token in the string\n        int i,result;\n        int right, left;\n        char ch;\n        stack* s = create_stack();\n        node* tempPtr = s-&gt;stack;\n\n        for(i=0; i &lt; strlen(postfix); i++){\n            //if the token is numeric\n            ch = postfix[i];\n            if(isNumeric(&amp;ch)){\n                //convert it to an integer and push it onto the stack\n                atoi(&amp;ch);\n                push(s, ch);\n            }\n            else\n            {\n                pop(&amp;s[0]);\n                pop(&amp;s[1]);\n                //apply the operation:\n                //result = left op right\n                       switch(ch)\n                       {\n                           case '+': push(&amp;s[i],right + left);\n                                     break;\n                           case '-': push(&amp;s[i],right - left);\n                                     break;\n                           case '*': push(&amp;s[i],right * left);\n                                     break;\n                           case '/': push(&amp;s[i],right / left);\n                                     break;\n                       }\n                }\n        }\n        tempPtr = s-&gt;stack;\n        //return the result from the stack\n        return(tempPtr-&gt;data);\n\n}        \n</code></pre>\n\n<p>This code is part of a bigger program that is designed to convert simple math from infix to postfix and then evaluate it. This will be aided by a stack to hold the numbers and symbols. However when I run the program it seg faults and all the debugger says is that it is in the infix_to_postfix function and I cannot figure out what part of the code makes it seg fault.                                                                                                                                                                                                                                                                                                                                                           </p>\n"}, {"tags": ["c", "memory", "memory-management", "cuda", "mmap"], "comments": [{"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 1, "creation_date": 1428507281, "post_id": 29518875, "comment_id": 47193214, "body": "<code>cudaHostAlloc</code> assigned a value to <code>data</code>, and then you overwrote that value with your <code>data = mmap(...)</code> line.  <code>cudaHostGetDevicePointer</code> has no idea what to do with the new value of <code>data</code> provided by <code>mmap</code> since that value was not provided by the CUDA API.  You could try getting rid of the <code>cudaHostAlloc</code> line, and then do a <code>cudaHostRegister</code> on <code>data</code> after the <code>mmap</code> line.   I don&#39;t know if that will work or not."}, {"owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 2, "creation_date": 1428508054, "post_id": 29518875, "comment_id": 47193798, "body": "I&#39;d be very surprised if the GPU driver could register a virtual allocation from a mmaped file"}, {"owner": {"reputation": 309, "user_id": 1487804, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/29c4ba410c6363ae40fb06138ffd2717?s=128&d=identicon&r=PG", "display_name": "PidgeyBAWK", "link": "https://stackoverflow.com/users/1487804/pidgeybawk"}, "reply_to_user": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 0, "creation_date": 1428509502, "post_id": 29518875, "comment_id": 47194719, "body": "@RobertCrovella Thanks for trying, I was about to give it a go myself!"}], "answers": [{"comments": [{"owner": {"reputation": 309, "user_id": 1487804, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/29c4ba410c6363ae40fb06138ffd2717?s=128&d=identicon&r=PG", "display_name": "PidgeyBAWK", "link": "https://stackoverflow.com/users/1487804/pidgeybawk"}, "edited": false, "score": 0, "creation_date": 1428509886, "post_id": 29519911, "comment_id": 47194986, "body": "Thank you for trying, and for correcting the host allocation logic! I suppose the easiest way around this is probably <code>fread</code>ing instead of using <code>mmap</code>..."}], "tags": [], "owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "is_accepted": true, "score": 4, "last_activity_date": 1497544505, "last_edit_date": 1497544505, "creation_date": 1428509517, "answer_id": 29519911, "question_id": 29518875, "link": "https://stackoverflow.com/questions/29518875/cuda-zero-copy-memory-memory-mapped-file/29519911#29519911", "title": "cuda - Zero-copy memory, memory-mapped file", "body": "<p>One problem is that the logical sequence of your program is incorrect.  This line assigns a value to <code>data</code> provided by the CUDA API:</p>\n\n<pre><code>err = cudaHostAlloc((void**)&amp;data, data_file_size, cudaHostAllocMapped);\n</code></pre>\n\n<p>This line then <em>overwrites</em> that value, with a new one:</p>\n\n<pre><code>data = (uint32_t*) mmap(0, data_file_size, PROT_READ, MAP_PRIVATE, data_file, 0);\n</code></pre>\n\n<p>At that point, the value of <code>data</code> is not recognized by the CUDA API as being a pinned memory space anymore, so when you call this:</p>\n\n<pre><code>err = cudaHostGetDevicePointer((void**)&amp;dev_data, (void*)data, 0);\n</code></pre>\n\n<p>you get an error, because the value contained in <code>data</code> is not recognized.</p>\n\n<p><strong>EDIT:</strong> (based on <a href=\"https://stackoverflow.com/questions/44569936/registering-mapped-linux-kernel-character-device-memory-with-cudahostregister-re\">this question</a>)\nApart from that issue, it seems that if you change the file handling from read-only, to read-write, then this process can be made to work (throws no runtime errors).  Here's a complete code (which doesn't contain the above logical flaw) that demonstrates this (I have previously created a <code>test.dat</code> file of size 566316 bytes):</p>\n\n<pre><code>$ cat t706.cu\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/mman.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdint.h&gt;\n\nint main(void)\n{\n  struct stat buf;\n\n  char *dev_data;\n\n  cudaDeviceProp cuda_prop;\n  cudaGetDeviceProperties(&amp;cuda_prop, 0);\n  if (!cuda_prop.canMapHostMemory)\n    exit(EXIT_FAILURE);\n\n  cudaSetDeviceFlags(cudaDeviceMapHost);\n\n\n  int data_file = open(\"test.dat\", O_RDWR);\n  int stat = fstat(data_file, &amp;buf);\n  int data_file_size = buf.st_size;\n  printf(\"data_file_size = %d\\n\", data_file_size);\n  char *data = (char *) mmap(0, data_file_size, PROT_READ|PROT_WRITE, MAP_PRIVATE, data_file, 0);\n  if (data == NULL) {\n    printf(\"mmap failure\\n\");\n    exit(EXIT_FAILURE);}\n  cudaError_t err = cudaHostRegister(data, data_file_size, cudaHostRegisterDefault);\n  if (err != cudaSuccess) { //ERROR HERE.\n    printf(\"cudaHostRegister fail\\n\");\n    exit(EXIT_FAILURE);}\n\n  err = cudaHostGetDevicePointer((void**)&amp;dev_data, (void*)data, 0);\n  if (err == cudaErrorMemoryAllocation)\n  {\n    printf(\"cudaHostGetDevicePointer - Mem Alloc Err\\n\");\n    exit(EXIT_FAILURE);\n  }\n  else if (err == cudaErrorInvalidValue)\n  {\n    printf(\"cudaHostGetDevicePointer - Invalid Val Err\\n\");\n    exit(EXIT_FAILURE);\n  }\n\n}\n$ nvcc -arch=sm_30 -o t706 t706.cu\n$ ./t706\ndata_file_size = 566316\n$\n</code></pre>\n"}], "owner": {"reputation": 309, "user_id": 1487804, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/29c4ba410c6363ae40fb06138ffd2717?s=128&d=identicon&r=PG", "display_name": "PidgeyBAWK", "link": "https://stackoverflow.com/users/1487804/pidgeybawk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2303, "favorite_count": 2, "accepted_answer_id": 29519911, "answer_count": 1, "score": 5, "last_activity_date": 1569901078, "creation_date": 1428506702, "last_edit_date": 1569901078, "question_id": 29518875, "link": "https://stackoverflow.com/questions/29518875/cuda-zero-copy-memory-memory-mapped-file", "title": "cuda - Zero-copy memory, memory-mapped file", "body": "<p>I am trying to create a mapped memory file, containing <code>uint32_t</code>s, and then use that as zero-copy pinned memory as shown below for CUDA. I am getting the <code>cudaErrorInvalidValue</code> when getting the device pointer, having allocated space and mapped the memory from file. I know the error message (from the API) means : </p>\n\n<blockquote>\n  <p>This indicates that one or more of the parameters passed to the API call is not within an acceptable range of values.</p>\n</blockquote>\n\n<p>But I'm struggling to figure out why I'm having this problem.... Any ideas? Thanks in advance.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/mman.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;unistd.h&gt;\n\n    \u2026\n\nint main(void) \n{\n  struct stat buf;\n\n    \u2026\n\n  uint32_t *data, *dev_data;\n\n  cudaDeviceProp cuda_prop;\n  cudaGetDeviceProperties(&amp;cuda_prop, 0);\n  if (!cuda_prop.canMapHostMemory) \n    exit(EXIT_FAILURE);\n\n  cudaSetDeviceFlags(cudaDeviceMapHost);\n\n\n  int data_file = open(data_file_name, O_RDONLY);\n  int stat = fstat(sa_file, &amp;buf);\n  int data_file_size = buf.st_size;\n\n  err = cudaHostAlloc((void**)&amp;data, data_file_size, cudaHostAllocMapped);\n  if (err == cudaErrorMemoryAllocation) exit(EXIT_FAILURE);\n\n  data = (uint32_t*) mmap(0, data_file_size, PROT_READ, MAP_PRIVATE, data_file, 0);\n\n  err = cudaHostGetDevicePointer((void**)&amp;dev_data, (void*)data, 0);\n  if (err == cudaErrorMemoryAllocation)\n  {\n    printf(\"cudaHostGetDevicePointer - Mem Alloc Err\\n\"); \n    exit(EXIT_FAILURE);\n  }\n  else if (err == cudaErrorInvalidValue) //ERROR HERE.\n  {\n    printf(\"cudaHostGetDevicePointer - Invalid Val Err\\n\"); \n    exit(EXIT_FAILURE);\n  }\n\n    \u2026\n\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "char"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 2, "creation_date": 1428506802, "post_id": 29518863, "comment_id": 47192865, "body": "You don&#39;t need to cast <code>char*</code> to <code>char*</code>."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1428506815, "post_id": 29518863, "comment_id": 47192873, "body": "You don&#39;t need any of the casts, and <code>else *point++</code> is also ok like <code>else point++;</code>"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1428506940, "post_id": 29518863, "comment_id": 47192961, "body": "you dont mean *point++ you mean point++"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1428507044, "post_id": 29518863, "comment_id": 47193045, "body": "@pm100; Effect will be same."}, {"owner": {"reputation": 585, "user_id": 2849587, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/100000511956357/picture?type=large", "display_name": "Ian", "link": "https://stackoverflow.com/users/2849587/ian"}, "edited": false, "score": 0, "creation_date": 1434136364, "post_id": 29518863, "comment_id": 49669254, "body": "Thank you everyone for your help!"}], "answers": [{"comments": [{"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1428507180, "post_id": 29518889, "comment_id": 47193148, "body": "@Gopi; My bad! Of course he can return the address of the element of the passes string."}, {"owner": {"reputation": 585, "user_id": 2849587, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/100000511956357/picture?type=large", "display_name": "Ian", "link": "https://stackoverflow.com/users/2849587/ian"}, "edited": false, "score": 0, "creation_date": 1434136397, "post_id": 29518889, "comment_id": 49669278, "body": "Thank you for your help!"}], "tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 5, "last_activity_date": 1428507418, "last_edit_date": 1428507418, "creation_date": 1428506740, "answer_id": 29518889, "question_id": 29518863, "link": "https://stackoverflow.com/questions/29518863/problems-with-c-pointers/29518889#29518889", "title": "Problems with C pointers", "body": "<pre><code>while(point != '\\0') \n</code></pre>\n\n<p>should be</p>\n\n<pre><code>while(*point != '\\0') \n</code></pre>\n\n<p>There are places where you need to dereference the pointer and you are not doing it.Like</p>\n\n<pre><code>while(*point != '\\0')\n{\n  if(*point == ch)\n  return point;\n  else\n  point ++;\n}\n</code></pre>\n\n<p>PS: <code>point</code> is a pointer pointing to some valid memory location and the value stored in that location is got by dereferencing it <code>*point</code></p>\n"}, {"comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 2, "creation_date": 1428507000, "post_id": 29518927, "comment_id": 47193009, "body": "May be it&#39;s homework and they have to write their own function."}, {"owner": {"reputation": 2556, "user_id": 3488231, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/da4ac79b71c44d696f3567d4b53f6239?s=128&d=identicon&r=PG&f=1", "display_name": "user12205", "link": "https://stackoverflow.com/users/3488231/user12205"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1428507086, "post_id": 29518927, "comment_id": 47193075, "body": "@iharob Especially so given the comment <code>YOU MAY *NOT* USE INTEGERS OR ARRAY INDEXING.</code>"}], "tags": [], "owner": {"reputation": 613, "user_id": 2213887, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U44UC.png?s=128&g=1", "display_name": "Hugues Paquet Blanchette", "link": "https://stackoverflow.com/users/2213887/hugues-paquet-blanchette"}, "is_accepted": false, "score": 2, "last_activity_date": 1428506964, "last_edit_date": 1428506964, "creation_date": 1428506858, "answer_id": 29518927, "question_id": 29518863, "link": "https://stackoverflow.com/questions/29518863/problems-with-c-pointers/29518927#29518927", "title": "Problems with C pointers", "body": "<p>Try something like <a href=\"https://www.thinkage.ca/english/gcos/expl/c/lib/strchr.html\" rel=\"nofollow\">strchr()</a></p>\n\n<p>Usage:</p>\n\n<pre><code>#include &lt;string.h&gt;\nptr = strchr( s, c );\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 585, "user_id": 2849587, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/100000511956357/picture?type=large", "display_name": "Ian", "link": "https://stackoverflow.com/users/2849587/ian"}, "edited": false, "score": 0, "creation_date": 1434136388, "post_id": 29518937, "comment_id": 49669271, "body": "Thank you for your help!"}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 2, "last_activity_date": 1428506873, "creation_date": 1428506873, "answer_id": 29518937, "question_id": 29518863, "link": "https://stackoverflow.com/questions/29518863/problems-with-c-pointers/29518937#29518937", "title": "Problems with C pointers", "body": "<p>To compare the character currently pointed to by <code>point</code> you need to dereference <code>point</code> with the <code>*</code> operator like this</p>\n\n<pre><code>while (*point != '\\0')\n</code></pre>\n\n<p>Then you want to compare the character that you are searching for but you are doing it the wrong way too.</p>\n\n<p>You are comparing the address of the variable <code>ch</code> to the address currently <code>point</code> points to, that is wrong you need</p>\n\n<pre><code>if (*point == ch)\n</code></pre>\n\n<p>instead.</p>\n"}, {"comments": [{"owner": {"reputation": 585, "user_id": 2849587, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/100000511956357/picture?type=large", "display_name": "Ian", "link": "https://stackoverflow.com/users/2849587/ian"}, "edited": false, "score": 0, "creation_date": 1428507740, "post_id": 29519120, "comment_id": 47193574, "body": "thank you! already fixed it from above comments though. Will do"}], "tags": [], "owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": false, "score": 2, "last_activity_date": 1428508062, "last_edit_date": 1428508062, "creation_date": 1428507364, "answer_id": 29519120, "question_id": 29518863, "link": "https://stackoverflow.com/questions/29518863/problems-with-c-pointers/29519120#29519120", "title": "Problems with C pointers", "body": "<p>heres a working version of your code</p>\n\n<p>Please tell you teacher that you got it from stack overflow</p>\n\n<pre><code>char *find_ch_ptr(char *string, char ch) {\n\n        while(*string != '\\0') {\n                if(*string == ch) \n                   return string;\n                else string++;\n        }\n        return (char*)0;\n}\n</code></pre>\n\n<p>or the K&amp;R way</p>\n\n<pre><code>while(*string &amp;&amp; *string!=ch);\nreturn str;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 585, "user_id": 2849587, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/100000511956357/picture?type=large", "display_name": "Ian", "link": "https://stackoverflow.com/users/2849587/ian"}, "edited": false, "score": 0, "creation_date": 1434136399, "post_id": 29519432, "comment_id": 49669280, "body": "Thank you for your help!"}], "tags": [], "owner": {"reputation": 21, "user_id": 3192104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6d1f41d440ecfcfe0b03473327eb846?s=128&d=identicon&r=PG&f=1", "display_name": "user3192104", "link": "https://stackoverflow.com/users/3192104/user3192104"}, "is_accepted": false, "score": 2, "last_activity_date": 1428508244, "creation_date": 1428508244, "answer_id": 29519432, "question_id": 29518863, "link": "https://stackoverflow.com/questions/29518863/problems-with-c-pointers/29519432#29519432", "title": "Problems with C pointers", "body": "<p>The while loop condition needed to be dereferenced before checking equivalence '\\0'. </p>\n\n<p>There is no need for the c variable, you can use the ch parameter directly for the check inside the while loop.</p>\n\n<p>Here is a working example:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nchar *find_ch_ptr(char *string, char ch) {\n    char *point = string;\n    while(*point != '\\0') {\n            if(*point == ch)\n            {\n                    return point;\n            }\n            else\n            {\n                    point++;\n            }\n    }\n    return point;    // placeholder\n}\n\nint main(int argc, char* argv[]){\n    printf(\"%c\\n\", *find_ch_ptr(\"hello world\", 'r'));\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 585, "user_id": 2849587, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/100000511956357/picture?type=large", "display_name": "Ian", "link": "https://stackoverflow.com/users/2849587/ian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 211, "favorite_count": 2, "accepted_answer_id": 29518937, "answer_count": 5, "score": 1, "last_activity_date": 1448016823, "creation_date": 1428506680, "last_edit_date": 1448016823, "question_id": 29518863, "link": "https://stackoverflow.com/questions/29518863/problems-with-c-pointers", "title": "Problems with C pointers", "body": "<p>So I've been having trouble just understanding pointers in C. My problem is how to make char * find_ch_ptr return a char*. I've also been getting cast problems all over the place. If there is something wrong in here, can you please explain it fully?</p>\n\n<pre><code>/*\n * Return a pointer to the first occurrence of &lt;ch&gt; in &lt;string&gt;,\n * or NULL if the &lt;ch&gt; is not in &lt;string&gt;.\n *****\n * YOU MAY *NOT* USE INTEGERS OR ARRAY INDEXING.\n *****\n */\nchar *find_ch_ptr(char *string, char ch) {\n        char * point = (char*)(string + 0);\n        char * c = &amp;ch;\n        while(point != '\\0') {\n                if(point == c) return (char*)point;\n                else *point++;\n        }\n        return (char*)point;    // placeholder\n}\n</code></pre>\n"}, {"tags": ["c", "arm", "simd", "neon"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1428507375, "post_id": 29518845, "comment_id": 47193299, "body": "It&#39;s fairly easy to do in the Y axis (just load your neigbourhood vectors from a clipped Y index), but a bit fiddly in the X axis. For the X axis you typically need to initialise an X neighbourhood vector for the negative indices prior to entering the X axis loop. If I get time I&#39;ll post a detailed answer with some examples."}, {"owner": {"reputation": 220, "user_id": 3476225, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/5688f812fa8ea3d0fffd6c8363bba48c?s=128&d=identicon&r=PG&f=1", "display_name": "user3476225", "link": "https://stackoverflow.com/users/3476225/user3476225"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1428507693, "post_id": 29518845, "comment_id": 47193531, "body": "@PaulR,I understood below points from your reply 1) I have to use the extension buffer .I can not get ride of this extra memory creation . (2)With present implementation logic(as per my code) I can follow your suggestion"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1428508092, "post_id": 29518845, "comment_id": 47193822, "body": "No, you don&#39;t need the extra buffer - the neighbourhood vectors I referred to are just Neon (128 bit) variables."}, {"owner": {"reputation": 220, "user_id": 3476225, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/5688f812fa8ea3d0fffd6c8363bba48c?s=128&d=identicon&r=PG&f=1", "display_name": "user3476225", "link": "https://stackoverflow.com/users/3476225/user3476225"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1428509721, "post_id": 29518845, "comment_id": 47194891, "body": "Paul if you don&#39;t mind can you explain bit !"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1428521908, "post_id": 29518845, "comment_id": 47202093, "body": "If I get time I&#39;ll post a complete answer with examples - in the mean time look at some of the existing SIMD questions on StackOverflow - I&#39;m sure I&#39;ve answered similar questions before (probably for SSE, but the same principles apply)."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1428563880, "post_id": 29518845, "comment_id": 47217482, "body": "OK - I&#39;ve now added some pseudo code in an answer below which illustrates some common techniques for SIMD processing of a 2D image including border pixels."}, {"owner": {"reputation": 220, "user_id": 3476225, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/5688f812fa8ea3d0fffd6c8363bba48c?s=128&d=identicon&r=PG&f=1", "display_name": "user3476225", "link": "https://stackoverflow.com/users/3476225/user3476225"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1428664728, "post_id": 29518845, "comment_id": 47270028, "body": "@PaulR ,I have added my pseudo code in my question  .I am having some queries .There are few instructions that NEON don&#39;t have as like SIMD .Can you just comment on my edited questions part"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1428669603, "post_id": 29518845, "comment_id": 47273086, "body": "Please note that StackOverflow is not a discussion forum - please don&#39;t keep piggybacking new questions onto an existing question. I answered the original question for you - if you&#39;re happy with the answer then you should up-vote and/or accept it and move on. If you have further questions then you should start one or more new questions (and I&#39;ll be happy to look at them and try and answer if I can)."}], "answers": [{"comments": [{"owner": {"reputation": 220, "user_id": 3476225, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/5688f812fa8ea3d0fffd6c8363bba48c?s=128&d=identicon&r=PG&f=1", "display_name": "user3476225", "link": "https://stackoverflow.com/users/3476225/user3476225"}, "edited": false, "score": 0, "creation_date": 1428593437, "post_id": 29532158, "comment_id": 47237216, "body": ",I am not getting this logic ..Why it is pointing to same row 1st element  ??     p_row_p1 = image[min(i+1, ncols-1)]   When i = 0;                                                   image[min(1, ncols-1)] = image[1] which is not image[1][0] !!"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 220, "user_id": 3476225, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/5688f812fa8ea3d0fffd6c8363bba48c?s=128&d=identicon&r=PG&f=1", "display_name": "user3476225", "link": "https://stackoverflow.com/users/3476225/user3476225"}, "edited": false, "score": 0, "creation_date": 1428593764, "post_id": 29532158, "comment_id": 47237457, "body": "Because you want the edge pixels to be replicated for the first row (when i = 0) - so the first two row pointers point to the same row. When i = 1 then they point at different rows. I&#39;ve edited the row pointer initialisation to make it a little clearer."}, {"owner": {"reputation": 220, "user_id": 3476225, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/5688f812fa8ea3d0fffd6c8363bba48c?s=128&d=identicon&r=PG&f=1", "display_name": "user3476225", "link": "https://stackoverflow.com/users/3476225/user3476225"}, "edited": false, "score": 0, "creation_date": 1428593869, "post_id": 29532158, "comment_id": 47237531, "body": "I think image[width*1] will point to second row not image[1] !!"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 220, "user_id": 3476225, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/5688f812fa8ea3d0fffd6c8363bba48c?s=128&d=identicon&r=PG&f=1", "display_name": "user3476225", "link": "https://stackoverflow.com/users/3476225/user3476225"}, "edited": false, "score": 0, "creation_date": 1428593982, "post_id": 29532158, "comment_id": 47237619, "body": "I edited it a few minutes ago to make the intention of the row pointer initialisation clearer - the logic is the same but hopefully it&#39;s less confusing now."}, {"owner": {"reputation": 220, "user_id": 3476225, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/5688f812fa8ea3d0fffd6c8363bba48c?s=128&d=identicon&r=PG&f=1", "display_name": "user3476225", "link": "https://stackoverflow.com/users/3476225/user3476225"}, "edited": false, "score": 0, "creation_date": 1428594277, "post_id": 29532158, "comment_id": 47237855, "body": "can I write this way :                                                                                   p_row_m1 = image + nclos * max(i-1, 0)  p_row_0  = image + nclos * [i]  p_row_p1 = image + nclos*(min(i+1, ncols-1))"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 220, "user_id": 3476225, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/5688f812fa8ea3d0fffd6c8363bba48c?s=128&d=identicon&r=PG&f=1", "display_name": "user3476225", "link": "https://stackoverflow.com/users/3476225/user3476225"}, "edited": false, "score": 0, "creation_date": 1428594423, "post_id": 29532158, "comment_id": 47237962, "body": "It&#39;s pretty hard to read code in comments - try studying the pseudo code for a while until you understand the logic. Once you understand the logic then the implementation details should not be too difficult."}], "tags": [], "owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "is_accepted": false, "score": 0, "last_activity_date": 1428594054, "last_edit_date": 1428594054, "creation_date": 1428563829, "answer_id": 29532158, "question_id": 29518845, "link": "https://stackoverflow.com/questions/29518845/border-check-in-image-processing/29532158#29532158", "title": "Border check in image processing", "body": "<p>Here is some pseudo code for performing a 3x3 neighbourhood operation using SIMD with replicated edge pixels. Input image is <code>image[nrows][ncols]</code>, output image is <code>image_out[nrows][ncols]</code>.</p>\n\n<pre><code>for i = 0 to nrows - 1\n  // init row pointers\n  p_row_m1 = &amp;image[max(i-1, 0)][0]         // pointer to start of row i-1\n  p_row_0 = &amp;image[i][0]                    // pointer to start of row i\n  p_row_p1 = &amp;image[min(i+1, ncols-1)][0]   // pointer to start of row i+1\n  v_m1_m1 = init_vec(p_row_m1[0])           // fill left vector from image[i-1][0]\n  v_0_m1 = init_vec(p_row_0[0])             // fill left vector from image[i][0]\n  v_p1_m1 = init_vec(p_row_p1[0])           // fill left vector from image[i+1][0]\n  v_m1_0 = load_vec(&amp;p_row_m1[0])           // load centre vector from image[i-1][0..15]\n  v_0_0 = load_vec(&amp;p_row_0[0])             // load centre vector from image[i][0..15]\n  v_p1_0 = load_vec(&amp;p_row_p1[0])           // load centre vector from image[i+1][0..15]\n  for j = 0 to (ncols - 16) step 16         // assuming 16 elements per SIMD vector\n    v_m1_p1 = load_vec(&amp;p_row_m1[j+16])     // load right vector from image[i-1][0..15]\n    v_0_p1 = load_vec(&amp;p_row_0[j+16])       // load right vector from image[i][0..15]\n    v_p1_p1 = load_vec(&amp;p_row_p1[j+16])     // load right vector from image[i+1][0..15]\n    //\n    // you now have a 3x3 arrangement of vectors on which\n    // you can perform a neighbourhood operation and generate\n    // 16 output pixels for the current iteration:\n    //\n    //    v_m1_m1  v_m1_0  v_m1_p1\n    //    v_0_m1   v_0_0   v_0_p1\n    //    v_p1_m1  v_p1_0  v_p1_p1\n    //\n    //               |\n    //               V\n    //\n    //              v_out\n    //\n    store_vec(v_out, &amp;image_out[i][j])      // store output vector at image_out[i][j..j+15]\n    // shuffle vectors so that we can use them on next iteration\n    v_m1_m1 = v_m1_0\n    v_m1_0  = v_m1_p1\n    v_0_m1  = v_0_0 \n    v_0_0   = v_0_p1\n    v_p1_m1 = v_p1_0\n    v_p1_0  = v_p1_p1\n  end_for\n  // for final iteration we need to handle right edge pixels...\n  v_m1_p1 = init_vec(p_row_m1[ncols-1])     // fill right vector from image[i-1][ncols-1]\n  v_0_p1 = init_vec(p_row_0[ncols-1])       // fill right vector from image[i][ncols-1]\n  v_p1_p1 = init_vec(p_row_p1[ncols-1])     // fill right vector from image[i+1][ncols-1]\n  // calculate v_out as above\n  store_vec(v_out, &amp;image_out[i][j])        // store output vector at image_out[i][ncols_16..ncols-1]\nend_for\n</code></pre>\n\n<p>Note that this assumes 16 pixels per vector and also that <code>ncols</code> is a multiple of 16.</p>\n"}], "owner": {"reputation": 220, "user_id": 3476225, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/5688f812fa8ea3d0fffd6c8363bba48c?s=128&d=identicon&r=PG&f=1", "display_name": "user3476225", "link": "https://stackoverflow.com/users/3476225/user3476225"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 142, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1428667106, "creation_date": 1428506647, "last_edit_date": 1428667106, "question_id": 29518845, "link": "https://stackoverflow.com/questions/29518845/border-check-in-image-processing", "title": "Border check in image processing", "body": "<p>I want to take care the border conditions while handling any filters in image processing .I am extrapolating the border and creating the new boundary.For example I am having 4x3 input :</p>\n\n<pre><code>//Input\nint image[4][3] = \n1 2 3 4 \n2 4 6 8 \n3 6 9 12\n\n//Output\nint extensionimage[6][5] =\n1 1 2 3 4 4\n1 1 2 3 4 4 \n2 2 4 6 8 8\n3 3 6 9 12 12\n3 3 6 9 12 12\n</code></pre>\n\n<p>My code :</p>\n\n<pre><code>#include &lt;stdio.h&gt; \n#include &lt;string.h&gt; \n#include &lt;stdlib.h&gt; \n\nvoid padd_border(int *img,int *extension,int width,int height);\n\nint main(){\n    int width = 4,height = 3;\n    int *img =  new int[(width) * (height)];\n    for(int j = 0;j &lt; height; j++){\n        for(int i = 0;i &lt; width; i++){\n            img[j*width + i] = (i+1)*(j+1);\n            printf(\"%d\\t\",img[j*width + i]);\n        }\n    }\n    //Allocate memory for signal extension\n    int *extension =  new int[(width + 2) * (height + 2)];\n\n    //Check memory allocation\n    if (!extension)\n        return 0;\n\n    // init to zero\n    memset(extension, 0, sizeof(int)*(width + 2) * (height + 2));\n\n    //Padd the input for border conditions\n    padd_border(img,extension,width,height);\n    //HERE using \"extension\" input for dummy functionality \n\n    delete[] extension;\n    delete[] img;\n\n    return 0;\n}\n\nvoid padd_border(int *image,int *extension,int width,int height){\n\n    //   Create image extension\n    for (int i = 0; i &lt; height; ++i)\n    {\n        memcpy(extension + (width + 2) * (i + 1) + 1, image + width * i, width * sizeof(int));\n        extension[(width + 2) * (i + 1)] = image[width * i];\n        extension[(width + 2) * (i + 2) - 1] = image[width * (i + 1) - 1];\n    }\n\n    //   Fill first line of image extension\n    memcpy(extension, extension + width + 2, (width + 2) * sizeof(int));\n    //   Fill last line of image extension\n    memcpy(extension + (width + 2) * (height + 1), extension + (width + 2) * height, (width + 2) * sizeof(int));\n}\n</code></pre>\n\n<p>My questions:</p>\n\n<p>1) I don't want to create \"extension\" buffer. I want to reuse the image for doing the extrapolation. So is it possible ?</p>\n\n<p>2) How can I use Neon to do so wrt my above code ?</p>\n\n<p>After Changing the code according to PaulR pseudo code ,I am getting some strange results :</p>\n\n<p>Editing My question for run time issues during fixing the border<br>\nMy Input :</p>\n\n<pre><code>221 220 221 223 230 233 234 235 ..\n71  73  70  70  92  130 141 143 ..\n</code></pre>\n\n<p>I want to this operation to get destination :</p>\n\n<pre><code> -1*v_m1_m1 + 0*v_m1_0 + 1*v_m1_p1\n -1*v_0_m1  + 0*v_0_0  + 1*v_0_p1       -&gt;V_OUT\n -1*v_p1_m1 + 0*v_p1_0 + 1*v_p1_p1 \n</code></pre>\n\n<p>after changing the code for border I am getting below valuse:</p>\n\n<pre><code>    221 221 221 221    221 220 221 223   230 233 234 235\n    221 221 221 221    221 220 221 223   230 233 234 235\n    71  71  71  71     71  73  70  70    92  130 141 143\n</code></pre>\n\n<p>In scalar code if I want to calculate for 221 (@i,j =0,0) ,With border it is looking like this :</p>\n\n<pre><code> 221 221 220\n 221 221 220\n 71  71  73\n</code></pre>\n\n<p>But with vectorization in Neon ,I am getting which is wrong</p>\n\n<pre><code>v_m1_m1.0  v_m1_0.1  v_m1_p1.2\nv_0_m1.0   v_0_0.1   v_0_p1.2\nv_p1_m1.0  v_p1_0.1  v_p1_p1.2\n\n\n221 221 230 \n221 221 230\n71  71  92\n</code></pre>\n\n<p>my  pseudo code:</p>\n\n<pre><code>for i = 0 to nrows - 1\n        // init row pointers\n        p_row_m1 = src + src_width * MAX(i-1, 0);           // pointing to minus1 row\n        p_row_0  = src + src_width * i;                     // pointing to current row\n        p_row_p1 = src + src_width * MIN(i+1, src_width-1); // pointing to plus1 row\n\n        v_m1_m1 = vdupq_n_u32(p_row_m1[0]);   // fill left vector from src[i-1][0]\n        v_0_m1  = vdupq_n_u32(p_row_0[0]);    // fill left vector from src[i][0]\n        v_p1_m1 = vdupq_n_u32(p_row_p1[0]);   // fill left vector from src[i+1][0]\n\n        v_m1_0 = vld1q_u32(&amp;p_row_m1[0]);   // load center vector from src[i-1][0..7]\n        v_0_0  = vld1q_u32(&amp;p_row_0[0]);    // load center vector from src[i][0..7]\n        v_p1_0 = vld1q_u32(&amp;p_row_p1[0]);   // load center vector from src[i+1][0..7]\n\n        for j = 0 to (ncols - 4) step 4         // assuming 4 elements per SIMD vector\n\n            v_m1_p1  = vld1q_u32(&amp;p_row_m1[j+4]);   // load right vector from src[i-1][0..7]\n            v_0_p1   = vld1q_u32(&amp;p_row_0[j+4]);    // load right vector from src[i][0..7]\n            v_p1_p1  = vld1q_u32(&amp;p_row_p1[j+4]);   // load right vector from src[i+1][0..7]\n    //\n    // you now have a 3x3 arrangement of vectors on which\n    // you can perform a neighbourhood operation and generate\n    // 16 output pixels for the current iteration:\n    //\n    //    v_m1_m1  v_m1_0  v_m1_p1\n    //    v_0_m1   v_0_0   v_0_p1\n    //    v_p1_m1  v_p1_0  v_p1_p1\n    //\n    //               |\n    //               V\n    //\n    //              v_out\n    vst1q_s32(v_out, &amp;image_out[i][j])      // store output vector at image_out[i][j..j+15]\n    // shuffle vectors so that we can use them on next iteration\n    v_m1_m1 = v_m1_0\n    v_m1_0  = v_m1_p1\n\n    v_0_m1  = v_0_0 \n    v_0_0   = v_0_p1\n\n    v_p1_m1 = v_p1_0\n    v_p1_0  = v_p1_p1\n\n  end_for\n  // for final iteration we need to handle right edge pixels...\n  v_m1_p1 = vdupq_n_u32(p_row_m1[ncols-1])     // fill right vector from image[i-1][ncols-1]\n  v_0_p1  = vdupq_n_u32(p_row_0[ncols-1])       // fill right vector from image[i][ncols-1]\n  v_p1_p1 = vdupq_n_u32(p_row_p1[ncols-1])     // fill right vector from image[i+1][ncols-1]\n  // calculate v_out as above\n  vst1q_s32(v_out, &amp;image_out[i][j])        // store output vector at image_out[i][ncols_16..ncols-1]\nend_for\n</code></pre>\n"}, {"tags": ["c", "wifi"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1428506528, "post_id": 29518744, "comment_id": 47192673, "body": "Which O.S.? Which IDE/toolchain? Which platform?"}, {"owner": {"reputation": 573, "user_id": 4764743, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/HzVLJ.jpg?s=128&g=1", "display_name": "Spider", "link": "https://stackoverflow.com/users/4764743/spider"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1428570963, "post_id": 29518744, "comment_id": 47221704, "body": "Working with gcc on Linux"}], "answers": [{"comments": [{"owner": {"reputation": 573, "user_id": 4764743, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/HzVLJ.jpg?s=128&g=1", "display_name": "Spider", "link": "https://stackoverflow.com/users/4764743/spider"}, "edited": false, "score": 0, "creation_date": 1440148935, "post_id": 30531173, "comment_id": 52163713, "body": "Hi Warlock,  I actually have a problem using ieee80211.h. It can&#39;t be found on linux includes, and when trying to use the file you mentionned alone, a lot of errors appear."}, {"owner": {"reputation": 154, "user_id": 2318306, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/d1af7fdc6f3bd885560a7119746d2808?s=128&d=identicon&r=PG", "display_name": "Warlock", "link": "https://stackoverflow.com/users/2318306/warlock"}, "reply_to_user": {"reputation": 573, "user_id": 4764743, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/HzVLJ.jpg?s=128&g=1", "display_name": "Spider", "link": "https://stackoverflow.com/users/4764743/spider"}, "edited": false, "score": 0, "creation_date": 1442239257, "post_id": 30531173, "comment_id": 52988514, "body": "Hallo , you mean ieee80211.h i pointed to ? can post the error?"}, {"owner": {"reputation": 573, "user_id": 4764743, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/HzVLJ.jpg?s=128&g=1", "display_name": "Spider", "link": "https://stackoverflow.com/users/4764743/spider"}, "edited": false, "score": 0, "creation_date": 1442482457, "post_id": 30531173, "comment_id": 53103673, "body": "Hello Warlock. I just defined __packed which was not. Now, I am able to send raw frames using pcap_sendpacket. But I have another problem. I tried to specified the data rate on the radiotap header, but the NIC overwrite with always 1Mb/s. Is it possible to avoid this ? Thank you"}, {"owner": {"reputation": 154, "user_id": 2318306, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/d1af7fdc6f3bd885560a7119746d2808?s=128&d=identicon&r=PG", "display_name": "Warlock", "link": "https://stackoverflow.com/users/2318306/warlock"}, "reply_to_user": {"reputation": 573, "user_id": 4764743, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/HzVLJ.jpg?s=128&g=1", "display_name": "Spider", "link": "https://stackoverflow.com/users/4764743/spider"}, "edited": false, "score": 0, "creation_date": 1443192270, "post_id": 30531173, "comment_id": 53408240, "body": "you can avoid it..... youcan change the data rate by modifiying your radiotap header ..yes, its possible ! .."}, {"owner": {"reputation": 154, "user_id": 2318306, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/d1af7fdc6f3bd885560a7119746d2808?s=128&d=identicon&r=PG", "display_name": "Warlock", "link": "https://stackoverflow.com/users/2318306/warlock"}, "reply_to_user": {"reputation": 573, "user_id": 4764743, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/HzVLJ.jpg?s=128&g=1", "display_name": "Spider", "link": "https://stackoverflow.com/users/4764743/spider"}, "edited": false, "score": 1, "creation_date": 1481588677, "post_id": 30531173, "comment_id": 69428137, "body": "@Spider it also depends on your kernel version. For Eg:. With ralink adapters , from 4.8 you can change rate. Also with Ath9k PCI drivers..  Mark it as the answer if it helps you solve the problem."}, {"owner": {"reputation": 573, "user_id": 4764743, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/HzVLJ.jpg?s=128&g=1", "display_name": "Spider", "link": "https://stackoverflow.com/users/4764743/spider"}, "edited": false, "score": 0, "creation_date": 1491982078, "post_id": 30531173, "comment_id": 73787767, "body": "I figured this out. I use the solution proposed by Warlock. But it appeared that it is better to work with some chipsets than others. For instance, I tried to use broadcom ones and it was not working correctly. Atheros chipset is better, as it allows packet injection while managing itself sequence numbering. Thanks!"}, {"owner": {"reputation": 154, "user_id": 2318306, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/d1af7fdc6f3bd885560a7119746d2808?s=128&d=identicon&r=PG", "display_name": "Warlock", "link": "https://stackoverflow.com/users/2318306/warlock"}, "reply_to_user": {"reputation": 573, "user_id": 4764743, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/HzVLJ.jpg?s=128&g=1", "display_name": "Spider", "link": "https://stackoverflow.com/users/4764743/spider"}, "edited": false, "score": 0, "creation_date": 1493491804, "post_id": 30531173, "comment_id": 74443607, "body": "@Spider my pleasure!!"}], "tags": [], "owner": {"reputation": 154, "user_id": 2318306, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/d1af7fdc6f3bd885560a7119746d2808?s=128&d=identicon&r=PG", "display_name": "Warlock", "link": "https://stackoverflow.com/users/2318306/warlock"}, "is_accepted": true, "score": 0, "last_activity_date": 1432906893, "creation_date": 1432906893, "answer_id": 30531173, "question_id": 29518744, "link": "https://stackoverflow.com/questions/29518744/api-to-construct-802-11-frames-in-c-without-managing-control-fields/30531173#30531173", "title": "API to construct 802.11 frames in C without managing control fields", "body": "<p>First of all what type of packet are you trying to make? Data frames or beacon frames.....</p>\n\n<p>If you are creating from the scratch you need to set all the parameters yourself, i am using this header file\n[ieee80211]<a href=\"http://lxr.free-electrons.com/source/include/linux/ieee80211.h\" rel=\"nofollow\">http://lxr.free-electrons.com/source/include/linux/ieee80211.h</a>\nfor the 802.11 configuration parameters, and for radiotap headers , you can use \n[radiotap]<a href=\"http://lxr.free-electrons.com/source/include/net/ieee80211_radiotap.h\" rel=\"nofollow\">http://lxr.free-electrons.com/source/include/net/ieee80211_radiotap.h</a></p>\n\n<p>i can give you an example code(part of) of creating beacon frames</p>\n\n<pre><code>// Add the radiotap header\nradiotap-&gt;it_version = 0;\nradiotap-&gt;it_len = sizeof(*radiotap) + sizeof(dataRate);\nradiotap-&gt;it_present = (1 &lt;&lt; IEEE80211_RADIOTAP_RATE);\n\n\n// Beacon packet flags\ndot80211-&gt;i_fc[0] = IEEE80211_FC0_VERSION_0 | IEEE80211_FC0_TYPE_MGT | IEEE80211_FC0_SUBTYPE_BEACON;\ndot80211-&gt;i_fc[1] = IEEE80211_FC1_DIR_NODS;\ndot80211-&gt;i_dur[0] = 0x0;\ndot80211-&gt;i_dur[1] = 0x0;\n// Destination = broadcast (no retries)\nmemcpy( dot80211-&gt;i_addr1, mac_Destination, IEEE80211_ADDR_LEN );\n// Source = our own mac address\nmemcpy( dot80211-&gt;i_addr2, mac_source, IEEE80211_ADDR_LEN );\n// BSS = our mac address\nmemcpy( dot80211-&gt;i_addr3, mac_BSSID, IEEE80211_ADDR_LEN );\n// Sequence control: Automatically set by the driver\n\nbeacon -&gt; beacon_timestamp = TimeStamp;\nprintf(\"%\"PRIu64,beacon -&gt; beacon_timestamp);\n// interval = 100 \"time units\" = 102.4 ms\n// Each time unit is equal to 1024 us\nbeacon-&gt;beacon_interval =  BEACON_INTERVAL;\n// capabilities = sent by ESS\n//beacon-&gt;beacon_capabilities = x0003;\n</code></pre>\n\n<p>For Example :</p>\n\n<pre><code>dot80211-&gt;i_fc[0] = IEEE80211_FC0_VERSION_0 | IEEE80211_FC0_TYPE_MGT | IEEE80211_FC0_SUBTYPE_BEACON;\n</code></pre>\n\n<p>You can the set the FCS(frame control) like this, which is defined in the header.</p>\n\n<p>My suggestion is to create your own header files or modify it according to your need..</p>\n\n<p>Hope this helps ??</p>\n"}], "owner": {"reputation": 573, "user_id": 4764743, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/HzVLJ.jpg?s=128&g=1", "display_name": "Spider", "link": "https://stackoverflow.com/users/4764743/spider"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 703, "favorite_count": 0, "accepted_answer_id": 30531173, "answer_count": 1, "score": 0, "last_activity_date": 1432906893, "creation_date": 1428506379, "question_id": 29518744, "link": "https://stackoverflow.com/questions/29518744/api-to-construct-802-11-frames-in-c-without-managing-control-fields", "title": "API to construct 802.11 frames in C without managing control fields", "body": "<p>I am trying to build and send 802.11 frames in C. I saw that it is possible to do it with pcap for instance. However, in all example I saw, I have to set myself sequence number and other control fields. So I'm wondering if there is an API that permits to manage all this control part and where I only have to specify addresses ? </p>\n\n<p>Thank you in advance,</p>\n"}, {"tags": ["c", "linux", "pipe", "fork"], "comments": [{"owner": {"reputation": 4007, "user_id": 4255107, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-84XHYSdES6k/AAAAAAAAAAI/AAAAAAAAAF0/BzBS4Ozwoc0/photo.jpg?sz=128", "display_name": "sonus21", "link": "https://stackoverflow.com/users/4255107/sonus21"}, "edited": false, "score": 0, "creation_date": 1428506568, "post_id": 29518695, "comment_id": 47192704, "body": "Instead of fork you can use threads that is also  light weight and easy then this due to pipe and all these stuffs .<a href=\"http://stackoverflow.com/questions/5514464/difference-between-pthread-and-fork-on-gnu-linux\" title=\"difference between pthread and fork on gnu linux\">stackoverflow.com/questions/5514464/&hellip;</a>"}, {"owner": {"reputation": 163, "user_id": 3674483, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100004604730284/picture?type=large", "display_name": "NewCoder", "link": "https://stackoverflow.com/users/3674483/newcoder"}, "reply_to_user": {"reputation": 4007, "user_id": 4255107, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-84XHYSdES6k/AAAAAAAAAAI/AAAAAAAAAF0/BzBS4Ozwoc0/photo.jpg?sz=128", "display_name": "sonus21", "link": "https://stackoverflow.com/users/4255107/sonus21"}, "edited": false, "score": 0, "creation_date": 1428506668, "post_id": 29518695, "comment_id": 47192778, "body": "I will learn it also but it is time to learn using of fork() and pipe(). @sonukumar"}, {"owner": {"reputation": 7195, "user_id": 384954, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/eb7bd28bf9bee8c0f477c76c6effd84e?s=128&d=identicon&r=PG", "display_name": "OregonTrail", "link": "https://stackoverflow.com/users/384954/oregontrail"}, "edited": false, "score": 0, "creation_date": 1428506889, "post_id": 29518695, "comment_id": 47192926, "body": "This is a fun problem to learn with. However calling <code>fork()</code> to create a process for each <code>count()</code> has too much overhead with current operating systems, and could bring down the system (see &quot;Fork Bomb&quot;). A slightly better approach is to <code>fork()</code> for each directory, but that has a similar overhead. A much better approach would be to <code>fork()</code> a number of worker processes equal to the number of CPUs on the system, have the parent process recursively scan for files on the filesystem, and add these filepaths to a queue. Each worker would communicate with the parent via it&#39;s own <code>pipe()</code>."}, {"owner": {"reputation": 4218, "user_id": 865281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/435568f417505b4ccd67ee51253b5f5e?s=128&d=identicon&r=PG", "display_name": "Xaqq", "link": "https://stackoverflow.com/users/865281/xaqq"}, "edited": false, "score": 0, "creation_date": 1428510869, "post_id": 29518695, "comment_id": 47195530, "body": "I understand you&#39;re doing this in a learning purpose, but as a side note: it is unlikely that <code>fork()</code> (or threading) will improve performance. If your underlying file system sits on a HDD it woud likely lead to worse performance."}, {"owner": {"reputation": 4007, "user_id": 4255107, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-84XHYSdES6k/AAAAAAAAAAI/AAAAAAAAAF0/BzBS4Ozwoc0/photo.jpg?sz=128", "display_name": "sonus21", "link": "https://stackoverflow.com/users/4255107/sonus21"}, "edited": false, "score": 0, "creation_date": 1428511057, "post_id": 29518695, "comment_id": 47195654, "body": "@NewCoder <a href=\"http://pastebin.com/V6dvEFnP\" rel=\"nofollow noreferrer\">pastebin.com/V6dvEFnP</a> check this it works without pipe .Fork is used for each and every file ."}], "answers": [{"tags": [], "owner": {"reputation": 7195, "user_id": 384954, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/eb7bd28bf9bee8c0f477c76c6effd84e?s=128&d=identicon&r=PG", "display_name": "OregonTrail", "link": "https://stackoverflow.com/users/384954/oregontrail"}, "is_accepted": false, "score": 0, "last_activity_date": 1428510395, "last_edit_date": 1428510395, "creation_date": 1428507110, "answer_id": 29519025, "question_id": 29518695, "link": "https://stackoverflow.com/questions/29518695/applying-fork-and-pipe-or-fifo-on-counting-words-code/29519025#29519025", "title": "Applying fork() and pipe() (or fifo()) on counting words code", "body": "<p>To start I would write the program with two phases. A single-process phase in which all the file-paths are queued up (into a linked-list or dequeue), and a multi-process phase in which the worker processes receive work via their <code>pipe()</code> and send counts back to the main process via their <code>pipe()</code>. The main process would use <code>select()</code> to multiplex the input from its children.</p>\n\n<p>Once you understand how to use <code>select()</code> with <code>pipe()</code>s, then work on having the filepath discovery be concurrent.</p>\n\n<p>This design would be much easier to implement in <code>Go</code>, <code>node.js</code>, or <code>greenlet</code> with Python, but learning how to do it in <code>C</code> gives you a level of understanding for the underlying operations that you don't get with newer languages.</p>\n"}], "owner": {"reputation": 163, "user_id": 3674483, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100004604730284/picture?type=large", "display_name": "NewCoder", "link": "https://stackoverflow.com/users/3674483/newcoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 929, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1428571449, "creation_date": 1428506237, "last_edit_date": 1428571449, "question_id": 29518695, "link": "https://stackoverflow.com/questions/29518695/applying-fork-and-pipe-or-fifo-on-counting-words-code", "title": "Applying fork() and pipe() (or fifo()) on counting words code", "body": "<p>I've completed writing of counting words code finally. It counts total number of words in files. (i.e. txt). Now, I want to use multiple fork() to access and read every file. I studied in the last week. Besides, I use global variable to hold number of counted words. As far as I know, If I apply fork(), used global variables are assigned as 0. To avoid it, I tried to use mmap() and similar functions this is okey. But, I also want to use pipe() also (fifo() if it is possible) to communicate (hold values of numbers). </p>\n\n<p>I use nftw() function to go in folders and files. My logic is on the below picture. How can use fork() and pipe() (fifo()) on this code ? fork() is really complicated for me because of my inexperience. I'm new using of pipe() and fork(). According to my idea logic of the code is that if I can use fork() and pipe(), there will be fork() every file(i.e. txt) and access them by using fork. If there is another folder and there are files, again creates fork() from one of created forks , then access file. I try to explain also drawing below. Thank you. I want to learn using of them.</p>\n\n<pre><code>int countInEveryFolder(const char *dir)\n</code></pre>\n\n<p>is used because I don't know how to count files until the next folder in nftw() function. Number of files is necessary because it is number of fork.</p>\n\n<p>Every folder should be parent of files. The files are included by the folder.</p>\n\n<p><img src=\"https://i.stack.imgur.com/iyaDM.jpg\" alt=\"fork scheme\"></p>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;dirent.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;ftw.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;sys/mman.h&gt;\n#include &lt;locale.h&gt;\n#include &lt;errno.h&gt;\n\n\n\n#define MAX_PATH_LEN        2048\n\nunsigned long total_words = 0UL;\nunsigned long total_dirs = 0UL;\nunsigned long total_files = 0UL;\n\n\n// Just proves counting number of file in a folder\nint countInEveryFolder(const char *dir) {\n    struct stat stDirInfo;\n    struct dirent * stFiles;\n    DIR * stDirIn;\n    char szFullName[MAX_PATH_LEN];\n    char szDirectory[MAX_PATH_LEN];\n    struct stat stFileInfo;\n\n    int numOfFile = 0;\n\n        strncpy( szDirectory, dir, MAX_PATH_LEN - 1 );\n\n\n    if (lstat( szDirectory, &amp;stDirInfo) &lt; 0)\n    {\n        perror (szDirectory);\n        return 0;\n    }\n    if (!S_ISDIR(stDirInfo.st_mode))\n        return 0;\n    if ((stDirIn = opendir( szDirectory)) == NULL)\n    {\n        perror( szDirectory );\n        return 0;\n    }\n    while (( stFiles = readdir(stDirIn)) != NULL)\n    {\n        if (!strcmp(stFiles-&gt;d_name, \".\") || !strcmp(stFiles-&gt;d_name, \"..\"))\n            continue;\n        sprintf(szFullName, \"%s/%s\", szDirectory, stFiles -&gt; d_name );\n\n        if (lstat(szFullName, &amp;stFileInfo) &lt; 0)\n            perror ( szFullName );\n\n        /* is the file a directory? */\n        if (S_ISREG(stFileInfo.st_mode))\n        {\n            printf( \"Filename: %s\\n\", szFullName );\n            numOfFile++;\n        }\n\n    }  // end while\n    closedir(stDirIn);\n    return numOfFile;\n}\n\n\n\n\n// Count words in files.\nunsigned long count_words_in_file(const char *const filename)\n{\n    unsigned long count = 0UL;\n    int errnum = 0;\n    int c;\n    FILE *in;\n\n    in = fopen(filename, \"rt\");\n    if (in == NULL) {\n        errnum = errno;\n        fprintf(stderr, \"%s: %s.\\n\", filename, strerror(errnum));\n        errno = errnum;\n        return 0UL;\n    }\n\n    /* Skip leading whitespace. */\n    do {\n        c = getc(in);\n    } while (isspace(c));\n\n    /* Token loop. */\n    while (c != EOF) {\n\n        /* This token is a word, if it starts with a letter. */\n        if (isalpha(c))\n            count++;\n\n        /* Skip the rest of this token. */\n        while (!isspace(c) &amp;&amp; c != EOF)\n            c = getc(in);\n\n        /* Skip the trailing whitespace. */\n        while (isspace(c))\n            c = getc(in);\n    }\n\n    /* Paranoid checking for I/O errors. */\n    if (!feof(in) || ferror(in)) {\n        fclose(in);\n        fprintf(stderr, \"Warning: %s: %s.\\n\", filename, strerror(EIO));\n        errnum = EIO;\n    } else\n        if (fclose(in)) {\n            fprintf(stderr, \"Warning: %s: %s.\\n\", filename, strerror(EIO));\n            errnum = EIO;\n        }\n    errno = errnum;\n\n    return count;\n}\n\n\n// Recursively go in folders\nint nftw_callback(const char *filepath, const struct stat *sb, int typeflag, struct FTW *ftwbuf)\n{\n\n    // Directory\n    if (typeflag == FTW_DP || typeflag == FTW_D)\n    {\n\n        total_dirs++;\n        printf(\"%*s%s\\n\", ftwbuf-&gt;level * 4, \"\", filepath);\n        //countInEveryFolder(filepath);\n\n    }\n    // Folder\n    else if (typeflag == FTW_F)\n    {\n        total_files++;\n        total_words += count_words_in_file(filepath);\n        printf(\"%*s%s\\n\", ftwbuf-&gt;level * 4, \"\", filepath);\n    }\n    return 0;\n}\n\n/* Error message */\nvoid err_sys(const char *msg)\n{\n    perror(msg);\n    fflush(stdout);\n    exit(EXIT_FAILURE);\n}\n\n\n\nint main(int argc, char *argv[])\n{\n\n\n    total_files = total_dirs = total_words = 0UL;\n    if (nftw(argv[1], nftw_callback, 15, FTW_PHYS) == 0) {\n        /* Success! */\n        printf(\"%s: %lu files, %lu directories, %lu words total.\\n\",\n               argv[1], total_files, total_dirs, total_words);\n\n    } else {\n        /* Failed... */\n        err_sys(\"ntfw\");\n    }\n    putchar('\\n');\n\n\n\n    //printf( \"\\nTotal words = %d\\n\\n\", *wordCount);\n    //printf( \"\\nTotal folders = %d\\n\\n\", *folderCount);\n    //printf( \"\\nTotal childs = %d\\n\\n\", *childCount);      //fork()\n\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "unix"], "comments": [{"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1428506449, "post_id": 29518588, "comment_id": 47192609, "body": "Variable <code>getInput</code> is used before being initialized. It must be set to point to a valid memory address (i.e., of a properly allocated memory segment) before using it (i.e., before passing it to function <code>fscanf</code>)!!!"}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1428561629, "post_id": 29518588, "comment_id": 47216327, "body": "<code>fflush(stdout);</code> instead of <code>fflush(NULL);</code> will make it to flush standard output.  Otherwise, it won&#39;t print the <code>&quot;http &gt;&gt; :&quot;</code> prompt and possibly even crash.  Also try to put some <code>\\n</code> at the end of messages printed to stderr, or you&#39;ll mesh the output.  Also, don&#39;t forget to close the file you <code>fopen()</code>ed, or you&#39;ll be unable to do after subroutine execution."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user858224"}, "is_accepted": true, "score": 3, "last_activity_date": 1428506486, "last_edit_date": 1428506486, "creation_date": 1428506129, "answer_id": 29518657, "question_id": 29518588, "link": "https://stackoverflow.com/questions/29518588/c-program-just-exits-after-trying-to-write-to-stdout/29518657#29518657", "title": "C program just exits after trying to write to stdout", "body": "<p>It crashes because you have not allocated any memory for <code>getInput</code> to point at. So the program will crash when it attempts to follow the pointer, which will not point to anything useful.</p>\n\n<p>Either allocate memory dynamically with for example <code>malloc</code>, or replace it with a static buffer.</p>\n\n<p>Also, you may want to look at <code>strcmp</code> for comparing strings. Comparing strings in C with <code>==</code> will not compare the strings lexically, instead it will only compare the pointers pointing at them.</p>\n"}, {"comments": [{"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1428506316, "post_id": 29518666, "comment_id": 47192513, "body": "And don&#39;t forget to test that malloc returned without error and to free the memory when you are done."}, {"owner": {"reputation": 115, "user_id": 1033042, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/bf9fa479c8a7df3d6a95d41720ce5706?s=128&d=identicon&r=PG", "display_name": "LewisFletch", "link": "https://stackoverflow.com/users/1033042/lewisfletch"}, "edited": false, "score": 0, "creation_date": 1428506440, "post_id": 29518666, "comment_id": 47192603, "body": "makes no difference if i allocate memory... even after i do. i get the same result. weirdly enough... just exits with value 1. EDIT: just testing something else with malloc. will get back to you"}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1428507245, "post_id": 29518666, "comment_id": 47193190, "body": "And don&#39;t forget to <code>free</code> it. And in general, if you choose to call <code>malloc</code> with a constant input value of <code>200</code>, you might as well just allocate it statically as <code>char getInput[200]</code>. Unless you explicitly emphasize that <code>malloc</code> is <b>just one of the possible ways</b> to initialize this variable, you should also cover the other options. And in either case, since you&#39;ve explicitly used <code>malloc</code>, you should definitely cover other aspects of this type of allocation (including allocation-failure as mentioned on the first comment, and deallocation at a later point in the execution of the program)."}, {"owner": {"reputation": 115, "user_id": 1033042, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/bf9fa479c8a7df3d6a95d41720ce5706?s=128&d=identicon&r=PG", "display_name": "LewisFletch", "link": "https://stackoverflow.com/users/1033042/lewisfletch"}, "edited": false, "score": 0, "creation_date": 1428507555, "post_id": 29518666, "comment_id": 47193431, "body": "Hi Barak, yeah i did try that and eventually went with char inputbuffer[100] but am still getting the same result when i run the program. i understand now that i hadn&#39;t allocated memory but absolutely stumped as to why it didn&#39;t change anything?"}], "tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 2, "last_activity_date": 1428506158, "creation_date": 1428506158, "answer_id": 29518666, "question_id": 29518588, "link": "https://stackoverflow.com/questions/29518588/c-program-just-exits-after-trying-to-write-to-stdout/29518666#29518666", "title": "C program just exits after trying to write to stdout", "body": "<pre><code>fscanf(stdin,\"%s\", getInput);\n</code></pre>\n\n<p><code>getInput</code> is never initialized or allocated memory.Fix it by allocating memory</p>\n\n<pre><code>getInput = malloc(200);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 115, "user_id": 1033042, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/bf9fa479c8a7df3d6a95d41720ce5706?s=128&d=identicon&r=PG", "display_name": "LewisFletch", "link": "https://stackoverflow.com/users/1033042/lewisfletch"}, "edited": false, "score": 0, "creation_date": 1428507432, "post_id": 29518770, "comment_id": 47193337, "body": "Thanks for your input, for some reason didn&#39;t work at all and still getting same result. added changes to code though so it&#39;s correct and change to srtcmp for string compare."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 115, "user_id": 1033042, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/bf9fa479c8a7df3d6a95d41720ce5706?s=128&d=identicon&r=PG", "display_name": "LewisFletch", "link": "https://stackoverflow.com/users/1033042/lewisfletch"}, "edited": false, "score": 0, "creation_date": 1428507543, "post_id": 29518770, "comment_id": 47193420, "body": "@LewisFletch please do not edit the question like that, that invalidates the answers already posted."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 115, "user_id": 1033042, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/bf9fa479c8a7df3d6a95d41720ce5706?s=128&d=identicon&r=PG", "display_name": "LewisFletch", "link": "https://stackoverflow.com/users/1033042/lewisfletch"}, "edited": false, "score": 0, "creation_date": 1428507602, "post_id": 29518770, "comment_id": 47193466, "body": "@LewisFletch May be you need to post <code>main()</code>."}, {"owner": {"reputation": 115, "user_id": 1033042, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/bf9fa479c8a7df3d6a95d41720ce5706?s=128&d=identicon&r=PG", "display_name": "LewisFletch", "link": "https://stackoverflow.com/users/1033042/lewisfletch"}, "edited": false, "score": 0, "creation_date": 1428507666, "post_id": 29518770, "comment_id": 47193514, "body": "oh sorry about that. will change back,,, and sure thing"}, {"owner": {"reputation": 115, "user_id": 1033042, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/bf9fa479c8a7df3d6a95d41720ce5706?s=128&d=identicon&r=PG", "display_name": "LewisFletch", "link": "https://stackoverflow.com/users/1033042/lewisfletch"}, "edited": false, "score": 0, "creation_date": 1428507777, "post_id": 29518770, "comment_id": 47193605, "body": "<code>Main()</code> is basically just calling <code>input_arg();</code> at the moment. not doing anything else."}, {"owner": {"reputation": 115, "user_id": 1033042, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/bf9fa479c8a7df3d6a95d41720ce5706?s=128&d=identicon&r=PG", "display_name": "LewisFletch", "link": "https://stackoverflow.com/users/1033042/lewisfletch"}, "edited": false, "score": 0, "creation_date": 1428578800, "post_id": 29518770, "comment_id": 47226619, "body": "it still does the same thing and exits after inputting. not sure why but i get the same result. firstly, have i structured this correctly? is it the best way of completing the task?"}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 1, "last_activity_date": 1428508156, "last_edit_date": 1428508156, "creation_date": 1428506458, "answer_id": 29518770, "question_id": 29518588, "link": "https://stackoverflow.com/questions/29518588/c-program-just-exits-after-trying-to-write-to-stdout/29518770#29518770", "title": "C program just exits after trying to write to stdout", "body": "<p>Your program has serious issues, the most important one is that you are using <code>fopen()</code> with <code>read()</code> and that is wrong.</p>\n\n<p>The <a href=\"http://man7.org/linux/man-pages/man2/read.2.html\" rel=\"nofollow\"><code>read()</code></a> function takes and <code>int</code> as first parameter, which is a file descriptor tha you can create via the <a href=\"http://man7.org/linux/man-pages/man2/open.2.html\" rel=\"nofollow\"><code>open()</code></a> function, and not <code>fopen()</code> which returns a <code>FILE *</code> object, so change<sup>[1]</sup></p>\n\n<pre><code>FILE *loadFile;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>int loadFile;\n</code></pre>\n\n<p>and</p>\n\n<pre><code>loadFile = fopen(defaultFile, \"r\");\n</code></pre>\n\n<p>to</p>\n\n<pre><code>loadFile = open(defaultFile, O_RDONLY);\n</code></pre>\n\n<p>and then to check for failure</p>\n\n<pre><code>if (loadFile == -1) /* it failed to open check errno? perhaps... */\n</code></pre>\n\n<p>you must enable compiler warnings to prevent this kind of mistake, because the first parameter of <code>read()</code> in your program is of incompatible type.</p>\n\n<p>The <a href=\"http://man7.org/linux/man-pages/man3/scanf.3.html\" rel=\"nofollow\"><code>fscanf()</code></a> function expects a valid pointer for each <code>\"%s\"</code> specifier, you are passing an unintialzed pointer to it, dereferencing it inside of <code>scanf()</code> is undefined behavior.</p>\n\n<p>You need to allocate space for it, something like this should work</p>\n\n<pre><code>char inputBuffer[100];\nif (fscanf(stdin, \"%99s\", inputBuffer) != 1)\n    thereWasAProblemGettingInput_DoNotUse_inputBuffer_InTheCodeThatFollows();\n</code></pre>\n\n<p>Note that:</p>\n\n<ol>\n<li><p>I used <code>inputBuffer</code> as a name for the variable, though this doesn't affect the program execution or compilation at all, the readability matters.</p></li>\n<li><p>Used <code>\"%99s\"</code> to prevent buffer overflow.</p></li>\n<li><p>Checked the value returned by <code>fscanf()</code> to make sure that the <code>inputBuffer</code> has valid data and was properly initialized.</p></li>\n</ol>\n\n<p>String comparison in c is not like in many other languages, in your code</p>\n\n<pre><code>if (getInput == \"GET\") \n</code></pre>\n\n<p>is comparing the addresses of <code>getInput</code> and the string literal <code>\"GET\"</code>, which will not be the same unless you make <code>getInput</code> point to <code>\"GET\"</code>, since you want to compare the contents you need</p>\n\n<pre><code>if (strcmp(inputBuffer, \"GET\") == 0)\n</code></pre>\n\n<p>instead, and do not forget to include the <code>string.h</code> header.</p>\n\n<hr>\n\n<p><sup>[1]</sup><sub>Note that <code>loadFile</code> is also a bad choice for a variable name, it feels like a function name, <code>inputFile</code> would be more appropriate.</sub></p>\n"}], "owner": {"reputation": 115, "user_id": 1033042, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/bf9fa479c8a7df3d6a95d41720ce5706?s=128&d=identicon&r=PG", "display_name": "LewisFletch", "link": "https://stackoverflow.com/users/1033042/lewisfletch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "accepted_answer_id": 29518657, "answer_count": 3, "score": 1, "last_activity_date": 1428508156, "creation_date": 1428505938, "last_edit_date": 1428507976, "question_id": 29518588, "link": "https://stackoverflow.com/questions/29518588/c-program-just-exits-after-trying-to-write-to-stdout", "title": "C program just exits after trying to write to stdout", "body": "<p>so written a small function (part of a larger program) and when i run it and input \"GET\" it exits with a value of 1. to be honest i'm still grasping the concept of open read and write to stdout but not sure what i've done wrong here.</p>\n\n<pre><code>int input_arg()\n{\n    MainStruct val;    //variables are loaded from a config file to this    structure\n    char *getInput;\n    char *fileInput;\n    FILE *loadfile;\n    char buffer[1024];\n    int n;\n    int defaultFile = val.def; //success.txt value read when fileparser.c is run\n\n    printf(\"http &gt;&gt;  :\");\n    fflush(NULL);\n    fscanf(stdin,\"%s\", getInput);\n\n    if (getInput == \"GET\") \n    {\n        loadfile = fopen(defaultFile, \"r\");\n        if (loadfile == NULL)\n        {\n            fprintf(stderr, \"error loading default resource: PROGRAM WILL EXIT\");\n            exit(0);\n        }\n        while ((n = read(loadfile, buffer, sizeof(buffer))) &gt; 0) //reads file  (not sure this should be a while loop)\n        {\n            if((write(STDOUT_FILENO, buffer, n)) &lt; 0) //writes to stdout\n            {\n                perror(\"failed to display file to output\");\n                close(loadfile);\n                exit(1);\n            }\n        }    \n    }\n}\n</code></pre>\n\n<p>for compiling purposes the val.def pointer is a string as below</p>\n\n<p><code>char defaultFile = \"success.txt\";</code></p>\n\n<p>unsure of what i am missing here. tried changing the structure pointer to a simple char string to see if it was anything there but didn't actually make any difference. i think the problem is with the <code>while</code> loop...i don't think it should be there, but i have yet to find an example where a while loop ISN'T used in a write to <code>stdout</code> scenario.</p>\n\n<p>thanks</p>\n"}, {"tags": ["c", "arrays", "encryption", "fgetc"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1428505801, "post_id": 29518339, "comment_id": 47192118, "body": "<code>char str2[2];</code> .. <code>str[i]^=str2[2];</code> : <code>str2[2]</code> is invalid.  you need <code>char str2[3];</code> or skip white spaces"}, {"owner": {"reputation": 5767, "user_id": 27800, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f8d805c02bfa80a79df1381984ac5d3a?s=128&d=identicon&r=PG", "display_name": "Peter Miehle", "link": "https://stackoverflow.com/users/27800/peter-miehle"}, "edited": false, "score": 1, "creation_date": 1428505930, "post_id": 29518339, "comment_id": 47192200, "body": "there should be a terminating zero to str. the array may not be initialized"}, {"owner": {"reputation": 121, "user_id": 4400293, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0FtxZ.png?s=128&g=1", "display_name": "Raoul Duke", "link": "https://stackoverflow.com/users/4400293/raoul-duke"}, "edited": false, "score": 0, "creation_date": 1428505948, "post_id": 29518339, "comment_id": 47192213, "body": "char str2[3] doesn&#39;t seem correct to me since at the top of the code: char str2[2];"}, {"owner": {"reputation": 58084, "user_id": 1816580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30e6b41f1e2bd48b058e8e72c1f0f57?s=128&d=identicon&r=PG", "display_name": "Artjom B.", "link": "https://stackoverflow.com/users/1816580/artjom-b"}, "edited": false, "score": 0, "creation_date": 1428505967, "post_id": 29518339, "comment_id": 47192226, "body": "If you accepted your <a href=\"http://stackoverflow.com/questions/29499480/how-to-encrypt-a-text-file-using-bit-wise-xor\">previous question</a> why do you ask essentially the same question again?"}, {"owner": {"reputation": 121, "user_id": 4400293, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0FtxZ.png?s=128&g=1", "display_name": "Raoul Duke", "link": "https://stackoverflow.com/users/4400293/raoul-duke"}, "edited": false, "score": 0, "creation_date": 1428506091, "post_id": 29518339, "comment_id": 47192324, "body": "Previous question is different from what i&#39;m trying to do here"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1428507159, "post_id": 29518339, "comment_id": 47193136, "body": "<code>&quot;</code>^<code>M</code> ==&gt; <code>o</code>. (not <code>m</code>). Perhaps you have misunderstood the correct processing itself."}, {"owner": {"reputation": 121, "user_id": 4400293, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0FtxZ.png?s=128&g=1", "display_name": "Raoul Duke", "link": "https://stackoverflow.com/users/4400293/raoul-duke"}, "edited": false, "score": 0, "creation_date": 1428507847, "post_id": 29518339, "comment_id": 47193661, "body": "I think so. Thanks for your help anyway"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1428510135, "post_id": 29518339, "comment_id": 47195126, "body": "Did you come <b>correct output</b> is from where? it is correct processing if your program can restore the output of its own."}, {"owner": {"reputation": 121, "user_id": 4400293, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0FtxZ.png?s=128&g=1", "display_name": "Raoul Duke", "link": "https://stackoverflow.com/users/4400293/raoul-duke"}, "edited": false, "score": 0, "creation_date": 1428511897, "post_id": 29518339, "comment_id": 47196166, "body": "yes, it however doesn&#39;t return the same text back. Everything except the last line which like you said contains extra white spaces"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1428512565, "post_id": 29518339, "comment_id": 47196593, "body": "1) it has already been pointed out, C-string requires a termination character(<code>&#39;\\0&#39;</code>). 2) Conversely, there are cases where the result as the M ^ M (or !^!) becomes zero(<code>&#39;\\0&#39;</code>). 3) <code>str[++i]^=str2[0];</code> : Beyond the length of the string there is a case to the processing."}], "answers": [{"tags": [], "owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "is_accepted": true, "score": 0, "last_activity_date": 1428515984, "creation_date": 1428515984, "answer_id": 29522008, "question_id": 29518339, "link": "https://stackoverflow.com/questions/29518339/how-to-fix-error-in-code-to-make-encryption-of-a-text-file/29522008#29522008", "title": "How to fix error in code to make encryption of a text file?", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main(int argc, char *args[]){\n    FILE *finp, *keyFile, *fout;\n    int i, ch;\n    char key[2];\n\n    if(argc == 4 &amp;&amp; strcmp(args[1], \"e\") == 0){\n        //Read two key character\n        if ((keyFile = fopen(args[3], \"r\")) == NULL){\n            printf(\"Could Not Open file %s\\n\", args[3]);\n            exit(1);\n        }\n        if(1!=fscanf(keyFile, \" %c\", &amp;key[0]) || 1!=fscanf(keyFile, \" %c\", &amp;key[1])){\n            printf(\"Could Not Read Key properly.\\n\");\n            exit(1);\n        }\n        fclose(keyFile);\n\n        if((finp = fopen(args[2], \"rb\")) == NULL){\n            printf(\"Could Not Open file %s\\n\", args[2]);\n            exit(1);\n        }\n        if((fout = fopen(\"out.dat\", \"wb\")) == NULL){\n            printf(\"Could Not Open file out.dat\\n\");\n            exit(1);\n        }\n\n        i = 1;\n        while((ch = fgetc(finp))!=EOF){\n            fputc(ch ^ key[i], fout);\n            i = !i;\n        }\n        fclose(fout);\n        fclose(finp);\n    } else {\n        printf(\"SORRY!\\n\");\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 4400293, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0FtxZ.png?s=128&g=1", "display_name": "Raoul Duke", "link": "https://stackoverflow.com/users/4400293/raoul-duke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 29522008, "answer_count": 1, "score": 1, "last_activity_date": 1428515984, "creation_date": 1428505256, "last_edit_date": 1428505830, "question_id": 29518339, "link": "https://stackoverflow.com/questions/29518339/how-to-fix-error-in-code-to-make-encryption-of-a-text-file", "title": "How to fix error in code to make encryption of a text file?", "body": "<p>I am writing a program the will write an encrypted version of a text file(input.txt) to an output file(out.txt). The encryption uses the bit wise XOR operation on the input file and a file containing(keys.txt) two keys with a new line character in between those keys. Everything seems to work right except towards the end of my encrypted output I get a series of unreadable characters.</p>\n\n<p>Input.txt:</p>\n\n<p>\"Will you walk a little faster?\" said a whiting to a snail,\n  \"There's a porpoise close behind us, and he's treading on my\n        tail.\n  See how eagerly the lobsters and the turtles all advance!\n  They are waiting on the shingle-will you come and join the\n        dance?</p>\n\n<p>Keys.txt:</p>\n\n<p>!</p>\n\n<p>M</p>\n\n<p>The code below contains two print statements to test if the code is even getting the text file correctly. I've noticed that the keys are getting grabbed fine however, the input.txt(str) is not grabbing the entire message. Can someone help me? What is the reason for this??</p>\n\n<p><em>NOTE</em></p>\n\n<p>My wrong output looks like this:</p>\n\n<p>ov$M!4N8:@!Jm@mM$U9M(+@>U(SrmR,H),:I$U$O*9Nm@mR#@$Ma+mou%D?DjRm@mQ\"S=N$R(.M\"R(/D%H#EmT>\nm@#EmI(>9S(@)H#FmN# Xm+mmmmU,H!Gmr(DmI\"VmD,F(S!XmU%DmM\"C>U(S>,O)9I(9T?U!D>,M!,E;@#B(</p>\n\n<p>The correct output should be:</p>\n\n<p>m@#EmI(>9S(@)H#FmN# XGmmmmU,H!Gmr(DmI\"VmD,F(S!XmU%DmM\"C>U(S>,O)9I(9T?U!D>,M!,E;@#B(Gmu%D4,S(:@$U$O*\"OmU%DmR%H#F!D`V$M!4N8.N Dm@#EmK\"H#9I(+mmmm)@#B(f</p>\n\n<p>The program to convert to hexadecimal (xxd myProgram.c) is used to clarify. </p>\n\n<p>User should type:</p>\n\n<p>gcc myProgram.c</p>\n\n<p>./a.out e input.txt keys.txt</p>\n\n<p>('e' stands for encrypt)</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;string.h&gt;\n\nint main(int args, char *argc[]){\n  int i=0;\n  int j=0;\n  int len=0;\n  char str[501];\n  char str2[2];\n  char c;\n  FILE *finp;\n  FILE *keyFile;\n  FILE *fout;\n\n  if ( strcmp(argc[1], \"e\") == 0 )\n  {\n    if ( (finp = fopen(argc[2],\"r\")) == NULL )\n    {\n      printf(\"Could Not Open file %s\\n\", argc[2]);\n      exit(1);\n    }\n\n    if ( (keyFile = fopen(argc[3],\"r\")) == NULL )\n    {\n      printf(\"Could Not Open file %s\\n\", argc[3]);\n      exit(1);\n    }\n\n    while((c = fgetc(finp))!=EOF)\n    {\n      str[j++] = c;\n    }\n\n    while((c = fgetc(keyFile)) != EOF)\n    {\n      str2[i++] = c;    \n    }\n\n    /*Print Statement to test the keys*/\n    //  printf(\"%c%c\", str2[0], str2[2]);\n    /*Print Statement to test the input*/\n    //  printf(\"%s\\n\", str);\n\n    /* *** START CODE THAT USES INPUT.TXT FILE and KEYS.TXT *** */\n\n    len = strlen(str);\n    for(i=0;i&lt;len;i++)\n    {\n      str[i]^=str2[2];\n      str[++i]^=str2[0];\n    }\n\n    fout=fopen(\"out.txt\",\"w\");\n    if(fout==NULL)\n    {\n      printf(\"ERROR\");\n      exit(1);\n    }\n\n    fprintf(fout, \"%s\", str);\n    fclose(finp);\n    return 0;\n  } else {\n    printf(\"SORRY!\");\n  }\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 7, "creation_date": 1428505035, "post_id": 29518227, "comment_id": 47191527, "body": "This is not about C."}, {"owner": {"reputation": 7526, "user_id": 4108376, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/163807162a115b27e50f5f5f2b90de26?s=128&d=identicon&r=PG&f=1", "display_name": "tmlen", "link": "https://stackoverflow.com/users/4108376/tmlen"}, "edited": false, "score": 1, "creation_date": 1428505168, "post_id": 29518227, "comment_id": 47191628, "body": "It is crescent/increasing, but not <i>strictly</i> crescent. A strict inequality means <code>x &lt; y</code>, if it is not strict it can mean <code>x &lt;= y</code> depending on the terminology."}], "answers": [{"tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 1, "last_activity_date": 1428507216, "creation_date": 1428507216, "answer_id": 29519064, "question_id": 29518227, "link": "https://stackoverflow.com/questions/29518227/is-this-an-array-in-crescent-order/29519064#29519064", "title": "Is this an array in crescent order", "body": "<p>A sequence that is strictly increasing/decreasing upto a point and then strictly decreasing/increasing is what I would expect to be called as crescent order. </p>\n\n<p>E.g. <code>[1 2 3 2 1]</code> or <code>[9 8 7 6 10 12 15]</code>.</p>\n\n<p>So no,  <code>[5,5,5,5,5]</code> is not in crescent order.</p>\n"}], "owner": {"reputation": 49, "user_id": 3674815, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/05a2f9230e81088208178da5be90a228?s=128&d=identicon&r=PG&f=1", "display_name": "NetworkzZz", "link": "https://stackoverflow.com/users/3674815/networkzzz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 360, "favorite_count": 0, "accepted_answer_id": 29519064, "answer_count": 1, "score": -4, "last_activity_date": 1428507216, "creation_date": 1428504982, "question_id": 29518227, "link": "https://stackoverflow.com/questions/29518227/is-this-an-array-in-crescent-order", "title": "Is this an array in crescent order", "body": "<p>this is a very simple question.</p>\n\n<p>I would just like to know if this is an array in crescent order :</p>\n\n<p>a = [5,5,5,5,5]</p>\n\n<p>Because for me it'd be constant and not crescent.</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "edited": false, "score": 2, "creation_date": 1428505191, "post_id": 29518222, "comment_id": 47191649, "body": "And the followup to this question can be found here: <a href=\"http://stackoverflow.com/questions/1143262/what-is-the-difference-between-const-int-const-int-const-and-int-const\" title=\"what is the difference between const int const int const and int const\">stackoverflow.com/questions/1143262/&hellip;</a>"}, {"owner": {"reputation": 27478, "user_id": 183120, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fc147f814e1473bb6105db3d924fb590?s=128&d=identicon&r=PG", "display_name": "legends2k", "link": "https://stackoverflow.com/users/183120/legends2k"}, "edited": false, "score": 0, "creation_date": 1428505492, "post_id": 29518222, "comment_id": 47191894, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/5503352/const-before-or-const-after\">Const before or const after?</a> I&#39;m sure people will yell at me saying it&#39;s tagged C++, but in this context, it&#39;s an exact duplicate."}], "answers": [{"comments": [{"owner": {"reputation": 2556, "user_id": 3488231, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/da4ac79b71c44d696f3567d4b53f6239?s=128&d=identicon&r=PG&f=1", "display_name": "user12205", "link": "https://stackoverflow.com/users/3488231/user12205"}, "edited": false, "score": 1, "creation_date": 1428506039, "post_id": 29518254, "comment_id": 47192281, "body": "I was looking through the standard, but then it was so human-unreadable that I gave up. +1 for finding it."}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 3, "last_activity_date": 1428506359, "last_edit_date": 1428506359, "creation_date": 1428505029, "answer_id": 29518254, "question_id": 29518222, "link": "https://stackoverflow.com/questions/29518222/what-is-the-diference-between-these-two-declarations/29518254#29518254", "title": "What is the diference between these two declarations:", "body": "<p>There is no difference. Both are same. <code>int</code> and <code>const</code> both are <strong>declaration specifiers</strong> and they can occur in any order. Grammar says all about it  </p>\n\n<h3>C11: 6.7 Declarations:</h3>\n\n<blockquote>\n  <p>declaration-specifiers:  </p>\n  \n  <blockquote>\n    <p>storage-class-specifier declaration-specifiers<sub>opt</sub><br>\n            <strong>type-specifier declaration-specifiers<sub>opt</sub><br>\n            type-qualifier declaration-specifiers<sub>opt</sub></strong><br>\n            function-specifier declaration-specifiers<sub>opt</sub><br>\n            alignment-specifier declaration-specifiers<sub>opt</sub>  </p>\n  </blockquote>\n</blockquote>\n\n<h3>C11: 6.7.2 Type specifiers (p2):</h3>\n\n<blockquote>\n  <p>[...] the <strong>type specifiers</strong> may occur in any order, possibly intermixed with the other <strong>declaration specifiers</strong>.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 642, "user_id": 4379700, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wq7Ch.jpg?s=128&g=1", "display_name": "01axel01christian", "link": "https://stackoverflow.com/users/4379700/01axel01christian"}, "is_accepted": false, "score": 0, "last_activity_date": 1428505097, "creation_date": 1428505097, "answer_id": 29518278, "question_id": 29518222, "link": "https://stackoverflow.com/questions/29518222/what-is-the-diference-between-these-two-declarations/29518278#29518278", "title": "What is the diference between these two declarations:", "body": "<p>They  are both same. You declared  2  constants  variables.</p>\n"}, {"tags": [], "owner": {"reputation": 2556, "user_id": 3488231, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/da4ac79b71c44d696f3567d4b53f6239?s=128&d=identicon&r=PG&f=1", "display_name": "user12205", "link": "https://stackoverflow.com/users/3488231/user12205"}, "is_accepted": false, "score": 2, "last_activity_date": 1428505123, "creation_date": 1428505123, "answer_id": 29518286, "question_id": 29518222, "link": "https://stackoverflow.com/questions/29518222/what-is-the-diference-between-these-two-declarations/29518286#29518286", "title": "What is the diference between these two declarations:", "body": "<p>No difference.</p>\n\n<p>From <a href=\"https://en.wikipedia.org/wiki/Const_%28computer_programming%29#Simple_data_types\" rel=\"nofollow\">Wikipedia</a>:</p>\n\n<blockquote>\n  <p>For simple non-pointer data types, applying the <code>const</code> qualifier is straightforward. It can go on either side of the type for historical reasons (that is, <code>const char foo = 'a';</code> is equivalent to <code>char const foo = 'a';</code>). On some implementations, using <code>const</code> on both sides of the type (for instance, <code>const char const</code>) generates a warning but not an error.</p>\n</blockquote>\n"}], "owner": {"reputation": 1753, "user_id": 4637326, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/1093075744051398/picture?type=large", "display_name": "Radoslaw Krasimirow", "link": "https://stackoverflow.com/users/4637326/radoslaw-krasimirow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1428506359, "creation_date": 1428504967, "question_id": 29518222, "link": "https://stackoverflow.com/questions/29518222/what-is-the-diference-between-these-two-declarations", "title": "What is the diference between these two declarations:", "body": "<p>I am new in C programming and I wondered what is the difference between these two declarations:</p>\n\n<pre><code>const int a;\n</code></pre>\n\n<p>and  </p>\n\n<pre><code>int const a;\n</code></pre>\n\n<p>Both are well accepted by the compiler.</p>\n"}, {"tags": ["c", "for-loop"], "comments": [{"owner": {"reputation": 45425, "user_id": 2589776, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Bemki.png?s=128&g=1", "display_name": "herohuyongtao", "link": "https://stackoverflow.com/users/2589776/herohuyongtao"}, "edited": false, "score": 7, "creation_date": 1428504639, "post_id": 29518023, "comment_id": 47191227, "body": "Hint: look at <code>P</code>, <code>Q</code> independently."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1428504922, "post_id": 29518023, "comment_id": 47191436, "body": "@amir It is totally unclear what you are trying to achieve. What is the pattern? What do you mean?"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 1, "creation_date": 1428504986, "post_id": 29518023, "comment_id": 47191488, "body": "The pattern appears quite regular, actually."}], "answers": [{"tags": [], "owner": {"reputation": 10774, "user_id": 4419802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d0f1bd19b8b8481b6b3e812691c1ccb?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/4419802/matt"}, "is_accepted": false, "score": -1, "last_activity_date": 1428505008, "creation_date": 1428505008, "answer_id": 29518246, "question_id": 29518023, "link": "https://stackoverflow.com/questions/29518023/c-loop-for-irregular-pattern-of-numbers/29518246#29518246", "title": "C loop for irregular pattern of numbers", "body": "<p>Unroll the loop by the factor 2</p>\n\n<pre><code>for (i=p=0, q=1; i&lt;12/2; i++) {\n    { /* body */ ; }\n    q++;\n    { /* body */ ; }\n    p++;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3863, "user_id": 1158990, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/75c96a358578ef004ae24e4204e9cd0b?s=128&d=identicon&r=PG", "display_name": "gbtimmon", "link": "https://stackoverflow.com/users/1158990/gbtimmon"}, "edited": false, "score": 1, "creation_date": 1428506841, "post_id": 29518271, "comment_id": 47192893, "body": "Nice approach but the size of the loop is invariant and only 2. Why not one loop and 2 print statments? :) <code>printf(&quot;%i %i\\n&quot;, P, P+1);printf(&quot;%i %i\\n&quot;, P, P+2);</code>"}, {"owner": {"reputation": 5767, "user_id": 27800, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f8d805c02bfa80a79df1381984ac5d3a?s=128&d=identicon&r=PG", "display_name": "Peter Miehle", "link": "https://stackoverflow.com/users/27800/peter-miehle"}, "reply_to_user": {"reputation": 3863, "user_id": 1158990, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/75c96a358578ef004ae24e4204e9cd0b?s=128&d=identicon&r=PG", "display_name": "gbtimmon", "link": "https://stackoverflow.com/users/1158990/gbtimmon"}, "edited": false, "score": 0, "creation_date": 1428564122, "post_id": 29518271, "comment_id": 47217631, "body": "I believe the task of the lesson is to learn, that you can have loops inside loops and that you have to be careful which variables to use and increment. (so to see the difference between explizit loop (like mine with variables P and Q) and implizit loop (like yours putting twice the line without using Q, loopreduction)"}, {"owner": {"reputation": 51, "user_id": 3860562, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/11bf40da263134a3a8f22c2cd8cf3d8d?s=128&d=identicon&r=PG&f=1", "display_name": "amir", "link": "https://stackoverflow.com/users/3860562/amir"}, "edited": false, "score": 0, "creation_date": 1428575670, "post_id": 29518271, "comment_id": 47224693, "body": "May I ask if the last column changes to: 4  5  4  0   5  0  5  1  how the loop will change? Thanks in forward."}, {"owner": {"reputation": 5767, "user_id": 27800, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f8d805c02bfa80a79df1381984ac5d3a?s=128&d=identicon&r=PG", "display_name": "Peter Miehle", "link": "https://stackoverflow.com/users/27800/peter-miehle"}, "edited": false, "score": 0, "creation_date": 1428582436, "post_id": 29518271, "comment_id": 47228926, "body": "if Q greater than 5 subtract 6 from Q."}], "tags": [], "owner": {"reputation": 5767, "user_id": 27800, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f8d805c02bfa80a79df1381984ac5d3a?s=128&d=identicon&r=PG", "display_name": "Peter Miehle", "link": "https://stackoverflow.com/users/27800/peter-miehle"}, "is_accepted": true, "score": 2, "last_activity_date": 1428505075, "creation_date": 1428505075, "answer_id": 29518271, "question_id": 29518023, "link": "https://stackoverflow.com/questions/29518023/c-loop-for-irregular-pattern-of-numbers/29518271#29518271", "title": "C loop for irregular pattern of numbers", "body": "<pre><code>for (P = 0 ; P &lt;= 5 ; P++) {\n  for (Q = P+1 ; Q &lt;= P+2 ; Q++) {\n    printf(\"%i %i\\n\", P, Q);\n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3863, "user_id": 1158990, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/75c96a358578ef004ae24e4204e9cd0b?s=128&d=identicon&r=PG", "display_name": "gbtimmon", "link": "https://stackoverflow.com/users/1158990/gbtimmon"}, "is_accepted": false, "score": 3, "last_activity_date": 1428505479, "last_edit_date": 1428505479, "creation_date": 1428505125, "answer_id": 29518287, "question_id": 29518023, "link": "https://stackoverflow.com/questions/29518023/c-loop-for-irregular-pattern-of-numbers/29518287#29518287", "title": "C loop for irregular pattern of numbers", "body": "<pre><code>char* format = \"%5d%5d\\n\";\n\nprintf(\"%5s%5s\\n\", \"P\", \"Q\");\n\nfor( int i = 0; i &lt; 12; i++) { \n    if( i % 4 == 3 ) { \n        printf(\"------\\n\"); \n    }\n    printf(format, i/2, (i+3)/2);\n}  \n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 3860562, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/11bf40da263134a3a8f22c2cd8cf3d8d?s=128&d=identicon&r=PG&f=1", "display_name": "amir", "link": "https://stackoverflow.com/users/3860562/amir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 29518271, "answer_count": 3, "score": 1, "last_activity_date": 1428505479, "creation_date": 1428504493, "last_edit_date": 1428504585, "question_id": 29518023, "link": "https://stackoverflow.com/questions/29518023/c-loop-for-irregular-pattern-of-numbers", "title": "C loop for irregular pattern of numbers", "body": "<p>May I ask how is it possible to write a loop for the following pattern:</p>\n\n<pre><code>P   Q\n0   1\n0   2\n1   2\n1   3\n------\n2   3\n2   4\n3   4\n3   5\n------\n4   5\n4   6\n5   6\n5   7\n</code></pre>\n\n<p>I know people usually show their try first and then ask for help here but I am really stuck with this.any help is appreciated.</p>\n"}, {"tags": ["c", "linked-list"], "comments": [{"owner": {"reputation": 1724, "user_id": 3241687, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d947e2e67319fa6adcf088098adf3079?s=128&d=identicon&r=PG&f=1", "display_name": "horns", "link": "https://stackoverflow.com/users/3241687/horns"}, "edited": false, "score": 0, "creation_date": 1428503907, "post_id": 29517750, "comment_id": 47190669, "body": "What is the the definition of <code>struct contact</code>?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1428503926, "post_id": 29517750, "comment_id": 47190686, "body": "Have you tried stepping through the code line by line in a debugger? And how do you know it doesn&#39;t delete all nodes?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 5, "creation_date": 1428503939, "post_id": 29517750, "comment_id": 47190691, "body": "<code>void ClearList (struct contact *person){ if(person){ClearList(person-&gt;next);free(person);}</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1428504269, "post_id": 29517750, "comment_id": 47190948, "body": "<code>ClearList(person); PrintList(person);</code> Used after being released is invalid."}, {"owner": {"reputation": 15, "user_id": 4602738, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LyhsjO6GMy8/AAAAAAAAAAI/AAAAAAAAABk/jRUpMouS5yk/photo.jpg?sz=128", "display_name": "Vals Eman", "link": "https://stackoverflow.com/users/4602738/vals-eman"}, "edited": false, "score": 0, "creation_date": 1428504431, "post_id": 29517750, "comment_id": 47191070, "body": "when i call PrintList again, it prints out the last name and id but the first name is messy"}, {"owner": {"reputation": 25661, "user_id": 430766, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ee7e736eeb33c4b03d4a5e6e813a9abc?s=128&d=identicon&r=PG", "display_name": "bitmask", "link": "https://stackoverflow.com/users/430766/bitmask"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1428506082, "post_id": 29517750, "comment_id": 47192316, "body": "@BLUEPIXY: While I like the simplicity of your suggestion, I&#39;m doubtful the compiler will be able to tail-recurse it. Leading to ... dare I say it ... stack overflow. The OPs solution, while cumbersome, is tail-recursive."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 4602738, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LyhsjO6GMy8/AAAAAAAAAAI/AAAAAAAAABk/jRUpMouS5yk/photo.jpg?sz=128", "display_name": "Vals Eman", "link": "https://stackoverflow.com/users/4602738/vals-eman"}, "edited": false, "score": 0, "creation_date": 1428504544, "post_id": 29517946, "comment_id": 47191146, "body": "so should i put temp = NULL?"}, {"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 0, "creation_date": 1428504735, "post_id": 29517946, "comment_id": 47191306, "body": "At least this wouldn&#39;t be harmfull."}, {"owner": {"reputation": 2950, "user_id": 1312871, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c7e105a48afc68fc88adf6a72338da5d?s=128&d=identicon&r=PG", "display_name": "Raj", "link": "https://stackoverflow.com/users/1312871/raj"}, "edited": false, "score": 0, "creation_date": 1428504783, "post_id": 29517946, "comment_id": 47191332, "body": "I think you should set <code>person</code> inside the main() to NULL after you do <code>Clearlist(person);</code>"}, {"owner": {"reputation": 14400, "user_id": 4405757, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/96317f0778cae7e50548ce53e0029449?s=128&d=identicon&r=PG&f=1", "display_name": "user7", "link": "https://stackoverflow.com/users/4405757/user7"}, "edited": false, "score": 0, "creation_date": 1428505391, "post_id": 29517946, "comment_id": 47191820, "body": "So when deletion happens from last to first then there will be no pointers(next) to clear?? Am I right?"}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 4, "last_activity_date": 1428504322, "creation_date": 1428504322, "answer_id": 29517946, "question_id": 29517750, "link": "https://stackoverflow.com/questions/29517750/deleting-all-the-nodes-in-a-linked-list/29517946#29517946", "title": "deleting all the nodes in a linked list", "body": "<p>All the nodes <em>are</em> deleted, but you never clear any pointers. So what you're doing is dereferencing invalid pointers leading to <a href=\"http://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\"><em>undefined behavior</em></a>.</p>\n\n<p>The <code>free</code> function doesn't automatically set pointers to <code>NULL</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 75, "user_id": 1028074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc4da388b4be5762bcd16e792310ecb4?s=128&d=identicon&r=PG", "display_name": "Hashtag", "link": "https://stackoverflow.com/users/1028074/hashtag"}, "is_accepted": false, "score": 2, "last_activity_date": 1428505815, "creation_date": 1428505815, "answer_id": 29518540, "question_id": 29517750, "link": "https://stackoverflow.com/questions/29517750/deleting-all-the-nodes-in-a-linked-list/29518540#29518540", "title": "deleting all the nodes in a linked list", "body": "<p>I really don't like this recursive delete on your linked list. If your linked list has 100 elements you will go 100 functions deep in your stack and probably crash.</p>\n\n<p>I suggest a re-write like this:</p>\n\n<pre><code>void ClearList (struct contact *person)\n{\n   while( person != NULL )\n   {\n        struct contact * temp = person\n        person = person-&gt;next;\n        free(temp);\n   }\n}\n</code></pre>\n\n<p>Joachim has the correct answer though. Although we have cleared the memory that person points to, \"ClearList\" does not have the right to set the original pointer to NULL. So either you need to make ClearList take a double pointer so it can set the pointer to NULL, or just set \"person\" to NULL after calling ClearList.</p>\n\n<p>Double pointer example, call with ClearList(&amp;person);</p>\n\n<pre><code>void ClearList (struct contact ** list)\n{\n   struct contact *person = *list;\n   while( person != NULL )\n   {\n        struct contact * temp = person\n        person = person-&gt;next;\n        free(temp);\n   }\n   *list = NULL;\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 4602738, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LyhsjO6GMy8/AAAAAAAAAAI/AAAAAAAAABk/jRUpMouS5yk/photo.jpg?sz=128", "display_name": "Vals Eman", "link": "https://stackoverflow.com/users/4602738/vals-eman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4142, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1428505815, "creation_date": 1428503820, "last_edit_date": 1428504648, "question_id": 29517750, "link": "https://stackoverflow.com/questions/29517750/deleting-all-the-nodes-in-a-linked-list", "title": "deleting all the nodes in a linked list", "body": "<p>Anyone know what's wrong with this recrusive function? It doesn't delete all the nodes</p>\n\n<pre><code>struct contact\n{\n    char FirstName[41];\n    char LastName[41];\n    int id;\n    struct contact *next;\n};\n\nvoid ClearList (struct contact *person)\n{\n    struct contact *temp = person;\n    if (person == NULL) return;\n    else\n    {\n        person = person-&gt;next;\n        free(temp);\n        ClearList(person);\n    }\n}\n</code></pre>\n\n<p>this is my main function</p>\n\n<pre><code>void main()\n{\n    struct contact *person = malloc(sizeof(struct contact));\n    strcpy (person-&gt;FirstName, \"John\");\n    strcpy (person-&gt;LastName, \"Doe\");\n    person-&gt;id = 10;\n\n    person-&gt;next = malloc(sizeof(struct contact));\n    strcpy (person-&gt;next-&gt;FirstName, \"Will\");\n    strcpy (person-&gt;next-&gt;LastName, \"Smith\");\n    person-&gt;next-&gt;id = 20;\n    person-&gt;next-&gt;next = NULL;\n\n    PrintList(person);\n    ClearList(person);\n    PrintList(person);\n}\n</code></pre>\n\n<p>when I call PrintList after calling ClearList it still prints out some messy stuffs, how do I fix this?</p>\n"}, {"tags": ["c", "floating-point"], "comments": [{"owner": {"reputation": 145, "user_id": 2914584, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/84451979eca187a681ab93680eed76de?s=128&d=identicon&r=PG&f=1", "display_name": "lokesharo", "link": "https://stackoverflow.com/users/2914584/lokesharo"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1428504205, "post_id": 29517682, "comment_id": 47190897, "body": "That any person who knows programming would know. I meant to say is there any pattern in this?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1428504555, "post_id": 29517682, "comment_id": 47191154, "body": "It is not a 100 as result 0.1 is entered as there is a little  error."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1428505491, "post_id": 29517682, "comment_id": 47191892, "body": "No, it&#39;s not easy to predict ahead of time. But if a number can&#39;t be exactly expressed in binary, it will round to the nearest binary number, and you can expect that about 50% of the time it will round down rather than up."}, {"owner": {"reputation": 27478, "user_id": 183120, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fc147f814e1473bb6105db3d924fb590?s=128&d=identicon&r=PG", "display_name": "legends2k", "link": "https://stackoverflow.com/users/183120/legends2k"}, "edited": false, "score": 0, "creation_date": 1428505973, "post_id": 29517682, "comment_id": 47192233, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/12124936/what-types-of-numbers-are-representable-in-binary-floating-point\">What types of numbers are representable in binary floating-point?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 520, "user_id": 1529089, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/803245efcce21b1332cbcb666241661d?s=128&d=identicon&r=PG", "display_name": "ericzundel", "link": "https://stackoverflow.com/users/1529089/ericzundel"}, "is_accepted": false, "score": 0, "last_activity_date": 1428504261, "creation_date": 1428504261, "answer_id": 29517916, "question_id": 29517682, "link": "https://stackoverflow.com/questions/29517682/floating-point-numbers-inaccuracy/29517916#29517916", "title": "Floating point numbers inaccuracy?", "body": "<p>I don't know of a way to predict which numbers will do this, but most programmers don't really care.</p>\n\n<p>You didn't specify the language you are using, but if you want to change something from a floating point representation into an integer representation, you usually have to do an explicit conversion using a function  like <code>Double.intValue()</code> or <code>Double.longValue()</code> in Java or a cast operator <code>(int)double_value;</code>  </p>\n\n<p>These techniques usually just cast off the fractional part of the number.  You may want to use a rounding function instead.  Again, in java that would be <code>Math.round()</code> as described in the [javadoc] (<a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html\" rel=\"nofollow\">http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html</a>)</p>\n"}, {"tags": [], "owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "is_accepted": false, "score": 0, "last_activity_date": 1428505791, "creation_date": 1428505791, "answer_id": 29518530, "question_id": 29517682, "link": "https://stackoverflow.com/questions/29517682/floating-point-numbers-inaccuracy/29518530#29518530", "title": "Floating point numbers inaccuracy?", "body": "<p>I can only tell you with which numbers this will <strong>not</strong> happen:<br>\nWith all numbers that can be represented exactly in binary, that is all numbers of the form:</p>\n\n<pre><code>N = Sum(i, 2^n(i))\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>N = 2^n1 + 2^n2 + 2^n3 + ....\n</code></pre>\n\n<p>where <code>n(i)</code> are integers (positive or negative) from a limited range.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1428510741, "last_edit_date": 1428510741, "creation_date": 1428510027, "answer_id": 29520107, "question_id": 29517682, "link": "https://stackoverflow.com/questions/29517682/floating-point-numbers-inaccuracy/29520107#29520107", "title": "Floating point numbers inaccuracy?", "body": "<p>Use <code>FLT_DIG</code> to print numbers within their matching decimal notation.</p>\n\n<p><code>FLT_DIG</code> to the number of leading decimal digits that a <code>float</code> will display and match its decimal assigned value.  It is at <em>least</em> 6.  In the below example, <code>2.1</code> can be printed to <code>2.10000e+00</code> which is 6 significant digits. <code>990.0</code> can be printed to <code>9.90000e+02</code> which is also 6 significant digits.</p>\n\n<pre><code>printf(\"%.*e\", FLT_DIG - 1, 2.1f);  // 2.10000e+00\nprintf(\"%.*e\", FLT_DIG - 1, 990.f); // 9.90000e+02\n</code></pre>\n\n<p>When code does operations like multiplying by <code>100</code>, the <code>float</code> product may incur a round-off error.  C does not specify accuracy here, but an error of &lt; 0.5 parts in 16 million can be expected.  With many operations, this eats into the number of reliable digits down from <code>FLT_DIG</code>.</p>\n\n<p>In general, avoid expecting matching arithmetic and computer results finer than <code>FLT_DIG</code> digits.  If that is insufficient, use <code>double</code>, which is is at least good for at least 10 digits (and with typical <code>double</code>, is good for 15 digits - use <code>DBL_DIG</code>)</p>\n\n<p>Note: <code>\"%.5e\"</code> direct <code>printf()</code> to print 1 digit before and 5 digits after the decimal point for a total of 6 significant digits.  That is the reason for <code>-1</code> in <code>printf(\"%.*e\", FLT_DIG - 1, ...);</code></p>\n"}], "owner": {"reputation": 145, "user_id": 2914584, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/84451979eca187a681ab93680eed76de?s=128&d=identicon&r=PG&f=1", "display_name": "lokesharo", "link": "https://stackoverflow.com/users/2914584/lokesharo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 107, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1428510741, "creation_date": 1428503639, "last_edit_date": 1495541745, "question_id": 29517682, "link": "https://stackoverflow.com/questions/29517682/floating-point-numbers-inaccuracy", "title": "Floating point numbers inaccuracy?", "body": "<p>I am prompting the user to input a float number. I save the number in float variable and multiply it by 100 to make it integer. Only 2 decimal places are allowed so it is a fairly easy thing. Now the strange part :</p>\n\n<ol>\n<li>User Input : 0.1 -> Output : 100</li>\n<li>User Input : 1.1 -> Output : 110</li>\n<li>User Input : 1.5 -> Output : 150</li>\n<li><strong>User Input : 2.1 -> Output : 209.999985</strong></li>\n<li>User Input : 2.5 -> Output : 250</li>\n<li>User Input : 3.8 -> Output : 380</li>\n<li><strong>User Input : 4.2 -> Output : 419.999969</strong></li>\n<li>User Input : 5.6 -> Output : 560</li>\n<li>User Input : 6.0 -> Output : 600</li>\n<li>User Input : 7.5 -> Output : 750</li>\n<li><strong>User Input : 8.1 -> Output : 810.000061</strong></li>\n<li><strong>User Input : 9.9 -> Output : 989.999969</strong></li>\n</ol>\n\n<p>I tried this thing only till 10.00.</p>\n\n<p>Referring <a href=\"https://stackoverflow.com/questions/21895756/why-are-floating-point-numbers-inaccurate\">Why Are Floating Point Numbers Inaccurate?</a> I got to know the reason behind this behavior, but isn't there any way to know which number would behave strangely?</p>\n"}, {"tags": ["c", "x86", "simd", "intrinsics", "avx2"], "answers": [{"comments": [{"owner": {"reputation": 5543, "user_id": 583464, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d523405d41e973a5aeef1c378f8f19f1?s=128&d=identicon&r=PG", "display_name": "George", "link": "https://stackoverflow.com/users/583464/george"}, "edited": false, "score": 0, "creation_date": 1428504272, "post_id": 29517684, "comment_id": 47190949, "body": ":Hello , it gives me segmentation fault applying the casting."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 5543, "user_id": 583464, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d523405d41e973a5aeef1c378f8f19f1?s=128&d=identicon&r=PG", "display_name": "George", "link": "https://stackoverflow.com/users/583464/george"}, "edited": false, "score": 0, "creation_date": 1428506986, "post_id": 29517684, "comment_id": 47192997, "body": "That&#39;s probably a different problem - you need to make sure that <code>X</code> (or <code>&amp;X[i]</code>) is 32 byte aligned, or use <code>_mm256_storeu_si256</code> instead of <code>_mm256_store_si256</code> if you can&#39;t guarantee alignment."}, {"owner": {"reputation": 5543, "user_id": 583464, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d523405d41e973a5aeef1c378f8f19f1?s=128&d=identicon&r=PG", "display_name": "George", "link": "https://stackoverflow.com/users/583464/george"}, "edited": false, "score": 0, "creation_date": 1428590019, "post_id": 29517684, "comment_id": 47234643, "body": "I have used _mm_malloc( N * sizeof (*X) ,32 ).It is 32 aligned ,right?I will try also the storeu and let you know.( I will be able to test it next week though)"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 5543, "user_id": 583464, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d523405d41e973a5aeef1c378f8f19f1?s=128&d=identicon&r=PG", "display_name": "George", "link": "https://stackoverflow.com/users/583464/george"}, "edited": false, "score": 1, "creation_date": 1428590091, "post_id": 29517684, "comment_id": 47234699, "body": "If you&#39;re using <code>X[i]</code> then <code>i</code> will need to be a multiple of 8 to maintain alignment."}], "tags": [], "owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "is_accepted": false, "score": 5, "last_activity_date": 1482563561, "last_edit_date": 1482563561, "creation_date": 1428503647, "answer_id": 29517684, "question_id": 29517622, "link": "https://stackoverflow.com/questions/29517622/store-m256i-to-integer/29517684#29517684", "title": "Store __m256i to integer", "body": "<p>What you've done is OK, but you don't need to create a temporary pointer - you can just apply the cast directly, e.g.:</p>\n\n<pre><code>_mm256_store_si256( (__m256i *)X, T );\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>_mm256_store_si256( (__m256i *)&amp;X[i], T );\n</code></pre>\n\n<p><hr>\nUpdate based on the latest edit of your question:</p>\n\n<p>It looks like you are indexing <code>X</code> in a way that does not meet AVX alignment requirements, i.e. <code>X[i]</code> is not guaranteed to be 32 byte aligned, so you should use an unaligned store:</p>\n\n<pre><code>_mm256_storeu_si256( (__m256i *)&amp;X[i], T );\n</code></pre>\n"}], "owner": {"reputation": 5543, "user_id": 583464, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d523405d41e973a5aeef1c378f8f19f1?s=128&d=identicon&r=PG", "display_name": "George", "link": "https://stackoverflow.com/users/583464/george"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3495, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1531927848, "creation_date": 1428503454, "last_edit_date": 1531927848, "question_id": 29517622, "link": "https://stackoverflow.com/questions/29517622/store-m256i-to-integer", "title": "Store __m256i to integer", "body": "<p>How can I store __m256i data type to integer?</p>\n\n<p>I know that for floats there is : </p>\n\n<pre><code>_mm256_store_ps(float *a, __m256 b)\n</code></pre>\n\n<p>where the first argument is the output array.</p>\n\n<p>For integers I found only :</p>\n\n<pre><code>_mm256_store_si256(__m256i *a, __m256i b)\n</code></pre>\n\n<p>where both arguments are __m256i data type.</p>\n\n<p>Is it enough to do something like this:</p>\n\n<pre><code>int * X = (int*) _mm_malloc( N * sizeof (*X) ,32 );\n</code></pre>\n\n<p>( I am using this as an argument to a function and I want to obtain it's values)</p>\n\n<p>Inside function:</p>\n\n<pre><code>__m256i * Xmmtype = (__m256i*) X;\n\n//fill output\n_mm256_store_si256( &amp;Xmmtype[ i ] , T ); //T is __m256i\n</code></pre>\n\n<p>Is this OK?</p>\n\n<p>-----UPDATED -----------------------</p>\n\n<p>Ok, so what if I have :</p>\n\n<pre><code>__m256i T;\n\nfor ( y = 0; y &lt; h; y++ )\n{ \n    for ( x = 0; x &lt; w; x++ )\n    {\n        for ( int i = 0; i &lt; N; i+=8 )\n        {\n            //calculate here the  T\n\n        } \n\n        //write result\n        _mm256_store_si256( &amp;Xmmtype[ x + y * w ] , T );\n\n\n    } \n\n} \n</code></pre>\n"}, {"tags": ["c", "strlen"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1428503071, "post_id": 29517418, "comment_id": 47190049, "body": "how your <i>string</i> is represented? Remember, <code>0</code> and <code>&#39;0&#39;</code> are not the same."}, {"owner": {"reputation": 27069, "user_id": 2307070, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/l8ha6.jpg?s=128&g=1", "display_name": "Thomas Ayoub", "link": "https://stackoverflow.com/users/2307070/thomas-ayoub"}, "edited": false, "score": 3, "creation_date": 1428503077, "post_id": 29517418, "comment_id": 47190054, "body": "Could you show us your code ?"}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 2, "creation_date": 1428503090, "post_id": 29517418, "comment_id": 47190072, "body": "Is this a string of digits (e.g. <code>&quot;56 69 56 4F 74 ...&quot;</code>), or is this an array of <code>char</code> with values of <code>0</code>?"}, {"owner": {"reputation": 35069, "user_id": 1324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883238a436c061eaf848af87b8fda561?s=128&d=identicon&r=PG", "display_name": "Paul Roub", "link": "https://stackoverflow.com/users/1324/paul-roub"}, "edited": false, "score": 6, "creation_date": 1428503109, "post_id": 29517418, "comment_id": 47190089, "body": "&quot;I think it&#39;s confusing it with the <code>&#39;\\0&#39;</code> !&quot; No confusion. They&#39;re the same thing, an ASCII 0 character."}, {"owner": {"reputation": 35069, "user_id": 1324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883238a436c061eaf848af87b8fda561?s=128&d=identicon&r=PG", "display_name": "Paul Roub", "link": "https://stackoverflow.com/users/1324/paul-roub"}, "edited": false, "score": 5, "creation_date": 1428503192, "post_id": 29517418, "comment_id": 47190158, "body": "If you don&#39;t want to stop at the first 0 (which is what <code>strlen()</code> does, and what the length of a string <i>means</i>, in C), how do you expect to know when you&#39;ve reached the end of the string?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1428503225, "post_id": 29517418, "comment_id": 47190180, "body": "How did you create the string?"}, {"owner": {"reputation": 5511, "user_id": 4516316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBirF.jpg?s=128&g=1", "display_name": "Arun A S", "link": "https://stackoverflow.com/users/4516316/arun-a-s"}, "edited": false, "score": 0, "creation_date": 1428503324, "post_id": 29517418, "comment_id": 47190240, "body": "What is the length you are getting? I&#39;m getting 152, which Is correct ( I counted ). I did <code>char a[] = &quot;56 69 5........&quot;; printf(&quot;%d&quot;,strlen(a));</code>"}, {"owner": {"reputation": 259, "user_id": 4756045, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/38d9f2bf610e936d45e1288eb83b2b72?s=128&d=identicon&r=PG&f=1", "display_name": "Sara Sara", "link": "https://stackoverflow.com/users/4756045/sara-sara"}, "reply_to_user": {"reputation": 27069, "user_id": 2307070, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/l8ha6.jpg?s=128&g=1", "display_name": "Thomas Ayoub", "link": "https://stackoverflow.com/users/2307070/thomas-ayoub"}, "edited": false, "score": 0, "creation_date": 1428504368, "post_id": 29517418, "comment_id": 47191015, "body": "please check the update @Thomas"}, {"owner": {"reputation": 35069, "user_id": 1324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883238a436c061eaf848af87b8fda561?s=128&d=identicon&r=PG", "display_name": "Paul Roub", "link": "https://stackoverflow.com/users/1324/paul-roub"}, "edited": false, "score": 0, "creation_date": 1428504503, "post_id": 29517418, "comment_id": 47191116, "body": "So <code>strlen()</code> is behaving exactly as expected. You still haven&#39;t said how you <i>want</i> the end of the string to be determined."}, {"owner": {"reputation": 259, "user_id": 4756045, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/38d9f2bf610e936d45e1288eb83b2b72?s=128&d=identicon&r=PG&f=1", "display_name": "Sara Sara", "link": "https://stackoverflow.com/users/4756045/sara-sara"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1428504515, "post_id": 29517418, "comment_id": 47191124, "body": "@BLUEPIXY actually i don&#39;t create the string , it&#39;s generated !"}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1428504553, "post_id": 29517418, "comment_id": 47191151, "body": "Note that C arrays and strings are very primitive compared to most other languages. So especially if you are used to some other language, forget what you know and learn what these things mean in C (or switch to C++, which has higher level arrays, strings and containers, if that is an option)."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1428504714, "post_id": 29517418, "comment_id": 47191286, "body": "How did you generated the string? <code>unsigned char Response[269]={0x00};</code> : all elements are zero."}, {"owner": {"reputation": 259, "user_id": 4756045, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/38d9f2bf610e936d45e1288eb83b2b72?s=128&d=identicon&r=PG&f=1", "display_name": "Sara Sara", "link": "https://stackoverflow.com/users/4756045/sara-sara"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1428504898, "post_id": 29517418, "comment_id": 47191419, "body": "@BLUEPIXY from a smart card  via a contactless interfaces using  Payment terminal"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1428504962, "post_id": 29517418, "comment_id": 47191468, "body": "You should store the size of the read data."}, {"owner": {"reputation": 97003, "user_id": 142434, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YGcat.jpg?s=128&g=1", "display_name": "Stephen Canon", "link": "https://stackoverflow.com/users/142434/stephen-canon"}, "edited": false, "score": 2, "creation_date": 1428506578, "post_id": 29517418, "comment_id": 47192711, "body": "While this question is naive, I can&#39;t imagine why people are <i>downvoting</i> it.  It&#39;s an earnest question from a new user."}, {"owner": {"reputation": 259, "user_id": 4756045, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/38d9f2bf610e936d45e1288eb83b2b72?s=128&d=identicon&r=PG&f=1", "display_name": "Sara Sara", "link": "https://stackoverflow.com/users/4756045/sara-sara"}, "reply_to_user": {"reputation": 97003, "user_id": 142434, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YGcat.jpg?s=128&g=1", "display_name": "Stephen Canon", "link": "https://stackoverflow.com/users/142434/stephen-canon"}, "edited": false, "score": 1, "creation_date": 1428506678, "post_id": 29517418, "comment_id": 47192783, "body": "Well excuse me no one was born expert ! @StephenCanon"}], "answers": [{"tags": [], "owner": {"reputation": 55713, "user_id": 26095, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WLsjF.jpg?s=128&g=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/26095/sean"}, "is_accepted": false, "score": 3, "last_activity_date": 1428503463, "creation_date": 1428503463, "answer_id": 29517626, "question_id": 29517418, "link": "https://stackoverflow.com/questions/29517418/strlen-does-not-return-the-right-length/29517626#29517626", "title": "strlen does not return the right length", "body": "<p><code>00</code> and <code>'\\0'</code> are the same thing.</p>\n\n<p>It looks like you can an array of data are you're looking to get the length of the array rather than the length of a string. <code>strlen</code> will scan an array up to the first null terminator. There's no equivalent for an arbitrary array, so you need to keep track of it yourself.</p>\n"}, {"comments": [{"owner": {"reputation": 259, "user_id": 4756045, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/38d9f2bf610e936d45e1288eb83b2b72?s=128&d=identicon&r=PG&f=1", "display_name": "Sara Sara", "link": "https://stackoverflow.com/users/4756045/sara-sara"}, "edited": false, "score": 0, "creation_date": 1428505372, "post_id": 29518311, "comment_id": 47191806, "body": "Thank you for your answer ! I will for sure do as you said and i&#39;ll keep you in touch for the result :)"}, {"owner": {"reputation": 259, "user_id": 4756045, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/38d9f2bf610e936d45e1288eb83b2b72?s=128&d=identicon&r=PG&f=1", "display_name": "Sara Sara", "link": "https://stackoverflow.com/users/4756045/sara-sara"}, "edited": false, "score": 0, "creation_date": 1428505728, "post_id": 29518311, "comment_id": 47192067, "body": "Well I&#39;ve changed <code>unsigned char</code> by <code>char</code> , but still have the same problem . And the string mentioned above i just wrote it that way so to show you where it stops !"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 259, "user_id": 4756045, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/38d9f2bf610e936d45e1288eb83b2b72?s=128&d=identicon&r=PG&f=1", "display_name": "Sara Sara", "link": "https://stackoverflow.com/users/4756045/sara-sara"}, "edited": false, "score": 0, "creation_date": 1428506011, "post_id": 29518311, "comment_id": 47192265, "body": "@SaraSara: Knowing where it stops doesn&#39;t help if we don&#39;t know what it actually looks like. <code>56 69 56 4F 74 ...</code> is not a representation of a string. Please update your question to show us the actual code that creates the string. If your array contains bytes with the values <code>0x56</code>, <code>0x69</code>, <code>0x56</code>, etc., then of course <code>strlen</code> stops when it encounters the first <code>0x00</code>; <code>0x00</code> and <code>&#39;\\0&#39;</code> are exactly the same thing."}, {"owner": {"reputation": 259, "user_id": 4756045, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/38d9f2bf610e936d45e1288eb83b2b72?s=128&d=identicon&r=PG&f=1", "display_name": "Sara Sara", "link": "https://stackoverflow.com/users/4756045/sara-sara"}, "edited": false, "score": 0, "creation_date": 1428506230, "post_id": 29518311, "comment_id": 47192442, "body": "The string is created from a card via a contactless interface of a Electronic payment terminal !"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 259, "user_id": 4756045, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/38d9f2bf610e936d45e1288eb83b2b72?s=128&d=identicon&r=PG&f=1", "display_name": "Sara Sara", "link": "https://stackoverflow.com/users/4756045/sara-sara"}, "edited": false, "score": 0, "creation_date": 1428506663, "post_id": 29518311, "comment_id": 47192775, "body": "@SaraSara: See the last paragraph of my updated answer."}, {"owner": {"reputation": 259, "user_id": 4756045, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/38d9f2bf610e936d45e1288eb83b2b72?s=128&d=identicon&r=PG&f=1", "display_name": "Sara Sara", "link": "https://stackoverflow.com/users/4756045/sara-sara"}, "edited": false, "score": 0, "creation_date": 1428506870, "post_id": 29518311, "comment_id": 47192916, "body": "thanks for your answers ! I&#39;ll search as you said for &quot;other means&quot;"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 259, "user_id": 4756045, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/38d9f2bf610e936d45e1288eb83b2b72?s=128&d=identicon&r=PG&f=1", "display_name": "Sara Sara", "link": "https://stackoverflow.com/users/4756045/sara-sara"}, "edited": false, "score": 0, "creation_date": 1428514237, "post_id": 29518311, "comment_id": 47197540, "body": "Perhaps the downvoter would care to explain what&#39;s wrong with this answer."}], "tags": [], "owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "is_accepted": false, "score": 4, "last_activity_date": 1428506606, "last_edit_date": 1428506606, "creation_date": 1428505190, "answer_id": 29518311, "question_id": 29517418, "link": "https://stackoverflow.com/questions/29517418/strlen-does-not-return-the-right-length/29518311#29518311", "title": "strlen does not return the right length", "body": "<pre><code>unsigned char Response[269]={0x00};\n</code></pre>\n\n<p>This initializes <code>Response</code> to a sequence of 269 identical values, each of which is zero. Note that <code>0x00</code>, <code>0</code>, and <code>'\\0'</code> are all the same thing.</p>\n\n<pre><code>strlen(Response)\n</code></pre>\n\n<p>This is actually invalid, though some compilers may permit it. <code>strlen</code> requires an argument of type <code>char*</code>; <code>Response</code> is an array of <code>unsigned char</code>, which is converted to a pointer of type <code>unsigned char*</code>. The types are not compatible, and there is no implicit conversion. You should have gotten a compile-time warning (if you did, please include the warning in your question).</p>\n\n<p>If we change the definition of <code>Response</code> to:</p>\n\n<pre><code>char Response[269] = {0x00};\n</code></pre>\n\n<p>then the <code>strlen</code> call becomes valid -- and will return <code>0</code>. <code>strlen</code> scans for the first <code>'\\0'</code> null character -- and you've filled <code>Response</code> with null characters.</p>\n\n<p>At the top of your question, you say you have a string:</p>\n\n<p><code>56 69 56 4F 74 65 63 68 32 00 2C 00 00 27 6F 23 84 0E 32 50 41 59 2E 53 59 53 2E 44 44 46 30 31 A5 11 BF 0C 0E 61 0C 4F 07 A0 00 00 00 04 10 10 87 01 01</code></p>\n\n<p>That doesn't have anything to do with the code you showed us. It's also ambiguous; is it a string of hex digits and spaces: <code>\"56 69 56 ...\"</code>, or is it something like <code>\"\\x56\\x69\\x56...\"</code>? If the <code>56 69</code> sequence is intended to represent the contents of your array, please update your question to show the actual code that creates it.</p>\n\n<p>Finally:</p>\n\n<pre><code>for(i=0;i&lt;=strlen(Response);i++)\nsprintf(Response_PPSE+(2*i),\"%02X\",Response[i]);\n</code></pre>\n\n<p>Calling <code>strlen</code> on each iteration of the loop can be quite inefficient. <code>strlen</code> has to scan the entire string each time to determine its length. Once you get the other problems straightened out, you should call <code>strlen</code> once before the loop and use the stored value.</p>\n\n<p><em>However</em>, you probably don't want to be using <code>strlen</code> in the first place. <code>strlen</code> is applied to <em>strings</em>. A \"string\" is a sequence of characters terminated by a null character (<code>0</code>, <code>'\\0'</code>, <code>0x00</code>). You appear to have a sequence of <em>unsigned</em> characters in which <code>0x00</code> is a valid value, not a terminator. Rather than using <code>strlen</code> to compute the length of the array, you need to keep track of the length by some other means.</p>\n"}, {"comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 3, "creation_date": 1428514192, "post_id": 29520977, "comment_id": 47197510, "body": "&quot;<i>More importantly, <code>strlen</code> is <b>extremely dangerous</b> ...</i>&quot; -- I disagree. <code>strlen</code> is perfectly safe <i>if</i> you can guarantee that the argument points to a valid null-terminated string. It can even be input data if the input was received in a way that guarantees null termination (e.g., <code>fgets</code>)."}], "tags": [], "owner": {"reputation": 2173, "user_id": 357566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/036a1b88dafaab8ffd73a8b0a74b5b38?s=128&d=identicon&r=PG", "display_name": "Ed4", "link": "https://stackoverflow.com/users/357566/ed4"}, "is_accepted": true, "score": 2, "last_activity_date": 1428512701, "creation_date": 1428512701, "answer_id": 29520977, "question_id": 29517418, "link": "https://stackoverflow.com/questions/29517418/strlen-does-not-return-the-right-length/29520977#29520977", "title": "strlen does not return the right length", "body": "<p>The other answers I've seen so far are dancing around the real problem here. Which is that you need to understand <em>what kind of string</em> you're dealing with.</p>\n\n<p>By historical convention, C represents strings as <strong>null terminated</strong> character arrays. That is the kind of string that <code>strlen</code> expects. But your \"string\" contains null bytes. So it is not a null-terminated string, and <code>strlen</code> will not do what you want.</p>\n\n<p>More importantly, <code>strlen</code> is <strong>extremely dangerous</strong> and should never be used in modern code. It's easy to cause security vulnerabilities with strlen, and the odds are good that if your program is using <code>strlen</code> to examine responses received over the network, your program can be exploited to achieve denial or service or even remote code execution.</p>\n\n<p>A safer alternative is <code>strnlen</code>, <em>if</em> you give it the correct size limit. It's hard to be more precise about the right solution, because in your example the correct answer is just always 269, so there's really no variable-length string to measure.</p>\n"}, {"tags": [], "owner": {"reputation": 771, "user_id": 343472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37831fcac6e135c082e5b0bd5d685df8?s=128&d=identicon&r=PG", "display_name": "Tom Womack", "link": "https://stackoverflow.com/users/343472/tom-womack"}, "is_accepted": false, "score": 0, "last_activity_date": 1428599550, "creation_date": 1428599550, "answer_id": 29544853, "question_id": 29517418, "link": "https://stackoverflow.com/questions/29517418/strlen-does-not-return-the-right-length/29544853#29544853", "title": "strlen does not return the right length", "body": "<p>You mean the length of the array rather than the length of the response, so you want sizeof(Response) rather than strlen(Response) - presumably you know that the response is 269 bytes long because that's what the card protocol defines.</p>\n\n<p>You also need Response_PPSE to be 2*269+1 bytes long, because otherwise your printf statements will run off the end of the array.  And you need to set Response_PPSE[2*269]=0 to make it a valid null-terminated string.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8337167, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AYRyU6CxSIA/AAAAAAAAAAI/AAAAAAAAEiI/DCtDAITxNDU/photo.jpg?sz=128", "display_name": "Diamantis Kyriakakis", "link": "https://stackoverflow.com/users/8337167/diamantis-kyriakakis"}, "is_accepted": false, "score": 0, "last_activity_date": 1500542856, "creation_date": 1500542856, "answer_id": 45210696, "question_id": 29517418, "link": "https://stackoverflow.com/questions/29517418/strlen-does-not-return-the-right-length/45210696#45210696", "title": "strlen does not return the right length", "body": "<p>In an application i made i created a custom \"strlen\" method using the following approach in order to correctly count the length even if i have null bytes in the middle of my data:</p>\n\n<p>-We need to use except the char * containing the data, also the malloc'ed size. \n-I pass the following parameters to the method: first parameter the char * str, second the size of malloc.<br><br>\n-Method works in the opposite way, from the MAX memory addr (memory addr of str + second parameter) to the first memory size, a while loop decrements the max memory address until first memory address reached but this while loop will break in case the first non NULL/0 char reached. <br><br>\n-Finally we return the difference of last MAX memory address and first memory address of char *, +1. <br><br></p>\n\n<p>This is the my code: </p>\n\n<pre><code>size_t utils_strlen(const char * str, int max) {\n    const char * maxs;\n    maxs = str + max;\n\n    while(str&lt;maxs) {\n      if(*maxs!=0) break;\n      maxs--;\n    }\n\n    return(maxs-str)+1;\n}\n</code></pre>\n"}], "owner": {"reputation": 259, "user_id": 4756045, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/38d9f2bf610e936d45e1288eb83b2b72?s=128&d=identicon&r=PG&f=1", "display_name": "Sara Sara", "link": "https://stackoverflow.com/users/4756045/sara-sara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3362, "favorite_count": 0, "accepted_answer_id": 29520977, "answer_count": 5, "score": 2, "last_activity_date": 1500542856, "creation_date": 1428502978, "last_edit_date": 1428504322, "question_id": 29517418, "link": "https://stackoverflow.com/questions/29517418/strlen-does-not-return-the-right-length", "title": "strlen does not return the right length", "body": "<p>I'm currently using <code>strlen</code> method to calculate  the lenght of this string  : </p>\n\n<p><code>56 69 56 4F 74 65 63 68 32 00 2C 00 00 27 6F 23 84 0E 32 50 41 59 2E 53 59 53 2E 44 44 46 30 31 A5 11 BF 0C 0E 61 0C 4F 07 A0 00 00 00 04 10 10 87 01 01</code> </p>\n\n<p>the main problem is that it always stops when encounter <code>00</code> , I think it's confusing it with the <code>'\\0'</code> ! so I'm wondering if there's a replacement for this method or is there anything you can suggest to fix this issue . </p>\n\n<p>P.S: I'm not sure if the question is duplicated I searched for the same problem but couldn't find a satisfying answer ! </p>\n\n<p>Edited : </p>\n\n<p>my code : </p>\n\n<pre><code>unsigned char Response[269]={0x00};\nunsigned char Response_PPSE[269];\n\n\nfor(i=0;i&lt;=strlen(Response);i++)\nsprintf(Response_PPSE+(2*i),\"%02X\",Response[i]);\n</code></pre>\n\n<p>the strlen calculate the length of this bytes only  : \n56 69 56 4F 74 65 63 68 32 00</p>\n"}, {"tags": ["c++", "c", "gcc"], "comments": [{"owner": {"reputation": 827, "user_id": 2534793, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/0852a47304b79991d99202c05eabe454?s=128&d=identicon&r=PG", "display_name": "senfen", "link": "https://stackoverflow.com/users/2534793/senfen"}, "edited": false, "score": 0, "creation_date": 1428503010, "post_id": 29517368, "comment_id": 47189999, "body": "There is no standard function to do that before C++11 (only plain <code>rand</code>). Why you can&#39;t get modern compiler? If it is your home project it should be easy."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1428503058, "post_id": 29517368, "comment_id": 47190035, "body": "Perhaps it has <code>&lt;tr1&#47;random&gt;</code>?"}, {"owner": {"reputation": 2595, "user_id": 3897316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6cf468fea626f3aec65a199e2f67b309?s=128&d=identicon&r=PG&f=1", "display_name": "Degustaf", "link": "https://stackoverflow.com/users/3897316/degustaf"}, "edited": false, "score": 1, "creation_date": 1428503388, "post_id": 29517368, "comment_id": 47190290, "body": "Are you looking for a <a href=\"https://stackoverflow.com/questions/tagged/c\">c</a> solution, or a <a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b\">c++</a>.  They solution could be different depending on the language"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1428503783, "post_id": 29517368, "comment_id": 47190569, "body": "Have you looked at <a href=\"http://www.boost.org/doc/libs/1_57_0/doc/html/boost_random/reference.html\" rel=\"nofollow noreferrer\">Boost</a>?"}, {"owner": {"reputation": 9542, "user_id": 985296, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/fb867640ddc6aee363d96530573845b0?s=128&d=identicon&r=PG", "display_name": "stefan", "link": "https://stackoverflow.com/users/985296/stefan"}, "edited": false, "score": 0, "creation_date": 1428504209, "post_id": 29517368, "comment_id": 47190904, "body": "My condolences for being stuck with this very old compiler version.."}], "answers": [{"comments": [{"owner": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1428503722, "post_id": 29517683, "comment_id": 47190526, "body": "Some older edition is available for free online. Maybe he will have to do some Fortran to C translation but this shouldnt be too hard"}], "tags": [], "owner": {"reputation": 26, "user_id": 3984236, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sO1Dm.jpg?s=128&g=1", "display_name": "Jon Pellant", "link": "https://stackoverflow.com/users/3984236/jon-pellant"}, "is_accepted": true, "score": 1, "last_activity_date": 1428503644, "creation_date": 1428503644, "answer_id": 29517683, "question_id": 29517368, "link": "https://stackoverflow.com/questions/29517368/generate-numbers-using-distribution-in-c-or-c/29517683#29517683", "title": "Generate numbers using distribution in C or C++", "body": "<p>If you don't have the libraries, I would grab a copy of  \"Numerical Recipes in C\" and write them yourself. Since they are copyrighted, I cannot copy them here. But chapter 7 has what you are looking for.</p>\n\n<p>My copy is dated; however, still great for this stuff. 7.1 Uniform Deviates, 7.2 Normal Deviates, and 7.3 Poisson, Gamma, and Binomial Deviates.</p>\n\n<p>--jon</p>\n"}], "owner": {"reputation": 853, "user_id": 4360034, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f288ec78f7cde374ca038375bc32cc21?s=128&d=identicon&r=PG&f=1", "display_name": "Steg Verner", "link": "https://stackoverflow.com/users/4360034/steg-verner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 1, "accepted_answer_id": 29517683, "answer_count": 1, "score": 0, "last_activity_date": 1428504358, "creation_date": 1428502843, "last_edit_date": 1428503952, "question_id": 29517368, "link": "https://stackoverflow.com/questions/29517368/generate-numbers-using-distribution-in-c-or-c", "title": "Generate numbers using distribution in C or C++", "body": "<p>I am using gcc (GCC) 4.4.7 20120313 (Red Hat 4.4.7-11) compiler. <a href=\"http://www.cplusplus.com/reference/random/uniform_real_distribution/\" rel=\"nofollow\">Uniform real distribution function</a> does not work in it. Is there some way I may generate numbers between 0 to 1 [0,1] in my present compiler according to</p>\n\n<ol>\n<li>Uniform random distribution</li>\n<li>Gaussian distribution</li>\n<li>Exponential distribution.</li>\n</ol>\n\n<p>I can not upgrade the compiler my project has a lot of dependencies on current 4.4.7 version.  Either C or C++ will work for me.</p>\n"}, {"tags": ["c", "assembly"], "comments": [{"owner": {"reputation": 1304, "user_id": 1073171, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zrsir.jpg?s=128&g=1", "display_name": "Brian Sidebotham", "link": "https://stackoverflow.com/users/1073171/brian-sidebotham"}, "edited": false, "score": 0, "creation_date": 1428502626, "post_id": 29517144, "comment_id": 47189692, "body": "Please add your code!! It&#39;s likely you now have <code>_tolower()</code> and <code>tolower()</code>. That&#39;s of course, if you remembered to make the assembler function global..."}, {"owner": {"reputation": 2006, "user_id": 1422377, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/190bc5a01dc24428d6bb765b117106e4?s=128&d=identicon&r=PG", "display_name": "BMac", "link": "https://stackoverflow.com/users/1422377/bmac"}, "edited": false, "score": 0, "creation_date": 1428503140, "post_id": 29517144, "comment_id": 47190113, "body": "I concur, can you add some code please @kriti Joshi"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1428538515, "post_id": 29517144, "comment_id": 47209235, "body": "I thought the header file: ctype.h contains a macro, not a function prototype for the tolower() operation."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1428538658, "post_id": 29517144, "comment_id": 47209278, "body": "I would be interested in the activities of the entry block and exit block of the .asm function to determine if they are implementing the sequence needed for communication with a C function."}, {"owner": {"reputation": 1, "user_id": 4764390, "user_type": "registered", "profile_image": "https://graph.facebook.com/1584489428434727/picture?type=large", "display_name": "Kriti Joshi", "link": "https://stackoverflow.com/users/4764390/kriti-joshi"}, "edited": false, "score": 0, "creation_date": 1428562985, "post_id": 29517144, "comment_id": 47217010, "body": "including stdio.h suffices to use tolower() function. I have written some code under tolower() in my assembly code, its a part of an assignment whose deadline is pending so I can&#39;t post it now."}], "answers": [{"comments": [{"owner": {"reputation": 1304, "user_id": 1073171, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zrsir.jpg?s=128&g=1", "display_name": "Brian Sidebotham", "link": "https://stackoverflow.com/users/1073171/brian-sidebotham"}, "edited": false, "score": 1, "creation_date": 1428504389, "post_id": 29517911, "comment_id": 47191034, "body": "I don&#39;t really understand an answer that contains &quot;there&#39;s not enough information to give an answer&quot; ?"}], "tags": [], "owner": {"reputation": 924, "user_id": 4626146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/431cc968166840d065f77f912515b3aa?s=128&d=identicon&r=PG", "display_name": "rdtsc", "link": "https://stackoverflow.com/users/4626146/rdtsc"}, "is_accepted": false, "score": 0, "last_activity_date": 1428504247, "creation_date": 1428504247, "answer_id": 29517911, "question_id": 29517144, "link": "https://stackoverflow.com/questions/29517144/call-assembly-function-from-c/29517911#29517911", "title": "call assembly function from C", "body": "<p>Are you sure you are calling the assembler version from the C code, and not the standard library version? How is the assembler code defined? Is it a module (.asm) in your C project, in-lined, a static .DLL library, or .DEF/OBJ import? What compiler, assembler, (and IDE, OS?) are you using? There is not enough information currently to yield a concrete answer, however if there is nothing \"defining\" the assembler function to C, in a way that C can understand, then it will be oblivious to any naming conflicts. This isn't technically an error either; identical function names are like having two identical house addresses (123_Anystreet) in Canada and Europe. Entirely possible and allowable, but C typically doesn't allow it (and assembler does.)</p>\n"}], "owner": {"reputation": 1, "user_id": 4764390, "user_type": "registered", "profile_image": "https://graph.facebook.com/1584489428434727/picture?type=large", "display_name": "Kriti Joshi", "link": "https://stackoverflow.com/users/4764390/kriti-joshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 463, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1428511515, "creation_date": 1428502300, "last_edit_date": 1428511515, "question_id": 29517144, "link": "https://stackoverflow.com/questions/29517144/call-assembly-function-from-c", "title": "call assembly function from C", "body": "<p>I have declared a function tolower in assembly language and I am calling it from my C code which includes standard library. I wonder why this works properly without giving any error as now two functions with same name are present.</p>\n\n<p>My C code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main() {\nchar in0[] = \"something\";\nchar in1[] = \"SomethinG\";\nchar in2[] = \"S0mething\";\n\nint i = 0;\nwhile (in0[i]) {\n  in0[i] = tolower(in0[i]);\n  in1[i] = tolower(in1[i]);\n  in2[i] = tolower(in2[i]);\n  i++;\n}\nreturn 0;\n}\n</code></pre>\n\n<p>I can't put my assembly code as it comes under an assignment. I have globally declared tolower function.</p>\n\n<pre><code>.section .data\n.section .text\n.globl _start\n.globl tolower                                          \n.type tolower, @function\ntolower:\n</code></pre>\n\n<p>I have compiled using gcc cfile.c assfile.s</p>\n"}, {"tags": ["c", "assembly", "casting", "x86", "mov"], "comments": [{"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 1, "creation_date": 1428502971, "post_id": 29517091, "comment_id": 47189973, "body": "That depends entirely whether <code>char</code> is signed or unsigned. That is implementation-defined, so both solutions are equally correct, given the matching implementation."}, {"owner": {"reputation": 814, "user_id": 868270, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b403bfdd4a45c940b9c13bf04b311c9?s=128&d=identicon&r=PG", "display_name": "Augusto Dias Noronha", "link": "https://stackoverflow.com/users/868270/augusto-dias-noronha"}, "reply_to_user": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 0, "creation_date": 1428503273, "post_id": 29517091, "comment_id": 47190210, "body": "@Jester I think <code>char</code> is signed in this case, other problems have <code>unsigned char</code> so I think the lack of it means this one is signed."}, {"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 1, "creation_date": 1428503627, "post_id": 29517091, "comment_id": 47190454, "body": "If <code>char</code> is signed, you need to use <code>movsbl</code> to sign extend it. For example, if your char value is <code>-1</code> you want the <code>unsigned int</code> value to be <code>0xffffffff</code> (this is mandated by the C standard)."}, {"owner": {"reputation": 814, "user_id": 868270, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b403bfdd4a45c940b9c13bf04b311c9?s=128&d=identicon&r=PG", "display_name": "Augusto Dias Noronha", "link": "https://stackoverflow.com/users/868270/augusto-dias-noronha"}, "reply_to_user": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 0, "creation_date": 1428503809, "post_id": 29517091, "comment_id": 47190590, "body": "I see... It wasn&#39;t quite clear for me what the rules were in this case. Thank you for your help"}], "answers": [{"comments": [{"owner": {"reputation": 102, "user_id": 1024469, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q7tiC.png?s=128&g=1", "display_name": "Rodrigo Camargos", "link": "https://stackoverflow.com/users/1024469/rodrigo-camargos"}, "edited": false, "score": 1, "creation_date": 1538584117, "post_id": 31045682, "comment_id": 92196626, "body": "Book errata: Practice Problem 3.4. The last sentence of the problem statement should state \u201c... the operation should change the size first ....\u201d"}], "tags": [], "owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": true, "score": 1, "last_activity_date": 1435222684, "creation_date": 1435222684, "answer_id": 31045682, "question_id": 29517091, "link": "https://stackoverflow.com/questions/29517091/achieve-c-casting-using-x86-mov-instructions/31045682#31045682", "title": "Achieve C casting using x86 mov instructions", "body": "<blockquote>\n  <p>Recall that when performing a cast that involves both a size change\n  and a change of \u201csignedness\u201d in C, the operation should change the\n  signedness first (Section 2.2.6).</p>\n</blockquote>\n\n<p>Unless I'm misreading it, this sentence appears to conflict with what he gives as the correct answer.</p>\n\n<p>That rule would mean that, starting with signed char:</p>\n\n<ul>\n<li>signed char</li>\n<li>-> unsigned char</li>\n<li>-> unsigned int</li>\n</ul>\n\n<p>So the size conversion is from unsigned char to unsigned int, so <code>movz</code> would be appropriate.  Presumably the rule is wrong (doesn't match what C actually specifies), and <code>movs</code> really is what a C compiler would use.</p>\n\n<p>Jester's comment says that the unsigned int value of a <code>-1</code> char value is required to be <code>0xffffffff</code>, so it looks like that last sentence of the practice problem about order of converting signedness and size is the problem.</p>\n"}], "owner": {"reputation": 814, "user_id": 868270, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b403bfdd4a45c940b9c13bf04b311c9?s=128&d=identicon&r=PG", "display_name": "Augusto Dias Noronha", "link": "https://stackoverflow.com/users/868270/augusto-dias-noronha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1307, "favorite_count": 0, "accepted_answer_id": 31045682, "answer_count": 1, "score": 2, "last_activity_date": 1435222684, "creation_date": 1428502200, "last_edit_date": 1428503874, "question_id": 29517091, "link": "https://stackoverflow.com/questions/29517091/achieve-c-casting-using-x86-mov-instructions", "title": "Achieve C casting using x86 mov instructions", "body": "<p>I'm reading the book \"Computer Systems: A Programmer's Perspective\". Right now I'm not really sure I understand when to use the different mov instructions. Here's the exercise:</p>\n\n<blockquote>\n  <p>Practice Problem 3.4</p>\n  \n  <p>Assume variables v and p declared with types</p>\n  \n  <p>src_t v;</p>\n  \n  <p>dest_t *p;</p>\n  \n  <p>where src_t and dest_t are data types declared with typedef. We wish\n  to use the appropriate data movement instruction to implement the\n  operation</p>\n  \n  <p>*p = (dest_t) v;</p>\n  \n  <p>where v is stored in the appropriately named portion of register %eax\n  (i.e., %eax, %ax, or %al), while pointer p is stored in register %edx.</p>\n  \n  <p>For the following combinations of src_t and dest_t, write a line of\n  assembly code that does the appropriate transfer. Recall that when\n  performing a cast that involves both a size change and a change of\n  \u201csignedness\u201d in C, the operation should change the signedness first\n  (Section 2.2.6).</p>\n</blockquote>\n\n<p>I'm checking my solutions against <a href=\"http://rooftrellen.com/blog/computer-systems-a-programmers-perspective-chapter-3-practice-problem/\" rel=\"nofollow\">this blog post</a> and I'm not quite sure I understand problem 3:</p>\n\n<pre><code>src_t       dest_t      My Solution              Blog's Solution\n\nchar        unsigned    movzbl %al, (%edx)     movsbl %al, (%edx)\n</code></pre>\n\n<p>Number 3: I use movzbl while the blog's author uses movsbl. I don't understand the reasoning of movzbl vs movsbl in this case... If the char is a negative you'll end up with a wrong number either way, can anyone clarify why movsbl is the correct choice here?</p>\n"}, {"tags": ["c", "struct", "header", "typedef"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1428502238, "post_id": 29517074, "comment_id": 47189365, "body": "did you mean <code>struct name</code> instead of <code>struct a</code>?"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1428502584, "post_id": 29517074, "comment_id": 47189661, "body": "Voting to reopen, since I think the real question is &quot;why not just define the struct in header file&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1428502320, "post_id": 29517113, "comment_id": 47189450, "body": "While you&#39;re very right, I don&#39;t think this is the anser OP is looking for. What you told is already known to him/her. Google about <i>opaque type</i> :-)"}], "tags": [], "owner": {"reputation": 3008, "user_id": 2209329, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/e62709eac24c8a174c5f876e1cb63b39?s=128&d=identicon&r=PG&f=1", "display_name": "Micha\u0142 Szyd\u0142owski", "link": "https://stackoverflow.com/users/2209329/micha%c5%82-szyd%c5%82owski"}, "is_accepted": true, "score": 0, "last_activity_date": 1428502246, "creation_date": 1428502246, "answer_id": 29517113, "question_id": 29517074, "link": "https://stackoverflow.com/questions/29517074/why-typedef-struct-in-a-header-file-in-c/29517113#29517113", "title": "why typedef struct in a header file in C?", "body": "<p><code>typedef</code> keyword is used to create synonyms, so that later in your code you can use just your <code>typedef</code>ed keyword instead of <code>struct</code> or any primitive type you replaced. </p>\n"}], "owner": {"reputation": 1177, "user_id": 3057900, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/3fd5c1a3141c1130fc18771498169887?s=128&d=identicon&r=PG&f=1", "display_name": "ratzip", "link": "https://stackoverflow.com/users/3057900/ratzip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2189, "favorite_count": 0, "closed_date": 1428502318, "accepted_answer_id": 29517113, "answer_count": 1, "score": 0, "last_activity_date": 1428502311, "creation_date": 1428502164, "last_edit_date": 1428502311, "question_id": 29517074, "link": "https://stackoverflow.com/questions/29517074/why-typedef-struct-in-a-header-file-in-c", "closed_reason": "Duplicate", "title": "why typedef struct in a header file in C?", "body": "<p>I saw some code in C header like this:</p>\n\n<pre><code>//a.h\n\ntypedef struct name name;\n\n//a.c\n\nstruct name {\n   int number;\n   int age;\n};\n</code></pre>\n\n<p>what is the reason why <code>typedef struct</code> in header file?  and kind of implement it in source file?</p>\n\n<p>Why not just define the struct in header file? what is the propose of doing this?</p>\n"}, {"tags": ["python", "c", "memory-management", "numpy", "linux-kernel"], "answers": [{"comments": [{"owner": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "edited": false, "score": 1, "creation_date": 1428512018, "post_id": 29517014, "comment_id": 47196256, "body": "+1, but I wouldn&#39;t go nearly as far as to call the Linux kernel <i>&quot;seriously broken&quot;</i> just because it allows for overcommitting virtual memory. If the kernel only allocated virtual memory for which it could strictly guarantee enough physical storage then you&#39;d end up in equally absurd situations where the kernel would refuse to cough up any memory for new objects even though 80% of the RAM is unused, simply because, say, some lazy developer decided to <code>malloc</code> a 16GB array where only 1GB was needed."}], "tags": [], "owner": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "is_accepted": true, "score": 8, "last_activity_date": 1428502661, "last_edit_date": 1428502661, "creation_date": 1428502033, "answer_id": 29517014, "question_id": 29516888, "link": "https://stackoverflow.com/questions/29516888/what-is-numpy-empty-doing-under-the-hood-when-i-allocate-a-massive-ndarray/29517014#29517014", "title": "What is numpy empty doing under the hood when I allocate a massive ndarray?", "body": "<p>Note that the <strong>kernel</strong> may perform lazy allocations. I.e. <code>malloc</code> doesn't actually reserve the memory. When the memory is accessed the first time then a page fault will occur and the kernel will perform the actual allocation (and may decide to only allocate that page of memory and not the whole array).</p>\n\n<p>In other words: C isn't being lazy. It's the kernel that is deferring the allocation.</p>\n\n<p>The error happens when you try to add one to the array elements because that operation modifies all memory locations, and thus the kernel is forced to actually fit all the array in memory and fails.</p>\n\n<hr>\n\n<p>I'm not an expert in OS memory management, so the above is what I remember of the OS course. One reference for this can be found <a href=\"http://www.win.tue.nl/~aeb/linux/lk/lk-9.html#ss9.6\" rel=\"noreferrer\">here</a>. Quoting from it:</p>\n\n<blockquote>\n  <p>Linux on the other hand is seriously broken. It will by default answer\n  \"yes\" to most requests for memory, in the hope that programs ask for\n  more than they actually need.</p>\n</blockquote>\n\n<p>What it's saying is that the kernel <code>malloc</code> almost never return a <code>NULL</code>, even if the required memory is too big. It \"hopes\" that the user isn't actually going to use all the memory they request so that he can avoid loading some pages and fit the required data anyway. Obviously this isn't always true.</p>\n"}], "owner": {"reputation": 3608, "user_id": 887074, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/da9c9afc19776841b62f8980a40c02ec?s=128&d=identicon&r=PG", "display_name": "Erotemic", "link": "https://stackoverflow.com/users/887074/erotemic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 654, "favorite_count": 0, "accepted_answer_id": 29517014, "answer_count": 1, "score": 4, "last_activity_date": 1428517874, "creation_date": 1428501719, "last_edit_date": 1428517874, "question_id": 29516888, "link": "https://stackoverflow.com/questions/29516888/what-is-numpy-empty-doing-under-the-hood-when-i-allocate-a-massive-ndarray", "title": "What is numpy empty doing under the hood when I allocate a massive ndarray?", "body": "<p>I was looking at how much space numpy arrays consume in memory and I noticed a peculiar behavior: </p>\n\n<p>When I ran <code>x = np.empty((1000000, 7, 64, 64), dtype=np.uint8)</code></p>\n\n<p>My computer with 16GB of memory did not crash. Instead it was sailing smoothly with 2GB of memory allocated.</p>\n\n<p>This numpy array should weigh in at 26.70 GB, but something lazy seems to be happening. When I add one, then the laziness stops immediately, and my program hangs and them gets a <code>MemoryError</code>.</p>\n\n<p>I'm wondering how numpy does this under the hood. </p>\n\n<p>I took a look at <code>numpy.core.multiarray</code>, and found <code>numpy/core/src/multiarray/multiarraymodule.c</code> with this bit of code that seems to be the definition of empty: </p>\n\n<pre><code>static PyObject *\narray_empty(PyObject *NPY_UNUSED(ignored), PyObject *args, PyObject *kwds)\n{\n\n    static char *kwlist[] = {\"shape\",\"dtype\",\"order\",NULL};\n    PyArray_Descr *typecode = NULL;\n    PyArray_Dims shape = {NULL, 0};\n    NPY_ORDER order = NPY_CORDER;\n    npy_bool is_f_order;\n    PyArrayObject *ret = NULL;\n\n    if (!PyArg_ParseTupleAndKeywords(args, kwds, \"O&amp;|O&amp;O&amp;\", kwlist,\n                PyArray_IntpConverter, &amp;shape,\n                PyArray_DescrConverter, &amp;typecode,\n                PyArray_OrderConverter, &amp;order)) {\n        goto fail;\n    }\n\n    switch (order) {\n        case NPY_CORDER:\n            is_f_order = NPY_FALSE;\n            break;\n        case NPY_FORTRANORDER:\n            is_f_order = NPY_TRUE;\n            break;\n        default:\n            PyErr_SetString(PyExc_ValueError,\n                            \"only 'C' or 'F' order is permitted\");\n            goto fail;\n    }\n\n    ret = (PyArrayObject *)PyArray_Empty(shape.len, shape.ptr,\n                                            typecode, is_f_order);\n\n    PyDimMem_FREE(shape.ptr);\n    return (PyObject *)ret;\n\n fail:\n    Py_XDECREF(typecode);\n    PyDimMem_FREE(shape.ptr);\n    return NULL;\n}\n</code></pre>\n\n<p>I'm wondering how this laziness is achieved in C, and where else it will pop up in numpy. </p>\n"}, {"tags": ["c", "embedded", "avr", "winavr"], "comments": [{"owner": {"reputation": 5703, "user_id": 1401213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccb697eb985c37893ed06f3c3324c7c8?s=128&d=identicon&r=PG&f=1", "display_name": "kkrambo", "link": "https://stackoverflow.com/users/1401213/kkrambo"}, "edited": false, "score": 2, "creation_date": 1428502037, "post_id": 29516723, "comment_id": 47189207, "body": "The .map file generated by the linker during the build should tell you the size of each section.  And that could be a way to double check what arv32-size.exe is telling you."}, {"owner": {"reputation": 536, "user_id": 4739229, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-b1EdfH3K1UQ/AAAAAAAAAAI/AAAAAAAAABM/ZK3DsBP-ELI/photo.jpg?sz=128", "display_name": "Mike Bessonov", "link": "https://stackoverflow.com/users/4739229/mike-bessonov"}, "edited": false, "score": 0, "creation_date": 1428502297, "post_id": 29516723, "comment_id": 47189427, "body": "Try <code>avr32-size -A</code>, the output tends to be more sane. See an older discussion at <a href=\"http://stackoverflow.com/questions/16791311/how-to-interpret-avr32-size-output\" title=\"how to interpret avr32 size output\">stackoverflow.com/questions/16791311/&hellip;</a> ."}, {"owner": {"reputation": 63, "user_id": 3933606, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f4e07ea0c8474230700c157124eb300d?s=128&d=identicon&r=PG&f=1", "display_name": "sharkscream", "link": "https://stackoverflow.com/users/3933606/sharkscream"}, "edited": false, "score": 0, "creation_date": 1428503771, "post_id": 29516723, "comment_id": 47190555, "body": "If I try avr32-size.exe -A, .data has the same size, but .bss is only 21664... Thus everything seams to be ok. But why does avr32-size.exe plot different values in different modes?"}, {"owner": {"reputation": 289, "user_id": 960014, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d7ed13391ebf7afae4e1041b7a75caa7?s=128&d=identicon&r=PG", "display_name": "maguirre", "link": "https://stackoverflow.com/users/960014/maguirre"}, "edited": false, "score": 0, "creation_date": 1428540403, "post_id": 29516723, "comment_id": 47209730, "body": "I have found similar issues with *-size utilities, except mine was under reporting RAM utilization. I&#39;d recommend you submit your findings to the mailing list at avr-gcc"}], "answers": [{"tags": [], "owner": {"reputation": 95, "user_id": 2961897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32f8e44370a4d5a01264f6b768c50b02?s=128&d=identicon&r=PG&f=1", "display_name": "seansy", "link": "https://stackoverflow.com/users/2961897/seansy"}, "is_accepted": false, "score": 2, "last_activity_date": 1428540539, "creation_date": 1428540539, "answer_id": 29527850, "question_id": 29516723, "link": "https://stackoverflow.com/questions/29516723/ram-usage-at32uc3b0512/29527850#29527850", "title": "RAM usage AT32UC3B0512", "body": "<p>The chip you are using has 96kB of RAM and that is also the sum of your .bss and .data sections. This does not mean that all of your RAM is being used up, rather it is merely showing how the RAM is being allocated.</p>\n"}, {"tags": [], "owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "is_accepted": false, "score": 0, "last_activity_date": 1429695970, "creation_date": 1429695970, "answer_id": 29793665, "question_id": 29516723, "link": "https://stackoverflow.com/questions/29516723/ram-usage-at32uc3b0512/29793665#29793665", "title": "RAM usage AT32UC3B0512", "body": "<p>The program on MCU is usually located in FLASH</p>\n\n<ul>\n<li>this is not true if you have some OS present</li>\n<li>and load program to memory on runtime from somewhere like SD card</li>\n<li>not all MCU's can do that</li>\n<li>I suspect that is not your case</li>\n<li>The program Flash is 512 KByte big (I guess from your IC's number)</li>\n</ul>\n\n<p>The SDRAM is used for C engine/OS,stack and heap</p>\n\n<ul>\n<li>your chip has 96 KByte</li>\n<li>the C engine is something like OS handling</li>\n<li>dynamic allocations,heap,stack,subroutine calls</li>\n<li>and including RTL used during compilation</li>\n<li>and of coarse dummy Interrupt sub routines for unused interrupts...</li>\n</ul>\n\n<p>When you compile program to ELF/HEX what ever</p>\n\n<ul>\n<li>the compiler/linker tells you only</li>\n<li>how big the program code and data is (located in program FLASH memory)</li>\n<li>how big static variables you have</li>\n<li>the rest is unknown until runtime itself</li>\n</ul>\n\n<p>So if you need to know how big chunk of memory you take</p>\n\n<ul>\n<li>then you need to extract it from runtime</li>\n<li>by some RTL call to get memory status</li>\n<li>or by estimating it yourself based on knowledge of</li>\n<li>what your program does</li>\n<li>how much of dynamic memory is used</li>\n<li>heap/stack trashing/usage</li>\n<li>recursions level, etc...</li>\n<li>Or you can try to increasingly allocate memory until you hit out of memory</li>\n<li>and count how big chunk you allocated altogether</li>\n<li>then release it of coarse</li>\n<li>the used memory is then <code>~ 96KB - altogether_allocated_memory</code></li>\n<li>(+/-) granularity ...</li>\n</ul>\n"}], "owner": {"reputation": 63, "user_id": 3933606, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f4e07ea0c8474230700c157124eb300d?s=128&d=identicon&r=PG&f=1", "display_name": "sharkscream", "link": "https://stackoverflow.com/users/3933606/sharkscream"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1429695970, "creation_date": 1428501287, "question_id": 29516723, "link": "https://stackoverflow.com/questions/29516723/ram-usage-at32uc3b0512", "title": "RAM usage AT32UC3B0512", "body": "<p>I'm searching for a way to see the RAM usage of my application running on an at32uc3b0512.</p>\n\n<p>arv32-size.exe foo.elf tells me:</p>\n\n<pre><code>  text    data     bss     dec     hex filename\n263498   11780   86524  361802   5854a foo.elf\n</code></pre>\n\n<p>According to 'google', RAM usage is .data + .bss. But .data + .bss is already (11780+86524)/1024 = 96kb, which would mean that my RAM is full (at32uc3b0512 -> 96kb SRAM). But the application works as desired. Am I wrong???</p>\n"}, {"tags": ["c++", "c", "directx", "shader", "hlsl"], "comments": [{"owner": {"reputation": 8889, "user_id": 3493731, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0ccfa8c5c786e748c8cf4f1d3bae9694?s=128&d=identicon&r=PG&f=1", "display_name": "MuertoExcobito", "link": "https://stackoverflow.com/users/3493731/muertoexcobito"}, "edited": false, "score": 0, "creation_date": 1428528753, "post_id": 29516698, "comment_id": 47205811, "body": "Did using a single render target work? You haven&#39;t included the actual draw calls in the code snippet, which may be the issue. If you believe it is your shader changes, try using a GPU frame capture tool... eg. PIX / Windows Graphics Diagnostics / Nsight, etc. This way, you can inspect why exactly the pixels are not being written."}, {"owner": {"reputation": 159, "user_id": 4007863, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4d36b7be941107c1fc3c7613cf6fe179?s=128&d=identicon&r=PG&f=1", "display_name": "PuRe", "link": "https://stackoverflow.com/users/4007863/pure"}, "reply_to_user": {"reputation": 8889, "user_id": 3493731, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0ccfa8c5c786e748c8cf4f1d3bae9694?s=128&d=identicon&r=PG&f=1", "display_name": "MuertoExcobito", "link": "https://stackoverflow.com/users/3493731/muertoexcobito"}, "edited": false, "score": 0, "creation_date": 1428530276, "post_id": 29516698, "comment_id": 47206562, "body": "there is something drawn to the first rendertarget, but not to the second or third. If using a single one, there will be something drawn to it. I added the draw call above.  I will test it using a frame capture tool."}], "answers": [{"comments": [{"owner": {"reputation": 8889, "user_id": 3493731, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0ccfa8c5c786e748c8cf4f1d3bae9694?s=128&d=identicon&r=PG&f=1", "display_name": "MuertoExcobito", "link": "https://stackoverflow.com/users/3493731/muertoexcobito"}, "edited": false, "score": 2, "creation_date": 1428574572, "post_id": 29527072, "comment_id": 47224035, "body": "Exactly why they invented the frame debuggers :)."}], "tags": [], "owner": {"reputation": 159, "user_id": 4007863, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4d36b7be941107c1fc3c7613cf6fe179?s=128&d=identicon&r=PG&f=1", "display_name": "PuRe", "link": "https://stackoverflow.com/users/4007863/pure"}, "is_accepted": false, "score": 0, "last_activity_date": 1428535521, "creation_date": 1428535521, "answer_id": 29527072, "question_id": 29516698, "link": "https://stackoverflow.com/questions/29516698/directx10-only-one-rendertarget-is-drawn-to/29527072#29527072", "title": "DirectX10 Only one rendertarget is drawn to", "body": "<p>I used the graphic debugger and that gave me the reason why it did not work!</p>\n\n<p>I forgot to set the BlendState for my other Rendertarget's. Setting BlendEnable to true fixed it finally.</p>\n"}], "owner": {"reputation": 159, "user_id": 4007863, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4d36b7be941107c1fc3c7613cf6fe179?s=128&d=identicon&r=PG&f=1", "display_name": "PuRe", "link": "https://stackoverflow.com/users/4007863/pure"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1428535521, "creation_date": 1428501236, "last_edit_date": 1428530205, "question_id": 29516698, "link": "https://stackoverflow.com/questions/29516698/directx10-only-one-rendertarget-is-drawn-to", "title": "DirectX10 Only one rendertarget is drawn to", "body": "<p>So I have added MRT to my program.</p>\n\n<p>The Problem: My two textures (normalMap and positionMap) are empty (only filled with the clearcolor)..</p>\n\n<p>I use them like this:</p>\n\n<p>Inside of my header:</p>\n\n<pre><code>        ID3D10RenderTargetView** m_ppBuffer;\n        ID3D10Texture** m_ppTextures;\n        ID3D10ShaderResourceView** m_ppshaderView;\n</code></pre>\n\n<p>Each Frame:</p>\n\n<pre><code>this-&gt;m_pDevice-&gt;OMSetRenderTargets(this-&gt;m_TextureCount, this-&gt;m_ppBuffer, this-&gt;m_pDepthBuffer);\nfor (int32 i = 0; i &lt; this-&gt;m_TextureCount; i++)\n    this-&gt;m_pDevice-&gt;ClearRenderTargetView(this-&gt;m_pBuffer[i], a_Color.colors);\n....\n....\n    this-&gt;m_pEffect-&gt;GetVariableByName(\"DiffuseMap\")-&gt;AsShaderResource()-&gt;SetResource(m_ppshaderView[0]);\n    this-&gt;m_pEffect-&gt;GetVariableByName(\"NormalMap\")-&gt;AsShaderResource()-&gt;SetResource(m_ppshaderView[1]);\n    this-&gt;m_pEffect-&gt;GetVariableByName(\"PositionMap\")-&gt;AsShaderResource()-&gt;SetResource(m_ppshaderView[2]);\n    this-&gt;m_pDevice-&gt;IASetInputLayout(this-&gt;m_pInputLayout);\n    this-&gt;m_pTechnique-&gt;GetPassByIndex(0)-&gt;Apply(0);\n    this-&gt;m_pDevice-&gt;IASetPrimitiveTopology(primitiveTopology);\n    this-&gt;m_pDevice-&gt;Draw(a_Vertices, 0);\n</code></pre>\n\n<p>My Shader which I use to draw onto the rendertargets:</p>\n\n<pre><code>float4x4 Scale;\nfloat4x4 Rotation;\nfloat4x4 Translation;\nfloat4x4 View;\nfloat4x4 Projection;\n\nTexture2D Diffuse;\n\nSamplerState TextureSampler\n{\n  Filter = MIN_MAG_MIP_Linear;\n  AddressU = WRAP;\n  AddressV = WRAP;\n};\nstruct VertexShaderInput\n{\n  float3 Position : POSITION0;\n  float2 UV       : TEXCOORD0;\n  float3 Color    : COLOR0;\n  float3 Normal   : NORMAL0;\n};\n\nstruct VertexShaderOutput\n{\n  float4 PositionOut : SV_POSITION;\n  float4 Position : POSITION0;\n  float2 UV       : TEXCOORD0;\n  float3 Color    : COLOR0;\n  float3 Normal   : NORMAL0;\n};\n\nstruct PixelShaderOutput\n{\n  float4 colorMap: SV_TARGET0;\n  float4 normalMap: SV_TARGET1;\n  float4 positionMap: SV_TARGET2;\n};\n\n\nVertexShaderOutput VS_MAIN(VertexShaderInput input)\n{\n  VertexShaderOutput Output = (VertexShaderOutput)0;\n\n  float4 pos = float4(input.Position.xyz, 1);\n\n  float4x4 Model = mul(mul(Scale,Rotation),Translation);\n  float4x4 MVP = mul(mul(Model,View),Projection);\n\n  Output.Position = mul(pos,MVP);\n  Output.PositionOut = mul(pos,MVP);\n\n  Output.UV = input.UV;\n\n  Output.Color = input.Color;\n\n  Output.Normal = input.Normal;\n\n  return Output;\n}\n\nPixelShaderOutput PS_MAIN(VertexShaderOutput input)\n{\n  PixelShaderOutput output;\n\n  float4 blend = Diffuse.Sample(TextureSampler, input.UV);\n  output.colorMap = blend;\n  output.normalMap = float4(input.Normal,1);\n  output.positionMap = float4(input.Position.xyz,1);\n\n  return output;\n}\n\nRasterizerState Culling\n{\n  CullMode = 1;\n};\n\ntechnique10 Main\n{\n  pass p0\n  {\n    SetRasterizerState(Culling);\n    SetVertexShader(CompileShader(vs_4_0, VS_MAIN()));\n    SetGeometryShader(NULL);\n    SetPixelShader(CompileShader(ps_4_0, PS_MAIN()));\n   }\n};\n</code></pre>\n\n<p>After that, I render my Rendertargets using one Quad and this shader.\nTextureID is a value I defined in code so I can switch between the rendertarget textures during runtime using my arrows.</p>\n\n<pre><code>float4x4 Scale;\nfloat4x4 Rotation;\nfloat4x4 Translation;\nfloat4x4 View;\nfloat4x4 Projection;\nfloat textureID;\n\nTexture2D DiffuseMap;\nTexture2D NormalMap;\nTexture2D PositionMap;\n\nSamplerState TextureSampler\n{\n  Filter = MIN_MAG_MIP_Linear;\n  AddressU = WRAP;\n  AddressV = WRAP;\n};\nstruct VertexShaderInput\n{\n  float3 Position : POSITION0;\n  float2 UV       : TEXCOORD0;\n  float3 Color    : COLOR0;\n  float3 Normal   : NORMAL;\n};\n\nstruct VertexShaderOutput\n{\n  float4 Position : SV_POSITION;\n  float2 UV       : TEXCOORD0;\n  float3 Color    : COLOR0;\n  float3 Normal   : NORMAL;\n};\n\nstruct PixelShaderOutput\n{\n  float4 color: SV_TARGET0;\n};\n\n\nVertexShaderOutput VS_MAIN(VertexShaderInput input)\n{\n  VertexShaderOutput Output = (VertexShaderOutput)0;\n\n  float4 pos = float4(input.Position.xyz, 1);\n\n  float4x4 Model = mul(mul(Scale,Rotation),Translation);\n  float4x4 MVP = mul(mul(Model,View),Projection);\n\n  Output.Position = mul(pos,MVP);\n\n  Output.UV = input.UV;\n\n  Output.Color = input.Color;\n\n  Output.Normal = input.Normal;\n\n  return Output;\n}\n\nPixelShaderOutput PS_MAIN(VertexShaderOutput input)\n{\n  PixelShaderOutput output;\n\n  float4 blend = DiffuseMap.Sample(TextureSampler, input.UV);\n  float4 norm = NormalMap.Sample(TextureSampler, input.UV);\n  float4 pos = PositionMap.Sample(TextureSampler, input.UV);\n  blend.a = 1;\n  if(textureID == 0.0)\n    output.color = blend;\n  else if(textureID == 1.0)\n    output.color = norm;\n  else\n    output.color = pos;\n\n  return output;\n}\n\nRasterizerState Culling\n{\n  CullMode = 1;\n};\n\ntechnique10 Main\n{\n  pass p0\n  {\n    SetRasterizerState(Culling);\n    SetVertexShader(CompileShader(vs_4_0, VS_MAIN()));\n    SetGeometryShader(NULL);\n    SetPixelShader(CompileShader(ps_4_0, PS_MAIN()));\n   }\n};\n</code></pre>\n"}, {"tags": ["c++", "c", "unicode"], "comments": [{"owner": {"reputation": 3699, "user_id": 474173, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/18331a42eeb0683a21fe3af6722c04cc?s=128&d=identicon&r=PG", "display_name": "Swanand", "link": "https://stackoverflow.com/users/474173/swanand"}, "edited": false, "score": 1, "creation_date": 1428500217, "post_id": 29516151, "comment_id": 47187714, "body": "Have you tried using _wrename()?"}, {"owner": {"reputation": 55713, "user_id": 26095, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WLsjF.jpg?s=128&g=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/26095/sean"}, "edited": false, "score": 0, "creation_date": 1428500237, "post_id": 29516151, "comment_id": 47187727, "body": "How are you determining that the file names in Windows are incorrect?"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 3, "creation_date": 1428500447, "post_id": 29516151, "comment_id": 47187884, "body": "Linux traditionally uses UTF-8. Windows uses UTF-16. Unless you stick to the common subset, things are going to differ."}], "answers": [{"tags": [], "owner": {"reputation": 37828, "user_id": 1629821, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/861cfc0de6bf99a544b500eac16229eb?s=128&d=identicon&r=PG", "display_name": "Mr.C64", "link": "https://stackoverflow.com/users/1629821/mr-c64"}, "is_accepted": true, "score": 3, "last_activity_date": 1428503069, "creation_date": 1428503069, "answer_id": 29517461, "question_id": 29516151, "link": "https://stackoverflow.com/questions/29516151/rename-files-to-unicode-name-in-c-c/29517461#29517461", "title": "Rename files to unicode name in C/C++", "body": "<p>To properly rename files in Windows, you may want to try using the (non-standard) <a href=\"https://msdn.microsoft.com/en-us/library/zw5t957f.aspx\" rel=\"nofollow\"><strong><code>_wrename()</code></strong></a> CRT function.</p>\n\n<p>Note that Windows uses Unicode <strong>UTF-16</strong> as its default Unicode encoding. So, in general, when passing Unicode strings to Win32 APIs or CRT functions like the aforementioned one, you should use the UTF-16 encoding.</p>\n"}], "owner": {"reputation": 1934, "user_id": 1010613, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/98ecd61e1e4efd18183cbbef402509dc?s=128&d=identicon&r=PG", "display_name": "hpn", "link": "https://stackoverflow.com/users/1010613/hpn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 878, "favorite_count": 0, "accepted_answer_id": 29517461, "answer_count": 1, "score": 3, "last_activity_date": 1428503084, "creation_date": 1428500007, "last_edit_date": 1428503084, "question_id": 29516151, "link": "https://stackoverflow.com/questions/29516151/rename-files-to-unicode-name-in-c-c", "title": "Rename files to unicode name in C/C++", "body": "<p>How do I rename files to a unicode name(Persian) in C/C++? calling <code>rename()</code> in Linux renames files properly, but in Windows, files gets a name like <em>\u00d8\u00b3\u00d9\u201e\u00d8\u00a7</em>. after rename.</p>\n"}, {"tags": ["c", "linux", "memory", "memory-management", "heap-memory"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1428500468, "post_id": 29515944, "comment_id": 47187904, "body": "Are you sure that the tiny <code>calloc</code> overhead (which is relevant for small objects only) is worth avoiding it? Did you measure? Large heap zones are often <code>malloc</code>-ated (on Linux) thru an <code>mmap</code> which will give zeroed memory anyway!"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1428501001, "post_id": 29515944, "comment_id": 47188377, "body": "What is the real issue you are struggling with? Please edit your question to improve it!"}, {"owner": {"reputation": 33, "user_id": 2482075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/255131eabdca227db6012956cb82ee2a?s=128&d=identicon&r=PG", "display_name": "sunny", "link": "https://stackoverflow.com/users/2482075/sunny"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1428558553, "post_id": 29515944, "comment_id": 47214875, "body": "Hi Basile, Thank you for the reply. I am using the C code in an embedded platform and I am getting a crash. The crash looks like a memory issue to a bad address. That is the reason I wanted to limit my C code heap memory and debug on PC platform."}], "answers": [{"tags": [], "owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "is_accepted": false, "score": 1, "last_activity_date": 1428499579, "creation_date": 1428499579, "answer_id": 29515982, "question_id": 29515944, "link": "https://stackoverflow.com/questions/29515944/how-to-limit-heap-size-for-a-c-code-in-linux/29515982#29515982", "title": "How to limit heap size for a c code in linux", "body": "<p>On POSIX systems you can use <code>setrlimit</code> function to limit the size of the virtual memory of the process.</p>\n\n<p>From POSIX <a href=\"http://pubs.opengroup.org/stage7tc1/functions/getrlimit.html\" rel=\"nofollow\">documentation</a>:</p>\n\n<blockquote>\n  <p>RLIMIT_AS</p>\n  \n  <p>This is the maximum size of total available memory of the process, in\n  bytes. If this limit is exceeded, the malloc() and mmap() functions\n  shall fail with errno set to [ENOMEM]. In addition, the automatic\n  stack growth fails with the effects outlined above.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 4043, "user_id": 6949852, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uebCh.png?s=128&g=1", "display_name": "\u9673 \u529b", "link": "https://stackoverflow.com/users/6949852/%e9%99%b3-%e5%8a%9b"}, "edited": false, "score": 0, "creation_date": 1617717063, "post_id": 29515991, "comment_id": 118378176, "body": "u should echo 1 to disable overcommit instead 0"}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": true, "score": 3, "last_activity_date": 1428502124, "last_edit_date": 1495542293, "creation_date": 1428499623, "answer_id": 29515991, "question_id": 29515944, "link": "https://stackoverflow.com/questions/29515944/how-to-limit-heap-size-for-a-c-code-in-linux/29515991#29515991", "title": "How to limit heap size for a c code in linux", "body": "<p>You could use (inside your program) <a href=\"http://man7.org/linux/man-pages/man2/setrlimit.2.html\" rel=\"nofollow noreferrer\">setrlimit(2)</a>, probably with <code>RLIMIT_AS</code> (as cited by <a href=\"https://stackoverflow.com/a/29515982/841108\">Ouah's answer</a>).</p>\n\n<p>Better yet, make your shell do it. With <code>bash</code> it is the <code>ulimit</code> builtin.</p>\n\n<p>Be sure that your program is indeed correctly and completely handling <code>malloc</code> failure everywhere (testing every return of <code>malloc</code> against <code>NULL</code> indicating its failure).</p>\n\n<p>If you don't test <code>malloc</code>'s result, when it is failing, it gives <code>NULL</code> and it is very likely that the next instructions would dereference a null pointer (or some address very close to it), which is <a href=\"http://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a> and on Linux giving a <a href=\"http://en.wikipedia.org/wiki/Segmentation_fault\" rel=\"nofollow noreferrer\">segmentation violation</a>.</p>\n\n<p>You probably should consider using <a href=\"http://valgrind.org/\" rel=\"nofollow noreferrer\">valgrind</a> during the debugging phase.</p>\n\n<p>BTW, 70Kilobytes of memory is tiny today (at least on Linux laptops, desktops and even tablets). Notice that the <a href=\"https://en.wikipedia.org/wiki/C_standard_library\" rel=\"nofollow noreferrer\">C standard library</a> may call <code>malloc</code> under the hoods (for example, <code>fopen</code> gives a <code>FILE</code> handle, which has some buffer, which might be internally obtained thru <code>malloc</code>)</p>\n\n<p>And <a href=\"http://www.etalabs.net/overcommit.html\" rel=\"nofollow noreferrer\">memory overcommit</a> can be disabled on Linux with the following command</p>\n\n<pre><code>echo 0 &gt; /proc/sys/vm/overcommit_memory\n</code></pre>\n\n<p>to be run as root.</p>\n"}], "owner": {"reputation": 33, "user_id": 2482075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/255131eabdca227db6012956cb82ee2a?s=128&d=identicon&r=PG", "display_name": "sunny", "link": "https://stackoverflow.com/users/2482075/sunny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2479, "favorite_count": 0, "accepted_answer_id": 29515991, "answer_count": 2, "score": 3, "last_activity_date": 1428502124, "creation_date": 1428499474, "question_id": 29515944, "link": "https://stackoverflow.com/questions/29515944/how-to-limit-heap-size-for-a-c-code-in-linux", "title": "How to limit heap size for a c code in linux", "body": "<p>I wanted to know if it is possible to limit the allocated heap size for a C code which is executing on linux machine.</p>\n\n<p>Is it possible to do so ?</p>\n\n<p>The purpose of doing so is that I am dynamically allocating ~70KBytes of memory and ~20KBytes of stack memory, apart from other globals, and locals. The dynamic allocation is done through malloc().</p>\n\n<p>So in order to confirm that the issue is not with the heap allocation, I want to limit the heap memory of the C code which will be run.</p>\n\n<p>I read few articles online and found that if we use malloc(), memory might be over committed, but if we use calloc(), we will get only usable memory without the over commitment, since calloc() has to initialize the memory block to zeros before giving the pointer. But I do not want use calloc() due to the initialization overhead.</p>\n"}, {"tags": ["c", "arrays", "append"], "comments": [{"owner": {"reputation": 76, "user_id": 4736904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d6405fbd15367c1d678ad7f2058a20d?s=128&d=identicon&r=PG&f=1", "display_name": "Ankur Patel", "link": "https://stackoverflow.com/users/4736904/ankur-patel"}, "edited": false, "score": 0, "creation_date": 1428499949, "post_id": 29515898, "comment_id": 47187508, "body": "can you be more clear the thing you are telling is confusing&quot;now for multiplication we first do 2*2 and store it in tmp[1], then 2*1 and store it in tmp[0], answer is 24.&quot; i m not getting how answer is coming 24?"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "reply_to_user": {"reputation": 76, "user_id": 4736904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d6405fbd15367c1d678ad7f2058a20d?s=128&d=identicon&r=PG&f=1", "display_name": "Ankur Patel", "link": "https://stackoverflow.com/users/4736904/ankur-patel"}, "edited": false, "score": 1, "creation_date": 1428500008, "post_id": 29515898, "comment_id": 47187549, "body": "@Ankur Patel: OP is trying to implement normal multiplication where the arrays represent the numbers as lists of digits."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1428500030, "post_id": 29515898, "comment_id": 47187566, "body": "<code>for(k = 0; k &lt; c; ++k) res[i] = res[i]*10 + tmp[k];</code>"}, {"owner": {"reputation": 381, "user_id": 4689414, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/eb557bb7fb58c0208b827b9bd4a4c36c?s=128&d=identicon&r=PG&f=1", "display_name": "vvvsg", "link": "https://stackoverflow.com/users/4689414/vvvsg"}, "edited": false, "score": 0, "creation_date": 1428500055, "post_id": 29515898, "comment_id": 47187585, "body": "2*2 = 4; 2*1=2; it&#39;s backward loop so it makes 24."}, {"owner": {"reputation": 381, "user_id": 4689414, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/eb557bb7fb58c0208b827b9bd4a4c36c?s=128&d=identicon&r=PG&f=1", "display_name": "vvvsg", "link": "https://stackoverflow.com/users/4689414/vvvsg"}, "edited": false, "score": 0, "creation_date": 1428512153, "post_id": 29515898, "comment_id": 47196353, "body": "I could really use some help."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 4918514, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/StweM.png?s=128&g=1", "display_name": "LordBidoof", "link": "https://stackoverflow.com/users/4918514/lordbidoof"}, "is_accepted": false, "score": 0, "last_activity_date": 1432107465, "creation_date": 1432107465, "answer_id": 30343191, "question_id": 29515898, "link": "https://stackoverflow.com/questions/29515898/how-to-append-data-in-existing-array-element-without-overwriting-the-data-in-ele/30343191#30343191", "title": "how to append data in existing array element without overwriting the data in element", "body": "<pre><code>int myMult(int[] num1, int num1Size, int[] num2, int num2Size)\n{\n  //reverse the arrays so exponent work simplifies\n  int newNum1[num1Size];\n  for(int i = 0; i &lt; num1Size; i++)\n    newNum1[i] = num1[num1Size - 1 - i];\n  int newNum2[num2Size];\n  for(int i = 0; i &lt; num1Size; i++)\n    newNum2[i] = num2[num2Size - 1 - i];\n\n  //create an array to store temporary values\n  int temp[num1Size + num2size];\n  for(int i = 0; i &lt; num1Size + num2Size; i++)\n    temp[i] = 0;\n\n  //perform multiplication digit-wise\n  for(int j = 0; j &lt; num2Size; j++;)\n  {\n    //multiply the given digit through the first number\n    for(int i = 0; i &lt; num1Size; i++)\n      //add the result to the location in temp, don't replace it\n      temp[i+j] += newNum1[i] * newNum2[j];\n  }\n\n  //add up the values stored in temp\n  int result = 0;\n  for(int i = 0; i &lt; num1Size + num2Size; i++)\n    result += temp[i] * pow(10, i);\n\n  return result;\n}\n</code></pre>\n\n<p>The nested loops work as follows:</p>\n\n<ol>\n<li>Start with the ones place of the second number (in your example, 2)</li>\n<li>Multiply that value through the first number and store results in temp (temp[0] = 2*2 + 0 = 4, temp[1] = 2*1 + 0 = 2)</li>\n<li>Repeat with the tens place, but shift over where you add the results (temp[1] = 3*2 + 2 = 8, temp[2] = 3*1 + 0 = 3;)</li>\n</ol>\n\n<p>The array temp represents each digit of your result. For instance, temp[0] represents the ones place, and temp[1] represents the tens place. When you add up the values of the array, you take into account the place value.</p>\n\n<p>In your example, we have temp[] = {4, 8, 3};\nThus, when we add through temp, we get:</p>\n\n<p>4*10^0 + 8*10^1 + 3*10^2 = 4 + 80 + 300 = 384, which is what it should be.</p>\n\n<p>Hope this helps</p>\n\n<p>Note: I wrote out this answer before I realized this was C and not C++. My syntax may be a little off, but the logic itself should be sound.</p>\n"}], "owner": {"reputation": 381, "user_id": 4689414, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/eb557bb7fb58c0208b827b9bd4a4c36c?s=128&d=identicon&r=PG&f=1", "display_name": "vvvsg", "link": "https://stackoverflow.com/users/4689414/vvvsg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 493, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1432107465, "creation_date": 1428499342, "question_id": 29515898, "link": "https://stackoverflow.com/questions/29515898/how-to-append-data-in-existing-array-element-without-overwriting-the-data-in-ele", "title": "how to append data in existing array element without overwriting the data in element", "body": "<p>so I have two arrays of integers. i need to multiply them but for that i need to store each step's result in a temporary array's element. for example:</p>\n\n<p>say arrays are:</p>\n\n<p>arf[2] = {1, 2};</p>\n\n<p>ars[2] = {3, 2};</p>\n\n<p>tmp[20]; // temporary array for each step</p>\n\n<p>res[20]; // stores each step result in an element</p>\n\n<p>now for multiplication we first do 2*2 and store it in <strong>tmp</strong>[1],\nthen 2*1 and store it in <strong>tmp</strong>[0], \nanswer is 24. now i need to store 24 in first element of <strong>res</strong> array. so <strong>res</strong>[0] = 24. the same goes for 3 * 12. i know i need to do it with a for loop. I store tmp[1] in res[0] next i need to append tmp[0] to res[0] but it overwrites it.</p>\n\n<p>c in this case is 2 because arf and ars each has 2 elements.</p>\n\n<pre><code>for (k = c - 1; k &gt;= 0; k--)\n        {\n            res[i] = tmp[k];\n        }\n</code></pre>\n\n<p>So How do i append data in existing element without overwritting data in it?</p>\n"}, {"tags": ["c", "binary"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 4758798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f07aaca2fc26e166aad5bf7ae876111f?s=128&d=identicon&r=PG&f=1", "display_name": "Sundava", "link": "https://stackoverflow.com/users/4758798/sundava"}, "is_accepted": false, "score": 0, "last_activity_date": 1428501983, "last_edit_date": 1495542131, "creation_date": 1428501983, "answer_id": 29516990, "question_id": 29515728, "link": "https://stackoverflow.com/questions/29515728/binary-buddies-implementation-questions/29516990#29516990", "title": "Binary Buddies implementation questions", "body": "<p>For your first question, you just have to increment your pointer like a normal  variable.</p>\n\n<p>The value of a pointer corresponds to the address in memory of the data it points to. By incrementing it by, say 10, you actually move 10 bytes further into your memory.</p>\n\n<p>As for the free list, malloc() creates a structure contingent with the allocated memory block containing informations such as the address of the memory block,its size, and whether it is free or not.</p>\n\n<p>You goal is to create these structures so you can keep track of the status the different memory blocks you have allocated or free with your get_memory() and release_memory() function.</p>\n\n<p>You might also find this useful : <a href=\"https://stackoverflow.com/a/1957125/4758798\">https://stackoverflow.com/a/1957125/4758798</a></p>\n"}, {"tags": [], "owner": {"reputation": 9718, "user_id": 3294441, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/UwdVL.png?s=128&g=1", "display_name": "QuestionC", "link": "https://stackoverflow.com/users/3294441/questionc"}, "is_accepted": false, "score": 0, "last_activity_date": 1428504792, "creation_date": 1428504792, "answer_id": 29518153, "question_id": 29515728, "link": "https://stackoverflow.com/questions/29515728/binary-buddies-implementation-questions/29518153#29518153", "title": "Binary Buddies implementation questions", "body": "<blockquote>\n  <ol>\n  <li>It's clear that the initial pointer to this space must be incremented in some way when a call to get_memory() is made, and the new pointer will be returned to the calling process. How can I increment the pointer by a specific number of bytes?</li>\n  </ol>\n</blockquote>\n\n<p>When you call <code>get_memory()</code>, you will return a pointer to the main memory added to some offset.  The word 'increment' implies that you are going to change the value of the initial pointer, which you should not do.</p>\n\n<p>Here is some simple code of me subaddressing one big memory block.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nint main (void)\n{\n  // Allocate a block of memory\n  void * memory_block = malloc (512);\n\n  // Now \"Split\" that memory into two halves.\n  void * first_half = memory_block;\n  void * second_half = memory_block + 256;\n\n  // We can even keep splitting...\n  void * second_first_half = second_half;\n  void * second_second_half = second_half + 128;\n\n  // Note that this splitting doesn't actually change the main memory block.  \n  // We're just bookmarking locations in it.\n\n  printf (\"memory_block %p\\n\", memory_block);\n  printf (\"first_half %p\\n\", first_half);\n  printf (\"second_half %p\\n\", second_half);\n  printf (\"second_first_half %p\\n\", second_first_half);\n  printf (\"second_second_half %p\\n\", second_second_half);\n\n  return 0;\n}\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>I understand that free lists for each block size must be kept, but I'm unsure exactly how these will be initialized and maintained. What is stored in the free list exactly? The memory pointer?</li>\n  </ol>\n</blockquote>\n\n<p>At a minimum, you probably want to keep track of the memory pointer and the size of that memory block, so something like this...</p>\n\n<pre><code>typedef struct memory_block {\n  void * memory;\n  size_t size;\n} memory_block_t;\n</code></pre>\n\n<p>There are other ways to represent this though.  For example, you get equivalent information by keeping track of their memory offsets relative to the global malloc.  I would suggest treating memory as a set of offsets like this:</p>\n\n<pre><code>void * global_memory; // Assigned by start_memory()\n\n// Functionally equivalent to the above struct\n// memory = global_memory + begin;\n// size = end - begin;\ntypedef struct memory_block {\n  size_t begin;\n  size_t end;\n} memory_block_t;\n</code></pre>\n\n<p>There are multiple approaches to this difficult problem.</p>\n"}], "owner": {"reputation": 1, "user_id": 4764000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1f9793c66e6b7d28963b05817b91281?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew Burke", "link": "https://stackoverflow.com/users/4764000/matthew-burke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 406, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1428504792, "creation_date": 1428498945, "question_id": 29515728, "link": "https://stackoverflow.com/questions/29515728/binary-buddies-implementation-questions", "title": "Binary Buddies implementation questions", "body": "<p>I've read and understand the concepts behind the binary buddies approach to memory allocation, and I'm trying to put it to work in C but I have a few implementation specific questions before I can really get started. </p>\n\n<p><a href=\"https://drive.google.com/file/d/0BxJX9LHXUU59OWZ6ZmhvV1lBX2M/view?usp=sharing\" rel=\"nofollow\">https://drive.google.com/file/d/0BxJX9LHXUU59OWZ6ZmhvV1lBX2M/view?usp=sharing</a>\n- This is a link to the assignment specification, my question pertains to problem 5.</p>\n\n<p>The problem specifies that one call to malloc is to be made at the initialization of the allocator, and all requests for memory must be serviced using the space acquired from this call. </p>\n\n<ol>\n<li><p>It's clear that the initial pointer to this space must be incremented in some way when a call to get_memory() is made, and the new pointer will be returned to the calling process. How can I increment the pointer by a specific number of bytes?</p></li>\n<li><p>I understand that free lists for each block size must be kept, but I'm unsure exactly how these will be initialized and maintained. What is stored in the free list exactly? The memory pointer? </p></li>\n</ol>\n\n<p>I apologize if these questions have been asked before, I haven't found a relevant question that provided enough clarity for me to get working.</p>\n"}, {"tags": ["c", "sizeof", "32-bit", "16-bit"], "comments": [{"owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "edited": false, "score": 7, "creation_date": 1428498915, "post_id": 29515695, "comment_id": 47186743, "body": "What output do you expect?"}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 2, "creation_date": 1428498963, "post_id": 29515695, "comment_id": 47186773, "body": "Note <a href=\"http://stackoverflow.com/a/21128106/1708801\">sizeof returns size_t so you should use %zu</a>."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1428499074, "post_id": 29515695, "comment_id": 47186850, "body": "Note that your code won&#39;t even compile as it stands, which makes me think it&#39;s not your actual code. Also I&#39;d expect &quot;8 4 1&quot;, unless your compiler has wide char support enabled."}, {"owner": {"reputation": 21412, "user_id": 333698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca080b4ef1c6cb4df9bc123d3b3af61?s=128&d=identicon&r=PG", "display_name": "psmears", "link": "https://stackoverflow.com/users/333698/psmears"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 2, "creation_date": 1428499294, "post_id": 29515695, "comment_id": 47187010, "body": "@PaulR: I&#39;d expect the last number to be &quot;4&quot;, since <code>&#39;a&#39;</code> is (oddly enough) of type <code>int</code> (rather than <code>char</code> as one might reasonably suppose)..."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 21412, "user_id": 333698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca080b4ef1c6cb4df9bc123d3b3af61?s=128&d=identicon&r=PG", "display_name": "psmears", "link": "https://stackoverflow.com/users/333698/psmears"}, "edited": false, "score": 0, "creation_date": 1428499617, "post_id": 29515695, "comment_id": 47187245, "body": "@psmears: you may well be right - I think you get a different answer depending on whether you compile as C or C++ (<code>sizeof(int)</code> for C, <code>sizeof(char)</code> for C++) ?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1428499718, "post_id": 29515695, "comment_id": 47187328, "body": "@RobertWalton please copy and paste your real code instead of typing something out and getting it wrong"}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 1, "creation_date": 1428499833, "post_id": 29515695, "comment_id": 47187426, "body": "@RobertWalton It would help if you specify what platform and compiler you&#39;re using. Your output would be perfectly normal if you&#39;re on a platform with 8 byte doubles, 4 byte longs and 2 byte ints."}, {"owner": {"reputation": 21412, "user_id": 333698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca080b4ef1c6cb4df9bc123d3b3af61?s=128&d=identicon&r=PG", "display_name": "psmears", "link": "https://stackoverflow.com/users/333698/psmears"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1428501980, "post_id": 29515695, "comment_id": 47189161, "body": "@PaulR: Yes, indeed!"}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 3, "creation_date": 1428499625, "post_id": 29515806, "comment_id": 47187252, "body": "The size of <code>int</code> is implementation-defined. It could be <code>2</code> on OP&#39;s system."}, {"owner": {"reputation": 1711, "user_id": 3171693, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/b3f51428576d48dd6bc1a5851faa717a?s=128&d=identicon&r=PG&f=1", "display_name": "Dilip Kumar", "link": "https://stackoverflow.com/users/3171693/dilip-kumar"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1428499782, "post_id": 29515806, "comment_id": 47187370, "body": "@MattMcNabb but it should not vary, right? So it should be either <code>822</code> or <code>844</code>, no way it ca be <code>842</code>, right?"}, {"owner": {"reputation": 1711, "user_id": 3171693, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/b3f51428576d48dd6bc1a5851faa717a?s=128&d=identicon&r=PG&f=1", "display_name": "Dilip Kumar", "link": "https://stackoverflow.com/users/3171693/dilip-kumar"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1428499843, "post_id": 29515806, "comment_id": 47187433, "body": "@MattMcNabb However, added a note about platform dependency. Hope it is ok now?"}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1428499972, "post_id": 29515806, "comment_id": 47187525, "body": "@DilipKumar if you&#39;re on a platform with a 2 byte int, 90000 could be a long of 4 bytes."}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 0, "creation_date": 1428500037, "post_id": 29515806, "comment_id": 47187572, "body": "@DilipKumar it can be 842. 90000 doesn&#39;t fit in a 16 bit type, so if int is a 16 bit type, then 90000 will be a long, which may be twice as big as an int."}, {"owner": {"reputation": 1711, "user_id": 3171693, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/b3f51428576d48dd6bc1a5851faa717a?s=128&d=identicon&r=PG&f=1", "display_name": "Dilip Kumar", "link": "https://stackoverflow.com/users/3171693/dilip-kumar"}, "reply_to_user": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 0, "creation_date": 1428500068, "post_id": 29515806, "comment_id": 47187595, "body": "@WernerHenze no, it&#39;s not."}, {"owner": {"reputation": 1711, "user_id": 3171693, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/b3f51428576d48dd6bc1a5851faa717a?s=128&d=identicon&r=PG&f=1", "display_name": "Dilip Kumar", "link": "https://stackoverflow.com/users/3171693/dilip-kumar"}, "reply_to_user": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1428500101, "post_id": 29515806, "comment_id": 47187619, "body": "@nos you&#39;re right, that&#39;s why i was explicit in mentioning <code>assuming your platfrom is 32-bit</code>"}, {"owner": {"reputation": 1711, "user_id": 3171693, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/b3f51428576d48dd6bc1a5851faa717a?s=128&d=identicon&r=PG&f=1", "display_name": "Dilip Kumar", "link": "https://stackoverflow.com/users/3171693/dilip-kumar"}, "reply_to_user": {"reputation": 5511, "user_id": 4516316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBirF.jpg?s=128&g=1", "display_name": "Arun A S", "link": "https://stackoverflow.com/users/4516316/arun-a-s"}, "edited": false, "score": 0, "creation_date": 1428500524, "post_id": 29515806, "comment_id": 47187952, "body": "@ArunA.S IMO, the question is tagged <code>C</code>, so let&#39;s concentrate on <code>c</code> compilers only. BTW, it&#39;s not a good idea to compile <code>c</code> code with <code>c++</code> compiler and vice versa. :-)"}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1428501402, "post_id": 29515806, "comment_id": 47188660, "body": "As I noted in my <a href=\"http://stackoverflow.com/questions/29515695/how-and-is-the-output-of-my-code-is-842#comment47186773_29515695\">comment above</a> using <code>%d</code> is incorrect and leads to undefined behavior."}, {"owner": {"reputation": 1711, "user_id": 3171693, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/b3f51428576d48dd6bc1a5851faa717a?s=128&d=identicon&r=PG&f=1", "display_name": "Dilip Kumar", "link": "https://stackoverflow.com/users/3171693/dilip-kumar"}, "reply_to_user": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1428501445, "post_id": 29515806, "comment_id": 47188689, "body": "@ShafikYaghmour Thank you. I somehow missed that part. Will update accordingly."}], "tags": [], "owner": {"reputation": 1711, "user_id": 3171693, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/b3f51428576d48dd6bc1a5851faa717a?s=128&d=identicon&r=PG&f=1", "display_name": "Dilip Kumar", "link": "https://stackoverflow.com/users/3171693/dilip-kumar"}, "is_accepted": true, "score": 5, "last_activity_date": 1428501471, "last_edit_date": 1428501471, "creation_date": 1428499136, "answer_id": 29515806, "question_id": 29515695, "link": "https://stackoverflow.com/questions/29515695/how-and-is-the-output-of-my-code-is-842/29515806#29515806", "title": "How and is the output of my code is 842?", "body": "<p>First of all syntax error in your code</p>\n\n<pre><code>printf(\"%d\\t\";sizeof('a')); \n</code></pre>\n\n<p>change this to </p>\n\n<pre><code>printf(\"%zu\\t\",sizeof('a'));   //note the change in format specifier also\n             ^\n             |\n            see here\n</code></pre>\n\n<p>Then, <sup>assuming your platfrom is 32-bit</sup></p>\n\n<ul>\n<li><code>sizeof(6.5)</code> == <code>sizeof(double)</code> == 8</li>\n<li><code>sizeof(90000)</code> == <code>sizeof(int)</code> == 4</li>\n<li><code>sizeof('a')</code> == <code>sizeof(int)</code> == 4</li>\n</ul>\n\n<p>To clarify, <code>a</code> represents a <em>value</em> of 97 which defaults to <code>int</code>. so, <code>sizeof('a')</code> should give a value of 4, not 2 or 1.</p>\n\n<hr>\n\n<p>Edit:</p>\n\n<p>To add, you will get an output of <code>8  4  2</code>, if, in 16-bit arch</p>\n\n<ul>\n<li><code>sizeof(6.5)</code> == <code>sizeof(double)</code> == 8</li>\n<li><code>sizeof(90000)</code> == <code>sizeof(long)</code> == 4</li>\n<li><code>sizeof('a')</code> == <code>sizeof(int)</code> == 2</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 1711, "user_id": 3171693, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/b3f51428576d48dd6bc1a5851faa717a?s=128&d=identicon&r=PG&f=1", "display_name": "Dilip Kumar", "link": "https://stackoverflow.com/users/3171693/dilip-kumar"}, "edited": false, "score": 0, "creation_date": 1428499219, "post_id": 29515833, "comment_id": 47186954, "body": "why not 8 4 4 ?? as it stands, <code>&#39;a&#39;</code> == 97 == <code>int</code>"}, {"owner": {"reputation": 1794, "user_id": 1135950, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b1cf007709e46bbd037f204a43c51fa4?s=128&d=identicon&r=PG", "display_name": "yonutix", "link": "https://stackoverflow.com/users/1135950/yonutix"}, "edited": false, "score": 0, "creation_date": 1428499308, "post_id": 29515833, "comment_id": 47187023, "body": "Indeed the size of a char should be 1, it is curious that he&#39;s output is different"}, {"owner": {"reputation": 1711, "user_id": 3171693, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/b3f51428576d48dd6bc1a5851faa717a?s=128&d=identicon&r=PG&f=1", "display_name": "Dilip Kumar", "link": "https://stackoverflow.com/users/3171693/dilip-kumar"}, "reply_to_user": {"reputation": 1794, "user_id": 1135950, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b1cf007709e46bbd037f204a43c51fa4?s=128&d=identicon&r=PG", "display_name": "yonutix", "link": "https://stackoverflow.com/users/1135950/yonutix"}, "edited": false, "score": 0, "creation_date": 1428499354, "post_id": 29515833, "comment_id": 47187065, "body": "@CosminMihai nope. it&#39;s not a <code>char</code>."}, {"owner": {"reputation": 1711, "user_id": 3171693, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/b3f51428576d48dd6bc1a5851faa717a?s=128&d=identicon&r=PG&f=1", "display_name": "Dilip Kumar", "link": "https://stackoverflow.com/users/3171693/dilip-kumar"}, "edited": false, "score": 1, "creation_date": 1428499512, "post_id": 29515833, "comment_id": 47187176, "body": "<code>may consider</code>...can you please elaborate?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1428499555, "post_id": 29515833, "comment_id": 47187207, "body": "<code>&#39;a&#39;</code> is an <code>int</code>, there is no option for the compiler."}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 3, "creation_date": 1428499634, "post_id": 29515833, "comment_id": 47187259, "body": "<code>&quot;The compiler may consider &#39;a&#39; as a char, int or long. &quot;</code>  -&gt; No it may not. It&#39;s an int, which is 4 in your case , though there&#39;s platforms where an int is not 4 bytes too. (Just make sure the code is compiled with a C compiler, the output would be different in a C++ compiler)."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1428499664, "post_id": 29515833, "comment_id": 47187281, "body": "It is <code>90000</code>, not <code>9000</code>. This may either be <code>int</code> or <code>long</code> depending on the implementation."}, {"owner": {"reputation": 5511, "user_id": 4516316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBirF.jpg?s=128&g=1", "display_name": "Arun A S", "link": "https://stackoverflow.com/users/4516316/arun-a-s"}, "reply_to_user": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1428499783, "post_id": 29515833, "comment_id": 47187372, "body": "@nos , you are correct. I was on a c++ compiler so it gave me 1. When I tried it on a C compiler, it gave me 4."}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 0, "creation_date": 1428499793, "post_id": 29515833, "comment_id": 47187389, "body": "<code>6.5</code> is a double, not a float."}], "tags": [], "owner": {"reputation": 5511, "user_id": 4516316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBirF.jpg?s=128&g=1", "display_name": "Arun A S", "link": "https://stackoverflow.com/users/4516316/arun-a-s"}, "is_accepted": false, "score": -1, "last_activity_date": 1428501395, "last_edit_date": 1428501395, "creation_date": 1428499186, "answer_id": 29515833, "question_id": 29515695, "link": "https://stackoverflow.com/questions/29515695/how-and-is-the-output-of-my-code-is-842/29515833#29515833", "title": "How and is the output of my code is 842?", "body": "<p>If you're on a 32 bit compiler</p>\n\n<pre><code>printf(\"%d\\t\",sizeof(6.5));\n</code></pre>\n\n<p><code>6.5</code> is a double, so <code>sizeof(double)</code> gives <code>8</code>.</p>\n\n<pre><code>printf(\"%d\\t\",sizeof(90000));\n</code></pre>\n\n<p><code>90000</code> is an int ( or a long ), so <code>sizeof(int)</code> gives <code>4</code>.</p>\n\n<pre><code>printf(\"%d\\t\";sizeof('a'));\n             ^\n             you left a semicolon here, change it to a comma\n</code></pre>\n\n<p><code>'a'</code> is converted to int, so <code>sizeof(int)</code> gives <code>4</code>.</p>\n\n<p>So the actual output is </p>\n\n<pre><code>8     4      4\n</code></pre>\n\n<p><a href=\"http://ideone.com/UXHOvD\" rel=\"nofollow\">ideone link</a></p>\n\n<p>But , if you're on a 16 bit compiler, you will get</p>\n\n<p><code>sizeof(6.5)</code> = <code>sizeof(double)</code> = <code>8</code><br>\n<code>sizeof(90000)</code> = <code>sizeof(long)</code> = <code>4</code><br>\n<code>sizeof('a')</code> = <code>sizeof(int)</code> = <code>2</code>  </p>\n\n<p>So that would explain your output.</p>\n"}], "owner": {"reputation": 33, "user_id": 4763970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/509ff5dfdd3020e8f574acde47b2c707?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Walton", "link": "https://stackoverflow.com/users/4763970/robert-walton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 1, "accepted_answer_id": 29515806, "answer_count": 2, "score": -1, "last_activity_date": 1428501471, "creation_date": 1428498844, "last_edit_date": 1428501281, "question_id": 29515695, "link": "https://stackoverflow.com/questions/29515695/how-and-is-the-output-of-my-code-is-842", "title": "How and is the output of my code is 842?", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nint main(){\nprintf(\"%d\\t\",sizeof(6.5));\nprintf(\"%d\\t\",sizeof(90000));\nprintf(\"%d\\t\",sizeof('a'));\n\nreturn 0;\n}\n</code></pre>\n\n<p>When I'm compiling my code, the output will be: \"842\".\nCan somebody explain why I get this output?</p>\n"}, {"tags": ["c", "strtok"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1428498802, "post_id": 29515596, "comment_id": 47186668, "body": "This has to do with multithreading, not much related to successive calls from same thread."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1428498808, "post_id": 29515596, "comment_id": 47186673, "body": "There is no need that the must be called until it returns NULL."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1428499284, "post_id": 29515596, "comment_id": 47187004, "body": "E.g &quot;A\\tB,C,D\\tE&quot;, You will not be able to cut out to continue the third field if you use the strtok is to cut out the token of the second field with comma when you have a cut out of the token in the tab."}], "answers": [{"comments": [{"owner": {"reputation": 109324, "user_id": 21926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6e61d47f9a6ec0a7a286835e51f3332?s=128&d=identicon&r=PG", "display_name": "Sean Bright", "link": "https://stackoverflow.com/users/21926/sean-bright"}, "edited": false, "score": 0, "creation_date": 1428498885, "post_id": 29515685, "comment_id": 47186723, "body": "But obviously you will want to put a space after that comma, otherwise it won&#39;t compile..."}], "tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 1, "last_activity_date": 1428498904, "last_edit_date": 1428498904, "creation_date": 1428498827, "answer_id": 29515685, "question_id": 29515596, "link": "https://stackoverflow.com/questions/29515596/strtok-how-to-finish-parsing/29515685#29515685", "title": "strtok. How to finish parsing", "body": "<blockquote>\n  <p>Must I continue call strtok(null,) to finish or I can call\n  strtok(string2,)?</p>\n</blockquote>\n\n<p>If you just need first token fetch it and continue using it no need to call <code>strtok(NULL,\"&lt;delimiter&gt;\")</code> after fetching the first token. Since strtok() uses internal state and if you wish to break the same string into multiple tokens then you need to pass <code>NULL</code> after passing the actual string during the first time.</p>\n\n<p>The initial call should be </p>\n\n<pre><code>strtok(string2,\"&lt;delimiter&gt;\");\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3642, "user_id": 3371101, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eeb77c0b3ce0a8041fa92a4fcd5af850?s=128&d=identicon&r=PG&f=1", "display_name": "codingEnthusiast", "link": "https://stackoverflow.com/users/3371101/codingenthusiast"}, "is_accepted": false, "score": 1, "last_activity_date": 1428498901, "creation_date": 1428498901, "answer_id": 29515713, "question_id": 29515596, "link": "https://stackoverflow.com/questions/29515596/strtok-how-to-finish-parsing/29515713#29515713", "title": "strtok. How to finish parsing", "body": "<p>If you are using a program without successive <code>strtok</code> calls between different threads you can just get the first token as you want to, and then continue using <code>strtok</code> on other strings without a problem.</p>\n"}, {"tags": [], "owner": {"reputation": 3116, "user_id": 2498790, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/991601e5d41d9d84ab7e196382ea8108?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/2498790/alex"}, "is_accepted": false, "score": 0, "last_activity_date": 1428498963, "creation_date": 1428498963, "answer_id": 29515739, "question_id": 29515596, "link": "https://stackoverflow.com/questions/29515596/strtok-how-to-finish-parsing/29515739#29515739", "title": "strtok. How to finish parsing", "body": "<p><code>NULL</code> must be used from 2nd and up, <code>string2</code> would begin a new sequence. If you need only first <em>token</em> call it just once.</p>\n\n<p>See  <a href=\"http://linux.die.net/man/3/strtok\" rel=\"nofollow\">man strtok</a>.</p>\n\n<p>If you have more threads calling <code>strtok</code> the last call to <code>strtok</code> <em>win</em> making the previous invalid (use <code>strtok_r</code>).</p>\n\n<p>Also, if you need only one token, may be you can take a look to <code>strsep</code> (<a href=\"http://linux.die.net/man/3/strsep\" rel=\"nofollow\">man</a>)</p>\n"}], "owner": {"reputation": 9, "user_id": 4764071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67cd86e8a0ddb913c7002b5b4be91073?s=128&d=identicon&r=PG&f=1", "display_name": "john dante", "link": "https://stackoverflow.com/users/4764071/john-dante"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1428500034, "creation_date": 1428498614, "last_edit_date": 1428500034, "question_id": 29515596, "link": "https://stackoverflow.com/questions/29515596/strtok-how-to-finish-parsing", "title": "strtok. How to finish parsing", "body": "<p>On page <a href=\"https://msdn.microsoft.com/en-us/library/2c8d19sb.aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/2c8d19sb.aspx</a> there is text that I must to finish parsing of previous string before to parse next:</p>\n\n<blockquote>\n  <p>Note </p>\n  \n  <p>Each function uses a thread-local static variable for parsing the\n  string into tokens. Therefore, multiple threads can simultaneously\n  call these functions without undesirable effects. However, within a\n  single thread, interleaving calls to one of these functions is highly\n  likely to produce data corruption and inaccurate results. When parsing\n  different strings, finish parsing one string before starting to parse\n  the next. Also, be aware of the potential for danger when calling one\n  of these functions from within a loop where another function is\n  called. If the other function ends up using one of these functions, an\n  interleaved sequence of calls will result, triggering data corruption.</p>\n</blockquote>\n\n<p>What does that mean? For example I need only first token. Must I continue call <code>strtok(null, )</code> to finish or I can call <code>strtok(string2, )</code>?</p>\n"}, {"tags": ["c", "abstraction"], "answers": [{"tags": [], "owner": {"reputation": 27904, "user_id": 173677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8fe496625f910b5f94e8ebd9870408b4?s=128&d=identicon&r=PG", "display_name": "Vladislav Rastrusny", "link": "https://stackoverflow.com/users/173677/vladislav-rastrusny"}, "is_accepted": false, "score": 0, "last_activity_date": 1429372841, "creation_date": 1429372841, "answer_id": 29719600, "question_id": 29515562, "link": "https://stackoverflow.com/questions/29515562/abstraction-layers-os-data-types/29719600#29719600", "title": "abstraction layers (OS, data types)", "body": "<blockquote>\n  <p>Now, my question is about data types which can be different across\n  hardware platforms, are those also maintained by PAL, or this is\n  responsibility of another abstractation layer, e.g. HAL?</p>\n</blockquote>\n\n<p>I do not think we have a strict definition about what PAL is. So, it's up to the programmer to decide where to include type definition functions.</p>\n\n<p>If there are some type operations, that are not by some reason handled by a compiler and the standard library, then, I think you can by all means include those into PAL as a separate module. Why not?</p>\n"}], "owner": {"reputation": 4740, "user_id": 738154, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f2c009cb225b8ecee8de486630c37225?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/738154/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1429372841, "creation_date": 1428498510, "last_edit_date": 1428581260, "question_id": 29515562, "link": "https://stackoverflow.com/questions/29515562/abstraction-layers-os-data-types", "title": "abstraction layers (OS, data types)", "body": "<p>Normally PAL (Platform Abstraction Layer) attempts to abstract I/O, synchronization primitives, socket calls etc. provided by an underlying operating system.</p>\n\n<p>Now, my question is about data types which can be different across hardware platforms, are those also maintained by PAL, or this is responsibility of another abstractation layer, e.g. HAL?</p>\n\n<p>For instance, the same OS may be running on two different CPUs with 16-bit or 32-bit ints.</p>\n\n<p>I understand that data types are determined by compilers, but often we need to have 'standard' names of types, e.g. pal_int16.</p>\n\n<p>How can this be handled correctly from the point of view of abstraction layers?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c", "hex", "md5", "scanf"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1428498211, "post_id": 29515313, "comment_id": 47186262, "body": "did you try <code>sscanf(&amp;hash[0], &quot;%8x&quot;, &amp;parts[0]);</code> and on?"}, {"owner": {"reputation": 1339, "user_id": 2419822, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/DWBfd.png?s=128&g=1", "display_name": "Bakus123", "link": "https://stackoverflow.com/users/2419822/bakus123"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1428498414, "post_id": 29515313, "comment_id": 47186392, "body": "Thank&#39;s mate. It works! You can write post and I will accept it..."}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 1, "last_activity_date": 1428498571, "last_edit_date": 1428498571, "creation_date": 1428497976, "answer_id": 29515359, "question_id": 29515313, "link": "https://stackoverflow.com/questions/29515313/convert-hash-to-4-hex-numbers/29515359#29515359", "title": "Convert hash to 4 hex numbers", "body": "<p>In your code, you <em>wanted but forgot</em> to <em>limit</em> the input for the HEX value to 8 (in characters). You need to use the field width specifier with the format specifier. You will need something like</p>\n\n<pre><code>sscanf(&amp;hash[0], \"%8x\", &amp;parts[0]);\nsscanf(&amp;hash[8], \"%8x\", &amp;parts[1]);\nsscanf(&amp;hash[16], \"%8x\", &amp;parts[2]);\nsscanf(&amp;hash[24], \"%8x\", &amp;parts[3]);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 4117653, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kGmNS.png?s=128&g=1", "display_name": "ultrasonic", "link": "https://stackoverflow.com/users/4117653/ultrasonic"}, "is_accepted": false, "score": 1, "last_activity_date": 1428498591, "creation_date": 1428498591, "answer_id": 29515590, "question_id": 29515313, "link": "https://stackoverflow.com/questions/29515313/convert-hash-to-4-hex-numbers/29515590#29515590", "title": "Convert hash to 4 hex numbers", "body": "<p>In your code, you are trying to tell sscanf() where to start parsing the string (stored in the variable named \"hash\"), but you aren't telling sscanf() where it should stop parsing it. Try inserting whitespace characters into \"hash\" where you want the 4 numbers to be divided, first, and then your code may work. Also, I would write \"&amp;(hash[0])\" instead of \"&amp;hash[0]\" because I don't want to clutter my memory banks with trivia such as the operator precedence rules for C - easier just to use parentheses to force what I want.</p>\n"}], "owner": {"reputation": 1339, "user_id": 2419822, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/DWBfd.png?s=128&g=1", "display_name": "Bakus123", "link": "https://stackoverflow.com/users/2419822/bakus123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 425, "favorite_count": 0, "accepted_answer_id": 29515359, "answer_count": 2, "score": 0, "last_activity_date": 1428498591, "creation_date": 1428497875, "question_id": 29515313, "link": "https://stackoverflow.com/questions/29515313/convert-hash-to-4-hex-numbers", "title": "Convert hash to 4 hex numbers", "body": "<p>I would like to convert my MD5 hash to 4 hex numbers. What's wrong in my code?</p>\n\n<pre><code>//hash = 8ce4b16b22b58894aa86c421e8759df3\nchar *hash = argv[1];\nunsigned int parts[4];\n\nsscanf(&amp;hash[0], \"%x\", &amp;parts[0]);\nsscanf(&amp;hash[8], \"%x\", &amp;parts[1]);\nsscanf(&amp;hash[16], \"%x\", &amp;parts[2]);\nsscanf(&amp;hash[24], \"%x\", &amp;parts[3]);\n\nprintf(\"Part[0]: %x\\n\", parts[0]);\nprintf(\"Part[1]: %x\\n\", parts[1]);\nprintf(\"Part[2]: %x\\n\", parts[2]);\nprintf(\"Part[3]: %x\\n\", parts[3]);\n</code></pre>\n"}, {"tags": ["android", "c", "android-ndk"], "comments": [{"owner": {"reputation": 5277, "user_id": 4745527, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mVYxV.png?s=128&g=1", "display_name": "Aracthor", "link": "https://stackoverflow.com/users/4745527/aracthor"}, "edited": false, "score": 1, "creation_date": 1428497980, "post_id": 29514951, "comment_id": 47186088, "body": "What was 0 ? The close argument, the return value, or both ? I&#39;m not used to code with Android, but if you closed something that you didn&#39;t open yourself, as 0 (wich is the first thing that you program opened), bad things shall happen..."}, {"owner": {"reputation": 5277, "user_id": 4745527, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mVYxV.png?s=128&g=1", "display_name": "Aracthor", "link": "https://stackoverflow.com/users/4745527/aracthor"}, "edited": false, "score": 0, "creation_date": 1428502019, "post_id": 29514951, "comment_id": 47189193, "body": "Could you explain why you tried to close cxt-&gt;sysfs.dir_fd ? It looks like it was something important : OpenGL probably needed that thing for rendering."}], "answers": [{"comments": [{"owner": {"reputation": 38430, "user_id": 429063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd38783123814dee889d28c991e56fb?s=128&d=identicon&r=PG", "display_name": "Chris Stratton", "link": "https://stackoverflow.com/users/429063/chris-stratton"}, "reply_to_user": {"reputation": 2152, "user_id": 3478155, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/24c1f942cac00e4715ebcbfc2a6291b4?s=128&d=identicon&r=PG&f=1", "display_name": "ilw", "link": "https://stackoverflow.com/users/3478155/ilw"}, "edited": false, "score": 0, "creation_date": 1428504922, "post_id": 29518022, "comment_id": 47191435, "body": "@Andreyua - whatever it is you are trying to do, you are going about it wrong.  Don&#39;t try to close that, at least not in the middle of your program."}, {"owner": {"reputation": 5277, "user_id": 4745527, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mVYxV.png?s=128&g=1", "display_name": "Aracthor", "link": "https://stackoverflow.com/users/4745527/aracthor"}, "reply_to_user": {"reputation": 2152, "user_id": 3478155, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/24c1f942cac00e4715ebcbfc2a6291b4?s=128&d=identicon&r=PG&f=1", "display_name": "ilw", "link": "https://stackoverflow.com/users/3478155/ilw"}, "edited": false, "score": 0, "creation_date": 1428505001, "post_id": 29518022, "comment_id": 47191501, "body": "@Andreyua - In most of cases, not only OpenGL, when you start an application with already some fd opened in your API, don&#39;t close them until the end of the application. If later you create your own fd by opening something else, just be sure to make them differents from those that were here before you."}, {"owner": {"reputation": 5277, "user_id": 4745527, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mVYxV.png?s=128&g=1", "display_name": "Aracthor", "link": "https://stackoverflow.com/users/4745527/aracthor"}, "reply_to_user": {"reputation": 2152, "user_id": 3478155, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/24c1f942cac00e4715ebcbfc2a6291b4?s=128&d=identicon&r=PG&f=1", "display_name": "ilw", "link": "https://stackoverflow.com/users/3478155/ilw"}, "edited": false, "score": 0, "creation_date": 1428505344, "post_id": 29518022, "comment_id": 47191774, "body": "@Andreyua - There is no real &quot;check&quot; possible by code here. It is the developer&#39;s job to be careful to not close important ressources. I suggest you to spend more time reading your API documentation : this kind of things should be warned about."}, {"owner": {"reputation": 5277, "user_id": 4745527, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mVYxV.png?s=128&g=1", "display_name": "Aracthor", "link": "https://stackoverflow.com/users/4745527/aracthor"}, "reply_to_user": {"reputation": 2152, "user_id": 3478155, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/24c1f942cac00e4715ebcbfc2a6291b4?s=128&d=identicon&r=PG&f=1", "display_name": "ilw", "link": "https://stackoverflow.com/users/3478155/ilw"}, "edited": false, "score": 0, "creation_date": 1428563075, "post_id": 29518022, "comment_id": 47217060, "body": "@Andreyua - I don&#39;t understand why you are so obsessed by this fd... You don&#39;t have to change it - that could even be dangerous if OpenGL try to re-use it after. The only thing to do is to not close except in your deinit function."}], "tags": [], "owner": {"reputation": 5277, "user_id": 4745527, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mVYxV.png?s=128&g=1", "display_name": "Aracthor", "link": "https://stackoverflow.com/users/4745527/aracthor"}, "is_accepted": false, "score": 4, "last_activity_date": 1428504491, "creation_date": 1428504491, "answer_id": 29518022, "question_id": 29514951, "link": "https://stackoverflow.com/questions/29514951/ndk-c-fatal-signal-6-when-used-function-int-closeint-fd/29518022#29518022", "title": "NDK, C: Fatal signal 6 when used function - int close(int fd);", "body": "<p>You closed a primary ressource for OpenGL. You have to not close this ressource except if you are closing your application.</p>\n\n<p>In all examples that you put in your commentaries, close was called only at the application end. You should do the same.</p>\n"}], "owner": {"reputation": 2152, "user_id": 3478155, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/24c1f942cac00e4715ebcbfc2a6291b4?s=128&d=identicon&r=PG&f=1", "display_name": "ilw", "link": "https://stackoverflow.com/users/3478155/ilw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 418, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1428504491, "creation_date": 1428496973, "question_id": 29514951, "link": "https://stackoverflow.com/questions/29514951/ndk-c-fatal-signal-6-when-used-function-int-closeint-fd", "title": "NDK, C: Fatal signal 6 when used function - int close(int fd);", "body": "<p>Any variants , why after using function close(cxt->sysfs.dir_fd) (in this case cxt->sysfs.dir_fd = 0) I get error </p>\n\n<pre><code>04-08 13:34:57.496    4766-4782/pro.org A/OpenGLRenderer\ufe55 Failed to create context, error = EGL_BAD_ALLOC\n04-08 13:34:57.496    4766-4782/pro.org A/libc\ufe55 Fatal signal 6 (SIGABRT), code -6 in tid 4782 (RenderThread)\n</code></pre>\n\n<p>close(cxt->sysfs.dir_fd) also = 0 , but app was crashed...\nWhat I can do that prevent error, any debug ? In what direction to look?\nThank you </p>\n"}, {"tags": ["c", "arrays", "memory-management"], "answers": [{"comments": [{"owner": {"reputation": 14748, "user_id": 132728, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/3e932264fb24dfdfd63dc467bfb1e957?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/132728/max"}, "edited": false, "score": 0, "creation_date": 1428495420, "post_id": 29514322, "comment_id": 47184244, "body": "The point of my program is that I want to learn how to use dynamic memory allocation, I know it probably looks a bit weird/superfluous. ;)"}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 1, "last_activity_date": 1428495506, "last_edit_date": 1428495506, "creation_date": 1428495281, "answer_id": 29514322, "question_id": 29514268, "link": "https://stackoverflow.com/questions/29514268/double-free-when-freeing-structure-in-array/29514322#29514322", "title": "double free when freeing structure in array", "body": "<p>You're losing the <code>malloc()</code>ed memory, since you copy it into your array of actual structures (<code>persons</code>). Your code doesn't need to use <code>malloc()</code>, and certainly not <code>free()</code> like it does.</p>\n\n<p>It would make more sense to have an array of pointers:</p>\n\n<pre><code>Person *persons[10];\n</code></pre>\n\n<p>Then have the function that calls <code>malloc()</code> return the newly allocated memory, so you can do <code>persons[line_num] = person_create(line_num, 2, line);</code>. <em>Then</em> you need to go through and <code>free()</code> them all.</p>\n"}, {"comments": [{"owner": {"reputation": 14748, "user_id": 132728, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/3e932264fb24dfdfd63dc467bfb1e957?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/132728/max"}, "edited": false, "score": 0, "creation_date": 1428495506, "post_id": 29514386, "comment_id": 47184304, "body": "OK, I agree. Its of course only a dummy program, because I want to learn how to work with dynamic memory allocation, like who owns the memory and who is responsible for freeing \u2026 I take your point though and totally agree."}, {"owner": {"reputation": 14748, "user_id": 132728, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/3e932264fb24dfdfd63dc467bfb1e957?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/132728/max"}, "edited": false, "score": 0, "creation_date": 1428496256, "post_id": 29514386, "comment_id": 47184862, "body": "Thank you for also pointing out the other flaws. I have a lot to learn."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 2, "last_activity_date": 1428495628, "last_edit_date": 1428495628, "creation_date": 1428495430, "answer_id": 29514386, "question_id": 29514268, "link": "https://stackoverflow.com/questions/29514268/double-free-when-freeing-structure-in-array/29514386#29514386", "title": "double free when freeing structure in array", "body": "<p>Your program has some serious undefined behavior: once <code>line_num</code> gets above zero, you are writing into memory <em>outside</em> <code>persons[]</code> array. You need to allocate enough elements, and also make it an array of pointers:</p>\n\n<pre><code>Person *persons[100]; // or some other MAX\n</code></pre>\n\n<p>Once you make <code>persons[]</code> an array of pointers, it becomes clear why <code>free(&amp;persons[i])</code> and <code>persons[line_num] = *person</code> are incorrect (the compiler should issue a warning for the assignment).</p>\n\n<p>In addition, this check of <code>malloc</code> result is incorrect:</p>\n\n<pre><code>if (person == NULL) {\n    return 0;\n}\n</code></pre>\n\n<p>You should check <code>*person</code>, not <code>person</code>, because <code>person</code> is a double pointer.</p>\n"}, {"comments": [{"owner": {"reputation": 14748, "user_id": 132728, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/3e932264fb24dfdfd63dc467bfb1e957?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/132728/max"}, "edited": false, "score": 0, "creation_date": 1428495669, "post_id": 29514396, "comment_id": 47184429, "body": "I think I understand better now, can you please expand a bit more about the &quot;out of bound memory access&quot;?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 14748, "user_id": 132728, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/3e932264fb24dfdfd63dc467bfb1e957?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/132728/max"}, "edited": false, "score": 0, "creation_date": 1428495777, "post_id": 29514396, "comment_id": 47184512, "body": "@Max Out of bound access means, you&#39;re trying to access memory which is not allocated. To simpify, you cannot access <code>persons[1]</code>, as c array index is <code>0</code> based. :-)"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1428495455, "creation_date": 1428495455, "answer_id": 29514396, "question_id": 29514268, "link": "https://stackoverflow.com/questions/29514268/double-free-when-freeing-structure-in-array/29514396#29514396", "title": "double free when freeing structure in array", "body": "<p>Your code shows undefined behaviour. You've decalred</p>\n\n<pre><code> Person persons[1] = {};\n</code></pre>\n\n<p>and later, you're using</p>\n\n<pre><code>persons[line_num] = *person;\n</code></pre>\n\n<p>which causes out of bound memory access, which in turn invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behaviour</a>.</p>\n"}], "owner": {"reputation": 14748, "user_id": 132728, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/3e932264fb24dfdfd63dc467bfb1e957?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/132728/max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 327, "favorite_count": 0, "accepted_answer_id": 29514386, "answer_count": 3, "score": 1, "last_activity_date": 1428503938, "creation_date": 1428495132, "last_edit_date": 1428503938, "question_id": 29514268, "link": "https://stackoverflow.com/questions/29514268/double-free-when-freeing-structure-in-array", "title": "double free when freeing structure in array", "body": "<p>I'm reading a file line by line (the file only contains one line for testing) and I'm creating a <code>struct</code> for every line, and adding that <code>struct</code> to a predefined array.</p>\n\n<pre><code>#define _GNU_SOURCE\n\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;assert.h&gt;\n\n\ntypedef struct {\n    int age;\n    int weight;\n    char *name;\n} Person;\n\n\nint person_create(Person **person, unsigned int age, unsigned int weight, char *name)\n{   \n    *person = malloc(sizeof(Person));\n\n    if (person == NULL) {\n        return 0;\n    }\n\n    return 1;\n}\n\nvoid person_free(Person *person)\n{\n    free(person);\n\n    return;\n}\n\nint main(void)\n{\n    FILE *input_file = NULL;\n\n    input_file = fopen(\"names.txt\", \"r\");\n    assert(input_file != NULL);\n\n    char *line = NULL;\n    size_t _ = 0;\n    ssize_t line_len = 0;\n    Person persons[1] = {};\n    int line_num = 0;\n\n    while ((line_len = getline(&amp;line, &amp;_, input_file)) != -1) {\n        if (line[line_len - 1] == '\\n') {\n            line[line_len - 1] = '\\0';  \n        }\n\n        Person *person = NULL;\n        person_create(&amp;person, line_num, 2, line);\n\n        persons[line_num] = *person;\n\n        line_num++;        \n    }\n\n    free(line);\n\n    printf(\"lines read %d\\n\", line_num);\n\n    for (int i = 0; i &lt; 1; i++) {\n        person_free(&amp;persons[i]);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>I stripped the program down as far as I could, but upon free'ing the array entry, I get an error</p>\n\n<pre><code>*** Error in `./prog': double free or corruption (out): 0x00007fff7ace9f10 ***\nAborted (core dumped)\n</code></pre>\n\n<p>If I leave out the call to <code>free_person</code> then <code>valgrind</code> reports lost memory.</p>\n\n<p>I'm pretty sure it has to do with how I assign the person for each line to the array</p>\n\n<pre><code>    Person *person = NULL;\n    person_create(&amp;person, line_num, 2, line);\n\n    persons[line_num] = *person;\n</code></pre>\n\n<p>But I can't seem to understand what exactly is going wrong.</p>\n"}, {"tags": ["c", "file", "fopen", "eof", "fclose"], "comments": [{"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1428494057, "post_id": 29513760, "comment_id": 47183331, "body": "Use <code>==</code> for comparision, wrap <code>c = fgetc(filepointer)</code> in parenthesis and remove the ampersand from the first <code>scanf</code>"}], "answers": [{"tags": [], "owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "is_accepted": false, "score": 1, "last_activity_date": 1428496312, "last_edit_date": 1428496312, "creation_date": 1428493911, "answer_id": 29513819, "question_id": 29513760, "link": "https://stackoverflow.com/questions/29513760/program-quits-while-changing-characters/29513819#29513819", "title": "Program quits while changing characters?", "body": "<p>You're getting bitten by operator precedence:</p>\n\n<pre><code>if(c = fgetc(filepointer) != EOF)\n</code></pre>\n\n<p>should be:</p>\n\n<pre><code>if((c = fgetc(filepointer)) != EOF)\n</code></pre>\n\n<p>Note that if you had compiled with warnings enabled (e.g. <code>gcc -Wall ...</code>) the compiler would have helpfully pointed out this mistake:</p>\n\n<pre><code>main.c:19:41: warning: suggest parentheses around assignment used as truth value [-Wparentheses]\n         if(c = fgetc(filepointer) != EOF){\n</code></pre>\n\n<p>You would also have been warned about another mistake:</p>\n\n<pre><code>main.c:23:28: warning: suggest parentheses around assignment used as truth value [-Wparentheses]\n                 if(er = EOF)\n</code></pre>\n\n<p>This line should of course be:</p>\n\n<pre><code>                 if(er == EOF)\n</code></pre>\n\n<p><hr>\nA further problem - you're trying to modify the input file \"in place\" - this is generally a bad idea (any errors typically mean you are left with a corrupted original file). Furthermore, the way the code is currently written it won't do what you want (as you have seen). A better approach would be to write the output to a new file, and then on successful completion you can delete the old file and rename the new file.\n<hr>\nAs a bonus, some pointers on programming style:</p>\n\n<ul>\n<li>avoid globals</li>\n<li>don't use <code>goto</code></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 93, "user_id": 3832385, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9bc532fa63bbbef4466877856cf3881?s=128&d=identicon&r=PG&f=1", "display_name": "nik123", "link": "https://stackoverflow.com/users/3832385/nik123"}, "edited": false, "score": 0, "creation_date": 1428501979, "post_id": 29513892, "comment_id": 47189159, "body": "Thanks,sorry I am use to assembly :)"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 0, "last_activity_date": 1428494399, "last_edit_date": 1428494399, "creation_date": 1428494089, "answer_id": 29513892, "question_id": 29513760, "link": "https://stackoverflow.com/questions/29513760/program-quits-while-changing-characters/29513892#29513892", "title": "Program quits while changing characters?", "body": "<p>Two things.</p>\n\n<p><strong>Point 1.</strong> As per the <code>C</code> <a href=\"http://en.cppreference.com/w/c/language/operator_precedence\" rel=\"nofollow\">operator precedence</a>, in your code</p>\n\n<pre><code>if(c = fgetc(filepointer) != EOF)` \n</code></pre>\n\n<p>translates to</p>\n\n<pre><code>if ( c =  (fgetc(filepointer) != EOF) )`\n</code></pre>\n\n<p>which is not what you want. You should change that to</p>\n\n<pre><code>if((c = fgetc(filepointer)) != EOF)`\n</code></pre>\n\n<p><strong>Point 2.</strong></p>\n\n<pre><code> if(er = EOF)\n</code></pre>\n\n<p><code>=</code> is the assignement operator. To <em>compare</em> values, you need to use eqality operator <code>==</code>. Your code should be </p>\n\n<pre><code>if(er == EOF)\n</code></pre>\n\n<p>Note: If possible, please avoid <code>goto</code>. It is not a very good programming style. Try to make up a function and call that istead.</p>\n"}], "owner": {"reputation": 93, "user_id": 3832385, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9bc532fa63bbbef4466877856cf3881?s=128&d=identicon&r=PG&f=1", "display_name": "nik123", "link": "https://stackoverflow.com/users/3832385/nik123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 29513892, "answer_count": 2, "score": 0, "last_activity_date": 1543853900, "creation_date": 1428493736, "last_edit_date": 1543853900, "question_id": 29513760, "link": "https://stackoverflow.com/questions/29513760/program-quits-while-changing-characters", "title": "Program quits while changing characters?", "body": "<p>I am trying to make a program that converts (\u0110,\u0160,\u010c,\u0106 and \u017d) Serbian(Latin) charecters to (D,S,C,C,Z) so my TV can recnognise them btw. <br>\nNO IT's NOT A ENCODING ERROR, YES MY TV IS RUNNING THE LATEST SOFTWARE.\n<br>\nSo I decided to make this command program that converts characters.<br>\nThe problem is the target file stays unchanged, and it quits after this message:</p>\n\n<pre><code>Po\u010dinje konvertovanje.\n</code></pre>\n\n<p>Why does this happen?\nThe source:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\nchar c;\nchar filename[256];\nint er;\nint main()\n{\n    printf(\"\\nUnesi podatak za prevo\u00f0enje:\");\n    scanf(\"%s\",&amp;filename);\n    FILE* filepointer;\n    filepointer = fopen(filename,\"r+\");\n    if(filepointer == NULL){\n        fclose(filepointer);\n        printf(\"\\nGRE\u0160KA: Nije mogu\u00e6e otvoriti podatak!\");\n    }else{\n        printf(\"\\nUspje\u0161no otvoren podatak.\");\n        printf(\"\\nPo\u00e8inje konvertovanje.\");\n        proccess:\n        if(c = fgetc(filepointer) != EOF){\n            if(c == 0x9A){  // ZA \u0160\n                c = 0x73;\n                er = fputc( c , filepointer );\n                if(er = EOF)\n                    goto error;\n            }else if(c == 0xF0){ //ZA \u0110\n                c = 0x64;\n                er = fputc( c , filepointer );\n                if(er = EOF)\n                    goto error;\n            }else if(c == 0x9E){\n                c = 0x7A;\n                er = fputc( c , filepointer );\n                if(er = EOF)\n                    goto error;\n            }else if(c == 0xE8){\n                c = 0x63;\n                er = fputc( c , filepointer );\n                if(er = EOF)\n                    goto error;\n            }else if(c == 0xE6){\n                c = 0x63;\n                er = fputc( c , filepointer );\n                if(er = EOF)\n                    goto error;\n            }\n            goto proccess;\n        }\n        if((c = fgetc(filepointer) ) != EOF){\n            printf(\"Prijavljen EOF: Podatak se zavr\u0161ava!\");\n            exit(0);\n        }\n    }\n    return 0;\n    error:\n        printf(\"\\nPrijavljen neo\u00e8ekivani EOF,\");\n        printf(\"\\nvjerovatno je neka gre\u0161ka!\");\n        return 1;\n}\n</code></pre>\n\n<p>Platform:\nWindows 7 Home Premium (x64)\n<br>Compiler:\nTiny C Compiler (x64)</p>\n"}, {"tags": ["c", "linux"], "answers": [{"tags": [], "owner": {"reputation": 1785, "user_id": 4680870, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClLL3.png?s=128&g=1", "display_name": "tivn", "link": "https://stackoverflow.com/users/4680870/tivn"}, "is_accepted": true, "score": 0, "last_activity_date": 1428494549, "creation_date": 1428494549, "answer_id": 29514069, "question_id": 29513758, "link": "https://stackoverflow.com/questions/29513758/how-to-read-acct-file/29514069#29514069", "title": "How to read acct file?", "body": "<p>You can use <code>dump-acct</code> command from <code>psacct</code> package.</p>\n"}], "owner": {"reputation": 2318, "user_id": 2689414, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/8e28a4933b4c91357385435ae72bebdb?s=128&d=identicon&r=PG", "display_name": "gangadhars", "link": "https://stackoverflow.com/users/2689414/gangadhars"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 0, "accepted_answer_id": 29514069, "answer_count": 1, "score": 0, "last_activity_date": 1428494549, "creation_date": 1428493723, "question_id": 29513758, "link": "https://stackoverflow.com/questions/29513758/how-to-read-acct-file", "title": "How to read acct file?", "body": "<p>I turned on accounting. But I'm unable to read it. Here is the code</p>\n\n<pre><code>/* my_acct.c */\n#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/acct.h&gt;\n\nint main(int argc, char *argv[])\n{\n    char *file_acct = \"acct_test.txt\";\n    int choice= 0;\n    if(argc &gt; 1)\n        choice = strcmp(argv[1], \"ON\") ? 0 : 1;\n\n    if(choice) {\n        if(acct(file_acct) != 0){     // on success: 0\n                perror(\"acct\");\n        }\n    } else {\n        if(acct(NULL) != 0) {\n                perror(\"acct\");\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>When I run my program <code>my_acct ON</code>, process terminations logging into given file(<code>acct_test.txt</code>). But I'm unable to read the file. It looks like it is writing in binary format.<br>\nHow to read <code>acct_test.txt</code> file? Or I have to change my code?</p>\n"}, {"tags": ["c", "winapi"], "comments": [{"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 2, "creation_date": 1428494285, "post_id": 29513649, "comment_id": 47183459, "body": "Windows uses the <i>painter&#39;s algorithm</i>.  Bottom first.  So your imagined failure mode just doesn&#39;t occur.  Even if the app has a bug and does it the wrong way around then the WS_CLIPCHILDREN style flag still prevents trouble."}], "answers": [{"comments": [{"owner": {"reputation": 52662, "user_id": 243614, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/5gr97.png?s=128&g=1", "display_name": "Sertac Akyuz", "link": "https://stackoverflow.com/users/243614/sertac-akyuz"}, "edited": false, "score": 0, "creation_date": 1504577909, "post_id": 29515557, "comment_id": 79052025, "body": "I came across this while I was looking for documentation backup for an answer. You&#39;ve got it the wrong way around (last sentence), see <a href=\"https://msdn.microsoft.com/en-us/library/dd183426(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/dd183426(v=vs.85).aspx</a> ."}], "tags": [], "owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "is_accepted": true, "score": 3, "last_activity_date": 1504596281, "last_edit_date": 1504596281, "creation_date": 1428498502, "answer_id": 29515557, "question_id": 29513649, "link": "https://stackoverflow.com/questions/29513649/are-child-controls-painted-after-the-parent-window/29515557#29515557", "title": "Are child controls painted after the parent Window?", "body": "<blockquote>\n  <p>Are child controls painted after the parent Window?</p>\n</blockquote>\n\n<p>Yes. </p>\n\n<p>Painting for children with the same parent (siblings) is rather complex. That topics is covered here: <a href=\"https://msdn.microsoft.com/en-us/library/dd183426.aspx\" rel=\"nofollow noreferrer\">MSDN: Child Window Update Region</a>. </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4129935"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 307, "favorite_count": 0, "accepted_answer_id": 29515557, "answer_count": 1, "score": 1, "last_activity_date": 1504596281, "creation_date": 1428493412, "question_id": 29513649, "link": "https://stackoverflow.com/questions/29513649/are-child-controls-painted-after-the-parent-window", "title": "Are child controls painted after the parent Window?", "body": "<p>Say I have the following Window with a Button:</p>\n\n<p><img src=\"https://i.stack.imgur.com/j3zbD.jpg\" alt=\"enter image description here\"></p>\n\n<p>If I minimize and restore the Window, then two <code>WM_PAINT</code> messages will be sent, one for the Window and one for the Button.</p>\n\n<p>The <code>WM_PAINT</code> message for the Window will request that the entire Window to be repainted, and the <code>WM_PAINT</code> message for the Button will request that the Button to be repainted.</p>\n\n<p>What if the Button is repainted first, and then the Window is repainted, wouldn't this means that the painting for the Window will cover the Button and make it invisible? So does that means that the Window is painted before the Button?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1428494178, "post_id": 29513609, "comment_id": 47183408, "body": "It sounds both as if you&#39;re trying to write a web server, and as you&#39;re trying to write a script executed <i>by</i> a web server. Quite confusing, please clarify."}, {"owner": {"reputation": 115, "user_id": 1033042, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/bf9fa479c8a7df3d6a95d41720ce5706?s=128&d=identicon&r=PG", "display_name": "LewisFletch", "link": "https://stackoverflow.com/users/1033042/lewisfletch"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1428494379, "post_id": 29513609, "comment_id": 47183519, "body": "i&#39;m trying to write a script that takes an input of <code>GET &#47;filename.html</code> so yes it is a web server i suppose. but currently as it stands as if i&#39;m already connected to it and on the command line... so i issue GET and a filename and it will load them... hope that makes sense @unwind"}], "owner": {"reputation": 115, "user_id": 1033042, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/bf9fa479c8a7df3d6a95d41720ce5706?s=128&d=identicon&r=PG", "display_name": "LewisFletch", "link": "https://stackoverflow.com/users/1033042/lewisfletch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1428494040, "creation_date": 1428493312, "last_edit_date": 1428494040, "question_id": 29513609, "link": "https://stackoverflow.com/questions/29513609/coding-a-response-to-a-http-get-command-in-c", "title": "coding a response to a HTTP GET command in C", "body": "<p>i'd prefer psuedo code or a logical breakdown of it so that i can write my own code for it myself and learn from it.\ni already have functions for checking local resources (homepage.html for example) and loading a config file that sets variables.</p>\n\n<p>i now need to write a function that</p>\n\n<blockquote>\n  <p>Receives a URI (ie:www.microsoft.com/windows/mypage.html) would be broken up into DOMAIN: www.microsoft.com GET /windows/mypage.html</p>\n  \n  <p>Would read it in as 2 arguments( not sure?)</p>\n  \n  <p>-domain is set in config file not part of input</p>\n</blockquote>\n\n<p><code>&gt;GET</code> is passed as an argument</p>\n\n<p><code>&gt;/windows/mypage.html</code> file or file path is specified</p>\n\n<p>From my understanding i need to do the following...</p>\n\n<ul>\n<li><p>main function is set with argc and *argv[]</p></li>\n<li><p>if argument (ie. \"GET\") = GET then pass second argument (file path)</p></li>\n<li>once argument is passed then open specified file</li>\n<li>if no file is specified and only 1 argument is passed (ie. GET) load a default file that is specified in configuration.</li>\n</ul>\n\n<p>I think i'm on the right track, but any input would be appreciated. </p>\n\n<p>my question is, am i correct in my logic above? </p>\n\n<p>thanks</p>\n"}, {"tags": ["c", "visual-studio", "c99", "cl"], "answers": [{"tags": [], "owner": {"reputation": 16953, "user_id": 2799037, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/2uPVa.png?s=128&g=1", "display_name": "usr1234567", "link": "https://stackoverflow.com/users/2799037/usr1234567"}, "is_accepted": false, "score": 1, "last_activity_date": 1428494252, "last_edit_date": 1428494252, "creation_date": 1428492837, "answer_id": 29513446, "question_id": 29513254, "link": "https://stackoverflow.com/questions/29513254/compiling-c99-in-cl-compiler/29513446#29513446", "title": "Compiling C99 in cl compiler", "body": "<p>No, there is no switch it is always in the same mode. Actually Visual Studio 2013 does not properly support C99. The situation will become better in VS 2015 because the features are needed for C++11 compatibility. But there is no official C99 support.</p>\n\n<p>There is a list of supported C99 library features in VS 2013: <a href=\"http://blogs.msdn.com/b/vcblog/archive/2013/07/19/c99-library-support-in-visual-studio-2013.aspx\" rel=\"nofollow\">http://blogs.msdn.com/b/vcblog/archive/2013/07/19/c99-library-support-in-visual-studio-2013.aspx</a></p>\n"}], "owner": {"reputation": 1, "user_id": 4687927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f3aa7a532960cf4d74e9bfe64b7abff?s=128&d=identicon&r=PG&f=1", "display_name": "vounoo", "link": "https://stackoverflow.com/users/4687927/vounoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1693, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1467314857, "creation_date": 1428492244, "last_edit_date": 1467314857, "question_id": 29513254, "link": "https://stackoverflow.com/questions/29513254/compiling-c99-in-cl-compiler", "title": "Compiling C99 in cl compiler", "body": "<p>I am using the microsoft cl compiler (the one that comes with Visual Studio 2013) and I am looking for a command to use when compiling to tell the compiler to support C99.. Can anyone help me do this?</p>\n"}, {"tags": ["c", "lapack"], "comments": [{"owner": {"reputation": 10206, "user_id": 65678, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tLuGV.jpg?s=128&g=1", "display_name": "gha.st", "link": "https://stackoverflow.com/users/65678/gha-st"}, "edited": false, "score": 2, "creation_date": 1428492281, "post_id": 29513241, "comment_id": 47182202, "body": "The signature of main is <code>int main(int, char**);</code> or <code>int main();</code>"}, {"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1428492303, "post_id": 29513241, "comment_id": 47182223, "body": "If this is C code, why is this question tagged C++?"}, {"owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 1, "creation_date": 1428492465, "post_id": 29513241, "comment_id": 47182320, "body": "Compile with <code>gcc filename.c -o filename.exe -llapacke</code>."}, {"owner": {"reputation": 4085, "user_id": 4185106, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/er5li.png?s=128&g=1", "display_name": "moffeltje", "link": "https://stackoverflow.com/users/4185106/moffeltje"}, "edited": false, "score": 0, "creation_date": 1428492563, "post_id": 29513241, "comment_id": 47182392, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix\">What is an undefined reference/unresolved external symbol error and how do I fix it?</a>"}, {"owner": {"reputation": 5277, "user_id": 4745527, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mVYxV.png?s=128&g=1", "display_name": "Aracthor", "link": "https://stackoverflow.com/users/4745527/aracthor"}, "reply_to_user": {"reputation": 10206, "user_id": 65678, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tLuGV.jpg?s=128&g=1", "display_name": "gha.st", "link": "https://stackoverflow.com/users/65678/gha-st"}, "edited": false, "score": 0, "creation_date": 1428492985, "post_id": 29513241, "comment_id": 47182624, "body": "@gha.st a main signature may be <code>int main(int, const char**);</code> or <code>int main(int, const char* []);</code>. It has no link with this problem."}, {"owner": {"reputation": 10206, "user_id": 65678, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tLuGV.jpg?s=128&g=1", "display_name": "gha.st", "link": "https://stackoverflow.com/users/65678/gha-st"}, "reply_to_user": {"reputation": 5277, "user_id": 4745527, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mVYxV.png?s=128&g=1", "display_name": "Aracthor", "link": "https://stackoverflow.com/users/4745527/aracthor"}, "edited": false, "score": 0, "creation_date": 1428493370, "post_id": 29513241, "comment_id": 47182881, "body": "@Aracthor You have written the <i>same prototype twice</i>. And both are wrong. Nevertheless, it does not cause linker errors in this case, as GCC will discard any type information anyway, and link it only by its name (C does not support overloading after all). This is why my comment was a comment - even under assumption that <code>lapack_int</code> is a <code>typedef</code> for <code>int</code> (and not e.g. <code>long</code>), this triggers implementation defined behavior."}], "answers": [{"tags": [], "owner": {"reputation": 5277, "user_id": 4745527, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mVYxV.png?s=128&g=1", "display_name": "Aracthor", "link": "https://stackoverflow.com/users/4745527/aracthor"}, "is_accepted": false, "score": 1, "last_activity_date": 1428492841, "creation_date": 1428492841, "answer_id": 29513447, "question_id": 29513241, "link": "https://stackoverflow.com/questions/29513241/c-undefined-reference-to-main-collect2-ld-returned-1-exit-status/29513447#29513447", "title": "c - Undefined reference to main - collect2: ld returned 1 exit status", "body": "<p>You are missing a library. rerun GCC adding -llapacke :</p>\n\n<pre><code>gcc filename.c -o filename.exe -llapacke\n</code></pre>\n\n<p>Assuming your library is something like liblapacke.a or liblapacke.so. Else, rerun adding -lNAME, with NAME the name of your lib file without the \"lib\" and the \".a\" or \".so\".</p>\n"}], "owner": {"reputation": 1, "user_id": 4762915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/794e3c3b0208c26a9ab0e8d42f49f277?s=128&d=identicon&r=PG", "display_name": "chandan", "link": "https://stackoverflow.com/users/4762915/chandan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4381, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1428492841, "creation_date": 1428492207, "last_edit_date": 1428492388, "question_id": 29513241, "link": "https://stackoverflow.com/questions/29513241/c-undefined-reference-to-main-collect2-ld-returned-1-exit-status", "title": "c - Undefined reference to main - collect2: ld returned 1 exit status", "body": "<p>I am running following program using command</p>\n\n<pre><code>gcc filename.c -o filename.exe\n</code></pre>\n\n<p>and it shows error </p>\n\n<p>\"AppData/Local/Temp/cc4rF2ac.o:filename.c:(.text+0xd4): undefined reference to LAPACKE_dgels' collect2.exe: error: ld returned 1 exit status\"</p>\n\n<pre><code>    /* Calling DGELS using column-major order */\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;lapacke.h&gt;\n#include &lt;math.h&gt;\n\n\nlapack_int main (int argc, const char * argv[])\n{\n   double a[5*3] = {1,2,3,4,5,1,3,5,2,4,1,4,2,5,3};\n   double b[5*2] = {-10,12,14,16,18,-3,14,12,16,16};\n   lapack_int info,m,n,lda,ldb,nrhs;\n   int i,j;\n\n   m = 5;\n   n = 3;\n   nrhs = 2;\n   lda = 5;\n   ldb = 5;\n\n   info = LAPACKE_dgels(LAPACK_COL_MAJOR,'N',m,n,nrhs,a,lda,b,ldb);\n\n   for(i=0;i&lt;n;i++)\n   {\n      for(j=0;j&lt;nrhs;j++)\n      {\n         printf(\"%lf \",b[i+ldb*j]);\n      }\n      printf(\"\\n\");\n   }\n   return(info);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 5767, "user_id": 27800, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f8d805c02bfa80a79df1381984ac5d3a?s=128&d=identicon&r=PG", "display_name": "Peter Miehle", "link": "https://stackoverflow.com/users/27800/peter-miehle"}, "edited": false, "score": 3, "creation_date": 1428491119, "post_id": 29512830, "comment_id": 47181456, "body": "what is the problem?"}, {"owner": {"reputation": 3923, "user_id": 3640699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NxDM0.jpg?s=128&g=1", "display_name": "Karthikeyan.R.S", "link": "https://stackoverflow.com/users/3640699/karthikeyan-r-s"}, "edited": false, "score": 1, "creation_date": 1428491185, "post_id": 29512830, "comment_id": 47181497, "body": "What is your question??"}, {"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 1, "creation_date": 1428491267, "post_id": 29512830, "comment_id": 47181548, "body": "I think you&#39;ve failed to state an actual question."}, {"owner": {"reputation": 5767, "user_id": 27800, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f8d805c02bfa80a79df1381984ac5d3a?s=128&d=identicon&r=PG", "display_name": "Peter Miehle", "link": "https://stackoverflow.com/users/27800/peter-miehle"}, "edited": false, "score": 0, "creation_date": 1428491332, "post_id": 29512830, "comment_id": 47181589, "body": "have you prooven, that over is bigger than 0 and of reasonable amount?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1428491460, "post_id": 29512830, "comment_id": 47181674, "body": "<code>for(j = 1; j&lt;= ptr1[i]; j++)</code> might  wrong. E.g when <code>i &gt;= score</code>"}, {"owner": {"reputation": 1, "user_id": 4763471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e592b836e07c4861d98608f2f1a577f?s=128&d=identicon&r=PG&f=1", "display_name": "emmie", "link": "https://stackoverflow.com/users/4763471/emmie"}, "edited": false, "score": 0, "creation_date": 1428491497, "post_id": 29512830, "comment_id": 47181698, "body": "i am geting segmentation fault error"}, {"owner": {"reputation": 5767, "user_id": 27800, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f8d805c02bfa80a79df1381984ac5d3a?s=128&d=identicon&r=PG", "display_name": "Peter Miehle", "link": "https://stackoverflow.com/users/27800/peter-miehle"}, "edited": false, "score": 1, "creation_date": 1428491569, "post_id": 29512830, "comment_id": 47181758, "body": "where do you get the segfault? (use a debugger or some more debug-printf-statements"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1428492023, "post_id": 29512830, "comment_id": 47182054, "body": "@emmie do you want jagged 2D array?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4763471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e592b836e07c4861d98608f2f1a577f?s=128&d=identicon&r=PG&f=1", "display_name": "emmie", "link": "https://stackoverflow.com/users/4763471/emmie"}, "edited": false, "score": 0, "creation_date": 1428491430, "post_id": 29512900, "comment_id": 47181644, "body": "any suggestion which i can make instead of these two lines"}, {"owner": {"reputation": 5767, "user_id": 27800, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f8d805c02bfa80a79df1381984ac5d3a?s=128&d=identicon&r=PG", "display_name": "Peter Miehle", "link": "https://stackoverflow.com/users/27800/peter-miehle"}, "reply_to_user": {"reputation": 1, "user_id": 4763471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e592b836e07c4861d98608f2f1a577f?s=128&d=identicon&r=PG&f=1", "display_name": "emmie", "link": "https://stackoverflow.com/users/4763471/emmie"}, "edited": false, "score": 0, "creation_date": 1428491482, "post_id": 29512900, "comment_id": 47181690, "body": "@emmie what do you intent (!) to do with the lines?"}, {"owner": {"reputation": 4190, "user_id": 1520248, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/vySwn.jpg?s=128&g=1", "display_name": "niyasc", "link": "https://stackoverflow.com/users/1520248/niyasc"}, "edited": false, "score": 3, "creation_date": 1428491492, "post_id": 29512900, "comment_id": 47181697, "body": "Don&#39;t type cast return value of malloc. <a href=\"http://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\" title=\"do i cast the result of malloc\">stackoverflow.com/questions/605845/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 4763471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e592b836e07c4861d98608f2f1a577f?s=128&d=identicon&r=PG&f=1", "display_name": "emmie", "link": "https://stackoverflow.com/users/4763471/emmie"}, "reply_to_user": {"reputation": 5767, "user_id": 27800, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f8d805c02bfa80a79df1381984ac5d3a?s=128&d=identicon&r=PG", "display_name": "Peter Miehle", "link": "https://stackoverflow.com/users/27800/peter-miehle"}, "edited": false, "score": 0, "creation_date": 1428491567, "post_id": 29512900, "comment_id": 47181756, "body": "@Peter i want to print dynamically cricket score for each over"}], "tags": [], "owner": {"reputation": 5511, "user_id": 4516316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBirF.jpg?s=128&g=1", "display_name": "Arun A S", "link": "https://stackoverflow.com/users/4516316/arun-a-s"}, "is_accepted": false, "score": 4, "last_activity_date": 1428491591, "last_edit_date": 1428491591, "creation_date": 1428491228, "answer_id": 29512900, "question_id": 29512830, "link": "https://stackoverflow.com/questions/29512830/segmentation-failure/29512900#29512900", "title": "Segmentation failure", "body": "<p>You are using</p>\n\n<pre><code>ptr1=(int*)malloc(score*sizeof(int));\n</code></pre>\n\n<p>inside your for loop. That causes memory leak. You should free the memory.</p>\n\n<p>You also have</p>\n\n<pre><code> printf(\"%d%d \", i, ptr[i]);\n</code></pre>\n\n<p>But <code>ptr[i]</code>  has not been assigned any value, so it just gives garbage value. The same problem occurs in</p>\n\n<pre><code>for(j = 1; j&lt;= ptr1[i]; j++)\n</code></pre>\n\n<p>So you need to assign some value to them before using them like this.</p>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 0, "last_activity_date": 1428492119, "last_edit_date": 1495539817, "creation_date": 1428492119, "answer_id": 29513215, "question_id": 29512830, "link": "https://stackoverflow.com/questions/29512830/segmentation-failure/29513215#29513215", "title": "Segmentation failure", "body": "<ul>\n<li>Casting the result of malloc doesn't make any sense, it is <a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">pointless and potentially bad practice</a>.</li>\n<li><code>printf(\"%d%d \", i, ptr[i]);</code>. You print the value of an uninitialized memory cell. This is undefined behavior and might in theory cause the program to crash on some platforms. If you need the memory allocated to be initialized to zero, you should be using calloc() instead.</li>\n<li><code>ptr1=(int*)malloc(score*sizeof(int)); for(j = 1; j&lt;= ptr1[i]; j++)</code> This code makes no sense whatsoever and will crash the program. You use ptr1 as if it was an initialied array of integers, while it is actually an uninitialized, single integer.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 4763471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e592b836e07c4861d98608f2f1a577f?s=128&d=identicon&r=PG&f=1", "display_name": "emmie", "link": "https://stackoverflow.com/users/4763471/emmie"}, "edited": false, "score": 0, "creation_date": 1428493488, "post_id": 29513577, "comment_id": 47182949, "body": "same Segmentation Fault"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 1, "user_id": 4763471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e592b836e07c4861d98608f2f1a577f?s=128&d=identicon&r=PG&f=1", "display_name": "emmie", "link": "https://stackoverflow.com/users/4763471/emmie"}, "edited": false, "score": 0, "creation_date": 1428493821, "post_id": 29513577, "comment_id": 47183166, "body": "@emmie this work fine to me. I might have been mistaken because it does not well known. What did you input? <a href=\"http://ideone.com/oaW5Yd\" rel=\"nofollow noreferrer\">DEMO</a>"}], "tags": [], "owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "is_accepted": false, "score": 0, "last_activity_date": 1428493226, "creation_date": 1428493226, "answer_id": 29513577, "question_id": 29512830, "link": "https://stackoverflow.com/questions/29512830/segmentation-failure/29513577#29513577", "title": "Segmentation failure", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void){\n    int **scores;\n    int over, score;\n    int i, j;\n\n    printf(\"Enter the number of over : \");\n    scanf(\"%d\", &amp;over);\n    scores = (int**)malloc(over*sizeof(int*));\n\n    for(i = 0; i &lt; over; i++){\n        printf(\"%d \", i + 1);\n        printf(\"Enter the number of run per over : \");\n        scanf(\"%d\", &amp;score);\n        scores[i] = (int*)malloc((score+1) * sizeof(int));// +1 for number of columns\n        scores[i][0] = score;\n        for(j = 1; j &lt;= score; j++){\n            printf(\"%d Enter the score : \", j);\n            scanf(\"%d\", &amp;scores[i][j]);\n        }\n    }\n    for(i = 0; i &lt; over; i++){\n        for(j = 1; j &lt;= scores[i][0]; j++){\n            printf(\"|%d\", scores[i][j]);\n        }\n        printf(\"|\\n\");\n    }\n    //deallocate\n    for(i = 0; i &lt; over; i++)\n        free(scores[i]);\n    free(scores);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4763471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e592b836e07c4861d98608f2f1a577f?s=128&d=identicon&r=PG&f=1", "display_name": "emmie", "link": "https://stackoverflow.com/users/4763471/emmie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "answer_count": 3, "score": -4, "last_activity_date": 1428493226, "creation_date": 1428490994, "last_edit_date": 1428491268, "question_id": 29512830, "link": "https://stackoverflow.com/questions/29512830/segmentation-failure", "title": "Segmentation failure", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\nint main(void)\n{\n    int score,i,j;\n    int *ptr, *ptr1;\n    int over;\n    printf(\"Enter the number of over\");\n    scanf(\"%d\",&amp;over);\n    ptr=(int*)malloc(over*sizeof(int));\n    // do the iteration, outer for loop, read row by row...\n    for(i=0; i &lt;= (over-1); i++)\n        {\n            printf(\"%d%d \", i, ptr[i]);\n            // inner for loop, for every row, read column by column and print the bar...\n            printf(\"Enter the number of run per over\");\n            scanf(\"%d\",&amp;score);\n            ptr1=(int*)malloc(score*sizeof(int));\n            for(j = 1; j&lt;= ptr1[i]; j++)\n            // print the 'bar', and repeat...\n                printf(\"|\");\n            // go to new line for new row, and repeats...\n            printf(\"\\n\");\n        }\n    return 0;\n}\n</code></pre>\n"}]