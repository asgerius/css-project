[{"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 2, "creation_date": 1453935174, "post_id": 35049619, "comment_id": 57823709, "body": "That&#39;s not a function, that&#39;s a variable named <code>dbLock</code>, which has type <code>Lock::DBLock</code>, and is created using a constructor which is passed three values."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1453935281, "post_id": 35049619, "comment_id": 57823758, "body": "It&#39;s analogous to <code>int some_integer_variable(3);</code> which declares a variable and initializes it."}], "answers": [{"comments": [{"owner": {"reputation": 1467, "user_id": 234864, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/8e3f19200167c2d758f3914de4f37a41?s=128&d=identicon&r=PG", "display_name": "Alexander Marquardt", "link": "https://stackoverflow.com/users/234864/alexander-marquardt"}, "edited": false, "score": 0, "creation_date": 1453970918, "post_id": 35049694, "comment_id": 57836616, "body": "Than you! Makes sense"}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 8, "last_activity_date": 1453935189, "creation_date": 1453935189, "answer_id": 35049694, "question_id": 35049619, "link": "https://stackoverflow.com/questions/35049619/understanding-c-syntax-for-an-experienced-c-programmer/35049694#35049694", "title": "Understanding C++ syntax for an experienced C programmer", "body": "<p>The code is the declaration of a variable named <code>dbLock</code> of type <code>Lock::DBLock</code>.  The parenthesized list contains arguments to a constructor for that type.</p>\n"}, {"comments": [{"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "reply_to_user": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1453935902, "post_id": 35049732, "comment_id": 57824044, "body": "@jaggedSpire: Changed and given example."}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1453937800, "post_id": 35049732, "comment_id": 57824811, "body": "You may want to add a comment about the destructor call that happens automatically and RAII."}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "reply_to_user": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1453938534, "post_id": 35049732, "comment_id": 57825075, "body": "@LokiAstari: Yes. This is starting to become a &quot;book on how to write C++&quot;, but I have added that too."}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1454006412, "post_id": 35049732, "comment_id": 57861757, "body": "@MatsPetersson :-) That&#39;s how the good questions get all the votes :-) the details are important. But thanks."}], "tags": [], "owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": true, "score": 17, "last_activity_date": 1453942787, "last_edit_date": 1495540346, "creation_date": 1453935364, "answer_id": 35049732, "question_id": 35049619, "link": "https://stackoverflow.com/questions/35049619/understanding-c-syntax-for-an-experienced-c-programmer/35049732#35049732", "title": "Understanding C++ syntax for an experienced C programmer", "body": "<p>It is a variable declaration with a constructor - so it's BOTH a function call [to the object constructor] and a declaration of a variable.</p>\n\n<p>It declares a variable of the type;</p>\n\n<pre><code>  Lock::DBLock\n</code></pre>\n\n<p>The variable is called <code>dbLock</code>. It calls the constructor with a <code>txn-&gt;lockState()</code>, the <code>ns.db()</code> and a <code>MODE_X</code>. </p>\n\n<p>My guess is that <code>txn-&gt;lockState</code> actually returns a lock-object, and the thing we're locking is <code>ns.db()</code> - in \"exclusive mode\". But that's a guess, and you have to look those things up within the environment.</p>\n\n<p>Without looking up the documentation, I expect <code>Lock::DBLock</code> is a \"lock manager\", in other words, it takes the lock when created, and releases when destroyed.</p>\n\n<p>A simple lock manager would look something like this:</p>\n\n<pre><code> class LockMgr\n {\n      LockMgr(SomeLockType &amp;X) : keeper(X)\n      {\n         keeper.Lock();\n      }\n      ~LockMgr()\n      {\n         keeper.Unlock();\n      }\n      private:\n        SomeLockType&amp; keeper;    // Must be reference to original lock\n };\n</code></pre>\n\n<p>The destructor is automatically called when the variable goes out of scope (in other worse when you leave the <code>{}</code> pair that the variable is within.</p>\n\n<p>In C++, one commmon strategy for \"resource handling\" is called RAII (Resource Acquisition Is Initialization) - a variable is used to hold a resource, and it is assigned during initialization. This helps a lot with \"not forgetting to undo\" - for example in code that returns in the middle of the function, does <code>break</code> to exit a loop, or similar things. In C, you always have to watch your step for releasing locks, closing files, freeing memory, etc - and of course, if you use C++ in the wrong way, you can fall into the same pitfalls there - calling <code>new</code> will definitely need a call to <code>delete</code>, directly calling a locks <code>Lock()</code> member function requires a <code>Unlock()</code> call somewhere. But if we \"wrap\" the resource into an object that holds it for the duration we need it, and automatically \"lets go\" (frees, unlocks, etc) in the destructor, there's no need to remember to release memory, unlock locks, etc, etc.</p>\n\n<p>I would suggest that before asking further questions, you read the first chapter about classes and constructor &amp; destructor pairs in <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">your C++ book</a> (you DO have a book, right?)</p>\n"}], "owner": {"reputation": 1467, "user_id": 234864, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/8e3f19200167c2d758f3914de4f37a41?s=128&d=identicon&r=PG", "display_name": "Alexander Marquardt", "link": "https://stackoverflow.com/users/234864/alexander-marquardt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 250, "favorite_count": 0, "accepted_answer_id": 35049732, "answer_count": 2, "score": 3, "last_activity_date": 1453942787, "creation_date": 1453934889, "last_edit_date": 1453940609, "question_id": 35049619, "link": "https://stackoverflow.com/questions/35049619/understanding-c-syntax-for-an-experienced-c-programmer", "title": "Understanding C++ syntax for an experienced C programmer", "body": "<p>I am looking through the source code for MongoDB, and see the following declaration inside of a function, which I don't understand and haven't seen in my C programming experience.</p>\n\n<pre><code>Lock::DBLock dbLock(txn-&gt;lockState(), ns.db(), MODE_X);\n</code></pre>\n\n<p>I am trying to understand what this declaration is doing in C++ terms (ie. I want to understand the syntax, not specifics about the functionality of what is going on).</p>\n\n<p>This breaks down into two main questions:\n1) What is the purpose of the Lock::DBLock statement in front of the function? \n2) Is this a function call, or a function declaration?</p>\n"}, {"tags": ["c", "syntax"], "comments": [{"owner": {"reputation": 12386, "user_id": 673991, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/TqC4v.jpg?s=128&g=1", "display_name": "Bob Stein", "link": "https://stackoverflow.com/users/673991/bob-stein"}, "edited": false, "score": 0, "creation_date": 1453934196, "post_id": 35049054, "comment_id": 57823241, "body": "I formatted your code by indenting everything 4 spaces. All your semi-colons (;) had open-curly-braces after them. &quot;{&quot;. I removed them, thinking they were mistakes from your cutting and pasting. Is this the code you&#39;re running?  If you get an error message, cut and paste that too, and say what line of code is indicated."}, {"owner": {"reputation": 12386, "user_id": 673991, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/TqC4v.jpg?s=128&g=1", "display_name": "Bob Stein", "link": "https://stackoverflow.com/users/673991/bob-stein"}, "edited": false, "score": 1, "creation_date": 1453936225, "post_id": 35049054, "comment_id": 57824171, "body": "And by the way welcome to StackOverflow! Including the precise error message in clear text helps others google this solution."}, {"owner": {"reputation": 91, "user_id": 5849145, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/427223ff194d4db8a0a327d82bb3e128?s=128&d=identicon&r=PG&f=1", "display_name": "Syed Rumman", "link": "https://stackoverflow.com/users/5849145/syed-rumman"}, "reply_to_user": {"reputation": 12386, "user_id": 673991, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/TqC4v.jpg?s=128&g=1", "display_name": "Bob Stein", "link": "https://stackoverflow.com/users/673991/bob-stein"}, "edited": false, "score": 0, "creation_date": 1454365692, "post_id": 35049054, "comment_id": 58003672, "body": "Thank you! This is not my code and it was my first post."}], "answers": [{"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 1, "last_activity_date": 1453936975, "creation_date": 1453936975, "answer_id": 35050085, "question_id": 35049054, "link": "https://stackoverflow.com/questions/35049054/i-get-expected-constant-expression-error-in-vs-but-it-runs-on-tutorialspoint-we/35050085#35050085", "title": "I get expected constant expression error in VS, but it runs on tutorialspoint web compiler?", "body": "<p>The definition <code>int *ptr[MAX];</code> where <code>MAX</code> is not a compile time constant expression is supported since C99 for automatic variables.  Even defined as a <code>const int MAX = 3</code>, <code>MAX</code> is not considered a compile time constant in C.  Your version of Visual Studio does not seem to support this syntax, but the online compiler at tutorialspoint does.</p>\n"}], "owner": {"reputation": 91, "user_id": 5849145, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/427223ff194d4db8a0a327d82bb3e128?s=128&d=identicon&r=PG&f=1", "display_name": "Syed Rumman", "link": "https://stackoverflow.com/users/5849145/syed-rumman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 35050085, "answer_count": 1, "score": 1, "last_activity_date": 1453936975, "creation_date": 1453932628, "last_edit_date": 1453936787, "question_id": 35049054, "link": "https://stackoverflow.com/questions/35049054/i-get-expected-constant-expression-error-in-vs-but-it-runs-on-tutorialspoint-we", "title": "I get expected constant expression error in VS, but it runs on tutorialspoint web compiler?", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n\nconst int MAX = 3;\n\nint main() {\n\n    int var[] = { 10, 100, 200 };\n    int i, *ptr[MAX];\n\n    for (i = 0; i &lt; MAX; i++) { \n        ptr[i] = &amp;var[i]; /* assign the address of integer. */\n        _getch();\n    }\n\n    for (i = 0; i &lt; MAX; i++) {\n        printf(\"Value of var[%d] = %d\\n\", i, *ptr[i]);\n        _getch();\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1453932536, "post_id": 35048912, "comment_id": 57822330, "body": "<code>scanf</code> needs a pointer to the object, so that it can store a value in the object. <code>printf</code> just needs the value of the object. So <code>scanf</code> needs <code>&amp;i</code> (the address of <code>i</code>) whereas <code>printf</code> just needs <code>i</code> (the value of <code>i</code>). Also, <code>gets</code> is evil and should not be used. Use <code>fgets</code> instead. And consult the documentation, since you weren&#39;t calling <code>gets</code> correctly anyways."}, {"owner": {"reputation": 29, "user_id": 5680196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096907f4bade2937bd454718115a112b?s=128&d=identicon&r=PG&f=1", "display_name": "Hydra King", "link": "https://stackoverflow.com/users/5680196/hydra-king"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1453933425, "post_id": 35048912, "comment_id": 57822799, "body": "The error went away, but now I&#39;m getting incorrect output for Grade Level and GPA. My program outputs the correct first and last name inputted, but this not the case for GL and GPA. Thoughts as to why?"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1453933673, "post_id": 35048912, "comment_id": 57822939, "body": "Nope, no idea. Might help to add the terminal contents (i.e. user input and program output) for a sample run."}, {"owner": {"reputation": 29, "user_id": 5680196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096907f4bade2937bd454718115a112b?s=128&d=identicon&r=PG&f=1", "display_name": "Hydra King", "link": "https://stackoverflow.com/users/5680196/hydra-king"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1453934211, "post_id": 35048912, "comment_id": 57823254, "body": "That was a single run."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1453934310, "post_id": 35048912, "comment_id": 57823300, "body": "What did you do about the <code>gets</code>? Please add the updated code to the question."}, {"owner": {"reputation": 29, "user_id": 5680196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096907f4bade2937bd454718115a112b?s=128&d=identicon&r=PG&f=1", "display_name": "Hydra King", "link": "https://stackoverflow.com/users/5680196/hydra-king"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1453934702, "post_id": 35048912, "comment_id": 57823494, "body": "My teacher said using gets was fine, and I&#39;m not sure how to use fgets."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1453934924, "post_id": 35048912, "comment_id": 57823603, "body": "Ok, but <code>gets</code> only takes one argument, e.g. <code>gets(SArray[i].FN);</code>"}, {"owner": {"reputation": 1360, "user_id": 5463883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7838cba44980354335c2ed650d89f17f?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Akhtar", "link": "https://stackoverflow.com/users/5463883/ahmed-akhtar"}, "edited": false, "score": 0, "creation_date": 1453972551, "post_id": 35048912, "comment_id": 57837738, "body": "See this other question <a href=\"http://stackoverflow.com/questions/26192934/how-to-supress-warning-gets-is-deprecated\">here</a> for help on how to use <code>fgets</code> instead of <code>gets</code>."}], "answers": [{"tags": [], "owner": {"reputation": 2185, "user_id": 5794667, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/9acyA.jpg?s=128&g=1", "display_name": "andydavies", "link": "https://stackoverflow.com/users/5794667/andydavies"}, "is_accepted": false, "score": 2, "last_activity_date": 1453932776, "creation_date": 1453932776, "answer_id": 35049098, "question_id": 35048912, "link": "https://stackoverflow.com/questions/35048912/struct-array-error/35049098#35049098", "title": "Struct Array Error", "body": "<p>Take out the '&amp;' in lines 71 and 74. You're providing the printf function a pointer to the value you want - its address - instead of the value itself. </p>\n"}, {"tags": [], "owner": {"reputation": 1360, "user_id": 5463883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7838cba44980354335c2ed650d89f17f?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Akhtar", "link": "https://stackoverflow.com/users/5463883/ahmed-akhtar"}, "is_accepted": false, "score": 0, "last_activity_date": 1453959892, "last_edit_date": 1495535278, "creation_date": 1453957704, "answer_id": 35053281, "question_id": 35048912, "link": "https://stackoverflow.com/questions/35048912/struct-array-error/35053281#35053281", "title": "Struct Array Error", "body": "<ul>\n<li>You are declaring the array of <code>struct</code> named <code>SArray[956]</code> twice, once gloabally and once locally too, don't do that, and no need for <code>struct</code> keyword when using <code>typedef</code> like this.</li>\n<li>Also, passing an array by its name readily gets its reference, so do not use <code>&amp;</code> for <code>FN</code> and <code>LN</code>.</li>\n<li>And dont use <code>&amp;</code> for passing a variable to <code>printf</code></li>\n<li>Also, <code>gets</code> needs no format specifier such as <code>%s</code>. (<code>gets</code> is depricated and you should prefer using <code>fgets</code> see <a href=\"https://stackoverflow.com/questions/26192934/how-to-supress-warning-gets-is-deprecated\">here</a>.)</li>\n<li>The <code>getchar()</code> before first <code>gets</code> is to ignore the extra <code>\\n</code> in the stream because of the last <code>scanf</code>.</li>\n</ul>\n\n<p>Just making these changes:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\ntypedef struct\n{\n   int GL;\n   char FN[80];\n   char LN[80];\n   double GPA;\n\n}Student;\n\nint main(void)\n{\n   int OP = 0;\n   int i;\n   int x = 0;\n   Student SArray[956];\n\n   while(x == 0)\n   {\n      printf(\"Welcome to teh ARX7 SYSTEM. Enter 1 to enter information, 2.............\\n\");\n      scanf(\"%d\", &amp;OP);\n\n      if (OP == 1)\n      {\n         printf(\"Enter Student ID:\\n\");\n         scanf(\"%d\", &amp;i);\n\n         printf(\"Enter Grade Level:\\n\");\n         scanf(\"%d\",&amp;SArray[i].GL);\n\n         getchar();\n         printf(\"Enter First Name:\\n\");\n         gets(SArray[i].FN);\n\n         printf(\"Enter Last Name:\\n\");\n         gets(SArray[i].LN);\n\n         printf(\"Enter GPA:\\n\");\n         scanf(\"%lf\", &amp;SArray[i].GPA);\n      }\n\n      if (OP == 2)\n      {\n         printf(\"Enter Student ID:\\n\");\n         scanf(\"%d\", &amp;i);\n\n         printf(\"Grade: %d\\n\",SArray[i].GL);\n         printf(\"First name: %s\\n\", SArray[i].FN);\n         printf(\"Last name: %s\\n\", SArray[i].LN );\n         printf(\"GPA: %lf\\n\", SArray[i].GPA);\n      }\n   }\n}\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 5680196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096907f4bade2937bd454718115a112b?s=128&d=identicon&r=PG&f=1", "display_name": "Hydra King", "link": "https://stackoverflow.com/users/5680196/hydra-king"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1453959892, "creation_date": 1453932032, "last_edit_date": 1453940792, "question_id": 35048912, "link": "https://stackoverflow.com/questions/35048912/struct-array-error", "title": "Struct Array Error", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\ntypedef struct Student\n{\n   int GL;\n   char FN[80];\n   char LN[80];\n   double GPA;\n\n}SArray[956];\n\nint main(void)\n{\n   int OP = 0;\n   int i;\n   int x = 0;\n   struct Student SArray[956];\n\n   while(x == 0)\n   {\n      printf(\"Welcome to teh ARX7 SYSTEM. Enter 1 to enter information, 2.............\\n\");\n      scanf(\"%d\", &amp;OP);\n\n      if (OP == 1)\n      {\n         printf(\"Enter Student ID:\\n\");\n         scanf(\"%d\", &amp;i);\n\n         printf(\"Enter Grade Level:\\n\");\n         scanf(\"%d\",&amp;SArray[i].GL);\n\n         printf(\"Enter First Name:\\n\");\n         gets(\"%s\",&amp;SArray[i].FN);\n\n         printf(\"Enter Last Name:\\n\");\n         gets(\"%s\",&amp;SArray[i].LN);\n\n         printf(\"Enter GPA:\\n\");\n         scanf(\"%lf\", &amp;SArray[i].GPA);\n      }\n\n      if (OP == 2)\n      {\n         printf(\"Enter Student ID:\\n\");\n         scanf(\"%d\", &amp;i);\n\n         printf(\"Grade: %d\",&amp;SArray[i].GL);\n         printf(\"First name: %s\\n\", SArray[i].FN);\n         printf(\"Last name: %s\\n\", SArray[i].LN );\n         printf(\"GPA: %lf \", &amp;SArray[i].GPA);\n      }\n   }\n}\n</code></pre>\n\n<p>I'm trying to create a program that stores and displays data for students. However, I keep getting these two errors:</p>\n\n<pre><code>main.c:71:23: warning: format specifies type 'int' but the argument has type 'int *' [-Wformat]\n                    printf(\"Grade: %d\",&amp;SArray[i].GL);\n\n\nmain.c:74:24: warning: format specifies type 'double' but the argument has type 'double *' [-Wformat]\n                    printf(\"GPA: %lf \", &amp;SArray[i].GPA);\n</code></pre>\n\n<p>INPUT:</p>\n\n<pre><code>Welcome to teh ARX7 SYSTEM. Enter 1 to enter information, 2.............\n1\nEnter Student ID:\n1\nEnter Grade Level:\n2\nEnter First Name:\nee\nEnter Last Name:\neee\nEnter GPA:\n3\n</code></pre>\n\n<p>OUPUT:</p>\n\n<pre><code>Welcome to teh ARX7 SYSTEM. Enter 1 to enter information, 2............. \n2\nEnter Student ID:\n1\nGrade: -1264132192\nFirst name: ee\nLast name: eee\nGPA: 0.000000\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 191202, "user_id": 147356, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9506717d24256a090524dd5505d3207?s=128&d=identicon&r=PG", "display_name": "larsks", "link": "https://stackoverflow.com/users/147356/larsks"}, "edited": false, "score": 0, "creation_date": 1453930841, "post_id": 35048512, "comment_id": 57821363, "body": "I don&#39;t actually believe that <code>7476811632013133299LL</code> is a valid value for the <code>time_t</code> type.  Compiling this with <code>gcc</code>  yields <code>warning: overflow in implicit constant conversion [-Woverflow]</code>."}, {"owner": {"reputation": 442, "user_id": 2556628, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/af646ee19f9771df0b76fe42ce7df699?s=128&d=identicon&r=PG", "display_name": "anupamb", "link": "https://stackoverflow.com/users/2556628/anupamb"}, "reply_to_user": {"reputation": 191202, "user_id": 147356, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9506717d24256a090524dd5505d3207?s=128&d=identicon&r=PG", "display_name": "larsks", "link": "https://stackoverflow.com/users/147356/larsks"}, "edited": false, "score": 0, "creation_date": 1453930989, "post_id": 35048512, "comment_id": 57821450, "body": "Yes it can actually be 32 bit or 64 bit. In my implementation it is 64 bit. So it&#39;s implementation dependent. For example using &quot;printf(&quot;%lld\\n&quot;, rawtime);&quot; prints the right value on my machine."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1453931219, "post_id": 35048512, "comment_id": 57821576, "body": "It works fine for me, and <code>sizeof(time_t)</code> is 8.  What is this value for you?"}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1453931559, "post_id": 35048512, "comment_id": 57821778, "body": "As you&#39;re using __int64, you might be on windows, in which case the ranges of legal ranges passed to localtime is documented(or can be  calculated) here: <a href=\"https://msdn.microsoft.com/en-us/library/bf12f0hc.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/bf12f0hc.aspx</a>"}, {"owner": {"reputation": 442, "user_id": 2556628, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/af646ee19f9771df0b76fe42ce7df699?s=128&d=identicon&r=PG", "display_name": "anupamb", "link": "https://stackoverflow.com/users/2556628/anupamb"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1453931757, "post_id": 35048512, "comment_id": 57821891, "body": "@dbush It&#39;s 8 for me too."}, {"owner": {"reputation": 442, "user_id": 2556628, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/af646ee19f9771df0b76fe42ce7df699?s=128&d=identicon&r=PG", "display_name": "anupamb", "link": "https://stackoverflow.com/users/2556628/anupamb"}, "reply_to_user": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1453931863, "post_id": 35048512, "comment_id": 57821952, "body": "@nos Thanks! That helps."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1454011777, "post_id": 35048512, "comment_id": 57865031, "body": "this statement <code>g = *gp;</code> is not valid  cannot reliably assign an array.  suggest: <code>memcpy( &amp;g, gp, sizeof( struct tm ) );</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1454012449, "post_id": 35048512, "comment_id": 57865411, "body": "Please detail what is wrong with <code>g = *gp</code>.  Looks good to me.  It is not assigning an array.  It is assigning a structure."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1453937580, "post_id": 35048843, "comment_id": 57824716, "body": "Experimentally found valid VS conversions continuing in the next day also to Thu Jan 01 07:59:59 3001 UTC.  This small extension does <i>not</i> appear to be connected to my timezone."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 3, "last_activity_date": 1453931814, "creation_date": 1453931814, "answer_id": 35048843, "question_id": 35048512, "link": "https://stackoverflow.com/questions/35048512/what-are-valid-arguments-for-localtime-function/35048843#35048843", "title": "What are valid arguments for localtime function?", "body": "<p>From the <a href=\"https://msdn.microsoft.com/en-us/library/bf12f0hc.aspx\" rel=\"nofollow\">MSDN page for <code>localtime</code></a>:</p>\n\n<blockquote>\n  <p>Return a pointer to the structure result, or NULL if the date passed\n  to the function is:</p>\n  \n  <ul>\n  <li><p>Before midnight, January 1, 1970.</p></li>\n  <li><p>After 03:14:07, January 19, 2038, UTC (using _time32 and time32_t).</p></li>\n  <li><p>After 23:59:59, December 31, 3000, UTC (using _time64 and __time64_t).</p></li>\n  </ul>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1453932180, "post_id": 35048846, "comment_id": 57822133, "body": "Keith&#39;s initial answer (which I hope he restores) made the same point I was about to make: it&#39;s likely that <code>localtime</code> failed for you because the <code>tm_year</code> field of <code>struct tm</code> couldn&#39;t represent the year as a 32-bit int.  The <code>time_t</code> value 7476811632013133299 corresponds roughly to the year 236930730641, a 38-bit number."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1453933160, "post_id": 35048846, "comment_id": 57822666, "body": "@SteveSummit: I deleted that paragraph when I realized that the <code>time_t</code> value is not <code>tim</code> (<code>7476811632013133299LL</code>), but <code>rawtime</code> (<code>tim &#47; 1000LL</code>, or <code>7476811632013133</code>)."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 1, "creation_date": 1453935454, "post_id": 35048846, "comment_id": 57823840, "body": "Got it.  As it happens, I&#39;ve been working with the ado/iana tzcode sources lately, and pretty much the only time <code>localtime</code> returns <code>NULL</code> is if <code>tm_year</code> overflows.  But from dbush&#39;s answer, it sounds like Windows is different.  (Year &lt; 1970?  My goodness.)"}], "tags": [], "owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "is_accepted": false, "score": 5, "last_activity_date": 1453966095, "last_edit_date": 1453966095, "creation_date": 1453931839, "answer_id": 35048846, "question_id": 35048512, "link": "https://stackoverflow.com/questions/35048512/what-are-valid-arguments-for-localtime-function/35048846#35048846", "title": "What are valid arguments for localtime function?", "body": "<p>The allowable range is not specified by the C standard.</p>\n\n<p>Quoting the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow\">N1570</a> draft:</p>\n\n<blockquote>\n  <p>The <strong><code>localtime</code></strong> function returns a pointer to the broken-down\n  time, or a null pointer if the specified time cannot be converted to\n  local time.</p>\n</blockquote>\n\n<p>You should check whether the result is <code>NULL</code> before trying to dereference it.</p>\n"}, {"comments": [{"owner": {"reputation": 442, "user_id": 2556628, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/af646ee19f9771df0b76fe42ce7df699?s=128&d=identicon&r=PG", "display_name": "anupamb", "link": "https://stackoverflow.com/users/2556628/anupamb"}, "edited": false, "score": 0, "creation_date": 1453933782, "post_id": 35049314, "comment_id": 57823002, "body": "Thanks! That&#39;s great :)."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 442, "user_id": 2556628, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/af646ee19f9771df0b76fe42ce7df699?s=128&d=identicon&r=PG", "display_name": "anupamb", "link": "https://stackoverflow.com/users/2556628/anupamb"}, "edited": false, "score": 0, "creation_date": 1453933858, "post_id": 35049314, "comment_id": 57823059, "body": "@anupamb What does your machine report?"}, {"owner": {"reputation": 442, "user_id": 2556628, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/af646ee19f9771df0b76fe42ce7df699?s=128&d=identicon&r=PG", "display_name": "anupamb", "link": "https://stackoverflow.com/users/2556628/anupamb"}, "edited": false, "score": 0, "creation_date": 1453934590, "post_id": 35049314, "comment_id": 57823439, "body": "I had to make some changes to get it running on Windows. But the output is 32535244800."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 442, "user_id": 2556628, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/af646ee19f9771df0b76fe42ce7df699?s=128&d=identicon&r=PG", "display_name": "anupamb", "link": "https://stackoverflow.com/users/2556628/anupamb"}, "edited": false, "score": 0, "creation_date": 1453937102, "post_id": 35049314, "comment_id": 57824525, "body": "With windows, was able to run <code>gmtime()</code> and <code>localtime()</code> to <code>32535244799</code>, <code>&quot;Thu Jan 01 07:59:59 3001 UTC&quot;</code>.  Could also run  <code>gmtime()</code>  to <code>&quot;32535291599&quot;</code>, <code>&quot;buf = &quot;Thu Jan 01 20:59:59 3001 UTC&quot;</code>.  &quot; &quot;"}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 3, "last_activity_date": 1453936385, "last_edit_date": 1453936385, "creation_date": 1453933607, "answer_id": 35049314, "question_id": 35048512, "link": "https://stackoverflow.com/questions/35048512/what-are-valid-arguments-for-localtime-function/35049314#35049314", "title": "What are valid arguments for localtime function?", "body": "<p>For fun, I asked my compiler to try a deduce the result:</p>\n\n<pre><code>#include &lt;time.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdbool.h&gt;\n\nbool Valid_time_t(time_t t) {\n  struct tm *gp;\n  gp = gmtime(&amp;t);\n  return gp != NULL;\n}\n\ntime_t MaxValid_time_t(void) {\n  time_t mn, mx, dt;\n  time(&amp;mn);\n  do {\n    time(&amp;mx);\n  } while (mx == mn);\n  dt = mx - mn;\n  for (;;) {\n    time_t mx2 = mx + dt;   // Technically a problem as int overflow is UB\n    if (mx2 &lt;= mx) break;\n    mx = mx2;\n    //printf(\"mx %jd\\n\", (intmax_t) mx);\n    dt *= 2;\n  }\n  while (dt) {\n    dt /= 2;\n    time_t mx2 = mx + dt;   // Technically a problem as int overflow is UB\n    if (mx2 &gt; mx) mx = mx2;\n    //printf(\"mx_ %jd\\n\", (intmax_t) mx);\n  }\n\n  time_t mid;\n  while (mn &lt; mx) {\n    mid = mx / 2 + mn / 2 + (mx % 2 + mn % 2) / 2;\n    if (Valid_time_t(mid)) {\n      mn = mid + 1;\n    } else mx = mid - 1;\n    // printf(\"3 %jd %jd %jd\\n\", (intmax_t) mn, (intmax_t) mid, (intmax_t) mx);\n  }\n\n  printf(\"%jd\\n\", (intmax_t) mn);\n  printf(\"%s\\n\", asctime(gmtime(&amp;mn)));\n  return mn;\n}\n\nint main(void) {\n  return (int) MaxValid_time_t();\n}\n</code></pre>\n\n<p>Output gcc cygwin</p>\n\n<pre><code>2147483647\nTue Jan 19 03:14:07 2038\n</code></pre>\n\n<p>Output MS VS 2010 with <code>gmtime()</code> in <code>Valid_time_t()</code>.  (Curiously 13 Hrs later when using <code>localtime()</code> in <code>Valid_time_t()</code>.  It appears the upper limit for <code>localtime()</code> differs from <code>gmtime()</code>.</p>\n\n<pre><code>32535291599\nThu Jan 01 20:59:59 3001\n</code></pre>\n\n<p>OP's output when using <code>localtime()</code> in <code>Valid_time_t()</code>.</p>\n\n<pre><code>32535244800\n</code></pre>\n\n<p>YMMV</p>\n"}], "owner": {"reputation": 442, "user_id": 2556628, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/af646ee19f9771df0b76fe42ce7df699?s=128&d=identicon&r=PG", "display_name": "anupamb", "link": "https://stackoverflow.com/users/2556628/anupamb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 538, "favorite_count": 0, "accepted_answer_id": 35048843, "answer_count": 3, "score": 3, "last_activity_date": 1453966095, "creation_date": 1453930535, "question_id": 35048512, "link": "https://stackoverflow.com/questions/35048512/what-are-valid-arguments-for-localtime-function", "title": "What are valid arguments for localtime function?", "body": "<p>I have a code here which uses localtime function. But for some values of its input argument, the code crashes (null pointer returned). I want to know about the allowable range for its input.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n\nint main ()\n{\n  time_t rawtime;\n  struct tm g;\n  struct tm *gp;\n  __int64 tim;\n\n  tim = 7476811632013133299LL; // I know it's a weird number but valid for time_t\n  rawtime = tim / 1000LL;\n  gp = localtime(&amp;rawtime);\n  printf(\"Pointer gp = %p\\n\", gp);\n\n  g = *gp; // this crahses because gp = NULL\n\n  return 0;\n}\n</code></pre>\n\n<p>So what can be said about the allowable range of input to localtime function?</p>\n"}, {"tags": ["c", "fread"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 5, "creation_date": 1453930449, "post_id": 35048463, "comment_id": 57821124, "body": "Why aren&#39;t you checking the return value of <code>fread()</code>.?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1453930520, "post_id": 35048463, "comment_id": 57821160, "body": "Maybe you should exit if the file was not opened."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 2, "creation_date": 1453930581, "post_id": 35048463, "comment_id": 57821200, "body": "@Bobby: So, did you check your output for &quot;Cannot open file&quot; message?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1453930714, "post_id": 35048463, "comment_id": 57821289, "body": "@drescherjm Or more precisely stop reading from the file."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1453932193, "post_id": 35048463, "comment_id": 57822141, "body": "Is &#39;%d&#39; the correct format specifier for uint16_t?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1453932503, "post_id": 35048463, "comment_id": 57822311, "body": "@MartinJames if <code>int</code> is 32-bit or larger, it is"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1453932757, "post_id": 35048463, "comment_id": 57822448, "body": "In the <code>f == 0</code> branch you should actually abort in some way , rather than going on to fseek (which would cause undefined behaviour)"}, {"owner": {"reputation": 510, "user_id": 5778300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a214fbbf28e4a6615ff6891f99e06c5?s=128&d=identicon&r=PG&f=1", "display_name": "Flikk", "link": "https://stackoverflow.com/users/5778300/flikk"}, "edited": false, "score": 0, "creation_date": 1453933300, "post_id": 35048463, "comment_id": 57822741, "body": "Your code should work like that. what compiler are you using and can you provide the BMP file you are trying to open?"}, {"owner": {"reputation": 17, "user_id": 5416328, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6367ef60776bb3ef01644e4faa333983?s=128&d=identicon&r=PG&f=1", "display_name": "Bobby", "link": "https://stackoverflow.com/users/5416328/bobby"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1453934284, "post_id": 35048463, "comment_id": 57823284, "body": "@iharob the return value of fread() is 0 which means it&#39;s not even reading in the 2 bytes"}, {"owner": {"reputation": 17, "user_id": 5416328, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6367ef60776bb3ef01644e4faa333983?s=128&d=identicon&r=PG&f=1", "display_name": "Bobby", "link": "https://stackoverflow.com/users/5416328/bobby"}, "reply_to_user": {"reputation": 510, "user_id": 5778300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a214fbbf28e4a6615ff6891f99e06c5?s=128&d=identicon&r=PG&f=1", "display_name": "Flikk", "link": "https://stackoverflow.com/users/5778300/flikk"}, "edited": false, "score": 0, "creation_date": 1453934324, "post_id": 35048463, "comment_id": 57823311, "body": "@Flikk I&#39;m runnig this on visual studio 2015"}, {"owner": {"reputation": 510, "user_id": 5778300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a214fbbf28e4a6615ff6891f99e06c5?s=128&d=identicon&r=PG&f=1", "display_name": "Flikk", "link": "https://stackoverflow.com/users/5778300/flikk"}, "edited": false, "score": 0, "creation_date": 1453934500, "post_id": 35048463, "comment_id": 57823405, "body": "@bobby open your BMP in <a href=\"https://hexed.it/?hl=en\" rel=\"nofollow noreferrer\">hexed.it/?hl=en</a> and check if the sig is really <code>&#39;bm&#39;</code>"}, {"owner": {"reputation": 510, "user_id": 5778300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a214fbbf28e4a6615ff6891f99e06c5?s=128&d=identicon&r=PG&f=1", "display_name": "Flikk", "link": "https://stackoverflow.com/users/5778300/flikk"}, "edited": false, "score": 0, "creation_date": 1453935601, "post_id": 35048463, "comment_id": 57823916, "body": "@bobby can you use a hex editor to confirm that the first bytes of your BMP file are <code>&#39;BM&#39;</code>?"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1453936564, "post_id": 35048463, "comment_id": 57824312, "body": "@bobby: the link you provided is a JPG file, so it is presumably not the actual BMP file you are working with. Looking at the picture doesn&#39;t help much, although it is a pretty autumnal view."}, {"owner": {"reputation": 510, "user_id": 5778300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a214fbbf28e4a6615ff6891f99e06c5?s=128&d=identicon&r=PG&f=1", "display_name": "Flikk", "link": "https://stackoverflow.com/users/5778300/flikk"}, "edited": false, "score": 0, "creation_date": 1453936835, "post_id": 35048463, "comment_id": 57824420, "body": "@bobby it would be enough to confirm the sig of the file with a hex editor like <a href=\"https://hexed.it/?hl=en\" rel=\"nofollow noreferrer\">hexed.it/?hl=en</a> and try what Sahu said. Initialize sig to zero. And check the return value of fread to make sure that the operation was successful."}], "answers": [{"comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 2, "creation_date": 1453930671, "post_id": 35048510, "comment_id": 57821256, "body": "It&#39;s a nice observation but I doubt this would help."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1453932210, "post_id": 35048510, "comment_id": 57822148, "body": "On Unix there&#39;s no difference between <code>r</code> and <code>rb</code>. On Windows, I think it only affects how newlines are treated."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1453933970, "post_id": 35048510, "comment_id": 57823123, "body": "@barmar: It also causes EOF to be mysteriously signalled if the binary file contains the byte <code>0x1A</code>."}, {"owner": {"reputation": 510, "user_id": 5778300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a214fbbf28e4a6615ff6891f99e06c5?s=128&d=identicon&r=PG&f=1", "display_name": "Flikk", "link": "https://stackoverflow.com/users/5778300/flikk"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1453935377, "post_id": 35048510, "comment_id": 57823809, "body": "@rici good point. but since the file should start with <code>0x424D</code>, this should not be relevant for the problem. But i agree, it should be changed to  <code>fopen(file, &quot;rb&quot;);</code>"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 510, "user_id": 5778300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a214fbbf28e4a6615ff6891f99e06c5?s=128&d=identicon&r=PG&f=1", "display_name": "Flikk", "link": "https://stackoverflow.com/users/5778300/flikk"}, "edited": false, "score": 0, "creation_date": 1453935883, "post_id": 35048510, "comment_id": 57824034, "body": "@flikk: agreed, but it is a useful fact to know :)"}], "tags": [], "owner": {"reputation": 2999, "user_id": 1648011, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/62cf1e1d4cec3b8f1a03570bb0e55d05?s=128&d=identicon&r=PG", "display_name": "Photon", "link": "https://stackoverflow.com/users/1648011/photon"}, "is_accepted": false, "score": 1, "last_activity_date": 1453930532, "creation_date": 1453930532, "answer_id": 35048510, "question_id": 35048463, "link": "https://stackoverflow.com/questions/35048463/why-does-fread-not-read-into-uint16-t-value-properly/35048510#35048510", "title": "Why does fread not read into uint16_t value properly?", "body": "<p>Assuming the file exists, you should know that you're opening the file as text, instead of binary.</p>\n\n<p>Try:</p>\n\n<pre><code>FILE *f = fopen(file, \"rb\");\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1453932266, "post_id": 35048776, "comment_id": 57822181, "body": "While this is a good idea, there&#39;s no reason why <code>fread()</code> would fail unless the file was too short. That&#39;s not likely to be the case for his <code>.bmp</code> file."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1453932371, "post_id": 35048776, "comment_id": 57822246, "body": "@Barmar, nothing else seemed to be a problem in the posted code."}, {"owner": {"reputation": 510, "user_id": 5778300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a214fbbf28e4a6615ff6891f99e06c5?s=128&d=identicon&r=PG&f=1", "display_name": "Flikk", "link": "https://stackoverflow.com/users/5778300/flikk"}, "edited": false, "score": 0, "creation_date": 1453938589, "post_id": 35048776, "comment_id": 57825097, "body": "I think initializing <code>sig</code> seems to be the most likely solution. It&#39;s a non standard type and that does not look good."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1453931566, "creation_date": 1453931566, "answer_id": 35048776, "question_id": 35048463, "link": "https://stackoverflow.com/questions/35048463/why-does-fread-not-read-into-uint16-t-value-properly/35048776#35048776", "title": "Why does fread not read into uint16_t value properly?", "body": "<p>I would try couple of things:</p>\n\n<ol>\n<li>Initialize <code>sig</code> to zero.</li>\n<li>Check the return value of <code>fread</code> to make sure that the operation was successful.</li>\n</ol>\n\n<p>If nothing comes of that, the next thing to try would be use </p>\n\n<pre><code>char sig[2];\n\n...\n\nif ( 2 != fread(sig, 1, 2, f) ) { ...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1453932681, "post_id": 35049046, "comment_id": 57822409, "body": "This doesn&#39;t answer the question and also relies on a number of implementation details (e.g. struct packing, and integer endianness)"}, {"owner": {"reputation": 510, "user_id": 5778300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a214fbbf28e4a6615ff6891f99e06c5?s=128&d=identicon&r=PG&f=1", "display_name": "Flikk", "link": "https://stackoverflow.com/users/5778300/flikk"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1453933963, "post_id": 35049046, "comment_id": 57823120, "body": "@M.M yes, i think i got carried a little away when testing it. But maybe it will be helpful for him if he continues. I couldnt find any problems with his code either. So for further testing we need to know how he compiles it and  also need his BMP file for testing."}, {"owner": {"reputation": 17, "user_id": 5416328, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6367ef60776bb3ef01644e4faa333983?s=128&d=identicon&r=PG&f=1", "display_name": "Bobby", "link": "https://stackoverflow.com/users/5416328/bobby"}, "edited": false, "score": 0, "creation_date": 1453935871, "post_id": 35049046, "comment_id": 57824030, "body": "@Flikk I added the image link at the bottom of the post"}, {"owner": {"reputation": 510, "user_id": 5778300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a214fbbf28e4a6615ff6891f99e06c5?s=128&d=identicon&r=PG&f=1", "display_name": "Flikk", "link": "https://stackoverflow.com/users/5778300/flikk"}, "reply_to_user": {"reputation": 17, "user_id": 5416328, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6367ef60776bb3ef01644e4faa333983?s=128&d=identicon&r=PG&f=1", "display_name": "Bobby", "link": "https://stackoverflow.com/users/5416328/bobby"}, "edited": false, "score": 0, "creation_date": 1453936443, "post_id": 35049046, "comment_id": 57824264, "body": "@Bobby that&#39;s a JPEG. Starting with <code>0xFFD8</code>"}], "tags": [], "owner": {"reputation": 510, "user_id": 5778300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a214fbbf28e4a6615ff6891f99e06c5?s=128&d=identicon&r=PG&f=1", "display_name": "Flikk", "link": "https://stackoverflow.com/users/5778300/flikk"}, "is_accepted": false, "score": 0, "last_activity_date": 1453933176, "last_edit_date": 1453933176, "creation_date": 1453932594, "answer_id": 35049046, "question_id": 35048463, "link": "https://stackoverflow.com/questions/35048463/why-does-fread-not-read-into-uint16-t-value-properly/35049046#35049046", "title": "Why does fread not read into uint16_t value properly?", "body": "<p>I tested your code and i have no problems.\nCan you provide the BMP file you want to read?</p>\n\n<p>Also here i have written some code for you that might help you to keep everything organized if thid project gets bigger. i suggest putting the structs into a header file.</p>\n\n<p>edit: had to define the data types in the structs myself since i did this in an environment that did not have <code>stdint.h</code>. sorry. But you can just change them.</p>\n\n<p>you can use these structs to store your header informations:</p>\n\n<pre><code>typedef struct {\n    uint16  Signature;\n    uint32  Size;\n    uint16  Reserved1;\n    uint16  Reserved2;\n    uint32  BitsOffset;\n} BITMAP_FILE_HEADER;\n\ntypedef struct {\n    uint32  biSize;\n    int32   biWidth;\n    int32   biHeight;\n    uint16  biPlanes;\n    uint16  biBitCount;\n    uint32  biCompression;\n    uint32  biSizeImage;\n    int32   biXPelsPerMeter;\n    int32   biYPelsPerMeter;\n    uint32  biClrUsed;\n    uint32  biClrImportant;\n} BITMAP_INFO_HEADER;\n\ntypedef struct {\n    uint32  bcSize;\n    uint16  bcWidth;\n    uint16  bcHeight;\n    uint16  bcPlanes;\n    uint16  bcBitCount;\n} BITMAP_CORE_HEADER;\n</code></pre>\n\n<p>Using this function to read the header</p>\n\n<pre><code>int read_header(FILE* inputfile, BITMAP_INFO_HEADER* header, BITMAP_FILE_HEADER* fHeader) {\n    BITMAP_FILE_HEADER fileHeader;\n    BITMAP_INFO_HEADER infoHeader;\n    BITMAP_CORE_HEADER coreHeader;\n    uint32 headersize;\n\n    fread(&amp;fileHeader.Signature, sizeof(fileHeader.Signature), 1, inputfile);\n    printf(\"%d\", fileHeader.Signature);\n}\n</code></pre>\n\n<p>And use the main function to call everything and handle the errors</p>\n\n<pre><code>int main(void) {\n    FILE* inputfile = NULL;\n    BITMAP_INFO_HEADER infoHeader = {0};\n    BITMAP_FILE_HEADER fileHeader = {0};\n\n    if ( (inputfile = fopen(\"source.bmp\", \"rb\")) == NULL ) {\n        ERROR(\"can't open file.\")\n        return 1;\n    }\n\n    if ( read_header(inputfile, &amp;infoHeader, &amp;fileHeader) == 0 ) {\n        ERROR(\"Fileformat not supported.\")\n        return 1;\n    }\n}\n</code></pre>\n\n<p>Depending on what you allocate, you can use an <code>ERROR()</code> macro to clear everything like: </p>\n\n<pre><code>#define ERROR(ErrMsg) \\\n    printf(\"Error: %s\\n\", ErrMsg); \\\n    if (bitmapData != NULL) \\\n        free(bitmapData); \\\n    if (yourAlloc != NULL) \\\n        free(yourAlloc);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 510, "user_id": 5778300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a214fbbf28e4a6615ff6891f99e06c5?s=128&d=identicon&r=PG&f=1", "display_name": "Flikk", "link": "https://stackoverflow.com/users/5778300/flikk"}, "edited": false, "score": 0, "creation_date": 1453936212, "post_id": 35049885, "comment_id": 57824160, "body": "Did you try to execute Bobbys code? Because it is working. Then you are using c++ for a c question. I&#39;d say there is something wrong with his compiler / compiler settings or his BMP file"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1453937405, "post_id": 35049885, "comment_id": 57824646, "body": "1. Your code cannot be compiled with a <a href=\"https://stackoverflow.com/questions/tagged/c\">c</a> compiler, <a href=\"https://stackoverflow.com/questions/tagged/c\">c</a> and <a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b\">c++</a> are not the same. 2. You are using mandatory casts for <code>malloc()</code> but since it&#39;s c++ you should use c++ style casts.3. You never check the return value of <code>malloc()</code>. 4. If for some reason <code>fread()</code> reads less bytes than expected your code dereferences a <code>NULL</code> pointer. I could go on but I don&#39;t want to read your code anymore."}, {"owner": {"reputation": 209, "user_id": 3541439, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/9b7fc596fe4e690581262d0a891dd3ce?s=128&d=identicon&r=PG&f=1", "display_name": "user4925", "link": "https://stackoverflow.com/users/3541439/user4925"}, "reply_to_user": {"reputation": 510, "user_id": 5778300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a214fbbf28e4a6615ff6891f99e06c5?s=128&d=identicon&r=PG&f=1", "display_name": "Flikk", "link": "https://stackoverflow.com/users/5778300/flikk"}, "edited": false, "score": 0, "creation_date": 1453937444, "post_id": 35049885, "comment_id": 57824672, "body": "@Flikk Sorry I didn&#39;t go through his question properly. I tested his code it shows the correct value if i load a bmp image. And it shows some other values if it is not bmp file. You are right there must be something wrong with his compiler or his bmp file."}, {"owner": {"reputation": 209, "user_id": 3541439, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/9b7fc596fe4e690581262d0a891dd3ce?s=128&d=identicon&r=PG&f=1", "display_name": "user4925", "link": "https://stackoverflow.com/users/3541439/user4925"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1453938716, "post_id": 35049885, "comment_id": 57825139, "body": "@iharob  I actually wrote the code in C++(VS) but then I saw the OP had written his code in C so i thought it would be better if i also answered it in C. So, I converted my code to C but I guess I forgot about changing the last &#39;cout&#39; statement.And thanks for pointing out the malloc() mistakes. It&#39;s been a while since I wrote in C."}], "tags": [], "owner": {"reputation": 209, "user_id": 3541439, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/9b7fc596fe4e690581262d0a891dd3ce?s=128&d=identicon&r=PG&f=1", "display_name": "user4925", "link": "https://stackoverflow.com/users/3541439/user4925"}, "is_accepted": false, "score": -1, "last_activity_date": 1453940054, "last_edit_date": 1453940054, "creation_date": 1453936032, "answer_id": 35049885, "question_id": 35048463, "link": "https://stackoverflow.com/questions/35048463/why-does-fread-not-read-into-uint16-t-value-properly/35049885#35049885", "title": "Why does fread not read into uint16_t value properly?", "body": "<p>Here is the Solution try to understand it,Feel free to ask if you have any doubt. </p>\n\n<p>Remember the first two bytes of BMP Should always be <code>'B'</code> followed '<code>M'</code> or <code>hex</code> values <code>0x42</code> and <code>0x4D</code> or <code>int(8 bit)</code> values <code>66</code>  and <code>77</code></p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nint main()\n{\n   FILE *fp = NULL;\n   int fsize,result;\n   char *buffer = NULL;\n\n   fp = fopen(\"fileName.bmp\", \"rb+\");\n   if (fp == NULL)\n   {\n     printf( \"Error! File Not found!\\n\");\n   }\n   else\n   {\n      fseek(fp, 0, SEEK_END);\n      fsize = ftell(fp);\n      fseek(fp, 0, SEEK_SET);\n      printf(\"File Size:%d\\n\",fsize);\n\n      buffer = malloc(sizeof(char)*fsize);\n      result=fread(buffer, sizeof(char), fsize, fp);\n\n      if (result != fsize)\n      {\n         printf(\"Error Reading file!\\n\");\n      }\n      fclose(fp);\n   }\n\n   //Remember the first two bytes of BMP Should always be\n   //'B' followed 'M' or hex values 0x42 and 0x4D or int(8 bit) values 66  and 77\n   if (buffer[0] == 'B' &amp;&amp; buffer[1] == 'M')\n   {\n     printf(\"File is BMP!\\n\");\n   }\n   else\n   {\n     printf(\"Not BMP!\\n\");\n   }\n\n   free(buffer);\n   buffer = NULL;\n\n   return 0;\n}\n</code></pre>\n\n<p>if you want int(8 bit) values of the bmp file then you can add the following code lines,</p>\n\n<pre><code>char *buffer = NULL;\nint *fdata = NULL;\n\n//Get the file size as in above code and after that\nbuffer = malloc(sizeof(char)*fsize);\nfdata =  malloc(sizeof(int)*fsize);\n\nresult=fread(buffer, sizeof(char), fsize, fp);\nif (result != fsize)\n{\n   printf(\"Error Reading file!\\n\");\n}\n\nfor (int i = 0; i &lt; fsize; i++)\n{\n    if (buffer[i] &lt; 0)\n    {\n        fdata[i] = 256 + (int)buffer[i];\n    }\n    else\n    {\n        fdata[i] = (int)buffer[i];\n    }\n}\nfor (int i = 0; i &lt; fsize; i++)\n{\n    printf(\"%d \",fdata[i]);\n}\n\n//free up after your done\nfree(buffer);\nbuffer=NULL;\nfree(fdata);\nfdata=NULL;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 510, "user_id": 5778300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a214fbbf28e4a6615ff6891f99e06c5?s=128&d=identicon&r=PG&f=1", "display_name": "Flikk", "link": "https://stackoverflow.com/users/5778300/flikk"}, "edited": false, "score": 0, "creation_date": 1453938260, "post_id": 35050266, "comment_id": 57824990, "body": "He is opening something. Otherwise i&#39;d expect a segmentation fault. I&#39;d say he is opening a file that is not a BMP"}, {"owner": {"reputation": 1159, "user_id": 4992966, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FZLoM.jpg?s=128&g=1", "display_name": "Tresdon", "link": "https://stackoverflow.com/users/4992966/tresdon"}, "reply_to_user": {"reputation": 510, "user_id": 5778300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a214fbbf28e4a6615ff6891f99e06c5?s=128&d=identicon&r=PG&f=1", "display_name": "Flikk", "link": "https://stackoverflow.com/users/5778300/flikk"}, "edited": false, "score": 0, "creation_date": 1453938910, "post_id": 35050266, "comment_id": 57825198, "body": "Why do you insist he is opening something? It&#39;s not in mode &quot;r+&quot; and it seems like the memory at the location is still uninitialized"}, {"owner": {"reputation": 17, "user_id": 5416328, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6367ef60776bb3ef01644e4faa333983?s=128&d=identicon&r=PG&f=1", "display_name": "Bobby", "link": "https://stackoverflow.com/users/5416328/bobby"}, "edited": false, "score": 1, "creation_date": 1453940126, "post_id": 35050266, "comment_id": 57825579, "body": "OMG!  My bmp files were in my project folder, but my .cpp and .h files were in a different folder this entire time.  Everything works perfectly now!  When I print the value of sig, I get 19778 which is exactly what I need THANK YOU"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1453958550, "post_id": 35050266, "comment_id": 57830909, "body": "Shouldn&#39;t it have printed <code>Cannot open file</code> if he gave the wrong paths?"}, {"owner": {"reputation": 1159, "user_id": 4992966, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FZLoM.jpg?s=128&g=1", "display_name": "Tresdon", "link": "https://stackoverflow.com/users/4992966/tresdon"}, "edited": false, "score": 0, "creation_date": 1453959178, "post_id": 35050266, "comment_id": 57831137, "body": "Yeah, it&#39;s unclear if it was printing that, because it definitely should have if the file didn&#39;t exist, as <code>f==0</code> would have returned true. perhaps the file was created sometime in the process, and so there was the correctly named file of whatever was being passed in but it was empty? Kinda hard to tell but you&#39;re correct it should have."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1453982027, "post_id": 35050266, "comment_id": 57844190, "body": "So, all this boils down to &#39;didn&#39;t specify the path right&#39;?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1453982338, "post_id": 35050266, "comment_id": 57844386, "body": "And the code did not properly handle the error conditions. Hopefully that part was fixed because just adjusting the path is not the whole solution."}, {"owner": {"reputation": 1159, "user_id": 4992966, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FZLoM.jpg?s=128&g=1", "display_name": "Tresdon", "link": "https://stackoverflow.com/users/4992966/tresdon"}, "edited": false, "score": 0, "creation_date": 1453994536, "post_id": 35050266, "comment_id": 57853702, "body": "Right, there&#39;s still a couple of shortcomings in the code snippet, but yeah, it did basically boil down to double checking the file paths it seems, as the code should have been doing what he expected, however project management and not the code was the silent killer here."}], "tags": [], "owner": {"reputation": 1159, "user_id": 4992966, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FZLoM.jpg?s=128&g=1", "display_name": "Tresdon", "link": "https://stackoverflow.com/users/4992966/tresdon"}, "is_accepted": true, "score": 0, "last_activity_date": 1453937778, "creation_date": 1453937778, "answer_id": 35050266, "question_id": 35048463, "link": "https://stackoverflow.com/questions/35048463/why-does-fread-not-read-into-uint16-t-value-properly/35050266#35050266", "title": "Why does fread not read into uint16_t value properly?", "body": "<p>Your code totally should work. You're allocating 2 bytes for <code>sig</code> and then reading 2 bytes into it from the beginning of the file correctly. As long as these first two bytes are <code>BM</code>or '0x4D42' then you should be good.</p>\n\n<p><strong>My guess is that the issue lies with your directory/file paths.</strong></p>\n\n<p>Check to make sure that the file you are passing in has the correct filepath. Note that to pass it with a relative filepath you will need to make the filepath relative to the project's root directory.</p>\n\n<p>Hope this helps!</p>\n"}], "owner": {"reputation": 17, "user_id": 5416328, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6367ef60776bb3ef01644e4faa333983?s=128&d=identicon&r=PG&f=1", "display_name": "Bobby", "link": "https://stackoverflow.com/users/5416328/bobby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1124, "favorite_count": 0, "accepted_answer_id": 35050266, "answer_count": 5, "score": -1, "last_activity_date": 1453940054, "creation_date": 1453930344, "last_edit_date": 1453935653, "question_id": 35048463, "link": "https://stackoverflow.com/questions/35048463/why-does-fread-not-read-into-uint16-t-value-properly", "title": "Why does fread not read into uint16_t value properly?", "body": "<p>When trying to read in a signature from a bmp file, and after calling fread, <code>sig</code>contains <code>52428</code>Note this is <code>0xCCCC</code> instead of <code>19778</code>, which is the proper decimal value for <code>0x4D42</code> or <code>'BM'</code> which is the proper header signature for a BMP file.</p>\n\n<pre><code>uint16_t sig;\n// 0. If any of the operations fail, free any memory and return 0\n\n// 1. Open the file\nFILE *f = fopen(file, \"r\");\nif (f == 0) {\n    printf(\"Cannot open file\\n\");\n}\n\n// 2a. Read the initial fields of the header; verify that the file type (BM) is correct.\nfseek(f, 0, SEEK_SET);\nfread(&amp;sig, sizeof(uint16_t), 1, f); // signature\nprintf(\"%d\\n\", sig);\nif (sig != 0x4D42) {\n    printf(\"not a bmp file!\\n\");\n    return 0;\n}\n</code></pre>\n\n<p>I tried reading in one byte at a time using uint8_t, as well as many other solutions to fixing this problem.</p>\n\n<p>It seems like <code>fread</code> is just not properly writing to <code>sig</code> because <code>CC</code> is the default format for uninitialized memory using the compiler that I am using. Any help would be appreciated.</p>\n\n<p>Here is the bmp file that I'm trying to read in:\n<a href=\"http://i.stack.imgur.com/PZuOS.jpg\" rel=\"nofollow\">image</a></p>\n"}, {"tags": ["c++", "c", "visual-studio", "windows-ce", "poco-libraries"], "answers": [{"comments": [{"owner": {"reputation": 1830, "user_id": 1836314, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/de3c226fadd10d60dcde907f836efc6a?s=128&d=identicon&r=PG", "display_name": "matpop", "link": "https://stackoverflow.com/users/1836314/matpop"}, "edited": false, "score": 0, "creation_date": 1454692490, "post_id": 35223200, "comment_id": 58174202, "body": "Thank you very much for your feedback. That&#39;s exactly what I thought too, but I&#39;m unable to find problems in my include paths. There seems to be no reference to the Windows SDK inside <b>Options &gt; Projects and Solutions &gt; VC++ Directories &gt; <i>my platform</i></b>, all the include paths seem to be ok and there&#39;s no additional include path inside the foundation vcproj apart from <code>.\\include</code>"}, {"owner": {"reputation": 624, "user_id": 3087117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79a2251e4c9eedce40264e2e7d5ca9d9?s=128&d=identicon&r=PG&f=1", "display_name": "Julien Ruffin", "link": "https://stackoverflow.com/users/3087117/julien-ruffin"}, "reply_to_user": {"reputation": 1830, "user_id": 1836314, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/de3c226fadd10d60dcde907f836efc6a?s=128&d=identicon&r=PG", "display_name": "matpop", "link": "https://stackoverflow.com/users/1836314/matpop"}, "edited": false, "score": 1, "creation_date": 1455010237, "post_id": 35223200, "comment_id": 58286728, "body": "The only remaining place I can imagine Visual Studio getting this header path from is the INCLUDE environment variable. You might want to check it. Outside of that, and having built the very same version, I cannot figure out from where the project would otherwise get that path..."}], "tags": [], "owner": {"reputation": 624, "user_id": 3087117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79a2251e4c9eedce40264e2e7d5ca9d9?s=128&d=identicon&r=PG&f=1", "display_name": "Julien Ruffin", "link": "https://stackoverflow.com/users/3087117/julien-ruffin"}, "is_accepted": false, "score": 1, "last_activity_date": 1454672123, "creation_date": 1454672123, "answer_id": 35223200, "question_id": 35048405, "link": "https://stackoverflow.com/questions/35048405/build-poco-c-for-wince-winbase-h-related-errors/35223200#35223200", "title": "Build POCO C++ for WinCE: winbase.h related errors", "body": "<p>Something is off with either your SDK or the include paths you are using. A CE build should never use anything under <code>C:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\\</code>; these are headers of the desktop Windows SDK. The <code>winbase.h</code> used by your build should be from the device's SDK headers unter <code>c:\\Program Files (x86)\\Windows CE Tools\\SDKs\\[platform name]\\Include\\[architecture]\\</code>.</p>\n\n<p>You should check whether the desktop Windows SDK headers are somewhere in your include paths and remove them accordingly. Since CppUnit seems to be building correctly and assuming you can successfully build other software with the same device SDK, the first place to look for them would be in Foundation_CE_vs90.vcproj.</p>\n"}, {"tags": [], "owner": {"reputation": 483, "user_id": 3870069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a658b0d752c6f825bd0f70a71420e065?s=128&d=identicon&r=PG&f=1", "display_name": "Hawkez", "link": "https://stackoverflow.com/users/3870069/hawkez"}, "is_accepted": false, "score": 1, "last_activity_date": 1457536545, "last_edit_date": 1457536545, "creation_date": 1457468945, "answer_id": 35877383, "question_id": 35048405, "link": "https://stackoverflow.com/questions/35048405/build-poco-c-for-wince-winbase-h-related-errors/35877383#35877383", "title": "Build POCO C++ for WinCE: winbase.h related errors", "body": "<p>One possibility is that an include path exists for the Windows SDK 6.0A in the VC++ Directories.</p>\n\n<ol>\n<li>In Visual Studio go to Tools>Options>Projects and Solutions> VC++ Directories</li>\n<li>Select your device platform in the \"Platform\" drop-down box at the top</li>\n<li>Select \"Include files\" in the \"Show directories for\" drop-down box.</li>\n<li>If there is a path to the Windows 6.0A SDK or any other SDK remove it.</li>\n<li>Add the path to the SDK for your device i.e.:C:\\Program Files (x86)\\Windows CE Tools\\SDKs\\[Your Platform SDK]\\Include\\[Your chip architecture]\\</li>\n</ol>\n\n<p>There may be some variation in the SDK directory as that is dependent on the SDK installer and your choices during install.</p>\n\n<p>This may have happened if you installed or worked on a regular Windows SDK.  That is what happened to me.</p>\n\n<p>Also, there may be an issue with the library files as well.  In step 3 above choose \"Library files\" and make matching changes.</p>\n"}], "owner": {"reputation": 1830, "user_id": 1836314, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/de3c226fadd10d60dcde907f836efc6a?s=128&d=identicon&r=PG", "display_name": "matpop", "link": "https://stackoverflow.com/users/1836314/matpop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 690, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1463447101, "creation_date": 1453930110, "last_edit_date": 1454257516, "question_id": 35048405, "link": "https://stackoverflow.com/questions/35048405/build-poco-c-for-wince-winbase-h-related-errors", "title": "Build POCO C++ for WinCE: winbase.h related errors", "body": "<p>I'm trying to build POCO 1.6.1 C++ libraries from Visual Studio 2008 Command Prompt (VS 9.0 Professional SP1 with Windows Embedded Compact 7 ATL Update) on Windows 7 Pro x64 using the provided <code>buildwin.cmd</code> like this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>buildwin 90 build static_mt both WinCE samples\n</code></pre>\n\n<p>However the build of the Foundation library (<code>Foundation_CE_vs90.vcproj</code>) fails due to several errors in <code>C:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\\winbase.h</code>, apparently needed for the following files:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>wce_winbase.c\nwce_path.c\nwce_directorymanagement.c\nwce_clock.c\n</code></pre>\n\n<p>The file <code>wce_rewind.c</code> also seems to be somewhat buggy itself.<br>\nSomething trivial is probably going on but I just can't find it out. Here's attached some relevant part of the output (the target <code>Beckhoff_HMI_700 (x86)</code> is a Windows Embedded Compact 7 device of my interest, whose SDK appears to be correctly configured on my machine - I can provide more detail about that if needed). Many thanks everybody.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Setting environment for using Microsoft Visual Studio 2008 x86 tools.\n\n\n########################################################################\n####\n#### STARTING VISUAL STUDIO BUILD (vs90, WinCE)\n####\n########################################################################\n\n\nThe following configurations will be built:\ndebug_static_mt\nrelease_static_mt\n\n++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\n++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\n++++ Building [CppUnit_CE_vs90.vcproj]\n++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\n++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\n\n\nMicrosoft (R) Visual Studio Version 9.0.30729.1.\nCopyright (C) Microsoft Corp. All rights reserved.\n1&gt;------ Build started: Project: CppUnit, Configuration: debug_static_mt Beckhoff_HMI_700 (x86) ------\n1&gt;Compiling...\n1&gt;TextTestResult.cpp\n1&gt;TestSuite.cpp\n1&gt;TestRunner.cpp\n1&gt;TestResult.cpp\n1&gt;TestFailure.cpp\n1&gt;TestDecorator.cpp\n1&gt;TestCase.cpp\n1&gt;Generating Code...\n1&gt;Compiling...\n1&gt;CppUnitException.cpp\n1&gt;Creating library...\n1&gt;Build log was saved at \"file://c:\\poco-1.6.1\\CppUnit\\obj\\Beckhoff_HMI_700 (x86)\\debug_static_mt\\BuildLog.htm\"\n1&gt;CppUnit - 0 error(s), 0 warning(s)\n========== Build: 1 succeeded, 0 failed, 0 up-to-date, 0 skipped ==========\n\n\n\n\nMicrosoft (R) Visual Studio Version 9.0.30729.1.\nCopyright (C) Microsoft Corp. All rights reserved.\n1&gt;------ Build started: Project: CppUnit, Configuration: release_static_mt Beckhoff_HMI_700 (x86) ------\n1&gt;Compiling...\n1&gt;TextTestResult.cpp\n1&gt;TestSuite.cpp\n1&gt;TestRunner.cpp\n1&gt;TestResult.cpp\n1&gt;TestFailure.cpp\n1&gt;TestDecorator.cpp\n1&gt;TestCase.cpp\n1&gt;Generating Code...\n1&gt;Compiling...\n1&gt;CppUnitException.cpp\n1&gt;Creating library...\n1&gt;Build log was saved at \"file://c:\\poco-1.6.1\\CppUnit\\obj\\Beckhoff_HMI_700 (x86)\\release_static_mt\\BuildLog.htm\"\n1&gt;CppUnit - 0 error(s), 0 warning(s)\n========== Build: 1 succeeded, 0 failed, 0 up-to-date, 0 skipped ==========\n\n\n\n\n------------------------------------------------------------------------\n------------------------------------------------------------------------\n---- Done building [CppUnit_CE_vs90.vcproj]\n------------------------------------------------------------------------\n------------------------------------------------------------------------\n\n\n++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\n++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\n++++ Building [Foundation_CE_vs90.vcproj]\n++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\n++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\n\n\nMicrosoft (R) Visual Studio Version 9.0.30729.1.\nCopyright (C) Microsoft Corp. All rights reserved.\n1&gt;------ Build started: Project: Foundation, Configuration: debug_static_mt Beckhoff_HMI_700 (x86) ------\n1&gt;Compiling...\n1&gt;Base32Decoder.cpp\n1&gt;VarIterator.cpp\n1&gt;VarHolder.cpp\n1&gt;Var.cpp\n1&gt;Void.cpp\n1&gt;StringTokenizer.cpp\n1&gt;DirectoryIteratorStrategy.cpp\n1&gt;NumericString.cpp\n1&gt;String.cpp\n1&gt;SortedDirectoryIterator.cpp\n1&gt;RefCountedObject.cpp\n1&gt;NumberParser.cpp\n1&gt;NumberFormatter.cpp\n1&gt;NestedDiagnosticContext.cpp\n1&gt;MemoryPool.cpp\n1&gt;FPEnvironment.cpp\n1&gt;Format.cpp\n1&gt;Exception.cpp\n1&gt;Error.cpp\n1&gt;Environment.cpp\n1&gt;Generating Code...\n1&gt;Compiling...\n1&gt;Debugger.cpp\n1&gt;Checksum.cpp\n1&gt;ByteOrder.cpp\n1&gt;Bugcheck.cpp\n1&gt;AtomicCounter.cpp\n1&gt;Generating Code...\n1&gt;Compiling...\n1&gt;wce_winbase.c\n1&gt;C:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\\winbase.h(238) : error C2016: C requires that a struct or union has at least one member\n1&gt;C:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\\winbase.h(238) : error C2061: syntax error : identifier 'ULONG_PTR'\n1&gt;C:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\\winbase.h(239) : error C2061: syntax error : identifier 'InternalHigh'\n1&gt;C:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\\winbase.h(239) : error C2059: syntax error : ';'\n1&gt;C:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\\winbase.h(242) : error C2016: C requires that a struct or union has at least one member\n1&gt;C:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\\winbase.h(242) : error C2061: syntax error : identifier 'DWORD'\n\n[...]\n\n1&gt;C:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\\winbase.h(418) : error C2061: syntax error : identifier 'VOID'\n1&gt;C:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\\winbase.h(418) : fatal error C1003: error count exceeds 100; stopping compilation\n1&gt;wce_unlink.c\n1&gt;wce_timesys.c\n1&gt;wce_time.c\n1&gt;wce_strerror.c\n1&gt;wce_stat.c\n1&gt;wce_setlocale.c\n1&gt;wce_rmdir.c\n1&gt;wce_rewind.c\n1&gt;.\\wcelibcex-1.0\\src\\wce_rewind.c(64) : error C2143: syntax error : missing ')' before '*'\n1&gt;.\\wcelibcex-1.0\\src\\wce_rewind.c(64) : error C2143: syntax error : missing '{' before '*'\n1&gt;.\\wcelibcex-1.0\\src\\wce_rewind.c(64) : error C2059: syntax error : ')'\n1&gt;.\\wcelibcex-1.0\\src\\wce_rewind.c(65) : error C2054: expected '(' to follow 'fp'\n1&gt;wce_rename.c\n1&gt;wce_path.c\n1&gt;C:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\\winbase.h(238) : error C2016: C requires that a struct or union has at least one member\n\n[...]\n\n1&gt;C:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\\winbase.h(436) : fatal error C1003: error count exceeds 100; stopping compilation\n1&gt;wce_mktime.c\n1&gt;wce_mkdir.c\n1&gt;wce_localtime.c\n1&gt;wce_lfind.c\n1&gt;wce_gettimeofday.c\n1&gt;wce_getopt.c\n1&gt;wce_getenv.c\n1&gt;wce_findfile.c\n1&gt;wce_errno.c\n1&gt;Generating Code...\n1&gt;Compiling...\n1&gt;wce_directorymanagement.c\n1&gt;C:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\\winbase.h(238) : error C2016: C requires that a struct or union has at least one member\n\n[...]\n\n1&gt;C:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\\winbase.h(418) : fatal error C1003: error count exceeds 100; stopping compilation\n1&gt;wce_ctime.c\n1&gt;wce_clock.c\n1&gt;C:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\\winbase.h(238) : error C2016: C requires that a struct or union has at least one member\n\n[...]\n\n1&gt;C:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\\winbase.h(418) : fatal error C1003: error count exceeds 100; stopping compilation\n1&gt;wce_bsearch.c\n1&gt;wce_asctime.c\n1&gt;.\\wcelibcex-1.0\\src\\wce_asctime.c(124) : warning C4013: 'sprintf' undefined; assuming extern returning int\n1&gt;wce_access.c\n1&gt;.\\wcelibcex-1.0\\src\\wce_access.c(67) : error C2065: 'SFGAO_READONLY' : undeclared identifier\n1&gt;wce_abort.c\n1&gt;Generating Code...\n1&gt;Compiling...\n1&gt;HashStatistic.cpp\n1&gt;Hash.cpp\n1&gt;EventArgs.cpp\n1&gt;TaskNotification.cpp\n1&gt;TaskManager.cpp\n\n[...]\n\n1&gt;pcre_exec.c\n1&gt;pcre_compile.c\n1&gt;Generating Code...\n1&gt;Compiling...\n1&gt;pcre_chartables.c\n1&gt;Generating Code...\n1&gt;Compiling...\n1&gt;RegularExpression.cpp\n1&gt;SharedLibrary.cpp\n1&gt;c:\\poco-1.6.1\\foundation\\src\\SharedLibrary_WIN32U.cpp(86) : error C3861: 'GetProcAddressW': identifier not found\n1&gt;Manifest.cpp\n1&gt;SHA1Engine.cpp\n1&gt;RandomStream.cpp\n\n[...]\n\n1&gt;Generating Code...\n1&gt;Compiling...\n1&gt;zutil.c\n1&gt;C:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\\stdio.h(720) : error C2059: syntax error : '('\n1&gt;.\\src\\zutil.c(147) : error C2072: '_errno' : initialization of a function\n1&gt;trees.c\n1&gt;inftrees.c\n1&gt;inflate.c\n1&gt;inffast.c\n\n[...]\n\n1&gt;Base64Decoder.cpp\n1&gt;Base32Encoder.cpp\n1&gt;Generating Code...\n1&gt;Build log was saved at \"file://c:\\poco-1.6.1\\Foundation\\obj\\Foundation\\Beckhoff_HMI_700 (x86)\\debug_static_mt\\BuildLog.htm\"\n1&gt;Foundation - 416 error(s), 1 warning(s)\n2&gt;------ Build started: Project: TestSuite, Configuration: debug_static_mt Beckhoff_HMI_700 (x86) ------\n3&gt;------ Build started: Project: TestApp, Configuration: debug_static_mt Beckhoff_HMI_700 (x86) ------\n4&gt;------ Build started: Project: TestLibrary, Configuration: debug_static_mt Beckhoff_HMI_700 (x86) ------\n3&gt;Compiling...\n4&gt;Compiling...\n3&gt;TestApp_WINCE.cpp\n4&gt;TestLibrary.cpp\n2&gt;Compiling...\n2&gt;AnyTest.cpp\n2&gt;VarTest.cpp\n4&gt;TestPlugin.cpp\n4&gt;Generating Code...\n3&gt;Linking...\n4&gt;Linking...\n3&gt;LINK : fatal error LNK1181: cannot open input file 'PocoFoundationmtd.lib'\n4&gt;LINK : fatal error LNK1181: cannot open input file 'PocoFoundationmtd.lib'\n3&gt;Build log was saved at \"file://c:\\poco-1.6.1\\Foundation\\testsuite\\obj\\TestApp\\Beckhoff_HMI_700 (x86)\\debug_static_mt\\BuildLog.htm\"\n3&gt;TestApp - 1 error(s), 0 warning(s)\n4&gt;Build log was saved at \"file://c:\\poco-1.6.1\\Foundation\\testsuite\\obj\\TestLibrary\\Beckhoff_HMI_700 (x86)\\debug_static_mt\\BuildLog.htm\"\n4&gt;TestLibrary - 1 error(s), 0 warning(s)\n2&gt;DynamicTestSuite.cpp\n2&gt;SimpleHashTableTest.cpp\n2&gt;LinearHashTableTest.cpp\n2&gt;HashTableTest.cpp\n2&gt;HashSetTest.cpp\n1&gt;inffast.c\n\n[...]\n\n2&gt;ByteOrderTest.cpp\n2&gt;AutoReleasePoolTest.cpp\n2&gt;AutoPtrTest.cpp\n2&gt;ArrayTest.cpp\n2&gt;Generating Code...\n2&gt;Linking...\n2&gt;LINK : fatal error LNK1181: cannot open input file 'PocoFoundationmtd.lib'\n2&gt;Build log was saved at \"file://c:\\poco-1.6.1\\Foundation\\testsuite\\obj\\TestSuite\\Beckhoff_HMI_700 (x86)\\debug_static_mt\\BuildLog.htm\"\n2&gt;TestSuite - 1 error(s), 0 warning(s)\n========== Build: 0 succeeded, 4 failed, 0 up-to-date, 0 skipped ==========\n\n\nXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\nXXX  BUILD FAILED. EXITING. XXX\nXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\n</code></pre>\n"}, {"tags": ["c", "visual-studio", "c99", "resharper-c++"], "comments": [{"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1453935900, "post_id": 35047835, "comment_id": 57824042, "body": "Resharper C++ seems to be for C++, not C..."}, {"owner": {"reputation": 83, "user_id": 3976133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f287f0952dc8249b22f18e0be2eb0d28?s=128&d=identicon&r=PG&f=1", "display_name": "Ji\u0159&#237; Kyzlink", "link": "https://stackoverflow.com/users/3976133/ji%c5%99%c3%ad-kyzlink"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1454001494, "post_id": 35047835, "comment_id": 57858799, "body": "Of course but &quot;The Resharper website states that it fully supports C99.&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 5471992, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L9qiX.jpg?s=128&g=1", "display_name": "Olga Rodygina", "link": "https://stackoverflow.com/users/5471992/olga-rodygina"}, "is_accepted": true, "score": 0, "last_activity_date": 1454071696, "creation_date": 1454071696, "answer_id": 35084972, "question_id": 35047835, "link": "https://stackoverflow.com/questions/35047835/resharper-c-enforce-c99/35084972#35084972", "title": "Resharper C++ enforce C99", "body": "<p>We are sorry for the inconvenience.\nI've created an issue in YouTrack about it: <a href=\"https://youtrack.jetbrains.com/issue/RSCPP-15938\" rel=\"nofollow\">https://youtrack.jetbrains.com/issue/RSCPP-15938</a>\nYou can follow this request and vote for it.</p>\n"}], "owner": {"reputation": 83, "user_id": 3976133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f287f0952dc8249b22f18e0be2eb0d28?s=128&d=identicon&r=PG&f=1", "display_name": "Ji\u0159&#237; Kyzlink", "link": "https://stackoverflow.com/users/3976133/ji%c5%99%c3%ad-kyzlink"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "accepted_answer_id": 35084972, "answer_count": 1, "score": 0, "last_activity_date": 1454071696, "creation_date": 1453928246, "last_edit_date": 1453935938, "question_id": 35047835, "link": "https://stackoverflow.com/questions/35047835/resharper-c-enforce-c99", "title": "Resharper C++ enforce C99", "body": "<p>I am writing an embedded application in plain <code>C99</code> in Visual Studio with VisualGDB and Resharper c++.\nThe Resharper website states that it fully supports <code>C99</code>. </p>\n\n<p>But if I have a typedef struct like this</p>\n\n<pre><code>typedef struct { int Bar;} Foo_t;\n</code></pre>\n\n<p>And some function that return this struct</p>\n\n<pre><code>Foo_t Foo(void){\n   return (Foo_t){.Bar = 0;};\n}\n</code></pre>\n\n<p>Resharper is completely confused (unreachable code, missing semicolon etc.). Is there any way to turn on <code>C99</code> standard in resharper or does it just not support this type of returns?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1453930570, "post_id": 35047816, "comment_id": 57821194, "body": "This is what I&#39;d expect in pthreads.  Once the main process exits, the threads would go away too."}, {"owner": {"reputation": 5563, "user_id": 5808727, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a8de86a7bb2dbb67425971abc1e1cef8?s=128&d=identicon&r=PG&f=1", "display_name": "Pooya", "link": "https://stackoverflow.com/users/5808727/pooya"}, "edited": false, "score": 0, "creation_date": 1453930614, "post_id": 35047816, "comment_id": 57821215, "body": "There is a part at the end about the obsolete methods, is it useful in your case?"}, {"owner": {"reputation": 3863, "user_id": 1158990, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/75c96a358578ef004ae24e4204e9cd0b?s=128&d=identicon&r=PG", "display_name": "gbtimmon", "link": "https://stackoverflow.com/users/1158990/gbtimmon"}, "reply_to_user": {"reputation": 5563, "user_id": 5808727, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a8de86a7bb2dbb67425971abc1e1cef8?s=128&d=identicon&r=PG&f=1", "display_name": "Pooya", "link": "https://stackoverflow.com/users/5808727/pooya"}, "edited": false, "score": 1, "creation_date": 1453945366, "post_id": 35047816, "comment_id": 57827056, "body": "@pooya no, ucontext is a distinct technology and interesting in the context of co-routines -- my understanding is that ucontext is obsolete because it uses non posix approved pointer styles, which is not really a good reason not to use the library."}, {"owner": {"reputation": 3863, "user_id": 1158990, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/75c96a358578ef004ae24e4204e9cd0b?s=128&d=identicon&r=PG", "display_name": "gbtimmon", "link": "https://stackoverflow.com/users/1158990/gbtimmon"}, "reply_to_user": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 1, "creation_date": 1453945445, "post_id": 35047816, "comment_id": 57827081, "body": "@bruceg - I understand that but if I wanted it to behave like pthreads i would use pthreads. :)"}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1453948240, "post_id": 35047816, "comment_id": 57827832, "body": "@gbtimmon But, the comment about the functions being obsolete and replaced with pthreads would seem to indicate that the behavior is the same.  There&#39;s no magic about threads.  The executable would normally go away when main returns.  And when the process exists, so do the threads. That&#39;s why you always see a pthread_join in the pthreads tutorials, so the main function waits for the threads to complete.."}], "answers": [{"tags": [], "owner": {"reputation": 1124, "user_id": 5844347, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zZzQU.png?s=128&g=1", "display_name": "dancancode", "link": "https://stackoverflow.com/users/5844347/dancancode"}, "is_accepted": false, "score": 1, "last_activity_date": 1454001694, "last_edit_date": 1454001694, "creation_date": 1453957787, "answer_id": 35053294, "question_id": 35047816, "link": "https://stackoverflow.com/questions/35047816/ucontext-h-and-uc-link-not-returning-from-main-thread/35053294#35053294", "title": "ucontext.h and uc_link not returning from main thread", "body": "<p>Replacing main in the above code with the following produces the expected output.</p>\n\n<pre><code>int\nmain (void)\n{\n    char st1[8192];\n    char st2[8192];\n\n    getcontext(&amp;ctx[1]);\n    ctx[1].uc_stack.ss_sp = st1;\n    ctx[1].uc_stack.ss_size = sizeof st1;\n    ctx[1].uc_link = &amp;ctx[0];\n    makecontext(&amp;ctx[1], f1, 0);\n\n    getcontext(&amp;ctx[2]);\n    ctx[2].uc_stack.ss_sp = st2;\n    ctx[2].uc_stack.ss_size = sizeof st2;\n    ctx[2].uc_link = &amp;ctx[1];\n    makecontext(&amp;ctx[2], f2, 0);\n\n    getcontext(&amp;ctx[0]);\n    ctx[0].uc_mcontext.gregs[16] += 0x26;\n    puts(\"finish main\");\n    setcontext(&amp;ctx[2]);\n    return 0;\n}\n</code></pre>\n\n<p><strong>BUT</strong> this doesn't do what you say you want.</p>\n\n<p>The context functions are a way to put a specific return address on the stack.  </p>\n\n<ul>\n<li>getcontext captures the address of the next instruction into a struct</li>\n<li>makecontext changes the address in the struct to that of its function argument</li>\n<li>setcontext/swapcontext puts the address in the struct on the stack and returns to it</li>\n</ul>\n\n<p>This program above has only one thread of control.  I think you really want multiple threads, in which case you wouldn't use these context functions.</p>\n\n<p>For more information about the stack and the C calling convention, Eli Bendersky has two nice articles with diagrams:</p>\n\n<ul>\n<li><a href=\"http://eli.thegreenplace.net/2011/02/04/where-the-top-of-the-stack-is-on-x86/\" rel=\"nofollow\">Where the top of the stack is on x86</a></li>\n<li><a href=\"http://eli.thegreenplace.net/2011/09/06/stack-frame-layout-on-x86-64/\" rel=\"nofollow\">Stack frame layout on x86-64</a></li>\n</ul>\n\n<p>FWIW, to get the 0x26 constant in the above code, I had to disassemble main to find the first address after the setcontext call.</p>\n"}, {"tags": [], "owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "is_accepted": false, "score": 0, "last_activity_date": 1459520320, "creation_date": 1459520320, "answer_id": 36358700, "question_id": 35047816, "link": "https://stackoverflow.com/questions/35047816/ucontext-h-and-uc-link-not-returning-from-main-thread/36358700#36358700", "title": "ucontext.h and uc_link not returning from main thread", "body": "<p>At the link you provided they say</p>\n\n<blockquote>\n  <p>The <em>uc_link</em> member is used to determine the context that shall be\n  resumed when the context being modified by <em>makecontext</em>() returns.</p>\n</blockquote>\n\n<p>Since your program doesn't resume (execute) any context <strong>modified by <em>makecontext</em>()</strong>, the above does not apply and the program ends without resuming any context.</p>\n\n<p>To achieve what you want, you have to define some function like</p>\n\n<pre><code>    void main_context()\n    {\n        // do everything you yet wanted to do in main()\n        puts(\"finished main\");\n    }\n</code></pre>\n\n<p>and replace the</p>\n\n<pre><code>    return 0;\n</code></pre>\n\n<p>with</p>\n\n<pre><code>    char st0[8192];\n    ctx[0].uc_stack.ss_sp = st0;\n    ctx[0].uc_stack.ss_size = sizeof st0;\n    makecontext(&amp;ctx[0], main_context, 0);\n    return -setcontext(&amp;ctx[0]);\n</code></pre>\n"}], "owner": {"reputation": 3863, "user_id": 1158990, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/75c96a358578ef004ae24e4204e9cd0b?s=128&d=identicon&r=PG", "display_name": "gbtimmon", "link": "https://stackoverflow.com/users/1158990/gbtimmon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1638, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1459520320, "creation_date": 1453928183, "question_id": 35047816, "link": "https://stackoverflow.com/questions/35047816/ucontext-h-and-uc-link-not-returning-from-main-thread", "title": "ucontext.h and uc_link not returning from main thread", "body": "<p>Here is what I want to do as part of a larger thread scheduling api.</p>\n\n<p>I want to create a thread and when the main thread (the one creating the thread) exits, the thread I just created should execute. I am trying to do this with ucontext and the uc_link, but it is not working. It appears that my uc_link does not work when I try to set it for the current thread. </p>\n\n<p>Here is a slightly modified example from this link which is what I tired to make this work. </p>\n\n<p><a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/makecontext.html\" rel=\"nofollow\">http://pubs.opengroup.org/onlinepubs/009695399/functions/makecontext.html</a></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ucontext.h&gt;\n\n\nstatic ucontext_t ctx[3];\n\n\nstatic void\nf1 (void)\n{\n    puts(\"start f1\");\n    swapcontext(&amp;ctx[1], &amp;ctx[2]);\n    puts(\"finish f1\");\n}\n\n\nstatic void\nf2 (void)\n{\n    puts(\"start f2\");\n    swapcontext(&amp;ctx[2], &amp;ctx[1]);\n    puts(\"finish f2\");\n}\n\n\nint\nmain (void)\n{\n    char st1[8192];\n    char st2[8192];\n\n\n    getcontext(&amp;ctx[1]);\n    ctx[1].uc_stack.ss_sp = st1;\n    ctx[1].uc_stack.ss_size = sizeof st1;\n    ctx[1].uc_link = 0;\n    makecontext(&amp;ctx[1], f1, 0);\n\n\n    getcontext(&amp;ctx[2]);\n    ctx[2].uc_stack.ss_sp = st2;\n    ctx[2].uc_stack.ss_size = sizeof st2;\n    ctx[2].uc_link = &amp;ctx[1];\n    makecontext(&amp;ctx[2], f2, 0);\n\n    getcontext(&amp;ctx[0]);\n    ctx[0].uc_link = &amp;ctx[2];\n    return 0;\n}\n</code></pre>\n\n<p>Expected output : </p>\n\n<pre><code>finished main\nstart f2\nstart f1\nfinish f2\nfinish f1\n</code></pre>\n\n<p>Given output : </p>\n\n<pre><code>finished main\n</code></pre>\n\n<p>How do I go about setting the uc_link for the current thread/process in a meaningful manner ? </p>\n"}, {"tags": ["c", "arduino", "teensy"], "comments": [{"owner": {"reputation": 2035, "user_id": 1768737, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f6c5d404c916367b21e31a9306de2146?s=128&d=identicon&r=PG&f=1", "display_name": "HCarrasko", "link": "https://stackoverflow.com/users/1768737/hcarrasko"}, "edited": false, "score": 0, "creation_date": 1453928943, "post_id": 35047768, "comment_id": 57820237, "body": "please add a title useful to describe you problem."}, {"owner": {"reputation": 3, "user_id": 5848934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70639497246ca9a971e154fc33c0ac1c?s=128&d=identicon&r=PG&f=1", "display_name": "SiGe", "link": "https://stackoverflow.com/users/5848934/sige"}, "reply_to_user": {"reputation": 2035, "user_id": 1768737, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f6c5d404c916367b21e31a9306de2146?s=128&d=identicon&r=PG&f=1", "display_name": "HCarrasko", "link": "https://stackoverflow.com/users/1768737/hcarrasko"}, "edited": false, "score": 0, "creation_date": 1454016083, "post_id": 35047768, "comment_id": 57867501, "body": "The title is my problem, those familiar with the issue would then notice it and be able to assist. Have a suggestion of how I might post a better title? @Hector"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5848934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70639497246ca9a971e154fc33c0ac1c?s=128&d=identicon&r=PG&f=1", "display_name": "SiGe", "link": "https://stackoverflow.com/users/5848934/sige"}, "edited": false, "score": 0, "creation_date": 1453930265, "post_id": 35047956, "comment_id": 57821038, "body": "That did it! Thank you so much!"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 0, "last_activity_date": 1453928678, "creation_date": 1453928678, "answer_id": 35047956, "question_id": 35047768, "link": "https://stackoverflow.com/questions/35047768/error-invalid-types-uint16-t-aka-short-unsigned-intuint8-t-aka-unsigned-ch/35047956#35047956", "title": "error: invalid types &#39;uint16_t {aka short unsigned int}[uint8_t {aka unsigned char}]&#39; for array subscript", "body": "<p>The problem is here:</p>\n\n<pre><code>void drawEye(      // Renders one eye.\n  uint8_t   e,     // Eye array index; 0 or 1 for left/right\n  uint16_t img) { // Pointer to image data\n</code></pre>\n\n<p>The function <code>drawEye</code> is expecting a single <code>uint16_t</code>, not a two-dimensional array.  So when you try to take an array index of it, you get an error because it's not an array.</p>\n\n<p>You need to define your function like this:</p>\n\n<pre><code>void drawEye(      // Renders one eye.\n  uint8_t   e,     // Eye array index; 0 or 1 for left/right\n  const uint16_t img[SCREEN_HEIGHT][SCREEN_WIDTH]) { // Pointer to image data\n</code></pre>\n\n<p>And call it like this:</p>\n\n<pre><code>    if(digitalRead(2) == LOW) {\n      drawEye(0, sclera);\n      drawEye(1, sclera);\n    }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "edited": false, "score": 1, "creation_date": 1453928980, "post_id": 35048032, "comment_id": 57820253, "body": "Better explanation by @dbush."}], "tags": [], "owner": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "is_accepted": false, "score": 1, "last_activity_date": 1453928917, "creation_date": 1453928917, "answer_id": 35048032, "question_id": 35047768, "link": "https://stackoverflow.com/questions/35047768/error-invalid-types-uint16-t-aka-short-unsigned-intuint8-t-aka-unsigned-ch/35048032#35048032", "title": "error: invalid types &#39;uint16_t {aka short unsigned int}[uint8_t {aka unsigned char}]&#39; for array subscript", "body": "<p>The variable <code>img</code>isn't a pointer, it's a <code>unsigned short int</code> which cannot be accessed as like <code>p = img[screenY][screenX];</code></p>\n\n<p>Change your parameter to <code>uint16_t* img</code>and access it like that <code>p = img[screenY*screenX];</code>, and then call then call the function like that <code>drawEye(0, sclera);</code>.</p>\n"}], "owner": {"reputation": 3, "user_id": 5848934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70639497246ca9a971e154fc33c0ac1c?s=128&d=identicon&r=PG&f=1", "display_name": "SiGe", "link": "https://stackoverflow.com/users/5848934/sige"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4444, "favorite_count": 0, "accepted_answer_id": 35047956, "answer_count": 2, "score": 0, "last_activity_date": 1453928917, "creation_date": 1453927990, "last_edit_date": 1453928727, "question_id": 35047768, "link": "https://stackoverflow.com/questions/35047768/error-invalid-types-uint16-t-aka-short-unsigned-intuint8-t-aka-unsigned-ch", "title": "error: invalid types &#39;uint16_t {aka short unsigned int}[uint8_t {aka unsigned char}]&#39; for array subscript", "body": "<p>Background:\nI'm currently working on gutting the Adafruit program for 'Uncanny Eyes.\" My intention is to be able to have a couple of momentary switches that will draw static images to a pair of 1.5\" OLEDs.</p>\n\n<p>This program uses a Teensy 3.1 or 3.2.</p>\n\n<p>I'm currently stuck after receiving the error </p>\n\n<blockquote>\n  <p>In function 'void drawEye(uint8_t, uint16_t)': uncannyEyes:146: error:\n  invalid types 'uint16_t {aka short unsigned int}[uint8_t {aka unsigned\n  char}]' for array subscript p = img[screenY][screenX];</p>\n</blockquote>\n\n<p>I'm new the the Stack Exchange community, so I apologize if I've done anything incorrectly!</p>\n\n<pre><code>#include &lt;SPI.h&gt;\n#include &lt;Adafruit_GFX.h&gt;      // Core graphics lib for Adafruit displays\n// Enable ONE of these #includes -- HUGE graphics tables for various eyes:\n//#include \"defaultEye.h\"        // Standard human-ish hazel eye\n//#include \"noScleraEye.h\"       // Large iris, no sclera\n//#include \"dragonEye.h\"         // Slit pupil fiery dragon/demon eye\n#include \"goatEye.h\"           // Horizontal pupil goat/Krampus eye\n// Then tweak settings below, e.g. change IRIS_MIN/MAX or disable TRACKING.\n\n// DISPLAY HARDWARE CONFIG -------------------------------------------------\n\n#include &lt;Adafruit_SSD1351.h&gt;  // OLED display library -OR-\n//#include &lt;Adafruit_ST7735.h&gt; // TFT display library (enable one only)\n\n#ifdef _ADAFRUIT_ST7735H_\ntypedef Adafruit_ST7735  displayType; // Using TFT display(s)\n#else\ntypedef Adafruit_SSD1351 displayType; // Using OLED display(s)\n#endif\n\n#define DISPLAY_DC      7 // Data/command pin for BOTH displays\n#define DISPLAY_RESET   8 // Reset pin for BOTH displays\n#define SELECT_L_PIN    9 // LEFT eye chip select pin\n#define SELECT_R_PIN   10 // RIGHT eye chip select pin\n\n// INPUT CONFIG (for eye motion -- enable or comment out as needed) --------\n\n#define WINK_L_PIN      0 // Pin for LEFT eye wink button\n#define BLINK_PIN       1 // Pin for blink button (BOTH eyes)\n#define WINK_R_PIN      2 // Pin for RIGHT eye wink button\n#define IMAGE_4      3 // Pin for RIGHT eye wink button\n#define IMAGE_5      4 // Pin for RIGHT eye wink button\n//#define AUTOBLINK         // If enabled, eyes blink autonomously\n\n// Probably don't need to edit any config below this line, -----------------\n// unless building a single-eye project (pendant, etc.), in which case one\n// of the two elements in the eye[] array further down can be commented out.\n\n// Eye blinks are a tiny 3-state machine.  Per-eye allows winks + blinks.\n#define NOBLINK 0     // Not currently engaged in a blink\n#define ENBLINK 1     // Eyelid is currently closing\n#define DEBLINK 2     // Eyelid is currently opening\ntypedef struct {\n  int8_t   pin;       // Optional button here for indiv. wink\n  uint8_t  state;     // NOBLINK/ENBLINK/DEBLINK\n  int32_t  duration;  // Duration of blink state (micros)\n  uint32_t startTime; // Time (micros) of last state change\n} eyeBlink;\n\nstruct {\n  displayType display; // OLED/TFT object\n  uint8_t     cs;      // Chip select pin\n  eyeBlink    blink;   // Current blink state\n} eye[] = { // OK to comment out one of these for single-eye display:\n  displayType(SELECT_L_PIN,DISPLAY_DC,0),SELECT_L_PIN,{WINK_L_PIN,NOBLINK},\n  displayType(SELECT_R_PIN,DISPLAY_DC,0),SELECT_R_PIN,{WINK_R_PIN,NOBLINK},\n};\n#define NUM_EYES (sizeof(eye) / sizeof(eye[0]))\n\nuint8_t\n  prevBtn        = 99,  // Button # pressed on last loop() iteration\n  btnCount       = 0;   // Number of iterations same button has been held\n\n// INITIALIZATION -- runs once at startup ----------------------------------\n\nvoid setup(void) {\n  uint8_t e;\n\n  Serial.begin(115200);\n  randomSeed(analogRead(A3)); // Seed random() from floating analog input\n\n  // Both displays share a common reset line; 0 is passed to display\n  // constructor (so no reset in begin()) -- must reset manually here:\n  pinMode(DISPLAY_RESET, OUTPUT);\n  digitalWrite(DISPLAY_RESET, LOW);  delay(1);\n  digitalWrite(DISPLAY_RESET, HIGH); delay(50);\n\n  for(e=0; e&lt;NUM_EYES; e++) { // Deselect all\n    pinMode(eye[e].cs, OUTPUT);\n    digitalWrite(eye[e].cs, HIGH);\n  }\n  for(e=0; e&lt;NUM_EYES; e++) {\n    digitalWrite(eye[e].cs, LOW); // Select one eye for init\n#ifdef _ADAFRUIT_ST7735H_ // TFT\n    eye[e].display.initR(INITR_144GREENTAB);\n#else // OLED\n    eye[e].display.begin();\n#endif\n    if(eye[e].blink.pin &gt;= 0) pinMode(eye[e].blink.pin, INPUT_PULLUP);\n    digitalWrite(eye[e].cs, HIGH); // Deselect\n  }\n#ifdef BLINK_PIN\n  pinMode(BLINK_PIN, INPUT_PULLUP);\n#endif\n\nfor(uint8_t i=0; i&lt;=6; i++) {\n    pinMode(i, INPUT);\n    digitalWrite(i, HIGH); // Enable pullup\n}\n}\n// EYE-RENDERING FUNCTION --------------------------------------------------\n\nSPISettings settings(24000000, MSBFIRST, SPI_MODE3); // Teensy 3.1 max SPI\n\nvoid drawEye(      // Renders one eye.\n  uint8_t   e,     // Eye array index; 0 or 1 for left/right\n  uint16_t img) { // Pointer to image data\n\n  uint8_t  screenX, screenY;\n  uint16_t p;\n\n  // Set up raw pixel dump to entire screen.  Although such writes can wrap\n  // around automatically from end of rect back to beginning, the region is\n  // reset on each frame here in case of an SPI glitch.\n  SPI.beginTransaction(settings);\n#ifdef _ADAFRUIT_ST7735H_ // TFT\n  eye[e].display.setAddrWindow(0, 0, 127, 127);\n#else // OLED\n  eye[e].display.writeCommand(SSD1351_CMD_SETROW);    // Y range\n  eye[e].display.writeData(0); eye[e].display.writeData(SCREEN_HEIGHT - 1);\n  eye[e].display.writeCommand(SSD1351_CMD_SETCOLUMN); // X range\n  eye[e].display.writeData(0); eye[e].display.writeData(SCREEN_WIDTH  - 1);\n  eye[e].display.writeCommand(SSD1351_CMD_WRITERAM);  // Begin write\n#endif\n  digitalWrite(eye[e].cs, LOW);                       // Chip select\n  digitalWrite(DISPLAY_DC, HIGH);                     // Data mode\n  // Now just issue raw 16-bit values for every pixel...\n\n  for(screenY=0; screenY&lt;SCREEN_HEIGHT; screenY++) {\n    for(screenX=0; screenX&lt;SCREEN_WIDTH; screenX++) {\n      p = img[screenY][screenX];\n      // SPI FIFO technique from Paul Stoffregen's ILI9341_t3 library:\n      while(KINETISK_SPI0.SR &amp; 0xC000); // Wait for space in FIFO\n      KINETISK_SPI0.PUSHR = p | SPI_PUSHR_CTAS(1) | SPI_PUSHR_CONT;\n    }\n  }\n\n  KINETISK_SPI0.SR |= SPI_SR_TCF;         // Clear transfer flag\n  while((KINETISK_SPI0.SR &amp; 0xF000) ||    // Wait for SPI FIFO to drain\n       !(KINETISK_SPI0.SR &amp; SPI_SR_TCF)); // Wait for last bit out\n  digitalWrite(eye[e].cs, HIGH);          // Deselect\n  SPI.endTransaction();\n}\n\n\n\n\n// MAIN LOOP -- runs continuously after setup() ----------------------------\n\nvoid loop() {\n\n   uint8_t i;\n\n  // Scan buttons 2-6 looking for first button pressed...\n  for(i=0; (i&lt;2) &amp;&amp; (digitalRead(i+2) == HIGH); i++);\n\n  if(i &lt; 2) {               // Anything pressed?  Yes!\n    if(i == prevBtn) {      // Same as last time we checked?  Good!\n      if(++btnCount == 3) { // 3 passes to 'debounce' button input\n        if(digitalRead(2) == LOW) {\n          drawEye(0, sclera[0][0]);\n          drawEye(1, sclera[0][0]);\n        }\n//        if(digitalRead(3) == LOW) {\n//          drawEye(0, polar);\n//          drawEye(1, polar);\n//        }\n//        if(digitalRead(4) == LOW) {\n//          drawEye(0, sclera[0][0]);\n//          drawEye(1, polar[0][0]);\n//        }\n//        if(digitalRead(5) == LOW) {\n//          drawEye(0, polar[0][0]);\n//          drawEye(1, sclera[0][0]);\n//        }\n//        if(digitalRead(6) == LOW) {\n//          drawEye(0, eyeImage[3]);\n//          drawEye(1, eyeImage[3]);\n//        }\n      }\n    } else btnCount = 0; // Different button than before - start count over\n    prevBtn = i;\n  } else prevBtn = 99;   // No buttons pressed\n\n}\n</code></pre>\n\n<p>And the header <code>goatEye.h</code> sans array data as the post would be MASSIVE</p>\n\n<pre><code>#define SCREEN_HEIGHT 128\n#define SCREEN_WIDTH 128\n\n\nconst uint16_t sclera[SCREEN_HEIGHT][SCREEN_WIDTH] = {};\nconst uint16_t polar[SCREEN_HEIGHT][SCREEN_WIDTH] = {};\n</code></pre>\n\n<p>Thank you for the help!</p>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 3, "creation_date": 1453928086, "post_id": 35047755, "comment_id": 57819789, "body": "This will always compare just the final zeroes ..."}, {"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 1, "creation_date": 1453928271, "post_id": 35047755, "comment_id": 57819883, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/12646734/how-to-sort-an-array-of-string-alphabetically-case-sensitive-nonstandard-colla\">How to sort an array of string alphabetically (case sensitive, nonstandard collation)</a>"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "reply_to_user": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1453928432, "post_id": 35047755, "comment_id": 57819972, "body": "@Lashane: that proposed duplicate is specifically asking for a <i>nonstandard</i> collation - this here is &#39;the usual&#39; comparison."}, {"owner": {"reputation": 17, "user_id": 5848911, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153930741141907/picture?type=large", "display_name": "Ben", "link": "https://stackoverflow.com/users/5848911/ben"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1453928661, "post_id": 35047755, "comment_id": 57820094, "body": "@Jongware Thanks for the reply. Could I get a push in the right direction? Some of these basics seem to elude me, lol"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1453928788, "post_id": 35047755, "comment_id": 57820160, "body": "The trick is to start comparing at the <i>first</i> character of each word, then (if equal of course) continue with the next. Try it on paper, with <code>LOGIC</code> and <code>LOOP</code> written out and compare them one letter a time."}, {"owner": {"reputation": 17, "user_id": 5848911, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153930741141907/picture?type=large", "display_name": "Ben", "link": "https://stackoverflow.com/users/5848911/ben"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 1, "creation_date": 1453929191, "post_id": 35047755, "comment_id": 57820377, "body": "@Jongware Ok so, the loop will continue if the strings are equal and continue through the two until it reaches G, at which point the loop breaks. At that point how would I figure which is alphabetically first?"}, {"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1453932316, "post_id": 35047755, "comment_id": 57822216, "body": "@Jongware question to it contains c version of string sorting with <i>standard</i> collation too"}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 5848911, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153930741141907/picture?type=large", "display_name": "Ben", "link": "https://stackoverflow.com/users/5848911/ben"}, "edited": false, "score": 0, "creation_date": 1453929448, "post_id": 35048117, "comment_id": 57820551, "body": "Thanks a lot for the detailed response. I know my code was completely broken I just got frustrated that point and figured it was time to create an account here to figure out what I&#39;m doing, so I just posted what I had.  So the real issue is figuring out how to convert the string to ASCII and at that point I could return that value back to the main function and compare it that way, correct?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1453929965, "post_id": 35048117, "comment_id": 57820867, "body": "The ASCII table is not needed. The elements of the string are the character codes that you need to compare."}], "tags": [], "owner": {"reputation": 168, "user_id": 4272148, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b82bb614ec937baeecc6e5e8a4d2b2fd?s=128&d=identicon&r=PG&f=1", "display_name": "DisplayName", "link": "https://stackoverflow.com/users/4272148/displayname"}, "is_accepted": false, "score": 0, "last_activity_date": 1453929177, "last_edit_date": 1495542214, "creation_date": 1453929177, "answer_id": 35048117, "question_id": 35047755, "link": "https://stackoverflow.com/questions/35047755/alphabetical-comparison-of-two-strings-in-c/35048117#35048117", "title": "Alphabetical comparison of two strings in C", "body": "<pre><code>if(*str1 == *str2)   \n</code></pre>\n\n<p>You have an if statement with no body in your code excerpt. </p>\n\n<p>Apart from that your program is counting the amount of characters in the character array passed to that function. This won't really achieve your goal.</p>\n\n<p>Lets call each char array a word. What you want to do is find which 'word' comes first in the alphabet. I suggest looking at an ASCII table. </p>\n\n<p>Each letter in either word has a corresponding ASCII number value. If you can figure out how to access the number value of each of these letters, you can compare the strings and the lower value will be higher up in the alphabet.</p>\n\n<p>Unless they are capitalized. That will require a little more work. Here is an ASCII table where you can see the difference.<a href=\"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7b/Ascii_Table-nocolor.svg/1000px-Ascii_Table-nocolor.svg.png\" rel=\"nofollow noreferrer\"><img src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7b/Ascii_Table-nocolor.svg/1000px-Ascii_Table-nocolor.svg.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/845710/is-there-a-function-that-returns-the-ascii-value-of-a-character-c\">This will get you started with figuring out how to get the ASCII value of these letters</a></p>\n"}, {"comments": [{"owner": {"reputation": 17, "user_id": 5848911, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153930741141907/picture?type=large", "display_name": "Ben", "link": "https://stackoverflow.com/users/5848911/ben"}, "edited": false, "score": 0, "creation_date": 1453930378, "post_id": 35048292, "comment_id": 57821079, "body": "@R Sahu  Wow, thank you! I don&#39;t know why I took so long to post myself on stack, lol. I tried it and it worked but I&#39;m missing something. By the way I&#39;m reading it wouldn&#39;t the longer word always be greater alphabetically?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 17, "user_id": 5848911, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153930741141907/picture?type=large", "display_name": "Ben", "link": "https://stackoverflow.com/users/5848911/ben"}, "edited": false, "score": 0, "creation_date": 1453930508, "post_id": 35048292, "comment_id": 57821155, "body": "@Ben, No. The loop will break if <code>*str1</code> is not equal to <code>*str2</code>. If <code>str1</code> points to &quot;xyz&quot; and <code>str2</code> points to &quot;abcdef&quot;, the function will return with a positive value."}, {"owner": {"reputation": 17, "user_id": 5848911, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153930741141907/picture?type=large", "display_name": "Ben", "link": "https://stackoverflow.com/users/5848911/ben"}, "edited": false, "score": 0, "creation_date": 1453930798, "post_id": 35048292, "comment_id": 57821338, "body": "@R Sahu So in that case it would break on the first character, correct? That being the case by subtracting str2 from str1 the result would be positive because a &gt; x... right?"}, {"owner": {"reputation": 17, "user_id": 5848911, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153930741141907/picture?type=large", "display_name": "Ben", "link": "https://stackoverflow.com/users/5848911/ben"}, "edited": false, "score": 0, "creation_date": 1453930992, "post_id": 35048292, "comment_id": 57821451, "body": "@R Sahu Awesome, thank you for all the help! The visuals clicked with me, haha."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 7, "last_activity_date": 1453929767, "creation_date": 1453929767, "answer_id": 35048292, "question_id": 35047755, "link": "https://stackoverflow.com/questions/35047755/alphabetical-comparison-of-two-strings-in-c/35048292#35048292", "title": "Alphabetical comparison of two strings in C", "body": "<p>Let's say <code>str1</code> points to something that holds \"abcd\" and <code>str2</code> points to something that holds \"abc\".</p>\n\n<pre><code>str1\n|\nv\n+---+---+---+---+----+\n| a | b | c | d | \\0 |\n+---+---+---+---+----+\n\nstr2\n|\nv\n+---+---+---+----+\n| a | b | c | \\0 |\n+---+---+---+----+\n</code></pre>\n\n<p>When you execute </p>\n\n<pre><code>while(*str1 != '\\0')\n{\n  str1++;\n}\n</code></pre>\n\n<p>You move <code>str1</code> until it points to the null character.</p>\n\n<pre><code>str1\n|\nv\n+---+---+---+---+----+\n| a | b | c | d | \\0 |\n+---+---+---+---+----+\n\n    str1\n    |\n    v\n+---+---+---+---+----+\n| a | b | c | d | \\0 |\n+---+---+---+---+----+\n\n        str1\n        |\n        v\n+---+---+---+---+----+\n| a | b | c | d | \\0 |\n+---+---+---+---+----+\n\n            str1\n            |\n            v\n+---+---+---+---+----+\n| a | b | c | d | \\0 |\n+---+---+---+---+----+\n\n                str1\n                |\n                v\n+---+---+---+---+----+\n| a | b | c | d | \\0 |\n+---+---+---+---+----+\n</code></pre>\n\n<p>Similarly, when you execute</p>\n\n<pre><code>while(*str2 != '\\0')\n{\n  str2++;\n}\n</code></pre>\n\n<p>You move <code>str2</code> until it points to the null character.</p>\n\n<pre><code>str2\n|\nv\n+---+---+---+----+\n| a | b | c | \\0 |\n+---+---+---+----+\n\n    str2\n    |\n    v\n+---+---+---+----+\n| a | b | c | \\0 |\n+---+---+---+----+\n\n        str2\n        |\n        v\n+---+---+---+----+\n| a | b | c | \\0 |\n+---+---+---+----+\n\n            str2\n            |\n            v\n+---+---+---+----+\n| a | b | c | \\0 |\n+---+---+---+----+\n</code></pre>\n\n<p>When the <code>while</code> loops are done, both <code>str1</code> and <code>str2</code> point to a null character. Hence, <code>*str1 == *str2</code> always evaluates to <code>true</code>.</p>\n\n<p>What you need is to compare <code>*str1</code> and <code>*str2</code> and then increment them together if they are equal until they are not equal or you reach the end of the strings.</p>\n\n<pre><code>str1\n|\nv\n+---+---+---+---+----+\n| a | b | c | d | \\0 |\n+---+---+---+---+----+\n\nstr2\n|\nv\n+---+---+---+----+\n| a | b | c | \\0 |\n+---+---+---+----+\n\n    str1\n    |\n    v\n+---+---+---+---+----+\n| a | b | c | d | \\0 |\n+---+---+---+---+----+\n\n    str2\n    |\n    v\n+---+---+---+----+\n| a | b | c | \\0 |\n+---+---+---+----+\n\n        str1\n        |\n        v\n+---+---+---+---+----+\n| a | b | c | d | \\0 |\n+---+---+---+---+----+\n\n        str2\n        |\n        v\n+---+---+---+----+\n| a | b | c | \\0 |\n+---+---+---+----+\n\n            str1\n            |\n            v\n+---+---+---+---+----+\n| a | b | c | d | \\0 |\n+---+---+---+---+----+\n\n            str2\n            |\n            v\n+---+---+---+----+\n| a | b | c | \\0 |\n+---+---+---+----+\n</code></pre>\n\n<p>Now that you know they are not equal and <code>'d'</code> is greater tha <code>'\\0'</code> return a positive value indicating the LHS is alphabetically greater than the RHS.</p>\n\n<p>That logic can be implemented using:</p>\n\n<pre><code>while ( *str1 != '\\0' &amp;&amp; *str1 == *str2 )\n{\n   ++str1;\n   ++str2;\n}\n\nreturn (*str1 - *str2);\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 5848911, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153930741141907/picture?type=large", "display_name": "Ben", "link": "https://stackoverflow.com/users/5848911/ben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8893, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1453929767, "creation_date": 1453927934, "last_edit_date": 1453928187, "question_id": 35047755, "link": "https://stackoverflow.com/questions/35047755/alphabetical-comparison-of-two-strings-in-c", "title": "Alphabetical comparison of two strings in C", "body": "<p>My programming experience is extremely scattered and I can't seem to find the answer to what I hope is a simple question. I had an assignment last week that I didn't properly finish and it's bugging me to death.</p>\n\n<p>I was supposed to compare two strings alphabetically without using strcmp and find out which string is alphabetically first via a function using pointers. </p>\n\n<pre><code>int strcmp373(char *str1, char *str2) {\n  while(*str1 != '\\0')\n  {\n    str1++;\n  }\n  while(*str2 != '\\0')\n  {\n    str2++;\n  }\nif(*str1 == *str2)\n\n}\n</code></pre>\n\n<p>This is my horrible attempt, my thought process being to use the null terminated value. I was hoping I could get some insight and explain how it works?</p>\n\n<p>Here's a copy of the assignment specifications for reference.</p>\n\n<p>Write a function called strcmp373, which compares two strings in precisely the same way that strcmp does in the C library . This time, please use \"pointer syntax\" in writing this function. That is, the [ ] operator should not be used at all when referring to particular characters in string1 and string2; instead, all parameters and local variables should be declared as pointers (using the * symbol). Please be sure that you emulate the strcmp C function. Note that strcmp returns 0 if the two strings are equal, even though 0 normally means false in C. The sign of other return values matters is used to indicate in what way the strings are not the same, but the precise return value is not important. \nYou may not use any of the built-in C string library functions to complete this code. </p>\n\n<p>Here is the prototype of this function: </p>\n\n<pre><code>int strcmp373(char *, char *);\n</code></pre>\n\n<p>And here is a main function which you can use to test strcmp373. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"hw3.h\" // to be discussed\n\nint main() {\nchar str1[81], str2[81];\nchar again = 'y', newline;\nwhile (again == 'y') {\n    printf(\"Enter a string\\n\");\n    scanf(\"%s\", str1);\n    printf(\"Enter another string\\n\");\n    scanf(\"%s\", str2);\n    int comp = strcmp373(str1, str2);\n    if (comp &lt; 0)\n        printf(\"%s is alphabetically before %s\\n\", str1, str2);\n    else if (comp &gt; 0)\n        printf(\"%s is alphabetically after %s\\n\", str1, str2);\n    else printf(\"%s and %s are the same\\n\", str1, str2);\n    printf(\"Again? (y/n)\\n\");\n    scanf(\"%c%c\", &amp;newline, &amp;again);\n}\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "gdb", "reverse-engineering"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1453930975, "post_id": 35047669, "comment_id": 57821445, "body": "Are you using Cygwin? There&#39;s a comment <a href=\"http://stackoverflow.com/questions/4758175/how-to-use-gdb-with-input-redirection\">here</a> that says this doesn&#39;t work there."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1453931023, "post_id": 35047669, "comment_id": 57821471, "body": "See <a href=\"https://www.cygwin.com/ml/cygwin/1999-04/msg00308.html\" rel=\"nofollow noreferrer\">cygwin.com/ml/cygwin/1999-04/msg00308.html</a>"}, {"owner": {"reputation": 303, "user_id": 522091, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/405b495e14f67e26cd3f6569e942b41b?s=128&d=identicon&r=PG", "display_name": "Smipims", "link": "https://stackoverflow.com/users/522091/smipims"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1453931137, "post_id": 35047669, "comment_id": 57821530, "body": "@Barmar: I&#39;m not using Cygwin.... but that error does sound very similar. I&#39;m going to try on a different computer later and provide an update. Hmm...  How did you find that? My google-fu is apparently weak."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1453931374, "post_id": 35047669, "comment_id": 57821684, "body": "I googled &quot;gdb redirect program input&quot; and it found that question."}, {"owner": {"reputation": 303, "user_id": 522091, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/405b495e14f67e26cd3f6569e942b41b?s=128&d=identicon&r=PG", "display_name": "Smipims", "link": "https://stackoverflow.com/users/522091/smipims"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1453940616, "post_id": 35047669, "comment_id": 57825726, "body": "Nope. Tried on a new computer with a fresh OS install. No luck."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1453940666, "post_id": 35047669, "comment_id": 57825740, "body": "What operating system? Unix or Windows?"}, {"owner": {"reputation": 303, "user_id": 522091, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/405b495e14f67e26cd3f6569e942b41b?s=128&d=identicon&r=PG", "display_name": "Smipims", "link": "https://stackoverflow.com/users/522091/smipims"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1453990632, "post_id": 35047669, "comment_id": 57850462, "body": "Unix. One time with a RHEL install and the other time with Kali."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1453994026, "post_id": 35047669, "comment_id": 57853331, "body": "Are you sure the program is reading from stdin, not /dev/tty? If you run it outside <code>gdb</code>, can you redirect its input to a file?"}], "owner": {"reputation": 303, "user_id": 522091, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/405b495e14f67e26cd3f6569e942b41b?s=128&d=identicon&r=PG", "display_name": "Smipims", "link": "https://stackoverflow.com/users/522091/smipims"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 656, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1453927593, "creation_date": 1453927593, "last_edit_date": 1495540754, "question_id": 35047669, "link": "https://stackoverflow.com/questions/35047669/gdb-stuck-in-infinite-loop-when-debugging-progam-with-standard-input", "title": "GDB stuck in infinite loop when debugging progam with standard input", "body": "<p>I'm using GDB to do some reverse engineering of a basic C program. The program does not accept command line input. It does accept input from standard in during run time. I'm trying to script the standard in by doing</p>\n\n<pre><code>run &lt; temp\n</code></pre>\n\n<p>Where temp is a file containing something like</p>\n\n<pre><code>1\n0\nAAAAAAAAA\nAAAAA\n0\n</code></pre>\n\n<p>Unfortunately, when I do this, GDB appears to loop infinitely over this programs input.</p>\n\n<p>I tried to make this file using python</p>\n\n<pre><code>python -c 'print \"AAAAA\"' &gt; temp\n</code></pre>\n\n<p>And with the solution presented here: <a href=\"https://stackoverflow.com/questions/13104206/gdb-user-input-from-stdin\">How to debug a program that takes user input from stdin with GDB?</a></p>\n\n<p>But no luck.  When I just step through the program with GDB, I can pass input via standard in and that work's just fine.</p>\n\n<p>I'm a bit stumped...</p>\n"}, {"tags": ["c", "arrays", "sorting", "insertion"], "comments": [{"owner": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "edited": false, "score": 2, "creation_date": 1453927550, "post_id": 35047470, "comment_id": 57819520, "body": "Is the <code>return 0;</code> in the middle of your main function intended? Seems to me like this program would never call naive_sort if you exit from the main function... But did you means that this program doesn&#39;t output anything at all? Not even the &quot;arr[0]=X&quot; part?"}, {"owner": {"reputation": 29, "user_id": 5848809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ac69d77d0c8aa745874251474af2bf5?s=128&d=identicon&r=PG&f=1", "display_name": "Lurem", "link": "https://stackoverflow.com/users/5848809/lurem"}, "reply_to_user": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "edited": false, "score": 0, "creation_date": 1453971158, "post_id": 35047470, "comment_id": 57836763, "body": "It wasn&#39;t intended, i forgot about it. I have fixed it now, the program is outputting something but numbers are not being sorted =/"}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 5848809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ac69d77d0c8aa745874251474af2bf5?s=128&d=identicon&r=PG&f=1", "display_name": "Lurem", "link": "https://stackoverflow.com/users/5848809/lurem"}, "edited": false, "score": 0, "creation_date": 1453971040, "post_id": 35047948, "comment_id": 57836692, "body": "Your code has helped make my program work Rabbid76, greatly appreciated. Unfortunately the numbers are not getting sorted. I have updated my first post with the output i am getting together with the latest code"}], "tags": [], "owner": {"reputation": 138000, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": true, "score": 1, "last_activity_date": 1453974925, "last_edit_date": 1453974925, "creation_date": 1453928655, "answer_id": 35047948, "question_id": 35047470, "link": "https://stackoverflow.com/questions/35047470/sorting-an-array-with-insertion-sort/35047948#35047948", "title": "Sorting an array with Insertion Sort", "body": "<p>You didn' t initialze your local variable <code>n</code>, there is a <code>return</code> statment in the middle of your code, you access your array out of bounds in the first <code>for</code> loop (because of <code>&lt;=100</code>). Adapt your code like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;      // printf, scanf\n#include &lt;stdlib.h&gt;     // srand, rand\n#include &lt;time.h&gt;       // time \n\nint main()\n{\n    int array[100], i;\n    int n = 100; // init n\n\n    srand (time(NULL)); // initialize random seed\n    for( i=0; i&lt;n; i++ )\n    {\n        array[i] = rand() % 100; // replace this by scanf to read values from input\n        // scanf(\"%d\",&amp;array[i]); \n    }\n    for( i=0; i&lt;n; i++ )\n    {\n        printf(\"%4d\",array[i]);\n    }\n    printf( \"\\n\" );\n\n    naive_sort(array,n); // sort array\n\n    for( i=0; i&lt;n; i++ )\n    {\n        printf(\"%4d\", array[i]);\n    }\n    printf( \"\\n\" );\n    return 0;\n}\n</code></pre>\n\n<p>Your function <code>naive_sort</code> works as expected.</p>\n"}], "owner": {"reputation": 29, "user_id": 5848809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ac69d77d0c8aa745874251474af2bf5?s=128&d=identicon&r=PG&f=1", "display_name": "Lurem", "link": "https://stackoverflow.com/users/5848809/lurem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 508, "favorite_count": 0, "accepted_answer_id": 35047948, "answer_count": 1, "score": 2, "last_activity_date": 1453974925, "creation_date": 1453926816, "last_edit_date": 1453970941, "question_id": 35047470, "link": "https://stackoverflow.com/questions/35047470/sorting-an-array-with-insertion-sort", "title": "Sorting an array with Insertion Sort", "body": "<p>My task is to write a function naive_sort() that takes an array of random generated integers as a parameter and sorts them. I need to use Insertion Sort. I have come to a point where i have no idea how to fix the problem, when i run the program nothing happens. Console stays empty.I'm fairly new to C programming so don't be surprised if you find a stupid mistake somewhere. Any help would be greatly appreciated.</p>\n\n<p>EDIT: It's outputting a list of numbers but they are not being sorted, output example:</p>\n\n<pre><code>558915997481717626\n152655717476818999\n</code></pre>\n\n<p>This is my code(EDITED):</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n#include&lt;conio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\n//Insertion Sort function to Sort Integer array list\nint *naive_sort(int array[],int n)\n{\n    int j,temp,i;\n\n    //Iterate start from second element\n    for (i = 1; i &lt; n; i++)\n    {\n        j = i;\n        //Iterate and compare till it satisfies condition\n        while ( j &gt; 0 &amp;&amp; array[j] &lt; array[j-1])\n        {\n            //Swapping operation\n            temp = array[j];\n            array[j]   = array[j-1];\n            array[j-1] = temp;\n            j--;\n        }\n    }\n    //return Sorted array\n    return array;\n}\n\nint main()\n{\n    //declaring variables\n    int array[10],i;\n    int n = 10;\n\n    srand (time(NULL)); //initialize random seed\n    for (i=0; i&lt;n; i++)\n    {\n            array[i] = rand() % 100;\n            scanf(\"%d\",&amp;array[i]);\n    }\n    for(i=0; i&lt;n; i++)\n    {\n        printf(\"%d\", array[i]);\n    }\n    printf(\"\\n\");\n\n\n    //calling naive_sort function defined above and getting\n    //sorted array in sortArray variable\n    naive_sort(array,n);\n\n    //print sorted array\n    for(i = 0; i&lt;n; i++ )\n    {\n        printf(\"%d\",array[i]);\n    }\n    printf(\"\\n\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "language-lawyer"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 3, "creation_date": 1453926828, "post_id": 35047467, "comment_id": 57819113, "body": "You didn&#39;t search correctly."}, {"owner": {"reputation": 2917, "user_id": 4031604, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d800dd437bdbb2645b3c71236583fd?s=128&d=identicon&r=PG&f=1", "display_name": "AnArrayOfFunctions", "link": "https://stackoverflow.com/users/4031604/anarrayoffunctions"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1453926873, "post_id": 35047467, "comment_id": 57819140, "body": "Well I did search quite some-time but maybe I&#39;m missing something. Maybe you can help me."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 3, "creation_date": 1453926930, "post_id": 35047467, "comment_id": 57819174, "body": "You could start here: <a href=\"https://www.google.com/search?sourceid=chrome-psyapi2&amp;ion=1&amp;espv=2&amp;ie=UTF-8&amp;q=C%20%22declaration%20of%22&amp;oq=C%20%22declaration%20of%22&amp;aqs=chrome..69i57j0l5.4499j1j7&amp;safe=active\" rel=\"nofollow noreferrer\">Google search of <code>C &quot;declaration of&quot;</code></a>."}, {"owner": {"reputation": 2917, "user_id": 4031604, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d800dd437bdbb2645b3c71236583fd?s=128&d=identicon&r=PG&f=1", "display_name": "AnArrayOfFunctions", "link": "https://stackoverflow.com/users/4031604/anarrayoffunctions"}, "edited": false, "score": 2, "creation_date": 1453927079, "post_id": 35047467, "comment_id": 57819255, "body": "I was rather searching for explanation according the standard paper."}, {"owner": {"reputation": 111, "user_id": 4685308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tHRHM.jpg?s=128&g=1", "display_name": "iain", "link": "https://stackoverflow.com/users/4685308/iain"}, "edited": false, "score": 0, "creation_date": 1453931592, "post_id": 35047467, "comment_id": 57821796, "body": "I think this is a wonderful question when we consider the nature of the c language and how its identifiers have emerged; It would seem that we have somehow forgotten the very root of this beautiful language. As it would seem happens in most all human language over time."}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1453927285, "post_id": 35047499, "comment_id": 57819353, "body": "... as opposed to their <i>definition</i>."}, {"owner": {"reputation": 2917, "user_id": 4031604, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d800dd437bdbb2645b3c71236583fd?s=128&d=identicon&r=PG&f=1", "display_name": "AnArrayOfFunctions", "link": "https://stackoverflow.com/users/4031604/anarrayoffunctions"}, "edited": false, "score": 2, "creation_date": 1453927378, "post_id": 35047499, "comment_id": 57819400, "body": "So you think then the meaning of &quot;declaration of&quot; is a common-sense?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1453927498, "post_id": 35047499, "comment_id": 57819484, "body": "I really don&#39;t think quoting the standard does <b>anything</b> to explain it."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1453927666, "post_id": 35047499, "comment_id": 57819571, "body": "@WeatherVane; He said he do not find any meaningful interpretation in the current standard."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 2917, "user_id": 4031604, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d800dd437bdbb2645b3c71236583fd?s=128&d=identicon&r=PG&f=1", "display_name": "AnArrayOfFunctions", "link": "https://stackoverflow.com/users/4031604/anarrayoffunctions"}, "edited": false, "score": 0, "creation_date": 1453927776, "post_id": 35047499, "comment_id": 57819627, "body": "@FISOCPP; Its not common sense. See the grammar of &quot;declaration&quot; mentioned in <i>syntax</i>."}, {"owner": {"reputation": 2917, "user_id": 4031604, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d800dd437bdbb2645b3c71236583fd?s=128&d=identicon&r=PG&f=1", "display_name": "AnArrayOfFunctions", "link": "https://stackoverflow.com/users/4031604/anarrayoffunctions"}, "edited": false, "score": 0, "creation_date": 1453928102, "post_id": 35047499, "comment_id": 57819805, "body": "I&#39;m not struggling to understand it. I know exactly what is it. I simply want to know if it&#39;s assumed to be like this or the standard have some explanation of it."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 2917, "user_id": 4031604, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d800dd437bdbb2645b3c71236583fd?s=128&d=identicon&r=PG&f=1", "display_name": "AnArrayOfFunctions", "link": "https://stackoverflow.com/users/4031604/anarrayoffunctions"}, "edited": false, "score": 0, "creation_date": 1453929495, "post_id": 35047499, "comment_id": 57820577, "body": "@FISOCPP; &quot;declaration of&quot; appeared at many places in the standard. I added an example."}, {"owner": {"reputation": 111, "user_id": 4685308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tHRHM.jpg?s=128&g=1", "display_name": "iain", "link": "https://stackoverflow.com/users/4685308/iain"}, "edited": false, "score": 0, "creation_date": 1453932231, "post_id": 35047499, "comment_id": 57822160, "body": "Is that a really a fitting definition of a &quot;declaration of&quot; for a language that wrote its own compiler?"}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 0, "last_activity_date": 1453929291, "last_edit_date": 1453929291, "creation_date": 1453926954, "answer_id": 35047499, "question_id": 35047467, "link": "https://stackoverflow.com/questions/35047467/where-is-the-phrase-declaration-of-defined-in-the-c-standard-or-else-how-shoul/35047499#35047499", "title": "Where is the phrase &quot;declaration of&quot; defined in the C standard or else how should it be interpreted?", "body": "<p>Standard says:    </p>\n\n<p>C11-\u00a76.7:</p>\n\n<blockquote>\n  <p><strong>Syntax</strong><br>\n  1  </p>\n\n<pre><code>declaration:  \n    declaration-specifiers init-declarator-listopt ;\n    static_assert-declaration  \n\ndeclaration-specifiers:\n    storage-class-specifier declaration-specifiersopt   \n    type-specifier declaration-specifiersopt   \n    type-qualifier declaration-specifiersopt   \n    function-specifier declaration-specifiersopt   \n    alignment-specifier declaration-specifiersopt  \n\ninit-declarator-list:  \n    init-declarator\n    init-declarator-list , init-declarator  \n\ninit-declarator:   \n    declarator\n    declarator = initializer\n</code></pre>\n  \n  <p>5 A declaration specifies the interpretation and attributes of a set of identifiers.   </p>\n</blockquote>\n\n<p>For example:  </p>\n\n<pre><code>extern int a;     // Declaration\nvoid foo(int a);  // Declaration  \nextern b[10];     // Declaration  \n\nextern int c  = 0                              // Declaration as well as Definition \nint d;                                         // Declaration as well as Definition \nint foo(int a) { printf(\"%zu\\n\", sizeof(a)); } // Declaration as well as Definition   \n</code></pre>\n\n<p>An example from standard (6.7.6.1/4)</p>\n\n<blockquote>\n  <p>The <strong>declaration of</strong> the constant pointer <code>constant_ptr</code> may be clarified by including a definition for the type \"pointer to <code>int</code>\".  </p>\n\n<pre><code>      typedef int *int_ptr;\n      const int_ptr constant_ptr;  \n</code></pre>\n  \n  <p>declares <code>constant_ptr</code> as an object that has type \"const-qualified pointer to <code>int</code>\".</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 2917, "user_id": 4031604, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d800dd437bdbb2645b3c71236583fd?s=128&d=identicon&r=PG&f=1", "display_name": "AnArrayOfFunctions", "link": "https://stackoverflow.com/users/4031604/anarrayoffunctions"}, "edited": false, "score": 1, "creation_date": 1453928603, "post_id": 35047934, "comment_id": 57820061, "body": "According to the standard? I know what is it. Read my question again (or maybe you can&#39;t because my English is not worth it)."}, {"owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "reply_to_user": {"reputation": 2917, "user_id": 4031604, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d800dd437bdbb2645b3c71236583fd?s=128&d=identicon&r=PG&f=1", "display_name": "AnArrayOfFunctions", "link": "https://stackoverflow.com/users/4031604/anarrayoffunctions"}, "edited": false, "score": 0, "creation_date": 1453928707, "post_id": 35047934, "comment_id": 57820114, "body": "@FISOCPP: The standard says &quot;specifies the interpretation and attributes&quot;, and I tried to explain that. I haven&#39;t yet found if the standard says something more about &quot;interpretation&quot; or &quot;attributes&quot;."}, {"owner": {"reputation": 2917, "user_id": 4031604, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d800dd437bdbb2645b3c71236583fd?s=128&d=identicon&r=PG&f=1", "display_name": "AnArrayOfFunctions", "link": "https://stackoverflow.com/users/4031604/anarrayoffunctions"}, "edited": false, "score": 0, "creation_date": 1453928906, "post_id": 35047934, "comment_id": 57820216, "body": "I&#39;m starting to feel like I&#39;m missing something big here. What I&#39;m talking about is the expression (in English language) &quot;declaration of&quot; - is it explicitly defined somewhere in the standard or it is supposed to be understand without such?"}, {"owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "reply_to_user": {"reputation": 2917, "user_id": 4031604, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d800dd437bdbb2645b3c71236583fd?s=128&d=identicon&r=PG&f=1", "display_name": "AnArrayOfFunctions", "link": "https://stackoverflow.com/users/4031604/anarrayoffunctions"}, "edited": false, "score": 0, "creation_date": 1453929098, "post_id": 35047934, "comment_id": 57820316, "body": "@FISOCPP: I tried to explain the semantics (that is, meaning), but perhaps it is better to say that a &quot;declaration&quot;, as the term is used in the C standard, is a syntactical element of a C program. It can occur at certain places in the program, and it follows certain syntactical rules."}], "tags": [], "owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "is_accepted": false, "score": 0, "last_activity_date": 1457604602, "last_edit_date": 1457604602, "creation_date": 1453928584, "answer_id": 35047934, "question_id": 35047467, "link": "https://stackoverflow.com/questions/35047467/where-is-the-phrase-declaration-of-defined-in-the-c-standard-or-else-how-shoul/35047934#35047934", "title": "Where is the phrase &quot;declaration of&quot; defined in the C standard or else how should it be interpreted?", "body": "<p>The English word \"declare\" is used in various ways, meaning approximately to \"openly state\" or to \"publicly tell\" something. A \"declaration\" means something like a \"public statement\", as in \"declaration of war\" or \"declaration of independence\".</p>\n\n<p>But like many technical terms, it has a more specific and precise meaning in the C standard. You can look at it syntactically, which just means that a declaration is a syntactical element of a C program, which can occur at certain places in the program, and which follows certain syntactical rules. Or you can look at it semantically, at what it means: a declaration, says the standard, \"specifies the interpretation and attributes of a set of identifiers\".</p>\n\n<p>Here is a small part of a C program:</p>\n\n<pre><code>smurfed4life / gargle\n</code></pre>\n\n<p>The <code>/</code> is an operator and means division, but <em>what kind of division?</em> To decide that, we look at <code>smurfed4life</code> and <code>gargle</code>. They are identifiers, yes, and identifiers are used as names of things, but what things? To find out, we go back to the <em>declaration</em>.</p>\n\n<p>Let's say we find these declarations:</p>\n\n<pre><code>int smurfed4life;\nconst float gargle;\n</code></pre>\n\n<p>Now we know that <code>smurfed4life</code> is a variable with the data type <code>int</code>, so it can be used to store a normal integer. <code>gargle</code> is a variable of the type <code>float</code>, so it can be used to store a (single-precision) floating-point number. It is also constant. This is what we can learn from the declarations. Now, according to the rules of the C language, the division will be a floating-point division, not an integer division.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 2, "last_activity_date": 1453934600, "last_edit_date": 1453934600, "creation_date": 1453930939, "answer_id": 35048618, "question_id": 35047467, "link": "https://stackoverflow.com/questions/35047467/where-is-the-phrase-declaration-of-defined-in-the-c-standard-or-else-how-shoul/35048618#35048618", "title": "Where is the phrase &quot;declaration of&quot; defined in the C standard or else how should it be interpreted?", "body": "<p>You can search the latest <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow\">online draft</a> yourself, but there is no formal definition of the phrase \"declaration of\"; it simply falls out of standard English usage.  </p>\n\n<p>For example, </p>\n\n<pre><code>char arr[10];\n</code></pre>\n\n<p>is a declaration, and the thing it declares is a 10-element array of <code>char</code>; in other words, it is a <em>declaration of</em> an array.</p>\n\n<p>Similarly</p>\n\n<pre><code>void foo( void );\n</code></pre>\n\n<p>is a declaration, and the thing it declares is a function that takes no argument and returns <code>void</code>; it is a <em>declaration of</em> a function.</p>\n\n<p>\"<em>X</em> is a declaration of <em>Y</em>\" simply means that the declaration <em>X</em> is associated with the entity <em>Y</em>, nothing more or less.  </p>\n"}], "owner": {"reputation": 2917, "user_id": 4031604, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d800dd437bdbb2645b3c71236583fd?s=128&d=identicon&r=PG&f=1", "display_name": "AnArrayOfFunctions", "link": "https://stackoverflow.com/users/4031604/anarrayoffunctions"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 222, "favorite_count": 0, "answer_count": 3, "score": -3, "last_activity_date": 1457604602, "creation_date": 1453926809, "last_edit_date": 1454087914, "question_id": 35047467, "link": "https://stackoverflow.com/questions/35047467/where-is-the-phrase-declaration-of-defined-in-the-c-standard-or-else-how-shoul", "title": "Where is the phrase &quot;declaration of&quot; defined in the C standard or else how should it be interpreted?", "body": "<p>I wasn't able to find any definition of this phrase in the current standard. Is there any or else how should it be interpreted?</p>\n\n<p>As besides what \"declaration\" means in English, it's also explicitly defined in the C language too - there is a whole section about it.</p>\n\n<p>Consider this post written in English without any hidden C meanings (if any defined by the C standard).</p>\n\n<p>Thought of the question this way - as a question to an entirely new language. Forget everything you know about \"C\" and then try answering my question only according the standard and the way it should be read (for which you could help me too).</p>\n\n<p>Maybe it is rather defined somewhere in the Normative references cited in the standard ($2):</p>\n\n<blockquote>\n  <p>1 The following referenced documents are indispensable for the\n  application of this document. For dated references, only the edition\n  cited applies. For undated references, the latest edition of the\n  referenced document (including any amendments) applies. </p>\n  \n  <p>2 ISO/IEC\n  2382\u22121:1993, Information technology \u2014 Vocabulary \u2014 Part 1: Fundamental\n  terms. </p>\n  \n  <p>3 ISO 4217, Codes for the representation of currencies and\n  funds. </p>\n  \n  <p>4 ISO 8601, Data elements and interchange formats \u2014 Information\n  interchange \u2014 Representation of dates and times. </p>\n  \n  <p>5 ISO/IEC 10646,\n  Information technology \u2014 Universal Coded Character Set (UCS). </p>\n  \n  <p>6 IEC\n  60559:1989, Binary floating-point arithmetic for microprocessor\n  systems (previously designated IEC 559:1989). </p>\n  \n  <p>7 ISO 80000\u22122,\n  Quantities and units \u2014 Part 2: Mathematical signs and symbols to be\n  used in the natural sciences and technology.</p>\n</blockquote>\n\n<p>More specifically this question was intended to be a prequel to another one - about type-names. Currently their meaning is not specified. Only their syntax is said to be the same as a declaration with omitted identifier (although there is a distinct syntax section for them currently).</p>\n\n<p>So as we figure out the meaning of \"declaration of\" eventually we would be able to understand how code like this is supposed to be read:</p>\n\n<pre><code>void func(struct { int _1, _2; } );\n\nint main()\n{\n   func((struct { int _1, _2; }){2, 3});\n}\n</code></pre>\n\n<p>Because is this compound literal considered to be a <em>declaration of</em> a structure which does not include a tag? Where is this said?</p>\n\n<p>As far as I've seen - nowhere.</p>\n\n<p>On the other hand compound literals themselves contain <em>type-name</em>.</p>\n\n<p>$6.5.2.5 (p3):</p>\n\n<blockquote>\n  <p>A postfix expression that consists of a parenthesized <strong>type name</strong>\n  followed by a braceenclosed list of initializers is a compound\n  literal. It provides an unnamed object whose value is given by the\n  initializer list.</p>\n</blockquote>\n\n<p>If we apply the common sense that type-names are declaration without identifiers and that \"declaration of x\" means a declaration which introduces an identifier with certain type x then everything is ok. But are type-names really declarations?</p>\n\n<p>Yes type names <strong>syntactically</strong> are declarations without identifiers but this is about their <strong>syntax</strong> and nothing else. They are still distinct entity - type names (and not declarations). Quoting 6.7.7 (p2):</p>\n\n<blockquote>\n  <p>In several contexts, it is necessary to specify a type. This is\n  accomplished using a type name, which is <strong>syntactically a declaration\n  for a function or an object of that type that omits the identifier</strong>.</p>\n</blockquote>\n\n<p>With all that said are the two types - the function parameter and the type-name in the compound literal the same?</p>\n\n<p>Remember that (from standard) $6.7.2.3(p5):</p>\n\n<blockquote>\n  <p>Two declarations of structure, union, or enumerated types which are in\n  different scopes or use different tags declare distinct types. <strong>Each\n  declaration of a structure, union, or enumerated type which does not\n  include a tag declares a distinct type.</strong></p>\n</blockquote>\n\n<p>That's what I was going to ask but then I saw that \"declaration of\" is not explicitly assigned meaning anywhere in the paper and I wondered what exactly does it mean.</p>\n\n<p>I'm starting to see this ANSI standard as a whole utter mess which nobody cares to explain in detail.</p>\n"}, {"tags": ["c", "pointers", "lexical-analysis"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 5848846, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-d_X1eUJ6wYQ/AAAAAAAAAAI/AAAAAAAAAEw/x9UEFz9PJ6E/photo.jpg?sz=128", "display_name": "xd366", "link": "https://stackoverflow.com/users/5848846/xd366"}, "edited": false, "score": 0, "creation_date": 1453930703, "post_id": 35047741, "comment_id": 57821279, "body": "perfect, this works correctly now.  any idea on what i should do for the n = 0? would i create a new loop?"}], "tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": true, "score": 0, "last_activity_date": 1453957780, "last_edit_date": 1453957780, "creation_date": 1453927876, "answer_id": 35047741, "question_id": 35047450, "link": "https://stackoverflow.com/questions/35047450/how-to-store-array-in-address-c/35047741#35047741", "title": "How to store array in address C", "body": "<p>This may be what you are looking for:</p>\n\n<pre><code>for(i = 0; str[i] != '\\0'; i++)           //loop that checks tab and spaces\n{\n    if(str[i] != ' ' &amp;&amp; str[i] != '\\t')\n    {\n         charCount++;\n    }\n    else\n    {\n        str[i] = '\\0'; // Terminate str\n        break;         // Break out of the for-loop\n    }\n}\n\nprintf(\"your string: '%s' contains %d of letters\\n\", str, charCount); \n\nstrcpy(w, str); // Add this line to copy str into w (which is s from main)\n\nreturn strlen(w); // Return the length of the result string\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5848846, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-d_X1eUJ6wYQ/AAAAAAAAAAI/AAAAAAAAAEw/x9UEFz9PJ6E/photo.jpg?sz=128", "display_name": "xd366", "link": "https://stackoverflow.com/users/5848846/xd366"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 35047741, "answer_count": 1, "score": 0, "last_activity_date": 1453957780, "creation_date": 1453926763, "question_id": 35047450, "link": "https://stackoverflow.com/questions/35047450/how-to-store-array-in-address-c", "title": "How to store array in address C", "body": "<p>basically we are provided with the main function:</p>\n\n<pre><code> #include &lt;stdio.h&gt;\n #include &lt;string.h&gt;\n #include &lt;strings.h&gt;\n #define STORAGE 255     \n {\n int c;\n char s[STORAGE];\n\n for(;;) {\n    (void) printf(\"n=%d, s=[%s]\\n\", c = getword(s), s);\n    if (c == -1)break;\n    }}       \n</code></pre>\n\n<p>we are not to change that</p>\n\n<p>and we have to create the function getword() which should contain a loop that reads a characters, </p>\n\n<p>store it in a array in the address provided one by one and it should stop for whitespace (tab, space, eof)</p>\n\n<p>basically i have this:</p>\n\n<pre><code>int getword(char *w)\n {\n  char str[255];         \n   int i = 0;              \n   int charCount = 0;      \n\n\n\nprintf(\"enter your sentence:\\n\");   \ngets(str);\n\n   /*this was provided by the professor, but i'm not sure how to use it\n   while (( iochar - getchar()) !=EOF);\n   */\n\n   for(i = 0; str[i] != '\\0'; i++)           //loop that checks tab and spaces\n        {\n            if(str[i] != ' ' &amp;&amp; str[i] != '\\t')\n            {\n                charCount++;\n            }\n        }\n\n  printf(\"your string: '%s' contains %d of letters\\n\", str, charCount); \n\n  return 0;}\n</code></pre>\n\n<p>right now the output of the program is:</p>\n\n<pre><code> enter your sentence:\n hey stockoverflow\n your string: 'hey stockoverflow' contains 16 of letters\n n=0, s=[]\n</code></pre>\n\n<p>so i'm saving the string and counting it, but i'm not storing it where i should be.\n<BR>\n<s>it should display n=16, s=[hey stockoverflow]</s>\n<BR>actually it should display n=3, s=[hey]</p>\n\n<p>any help would be appreciated</p>\n"}, {"tags": ["c", "sorting"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1453926780, "post_id": 35047430, "comment_id": 57819083, "body": "Please not the declaring a parameter as <code>int Arr[]</code> does not have any special effect, the parameter is effectivly a pointer. So perhaps that&#39;s causing the confusion. You have to pass the length of the array to the function, there is no way of determining it&#39;s length it must be stored somewhere."}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 4, "last_activity_date": 1453926836, "creation_date": 1453926836, "answer_id": 35047474, "question_id": 35047430, "link": "https://stackoverflow.com/questions/35047430/c-sorting-explanation-and-trouble/35047474#35047474", "title": "C sorting explanation and trouble", "body": "<p>Using <code>sizeof</code> on an array which is a parameter to a function won't work as you expect.</p>\n\n<p>When an array is passed to a function, it decays to a pointer to the first element of the array.</p>\n\n<p>So this:</p>\n\n<pre><code>int binarySearch( int Arr[], int value)\n</code></pre>\n\n<p>Is the same as this:</p>\n\n<pre><code>int binarySearch( int *Arr, int value)\n</code></pre>\n\n<p>And <code>sizeof(Arr)</code> is the same as calling <code>sizeof(int *)</code>.</p>\n\n<p>You need to pass the size of the array as a separate parameter to your function.</p>\n"}, {"tags": [], "owner": {"reputation": 2405, "user_id": 2216129, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/U0xqx.jpg?s=128&g=1", "display_name": "Topological Sort", "link": "https://stackoverflow.com/users/2216129/topological-sort"}, "is_accepted": false, "score": 2, "last_activity_date": 1453980216, "last_edit_date": 1453980216, "creation_date": 1453927893, "answer_id": 35047745, "question_id": 35047430, "link": "https://stackoverflow.com/questions/35047430/c-sorting-explanation-and-trouble/35047745#35047745", "title": "C sorting explanation and trouble", "body": "<p>What others have said about <code>sizeof</code> is correct... but there's even more information <code>binarySearch</code> needs to do its job:</p>\n\n<pre><code>int binarySearch( int Arr[], int low, int high, int value)\n{\n   int mid = (low+high)/2;\n   ...\n</code></pre>\n\n<p>initially called as</p>\n\n<pre><code>binarySearch (Array, 0, 9, 3);\n</code></pre>\n\n<p>or better yet</p>\n\n<pre><code>binarySearch (Array, 0, SIZE-1, 3);\n</code></pre>\n\n<p>This is because binary search doesn't always start at 0 and doesn't always end at the end of the array.  </p>\n\n<p>Also note that <code>last</code>, the location of the last item, isn't the size of the array, but one less, because of C++'s 0-based counting.</p>\n\n<p>For another look at how to do this, see this page, scroll down to the C++ section (which in this case has code that compiles fine as C):  <a href=\"http://www.algolist.net/Algorithms/Binary_search\" rel=\"nofollow\">http://www.algolist.net/Algorithms/Binary_search</a></p>\n"}], "owner": {"reputation": 43, "user_id": 5399993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c5d3af7e10332b59f50450623cc2433?s=128&d=identicon&r=PG&f=1", "display_name": "user5666676", "link": "https://stackoverflow.com/users/5399993/user5666676"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1453980216, "creation_date": 1453926672, "question_id": 35047430, "link": "https://stackoverflow.com/questions/35047430/c-sorting-explanation-and-trouble", "title": "C sorting explanation and trouble", "body": "<p>I'm having trouble solving this problem. I'm supposed to sort then search an array (through binary search) but I'm having trouble in how to get the size of an array I think.</p>\n\n<pre><code>int binarySearch( int Arr[], int value)\n{\n  int low = 0;\n  int high =sizeof(Arr)/sizeof(int);\n  int mid = (low+high)/2;\n\n  printf(\"%d\\n\",high);\n  while (low &lt;= high &amp;&amp; Arr[mid] != value)\n    {\n      if( Arr[mid] &lt; value)\n        {\n          low = mid+1;\n        }\n      else\n        {\n          high = mid-1;\n        }\n      mid = (low+high)/2;\n    }\n  if (low &gt; high)\n    {\n      mid= -1;\n    }\n  return mid;\n}\n\n\nint main()\n{\n  BubbleSort( Array, 10);\n  int pos = binarySearch(Array, 3);\n  printf(\"The sorted array is: \");\n  PrintArray( Array, 10);\n  printf(\"\\n\");\n  printf(\"Now lets look for number 3\\n\");\n  printf(\"The number was located in space %d\\n\", pos);\n  PrintArray( Array, 10);\n}\n</code></pre>\n\n<p>But all I keep getting is:</p>\n\n<pre><code> ./search\n2 \\\\This is where I wanted to see what I was getting as the size of my array, 2???\nThe sorted array is: 0 1 2 3 4 5 6 7 8 9\nNow lets look for number 3\nThe number was located in space -1\n0 1 2 3 4 5 6 7 8 9\n</code></pre>\n"}, {"tags": ["c++", "c", "eclipse", "compilation"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1453926717, "post_id": 35047379, "comment_id": 57819058, "body": "Press the run button. Defaults are to will ask if you want to save. Set it to save and never ask again. If the file was modified, the program will then be built and run. Watch out because libraries used by the program defined in other projects will not be built. Only the program being run will be built."}, {"owner": {"reputation": 7471, "user_id": 2796832, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nt2uE.jpg?s=128&g=1", "display_name": "Jonah Graham", "link": "https://stackoverflow.com/users/2796832/jonah-graham"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1453926922, "post_id": 35047379, "comment_id": 57819164, "body": "@user4581301 you should make that an answer."}, {"owner": {"reputation": 830, "user_id": 1506761, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/804daf70079b8efe061c3c06b1b4b6f7?s=128&d=identicon&r=PG&f=1", "display_name": "Zeta.Investigator", "link": "https://stackoverflow.com/users/1506761/zeta-investigator"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1453926947, "post_id": 35047379, "comment_id": 57819182, "body": "@user4581301 It doesn&#39;t have the option &quot;never ask again&quot;    Why would I want to rebuild &quot;libraries used by the program defined in other projects&quot; when I&#39;ve not touched them? I mean in which scenario will this caveat shows itself?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1453927598, "post_id": 35047379, "comment_id": 57819535, "body": "Never ask again may be an option I set years ago and has been carried forward for me over the last decade&#39;s worth of updates. Looks like this answer still holds under Mars: <a href=\"http://stackoverflow.com/questions/23959595/how-to-enable-eclipse-to-autobuild-autosave-changes-before-run-cdt\">How to enable Eclipse to autobuild/autosave changes before run (CDT)</a>"}, {"owner": {"reputation": 830, "user_id": 1506761, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/804daf70079b8efe061c3c06b1b4b6f7?s=128&d=identicon&r=PG&f=1", "display_name": "Zeta.Investigator", "link": "https://stackoverflow.com/users/1506761/zeta-investigator"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1453928325, "post_id": 35047379, "comment_id": 57819914, "body": "@user4581301 Thanks for the link. I should have chosen &quot;always&quot; for &quot;save required dirty editors...&quot;. But about your warning, Are there any side effects to these changes? I mean when should I be wary with this config?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1453929102, "post_id": 35047379, "comment_id": 57820319, "body": "Say you have two projects open both with unsaved changes. Project 1 builds an executable. Project 2 builds a library used by Project 1. If you build Project 1, Eclipse will build Project 2, then build project 1 using the newly built and updated Project 2. If you run Project 1, Eclipse will build only Project 1 and use the old Project 2 library files. Comic hijinks ensue."}, {"owner": {"reputation": 830, "user_id": 1506761, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/804daf70079b8efe061c3c06b1b4b6f7?s=128&d=identicon&r=PG&f=1", "display_name": "Zeta.Investigator", "link": "https://stackoverflow.com/users/1506761/zeta-investigator"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1453929438, "post_id": 35047379, "comment_id": 57820542, "body": "@user4581301 But I want to build Project 1 first,(and then 2 automatically) then run it. On the link you provided, there was a check box stating &quot;build if necessary&quot;. Doesn&#39;t it do the trick?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1453929673, "post_id": 35047379, "comment_id": 57820696, "body": "If all you want is or have is Project 1 you&#39;re fine. The problem is when you have two interdependent projects that must both be built."}], "owner": {"reputation": 830, "user_id": 1506761, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/804daf70079b8efe061c3c06b1b4b6f7?s=128&d=identicon&r=PG&f=1", "display_name": "Zeta.Investigator", "link": "https://stackoverflow.com/users/1506761/zeta-investigator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 1, "closed_date": 1453928476, "answer_count": 0, "score": 0, "last_activity_date": 1453926475, "creation_date": 1453926475, "question_id": 35047379, "link": "https://stackoverflow.com/questions/35047379/how-to-run-exe-immedeatly-after-build-in-eclipse-cdt", "closed_reason": "Duplicate", "title": "How to run .exe immedeatly after build in Eclipse CDT", "body": "<p>Code::Blocks has a \"compile and run\" feature which you can change the code and then click just one button and it automatically compiles the code and runs it afterwards.  </p>\n\n<p>How can I achieve similar behavior in Eclipse with C/C++ plugin?<br>\nI want a <strong>button (or shortcut)</strong> to <strong>1- Automatically save any changes 2- compile 3- run</strong></p>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "windows", "merge"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1454003404, "post_id": 35047293, "comment_id": 57859913, "body": "Welcome to Stack Overflow! It sounds like you may need to learn how to use a debugger to step through your code. With a good debugger, you can execute your program line by line and see where it is deviating from what you expect. This is an essential tool if you are going to do any programming. Further reading: <a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 5799826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ff10b7a6842c4d834425750f9c786a0?s=128&d=identicon&r=PG&f=1", "display_name": "Ondrej", "link": "https://stackoverflow.com/users/5799826/ondrej"}, "edited": false, "score": 0, "creation_date": 1454002648, "post_id": 35048149, "comment_id": 57859495, "body": "Actaully, I have a new solution. It works, but after pressing a key it returns an error (see above)."}, {"owner": {"reputation": 1367, "user_id": 258146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fabc30550a9fe15945230f2a512aa41f?s=128&d=identicon&r=PG", "display_name": "Lars", "link": "https://stackoverflow.com/users/258146/lars"}, "reply_to_user": {"reputation": 15, "user_id": 5799826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ff10b7a6842c4d834425750f9c786a0?s=128&d=identicon&r=PG&f=1", "display_name": "Ondrej", "link": "https://stackoverflow.com/users/5799826/ondrej"}, "edited": false, "score": 0, "creation_date": 1454009093, "post_id": 35048149, "comment_id": 57863464, "body": "Glad that it works now! Stylistically you can improve it a bit by using only a single malloc() call, and determine the size to malloc based on the length of the two input strings: malloc( strlen(t1) + strlen(t2) + 1);"}], "tags": [], "owner": {"reputation": 1367, "user_id": 258146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fabc30550a9fe15945230f2a512aa41f?s=128&d=identicon&r=PG", "display_name": "Lars", "link": "https://stackoverflow.com/users/258146/lars"}, "is_accepted": true, "score": 0, "last_activity_date": 1453929319, "creation_date": 1453929319, "answer_id": 35048149, "question_id": 35047293, "link": "https://stackoverflow.com/questions/35047293/merging-of-text/35048149#35048149", "title": "merging of text", "body": "<p>I am not quite sure how to answer this, as this is clearly a teaching exercise, and, to be blunt, the code given shows a lack of understanding of pointers. And pointers is a topic better taught in person than via a web-site comment.</p>\n\n<p>A few hints, though:</p>\n\n<ul>\n<li><p>Think very clearly about pointers, what they are pointing to, and what makes them different from array indices.</p></li>\n<li><p>Draw diagrams to visualize what you're doing.</p></li>\n<li><p>Your exercise can be solved using calloc(), strlen() and strcpy(). </p></li>\n</ul>\n"}], "owner": {"reputation": 15, "user_id": 5799826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ff10b7a6842c4d834425750f9c786a0?s=128&d=identicon&r=PG&f=1", "display_name": "Ondrej", "link": "https://stackoverflow.com/users/5799826/ondrej"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 35048149, "answer_count": 1, "score": 0, "last_activity_date": 1454006982, "creation_date": 1453926186, "last_edit_date": 1454006982, "question_id": 35047293, "link": "https://stackoverflow.com/questions/35047293/merging-of-text", "title": "merging of text", "body": "<p>Can you please help me with merging of two texts into one using just only <code>stdio.h</code> and <code>stdlib.h</code>? The result should be <code>HelloWorld</code>.</p>\n\n<p>So far, I have the following, but there is a mistake somewhere.</p>\n\n<pre><code>#define _CRT_SECURE_NO_WARNINGS\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nchar *spojeni(char *t1, char *t2)\n{\n    char pole_spolecne[10];\n    for (*t1 = 0; *t1 &lt; 5; t1++)\n    {\n        pole_spolecne[*t1] = *t1;\n    }\n\n    for (*t2 = 0; *t2 &lt; 10; t2++)\n    {\n        pole_spolecne[*t2 + 5] = *t2;\n    }\n\n    return pole_spolecne;\n}\n\nint main()\n{\n    char pole1[] = { \"Hello\" };\n    char pole2[] = { \"World\" };\n\n\n\n    printf(\"%s\\n\", spojeni(pole1, pole2));\n\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n\n<p>My new solution, but it returns an error at the end:</p>\n\n<pre><code>#define _CRT_SECURE_NO_WARNINGS\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nchar *spojeni(char *t1, char *t2)\n{\n    char pole_cele[20];\n    char *p_pole_cele;\n    p_pole_cele = t1;\n    strcat(p_pole_cele, t2);\n\n    return p_pole_cele;\n}\n\nint main()\n{\n    char pole1[] = { \"Hello\" };\n    char pole2[] = { \"World\" };\n\n    char *p_pole1;\n    char *p_pole2;\n\n    p_pole1 = pole1;\n    p_pole2 = pole2;\n\n\n    printf(\"%s\\n)\", spojeni(p_pole1, p_pole2));\n\n\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n\n<p>Finally, this change of function helped:\nchar *spojeni(char *t1, char *t2)</p>\n\n<pre><code>{\n    char pole_cele[20];\n    char *p_pole_cele;\n    p_pole_cele = (char *)malloc(10);\n    strcpy(p_pole_cele, t1);\n    p_pole_cele = (char *)realloc(p_pole_cele, 20);\n    strcat(p_pole_cele, t2);\n\n    return p_pole_cele;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1453926227, "post_id": 35047199, "comment_id": 57818785, "body": "Rokyan Is it indeed the code as it is written in the book? If so then it is a bad code and I am sure the book aslo is bad."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1453926428, "post_id": 35047199, "comment_id": 57818905, "body": "Well it is invalidated <i>if you deference it</i>, but the code does not. It just computes the new pointer. The previous pointer still retains its value."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1453926465, "post_id": 35047199, "comment_id": 57818923, "body": "If you really want to improve your knowledge don&#39;t call a pointer =&gt;&gt; Array"}, {"owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1453926655, "post_id": 35047199, "comment_id": 57819029, "body": "@VladfromMoscow If you want you can check. May be I missed some blank lines..."}, {"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 0, "creation_date": 1453926715, "post_id": 35047199, "comment_id": 57819057, "body": "I believe that you have copied the code correctly, Edgar.  Pointer arithmetic is still allowed on the value of <code>buffer</code> even after the <code>realloc</code>.  It&#39;s <i>dereferencing</i> it that leads to the land of undefined behavior."}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1453926929, "post_id": 35047199, "comment_id": 57819172, "body": "OT, usually you could double the size when reallocating, instead of a constant increment."}, {"owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "reply_to_user": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1453927022, "post_id": 35047199, "comment_id": 57819225, "body": "@Bob__ This recommendation doesn&#39;t relate to the problem..."}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1453927511, "post_id": 35047199, "comment_id": 57819497, "body": "@EdgarRokyan yes, it&#39;s Off Topic, it&#39;s just one of the things I found... not so good, in that code."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1453930440, "post_id": 35047199, "comment_id": 57821112, "body": "<a href=\"http://stackoverflow.com/questions/33584843/is-fetching-the-value-of-an-invalid-pointer-undefined-or-implementation-defined\">Related thread</a>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1454008704, "post_id": 35047199, "comment_id": 57863249, "body": "the posted code already has the &#39;length&#39; variable, containing the number of bytes so all the messing around seems like a contrived example just to illustrate using pointers."}, {"owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1454015294, "post_id": 35047199, "comment_id": 57867050, "body": "@user3629249 Mmm, yes, of course. The main goal is to show <code>realloc()</code> in usage, but not to write a piece of super optimized code..."}], "answers": [{"tags": [], "owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "is_accepted": false, "score": 4, "last_activity_date": 1453926283, "creation_date": 1453926283, "answer_id": 35047328, "question_id": 35047199, "link": "https://stackoverflow.com/questions/35047199/array-resizing-and-realloc-function/35047328#35047328", "title": "Array resizing and realloc function", "body": "<p>Yes.  Here's why.</p>\n\n<p><code>currentPosition</code> and <code>buffer</code>, as they are being used in the expression <code>currentPosition = newBuffer + (currentPosition - buffer);</code>, are simply being used for their arithmetic value.  At no time after the <code>realloc</code> is <code>buffer</code> dereferenced.</p>\n\n<p>When you call <code>realloc</code> you are correct that the pointer must no longer be relied on as a pointer into the memory region of the buffer.  However, the actual address value in the pointer is not changed by the call.</p>\n"}, {"comments": [{"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 2, "creation_date": 1453926945, "post_id": 35047469, "comment_id": 57819179, "body": "I think you&#39;re wrong there.  You would be correct if the code <i>dereferenced</i> the pointer, but it does not.  Since the value of <code>buffer</code> <i>cannot</i> change in the call (since it is call by value), the variable is guaranteed to have the original value of buffer.  This allows for simple pointer arithmetic to determine what the correct offset is to add to the new <code>newBuffer</code> memory region."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 4, "creation_date": 1453926959, "post_id": 35047469, "comment_id": 57819192, "body": "@DavidHoelzer the C standard disagrees with you"}, {"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 0, "creation_date": 1453926993, "post_id": 35047469, "comment_id": 57819212, "body": "Which section specifically?  If that&#39;s true then the arithmetic must be done before <code>realloc</code>.  It would also imply that somehow <code>buffer</code> itself is being modified during a call by value."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 0, "creation_date": 1453927329, "post_id": 35047469, "comment_id": 57819376, "body": "@DavidHoelzer added references"}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1453928156, "post_id": 35047469, "comment_id": 57819830, "body": "I guess the point is that while both <code>currentPosition</code> and <code>buffer</code> are invalidated their value didn&#39;t change (as far as i know) after the call to realloc, so their difference still can (but it shouldn&#39;t IMHO) represent the current offset."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1453928227, "post_id": 35047469, "comment_id": 57819862, "body": "@Bob__ &quot;invalidated&quot; means &quot;value becomes indeterminate, and the pointer is invalid&quot;. Anything could happen really."}, {"owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 0, "creation_date": 1453928272, "post_id": 35047469, "comment_id": 57819885, "body": "The arithmetic is perfectly valid, so how would the pointer be changed making it invalid?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 1, "creation_date": 1453928312, "post_id": 35047469, "comment_id": 57819905, "body": "@CareyGregory the arithmetic is not perfectly valid (see the second quote in my answer)"}, {"owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 0, "creation_date": 1453928372, "post_id": 35047469, "comment_id": 57819941, "body": "The only way it&#39;s not valid is if the value of the pointer changes. If that doesn&#39;t happen, the results of the arithmetic will be correct in all cases. I think you&#39;re misapplying a weakness in the wording of the standard."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 0, "creation_date": 1453928475, "post_id": 35047469, "comment_id": 57819995, "body": "@CareyGregory I think you&#39;re making assumptions based on experience with particular systems, assumptions which don&#39;t hold in the general case (and we do in fact have a standards document for just that reason). The wording in the standard is very clear here.  Anyway, the value of the pointer does change (it goes from valid to invalid)."}, {"owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 0, "creation_date": 1453928549, "post_id": 35047469, "comment_id": 57820032, "body": "Has nothing to do with particular systems. I&#39;m confident the value does not change on any known hardware platform. The fact that it no longer points to accessible memory does not mean its <i>value</i> has changed."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "reply_to_user": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 0, "creation_date": 1453929344, "post_id": 35047469, "comment_id": 57820473, "body": "@CareyGregory You overlook the fact that the specification was written by academics, and academics like to play with experimental hardware, hardware that is <i>not</i> known to you. So I agree with M.M&#39;s interpretation of the specification, while at the same time I agree with you that no sensible hardware would have a problem with the OP&#39;s code."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 3, "creation_date": 1453931154, "post_id": 35047469, "comment_id": 57821537, "body": "<a href=\"http://www.google.com/patents/US7966480\" rel=\"nofollow noreferrer\">Here</a> is a patent for hardware trapping in response to a register containing an invalid pointer value. <a href=\"http://www.lynx.com/using-the-microprocessor-mmu-for-software-protection-in-real-time-systems/\" rel=\"nofollow noreferrer\">Here</a> is a description of how a <i>MMU</i> can allow for the same pointer to be valid at one time, and invalid at a later time.  Another useful feature that the C standard allows is for the compiler to set freed pointers to a known invalid representation (e.g. <code>0xCDCDCDCD</code>); so that if a program goes on to use a freed pointer then it is obvious what happened."}, {"owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "edited": false, "score": 0, "creation_date": 1453931251, "post_id": 35047469, "comment_id": 57821600, "body": "I hoped that this book would give me a deep understanding of pointers. In fact, I found a bug in the middle of this book..."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "edited": false, "score": 0, "creation_date": 1453931292, "post_id": 35047469, "comment_id": 57821627, "body": "@EdgarRokyan You have improved your understanding of pointers via this discussion though :)"}, {"owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 0, "creation_date": 1453931771, "post_id": 35047469, "comment_id": 57821907, "body": "The C standard guarantees that the value of <code>buffer</code> cannot and will not change regardless of what happens to the memory it points to. Although I can imagine a hardware design in which it would fail, I do not think that hardware exists or will exist within the lifespan of anyone&#39;s C code posted here. So, yes, I&#39;ll grant you that for academics the calculation violates the standard, but I don&#39;t think it will fail in anyone&#39;s lifetime here. ;-)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 2, "creation_date": 1453931942, "post_id": 35047469, "comment_id": 57822004, "body": "@CareyGregory the C standard doesn&#39;t guarantee that at all (see my first quote).  For example the compiler could translate <code>free(p);</code> to a call to the <code>free</code> library function followed by setting <code>p</code> to null (or some other value that would be useful for debugging)."}, {"owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 0, "creation_date": 1453934196, "post_id": 35047469, "comment_id": 57823240, "body": "Explain to me how <code>free(p)</code> can change the value of <code>p</code> for the caller."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 1, "creation_date": 1453934951, "post_id": 35047469, "comment_id": 57823617, "body": "@CareyGregory I just did in my previous comment"}, {"owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 0, "creation_date": 1453940943, "post_id": 35047469, "comment_id": 57825824, "body": "I don&#39;t think that would ever happen since it would violate the pass-by-value standard. Anyway, I think we&#39;ve worn this debate out."}, {"owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "edited": false, "score": 0, "creation_date": 1454017938, "post_id": 35047469, "comment_id": 57868597, "body": "Did you read Vlad&#39;s arguments against your answer? What do you think?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "edited": false, "score": 1, "creation_date": 1454018262, "post_id": 35047469, "comment_id": 57868761, "body": "@EdgarRokyan yes, he is wrong. He assumes pointers are glorified integers of some sort, a common mistake. There&#39;s nothing more to discuss really, you can either read the C standard, or you can invent your own answers"}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": true, "score": 6, "last_activity_date": 1453927970, "last_edit_date": 1453927970, "creation_date": 1453926816, "answer_id": 35047469, "question_id": 35047199, "link": "https://stackoverflow.com/questions/35047199/array-resizing-and-realloc-function/35047469#35047469", "title": "Array resizing and realloc function", "body": "<p>This code causes undefined behaviour:</p>\n\n<pre><code>currentPosition = newBuffer + (currentPosition - buffer);\n</code></pre>\n\n<p>After passing a pointer to <code>realloc</code>, that pointer variable (and all other pointers based on that pointer) become <em>indeterminate</em>, which is the same status that an uninitialized variable has.  </p>\n\n<p>Reference: C11 6.2.4/2:</p>\n\n<blockquote>\n  <p>[...]  The value of a pointer becomes indeterminate when\n  the object it points to (or just past) reaches the end of its lifetime.</p>\n</blockquote>\n\n<p>Then, doing pointer arithmetic on an invalid pointer causes undefined behaviour, C11 6.5.6/8:</p>\n\n<blockquote>\n  <p>When an expression that has integer type is added to or subtracted from a pointer, [...]  If both the pointer operand and the result point to elements of the same array object, or one past the last element of the array object, the evaluation shall not produce an overflow; otherwise, the behavior is undefined</p>\n</blockquote>\n\n<p>The pointer operand doesn't point to an object at that time. The object it used to point to has already been freed.</p>\n\n<p>In fact, evaluating the pointer at all may cause undefined behaviour, since an indeterminate value may be a trap representation.  (Imagine a system where loading a value into an address register also performs a hardware check that the address belongs to this process). Refs: C11 3.19.2, 6.2.6.1/5:</p>\n\n<blockquote>\n  <p>If the stored value of an object has such a representation and is read by an lvalue expression that does not have character type, the behavior is undefined</p>\n</blockquote>\n\n<hr>\n\n<p>The correct way to write the code would have been:</p>\n\n<pre><code>if(++length &gt;= maximumLength)\n{\n    size_t currentOffset = currentPosition - buffer;\n\n    char *newBuffer = realloc(......\n    // ...\n\n    currentPosition = newBuffer + currentOffset;\n    buffer = newBuffer;\n}\n</code></pre>\n\n<p>(Personally I would use the offset the whole way , instead of <code>currentPosition</code>, to avoid this problem entirely)</p>\n"}, {"comments": [{"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "edited": false, "score": 0, "creation_date": 1453933470, "post_id": 35049092, "comment_id": 57822822, "body": "@EdgarRokyan The pointer passed to the function is passed by value. The original pointer keeps its value. Nothing can occur with it."}, {"owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "edited": false, "score": 0, "creation_date": 1453934083, "post_id": 35049092, "comment_id": 57823180, "body": "Now I totally agree with @M.M answer. After <code>realloc()</code> invocation <code>buffer</code> pointer doesn&#39;t point to the real object. In general we can&#39;t use it even in subtraction cause it&#39;s not guaranteed to be valid.  Do you agree?"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "edited": false, "score": 0, "creation_date": 1453934364, "post_id": 35049092, "comment_id": 57823337, "body": "@EdgarRokyan See my answer one more. This binary operator performs subtraction of the operands. The operands in this case have valid values for the operation because the both pointers refered elements of the same array. Nothing was occurred with these values. They are valid values for the subtraction."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "edited": false, "score": 0, "creation_date": 1453934554, "post_id": 35049092, "comment_id": 57823424, "body": "@EdgarRokyan Otherwise you should think that for example 4 - 2 can equal to any value or have some indeterminate value.:)"}, {"owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "edited": false, "score": 0, "creation_date": 1454015194, "post_id": 35049092, "comment_id": 57866989, "body": "Vlad, I want to say that there&#39;s no array when we do subtraction. It&#39;s well explained in M.M&#39;s answer. But it looks like you don&#39;t agree with him..."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "edited": false, "score": 0, "creation_date": 1454015528, "post_id": 35049092, "comment_id": 57867193, "body": "@EdgarRokyan The array entirely is not required when the operator is used. The array is required just to get valid values for the pointers. After that the operator is performed without any access to the array. And there is said about this in the standard."}, {"owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "edited": false, "score": 0, "creation_date": 1454015737, "post_id": 35049092, "comment_id": 57867316, "body": "Ok, but what&#39;s about first reference to standard in M.M&#39;s answer? It says that the value of a pointer becomes indeterminate when the object it points to (or just past) reaches the end of its lifetime."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "edited": false, "score": 0, "creation_date": 1454016490, "post_id": 35049092, "comment_id": 57867732, "body": "@EdgarRokyan Yes it means. But when the object pointed to by the pointer is not alive the memory occupied by the object can be not acceptable by the program."}, {"owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "edited": false, "score": 0, "creation_date": 1454016965, "post_id": 35049092, "comment_id": 57868015, "body": "And also it means according to the statement which we discuss that pointer can be not acceptable too..."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "edited": false, "score": 0, "creation_date": 1454017071, "post_id": 35049092, "comment_id": 57868089, "body": "@EdgarRokyan Why is not the pointer acceptable? It is a local variable that is acceptable. You can for example reassign it."}, {"owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "edited": false, "score": 0, "creation_date": 1454017351, "post_id": 35049092, "comment_id": 57868252, "body": "I think we understand phrase <code>pointer becomes indeterminate</code> differently. I suppose that it means that pointer can point to any memory address, you say that it&#39;ll save previous address. Obviously in both cases it won&#39;t point to a valid object."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "edited": false, "score": 0, "creation_date": 1454017596, "post_id": 35049092, "comment_id": 57868375, "body": "@EdgarRokyan A variable that is a pointer is the same as any other variable. It keeps the value you assigned to the variable. So nothing will happen with the value stored in the pointer whether it early pointed to an object or now it does not point to any object."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "edited": false, "score": 0, "creation_date": 1454017817, "post_id": 35049092, "comment_id": 57868518, "body": "@EdgarRokyan I think so.:)"}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1453978141, "last_edit_date": 1453978141, "creation_date": 1453932748, "answer_id": 35049092, "question_id": 35047199, "link": "https://stackoverflow.com/questions/35047199/array-resizing-and-realloc-function/35049092#35049092", "title": "Array resizing and realloc function", "body": "<p>My five cents.:)</p>\n\n<p>For starters I think that the program shown in the book is bad.</p>\n\n<p>It does not check whether <code>fgetc</code> returns <code>EOF</code>. </p>\n\n<p>And it does not return <code>NULL</code> as usual when the end of the file is encountered and no data has been read.</p>\n\n<p>This drawback does not allow to use the function for example the following way</p>\n\n<pre><code>while ( ( buffer = getLine() ) != NULL )\n{\n    //...\n    free( buffer );\n}\n</code></pre>\n\n<p>Also there are too many variables. The same logic can be performed with less variables.</p>\n\n<p>So I would write the function the following way</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nchar * getLine( void ) \n{\n    const size_t SIZE_INCREMENT = 10;\n\n    char  *buffer = NULL;\n    size_t length = 0;\n\n    int c = fgetc( stdin );\n\n    if ( c != EOF )\n    {        \n        while ( 1 )\n        {\n            if ( length % SIZE_INCREMENT == 0 )\n            {\n                char *tmp = realloc( buffer, length + SIZE_INCREMENT );\n                if ( !tmp )\n                {\n                    free( buffer );\n                    buffer = NULL;\n                    break;\n                }\n                else\n                {\n                    buffer = tmp;\n                }\n            }\n\n            if ( c == EOF || c == '\\n' ) break;\n\n            buffer[length++] = c;\n\n            c = fgetc( stdin );\n        }            \n\n        if ( buffer ) buffer[length] = '\\0';\n    }\n\n    return buffer;\n}\n\nint main( void )\n{\n    char *s;\n\n    while ( ( s = getLine() ) != NULL )\n    {        \n        puts( s );\n        free( s );\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>If to enter for example</p>\n\n<pre><code>This is first line\nThis is second line\n</code></pre>\n\n<p>then the output will echo the input</p>\n\n<pre><code>This is first line\nThis is second line\n</code></pre>\n\n<p>As for the discussion whether this statement</p>\n\n<pre><code>currentPosition = newBuffer + (currentPosition - buffer);\n</code></pre>\n\n<p>is well-defined then in my opinion it is well-defined.</p>\n\n<p>According to the C Standard (6.5.6 Additive operators)</p>\n\n<blockquote>\n  <p>6 The result of the binary - operator is the difference resulting from\n  the <strong>subtraction of the second operand from the first</strong>.</p>\n</blockquote>\n\n<p>Though the object pointed to by the pointers is not already alive nevertheless the pointers contain valid values relative to the pointer arithmetic that refered elements of the same array.\nSo if to apply the <strong>subtruction</strong> the result will be a valid value of elements between these two pointers that the non-alive array had. The subtraction operator just does the arithmetic using integer values and taking into account the type of the pointers like</p>\n\n<pre><code>( second_pointer - first_pointer ) / sizeof( *first_pointer )\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "is_accepted": false, "score": 0, "last_activity_date": 1478884614, "creation_date": 1478884614, "answer_id": 40553041, "question_id": 35047199, "link": "https://stackoverflow.com/questions/35047199/array-resizing-and-realloc-function/40553041#40553041", "title": "Array resizing and realloc function", "body": "<p>The code uses a pattern which, on many platforms, would be naturally supported by any implementation which does not go out of its way to do otherwise.  Unfortunately, some implementations will occasionally break such code in the name of \"optimization\", even though the value of any practical optimizations obtained thereby would pale in comparison to the efficiency loss that would often result from requiring programmers to use alternative approaches.</p>\n"}], "owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "accepted_answer_id": 35047469, "answer_count": 4, "score": 2, "last_activity_date": 1478884614, "creation_date": 1453925851, "last_edit_date": 1453927392, "question_id": 35047199, "link": "https://stackoverflow.com/questions/35047199/array-resizing-and-realloc-function", "title": "Array resizing and realloc function", "body": "<p>Now I try to improve my knowledge of pointers reading <em>\"Understanding and Using C Pointers\"</em> by Richard Reese.</p>\n\n<p>Here's one code example from this book concerning <code>realloc()</code> function.</p>\n\n<pre><code>char* getLine(void) {\n    const size_t sizeIncrement = 10;\n    char* buffer = malloc(sizeIncrement);\n    char* currentPosition = buffer;\n    size_t maximumLength = sizeIncrement;\n    size_t length = 0;\n    int character;\n\n    if(currentPosition == NULL) { return NULL; }\n\n    while(1) {\n        character = fgetc(stdin);\n\n        if(character == '\\n') { break; }\n\n        if(++length &gt;= maximumLength) {\n            char *newBuffer = realloc(buffer, maximumLength += sizeIncrement);\n\n            if(newBuffer == NULL) {\n                free(buffer);\n                return NULL;\n            }\n\n            currentPosition = newBuffer + (currentPosition - buffer);\n            buffer = newBuffer;\n        }\n\n        *currentPosition++ = character;\n    }\n\n    *currentPosition = '\\0';\n    return buffer;\n}\n</code></pre>\n\n<p>The main idea is to read all symbols into the <code>buffer</code> until we meet <code>\\n</code>. </p>\n\n<p>We don't know the total number of symbols to read so it's reasonable to use <code>realloc()</code> function to expand <code>buffer</code> periodically.</p>\n\n<p>So, to expand <code>buffer</code> we use:</p>\n\n<pre><code>char *newBuffer = realloc(buffer, maximumLength += sizeIncrement);\n</code></pre>\n\n<p>In this case <code>realloc()</code> returns <code>newBuffer</code> pointer to the expanded buffer.</p>\n\n<p>After that, if <code>realloc()</code> was invoked successfully, <code>currentPosition</code> is recalculated as:</p>\n\n<pre><code>currentPosition = newBuffer + (currentPosition - buffer);\n</code></pre>\n\n<p><strong>QUESTION</strong>:</p>\n\n<p>Is it valid to recalculate <code>currentPosition</code> in such way?</p>\n\n<p>As I know, after <code>realloc()</code> invocation <code>buffer</code> pointer is invalidated. (See, for example, <a href=\"http://en.cppreference.com/w/c/memory/realloc\" rel=\"nofollow\">this</a>). Any access to the <code>buffer</code> pointer leads to the undefined behaviour. So... where am I wrong?</p>\n"}, {"tags": ["c", "string", "system", "quoting"], "comments": [{"owner": {"reputation": 235, "user_id": 4443597, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ad288218ddb9b275fa55a4ddcd624dde?s=128&d=identicon&r=PG&f=1", "display_name": "Jack O&#39;Leary", "link": "https://stackoverflow.com/users/4443597/jack-oleary"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1453924700, "post_id": 35046764, "comment_id": 57817908, "body": "it works from the command-line, although i don&#39;t need to escape the <code>&quot;</code> like in <code>C</code>"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 4, "creation_date": 1453924757, "post_id": 35046764, "comment_id": 57817947, "body": "Replace every instance of <code>\\x</code> with <code>\\\\x</code>."}, {"owner": {"reputation": 235, "user_id": 4443597, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ad288218ddb9b275fa55a4ddcd624dde?s=128&d=identicon&r=PG&f=1", "display_name": "Jack O&#39;Leary", "link": "https://stackoverflow.com/users/4443597/jack-oleary"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1453924976, "post_id": 35046764, "comment_id": 57818053, "body": "I use like this in terminal <code>awk &#39;{ gsub (&#47;\\xAB\\x00\\x00\\xBC&#47;,&quot;\\xBC\\x00\\x00\\xAB&quot;) ; print }&#39; file</code>"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 2, "creation_date": 1453924987, "post_id": 35046764, "comment_id": 57818058, "body": "You can&#39;t have a null character inside a C string. \\x00 represents the null character, same as \\0. However, you can put \\x00 in your C string (as in backslash, ex, zero, zero, not as in a null character) if you escape the backslash."}], "answers": [{"comments": [{"owner": {"reputation": 235, "user_id": 4443597, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ad288218ddb9b275fa55a4ddcd624dde?s=128&d=identicon&r=PG&f=1", "display_name": "Jack O&#39;Leary", "link": "https://stackoverflow.com/users/4443597/jack-oleary"}, "edited": false, "score": 0, "creation_date": 1453925828, "post_id": 35046974, "comment_id": 57818543, "body": "Thank you! For the suggestions I will implement the checks for the file name as you mentioned. Amazing how running one shell command can end up being not so simple as it seemed to begin with."}], "tags": [], "owner": {"reputation": 91978, "user_id": 387076, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/cFyP6.jpg?s=128&g=1", "display_name": "Gilles &#39;SO- stop being evil&#39;", "link": "https://stackoverflow.com/users/387076/gilles-so-stop-being-evil"}, "is_accepted": true, "score": 5, "last_activity_date": 1453925033, "creation_date": 1453925033, "answer_id": 35046974, "question_id": 35046764, "link": "https://stackoverflow.com/questions/35046764/warning-format-string-contains-0-within-the-string-body-wformat/35046974#35046974", "title": "warning: format string contains &#39;\\0&#39; within the string body [-Wformat]", "body": "<p>Consider the C string literal <code>\"\\xAB\"</code>. This string literal contains one byte, not 4. Similarly, <code>\"\\x00\"</code> is a string literal that contains one byte which is a null byte. Clang warns you about that because a null byte ends the C string \u2014\u00a0every character after it will be ignored by library functions such as <code>snprintf</code>.</p>\n\n<p>In your awk code, there's an awk string literal, surrounded by double quotes. You wrote <code>\u2026\\\"\\xBC\\x00\\x00\\xAB\\\"\u2026</code>, with backslashes in front of the double quotes, because otherwise the double quotes would be interpreted as ending the C string literal. Similarly, if you want to end up with a backslash in the awk code (more precisely, in the shell command), you need another backslash in front of it. In other words, you need to double your backslashes.</p>\n\n<pre><code>snprintf(command, sizeof(command), \"awk '{ gsub (/\\\\xAB\\\\x00\\\\x00\\\\xBC/,\\\"\\\\xBC\\\\x00\\\\x00\\\\xAB\\\") ; print }' %s\", argv[1]);\n</code></pre>\n\n<p>Beware that there's another quoting problem with your program: it interprets its argument as a snippet of shell code, not as a file name. The two only coincide if the file name doesn't contain any shell special characters. For example, <code>./your_program Jack.txt</code> will work, but not <code>./your_program \"O'Leary.txt\"</code>. To make it work, you need to massage the argument to protect shell special characters.</p>\n\n<p>(Another problem is that you don't check whether <code>snprintf</code> succeeds. It could overflow \u2014\u00a0you should dynamically allocate the necessary size based on the length of the argument (don't forget to account for the extra quoting if the argument contains special characters).)</p>\n"}, {"comments": [{"owner": {"reputation": 235, "user_id": 4443597, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ad288218ddb9b275fa55a4ddcd624dde?s=128&d=identicon&r=PG&f=1", "display_name": "Jack O&#39;Leary", "link": "https://stackoverflow.com/users/4443597/jack-oleary"}, "edited": false, "score": 0, "creation_date": 1453925425, "post_id": 35047013, "comment_id": 57818304, "body": "Thanks a lot for your answer, this really helped me :)"}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 2, "last_activity_date": 1453925171, "creation_date": 1453925171, "answer_id": 35047013, "question_id": 35046764, "link": "https://stackoverflow.com/questions/35046764/warning-format-string-contains-0-within-the-string-body-wformat/35047013#35047013", "title": "warning: format string contains &#39;\\0&#39; within the string body [-Wformat]", "body": "<p>The sequence of characters <code>'\\'</code>, <code>'x'</code>, <code>'0'</code>, <code>'0'</code> within a C string literal represents a single <code>char</code> with numeric value zero.  Thus, the <code>char</code> arrays represented by the two string literals <code>\"\\x00\"</code> and <code>\"\\0\"</code> have the same size and contents: two <code>char</code>s (including the terminator), both zero.  When used as C strings, both are equivalent to an empty string because the zero character at index zero serves as a string terminator.</p>\n\n<p>Your compiler is warning you that the string literal you pass to <code>snprintf()</code> contains internal null bytes (it has two, in fact), which likely will lead to it not being interpreted as you intended.  If you mean the <code>\\xhh</code> sequences in the string to be taken as sequences of four literal characters, then you must double the backslashes:</p>\n\n<pre><code>    snprintf(command, sizeof(command), \"awk '{ gsub (/\\\\xAB\\\\x00\\\\x00\\\\xBC/,\\\"\\\\xBC\\\\x00\\\\x00\\\\xAB\\\") ; print }' %s\", argv[1]);\n</code></pre>\n"}], "owner": {"reputation": 235, "user_id": 4443597, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ad288218ddb9b275fa55a4ddcd624dde?s=128&d=identicon&r=PG&f=1", "display_name": "Jack O&#39;Leary", "link": "https://stackoverflow.com/users/4443597/jack-oleary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1667, "favorite_count": 0, "accepted_answer_id": 35046974, "answer_count": 2, "score": 4, "last_activity_date": 1453925171, "creation_date": 1453924276, "last_edit_date": 1453925127, "question_id": 35046764, "link": "https://stackoverflow.com/questions/35046764/warning-format-string-contains-0-within-the-string-body-wformat", "title": "warning: format string contains &#39;\\0&#39; within the string body [-Wformat]", "body": "<p>I've got a <code>system()</code> command inside my code which uses awk. I can't figure out how to fix an issue with<code>\\x00</code> hexadecimal values. Apparently they need to be terminated differently, but that's beyond the realm of what I know.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main(int argc, char *argv[]) {\n\n    char command[128];\n    snprintf(command, sizeof(command), \"awk '{ gsub (/\\xAB\\x00\\x00\\xBC/,\\\"\\xBC\\x00\\x00\\xAB\\\") ; print }' %s\", argv[1]);\n    system(command);\n\n}\n</code></pre>\n\n<p>Warnings/Errors:</p>\n\n<pre><code>&gt;  test.c:8:56: warning: format string contains '\\0' within the string body [-Wformat]\n&gt;  snprintf(command, sizeof(command), \"awk '{ gsub (/\\xAB\\x00\\xBC/,\\\"\\xBC\\x00\\x00\\xAB\\\") ; print }' %s\", argv[1]);\n&gt;  /usr/include/secure/_stdio.h:57:62: note: expanded from macro 'snprintf'\n&gt;  __builtin___snprintf_chk (str, len, 0, __darwin_obsz(str), __VA_ARGS__)\n                                                              ^\n  1 warning generated.\n  sh: -c: line 0: unexpected EOF while looking for matching `''\n  sh: -c: line 1: syntax error: unexpected end of file\n</code></pre>\n\n<p><sub>Sorry if this has been asked before, I couldn't find any relevant info though in the search on how to fix this,  thanks...</sub></p>\n"}, {"tags": ["c", "struct", "language-lawyer", "typedef"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1453922582, "post_id": 35046195, "comment_id": 57816651, "body": "I don&#39;t think it refers to that kind of declaration but when you use it like <code>struct { ... fields ... } variable;</code>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1453922619, "post_id": 35046195, "comment_id": 57816666, "body": "What would it actually mean &quot;declare distinct types&quot;? What are the implications? I mean, what code will show the difference?"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1453922738, "post_id": 35046195, "comment_id": 57816743, "body": "@EugeneSh.: The multiple typedefs wouldn&#39;t be redundant (warning) but conflicting (error)."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1453922843, "post_id": 35046195, "comment_id": 57816812, "body": "I&#39;m not sure what you think about that code would be illegal.  There&#39;s only one declaration of the structure type."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "edited": false, "score": 0, "creation_date": 1453924455, "post_id": 35046195, "comment_id": 57817778, "body": "But there are multiple declarations of structures. If you parse the rule as &quot;Each declaration of (a (structure), (union), or (enumerated type))&quot; rather than &quot;Each declaration of a ((structure), (union), or (enumerated) type)&quot; you could reach some strange conclusions, including <code>a</code> and <code>b</code> being different types."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1453926830, "post_id": 35046195, "comment_id": 57819114, "body": "<code>struct ...</code> is actually a <i>type specifier</i>. And <code>typedef</code> is a <i>type definition</i>. So the question lacks a foundation."}], "answers": [{"tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 5, "last_activity_date": 1453922984, "creation_date": 1453922984, "answer_id": 35046361, "question_id": 35046195, "link": "https://stackoverflow.com/questions/35046195/does-typedef-of-a-structure-without-tag-creates-distinct-type-each-time-it-is-us/35046361#35046361", "title": "Does typedef of a structure without tag creates distinct type each time it is used and if not why?", "body": "<blockquote>\n  <p><strong>Each declaration of a structure, union, or enumerated type which does not include a tag declares a distinct type.</strong></p>\n</blockquote>\n\n<p>This line is saying that each time you declare <em>such a type</em>, that's a new type. It's not saying that each time you declare <em>a variable of such a type</em>, you declare a new type.</p>\n\n<p>Your code only declares the type once, so it only creates one type.</p>\n"}, {"tags": [], "owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "is_accepted": false, "score": 5, "last_activity_date": 1453923445, "last_edit_date": 1453923445, "creation_date": 1453923029, "answer_id": 35046377, "question_id": 35046195, "link": "https://stackoverflow.com/questions/35046195/does-typedef-of-a-structure-without-tag-creates-distinct-type-each-time-it-is-us/35046377#35046377", "title": "Does typedef of a structure without tag creates distinct type each time it is used and if not why?", "body": "<p>I think you are misunderstanding</p>\n\n<blockquote>\n  <p>Each declaration of a structure, union, or enumerated type </p>\n</blockquote>\n\n<p>This is a declaration of a structure type:</p>\n\n<pre><code>struct s1 {\n    int a, b;\n};\n</code></pre>\n\n<p>So is this</p>\n\n<pre><code>typedef struct {\n    int a, b;\n} s2;\n</code></pre>\n\n<p>It's also a declaration of a typedef.  And this is a declaration of a structure type AND an object:</p>\n\n<pre><code>struct {\n    int a, b;\n} o1;\n</code></pre>\n\n<p>This is NOT a declaration of structure type:</p>\n\n<pre><code>s2 o4, o5;\n</code></pre>\n\n<p>It is a declaration of two objects, each having structure type.  But the structure type is not declared here.</p>\n\n<p>The Standard particularly says</p>\n\n<blockquote>\n  <p>The presence of a <em>struct-declaration-list</em> in a struct-or-union-speci\ufb01er declares a new type, within a translation unit.</p>\n</blockquote>\n\n<p>That <em>struct-declaration-list</em> is everything inside the braces.</p>\n\n<p>So this one also is not a declaration of structure type:</p>\n\n<pre><code>struct s1 o2, o3;\n</code></pre>\n\n<p>Again, it declares objects, and gives them structure type, but because the <em>struct-declaration-list</em> is lacking it does not declare a type.</p>\n"}], "owner": {"reputation": 2917, "user_id": 4031604, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d800dd437bdbb2645b3c71236583fd?s=128&d=identicon&r=PG&f=1", "display_name": "AnArrayOfFunctions", "link": "https://stackoverflow.com/users/4031604/anarrayoffunctions"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 411, "favorite_count": 0, "accepted_answer_id": 35046361, "answer_count": 2, "score": 2, "last_activity_date": 1453923445, "creation_date": 1453922491, "last_edit_date": 1453922800, "question_id": 35046195, "link": "https://stackoverflow.com/questions/35046195/does-typedef-of-a-structure-without-tag-creates-distinct-type-each-time-it-is-us", "title": "Does typedef of a structure without tag creates distinct type each time it is used and if not why?", "body": "<p>I'm wondering if you declare a structure like this:</p>\n\n<pre><code>typedef struct \n{\n    //...\n} name;\n</code></pre>\n\n<p>Then is it the case that every subsequent declaration of type 'name' will have  distinct type?</p>\n\n<p>I'm wondering this because of (from standard) $6.7.2.3(p5):</p>\n\n<blockquote>\n  <p>Two declarations of structure, union, or enumerated types which are in\n  different scopes or use different tags declare distinct types. <strong>Each\n  declaration of a structure, union, or enumerated type which does not\n  include a tag declares a distinct type.</strong></p>\n</blockquote>\n\n<p>And this $6.7.8(p3):</p>\n\n<blockquote>\n  <p>In a declaration whose storage-class specifier is typedef, each\n  declarator defines an identifier to be a typedef name that denotes the\n  type specified for the identifier in the way described in 6.7.6.</p>\n</blockquote>\n\n<p>And so something like this would be illegal (although clang will accept it):</p>\n\n<pre><code>typedef struct{\n    int a, b;\n} s;\n\nvoid func(s);\n\nint main()\n{\n   s a = {2, 2};\n   s b = a;\n}\n</code></pre>\n\n<p>If it is not the case please explain why?</p>\n"}, {"tags": ["c", "multiprocess"], "answers": [{"tags": [], "owner": {"reputation": 1124, "user_id": 5844347, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zZzQU.png?s=128&g=1", "display_name": "dancancode", "link": "https://stackoverflow.com/users/5844347/dancancode"}, "is_accepted": true, "score": 3, "last_activity_date": 1453951855, "creation_date": 1453951855, "answer_id": 35052376, "question_id": 35046146, "link": "https://stackoverflow.com/questions/35046146/multiprocess-program-ftok-vs-ipc-private/35052376#35052376", "title": "Multiprocess program: ftok vs IPC_PRIVATE", "body": "<p>ftok does not need to be called by the children.  All ftok does is return an integer based on values from the a file's inode and its second argument.  ftok provides a simple way for unrelated processes to find the same IPC resource.  Here's the implementation from musl-1.1.12 <a href=\"http://git.musl-libc.org/cgit/musl/tree/src/ipc/ftok.c\" rel=\"nofollow\">ftok.c</a> (it's easier to read than the glibc version).</p>\n\n<pre><code>#include &lt;sys/ipc.h&gt;\n#include &lt;sys/stat.h&gt;\n\nkey_t ftok(const char *path, int id)\n{\n        struct stat st;\n        if (stat(path, &amp;st) &lt; 0) return -1;\n\n        return ((st.st_ino &amp; 0xffff) | ((st.st_dev &amp; 0xff) &lt;&lt; 16) | ((id &amp; 0xff) &lt;&lt; 24));\n}\n</code></pre>\n\n<p>IPC_PRIVATE supplied to msgget(2), semget(2), or shmget(2) means that a new IPC resource should be created.  The resource isn't \"private\", only newly created.</p>\n\n<p>The Linux man pages say as much in the BUGS section: </p>\n\n<blockquote>\n  <p>The name choice IPC_PRIVATE was perhaps unfortunate, IPC_NEW would\n  more clearly show its function.</p>\n</blockquote>\n\n<p>Have a look at the POSIX IPC interfaces: mq_overview(7), sem_overview(7), and shm_overview(7).  To quote the man pages:</p>\n\n<blockquote>\n  <p>POSIX [...] provides  a  simpler,  and  better designed  interface</p>\n</blockquote>\n"}], "owner": {"reputation": 427, "user_id": 4405260, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ca6f1bd188ff701e0eea239481d82901?s=128&d=identicon&r=PG&f=1", "display_name": "EagleOne", "link": "https://stackoverflow.com/users/4405260/eagleone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2181, "favorite_count": 1, "accepted_answer_id": 35052376, "answer_count": 1, "score": 0, "last_activity_date": 1453951855, "creation_date": 1453922327, "question_id": 35046146, "link": "https://stackoverflow.com/questions/35046146/multiprocess-program-ftok-vs-ipc-private", "title": "Multiprocess program: ftok vs IPC_PRIVATE", "body": "<p>I have some doubts about keys generated by ftok() and by IPC_PRIVATE.</p>\n\n<p>When I call fork(), the key IPC_PRIVATE is automatically shared by both father and sons. Right?</p>\n\n<p>When I call fork(), the key obtained by ftok(...,...) has to be recalculated by every process created. Is it so?</p>\n\n<p>When I call execl(), I can only use the key created by ftok() and not the IPC_PRIVATE one. Right?</p>\n"}, {"tags": ["c", "struct", "linked-list"], "answers": [{"tags": [], "owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "is_accepted": false, "score": 0, "last_activity_date": 1453919959, "creation_date": 1453919959, "answer_id": 35045434, "question_id": 35045331, "link": "https://stackoverflow.com/questions/35045331/can-same-linked-list-function-that-adds-to-end-of-the-list-be-used-to-add-to-man/35045434#35045434", "title": "Can same linked list function that adds to end of the list be used to add to many diffrent linked lists?", "body": "<p>If the object you are trying to add is not <code>struct Courses *newNode</code> then you will not be able to add it with this function. If you need a generic linked list you will need to mess around with passing <code>void *</code> which is lots of fun. Here is a reasonable tutorial for this:</p>\n\n<p><a href=\"http://www.geeksforgeeks.org/generic-linked-list-in-c-2/\" rel=\"nofollow\">http://www.geeksforgeeks.org/generic-linked-list-in-c-2/</a></p>\n"}, {"tags": [], "owner": {"reputation": 32098, "user_id": 124319, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lVhrR.jpg?s=128&g=1", "display_name": "coredump", "link": "https://stackoverflow.com/users/124319/coredump"}, "is_accepted": false, "score": 0, "last_activity_date": 1453920163, "creation_date": 1453920163, "answer_id": 35045499, "question_id": 35045331, "link": "https://stackoverflow.com/questions/35045331/can-same-linked-list-function-that-adds-to-end-of-the-list-be-used-to-add-to-man/35045499#35045499", "title": "Can same linked list function that adds to end of the list be used to add to many diffrent linked lists?", "body": "<p>Currently, no, because your are explicitely dealing with instances of <code>struct Courses</code>.\nIf you want a generic list, use a cons-cell:</p>\n\n<pre><code>struct list { \n   struct list* next;\n   void* data;\n}\n</code></pre>\n\n<p>Also, lists in C can be embedded in other structs. See for example <a href=\"https://isis.poly.edu/kulesh/stuff/src/klist/\" rel=\"nofollow\">this explanation</a> on how lists are used in the Linux kernel. Here is a snippet taken from the article:</p>\n\n<pre><code>struct my_cool_list{\n    struct list_head list; /* kernel's list structure */\n    int my_cool_data;\n    void* my_cool_void;\n};\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 5839023, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/810572e98d81dbbf0f48587a778d6d0d?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/5839023/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1453920163, "creation_date": 1453919620, "question_id": 35045331, "link": "https://stackoverflow.com/questions/35045331/can-same-linked-list-function-that-adds-to-end-of-the-list-be-used-to-add-to-man", "title": "Can same linked list function that adds to end of the list be used to add to many diffrent linked lists?", "body": "<p>This is my linked list function that adds the new node to the end of the list.</p>\n\n<pre><code>void addNodeAtTail( struct Student *student, struct Courses *newNode )\n  {\n      newNode-&gt;next = NULL;           // sucessor of newNode is NULL, because newNode becomes tail of list\n      if ( student-&gt;list == NULL )\n          student-&gt;list = newNode;    // if list is empty, newNode will be head of list\n  else\n  {\n      struct Courses *temp = student-&gt;list;\n      while( temp-&gt;next != NULL ) // search last element in list\n          temp = temp-&gt;next;\n      temp-&gt;next = newNode;       // successor of last node is newNode\n  }\n  }\n</code></pre>\n\n<p>Can this same function be used for adding a node to a diffrent linked list that I may have? Or do I have to create another function because we are dealing with another struct?</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1453918731, "post_id": 35045072, "comment_id": 57814340, "body": "You can&#39;t resize a statically allocated array like this! And maybe you don&#39;t need to, why do you want to?"}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 1, "creation_date": 1453918887, "post_id": 35045072, "comment_id": 57814442, "body": "Looks a bit like an XY-problem. Do you want  delete <code>0x00</code>s specifically or <b>any</b> character beyond <code>0x16</code> (imagining there are others)?"}, {"owner": {"reputation": 81, "user_id": 4401838, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/lEFxR.png?s=128&g=1", "display_name": "Ehsan Davoudi", "link": "https://stackoverflow.com/users/4401838/ehsan-davoudi"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1453918928, "post_id": 35045072, "comment_id": 57814465, "body": "@iharob This array received from USART and I must sent it to my another USART without after 0x16 (end frame) elements."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1453918986, "post_id": 35045072, "comment_id": 57814504, "body": "@EhsanDavoudi So just send the part of it you want to send. There&#39;s no need to modify the array."}], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 4401838, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/lEFxR.png?s=128&g=1", "display_name": "Ehsan Davoudi", "link": "https://stackoverflow.com/users/4401838/ehsan-davoudi"}, "edited": false, "score": 0, "creation_date": 1453919155, "post_id": 35045163, "comment_id": 57814630, "body": "if it possible please"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1453919265, "post_id": 35045163, "comment_id": 57814722, "body": "That&#39;s why it&#39;s not neceesary to actually remove it, just ignore it. And that&#39;s precisely why <a href=\"https://stackoverflow.com/questions/tagged/c\">c</a> is still a better language."}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1453920080, "post_id": 35045163, "comment_id": 57815207, "body": "That&#39;s definitely not the way to go in C. Copying the data is inefficient as hell. In case one ends up actually copying it, she/he should use <code>memcpy</code> anyway. What if there are 65536 bytes to copy? Also, <code>%c</code> is for printable characters. This is binary data."}, {"owner": {"reputation": 1199, "user_id": 3168770, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8lafT.jpg?s=128&g=1", "display_name": "Paulo", "link": "https://stackoverflow.com/users/3168770/paulo"}, "edited": false, "score": 0, "creation_date": 1453920195, "post_id": 35045163, "comment_id": 57815272, "body": "Man, he can remove the printf() function. It doesn&#39;t matter in this context. The author just want to know how to remove elements. As there is no way to do that the way he wants, I presented a simple program. Of course, the parts that don&#39;t matter for the context, he can change as they aren&#39;t part of the problem. If he wants to use memcpy, it&#39;s his business (don&#39;t get offended, please) :)"}, {"owner": {"reputation": 1199, "user_id": 3168770, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8lafT.jpg?s=128&g=1", "display_name": "Paulo", "link": "https://stackoverflow.com/users/3168770/paulo"}, "reply_to_user": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1453920492, "post_id": 35045163, "comment_id": 57815452, "body": "@cad I don&#39;t think you need to dv ONLY for what you exposed. I&#39;m not asking for remove the dv, but just because you answered too, you don&#39;t need to keep dv&#39;ing other&#39;s answer. That&#39;s not the way to go, man. Keep the advice. ;)"}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 1, "creation_date": 1453920624, "post_id": 35045163, "comment_id": 57815538, "body": "I won&#39;t, don&#39;t worry. :-) It&#39;s just by posting an answer here, you try to answer something, serving as an idol to other learners. So, how would a beginner know that he can remove the <code>printf</code> part? How would he know to prefer <code>memcpy</code>? He&#39;ll just apply your code and will perpetuate bad habits."}, {"owner": {"reputation": 1199, "user_id": 3168770, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8lafT.jpg?s=128&g=1", "display_name": "Paulo", "link": "https://stackoverflow.com/users/3168770/paulo"}, "edited": false, "score": 0, "creation_date": 1453921099, "post_id": 35045163, "comment_id": 57815818, "body": "Idol? That&#39;s huge. I don&#39;t wanna be an idol for learners. Well, I think he&#39;s learning C, so he doesn&#39;t need to learn the best way to do every single thing. Printing, copying, etc. By the way, your answer doesn&#39;t answer his question, IMO."}], "tags": [], "owner": {"reputation": 1199, "user_id": 3168770, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8lafT.jpg?s=128&g=1", "display_name": "Paulo", "link": "https://stackoverflow.com/users/3168770/paulo"}, "is_accepted": false, "score": 0, "last_activity_date": 1453919904, "last_edit_date": 1453919904, "creation_date": 1453919004, "answer_id": 35045163, "question_id": 35045072, "link": "https://stackoverflow.com/questions/35045072/remove-some-elements-from-array-and-re-size-array-in-c/35045163#35045163", "title": "Remove some elements from array and re-size array in C", "body": "<p>Manipulating arrays in C isn't easy as it is for vector in C++ or List in Java. There is no \"remove element\" in C. I mean that you have to do the job yourself, that is, create another array, copy only the elements you want to this new array, and free the memory occupied by the previous one.</p>\n\n<p>Can you do that? Do you want the code?</p>\n\n<p>EDIT:</p>\n\n<p>Try that. It's just a simple program that simulates the situation. Now, you have to see the example and adapt it to your code.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\nint main() {\n    char get_res[6] = {0x32,0x32,0x34,0x16,0x00,0x00};\n    char target = 0x16;\n    int pos, i, length = 6; // or specify some way to get this number\n    for(i = 0; i &lt; length; i++)\n        if(get_res[i] == target) {\n            pos = i;\n            break;\n        }\n    pos = pos + 1; // as you have to ignore the target itself\n    char *new_arr = malloc(pos);\n    for(i = 0; i &lt; length; i++) {\n        new_arr[i] = get_res[i];\n        i++;\n    }\n    for(i = 0; i &lt; pos; i++)\n        printf(\"%c \", new_arr[i]);\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "is_accepted": false, "score": 7, "last_activity_date": 1453919724, "last_edit_date": 1453919724, "creation_date": 1453919361, "answer_id": 35045258, "question_id": 35045072, "link": "https://stackoverflow.com/questions/35045072/remove-some-elements-from-array-and-re-size-array-in-c/35045258#35045258", "title": "Remove some elements from array and re-size array in C", "body": "<p>You cannot resize arrays in C (unlike Python, for example). For real resizing, at least from an API user's point of view, use <code>malloc</code>, <code>calloc</code>, <code>realloc</code>, and <code>free</code> (<code>realloc</code> specifically).</p>\n\n<p>Anyway, \"resizing\" an array can be imitated using</p>\n\n<ul>\n<li><p>a delimiter; for example, a delimiter like <code>0xff</code> could mark the end of the valid data in the array</p>\n\n<p>Example:</p>\n\n<pre><code>#define DELIMITER 0xff\n\nprint_data(char* data) {\n    for (size_t i = 0; data[i] != DELIMITER; ++i)\n        printf(\"%x\", data[i]);\n}\n</code></pre></li>\n<li><p>a member counter; count the number of valid data from the beginning of the array onward</p>\n\n<p>Example:</p>\n\n<pre><code>size_t counter = 5;\n\nprint_data(char* data) {\n    for (size_t i = 0; i &lt; counter; ++i)\n        printf(\"%x\", data[i]);\n}\n</code></pre></li>\n</ul>\n\n<hr>\n\n<p>Notes:</p>\n\n<ul>\n<li>Use <code>unsigned char</code> for binary data. <code>char</code> may be aliasing <code>signed char</code>, which you might run into problems with because <code>signed char</code> contains a sign bit.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 127, "user_id": 5847879, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MKmqQ.png?s=128&g=1", "display_name": "odin19", "link": "https://stackoverflow.com/users/5847879/odin19"}, "is_accepted": false, "score": 3, "last_activity_date": 1453919642, "creation_date": 1453919642, "answer_id": 35045340, "question_id": 35045072, "link": "https://stackoverflow.com/questions/35045072/remove-some-elements-from-array-and-re-size-array-in-c/35045340#35045340", "title": "Remove some elements from array and re-size array in C", "body": "<p>There is no need to \"remove\" them. Just don't access them. Pretend like they don't exist. Same like in stacks, when you \"pop\" a value from the top of the stack, you just decrement the stack pointer.</p>\n"}], "owner": {"reputation": 81, "user_id": 4401838, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/lEFxR.png?s=128&g=1", "display_name": "Ehsan Davoudi", "link": "https://stackoverflow.com/users/4401838/ehsan-davoudi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1453952756, "creation_date": 1453918716, "last_edit_date": 1453952756, "question_id": 35045072, "link": "https://stackoverflow.com/questions/35045072/remove-some-elements-from-array-and-re-size-array-in-c", "title": "Remove some elements from array and re-size array in C", "body": "<p><strong>Regards</strong><br>\nI want to remove some elements from my array and re-size it.<br>\nfor example my array is:  </p>\n\n<pre><code>char get_res[6] = {0x32,0x32,0x34,0x16,0x00,0x00};  \n</code></pre>\n\n<p>Now I want to remove elements after 0x16, so my desire array is:  </p>\n\n<blockquote>\n  <p>get_res[] = {0x32,0x32,0x34,0x16};  </p>\n</blockquote>\n\n<p>what is solution?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 3, "creation_date": 1453918565, "post_id": 35045003, "comment_id": 57814220, "body": "Does not compile with a major and obvious syntax error. Provide real code. If that&#39;s your real code, I frankly cannot retrace how you came up with that."}, {"owner": {"reputation": 510, "user_id": 5778300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a214fbbf28e4a6615ff6891f99e06c5?s=128&d=identicon&r=PG&f=1", "display_name": "Flikk", "link": "https://stackoverflow.com/users/5778300/flikk"}, "edited": false, "score": 1, "creation_date": 1453918651, "post_id": 35045003, "comment_id": 57814283, "body": "easy to see with the syntax highlighting that there is a string not being closed while <code>(read(STDIN_FILENO, &amp;c, &#39;) &gt; 0){</code>"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1453919494, "post_id": 35045003, "comment_id": 57814857, "body": "Try changing the <code>&#39;</code> to a <code>1</code>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1453919552, "post_id": 35045003, "comment_id": 57814895, "body": "Why binary mode? The hexadecimal digits <code>a..f</code> are <b>text</b> representations, for humans. But the question is not even clear about whether <code>&quot;abcd&quot;</code> is an ASCII string to be analysed, or a hexadecimal number. Please use an unambiguous example when you have <code>&quot;abcd&quot;</code> and &quot;hexadecimal&quot; in the same sentence."}], "answers": [{"comments": [{"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1453919888, "post_id": 35045351, "comment_id": 57815084, "body": "It will also need the <code>fcntl.h</code> header file to define <code>O_BINARY</code>."}, {"owner": {"reputation": 33, "user_id": 5848288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69c74f634555d39e38034e033998ae24?s=128&d=identicon&r=PG&f=1", "display_name": "Jimmy", "link": "https://stackoverflow.com/users/5848288/jimmy"}, "edited": false, "score": 0, "creation_date": 1453920904, "post_id": 35045351, "comment_id": 57815712, "body": "Thank you. That helped quite a bit."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 33, "user_id": 5848288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69c74f634555d39e38034e033998ae24?s=128&d=identicon&r=PG&f=1", "display_name": "Jimmy", "link": "https://stackoverflow.com/users/5848288/jimmy"}, "edited": false, "score": 0, "creation_date": 1453920965, "post_id": 35045351, "comment_id": 57815750, "body": "@Jimmy Glad I could help.  Feel free to <a href=\"http://stackoverflow.com/help/accepted-answer\">accept this answer</a> if you found it useful."}, {"owner": {"reputation": 33, "user_id": 5848288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69c74f634555d39e38034e033998ae24?s=128&d=identicon&r=PG&f=1", "display_name": "Jimmy", "link": "https://stackoverflow.com/users/5848288/jimmy"}, "edited": false, "score": 0, "creation_date": 1453921615, "post_id": 35045351, "comment_id": 57816104, "body": "I made the changes you suggested and it is good, I just can&#39;t compile it. I&#39;ll go ahead and accept your answer, nonetheless. I&#39;ll figure it out."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 2, "last_activity_date": 1453919681, "creation_date": 1453919681, "answer_id": 35045351, "question_id": 35045003, "link": "https://stackoverflow.com/questions/35045003/how-do-i-complete-this-c-assembly-character-to-hexadecimal-and-binary-conversi/35045351#35045351", "title": "How do I complete this C (assembly) character to hexadecimal and binary conversion code?", "body": "<p>Three problems:</p>\n\n<p>No header files.  You need <code>stdio.h</code> for <code>printf</code> and <code>fileno</code>, and <code>io.h</code> for <code>read</code> and <code>setmode</code> (<code>setmode</code> is a Windows only function;  on Linux, you would include <code>unistd.h</code> for <code>read</code>).</p>\n\n<p>This:</p>\n\n<pre><code>int main(void);\n</code></pre>\n\n<p>Is a function declaration, not a definition.  Get rid of the <code>;</code>:</p>\n\n<pre><code>int main(void);\n</code></pre>\n\n<p>Finally:</p>\n\n<pre><code>while(read(STDIN_FILENO, &amp;c, ') &gt; 0){\n</code></pre>\n\n<p>You have a <code>'</code> where there should be a value for the number of bytes to read.  This should be 1:</p>\n\n<pre><code>while(read(STDIN_FILENO, &amp;c, 1) &gt; 0){\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 5848288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69c74f634555d39e38034e033998ae24?s=128&d=identicon&r=PG&f=1", "display_name": "Jimmy", "link": "https://stackoverflow.com/users/5848288/jimmy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "closed_date": 1453961403, "accepted_answer_id": 35045351, "answer_count": 1, "score": -5, "last_activity_date": 1453921736, "creation_date": 1453918518, "last_edit_date": 1453921736, "question_id": 35045003, "link": "https://stackoverflow.com/questions/35045003/how-do-i-complete-this-c-assembly-character-to-hexadecimal-and-binary-conversi", "closed_reason": "Not suitable for this site", "title": "How do I complete this C (assembly) character to hexadecimal and binary conversion code?", "body": "<p>I need to write an assembly program in which I enter \"abcd\" and it gives me the hexadecimal and binary equivalents for each letter on it's own line. So I need to use the following in my code:</p>\n\n<pre><code>setmode(fileno(stdin), O_BINARY);\n</code></pre>\n\n<p>I have this, so far, but can't seem to compile it. What am I missing, and what can I change? Thank you.\nSo far, I have this:</p>\n\n<pre><code>    int main(void);\n    {\n\n       char c;\n       int numChars = 0;\n\n       setmode(fileno(stdin), O_BINARY);\n       while(read(STDIN_FILENO, &amp;c, ') &gt; 0){\n       ++numChars;\n       }\n       printf(\"%d\\n\", numChars);\n\n       return 0;\n       }\n</code></pre>\n"}, {"tags": ["c", "do-loops"], "comments": [{"owner": {"reputation": 5865, "user_id": 5298696, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_Lk3Kq_mN2c/AAAAAAAAAAI/AAAAAAAAAEQ/4UXPTXc6z6U/photo.jpg?sz=128", "display_name": "CollinD", "link": "https://stackoverflow.com/users/5298696/collind"}, "edited": false, "score": 3, "creation_date": 1453918553, "post_id": 35044998, "comment_id": 57814212, "body": "Dear god fix your formatting."}, {"owner": {"reputation": 35, "user_id": 5723441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07c9c6946419b7328671d9d9a92d6c63?s=128&d=identicon&r=PG&f=1", "display_name": "H. Malkawi", "link": "https://stackoverflow.com/users/5723441/h-malkawi"}, "reply_to_user": {"reputation": 5865, "user_id": 5298696, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_Lk3Kq_mN2c/AAAAAAAAAAI/AAAAAAAAAEQ/4UXPTXc6z6U/photo.jpg?sz=128", "display_name": "CollinD", "link": "https://stackoverflow.com/users/5298696/collind"}, "edited": false, "score": 1, "creation_date": 1453918662, "post_id": 35044998, "comment_id": 57814291, "body": "@CollinD Sorry, I&#39;m on it"}, {"owner": {"reputation": 5865, "user_id": 5298696, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_Lk3Kq_mN2c/AAAAAAAAAAI/AAAAAAAAAEQ/4UXPTXc6z6U/photo.jpg?sz=128", "display_name": "CollinD", "link": "https://stackoverflow.com/users/5298696/collind"}, "edited": false, "score": 0, "creation_date": 1453918694, "post_id": 35044998, "comment_id": 57814303, "body": "Hope I didn&#39;t come off as mean, moreso it was just startling haha!"}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 5723441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07c9c6946419b7328671d9d9a92d6c63?s=128&d=identicon&r=PG&f=1", "display_name": "H. Malkawi", "link": "https://stackoverflow.com/users/5723441/h-malkawi"}, "edited": false, "score": 0, "creation_date": 1453919032, "post_id": 35045044, "comment_id": 57814534, "body": "It won&#39;t even repeat the menu if I put &amp;&amp;"}, {"owner": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "edited": false, "score": 1, "creation_date": 1453921951, "post_id": 35045044, "comment_id": 57816294, "body": "@djechlin This is backwards. The loop should break on that test, not continue. So <code>!((choice2 &gt; 0) &amp;&amp; (choice2 &lt; 5))</code> would work."}], "tags": [], "owner": {"reputation": 54577, "user_id": 1339987, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/76aa5ba88e0d95b6480113239fe50008?s=128&d=identicon&r=PG", "display_name": "djechlin", "link": "https://stackoverflow.com/users/1339987/djechlin"}, "is_accepted": false, "score": 2, "last_activity_date": 1453918635, "creation_date": 1453918635, "answer_id": 35045044, "question_id": 35044998, "link": "https://stackoverflow.com/questions/35044998/nested-do-while-loop/35045044#35045044", "title": "Nested do while loop", "body": "<blockquote>\n  <p>(choice2 > 0) || (choice2 &lt; 5)</p>\n</blockquote>\n\n<p>Is always true, you probably mean <code>&amp;&amp;</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 35, "user_id": 5723441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07c9c6946419b7328671d9d9a92d6c63?s=128&d=identicon&r=PG&f=1", "display_name": "H. Malkawi", "link": "https://stackoverflow.com/users/5723441/h-malkawi"}, "edited": false, "score": 0, "creation_date": 1453919750, "post_id": 35045290, "comment_id": 57814991, "body": "Yes it worked, thank you. But can you explain to me what was wrong please?"}, {"owner": {"reputation": 35, "user_id": 5723441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07c9c6946419b7328671d9d9a92d6c63?s=128&d=identicon&r=PG&f=1", "display_name": "H. Malkawi", "link": "https://stackoverflow.com/users/5723441/h-malkawi"}, "edited": false, "score": 0, "creation_date": 1453920327, "post_id": 35045290, "comment_id": 57815354, "body": "Oh, I just figured it out and I even feel embarrassed for posting this question heh."}], "tags": [], "owner": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "is_accepted": true, "score": 1, "last_activity_date": 1453919466, "creation_date": 1453919466, "answer_id": 35045290, "question_id": 35044998, "link": "https://stackoverflow.com/questions/35044998/nested-do-while-loop/35045290#35045290", "title": "Nested do while loop", "body": "<p>I think you want <code>while ((choice2 &lt; 1) || (choice2 &gt; 4));</code></p>\n"}], "owner": {"reputation": 35, "user_id": 5723441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07c9c6946419b7328671d9d9a92d6c63?s=128&d=identicon&r=PG&f=1", "display_name": "H. Malkawi", "link": "https://stackoverflow.com/users/5723441/h-malkawi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 255, "favorite_count": 0, "accepted_answer_id": 35045290, "answer_count": 2, "score": -1, "last_activity_date": 1453919466, "creation_date": 1453918498, "last_edit_date": 1453918935, "question_id": 35044998, "link": "https://stackoverflow.com/questions/35044998/nested-do-while-loop", "title": "Nested do while loop", "body": "<p>so I've been trying to do a menu with more sub menus. The main menu is a do while loop so if the user tried to enter an irrelevant input, it will let him re-enter. I was wondering if I can do so the same thing with the sub menus but the sub menu loop keeps on going even if I write a valid input. Here is the code:</p>\n\n<pre><code>do\n{\n\n    printf(\"Enter your choice: \");\n        scanf(\" %d\", &amp;choice1);\n        switch (choice1)\n        {\n\n\n\n            case (1) :\n\n             do {\n                    printf(\"4 printfs of choices\");\n\n\n                    printf(\"Enter your choice: \");\n                        scanf(\" %d\", &amp;choice2);\n\n\n                switch (choice2)\n                        {\n\n                case (1):\n                        {\n                        stuff\n                        }\n                    break;\n\n               case (2) :\n                       {\n                        stuff\n                       }\n                    break;\n\n              case (3) :\n                       {\n                        stuff\n                       }\n                    break;\n\n              case (4) :\n                       {\n                         exit(0);\n                       }\n\n               default :\n                       {\n                         printf(\"Sorry that is not a valid choice!\\n\");\n                       }\n                       break;\n                }\n            } while ((choice2 &gt; 0) || (choice2 &lt; 5));\n        break;\n</code></pre>\n\n<p>There is still another while ending for the main loop which is not\nmy concern</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1453918435, "post_id": 35044944, "comment_id": 57814124, "body": "Enable compilation warnings, this <code>fgets(input, INPUT_LENGTH,data) != EOF</code> should trigger one because <code>fgets()</code> returns a pointer and <code>EOF</code> is not one."}, {"owner": {"reputation": 170, "user_id": 5357673, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f28565edc023b941b25ee630c97b9477?s=128&d=identicon&r=PG&f=1", "display_name": "Oluwatosin", "link": "https://stackoverflow.com/users/5357673/oluwatosin"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1453918515, "post_id": 35044944, "comment_id": 57814184, "body": "yes i enabled it and it did <code>warning: comparison between pointer and integer (&#39;char *&#39; and &#39;int&#39;)       while(fgets(input, INPUT_LENGTH,data) != EOF){</code> @iharob"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1453918645, "post_id": 35044944, "comment_id": 57814274, "body": "And why do you ignore the warning? If I see such warning I immediately search for the <code>fgets()</code> documentation and read it throughly."}, {"owner": {"reputation": 170, "user_id": 5357673, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f28565edc023b941b25ee630c97b9477?s=128&d=identicon&r=PG&f=1", "display_name": "Oluwatosin", "link": "https://stackoverflow.com/users/5357673/oluwatosin"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1453918944, "post_id": 35044944, "comment_id": 57814478, "body": "I can&#39;t seem to point out where its coming from @iharob"}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1453920498, "post_id": 35044944, "comment_id": 57815457, "body": "Also you have commented out the incrementing of <code>element</code> you will only ever <code>strcpy</code> into the first string in your string array."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1453936268, "post_id": 35044944, "comment_id": 57824195, "body": "when compiling, always enable all the warnings, then fix those warnings.  (for gcc, at a minimum use: <code>Wall -Wextra -pedantic</code>  (I also use <code>-Wconversion -std=c99</code>)    1) returned value from <code>fgets()</code> should be comparing to <code>!= NULL</code>  2) since <code>argc</code> and <code>argv[]</code> are not used the signature for main should be <code>int main( void )</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1453936549, "post_id": 35044944, "comment_id": 57824306, "body": "when the call to <code>fopen()</code> fails, the program just exits, without letting the user know what happened. (this will make the user very unhappy) suggest:  <code>if( NULL == (template = fopen( &quot;template.txt&quot;, &quot;r&quot; ) ) ) { perror( &quot;fopen for reading template.txt failed&quot; );  exit( EXIT_FAILURE &gt;&gt;); } &#47;&#47; implied else, fopen successful ....  The call to </code>perror()` will, on stderr, display the enclosed text + the error message from the system as to why the fopen() failed"}], "answers": [{"comments": [{"owner": {"reputation": 170, "user_id": 5357673, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f28565edc023b941b25ee630c97b9477?s=128&d=identicon&r=PG&f=1", "display_name": "Oluwatosin", "link": "https://stackoverflow.com/users/5357673/oluwatosin"}, "edited": false, "score": 0, "creation_date": 1453940914, "post_id": 35050667, "comment_id": 57825811, "body": "the code does not print the data along with the variable name"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "reply_to_user": {"reputation": 170, "user_id": 5357673, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f28565edc023b941b25ee630c97b9477?s=128&d=identicon&r=PG&f=1", "display_name": "Oluwatosin", "link": "https://stackoverflow.com/users/5357673/oluwatosin"}, "edited": false, "score": 0, "creation_date": 1454010235, "post_id": 35050667, "comment_id": 57864131, "body": "let me take another look and modify my answer"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "reply_to_user": {"reputation": 170, "user_id": 5357673, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f28565edc023b941b25ee630c97b9477?s=128&d=identicon&r=PG&f=1", "display_name": "Oluwatosin", "link": "https://stackoverflow.com/users/5357673/oluwatosin"}, "edited": false, "score": 0, "creation_date": 1454011364, "post_id": 35050667, "comment_id": 57864780, "body": "@T--,   The corrected code is now posted,  The bug was using <code>element</code> for the index rather than <code>i</code> into the array of data"}], "tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1454011302, "last_edit_date": 1454011302, "creation_date": 1453939949, "answer_id": 35050667, "question_id": 35044944, "link": "https://stackoverflow.com/questions/35044944/how-do-i-split-a-text-file-and-store-them-in-arrays-to-use-for-a-template-in-c/35050667#35050667", "title": "How do I split a text file and store them in arrays to use for a template in C?", "body": "<p>the following code drops reference to the <code>template.txt</code> file as it is not used in the code.</p>\n\n<p>An appropriate struct is defined for the customer data</p>\n\n<p>each field is extracted from the input and copied into the array of customer data</p>\n\n<p>the 'test' code outputs each field from the customer data array.</p>\n\n<p>error checks are implemented and appropriate action taken.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt; // strtok()\n#include &lt;stdlib.h&gt; // exit(), EXIT_FAILURE\n\n#define INPUT_LENGTH   (128)\n#define FIELD_LENGTH   (30)\n#define NUM_FIELDS     (9)\n#define MAX_CUSTOMERS  (20)\n\nstruct customer\n{\n    char lastName[ FIELD_LENGTH ];\n    char firstName[ FIELD_LENGTH ];\n    char initial[ FIELD_LENGTH ];\n    char salutation[ FIELD_LENGTH ];\n    char streetNumber[ FIELD_LENGTH ];\n    char streetName[ FIELD_LENGTH ];\n    char cityName[ FIELD_LENGTH ];\n    char stateName[FIELD_LENGTH ];\n    char zipCode[ FIELD_LENGTH ];\n};\n\nint main( void )\n{\n    struct customer customerData[ MAX_CUSTOMERS ];\n\n    FILE *fp = NULL;\n\n    char input[INPUT_LENGTH];\n\n    int  element = 0;\n    char *token = NULL;\n\n    // read in the customers until we're done\n    if( NULL == (fp = fopen( \"data.txt\", \"r\" ) ) )\n    { // fopen failed\n        perror( \"fopen to read data.txt failed\");\n        exit( EXIT_FAILURE );\n    }\n\n    // implied else, fopen successful\n\n    while( element &lt; MAX_CUSTOMERS &amp;&amp; fgets(input, INPUT_LENGTH, fp))\n    {\n        if( NULL != (token = strtok(input, \"|\") ) ) //splitting the data stored in input by |\n            strcpy( customerData[element].lastName, token );\n        else\n        { // invalid file format\n            fprintf( stderr, \"line %d, contains invalid format\\n\", element);\n            fclose( fp );\n            exit( EXIT_FAILURE );\n        }\n\n        if( NULL != (token = strtok( NULL, \"|\") ) )\n            strcpy( customerData[element].firstName, token );\n        else\n        { // invalid file format\n            fprintf( stderr, \"line %d, contains invalid format\\n\", element);\n            fclose( fp );\n            exit( EXIT_FAILURE );\n        }\n\n        if( NULL != (token = strtok( NULL, \"|\" ) ) )\n            strcpy( customerData[element].initial, token );\n        else\n        { // invalid file format\n            fprintf( stderr, \"line %d, contains invalid format\\n\", element);\n            fclose( fp );\n            exit( EXIT_FAILURE );\n        }\n\n        if( NULL != (token = strtok( NULL, \"|\" ) ) )\n            strcpy( customerData[element].salutation, token );\n        else\n        { // invalid file format\n            fprintf( stderr, \"line %d, contains invalid format\\n\", element);\n            fclose( fp );\n            exit( EXIT_FAILURE );\n        }\n\n        if( NULL != (token = strtok( NULL, \"|\" ) ) )\n            strcpy( customerData[element].streetNumber, token );\n        else\n        { // invalid file format\n            fprintf( stderr, \"line %d, contains invalid format\\n\", element);\n            fclose( fp );\n            exit( EXIT_FAILURE );\n        }\n\n        if( NULL != (token = strtok( NULL, \"|\" ) ) )\n            strcpy( customerData[element].streetName, token );\n        else\n        { // invalid file format\n            fprintf( stderr, \"line %d, contains invalid format\\n\", element);\n            fclose( fp );\n            exit( EXIT_FAILURE );\n        }\n\n        if( NULL != (token = strtok( NULL, \"|\" ) ) )\n            strcpy( customerData[element].cityName, token );\n        else\n        { // invalid file format\n            fprintf( stderr, \"line %d, contains invalid format\\n\", element);\n            fclose( fp );\n            exit( EXIT_FAILURE );\n        }\n\n        if( NULL != (token = strtok( NULL, \"|\" ) ) )\n            strcpy( customerData[element].stateName, token );\n        else\n        { // invalid file format\n            fprintf( stderr, \"line %d, contains invalid format\\n\", element);\n            fclose( fp );\n            exit( EXIT_FAILURE );\n        }\n\n        if( NULL != (token = strtok( NULL, \"|\" ) ) )\n            strcpy( customerData[element].zipCode, token );\n        else\n        { // invalid file format\n            fprintf( stderr, \"line %d, contains invalid format\\n\", element);\n            fclose( fp );\n            exit( EXIT_FAILURE );\n        }\n\n        element++;\n    } // end while\n\n    //testing\n#if 0\n    // code with bug\n    for(int i = 0; i &lt; element; i++)\n    {\n        printf(\"lastName:    %s\\n\", customerData[element].lastName);\n        printf(\"firstName:   %s\\n\", customerData[element].firstName);\n        printf(\"initial:     %s\\n\", customerData[element].initial);\n        printf(\"salutation:  %s\\n\", customerData[element].salutation);\n        printf(\"streeNumber: %s\\n\", customerData[element].streetNumber);\n        printf(\"streetName:  %s\\n\", customerData[element].streetName);\n        printf(\"cityName:    %s\\n\", customerData[element].cityName);\n        printf(\"stateName:   %s\\n\", customerData[element].stateName);\n        printf(\"zipCode:     %s\\n\", customerData[element].zipCode);\n    }\n#else\n    // corrected code\n    for(int i = 0; i &lt; element; i++)\n    {\n        printf(\"lastName:    %s\\n\", customerData[i].lastName);\n        printf(\"firstName:   %s\\n\", customerData[i].firstName);\n        printf(\"initial:     %s\\n\", customerData[i].initial);\n        printf(\"salutation:  %s\\n\", customerData[i].salutation);\n        printf(\"streeNumber: %s\\n\", customerData[i].streetNumber);\n        printf(\"streetName:  %s\\n\", customerData[i].streetName);\n        printf(\"cityName:    %s\\n\", customerData[i].cityName);\n        printf(\"stateName:   %s\\n\", customerData[i].stateName);\n        printf(\"zipCode:     %s\\n\", customerData[i].zipCode);\n    }\n#endif\n\n\n    fclose( fp );\n\n    return EXIT_SUCCESS;\n} // end function: main\n</code></pre>\n"}], "owner": {"reputation": 170, "user_id": 5357673, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f28565edc023b941b25ee630c97b9477?s=128&d=identicon&r=PG&f=1", "display_name": "Oluwatosin", "link": "https://stackoverflow.com/users/5357673/oluwatosin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 104, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1454011302, "creation_date": 1453918317, "last_edit_date": 1453918446, "question_id": 35044944, "link": "https://stackoverflow.com/questions/35044944/how-do-i-split-a-text-file-and-store-them-in-arrays-to-use-for-a-template-in-c", "title": "How do I split a text file and store them in arrays to use for a template in C?", "body": "<p>I'm a newbie at C and I'm having problems splitting a particular text file and storing the tokens in an array.</p>\n\n<p>This is my txt file called data.txt- to be splitted by \"|\":</p>\n\n<pre><code>Public|Jane|Q|Ms.|600|Maple Street|Your Town|Iowa|12345\nPenner|Fred|R|Mr.|123|that Street|Winnipeg|MB|R3T 2N2\nGardner|Mark|E|Mr.|76|The Avenue|Toronto|ON|M5W 1E6\nActon|Hilda|P|Mrs.|66|What Blvd|Winnipeg|MB|R3T 2N2\n</code></pre>\n\n<p>My code is :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define INPUT_LENGTH 128\n#define FIELD_LENGTH 30\n#define NUM_FIELDS   9\n\nint main( int argc, char *argv[] )\n{\n  FILE *template = NULL;\n  FILE *data = NULL;\n\n  char input[INPUT_LENGTH];\n  char customerData[NUM_FIELDS][FIELD_LENGTH];\n  int  element = 0;\n  char *next;\n  char ch;\n\n  template = fopen( \"template.txt\", \"r\" );\n  if ( template != NULL )\n  {\n    // read in the customers until we're done\n    data = fopen( \"data.txt\", \"r\" );\n    if ( data != NULL )\n    {\n\n      //next = strtok(data, \"|\");\n      while(fgets(input, INPUT_LENGTH,data) != EOF){\n        next = strtok(input, \"|\"); //splitting the data stored in input by |\n        while(next != NULL){\n          strcpy(customerData[element],next);\n          //customerData[element++] = next;\n          next =strtok(NULL, \"|\");\n          //element++;\n        }\n\n        //testing\n        for(element=0; element&lt;INPUT_LENGTH; element++){\n          printf(\"%s\\n\", customerData[element]);\n        }\n        //printf(\"%s\\n\", input );\n\n      }\n\n\n\n      fclose( data );\n    }\n\n    fclose( template );\n  }\n\n  return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>doing it like this give me an error <code>array type 'char [30]' is not assignable</code> and a bunch of garbage output. I need help in knowing what I'm doing wrong in the splitting part.</p>\n\n<p>There are other stuff in the code because the main purpose of my program is to split these files, store the in an array and use each position for my template:\nseparate template.txt file:</p>\n\n<pre><code>Welcome back, $1!\nWe hope that you and all the members\nof the $0 family are constantly\nreminding your neighbours there\non $5 to shop with us.\nAs usual, we will ship your order to\n   $3 $1 $2. $0\n   $4 $5\n   $6, $7 $8\n</code></pre>\n\n<p>for the first token, the output should be like:</p>\n\n<pre><code>Welcome back, Jane!\nWe hope that you and all the members\nof the Public family are constantly\nreminding your neighbors there\non Maple Street to shop with us.\nAs usual, we will ship your order to\n    Ms. Jane Q. Public\n    600 Maple Street\n    Your Town, Iowa 12345\n</code></pre>\n"}, {"tags": ["c", "arrays", "malloc", "2d"], "comments": [{"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 2, "creation_date": 1453918155, "post_id": 35044797, "comment_id": 57813960, "body": "Have you ever heard the term three-star programmer? It&#39;s not connotated positively, BTW. Take it as a guideline on using pointers."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1453918250, "post_id": 35044797, "comment_id": 57814018, "body": "<code>arr = (int **) malloc ( nrows * sizeof(int));</code> should be <code>arr = (int **) malloc ( nrows * sizeof(int*));</code>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1453926050, "post_id": 35044797, "comment_id": 57818685, "body": "There is not a single 2D array in your code! There are reasons a <i>pointer</i> id not called &quot;array&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1453919200, "last_edit_date": 1495535278, "creation_date": 1453918300, "answer_id": 35044937, "question_id": 35044797, "link": "https://stackoverflow.com/questions/35044797/2d-array-memory-allocation-and-passing-to-a-function/35044937#35044937", "title": "2D array memory allocation and passing to a function", "body": "<pre><code>arr = (int **) malloc ( nrows * sizeof(int));\n</code></pre>\n\n<p>is not right. It needs to be</p>\n\n<pre><code>arr = (int **) malloc ( nrows * sizeof(int*));\n                                       ^^^^ an array of pointers to int.\n</code></pre>\n\n<p>The first one allocates enough space for <code>nrows</code> of <code>int</code>s.<br>\nThe second one allocates enough space for <code>nrows</code> of <code>int*</code>s.  </p>\n\n<p>Also, since you are using C, not C++, don't cast the return value of <code>malloc</code>. See <a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">Do I cast the result of malloc?</a></p>\n\n<p>Just use:</p>\n\n<pre><code>arr = malloc ( nrows * sizeof(int*));\n</code></pre>\n\n<p>The function <code>free_our_ptr</code> is not right either.</p>\n\n<pre><code>void free_our_ptr(int ***arr,int nrows,int ncols)\n{\n    int i;\n    for(i=0;i&lt;nrows;i++)\n    {\n        free(arr[i]);\n             ^^^^ Not right\n    }\n    free(arr);\n         ^^^ Not right.\n}\n</code></pre>\n\n<p>My suggestion to fix it is to change the interface to:</p>\n\n<pre><code>void free_our_ptr(int **arr, int nrows, int ncols);\n                      ^^^^ Use int**, not int***.\n</code></pre>\n\n<p>Then, the code in the function will work. However, you'll need to change all the places it gets used.</p>\n\n<p>Instead of calling it as:</p>\n\n<pre><code>free_our_ptr(&amp;arr,nrows,ncols);\n</code></pre>\n\n<p>you'll need to call it as:</p>\n\n<pre><code>free_our_ptr(arr,nrows,ncols);\n             ^^^ No &amp;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 138000, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": false, "score": 1, "last_activity_date": 1453919504, "last_edit_date": 1453919504, "creation_date": 1453918443, "answer_id": 35044982, "question_id": 35044797, "link": "https://stackoverflow.com/questions/35044797/2d-array-memory-allocation-and-passing-to-a-function/35044982#35044982", "title": "2D array memory allocation and passing to a function", "body": "<p>You pass a pointer to the pointer which refers to the dynminc allocated memory to your function <code>free_our_ptr</code>. Either yo dereference the pointer inside the function:</p>\n\n<pre><code>void free_our_ptr(int ***arr,int nrows,int ncols)\n{\n    int i;\n    for(i=0;i&lt;nrows;i++)\n    {\n        free((*arr)[i]);\n           // ^\n    }\n    free(*arr);\n      // ^ type of arr is int***\n}\n</code></pre>\n\n<p>Or you pass the pointer to the dynamic allocated memory to your function <code>free_our_ptr</code>:</p>\n\n<pre><code>void free_our_ptr( int **arr,int nrows,int ncols )\n                    // ^^ \n{\n    int i;\n    for(i=0;i&lt;nrows;i++)\n    {\n        free( arr[i] );\n    }\n    free( arr );\n}\n</code></pre>\n\n<p>Apart from this you have to allocate your memory like this:</p>\n\n<pre><code>arr = malloc( nrows * sizeof(int*) );\n                             // ^  type of arr is  int** and type of an element is int*\nfor(i=0;i&lt;nrows;i++)\n{\n    arr[i] = malloc( ncols * sizeof(int) );\n}\n</code></pre>\n\n<p>Further I recommend to remove <code>free_our_ptr(&amp;arr,nrows,ncols);</code> from your functions <code>numbers</code>, <code>square</code>, <code>cube</code>, <code>multiples_of_4</code> and <code>multiples_of_5</code>. Free the memory in <code>main</code>, because you allocataed it in <code>main</code> too.</p>\n"}], "owner": {"reputation": 21, "user_id": 5848271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/536c9edc5217307567dd5a697c21eb04?s=128&d=identicon&r=PG&f=1", "display_name": "Sunil Seetharam", "link": "https://stackoverflow.com/users/5848271/sunil-seetharam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1454090262, "creation_date": 1453917804, "last_edit_date": 1454090262, "question_id": 35044797, "link": "https://stackoverflow.com/questions/35044797/2d-array-memory-allocation-and-passing-to-a-function", "title": "2D array memory allocation and passing to a function", "body": "<p>I am writing this program to print square,cube,multiples of 4, multiples of 5 into a 2 dimensional array.\nI am always getting a segmentation fault error. Can you please help explain what is going on?\nThe program does not print all the elements of the 2D array. It ends in segmentation fault after 4th or 6th row.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nvoid numbers(int ***arr,int nrows,int ncols);\nvoid square(int ***arr,int nrows,int ncols);\nvoid cube(int ***arr,int nrows,int ncols);\nvoid multiples_of_4(int ***arr,int nrows,int ncols);\nvoid multiples_of_5(int ***arr,int nrows,int ncols);\nvoid free_our_ptr(int ***arr,int nrows,int ncols);\n\n\nint main(void)\n{\n\n    int i=0;\n\n    int nrows = 0;\n    int ncols = 0;\n\n    int menu_choice = 0;\n\n    int **arr;\n\n    printf(\"\\nGet number of rows : \");\n    scanf(\"%d\",&amp;nrows);\n\n    if(nrows &gt; 10)\n    {\n        printf(\"\\nRows should be less than 10 \");\n        exit(0);\n\n    }\n\n    printf(\"\\nGet number of columns : \");\n    scanf(\"%d\",&amp;ncols);\n\n    if(ncols &gt; 10)\n    {\n        printf(\"\\nColumns should be less than 10 \");\n        exit(0);\n\n    }\n\n    /******* Dynamic memory allocation for array ***********/\n\n    arr = (int **) malloc ( nrows * sizeof(int));\n\n    for(i=0;i&lt;nrows;i++)\n    {\n        arr[i] = (int *) malloc ( ncols * sizeof(int));\n    }\n\n    /********************************************************/\n\n    printf(\"\\nThese are your choices : \");\n    printf(\"\\nFill with Integers ---------------- 1\");\n    printf(\"\\nFill with Squares  ---------------- 2\");\n    printf(\"\\nFill with Cubes ------------------- 3\");\n    printf(\"\\nFill with Multiples of 4 ---------- 4\");\n    printf(\"\\nFill with Multiples of 5 ---------- 5\");\n    printf(\"\\n\\nEnter your choice : \");\n    scanf(\"%d\",&amp;menu_choice);\n\n    switch(menu_choice)\n    {\n    case 1:\n        numbers(&amp;arr,nrows,ncols);\n        break;\n\n    case 2:\n        square(&amp;arr,nrows,ncols);\n        break;\n\n    case 3:\n        cube(&amp;arr,nrows,ncols);\n        break;\n\n    case 4:\n        multiples_of_4(&amp;arr,nrows,ncols);\n        break;\n\n    case 5:\n        multiples_of_5(&amp;arr,nrows,ncols);\n        break;\n\n    default :\n        printf(\"\\nInvalid Choice, exiting program\");\n        free(arr);\n        exit(0);\n    }\n    exit(0);\n\n}\n\nvoid numbers(int ***array,int nrows,int ncols)\n{\n    int i=0;\n    int j=0;\n    int number = 1;\n    int **arr;\n    arr = *array;\n\n    for(i=0;i&lt;nrows;i++)\n    {\n        printf(\"\\n\");\n        for(j=0;j&lt;ncols;j++)\n        {\n\n            arr[i][j] = number;\n            printf(\"%d\\t\",arr[i][j]);\n            number++;\n        }\n    }\n    free_our_ptr(&amp;arr,nrows,ncols);\n\n\n}\n\nvoid square(int ***array,int nrows,int ncols)\n{\n    int i=0;\n    int j=0;\n    int number = 1;\n    int **arr;\n    arr = *array;\n\n    for(i=0;i&lt;nrows;i++)\n    {\n        printf(\"\\n\");\n        for(j=0;j&lt;ncols;j++)\n        {\n\n            arr[i][j] = number * number;\n            printf(\"%d\\t\",arr[i][j]);\n            ++number;\n        }\n    }\n    free_our_ptr(&amp;arr,nrows,ncols);\n}\n\n\nvoid cube(int ***array,int nrows,int ncols)\n{\n    int i=0;\n    int j=0;\n    int number = 1;\n    int **arr;\n    arr = *array;\n\n    for(i=0;i&lt;nrows;i++)\n    {\n        printf(\"\\n\");\n        for(j=0;j&lt;ncols;j++)\n        {\n\n            arr[i][j] = number * number * number;\n            printf(\"%d\\t\",arr[i][j]);\n            number++;\n        }\n    }\n    free_our_ptr(&amp;arr,nrows,ncols);\n}\n\nvoid multiples_of_4(int ***array,int nrows,int ncols)\n{\n    int i=0;\n    int j=0;\n    int number = 1;\n    int **arr;\n    arr = *array;\n\n    for(i=0;i&lt;nrows;i++)\n    {\n        printf(\"\\n\");\n        for(j=0;j&lt;ncols;j++)\n        {\n\n            arr[i][j] = number * 4;\n            printf(\"%d\\t\",arr[i][j]);\n            number++;\n        }\n    }\n    free_our_ptr(&amp;arr,nrows,ncols);\n}\n\nvoid multiples_of_5(int ***array,int nrows,int ncols)\n{\n    int i=0;\n    int j=0;\n    int number = 1;\n    int **arr;\n    arr = *array;\n\n    for(i=0;i&lt;nrows;i++)\n    {\n        printf(\"\\n\");\n        for(j=0;j&lt;ncols;j++)\n        {\n\n            arr[i][j] = number * 5;\n            printf(\"%d\\t\",arr[i][j]);\n            number++;\n        }\n    }\n    free_our_ptr(&amp;arr,nrows,ncols);\n}\n\nvoid free_our_ptr(int ***arr,int nrows,int ncols)\n{\n    int i;\n    for(i=0;i&lt;nrows;i++)\n    {\n        free(arr[i]);\n    }\n    free(arr);\n}\n</code></pre>\n\n<p>I tried the suggestions, removed free_our_ptr() function altogether and freed the memory in main() itself. On ubuntu linux gcc, it gives a segmentation fault error. However, on Visual Studio-Windows7, runs perfectly fine, no errors in any test cases. Below is the modified code.</p>\n\n<pre><code>#include&lt;stdlib.h&gt;\n\nvoid numbers(int ***arr,int nrows,int ncols);\nvoid square(int ***arr,int nrows,int ncols);\nvoid cube(int ***arr,int nrows,int ncols);\nvoid multiples_of_4(int ***arr,int nrows,int ncols);\nvoid multiples_of_5(int ***arr,int nrows,int ncols);\n\nint main(void)\n{\n\n    int i=0;\n\n    int nrows = 0;\n    int ncols = 0;\n\n    int menu_choice = 0;\n\n    int **arr;\n\n    printf(\"\\nGet number of rows : \");\n    scanf_s(\"%d\",&amp;nrows);\n\n    if(nrows &gt; 10)\n    {\n        printf(\"\\nRows should be less than 10 \");\n        exit(0);\n\n    }\n\n    printf(\"\\nGet number of columns : \");\n    scanf_s(\"%d\",&amp;ncols);\n\n    if(ncols &gt; 10)\n    {\n        printf(\"\\nColumns should be less than 10 \");\n        exit(0);\n\n    }\n\n    printf(\"\\nNumber of rows = %d\",nrows);\n    printf(\"\\nNumber of cols = %d\",ncols);\n\n    /******* Dynamic memory allocation for array ***********/\n\n    arr = (int **) malloc ( nrows * sizeof(int));\n\n    for(i=0;i&lt;nrows;i++)\n    {\n        arr[i] = (int *) malloc ( ncols * sizeof(int));\n    }\n\n    /********************************************************/\n\n    printf(\"\\nThese are your choices : \");\n    printf(\"\\nFill with Integers ---------------- 1\");\n    printf(\"\\nFill with Squares  ---------------- 2\");\n    printf(\"\\nFill with Cubes ------------------- 3\");\n    printf(\"\\nFill with Multiples of 4 ---------- 4\");\n    printf(\"\\nFill with Multiples of 5 ---------- 5\");\n    printf(\"\\n\\nEnter your choice : \");\n    scanf_s(\"%d\",&amp;menu_choice);\n\n    switch(menu_choice)\n    {\n    case 1:\n        numbers(&amp;arr,nrows,ncols);\n        break;\n\n    case 2:\n        square(&amp;arr,nrows,ncols);\n        break;\n\n    case 3:\n        cube(&amp;arr,nrows,ncols);\n        break;\n\n    case 4:\n        multiples_of_4(&amp;arr,nrows,ncols);\n        break;\n\n    case 5:\n        multiples_of_5(&amp;arr,nrows,ncols);\n        break;\n\n    default :\n        printf(\"\\nInvalid Choice, exiting program\");\n        free(arr);\n        exit(0);\n    }\n\n    free(arr);\n\n    exit(0);\n\n}\n\nvoid numbers(int ***array,int num_rows,int num_columns)\n{\n    int i=0;\n    int j=0;\n\n    int number = 1;\n    int **arr;\n    int r1 = num_rows;\n    int c1 = num_columns;\n    arr = *array;\n\n    printf(\"\\nNumber of rows = %d\",r1);\n    printf(\"\\nNumber of cols = %d\",c1);\n\n    for(i=0;i&lt;r1;i++)\n    {\n        printf(\"\\n\");\n        for(j=0;j&lt;c1;j++)\n        {\n\n            arr[i][j] = number;\n            printf(\"%d\\t\",arr[i][j]);\n            number++;\n        }\n    }\n\n\n}\n\nvoid square(int ***array,int num_rows,int num_columns)\n{\n    int i=0;\n    int j=0;\n    int number = 1;\n    int **arr;\n\n    int r2 = num_rows;\n    int c2 = num_columns;\n\n    arr = *array;\n\n    printf(\"\\nNumber of rows = %d\",r2);\n    printf(\"\\nNumber of cols = %d\",c2);\n\n    for(i=0;i&lt;r2;i++)\n    {\n        printf(\"\\n\");\n        for(j=0;j&lt;c2;j++)\n        {\n\n            arr[i][j] = number * number;\n            printf(\"%d\\t\",arr[i][j]);\n            ++number;\n        }\n    }\n\n}\n\n\nvoid cube(int ***array,int num_rows,int num_columns)\n{\n    int i=0;\n    int j=0;\n    int number = 1;\n    int **arr;\n\n    int r3 = num_rows;\n    int c3 = num_columns;\n\n    arr = *array;\n\n    printf(\"\\nNumber of rows = %d\",r3);\n    printf(\"\\nNumber of cols = %d\",c3);\n\n    for(i=0;i&lt;r3;i++)\n    {\n        printf(\"\\n\");\n        for(j=0;j&lt;c3;j++)\n        {\n\n            arr[i][j] = number * number * number;\n            printf(\"%d\\t\",arr[i][j]);\n            number++;\n        }\n    }\n\n}\n\nvoid multiples_of_4(int ***array,int num_rows,int num_columns)\n{\n    int i=0;\n    int j=0;\n    int number = 1;\n    int **arr;\n\n    int r4 = num_rows;\n    int c4 = num_columns;\n\n    arr = *array;\n\n    printf(\"\\nNumber of rows = %d\",r4);\n    printf(\"\\nNumber of cols = %d\",c4);\n\n    for(i=0;i&lt;r4;i++)\n    {\n        printf(\"\\n\");\n        for(j=0;j&lt;c4;j++)\n        {\n\n            arr[i][j] = number * 4;\n            printf(\"%d\\t\",arr[i][j]);\n            number++;\n        }\n    }\n\n}\n\nvoid multiples_of_5(int ***array,int num_rows,int num_columns)\n{\n    int i=0;\n    int j=0;\n    int number = 1;\n    int **arr;\n\n    int r5 = num_rows;\n    int c5 = num_columns;\n\n    arr = *array;\n\n    printf(\"\\nNumber of rows = %d\",r5);\n    printf(\"\\nNumber of cols = %d\",c5);\n\n    for(i=0;i&lt;r5;i++)\n    {\n        printf(\"\\n\");\n        for(j=0;j&lt;c5;j++)\n        {\n\n            arr[i][j] = number * 5;\n            printf(\"%d\\t\",arr[i][j]);\n            number++;\n        }\n    }\n\n}\n</code></pre>\n"}, {"tags": ["c", "unix"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1453917156, "post_id": 35044579, "comment_id": 57813343, "body": "<code>my_program.c</code> isn&#39;t your program, its just your sourcecode, what do you expect to happen?"}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 2, "creation_date": 1453917495, "post_id": 35044579, "comment_id": 57813565, "body": "Dude, first read some tutorials about the C programming language and only then approach such tasks. Your source file isn&#39;t the executable. That&#39;s ridiculous."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1453917537, "post_id": 35044579, "comment_id": 57813595, "body": "Is there a reason you&#39;re going with text processing from another tool? Directory listing is an OS dependent task, but then, so is <code>ls</code>. It would be much simpler to, on POSIX systems, to use <a href=\"http://linux.die.net/man/3/opendir\" rel=\"nofollow noreferrer\"><code>opendir</code></a>, <a href=\"http://linux.die.net/man/3/readdir\" rel=\"nofollow noreferrer\"><code>readdir</code></a> and <a href=\"http://linux.die.net/man/3/closedir\" rel=\"nofollow noreferrer\"><code>closedir</code></a> to iterate the directory programmatically (and on most systems, the <code>dirent</code> struct will include <code>d_type</code> that will let you know if the entry is a directory &quot;for free&quot;; no need to <code>stat</code> unless you need to handle symlinks to dirs as dirs)."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1453917702, "post_id": 35044579, "comment_id": 57813695, "body": "Learn <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "answers": [{"tags": [], "owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": false, "score": 1, "last_activity_date": 1453917307, "creation_date": 1453917307, "answer_id": 35044651, "question_id": 35044579, "link": "https://stackoverflow.com/questions/35044579/c-piping-program-output/35044651#35044651", "title": "C - Piping program output", "body": "<p>compile the program like this</p>\n\n<pre><code>gcc my_program.c -o my_program\n</code></pre>\n\n<p>then do</p>\n\n<pre><code>ls -l | my_program\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1453925995, "post_id": 35044682, "comment_id": 57818652, "body": "OP does not state he uses Linux. On POSIX systems, the C compiler is <code>c99</code>."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1453940430, "post_id": 35044682, "comment_id": 57825668, "body": "my 10c is that he uses linux"}], "tags": [], "owner": {"reputation": 82, "user_id": 3067358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37c0354733615cbb9ca5dc9568347d2c?s=128&d=identicon&r=PG&f=1", "display_name": "Bhagat Janarthanan", "link": "https://stackoverflow.com/users/3067358/bhagat-janarthanan"}, "is_accepted": false, "score": 1, "last_activity_date": 1453917400, "creation_date": 1453917400, "answer_id": 35044682, "question_id": 35044579, "link": "https://stackoverflow.com/questions/35044579/c-piping-program-output/35044682#35044682", "title": "C - Piping program output", "body": "<p>Before running, you have to compile your program. For C files, you can compile using gcc.</p>\n\n<pre><code>$ gcc my_program.c\n</code></pre>\n\n<p>This will create an executable file named a.out. Running is done by the following command.</p>\n\n<pre><code>$ ls -l | a.out \n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 5844624, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7559ca0474ebaefe49d23c1d9cc50f80?s=128&d=identicon&r=PG&f=1", "display_name": "SuperSpider", "link": "https://stackoverflow.com/users/5844624/superspider"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "closed_date": 1453963540, "answer_count": 2, "score": -2, "last_activity_date": 1453917550, "creation_date": 1453917049, "last_edit_date": 1453917550, "question_id": 35044579, "link": "https://stackoverflow.com/questions/35044579/c-piping-program-output", "closed_reason": "Not suitable for this site", "title": "C - Piping program output", "body": "<p>My program needs to read the output of <code>ls -l</code> and determine which files are directories. So I tried <code>ls -l | my_program.c</code>, but nothing happens and it should return two directories that I made. How do I read the input given from <code>ls -l</code>?</p>\n"}, {"tags": ["c", "makefile", "output"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1453917005, "post_id": 35044506, "comment_id": 57813246, "body": "This is a very basic problem which is handled in every tutorial at the very beginning."}, {"owner": {"reputation": 351, "user_id": 5570764, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/81166bd56dc65e7ee350592c6cf0ea01?s=128&d=identicon&r=PG&f=1", "display_name": "ajfbiw.s", "link": "https://stackoverflow.com/users/5570764/ajfbiw-s"}, "reply_to_user": {"reputation": 1831, "user_id": 4278074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spNDb.jpg?s=128&g=1", "display_name": "Aleksandar Makragi\u0107", "link": "https://stackoverflow.com/users/4278074/aleksandar-makragi%c4%87"}, "edited": false, "score": 0, "creation_date": 1453917063, "post_id": 35044506, "comment_id": 57813286, "body": "@AleksandarMakragi\u0107: What do you mean &quot;how do I create all&quot;?"}, {"owner": {"reputation": 1831, "user_id": 4278074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spNDb.jpg?s=128&g=1", "display_name": "Aleksandar Makragi\u0107", "link": "https://stackoverflow.com/users/4278074/aleksandar-makragi%c4%87"}, "edited": false, "score": 0, "creation_date": 1453917210, "post_id": 35044506, "comment_id": 57813386, "body": "Please watch Make tutorial. As Olaf said before, this is most basic question."}, {"owner": {"reputation": 351, "user_id": 5570764, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/81166bd56dc65e7ee350592c6cf0ea01?s=128&d=identicon&r=PG&f=1", "display_name": "ajfbiw.s", "link": "https://stackoverflow.com/users/5570764/ajfbiw-s"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1453917222, "post_id": 35044506, "comment_id": 57813394, "body": "@Olaf: Does this very basic problem happen to be something you know the answer to?"}, {"owner": {"reputation": 1831, "user_id": 4278074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spNDb.jpg?s=128&g=1", "display_name": "Aleksandar Makragi\u0107", "link": "https://stackoverflow.com/users/4278074/aleksandar-makragi%c4%87"}, "edited": false, "score": 0, "creation_date": 1453917357, "post_id": 35044506, "comment_id": 57813478, "body": "Ok first, what are you trying to accomplish here? Do you want to create 3 separate executable files for 3 different programs, or do you want to merge them into one?"}, {"owner": {"reputation": 351, "user_id": 5570764, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/81166bd56dc65e7ee350592c6cf0ea01?s=128&d=identicon&r=PG&f=1", "display_name": "ajfbiw.s", "link": "https://stackoverflow.com/users/5570764/ajfbiw-s"}, "edited": false, "score": 0, "creation_date": 1453917408, "post_id": 35044506, "comment_id": 57813514, "body": "3 separate files for 3 different programs."}, {"owner": {"reputation": 1831, "user_id": 4278074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spNDb.jpg?s=128&g=1", "display_name": "Aleksandar Makragi\u0107", "link": "https://stackoverflow.com/users/4278074/aleksandar-makragi%c4%87"}, "edited": false, "score": 0, "creation_date": 1453918555, "post_id": 35044506, "comment_id": 57814214, "body": "Ok, check my answer. If you have any further questions feel free to ask. But you should really do some tutorial on Make since it is very important tool."}], "answers": [{"comments": [{"owner": {"reputation": 351, "user_id": 5570764, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/81166bd56dc65e7ee350592c6cf0ea01?s=128&d=identicon&r=PG&f=1", "display_name": "ajfbiw.s", "link": "https://stackoverflow.com/users/5570764/ajfbiw-s"}, "edited": false, "score": 0, "creation_date": 1453917578, "post_id": 35044664, "comment_id": 57813623, "body": "And also: all: 1 2 3?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1453917607, "post_id": 35044664, "comment_id": 57813639, "body": "Objects should add <code>.o</code> suffix or that left to an implicit rule. Also that will not just generate the object, but an excecutable."}], "tags": [], "owner": {"reputation": 146, "user_id": 5146229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a990d1415a2bd113c2990f5a5e55f0c0?s=128&d=identicon&r=PG&f=1", "display_name": "convexbytes", "link": "https://stackoverflow.com/users/5146229/convexbytes"}, "is_accepted": false, "score": 0, "last_activity_date": 1453917352, "creation_date": 1453917352, "answer_id": 35044664, "question_id": 35044506, "link": "https://stackoverflow.com/questions/35044506/make-not-producing-output/35044664#35044664", "title": "Make not producing output", "body": "<p>With <code>1.c:</code> you are defining the rule to construct the object \"1.c\", you need to say you are constructing object \"1\"</p>\n\n<pre><code>1: 1.c\n    gcc 1.c -o 1\n2: 2.c\n    gcc 2.c -o 2\n3: 3.c\n    gcc 3.c -o 3\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1831, "user_id": 4278074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spNDb.jpg?s=128&g=1", "display_name": "Aleksandar Makragi\u0107", "link": "https://stackoverflow.com/users/4278074/aleksandar-makragi%c4%87"}, "is_accepted": true, "score": 1, "last_activity_date": 1453918341, "last_edit_date": 1592644375, "creation_date": 1453917837, "answer_id": 35044809, "question_id": 35044506, "link": "https://stackoverflow.com/questions/35044506/make-not-producing-output/35044809#35044809", "title": "Make not producing output", "body": "<pre><code>all: 1 2 3\n\n1: 1.c\n    gcc 1.c -o 1\n2: 2.c\n    gcc 2.c -o 2\n3: 3.c\n    gcc 3.c -o 3\n</code></pre>\n<p>How does make know what to compile? He checks last modified time of dependencies! And if dependency file has modified after the target file only then he's doing the work!</p>\n<p>He checks <code>1 2 3</code> and their dependencies. Dependency for <code>1</code> is <code>1.c</code>. And now, if <code>1.c</code> is modified after <code>1</code> only then will he do <code>gcc 1.c -o 1</code>. Since in your case <code>1</code> doesn't even exist, Make will create this file for you.</p>\n<blockquote>\n<p>Target: all -&gt; Dependencies: 1 2 3</p>\n<p>Target: 1 -&gt; Dependency: 1.c</p>\n<p>Target: 2 -&gt; Dependency: 2.c</p>\n<p>Target: 3 -&gt; Dependency: 3.c</p>\n</blockquote>\n<p>And now he checks, what was last modified, <code>1</code> or <code>1.c</code>? I don't even have <code>1</code>, so I'll create target file <code>1</code> using <code>gcc 1.c -o 1</code> etc.</p>\n<p>Next time, if you have your <code>1</code> file and you modified your <code>1.c</code> he will see that file <code>1</code> was created before <code>1.c</code> was last modified and so he will do again <code>gcc 1.c -o 1</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 248, "user_id": 5744492, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/hURQy.png?s=128&g=1", "display_name": "0x0584", "link": "https://stackoverflow.com/users/5744492/0x0584"}, "is_accepted": false, "score": 0, "last_activity_date": 1453919615, "creation_date": 1453919615, "answer_id": 35045329, "question_id": 35044506, "link": "https://stackoverflow.com/questions/35044506/make-not-producing-output/35045329#35045329", "title": "Make not producing output", "body": "<p>you can use this..</p>\n\n<pre><code># Makefile template\nCC=gcc\nCFLAGS= -I. \nOBJ=1.o 2.o 3.o \nDEPS= library1.h library2.h library3.h \nall: X\n    @echo \"Finish.\"\nX: $(OBJ)\n    @echo \"Building the application core..\"\n    $(CC) -o x $(OBJ) $(CFLAGS)\n\n%.o: %.c $(DEPS)\n    @echo \"Building objects..\"\n    $(CC) -c -o $@ $&lt; $(CFLAGS)\nclean: \n    @echo \"Cleaning up..\"\n    rm -f $(OBJ) x\n</code></pre>\n\n<p><strong><em>Source:</em></strong>\n<a href=\"http://www.cs.colby.edu/maxwell/courses/tutorials/maketutor/\" rel=\"nofollow\">http://www.cs.colby.edu/maxwell/courses/tutorials/maketutor/</a></p>\n"}], "owner": {"reputation": 351, "user_id": 5570764, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/81166bd56dc65e7ee350592c6cf0ea01?s=128&d=identicon&r=PG&f=1", "display_name": "ajfbiw.s", "link": "https://stackoverflow.com/users/5570764/ajfbiw-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "closed_date": 1453996100, "accepted_answer_id": 35044809, "answer_count": 3, "score": -1, "last_activity_date": 1453919615, "creation_date": 1453916806, "question_id": 35044506, "link": "https://stackoverflow.com/questions/35044506/make-not-producing-output", "closed_reason": "Not suitable for this site", "title": "Make not producing output", "body": "<pre><code>all: 1.c 2.c 3.c\n\n1.c:\n  gcc 1.c -o 1\n2.c:\n  gcc 2.c -o 2\n3.c:\n  gcc 3.c -o 3\n</code></pre>\n\n<p>So when I type \"make\", why is no file produced (it just tells me \"make\" is up to date.) and what am I doing wrong?!</p>\n\n<p>Note that 1, 2, and 3 are not my actual file names.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 7, "creation_date": 1453916048, "post_id": 35044227, "comment_id": 57812556, "body": "Of course it does, it&#39;s your program surely that doesn&#39;t. 1. Please don&#39;t write 3 statements in a single line it&#39;s very ugly and hard to read. 2. Don&#39;t <code>fflush(stdin)</code>, <code>fflush()</code> is for output streams not input. 3. NEVER use <code>gets()</code> it&#39;s a deprecated function and it&#39;s very dangerous use <code>fgets()</code> instead. 4. Always check the return value of <code>scanf()</code>, it might be that it failed and your program is invoking undefined behavior."}, {"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 0, "creation_date": 1453916269, "post_id": 35044227, "comment_id": 57812704, "body": "How are you looking at the file?"}, {"owner": {"reputation": 13, "user_id": 4864953, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Q5aiAC9tyXk/AAAAAAAAAAI/AAAAAAAAAL8/SLvkPA-rChw/photo.jpg?sz=128", "display_name": "Speedy .RoGamer", "link": "https://stackoverflow.com/users/4864953/speedy-rogamer"}, "edited": false, "score": 0, "creation_date": 1453916372, "post_id": 35044227, "comment_id": 57812774, "body": "I opened the .dat file inside codeblocks. And I tested to see if the a[i] values are all correct, they were... I know I&#39;m using some outdated functions, but the reading part worked"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1453916394, "post_id": 35044227, "comment_id": 57812798, "body": "<code>getch</code> is in <code>conio.h</code>, although that isn&#39;t included here that I can see."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1453916416, "post_id": 35044227, "comment_id": 57812812, "body": "@iharob: Actually, <code>gets</code> is not even part of C standard (anymore)."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1453916508, "post_id": 35044227, "comment_id": 57812875, "body": "<code>getch</code> is no standard function. Use <code>getchar</code>."}, {"owner": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1453916689, "post_id": 35044227, "comment_id": 57813007, "body": "@iharob Just for the sake of precision  <code>fflush on input stream is an extension to the C standard</code> for MS (see <a href=\"https://msdn.microsoft.com/it-it/library/9yky46tz.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/it-it/library/9yky46tz.aspx</a>) ;-)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1453917223, "post_id": 35044227, "comment_id": 57813396, "body": "Also suggest <code>fopen(&quot;evidenta.dat&quot;,&quot;wb&quot;)</code> --&gt; <code>fopen(&quot;evidenta.dat&quot;,&quot;w&quot;)</code>  (drop b)"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "edited": false, "score": 0, "creation_date": 1453917484, "post_id": 35044227, "comment_id": 57813556, "body": "@Frankie_C I know but it&#39;s wise to teach people not to use it because it&#39;s not standard, it actually contradicts the standard."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1453917494, "post_id": 35044227, "comment_id": 57813564, "body": "Need to post example input data. <code>gets(a[i].model</code> does not protect against buffer over-runs.  So entering something like &quot;abcde&quot; will mess up the program."}, {"owner": {"reputation": 8652, "user_id": 2040863, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IspsC.jpg?s=128&g=1", "display_name": "John Hascall", "link": "https://stackoverflow.com/users/2040863/john-hascall"}, "edited": false, "score": 0, "creation_date": 1453917515, "post_id": 35044227, "comment_id": 57813576, "body": "Using <code>&amp;a</code> is wrong (on the fwrite line), <code>a</code> is an array, just use <code>fwrite(a, ... )</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1453917646, "post_id": 35044227, "comment_id": 57813662, "body": "<code>getch(a[i].carburant);</code> is very wrong.  Expect something like <code>a[i].carburant = getch();</code>"}, {"owner": {"reputation": 13, "user_id": 4864953, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Q5aiAC9tyXk/AAAAAAAAAAI/AAAAAAAAAL8/SLvkPA-rChw/photo.jpg?sz=128", "display_name": "Speedy .RoGamer", "link": "https://stackoverflow.com/users/4864953/speedy-rogamer"}, "edited": false, "score": 0, "creation_date": 1453917824, "post_id": 35044227, "comment_id": 57813768, "body": "yes, thank you, changed the getch part, but still the fwrite doesn&#39;t work, will post in 1 minute an example"}, {"owner": {"reputation": 13, "user_id": 4864953, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Q5aiAC9tyXk/AAAAAAAAAAI/AAAAAAAAAL8/SLvkPA-rChw/photo.jpg?sz=128", "display_name": "Speedy .RoGamer", "link": "https://stackoverflow.com/users/4864953/speedy-rogamer"}, "edited": false, "score": 0, "creation_date": 1453918180, "post_id": 35044227, "comment_id": 57813972, "body": "Posted the pics, the only part that seems to not do it&#39;s job now, it&#39;s still the fwrite since I can&#39;t see the whole .dat file"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1453918219, "post_id": 35044227, "comment_id": 57813997, "body": "&quot;break&quot; does not fit in <code>model[5];</code>.  Need 6"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1453918255, "post_id": 35044227, "comment_id": 57814021, "body": "Hang on - what are you opening the file with to check its contents?"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1453918295, "post_id": 35044227, "comment_id": 57814044, "body": "Open it with a hex editor, and tell us the file size/length."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1453918386, "post_id": 35044227, "comment_id": 57814097, "body": "Then try writing the lot, eg, sizeof(a), just to be sure of what&#39;s happening."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1453918515, "post_id": 35044227, "comment_id": 57814183, "body": "Screen shot does not match code.  Where do the lines `bmw\\nb\\n...1952\\n&quot; come from?"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1453918571, "post_id": 35044227, "comment_id": 57814227, "body": "..because I&#39;m not convinced that the codeblocks editor is showing you what is there, binary-wise.  It&#39;s a text editor."}, {"owner": {"reputation": 13, "user_id": 4864953, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Q5aiAC9tyXk/AAAAAAAAAAI/AAAAAAAAAL8/SLvkPA-rChw/photo.jpg?sz=128", "display_name": "Speedy .RoGamer", "link": "https://stackoverflow.com/users/4864953/speedy-rogamer"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1453918719, "post_id": 35044227, "comment_id": 57814328, "body": "@MartinJames the file is 82 bytes , i opened it in a hex editor, should I print out what it says ?"}, {"owner": {"reputation": 13, "user_id": 4864953, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Q5aiAC9tyXk/AAAAAAAAAAI/AAAAAAAAAL8/SLvkPA-rChw/photo.jpg?sz=128", "display_name": "Speedy .RoGamer", "link": "https://stackoverflow.com/users/4864953/speedy-rogamer"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1453918744, "post_id": 35044227, "comment_id": 57814348, "body": "@chux i added the later code, it was writing to see if the input was correct"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1453918748, "post_id": 35044227, "comment_id": 57814350, "body": "Oh sh... no fclose(), as posted by @vVasfed:("}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1453918759, "post_id": 35044227, "comment_id": 57814357, "body": "Code does not use end of line in saving to the file"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1453919020, "post_id": 35044227, "comment_id": 57814528, "body": "Code is writing in blocks of <code>AUTOMOBIL</code> and OP is attempting to read it with a text editor.  Either write as text or view data with a data editor."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1453919132, "post_id": 35044227, "comment_id": 57814611, "body": "@Speedy.RoGamer sounds about right for two records: (20+1+5+8+8)*2 is around 82 bytes-ish.  Not sure of padding, int size etc."}, {"owner": {"reputation": 13, "user_id": 4864953, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Q5aiAC9tyXk/AAAAAAAAAAI/AAAAAAAAAL8/SLvkPA-rChw/photo.jpg?sz=128", "display_name": "Speedy .RoGamer", "link": "https://stackoverflow.com/users/4864953/speedy-rogamer"}, "edited": false, "score": 0, "creation_date": 1453919289, "post_id": 35044227, "comment_id": 57814736, "body": "Thank you all for your help, the codeblocks simply could not read the file in the correct way. I did an fread and it showed the right data"}], "answers": [{"comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1453918479, "post_id": 35044349, "comment_id": 57814156, "body": "What is teh written file size in bytes?"}], "tags": [], "owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "is_accepted": false, "score": 0, "last_activity_date": 1453918621, "last_edit_date": 1453918621, "creation_date": 1453916373, "answer_id": 35044349, "question_id": 35044227, "link": "https://stackoverflow.com/questions/35044227/fwrite-doesnt-work-properly/35044349#35044349", "title": "Fwrite doesn&#39;t work properly", "body": "<p>It's because you write the first item each time - <code>&amp;a</code> while expecting <code>&amp;(a[i])</code> to be written.</p>\n\n<p>And do not forget to <code>fclose</code> the file after writing for the buffer not to be lost.</p>\n\n<p>If you want to see the live changes on the file while you write, you need to disable output buffer <code>setbuf(f,NULL)</code> or flush it <code>fflush(f)</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1453916804, "post_id": 35044365, "comment_id": 57813104, "body": "How about <code>fwrite(&amp;(a[i]),sizeof a[i],1,f);</code>?"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1453918448, "post_id": 35044365, "comment_id": 57814131, "body": "What is teh written file size in bytes?"}, {"owner": {"reputation": 1448, "user_id": 1679647, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Z0sB3.jpg?s=128&g=1", "display_name": "Gerhard Stein", "link": "https://stackoverflow.com/users/1679647/gerhard-stein"}, "edited": false, "score": 0, "creation_date": 1453926767, "post_id": 35044365, "comment_id": 57819075, "body": "Did you close the file?"}], "tags": [], "owner": {"reputation": 1448, "user_id": 1679647, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Z0sB3.jpg?s=128&g=1", "display_name": "Gerhard Stein", "link": "https://stackoverflow.com/users/1679647/gerhard-stein"}, "is_accepted": true, "score": 0, "last_activity_date": 1453926745, "last_edit_date": 1453926745, "creation_date": 1453916412, "answer_id": 35044365, "question_id": 35044227, "link": "https://stackoverflow.com/questions/35044227/fwrite-doesnt-work-properly/35044365#35044365", "title": "Fwrite doesn&#39;t work properly", "body": "<p>You have to do it this way:</p>\n\n<pre><code>fwrite(&amp;(a[i]),sizeof(AUTOMOBIL),1,f);\n</code></pre>\n\n<p>Alternatively you can do that outside the loop:</p>\n\n<pre><code>fwrite(a,sizeof(AUTOMOBIL),n,f);\n</code></pre>\n\n<p>Also don't forget to fclose.</p>\n"}, {"tags": [], "owner": {"reputation": 146, "user_id": 5146229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a990d1415a2bd113c2990f5a5e55f0c0?s=128&d=identicon&r=PG&f=1", "display_name": "convexbytes", "link": "https://stackoverflow.com/users/5146229/convexbytes"}, "is_accepted": false, "score": 0, "last_activity_date": 1453917004, "creation_date": 1453917004, "answer_id": 35044565, "question_id": 35044227, "link": "https://stackoverflow.com/questions/35044227/fwrite-doesnt-work-properly/35044565#35044565", "title": "Fwrite doesn&#39;t work properly", "body": "<p>As the others answer say you need to write to <code>&amp;a[i]</code>. If you want to see the contents of the file in the moment is written, you need to disable output buffer with <code>setbuf(f, NULL)</code> or flush it each time you write with <code>fflush(f)</code>.</p>\n"}], "owner": {"reputation": 13, "user_id": 4864953, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Q5aiAC9tyXk/AAAAAAAAAAI/AAAAAAAAAL8/SLvkPA-rChw/photo.jpg?sz=128", "display_name": "Speedy .RoGamer", "link": "https://stackoverflow.com/users/4864953/speedy-rogamer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1772, "favorite_count": 0, "accepted_answer_id": 35044365, "answer_count": 3, "score": 0, "last_activity_date": 1453926745, "creation_date": 1453916004, "last_edit_date": 1453918606, "question_id": 35044227, "link": "https://stackoverflow.com/questions/35044227/fwrite-doesnt-work-properly", "title": "Fwrite doesn&#39;t work properly", "body": "<p>Sorry for having this program in my native language, but I really can't seem to find why it doesn't work. So, I tested and the values of the a array are all correctly read, but when I try to look at the .dat file there is only the first word read in the for function ( a[0].marca ).</p>\n\n<p>Here is the input <a href=\"http://i.stack.imgur.com/lAONC.png\" rel=\"nofollow\">I also tested to see if it reads correct</a></p>\n\n<p>Here is the .dat file <a href=\"http://i.stack.imgur.com/zdMXg.png\" rel=\"nofollow\">It only writes the first</a></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct data\n{\n    int anul;\n    int luna;\n};\ntypedef struct data DATA;\nstruct automobil\n{\n    char marca[20];\n    char carburant;\n    char model[5];\n    DATA fabricatie;\n};\ntypedef struct automobil AUTOMOBIL;\n\n\n\n\nint main()\n{\n    AUTOMOBIL a[100];\n    int n;\n    FILE *f;\n\n    int i;\n    if((f=fopen(\"evidenta.dat\",\"wb\"))==NULL)\n    {\n        exit(1);\n    }\n    printf(\"Cate automobile sunt ?\"); scanf(\"%d\",&amp;n);  // The number of cars registered\n    for(i=0;i&lt;n;i++)   // getting the details about every car\n    {\n        printf(\"\\nMarca ? : \"); fflush(stdin); gets(a[i].marca);\n        printf(\"\\nCarburant ? : \"); fflush(stdin); getch(a[i].carburant);\n        printf(\"\\nModelul? :\");  fflush(stdin); gets(a[i].model);\n        printf(\"\\nLuna fabricatie ? :\"); scanf(\"%d\",&amp;a[i].fabricatie.luna);\n        printf(\"\\nAn fabricatie ? : \"); scanf(\"%d\",&amp;a[i].fabricatie.anul);\n\n        // After getting a line it has to write it in the binary file\n        fwrite(&amp;(a[i]),sizeof(AUTOMOBIL),1,f); //It writes only  a[0].marca\n    }\n     for(i=0;i&lt;n;i++)\n{\n    printf(\"\\n %s\",a[i].marca);\n    printf(\"\\n %c\",a[i].carburant);\n    printf(\"\\n %s\",a[i].model);\n    printf(\"\\n %d\",a[i].fabricatie.luna);\n     printf(\"\\n %d\",a[i].fabricatie.anul);\n}\n\n    return 0;\n\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1453915783, "post_id": 35044078, "comment_id": 57812386, "body": "<code>= *i2s(br);</code>...hmmmmm"}, {"owner": {"reputation": 1655, "user_id": 3493587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0b29d44004eaedbc859bad8144bade93?s=128&d=identicon&r=PG&f=1", "display_name": "mikedu95", "link": "https://stackoverflow.com/users/3493587/mikedu95"}, "edited": false, "score": 0, "creation_date": 1453915865, "post_id": 35044078, "comment_id": 57812448, "body": "You can start with getting your code compiling. And ask if there&#39;s any warning or error message that you don&#39;t understand. Here are the current errors with your code: <a href=\"http://ideone.com/l2YkrA\" rel=\"nofollow noreferrer\">ideone.com/l2YkrA</a>. What error message don&#39;t you understand ?"}, {"owner": {"reputation": 81, "user_id": 5848141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f80fca6e14fa43e6fda57004d0b15585?s=128&d=identicon&r=PG&f=1", "display_name": "dragan zrilic", "link": "https://stackoverflow.com/users/5848141/dragan-zrilic"}, "reply_to_user": {"reputation": 1655, "user_id": 3493587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0b29d44004eaedbc859bad8144bade93?s=128&d=identicon&r=PG&f=1", "display_name": "mikedu95", "link": "https://stackoverflow.com/users/3493587/mikedu95"}, "edited": false, "score": 0, "creation_date": 1453916378, "post_id": 35044078, "comment_id": 57812782, "body": "I&#39;m getting these errors <a href=\"http://clip2net.com/s/3tvMfMN\" rel=\"nofollow noreferrer\">clip2net.com/s/3tvMfMN</a> Sorry but I don&#39;t understand none of them @mikedu95"}, {"owner": {"reputation": 1655, "user_id": 3493587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0b29d44004eaedbc859bad8144bade93?s=128&d=identicon&r=PG&f=1", "display_name": "mikedu95", "link": "https://stackoverflow.com/users/3493587/mikedu95"}, "edited": false, "score": 0, "creation_date": 1453917153, "post_id": 35044078, "comment_id": 57813341, "body": "That&#39;s no problem if you understand none of them because SO is precisely for asking what you don&#39;t understand, but ignoring compiler messages suggests that you made no effort to understand the cause of your errors. Now you can forget this because you already got an answer, but remember for next time. Because most of the time, you can fix your errors yourself :)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4639281"}, "edited": false, "score": 0, "creation_date": 1453959745, "post_id": 35044078, "comment_id": 57831312, "body": "For the first error: <a href=\"http://stackoverflow.com/q/10732010\">one</a>, and <a href=\"http://stackoverflow.com/q/20109071\">two</a>. For the second error: You&#39;re converting an integer to a pointer without a cast, i.e. you&#39;re &quot;free&quot;ing a value, instead of the pointer itself, the note after the second error gives you a hint. Finally, <a href=\"http://stackoverflow.com/q/29612201\">the third error</a>. A little searching goes a long way."}], "answers": [{"tags": [], "owner": {"reputation": 510, "user_id": 5778300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a214fbbf28e4a6615ff6891f99e06c5?s=128&d=identicon&r=PG&f=1", "display_name": "Flikk", "link": "https://stackoverflow.com/users/5778300/flikk"}, "is_accepted": true, "score": 0, "last_activity_date": 1453916656, "last_edit_date": 1453916656, "creation_date": 1453916261, "answer_id": 35044309, "question_id": 35044078, "link": "https://stackoverflow.com/questions/35044078/unknown-error-regarding-strings-and-stdio-h-library/35044309#35044309", "title": "Unknown error regarding strings and stdio.h library", "body": "<pre><code>char string1;\nfree(string1);\n</code></pre>\n\n<p>string 1 is not a pointer.</p>\n\n<p>Also with the following section you overwrite <code>string1</code> everytime you run through the loop. that way you have no pointer to <code>free()</code> the memory that you allocate inside your function unless you do it inside the loop.</p>\n\n<pre><code>for (int i = 0; i &lt; n; i++)\n    {\n        printf(\"\\nbr = \"), scanf(\"%d\", &amp;br);\n        string1 = *i2s(br);\n        printf(\" %s\", string1);\n    }\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 5848141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f80fca6e14fa43e6fda57004d0b15585?s=128&d=identicon&r=PG&f=1", "display_name": "dragan zrilic", "link": "https://stackoverflow.com/users/5848141/dragan-zrilic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "closed_date": 1454024425, "accepted_answer_id": 35044309, "answer_count": 1, "score": 0, "last_activity_date": 1453916656, "creation_date": 1453915599, "question_id": 35044078, "link": "https://stackoverflow.com/questions/35044078/unknown-error-regarding-strings-and-stdio-h-library", "closed_reason": "Not suitable for this site", "title": "Unknown error regarding strings and stdio.h library", "body": "<p>I'm receiving an uknown error found in the stdio.h library.\nPlease can someone check it at tell me what is wrong with the code (But I thing it should work fine).\nP.S. I'm new here so please don't blame me if this is a bad question.\nCode:</p>\n\n<pre><code>   #include &lt;stdio.h&gt;\n    #include &lt;stdlib.h&gt;\n\n    // Conversion from a number to a string\n    char *i2s(int broj);\n\n    int main()\n    {\n        char string1;\n        int br, n;\n        do\n        {\n            printf(\"How much numbers?\\n -\"), scanf(\"%d\", &amp;n);\n        } while (n &lt; 1);\n        for (int i = 0; i &lt; n; i++)\n        {\n            printf(\"\\nbr = \"), scanf(\"%d\", &amp;br);\n            string1 = *i2s(br);\n            printf(\" %s\", string1);\n        }\n        free(string1);\n        getch();\n        return 0;\n    }\n\n    char *i2s(int broj)\n    {\n        char *pom;\n        int z=0,br=0,p;\n        if (broj &lt; 0)\n        {\n            z = 1;\n            broj = -broj;\n        }\n        p = broj;\n        do\n        {\n            br++;\n            p /= 10;\n        } while (p);\n        pom = (char *)calloc(br + 1 + z, sizeof(char));\n        if (z)\n            pom[0] = '-';\n        do\n        {\n            pom[--br + z] = '0' + broj % 10;\n        } while (broj /= 10);\n        return pom;\n}\n</code></pre>\n"}, {"tags": ["c", "stm32", "gpio", "usart", "stm32ldiscovery"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1453916125, "post_id": 35043482, "comment_id": 57812597, "body": "1) That STlib is awful and just adds bloat, but no true abstraction. 2) STlink is a JTAG interface, not sure how that is related to serial communication. Normally you need some kind of USBSerial adapter like FT232. 3) stack overflow is no remote debugging service. See <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> along with a <b>specific</b> problem. Ensure your hardware is correctly setup and configured. Until then all bets are off. Use a debugger."}, {"owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1453961126, "post_id": 35043482, "comment_id": 57831830, "body": "@Olaf I believe some embedded ST-Link implementations, like the ones on certain Discovery boards, include a serial sidechannel."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1453986816, "post_id": 35043482, "comment_id": 57847628, "body": "@duskwuff: Just checked the F407 and F429 boards. You are right, the latter also has that side-channel. As it is newer, it very well might have become an enhancement to the family. Anyway, OP still has not proved the hardware as such is correctly configured."}], "answers": [{"comments": [{"owner": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 0, "creation_date": 1453975699, "post_id": 35053517, "comment_id": 57839900, "body": "What is <code>.ioc</code> file? Agree with the rest :)"}, {"owner": {"reputation": 810, "user_id": 2385952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5809a135057c41d116f6106d7fba67ac?s=128&d=identicon&r=PG", "display_name": "ChrisR", "link": "https://stackoverflow.com/users/2385952/chrisr"}, "reply_to_user": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 1, "creation_date": 1453976944, "post_id": 35053517, "comment_id": 57840771, "body": "@i486 an .ioc template is the file STM-Cube creates and maintains detailing the configuration you set up I have updated the answer to reflect this."}, {"owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1454018800, "post_id": 35053517, "comment_id": 57869074, "body": "Can you try to condense your answer a bit? As it stands you&#39;re kind of rambling -- your personal history as a developer, while interesting, isn&#39;t germane here."}, {"owner": {"reputation": 810, "user_id": 2385952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5809a135057c41d116f6106d7fba67ac?s=128&d=identicon&r=PG", "display_name": "ChrisR", "link": "https://stackoverflow.com/users/2385952/chrisr"}, "reply_to_user": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1454049713, "post_id": 35053517, "comment_id": 57878889, "body": "@duskwuff - thanks for the comment - appreciated, OK now?"}], "tags": [], "owner": {"reputation": 810, "user_id": 2385952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5809a135057c41d116f6106d7fba67ac?s=128&d=identicon&r=PG", "display_name": "ChrisR", "link": "https://stackoverflow.com/users/2385952/chrisr"}, "is_accepted": false, "score": 0, "last_activity_date": 1454049661, "last_edit_date": 1495542258, "creation_date": 1453959095, "answer_id": 35053517, "question_id": 35043482, "link": "https://stackoverflow.com/questions/35043482/usart-communication-on-stm32l476g-discovery/35053517#35053517", "title": "USART communication on STM32L476G Discovery", "body": "<p><strong>Generate the startup using STM-Cube</strong></p>\n\n<p><a href=\"https://stackoverflow.com/questions/34938261/rs232-uart-on-stm32f4-discovery-stm32f429zit6-with-hal-library/34990007#34990007\">Please look at this solution</a> I gave just this week to someone in a similar situation. I took the challenge since I have been experiencing the same frustrations. </p>\n\n<p>I have found it always best to work at the highest possible level when starting a project, regardless. I want to be in a position to leverage technical advances as they occur. </p>\n\n<p>Portable, well documented, high level applications are easily maintained and can be quickly ported to newer processors and architectures. </p>\n\n<p>Optimisation at the bits and bytes level comes later to meet specific performance targets not already met.</p>\n\n<p>By concentrating on the high level solution, new approaches to the algorithm often yield better performance advantages than low level optimisations.</p>\n\n<p>Removing bloated initialisation sequences may save a few hundred bytes of startup code and shave a few microseconds, but startup is seldom on the critical path.</p>\n\n<p>Having a working product on the shelf a month before the opposition can be worth your whole business.</p>\n\n<p>If blinding speed is needed, migrate to higher powered architectures before you begin e.g. STM7 series.</p>\n\n<p>A profiler will quickly yield remaining bottlenecks. These can be optimised, using the high level implementation as specification.</p>\n\n<p>Yes, STM libs (and many other libs e.g. sprintf) are big and bloated, yes they do not address everyone's requirements. But they are nonetheless useful and constantly being improved outside of my budget. </p>\n\n<p>The cost of development is measured in man hours, save them.</p>\n\n<p>Start by configuring everything in CUBE and generating the code, use as many of the features of the chipset and libraries as you can to provide the best solution at a high level. </p>\n\n<p>Build up a library of second layer solutions and optimisation you can reuse in other applications.</p>\n\n<p>The recent upgrade to STMCube and HAL libraries corrected a number of problems I experienced in the past. Not perfect, but very usable and worthwhile. Improvement is ongoing.</p>\n\n<p>Spend the bulk of your time developing the application, rather than fiddling round with unnecessary low level optimisation. </p>\n\n<p>This tends to make your boss happy - even if your only boss is the bank manager.</p>\n\n<p>Hopefully the problems you (we) experienced are now a thing of the past.</p>\n"}, {"tags": [], "owner": {"reputation": 336, "user_id": 4050262, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3kwo8.jpg?s=128&g=1", "display_name": "LoriB", "link": "https://stackoverflow.com/users/4050262/lorib"}, "is_accepted": false, "score": 2, "last_activity_date": 1453974963, "creation_date": 1453974963, "answer_id": 35058146, "question_id": 35043482, "link": "https://stackoverflow.com/questions/35043482/usart-communication-on-stm32l476g-discovery/35058146#35058146", "title": "USART communication on STM32L476G Discovery", "body": "<p>You are initializing the UART in the main and that could be ok, but you are not catching the way HAL libraries want you to initialize the peripheral's pin.\nYou should do that in the HAL_UART_MspInit() function you can find in stm32f4_hal_msp.c file.</p>\n\n<p>Your main should look like this</p>\n\n<pre><code>HAL_Init(); // HAL Init\n\nconfigure_system_clock(); // Configure Clock\n\nhuart2.Instance = USART2;\nhuart2.Init.BaudRate = 9600;\nhuart2.Init.WordLength = UART_WORDLENGTH_8B;\nhuart2.Init.StopBits = UART_STOPBITS_1;\nhuart2.Init.Parity = UART_PARITY_NONE;\nhuart2.Init.Mode = UART_MODE_TX_RX;\nhuart2.Init.HwFlowCtl = UART_HWCONTROL_NONE;\nHAL_UART_Init(&amp;huart2); \n\n HAL_UART_Transmit(&amp;huart2, (uint8_t*)msg, 15, 0xFFFF);\n</code></pre>\n\n<p>Then in your HAL_UART_MspInit(UART_HandleTypeDef* huart) you should have something like this:</p>\n\n<pre><code>GPIO_InitTypeDef GPIO_InitStruct;\nif(huart-&gt;Instance==USART2)\n{\n /* Peripheral clock enable */\n __USART2_CLK_ENABLE();\n __GPIOD_CLK_ENABLE();\n\n/**USART2 GPIO Configuration  */\nGPIO_InitStruct.Pin = GPIO_PIN_5|GPIO_PIN_6;\nGPIO_InitStruct.Mode = GPIO_MODE_AF_PP;\nGPIO_InitStruct.Pull = GPIO_PULLUP;\nGPIO_InitStruct.Speed = GPIO_SPEED_HIGH;\nGPIO_InitStruct.Alternate = GPIO_AF7_USART2;\nHAL_GPIO_Init(GPIOD, &amp;GPIO_InitStruct);\n\n    HAL_NVIC_SetPriority(USART2_IRQn, 0, 1);\n    HAL_NVIC_EnableIRQ(USART2_IRQn);\n}\n</code></pre>\n\n<p>Pay attention to \"GPIO_PULLUP\", I suggest you to config GPIO like this for UART.\nYou also have to define the UART Handler in your stm32f4_it.c file:</p>\n\n<pre><code>void USART2_IRQHandler(void)\n{\n HAL_UART_IRQHandler(&amp;huart2);\n}\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 5847932, "user_type": "registered", "profile_image": "https://graph.facebook.com/1561970074121632/picture?type=large", "display_name": "Alexandre Chirouze", "link": "https://stackoverflow.com/users/5847932/alexandre-chirouze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1741, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1475827786, "creation_date": 1453913853, "last_edit_date": 1453913979, "question_id": 35043482, "link": "https://stackoverflow.com/questions/35043482/usart-communication-on-stm32l476g-discovery", "title": "USART communication on STM32L476G Discovery", "body": "<p>I have two boards: a NUCLEO-F411RE and a STM32L467G Discovery.</p>\n\n<p>I need to make a Virtual Com connection between my STM32L467G Discovery and my PC.</p>\n\n<p>For the NUCLEO : The USART2 is connected to ST-Link, so i can communicate with my PC with USART on USB. So, I enable the GPIO<strong>A</strong> and USART2 Clock. After that, i configure my GPIO<strong>A</strong> to link Ports 2 and 3 on the USART2, and it works well! I can receive some characters on my PC.</p>\n\n<p>For the STM32L467G Discovery : The STM32L467G Discovery has the USART2 on Port 2 and 3 on GPIO<strong>A</strong> too. But, in the documentation, they say that the USART2 is connected with the ST-Link with USART2 on Port 5 and 6 in GPIO<strong>D</strong>. So, i have modify my souce code but i can't receive anything in my computer..</p>\n\n<p>Check my sources:</p>\n\n<p>Main.c    </p>\n\n<pre><code>#include \"stm32l4xx.h\"\n#include \"stm32l476g_discovery.h\"\n\n\nUART_HandleTypeDef huart2;\nGPIO_InitTypeDef GPIO_InitStruct;\nvoid configure_system_clock(void);\n\nint main(void)\n{\n\n    HAL_Init(); // HAL Init\n\n    configure_system_clock(); // Configure Clock\n\n\n    __GPIOD_CLK_ENABLE(); // Enable GPIOD clock\n    __USART2_CLK_ENABLE(); // Enable USART2 Clock\n\n\n    huart2.Instance = USART2;\n    huart2.Init.BaudRate = 9600;\n    huart2.Init.WordLength = UART_WORDLENGTH_8B;\n    huart2.Init.StopBits = UART_STOPBITS_1;\n    huart2.Init.Parity = UART_PARITY_NONE;\n    huart2.Init.Mode = UART_MODE_TX_RX;\n    huart2.Init.HwFlowCtl = UART_HWCONTROL_NONE;\n    HAL_UART_Init(&amp;huart2);\n\n\n\n            /**USART2 GPIO Configuration\n            PA2     ------&gt; USART2_TX\n            PA3     ------&gt; USART2_RX\n            */\n    GPIO_InitStruct.Pin = GPIO_PIN_5|GPIO_PIN_6;\n    GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;\n    GPIO_InitStruct.Pull = GPIO_NOPULL;\n    GPIO_InitStruct.Speed = GPIO_SPEED_LOW;\n    GPIO_InitStruct.Alternate = GPIO_AF7_USART2;\n    HAL_GPIO_Init(GPIOA, &amp;GPIO_InitStruct);\n\n    char *msg = \"Hello YOU\\n\\r\";\n\n          HAL_UART_Transmit(&amp;huart2, (uint8_t*)msg, 15, 0xFFFF);\n      while (42);\n}\n\nvoid configure_system_clock(void)\n{\n    RCC_OscInitTypeDef RCC_OscInitStruct;\n    RCC_ClkInitTypeDef RCC_ClkInitStruct;\n\n    __PWR_CLK_ENABLE();\n\n    __HAL_PWR_VOLTAGESCALING_CONFIG(PWR_REGULATOR_VOLTAGE_SCALE2);\n\n    RCC_OscInitStruct.OscillatorType = RCC_OSCILLATORTYPE_HSI;\n    RCC_OscInitStruct.HSIState = RCC_HSI_ON;\n    RCC_OscInitStruct.HSICalibrationValue = 6;\n    RCC_OscInitStruct.PLL.PLLState = RCC_PLL_ON;\n    RCC_OscInitStruct.PLL.PLLSource = RCC_PLLSOURCE_HSI;\n    RCC_OscInitStruct.PLL.PLLM = 8;\n    RCC_OscInitStruct.PLL.PLLN = 336;\n    RCC_OscInitStruct.PLL.PLLP = RCC_PLLP_DIV7;\n    RCC_OscInitStruct.PLL.PLLQ = 7;\n    HAL_RCC_OscConfig(&amp;RCC_OscInitStruct);\n\n    RCC_ClkInitStruct.ClockType = RCC_CLOCKTYPE_SYSCLK|RCC_CLOCKTYPE_PCLK1;\n    RCC_ClkInitStruct.SYSCLKSource = RCC_SYSCLKSOURCE_PLLCLK;\n    RCC_ClkInitStruct.AHBCLKDivider = RCC_SYSCLK_DIV1;\n    RCC_ClkInitStruct.APB1CLKDivider = RCC_HCLK_DIV2;\n    RCC_ClkInitStruct.APB2CLKDivider = RCC_HCLK_DIV1;\n    HAL_RCC_ClockConfig(&amp;RCC_ClkInitStruct, FLASH_LATENCY_2);\n}\n</code></pre>\n\n<p>This code works fine on the Nucleo NUCLEO-F411RE (but with GPIO<strong>A</strong> and port 2 and 3).</p>\n\n<p>On my STM32L467G Discovery, that code totaly fail, with GPIO<strong>D</strong> port 5 and 6 &amp;&amp; with GPIO<strong>A</strong> port 2 and 3.</p>\n\n<p>I can't see the problem, can you help me please?</p>\n"}, {"tags": ["c", "pointers", "struct"], "comments": [{"owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 0, "creation_date": 1453913907, "post_id": 35043456, "comment_id": 57811132, "body": "It allocates a chunk of memory on the heap large enough for a <code>Sample</code>. Assuming you actually place a <code>Sample</code> there, that <code>int</code> is contained within it. Only 1 allocation. (And in this case, it will be the same size as just an <code>int</code>)."}, {"owner": {"reputation": 148, "user_id": 2449671, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/vcjKt.jpg?s=128&g=1", "display_name": "Bolun Zhang", "link": "https://stackoverflow.com/users/2449671/bolun-zhang"}, "edited": false, "score": 0, "creation_date": 1453914109, "post_id": 35043456, "comment_id": 57811271, "body": "Memory is allocated on the heap with the size of a Sample object. s is a data member of any sample object, so yes it is on heap. (BTW, since this question is tagged with both C++ and C, just FYI you should use new instead of malloc in C++)"}, {"owner": {"reputation": 23, "user_id": 5179609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8dbcd9704ae1bd31d5bd66c91299689?s=128&d=identicon&r=PG", "display_name": "Abdul kadir", "link": "https://stackoverflow.com/users/5179609/abdul-kadir"}, "edited": false, "score": 0, "creation_date": 1453915717, "post_id": 35043456, "comment_id": 57812338, "body": "So can I free only &#39;int s&#39;, not the entire sample object? if so, how to?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1454018484, "post_id": 35043456, "comment_id": 57868877, "body": "you can only pass to <code>free()</code> what you received from <code>malloc()</code> or <code>calloc()</code> or <code>realloc()</code>  the code does not receive <code>s</code> from <code>malloc()</code>  it did receive a pointer that was placed into <code>sample</code>, so only <code>sample</code> can be passed to <code>free()</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1454018614, "post_id": 35043456, "comment_id": 57868959, "body": "when calling <code>malloc()</code>, 1) in C, do not cast the returned value, its&#39; type is already a <code>void*</code> which can be assigned to any pointer.  Casting just clutters the code, making it more difficult to understand, debug, maintain.  2) always check (!=NULL) the returned value to assure the operation was successful."}], "answers": [{"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1453914028, "post_id": 35043536, "comment_id": 57811211, "body": "The official name for <i>heap</i> is <i>dynamic storage</i> IIRC."}, {"owner": {"reputation": 23, "user_id": 5179609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8dbcd9704ae1bd31d5bd66c91299689?s=128&d=identicon&r=PG", "display_name": "Abdul kadir", "link": "https://stackoverflow.com/users/5179609/abdul-kadir"}, "edited": false, "score": 0, "creation_date": 1453915517, "post_id": 35043536, "comment_id": 57812200, "body": "Thanks for the reply. As the whole memory is taken from the heap, can I free &#39;int s&#39; somehow?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 23, "user_id": 5179609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8dbcd9704ae1bd31d5bd66c91299689?s=128&d=identicon&r=PG", "display_name": "Abdul kadir", "link": "https://stackoverflow.com/users/5179609/abdul-kadir"}, "edited": false, "score": 0, "creation_date": 1453918548, "post_id": 35043536, "comment_id": 57814207, "body": "@Abdulkadir No, you can free part of the struct.  You can only pass to <code>free</code> what was passed to <code>malloc</code>.  So you can&#39;t <code>free(&amp;sample-&gt;s)</code>, you can only <code>free(sample)</code>."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 3, "last_activity_date": 1453913970, "creation_date": 1453913970, "answer_id": 35043536, "question_id": 35043456, "link": "https://stackoverflow.com/questions/35043456/unallocated-data-type-in-allocated-struct/35043536#35043536", "title": "Unallocated data type in allocated struct", "body": "<p>When you allocate space for a <code>struct</code> via <code>malloc</code>, the entire <code>struct</code> (i.e. all fields contained within the <code>struct</code>) live on the heap.</p>\n"}, {"tags": [], "owner": {"reputation": 327, "user_id": 5797576, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e3db55e797f0fa188c6ab0025670a6cf?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul Jain", "link": "https://stackoverflow.com/users/5797576/rahul-jain"}, "is_accepted": false, "score": 2, "last_activity_date": 1453913995, "creation_date": 1453913995, "answer_id": 35043545, "question_id": 35043456, "link": "https://stackoverflow.com/questions/35043456/unallocated-data-type-in-allocated-struct/35043545#35043545", "title": "Unallocated data type in allocated struct", "body": "<p>When you dynamically allocate memory, it is always taken from heap. I guess this concludes the answer</p>\n"}], "owner": {"reputation": 23, "user_id": 5179609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8dbcd9704ae1bd31d5bd66c91299689?s=128&d=identicon&r=PG", "display_name": "Abdul kadir", "link": "https://stackoverflow.com/users/5179609/abdul-kadir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1453915679, "creation_date": 1453913788, "last_edit_date": 1453915679, "question_id": 35043456, "link": "https://stackoverflow.com/questions/35043456/unallocated-data-type-in-allocated-struct", "title": "Unallocated data type in allocated struct", "body": "<p>Say I have a struct definition like this : </p>\n\n<pre><code>typedef struct Sample\n{\n    int s;\n}Sample;\n</code></pre>\n\n<p>And I declare a pointer variable like below</p>\n\n<pre><code>Sample *sample = (Sample *)malloc(sizeof(Sample));\n</code></pre>\n\n<p>Now my question is, where does this 'int s' placed, in stack or heap? I mean is there dynamic memory allocation for 'int s' also?</p>\n"}, {"tags": ["c", "function"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 4, "creation_date": 1453913613, "post_id": 35043339, "comment_id": 57810922, "body": "There is no difference, except that in the second case it&#39;s somewhat self-documenting. <code>arr</code> decays to a pointer either way."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1453971887, "post_id": 35043339, "comment_id": 57837247, "body": "Well, you can do some testing, try to <code>printf(&quot;sizeof arr == %d\\n&quot;, sizeof arr);</code> and see what happens."}], "answers": [{"comments": [{"owner": {"reputation": 245, "user_id": 5811131, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/17d2b0959914465496801f28dec312d9?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Stark", "link": "https://stackoverflow.com/users/5811131/tony-stark"}, "edited": false, "score": 0, "creation_date": 1453919591, "post_id": 35043400, "comment_id": 57814912, "body": "which one will be the best practice void f1(int arr[10]) or void f2(int arr[]) or void f3(int (*arr)([10])) ?"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 245, "user_id": 5811131, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/17d2b0959914465496801f28dec312d9?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Stark", "link": "https://stackoverflow.com/users/5811131/tony-stark"}, "edited": false, "score": 0, "creation_date": 1453920922, "post_id": 35043400, "comment_id": 57815723, "body": "Its matter of choice, but <code>f3(int (*arr)([10]))</code> is entirely different and you can&#39;t use in place of ` f1(int arr[10])` ( or ` f2(int arr[])` )."}, {"owner": {"reputation": 245, "user_id": 5811131, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/17d2b0959914465496801f28dec312d9?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Stark", "link": "https://stackoverflow.com/users/5811131/tony-stark"}, "edited": false, "score": 0, "creation_date": 1453921102, "post_id": 35043400, "comment_id": 57815819, "body": "how  f3(int (*arr)([10]))  is  different from other two ?"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 245, "user_id": 5811131, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/17d2b0959914465496801f28dec312d9?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Stark", "link": "https://stackoverflow.com/users/5811131/tony-stark"}, "edited": false, "score": 0, "creation_date": 1453921175, "post_id": 35043400, "comment_id": 57815863, "body": "In <code>f3</code>, <code>arr</code> is a pointer to an array of 10 <code>int</code> while in other two its a pointer to an <code>int</code>."}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": true, "score": 6, "last_activity_date": 1453913983, "last_edit_date": 1453913983, "creation_date": 1453913656, "answer_id": 35043400, "question_id": 35043339, "link": "https://stackoverflow.com/questions/35043339/what-is-the-difference-between-fooint-arr-and-fooint-arr10/35043400#35043400", "title": "What is the difference between foo(int arr[]) and foo(int arr[10])?", "body": "<blockquote>\n  <p>Is there any difference between two function in c? </p>\n</blockquote>\n\n<p>No difference here. Both will be interpreted as <code>int *arr</code> by the compiler as arrays are converted to a pointer to its first element when used as a function parameter.  </p>\n\n<blockquote>\n  <p>what will be the size of first array in f1 function?  </p>\n</blockquote>\n\n<p>Strictly speaking, there is no array here. Its only pointer to an <code>int</code>. If you will use <code>sizeof(arr)</code>, then you will get the value equal to <code>sizeof(int *)</code>.  </p>\n\n<p>The array size in parameters are needed when the type of parameter is a pointer to an array. in this case you need to have specify the size of array as each size makes the pointer to point to different type.  </p>\n\n<pre><code>void f3(int (*arr)[10]); // Expects a pointer to an array of 10 int\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1453914132, "post_id": 35043480, "comment_id": 57811288, "body": "Importantly, if you pass <code>int a[5]</code> to a function declared to take <code>int arr[10]</code> then the compiler <i>still</i> won&#39;t complain.  At most, the explicit dimension is advice to programmers about what the function expects.  It will not be enforced by a conforming compiler."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1453914549, "post_id": 35043480, "comment_id": 57811565, "body": "To be pedantic, an array expression is converted to a pointer expression <i>any time the array expression appears</i> (not just when passed as a function parameter) unless it is the operand of the <code>sizeof</code> or unary <code>&amp;</code> operators, or is a string literal used to initialize an array in a declaration."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 3, "last_activity_date": 1453913847, "creation_date": 1453913847, "answer_id": 35043480, "question_id": 35043339, "link": "https://stackoverflow.com/questions/35043339/what-is-the-difference-between-fooint-arr-and-fooint-arr10/35043480#35043480", "title": "What is the difference between foo(int arr[]) and foo(int arr[10])?", "body": "<p>When an array is passed to a function, it decays into a pointer to the first element of the array.</p>\n\n<p>So this:</p>\n\n<pre><code>void f1(int arr[])\n</code></pre>\n\n<p>And this:</p>\n\n<pre><code>void f1(int arr[10])\n</code></pre>\n\n<p>And this:</p>\n\n<pre><code>void f1(int *arr)\n</code></pre>\n\n<p>Are all equivalent.  </p>\n\n<p>In fact if you passed <code>int a[20]</code> to a function declared to take <code>int arr[10]</code>, gcc won't complain.</p>\n"}], "owner": {"reputation": 245, "user_id": 5811131, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/17d2b0959914465496801f28dec312d9?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Stark", "link": "https://stackoverflow.com/users/5811131/tony-stark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 363, "favorite_count": 0, "accepted_answer_id": 35043400, "answer_count": 2, "score": 5, "last_activity_date": 1453914018, "creation_date": 1453913484, "last_edit_date": 1453914018, "question_id": 35043339, "link": "https://stackoverflow.com/questions/35043339/what-is-the-difference-between-fooint-arr-and-fooint-arr10", "title": "What is the difference between foo(int arr[]) and foo(int arr[10])?", "body": "<p>Is there any difference between two function in C?</p>\n\n<pre><code>void f1(int arr[]) {    \n//some code...  \n}\nvoid f2(int arr[10]) {\n//some code\n}\n</code></pre>\n\n<p>What will be the size of first array in f1 function?</p>\n"}, {"tags": ["c", "swift", "swift2"], "answers": [{"comments": [{"owner": {"reputation": 5847, "user_id": 706870, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/e78b3cf1ceb563c2f65f58d706364f6b?s=128&d=identicon&r=PG", "display_name": "Roee84", "link": "https://stackoverflow.com/users/706870/roee84"}, "edited": false, "score": 0, "creation_date": 1454347916, "post_id": 35101100, "comment_id": 57993369, "body": "Thanks! didn&#39;t check it yet, but seems right. Will update."}], "tags": [], "owner": {"reputation": 282, "user_id": 5664266, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQuTY.jpg?s=128&g=1", "display_name": "Ethan Halprin", "link": "https://stackoverflow.com/users/5664266/ethan-halprin"}, "is_accepted": true, "score": 1, "last_activity_date": 1454152526, "last_edit_date": 1495535278, "creation_date": 1454152526, "answer_id": 35101100, "question_id": 35043227, "link": "https://stackoverflow.com/questions/35043227/swift-c-functions/35101100#35101100", "title": "Swift + C functions", "body": "<p>Yes, it should be possible. In Swift 2, one can send a Swift closure as a parameter to C, when C expects a function pointer. In your case, you have wrapped it in a struct, so an addition of '<strong>@convention(c)</strong>' to explicitly state that it's C, might help.</p>\n\n<p>see examples here\n<a href=\"https://stackoverflow.com/questions/30740560/new-conventionc-in-swift-2-how-can-i-use-it\">new-conventionc-in-swift-2-how-can-i-use-it</a></p>\n"}], "owner": {"reputation": 5847, "user_id": 706870, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/e78b3cf1ceb563c2f65f58d706364f6b?s=128&d=identicon&r=PG", "display_name": "Roee84", "link": "https://stackoverflow.com/users/706870/roee84"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "accepted_answer_id": 35101100, "answer_count": 1, "score": -1, "last_activity_date": 1454152526, "creation_date": 1453913166, "question_id": 35043227, "link": "https://stackoverflow.com/questions/35043227/swift-c-functions", "title": "Swift + C functions", "body": "<p>I have the following C function </p>\n\n<pre><code>struct answer* create(struct callbacks *callbacks);\n</code></pre>\n\n<p>I need to create a struct of function pointers and call this function from Swift</p>\n\n<p>What I have so far is:</p>\n\n<pre><code>func aa(state: CInt, user_data: UnsafeMutablePointer&lt;Void&gt;) {}\nfunc bb(state: CInt, user_data: UnsafeMutablePointer&lt;Void&gt;) {}\nstruct CallbacksStruct {\n     let on_aa = aa\n     let on_bb = bb\n}\n</code></pre>\n\n<p>and I try to call the function like this:</p>\n\n<pre><code>var callbackStruct = CallbacksStruct()\nlet ans = create(&amp;callbackStruct)\n</code></pre>\n\n<p>but, without any success</p>\n\n<p>Is it even possible in Swift ? </p>\n"}, {"tags": ["c", "servlets", "g-wan"], "comments": [{"owner": {"reputation": 116, "user_id": 1576270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7109fae5e0284453f9c9d0ed3ca5335c?s=128&d=identicon&r=PG", "display_name": "fatihky", "link": "https://stackoverflow.com/users/1576270/fatihky"}, "edited": false, "score": 0, "creation_date": 1455634889, "post_id": 35043076, "comment_id": 58569763, "body": "Hi I have several examples. Here is one of them: <a href=\"https://github.com/fatihky/gwan-color-thief\" rel=\"nofollow noreferrer\">github.com/fatihky/gwan-color-thief</a>"}], "answers": [{"comments": [{"owner": {"reputation": 286, "user_id": 1404066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/067805bcb301995a19dd68149129fe46?s=128&d=identicon&r=PG", "display_name": "Kenigmatic", "link": "https://stackoverflow.com/users/1404066/kenigmatic"}, "edited": false, "score": 1, "creation_date": 1453926891, "post_id": 35043998, "comment_id": 57819147, "body": "FYI, G-WAN has some <a href=\"http://gwan.com/api#json\" rel=\"nofollow noreferrer\">JSON APIs</a> that may help, now that you know where to reference the POST payload.  And the <a href=\"http://gwan.com/source/entity.c\" rel=\"nofollow noreferrer\">entity.c</a> example may also help a bit."}, {"owner": {"reputation": 3189, "user_id": 1079036, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/368d20296c0ae6df9a0dd7ddfbdec535?s=128&d=identicon&r=PG", "display_name": "Gil", "link": "https://stackoverflow.com/users/1079036/gil"}, "edited": false, "score": 0, "creation_date": 1453991363, "post_id": 35043998, "comment_id": 57851044, "body": "@Mike: the <b>get_arg</b> function fetches the query parameters of both GET and POST requests. G-WAN does it transparently for you. +1 for having answered your own question."}, {"owner": {"reputation": 131, "user_id": 14182, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/15638955f8449f65a8ec37eac68860f8?s=128&d=identicon&r=PG", "display_name": "Mike Keen", "link": "https://stackoverflow.com/users/14182/mike-keen"}, "reply_to_user": {"reputation": 3189, "user_id": 1079036, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/368d20296c0ae6df9a0dd7ddfbdec535?s=128&d=identicon&r=PG", "display_name": "Gil", "link": "https://stackoverflow.com/users/1079036/gil"}, "edited": false, "score": 0, "creation_date": 1453997752, "post_id": 35043998, "comment_id": 57856171, "body": "@Gil the only issue with get_arg is that as far as I can see, it can only get named parameters. I couldn&#39;t work out a way of using it to get an unnamed payload."}, {"owner": {"reputation": 3189, "user_id": 1079036, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/368d20296c0ae6df9a0dd7ddfbdec535?s=128&d=identicon&r=PG", "display_name": "Gil", "link": "https://stackoverflow.com/users/1079036/gil"}, "edited": false, "score": 0, "creation_date": 1454087594, "post_id": 35043998, "comment_id": 57902339, "body": "@Mike, you are right. Hence the <b>argv[]</b> alternative that we provided for the other cases (and some other scripting languages than C) and the direct <b><i>entity   = (char</i>)get_env(argv, REQ_ENTITY);</b> method depicted in entity.c"}], "tags": [], "owner": {"reputation": 131, "user_id": 14182, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/15638955f8449f65a8ec37eac68860f8?s=128&d=identicon&r=PG", "display_name": "Mike Keen", "link": "https://stackoverflow.com/users/14182/mike-keen"}, "is_accepted": false, "score": 1, "last_activity_date": 1453915347, "creation_date": 1453915347, "answer_id": 35043998, "question_id": 35043076, "link": "https://stackoverflow.com/questions/35043076/reading-a-post-payload-from-a-g-wan-c-script/35043998#35043998", "title": "Reading a POST payload from a G-Wan C Script", "body": "<p>Found the answer by just walking argv[]. Turns out it's as easy as:</p>\n\n<pre><code>char *raw_payload = (char*)argv[0];\n</code></pre>\n"}], "owner": {"reputation": 131, "user_id": 14182, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/15638955f8449f65a8ec37eac68860f8?s=128&d=identicon&r=PG", "display_name": "Mike Keen", "link": "https://stackoverflow.com/users/14182/mike-keen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1454602211, "creation_date": 1453912817, "last_edit_date": 1454602211, "question_id": 35043076, "link": "https://stackoverflow.com/questions/35043076/reading-a-post-payload-from-a-g-wan-c-script", "title": "Reading a POST payload from a G-Wan C Script", "body": "<p>I understand that reading actual query string params is made easy with the <code>get_arg</code> function. However, I am not seeing anything in the examples or documentation that will let me read the POST payload. In my case, it's a JSON encoded string. Parsing the JSON is easy enough once I can actually address it.</p>\n\n<p>Does anyone have an example that shows how to read the raw POST payload in C?</p>\n"}, {"tags": ["c++", "c", "algorithm", "permutation"], "comments": [{"owner": {"reputation": 5590, "user_id": 3686755, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/976c04703d1b52c15d067c0556d5064c?s=128&d=identicon&r=PG", "display_name": "neshkeev", "link": "https://stackoverflow.com/users/3686755/neshkeev"}, "edited": false, "score": 0, "creation_date": 1453913030, "post_id": 35043068, "comment_id": 57810464, "body": "How do you define the transformation operation? is it just a \u0441ircular shift?"}, {"owner": {"reputation": 9495, "user_id": 1395740, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/793c4377313587d742fad6f069d92d89?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/1395740/nick"}, "reply_to_user": {"reputation": 5590, "user_id": 3686755, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/976c04703d1b52c15d067c0556d5064c?s=128&d=identicon&r=PG", "display_name": "neshkeev", "link": "https://stackoverflow.com/users/3686755/neshkeev"}, "edited": false, "score": 0, "creation_date": 1453913140, "post_id": 35043068, "comment_id": 57810559, "body": "@zaratustra The transformation is the set of swaps between two elements of the permutation."}, {"owner": {"reputation": 4826, "user_id": 193789, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a17cc57e47435930a48f7c80bcd53863?s=128&d=identicon&r=PG", "display_name": "kebs", "link": "https://stackoverflow.com/users/193789/kebs"}, "edited": false, "score": 0, "creation_date": 1453913361, "post_id": 35043068, "comment_id": 57810741, "body": "Could the <a href=\"https://en.wikipedia.org/wiki/Hamming_distance\" rel=\"nofollow noreferrer\">Hamming distance</a> be related to your problem ?"}, {"owner": {"reputation": 14828, "user_id": 1377097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eFG0R.png?s=128&g=1", "display_name": "beaker", "link": "https://stackoverflow.com/users/1377097/beaker"}, "reply_to_user": {"reputation": 4826, "user_id": 193789, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a17cc57e47435930a48f7c80bcd53863?s=128&d=identicon&r=PG", "display_name": "kebs", "link": "https://stackoverflow.com/users/193789/kebs"}, "edited": false, "score": 0, "creation_date": 1453913500, "post_id": 35043068, "comment_id": 57810837, "body": "@kebs Could be Hamming distance, could be <a href=\"https://en.wikipedia.org/wiki/Levenshtein_distance\" rel=\"nofollow noreferrer\">Levenshtein distance</a>, the OP could even be looking for <a href=\"https://en.wikipedia.org/wiki/Permutation_matrix\" rel=\"nofollow noreferrer\">permutation matrices</a>. The requirements are unclear."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1453915314, "post_id": 35043068, "comment_id": 57812059, "body": "This can help also: <a href=\"http://math.stackexchange.com/questions/1410088/how-to-determine-a-kind-of-distance-between-two-permutations\" title=\"how to determine a kind of distance between two permutations\">math.stackexchange.com/questions/1410088/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 4440, "user_id": 5103294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4ac06d64a7ec4adc47bd3789f021894?s=128&d=identicon&r=PG&f=1", "display_name": "serhiyb", "link": "https://stackoverflow.com/users/5103294/serhiyb"}, "is_accepted": false, "score": 1, "last_activity_date": 1453913349, "last_edit_date": 1495541750, "creation_date": 1453913349, "answer_id": 35043294, "question_id": 35043068, "link": "https://stackoverflow.com/questions/35043068/difference-between-permutations/35043294#35043294", "title": "Difference between permutations", "body": "<p>Distance between permutations can be distance between lexicographic indexes of the permutations. </p>\n\n<p>How to find lexicographic index <a href=\"https://stackoverflow.com/questions/12146910/finding-the-lexicographic-index-of-a-permutation-of-a-given-array\">is</a> <a href=\"https://stackoverflow.com/questions/14013373/finding-the-index-of-a-given-permutation\">described</a> <a href=\"https://stackoverflow.com/questions/5131497/find-the-index-of-a-given-permutation-in-the-sorted-list-of-the-permutations-of\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 457, "user_id": 5616282, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/txOPP.png?s=128&g=1", "display_name": "Brandon", "link": "https://stackoverflow.com/users/5616282/brandon"}, "is_accepted": true, "score": 3, "last_activity_date": 1453914218, "last_edit_date": 1453914218, "creation_date": 1453913686, "answer_id": 35043416, "question_id": 35043068, "link": "https://stackoverflow.com/questions/35043068/difference-between-permutations/35043416#35043416", "title": "Difference between permutations", "body": "<p>There are a few different ways to define the difference between two sequences. To name a few:</p>\n\n<p><strong><a href=\"https://en.wikipedia.org/wiki/Hamming_distance\" rel=\"nofollow\">Hamming distance</a></strong>: the number of positions at which elements differ.</p>\n\n<pre><code>hamming(A, B)\n  B[1] is different than A[1] and B[3] is different than A[3]\n=&gt; 2\n</code></pre>\n\n<p><strong><a href=\"https://en.wikipedia.org/wiki/Levenshtein_distance\" rel=\"nofollow\">Levenshtein distance</a></strong>: the minimum number of modifications necessary to get from one sequence to another.</p>\n\n<pre><code>levenshtein(A, B)\n  replace B[1] with A[1] and replace B[3] with A[3]\n=&gt; 2\n</code></pre>\n\n<p><strong><a href=\"https://en.wikipedia.org/wiki/Damerau%E2%80%93Levenshtein_distance\" rel=\"nofollow\">Damerau\u2013Levenshtein distance</a></strong>: an extension of the former that takes into account transpositions.</p>\n\n<pre><code>damerau_levenshtein(A, B)\n  transpose B[3] with B[1]\n=&gt; 1\n</code></pre>\n\n<p>Based upon your given example, you are interested in tracking transpositions and therefore Damerau\u2013Levenshtein distance is your best bet. </p>\n"}], "owner": {"reputation": 9495, "user_id": 1395740, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/793c4377313587d742fad6f069d92d89?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/1395740/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 855, "favorite_count": 0, "closed_date": 1453915092, "accepted_answer_id": 35043416, "answer_count": 2, "score": 2, "last_activity_date": 1453914218, "creation_date": 1453912800, "last_edit_date": 1453913356, "question_id": 35043068, "link": "https://stackoverflow.com/questions/35043068/difference-between-permutations", "closed_reason": "Duplicate", "title": "Difference between permutations", "body": "<p>Is there a way to compute quantitatively the <em>distance</em> between two permutations?</p>\n\n<p>Suppose we have the following two sequences of elements:</p>\n\n<pre><code>A = {0, 1, 2, 3}\nB = {0, 3, 2, 1}\n</code></pre>\n\n<p>I could say that the permutation <code>B</code> differs from <code>A</code> because:</p>\n\n<ul>\n<li>I would require <strong>1</strong> swap operation in order to transform <code>B</code> to <code>A</code></li>\n<li>There are <strong>2</strong> elements within <code>B</code> that have an index that is different for the same elements in <code>A</code></li>\n</ul>\n\n<p>Are there other ways to compare and describe the difference between those two?</p>\n\n<p>The main goal is to define an algorithm that is able to approach the second permutation <code>B</code> to the first one <code>A</code>, such that if all the steps of this procedure are applied the outcome would be the permutation <code>A</code> itself. \nBut in order to to that I think it should be best to define first a sensible procedure that describes how much <code>B</code> differs from <code>A</code>.</p>\n\n<p>Is there any known algorithm that allows to approach on permutation to another?</p>\n"}, {"tags": ["c++", "c", "winapi", "pelles-c"], "comments": [{"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 3, "creation_date": 1453912792, "post_id": 35042967, "comment_id": 57810301, "body": "It wants a pointer to a GUID, so pass it a pointer. <code>SHGetKnownFolderPath(&amp;FOLDERID_ProgramFiles, ...);</code>"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 3, "creation_date": 1453912889, "post_id": 35042967, "comment_id": 57810366, "body": "The error message could hardly be more clear. It says: <i>Type error in argument 1 to &#39;SHGetKnownFolderPath&#39;; expected &#39;const struct _GUID *&#39; but found &#39;struct _GUID&#39;</i> That could not be made any more clear. I presume you understand the concept of a type mismatch?"}, {"owner": {"reputation": 8155, "user_id": 2008247, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wis7M.jpg?s=128&g=1", "display_name": "Jan Bodnar", "link": "https://stackoverflow.com/users/2008247/jan-bodnar"}, "reply_to_user": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1453913012, "post_id": 35042967, "comment_id": 57810449, "body": "@JonathanPotter Already tried. Leads to  Unresolved external symbol &#39;FOLDERID_ProgramFiles&#39;. error. Besides, working examples that I have found do not pass a pointer."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1453913212, "post_id": 35042967, "comment_id": 57810622, "body": "@JanBodnar show the relevant part of one of these working examples."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1453913414, "post_id": 35042967, "comment_id": 57810778, "body": "Your code compiles and works with my Visual Studio 2013."}, {"owner": {"reputation": 8155, "user_id": 2008247, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wis7M.jpg?s=128&g=1", "display_name": "Jan Bodnar", "link": "https://stackoverflow.com/users/2008247/jan-bodnar"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1453913561, "post_id": 35042967, "comment_id": 57810889, "body": "@MichaelWalz I have added a link to code example. I am using Pelles C."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1453914045, "post_id": 35042967, "comment_id": 57811224, "body": "@JanBodnar the code you linked to also compiles fine here a part from the missing symbols in &quot;ressource.h&quot; which you didn&#39;t provide, but once the symbols defined it compiles fine with VS2013."}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 4, "creation_date": 1453914072, "post_id": 35042967, "comment_id": 57811250, "body": "You need at least one compilation unit that #defines <code>INITGUID</code> before including <code>shlobj.h</code>. See <a href=\"https://support.microsoft.com/en-us/kb/130869\" rel=\"nofollow noreferrer\">support.microsoft.com/en-us/kb/130869</a> for an explanation. Be aware that all the examples you have found are based on Visual C++, not the compiler you are using."}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 3, "creation_date": 1453914194, "post_id": 35042967, "comment_id": 57811324, "body": "By the way, if fixing a <b>compiler</b> error then causes a <b>linker</b> error, it doesn&#39;t mean the fix for the compiler error was wrong. It means you have two errors."}, {"owner": {"reputation": 8155, "user_id": 2008247, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wis7M.jpg?s=128&g=1", "display_name": "Jan Bodnar", "link": "https://stackoverflow.com/users/2008247/jan-bodnar"}, "edited": false, "score": 0, "creation_date": 1453917512, "post_id": 35042967, "comment_id": 57813575, "body": "I am starting to get it. SHGetKnownFolderPath&#39;s first parameter is REFKNOWNFOLDERID, which is defined as a reference for C++ and as a pointer for C. (Pelles C is a C compiler.) That&#39;s why the code example compiled on Visual Studio, where C++ is often used for C programs."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1453921940, "post_id": 35042967, "comment_id": 57816289, "body": "Once again, could the compiler error have been any more clear. Did you really not understand it. I think you should concentrate on what the error is telling you."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 1, "creation_date": 1453922014, "post_id": 35042967, "comment_id": 57816327, "body": "One also wonders why you tagged your question c++. These are two different languages. Are you compiling the code in both C and C++? If so fine. If not, please pick one language, the one you are using."}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1454165614, "post_id": 35042967, "comment_id": 57927259, "body": "Your update just popped this question up on my feed. I don&#39;t understand what the problem you&#39;re still having is. It looks like you are getting terribly confused about the difference between C and C++. <i>They are not the same language.</i> You are using a C compiler, but studying code samples in C++. That&#39;s going to get you into trouble, you can&#39;t just copy and paste what the C++ folks do. The Windows API is a C API, so this is all usable from C, but the syntax might look a little different for the COM-based functions, like this. You still can&#39;t get it to compile by following Jonathan&#39;s advice?"}, {"owner": {"reputation": 8155, "user_id": 2008247, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wis7M.jpg?s=128&g=1", "display_name": "Jan Bodnar", "link": "https://stackoverflow.com/users/2008247/jan-bodnar"}, "reply_to_user": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1454165960, "post_id": 35042967, "comment_id": 57927366, "body": "@CodyGray The problem is fixed. I wanted to provide an answer for this question; it might be helpful for someone else."}], "answers": [{"tags": [], "owner": {"reputation": 8155, "user_id": 2008247, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wis7M.jpg?s=128&g=1", "display_name": "Jan Bodnar", "link": "https://stackoverflow.com/users/2008247/jan-bodnar"}, "is_accepted": true, "score": 11, "last_activity_date": 1454165838, "creation_date": 1454165838, "answer_id": 35103245, "question_id": 35042967, "link": "https://stackoverflow.com/questions/35042967/cannot-get-shgetknownfolderpath-function-working/35103245#35103245", "title": "Cannot get SHGetKnownFolderPath() function working", "body": "<p>With the help from the comments of Jonathan Potter, I was able to \ncorrect the example. </p>\n\n<p>The problem was very subtle. The following code line looks like C, but \nit is actually C++. </p>\n\n<p><code>HRESULT hr = SHGetKnownFolderPath(FOLDERID_Documents, 0, NULL, &amp;path);</code></p>\n\n<p>The <code>SHGetKnownFolderPath()</code> function has the following prototype:</p>\n\n<p><code>STDAPI SHGetKnownFolderPath(REFKNOWNFOLDERID, DWORD, HANDLE, PWSTR*);</code></p>\n\n<p>Its first argument is <code>REFKNOWNFOLDERID</code>. </p>\n\n<p>In the <code>shtypes.h</code> file we find the following:</p>\n\n<pre><code>#ifdef __cplusplus\n#define REFKNOWNFOLDERID const KNOWNFOLDERID &amp;\n#else\n#define REFKNOWNFOLDERID const KNOWNFOLDERID * /*__MIDL_CONST*/\n#endif /* __cplusplus */\n</code></pre>\n\n<p>This means, that in C++ <code>REFKNOWNFOLDERID</code> is a reference and in C\nit is a pointer. As a consequence, we do not need an ampersand in C++\ncode for the first parameter.\nIn Visual C++ C code is often compiled with C++ and the distinction\nbetween the languages is often blurred. </p>\n\n<p>The second issue, the <code>Unresolved external symbol 'FOLDERID_ProgramFiles'. error.</code> error is fixed by adding <code>#include &lt;initguid.h&gt;</code> before <code>#include &lt;ShlObj.h&gt;</code>. The reason is explained in this <a href=\"https://support.microsoft.com/en-us/kb/130869\" rel=\"noreferrer\">article</a>.</p>\n\n<p>So the following code compiles on Pelles C.</p>\n\n<pre><code>#include &lt;windows.h&gt;\n#include &lt;initguid.h&gt;\n#include &lt;KnownFolders.h&gt;\n#include &lt;ShlObj.h&gt;\n#include &lt;wchar.h&gt;\n\nint wmain(void) {\n\n    PWSTR path = NULL;\n\n    HRESULT hr = SHGetKnownFolderPath(&amp;FOLDERID_Documents, 0, NULL, &amp;path);\n\n    if (SUCCEEDED(hr)) {\n        wprintf(L\"%ls\\n\", path);\n    }\n\n    CoTaskMemFree(path);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 4393665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19bc19bf347498ae9990dacf3771394d?s=128&d=identicon&r=PG&f=1", "display_name": "Henry Garcia", "link": "https://stackoverflow.com/users/4393665/henry-garcia"}, "is_accepted": false, "score": 2, "last_activity_date": 1540439557, "last_edit_date": 1540439557, "creation_date": 1540436814, "answer_id": 52980759, "question_id": 35042967, "link": "https://stackoverflow.com/questions/35042967/cannot-get-shgetknownfolderpath-function-working/52980759#52980759", "title": "Cannot get SHGetKnownFolderPath() function working", "body": "<p>It would help to understand that the variable FOLDERID_Documents is actually a GUID structure: it's defined in the GuidDef.h header.</p>\n\n<pre><code>typedef struct {\nunsigned long  Data1;\nunsigned short Data2;\nunsigned short Data3;\nbyte           Data4[ 8 ];\n} GUID;\n</code></pre>\n\n<p>I had problems with this also. I think the confusion arises from the previous use of CSIDLs which were not structures, but simply a number type. It also would help, if MSDN documentation showed an example. So, I'm including one here:</p>\n\n<pre><code>    #include &lt;windows.h&gt;\n    #include &lt;KnownFolders.h&gt;\n    #include &lt;shlobj.h&gt;\n    #include &lt;stdio.h&gt;\n\n    int main (void)\n    { \n        PWSTR path ;\n        SHGetKnownFolderPath(&amp;FOLDERID_Public, 0, NULL, &amp;path) ;\n        wprintf(L\"%s\\nSize of FOLDERID: %d bytes\\n\", path, sizeof(FOLDERID_Public)) ;\n        wprintf(L\"{%x-%hx-%hx-%x%x%x%x%x%x%x%x}\\n\", FOLDERID_Public.Data1, FOLDERID_Public.Data2, FOLDERID_Public.Data3, FOLDERID_Public.Data4[0], FOLDERID_Public.Data4[1], FOLDERID_Public.Data4[2], FOLDERID_Public.Data4[3], FOLDERID_Public.Data4[4], FOLDERID_Public.Data4[5], FOLDERID_Public.Data4[6], FOLDERID_Public.Data4[7]) ;\n        CoTaskMemFree((LPVOID)path)  ;\n        return 0 ;\n    }\n</code></pre>\n"}], "owner": {"reputation": 8155, "user_id": 2008247, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wis7M.jpg?s=128&g=1", "display_name": "Jan Bodnar", "link": "https://stackoverflow.com/users/2008247/jan-bodnar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13523, "favorite_count": 0, "accepted_answer_id": 35103245, "answer_count": 2, "score": 4, "last_activity_date": 1540439557, "creation_date": 1453912535, "last_edit_date": 1454165102, "question_id": 35042967, "link": "https://stackoverflow.com/questions/35042967/cannot-get-shgetknownfolderpath-function-working", "title": "Cannot get SHGetKnownFolderPath() function working", "body": "<p>I am having troubles using SHGetKnownFolderPath() function. \nI am getting the following error message: \n<code>Type error in argument 1 to 'SHGetKnownFolderPath'; expected 'const struct _GUID *' but found 'struct _GUID'.</code></p>\n\n<p>In the <code>KnowFolders.h</code> we have the following relevant definitions:</p>\n\n<pre><code>#define DEFINE_KNOWN_FOLDER(name,l,w1,w2,b1,b2,b3,b4,b5,b6,b7,b8) \\\n    EXTERN_C const GUID name\n...\nDEFINE_KNOWN_FOLDER(FOLDERID_ProgramFiles,0x905e63b6,0xc1bf,0x494e,0xb2,0x9c,0x65,0xb7,0x32,0xd3,0xd2,0x1a);\n</code></pre>\n\n<p>I am using Pelles C compiler .</p>\n\n<p>This is my sample code:</p>\n\n<pre><code>#include &lt;windows.h&gt;\n#include &lt;wchar.h&gt;\n#include &lt;KnownFolders.h&gt;\n#include &lt;shlobj.h&gt;\n\nint wmain(int argc, wchar_t **argv) {\n\n    PWSTR path = NULL;\n\n    HRESULT hr = SHGetKnownFolderPath(FOLDERID_ProgramFiles, 0, NULL, &amp;path);    \n\n    if (SUCCEEDED(hr)){\n\n        wprintf(L\"%ls\", path);\n    }\n\n    CoTaskMemFree(path);\n\n    return 0;\n}\n</code></pre>\n\n<p>How to fix this error message?</p>\n\n<p><strong>EDIT</strong> I have found code examples with SHGetKnownFolderPath(); all of\nthem execute the function without the pointer. For instance:</p>\n\n<pre><code>hr = SHGetKnownFolderPath(FOLDERID_Public, 0, NULL, &amp;pszPath);\nif (SUCCEEDED(hr))\n{\n    wprintf(L\"FOLDERID_Public: %s\\n\", pszPath);\n    CoTaskMemFree(pszPath);\n}\n</code></pre>\n\n<p><a href=\"http://www.getcodesamples.com/src/3E9DECF9/DDEC135B\" rel=\"nofollow\">CppShellKnownFolders.cpp</a></p>\n"}, {"tags": ["c", "fgets"], "answers": [{"comments": [{"owner": {"reputation": 7270, "user_id": 1391074, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8f68df8049c2367f1e312b85a1b984a8?s=128&d=identicon&r=PG", "display_name": "avasin", "link": "https://stackoverflow.com/users/1391074/avasin"}, "edited": false, "score": 0, "creation_date": 1453911980, "post_id": 35042725, "comment_id": 57809723, "body": "So, you mean my input string has two symbols at the end? <code>&#39;\\n&#39;</code> and <code>&#39;\\0&#39;</code>?"}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": true, "score": 4, "last_activity_date": 1453912504, "last_edit_date": 1453912504, "creation_date": 1453911895, "answer_id": 35042725, "question_id": 35042658, "link": "https://stackoverflow.com/questions/35042658/why-code-is-being-executed-in-such-strange-sequence-in-c/35042725#35042725", "title": "Why code is being executed in such strange sequence in c?", "body": "<blockquote>\n  <p>Why null terminator is processed via <code>isdigit</code> before return?</p>\n</blockquote>\n\n<p>It is not. It is executed for <code>'\\n'</code> character read by <code>fgets</code>.   </p>\n\n<p>C11-\u00a77.21.7.2 </p>\n\n<blockquote>\n  <p>The <code>fgets</code> function reads at most one less than the number of characters specified by <code>n</code> from the <code>stream</code> pointed to by stream into the array pointed to by <code>s</code>. <strong>No additional characters are read after a new-line character (which is retained) or after end-of-file. A null character is written immediately after the last character read into the array</strong>.  </p>\n</blockquote>\n\n<p>For the input  </p>\n\n<pre><code>101\n</code></pre>\n\n<p>there are <code>5</code> characters in there  </p>\n\n<pre><code>101\\n\\0  \n</code></pre>\n\n<p><code>\\n</code> is not a digit of course.   </p>\n\n<p>You need to add a condition for <code>\\n</code> too  </p>\n\n<pre><code>if (input[i] == '\\0' || input[i] == '\\n')\n{\n    printf(\"stop executing is_valid()\");\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7270, "user_id": 1391074, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8f68df8049c2367f1e312b85a1b984a8?s=128&d=identicon&r=PG", "display_name": "avasin", "link": "https://stackoverflow.com/users/1391074/avasin"}, "edited": false, "score": 0, "creation_date": 1453912190, "post_id": 35042773, "comment_id": 57809873, "body": "<code>scanf</code> is inappropriate, because i have to perform deep validation for input."}], "tags": [], "owner": {"reputation": 87, "user_id": 2880893, "user_type": "registered", "profile_image": "https://graph.facebook.com/1532437692/picture?type=large", "display_name": "Amol Pednekar", "link": "https://stackoverflow.com/users/2880893/amol-pednekar"}, "is_accepted": false, "score": 1, "last_activity_date": 1453912118, "last_edit_date": 1453912118, "creation_date": 1453912032, "answer_id": 35042773, "question_id": 35042658, "link": "https://stackoverflow.com/questions/35042658/why-code-is-being-executed-in-such-strange-sequence-in-c/35042773#35042773", "title": "Why code is being executed in such strange sequence in c?", "body": "<p>Use <code>scanf(\"%d\",&amp;char[i]</code>)  to get the input. Since <code>fgets</code> also accepts newline operator, that is the extra output you are getting, the checking for <code>\"\\n\"</code> taken by <code>fgets</code>.</p>\n"}], "owner": {"reputation": 7270, "user_id": 1391074, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8f68df8049c2367f1e312b85a1b984a8?s=128&d=identicon&r=PG", "display_name": "avasin", "link": "https://stackoverflow.com/users/1391074/avasin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 35042725, "answer_count": 2, "score": 2, "last_activity_date": 1453912573, "creation_date": 1453911756, "last_edit_date": 1453912573, "question_id": 35042658, "link": "https://stackoverflow.com/questions/35042658/why-code-is-being-executed-in-such-strange-sequence-in-c", "title": "Why code is being executed in such strange sequence in c?", "body": "<pre><code>int is_valid(char *input)\n{\n    int i;\n\n    for (i = 0;; i++)\n    {\n        // Check for null terminator\n        if ( ! input[i])\n        {\n            printf(\"stop executing is_valid()\");\n            return 0;\n        }\n\n        // Will be executed for null terminator... o_O\n        printf(\"%c isdigit: %d\\n\", input[i], isdigit(input[i]));\n    }\n\n    return 1;\n}\n\nint main()\n{\n    char input[80];\n    fgets(input, sizeof(input), stdin);\n    is_valid(input);\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>1 isdigit: 1\n0 isdigit: 1\n1 isdigit: 1\n\n isdigit: 0 // Why is that here? null terminator after return?!\nstop executing is_valid()invalid input!\n</code></pre>\n\n<p>Why null terminator is processed via <code>isdigit</code> before return? And.. ok, why if condition is executed after it?</p>\n"}, {"tags": ["c", "struct", "strdup"], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 1, "last_activity_date": 1453911860, "creation_date": 1453911860, "answer_id": 35042715, "question_id": 35042564, "link": "https://stackoverflow.com/questions/35042564/how-to-move-memory-that-is-already-allocated-to-another-struct/35042715#35042715", "title": "How to move memory that is already allocated to another struct", "body": "<p>You probably still want to use <code>strdup</code> when populating <code>name</code> in a <code>TeachingAssistant</code> struct.  If you don't, and simply copy the pointer, then if you <code>free</code> the pointer in one struct the other one becomes invalid.  You'd have to implement schemes to keep track of pointer references otherwise.</p>\n\n<p>Better to just <code>strdup</code> the string where you need it, and <code>free</code> it for each copy when you don't need it anymore.</p>\n"}, {"tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": false, "score": 0, "last_activity_date": 1453911925, "creation_date": 1453911925, "answer_id": 35042742, "question_id": 35042564, "link": "https://stackoverflow.com/questions/35042564/how-to-move-memory-that-is-already-allocated-to-another-struct/35042742#35042742", "title": "How to move memory that is already allocated to another struct", "body": "<pre><code>typedef struct{\n  Student *XYZ;\n  //char* name;\n  //int score;\n}TeachingAssistant;\n</code></pre>\n\n<p>Instead of definition you have right now , you can declare a pointer to struct <code>Student</code> as a member of struct <code>TeachingAssistant</code> , so that you can access <code>name</code> using it and no need to create duplicate .</p>\n"}], "owner": {"reputation": 95, "user_id": 5839023, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/810572e98d81dbbf0f48587a778d6d0d?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/5839023/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1453912679, "creation_date": 1453911478, "last_edit_date": 1453911920, "question_id": 35042564, "link": "https://stackoverflow.com/questions/35042564/how-to-move-memory-that-is-already-allocated-to-another-struct", "title": "How to move memory that is already allocated to another struct", "body": "<p>I have the following struct: </p>\n\n<pre><code>typedef struct{\n    char* name;\n    int score;\n}Student;\n\ntypedef struct{\n    char* name;\n    int score;\n}TeachingAssistant;\n</code></pre>\n\n<p>I have already <code>strdup</code>'d a string into the <code>name</code> variable in the <code>Student</code> struct.</p>\n\n<p>I wanted to know how can I move that <code>strdup</code>'d <code>name</code> pointer variable to the <code>TeachingAssistant</code> struct so that I don't have to <code>strdup</code> again. </p>\n"}, {"tags": ["c", "compiler-errors", "makefile"], "comments": [{"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1453910700, "post_id": 35042234, "comment_id": 57808813, "body": "Did you install a C compiler at all? As contained in MinGW or CygWin?"}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1453910973, "post_id": 35042234, "comment_id": 57809023, "body": "Either install a c compiler or update your PATH to point to the location of your compiler"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1453911206, "post_id": 35042234, "comment_id": 57809188, "body": "I&#39;m guessing you are building <a href=\"https://github.com/theWorldCreator/LSD\" rel=\"nofollow noreferrer\">LSD</a>. It&#39;s <a href=\"https://github.com/theWorldCreator/LSD/blob/master/Makefile\" rel=\"nofollow noreferrer\">Makefile</a> uses commands that usually work on a Unix type system such as Linux. It will probably work in a MinGW or CygWin environment on Windows."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1453911827, "post_id": 35042234, "comment_id": 57809616, "body": "You could probably set up an empty command line project in Visual Studio easily enough. The main executable <code>lsd.exe</code> only needs a couple of source files in the project - <code>lsd.c</code> and <code>lsd_cmd.c</code>."}], "answers": [{"tags": [], "owner": {"reputation": 3270, "user_id": 3059385, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/dc876278926d67b3da29594601fdc82a?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Schneider", "link": "https://stackoverflow.com/users/3059385/christopher-schneider"}, "is_accepted": true, "score": 2, "last_activity_date": 1453911834, "creation_date": 1453911834, "answer_id": 35042699, "question_id": 35042234, "link": "https://stackoverflow.com/questions/35042234/nmake-fatal-error-u1077-cc-return-code-0x1/35042699#35042699", "title": "NMAKE : fatal error U1077: &#39;cc&#39; : return code &#39;0x1&#39;", "body": "<p>The error message says exactly what the problem is. </p>\n\n<p><code>'cc' is not recognized as an internal or external comand, operable program or batch file.</code></p>\n\n<p>cc would be a compiler, and Windows cannot find it. You either</p>\n\n<p>a) Don't have a C compiler</p>\n\n<p>b) cc does not point to your C compiler</p>\n\n<p>If (a), download a C compiler. MinGW or Cygwin should work. If (b), you can try changing the makefile from 'cc' to whatever your C compiler's name is (gcc, for example), adding the C compiler to the system path, and/or creating a symlink to point 'cc' to your C compiler.</p>\n"}], "owner": {"reputation": 15, "user_id": 5847663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d37b42099091315837111a45d857fa54?s=128&d=identicon&r=PG&f=1", "display_name": "mufasa", "link": "https://stackoverflow.com/users/5847663/mufasa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1855, "favorite_count": 0, "accepted_answer_id": 35042699, "answer_count": 1, "score": 1, "last_activity_date": 1453911834, "creation_date": 1453910632, "question_id": 35042234, "link": "https://stackoverflow.com/questions/35042234/nmake-fatal-error-u1077-cc-return-code-0x1", "title": "NMAKE : fatal error U1077: &#39;cc&#39; : return code &#39;0x1&#39;", "body": "<p>I use windows 10 and am trying to compile a downloaded project using a make file. I enter:</p>\n\n<pre><code>`nmake -f Makefile'\n</code></pre>\n\n<p>in the appropriate directory and get error:</p>\n\n<pre><code>'cc -03 -o lsd lsd_cmd.c -lm\n'cc' is not recognized as an internal or external comand, operable program or batch file.\nNMAKE : fatal error U1077: 'cc' : return code 'ox1'\nStop.\n</code></pre>\n\n<p>I don't know what I'm doing wrong, I think maybe it is because it cant find a c compiler?</p>\n\n<p>Thanks for any help :)</p>\n"}, {"tags": ["c", "arrays", "loops", "null", "null-terminated"], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 7, "last_activity_date": 1453910100, "creation_date": 1453910100, "answer_id": 35042050, "question_id": 35042009, "link": "https://stackoverflow.com/questions/35042009/why-i-cant-see-that-last-char-in-array-is-null-terminator/35042050#35042050", "title": "Why I can&#39;t see that last char in array is null terminator?", "body": "<p>In your <code>for</code> loop condition, you're already checking for the non-0 value of <code>input[i]</code>, so the inside <code>if</code> is a <em>dead</em> condition.</p>\n\n<p>To test, make an infinite loop, check <code>if</code> and then, print and <code>break</code> out. Something like</p>\n\n<pre><code>for (i = 0; ; i++)\n{\n    if (input[i] == '\\0') {\n       printf(\"null!!!\\n\");  // now works\n       break;\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 7270, "user_id": 1391074, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8f68df8049c2367f1e312b85a1b984a8?s=128&d=identicon&r=PG", "display_name": "avasin", "link": "https://stackoverflow.com/users/1391074/avasin"}, "edited": false, "score": 0, "creation_date": 1453910362, "post_id": 35042055, "comment_id": 57808578, "body": "@avasin please <b>don&#39;t</b>. It makes all the previous answerers appear foolish. I&#39;ve rolled back."}], "tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 2, "last_activity_date": 1453910109, "creation_date": 1453910109, "answer_id": 35042055, "question_id": 35042009, "link": "https://stackoverflow.com/questions/35042009/why-i-cant-see-that-last-char-in-array-is-null-terminator/35042055#35042055", "title": "Why I can&#39;t see that last char in array is null terminator?", "body": "<p>As soon as <code>input[i]</code> is 0 the loop exits, so that print statement is never executed.  </p>\n"}, {"tags": [], "owner": {"reputation": 3457, "user_id": 3753446, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/4Pipl.png?s=128&g=1", "display_name": "Magix", "link": "https://stackoverflow.com/users/3753446/magix"}, "is_accepted": false, "score": 1, "last_activity_date": 1453910302, "creation_date": 1453910302, "answer_id": 35042109, "question_id": 35042009, "link": "https://stackoverflow.com/questions/35042009/why-i-cant-see-that-last-char-in-array-is-null-terminator/35042109#35042109", "title": "Why I can&#39;t see that last char in array is null terminator?", "body": "<p>Here is another working code, if you are interested :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main() {\n    char input[] = \"I am a string !!\";\n    int i = 0;\n    while(1) {\n        if (input[i] == '\\0') {\n           printf(\"null!!!\");\n           break;\n        }\n        i++;\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1453910563, "post_id": 35042179, "comment_id": 57808712, "body": "With all due respect, did you read the <code>fgets()</code> man page before nominating other answers as faulty? Isn&#39;t it indirectly impose the bounds ? :)"}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1453910853, "post_id": 35042179, "comment_id": 57808939, "body": "@SouravGhosh, yes, why? OK, I now see these answers have a <code>break</code> after printing."}, {"owner": {"reputation": 7270, "user_id": 1391074, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8f68df8049c2367f1e312b85a1b984a8?s=128&d=identicon&r=PG", "display_name": "avasin", "link": "https://stackoverflow.com/users/1391074/avasin"}, "edited": false, "score": 0, "creation_date": 1453911098, "post_id": 35042179, "comment_id": 57809105, "body": "<code>if ( ! input[i])</code>will be executed also for <code>0</code> value, isn&#39;t it? (valid char)"}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "reply_to_user": {"reputation": 7270, "user_id": 1391074, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8f68df8049c2367f1e312b85a1b984a8?s=128&d=identicon&r=PG", "display_name": "avasin", "link": "https://stackoverflow.com/users/1391074/avasin"}, "edited": false, "score": 1, "creation_date": 1453911177, "post_id": 35042179, "comment_id": 57809156, "body": "@avasin, <code>! input[i]</code> will evaluate to true only if <code>input[i]</code> is zero and a null-terminator is <code>0</code> in ASCII."}], "tags": [], "owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "is_accepted": false, "score": 0, "last_activity_date": 1453911023, "last_edit_date": 1453911023, "creation_date": 1453910479, "answer_id": 35042179, "question_id": 35042009, "link": "https://stackoverflow.com/questions/35042009/why-i-cant-see-that-last-char-in-array-is-null-terminator/35042179#35042179", "title": "Why I can&#39;t see that last char in array is null terminator?", "body": "<p><strike>All answers here don't check memory bounds, so you'll definitely run into a segmentation fault.</strike> Still, if an error occurs during <code>fread</code>ing, you may have garbage in <code>input</code>. </p>\n\n<pre><code>char input[80];\n\nfgets(input, sizeof(input), stdin);\n\nfor (i = 0; i&lt;80; i++)\n{\n    if (input[i] == '\\0') {\n        printf(\"null!!!\"); \n    }\n}\n</code></pre>\n\n<p>You could also change <code>if (input[i] == '\\0')</code> to just <code>if (! input[i])</code> since <code>'\\0'</code> (null-terminator) has ASCII value <code>0</code>. </p>\n"}], "owner": {"reputation": 7270, "user_id": 1391074, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8f68df8049c2367f1e312b85a1b984a8?s=128&d=identicon&r=PG", "display_name": "avasin", "link": "https://stackoverflow.com/users/1391074/avasin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 35042050, "answer_count": 4, "score": -3, "last_activity_date": 1453911381, "creation_date": 1453909980, "last_edit_date": 1453911381, "question_id": 35042009, "link": "https://stackoverflow.com/questions/35042009/why-i-cant-see-that-last-char-in-array-is-null-terminator", "title": "Why I can&#39;t see that last char in array is null terminator?", "body": "<p>How can I check that a <code>char</code> array is null terminated?</p>\n\n<pre><code>char input[80];\n\nfgets(input, sizeof(input), stdin);\n\nfor (i = 0; input[i]; i++)\n{\n    if (input[i] == '\\0') {\n       printf(\"null!!!\"); // never works\n    }\n}\n</code></pre>\n\n<p>For example, the below code does not print <code>null</code>.</p>\n"}, {"tags": ["c", "gcc", "ternary-operator", "conditional-operator", "addressof"], "comments": [{"owner": {"reputation": 2087, "user_id": 1179689, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/0af041f6eb59ed4e3698c3af45d58607?s=128&d=identicon&r=PG&f=1", "display_name": "yehudahs", "link": "https://stackoverflow.com/users/1179689/yehudahs"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1453909758, "post_id": 35041861, "comment_id": 57808125, "body": "can&#39;t see what the difference but in this case it is c"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1453910179, "post_id": 35041861, "comment_id": 57808431, "body": "The cast is irrelevant. Shorter code that illustrates the issue: <code>int x, y; int* p = true ? &amp;x : &amp;y; int* q = &amp;(true ? x : y)</code>."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1453910241, "post_id": 35041861, "comment_id": 57808482, "body": "@yehudahs Did you try compiling as C and C++? You may see a difference then."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1454019478, "post_id": 35041861, "comment_id": 57869400, "body": "actually, NONE of the posted code compiles. (always enable all warnings when compiling.  (for gcc, at a minimum use: <code>-Wall -Wextra -pedantic</code>  (I also use: <code>-Wconversion -std=c99</code>) )  the result is 5 warnings and one error.  I suspect your referencing the <code>error</code> message: &quot; lvalue required as unary &#39;&amp;&#39; operand&quot; but your question mentions not being able to get address of an rvalue.  So I&#39;m a bit confused at to what your actually asking about"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1454019669, "post_id": 35041861, "comment_id": 57869476, "body": "the posted code is trying to get a value off address 0.  This is (almost) certain to result in a memory access error, resulting in a seg fault event."}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 9, "last_activity_date": 1453909753, "creation_date": 1453909753, "answer_id": 35041922, "question_id": 35041861, "link": "https://stackoverflow.com/questions/35041861/getting-error-cannot-take-the-address-of-an-rvalue-of-type-int/35041922#35041922", "title": "getting error: cannot take the address of an rvalue of type &#39;int&#39;", "body": "<p>In your code</p>\n\n<pre><code>   ((18 == c) ? (((db_data_px *) 0)-&gt;myfield) : (((db_data_px *) 0)-&gt;myfield3[b]))\n</code></pre>\n\n<p>is a conditional expression which does not produce a lvalue.</p>\n\n<p>The above expression gives you an rvalue (<em>non-lvaue</em>) and you cannot use <code>&amp;</code> operator on that.</p>\n\n<p>To elaborate, quoting <code>C11</code> standard, chapter \u00a76.5.3.2, <em>Address and indirection operators</em></p>\n\n<blockquote>\n  <p>The operand of the unary <code>&amp;</code> operator shall be either a function designator, the result of a\n  <code>[]</code> or unary <code>*</code> operator, or an lvalue that designates an object that is not a bit-field and is\n  not declared with the <code>register</code> storage-class specifier.</p>\n</blockquote>\n\n<p>OTOH, for the result type of the conditional operator, chapter \u00a76.5.15, footnote</p>\n\n<blockquote>\n  <p>A conditional expression does not yield an lvalue.</p>\n</blockquote>\n\n<p>Just imagine, <code>&amp;5</code>, not possible.</p>\n"}], "owner": {"reputation": 2087, "user_id": 1179689, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/0af041f6eb59ed4e3698c3af45d58607?s=128&d=identicon&r=PG&f=1", "display_name": "yehudahs", "link": "https://stackoverflow.com/users/1179689/yehudahs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 20111, "favorite_count": 1, "accepted_answer_id": 35041922, "answer_count": 1, "score": 10, "last_activity_date": 1453910292, "creation_date": 1453909629, "last_edit_date": 1453910292, "question_id": 35041861, "link": "https://stackoverflow.com/questions/35041861/getting-error-cannot-take-the-address-of-an-rvalue-of-type-int", "title": "getting error: cannot take the address of an rvalue of type &#39;int&#39;", "body": "<p>I tryed to compile old code with new compiler and got the next error:</p>\n\n<pre><code>error: cannot take the address of an rvalue of type 'int'\n</code></pre>\n\n<p>Here is the example with 2 lines - one that compiles and the other that gives an error</p>\n\n<pre><code>struct mstct {\n    int myfield;\n    int myfield2[5];\n    int myfield3[5];\n};\n\ntypedef struct mstct db_data_px;\n\nint foo(int a, int b, int c){\n\n  //the next code compiles successfully.\n  unsigned val1 = ((18 == c) ? ((unsigned) &amp; (((db_data_px *) 0)-&gt;myfield)) : ((unsigned) &amp; (((db_data_px *) 0)-&gt;myfield3[b]))); //successes\n\n\n  //the next code is failing\n  unsigned val2 = (unsigned) &amp; ((18 == c) ? (((db_data_px *) 0)-&gt;myfield) : (((db_data_px *) 0)-&gt;myfield3[b]));\n  return 0; // failing\n}\n</code></pre>\n\n<p>Why the first line compiles and the second is failing ? Why do I need to cast (unsigned) &amp; in both of the select expression and it is not enough to cast only after the select expression is valued ?</p>\n"}, {"tags": ["c", "bitwise-and"], "comments": [{"owner": {"reputation": 4259, "user_id": 2516916, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/90d670e62ae35e180ad6e939443cab62?s=128&d=identicon&r=PG", "display_name": "Gillespie", "link": "https://stackoverflow.com/users/2516916/gillespie"}, "edited": false, "score": 0, "creation_date": 1453909619, "post_id": 35041700, "comment_id": 57808024, "body": "You&#39;re on the right track. See: <a href=\"http://stackoverflow.com/questions/109023/how-to-count-the-number-of-set-bits-in-a-32-bit-integer\" title=\"how to count the number of set bits in a 32 bit integer\">stackoverflow.com/questions/109023/&hellip;</a>"}, {"owner": {"reputation": 4259, "user_id": 2516916, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/90d670e62ae35e180ad6e939443cab62?s=128&d=identicon&r=PG", "display_name": "Gillespie", "link": "https://stackoverflow.com/users/2516916/gillespie"}, "edited": false, "score": 0, "creation_date": 1453909669, "post_id": 35041700, "comment_id": 57808064, "body": "Don&#39;t forget that right shift will do sign-extension on integers (might be better to make it unsigned for that reason)"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 4259, "user_id": 2516916, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/90d670e62ae35e180ad6e939443cab62?s=128&d=identicon&r=PG", "display_name": "Gillespie", "link": "https://stackoverflow.com/users/2516916/gillespie"}, "edited": false, "score": 0, "creation_date": 1453912920, "post_id": 35041700, "comment_id": 57810392, "body": "@RPGillespie I would assume <code>alt_u16</code> to be an unsigned type."}], "answers": [{"tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": true, "score": 1, "last_activity_date": 1453911103, "last_edit_date": 1453911103, "creation_date": 1453909569, "answer_id": 35041831, "question_id": 35041700, "link": "https://stackoverflow.com/questions/35041700/how-to-count-number-of-switches-and-switch-corresponding-number-of-leds-by-apply/35041831#35041831", "title": "How to count number of switches and switch corresponding number of LEDs by applying masking?", "body": "<p>Function <code>CountSWITCHES</code> is not correct, should be:</p>\n\n<pre><code>int CountSWITCHES(alt_u16 sw)\n{\n    alt_u16 mask = 1;\n\n    for(i = 0; i &lt; 10; i++)\n    {\n        if (sw &amp; mask)\n        {\n            count++;\n        }\n\n        mask = mask &lt;&lt; 1;\n    }\n\n    return count;    \n}\n</code></pre>\n\n<p>BTW this function return the number of switches ON, but it doesn't return their position.</p>\n\n<p><code>IOWR_ALTERA_AVALON_PIO_DATA(base, data)</code> wants a bitfield <code>data</code>: each bit set to 1 will set to 1 the corresponding output of port (<code>base</code>) passed.\nThis means that you must set bits of sw2 variable based on the switches position.</p>\n"}], "owner": {"reputation": 11, "user_id": 5739059, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ec89fc7696690d3763764c1b934c6958?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5739059/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 359, "favorite_count": 0, "accepted_answer_id": 35041831, "answer_count": 1, "score": 0, "last_activity_date": 1453911103, "creation_date": 1453909238, "last_edit_date": 1453909409, "question_id": 35041700, "link": "https://stackoverflow.com/questions/35041700/how-to-count-number-of-switches-and-switch-corresponding-number-of-leds-by-apply", "title": "How to count number of switches and switch corresponding number of LEDs by applying masking?", "body": "<p>I am using an DE0 board and wanted to count number of slide switches in ON position (there are 10 of these), and then lit corresponding number of LED (10 of these too) on the board. However I don't know how to use the result from masking to the IOWR. Thank you </p>\n\n<pre><code>alt_u16 sw;\n\nvolatile int i = 0;\n\nalt_u16 count = 0x0;\n\nalt_u16 mask = 0x0001;\n\nalt_u16 sw2;\n\nint CountSWITCHES(alt_u16 sw);\n\nint alt_main (void)\n{\n    while(1)\n    {   \n        sw = IORD_ALTERA_AVALON_PIO_DATA(SWITCHES_BASE); \n\n        IOWR_ALTERA_AVALON_PIO_DATA(LEDS_BASE, sw2);\n    }\n    return 0;\n}\n\nint CountSWITCHES(alt_u16 sw)\n{\n    for(i = 0; i &lt; 10; i++)\n    {\n        if (sw &amp; mask)\n        {\n            count++;\n        }\n\n        mask = mask &gt;&gt; 1;\n    }\n    return count;    \n}\n\nvoid TurnLedsON(alt_u16 sw2)\n{\n    sw2 = CountSWITCHES(sw);\n}\n</code></pre>\n"}, {"tags": ["python", "c", "numpy", "openmp", "intel-mkl"], "comments": [{"owner": {"reputation": 5146, "user_id": 195447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/996483d0dfbd79f30c9b99056f27553c?s=128&d=identicon&r=PG", "display_name": "Elalfer", "link": "https://stackoverflow.com/users/195447/elalfer"}, "edited": false, "score": 1, "creation_date": 1453940118, "post_id": 35041597, "comment_id": 57825574, "body": "You are probably not hitting the scalability limit with doubles as it is 2x more work than in single precision. If you&#39;d reduce the matrix size you might observe the same behavior with double precision as well."}, {"owner": {"reputation": 946, "user_id": 3379288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76f483f5224ed7e9e3319cc5ba3fe7b8?s=128&d=identicon&r=PG&f=1", "display_name": "Fermion Portal", "link": "https://stackoverflow.com/users/3379288/fermion-portal"}, "reply_to_user": {"reputation": 5146, "user_id": 195447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/996483d0dfbd79f30c9b99056f27553c?s=128&d=identicon&r=PG", "display_name": "Elalfer", "link": "https://stackoverflow.com/users/195447/elalfer"}, "edited": false, "score": 0, "creation_date": 1453973257, "post_id": 35041597, "comment_id": 57838244, "body": "I had to reduce the matrix size to n = 1000 for double precision, in order for the degradation of performance to become observable upon addition of more cores. With higher sizes, it just tops out. Besides, it is not just 2x more work (due to vectorization), but 2x more memory to be transferred."}, {"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 0, "creation_date": 1453990633, "post_id": 35041597, "comment_id": 57850463, "body": "Try to run the Python interpreter as <code>numactl --interleave=nodes python</code> and redo the benchmarks again."}, {"owner": {"reputation": 4827, "user_id": 5819, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a12b1d3bf30e4adbe458889599c93049?s=128&d=identicon&r=PG", "display_name": "Tony Lee", "link": "https://stackoverflow.com/users/5819/tony-lee"}, "edited": false, "score": 0, "creation_date": 1455425842, "post_id": 35041597, "comment_id": 58481192, "body": "Is it possible this <a href=\"http://stackoverflow.com/a/14370028/5819\">stackoverflow.com/a/14370028/5819</a> is what&#39;s going on?  Python may set different FPU flags than what C does."}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1455463137, "post_id": 35041597, "comment_id": 58490462, "body": "Can you please provide a <a href=\"http://stackoverflow.com/help/mcve\">mcve</a>? Including the fast C version, <code>mkl.set_num_threads</code> for python. What is <code>; %time</code>? <code>lib.cblas_sgemm.argtypes</code> looks like it is missing <code>_mkl</code>?"}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1455468757, "post_id": 35041597, "comment_id": 58492551, "body": "What is the setting for hyperthreading on the system?"}, {"owner": {"reputation": 3172, "user_id": 1866177, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e8c0ce1cb1a82142855505af84525357?s=128&d=identicon&r=PG", "display_name": "Dschoni", "link": "https://stackoverflow.com/users/1866177/dschoni"}, "edited": false, "score": 0, "creation_date": 1455539030, "post_id": 35041597, "comment_id": 58519407, "body": "I&#39;m definitely not understanding all of your problem, but I had problems with numpy messing with thread affinity due to some open BLAS stuff. Maybe this is somehow related? <a href=\"http://bugs.python.org/issue17038\" rel=\"nofollow noreferrer\">bugs.python.org/issue17038</a>"}], "answers": [{"comments": [{"owner": {"reputation": 946, "user_id": 3379288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76f483f5224ed7e9e3319cc5ba3fe7b8?s=128&d=identicon&r=PG&f=1", "display_name": "Fermion Portal", "link": "https://stackoverflow.com/users/3379288/fermion-portal"}, "edited": false, "score": 0, "creation_date": 1455630827, "post_id": 35398899, "comment_id": 58566882, "body": "I&#39;ve updated my question with the cause of the problem. Your answers have invaluable information. Btw, KMP_AFFINITY=compact allocates two threads on the same core, and with 4 threads, only 2 cores would be used, etc."}], "tags": [], "owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "is_accepted": true, "score": 7, "last_activity_date": 1482527860, "last_edit_date": 1482527860, "creation_date": 1455489683, "answer_id": 35398899, "question_id": 35041597, "link": "https://stackoverflow.com/questions/35041597/performance-degradation-of-matrix-multiplication-of-single-vs-double-precision-a/35398899#35398899", "title": "Performance degradation of matrix multiplication of single vs double precision arrays on multi-core machine", "body": "<p>I suspect this is due to unfortunate thread scheduling. I was able to reproduce an effect similar to yours. Python was running at ~2.2 s, while the C version was showing huge variations from 1.4-2.2 s.</p>\n\n<p>Applying:\n<code>KMP_AFFINITY=scatter,granularity=thread</code>\nThis ensures that the 28 threads are always running on the same processor thread.</p>\n\n<p>Reduces both runtimes to more stable ~1.24 s for C and ~1.26 s for python.</p>\n\n<p>This is on a 28 core dual socket Xeon E5-2680 v3 system.</p>\n\n<p>Interestingly, on a very similar 24 core dual socket Haswell system, both python and C perform almost identical even without thread affinity / pinning.</p>\n\n<p>Why does python affect the scheduling? Well I assume there is more runtime environment around it. Bottom line is, without pinning your performance results will be non-deterministic.</p>\n\n<p>Also you need to consider, that the Intel OpenMP runtime spawns an extra management thread that can confuse the scheduler. There are more choices for pinning, for instance <code>KMP_AFFINITY=compact</code> - but for some reason that is totally messed up on my system. You can add <code>,verbose</code> to the variable to see how the runtime is pinning your threads.</p>\n\n<p><a href=\"https://github.com/RRZE-HPC/likwid/wiki/Likwid-Pin\" rel=\"nofollow noreferrer\">likwid-pin</a> is a useful alternative providing more convenient control.</p>\n\n<p>In general single precision should be at least as fast as double precision. Double precision can be slower because:</p>\n\n<ul>\n<li>You need more memory/cache bandwidth for double precision.</li>\n<li>You can build ALUs that have higher througput for single precision, but that usually doesn't apply to CPUs but rather GPUs.</li>\n</ul>\n\n<p>I would think that once you get rid of the performance anomaly, this will be reflected in your numbers.</p>\n\n<p>When you scale up the number of threads for MKL/*gemm, consider</p>\n\n<ul>\n<li>Memory /shared cache bandwidth may become a bottleneck, limiting the scalability</li>\n<li>Turbo mode will effectively decrease the core frequency when increasing utilization. This applies even when you run at nominal frequency: On Haswell-EP processors, AVX instructions will impose a lower \"AVX base frequency\" - but the processor is allowed to exceed that when less cores are utilized / thermal headroom is available and in general even more for a short time. If you want perfectly neutral results, you would have to use the AVX base frequency, which is 1.9 GHz for you. It is documented <a href=\"http://www.intel.com/content/dam/www/public/us/en/documents/specification-updates/xeon-e5-v3-spec-update.pdf\" rel=\"nofollow noreferrer\">here</a>, and explained in <a href=\"http://images.anandtech.com/doci/8423/Hep_AVX_turbo.png\" rel=\"nofollow noreferrer\">one picture</a>.</li>\n</ul>\n\n<p>I don't think there is a really simple way to measure how your application is affected by bad scheduling. You can expose this with <code>perf trace -e sched:sched_switch</code> and there is <a href=\"http://tu-dresden.de/zih/perf/\" rel=\"nofollow noreferrer\">some software</a> to visualize this, but this will come with a high learning curve. And then again - for parallel performance analysis you should have the threads pinned anyway.</p>\n"}], "owner": {"reputation": 946, "user_id": 3379288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76f483f5224ed7e9e3319cc5ba3fe7b8?s=128&d=identicon&r=PG&f=1", "display_name": "Fermion Portal", "link": "https://stackoverflow.com/users/3379288/fermion-portal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 938, "favorite_count": 7, "accepted_answer_id": 35398899, "answer_count": 1, "score": 28, "last_activity_date": 1482527860, "creation_date": 1453908957, "last_edit_date": 1455630685, "question_id": 35041597, "link": "https://stackoverflow.com/questions/35041597/performance-degradation-of-matrix-multiplication-of-single-vs-double-precision-a", "title": "Performance degradation of matrix multiplication of single vs double precision arrays on multi-core machine", "body": "<p><strong>UPDATE</strong></p>\n\n<p>Unfortunately, due to my oversight, I had an older version of MKL (11.1) linked against numpy. Newer version of MKL (11.3.1) gives same performance in C and when called from python. </p>\n\n<p>What was obscuring things, was even if linking the compiled shared libraries explicitly with the newer MKL, and pointing through LD_* variables to them, and then in python doing import numpy, was somehow making python call old MKL libraries. Only by replacing in python lib folder all libmkl_*.so with newer MKL I was able to match performance in python and C calls.</p>\n\n<p><strong>Background / library info.</strong></p>\n\n<p>Matrix multiplication was done via sgemm (single-precision) and dgemm (double-precision) Intel's MKL library calls, via numpy.dot function. The actual call of the library functions can be verified with e.g. oprof. </p>\n\n<p>Using here 2x18 core CPU E5-2699 v3, hence a total of 36 physical cores.\nKMP_AFFINITY=scatter. Running on linux.</p>\n\n<p><strong>TL;DR</strong></p>\n\n<p>1) Why is numpy.dot, even though it is calling the same MKL library functions, twice slower at best compared to C compiled code?</p>\n\n<p>2) Why via numpy.dot you get performance decreasing with increasing number of cores, whereas the same effect is not observed in C code (calling the same library functions).</p>\n\n<p><strong>The problem</strong></p>\n\n<p>I've observed that doing matrix multiplication of single/double precision floats in numpy.dot, as well as calling cblas_sgemm/dgemm directly from a compiled C <strong>shared library</strong> give noticeably worse performance compared to calling same MKL cblas_sgemm/dgemm functions from inside pure C code.</p>\n\n<pre><code>import numpy as np\nimport mkl\nn = 10000\nA = np.random.randn(n,n).astype('float32')\nB = np.random.randn(n,n).astype('float32')\nC = np.zeros((n,n)).astype('float32')\n\nmkl.set_num_threads(3); %time np.dot(A, B, out=C)\n11.5 seconds\nmkl.set_num_threads(6); %time np.dot(A, B, out=C)\n6 seconds\nmkl.set_num_threads(12); %time np.dot(A, B, out=C)\n3 seconds\nmkl.set_num_threads(18); %time np.dot(A, B, out=C)\n2.4 seconds\nmkl.set_num_threads(24); %time np.dot(A, B, out=C)\n3.6 seconds\nmkl.set_num_threads(30); %time np.dot(A, B, out=C)\n5 seconds\nmkl.set_num_threads(36); %time np.dot(A, B, out=C)\n5.5 seconds\n</code></pre>\n\n<p>Doing exactly the same as above, but with double precision A, B and C, you get:\n3 cores: 20s, 6 cores: 10s, 12 cores: 5s, 18 cores: 4.3s, 24 cores: 3s, 30 cores: 2.8s, 36 cores: 2.8s.</p>\n\n<p>The topping up of speed for single precision floating points seem to be associated with cache misses.\nFor 28 core run, here is the output of perf.\nFor single precision:</p>\n\n<pre><code>perf stat -e task-clock,cycles,instructions,cache-references,cache-misses ./ptestf.py\n631,301,854 cache-misses # 31.478 % of all cache refs\n</code></pre>\n\n<p>And double precision:</p>\n\n<pre><code>93,087,703 cache-misses # 5.164 % of all cache refs\n</code></pre>\n\n<p>C shared library, compiled with</p>\n\n<pre><code>/opt/intel/bin/icc -o comp_sgemm_mkl.so -openmp -mkl sgem_lib.c -lm -lirc -O3 -fPIC -shared -std=c99 -vec-report1 -xhost -I/opt/intel/composer/mkl/include\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include \"mkl.h\"\n\nvoid comp_sgemm_mkl(int m, int n, int k, float *A, float *B, float *C);\n\nvoid comp_sgemm_mkl(int m, int n, int k, float *A, float *B, float *C)\n{\n    int i, j;\n    float alpha, beta;\n    alpha = 1.0; beta = 0.0;\n\n    cblas_sgemm(CblasRowMajor, CblasNoTrans, CblasNoTrans,\n                m, n, k, alpha, A, k, B, n, beta, C, n);\n}\n</code></pre>\n\n<p>Python wrapper function, calling the above compiled library:</p>\n\n<pre><code>def comp_sgemm_mkl(A, B, out=None):\n    lib = CDLL(omplib)\n    lib.cblas_sgemm_mkl.argtypes = [c_int, c_int, c_int, \n                                 np.ctypeslib.ndpointer(dtype=np.float32, ndim=2), \n                                 np.ctypeslib.ndpointer(dtype=np.float32, ndim=2),\n                                 np.ctypeslib.ndpointer(dtype=np.float32, ndim=2)]\n    lib.comp_sgemm_mkl.restype = c_void_p\n    m = A.shape[0]\n    n = B.shape[0]\n    k = B.shape[1]\n    if np.isfortran(A):\n        raise ValueError('Fortran array')\n    if m != n:\n        raise ValueError('Wrong matrix dimensions')\n    if out is None:\n        out = np.empty((m,k), np.float32)\n    lib.comp_sgemm_mkl(m, n, k, A, B, out)\n</code></pre>\n\n<p>However, explicit calls from a C-compiled binary calling MKL's cblas_sgemm / cblas_dgemm, with arrays allocated through malloc in C, gives almost 2x better performance compared to the python code, i.e. the numpy.dot call. Also, the effect of performance degradation with increasing number of cores is NOT observed. <strong>The best performance was 900 ms for single-precision matrix multiplication</strong> and was achieved when using all 36 physical cores via mkl_set_num_cores and running the C code with numactl --interleave=all.</p>\n\n<p>Perhaps any fancy tools or advice for profiling/inspecting/understanding  this situation further? Any reading material is much appreciated as well.</p>\n\n<p><strong>UPDATE</strong>\nFollowing @Hristo Iliev advice, running numactl --interleave=all ./ipython did not change the timings (within noise), but improves the pure C binary runtimes.</p>\n"}, {"tags": ["c", "arrays", "pointers", "multidimensional-array", "malloc"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1453907361, "post_id": 35040926, "comment_id": 57806265, "body": "<code>char **</code> is <b>not</b> an array! Guess why a <i>pointer</i> is not called &quot;array&quot;! And <code>char **</code> cannot be used to point to a 2D array anyway!"}], "answers": [{"comments": [{"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1453917592, "post_id": 35041153, "comment_id": 57813630, "body": "@Bob__ Thanks. It is indeed a type due to &quot;copy and paste&quot;.:)"}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1453917557, "last_edit_date": 1453917557, "creation_date": 1453907832, "answer_id": 35041153, "question_id": 35040926, "link": "https://stackoverflow.com/questions/35040926/assigning-2-dimensional-array-to-struct-object/35041153#35041153", "title": "Assigning 2-dimensional array to struct object", "body": "<p>For starters the member <code>table</code> is not a two dimensional array. It is a pointer.</p>\n\n<p>Arrays do not have the assignment operator. You have to copy arrays element by element.</p>\n\n<p>For example if you have an object of the structure</p>\n\n<pre><code>typedef struct {\n    int x;\n    int y;\n    char **table; // pointer\n} some_struct;\n\nsome_struct obj;\n</code></pre>\n\n<p>and array</p>\n\n<pre><code>const char sth1_table[2][3] = {\n   { ' ', 'x', ' '},\n   { 'x', 'x', 'x'},\n};\n</code></pre>\n\n<p>then you can make the following way</p>\n\n<pre><code>obj.table = malloc( sizeof( char *[2] ) );\n\nfor ( size_t i = 0; i &lt; 2; i++ )\n{\n    obj.table[i] = malloc( sizeof( sth1_table[i] ) );\n    memcpy( obj.table[i], sth1_table[i], sizeof( sth1_table[i] ) );\n} \n</code></pre>\n\n<p>You should remember that you have to free all allocated memory or realloc it when you need to use another two-dimensional array as an initializer.</p>\n"}, {"tags": [], "owner": {"reputation": 8833, "user_id": 337149, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3bbd41f2b74254f902cfe20acef9030b?s=128&d=identicon&r=PG", "display_name": "August Karlstrom", "link": "https://stackoverflow.com/users/337149/august-karlstrom"}, "is_accepted": false, "score": -1, "last_activity_date": 1453912261, "last_edit_date": 1453912261, "creation_date": 1453911188, "answer_id": 35042448, "question_id": 35040926, "link": "https://stackoverflow.com/questions/35040926/assigning-2-dimensional-array-to-struct-object/35042448#35042448", "title": "Assigning 2-dimensional array to struct object", "body": "<p>Instead of using <em>malloc</em> directly I suggest defining a macro for memory allocation. This makes the code easier to follow. In the example below I have taken the liberty to rename some identifiers.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define LEN(arr) (sizeof (arr) / sizeof (arr)[0])\n\n#define NEW_ARRAY(ptr, n) (ptr) = malloc((n) * sizeof (ptr)[0])\n\ntypedef struct {\n    int m;\n    int n;\n    char **table;\n} Matrix;\n\n\nint main()\n{\n    const char items[2][3] = {{' ', 'x', ' '}, {'x', 'x', 'x'}};\n    Matrix A;\n    int i, j;\n\n    A.m = LEN(items);\n    A.n = LEN(items[0]);\n\n    /*initialize matrix*/   \n    NEW_ARRAY(A.table, A.m);\n    for (i = 0; i &lt; A.m; i++) {\n        NEW_ARRAY(A.table[i], A.n);\n        for (j = 0; j &lt; A.n; j++) {\n            A.table[i][j] = items[i][j];\n        }\n    }\n\n    /*print matrix*/\n    for (i = 0; i &lt; A.m; i++) {\n        for (j = 0; j &lt; A.n; j++) {\n            printf(\"%c \", A.table[i][j]);\n        }\n        putchar('\\n');\n    }\n\n    return 0 ;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 879, "user_id": 5693785, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/mfKhd.jpg?s=128&g=1", "display_name": "ron", "link": "https://stackoverflow.com/users/5693785/ron"}, "is_accepted": false, "score": 0, "last_activity_date": 1453919597, "creation_date": 1453919597, "answer_id": 35045326, "question_id": 35040926, "link": "https://stackoverflow.com/questions/35040926/assigning-2-dimensional-array-to-struct-object/35045326#35045326", "title": "Assigning 2-dimensional array to struct object", "body": "<p>If you can do it with the array sizes hard coded and without using malloc,\nI would consider this example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct Some_Struct\n{\n    int x;\n    int y;\n    char sth1_table[2][3];\n    char sth2_table[4][4];\n};\n\nint main ( int argc, char *argv[] )\n{\n    struct Some_Struct yy;\n    struct Some_Struct zz[10];\n\n    yy.x = 1;\n    yy.y = 2;\n\n    /*\n    you wanted this\n    const char sth1_table[2][3] = {\n        { ' ', 'a', ' '},\n        { 'b', 'c', 'd'},\n    };\n    */\n\n    yy.sth1_table[0][0] = '\\0';   /* null character */\n    yy.sth1_table[0][1] = 'a';\n    yy.sth1_table[0][2] = '\\0';\n    yy.sth1_table[1][0] = 'b';\n    yy.sth1_table[1][1] = 'c';\n    yy.sth1_table[1][2] = 'd';\n\n    for ( i = 0; i &lt; 10; i++ )\n    {\n        zz[i].sth1_table[0][0] = '\\0';   /* null character */\n        zz[i].sth1_table[0][1] = 'a';\n        zz[i].sth1_table[0][2] = '\\0';\n        zz[i].sth1_table[1][0] = 'b';\n        zz[i].sth1_table[1][1] = 'c';\n        zz[i].sth1_table[1][2] = 'd';\n    }\n}\n</code></pre>\n\n<p>if you are interested in runtime allocation then also consider the calloc() function in addition to malloc().  When doing so, remember the memory allocation of your 2-d array (or 3-d, 4-d, any-dimension) is just a chunk of memory whose size is the number of dimensions multiplied by the type size.</p>\n\n<pre><code>char sth1_table[2][3];\n</code></pre>\n\n<p>the size of char is 1 byte.\n1 byte * 2 * 3 = 6 bytes of memory for sth1_table</p>\n\n<pre><code>char sth2_table[4][4];\n</code></pre>\n\n<p>1 byte * 4 * 4 = 16 bytes of memory sth2_table</p>\n\n<p>How you then chose to order your data within that allocated memory,\nwhether it is row first or column first, is entirely up to you.</p>\n"}], "owner": {"reputation": 2409, "user_id": 1252334, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/6VDvz.jpg?s=128&g=1", "display_name": "Defozo", "link": "https://stackoverflow.com/users/1252334/defozo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1453919597, "creation_date": 1453907247, "last_edit_date": 1453908169, "question_id": 35040926, "link": "https://stackoverflow.com/questions/35040926/assigning-2-dimensional-array-to-struct-object", "title": "Assigning 2-dimensional array to struct object", "body": "<p>I have 2-dimensional array. I want that array to be assigned to struct. Please take a look:</p>\n\n<p>This is my struct:</p>\n\n<pre><code>typedef struct {\n    int x;\n    int y;\n    char **table; //2-dim array\n} some_struct;\n</code></pre>\n\n<p>And I want to be able to assign this:</p>\n\n<pre><code>const char sth1_table[2][3] = {\n   { ' ', 'x', ' '},\n   { 'x', 'x', 'x'},\n};\n</code></pre>\n\n<p>or this:</p>\n\n<pre><code>const char sth2_table[4][2] = {\n   { 'x', ' '},\n   { 'x', ' '},\n   { 'x', ' '},\n   { 'x', 'x'},\n};\n</code></pre>\n\n<p>to that struct.</p>\n\n<p>How to do that?\nI tried assigning:</p>\n\n<pre><code>new_sth.table = malloc(sizeof(sth1_table));\n*new_sth.table = sth1_table;\n</code></pre>\n\n<p>And then accessing:</p>\n\n<pre><code>some_struct get_sth;\nget_sth = *(some_struct+i);\nother_array[a][b] = get_sth.table[a][b];\n</code></pre>\n\n<p>But with no luck.</p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["c", "ssl", "curl", "embedded"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1453907227, "post_id": 35040826, "comment_id": 57806158, "body": "The messages are very clear."}, {"owner": {"reputation": 41, "user_id": 4940053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c26a0d0c631766ac879e7f0218bdbc33?s=128&d=identicon&r=PG&f=1", "display_name": "Bilel Eljaamii", "link": "https://stackoverflow.com/users/4940053/bilel-eljaamii"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1453910892, "post_id": 35040826, "comment_id": 57808969, "body": "So Can you guide me towards the solution please?"}, {"owner": {"reputation": 1300, "user_id": 1198066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a0a68dd4c4916fc2fd33708e595bf5?s=128&d=identicon&r=PG", "display_name": "Ross", "link": "https://stackoverflow.com/users/1198066/ross"}, "edited": false, "score": 0, "creation_date": 1453925925, "post_id": 35040826, "comment_id": 57818614, "body": "Change CONFIG_X509_MAX_CA_CERTS and see what happens..."}], "answers": [{"tags": [], "owner": {"reputation": 322, "user_id": 1599208, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a12ec3a439b5ef1a00e1e87b87f7d5ca?s=128&d=identicon&r=PG", "display_name": "Owl_Prophet", "link": "https://stackoverflow.com/users/1599208/owl-prophet"}, "is_accepted": false, "score": 0, "last_activity_date": 1453929656, "creation_date": 1453929656, "answer_id": 35048251, "question_id": 35040826, "link": "https://stackoverflow.com/questions/35040826/error-invalid-x509-asn-1-file-in-libcurl-with-axtls/35048251#35048251", "title": "Error &quot;Invalid X509 ASN.1 file&quot; in libCurl with axTLS", "body": "<p>Have you tried Changing CONFIG_X509_MAX_CA_CERTS=\"\" in your code to something larger than 150?  That seems to be what the error is indicating.  If you know how many CA certs you have, you can set it to a higher number than that.</p>\n"}], "owner": {"reputation": 41, "user_id": 4940053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c26a0d0c631766ac879e7f0218bdbc33?s=128&d=identicon&r=PG&f=1", "display_name": "Bilel Eljaamii", "link": "https://stackoverflow.com/users/4940053/bilel-eljaamii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 173, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1453929656, "creation_date": 1453906991, "question_id": 35040826, "link": "https://stackoverflow.com/questions/35040826/error-invalid-x509-asn-1-file-in-libcurl-with-axtls", "title": "Error &quot;Invalid X509 ASN.1 file&quot; in libCurl with axTLS", "body": "<p>I am using libCurl with axTLS (<a href=\"http://sourceforge.net/projects/axtls/files/1.5.3/\" rel=\"nofollow\">http://sourceforge.net/projects/axtls/files/1.5.3/</a> ) in an embedded project.  </p>\n\n<p>when compiling the axTLS I used the following configuration for SSL:  </p>\n\n<pre><code>#\n# SSL Library\n#\n# CONFIG_SSL_SERVER_ONLY is not set\n# CONFIG_SSL_CERT_VERIFICATION is not set\n# CONFIG_SSL_ENABLE_CLIENT is not set\nCONFIG_SSL_FULL_MODE=y\n# CONFIG_SSL_SKELETON_MODE is not set\n# CONFIG_SSL_PROT_LOW is not set\nCONFIG_SSL_PROT_MEDIUM=y\n# CONFIG_SSL_PROT_HIGH is not set\nCONFIG_SSL_USE_DEFAULT_KEY=y\nCONFIG_SSL_PRIVATE_KEY_LOCATION=\"\"\nCONFIG_SSL_PRIVATE_KEY_PASSWORD=\"\"\nCONFIG_SSL_X509_CERT_LOCATION=\"\"\n# CONFIG_SSL_GENERATE_X509_CERT is not set\nCONFIG_SSL_X509_COMMON_NAME=\"\"\nCONFIG_SSL_X509_ORGANIZATION_NAME=\"\"\nCONFIG_SSL_X509_ORGANIZATION_UNIT_NAME=\"\"\nCONFIG_SSL_ENABLE_V23_HANDSHAKE=y\nCONFIG_SSL_HAS_PEM=y\nCONFIG_SSL_USE_PKCS12=y\nCONFIG_SSL_EXPIRY_TIME=\"\"\nCONFIG_X509_MAX_CA_CERTS=\"\"\nCONFIG_SSL_MAX_CERTS=3\nCONFIG_SSL_CTX_MUTEXING=y\nCONFIG_USE_DEV_URANDOM=y\n# CONFIG_WIN32_USE_CRYPTO_LIB is not set\nCONFIG_OPENSSL_COMPATIBLE=y\n# CONFIG_PERFORMANCE_TESTING is not set\n# CONFIG_SSL_TEST is not set\nCONFIG_AXTLSWRAP=y\nCONFIG_AXHTTPD=y\n</code></pre>\n\n<p>And when I tried to download files using HTTPS I received the following errors:</p>\n\n<pre><code>invalid digest: 2a 86 48 ce 3d 04 03 03 \nError: Invalid X509 ASN.1 file (Unsupported digest)\ninvalid digest: 2a 86 48 ce 3d 04 03 03 \nError: Invalid X509 ASN.1 file (Unsupported digest)\ninvalid digest: 2a 86 48 ce 3d 04 03 03 \nError: Invalid X509 ASN.1 file (Unsupported digest)\ninvalid digest: 2a 86 48 ce 3d 04 03 03 \nError: Invalid X509 ASN.1 file (Unsupported digest)\ninvalid digest: 2a 86 48 ce 3d 04 03 03 \nError: Invalid X509 ASN.1 file (Unsupported digest)\ninvalid digest: 2a 86 48 ce 3d 04 03 03 \nError: Invalid X509 ASN.1 file (Unsupported digest)\ninvalid digest: 2a 86 48 ce 3d 04 03 03 \nError: Invalid X509 ASN.1 file (Unsupported digest)\nError: maximum number of CA certs added (150) - change of compile-time configuration required\nError: maximum number of CA certs added (150) - change of compile-time configuration required\nError: maximum number of CA certs added (150) - change of compile-time configuration required\nError: maximum number of CA certs added (150) - change of compile-time configuration required\nError: maximum number of CA certs added (150) - change of compile-time configuration required\nError: maximum number of CA certs added (150) - change of compile-time configuration required\nError: maximum number of CA certs added (150) - change of compile-time configuration required\nError: maximum number of CA certs added (150) - change of compile-time configuration required\nError: maximum number of CA certs added (150) - change of compile-time configuration required\nError: maximum number of CA certs added (150) - change of compile-time configuration required\nError: maximum number of CA certs added (150) - change of compile-time configuration required\nError: maximum number of CA certs added (150) - change of compile-time configuration required\nError: maximum number of CA certs added (150) - change of compile-time configuration required\nError: maximum number of CA certs added (150) - change of compile-time configuration required\nError: maximum number of CA certs added (150) - change of compile-time configuration required\nError: maximum number of CA certs added (150) - change of compile-time configuration required\n</code></pre>\n\n<p>And to initialize Curl's options i used the following code:</p>\n\n<pre><code>curl_easy_setopt(curl_handle, CURLOPT_URL, MyURL);\ncurl_easy_setopt(curl_handle, CURLOPT_SSL_VERIFYPEER, 0L);\ncurl_easy_setopt(curl_handle, CURLOPT_SSL_VERIFYHOST, 0L);\ncurl_easy_setopt(curl_handle, CURLOPT_WRITEDATA, MyLocalFile);\ncurl_easy_setopt(curl_handle, CURLOPT_USERAGENT, \"MyAgent\");\ncurl_easy_perform(curl_handle);\n</code></pre>\n\n<p>It's non-blocking error, but my soft take long time to begin downloading. But when i make CONFIG_SSL_GENERATE_X509_CERT=y the error become blocking.<br>\nSo  how can i fix this error?</p>\n\n<p>Best regards,</p>\n"}, {"tags": ["c", "memory", "trace", "heap-memory"], "comments": [{"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1453906127, "post_id": 35040467, "comment_id": 57805309, "body": "Could valgrind help you?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1453906239, "post_id": 35040467, "comment_id": 57805407, "body": "Please provide a link to the specification of that &quot;C/C++&quot; language. until then there are only the two <b>different</b> languages C and C++. This is not C++. There are like different solutions for your problem in both languages."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1453906341, "post_id": 35040467, "comment_id": 57805491, "body": "@Angew: I don&#39;t think Valgrind will monitor <b>every</b> access."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1453906564, "post_id": 35040467, "comment_id": 57805656, "body": "Please <b>give your motivations</b> so <b>edit your question</b> to improve it a big lot."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1453906953, "post_id": 35040467, "comment_id": 57805944, "body": "Do you care about one particular program (which one?) or are you ambitious enough to seek a more generic solution? Then why do you ask?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1453916013, "post_id": 35040467, "comment_id": 57812536, "body": "Question is &quot;by a C/C++ program&quot;.  Post says &quot;program written in C++&quot; and post is tagged <code>C</code>.  So it is unclear what language an answer should use."}, {"owner": {"reputation": 157, "user_id": 5763311, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KAdnko7B21E/AAAAAAAAAAI/AAAAAAAAABI/5CSvOdoptto/photo.jpg?sz=128", "display_name": "Florin Avram", "link": "https://stackoverflow.com/users/5763311/florin-avram"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1454059223, "post_id": 35040467, "comment_id": 57883714, "body": "@BasileStarynkevitch For the moment I am trying to monitor the functions that read/write a chunk of memory, so I can understand better what happens with that data inside a function (maybe one function just read from memory, other may only write to memory, or both)."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1454059637, "post_id": 35040467, "comment_id": 57883968, "body": "@FlorinAvram: if you are struggling with one particular software, you just need GDB watchpoints &amp; <code>valgrind</code>"}, {"owner": {"reputation": 157, "user_id": 5763311, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KAdnko7B21E/AAAAAAAAAAI/AAAAAAAAABI/5CSvOdoptto/photo.jpg?sz=128", "display_name": "Florin Avram", "link": "https://stackoverflow.com/users/5763311/florin-avram"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1454086177, "post_id": 35040467, "comment_id": 57901475, "body": "@BasileStarynkevitch What I trying to do is similar with what GDB does, but I just want to log access made to a memory zone, applying different test cases to it and then analyze the logs to observe some patterns. That is the main reason why I need those log files."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1454086263, "post_id": 35040467, "comment_id": 57901528, "body": "But <b>why do you need this?</b>, how generic do you want the solution to be, do you accept it to be <i>very</i> slow,  and how many many years can you invest in implementing it ? What is the software on which you want such instrumentation? Are you willing to spend a dozen of years of work? So please <b>edit your question</b> (or ask a much more focused one, explaining much more and giving a lot of details and of source code)"}, {"owner": {"reputation": 157, "user_id": 5763311, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KAdnko7B21E/AAAAAAAAAAI/AAAAAAAAABI/5CSvOdoptto/photo.jpg?sz=128", "display_name": "Florin Avram", "link": "https://stackoverflow.com/users/5763311/florin-avram"}, "edited": false, "score": 0, "creation_date": 1454086719, "post_id": 35040467, "comment_id": 57901857, "body": "1. How generic do you want the solution to be? I want to create a simple API, that let&#39;s me modify the source code of a program, recompile it, run a suite of test cases and the have the logs for a chunk of memory that I have selected. For example, if in my source code I will have something like char* buff = malloc(100), free(buff). I want to add a piece of code after malloc that will start monitoring this memory, and one before free, to unmonitor the memory."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1454093901, "post_id": 35040467, "comment_id": 57905854, "body": "That should go in your question, not in comments. And do you want some generic solution, or simply something for one particular program? I guess using GCC MELT should fit quite well. But your goals are quite ambitious, even if you limit them to your above example."}], "answers": [{"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 2, "last_activity_date": 1454094015, "last_edit_date": 1495540343, "creation_date": 1453906320, "answer_id": 35040562, "question_id": 35040467, "link": "https://stackoverflow.com/questions/35040467/detect-every-memory-accesses-made-by-a-c-c-program/35040562#35040562", "title": "Detect every memory accesses made by a C/C++ program", "body": "<p><sup>(I am focusing on Linux)</sup></p>\n\n<p>What you want to do will be <em>very slow</em> and need <em>unportable code</em> if done naively. I am supposing that you want a generic solution (working on many C++ programs, not on some particular one).</p>\n\n<p>You could patch some emulator, \u00e0 la Qemu.</p>\n\n<p>Maybe you just want to use <a href=\"http://valgrind.org/\" rel=\"nofollow noreferrer\">valgrind</a> or <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Debugging-Options.html\" rel=\"nofollow noreferrer\">GCC debugging options</a> like address sanitizer (search for <code>-fsanitize=address</code>). Or use <strong><code>gdb</code> watchpoints</strong>. Notice that recent GDB are scriptable in Python or Guile.</p>\n\n<p>Maybe you could take inspiration from <code>valgrind</code>tricks.</p>\n\n<p>Look also into <a href=\"http://man7.org/linux/man-pages/man2/ptrace.2.html\" rel=\"nofollow noreferrer\">ptrace(2)</a></p>\n\n<p>If you don't want disastrous performance (that is, naively interpreting each machine instruction and/or handling a SIGSEGV for every memory access, see <a href=\"https://stackoverflow.com/a/21204438/841108\">this</a> for more) you need to be tricky.</p>\n\n<p>You could consider customizing the GCC compiler (e.g. with <a href=\"http://gcc-melt.org/\" rel=\"nofollow noreferrer\">MELT</a>) so that some (relevant) loads &amp; stores get instrumented inside the compiler.</p>\n\n<p>If you take a naive approach (sort of interpreting every machine instruction and/or crude SIGSEGV handling), you'll probably slow your program by more than a factor of thousand, and that \"semi-naive\" approach still needs months of work. And you'll encounter <a href=\"https://en.wikipedia.org/wiki/Heisenbug\" rel=\"nofollow noreferrer\">Heisenbugs</a>.</p>\n\n<p>If you want a serious approach, you'll need to modify your <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a> compiler (e.g. with <a href=\"http://gcc-melt.org/\" rel=\"nofollow noreferrer\">MELT</a>) so that some instrumentation code is <em>additionally</em> emitted by the compiler, recompile the program to be instrumented (and all the libraries it is using) and that could probably take you at least a year (unless you are already fluent with GCC internals).</p>\n\n<p>If you are serious, study more computer science (<a href=\"https://en.wikipedia.org/wiki/Computer_architecture\" rel=\"nofollow noreferrer\">computer architecture</a>, <a href=\"https://en.wikipedia.org/wiki/Operating_system\" rel=\"nofollow noreferrer\">operating systems</a>, <a href=\"https://en.wikipedia.org/wiki/Compiler\" rel=\"nofollow noreferrer\">compilers</a>), and make your PhD working on that. You'll need several years of hard work.</p>\n"}], "owner": {"reputation": 157, "user_id": 5763311, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KAdnko7B21E/AAAAAAAAAAI/AAAAAAAAABI/5CSvOdoptto/photo.jpg?sz=128", "display_name": "Florin Avram", "link": "https://stackoverflow.com/users/5763311/florin-avram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1051, "favorite_count": 0, "closed_date": 1453916048, "answer_count": 1, "score": -1, "last_activity_date": 1454094015, "creation_date": 1453906048, "last_edit_date": 1454058853, "question_id": 35040467, "link": "https://stackoverflow.com/questions/35040467/detect-every-memory-accesses-made-by-a-c-c-program", "closed_reason": "Needs more focus", "title": "Detect every memory accesses made by a C/C++ program", "body": "<p>I am trying to detect every access programs written in C/C++ is making while running, in particular to dynamically allocated memory. In addition, I would like to have some information about where the access was made. The function name that made the access is what I am looking for.</p>\n\n<p>For example, for the following code:\n</p>\n\n<pre><code>void MemoryAccess(int* my_vector) {\n    int x = my_vector[0]; // Read access from 0xFFFF0000.\n    my_vector[0] = x + 1; // Write access to 0XFFFF0000.\n}\n\nint main(void) {\n    // Assume that the address returned by malloc is 0xFFFF0000.\n    int* vec = malloc(VEC_SIZE * sizeof(int));\n    if (!vec) {\n        return MEMORY_ALLOCATION_FAIL;\n    }\n    MemoryAccess(vec);\n\n    int second_elem = vec[1]; // Read access from 0xFFFF0004.\n    v[1] = 10; // Write access to 0xFFFF0004.\n\n    return 0;\n}\n</code></pre>\n\n<p>I would like to record a log file, containing the following: address that have been accessed, the function name that made the access. For the above example, my log should look something like:</p>\n\n<pre><code>{Read}  {MemoryAccess} {0xFFFF0000}\n{Write} {MemoryAccess} {0xFFFF0000}\n{Read}  {main}         {0xFFFF0004}\n{Write} {main}         {0xFFFF0004}\n</code></pre>\n\n<p>I have been able to do something like this on Windows using Exception Filter and modify the page protection of the monitored memory block. I couldn't get the function name that made the access, only Instruction Pointer value when the exception was raised and I couldn't figure how to use that to get the function name.</p>\n\n<p>Note: My goal is to monitor memory access on a Linux based system (Debian/Ubuntu mostly), not Windows.</p>\n"}, {"tags": ["c", "rabbitmq", "rabbitmqctl", "rabbitmq-c"], "answers": [{"comments": [{"owner": {"reputation": 138, "user_id": 2591836, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001533352387/picture?type=large", "display_name": "Xavier Bourvellec", "link": "https://stackoverflow.com/users/2591836/xavier-bourvellec"}, "edited": false, "score": 0, "creation_date": 1453970784, "post_id": 35044922, "comment_id": 57836547, "body": "Don&#39;t you mean &quot; <i>... and it&#39;s</i> not <i>something rabbitmq-c supports ...</i> &quot; ?  And many thanks for your answer and hints"}, {"owner": {"reputation": 11066, "user_id": 1461984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fd6ae6b70c8a0b9eab9cab7136cd3b7?s=128&d=identicon&r=PG", "display_name": "pinepain", "link": "https://stackoverflow.com/users/1461984/pinepain"}, "reply_to_user": {"reputation": 138, "user_id": 2591836, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001533352387/picture?type=large", "display_name": "Xavier Bourvellec", "link": "https://stackoverflow.com/users/2591836/xavier-bourvellec"}, "edited": false, "score": 0, "creation_date": 1453979881, "post_id": 35044922, "comment_id": 57842803, "body": "Sure, <i>it&#39;s NOT something that rabbitmq-c supports</i>. You are welcome."}], "tags": [], "owner": {"reputation": 11066, "user_id": 1461984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fd6ae6b70c8a0b9eab9cab7136cd3b7?s=128&d=identicon&r=PG", "display_name": "pinepain", "link": "https://stackoverflow.com/users/1461984/pinepain"}, "is_accepted": true, "score": 1, "last_activity_date": 1453979819, "last_edit_date": 1453979819, "creation_date": 1453918257, "answer_id": 35044922, "question_id": 35040022, "link": "https://stackoverflow.com/questions/35040022/rabbitmq-c-api-emulating-rabbitmqctl-cluster-status-n-rabbitremote-hostnam/35044922#35044922", "title": "RabbitMq C API : emulating &quot;rabbitmqctl cluster_status -n rabbit@&lt;remote hostname&gt;&quot; from C API", "body": "<p>Getting RabbitMQ cluster status is not something from AMQP standard and it's not something that <code>rabbitmq-c</code> supports, at least at this time. There is <a href=\"http://www.rabbitmq.com/management.html\" rel=\"nofollow\">Management Plugin</a> that provides RabbitMQ HTTP API, which is the closest thing you want. </p>\n\n<p>Have a look on <a href=\"https://github.com/ruby-amqp/rabbitmq_http_api_client\" rel=\"nofollow\"> RabbitMQ HTTP API client for Ruby </a> readme file, which covers getting cluster status from HTTP API.</p>\n"}], "owner": {"reputation": 138, "user_id": 2591836, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001533352387/picture?type=large", "display_name": "Xavier Bourvellec", "link": "https://stackoverflow.com/users/2591836/xavier-bourvellec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "accepted_answer_id": 35044922, "answer_count": 1, "score": 1, "last_activity_date": 1453981050, "creation_date": 1453904876, "last_edit_date": 1453981050, "question_id": 35040022, "link": "https://stackoverflow.com/questions/35040022/rabbitmq-c-api-emulating-rabbitmqctl-cluster-status-n-rabbitremote-hostnam", "title": "RabbitMq C API : emulating &quot;rabbitmqctl cluster_status -n rabbit@&lt;remote hostname&gt;&quot; from C API", "body": "<p>I'm trying to get the list of nodes in a cluster using only the C API.</p>\n\n<p>More or less what the following shell command returns, but from C API</p>\n\n<pre><code>rabbitmqctl cluster_status -n rabbit@&lt;remote hostname&gt;\n</code></pre>\n\n<p>I'd like to avoid calling <code>rabbitmqctl</code> from the C with <code>system()</code> or <code>popoen()</code> or whatever as I want to avoid having a dependency on the rabbitmq server package on the client side.</p>\n\n<p>Any hint ?</p>\n"}, {"tags": ["c", "gcc", "compiler-optimization"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 3, "creation_date": 1453904486, "post_id": 35039834, "comment_id": 57804019, "body": "Not using this you shall, young padawan. Your compiler to trust to warn you should."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1453905082, "post_id": 35039834, "comment_id": 57804499, "body": "Apart from definitively flagging accidental assignment, (as posted by iharob), it makes debugging easier, especially of another&#39;s code), by, usually, moving the conditional operator nearer to the start of the line, especially when testing the return value of function calls with many parameters.  Who wants to scroll all the way to the RHS of a line to find out what the condition is?"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1453905386, "post_id": 35039834, "comment_id": 57804722, "body": "Example; &#39;if(WAIT_TIMEOUT==WaitForMultipleObjectsEx(drone,drone,gunge&zwnj;&#8203;,buzz,thingy,stuff..&zwnj;&#8203;....................&zwnj;&#8203;....................&zwnj;&#8203;....................&zwnj;&#8203;....) CreateThread(gunge, gunge, gunge, gunge, gunge, gunge);&#39; if you are debugging the &#39;doesn&#39;t time out&#39; path, the yoda means you can skip all the crap without scrolling to the end."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1453905576, "post_id": 35039834, "comment_id": 57804881, "body": "@Lundin: Wile the dup included the same subject, maybe that one is more appropriate: <a href=\"http://stackoverflow.com/questions/148298/how-to-check-for-equals-0-i-or-i-0\" title=\"how to check for equals 0 i or i 0\">stackoverflow.com/questions/148298/&hellip;</a>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1453905595, "post_id": 35039834, "comment_id": 57804896, "body": "@MartinJames How about <code>DWORD result = WaitForYadaYada ... ; if(result == WAIT_TIMEOUT)</code>? Too readable? :)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1453905742, "post_id": 35039834, "comment_id": 57805020, "body": "@Olaf Generally it isn&#39;t a good idea to use closed questions as duplicates, because if they are indeed a duplicate it probably means that this question too should be closed. That being said, I think it is a fair question and not opinion-based since one occasionally encounters obfuscated code like this when maintaining old crap."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1453905781, "post_id": 35039834, "comment_id": 57805046, "body": "@Lundin lol, sure, I&#39;m often arguing that temp vars should be used more to improve debugging, so I guess I cannot argue too much over that one:)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1453906029, "post_id": 35039834, "comment_id": 57805239, "body": "@Lundin: Not sure. The linked question has correct answers, which shows the subject has been handled already. It would be better to reopen that one and close this as dup."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1453906036, "post_id": 35039834, "comment_id": 57805243, "body": "@MartinJames Indeed, it will yield the very same machine code anyhow. Any compiler will optimize away that temp variable."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1453906111, "post_id": 35039834, "comment_id": 57805290, "body": "@MartinJames: Things become complicated with MSRA &amp; other styleguides which disallow mixing statements and declarations."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1453906187, "post_id": 35039834, "comment_id": 57805363, "body": "@Olaf Perhaps, although there&#39;s the C++ tag, and nothing is easy in C++... there&#39;s operator overloading and also C++ has a sane type system for equality operators, they evaluate to booleans rather than int. So I think C and C++ answers may be different here. Anyway, I&#39;ve posted an answer here now, so I&#39;m probably partial :)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1453906482, "post_id": 35039834, "comment_id": 57805587, "body": "@Lundin: That question is tagged both. Anyway, I think the simple answer &quot;do not!&quot; applies to both (you know I&#39;m very careful when it comes to &quot;C/C++&quot;)."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1453906501, "post_id": 35039834, "comment_id": 57805608, "body": "If I could go back in time to Bell Labs around, oh, 1970, I&#39;d slap dmr silly for not making the assignment operator completely distinct from the equality operator (something like <code>:=</code> or similar).  Then this entire class of bugs would never have existed."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1453906518, "post_id": 35039834, "comment_id": 57805622, "body": "&quot;decreases the readability&quot; or not is more often about how the block/function looks.  Assessing style of a single line of code <code>if ( 10 == val) {}</code> without showing its context prevents a quality assessment of its readability."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "reply_to_user": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1453906588, "post_id": 35039834, "comment_id": 57805672, "body": "@JohnBode I use Delphi, (Pascal), C++ and C.  Imagine how often I get assignments/compares wrong:("}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 1, "creation_date": 1453906608, "post_id": 35039834, "comment_id": 57805687, "body": "@JohnBode: Just tell me once you completed the time-machine. I&#39;d also like to have a serious talk with some people. One with Wirth for being too dogmatic, thus burdening us now with those C legacies."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1453911655, "post_id": 35039834, "comment_id": 57809506, "body": "We completed the time machine long ago. Here&#39;s from the crucial part of the firmware: <code>setjmp(today); if(C = !good) { longjmp(the_past, 1972); slap(dennis.ritchie); longjmp(today, 2016); }</code> Didn&#39;t work however :( And the person who wrote the original code forgot to use braces after <code>if</code> and we haven&#39;t seen him since."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 3588704, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/07155a9a2fcbb666afb53bcc10a8c372?s=128&d=identicon&r=PG&f=1", "display_name": "PascalDeLyon", "link": "https://stackoverflow.com/users/3588704/pascaldelyon"}, "edited": false, "score": 0, "creation_date": 1453905799, "post_id": 35039848, "comment_id": 57805062, "body": "Many thanks for these explanations."}, {"owner": {"reputation": 7964, "user_id": 1072468, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cb56d2bf7341a5092975ce5c7af50b6e?s=128&d=identicon&r=PG", "display_name": "Nicu Stiurca", "link": "https://stackoverflow.com/users/1072468/nicu-stiurca"}, "edited": false, "score": 0, "creation_date": 1453905880, "post_id": 35039848, "comment_id": 57805122, "body": "<code>Since compilers can warn, and when you have experience this is a very uncommon mistake I would advice against this. Because it&#39;s difficult to read it and it doesn&#39;t feel natural. So be careful and use normal conditions</code> I happen to think Yoda Conditions are a great thing, and it has saved me a few times despite &quot;being careful&quot;. I also think the &quot;doesn&#39;t feel natural&quot; argument against this is extremely weak. I think your answer would be better without pushing your opinions since the question wasn&#39;t &quot;is this a good idea&quot;, or at least offering an unbiased view of the mild controversy. /flame"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 7964, "user_id": 1072468, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cb56d2bf7341a5092975ce5c7af50b6e?s=128&d=identicon&r=PG", "display_name": "Nicu Stiurca", "link": "https://stackoverflow.com/users/1072468/nicu-stiurca"}, "edited": false, "score": 0, "creation_date": 1453905972, "post_id": 35039848, "comment_id": 57805195, "body": "@SchighSchagh I think most good programmers think Yoda Conditions are bad. And if I see them in someone elses code I immediately close the text editor and stop reading. It is a matter of preference but I am just that way, crazy ... So if you think you should please downvote the answer."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 7964, "user_id": 1072468, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cb56d2bf7341a5092975ce5c7af50b6e?s=128&d=identicon&r=PG", "display_name": "Nicu Stiurca", "link": "https://stackoverflow.com/users/1072468/nicu-stiurca"}, "edited": false, "score": 0, "creation_date": 1453906729, "post_id": 35039848, "comment_id": 57805779, "body": "@SchighSchagh: Just ask some people on the street for similar natural language sentences. Harder to understand these are definitively."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1453906805, "post_id": 35039848, "comment_id": 57805858, "body": "I use yodas frequently.  I find them actually clearer than many &#39;conventional&#39; conditionals and I don&#39;t have any problem with finding them in other devs. code."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1453907231, "post_id": 35039848, "comment_id": 57806161, "body": "@MartinJames Like I said, a matter of preference. Some have good taste some others don&#39;t. Not trying to be offensive, it&#39;s an opinion and it&#39;s perfect to consider it wrong. About closing the text editor. Yesterday my partner sent something to install on a web server and I hated it so much that I wanted to kick my screen. And I rejected it of course, I know that it&#39;s not a natural thing or normal behavior but I can&#39;t help it."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 5, "last_activity_date": 1453904760, "last_edit_date": 1495540756, "creation_date": 1453904404, "answer_id": 35039848, "question_id": 35039834, "link": "https://stackoverflow.com/questions/35039834/in-c-in-the-if-statement-why-invert-the-constant-of-test-and-the-variable-e/35039848#35039848", "title": "In C, in the &#39;if&#39; statement, why invert the constant of test and the variable, e.g. if (10 == val) {}?", "body": "<p>It doesn't have to do with optimization, it's a trick used to avoid accidental assignment and it's called <a href=\"https://en.wikipedia.org/wiki/Yoda_conditions\" rel=\"nofollow noreferrer\">Yoda Convention or Yoda Conditions</a>. It prevents accidental assignment because</p>\n\n<pre><code>if (value = 10)\n</code></pre>\n\n<p>would compile and would assign 10 to <code>value</code> which is not what you want if you meant <code>if (value == 10)</code> (<em>although some compilers can warn about this and suggest extra parentheses to avoid the ambiguity</em>), this</p>\n\n<pre><code>if (10 = value)\n</code></pre>\n\n<p>would not.</p>\n\n<p>Since compilers can warn, and when you have experience this is a very uncommon mistake I would advice against this. Because it's difficult to read it and it doesn't feel natural. So be careful and use normal conditions like</p>\n\n<pre><code>if (value == 10)\n</code></pre>\n\n<p>and to be safe, enable warnings in your compiler to prevent the accidental assignment. See this is equivalent to talking like Yoda, <a href=\"https://stackoverflow.com/questions/35039834/in-c-in-the-if-statement-why-invert-the-constant-of-test-and-the-variable-e/35039848#comment57804019_35039834\">like in this comment</a> and you can see why in the natural language this is uncomfortable, it is too in the code.</p>\n"}, {"comments": [{"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 0, "creation_date": 1453905575, "post_id": 35040223, "comment_id": 57804879, "body": "I&#39;m getting this feeling more and more that pascal did more damage to the programing community rather to improve it.."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1453905628, "post_id": 35040223, "comment_id": 57804923, "body": "Assignment in pascal is done with the <code>:=</code> operator so it was ok."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "reply_to_user": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 2, "creation_date": 1453905650, "post_id": 35040223, "comment_id": 57804940, "body": "@DavidHaim You mean the language with such strong typing that most of the C and many of the C++ SO posts would just not happen?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 0, "creation_date": 1453905787, "post_id": 35040223, "comment_id": 57805052, "body": "@DavidHaim: In the Wirth-Languages, operators intentionally had no side-effects. And assignments were statements, not operators anyway. Try <code>if 1 := 1 then ...</code> in Pascal, etc."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1453905866, "post_id": 35040223, "comment_id": 57805112, "body": "Feeling old you make me. &quot;Dinosaurs&quot; ... tsk"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 0, "creation_date": 1453905924, "post_id": 35040223, "comment_id": 57805155, "body": "@DavidHaim It is C that&#39;s responsible for most of the damage, really. In school they taught me that <code>1 + 1 = 2</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1453906994, "post_id": 35040223, "comment_id": 57805988, "body": "@Lundin: This because human brains are not good at stacking information. This is also one reason Yoda conditions are harder to understand. The other is the grammar of (western - CMIIW, I&#39;m not a linguist) languages, which normally is subject-predicate-object."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 2, "last_activity_date": 1453905448, "creation_date": 1453905448, "answer_id": 35040223, "question_id": 35039834, "link": "https://stackoverflow.com/questions/35039834/in-c-in-the-if-statement-why-invert-the-constant-of-test-and-the-variable-e/35040223#35040223", "title": "In C, in the &#39;if&#39; statement, why invert the constant of test and the variable, e.g. if (10 == val) {}?", "body": "<p>The original, historical reason is fear for the ancient, classic bug where you would mix up the = and == operators. </p>\n\n<p>When dinosaurs walked the earth and C was a new language, programmers coming from other languages, most notably Pascal, were particularly prone to write this bug. Because in Pascal, comparison is done by <code>=</code> rather than <code>==</code>.</p>\n\n<p>To avoid that bug, some of the more confused dinosaurs therefore invented this particular coding style. Because <code>if(10 = val)</code> will not compile. This trick was informally known as the \"Yoda conditions\", after a Star Wars character who uses backwards, obfuscated language grammar.</p>\n\n<p>Then around 1989, Borland came up with a smart solution to the problem: instead of having programmers make their programs unreadable, let's make a compiler warning for possibly incorrect assignment inside conditions! This was the end of the \"Yoda conditions\" and every half-decent compiler released since Turbo C has supported a warning for such accidental assignments.</p>\n\n<p>If you encounter someone today, who still thinks this trick is smart, you therefore know that they are either a living dinosaur, or possibly Yoda, the jedi master. In either case you should probably not take any C programming advise from them. But you could ask them why they insist on using a compiler which is worse than Turbo C from 1989.</p>\n"}], "owner": {"reputation": 43, "user_id": 3588704, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/07155a9a2fcbb666afb53bcc10a8c372?s=128&d=identicon&r=PG&f=1", "display_name": "PascalDeLyon", "link": "https://stackoverflow.com/users/3588704/pascaldelyon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "closed_date": 1453920007, "answer_count": 2, "score": -1, "last_activity_date": 1453905448, "creation_date": 1453904362, "last_edit_date": 1453904373, "question_id": 35039834, "link": "https://stackoverflow.com/questions/35039834/in-c-in-the-if-statement-why-invert-the-constant-of-test-and-the-variable-e", "closed_reason": "Needs details or clarity", "title": "In C, in the &#39;if&#39; statement, why invert the constant of test and the variable, e.g. if (10 == val) {}?", "body": "<p>In C, for the if statement, sometime we can see that the test 'value is placed before the variable to test, this probably brings some optimization (GCC compiler), but which one ? (but this decreases the readability I think).</p>\n\n<p>Example:</p>\n\n<pre><code>if ( 10 == val) {}\n</code></pre>\n\n<p>Thanks,</p>\n"}, {"tags": ["c", "arrays", "string", "loops"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1453903761, "post_id": 35039424, "comment_id": 57803431, "body": "This code doesn&#39;t make any sense. Why do you need to make a copy of the sub string in the first place?"}, {"owner": {"reputation": 2414, "user_id": 5339529, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/4ecd2b15539f40fea4bbb59864ad9fc0?s=128&d=identicon&r=PG&f=1", "display_name": "ForeverStudent", "link": "https://stackoverflow.com/users/5339529/foreverstudent"}, "edited": false, "score": 0, "creation_date": 1453904130, "post_id": 35039424, "comment_id": 57803729, "body": "use fgets instead of gets unless there is a very good reason."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1453905017, "post_id": 35039424, "comment_id": 57804439, "body": "Use a debugger or at least print the data you check."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 2414, "user_id": 5339529, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/4ecd2b15539f40fea4bbb59864ad9fc0?s=128&d=identicon&r=PG&f=1", "display_name": "ForeverStudent", "link": "https://stackoverflow.com/users/5339529/foreverstudent"}, "edited": false, "score": 0, "creation_date": 1453905075, "post_id": 35039424, "comment_id": 57804493, "body": "@ForeverStudent: Which reason would rectify to use an unsafe function with not more features?"}, {"owner": {"reputation": 2414, "user_id": 5339529, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/4ecd2b15539f40fea4bbb59864ad9fc0?s=128&d=identicon&r=PG&f=1", "display_name": "ForeverStudent", "link": "https://stackoverflow.com/users/5339529/foreverstudent"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1453907703, "post_id": 35039424, "comment_id": 57806519, "body": "@Olaf: stupid ones we all heard before: fgets not allowed by assignment, fgets not supported by our custom compiler/runtime, etc"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 2414, "user_id": 5339529, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/4ecd2b15539f40fea4bbb59864ad9fc0?s=128&d=identicon&r=PG&f=1", "display_name": "ForeverStudent", "link": "https://stackoverflow.com/users/5339529/foreverstudent"}, "edited": false, "score": 0, "creation_date": 1453908075, "post_id": 35039424, "comment_id": 57806810, "body": "@ForeverStudent: <code>fgets</code> is C standard, <code>gets</code> is <b>not</b>. Without specific details, we have to assume standard C, which is C11 (C99 is most times acceptable, too). Call me strict, but any of those &quot;reasons&quot; you gave are even beyond &quot;stupid&quot;. As I just had a question about Yoda conditions, I tend to call them Jaja-reasons."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1453915870, "post_id": 35039596, "comment_id": 57812450, "body": "Note: As the compare will not exceed the length of the strings, code code use <code>memcmp(&amp;str[i], sub, ...)</code>   Likely faster with long strings  YMMV."}, {"owner": {"reputation": 29, "user_id": 5654034, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-97_NqqCjl8o/AAAAAAAAAAI/AAAAAAAABJE/q72NqKS4RI4/photo.jpg?sz=128", "display_name": "Rahul Mayuranath", "link": "https://stackoverflow.com/users/5654034/rahul-mayuranath"}, "edited": false, "score": 0, "creation_date": 1454004670, "post_id": 35039596, "comment_id": 57860685, "body": "That was very helpful for a beginner like me man. Thank you !"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 29, "user_id": 5654034, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-97_NqqCjl8o/AAAAAAAAAAI/AAAAAAAABJE/q72NqKS4RI4/photo.jpg?sz=128", "display_name": "Rahul Mayuranath", "link": "https://stackoverflow.com/users/5654034/rahul-mayuranath"}, "edited": false, "score": 0, "creation_date": 1454004771, "post_id": 35039596, "comment_id": 57860750, "body": "@RahulMayuranath Glad I could help.  Feel free to <a href=\"http://stackoverflow.com/help/accepted-answer\">accept this answer</a> if you found it useful."}, {"owner": {"reputation": 29, "user_id": 5654034, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-97_NqqCjl8o/AAAAAAAAAAI/AAAAAAAABJE/q72NqKS4RI4/photo.jpg?sz=128", "display_name": "Rahul Mayuranath", "link": "https://stackoverflow.com/users/5654034/rahul-mayuranath"}, "edited": false, "score": 0, "creation_date": 1454005165, "post_id": 35039596, "comment_id": 57860979, "body": "After making the above changes( using fgets instead of gets and adding a terimal null byte) I am now getting an output digit in excess of 30000 for every test case. What is happening ?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 29, "user_id": 5654034, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-97_NqqCjl8o/AAAAAAAAAAI/AAAAAAAABJE/q72NqKS4RI4/photo.jpg?sz=128", "display_name": "Rahul Mayuranath", "link": "https://stackoverflow.com/users/5654034/rahul-mayuranath"}, "edited": false, "score": 0, "creation_date": 1454005371, "post_id": 35039596, "comment_id": 57861099, "body": "@RahulMayuranath We would need to see the code.  Please post that as a separate question."}, {"owner": {"reputation": 29, "user_id": 5654034, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-97_NqqCjl8o/AAAAAAAAAAI/AAAAAAAABJE/q72NqKS4RI4/photo.jpg?sz=128", "display_name": "Rahul Mayuranath", "link": "https://stackoverflow.com/users/5654034/rahul-mayuranath"}, "edited": false, "score": 0, "creation_date": 1454006436, "post_id": 35039596, "comment_id": 57861769, "body": "@dbush <a href=\"http://stackoverflow.com/questions/35069399/find-number-of-sub-strings-in-a-string\">link</a> **I posted it as a separate question. **"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 2, "last_activity_date": 1453904120, "last_edit_date": 1453904120, "creation_date": 1453903704, "answer_id": 35039596, "question_id": 35039424, "link": "https://stackoverflow.com/questions/35039424/issue-finding-number-of-occurrences-of-a-given-substring-in-a-string/35039596#35039596", "title": "Issue finding number of occurrences of a given substring in a string", "body": "<p>As mentioned in the comments, when constructing <code>comp</code>, you're not adding a terminating null byte at the end.  Because the rest of <code>comp</code> is not initialized, you invoke undefined behavior when calling <code>strcmp</code>.</p>\n\n<p>Add the null byte at the end of the inner <code>for</code> loop will fix the problem:</p>\n\n<pre><code>     for ( j=i,k=0 ; j&lt;num ; j++, k++ )\n     //Loop to store each sub string in an array comp.\n       {\n         comp[k]=str[j] ;\n       }\n     comp[k] = '\\0';\n</code></pre>\n\n<p>Actually, rather than creating a separate substring, just use <code>strncmp</code>, which compares up to a certain number of characters:</p>\n\n<pre><code>for ( i=0 ; i &lt; strlen(str) - len ; i++ ) \n//Goes till length of string - length of sub string so that all characters can be compared.\n  {  \n     if ( strncmp(&amp;str[i],sub,strlen(sub)) == 0 )\n        { count++ ; }\n }\n</code></pre>\n\n<p>Also, don't use <code>gets</code>, as that is prone to buffer overflows.  Use <code>fgets</code> instead.</p>\n"}, {"tags": [], "owner": {"reputation": 786, "user_id": 5022365, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ec8cb396d26f840b7b772382d8e3ff70?s=128&d=identicon&r=PG&f=1", "display_name": "Sagar Patel", "link": "https://stackoverflow.com/users/5022365/sagar-patel"}, "is_accepted": false, "score": 0, "last_activity_date": 1453987166, "creation_date": 1453987166, "answer_id": 35062654, "question_id": 35039424, "link": "https://stackoverflow.com/questions/35039424/issue-finding-number-of-occurrences-of-a-given-substring-in-a-string/35062654#35062654", "title": "Issue finding number of occurrences of a given substring in a string", "body": "<ul>\n<li><p>Try changing your for loop from this :</p>\n\n<pre><code>for ( i=0 ; i &lt; strlen(str) - len ; i++ ) \n</code></pre>\n\n<p>to</p>\n\n<pre><code>for ( i=0 ; i &lt;= strlen(str) - len ; i++ ) \n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 29, "user_id": 5654034, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-97_NqqCjl8o/AAAAAAAAAAI/AAAAAAAABJE/q72NqKS4RI4/photo.jpg?sz=128", "display_name": "Rahul Mayuranath", "link": "https://stackoverflow.com/users/5654034/rahul-mayuranath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1453987166, "creation_date": 1453903216, "last_edit_date": 1453904027, "question_id": 35039424, "link": "https://stackoverflow.com/questions/35039424/issue-finding-number-of-occurrences-of-a-given-substring-in-a-string", "title": "Issue finding number of occurrences of a given substring in a string", "body": "<p>The below code always returns number of matching sub strings as zero.There are no errors in the code and i am not sure where have i gone wrong logically. </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n\nint main()\n{ \n    int i,j,len ,k ,count, num ;\n    char str[100],sub[100],comp[100] ; \n    // sub is the sub string .\n    printf(\"Please enter the string\") ; \n    gets(str) ;\n    printf(\"Enter the substring to be searched for\") ;\n    gets(sub) ;\n    len=strlen(sub) ;\n    for ( i=0 ; i &lt; strlen(str) - len ; i++ ) \n    //Goes till length of string - length of sub string so that all characters can be compared.\n      {  \n         num = i + len ;\n         for ( j=i,k=0 ; j&lt;num ; j++, k++ )\n         //Loop to store each sub string in an array comp.\n           {\n             comp[k]=str[j] ;\n           }\n         if ( strcmp(comp,sub) == 0 )\n            { count++ ; }\n     }\n    printf(\"no of occurances is:%d\",count) ;\n    return 0 ;\n}  \n</code></pre>\n"}, {"tags": ["c", "matlab"], "comments": [{"owner": {"reputation": 4242, "user_id": 2903371, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b51033cda71617323ee74389bd6715a9?s=128&d=identicon&r=PG&f=1", "display_name": "patrik", "link": "https://stackoverflow.com/users/2903371/patrik"}, "edited": false, "score": 0, "creation_date": 1453904377, "post_id": 35039405, "comment_id": 57803930, "body": "Is the matrix positively definite? I am not sure if this causes a problem, or if this is handled, but this might be the source of the error. Try the function with a matrix you can be sure is positively definite and find out if the matrix causing the crash is."}, {"owner": {"reputation": 32443, "user_id": 1485872, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/9XWSA.png?s=128&g=1", "display_name": "Ander Biguri", "link": "https://stackoverflow.com/users/1485872/ander-biguri"}, "edited": false, "score": 0, "creation_date": 1453904916, "post_id": 35039405, "comment_id": 57804348, "body": "<code>dpotrs(&quot;U&quot;, &amp;n, &amp;m, mxGetPr(prhs[0]), &amp;n, C, &amp;n, &amp;q);</code> is this call rigth? The second argumetn is an integer, should it be just <code>n</code>? Why do you <code>C= mxGetPr(plhs[0]);</code> when later you memcopy <code>mxGetPr(prhs[1])</code>?"}, {"owner": {"reputation": 4242, "user_id": 2903371, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b51033cda71617323ee74389bd6715a9?s=128&d=identicon&r=PG&f=1", "display_name": "patrik", "link": "https://stackoverflow.com/users/2903371/patrik"}, "reply_to_user": {"reputation": 32443, "user_id": 1485872, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/9XWSA.png?s=128&g=1", "display_name": "Ander Biguri", "link": "https://stackoverflow.com/users/1485872/ander-biguri"}, "edited": false, "score": 0, "creation_date": 1453908741, "post_id": 35039405, "comment_id": 57807366, "body": "Looking at the code it seems as if @AnderBiguri is right. The call seems to take integers and not address of integers as input. The double arguments take arrays as argument which is about equivalent of taking a pointer. The reason you have integers n and m as input is for the function to know the length of the arrays. Further the first input should be a char and not a string (c-string == zero terminated array of chars). Further any reason you are using extern? Surely this function must be included in some header?"}, {"owner": {"reputation": 159, "user_id": 5847056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/03ad52bce623394780f5ea0b3dee4767?s=128&d=identicon&r=PG&f=1", "display_name": "oeb", "link": "https://stackoverflow.com/users/5847056/oeb"}, "edited": false, "score": 0, "creation_date": 1453910520, "post_id": 35039405, "comment_id": 57808689, "body": "<code>warning: passing argument 2 of &#39;dpotrs&#39; makes pointer from integer without a cast      dpotrs(&#39;U&#39;, n, m, mxGetPr(prhs[0]), n, C, n, q);   &#47;* solve system *&#47; </code> This is the warning I am getting when compiling the code without <code>&amp;</code>. I am getting that error for positiont 2, 3, 5, 7 and 8."}, {"owner": {"reputation": 4242, "user_id": 2903371, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b51033cda71617323ee74389bd6715a9?s=128&d=identicon&r=PG&f=1", "display_name": "patrik", "link": "https://stackoverflow.com/users/2903371/patrik"}, "edited": false, "score": 0, "creation_date": 1453910989, "post_id": 35039405, "comment_id": 57809031, "body": "@OliverEbrle As I said you have declared the function at the top of the compilation unit. There it is still declared as a pointer. You should probably make sure that the declaration is the same in all files. A compiler might find this bug but, but if you are unlucky it will miss it. You can try to edit the declaration and see if the warning disappear (and hope you will not get a linker error. In that case I would say you have a problem since this declaration then not match the function you are linked to)"}, {"owner": {"reputation": 8727, "user_id": 2999346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQ1wB.png?s=128&g=1", "display_name": "francis", "link": "https://stackoverflow.com/users/2999346/francis"}, "edited": false, "score": 0, "creation_date": 1453923867, "post_id": 35039405, "comment_id": 57817424, "body": "Could you add something like <code>if(plhs[0]==NULL){mexErrMsgTxt(&quot;allocation failed&quot;);}</code> after <code>plhs[0] = mxCreateDoubleMatrix(n, m, mxREAL);</code> ? This function can return NULL if memory allocation fails <a href=\"http://fr.mathworks.com/help/matlab/apiref/mxcreatedoublematrix.html\" rel=\"nofollow noreferrer\">fr.mathworks.com/help/matlab/apiref/mxcreatedoublematrix.htm&zwnj;&#8203;l</a> ."}, {"owner": {"reputation": 159, "user_id": 5847056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/03ad52bce623394780f5ea0b3dee4767?s=128&d=identicon&r=PG&f=1", "display_name": "oeb", "link": "https://stackoverflow.com/users/5847056/oeb"}, "edited": false, "score": 0, "creation_date": 1453982547, "post_id": 35039405, "comment_id": 57844542, "body": "Mh I discovered something weird, so the Code runs without problems an a 32 bit machine, but crashed on all 64 bit - there seems to be a memory problem somewhere? Anyone got an idea?"}], "owner": {"reputation": 159, "user_id": 5847056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/03ad52bce623394780f5ea0b3dee4767?s=128&d=identicon&r=PG&f=1", "display_name": "oeb", "link": "https://stackoverflow.com/users/5847056/oeb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 137, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1453903446, "creation_date": 1453903177, "last_edit_date": 1453903446, "question_id": 35039405, "link": "https://stackoverflow.com/questions/35039405/my-code-crashes-when-calling-my-solve-chol-function-using-the-lapack-library", "title": "My code crashes when calling my solve_chol() function using the lapack library", "body": "<pre><code>#include \"mex.h\"\n#include &lt;math.h&gt;\n#include &lt;string.h&gt;\n\nextern int dpotrs(char *, int *, int *, double *, int *, double *, int *, int *);\n\nvoid mexFunction(int nlhs, mxArray *plhs[], int nrhs, const mxArray *prhs[])\n{\n  double *C;\n  int n, m, q;\n\n  if (nrhs != 2 || nlhs &gt; 1)                              /* check the         input */\n    mexErrMsgTxt(\"Usage: X = solve_chol(R, B)\");\n\n  n = mxGetN(prhs[0]);\n\n  if (n != mxGetM(prhs[0]))\n    mexErrMsgTxt(\"Error: First argument matrix must be square\");\n\n  if (n != mxGetM(prhs[1]))\n    mexErrMsgTxt(\"Error: First and second argument matrices must have same     number of rows\");\n\n  m = mxGetN(prhs[1]);\n  plhs[0] = mxCreateDoubleMatrix(n, m, mxREAL); /* allocate space for output */\n  C = mxGetPr(plhs[0]);\n\n  if (n==0) return;              /* if argument was empty matrix, do no more */\n    memcpy(C,mxGetPr(prhs[1]),n*m*sizeof(double));   /* copy argument matrix */\n    dpotrs(\"U\", &amp;n, &amp;m, mxGetPr(prhs[0]), &amp;n, C, &amp;n, &amp;q);   /* solve system */\n\n  if (q &gt; 0)\n    mexErrMsgTxt(\"Error: illegal input to solve_chol\");\n}\n</code></pre>\n\n<p>Hello guys,</p>\n\n<p>I am having a problem with this C-code. It is supposed to solve A matrix system <code>(Ax = B)</code> with <code>A</code> being symmetric, positive definite and already in upper triangular form?</p>\n\n<p>I created this snippet to boost matlab performance, but unfortunately matlab crashes and some debugging showed that the problem is the call of <code>dpotrs()</code> towards the end of the script.\nCan you see what the problem might be? </p>\n\n<p>Information on <code>dpotrs()</code> can be found here: <a href=\"http://physics.oregonstate.edu/~rubin/nacphy/lapack/routines/dpotrs.html\" rel=\"nofollow\">http://physics.oregonstate.edu/~rubin/nacphy/lapack/routines/dpotrs.html</a></p>\n\n<p>Would be great if you could help</p>\n"}, {"tags": ["android", "c", "android-ndk", "shared-libraries", "ogg"], "answers": [{"tags": [], "owner": {"reputation": 52630, "user_id": 4596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1b1d983e092b649de25c520a40d325fc?s=128&d=identicon&r=PG", "display_name": "richq", "link": "https://stackoverflow.com/users/4596/richq"}, "is_accepted": false, "score": 1, "last_activity_date": 1474549147, "creation_date": 1474549147, "answer_id": 39639782, "question_id": 35039189, "link": "https://stackoverflow.com/questions/35039189/libogg-compiled-with-standalone-toolchain-generated-by-ndk-script-tries-to-loa/39639782#39639782", "title": "Libogg compiled with standalone toolchain (generated by NDK script) tries to load itself from incorrect file - libogg.so.0 instead of libogg.so", "body": "<p>My slightly less hacky fix for this is to remove the version information from the build system of libogg.</p>\n\n<p>In the directory where you have the libogg source code, open the file <code>src/Makefile.am</code> and change this line:</p>\n\n<pre><code>libogg_la_LDFLAGS = -no-undefined -version-info @LIB_CURRENT@:@LIB_REVISION@:@LIB_AGE@\n</code></pre>\n\n<p>to</p>\n\n<pre><code>libogg_la_LDFLAGS = -avoid-version\n</code></pre>\n\n<p>If you don't have automake installed then you can change the generated Makefile after running <code>./configure</code>. Find the <code>libogg_la_LDFLAGS</code> and make a similar change to the one detailed above. On Linux a sed one-liner like this does the job:</p>\n\n<pre><code>sed -i 's/^libogg_la_LDFLAGS.*/libogg_la_LDFLAGS = -avoid-version/g' src/Makefile\n</code></pre>\n"}], "owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1474549147, "creation_date": 1453902627, "last_edit_date": 1453926425, "question_id": 35039189, "link": "https://stackoverflow.com/questions/35039189/libogg-compiled-with-standalone-toolchain-generated-by-ndk-script-tries-to-loa", "title": "Libogg compiled with standalone toolchain (generated by NDK script) tries to load itself from incorrect file - libogg.so.0 instead of libogg.so", "body": "<p>I'm trying to add libogg to my android NDK project.</p>\n\n<p>I'm using project template that comes with SDL library.</p>\n\n<p>I'm on Windows, so all following scripts were executed under MSYS, a linux terminal emulator.</p>\n\n<p>First, I generated a standalone toolchain.</p>\n\n<pre><code>android-ndk/build/tools/make-standalone-toolchain.sh --platform=android-12 --system=windows-x86_64 --toolchain=arm-linux-androideabi-4.9 --install-dir=Y:/gcc_android_androideabi-4.9_api12/\n</code></pre>\n\n<p>Then I built the library.</p>\n\n<pre><code>make clean\nconfigure CC=\"/y/gcc_android_androideabi-4.9_api12/bin/arm-linux-androideabi-gcc\" LIBS=\"-lgnustl_shared\" CFLAGS=\"-mthumb\" --host=arm-linux-androideabi\nmake\n</code></pre>\n\n<p>Then I copied resulting <code>libogg.so</code> to my project folder and added following to my <code>jni/src/Android.mk</code>:</p>\n\n<pre><code>...\n\ninclude $(CLEAR_VARS)\nLOCAL_MODULE := ogg-prebuilt\nLOCAL_SRC_FILES := ../../prebuilt-libs/$(TARGET_ARCH_ABI)/libogg.so\ninclude $(PREBUILT_SHARED_LIBRARY)\n\n...\n\nLOCAL_SHARED_LIBRARIES := ... ogg-prebuilt ...\n\n...\n</code></pre>\n\n<p>Similar code works fine for another libraries that I use.</p>\n\n<p><code>ndk-build</code> successfully finds my libraries and adds them to the <code>.apk</code>.</p>\n\n<p>The problem arises when I call <code>System.loadLibrary(\"ogg\");</code> at runtime. Dynamic linker gives me error message saying something like</p>\n\n<blockquote>\n  <p>Can't find library \"libogg.so.0\".</p>\n</blockquote>\n\n<p>I'm sure that my library loading code is ok because it works for other libraries that I have.</p>\n\n<p>Error from the dynamic linker is interesting because <code>make</code> not just generated single <code>libogg.so</code>. It generated 3 completely same files with different names: <code>libogg.so</code>, <code>libogg.so.0</code> and <code>libogg.so.0.8.2</code>.</p>\n\n<p>I tried to replace <code>libogg.so</code> with <code>libogg.so.0</code> and adjusted <code>Android.mk</code> properly, but NDK build script yelled at me, saying that prebuilt shared libraries must have <code>.so</code> extension. I tried to just copy <code>libogg.so.0</code> to <code>libs/</code> folder, but NDK build script ignored it when building <code>.apk</code>.</p>\n\n<p>Then I opened <code>libogg.so</code> in a hex editor and searched for <code>libogg</code>. I found only one occurence: <code>libogg.so.0[NUL]</code>. I replaced <code>.0</code> with 2 <code>[NUL]</code>s, so it became <code>libogg.so[NUL][NUL][NUL]</code> and now library loads perfectly.</p>\n\n<hr>\n\n<p>I can reproduce this error with all toolchains I use: <code>arm-linux-androideabi-gcc-4.9</code>, <code>i686-linux-android-gcc-4.9</code> and <code>mipsel-linux-android-gcc-4.9</code>. They all are generated using similar scripts.</p>\n\n<p>The error persists if I rename <code>libogg.so.0</code> or <code>libogg.so.0.8.2</code> to <code>libogg.so</code> and use it instead of original one. As I said, all three files have same content.</p>\n\n<p><strong>While I can make a <code>sed</code> script to automatically fix library name in <code>.so</code> files when necessary, I wonder if there is a better solution to this problem.</strong></p>\n\n<p>Maybe I have to add some flags to <code>configure</code>?</p>\n"}, {"tags": ["c", "printf", "unsigned", "short", "format-specifiers"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1453902637, "post_id": 35039168, "comment_id": 57802568, "body": "Don&#39;t you think that this information is not enough? Show the definition of the structure and also the definition of <code>list</code>."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1453902652, "post_id": 35039168, "comment_id": 57802574, "body": "Please don&#39;t tell me <code>ultimo</code> is unsigned and you&#39;re using <code>%d</code> to print that..."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1453903064, "post_id": 35039168, "comment_id": 57802871, "body": "@SouravGhosh hah!  You guessed wrong - it was an unsigned short"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1453903152, "post_id": 35039168, "comment_id": 57802933, "body": "@MartinJames Yes, my bad.. I missed the title.... ;)"}, {"owner": {"reputation": 1875, "user_id": 5057191, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d3a861c87b46363f63080839bbc699f2?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. E", "link": "https://stackoverflow.com/users/5057191/mr-e"}, "edited": false, "score": 1, "creation_date": 1453903285, "post_id": 35039168, "comment_id": 57803054, "body": "You should show us a little more code to help you"}], "answers": [{"comments": [{"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 0, "creation_date": 1453903197, "post_id": 35039239, "comment_id": 57802979, "body": "while this is good advice, I don&#39;t think it answers the question. <code>%d</code> works just fine for <code>unsigned short</code> when <code>sizeof(unsigned short) &lt; sizeof(int)</code>, and in the other case, the vale <code>0</code> should not turn into <code>32766</code> - undefined behavior or not. Something else is going on (and most likely there&#39;s missing information in the question)."}, {"owner": {"reputation": 3, "user_id": 5846920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ff2a4c14c4fab8cbb63171fe041fdef?s=128&d=identicon&r=PG&f=1", "display_name": "logy", "link": "https://stackoverflow.com/users/5846920/logy"}, "edited": false, "score": 0, "creation_date": 1453906178, "post_id": 35039239, "comment_id": 57805355, "body": "thanks for responding, I think is not a problem of format specifiers with &quot;% hu&quot; I have the same wrong result."}, {"owner": {"reputation": 1655, "user_id": 3493587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0b29d44004eaedbc859bad8144bade93?s=128&d=identicon&r=PG&f=1", "display_name": "mikedu95", "link": "https://stackoverflow.com/users/3493587/mikedu95"}, "reply_to_user": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 0, "creation_date": 1453906797, "post_id": 35039239, "comment_id": 57805846, "body": "Indeed, as already noticed by @SanderDeDycker. But in this case, please post a Minimal, Complete, and Verifiable example, because the result you get is more than curious: <a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}, {"owner": {"reputation": 3, "user_id": 5846920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ff2a4c14c4fab8cbb63171fe041fdef?s=128&d=identicon&r=PG&f=1", "display_name": "logy", "link": "https://stackoverflow.com/users/5846920/logy"}, "edited": false, "score": 0, "creation_date": 1453911079, "post_id": 35039239, "comment_id": 57809091, "body": "I think it is a problem related to the preprocessor, with constant TAMANOMAX"}, {"owner": {"reputation": 3, "user_id": 5846920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ff2a4c14c4fab8cbb63171fe041fdef?s=128&d=identicon&r=PG&f=1", "display_name": "logy", "link": "https://stackoverflow.com/users/5846920/logy"}, "edited": false, "score": 0, "creation_date": 1453914253, "post_id": 35039239, "comment_id": 57811362, "body": "thank you very much, I try to control the size of array from main.c, emulating function overloading, with the option TAMANOMAX 10 by default.  in the future will be more careful to ask and also with the code"}], "tags": [], "owner": {"reputation": 1655, "user_id": 3493587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0b29d44004eaedbc859bad8144bade93?s=128&d=identicon&r=PG&f=1", "display_name": "mikedu95", "link": "https://stackoverflow.com/users/3493587/mikedu95"}, "is_accepted": true, "score": 2, "last_activity_date": 1453911767, "last_edit_date": 1453911767, "creation_date": 1453902760, "answer_id": 35039239, "question_id": 35039168, "link": "https://stackoverflow.com/questions/35039168/assign-zero-in-unsigned-short-int-in-c/35039239#35039239", "title": "assign zero in unsigned short int in c", "body": "<p>Use <code>%hd</code> to print a <code>short int</code> and <code>%hu</code> to print an <code>unsigned short int</code>. <code>%d</code> is for <code>int</code>.</p>\n\n<p>EDIT: Now that you have posted the full code, it appears that <code>TAMANOMAX</code> is set to <code>10</code> in <code>lista.c</code>, but set to <code>4</code> in <code>main.c</code>, leading to an incompatibilty between your <code>main()</code> function and the <code>Insertar</code> one. You should have the same value in all files. And if you want to work with different array lengths, add a <code>length</code> member in your <code>LISTA</code> structure. But <code>TAMANOMAX</code> should absolutely be the same everywhere, else you're in fact working with different data types and your program won't work.</p>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1453903122, "last_edit_date": 1453903122, "creation_date": 1453902812, "answer_id": 35039259, "question_id": 35039168, "link": "https://stackoverflow.com/questions/35039168/assign-zero-in-unsigned-short-int-in-c/35039259#35039259", "title": "assign zero in unsigned short int in c", "body": "<p>Using mismatched format specifier with the type of the argument invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behavior</a>.</p>\n\n<p>Quoting <code>C11</code> standard, chapter \u00a77.21.6.1, <code>fprintf()</code> function</p>\n\n<blockquote>\n  <p>[..] If any argument is\n  not the correct type for the corresponding conversion specification, the behavior is\n  undefined.</p>\n</blockquote>\n\n<p>and about <code>%d</code> format specifier,</p>\n\n<blockquote>\n  <p><code>d,i</code><br> The <code>int</code> argument [....]</p>\n</blockquote>\n\n<p>so, <code>%d</code> expects an <code>int</code>.</p>\n\n<p>As per your question title, <code>ultimo</code> is <code>unsigned short int</code> and you're using <code>%d</code> to print the value.</p>\n\n<p>You should use <code>%hu</code> to print <code>unsigned short int</code>.</p>\n"}], "owner": {"reputation": 3, "user_id": 5846920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ff2a4c14c4fab8cbb63171fe041fdef?s=128&d=identicon&r=PG&f=1", "display_name": "logy", "link": "https://stackoverflow.com/users/5846920/logy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 461, "favorite_count": 0, "accepted_answer_id": 35039239, "answer_count": 2, "score": -1, "last_activity_date": 1453911767, "creation_date": 1453902567, "last_edit_date": 1453907598, "question_id": 35039168, "link": "https://stackoverflow.com/questions/35039168/assign-zero-in-unsigned-short-int-in-c", "title": "assign zero in unsigned short int in c", "body": "<p>I try to assign zero to a field in a structure called list</p>\n\n<pre><code>list.ultimo = 0;\n</code></pre>\n\n<p>but when I use printf</p>\n\n<pre><code>printf(\"%d\", list.ultimo);\n</code></pre>\n\n<p>I get the result</p>\n\n<pre><code>32766\n</code></pre>\n\n<p>but when I add</p>\n\n<pre><code>unsigned short int cero = 0;\n</code></pre>\n\n<p>the result of printf is correct, no matter that does not use cero. why?</p>\n\n<p>lista.h</p>\n\n<pre><code>#ifndef LISTA_H\n#define LISTA_H\n\ntypedef struct{\n  elemento lista[TAMANOMAX];\n  unsigned short int ultimo;\n}LISTA;\n\nvoid Insertar(elemento, unsigned short int posicion, LISTA);\n#endif\n</code></pre>\n\n<p>lista.c </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\ntypedef short int elemento;\n#ifndef TAMANOMAX\n#define TAMANOMAX 10\n#endif\n#include\"lista.h\"\n\nvoid Insertar(elemento x, unsigned short int p, LISTA lista){\n  if (lista.ultimo &gt;= TAMANOMAX){\n    puts(\"full list\");\n    printf(\"%hu\",lista.ultimo); \n  }\n}\n</code></pre>\n\n<p>main.c</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\ntypedef unsigned short int elemento;\n#define TAMANOMAX 4\n#include\"lista.h\"\n\nint main(){\n  LISTA esferas;\n  esferas.ultimo = 0; \n  Insertar(2,0,esferas);\n  printf(\"\\n%hu\\n\", esferas.ultimo);\n  return 0; \n}\n</code></pre>\n\n<p>the result is</p>\n\n<pre><code>$gcc -Wall lista.c main.c\n\nfull list\n\n32765\n\n0\n</code></pre>\n\n<p>I'm new to this, I'm slow for now, I regret the delay</p>\n"}, {"tags": ["c", "string", "reverse"], "answers": [{"comments": [{"owner": {"reputation": 14704, "user_id": 908515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f1L9v.png?s=128&g=1", "display_name": "undur_gongor", "link": "https://stackoverflow.com/users/908515/undur-gongor"}, "edited": false, "score": 2, "creation_date": 1453902911, "post_id": 35039215, "comment_id": 57802746, "body": "I think the word &quot;program&quot; is a very good reason to believe more than a function is needed."}, {"owner": {"reputation": 14006, "user_id": 2204926, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/FDbXT.png?s=128&g=1", "display_name": "Idos", "link": "https://stackoverflow.com/users/2204926/idos"}, "reply_to_user": {"reputation": 14704, "user_id": 908515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f1L9v.png?s=128&g=1", "display_name": "undur_gongor", "link": "https://stackoverflow.com/users/908515/undur-gongor"}, "edited": false, "score": 0, "creation_date": 1453903327, "post_id": 35039215, "comment_id": 57803095, "body": "I don&#39;t believe a downvote was required. And also I believe that yes, it is a <i>part</i> of a bigger program but the exercise is about this function."}, {"owner": {"reputation": 50933, "user_id": 360211, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/3baKW.png?s=128&g=1", "display_name": "weston", "link": "https://stackoverflow.com/users/360211/weston"}, "edited": false, "score": 1, "creation_date": 1453903774, "post_id": 35039215, "comment_id": 57803439, "body": "You say <i>&quot;From the question there is no reason to believe you are to use command line arguments.&quot;</i> I agree, but then why not: <i>&quot;From the question there is no reason to believe you are to write a function other than main (which is only required because you are required to write a program)&quot;</i>"}, {"owner": {"reputation": 14006, "user_id": 2204926, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/FDbXT.png?s=128&g=1", "display_name": "Idos", "link": "https://stackoverflow.com/users/2204926/idos"}, "edited": false, "score": 0, "creation_date": 1453904461, "post_id": 35039215, "comment_id": 57804001, "body": "I apologize if my terminology or the way I phrased myself isn&#39;t clear. You are welcome to edit my answer, but I really believe that the <i>sense</i> is clear."}], "tags": [], "owner": {"reputation": 14006, "user_id": 2204926, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/FDbXT.png?s=128&g=1", "display_name": "Idos", "link": "https://stackoverflow.com/users/2204926/idos"}, "is_accepted": false, "score": 1, "last_activity_date": 1453904510, "last_edit_date": 1453904510, "creation_date": 1453902694, "answer_id": 35039215, "question_id": 35039141, "link": "https://stackoverflow.com/questions/35039141/reversing-a-string-input-parameter-and-return-a-string/35039215#35039215", "title": "Reversing a string (input parameter and return a string)", "body": "<p>The question means that you should implement a function that is a part of a program (probably a good idea to implement <code>main</code> to call/test the function). The function's' signature should be of the form:</p>\n\n<pre><code>char* reverse(char* str)\n</code></pre>\n\n<p>Although you could also implement (might be a little more difficult):</p>\n\n<pre><code>void inplace_reverse(char* str)\n</code></pre>\n\n<p>In my opinion, from the way the question is put there is no reason to believe you are to use command line arguments.</p>\n"}, {"tags": [], "owner": {"reputation": 50933, "user_id": 360211, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/3baKW.png?s=128&g=1", "display_name": "weston", "link": "https://stackoverflow.com/users/360211/weston"}, "is_accepted": false, "score": 1, "last_activity_date": 1453902901, "creation_date": 1453902901, "answer_id": 35039289, "question_id": 35039141, "link": "https://stackoverflow.com/questions/35039141/reversing-a-string-input-parameter-and-return-a-string/35039289#35039289", "title": "Reversing a string (input parameter and return a string)", "body": "<blockquote>\n  <p>Does this Question means i have to take input using Command line argument?</p>\n</blockquote>\n\n<p>It doesn't specify, but I would as it makes the task easier.</p>\n\n<blockquote>\n  <p>How will the return value work</p>\n</blockquote>\n\n<p>Again, the question doesn't specify, so I would print it to the screen (<code>printf</code>).</p>\n\n<blockquote>\n  <p>Or is this just a misprinted question where I am supposed to make another function and return value to some string in main function?</p>\n</blockquote>\n\n<p>Calling a function from the main function would be a great idea and could only receive credit in my opinion although not explicitly specified.</p>\n\n<p>One thing is clear, they ask for a <strong>program</strong> and not just a function, but both would be best in my opinion.</p>\n"}, {"comments": [{"owner": {"reputation": 50933, "user_id": 360211, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/3baKW.png?s=128&g=1", "display_name": "weston", "link": "https://stackoverflow.com/users/360211/weston"}, "edited": false, "score": 1, "creation_date": 1453903404, "post_id": 35039394, "comment_id": 57803155, "body": "Neither &quot;must&quot; is implied by the question."}], "tags": [], "owner": {"reputation": 4376, "user_id": 1351465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17845023034a9b3ad336f2883ed79149?s=128&d=identicon&r=PG", "display_name": "JuanR", "link": "https://stackoverflow.com/users/1351465/juanr"}, "is_accepted": false, "score": -2, "last_activity_date": 1453903156, "creation_date": 1453903156, "answer_id": 35039394, "question_id": 35039141, "link": "https://stackoverflow.com/questions/35039141/reversing-a-string-input-parameter-and-return-a-string/35039394#35039394", "title": "Reversing a string (input parameter and return a string)", "body": "<p>It means two things:</p>\n\n<p>1- You must implement a function with the following signature:</p>\n\n<pre><code>char *reverse(const char *str);\n</code></pre>\n\n<p>2- You must implement a <code>main()</code> function which reverses the string passed as parameter:</p>\n\n<pre><code>int main(int argc, char *argv[]) {\n    char *str;\n\n    if (argc &lt; 2) {\n        fprintf(stderr, \"Usage: %s &lt;string_to_reverse&gt;\\n\", argv[0]);\n        return -1;\n    }\n\n    str = reverse(argv[1]);\n    printf(\"%s\\n\", str);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 5847073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0634a265378df5cf2486102aaa9c284?s=128&d=identicon&r=PG&f=1", "display_name": "Ayush Anand", "link": "https://stackoverflow.com/users/5847073/ayush-anand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "closed_date": 1453911014, "answer_count": 3, "score": 0, "last_activity_date": 1453905262, "creation_date": 1453902493, "last_edit_date": 1453905262, "question_id": 35039141, "link": "https://stackoverflow.com/questions/35039141/reversing-a-string-input-parameter-and-return-a-string", "closed_reason": "Opinion-based", "title": "Reversing a string (input parameter and return a string)", "body": "<p>I have to answer this question:</p>\n\n<blockquote>\n  <p>Write a program which reverses the given string. (Input parameter and return string)</p>\n</blockquote>\n\n<p>Does this question mean I have to take the input using command-line argument?<br>\nHow will the return value work if I return a string to the main function?<br>\nOr is this just a misprinted question where I am supposed to make another function and return the value to some string in main function?</p>\n"}, {"tags": ["c", "scanf", "format-specifiers"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 3, "creation_date": 1453901374, "post_id": 35038678, "comment_id": 57801699, "body": "<code>fopen(*argv, &quot;r&quot;)</code> --&gt; <code>fopen(*++argv, &quot;r&quot;)</code> or <code>fopen(argv[1], &quot;r&quot;)</code>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1453901405, "post_id": 35038678, "comment_id": 57801722, "body": "Why don&#39;t you check the return value of <code>fopen()</code>?"}, {"owner": {"reputation": 645, "user_id": 3225276, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/wheHF.png?s=128&g=1", "display_name": "LegionMammal978", "link": "https://stackoverflow.com/users/3225276/legionmammal978"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1453901413, "post_id": 35038678, "comment_id": 57801728, "body": "@BLUEPIXY <i>facepalm</i> Could you post that as an answer?"}, {"owner": {"reputation": 645, "user_id": 3225276, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/wheHF.png?s=128&g=1", "display_name": "LegionMammal978", "link": "https://stackoverflow.com/users/3225276/legionmammal978"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1453901440, "post_id": 35038678, "comment_id": 57801751, "body": "@SouravGhosh For my purposes, the file can be assumed to exist."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1453901478, "post_id": 35038678, "comment_id": 57801767, "body": "@LegionMammal978 Don&#39;t <b>assume</b>. Check and be sure. :)"}, {"owner": {"reputation": 645, "user_id": 3225276, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/wheHF.png?s=128&g=1", "display_name": "LegionMammal978", "link": "https://stackoverflow.com/users/3225276/legionmammal978"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1453901542, "post_id": 35038678, "comment_id": 57801813, "body": "@SouravGhosh It&#39;s only for personal usage, anyway ;p"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1453901570, "post_id": 35038678, "comment_id": 57801828, "body": "It is simply a misunderstanding. (it contains the command in C.) It is often the case."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1453901708, "post_id": 35038678, "comment_id": 57801916, "body": "@SouravGhosh While you have a general point -- for chrissake, always check return values! --, it wouldn&#39;t help here! The program can open <code>argv[0]</code> alright, alas it will only be able to scan three comma separated numbers from those bytes under exceptional circumstances ;-)."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1453903817, "post_id": 35038678, "comment_id": 57803476, "body": "What happened to the answers?"}, {"owner": {"reputation": 1175, "user_id": 1654526, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/3287ef88010dfa6ae54dfadd74a0d5e0?s=128&d=identicon&r=PG", "display_name": "Jack", "link": "https://stackoverflow.com/users/1654526/jack"}, "edited": false, "score": 0, "creation_date": 1453904978, "post_id": 35038678, "comment_id": 57804407, "body": "You&#39;re opening the program executable file"}, {"owner": {"reputation": 11698, "user_id": 5399734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2162d669508364bb0c03aba1a2473aa8?s=128&d=identicon&r=PG&f=1", "display_name": "nalzok", "link": "https://stackoverflow.com/users/5399734/nalzok"}, "edited": false, "score": 0, "creation_date": 1453905120, "post_id": 35038678, "comment_id": 57804534, "body": "See: <a href=\"http://stackoverflow.com/q/2050961/5399734\">stackoverflow.com/q/2050961/5399734</a>"}], "answers": [{"tags": [], "owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "is_accepted": false, "score": 2, "last_activity_date": 1453905201, "creation_date": 1453905201, "answer_id": 35040148, "question_id": 35038678, "link": "https://stackoverflow.com/questions/35038678/fscanf-not-scanning-any-numbers/35040148#35040148", "title": "fscanf not scanning any numbers", "body": "<p>As noted by BLUEPIXY, you should use the second element of the <code>argv</code> array: <code>argv[1]</code>:</p>\n\n<pre><code>FILE *file = fopen(argv[1], \"r\");\n</code></pre>\n\n<p>The first element (<code>argv[0]</code> or <code>*argv</code>) is the name of the program being executed - it's not the right file to open.</p>\n"}, {"comments": [{"owner": {"reputation": 645, "user_id": 3225276, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/wheHF.png?s=128&g=1", "display_name": "LegionMammal978", "link": "https://stackoverflow.com/users/3225276/legionmammal978"}, "edited": false, "score": 0, "creation_date": 1453932708, "post_id": 35040971, "comment_id": 57822419, "body": "Most of this was checked in earlier iterations. I checked the file (it wasn&#39;t <code>NULL</code>), I looked at the return values of <code>fscanf</code> (it kept returning <code>0</code>), and checking the values of the <code>in</code> (they never changed.)"}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1453907715, "last_edit_date": 1453907715, "creation_date": 1453907361, "answer_id": 35040971, "question_id": 35038678, "link": "https://stackoverflow.com/questions/35038678/fscanf-not-scanning-any-numbers/35040971#35040971", "title": "fscanf not scanning any numbers", "body": "<p>Superficial answer: wrong file was opened as code should have used <code>argv[1]</code> rather than <code>*argv</code>.</p>\n\n<p>Let us look deeper.</p>\n\n<p>Code had troubles and lacked error checking in at least 2 places.</p>\n\n<ol>\n<li><p><code>FILE *file = fopen(*argv, \"r\");</code> was not followed by a test on <code>file</code>.  This classic check would not have detected OP's problem as the file, the executable, was open-able.</p></li>\n<li><p>The return value from <code>fscanf(file, \"%d,%d,%d\", &amp;i1, &amp;i2, &amp;i3)</code> was only lightly tested.  Return values of <code>EOF 0 1  2 3</code> were possible yet only <code>EOF 3</code> were expected.  Had code tested for non-<code>EOF 3</code>, the problem would have rapidly been found.</p></li>\n</ol>\n\n<p>Lesson to be learned:  Insure code, especially mis-behaving code, has adequate error checking.  Saves the coder time in the long run.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char **argv) {\n  if (argc != 2) {\n    fprintf(stderr, \"Unexpected argument count %d.\\n\", argc);\n    return 1;\n  } \n  FILE *file = fopen(argv[1], \"r\");\n  if (file == NULL) {\n    fprintf(stderr, \"Unable to open file: \\\"%s\\\"\", argv[1]);\n    return 1;\n  } \n  int i1, i2, i3;\n  int n;\n  while ((n = fscanf(file, \"%d,%d,%d\", &amp;i1, &amp;i2, &amp;i3)) == 3) {\n    printf(\"Doing stuff with %d, %d, and %d...\\n\", i1, i2, i3);\n  }\n  if (n != EOF) {\n    fprintf(stderr, \"Unexpected scan failure count %d\\n\", n);\n    return 1;\n  }\n  fclose(file);\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 645, "user_id": 3225276, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/wheHF.png?s=128&g=1", "display_name": "LegionMammal978", "link": "https://stackoverflow.com/users/3225276/legionmammal978"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 287, "favorite_count": 1, "accepted_answer_id": 35040971, "answer_count": 2, "score": 3, "last_activity_date": 1453907715, "creation_date": 1453901240, "question_id": 35038678, "link": "https://stackoverflow.com/questions/35038678/fscanf-not-scanning-any-numbers", "title": "fscanf not scanning any numbers", "body": "<p>I am currently developing a simple C application. It takes a single file as a command line argument, which is formatted like:</p>\n\n<pre><code>1,2,3\n4,5,6\n7,8,9\netc.\n</code></pre>\n\n<p>However, for whatever reason, <code>fscanf</code> never scans the numbers! Here is an example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char **argv) {\n    FILE *file = fopen(*argv, \"r\");\n    int i1, i2, i3;\n    while (fscanf(file, \"%d,%d,%d\", &amp;i1, &amp;i2, &amp;i3) == 3) {\n        printf(\"Doing stuff with %d, %d, and %d...\\n\", i1, i2, i3);\n    }\n    fclose(file);\n    return 0;\n}\n</code></pre>\n\n<p>If you run it with the filename as an argument, then it immediately exits, due to <code>fscanf</code> returning 0. I've tried several variations of this, to no avail. How do I make <code>fscanf</code> read the numbers correctly?</p>\n"}, {"tags": ["c", "linux"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 2, "creation_date": 1453900886, "post_id": 35038506, "comment_id": 57801346, "body": "Compile your C code with all warnings &amp; debugging info (<code>gcc -Wall -Wextra -g</code>) &amp; <b>use the debugger</b> (<code>gdb</code>)"}, {"owner": {"reputation": 3852, "user_id": 921723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38e3b1e32ece685d794a2d839300166c?s=128&d=identicon&r=PG", "display_name": "Jite", "link": "https://stackoverflow.com/users/921723/jite"}, "edited": false, "score": 1, "creation_date": 1453901136, "post_id": 35038506, "comment_id": 57801510, "body": "Or use <code>getopt</code> to do the dirty work for you: <a href=\"http://www.gnu.org/software/libc/manual/html_node/Getopt.html\" rel=\"nofollow noreferrer\">gnu.org/software/libc/manual/html_node/Getopt.html</a>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1453901840, "post_id": 35038506, "comment_id": 57802004, "body": "Wouldn&#39;t that be <b>your</b> task to tell what the semantics are?"}], "answers": [{"tags": [], "owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "is_accepted": true, "score": 3, "last_activity_date": 1453901176, "creation_date": 1453901176, "answer_id": 35038652, "question_id": 35038506, "link": "https://stackoverflow.com/questions/35038506/csh-script-call-c-program-arguments-issue/35038652#35038652", "title": "Csh script call C program,arguments issue", "body": "<p><code>Avel.dat</code> and <code>Gvel.grd</code> are not input files.  Look at the argument parsing again.</p>\n\n<pre><code> switch (argv[i][1]) {\n        case 'G':\n            grdfile = &amp;argv[i][2];\n            lgrd = TRUE;\n            break;\n</code></pre>\n\n<p>Consider that with this argument:  </p>\n\n<blockquote>\n  <p>-Gvel.grd</p>\n</blockquote>\n\n<p>In plain English, the <code>switch</code> examines the <em>second</em> character of each argument.  In this case <code>-Gvel.grd</code> is the argument, so it looks at the <code>G</code>.  Passing that test, the case statement then derives the address of the character that comes <em>immediately after</em> the <code>G</code> within the character string.  In other words, the <code>v</code>.</p>\n\n<p>Therefore, the file name is actually <code>vel.grd</code>.  You should be able to apply this same logic to the rest of the arguments that follow the same pattern.</p>\n"}], "owner": {"reputation": 5432, "user_id": 4723732, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/77fa71fdc548472c228be40043c1bc1f?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Rublev", "link": "https://stackoverflow.com/users/4723732/richard-rublev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 35038652, "answer_count": 1, "score": -1, "last_activity_date": 1453933232, "creation_date": 1453900767, "last_edit_date": 1453933232, "question_id": 35038506, "link": "https://stackoverflow.com/questions/35038506/csh-script-call-c-program-arguments-issue", "title": "Csh script call C program,arguments issue", "body": "<p>This the line from the csh script</p>\n\n<pre><code>./model2grd $model -D$nx/$ny/$nz -O$x0/$y0 -I$dx/$dy -L$layer -C$coverage -Avel.dat -Gvel.grd\n</code></pre>\n\n<p>This is part of the model2grd.c</p>\n\n<pre><code>for (i = 2; i &lt; argc; i++) {\n    if (argv[i][0] == '-') {\n        switch (argv[i][1]) {\n            case 'G':\n                grdfile = &amp;argv[i][2];\n                lgrd = TRUE;\n                break;\n            case 'C':\n                cov = &amp;argv[i][2];\n                lcov = TRUE;\n                break;\n            case 'A':\n                xyzfile = &amp;argv[i][2];\n                lxyz = TRUE;\n                break;\n            case 'D':\n                sscanf(&amp;argv[i][2],\"%d/%d/%d\",&amp;nx,&amp;ny,&amp;nz);\n                break;\n            case 'I':\n                sscanf(&amp;argv[i][2], \"%lf/%lf\", &amp;dx, &amp;dy);\n                break;\n            case 'O':\n                sscanf(&amp;argv[i][2], \"%lf/%lf\", &amp;xmin, &amp;ymin);\n                break;\n            case 'L':\n                layer = atoi(&amp;argv[i][2]);\n                break;\n            case 'N':\n                nan = (float)atof(&amp;argv[i][2]);\n                break;\n            case 'Z':\n                cvalue = (float)atof(&amp;argv[i][2]);\n                break;\n            case 'V':\n                verbose = TRUE;\n                break;\n            default:\n                break;\n        }\n    }\n}\n</code></pre>\n\n<p>Does this mean that it takes with D(nx,ny,nz),with O(xmin and ymin),with L layer and with C coverage?Are Avel.dat and Gvel.grd input files or not?</p>\n"}, {"tags": ["c", "linux", "dll"], "answers": [{"tags": [], "owner": {"reputation": 5221, "user_id": 2581912, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/565797279/picture?type=large", "display_name": "Mark Galeck", "link": "https://stackoverflow.com/users/2581912/mark-galeck"}, "is_accepted": false, "score": 0, "last_activity_date": 1453901972, "creation_date": 1453901972, "answer_id": 35038923, "question_id": 35038314, "link": "https://stackoverflow.com/questions/35038314/how-to-catch-calls-with-ld-preload-when-unknown-programs-may-be-calling-execve-w/35038923#35038923", "title": "how to catch calls with LD_PRELOAD when unknown programs may be calling execve without passing environment", "body": "<p>I guess I could also write a wrapper for <code>execve</code>.  In the wrapper, I add to the original <code>envp</code> argument, one more string: <code>\"LD_PRELOAD=</code>my library<code>\"</code>  .  This \"seems\" to work, I checked on simple examples.  </p>\n\n<p>I am not sure if I should be posting an \"answer\" which may very easily exceed my level of C experience.  </p>\n\n<p>Can somebody more experienced than me comment if this is really going to work in the long run?</p>\n"}], "owner": {"reputation": 5221, "user_id": 2581912, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/565797279/picture?type=large", "display_name": "Mark Galeck", "link": "https://stackoverflow.com/users/2581912/mark-galeck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 217, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1453901972, "creation_date": 1453900191, "question_id": 35038314, "link": "https://stackoverflow.com/questions/35038314/how-to-catch-calls-with-ld-preload-when-unknown-programs-may-be-calling-execve-w", "title": "how to catch calls with LD_PRELOAD when unknown programs may be calling execve without passing environment", "body": "<p>I know how to intercept system calls with <code>LD_PRELOAD</code>, that occur in compiled programs I may not have source for.  For example, if I want to know about the calls to <code>int fsync(int)</code> of some unknown program <code>foobar</code>, I compile a wrapper </p>\n\n<pre><code>int fsync(int)\n</code></pre>\n\n<p>for</p>\n\n<pre><code>(int (*) (int))dlsym(RTLD_NEXT,\"fsync\");\n</code></pre>\n\n<p>into a shared library and then I can set the environment variable <code>LD_PRELOAD</code> to that and run <code>foobar</code>.  Assuming that <code>foobar</code> is dynamically linked, which most programs are, I will know about the calls to <code>fsync</code>.  </p>\n\n<p>But now suppose there is another unknown program <code>foobar1</code> and in the source of that program was a statement like this:</p>\n\n<pre><code>execve(\"foobar\", NULL, NULL)\n</code></pre>\n\n<p>that is, the environment was not passed.  Now the whole LD_PRELOAD scheme breaks down?</p>\n\n<p>I checked by compiling the statemet above into <code>foobar1</code>, when that is run, the calls from <code>foobar</code> are not reported.  </p>\n\n<p>While one can safely assume most modern programs are dynamically linked, one cannot at all assume how they may or may not be using <code>execve</code>?</p>\n\n<p>So then, the whole LD_PRELOAD scheme, which everybody says is such a great thing, is not really working unless you have the source to the programs concerned, in which case you can check the calls to <code>execve</code> and edit them if necessary.  But in that case, there is no need for LD_PRELOAD, if you have sources to everything.  LD_PRELOAD is specifically, supposed to be, useful when you don't have sources to the programs you are inspecting.</p>\n\n<p>Where am I wrong here - how can people say, that LD_PRELOAD is useful for inspecting what unknown programs are doing??</p>\n"}, {"tags": ["c", "macros", "conditional-compilation"], "comments": [{"owner": {"reputation": 510, "user_id": 5778300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a214fbbf28e4a6615ff6891f99e06c5?s=128&d=identicon&r=PG&f=1", "display_name": "Flikk", "link": "https://stackoverflow.com/users/5778300/flikk"}, "edited": false, "score": 0, "creation_date": 1453899097, "post_id": 35037681, "comment_id": 57800141, "body": "You define A and C. With <code>#ifdef A</code> you can test A is defined.  Or use <code>#ifndef A</code>to test if it is not defined. Depending on the result, the code in that part will be compiled for the porgram. This is often used in header files, to prevent declerations or definitions to be done twice."}, {"owner": {"reputation": 510, "user_id": 5778300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a214fbbf28e4a6615ff6891f99e06c5?s=128&d=identicon&r=PG&f=1", "display_name": "Flikk", "link": "https://stackoverflow.com/users/5778300/flikk"}, "edited": false, "score": 0, "creation_date": 1453899684, "post_id": 35037681, "comment_id": 57800539, "body": "2nd one prints -3 because A is not defined anymore. <code>#ifdef C</code> is inside <code>#ifdef A</code>so it won&#39;t even be tested. And the <code>#else</code> of <code>#ifdef A</code> is <code>-3</code>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1453900270, "post_id": 35037681, "comment_id": 57800922, "body": "What do you expect and why?"}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 5826634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5cfccd864766e3cf39c8f3b155c32e1?s=128&d=identicon&r=PG&f=1", "display_name": "ran pos", "link": "https://stackoverflow.com/users/5826634/ran-pos"}, "edited": false, "score": 0, "creation_date": 1453899340, "post_id": 35037774, "comment_id": 57800324, "body": "Thank you. I edited my comment to add your comments, and a nother sample which&#39;s confusing me."}, {"owner": {"reputation": 414, "user_id": 1582263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03999b3478e0ac4b8b25eb2eeba79904?s=128&d=identicon&r=PG", "display_name": "tigris", "link": "https://stackoverflow.com/users/1582263/tigris"}, "reply_to_user": {"reputation": 47, "user_id": 5826634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5cfccd864766e3cf39c8f3b155c32e1?s=128&d=identicon&r=PG&f=1", "display_name": "ran pos", "link": "https://stackoverflow.com/users/5826634/ran-pos"}, "edited": false, "score": 0, "creation_date": 1453899574, "post_id": 35037774, "comment_id": 57800461, "body": "@ranpos  you did not define A, so the last case works in the updated question. think of simple if-else and follow Sourav Ghosh &#39;s answer for identation. then things will be clear IMO."}], "tags": [], "owner": {"reputation": 414, "user_id": 1582263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03999b3478e0ac4b8b25eb2eeba79904?s=128&d=identicon&r=PG", "display_name": "tigris", "link": "https://stackoverflow.com/users/1582263/tigris"}, "is_accepted": false, "score": 1, "last_activity_date": 1453898693, "creation_date": 1453898693, "answer_id": 35037774, "question_id": 35037681, "link": "https://stackoverflow.com/questions/35037681/cant-wrap-my-head-around-preprocessing-macros/35037774#35037774", "title": "Can&#39;t wrap my head around Preprocessing Macros", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define A\n#define C\nint main()\n{\n    int i =\n    #ifdef A\n    #ifdef B // if A AND B is defined\n        -1\n    #else    // A is defined AND B is NOT defined\n        -2\n    #endif\n    #else   // A is not defined\n        -3\n    #endif\n    ;\n    printf(\"%d \\n\", i);\n}\n</code></pre>\n\n<p>in your case i will be -2, since A is defined but B is NOT defined</p>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1453899459, "last_edit_date": 1453899459, "creation_date": 1453898718, "answer_id": 35037783, "question_id": 35037681, "link": "https://stackoverflow.com/questions/35037681/cant-wrap-my-head-around-preprocessing-macros/35037783#35037783", "title": "Can&#39;t wrap my head around Preprocessing Macros", "body": "<p>First let me indent the code accordingly for ease of understanding.</p>\n\n<pre><code>#define A\n#define C\nint main()\n{\n    int i =\n    #ifdef A\n        #ifdef B\n             -1\n        #else\n             -2\n        #endif\n    #else\n        -3\n    #endif\n    ;\n    printf(\"%d \\n\", i);\n}\n</code></pre>\n\n<p>Now, as per the <code>#ifdef</code> preprocessing directive, quoting <code>C11</code> standard, chapter \u00a76.10.1,</p>\n\n<blockquote>\n  <p>Preprocessing directives of the forms</p>\n\n<pre><code># ifdef identifier new-line groupopt&lt;br&gt;\n# ifndef identifier new-line groupopt`&lt;br&gt;\n</code></pre>\n  \n  <p>check whether the identifier is or is not currently defined as a macro name.[...]</p>\n  \n  <p>Each directive\u2019s condition is checked in order. If it evaluates to false (zero), the group\n  that it controls is skipped: directives are processed only through the name that determines\n  the directive in order to keep track of the level of nested conditionals; the rest of the\n  directives\u2019 preprocessing tokens are ignored, as are the other preprocessing tokens in the\n  group. Only the first group whose control condition evaluates to true (nonzero) is\n  processed. If none of the conditions evaluates to true, and there is a <code>#else</code> directive, the\n  group controlled by the <code>#else</code> is processed; lacking a <code>#else</code> directive, all the groups\n  until the <code>#endif</code> are skipped.</p>\n</blockquote>\n\n<p>In respect to your code,</p>\n\n<ul>\n<li><code>#ifdef A</code> is TRUE,</li>\n<li><code>#ifdef B</code> is FALSE, so continues to <code>#else</code> part, and <code>-2</code> is included in the source code.</li>\n<li>skips until outer <code>#endif</code>.</li>\n</ul>\n\n<p>So, after preprocessing, the code <em>essentially</em> looks like</p>\n\n<pre><code>int i =-2 ;\nprintf(\"%d \\n\", i);\n</code></pre>\n\n<p>Check the output, it should be -2.</p>\n\n<p>As per the same logic, you can find out the preprocessed output of the other code.</p>\n"}, {"comments": [{"owner": {"reputation": 414, "user_id": 1582263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03999b3478e0ac4b8b25eb2eeba79904?s=128&d=identicon&r=PG", "display_name": "tigris", "link": "https://stackoverflow.com/users/1582263/tigris"}, "edited": false, "score": 0, "creation_date": 1453900112, "post_id": 35038193, "comment_id": 57800804, "body": "for the first case, A and C is defined only, output will be -2, not -3."}, {"owner": {"reputation": 456, "user_id": 5276705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e8bd54c7b2823d28abc6dbee63f3e0b?s=128&d=identicon&r=PG", "display_name": "SKD", "link": "https://stackoverflow.com/users/5276705/skd"}, "reply_to_user": {"reputation": 414, "user_id": 1582263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03999b3478e0ac4b8b25eb2eeba79904?s=128&d=identicon&r=PG", "display_name": "tigris", "link": "https://stackoverflow.com/users/1582263/tigris"}, "edited": false, "score": 0, "creation_date": 1453959597, "post_id": 35038193, "comment_id": 57831257, "body": "@tigris Thanks for pointing out. Corrected."}], "tags": [], "owner": {"reputation": 456, "user_id": 5276705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e8bd54c7b2823d28abc6dbee63f3e0b?s=128&d=identicon&r=PG", "display_name": "SKD", "link": "https://stackoverflow.com/users/5276705/skd"}, "is_accepted": false, "score": 1, "last_activity_date": 1453959551, "last_edit_date": 1453959551, "creation_date": 1453899832, "answer_id": 35038193, "question_id": 35037681, "link": "https://stackoverflow.com/questions/35037681/cant-wrap-my-head-around-preprocessing-macros/35038193#35038193", "title": "Can&#39;t wrap my head around Preprocessing Macros", "body": "<p>In first case, </p>\n\n<pre><code>int i =\n#ifdef A\n    #ifdef B // if A AND B is defined\n        -1\n    #else    // A is defined AND B is NOT defined\n        -2\n    #endif\n#else   // A is not defined\n    -3\n#endif\n</code></pre>\n\n<p>Here, <code>A</code> is defined but <code>B</code> is not. So, The last <code>else</code> case will be considered only. Hence the output will be <code>-2</code></p>\n\n<p>Whereas, in Second case,</p>\n\n<pre><code>int i =\n#ifdef A\n    #ifdef C\n        -1\n    #else\n        -2\n    #endif\n#else\n    -3\n#endif\n</code></pre>\n\n<p><code>C</code> is defined but <code>A</code> is not so again it will go to the last <code>else</code> condition returning <code>-3</code>.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4464506"}, "is_accepted": false, "score": 1, "last_activity_date": 1453900375, "creation_date": 1453900375, "answer_id": 35038367, "question_id": 35037681, "link": "https://stackoverflow.com/questions/35037681/cant-wrap-my-head-around-preprocessing-macros/35038367#35038367", "title": "Can&#39;t wrap my head around Preprocessing Macros", "body": "<p>Let me try to answer in a plain simple fashion.</p>\n\n<p>Firstly you are right macros do have their own logic and perhaps you understand how they are preprocessors and all. If not, then preprocessors are the first bit of code read by the compiler no matter where in your source code they appear.</p>\n\n<p>After the compiler checks the macros it is possible, like here in your case, that certain part of your normal code becomes \"invisible\" to the compiler. Now lets analyze how and what becomes hidden or invisible code in your case.</p>\n\n<p>In this case you are using <code>#define A</code> and <code>#define C</code>. This is similar to Boolean (but not exactly) that A and B have been declared 'true' or 'defined'.</p>\n\n<p>Then with <code>#ifdef A</code> (<code>#ifdef</code>: is the short form of if defined) there is a if statement here. It checks if A is 'defined' or not. In your case A is defined so we go on to the next part, which can be seen as code within this if statement. If A were not defined here we would go to the second <code>#else   // A is not defined</code>. </p>\n\n<p>So now we check <code>#ifdef B</code> and no B is not defined in your case so we go to the first <code>#else    // A is defined AND B is NOT defined</code> that follows. Hence setting the value of I to -2. The <code>#endif</code> is like the closing curly brackets of the second if statement. Next we go to the second <code>#endif</code> because A was defined hence we do not go into the second <code>#else</code>.</p>\n\n<p>In the end you get the answer as -2. I checked this code and it does return -2.</p>\n"}], "owner": {"reputation": 47, "user_id": 5826634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5cfccd864766e3cf39c8f3b155c32e1?s=128&d=identicon&r=PG&f=1", "display_name": "ran pos", "link": "https://stackoverflow.com/users/5826634/ran-pos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "closed_date": 1454106357, "answer_count": 4, "score": -1, "last_activity_date": 1453959551, "creation_date": 1453898479, "last_edit_date": 1453899552, "question_id": 35037681, "link": "https://stackoverflow.com/questions/35037681/cant-wrap-my-head-around-preprocessing-macros", "closed_reason": "Not suitable for this site", "title": "Can&#39;t wrap my head around Preprocessing Macros", "body": "<p>I'm still struggling with macros in C.</p>\n\n<p>So this one should return -2:</p>\n\n<pre><code>#define A\n#define C\nint main()\n{\n    int i =\n    #ifdef A\n    #ifdef B // if A AND B is defined\n        -1\n    #else    // A is defined AND B is NOT defined\n        -2\n    #endif\n    #else   // A is not defined\n        -3\n    #endif\n    ;\n    printf(\"%d \\n\", i);\n}\n</code></pre>\n\n<p>why isthis returning -3 then:</p>\n\n<pre><code>#define B\n#define C\nint main()\n{\n    int i =\n    #ifdef A\n    #ifdef C\n        -1\n    #else\n        -2\n    #endif\n    #else\n        -3\n    #endif\n    ;\n    printf(\"%d \\n\", i);\n}\n</code></pre>\n\n<p>It seems to me as if macros have their own logic.</p>\n"}, {"tags": ["c", "asynchronous", "gtk", "gio"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 4464757, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DotQT.png?s=128&g=1", "display_name": "Ivan Chebykin", "link": "https://stackoverflow.com/users/4464757/ivan-chebykin"}, "edited": false, "score": 0, "creation_date": 1453897215, "post_id": 35037033, "comment_id": 57798813, "body": "Good idea, I thought about flag, but where I should keep it?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 43, "user_id": 4464757, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DotQT.png?s=128&g=1", "display_name": "Ivan Chebykin", "link": "https://stackoverflow.com/users/4464757/ivan-chebykin"}, "edited": false, "score": 0, "creation_date": 1453897436, "post_id": 35037033, "comment_id": 57798972, "body": "@IVaN4B Since it have to be accessed from two different functions, it needs to be a global variable, but since it should not be exported you can make it <code>static</code>."}, {"owner": {"reputation": 43, "user_id": 4464757, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DotQT.png?s=128&g=1", "display_name": "Ivan Chebykin", "link": "https://stackoverflow.com/users/4464757/ivan-chebykin"}, "edited": false, "score": 0, "creation_date": 1453897633, "post_id": 35037033, "comment_id": 57799107, "body": "Hmm, I did that already, changing variable from callback doesn&#39;t seem to work."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 0, "last_activity_date": 1453896700, "creation_date": 1453896700, "answer_id": 35037033, "question_id": 35036909, "link": "https://stackoverflow.com/questions/35036909/c-glib-gio-how-to-list-files-asynchronously/35037033#35037033", "title": "C Glib GIO - How to list files asynchronously", "body": "<p>From <a href=\"https://developer.gnome.org/gio/stable/GFileEnumerator.html#g-file-enumerator-next-files-async\" rel=\"nofollow\">this <code>g_file_enumerator_next_files_async</code> reference</a>:</p>\n\n<blockquote>\n  <p>The callback can be called with less than <code>num_files</code> files in case of error or at the end of the enumerator.</p>\n</blockquote>\n\n<p>So if the number of files the callback receives is less that <code>BLOCK_SIZE</code>, then you know you have an error or <em>no more files available</em>.</p>\n\n<p>If that happens, set a flag that the loop in <code>read_dir</code> checks.</p>\n"}, {"tags": [], "owner": {"reputation": 43, "user_id": 4464757, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DotQT.png?s=128&g=1", "display_name": "Ivan Chebykin", "link": "https://stackoverflow.com/users/4464757/ivan-chebykin"}, "is_accepted": true, "score": 0, "last_activity_date": 1454088709, "creation_date": 1454088709, "answer_id": 35090543, "question_id": 35036909, "link": "https://stackoverflow.com/questions/35036909/c-glib-gio-how-to-list-files-asynchronously/35090543#35090543", "title": "C Glib GIO - How to list files asynchronously", "body": "<p>To do the listing you should call <code>g_file_enumerator_next_files_async</code> recursively, instead calling them in cycle, here' the example:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>static void add_file_callback(GObject *direnum,\n                GAsyncResult *result,\n                gpointer user_data){\n    GError *error = NULL;\n    GList *file_list = g_file_enumerator_next_files_finish(\n                    G_FILE_ENUMERATOR(direnum),\n                    result, &amp;error);\n    if( error ){\n        g_critical(\"Unable to add files to list, error: %s\", error-&gt;message);\n        g_object_unref(direnum);\n        g_error_free(error);\n        return;\n    }else if( file_list == NULL ){\n        /* Done listing */\n        g_object_unref(direnum);\n        return;\n    }else{\n\n        GList *node = file_list;\n        GFileInfo *info;\n        GtkTreeIter iter;\n        while(node){\n            info = node-&gt;data;\n            node = node-&gt;next;\n            ...add to store\n            g_object_unref(info);\n        }\n        g_file_enumerator_next_files_async(G_FILE_ENUMERATOR(direnum),\n                        BLOCK_SIZE,\n                        G_PRIORITY_LOW,\n                        NULL,\n                        add_file_callback,\n                        list);\n    }\n    g_list_free(file_list);\n}\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 4464757, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DotQT.png?s=128&g=1", "display_name": "Ivan Chebykin", "link": "https://stackoverflow.com/users/4464757/ivan-chebykin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 636, "favorite_count": 0, "accepted_answer_id": 35090543, "answer_count": 2, "score": 1, "last_activity_date": 1454088709, "creation_date": 1453896326, "question_id": 35036909, "link": "https://stackoverflow.com/questions/35036909/c-glib-gio-how-to-list-files-asynchronously", "title": "C Glib GIO - How to list files asynchronously", "body": "<p>I am creating a simple file viewer using GTK, and I want to load new directory asynchronously, to prevent hanging the whole program while loading.</p>\n\n<p>In GIO API there is <code>g_file_enumerator_next_files_async</code> function, that allows to asynchronously load files in blocks. But how can I tell, when directory listing is finished? Here code sample of what I'm came up with:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>static void add_file_callback(GObject *direnum,\n                GAsyncResult *result,\n                gpointer user_data){\n    GError *error = NULL;\n    GList *file_list = g_file_enumerator_next_files_finish(\n                    G_FILE_ENUMERATOR(direnum),\n                    result, &amp;error);    \n    if( file_list == NULL ){\n        g_critical(\"Unable to add files to list, error: %s\", error-&gt;message);\n\n    }\n    GList *next;\n    GFileInfo *info;\n    GtkTreeIter iter;\n    DirList *list = (DirList*)user_data;\n    while(file_list){\n        ...add file to list\n    }\n}\n\n\nint read_dir(const gchar *path, DirList *list){\n    g_assert(list != NULL &amp;&amp; list-&gt;store != NULL);\n    GtkTreeIter iter;\n    gtk_list_store_clear(list-&gt;store);\n\n    list-&gt;path = path;\n\n    GFile *dir = g_file_new_for_path(path);\n    GFileEnumerator *dirent = g_file_enumerate_children(dir,\n                                        \"*\",\n                                        G_FILE_QUERY_INFO_NOFOLLOW_SYMLINKS,\n                                        NULL,\n                                        NULL);\n    while( TRUE ){ /* &lt;============================== When to end? */\n        g_file_enumerator_next_files_async(dirent,\n                        BLOCK_SIZE,\n                        G_PRIORITY_DEFAULT,\n                        NULL,\n                        add_file_callback,\n                        list);\n    }\n    g_file_enumerator_close(dirent, NULL, NULL);\n    g_object_unref(dirent);\n    g_object_unref(dir);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 4998, "user_id": 2180959, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/MTxPr.jpg?s=128&g=1", "display_name": "Heisenberg", "link": "https://stackoverflow.com/users/2180959/heisenberg"}, "edited": false, "score": 0, "creation_date": 1453896306, "post_id": 35036790, "comment_id": 57798096, "body": "Your question is not clear. What do you mean by &quot;array has any identical numbers that are the same, and if one of them is bigger/equals to a given number.&quot;"}, {"owner": {"reputation": 33, "user_id": 5846119, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/UxZK9.jpg?s=128&g=1", "display_name": "Voxito", "link": "https://stackoverflow.com/users/5846119/voxito"}, "reply_to_user": {"reputation": 4998, "user_id": 2180959, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/MTxPr.jpg?s=128&g=1", "display_name": "Heisenberg", "link": "https://stackoverflow.com/users/2180959/heisenberg"}, "edited": false, "score": 0, "creation_date": 1453896343, "post_id": 35036790, "comment_id": 57798122, "body": "I&#39;ll give an example: If the array is 0 1 2 3 1 the function will return 0, cause the second and the last number are identical. The function will also return 0 if the given number is 5, and one of the numbers is bigger or equals to 5, for example 0 2 3 4 5"}, {"owner": {"reputation": 10487, "user_id": 5708620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b0f8c70394b748ed7ec1a3a11a749b1?s=128&d=identicon&r=PG&f=1", "display_name": "Danny_ds", "link": "https://stackoverflow.com/users/5708620/danny-ds"}, "edited": false, "score": 0, "creation_date": 1453896606, "post_id": 35036790, "comment_id": 57798329, "body": "I formatted your code. It may be easier to find the problem now.."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1453896697, "post_id": 35036790, "comment_id": 57798411, "body": "Please don&#39;t use <code>l</code> (lower-case <code>L</code>) as a variable name. It looks too much like the numeral <code>1</code>. You have to look very carefully to see what <code>int check3 = l;</code> means."}, {"owner": {"reputation": 545, "user_id": 3404790, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/284304e7a2bc28b900f1990d0cc45231?s=128&d=identicon&r=PG&f=1", "display_name": "novice", "link": "https://stackoverflow.com/users/3404790/novice"}, "edited": false, "score": 0, "creation_date": 1453897023, "post_id": 35036790, "comment_id": 57798666, "body": "Could you point out what is the error you are getting/what part is not working"}, {"owner": {"reputation": 33, "user_id": 5846119, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/UxZK9.jpg?s=128&g=1", "display_name": "Voxito", "link": "https://stackoverflow.com/users/5846119/voxito"}, "edited": false, "score": 0, "creation_date": 1453897120, "post_id": 35036790, "comment_id": 57798733, "body": "Thanks for the edit Danny. And I changed the variable to &#39;num&#39;"}, {"owner": {"reputation": 33, "user_id": 5846119, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/UxZK9.jpg?s=128&g=1", "display_name": "Voxito", "link": "https://stackoverflow.com/users/5846119/voxito"}, "reply_to_user": {"reputation": 545, "user_id": 3404790, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/284304e7a2bc28b900f1990d0cc45231?s=128&d=identicon&r=PG&f=1", "display_name": "novice", "link": "https://stackoverflow.com/users/3404790/novice"}, "edited": false, "score": 0, "creation_date": 1453897192, "post_id": 35036790, "comment_id": 57798795, "body": "@novice Well, the error is that I gets only &#39;1&#39; and never a &#39;0&#39;, no matter what array I put in"}, {"owner": {"reputation": 545, "user_id": 3404790, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/284304e7a2bc28b900f1990d0cc45231?s=128&d=identicon&r=PG&f=1", "display_name": "novice", "link": "https://stackoverflow.com/users/3404790/novice"}, "edited": false, "score": 0, "creation_date": 1453897430, "post_id": 35036790, "comment_id": 57798967, "body": "@Voxito - You mean it always returns a &#39;0&#39; and never a &#39;1&#39;? That is what i get when i run your code"}, {"owner": {"reputation": 33, "user_id": 5846119, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/UxZK9.jpg?s=128&g=1", "display_name": "Voxito", "link": "https://stackoverflow.com/users/5846119/voxito"}, "reply_to_user": {"reputation": 545, "user_id": 3404790, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/284304e7a2bc28b900f1990d0cc45231?s=128&d=identicon&r=PG&f=1", "display_name": "novice", "link": "https://stackoverflow.com/users/3404790/novice"}, "edited": false, "score": 0, "creation_date": 1453897560, "post_id": 35036790, "comment_id": 57799064, "body": "@novice The opposite, the function always returns &#39;1&#39; ;/"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 5846119, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/UxZK9.jpg?s=128&g=1", "display_name": "Voxito", "link": "https://stackoverflow.com/users/5846119/voxito"}, "edited": false, "score": 0, "creation_date": 1453898743, "post_id": 35037311, "comment_id": 57799876, "body": "Thanks for the time took you to make it, I didn&#39;t think about copying the original and comparing it... looks alot easier right now."}, {"owner": {"reputation": 4998, "user_id": 2180959, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/MTxPr.jpg?s=128&g=1", "display_name": "Heisenberg", "link": "https://stackoverflow.com/users/2180959/heisenberg"}, "edited": false, "score": 0, "creation_date": 1453899321, "post_id": 35037311, "comment_id": 57800310, "body": "I thought may be using extra space was not an option, as it&#39;s not giving any time complexity benefit. :D"}, {"owner": {"reputation": 3330, "user_id": 5684370, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/17e28adec94010c4a5b5a21af7b15745?s=128&d=identicon&r=PG", "display_name": "ganchito55", "link": "https://stackoverflow.com/users/5684370/ganchito55"}, "reply_to_user": {"reputation": 4998, "user_id": 2180959, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/MTxPr.jpg?s=128&g=1", "display_name": "Heisenberg", "link": "https://stackoverflow.com/users/2180959/heisenberg"}, "edited": false, "score": 1, "creation_date": 1453899752, "post_id": 35037311, "comment_id": 57800582, "body": "@Anshul I improved my solution. Thanks for your comment."}], "tags": [], "owner": {"reputation": 3330, "user_id": 5684370, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/17e28adec94010c4a5b5a21af7b15745?s=128&d=identicon&r=PG", "display_name": "ganchito55", "link": "https://stackoverflow.com/users/5684370/ganchito55"}, "is_accepted": true, "score": 2, "last_activity_date": 1453899711, "last_edit_date": 1592644375, "creation_date": 1453897467, "answer_id": 35037311, "question_id": 35036790, "link": "https://stackoverflow.com/questions/35036790/checking-array-for-identical-numbers-and-their-value/35037311#35037311", "title": "Checking array for identical numbers and their value", "body": "<p>I create a new array where I'm going to save the numbers so I can check if you have a repeat number in the array. I also have one more argument in the function to know the size of the array.</p>\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint checkArray(int *arr, int size, int number){\n    int i,j;\n    int *countArray = calloc(size,sizeof(int));\n    for(i=0;i&lt;size;i++){\n        if(arr[i]&gt;=number){  //Check &gt;= number\n            free(countArray);\n            return 0;\n        }\n        for(j=0;j&lt;i;j++){ //Check repeat number\n            if(countArray[j]==arr[i]){\n                free(countArray);\n                return 0;\n            }\n        }\n        countArray[j]=arr[i]; //no repeat number so we save it.\n    }\n\n    free(countArray);\n    return -1; //Error\n\n}\n\nint main(){\n  int arr[6] = {0,8,2,3,4,1};\n  printf(&quot;Result %d&quot;,checkArray(arr,6,5));\n\n}\n</code></pre>\n<p>I hope this can help you.</p>\n<h2>Update without new array</h2>\n<pre><code>int checkArray(int *arr, int size, int number){\n    int i,j;\n    for(i=0;i&lt;size;i++){\n        if(arr[i]&gt;=number){\n            return 0;\n        }\n        for(j=0;j&lt;i;j++){\n            if(arr[i]==arr[j]){\n                return 0;\n            }\n        }\n    }    \n    return -1; //Error    \n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 5846119, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/UxZK9.jpg?s=128&g=1", "display_name": "Voxito", "link": "https://stackoverflow.com/users/5846119/voxito"}, "edited": false, "score": 0, "creation_date": 1453898848, "post_id": 35037371, "comment_id": 57799953, "body": "Yea I changed my code too many times, in the original one I start from arr+1, can&#39;t remember why I changed it back.. thanks though!"}, {"owner": {"reputation": 4998, "user_id": 2180959, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/MTxPr.jpg?s=128&g=1", "display_name": "Heisenberg", "link": "https://stackoverflow.com/users/2180959/heisenberg"}, "reply_to_user": {"reputation": 33, "user_id": 5846119, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/UxZK9.jpg?s=128&g=1", "display_name": "Voxito", "link": "https://stackoverflow.com/users/5846119/voxito"}, "edited": false, "score": 0, "creation_date": 1453898978, "post_id": 35037371, "comment_id": 57800045, "body": "There are many other ways to handle this problem. I tried to find the problem in your code. Because did not know the contraints, may be you were not allowed to use extra space. :)"}], "tags": [], "owner": {"reputation": 4998, "user_id": 2180959, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/MTxPr.jpg?s=128&g=1", "display_name": "Heisenberg", "link": "https://stackoverflow.com/users/2180959/heisenberg"}, "is_accepted": false, "score": 1, "last_activity_date": 1453900437, "last_edit_date": 1453900437, "creation_date": 1453897655, "answer_id": 35037371, "question_id": 35036790, "link": "https://stackoverflow.com/questions/35036790/checking-array-for-identical-numbers-and-their-value/35037371#35037371", "title": "Checking array for identical numbers and their value", "body": "<p>Change your upper for loop to:</p>\n\n<pre><code>  for ( ; num &gt; 0; num--) {\n     if(arr[i]&gt;=number){\n         return 0;\n      }\n        int check3 = num;\n        poi=arr+1;\n        for ( ; check3 &gt; 0; check3--) {\n            if (*arr == *poi)\n                return 0;\n            poi++;\n        }\n        arr++;\n    }\n</code></pre>\n\n<p>and remove the bottom one.</p>\n"}, {"tags": [], "owner": {"reputation": 675, "user_id": 3149741, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/1zN7t.png?s=128&g=1", "display_name": "Bishoy", "link": "https://stackoverflow.com/users/3149741/bishoy"}, "is_accepted": false, "score": 0, "last_activity_date": 1453898330, "last_edit_date": 1453898330, "creation_date": 1453897866, "answer_id": 35037448, "question_id": 35036790, "link": "https://stackoverflow.com/questions/35036790/checking-array-for-identical-numbers-and-their-value/35037448#35037448", "title": "Checking array for identical numbers and their value", "body": "<p>The mistakes here are as following:</p>\n\n<p>1- You need to change the lines:</p>\n\n<pre><code>int check3 = num;\nfor ( ; num &gt; 1; num--) {\n</code></pre>\n\n<p>to be:</p>\n\n<pre><code>for ( ; num &gt; 1; num --) { \n    int check3 = check; // Move to inside loop to reset each time for a fresh inner loop and use check instead of num to reset the value\n</code></pre>\n\n<p>2- You need to change the line:</p>\n\n<pre><code>for ( ; check3 &gt;= 0; check3--) {\n</code></pre>\n\n<p>To be</p>\n\n<pre><code>for ( ; check3 &gt; 0; check3--) { // Because `&gt;=0` means attempting to read past the array\n</code></pre>\n\n<p>3- <code>poi</code> should be initialised every time in the loop as <code>arr+1</code> to skip comparing the same member of the array to itself, and to skip re-comparing members more than one time.</p>\n\n<p>I suggest re-writing the method with better code style to enable easier detection of such errors and typos</p>\n"}], "owner": {"reputation": 33, "user_id": 5846119, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/UxZK9.jpg?s=128&g=1", "display_name": "Voxito", "link": "https://stackoverflow.com/users/5846119/voxito"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 35037311, "answer_count": 3, "score": 1, "last_activity_date": 1453900437, "creation_date": 1453895997, "last_edit_date": 1453896844, "question_id": 35036790, "link": "https://stackoverflow.com/questions/35036790/checking-array-for-identical-numbers-and-their-value", "title": "Checking array for identical numbers and their value", "body": "<p>As part of a program that I have to make, one of the function that I need to program should check if the array has any identical numbers that are the same, and if one of them is bigger/equals to a given number.</p>\n\n<p>The given number is also the amount of numbers in the array</p>\n\n<p>This is what I have so far:</p>\n\n<pre><code>int checkarray(int *arr, int num)\n{\n    int check = num;\n    int check2 = num;\n    int *lor;\n    int *poi;\n    int *another;\n\n    another = arr;\n    lor = arr;\n    poi = arr;\n    int check3 = num;\n\n    for ( ; num &gt; 1; num--) {\n\n        for ( ; check3 &gt;= 0; check3--) {\n\n            if (*arr == *poi)\n                return 0;\n            poi++;\n        }\n        arr++;\n        poi = another;\n    }\n\n    for ( ; check2 &gt; 0; check2--) {\n\n        if (*lor &gt;= check)\n            return 0;\n        lor++;\n    }\n    return 1;\n}\n</code></pre>\n\n<p>I know that I made too many pointers/int for the function, but that's not the problem..</p>\n\n<p>The part of checking for a given value works fine if I'm not mistaken so I think you can ignore that part (that's the last 'for' loop)</p>\n\n<p>I know it should be easy but for some reason I just can't get it to work...</p>\n\n<p>Edit:</p>\n\n<p>I'll give an example: If the array is 0 1 2 3 1 the function will return 0, cause the second and the last number are identical. The function will also return 0 if the given number is 5, and one of the numbers is bigger or equals to 5, for example 0 1 2 5 4.</p>\n\n<p>Otherwise, the function returns 1.</p>\n"}, {"tags": ["c", "arrays", "structure"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1453896064, "post_id": 35036766, "comment_id": 57797943, "body": "Question: What if I enter 5?"}, {"owner": {"reputation": 43, "user_id": 5846525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4c75b622bc82673f57ab50f186f5abc?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/5846525/raj"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1453896279, "post_id": 35036766, "comment_id": 57798073, "body": "you will get message Wrong"}, {"owner": {"reputation": 510, "user_id": 5778300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a214fbbf28e4a6615ff6891f99e06c5?s=128&d=identicon&r=PG&f=1", "display_name": "Flikk", "link": "https://stackoverflow.com/users/5778300/flikk"}, "edited": false, "score": 0, "creation_date": 1453896345, "post_id": 35036766, "comment_id": 57798123, "body": "@Raj that is incorrect. <code>5&lt;=12</code> so it won&#39;t go into the <code>else</code>"}, {"owner": {"reputation": 43, "user_id": 5846525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4c75b622bc82673f57ab50f186f5abc?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/5846525/raj"}, "reply_to_user": {"reputation": 510, "user_id": 5778300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a214fbbf28e4a6615ff6891f99e06c5?s=128&d=identicon&r=PG&f=1", "display_name": "Flikk", "link": "https://stackoverflow.com/users/5778300/flikk"}, "edited": false, "score": 0, "creation_date": 1453896663, "post_id": 35036766, "comment_id": 57798375, "body": "Thanks @Flikk and sourav I got it and i edited that one. Now, I am still left with stu[en-11]"}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 5846525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4c75b622bc82673f57ab50f186f5abc?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/5846525/raj"}, "edited": false, "score": 0, "creation_date": 1453897615, "post_id": 35037067, "comment_id": 57799096, "body": "I have one more question. as you can see there is &#39; - &#39; sign between en-11 so is this indicate something ?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 43, "user_id": 5846525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4c75b622bc82673f57ab50f186f5abc?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/5846525/raj"}, "edited": false, "score": 1, "creation_date": 1453897931, "post_id": 35037067, "comment_id": 57799321, "body": "@Raj that&#39;s a subtraction. :) like 12 - 11 = 1, 11- 11 =0...."}, {"owner": {"reputation": 43, "user_id": 5846525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4c75b622bc82673f57ab50f186f5abc?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/5846525/raj"}, "edited": false, "score": 0, "creation_date": 1453898630, "post_id": 35037067, "comment_id": 57799798, "body": "Great! This was the real problem. I thought  it is something special rather than subtraction. Now everything is neat and clean. Thanks"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1453904327, "post_id": 35037067, "comment_id": 57803884, "body": "FYI: Rolled back to rev 1, because the question was changed, making your answer obsolete. Please check question if you have to adopt your answer."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1453897415, "last_edit_date": 1453897415, "creation_date": 1453896755, "answer_id": 35037067, "question_id": 35036766, "link": "https://stackoverflow.com/questions/35036766/i-do-not-understand-this-stuen-11-line-of-code-how-exactly-does-accessing-a-s/35037067#35037067", "title": "I do not understand this stu[en-11] line of code. How exactly does accessing a structure member work?", "body": "<p>The correct index for <code>stu</code> in your case is 0 and 1.</p>\n\n<p>So, the <code>en</code> value has to be either 11 or 12 to get the valid access. You'll be needing the OR operator <code>||</code> instead of the AND operator <code>&amp;&amp;</code>.</p>\n\n<p>Change</p>\n\n<pre><code>  if(en==11 &amp;&amp; en==12)\n</code></pre>\n\n<p>to</p>\n\n<pre><code> if(en==11 || en==12)\n</code></pre>\n\n<hr>\n\n<p>Coming to the <code>stu[en-11]</code> part, as you've asked, the index value has to be an <code>int</code>, and the expression <code>en-11</code> produces an <code>int</code>. That's all.</p>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 5846525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4c75b622bc82673f57ab50f186f5abc?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/5846525/raj"}, "edited": false, "score": 0, "creation_date": 1453898751, "post_id": 35037110, "comment_id": 57799879, "body": "Thank you very much @Flikk"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1453904331, "post_id": 35037110, "comment_id": 57803886, "body": "FYI: Rolled back to rev 1, because the question was changed, making your answer obsolete. Please check question if you have to adopt your answer."}], "tags": [], "owner": {"reputation": 510, "user_id": 5778300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a214fbbf28e4a6615ff6891f99e06c5?s=128&d=identicon&r=PG&f=1", "display_name": "Flikk", "link": "https://stackoverflow.com/users/5778300/flikk"}, "is_accepted": false, "score": 0, "last_activity_date": 1453896882, "creation_date": 1453896882, "answer_id": 35037110, "question_id": 35036766, "link": "https://stackoverflow.com/questions/35036766/i-do-not-understand-this-stuen-11-line-of-code-how-exactly-does-accessing-a-s/35037110#35037110", "title": "I do not understand this stu[en-11] line of code. How exactly does accessing a structure member work?", "body": "<p>You can access both elements by entering 11 or 12 because:</p>\n\n<p>So here is your array:</p>\n\n<pre><code>stu[2] = {\n        {11, \"Rj\"},\n        {12, \"Ay\"}\n        };\n\nen = 11;\nprintf(\"%s\", stu[en-11].name); //stu[11-11] is stu[0] (the first element in your array)\n\nen = 12;\nprintf(\"%s\", stu[en-11].name); //stu[12-11] is stu[1] (the second element in your array)\n</code></pre>\n\n<p>But you have a big problem with your <code>if (en &lt;= 12)</code>. If you enter anything lower then 11, you will calculate a invalid index for your array.</p>\n"}], "owner": {"reputation": 43, "user_id": 5846525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4c75b622bc82673f57ab50f186f5abc?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/5846525/raj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "closed_date": 1454097231, "answer_count": 2, "score": -3, "last_activity_date": 1454015061, "creation_date": 1453895919, "last_edit_date": 1454015061, "question_id": 35036766, "link": "https://stackoverflow.com/questions/35036766/i-do-not-understand-this-stuen-11-line-of-code-how-exactly-does-accessing-a-s", "closed_reason": "Needs details or clarity", "title": "I do not understand this stu[en-11] line of code. How exactly does accessing a structure member work?", "body": "<pre><code>#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\nstruct student\n{\n    int enroll;\n    char name[50];\n}stu[2] = {\n            {11, \"Rj\"},\n            {12, \"Ay\"}\n            };\nint main()\n{\n    int en;\n    printf(\"Enter Enroll: \");\n    scanf(\"%d\", &amp;en);\n    if(en==11 || en==12)\n    {\n        printf(\"%s\", stu[en-11].name);\n        printf(\"\\t%d\", stu[en-11].enroll);\n    }\n    else\n        printf(\"Wrong\");\n    return 0;\n}\n</code></pre>\n\n<p><code>stu[2]</code> is an array of structure so generally I should use a for loop for accessing each members of structure, or something like this <code>stu[0].name</code>, <code>stu[1].name</code>, but in this code below I can also access members using <code>stu[en-11]</code>. Please help. How does this work?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 3, "creation_date": 1453895084, "post_id": 35036417, "comment_id": 57797235, "body": "A suggestion: try to use <code>fgets()</code> instead of using <code>gets()</code>"}, {"owner": {"reputation": 11187, "user_id": 1147772, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/OAgfw.jpg?s=128&g=1", "display_name": "Drax", "link": "https://stackoverflow.com/users/1147772/drax"}, "edited": false, "score": 2, "creation_date": 1453895171, "post_id": 35036417, "comment_id": 57797298, "body": "Why/how should it be &quot;coded&quot; ?"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1453895173, "post_id": 35036417, "comment_id": 57797299, "body": "Post your complete code.  Also, <code>fread(g,sizeof(g[0]),strlen(s),f);</code> will not read a NUL-terminated string given the code you <i>have</i> posted."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 7, "creation_date": 1453895257, "post_id": 35036417, "comment_id": 57797344, "body": "Please try to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, <b>Complete</b>, and Verifiable Example</a> and show us. And by &quot;complete&quot; I of course mean with variable declarations."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1453895368, "post_id": 35036417, "comment_id": 57797418, "body": "As for your problem, the file <i>is</i> coded, in whatever encoding you read from the terminal, which is most likely ASCII. That means what you write will <i>also</i> be that encoding (i.e. ASCII) which is very readable as plain text."}, {"owner": {"reputation": 8687, "user_id": 325117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f0766debb859466aed4b305cc915d8e?s=128&d=identicon&r=PG", "display_name": "Martin Broadhurst", "link": "https://stackoverflow.com/users/325117/martin-broadhurst"}, "edited": false, "score": 0, "creation_date": 1453895457, "post_id": 35036417, "comment_id": 57797476, "body": "A small tip: <code>sizeof(char)</code> is implicitly 1, so you don&#39;t need to calculate it."}, {"owner": {"reputation": 13, "user_id": 4864953, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Q5aiAC9tyXk/AAAAAAAAAAI/AAAAAAAAAL8/SLvkPA-rChw/photo.jpg?sz=128", "display_name": "Speedy .RoGamer", "link": "https://stackoverflow.com/users/4864953/speedy-rogamer"}, "edited": false, "score": 0, "creation_date": 1453895579, "post_id": 35036417, "comment_id": 57797564, "body": "Ok, i understand. I thought it was always supposed to not be readable when opening it with something like notepad because my last program (which was using arrays) made me a .dat file which looked like this when I opened it with notepad :   &gt;    I and some hiddent characters which I can&#39;t copy paste"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1453895797, "post_id": 35036417, "comment_id": 57797738, "body": "Let me guess, it was an array of numerical data, or structures, or something else that wasn&#39;t actual text? The <code>fwrite</code> function writes out data as it is in memory, and for text it&#39;s usually in ASCII (or UTF-8 or similar encoding), while integers and floating point values are stored in their respective encoding."}, {"owner": {"reputation": 13, "user_id": 4864953, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Q5aiAC9tyXk/AAAAAAAAAAI/AAAAAAAAAL8/SLvkPA-rChw/photo.jpg?sz=128", "display_name": "Speedy .RoGamer", "link": "https://stackoverflow.com/users/4864953/speedy-rogamer"}, "edited": false, "score": 0, "creation_date": 1453895878, "post_id": 35036417, "comment_id": 57797815, "body": "Yes, that was it. Thanks !"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 8687, "user_id": 325117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f0766debb859466aed4b305cc915d8e?s=128&d=identicon&r=PG", "display_name": "Martin Broadhurst", "link": "https://stackoverflow.com/users/325117/martin-broadhurst"}, "edited": false, "score": 0, "creation_date": 1453896188, "post_id": 35036417, "comment_id": 57798013, "body": "@MartinBroadhurst <i><code>sizeof(char)</code> is implicitly 1</i> To be (overly?) pedantic, :-), it&#39;s explicitly one, per <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\"><b>6.5.3.4 The <code>sizeof</code> and <code>_Alignof</code> operators</b></a>:  <i>When <code>sizeof</code> is applied to an operand that has type <code>char</code>, <code>unsigned char</code>, or <code>signed char</code>,  (or a qualified version thereof) the result is 1.</i>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1454007785, "post_id": 35036417, "comment_id": 57862695, "body": "Never use <code>gets()</code> it was depreciated and in the latest standard is completely removed.   The main problem is it allows the input to overrun the input buffer, resulting in undefined behaviour and leading to a seg fault event."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1454007933, "post_id": 35036417, "comment_id": 57862795, "body": "for ease of understanding and readability by us humans 1) separate code blocks (for, if, else, while, do...while, switch, case, default) by a single blank line.  2) always follow the axiom: <i>only one statement per line and (at most) one variable declaration per statement.</i>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1454008133, "post_id": 35036417, "comment_id": 57862920, "body": "in the posted code, before calling <code>exit()</code>, the code should let the user know what happened.  Typically the user can be properly informed by calling <code>perror()</code> as that will output to stderr the enclosed text and the associated system error message"}], "answers": [{"tags": [], "owner": {"reputation": 2723, "user_id": 2055152, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c31b52047850cce2b29047e43b0642dc?s=128&d=identicon&r=PG", "display_name": "scristalli", "link": "https://stackoverflow.com/users/2055152/scristalli"}, "is_accepted": true, "score": 2, "last_activity_date": 1453895281, "creation_date": 1453895281, "answer_id": 35036535, "question_id": 35036417, "link": "https://stackoverflow.com/questions/35036417/what-is-wrong-with-my-dat-file/35036535#35036535", "title": "What is wrong with my .dat file", "body": "<p>Nothing is wrong with your .dat file.</p>\n\n<blockquote>\n  <p>My problem is that the .dat from what I know should be coded</p>\n</blockquote>\n\n<p>What does <em>coded</em> mean? Changing a file extension from .txt to .dat doesn't make any difference, in fact it's just renaming it. Microsoft Windows or any other OS may open specific file types with specific programs by default, but that doesn't mean that you can't use the program of your choice.\nIn this case, notepad will simply read the file contents, which are the characters you read from keyboard and written to it, without any \"coding\" (except ASCII encoding of course).</p>\n"}], "owner": {"reputation": 13, "user_id": 4864953, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Q5aiAC9tyXk/AAAAAAAAAAI/AAAAAAAAAL8/SLvkPA-rChw/photo.jpg?sz=128", "display_name": "Speedy .RoGamer", "link": "https://stackoverflow.com/users/4864953/speedy-rogamer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 396, "favorite_count": 0, "accepted_answer_id": 35036535, "answer_count": 1, "score": 0, "last_activity_date": 1453895377, "creation_date": 1453894961, "last_edit_date": 1453895377, "question_id": 35036417, "link": "https://stackoverflow.com/questions/35036417/what-is-wrong-with-my-dat-file", "title": "What is wrong with my .dat file", "body": "<p>My code takes a string, writes it in a <code>.dat</code> file and then reads it from the <code>.dat</code> file and posts it in the console. </p>\n\n<p>My problem is that the <code>.dat</code> from what I know should be coded, and I couldn't simply open it and see what's there. But when I open the <code>d.at</code> file with notepad, it behaves the same as a <code>.txt</code> file and I can see all it's written.</p>\n\n<pre><code>   #include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n    FILE *f;\n    char s[100],g[100];\n\n    if((f=fopen(\"text.dat\",\"wb\"))==NULL)\n    {\n        exit(1);\n    }\n    printf(\"write text: \"); gets(s);\n    int n=strlen(s);\n    fwrite(s,sizeof(s[0]),n,f);\n    fclose (f);\n    if((f=fopen(\"text.dat\",\"rb\"))==NULL)\n    {\n        exit(1);\n    }\n    fread(g,sizeof(g[0]),strlen(s),f);\n    puts(g);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "standards", "stdio"], "answers": [{"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 3, "last_activity_date": 1453894281, "last_edit_date": 1453894281, "creation_date": 1453893934, "answer_id": 35036033, "question_id": 35035982, "link": "https://stackoverflow.com/questions/35035982/is-snprintfnull-0-behavior-standardized/35036033#35036033", "title": "Is snprintf(NULL,0,...); behavior standardized?", "body": "<p>According to <a href=\"http://man7.org/linux/man-pages/man3/snprintf.3.html\" rel=\"nofollow\">snprintf(3)</a> it is standardized by POSIX &amp; by C99. That man page also says:</p>\n\n<blockquote>\n<pre><code>   Concerning the return value of snprintf(), SUSv2 and C99 contradict\n   each other: when snprintf() is called with size=0 then SUSv2\n   stipulates an unspecified return value less than 1, while C99 allows\n   str to be NULL in this case, and gives the return value (as always)\n   as the number of characters that would have been written in case the\n   output string has been large enough.  POSIX.1-2001 and later align\n   their specification of snprintf() with C99.\n</code></pre>\n</blockquote>\n\n<p>So <code>int i=snprintf(NULL, 0, \"</code><em>some-format-string</em><code>\",</code>.... <code>);</code> should put in <code>i</code> a negative number on failure, or a non-negative output size on success.</p>\n\n<p><sup>(I don't exactly know what happens if the output size is bigger than <code>INT_MAX</code> which is <em>very</em> unusual; I guess that it would be a failure case)</sup></p>\n"}, {"comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1453893970, "post_id": 35036037, "comment_id": 57796496, "body": "Good, but what exactly are you quoting?"}, {"owner": {"reputation": 4195, "user_id": 2432477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a516bc16804edd78d8f6c2a7e06f07b?s=128&d=identicon&r=PG&f=1", "display_name": "nouney", "link": "https://stackoverflow.com/users/2432477/nouney"}, "edited": false, "score": 0, "creation_date": 1453894123, "post_id": 35036037, "comment_id": 57796604, "body": "<a href=\"http://www.open-std.org/JTC1/SC22/WG14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">C11 Draft</a>, Section 7.21.6.5."}], "tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 12, "last_activity_date": 1453894467, "last_edit_date": 1453894467, "creation_date": 1453893945, "answer_id": 35036037, "question_id": 35035982, "link": "https://stackoverflow.com/questions/35035982/is-snprintfnull-0-behavior-standardized/35036037#35036037", "title": "Is snprintf(NULL,0,...); behavior standardized?", "body": "<p>Yes.</p>\n\n<p>From <strong>7.21.6.5  The snprintf function</strong>, N1570 (C11 draft):</p>\n\n<blockquote>\n  <p>The snprintf function is equivalent to fprintf, except that the output\n  is written into an array (speci\ufb01ed by argument s) rather than to a\n  stream. <strong>If n is zero, nothing is written, and s may  be  a  null \n  pointer</strong>. Otherwise,  output  characters  beyond  the n-1st  are\n  discarded rather than being written to the array, and a null character\n  is written at the end of the characters actually written into the\n  array. If copying takes place between objects that overlap, the\n  behavior is undefined.</p>\n</blockquote>\n\n<p>It's a useful method to find the length of unknown data for which you can first find the necessary length and then allocate the exact amount of memory. A typical use case is:</p>\n\n<pre><code>char *p;\n\nint len = snprintf(0, 0, \"%s %s some_long_string_here_\", str1, str2);\n\np = malloc(len + 1);\n\nsnprintf(p, len + 1, \"%s %s some_long_string_here\", str1, str2);\n</code></pre>\n"}], "owner": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1153, "favorite_count": 3, "accepted_answer_id": 35036037, "answer_count": 2, "score": 13, "last_activity_date": 1453894467, "creation_date": 1453893793, "question_id": 35035982, "link": "https://stackoverflow.com/questions/35035982/is-snprintfnull-0-behavior-standardized", "title": "Is snprintf(NULL,0,...); behavior standardized?", "body": "<p>On Linux it returns the number of characters that would be printed.</p>\n\n<p>Is this standardized behavior?</p>\n"}, {"tags": ["c", "embedded", "modbus"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1453912651, "post_id": 35034712, "comment_id": 57810211, "body": "Try with another tty, like <code>ttyS3</code>, if installed. Surely cannot work with posted code <code>&quot;COM3&quot;</code> od <code>USB0</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5838397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f773079aef5d2703d97000ee376ee06b?s=128&d=identicon&r=PG&f=1", "display_name": "Ozayh Malyk", "link": "https://stackoverflow.com/users/5838397/ozayh-malyk"}, "is_accepted": false, "score": 0, "last_activity_date": 1454344612, "creation_date": 1454344612, "answer_id": 35135596, "question_id": 35034712, "link": "https://stackoverflow.com/questions/35034712/how-to-implement-modbus-rtu-master-in-digi-module-connect-me-9210/35135596#35135596", "title": "how to implement Modbus RTU Master in Digi Module Connect me 9210", "body": "<p>I have fixed my Errors . There was an API Issue in the Digi Module while opening the default port \"/com/0\". </p>\n\n<p>Also had to change the libmodbus library little bit to work with Digi because it was using the flags not supported by the device.</p>\n"}], "owner": {"reputation": 1, "user_id": 5838397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f773079aef5d2703d97000ee376ee06b?s=128&d=identicon&r=PG&f=1", "display_name": "Ozayh Malyk", "link": "https://stackoverflow.com/users/5838397/ozayh-malyk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 129, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1454344612, "creation_date": 1453890338, "question_id": 35034712, "link": "https://stackoverflow.com/questions/35034712/how-to-implement-modbus-rtu-master-in-digi-module-connect-me-9210", "title": "how to implement Modbus RTU Master in Digi Module Connect me 9210", "body": "<p>I am trying to implement Modbus RTU Master in Digi Module connect me 9210 device. For this purpose I am using libmodbus library. </p>\n\n<p>What would be device name I have to give in NetOs to connect with my local Computer.?</p>\n\n<p>Now I am using </p>\n\n<pre><code>ctx = modbus_new_rtu(\"COM3\", 19200, 'N', 8, 1);\nmodbus_set_slave(ctx, SERVER_ID);\n\n/* TCP */\n//  ctx = modbus_new_tcp(\"10.0.0.66\", 502);\n\nmodbus_set_debug(ctx, TRUE);\n\nif (modbus_connect(ctx) == -1) {\n    fprintf(stderr, \"Connection failed: %s\\n\",\n                modbus_strerror(errno));\n    modbus_free(ctx);\n    return -1;\n}\n</code></pre>\n\n<p>But its keep saying connection failed. I have also tried \"/dev/USB0\" and \"/dev/ttyS0\". I have Modbus Slave in my local computer to test with the Module client.</p>\n"}, {"tags": ["android", "c", "android-studio", "android-ndk", "gradle-experimental"], "comments": [{"owner": {"reputation": 624, "user_id": 1887309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8ba562230112c5953454a7b7ec7acb6?s=128&d=identicon&r=PG", "display_name": "Cedmundo", "link": "https://stackoverflow.com/users/1887309/cedmundo"}, "edited": false, "score": 0, "creation_date": 1453927869, "post_id": 35034419, "comment_id": 57819676, "body": "Did you download all OpenSSL library (including the .c files)? Or only the headers (.h) and static or dynamic libraries (.a, .so)?"}, {"owner": {"reputation": 1018, "user_id": 3930169, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100001228313886/picture?type=large", "display_name": "Phan Sinh", "link": "https://stackoverflow.com/users/3930169/phan-sinh"}, "edited": false, "score": 0, "creation_date": 1486112907, "post_id": 35034419, "comment_id": 71215120, "body": "Did you succeed yet?"}], "answers": [{"tags": [], "owner": {"reputation": 2317, "user_id": 416621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8eda3472f8309ea90d1f16989101dc93?s=128&d=identicon&r=PG", "display_name": "Ian Ni-Lewis", "link": "https://stackoverflow.com/users/416621/ian-ni-lewis"}, "is_accepted": false, "score": 0, "last_activity_date": 1460386016, "creation_date": 1460386016, "answer_id": 36552004, "question_id": 35034419, "link": "https://stackoverflow.com/questions/35034419/how-to-add-openssl-lib-in-android-studio-with-experimental-gradle-plugin-ndk/36552004#36552004", "title": "How to add openssl lib in android studio with experimental gradle plugin (NDK)?", "body": "<p>You need to specify the openssl library as a dependency. There's a snippet <a href=\"http://tools.android.com/tech-docs/new-build-system/gradle-experimental#TOC-0.4.x---0.6.0-alpha1\" rel=\"nofollow\">here</a> showing how to add a prebuilt library. </p>\n"}], "owner": {"reputation": 111, "user_id": 5005537, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-W3p6uSUIRYo/AAAAAAAAAAI/AAAAAAAAAMU/CfDrhLGzUKM/photo.jpg?sz=128", "display_name": "Ali Haghighatdoost", "link": "https://stackoverflow.com/users/5005537/ali-haghighatdoost"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3137, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1460386016, "creation_date": 1453889536, "question_id": 35034419, "link": "https://stackoverflow.com/questions/35034419/how-to-add-openssl-lib-in-android-studio-with-experimental-gradle-plugin-ndk", "title": "How to add openssl lib in android studio with experimental gradle plugin (NDK)?", "body": "<p>I'm trying to add openSSL library to my project in <code>android studio 2.0 preview 7</code> with <code>experimental gradle plugin</code>. </p>\n\n<pre><code>dependencies {\n    classpath 'com.android.tools.build:gradle-experimental:0.4.0'\n}\n</code></pre>\n\n<p>What I did is that I downloaded the <code>openSSL library</code> and put it into <code>jni</code> folder. And I have another .c file that uses this library. I have included the files that I need and there are no errors in code. My <code>.c</code> file name is <code>hello-jni.c</code> and I declared it into my <code>build.gradle (module: app)</code> like this:</p>\n\n<pre><code>android.ndk {\n    moduleName = \"hello-jni\"\n}\n</code></pre>\n\n<p>and also I loaded my library in my MainActivity like this:</p>\n\n<pre><code>static {\n    System.loadLibrary(\"hello-jni\");\n}\n</code></pre>\n\n<p>but when I try to build my project, an error shows up like this:</p>\n\n<pre><code>Error:(51) undefined reference to `RSA_generate_key'\nError:error: ld returned 1 exit status\nError:Execution failed for task ':app:linkArm64-v8aDebugHello-    jniSharedLibrary'.\n&gt; A build operation failed.\n  Linker failed while linking libhello-jni.so.\n</code></pre>\n\n<p>My hello-jni.c source code:</p>\n\n<pre><code>#include &lt;jni.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdio.h&gt;\n#include \"boringssl/crypto/openssl/base.h\"\n#include \"boringssl/crypto/openssl/rsa.h\"\n#include \"boringssl/crypto/openssl/pem.h\"\n\n#define KEY_LENGTH  2048\n#define PUB_EXP     3\n#define PRINT_KEYS\n#define WRITE_TO_FILE 0\n\nsize_t pri_len;            // Length of private key\nsize_t pub_len;            // Length of public key\nchar   *pri_key;           // Private key\nchar   *pub_key;           // Public key\nchar   msg[KEY_LENGTH/8];  // Message to encrypt\nchar   *encrypt = NULL;    // Encrypted message\nchar   *decrypt = NULL;    // Decrypted message\nchar   *err;               // Buffer for any error messages\n\nJNIEXPORT jstring JNICALL\nJava_com_example_ndktest_SignUpActivity_testString(JNIEnv *env, jobject activity) {\n\n// In this line, the error happens!(in build time)\nRSA *keypair = RSA_generate_key(KEY_LENGTH, PUB_EXP, NULL, NULL);\n\n//continue to work with key pair ...\n\nreturn \"some jstring\";\n}\n</code></pre>\n"}, {"tags": ["c", "varnish-vcl"], "comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 52293, "user_id": 2725435, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/gnoUL.jpg?s=128&g=1", "display_name": "Bart\u0142omiej Sema\u0144czyk", "link": "https://stackoverflow.com/users/2725435/bart%c5%82omiej-sema%c5%84czyk"}, "edited": false, "score": 0, "creation_date": 1454065375, "post_id": 35034335, "comment_id": 57887588, "body": "@Bart\u0142omiejSema\u0144czyk Do you have some evidence that a period was missing?"}, {"owner": {"reputation": 52293, "user_id": 2725435, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/gnoUL.jpg?s=128&g=1", "display_name": "Bart\u0142omiej Sema\u0144czyk", "link": "https://stackoverflow.com/users/2725435/bart%c5%82omiej-sema%c5%84czyk"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1454065447, "post_id": 35034335, "comment_id": 57887634, "body": "@EJP, no sorry, by mistake:("}], "answers": [{"tags": [], "owner": {"reputation": 1519, "user_id": 5058218, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-_WtMI-c4BvQ/AAAAAAAAAAI/AAAAAAAAADA/8EyGLG3fHAI/photo.jpg?sz=128", "display_name": "Simply Me", "link": "https://stackoverflow.com/users/5058218/simply-me"}, "is_accepted": false, "score": 0, "last_activity_date": 1454065423, "creation_date": 1454065423, "answer_id": 35082893, "question_id": 35034335, "link": "https://stackoverflow.com/questions/35034335/include-time-h-an-error-occurred-at-the-start/35082893#35082893", "title": "include &lt;time.h&gt;,an error occurred at the start", "body": "<pre><code>C{\n#include &lt;sys/time.h&gt;\n#include &lt;stdio.h&gt;\n}C\n</code></pre>\n\n<p>Try with the <code>sys/time.h</code>, it should work.</p>\n"}], "owner": {"reputation": 1, "user_id": 5818760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/399bf0960886a81fec2bae51a97ea285?s=128&d=identicon&r=PG&f=1", "display_name": "sealzrt", "link": "https://stackoverflow.com/users/5818760/sealzrt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1857, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1454065423, "creation_date": 1453889337, "last_edit_date": 1454065241, "question_id": 35034335, "link": "https://stackoverflow.com/questions/35034335/include-time-h-an-error-occurred-at-the-start", "title": "include &lt;time.h&gt;,an error occurred at the start", "body": "<p>I use following code in <code>default.vcl</code>   </p>\n\n<pre><code>C{#include &lt;time.h&gt;}C  \n</code></pre>\n\n<p>an error occurred at the start.  </p>\n\n<pre><code>Message from C-compiler:  \n./vcl.TfBe17Rg.c:429:21: time.h: No such file or directory  \n./vcl.TfBe17Rg.c:430:23: string.h: No such file or directory  \nRunning C-compiler failed, exit 1\n</code></pre>\n"}, {"tags": ["c", "structure", "typedef"], "comments": [{"owner": {"reputation": 307, "user_id": 4719370, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh6.googleusercontent.com/-iDseq2jkKdg/AAAAAAAAAAI/AAAAAAAAAG0/ZVSeTZHzh18/photo.jpg?sz=128", "display_name": "Anuj Priyadarshi", "link": "https://stackoverflow.com/users/4719370/anuj-priyadarshi"}, "reply_to_user": {"reputation": 28386, "user_id": 5666987, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/guTdN.jpg?s=128&g=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/5666987/ian"}, "edited": false, "score": 0, "creation_date": 1453889501, "post_id": 35034277, "comment_id": 57793564, "body": "No there is no redefinition error."}, {"owner": {"reputation": 4190, "user_id": 1520248, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/vySwn.jpg?s=128&g=1", "display_name": "niyasc", "link": "https://stackoverflow.com/users/1520248/niyasc"}, "edited": false, "score": 0, "creation_date": 1453889513, "post_id": 35034277, "comment_id": 57793573, "body": "Here is a similar question <a href=\"http://stackoverflow.com/questions/3995940/casting-one-c-structure-into-another\" title=\"casting one c structure into another\">stackoverflow.com/questions/3995940/&hellip;</a> ."}, {"owner": {"reputation": 59891, "user_id": 1207195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3P4g.jpg?s=128&g=1", "display_name": "Adriano Repetti", "link": "https://stackoverflow.com/users/1207195/adriano-repetti"}, "edited": false, "score": 5, "creation_date": 1453889515, "post_id": 35034277, "comment_id": 57793575, "body": "@anuj if they are in different compilation units and if you don&#39;t exchange that data between them (casting pointers) then it&#39;s safe. If it&#39;s a good practice...well that&#39;s another story."}], "answers": [{"tags": [], "owner": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "is_accepted": false, "score": 3, "last_activity_date": 1453889479, "creation_date": 1453889479, "answer_id": 35034398, "question_id": 35034277, "link": "https://stackoverflow.com/questions/35034277/same-name-structure-with-different-definition-in-c/35034398#35034398", "title": "Same name structure with different definition in C", "body": "<p>This is type definition. It is local for each .c file and there is no reason to get error. Definitions have to be made in header files and then you will not have such problem.</p>\n"}, {"tags": [], "owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "is_accepted": true, "score": 15, "last_activity_date": 1453889746, "last_edit_date": 1592644375, "creation_date": 1453889746, "answer_id": 35034491, "question_id": 35034277, "link": "https://stackoverflow.com/questions/35034277/same-name-structure-with-different-definition-in-c/35034491#35034491", "title": "Same name structure with different definition in C", "body": "<blockquote>\n<p>6.7.2.1 Structure and union specifiers</p>\n<ol start=\"8\">\n<li>The presence of a struct-declaration-list in a struct-or-union-specifier declares a new type,\nwithin a translation unit.</li>\n</ol>\n</blockquote>\n<p>Types are defined only within a translation unit, a .c file in this case.</p>\n<p>There is no problem with defining two types with the same name in two different translation units.</p>\n<p>However those two types are not compatible unless they follow the rules described in <em>6.2.7., p1</em>. The types you defined are <em>not compatible</em>.</p>\n"}, {"tags": [], "owner": {"reputation": 719, "user_id": 3944257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b6137f4fc597c673775e63728188088?s=128&d=identicon&r=PG&f=1", "display_name": "Frodo", "link": "https://stackoverflow.com/users/3944257/frodo"}, "is_accepted": false, "score": 1, "last_activity_date": 1453889747, "creation_date": 1453889747, "answer_id": 35034493, "question_id": 35034277, "link": "https://stackoverflow.com/questions/35034277/same-name-structure-with-different-definition-in-c/35034493#35034493", "title": "Same name structure with different definition in C", "body": "<p>It is a correct usage to define two structs with the same name in two different *.c files because they are only valid for the current scope in the *.c where it is defined.</p>\n\n<p>But further I would not recommend to do this to avoid any confusion of you and any other developer who has to work with two types of the same name that do doing other things.</p>\n"}, {"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 2, "creation_date": 1453889998, "post_id": 35034510, "comment_id": 57793889, "body": "This is true for symbols defined at the global scope, but symbols can be redefined in local scopes: both variables and structure tags or typedefs."}], "tags": [], "owner": {"reputation": 1373, "user_id": 655027, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4d94649cf365de22fa125f0a45f5ebb4?s=128&d=identicon&r=PG", "display_name": "rubikonx9", "link": "https://stackoverflow.com/users/655027/rubikonx9"}, "is_accepted": false, "score": 2, "last_activity_date": 1453889802, "creation_date": 1453889802, "answer_id": 35034510, "question_id": 35034277, "link": "https://stackoverflow.com/questions/35034277/same-name-structure-with-different-definition-in-c/35034510#35034510", "title": "Same name structure with different definition in C", "body": "<p>Symbols' names (variables', functions) must be unique within a <em>translation unit</em>.</p>\n\n<p>A translation unit is a basic compilation unit for <em>C</em> and <em>C++</em>. It consists of a source file, along with all included files (either directly or indirectly).</p>\n\n<p>In your case, you have two independent source files, each defining a struct; but they \"can't see\" each other, as they are within separate translation units.</p>\n\n<p>You might get into trouble, however, during linking, if there are multiple symbols with the same name across target linking objects (as long as these symbols are exported, which can be modified with <code>static</code> keyword).</p>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 1, "last_activity_date": 1453889888, "creation_date": 1453889888, "answer_id": 35034543, "question_id": 35034277, "link": "https://stackoverflow.com/questions/35034277/same-name-structure-with-different-definition-in-c/35034543#35034543", "title": "Same name structure with different definition in C", "body": "<p>Each definition is local to the file in which it appears.  Since you compile the files separately, the compiler only sees one at a time.  The linker binding the object files together does not verify type consistency, it only resolves symbols by name.</p>\n\n<p>If you want to pass a <code>st_localAscdData</code> or a pointer to a <code>st_localAscdData</code> to a function from a different module, you must ensure consistency between the types declared in the different modules.  This is the purpose of header files.  Shared declarations belong in header files, that must be included in all modules that share a given type or function.</p>\n\n<p>Global type consistency is not enforced by the C language, nor C++ to some extend, it is the programmers responsibility.  Coding rules are guidelines to help programmers avoid pitfalls from this shortcoming.</p>\n"}, {"tags": [], "owner": {"reputation": 5024, "user_id": 4439794, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/ogyE1.png?s=128&g=1", "display_name": "Trevor", "link": "https://stackoverflow.com/users/4439794/trevor"}, "is_accepted": false, "score": 1, "last_activity_date": 1453892668, "last_edit_date": 1495539857, "creation_date": 1453892668, "answer_id": 35035549, "question_id": 35034277, "link": "https://stackoverflow.com/questions/35034277/same-name-structure-with-different-definition-in-c/35035549#35035549", "title": "Same name structure with different definition in C", "body": "<p>You expect a redefined error (which will happen with cpp compiler) but it won't happen in C compiler.\nThis issue not just happen with structure but also with <strong>all kinds of variable</strong>.\nI have make a question for this and have some detail and quality answer.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/34986335/does-c-have-one-definition-rule-like-c\">Does C have One Definition Rule like C++?</a></p>\n"}], "owner": {"reputation": 307, "user_id": 4719370, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh6.googleusercontent.com/-iDseq2jkKdg/AAAAAAAAAAI/AAAAAAAAAG0/ZVSeTZHzh18/photo.jpg?sz=128", "display_name": "Anuj Priyadarshi", "link": "https://stackoverflow.com/users/4719370/anuj-priyadarshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4508, "favorite_count": 1, "accepted_answer_id": 35034491, "answer_count": 6, "score": 12, "last_activity_date": 1453894703, "creation_date": 1453889195, "last_edit_date": 1453894703, "question_id": 35034277, "link": "https://stackoverflow.com/questions/35034277/same-name-structure-with-different-definition-in-c", "title": "Same name structure with different definition in C", "body": "<p>Is it allowed to use same name structure with different definitions in 2 different c files in the same project. For eg.</p>\n\n<p>File1.c</p>\n\n<pre><code>typedef struct\n{\n    unsigned int unVar;             \n\n} abc;\n</code></pre>\n\n<p>File2.c</p>\n\n<pre><code>typedef struct\n{\n    int var;\n} abc;\n</code></pre>\n\n<p>abc is used in both the files. When i compile these file as part of same project there are no errors, but i want to understand whether this is correct usage.</p>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 28386, "user_id": 5666987, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/guTdN.jpg?s=128&g=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/5666987/ian"}, "edited": false, "score": 2, "creation_date": 1453888172, "post_id": 35033826, "comment_id": 57792706, "body": "What is the criteria of breaking that you want?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1453891383, "post_id": 35033826, "comment_id": 57794841, "body": "You can&#39;t use strtok unless there is some sort of delimiter."}], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1453891304, "post_id": 35033940, "comment_id": 57794790, "body": "<code>strpbrk(input, &quot;0123456789&quot;);</code> will be inefficient though, since <code>strpbrk</code> can&#39;t know that it is looking for numbers. A manual solution with <code>isdigit</code> will be much more effective."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": -1, "last_activity_date": 1453888374, "creation_date": 1453888374, "answer_id": 35033940, "question_id": 35033826, "link": "https://stackoverflow.com/questions/35033826/separating-a-string-into-smaller-strings/35033940#35033940", "title": "Separating a string into smaller strings", "body": "<p>As per the <a href=\"http://linux.die.net/man/3/strtok\" rel=\"nofollow\">man page</a> of <code>strtok()</code></p>\n\n<blockquote>\n  <p>Each call to strtok() returns a pointer to a null-terminated string containing the next token. <strong>This string does not include the delimiting byte.</strong> [...]</p>\n</blockquote>\n\n<p>So, while using <code>\"0123456789 \\t\\n\"</code> as the delimiter for the first time, <code>1</code> will be treated as the actual delimiter and will not be considered in the subsequent parsing.</p>\n\n<p>You may want to use <a href=\"http://linux.die.net/man/3/strcspn\" rel=\"nofollow\"><code>strcspn()</code></a> and/or <a href=\"http://linux.die.net/man/3/strpbrk\" rel=\"nofollow\"><code>strpbrk()</code></a> to find out the index for the required sub-strings and parse accordingly.</p>\n"}, {"comments": [{"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1453895967, "post_id": 35036400, "comment_id": 57797873, "body": "Here <code>size_t len = p - *sp;</code> you have ...<code>conversion to \u2018size_t\u2019 from \u2018long int\u2019 may change the sign of the result</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1453896064, "post_id": 35036400, "comment_id": 57797944, "body": "@Michi Negative results does not occur."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1453896144, "post_id": 35036400, "comment_id": 57797994, "body": "I&#39;m sure about that, may point was  that warning only :D...any way nice approach."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1453896300, "post_id": 35036400, "comment_id": 57798091, "body": "Any way the OP didn&#39;t mentioned what should be the output when <code>hallo12-3</code> is present, which means that his 100% sure that the string does contain letters and numbers"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1453896385, "post_id": 35036400, "comment_id": 57798149, "body": "Yes it is unclear. but negative number is not considered in OP&#39;s exsample code."}, {"owner": {"reputation": 105, "user_id": 5845929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e66abb9eab5c49e8cc2d36aa169639b?s=128&d=identicon&r=PG&f=1", "display_name": "Vaggelis Spi", "link": "https://stackoverflow.com/users/5845929/vaggelis-spi"}, "edited": false, "score": 0, "creation_date": 1453904775, "post_id": 35036400, "comment_id": 57804242, "body": "consider there are no negative numbers"}], "tags": [], "owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "is_accepted": false, "score": 0, "last_activity_date": 1453894902, "creation_date": 1453894902, "answer_id": 35036400, "question_id": 35033826, "link": "https://stackoverflow.com/questions/35033826/separating-a-string-into-smaller-strings/35036400#35036400", "title": "Separating a string into smaller strings", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n\nsize_t extract(const char **sp, char *out, int (*test)(int ch));\n\nint main(void){\n    char buf[100], str1[100], str2[100];\n    int x;\n    const char *p = buf;\n    //size_t len;\n\n    fgets(buf, sizeof(buf), stdin);\n    while(*p){\n        if(isalpha((unsigned char)*p)){\n            extract(&amp;p, str1, isalpha);\n            puts(str1);\n        } else if(isdigit((unsigned char)*p)){\n            extract(&amp;p, str2, isdigit);\n            x = atoi(str2);\n            printf(\"%s, x=%d\\n\", str2, x);\n        } else {\n            ++p;//skip one char\n        }\n    }\n    return 0;\n}\n\nsize_t extract(const char **sp, char *out, int (*test)(int ch)){\n    const char *p = *sp;\n    while(*p &amp;&amp; test((unsigned char)*p)){\n        *out++ = *p++;\n    }\n    *out = '\\0';\n    size_t len = p - *sp;\n    *sp = p;\n    return len;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 786, "user_id": 5022365, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ec8cb396d26f840b7b772382d8e3ff70?s=128&d=identicon&r=PG&f=1", "display_name": "Sagar Patel", "link": "https://stackoverflow.com/users/5022365/sagar-patel"}, "is_accepted": false, "score": 0, "last_activity_date": 1453988230, "creation_date": 1453988230, "answer_id": 35063026, "question_id": 35033826, "link": "https://stackoverflow.com/questions/35033826/separating-a-string-into-smaller-strings/35063026#35063026", "title": "Separating a string into smaller strings", "body": "<ul>\n<li><p>Try below code.Hope this will help you.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\nint main()\n{\n   char string[]=\"abcd1234\";\n   char digitStr[10];\n   char charStr[10];\n   int i,j = 0,k = 0;\n\n   for(i=0;string[i];i++)\n   {\n        if(isdigit(string[i]))\n        {\n                charStr[j++]=string[i];\n        }\n        else\n        {\n                digitStr[k++]=string[i];\n        }\n   }\n   charStr[j] = '\\0';\n   digitStr[k] = '\\0';\n   printf(\"%s %s\\n\",digitStr,charStr);\n}\n</code></pre></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 305, "user_id": 12786236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ef92a702bbb2607a3a0772700960466?s=128&d=identicon&r=PG&f=1", "display_name": "Hello World", "link": "https://stackoverflow.com/users/12786236/hello-world"}, "is_accepted": false, "score": 0, "last_activity_date": 1580514725, "last_edit_date": 1580514725, "creation_date": 1580513186, "answer_id": 60012590, "question_id": 35033826, "link": "https://stackoverflow.com/questions/35033826/separating-a-string-into-smaller-strings/60012590#60012590", "title": "Separating a string into smaller strings", "body": "<p><em>I realize I'm very late on this one, but this is for if anyone has a similar case</em></p>\n\n<p>Assuming all input strings are like your example, this method will work. </p>\n\n<pre class=\"lang-C prettyprint-override\"><code>char buf[100];\nfgets(buf, sizeof(buf), stdin);\nif (buf[strlen(buf) - 1] == '\\n')\n    buf[strlen(buf) - 1] = '\\0';\nint x = atoi(strpbrk(buf, \"0123456789\"));\nchar letters[number - buf + 1];\nmemcpy(letters, sizeof(letters) - 1, buf);\nletters[sizeof(letters) - 1] = '\\0';\n//letters is the word\n//x is the number as an int, not a string\n</code></pre>\n\n<p>\u2022 Note the <code>if</code> statement after the <code>fgets</code>. This checks that the newline character was read by fgets, and turns it into a NUL character. (essentially truncating the string).<br>\n\u2022 As for <code>strpbrk()</code>, that's just a function that returns a pointer to the first occurence of any character in the second string inside the first string. I use it here to find the start of the digit sequence.<br>\n\u2022 I would also drop the <code>atoi()</code> for <code>strtol()</code> for safety.<br>\n\u2022 The <code>letters[]</code> array size is the return of <code>strpbrk()</code> (the address of the first number), minus the start of the array (giving the length of the letter string in bytes), plus one for the NUL character I add later. </p>\n"}], "owner": {"reputation": 105, "user_id": 5845929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e66abb9eab5c49e8cc2d36aa169639b?s=128&d=identicon&r=PG&f=1", "display_name": "Vaggelis Spi", "link": "https://stackoverflow.com/users/5845929/vaggelis-spi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 142, "favorite_count": 0, "answer_count": 4, "score": 3, "last_activity_date": 1580514725, "creation_date": 1453888027, "last_edit_date": 1453890250, "question_id": 35033826, "link": "https://stackoverflow.com/questions/35033826/separating-a-string-into-smaller-strings", "title": "Separating a string into smaller strings", "body": "<p>I have the following string <code>abcd1234</code> and I want to find a way to break this string into two different strings, <code>abcd</code> and <code>1234</code>. I have tried the following code:</p>\n\n<pre><code>char buf[100],*str1,*str2;\nint x;\nfgets(buf,sizeof(buf),stdin);\nstr1=strtok(buf,\"0123456789 \\t\\n\");\nstr2=strtok(NULL,\" \\n\\t\\0\");\nputs(str1);\nputs(str2);\nx=atoi(str2);\nprintf(\"x=%d\", x);\n</code></pre>\n\n<p>but output is <code>abcd 234</code>. And if I try it with one letter and one number, e.g <code>a2</code> I take only e on output and <code>x</code> is 0.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1453887571, "post_id": 35033616, "comment_id": 57792283, "body": "<i>Please clarify your specific problem or add additional details to highlight exactly what you need. As it&#39;s currently written, it\u2019s hard to tell exactly what you&#39;re asking. See the <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> page for help clarifying this question.</i>"}], "answers": [{"comments": [{"owner": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "reply_to_user": {"reputation": 9, "user_id": 5123484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fefda34eaa51d5ce329c7f371a67af8?s=128&d=identicon&r=PG&f=1", "display_name": "johncarrie", "link": "https://stackoverflow.com/users/5123484/johncarrie"}, "edited": false, "score": 0, "creation_date": 1453903222, "post_id": 35034248, "comment_id": 57803003, "body": "@johncarrie i just saw that frank also provides an english article - added links"}], "tags": [], "owner": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "is_accepted": true, "score": 0, "last_activity_date": 1453903197, "last_edit_date": 1453903197, "creation_date": 1453889126, "answer_id": 35034248, "question_id": 35033616, "link": "https://stackoverflow.com/questions/35033616/how-to-get-product-information-from-remote-controller-irinfrared-data/35034248#35034248", "title": "How to get product information from remote controller ir(infrared) data?", "body": "<p>You may search for IRMP that is a IR multi protocol decoder. Primarily for micro controllers but it also has command line tool that can take decoded ir strings (you may record some more and reformat them) and shows details about the detected protocol (and the data (ids and keycode)).</p>\n\n<p>However - information about the product are not retreived. Never searched if there is any database in the web that collects such data.</p>\n\n<p>edit: \nalso english version of the Mikrocontroller.net article is available:</p>\n\n<ul>\n<li>german: <a href=\"https://www.mikrocontroller.net/articles/IRMP\" rel=\"nofollow\">https://www.mikrocontroller.net/articles/IRMP</a></li>\n<li>english: <a href=\"https://www.mikrocontroller.net/articles/IRMP_-_english#top\" rel=\"nofollow\">https://www.mikrocontroller.net/articles/IRMP_-_english#top</a></li>\n</ul>\n"}], "owner": {"reputation": 9, "user_id": 5123484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fefda34eaa51d5ce329c7f371a67af8?s=128&d=identicon&r=PG&f=1", "display_name": "johncarrie", "link": "https://stackoverflow.com/users/5123484/johncarrie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "closed_date": 1453927756, "accepted_answer_id": 35034248, "answer_count": 1, "score": -3, "last_activity_date": 1453903197, "creation_date": 1453887517, "last_edit_date": 1453888066, "question_id": 35033616, "link": "https://stackoverflow.com/questions/35033616/how-to-get-product-information-from-remote-controller-irinfrared-data", "closed_reason": "Needs details or clarity", "title": "How to get product information from remote controller ir(infrared) data?", "body": "<p>I have a remote controller of aircon and I have succeed in extracting the ir data of the power button.  The ir data is following:     </p>\n\n<p>0x26 0x00 0xf8 0x00 0x00 0x01 0x13 0x89 0x12 0x11<br>\n0x12 0x34 0x13 0x33 0x13 0x10 0x13 0x33 0x13 0x11<br>\n0x11 0x34 0x14 0x11 0x11 0x35 0x12 0x10 0x13 0x10<br>\n0x13 0x11 0x11 0x35 0x13 0x33 0x13 0x34 0x13 0x10<br>\n.....  so on and so on.<br>\nNow what I want to do is to make c program of getting the product information of this remote controller from this ir data of power button. And I want to get other buttons' ir datas also.  </p>\n\n<p>More specifically, I want to make a program that find out the information of the certain product and the infrared code of other buttons with the power button's ir datacode only.   </p>\n\n<p>If it is possible, how can I do it? Thanks.</p>\n"}, {"tags": ["c", "static"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1453886589, "post_id": 35033258, "comment_id": 57791585, "body": "Where is the <code>static x</code>?"}, {"owner": {"reputation": 1050, "user_id": 4720292, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ab9634db96cbb4bc54c10cbe276ae411?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre", "link": "https://stackoverflow.com/users/4720292/pierre"}, "edited": false, "score": 1, "creation_date": 1453886683, "post_id": 35033258, "comment_id": 57791655, "body": "<code>static</code> and <code>extern</code> are 2 different things"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1453887006, "post_id": 35033258, "comment_id": 57791856, "body": "You have four different variables (with varying scope) all named <code>x</code>."}, {"owner": {"reputation": 41, "user_id": 5842960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4a5619f1d618655b62e039a7a20123b?s=128&d=identicon&r=PG&f=1", "display_name": "dan", "link": "https://stackoverflow.com/users/5842960/dan"}, "edited": false, "score": 0, "creation_date": 1453887221, "post_id": 35033258, "comment_id": 57792032, "body": "Who came to the first use of c()?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1453887320, "post_id": 35033258, "comment_id": 57792101, "body": "<code>printf(&quot;% d &quot;,x);</code> is a mistake"}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1453887612, "post_id": 35033258, "comment_id": 57792310, "body": "Your root mistake is shadowing variables. Don&#39;t do that. Consider enabling warnings about it (<code>-Wshadow</code> for <i>gcc</i> and probaby for <i>clang</i> too), though on 2nd thought it probably won&#39;t help with globals vs. function scope statics, but you could still try it out..."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 5842960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4a5619f1d618655b62e039a7a20123b?s=128&d=identicon&r=PG&f=1", "display_name": "dan", "link": "https://stackoverflow.com/users/5842960/dan"}, "edited": false, "score": 0, "creation_date": 1453887300, "post_id": 35033521, "comment_id": 57792090, "body": "Why a global one and not a static? Doesn&#39;t static is the dominant?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 41, "user_id": 5842960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4a5619f1d618655b62e039a7a20123b?s=128&d=identicon&r=PG&f=1", "display_name": "dan", "link": "https://stackoverflow.com/users/5842960/dan"}, "edited": false, "score": 0, "creation_date": 1453887424, "post_id": 35033521, "comment_id": 57792174, "body": "@dan names declared in a scope are only visible within that scope. <code>static int x;</code> inside <code>b()</code> is only visible within <code>b()</code>.  <code>x</code> used outside of <code>b</code> must refer to a different variable than <code>b</code>&#39;s <code>x</code>."}, {"owner": {"reputation": 23469, "user_id": 775964, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/glHLl.jpg?s=128&g=1", "display_name": "Jeegar Patel", "link": "https://stackoverflow.com/users/775964/jeegar-patel"}, "reply_to_user": {"reputation": 41, "user_id": 5842960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4a5619f1d618655b62e039a7a20123b?s=128&d=identicon&r=PG&f=1", "display_name": "dan", "link": "https://stackoverflow.com/users/5842960/dan"}, "edited": false, "score": 0, "creation_date": 1453887512, "post_id": 35033521, "comment_id": 57792235, "body": "@dan updated my answer to address your question in comment"}], "tags": [], "owner": {"reputation": 23469, "user_id": 775964, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/glHLl.jpg?s=128&g=1", "display_name": "Jeegar Patel", "link": "https://stackoverflow.com/users/775964/jeegar-patel"}, "is_accepted": true, "score": 4, "last_activity_date": 1453888434, "last_edit_date": 1453888434, "creation_date": 1453887208, "answer_id": 35033521, "question_id": 35033258, "link": "https://stackoverflow.com/questions/35033258/static-variables-and-local/35033521#35033521", "title": "static variables and local", "body": "<p>In </p>\n\n<pre><code>void c()\n{\n\n    printf(\"%d \",x);\n    x+=2;\n}\n</code></pre>\n\n<p>It will not use static copy of x which you allocated in defination function <code>b()</code>.</p>\n\n<p>It will use the global copy of variable x which you have declared in last line of your program.</p>\n\n<pre><code>int x=0;\n</code></pre>\n\n<p>Change last line of x to different value and output will be changed for <code>c()</code></p>\n\n<hr>\n\n<p><strong>Why a global one and not a static?</strong></p>\n\n<p>So here in scope of that static variable x is limited to body of <code>b()</code> only so in c() it can not be used. </p>\n\n<p>c() is depending on global copy of x. If you remove that global definition of x then in C() it will give compilation error.</p>\n"}, {"tags": [], "owner": {"reputation": 5024, "user_id": 4439794, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/ogyE1.png?s=128&g=1", "display_name": "Trevor", "link": "https://stackoverflow.com/users/4439794/trevor"}, "is_accepted": false, "score": 0, "last_activity_date": 1453887725, "creation_date": 1453887725, "answer_id": 35033716, "question_id": 35033258, "link": "https://stackoverflow.com/questions/35033258/static-variables-and-local/35033716#35033716", "title": "static variables and local", "body": "<p>You misunderstand about variable scope.</p>\n\n<p>Variable <code>x</code> in <code>a()</code> differs with <code>x</code> in <code>b()</code> and differs with the global <code>x</code> (out of these function)</p>\n\n<p>They have same name <code>x</code> ,but they take difference locator in memory.</p>\n\n<p>Just read about local and global variable in C you will figure out the problem.</p>\n"}], "owner": {"reputation": 41, "user_id": 5842960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4a5619f1d618655b62e039a7a20123b?s=128&d=identicon&r=PG&f=1", "display_name": "dan", "link": "https://stackoverflow.com/users/5842960/dan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 35033521, "answer_count": 2, "score": 1, "last_activity_date": 1453888434, "creation_date": 1453886525, "last_edit_date": 1453886790, "question_id": 35033258, "link": "https://stackoverflow.com/questions/35033258/static-variables-and-local", "title": "static variables and local", "body": "<p>The output is : 100 -10 0 100 -5 2 10. Why? \nAfter running the first time b() the static x at the end of b() is -5 (I check) so why c() gave 0, isn't it use static x? </p>\n\n<pre><code>#include &lt;stdio.h&gt;\nextern int x;\nvoid a()\n{\n    int x=100;\n    printf(\"% d \",x);\n    x+=5;\n}\nvoid b()\n{\n    static int x=-10;\n    printf(\"%d \",x);\n    x+=5;\n\n}\nvoid c()\n{\n\n    printf(\"%d \",x);\n    x+=2;\n}\nint main()\n{\n    int x=10;\n    a();\n    b();\n    c();\n    a();\n    b();\n    c();\n    printf(\"%d \",x); \n    return 0;\n}\nint x=0;\n</code></pre>\n"}, {"tags": ["c", "windows", "compiler-errors", "codeblocks", "abstract-data-type"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 5845670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9affecf5dd3562d5069164d14244a3a?s=128&d=identicon&r=PG&f=1", "display_name": "GD1", "link": "https://stackoverflow.com/users/5845670/gd1"}, "edited": false, "score": 0, "creation_date": 1453889031, "post_id": 35033820, "comment_id": 57793291, "body": "The error disappeared, but I didn&#39;t understand what you did. In fact, you deleted the inclusion of vett.h in List.h; you added typedef struct vett Item, but aren&#39;t you creating a new Item which is confined to that library? I mean, you introduced a totally new Item which has nothing in common with the struct defined in vett.h: since you &quot;isolated&quot; List.h, aren&#39;t you creating an &quot;empty copy&quot; of the struct vett  ? Thanks for your help."}, {"owner": {"reputation": 1063, "user_id": 4632797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a459ca08e443295703e10d8aaf446d7?s=128&d=identicon&r=PG&f=1", "display_name": "Alexis Le Provost", "link": "https://stackoverflow.com/users/4632797/alexis-le-provost"}, "reply_to_user": {"reputation": 21, "user_id": 5845670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9affecf5dd3562d5069164d14244a3a?s=128&d=identicon&r=PG&f=1", "display_name": "GD1", "link": "https://stackoverflow.com/users/5845670/gd1"}, "edited": false, "score": 0, "creation_date": 1453892520, "post_id": 35033820, "comment_id": 57795595, "body": "You actually use a pointer to your struct Item.The compiler doesn&#39;t need the definition of this structure but just its existence. The item declared in List.h get enough informations to the compiler to validate your function declaration."}, {"owner": {"reputation": 21, "user_id": 5845670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9affecf5dd3562d5069164d14244a3a?s=128&d=identicon&r=PG&f=1", "display_name": "GD1", "link": "https://stackoverflow.com/users/5845670/gd1"}, "edited": false, "score": 0, "creation_date": 1453894738, "post_id": 35033820, "comment_id": 57797012, "body": "Ok, so i didn&#39;t know that; since I can&#39;t run the program because I&#39;m still typing it, I was just asking myself how the compiler manages to &quot;link&quot; the two typedefs (the one which you put in List.h and the one that there&#39;s still in vett.h which is totally and completely specified/defined), since in &quot;List.h&quot; there isn&#39;t the inclusion of &quot;vett.h&quot;. Thanks again."}], "tags": [], "owner": {"reputation": 1063, "user_id": 4632797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a459ca08e443295703e10d8aaf446d7?s=128&d=identicon&r=PG&f=1", "display_name": "Alexis Le Provost", "link": "https://stackoverflow.com/users/4632797/alexis-le-provost"}, "is_accepted": false, "score": 0, "last_activity_date": 1453888023, "creation_date": 1453888023, "answer_id": 35033820, "question_id": 35033220, "link": "https://stackoverflow.com/questions/35033220/error-unknown-type-name-while-working-on-a-1st-class-adt-fused-with-a-2nd/35033820#35033820", "title": "&quot;Error: unknown type name ...&quot; while working on a 1st-class ADT fused with a 2nd-class ADT.", "body": "<p>It's typically a forward declaration problem. Just change your List.h file like this :</p>\n\n<pre><code>#ifndef LIST_H_INCLUDED\n#define LIST_H_INCLUDED\n\ntypedef struct vett Item;\ntypedef struct lista *lista_t;\n\nlista_t calculateMutualDistance(lista_t List, Item *v, int N, int dist);\nint chechForBetter(int SD, int i, int N, Item *v);\nlista_t listInit(lista_t List, int N);\n\n#endif // LIST_H_INCLUDED`\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5845670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9affecf5dd3562d5069164d14244a3a?s=128&d=identicon&r=PG&f=1", "display_name": "GD1", "link": "https://stackoverflow.com/users/5845670/gd1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 331, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1453888023, "creation_date": 1453886421, "question_id": 35033220, "link": "https://stackoverflow.com/questions/35033220/error-unknown-type-name-while-working-on-a-1st-class-adt-fused-with-a-2nd", "title": "&quot;Error: unknown type name ...&quot; while working on a 1st-class ADT fused with a 2nd-class ADT.", "body": "<p>Good morning everybody.</p>\n\n<p>I'm new here on SO, and I'm asking this question because I have to readjust my Algorithms And Programming's exam of yesterday.\nWhile typing my exam on CodeBlocks, I got an error I couldn't fix. Basically, the exam asked to load on memory some infos from a file (format: char *namecity, int population, int distance) in a data structure, and then it asked to calculate the mutual distances for each city and collect them in another data structure. I decided to make 2 ADTs: the first is defined in my library \"vett.h\":</p>\n\n<pre><code>#ifndef VETT_H_INCLUDED\n#define VETT_H_INCLUDED\n#include \"List.h\"\n\ntypedef struct vett\n{\n    char nome[21];\n    int abitanti, dist;\n    lista_t List;\n} Item;\n\nItem *vectInit(int N, Item *v);\nItem *vectInsert(Item *v, char *nome, int people, int dist, int i);\n#endif // VETT_H_INCLUDED\n</code></pre>\n\n<p>I made an \"almost-ADT\" or \"2nd class ADT\" (R.Sedgewick) based on my teacher lessons. Doing so, the main could create an array for that struct, and could have direct access to the fields of that struct; each \"cell\" contains: name of city, population, distance, and a List-type field. The problem begins here. \nTo calculate and save the mutual distances of the cities, I decided to make another ADT list, type 1st class, in a library I called \"List.h\" :</p>\n\n<pre><code>#ifndef LIST_H_INCLUDED\n#define LIST_H_INCLUDED\n\n#include \"vett.h\"\n\ntypedef struct lista *lista_t;\n\nlista_t calculateMutualDistance(lista_t List, Item *v, int N, int dist);\nint chechForBetter(int SD, int i, int N, Item *v);\nlista_t listInit(lista_t List, int N);\n\n#endif // LIST_H_INCLUDED`\n</code></pre>\n\n<p>The file \"List.c\" contains the struct pointed in the .h file:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include \"List.h\"\n\ntypedef struct node *Node;\nstruct node\n{\n    char destination[21];\n    int distance;\n    Node next;\n};\n\nstruct lista\n{\n    Node head, tail;\n};\n\n(...)\n</code></pre>\n\n<p>Now I got this error from CodeBlocks (in vett.h, line 9, after int abitanti, int dist):</p>\n\n<p>\" Error: unknown type name 'lista_t' \".</p>\n\n<p>But why? lista_t is contained in List.c file and should be perfectly visible from \"vett.h\", because I included \"List.h\" and the pointer finds its struct in \"List.c\", which has got the \"List.h\" inclusion too!</p>\n\n<p>Hope someone can explain it to me, because I have only 2 days to adjust the program and make it work, and it's quite huge. Thanks for the attention and sorry for my grammar errors, as you can tell I'm not English. Have a nice day!</p>\n"}, {"tags": ["c", "arrays", "pointers", "multidimensional-array"], "answers": [{"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 3, "last_activity_date": 1453888830, "last_edit_date": 1453888830, "creation_date": 1453886712, "answer_id": 35033323, "question_id": 35033094, "link": "https://stackoverflow.com/questions/35033094/ansi-c-work-with-2dim-array-throught-pointers/35033323#35033323", "title": "ANSI C work with 2dim array throught pointers", "body": "<p>The array defined in this declaration</p>\n\n<pre><code>const char* a[][3] = {{\"abc\", \"1\"}, {\"def\", \"2\"}, {\"ghi\", \"3\"}};\n</code></pre>\n\n<p>has type <code>const char *[3][3]</code>.</p>\n\n<p>Take into account that the array has three \"columns\" there is explicitly specified 3 columns in the array declaration.</p>\n\n<pre><code>const char* a[][3] =....\n               ^^^\n</code></pre>\n\n<p>Elements in the last column are initialized by <code>NULL</code>. </p>\n\n<p>When an array is used in expressions as for example as an argument it is explicitly converted to pointer to its first element. </p>\n\n<p>That is if you use the above shown array as an argument then it is converted to type</p>\n\n<pre><code>const char * ( * )[3]\n</code></pre>\n\n<p>It is not the same type as <code>char ***</code></p>\n\n<p>So the function should ve declared like</p>\n\n<pre><code>void print( const char * ( *products )[3], size_t rows );\n</code></pre>\n\n<p>or like</p>\n\n<pre><code>void print( const char * products[][3], size_t rows );\n</code></pre>\n\n<p>and the function should be called like</p>\n\n<pre><code>print( a, 3 );\n</code></pre>\n\n<p>You may specify one more parameter that sets the number of columns you want for example to output </p>\n\n<pre><code>void print( const char * ( *products )[3], size_t rows, size_t cols );\n</code></pre>\n\n<p>In this case the function can be called like</p>\n\n<pre><code>print( a, 3, 2 );\n</code></pre>\n\n<p>However the array itself in any case has 3 columns.:)</p>\n\n<p>Or if the compiler supports variable length arrays like</p>\n\n<pre><code>void print( size_t rows, size_t cols, const char * ( *products )[cols] );\n</code></pre>\n\n<p>or for readability</p>\n\n<pre><code>void print( size_t rows, size_t cols, const char * products[rows][cols] );\n</code></pre>\n\n<p>and it can be called like</p>\n\n<pre><code>print( 3, 3, a );\n</code></pre>\n\n<p>Here is a demonstrative program that shows two ways of the function declaration</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n#define N 3\n\nvoid print1( const char *product[][N], size_t rows )\n{\n\n    for ( size_t i = 0; i &lt; rows; i++ ) \n    {\n        for ( const char **p = product[i]; *p; ++p )\n        {\n            printf( \"%s \", *p );\n        }\n        printf( \"\\n\" );\n    }\n}    \n\nvoid print2( size_t rows, size_t cols, const char *product[rows][cols] )\n{\n\n    for ( size_t i = 0; i &lt; rows; i++ ) \n    {\n        for ( const char **p = product[i]; *p; ++p )\n        {\n            printf( \"%s \", *p );\n        }\n        printf( \"\\n\" );\n    }\n}    \n\n\nint main( void )\n{\n    const char * a[][N] = \n    {\n        { \"abc\", \"1\" }, \n        { \"def\", \"2\" }, \n        { \"ghi\", \"3\" }\n    };\n\n    print1( a, N );\n    printf( \"\\n\" );\n\n    size_t n = N;\n\n    const char * b[n][n];\n\n    memcpy( b, a, sizeof( a ) );\n\n    print2( n, n, b );\n    printf( \"\\n\" );\n}    \n</code></pre>\n\n<p>Its output is</p>\n\n<pre><code>abc 1 \ndef 2 \nghi 3 \n\nabc 1 \ndef 2 \nghi 3 \n</code></pre>\n\n<p>Take into account that variable length arrays if they are supported by the compiler may not be initialized then they are defined.</p>\n"}, {"tags": [], "owner": {"reputation": 1655, "user_id": 3493587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0b29d44004eaedbc859bad8144bade93?s=128&d=identicon&r=PG&f=1", "display_name": "mikedu95", "link": "https://stackoverflow.com/users/3493587/mikedu95"}, "is_accepted": false, "score": 1, "last_activity_date": 1453888557, "creation_date": 1453888557, "answer_id": 35034005, "question_id": 35033094, "link": "https://stackoverflow.com/questions/35033094/ansi-c-work-with-2dim-array-throught-pointers/35034005#35034005", "title": "ANSI C work with 2dim array throught pointers", "body": "<blockquote>\n  <p><code>const char* a[][3] = {{\"abc\", \"1\"}, {\"def\", \"2\"}, {\"ghi\", \"3\"}};</code></p>\n</blockquote>\n\n<p>In this case, you could actually write:</p>\n\n<pre><code>const char* a[][2] = {{\"abc\", \"1\"}, {\"def\", \"2\"}, {\"ghi\", \"3\"}};\n</code></pre>\n\n<p>But if you really want a 3 columns array, you should tell print that there are 3 columns, not 2. But your print can print the two first columns only of course ...</p>\n\n<p>Then, any N-dimensions array of <code>T</code> can be viewed a simple 1D array of <code>T</code>. You just have to do some address computation to access the desired element. This is possible once you have a pointer to the first item of the array. So below is a working version:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\ntypedef const char * T;\n\nvoid print(T *products, size_t rows, size_t cols) {\n    size_t i;\n\n    for (i = 0; i &lt; rows; i++) {\n        // Each row has cols items so here is the current row (i-th row):\n        T *row = products + i * cols;\n        printf(\"{%s, %s}\\n\", row[0], row[1]);\n    }\n}\n\nint main(void) {\n    T a[][3] = { { \"abc\", \"1\" }, { \"def\", \"2\" }, { \"ghi\", \"3\" } };\n\n    // Tell print that there are 3 cols, not 2\n    print(&amp;a[0][0], 3, 3);\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1655, "user_id": 3493587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0b29d44004eaedbc859bad8144bade93?s=128&d=identicon&r=PG&f=1", "display_name": "mikedu95", "link": "https://stackoverflow.com/users/3493587/mikedu95"}, "edited": false, "score": 0, "creation_date": 1453889713, "post_id": 35034411, "comment_id": 57793693, "body": "It seems to me that ANSI C was specified in the title and I doubt that this compile in ANSI C. But maybe the OP is confused and ANSI should be interpreted as &quot;Standard&quot;."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 1655, "user_id": 3493587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0b29d44004eaedbc859bad8144bade93?s=128&d=identicon&r=PG&f=1", "display_name": "mikedu95", "link": "https://stackoverflow.com/users/3493587/mikedu95"}, "edited": false, "score": 0, "creation_date": 1453889985, "post_id": 35034411, "comment_id": 57793878, "body": "@mikedu95 Using the term &quot;ANSI C&quot; typically means you are confused over the various standards, <a href=\"http://stackoverflow.com/questions/17206568/what-is-the-difference-between-c-c99-ansi-c-and-gnu-c-a-general-confusion-reg/17209532#17209532\">see this</a>. There is nothing called ANSI C any longer, ANSI themselves call the standard <a href=\"http://webstore.ansi.org/FindStandards.aspx?SearchString=9899:2011\" rel=\"nofollow noreferrer\">INCITS/ISO/IEC 9899</a>. Why I should care about what the American standard institute call their standards isn&#39;t obvious to me though, since ISO C is an international standard."}, {"owner": {"reputation": 1655, "user_id": 3493587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0b29d44004eaedbc859bad8144bade93?s=128&d=identicon&r=PG&f=1", "display_name": "mikedu95", "link": "https://stackoverflow.com/users/3493587/mikedu95"}, "edited": false, "score": 0, "creation_date": 1453890784, "post_id": 35034411, "comment_id": 57794449, "body": "Using the term &quot;ANSI C&quot; means that I mean &quot;ANSI C&quot; (ANSI X3.159-1989) and this does not compile with ANSI C (ANSI X3.159-1989) or tell me if I&#39;m wrong. It&#39;s that simple."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 1655, "user_id": 3493587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0b29d44004eaedbc859bad8144bade93?s=128&d=identicon&r=PG&f=1", "display_name": "mikedu95", "link": "https://stackoverflow.com/users/3493587/mikedu95"}, "edited": false, "score": 0, "creation_date": 1453891550, "post_id": 35034411, "comment_id": 57794949, "body": "@mikedu95 My point is that the term ANSI C is so heavily abused that you can&#39;t know if people refer to C90 or merely to fully standard-compliant C. According to the <a href=\"http://stackoverflow.com/tags/c/info\">C tag wiki</a>, the latest C standard is assumed unless the OP explicitly tells otherwise. Why would you want to use a 27 years old standard anyhow?"}, {"owner": {"reputation": 1655, "user_id": 3493587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0b29d44004eaedbc859bad8144bade93?s=128&d=identicon&r=PG&f=1", "display_name": "mikedu95", "link": "https://stackoverflow.com/users/3493587/mikedu95"}, "edited": false, "score": 0, "creation_date": 1453892472, "post_id": 35034411, "comment_id": 57795568, "body": "I agree with the fact that the term is sometimes misused and that&#39;s way I left the possibility that the OP is confused. But you could have at least added that precision in your answer because, precisely, the standard has been explicitely specified. Maybe arbitrarily, but it was, so I think you should at least tell that you didn&#39;t take it into account and just used the latest one."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 1, "last_activity_date": 1453889517, "creation_date": 1453889517, "answer_id": 35034411, "question_id": 35033094, "link": "https://stackoverflow.com/questions/35033094/ansi-c-work-with-2dim-array-throught-pointers/35034411#35034411", "title": "ANSI C work with 2dim array throught pointers", "body": "<p>You've mixed up what you regard as columns and rows. Fix that, then get rid of the three star nonsense, make the function accept variable amount of columns and you end up with this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid print(size_t rows, size_t cols, const char* products[rows][cols]) \n{\n  for(size_t r=0; r&lt;rows; r++) \n  {\n    for(size_t c=0; c&lt;cols; c++)\n    {\n      printf(\"Col%zu: %s. \", c, products[r][c]);\n    }\n    printf(\"\\n\");\n  }\n}\n\nint main (void) \n{\n  const char* a[3][2] = {{\"abc\", \"1\"}, {\"def\", \"2\"}, {\"ghi\", \"3\"}};\n  print(3, 2, a);\n\n  return 0;\n}\n</code></pre>\n\n<p>And that's that, no need to complicate this futher.</p>\n"}, {"tags": [], "owner": {"reputation": 444, "user_id": 4285686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04885f9c47e8b1e1d69c8a6f4eab5c05?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Woo", "link": "https://stackoverflow.com/users/4285686/simon-woo"}, "is_accepted": false, "score": 0, "last_activity_date": 1480020613, "creation_date": 1480020613, "answer_id": 40794318, "question_id": 35033094, "link": "https://stackoverflow.com/questions/35033094/ansi-c-work-with-2dim-array-throught-pointers/40794318#40794318", "title": "ANSI C work with 2dim array throught pointers", "body": "<p>Maybe, this is what you wanted, which is more natural!</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nvoid print(void *_products, size_t rows, size_t cols) {\n    const char* (*products)[cols] = _products;\n    size_t i;\n\n    for (i = 0; i &lt; rows; i++) {\n        printf(\"Col1: %s. Col2: %s\\n\", products[i][0], products[i][1]);\n    }\n}\n\nint main(void) {\n    const char* a[][2] = {{\"abc\", \"1\"}, {\"def\", \"2\"}, {\"ghi\", \"3\"}};\n    print(a, 3, 2);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 8001, "user_id": 291372, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b5c1a712772e2552bebc14a89bf9aeb1?s=128&d=identicon&r=PG", "display_name": "Alex G.P.", "link": "https://stackoverflow.com/users/291372/alex-g-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 35034411, "answer_count": 4, "score": 0, "last_activity_date": 1480020613, "creation_date": 1453886052, "last_edit_date": 1453888637, "question_id": 35033094, "link": "https://stackoverflow.com/questions/35033094/ansi-c-work-with-2dim-array-throught-pointers", "title": "ANSI C work with 2dim array throught pointers", "body": "<p>Long long time ago I've played with <code>C</code> a lot but forgot everything. Now I am trying to solve easy tasks and failed.</p>\n\n<p>I'd like to write function which takes 2dim array or <code>char*</code> and print it. but my code is buggy and I do not understand why. As I understand <code>products</code> is pointer to 2dim array, so increasing it to <code>i * sizeof(char**)</code> I get pointer to sub-array, and increasing that sub-array pointer I get pointer to char block. But it seems that my code looking to different memory block.</p>\n\n<p>About <code>products</code> array - I know that it has N rows and 2 columns.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nvoid print(char*** products, size_t rows, size_t cols) {\n    size_t i;\n\n    for(i = 0; i &lt; rows; i++) {\n        printf(\"Col1: '%s. Col2: %s'\\n\",\n            (products + i * sizeof(char**)),\n            (products + i * sizeof(char**) + sizeof(char*))\n        );\n    }\n}\n\nint main(void) {\n    const char* a[][3] = {{\"abc\", \"1\"}, {\"def\", \"2\"}, {\"ghi\", \"3\"}};\n    print((char***)a, 3, 2);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "c-preprocessor"], "comments": [{"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "edited": false, "score": 0, "creation_date": 1453885752, "post_id": 35032786, "comment_id": 57791002, "body": "What do you intend to gain from checking this <code>#define</code>d constant at compile time? The value in the check itself is also a preprocessor constant - would you then have second check that the <code>0x55</code> in the check is <code>0x55</code>? If you are generating the <code>RAW_DATA</code> programmatically, include the check in the generator program. If you are generating it by hand, read it after typing it in\u2026"}, {"owner": {"reputation": 1388, "user_id": 5837095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I7CdJ.png?s=128&g=1", "display_name": "Embedded C", "link": "https://stackoverflow.com/users/5837095/embedded-c"}, "edited": false, "score": 2, "creation_date": 1453885864, "post_id": 35032786, "comment_id": 57791080, "body": "@D.Mantas Please elaborate you question. RAW_DATA&#39;s 1st parameter is 0x11 2nd 0x20, ... what do u want to check here. in which scenario preprocessor should throw error ?"}, {"owner": {"reputation": 43, "user_id": 5845716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e10903b2e960c08d360c481c4e20d313?s=128&d=identicon&r=PG&f=1", "display_name": "D. Mantas ", "link": "https://stackoverflow.com/users/5845716/d-mantas"}, "reply_to_user": {"reputation": 1388, "user_id": 5837095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I7CdJ.png?s=128&g=1", "display_name": "Embedded C", "link": "https://stackoverflow.com/users/5837095/embedded-c"}, "edited": false, "score": 0, "creation_date": 1453886081, "post_id": 35032786, "comment_id": 57791230, "body": "@Let Us Embeded Sorry for that, I have updated. The 2nd parameter is 0x20."}, {"owner": {"reputation": 43, "user_id": 5845716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e10903b2e960c08d360c481c4e20d313?s=128&d=identicon&r=PG&f=1", "display_name": "D. Mantas ", "link": "https://stackoverflow.com/users/5845716/d-mantas"}, "reply_to_user": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "edited": false, "score": 0, "creation_date": 1453886259, "post_id": 35032786, "comment_id": 57791349, "body": "@Arkku The reason why I need to check, is that the header file is generated automatically and I can&#39;t change anything in the generating program. And sometimes its generated parameters are wrong. So the user during the compilation would see that the parameter is wrong and should go to the .h file and change the parameter to the correct one."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1453887447, "post_id": 35032786, "comment_id": 57792190, "body": "use <code>boost&#47;preprocessor</code> if you can use it."}], "answers": [{"tags": [], "owner": {"reputation": 4764, "user_id": 2419922, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/41e095cca8abbfde0f1f52d73a1efcd7?s=128&d=identicon&r=PG", "display_name": "cshu", "link": "https://stackoverflow.com/users/2419922/cshu"}, "is_accepted": true, "score": 4, "last_activity_date": 1453888067, "last_edit_date": 1453888067, "creation_date": 1453887765, "answer_id": 35033727, "question_id": 35032786, "link": "https://stackoverflow.com/questions/35032786/comparing-defined-raw-data-using-preprocessor/35033727#35033727", "title": "Comparing defined raw data using preprocessor", "body": "<pre><code>#define RAW_DATA 0x11, 0x20, 0x55, 0x00, x044\n#define X_GET_SECOND_PAR(par) GET_SECOND_PAR(par)\n#define GET_SECOND_PAR(p1,p2,p3,p4,p5) p2\n\n#if X_GET_SECOND_PAR(RAW_DATA) != 0x20\n#error \"2nd parameter shall be 0x20\"\n#endif\n</code></pre>\n\n<p>For specific parameter checking. It's not elegant.</p>\n"}, {"comments": [{"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "edited": false, "score": 0, "creation_date": 1453892451, "post_id": 35033956, "comment_id": 57795556, "body": "Doesn&#39;t work for me and <code>clang</code>, copypasted directly from here - <code>RAW_DATA</code> is interpreted as only one argument to the macros, not expanded to five. I believe the extra level of indirection is required as per accepted answer, so I&#39;m curious: did you get this to work on some compiler?"}], "tags": [], "owner": {"reputation": 1388, "user_id": 5837095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I7CdJ.png?s=128&g=1", "display_name": "Embedded C", "link": "https://stackoverflow.com/users/5837095/embedded-c"}, "is_accepted": false, "score": 2, "last_activity_date": 1453888425, "creation_date": 1453888425, "answer_id": 35033956, "question_id": 35032786, "link": "https://stackoverflow.com/questions/35032786/comparing-defined-raw-data-using-preprocessor/35033956#35033956", "title": "Comparing defined raw data using preprocessor", "body": "<p>Define a macro like this </p>\n\n<pre><code>#defined RAW_DATA 0x11, 0x20, 0x55, 0x00, x044\n#define RAW_DATA_PARAM_1(param1,param2,param3,param4,param5) param1 \n#define RAW_DATA_PARAM_2(param1,param2,param3,param4,param5) param2\n#define RAW_DATA_PARAM_3(param1,param2,param3,param4,param5) param3\n#define RAW_DATA_PARAM_4(param1,param2,param3,param4,param5) param4\n#define RAW_DATA_PARAM_5(param1,param2,param3,param4,param5) param5\n\n#if RAW_DATA_PARAM_1(RAW_DATA) != 0x11\n#error \"wrong raw data param 1\"\n#elif RAW_DATA_PARAM_2(RAW_DATA) != 0x20\n#error \"wrong raw data param 2\"\n#elif RAW_DATA_PARAM_3(RAW_DATA) != 0x55\n#error \"wrong raw data param 3\"\n#elif RAW_DATA_PARAM_4(RAW_DATA) != 0x00\n#error \"wrong raw data param 4\"\n#elif RAW_DATA_PARAM_5(RAW_DATA) != 0x44\n#error \"wrong raw data param 5\"\n#endif\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 5845716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e10903b2e960c08d360c481c4e20d313?s=128&d=identicon&r=PG&f=1", "display_name": "D. Mantas ", "link": "https://stackoverflow.com/users/5845716/d-mantas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 35033727, "answer_count": 2, "score": 4, "last_activity_date": 1454108632, "creation_date": 1453885153, "last_edit_date": 1454108632, "question_id": 35032786, "link": "https://stackoverflow.com/questions/35032786/comparing-defined-raw-data-using-preprocessor", "title": "Comparing defined raw data using preprocessor", "body": "<p>I have a defined raw data in my header file (which is generated automatically), like this:</p>\n\n<pre><code>#defined RAW_DATA 0x11, 0x20, 0x55, 0x00, x044\n</code></pre>\n\n<p>The aim is to check a specific parameter of RAW_DATA in compilation time and if it is wrong throw an #error.</p>\n\n<p>For instance, During the compilation, the preprocessor should check if 2nd parameter of RAW_DATA (in this case 0x20) is really 0x20, if it is not throw an #error.</p>\n\n<p>The main problem, how to access the specific parameter in defined RAW_DATA, is it somehow possible?</p>\n\n<p>P.S. I am using Keil compiler in C.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1453885410, "post_id": 35032667, "comment_id": 57790806, "body": "The comment on cppreference is wrong"}, {"owner": {"reputation": 43188, "user_id": 273767, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/363e49843e26763a496164190940ece4?s=128&d=identicon&r=PG", "display_name": "Cubbi", "link": "https://stackoverflow.com/users/273767/cubbi"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1453909254, "post_id": 35032667, "comment_id": 57807762, "body": "@M.M comment updated"}], "answers": [{"comments": [{"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 2, "creation_date": 1453885261, "post_id": 35032757, "comment_id": 57790723, "body": "Despite the name, the linked web site contains information for both languages. The linked page contains information for C (not C++)."}, {"owner": {"reputation": 698, "user_id": 5845611, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/BheTl.jpg?s=128&g=1", "display_name": "Carousel", "link": "https://stackoverflow.com/users/5845611/carousel"}, "edited": false, "score": 0, "creation_date": 1453886371, "post_id": 35032757, "comment_id": 57791434, "body": "The webiste cppreference.com has both c and c++ references. They are completely separated in contents. In C, if an <code>enum</code> can have any integer as its value other than one of those declared as its enumerators, it seems that type <code>enum</code> is almost identical to integer. From the literal meaning of enumeration, I thought the values of enumeration objects are restricted to an integer set."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 698, "user_id": 5845611, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/BheTl.jpg?s=128&g=1", "display_name": "Carousel", "link": "https://stackoverflow.com/users/5845611/carousel"}, "edited": false, "score": 0, "creation_date": 1453887047, "post_id": 35032757, "comment_id": 57791885, "body": "@Carousel I think it is slightly underspecified. But if we take the interpretation that only named members are allowed, then the following would not work:  <code>enum flags { FLAG_A = 0x01, FLAG_B = 0x02 };</code> ... <code>enum flags f = FLAG_A | FLAG_B;</code>  . However that is a common use of enums and I think the standard committee would have intended that this usage be supported."}], "tags": [], "owner": {"reputation": 12521, "user_id": 4498329, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b1bf128245aa5bcb1b740e8154296900?s=128&d=identicon&r=PG&f=1", "display_name": "skyking", "link": "https://stackoverflow.com/users/4498329/skyking"}, "is_accepted": false, "score": 4, "last_activity_date": 1453885631, "last_edit_date": 1453885631, "creation_date": 1453885086, "answer_id": 35032757, "question_id": 35032667, "link": "https://stackoverflow.com/questions/35032667/why-enumeration-objects-can-have-values-other-than-their-enumerators-in-c/35032757#35032757", "title": "Why enumeration objects can have values other than their enumerators in C?", "body": "<p>You're reading C++ documentation to learn about C? C and C++ are <strong>not</strong> the same language.</p>\n\n<p>In C, an <code>enum</code> is effectively an integer type and you're allowed to handle it as such. This means that you can assign an integer to it which may not be one of the prescribed values.</p>\n\n<p>However it's considered bad practice to do so and some compilers or static code checkers have options to warn about such practices.</p>\n\n<p>In C++ on the other hand, enums are distinct types in their own right and you are not allowed to do this in C++, at least not implicitly. Compiling this as C++ results in a compilation error.</p>\n"}, {"tags": [], "owner": {"reputation": 5024, "user_id": 4439794, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/ogyE1.png?s=128&g=1", "display_name": "Trevor", "link": "https://stackoverflow.com/users/4439794/trevor"}, "is_accepted": false, "score": 2, "last_activity_date": 1453885306, "creation_date": 1453885306, "answer_id": 35032823, "question_id": 35032667, "link": "https://stackoverflow.com/questions/35032667/why-enumeration-objects-can-have-values-other-than-their-enumerators-in-c/35032823#35032823", "title": "Why enumeration objects can have values other than their enumerators in C?", "body": "\n\n<p>Yes, C compiler allow you to do this.</p>\n\n<p>You also can do this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;stdio.h&gt;\n\nint main()\n{   \n    enum C {green = 5, red};\n    enum C  cc = 7;\n    printf(\"%i\\n\", cc);\n\n    return 0;\n}\n</code></pre>\n\n<p>CPP is really different with C, so don't apply CPP reference to C. </p>\n"}, {"tags": [], "owner": {"reputation": 16091, "user_id": 4975822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c04e8c4c984d36bea8a6239574980fbd?s=128&d=identicon&r=PG&f=1", "display_name": "artm", "link": "https://stackoverflow.com/users/4975822/artm"}, "is_accepted": true, "score": 3, "last_activity_date": 1453886045, "last_edit_date": 1453886045, "creation_date": 1453885604, "answer_id": 35032937, "question_id": 35032667, "link": "https://stackoverflow.com/questions/35032667/why-enumeration-objects-can-have-values-other-than-their-enumerators-in-c/35032937#35032937", "title": "Why enumeration objects can have values other than their enumerators in C?", "body": "<p>From std 6.7.2.3 (enumeration content) - the underlying type of <code>enum</code> is implementation-defined, but a variable of type <code>enum</code> can be assign any number of the underlying type (which is at the very least <code>char</code>).</p>\n\n<blockquote>\n  <p>Each enumerated type shall be compatible with char, a signed integer type, or an\n  unsigned integer type. <strong>The choice of type is implementation-defined, but shall be\n  capable of representing the values of all the members of the enumeration</strong>. The\n  enumerated type is incomplete until immediately after the } that terminates the list of\n  enumerator declarations, and complete thereafter.</p>\n</blockquote>\n\n<p>The compiler is NOT required to check that what your store in a <code>enum</code> variable is a valid value for that enumeration or not.</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1453886100, "creation_date": 1453886100, "answer_id": 35033110, "question_id": 35032667, "link": "https://stackoverflow.com/questions/35032667/why-enumeration-objects-can-have-values-other-than-their-enumerators-in-c/35033110#35033110", "title": "Why enumeration objects can have values other than their enumerators in C?", "body": "<p>In C there is a contradiction. All enumerations are different types. However their enumerators are integer constants of type <code>int</code>.</p>\n\n<p>There is no check whether a given integer value corresponds to the set of specified enumerators in an enumeration.</p>\n\n<p>In C++ the contradiction was eliminated. In C++ each enumerator has the same type as its enumeration where the enumerator is declared and moreover there is no implicit conversion from type <code>int</code> to the type of the given enumeration.</p>\n"}], "owner": {"reputation": 698, "user_id": 5845611, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/BheTl.jpg?s=128&g=1", "display_name": "Carousel", "link": "https://stackoverflow.com/users/5845611/carousel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 1, "closed_date": 1453886323, "accepted_answer_id": 35032937, "answer_count": 4, "score": 4, "last_activity_date": 1453886100, "creation_date": 1453884798, "last_edit_date": 1453885097, "question_id": 35032667, "link": "https://stackoverflow.com/questions/35032667/why-enumeration-objects-can-have-values-other-than-their-enumerators-in-c", "closed_reason": "Duplicate", "title": "Why enumeration objects can have values other than their enumerators in C?", "body": "<p>Here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main()\n{   \n    enum C {green = 5, red};\n    enum CC {blue, yellow} cc = green;\n    printf(\"%i\\n\", cc);\n    return 0;\n}\n</code></pre>\n\n<p>It does compile, and produce console output 5.</p>\n\n<p><a href=\"http://en.cppreference.com/w/c/language/enum\" rel=\"nofollow\">cppreference.com</a> says that \"An enumerated type is a distinct type whose value is restricted to one of several explicitly named constants (enumeration constants)\". I am really confused.</p>\n\n<p>By the way, the compiler I'm using is gcc version 4.8.1.</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 2940, "user_id": 3800096, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/dffaee3296e432469a794c508c297abc?s=128&d=identicon&r=PG&f=1", "display_name": "AustinWBryan", "link": "https://stackoverflow.com/users/3800096/austinwbryan"}, "edited": false, "score": 0, "creation_date": 1453884947, "post_id": 35032585, "comment_id": 57790572, "body": "What are you trying to do? Also, you repeating yourself very often. Consider refactoring into more functions. Why are you printing lines of one character again and again?"}, {"owner": {"reputation": 510, "user_id": 5778300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a214fbbf28e4a6615ff6891f99e06c5?s=128&d=identicon&r=PG&f=1", "display_name": "Flikk", "link": "https://stackoverflow.com/users/5778300/flikk"}, "edited": false, "score": 0, "creation_date": 1453885006, "post_id": 35032585, "comment_id": 57790597, "body": "there are 2 errors in your code. <code>int i = 0</code>is missing <code>; </code> and you end the block of your loop with <code>{</code> instead of <code>}</code>"}, {"owner": {"reputation": 324, "user_id": 5638360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/854de87d130bf76583b746df0e71ef3d?s=128&d=identicon&r=PG&f=1", "display_name": "Georg", "link": "https://stackoverflow.com/users/5638360/georg"}, "edited": false, "score": 0, "creation_date": 1453885224, "post_id": 35032585, "comment_id": 57790702, "body": "strings_line_tokens[1] is of type char*, so casting to char or int does not make sense here. The only thing that should work as expected is the last and second to last printf using strings_line_tokens[1][0] which is of type char."}, {"owner": {"reputation": 143, "user_id": 5425351, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/3791bfa609ec1dedab7b9c98cefa3a05?s=128&d=identicon&r=PG&f=1", "display_name": "rockstar797", "link": "https://stackoverflow.com/users/5425351/rockstar797"}, "reply_to_user": {"reputation": 2940, "user_id": 3800096, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/dffaee3296e432469a794c508c297abc?s=128&d=identicon&r=PG&f=1", "display_name": "AustinWBryan", "link": "https://stackoverflow.com/users/3800096/austinwbryan"}, "edited": false, "score": 0, "creation_date": 1453885946, "post_id": 35032585, "comment_id": 57791142, "body": "@AustinWBryan I am trying to get that for loop at the end working. I am trying to show what I have tried. None of those methods are working."}, {"owner": {"reputation": 143, "user_id": 5425351, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/3791bfa609ec1dedab7b9c98cefa3a05?s=128&d=identicon&r=PG&f=1", "display_name": "rockstar797", "link": "https://stackoverflow.com/users/5425351/rockstar797"}, "reply_to_user": {"reputation": 510, "user_id": 5778300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a214fbbf28e4a6615ff6891f99e06c5?s=128&d=identicon&r=PG&f=1", "display_name": "Flikk", "link": "https://stackoverflow.com/users/5778300/flikk"}, "edited": false, "score": 0, "creation_date": 1453886094, "post_id": 35032585, "comment_id": 57791242, "body": "@Flikk Thank you. They have been fixed."}, {"owner": {"reputation": 143, "user_id": 5425351, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/3791bfa609ec1dedab7b9c98cefa3a05?s=128&d=identicon&r=PG&f=1", "display_name": "rockstar797", "link": "https://stackoverflow.com/users/5425351/rockstar797"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1453886338, "post_id": 35032585, "comment_id": 57791408, "body": "@SouravGhosh are you saying this didn&#39;t work <code>char *strings_line_tokens[503] = {0};</code>? I that initialized <code>strings_line_tokens[0]</code> , <code>strings_line_tokens[1] </code> and so on to null."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1453886880, "post_id": 35032585, "comment_id": 57791782, "body": "@rockstar797 Sorry, I did not notice the format specifiers. Please ignore."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1453887599, "post_id": 35032585, "comment_id": 57792303, "body": "could you show what output you expected from the first two of the lines containing <code>%c %d</code> ? It&#39;s hard to tell what you are trying to do (and your compiler agrees)"}, {"owner": {"reputation": 143, "user_id": 5425351, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/3791bfa609ec1dedab7b9c98cefa3a05?s=128&d=identicon&r=PG&f=1", "display_name": "rockstar797", "link": "https://stackoverflow.com/users/5425351/rockstar797"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1453889725, "post_id": 35032585, "comment_id": 57793695, "body": "@M.M I added an update. Is it possible to get <code>garbage 0</code> like I was hoping for? I would still like to know that if possible :). And as I said Klas Lindb&#228;ck got my ultimate for of the for loop working."}], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 5425351, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/3791bfa609ec1dedab7b9c98cefa3a05?s=128&d=identicon&r=PG&f=1", "display_name": "rockstar797", "link": "https://stackoverflow.com/users/5425351/rockstar797"}, "edited": false, "score": 0, "creation_date": 1453887078, "post_id": 35033175, "comment_id": 57791916, "body": "Can you please remind me what the shorthand if else notation means? I have not seen that in awhile."}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "reply_to_user": {"reputation": 143, "user_id": 5425351, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/3791bfa609ec1dedab7b9c98cefa3a05?s=128&d=identicon&r=PG&f=1", "display_name": "rockstar797", "link": "https://stackoverflow.com/users/5425351/rockstar797"}, "edited": false, "score": 0, "creation_date": 1453887461, "post_id": 35033175, "comment_id": 57792198, "body": "@rockstar797 Added the regular <code>if</code> equivalent."}], "tags": [], "owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "is_accepted": false, "score": 2, "last_activity_date": 1453887412, "last_edit_date": 1453887412, "creation_date": 1453886296, "answer_id": 35033175, "question_id": 35032585, "link": "https://stackoverflow.com/questions/35032585/getting-the-first-value-of-a-null-initialized-array-of-strings/35033175#35033175", "title": "getting the first value of a null initialized array of strings", "body": "<p>The <code>for</code> loop is already working.</p>\n\n<p>I removed the trial-and-error code and kept just the <code>for</code> loop:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n\nint main(int argc, char** argv)\n{\n    char *strings_line_tokens[503] = {0};\n    int i = 0;\n\n    strings_line_tokens[0] = malloc(strlen(\"cookies\")+1);\n    strcpy(strings_line_tokens[0], \"cookies\");\n\n    strings_line_tokens[2] = malloc(strlen(\"FOOBAR\")+1);\n    strcpy(strings_line_tokens[2], \"FOOBAR\");\n\n    for(i = 0; i &lt; 3; i++)\n        if(strings_line_tokens[i] != 0)\n            printf(\"strings_line_tokens[%d]: %s\\n\", i,strings_line_tokens[i]);\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>strings_line_tokens[0]: cookies\nstrings_line_tokens[2]: FOOBAR\n</code></pre>\n\n<p>There is no right way to print a null value. I would just add an else clause that printed what I wanted, for example the string <code>null</code>:</p>\n\n<pre><code>for(i = 0; i &lt; 3; i++)\n    printf(\"strings_line_tokens[%d]: %s\\n\", i, strings_line_tokens[i] == 0 ? \"null\": strings_line_tokens[i]);\n</code></pre>\n\n<p>or (if you prefer regular <code>if</code> over the ternary if):</p>\n\n<pre><code>for(i = 0; i &lt; 3; i++)\n    if (strings_line_tokens[i] == 0) {\n        printf(\"strings_line_tokens[%d]: %s\\n\", i, \"null\");\n    } else {\n        printf(\"strings_line_tokens[%d]: %s\\n\", i, strings_line_tokens[i]);\n    }\n</code></pre>\n\n<p>New output:</p>\n\n<pre><code>strings_line_tokens[0]: cookies\nstrings_line_tokens[1]: null\nstrings_line_tokens[2]: FOOBAR\n</code></pre>\n"}], "owner": {"reputation": 143, "user_id": 5425351, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/3791bfa609ec1dedab7b9c98cefa3a05?s=128&d=identicon&r=PG&f=1", "display_name": "rockstar797", "link": "https://stackoverflow.com/users/5425351/rockstar797"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1453889549, "creation_date": 1453884552, "last_edit_date": 1453889549, "question_id": 35032585, "link": "https://stackoverflow.com/questions/35032585/getting-the-first-value-of-a-null-initialized-array-of-strings", "title": "getting the first value of a null initialized array of strings", "body": "<p>I am trying to get the first value of a null initialed array of string.I have tried every method I can think of with no luck. I either get warning, errors, or a segmentation fault. Whats the correct way to print the null value and use it in the if statement? Once I get this figured out I would like to get that for loop at the end printing the strings not equal to null. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n\nint main(int argc, char** argv) \n{\n    char *strings_line_tokens[503] = {0};\n    int i = 0;\n\n    strings_line_tokens[0] = malloc(strlen(\"cookies\")+1);\n    strcpy(strings_line_tokens[0], \"cookies\");\n\n    strings_line_tokens[2] = malloc(strlen(\"FOOBAR\")+1);\n    strcpy(strings_line_tokens[2], \"FOOBAR\");\n\n    printf(\"strings_line_tokens[]: %s\\n\",strings_line_tokens[0]);\n    printf(\"-------------------\\n\");\n\n    printf(\"strings_line_tokens[]: %c %d \\n\",(char)strings_line_tokens[1], (int)strings_line_tokens[1]);\n    printf(\"aaaaaaaaaaaaaaaa\\n\");\n\n    printf(\"strings_line_tokens[]: %c %d \\n\",strings_line_tokens[1], strings_line_tokens[1]);\n    printf(\"bbbbbbbbbbbbbbbb\\n\");\n\n    printf(\"strings_line_tokens[]: %c %d \\n\",(char)strings_line_tokens[1][0], (int)strings_line_tokens[1][0]);\n    printf(\"ccccccccccccccccccc\\n\");\n\n    printf(\"strings_line_tokens[]: %c %d \\n\",strings_line_tokens[1][0], strings_line_tokens[1][0]);\n    printf(\"-------------------\\n\");\n\n    if(strings_line_tokens[1] == 0)\n        printf(\"You have a NULL \\n\");\n\n    for(i = 0; i &lt; 3; i++)\n        if(strings_line_tokens[i] != 0)\n            printf(\"strings_line_tokens[]: %s\\n\",strings_line_tokens[i]);\n    return 0;\n}\n</code></pre>\n\n<p>Here are the current warnings that I'm getting. </p>\n\n<pre><code>main.c:13: warning: cast from pointer to integer of different size\nmain.c:13: warning: cast from pointer to integer of different size\nmain.c:15: warning: format \u2018%c\u2019 expects type \u2018int\u2019, but argument 2 has type \u2018char *\u2019\nmain.c:15: warning: format \u2018%d\u2019 expects type \u2018int\u2019, but argument 3 has type \u2018char *\u2019\n</code></pre>\n\n<p>Here is the update M.M asked for. Klas Lindb\u00e4ck showed how to get my ultimate goal which was the for loop working. </p>\n\n<p>From past experience when using a char array that was initialized to <code>null</code> %c would give garbage in printf() and %d would give the ascii value of <code>null</code> which is 0 in printf(). So I thought one of these would give garbage and the ascii value 0. </p>\n\n<pre><code>printf(\"strings_line_tokens[]: %c %d \\n\",(char)strings_line_tokens[1], (int)strings_line_tokens[1]);\nprintf(\"aaaaaaaaaaaaaaaa\\n\");\n\nprintf(\"strings_line_tokens[]: %c %d \\n\",strings_line_tokens[1], strings_line_tokens[1]);\nprintf(\"bbbbbbbbbbbbbbbb\\n\");\n\nprintf(\"strings_line_tokens[]: %c %d \\n\",(char)strings_line_tokens[1][0], (int)strings_line_tokens[1][0]);\nprintf(\"ccccccccccccccccccc\\n\");\n\nprintf(\"strings_line_tokens[]: %c %d \\n\",strings_line_tokens[1][0], strings_line_tokens[1][0]);\nprintf(\"-------------------\\n\");\n</code></pre>\n\n<p>Output I was hoping for with one of them. </p>\n\n<pre><code>garbage 0\n</code></pre>\n"}, {"tags": ["c", "assembly", "compiler-construction"], "comments": [{"owner": {"reputation": 1195, "user_id": 1865106, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/15dc57110dac17f6bae8187c8a405b11?s=128&d=identicon&r=PG&f=1", "display_name": "SSC", "link": "https://stackoverflow.com/users/1865106/ssc"}, "edited": false, "score": 1, "creation_date": 1453884233, "post_id": 35032284, "comment_id": 57790195, "body": "Hopefully the following links are useful to your question: <a href=\"http://www.eventhelix.com/RealtimeMantra/Basics/CToAssemblyTranslation.htm#.VqiDKpebgsY\" rel=\"nofollow noreferrer\">CToAssemblyTranslation</a>. <a href=\"https://en.wikibooks.org/wiki/X86_Disassembly/Functions_and_Stack_Frames\" rel=\"nofollow noreferrer\">Wikibooks</a>."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1453885669, "post_id": 35032284, "comment_id": 57790941, "body": "<i>Which</i> assembly? x86&#39;s <code>call</code> is just a &quot;jump that remembers where it came from&quot;, zero parameters are involved, you just pass them however you want."}, {"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 6, "creation_date": 1453885703, "post_id": 35032284, "comment_id": 57790961, "body": "<i>&quot;If that&#39;s not the case then that means&quot;</i> that parameters are either placed in registers prior to the call instruction, or on the stack. It depends on which cpu architecture you&#39;re programming for, and which calling convention you&#39;re using."}, {"owner": {"reputation": 1618, "user_id": 1860868, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/65a0441fac5301a592bb474d49c891c9?s=128&d=identicon&r=PG", "display_name": "Derek K", "link": "https://stackoverflow.com/users/1860868/derek-k"}, "edited": false, "score": 0, "creation_date": 1453895348, "post_id": 35032284, "comment_id": 57797408, "body": "In  x86 the parameters are stored on a stack. Read about ebp and esp registers (they are used to assign memory for function arguments)"}], "answers": [{"tags": [], "owner": {"reputation": 24405, "user_id": 99354, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b6ee96d3a17fcbd2bd24210eb7caf441?s=128&d=identicon&r=PG&f=1", "display_name": "Marco van de Voort", "link": "https://stackoverflow.com/users/99354/marco-van-de-voort"}, "is_accepted": false, "score": 1, "last_activity_date": 1453906519, "last_edit_date": 1453906519, "creation_date": 1453904505, "answer_id": 35039884, "question_id": 35032284, "link": "https://stackoverflow.com/questions/35032284/from-compiler-to-assembler/35039884#35039884", "title": "From Compiler to assembler", "body": "<p>There might be some minimal options in some instruction sets, but in general that is not the case. </p>\n\n<p>Some assemblers have macros though that mimic procedural calls (usually with only a few registrable basetypes).</p>\n\n<p>And no, only in the case of inline functions a new function is generated with the parametrised with the parameters substituted.</p>\n\n<p>A compiler doesn't generate code for a procedure by textual substitution of parameters, but by putting all relevant parameters in registers or on the stack in a fixed regime called the \"calling convention\". </p>\n\n<p>The code that calculates and loads the parameters (in registers or on stack) is generated for each invocation, and the procedure/function remains unmodified and loads the parameters from where it knows it can find them</p>\n"}, {"tags": [], "owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "is_accepted": true, "score": 2, "last_activity_date": 1453907527, "creation_date": 1453907527, "answer_id": 35041045, "question_id": 35032284, "link": "https://stackoverflow.com/questions/35032284/from-compiler-to-assembler/35041045#35041045", "title": "From Compiler to assembler", "body": "<p>The compiler uses a \"calling convention\" which can be specific to that one compiler for that one target architecture (x86, arm, mips, pdp-11, etc).  For architectures with \"plenty\" of general purpose registers, the calling convention often starts with passing parameters in registers, and then uses the stack, for architectures with not a lot of registers the stack is primarily if not completely used for parameter passing and the return.  </p>\n\n<p>The calling convention is a set of rules, such that if everyone follows the rules you can compile functions into objects and link them with other objects and they will be able to call each others functions or call themselves.</p>\n\n<p>So it is a bit of a hybrid of what you were assuming.  The code built for that function is in some respects custom to that function as the number and type of parameters dictate what registers or how much stack is consumed and how.  At the same time all functions conform to the same formula so they look more alike than different.   </p>\n\n<p>On an arm for example you might have three integers being passed in to a function, they would for all the arm calling conventions I have seen (generally you find that even though it could vary across compilers it often doesnt or in the case of arm and mips and some others they try to dictate the convention for everyone rather than the compiler folks trying to do it) the first parameter in the C function would come in in r0, the second in r1 and third in r2.  If the first parameter were a 64 bit integer though then r0 and r1 are used for that first parameter and r2 gets the second and r3 the third, after r3 you use the stack, ordering of parameters on the stack is also dictated by the convention.  So when a caller or a callee's code is compiled using the same C prototype then both sides know exactly where to find the parameters and construct the assembly language to do that.</p>\n"}], "owner": {"reputation": 173, "user_id": 5838107, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IJAav.png?s=128&g=1", "display_name": "YaserM", "link": "https://stackoverflow.com/users/5838107/yaserm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 35041045, "answer_count": 2, "score": 0, "last_activity_date": 1453907527, "creation_date": 1453883685, "question_id": 35032284, "link": "https://stackoverflow.com/questions/35032284/from-compiler-to-assembler", "title": "From Compiler to assembler", "body": "<p>I have a question regarding the assembler. I was thinking of how the C function that takes multiple parameters as an argument is transformed into assembly. So my question is, is there a subroutine in assembly that takes arguments as a parameter to operate?\nThe code might look something like this:</p>\n\n<p>Call label1, R16.\nWhere R16 is the subroutine input parameter.</p>\n\n<p>If that's not the case then that means that EACH time the C function is called, it gets assembled into a subroutine with the parameters related to the specific call being substituted automatically in it. That basically means that whenever a C function is called, the compiler transforms it into an inline function which am sure is not the case either :D</p>\n\n<p>So which is right?\nThanks alot! :)</p>\n"}, {"tags": ["c", "arguments", "whitespace"], "comments": [{"owner": {"reputation": 1017, "user_id": 828854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AjIZY.jpg?s=128&g=1", "display_name": "Michael Homer", "link": "https://stackoverflow.com/users/828854/michael-homer"}, "edited": false, "score": 0, "creation_date": 1453884270, "post_id": 35063418, "comment_id": 57849374, "body": "It just runs <code>sh -c &#39;...&#39;</code>."}, {"owner": {"reputation": 270, "user_id": 2322172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3377a525f8c99eb1fd5054240c8f1cf7?s=128&d=identicon&r=PG", "display_name": "lgeorget", "link": "https://stackoverflow.com/users/2322172/lgeorget"}, "edited": false, "score": 3, "creation_date": 1453885061, "post_id": 35063418, "comment_id": 57849375, "body": "You&#39;re confusing calls to function &quot;system()&quot; and &quot;system calls&quot;, which are functions implemented in the kernel and callable from userland (through a wrapper in the standard library). The function &quot;system()&quot; is implemented in the C standard library and issues the system call &quot;execve&quot;."}, {"owner": {"reputation": 582, "user_id": 1672723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27393b956c2c767aa5d271d3972c0086?s=128&d=identicon&r=PG", "display_name": "Scott", "link": "https://stackoverflow.com/users/1672723/scott"}, "edited": false, "score": 1, "creation_date": 1453893550, "post_id": 35063418, "comment_id": 57849376, "body": "(1)\u202fIf you know that the <code>system()</code> function uses the shell to execute the command, why are you surprised that it uses shell syntax?\u2003(2)\u202fAs a sysadmin, you should try to minimize the use of the <code>system()</code> function in programs on your system \u2014 don&#39;t use it, and discourage others from using it \u2014 especially if the program runs in a privileged context and/or builds its command string dynamically; <b><i>especially</i></b> if it builds its command string from user-supplied input.\u2003If you must use it, put a <b><i>lot</i></b> of thought and effort into validating the user input, to prevent code-injection-type attacks."}, {"owner": {"reputation": 1041, "user_id": 5419599, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/SbCyV.png?s=128&g=1", "display_name": "Wildcard", "link": "https://stackoverflow.com/users/5419599/wildcard"}, "reply_to_user": {"reputation": 270, "user_id": 2322172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3377a525f8c99eb1fd5054240c8f1cf7?s=128&d=identicon&r=PG", "display_name": "lgeorget", "link": "https://stackoverflow.com/users/2322172/lgeorget"}, "edited": false, "score": 0, "creation_date": 1500419029, "post_id": 35063418, "comment_id": 77325385, "body": "@lgeorget, that is precisely what I was confusing: <code>system()</code> and <code>execve()</code>.  Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 2373, "user_id": 2218718, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/12e3ba20337c7021f2e115688a681652?s=128&d=identicon&r=PG", "display_name": "cuonglm", "link": "https://stackoverflow.com/users/2218718/cuonglm"}, "is_accepted": true, "score": 6, "last_activity_date": 1453884578, "creation_date": 1453884578, "answer_id": 35063419, "question_id": 35063418, "link": "https://stackoverflow.com/questions/35063418/how-do-c-programs-pass-whitespace-arguments-to-the-libc-system3-calls/35063419#35063419", "title": "How do C programs pass whitespace arguments to the libc system(3) calls?", "body": "<p>There is nothing to do in C source here, the string you pass to <em>system()</em> was run in shell context. The shell will parse that string, your C program doesn't.</p>\n\n<hr>\n\n<p>If you look at <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/system.html\">system() function prototype</a>:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n\nint system(const char *command);\n</code></pre>\n\n<p>The argument passed to <code>system()</code> is a string. It has nothing to do with whitespaces characters in string, it gets a string and passes that string to other system call. The same as you did:</p>\n\n<pre><code>sh -c 'ls -l'\n</code></pre>\n\n<p>Here <em>system()</em> use <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/execve.html\">execve()</a>:</p>\n\n<pre><code>$ cat &lt;&lt;\\CODE | gcc -xc -\n#include &lt;stdlib.h&gt;\nint main(void) {\n  system(\"ls -l\");\n  return 0;\n}\nCODE\n\n$ strace -fe execve ./a.out\nexecve(\"./a.out\", [\"./a.out\"], [/* 64 vars */]) = 0\nProcess 16281 attached\n[pid 16281] execve(\"/bin/sh\", [\"sh\", \"-c\", \"ls -l\"], [/* 64 vars */]) = 0\nProcess 16282 attached\n[pid 16282] execve(\"/bin/ls\", [\"ls\", \"-l\"], [/* 64 vars */]) = 0\n...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1079, "user_id": 4472848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0bc7b33199a0a5e067e1a33265cf88d1?s=128&d=identicon&r=PG", "display_name": "Wouter Verhelst", "link": "https://stackoverflow.com/users/4472848/wouter-verhelst"}, "is_accepted": false, "score": 2, "last_activity_date": 1453889156, "creation_date": 1453889156, "answer_id": 35063420, "question_id": 35063418, "link": "https://stackoverflow.com/questions/35063418/how-do-c-programs-pass-whitespace-arguments-to-the-libc-system3-calls/35063420#35063420", "title": "How do C programs pass whitespace arguments to the libc system(3) calls?", "body": "<p>Yes and no.</p>\n\n<p>The <code>system()</code> function is a C library call that runs a shell to start an other program, and waits for its result. It is useful for the common need of wanting to run an external command to check if some external condition is satisfied. It does indeed use the shell to start the external command.</p>\n\n<p>It is, not a system call. A system call is a direct request to the kernel; things like 'give me more memory', 'open a file' and 'write this stuff to a file descriptor' are. The <code>system()</code> function is implemented in terms of (at least) three system calls:</p>\n\n<ol>\n<li><code>fork()</code>, to spawn off a child process.</li>\n<li>One of the <code>exec()</code> family, called by the child, to <em>replace</em> that child process by another executable</li>\n<li><code>wait()</code>, called by the parent, to wait for the child process to finish and read its exit state.</li>\n</ol>\n\n<p>The <code>exec()</code> call starts the process <em>without</em> involving any shell, and therefore no whitespace expansion occurs. It is, in theory, possible to bypass the <code>system()</code> function, and then you wouldn't have whitespace issues. That's a lot of work, though, and not usually worth it, because there's a lot <em>more</em> that can go wrong there.</p>\n\n<p>Which brings me to my point: if you're worried about novice people dealing with shell scripts, you shouldn't let them deal with C compilers. It is possible to do a lot more wrong in C than in shell...</p>\n"}, {"tags": [], "owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "is_accepted": false, "score": 1, "last_activity_date": 1453988139, "creation_date": 1453988139, "answer_id": 35063421, "question_id": 35063418, "link": "https://stackoverflow.com/questions/35063418/how-do-c-programs-pass-whitespace-arguments-to-the-libc-system3-calls/35063421#35063421", "title": "How do C programs pass whitespace arguments to the libc system(3) calls?", "body": "<p>If a C program uses <code>system()</code> to invoke another program, it must create a command to be parsed by the shell (specifically, <code>/bin/sh</code>).</p>\n\n<p>The implementation of <code>system(const char *command)</code> will normally end up calling something like <code>execl('/bin/sh', 'sh', '-c', command, (char*)NULL)</code> in the child process (and the <code>execl</code> library function will end up calling <code>execve</code> system call).</p>\n"}], "migrated_from": {"other_site": {"aliases": ["http://linux.stackexchange.com"], "markdown_extensions": ["Prettify"], "launch_date": 1294871917, "open_beta_date": 1282071600, "closed_beta_date": 1281466800, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon@2.png", "favicon_url": "https://cdn.sstatic.net/Sites/unix/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon.png", "audience": "users of Linux, FreeBSD and other Un*x-like operating systems", "site_url": "https://unix.stackexchange.com", "api_site_parameter": "unix", "logo_url": "https://cdn.sstatic.net/Sites/unix/Img/logo.png", "name": "Unix &amp; Linux", "site_type": "main_site"}, "on_date": 1453989196, "question_id": 257946}, "owner": {"reputation": 1041, "user_id": 5419599, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/SbCyV.png?s=128&g=1", "display_name": "Wildcard", "link": "https://stackoverflow.com/users/5419599/wildcard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 245, "favorite_count": 0, "accepted_answer_id": 35063419, "answer_count": 3, "score": 1, "last_activity_date": 1453989196, "creation_date": 1453883367, "last_edit_date": 1495541848, "question_id": 35063418, "link": "https://stackoverflow.com/questions/35063418/how-do-c-programs-pass-whitespace-arguments-to-the-libc-system3-calls", "title": "How do C programs pass whitespace arguments to the libc system(3) calls?", "body": "<p>When a C program calls <code>system()</code> to run a Unix command, I know it's\npossible to pass arguments to the command, and according to a\nStackOverflow answer (from a very high-rep user), <a href=\"https://stackoverflow.com/a/4757526/5419599\">the <code>system()</code> call\nuses the shell to execute the\ncommand</a>.</p>\n\n<p>It surprised me to see <code>system(\"ls -lh &gt;/dev/null 2&gt;&amp;1\");</code> as an\nexample <code>system()</code> call for a C program, since it looks like this is\nusing the same whitespace delimited \"words\" as the shell uses\ninteractively.</p>\n\n<p>From my standpoint as a sysadmin, I'd like to understand what the\nprovisos and pitfalls are when a <code>system()</code> call is going to be executed\nfrom within a C program on some files or commands on my system.\nPassing whitespace-containing filenames into a <em>shell script</em> is\n<a href=\"https://unix.stackexchange.com/q/131766/135943\">very issue-prone</a>;\nare there similar issues when a C program is calling a command?</p>\n\n<p>Or to make the point even blunter (though less exact): Is a C program\nwritten by a novice just as likely to break on whitespace-containing\nfilenames as a shell script?</p>\n"}, {"tags": ["c", "linux", "serial-port"], "answers": [{"comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "edited": false, "score": 0, "creation_date": 1453885058, "post_id": 35032399, "comment_id": 57790626, "body": "Remove the code <code>fcntl(fd, F_SETFL, FNDELAY);</code> This could reset important falgs. If you want a normal blocking read, unset that flag."}], "tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": true, "score": 3, "last_activity_date": 1453897369, "last_edit_date": 1453897369, "creation_date": 1453884028, "answer_id": 35032399, "question_id": 35032069, "link": "https://stackoverflow.com/questions/35032069/serial-port-programming-in-linux/35032399#35032399", "title": "Serial port programming in Linux", "body": "<p>What is your test? Are you shortcutting pin 2 and 3 of your RS232 DB9 connector? </p>\n\n<p>Otherwise <code>read</code> will always return -1 if there are no data to be read.</p>\n\n<p>This is what your code is supposed to do using <code>O_NDELAY</code> flag opening the serial line.</p>\n\n<p>To avoid to read if there are no data to be read, you could use <a href=\"http://linux.die.net/man/2/select\" rel=\"nofollow\">select</a>\nIn your case:</p>\n\n<pre><code>struct timeval tv;\nfd_set rset;\nint retV;\nint timeout = 5000; // 5 seconds\n\ntv.tv_usec = (timeout * 1000) % 1000000;\ntv.tv_sec = timeout / 1000;\n\nFD_ZERO ( &amp;rset );\nFD_SET (  fd, &amp;rset );\nretV = select ( fd+1, &amp;rset, NULL, NULL, &amp;tv );\n\nif( retV == 0 )\n{\n   // timeout stuff\n}\nelse if( retV &lt; 0 )\n{\n    // Error stuff. Read errno to see what happened\n}\nelse\n{\n   // read data\n}\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>Remove <code>fcntl(fd, F_SETFL, FNDELAY);</code> \nIf you want a normal blocking read, unset that flag.</p>\n\n<p>In your code you are also assuming that <code>read</code> will return all sent chars but is not true. <code>read</code> will return chars that are available to be read. This means that if you send \"LINUX\" a 5 times read could be requested to read all 5 chars sent.</p>\n\n<p>Last thing</p>\n\n<pre><code>printf(\"Bytes : %d and data: %s\\n\", bytes, buffer);\n</code></pre>\n\n<p>is <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">Undefined Behavior</a> because of <code>buffer</code> is not a <code>NULL</code> terminated string. You could solve it looping on received chars and print it with %c format, or <code>NULL</code> terminating your buffer with:</p>\n\n<pre><code>if (bytes &gt; 0)\n   buffer[bytes] = '\\0';\n</code></pre>\n\n<p>or</p>\n\n<pre><code>char stringToSend[] = \"LINUX\";\nsize_t len = strlen(stringToSend) +1 ;\n\nwrite(fd,\"LINUX\", len);\nperror(\"write\");\n\nsize_t receivedBytes = 0;\nbytes = 0;\nwhile (receivedBytes&lt;len)\n{\n   bytes = read(fd, &amp;buffer[receivedBytes], sizeof(buffer)-1);\n   perror(\"read\");\n\n   if (bytes &gt; 0)\n       receivedBytes += bytes;\n}\n\nprintf(\"Bytes : %d and data: %s\\n\", receivedBytes, buffer);\n</code></pre>\n"}], "owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 626, "favorite_count": 2, "accepted_answer_id": 35032399, "answer_count": 1, "score": 0, "last_activity_date": 1453897369, "creation_date": 1453883000, "question_id": 35032069, "link": "https://stackoverflow.com/questions/35032069/serial-port-programming-in-linux", "title": "Serial port programming in Linux", "body": "<p>I want to use <strong>RS232</strong> port on the board to communicate with a PC. I understand that I can use <strong>\"dev/ttyS0\"</strong> for that purpose. </p>\n\n<p>I can open and write data to PC by using <strong>write()</strong> function. But the problem is <strong>I can't read from \"dev/ttyS0\".</strong> Every time I use read function, I get \"Resource temporarily unavailable\". Can u guys tell me how to solve this problem?</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;termios.h&gt;\n#include &lt;unistd.h&gt;\n\nint main()\n{\n    int n = 0, fd = 0, bytes = 0;\n    char ch = 0;\n\n    char buffer[10], *bufPtr;\n    int nBytes = 0, tries = 0, x = 0;\n\n    struct termios term;\n\n    fd = open(\"/dev/ttyS0\", O_RDWR | O_NOCTTY | O_NDELAY);\n\n    if (fd == -1)\n    {\n        perror(\"open\");\n        return;\n    }\n    else\n    {\n        fcntl(fd, F_SETFL, 0);\n        perror(\"Port\");\n    }\n\n    if (n = tcgetattr(fd, &amp;term) == -1)\n    {\n        perror(\"tcgetattr\");\n        return;\n    }\n\n    if (n = cfsetispeed(&amp;term, B115200) == -1)\n    {\n        perror(\"cfsetispeed\");\n        return;\n    }\n\n    if (n = cfsetospeed(&amp;term, B115200) == -1)\n    {\n        perror(\"cfsetospeed\");\n        return;\n    }\n\n    term.c_cflag |= (CLOCAL | CREAD);\n    term.c_cflag &amp;= ~PARENB;\n    term.c_cflag &amp;= ~CSTOPB;\n    term.c_cflag &amp;= ~CSIZE;\n    term.c_cflag |= CS8;\n    term.c_lflag &amp;= ~(ICANON | ECHO | ECHOE | ISIG);\n    term.c_iflag &amp;= ~(IXON | IXOFF | IXANY);\n    term.c_cflag &amp;= ~CRTSCTS;\n    term.c_oflag &amp;= ~OPOST; \n\n    if (n = tcsetattr(fd, TCSANOW, &amp;term) == -1)\n    {\n        perror(\"tcsetattr\");\n        return;\n    }\n\n    write(fd,\"LINUX\",5);\n    perror(\"write\");\n\n    fcntl(fd, F_SETFL, FNDELAY);    \n    perror(\"fcntl\");\n    bytes = read(fd, buffer, sizeof(buffer));\n    perror(\"read\");\n    printf(\"Bytes : %d and data: %s\\n\", bytes, buffer);\n}\n</code></pre>\n"}, {"tags": ["c", "windows", "networking", "driver", "ndis"], "answers": [{"tags": [], "owner": {"reputation": 2009, "user_id": 1087890, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/0f8ec58f46e4af3a67f768675c20aac8?s=128&d=identicon&r=PG", "display_name": "Yang Luo", "link": "https://stackoverflow.com/users/1087890/yang-luo"}, "is_accepted": true, "score": 0, "last_activity_date": 1456576927, "creation_date": 1456576927, "answer_id": 35669923, "question_id": 35031927, "link": "https://stackoverflow.com/questions/35031927/how-to-inject-packets-into-receive-rx-path-using-lwf-driver-on-windows/35669923#35669923", "title": "How to inject packets into Receive (Rx) path using LWF driver on Windows?", "body": "<p>The correct to do this is using <strong>NdisFIndicateReceiveNetBufferLists</strong> based on the MSDN: <a href=\"https://msdn.microsoft.com/en-us/library/windows/hardware/ff570448(v=vs.85).aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/windows/hardware/ff570448(v=vs.85).aspx</a></p>\n"}], "owner": {"reputation": 2009, "user_id": 1087890, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/0f8ec58f46e4af3a67f768675c20aac8?s=128&d=identicon&r=PG", "display_name": "Yang Luo", "link": "https://stackoverflow.com/users/1087890/yang-luo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 729, "favorite_count": 1, "accepted_answer_id": 35669923, "answer_count": 1, "score": 0, "last_activity_date": 1456576927, "creation_date": 1453882492, "last_edit_date": 1495541726, "question_id": 35031927, "link": "https://stackoverflow.com/questions/35031927/how-to-inject-packets-into-receive-rx-path-using-lwf-driver-on-windows", "title": "How to inject packets into Receive (Rx) path using LWF driver on Windows?", "body": "<p>I am developing a NDIS 6 Light-weight filter (LWF) driver based on WinPcap. We can imagine that there're two paths for an network adapter: <code>Tx</code> and <code>Rx</code>.</p>\n\n<p><code>Tx</code> is the sending way.</p>\n\n<p><code>Rx</code> is the receiving way.</p>\n\n<p>We know that WinPcap is able to send packets to the network (so this is the <code>Tx</code> way). I want to know if it's possible to send packets to <code>Rx</code>, so this means <strong>injecting a packet to an adapter and pretending this packet is an arrival packet from network</strong>.</p>\n\n<p>First I don't know if this is viable? If yes, then continue to read:</p>\n\n<p>I have written the code, using <code>NdisFIndicateReceiveNetBufferLists</code> call to indicate my crafted packet to the upper layer, then free the packet in <code>FilterReturnNetBufferLists</code> handler. So the upper layer modules including Windows OS will know that there's a new packet coming from the network (actually not the truth).</p>\n\n<p>However, my approach doesn't work. I used <code>Nping</code> (from Nmap) to ping my gateway, and the nping window freezes, it can't be terminated by even Task Manager. So It must be a driver halt.</p>\n\n<p>I noticed that this way <strong>should be possible</strong> based on:</p>\n\n<ol>\n<li><p>Jeffery's answer to a post: <a href=\"https://stackoverflow.com/questions/18180150/is-filtersendnetbufferlists-handler-a-must-for-an-ndis-filter-to-use-ndisfsendne\">Is FilterSendNetBufferLists handler a must for an NDIS filter to use NdisFSendNetBufferLists?</a></p></li>\n<li><p>An exaplanation from Microsoft: <a href=\"https://msdn.microsoft.com/en-us/library/windows/hardware/ff570452(v=vs.85).aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/windows/hardware/ff570452(v=vs.85).aspx</a></p></li>\n<li><p>An example provided by OSR: <a href=\"https://www.osronline.com/showthread.cfm?link=242847\" rel=\"nofollow noreferrer\">https://www.osronline.com/showthread.cfm?link=242847</a></p></li>\n</ol>\n\n<p>Then I analyzed the log printed by the driver. It seems that my <code>NdisFIndicateReceiveNetBufferLists</code> call (used for sending to <code>Rx</code>) was only called once, then the driver works on other jobs, while the ring 3 <code>nping</code> is died. I reused much of the code from the existing well-running code from <code>NPF_SendCompleteEx</code> (this is the handler of Send complete to normal <code>Tx</code>). So I don't think this part will have bugs?</p>\n\n<p>The whole code base is hosted on GitHub: <a href=\"https://github.com/nmap/npcap\" rel=\"nofollow noreferrer\">https://github.com/nmap/npcap</a></p>\n\n<p>it doesn't contain the faulty code in this post, as I haven't submit it, but it will provide some backgrounds if you need:)</p>\n\n<p>My injecting code:</p>\n\n<pre><code>NTSTATUS\nNPF_Write(\n    IN PDEVICE_OBJECT DeviceObject,\n    IN PIRP Irp\n    )\n{\n    POPEN_INSTANCE      Open;\n    POPEN_INSTANCE      GroupOpen;\n    POPEN_INSTANCE      TempOpen;\n    PIO_STACK_LOCATION  IrpSp;\n    ULONG               SendFlags = 0;\n    PNET_BUFFER_LIST    pNetBufferList;\n    NDIS_STATUS         Status;\n    ULONG               NumSends;\n    ULONG               numSentPackets;\n\n    TRACE_ENTER();\n\n    IrpSp = IoGetCurrentIrpStackLocation(Irp);\n\n    Open = IrpSp-&gt;FileObject-&gt;FsContext;\n\n    if (NPF_StartUsingOpenInstance(Open) == FALSE)\n    {\n        // \n        // an IRP_MJ_CLEANUP was received, just fail the request\n        //\n        Irp-&gt;IoStatus.Information = 0;\n        Irp-&gt;IoStatus.Status = STATUS_CANCELLED;\n        IoCompleteRequest(Irp, IO_NO_INCREMENT);\n        TRACE_EXIT();\n        return STATUS_CANCELLED;\n    }\n\n    NumSends = Open-&gt;Nwrites;\n\n    //\n    // validate the send parameters set by the IOCTL\n    //\n    if (NumSends == 0)\n    {\n        NPF_StopUsingOpenInstance(Open);\n        Irp-&gt;IoStatus.Information = 0;\n        Irp-&gt;IoStatus.Status = STATUS_SUCCESS;\n        IoCompleteRequest(Irp, IO_NO_INCREMENT);\n\n        TRACE_EXIT();\n        return STATUS_SUCCESS;\n    }\n\n    //\n    // Validate input parameters: \n    // 1. The packet size should be greater than 0,\n    // 2. less-equal than max frame size for the link layer and\n    // 3. the maximum frame size of the link layer should not be zero.\n    //\n    if (IrpSp-&gt;Parameters.Write.Length == 0 ||  // Check that the buffer provided by the user is not empty\n        Open-&gt;MaxFrameSize == 0 ||  // Check that the MaxFrameSize is correctly initialized\n        Irp-&gt;MdlAddress == NULL ||\n        IrpSp-&gt;Parameters.Write.Length &gt; Open-&gt;MaxFrameSize) // Check that the fame size is smaller that the MTU\n    {\n        TRACE_MESSAGE(PACKET_DEBUG_LOUD, \"Frame size out of range, or maxFrameSize = 0. Send aborted\");\n\n        NPF_StopUsingOpenInstance(Open);\n\n        Irp-&gt;IoStatus.Information = 0;\n        Irp-&gt;IoStatus.Status = STATUS_UNSUCCESSFUL;\n        IoCompleteRequest(Irp, IO_NO_INCREMENT);\n\n        TRACE_EXIT();\n        return STATUS_UNSUCCESSFUL;\n    }\n\n    // \n    // Increment the ref counter of the binding handle, if possible\n    //\n    if (NPF_StartUsingBinding(Open) == FALSE)\n    {\n        TRACE_MESSAGE(PACKET_DEBUG_LOUD, \"Adapter is probably unbinding, cannot send packets\");\n\n        NPF_StopUsingOpenInstance(Open);\n\n        Irp-&gt;IoStatus.Information = 0;\n        Irp-&gt;IoStatus.Status = STATUS_INVALID_DEVICE_REQUEST;\n        IoCompleteRequest(Irp, IO_NO_INCREMENT);\n\n        TRACE_EXIT();\n        return STATUS_INVALID_DEVICE_REQUEST;\n    } \n\n    NdisAcquireSpinLock(&amp;Open-&gt;WriteLock);\n    if (Open-&gt;WriteInProgress)\n    {\n        // Another write operation is currently in progress\n        NdisReleaseSpinLock(&amp;Open-&gt;WriteLock);\n\n        NPF_StopUsingBinding(Open);\n\n        TRACE_MESSAGE(PACKET_DEBUG_LOUD, \"Another Send operation is in progress, aborting.\");\n\n        NPF_StopUsingOpenInstance(Open);\n\n        Irp-&gt;IoStatus.Information = 0;\n        Irp-&gt;IoStatus.Status = STATUS_UNSUCCESSFUL;\n        IoCompleteRequest(Irp, IO_NO_INCREMENT);\n\n        TRACE_EXIT();\n\n        return STATUS_UNSUCCESSFUL;\n    }\n    else\n    {\n        Open-&gt;WriteInProgress = TRUE;\n        NdisResetEvent(&amp;Open-&gt;NdisWriteCompleteEvent);\n    }\n\n    NdisReleaseSpinLock(&amp;Open-&gt;WriteLock);\n\n    TRACE_MESSAGE2(PACKET_DEBUG_LOUD,\n        \"Max frame size = %u, packet size = %u\",\n        Open-&gt;MaxFrameSize,\n        IrpSp-&gt;Parameters.Write.Length);\n\n    //\n    // reset the number of packets pending the SendComplete\n    //\n    Open-&gt;TransmitPendingPackets = 0;\n\n    NdisResetEvent(&amp;Open-&gt;WriteEvent);\n\n    numSentPackets = 0;\n\n    while (numSentPackets &lt; NumSends)\n    {\n        pNetBufferList = NdisAllocateNetBufferAndNetBufferList(Open-&gt;PacketPool,\n            0,\n            0,\n            Irp-&gt;MdlAddress,\n            0,\n            Irp-&gt;MdlAddress-&gt;ByteCount);\n\n        if (pNetBufferList != NULL)\n        {\n            //\n            // packet is available, prepare it and send it with NdisSend.\n            //\n\n            //\n            // If asked, set the flags for this packet.\n            // Currently, the only situation in which we set the flags is to disable the reception of loopback\n            // packets, i.e. of the packets sent by us.\n            //\n            //if (Open-&gt;SkipSentPackets)\n            //{\n            //  NPFSetNBLFlags(pNetBufferList, g_SendPacketFlags);\n            //}\n\n\n            // The packet hasn't a buffer that needs not to be freed after every single write\n            RESERVED(pNetBufferList)-&gt;FreeBufAfterWrite = FALSE;\n\n            // Save the IRP associated with the packet\n            // RESERVED(pPacket)-&gt;Irp=Irp;\n\n            // Attach the writes buffer to the packet\n\n            InterlockedIncrement(&amp;Open-&gt;TransmitPendingPackets);\n\n            NdisResetEvent(&amp;Open-&gt;NdisWriteCompleteEvent);\n\n            //receive the packets before sending them\n            ASSERT(Open-&gt;GroupHead != NULL);\n            if (Open-&gt;GroupHead != NULL)\n            {\n                GroupOpen = Open-&gt;GroupHead-&gt;GroupNext;\n            }\n            else\n            {\n                //this is impossible\n                GroupOpen = Open-&gt;GroupNext;\n            }\n\n#ifdef HAVE_WFP_LOOPBACK_SUPPORT\n            // Do not capture the send traffic we send, if this is our loopback adapter.\n            if (Open-&gt;Loopback == FALSE)\n            {\n#endif\n                while (GroupOpen != NULL)\n                {\n                    TempOpen = GroupOpen;\n                    if (TempOpen-&gt;AdapterBindingStatus == ADAPTER_BOUND &amp;&amp; TempOpen-&gt;SkipSentPackets == FALSE)\n                    {\n                        NPF_TapExForEachOpen(TempOpen, pNetBufferList);\n                    }\n\n                    GroupOpen = TempOpen-&gt;GroupNext;\n                }\n#ifdef HAVE_WFP_LOOPBACK_SUPPORT\n            }\n#endif\n\n            pNetBufferList-&gt;SourceHandle = Open-&gt;AdapterHandle;\n            NPFSetNBLChildOpen(pNetBufferList, Open); //save the child open object in the packets\n            //SendFlags |= NDIS_SEND_FLAGS_CHECK_FOR_LOOPBACK;\n\n            // Recognize IEEE802.1Q tagged packet, as no many adapters support VLAN tag packet sending, no much use for end users,\n            // and this code examines the data which lacks efficiency, so I left it commented, the sending part is also unfinished.\n            // This code refers to Win10Pcap at https://github.com/SoftEtherVPN/Win10Pcap.\n//          if (Open-&gt;Loopback == FALSE)\n//          {\n//              PUCHAR pHeaderBuffer;\n//              UINT iFres;\n//\n//              BOOLEAN withVlanTag = FALSE;\n//              UINT VlanID = 0;\n//              UINT VlanUserPriority = 0;\n//              UINT VlanCanFormatID = 0;\n//\n//              NdisQueryMdl(\n//                  Irp-&gt;MdlAddress,\n//                  &amp;pHeaderBuffer,\n//                  &amp;iFres,\n//                  NormalPagePriority);\n//\n//              // Determine if the packet is IEEE802.1Q tagged packet.\n//              if (iFres &gt;= 18)\n//              {\n//                  if (pHeaderBuffer[12] == 0x81 &amp;&amp; pHeaderBuffer[13] == 0x00)\n//                  {\n//                      USHORT pTmpVlanTag = 0;\n//\n//                      ((UCHAR *)(&amp;pTmpVlanTag))[0] = pHeaderBuffer[15];\n//                      ((UCHAR *)(&amp;pTmpVlanTag))[1] = pHeaderBuffer[14];\n//\n//                      VlanID = pTmpVlanTag &amp; 0x0FFF;\n//                      VlanUserPriority = (pTmpVlanTag &gt;&gt; 13) &amp; 0x07;\n//                      VlanCanFormatID = (pTmpVlanTag &gt;&gt; 12) &amp; 0x01;\n//\n//                      if (VlanID != 0)\n//                      {\n//                          withVlanTag = TRUE;\n//                      }\n//                  }\n//              }\n//          }\n\n            //\n            //  Call the MAC\n            //\n#ifdef HAVE_WFP_LOOPBACK_SUPPORT\n            if (Open-&gt;Loopback == TRUE)\n            {\n                NPF_LoopbackSendNetBufferLists(Open-&gt;GroupHead,\n                    pNetBufferList);\n            }\n            else\n#endif\n#ifdef HAVE_SEND_TO_RECEIVE_PATH_SUPPORT\n                if (Open-&gt;SendToRxPath == TRUE)\n                {\n                    IF_LOUD(DbgPrint(\"hahahahahahahahahahahaha:: SendToRxPath, Open-&gt;AdapterHandle=%p, pNetBufferList=%u\\n\", Open-&gt;AdapterHandle, pNetBufferList);)\n                    // pretend to receive these packets from network and indicate them to upper layers\n                    NdisFIndicateReceiveNetBufferLists(\n                        Open-&gt;AdapterHandle,\n                        pNetBufferList,\n                        NDIS_DEFAULT_PORT_NUMBER,\n                        1,\n                        0);\n                }\n                else\n#endif\n                {\n                    NdisFSendNetBufferLists(Open-&gt;AdapterHandle,\n                        pNetBufferList,\n                        NDIS_DEFAULT_PORT_NUMBER,\n                        SendFlags);\n                }\n\n            numSentPackets ++;\n        }\n        else\n        {\n            //\n            // no packets are available in the Transmit pool, wait some time. The \n            // event gets signalled when at least half of the TX packet pool packets\n            // are available\n            //\n            NdisWaitEvent(&amp;Open-&gt;WriteEvent, 1);\n        }\n    }\n\n    //\n    // when we reach this point, all the packets have been enqueued to NdisSend,\n    // we just need to wait for all the packets to be completed by the SendComplete\n    // (if any of the NdisSend requests returned STATUS_PENDING)\n    //\n    NdisWaitEvent(&amp;Open-&gt;NdisWriteCompleteEvent, 0);\n\n    //\n    // all the packets have been transmitted, release the use of the adapter binding\n    //\n    NPF_StopUsingBinding(Open);\n\n    //\n    // no more writes are in progress\n    //\n    NdisAcquireSpinLock(&amp;Open-&gt;WriteLock);\n    Open-&gt;WriteInProgress = FALSE;\n    NdisReleaseSpinLock(&amp;Open-&gt;WriteLock);\n\n    NPF_StopUsingOpenInstance(Open);\n\n    //\n    // Complete the Irp and return success\n    //\n    Irp-&gt;IoStatus.Status = STATUS_SUCCESS;\n    Irp-&gt;IoStatus.Information = IrpSp-&gt;Parameters.Write.Length;\n    IoCompleteRequest(Irp, IO_NO_INCREMENT);\n\n    TRACE_EXIT();\n\n    return STATUS_SUCCESS;\n}\n</code></pre>\n\n<p>My FilterReturnNetBufferLists handler:</p>\n\n<pre><code>_Use_decl_annotations_\nVOID\nNPF_ReturnEx(\n    NDIS_HANDLE         FilterModuleContext,\n    PNET_BUFFER_LIST    NetBufferLists,\n    ULONG               ReturnFlags\n    )\n/*++\n\nRoutine Description:\n\n    FilterReturnNetBufferLists handler.\n    FilterReturnNetBufferLists is an optional function. If provided, NDIS calls\n    FilterReturnNetBufferLists to return the ownership of one or more NetBufferLists\n    and their embedded NetBuffers to the filter driver. If this handler is NULL, NDIS\n    will skip calling this filter when returning NetBufferLists to the underlying\n    miniport and will call the next lower driver in the stack. A filter that doesn't\n    provide a FilterReturnNetBufferLists handler cannot originate a receive indication\n    on its own.\n\nArguments:\n\n    FilterInstanceContext       - our filter context area\n    NetBufferLists              - a linked list of NetBufferLists that this \n                                  filter driver indicated in a previous call to \n                                  NdisFIndicateReceiveNetBufferLists\n    ReturnFlags                 - flags specifying if the caller is at DISPATCH_LEVEL\n\n--*/\n{\n    POPEN_INSTANCE      ChildOpen;\n    POPEN_INSTANCE      GroupOpen;\n    POPEN_INSTANCE      TempOpen;\n    BOOLEAN             FreeBufAfterWrite;\n    PNET_BUFFER_LIST    pNetBufList;\n    PNET_BUFFER_LIST    pNextNetBufList;\n    PNET_BUFFER         Currbuff;\n    PMDL                pMdl;\n    POPEN_INSTANCE      Open = (POPEN_INSTANCE) FilterModuleContext;\n\n    TRACE_ENTER();\n\n#ifdef HAVE_SEND_TO_RECEIVE_PATH_SUPPORT\n    pNetBufList = NetBufferLists;\n\n    while (pNetBufList != NULL)\n    {\n        pNextNetBufList = NET_BUFFER_LIST_NEXT_NBL(pNetBufList);\n        NET_BUFFER_LIST_NEXT_NBL(pNetBufList) = NULL;\n\n        if (pNetBufList-&gt;SourceHandle == Open-&gt;AdapterHandle) //this is our self-sent packets\n        {\n            TRACE_MESSAGE(PACKET_DEBUG_LOUD, \"hahahaha This is my own send to Rx packets\");\n            ChildOpen = NPFGetNBLChildOpen(pNetBufList); //get the child open object that sends these packets\n            FreeBufAfterWrite = RESERVED(pNetBufList)-&gt;FreeBufAfterWrite;\n\n            if (FreeBufAfterWrite)\n            {\n                //\n                // Packet sent by NPF_BufferedWrite()\n                //\n\n                //Free the NBL allocate by myself\n                Currbuff = NET_BUFFER_LIST_FIRST_NB(pNetBufList);\n                while (Currbuff)\n                {\n                    pMdl = NET_BUFFER_FIRST_MDL(Currbuff);\n                    NdisFreeMdl(pMdl); //Free MDL\n                    Currbuff = NET_BUFFER_NEXT_NB(Currbuff);\n                }\n                NdisFreeNetBufferList(pNetBufList); //Free NBL\n            }\n            else\n            {\n                //\n                // Packet sent by NPF_Write()\n                //\n\n                //Free the NBL allocate by myself\n                NdisFreeNetBufferList(pNetBufList); //Free NBL\n            }\n\n            // this if should always be false, as Open is always the GroupHead itself, only GroupHead is known by NDIS and get invoked in NPF_SendCompleteEx() function.\n            if (Open-&gt;GroupHead != NULL)\n            {\n                GroupOpen = Open-&gt;GroupHead-&gt;GroupNext;\n            }\n            else\n            {\n                GroupOpen = Open-&gt;GroupNext;\n            }\n\n            //GroupOpen = Open-&gt;GroupNext;\n\n            while (GroupOpen != NULL)\n            {\n                TempOpen = GroupOpen;\n                if (ChildOpen == TempOpen) //only indicate the specific child open object\n                {\n                    NPF_SendCompleteExForEachOpen(TempOpen, FreeBufAfterWrite);\n                    break;\n                }\n\n                GroupOpen = TempOpen-&gt;GroupNext;\n            }\n        }\n        else\n        {\n            TRACE_MESSAGE(PACKET_DEBUG_LOUD, \"hahahaha This is NOT my own send to Rx packets\");\n            // Return the received NBLs.  If you removed any NBLs from the chain, make\n            // sure the chain isn't empty (i.e., NetBufferLists!=NULL).\n            NdisFReturnNetBufferLists(Open-&gt;AdapterHandle, pNetBufList, ReturnFlags);\n        }\n\n        pNetBufList = pNextNetBufList;\n    }\n#else\n    // Return the received NBLs.  If you removed any NBLs from the chain, make\n    // sure the chain isn't empty (i.e., NetBufferLists!=NULL).\n    NdisFReturnNetBufferLists(Open-&gt;AdapterHandle, NetBufferLists, ReturnFlags);\n#endif\n\n    TRACE_EXIT();\n}\n</code></pre>\n\n<p>My log:</p>\n\n<pre><code>00010269    58.36443710 MDL 42  \n00010270    58.36444092 hahahahahahahahahahahaha:: SendToRxPath, Open-&gt;AdapterHandle=FFFFFA8003C24010, pNetBufferList=68928096  \n00010271    58.36450577 --&gt; NPF_ReturnEx    \n00010272    58.36450577     NPF_ReturnEx: hahahaha This is my own send to Rx packets    \n00010273    58.36451340 &lt;-- NPF_ReturnEx    \n00010274    59.04499054 --&gt; NPF_NetworkClassify \n00010275    59.04499817 --&gt; NPF_IsPacketSelfSent    \n00010276    59.04499817 &lt;-- NPF_IsPacketSelfSent    \n00010277    59.04499817     NPF_NetworkClassify: NPF_NetworkClassify: NPF_IsPacketSelfSent() [bSelfSent: 0] \n00010278    59.04500961 &lt;-- NPF_NetworkClassify \n00010279    59.04502869 --&gt; NPF_SendEx  \n00010280    59.04503632 --&gt; NPF_SendCompleteEx  \n00010281    59.04504395 &lt;-- NPF_SendCompleteEx  \n00010282    59.04504395 &lt;-- NPF_SendEx  \n00010283    59.04520798 --&gt; NPF_NetworkClassify \n00010284    59.04520798 --&gt; NPF_IsPacketSelfSent    \n00010285    59.04521561 &lt;-- NPF_IsPacketSelfSent    \n00010286    59.04521561     NPF_NetworkClassify: NPF_NetworkClassify: NPF_IsPacketSelfSent() [bSelfSent: 0] \n00010287    59.04522324 &lt;-- NPF_NetworkClassify \n00010288    59.04529953 --&gt; NPF_SendEx  \n00010289    59.04529953 --&gt; NPF_SendCompleteEx  \n00010290    59.04530716 &lt;-- NPF_SendCompleteEx  \n00010291    59.04530716 &lt;-- NPF_SendEx  \n00010292    59.04531097 --&gt; NPF_NetworkClassify \n00010293    59.04531097 --&gt; NPF_IsPacketSelfSent    \n00010294    59.04531097 &lt;-- NPF_IsPacketSelfSent    \n00010295    59.04531860     NPF_NetworkClassify: NPF_NetworkClassify: NPF_IsPacketSelfSent() [bSelfSent: 0] \n00010296    59.04531860 &lt;-- NPF_NetworkClassify \n00010297    59.04541397 --&gt; NPF_NetworkClassify \n00010298    59.04541397 --&gt; NPF_IsPacketSelfSent    \n00010299    59.04541397 &lt;-- NPF_IsPacketSelfSent    \n00010300    59.04542160     NPF_NetworkClassify: NPF_NetworkClassify: NPF_IsPacketSelfSent() [bSelfSent: 0] \n00010301    59.04542160 &lt;-- NPF_NetworkClassify \n00010302    59.04543304 --&gt; NPF_SendEx  \n00010303    59.04543304 Received on CPU 0  3    \n00010304    59.04544067 Received on CPU 0  2    \n00010305    59.04544067 MDL 62  \n00010306    59.04544067 next MDL 24 and added   \n00010307    59.04544830 --&gt; NPF_SendCompleteEx  \n00010308    59.04547882 &lt;-- NPF_SendCompleteEx  \n00010309    59.04548645 &lt;-- NPF_SendEx  \n00010310    59.04558563 --&gt; NPF_NetworkClassify \n00010311    59.04558563 --&gt; NPF_IsPacketSelfSent    \n00010312    59.04558563 &lt;-- NPF_IsPacketSelfSent    \n00010313    59.04559326     NPF_NetworkClassify: NPF_NetworkClassify: NPF_IsPacketSelfSent() [bSelfSent: 0] \n00010314    59.04560089 &lt;-- NPF_NetworkClassify \n00010315    59.04560471 --&gt; NPF_SendEx  \n00010316    59.04561234 Received on CPU 0  4    \n00010317    59.04561234 Received on CPU 0  3    \n00010318    59.04561234 MDL 42  \n00010319    59.04561996 next MDL 24 and added   \n00010320    59.04561996 --&gt; NPF_SendCompleteEx  \n00010321    59.04562378 &lt;-- NPF_SendCompleteEx  \n00010322    59.04562378 &lt;-- NPF_SendEx  \n00010323    59.15098953 --&gt; NPF_NetworkClassify \n00010324    59.15098953 --&gt; NPF_IsPacketSelfSent    \n00010325    59.15099335 &lt;-- NPF_IsPacketSelfSent    \n00010326    59.15099335     NPF_NetworkClassify: NPF_NetworkClassify: NPF_IsPacketSelfSent() [bSelfSent: 0] \n00010327    59.15103912 &lt;-- NPF_NetworkClassify \n00010328    59.15105820 --&gt; NPF_SendEx  \n00010329    59.15106583 --&gt; NPF_SendCompleteEx  \n00010330    59.15106583 &lt;-- NPF_SendCompleteEx  \n00010331    59.15106583 &lt;-- NPF_SendEx  \n00010332    59.15113449 --&gt; NPF_NetworkClassify \n00010333    59.15113449 --&gt; NPF_IsPacketSelfSent    \n00010334    59.15114212 &lt;-- NPF_IsPacketSelfSent    \n00010335    59.15114212     NPF_NetworkClassify: NPF_NetworkClassify: NPF_IsPacketSelfSent() [bSelfSent: 0] \n00010336    59.15114975 &lt;-- NPF_NetworkClassify \n00010337    59.15118027 --&gt; NPF_SendEx  \n00010338    59.15118027 --&gt; NPF_SendCompleteEx  \n00010339    59.15118790 &lt;-- NPF_SendCompleteEx  \n00010340    59.15118790 &lt;-- NPF_SendEx  \n00010341    59.15118790 --&gt; NPF_NetworkClassify \n00010342    59.15119171 --&gt; NPF_IsPacketSelfSent    \n00010343    59.15119171 &lt;-- NPF_IsPacketSelfSent    \n00010344    59.15119171     NPF_NetworkClassify: NPF_NetworkClassify: NPF_IsPacketSelfSent() [bSelfSent: 0] \n00010345    59.15119934 &lt;-- NPF_NetworkClassify \n00010346    59.15123367 --&gt; NPF_NetworkClassify \n00010347    59.15123749 --&gt; NPF_IsPacketSelfSent    \n00010348    59.15123749 &lt;-- NPF_IsPacketSelfSent    \n00010349    59.15123749     NPF_NetworkClassify: NPF_NetworkClassify: NPF_IsPacketSelfSent() [bSelfSent: 0] \n00010350    59.15124512 &lt;-- NPF_NetworkClassify \n00010351    59.15125275 --&gt; NPF_SendEx  \n00010352    59.15125275 Received on CPU 1  1    \n00010353    59.15125656 Received on CPU 1  1    \n00010354    59.15132904 MDL 62  \n00010355    59.15133286 next MDL 24 and added   \n00010356    59.15134048 --&gt; NPF_SendCompleteEx  \n00010357    59.15134811 &lt;-- NPF_SendCompleteEx  \n00010358    59.15134811 &lt;-- NPF_SendEx  \n00010359    59.15138626 --&gt; NPF_NetworkClassify \n00010360    59.15138626 --&gt; NPF_IsPacketSelfSent    \n00010361    59.15138626 &lt;-- NPF_IsPacketSelfSent    \n00010362    59.15139389     NPF_NetworkClassify: NPF_NetworkClassify: NPF_IsPacketSelfSent() [bSelfSent: 0] \n00010363    59.15139771 &lt;-- NPF_NetworkClassify \n00010364    59.15140533 --&gt; NPF_SendEx  \n00010365    59.15140533 Received on CPU 1  2    \n00010366    59.15140533 Received on CPU 1  2    \n00010367    59.15141296 MDL 42  \n00010368    59.15141296 next MDL 24 and added   \n00010369    59.15141296 --&gt; NPF_SendCompleteEx  \n00010370    59.15141678 &lt;-- NPF_SendCompleteEx  \n00010371    59.15141678 &lt;-- NPF_SendEx  \n00010372    59.19804001 --&gt; NPF_SendEx  \n00010373    59.19805527 --&gt; NPF_SendCompleteEx  \n00010374    59.19805527 &lt;-- NPF_SendCompleteEx  \n00010375    59.19805527 &lt;-- NPF_SendEx  \n00010376    59.35518646 --&gt; NPF_NetworkClassify \n00010377    59.35519409 --&gt; NPF_IsPacketSelfSent    \n00010378    59.35519409 &lt;-- NPF_IsPacketSelfSent    \n00010379    59.35519409     NPF_NetworkClassify: NPF_NetworkClassify: NPF_IsPacketSelfSent() [bSelfSent: 0] \n00010380    59.35520554 &lt;-- NPF_NetworkClassify \n00010381    59.35526276 --&gt; NPF_SendEx  \n00010382    59.35527039 --&gt; NPF_SendCompleteEx  \n00010383    59.35527802 &lt;-- NPF_SendCompleteEx  \n00010384    59.35527802 &lt;-- NPF_SendEx  \n00010385    59.35528183 --&gt; NPF_NetworkClassify \n00010386    59.35528183 --&gt; NPF_IsPacketSelfSent    \n00010387    59.35528183 &lt;-- NPF_IsPacketSelfSent    \n00010388    59.35528946     NPF_NetworkClassify: NPF_NetworkClassify: NPF_IsPacketSelfSent() [bSelfSent: 0] \n00010389    59.35528946 &lt;-- NPF_NetworkClassify \n00010390    59.35543823 --&gt; NPF_NetworkClassify \n00010391    59.35543823 --&gt; NPF_IsPacketSelfSent    \n00010392    59.35543823 &lt;-- NPF_IsPacketSelfSent    \n00010393    59.35544205     NPF_NetworkClassify: NPF_NetworkClassify: NPF_IsPacketSelfSent() [bSelfSent: 0] \n00010394    59.35544968 &lt;-- NPF_NetworkClassify \n00010395    59.35546112 --&gt; NPF_SendEx  \n00010396    59.35546875 Received on CPU 0  5    \n00010397    59.35546875 Received on CPU 0  4    \n00010398    59.35547638 MDL 42  \n00010399    59.35547638 next MDL 50 and added   \n00010400    59.35548019 --&gt; NPF_SendCompleteEx  \n00010401    59.35548019 &lt;-- NPF_SendCompleteEx  \n00010402    59.35548782 &lt;-- NPF_SendEx  \n00010403    59.47556305 --&gt; NPF_TapEx   \n00010404    59.47557068 --&gt; NPF_ReturnEx    \n00010405    59.47557068     NPF_ReturnEx: hahahaha This is NOT my own send to Rx packets    \n00010406    59.47557068 &lt;-- NPF_ReturnEx    \n00010407    59.47557831 &lt;-- NPF_TapEx   \n00010408    59.58328247 --&gt; NPF_TapEx   \n00010409    59.58329773 --&gt; NPF_ReturnEx    \n00010410    59.58329773     NPF_ReturnEx: hahahaha This is NOT my own send to Rx packets    \n00010411    59.58329773 &lt;-- NPF_ReturnEx    \n00010412    59.58329773 &lt;-- NPF_TapEx   \n00010413    59.58549881 --&gt; NPF_TapEx   \n00010414    59.58550262 --&gt; NPF_ReturnEx    \n00010415    59.58551025     NPF_ReturnEx: hahahaha This is NOT my own send to Rx packets    \n00010416    59.58551025 &lt;-- NPF_ReturnEx    \n00010417    59.58551025 &lt;-- NPF_TapEx   \n00010418    60.11791992 --&gt; NPF_NetworkClassify \n00010419    60.11791992 --&gt; NPF_IsPacketSelfSent    \n00010420    60.11792755 &lt;-- NPF_IsPacketSelfSent    \n00010421    60.11792755     NPF_NetworkClassify: NPF_NetworkClassify: NPF_IsPacketSelfSent() [bSelfSent: 0] \n00010422    60.11793900 &lt;-- NPF_NetworkClassify \n00010423    60.11795807 --&gt; NPF_SendEx  \n00010424    60.11796570 Received on CPU 0  6    \n00010425    60.11796570 Received on CPU 0  5    \n00010426    60.11796951 MDL 42  \n00010427    60.11796951 next MDL 50 and added   \n</code></pre>\n"}, {"tags": ["c", "pointers", "time", "free"], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 10, "last_activity_date": 1453881668, "last_edit_date": 1453881668, "creation_date": 1453881651, "answer_id": 35031704, "question_id": 35031647, "link": "https://stackoverflow.com/questions/35031647/do-i-need-to-free-the-returned-pointer-from-localtime-function/35031704#35031704", "title": "Do I need to free the returned pointer from localtime() function?", "body": "<p>Quoting the <a href=\"http://linux.die.net/man/3/localtime\">man page</a></p>\n\n<blockquote>\n  <p>The four functions <code>asctime()</code>, <code>ctime()</code>, <code>gmtime()</code> <strong>and <code>localtime()</code> return a pointer to static data</strong> and hence are not thread-safe. [...]</p>\n</blockquote>\n\n<p>So, you need not <code>free()</code> the returned pointer.</p>\n"}, {"tags": [], "owner": {"reputation": 23469, "user_id": 775964, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/glHLl.jpg?s=128&g=1", "display_name": "Jeegar Patel", "link": "https://stackoverflow.com/users/775964/jeegar-patel"}, "is_accepted": false, "score": 1, "last_activity_date": 1453883381, "creation_date": 1453883381, "answer_id": 35032169, "question_id": 35031647, "link": "https://stackoverflow.com/questions/35031647/do-i-need-to-free-the-returned-pointer-from-localtime-function/35032169#35032169", "title": "Do I need to free the returned pointer from localtime() function?", "body": "<p>Looked in implementation of localtime() in bionic lib c code\nSome code from it. <a href=\"https://android.googlesource.com/platform/bionic/+/master/libc/tzcode/localtime.c\" rel=\"nofollow\">https://android.googlesource.com/platform/bionic/+/master/libc/tzcode/localtime.c</a></p>\n\n<pre><code>static struct tm    tm;\n\nstatic struct tm *\nlocaltime_tzset(time_t const *timep, struct tm *tmp, bool setname)\n{\n  int err = lock();\n  if (err) {\n    errno = err;\n    return NULL;\n  }\n  if (setname || !lcl_is_set)\n    tzset_unlocked();\n  tmp = localsub(lclptr, timep, setname, tmp);\n  unlock();\n  return tmp;\n}\nstruct tm *\nlocaltime(const time_t *timep)\n{\n  return localtime_tzset(timep, &amp;tm, true);\n}\n</code></pre>\n\n<p>SO here it return address of static structure tm.</p>\n\n<p><strong>So we do not need to free it.</strong> And other function of that family also access that global static structure so its not thread safe.</p>\n"}], "owner": {"reputation": 3975, "user_id": 3560981, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/8fa10e8d564dd93ece697b0aebe689dd?s=128&d=identicon&r=PG&f=1", "display_name": "Nidhoegger", "link": "https://stackoverflow.com/users/3560981/nidhoegger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 800, "favorite_count": 1, "accepted_answer_id": 35031704, "answer_count": 2, "score": 3, "last_activity_date": 1453883381, "creation_date": 1453881450, "last_edit_date": 1453882452, "question_id": 35031647, "link": "https://stackoverflow.com/questions/35031647/do-i-need-to-free-the-returned-pointer-from-localtime-function", "title": "Do I need to free the returned pointer from localtime() function?", "body": "<p>I am currently reading the manpages about <code>time.h</code>. I got this far:</p>\n\n<pre><code>time_t now = time(0);\nstruct tm * local = localtime(&amp;now);\n</code></pre>\n\n<p>Now I can work with the time, as far as good, but I do not find the information if its my duty to <code>free()</code> the variable <code>local</code> or not.</p>\n"}, {"tags": ["c", "pointers", "memory-management"], "comments": [{"owner": {"reputation": 84959, "user_id": 390913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/87a2a7e9ea54bcd1a6c8f09f8c2e8f3b?s=128&d=identicon&r=PG", "display_name": "perreal", "link": "https://stackoverflow.com/users/390913/perreal"}, "edited": false, "score": 0, "creation_date": 1453881722, "post_id": 35031632, "comment_id": 57788905, "body": "what is the type of <code>rnew</code>?"}, {"owner": {"reputation": 813, "user_id": 3543200, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0e080d0d27c61c16444b17d0aae7b3c8?s=128&d=identicon&r=PG", "display_name": "gmoss", "link": "https://stackoverflow.com/users/3543200/gmoss"}, "reply_to_user": {"reputation": 84959, "user_id": 390913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/87a2a7e9ea54bcd1a6c8f09f8c2e8f3b?s=128&d=identicon&r=PG", "display_name": "perreal", "link": "https://stackoverflow.com/users/390913/perreal"}, "edited": false, "score": 0, "creation_date": 1453881899, "post_id": 35031632, "comment_id": 57788978, "body": "<code>bigint</code>. Editing to make it clear."}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 2, "creation_date": 1453881940, "post_id": 35031632, "comment_id": 57789004, "body": "So you&#39;re saying that when you have these statements: <code>printf(&quot;%s - %s = (%p) &quot;, bigint_tohex(rold), bigint_tohex(tmp2), &amp;rnew);fflush(stdout); bigint_subtract(rold,tmp2,&amp;rnew);</code> the pointer displayed for <code>&amp;rnew</code> is not the same as when <code>diff</code> is printed in the <code>bigint_subtract()</code> call?  You should post a <i>small</i>, compilable example that shows the problem."}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1453881999, "post_id": 35031632, "comment_id": 57789048, "body": "I also wonder about what is being returned from <code>bigint_tohex()</code>? You likely either have a memory leak, undefined behavior, or you&#39;re returning the address of a static buffer - which won&#39;t work well when used more than once in a single <code>printf()</code> call (or you&#39;re really using C++, not C).  In an case, you almost certainly have a bug there."}, {"owner": {"reputation": 813, "user_id": 3543200, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0e080d0d27c61c16444b17d0aae7b3c8?s=128&d=identicon&r=PG", "display_name": "gmoss", "link": "https://stackoverflow.com/users/3543200/gmoss"}, "reply_to_user": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1453882054, "post_id": 35031632, "comment_id": 57789080, "body": "@MichaelBurr OK, I will work on a minimal example in the morning (midnight here)."}, {"owner": {"reputation": 2505, "user_id": 3118401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c066b73af214d8e7cf6b52f6ef75314a?s=128&d=identicon&r=PG", "display_name": "marcolz", "link": "https://stackoverflow.com/users/3118401/marcolz"}, "edited": false, "score": 0, "creation_date": 1453882489, "post_id": 35031632, "comment_id": 57789298, "body": "It looks like you would need to be getting several warnings during compilation.. Right ?"}, {"owner": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "edited": false, "score": 0, "creation_date": 1453882872, "post_id": 35031632, "comment_id": 57789504, "body": "It seems a compiler optimization bug. Which compiler are you using? Try first of all to compile with no optimization, then as workaround try declaring <code>volatile</code> the affected variable: <code>volatile bigint rnew;</code> and check again if it works with optimizations on this time. If it works post a bug report on compiler forum."}, {"owner": {"reputation": 813, "user_id": 3543200, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0e080d0d27c61c16444b17d0aae7b3c8?s=128&d=identicon&r=PG", "display_name": "gmoss", "link": "https://stackoverflow.com/users/3543200/gmoss"}, "reply_to_user": {"reputation": 2505, "user_id": 3118401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c066b73af214d8e7cf6b52f6ef75314a?s=128&d=identicon&r=PG", "display_name": "marcolz", "link": "https://stackoverflow.com/users/3118401/marcolz"}, "edited": false, "score": 0, "creation_date": 1453913199, "post_id": 35031632, "comment_id": 57810612, "body": "@marcolz in fact, no, compiling with clang -Wall"}, {"owner": {"reputation": 813, "user_id": 3543200, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0e080d0d27c61c16444b17d0aae7b3c8?s=128&d=identicon&r=PG", "display_name": "gmoss", "link": "https://stackoverflow.com/users/3543200/gmoss"}, "reply_to_user": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "edited": false, "score": 0, "creation_date": 1453913326, "post_id": 35031632, "comment_id": 57810712, "body": "@Frankie_C I&#39;m using clang. Compiling with <code>clang -O0</code> did not fix the issue, nor did setting <code>rnew</code> to be volatile. If I understand correctly, what <code>volatile</code> does is alert the compiler that the value being stored at <code>&amp;rnew</code> might change without anything seeming to directly access <code>rnew</code>, but I don&#39;t see why, if that was happening, the wrong address would be getting passed to <code>bigint_subtract</code>."}, {"owner": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "edited": false, "score": 0, "creation_date": 1453913924, "post_id": 35031632, "comment_id": 57811147, "body": "If removing optimization the problem persist the compiler is ok. The use of <code>volatile</code>, in case of a broken optimizer, sometimes solves the problem because instruct the compiler to reload values bypassing the use of corrupted registers."}, {"owner": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "edited": false, "score": 0, "creation_date": 1453914720, "post_id": 35031632, "comment_id": 57811702, "body": "I&#39;m still thinking of a compiler bug. You&#39;re right I told you to make volatile the value of <code>rnew</code>, but we need address to be reloaded. Try defining a new pointer, <code>volatile</code>, that holds the address of <code>rnew</code>: <code>volatile bigint *bip = &amp;rnew;</code>, then pass the pointer to the function <code>bigint_subtract</code>. Then if still no light, there are only 2 ways: inspect the generated assembler, check for a <b>side-effect</b> of some instruction in your code."}, {"owner": {"reputation": 813, "user_id": 3543200, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0e080d0d27c61c16444b17d0aae7b3c8?s=128&d=identicon&r=PG", "display_name": "gmoss", "link": "https://stackoverflow.com/users/3543200/gmoss"}, "reply_to_user": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "edited": false, "score": 0, "creation_date": 1453914901, "post_id": 35031632, "comment_id": 57811809, "body": "@Frankie_C Tried this, no cigar. I should note that clang issued a warning: <code>CBigInt_numtheory.c:47:29: warning: passing &#39;volatile bigint *&#39; (aka &#39;volatile struct bigint *&#39;) to parameter of type &#39;bigint *&#39;       (aka &#39;struct bigint *&#39;) discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]                 bigint_subtract(rold,tmp2,rnewp); </code>  EDIT nevermind I&#39;m being dumb, hold on a minute..."}, {"owner": {"reputation": 813, "user_id": 3543200, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0e080d0d27c61c16444b17d0aae7b3c8?s=128&d=identicon&r=PG", "display_name": "gmoss", "link": "https://stackoverflow.com/users/3543200/gmoss"}, "reply_to_user": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1453917784, "post_id": 35031632, "comment_id": 57813746, "body": "@MichaelBurr I made a self-contained c file containing only the necessary code for this operation, and of course the problem disappeared. Now investigating the differences. I deleted some printfs, so I suspect you&#39;re onto something about the static buffer, which I don&#39;t know what that is but I&#39;m about to go learn!"}, {"owner": {"reputation": 813, "user_id": 3543200, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0e080d0d27c61c16444b17d0aae7b3c8?s=128&d=identicon&r=PG", "display_name": "gmoss", "link": "https://stackoverflow.com/users/3543200/gmoss"}, "reply_to_user": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1453918089, "post_id": 35031632, "comment_id": 57813919, "body": "@MichaelBurr So you&#39;re right, adding the printfs back in causes the problem to re-emerge. If I understand correctly, a static buffer is one initialized as follows: <code>char staticBuf[10];</code>, right? I am very careful never to do this anywhere, using calloc always. If you don&#39;t mind, could you just elaborate a bit on what I should look for, or point me to a reference?"}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1453919572, "post_id": 35031632, "comment_id": 57814903, "body": "Post the code for <code>bigint_tohex()</code>"}, {"owner": {"reputation": 813, "user_id": 3543200, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0e080d0d27c61c16444b17d0aae7b3c8?s=128&d=identicon&r=PG", "display_name": "gmoss", "link": "https://stackoverflow.com/users/3543200/gmoss"}, "reply_to_user": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1453919829, "post_id": 35031632, "comment_id": 57815047, "body": "@MichaelBurr posted."}, {"owner": {"reputation": 813, "user_id": 3543200, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0e080d0d27c61c16444b17d0aae7b3c8?s=128&d=identicon&r=PG", "display_name": "gmoss", "link": "https://stackoverflow.com/users/3543200/gmoss"}, "reply_to_user": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1453923131, "post_id": 35031632, "comment_id": 57816991, "body": "@MichaelBurr I was wrong, removing printfs did NOT fix the issue, I looked at the wrong output."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1453925525, "post_id": 35031632, "comment_id": 57818361, "body": "Possible error sources could also be overwriting part of the stack, e.g in one of the <code>bigint_cpy</code> functions. Can you show the other functions, or alternatively try to make 100% sure they&#39;re working as they should? (Some questions just haunt you :D )"}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1453928347, "post_id": 35031632, "comment_id": 57819929, "body": "@gmoss: the <code>bigint_tohex()</code> fucntion returns a dynamically allocated string so it isn&#39;t causing the kind of problem that I thought might be possible (such as returning a pointer to a local variable).  However, that does mean you have a memory leak using it directly from a <code>printf()</code> call.  That&#39;s fine for debugging/troubleshooting but is something that you have to keep in mind for normal use.  Also, I think you might have a bug in the bit of code prepending a minus sign (I think the realloc&#39;ed buffer might be too small by one)."}], "owner": {"reputation": 813, "user_id": 3543200, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0e080d0d27c61c16444b17d0aae7b3c8?s=128&d=identicon&r=PG", "display_name": "gmoss", "link": "https://stackoverflow.com/users/3543200/gmoss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 141, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1453919813, "creation_date": 1453881396, "last_edit_date": 1495541047, "question_id": 35031632, "link": "https://stackoverflow.com/questions/35031632/wrong-address-value-being-passed-to-function-in-c", "title": "wrong address value being passed to function in C", "body": "<p>This is similar to <a href=\"https://stackoverflow.com/questions/31883366/incorrect-pointer-value-passed-to-a-c-function\">incorrect pointer value passed to a C function</a> but there doesn't appear to be an answer.</p>\n\n<p>I have a struct, called <code>bigint</code>, which has fields <code>char sign</code>, <code>size_t len</code> and <code>uint32_t *val</code>. <code>bigint</code>s are initialized by a <code>bigint_init()</code> function which allocates some memory for the <code>uint32_t</code> array, sets default values, etc. </p>\n\n<p>I have a function, <code>void bigint_subtract(bigint a, bigint b, bigint *diff)</code> which stores <code>a-b</code> in <code>diff</code>. I have tested this function previously, as follows:</p>\n\n<pre><code>bigint test = bigint_inithex(\"4567890987654345678987654adbfcaedcfaaebfc625213\");\nbigint test2 = bigint_inithex(\"acbefabedfc13271723976aebdfcabefc12837618237\");\nbigint diff = bigint_init();\nbigint_subtract(test,test2,&amp;diff);\nprintf(\"0x%s - 0x%s == 0x%s\\n\\n\",bigint_tohex(test), bigint_tohex(test2),bigint_tohex(diff));\n</code></pre>\n\n<p>among numerous other tests for edge cases, varying lengths, etc. All the tests check out.</p>\n\n<p>Now, I am in another function, <code>void bigint_egcd(bigint a, bigint b, bigint c, bigint *x, bigint *y);</code> It's just the extended euclidean algorithm. In the main loop of the extended Euclidean algorithm, I have the following code:</p>\n\n<pre><code>bigint rold, rnew, q, r, ...;\nrold = bigint_init();\nbigint_cpy(&amp;rold, a);\nrnew = bigint_init();\nbigint_cpy(&amp;rnew, b);\n...[more initializations, etc.]\n\nwhile(!bigint_isval(rnew, 0)){\n    bigint_divide(rold,rnew,&amp;q,&amp;r);\n\n    bigint_cpy(&amp;tmp1, rnew); \n    bigint_multiply(q,rnew,&amp;tmp2); \n    bigint_subtract(rold,tmp2,&amp;rnew); \n    bigint_cpy(&amp;rold, tmp1);\n    ....\n}\n</code></pre>\n\n<p>Things were going wrong, so I did some debugging, couldn't figure anything out, so I started adding printfs. Here's how it looks now:</p>\n\n<pre><code>while(!bigint_isval(rnew, 0)){\n    bigint_divide(rold,rnew,&amp;q,&amp;r);\n\n    printf(\"\\t%s = %s * %s + %s\\n\", bigint_tohex(rold), bigint_tohex(rnew), bigint_tohex(q), bigint_tohex(r));fflush(stdout);\n    bigint_cpy(&amp;tmp1, rnew); \n    printf(\"\\tupdated r = %s - %s * %s = \", bigint_tohex(rold), bigint_tohex(q), bigint_tohex(rnew));fflush(stdout);\n    bigint_multiply(q,rnew,&amp;tmp2); \n    printf(\"%s - %s = (%p) \", bigint_tohex(rold), bigint_tohex(tmp2), &amp;rnew);fflush(stdout);\n    bigint_subtract(rold,tmp2,&amp;rnew); \n    printf(\"%s at address %p\\n\", bigint_tohex(rnew),&amp;rnew);fflush(stdout);\n    bigint_cpy(&amp;rold, tmp1);\n</code></pre>\n\n<p>At the beginning of <code>bigint_subtract</code>, I added the following printf:</p>\n\n<pre><code>void bigint_subtract(bigint a, bigint b, bigint *diff){\n    printf(\"BIGINT_SUBTRACT diff address is %p\\n\", diff);fflush(stdout);\n    ....\n</code></pre>\n\n<p>And so I discovered that the address being received by <code>bigint_subtract</code> is not the same as the address I am passing to it in <code>bigint_egcd</code>. Meanwhile, the subtraction is actually correct, it's just storing it some random address, and not updated the value stored at <code>rnew</code>.</p>\n\n<p>Meanwhile, the exact same code later in the loop, with <code>t</code> and <code>s</code> in place of their <code>r</code> counterparts, does not exhibit this behavior -- all the addresses are passed correctly. <code>rnew</code> and <code>rold</code> are properly initialized at the top of <code>bigint_egcd</code>, in the exactly same way as the <code>t</code> and <code>s</code> counterparts are.</p>\n\n<p>In short, I have a variable <code>bar1</code>.  I pass <code>&amp;bar1</code> to <code>foo(type *var)</code>, but somehow it becomes something else once inside of <code>foo</code>. What gives? What kinds of mistakes could cause this to happen? </p>\n\n<p>EDIT</p>\n\n<p>Here's <code>bigint_tohex</code>:</p>\n\n<pre><code>static const char *BII_HEX=\"0123456789abcdef\";\n\nchar *bigint_tohex(bigint a){\n    char *hex = calloc((a.len&lt;&lt;3) + 1,sizeof(char));\n    uint8_t j;\n    for(size_t i=0; i&lt;a.len; i++){\n        for(j=0; j&lt;8; j++){\n            hex[ (i&lt;&lt;3) + j ] = BII_HEX[(a.val[i] &gt;&gt; ((7-j)&lt;&lt;2)) &amp; 0xF];\n        }\n    }\n    hex[a.len&lt;&lt;3] = 0;\n\n    //any leading 0s should be removed:\n    int i=0;\n    while(hex[i]=='0' &amp;&amp; hex[i+1]!=0) ++i;\n\n    memmove(hex,hex+i,strlen(hex)+1-i);\n\n    if(a.sign == BII_NEG){\n        hex = realloc(hex, (strlen(hex)+1)*sizeof(char));\n        memmove(hex+1,hex,strlen(hex)+1);\n        hex[0]='-';\n    }\n    return hex;\n}\n</code></pre>\n"}, {"tags": ["mysql", "c", "libmysql"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 1, "creation_date": 1453877987, "post_id": 35030631, "comment_id": 57787048, "body": "Most implementations of mysql can provide a &#39;affected_rows&#39;. I don&#39;t know libmysql but you should read through the docs and look if affected_rows is mentioned somewhere."}], "answers": [{"comments": [{"owner": {"reputation": 2529, "user_id": 3490458, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8e2f2e4c4748ca9f7347540481532ae6?s=128&d=identicon&r=PG&f=1", "display_name": "Zaxter", "link": "https://stackoverflow.com/users/3490458/zaxter"}, "edited": false, "score": 0, "creation_date": 1453878827, "post_id": 35030804, "comment_id": 57787432, "body": "Thanks! <code>mysql_affected_rows</code> is exactly what I need."}], "tags": [], "owner": {"reputation": 16507, "user_id": 4787126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a822df86c907c77c792a8f91b2bab41?s=128&d=identicon&r=PG&f=1", "display_name": "Zbynek Vyskovsky - kvr000", "link": "https://stackoverflow.com/users/4787126/zbynek-vyskovsky-kvr000"}, "is_accepted": true, "score": 2, "last_activity_date": 1453878347, "creation_date": 1453878347, "answer_id": 35030804, "question_id": 35030631, "link": "https://stackoverflow.com/questions/35030631/how-to-get-mysql-to-throw-an-error-on-update-for-no-rows-matched/35030804#35030804", "title": "How to get mysql to throw an error on update for no rows matched?", "body": "<p>Check <a href=\"http://dev.mysql.com/doc/refman/5.7/en/mysql-affected-rows.html\" rel=\"nofollow\">mysql_affected_rows</a>. This will return number of modified rows by the last query.</p>\n\n<p>However, it may return just the rows actually modified. If you want to return matched row, you have to specify <code>CLIENT_FOUND_ROWS</code> in <code>mysql_real_connect</code>. Check the same page for details.</p>\n"}], "owner": {"reputation": 2529, "user_id": 3490458, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8e2f2e4c4748ca9f7347540481532ae6?s=128&d=identicon&r=PG&f=1", "display_name": "Zaxter", "link": "https://stackoverflow.com/users/3490458/zaxter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "accepted_answer_id": 35030804, "answer_count": 1, "score": 1, "last_activity_date": 1453878347, "creation_date": 1453877789, "question_id": 35030631, "link": "https://stackoverflow.com/questions/35030631/how-to-get-mysql-to-throw-an-error-on-update-for-no-rows-matched", "title": "How to get mysql to throw an error on update for no rows matched?", "body": "<p>I want to know when an <code>UPDATE</code> query reports 0 rows matches. I'm using <code>libmysql</code>. </p>\n\n<p>Here's the code I'm using:</p>\n\n<pre><code>char query[300] = {0};\nsnprintf(query, 300, \"UPDATE `my_table` SET name='%s' WHERE id=%d\",\n         name, id);\n\nif (mysql_query(db, query)) {\n    printf(\"Error!\\n\");\n}\n</code></pre>\n\n<p>Essentially what I need to know is whether or not there is a match for <code>id</code>. I know I can check that by doing a select, but is there another way? </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1453879366, "post_id": 35030288, "comment_id": 57787700, "body": "It&#39;s a dumber way of writing <code>typedef float func_t (int* a);</code> then declare <code>func_t* array[20];</code>"}], "answers": [{"comments": [{"owner": {"reputation": 510, "user_id": 5778300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a214fbbf28e4a6615ff6891f99e06c5?s=128&d=identicon&r=PG&f=1", "display_name": "Flikk", "link": "https://stackoverflow.com/users/5778300/flikk"}, "edited": false, "score": 0, "creation_date": 1453877049, "post_id": 35030342, "comment_id": 57786677, "body": "is there any reason one should do that? I dont see anything this could be useful for."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 510, "user_id": 5778300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a214fbbf28e4a6615ff6891f99e06c5?s=128&d=identicon&r=PG&f=1", "display_name": "Flikk", "link": "https://stackoverflow.com/users/5778300/flikk"}, "edited": false, "score": 0, "creation_date": 1453878693, "post_id": 35030342, "comment_id": 57787367, "body": "@Flikk; I added one simple use of array of function pointers."}, {"owner": {"reputation": 510, "user_id": 5778300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a214fbbf28e4a6615ff6891f99e06c5?s=128&d=identicon&r=PG&f=1", "display_name": "Flikk", "link": "https://stackoverflow.com/users/5778300/flikk"}, "edited": false, "score": 0, "creation_date": 1453880996, "post_id": 35030342, "comment_id": 57788554, "body": "@haccks Thx, that makes sense. i haven&#39;t worked with function pointers so far. How would it look like with the syntax from the question though? I guess something like <code>double (*p[ ])(double a, double b) = { sum, subtract, mul, divide };</code>. What else would this syntax need? The function prototypes? and anything else?"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 510, "user_id": 5778300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a214fbbf28e4a6615ff6891f99e06c5?s=128&d=identicon&r=PG&f=1", "display_name": "Flikk", "link": "https://stackoverflow.com/users/5778300/flikk"}, "edited": false, "score": 0, "creation_date": 1453881166, "post_id": 35030342, "comment_id": 57788630, "body": "@Flikk; Smarter way to write <code>double (*p[ ])(double a, double b) = { sum, subtract, mul, divide };</code> is <code>typedef double Func(double, double); Func *p[] = { sum, subtract, mul, divide };</code>"}, {"owner": {"reputation": 510, "user_id": 5778300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a214fbbf28e4a6615ff6891f99e06c5?s=128&d=identicon&r=PG&f=1", "display_name": "Flikk", "link": "https://stackoverflow.com/users/5778300/flikk"}, "edited": false, "score": 0, "creation_date": 1453881813, "post_id": 35030342, "comment_id": 57788942, "body": "@haccks so if i don&#39;t have the typedef, i have to declare the prototypes like <code>double sum(double, double); double subtract(double, double); double mul(double, double); double divide(double, double);</code> or is there any way to write it shorter without the typedef?"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 510, "user_id": 5778300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a214fbbf28e4a6615ff6891f99e06c5?s=128&d=identicon&r=PG&f=1", "display_name": "Flikk", "link": "https://stackoverflow.com/users/5778300/flikk"}, "edited": false, "score": 0, "creation_date": 1453910497, "post_id": 35030342, "comment_id": 57808670, "body": "@Flikk; Yes. Having typedef, shorter version is <code>Func sum, subtract, mul, divide;</code>"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1533514092, "post_id": 35030342, "comment_id": 90359786, "body": "Any reason why you have <code>main</code> returning a <code>double</code>?"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1533515541, "post_id": 35030342, "comment_id": 90359992, "body": "@dbush actually I don&#39;t remember if I did that intentionally or accidentally. BTW, fixed that now."}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 12, "last_activity_date": 1533515486, "last_edit_date": 1533515486, "creation_date": 1453876564, "answer_id": 35030342, "question_id": 35030288, "link": "https://stackoverflow.com/questions/35030288/what-this-declaration-float-x20int-a-means/35030342#35030342", "title": "What this declaration &quot;float (*x[20])(*int a)&quot; means?", "body": "<p><code>float (*x[20])(*int a)</code> is not correct. It should be <code>float (*x[20])(int *a)</code> which declares <code>x</code> as an array of 20 pointers to a function that takes an argument of <code>int *</code> type and returns <code>float</code>.  </p>\n\n<hr>\n\n<p>For those who are curious to know the <a href=\"https://stackoverflow.com/a/23903167/2455888\">use</a> of an array of function pointers:  </p>\n\n<pre><code>typedef double Func(double, double);          // Declare a double (double, double)\n\nFunc sum, subtract, mul, divide;              // Function prototypes.\nFunc *p[] = { sum, subtract, mul, divide };   // Array of function pointers\n\nint main(void)\n{\n    double result;\n    double a, b;\n    int option;\n    printf(\"This is a simple calculator to add, subtract, multiply and divideide two integers\\n\"); \n    printf(\"Enter two integers: \");\n    scanf(\"%lf %lf\", &amp;a, &amp;b);\n\n    printf(\"Choose an option:\\n 1. Add\\n 2. Subtract\\n 3. Mult\\n 4. Divide\\n\");\n    scanf(\"%d\", &amp;option);\n\n    result = p[option - 1](a, b); \n    printf(\"result = %lf\\n\", result);\n}\n\ndouble sum(double a, double b) { return a+b; }\ndouble subtract(double a, double b) { return a-b; }\ndouble mul(double a, double b) { return a*b; }\ndouble divide(double a, double b) { return a/b; }\n</code></pre>\n\n<hr>\n\n<p>A detailed explanation on how to read/decipher such complex declaration is discussed <a href=\"https://stackoverflow.com/a/34560439/2455888\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 1560, "user_id": 3403216, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wly78.png?s=128&g=1", "display_name": "linluk", "link": "https://stackoverflow.com/users/3403216/linluk"}, "is_accepted": false, "score": 1, "last_activity_date": 1453876653, "creation_date": 1453876653, "answer_id": 35030361, "question_id": 35030288, "link": "https://stackoverflow.com/questions/35030288/what-this-declaration-float-x20int-a-means/35030361#35030361", "title": "What this declaration &quot;float (*x[20])(*int a)&quot; means?", "body": "<p>this is an array of function pointers. it has 20 function pointer items.</p>\n"}, {"tags": [], "owner": {"reputation": 8833, "user_id": 337149, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3bbd41f2b74254f902cfe20acef9030b?s=128&d=identicon&r=PG", "display_name": "August Karlstrom", "link": "https://stackoverflow.com/users/337149/august-karlstrom"}, "is_accepted": false, "score": 1, "last_activity_date": 1453880948, "last_edit_date": 1453880948, "creation_date": 1453878590, "answer_id": 35030872, "question_id": 35030288, "link": "https://stackoverflow.com/questions/35030288/what-this-declaration-float-x20int-a-means/35030872#35030872", "title": "What this declaration &quot;float (*x[20])(*int a)&quot; means?", "body": "<p>The declaration</p>\n\n<pre><code>float (*x[20])(int *a);\n</code></pre>\n\n<p>defines the variable <em>x</em> as an array of 20 functions (function pointers). In my humble opinion it's more clearly written as</p>\n\n<pre><code>Function x[20];\n</code></pre>\n\n<p>with</p>\n\n<pre><code>typedef float (*Function)(int *a);\n</code></pre>\n\n<p>The purpose of <em>x</em> is hard to tell without context, it could be to compute a statistical value like average, variance or standard deviation etc. given a set of integers and a function index input by the user:</p>\n\n<pre><code>x[0] = Average;\nx[1] = Variance;\nx[2] = StandardDeviation;\n...\n\nint a[100];\nint i;\n\n/*read data into `a' and function index into i...*/\n\nprintf(\"%f\\n\", x[i](a));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 79, "user_id": 6576415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40cd1cc2bb61444b743a90abdef9557e?s=128&d=identicon&r=PG&f=1", "display_name": "Ebram", "link": "https://stackoverflow.com/users/6576415/ebram"}, "is_accepted": false, "score": 0, "last_activity_date": 1533513848, "last_edit_date": 1533513848, "creation_date": 1533512250, "answer_id": 51699036, "question_id": 35030288, "link": "https://stackoverflow.com/questions/35030288/what-this-declaration-float-x20int-a-means/51699036#51699036", "title": "What this declaration &quot;float (*x[20])(*int a)&quot; means?", "body": "<p>The code should be like this: - <code>float (*x[20])(int *a);</code> - as <code>(*int a)</code> seems to be incorrect. The code tells me that x is an array of 20 pointers to function that each takes an argument with datatype int and return float.</p>\n"}], "owner": {"reputation": 45, "user_id": 5844411, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UMuHhgkVsyM/AAAAAAAAAAI/AAAAAAAAACA/rwMpG-EL67U/photo.jpg?sz=128", "display_name": "Farhan Hasin", "link": "https://stackoverflow.com/users/5844411/farhan-hasin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1589, "favorite_count": 1, "answer_count": 4, "score": 0, "last_activity_date": 1533515486, "creation_date": 1453876358, "last_edit_date": 1453910442, "question_id": 35030288, "link": "https://stackoverflow.com/questions/35030288/what-this-declaration-float-x20int-a-means", "title": "What this declaration &quot;float (*x[20])(*int a)&quot; means?", "body": "<p>I found somewhere this weird variable declaration  </p>\n\n<pre><code>float (*x[20])(*int a); \n</code></pre>\n\n<p>What could it possibly mean?<br>\nWhat is the purpose of it?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "edited": false, "score": 1, "creation_date": 1453876386, "post_id": 35030269, "comment_id": 57786444, "body": "No... <code>int</code> can&#39;t take <code>float</code> so there is a different data-type <code>float</code>"}, {"owner": {"reputation": 510, "user_id": 5778300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a214fbbf28e4a6615ff6891f99e06c5?s=128&d=identicon&r=PG&f=1", "display_name": "Flikk", "link": "https://stackoverflow.com/users/5778300/flikk"}, "edited": false, "score": 0, "creation_date": 1453877381, "post_id": 35030269, "comment_id": 57786809, "body": "Int can only store whole numbers (...,-2,-1, 0, 1, 2, 3, ...). If you assign a float to an int, everything behind the period will just be cut off and will be lost. <code>2.9 = 2</code>   and <code>-2.9 = -2</code>"}], "answers": [{"tags": [], "owner": {"reputation": 324, "user_id": 5638360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/854de87d130bf76583b746df0e71ef3d?s=128&d=identicon&r=PG&f=1", "display_name": "Georg", "link": "https://stackoverflow.com/users/5638360/georg"}, "is_accepted": false, "score": 1, "last_activity_date": 1453877123, "creation_date": 1453877123, "answer_id": 35030475, "question_id": 35030269, "link": "https://stackoverflow.com/questions/35030269/explain-the-comparison-in-this-small-c-program/35030475#35030475", "title": "Explain the comparison in this small C program", "body": "<p>The value stored in <code>b</code> will be <code>1</code>. When comparing, <code>b</code> will be cast to the <code>float</code> value <code>1.0f</code>, so the comparison will yield NO.</p>\n"}, {"tags": [], "owner": {"reputation": 16091, "user_id": 4975822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c04e8c4c984d36bea8a6239574980fbd?s=128&d=identicon&r=PG&f=1", "display_name": "artm", "link": "https://stackoverflow.com/users/4975822/artm"}, "is_accepted": false, "score": 1, "last_activity_date": 1453877464, "last_edit_date": 1453877464, "creation_date": 1453877128, "answer_id": 35030477, "question_id": 35030269, "link": "https://stackoverflow.com/questions/35030269/explain-the-comparison-in-this-small-c-program/35030477#35030477", "title": "Explain the comparison in this small C program", "body": "<blockquote>\n  <p>int b = 1.1;</p>\n</blockquote>\n\n<p>This truncates the double value <code>1.1</code> to <code>1</code> before assigning to variable <code>b</code>. The output therefore is <code>NO</code>.</p>\n\n<p>But you can compare <code>int</code> to <code>float</code>. Consider this example:</p>\n\n<pre><code>float a=1.0;\nint b=1;\n\nif(a==b)\n    printf(\"YES\");\nelse\n    printf(\"NO\");\n</code></pre>\n\n<p>Here, <code>a</code> is converted to <code>float</code> before the comparison, and therefore you would get a <code>YES</code> output.</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 1838433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76bacc05c849557e1f93fa819c4f7c32?s=128&d=identicon&r=PG", "display_name": "abhinav", "link": "https://stackoverflow.com/users/1838433/abhinav"}, "is_accepted": false, "score": 1, "last_activity_date": 1453877998, "last_edit_date": 1453877998, "creation_date": 1453877232, "answer_id": 35030501, "question_id": 35030269, "link": "https://stackoverflow.com/questions/35030269/explain-the-comparison-in-this-small-c-program/35030501#35030501", "title": "Explain the comparison in this small C program", "body": "<p>You should get the answer No when you execute it. </p>\n\n<p>That's because when </p>\n\n<pre><code>int b=1.1;\n</code></pre>\n\n<p>was executed, it initialized a variable <code>b</code> and then assigned the <code>int</code> of <code>1.1</code> that is <code>1</code>.  You can check this by outputting the value of <code>b</code>. </p>\n\n<p>Also the type <code>int</code> stores whole numbers only but <code>float</code> can store fractional numbers. The types are completely different.</p>\n"}, {"tags": [], "owner": {"reputation": 456, "user_id": 5276705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e8bd54c7b2823d28abc6dbee63f3e0b?s=128&d=identicon&r=PG", "display_name": "SKD", "link": "https://stackoverflow.com/users/5276705/skd"}, "is_accepted": false, "score": 2, "last_activity_date": 1453877806, "last_edit_date": 1453877806, "creation_date": 1453877350, "answer_id": 35030526, "question_id": 35030269, "link": "https://stackoverflow.com/questions/35030269/explain-the-comparison-in-this-small-c-program/35030526#35030526", "title": "Explain the comparison in this small C program", "body": "<p>The output will be  <strong>NO</strong></p>\n\n<p>It's because <code>int</code> can't store <code>float</code> values correctly. So, the value stored in <code>b</code> will be <code>1</code> which is not equal to <code>1.1</code>. So, the <code>if</code> case will never be satisfied and thus the output will be NO always.</p>\n"}, {"tags": [], "owner": {"reputation": 186, "user_id": 4092276, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh3.googleusercontent.com/-JuwWy6taoPg/AAAAAAAAAAI/AAAAAAAADTA/rvkSCB-C0qU/photo.jpg?sz=128", "display_name": "Balaraman L", "link": "https://stackoverflow.com/users/4092276/balaraman-l"}, "is_accepted": false, "score": 1, "last_activity_date": 1453878054, "last_edit_date": 1453878054, "creation_date": 1453877408, "answer_id": 35030539, "question_id": 35030269, "link": "https://stackoverflow.com/questions/35030269/explain-the-comparison-in-this-small-c-program/35030539#35030539", "title": "Explain the comparison in this small C program", "body": "<p>It will compile without any errors. The output of the program will be \"NO\".</p>\n\n<p>In C, <code>int</code> and <code>float</code> are 2 different data types. Even when you try to assign the value 1.1 to an integer variable in C, it will be initialized as 1 only.</p>\n"}, {"tags": [], "owner": {"reputation": 1831, "user_id": 4278074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spNDb.jpg?s=128&g=1", "display_name": "Aleksandar Makragi\u0107", "link": "https://stackoverflow.com/users/4278074/aleksandar-makragi%c4%87"}, "is_accepted": false, "score": 0, "last_activity_date": 1453882438, "creation_date": 1453882438, "answer_id": 35031915, "question_id": 35030269, "link": "https://stackoverflow.com/questions/35030269/explain-the-comparison-in-this-small-c-program/35031915#35031915", "title": "Explain the comparison in this small C program", "body": "<p>Others already told you that the answer will be <strong>NO.</strong> Can the int data type take the floating-point values? </p>\n\n<p>Yes they can, but only in one statement! IIf you want int variable to behave like float variable you need to cast it to float.</p>\n\n<p>For example:</p>\n\n<pre><code>int x = 5;\nint y = 3;\nprintf(\"%f \\n\", (float)x/y);\n</code></pre>\n\n<p>Output will be 5.0/3 and that would be float value. <code>(float)x</code> is called casting. You can also cast float value into integer, <code>(int)some_var</code> etc.</p>\n\n<p><strong>Note:</strong> <em>Type of x and y will remain int</em>! They only behave like float in this statement. \nHowever, in your program that won't work, because as soon as you declare <code>int b = 1.1;</code> b becomes 1.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4810503"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 6, "score": -2, "last_activity_date": 1453882438, "creation_date": 1453876258, "last_edit_date": 1453878240, "question_id": 35030269, "link": "https://stackoverflow.com/questions/35030269/explain-the-comparison-in-this-small-c-program", "title": "Explain the comparison in this small C program", "body": "<p>What will be the output of the following C code? \nCan the <code>int</code> data type take the floating-point values?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(){\n  float a = 1.1;\n  int b = 1.1;\n\n  if(a==b)\n     printf(\"YES\");\n  else\n     printf(\"NO\");\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 1, "creation_date": 1453876361, "post_id": 35030021, "comment_id": 57786437, "body": "Please go easy on the comments, they just re-state what is pretty clear from the code. <code>&#47;* Remind OP to go easy on the comments. *&#47;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 7, "last_activity_date": 1453875543, "last_edit_date": 1453875543, "creation_date": 1453875209, "answer_id": 35030049, "question_id": 35030021, "link": "https://stackoverflow.com/questions/35030021/c-newbie-my-program-has-two-parts-to-it-but-the-whole-thing-pops-up-at-the-same/35030049#35030049", "title": "C Newbie. My program has two parts to it but the whole thing pops up at the same time", "body": "<p>Change</p>\n\n<pre><code>scanf(\"%c\", &amp;let);\n</code></pre>\n\n<p>to</p>\n\n<pre><code>scanf(\" %c\", &amp;let); \n</code></pre>\n\n<p>There is a newline character after a number is entered so that is picked by <code>%c</code> you need to ignore it. Note the space before <code>%c</code></p>\n"}, {"tags": [], "owner": {"reputation": 113, "user_id": 5230930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b8ef7bf42a570234b44bb51d7766f92?s=128&d=identicon&r=PG&f=1", "display_name": "CodeWarrior101", "link": "https://stackoverflow.com/users/5230930/codewarrior101"}, "is_accepted": false, "score": 0, "last_activity_date": 1453884230, "last_edit_date": 1453884230, "creation_date": 1453883759, "answer_id": 35032306, "question_id": 35030021, "link": "https://stackoverflow.com/questions/35030021/c-newbie-my-program-has-two-parts-to-it-but-the-whole-thing-pops-up-at-the-same/35032306#35032306", "title": "C Newbie. My program has two parts to it but the whole thing pops up at the same time", "body": "<p>A better approach is flushing the input buffer after every scanf()/getchar() call.</p>\n\n<pre><code>while ((ch = getchar()) != '\\n' &amp;&amp; ch != EOF);\n</code></pre>\n\n<p>but don't use fflush(stdin) because if the file stream is for input use, as stdin is, the behaviour is undefined, therefore it is not acceptable to use fflush() for clearing keyboard input.\nAs usual, there are some exceptions, check your compiler's documentation to see if it has a (non-portable) method for flushing input.</p>\n\n<p>you can use getchar() function as well to clean the new line character but first method is recommended. </p>\n"}], "owner": {"reputation": 21, "user_id": 5845077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01853ef1834b66efc7dbd24488127575?s=128&d=identicon&r=PG&f=1", "display_name": "oporock", "link": "https://stackoverflow.com/users/5845077/oporock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "closed_date": 1453950219, "answer_count": 2, "score": 1, "last_activity_date": 1453884230, "creation_date": 1453875078, "question_id": 35030021, "link": "https://stackoverflow.com/questions/35030021/c-newbie-my-program-has-two-parts-to-it-but-the-whole-thing-pops-up-at-the-same", "closed_reason": "Duplicate", "title": "C Newbie. My program has two parts to it but the whole thing pops up at the same time", "body": "<p>I managed to make this simple two part program which consists of simple print and scan functions. The first part is an addition operation and the second part asks the user for a letter and then it repeats it to the user. The first part goes well but when it finishes and is supposed to start the second part it shows the whole thing before I can input a letter. </p>\n\n<pre><code>#define _CRT_SECURE_NO_WARNINGS\n#include&lt;stdio.h&gt;\n\nint main()\n{\nint num1, num2 = 522;/*input a number*/ /*add 522*/\nint sum; /*sum of num1 and num2*/\nchar let;   /*Letter to put in*/\n\nprintf(\"Hello, my name is John Doe.\\n\"); /*Print \"Hello my name is*/\nprintf(\"Please type a number= \"); /*Ask user for num1*/\nscanf(\"%d\", &amp;num1);   /*Scan for num1*/\nsum = num1 + 522;   /*Add 522 to num1*/\nprintf(\"The sum of %d and %d is %d\\n\", num1, num2, sum);/*print num1 and sum*/\nprintf(\"Please type a letter= \\n\");   /*Ask user for letter*/\nscanf(\"%c\", &amp;let);   /*Scan for letter*/\nprintf(\"You typed %c\\n\", let);    /*Show the letter input*/\nreturn 0;\n\n}\n</code></pre>\n"}, {"tags": ["c", "fopen", "fgetc"], "comments": [{"owner": {"reputation": 545, "user_id": 3404790, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/284304e7a2bc28b900f1990d0cc45231?s=128&d=identicon&r=PG&f=1", "display_name": "novice", "link": "https://stackoverflow.com/users/3404790/novice"}, "edited": false, "score": 0, "creation_date": 1453873337, "post_id": 35029633, "comment_id": 57785288, "body": "Should be char hexVal[4] instead of hexVal[3], one space for the null terminating character"}, {"owner": {"reputation": 545, "user_id": 3404790, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/284304e7a2bc28b900f1990d0cc45231?s=128&d=identicon&r=PG&f=1", "display_name": "novice", "link": "https://stackoverflow.com/users/3404790/novice"}, "edited": false, "score": 0, "creation_date": 1453873478, "post_id": 35029633, "comment_id": 57785342, "body": "<a href=\"http://stackoverflow.com/questions/238603/how-can-i-get-a-files-size-in-c\" title=\"how can i get a files size in c\">stackoverflow.com/questions/238603/&hellip;</a> -  To get file length in c++"}, {"owner": {"reputation": 11, "user_id": 5845016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/554ed009cfb94f420f78ca20db2c5eda?s=128&d=identicon&r=PG&f=1", "display_name": "Nikolai Fedorov", "link": "https://stackoverflow.com/users/5845016/nikolai-fedorov"}, "reply_to_user": {"reputation": 545, "user_id": 3404790, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/284304e7a2bc28b900f1990d0cc45231?s=128&d=identicon&r=PG&f=1", "display_name": "novice", "link": "https://stackoverflow.com/users/3404790/novice"}, "edited": false, "score": 0, "creation_date": 1453873514, "post_id": 35029633, "comment_id": 57785357, "body": "@novice - yes, it still has same behavior though. thank for other link too"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1453873556, "post_id": 35029633, "comment_id": 57785377, "body": "What does &quot;it&#39;s very later&quot; mean? &quot;i would want to change 0xAB, but my code make it change 0XCD&quot;. What is the &quot;it&quot; in that sentence and where in your code is that being done (I can&#39;t see it)?"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1453873798, "post_id": 35029633, "comment_id": 57785483, "body": "I think you better give us some sample <i>exact</i> input, expected output and actual output."}, {"owner": {"reputation": 2324, "user_id": 5334131, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JU6Bo.jpg?s=128&g=1", "display_name": "Hellmar Becker", "link": "https://stackoverflow.com/users/5334131/hellmar-becker"}, "edited": false, "score": 0, "creation_date": 1453873875, "post_id": 35029633, "comment_id": 57785508, "body": "You cannot just call <code>strncmp(&amp;c ...)</code> because &amp;c is not a null terminated string. Also, strncmp returns 0 on equal."}, {"owner": {"reputation": 2324, "user_id": 5334131, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JU6Bo.jpg?s=128&g=1", "display_name": "Hellmar Becker", "link": "https://stackoverflow.com/users/5334131/hellmar-becker"}, "edited": false, "score": 0, "creation_date": 1453874116, "post_id": 35029633, "comment_id": 57785590, "body": "@NikolaiFedorov this makes sense: -1 for &lt;, +1 for &gt;, 0 for ="}, {"owner": {"reputation": 11, "user_id": 5845016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/554ed009cfb94f420f78ca20db2c5eda?s=128&d=identicon&r=PG&f=1", "display_name": "Nikolai Fedorov", "link": "https://stackoverflow.com/users/5845016/nikolai-fedorov"}, "reply_to_user": {"reputation": 2324, "user_id": 5334131, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JU6Bo.jpg?s=128&g=1", "display_name": "Hellmar Becker", "link": "https://stackoverflow.com/users/5334131/hellmar-becker"}, "edited": false, "score": 0, "creation_date": 1453874421, "post_id": 35029633, "comment_id": 57785716, "body": "@HellmarBecker: yes i am beginner, and associated 0 = false, 1 = true, so my mistake. best way to understand maybe why it not works is to try the code and see what it does. thank you again. i try suggestion but still run into same issues..."}, {"owner": {"reputation": 545, "user_id": 3404790, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/284304e7a2bc28b900f1990d0cc45231?s=128&d=identicon&r=PG&f=1", "display_name": "novice", "link": "https://stackoverflow.com/users/3404790/novice"}, "edited": false, "score": 0, "creation_date": 1453874668, "post_id": 35029633, "comment_id": 57785806, "body": "There are just too many things wrong with your code, read all the comments and answers then rewrite it please"}, {"owner": {"reputation": 545, "user_id": 3404790, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/284304e7a2bc28b900f1990d0cc45231?s=128&d=identicon&r=PG&f=1", "display_name": "novice", "link": "https://stackoverflow.com/users/3404790/novice"}, "edited": false, "score": 0, "creation_date": 1453874924, "post_id": 35029633, "comment_id": 57785891, "body": "@NikolaiFedorov - still gives the wrong output, doesnt it"}, {"owner": {"reputation": 1892, "user_id": 3897657, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JrpEY.png?s=128&g=1", "display_name": "Marc Khadpe", "link": "https://stackoverflow.com/users/3897657/marc-khadpe"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1453875020, "post_id": 35029633, "comment_id": 57785915, "body": "What would be most helpful to get a better answer is providing sample input, expected output, and actual output as @kaylum suggested. It is unclear what you&#39;re trying to do. Do you just want to change one particular number in the input file to another?"}], "answers": [{"tags": [], "owner": {"reputation": 1892, "user_id": 3897657, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JrpEY.png?s=128&g=1", "display_name": "Marc Khadpe", "link": "https://stackoverflow.com/users/3897657/marc-khadpe"}, "is_accepted": false, "score": 1, "last_activity_date": 1453874471, "last_edit_date": 1453874471, "creation_date": 1453873835, "answer_id": 35029767, "question_id": 35029633, "link": "https://stackoverflow.com/questions/35029633/char-changing-neighbor/35029767#35029767", "title": "Char changing neighbor", "body": "<p>This is an error.</p>\n\n<blockquote>\n<pre><code>if(strncmp(&amp;c, hexVal, 2) == 1) {\n</code></pre>\n</blockquote>\n\n<p>The first argument to <code>strncmp()</code> is supposed to be a NULL-terminated string. However, you are passing it a pointer to a single character. I don't understand what your <code>convert_to_hex()</code> function is trying to accomplish, otherwise I could suggest an alternative.</p>\n\n<p>To determine the file length, just check if the return value from <code>fgetc()</code> is <code>EOF</code>. <code>EOF</code> is a special value that indicates you're at the end of the file.</p>\n\n<pre><code>int c = fgetc(fp); // declare an int to hold the return value from fgetc()\nint fileLength = 0; // keep track of the file length\nwhile(c != EOF) { // repeat while we're not at the end of the file\n    c = convert_to_hex(c);\n    printf(\"%02x \", c);\n    c = fgetc(fp); // get the next character\n    fileLength++; // increment fileLength for each character of the file.\n}\n// we're done! - fileLength now holds the length of the file\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 5845016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/554ed009cfb94f420f78ca20db2c5eda?s=128&d=identicon&r=PG&f=1", "display_name": "Nikolai Fedorov", "link": "https://stackoverflow.com/users/5845016/nikolai-fedorov"}, "is_accepted": false, "score": 1, "last_activity_date": 1453876598, "last_edit_date": 1495540346, "creation_date": 1453876598, "answer_id": 35030347, "question_id": 35029633, "link": "https://stackoverflow.com/questions/35029633/char-changing-neighbor/35030347#35030347", "title": "Char changing neighbor", "body": "<p>it turns out the answer was very simple, changing my convert_hex to:</p>\n\n<pre><code>int convert_to_hex(char c)\n{\n    if (c == 0x69) {\n        c = c + 1;\n    }\n    return c;\n}\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/a/7767450/5845016\">this answer</a> is what solved it for me. thanks everyone else too.</p>\n"}], "owner": {"reputation": 11, "user_id": 5845016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/554ed009cfb94f420f78ca20db2c5eda?s=128&d=identicon&r=PG&f=1", "display_name": "Nikolai Fedorov", "link": "https://stackoverflow.com/users/5845016/nikolai-fedorov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1454577992, "creation_date": 1453873134, "last_edit_date": 1454577992, "question_id": 35029633, "link": "https://stackoverflow.com/questions/35029633/char-changing-neighbor", "title": "Char changing neighbor", "body": "<p>I have a few issues with my code which I'm not sure to understand. I read in a file (you can try with any file) to get hex values. I try to find certain hex values and change them - which works sort of, but it's very later than it should be. Example would be:</p>\n\n<pre><code>0xAA 0xAB 0xAC 0xAD 0XAE ... 0XCD 0xCE\n</code></pre>\n\n<p>I would want to change 0xAB, but my code changes 0XCD. not sure why this is happening, but maybe I'm doing it wrong way. also is there a way to get the file length automatically? I just put a buffer that is part of the file, but I would like to get real length.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n#define FLEN 512\n\nint convert_to_hex(char c);\n\nint main(int argc, char *argv[]) {\n\n    char c;\n    int i = 0;\n\n    FILE *fp = fopen(argv[1],\"rb\");\n\n    for(i = 0; i &lt; FLEN; i++) {\n        c = convert_to_hex(fgetc(fp));\n        printf(\"%02x \", c);\n    }\n    printf(\"\\n\");\n}\n\nint convert_to_hex(char c)\n{\n    char hexVal[3];\n    sprintf(hexVal, \"%02X\", 0x69);\n\n    if(strncmp(&amp;c, hexVal, 2) == 1) {\n        printf(\"&gt;&gt; %s \", hexVal); // indicate where it change (late)\n        return c + 1;\n    }\n    return c;\n}\n</code></pre>\n"}, {"tags": ["c", "opencv", "geometry", "image-recognition", "opencv-contour"], "comments": [{"owner": {"reputation": 35699, "user_id": 2056772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/574eff69e66401997eecd2ac405053c1?s=128&d=identicon&r=PG", "display_name": "berak", "link": "https://stackoverflow.com/users/2056772/berak"}, "edited": false, "score": 2, "creation_date": 1453874486, "post_id": 35029550, "comment_id": 57785737, "body": "opencv&#39;s c-api is DEAD. code like that should no more be written. please use the c++ api."}, {"owner": {"reputation": 19, "user_id": 4502780, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-meoZ-YsbbTQ/AAAAAAAAAAI/AAAAAAAAAPo/eMHV153Mpek/photo.jpg?sz=128", "display_name": "anki gawde", "link": "https://stackoverflow.com/users/4502780/anki-gawde"}, "reply_to_user": {"reputation": 35699, "user_id": 2056772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/574eff69e66401997eecd2ac405053c1?s=128&d=identicon&r=PG", "display_name": "berak", "link": "https://stackoverflow.com/users/2056772/berak"}, "edited": false, "score": 0, "creation_date": 1453874723, "post_id": 35029550, "comment_id": 57785820, "body": "@berak i do know it even if i shift in c++ the question remains the same. above allvthis a small code a big project already done in c. :-("}, {"owner": {"reputation": 3557, "user_id": 336557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Nq93S.jpg?s=128&g=1", "display_name": "Mahm00d", "link": "https://stackoverflow.com/users/336557/mahm00d"}, "edited": false, "score": 0, "creation_date": 1453883879, "post_id": 35029550, "comment_id": 57790009, "body": "Can you be more specific on defect circles: Do they have non-uniform thickness in themselves (on side is thicker than the other), or they&#39;re thicker/thinner than other circles?"}, {"owner": {"reputation": 19, "user_id": 4502780, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-meoZ-YsbbTQ/AAAAAAAAAAI/AAAAAAAAAPo/eMHV153Mpek/photo.jpg?sz=128", "display_name": "anki gawde", "link": "https://stackoverflow.com/users/4502780/anki-gawde"}, "reply_to_user": {"reputation": 3557, "user_id": 336557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Nq93S.jpg?s=128&g=1", "display_name": "Mahm00d", "link": "https://stackoverflow.com/users/336557/mahm00d"}, "edited": false, "score": 0, "creation_date": 1453887336, "post_id": 35029550, "comment_id": 57792114, "body": "@Mahm00d non-uniform thickness in themselves"}, {"owner": {"reputation": 3225, "user_id": 5294258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c5270296f9c4ec3fae89195328e9bc7?s=128&d=identicon&r=PG&f=1", "display_name": "sturkmen", "link": "https://stackoverflow.com/users/5294258/sturkmen"}, "edited": false, "score": 0, "creation_date": 1453904470, "post_id": 35029550, "comment_id": 57804005, "body": "could you post the original image too"}, {"owner": {"reputation": 19, "user_id": 4502780, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-meoZ-YsbbTQ/AAAAAAAAAAI/AAAAAAAAAPo/eMHV153Mpek/photo.jpg?sz=128", "display_name": "anki gawde", "link": "https://stackoverflow.com/users/4502780/anki-gawde"}, "reply_to_user": {"reputation": 3225, "user_id": 5294258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c5270296f9c4ec3fae89195328e9bc7?s=128&d=identicon&r=PG&f=1", "display_name": "sturkmen", "link": "https://stackoverflow.com/users/5294258/sturkmen"}, "edited": false, "score": 0, "creation_date": 1453958193, "post_id": 35029550, "comment_id": 57830775, "body": "@sturkmen yes i hv uploaded the original img"}], "answers": [{"tags": [], "owner": {"reputation": 3557, "user_id": 336557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Nq93S.jpg?s=128&g=1", "display_name": "Mahm00d", "link": "https://stackoverflow.com/users/336557/mahm00d"}, "is_accepted": false, "score": 0, "last_activity_date": 1453889206, "creation_date": 1453889206, "answer_id": 35034285, "question_id": 35029550, "link": "https://stackoverflow.com/questions/35029550/find-thickness-of-the-circle-detected-from-contour/35034285#35034285", "title": "Find thickness of the circle detected from contour?", "body": "<p>I can think of two ideas:</p>\n\n<p><strong>Using <em>perimeter</em>:</strong></p>\n\n<ol>\n<li>Find the <a href=\"http://docs.opencv.org/master/d3/dc0/group__imgproc__shape.html#ga8ce13c24081bbc7151e9326f412190f1\" rel=\"nofollow\">enclosing circle</a> of your shape (the ring).</li>\n<li>Compare its perimeter to the shape's outer perimeter. If the shape has any abnormalities along the edge, its perimeter would be different (by a certain threshold you define)</li>\n<li>The same can be done between the inner perimeter and the enclosing circle of the black inside (to find abnormalities along the inner side).</li>\n</ol>\n\n<hr>\n\n<p><strong>Using <em>area</em>:</strong></p>\n\n<ol>\n<li>Find the inner and outer enclosing circle of your ring.</li>\n<li>Subtract the two areas to find the optimal area of the ring.</li>\n<li>Compare this to the actual area of the ring and if different by a threshold, the circle is probably defect.</li>\n</ol>\n\n<hr>\n\n<p>Of course, the first algorithm is more sensitive to the bumps which can be a good or a bad thing depending on your image and other conditions.</p>\n"}, {"comments": [{"owner": {"reputation": 19, "user_id": 4502780, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-meoZ-YsbbTQ/AAAAAAAAAAI/AAAAAAAAAPo/eMHV153Mpek/photo.jpg?sz=128", "display_name": "anki gawde", "link": "https://stackoverflow.com/users/4502780/anki-gawde"}, "edited": false, "score": 0, "creation_date": 1454318351, "post_id": 35076352, "comment_id": 57973463, "body": "i am able to get till here but i want to detect if its is defected circle"}], "tags": [], "owner": {"reputation": 3225, "user_id": 5294258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c5270296f9c4ec3fae89195328e9bc7?s=128&d=identicon&r=PG&f=1", "display_name": "sturkmen", "link": "https://stackoverflow.com/users/5294258/sturkmen"}, "is_accepted": false, "score": 0, "last_activity_date": 1454038015, "creation_date": 1454038015, "answer_id": 35076352, "question_id": 35029550, "link": "https://stackoverflow.com/questions/35029550/find-thickness-of-the-circle-detected-from-contour/35076352#35076352", "title": "Find thickness of the circle detected from contour?", "body": "<p>as a suggestion you can try</p>\n\n<pre><code>.\n.\n.\ncvAnd(srcimg,subimg,finalimage,0);\n\ncvSmooth(finalimage,erodeimg,CV_GAUSSIAN,9,9);\ncvThreshold(erodeimg,subimg,130,255,cv::THRESH_BINARY);\ncvShowImage(\"final image\",finalimage);\ncvShowImage(\"Smoothed and Threshold \",subimg);\n\ncvWaitKey(0);\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/zkLdg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zkLdg.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 19, "user_id": 4502780, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-meoZ-YsbbTQ/AAAAAAAAAAI/AAAAAAAAAPo/eMHV153Mpek/photo.jpg?sz=128", "display_name": "anki gawde", "link": "https://stackoverflow.com/users/4502780/anki-gawde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 438, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1546523227, "creation_date": 1453872647, "last_edit_date": 1546523227, "question_id": 35029550, "link": "https://stackoverflow.com/questions/35029550/find-thickness-of-the-circle-detected-from-contour", "title": "Find thickness of the circle detected from contour?", "body": "<p><a href=\"https://i.stack.imgur.com/Rf8zR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Rf8zR.png\" alt=\"want to detect the defect around this image\"></a>I am trying to detect the thickness of the circle which I have received from the code below, but I am unable to do so.</p>\n\n<p>My basic idea is to move through the circle and if at any point the thickness is less than the other side, it means it's a defected circle.</p>\n\n<p>I found this on google but I don't know how to put it in code:</p>\n\n<p><a href=\"http://answers.opencv.org/question/28180/measuring-edge-thickness-using-opencv\" rel=\"nofollow noreferrer\">http://answers.opencv.org/question/28180/measuring-edge-thickness-using-opencv</a></p>\n\n<p>Code:</p>\n\n<pre><code>    IplImage* mainimg = cvLoadImage( \"C:\\\\3.png\",CV_LOAD_IMAGE_GRAYSCALE); //change the name (image.jpg) according to your Image filename.\n    if (!mainimg)\n  {\n    cout &lt;&lt;\"Image can NOT Load!!!\";\n    return 1;\n  }\n\n    IplImage* srcimg=cvCreateImage(cvGetSize(mainimg),mainimg-&gt;depth,1);\n    IplImage* inrangeimg=cvCreateImage(cvGetSize(mainimg),mainimg-&gt;depth,1);\n    IplImage* erodeimg=cvCreateImage(cvGetSize(mainimg),mainimg-&gt;depth,1);\n    IplImage* erodeimg1=cvCreateImage(cvGetSize(mainimg),mainimg-&gt;depth,1);\nIplImage* subimg=cvCreateImage(cvGetSize(mainimg),mainimg-&gt;depth,1);\nIplImage* finalimage=cvCreateImage(cvGetSize(mainimg),mainimg-&gt;depth,1);\nIplImage* finalimage1=cvCreateImage(cvGetSize(mainimg),mainimg-&gt;depth,1);\n\n\n    cvAdaptiveThreshold(mainimg,srcimg,255,CV_ADAPTIVE_THRESH_MEAN_C,CV_THRESH_BINARY,11,-23);\n\n    cvInRangeS(mainimg,cvScalar(50,50,50),cvScalar(255,255,255),inrangeimg);\n\n    cvErode(inrangeimg,erodeimg,0,8);\n    cvSub(inrangeimg,erodeimg,subimg,0);\n\n    cvAnd(srcimg,subimg,finalimage,0);\n\n    cvShowImage(\"final\",finalimage);\n    cvWaitKey(0);\n</code></pre>\n\n<p>After this, I know I need to find the contour but how can I get the thickness of the circle and travel through the circle to get the defected one? I don't want to get the pixel count and detect the defected circle...</p>\n\n<p>When I run the above code, I get this <a href=\"https://i.stack.imgur.com/0PWnO.png\" rel=\"nofollow noreferrer\">image</a></p>\n"}, {"tags": ["c", "linux", "libxml2"], "answers": [{"tags": [], "owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "is_accepted": false, "score": 0, "last_activity_date": 1453991405, "creation_date": 1453991405, "answer_id": 35064182, "question_id": 35029549, "link": "https://stackoverflow.com/questions/35029549/how-to-modify-xml-file-and-save-the-changes-using-libxml2-in-c/35064182#35064182", "title": "How to modify xml file and save the changes using libxml2 in C?", "body": "<p>With a streaming API like <em>xmlreader</em>, you can only parse documents. If you want to modify and write a document, use the \"normal\" non-streaming API to read a whole document (<code>xmlDoc</code>) into memory (using <a href=\"http://www.xmlsoft.org/html/libxml-parser.html#xmlParseFile\" rel=\"nofollow\"><code>xmlParseFile</code></a>, <a href=\"http://www.xmlsoft.org/html/libxml-parser.html#xmlReadFile\" rel=\"nofollow\"><code>xmlReadFile</code></a>, etc.), make the required changes, then write the document using <a href=\"http://www.xmlsoft.org/html/libxml-tree.html#xmlDocDump\" rel=\"nofollow\"><code>xmlDocDump</code></a>.</p>\n\n<p>To locate the nodes that you want to change, the <a href=\"http://www.xmlsoft.org/html/libxml-xpath.html\" rel=\"nofollow\">XPath API</a> is useful. Have a look at the <a href=\"http://www.xmlsoft.org/examples/xpath2.c\" rel=\"nofollow\"><code>xpath2.c</code> example code</a> and the <a href=\"http://www.xmlsoft.org/examples/\" rel=\"nofollow\">other examples</a>.</p>\n"}], "owner": {"reputation": 1, "user_id": 5844991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4c447f6d20dca7834f4286cd9e0a55d?s=128&d=identicon&r=PG&f=1", "display_name": "Rajasekar", "link": "https://stackoverflow.com/users/5844991/rajasekar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 472, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1453991405, "creation_date": 1453872644, "last_edit_date": 1453886896, "question_id": 35029549, "link": "https://stackoverflow.com/questions/35029549/how-to-modify-xml-file-and-save-the-changes-using-libxml2-in-c", "title": "How to modify xml file and save the changes using libxml2 in C?", "body": "<p>The value is not updated in the actual xml file. How to make the changes updated in the xml file? Thanks.</p>\n\n<pre><code>xmlTextReader *xmlReaderPtr = NULL;\nxmlNodePtr curNode;\n\nxmlReaderPtr = xmlReaderForFd(fd, NULL, NULL, XML_PARSE_NOBLANKS);\ncurNode      = xmlTextReaderCurrentNode(xmlReaderPtr);\nxmlNodeSetContent(curNode, \"value\");\n</code></pre>\n"}, {"tags": ["c", "pointers", "segmentation-fault"], "comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 2, "creation_date": 1453872634, "post_id": 35029515, "comment_id": 57785046, "body": "<code>char *binary[33];</code> declares an <i>array-of-pointers</i> -- none of which are allocated. <code>DecToBin(dec,*binary)</code> is the same as <code>DecToBin(dec, binary[0])</code>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1453876636, "post_id": 35029515, "comment_id": 57786536, "body": "As currently written, <code>char *binary[];</code> won&#39;t compile; you can&#39;t define an array in the body of a function without a non-zero size (GCC may permit a zero size, but that&#39;s a compiler extension).  You actually want <code>char binary[33];</code> and then pass <code>binary</code> (not <code>*binary)</code> to your function."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1453922334, "post_id": 35029515, "comment_id": 57816502, "body": "when writing/posting code, do no use tabs for indenting.  Because each wordprocessor/editor has the tab stops/tab widths set differently  Suggest using 4 spaces for each indent level as that is wide enough to be visible even with variable width fonts and still allows many levels of indenting across the page"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1453922504, "post_id": 35029515, "comment_id": 57816594, "body": "this line: <code>DecToBin(dec,*binary);</code> is dereferencing the array/pointer <code>binary[]</code>  Suggest: <code>DecToBin(dec,binary);</code>.   This is because in C, an array name (in most instances) degrades to the address of the first byte of the array."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1453922627, "post_id": 35029515, "comment_id": 57816672, "body": "in general, the code should always check the returned value (not the parameter value) from <code>scanf()</code> to assure the operation was successful.  In this case, the returned value should be 1."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1453922888, "post_id": 35029515, "comment_id": 57816841, "body": "this line: <code>binary[counter]=dec%2;</code> has the problem that the resulting array <code>binary[]</code> will contain the binary digits [0|] is the reverse order.  I.E. the least significant bit will be first, rather than last AND the result will be left justified within the array.   Note: no space was ever allocated for the array, only for an array of pointers, so the code, when run will contain undefined behaviour (writing bytes to some random memory) and will lead to a seg fault event"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1453922963, "post_id": 35029515, "comment_id": 57816881, "body": "nothing in the posted code is using anything from <code>math.h</code> so that header file should not be <code>#include</code>d"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1453923751, "post_id": 35029515, "comment_id": 57817357, "body": "<code>dec</code> is declared as <code>unsigned int</code> so the scanf() format specifier needs to be <code>%u</code> rather than <code>%d</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1453925100, "post_id": 35029515, "comment_id": 57818123, "body": "the line: <code>binary[counter]= dec%2;</code> is placing 0x00 and/or 0x01 into the bytes of <code>binary[]</code> array what it should be placing is 0x30 and/or 0x31 which are the characters &#39;0&#39; and &#39;1&#39;.  Suggest: <code>binary[counter]= (char)((dec%2)+0x30);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 1, "last_activity_date": 1453872596, "creation_date": 1453872596, "answer_id": 35029543, "question_id": 35029515, "link": "https://stackoverflow.com/questions/35029515/c-passing-pointers-to-be-modified-causing-segmentation-faults/35029543#35029543", "title": "C. Passing pointers to be modified causing segmentation faults", "body": "<pre><code>char *binary[33]\n</code></pre>\n\n<p>binary is array of pointers. So each element in it is a pointer.</p>\n\n<p>The segmentation fault is because you are not initializing your array and trying to use it.</p>\n\n<p>You are dereferencing a pointer which is not pointing to any valid memory location.</p>\n\n<p>You need to allocate memory to the members of the array before using them</p>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1453933341, "post_id": 35047211, "comment_id": 57822764, "body": "You can use <code>CHAR_BIT</code> instead of <code>8</code>   (slightly more self-documenting)"}, {"owner": {"reputation": 368, "user_id": 10735689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aPtkk.png?s=128&g=1", "display_name": "ShivYaragatti", "link": "https://stackoverflow.com/users/10735689/shivyaragatti"}, "edited": false, "score": 0, "creation_date": 1544016270, "post_id": 35047211, "comment_id": 94126073, "body": "in fact will be waiting for input, just provide input hit  return and also you can add some think like printf(&quot;Please provide inputs&quot;) in beginning  for while(1) {}, it will be useful know it is waiting for input"}], "tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 1, "last_activity_date": 1453926190, "last_edit_date": 1453926190, "creation_date": 1453925873, "answer_id": 35047211, "question_id": 35029515, "link": "https://stackoverflow.com/questions/35029515/c-passing-pointers-to-be-modified-causing-segmentation-faults/35047211#35047211", "title": "C. Passing pointers to be modified causing segmentation faults", "body": "<p>incorporating all the comments, incorporating error checking, etc. the posted code becomes :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;  // exit(), EXIT_FAILURE\n#include &lt;string.h&gt;  // memset()\n\n\n// prototypes\nvoid DecToBin(unsigned int, char *binary);\n\nint main()\n{\n        unsigned int dec;\n        char binary[sizeof(int)*8 +1];\n\n\n        while(1)\n        {\n                if( 1 != scanf(\"%u\", &amp;dec) )\n                { // then scanf failed\n                    perror( \"scanf for decimal value failed\" );\n                    exit( EXIT_FAILURE );\n                }\n\n                // implied else, scanf successful\n\n                DecToBin(dec, binary);\n                printf(\"In binary is \");\n                printf(\"%s\\n\",binary);\n        }\n}\n\n\nvoid DecToBin(unsigned int dec, char *binary)\n{\n        size_t counter= sizeof(int)*8;\n\n        memset( binary, ' ', counter );\n        binary[ counter ] = '\\0'; // terminate string\n        counter--;\n\n        // do...while allows for dec being 0\n        do\n        {\n                binary[counter]= (char)((dec%2)+ 0x30);\n                dec /= 2;\n                counter--;\n        }  while(dec);\n}\n</code></pre>\n\n<p>which still has the shortcoming that the user is left with a blank screen and a blinking cursor.  I.E. the code should be prompting the user, by requesting the input value.</p>\n"}], "owner": {"reputation": 29, "user_id": 5844958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/355bec6ba9ea641a0e995e088607c48d?s=128&d=identicon&r=PG&f=1", "display_name": "Jurden", "link": "https://stackoverflow.com/users/5844958/jurden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1453926190, "creation_date": 1453872442, "question_id": 35029515, "link": "https://stackoverflow.com/questions/35029515/c-passing-pointers-to-be-modified-causing-segmentation-faults", "title": "C. Passing pointers to be modified causing segmentation faults", "body": "<p>I am making a decimal to binary converter in C for a class. I want to pass a char array to my function as well as the the decimal as an int.\nie void DtoB(int decimal, char *array);\nDtoB will do the math and modify array to be the binary value. Ideally by giving it int values. Main() will just scanf(decimal), DtoB(decimal,array), and printf(array).</p>\n\n<p>Here is what I have. This just returns a segmentation fault</p>\n\n<pre><code>1 #include &lt;stdio.h&gt;\n2 #include &lt;math.h&gt;\n3\n4 void DecToBin(unsigned int, char *binary);\n5\n6 int main()\n7 {\n8         unsigned int dec;\n9         char *binary[];\n10         while(1) {\n11                 scanf(\"%d\", &amp;dec);\n12                 DecToBin(dec,*binary);\n13                 printf(\"In binary is \");\n14                 printf(\"%s\\n\",binary);\n15         }\n16 }\n17 void DecToBin(unsigned int dec, char *binary)\n18 {\n19         int counter=0;\n20         while(dec) {\n21                 binary[counter]=dec%2;\n22                 dec/=2;\n23                 counter++;\n24         }\n25 }\n</code></pre>\n\n<p>I want it done like this since this seems like the best way to be able to do 32 bit integers, while keeping the array at the minimum size.\nSorry if I killed formatting. Any help is appreciated. </p>\n"}, {"tags": ["c", "database", "sqlite", "save"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1453870216, "post_id": 35028563, "comment_id": 57784328, "body": "I think the answer is (like many things in computing) &quot;it depends&quot;. If it is a small amount of simple data then a file (text or binary) may do just fine. So unless the full description of the data and how it will be used is provided there isn&#39;t a single best answer to your question. For some further thoughts along those lines see <a href=\"https://stackoverflow.com/questions/4322794/how-to-save-data-in-c-c\">How to save data in C/C++?</a>"}, {"owner": {"reputation": 337, "user_id": 1611819, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/65fb26430fb4571cfc82741342af1bcc?s=128&d=identicon&r=PG", "display_name": "inckka", "link": "https://stackoverflow.com/users/1611819/inckka"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1453872911, "post_id": 35028563, "comment_id": 57785131, "body": "@kaylum More details added."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1453876466, "post_id": 35028563, "comment_id": 57786476, "body": "There are endless variations on the theme.  You could argue that documents such as PDF files, or LibreOffice/OpenOffice/Microsoft Office documents are examples \u2014 and fiendishly complex ones at that.  People have endless sets of configuration files; your data could be part of a configuration file.  You could save it in a separate file. The format could be simple text, or JSON, or XML, or almost any variation. If you have a formal DB around for use with the application, then storing the data in that might make sense. You probably should be using a fairly simple text format for what you describe."}], "answers": [{"tags": [], "owner": {"reputation": 1530, "user_id": 4187445, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c271c8ddf059d4a47378dcfee52373c6?s=128&d=identicon&r=PG", "display_name": "jyvet", "link": "https://stackoverflow.com/users/4187445/jyvet"}, "is_accepted": true, "score": 1, "last_activity_date": 1453877238, "last_edit_date": 1453877238, "creation_date": 1453876141, "answer_id": 35030240, "question_id": 35028563, "link": "https://stackoverflow.com/questions/35028563/what-is-a-common-way-of-saving-and-retrieving-simple-data-between-a-c-program-cl/35030240#35030240", "title": "What is a common way of saving and retrieving simple data between a C program closing and restarting?", "body": "<p><strong>The straightforward way</strong></p>\n\n<p>The easiest way would be to put the variables you want to store in a <code>struct</code>. Then you can output/load the content of the struct in/from a file (in binary mode). The pro of this technique is that you do not have to go through all your variables. I would definitely go for this solution if you can close your program properly. </p>\n\n<p><strong>Checkpoint/Restart libraries</strong></p>\n\n<p>In High Performance Computing, when launching a simulation code which takes a long time to execute (or/and using a large amount of compute nodes), it is quite common to use checkpoint/restart libraries. \nIf there is a failure, the program may be restarted from the previous valid checkpoint. It is used more often when something may go wrong during the execution. </p>\n"}], "owner": {"reputation": 337, "user_id": 1611819, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/65fb26430fb4571cfc82741342af1bcc?s=128&d=identicon&r=PG", "display_name": "inckka", "link": "https://stackoverflow.com/users/1611819/inckka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 339, "favorite_count": 0, "accepted_answer_id": 35030240, "answer_count": 1, "score": 0, "last_activity_date": 1455000248, "creation_date": 1453866735, "last_edit_date": 1455000248, "question_id": 35028563, "link": "https://stackoverflow.com/questions/35028563/what-is-a-common-way-of-saving-and-retrieving-simple-data-between-a-c-program-cl", "title": "What is a common way of saving and retrieving simple data between a C program closing and restarting?", "body": "<p>There's a simple C application made using GTK+2.\nIt also has simple data on the interface, and the application needs to save the last used values before closing so that they can be loaded when the application starts again.</p>\n\n<p>I found a few methods to save load data.</p>\n\n<ol>\n<li>Saving a text file and load it.</li>\n<li>Using a DB.</li>\n</ol>\n\n<p>Since I'm a beginner with C, either way I need to do a RnD and start implementing.\nI need to know the best/standard/effective method which is used by C programming professionals for this kind of scenario.</p>\n\n<p><strong>Edit: Nature of data</strong></p>\n\n<p>Data which need to be saved and retrieved are as follows.</p>\n\n<ul>\n<li>Several Double Values</li>\n<li>Several Char Values or Strings</li>\n<li>Few Boolean Values</li>\n</ul>\n\n<p>Above data is used by the application to draw a diagram on the interface. When the application starts, it should draw the diagram using the old values.</p>\n"}, {"tags": ["c", "linux", "sonarqube"], "answers": [{"comments": [{"owner": {"reputation": 20794, "user_id": 2662707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ruzzB.jpg?s=128&g=1", "display_name": "G. Ann - SonarSource Team", "link": "https://stackoverflow.com/users/2662707/g-ann-sonarsource-team"}, "edited": false, "score": 0, "creation_date": 1453878531, "post_id": 35028526, "comment_id": 57787287, "body": "This link may be useful: <a href=\"http://www.sonarsource.com/products/plugins/languages/cpp/\" rel=\"nofollow noreferrer\">sonarsource.com/products/plugins/languages/cpp</a>"}], "tags": [], "owner": {"reputation": 16010, "user_id": 1568658, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/FPSGe.jpg?s=128&g=1", "display_name": "user218867", "link": "https://stackoverflow.com/users/1568658/user218867"}, "is_accepted": true, "score": 2, "last_activity_date": 1453866470, "creation_date": 1453866470, "answer_id": 35028526, "question_id": 35028403, "link": "https://stackoverflow.com/questions/35028403/is-it-possible-to-analyze-linux-c-project-with-sonarqube/35028526#35028526", "title": "Is it possible to analyze Linux C project with SonarQube?", "body": "<p>According to <a href=\"https://en.wikipedia.org/wiki/SonarQube\" rel=\"nofollow\">https://en.wikipedia.org/wiki/SonarQube</a>, it support c/c++, and is cross-platform, so you can do it I think.</p>\n"}], "owner": {"reputation": 2654, "user_id": 1242148, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb9ede7dac66c8f5b986fdfaa032518c?s=128&d=identicon&r=PG", "display_name": "Mindaugas Jaraminas", "link": "https://stackoverflow.com/users/1242148/mindaugas-jaraminas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 35028526, "answer_count": 1, "score": 0, "last_activity_date": 1453866470, "creation_date": 1453865759, "question_id": 35028403, "link": "https://stackoverflow.com/questions/35028403/is-it-possible-to-analyze-linux-c-project-with-sonarqube", "title": "Is it possible to analyze Linux C project with SonarQube?", "body": "<p>I have a small Linux project written in C is it possible to analyze it with a SonarQube?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "edited": false, "score": 7, "creation_date": 1453865617, "post_id": 35028372, "comment_id": 57783005, "body": "You are accessing uninitialized variables. That is undefined behavior."}, {"owner": {"reputation": 84240, "user_id": 283863, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vItjB.png?s=128&g=1", "display_name": "Derek \u6715\u6703\u529f\u592b", "link": "https://stackoverflow.com/users/283863/derek-%e6%9c%95%e6%9c%83%e5%8a%9f%e5%a4%ab"}, "edited": false, "score": 0, "creation_date": 1453865788, "post_id": 35028372, "comment_id": 57783056, "body": "You are basically asking why <code>int a; printf(&quot;%d&quot;, a)</code> is different every time."}, {"owner": {"reputation": 16010, "user_id": 1568658, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/FPSGe.jpg?s=128&g=1", "display_name": "user218867", "link": "https://stackoverflow.com/users/1568658/user218867"}, "edited": false, "score": 0, "creation_date": 1453865806, "post_id": 35028372, "comment_id": 57783060, "body": "Did you mean the result is different in different execution? Or in 1 execution rawtime &amp; t2 is different?"}, {"owner": {"reputation": 442, "user_id": 2556628, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/af646ee19f9771df0b76fe42ce7df699?s=128&d=identicon&r=PG", "display_name": "anupamb", "link": "https://stackoverflow.com/users/2556628/anupamb"}, "edited": false, "score": 0, "creation_date": 1453866492, "post_id": 35028372, "comment_id": 57783279, "body": "Yes. My question is why rawtime not equal to t2. I am not asking why it is different in different executions. I am especially confused because the condition &quot;(rawtime == t2)&quot; is true."}, {"owner": {"reputation": 16010, "user_id": 1568658, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/FPSGe.jpg?s=128&g=1", "display_name": "user218867", "link": "https://stackoverflow.com/users/1568658/user218867"}, "edited": false, "score": 0, "creation_date": 1453866574, "post_id": 35028372, "comment_id": 57783308, "body": "@anupamb In that case, it should be the same, I can&#39;t think why not."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1453866694, "post_id": 35028372, "comment_id": 57783330, "body": "@anupamb Your code has a bug that causes it not to do what you expect. Fix the bug and they mystery will go away."}, {"owner": {"reputation": 442, "user_id": 2556628, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/af646ee19f9771df0b76fe42ce7df699?s=128&d=identicon&r=PG", "display_name": "anupamb", "link": "https://stackoverflow.com/users/2556628/anupamb"}, "edited": false, "score": 0, "creation_date": 1453866703, "post_id": 35028372, "comment_id": 57783333, "body": "It&#39;s not. That&#39;s the problem. I am using Visual Studio 2010, if that matters."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1453866754, "post_id": 35028372, "comment_id": 57783347, "body": "Your question is basically &quot;why should two variables that both hold a value that was never initialized not compare as equal&quot;. And the answer is simply that there&#39;s no reason why they should, so any result is reasonable."}, {"owner": {"reputation": 442, "user_id": 2556628, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/af646ee19f9771df0b76fe42ce7df699?s=128&d=identicon&r=PG", "display_name": "anupamb", "link": "https://stackoverflow.com/users/2556628/anupamb"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1453866818, "post_id": 35028372, "comment_id": 57783370, "body": "@David Schwartz Is the bug in the printf part?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1453866879, "post_id": 35028372, "comment_id": 57783384, "body": "@anupamb It&#39;s everywhere. Yes, it&#39;s in <code>printf</code> too because that reads variables whose value has not been initialized."}, {"owner": {"reputation": 442, "user_id": 2556628, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/af646ee19f9771df0b76fe42ce7df699?s=128&d=identicon&r=PG", "display_name": "anupamb", "link": "https://stackoverflow.com/users/2556628/anupamb"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1453866917, "post_id": 35028372, "comment_id": 57783395, "body": "@David Schwartz I thought it gets initialized to some unknow value (not in the hands of the programmer). But whatever that value is, it should remain so, when the variable is assigned to another. Isn&#39;t that correct?"}, {"owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "edited": false, "score": 0, "creation_date": 1453866978, "post_id": 35028372, "comment_id": 57783413, "body": "If it is unknown, how can you expect it to not be same? It can be same, or not same, or in a quantum state being same and not same at the same time. :)"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1453867462, "post_id": 35028372, "comment_id": 57783554, "body": "@anupamb Short answer: No, but for very complex reasons. If you don&#39;t want to understand register caching and trap representations, just think of it as really being uninitialized. See my answer."}, {"owner": {"reputation": 16010, "user_id": 1568658, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/FPSGe.jpg?s=128&g=1", "display_name": "user218867", "link": "https://stackoverflow.com/users/1568658/user218867"}, "edited": false, "score": 0, "creation_date": 1453869224, "post_id": 35028372, "comment_id": 57784065, "body": "@anupamb On linux, with gcc, each time run your code, the result is the same. But u are using windows, I think there are implementation differences."}], "answers": [{"tags": [], "owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "is_accepted": false, "score": 2, "last_activity_date": 1453866838, "creation_date": 1453866838, "answer_id": 35028584, "question_id": 35028372, "link": "https://stackoverflow.com/questions/35028372/why-does-the-following-code-give-different-answers/35028584#35028584", "title": "Why does the following code give different answers?", "body": "<p>You are accessing uninitialized variables. That is undefined behavior.</p>\n\n<hr>\n\n<p><strong>why it is different in different executions. I am especially confused because the condition \"(rawtime == t2)\" is true.</strong></p>\n\n<p>There is not any question of <em>why</em>, when there is an undefined behavior being invoked. The variables have been declared and are thus having a place in the memory. That place could contain garbage value from previous program execution, or any other value. It might also happen that the values somehow, by some co-incident are same for those 2 variables, so your <code>if()</code> condition is coming as <code>True</code>.</p>\n\n<p>But all these things on one side, one cannot question the flow of a program or statement when it is invoking undefined behavior, because to question is to query in the standards, and when the standard itself does not define it, where will anyone get an explanation from.</p>\n"}, {"comments": [{"owner": {"reputation": 442, "user_id": 2556628, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/af646ee19f9771df0b76fe42ce7df699?s=128&d=identicon&r=PG", "display_name": "anupamb", "link": "https://stackoverflow.com/users/2556628/anupamb"}, "edited": false, "score": 0, "creation_date": 1453868031, "post_id": 35028619, "comment_id": 57783727, "body": "Thanks for the answer. I am trying to look into this problem from a memory perspective too. The variable is already allocated a memory address (which is not changing). So I believe the 32 (or 64 bits) in that location are something (although uninitialized). I may be wrong in assuming that the &#39;=&#39; is doing some bit-level assignment to another variable (here t2), but that may be a naive mistake. I will try to have a better understanding of uninitialized variable. Thanks!"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 442, "user_id": 2556628, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/af646ee19f9771df0b76fe42ce7df699?s=128&d=identicon&r=PG", "display_name": "anupamb", "link": "https://stackoverflow.com/users/2556628/anupamb"}, "edited": false, "score": 0, "creation_date": 1453868473, "post_id": 35028619, "comment_id": 57783852, "body": "@anupamb Why do you say it&#39;s allocated a memory address? It never has a value assigned and its address is never taken. So when do you think it&#39;s assigned an address?! What operation do you think takes place that requires it to be assigned a memory address as opposed to, for example, being kept in a register for its entire life?"}, {"owner": {"reputation": 442, "user_id": 2556628, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/af646ee19f9771df0b76fe42ce7df699?s=128&d=identicon&r=PG", "display_name": "anupamb", "link": "https://stackoverflow.com/users/2556628/anupamb"}, "edited": false, "score": 0, "creation_date": 1453869086, "post_id": 35028619, "comment_id": 57784025, "body": "That&#39;s correct. My supposition is not necessarily correct. But I am guessing whether or not it&#39;s allocated memory (when just declared) is a compiler thing."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "reply_to_user": {"reputation": 442, "user_id": 2556628, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/af646ee19f9771df0b76fe42ce7df699?s=128&d=identicon&r=PG", "display_name": "anupamb", "link": "https://stackoverflow.com/users/2556628/anupamb"}, "edited": false, "score": 0, "creation_date": 1453910591, "post_id": 35028619, "comment_id": 57808729, "body": "@anupamb: On a conventional machine, your suppositions are basically correct.  On a conventional machine, &quot;uninitialzed&quot; means &quot;unpredictable, essentially random, might change from run to run, can&#39;t depend on it&quot;.  But it does not typically mean that the uninitialized value cannot even be inspected or copied.  David Schwartz&#39;s answers, though theoretically correct, refer to the abstract language of the C standard and to unusual concepts such as &quot;trap representations&quot; which are almost certainly not a factor on the machine you&#39;re using today."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1453912062, "post_id": 35028619, "comment_id": 57809780, "body": "@SteveSummit The thing is, he is specifically asking about a case where the atypical behavior is observed. So your choices are to either understand the unusual concepts to make sense of the C standard language or use common sense reasoning about a purely abstract machine."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1453912723, "post_id": 35028619, "comment_id": 57810250, "body": "@DavidSchwartz Unless it&#39;s just a <code>%ul</code> vs. <code>%lu</code> problem."}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": true, "score": 2, "last_activity_date": 1453867422, "last_edit_date": 1453867422, "creation_date": 1453867036, "answer_id": 35028619, "question_id": 35028372, "link": "https://stackoverflow.com/questions/35028372/why-does-the-following-code-give-different-answers/35028619#35028619", "title": "Why does the following code give different answers?", "body": "<p>Here's why they don't compare as equal:</p>\n\n<ol>\n<li><p><code>rawtime</code> is not initialized.</p></li>\n<li><p>Either <code>t2</code> is initialized or it is not.</p></li>\n<li><p>If <code>t2</code> is initialized, then we are comparing an initialized value to an uninitialized value. There's no reason to expect these to compare as equal.</p></li>\n<li><p>If <code>t2</code> is uninitialized, we are comparing two uninitialized variables. There's no reason to expect these to compare as equal</p></li>\n<li><p>So either way, there's no reason to expect these to compare as equal.</p></li>\n</ol>\n\n<p>To expect them to compare as equal, you have to invent some odd state for <code>t2</code> to be in that's, I don't even know what, initialized to an unspecified value? Uninitialized but guaranteed to compare equal to another uninitialized value? Or what?</p>\n\n<p>Whatever thought process lead you to expect these to compare as equal, it is incomprehensible to me.</p>\n\n<p>By the way, trying to glean this from the C standard is extremely difficult. It comes from a very obscure rule -- \"If the lvalue designates an object of automatic storage duration that could have been declared with the register storage class (never had its address taken), and that object is uninitialized (not declared with an initializer and no assignment to it has been performed prior to use), the behavior is undefined.\"</p>\n\n<p>It's much easier to just understand that it really is uninitialized than to try to understand the complex rules for when it's guaranteed to have an unspecified value and when it's not. You have to learn about trap representations and other complexity.</p>\n"}, {"comments": [{"owner": {"reputation": 442, "user_id": 2556628, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/af646ee19f9771df0b76fe42ce7df699?s=128&d=identicon&r=PG", "display_name": "anupamb", "link": "https://stackoverflow.com/users/2556628/anupamb"}, "edited": false, "score": 0, "creation_date": 1453918871, "post_id": 35029199, "comment_id": 57814433, "body": "Thanks for the answer. This helps. Yes changing the format specifier changed things, but it wasn&#39;t lu that gave the right answer, it was lld. Thanks!"}], "tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": false, "score": 2, "last_activity_date": 1453871024, "last_edit_date": 1453871024, "creation_date": 1453870591, "answer_id": 35029199, "question_id": 35028372, "link": "https://stackoverflow.com/questions/35028372/why-does-the-following-code-give-different-answers/35029199#35029199", "title": "Why does the following code give different answers?", "body": "<p>On the one hand, yes, since <code>rawtime</code> is uninitialized, the behavior is undefined, and all bets are off.  Demons could fly out of your computer's nose, for all the Standard cares.</p>\n\n<p>But on the other hand, <code>rawtime</code> is just an integer.  Maybe 64 bits, probably 32 bits.  There are either 2<sup>32</sup> or 2<sup>64</sup> ordinary values.  There are no trap representations (on any computer you are at all likely to be using.)  So whatever random value starts out in <code>rawtime</code> gets copied to <code>t2</code>.  So they pretty much have to compare equal, so <code>printf</code> pretty much has to be called.  All right so far.</p>\n\n<p>So if <code>printf</code> gets called on account of <code>rawtime</code> and <code>t2</code> being equal, how could they print as unequal?  Probably because you accidentally used <code>%ul</code> instead of <code>%lu</code>.  Your two format specifiers might be printing the top and bottom halves of <code>rawtime</code> (which are probably unequal) and not printing <code>t2</code> at all.  Try changing <code>%ul</code> to <code>%lu</code> and see what happens.</p>\n\n<p>[Disclaimer.  This has been a real-world answer, not a Standard-thumping answer.  If you look only at the Standard, it is indeed meaningless to ask what a program does after its behavior has become undefined.  And there are now compilers that will let themselves do some pretty bizarre things when your program is undefined and they're allowed to.  It's very hard to imagine that a compiler would emit code which (a) copied a bit pattern but then either (b1) compared it unequal or (b2) compared it equal but printed it unequal, but it's not <em>completely</em> out of the question.)</p>\n"}], "owner": {"reputation": 442, "user_id": 2556628, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/af646ee19f9771df0b76fe42ce7df699?s=128&d=identicon&r=PG", "display_name": "anupamb", "link": "https://stackoverflow.com/users/2556628/anupamb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 35028619, "answer_count": 3, "score": -4, "last_activity_date": 1453871024, "creation_date": 1453865559, "question_id": 35028372, "link": "https://stackoverflow.com/questions/35028372/why-does-the-following-code-give-different-answers", "title": "Why does the following code give different answers?", "body": "<p>I have the following code.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n\nint main ()\n{\n  time_t rawtime;\n  time_t t2 = rawtime;\n  if(rawtime == t2) printf(\"Hi %ul %ul\\n\", rawtime, t2);\n\n  return(0);\n}\n</code></pre>\n\n<p>When this code is run, the printf gives different answers for rawtime and t2. Why is that? Could somebody please help?</p>\n"}, {"tags": ["c", "linked-list", "segmentation-fault"], "comments": [{"owner": {"reputation": 3457, "user_id": 3753446, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/4Pipl.png?s=128&g=1", "display_name": "Magix", "link": "https://stackoverflow.com/users/3753446/magix"}, "edited": false, "score": 0, "creation_date": 1453865710, "post_id": 35028353, "comment_id": 57783033, "body": "Here is a pointer : <code>int n = 0; int *pointer = &amp;n;</code>. I&#39;m always glad to help :)"}], "answers": [{"comments": [{"owner": {"reputation": 349, "user_id": 5581639, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dd39075f66c34597ec596dc52e653d28?s=128&d=identicon&r=PG&f=1", "display_name": "JG7", "link": "https://stackoverflow.com/users/5581639/jg7"}, "edited": false, "score": 0, "creation_date": 1453867657, "post_id": 35028502, "comment_id": 57783615, "body": "Thank you. I have made the changes. Is it possible that the infinite loop is due to the presence of a newline character at the end of tempname?"}, {"owner": {"reputation": 23331, "user_id": 134252, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/azWjr.png?s=128&g=1", "display_name": "Dolda2000", "link": "https://stackoverflow.com/users/134252/dolda2000"}, "reply_to_user": {"reputation": 349, "user_id": 5581639, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dd39075f66c34597ec596dc52e653d28?s=128&d=identicon&r=PG&f=1", "display_name": "JG7", "link": "https://stackoverflow.com/users/5581639/jg7"}, "edited": false, "score": 0, "creation_date": 1453867766, "post_id": 35028502, "comment_id": 57783648, "body": "@JoeyGrant: Since you&#39;re using the same method to input the names in the list as the tempname, it seems the newline should be either present or missing in both, so that doesn&#39;t sound like it should be a problem."}, {"owner": {"reputation": 23331, "user_id": 134252, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/azWjr.png?s=128&g=1", "display_name": "Dolda2000", "link": "https://stackoverflow.com/users/134252/dolda2000"}, "reply_to_user": {"reputation": 349, "user_id": 5581639, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dd39075f66c34597ec596dc52e653d28?s=128&d=identicon&r=PG&f=1", "display_name": "JG7", "link": "https://stackoverflow.com/users/5581639/jg7"}, "edited": false, "score": 0, "creation_date": 1453867853, "post_id": 35028502, "comment_id": 57783670, "body": "@JoeyGrant: However, you have to check <code>strcmp(...) == 0</code>, not <code>!= 0</code>. <code>strcmp()</code> returns zero when the strings are equal."}, {"owner": {"reputation": 349, "user_id": 5581639, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dd39075f66c34597ec596dc52e653d28?s=128&d=identicon&r=PG&f=1", "display_name": "JG7", "link": "https://stackoverflow.com/users/5581639/jg7"}, "edited": false, "score": 0, "creation_date": 1453868038, "post_id": 35028502, "comment_id": 57783729, "body": "But while it is not equal, I need to move to the next structure in the linked list, correct?"}, {"owner": {"reputation": 23331, "user_id": 134252, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/azWjr.png?s=128&g=1", "display_name": "Dolda2000", "link": "https://stackoverflow.com/users/134252/dolda2000"}, "reply_to_user": {"reputation": 349, "user_id": 5581639, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dd39075f66c34597ec596dc52e653d28?s=128&d=identicon&r=PG&f=1", "display_name": "JG7", "link": "https://stackoverflow.com/users/5581639/jg7"}, "edited": false, "score": 0, "creation_date": 1453868068, "post_id": 35028502, "comment_id": 57783740, "body": "@JoeyGrant: You do indeed."}], "tags": [], "owner": {"reputation": 23331, "user_id": 134252, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/azWjr.png?s=128&g=1", "display_name": "Dolda2000", "link": "https://stackoverflow.com/users/134252/dolda2000"}, "is_accepted": false, "score": 1, "last_activity_date": 1453866366, "creation_date": 1453866366, "answer_id": 35028502, "question_id": 35028353, "link": "https://stackoverflow.com/questions/35028353/c-linked-list-segmentation-fault-during-display/35028502#35028502", "title": "C - Linked List Segmentation Fault During Display", "body": "<p>Your problem is that you never find the entry you're looking for. The expression <code>currentp-&gt;name != tempname</code> will always be true, since those are always unequal. In C, this equality test will not compile into a character-by-character comparison, but into a comparison of pointers to <code>currentp-&gt;name</code> and <code>tempname</code>. Since those are never at the same addresses, they will never be equal.</p>\n\n<p>Try <code>!strcmp(currentp-&gt;name, tempname)</code> instead.</p>\n\n<p>The reason you crash, then, is because you reach the end of the list, so that <code>currentp</code> will be <code>NULL</code> after your loop, and then you try to print <code>NULL-&gt;name</code> and <code>NULL-&gt;number</code>, actually causing the crash.</p>\n\n<p>Also, on another note, you may want to start using local variables instead of using global variables for everything.</p>\n"}, {"comments": [{"owner": {"reputation": 349, "user_id": 5581639, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dd39075f66c34597ec596dc52e653d28?s=128&d=identicon&r=PG&f=1", "display_name": "JG7", "link": "https://stackoverflow.com/users/5581639/jg7"}, "edited": false, "score": 0, "creation_date": 1453867006, "post_id": 35028530, "comment_id": 57783421, "body": "This definitely helps out. I have edited the problem at hand. Now I am getting an infinite loop and only 1 correct display 3 cycles in."}, {"owner": {"reputation": 9, "user_id": 5844696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4c37eb17e1a02b7ba396365e3f179e1?s=128&d=identicon&r=PG&f=1", "display_name": "Marlene", "link": "https://stackoverflow.com/users/5844696/marlene"}, "reply_to_user": {"reputation": 349, "user_id": 5581639, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dd39075f66c34597ec596dc52e653d28?s=128&d=identicon&r=PG&f=1", "display_name": "JG7", "link": "https://stackoverflow.com/users/5581639/jg7"}, "edited": false, "score": 0, "creation_date": 1453868291, "post_id": 35028530, "comment_id": 57783809, "body": "Are you talking about: while (strcmp(tempname, &quot;\\n&quot;) != 0)? This doesn&#39;t work the way you intend it to and it will always be infinite unless you have an entry that is a string composed ONLY of &#39;\\n&#39;. You don&#39;t need that loop at all. strcmp parses two strings (just arrays of chars) in a parallel manner and tests if all the characters are equivalent (in which case it returns 0, or else returns an int signifying the difference). What were you originally trying to do with this line?"}, {"owner": {"reputation": 349, "user_id": 5581639, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dd39075f66c34597ec596dc52e653d28?s=128&d=identicon&r=PG&f=1", "display_name": "JG7", "link": "https://stackoverflow.com/users/5581639/jg7"}, "edited": false, "score": 0, "creation_date": 1453868686, "post_id": 35028530, "comment_id": 57783918, "body": "I need the program to continue accepting search queries until (what the program challenge describes) EOF. I assumed that this would mean that I would receive an empty string for the termination of such loop. However, this is obviously wrong due to the continued presence of the infinite output loop. Thoughts on an alternative?"}, {"owner": {"reputation": 9, "user_id": 5844696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4c37eb17e1a02b7ba396365e3f179e1?s=128&d=identicon&r=PG&f=1", "display_name": "Marlene", "link": "https://stackoverflow.com/users/5844696/marlene"}, "reply_to_user": {"reputation": 349, "user_id": 5581639, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dd39075f66c34597ec596dc52e653d28?s=128&d=identicon&r=PG&f=1", "display_name": "JG7", "link": "https://stackoverflow.com/users/5581639/jg7"}, "edited": false, "score": 0, "creation_date": 1453869347, "post_id": 35028530, "comment_id": 57784092, "body": "Oh, right. Sorry, fgets <i>does</i> take EOF too, it just also takes \\n which is what it usually uses to know when input has finished. In that case maybe put the while loop != EOF right after fgets(tempname,...). You should take care to put the while loop <i>after</i> reading the input value of tempname. Like said below, you shouldn&#39;t be using global variables here - they&#39;re a bad idea just in general because it&#39;s hard to keep track of them, and its how you ended up putting that loop in the wrong place..."}], "tags": [], "owner": {"reputation": 9, "user_id": 5844696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4c37eb17e1a02b7ba396365e3f179e1?s=128&d=identicon&r=PG&f=1", "display_name": "Marlene", "link": "https://stackoverflow.com/users/5844696/marlene"}, "is_accepted": false, "score": 0, "last_activity_date": 1453866491, "creation_date": 1453866491, "answer_id": 35028530, "question_id": 35028353, "link": "https://stackoverflow.com/questions/35028353/c-linked-list-segmentation-fault-during-display/35028530#35028530", "title": "C - Linked List Segmentation Fault During Display", "body": "<p>Not sure if this solves the problem, but you can't directly compare strings with != in C. You need to use if( strcmp( string1, string2 ) == 0 ) to check.</p>\n\n<p>fgets doesn't take EOF (= -1) like getchar does, but it does include '\\n' and pad the rest with NULL (= 0) so checking for EOF is not really helpful, but yes you can stop after \\n or NULL.</p>\n"}], "owner": {"reputation": 349, "user_id": 5581639, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dd39075f66c34597ec596dc52e653d28?s=128&d=identicon&r=PG&f=1", "display_name": "JG7", "link": "https://stackoverflow.com/users/5581639/jg7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 1, "answer_count": 2, "score": -2, "last_activity_date": 1453868904, "creation_date": 1453865442, "last_edit_date": 1453868904, "question_id": 35028353, "link": "https://stackoverflow.com/questions/35028353/c-linked-list-segmentation-fault-during-display", "title": "C - Linked List Segmentation Fault During Display", "body": "<p>Edit 2: I realized that I did not have a \"Not found\" result for any query not in the database. Changes have been made to introduce this feature. Here is the current test and test output:</p>\n\n<p>Input:</p>\n\n<pre><code>3\nsam\n99912222\ntom\n11122222\nharry\n12299933\nsam\nedward\nharry\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Not found\n\n=0\nNot found\n\n=0\nNot found\n\n=0\nNot found\n\n=0\nsam\n=99912222\nNot found\n\n=0\nNot found\n\n=0\nNot found\n[Infinite loop continues]\n</code></pre>\n\n<hr>\n\n<p>Edit: I have changed a few things in the while loop in display(). I am now getting an infinite loop printing \"=0\" except for the third or fourth cycle through the search. Hmmm...</p>\n\n<p>By the way, thanks for the reminder of testing strings with <code>==</code>. Seems like a no-brainer now.</p>\n\n<hr>\n\n<p>I have done some searching and have yet to be able to understand where I have gone wrong with my code. I am working on a challenge which will result in a simple phone-book program. It will take input of a number (the number of entries to be added) then the names and associated phone numbers (no dashes or periods). After the entries have been added then the user can search for entries by name and have the number displayed in the format \"name=number\".</p>\n\n<p>The code throws a segmentation fault with the while loop in the display() function. I assume that I am attempting to print something assigned as NULL, but I cannot figure out where I have gone wrong. Any help would be very appreciated.</p>\n\n<p>Lastly, the challenge calls for me to read queries until EOF; however, this confuses me since I am to accept user input from stdin. What does EOF look like with stdin, just a register return (<code>\\n</code>)?</p>\n\n<p>(PS: This is my first attempt at linked lists, so any pointers would be greatly appreciated.)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;math.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid add_entry(void);\nvoid display(void);\n\nstruct phonebook {\n        char name[50];\n        int number;\n        struct phonebook *next;\n    };\n    struct phonebook *firstp, *currentp, *newp;\n    char tempname[50];\n\nint main() {\n    int N;\n    firstp = NULL;\n    scanf(\"%d\", &amp;N);\n    for (int i = 0; i &lt; N; i++) {\n        add_entry();\n    }\n    display();\n\n    return 0;\n}\n\nvoid add_entry(void) {\n    newp = (struct phonebook*)malloc(sizeof(struct phonebook));\n    if (firstp == NULL) firstp = currentp = newp;\n    else {\n        currentp = firstp;\n        while (currentp-&gt;next != NULL)\n            currentp = currentp-&gt;next;\n        currentp-&gt;next = newp;\n        currentp = newp;\n    }\n    fgets(currentp-&gt;name, 50, stdin);\n    scanf(\"%d\", &amp;currentp-&gt;number);\n\n    currentp-&gt;next = NULL;\n}\n\nvoid display(void) {\n    while (strcmp(tempname, \"\\n\") != 0) {\n        currentp = firstp;\n        fgets(tempname, 50, stdin);\n\n        while (strcmp(currentp-&gt;name, tempname) != 0) {\n            if (currentp-&gt;next == NULL) {\n                printf(\"Not found\\n\");\n                break;\n            }\n            currentp = currentp-&gt;next;\n        }\n        printf(\"%s=%d\\n\", currentp-&gt;name, currentp-&gt;number);\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "makefile", "include-guards"], "answers": [{"comments": [{"owner": {"reputation": 184, "user_id": 1511056, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7e7cd71de6441969cc03d0c0042871fb?s=128&d=identicon&r=PG", "display_name": "clogwog", "link": "https://stackoverflow.com/users/1511056/clogwog"}, "edited": false, "score": 0, "creation_date": 1453865886, "post_id": 35028389, "comment_id": 57783097, "body": "thanks ziffusion. i just updated the question with the actual output of the error."}, {"owner": {"reputation": 8069, "user_id": 296923, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/cb7b3af2d2d967711454dc8d9c21798f?s=128&d=identicon&r=PG", "display_name": "Ziffusion", "link": "https://stackoverflow.com/users/296923/ziffusion"}, "reply_to_user": {"reputation": 184, "user_id": 1511056, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7e7cd71de6441969cc03d0c0042871fb?s=128&d=identicon&r=PG", "display_name": "clogwog", "link": "https://stackoverflow.com/users/1511056/clogwog"}, "edited": false, "score": 0, "creation_date": 1453866313, "post_id": 35028389, "comment_id": 57783217, "body": "Can you post the entire build output? Also, is the Makefile correct? I see a couple of weird things. 1. <code>${OUT1_DIR}%.o:${SRC1_DIR}%.c ${SOURCES2}</code> seems odd. 2. <code>${OUT2_DIR}%.o:${SOURCES2}</code> does not seem properly indented."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1453866847, "post_id": 35028389, "comment_id": 57783377, "body": "I unindented the <code>${OUT2_DIR}%.o:${SOURCES2}</code> line \u2014 it was otherwise a weird one.  It looks to me as though every object file depends on every source file, so if a source file changes, all the object files in that directory will be recompiled.  I doubt if that&#39;s what&#39;s wanted."}, {"owner": {"reputation": 8069, "user_id": 296923, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/cb7b3af2d2d967711454dc8d9c21798f?s=128&d=identicon&r=PG", "display_name": "Ziffusion", "link": "https://stackoverflow.com/users/296923/ziffusion"}, "edited": false, "score": 0, "creation_date": 1453866999, "post_id": 35028389, "comment_id": 57783419, "body": "I&#39;ve added a <code>Makefile</code> to the answer that you can try. Look at what <code>$(OBJECTS1)</code> and <code>$(OBJECTS2)</code> are. There are other changes as well. Make sure you replace reading spaces with tabs."}, {"owner": {"reputation": 184, "user_id": 1511056, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7e7cd71de6441969cc03d0c0042871fb?s=128&d=identicon&r=PG", "display_name": "clogwog", "link": "https://stackoverflow.com/users/1511056/clogwog"}, "edited": false, "score": 0, "creation_date": 1453867222, "post_id": 35028389, "comment_id": 57783478, "body": "i had simplified the makefile and output to illustrate the problem. i have updated the question to the full makefile and full error list. just ignore the libraries because before i made the change to add some extra source from the other directory , this was working,"}, {"owner": {"reputation": 184, "user_id": 1511056, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7e7cd71de6441969cc03d0c0042871fb?s=128&d=identicon&r=PG", "display_name": "clogwog", "link": "https://stackoverflow.com/users/1511056/clogwog"}, "edited": false, "score": 0, "creation_date": 1453867680, "post_id": 35028389, "comment_id": 57783622, "body": "perhaps i just need to put those few extra files from the other directory in a library and link them together ?"}, {"owner": {"reputation": 184, "user_id": 1511056, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7e7cd71de6441969cc03d0c0042871fb?s=128&d=identicon&r=PG", "display_name": "clogwog", "link": "https://stackoverflow.com/users/1511056/clogwog"}, "edited": false, "score": 0, "creation_date": 1453867905, "post_id": 35028389, "comment_id": 57783688, "body": "i finally tweaked to what you were saying.. change ${OUT2_DIR}%.o:${SOURCES2}  to ${OUT2_DIR}%.o:${SRC2_DIR}/%.c and it works now..  I was thinking that it would compile everything in SRC2_DIR but it only gets called for the files i need. thank you !!!!"}, {"owner": {"reputation": 8069, "user_id": 296923, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/cb7b3af2d2d967711454dc8d9c21798f?s=128&d=identicon&r=PG", "display_name": "Ziffusion", "link": "https://stackoverflow.com/users/296923/ziffusion"}, "edited": false, "score": 0, "creation_date": 1453869052, "post_id": 35028389, "comment_id": 57784015, "body": "I added an explanation for why you were seeing a multiple definition."}], "tags": [], "owner": {"reputation": 8069, "user_id": 296923, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/cb7b3af2d2d967711454dc8d9c21798f?s=128&d=identicon&r=PG", "display_name": "Ziffusion", "link": "https://stackoverflow.com/users/296923/ziffusion"}, "is_accepted": true, "score": 1, "last_activity_date": 1453869010, "last_edit_date": 1453869010, "creation_date": 1453865688, "answer_id": 35028389, "question_id": 35028212, "link": "https://stackoverflow.com/questions/35028212/makefile-with-2-source-directories-make-include-guard-fail/35028389#35028389", "title": "makefile with 2 source directories make include guard fail", "body": "<p>People build a projects from multiple directories all the time. Each case requires a different approach.</p>\n\n<p>What you posted should work. A multiple definition is most likely <em>not</em> because of the <code>Makefile</code>. I would look at the error more closely. The <code>toolchain</code> is telling you where it found the two definitions.</p>\n\n<p>Makefile:</p>\n\n<pre><code>CC ?= gcc\n# compile and link flags\nCC_FLAGS ?= -c -w -fPIC -g3 -Og \n\nCC_INCLUDE += -I../../AnotherProject/src\n\n# Libraries\nLIBS := -lrt -lpthread -lconfig -lm\n\nOUT1_DIR = build/obj\nOUT2_DIR = build/obj/extra2\n\n# result\nEXEC = build/MyProgram\n\n#-------------------------------------------------------------\n# main sources (1) (everything in src directory)\nSRC1_DIR = src\nSOURCES1 = $(wildcard ${SRC1_DIR}/*.c)\n# deduce the object list from the source list\n_OBJECTS1 = $(patsubst %.c,%.o,$(SOURCES1) )\n# the replace the source directory wioth the output directory\nOBJECTS1 = $(patsubst ${SRC1_DIR}%,${OUT1_DIR}%,$(_OBJECTS1) )\n\n#-------------------------------------------------------------\n# extra sources (just cherry pick what i need to reuse)\nSRC2_DIR = ../../AnotherProject/src\nSRC2_LIST = CheckSum.c Config.c\n#all the sources in the srec directory will be included\nSOURCES2 =  $(patsubst %.c,${SRC2_DIR}/%.c,$(SRC2_LIST))\n# deduce the object list from the source list\n_OBJECTS2 = $(patsubst %.c,%.o,$(SOURCES2) )\n# the replace the source directory wioth the output directory\nOBJECTS2 = $(patsubst ${SRC2_DIR}%,${OUT2_DIR}%,$(_OBJECTS2) )\n\n#-------------------------------------------------------------\n# build receipes\n\nall: debug $(EXEC)\n\ndebug: FORCE\n    echo \"1====\" $(OBJECTS1)\n    echo \"2====\" $(OBJECTS2)\n\nFORCE:\n\n# Main target\n$(EXEC): $(OBJECTS1) $(OBJECTS2)\n    $(CC) $(OBJECTS1) $(OBJECTS2) -o $@ $(LIBS)\n\n\n# To obtain object files\n${OUT1_DIR}/%.o:${SRC1_DIR}/%.c\n    @mkdir -p $(OUT1_DIR)\n    $(CC) -c $(CC_FLAGS) $(CC_INCLUDE) $&lt; -o $@\n\n# To obtain the extra object files\n${OUT2_DIR}/%.o:${SRC2_DIR}/%.c\n    @mkdir -p $(OUT2_DIR)\n    $(CC) -c $(CC_FLAGS) $(CC_INCLUDE) $&lt; -o $@\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>Here is your problem.</p>\n\n<pre><code>cc -c -c -w -fPIC -g3 -Og -D__EMULATE_SOS__ -I../../libSOS/trunk/include -I. -I../../include -I../lib/ABCUtilSO/src -I../../Bla/trunk/src ../../Bla/trunk/src/CheckSum.c -o build/x86_64-linux-gnu/obj/Bla/CheckSum.o\ncc -c -c -w -fPIC -g3 -Og -D__EMULATE_SOS__ -I../../libSOS/trunk/include -I. -I../../include -I../lib/ABCUtilSO/src -I../../Bla/trunk/src ../../Bla/trunk/src/CheckSum.c -o build/x86_64-linux-gnu/obj/Bla/Config.o\n</code></pre>\n\n<p>You see that it is building both <code>CheckSum.o</code> and <code>Config.o</code> from the same source file <code>CheckSum.c</code>. Hence the multiple definitions at link time. This is the consequence of the bad pattern rule you had.</p>\n\n<pre><code>${OUT2_DIR}%.o:${SOURCES2}\n</code></pre>\n"}], "owner": {"reputation": 184, "user_id": 1511056, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7e7cd71de6441969cc03d0c0042871fb?s=128&d=identicon&r=PG", "display_name": "clogwog", "link": "https://stackoverflow.com/users/1511056/clogwog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 287, "favorite_count": 0, "accepted_answer_id": 35028389, "answer_count": 1, "score": 0, "last_activity_date": 1453869010, "creation_date": 1453864571, "last_edit_date": 1453868314, "question_id": 35028212, "link": "https://stackoverflow.com/questions/35028212/makefile-with-2-source-directories-make-include-guard-fail", "title": "makefile with 2 source directories make include guard fail", "body": "<p>I have a project with sources in 2 locations. \nWhen the project links, it complains that a function is double-defined (it's not):</p>\n\n<pre><code>cc -c -c -w -fPIC -g3 -Og -D__EMULATE_SOS__ -I../../libSOS/trunk/include -I. -I../../include -I../lib/ABCUtilSO/src -I../../Bla/trunk/src src/Meter.c -o build/x86_64-linux-gnu/obj/Meter.o\ncc -c -c -w -fPIC -g3 -Og -D__EMULATE_SOS__ -I../../libSOS/trunk/include -I. -I../../include -I../lib/ABCUtilSO/src -I../../Bla/trunk/src src/PaymentHandler.c -o build/x86_64-linux-gnu/obj/PaymentHandler.o\ncc -c -c -w -fPIC -g3 -Og -D__EMULATE_SOS__ -I../../libSOS/trunk/include -I. -I../../include -I../lib/ABCUtilSO/src -I../../Bla/trunk/src src/PaymentHandlerDaemon.c -o build/x86_64-linux-gnu/obj/PaymentHandlerDaemon.o\ncc -c -c -w -fPIC -g3 -Og -D__EMULATE_SOS__ -I../../libSOS/trunk/include -I. -I../../include -I../lib/ABCUtilSO/src -I../../Bla/trunk/src src/PrintSocketReceiver.c -o build/x86_64-linux-gnu/obj/PrintSocketReceiver.o\ncc -c -c -w -fPIC -g3 -Og -D__EMULATE_SOS__ -I../../libSOS/trunk/include -I. -I../../include -I../lib/ABCUtilSO/src -I../../Bla/trunk/src src/SerialPrinter.c -o build/x86_64-linux-gnu/obj/SerialPrinter.o\ncc -c -c -w -fPIC -g3 -Og -D__EMULATE_SOS__ -I../../libSOS/trunk/include -I. -I../../include -I../lib/ABCUtilSO/src -I../../Bla/trunk/src ../../Bla/trunk/src/CheckSum.c -o build/x86_64-linux-gnu/obj/Bla/CheckSum.o\ncc -c -c -w -fPIC -g3 -Og -D__EMULATE_SOS__ -I../../libSOS/trunk/include -I. -I../../include -I../lib/ABCUtilSO/src -I../../Bla/trunk/src ../../Bla/trunk/src/CheckSum.c -o build/x86_64-linux-gnu/obj/Bla/Config.o\ncc build/x86_64-linux-gnu/obj/Meter.o build/x86_64-linux-gnu/obj/PaymentHandler.o build/x86_64-linux-gnu/obj/PaymentHandlerDaemon.o build/x86_64-linux-gnu/obj/PrintSocketReceiver.o build/x86_64-linux-gnu/obj/SerialPrinter.o build/x86_64-linux-gnu/obj/Bla/CheckSum.o build/x86_64-linux-gnu/obj/Bla/Config.o -o build/x86_64-linux-gnu/obj/../PaymentHandlerDaemon -lrt -lpthread -lconfig -lm -L../../libSOS/trunk/build/x86_64-linux-gnu -lSOS  -L../lib/ABCUtilLib/build/x86_64-linux-gnu -lABCUtil -L../lib/ABCUtilSO/build/x86_64-linux-gnu   -lABCMain\nbuild/x86_64-linux-gnu/obj/Bla/Config.o: In function `CheckSum_Buffer':\n/home/builder/projects/Applications/PaymentHandlerDaemon/trunk/../../Bla/trunk/src/CheckSum.c:34: multiple definition of `CheckSum_Buffer'\nbuild/x86_64-linux-gnu/obj/Bla/CheckSum.o:/home/builder/projects/Applications/PaymentHandlerDaemon/trunk/../../Bla/trunk/src/CheckSum.c:34: first defined here\nbuild/x86_64-linux-gnu/obj/Bla/Config.o: In function `CheckSum_Stream':\n/home/builder/projects/Applications/PaymentHandlerDaemon/trunk/../../Bla/trunk/src/CheckSum.c:54: multiple definition of `CheckSum_Stream'\nbuild/x86_64-linux-gnu/obj/Bla/CheckSum.o:/home/builder/projects/Applications/PaymentHandlerDaemon/trunk/../../Bla/trunk/src/CheckSum.c:54: first defined here\nbuild/x86_64-linux-gnu/obj/Bla/Config.o: In function `pppfcs16':\n/home/builder/projects/Applications/PaymentHandlerDaemon/trunk/../../Bla/trunk/src/CheckSum.c:125: multiple definition of `pppfcs16'\nbuild/x86_64-linux-gnu/obj/Bla/CheckSum.o:/home/builder/projects/Applications/PaymentHandlerDaemon/trunk/../../Bla/trunk/src/CheckSum.c:125: first defined here\nbuild/x86_64-linux-gnu/obj/Meter.o: In function `Meter_MessagePumpProc':\n/home/builder/projects/Applications/PaymentHandlerDaemon/trunk/src/Meter.c:365: undefined reference to `Config_GetHardwareInfo'\ncollect2: error: ld returned 1 exit status\nmake: *** [build/x86_64-linux-gnu/obj/../PaymentHandlerDaemon] Error 1\n</code></pre>\n\n<p>I think it is because the makefile has 2 different recipes to compile for each directory and they don't share the pre-compile definitions.</p>\n\n<p>is there a better way of making a project with 2 source directories? Should I just add the few sources in the different directory to a mini-library and then add that? </p>\n\n<p>Makefile:</p>\n\n<pre><code>CC ?= gcc\nARCH = $(shell $(CC) -dumpmachine)\n\n# compile and link flags\nCC_FLAGS ?= -c -w -fPIC -g3 -Og -D__EMULATE_SOS__\n\nCC_INCLUDE = -I../../libSOS/trunk/include\nCC_INCLUDE += -I. -I../../include\nCC_INCLUDE += -I../lib/ABCUtilSO/src\nCC_INCLUDE += -I../../Bla/trunk/src\n\n# Libraries\nLIBS := -lrt -lpthread -lconfig -lm\nLIBS += -L../../libSOS/trunk/build/$(ARCH) -lSOS \nLIBS += -L../lib/ABCUtilLib/build/$(ARCH) -lABCUtil\nLIBS += -L../lib/ABCUtilSO/build/$(ARCH)    -lABCMain\n\n\nOUT1_DIR = build/$(ARCH)/obj\nOUT2_DIR = build/$(ARCH)/obj/Bla\n\n# result\nEXEC = ${OUT1_DIR}/../PaymentHandlerDaemon\n\n#-------------------------------------------------------------\n# main sources (1)\nSRC1_DIR = src\n#all the sources in the srec directory will be included\nSOURCES1 = $(wildcard ${SRC1_DIR}/*.c)\n# deduce the object list from the source list\n_OBJECTS1 = $(patsubst %.c,%.o,$(SOURCES1) )\n# the replace the source directory wioth the output directory\nOBJECTS1 = $(patsubst ${SRC1_DIR}%,${OUT1_DIR}%,$(_OBJECTS1) )\n\n#-------------------------------------------------------------\n# extra sources (2)\nSRC2_DIR = ../../Bla/trunk/src\n#SRC2_LIST = Meter.c\nSRC2_LIST = CheckSum.c Config.c\n#all the sources in the srec directory will be included\n#SOURCES2 = $(pathsubs %,$(SRC2_DIR)/%,$(SRC2_LIST))\nSOURCES2 =  $(patsubst %.c,${SRC2_DIR}/%.c,$(SRC2_LIST))\n# deduce the object list from the source list\n_OBJECTS2 = $(patsubst %.c,%.o,$(SOURCES2) )\n# the replace the source directory wioth the output directory\nOBJECTS2 = $(patsubst ${SRC2_DIR}%,${OUT2_DIR}%,$(_OBJECTS2) )\n\n#-------------------------------------------------------------\n# build receipes\n\nall: $(EXEC)\n# Main target\n$(EXEC): $(OBJECTS1) $(OBJECTS2)\n    $(CC) $(OBJECTS1) $(OBJECTS2) -o $@ $(LIBS)\n\n\n# To obtain object files\n${OUT1_DIR}%.o:${SRC1_DIR}%.c \n    @mkdir -p $(OUT1_DIR)\n    $(CC) -c $(CC_FLAGS) $(CC_INCLUDE) $&lt; -o $@\n\n# # To obtain object files\n ${OUT2_DIR}%.o:${SOURCES2}\n    @mkdir -p $(OUT2_DIR)\n    $(CC) -c $(CC_FLAGS) $(CC_INCLUDE) $&lt; -o $@\n\n\n# To remove generated files\nclean:\n    rm -fr build/$(ARCH)\n\n\n# debug.. for example use as    make -print-SRC_DIR\nprint-%  : ; @echo $* = $($*)\n</code></pre>\n"}, {"tags": ["c", "unix"], "comments": [{"owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "edited": false, "score": 1, "creation_date": 1453864251, "post_id": 35028149, "comment_id": 57782583, "body": "look into <code>system()</code>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1453866119, "post_id": 35028149, "comment_id": 57783165, "body": "Although <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/system.html\" rel=\"nofollow noreferrer\"><code>system()</code></a> &#39;works&#39;, you&#39;d have to manufacture the command line carefully; there&#39;s no way for the launching program to filter the output (in the ordinary course of events). You might need to use POSIX functions <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/popen.html\" rel=\"nofollow noreferrer\"><code>popen()</code></a>, or maybe <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/fork.html\" rel=\"nofollow noreferrer\"><code>fork()</code></a> and <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/execvp.html\" rel=\"nofollow noreferrer\"><code>execvp()</code></a> and related functions (<code>pipe()</code>, <code>dup2()</code>, \u2026)."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1453866199, "post_id": 35028149, "comment_id": 57783184, "body": "You might also want to investigate POSIX functions <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/nftw.html\" rel=\"nofollow noreferrer\"><code>nftw()</code></a>, <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/opendir.html\" rel=\"nofollow noreferrer\"><code>opendir()</code></a>, <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/readdir.html\" rel=\"nofollow noreferrer\"><code>readdir()</code></a>, <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/stat.html\" rel=\"nofollow noreferrer\"><code>stat()</code></a>."}], "answers": [{"comments": [{"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 0, "creation_date": 1453864574, "post_id": 35028180, "comment_id": 57782702, "body": "I think the program output is necessary in this case too."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1453864663, "post_id": 35028180, "comment_id": 57782724, "body": "In that case use <code>popen</code>"}], "tags": [], "owner": {"reputation": 16091, "user_id": 4975822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c04e8c4c984d36bea8a6239574980fbd?s=128&d=identicon&r=PG&f=1", "display_name": "artm", "link": "https://stackoverflow.com/users/4975822/artm"}, "is_accepted": false, "score": 1, "last_activity_date": 1453864386, "creation_date": 1453864386, "answer_id": 35028180, "question_id": 35028149, "link": "https://stackoverflow.com/questions/35028149/c-unix-commands-in-program/35028180#35028180", "title": "C - UNIX commands in program", "body": "<blockquote>\n  <p>I tried to directly call \"ls -l\" in my program but that caused an error. How do you call UNIX commands within a C program?</p>\n</blockquote>\n\n<p>You can se <code>system</code> in your C program, for example:</p>\n\n<pre><code>system( \"ls -l\" );\n</code></pre>\n\n<p>For that to work, you'll also need to <code>#include &lt;stdlib.h&gt;</code></p>\n"}, {"tags": [], "owner": {"reputation": 1417, "user_id": 4812613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60141d131892b241c5bc0581608042b8?s=128&d=identicon&r=PG&f=1", "display_name": "Scott Sosna", "link": "https://stackoverflow.com/users/4812613/scott-sosna"}, "is_accepted": false, "score": 0, "last_activity_date": 1453864479, "creation_date": 1453864479, "answer_id": 35028198, "question_id": 35028149, "link": "https://stackoverflow.com/questions/35028149/c-unix-commands-in-program/35028198#35028198", "title": "C - UNIX commands in program", "body": "<p>Using the find command might work better, you could count directories with the command \"find . -t d | wc -l\" and do something similar for files with the appropriate flags.</p>\n"}], "owner": {"reputation": 17, "user_id": 5844624, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7559ca0474ebaefe49d23c1d9cc50f80?s=128&d=identicon&r=PG&f=1", "display_name": "SuperSpider", "link": "https://stackoverflow.com/users/5844624/superspider"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1453864479, "creation_date": 1453864203, "question_id": 35028149, "link": "https://stackoverflow.com/questions/35028149/c-unix-commands-in-program", "title": "C - UNIX commands in program", "body": "<p>I'm trying to create a program where it would count the number of directories, or the number of readable/writable/executable files. The user would input only the name of the author and the letters \"d\", \"r\", \"w\", or \"x\". I tried to directly call \"ls -l\" in my program but that caused an error. How do you call UNIX commands within a C program?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1453865165, "post_id": 35028071, "comment_id": 57782856, "body": "Which function&#39;s return address are you looking for? Generally speaking, the gdb <code>bt</code> (or <code>backtrace</code>) command will give you the backtrace of all stack frames including return addresses."}], "answers": [{"tags": [], "owner": {"reputation": 1423, "user_id": 5700944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eb2f574da513288b45bde6de8f06999?s=128&d=identicon&r=PG&f=1", "display_name": "dmi", "link": "https://stackoverflow.com/users/5700944/dmi"}, "is_accepted": true, "score": 1, "last_activity_date": 1453880561, "creation_date": 1453880561, "answer_id": 35031410, "question_id": 35028071, "link": "https://stackoverflow.com/questions/35028071/using-gdb-to-calculate-return-address/35031410#35031410", "title": "Using gdb to calculate return address", "body": "<p>In the debugger you can see the disassembled code, just put a break point to the <code>ret</code> operand of your function. When it stops, see the value of the <code>esp</code> register which points you to the stack address. Then explore the memory at this address and the first 4 (depending on your platform) bytes will give you the address which will be used to return to.</p>\n"}], "owner": {"reputation": 101, "user_id": 4183725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b41136d0ef7929f291a6152eadf254db?s=128&d=identicon&r=PG&f=1", "display_name": "jubblybean", "link": "https://stackoverflow.com/users/4183725/jubblybean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2732, "favorite_count": 1, "accepted_answer_id": 35031410, "answer_count": 1, "score": 0, "last_activity_date": 1453880561, "creation_date": 1453863724, "question_id": 35028071, "link": "https://stackoverflow.com/questions/35028071/using-gdb-to-calculate-return-address", "title": "Using gdb to calculate return address", "body": "<p>I'm currently doing a school project right now, and I'm lost on using gdb on ubuntu to find a buffer overflow vulnerability.</p>\n\n<p>I've never used gdb before, but did a little bit of research on the internet and when I used the \"disas main\" command I was quite overwhelmed at what I was looking at.</p>\n\n<p>I was wondering if someone can walk me through on how to debug this program or any other programs and show me how the return address is found.</p>\n\n<p>I have this code here:</p>\n\n<pre><code>/* This program has a buffer overflow vulnerability. */\n/* Our task is to exploit this vulnerability */\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint bof(char *str)\n{\n    char buffer[12];\n    /* The following statement has a buffer overflow problem */\n    strcpy(buffer, str);\n    return 1;\n}\n\n    int main(int argc, char **argv)\n{\n    char str[512];\n    FILE *badfile;\n    badfile = fopen(\"badfile\", \"r\");\n    fread(str, sizeof(char), 5122, badfile);\n    bof(str);\n    printf(\"Returned Properly\\n\");\n    return 1;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers", "char", "sizeof"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 4, "creation_date": 1453864044, "post_id": 35028049, "comment_id": 57782517, "body": "could you explain why you expected <code>0</code> exactly?"}, {"owner": {"reputation": 542, "user_id": 3470987, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1527668336/picture?type=large", "display_name": "Tyler Kelly", "link": "https://stackoverflow.com/users/3470987/tyler-kelly"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1453864228, "post_id": 35028049, "comment_id": 57782575, "body": "@M.M I&#39;ve seen on a couple forums (<a href=\"http://stackoverflow.com/questions/6001661/how-to-find-the-length-of-an-char-array-in-c\" title=\"how to find the length of an char array in c\">stackoverflow.com/questions/6001661/&hellip;</a>) that <code>sizeof(string_t)&#47;sizeof(*string_t)</code> is how you find the length of a char array"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1453864427, "post_id": 35028049, "comment_id": 57782643, "body": "You don&#39;t have any char arrays in your code. Arrays are indicated by <code>[ ]</code> ."}, {"owner": {"reputation": 542, "user_id": 3470987, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1527668336/picture?type=large", "display_name": "Tyler Kelly", "link": "https://stackoverflow.com/users/3470987/tyler-kelly"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1453864986, "post_id": 35028049, "comment_id": 57782804, "body": "@M.M oh, I was thinking that since arrays decay into pointers, I basically have an array"}], "answers": [{"comments": [{"owner": {"reputation": 542, "user_id": 3470987, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1527668336/picture?type=large", "display_name": "Tyler Kelly", "link": "https://stackoverflow.com/users/3470987/tyler-kelly"}, "edited": false, "score": 0, "creation_date": 1453864514, "post_id": 35028102, "comment_id": 57782674, "body": "Ok that makes sense, however for a next step I want to add some characters to <code>string_t</code> and then check the size again, <code>strlen</code> causes a pointer error for me"}, {"owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "reply_to_user": {"reputation": 542, "user_id": 3470987, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1527668336/picture?type=large", "display_name": "Tyler Kelly", "link": "https://stackoverflow.com/users/3470987/tyler-kelly"}, "edited": false, "score": 0, "creation_date": 1453864855, "post_id": 35028102, "comment_id": 57782778, "body": "That&#39;s why I said it&#39;s somehow pointless. You need an actual array <code>char string_t[1024] = &quot;&quot;</code>, or use dynamic allocation."}], "tags": [], "owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "is_accepted": false, "score": 2, "last_activity_date": 1453863894, "creation_date": 1453863894, "answer_id": 35028102, "question_id": 35028049, "link": "https://stackoverflow.com/questions/35028049/calculating-length-of-uninitialized-char-array/35028102#35028102", "title": "Calculating length of uninitialized char array", "body": "<p><code>sizeof</code> is a compile time operator (with the exception of VLA). The value of <code>sizeof(string_t)/sizeof(*string_t)</code> is equivalent to <code>sizeof(char *) / sizeof(char)</code>, which is the size of a pointer, usually <code>8</code> on 64-bit machines.</p>\n\n<p>For uninitialized <code>char *</code> pointer, there is no <em>correct</em> size, you have to initialize it:</p>\n\n<pre><code>char *string_t = \"\";\n</code></pre>\n\n<p>and use <code>strlen(string_t)</code> to get <code>0</code>. However, since it's a pointer to a string literal, it's somehow pointless though.</p>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1453865482, "post_id": 35028107, "comment_id": 57782963, "body": "You write out of bounds if the allocation fails"}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 1, "last_activity_date": 1453866162, "last_edit_date": 1453866162, "creation_date": 1453863906, "answer_id": 35028107, "question_id": 35028049, "link": "https://stackoverflow.com/questions/35028049/calculating-length-of-uninitialized-char-array/35028107#35028107", "title": "Calculating length of uninitialized char array", "body": "<p><code>char *string_t</code> is a pointer, not an uninitialized <code>char</code> array. Its size is fixed to whatever is the size of a pointer on your system, which appears to be eight.</p>\n\n<p><code>sizeof(*string_t)</code> is the same as <code>sizeof(char)</code>, so it is fixed at <code>1</code> by the C standard. There is no way to produce the behavior that you expect without changing from pointers to arrays.</p>\n\n<p>If you would like to make an array that you resize by <code>realloc</code>-ing, you need to make a <code>struct</code> that keeps track of both the pointer and the size (or has two pointers pointing to the beginning and to the end of the allocated block).</p>\n\n<pre><code>struct dynamic_char_array {\n    char *array;\n    size_t size;\n};\n\nvoid add_char(struct dynamic_char_array* a, char c) {\n    char *tmp = realloc(a-&gt;array, (a-&gt;size)+1);\n    if (tmp) {\n        a-&gt;array = tmp;\n    } else {\n        // Do something about a failed allocation\n        ...\n        return;\n    }\n    a-&gt;array[size++] = c;\n}\n</code></pre>\n\n<p><strong>Note:</strong> You could also use variable-length arrays, but once their size is set, it cannot be changed.</p>\n"}, {"comments": [{"owner": {"reputation": 542, "user_id": 3470987, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1527668336/picture?type=large", "display_name": "Tyler Kelly", "link": "https://stackoverflow.com/users/3470987/tyler-kelly"}, "edited": false, "score": 0, "creation_date": 1453864601, "post_id": 35028135, "comment_id": 57782709, "body": "what if I&#39;m not sure how much space I need?"}, {"owner": {"reputation": 40865, "user_id": 10431, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/22aac6106c44ae4078bd4c0a564714e0?s=128&d=identicon&r=PG", "display_name": "Keith Nicholas", "link": "https://stackoverflow.com/users/10431/keith-nicholas"}, "reply_to_user": {"reputation": 542, "user_id": 3470987, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1527668336/picture?type=large", "display_name": "Tyler Kelly", "link": "https://stackoverflow.com/users/3470987/tyler-kelly"}, "edited": false, "score": 0, "creation_date": 1453864806, "post_id": 35028135, "comment_id": 57782765, "body": "then you need to malloc and realloc.  when you get memory of malloc then you do need a pointer so you can point at the memory it gives you.  If you run out, realloc your memory to be bigger"}], "tags": [], "owner": {"reputation": 40865, "user_id": 10431, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/22aac6106c44ae4078bd4c0a564714e0?s=128&d=identicon&r=PG", "display_name": "Keith Nicholas", "link": "https://stackoverflow.com/users/10431/keith-nicholas"}, "is_accepted": false, "score": 2, "last_activity_date": 1453864097, "creation_date": 1453864097, "answer_id": 35028135, "question_id": 35028049, "link": "https://stackoverflow.com/questions/35028049/calculating-length-of-uninitialized-char-array/35028135#35028135", "title": "Calculating length of uninitialized char array", "body": "<p>you don't have a char array, you have a char *. To get what you want you need to something like :-</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    char string[100];\n    string[0]=0;\n    int loc = strlen(string);\n    printf(\"%d\", loc);\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 24, "user_id": 5046868, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ibNPU.jpg?s=128&g=1", "display_name": "Chungkil Kim", "link": "https://stackoverflow.com/users/5046868/chungkil-kim"}, "is_accepted": false, "score": -1, "last_activity_date": 1453869766, "creation_date": 1453869766, "answer_id": 35029044, "question_id": 35028049, "link": "https://stackoverflow.com/questions/35028049/calculating-length-of-uninitialized-char-array/35029044#35029044", "title": "Calculating length of uninitialized char array", "body": "<p>'char *' is just pointer to char, not char array.<br>\nso you can't count array.</p>\n\n<p>use like this</p>\n\n<pre><code>char array[100];\nint len = sizeof(array);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11698, "user_id": 5399734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2162d669508364bb0c03aba1a2473aa8?s=128&d=identicon&r=PG&f=1", "display_name": "nalzok", "link": "https://stackoverflow.com/users/5399734/nalzok"}, "is_accepted": false, "score": 0, "last_activity_date": 1453878486, "creation_date": 1453878486, "answer_id": 35030839, "question_id": 35028049, "link": "https://stackoverflow.com/questions/35028049/calculating-length-of-uninitialized-char-array/35030839#35030839", "title": "Calculating length of uninitialized char array", "body": "<p>To calculate the length of an uninitialized char array, you have to declare one first. In your code, you wrote <code>char *string_t;</code>. This statement declares a pointer to char, rather than an array of char.</p>\n\n<p>An uninitialized char array should be declared using something like <code>char s[1024];</code>. To create an initialized one, use <code>char s[1024] = \"foo\";</code>, or <code>char s[1024] = {'f', 'o', 'o'};</code>.</p>\n\n<p>So, actually, you are trying to calculate the length of an <strong>undeclared</strong> array, which is obviously impossible.</p>\n"}], "owner": {"reputation": 542, "user_id": 3470987, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1527668336/picture?type=large", "display_name": "Tyler Kelly", "link": "https://stackoverflow.com/users/3470987/tyler-kelly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1920, "favorite_count": 0, "answer_count": 5, "score": 3, "last_activity_date": 1453878486, "creation_date": 1453863625, "last_edit_date": 1453863767, "question_id": 35028049, "link": "https://stackoverflow.com/questions/35028049/calculating-length-of-uninitialized-char-array", "title": "Calculating length of uninitialized char array", "body": "<p>I want to calculate the length of an (at first) uninitialized char array.</p>\n\n<p>My code is:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    char *string_t;\n    int loc = sizeof(string_t)/sizeof(*string_t);\n    printf(\"%d\", loc);\n\n}\n</code></pre>\n\n<p>I expect <code>loc</code> to be <code>0</code> but instead <code>loc</code> is 8. Can someone tell me why this is and how I can \"fix\" this to be the answer I expect?</p>\n"}, {"tags": ["c", "linked-list", "segmentation-fault", "gdb", "hashtable"], "comments": [{"owner": {"reputation": 351, "user_id": 5705729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da18154b8824395df851f10443740701?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/5705729/alec"}, "edited": false, "score": 0, "creation_date": 1453863409, "post_id": 35027944, "comment_id": 57782323, "body": "whats in your words file?"}, {"owner": {"reputation": 85, "user_id": 4671923, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6086a4a1f68e602a443b9ba02efecf93?s=128&d=identicon&r=PG&f=1", "display_name": "imgoingmad", "link": "https://stackoverflow.com/users/4671923/imgoingmad"}, "reply_to_user": {"reputation": 351, "user_id": 5705729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da18154b8824395df851f10443740701?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/5705729/alec"}, "edited": false, "score": 0, "creation_date": 1453863507, "post_id": 35027944, "comment_id": 57782361, "body": "Would you like a copy? Otherwise, it&#39;s just a list of 10,000 words, one on each line. No spaces, or anything else."}, {"owner": {"reputation": 351, "user_id": 5705729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da18154b8824395df851f10443740701?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/5705729/alec"}, "edited": false, "score": 0, "creation_date": 1453863646, "post_id": 35027944, "comment_id": 57782398, "body": "a copy would be best!"}, {"owner": {"reputation": 85, "user_id": 4671923, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6086a4a1f68e602a443b9ba02efecf93?s=128&d=identicon&r=PG&f=1", "display_name": "imgoingmad", "link": "https://stackoverflow.com/users/4671923/imgoingmad"}, "reply_to_user": {"reputation": 351, "user_id": 5705729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da18154b8824395df851f10443740701?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/5705729/alec"}, "edited": false, "score": 0, "creation_date": 1453863827, "post_id": 35027944, "comment_id": 57782455, "body": "Here you go, <a href=\"http://pastebin.com/0Ndu6nAs\" rel=\"nofollow noreferrer\">pastebin.com/0Ndu6nAs</a>"}, {"owner": {"reputation": 6760, "user_id": 1401962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b8a7fe2bd33ed2532597f348d523fb?s=128&d=identicon&r=PG", "display_name": "tux3", "link": "https://stackoverflow.com/users/1401962/tux3"}, "edited": false, "score": 1, "creation_date": 1453863941, "post_id": 35027944, "comment_id": 57782489, "body": "Your hash table is a single Hash element, not an array. Yet in insertHash you access hashTable[index] without allocating it first. And hashmaker will return nonzero indexes."}, {"owner": {"reputation": 85, "user_id": 4671923, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6086a4a1f68e602a443b9ba02efecf93?s=128&d=identicon&r=PG&f=1", "display_name": "imgoingmad", "link": "https://stackoverflow.com/users/4671923/imgoingmad"}, "reply_to_user": {"reputation": 6760, "user_id": 1401962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b8a7fe2bd33ed2532597f348d523fb?s=128&d=identicon&r=PG", "display_name": "tux3", "link": "https://stackoverflow.com/users/1401962/tux3"}, "edited": false, "score": 0, "creation_date": 1453864334, "post_id": 35027944, "comment_id": 57782612, "body": "@tux3 This is my first implementation of a hashtable, and I just started c a few days ago so I&#39;m not sure where to go from here. How should I tweak it?"}, {"owner": {"reputation": 16010, "user_id": 1568658, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/FPSGe.jpg?s=128&g=1", "display_name": "user218867", "link": "https://stackoverflow.com/users/1568658/user218867"}, "edited": false, "score": 0, "creation_date": 1453864892, "post_id": 35027944, "comment_id": 57782784, "body": "You should declare <code>extern int hashmaker(char* word);</code> before functions. Always compile with <code>-Wall</code> option in gcc."}, {"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 1, "creation_date": 1453906982, "post_id": 35027944, "comment_id": 57805969, "body": "A hash table should have as many entries as the range of the hashing function. Your hashing function should probably use a <code>%</code> operator to limit the maximum value, and use an <code>unsigned int</code> so that it&#39;s not negative. Typically you want to avoid collisions, so the table size should be somewhat larger than the number of data items you want to insert into it, but you don&#39;t want to make it so large that you waste space."}, {"owner": {"reputation": 85, "user_id": 4671923, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6086a4a1f68e602a443b9ba02efecf93?s=128&d=identicon&r=PG&f=1", "display_name": "imgoingmad", "link": "https://stackoverflow.com/users/4671923/imgoingmad"}, "edited": false, "score": 0, "creation_date": 1453915395, "post_id": 35027944, "comment_id": 57812117, "body": "Yes, thanks. This was it. Instead of malloc, I calloc&#39;d  an appropriate amount of space for the hashtable in addition to this."}], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 2968260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uBayT.jpg?s=128&g=1", "display_name": "toyoubala", "link": "https://stackoverflow.com/users/2968260/toyoubala"}, "is_accepted": true, "score": 1, "last_activity_date": 1454061430, "creation_date": 1454061430, "answer_id": 35081555, "question_id": 35027944, "link": "https://stackoverflow.com/questions/35027944/why-am-i-getting-a-segmentation-fault-only-sometimes/35081555#35081555", "title": "Why am I getting a segmentation fault only sometimes?", "body": "<p>The hashTable  is an array of struct Hash but memory for it has not been allocated. You need to know the size of hashTable array and allocate memory to it before accessing it through an index eg. hasTable[idex]. If the size of hashTable is going to be n, allocate the memory as follows</p>\n\n<pre><code>hashTable = (struct Hash *) malloc(sizeof(struct Hash) * n);\n</code></pre>\n\n<p>If you do not know the size try with safe number. for example the below change should resolve the crash</p>\n\n<pre><code>hashTable = (struct Hash *) malloc(sizeof(struct Hash) * 3000);\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 4671923, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6086a4a1f68e602a443b9ba02efecf93?s=128&d=identicon&r=PG&f=1", "display_name": "imgoingmad", "link": "https://stackoverflow.com/users/4671923/imgoingmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3631, "favorite_count": 0, "accepted_answer_id": 35081555, "answer_count": 1, "score": 2, "last_activity_date": 1454061430, "creation_date": 1453862945, "question_id": 35027944, "link": "https://stackoverflow.com/questions/35027944/why-am-i-getting-a-segmentation-fault-only-sometimes", "title": "Why am I getting a segmentation fault only sometimes?", "body": "<p>I've got a hashtable here, and this program attempts to find anagrams by searching through linked-lists of words whose hash values are computed as the sum of their uppercase ascii values.</p>\n\n<p>I cannot see how this segfault is happening, much less understand what <code>gdb</code> is telling me. It's obvious it's happening in <code>anagramlookup()</code> but I cannot see how.</p>\n\n<p>Here is the <code>gdb</code> output:</p>\n\n<pre><code>Program received signal SIGSEGV, Segmentation fault.\n__strspn_sse2 ()\n    at ../sysdeps/x86_64/multiarch/../strspn.S:53\n53      ../sysdeps/x86_64/multiarch/../strspn.S: No such file or directory.\n(gdb) backtrace\n#0  __strspn_sse2 ()\n    at ../sysdeps/x86_64/multiarch/../strspn.S:53\n#1  0x0000000000400a0a in anagramlookup (\n    word=0x7fffffffe7c0 \"you\") at thirdfailure.c:66\n#2  0x0000000000400c17 in main () at thirdfailure.c:121\n(gdb) frame 2\n#2  0x0000000000400c17 in main () at thirdfailure.c:121\n121             anagramlookup(search);\n(gdb) print search\n$1 = \"you\\000\\000\\177\\000\\000\\221I\\336\\367\\377\\177\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\\020\\232\\377\\367\\377\\177\\000\\000\\001\", '\\000' &lt;repeats 15 times&gt;, \"\\001\\000\\000\\000\\377\\177\\000\\000\\310\\341\\377\\367\\377\\177\", '\\000' &lt;repeats 37 times&gt;\n</code></pre>\n\n<p>The segfault doesn't happen all the time. If the word to lookup is \"post\", everything works fine. But when it is for example, \"you\", that's when I get a segfault. \"youu\" does not give me a segfault. How would I go about fixing things?</p>\n\n<p>and here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n\nstruct Hash *hashTable = NULL;\n\nstruct Node{\n    char val[100];\n    struct Node *next;\n};\n\nstruct Hash{\n    int size;\n    struct Node *head;\n};\n\nstruct Node* newnode(char* word){\n\n    struct Node *ptr = (struct Node*)malloc(sizeof(struct Node));\n    strcpy(ptr-&gt;val, word);\n    ptr-&gt;next = NULL;\n    return ptr;\n\n}\n\nvoid insertHash(char* word){\n    int index = hashmaker(word);\n\n    struct Node *ptr = newnode(word);\n\n    if(!hashTable[index].head){\n        hashTable[index].head = ptr;\n        hashTable[index].size = 1;\n        return;\n    }\n    else{\n        ptr-&gt;next = (hashTable[index].head);\n        hashTable[index].head = ptr;\n        hashTable[index].size++;\n        return;\n    }\n}\n\nvoid anagramlookup(char* word){\n    int index = hashmaker(word);\n\n    struct Node *ptr = hashTable[index].head;\n\n    if(ptr == NULL){\n        printf(\"we dont have any\");\n    }\n    else{\n        while((ptr!= NULL)){\n            if(strlen(word)==strspn(word,ptr-&gt;val) &amp;&amp;\n                strlen(word)==strspn(ptr-&gt;val,word) &amp;&amp;\n                strlen(word)==strlen(ptr-&gt;val)){\n                if(strcmp(word,ptr-&gt;val) != 0){\n                    printf(\"\\n%s\", ptr-&gt;val );\n                }\n            }\n        ptr = ptr-&gt;next;\n        }\n    }\n}\n\n\nint hashmaker(char* word){\n\n    int toreturn = 0, i, len;\n    len = strlen(word);\n\n    for(i = 0; i &lt; len; i++){\n        toreturn += toupper(word[i]);\n    }\n    return toreturn;\n}\n\n\nint main(){\n\n    char search[100];\n\n\n    hashTable = (struct Hash *) malloc(sizeof(struct Hash));\n\n    FILE* dict = fopen(\"words2\", \"r\");\n        if(dict == NULL) {\n            printf(\"dict is null\");\n            exit(1);\n        }\n    // Read each line of the file, and print it to screen\n    char wordo[128];\n    while(fgets(wordo, sizeof(wordo), dict) != NULL) {\n        printf(\"%s\", wordo);\n        wordo[strlen(wordo) - 1] = '\\0';\n        insertHash(wordo);\n    }\n\n    printf(\"now enter your search: \");\n    fgets(search, sizeof(wordo), stdin);\n    search[strlen(search) - 1] = '\\0';\n    anagramlookup(search);\n    return 0;\n\n}\n</code></pre>\n"}, {"tags": ["c", "performance", "optimization"], "comments": [{"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 0, "creation_date": 1453862965, "post_id": 35027902, "comment_id": 57782190, "body": "Why don&#39;t you look at the assembly for each and compare?  <code>gcc -O3 -S program.c</code>"}, {"owner": {"reputation": 59, "user_id": 5071951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b763fb80bb009a4c84a6503d9ea32b25?s=128&d=identicon&r=PG&f=1", "display_name": "Omar Mu&#241;oz", "link": "https://stackoverflow.com/users/5071951/omar-mu%c3%b1oz"}, "reply_to_user": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 0, "creation_date": 1453863060, "post_id": 35027902, "comment_id": 57782223, "body": "I didn&#39;t know that was possible, I am kind of a beginner but thanks for the advise I will look into it as well"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1453863387, "post_id": 35027902, "comment_id": 57782314, "body": "The <code>%Ld</code> format used is not valid according to the standard (in either <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/scanf.html\" rel=\"nofollow noreferrer\"><code>scanf()</code></a> or <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/printf.html\" rel=\"nofollow noreferrer\"><code>printf()</code></a>, so the alternative answer is invoking platform-specific behaviour.  (With both functions, the <code>L</code> modifier is for use with the floating-point conversions to indicate <code>long double</code>.)  I&#39;m left wondering if the zero time is because the code invokes undefined behaviour and the program is left empty, leading to the 0 millisecond execution time."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1453863389, "post_id": 35027902, "comment_id": 57782316, "body": "A difference between the two is that you use <code>int</code> whereas the other uses <code>long long int</code>. If the input file contains numbers that are bigger than <code>INT_MAX</code> then your code causes undefined behaviour . Do you know whether the input file does indeed contain such numbers?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1453863583, "post_id": 35027902, "comment_id": 57782381, "body": "@JonathanLeffler in that case the program would not generate the expected output  (so in theory the judge would reject it)"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1453863638, "post_id": 35027902, "comment_id": 57782393, "body": "The specification includes <i>The input contains several test cases and begins with a number T (T &lt;= 10^3) denoting how many test cases there are. T lines follow, each one with a single positive integer in the range [1, 2^63-1].</i>  There are few systems where plain <code>int</code> is a 64-bit quantity."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1453863690, "post_id": 35027902, "comment_id": 57782410, "body": "@M.M: agreed, but it is surprising that it can read and calculate and report up to 1000 minimal powers of 2 so quickly that it takes less than 1 ms."}, {"owner": {"reputation": 59, "user_id": 5071951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b763fb80bb009a4c84a6503d9ea32b25?s=128&d=identicon&r=PG&f=1", "display_name": "Omar Mu&#241;oz", "link": "https://stackoverflow.com/users/5071951/omar-mu%c3%b1oz"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1453863762, "post_id": 35027902, "comment_id": 57782433, "body": "@M.M You are right the online judge specifies a range of [1, 2^63 - 1] for the input which will probably lead to a wrong answer from my code, although the solution was accepted, but is there a relationship with performance there?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1453863878, "post_id": 35027902, "comment_id": 57782471, "body": "@OmarMu&#241;oz yes, when your program triggers undefined behaviour then anything can happen.  There&#39;s no point trying to reason about it really. Fix your code to use <code>uint64_t</code> or <code>unsigned long long</code> , and the correct format specifier (<code>&quot;%&quot; SCNu64</code> or <code>&quot;%llu&quot;</code> respectively) and see if the performance difference remains"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1453863909, "post_id": 35027902, "comment_id": 57782479, "body": "@M.M: <code>LLONG_MAX</code> has to be at least 2^63-1, so I don&#39;t see why there&#39;s a problem using <code>long long</code> types.  If you meant <code>LONG_MAX</code>, then I&#39;d agree that it could be as small as 2^31-1 \u2014 but it could also be 2^63-1.  It depends on the hardware and software used by the online judge."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1453863944, "post_id": 35027902, "comment_id": 57782490, "body": "Oh, right. I mentally read that as 2^64-1 for some reason."}], "owner": {"reputation": 59, "user_id": 5071951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b763fb80bb009a4c84a6503d9ea32b25?s=128&d=identicon&r=PG&f=1", "display_name": "Omar Mu&#241;oz", "link": "https://stackoverflow.com/users/5071951/omar-mu%c3%b1oz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1453862644, "creation_date": 1453862644, "question_id": 35027902, "link": "https://stackoverflow.com/questions/35027902/c-code-performance-comparison-why-is-one-of-them-much-faster", "title": "C code performance comparison, why is one of them much faster", "body": "<p>Recently I started solving problems from an online judge: <a href=\"http://coj.uci.cu/\" rel=\"nofollow\">http://coj.uci.cu/</a></p>\n\n<p>And I solved one problem about calculating the least power of two of a number </p>\n\n<p>(Full description: <a href=\"http://coj.uci.cu/24h/problem.xhtml?pid=1158\" rel=\"nofollow\">http://coj.uci.cu/24h/problem.xhtml?pid=1158</a>)</p>\n\n<p>SAMPLE INPUT</p>\n\n<pre><code>2    // This means we want to perform the algorithm twice for the next input\n4\n192\n</code></pre>\n\n<p>SAMPLE OUTPUT</p>\n\n<pre><code>4\n64\n</code></pre>\n\n<p>After you solve you can compare your answer with the others so this are two different codes that solve the same problem (the basic idea is to keep dividing by two until the modulus is different from zero, then we find the minimum power and make 2*minimum to find the answer)</p>\n\n<p>MY SOLUTION</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n    int a,result;\n    int i = 0;\n    int leastPow = 1;\n    scanf(\"%d\",&amp;a);             // Read the number of conversions\n    for(i = 0; i &lt; a; i++){\n        scanf(\"%d\",&amp;result);    // Read the number to calculate the least pow\n        while(result!=0){       // While there is still divisions to make...       \n            if(result%2!=0)    \n                break;          // hence we break the loop, we are done...\n            result = result/2;  // Otherwise we can keep on dividing\n            leastPow *= 2;\n        }\n        printf(\"%d\\n\",leastPow);// Print the result\n        leastPow = 1;          // Re initialize for next number\n    }\n    return 0;\n}\n</code></pre>\n\n<p>One of the top solutions (by nilre)</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main()\n{\n    long long pot,n;\n    int t;\n    scanf(\"%d\",&amp;t);\n    while(t--)\n    {\n        scanf(\"%Ld\",&amp;n);\n        pot = 1;\n        while(n)\n            if(n%2 == 0)\n            {\n                pot *= 2;\n                n /= 2;\n            }else break;\n        printf(\"%Ld\\n\",pot);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>For me the codes look very similar but the online judge gives the following performance results</p>\n\n<p>MY SOLUTION</p>\n\n<pre><code>Time: 37 ms\nMem:  1 MB\nSize: 1 KB\n</code></pre>\n\n<p>OTHER SOLUTION</p>\n\n<pre><code>Time: 0 ms\nMem:  270 bytes\nSize: 348 bytes\n</code></pre>\n\n<p>I am very curious about what makes such a great difference in performance </p>\n"}]