[{"tags": ["c++", "c", "pointers"], "answers": [{"comments": [{"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 2, "creation_date": 1430955328, "post_id": 30089452, "comment_id": 48291860, "body": "well <code>unsigned int</code> does not overflow, it wraps around modulo max_size"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1430955380, "post_id": 30089452, "comment_id": 48291881, "body": "@vsoftco: Right, unsigned integer types don&#39;t overflow -- which makes it pretty difficult to define what would happen if they did. 8-)}"}, {"owner": {"reputation": 3380, "user_id": 864313, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/46d9bb3f16218a79557903d469a05aa3?s=128&d=identicon&r=PG", "display_name": "EyasSH", "link": "https://stackoverflow.com/users/864313/eyassh"}, "edited": false, "score": 0, "creation_date": 1430955419, "post_id": 30089452, "comment_id": 48291890, "body": "You&#39;re absolutely right. In fact a pointer is more of an <code>unsigned</code> than an <code>int</code>, which is why first paragraph and @Mike Robinson&#39;s answers are inaccurate. I&#39;ll update accordingly."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1430955453, "post_id": 30089452, "comment_id": 48291901, "body": "@EyasSH that&#39;s why I asked the question. A pointer usually stores the same values as a <code>size_t</code>."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1430955500, "post_id": 30089452, "comment_id": 48291918, "body": "@EyasSH: Pointers are neither signed nor unsigned, and there&#39;s no basis in the standard for saying that they&#39;re more similar to unsigned integers than to signed integers."}, {"owner": {"reputation": 3380, "user_id": 864313, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/46d9bb3f16218a79557903d469a05aa3?s=128&d=identicon&r=PG", "display_name": "EyasSH", "link": "https://stackoverflow.com/users/864313/eyassh"}, "edited": false, "score": 0, "creation_date": 1430955557, "post_id": 30089452, "comment_id": 48291940, "body": "It should still be &#39;undefined&#39; or &#39;unspecified&#39; behavior. Let me  look up the exact relevant parts."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1430955619, "post_id": 30089452, "comment_id": 48291957, "body": "@EyasSH: It&#39;s undefined behavior -- but the only relevant bounds are those of the array object into which the pointer points. (A single object is treated as a one-element array for purposes of pointer arithmetic.) You could probably delete everything up to and including the word &quot;Additionally&quot;."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1430955726, "post_id": 30089452, "comment_id": 48291990, "body": "@KeithThompson are you saying that you get UB because you increment the pointer past the array/allocated memory boundary? Even if you don&#39;t dereference it?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1430955744, "post_id": 30089452, "comment_id": 48291995, "body": "What&#39;s the significance of &#39;after unallocated memory&#39;?  Is it a typo for &#39;after allocated memory&#39;, or are you trying to describe something else?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1430955764, "post_id": 30089452, "comment_id": 48292001, "body": "@vsoftco: Yes, that&#39;s exactly what the standard says in the excerpt quoted in the answer."}, {"owner": {"reputation": 3380, "user_id": 864313, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/46d9bb3f16218a79557903d469a05aa3?s=128&d=identicon&r=PG", "display_name": "EyasSH", "link": "https://stackoverflow.com/users/864313/eyassh"}, "reply_to_user": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1430956580, "post_id": 30089452, "comment_id": 48292245, "body": "@vsoftco: see updated answer for detail. I also include a link to GCC&#39;s &quot;one past the end&quot; doc to explain the significance."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1430956675, "post_id": 30089452, "comment_id": 48292268, "body": "@EyasSH thanks, your answer now seems to nail it! I was aware of the one-past-the-end stuff (since otherwise using <code>[a,b)</code> ranges would have been a pain), however I had the impression that you enter UB only when trying to dereference."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1430957073, "post_id": 30089452, "comment_id": 48292395, "body": "Just 5.7.5 should&#39;ve been sufficient. It&#39;s pretty clear."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1430958091, "post_id": 30089452, "comment_id": 48292671, "body": "@Barry the thing that throws me off a bit is the link between the pointer and the array/memory. In particular, the standard doesn&#39;t say what happens with a pointer that is un-initialized, does it?"}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1430958454, "post_id": 30089452, "comment_id": 48292756, "body": "@Barry yes, I guess that&#39;s true. But what if <code>char* p = (char*)0xAABB10E</code> ? In this way you initialize the pointer, but of course have no idea what&#39;s at that memory location, and most certainly don&#39;t own it."}, {"owner": {"reputation": 3380, "user_id": 864313, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/46d9bb3f16218a79557903d469a05aa3?s=128&d=identicon&r=PG", "display_name": "EyasSH", "link": "https://stackoverflow.com/users/864313/eyassh"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1430960600, "post_id": 30089452, "comment_id": 48293273, "body": "@Barry: 5.7.4 is quite necessary to explain that this behavior is not exclusive to arrays. Including 3.7.4.3.2 is a weaker argument."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1430961938, "post_id": 30089452, "comment_id": 48293601, "body": "@EyasSH I think 5.7.4 answers my last question above."}], "tags": [], "owner": {"reputation": 3380, "user_id": 864313, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/46d9bb3f16218a79557903d469a05aa3?s=128&d=identicon&r=PG", "display_name": "EyasSH", "link": "https://stackoverflow.com/users/864313/eyassh"}, "is_accepted": true, "score": 10, "last_activity_date": 1430956301, "last_edit_date": 1430956301, "creation_date": 1430955266, "answer_id": 30089452, "question_id": 30089415, "link": "https://stackoverflow.com/questions/30089415/do-pointer-types-wrap-around-their-maximum-value/30089452#30089452", "title": "Do pointer types wrap around their maximum value?", "body": "<p>Short answer: by spec, it is undefined behavior. Performing any pointer arithmetic that leads to unallocated memory more than one address past an allocated item (see the <a href=\"https://gcc.gnu.org/onlinedocs/libstdc++/manual/iterators.html\">One Past the End</a> chapter in the GCC docs for the significance of this) is undefined behavior.</p>\n\n<hr>\n\n<p>To see why, let us look at the standard:</p>\n\n<p>Sec 3.7.4.3.2 in the C++11 standard enumerates over all \"safely-derived pointer\" types. Most items in sec 3.7.4.3.2 of the standard describe ways to obtain references to objects legally. Assuming a pointer refers to allocated memory, 3.7.4.3.2 simply states:</p>\n\n<blockquote>\n  <p>A pointer value is a <em>safely-derived pointer</em> to a dynamic object only if it has an object pointer type and it is one of the following:</p>\n  \n  <ul>\n  <li>the result of well-defined pointer arithmetic (5.7) using a safely-derived pointer value;</li>\n  </ul>\n</blockquote>\n\n<p>Sec 5.7.4 states:</p>\n\n<blockquote>\n  <p>For the purposes of these operators, <strong>a pointer to a nonarray object behaves the same as a pointer to the first element of an array of length one with the type of the object as its element type</strong>.</p>\n</blockquote>\n\n<p>Finally, sec 5.7.5:</p>\n\n<blockquote>\n  <p>If both the pointer operand and the result point to elements of the same array object, or one past the last element of the array object, the evaluation shall not produce an overflow; <strong>otherwise, the behavior is undefined.</strong></p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 134595, "user_id": 140740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf6eddcd47c263a1a5d31bdb4f7b6424?s=128&d=identicon&r=PG", "display_name": "DigitalRoss", "link": "https://stackoverflow.com/users/140740/digitalross"}, "is_accepted": false, "score": 2, "last_activity_date": 1430956319, "creation_date": 1430956319, "answer_id": 30089607, "question_id": 30089415, "link": "https://stackoverflow.com/questions/30089415/do-pointer-types-wrap-around-their-maximum-value/30089607#30089607", "title": "Do pointer types wrap around their maximum value?", "body": "<p>From a specification point of view: it's UB.</p>\n\n<p>From a <em>what-will-it-do</em> point of view, yes, it will eventually wrap around to zero in most environments, especially for plain C. It may take a century or so on a 64-bit system.</p>\n"}], "owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 789, "favorite_count": 0, "accepted_answer_id": 30089452, "answer_count": 2, "score": 10, "last_activity_date": 1430956319, "creation_date": 1430955025, "question_id": 30089415, "link": "https://stackoverflow.com/questions/30089415/do-pointer-types-wrap-around-their-maximum-value", "title": "Do pointer types wrap around their maximum value?", "body": "<p>Consider a pointer <code>char* p</code> that is not <code>nullptr</code>, and the loop</p>\n\n<pre><code>while(++p);\n</code></pre>\n\n<p>Is the behaviour well defined or undefined? In other words, will the pointer eventually become 0 when reaching the maximum allocable memory (probably 2^32 or 2^64) or this is just UB?</p>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/types/numeric_limits\">std::numeric_limits</a> is (as expected) not specialized for pointer types.</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 13971, "user_id": 554807, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/11449ff391eb9e813ac9f467ae6e0102?s=128&d=identicon&r=PG", "display_name": "GreenAsJade", "link": "https://stackoverflow.com/users/554807/greenasjade"}, "edited": false, "score": 0, "creation_date": 1430955108, "post_id": 30089366, "comment_id": 48291791, "body": "<a href=\"http://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>   and <a href=\"http://stackoverflow.com/help/on-topic\">stackoverflow.com/help/on-topic</a>   especially point #3."}, {"owner": {"reputation": 119, "user_id": 4834914, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c5b877ab031b2f8bad163081a54863fb?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Cinnamon", "link": "https://stackoverflow.com/users/4834914/jon-cinnamon"}, "reply_to_user": {"reputation": 13971, "user_id": 554807, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/11449ff391eb9e813ac9f467ae6e0102?s=128&d=identicon&r=PG", "display_name": "GreenAsJade", "link": "https://stackoverflow.com/users/554807/greenasjade"}, "edited": false, "score": 0, "creation_date": 1430955225, "post_id": 30089366, "comment_id": 48291831, "body": "@GreenAsJade This isn&#39;t homework."}, {"owner": {"reputation": 13971, "user_id": 554807, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/11449ff391eb9e813ac9f467ae6e0102?s=128&d=identicon&r=PG", "display_name": "GreenAsJade", "link": "https://stackoverflow.com/users/554807/greenasjade"}, "edited": false, "score": 0, "creation_date": 1430955491, "post_id": 30089366, "comment_id": 48291915, "body": "Duck typing applies."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1430956519, "post_id": 30089366, "comment_id": 48292228, "body": "And what is your question? Because I only see a homework assignment question, whether it is actually homework or not."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 13971, "user_id": 554807, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/11449ff391eb9e813ac9f467ae6e0102?s=128&d=identicon&r=PG", "display_name": "GreenAsJade", "link": "https://stackoverflow.com/users/554807/greenasjade"}, "edited": false, "score": 0, "creation_date": 1430956841, "post_id": 30089366, "comment_id": 48292315, "body": "@GreenAsJade in C, really?"}, {"owner": {"reputation": 13971, "user_id": 554807, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/11449ff391eb9e813ac9f467ae6e0102?s=128&d=identicon&r=PG", "display_name": "GreenAsJade", "link": "https://stackoverflow.com/users/554807/greenasjade"}, "edited": false, "score": 0, "creation_date": 1430956931, "post_id": 30089366, "comment_id": 48292350, "body": "LOL.  In StackOverflow questions, of course.   There are no rules in StackOverflow, only guidelines... DuckTyping applies."}, {"owner": {"reputation": 119, "user_id": 4834914, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c5b877ab031b2f8bad163081a54863fb?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Cinnamon", "link": "https://stackoverflow.com/users/4834914/jon-cinnamon"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1430974705, "post_id": 30089366, "comment_id": 48297051, "body": "@Deduplicator I suppose I just worded it like one so I could get the question straight to the point."}], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 4834914, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c5b877ab031b2f8bad163081a54863fb?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Cinnamon", "link": "https://stackoverflow.com/users/4834914/jon-cinnamon"}, "edited": false, "score": 0, "creation_date": 1430974671, "post_id": 30089432, "comment_id": 48297041, "body": "This was my initial idea, I was looking for something faster though"}], "tags": [], "owner": {"reputation": 1017, "user_id": 2599537, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/bf6e2a137be7b8bd13d1f8efec703554?s=128&d=identicon&r=PG", "display_name": "devil0150", "link": "https://stackoverflow.com/users/2599537/devil0150"}, "is_accepted": false, "score": 0, "last_activity_date": 1430955170, "creation_date": 1430955170, "answer_id": 30089432, "question_id": 30089366, "link": "https://stackoverflow.com/questions/30089366/finding-space-in-a-small-array-that-isnt-being-occupied/30089432#30089432", "title": "Finding space in a small array that isn&#39;t being occupied", "body": "<p>You can just loop through the array and input the value in the first index that isn't A or B.</p>\n\n<pre><code>for (int i = 0; i &lt; 8; ++i)\n    if (i != A &amp;&amp; i != B)\n    {\n        array[i] = value_to_input;\n        break;\n    }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4685, "user_id": 4192931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c26d448bf8935cf10be612180b85ffc7?s=128&d=identicon&r=PG", "display_name": "JS1", "link": "https://stackoverflow.com/users/4192931/js1"}, "edited": false, "score": 0, "creation_date": 1430966773, "post_id": 30090637, "comment_id": 48294802, "body": "Another thing you could do, if the size of the array N were arbitrarily large (N&gt;2) is that you could solve just for N=3.  If you had an expression E that worked for N=3, you could solve any sized array using: <code>C=E(A%3, B%3)</code>."}], "tags": [], "owner": {"reputation": 44047, "user_id": 1400793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7VxVK.png?s=128&g=1", "display_name": "Paul Hankin", "link": "https://stackoverflow.com/users/1400793/paul-hankin"}, "is_accepted": true, "score": 1, "last_activity_date": 1430966868, "last_edit_date": 1430966868, "creation_date": 1430963725, "answer_id": 30090637, "question_id": 30089366, "link": "https://stackoverflow.com/questions/30089366/finding-space-in-a-small-array-that-isnt-being-occupied/30090637#30090637", "title": "Finding space in a small array that isn&#39;t being occupied", "body": "<p>If you start with the assumption that the formula is going to look like <code>E(A, B)&amp;7</code> for some E, then you can search for E that minimizes the number of operations.</p>\n\n<p>This approach finds a solution: <code>(A|1)^(B|2)</code> (which has the nice property that the <code>&amp;7</code> isn't necessary!)</p>\n\n<p>We can check this is different from A and B for all 0 &lt;= A, B &lt;= 7.</p>\n\n<pre><code>for A in xrange(8):\n    for B in xrange(8):\n        r = (A|1)^(B|2)\n        print A, B, r\n        assert r != A and r != B\n</code></pre>\n\n<p>It's easy to see how the expression works: the lowest bit always differs from the lowest bit of B, and the second-lowest bit always differs from the second-lowest bit of A.</p>\n\n<p>Here's the code that searches for E. It's a small stack-machine that tries every legal combination of operations. While it's running it occasionally prints counter-examples, and periodically shows all the working expressions.</p>\n\n<pre><code>import random\n\ndef hash_ok(ops):\n    h = make_hash(ops)\n    for i in xrange(8):\n        for j in xrange(8):\n            try:\n                r = h(i, j)\n            except Exception as e:\n                return False, '%d, %d: %s -&gt; %s' % (i, j, ops, e)\n            if r == i or r == j:\n                return False, '%d, %d: %s -&gt; %d' % (i, j, ops, r)\n    return True, None\n\nops = [\n  ('a', 0, 1), ('b', 0, 1), ('+', 2, 1), ('-', 2, 1), ('*', 2, 1), ('/', 2, 1), ('%', 2, 1),\n  ('|', 2, 1), ('&amp;', 2, 1), ('^', 2, 1), ('~', 1, 1), ('neg', 1, 1), ('&lt;&lt;', 2, 1), ('&gt;&gt;', 2, 1)] + [\n    (str(n), 0, 1) for n in xrange(0, 3)]\n\nop_by_arity = {0: [], 1: [], 2: []}\narity = dict()\n\nfor op, a, n in ops:\n    op_by_arity[a].append((op, n))\n    arity[op] = a\n\ndef print_ops(ops):\n    s = []\n    for o in ops:\n        if arity[o] == 0:\n            s.append(o)\n        elif arity[o] == 1:\n            s.append('%s(%s)' % (o, s.pop()))\n        else:\n            y, x = s.pop(), s.pop()\n            s.append('(%s %s %s)' % (x, o, y))\n    return s[0]\n\nprint op_by_arity\n\ndef make_hash(ops):\n    def f(a, b):\n        s = []\n        for o in ops:\n            if o == 'a':\n                s.append(a)\n            elif o=='b': \n                s.append(b)\n            elif o=='&gt;&gt;':\n                y, x = s.pop(), s.pop()\n                s.append(x&gt;&gt;y)\n            elif o=='&lt;&lt;':\n                y, x = s.pop(), s.pop()\n                s.append(x&lt;&lt;y)\n            elif o=='+':\n                s.append(s.pop()+s.pop())\n            elif o=='-':\n                s.append(-(s.pop()-s.pop()))\n            elif o=='*':\n                s.append(s.pop()*s.pop())\n            elif o=='/':\n                y, x = s.pop(), s.pop()\n                s.append(x//y)\n            elif o=='%':\n                y, x = s.pop(), s.pop()\n                s.append(x%y)\n            elif o=='|':\n                s.append(s.pop()|s.pop())\n            elif o=='&amp;':\n                s.append(s.pop()&amp;s.pop())\n            elif o=='^':\n                s.append(s.pop()^s.pop())\n            elif o=='~':\n                s.append(~s.pop())\n            elif o=='neg':\n                s.append(-s.pop())\n            elif o &gt;= '0' and o &lt;= '9':\n                s.append(int(o))\n            elif o[0] == '-':\n                s.append(int(o))\n            else:\n                raise Exception('bogus op %s' % o)\n        assert len(s) == 1\n        return (s[0] % 8)\n    return f\n\ndef enumerate_ops(n, s):\n    if n == 0:\n        if s == 1:\n            yield []\n        return\n    for a, aops in op_by_arity.iteritems():\n        if a &gt; s:\n            continue\n        for op, add in aops:\n            for seq in enumerate_ops(n - 1, s - a + add):\n                yield [op] + seq\n\nwinners = []\n\nfor i, ops in enumerate(enumerate_ops(7, 0)):\n    ok, err = hash_ok(ops)\n    if ok:\n        print print_ops(ops)\n        winners.append(ops)\n    if random.randrange(100000) == 1:\n        print err\n    if i % 1000000 == 0:\n        for w in winners:\n            print print_ops(w)\n\nprint\n\nfor w in winners:\n    print print_ops(w)\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 4834914, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c5b877ab031b2f8bad163081a54863fb?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Cinnamon", "link": "https://stackoverflow.com/users/4834914/jon-cinnamon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 1, "accepted_answer_id": 30090637, "answer_count": 2, "score": 0, "last_activity_date": 1430966868, "creation_date": 1430954769, "last_edit_date": 1430956449, "question_id": 30089366, "link": "https://stackoverflow.com/questions/30089366/finding-space-in-a-small-array-that-isnt-being-occupied", "title": "Finding space in a small array that isn&#39;t being occupied", "body": "<blockquote>\n  <p>You are given an array which contains 8 cells. You are also given two random indices of that array, for example A and B. How would you find a cell that isn't the index of A or B in an array?</p>\n</blockquote>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1430956340, "post_id": 30089264, "comment_id": 48292169, "body": "If the number enter is <code>0</code>, <code>printf(&quot;\\n%s&quot;, binary);</code> attempts to print uninitialized memory - amongst other issues (like no terminating null character.)"}], "answers": [{"comments": [{"owner": {"reputation": 185, "user_id": 4358289, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/im03Z.jpg?s=128&g=1", "display_name": "schmitsz", "link": "https://stackoverflow.com/users/4358289/schmitsz"}, "edited": false, "score": 0, "creation_date": 1430954327, "post_id": 30089283, "comment_id": 48291579, "body": "Runs into an endless loop."}], "tags": [], "owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "is_accepted": false, "score": 0, "last_activity_date": 1430954335, "last_edit_date": 1430954335, "creation_date": 1430954279, "answer_id": 30089283, "question_id": 30089264, "link": "https://stackoverflow.com/questions/30089264/converting-decimal-number-to-binary-in-c/30089283#30089283", "title": "Converting decimal number to binary in C", "body": "<p>You are filling in your array from the back to the front. You stop once the number is \"done\", and don't \"left pad\" the remaining characters at the start of the array so they are not initialized. Either initialize the whole array to <code>'0'</code> at the start, or add something like:</p>\n\n<pre><code>while(i &gt;= 0) {\n    binary[i] = '0';\n    i--;\n}\n</code></pre>\n\n<p>at the end. (I think I'd got with initializing to '0'). You also need to ensure that <code>buffer</code> is big enough (50, not 10). And insert chars, not ints: <code>binary[i] = '0' + (number % 2);</code></p>\n"}, {"tags": [], "owner": {"reputation": 9526, "user_id": 633150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea1b038a29d1ad796d0f79fde37635df?s=128&d=identicon&r=PG", "display_name": "Brent Worden", "link": "https://stackoverflow.com/users/633150/brent-worden"}, "is_accepted": false, "score": 1, "last_activity_date": 1430954364, "creation_date": 1430954364, "answer_id": 30089296, "question_id": 30089264, "link": "https://stackoverflow.com/questions/30089264/converting-decimal-number-to-binary-in-c/30089296#30089296", "title": "Converting decimal number to binary in C", "body": "<p>You initialize i to 50 yet your binary buffer is only 10 characters in length.  So you are not populating the correct elements inside the loop.</p>\n"}, {"comments": [{"owner": {"reputation": 185, "user_id": 4358289, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/im03Z.jpg?s=128&g=1", "display_name": "schmitsz", "link": "https://stackoverflow.com/users/4358289/schmitsz"}, "edited": false, "score": 0, "creation_date": 1430955158, "post_id": 30089403, "comment_id": 48291808, "body": "If I enter <code>10</code> it returns <code>@</code>"}, {"owner": {"reputation": 973, "user_id": 4777513, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/inkg3.jpg?s=128&g=1", "display_name": "Ekleog", "link": "https://stackoverflow.com/users/4777513/ekleog"}, "reply_to_user": {"reputation": 185, "user_id": 4358289, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/im03Z.jpg?s=128&g=1", "display_name": "schmitsz", "link": "https://stackoverflow.com/users/4358289/schmitsz"}, "edited": false, "score": 0, "creation_date": 1430955218, "post_id": 30089403, "comment_id": 48291828, "body": "Just adding last point to address what may be the first problem you face"}, {"owner": {"reputation": 185, "user_id": 4358289, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/im03Z.jpg?s=128&g=1", "display_name": "schmitsz", "link": "https://stackoverflow.com/users/4358289/schmitsz"}, "edited": false, "score": 0, "creation_date": 1430955591, "post_id": 30089403, "comment_id": 48291948, "body": "Sorry but I feel the answer is irrelevant."}, {"owner": {"reputation": 973, "user_id": 4777513, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/inkg3.jpg?s=128&g=1", "display_name": "Ekleog", "link": "https://stackoverflow.com/users/4777513/ekleog"}, "reply_to_user": {"reputation": 185, "user_id": 4358289, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/im03Z.jpg?s=128&g=1", "display_name": "schmitsz", "link": "https://stackoverflow.com/users/4358289/schmitsz"}, "edited": false, "score": 1, "creation_date": 1430956039, "post_id": 30089403, "comment_id": 48292074, "body": "Excuse me? Have you at least tried reading all my points and using the proposed resolutions? Even if it does not solve all your problems, it will certainly solve at least 4 reasons that make your program bug <b>for sure</b>. That&#39;s 4 fewer bugs."}, {"owner": {"reputation": 973, "user_id": 4777513, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/inkg3.jpg?s=128&g=1", "display_name": "Ekleog", "link": "https://stackoverflow.com/users/4777513/ekleog"}, "reply_to_user": {"reputation": 185, "user_id": 4358289, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/im03Z.jpg?s=128&g=1", "display_name": "schmitsz", "link": "https://stackoverflow.com/users/4358289/schmitsz"}, "edited": false, "score": 0, "creation_date": 1430956241, "post_id": 30089403, "comment_id": 48292142, "body": "Besides, I just tested it, the corrected version (with all proposed fixes applied) actually <b>does</b> work. And no, I won&#39;t post the complete code here so you are forced to understand the &quot;why&quot; of your mistakes."}], "tags": [], "owner": {"reputation": 973, "user_id": 4777513, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/inkg3.jpg?s=128&g=1", "display_name": "Ekleog", "link": "https://stackoverflow.com/users/4777513/ekleog"}, "is_accepted": true, "score": 3, "last_activity_date": 1430956306, "last_edit_date": 1430956306, "creation_date": 1430954974, "answer_id": 30089403, "question_id": 30089264, "link": "https://stackoverflow.com/questions/30089264/converting-decimal-number-to-binary-in-c/30089403#30089403", "title": "Converting decimal number to binary in C", "body": "<p>There are multiple problems with your code (no specific order but the one I found them):</p>\n\n<ul>\n<li><p>You are initializing a <code>char</code> with an <code>int</code> at line <code>binary[i] = number % 2</code>; you should properly transform the integer to a character, like this:</p>\n\n<pre><code>binary[i] = '0' + (number % 2);\n</code></pre></li>\n<li><p>You are writing <code>printf(\"\\n%s\", binary);</code> where <code>binary</code> is a <code>char[10]</code>, thus not necessarily null-terminated. You should add one more character to <code>binary</code> and initialize it to <code>\\0</code>:</p>\n\n<pre><code>char binary[11];\nbinary[10] = '\\0';\n</code></pre></li>\n<li><p>You are wrongly initializing your array: you start with <code>i = 50</code> and <code>binary[10]</code>. You should add a constant and use it twice:</p>\n\n<pre><code>#define MAX_SIZE 32\nint i = MAX_SIZE - 1;\nchar binary[MAX_SIZE + 1];\nbinary[MAX_SIZE] = '\\0';\n</code></pre>\n\n<p>Note the <code>-1</code> you forgot, that avoids that you write after the end of the string, and the <code>+1</code> that is essentially the last problem</p></li>\n<li><p>You are reading an <code>int</code> and trying to get its binary representation; but the (true) binary representation of a negative value is usually not what you would expect. Prefer reading an <code>unsigned int</code>:</p>\n\n<pre><code>unsigned int number;\nscanf(\"%u\", &amp;number);\n</code></pre></li>\n<li><p>You could replace <code>number % 2</code> with <code>number &amp; 1</code> and <code>number /= 2</code> with <code>number &gt;&gt;= 1</code>; which is more representative of exactly what (binary) operations you are running on <code>number</code>. Besides, this should actually work correctly on negative integers, where your version should not (untested, anyway you usually have no reason of wanting to get the binary representation of a negative integer):</p>\n\n<pre><code>binary[i--] = '0' + (number &amp; 1);\nnumber &gt;&gt;= 1;\n</code></pre></li>\n<li><p>You stop after your number is zero, but that means you did not necessarily fill the <code>binary</code> array; this implies you may have uninitialized characters at the beginning of <code>binary</code> (on VC++ in debug mode this should IIRC be displayed as <code>\u00ff</code> characters). You should add, after your loop, something such as this so as to fill the array:</p>\n\n<pre><code>while (i &gt;= 0)\n    binary[i--] = '0';\n</code></pre></li>\n</ul>\n\n<p>Hope that helps!</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 5226124, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-M_T5EjkIzLo/AAAAAAAAAAI/AAAAAAAAASY/hruq7oGV4mQ/photo.jpg?sz=128", "display_name": "Harish K", "link": "https://stackoverflow.com/users/5226124/harish-k"}, "is_accepted": false, "score": 1, "last_activity_date": 1439533760, "last_edit_date": 1439533760, "creation_date": 1439533222, "answer_id": 32003489, "question_id": 30089264, "link": "https://stackoverflow.com/questions/30089264/converting-decimal-number-to-binary-in-c/32003489#32003489", "title": "Converting decimal number to binary in C", "body": "<pre><code>#include &lt;stdio.h&gt;\n#define MAX_SIZE 32\n\nint main()\n{\n    unsigned int number = 0;\n    int i = MAX_SIZE - 1;\n    char binary[MAX_SIZE + 1];\n    binary[MAX_SIZE] = '\\0';\n    printf(\"Enter a number: \");\n    scanf(\"%u\", &amp;number);\n\n    while(number!=0)\n    {\n        binary[i--] = '0' + (number &amp; 1);\n        number &gt;&gt;= 1;\n    }\n\n    while (i &gt;= 0)\n        binary[i--] = '0';\n    printf(\"\\n%s\", binary);\n}\n</code></pre>\n\n<p>Hope this helps....</p>\n"}], "owner": {"reputation": 185, "user_id": 4358289, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/im03Z.jpg?s=128&g=1", "display_name": "schmitsz", "link": "https://stackoverflow.com/users/4358289/schmitsz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 317, "favorite_count": 1, "accepted_answer_id": 30089403, "answer_count": 4, "score": 0, "last_activity_date": 1439533760, "creation_date": 1430954123, "question_id": 30089264, "link": "https://stackoverflow.com/questions/30089264/converting-decimal-number-to-binary-in-c", "title": "Converting decimal number to binary in C", "body": "<p>I'm trying to convert a decimal number to binary but I somehow end up getting 'random' ASCII symbols as an output. Here is my program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    int number = 0;\n    int i = 50;\n    char binary[10];\n    printf(\"Enter a number: \");\n    scanf(\"%d\", &amp;number);\n     while(number!=0){\n         binary[i] = number % 2;\n         i--;\n         number = number / 2;\n    }\n    printf(\"\\n%s\", binary);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "file-mapping"], "answers": [{"tags": [], "owner": {"reputation": 4685, "user_id": 4192931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c26d448bf8935cf10be612180b85ffc7?s=128&d=identicon&r=PG", "display_name": "JS1", "link": "https://stackoverflow.com/users/4192931/js1"}, "is_accepted": true, "score": 1, "last_activity_date": 1430960139, "last_edit_date": 1592644375, "creation_date": 1430960139, "answer_id": 30090135, "question_id": 30089238, "link": "https://stackoverflow.com/questions/30089238/why-doesnt-this-file-mapped-variable-get-flushed-to-the-disk/30090135#30090135", "title": "Why doesn&#39;t this file-mapped variable get flushed to the disk?", "body": "<h2>Overlapping structs</h2>\n<p>The location of the <code>ifs</code> struct overlaps the location of the first <code>root</code> struct.  This is because you started <code>free_space</code> at 0, so the first <code>root</code> struct will be allocated at offset 0 exactly where the <code>ifs</code> struct is at.</p>\n<p>Before you allocate the first <code>root</code> struct, you should set <code>free_space</code> to <code>sizeof(ifs)</code>.</p>\n"}], "owner": {"reputation": 8608, "user_id": 1091116, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/15098b2b940cacd8b4d07026e01e3102?s=128&d=identicon&r=PG", "display_name": "d33tah", "link": "https://stackoverflow.com/users/1091116/d33tah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 30090135, "answer_count": 1, "score": 0, "last_activity_date": 1430960139, "creation_date": 1430954012, "question_id": 30089238, "link": "https://stackoverflow.com/questions/30089238/why-doesnt-this-file-mapped-variable-get-flushed-to-the-disk", "title": "Why doesn&#39;t this file-mapped variable get flushed to the disk?", "body": "<p>I recently realized that my C skills got a bit rusty and decided to play a bit. I just ended up with a weird behavior though - the file-mapped memory I requested doesn't seem to flush the variable <code>ifs.free_space</code>. The result is that if you don't comment out the two <code>//root</code> lines, the program always starts with <code>ifs.free_space</code> equal to zero. However, commenting it out leads to the counter being saved. What's happening here?</p>\n\n<pre><code>#include &lt;sys/mman.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;unistd.h&gt;\n\n#define FILE_LENGTH 0x10000\n\n\nvoid* offset_to_pointer(uint64_t offset, void* file_memory) {\n    return (void *)((uint64_t)file_memory + offset);\n}\n\nuint64_t pointer_to_offset(void* pointer, void* file_memory) {\n    return ((uint64_t)pointer - (uint64_t)file_memory);\n}\n\nvoid* allocate(uint64_t size, uint64_t* free_space, void* file_memory) {\n    void* ret = offset_to_pointer(*free_space, file_memory);\n    *free_space += size;\n    return ret;\n}\n\ntypedef struct dirent {\n    uint64_t prev_offset;\n    uint64_t next_offset;\n    uint64_t size;\n} dirent;\n\ntypedef struct idiotfs {\n    void* file_memory;\n    uint64_t* free_space;\n    dirent* root;\n} idiotfs;\n\nint main (int argc, char* const argv[])\n{\n    int fd = open(\"file.bin\", O_RDWR | O_DSYNC, S_IRUSR | S_IWUSR);\n    if (fd == -1)\n        return 2;\n    idiotfs ifs;\n    ifs.file_memory = mmap(0, FILE_LENGTH,\n                           PROT_READ | PROT_WRITE,\n                           MAP_SHARED, fd, 0);\n    ifs.free_space = (uint64_t *)offset_to_pointer(0, ifs.file_memory);\n    dirent* root = (dirent *)allocate(sizeof(struct dirent) + strlen(\"hi\") + 1,\n                                      ifs.free_space, ifs.file_memory);\n    //root = (dirent *)allocate(sizeof(struct dirent) + strlen(\"hi\") + 1,\n    //                          ifs.free_space, ifs.file_memory);\n    root-&gt;prev_offset = 0;\n    root-&gt;next_offset = 0;\n    root-&gt;size = 3;\n    char* text = (char *)((uint64_t)root + sizeof(dirent));\n    strcpy(text, \"hi\");\n    close(fd);\n}\n</code></pre>\n"}, {"tags": ["c", "bit-manipulation", "micro-optimization"], "comments": [{"owner": {"reputation": 40865, "user_id": 10431, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/22aac6106c44ae4078bd4c0a564714e0?s=128&d=identicon&r=PG", "display_name": "Keith Nicholas", "link": "https://stackoverflow.com/users/10431/keith-nicholas"}, "edited": false, "score": 2, "creation_date": 1430954163, "post_id": 30089134, "comment_id": 48291527, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/3912112/check-if-a-number-is-non-zero-using-bitwise-operators-in-c\">Check if a number is non zero using bitwise operators in C</a>"}, {"owner": {"reputation": 143, "user_id": 4872638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c72e05be1789b14b54bc8500717284b?s=128&d=identicon&r=PG&f=1", "display_name": "ntldr", "link": "https://stackoverflow.com/users/4872638/ntldr"}, "reply_to_user": {"reputation": 40865, "user_id": 10431, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/22aac6106c44ae4078bd4c0a564714e0?s=128&d=identicon&r=PG", "display_name": "Keith Nicholas", "link": "https://stackoverflow.com/users/10431/keith-nicholas"}, "edited": false, "score": 1, "creation_date": 1430954635, "post_id": 30089134, "comment_id": 48291668, "body": "Not really a duplicate since I already know how to accomplish that. I&#39;m seeking to figure out how to achieve that in less operations."}, {"owner": {"reputation": 40865, "user_id": 10431, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/22aac6106c44ae4078bd4c0a564714e0?s=128&d=identicon&r=PG", "display_name": "Keith Nicholas", "link": "https://stackoverflow.com/users/10431/keith-nicholas"}, "edited": false, "score": 1, "creation_date": 1430955684, "post_id": 30089134, "comment_id": 48291979, "body": "thing is, the question has actually been asked multiple times now, really don&#39;t need another version of it"}, {"owner": {"reputation": 143, "user_id": 4872638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c72e05be1789b14b54bc8500717284b?s=128&d=identicon&r=PG&f=1", "display_name": "ntldr", "link": "https://stackoverflow.com/users/4872638/ntldr"}, "reply_to_user": {"reputation": 40865, "user_id": 10431, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/22aac6106c44ae4078bd4c0a564714e0?s=128&d=identicon&r=PG", "display_name": "Keith Nicholas", "link": "https://stackoverflow.com/users/10431/keith-nicholas"}, "edited": false, "score": 1, "creation_date": 1430956079, "post_id": 30089134, "comment_id": 48292090, "body": "I can&#39;t see where the question of doing this in a simpler way was asked or answered at all. Again, this is not an issue on solving this problem but more of a question about the more simple solution (which apparently exists)."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1430956321, "post_id": 30089134, "comment_id": 48292163, "body": "You get +, but not -? And you don&#39;t have logical right-shift?"}, {"owner": {"reputation": 143, "user_id": 4872638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c72e05be1789b14b54bc8500717284b?s=128&d=identicon&r=PG&f=1", "display_name": "ntldr", "link": "https://stackoverflow.com/users/4872638/ntldr"}, "edited": false, "score": 1, "creation_date": 1430956576, "post_id": 30089134, "comment_id": 48292244, "body": "Yes. - can be expressed as ~x + 1 since we assume negative numbers to be represented as 2&#39;s complement."}, {"owner": {"reputation": 7817, "user_id": 4789373, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-f_OQrxbHhFQ/AAAAAAAAAAI/AAAAAAAAABA/NY38t7ooQ5c/photo.jpg?sz=128", "display_name": "FalconUA", "link": "https://stackoverflow.com/users/4789373/falconua"}, "edited": false, "score": 1, "creation_date": 1430957644, "post_id": 30089134, "comment_id": 48292555, "body": "Have you tried <code>( x ^ 0xFFFFFFFF )</code> ?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 7817, "user_id": 4789373, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-f_OQrxbHhFQ/AAAAAAAAAAI/AAAAAAAAABA/NY38t7ooQ5c/photo.jpg?sz=128", "display_name": "FalconUA", "link": "https://stackoverflow.com/users/4789373/falconua"}, "edited": false, "score": 1, "creation_date": 1430957944, "post_id": 30089134, "comment_id": 48292637, "body": "@FalconUA: That&#39;s <code>~</code>, not <code>!</code>. <code>~</code> is already in the allowed operator list."}], "answers": [{"comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1430958399, "post_id": 30089824, "comment_id": 48292743, "body": "The instructions for the linked assignment say &quot;You may assume that your machine... Has unpredictable behavior when shifting an integer by more than the word size.&quot; Still, it&#39;s possible the guy who got a 3-op score might have used a similar idea."}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1430958851, "post_id": 30089824, "comment_id": 48292851, "body": "@user2357112: I&#39;m not seeing a &quot;linked assignment&quot;, only a link to a table of results.  Can you (or someone) clue me in?"}, {"owner": {"reputation": 4446, "user_id": 696485, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4de94e14f977802057b0109d079d95a1?s=128&d=identicon&r=PG", "display_name": "Iskar Jarak", "link": "https://stackoverflow.com/users/696485/iskar-jarak"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1430958935, "post_id": 30089824, "comment_id": 48292873, "body": "@user2357112 Likewise not seeing a linked assignment, did you look it up?  Anyway, of course shifting an <code>int</code> by greater than the width of an <code>int</code> is also UB (see <a href=\"http://www.open-std.org/jtc1/sc22/WG14/www/docs/n1256.pdf\" rel=\"nofollow noreferrer\">6.5.7.3</a>)"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 1, "creation_date": 1430958970, "post_id": 30089824, "comment_id": 48292881, "body": "@MichaelBurr: I took a look through the <a href=\"http://rtsys.informatik.uni-kiel.de/~rt-teach/ss09/v-sysinf2/\" rel=\"nofollow noreferrer\">folder</a> the results page was in and found the assignment."}, {"owner": {"reputation": 1521, "user_id": 4794109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pQ4gD.png?s=128&g=1", "display_name": "dddsnn", "link": "https://stackoverflow.com/users/4794109/dddsnn"}, "edited": false, "score": 1, "creation_date": 1430965289, "post_id": 30089824, "comment_id": 48294384, "body": "<code>1 &gt;&gt; (x &gt;&gt; (x &gt;&gt; 31))</code> takes care of negative <code>x</code>, but doesn&#39;t work when <code>x</code> is a multiple of 32."}, {"owner": {"reputation": 40865, "user_id": 10431, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/22aac6106c44ae4078bd4c0a564714e0?s=128&d=identicon&r=PG", "display_name": "Keith Nicholas", "link": "https://stackoverflow.com/users/10431/keith-nicholas"}, "reply_to_user": {"reputation": 1521, "user_id": 4794109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pQ4gD.png?s=128&g=1", "display_name": "dddsnn", "link": "https://stackoverflow.com/users/4794109/dddsnn"}, "edited": false, "score": 2, "creation_date": 1430967233, "post_id": 30089824, "comment_id": 48294921, "body": "@dddsnn  right shifting a negative number CAN shift in 1s to keep the number negative  so -4 &gt;&gt; 1  == -2"}, {"owner": {"reputation": 4446, "user_id": 696485, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4de94e14f977802057b0109d079d95a1?s=128&d=identicon&r=PG", "display_name": "Iskar Jarak", "link": "https://stackoverflow.com/users/696485/iskar-jarak"}, "edited": false, "score": 1, "creation_date": 1430968633, "post_id": 30089824, "comment_id": 48295265, "body": "If you want to get rid of the negative, <code>int mask = x &gt;&gt; 31; return 1 &gt;&gt; ((x + mask) ^ mask);</code> will work.  That is 4 ops, and it still leaves you right shifting by more than a word width. Typical machine behaviour is either to shift by the word width (which will have the desired effect) or to treat it as a shift by zero (which will not)."}, {"owner": {"reputation": 4446, "user_id": 696485, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4de94e14f977802057b0109d079d95a1?s=128&d=identicon&r=PG", "display_name": "Iskar Jarak", "link": "https://stackoverflow.com/users/696485/iskar-jarak"}, "edited": false, "score": 0, "creation_date": 1430971885, "post_id": 30089824, "comment_id": 48296137, "body": "Oh, and of course <code>1 &gt;&gt; (x &amp; 0x7FFFFFFF);</code> (clearing the sign bit, which is only 2 ops). Both methods will fail on <code>INT_MIN</code>, though, since it cannot be represented as a positive integer of the same word size."}], "tags": [], "owner": {"reputation": 40865, "user_id": 10431, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/22aac6106c44ae4078bd4c0a564714e0?s=128&d=identicon&r=PG", "display_name": "Keith Nicholas", "link": "https://stackoverflow.com/users/10431/keith-nicholas"}, "is_accepted": false, "score": 2, "last_activity_date": 1430957749, "creation_date": 1430957749, "answer_id": 30089824, "question_id": 30089134, "link": "https://stackoverflow.com/questions/30089134/implementing-logical-not-using-less-than-5-bitwise-operators/30089824#30089824", "title": "Implementing &quot;logical not&quot; using less than 5 bitwise operators", "body": "<p>why not just :-</p>\n\n<pre><code>int bang(int x)\n{\n    return 1 &gt;&gt; x;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "is_accepted": true, "score": 5, "last_activity_date": 1430969068, "creation_date": 1430969068, "answer_id": 30091374, "question_id": 30089134, "link": "https://stackoverflow.com/questions/30089134/implementing-logical-not-using-less-than-5-bitwise-operators/30091374#30091374", "title": "Implementing &quot;logical not&quot; using less than 5 bitwise operators", "body": "<p>Only slightly cheating:</p>\n\n<pre><code>int bang(int x) {\n    return ((x ^ 0xffffffffU) + 1UL) &gt;&gt; 32;\n}\n</code></pre>\n\n<p>is the only way I can think of to do it in only 3 operations.  Assumes a 32-bit int and 64-bit long...</p>\n"}, {"tags": [], "owner": {"reputation": 44047, "user_id": 1400793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7VxVK.png?s=128&g=1", "display_name": "Paul Hankin", "link": "https://stackoverflow.com/users/1400793/paul-hankin"}, "is_accepted": false, "score": 3, "last_activity_date": 1430978129, "last_edit_date": 1430978129, "creation_date": 1430977149, "answer_id": 30092741, "question_id": 30089134, "link": "https://stackoverflow.com/questions/30089134/implementing-logical-not-using-less-than-5-bitwise-operators/30092741#30092741", "title": "Implementing &quot;logical not&quot; using less than 5 bitwise operators", "body": "<p>If you take the liberty of assuming that int addition overflow is well-defined and wraps (rather than being undefined behavior), then there's a solution with four operators:</p>\n\n<pre><code>((a | (a + 0x7fffffff)) &gt;&gt; 31) + 1\n</code></pre>\n\n<p>I think you are assuming that overflow is defined to wrap otherwise your function <code>((x | (~x + 1)) &gt;&gt; 31) + 1</code> has undefined behavior for x=INT_MIN.</p>\n"}], "owner": {"reputation": 143, "user_id": 4872638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c72e05be1789b14b54bc8500717284b?s=128&d=identicon&r=PG&f=1", "display_name": "ntldr", "link": "https://stackoverflow.com/users/4872638/ntldr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2655, "favorite_count": 4, "accepted_answer_id": 30091374, "answer_count": 3, "score": 12, "last_activity_date": 1431011920, "creation_date": 1430953386, "last_edit_date": 1430955922, "question_id": 30089134, "link": "https://stackoverflow.com/questions/30089134/implementing-logical-not-using-less-than-5-bitwise-operators", "title": "Implementing &quot;logical not&quot; using less than 5 bitwise operators", "body": "<p>As part of my CS classes I've recently completed the pretty popular \"Data Lab\" assignments. In these assignments you are supposed to implement simple binary operations in C with as few operations as possible.</p>\n\n<p>For those who are not familiar with the \"Data Lab\" a quick overview about the rules:</p>\n\n<ul>\n<li>You may not call functions, cast or use control structures (e.g. if)</li>\n<li>You may assign variables with no operator cost, however only int is allowed)</li>\n<li>The less operators you use, the better</li>\n<li>You may assume sizeof(int) == 32</li>\n<li>Negative numbers are represented in 2's complement</li>\n</ul>\n\n<p>The task is to implement a logical not called 'bang' (where bang(x) returns !x) by only using the following operators: ~ &amp; ^ | + &lt;&lt; >> </p>\n\n<p>The function prototype is defined as </p>\n\n<pre><code>int bang(int x)\n</code></pre>\n\n<p>The best implementation I could find (using 5 operators) was the following:</p>\n\n<pre><code>return ((x | (~x +1)) &gt;&gt; 31) + 1\n</code></pre>\n\n<p>However there seems to be a way to accomplish this with even less operators, since I found a result website[1] from some German university where two people apparently found a solution with less than 5 operator. But I can't seem to figure out how they accomplished that.</p>\n\n<p>[1] <a href=\"http://rtsys.informatik.uni-kiel.de/~rt-teach/ss09/v-sysinf2/dlcontest.html\" rel=\"noreferrer\">http://rtsys.informatik.uni-kiel.de/~rt-teach/ss09/v-sysinf2/dlcontest.html</a> (logicalNeg column)</p>\n\n<p>To clarify: This is not about how to solve the issue, but how to solve it with less operations.</p>\n"}, {"tags": ["c", "linux", "multithreading", "program-counter"], "answers": [{"comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1430954200, "post_id": 30088847, "comment_id": 48291540, "body": "For a given process, checking all the TIDs listed in the task directory would suffice if the goal is to find <b>any</b> stuck thread - &quot;TID X seems stuck at PC value Y&quot;.  The TID value really doesn&#39;t matter.  But that&#39;s not going to avoid false positives if the PC value is for a &quot;normal&quot; place for that thread to block."}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1430955516, "post_id": 30088847, "comment_id": 48291924, "body": "Yes. OP may have an XY problem going on here, in that the desired mechanism is not really a good approach to the problem. But I still thought it was worth answering since there is a solution for the requested mechanism."}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1430955797, "post_id": 30088847, "comment_id": 48292007, "body": "R.. agreed that I probably do have an XY problem... what I&#39;d really like is for a kernel &quot;oops&quot; to crash my process cleanly, rather than forcing my other thread to jump through hoops to determine whether the main thread has been paralyzed for ever and if it should therefore crash the process itself to allow the process to be restarted.  But it seems unlikely that a facility exists to control that behavior. :("}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 0, "creation_date": 1430956078, "post_id": 30088847, "comment_id": 48292089, "body": "BTW you can also get the stack pointer as field 29. This might be some extra information to help you figure out what&#39;s going on. Stack pointer and instruction pointer might even be sufficient to do a backtrace on the target thread with the appropriate unwind library code."}], "tags": [], "owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "is_accepted": true, "score": 3, "last_activity_date": 1430951559, "creation_date": 1430951559, "answer_id": 30088847, "question_id": 30088710, "link": "https://stackoverflow.com/questions/30088710/is-it-possible-to-read-another-threads-program-counter/30088847#30088847", "title": "Is it possible to read another thread&#39;s program counter?", "body": "<p>On Linux, field 30 of <code>/proc/self/task/%d/stat</code>, where <code>%d</code> needs to be filled in with the kernel tid of the thread in question, contains the last-observed instruction pointer value for the thread. See <a href=\"http://man7.org/linux/man-pages/man5/proc.5.html\" rel=\"nofollow\">http://man7.org/linux/man-pages/man5/proc.5.html</a> and note that it's documented under <code>/proc/[pid]/stat</code> but the version in the <code>task</code> directory under the current process is the one you want for targeting a thread.</p>\n\n<p>The hard part may be getting the kernel tid for the thread. The easiest way to do this is to call <code>syscall(SYS_gettid)</code> from the thread and have it store its kernel tid somewhere.</p>\n"}], "owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1272, "favorite_count": 0, "accepted_answer_id": 30088847, "answer_count": 1, "score": 2, "last_activity_date": 1430951559, "creation_date": 1430950921, "last_edit_date": 1495535486, "question_id": 30088710, "link": "https://stackoverflow.com/questions/30088710/is-it-possible-to-read-another-threads-program-counter", "title": "Is it possible to read another thread&#39;s program counter?", "body": "<p>Is is possible (in a C or C++ program, running under Linux on a 64-bit-Intel architecture) for thread A to read the value of thread B's program counter register, without requiring any special instrumentation of to thread B's code?</p>\n\n<p>(I realize that's an odd thing to want to do; the desire only comes up because I'm curious if thread A could use that to detect if thread B had become stuck in a failed system call, as described <a href=\"https://stackoverflow.com/questions/30061396/high-availability-computing-how-to-deal-with-a-non-returning-system-call-witho\">here</a>)</p>\n"}, {"tags": ["c", "arrays", "char", "flatten"], "comments": [{"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1430950574, "post_id": 30088591, "comment_id": 48290283, "body": "You&#39;d need to know the size of the 2nd dimension of the array as it isn&#39;t specified above - unless they contain C strings, in which case it is possbile to flatten, but perhaps ot keep the same indexing into the list as you want."}, {"owner": {"reputation": 87, "user_id": 4196810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b44d81c7c3dd103e99f982aeadcb91a?s=128&d=identicon&r=PG&f=1", "display_name": "casualresearcher", "link": "https://stackoverflow.com/users/4196810/casualresearcher"}, "reply_to_user": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1430950865, "post_id": 30088591, "comment_id": 48290413, "body": "Let&#39;s say each char* could be at most length 10. Would that count as a 2nd dimension?"}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1430951071, "post_id": 30088591, "comment_id": 48290491, "body": "&quot;At most 10&quot; means it could be a jagged array.  You need to know 100% for sure what the size of each element, not at most to treat it like a true 2-D array.  If it were length 8,6,7,9,5,10,etc. flattening becomes hard, unless you just stop at the end of the C string NUL char or 10 if it is not encountered (in which case you would need to terminate it somehow in your new array.)"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1430951335, "post_id": 30088591, "comment_id": 48290589, "body": "Um, no. <code>char* array[1000]</code> is already a 1-D array of character pointers."}, {"owner": {"reputation": 87, "user_id": 4196810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b44d81c7c3dd103e99f982aeadcb91a?s=128&d=identicon&r=PG&f=1", "display_name": "casualresearcher", "link": "https://stackoverflow.com/users/4196810/casualresearcher"}, "edited": false, "score": 0, "creation_date": 1430951479, "post_id": 30088591, "comment_id": 48290647, "body": "So, since char* array[1000] is already 1-D, does this mean it uses a single contiguous memory block?"}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1430951672, "post_id": 30088591, "comment_id": 48290713, "body": "The pointers are contiguous, but not necessarily the data within the pointers."}, {"owner": {"reputation": 17102, "user_id": 1022889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WZOSZ.jpg?s=128&g=1", "display_name": "Cloud", "link": "https://stackoverflow.com/users/1022889/cloud"}, "edited": false, "score": 0, "creation_date": 1430962444, "post_id": 30088591, "comment_id": 48293722, "body": "The array is a contiguous blocks of pointers, but each pointer is pointing to a totally different area in memory. Kind of like reading a phone book: the names on a page are contiguous, but the addresses of those people are all over the place."}], "answers": [{"comments": [{"owner": {"reputation": 17102, "user_id": 1022889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WZOSZ.jpg?s=128&g=1", "display_name": "Cloud", "link": "https://stackoverflow.com/users/1022889/cloud"}, "reply_to_user": {"reputation": 87, "user_id": 4196810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b44d81c7c3dd103e99f982aeadcb91a?s=128&d=identicon&r=PG&f=1", "display_name": "casualresearcher", "link": "https://stackoverflow.com/users/4196810/casualresearcher"}, "edited": false, "score": 0, "creation_date": 1430951462, "post_id": 30088638, "comment_id": 48290636, "body": "@casualresearcher No problem. Feel free to post comments if you need help tweaking it."}], "tags": [], "owner": {"reputation": 17102, "user_id": 1022889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WZOSZ.jpg?s=128&g=1", "display_name": "Cloud", "link": "https://stackoverflow.com/users/1022889/cloud"}, "is_accepted": true, "score": 4, "last_activity_date": 1430958537, "last_edit_date": 1430958537, "creation_date": 1430950655, "answer_id": 30088638, "question_id": 30088591, "link": "https://stackoverflow.com/questions/30088591/c-flatten-2-d-array-of-char-to-1-d/30088638#30088638", "title": "C Flatten 2-D Array of Char* to 1-D", "body": "<p>You have a one-dimensional array of type <code>pointer-to-char</code>, with 1000 such elements. It's already 1D as far as arrays go, though it could be interpreted as a \"jagged 2D array\". If you want to convert this into one massive character array, you could do something like so, which requires calculating the size of the buffer you'll need to store it, and then flattening the array.</p>\n\n<p>Note that if you opt to use <code>malloc</code> instead of <code>calloc</code>, you'll have to manually set the last character to <code>'\\0'</code> or <code>0</code> so that the final result is a NULL-delimited C-style string, and not just a character array, as the latter of the two won't work with C string operations, and the former will.</p>\n\n<p><strong>Code Listing</strong></p>\n\n<hr>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void) {\n        const char* array[] = { \"one\", \"two\", \"three\", \"four\" };\n        size_t length = sizeof(array) / sizeof(char*);\n\n        int i;\n        int sum = 0;\n        int count = 0;\n\n        for (i=0; i&lt;length; i++) {\n                printf(\"Element #%d - %s\\n\", i, array[i]);\n                sum += strlen(array[i]) + 1;\n        }\n        sum++;  // Make room for terminating null character\n\n        char* buf;\n        if ((buf = calloc(sum, sizeof(char))) != NULL) {\n                for (i=0; i&lt;length; i++) {\n                        memcpy(buf+count, array[i], strlen(array[i]));\n                        count += strlen(array[i]) + 1;\n                        buf[count-1] = '#';\n                }\n                printf(\"Output Buffer: %s\\n\", buf);\n                printf(\"Buffer size:%d - String Length:%d\\n\", sum, strlen(buf));\n                free(buf);\n                buf = NULL;\n        }\n\n        return 0;\n}\n</code></pre>\n\n<p><strong>Sample Output</strong></p>\n\n<hr>\n\n<pre><code>Element #0 - one\nElement #1 - two\nElement #2 - three\nElement #3 - four\nOutput Buffer: one#two#three#four#\nBuffer size:20 - String Length:19\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 1, "creation_date": 1430951557, "post_id": 30088839, "comment_id": 48290675, "body": "Lol - way too slow. :)"}, {"owner": {"reputation": 87, "user_id": 4196810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b44d81c7c3dd103e99f982aeadcb91a?s=128&d=identicon&r=PG&f=1", "display_name": "casualresearcher", "link": "https://stackoverflow.com/users/4196810/casualresearcher"}, "edited": false, "score": 1, "creation_date": 1430965867, "post_id": 30088839, "comment_id": 48294549, "body": "Definitely a great example as well. Thank you for posting :)"}], "tags": [], "owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "is_accepted": false, "score": 4, "last_activity_date": 1430952019, "last_edit_date": 1430952019, "creation_date": 1430951535, "answer_id": 30088839, "question_id": 30088591, "link": "https://stackoverflow.com/questions/30088591/c-flatten-2-d-array-of-char-to-1-d/30088839#30088839", "title": "C Flatten 2-D Array of Char* to 1-D", "body": "<p>The above answer beat me to the puch and looks great, but I'll finish my thoughts here.</p>\n\n<p>In this version every 11th byte of flatArray will contain the start of the strings from the original array, making it very easy to find the original strings from the ones before - i.e. string index 2 would start at <code>2*11 == index 22</code> and string 400 would start at <code>400 * 11 == index 4400</code>.  In this way, you would not need to iterate through the flat array counting terminators to find your old strings.  The cost of this being that the flat array takes a bit more memory than the original.</p>\n\n<pre><code>char* array[1000];\n\n// Malloc new buffer\nchar *flatArray = malloc(length * 1100);\n\nfor(i=0; i&lt;1000; i++)\n{  \n    strncpy(&amp;flatArray[i * 11], array[i], 10);\n    flatArray[i * 11 + 10] = '\\0';\n}\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 4196810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b44d81c7c3dd103e99f982aeadcb91a?s=128&d=identicon&r=PG&f=1", "display_name": "casualresearcher", "link": "https://stackoverflow.com/users/4196810/casualresearcher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1469, "favorite_count": 0, "accepted_answer_id": 30088638, "answer_count": 2, "score": 2, "last_activity_date": 1430958537, "creation_date": 1430950436, "question_id": 30088591, "link": "https://stackoverflow.com/questions/30088591/c-flatten-2-d-array-of-char-to-1-d", "title": "C Flatten 2-D Array of Char* to 1-D", "body": "<p>Say I have the following code:</p>\n\n<pre><code>char* array[1000]; // An array containing 1000 char*\n\n// So, array[2] could be 'cat', array[400] could be 'space', etc.\n</code></pre>\n\n<p>Now, how could I flatten this array into 1-D? Is it possible to do this such that new_1D_array[2] would still be 'cat', new_1D_array[400] would still be 'space', etc.?</p>\n"}, {"tags": ["c", "linux", "sockets", "io"], "comments": [{"owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "edited": false, "score": 0, "creation_date": 1430949916, "post_id": 30088408, "comment_id": 48290007, "body": "When you say the second line does not get printed, I presume you mean because the program crashes. This is likely to be a segv caused by writing to <code>buf</code> when <code>buf</code> is either <code>NULL</code> or invalid memory. What happens when you run it under <code>gdb</code>, having compiled with <code>-g</code> to include debugging symbols?"}, {"owner": {"reputation": 2663, "user_id": 1084605, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/81e006a7105409923ddb43cdcd935c84?s=128&d=identicon&r=PG", "display_name": "cen", "link": "https://stackoverflow.com/users/1084605/cen"}, "edited": false, "score": 1, "creation_date": 1430957424, "post_id": 30088408, "comment_id": 48292495, "body": "Is buffer big enough? Also, I believe buf[0] is never written to, seems like a potential problem waiting to happen."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1430981088, "post_id": 30088408, "comment_id": 48299731, "body": "Please also show us <b>how</b> you call this function and expecially how the buffer passed in is defined and <b>initialised</b>."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1430981151, "post_id": 30088408, "comment_id": 48299769, "body": "Also: Did you leave out the code for error checking by intention to make this example better readbale?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1430981215, "post_id": 30088408, "comment_id": 48299805, "body": "What is the  <code>n</code> (passed in) for?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1430981556, "post_id": 30088408, "comment_id": 48299993, "body": "For a working version of your function you might like to have look at this answer: <a href=\"http://stackoverflow.com/a/20310622/694576\">stackoverflow.com/a/20310622/694576</a> However, in any case make sure the buffer-pointer passed into the function refers to enough valid memory."}, {"owner": {"reputation": 2201, "user_id": 677163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a1d8465997bf40a21eca3975f984fc72?s=128&d=identicon&r=PG", "display_name": "philippe", "link": "https://stackoverflow.com/users/677163/philippe"}, "edited": false, "score": 0, "creation_date": 1431085184, "post_id": 30088408, "comment_id": 48355386, "body": "cen, alk, I edited my question accordingly. alk, the <code>n</code> is used to read at most n characters, and ignore any further ones (this does not appear on the function)"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1431085530, "post_id": 30088408, "comment_id": 48355627, "body": "&quot;<i>is used to read at most <code>n</code> characters</i>&quot; but the code shown does <b>not</b> respect this maximum of <code>n</code>!"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1431086095, "post_id": 30088408, "comment_id": 48355965, "body": "This <code>char buffer = [255];</code> isn&#39;t valid C. It won&#39;t compile."}], "answers": [{"comments": [{"owner": {"reputation": 2201, "user_id": 677163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a1d8465997bf40a21eca3975f984fc72?s=128&d=identicon&r=PG", "display_name": "philippe", "link": "https://stackoverflow.com/users/677163/philippe"}, "edited": false, "score": 0, "creation_date": 1431085231, "post_id": 30094008, "comment_id": 48355420, "body": "I am using eclipse as IDE; maybe this is not the best choice for C programming :/"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 2201, "user_id": 677163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a1d8465997bf40a21eca3975f984fc72?s=128&d=identicon&r=PG", "display_name": "philippe", "link": "https://stackoverflow.com/users/677163/philippe"}, "edited": false, "score": 1, "creation_date": 1431085306, "post_id": 30094008, "comment_id": 48355469, "body": "@philippe: Eclipse works fine for C programming, at least if you properly .. ;-) If using CDT you are using gcc anyways. Eclipse isn&#39;t a compiler/linker, but just the IDE."}, {"owner": {"reputation": 2201, "user_id": 677163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a1d8465997bf40a21eca3975f984fc72?s=128&d=identicon&r=PG", "display_name": "philippe", "link": "https://stackoverflow.com/users/677163/philippe"}, "edited": false, "score": 0, "creation_date": 1431086730, "post_id": 30094008, "comment_id": 48356336, "body": "I have added in Eclipse <code>-Wall -Wextra -Werror -pedantic -pedantic-errors</code>; I corrected every errors, the code compile now. Thanks for your advice for compilation options!"}, {"owner": {"reputation": 2201, "user_id": 677163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a1d8465997bf40a21eca3975f984fc72?s=128&d=identicon&r=PG", "display_name": "philippe", "link": "https://stackoverflow.com/users/677163/philippe"}, "edited": false, "score": 0, "creation_date": 1431087343, "post_id": 30094008, "comment_id": 48356732, "body": "Not yet handled the value passed in as <code>n</code>, but edited my code taking in account your answer. Now, the program does not crash, as it at least reach the next <code>printf</code>; but the <code>buffer</code>value does not get affected."}, {"owner": {"reputation": 2201, "user_id": 677163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a1d8465997bf40a21eca3975f984fc72?s=128&d=identicon&r=PG", "display_name": "philippe", "link": "https://stackoverflow.com/users/677163/philippe"}, "edited": false, "score": 0, "creation_date": 1431087895, "post_id": 30094008, "comment_id": 48357104, "body": "OK, I handle the value passed in as n now; furthermore, I handle the newline break; At this time, I know for sure <code>buffer</code> get instantiated; as it gets printed in when entering <code>\\n</code>"}], "tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": true, "score": 2, "last_activity_date": 1431086218, "last_edit_date": 1431086218, "creation_date": 1430981965, "answer_id": 30094008, "question_id": 30088408, "link": "https://stackoverflow.com/questions/30088408/trouble-while-reading-from-socket/30094008#30094008", "title": "Trouble while reading from socket", "body": "<pre><code>int process(..., void * b, ...\n{\n  ...\n\n  *b++ = ...\n</code></pre>\n\n<p>Dereferencing and/or incrementing a <code>void</code>-pointer is not valid C. The compiler should have at least warned you about this. </p>\n\n<p>Recompile your code with all warnings on (for gcc pass the options <code>-Wall -Wextra -pedantic</code> for this). Then fix the code until no more warning are issued.</p>\n\n<hr>\n\n<p>Referring your edit on how the function in question is called:</p>\n\n<p>This</p>\n\n<pre><code>char *buffer = \"\";\n</code></pre>\n\n<p>does not declare a buffer, but just a pointer. This pointer points to a string literal of size <code>1</code>. String literals a constant by definition.</p>\n\n<p>To summarise: You provide to your <code>process()</code>-function a pointer to constant memory of size <code>1</code>.</p>\n\n<p>Issues with this:</p>\n\n<ol>\n<li>You cannnot read into constant memory.</li>\n<li>An even if 1. would not apply you could only read in <code>1</code> byte.</li>\n</ol>\n\n<p>To fix this change the code as follows:</p>\n\n<pre><code>char buffer[100] = \"\"; /* Define a buffer of 100 characters size and \n                          initialise it to all `0`s. */\nint l = process(newsockfd, buffer, 100);\n</code></pre>\n\n<hr>\n\n<p>As per <code>process()</code> blocking, you need to look at the <code>read()</code> function: If it gets called but the sender does not send anything it simply does not return as long as the connection is still up.</p>\n\n<p>And: Make <code>process()</code> handle the value passed in as <code>n</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 2201, "user_id": 677163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a1d8465997bf40a21eca3975f984fc72?s=128&d=identicon&r=PG", "display_name": "philippe", "link": "https://stackoverflow.com/users/677163/philippe"}, "edited": false, "score": 0, "creation_date": 1431083820, "post_id": 30094113, "comment_id": 48354496, "body": "This does not chance anything :/"}], "tags": [], "owner": {"reputation": 1180, "user_id": 4233968, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/34a8a28a578ed988cb3b7800cc79a867?s=128&d=identicon&r=PG&f=1", "display_name": "achoora", "link": "https://stackoverflow.com/users/4233968/achoora"}, "is_accepted": false, "score": 0, "last_activity_date": 1430982327, "creation_date": 1430982327, "answer_id": 30094113, "question_id": 30088408, "link": "https://stackoverflow.com/questions/30088408/trouble-while-reading-from-socket/30094113#30094113", "title": "Trouble while reading from socket", "body": "<p>Try changing the first line to \nchar *buf = (char *) buffer;\nand compile using gcc with -Werror on </p>\n"}], "owner": {"reputation": 2201, "user_id": 677163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a1d8465997bf40a21eca3975f984fc72?s=128&d=identicon&r=PG", "display_name": "philippe", "link": "https://stackoverflow.com/users/677163/philippe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 30094008, "answer_count": 2, "score": 0, "last_activity_date": 1431087803, "creation_date": 1430949721, "last_edit_date": 1431087803, "question_id": 30088408, "link": "https://stackoverflow.com/questions/30088408/trouble-while-reading-from-socket", "title": "Trouble while reading from socket", "body": "<p>I am trying to read characters from a socket; here is the function I created for this, largely inspired from <a href=\"http://man7.org/tlpi/code/online/diff/sockets/read_line.c.html\" rel=\"nofollow\">Here</a>, where I remove some unrelevant parts here (this sample is compiling correctly).</p>\n\n<pre><code>int process(int socketfd, void *buffer, int n)\n{\n  int totread = 0;\n  char ch;\n  int numread;\n\n  for(;;)\n  {\n    numread = read(socketfd, &amp;ch, 1);\n\n    if(numread == 0) {\n        if (totread == 0) {\n            return 0;\n        } else {\n            break;\n        }\n    } else {\n        if(totread &lt; n-1) {\n            totread++;\n            printf(\"totread: %d\\n\", totread);\n            printf(\"Here is OK, ch value gets printed %c\\n\", ch);\n            *buffer++ = ch;\n            printf(\"With help provided, this line gets printed\\n\");\n            printf(\"But the value &lt;%s&gt; of buffer, is blank (&lt;&gt; output)\\n, buffer);\n        }\n        if (ch == '\\n') {\n            printf(\"%c\\n\", ch);\n            printf(\"%s\\n\", buffer);\n            break;\n        }\n    }\n}\nreturn totread;\n}\n</code></pre>\n\n<p>I can't understand why the second line does not get printed.\nObviously, the <code>*buf++ = ch</code> instruction is faulty; But it looks like correct. It simply affects the character read to the next value of the array of characters buf. I don't see errors or warnings at compile time, the client disconnects after the first line gets printed, and the second one is not reached.</p>\n\n<p>EDIT</p>\n\n<p>Here is how I initialize my buffer:</p>\n\n<pre><code>char *buffer = \"\";\nint l = process(newsockfd, buffer, 100);\nprintf(\"Number read (function network) %d\\n\", l);\n</code></pre>\n\n<p>This is probably not the appropriate way to do it; I have also tried specifying a fixed length such as <code>char buffer = [255];</code> The function does not exit then but nothing get printed. I'm quite a newbie in C programming, many thanks for your help!</p>\n"}, {"tags": ["c++", "c", "windows"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1430949611, "post_id": 30088335, "comment_id": 48289843, "body": "<i>&quot;The code I used on linux to open a disk ...&quot;</i> <b>linux</b> with <i>drive characters <code>E:</code></i> and unescaped backslash `\\` path delimiter?? That sounds seriously strange, and I doubt you can present any running code.from this using a linux host environment."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1430953739, "post_id": 30088335, "comment_id": 48291378, "body": "I don&#39;t know if you can <code>fopen()</code> a physical drive, but you can open it with the Win32 API <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa363858.aspx\" rel=\"nofollow noreferrer\"><code>CreateFile()</code></a> function (despite its name, it can open several kinds of resources, not just files)."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1430957401, "post_id": 30088335, "comment_id": 48292492, "body": "@RemyLebeau: Does <code>CreateFile()</code> work with deleted files?  The question is about recovering deleted files."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1430958876, "post_id": 30088335, "comment_id": 48292859, "body": "To recover deleted files, you have to access the file system directly and parse/alter its file records accordingly.  And also parse the raw partition data directly so you can find the deleted files, since they are not in the file system anymore (unless the file system keep track of them). You can do that stuff with <code>CreateFile()</code>/<code>ReadFile()</code>/<code>WriteFile()</code>, but you have to be VERY careful working at such a low level of data.  There are a bazillion recovery tools already widely available, I would not recommend writing a new one, except maybe as a learning exercise."}], "answers": [{"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 1, "last_activity_date": 1430950705, "last_edit_date": 1430950705, "creation_date": 1430950134, "answer_id": 30088522, "question_id": 30088335, "link": "https://stackoverflow.com/questions/30088335/recovering-files-on-windows-and-c/30088522#30088522", "title": "Recovering Files on Windows and C", "body": "<blockquote>\n  <p><em>\"The code I used on linux to open a disk as a file was:\"</em>  </p>\n\n<pre><code> File *f = fopen(\"E:\\\", \"rb\");\n</code></pre>\n</blockquote>\n\n<p>I seriously doubt you ever got this code working on any linux system (or windows either).<br>\nYou'll need to escape the backslash path delimiter, if it's presented in any string literal:</p>\n\n<pre><code>FILE* f = fopen(\"E:\\\\\", \"rb\");\n                // ^\n</code></pre>\n\n<hr>\n\n<p>Also all that filesystem path style you are presenting to access a particular disk, is about accessing a windows file path/disk.</p>\n\n<p>No linux file system has notion about <em>drive characters</em>, and the file path delimiter value used is <code>'/'</code>, not <code>'\\\\'</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 61, "user_id": 3391168, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7134ec3fc5865caee23558af99951de0?s=128&d=identicon&r=PG&f=1", "display_name": "MaToXz", "link": "https://stackoverflow.com/users/3391168/matoxz"}, "edited": false, "score": 0, "creation_date": 1430957909, "post_id": 30089769, "comment_id": 48292629, "body": "Thanks for you step list input, the points is than I&#39;ve  never try to do a thing like this before, so I&#39;m not really sure about how to do it, I doesn&#39;t even program on c/c++ so much, could you help me with an example of it or a guide about how to getting those data (Master File Table) so I can use it as a bridge to solve my target?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 61, "user_id": 3391168, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7134ec3fc5865caee23558af99951de0?s=128&d=identicon&r=PG&f=1", "display_name": "MaToXz", "link": "https://stackoverflow.com/users/3391168/matoxz"}, "edited": false, "score": 0, "creation_date": 1430958110, "post_id": 30089769, "comment_id": 48292680, "body": "Post to SuperUser@StackExchange.com"}], "tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1430957338, "creation_date": 1430957338, "answer_id": 30089769, "question_id": 30088335, "link": "https://stackoverflow.com/questions/30088335/recovering-files-on-windows-and-c/30089769#30089769", "title": "Recovering Files on Windows and C", "body": "<p>To recover deleted files, you can't use <code>fopen</code> or <code>fstream::open</code> because the file was deleted.  Check the return value from the function or test the stream state.  </p>\n\n<p>The way to recover deleted files is:</p>\n\n<ol>\n<li>Get the Master File Table as raw data.</li>\n<li>Search for the record containing a string similar to the deleted\nfilename.</li>\n<li>Change the entry in the Master File Table to \"undeleted\".</li>\n<li>Write the Master File Table back to the drive.</li>\n</ol>\n\n<p>The above usually requires platform specific API, which is different on Linux and Windows platforms.  </p>\n"}], "owner": {"reputation": 61, "user_id": 3391168, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7134ec3fc5865caee23558af99951de0?s=128&d=identicon&r=PG&f=1", "display_name": "MaToXz", "link": "https://stackoverflow.com/users/3391168/matoxz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 656, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1430957338, "creation_date": 1430949403, "last_edit_date": 1430955538, "question_id": 30088335, "link": "https://stackoverflow.com/questions/30088335/recovering-files-on-windows-and-c", "title": "Recovering Files on Windows and C", "body": "<p>Well this time I'm trying to write a program in C which recover deleted files from a disk, it could be an external disk, I have an idea than i had used before on linux, it is to open the disk as a kind of file and scaning the Headers and file footers of everything within the disk, the point is I'm not sure if there's allow on windows to open a disk as an File, basiclly I have the logic how to develope this program, but I'm not sure how to implement it on windows, anybody can give me a hand with this?.</p>\n\n<p>The code I used on linux to open a disk as a file was:\nEdit: That was a sample of what I was using guys, it's just to give you an idea of what I was doing, the correct syntax I used was the next:</p>\n\n<pre><code>direccion = ui-&gt;linea-&gt;text().toLatin1().constData();\nf = fopen(direccion,\"rb\");\n</code></pre>\n\n<p>I used QT creator on linux, and direccion variable was a TextField value which contained the file path of the disk through a button function that open a QFileDialog...</p>\n\n<p>could I use it in windows as well?</p>\n\n<p>Thank you before hand..</p>\n"}, {"tags": ["c", "file-io", "eof", "scanf"], "comments": [{"owner": {"reputation": 616, "user_id": 1762208, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xBdrF.jpg?s=128&g=1", "display_name": "bentank", "link": "https://stackoverflow.com/users/1762208/bentank"}, "edited": false, "score": 0, "creation_date": 1430949525, "post_id": 30088287, "comment_id": 48289803, "body": "This is kind of a dumb question, but are you sure there are that many lines?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1670806"}, "reply_to_user": {"reputation": 616, "user_id": 1762208, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xBdrF.jpg?s=128&g=1", "display_name": "bentank", "link": "https://stackoverflow.com/users/1762208/bentank"}, "edited": false, "score": 0, "creation_date": 1430949580, "post_id": 30088287, "comment_id": 48289830, "body": "Yes... wc -l &lt;fileName&gt; gives 19973"}, {"owner": {"reputation": 616, "user_id": 1762208, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xBdrF.jpg?s=128&g=1", "display_name": "bentank", "link": "https://stackoverflow.com/users/1762208/bentank"}, "edited": false, "score": 0, "creation_date": 1430949646, "post_id": 30088287, "comment_id": 48289863, "body": "Do you see this happening every time at the same location. Also, post your input file somewhere I can grab it if you don&#39;t mind."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1430949672, "post_id": 30088287, "comment_id": 48289876, "body": "Did you <code>#include &lt;stdlib.h&gt;</code>?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1430949815, "post_id": 30088287, "comment_id": 48289954, "body": "unrelated, what possible condition can you think of that would cause the second half of <code>if(feof(ptr) &amp;&amp; i&lt;nLinesToRead)</code>  to ever flag <i>false</i> , especially since the conditional of the for-loop itself will prevent entry when that would be true in the first place?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1430949817, "post_id": 30088287, "comment_id": 48289956, "body": "While use of <code>if(feof(ptr) &amp;&amp; i&lt;nLinesToRead)</code> is not a good way to check errors, this question is not a duplicate of <a href=\"http://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\" title=\"why is while feof file always wrong\">stackoverflow.com/questions/5431941/&hellip;</a>. Voting to reopen."}, {"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1430949908, "post_id": 30088287, "comment_id": 48290001, "body": "Is your input file terminated by <code>CRLF</code> somewhere within that those lines? Try converting it to pure <code>LF</code> and see if it makes any difference."}, {"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 0, "creation_date": 1430950090, "post_id": 30088287, "comment_id": 48290085, "body": "<a href=\"http://makecleanandmake.com/2014/07/26/how-to-malloc-the-right-way/\" rel=\"nofollow noreferrer\">don&#39;t cast the return of calloc or malloc</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1670806"}, "reply_to_user": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1430950277, "post_id": 30088287, "comment_id": 48290172, "body": "@R Sahu: Yes stdlib.h is included.  @alvits: The input file was created with a simple python script that uses a print statement inside a for loop. So I would not expect to have different line endings..."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1430950422, "post_id": 30088287, "comment_id": 48290235, "body": "<code>x  = calloc(nLinesToRead, sizeof *x);</code> is all you need. (see Ryan&#39;s comment above) @user1670806 - it sounds like a problem with your input file.  Are there any numbers missing whitespace between them?"}, {"owner": {"reputation": 616, "user_id": 1762208, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xBdrF.jpg?s=128&g=1", "display_name": "bentank", "link": "https://stackoverflow.com/users/1762208/bentank"}, "edited": false, "score": 0, "creation_date": 1430950788, "post_id": 30088287, "comment_id": 48290376, "body": "Running it here. It works fine. There is a small logic error as you should be checking <code>if(feof(ptr) &amp;&amp; i != nLinesToRead -1)</code>. But I am able to read all through until real EOF."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1430951020, "post_id": 30088287, "comment_id": 48290468, "body": "Check your data for fields that have run together.  Or read line-by-line with <code>fgets()</code> and then use <code>sscanf()</code> on each line."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1670806"}, "reply_to_user": {"reputation": 616, "user_id": 1762208, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xBdrF.jpg?s=128&g=1", "display_name": "bentank", "link": "https://stackoverflow.com/users/1762208/bentank"}, "edited": false, "score": 0, "creation_date": 1430951090, "post_id": 30088287, "comment_id": 48290501, "body": "@bentank: I am compiling the code with gcc 4.8.2 on ubuntu 14.04. I&#39;ll give it a try on a different machine."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1430951382, "post_id": 30088287, "comment_id": 48290609, "body": "@user1670806 Confirmed, datafile is fine, <code>19973</code> lines read with 3 floats per line. Why are you reading with a <code>for</code> loop? A <code>while</code> loop with <code>fgets</code> or <code>getline</code> will allow you to read an indeterminate number of lines."}, {"owner": {"reputation": 616, "user_id": 1762208, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xBdrF.jpg?s=128&g=1", "display_name": "bentank", "link": "https://stackoverflow.com/users/1762208/bentank"}, "edited": false, "score": 0, "creation_date": 1430951471, "post_id": 30088287, "comment_id": 48290643, "body": "Can you try reading <code>errno</code> in your handler for the fail case? It is not standard for it to get set but some implementations will do so."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1430954191, "post_id": 30088287, "comment_id": 48291537, "body": "Out of curiosity, what happens when you <a href=\"http://pastebin.com/UchKm41A\" rel=\"nofollow noreferrer\">turn this loose</a> on the same file, renamed to `pixels.txt&quot; (obvioiusly)?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1430957193, "post_id": 30088287, "comment_id": 48292432, "body": "Use the value returned by <code>scanf</code> to decide whether the loop should continue. Use <code>feof()</code> only to determine afterward whether it failed due to and end-of-file condition or an error."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1430956843, "post_id": 30089240, "comment_id": 48292317, "body": "The &quot;&quot;minus one&quot; not needed in <code>fgets (ln, MAXL - 1, fp)</code>."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1430956912, "post_id": 30089240, "comment_id": 48292341, "body": "Call me chicken :). I&#39;ll go fix it. This is the part I always forget <code>reads in at most one less than size</code>. Committed to long term memory now."}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 1, "last_activity_date": 1430956940, "last_edit_date": 1430956940, "creation_date": 1430954020, "answer_id": 30089240, "question_id": 30088287, "link": "https://stackoverflow.com/questions/30088287/c-fscanf-raises-eof-before-end-of-file/30089240#30089240", "title": "C - fscanf raises EOF before end-of-file", "body": "<p>While you are finding another computer, let me suggest another way to read the file instead of hardwiring a <code>for</code> loop to read <code>X</code> number of lines. Generally when you are reading lines of data, you are better off using <strong>line-oriented</strong> input methods like <code>fgets</code> or <code>getline</code> to read an entire line at a time into a buffer, and then parse the buffer to get the individual items you need. That way rather than trying to shoehorn your data into a <code>fscanf</code> read, you get the entire line every time, with any failure being limited to a parse of the buffer rather than the read of the file.</p>\n\n<p>Below is a quick bit of code that seems to do what it is you are attempting to do. The only suggestion I would have is that when reading 3 common pieces of data that are associated, you are probably better off creating a <code>struct</code> that contains the 3 members rather than creating 3 separate arrays to hold the data. That will simplify passing the data to functions, etc.. Either way works, so it is up to you. Let me know if you have questions:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define MAXL 48\n#define MAXF 20000\n\nint main (int argc, char **argv) {\n\n    if (argc &lt; 2 ) {\n        fprintf (stderr, \"error: insufficient input, usage: %s number\\n\", argv[0]);\n        return 1;\n    }\n\n    FILE *fp = NULL;\n    float *x = NULL;\n    float *y = NULL;\n    float *z = NULL;\n    size_t idx = 0;\n    char ln[MAXL] = {0};\n\n    /* open file with filename given on command line */\n    if (!(fp = fopen (argv[1], \"r\"))) {\n        fprintf (stderr, \"error: file open failed '%s'.\", argv[1]);\n        return 1;\n    }\n\n    /* allocate memory for arrays x, y, z (consider a struct) */\n    if (!(x = calloc (MAXF, sizeof *x))) {\n        fprintf (stderr, \"error: virtual memory exhausted\");\n        return 1;\n    }\n\n    if (!(y = calloc (MAXF, sizeof *y))) {\n        fprintf (stderr, \"error: virtual memory exhausted\");\n        return 1;\n    }\n\n    if (!(z = calloc (MAXF, sizeof *z))) {\n        fprintf (stderr, \"error: virtual memory exhausted\");\n        return 1;\n    }\n\n    /* read each LINE in file and parse with sscanf for 3 floats */\n    while (fgets (ln, MAXL, fp) != NULL)\n    {\n        if (sscanf (ln, \"%f%f%f\", &amp;x[idx], &amp;y[idx], &amp;z[idx]) == 3) {\n            idx++;\n            if (idx == MAXF) {\n                fprintf (stderr, \"warning: %d lines read.\\n\", MAXF);\n                break;\n            }\n        }\n        else\n            printf (\"error: line %zu, failed to read 3 floats.\\n\", idx);\n    }\n\n    printf (\"\\n read '%zu' lines.\\n\\n\", idx);\n\n    size_t i = 0;\n    for (i = 19938; i &lt; 19942; i++)\n        printf (\" line[%zu] : %.2f %.2f %.2f\\n\", i + 1, x[i], y[i], z[i]);\n    printf (\"\\n\");\n\n    free (x);\n    free (y);\n    free (z);\n\n    fclose (fp);\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>$ ./bin/fgets_sscanf_floats_dyn dat/testFile.txt\n\n read '19973' lines.\n\n line[19939] : 202.21 47.23 -453.42\n line[19940] : 202.21 47.23 -445.81\n line[19941] : 202.21 47.23 -419.89\n line[19942] : 202.21 47.41 179.25\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user1670806"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 432, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1430956940, "creation_date": 1430949189, "question_id": 30088287, "link": "https://stackoverflow.com/questions/30088287/c-fscanf-raises-eof-before-end-of-file", "title": "C - fscanf raises EOF before end-of-file", "body": "<p>I am writing a C code to read floating point numbers from a text file. The text file looks like this:</p>\n\n<pre><code>202.75 47.22 141.20\n202.75 47.22 -303.96\n202.75 47.22 -301.67\n202.75 47.22 482.42\n...\n</code></pre>\n\n<p>There are 19973 lines in this file and the C code snippet that reads the text file is </p>\n\n<pre><code>nLinesToRead = 19973;\nx  = (float *)calloc(nLinesToRead, sizeof(float));\ny = (float *)calloc(nLinesToRead, sizeof(float));\nz  = (float *)calloc(nLinesToRead, sizeof(float));\nptr = fopen(fileName, \"r\");\nfor(i=0; i&lt;nLinesToRead; i++)   {\n    status = fscanf(ptr, \"%f%f%f\", &amp;x[i], &amp;y[i], &amp;z[i]);\n    if(feof(ptr) &amp;&amp; i&lt;nLinesToRead)\n        printf(\"\\nERROR: encountered unexpected EOF in line %d\", i+1);\n    if(status != 3) {\n        printf(\"\\nERROR: Error reading valid pixels from the disk at line %d with status %d and %d\\n\", i+1, status, feof(ptr));\n        printf(\"\\nEOF is %d\\n\", EOF);\n        exit(FAILURE);\n    }\n}\n</code></pre>\n\n<p>The output of this code is </p>\n\n<pre><code>ERROR: encountered unexpected EOF in line 19940\nERROR: encountered unexpected EOF in line 19941\nERROR: Error reading valid pixels from the disk at line 19941 with status -1 and 0\n</code></pre>\n\n<p>indicating that fscanf is encountering EOF at an unexpected location. Looking at lines 19939 through 19942</p>\n\n<pre><code>202.21 47.23 -453.42\n202.21 47.23 -445.81\n202.21 47.23 -419.89\n202.21 47.41 179.25\n</code></pre>\n\n<p>I don't see anything weird there.</p>\n\n<p>Has anyone encountered this before?</p>\n"}, {"tags": ["c", "printf", "fwrite", "fread"], "comments": [{"owner": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "edited": false, "score": 0, "creation_date": 1430949193, "post_id": 30088217, "comment_id": 48289645, "body": "What is your desired output? I see nothing unexpected in your output."}, {"owner": {"reputation": 35069, "user_id": 1324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883238a436c061eaf848af87b8fda561?s=128&d=identicon&r=PG", "display_name": "Paul Roub", "link": "https://stackoverflow.com/users/1324/paul-roub"}, "edited": false, "score": 0, "creation_date": 1430949221, "post_id": 30088217, "comment_id": 48289663, "body": "You&#39;re writing the original, text, <code>test_data</code> array to disk. You probably mean to say <code>fwrite (data, sizeof(char), sizeof(data), pdataFile);</code> instead"}, {"owner": {"reputation": 53754, "user_id": 198536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9edaf4c1c1b89b5d39c40528d0017509?s=128&d=identicon&r=PG", "display_name": "wallyk", "link": "https://stackoverflow.com/users/198536/wallyk"}, "edited": false, "score": 0, "creation_date": 1430949231, "post_id": 30088217, "comment_id": 48289668, "body": "I haven&#39;t seen <code>_READ</code> or <code>_WRITE</code> used as the <i>mode</i> parameter to <code>fopen()</code>.  Are they defined as <code>&quot;r&quot;</code> and <code>&quot;w&quot;</code>?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 53754, "user_id": 198536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9edaf4c1c1b89b5d39c40528d0017509?s=128&d=identicon&r=PG", "display_name": "wallyk", "link": "https://stackoverflow.com/users/198536/wallyk"}, "edited": false, "score": 0, "creation_date": 1430949282, "post_id": 30088217, "comment_id": 48289685, "body": "@wallyk They&#39;re assigned at the top of his function."}, {"owner": {"reputation": 53754, "user_id": 198536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9edaf4c1c1b89b5d39c40528d0017509?s=128&d=identicon&r=PG", "display_name": "wallyk", "link": "https://stackoverflow.com/users/198536/wallyk"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1430949347, "post_id": 30088217, "comment_id": 48289719, "body": "@Barmar:  Thanks.  I looked in /usr/include/std*.h instead of in the code.  What a weird thing to do!"}, {"owner": {"reputation": 2556, "user_id": 330601, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/fe0cddef9090d3f081e0cec085b44d11?s=128&d=identicon&r=PG", "display_name": "T9b", "link": "https://stackoverflow.com/users/330601/t9b"}, "reply_to_user": {"reputation": 35069, "user_id": 1324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883238a436c061eaf848af87b8fda561?s=128&d=identicon&r=PG", "display_name": "Paul Roub", "link": "https://stackoverflow.com/users/1324/paul-roub"}, "edited": false, "score": 0, "creation_date": 1430949850, "post_id": 30088217, "comment_id": 48289974, "body": "@PaulRoub This writes the data in a legible form, but the second execution is still not correct. I&#39;m getting gaps <code>data read from file: 6ef8a0b4 51cc7fcbc6e7e 24486c3af8cbd976c173de0fb97b87bead547dff2</code>"}, {"owner": {"reputation": 18935, "user_id": 19405, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a72b55a41a43ea0493fc64641a1ed295?s=128&d=identicon&r=PG", "display_name": "nobody", "link": "https://stackoverflow.com/users/19405/nobody"}, "edited": false, "score": 0, "creation_date": 1430949926, "post_id": 30088217, "comment_id": 48290015, "body": "Probably not the source of the problem but you have way too many semicolons in your code (you don&#39;t need them after {} blocks, for example)."}, {"owner": {"reputation": 2556, "user_id": 330601, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/fe0cddef9090d3f081e0cec085b44d11?s=128&d=identicon&r=PG", "display_name": "T9b", "link": "https://stackoverflow.com/users/330601/t9b"}, "reply_to_user": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "edited": false, "score": 0, "creation_date": 1430949943, "post_id": 30088217, "comment_id": 48290024, "body": "@merlin2011 I just posted an update to answer your question."}, {"owner": {"reputation": 2556, "user_id": 330601, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/fe0cddef9090d3f081e0cec085b44d11?s=128&d=identicon&r=PG", "display_name": "T9b", "link": "https://stackoverflow.com/users/330601/t9b"}, "reply_to_user": {"reputation": 18935, "user_id": 19405, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a72b55a41a43ea0493fc64641a1ed295?s=128&d=identicon&r=PG", "display_name": "nobody", "link": "https://stackoverflow.com/users/19405/nobody"}, "edited": false, "score": 0, "creation_date": 1430949981, "post_id": 30088217, "comment_id": 48290042, "body": "@AndrewMedico thanks."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1430950324, "post_id": 30088217, "comment_id": 48290194, "body": "try <code>printf(&quot;%2hhx&quot;, ((char *)dataBuffer)[idx]); </code> --&gt; <code>printf(&quot;%c&quot;, dataBuffer[idx]);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 2556, "user_id": 330601, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/fe0cddef9090d3f081e0cec085b44d11?s=128&d=identicon&r=PG", "display_name": "T9b", "link": "https://stackoverflow.com/users/330601/t9b"}, "edited": false, "score": 0, "creation_date": 1430950976, "post_id": 30088633, "comment_id": 48290450, "body": "Just to clarify for other people I changed which array was written as suggested here and included leading zeros thus: <code>printf(&quot;%02hhx&quot;, ((char *)dataBuffer)[idx]); </code>"}, {"owner": {"reputation": 2556, "user_id": 330601, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/fe0cddef9090d3f081e0cec085b44d11?s=128&d=identicon&r=PG", "display_name": "T9b", "link": "https://stackoverflow.com/users/330601/t9b"}, "edited": false, "score": 0, "creation_date": 1430952204, "post_id": 30088633, "comment_id": 48290891, "body": "Actually I spoke to soon! This is not the answer because I forgot to erase the file on testing. It should be writing the data from <code>test_data</code> and not the data copied into <code>data</code>. I know that these should be the same, but the copy was only performed to write out the data in readable format. This won&#39;t normally be in finished code."}, {"owner": {"reputation": 2241, "user_id": 816536, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oeXXN.jpg?s=128&g=1", "display_name": "Greg A. Woods", "link": "https://stackoverflow.com/users/816536/greg-a-woods"}, "reply_to_user": {"reputation": 2556, "user_id": 330601, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/fe0cddef9090d3f081e0cec085b44d11?s=128&d=identicon&r=PG", "display_name": "T9b", "link": "https://stackoverflow.com/users/330601/t9b"}, "edited": false, "score": 0, "creation_date": 1430952592, "post_id": 30088633, "comment_id": 48291026, "body": "Try again.  If you want the output on the second execution to look as you say then you <i>must</i> either <code>fwrite(data,...)</code>, or else just <code>printf(&quot;%s&quot;, dataBuffer)</code> with no loop."}, {"owner": {"reputation": 2241, "user_id": 816536, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oeXXN.jpg?s=128&g=1", "display_name": "Greg A. Woods", "link": "https://stackoverflow.com/users/816536/greg-a-woods"}, "reply_to_user": {"reputation": 2556, "user_id": 330601, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/fe0cddef9090d3f081e0cec085b44d11?s=128&d=identicon&r=PG", "display_name": "T9b", "link": "https://stackoverflow.com/users/330601/t9b"}, "edited": false, "score": 0, "creation_date": 1430954845, "post_id": 30088633, "comment_id": 48291727, "body": "Perhaps your question should also have stated what exactly you expected to find in the data file after the initial run.   :-)  Given you called it a &quot;.bin&quot; file I assumed you wanted it to contain the bytes represented by the hexadecimal values given in the <code>test_data</code> string.  If you want it to contain the string itself then obviously all your efforts at converting it in both steps are wasted."}], "tags": [], "owner": {"reputation": 2241, "user_id": 816536, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oeXXN.jpg?s=128&g=1", "display_name": "Greg A. Woods", "link": "https://stackoverflow.com/users/816536/greg-a-woods"}, "is_accepted": true, "score": 3, "last_activity_date": 1430950638, "creation_date": 1430950638, "answer_id": 30088633, "question_id": 30088217, "link": "https://stackoverflow.com/questions/30088217/ansi-c-what-am-i-doing-wrong-with-fwrite-and-the-fread/30088633#30088633", "title": "ANSI C What am I doing wrong with fwrite and the fread?", "body": "<p>You are probably writing the contents of the wrong array to the file.</p>\n\n<p>Try writing <code>data</code> instead of <code>test_data</code>.</p>\n\n<p>You will also likely want leading zeros on the values you print when reading the file (just as you already have when you initially print the scanned data).</p>\n"}], "owner": {"reputation": 2556, "user_id": 330601, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/fe0cddef9090d3f081e0cec085b44d11?s=128&d=identicon&r=PG", "display_name": "T9b", "link": "https://stackoverflow.com/users/330601/t9b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 234, "favorite_count": 0, "accepted_answer_id": 30088633, "answer_count": 1, "score": 0, "last_activity_date": 1430984942, "creation_date": 1430948870, "last_edit_date": 1430984942, "question_id": 30088217, "link": "https://stackoverflow.com/questions/30088217/ansi-c-what-am-i-doing-wrong-with-fwrite-and-the-fread", "title": "ANSI C What am I doing wrong with fwrite and the fread?", "body": "<p>I have the following code in which I attempt to write some data to a file on first execution, and then on second execution reads the file and prints the data to the screen.</p>\n\n<p>In the first execution it writes the data to the screen exactly as it is in the code (<code>test_data</code>), and the file is created as expected. </p>\n\n<p>The problem is when I read the file back and write what I have read to the screen it is just the plain contents of the file that I would see in any text editor, and not the original data. I have no idea what I'm doing wrong.</p>\n\n<p>I'm pretty sure line 67 is at fault, something to do with the way I am printing it to the screen, but I'm very new to C and not used to juggling formats of data. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main ()\n{\n\n    FILE * pdataFile = NULL;\n    const char * datafilename = \"data.bin\";\n    const char * _WRITE = \"wb\"; \n    const char * _READ  = \"rb\"; \n    uint8_t data[32]; \n    int idx; \n    unsigned long dataFileLen; \n    char dataBuffer;\n\n    char test_data[] = \"ahFlup1r2PWO1zySK9SBcPIQC5DcCw1mq7JrObea8lDWH&amp;FcLbi7EzBu7ow56KbJ\"; \n    char * pos = test_data;\n\n\n\n    pdataFile = fopen(datafilename, _READ);\n    if (pdataFile == NULL) {\n        printf(\"No existing file named: %s .\\n\", datafilename);\n\n        /******** Print Contents of data Array ********/\n        printf(\"Random data: \"); \n\n        for (idx = 0; idx &lt; 32; ++idx) {\n            sscanf(pos, \"%2hhx\", &amp;data[idx]);\n            pos += 2 * sizeof(char); \n            printf(\"%02x\", data[idx]);  \n        };\n\n        printf(\"\\n\"); // new line\n\n\n        /******** Save data to File ********/\n        pdataFile = fopen(datafilename, _WRITE);\n        if (pdataFile == NULL) {\n            printf(\"Error opening file %s for writing. End Program\\n\", datafilename); \n        } else {      \n            fwrite (test_data, sizeof(char), sizeof(test_data), pdataFile); \n\n            if (ferror (pdataFile))\n                printf(\"Error writing file %s.\", datafilename);     \n\n            fclose (pdataFile);\n        };\n\n    } else {\n        fseek(pdataFile, 0, SEEK_END);\n        dataFileLen = ftell(pdataFile);\n        fseek(pdataFile, 0, SEEK_SET);\n\n        char *dataBuffer = malloc((dataFileLen+1)*sizeof(unsigned char));\n\n        fread(dataBuffer, dataFileLen, 1, pdataFile);\n\n        if (ferror (pdataFile))\n            {\n                printf(\"Error reading file contents: %s.\", datafilename);\n\n            }else{\n            printf(\"data read from file: \");            \n            for(idx = 0; idx&lt;dataFileLen; ++idx){ \n                printf(\"%2hhx\", ((char *)dataBuffer)[idx]);  \n            };\n        };\n\n        printf(\"\\n\"); // new line\n\n        fclose (pdataFile);\n\n    };\n\n    return 0;\n}; \n</code></pre>\n\n<p><strong>UPDATE</strong> I'm expecting to see the following:\nOn first execution\n<code>Random data: ahFlup1r2PWO1zySK9SBcPIQC5DcCw1mq7JrObea8lDWH&amp;FcLbi7EzBu7ow56KbJ</code></p>\n\n<p>On second execution\n<code>data read from file: ahFlup1r2PWO1zySK9SBcPIQC5DcCw1mq7JrObea8lDWH&amp;FcLbi7EzBu7ow56KbJ</code></p>\n\n<p><strong>Second Update</strong> Even with the answers posted here I am still getting:\n<code>Seed read from file: 6168466c757031723250574f317a79534b39534263504951433544634377266d71374a724f626561286c4457482646634c626937457a4275376f7735264b624a00</code></p>\n\n<p>The program is compiled in GCC and should compile from the code here.</p>\n"}, {"tags": ["c", "shared-libraries", "posix"], "answers": [{"tags": [], "owner": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "is_accepted": true, "score": 2, "last_activity_date": 1430964053, "last_edit_date": 1430964053, "creation_date": 1430963192, "answer_id": 30090551, "question_id": 30088047, "link": "https://stackoverflow.com/questions/30088047/is-it-possible-to-use-a-shared-object-constructor-for-setting-the-library-search/30090551#30090551", "title": "Is it possible to use a shared object constructor for setting the library search path?", "body": "<p><strong>No</strong>, you cannot in general. Some linkers might support it, but others definitely won't. Many dynamic linkers will just ignore changes to <code>LD_LIBRARY_PATH</code> or equivalent after the main executable is loaded, so you may not even be able to influence the loading path at all at runtime. Other linkers may not even try to call initializers or constructors before all the libraries are linked (the Mac OS X <code>dyld</code> appears to behave this way, for example).</p>\n\n<p>Furthermore, some linkers won't even load two libraries that have the same <code>soname</code>, as they would be considered the same library. So, considering that you have potential name clashes in your libraries, this would preclude even loading them automatically in the first place.</p>\n\n<hr>\n\n<p>For runtime loading of libraries, POSIX provides <code>dlopen</code> and <code>dlsym</code>. <code>dlopen</code> lets you load an arbitrary library by file path, and <code>dlsym</code> lets you grab pointers to symbols defined within that library Consider using those instead of some dynamic path-changing hack - <code>dlopen</code> and <code>dlsym</code> are portable and reasonably easy to use. Yes, you don't get \"automatic\" symbol resolution (in that you have to <code>dlsym</code> everything yourself), but there are ways to design your libraries to make this easier (or use macros to make resolution easier).</p>\n\n<p>On Windows, you can use <code>LoadLibrary</code> and <code>GetProcAddress</code> similarly. If you want a nice cross-platform library that smooths over the platform differences, consider something like <a href=\"http://www.gnu.org/software/libtool/manual/html_node/Using-libltdl.html\" rel=\"nofollow\">libltdl</a>.</p>\n"}], "owner": {"reputation": 771, "user_id": 1964905, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/388777f9316f149ddf5850df316ce420?s=128&d=identicon&r=PG&f=1", "display_name": "Sander Mertens", "link": "https://stackoverflow.com/users/1964905/sander-mertens"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "accepted_answer_id": 30090551, "answer_count": 1, "score": 3, "last_activity_date": 1430964053, "creation_date": 1430948236, "last_edit_date": 1495540710, "question_id": 30088047, "link": "https://stackoverflow.com/questions/30088047/is-it-possible-to-use-a-shared-object-constructor-for-setting-the-library-search", "title": "Is it possible to use a shared object constructor for setting the library search path?", "body": "<p>I am storing shared objects in a hierarchical folder structure. Shared libraries can depend on one another. At runtime, shared library X may need to load shared library Y. I am unsure what mechanism I can use to have library X locate Y.</p>\n\n<p>I'd rather not use -rpath because it doesn't translate well across platforms:</p>\n\n<ol>\n<li><a href=\"https://stackoverflow.com/questions/4513799/how-to-set-the-runtime-path-rpath-of-an-executable-with-gcc-under-mac-osx\">How to set the runtime path (-rpath) of an executable with gcc under Mac OSX?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/107888/is-there-a-windows-msvc-equivalent-to-the-rpath-linker-flag\">Is there a Windows/MSVC equivalent to the -rpath linker flag?</a> </li>\n</ol>\n\n<p>I can't put the shared objects in a single directory because of potential name clashes. LD_LIBRARY_PATH and PATH are not usable since I'd be adding a <em>lot</em> of paths.</p>\n\n<p>This has me wondering whether I can modify the LD_LIBRARY_PATH in the <a href=\"https://stackoverflow.com/questions/9759880/automatically-executed-functions-when-loading-shared-libraries\">constructor</a> of a shared object (using -Wl,-init). This would require the constructor to be run before the runtime linking happens. I couldn't find whether this is the case.</p>\n\n<p>In essence, I'm thinking about doing the following (haven't tried this code out yet):</p>\n\n<p>Add this function to the library source code:</p>\n\n<pre><code>extern char *searchPath;\n\nvoid construct() {\n    char *libPath = getenv(\"LD_LIBRARY_PATH\");\n    char *new_libPath = malloc(1 + snprintf(NULL, 0, \"%s:%s\", libPath, searchPath);\n    sprintf(new_libPath, \"%s:%s\", libPath, searchPath);\n    setenv(\"LD_LIBRARY_PATH\", new_libPath, 0);\n}\n</code></pre>\n\n<p>And compile with:</p>\n\n<pre><code>gcc foo.c --shared -o foo -Wl,-init,construct\n</code></pre>\n"}, {"tags": ["c", "malloc"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 7, "creation_date": 1430948278, "post_id": 30088025, "comment_id": 48289208, "body": "Sounds like you&#39;re using a C++ compiler instead of C."}, {"owner": {"reputation": 3681, "user_id": 2817371, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fafb901e8d840c703f4a5089692427ad?s=128&d=identicon&r=PG&f=1", "display_name": "Red Alert", "link": "https://stackoverflow.com/users/2817371/red-alert"}, "edited": false, "score": 0, "creation_date": 1430948319, "post_id": 30088025, "comment_id": 48289231, "body": "How are you compiling? It sounds like you may be using a <code>c++</code> compiler"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1430948325, "post_id": 30088025, "comment_id": 48289235, "body": "C allows <code>void*</code> pointers to be converted to/from any other pointer type. C++ requires an explicit cast."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1430948386, "post_id": 30088025, "comment_id": 48289265, "body": "But if you&#39;re using C++, you should either use <code>std::vector</code> or <code>new double[size]</code>."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1430949065, "post_id": 30088025, "comment_id": 48289590, "body": "Change the suffix of your source file from .cpp to .c and then compile it as C rather than C++."}], "answers": [{"comments": [{"owner": {"reputation": 321, "user_id": 5676973, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/51558ab5213519c1b658c042de037043?s=128&d=identicon&r=PG&f=1", "display_name": "hungryWolf", "link": "https://stackoverflow.com/users/5676973/hungrywolf"}, "edited": false, "score": 0, "creation_date": 1505883952, "post_id": 30088066, "comment_id": 79588916, "body": "using <b>.cpp</b> file extension in gcc also causes <code>invalid conversion from void* to double*</code> error in above scenario"}], "tags": [], "owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "is_accepted": true, "score": 44, "last_activity_date": 1430948318, "creation_date": 1430948318, "answer_id": 30088066, "question_id": 30088025, "link": "https://stackoverflow.com/questions/30088025/malloc-invalid-conversion-from-void-to-double/30088066#30088066", "title": "malloc - invalid conversion from void* to double*", "body": "<p>You are using a C++ compiler.</p>\n\n<pre><code>double *array=malloc(sizeof(double)*size);\n</code></pre>\n\n<p>is valid in C. There is an implicit conversion from any object pointer type to <code>void *</code>.</p>\n\n<p>In C++ it is not valid, there is no such implicit conversion, and you need a cast:</p>\n\n<pre><code>double *array= (double *) malloc(sizeof(double)*size);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3681, "user_id": 2817371, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fafb901e8d840c703f4a5089692427ad?s=128&d=identicon&r=PG&f=1", "display_name": "Red Alert", "link": "https://stackoverflow.com/users/2817371/red-alert"}, "edited": false, "score": 0, "creation_date": 1430948771, "post_id": 30088072, "comment_id": 48289432, "body": "we can <code>static_cast</code> to and from void pointer types in c++, at least"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 3681, "user_id": 2817371, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fafb901e8d840c703f4a5089692427ad?s=128&d=identicon&r=PG&f=1", "display_name": "Red Alert", "link": "https://stackoverflow.com/users/2817371/red-alert"}, "edited": false, "score": 0, "creation_date": 1430949656, "post_id": 30088072, "comment_id": 48289868, "body": "@RedAlert isn&#39;t <code>reinterpret_cast</code> exactly equivalent to c type casts?"}, {"owner": {"reputation": 3681, "user_id": 2817371, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fafb901e8d840c703f4a5089692427ad?s=128&d=identicon&r=PG&f=1", "display_name": "Red Alert", "link": "https://stackoverflow.com/users/2817371/red-alert"}, "edited": false, "score": 0, "creation_date": 1430951097, "post_id": 30088072, "comment_id": 48290508, "body": "<code>reinterpret_cast</code> is a specialization of the very generic c-casting. When you use a c-style cast, the compiler picks what kind of cast to use. For instance, you can&#39;t say <code>reinterpret_cast&lt;double&gt;(6)</code>, but you can say <code>(double) 6</code>. Furthermore, <code>reinterpret_cast</code> cannot cast away constness, while a c-style cast can (you need <code>const_cast</code> for this in c++). In the cast of <code>void*</code>, there is technically nothing to &quot;reinterpret&quot;, since a void pointer does not reveal what type it is pointing to."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 6, "last_activity_date": 1430949633, "last_edit_date": 1495539973, "creation_date": 1430948340, "answer_id": 30088072, "question_id": 30088025, "link": "https://stackoverflow.com/questions/30088025/malloc-invalid-conversion-from-void-to-double/30088072#30088072", "title": "malloc - invalid conversion from void* to double*", "body": "<p>You are compiling c code, with a c++ compiler.</p>\n\n<p>When you are using a c++ compiler, you should write c++ code, so <code>malloc()</code> is not so common in c++, instead</p>\n\n<pre><code>double *data = new double[size];\n</code></pre>\n\n<p>would be good c++ code, if you need to <code>free()</code> the pointer, you need to</p>\n\n<pre><code>delete[] data;\n</code></pre>\n\n<p>You can of course use <code>malloc()</code> in c++, but it would be like this</p>\n\n<pre><code>double *data = static_cast&lt;double *&gt;(malloc(size * sizeof(double));\n</code></pre>\n\n<p>because <code>void *</code> in c++ is not converted to any pointer type automatically.</p>\n\n<p>In c, however, there is no need for the cast, and in fact it makes the code unnecessarily ugly apart from hiding bugs from your program, cehck here <a href=\"https://stackoverflow.com/a/605858/1983495\">Do I cast the result of malloc?</a>.</p>\n"}], "owner": {"reputation": 1257, "user_id": 4214719, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4f4851ca5304f2020ce92fa7ec69b48a?s=128&d=identicon&r=PG&f=1", "display_name": "Diana", "link": "https://stackoverflow.com/users/4214719/diana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25796, "favorite_count": 10, "accepted_answer_id": 30088066, "answer_count": 2, "score": 20, "last_activity_date": 1539173504, "creation_date": 1430948141, "last_edit_date": 1539173504, "question_id": 30088025, "link": "https://stackoverflow.com/questions/30088025/malloc-invalid-conversion-from-void-to-double", "title": "malloc - invalid conversion from void* to double*", "body": "<p>I want to write a function that creates a copy of a double array using pointers.\nThis is my code so far:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ndouble* copy (double *array, int size)\n{\n    double *v=malloc(sizeof(double)*size);\n    for (int i=0; i&lt;size; i++)\n        *(v+i)=*(array+i);\n    return v;\n}\n\nint main ()\n{\n    //double array[];\n    int size;\n    printf (\"size= \"); scanf (\"%i\",&amp;size);\n    double *array=malloc(sizeof(double)*size);\n    for (int i=0; i&lt;size; i++)\n        scanf(\"%f\",&amp;array[i]);\n    copy(array,size);\n    free(array);\n}\n</code></pre>\n\n<p>I have 2 compilation errors that I can't get rid of. I get </p>\n\n<blockquote>\n  <p>invalid conversion from void* to double*</p>\n</blockquote>\n\n<p>when I try to allocate memory using malloc but I can't understand what I'm doing wrong.</p>\n"}, {"tags": ["c++", "c", "binaryfiles"], "comments": [{"owner": {"reputation": 901, "user_id": 3749292, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5UptT.jpg?s=128&g=1", "display_name": "Jerry Ajay", "link": "https://stackoverflow.com/users/3749292/jerry-ajay"}, "edited": false, "score": 0, "creation_date": 1430947866, "post_id": 30087895, "comment_id": 48289004, "body": "Use bitwise arithmetic operators. <a href=\"http://www.cprogramming.com/tutorial/bitwise_operators.html\" rel=\"nofollow noreferrer\">cprogramming.com/tutorial/bitwise_operators.html</a>"}, {"owner": {"reputation": 5521, "user_id": 755851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1bb0ef4d5aebec860f85f7c76b894fd?s=128&d=identicon&r=PG", "display_name": "Foon", "link": "https://stackoverflow.com/users/755851/foon"}, "edited": false, "score": 0, "creation_date": 1430947881, "post_id": 30087895, "comment_id": 48289015, "body": "sizeof(int)=4 means 4 bytes, aka 32 bits.  I think you therefore mean n bits from the first spot and 32-n bits from the other to form a 32 bit integer... but maybe not; can you clarify?"}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1430948815, "post_id": 30087895, "comment_id": 48289448, "body": "It&#39;s possible with memcpy.  Also with unions.  Also with bitwise operators.  Also with pointer assignment.  A tutorial on any of those topics should get you going."}, {"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1430950553, "post_id": 30087895, "comment_id": 48290274, "body": "<code>a = (b &lt;&lt; 16) | c;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 7440, "user_id": 157344, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/b403786b380b1b5a1ed25f144df103e6?s=128&d=identicon&r=PG", "display_name": "Freddie Chopin", "link": "https://stackoverflow.com/users/157344/freddie-chopin"}, "is_accepted": false, "score": 2, "last_activity_date": 1430947975, "creation_date": 1430947975, "answer_id": 30087970, "question_id": 30087895, "link": "https://stackoverflow.com/questions/30087895/how-can-i-read-a-var-from-a-binary-file-from-different-parts-say-2-bytes-and/30087970#30087970", "title": "How can I read a var from a binary file from different parts? (Say, 2 bytes, and another 2 bytes from another place?)", "body": "<p>It is obviously possible and can be accomplished in many different ways.</p>\n\n<p>You can just read the data (with <code>fread()</code> or <code>read()</code> or whatever you want) into an array of 4 <code>char</code>, in two steps. Then you can just <code>memcpy()</code> this to your <code>int</code>. If you're not afraid of casting and pointer arithmetic, the use of <code>char array[4]</code> and <code>memcpy()</code> can be skipped.</p>\n"}, {"tags": [], "owner": {"reputation": 715, "user_id": 2450533, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xa4U8.png?s=128&g=1", "display_name": "Klemens Morgenstern", "link": "https://stackoverflow.com/users/2450533/klemens-morgenstern"}, "is_accepted": false, "score": -1, "last_activity_date": 1430950300, "creation_date": 1430950300, "answer_id": 30088565, "question_id": 30087895, "link": "https://stackoverflow.com/questions/30087895/how-can-i-read-a-var-from-a-binary-file-from-different-parts-say-2-bytes-and/30088565#30088565", "title": "How can I read a var from a binary file from different parts? (Say, 2 bytes, and another 2 bytes from another place?)", "body": "<p>I would to it the following way:</p>\n\n<pre><code>std::ifstream fstr(\"file\", std::ios_base::binary);\n\nint value;  \n\nfstr.read(reinterpret_cast&lt;char*&gt;(&amp;value), 2); //first two bytes\n\n//read other stuff\n\nfstr.read(reinterpret_cast&lt;char*&gt;(&amp;value)+2, 2); //second two bytes\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10555, "user_id": 2812864, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GVsZM.jpg?s=128&g=1", "display_name": "Mateusz Grzejek", "link": "https://stackoverflow.com/users/2812864/mateusz-grzejek"}, "is_accepted": true, "score": 3, "last_activity_date": 1430950783, "creation_date": 1430950783, "answer_id": 30088676, "question_id": 30087895, "link": "https://stackoverflow.com/questions/30087895/how-can-i-read-a-var-from-a-binary-file-from-different-parts-say-2-bytes-and/30088676#30088676", "title": "How can I read a var from a binary file from different parts? (Say, 2 bytes, and another 2 bytes from another place?)", "body": "<p>Yes, it's possible and can be done in quite portable way <strong>(*)</strong>:</p>\n\n<pre><code>union int_bytes\n{\n    uint32_t value;\n    unsigned char bytes[4];\n};\n\nlong int first_part_offset = ... ;\nlong int second_part_offset = ... ;\nsize_t first_part_size = ... ;\n\nFILE* file = fopen(\"filename\", \"rb\");\n\nint_bytes result;\n\nfseek(file, first_part_offset, SEEK_SET);\nfread(&amp;(result.bytes[0]), 1, first_part_size, file);\n\nif(first_part_size &lt; 4) // nothing to read if first part was 4-byte long...\n{\n    fseek(file, second_part_offset, SEEK_SET);\n    fread(&amp;(result.bytes[first_part_size]), 1, first_part_size, file);\n}\n\nuint32_t final_int_value = int_bytes.value;\n</code></pre>\n\n<hr>\n\n<p><strong>(*)</strong> What non-portable can be done here? Remember, that serializing data always depends on <a href=\"http://en.wikipedia.org/wiki/Endianness\" rel=\"nofollow\">byte ordering (endianness)</a> of current architecture.</p>\n\n<p>If you write this code:</p>\n\n<pre><code>int value = ... ;\nfwrite(&amp;value, sizeof(int), 1, file_handle);\n</code></pre>\n\n<p>file content will be endianness-dependent. Yes, most platforms are little-endian these days, but not all of them! If you know, that certain binary data was serialized as big-endian and you current hardware is little-endian (or vice versa), you will need to swap read bytes (most compilers allow to do this efficiently, however, providing intrinsic, that maps directly to <a href=\"http://docs.oracle.com/cd/E19455-01/806-3773/instructionset-122/index.html\" rel=\"nofollow\"><code>BSWAP</code> instruction</a>).</p>\n\n<p>Unions are your best friends in many byte-wise operations, that suppose to have at least <em>minimal</em> portability.</p>\n"}, {"tags": [], "owner": {"reputation": 2493, "user_id": 4866989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8ea9d94abae12663ba3ad2564619081?s=128&d=identicon&r=PG&f=1", "display_name": "Tim3880", "link": "https://stackoverflow.com/users/4866989/tim3880"}, "is_accepted": false, "score": 0, "last_activity_date": 1430950854, "creation_date": 1430950854, "answer_id": 30088696, "question_id": 30087895, "link": "https://stackoverflow.com/questions/30087895/how-can-i-read-a-var-from-a-binary-file-from-different-parts-say-2-bytes-and/30088696#30088696", "title": "How can I read a var from a binary file from different parts? (Say, 2 bytes, and another 2 bytes from another place?)", "body": "<p>you can always read them into two variables and calculate your result. I don't think it's very useful or practical to read them into one var. If the two parts are close enough, you can read them into one buffer structure to avoid two reads.</p>\n"}], "owner": {"reputation": 105, "user_id": 3597501, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4e6fb4e0ef27669d270944150bd9d85e?s=128&d=identicon&r=PG&f=1", "display_name": "pchr8", "link": "https://stackoverflow.com/users/3597501/pchr8"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 30088676, "answer_count": 4, "score": 1, "last_activity_date": 1430950854, "creation_date": 1430947726, "question_id": 30087895, "link": "https://stackoverflow.com/questions/30087895/how-can-i-read-a-var-from-a-binary-file-from-different-parts-say-2-bytes-and", "title": "How can I read a var from a binary file from different parts? (Say, 2 bytes, and another 2 bytes from another place?)", "body": "<p>Is it possible to read data from multiple parts of a binary file? </p>\n\n<p>For the sake of example, an integer; sizeof(int)=4; I want to read the first n bytes from a place on the file, and the other 4-n bytes from another place; then somehow fit them together to form a full 4 byte integer.</p>\n\n<p>Is this possible? </p>\n"}, {"tags": ["c", "pointers", "type-conversion", "pass-by-reference", "memory-address"], "comments": [{"owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 4, "creation_date": 1430947281, "post_id": 30087699, "comment_id": 48288710, "body": "You&#39;re asking for the entire introductory section of a C programming class. Rather a lot for one question."}, {"owner": {"reputation": 616, "user_id": 1762208, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xBdrF.jpg?s=128&g=1", "display_name": "bentank", "link": "https://stackoverflow.com/users/1762208/bentank"}, "edited": false, "score": 1, "creation_date": 1430947381, "post_id": 30087699, "comment_id": 48288763, "body": "There is a reason <code>atoi()</code> exists - see <a href=\"http://www.cplusplus.com/reference/cstdlib/atoi/\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 9809, "user_id": 1389110, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/80dbf8bedd0a04f4c971558bfd39ed04?s=128&d=identicon&r=PG", "display_name": "Pyderman", "link": "https://stackoverflow.com/users/1389110/pyderman"}, "edited": false, "score": 0, "creation_date": 1430947687, "post_id": 30087699, "comment_id": 48288901, "body": "Yep, and if I were only allowed an answer for just one of the questions, it would be Q5. I invite you to shed some light. Much appreciated."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1430947724, "post_id": 30087699, "comment_id": 48288921, "body": "You&#39;re only supposed to ask one question at a time. I attempted to answer the one in the title."}, {"owner": {"reputation": 17406, "user_id": 1613983, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/lAhj3.png?s=128&g=1", "display_name": "quant", "link": "https://stackoverflow.com/users/1613983/quant"}, "edited": false, "score": 0, "creation_date": 1430947742, "post_id": 30087699, "comment_id": 48288936, "body": "There&#39;s a lot of good questions here!"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1430947835, "post_id": 30087699, "comment_id": 48288988, "body": "Your last paragraph is true : that&#39;s way too long for a single question here, and a correct answer would be also too long. Sorry but this question is really too broad ; First read some tutorials, and then come back here to ask more precise questions. You will find people ready to answer, provided you do not ask for a full introduction to C :-)"}], "answers": [{"tags": [], "owner": {"reputation": 6532, "user_id": 919578, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/VaAKB.jpg?s=128&g=1", "display_name": "Benjy Kessler", "link": "https://stackoverflow.com/users/919578/benjy-kessler"}, "is_accepted": false, "score": 2, "last_activity_date": 1430947556, "last_edit_date": 1430947556, "creation_date": 1430947260, "answer_id": 30087760, "question_id": 30087699, "link": "https://stackoverflow.com/questions/30087699/c-why-does-c-need-the-memory-address-of-a-char-in-order-to-convert-it-to-an-int/30087760#30087760", "title": "C: Why does C need the memory address of a char in order to convert it to an int?", "body": "<p>Your misunderstanding is that <code>2 != '2'</code>. They both have integral values but those values are different from one another. The ascii value of <code>'2'</code> does not equal <code>2</code> it equals <code>50</code>. This means that int <code>a = '2';</code> causes a to evaluate to <code>50</code>. The standard way of converting integral chars to a numeric value is writing int <code>a = '2' - '0';</code> This will cause <code>a</code> to evaluate to <code>2</code>. </p>\n\n<p><code>argv</code> is an array of <code>char *</code>. This means that <code>argv[j][i]</code> is a char and <code>&amp;argv[j][i]</code> is a <code>char *</code> it is the address of the character at location <code>argv[j][i]</code>. This means that <code>atoi(&amp;argv[j][i])</code> will compile but I am not sure it is doing what you expect because it will try to translate the entire string starting at <code>argv[j][i]</code> into a number instead of only the specific character at <code>argv[j][i]</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 9809, "user_id": 1389110, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/80dbf8bedd0a04f4c971558bfd39ed04?s=128&d=identicon&r=PG", "display_name": "Pyderman", "link": "https://stackoverflow.com/users/1389110/pyderman"}, "edited": false, "score": 0, "creation_date": 1430948347, "post_id": 30087829, "comment_id": 48289253, "body": "OK, but (i) why must it always be referenced by address because its length is variable? Can you explain to me why one necessitates the other? And (ii) in my example, argv[1][i] is a char, not a string."}, {"owner": {"reputation": 1161, "user_id": 1055568, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/b5d29d3b038b1bb0e8a5dbc6da5f5177?s=128&d=identicon&r=PG", "display_name": "user1055568", "link": "https://stackoverflow.com/users/1055568/user1055568"}, "reply_to_user": {"reputation": 9809, "user_id": 1389110, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/80dbf8bedd0a04f4c971558bfd39ed04?s=128&d=identicon&r=PG", "display_name": "Pyderman", "link": "https://stackoverflow.com/users/1389110/pyderman"}, "edited": false, "score": 1, "creation_date": 1430949549, "post_id": 30087829, "comment_id": 48289813, "body": "ints, chars and floats can all fit in registers so can exist independently of a location in memory and typically can be moved around with a single cpu instruction. That doesn&#39;t mean the language couldn&#39;t have a string type that is referenced by value, but C tends to stay close to the hardware.  Right, argv[1][i] is a character, which is why you cannot pass it to atoi."}], "tags": [], "owner": {"reputation": 1161, "user_id": 1055568, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/b5d29d3b038b1bb0e8a5dbc6da5f5177?s=128&d=identicon&r=PG", "display_name": "user1055568", "link": "https://stackoverflow.com/users/1055568/user1055568"}, "is_accepted": false, "score": 0, "last_activity_date": 1430947502, "creation_date": 1430947502, "answer_id": 30087829, "question_id": 30087699, "link": "https://stackoverflow.com/questions/30087699/c-why-does-c-need-the-memory-address-of-a-char-in-order-to-convert-it-to-an-int/30087829#30087829", "title": "C: Why does C need the memory address of a char in order to convert it to an int?", "body": "<p>A string in C is a sequence of characters with a null terminator.  It will always be referenced by address (of the first character), because its length is variable.</p>\n"}, {"comments": [{"owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "edited": false, "score": 0, "creation_date": 1430948183, "post_id": 30087875, "comment_id": 48289156, "body": "Note that <code>char</code> can be signed or unsigned."}], "tags": [], "owner": {"reputation": 7440, "user_id": 157344, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/b403786b380b1b5a1ed25f144df103e6?s=128&d=identicon&r=PG", "display_name": "Freddie Chopin", "link": "https://stackoverflow.com/users/157344/freddie-chopin"}, "is_accepted": false, "score": 1, "last_activity_date": 1430948299, "last_edit_date": 1430948299, "creation_date": 1430947657, "answer_id": 30087875, "question_id": 30087699, "link": "https://stackoverflow.com/questions/30087699/c-why-does-c-need-the-memory-address-of-a-char-in-order-to-convert-it-to-an-int/30087875#30087875", "title": "C: Why does C need the memory address of a char in order to convert it to an int?", "body": "<p>Q1: <code>char</code> and <code>int</code> are \"the same\" only in the sense that both are (signed - usually) integers. There are multiple differences, for example <code>char</code> is (usually) 1 byte long, while <code>int</code> is (usually) at least 4 bytes long.</p>\n\n<p>Q2: your reasoning is wrong, because you compare an ASCII code of letter <code>'2'</code> (which is <code>50</code>) with a number <code>2</code> (which has no visual representation in ASCII).</p>\n\n<p>Q3: you made a mistake in your debugging - <code>&amp;argv[1][i]</code> is an address of <code>i-th</code> character in the <code>argv[1]</code> string. So essentially this is a pointer. In your debugger you probably saw the character that was \"pointed to\".</p>\n\n<p>Q4: see above - <code>argv[1][i]</code> is <code>'2'</code>, while <code>&amp;argv[1][i]</code> is an address in memory where this <code>'2'</code> can be found.</p>\n\n<p>Q5: you probably made a mistake in debugging - see answer to Q3.</p>\n"}, {"comments": [{"owner": {"reputation": 9809, "user_id": 1389110, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/80dbf8bedd0a04f4c971558bfd39ed04?s=128&d=identicon&r=PG", "display_name": "Pyderman", "link": "https://stackoverflow.com/users/1389110/pyderman"}, "edited": false, "score": 0, "creation_date": 1430948858, "post_id": 30087962, "comment_id": 48289472, "body": "Right, clearly I have yet to grasp the concept of pointers, and your response might help clarify things. How can a memory position hold both a c-string and a char?"}, {"owner": {"reputation": 310, "user_id": 4777095, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2OEYe9yofKc/AAAAAAAAAAI/AAAAAAAAACI/eTK5eT3KX8c/photo.jpg?sz=128", "display_name": "Henrik St&#229;hlberg", "link": "https://stackoverflow.com/users/4777095/henrik-st%c3%a5hlberg"}, "reply_to_user": {"reputation": 9809, "user_id": 1389110, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/80dbf8bedd0a04f4c971558bfd39ed04?s=128&d=identicon&r=PG", "display_name": "Pyderman", "link": "https://stackoverflow.com/users/1389110/pyderman"}, "edited": false, "score": 0, "creation_date": 1430949114, "post_id": 30087962, "comment_id": 48289614, "body": "The memoryposition holds a char. But a c-string is a pointer to an &quot;array&quot; of chars ending with the &#39;/0&#39; (null-determinator). In this case it is no difference since the string is only one char long."}], "tags": [], "owner": {"reputation": 310, "user_id": 4777095, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2OEYe9yofKc/AAAAAAAAAAI/AAAAAAAAACI/eTK5eT3KX8c/photo.jpg?sz=128", "display_name": "Henrik St&#229;hlberg", "link": "https://stackoverflow.com/users/4777095/henrik-st%c3%a5hlberg"}, "is_accepted": false, "score": 0, "last_activity_date": 1430947954, "creation_date": 1430947954, "answer_id": 30087962, "question_id": 30087699, "link": "https://stackoverflow.com/questions/30087699/c-why-does-c-need-the-memory-address-of-a-char-in-order-to-convert-it-to-an-int/30087962#30087962", "title": "C: Why does C need the memory address of a char in order to convert it to an int?", "body": "<blockquote>\n  <p>Q4. Why didn't the compiler allow me to use argv[1][i], if its value is no different to that of &amp;argv[1][i]?</p>\n</blockquote>\n\n<p>They are different</p>\n\n<p>&amp;argv[1][i] is a pointer to a memory position and</p>\n\n<p>argv[1][i] is the value of the char in that position</p>\n\n<p>It is just that</p>\n\n<pre><code>printf(\"%s\", &amp;argv[1][i]); // Prints the c-string at memory position\nprintf(\"%c\", argv[1][i]); // Prints the char\n</code></pre>\n\n<p>I assume that when you say \"printed\" you mean the printf() function.</p>\n"}, {"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 0, "last_activity_date": 1430947985, "creation_date": 1430947985, "answer_id": 30087972, "question_id": 30087699, "link": "https://stackoverflow.com/questions/30087699/c-why-does-c-need-the-memory-address-of-a-char-in-order-to-convert-it-to-an-int/30087972#30087972", "title": "C: Why does C need the memory address of a char in order to convert it to an int?", "body": "<p>For Q5, as you say you come from Python, the <code>id</code> in implemented in C Python as the address of the variable. And even in Python, the id of a numeric variable is <strong>not</strong> the value of the variable.</p>\n"}], "owner": {"reputation": 9809, "user_id": 1389110, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/80dbf8bedd0a04f4c971558bfd39ed04?s=128&d=identicon&r=PG", "display_name": "Pyderman", "link": "https://stackoverflow.com/users/1389110/pyderman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 911, "favorite_count": 0, "closed_date": 1430948468, "answer_count": 5, "score": -1, "last_activity_date": 1430948299, "creation_date": 1430947045, "last_edit_date": 1495542595, "question_id": 30087699, "link": "https://stackoverflow.com/questions/30087699/c-why-does-c-need-the-memory-address-of-a-char-in-order-to-convert-it-to-an-int", "closed_reason": "Needs more focus", "title": "C: Why does C need the memory address of a char in order to convert it to an int?", "body": "<p>Coming from Python, where I would simply use type() to find out the type of an object, C, lacking introspection, is forcing me to better grasp its data types, their relatedness, and pointers, before moving on to more advanced topics. <strong>This is a good thing</strong>. So I have the following piece of code, which I will tweak in various ways and try understand the resulting behavior:</p>\n\n<pre><code>int main(int argc, char *argv[])\n{\n    int i = 0;\n    for(i = 0; argv[1][i] != '\\0'; i++) {\n         printf(\"%d\\n\", argv[1][i]);\n         char letter = argv[1][i];\n\n    switch(letter) {\n        case 2:\n            printf(\"%d: 2\\n\", i);\n            break;\n</code></pre>\n\n<p>If I run this and pass the number 2 as a single argument, nothing happens. My understanding then is that because I have defined argv<a href=\"https://stackoverflow.com/a/439589/1389110\" title=\"here\">1</a>[i] as a <em>char</em>, comparing it to 2 (an int) will return false, hence the code does not get called. And indeed, if I change the case from 2 to '2', the code does get called. Makes sense, but it leads me to my first question:</p>\n\n<p><strong>Q1.</strong> I have read in various places that to C, a character and an integer are essentially the same thing. <strong>So why doesn't C \"know\" that the 2 passed as an argument should be interpreted as an integer and not a string?</strong> After all, C allows me to, for example, use the %d string formatter for characters.</p>\n\n<p>If I then change the type of variable <em>letter</em> from a char to an int:</p>\n\n<pre><code>int letter = argv[1][i];\n</code></pre>\n\n<p>... I still get the same behavior as in the first variant (i.e. nothing happens), even though now I am apparently comparing an int to and int in the case statement. This leads me to surmise that although I am defining <em>letter</em> now as an int, C is still reading it in as a char on the command line, and just calling it an int isn't enough to change it's type from the point of view of subsequent program flow.</p>\n\n<p><strong>Q2. Is the above reasoning correct?</strong></p>\n\n<p>So now I figure that if I change the type of letter to an int using atoi(), things should go OK. So:</p>\n\n<pre><code>int letter = atoi(argv[1][i]);\n</code></pre>\n\n<p>When I now try compile, I get:</p>\n\n<pre><code>Switch.c:14:27: warning: incompatible integer to pointer conversion passing\n      'char' to parameter of type 'const char *'; take the address with &amp;\n      [-Wint-conversion]\n        int letter = atoi(argv[1][i]);\n                          ^~~~~~~~~~\n                          &amp;\n/usr/include/stdlib.h:132:23: note: passing argument to parameter here\nint      atoi(const char *);\n</code></pre>\n\n<p>I then look up the documentation for atoi() and see that it can only be used to converted a string (a more precisely, a const char *), not a character. I would have though that since a char * is just a sequence of chars, that atoi() would work with both. And apparently there is no equivalent of atoi() for a char, rather only workarounds, such as the one described <a href=\"https://stackoverflow.com/a/439589/1389110\" title=\"here\">here</a>.</p>\n\n<p>Anyway, I decide the take the warning's instructions, and place an ampersand before the value (knowing that this implies a memory address, but not yet knowing why it is being suggested). So:</p>\n\n<pre><code>int letter = atoi(&amp;argv[1][i]);\n</code></pre>\n\n<p>When I do so, it compiles. And now the program in this final form - with letter defined as an int, with the case statement comparing to an int, and with atoi being passed the address rather than value of <code>argv[1][i]</code> - runs successfully.</p>\n\n<p>But I don't know why, so I strip this down to test the values of <code>argv[1][i]</code> and <code>&amp;argv[1][i]</code> by printing them. I observe that the program will only compile if I use the %s string formatter to print <code>&amp;argv[1][i]</code>, as it tells me that <code>&amp;argv[1][i]</code> is a char *.</p>\n\n<p><strong>Q3. Why is <code>&amp;argv[1][i]</code>, an address in memory, a char *?</strong></p>\n\n<p>In my printout, I observe that the values of <code>&amp;argv[1][i]</code> and <code>argv[1][i]</code> are the same, namely: 2. So:</p>\n\n<p><strong>Q4. Why didn't the compiler allow me to use <code>argv[1][i]</code>, if its value is no different to that of <code>&amp;argv[1][i]</code>?</strong></p>\n\n<p><strong>Q5. Any time I've printed a memory address in a C program, it has always been some long number such as 1246377222. Why is the memory address == the value in this case?</strong></p>\n\n<p>No doubt there will be someone objecting that this mammoth post should be split into separate posts with separate questions, but I think the flow of trial-and-error, and the answers you provide, will help not only me but others looking to understand these aspects of C. Also feel free to suggest a better title for the post.</p>\n\n<p>Many thanks.</p>\n"}, {"tags": ["c", "winapi", "gdi"], "answers": [{"tags": [], "owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "is_accepted": false, "score": 0, "last_activity_date": 1432162491, "creation_date": 1432162491, "answer_id": 30361742, "question_id": 30087540, "link": "https://stackoverflow.com/questions/30087540/why-are-my-programss-tab-controls-rendering-their-background-in-a-blocky-way-b/30361742#30361742", "title": "Why are my programs&#39;s tab controls rendering their background in a blocky way, but the standard Window dialogs are not?", "body": "<p>Okay I think I've <em>mostly</em> figured it out.</p>\n\n<p>The problem is there are two different theme parts at play here, <code>TABP_PANE</code> and <code>TABP_BODY</code>. <code>TABP_PANE</code> is the background the tab control itself draws, and <code>TABP_BODY</code> is what I <strong>assume</strong> is the actual tab background.</p>\n\n<p>Compare:</p>\n\n<p><img src=\"https://i.imgur.com/PJ3vL86.png\" alt=\"The two theme parts, normally\"></p>\n\n<p><img src=\"https://i.imgur.com/l6Ho5uH.png\" alt=\"The two theme parts, color flipped\"></p>\n\n<p>I'm guessing what Microsoft expected you to do, and what I guess the property sheet control does, is have each tab page be a <code>WC_DIALOG</code> dialog box and that you call the <code>EnableThemeDialogTexture()</code> function to have the <code>TABP_BODY</code> texture drawn on top.</p>\n\n<p>But if you look closely at the screenshot of the Explorer property sheet in the original question, our <code>TABP_BODY</code> is still not quite the same. So that leaves two questions:</p>\n\n<ol>\n<li><p>How is <code>TABP_BODY</code> drawn on top of <code>TABP_PANE</code>? Is it merely drawn on top? Is it blended somehow?</p></li>\n<li><p>How is the theme dialog texture drawn? Is it tiled with a minimum width <code>TABP_BODY</code>? That's what it looks like to me, anyway...</p></li>\n</ol>\n\n<p>So this is a partial answer, at least. I'm willing to investigate further, though I'm not sure when.</p>\n\n<hr>\n\n<p>Source of pictured program:</p>\n\n<pre><code>// 20 may 2015\n// based on wintabprintclient.c 18 may 2015\n// based on wintabparentwinebug.c 3 may 2015\n#define UNICODE\n#define _UNICODE\n#define STRICT\n#define STRICT_TYPED_ITEMIDS\n#define CINTERFACE\n// get Windows version right; right now Windows XP\n#define WINVER 0x0501\n#define _WIN32_WINNT 0x0501\n#define _WIN32_WINDOWS 0x0501       /* according to Microsoft's winperf.h */\n#define _WIN32_IE 0x0600            /* according to Microsoft's sdkddkver.h */\n#define NTDDI_VERSION 0x05010000    /* according to Microsoft's sdkddkver.h */\n#include &lt;windows.h&gt;\n#include &lt;commctrl.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;uxtheme.h&gt;\n#include &lt;string.h&gt;\n#include &lt;wchar.h&gt;\n#include &lt;windowsx.h&gt;\n#include &lt;vsstyle.h&gt;\n#include &lt;vssym32.h&gt;\n#include &lt;stdarg.h&gt;\n#include &lt;oleacc.h&gt;\n#include &lt;stdio.h&gt;\n\nvoid die(char *s)\n{\n    // TODO\n}\n\nHWND mainwin;\n\n#define BGCOLOR RGB(0x0A, 0x24, 0x6A)\n#define PCOLOR RGB(0x6A, 0x24, 0x0A)\n\nLRESULT CALLBACK wndProc(HWND hwnd, UINT uMsg, WPARAM wParam, LPARAM lParam)\n{\n    NMHDR *nm = (NMHDR *) lParam;\n    PAINTSTRUCT ps;\n    HDC dc;\n    POINT pt;\n    RECT r;\n    HTHEME theme;\n\n    switch (uMsg) {\n    case WM_CLOSE:\n        PostQuitMessage(0);\n        return 0;\n    case WM_PAINT:\n        dc = BeginPaint(hwnd, &amp;ps);\n#define X 20\n#define Y 20\n#define X2 240\n#define YT 40\n#define WIDTH 200\n#define HEIGHT 440\n        theme = OpenThemeData(hwnd, L\"tab\");\n        r.left = X;\n        r.top = Y;\n        r.right = r.left + WIDTH;\n        r.bottom = YT - 5;\n        DrawTextW(dc, L\"TABP_PANE\", -1, &amp;r, DT_LEFT | DT_TOP);\n        r.left = X;\n        r.top = YT;\n        r.right = r.left + WIDTH;\n        r.bottom = r.top + HEIGHT;\n        DrawThemeBackground(theme, dc,\n            TABP_PANE, 0,\n            &amp;r, NULL);\n        r.left = X2;\n        r.top = Y;\n        r.right = r.left + WIDTH;\n        r.bottom = YT - 5;\n        DrawTextW(dc, L\"TABP_BODY\", -1, &amp;r, DT_LEFT | DT_TOP);\n        r.left = X2;\n        r.top = YT;\n        r.right = r.left + WIDTH;\n        r.bottom = r.top + HEIGHT;\n        DrawThemeBackground(theme, dc,\n            TABP_BODY, 0,\n            &amp;r, NULL);\n        CloseThemeData(theme);\n        EndPaint(hwnd, &amp;ps);\n        return 0;\n    }\n    return DefWindowProcW(hwnd, uMsg, wParam, lParam);\n}\n\nstatic void makeWindows(void)\n{\n    mainwin = CreateWindowExW(0,\n        L\"mainwin\", L\"Full Window\",\n        WS_OVERLAPPEDWINDOW,\n        CW_USEDEFAULT, CW_USEDEFAULT,\n        500, 500,\n        NULL, NULL, GetModuleHandle(NULL), NULL);\n}\n\nint main(int argc, char *argv[])\n{\n    WNDCLASSW wc;\n    MSG msg;\n    HBRUSH b;\n\n    ZeroMemory(&amp;wc, sizeof (WNDCLASSW));\n    wc.lpszClassName = L\"mainwin\";\n    wc.lpfnWndProc = wndProc;\n    wc.hInstance = GetModuleHandle(NULL);\n    wc.hIcon = LoadIconW(NULL, IDI_APPLICATION);\n    wc.hCursor = LoadCursorW(NULL, IDC_ARROW);\n    // if printing client doesn't print the tab background, this color will bleed through instead\n    b = CreateSolidBrush(BGCOLOR);\n    wc.hbrBackground = b;\n    RegisterClassW(&amp;wc);\n\n    makeWindows();\n\n    ShowWindow(mainwin, SW_SHOWDEFAULT);\n    UpdateWindow(mainwin);\n\n    while (GetMessageW(&amp;msg, NULL, 0, 0) &gt; 0) {\n        TranslateMessage(&amp;msg);\n        DispatchMessage(&amp;msg);\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 459, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1432162491, "creation_date": 1430946503, "last_edit_date": 1492086159, "question_id": 30087540, "link": "https://stackoverflow.com/questions/30087540/why-are-my-programss-tab-controls-rendering-their-background-in-a-blocky-way-b", "title": "Why are my programs&#39;s tab controls rendering their background in a blocky way, but the standard Window dialogs are not?", "body": "<p><strong>tl;dr for those who read the old question: new circumstances have caused me to look a little deeper and I've found that this affects bare Tab controls on their own; I've adjusted the question to compensate. If I should remove the old question text entirely, please let me know.</strong></p>\n\n<p>Here is a screenshot from a program I'm working on to test a wrapper library I'm also working on:</p>\n\n<p><img src=\"https://i.imgur.com/UJcvJxH.png\" alt=\"Image\"></p>\n\n<p>If you look closely, the window on the right appears blocky, while the window on the left (the standard Windows Explorer file properties property sheet) looks smooth. At first I thought this was just <a href=\"https://askubuntu.com/questions/587069/my-computer-with-amd-graphics-shows-gradients-with-consecutive-rows-of-colors-as\">my video card</a>, but other people see it too, even going so far as to adjust the image colors to demonstrate the blockiness:</p>\n\n<p><img src=\"https://i.imgur.com/FXI4TGU.png\" alt=\"Image edited to show blockiness\"></p>\n\n<p>Recent bugs have led me to produce another program to test tab controls on their own. In the following screenshot, the picture on the left is a real tab control, and the picture on the right is the tab control rendered with <code>WM_PRINTCLIENT</code> (the red is from where the tab control called my own <code>WM_PRINTCLIENT</code>):</p>\n\n<p><img src=\"https://i.imgur.com/XBSGwaE.png\" alt=\"Test\"></p>\n\n<p>Both of these render blockily:</p>\n\n<p><img src=\"https://i.imgur.com/PpGdZdC.png\" alt=\"Test blockiness\"></p>\n\n<p>Why is the tab control in my own software behaving like this but not Windows's own tabs?</p>\n\n<p>This is Windows XP because it has the gradient to test. I need to target XP and newer, though I might drop XP soon anyway. I don't want to hide a bug in my code or setup behind a minimum system requirement.</p>\n\n<p>This test program is below. Run it passing <code>comctl6</code> as an argument. Note that in the interest of brevity and being a little program to test things it does no error checking.</p>\n\n<p>Thanks!</p>\n\n<pre><code>// 18 may 2015\n// based on wintabparentwinebug.c 3 may 2015\n#define UNICODE\n#define _UNICODE\n#define STRICT\n#define STRICT_TYPED_ITEMIDS\n#define CINTERFACE\n// get Windows version right; right now Windows XP\n#define WINVER 0x0501\n#define _WIN32_WINNT 0x0501\n#define _WIN32_WINDOWS 0x0501       /* according to Microsoft's winperf.h */\n#define _WIN32_IE 0x0600            /* according to Microsoft's sdkddkver.h */\n#define NTDDI_VERSION 0x05010000    /* according to Microsoft's sdkddkver.h */\n#include &lt;windows.h&gt;\n#include &lt;commctrl.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;uxtheme.h&gt;\n#include &lt;string.h&gt;\n#include &lt;wchar.h&gt;\n#include &lt;windowsx.h&gt;\n#include &lt;vsstyle.h&gt;\n#include &lt;vssym32.h&gt;\n#include &lt;stdarg.h&gt;\n#include &lt;oleacc.h&gt;\n#include &lt;stdio.h&gt;\n\nvoid die(char *s)\n{\n    // TODO\n}\n\nvoid initCommonControls(BOOL);\n\nHWND mainwin;\nHWND tab;\n\n#define BGCOLOR RGB(0x0A, 0x24, 0x6A)\n#define PCOLOR RGB(0x6A, 0x24, 0x0A)\n\nLRESULT CALLBACK wndProc(HWND hwnd, UINT uMsg, WPARAM wParam, LPARAM lParam)\n{\n    NMHDR *nm = (NMHDR *) lParam;\n    PAINTSTRUCT ps;\n    HDC dc;\n    POINT prev;\n    RECT r;\n    HBRUSH b;\n\n    switch (uMsg) {\n    case WM_CLOSE:\n        PostQuitMessage(0);\n        return 0;\n    case WM_PAINT:\n        dc = BeginPaint(hwnd, &amp;ps);\n        SetWindowOrgEx(dc, -240, -20, &amp;prev);\n        SendMessage(tab, WM_PRINTCLIENT, (WPARAM) dc, PRF_CLIENT);\n        SetWindowOrgEx(dc, prev.x, prev.y, NULL);\n        EndPaint(hwnd, &amp;ps);\n{COLORREF r;\nr=GetSysColor(COLOR_ACTIVECAPTION);\nprintf(\"%I32X\\n\", r);}\n        return 0;\n    case WM_PRINTCLIENT:\n        // the tab control sends this to draw the background of the area where the tab buttons are\n        b = CreateSolidBrush(PCOLOR);\n        GetClientRect(hwnd, &amp;r);\n        FillRect((HDC) wParam, &amp;r, b);\n        DeleteObject(b);\n        return 0;\n    }\n    return DefWindowProcW(hwnd, uMsg, wParam, lParam);\n}\n\nstatic void makeWindows(void)\n{\n    mainwin = CreateWindowExW(0,\n        L\"mainwin\", L\"Full Window\",\n        WS_OVERLAPPEDWINDOW,\n        CW_USEDEFAULT, CW_USEDEFAULT,\n        500, 500,\n        NULL, NULL, GetModuleHandle(NULL), NULL);\n\n    // create the tab as a child of the empty window...\n    tab = CreateWindowExW(0,\n        WC_TABCONTROLW, L\"\",\n        TCS_TOOLTIPS | WS_TABSTOP | WS_CHILD | WS_VISIBLE,\n        20, 20, 200, 440,\n        mainwin, (HMENU) 100, GetModuleHandle(NULL), NULL);\n}\n\nvoid addTab(WCHAR *name)\n{\n    TCITEMW item;\n    LRESULT n;\n\n    n = SendMessageW(tab, TCM_GETITEMCOUNT, 0, 0);\n    ZeroMemory(&amp;item, sizeof (TCITEMW));\n    item.mask = TCIF_TEXT;\n    item.pszText = name;\n    SendMessageW(tab, TCM_INSERTITEM, (WPARAM) n, (LPARAM) (&amp;item));\n}\n\nint main(int argc, char *argv[])\n{\n    WNDCLASSW wc;\n    MSG msg;\n    HBRUSH b;\n\n    initCommonControls(argc &gt; 1 &amp;&amp; strcmp(argv[1], \"comctl6\") == 0);\n\n    ZeroMemory(&amp;wc, sizeof (WNDCLASSW));\n    wc.lpszClassName = L\"mainwin\";\n    wc.lpfnWndProc = wndProc;\n    wc.hInstance = GetModuleHandle(NULL);\n    wc.hIcon = LoadIconW(NULL, IDI_APPLICATION);\n    wc.hCursor = LoadCursorW(NULL, IDC_ARROW);\n    // if printing client doesn't print the tab background, this color will bleed through instead\n    b = CreateSolidBrush(BGCOLOR);\n    wc.hbrBackground = b;\n    RegisterClassW(&amp;wc);\n\n    makeWindows();\n    addTab(L\"Page 1\");\n    addTab(L\"Page 2\");\n\n    ShowWindow(mainwin, SW_SHOWDEFAULT);\n    UpdateWindow(mainwin);\n\n    while (GetMessageW(&amp;msg, NULL, 0, 0) &gt; 0) {\n        TranslateMessage(&amp;msg);\n        DispatchMessage(&amp;msg);\n    }\n    return 0;\n}\n\nstatic const char manifest[] = \"&lt;?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"yes\\\"?&gt;\\n&lt;assembly xmlns=\\\"urn:schemas-microsoft-com:asm.v1\\\" manifestVersion=\\\"1.0\\\"&gt;\\n&lt;assemblyIdentity\\n    version=\\\"1.0.0.0\\\"\\n    processorArchitecture=\\\"*\\\"\\n    name=\\\"CompanyName.ProductName.YourApplication\\\"\\n    type=\\\"win32\\\"\\n/&gt;\\n&lt;description&gt;Your application description here.&lt;/description&gt;\\n&lt;dependency&gt;\\n    &lt;dependentAssembly&gt;\\n        &lt;assemblyIdentity\\n            type=\\\"win32\\\"\\n            name=\\\"Microsoft.Windows.Common-Controls\\\"\\n            version=\\\"6.0.0.0\\\"\\n            processorArchitecture=\\\"*\\\"\\n            publicKeyToken=\\\"6595b64144ccf1df\\\"\\n            language=\\\"*\\\"\\n        /&gt;\\n    &lt;/dependentAssembly&gt;\\n&lt;/dependency&gt;\\n&lt;/assembly&gt;\\n\";\n\nstatic ULONG_PTR comctlManifestCookie;\nstatic HMODULE comctl32;\n\nvoid initCommonControls(BOOL comctl6)\n{\n    WCHAR temppath[MAX_PATH + 1];\n    WCHAR filename[MAX_PATH + 1];\n    HANDLE file;\n    DWORD nExpected, nGot;\n    ACTCTX actctx;\n    HANDLE ac;\n    INITCOMMONCONTROLSEX icc;\n    FARPROC f;\n    // this is listed as WINAPI in both Microsoft's and MinGW's headers, but not on MSDN for some reason\n    BOOL (*WINAPI ficc)(const LPINITCOMMONCONTROLSEX);\n\n    if (comctl6) {\n        if (GetTempPathW(MAX_PATH + 1, temppath) == 0)\n            die(\"getting temporary path for writing manifest file\");\n        if (GetTempFileNameW(temppath, L\"manifest\", 0, filename) == 0)\n            die(\"getting temporary filename for writing manifest file\");\n        file = CreateFileW(filename, GENERIC_WRITE,\n            0,          // don't share while writing\n            NULL, CREATE_ALWAYS, FILE_ATTRIBUTE_NORMAL, NULL);\n        if (file == NULL)\n            die(\"creating manifest file\");\n        nExpected = (sizeof manifest / sizeof manifest[0]) - 1;     // - 1 to omit the terminating null character)\n        if (WriteFile(file, manifest, nExpected, &amp;nGot, NULL) == 0)\n            die(\"writing manifest file\");\n        if (nGot != nExpected)\n            die(\"short write to manifest file\");\n        if (CloseHandle(file) == 0)\n            die(\"closing manifest file (this IS an error here because not doing so will prevent Windows from being able to use the manifest file in an activation context)\");\n\n        ZeroMemory(&amp;actctx, sizeof (ACTCTX));\n        actctx.cbSize = sizeof (ACTCTX);\n        actctx.dwFlags = ACTCTX_FLAG_SET_PROCESS_DEFAULT;\n        actctx.lpSource = filename;\n        ac = CreateActCtx(&amp;actctx);\n        if (ac == INVALID_HANDLE_VALUE)\n            die(\"creating activation context for synthesized manifest file\");\n        if (ActivateActCtx(ac, &amp;comctlManifestCookie) == FALSE)\n            die(\"activating activation context for synthesized manifest file\");\n    }\n\n    ZeroMemory(&amp;icc, sizeof (INITCOMMONCONTROLSEX));\n    icc.dwSize = sizeof (INITCOMMONCONTROLSEX);\n    icc.dwICC = ICC_TAB_CLASSES;\n\n    comctl32 = LoadLibraryW(L\"comctl32.dll\");\n    if (comctl32 == NULL)\n        die(\"loading comctl32.dll\");\n    f = GetProcAddress(comctl32, \"InitCommonControlsEx\");\n    if (f == NULL)\n        die(\"loading InitCommonControlsEx()\");\n    ficc = (BOOL (*WINAPI)(const LPINITCOMMONCONTROLSEX)) f;\n    if ((*ficc)(&amp;icc) == FALSE)\n        die(\"initializing Common Controls (comctl32.dll)\");\n}\n</code></pre>\n\n<hr>\n\n<h2>Original question:</h2>\n\n<p>Title: Why are CreateCompatibleDC(), CreateCompatibleBitmap(), and WM_PRINTCLIENT rendering the parent tab control background in a blocky way?</p>\n\n<p>My container window clss draws, in its <code>WM_PAINT</code>, whatever <code>WM_PRINTCLIENT</code> draws for its parent (that isn't itself a container). So for instance, if its background is a themed tab control, it will draw the themed tab control background as its painted content. The window on the right in the following image is an example:</p>\n\n<p><img src=\"https://i.imgur.com/UJcvJxH.png\" alt=\"Image\"></p>\n\n<p>If you look closely, the window on the right appears blocky, while the window on the left (the standard Windows Explorer file properties property sheet) looks smooth. At first I thought this was just <a href=\"https://askubuntu.com/questions/587069/my-computer-with-amd-graphics-shows-gradients-with-consecutive-rows-of-colors-as\">my video card</a>, but other people see it too, even going so far as to adjust the image colors to demonstrate the blockiness:</p>\n\n<p><img src=\"https://i.imgur.com/FXI4TGU.png\" alt=\"Image edited to show blockiness\"></p>\n\n<p>The essence of the code that paints is simple:</p>\n\n<pre><code>// not actual code, just algorithm to demonstrate what I'm *thinking* is supposed to happen\ndc = BeginPaint(hwnd, &amp;ps);\nparent = GetAncestor(hwnd, GA_PARENT);\nGetClientRect(parent, &amp;r);\ncdc = CreateCompatibleDC(dc);\nbitmap = CreateCompatibleBitmap(dc, r.right - r.left, r.bottom - r.top);\nSelectObject(cdc, pd-&gt;bitmap);\nSendMessageW(parent, WM_PRINTCLIENT, (WPARAM) cdc, PRF_CLIENT);\nupdateRect = ps.rcPaint;\nparentRect = updateRect;\nMapWindowRect(hwnd, parent, &amp;parentRect);\nBitBlt(dc, updateRect.left, updateRect.top, updateRect.right - updateRect.left, updateRect.bottom - updateRect.top,\n    cdc, parentRect.left, parentRect.top,\n    SRCCOPY);\n</code></pre>\n\n<p>I don't see anything here that would affect the quality of the painted image, unless there's something about compatible bitmaps that I'm missing? Can anyone else explain? I really don't know what to do about this, other than reimplement the drawing for every possible parent of a container and hope that helps.</p>\n\n<p>Thanks.</p>\n\n<p>Here is the full code for the container:</p>\n\n<pre><code>// 26 april 2015\n#include \"uipriv_windows.h\"\n\n#define containerClass L\"libui_uiContainerClass\"\n\nHWND initialParent;\n\nstruct container {\n    HWND hwnd;\n    uiContainer *parent;\n    int hidden;\n    HBRUSH brush;\n};\n\nstatic HWND realParent(HWND hwnd)\n{\n    HWND parent;\n    int class;\n\n    parent = hwnd;\n    for (;;) {\n        parent = GetAncestor(parent, GA_PARENT);\n        // skip groupboxes; they're (supposed to be) transparent\n        // skip uiContainers; they don't draw anything\n        class = windowClassOf(parent, L\"button\", containerClass, NULL);\n        if (class != 0 &amp;&amp; class != 1)\n            break;\n    }\n    return parent;\n}\n\nstruct parentDraw {\n    HDC cdc;\n    HBITMAP bitmap;\n    HBITMAP prevbitmap;\n};\n\nstatic void parentDraw(HDC dc, HWND parent, struct parentDraw *pd)\n{\n    RECT r;\n\n    if (GetClientRect(parent, &amp;r) == 0)\n        logLastError(\"error getting parent's client rect in parentDraw()\");\n    pd-&gt;cdc = CreateCompatibleDC(dc);\n    if (pd-&gt;cdc == NULL)\n        logLastError(\"error creating compatible DC in parentDraw()\");\n    pd-&gt;bitmap = CreateCompatibleBitmap(dc, r.right - r.left, r.bottom - r.top);\n    if (pd-&gt;bitmap == NULL)\n        logLastError(\"error creating compatible bitmap in parentDraw()\");\n    pd-&gt;prevbitmap = SelectObject(pd-&gt;cdc, pd-&gt;bitmap);\n    if (pd-&gt;prevbitmap == NULL)\n        logLastError(\"error selecting bitmap into compatible DC in parentDraw()\");\n    SendMessageW(parent, WM_PRINTCLIENT, (WPARAM) (pd-&gt;cdc), PRF_CLIENT);\n}\n\nstatic void endParentDraw(struct parentDraw *pd)\n{\n    if (SelectObject(pd-&gt;cdc, pd-&gt;prevbitmap) != pd-&gt;bitmap)\n        logLastError(\"error selecting previous bitmap back into compatible DC in endParentDraw()\");\n    if (DeleteObject(pd-&gt;bitmap) == 0)\n        logLastError(\"error deleting compatible bitmap in endParentDraw()\");\n    if (DeleteDC(pd-&gt;cdc) == 0)\n        logLastError(\"error deleting compatible DC in endParentDraw()\");\n}\n\n// see http://www.codeproject.com/Articles/5978/Correctly-drawn-themed-dialogs-in-WinXP\nstatic HBRUSH getControlBackgroundBrush(HWND hwnd, HDC dc)\n{\n    HWND parent;\n    RECT hwndScreenRect;\n    struct parentDraw pd;\n    HBRUSH brush;\n\n    parent = realParent(hwnd);\n\n    parentDraw(dc, parent, &amp;pd);\n    brush = CreatePatternBrush(pd.bitmap);\n    if (brush == NULL)\n        logLastError(\"error creating pattern brush in getControlBackgroundBrush()\");\n    endParentDraw(&amp;pd);\n\n    // now figure out where the control is relative to the parent so we can align the brush properly\n    if (GetWindowRect(hwnd, &amp;hwndScreenRect) == 0)\n        logLastError(\"error getting control window rect in getControlBackgroundBrush()\");\n    // this will be in screen coordinates; convert to parent coordinates\n    mapWindowRect(NULL, parent, &amp;hwndScreenRect);\n    if (SetBrushOrgEx(dc, -hwndScreenRect.left, -hwndScreenRect.top, NULL) == 0)\n        logLastError(\"error setting brush origin in getControlBackgroundBrush()\");\n\n    return brush;\n}\n\nstatic void paintContainerBackground(HWND hwnd, HDC dc, RECT *paintRect)\n{\n    HWND parent;\n    RECT paintRectParent;\n    struct parentDraw pd;\n\n    parent = realParent(hwnd);\n    parentDraw(dc, parent, &amp;pd);\n\n    paintRectParent = *paintRect;\n    mapWindowRect(hwnd, parent, &amp;paintRectParent);\n    if (BitBlt(dc, paintRect-&gt;left, paintRect-&gt;top, paintRect-&gt;right - paintRect-&gt;left, paintRect-&gt;bottom - paintRect-&gt;top,\n        pd.cdc, paintRectParent.left, paintRectParent.top,\n        SRCCOPY) == 0)\n        logLastError(\"error drawing parent background over uiContainer in paintContainerBackground()\");\n\n    endParentDraw(&amp;pd);\n}\n\n// from https://msdn.microsoft.com/en-us/library/windows/desktop/dn742486.aspx#sizingandspacing and https://msdn.microsoft.com/en-us/library/windows/desktop/bb226818%28v=vs.85%29.aspx\n// this X value is really only for buttons but I don't see a better one :/\n#define winXPadding 4\n#define winYPadding 4\n\n// abort the resize if something fails and we don't have what we need to do a resize\nstatic HRESULT resize(uiContainer *cc, RECT *r)\n{\n    struct container *c = (struct container *) (uiControl(cc)-&gt;Internal);\n    uiSizing d;\n    uiSizingSys sys;\n    HDC dc;\n    HFONT prevfont;\n    TEXTMETRICW tm;\n    SIZE size;\n\n    dc = GetDC(c-&gt;hwnd);\n    if (dc == NULL)\n        return logLastError(\"error getting DC in resize()\");\n    prevfont = (HFONT) SelectObject(dc, hMessageFont);\n    if (prevfont == NULL)\n        return logLastError(\"error loading control font into device context in resize()\");\n\n    ZeroMemory(&amp;tm, sizeof (TEXTMETRICW));\n    if (GetTextMetricsW(dc, &amp;tm) == 0)\n        return logLastError(\"error getting text metrics in resize()\");\n    if (GetTextExtentPoint32W(dc, L\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\", 52, &amp;size) == 0)\n        return logLastError(\"error getting text extent point in resize()\");\n\n    sys.baseX = (int) ((size.cx / 26 + 1) / 2);\n    sys.baseY = (int) tm.tmHeight;\n    sys.internalLeading = tm.tmInternalLeading;\n\n    if (SelectObject(dc, prevfont) != hMessageFont)\n        return logLastError(\"error restoring previous font into device context in resize()\");\n    if (ReleaseDC(c-&gt;hwnd, dc) == 0)\n        return logLastError(\"error releasing DC in resize()\");\n\n    d.xPadding = uiDlgUnitsToX(winXPadding, sys.baseX);\n    d.yPadding = uiDlgUnitsToY(winYPadding, sys.baseY);\n    d.sys = &amp;sys;\n    uiContainerResizeChildren(cc, r-&gt;left, r-&gt;top, r-&gt;right - r-&gt;left, r-&gt;bottom - r-&gt;top, &amp;d);\n    return S_OK;\n}\n\nstatic LRESULT CALLBACK containerWndProc(HWND hwnd, UINT uMsg, WPARAM wParam, LPARAM lParam)\n{\n    uiContainer *cc;\n    struct container *c;\n    CREATESTRUCTW *cs = (CREATESTRUCTW *) lParam;\n    HWND control;\n    NMHDR *nm = (NMHDR *) lParam;\n    WINDOWPOS *wp = (WINDOWPOS *) lParam;\n    RECT r;\n    HDC dc;\n    PAINTSTRUCT ps;\n\n    cc = uiContainer(GetWindowLongPtrW(hwnd, GWLP_USERDATA));\n    if (cc == NULL)\n        if (uMsg == WM_NCCREATE)\n            SetWindowLongPtrW(hwnd, GWLP_USERDATA, (LONG_PTR) (cs-&gt;lpCreateParams));\n        // DO NOT RETURN DEFWINDOWPROC() HERE\n        // see the next block of comments as to why\n        // instead, we simply check if c == NULL again later\n\n    switch (uMsg) {\n    // these must always be run, even on the initial parent\n    // why? http://blogs.msdn.com/b/oldnewthing/archive/2010/03/16/9979112.aspx\n    case WM_COMMAND:\n        // bounce back to the control in question\n        // except if to the initial parent, in which case act as if the message was ignored\n        control = (HWND) lParam;\n        if (control != NULL &amp;&amp; IsChild(initialParent, control) == 0)\n            return SendMessageW(control, msgCOMMAND, wParam, lParam);\n        break;          // fall through to DefWindowProcW()\n    case WM_NOTIFY:\n        // same as WM_COMMAND\n        control = nm-&gt;hwndFrom;\n        if (control != NULL &amp;&amp; IsChild(initialParent, control) == 0)\n            return SendMessageW(control, msgNOTIFY, wParam, lParam);\n        break;\n\n    // these are only run if c is not NULL\n    case WM_CTLCOLORSTATIC:\n    case WM_CTLCOLORBTN:\n        if (cc == NULL)\n            break;\n        c = (struct container *) (uiControl(cc)-&gt;Internal);\n        if (c-&gt;brush != NULL)\n            if (DeleteObject(c-&gt;brush) == 0)\n                logLastError(\"error deleting old background brush in containerWndProc()\");\n/*TODO      // read-only TextFields and Textboxes are exempt\n        // this is because read-only edit controls count under WM_CTLCOLORSTATIC\n        if (windowClassOf((HWND) lParam, L\"edit\", NULL) == 0)\n            if (textfieldReadOnly((HWND) lParam))\n                return DefWindowProcW(hwnd, uMsg, wParam, lParam);\n*/      if (SetBkMode((HDC) wParam, TRANSPARENT) == 0)\n            logLastError(\"error setting transparent background mode to controls in containerWndProc()\");\n        c-&gt;brush = getControlBackgroundBrush((HWND) lParam, (HDC) wParam);\n        return (LRESULT) (c-&gt;brush);\n    case WM_PAINT:\n        if (cc == NULL)\n            break;\n        c = (struct container *) (uiControl(cc)-&gt;Internal);\n        dc = BeginPaint(c-&gt;hwnd, &amp;ps);\n        if (dc == NULL)\n            logLastError(\"error beginning container paint in containerWndProc()\");\n        r = ps.rcPaint;\n        paintContainerBackground(c-&gt;hwnd, dc, &amp;r);\n        EndPaint(c-&gt;hwnd, &amp;ps);\n        return 0;\n    // tab controls use this to draw the background of the tab area\n    case WM_PRINTCLIENT:\n        if (cc == NULL)\n            break;\n        c = (struct container *) (uiControl(cc)-&gt;Internal);\n        if (GetClientRect(c-&gt;hwnd, &amp;r) == 0)\n            logLastError(\"error getting client rect in containerWndProc()\");\n        paintContainerBackground(c-&gt;hwnd, (HDC) wParam, &amp;r);\n        return 0;\n    case WM_ERASEBKGND:\n        // avoid some flicker\n        // we draw the whole update area anyway\n        return 1;\n    case WM_WINDOWPOSCHANGED:\n        if ((wp-&gt;flags &amp; SWP_NOSIZE) != 0)\n            break;\n        // fall through\n    case msgUpdateChild:\n        if (cc == NULL)\n            break;\n        c = (struct container *) (uiControl(cc)-&gt;Internal);\n        if (GetClientRect(c-&gt;hwnd, &amp;r) == 0)\n            logLastError(\"error getting client rect for resize in containerWndProc()\");\n        resize(cc, &amp;r);\n        return 0;\n    }\n\n    return DefWindowProcW(hwnd, uMsg, wParam, lParam);\n}\n\nconst char *initContainer(HICON hDefaultIcon, HCURSOR hDefaultCursor)\n{\n    WNDCLASSW wc;\n\n    ZeroMemory(&amp;wc, sizeof (WNDCLASSW));\n    wc.lpszClassName = containerClass;\n    wc.lpfnWndProc = containerWndProc;\n    wc.hInstance = hInstance;\n    wc.hIcon = hDefaultIcon;\n    wc.hCursor = hDefaultCursor;\n    wc.hbrBackground = (HBRUSH) (COLOR_BTNFACE + 1);\n    if (RegisterClassW(&amp;wc) == 0)\n        return \"registering uiContainer window class\";\n\n    initialParent = CreateWindowExW(0,\n        containerClass, L\"\",\n        WS_OVERLAPPEDWINDOW,\n        0, 0,\n        100, 100,\n        NULL, NULL, hInstance, NULL);\n    if (initialParent == NULL)\n        return \"creating initial parent window\";\n\n    // just to be safe, disable the initial parent so it can't be interacted with accidentally\n    // if this causes issues for our controls, we can remove it\n    EnableWindow(initialParent, FALSE);\n    return NULL;\n}\n\n// subclasses override this and call back here when all children are destroyed\nstatic void containerDestroy(uiControl *cc)\n{\n    struct container *c = (struct container *) (cc-&gt;Internal);\n\n    if (c-&gt;parent != NULL)\n        complain(\"attempt to destroy uiContainer %p while it has a parent\", cc);\n    if (DestroyWindow(c-&gt;hwnd) == 0)\n        logLastError(\"error destroying uiContainer window in containerDestroy()\");\n    uiFree(c);\n}\n\nstatic uintptr_t containerHandle(uiControl *cc)\n{\n    struct container *c = (struct container *) (cc-&gt;Internal);\n\n    return (uintptr_t) (c-&gt;hwnd);\n}\n\nstatic void containerSetParent(uiControl *cc, uiContainer *parent)\n{\n    struct container *c = (struct container *) (cc-&gt;Internal);\n    uiContainer *oldparent;\n    HWND newparent;\n\n    oldparent = c-&gt;parent;\n    c-&gt;parent = parent;\n    newparent = initialParent;\n    if (c-&gt;parent != NULL)\n        newparent = (HWND) uiControlHandle(uiControl(c-&gt;parent));\n    if (SetParent(c-&gt;hwnd, newparent) == 0)\n        logLastError(\"error changing uiContainer parent in containerSetParent()\");\n    if (oldparent != NULL)\n        uiContainerUpdate(oldparent);\n    if (c-&gt;parent != NULL)\n        uiContainerUpdate(c-&gt;parent);\n}\n\nstatic void containerResize(uiControl *cc, intmax_t x, intmax_t y, intmax_t width, intmax_t height, uiSizing *d)\n{\n    struct container *c = (struct container *) (cc-&gt;Internal);\n\n    if (MoveWindow(c-&gt;hwnd, x, y, width, height, TRUE) == 0)\n        logLastError(\"error resizing uiContainer in containerResize()\");\n}\n\nstatic int containerVisible(uiControl *cc)\n{\n    struct container *c = (struct container *) (cc-&gt;Internal);\n\n    return !c-&gt;hidden;\n}\n\nstatic void containerShow(uiControl *cc)\n{\n    struct container *c = (struct container *) (cc-&gt;Internal);\n\n    ShowWindow(c-&gt;hwnd, SW_SHOW);\n    // hidden controls don't count in boxes and grids\n    c-&gt;hidden = 0;\n    if (c-&gt;parent != NULL)\n        uiContainerUpdate(c-&gt;parent);\n}\n\nstatic void containerHide(uiControl *cc)\n{\n    struct container *c = (struct container *) (cc-&gt;Internal);\n\n    ShowWindow(c-&gt;hwnd, SW_HIDE);\n    c-&gt;hidden = 1;\n    if (c-&gt;parent != NULL)\n        uiContainerUpdate(c-&gt;parent);\n}\n\nstatic void containerEnable(uiControl *cc)\n{\n    struct container *c = (struct container *) (cc-&gt;Internal);\n    uiControlSysFuncParams p;\n\n    EnableWindow(c-&gt;hwnd, TRUE);\n    p.Func = uiWindowsSysFuncContainerEnable;\n    uiControlSysFunc(cc, &amp;p);\n}\n\nstatic void containerDisable(uiControl *cc)\n{\n    struct container *c = (struct container *) (cc-&gt;Internal);\n    uiControlSysFuncParams p;\n\n    EnableWindow(c-&gt;hwnd, FALSE);\n    p.Func = uiWindowsSysFuncContainerDisable;\n    uiControlSysFunc(cc, &amp;p);\n}\n\nstatic void containerUpdate(uiContainer *cc)\n{\n    struct container *c = (struct container *) (uiControl(cc)-&gt;Internal);\n\n    SendMessageW(c-&gt;hwnd, msgUpdateChild, 0, 0);\n}\n\nvoid uiMakeContainer(uiContainer *cc)\n{\n    struct container *c;\n\n    c = uiNew(struct container);\n\n    c-&gt;hwnd = CreateWindowExW(WS_EX_CONTROLPARENT,\n        containerClass, L\"\",\n        WS_CHILD | WS_VISIBLE,\n        0, 0,\n        100, 100,\n        initialParent, NULL, hInstance, cc);\n    if (c-&gt;hwnd == NULL)\n        logLastError(\"error creating uiContainer window in uiMakeContainer()\");\n\n    uiControl(cc)-&gt;Internal = c;\n    uiControl(cc)-&gt;Destroy = containerDestroy;\n    uiControl(cc)-&gt;Handle = containerHandle;\n    uiControl(cc)-&gt;SetParent = containerSetParent;\n    // PreferredSize() is provided by subclasses\n    uiControl(cc)-&gt;Resize = containerResize;\n    uiControl(cc)-&gt;Visible = containerVisible;\n    uiControl(cc)-&gt;Show = containerShow;\n    uiControl(cc)-&gt;Hide = containerHide;\n    uiControl(cc)-&gt;Enable = containerEnable;\n    uiControl(cc)-&gt;Disable = containerDisable;\n\n    // ResizeChildren() is provided by subclasses\n    uiContainer(cc)-&gt;Update = containerUpdate;\n}\n</code></pre>\n"}, {"tags": ["c", "standards", "nan", "c99"], "comments": [{"owner": {"reputation": 43188, "user_id": 273767, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/363e49843e26763a496164190940ece4?s=128&d=identicon&r=PG", "display_name": "Cubbi", "link": "https://stackoverflow.com/users/273767/cubbi"}, "edited": false, "score": 0, "creation_date": 1430945517, "post_id": 30087061, "comment_id": 48287852, "body": "The cppreference page you linked has a concrete example"}, {"owner": {"reputation": 7592, "user_id": 2371054, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/gWrKl.jpg?s=128&g=1", "display_name": "mshildt", "link": "https://stackoverflow.com/users/2371054/mshildt"}, "reply_to_user": {"reputation": 43188, "user_id": 273767, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/363e49843e26763a496164190940ece4?s=128&d=identicon&r=PG", "display_name": "Cubbi", "link": "https://stackoverflow.com/users/273767/cubbi"}, "edited": false, "score": 0, "creation_date": 1430945818, "post_id": 30087061, "comment_id": 48288005, "body": "Wow. How did I miss that. Although I&#39;m still not sure what the difference is between the two representations in the example."}], "answers": [{"tags": [], "owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "is_accepted": false, "score": 4, "last_activity_date": 1430945367, "creation_date": 1430945367, "answer_id": 30087264, "question_id": 30087061, "link": "https://stackoverflow.com/questions/30087061/what-is-the-char-sequence-argument-to-nan-generating-functions-for/30087264#30087264", "title": "What is the &quot;char-sequence&quot; argument to NaN generating functions for?", "body": "<blockquote>\n  <p>This doesn't really tell me what I can use for the tagp string or why I'd ever want to use it.</p>\n</blockquote>\n\n<p>Some floating point standards, e.g., IEEE-754, have multiple different NaN values. This <code>nan</code> function specification allows an implementation to select a specific NaN representation depending on the string on a way that might be specified by the implementation.</p>\n"}, {"comments": [{"owner": {"reputation": 97003, "user_id": 142434, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YGcat.jpg?s=128&g=1", "display_name": "Stephen Canon", "link": "https://stackoverflow.com/users/142434/stephen-canon"}, "edited": false, "score": 4, "creation_date": 1430946719, "post_id": 30087348, "comment_id": 48288446, "body": "It&#39;s important to note that no standard specifies how <code>tagp</code> is to be converted into the payload of a NaN.  The standards are deliberately vague on this point to allow implementations freedom to do things like storing a hash of a natural-language explanation of what caused the NaN in the payload.  The vast majority of implementations either just ignore the <code>tagp</code> argument or interpret it as an integer, but you should not assume this to be the case."}], "tags": [], "owner": {"reputation": 616, "user_id": 1762208, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xBdrF.jpg?s=128&g=1", "display_name": "bentank", "link": "https://stackoverflow.com/users/1762208/bentank"}, "is_accepted": true, "score": 8, "last_activity_date": 1430949117, "last_edit_date": 1430949117, "creation_date": 1430945720, "answer_id": 30087348, "question_id": 30087061, "link": "https://stackoverflow.com/questions/30087061/what-is-the-char-sequence-argument-to-nan-generating-functions-for/30087348#30087348", "title": "What is the &quot;char-sequence&quot; argument to NaN generating functions for?", "body": "<p>Tl;Dr : <code>tagp</code> argument gives you the ability to have different NAN values. </p>\n\n<p>This is from man page for nan(3) which gives a little more information on <code>tagp</code>. </p>\n\n<p><strong>Mainly:</strong></p>\n\n<blockquote>\n  <p>The nan() functions return a quiet NaN, whose trailing fraction field\n  contains the result of converting\n       tagp to an unsigned integer.</p>\n</blockquote>\n\n<p>This gives you the ability to have <em>different</em> NAN values.</p>\n\n<p>Specifically from the C99 Rationale <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/C99RationaleV5.10.pdf\" rel=\"nofollow\">doc</a>:</p>\n\n<blockquote>\n  <p>Other applications of NaNs may prove useful. Available parts of NaNs\n  have been used to encode auxiliary information, for example about the\n  NaN\u2019s origin. Signaling NaNs might be candidates for filling\n  uninitialized storage; and their available parts could distinguish\n  uninitialized floating objects. IEC 60559 signaling NaNs and trap\n  handlers potentially provide hooks for maintaining diagnostic\n  information or for implementing special arithmetics.</p>\n</blockquote>\n\n<p>There is an implementation of it <a href=\"http://ftp.netbsd.org/pub/NetBSD/NetBSD-current/src/lib/libm/src/s_nan.c\" rel=\"nofollow\">here</a>. Mind you, this may or may not be standard conforming, as noted in comments. However, it should give you an idea of what <code>tagp</code> is used for.</p>\n\n<p>As in the man page, you can see the replacement mentioned above:</p>\n\n<pre><code>nan(\"1\") = nan (7ff8000000000001)\nnan(\"2\") = nan (7ff8000000000002)\n</code></pre>\n\n<p><strong>Full man page here:</strong></p>\n\n<blockquote>\n  <p>NAN(3)                   BSD Library Functions Manual<br>\n  NAN(3)</p>\n  \n  <p>NAME\n       nan -- generate a quiet NaN</p>\n  \n  <p>SYNOPSIS\n       #include </p>\n\n<pre><code> double\n nan(const char *tagp);\n\n long double\n nanl(const char *tagp);\n\n float\n nanf(const char *tagp);\n</code></pre>\n  \n  <p>DESCRIPTION\n       The nan() functions return a quiet NaN, whose trailing fraction field contains the result of converting\n       tagp to an unsigned integer.  If tagp is too large to be contained in the trailing fraction field of the\n       NaN, then the least significant bits of the integer represented by tagp are used.</p>\n  \n  <p>SPECIAL VALUES\n       If tagp contains any non-numeric characters, the function returns a NaN whos trailing fraction field is\n       zero.</p>\n  \n  <p>If tagp is empty, the function returns a NaN whos trailing fraction field is zero.</p>\n  \n  <p>STANDARDS\n       The nan() functions conform to ISO/IEC 9899:2011.</p>\n  \n  <p>BSD                              July 01, 2008                        </p>\n</blockquote>\n"}], "owner": {"reputation": 7592, "user_id": 2371054, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/gWrKl.jpg?s=128&g=1", "display_name": "mshildt", "link": "https://stackoverflow.com/users/2371054/mshildt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 622, "favorite_count": 0, "accepted_answer_id": 30087348, "answer_count": 2, "score": 9, "last_activity_date": 1430949117, "creation_date": 1430944652, "question_id": 30087061, "link": "https://stackoverflow.com/questions/30087061/what-is-the-char-sequence-argument-to-nan-generating-functions-for", "title": "What is the &quot;char-sequence&quot; argument to NaN generating functions for?", "body": "<p>Aside from the NAN macro, C99 has two ways to generate a NaN value for a floating point number, the <code>nanf(const char *tagp)</code> function and <code>strtof(\"NAN(char-sequence)\")</code>.</p>\n\n<p>Both of these methods of generating a NaN take an optional string argument (*tagp in <code>nanf()</code> and the char-sequence in the strtof method). What exactly does this string argument do? I haven't been able to find any concrete examples of how you'd use it. From <a href=\"http://en.cppreference.com/w/c/numeric/math/nan\">cppreference.com</a> we have:</p>\n\n<blockquote>\n  <p>The call nan(\"string\") is equivalent to the call strtod(\"NAN(string)\", (char**)NULL);</p>\n  \n  <p>The call nan(\"\") is equivalent to the call strtod(\"NAN()\", (char**)NULL);</p>\n  \n  <p>The call nan(NULL) is equivalent to the call strtod(\"NAN\", (char**)NULL);</p>\n</blockquote>\n\n<p>And <a href=\"http://linux.die.net/man/3/nan\">nan(3)</a>  says:</p>\n\n<blockquote>\n  <p>These  functions  return  a representation (determined by tagp) of a quiet NaN. [snip]\n  The argument tagp is used in an unspecified manner.  On IEEE 754 systems, there are many representations  of  NaN,  and\n         tagp selects one.</p>\n</blockquote>\n\n<p>This doesn't really tell me what I can use for the tagp string or why I'd ever want to use it. Is there a list anywhere of the valid options for this tag string, and what would the reason be to use one over the default <code>nanf(NULL)</code>?</p>\n"}, {"tags": ["c", "eclipse", "object-files"], "comments": [{"owner": {"reputation": 3540, "user_id": 4182275, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sF9cb.png?s=128&g=1", "display_name": "NikolayK", "link": "https://stackoverflow.com/users/4182275/nikolayk"}, "edited": false, "score": 0, "creation_date": 1430944239, "post_id": 30086902, "comment_id": 48287131, "body": "You will also need header file with functions/classes declarations."}, {"owner": {"reputation": 121, "user_id": 4652335, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/410778c11ebf86df069bab445a37997a?s=128&d=identicon&r=PG&f=1", "display_name": "AlldaRage", "link": "https://stackoverflow.com/users/4652335/alldarage"}, "reply_to_user": {"reputation": 3540, "user_id": 4182275, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sF9cb.png?s=128&g=1", "display_name": "NikolayK", "link": "https://stackoverflow.com/users/4182275/nikolayk"}, "edited": false, "score": 0, "creation_date": 1430945098, "post_id": 30086902, "comment_id": 48287618, "body": "Thanks, I&#39;ll ask the professor for those later. Do I just drag and drop the object files into the same source folder as my program?"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1521837933, "post_id": 30086902, "comment_id": 85919060, "body": "Also see <a href=\"https://stackoverflow.com/q/11810701/608639\">Link object file to my project Eclipse CDR</a>, <a href=\"https://stackoverflow.com/q/30086902/608639\">Is it possible to import/run object files in eclipse?</a>, <a href=\"https://stackoverflow.com/q/23396199/608639\">How to link object (.o) file in Eclipse</a>, <a href=\"https://stackoverflow.com/q/45338665/608639\">Include object file or assembler file in C Project?</a>, <a href=\"https://stackoverflow.com/q/25866628/608639\">Adding object file to cpp code in eclipse</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3540, "user_id": 4182275, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sF9cb.png?s=128&g=1", "display_name": "NikolayK", "link": "https://stackoverflow.com/users/4182275/nikolayk"}, "is_accepted": true, "score": 2, "last_activity_date": 1430950510, "last_edit_date": 1430950510, "creation_date": 1430949441, "answer_id": 30088342, "question_id": 30086902, "link": "https://stackoverflow.com/questions/30086902/is-it-possible-to-import-run-object-files-in-eclipse/30088342#30088342", "title": "Is it possible to import/run object files in eclipse?", "body": "<p>Let's say you have object file <code>print_hello.a</code> and a header <code>print_hello.h</code>. To be more precise let's create <code>print_hello.a</code>:</p>\n\n<p><strong><code>print_hello.h</code></strong></p>\n\n<pre><code>#ifndef __PRINT_HELLO_\n#define __PRINT_HELLO_\n\nvoid print_hello();\n\n#endif /* __PRINT_HELLO__ */\n</code></pre>\n\n<p><strong><code>print_hello.c</code></strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"print_hello.h\"\n\nvoid print_hello() {\n    printf(\"Hello!\\n\");\n}\n</code></pre>\n\n<p>Compile it with</p>\n\n<pre><code>$ gcc -c print_hello.c -o print_hello.a\n</code></pre>\n\n<p>Now we need to add this to Eclipse. Create a project let's call it <code>example</code>. Create a <code>example.c</code> in which you will call <code>print_hello</code></p>\n\n<pre><code>#include \"print_hello.h\"\n\nint main() {\n    print_hello();\n}\n</code></pre>\n\n<p>Now we need to link it to the <code>print_hello.a</code>. Right-click on project and choose <code>Properties</code>. Go to the <code>C/C++ Build -&gt; Settings -&gt; GCC C Linker -&gt; Miscellaneous</code>. In the <code>Other objects</code> click on add button and choose the path to the <code>print_hello.a</code>. Also add path to <code>.h</code> file in <code>GCC C Compiler -&gt; Includes</code>. Build and run you project, it should output</p>\n\n<pre><code>Hello!\n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 4652335, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/410778c11ebf86df069bab445a37997a?s=128&d=identicon&r=PG&f=1", "display_name": "AlldaRage", "link": "https://stackoverflow.com/users/4652335/alldarage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 844, "favorite_count": 0, "accepted_answer_id": 30088342, "answer_count": 1, "score": 0, "last_activity_date": 1521837754, "creation_date": 1430944117, "last_edit_date": 1521837754, "question_id": 30086902, "link": "https://stackoverflow.com/questions/30086902/is-it-possible-to-import-run-object-files-in-eclipse", "title": "Is it possible to import/run object files in eclipse?", "body": "<p>Our professor made available object files of a previous assignment that I wasn't able to complete. This previous assignment is required for completing/testing the current assignment. Would it be possible somehow for me to import them into eclipse or somehow make my project work with those object files?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1430944413, "post_id": 30086890, "comment_id": 48287237, "body": "This line <code>while( argv[i] != NULL)</code> is using an uninitialised <code>i</code>."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 1, "creation_date": 1430944438, "post_id": 30086890, "comment_id": 48287249, "body": "This does not compile.  Can you provide what is necessary for a compilable example?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1430944534, "post_id": 30086890, "comment_id": 48287299, "body": "<code>c = *argv[i];</code> do you enable and take note of all compiler warnings? That would have revealed my previously commented bug too."}, {"owner": {"reputation": 27, "user_id": 4872257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea462d5b418bfc97d1f6146b10be781?s=128&d=identicon&r=PG&f=1", "display_name": "user4872257", "link": "https://stackoverflow.com/users/4872257/user4872257"}, "edited": false, "score": 0, "creation_date": 1430944646, "post_id": 30086890, "comment_id": 48287365, "body": "Yes I do, it did not give a warning for that although I did notice it and initialized it to see if that was the problem a while ago and it made no difference in performance so I left it as it was."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1430944813, "post_id": 30086890, "comment_id": 48287466, "body": "Why do you need the body of the code under an <code>else</code> when you already did <code>exit(EXIT_FAILURE);</code>?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1430944985, "post_id": 30086890, "comment_id": 48287568, "body": "You really must initialise <code>i</code>. If it made &quot;no difference&quot; that&#39;s no excuse for skipping the rules. Do you have <b>all compiler warnings enabled</b>? It&#39;s quite usual for a compiler to warn about using an ininitialised variable."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1430947936, "post_id": 30086890, "comment_id": 48289042, "body": "Note: Rather than the cumbersome <code>equation = (struct stack*)malloc(sizeof(struct stack));</code>, use <code>equation = malloc(sizeof *equation);</code>.  Easy to write, and maintain."}], "answers": [{"tags": [], "owner": {"reputation": 3169, "user_id": 4114124, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k73hh.jpg?s=128&g=1", "display_name": "Politank-Z", "link": "https://stackoverflow.com/users/4114124/politank-z"}, "is_accepted": false, "score": 1, "last_activity_date": 1430948030, "last_edit_date": 1430948030, "creation_date": 1430944569, "answer_id": 30087029, "question_id": 30086890, "link": "https://stackoverflow.com/questions/30086890/when-adding-an-integer-only-the-first-number-is-recorded/30087029#30087029", "title": "When adding an integer only the first number is recorded", "body": "<p>I don't know that it is your <em>only</em> problem, but I am seeing:</p>\n\n<pre><code>    int i;\n    int c;\n    while( argv[i] != NULL) // i is uninitialized\n    {\n      c = *argv[i]; // c is an integer, *argv[i], if valid, is a character\n      i++;\n      push(equation,c);\n    }\n</code></pre>\n\n<p>So, I am not certain what you are after there, but I don't think you are approaching it correctly.</p>\n\n<p>Look into <code>sscanf</code> or <code>atoi</code>. For instance,</p>\n\n<pre><code>sscanf ( argv[i], \"%d\", &amp;c );\n</code></pre>\n\n<p>or</p>\n\n<pre><code>c = atoi ( argv[i] );\n</code></pre>\n\n<p>might be what you're looking for.</p>\n"}], "owner": {"reputation": 27, "user_id": 4872257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea462d5b418bfc97d1f6146b10be781?s=128&d=identicon&r=PG&f=1", "display_name": "user4872257", "link": "https://stackoverflow.com/users/4872257/user4872257"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1430948030, "creation_date": 1430944073, "last_edit_date": 1430944709, "question_id": 30086890, "link": "https://stackoverflow.com/questions/30086890/when-adding-an-integer-only-the-first-number-is-recorded", "title": "When adding an integer only the first number is recorded", "body": "<p>I am working on a project and when I try to add a multi digit number to a stack of integers only the first digit is recorded I am pretty sure the problem is with the way I am reading them in here but I don't understand what is causing this to happen. If you could point me in the right direction I would appreciate it.</p>\n\n<pre><code>int main(int argc,const char *argv[])\n{\n  FILE *src = input_from_args(argc, argv);\n\n    if (src == NULL)\n    {\n        printf(\"%s\", \"Invalid Source\");\n        exit(EXIT_FAILURE);\n    }\n    else\n    {\n    struct stack * equation = NULL;\n    equation = (struct stack*)malloc(sizeof(struct stack));\n    equation -&gt; top = -1;\n\n    int i;\n    int c;\n    while( argv[i] != NULL)\n    {\n      c = *argv[i];\n      i++;\n      push(equation,c);\n    }\n\n    if(strcmp(argv[1],\"-e\") == 0)\n    {\n      evaluate(equation);\n      printf(\"%i \\n\", pop(equation));\n    }\n    else if(strcmp(argv[1],\"-c\") == 0)\n    {\n      convert(equation);\n    }\n    else if(strcmp(argv[1],\"-g\") == 0)\n    {\n      other(equation);\n    }\n    }\n\n    return EXIT_SUCCESS;\n}\n\nstruct stack\n{\n   int arr[100];\n   int top;\n};\n\nvoid push(struct stack *st, int c)\n{\n   if (st-&gt;top == 99)\n   {\n      printf(\"Stack is full\");\n      return ;\n   }\n   st-&gt;top++;\n   st-&gt;arr[st-&gt;top] = c;\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "gcc"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1430943744, "post_id": 30086758, "comment_id": 48286839, "body": "do not cast the return value of <code>malloc()</code>."}], "answers": [{"comments": [{"owner": {"reputation": 632, "user_id": 4238643, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/45eebbdb12f68bec20e0e944157faad4?s=128&d=identicon&r=PG&f=1", "display_name": "Abhijatya Singh", "link": "https://stackoverflow.com/users/4238643/abhijatya-singh"}, "edited": false, "score": 0, "creation_date": 1430944234, "post_id": 30086853, "comment_id": 48287127, "body": "But the problem is the words &quot;The ts is&quot; is completely omitted from second printf. Why I don&#39;t know."}, {"owner": {"reputation": 695058, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "reply_to_user": {"reputation": 632, "user_id": 4238643, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/45eebbdb12f68bec20e0e944157faad4?s=128&d=identicon&r=PG&f=1", "display_name": "Abhijatya Singh", "link": "https://stackoverflow.com/users/4238643/abhijatya-singh"}, "edited": false, "score": 0, "creation_date": 1430944283, "post_id": 30086853, "comment_id": 48287164, "body": "No it isn&#39;t. It&#39;s obscured by the next printf. Read the second sentence of my answer again."}, {"owner": {"reputation": 632, "user_id": 4238643, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/45eebbdb12f68bec20e0e944157faad4?s=128&d=identicon&r=PG&f=1", "display_name": "Abhijatya Singh", "link": "https://stackoverflow.com/users/4238643/abhijatya-singh"}, "edited": false, "score": 0, "creation_date": 1430944627, "post_id": 30086853, "comment_id": 48287356, "body": "Thanks sir!!!!!!!!!!!!!! It was the same issue pointed by you. The file opened in made on windows and used on linux."}], "tags": [], "owner": {"reputation": 695058, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "is_accepted": true, "score": 8, "last_activity_date": 1430943941, "creation_date": 1430943941, "answer_id": 30086853, "question_id": 30086758, "link": "https://stackoverflow.com/questions/30086758/the-printf-result-is-unexpected/30086853#30086853", "title": "The printf result is unexpected", "body": "<p>Your file has DOS-style newlines (\"\\r\\n\") but you're running the code on a system that uses *nix-style newlines (\"\\n\"). The extra CR is moving the terminal cursor back to the first column and then the other line is being printed. Either strip the CR from the line or open the file in a mode that can handle the alternate newline style.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1430944534, "last_edit_date": 1495542514, "creation_date": 1430944534, "answer_id": 30087017, "question_id": 30086758, "link": "https://stackoverflow.com/questions/30086758/the-printf-result-is-unexpected/30087017#30087017", "title": "The printf result is unexpected", "body": "<p>Input file has <code>\\r\\n</code> line endings, yet file is opened in binary or in Unix text mode.  See also <a href=\"https://stackoverflow.com/a/30086853/2410359\">@Ignacio Vazquez-Abrams</a></p>\n\n<p>Rather than <code>memset(buff,0,120); memcpy(buff,ts_t,strlen(ts_t)-1);</code>, drop <code>buff</code> and use below to get rid of potential <code>\\r</code> and <code>\\n</code> regardless of how file was opened.</p>\n\n<pre><code>ts_t[strcspn(ts_t, \"\\r\\n\")] = `\\0`;  // to get rid of potential `\\r` and `\\n`.\n</code></pre>\n"}], "owner": {"reputation": 632, "user_id": 4238643, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/45eebbdb12f68bec20e0e944157faad4?s=128&d=identicon&r=PG&f=1", "display_name": "Abhijatya Singh", "link": "https://stackoverflow.com/users/4238643/abhijatya-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 30086853, "answer_count": 2, "score": 2, "last_activity_date": 1430944534, "creation_date": 1430943630, "question_id": 30086758, "link": "https://stackoverflow.com/questions/30086758/the-printf-result-is-unexpected", "title": "The printf result is unexpected", "body": "<p>I have the following code:</p>\n\n<pre><code>char *buff = (char *)malloc(sizeof(char)*120);\nchar *ts_t = (char *)malloc(sizeof(char)*80);\n\n/*Generating invalid test case for timestamp.*/\nprintf(\"Out side of ts.\\n\");\n\n while(fgets (ts_t, 80, fp_ts)!=NULL) \n {\n      printf(\"Inside ts.\\n\");\n      //ts_t[strlen(ts_t)-1] = '\\0';\n      memset(buff,0,120);       \n      memcpy(buff,ts_t,strlen(ts_t)-1);\n\n      printf(\"The ts is :%s\",buff);\n\n      fprintf(fp_test_case,\"%s\\t%s\\t%s%d\\t%s\\t%s\\t%s%04d\\n\",buff,ver,txn,digit_generate(num),aspid,uid,\"Test\",count_testCase);\n\n      print_description( fp_description,ts_t,count_testCase,\"TimeStamp\");\n      count_testCase++;\n    }\n\nprintf(\"Invalid Time stamp case generated.\\n\");\n</code></pre>\n\n<p>What is expected is:</p>\n\n<p><strong>Out side of ts.<br>\nInside ts.<br>\nThe ts is :05-26-2015T13:53:33.509<br>\nInside ts.<br>\nThe ts is :05-26-2015T13:53:33.509</strong><br></p>\n\n<p>But It is printing as:</p>\n\n<p><strong>Out side of ts<br>\nInside ts.<br>\nInside ts.<br>\nInside ts.:05-26-2015T13:53:33.509<br>\nInside ts.:2015-26-05T13:53:33.509<br></strong></p>\n\n<p>What I have done wrong here?\nThanks.</p>\n"}, {"tags": ["c", "arrays", "multidimensional-array"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1430943284, "post_id": 30086644, "comment_id": 48286540, "body": "did you mean <code>int ** res</code>?"}, {"owner": {"reputation": 23069, "user_id": 156811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/380335e95e6be9740e56b64d667279b3?s=128&d=identicon&r=PG", "display_name": "Havenard", "link": "https://stackoverflow.com/users/156811/havenard"}, "edited": false, "score": 0, "creation_date": 1430943427, "post_id": 30086644, "comment_id": 48286639, "body": "What is <code>matrixmath.h</code> and what format is returned by <code>multiply()</code>?"}, {"owner": {"reputation": 23069, "user_id": 156811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/380335e95e6be9740e56b64d667279b3?s=128&d=identicon&r=PG", "display_name": "Havenard", "link": "https://stackoverflow.com/users/156811/havenard"}, "edited": false, "score": 0, "creation_date": 1430943642, "post_id": 30086644, "comment_id": 48286767, "body": "Judging by how you are using <code>res</code>, I presume it should be <code>int** res</code> not <code>int* res</code>, and you could also use <code>res[i][j]</code> instead of <code>*(*(res + i) + j)</code> for improved readability. Both statements are equivalent."}, {"owner": {"reputation": 23069, "user_id": 156811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/380335e95e6be9740e56b64d667279b3?s=128&d=identicon&r=PG", "display_name": "Havenard", "link": "https://stackoverflow.com/users/156811/havenard"}, "edited": false, "score": 0, "creation_date": 1430943805, "post_id": 30086644, "comment_id": 48286868, "body": "<code>multiply()</code> is invoking undefined behaviour as it retuns a pointer to a local variable."}, {"owner": {"reputation": 1065, "user_id": 1418052, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/1be365bbabb77f8e1fb60be681884a19?s=128&d=identicon&r=PG", "display_name": "n00b1990", "link": "https://stackoverflow.com/users/1418052/n00b1990"}, "edited": false, "score": 0, "creation_date": 1430943891, "post_id": 30086644, "comment_id": 48286914, "body": "Before uploading, I already tried it with the double pointer, which results in the program crashing.. And the straightforward way of <code>res[i][j]</code> gives me an error (as I thought you couldn&#39;t do that with pointers?)"}, {"owner": {"reputation": 23069, "user_id": 156811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/380335e95e6be9740e56b64d667279b3?s=128&d=identicon&r=PG", "display_name": "Havenard", "link": "https://stackoverflow.com/users/156811/havenard"}, "edited": false, "score": 0, "creation_date": 1430944073, "post_id": 30086644, "comment_id": 48287025, "body": "Yes it will give an error because both <code>res[i][j]</code> and <code>*(*(res + i) + j)</code> are supposed to handle double pointers, and thats not the case. You are also using a method of declaring matrix that leaves the compiler free to decide how its formated in memory, which is not standardized among compilers."}], "answers": [{"comments": [{"owner": {"reputation": 1065, "user_id": 1418052, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/1be365bbabb77f8e1fb60be681884a19?s=128&d=identicon&r=PG", "display_name": "n00b1990", "link": "https://stackoverflow.com/users/1418052/n00b1990"}, "edited": false, "score": 0, "creation_date": 1430945363, "post_id": 30086698, "comment_id": 48287760, "body": "I agree with memory allocation, I actually forgot that part. But I guess the problem here is me working with double pointers, and what you mean is me not deserializing the variable correctly right?"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1430944243, "last_edit_date": 1430944243, "creation_date": 1430943404, "answer_id": 30086698, "question_id": 30086644, "link": "https://stackoverflow.com/questions/30086644/getting-the-element-of-a-2d-array-in-c/30086698#30086698", "title": "Getting the element of a 2D array in c?", "body": "<p>The problem here is with the variable </p>\n\n<pre><code>int *res =....\n</code></pre>\n\n<p><code>res</code> is of type <code>int *</code>. So, for a statement like</p>\n\n<pre><code> *(*(res + i) + j);\n</code></pre>\n\n<ul>\n<li><code>*(res + i)</code> gives <code>int</code>.</li>\n<li><code>*(res + i) + j</code> also gives an <code>int</code></li>\n</ul>\n\n<p>and, that <code>int</code> <em>value</em> is not eligible to be used as the operand of unary <code>*</code> operator. Hence the error.</p>\n\n<hr>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Your <code>multiply()</code> invokes <strong>undefined behavior</strong> as it <code>return</code>s the address of a local variable. In other words, after the <code>multiply()</code> finishes execution, the existence of <code>res</code> ceases and trying to access the returned value is UB. You should use dynamic memory allocation [<code>malloc()</code>/<code>calloc()</code>] instead.</p>\n\n<p>Moreover, the <code>return</code> type and the <code>return</code> value does not match.</p>\n\n<p>That said, <em>header files</em> should ideally contain function <em>declaration</em> (prototype), not function <em>definition</em>.</p>\n"}, {"comments": [{"owner": {"reputation": 1065, "user_id": 1418052, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/1be365bbabb77f8e1fb60be681884a19?s=128&d=identicon&r=PG", "display_name": "n00b1990", "link": "https://stackoverflow.com/users/1418052/n00b1990"}, "edited": false, "score": 0, "creation_date": 1430944947, "post_id": 30087074, "comment_id": 48287550, "body": "But you can&#39;t use it like that right? You have to pass a pointer of <code>res</code> to <code>multiply()</code>, for the changes to stay?"}, {"owner": {"reputation": 23069, "user_id": 156811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/380335e95e6be9740e56b64d667279b3?s=128&d=identicon&r=PG", "display_name": "Havenard", "link": "https://stackoverflow.com/users/156811/havenard"}, "reply_to_user": {"reputation": 1065, "user_id": 1418052, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/1be365bbabb77f8e1fb60be681884a19?s=128&d=identicon&r=PG", "display_name": "n00b1990", "link": "https://stackoverflow.com/users/1418052/n00b1990"}, "edited": false, "score": 0, "creation_date": 1430945297, "post_id": 30087074, "comment_id": 48287725, "body": "@n00b1990 No need to, matrixes are inherently passed as pointers. By modifying <code>res</code> inside <code>multiply()</code> you are modifying the original one in <code>main()</code> that was provided as parameter."}, {"owner": {"reputation": 1065, "user_id": 1418052, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/1be365bbabb77f8e1fb60be681884a19?s=128&d=identicon&r=PG", "display_name": "n00b1990", "link": "https://stackoverflow.com/users/1418052/n00b1990"}, "edited": false, "score": 0, "creation_date": 1430945956, "post_id": 30087074, "comment_id": 48288074, "body": "Nice explanation, thank you very much. I guess I wanted to learn and improve my experience on pointers, and I find it very redundant to define <code>SIZE</code> twice. Do you have any idea on how to get my solution to work with double pointers, so I don&#39;t have to define the dimensions? I never done those"}, {"owner": {"reputation": 2917, "user_id": 4031604, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d800dd437bdbb2645b3c71236583fd?s=128&d=identicon&r=PG&f=1", "display_name": "AnArrayOfFunctions", "link": "https://stackoverflow.com/users/4031604/anarrayoffunctions"}, "reply_to_user": {"reputation": 1065, "user_id": 1418052, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/1be365bbabb77f8e1fb60be681884a19?s=128&d=identicon&r=PG", "display_name": "n00b1990", "link": "https://stackoverflow.com/users/1418052/n00b1990"}, "edited": false, "score": 0, "creation_date": 1430947256, "post_id": 30087074, "comment_id": 48288697, "body": "@n00b1990 This is completely untrue. Check my answer. You should never ever write code like this. Unless you don&#39;t care about good conventions. Double pointers doesn&#39;t define matrix - they just define a pointer to pointer to some type. Matrix are defined by just a two-dimensional array and pointer to such thing is shown in my answer."}, {"owner": {"reputation": 23069, "user_id": 156811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/380335e95e6be9740e56b64d667279b3?s=128&d=identicon&r=PG", "display_name": "Havenard", "link": "https://stackoverflow.com/users/156811/havenard"}, "edited": false, "score": 0, "creation_date": 1430950014, "post_id": 30087074, "comment_id": 48290058, "body": "@FISOCCP When did returning a struct by value became a good convention? I think you are having misconceptions of what it means. Making hacks to workaround the way the language is supposed to be used is not a &quot;good convention&quot;. Just take any clib function as example and you will see that two important things never happen: 1). They will never return a non-primitive data type; and 2). They will never alloc their own buffers, you always have to provide one for their use. That is done this way for various reasons, including the most important one: performance."}, {"owner": {"reputation": 2917, "user_id": 4031604, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d800dd437bdbb2645b3c71236583fd?s=128&d=identicon&r=PG&f=1", "display_name": "AnArrayOfFunctions", "link": "https://stackoverflow.com/users/4031604/anarrayoffunctions"}, "edited": false, "score": 0, "creation_date": 1431004013, "post_id": 30087074, "comment_id": 48315226, "body": "Completely untrue. Passing a pointer to output variable is times slower then just allocating one directly on stack in such a location that it&#39;s implicitly available to the scope calling the function (etc. returning by value). I don&#39;t see what &#39;performance&#39; cost can additional structure have. So my version of the code in the concrete example is for sure faster then yours. Also I consider &#39;good convention&#39; code which isn&#39;t ambiguous and shows it&#39;s purpose well (which yours isn&#39;t the case as it use hidden type &#39;adjustment&#39; creating multiple misleads and probably in the future errors)."}, {"owner": {"reputation": 23069, "user_id": 156811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/380335e95e6be9740e56b64d667279b3?s=128&d=identicon&r=PG", "display_name": "Havenard", "link": "https://stackoverflow.com/users/156811/havenard"}, "reply_to_user": {"reputation": 2917, "user_id": 4031604, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d800dd437bdbb2645b3c71236583fd?s=128&d=identicon&r=PG&f=1", "display_name": "AnArrayOfFunctions", "link": "https://stackoverflow.com/users/4031604/anarrayoffunctions"}, "edited": false, "score": 0, "creation_date": 1431007966, "post_id": 30087074, "comment_id": 48318519, "body": "@FISOCPP There is no such implicity. The function don&#39;t have access to the struct its returning to, and even if the compiler optimized it to do, it would use pointers. What really happens is a copy operation."}, {"owner": {"reputation": 1065, "user_id": 1418052, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/1be365bbabb77f8e1fb60be681884a19?s=128&d=identicon&r=PG", "display_name": "n00b1990", "link": "https://stackoverflow.com/users/1418052/n00b1990"}, "edited": false, "score": 0, "creation_date": 1431117354, "post_id": 30087074, "comment_id": 48374866, "body": "Ok, so the only thing missing here is that <code>res</code> needs to be allocated and passed on to <code>multiply</code> right? In that case you don&#39;t have to return anything from <code>multiply</code> and you can <code>free</code> the code at the end of <code>main</code> when done?"}, {"owner": {"reputation": 23069, "user_id": 156811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/380335e95e6be9740e56b64d667279b3?s=128&d=identicon&r=PG", "display_name": "Havenard", "link": "https://stackoverflow.com/users/156811/havenard"}, "reply_to_user": {"reputation": 1065, "user_id": 1418052, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/1be365bbabb77f8e1fb60be681884a19?s=128&d=identicon&r=PG", "display_name": "n00b1990", "link": "https://stackoverflow.com/users/1418052/n00b1990"}, "edited": false, "score": 0, "creation_date": 1431151287, "post_id": 30087074, "comment_id": 48382722, "body": "@n00b1990 Pretty much, yeah. I updated my answer showing one way to do that. Working example: <a href=\"http://ideone.com/6xpxrW\" rel=\"nofollow noreferrer\">ideone.com/6xpxrW</a>"}, {"owner": {"reputation": 1065, "user_id": 1418052, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/1be365bbabb77f8e1fb60be681884a19?s=128&d=identicon&r=PG", "display_name": "n00b1990", "link": "https://stackoverflow.com/users/1418052/n00b1990"}, "edited": false, "score": 0, "creation_date": 1431195395, "post_id": 30087074, "comment_id": 48395443, "body": "@Havenard Nice example, understand it very well now. Thank you very much for all the help :o)"}], "tags": [], "owner": {"reputation": 23069, "user_id": 156811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/380335e95e6be9740e56b64d667279b3?s=128&d=identicon&r=PG", "display_name": "Havenard", "link": "https://stackoverflow.com/users/156811/havenard"}, "is_accepted": true, "score": 0, "last_activity_date": 1431151271, "last_edit_date": 1431151271, "creation_date": 1430944712, "answer_id": 30087074, "question_id": 30086644, "link": "https://stackoverflow.com/questions/30086644/getting-the-element-of-a-2d-array-in-c/30087074#30087074", "title": "Getting the element of a 2D array in c?", "body": "<p>Functions in C cannot return matrixes directly, you would have to use double pointers. An array with pointers to each array corresponding to a line of matrix.</p>\n\n<p>This adds rather unecessary complication to your problem, though, and would require allocating memory to the returned buffer which is something to be avoided (and also you can't return a pointer to a local variable, it will crash).</p>\n\n<p>I believe the best solution in your case, is to not return any value at all. Simply provide <code>multiply()</code> with a buffer it can use to store the results:</p>\n\n<pre><code>#define SIZE 2\nvoid multiply(int res[SIZE][SIZE], int mat1[SIZE][SIZE], int mat2[SIZE][SIZE])\n{\n    int i, j, k, sumElement;\n    for (i = 0; i &lt; SIZE; i++) {\n        for (j = 0; j &lt; SIZE; j++) {\n            sumElement = 0;\n            for (k = 0; k &lt; SIZE; k++) {\n                sumElement += mat1[i][k] * mat2[k][j];\n            }\n            res[i][j] = sumElement;\n            printf(\"sumElement: %d\\n\", sumElement);\n        }\n    }\n}\n</code></pre>\n\n<p>And use the function like this:</p>\n\n<pre><code>int main()\n{\n    int mat1[SIZE][SIZE] = {{2,3},{4,5}};\n    int mat2[SIZE][SIZE] = {{6,7},{8,9}};\n    int res[SIZE][SIZE];\n\n    multiply(res, mat1, mat2);\n\n    int i, j;\n    for(i = 0; i &lt; SIZE; i++) {\n        for (j = 0; j &lt; SIZE; j++) {\n            int getEl = res[i][j];\n            printf(\"%d \", getEl);\n        }\n        printf(\"\\n\");\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Note that native matrixes are not very versatile and can be a tricky thing to to pass as paramter to other functions, because the function will have to know the dimensions of this matrix at compile time otherwise it won't work. The only way to make a function that can handle matrixes of any dimension is making it work with double pointers.</p>\n\n<p><strong>Answering comment:</strong></p>\n\n<p>To convert them into pointer to pointer and be able to pass matrixes of any size to your function and allow this function to return a matrix aswell, you would have to do something like this:</p>\n\n<pre><code>int** multiply(int** mat1, int** mat2, int size)\n{\n    int i, j, k;\n\n    // allocate the memory necessary to store the results\n    int** res = malloc(size * sizeof(int*));\n    for (i = 0; i &lt; size; ++i)\n        res[i] = malloc(size * sizeof(int));\n\n    // populate res with values\n    for (i = 0; i &lt; size; i++)\n        for (j = 0; j &lt; size; j++)\n        {\n            res[i][j] = 0;\n\n            for (k = 0; k &lt; size; k++)\n                res[i][j] += mat1[i][k] * mat2[k][j];\n\n            printf(\"sumElement: %d\\n\", res[i][j]);\n        }\n\n    return res;\n}\n</code></pre>\n\n<p>Now this function can process any matrix of any size, will automatically allocate the memory necessary to store the result, and return a pointer that you can access with <code>res[i][j]</code>. Usage:</p>\n\n<pre><code>int main()\n{\n    int mat1[][SIZE] = { { 2, 3 }, { 4, 5 } };\n    int mat2[][SIZE] = { { 6, 7 }, { 8, 9 } };\n\n    // map them into double pointer matrixes so they can be used by multiply()\n    int* pmat1[SIZE] = { mat1[0], mat1[1] };\n    int* pmat2[SIZE] = { mat2[0], mat2[1] };\n\n    int** res = multiply(pmat1, pmat2, SIZE);\n\n    int i, j;\n    for(i = 0; i &lt; SIZE; i++) {\n        for (j = 0; j &lt; SIZE; j++) {\n            int getEl = res[i][j];\n            printf(\"%d \", getEl);\n        }\n        printf(\"\\n\");\n    }\n    return 0;\n}\n</code></pre>\n\n<p>There is only one problem with this code, it is considered bad practice to allocate memory that won't be released before the end of the same function. Instead, <code>main()</code> should allocate the memory used by <code>res</code> and pass this buffer to <code>multiply()</code> to use, and also be responsable of releasing this memory after its used. Not releasing memory you no longer need is a problem known as <a href=\"http://en.wikipedia.org/wiki/Memory_leak\" rel=\"nofollow\">memory leak</a>. Read the wikipedia artigle for details.</p>\n\n<p>In such a simple code where the program will terminate shortly after computing the matrix it is not important, but you should keep this in mind for future projects.</p>\n\n<p>Update 2:</p>\n\n<p>This is one way to do that:</p>\n\n<pre><code>void multiply(int** res, int** mat1, int** mat2, int size)\n{\n    int i, j, k;\n\n    // populate res with values\n    for (i = 0; i &lt; size; i++)\n        for (j = 0; j &lt; size; j++)\n        {\n            res[i][j] = 0;\n\n            for (k = 0; k &lt; size; k++)\n                res[i][j] += mat1[i][k] * mat2[k][j];\n\n            printf(\"sumElement: %d\\n\", res[i][j]);\n        }\n}\n\nint main()\n{\n    int mat1[][SIZE] = { { 2, 3 }, { 4, 5 } };\n    int mat2[][SIZE] = { { 6, 7 }, { 8, 9 } };\n    int res[][SIZE]  = { { 0, 0 }, { 0, 0 } };\n\n    // map them into double pointer matrixes so they can be used by multiply()\n    int* pmat1[SIZE] = { mat1[0], mat1[1] };\n    int* pmat2[SIZE] = { mat2[0], mat2[1] };\n    int* pres[SIZE]  = { res[0],  res[1] };\n\n    multiply(pres, pmat1, pmat2, SIZE);\n\n    int i, j;\n    for(i = 0; i &lt; SIZE; i++) {\n        for (j = 0; j &lt; SIZE; j++) {\n            int getEl = res[i][j];\n            printf(\"%d \", getEl);\n        }\n        printf(\"\\n\");\n    }\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1065, "user_id": 1418052, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/1be365bbabb77f8e1fb60be681884a19?s=128&d=identicon&r=PG", "display_name": "n00b1990", "link": "https://stackoverflow.com/users/1418052/n00b1990"}, "edited": false, "score": 0, "creation_date": 1431116970, "post_id": 30087578, "comment_id": 48374680, "body": "But is it ok to use a &#39;hack&#39;? Using a struct for this purpose seems very redundant?"}, {"owner": {"reputation": 2917, "user_id": 4031604, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d800dd437bdbb2645b3c71236583fd?s=128&d=identicon&r=PG&f=1", "display_name": "AnArrayOfFunctions", "link": "https://stackoverflow.com/users/4031604/anarrayoffunctions"}, "reply_to_user": {"reputation": 1065, "user_id": 1418052, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/1be365bbabb77f8e1fb60be681884a19?s=128&d=identicon&r=PG", "display_name": "n00b1990", "link": "https://stackoverflow.com/users/1418052/n00b1990"}, "edited": false, "score": 0, "creation_date": 1431123631, "post_id": 30087578, "comment_id": 48377402, "body": "Absolutely - you know &#39;C&#39; language is a weird one - it may seem redundant but it&#39;s the only way to make arrays act properly (binding them in a structure allows copy operations, pass by value and other otherwise &#39;forbidden&#39; features)."}], "tags": [], "owner": {"reputation": 2917, "user_id": 4031604, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d800dd437bdbb2645b3c71236583fd?s=128&d=identicon&r=PG&f=1", "display_name": "AnArrayOfFunctions", "link": "https://stackoverflow.com/users/4031604/anarrayoffunctions"}, "is_accepted": false, "score": 0, "last_activity_date": 1430947588, "last_edit_date": 1430947588, "creation_date": 1430946630, "answer_id": 30087578, "question_id": 30086644, "link": "https://stackoverflow.com/questions/30086644/getting-the-element-of-a-2d-array-in-c/30087578#30087578", "title": "Getting the element of a 2D array in c?", "body": "<p>Firstly never define array as function parameters because this is misleading (they 'magically' adjust into pointer).</p>\n\n<p>What I mean is that this:</p>\n\n<pre><code>int* multiply(int mat1[][SIZE], int mat2[][SIZE], int size)\n</code></pre>\n\n<p>Automatically became this:</p>\n\n<pre><code>int* multiply(int (*mat1)[SIZE], int (*mat2)[SIZE], int size)\n</code></pre>\n\n<p>Which is not what you want obviously as this way modifying those parameters actually modifies the argument passed and this is not 'pass by value' what the syntax suggests.</p>\n\n<p>Second pointer to 2 dimensional array of 'SIZE' is written as following:</p>\n\n<pre><code>int (*)[SIZE][SIZE]\n</code></pre>\n\n<p>and not:</p>\n\n<pre><code>int *\n</code></pre>\n\n<p>So your whole code is very wrong. Here I'll put the right version of it:</p>\n\n<pre><code>#define SIZE 2\n\nstruct _2dimensarrayofSIZE { int d[SIZE][SIZE]; }; //*1\n\nstruct _2dimensarrayofSIZE multiply(int (*pmat1)[SIZE][SIZE], int (*pmat2)[SIZE][SIZE]) {\n    struct _2dimensarrayofSIZE res;\n\n    int i,j, k;\n    for (i = 0; i &lt; size; i++) {\n        for (j = 0; j &lt; size; j++) {\n            int sumElement = 0;\n            for (k = 0; k &lt; size; k++) {\n                sumElement += (*pmat1)[i][k]*(*pmat2)[k][j];\n            }\n            res.d[i][j] = sumElement;\n            printf(\"sumElement: %d\\n\", sumElement);\n        }\n    }\n    return res;\n}\n</code></pre>\n\n<p>And the main source:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;matrixmath.h&gt; //\n\n//#define SIZE 2 supposing that this is defined in your 'multiply'\n//function header\n\nint main() {\n    int mat1[SIZE][SIZE] = {{2,3},{4,5}};\n    int mat2[SIZE][SIZE] = {{6,7},{8,9}};\n\n    struct _2dimensarrayofSIZE res = multiply(&amp;mat1, &amp;mat2); //*2\n\n    int i, j;\n    for(i = 0; i &lt; SIZE; i++) {\n        for (j = 0; j &lt; SIZE; j++) {\n            int getEl = *(*(res.d + i) + j);\n            printf(\"%d \", getEl);\n        }\n        printf(\"\\n\");\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Notes: </p>\n\n<p>*1: Here we use an array into structure hack because otherwise 'C' doesn't allow us to return arrays.</p>\n\n<p>*2: Here we pass two-dimensional arrays pointer by using '&amp;' (address operator).</p>\n"}], "owner": {"reputation": 1065, "user_id": 1418052, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/1be365bbabb77f8e1fb60be681884a19?s=128&d=identicon&r=PG", "display_name": "n00b1990", "link": "https://stackoverflow.com/users/1418052/n00b1990"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 30087074, "answer_count": 3, "score": 1, "last_activity_date": 1431151271, "creation_date": 1430943203, "last_edit_date": 1430943743, "question_id": 30086644, "link": "https://stackoverflow.com/questions/30086644/getting-the-element-of-a-2d-array-in-c", "title": "Getting the element of a 2D array in c?", "body": "<p>I seem to have a problem in getting an element from a two dimensional array in c. It looks very straightforward to me, but I guess one doesn't see his one mistakes :P. I believe that my code is correct, although I do get a warning.</p>\n\n<p>The code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;matrixmath.h&gt;\n\n#define SIZE 2\n\nint main() {\n    int mat1[SIZE][SIZE] = {{2,3},{4,5}};\n    int mat2[SIZE][SIZE] = {{6,7},{8,9}};\n\n    int *res = multiply(mat1, mat2, SIZE);\n\n    int i, j;\n    for(i = 0; i &lt; SIZE; i++) {\n        for (j = 0; j &lt; SIZE; j++) {\n            int getEl = *(*(res + i) + j);\n            printf(\"%d \", getEl);\n        }\n        printf(\"\\n\");\n    }\n    return 0;\n}\n</code></pre>\n\n<p>The error I get:</p>\n\n<blockquote>\n  <p>invalid type argument of unary '*' (have 'int')</p>\n</blockquote>\n\n<p>Am I not seeing something here?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Sorry guys, this is the .h file:</p>\n\n<pre><code>#define SIZE 2\n\nint* multiply(int mat1[][SIZE], int mat2[][SIZE], int size) {\n    int res[size][size];\n\n    int i,j, k;\n    for (i = 0; i &lt; size; i++) {\n        for (j = 0; j &lt; size; j++) {\n            int sumElement = 0;\n            for (k = 0; k &lt; size; k++) {\n                sumElement += mat1[i][k]*mat2[k][j];\n            }\n            res[i][j] = sumElement;\n            printf(\"sumElement: %d\\n\", sumElement);\n        }\n    }\n    return &amp;res;\n}\n</code></pre>\n\n<p>I also have to add that I define <code>SIZE</code> here as well, which seems very unlogical. But I have no choice as I have to specify the size the 2D arrays.</p>\n"}, {"tags": ["c", "pointers", "struct", "linked-list", "segmentation-fault"], "comments": [{"owner": {"reputation": 4338, "user_id": 1061193, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d7ffbfe3211751d0cfe8c9fcda306c2b?s=128&d=identicon&r=PG", "display_name": "drum", "link": "https://stackoverflow.com/users/1061193/drum"}, "edited": false, "score": 0, "creation_date": 1430943013, "post_id": 30086445, "comment_id": 48286370, "body": "Do you understand your own code? From a quick glance, it seems that you have a bad pointer."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1430943015, "post_id": 30086445, "comment_id": 48286373, "body": "Please indent your code. :-)"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1430944078, "post_id": 30086445, "comment_id": 48287027, "body": "I wouldn&#39;t understand code formatted like that either."}], "answers": [{"comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 2, "creation_date": 1430942679, "post_id": 30086478, "comment_id": 48286152, "body": "Good one, I don&#39;t understand the language."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 3, "last_activity_date": 1430977508, "last_edit_date": 1495539891, "creation_date": 1430942640, "answer_id": 30086478, "question_id": 30086445, "link": "https://stackoverflow.com/questions/30086445/memory-segmentation-in-c/30086478#30086478", "title": "memory segmentation in C", "body": "<p>I do not understand the <em>language</em> (used in variable naming and print statements), but it seems</p>\n\n<pre><code> scanf(\"%d\",&amp;(ptr-&gt;data-&gt;numero));\n</code></pre>\n\n<p>is the problem. You need to allocate memory to <code>ptr-&gt;data</code> before dereferencing it.</p>\n\n<p>To explain, <code>data</code> is also a pointer. You need to allocate memory [<code>malloc()</code>] to it before using it, just like you did for <code>ptr</code>.</p>\n\n<p>same case is applicable for</p>\n\n<pre><code>scanf(\"%s\",(ptr-&gt;data-&gt;prenom));\n</code></pre>\n\n<p>here, you need to allocate both <code>data</code> and <code>prenom</code> before using.</p>\n\n<p>Also, please <a href=\"https://stackoverflow.com/q/605845/2173917\">do not cast</a> the return value of <code>malloc()</code> and family in <code>C</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "is_accepted": false, "score": 0, "last_activity_date": 1430942679, "creation_date": 1430942679, "answer_id": 30086492, "question_id": 30086445, "link": "https://stackoverflow.com/questions/30086445/memory-segmentation-in-c/30086492#30086492", "title": "memory segmentation in C", "body": "<pre><code>scanf(\"%d\",&amp;(ptr-&gt;data-&gt;numero));\n</code></pre>\n\n<p>You never allocated memory for <code>data</code>.</p>\n\n<pre><code>scanf(\"%s\",(ptr-&gt;data-&gt;prenom)); \n</code></pre>\n\n<p>You never allocated memory for <code>prenom</code>.</p>\n\n<p>Use <code>malloc</code> as you did for <code>ptr</code> to allocate memory for these objects.</p>\n"}], "owner": {"reputation": 3, "user_id": 4872163, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206739626433141/picture?type=large", "display_name": "Imad Arifi", "link": "https://stackoverflow.com/users/4872163/imad-arifi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1430977508, "creation_date": 1430942512, "last_edit_date": 1430943141, "question_id": 30086445, "link": "https://stackoverflow.com/questions/30086445/memory-segmentation-in-c", "title": "memory segmentation in C", "body": "<p>I'm having a trouble while working on a homework. I am preparing a little project about linked lists.\nI wrote a program which shows me an error message about segmentation fault. I've no Idea , what does this stuff mean and what have I to do.\nI'm looking forward to recieving some solution from you guys\nhere is the code </p>\n\n<pre><code>\u202a#\u200einclude\u202c &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\ntypedef struct Data{\nint numero;\nchar *prenom;\nfloat taille;\n}donnees;\ntypedef struct list linked_list;\nstruct list{\ndonnees *data;\nlinked_list *next;\n};\nint main(){\nint taille,i;\nlinked_list *tete,*ptr,*tete1;\ntete=ptr=NULL;\nprintf(\"\\nentrer le nombre des etudiants a introduire dans la liste :   \");\nscanf(\"%d\",&amp;taille);\nfor(i=0;i&lt;taille;i++){\nptr=(linked_list*)malloc(sizeof(linked_list));\nprintf(\"\\nentrer le numero de l'etudiant :\");\nscanf(\"%d\",&amp;(ptr-&gt;data-&gt;numero));\nprintf(\"\\nentrer le nom de l'etudiant :\");\nscanf(\"%s\",(ptr-&gt;data-&gt;prenom));\nprintf(\"\\nentrer le numero de l'etudiant :\");\nscanf(\"%f\",&amp;ptr-&gt;data-&gt;taille);\nptr-&gt;next=NULL;\nif(tete==NULL)tete=ptr;\nelse{\nptr-&gt;next=tete;\ntete=ptr;\n}\nprintf(\"votre liste s'ecrit sous la forme :\\n[tete]-&gt;\");\nptr=tete;\nwhile(ptr!=NULL){\nprintf(\"[ %d - %s -%f ]-&gt;\",ptr-&gt;data-&gt;numero,ptr-&gt;data-&gt;prenom,ptr-  &gt;data-&gt;taille);\n}\nprintf(\"NULL\\n\");\n}\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "search", "mpi", "scatter"], "comments": [{"owner": {"reputation": 8043, "user_id": 491687, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/2174f845b769ea2ad2242047f3118128?s=128&d=identicon&r=PG", "display_name": "Wesley Bland", "link": "https://stackoverflow.com/users/491687/wesley-bland"}, "edited": false, "score": 0, "creation_date": 1430942626, "post_id": 30086336, "comment_id": 48286121, "body": "We&#39;d need to get some sample input to be able to tell you what specifically is wrong, but at first glance, rank 0 will do two more <code>MPI_Bcast</code> calls than everyone else (the two in its specific block plus the two below it)."}, {"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 0, "creation_date": 1430947295, "post_id": 30086336, "comment_id": 48288713, "body": "This has been discussed here countless times: MPI does not support array of pointers. You have to &quot;flatten&quot; the memory into a single contiguous block."}, {"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 1, "creation_date": 1430947743, "post_id": 30086336, "comment_id": 48288937, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/20891830/mpi-scatter-not-working-as-expected\">MPI_Scatter - not working as expected</a>"}, {"owner": {"reputation": 87, "user_id": 4196810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b44d81c7c3dd103e99f982aeadcb91a?s=128&d=identicon&r=PG&f=1", "display_name": "casualresearcher", "link": "https://stackoverflow.com/users/4196810/casualresearcher"}, "edited": false, "score": 0, "creation_date": 1430949153, "post_id": 30086336, "comment_id": 48289629, "body": "Interesting, thank you, now I see that the issue most likely comes from the 2-D array issue. But how would I flatten out this array? I see in the link you posted how they did it with integers, but because I&#39;m working with char*, wouldn&#39;t flattening a 2-D char array that contains array[0] = &#39;hi&#39;, array[1] = &#39;hello&#39;, array[2] = &#39;goodbye&#39; into &#39;hihellogoodbye&#39;?"}, {"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 1, "creation_date": 1431003012, "post_id": 30086336, "comment_id": 48314406, "body": "Strings can be easily concatenated by separating them with NUL (<code>\\0</code>) characters. One should also use <code>MPI_Scatterv</code> because the chunks will most likely be of different size. Another option would be to have each string occupy the same amount of space, e.g. 64 bytes, by padding with NULs."}, {"owner": {"reputation": 8727, "user_id": 2999346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQ1wB.png?s=128&g=1", "display_name": "francis", "link": "https://stackoverflow.com/users/2999346/francis"}, "edited": false, "score": 0, "creation_date": 1431028490, "post_id": 30086336, "comment_id": 48331780, "body": "<code>MPI_Bcast()</code> and most MPI functions needs pointer to the data to be send. By writing <code>MPI_Bcast(&amp;str_to_search, 10, MPI_CHAR, 0, MPI_COMM_WORLD);</code>, a pointer to an array of char is given to <code>MPI_Bcast()</code>. But it should be a pointer to the first item of the array. So <code>MPI_Bcast(str_to_search, 10, MPI_CHAR, 0, MPI_COMM_WORLD);</code>"}], "owner": {"reputation": 87, "user_id": 4196810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b44d81c7c3dd103e99f982aeadcb91a?s=128&d=identicon&r=PG&f=1", "display_name": "casualresearcher", "link": "https://stackoverflow.com/users/4196810/casualresearcher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 522, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1430942162, "creation_date": 1430942162, "question_id": 30086336, "link": "https://stackoverflow.com/questions/30086336/c-mpi-array-search-mpi-scatter-segmentation-fault", "title": "C MPI Array Search (MPI_Scatter segmentation fault)", "body": "<p>My MPI code keeps running into a segmentation fault for all non-master tasks.</p>\n\n<pre><code>#include \"mpi.h\"\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\nint main(int argc, char* argv[]) {\n    int list_size = 1000\n    int threads;\n    int th_nums;\n    int slice;\n    int index;\n    char* the_array[list_size];\n    char* temp_array[list_size];\n    char str_to_search[10];\n\n    FILE *in = fopen(\"inputfile\", \"r\");\n\n    char parse[10];\n\n    MPI_Init(&amp;argc, &amp;argv);\n    MPI_Comm_rank(MPI_COMM_WORLD, &amp;threads);\n    MPI_Comm_size(MPI_COMM_WORLD, &amp;th_nums);\n\n    if (threads == 0) { // if master task\n        fgets(parse, 10, in);\n        slice = atoi(parse); // How many slices to cut the array into\n\n        fgets(parse, 10, in);\n        sscanf(parse, \"%s\", search); // gives us the string we want to search\n\n        int i;\n        for (i = 0; i &lt; list_size; i++) {\n            char temp[10];\n            fgets(parse, 10, in);\n            sscanf(parse, \"%s\", temp);\n            the_array[i] = strdup(temp);\n        }\n        index = list_size/slice; // \n        MPI_Bcast(&amp;str_to_search, 10, MPI_CHAR, 0, MPI_COMM_WORLD);\n        MPI_Bcast(&amp;index, 15, MPI_INT, 0, MPI_COMM_WORLD);\n    }\n\n    MPI_Bcast(&amp;str_to_search, 10, MPI_CHAR, 0, MPI_COMM_WORLD);\n    MPI_Bcast(&amp;index, 15, MPI_INT, 0, MPI_COMM_WORLD);\n\n    MPI_Scatter(the_array, index, MPI_CHAR, temp_array, index, 0, MPI_COMM_WORLD);\n\n    // TESTING IF THE TEMP_ARRAY RECEIVED DATA\n    printf(\"Thread %i's temp_array[0] is %s\\n\", threads, temp_array[0]);\n\n    // Search for string occurs here\n\n    MPI_Finalize();\n\n    return 0;\n}\n</code></pre>\n\n<p>The error I'm receiving is this:</p>\n\n<pre><code>  [katya-kazanova:03096] *** Process received signal ***\n  [katya-kazanova:03096] Signal: Segmentation fault (11)\n  [katya-kazanova:03096] Signal code: Address not mapped (1)\n  [katya-kazanova:03096] Failing at address: 0x220e6d0\n  [katya-kazanova:03096] [ 0] /lib64/libpthread.so.0() [0x359fc0f710]\n  [katya-kazanova:03096] [ 1] /lib64/libc.so.6(_IO_vfprintf+0x3e5c) [0x359f047e2c]\n  [katya-kazanova:03096] [ 2] /lib64/libc.so.6(_IO_printf+0x9a) [0x359f04f18a]\n  [katya-kazanova:03096] [ 3] ./test(main+0x31b) [0x400eaf]\n  [katya-kazanova:03096] [ 4] /lib64/libc.so.6(__libc_start_main+0xfd) [0x359f01ed5d]\n  [katya-kazanova:03096] [ 5] ./test() [0x400ad9]\n  [katya-kazanova:03096] *** End of error message ***\n  [katya-kazanova:03097] *** Process received signal ***\n  [katya-kazanova:03098] *** Process received signal ***\n  [katya-kazanova:03098] Signal: Segmentation fault (11)\n  [katya-kazanova:03098] Signal code: Address not mapped (1)\n  [katya-kazanova:03098] Failing at address: 0x223f410\n  [katya-kazanova:03098] [ 0] /lib64/libpthread.so.0() [0x359fc0f710]\n  [katya-kazanova:03097] Signal: Segmentation fault (11)\n  [katya-kazanova:03097] Signal code: Address not mapped (1)\n  [katya-kazanova:03097] Failing at address: 0x2226d70\n  [katya-kazanova:03098] [ 1] /lib64/libc.so.6(_IO_vfprintf+0x3e5c) [0x359f047e2c]\n  [katya-kazanova:03098] [ 2] /lib64/libc.so.6(_IO_printf+0x9a) [0x359f04f18a]\n  [katya-kazanova:03098] [ 3] ./test(main+0x31b) [0x400eaf]\n  [katya-kazanova:03098] [ 4] /lib64/libc.so.6(__libc_start_main+0xfd) [0x359f01ed5d]\n  [katya-kazanova:03098] [ 5] ./test() [0x400ad9]\n  [katya-kazanova:03098] *** End of error message ***\n  [katya-kazanova:03097] [ 0] /lib64/libpthread.so.0() [0x359fc0f710]\n  [katya-kazanova:03097] [ 1] /lib64/libc.so.6(_IO_vfprintf+0x3e5c) [0x359f047e2c]\n  [katya-kazanova:03097] [ 2] /lib64/libc.so.6(_IO_printf+0x9a) [0x359f04f18a]\n  [katya-kazanova:03097] [ 3] ./test(main+0x31b) [0x400eaf]\n  [katya-kazanova:03097] [ 4] /lib64/libc.so.6(__libc_start_main+0xfd) [0x359f01ed5d]\n  [katya-kazanova:03097] [ 5] ./test() [0x400ad9]\n  [katya-kazanova:03097] *** End of error message ***\n</code></pre>\n\n<p>And I always receive</p>\n\n<pre><code>Thread 0's temp_array[0] is aaa\n</code></pre>\n\n<p>Which is correct for Thread 0.</p>\n\n<p>I'm assuming this occurs because only the master task receives part of the slice, but other tasks don't receive anything.</p>\n"}, {"tags": ["objective-c", "c", "delimiter", "word-count"], "comments": [{"owner": {"reputation": 1228, "user_id": 4023418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2b157cf12258cebc22300af22dad977?s=128&d=identicon&r=PG", "display_name": "hiandbaii", "link": "https://stackoverflow.com/users/4023418/hiandbaii"}, "edited": false, "score": 0, "creation_date": 1430942166, "post_id": 30086072, "comment_id": 48285809, "body": "Have you considered the edge case of a single word without any delimiters?"}, {"owner": {"reputation": 197, "user_id": 4663249, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh5.googleusercontent.com/-iI0yx8OnMAo/AAAAAAAAAAI/AAAAAAAAAYs/FKHIK8Y3UVQ/photo.jpg?sz=128", "display_name": "karan satia", "link": "https://stackoverflow.com/users/4663249/karan-satia"}, "reply_to_user": {"reputation": 1228, "user_id": 4023418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2b157cf12258cebc22300af22dad977?s=128&d=identicon&r=PG", "display_name": "hiandbaii", "link": "https://stackoverflow.com/users/4023418/hiandbaii"}, "edited": false, "score": 0, "creation_date": 1430942705, "post_id": 30086072, "comment_id": 48286177, "body": "@hiandbaii my code runs fine if there&#39;s just one word with no delimiters making up the &quot;paragraph&quot; string."}, {"owner": {"reputation": 2279, "user_id": 1370785, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/oASta.jpg?s=128&g=1", "display_name": "jiveturkey", "link": "https://stackoverflow.com/users/1370785/jiveturkey"}, "edited": false, "score": 0, "creation_date": 1430943448, "post_id": 30086072, "comment_id": 48286655, "body": "Why not use <code>strtok</code>, add as many separators as you want and just loop through calls until you&#39;re done?"}], "answers": [{"tags": [], "owner": {"reputation": 1228, "user_id": 4023418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2b157cf12258cebc22300af22dad977?s=128&d=identicon&r=PG", "display_name": "hiandbaii", "link": "https://stackoverflow.com/users/4023418/hiandbaii"}, "is_accepted": false, "score": 0, "last_activity_date": 1430943738, "creation_date": 1430943738, "answer_id": 30086790, "question_id": 30086072, "link": "https://stackoverflow.com/questions/30086072/additional-logic-to-this-exercise-missing/30086790#30086790", "title": "additional logic to this exercise missing", "body": "<p>I don't understand, You should be able to add or statements....</p>\n\n<pre><code>int main(void) {\n    char paragraph[] = \"This is a test paragraph,EXTRAWORDHERE and we will be testing out a string.\";\n    char current = ' ';\n    int i;\n    int wordCount = 0;\n\n\n    for (i = 0; i &lt; sizeof(paragraph); i++){\n        if ((paragraph[i] == 32 || paragraph[i] == 44) &amp;&amp; !(current == 32 || current == 44)){ //32 = ascii for space, 44 for comma\n            wordCount++;\n        }\n        current = paragraph[i];\n    }\n    wordCount++;\n    printf(\"%d\\n\",wordCount);\nreturn 0;\n}\n</code></pre>\n\n<p>I suppose it would be better to change the comparison of current from a not equal to into an equal to. Hopefully that helps.</p>\n"}, {"tags": [], "owner": {"reputation": 50374, "user_id": 568283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/120ceee2dc40d539b9983265a2e0a2f8?s=128&d=identicon&r=PG", "display_name": "CRD", "link": "https://stackoverflow.com/users/568283/crd"}, "is_accepted": false, "score": 1, "last_activity_date": 1430944721, "creation_date": 1430944721, "answer_id": 30087081, "question_id": 30086072, "link": "https://stackoverflow.com/questions/30086072/additional-logic-to-this-exercise-missing/30087081#30087081", "title": "additional logic to this exercise missing", "body": "<p>A standard way to solve these types of problems is to build a <em>finite state machine</em>, your code isn't quite one but its close.</p>\n\n<p>Instead of thinking about comparing the previous and current characters think in terms of <em>states</em> - you can start with just two, <em>in a word</em> and <em>not in a word</em>.</p>\n\n<p>Now for each state you consider what the current character implies in terms of actions and changes to the state. For example, if the state is <em>not in a word</em> and the current character is a letter then the action is <em>increment word count</em> and the next state is <em>in a word</em>.</p>\n\n<p>In (Objective-)C you can build a simple finite state machine using an <code>enum</code> to give the states names and a <code>case</code> statement inside a loop. In pseudo-code this is something like:</p>\n\n<pre><code>typedef enum { NotInWord, InWord } State;\n\nState currentState = NotInWord;\nNSUInteger wordCount = 0;\n\nfor currentChar in sourceString\n   case currentState of\n      NotInWord:\n         if currentChar is word start character -- e.g. a letter\n         then\n            increment wordCount;\n            currentState = InWord;\n\n      InWord:\n         if currentChar is not a word character -- e.g. a letter\n         then\n            currentState = NotInWord;\n   end case\nend for\n</code></pre>\n\n<p>The above is just a step from your original algorithm - recasting it in terms of states rather than the previous character.</p>\n\n<p>Now if you want to get smarter you can add more states. For example how many words are there in \"Karan's question\"? Two. So you might want to allow a single apostrophe in a word. To handle that you can add a state <code>AfterApostrophe</code> whose logic is the same as the current <code>InWord</code>; and modify <code>InWord</code> logic to include if the current character is an apostrophe the next state is <code>AfterApostrophe</code> - that would allow one apostrophe in a word (or its end, which is also valid). Next you might want to consider hyphenated words, etc...</p>\n\n<p>To test if a character is a particular type you have two easy choices:</p>\n\n<ul>\n<li><p>If this is just an exercise and you are happy to stick with the ASCII range of characters there are functions such as <code>isdigit()</code>, <code>isletter()</code> etc.</p></li>\n<li><p>If you want to handle full Unicode you can use the <code>NSCharacterSet</code> type with its pre-defined sets for letters, digits, etc.</p></li>\n</ul>\n\n<p>See the documentation for both of the above choices.</p>\n\n<p>HTH</p>\n"}], "owner": {"reputation": 197, "user_id": 4663249, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh5.googleusercontent.com/-iI0yx8OnMAo/AAAAAAAAAAI/AAAAAAAAAYs/FKHIK8Y3UVQ/photo.jpg?sz=128", "display_name": "karan satia", "link": "https://stackoverflow.com/users/4663249/karan-satia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1430944721, "creation_date": 1430941248, "question_id": 30086072, "link": "https://stackoverflow.com/questions/30086072/additional-logic-to-this-exercise-missing", "title": "additional logic to this exercise missing", "body": "<p>Writing a basic program to count the number of words in a string. I've changed my original code to account for multiple spaces between words. By setting one variable to the current index and one variable to the previous index and comparing them, I can say \"if this current index is a space, but the previous index contains something other than a space (basically saying a character), then increase the word count\".</p>\n\n<pre><code>int main(int argc, const char * argv[]) {\n    @autoreleasepool {\n        //establishing the string that we'll be parsing through.\n        NSString * paragraph = @\"This is a test paragraph and we will be testing out a string counter.\";\n\n        //we're setting our counter that tracks the # of words to 0\n        int wordCount = 0;\n\n        /*by setting current to a blank space ABOVE the for loop, when the if statement first runs, it's comparing [paragraph characterAtIndex:i to a blank space. Once the loop runs through for the first time, the next value that current will have is characterAtIndex:0, while the if statement in the FOR loop will hold a value of characterAtIndex:1*/\n\n        char current = ' ';\n\n        for (int i=0; i&lt; paragraph.length; i++) {\n\n            if ([paragraph characterAtIndex:i] == ' ' &amp;&amp; (current != ' ')) {\n                wordCount++;\n            }\n            current = [paragraph characterAtIndex:i];\n\n        //after one iteration, current will be T and it will be comparing it to paragraph[1] which is h.\n\n        }\n        wordCount ++;\n        NSLog(@\"%i\", wordCount);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>I tried adding \"or\" statements to account for delimiters such as \";\" \",\" and \".\" instead of just looking at a space. It didn't work...any idea what I can do, logically speaking, to account for anything that isn't a letter (but preferably just limiting it to these four delimiters - . , ; and space.</p>\n"}, {"tags": ["c", "connection", "mqtt", "broker"], "comments": [{"owner": {"reputation": 40434, "user_id": 504554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/006ffde9ed3fac6396222405fc5e9bf0?s=128&d=identicon&r=PG", "display_name": "hardillb", "link": "https://stackoverflow.com/users/504554/hardillb"}, "edited": false, "score": 1, "creation_date": 1430986369, "post_id": 30086019, "comment_id": 48302880, "body": "Your question really isn&#39;t that clear, please consider adding some more context"}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 4831932, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/pwXqg.jpg?s=128&g=1", "display_name": "Ouizzo", "link": "https://stackoverflow.com/users/4831932/ouizzo"}, "edited": false, "score": 0, "creation_date": 1431085589, "post_id": 30106525, "comment_id": 48355665, "body": "Hi! I have understand now what I want and that is to send data to my server,as you pointed out. But im stuck. Im using a broker to connect to from my cc3200 launchpad. And I (think I) get a connection to it,"}, {"owner": {"reputation": 5, "user_id": 4831932, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/pwXqg.jpg?s=128&g=1", "display_name": "Ouizzo", "link": "https://stackoverflow.com/users/4831932/ouizzo"}, "edited": false, "score": 0, "creation_date": 1431085594, "post_id": 30106525, "comment_id": 48355669, "body": "because the terminal winow for CCS (Tera term) dosent display any eror, as it does when I connect to the wrong IP or port. The thing is that the broker window dosent display any connection confirmation... Does anyone got any clues about that? I have enable the suport for websocket in the configuration properties file for HiveMQ broker so it listening on port 8000. Here is my socket connection code. Does anyone know if it is something wrong with it? \taddr.sin_family = SL_AF_INET; addr.sin_port = sl_Htons(8000); addr.sin_addr.s_addr = sl_Htonl(&quot;my network IP&quot;); /Thanks in advance!"}], "tags": [], "owner": {"reputation": 7, "user_id": 4875747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42351e14465fc78c800f802aa57743e0?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Hal", "link": "https://stackoverflow.com/users/4875747/eric-hal"}, "is_accepted": false, "score": 0, "last_activity_date": 1431015315, "creation_date": 1431015315, "answer_id": 30106525, "question_id": 30086019, "link": "https://stackoverflow.com/questions/30086019/do-i-have-to-connect-to-mqtt-broker/30106525#30106525", "title": "Do I have to connect to MQTT broker?", "body": "<p>DB and MQTT broker are totally serape, follow the next steps to get what you want:</p>\n\n<ol>\n<li>During the application start up connect to your mqtt broker.</li>\n<li>Subscribe to a topic that you are waiting your data on it.</li>\n<li>Connect to your database.</li>\n<li>in the call back function ( from step 2 ), use the database connection and update your database by the payload.</li>\n</ol>\n\n<p>To send data to your server do the following:</p>\n\n<ol>\n<li>Connect to your mqtt broker.</li>\n<li>Publish a message to your topic (from prev step 2).</li>\n</ol>\n"}], "owner": {"reputation": 5, "user_id": 4831932, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/pwXqg.jpg?s=128&g=1", "display_name": "Ouizzo", "link": "https://stackoverflow.com/users/4831932/ouizzo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 515, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1431015315, "creation_date": 1430941096, "last_edit_date": 1430986326, "question_id": 30086019, "link": "https://stackoverflow.com/questions/30086019/do-i-have-to-connect-to-mqtt-broker", "title": "Do I have to connect to MQTT broker?", "body": "<p>I'm trying to send data to my db (MySQL) with MQTT. But I cant get any information or just don't understand if I need to connect to my MQTT broker with my C-code first? Or if I just can put in my DB address and portnumber? \nConnection code down below.</p>\n\n<p>I'm using HiveMQ as broker.</p>\n\n<pre><code>    while(1){\n\nMQTTPacket_connectData data = MQTTPacket_connectData_initializer;\n        int rc = 0;\n        char buf[200];\n        MQTTString topicString = MQTTString_initializer;\n\n                char* payload = \"Hello World!\";\n                int payloadlen = strlen(payload);\n                int buflen = sizeof(buf);\n\n                data.clientID.cstring = \"me\";\n                data.keepAliveInterval = 20;\n                data.cleansession = 1;\n\n                int len = MQTTSerialize_connect(buf, buflen, &amp;data); /* 1 */\n\n                topicString.cstring = \"cc3200-ben\";\n\n                len += MQTTSerialize_publish(buf + len, buflen - len, 0, 0, 0, 0, topicString, payload, payloadlen); /* 2 */\n\n                len += MQTTSerialize_disconnect(buf + len, buflen - len); /* 3 */\n\n                // creating a TCP socket\n                int mysock = sl_Socket(SL_AF_INET, SL_SOCK_STREAM, 0);\n                  if( mysock &lt; 0 )\n                    {\n                      ERR_PRINT(mysock);\n                      LOOP_FOREVER();\n                    }\n\n                SlSockAddrIn_t addr;\n\n                //filling the TCP server socket address\n                addr.sin_family = SL_AF_INET;\n                addr.sin_port = sl_Htons(1883);\n                //addr.sin_port = sl_Htons(3306);\n                addr.sin_addr.s_addr = sl_Htonl(0xC6291EF1);\n\n                 // connecting to TCP server\n                rc = sl_Connect(mysock, (SlSockAddr_t *) &amp;addr, sizeof(addr));\n                if(rc&lt;0){\n                    ERR_PRINT(rc);\n                    LOOP_FOREVER();\n                }\n                 // sending packet\n                rc = sl_Send(mysock, buf, len, NULL);\n                if(rc&lt;0){\n                    ERR_PRINT(rc);\n                    LOOP_FOREVER();\n                }\n\n                //closing the socket\n                rc = sl_Close(mysock);\n                if(rc&lt;0){\n                    ERR_PRINT(rc);\n                    LOOP_FOREVER();\n                                    }\n\n        //      rc = Socket_new(\"0.0.0.0\", 1883, &amp;mysock);\n        //      rc = write(mysock, buf, len);\n        //      rc = close(mysock);\n\n                osi_Sleep(200);\n} \n</code></pre>\n"}, {"tags": ["c++", "c", "dry"], "comments": [{"owner": {"reputation": 7880, "user_id": 3006544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e73a1c6d75a879f829ec8aacd1859e61?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan J", "link": "https://stackoverflow.com/users/3006544/ryan-j"}, "edited": false, "score": 1, "creation_date": 1430941132, "post_id": 30085895, "comment_id": 48285151, "body": "See the second answer in <a href=\"http://stackoverflow.com/questions/4203010/how-to-initialize-member-struct-in-initializer-list-of-c-class\">this question</a>, it might help you do what you want."}, {"owner": {"reputation": 274, "user_id": 4852504, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9fZTb.jpg?s=128&g=1", "display_name": "Khaldor", "link": "https://stackoverflow.com/users/4852504/khaldor"}, "edited": false, "score": 0, "creation_date": 1430941408, "post_id": 30085895, "comment_id": 48285311, "body": "C or C++? And then, are you using va_args or how exactly do you pass the variables? Do you know how many you have? Or is it totally variable? I&#39;m guessing it is a fixed amount but could be wrong."}, {"owner": {"reputation": 929, "user_id": 1189243, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/447ac6ba6dc867442e3bf0b6efe0925a?s=128&d=identicon&r=PG&f=1", "display_name": "pvl", "link": "https://stackoverflow.com/users/1189243/pvl"}, "reply_to_user": {"reputation": 274, "user_id": 4852504, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9fZTb.jpg?s=128&g=1", "display_name": "Khaldor", "link": "https://stackoverflow.com/users/4852504/khaldor"}, "edited": false, "score": 0, "creation_date": 1430942146, "post_id": 30085895, "comment_id": 48285793, "body": "@Khaldor, yes, it<code>s fixed amount. But it</code>s can be changed some time! And I want to achive two goals: I want to operate with object, where I can(it`s much more comfortable) and I want to get compilation error, when something goes wrong(for example additional filed in object structure without function interface changing). Qusteion about C++, but I think that if there any solution for plain C it will works for C++ as well."}], "answers": [{"comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1430941111, "post_id": 30085985, "comment_id": 48285141, "body": "I think he is looking for the inverse. Given a <code>struct</code>, call a function using the members of the <code>struct</code>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1430941264, "post_id": 30085985, "comment_id": 48285220, "body": "@RSahu I think the OP wants to create the struct from the function <code>solution to init structure from function args</code>"}, {"owner": {"reputation": 5164, "user_id": 1872046, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/2GC1B.jpg?s=128&g=1", "display_name": "polkovnikov.ph", "link": "https://stackoverflow.com/users/1872046/polkovnikov-ph"}, "reply_to_user": {"reputation": 929, "user_id": 1189243, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/447ac6ba6dc867442e3bf0b6efe0925a?s=128&d=identicon&r=PG&f=1", "display_name": "pvl", "link": "https://stackoverflow.com/users/1189243/pvl"}, "edited": false, "score": 0, "creation_date": 1430941451, "post_id": 30085985, "comment_id": 48285341, "body": "@pvl I&#39;ve updated the post. Do you need an example of Boost Fusion usage?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1430941519, "post_id": 30085985, "comment_id": 48285386, "body": "@pvl so you also want to take all of the members of a struct and pass them as individual parameters to a function as well?"}, {"owner": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "edited": false, "score": 0, "creation_date": 1430941699, "post_id": 30085985, "comment_id": 48285503, "body": "Haha, BOOST_FUSION_ADAPT_STRUCT is basically a (slightly) prettier version of my solution :)"}, {"owner": {"reputation": 929, "user_id": 1189243, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/447ac6ba6dc867442e3bf0b6efe0925a?s=128&d=identicon&r=PG&f=1", "display_name": "pvl", "link": "https://stackoverflow.com/users/1189243/pvl"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1430941728, "post_id": 30085985, "comment_id": 48285525, "body": "@NathanOliver, yes, you are right. @polkovnikov.ph Thx. About &#39;further C++ versions&#39; - it<code>s just your guess or it</code>s officially already discussed somewhere?"}, {"owner": {"reputation": 5164, "user_id": 1872046, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/2GC1B.jpg?s=128&g=1", "display_name": "polkovnikov.ph", "link": "https://stackoverflow.com/users/1872046/polkovnikov-ph"}, "reply_to_user": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "edited": false, "score": 0, "creation_date": 1430941831, "post_id": 30085985, "comment_id": 48285584, "body": "@nneonneo That&#39;s exactly the reason why I&#39;ve upvoted your answer :)"}, {"owner": {"reputation": 5164, "user_id": 1872046, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/2GC1B.jpg?s=128&g=1", "display_name": "polkovnikov.ph", "link": "https://stackoverflow.com/users/1872046/polkovnikov-ph"}, "reply_to_user": {"reputation": 929, "user_id": 1189243, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/447ac6ba6dc867442e3bf0b6efe0925a?s=128&d=identicon&r=PG&f=1", "display_name": "pvl", "link": "https://stackoverflow.com/users/1189243/pvl"}, "edited": false, "score": 1, "creation_date": 1430941932, "post_id": 30085985, "comment_id": 48285645, "body": "@pvl Yes, there&#39;s a mailing lists on several language proposals, and if I remember it right, it&#39;s called <code>SG7</code>. (Edit: <a href=\"https://groups.google.com/a/isocpp.org/forum/?fromgroups#!forum/reflection\" rel=\"nofollow noreferrer\">groups.google.com/a/isocpp.org/forum/?fromgroups#!forum/&hellip;</a>)."}], "tags": [], "owner": {"reputation": 5164, "user_id": 1872046, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/2GC1B.jpg?s=128&g=1", "display_name": "polkovnikov.ph", "link": "https://stackoverflow.com/users/1872046/polkovnikov-ph"}, "is_accepted": true, "score": 3, "last_activity_date": 1430941573, "last_edit_date": 1430941573, "creation_date": 1430940976, "answer_id": 30085985, "question_id": 30085895, "link": "https://stackoverflow.com/questions/30085895/the-best-way-to-split-struct-into-function-argument-list/30085985#30085985", "title": "The best way to split struct into function argument list", "body": "<p>Sure, but that's C++11.</p>\n\n<pre><code>struct xy {\n    int x, y;\n};\n\ntemplate &lt;class... T&gt;\nxy f(T... args) {\n    return xy{args...};\n}\n\nint main() {\n    xy a = f(1, 2);\n    cout &lt;&lt; a.y &lt;&lt; endl;\n}\n</code></pre>\n\n<p><a href=\"http://ideone.com/JS2nQK\" rel=\"nofollow\">Live example.</a></p>\n\n<p>By \"sending structure into function\" it seems you meant you'd like to get each field from a structure in the order they've been declared and call a function with them as arguments. Sorry, but there's no pretty way to do that, because that requires <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3814.html\" rel=\"nofollow\">compile-time reflection</a>, which is a subject to addition in further C++ versions, but the syntax is not even clear yet.</p>\n\n<p>If you can use <code>tuple</code>s instead of structures, it's easy though.</p>\n\n<p>There's a not very much pretty way to do this if you absolutely need to. There's a Boost Fusion library. It allows adding reflection to <a href=\"http://www.boost.org/doc/libs/1_46_1/libs/fusion/doc/html/fusion/adapted/adapt_struct.html\" rel=\"nofollow\">structures</a> via macros, so that it's possible to convert them to tuples.</p>\n"}, {"comments": [{"owner": {"reputation": 929, "user_id": 1189243, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/447ac6ba6dc867442e3bf0b6efe0925a?s=128&d=identicon&r=PG&f=1", "display_name": "pvl", "link": "https://stackoverflow.com/users/1189243/pvl"}, "edited": false, "score": 0, "creation_date": 1430941257, "post_id": 30086029, "comment_id": 48285215, "body": "OMG. Sorry, but that it isn`t pretty"}, {"owner": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "reply_to_user": {"reputation": 929, "user_id": 1189243, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/447ac6ba6dc867442e3bf0b6efe0925a?s=128&d=identicon&r=PG&f=1", "display_name": "pvl", "link": "https://stackoverflow.com/users/1189243/pvl"}, "edited": false, "score": 1, "creation_date": 1430941363, "post_id": 30086029, "comment_id": 48285280, "body": "Hey, I told you it wasn&#39;t pretty. But C++ doesn&#39;t have very strong introspection skills - I&#39;m pretty sure you cannot explode a struct into individual function arguments with the template system alone."}, {"owner": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "reply_to_user": {"reputation": 929, "user_id": 1189243, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/447ac6ba6dc867442e3bf0b6efe0925a?s=128&d=identicon&r=PG&f=1", "display_name": "pvl", "link": "https://stackoverflow.com/users/1189243/pvl"}, "edited": false, "score": 0, "creation_date": 1430941458, "post_id": 30086029, "comment_id": 48285349, "body": "...but, it does work, and you can probably define yourself some more macros to make it prettier :P"}, {"owner": {"reputation": 5164, "user_id": 1872046, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/2GC1B.jpg?s=128&g=1", "display_name": "polkovnikov.ph", "link": "https://stackoverflow.com/users/1872046/polkovnikov-ph"}, "edited": false, "score": 0, "creation_date": 1430941791, "post_id": 30086029, "comment_id": 48285558, "body": "Actually this IS a a prettiest solution to the problem (modulo the existence of some libraries that will help you avoid some boilerplate)."}], "tags": [], "owner": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "is_accepted": false, "score": 3, "last_activity_date": 1430941296, "last_edit_date": 1430941296, "creation_date": 1430941121, "answer_id": 30086029, "question_id": 30085895, "link": "https://stackoverflow.com/questions/30085895/the-best-way-to-split-struct-into-function-argument-list/30086029#30086029", "title": "The best way to split struct into function argument list", "body": "<p>You can do it with macros. It's definitely not pretty, but it is highly compatible (works in C, C++03, etc.):</p>\n\n<p>In header file <code>args.h</code>:</p>\n\n<pre><code>#define ARGS_STRUCT ARG(int, arg1) SEP ARG(char *, arg2) SEP ARG(void *, arg3)\n#undef ARG\n#undef SEP\n</code></pre>\n\n<p>You can declare the struct as</p>\n\n<pre><code>struct Args {\n    #define ARG(type, name) type name\n    #define SEP ;\n    #include \"args.h\"\n};\n</code></pre>\n\n<p>and the function as</p>\n\n<pre><code>int func(\n    #define ARG(type, name) type name\n    #define SEP ,\n    #include \"args.h\"\n);\n</code></pre>\n\n<p>initialize the struct with</p>\n\n<pre><code>struct Args args = {\n    #define ARG(type, name) name\n    #define SEP ,\n    #include \"args.h\"\n};\n</code></pre>\n\n<p>pass in args with</p>\n\n<pre><code>struct Args args;\nfunc(\n    #define ARG(type, name) args.name\n    #define SEP ,\n    #include \"args.h\"\n);\n</code></pre>\n\n<p>Tested, no problems with Clang and Clang++ (both 6.1).</p>\n"}], "owner": {"reputation": 929, "user_id": 1189243, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/447ac6ba6dc867442e3bf0b6efe0925a?s=128&d=identicon&r=PG&f=1", "display_name": "pvl", "link": "https://stackoverflow.com/users/1189243/pvl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 906, "favorite_count": 0, "accepted_answer_id": 30085985, "answer_count": 2, "score": 4, "last_activity_date": 1430942826, "creation_date": 1430940700, "question_id": 30085895, "link": "https://stackoverflow.com/questions/30085895/the-best-way-to-split-struct-into-function-argument-list", "title": "The best way to split struct into function argument list", "body": "<p>I have function like:</p>\n\n<pre><code>void funcName(arg1, arg2, arg3[ = someDefault], ... , argN)\n</code></pre>\n\n<p>And I have a struct like</p>\n\n<pre><code>struct Args\n{\n    arg1;\n    ...\n    argN;\n}\n</code></pre>\n\n<p>Is there any DRY and pretty solution to init structure from function args and to send structure into function if I can`t change function signature?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1430939623, "post_id": 30085488, "comment_id": 48284259, "body": "In general, a function should only return something simple: a float, an int or a pointer.  In this case you should pass in a pointer to the struct minmax as an argument and not have a return value."}, {"owner": {"reputation": 13, "user_id": 3104462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06392c08fa7be5b346642f4003855d2a?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/3104462/max"}, "edited": false, "score": 0, "creation_date": 1430939791, "post_id": 30085488, "comment_id": 48284352, "body": "Yes i did it with pointers but i was testing other ways of returning multiple values from a function"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 1, "creation_date": 1430940317, "post_id": 30085488, "comment_id": 48284693, "body": "Returning a small structure like this is a great way to make a function that returns multiple values, and you&#39;re doing it exactly right, except for the <code>&lt;=</code> bug."}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 17586, "user_id": 3482140, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/lSFth.jpg?s=128&g=1", "display_name": "Am_I_Helpful", "link": "https://stackoverflow.com/users/3482140/am-i-helpful"}, "edited": false, "score": 3, "creation_date": 1430939390, "post_id": 30085517, "comment_id": 48284105, "body": "@shekharsuman: Why is that?"}, {"owner": {"reputation": 13, "user_id": 3104462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06392c08fa7be5b346642f4003855d2a?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/3104462/max"}, "edited": false, "score": 0, "creation_date": 1430939595, "post_id": 30085517, "comment_id": 48284236, "body": "Omg thank you so much didnt even notice that.I even did a step by step debug and didnt notice :(."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 17586, "user_id": 3482140, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/lSFth.jpg?s=128&g=1", "display_name": "Am_I_Helpful", "link": "https://stackoverflow.com/users/3482140/am-i-helpful"}, "edited": false, "score": 4, "creation_date": 1430939862, "post_id": 30085517, "comment_id": 48284405, "body": "@shekharsuman: I go by the Stack Exchange model, not by Shekhar&#39;s made-up rules. This is the answer to the question, therefore I posted it as an answer. Answering questions in the comments section is <i>bad</i> and <i>wrong</i>; unfortunately, it&#39;s a trend on the rise. It&#39;s a Q&amp;A not a Q&amp;C."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 42694, "user_id": 1175077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AWgLI.jpg?s=128&g=1", "display_name": "jpw", "link": "https://stackoverflow.com/users/1175077/jpw"}, "edited": false, "score": 1, "creation_date": 1430940066, "post_id": 30085517, "comment_id": 48284531, "body": "@jpw: There are over five minutes between my answer being posted and your comment being posted."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 17586, "user_id": 3482140, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/lSFth.jpg?s=128&g=1", "display_name": "Am_I_Helpful", "link": "https://stackoverflow.com/users/3482140/am-i-helpful"}, "edited": false, "score": 1, "creation_date": 1430940622, "post_id": 30085517, "comment_id": 48284887, "body": "@shekharsuman one man&#39;s triviality is another man&#39;s significance. There are a <i>lot</i> of people reading this site who make mistakes in end conditions."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 8, "last_activity_date": 1430939243, "creation_date": 1430939243, "answer_id": 30085517, "question_id": 30085488, "link": "https://stackoverflow.com/questions/30085488/function-that-returns-more-than-one-thing/30085517#30085517", "title": "Function that returns more than one thing", "body": "<pre><code>for(i = 0;i&lt;=3;i++){\n//        ^^^^\n</code></pre>\n\n<p>You loop four times.</p>\n\n<p>Over an array that has three elements.</p>\n"}, {"comments": [{"owner": {"reputation": 3540, "user_id": 4182275, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sF9cb.png?s=128&g=1", "display_name": "NikolayK", "link": "https://stackoverflow.com/users/4182275/nikolayk"}, "edited": false, "score": 0, "creation_date": 1430940641, "post_id": 30085676, "comment_id": 48284904, "body": "You&#39;re wrong, when you declare function like <code>void foo(int array[])</code> it&#39;s almost the same as pass pointer <code>void foo(int* array)</code>. Thus <code>sizeof</code> will return size of a pointer, not array. See on <a href=\"http://ideone.com/birncE\" rel=\"nofollow noreferrer\">ideone</a>."}], "tags": [], "owner": {"reputation": 9, "user_id": 4872045, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cfKYINgAW70/AAAAAAAAAAI/AAAAAAAAAJ4/d9g9lrigBCI/photo.jpg?sz=128", "display_name": "Lairson Barreto", "link": "https://stackoverflow.com/users/4872045/lairson-barreto"}, "is_accepted": false, "score": 0, "last_activity_date": 1430939808, "creation_date": 1430939808, "answer_id": 30085676, "question_id": 30085488, "link": "https://stackoverflow.com/questions/30085488/function-that-returns-more-than-one-thing/30085676#30085676", "title": "Function that returns more than one thing", "body": "<pre><code>sizeof\n</code></pre>\n\n<p>To a proper resolution you should use the above to get the exact size of the array to use instead of i&lt;=3.</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1430941406, "last_edit_date": 1430941406, "creation_date": 1430940897, "answer_id": 30085958, "question_id": 30085488, "link": "https://stackoverflow.com/questions/30085488/function-that-returns-more-than-one-thing/30085958#30085958", "title": "Function that returns more than one thing", "body": "<p>You are using an incorrect range of indices. As the original array has only 3 elements then the valid range of indices is <code>[0, 2]</code>. Thus in the loop within the function</p>\n\n<pre><code>for(i = 0; i&lt;=3; i++) {\n</code></pre>\n\n<p>you are trying to access memory beyond the array when i is equal to 3.</p>\n\n<p>But in any case the function design is not good. It uses magic number 3. So it can be applied only to arrays of three elements. Also you can not determine which element is the minimum and which element is the maximum.</p>\n\n<p>The better approach is the following</p>\n\n<pre><code>typedef struct minmax \n{\n    size_t min;\n    size_t max;\n} minmax_t;\n\nminmax_t minmax_element( const int a[], size_t n ) \n{\n    minmax_t result = { 0, 0 };\n\n    for ( size_t i = 0; i &lt; n; i++ ) \n    {\n        if ( a[i] &lt; a[result.min] )\n        {\n            result.min = i;\n        }\n        else if ( a[result.max] &lt; a[i] ) \n        {\n            result.max = i;\n        }\n    }\n\n    return result;\n}\n</code></pre>\n\n<p>And in main the function can be called the following way</p>\n\n<pre><code>int main()\n{\n    int a[] = { 7, 8, 3 };\n    minmax_t something;\n\n    something  = minmax_element( a, sizeof( a ) / sizeof( *a ) );\n\n    printf( \"Minimum is %d and max is %d\\n\", a[something.min], a[something.max] );\n\n    int b[] = { 7, 8, 3, 0, 1, 5, 9 };\n\n    something  = minmax_element( b, sizeof( b ) / sizeof( *b ) );\n\n    printf( \"Minimum is %d and max is %d\\n\", b[something.min], b[something.max] );\n}\n</code></pre>\n\n<p>Take into account that in C++ there is corresponding algorithm <code>std::minmax_element</code> declared in header <code>&lt;algorithm&gt;</code> It returns a pair of pointers (iterators) of the first minimum element and the last maximum element. You can change the function that I have showed such a way that it will also return the index of the last maximum element in an array instead of the first maximum element.</p>\n"}], "owner": {"reputation": 13, "user_id": 3104462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06392c08fa7be5b346642f4003855d2a?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/3104462/max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "closed_date": 1430963506, "answer_count": 3, "score": -2, "last_activity_date": 1430941406, "creation_date": 1430939155, "last_edit_date": 1430939291, "question_id": 30085488, "link": "https://stackoverflow.com/questions/30085488/function-that-returns-more-than-one-thing", "closed_reason": "Not suitable for this site", "title": "Function that returns more than one thing", "body": "<p>I'm currently learning C, and I'm trying to make a function that returns more that one thing. I've written the code but one of the values is not giving me the right output and I cant figure out why it does that.</p>\n\n<pre><code>struct num {\n    int min;\n    int max;\n};\n\nstruct num Some(int Array[]) {\n    int i;\n    struct num result;\n    result.max = Array[0];\n    result.min = Array[0];\n    for(i = 0; i&lt;=3; i++) {\n        if(result.min &gt; Array[i]) {\n            result.min = Array[i];\n        } else if(result.max &lt; Array[i]) {\n            result.max = Array[i];\n        }\n    }\n    return result;\n}\n\nint main()\n{\n    int Array[] = {7,8,3};\n    struct num something;\n    something  = Some(Array);\n    printf(\"Total is %d and max is %d\",something.min,something.max);\n}\n</code></pre>\n\n<p>The program prints the correct minimum value of the array but the max value it gives 4200784.</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 11406, "user_id": 282614, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9cd35c711e222946f9503628827a32ce?s=128&d=identicon&r=PG", "display_name": "Dacav", "link": "https://stackoverflow.com/users/282614/dacav"}, "edited": false, "score": 0, "creation_date": 1430939212, "post_id": 30085465, "comment_id": 48283984, "body": "Why are you allocating a pointer in <code>newFoo</code>? I think you want to allocate a <code>foo</code> struct instead, as in <code>malloc(sizeof(foo))</code>."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1430939245, "post_id": 30085465, "comment_id": 48284011, "body": "Almost none of this code actually makes sense"}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1430939283, "post_id": 30085465, "comment_id": 48284034, "body": "Do: <code>free(fooArray);</code>. <code>free()</code> expects a pointer returned by malloc family functions. Am not sure what your intention is with all those assignments...If that&#39;s exactly what you code looks like then you have many more issues..."}, {"owner": {"reputation": 745, "user_id": 1381663, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/9128aa6c73f98b47b173903dae62aa67?s=128&d=identicon&r=PG", "display_name": "Lee", "link": "https://stackoverflow.com/users/1381663/lee"}, "edited": false, "score": 0, "creation_date": 1430939957, "post_id": 30085465, "comment_id": 48284454, "body": "I am trying to save an array of foo struct and then I want to free each of its elements. The code does save an array of structs."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1430940509, "post_id": 30085465, "comment_id": 48284805, "body": "You can only free what you&#39;ve allocated. If you allocated the whole array, you must free the whole array. You cannot choose to free things individually unless you allocated them individually. 1 malloc, 1 free, no exceptions."}, {"owner": {"reputation": 745, "user_id": 1381663, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/9128aa6c73f98b47b173903dae62aa67?s=128&d=identicon&r=PG", "display_name": "Lee", "link": "https://stackoverflow.com/users/1381663/lee"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1430940573, "post_id": 30085465, "comment_id": 48284849, "body": "@LeeDanielCrocker So how can I free newFoo, if I only have fooArray?"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1430940665, "post_id": 30085465, "comment_id": 48284916, "body": "You did <code>newFoo = malloc()...</code>, so <code>free(newFoo)</code>."}, {"owner": {"reputation": 745, "user_id": 1381663, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/9128aa6c73f98b47b173903dae62aa67?s=128&d=identicon&r=PG", "display_name": "Lee", "link": "https://stackoverflow.com/users/1381663/lee"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1430940882, "post_id": 30085465, "comment_id": 48285032, "body": "@LeeDanielCrocker I don&#39;t have newFoo, I only have fooArray..Is fooArray[0]=NULL enough?"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1430946647, "post_id": 30085465, "comment_id": 48288414, "body": "No! You allocated it with <code>fooArray = malloc()...</code>, so you have to free it with <code>free(fooArray)</code>. You CANNOT free less than you allocated. If you need to free the elements of fooArray idividually, then you must allocate them individually. 1 malloc, 1 free, no exceptions."}], "answers": [{"comments": [{"owner": {"reputation": 745, "user_id": 1381663, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/9128aa6c73f98b47b173903dae62aa67?s=128&d=identicon&r=PG", "display_name": "Lee", "link": "https://stackoverflow.com/users/1381663/lee"}, "edited": false, "score": 0, "creation_date": 1430939842, "post_id": 30085565, "comment_id": 48284392, "body": "Actually it does work for me as I wrote..it saves an array of foo&#39;s without **"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 745, "user_id": 1381663, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/9128aa6c73f98b47b173903dae62aa67?s=128&d=identicon&r=PG", "display_name": "Lee", "link": "https://stackoverflow.com/users/1381663/lee"}, "edited": false, "score": 0, "creation_date": 1430940005, "post_id": 30085565, "comment_id": 48284487, "body": "@Lee  As I wrote your code is invalid. You should decide whether you want to create an array of 5 pointers to objects of the structure or an array of 5 objects of the structure."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 4, "last_activity_date": 1430939380, "creation_date": 1430939380, "answer_id": 30085565, "question_id": 30085465, "link": "https://stackoverflow.com/questions/30085465/freeing-a-struct-array-in-c/30085565#30085565", "title": "Freeing a struct array in C", "body": "<p>First of all this code</p>\n\n<pre><code>struct foo* fooArray= malloc(sizeof(*fooArray)*5);\nstruct foo* newFoo = malloc(sizeof(*newFoo));\nfooArray[0]=*newFoo;\nstruct foo* newFoo2 = malloc(sizeof(*newFoo2));\nfooArray[1]=*newFoo2;\n</code></pre>\n\n<p>is invalid.</p>\n\n<p>I think you mean the following</p>\n\n<pre><code>struct foo** fooArray= malloc(sizeof(*fooArray)*5);\nstruct foo* newFoo = malloc(sizeof(newFoo));\nfooArray[0]=newFoo;\nstruct foo* newFoo2 = malloc(sizeof(newFoo2));\nfooArray[1]=newFoo2;\n</code></pre>\n\n<p>To free only these two allocated elements newFoo and new Foo2 you can write for example</p>\n\n<pre><code>free( fooArray[0] );\nfree( fooArray[1] );\n\nfooArray[0] = NULL;\nfooArray[1] = NULL;\n</code></pre>\n\n<p>If you want also to free the entire array then you can write</p>\n\n<pre><code>free( fooArray[0] );\nfree( fooArray[1] );\n\nfree( fooArray );\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1557, "user_id": 1419731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3e723bda4ce4348e51731245cc6ff7?s=128&d=identicon&r=PG", "display_name": "Joshua Clayton", "link": "https://stackoverflow.com/users/1419731/joshua-clayton"}, "is_accepted": false, "score": 1, "last_activity_date": 1430946012, "last_edit_date": 1495541196, "creation_date": 1430942462, "answer_id": 30086428, "question_id": 30085465, "link": "https://stackoverflow.com/questions/30085465/freeing-a-struct-array-in-c/30086428#30086428", "title": "Freeing a struct array in C", "body": "<pre><code>struct foo* fooArray= malloc(sizeof(*fooArray)*5);\n</code></pre>\n\n<p>when you allocate fooArray, you allocate ONE buffer of\nsize 5 times a struct foo. If you want to hold 5 struct foo's, you are good, but you don't have to malloc the array members:</p>\n\n<pre><code>struct foo* newFoo = fooArray\nstruct foo* newFoo2 = fooArray + 1;\nstruct foo* newFoo3 = &amp;fooArray[2]; /* array notation */\n</code></pre>\n\n<p>..and you can only free them all at once</p>\n\n<pre><code>free(fooArray);\n</code></pre>\n\n<p>BUT...</p>\n\n<p>If you want a set of 5 pointers The size is wrong,\nand the data type on the left is wrong.</p>\n\n<pre><code>struct foo* fooArray= malloc(sizeof(*fooArray)*5);\n</code></pre>\n\n<p>should read:</p>\n\n<pre><code>struct foo** fooArray = malloc(sizeof(struct foo*) * 5);\n</code></pre>\n\n<p>It is a pointer to 5 pointers.\nThen your array notation can work for allocation and freeing.</p>\n\n<pre><code>fooArray[0] = malloc(sizeof struct foo);\nfree(fooArray[0]);\n</code></pre>\n\n<p>BTW, if you want an \"array\" to grow and shrink dynamically, you don't wan't an array. you want a <a href=\"https://stackoverflow.com/questions/973654/single-linked-list\">Single linked list</a></p>\n\n<p>Just include a (struct foo*) pointer in struct foo and you can do away with fooArray.</p>\n"}], "owner": {"reputation": 745, "user_id": 1381663, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/9128aa6c73f98b47b173903dae62aa67?s=128&d=identicon&r=PG", "display_name": "Lee", "link": "https://stackoverflow.com/users/1381663/lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1430946012, "creation_date": 1430939087, "question_id": 30085465, "link": "https://stackoverflow.com/questions/30085465/freeing-a-struct-array-in-c", "title": "Freeing a struct array in C", "body": "<p>I looked for something like this before I posted this post and couldn't find..</p>\n\n<p>I have: </p>\n\n<pre class=\"lang-c prettyprint-override\"><code>struct foo* fooArray= malloc(sizeof(*fooArray)*5);\nstruct foo* newFoo = malloc(sizeof(*newFoo));\nfooArray[0]=*newFoo;\nstruct foo* newFoo2 = malloc(sizeof(*newFoo2));\nfooArray[1]=*newFoo2;\n</code></pre>\n\n<p>How do I free each of the elements in fooArray?\n</p>\n\n<pre><code>free(&amp;fooArray[0]); // Gives me error\nfree(fooArray[0]); // Doesn't compile\n</code></pre>\n"}, {"tags": ["c", "gradle", "native"], "answers": [{"tags": [], "owner": {"reputation": 417, "user_id": 1725688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83b99b6a51c70e7effa58cbc3d51cc25?s=128&d=identicon&r=PG", "display_name": "Ben Navetta", "link": "https://stackoverflow.com/users/1725688/ben-navetta"}, "is_accepted": true, "score": 3, "last_activity_date": 1430939811, "creation_date": 1430939811, "answer_id": 30085678, "question_id": 30085328, "link": "https://stackoverflow.com/questions/30085328/gradle-c-native-plugin-directory-structure-platforms-and-flavors/30085678#30085678", "title": "Gradle C/Native Plugin: Directory Structure, Platforms and Flavors", "body": "<p>The convention for native binaries in Gradle is to put headers in <code>src/{componentName}/headers</code> and C source files in <code>src/{componentName}/c</code>, where <code>componentName</code> would be whatever you name the component (given the question, I'm guessing that would be <code>helloworld</code>, but it depends on how you declare it). Flavors are for different variants of the build, like if you wanted to build versions with different features compiled. Compiling for different targets like x86 Linux and 64-bit Windows would be done just with platforms, like this:</p>\n\n<pre><code>model {\n    platforms {\n        linux32 {\n            architecture \"x86\"\n            operatingSystem \"linux\"\n        }\n        win64 {\n            architecture \"x86_64\"\n            operatingSystem \"windows\"\n        }\n    }\n}\n</code></pre>\n\n<p>I'm assuming you're using Gradle 2.3, but things have changed a lot over the past couple of releases.</p>\n"}], "owner": {"reputation": 22197, "user_id": 4009451, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d4d0917cf3785fd7bc9e95abeb1bcd1d?s=128&d=identicon&r=PG&f=1", "display_name": "smeeb", "link": "https://stackoverflow.com/users/4009451/smeeb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 358, "favorite_count": 0, "accepted_answer_id": 30085678, "answer_count": 1, "score": 2, "last_activity_date": 1430939811, "creation_date": 1430938624, "last_edit_date": 1430939319, "question_id": 30085328, "link": "https://stackoverflow.com/questions/30085328/gradle-c-native-plugin-directory-structure-platforms-and-flavors", "title": "Gradle C/Native Plugin: Directory Structure, Platforms and Flavors", "body": "<p>I have a simple C program (<code>helloworld</code>) compiling and building on my Windows 7 machine (via MinGW) using Make. I would now like to switch my build system to use Gradle (personal reasons, no disrespect to Make!) and am trying to wrap my brain around the <a href=\"https://gradle.org/docs/current/userguide/nativeBinaries.html\" rel=\"nofollow\">Gradle Native Plugins</a> (and really, the C plugin).</p>\n\n<p>I have two specific concerns:</p>\n\n<ul>\n<li>Does the C plugin require a certain project directory structure like most other Gradle plugins do? In the C plugin's docs, I see several instances of a source folder named <code>src/main/headers</code>. In Java-land, Gradle by default expects you to have, say, <code>src/main/java</code> and <code>src/main/resources</code>, to function properly etc. If the same is true of the C plugin, <strong>what is this required/recommended directory structure for a C program?</strong></li>\n<li>I understand the documentation's explanation of platforms, but flavors flew right over my head; and using platforms and flavors <em>together</em> is an even bigger mystery. Say I want to define one build variant to support Linux on x86 architecture, and another variant to support 64-bit Windows. What's an example of a platform/flavor combo that would achieve these variants?</li>\n</ul>\n"}, {"tags": ["c", "mpi"], "comments": [{"owner": {"reputation": 3993, "user_id": 125405, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/71e57d309c0a11cc78732e82e3486f3e?s=128&d=identicon&r=PG", "display_name": "wolfPack88", "link": "https://stackoverflow.com/users/125405/wolfpack88"}, "edited": false, "score": 0, "creation_date": 1430938324, "post_id": 30085165, "comment_id": 48283432, "body": "There are several different ways to do this and outlining different methods is likely too broad a topic for SO."}, {"owner": {"reputation": 4724, "user_id": 1024740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1037d544b43c71c34225fac55e0c7750?s=128&d=identicon&r=PG", "display_name": "Rob Latham", "link": "https://stackoverflow.com/users/1024740/rob-latham"}, "edited": false, "score": 0, "creation_date": 1431115554, "post_id": 30085165, "comment_id": 48374008, "body": "sounds like <a href=\"http://stackoverflow.com/questions/15658145/how-to-share-work-roughly-evenly-between-processes-in-mpi-despite-the-array-size/19322881#19322881\" title=\"how to share work roughly evenly between processes in mpi despite the array size\">stackoverflow.com/questions/15658145/&hellip;</a> ?"}, {"owner": {"reputation": 15, "user_id": 4871922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe093318faaa1dcb59dc0764ab667799?s=128&d=identicon&r=PG&f=1", "display_name": "Delachiesa", "link": "https://stackoverflow.com/users/4871922/delachiesa"}, "edited": false, "score": 0, "creation_date": 1431188461, "post_id": 30085165, "comment_id": 48393111, "body": "Actually thats a very interesting thread, thanks for the info."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 4871922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe093318faaa1dcb59dc0764ab667799?s=128&d=identicon&r=PG&f=1", "display_name": "Delachiesa", "link": "https://stackoverflow.com/users/4871922/delachiesa"}, "edited": false, "score": 0, "creation_date": 1430938483, "post_id": 30085235, "comment_id": 48283539, "body": "Exactly, some of them will at most have 1 more row than the others, the problem is that the rows i give to them have to be consecutive so i have to give them all the work at once."}, {"owner": {"reputation": 6975, "user_id": 274579, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/745415fffcdea46caf03c90534a4c7fa?s=128&d=identicon&r=PG", "display_name": "ysap", "link": "https://stackoverflow.com/users/274579/ysap"}, "reply_to_user": {"reputation": 15, "user_id": 4871922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe093318faaa1dcb59dc0764ab667799?s=128&d=identicon&r=PG&f=1", "display_name": "Delachiesa", "link": "https://stackoverflow.com/users/4871922/delachiesa"}, "edited": false, "score": 0, "creation_date": 1430939163, "post_id": 30085235, "comment_id": 48283956, "body": "So, procs 1 to N get (Q+1) rows and procs (N+1) to M get Q rows (where M: total number of procs; Q: the integral part of the division of rows by M)."}, {"owner": {"reputation": 6975, "user_id": 274579, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/745415fffcdea46caf03c90534a4c7fa?s=128&d=identicon&r=PG", "display_name": "ysap", "link": "https://stackoverflow.com/users/274579/ysap"}, "reply_to_user": {"reputation": 15, "user_id": 4871922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe093318faaa1dcb59dc0764ab667799?s=128&d=identicon&r=PG&f=1", "display_name": "Delachiesa", "link": "https://stackoverflow.com/users/4871922/delachiesa"}, "edited": false, "score": 0, "creation_date": 1430939349, "post_id": 30085235, "comment_id": 48284075, "body": "For example, 22 rows and 5 processes: M = 22; Q = 22 / 5 = 4; N = 22 % 5 = 2; Rows = {5, 5, 4, 4, 4}"}, {"owner": {"reputation": 15, "user_id": 4871922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe093318faaa1dcb59dc0764ab667799?s=128&d=identicon&r=PG&f=1", "display_name": "Delachiesa", "link": "https://stackoverflow.com/users/4871922/delachiesa"}, "edited": false, "score": 0, "creation_date": 1430940078, "post_id": 30085235, "comment_id": 48284541, "body": "Ok, i undestand that now thanks, but i might be missapproaching it... lets say process 0 ends in Q+1, process 1 will start in my_id + Q so how do i deal with that? i might be going nuts... what im trying to figure out now is the structure of the code to deal with that..."}, {"owner": {"reputation": 15, "user_id": 4871922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe093318faaa1dcb59dc0764ab667799?s=128&d=identicon&r=PG&f=1", "display_name": "Delachiesa", "link": "https://stackoverflow.com/users/4871922/delachiesa"}, "edited": false, "score": 0, "creation_date": 1430941545, "post_id": 30085235, "comment_id": 48285408, "body": "each process has an id to indetify them i just call it my_id, sorry im pretty new at this (programming + posting here)"}, {"owner": {"reputation": 6975, "user_id": 274579, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/745415fffcdea46caf03c90534a4c7fa?s=128&d=identicon&r=PG", "display_name": "ysap", "link": "https://stackoverflow.com/users/274579/ysap"}, "edited": false, "score": 0, "creation_date": 1430942086, "post_id": 30085235, "comment_id": 48285752, "body": "Because the number of rows in each process is not a constant, you need to change the start and end row indices in your <code>for</code> loop according to the non-equal division. You could, for example, use an array to store the pre-calculated start and end rows, and index this array with <code>my_id</code>. Or, you can try to parametrize the start and end rows inline."}, {"owner": {"reputation": 6975, "user_id": 274579, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/745415fffcdea46caf03c90534a4c7fa?s=128&d=identicon&r=PG", "display_name": "ysap", "link": "https://stackoverflow.com/users/274579/ysap"}, "edited": false, "score": 0, "creation_date": 1430942221, "post_id": 30085235, "comment_id": 48285845, "body": "Can you come up with a simple function for the number of rows per <code>my_id</code>?"}, {"owner": {"reputation": 15, "user_id": 4871922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe093318faaa1dcb59dc0764ab667799?s=128&d=identicon&r=PG&f=1", "display_name": "Delachiesa", "link": "https://stackoverflow.com/users/4871922/delachiesa"}, "edited": false, "score": 0, "creation_date": 1430942355, "post_id": 30085235, "comment_id": 48285933, "body": "I think i might, im not sure tho, i&#39;ve beeng thinking about it for a while and nothing came up, if you could put an example i would be more than gratefull"}, {"owner": {"reputation": 6975, "user_id": 274579, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/745415fffcdea46caf03c90534a4c7fa?s=128&d=identicon&r=PG", "display_name": "ysap", "link": "https://stackoverflow.com/users/274579/ysap"}, "edited": false, "score": 0, "creation_date": 1430942432, "post_id": 30085235, "comment_id": 48285991, "body": "Since it is your 1st post in SE, please make sure you read the FAQ, and if an answer helps you solve your problem, it is usually a good practice to upvote and/or accept it."}], "tags": [], "owner": {"reputation": 6975, "user_id": 274579, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/745415fffcdea46caf03c90534a4c7fa?s=128&d=identicon&r=PG", "display_name": "ysap", "link": "https://stackoverflow.com/users/274579/ysap"}, "is_accepted": true, "score": 1, "last_activity_date": 1430942969, "last_edit_date": 1430942969, "creation_date": 1430938345, "answer_id": 30085235, "question_id": 30085165, "link": "https://stackoverflow.com/questions/30085165/distributing-a-task-in-almost-equal-parts-between-processes/30085235#30085235", "title": "Distributing a task in almost equal parts between processes", "body": "<p>Obviously, some of the processes will contain more rows than the others. Just spread the remaining N rows (\"leftovers\") across the first N processes.</p>\n\n<p>Update:</p>\n\n<p>For example:</p>\n\n<pre><code>M = 22 rows\nP = 5 processes\nQ = M / P = 22 / 5 = 4\nN = M - Q * P = 22 % 5 = 2\n\nproc #0 - 5 rows\nproc #1 - 5 rows\nproc #2 - 4 rows\nproc #3 - 4 rows\nproc #4 - 4 rows\n</code></pre>\n\n<p>Update 2:</p>\n\n<p>A function that gets number of rows, start row in a process:</p>\n\n<pre><code>// my_id = 0 -&gt; (P-1)\nR = (my_id &lt; N) ? (M / P + 1) : (M / P);\nS = (my_id &lt; N) ? (my_id * R) : (my_id * R + N);\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 4871922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe093318faaa1dcb59dc0764ab667799?s=128&d=identicon&r=PG&f=1", "display_name": "Delachiesa", "link": "https://stackoverflow.com/users/4871922/delachiesa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 30085235, "answer_count": 1, "score": 0, "last_activity_date": 1430942969, "creation_date": 1430938134, "last_edit_date": 1430941341, "question_id": 30085165, "link": "https://stackoverflow.com/questions/30085165/distributing-a-task-in-almost-equal-parts-between-processes", "title": "Distributing a task in almost equal parts between processes", "body": "<p>im trying to distribute the rows of a matrix as evenly as possible between a certain amount of processes to do a certain task, the thing is that given the fact that the division might not be exact i cannot figure out how to distribute these rows, even tho its pretty easy to do it when we assume the division is equal. So the problem would be something like this:</p>\n\n<p>(assuming exact division):</p>\n\n<pre><code>//code...\n\nwork = rows / numprocs;\n\n//leftover = rows % numprocs; /* what to do with this !! */\n\nfor(i = my_id * work; i &lt; (my_id * work + work); i ++){\n// do things...\n\n//more code\n</code></pre>\n\n<p>thanks in advance.</p>\n"}, {"tags": ["c", "clang", "llvm", "freebsd"], "comments": [{"owner": {"reputation": 1557, "user_id": 1419731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3e723bda4ce4348e51731245cc6ff7?s=128&d=identicon&r=PG", "display_name": "Joshua Clayton", "link": "https://stackoverflow.com/users/1419731/joshua-clayton"}, "edited": false, "score": 0, "creation_date": 1430947343, "post_id": 30085036, "comment_id": 48288738, "body": "-L /usr/local/lib in your link means that they have compiled a newer version of clang from ports and installed it into /usr/local. Have you done this?"}, {"owner": {"reputation": 1054, "user_id": 2930456, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/2Etu5.jpg?s=128&g=1", "display_name": "2trill2spill", "link": "https://stackoverflow.com/users/2930456/2trill2spill"}, "reply_to_user": {"reputation": 1557, "user_id": 1419731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3e723bda4ce4348e51731245cc6ff7?s=128&d=identicon&r=PG", "display_name": "Joshua Clayton", "link": "https://stackoverflow.com/users/1419731/joshua-clayton"}, "edited": false, "score": 0, "creation_date": 1430948067, "post_id": 30085036, "comment_id": 48289102, "body": "good point, but <code>-L&#47;usr&#47;lib</code> or <code>-L&#47;lib</code> doesn&#39;t work either."}, {"owner": {"reputation": 1557, "user_id": 1419731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3e723bda4ce4348e51731245cc6ff7?s=128&d=identicon&r=PG", "display_name": "Joshua Clayton", "link": "https://stackoverflow.com/users/1419731/joshua-clayton"}, "edited": false, "score": 0, "creation_date": 1430948252, "post_id": 30085036, "comment_id": 48289192, "body": "what are the output of &quot;which clang&quot; and  &quot;clang --version&quot;?"}, {"owner": {"reputation": 1054, "user_id": 2930456, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/2Etu5.jpg?s=128&g=1", "display_name": "2trill2spill", "link": "https://stackoverflow.com/users/2930456/2trill2spill"}, "reply_to_user": {"reputation": 1557, "user_id": 1419731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3e723bda4ce4348e51731245cc6ff7?s=128&d=identicon&r=PG", "display_name": "Joshua Clayton", "link": "https://stackoverflow.com/users/1419731/joshua-clayton"}, "edited": false, "score": 0, "creation_date": 1430949188, "post_id": 30085036, "comment_id": 48289642, "body": "<code>&#47;usr&#47;bin&#47;clang</code> ` FreeBSD clang version 3.4.1 (tags/RELEASE_34/dot1-final 208032) 20140512`"}], "answers": [{"tags": [], "owner": {"reputation": 1054, "user_id": 2930456, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/2Etu5.jpg?s=128&g=1", "display_name": "2trill2spill", "link": "https://stackoverflow.com/users/2930456/2trill2spill"}, "is_accepted": true, "score": 1, "last_activity_date": 1474685428, "last_edit_date": 1474685428, "creation_date": 1451115793, "answer_id": 34469471, "question_id": 30085036, "link": "https://stackoverflow.com/questions/30085036/linking-clang-address-sanitizer-on-freebsd-10-1-release/34469471#34469471", "title": "linking clang address sanitizer on FreeBSD 10.1 Release", "body": "<p>To use asan on FreeBSD you can build llvm with asan support as shown below or you can install from packages/ports like in Kevinoid's answer.</p>\n\n<p>Step one, grab the latest stable llvm source.</p>\n\n<pre><code>fetch http://llvm.org/releases/3.9.0/llvm-3.9.0.src.tar.xz\n</code></pre>\n\n<p>Now uncompress the llvm source directory.</p>\n\n<pre><code>tar -xvf llvm-3.9.0.src.tar.xz\n</code></pre>\n\n<p>Next change directory to llvm and grab the clang source files.</p>\n\n<pre><code>cd llvm-3.9.0.src/tools &amp;&amp; fetch http://llvm.org/releases/3.9.0/cfe-3.9.0.src.tar.xz\n</code></pre>\n\n<p>Uncompress clang.</p>\n\n<pre><code>tar -xvf cfe-3.9.0.src.tar.xz\n</code></pre>\n\n<p>Enter the projects directory and grab compiler-rt.</p>\n\n<pre><code>cd ../projects &amp;&amp; fetch http://llvm.org/releases/3.9.0/compiler-rt-3.9.0.src.tar.xz\n</code></pre>\n\n<p>Uncompress compiler-rt.</p>\n\n<pre><code>tar -xvf compiler-rt-3.9.0.src.tar.xz\n</code></pre>\n\n<p>Goto the root llvm directory and make a build directory for cmake.</p>\n\n<pre><code>cd ../ &amp;&amp; mkdir build &amp;&amp; cd build\n</code></pre>\n\n<p>Use cmake to setup the llvm build.</p>\n\n<pre><code>cmake -DCMAKE_BUILD_TYPE=Release -DLLVM_ENABLE_ASSERTIONS=ON [-DLLVM_ENABLE_WERROR=ON] [-DLLVM_TARGETS_TO_BUILD=X86] -DBUILD_SHARED_LIBS=ON ../\n</code></pre>\n\n<p>Build llvm and go grab some tea, it will take a bit.</p>\n\n<pre><code>make -j12\n</code></pre>\n\n<p>If the build worked you should be left with clang with asan support. Make sure to remove the old compiler, <code>/usr/bin/clang</code>, <code>/usr/bin/clang++</code> and <code>/usr/bin/cc</code>.\nThen install the new clang by doing <code>sudo make install</code>. Finally you will probably want to link <code>/usr/bin/cc</code> to <code>/usr/local/bin/clang</code> by running <code>sudo ln /usr/local/bin/clang /usr/bin/cc</code>.</p>\n\n<p>After doing all these steps you should be able to compile code with the <code>-fsanitize=address</code> compile option.</p>\n"}, {"tags": [], "owner": {"reputation": 1960, "user_id": 503410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/132e1aa89b96190de8f4ce6569ebb321?s=128&d=identicon&r=PG", "display_name": "Kevinoid", "link": "https://stackoverflow.com/users/503410/kevinoid"}, "is_accepted": false, "score": 1, "last_activity_date": 1467948668, "creation_date": 1467948668, "answer_id": 38258518, "question_id": 30085036, "link": "https://stackoverflow.com/questions/30085036/linking-clang-address-sanitizer-on-freebsd-10-1-release/38258518#38258518", "title": "linking clang address sanitizer on FreeBSD 10.1 Release", "body": "<p>As an alternative to building LLVM, <a href=\"https://unix.stackexchange.com/a/273086\">as suggested in this answer on Unix SE</a>, you can install <code>llvm37</code> from ports, which supports AddressSanitizer, and build with that:</p>\n\n<pre><code># pkg install llvm37\n$ clang37 -fsanitize=address san.c\n</code></pre>\n"}], "owner": {"reputation": 1054, "user_id": 2930456, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/2Etu5.jpg?s=128&g=1", "display_name": "2trill2spill", "link": "https://stackoverflow.com/users/2930456/2trill2spill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 919, "favorite_count": 0, "accepted_answer_id": 34469471, "answer_count": 2, "score": 1, "last_activity_date": 1474685428, "creation_date": 1430937725, "question_id": 30085036, "link": "https://stackoverflow.com/questions/30085036/linking-clang-address-sanitizer-on-freebsd-10-1-release", "title": "linking clang address sanitizer on FreeBSD 10.1 Release", "body": "<p>I'm trying to get address sanitizer working on FreeBSD 10.1 Release, but whenever I try to compile a program with <code>-fsanitize=address</code> I get undefined references to <code>_asan_stack_malloc_1</code> etc, etc. I found<br>\n<a href=\"https://forums.freebsd.org/threads/gcc-clang-address-sanitizer.47985/\" rel=\"nofollow\">https://forums.freebsd.org/threads/gcc-clang-address-sanitizer.47985/</a> on google but the suggestion of adding <code>-L/usr/local/lib -I/usr/local/include</code> didn't resolve the linking issue. I tried the llvm binaries for FreeBSD but when I go to compile with that clang I get <code>/usr/bin/../lib/clang/3.6.0/lib/freebsd/libclang_rt.asan-x86_64.a , no such file or directory.</code> . Either way I'm not sure what library I need to link or where it is.</p>\n\n<p>Below is the program I tried compiling and here is the command I used,\n<code>clang -fsanitize=address san.c</code></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "algorithm", "math", "geometry"], "comments": [{"owner": {"reputation": 1279, "user_id": 3226997, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/15c82f3bef427deb4d20a149eb192f30?s=128&d=identicon&r=PG&f=1", "display_name": "CRM", "link": "https://stackoverflow.com/users/3226997/crm"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1430936686, "post_id": 30084547, "comment_id": 48282450, "body": "@chux could you elaborate more?"}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1430936740, "post_id": 30084547, "comment_id": 48282485, "body": "Is it an issue of temporary storage, memory usage, etc.  What are you attempting to achieve by storing the minimum number of points here?  We can use compression with deltas to turn your points into a smaller footprint.  Also, accuracy?  If you don&#39;t need 100% accuracy, you could use a least-squared equation based solution where you store the coefficiences of the iso-cost equation.  This requries all the points up front, but stores less.  Just looking for a bit more clarification."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1430936807, "post_id": 30084547, "comment_id": 48282517, "body": "@CRM  Sorry - I&#39;ll need to ponder it more."}, {"owner": {"reputation": 1279, "user_id": 3226997, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/15c82f3bef427deb4d20a149eb192f30?s=128&d=identicon&r=PG&f=1", "display_name": "CRM", "link": "https://stackoverflow.com/users/3226997/crm"}, "reply_to_user": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1430936874, "post_id": 30084547, "comment_id": 48282558, "body": "@MichaelDorgan Though i framed it that way, memory is not the only issue..if there is less number of points enough to cover the entire space without increasing cost of any location by more than twice its actual cost, I would not find complete isocost contour itself..I have edited the question now."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 1, "creation_date": 1430938056, "post_id": 30084547, "comment_id": 48283282, "body": "Perhaps a bit of source also might help.  In my head, I&#39;m thinking of a Radix type sort on your costs where you loop through your data once, sorting by cost, and then finding all your values becomes much easier, but I&#39;m not 100% certain still of what you are trying to minimize and why.  You say you store 100x100 points - this is only 10k points.  How many points in the original data are you having to sort through?"}, {"owner": {"reputation": 1279, "user_id": 3226997, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/15c82f3bef427deb4d20a149eb192f30?s=128&d=identicon&r=PG&f=1", "display_name": "CRM", "link": "https://stackoverflow.com/users/3226997/crm"}, "reply_to_user": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1430938130, "post_id": 30084547, "comment_id": 48283321, "body": "@MichaelDorgan I dont have cost values of 10k points upfront. It is not possible to compute cost of 10k points. that is why I am trying these methods. Grid is just a virtual grid."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1430938215, "post_id": 30084547, "comment_id": 48283366, "body": "Ok, the cost calculation is extemely expensive?  BTW, I don&#39;t know if I am the person who will ultimately be able to help you, but I&#39;m hoping my questions will make it clearer for others that are reading."}, {"owner": {"reputation": 8727, "user_id": 2999346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQ1wB.png?s=128&g=1", "display_name": "francis", "link": "https://stackoverflow.com/users/2999346/francis"}, "edited": false, "score": 1, "creation_date": 1430939210, "post_id": 30084547, "comment_id": 48283982, "body": "As far as i understand <code>monotonically non-decreasing</code> can lead to some kind of a bounding box principle : if x0&lt;x&lt;x1 and y0&lt;y&lt;y1 then C(x0,y0)&lt;=C(x,y)&lt;=C(x1,y1). So the problem boils down to covering space with boxes such that C(x0,y0)&lt;=C(x1,y1)&lt;=2C(x0,y0). To approximate the cost, find the box in which x,y is ! Building a <a href=\"http://en.wikipedia.org/wiki/Quadtree\" rel=\"nofollow noreferrer\">quadtree</a> seems the right way to go. The cell must be divided until the corner of the cell is such that <code>C(x1,y1)&lt;=2C(x0,y0)</code>. To optimize, the cut of a cell could be performed at a well chosen location (not in the middle)."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1430939367, "post_id": 30084547, "comment_id": 48284088, "body": "You could scan the left and top edges of the grid to find one end of each isocost line, and then trace each one by examining nearby points, to the right and/or below.  I guess that way you probably end up examining about 200 + 2.5 * <code>P</code> points, where <code>P</code> is the total number of points on all contours."}, {"owner": {"reputation": 47344, "user_id": 47984, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3149cf105b708746f1c4eb0a63a5c24?s=128&d=identicon&r=PG", "display_name": "j_random_hacker", "link": "https://stackoverflow.com/users/47984/j-random-hacker"}, "edited": false, "score": 0, "creation_date": 1430945495, "post_id": 30084547, "comment_id": 48287838, "body": "You say &quot;currently I am costing all isocost contour locations&quot;, but IIUC, <i>you don&#39;t know</i> where the isocost lines actually lie until you&#39;ve costed some locations...  So which locations are you actually costing to determine the isocost contour lines?"}, {"owner": {"reputation": 47344, "user_id": 47984, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3149cf105b708746f1c4eb0a63a5c24?s=128&d=identicon&r=PG", "display_name": "j_random_hacker", "link": "https://stackoverflow.com/users/47984/j-random-hacker"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1430945671, "post_id": 30084547, "comment_id": 48287938, "body": "Further to @JohnBollinger&#39;s suggestion, you should always test 2 out of the 3 neighbours (right, down and down+right).  Test DR first: if this cost is higher than the target cost for this isocost line, you only need to test D, and take whichever of the 2 is closer to the target; if it&#39;s lower, you only need to test R."}, {"owner": {"reputation": 1279, "user_id": 3226997, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/15c82f3bef427deb4d20a149eb192f30?s=128&d=identicon&r=PG&f=1", "display_name": "CRM", "link": "https://stackoverflow.com/users/3226997/crm"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1430970840, "post_id": 30084547, "comment_id": 48295822, "body": "@JohnBollinger I am doing what you have mentioned only for tracing contours for C, C/2, C/4 etc. As you said, now I will have to trace entire contour for C, C/2 etc. Should I do that?"}, {"owner": {"reputation": 1279, "user_id": 3226997, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/15c82f3bef427deb4d20a149eb192f30?s=128&d=identicon&r=PG&f=1", "display_name": "CRM", "link": "https://stackoverflow.com/users/3226997/crm"}, "reply_to_user": {"reputation": 47344, "user_id": 47984, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3149cf105b708746f1c4eb0a63a5c24?s=128&d=identicon&r=PG", "display_name": "j_random_hacker", "link": "https://stackoverflow.com/users/47984/j-random-hacker"}, "edited": false, "score": 0, "creation_date": 1430970917, "post_id": 30084547, "comment_id": 48295849, "body": "@j_random_hacker I am finding isocost contours for C, C/2, C/4 by the same idea as John Bollinger mentioned in his comment. Starting with a seed on the left/top boundary then growing it along its neighbourhood. But this requires costing an entire contour for C, C/2, C/4 etc. Can I cost fewer locations than finding complete isocost contours for C, C/2 etc and still bound all locations cost by twice its cost?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1431033827, "post_id": 30084547, "comment_id": 48334687, "body": "@CRM, If you need to know where the contours are, and you don&#39;t have a functional form for them, then I don&#39;t see any alternative to tracing them out.  You could possibly sample a coarser grid (maybe every 4th x value, for example) and interpolate, but I think you&#39;ll end up costing about the same number of points that way, because on average you&#39;ll need to examine more points at each x you consider."}, {"owner": {"reputation": 1279, "user_id": 3226997, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/15c82f3bef427deb4d20a149eb192f30?s=128&d=identicon&r=PG&f=1", "display_name": "CRM", "link": "https://stackoverflow.com/users/3226997/crm"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1431065851, "post_id": 30084547, "comment_id": 48344407, "body": "@JohnBollinger When tracing a contour for say C/2, can I assume that the contour always starts at a boundary and ends at a boundary. Can it be possible that a contour never touches the boundary in a space like this."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1431093755, "post_id": 30084547, "comment_id": 48361126, "body": "@CRM, Given that the cost is monotonically non-decreasing in both x and y, every path from (0, 0) to (100, 100) crosses every contour for costs between C(0,0) and C(100,100).  Paths that do not backtrack in x or y cross every such contour exactly once.  In particular, the path consisting of the union of the left and top edges has this property.  Along some paths there may be multiple points whose cost is exactly the contour cost, but those must be contiguous."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1431093892, "post_id": 30084547, "comment_id": 48361202, "body": "@CRM, that does suggest a possible refinement: you could scan for each contour along the main diagonal, and then trace in both directions.  That would save you about 100 cost computations."}], "answers": [{"comments": [{"owner": {"reputation": 1279, "user_id": 3226997, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/15c82f3bef427deb4d20a149eb192f30?s=128&d=identicon&r=PG&f=1", "display_name": "CRM", "link": "https://stackoverflow.com/users/3226997/crm"}, "edited": false, "score": 0, "creation_date": 1430971600, "post_id": 30090724, "comment_id": 48296058, "body": "I am not clear. If we identify isocost contours for C, C/2, C/4 etc as shown in the image then any location cost can be approximated within twice its cost by the bounding contour right?"}, {"owner": {"reputation": 3215, "user_id": 2363540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0c1d1cbfd25f9bab22c3cc213c926b9?s=128&d=identicon&r=PG", "display_name": "Douglas Zare", "link": "https://stackoverflow.com/users/2363540/douglas-zare"}, "reply_to_user": {"reputation": 1279, "user_id": 3226997, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/15c82f3bef427deb4d20a149eb192f30?s=128&d=identicon&r=PG&f=1", "display_name": "CRM", "link": "https://stackoverflow.com/users/3226997/crm"}, "edited": false, "score": 0, "creation_date": 1431002148, "post_id": 30090724, "comment_id": 48313769, "body": "@CRM: Yes, that algorithm works. My answer shows that you can&#39;t do much better in the worst case, that there are cost functions that require you to evaluate the cost function in about as many places (Theta(nk), when n&gt;&gt;k) as it takes to find the isocost contours."}, {"owner": {"reputation": 1279, "user_id": 3226997, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/15c82f3bef427deb4d20a149eb192f30?s=128&d=identicon&r=PG&f=1", "display_name": "CRM", "link": "https://stackoverflow.com/users/3226997/crm"}, "edited": false, "score": 0, "creation_date": 1431002838, "post_id": 30090724, "comment_id": 48314278, "body": "In your first example, the value at * is surely greater than or equal to 1 and it is less than or equal to 2. We can find its value within twice the actual value"}, {"owner": {"reputation": 3215, "user_id": 2363540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0c1d1cbfd25f9bab22c3cc213c926b9?s=128&d=identicon&r=PG", "display_name": "Douglas Zare", "link": "https://stackoverflow.com/users/2363540/douglas-zare"}, "reply_to_user": {"reputation": 1279, "user_id": 3226997, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/15c82f3bef427deb4d20a149eb192f30?s=128&d=identicon&r=PG&f=1", "display_name": "CRM", "link": "https://stackoverflow.com/users/3226997/crm"}, "edited": false, "score": 0, "creation_date": 1431004933, "post_id": 30090724, "comment_id": 48315949, "body": "As I said, it&#39;s ambiguous whether being off by exactly a factor of two counts as within twice the value or not. So, I explicitly stated that in case being off by exactly a factor of 2 was acceptable, that you could replace the 2 with 2.001. This would mean that you can&#39;t tell the value of the * within a factor of 2.001. Is this clear enough?"}, {"owner": {"reputation": 1279, "user_id": 3226997, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/15c82f3bef427deb4d20a149eb192f30?s=128&d=identicon&r=PG&f=1", "display_name": "CRM", "link": "https://stackoverflow.com/users/3226997/crm"}, "edited": false, "score": 0, "creation_date": 1431065126, "post_id": 30090724, "comment_id": 48344149, "body": "Yeah I got it. It seems like there is no better way to get cost of any location in the space within twice optimal cost without finding all locations of isocost contours for C, C/2, C/4 etc. It would be helpful if it can be proved mathematically."}, {"owner": {"reputation": 3215, "user_id": 2363540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0c1d1cbfd25f9bab22c3cc213c926b9?s=128&d=identicon&r=PG", "display_name": "Douglas Zare", "link": "https://stackoverflow.com/users/2363540/douglas-zare"}, "reply_to_user": {"reputation": 1279, "user_id": 3226997, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/15c82f3bef427deb4d20a149eb192f30?s=128&d=identicon&r=PG&f=1", "display_name": "CRM", "link": "https://stackoverflow.com/users/3226997/crm"}, "edited": false, "score": 0, "creation_date": 1431070106, "post_id": 30090724, "comment_id": 48346544, "body": "That is what my answer proves, that up to a constant factor, there if no better way."}], "tags": [], "owner": {"reputation": 3215, "user_id": 2363540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0c1d1cbfd25f9bab22c3cc213c926b9?s=128&d=identicon&r=PG", "display_name": "Douglas Zare", "link": "https://stackoverflow.com/users/2363540/douglas-zare"}, "is_accepted": false, "score": 0, "last_activity_date": 1430964274, "creation_date": 1430964274, "answer_id": 30090724, "question_id": 30084547, "link": "https://stackoverflow.com/questions/30084547/find-twice-optimal-cost-of-locations-in-2d-space-efficiently/30090724#30090724", "title": "find twice optimal cost of locations in 2d space efficiently", "body": "<p>There is a lower bound for the worst case number of locations you need to test that is not too far from the upper bound you get by locating the isocost contours.</p>\n\n<p>Imagine that you know every value except the one at *:</p>\n\n<pre><code>.  2  .\n1  *  2\n.  1  .\n</code></pre>\n\n<p>This value could be 1 or 2. (If that ambiguity is acceptable then you could replace the 2 with 2.001.) So, you need to sample it. There is no way you can determine the value from the costs at other sites.</p>\n\n<p>Let k = log_2(cost(n,n)/cost(1,1)). You can construct a cost function so that at almost nk sites (about k(n-k/2)), you can't determine the cost within a factor of 2 without sampling that site. I'll illustrate an example where k=3.</p>\n\n<pre><code>      8 8 8 8 8 8\n    4 * 8 8 8 8 8\n  2 * 4 * 8 8 8 8\n1 * 2 * 4 * 8 8 8\n1 1 * 2 * 4 * 8 8\n1 1 1 * 2 * 4 * 8\n1 1 1 1 * 2 * 4\n1 1 1 1 1 * 2 \n1 1 1 1 1 1\n</code></pre>\n\n<p>So, the number of sites you need to test is theta(nk) for n>>k. You might be able to do much better on average if you have a probabilistic model for the cost function, and k is small compared with n.</p>\n"}, {"comments": [{"owner": {"reputation": 47344, "user_id": 47984, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3149cf105b708746f1c4eb0a63a5c24?s=128&d=identicon&r=PG", "display_name": "j_random_hacker", "link": "https://stackoverflow.com/users/47984/j-random-hacker"}, "edited": false, "score": 1, "creation_date": 1430994251, "post_id": 30093188, "comment_id": 48308192, "body": "S/he&#39;s not looking to find the point that minimises or maximises the cost function, but to choose a subset of the points to measure such that it is then possible to answer a query on <i>any</i> point with an approximate cost that is guaranteed to be at most twice the true value."}], "tags": [], "owner": {"reputation": 109, "user_id": 4825769, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L1OEw.png?s=128&g=1", "display_name": "Angelo Mascaro", "link": "https://stackoverflow.com/users/4825769/angelo-mascaro"}, "is_accepted": false, "score": -1, "last_activity_date": 1430979029, "creation_date": 1430979029, "answer_id": 30093188, "question_id": 30084547, "link": "https://stackoverflow.com/questions/30084547/find-twice-optimal-cost-of-locations-in-2d-space-efficiently/30093188#30093188", "title": "find twice optimal cost of locations in 2d space efficiently", "body": "<p>Even though it's not clear to me what you mean \"monotonically non-decreasing  thoroughout the space\", I understand that this is a constrained minimization of a two variables function.</p>\n\n<p>If you means that the cost is monotonically non-decreasing both in the x and in the y directions. That is:</p>\n\n<p>cost(x1, y) &lt;= cost(x2, y) for any x1 &lt; x2 and any y</p>\n\n<p>and</p>\n\n<p>cost(x, y1) &lt;= cost(x, y1) for any y1 &lt; y2 and any x</p>\n\n<p>If this is the case, the solution is in (1,1). </p>\n\n<p>If my assumption about the constraints is not correct, anyway from the plot it looks like the solution lies on the border. In this case you don't need to use any complex algorithm for constrained minimization: just explore the border starting from (1,1) in the two directions increasing x and increasing y. This move from n^2 problem to a n problem.</p>\n"}], "owner": {"reputation": 1279, "user_id": 3226997, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/15c82f3bef427deb4d20a149eb192f30?s=128&d=identicon&r=PG&f=1", "display_name": "CRM", "link": "https://stackoverflow.com/users/3226997/crm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 133, "favorite_count": 1, "answer_count": 2, "score": 4, "last_activity_date": 1430979029, "creation_date": 1430936109, "last_edit_date": 1430971392, "question_id": 30084547, "link": "https://stackoverflow.com/questions/30084547/find-twice-optimal-cost-of-locations-in-2d-space-efficiently", "title": "find twice optimal cost of locations in 2d space efficiently", "body": "<p>I have a 2d grid of say 100 by 100 dimensions. Each point (x,y) in the grid has an associated cost and it is <strong>monotonically non-decreasing</strong> thoroughout the space. The cost associated is not known in advance.</p>\n\n<p>I cant afford to find the cost of all locations. So what I do is, find cost of top most location(100,100). Call it cost C. Then identify <strong>iso-cost contours</strong> on this 2d grid for a <strong>carefully chosen</strong> set of cost values. Let C be the cost location (100,100). The cost for contours has been carefully chosen in such a way that, last contour(contour k) will be of cost C(maximum cost in the grid), contour k-1 will be of cost C/2, contour k-2 will be of cost C/4 like that in Geometric series.  Iso cost contours are shown in Black colour curves. They are identified by first locating a seed on the left/top edge and then exploring along its neighbourhood. </p>\n\n<p>Now for any location (x,y) on the contour, the nearest contour's cost will give an <strong>approximate value</strong> for cost of location (x,y). That is we get a cost value which is less than <strong>twice the actual cost</strong> of location (x,y). Each location (x,y) on a contour covers the region in its third quadrant. For example, the location M is covered by contour with cost C/8.\n<img src=\"https://i.stack.imgur.com/iYatL.png\" alt=\"contour diagram\">\nSo for any given location (x,y) i can say what is the cost by seeing who is the nearest contour above it and its cost. This gives a cost which is closest but not the exact cost of the location (x,y) which is enough for my case. But it requires me to \na) find complete isocost contours for C, C/2, C/4 upto Cmin.\nb) store all the above mentioned iso-contour locations, which is 100 locations per contour. </p>\n\n<p>How to have <strong>very minimum number of points</strong> in the space to be <strong>explored and stored</strong>, and still achieve this property of twice optimal cost?</p>\n\n<p>Note: Number of locations costed needs to be brought down. currently I am costing all isocost contour locations. Resolution of 100 by 100 is for explaining the problem. Actual resolutions are very higher.</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 5, "creation_date": 1430936126, "post_id": 30084521, "comment_id": 48282134, "body": "C != C++, and have you tried anything yet (we are not going to just write code for you)?"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1430936740, "post_id": 30084521, "comment_id": 48282486, "body": "Does the Turkish part start at the same column, e.g. column 36, in each line? Are there only spaces between the English and Turkish parts? Or may there be tabs? Or are these two parts even separated by tabs? You should be more specific."}, {"owner": {"reputation": 73, "user_id": 4227027, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/125342fdd489da1e7381a5f9230efd1a?s=128&d=identicon&r=PG", "display_name": "Mustafa Alp", "link": "https://stackoverflow.com/users/4227027/mustafa-alp"}, "reply_to_user": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1430937361, "post_id": 30084521, "comment_id": 48282888, "body": "It changes each and every row. I have got 5127 different row. @crashmstr   I&#39;m not waiting for you to write code for me. I just need idea about how to do that."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1430938376, "post_id": 30084521, "comment_id": 48283475, "body": "In that case, I&#39;d read the file line by line and look for stretches of two or more white-space characters and interpret them as separator. This should work if your vocabulary entries never have more than one space between words."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1430940569, "post_id": 30084521, "comment_id": 48284845, "body": "Well, judging from the picture, the Turkish parts always starts in the same column for every line. (Of corse, the lines themselves are different.) Apart from not showing any code, you should at least make an effort to describe your problem precisely."}, {"owner": {"reputation": 73, "user_id": 4227027, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/125342fdd489da1e7381a5f9230efd1a?s=128&d=identicon&r=PG", "display_name": "Mustafa Alp", "link": "https://stackoverflow.com/users/4227027/mustafa-alp"}, "edited": false, "score": 0, "creation_date": 1430941452, "post_id": 30084521, "comment_id": 48285345, "body": "Thank you for your comment. I tried fscanf and fgets functions but these functions read line by line. In this case I need read coulumn by coulumn. Everyone knows about fscanf or fgets functions about how to use them. That is why I didn&#39;t show any code blocks at my post. And also I don&#39;t need any specific code for it. You are not my employees but at least you can suggest your ideas for the solution. I need your ideas ,suggestion or advice not your codes. It called brainstorm , remember ?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1430942472, "post_id": 30084521, "comment_id": 48286024, "body": "There has to be one or more questions already asked about reading text files.  Try searching for &quot;stackoverflow c++ read file struct&quot; or &quot;stackoverflow c++ read file columns&quot;."}, {"owner": {"reputation": 486, "user_id": 7302586, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/add2c35e26541725f67515dbb8ccd67a?s=128&d=identicon&r=PG&f=1", "display_name": "szpanczyk", "link": "https://stackoverflow.com/users/7302586/szpanczyk"}, "edited": false, "score": 0, "creation_date": 1484864334, "post_id": 30084521, "comment_id": 70698043, "body": "@MustafaAlp it doesn&#39;t seem like you&#39;re looking to understand the problem, overcome difficulty in particular part of attempted solution or anything like this. Especially when You take someones code and try to use it to no avail, only to comment that it&#39;s not working. It seems you&#39;re looking for a working specific solution..."}], "answers": [{"comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1430937106, "post_id": 30084776, "comment_id": 48282727, "body": "This code will work for the shown input file excerpt, where both English and Turkish parts have two words each, but for not much else. What about determining the end of input by an end-of-file condition?"}, {"owner": {"reputation": 1503, "user_id": 4037465, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/4f3bc53b780a4ff232429b4391863f49?s=128&d=identicon&r=PG&f=1", "display_name": "Ashot Khachatryan", "link": "https://stackoverflow.com/users/4037465/ashot-khachatryan"}, "reply_to_user": {"reputation": 73, "user_id": 4227027, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/125342fdd489da1e7381a5f9230efd1a?s=128&d=identicon&r=PG", "display_name": "Mustafa Alp", "link": "https://stackoverflow.com/users/4227027/mustafa-alp"}, "edited": false, "score": 0, "creation_date": 1430938041, "post_id": 30084776, "comment_id": 48283266, "body": "@MustafaAlp You need to have file.txt file in directory where executable runs. In the same directory will be created two files turkce.txt ingilizce.txt. Did you get error?"}, {"owner": {"reputation": 73, "user_id": 4227027, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/125342fdd489da1e7381a5f9230efd1a?s=128&d=identicon&r=PG", "display_name": "Mustafa Alp", "link": "https://stackoverflow.com/users/4227027/mustafa-alp"}, "edited": false, "score": 0, "creation_date": 1430938271, "post_id": 30084776, "comment_id": 48283397, "body": "No , I didn&#39;t get the any error the code above. But I have multiple coulumns not just 2."}], "tags": [], "owner": {"reputation": 1503, "user_id": 4037465, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/4f3bc53b780a4ff232429b4391863f49?s=128&d=identicon&r=PG&f=1", "display_name": "Ashot Khachatryan", "link": "https://stackoverflow.com/users/4037465/ashot-khachatryan"}, "is_accepted": false, "score": 0, "last_activity_date": 1430936922, "creation_date": 1430936922, "answer_id": 30084776, "question_id": 30084521, "link": "https://stackoverflow.com/questions/30084521/file-handling-in-c-reading-multiple-chars/30084776#30084776", "title": "File Handling in C reading multiple chars", "body": "<p>There could be better solutions but here is simple one.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n\nint main()\n{\n  std::ifstream inFile(\"file.txt\");\n  std::ofstream outFileT(\"turkce.txt\", std::ios::app);\n  std::ofstream outFileE(\"ingilizce.txt\", std::ios::app);\n  std::string a;\n  std::string b;\n\n  for (int i = 0; i &lt; 2; i++) {\n    inFile &gt;&gt; a &gt;&gt; b;\n    outFileE &lt;&lt; a + \" \" + b + \"\\n\";\n\n    inFile &gt;&gt; a &gt;&gt; b;\n    outFileT &lt;&lt; a + \" \" + b + \"\\n\";\n }\n}\n</code></pre>\n\n<p>I assumed you have two lines but you can determine lines count in the file first. </p>\n"}, {"tags": [], "owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "is_accepted": true, "score": 0, "last_activity_date": 1430986604, "last_edit_date": 1430986604, "creation_date": 1430986209, "answer_id": 30095326, "question_id": 30084521, "link": "https://stackoverflow.com/questions/30084521/file-handling-in-c-reading-multiple-chars/30095326#30095326", "title": "File Handling in C reading multiple chars", "body": "<p>You don't say it explicitly, but your file has two fixed-width columns, which you want to separate.</p>\n\n<p>A substring of a string <code>str</code> from a fixed index <code>i</code> to the end can be expressed with pointer arithmetic: <code>str + i</code> or <code>&amp;str[i]</code>. Strings that are not zero-terminated (like your first column) can be printed by specifying a length with <code>printf</code>s precision field, e.g. <code>printf(\"%.*s\", len, str)</code>.</p>\n\n<p>A quick and dirty way to print your two columns is:</p>\n\n<pre><code>char line[80];\nint col = 36;\n\nwhile (fgets(line, sizeof(line), in)) {\n    fprintf(en, \"%.*s\\n\", col, line);\n    fprintf(tr, \"%s\", line + col);\n    printf(\"\\n\");\n}\n</code></pre>\n\n<p>This method has some drawbacks: It will print garbage if the string is shorter than your separation width, i.e. if the right column is empty. It also prints the column padding spaces for the left column, which looks untidy. So let's write a function that splits the strings nicely, which we can call like so:</p>\n\n<pre><code>while (fgets(line, sizeof(line), in)) {\n    char *stren, *strtr;\n\n    split_at(line, &amp;stren, &amp;strtr, 36);\n\n    fprintf(en, \"%s\\n\", stren);\n    fprintf(tr, \"%s\\n\", strtr);\n}\n</code></pre>\n\n<p>The function looks like this:</p>\n\n<pre><code>void split_at(char *line, char **left, char **right, int col)\n{\n    char *trim = line;\n    char *p = line;\n\n    *left = line;\n    *right = line + col;\n\n    while (p &lt; *right) {\n        if (*p == '\\0') {\n            *right = p;\n            break;\n        }\n\n        if (!isspace(*p)) trim = p + 1;\n        p++;\n    }\n\n    *trim = '\\0';\n    trim = p;\n\n    while (*p) {\n        if (!isspace(*p)) trim = p + 1;        \n        p++;\n    }\n\n    if (trim) *trim = '\\0';\n}\n</code></pre>\n\n<p>This should work for your example data. It will also work for empty left or right columns. It will not work if there is no space between the left and right columns, i.e. when the left and right art are pasted together.</p>\n\n<p>This method will also work only if the code points of the strings have the same length. You haven't said which encoding you use for your data. If you use ISO-8859-9, you will be okay. If you use UTF-8, all non ASCII-codepoints, i.e. the Turkish special characters, will be represented by more than one byte. What looks like a fixed-width column doesn't have a fixed width in its memory representation.</p>\n\n<p>That said, you should be safe as long as your English text is in the left column. English text is made up of only ASCII characters unless you have fancy formatting with typographic quotation marks or some such.</p>\n"}], "owner": {"reputation": 73, "user_id": 4227027, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/125342fdd489da1e7381a5f9230efd1a?s=128&d=identicon&r=PG", "display_name": "Mustafa Alp", "link": "https://stackoverflow.com/users/4227027/mustafa-alp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 359, "favorite_count": 0, "accepted_answer_id": 30095326, "answer_count": 2, "score": -3, "last_activity_date": 1484863966, "creation_date": 1430936008, "last_edit_date": 1484863966, "question_id": 30084521, "link": "https://stackoverflow.com/questions/30084521/file-handling-in-c-reading-multiple-chars", "title": "File Handling in C reading multiple chars", "body": "<blockquote>\n<pre><code>abort action                        islemi durdur(MS)\nabort sequence                      durdurma dizisi(IBM)\n</code></pre>\n</blockquote>\n\n<p>I have a file.txt like above. I want to read this from the file.txt separately. Besides the file.txt I got 2 more turkce.txt and ingilizce.txt</p>\n\n<p>Here is what I want to do : </p>\n\n<p>I want to read from file.txt and separate the words English and Turkish. After that ingilizce.txt become like this </p>\n\n<blockquote>\n  <p>abort action<br/>\n  abort sequence  </p>\n</blockquote>\n\n<p>and turkce.txt like this</p>\n\n<blockquote>\n  <p>islemi durdur(MS)<br/>\n  durdurma dizisi(IBM)</p>\n</blockquote>\n\n<p>Also, I have multiple columns and 5127 rows. Column numbers can changes each and every row.</p>\n\n<p>Here is a pic of some part of my file.txt \n<a href=\"http://i59.tinypic.com/33m0iu8.png\" rel=\"nofollow noreferrer\">http://i59.tinypic.com/33m0iu8.png</a></p>\n\n<p>Thank you for your answers.</p>\n\n<p>Update : I solved the problem. The difference between left column's starting of first letter and right column's starting of firs letter are same and it equals 37.</p>\n\n<p>So I use </p>\n\n<pre><code>FILE* fp = fopen(\"file.txt\",\"r\");\nchar s[256];\nfgets(s, 37 , \"fp);\n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1430936164, "post_id": 30084474, "comment_id": 48282154, "body": "Your line <code>arr[5][0]=61; arr[5][1]=62;</code> is exceeding the array bounds. Max index is <code>[4][1]</code> because array indexing is <code>0</code> based."}, {"owner": {"reputation": 2405, "user_id": 3761982, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/u8soe.png?s=128&g=1", "display_name": "CrApHeR", "link": "https://stackoverflow.com/users/3761982/crapher"}, "edited": false, "score": 0, "creation_date": 1430936172, "post_id": 30084474, "comment_id": 48282160, "body": "Why are you adding 6th element to an array of 5 elements without allocate memory?"}], "answers": [{"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 3, "last_activity_date": 1430938255, "last_edit_date": 1430938255, "creation_date": 1430936500, "answer_id": 30084670, "question_id": 30084474, "link": "https://stackoverflow.com/questions/30084474/printing-two-dimensional-array-in-c/30084670#30084670", "title": "printing two dimensional array in c", "body": "<p>Your initialised array is given exactly enough memory to hold the specified data values. So</p>\n\n<pre><code>int arr[ ][2]={{11,12},{21,22},{31,32},{41,42},{51,52}};\n</code></pre>\n\n<p>creates the array as <code>int arr[5][2]</code> and then the line</p>\n\n<pre><code>arr[5][0]=61; arr[5][1]=62;\n</code></pre>\n\n<p>exceeds the array bounds. The maximum index is <code>[4][1]</code> because array indexing is <code>0</code> based. If you want to add another element you should specify</p>\n\n<pre><code>int arr[6][2]={{11,12},{21,22},{31,32},{41,42},{51,52}};\n</code></pre>\n\n<p>and then this line will work.</p>\n\n<pre><code>arr[5][0]=61; arr[5][1]=62;\n</code></pre>\n\n<p>An alternative would be to use <code>malloc()</code> to allocate memory for the array, and then if you want to add another row you can use <code>realloc()</code>, and this shows how to make a flexible array.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define COLUMNS 2\n#define ROWS 5\n\ntypedef int rowtype[COLUMNS];\n\nint main() {\n    int i, j;\n    rowtype *array = malloc(ROWS * sizeof(rowtype));\n    if (array == NULL)\n        return -1;\n\n    for (j=0; j&lt;ROWS; j++)\n        for (i=0; i&lt;COLUMNS; i++)\n            array[j][i] = (j+1)*10 + (i+1);\n\n    for (j=0; j&lt;ROWS; j++) {\n        for (i=0; i&lt;COLUMNS; i++)\n            printf (\"%-4d\", array[j][i]);\n        printf (\"\\n\");\n    }\n\n    printf(\"Add another row\\n\");\n    array = realloc(array, (ROWS+1) * sizeof(rowtype));\n    if (array == NULL)\n        return -1;\n    array[ROWS][0] = 61;\n    array[ROWS][1] = 62;\n\n    for (j=0; j&lt;ROWS+1; j++) {\n        for (i=0; i&lt;COLUMNS; i++)\n            printf (\"%-4d\", array[j][i]);\n        printf (\"\\n\");\n    }\n\n    free(array);\n    return 0;\n}\n</code></pre>\n\n<p>Program output:</p>\n\n<pre><code>11  12\n21  22\n31  32\n41  42\n51  52\nAdd another row\n11  12\n21  22\n31  32\n41  42\n51  52\n61  62\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4829661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/130a5e0f1232315edab9d112b65e1e84?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/4829661/abhishek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1430938255, "creation_date": 1430935865, "question_id": 30084474, "link": "https://stackoverflow.com/questions/30084474/printing-two-dimensional-array-in-c", "title": "printing two dimensional array in c", "body": "<p>I am trying to define a two dimensional array by initially defining elements for 5 x 2 matrix and then I am defining again the elements for 6th row. But when I try to print the elements of this matrix I am getting 0 and 5 for the last value. Tried same by defining elements again for 4th or 6th row but then it is working fine.</p>\n\n<pre><code>#include&lt;math.h&gt;\n#include&lt;stdio.h&gt;\nmain()\n{\n  int arr[ ][2]={{11,12},{21,22},{31,32},{41,42},{51,52}};\n  int i, j;\n  arr[5][0]=61; arr[5][1]=62;\n  for (i=0;i&lt;=5;i++)\n  {\n    for (j=0;j&lt;=1;j++)\n    {\n      printf (\"%d \\n\", arr[i][j]);\n    }\n  }\n}\n</code></pre>\n"}, {"tags": ["c", "arguments"], "comments": [{"owner": {"reputation": 14761, "user_id": 290072, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/ITEsv.png?s=128&g=1", "display_name": "Almo", "link": "https://stackoverflow.com/users/290072/almo"}, "edited": false, "score": 0, "creation_date": 1430935956, "post_id": 30084439, "comment_id": 48282025, "body": "This doesn&#39;t really make sense..."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1430935977, "post_id": 30084439, "comment_id": 48282036, "body": "Not directly, but by redirecting the input such as <code>myprog &lt;test.dat</code>"}], "answers": [{"tags": [], "owner": {"reputation": 2861, "user_id": 929510, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z568f.png?s=128&g=1", "display_name": "Staven", "link": "https://stackoverflow.com/users/929510/staven"}, "is_accepted": false, "score": 0, "last_activity_date": 1430935960, "creation_date": 1430935960, "answer_id": 30084507, "question_id": 30084439, "link": "https://stackoverflow.com/questions/30084439/can-i-pass-text-file-as-an-argument-in-a-main-function-in-c/30084507#30084507", "title": "Can I pass text file as an argument in a main function in C?", "body": "<p>You could, as long as there's no 0 bytes in the file.</p>\n\n<p>Also, you shouldn't.</p>\n\n<p>If you want to know how to do that, it depends on the operating system.</p>\n"}, {"tags": [], "owner": {"reputation": 139130, "user_id": 141172, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Vuodg.jpg?s=128&g=1", "display_name": "Eric J.", "link": "https://stackoverflow.com/users/141172/eric-j"}, "is_accepted": true, "score": 0, "last_activity_date": 1430935973, "creation_date": 1430935973, "answer_id": 30084510, "question_id": 30084439, "link": "https://stackoverflow.com/questions/30084439/can-i-pass-text-file-as-an-argument-in-a-main-function-in-c/30084510#30084510", "title": "Can I pass text file as an argument in a main function in C?", "body": "<p>Not unless something external (e.g. a bash script) reads in the file and adds it as an argument.  If there is a binary 0 in the file, that would be interpreted as the end of string.</p>\n\n<p>You can achieve something similar using <a href=\"http://en.wikipedia.org/wiki/Redirection_%28computing%29\" rel=\"nofollow\">input redirection</a>, where the contents of a file is redirected to stdin, e.g.</p>\n\n<pre><code>myprogram &lt; myTextFile\n</code></pre>\n\n<p>You would then be able to read the contents of the file by reading from stdin.</p>\n"}], "owner": {"reputation": 829, "user_id": 4226347, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/e73db212ba84811b9010053669623ae7?s=128&d=identicon&r=PG&f=1", "display_name": "Da Artagnan", "link": "https://stackoverflow.com/users/4226347/da-artagnan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 305, "favorite_count": 1, "accepted_answer_id": 30084510, "answer_count": 2, "score": 1, "last_activity_date": 1430935973, "creation_date": 1430935785, "question_id": 30084439, "link": "https://stackoverflow.com/questions/30084439/can-i-pass-text-file-as-an-argument-in-a-main-function-in-c", "title": "Can I pass text file as an argument in a main function in C?", "body": "<p>I am wondering if I could pass file as an argument in a main function? I mean not a name of the file but file itself.</p>\n"}, {"tags": ["c", "hostname"], "comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1430934856, "post_id": 30084116, "comment_id": 48281334, "body": "<code>HOST_NAME_MAX</code> is not defined in <code>&lt;limits.h&gt;</code>. Why did you expect it to be?"}, {"owner": {"reputation": 187, "user_id": 2580478, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b52ecb636ba2e780e51039ba3547e586?s=128&d=identicon&r=PG&f=1", "display_name": "yuan", "link": "https://stackoverflow.com/users/2580478/yuan"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1430934913, "post_id": 30084116, "comment_id": 48281380, "body": "@Keith So where is it defined ? I&#39;ve checked this and it seems defined <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/basedefs/limits.h.html\" rel=\"nofollow noreferrer\">link</a>"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1430935132, "post_id": 30084116, "comment_id": 48281521, "body": "Sorry, my mistake. It <i>is</i> defined in <code>&lt;limits.h&gt;</code>, but not by default. (It&#39;s specified by POSIX, not by C). There&#39;s a way to specify that you want <code>&lt;limits.h&gt;</code> to define it, but I don&#39;t remember it off the top of my head."}, {"owner": {"reputation": 187, "user_id": 2580478, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b52ecb636ba2e780e51039ba3547e586?s=128&d=identicon&r=PG&f=1", "display_name": "yuan", "link": "https://stackoverflow.com/users/2580478/yuan"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1430935239, "post_id": 30084116, "comment_id": 48281592, "body": "@KeithThompson thanks ! I will try to search and also see what others come up with ...."}], "answers": [{"comments": [{"owner": {"reputation": 156, "user_id": 7035250, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1b1b7c1aacddb9a9b32aea065bc3cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Davidius", "link": "https://stackoverflow.com/users/7035250/davidius"}, "edited": false, "score": 0, "creation_date": 1507709463, "post_id": 30085094, "comment_id": 80313816, "body": "I can see that it is implemented like you posted, however from <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/xsh_chap02_02.html\" rel=\"nofollow noreferrer\">pubs.opengroup.org/onlinepubs/009695399/functions/&hellip;</a> I can see that _POSIX_C_SOURCE should be used instead of __USE_POSIX according to standard. This won&#39;t work (as it is not coded like this). Do you know why it is not coded with _POSIX_C_SOURCE?"}, {"owner": {"reputation": 205, "user_id": 7413705, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-anECyzHlOtA/AAAAAAAAAAI/AAAAAAAAAB4/TAl-Nl1VjAg/photo.jpg?sz=128", "display_name": "Nfagie Yansaneh", "link": "https://stackoverflow.com/users/7413705/nfagie-yansaneh"}, "edited": false, "score": 1, "creation_date": 1507860333, "post_id": 30085094, "comment_id": 80389544, "body": "After doing further investigation since it was not working for me while looking inside &quot;posix1_lim.h&quot; I found out that some stuff has been changed  <b>HOST_NAME_MAX</b> now is <b>_POSIX_HOST_NAME_MAX</b>  <b>LOGIN_NAME_MAX</b> now is <b>_POSIX_LOGIN_NAME_MAX</b> <a href=\"https://pastebin.com/kFmAbWcJ\" rel=\"nofollow noreferrer\">pastebin.com/kFmAbWcJ</a>"}], "tags": [], "owner": {"reputation": 191202, "user_id": 147356, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9506717d24256a090524dd5505d3207?s=128&d=identicon&r=PG", "display_name": "larsks", "link": "https://stackoverflow.com/users/147356/larsks"}, "is_accepted": false, "score": 12, "last_activity_date": 1430937913, "creation_date": 1430937913, "answer_id": 30085094, "question_id": 30084116, "link": "https://stackoverflow.com/questions/30084116/host-name-max-undefined-after-include-limits-h/30085094#30085094", "title": "HOST_NAME_MAX undefined after include &lt;limits.h&gt;", "body": "<p>Using <code>grep</code>:</p>\n\n<pre><code>$ grep -rl '#define HOST_NAME_MAX' /usr/include\n</code></pre>\n\n<p>We can see that <code>HOST_NAME_MAX</code> is defined in:</p>\n\n<pre><code>/usr/include/bits/local_lim.h\n</code></pre>\n\n<p>And <code>local_lim.h</code> is included by <code>/usr/include/bits/posix1_lim.h</code>:</p>\n\n<pre><code># grep -rl local_lim.h /usr/include\n/usr/include/bits/posix1_lim.h\n</code></pre>\n\n<p>And <code>posix1_lim.h</code> is included by <code>limits.h</code> only if <code>__USE_POSIX</code> is defined:</p>\n\n<pre><code>#ifdef  __USE_POSIX\n/* POSIX adds things to &lt;limits.h&gt;.  */\n# include &lt;bits/posix1_lim.h&gt;\n#endif\n</code></pre>\n\n<p>So if your code looks like:</p>\n\n<pre><code>#define __USE_POSIX\n#include &lt;limits.h&gt;\n</code></pre>\n\n<p>You should have the <code>HOST_NAME_MAX</code> constant available.  Having said that, on my system <code>__USE_POSIX</code> appears to be defined by default.  For example, the following code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n\n#include &lt;limits.h&gt;\n\nint main(int argc, char **argv) {\n#ifdef __USE_POSIX\n  printf(\"__USE_POSIX is defined\\n\");\n#endif\n  printf(\"HOST_NAME_MAX: %d\\n\", HOST_NAME_MAX);\n  return 0;\n}\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>__USE_POSIX is defined\nHOST_NAME_MAX: 64\n</code></pre>\n"}], "owner": {"reputation": 187, "user_id": 2580478, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b52ecb636ba2e780e51039ba3547e586?s=128&d=identicon&r=PG&f=1", "display_name": "yuan", "link": "https://stackoverflow.com/users/2580478/yuan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8177, "favorite_count": 2, "answer_count": 1, "score": 8, "last_activity_date": 1430937913, "creation_date": 1430934683, "last_edit_date": 1430934840, "question_id": 30084116, "link": "https://stackoverflow.com/questions/30084116/host-name-max-undefined-after-include-limits-h", "title": "HOST_NAME_MAX undefined after include &lt;limits.h&gt;", "body": "<p>I don't know why it still says HOST_NAME_MAX is implicit declaration. </p>\n\n<p>Instead, I searched the web and do the following to fix it: </p>\n\n<pre><code>#include &lt;netdb.h&gt;\n</code></pre>\n\n<p>and use <code>MAXHOSTNAMELEN</code> instead of <code>HOST_NAME_MAX</code></p>\n\n<p>however, I am not very sure it this is a good way, and the reasons behind it. </p>\n"}, {"tags": ["c", "struct", "trie"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1430934759, "post_id": 30084031, "comment_id": 48281264, "body": "C++ or C? Designated initialization but bool?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1431009734, "post_id": 30084031, "comment_id": 48319871, "body": "@Barry: Let me guess: you stopped using C with C90/95? Have a look at C99 (stdbool.h) ;-)"}], "answers": [{"comments": [{"owner": {"reputation": 666, "user_id": 4414387, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/47f3e1c0e0366cae9e7416f519c4ac08?s=128&d=identicon&r=PG&f=1", "display_name": "veta", "link": "https://stackoverflow.com/users/4414387/veta"}, "edited": false, "score": 0, "creation_date": 1430935453, "post_id": 30084181, "comment_id": 48281735, "body": "Worked like a charm.  I also found the global zero default initialization does carry to struct members so &quot;node empty;&quot; works too.  Your method lets me set any values though so I will use it in the future.  Thanks :)"}, {"owner": {"reputation": 2405, "user_id": 2216129, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/U0xqx.jpg?s=128&g=1", "display_name": "Topological Sort", "link": "https://stackoverflow.com/users/2216129/topological-sort"}, "reply_to_user": {"reputation": 666, "user_id": 4414387, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/47f3e1c0e0366cae9e7416f519c4ac08?s=128&d=identicon&r=PG&f=1", "display_name": "veta", "link": "https://stackoverflow.com/users/4414387/veta"}, "edited": false, "score": 0, "creation_date": 1430941262, "post_id": 30084181, "comment_id": 48285219, "body": "Great!  I think you should be cautious of not giving explicit initializers, though.  This thread tells when you can trust it and when you can&#39;t:  <a href=\"http://stackoverflow.com/questions/14049777/why-global-variables-are-always-initialized-to-0-but-not-local-variables\" title=\"why global variables are always initialized to 0 but not local variables\">stackoverflow.com/questions/14049777/&hellip;</a>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1431005519, "post_id": 30084181, "comment_id": 48316458, "body": "If you have to initialize a field different from 0, there is hardly a way around an explicit intializer. Ok, you might use assignments, but that is really nonsense, as that generates more code and you have the initialization at a different location in your code from the structure, If one uses a programming language, one should use its features and not try to program in C as one would in C++ (which includes language-support for the other way)."}], "tags": [], "owner": {"reputation": 2405, "user_id": 2216129, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/U0xqx.jpg?s=128&g=1", "display_name": "Topological Sort", "link": "https://stackoverflow.com/users/2216129/topological-sort"}, "is_accepted": true, "score": 1, "last_activity_date": 1430934911, "last_edit_date": 1495542112, "creation_date": 1430934911, "answer_id": 30084181, "question_id": 30084031, "link": "https://stackoverflow.com/questions/30084031/incompatible-pointer-types-initializing-initializing-a-basic-trie-node/30084181#30084181", "title": "incompatible pointer types initializing initializing a basic trie node", "body": "<p>Try <code>node empty = {0, {0}};</code>.</p>\n\n<p>This is an effective way to initialize structs and arrays, or as in this case, a struct containing an array.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/201101/how-to-initialize-an-array-in-c\">How to initialize all members of an array to the same value?</a> has more on array initialization.  But you can also embed the initializer into a struct, as shown here.</p>\n"}, {"comments": [{"owner": {"reputation": 666, "user_id": 4414387, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/47f3e1c0e0366cae9e7416f519c4ac08?s=128&d=identicon&r=PG&f=1", "display_name": "veta", "link": "https://stackoverflow.com/users/4414387/veta"}, "edited": false, "score": 0, "creation_date": 1430943391, "post_id": 30085227, "comment_id": 48286619, "body": "&gt;Remember that the initializer for every compound type requires to be enclosed in curly brackets.  I did not know this, thank you.  May I also ask how I would have created an array of node*?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 666, "user_id": 4414387, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/47f3e1c0e0366cae9e7416f519c4ac08?s=128&d=identicon&r=PG&f=1", "display_name": "veta", "link": "https://stackoverflow.com/users/4414387/veta"}, "edited": false, "score": 0, "creation_date": 1431003406, "post_id": 30085227, "comment_id": 48314722, "body": "@veta: Could you please define what you mean with &quot;created&quot;? Normally, you declare a type, the define it and then initialize it. This can be done by a single statement or seperately (but there are forbidden combinations)"}], "tags": [], "owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "is_accepted": false, "score": 0, "last_activity_date": 1430938319, "creation_date": 1430938319, "answer_id": 30085227, "question_id": 30084031, "link": "https://stackoverflow.com/questions/30084031/incompatible-pointer-types-initializing-initializing-a-basic-trie-node/30085227#30085227", "title": "incompatible pointer types initializing initializing a basic trie node", "body": "<p>It is ok to rely on permanent variables (non-auto,not dynamic) to be 0-initialized. However, the errors report a type error: <code>next</code> is an array of pointers, while you initialize it with a pointer to an array. If you really want a pointer to array, use <code>struct node (*next)[]</code>).</p>\n\n<p>Therefore the second message which already includes the hint that you have a nested compound data type (array in struct). Remember that the initializer for every compound type requires to be enclosed in curly brackets.</p>\n"}], "owner": {"reputation": 666, "user_id": 4414387, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/47f3e1c0e0366cae9e7416f519c4ac08?s=128&d=identicon&r=PG&f=1", "display_name": "veta", "link": "https://stackoverflow.com/users/4414387/veta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 436, "favorite_count": 0, "accepted_answer_id": 30084181, "answer_count": 2, "score": 0, "last_activity_date": 1430938319, "creation_date": 1430934437, "last_edit_date": 1430934670, "question_id": 30084031, "link": "https://stackoverflow.com/questions/30084031/incompatible-pointer-types-initializing-initializing-a-basic-trie-node", "title": "incompatible pointer types initializing initializing a basic trie node", "body": "<p>I know C is very finnicky about file level initialization.  Or rather I just don't know what constant expression means yet.</p>\n\n<p>What I want to do is initialize a node (aka struct node) with all null pointers.</p>\n\n<pre><code>//Trie node definition\ntypedef struct node{\n    bool is_word;\n    struct node* next[27]; //27 for the valid number of chars\n\n}node;\n\n\nstruct node* empties[27];\nnode empty = {.is_word = 0, .next = empties};\n</code></pre>\n\n<hr>\n\n<pre><code>dictionary.c:24:33: error: incompatible pointer types initializing 'struct node *' with an\n      expression of type 'struct node *[27]' [-Werror,-Wincompatible-pointer-types]\nnode empty = {.is_word=0,.next =empties};\n                                ^~~~~~~\ndictionary.c:24:33: error: suggest braces around initialization of subobject\n      [-Werror,-Wmissing-braces]\nnode empty = {.is_word=0,.next =empties};\n</code></pre>\n\n<p>I'm getting an error when I try to initialize this.  I would also try manually initializing the members but 27 indexes makes that very tedious.  Is there a way to loop initialize at the file level?</p>\n"}, {"tags": ["c++", "c", "lua"], "comments": [{"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1430934747, "post_id": 30084007, "comment_id": 48281256, "body": "Have you looked at any of the <i>number</i> of C++ binding libraries that exist for lua?"}, {"owner": {"reputation": 6039, "user_id": 439599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5b60ad58b64cdd58cd3bbc7ec30a0fe?s=128&d=identicon&r=PG", "display_name": "uesp", "link": "https://stackoverflow.com/users/439599/uesp"}, "edited": false, "score": 0, "creation_date": 1430934826, "post_id": 30084007, "comment_id": 48281313, "body": "See <a href=\"http://stackoverflow.com/questions/8094992/register-c-function-in-lua\" title=\"register c function in lua\">stackoverflow.com/questions/8094992/register-c-function-in-l&zwnj;&#8203;ua</a>"}, {"owner": {"reputation": 347, "user_id": 2359879, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3f675292839a2c69f5f0be5a33a45105?s=128&d=identicon&r=PG", "display_name": "413X", "link": "https://stackoverflow.com/users/2359879/413x"}, "edited": false, "score": 0, "creation_date": 1430935191, "post_id": 30084007, "comment_id": 48281558, "body": "Thank you uesp, that looked interesting. Will read up and give some of the ideas a try."}], "owner": {"reputation": 347, "user_id": 2359879, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3f675292839a2c69f5f0be5a33a45105?s=128&d=identicon&r=PG", "display_name": "413X", "link": "https://stackoverflow.com/users/2359879/413x"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 1, "closed_date": 1430947286, "answer_count": 0, "score": 0, "last_activity_date": 1430937716, "creation_date": 1430934375, "question_id": 30084007, "link": "https://stackoverflow.com/questions/30084007/lua-set-a-function-from-a-class", "closed_reason": "Duplicate", "title": "Lua - set a function from a class", "body": "<p>I am currently trying to learn how to bridge Lua with C++ and write scripts. The problem that I have is that most of the tutorial or documentation is somewhat simplified. Or maybe I have the wrong approach, which is why I am asking here now.</p>\n\n<p>I am trying to initialize the meta table and more specifically. Trying to add functions. Like so;</p>\n\n<pre><code>luaL_Reg rmFuncs[] =\n    {\n        { \"rotate\", RotateBlocks },\n        { NULL, NULL }\n    };\n</code></pre>\n\n<p>But to add RotateBlocks is a bit tricky. All examples that I've found is done in main and not in classes. RotateBlocks is actually Application::RotateBlocks. </p>\n\n<p>So the only way for me to make it work is like this:</p>\n\n<pre><code>static int RotateBlocks(lua_State* L);\n</code></pre>\n\n<p>Is this the only way? Because this causes a lot of problems. As it is static, I cant actually rotate the objects that I want inside the function. Because all my membervalues complain on the function being static.</p>\n\n<p>So how do I actually do anything useful inside my functions and not just printf a random sentence as in all the tutorials or documentation?</p>\n"}, {"tags": ["c", "arrays", "function", "pointers"], "comments": [{"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1430934535, "post_id": 30083814, "comment_id": 48281132, "body": "It is not clear what you are trying to achieve in function row1."}, {"owner": {"reputation": 112, "user_id": 4871749, "user_type": "registered", "accept_rate": 47, "profile_image": "https://graph.facebook.com/1103151869700119/picture?type=large", "display_name": "ibadia", "link": "https://stackoverflow.com/users/4871749/ibadia"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1430934767, "post_id": 30083814, "comment_id": 48281268, "body": "basically i want to pass the array A[5] to function row1 .. and i am trying to check that whether it is successfully passed or not , that is why i am using printf(&quot;%d&quot;,I[i]) to check... I am getting correct values of A[5] in function row1 but the problem is this that theoretically i should get ADDRESS of A[5] in FUNCTION ROW1  ...."}, {"owner": {"reputation": 10428, "user_id": 3135317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e914266956f4052eef356be7850ea49?s=128&d=identicon&r=PG&f=1", "display_name": "FoggyDay", "link": "https://stackoverflow.com/users/3135317/foggyday"}, "edited": false, "score": 0, "creation_date": 1430935128, "post_id": 30083814, "comment_id": 48281518, "body": "CORRECT: <code>int A[5]; ... fscanf(fpc,&quot;%d&quot;,&amp;A[j]);</code>;  INCORRECT: <code>AD[j]=&amp;A[j]</code>;  BETTER: <code>AD = A; k = AD[j];</code>  ... OR ... (if you must) <code>AD = &amp;A[j]; k = AD[0];</code>"}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1430935696, "post_id": 30083814, "comment_id": 48281871, "body": "Side note: use <code>&quot;%p&quot;</code> in order to print pointers (<code>AD[j]</code> in the case above). Your code will truncate the printed values on 64-bit platforms (or more generally, as SO users like to put it, your code yields undefined behavior)."}], "answers": [{"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1430938746, "last_edit_date": 1430938746, "creation_date": 1430935673, "answer_id": 30084410, "question_id": 30083814, "link": "https://stackoverflow.com/questions/30083814/passing-array-pointer-to-function-in-c/30084410#30084410", "title": "passing array pointer to function in C", "body": "<p>If you want to pass an array of pointers then the function declaration and its call will look like</p>\n\n<pre><code>void row1 (int *AD[] );\n\n//...\n\nrow1( AD );    \n</code></pre>\n\n<p>Take into account that the function must be declared before its call.</p>\n\n<p>As for the function itself then it is not clear what you are trying to achieve within the function.</p>\n\n<p>Also as array AD is an array of pointers then you should use format specifier <code>%p</code> in printf function</p>\n\n<pre><code>printf(\"%p   \",AD[j]);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 1, "last_activity_date": 1430936465, "creation_date": 1430936465, "answer_id": 30084655, "question_id": 30083814, "link": "https://stackoverflow.com/questions/30083814/passing-array-pointer-to-function-in-c/30084655#30084655", "title": "passing array pointer to function in C", "body": "<p>The declaration ...</p>\n\n<pre><code>int *AD[5];\n</code></pre>\n\n<p>... declares <code>AD</code> to be an array of five pointers to <code>int</code>.  You initialize each member with a pointer to the corresponding member of <code>A</code> (which seems wasteful, but whatever).</p>\n\n<p>You later perform this call:</p>\n\n<pre><code>    row1(AD[0]);    \n</code></pre>\n\n<p>That's fine: it passes the first element of <code>AD</code> to the function.  Since <code>AD[0]</code> is a pointer to <code>A[0]</code>, that's equivalent to either of these:</p>\n\n<pre><code>    row1(&amp;A[0]);    \n    /* or */\n    row1(A);    \n</code></pre>\n\n<p>Note especially the latter.</p>\n\n<p>Now, function <code>row()</code> is declared like so:</p>\n\n<pre><code>void row1 (int AD[0])\n</code></pre>\n\n<p>That appears to declare function parameter <code>AD</code> as an array of zero <code>int</code>s, which would be invalid, but in fact, array lengths in function argument declarations are ignored.  That declaration is equivalent to either of these:</p>\n\n<pre><code>void row1 (int AD[])\n/* or */\nvoid row1 (int *AD)\n</code></pre>\n\n<p>That's consistent with the argument you are passing, but note that the <code>AD</code> in function <code>row1()</code> is distinct from the <code>AD</code> in <code>main()</code>, <em>and they have different and incompatible types</em>.</p>\n\n<p>When in function <code>row1()</code> you have ...</p>\n\n<pre><code>    I[i]=AD[i];\n</code></pre>\n\n<p>... you are assigning the value <em>pointed to</em> by pointer <code>AD + i</code>.  The way you set things up, this works out to the value that could be expressed as <code>A[i]</code> in <code>main()</code>.</p>\n\n<p>If indeed you want to print a representation of the <em>pointers</em> themselves, then you could do it in <code>row1()</code> like so:</p>\n\n<pre><code>int i;\nfor (i = 0; i &lt; 5; i++) {\n    printf(\"%p,        \", AD++);\n}\n</code></pre>\n\n<p>Note that it's the pointer itself being printed, not the thing it refers to.  Note also that that depends for its correctness on the manner in which <code>main()</code> initializes (its) <code>AD</code>.</p>\n\n<p>Alternatively, you could rewrite <code>row1()</code> like so:</p>\n\n<pre><code>void row1 (int *AD[])\n{\n    int i;\n    for(i = 0; i &lt; 5; i++)\n    {\n        printf(\"%p,        \", AD[i]);\n    }   \n}\n</code></pre>\n\n<p>And call it from <code>main()</code> like so:</p>\n\n<pre><code>row1(AD);\n</code></pre>\n\n<p>Note there that you are passing the whole array, not just a single element.  That's your only alternative if you cannot rely on the members of <code>main()</code>'s <code>AD</code> to be pointers to consecutive members on an array.</p>\n"}], "owner": {"reputation": 112, "user_id": 4871749, "user_type": "registered", "accept_rate": 47, "profile_image": "https://graph.facebook.com/1103151869700119/picture?type=large", "display_name": "ibadia", "link": "https://stackoverflow.com/users/4871749/ibadia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "accepted_answer_id": 30084655, "answer_count": 2, "score": 0, "last_activity_date": 1430938746, "creation_date": 1430933775, "last_edit_date": 1430934881, "question_id": 30083814, "link": "https://stackoverflow.com/questions/30083814/passing-array-pointer-to-function-in-c", "title": "passing array pointer to function in C", "body": "<p>In my <code>main()</code> function I initialize the array pointer <code>*AD</code> and copy the address of array <code>A[5]</code> into pointer <code>AD[5]</code> using for loop.  When I pass this pointer <code>AD</code> to function <code>row1()</code> and assign all of its values (in AD) to <code>I[5]</code> I am getting the real values of <code>A[5]</code> instead of the address.  On the other hand, when i print the value of the <code>AD[5]</code> pointer in <code>main()</code> I get the address. I am using DEV c++ compiler.</p>\n\n<p>Why in the function am I getting real values? </p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(void)\n{\n    int test;\n    int A[5];\n    int *AD[5];\n    FILE *fpc;\n    fpc=fopen(\"testing.txt\",\"r\");\n    fscanf(fpc,\"%d\",&amp;test);\n    int i;\n    for(i=0;i&lt;test;i++)\n    {\n        int j;\n        for(j=0;j&lt;5;j++)\n        {\n            fscanf(fpc,\"%d\",&amp;A[j]);\n            AD[j]=&amp;A[j];\n            printf(\"%d   \",AD[j]);\n\n        }\n        puts(\"\");\n\n        row1(AD[0]);    \n    }\n}\n\nvoid row1 (int AD[0])\n{\n    int I[5];\n    int i;\n    for(i=0;i&lt;5;i++)\n    {\n        I[i]=AD[i];\n        AD[i]=AD[i]+1;\n        printf(\"%d,        \",I[i]);\n    }   \n    puts(\"\");\n    puts(\"\");\n    puts(\"\");\n    puts(\"\");\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "function", "parameters"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1430933132, "post_id": 30083518, "comment_id": 48280180, "body": "Please post the code where you call <code>makeMoves</code>."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1430933135, "post_id": 30083518, "comment_id": 48280183, "body": "<code>sizeof(oldBoard) &#47; sizeof(oldBoard[0])</code> isn&#39;t doing what you think it is. <code>oldBoard</code> is a pointer in this function; not an array."}, {"owner": {"reputation": 41, "user_id": 4862537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0c89f6edd546f78ad7c8cddc2573fe9f?s=128&d=identicon&r=PG&f=1", "display_name": "tath", "link": "https://stackoverflow.com/users/4862537/tath"}, "edited": false, "score": 0, "creation_date": 1430933510, "post_id": 30083518, "comment_id": 48280456, "body": "i have not finish the program yet, so i dont call the function makeMoves. I want to take the length of the array. i think that i have the full size of array(bit size) and i divide this with one cell of the array. So i get the length"}], "answers": [{"comments": [{"owner": {"reputation": 1054, "user_id": 2930456, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/2Etu5.jpg?s=128&g=1", "display_name": "2trill2spill", "link": "https://stackoverflow.com/users/2930456/2trill2spill"}, "edited": false, "score": 0, "creation_date": 1430933744, "post_id": 30083622, "comment_id": 48280601, "body": "don&#39;t cast the result of malloc in c."}, {"owner": {"reputation": 3099, "user_id": 1978011, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ca7712f5e45279a01ee1b7f273248e15?s=128&d=identicon&r=PG", "display_name": "user1978011", "link": "https://stackoverflow.com/users/1978011/user1978011"}, "reply_to_user": {"reputation": 1054, "user_id": 2930456, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/2Etu5.jpg?s=128&g=1", "display_name": "2trill2spill", "link": "https://stackoverflow.com/users/2930456/2trill2spill"}, "edited": false, "score": 0, "creation_date": 1430933822, "post_id": 30083622, "comment_id": 48280648, "body": "@2trill2spill as you wish :)"}], "tags": [], "owner": {"reputation": 3099, "user_id": 1978011, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ca7712f5e45279a01ee1b7f273248e15?s=128&d=identicon&r=PG", "display_name": "user1978011", "link": "https://stackoverflow.com/users/1978011/user1978011"}, "is_accepted": true, "score": 1, "last_activity_date": 1430934292, "last_edit_date": 1430934292, "creation_date": 1430933144, "answer_id": 30083622, "question_id": 30083518, "link": "https://stackoverflow.com/questions/30083518/how-to-declare-array-size-with-a-parameter-in-c/30083622#30083622", "title": "How to declare array size with a parameter in c", "body": "<p>In C, you have to allocate dynamic storage in such cases.</p>\n\n<pre><code>char *result = malloc(oldBoardLength);\ncopyBoard(oldBoard, result);\nfree(result);\n</code></pre>\n\n<p>However, you have to pass oldBoardLength into the function, because an argument like <code>arr[]</code> or <code>arr[8]</code> will always decay to a pointer. Taking <code>sizeof</code> on a pointer is not what you have intended. Have a look at the output of this example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define COUNT_OF(x) ((sizeof(x)/sizeof(0[x])) / ((size_t)(!(sizeof(x) % sizeof(0[x])))))\n\nlong int test(char array[16]) {\n        return COUNT_OF(array);\n}\n\nvoid main(void) {\n        char a[16];\n        printf(\"%ld\\n\", COUNT_OF(a));  // prints 16\n        printf(\"%ld\\n\", test(a));      // prints 8 or 4 for 64bit or 32bit systems\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1054, "user_id": 2930456, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/2Etu5.jpg?s=128&g=1", "display_name": "2trill2spill", "link": "https://stackoverflow.com/users/2930456/2trill2spill"}, "is_accepted": false, "score": 0, "last_activity_date": 1430935550, "last_edit_date": 1495535049, "creation_date": 1430935550, "answer_id": 30084372, "question_id": 30083518, "link": "https://stackoverflow.com/questions/30083518/how-to-declare-array-size-with-a-parameter-in-c/30084372#30084372", "title": "How to declare array size with a parameter in c", "body": "<p>First I would use <code>char *oldBoard</code> instead of <code>char oldBoard[]</code> There the same but I think <code>char *oldBoard</code> is clearer. Second you don't wan't to use <code>sizeof</code> as that will not return the correct length, you would just get the size of a pointer. <code>sizeof(oldBoard) / sizeof(oldBoard[0]);</code> only works on statically allocated arrays or at least that is what this says <a href=\"https://stackoverflow.com/questions/5604838/how-to-find-array-length-in-c\">How do I find the length/number of items present for an array?</a> . Use a another variable to keep track of the array length. Finally use dynamic allocation aka <code>malloc()</code> so that the values don't become garbage when you pass them between functions. I'm not quite sure what you are trying to do but here is a example of what I think your trying to do.</p>\n\n<pre><code>char *makeMoves(char *oldBoard, int len, int moveType, int empties, char player)\n{\n    char *result;\n\n    result = malloc(len);\n    if(result == NULL)\n    {\n        return NULL;\n    }\n\n    copyBoard(oldBoard, result);\n\n    return result;\n}\n\nint main(void)\n{\n\n    char *board, *result;\n    int len = 10;\n    int moveType, empties;\n    char player;\n\n    board = malloc(len);\n    if(board == NULL)\n    {\n        return -1;\n    }\n\n    result = makeMoves(board, len, moveType, empties, player);\n    if(result == NULL)\n    {\n        return -1;\n    }\n\n    free(board);\n    free(result);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5482, "user_id": 3079266, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3957246a6593b75c3b706364f0c553d?s=128&d=identicon&r=PG&f=1", "display_name": "Mints97", "link": "https://stackoverflow.com/users/3079266/mints97"}, "is_accepted": false, "score": 0, "last_activity_date": 1430937917, "creation_date": 1430937917, "answer_id": 30085098, "question_id": 30083518, "link": "https://stackoverflow.com/questions/30083518/how-to-declare-array-size-with-a-parameter-in-c/30085098#30085098", "title": "How to declare array size with a parameter in c", "body": "<p>In C, the most often used idiom is passing the expected number of elements your pointer parameter points to as a separate parameter. Should be something like this:</p>\n\n<pre><code>char* makeMoves(char *oldBoard, int oldBoardLength, int moveType, int empties, char player) {\n    /* ... */\n}\n</code></pre>\n\n<p>This way, the caller of your function is repsonsible for passing in the correct length.</p>\n"}], "owner": {"reputation": 41, "user_id": 4862537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0c89f6edd546f78ad7c8cddc2573fe9f?s=128&d=identicon&r=PG&f=1", "display_name": "tath", "link": "https://stackoverflow.com/users/4862537/tath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3046, "favorite_count": 0, "accepted_answer_id": 30083622, "answer_count": 3, "score": 1, "last_activity_date": 1430937917, "creation_date": 1430932857, "last_edit_date": 1430932991, "question_id": 30083518, "link": "https://stackoverflow.com/questions/30083518/how-to-declare-array-size-with-a-parameter-in-c", "title": "How to declare array size with a parameter in c", "body": "<p>Im writing a function in c and here is my code:</p>\n\n<pre><code>char* makeMoves(char oldBoard[], int moveType, int empties, char player){\n    int oldBoardLength;\n    oldBoardLength = sizeof(oldBoard) / sizeof(oldBoard[0]);\n    char result[oldBoardLength];\n    copyBoard(oldBoard, result);\n}\n</code></pre>\n\n<p>I think that this line has a problem:</p>\n\n<pre><code>char result[oldBoardLength];\n</code></pre>\n\n<p>how can i create this array with length=oldBoardLength?\nIn java is something like this:</p>\n\n<pre><code>char[] result = new char[oldBoard.length];\n</code></pre>\n\n<p>but in c i don;t know how to create this. Can anyone help me?</p>\n"}, {"tags": ["c", "xcode", "switch-statement"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1430932049, "post_id": 30083222, "comment_id": 48279522, "body": "There is nothing to explain, the message is clear."}, {"owner": {"reputation": 197, "user_id": 4663249, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh5.googleusercontent.com/-iI0yx8OnMAo/AAAAAAAAAAI/AAAAAAAAAYs/FKHIK8Y3UVQ/photo.jpg?sz=128", "display_name": "karan satia", "link": "https://stackoverflow.com/users/4663249/karan-satia"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1430932200, "post_id": 30083222, "comment_id": 48279631, "body": "I&#39;m an idiot...I set the third scan item (the second number to complete the calculation) to be x, overwriting the previous declaration. WHOOPS."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1430932231, "post_id": 30083222, "comment_id": 48279649, "body": "<code>printf (&quot;%f&quot;, calculator(x,y,z));</code>"}], "answers": [{"comments": [{"owner": {"reputation": 197, "user_id": 4663249, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh5.googleusercontent.com/-iI0yx8OnMAo/AAAAAAAAAAI/AAAAAAAAAYs/FKHIK8Y3UVQ/photo.jpg?sz=128", "display_name": "karan satia", "link": "https://stackoverflow.com/users/4663249/karan-satia"}, "edited": false, "score": 0, "creation_date": 1430932411, "post_id": 30083247, "comment_id": 48279771, "body": "so then I just need to specify that I&#39;ll be passing a double (or a float) with &quot;%f&quot;, correct? Worked when I ran it. Thanks for clarifying."}], "tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 2, "last_activity_date": 1430932150, "last_edit_date": 1430932150, "creation_date": 1430932081, "answer_id": 30083247, "question_id": 30083222, "link": "https://stackoverflow.com/questions/30083222/can-somebody-explain-this-c-error-message/30083247#30083247", "title": "can somebody explain this C error message?", "body": "<p>The prototype of <code>printf()</code> is</p>\n\n<pre><code>printf(const char*,...);\n</code></pre>\n\n<p>but you are passing <code>double</code> to it hence the error</p>\n"}, {"tags": [], "owner": {"reputation": 577, "user_id": 2743547, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100002936490034/picture?type=large", "display_name": "Tirupati Rao", "link": "https://stackoverflow.com/users/2743547/tirupati-rao"}, "is_accepted": false, "score": 0, "last_activity_date": 1430937252, "last_edit_date": 1430937252, "creation_date": 1430932443, "answer_id": 30083378, "question_id": 30083222, "link": "https://stackoverflow.com/questions/30083222/can-somebody-explain-this-c-error-message/30083378#30083378", "title": "can somebody explain this C error message?", "body": "<p>Prototype of printf function is:</p>\n\n<p><code>int printf( const char *format ,\u2026)</code></p>\n\n<p>format - It is constant character string.</p>\n\n<pre><code> double calculator(double x,char y, double z) {\n</code></pre>\n\n<p>but the function is returning double value.\nso it is printing error message as</p>\n\n<blockquote>\n  <p>\"Passing 'double' to parameter of incompatible type 'cont char *'\"</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 197, "user_id": 4663249, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh5.googleusercontent.com/-iI0yx8OnMAo/AAAAAAAAAAI/AAAAAAAAAYs/FKHIK8Y3UVQ/photo.jpg?sz=128", "display_name": "karan satia", "link": "https://stackoverflow.com/users/4663249/karan-satia"}, "edited": false, "score": 0, "creation_date": 1430935122, "post_id": 30083394, "comment_id": 48281515, "body": "what does &quot;stderr&quot; do? Also, when you get the if statements in the code body not equal to &quot;1&quot;, are you saying that somebody didn&#39;t enter a value for the variable? As in, 1 is true, it is true that we scanned for an input and didn&#39;t receive one?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 197, "user_id": 4663249, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh5.googleusercontent.com/-iI0yx8OnMAo/AAAAAAAAAAI/AAAAAAAAAYs/FKHIK8Y3UVQ/photo.jpg?sz=128", "display_name": "karan satia", "link": "https://stackoverflow.com/users/4663249/karan-satia"}, "edited": false, "score": 1, "creation_date": 1430937231, "post_id": 30083394, "comment_id": 48282822, "body": "@karansatia No, it&#39;s the number of format specifiers that matched the input, in this case it&#39;s just one, before you use any function, read the documentation until you fully understand what the function does and how it should be used."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 1, "last_activity_date": 1430932498, "creation_date": 1430932498, "answer_id": 30083394, "question_id": 30083222, "link": "https://stackoverflow.com/questions/30083222/can-somebody-explain-this-c-error-message/30083394#30083394", "title": "can somebody explain this C error message?", "body": "<p>Your program has several problems, each line of it is likely to be wrong</p>\n\n<ol>\n<li><p>You pass a <code>char</code> to <code>scanf()</code> with the <code>\"%s\"</code> specifier, <code>scanf()</code> will think it's a <code>char</code> pointer and it will try to store at least 2 characters in it, but there is only space for one. The correct specifier is <code>\"%c\"</code>, you should leave a white space in front of the <code>c</code> or it will consume the <code>'\\n'</code> left in the buffer by the previous <code>scanf()</code>.</p></li>\n<li><p>You don't check for the return value of <code>scanf()</code> which will cause undefined behavior when you call <code>calculator()</code>.</p></li>\n<li><p>You passed a <code>double</code> as the first parameter to <code>printf()</code>, it expects a <code>char</code> pointer, and preferrably pointing to a string literal, to print a <code>double</code> you need</p>\n\n<pre><code>printf(\"%f\", doubleValue);\n</code></pre></li>\n</ol>\n\n<p>This code would fix all what I point above</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ndouble calculator(double x, char operator double y)\n{\n    switch (operator)\n    {\n    case '+':\n        return x + y;\n     case '-':\n        return x - y;\n    case '/':\n        if (y == 0)\n            return 0.0; /* division by zero */\n        return x / y;\n    case '*':\n        return x * y;\n    default:\n        break;\n    }\n    return 0.0;\n}\n\n\nint main(int argc, const char * argv[])\n{\n    char   operator;\n    double x, y;\n\n    printf(\"Please enter a number to be operated on\\n\");\n    if (scanf(\"%lf\", &amp;x) != 1)\n     {\n        fprintf(stderr, \"Invalid input\\n\");\n        return -1;\n     }\n\n    printf (\"Enter a valid operator\\n\");\n    if (scanf(\" %c\", &amp;operator) != 1)\n     {\n        fprintf(stderr, \"Invalid input\\n\");\n        return -1;\n     }\n\n    printf(\"Please enter a second number to complete the calculation\\n\");\n    if (scanf(\"%lf\", &amp;y) != 1)\n     {\n        fprintf(stderr, \"Invalid input\\n\");\n        return -1;\n     }\n    printf(\"%f %c %f = %f\\n\", x, operator, y, calculator(x, operator, y));\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 197, "user_id": 4663249, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh5.googleusercontent.com/-iI0yx8OnMAo/AAAAAAAAAAI/AAAAAAAAAYs/FKHIK8Y3UVQ/photo.jpg?sz=128", "display_name": "karan satia", "link": "https://stackoverflow.com/users/4663249/karan-satia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1430937252, "creation_date": 1430932009, "question_id": 30083222, "link": "https://stackoverflow.com/questions/30083222/can-somebody-explain-this-c-error-message", "title": "can somebody explain this C error message?", "body": "<p>I'm writing a program to take two numbers and an operator and perform a calculation. I've written it in Objective-C previously, and am going back over my work and trying to write it in C with switch statements. I keep getting the following error message:\n\"Passing 'double' to parameter of incompatible type 'cont char *'\" in relation to the line where I call and print my function (right before the <code>return 0;</code> at the end). I'd like to understand what is actually causing this issue (vs just finding out how to fix it). I want to make sure I can avoid this from happening down the line, whatever the reason.        </p>\n\n<pre><code> #include &lt;stdio.h&gt;\n    double calculator(double x,char y, double z) {\n        switch (y) {\n            case '+':\n                return x+z;\n                break;\n             case '-':\n                return x-z;\n                break;\n            case '/':\n                return x/z;\n                break;\n            case '*':\n                return x*z;\n                break;\n            default:\n                return 0;\n                break;\n                }\n    }\n\n\n    int main(int argc, const char * argv[]) {\n\n        char y;\n        double x, z;\n\n        printf (\"Please enter a number to be operated on\\n\");\n        scanf(\"%lf\", &amp;x);\n        printf (\"Enter a valid operator\\n\");\n        scanf(\"%s\", &amp;y);\n        printf(\"Please enter a second number to complete the calculation\\n\");\n        scanf(\"%lf\", &amp;x);\n\n        printf (calculator(x,y,z));\n\n                return 0;\n\n    }\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1430932290, "post_id": 30083009, "comment_id": 48279682, "body": "The &quot;clean exit&quot; is just a random consequence here. If you declare some other variables, write a little bit different code or switch a compiler, this behaviour may change. This is why it is called &quot;undefined behaviour&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 5504, "user_id": 2734224, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/3icKz.jpg?s=128&g=1", "display_name": "lord.garbage", "link": "https://stackoverflow.com/users/2734224/lord-garbage"}, "edited": false, "score": 0, "creation_date": 1430932514, "post_id": 30083331, "comment_id": 48279836, "body": "Thank you so much! This was driving me crazy. If it would be appropriate to curse here, I would. I totally missed this!"}], "tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 5, "last_activity_date": 1430932319, "creation_date": 1430932319, "answer_id": 30083331, "question_id": 30083009, "link": "https://stackoverflow.com/questions/30083009/why-does-this-program-segfault-when-returning-a-pointer-to-a-local-static-variab/30083331#30083331", "title": "Why does this program segfault when returning a pointer to a local static variable?", "body": "<p>In this line,</p>\n\n<pre><code>        printf(\"tmat[%d][%d] = %d\\n\", i, j, tmat[i][j]);\n</code></pre>\n\n<p>When <code>i&gt;1</code> your code causes undefined behaviour since you <code>tmat</code> is declared as <code>int tmat[2][4];</code>. </p>\n\n<p>The same problem exists in all three code snippets and you just happen to get segfault only for the first one. This is not at all related to whether you return a a pointer to a function scoped <code>static</code> variable.</p>\n"}], "owner": {"reputation": 5504, "user_id": 2734224, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/3icKz.jpg?s=128&g=1", "display_name": "lord.garbage", "link": "https://stackoverflow.com/users/2734224/lord-garbage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 30083331, "answer_count": 1, "score": 0, "last_activity_date": 1430932319, "creation_date": 1430931369, "last_edit_date": 1430931933, "question_id": 30083009, "link": "https://stackoverflow.com/questions/30083009/why-does-this-program-segfault-when-returning-a-pointer-to-a-local-static-variab", "title": "Why does this program segfault when returning a pointer to a local static variable?", "body": "<p>This is related to an <a href=\"https://stackoverflow.com/questions/30054085/is-this-a-valid-way-to-return-a-two-dimensional-array\">earlier question</a> of mine. I tried expanding the code a little bit and to play around with different ways of returning pointers to local static variables, especially returning two-dimensional arrays. (This is seriously just to understand how pointers to arrays work and how they behave in function environments. It has not even the slightest intent of returning arrays the smart way using <code>struct</code>s.) I wrote two functions both transpose matrices. The function <code>transpose()</code> only transposes 2x4-matrices and  the function <code>transpose_generic()</code> is supposed to transpose matrices of arbitrary size. There is no real use to them. After I have declared and defined the functions I call them from <code>int main(int argc, char *argv[]){}</code>. The two matrices that have been transposed are supposed to be printed to <code>stdout</code> in a simple for-loop. And here is something I don't understand. Depending on whether I declare the matrices that are supposed to be transposed as global or local variables I get a segfault or \"clean\" exit. I can also prevent the compiled program from segfaulting by using a for loop after the for loop that prints the transposed matrices to <code>stdout</code>. But the for-loop needs to use a new index. I'm sure I'm missing something very basic but I cannot figure this out on my own. Even after extensive internet searching I'm still puzzled. So maybe someone can enlighten me. Here is the code:</p>\n\n<h2>Will segfault</h2>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint mat1[2][4] = {\n    {9, 10, 11, 12},\n    {13, 14, 15, 16}\n};\n\nint mat2[2][4] = {\n    {1, 2, 3, 4},\n    {5, 6, 7, 8}\n};\n\ntypedef matx[2];\nmatx *transpose(int matrix[][4]);\n\ntypedef maty[];\nmaty *transpose_generic(int nrow, int ncol, int matrix1[nrow][ncol], int matrix2[nrow][ncol]);\n\nint main(int argc, char *argv[]) {\n\n    /* This may need a little bit of clarification. Here we want to declare a\n     * pointer to an array and we need the round brackets () for this. If we\n     * were simply to write *mat_transpose[2] we would declare an array of\n     * pointers since [] has higher precedence than *. */\n    int (*mat_transpose)[2];\n\n    int tmat[2][4];\n    int i;\n    int j;\n\n    mat_transpose = transpose(mat1);\n    transpose_generic(2, 4, mat2, tmat);\n\n    for (j = 0; j &lt; 2; j++) {\n        for (i = 0; i &lt; 4; i++) {\n            printf(\"mat_transpose[%d][%d] = %d\\n\", i, j, mat_transpose[i][j]);\n            printf(\"tmat[%d][%d] = %d\\n\", i, j, tmat[i][j]);\n        }\n    }\n    return 0;\n}\n\nmatx *transpose(int matrix[][4]) {\n    static int mat[4][2];\n    int i;\n    int j;\n\n    printf(\"Transpose a 2x4 matrix\\n\");\n    for (i = 0; i &lt; 2; i++) {\n        for (j = 0; j &lt; 4; j++) {\n            mat[j][i] = matrix[i][j];\n        }\n    }\n    return mat;\n}\n\nmaty *transpose_generic(int nrow, int ncol,\n                        int matrix1[nrow][ncol],\n                        int matrix2[nrow][ncol]) {\n    int i;\n    int j;\n\n    printf(\"Transpose a matrix\\n\\n\");\n    for (i = 0; i &lt; nrow; i++) {\n        for (j = 0; j &lt; ncol; j++) {\n            matrix2[j][i] = matrix1[i][j];\n        }\n    }\n    return matrix2;\n}\n</code></pre>\n\n<h2>Will exit clean</h2>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ntypedef matx[2];\nmatx *transpose(int matrix[][4]);\n\ntypedef maty[];\nmaty *transpose_generic(int nrow, int ncol, int matrix1[nrow][ncol], int matrix2[nrow][ncol]);\n\nint main(int argc, char *argv[]) {\n\n    int mat1[2][4] = {\n        {9, 10, 11, 12},\n        {13, 14, 15, 16}\n    };\n\n    int mat2[2][4] = {\n        {1, 2, 3, 4},\n        {5, 6, 7, 8}\n    };\n\n\n    /* This may need a little bit of clarification. Here we want to declare a\n     * pointer to an array and we need the round brackets () for this. If we\n     * were simply to write *mat_transpose[2] we would declare an array of\n     * pointers since [] has higher precedence than *. */\n    int (*mat_transpose)[2];\n\n    int tmat[2][4];\n    int i;\n    int j;\n\n    mat_transpose = transpose(mat1);\n    transpose_generic(2, 4, mat2, tmat);\n\n    for (j = 0; j &lt; 2; j++) {\n        for (i = 0; i &lt; 4; i++) {\n            printf(\"mat_transpose[%d][%d] = %d\\n\", i, j, mat_transpose[i][j]);\n            printf(\"tmat[%d][%d] = %d\\n\", i, j, tmat[i][j]);\n        }\n    }\n    return 0;\n}\n\nmatx *transpose(int matrix[][4]) {\n    static int mat[4][2];\n    int i;\n    int j;\n\n    printf(\"Transpose a 2x4 matrix\\n\");\n    for (i = 0; i &lt; 2; i++) {\n        for (j = 0; j &lt; 4; j++) {\n            mat[j][i] = matrix[i][j];\n        }\n    }\n    return mat;\n}\n\nmaty *transpose_generic(int nrow, int ncol,\n        int matrix1[nrow][ncol],\n        int matrix2[nrow][ncol]) {\n    int i;\n    int j;\n\n    printf(\"Transpose a matrix\\n\\n\");\n    for (i = 0; i &lt; nrow; i++) {\n        for (j = 0; j &lt; ncol; j++) {\n            matrix2[j][i] = matrix1[i][j];\n        }\n    }\n    return matrix2;\n}\n</code></pre>\n\n<h2>Will exit clean</h2>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint mat1[2][4] = {\n    {9, 10, 11, 12},\n    {13, 14, 15, 16}\n};\n\nint mat2[2][4] = {\n    {1, 2, 3, 4},\n    {5, 6, 7, 8}\n};\n\ntypedef matx[2];\nmatx *transpose(int matrix[][4]);\n\ntypedef maty[];\nmaty *transpose_generic(int nrow, int ncol, int matrix1[nrow][ncol], int matrix2[nrow][ncol]);\n\nint main(int argc, char *argv[]) {\n\n    /* This may need a little bit of clarification. Here we want to declare a\n     * pointer to an array and we need the round brackets () for this. If we\n     * were simply to write *mat_transpose[2] we would declare an array of\n     * pointers since [] has higher precedence than *. */\n    int (*mat_transpose)[2];\n\n    int tmat[2][4];\n    int i;\n    int j;\n    int k;\n\n    mat_transpose = transpose(mat1);\n    transpose_generic(2, 4, mat2, tmat);\n\n    for (j = 0; j &lt; 2; j++) {\n        for (i = 0; i &lt; 4; i++) {\n            printf(\"mat_transpose[%d][%d] = %d\\n\", i, j, mat_transpose[i][j]);\n            printf(\"tmat[%d][%d] = %d\\n\", i, j, tmat[i][j]);\n        }\n    }\n    for (k = 0; k &lt; 1; k++) {\n        printf(\"H\");\n    }\n    return 0;\n}\n\nmatx *transpose(int matrix[][4]) {\n    static int mat[4][2];\n    int i;\n    int j;\n\n    printf(\"Transpose a 2x4 matrix\\n\");\n    for (i = 0; i &lt; 2; i++) {\n        for (j = 0; j &lt; 4; j++) {\n            mat[j][i] = matrix[i][j];\n        }\n    }\n    return mat;\n}\n\nmaty *transpose_generic(int nrow, int ncol,\n        int matrix1[nrow][ncol],\n        int matrix2[nrow][ncol]) {\n    int i;\n    int j;\n\n    printf(\"Transpose a matrix\\n\\n\");\n    for (i = 0; i &lt; nrow; i++) {\n        for (j = 0; j &lt; ncol; j++) {\n            matrix2[j][i] = matrix1[i][j];\n        }\n    }\n    return matrix2;\n}\n</code></pre>\n"}, {"tags": ["c", "struct", "cuda", "dynamic-memory-allocation"], "comments": [{"owner": {"reputation": 8727, "user_id": 2999346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQ1wB.png?s=128&g=1", "display_name": "francis", "link": "https://stackoverflow.com/users/2999346/francis"}, "edited": false, "score": 0, "creation_date": 1430931737, "post_id": 30082991, "comment_id": 48279303, "body": "Why is it <code>cudaMalloc((void**)&amp;(test[i].array), size * sizeof(char));</code> and not <code>cudaMalloc((void**)&amp;(dev_test[i].array), size * sizeof(char));</code> ? Also, it should be <code>cudaMemcpy(dev_test[i].array, test[i].array, size * sizeof(char), cudaMemcpyHostToDevice);</code>."}, {"owner": {"reputation": 1339, "user_id": 2419822, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/DWBfd.png?s=128&g=1", "display_name": "Bakus123", "link": "https://stackoverflow.com/users/2419822/bakus123"}, "reply_to_user": {"reputation": 8727, "user_id": 2999346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQ1wB.png?s=128&g=1", "display_name": "francis", "link": "https://stackoverflow.com/users/2999346/francis"}, "edited": false, "score": 0, "creation_date": 1430932006, "post_id": 30082991, "comment_id": 48279486, "body": "@francis, it doesn&#39;t works (Segmentation fault (core dumped)). On gpu we can&#39;t allocate memory in standard way."}, {"owner": {"reputation": 8727, "user_id": 2999346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQ1wB.png?s=128&g=1", "display_name": "francis", "link": "https://stackoverflow.com/users/2999346/francis"}, "edited": false, "score": 1, "creation_date": 1430932542, "post_id": 30082991, "comment_id": 48279850, "body": "Additional friendly advice : do not pick code from a question except if you have understood the problem faced by the asker...Sorry if my suggestion didn&#39;t work. My suggestion was to allocate memory for <code>dev_test[i].array</code>, not for <code>test[i].array</code> which is already allocated on the CPU by <code>test[i].array = (char*)malloc(size * sizeof(char));</code>."}, {"owner": {"reputation": 1339, "user_id": 2419822, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/DWBfd.png?s=128&g=1", "display_name": "Bakus123", "link": "https://stackoverflow.com/users/2419822/bakus123"}, "reply_to_user": {"reputation": 8727, "user_id": 2999346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQ1wB.png?s=128&g=1", "display_name": "francis", "link": "https://stackoverflow.com/users/2999346/francis"}, "edited": false, "score": 0, "creation_date": 1430933168, "post_id": 30082991, "comment_id": 48280209, "body": "@francis, ok no problem. Yes <code>test[i].array</code> is already allocated but only on CPU, no on GPU. We can&#39;t allocate memory for <code>dev_test[i].array</code>, because this memory is only visible from device. At least I understand it so."}], "answers": [{"comments": [{"owner": {"reputation": 1339, "user_id": 2419822, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/DWBfd.png?s=128&g=1", "display_name": "Bakus123", "link": "https://stackoverflow.com/users/2419822/bakus123"}, "edited": false, "score": 0, "creation_date": 1430936688, "post_id": 30084481, "comment_id": 48282453, "body": "thanks a lot. What do you mean by &quot;flatten your data structures&quot;?"}, {"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "reply_to_user": {"reputation": 1339, "user_id": 2419822, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/DWBfd.png?s=128&g=1", "display_name": "Bakus123", "link": "https://stackoverflow.com/users/2419822/bakus123"}, "edited": false, "score": 1, "creation_date": 1430937814, "post_id": 30084481, "comment_id": 48283125, "body": "updated my answer to respond to this question.  However if you search on the CUDA tag you will find many references and examples for &quot;flattening&quot;."}], "tags": [], "owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "is_accepted": true, "score": 10, "last_activity_date": 1430937783, "last_edit_date": 1592644375, "creation_date": 1430935878, "answer_id": 30084481, "question_id": 30082991, "link": "https://stackoverflow.com/questions/30082991/memory-allocation-on-gpu-for-dynamic-array-of-structs/30084481#30084481", "title": "Memory allocation on GPU for dynamic array of structs", "body": "<ol>\n<li><p>This is allocating a new pointer to host memory:</p>\n<pre><code> test[i].array = (char*)malloc(size * sizeof(char));\n</code></pre>\n</li>\n<li><p>This is copying data to that region in host memory:</p>\n<pre><code> memcpy(test[i].array, temp, size * sizeof(char));\n</code></pre>\n</li>\n<li><p>This is <em>overwriting</em> the previously allocated pointer to host memory (from step 1 above) with a <em>new</em> pointer to device memory:</p>\n<pre><code> cudaMalloc((void**)&amp;(test[i].array), size * sizeof(char));\n</code></pre>\n</li>\n</ol>\n<p>After step 3, the data you set up in step 2 is entirely lost, and no longer accessible in any fashion.  Referring to steps 3 and 4 in the <a href=\"https://stackoverflow.com/questions/15431365/cudamemcpy-segmentation-fault\">question/answer</a> you linked:</p>\n<blockquote>\n<p>3.Create a separate int pointer on the host, let's call it <code>myhostptr</code></p>\n<p>4.cudaMalloc int storage on the device for <code>myhostptr</code></p>\n</blockquote>\n<p>You haven't done this.  You did not create a separate pointer.  You reused (erased, overwrote) an existing pointer, which was pointing to data you cared about on the host.  <a href=\"https://stackoverflow.com/questions/14284964/cuda-how-to-allocate-memory-for-data-member-of-a-class\">This question/answer</a>, also linked from the answer you linked, gives almost exactly the steps you need to follow, <em>in code</em>.</p>\n<p>Here's a modified version of your code, which properly implements the missing steps 3 and 4 (and 5) that you didn't implement correctly according to the  question/answer you linked: (refer to comments delineating steps 3,4,5)</p>\n<pre><code>$ cat t755.cu\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct Test {\n    char *array;\n};\n\n__global__ void kernel(Test *dev_test) {\n    for(int i=0; i &lt; 5; i++) {\n        printf(&quot;Kernel[0][i]: %c \\n&quot;, dev_test[0].array[i]);\n    }\n}\n\nint main(void) {\n\n    int n = 4, size = 5;\n    Test *dev_test, *test;\n\n    test = (Test*)malloc(sizeof(Test)*n);\n    for(int i = 0; i &lt; n; i++)\n        test[i].array = (char*)malloc(size * sizeof(char));\n\n    for(int i=0; i &lt; n; i++) {\n        char temp[] = { 'a', 'b', 'c', 'd' , 'e' };\n        memcpy(test[i].array, temp, size * sizeof(char));\n    }\n\n    cudaMalloc((void**)&amp;dev_test, n * sizeof(Test));\n    cudaMemcpy(dev_test, test, n * sizeof(Test), cudaMemcpyHostToDevice);\n\n    // Step 3:\n    char *temp_data[n];\n    // Step 4:\n    for (int i=0; i &lt; n; i++)\n      cudaMalloc(&amp;(temp_data[i]), size*sizeof(char));\n    // Step 5:\n    for (int i=0; i &lt; n; i++)\n      cudaMemcpy(&amp;(dev_test[i].array), &amp;(temp_data[i]), sizeof(char *), cudaMemcpyHostToDevice);\n    // now copy the embedded data:\n    for (int i=0; i &lt; n; i++)\n      cudaMemcpy(temp_data[i], test[i].array, size*sizeof(char), cudaMemcpyHostToDevice);\n\n    kernel&lt;&lt;&lt;1, 1&gt;&gt;&gt;(dev_test);\n    cudaDeviceSynchronize();\n\n    //  memory free\n    return 0;\n}\n\n$ nvcc -o t755 t755.cu\n$ cuda-memcheck ./t755\n========= CUDA-MEMCHECK\nKernel[0][i]: a\nKernel[0][i]: b\nKernel[0][i]: c\nKernel[0][i]: d\nKernel[0][i]: e\n========= ERROR SUMMARY: 0 errors\n$\n</code></pre>\n<p>Since the above methodology can be challenging for beginners, the usual advice is not to do it, but instead <em>flatten</em> your data structures.  Flatten generally means to rearrange the data storage so as to remove the embedded pointers that have to be separately allocated.</p>\n<p>A trivial example of flattening this data structure would be to use this instead:</p>\n<pre><code>struct Test {\n    char array[5];\n};\n</code></pre>\n<p>It's recognized of course that this <em>particular</em> approach would not serve every purpose, but it should illustrate the general idea/intent.  With that modification, as an example, the code becomes much simpler:</p>\n<pre><code>$ cat t755.cu\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct Test {\n    char array[5];\n};\n\n__global__ void kernel(Test *dev_test) {\n    for(int i=0; i &lt; 5; i++) {\n        printf(&quot;Kernel[0][i]: %c \\n&quot;, dev_test[0].array[i]);\n    }\n}\n\nint main(void) {\n\n    int n = 4, size = 5;\n    Test *dev_test, *test;\n\n    test = (Test*)malloc(sizeof(Test)*n);\n\n    for(int i=0; i &lt; n; i++) {\n        char temp[] = { 'a', 'b', 'c', 'd' , 'e' };\n        memcpy(test[i].array, temp, size * sizeof(char));\n    }\n\n    cudaMalloc((void**)&amp;dev_test, n * sizeof(Test));\n    cudaMemcpy(dev_test, test, n * sizeof(Test), cudaMemcpyHostToDevice);\n\n    kernel&lt;&lt;&lt;1, 1&gt;&gt;&gt;(dev_test);\n    cudaDeviceSynchronize();\n\n    //  memory free\n    return 0;\n}\n$ nvcc -o t755 t755.cu\n$ cuda-memcheck ./t755\n========= CUDA-MEMCHECK\nKernel[0][i]: a\nKernel[0][i]: b\nKernel[0][i]: c\nKernel[0][i]: d\nKernel[0][i]: e\n========= ERROR SUMMARY: 0 errors\n$\n</code></pre>\n"}], "owner": {"reputation": 1339, "user_id": 2419822, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/DWBfd.png?s=128&g=1", "display_name": "Bakus123", "link": "https://stackoverflow.com/users/2419822/bakus123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2624, "favorite_count": 2, "accepted_answer_id": 30084481, "answer_count": 1, "score": 3, "last_activity_date": 1430937783, "creation_date": 1430931320, "last_edit_date": 1495541627, "question_id": 30082991, "link": "https://stackoverflow.com/questions/30082991/memory-allocation-on-gpu-for-dynamic-array-of-structs", "title": "Memory allocation on GPU for dynamic array of structs", "body": "<p>I have problem with passing array of struct to gpu kernel. I based on this topic - <a href=\"https://stackoverflow.com/questions/15431365/cudamemcpy-segmentation-fault\">cudaMemcpy segmentation fault</a> and I wrote sth like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct Test {\n    char *array;\n};\n\n__global__ void kernel(Test *dev_test) {\n    for(int i=0; i &lt; 5; i++) {\n        printf(\"Kernel[0][i]: %c \\n\", dev_test[0].array[i]);\n    }\n}\n\nint main(void) {\n\n    int n = 4, size = 5;\n    Test *dev_test, *test;\n\n    test = (Test*)malloc(sizeof(Test)*n);\n    for(int i = 0; i &lt; n; i++)\n        test[i].array = (char*)malloc(size * sizeof(char));\n\n    for(int i=0; i &lt; n; i++) {\n        char temp[] = { 'a', 'b', 'c', 'd' , 'e' };\n        memcpy(test[i].array, temp, size * sizeof(char));\n    }\n\n    cudaMalloc((void**)&amp;dev_test, n * sizeof(Test));\n    cudaMemcpy(dev_test, test, n * sizeof(Test), cudaMemcpyHostToDevice);\n    for(int i=0; i &lt; n; i++) {\n        cudaMalloc((void**)&amp;(test[i].array), size * sizeof(char));\n        cudaMemcpy(&amp;(dev_test[i].array), &amp;(test[i].array), size * sizeof(char), cudaMemcpyHostToDevice);\n    }\n\n    kernel&lt;&lt;&lt;1, 1&gt;&gt;&gt;(dev_test);\n    cudaDeviceSynchronize();\n\n    //  memory free\n    return 0;\n}\n</code></pre>\n\n<p>There is no error, but displayed values in kernel are incorrect. What I'm doing wrong? Thank in advance for any help.</p>\n"}, {"tags": ["c", "arduino"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 2, "creation_date": 1430931377, "post_id": 30082934, "comment_id": 48279065, "body": "Note: <code>++K_count</code> should be <code>K_count +1</code> [sequence points]"}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1430932134, "creation_date": 1430932134, "answer_id": 30083261, "question_id": 30082934, "link": "https://stackoverflow.com/questions/30082934/can-someone-please-explain-this-line/30083261#30083261", "title": "Can someone please explain this line", "body": "<p>You can expand that single line of code to:</p>\n\n<pre><code>int temp = (byte)(CharacterMask[0][(customKey - '0') - 1][0]);\nif ( K_count &lt; temp )\n{\n   K_count = ++K_count;\n   // This is bad. See the comment about sequence points.\n   // It should be\n   K_count = K_count + 1;\n}\nelse\n{\n   K_count = 1;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 695058, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "is_accepted": false, "score": 1, "last_activity_date": 1430932267, "creation_date": 1430932267, "answer_id": 30083305, "question_id": 30082934, "link": "https://stackoverflow.com/questions/30082934/can-someone-please-explain-this-line/30083305#30083305", "title": "Can someone please explain this line", "body": "<blockquote>\n<pre><code>(customKey - '0') - 1\n</code></pre>\n</blockquote>\n\n<p>This takes the value of <code>customKey</code>, subtracts the ASCII value of \"0\" (0x30), and then subtracts 1 from that.</p>\n\n<blockquote>\n<pre><code>CharacterMask[0][x][0]\n</code></pre>\n</blockquote>\n\n<p>This takes the 0th element of <code>CharacterMask</code>, takes the <code>x</code>th element of the result, and then takes the 0th element of <em>that</em> result.</p>\n\n<blockquote>\n<pre><code>(byte)x\n</code></pre>\n</blockquote>\n\n<p>This truncates <code>x</code> to its 8 least significant bits.</p>\n\n<blockquote>\n<pre><code>K_count &lt; x\n</code></pre>\n</blockquote>\n\n<p>This is true (i.e. non-zero) if <code>K_count</code> is less than <code>x</code>.</p>\n\n<blockquote>\n<pre><code>x ? y : z;\n</code></pre>\n</blockquote>\n\n<p>This results in <code>y</code> if x is true, otherwise it results in <code>z</code>.</p>\n\n<p>As to what it actually <em>does</em>, that depends on what <code>CharacterMask</code> and <code>customKey</code> are.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 4871373, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Y7kvDC2BAYE/AAAAAAAAAAI/AAAAAAAAACI/0Rofz3yjYOc/photo.jpg?sz=128", "display_name": "Nan Nanco", "link": "https://stackoverflow.com/users/4871373/nan-nanco"}, "edited": false, "score": 0, "creation_date": 1430937292, "post_id": 30083583, "comment_id": 48282852, "body": "thank you very much for the effort, great explanation!"}], "tags": [], "owner": {"reputation": 2404, "user_id": 4499923, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mu2VU.jpg?s=128&g=1", "display_name": "james turner", "link": "https://stackoverflow.com/users/4499923/james-turner"}, "is_accepted": true, "score": 1, "last_activity_date": 1430934172, "last_edit_date": 1430934172, "creation_date": 1430933038, "answer_id": 30083583, "question_id": 30082934, "link": "https://stackoverflow.com/questions/30082934/can-someone-please-explain-this-line/30083583#30083583", "title": "Can someone please explain this line", "body": "<p>this basically increments through the available options on a standard US telephone keypad for the \"3\" key, looping back to the first option after the last is reached.  it does so by referencing a 3-dimensional array containing the options for each key layed out as row/column/options. it is written in such a way that it can be reused for other keys with minor modifications.</p>\n\n<p>the \"...?...:...\" construct is basically a shortcut for if/else. so you can rewrite the statement like this:</p>\n\n<pre><code>if (K_count &lt; (byte)(CharacterMask[0][(customKey - '0') - 1][0])) {\n    K_count = ++K_count;\n} else {\n    K_count = 1;\n}\n</code></pre>\n\n<p>the \"++\" operator simply adds 1 to the variable, so you can rewrite as:</p>\n\n<pre><code>if (K_count &lt; (byte)(CharacterMask[0][(customKey - '0') - 1][0])) {\n    K_count = K_count + 1;\n} else {\n    K_count = 1;\n}\n</code></pre>\n\n<p>CharacterMask is a 3-dimensional array that describes a typical telephone keypad. the first 2 dimensionsindicate the row and column of the keypad. the third dimension contains the options available on that key. so, for example, the 3 key on a telephone has 4 options (3,d,e, and f). for some reason, the author also includes the option count as the first item in the array (index 0).  so CharacterMask[0][2] would give you an array containing the number 4 followed by the characters '3','d','e', and 'f'. as such, CharacterMask[0][2][0] will return the number 4. similarly CharacterMask[0][2][1] would return the char '3'. since this line of code is only really concerned with the number of options, not their values, the final array index is hard-coded to 0. given that, you can rewrite the code like this to clarify:</p>\n\n<pre><code>rowIndex = 0;\ncolumnIndex = (customKey - '0') - 1;\noptionCountIndex = 0;\nif (K_count &lt; (byte)(CharacterMask[rowIndex][columnIndex][optionCountIndex])) {\n    K_count = K_count + 1;\n} else {\n    K_count = 1;\n}\n</code></pre>\n\n<p>since customKey is a char and not a number, we can use the \"-\" operator to subtract the '0' char. this implicitly casts both values to a byte and returns the difference between those bytes.  since the numbers are ordered 0-9 in most character sets, this effectively gets us the numerical value of the character stored in the customKey variable (e.g. char 3 becomes byte 3). so the code can be rewritten as follows:</p>\n\n<pre><code>rowIndex = 0;\nkeyNumber = (customKey - '0');\ncolumnIndex = keyNumber - 1;\noptionCountIndex = 0;\nif (K_count &lt; (byte)(CharacterMask[rowIndex][columnIndex][optionCountIndex])) {\n    K_count = K_count + 1;\n} else {\n    K_count = 1;\n}\n</code></pre>\n\n<p>since they keys 1,2,3 are found in columns 0,1,2 in a zero-based indexed column count, we need to subtract 1 from the keyNumber to get the column index as shown above</p>\n\n<p>because CharacterMask is a char array, we need to cast the first value to a byte to get the value initially entered back. this rewrite clarifies that:</p>\n\n<pre><code>rowIndex = 0;\nkeyNumber = (customKey - '0');\ncolumnIndex = keyNumber - 1;\noptionCountIndex = 0;\noptionCountAsCharType = (CharacterMask[rowIndex][columnIndex][optionCountIndex]);\nif (K_count &lt; (byte)optionCountAsCharType) {\n    K_count = K_count + 1;\n} else {\n    K_count = 1;\n}\n</code></pre>\n\n<p>the comparison with K_count relies on the fact that the option array length is equal to the option count plus 1. since it is zero-based indexed, that means the last index is equal to the option count. so as long as the current K_count (aka option index) is less than the option count, you can still add 1 without exceeding the max index value. but if you are on the last index, you must roll back to 1 (the index of the first option). it could be made more clear with one more refactor:</p>\n\n<pre><code>rowIndex = 0;\nkeyNumber = (customKey - '0');\ncolumnIndex = keyNumber - 1;\noptionCountIndex = 0;\noptionCountAsCharType = (CharacterMask[rowIndex][columnIndex][optionCountIndex]);\nnextIndexIsInsideArrayBounds = K_count &lt; (byte)optionCountAsCharType\nif (nextIndexIsInsideArrayBounds) {\n    K_count = K_count + 1;\n} else {\n    K_count = 1;\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 4871373, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Y7kvDC2BAYE/AAAAAAAAAAI/AAAAAAAAACI/0Rofz3yjYOc/photo.jpg?sz=128", "display_name": "Nan Nanco", "link": "https://stackoverflow.com/users/4871373/nan-nanco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 30083583, "answer_count": 3, "score": -2, "last_activity_date": 1430934172, "creation_date": 1430931174, "question_id": 30082934, "link": "https://stackoverflow.com/questions/30082934/can-someone-please-explain-this-line", "title": "Can someone please explain this line", "body": "<pre><code>K_count = (K_count &lt; (byte)(CharacterMask[0][(customKey - '0') - 1][0]) ? ++K_count : 1);\n</code></pre>\n\n<p>It is a part of <a href=\"http://playground.arduino.cc/Main/CellPhoneKeypad\" rel=\"nofollow\">this</a> simple code,  and i cant understand how precisely does it work?</p>\n"}, {"tags": ["c", "string", "fgets", "scanf"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 4, "creation_date": 1430930588, "post_id": 30082694, "comment_id": 48278541, "body": "The title is misleading; the warning has nothing to do with <code>isdigit</code>."}, {"owner": {"reputation": 406, "user_id": 4214412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5ad8718ddc68c9ff1967e81780bb2b5?s=128&d=identicon&r=PG", "display_name": "Gophyr", "link": "https://stackoverflow.com/users/4214412/gophyr"}, "edited": false, "score": 0, "creation_date": 1430933555, "post_id": 30082694, "comment_id": 48280493, "body": "Take the <code>&amp;</code> out of <code>sscanf(lne, &quot;%s&quot;, &amp;check);</code>  Also, put some space between your lines of code, follow a style guide, etc.  And your <code>int main</code> should be <code>int main(void)</code>."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 4871170, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-C-aGxUoC3eI/AAAAAAAAAAI/AAAAAAAAALs/rF2ftEdHTPU/photo.jpg?sz=128", "display_name": "Alex Clarke", "link": "https://stackoverflow.com/users/4871170/alex-clarke"}, "edited": false, "score": 0, "creation_date": 1431098031, "post_id": 30082774, "comment_id": 48364158, "body": "Ah, I never considered it could be the sscanf function. Thanks for your time."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1430930692, "creation_date": 1430930692, "answer_id": 30082774, "question_id": 30082694, "link": "https://stackoverflow.com/questions/30082694/warning-with-sscanf-format/30082774#30082774", "title": "Warning with sscanf format", "body": "<p>The compiler is complaining about the use of <code>&amp;check</code> in the following line.</p>\n\n<pre><code>sscanf(line, \"%s\" , &amp;check);\n</code></pre>\n\n<p>The expected argument is just <code>check</code>.</p>\n\n<pre><code>sscanf(line, \"%s\" , check);\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 4871170, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-C-aGxUoC3eI/AAAAAAAAAAI/AAAAAAAAALs/rF2ftEdHTPU/photo.jpg?sz=128", "display_name": "Alex Clarke", "link": "https://stackoverflow.com/users/4871170/alex-clarke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 410, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1430934014, "creation_date": 1430930424, "last_edit_date": 1430934014, "question_id": 30082694, "link": "https://stackoverflow.com/questions/30082694/warning-with-sscanf-format", "title": "Warning with sscanf format", "body": "<p>I've been getting the following warning when trying to write a program that only allows strings of numbers:</p>\n\n<p><code>warning: format \u2018%s\u2019 expects argument of type char *\u2019, but argument 3 has type \u2018char (*)[100]\u2019</code></p>\n\n<p>Why am I getting this warning, and what does it mean/consequences? Not had any problems running the code.</p>\n\n<p>The program:</p>\n\n<pre><code>char check[100];\nchar line[100];\nint i;\nint true = 0;\nint main\n{\nfgets(line, sizeof(line), stdin);\nsscanf(line, \"%s\" , &amp;check);\nfor(i=0; i&lt;3; i++)\n    {\n    if(isdigit(check[i]) == 0)\n        {\n        true++;\n        }\n    else\n        continue;\n    }\n\nif(true&gt;0)\n    printf(\"Not a number.\\n\");\nelse\n    printf(\"Is a number.\\n\");\nreturn(0);\n}\n</code></pre>\n"}, {"tags": ["c", "macros"], "comments": [{"owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "edited": false, "score": 2, "creation_date": 1430930193, "post_id": 30082567, "comment_id": 48278289, "body": "What do you mean by <i>it still works after the compile stage</i>?"}], "answers": [{"tags": [], "owner": {"reputation": 2325, "user_id": 2226595, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/V0lhd.gif?s=128&g=1", "display_name": "PlainOldProgrammer", "link": "https://stackoverflow.com/users/2226595/plainoldprogrammer"}, "is_accepted": false, "score": 0, "last_activity_date": 1430930279, "creation_date": 1430930279, "answer_id": 30082642, "question_id": 30082567, "link": "https://stackoverflow.com/questions/30082567/c-pre-processor-macros/30082642#30082642", "title": "C pre-processor macros", "body": "<p>The macros are not delete after the compile time. When the processor run (step before compilation) it find all the occurrences of SWAP and replace with their definition, at such times all the code is expanded and compiled without throubles.</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 3104462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06392c08fa7be5b346642f4003855d2a?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/3104462/max"}, "edited": false, "score": 0, "creation_date": 1430930551, "post_id": 30082649, "comment_id": 48278517, "body": "Thank you very much this explains alot :)"}], "tags": [], "owner": {"reputation": 11506, "user_id": 5801, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/267cfaf8c1f76da3d8b3c7576a903613?s=128&d=identicon&r=PG", "display_name": "Michael Kohne", "link": "https://stackoverflow.com/users/5801/michael-kohne"}, "is_accepted": false, "score": 1, "last_activity_date": 1430930293, "creation_date": 1430930293, "answer_id": 30082649, "question_id": 30082567, "link": "https://stackoverflow.com/questions/30082567/c-pre-processor-macros/30082649#30082649", "title": "C pre-processor macros", "body": "<p>Because the macro did what it was supposed to do.\nThe preprocessor took the line</p>\n\n<pre><code>SWAP(&amp;data1,&amp;data2);\n</code></pre>\n\n<p>and replaced it with</p>\n\n<pre><code>{int temp; temp = *data1;*data1 = *data2;*data2=temp;};\n</code></pre>\n\n<p>Then feed that to the compiler, which did it's job, and your program works.</p>\n\n<p>Macros are TEXTUAL replacement that happens before compilation.</p>\n"}], "owner": {"reputation": 13, "user_id": 3104462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06392c08fa7be5b346642f4003855d2a?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/3104462/max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1430930661, "creation_date": 1430930051, "last_edit_date": 1430930661, "question_id": 30082567, "link": "https://stackoverflow.com/questions/30082567/c-pre-processor-macros", "title": "C pre-processor macros", "body": "<p>I have a question about macros in C programming. What I know about macros is that they are pre-processor directives and are done before the compile stage and they are deleted. So I've written a piece of code to test this but it still works after the compile stage:</p>\n\n<pre><code>#define SWAP(x,y) {int temp; temp = *x;*x = *y;*y=temp;}\n\nint main()\n{\n      int data1, data2;\n      while((scanf(\"%d%d\",&amp;data1,&amp;data2)) == 2)\n      {\n          SWAP(&amp;data1,&amp;data2);\n          printf(\"Data1 =%d, data2 = %d\\n\",data1,data2);\n      }\n}\n</code></pre>\n\n<p>I have no idea why this piece of code still works.</p>\n"}, {"tags": ["c", "linux", "debugging", "netbeans"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 2987255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fccbae1cedb0635b99664e7bd998043f?s=128&d=identicon&r=PG&f=1", "display_name": "sbel", "link": "https://stackoverflow.com/users/2987255/sbel"}, "is_accepted": false, "score": 0, "last_activity_date": 1450785321, "creation_date": 1450785321, "answer_id": 34415386, "question_id": 30082536, "link": "https://stackoverflow.com/questions/30082536/netbeans-c-remote-debugger-dissasembly-view-only/34415386#34415386", "title": "Netbeans C remote debugger dissasembly view only", "body": "<p>It's a pretty old question, but... I've been faced with the same pain,\nspent a lot of time and couldn't find anything.</p>\n\n<p>My configuration: \nHost - Ubuntu 14.04 with NetBeans 8.0.2.\nClient - Ubuntu 12.04 with both g++ 4.6.4 and 5.2.1, gdb 7.4-2012.04</p>\n\n<p>I've found out that NetBeans falls in disassembly mode (mentioned in start topic) with {g++ 5.2, gdb 7.4} tools pair, but work's fine with {g++ 4.6, gdb 7.4}. So gdb 7.8 installation solves issue with g++ 5.2.</p>\n"}], "owner": {"reputation": 1, "user_id": 4871498, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fm0IDR8B1ec/AAAAAAAAAAI/AAAAAAAAA78/amfEPky48-4/photo.jpg?sz=128", "display_name": "dmarcos", "link": "https://stackoverflow.com/users/4871498/dmarcos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 323, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1450785321, "creation_date": 1430929954, "question_id": 30082536, "link": "https://stackoverflow.com/questions/30082536/netbeans-c-remote-debugger-dissasembly-view-only", "title": "Netbeans C remote debugger dissasembly view only", "body": "<p>I'm trying to debug an embedded board with ARM architecture that runs linux. I'm using NetBeans IDE on a Linux PC to remotely develop the code. I've set everything up according to several guides. Netbeans packs the source files, sends them via TFTP to the board and builds them there executing the board's own toolchain via ssh.</p>\n\n<p>When I try to debug the debugger starts but apparently no line/code information is added to the executable (although it's compiled with -g option and in \"debug\" mode) so Netbeans jumps to disassembly view where I can set breakpoints and run line by line... in assembly instead of line by line over the source code. If I gdb the executable in the embedded board gdb says it only has source info for one of the files which isn't the one that contains main function but some random one so I can't use GDB either. I've tried creating a new project on a fresh Netbeans installation and the same happens. I can perfectly debug native projects but not the remote ones.</p>\n\n<p>Any clue?</p>\n"}, {"tags": ["c", "qsort"], "comments": [{"owner": {"reputation": 9690, "user_id": 1707560, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/8VK4M.jpg?s=128&g=1", "display_name": "imreal", "link": "https://stackoverflow.com/users/1707560/imreal"}, "edited": false, "score": 0, "creation_date": 1430930136, "post_id": 30082475, "comment_id": 48278257, "body": "A compare function should not change its parameters, can you modify the code?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1430930171, "post_id": 30082475, "comment_id": 48278279, "body": "Show the code please and we will try to work the solution out together. Generally the <code>compar</code> function should take <code>const</code> pointers, not elements."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 4871449, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153299144933817/picture?type=large", "display_name": "Niran Dokhanian", "link": "https://stackoverflow.com/users/4871449/niran-dokhanian"}, "edited": false, "score": 0, "creation_date": 1430937979, "post_id": 30082989, "comment_id": 48283230, "body": "Hi.. thanks but I think I didn&#39;t explain myself well..  I added my code now.. I hope you will understand. the difference is mainly in the defenition of the pointer to the compare function.."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 13, "user_id": 4871449, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153299144933817/picture?type=large", "display_name": "Niran Dokhanian", "link": "https://stackoverflow.com/users/4871449/niran-dokhanian"}, "edited": false, "score": 0, "creation_date": 1430938077, "post_id": 30082989, "comment_id": 48283297, "body": "No worries, I realised that after reading the answer from @alk"}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 1, "last_activity_date": 1430931629, "last_edit_date": 1430931629, "creation_date": 1430931317, "answer_id": 30082989, "question_id": 30082475, "link": "https://stackoverflow.com/questions/30082475/qsort-c-standard-library-how-to-send-a-compare-function-with-non-const-args/30082989#30082989", "title": "qsort-C standard library-how to send a compare function with non const args?", "body": "<p>This example shows how to use the arguments in <code>compare()</code> provided for <code>qsort</code>. It casts the <code>const void*</code> pointer to the type you are comparing. Note that I could have returned the simple difference between the two numbers, but in some instances that can cause undefined behaviour when the difference \"wraps\".</p>\n\n<p>You said little about your linked list, so I stuck to the question title, about <code>qsort()</code>. The reason it takes <code>const</code> pointers is to prevent your <code>compare()</code> function from altering the data directly: it returns a value based on reading the data values. Obviously the data itself cannot be <code>const</code> otherwise <code>qsort()</code> won't be able to manipulate it.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\n#define ARRSIZE  10\n\nstruct numarr {\n    int numb;\n    struct numarr *next;\n    };\n\nstruct numarr array [ARRSIZE];\n\nint compare( const void *arg1, const void *arg2 )\n{\n    if (((struct numarr*)arg1)-&gt;numb &gt; ((struct numarr*)arg2)-&gt;numb)\n        return 1;\n    if (((struct numarr*)arg1)-&gt;numb &lt; ((struct numarr*)arg2)-&gt;numb)\n        return -1;\n    return 0;\n}    \n\nint main() {\n    int i;\n    srand((unsigned)time(NULL));\n\n    // set up a random array\n    printf (\"Unsorted: \");\n    for(i=0; i&lt;ARRSIZE; i++){\n        array[i].numb = rand() % ARRSIZE;\n        printf (\"%d \", array[i].numb);\n    }\n    printf (\"%\\n\");\n\n    // sort and print the array\n    qsort (array, ARRSIZE, sizeof(struct numarr), compare);\n    printf (\"Sorted:   \");\n    for(i=0; i&lt;ARRSIZE; i++){\n        printf (\"%d \", array[i].numb);\n    }\n    printf (\"%\\n\");\n    return 0;\n}\n</code></pre>\n\n<p>Program output</p>\n\n<pre><code>Unsorted: 8 7 3 0 7 5 9 2 0 0\nSorted:   0 0 0 2 3 5 7 7 8 9\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 4871449, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153299144933817/picture?type=large", "display_name": "Niran Dokhanian", "link": "https://stackoverflow.com/users/4871449/niran-dokhanian"}, "edited": false, "score": 0, "creation_date": 1430938317, "post_id": 30083198, "comment_id": 48283431, "body": "Hi.. thanks but I think It will not help me because it&#39;s a problem to wrap the  compare function since I will have to send another argument to the function listSort.."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 13, "user_id": 4871449, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153299144933817/picture?type=large", "display_name": "Niran Dokhanian", "link": "https://stackoverflow.com/users/4871449/niran-dokhanian"}, "edited": false, "score": 0, "creation_date": 1430985062, "post_id": 30083198, "comment_id": 48302128, "body": "@NiranDokhanian: Please see the update to my answer."}, {"owner": {"reputation": 13, "user_id": 4871449, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153299144933817/picture?type=large", "display_name": "Niran Dokhanian", "link": "https://stackoverflow.com/users/4871449/niran-dokhanian"}, "edited": false, "score": 0, "creation_date": 1430993741, "post_id": 30083198, "comment_id": 48307835, "body": "Thank you! This is very helpfull!"}], "tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": true, "score": 2, "last_activity_date": 1430985039, "last_edit_date": 1430985039, "creation_date": 1430931924, "answer_id": 30083198, "question_id": 30082475, "link": "https://stackoverflow.com/questions/30082475/qsort-c-standard-library-how-to-send-a-compare-function-with-non-const-args/30083198#30083198", "title": "qsort-C standard library-how to send a compare function with non const args?", "body": "<blockquote>\n  <p>the compare function I am trying to use qsort from the standard library</p>\n</blockquote>\n\n<p><strong>Not nice, try to avoid this:</strong></p>\n\n<p>Just wrap up the compare function into another function that is accepted by the compiler to be passed to <code>qsort()</code>. </p>\n\n<p>Inside the wrapper you can then use the Casting-Hammer to fit things ... ;-) </p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n\ntypedef void* ListElement;\ntypedef int(*CompareListElements)(ListElement, ListElement);\n\nCompareListElements c =  ... /* Initialise properly here. */\n\nint cmp(const void * pv1, const void * pv2)\n{\n  return c((ListElement)pv1, (ListElement)pv2); /* Hammering here ... */\n}\n\n\nint main(void)  \n{\n  int a[4] = {3, 0, 2, 1};\n  qsort(a, sizeof *a, 4, cmp);\n}\n</code></pre>\n\n<hr>\n\n<p>Referring your edit providing the implementation of <code>listSort()</code>, you could still use the workaround I propose above by using the GNU extension function <a href=\"http://man7.org/linux/man-pages/man3/qsort.3.html\" rel=\"nofollow\"><code>qsort_r()</code></a>:</p>\n\n<pre><code>int cmp_r(const void * pv1, const void * pv2, void * pv)\n{\n  CompareListElements c_r = pv;\n  return c_r((ListElement)pv1, (ListElement)pv2); /* Still hammering here ... */\n}\n\nListResult listSort(List list, CompareListElements compareElement) \n{\n  ...\n\n  qsort_r(elementArray, size, sizeof(*elementArray), cmp_r, compareElement);\n\n  ...\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 4871449, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153299144933817/picture?type=large", "display_name": "Niran Dokhanian", "link": "https://stackoverflow.com/users/4871449/niran-dokhanian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 545, "favorite_count": 0, "accepted_answer_id": 30083198, "answer_count": 2, "score": 1, "last_activity_date": 1431165569, "creation_date": 1430929828, "last_edit_date": 1431165569, "question_id": 30082475, "link": "https://stackoverflow.com/questions/30082475/qsort-c-standard-library-how-to-send-a-compare-function-with-non-const-args", "title": "qsort-C standard library-how to send a compare function with non const args?", "body": "<p>Im working on a homework project.\nI need to implement a generic List accoarding to a header that the staff created.\nThey had defined compare functions in the header like this:</p>\n\n<pre><code>typedef int(*CompareListElements)(ListElement, ListElement);\n</code></pre>\n\n<p>(ListElement=void*)</p>\n\n<p>I am trying to use qsort from the standard library, but I can't compile the program because the compare function I'm trying to pass to <code>qsort</code> is getting non const arguments.\nIs there a way to pass it anyway?\nThanks ahead. </p>\n\n<p>The function im trying to implement:</p>\n\n<pre><code>ListResult listSort(List list, CompareListElements compareElement) {\n    CHECK_RETURN(((list == NULL)||(compareElement == NULL)),LIST_NULL_ARGUMENT);\n    int size=0;\n    ListElement* elementArray=listToArray(list, &amp;size);\n    CHECK_RETURN((elementArray == NULL), LIST_OUT_OF_MEMORY);\n    qsort(elementArray, size, sizeof(*elementArray), compareElement);\n    returnArrayToList(list,elementArray);\n    return LIST_SUCCESS;\n}\n</code></pre>\n\n<p>The error:\npassing argument 4 of 'qsort' from incompatible pointer type</p>\n"}, {"tags": ["c++", "c", "arrays", "assembly"], "comments": [{"owner": {"reputation": 3099, "user_id": 1978011, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ca7712f5e45279a01ee1b7f273248e15?s=128&d=identicon&r=PG", "display_name": "user1978011", "link": "https://stackoverflow.com/users/1978011/user1978011"}, "edited": false, "score": 1, "creation_date": 1430929956, "post_id": 30082446, "comment_id": 48278149, "body": "well, have you seen the syntax <code>A[0]</code>? If not, I would encourage you to read a tutorial on C/C++."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1430930155, "post_id": 30082446, "comment_id": 48278271, "body": "Are you <i>writing</i> the asm function? if so, writing a dummy C function taking an <code>unsigned int []</code> parameter and compiling with -S (generate assembly) would probably be pretty informative in seeing how the setup is done on the callee side. And know that the <i>calling convention</i> being used <i>will</i> play a role in this."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1430930986, "post_id": 30082446, "comment_id": 48278821, "body": "That depends on the ABI, that&#39;s actually used with your toolchain."}], "owner": {"reputation": 13, "user_id": 4871492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d57f3fd7151c7e87d436649bb23319cb?s=128&d=identicon&r=PG&f=1", "display_name": "Fran", "link": "https://stackoverflow.com/users/4871492/fran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1430930030, "creation_date": 1430929720, "last_edit_date": 1430930030, "question_id": 30082446, "link": "https://stackoverflow.com/questions/30082446/how-to-use-an-array-pass-by-parameter-to-some-assembly-func-using-c", "title": "How to use an array pass by parameter to some assembly func using C++", "body": "<p>I have a problem trying to figure how access the values from an array. The important parts of the code look like this.</p>\n\n<pre><code>unsigned int A[]  = {1,1,1,3};\n\nextern \"C\" bool isItValid(unsigned int A[]);\n</code></pre>\n\n<p>My question is, how do I work with the values from the array? Also, the real values of the array are 6 hex numbers of 32 bits each.</p>\n"}, {"tags": ["python", "c", "linux", "process", "daemon"], "comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1430930956, "post_id": 30082330, "comment_id": 48278803, "body": "A helpful function is: <a href=\"http://man7.org/linux/man-pages/man3/daemon.3.html\" rel=\"nofollow noreferrer\">man7.org/linux/man-pages/man3/daemon.3.html</a>"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1430931006, "post_id": 30082330, "comment_id": 48278833, "body": "Daemon, service, background task ... just names ... - what do really want to do?"}, {"owner": {"reputation": 403, "user_id": 1771330, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/30b64dd0b4456b73b34bbd760659ce9a?s=128&d=identicon&r=PG", "display_name": "Shivaji_Vidhale", "link": "https://stackoverflow.com/users/1771330/shivaji-vidhale"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1430947521, "post_id": 30082330, "comment_id": 48288827, "body": "@alk I just want to write my own daemon script just to practice and learn more. But I can&#39;t think of any idea. The best I could think of was the one I mentioned in the question."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 1, "creation_date": 1430950156, "post_id": 30082330, "comment_id": 48290112, "body": "@Shivaji_Vidhale: It&#39;s hard to think of a <i>practical</i> idea, but for a toy\u2026 what about a logger daemon similar to <code>syslogd</code>, which listens for messages on a UDP port and writes them to a file? Of course you already have a better <code>syslogd</code>, and if you really needed to write one you could <code>inetd</code>-ify it and not have to worry about daemonizing or listening on a socket, and so on, but it should be something you can write in about 20 lines of code and play with. And, unlike your idea, it doesn&#39;t require interacting with the GUI, which can be tricky for a daemon."}], "answers": [{"comments": [{"owner": {"reputation": 403, "user_id": 1771330, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/30b64dd0b4456b73b34bbd760659ce9a?s=128&d=identicon&r=PG", "display_name": "Shivaji_Vidhale", "link": "https://stackoverflow.com/users/1771330/shivaji-vidhale"}, "edited": false, "score": 0, "creation_date": 1430947390, "post_id": 30082432, "comment_id": 48288768, "body": "Alright, but all I wanted to do is practice writing daemon script or a server side component for Linux. I see stuff about HowTo but nothing gives me any idea to start working on. Can you think of any example that would help me gain more insight into writing scripts for Linux? Any beginner level  experiment that I can carry out?"}], "tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": false, "score": 1, "last_activity_date": 1430929692, "creation_date": 1430929692, "answer_id": 30082432, "question_id": 30082330, "link": "https://stackoverflow.com/questions/30082330/examples-for-writing-a-daemon-or-a-service-in-linux/30082432#30082432", "title": "Examples for writing a daemon or a service in Linux", "body": "<p>First: <a href=\"https://www.python.org/dev/peps/pep-3143/\" rel=\"nofollow\">PEP 3143</a> tries to enumerate all of the fiddly details you have to get right to write a daemon in Python. And it specifies a library that takes care of those details for you. </p>\n\n<p>The PEP was deferred\u2014at least in part because the community felt it was more a responsibility of POSIX or some Linux standards group or something to first define exactly what is essential to being a daemon, before Python could have its own position on how to implement one. But it's still a great guide. However, the reference implementation of that proposed library still lives on, as <a href=\"https://pypi.python.org/pypi/python-daemon/\" rel=\"nofollow\"><code>python-daemon</code></a>, which you can install from PyPI.</p>\n\n<hr>\n\n<p>Meanwhile, the really interesting question for this project isn't so much service vs. daemon, as root vs. user. Do you want a single process that keeps track of all users' twitter accounts, and sends notifications to anyone who's logged in? Just a per-user process? Or maybe both, a single process watching all the tweets, then sending notifications via user processes?</p>\n\n<p>Of course you don't really need a daemon or service for this. For example, it could be a GUI app whose main window is a configuration dialog, which keeps running (maybe with a traybar thingy) even when you close the config dialog, and it would work just as well. The question isn't whether you <em>need</em> a daemon, but whether it's <em>more appropriate</em>. Which really is a design choice.</p>\n"}], "owner": {"reputation": 403, "user_id": 1771330, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/30b64dd0b4456b73b34bbd760659ce9a?s=128&d=identicon&r=PG", "display_name": "Shivaji_Vidhale", "link": "https://stackoverflow.com/users/1771330/shivaji-vidhale"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 648, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1430929692, "creation_date": 1430929405, "question_id": 30082330, "link": "https://stackoverflow.com/questions/30082330/examples-for-writing-a-daemon-or-a-service-in-linux", "title": "Examples for writing a daemon or a service in Linux", "body": "<p>I have been looking at daemons for Linux such as <code>httpd</code> and have also looked at some code that can be used as a skeleton. I have done a fair amount of research and now I want to practice writing it. However, I'm not sure of what can I use a daemon for. Any good examples/ideas that I can try to execute?</p>\n\n<p>I was thinking of using a daemon along with libnotify on Ubuntu to have pop-up notifications of select tweets.</p>\n\n<ol>\n<li>Is this a bad example for implementing a daemon?</li>\n<li>Will you even need a daemon for this?</li>\n<li>Can this be implemented as a service rather than a daemon?</li>\n</ol>\n"}, {"tags": ["c", "string", "type-conversion", "gmp"], "comments": [{"owner": {"reputation": 4007, "user_id": 4255107, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-84XHYSdES6k/AAAAAAAAAAI/AAAAAAAAAF0/BzBS4Ozwoc0/photo.jpg?sz=128", "display_name": "sonus21", "link": "https://stackoverflow.com/users/4255107/sonus21"}, "edited": false, "score": 1, "creation_date": 1430933024, "post_id": 30082152, "comment_id": 48280100, "body": "can you give an example what you want to achieve ? e.g. <code>char number[]=&quot;1234&quot;; mpz_t n; mpz_set_str(n, my_number,10); </code> This will assign given number using base 10 to n . check here <a href=\"https://www.cs.colorado.edu/~srirams/classes/doku.php/gmp_usage_tutorial\" rel=\"nofollow noreferrer\">cs.colorado.edu/~srirams/classes/doku.php/gmp_usage_tutorial</a>"}, {"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 0, "creation_date": 1430940893, "post_id": 30082152, "comment_id": 48285042, "body": "First page of the manual: <a href=\"https://gmplib.org/manual/\" rel=\"nofollow noreferrer\">gmplib.org/manual</a> has a link &quot;Formatted Input: scanf style input&quot;, I am not sure how you are expecting to use a library without looking at its documentation..."}], "answers": [{"tags": [], "owner": {"reputation": 10318, "user_id": 224574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa6a316666f495f55def1c7a7babe1f1?s=128&d=identicon&r=PG", "display_name": "casevh", "link": "https://stackoverflow.com/users/224574/casevh"}, "is_accepted": true, "score": 3, "last_activity_date": 1430930091, "creation_date": 1430930091, "answer_id": 30082584, "question_id": 30082152, "link": "https://stackoverflow.com/questions/30082152/convert-string-to-mpz-t-in-c/30082584#30082584", "title": "Convert string to mpz_t in C", "body": "<p>In the online manual: <a href=\"https://gmplib.org/manual/Assigning-Integers.html#Assigning-Integers\" rel=\"nofollow\">https://gmplib.org/manual/Assigning-Integers.html#Assigning-Integers</a></p>\n\n<p>The function <code>mpz_set_str</code> is probably what you are looking for.</p>\n"}], "owner": {"reputation": 75, "user_id": 4871453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/991e8e25f310623e88f4d7392d93f2cc?s=128&d=identicon&r=PG&f=1", "display_name": "MrCupC4ke", "link": "https://stackoverflow.com/users/4871453/mrcupc4ke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2402, "favorite_count": 2, "accepted_answer_id": 30082584, "answer_count": 1, "score": 1, "last_activity_date": 1430930091, "creation_date": 1430928817, "last_edit_date": 1430929686, "question_id": 30082152, "link": "https://stackoverflow.com/questions/30082152/convert-string-to-mpz-t-in-c", "title": "Convert string to mpz_t in C", "body": "<p>Is there a method to convert a <code>string</code>, or in my case a <code>char array</code>, to the <code>mpz_t</code> type from gmplib. Is there something similar to the <code>sscanf</code> function? Anything for the C programming language would be relevant. </p>\n"}, {"tags": ["c", "erlang"], "answers": [{"comments": [{"owner": {"reputation": 74, "user_id": 3573865, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/44d6153b0e2d4945c14da176aca5ef20?s=128&d=identicon&r=PG&f=1", "display_name": "Bou6", "link": "https://stackoverflow.com/users/3573865/bou6"}, "edited": false, "score": 0, "creation_date": 1430934006, "post_id": 30081609, "comment_id": 48280764, "body": "Thanks Vatine , but i think that reading the byte stream and stuffing it in a buffer is done by the function read_exact ,i really don&#39;t undresatand what does the variable len do in the function read_cmd"}, {"owner": {"reputation": 18805, "user_id": 34771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c1a3f9227c0cb408f8831d27d611ab2?s=128&d=identicon&r=PG", "display_name": "Vatine", "link": "https://stackoverflow.com/users/34771/vatine"}, "reply_to_user": {"reputation": 74, "user_id": 3573865, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/44d6153b0e2d4945c14da176aca5ef20?s=128&d=identicon&r=PG&f=1", "display_name": "Bou6", "link": "https://stackoverflow.com/users/3573865/bou6"}, "edited": false, "score": 0, "creation_date": 1431087236, "post_id": 30081609, "comment_id": 48356660, "body": "@fedi I tried to explain it a bit more fully, better?"}, {"owner": {"reputation": 74, "user_id": 3573865, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/44d6153b0e2d4945c14da176aca5ef20?s=128&d=identicon&r=PG&f=1", "display_name": "Bou6", "link": "https://stackoverflow.com/users/3573865/bou6"}, "edited": false, "score": 0, "creation_date": 1431249904, "post_id": 30081609, "comment_id": 48407103, "body": "thank you it&#39;s clear now. do you know any tool that helps us visualise the data flow between the two modules?"}], "tags": [], "owner": {"reputation": 18805, "user_id": 34771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c1a3f9227c0cb408f8831d27d611ab2?s=128&d=identicon&r=PG", "display_name": "Vatine", "link": "https://stackoverflow.com/users/34771/vatine"}, "is_accepted": true, "score": 0, "last_activity_date": 1431087217, "last_edit_date": 1431087217, "creation_date": 1430927252, "answer_id": 30081609, "question_id": 30081218, "link": "https://stackoverflow.com/questions/30081218/erlang-port-example/30081609#30081609", "title": "Erlang port example", "body": "<p>It reads a \"packet\" from a byte stream, where the \"packet length\" is 16 bits (assuming 8-bit chars), stuffing the bytes read into a buffer (that has to be large enough to accommodate the read bytes) and returns the number of bytes actually read.</p>\n\n<p>First, we read two bytes from the stream (and store them in buf[0] and buf[1]).</p>\n\n<p>Then, <code>len = (buf[0] &lt;&lt; 8) | buf[1]</code> (as happens, exactly the same as <code>len = buf[0] * 256 + buf[1]</code>; due to a left-shift by 8 being the same as multiplying by 256, leaving the bottom 8 bits as 0, whereby bitwise or and addition accomplish the same thing) takes the two-byte length prefix and turns it into a single number.</p>\n\n<p>This is then passed in as the number of bytes to read (and stuff into buf).</p>\n"}], "owner": {"reputation": 74, "user_id": 3573865, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/44d6153b0e2d4945c14da176aca5ef20?s=128&d=identicon&r=PG&f=1", "display_name": "Bou6", "link": "https://stackoverflow.com/users/3573865/bou6"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "accepted_answer_id": 30081609, "answer_count": 1, "score": 0, "last_activity_date": 1431087217, "creation_date": 1430926237, "last_edit_date": 1495541193, "question_id": 30081218, "link": "https://stackoverflow.com/questions/30081218/erlang-port-example", "title": "Erlang port example", "body": "<p>I'am actually reading the interoperability tutorial in Erlang <a href=\"https://stackoverflow.com/questions/10488388/c-and-erlang-erlang-port-example,but\">C and Erlang: Erlang Port example</a> i want to know how the c program works:</p>\n\n<p>The function read_exact(byte *buf, int len) reads exactly len Bytes from stdin and puts them in buf, but i don't undrestand what read_cmd do</p>\n\n<pre><code>read_cmd(byte *buf)\n{\n int len;\n\n if (read_exact(buf, 2) != 2)\n return(-1);\n len = (buf[0] &lt;&lt; 8) | buf[1];\n return read_exact(buf, len);\n} \n</code></pre>\n\n<p>especially this line </p>\n\n<pre><code>len = (buf[0] &lt;&lt; 8) | buf[1];\n</code></pre>\n\n<p>let's take an example:\nif we run the program and put 12 in the input 12 is coded in ASCII so buf[0]=0x31 and buf[1]=0x32 then len =0x3132 which is equal 12549 in decimal then we pass len to read_exact, that means that we have to read 12549 bytes.\nDoes that make a sense?</p>\n"}, {"tags": ["c", "linux", "gcc", "compiler-errors", "linked-list"], "comments": [{"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1430925686, "post_id": 30080861, "comment_id": 48275151, "body": "Ok , now explain your problem. What&#39;s wrong? Is it failing to compile? Is it failing to run? What input are you giving? Where it is breaking?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4324729"}, "reply_to_user": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1430925955, "post_id": 30080861, "comment_id": 48275381, "body": "It is taking my input for the first time and after that it doesn&#39;t and program stops working after posting one more line, here it is:  Do you want to enter data? Y/Ny Enter your data: 5 Do you want to enter more data? Y/N5 {It automatically took 5 as input here}"}], "answers": [{"tags": [], "owner": {"reputation": 2653, "user_id": 3515931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4c0edddc6a265a0a22058bb2343328d?s=128&d=identicon&r=PG&f=1", "display_name": "JohnH", "link": "https://stackoverflow.com/users/3515931/johnh"}, "is_accepted": false, "score": 1, "last_activity_date": 1430926116, "creation_date": 1430926116, "answer_id": 30081174, "question_id": 30080861, "link": "https://stackoverflow.com/questions/30080861/why-this-code-of-ordered-insertion-of-linked-list-is-not-working-in-gcc-centos/30081174#30081174", "title": "Why this code of ordered insertion of linked list is not working in GCC CEntos?", "body": "<p>First of all, you can't <code>fflush(stdin);</code> so remove that (fflush is only defined for output streams).</p>\n\n<p>Secondly, the stdin buffer contain the newlines that the user types after entering 'Y', 'N', or a number.  You can eliminate this whitespace by changing your <code>scanf</code> calls to have a leading space before the %c or %d, such as:</p>\n\n<pre><code>scanf(\" %c\",&amp;ch);\n...\nscanf(\" %d\",&amp;d);\n</code></pre>\n\n<p>This will solve the immediate problems I see in your code.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4324729"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1438105750, "creation_date": 1430925357, "last_edit_date": 1430926536, "question_id": 30080861, "link": "https://stackoverflow.com/questions/30080861/why-this-code-of-ordered-insertion-of-linked-list-is-not-working-in-gcc-centos", "title": "Why this code of ordered insertion of linked list is not working in GCC CEntos?", "body": "<p>Where as the same fine on Dev-C++ (TDM-GCC 4.8.1 64-bit Release), gcc version on centos is (gcc (GCC) 4.8.2 20140120 (Red Hat 4.8.2-16)). <strong>Please tell me if there is any error in my coding logic or it is something else</strong></p>\n\n<pre><code>`#include&lt;stdio.h&gt;\n    #include&lt;stdlib.h&gt;\nstruct node\n{\n    int i;\n    struct node *next;\n};\nvoid main()\n{\nstruct node *head,*temp,*p;\nint d;\nchar ch;\nprintf(\"Do you want to enter data? Y/N\");\nscanf(\"%c\",&amp;ch);\nfflush(stdin);\nif((ch=='y')||(ch=='Y'))\n{\n    printf(\"Enter your data: \");\n    scanf(\"%d\",&amp;d);\n    fflush(stdin);\n    head=(struct node *)malloc(sizeof(struct node));\n    head-&gt;i=d;\n    head-&gt;next=NULL;\n}\np=head;\nprintf(\"Do you want to enter more data? Y/N\");\nscanf(\"%c\",&amp;ch);\nfflush(stdin);\nwhile((ch=='y')||(ch=='Y'))\n{\n    temp=(struct node *)malloc(sizeof(struct node));\n    printf(\"Enter your data: \");\n    scanf(\"%d\",&amp;d);\n    fflush(stdin);\n      temp-&gt;i=d;\n    temp-&gt;next=NULL;\n    if(p-&gt;i&gt;=temp-&gt;i)\n    {\n        temp-&gt;next=head;\n        head=temp;\n    }\n    else\n    {\n        while((p-&gt;next!=NULL)&amp;&amp;(p-&gt;next-&gt;i&lt;temp-&gt;i))\n        {\n            p=p-&gt;next;\n    }\n        temp-&gt;next=p-&gt;next;\n        p-&gt;next=temp;\n    }\n    printf(\"Do you want to enter more data? Y/N\");\nscanf(\"%c\",&amp;ch);\nfflush(stdin);\np=head;\n}\nwhile(p!=NULL)\n{\n    printf(\"%d \",p-&gt;i);\n    p=p-&gt;next;\n}\n}` \n</code></pre>\n"}, {"tags": ["c++", "c", "garbage-collection"], "comments": [{"owner": {"reputation": 334, "user_id": 4785453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cf8a25c55946089aa381ca9c680d460?s=128&d=identicon&r=PG&f=1", "display_name": "C Goldsworthy", "link": "https://stackoverflow.com/users/4785453/c-goldsworthy"}, "edited": false, "score": 0, "creation_date": 1430925816, "post_id": 30080745, "comment_id": 48275261, "body": "I found this in a Wikipedia article on Garbage Collection: <a href=\"http://sourceforge.net/projects/meixnergc/\" rel=\"nofollow noreferrer\">sourceforge.net/projects/meixnergc</a>"}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 2649427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d2936985b617fdb3d86c4b21dd68bb7?s=128&d=identicon&r=PG", "display_name": "user2649427", "link": "https://stackoverflow.com/users/2649427/user2649427"}, "edited": false, "score": 0, "creation_date": 1430927238, "post_id": 30081106, "comment_id": 48276378, "body": "if object A points to object C in your code. How is that pointer translate into the linked list/heap of memory addresses?"}], "tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": true, "score": 5, "last_activity_date": 1430926403, "last_edit_date": 1430926403, "creation_date": 1430925935, "answer_id": 30081106, "question_id": 30080745, "link": "https://stackoverflow.com/questions/30080745/how-does-the-mark-in-mark-and-sweep-function-trace-out-the-set-of-objects-acce/30081106#30081106", "title": "how does the mark (in mark-and-sweep) function trace out the set of objects accessible from the roots?", "body": "<p>There's usually a root <em>set</em>, not just a single root object. The root set is basically all global variables, and all currently active local variables (e.g., all locals that are currently on the stack). One of the real difficulties with adding garbage collection to C or C++ is the possibility of failing to detect pointers in the root set (e.g., if you wrote a pointer out to a temporary file, where the garbage collector wouldn't know to look for it).</p>\n\n<p>Figuring out what can be reached from there means any of those that's a pointer is examined, and what it points to is considered reachable. If what it points at contains one or more pointers, it follows those recursively, so all the things that can be reached from it are also considered reachable.</p>\n\n<p>With a \"precise\" garbage collector, you have some sort of type information available to tell the garbage collector what things are pointers. For example, every object might contain a type tag to tell what kind of object it is. You then have a table to tell the GC where (if anywhere) what parts of that type of object are pointers.</p>\n\n<p>With a \"conservative\" garbage collector, you simply look at contents of the data, and assume that if something <em>could</em> be a pointer, that it is. The only pointers you care about are those into the garbage collected heap though. For the sake of discussion let's assume a 64-bit pointers and an 8 megabyte GC heap. This means we look through memory and find anything with any of the ~8 million values that could be a pointer into the GC heap, and assume that any such value <em>is</em> a pointer, so whatever's at that address in the heap is considered reachable (and if so, we look for anything in it that could possibly be a pointer, recursively).</p>\n\n<p>Although it initially sounds (to many people) like the latter would often treat <em>everything</em> as reachable, it actually works surprisingly well in real use. It does, however, prohibit certain garbage collection strategies. In particular, anything that involves compacting the heap means that all pointers to an object need to be adjusted when the object is moved--to do that, we <em>have</em> to be certain that what we're modifying really is a pointer to that object, not just some integer (or string, etc.) that happens to have a value that looks like it could be a pointer.</p>\n"}], "owner": {"reputation": 47, "user_id": 2649427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d2936985b617fdb3d86c4b21dd68bb7?s=128&d=identicon&r=PG", "display_name": "user2649427", "link": "https://stackoverflow.com/users/2649427/user2649427"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 873, "favorite_count": 1, "accepted_answer_id": 30081106, "answer_count": 1, "score": 3, "last_activity_date": 1430926403, "creation_date": 1430925091, "question_id": 30080745, "link": "https://stackoverflow.com/questions/30080745/how-does-the-mark-in-mark-and-sweep-function-trace-out-the-set-of-objects-acce", "title": "how does the mark (in mark-and-sweep) function trace out the set of objects accessible from the roots?", "body": "<p>I'm trying to understand how the mark and sweep algorithm works practically in a piece of code. </p>\n\n<p>I understand that every time I malloc(), my malloc() function adds the memory address to a linked list? Then when I want to garbage collect, I call the mark() function which takes in a \"root\" object and then marks all the reachable memory addresses from there. Then I call sweep() and it frees all the unmarked memory addresses. </p>\n\n<p>I'm confused about what a \"root\" object is and how the mark function decides what objects are reachable from the \"root\" object. </p>\n\n<p>I think it would really help me if someone was able to give me an small example of how the mark-and-sweep algo is working in a piece of code ... or maybe can point me to some reference which could because I can't find any. </p>\n\n<p>Thank you. </p>\n"}, {"tags": ["c", "haskell", "mpi", "petsc", "c2hs"], "answers": [{"comments": [{"owner": {"reputation": 702, "user_id": 2890063, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/07aeeae7c14c12cefde16bf826eceb4a?s=128&d=identicon&r=PG", "display_name": "ocramz", "link": "https://stackoverflow.com/users/2890063/ocramz"}, "edited": false, "score": 0, "creation_date": 1430930133, "post_id": 30081964, "comment_id": 48278253, "body": "I&#39;m thinking of the {# enum ... #} macro. However the definition above is taken from the original binding library. However I am not certain because I can&#39;t get <code>haskell-mpi</code> to build properly yet. Thank you for now"}, {"owner": {"reputation": 14485, "user_id": 190376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd8280c5e1491b8cf55760750ed97dec?s=128&d=identicon&r=PG", "display_name": "Reid Barton", "link": "https://stackoverflow.com/users/190376/reid-barton"}, "reply_to_user": {"reputation": 702, "user_id": 2890063, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/07aeeae7c14c12cefde16bf826eceb4a?s=128&d=identicon&r=PG", "display_name": "ocramz", "link": "https://stackoverflow.com/users/2890063/ocramz"}, "edited": false, "score": 1, "creation_date": 1430930861, "post_id": 30081964, "comment_id": 48278723, "body": "<code>haskell-mpi</code> does the same as what I suggested, see the file <code>src&#47;cbits&#47;constants.c</code>."}, {"owner": {"reputation": 702, "user_id": 2890063, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/07aeeae7c14c12cefde16bf826eceb4a?s=128&d=identicon&r=PG", "display_name": "ocramz", "link": "https://stackoverflow.com/users/2890063/ocramz"}, "edited": false, "score": 0, "creation_date": 1430936989, "post_id": 30081964, "comment_id": 48282642, "body": "<code>src&#47;cbits&#47;constants.c</code> begins :  #define MPI_CONST(ty, name, defn) ty name = defn;  MPI_CONST (MPI_Datatype, mpi_char, MPI_CHAR) MPI_CONST (MPI_Datatype, mpi_wchar, MPI_WCHAR) ... The #define is a function macro and all the next lines are..concrete types?"}, {"owner": {"reputation": 965, "user_id": 229255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/588fe10267b620e1c0d0d188a8db2621?s=128&d=identicon&r=PG", "display_name": "Ian Ross", "link": "https://stackoverflow.com/users/229255/ian-ross"}, "edited": false, "score": 1, "creation_date": 1431691386, "post_id": 30081964, "comment_id": 48617595, "body": "There&#39;s also a {#const ...#} thing in C2HS, but it only really works in cases where what&#39;s on the right hand side of #define expands to something that looks like a constant in Haskell as well as in C (so &quot;#define ABC 123&quot; and &quot;{#const ABC#}&quot; works fine).  In this case, doing &quot;{#const MPI_COMM_WORLD#}&quot; splices the C code &quot;(MPI_Comm) (void *) &amp;ompi_mpi_comm_world&quot; into your Haskell code, which is no use at all!  I think Reid&#39;s suggestion is definitely the way to go here."}], "tags": [], "owner": {"reputation": 14485, "user_id": 190376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd8280c5e1491b8cf55760750ed97dec?s=128&d=identicon&r=PG", "display_name": "Reid Barton", "link": "https://stackoverflow.com/users/190376/reid-barton"}, "is_accepted": true, "score": 3, "last_activity_date": 1430928292, "creation_date": 1430928292, "answer_id": 30081964, "question_id": 30080627, "link": "https://stackoverflow.com/questions/30080627/ghci-linker-error-with-ffi-imported-mpi-constants-via-c2hs/30081964#30081964", "title": "GHCi linker error with FFI-imported MPI constants (via c2hs)", "body": "<pre><code>foreign import ccall \"&amp;MPI_COMM_WORLD\" commWorld_ :: Ptr MPIComm\n</code></pre>\n\n<p>means that <code>commWorld_</code> will be a pointer to the variable <code>MPI_COMM_WORLD</code>. But in fact <code>MPI_COMM_WORLD</code> is not a variable, it's a CPP macro, so it's not the kind of thing that has an address at all, and this is what the linker error is telling you.</p>\n\n<p>I would probably add a C file with a definition like</p>\n\n<pre><code>const MPI_Comm hs_MPI_COMM_WORLD = MPI_COMM_WORLD;\n</code></pre>\n\n<p>and import that in the way that you have done. Perhaps c2hs has some magic that will do this for you.</p>\n"}, {"tags": [], "owner": {"reputation": 14485, "user_id": 190376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd8280c5e1491b8cf55760750ed97dec?s=128&d=identicon&r=PG", "display_name": "Reid Barton", "link": "https://stackoverflow.com/users/190376/reid-barton"}, "is_accepted": false, "score": 1, "last_activity_date": 1433269623, "creation_date": 1433269623, "answer_id": 30603766, "question_id": 30080627, "link": "https://stackoverflow.com/questions/30080627/ghci-linker-error-with-ffi-imported-mpi-constants-via-c2hs/30603766#30603766", "title": "GHCi linker error with FFI-imported MPI constants (via c2hs)", "body": "<p>I just learned that the <code>CApiFFI</code> extension (since GHC 7.6) allows you to import not only C-level \"functions\" that may actually be macros, but also C-level values that may actually be macros. So you should be able to write</p>\n\n<pre><code>{-# LANGUAGE CApiFFI #-}\n\ntype MPIComm = {# type MPI_Comm #} \nforeign import capi \"mpi.h value MPI_COMM_WORLD\" :: MPIComm\n</code></pre>\n\n<p>without having to write an additional C file (GHC will do it for you).</p>\n\n<p>See the documentation at <a href=\"https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/ffi.html#ffi-capi\" rel=\"nofollow\">https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/ffi.html#ffi-capi</a>.</p>\n"}], "owner": {"reputation": 702, "user_id": 2890063, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/07aeeae7c14c12cefde16bf826eceb4a?s=128&d=identicon&r=PG", "display_name": "ocramz", "link": "https://stackoverflow.com/users/2890063/ocramz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 30081964, "answer_count": 2, "score": 2, "last_activity_date": 1433269623, "creation_date": 1430924785, "last_edit_date": 1430927083, "question_id": 30080627, "link": "https://stackoverflow.com/questions/30080627/ghci-linker-error-with-ffi-imported-mpi-constants-via-c2hs", "title": "GHCi linker error with FFI-imported MPI constants (via c2hs)", "body": "<p>I'm figuring out how haskell-mpi works by rewriting the binding. I'm trying to re-use the MPICH installation that was set up by installing PETSc (which is working fine).\nQuestion: <code>make main</code> gives me a correct module in GHCi, but when I request to compute commWorld, the linker complains that it can't find the MPI_COMM_WORLD symbol (which however is in scope of the makefile).</p>\n\n<p>What am I doing wrong? Thanks in advance</p>\n\n<p>error:</p>\n\n<pre><code>ByteCodeLink: can't find label\nDuring interactive linking, GHCi couldn't find the following symbol:\n   MPI_COMM_WORLD\n</code></pre>\n\n<p>Main.chs :</p>\n\n<pre><code>type MPIComm = {# type MPI_Comm #} \nnewtype Comm = MkComm { fromComm :: MPIComm } deriving (Eq, Show)\nforeign import ccall \"&amp;MPI_COMM_WORLD\" commWorld_ :: Ptr MPIComm\nforeign import ccall \"&amp;MPI_COMM_SELF\" commSelf_ :: Ptr MPIComm\n\ncommWorld, commSelf :: Comm\ncommWorld = MkComm &lt;$&gt; unsafePerformIO $ peek commWorld_\ncommSelf = MkComm &lt;$&gt; unsafePerformIO $ peek commSelf_\n</code></pre>\n\n<p>makefile: </p>\n\n<pre><code>PETSC_DIR_ARCH = ${PETSC_DIR}/arch-darwin-c-debug\nPETSC_DIR_ARCH_INCLUDE = ${PETSC_DIR_ARCH}/include\n\nmain : \n    c2hs Main.chs -C -I${PETSC_DIR_ARCH}/include -C -I${PETSC_DIR}/include \n    ghci Main.hs -L${PETSC_DIR_ARCH}/lib -lpetsc -lmpich\n</code></pre>\n\n<p>mpi.h</p>\n\n<pre><code> typedef int MPI_Comm;\n #define MPI_COMM_WORLD ((MPI_Comm)0x44000000)\n #define MPI_COMM_SELF  ((MPI_Comm)0x44000001)\n</code></pre>\n"}, {"tags": ["c++", "c", "visual-studio", "libphonenumber", "lnk2005"], "comments": [{"owner": {"reputation": 1228, "user_id": 995959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXPWG.png?s=128&g=1", "display_name": "gibertoni", "link": "https://stackoverflow.com/users/995959/gibertoni"}, "edited": false, "score": 0, "creation_date": 1430930352, "post_id": 30080625, "comment_id": 48278377, "body": "Is kMinLengthForNsn a global variable defined in your header? If so, you would have to use the keyword <code>extern</code> to use it properly."}, {"owner": {"reputation": 487, "user_id": 1816142, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ec9a94911c92b7a2e1eb00af2d7acc2a?s=128&d=identicon&r=PG", "display_name": "user1816142", "link": "https://stackoverflow.com/users/1816142/user1816142"}, "reply_to_user": {"reputation": 1228, "user_id": 995959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXPWG.png?s=128&g=1", "display_name": "gibertoni", "link": "https://stackoverflow.com/users/995959/gibertoni"}, "edited": false, "score": 0, "creation_date": 1430945320, "post_id": 30080625, "comment_id": 48287736, "body": "Not really. kMinLengthForNsn is declared and defined in the header file of libphonenumber which is a library I do not want to make changes in. So adding extern is not an option."}, {"owner": {"reputation": 1228, "user_id": 995959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXPWG.png?s=128&g=1", "display_name": "gibertoni", "link": "https://stackoverflow.com/users/995959/gibertoni"}, "edited": false, "score": 0, "creation_date": 1430946314, "post_id": 30080625, "comment_id": 48288258, "body": "I see. I read it wrong, it is well encapsulated inside the class from libphonenumber. Have you double checked your linking options for duplicate dynamic/static configuration?"}, {"owner": {"reputation": 487, "user_id": 1816142, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ec9a94911c92b7a2e1eb00af2d7acc2a?s=128&d=identicon&r=PG", "display_name": "user1816142", "link": "https://stackoverflow.com/users/1816142/user1816142"}, "reply_to_user": {"reputation": 1228, "user_id": 995959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXPWG.png?s=128&g=1", "display_name": "gibertoni", "link": "https://stackoverflow.com/users/995959/gibertoni"}, "edited": false, "score": 0, "creation_date": 1431016547, "post_id": 30080625, "comment_id": 48324924, "body": "I think they are not correct in having the definitions of static variables in the header file to start with. I moved them to the source file and it works now. I posted a request to change this in github. <a href=\"https://github.com/googlei18n/libphonenumber/issues/686\" rel=\"nofollow noreferrer\">github.com/googlei18n/libphonenumber/issues/686</a>"}], "owner": {"reputation": 487, "user_id": 1816142, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ec9a94911c92b7a2e1eb00af2d7acc2a?s=128&d=identicon&r=PG", "display_name": "user1816142", "link": "https://stackoverflow.com/users/1816142/user1816142"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 416, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1430924783, "creation_date": 1430924783, "question_id": 30080625, "link": "https://stackoverflow.com/questions/30080625/lnk2005-making-a-c-wrapper-for-c-libphonenumber", "title": "LNK2005 making a C wrapper for C++ libphonenumber", "body": "<p>I have a cross platform C project and now I want to introduce the C++ based libphonenumber in my project changing as little as possible. The first attempt is to integrate it in Win32 using Visual Studio 2013 but it needs to work on iOS and Android as well later on.</p>\n\n<p>so I created this header:</p>\n\n<pre><code>    #ifndef LIB_PN_WRAPPER_H\n    #define LIB_PN_WRAPPER_H\n\n      #ifdef __cplusplus\n        extern \"C\" {\n      #endif\n\n      char* tu_lpn_normalize(char* number);\n\n      #ifdef __cplusplus\n        }\n      #endif\n    #endif //LIB_PN_WRAPPER\n</code></pre>\n\n<p>and this cpp:</p>\n\n<pre><code>    #include \"LibPNWrapper.h\"\n    #include \"phonenumbers/phonenumberutil.h\"\n\n    using i18n::phonenumbers::PhoneNumberUtil;\n\n    char* tu_lpn_normalize(char* number) {\n      PhoneNumberUtil* util = PhoneNumberUtil::GetInstance();\n      return \"hello\";\n    }\n</code></pre>\n\n<p>But I get stuck with this linker error:</p>\n\n<p>error LNK2005: \"private: static unsigned int const i18n::phonenumbers::PhoneNumberUtil::kMinLengthForNsn\" (?kMinLengthForNsn@PhoneNumberUtil@phonenumbers@i18n@@0IB) already defined in LibPNWrapper.obj</p>\n\n<p>This is indeed declared and defined in phonenumberutil.h as:</p>\n\n<p>static const size_t kMinLengthForNsn = 2;</p>\n\n<p>and I understand that by including it in my cpp it is declared again. However I have tried to:</p>\n\n<ul>\n<li><p>Include it in the header file instead but then I had to change my files to compile as c++ instead and I still ended up with problems.</p></li>\n<li><p>To use a namespace in the cpp file but it did not help.</p></li>\n</ul>\n\n<p>I am not sure if its because I mix C and C++ or if I am missing something else fundamental here.</p>\n\n<p>All ideas welcome.</p>\n"}, {"tags": ["c", "gcc", "struct", "compiler-optimization"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1430924677, "post_id": 30080457, "comment_id": 48274328, "body": "This should be <i>trivial</i> to post an <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> (stress the <i>complete</i>). Do so."}, {"owner": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 2, "creation_date": 1430924922, "post_id": 30080457, "comment_id": 48274537, "body": "Do you use <code>x</code> anywhere? Could the optimizer be removing an unused declaration, and therefore it doesn&#39;t complain that it doesn&#39;t know the size?"}, {"owner": {"reputation": 406, "user_id": 1339091, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/s9msr.png?s=128&g=1", "display_name": "fsheikh", "link": "https://stackoverflow.com/users/1339091/fsheikh"}, "reply_to_user": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 0, "creation_date": 1430925200, "post_id": 30080457, "comment_id": 48274745, "body": "@TripeHound Ofcourse I am not using &#39;x&#39; anywhere. What I am trying to understand is which compiler options instructs the optimizer to ignore the unused declaration."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 0, "creation_date": 1430925318, "post_id": 30080457, "comment_id": 48274850, "body": "@TripeHound if it does that at compile time, its whacked.  If <code>struct x</code> isn&#39;t a known type upon arrival to that line (we still don&#39;t know if that is the case since there is no mcve), that line shouldn&#39;t compile <i>regardless</i>,"}, {"owner": {"reputation": 406, "user_id": 1339091, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/s9msr.png?s=128&g=1", "display_name": "fsheikh", "link": "https://stackoverflow.com/users/1339091/fsheikh"}, "edited": false, "score": 0, "creation_date": 1430925351, "post_id": 30080457, "comment_id": 48274875, "body": "@ WhozCarig, Sorry but I think the questions fulfills MCVE criteria, its a one-line simplified program which compiles differently with/without optimizations."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 1, "creation_date": 1430925386, "post_id": 30080457, "comment_id": 48274914, "body": "The option you look for is <code>-fdce</code> (dead code elimination) which is a part of <code>-O</code>."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1430925513, "post_id": 30080457, "comment_id": 48275024, "body": "@WhozCraig The question is quite complete (MVCE) and the problem is reproducible. I am struggling to understand what more info you ask for."}, {"owner": {"reputation": 406, "user_id": 1339091, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/s9msr.png?s=128&g=1", "display_name": "fsheikh", "link": "https://stackoverflow.com/users/1339091/fsheikh"}, "reply_to_user": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1430925708, "post_id": 30080457, "comment_id": 48275168, "body": "@BlueMoon Thanks a lot. Exactly what I was looking for."}, {"owner": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "reply_to_user": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1430925734, "post_id": 30080457, "comment_id": 48275190, "body": "My point was: if there <i>is</i> a specific option, you should be looking for one that eliminates unused variables rather than one to &quot;ignore the undefined tag &#39;x&#39;&quot;.  As @Blue Moons response indicates."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1430925760, "post_id": 30080457, "comment_id": 48275214, "body": "@BlueMoon &quot;In a file struct_test.c I write:&quot; - is that the <i>only</i> thing written in that file? The first question (actually posted as an answer, then deleted) out of the gate by ike, was &quot;How, and more importantly, where is struct x defined...&quot;. Posting four lines of code (a main.c) would have squelched that entirely and directed the reader straight to the meat of the question. And it would have taken less typing to do it than the first comment left by the OP. <i>That&#39;s</i> why I asked."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1430925835, "post_id": 30080457, "comment_id": 48275273, "body": "@fsheikh do yo also get a tentative declaration warning when this compiles in <i>either</i> mode (opt or not) ? clang emits one, does gcc? And fwiw, with or without opt, clang pukes on this, so whatever gcc is doing, its special"}, {"owner": {"reputation": 406, "user_id": 1339091, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/s9msr.png?s=128&g=1", "display_name": "fsheikh", "link": "https://stackoverflow.com/users/1339091/fsheikh"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1430926334, "post_id": 30080457, "comment_id": 48275658, "body": "@WhozCraig, Thanks for following up. If I add -Wall in addition to -O (the compiler command line), then I do get a unused variable warning. But without -Wall it simply compiles without any diagnostic message. Hence the mystery..."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1430926637, "post_id": 30080457, "comment_id": 48275906, "body": "@fsheikh How odd. You say you get an unused var warning but nothing about a tentative declaration warning/error? There must be something else that gcc has to exhibit that additional pedantic level. It is certainly possible gcc has no such warning/error, and doesn&#39;t bother with the error at link time since the var is tripped with opti anyway (what you&#39;re <i>likely</i> seeing now). Uptick."}], "answers": [{"comments": [{"owner": {"reputation": 406, "user_id": 1339091, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/s9msr.png?s=128&g=1", "display_name": "fsheikh", "link": "https://stackoverflow.com/users/1339091/fsheikh"}, "edited": false, "score": 0, "creation_date": 1430933132, "post_id": 30083089, "comment_id": 48280182, "body": "Thanks a lot for a comprehensive answer. Much appreciated!"}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1430936694, "post_id": 30083089, "comment_id": 48282459, "body": "Since this is a &#39;shall not&#39; requirement in the spec, a program that violates it causes undefined behavior -- which means a conforming compiler is not <i>required</i> to diagnose anything, and can do anything (including simply ignoring it as unused, as gcc does here)."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1430937793, "post_id": 30083089, "comment_id": 48283113, "body": "Thanks, @ChrisDodd.  I have revised the last part of my comments in light of your observation."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 4, "last_activity_date": 1430938357, "last_edit_date": 1592644375, "creation_date": 1430931596, "answer_id": 30083089, "question_id": 30080457, "link": "https://stackoverflow.com/questions/30080457/struct-storage-size-error-not-reported-by-gcc-with-optimization-turned-on/30083089#30083089", "title": "struct storage size error not reported by GCC with optimization turned on", "body": "<p>When it appears at file scope, this code:</p>\n<pre><code>static struct x x;\n</code></pre>\n<p>declares <code>x</code> as an object of type <code>struct x</code> and having internal linkage.  The type <code>struct x</code> need not have previously been declared:</p>\n<blockquote>\n<p>If a type specifier of the form <code>struct-or-union identifier</code> occurs other than [in a struct type declaration], and no other declaration of the identifier as a tag is visible, then it declares an incomplete structure or union type, and declares the identifier as the tag of that type.</p>\n</blockquote>\n<p>(C99 6.7.2.3/8)</p>\n<p>A structure or union type that is incomplete when first encountered in a translation unit can nevertheless be completed later in that translation unit:</p>\n<blockquote>\n<p>A structure or union type of unknown content [...] is an incomplete type. It is completed, for all declarations of that type, by declaring the same structure or union tag with its defining content later in the same scope.</p>\n</blockquote>\n<p>(C99 6.2.5/22)</p>\n<p>C discriminates between &quot;declarations&quot; generally, which specify the type of an object, and &quot;definitions&quot;, which both specify the type and cause storage to be reserved.  In a given translation unit, declarations that are not definitions may have incomplete type that is <em>never</em> completed within that unit.</p>\n<p>Section 6.9.2 of C99 specifies which file-scope object declarations are definitions:</p>\n<ul>\n<li>a declaration with file scope and an initializer is a definition (specifically, an &quot;external definition&quot;, even though the object it defines may have internal linkage)</li>\n<li>declaration with file scope and no initializer, and having static storage class or no storage class specifier is a &quot;tentative definition&quot;.  If the translation unit contains no external definition of the same object, then behavior is as if there were an external definition having initializer <code>0</code>.</li>\n</ul>\n<p>This section also specifies that &quot;If the declaration of an identifier for an object is a tentative definition and has internal linkage, the declared type shall not be an incomplete type.&quot;  That applies here, but since a type that is incomplete at one point in the translation unit can be completed by a later declaration, it does not inherently invalidate the line of code in question.  However, it <em>does</em> invalidate a translation unit containing only that line.</p>\n<h2>So what's up with GCC?</h2>\n<p>Inasmuch as the code given, taken as a complete translation unit, violates a &quot;shall not&quot; language constraint, it yields undefined behavior.  GCC is not obligated to reject the code or produce any kind of diagnostic, though it is permitted to do either or both.  As it turns out, regardless of optimization level, <code>gcc</code> does issue a warning about the code if the <code>-Wall</code> or <code>-pedantic</code> flag is turned on.  Any way around, <code>gcc</code> explicitly disclaims being a tool for validating standard compliance of your code.</p>\n<p>This particular violation is relatively benign, however.  Because the object is never referenced, <code>gcc</code> can pretend it was never even declared without risking wrong or unintended behavior.</p>\n<p>The <code>-fdce</code> (dead code elimintation) option seems to be one that affects this particular behavior.  Oddly, although <code>-fdce</code> is enough to suppress the error at optimization level <code>O0</code>, <code>-fno-dce</code> does not bring it back at higher optimization levels.</p>\n"}], "owner": {"reputation": 406, "user_id": 1339091, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/s9msr.png?s=128&g=1", "display_name": "fsheikh", "link": "https://stackoverflow.com/users/1339091/fsheikh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 597, "favorite_count": 0, "accepted_answer_id": 30083089, "answer_count": 1, "score": 5, "last_activity_date": 1430938357, "creation_date": 1430924359, "last_edit_date": 1430924745, "question_id": 30080457, "link": "https://stackoverflow.com/questions/30080457/struct-storage-size-error-not-reported-by-gcc-with-optimization-turned-on", "title": "struct storage size error not reported by GCC with optimization turned on", "body": "<p>In a file struct_test.c I write:</p>\n\n<pre><code>static struct x x; \n</code></pre>\n\n<p>and I compile with GCC (4.8.2, Ubuntu)</p>\n\n<pre><code>gcc -c -O0 struct_test.c\n</code></pre>\n\n<p>I get the understandable error:</p>\n\n<pre><code>error: storage size of 'x' isn't known\n</code></pre>\n\n<p>Then I recompile, this time with optimization turned on</p>\n\n<pre><code>gcc -c -O struct_test.c\n</code></pre>\n\n<p>and the file is compiled without error. </p>\n\n<p>I can kind of understand why turning on optimization removed the error but can someone help me to get the actual compiler option which is instructing gcc to ignore the undefined tag 'x'?</p>\n"}, {"tags": ["c", "linux", "build", "linker", "dynamic-linking"], "answers": [{"comments": [{"owner": {"reputation": 4523, "user_id": 1089419, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/111dfece8105ce72325b0cc0f6036ea1?s=128&d=identicon&r=PG", "display_name": "raj_gt1", "link": "https://stackoverflow.com/users/1089419/raj-gt1"}, "edited": false, "score": 0, "creation_date": 1430925974, "post_id": 30080881, "comment_id": 48275396, "body": "Thanks, in my case multiple dynamic object are defining and using the same symbol &#39;protocol&#39; but without any issue. so at the run time a routine process_http() will be reading the symbol value as &quot;HTTP&#39; and process_smtp(), which is define in libsmtp.so will be reading symbol value as &quot;SMTP&quot; . For this to be possible symbol must have been resolved cleanly and having separate addresses ? please correct me if i am wrong"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 4523, "user_id": 1089419, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/111dfece8105ce72325b0cc0f6036ea1?s=128&d=identicon&r=PG", "display_name": "raj_gt1", "link": "https://stackoverflow.com/users/1089419/raj-gt1"}, "edited": false, "score": 0, "creation_date": 1430926652, "post_id": 30080881, "comment_id": 48275921, "body": "Whether different modules in the same program seeing different values for a global is well characterized as &quot;without any issue&quot; is debatable, but I guess it&#39;s what want.  Yes, of course the symbol must be resolved to different addresses in the different modules, as all components of a program run in the same address space.  The highest-priority object in which a dynamic symbol is looked up is ordinarily the object in which the reference being resolved appears; this likely explains your observed behavior."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 5, "last_activity_date": 1430925395, "creation_date": 1430925395, "answer_id": 30080881, "question_id": 30080448, "link": "https://stackoverflow.com/questions/30080448/how-does-linker-resolves-duplicate-symbols-in-dynamically-loadable-libraries/30080881#30080881", "title": "How does linker resolves duplicate symbols in dynamically loadable libraries?", "body": "<p>Dynamic linking in modern Linux and several other operating systems is based on the ELF binary format.  The (ELF) dynamic libraries on which an executable or other shared library relies are prioritized.  To resolve a given symbol, the dynamic linker checks each library in priority order until it finds one that defines the symbol.</p>\n\n<p>That can be dicey when multiple dynamic objects define the same symbol and also multiple dynamic objects <em>use</em> that symbol.  It can then be the case that the symbol is resolved differently in different dynamic objects.</p>\n\n<p>Full details are out of scope for SO, but I don't know a better technical explanation than the one in Ulrich Drepper's paper \"<a href=\"https://software.intel.com/sites/default/files/m/a/1/e/dsohowto.pdf\" rel=\"noreferrer\">How to Write Shared Libraries</a>\".</p>\n"}, {"comments": [{"owner": {"reputation": 12350, "user_id": 1722462, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/4Gy00.jpg?s=128&g=1", "display_name": "uchuugaka", "link": "https://stackoverflow.com/users/1722462/uchuugaka"}, "edited": false, "score": 0, "creation_date": 1480233386, "post_id": 30119215, "comment_id": 68871948, "body": "how do you statically link with visibility limits for a Cocoa app?"}], "tags": [], "owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "is_accepted": false, "score": 2, "last_activity_date": 1431073633, "creation_date": 1431073633, "answer_id": 30119215, "question_id": 30080448, "link": "https://stackoverflow.com/questions/30080448/how-does-linker-resolves-duplicate-symbols-in-dynamically-loadable-libraries/30119215#30119215", "title": "How does linker resolves duplicate symbols in dynamically loadable libraries?", "body": "<p>In dynamic linking some facility called <em>\"symbol visibility\"</em> kicks in. Essentially this allows to expose only certain symbols across the object's (object in the sense of <em>shared object</em>) boundaries. It is good style to compile and link shared objects with symbols being hidden by default and only expose those explicitly that are required by callees.</p>\n\n<p>Symbol visibility is applied during linking and so far only implemented in dynamic linkers. It's certainly possible to also have it in static linkage, Apple's GCC variant implements so called <em>Mach-O relocateable object files</em> which can be statically linked with visibility applied. But I don't know if the vanilla GCC, binutils ld or the gold linker can do this for plain old ELF.</p>\n"}], "owner": {"reputation": 4523, "user_id": 1089419, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/111dfece8105ce72325b0cc0f6036ea1?s=128&d=identicon&r=PG", "display_name": "raj_gt1", "link": "https://stackoverflow.com/users/1089419/raj-gt1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3777, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1431073633, "creation_date": 1430924346, "question_id": 30080448, "link": "https://stackoverflow.com/questions/30080448/how-does-linker-resolves-duplicate-symbols-in-dynamically-loadable-libraries", "title": "How does linker resolves duplicate symbols in dynamically loadable libraries?", "body": "<p>I have two dynamically loadable libraries lib_smtp.so and and libpop.so etc. Both have a global variable named <code>protocol</code> which is initialized to \"SMTP\" and \"POP\" respectively. I have another static library libhttp.a where <code>protocol</code> is initialized to \"HTTP\".  </p>\n\n<p>Now for some reason i need to compile all dynamic linkable and loadable libraries statically and include in the executable. Doing so i am getting error \"<strong>multiple definition of symbol</strong>\" during linking of static libraries.   </p>\n\n<p>I am curious to know how linker resolves duplicate symbols during dynamic linking where all three mentioned libraries are getting linked ?  </p>\n\n<p>Is there some way i can do the same statically as linker is doing in dynamic linking ie without any conflict add all static libraries to executable which have same symbols? if not, why the process is different for statically linked libraries.</p>\n"}, {"tags": ["c", "debugging", "signals", "segmentation-fault", "ptrace"], "comments": [{"owner": {"reputation": 1207, "user_id": 1641854, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/79e6b5b23adf85e9a616af4cf4690cce?s=128&d=identicon&r=PG", "display_name": "user1641854", "link": "https://stackoverflow.com/users/1641854/user1641854"}, "edited": false, "score": 0, "creation_date": 1430924095, "post_id": 30080286, "comment_id": 48273859, "body": "GDB has ability to pass custom signals to the traced process. May be GDB sources will show you how it is achieved ?"}, {"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 2, "creation_date": 1430929540, "post_id": 30080286, "comment_id": 48277854, "body": "The SIGSEGV handler isn&#39;t being ignored, it just hasn&#39;t been invoked yet because ptrace has told the OS to stop the target when a signal is delivered to it. You might want to try <code>ptrace(PTRACE_CONT, target, 0, SIGSEGV)</code> to continue the target while delivering the signal to it."}, {"owner": {"reputation": 11, "user_id": 4066446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2dad15b775f9a67dfa6bb3d5390ae824?s=128&d=identicon&r=PG&f=1", "display_name": "Giacomo Travaglini", "link": "https://stackoverflow.com/users/4066446/giacomo-travaglini"}, "edited": false, "score": 0, "creation_date": 1430982423, "post_id": 30080286, "comment_id": 48300474, "body": "thank you! I solved it!I was doing instead: ptrace(PTRACE_CONT, target, 0, 0)"}], "owner": {"reputation": 11, "user_id": 4066446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2dad15b775f9a67dfa6bb3d5390ae824?s=128&d=identicon&r=PG&f=1", "display_name": "Giacomo Travaglini", "link": "https://stackoverflow.com/users/4066446/giacomo-travaglini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 642, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1430923942, "creation_date": 1430923942, "question_id": 30080286, "link": "https://stackoverflow.com/questions/30080286/using-ptrace-makes-sigsegv-handle-routine-not-working", "title": "Using Ptrace makes SIGSEGV handle routine not working", "body": "<p>I'm new to ptrace and I'm not able to solve this problem.\nI've copied and edited a simple debugger made with the ptrace system call and I'm trying to debug a test program that just makes use of a SIGSEGV handler... basically what I'm doing with the dummy program is:</p>\n\n<blockquote>\n<pre><code>    void segv_handler(int signum){\n  printf(\"I'm inside the routine\\n\");\n}\n\nvoid main(){\n\n  int h;\n\n  signal(SIGSEGV, segv_handler);\n  printf(\"Hello\\n\");\n  raise(SIGSEGV);\n  printf(\"Hello2\\n\");\n\n}\n</code></pre>\n</blockquote>\n\n<p>Easy.. The point is that my debugger gets notified of the SIGSEGV, in fact I get on the screen the result of the SIGSEGV printf, while the program doesn't print \"I'm inside the routine\", meaning that the segv_handler is beeing ignored. How is this possible? And how can I solve this problem?</p>\n\n<pre><code>    if(WIFSTOPPED(status)){\n        switch(WSTOPSIG(status)){\n\n            case SIGTRAP:\n                //printf(\"SIGTRAP\\n\");\n                break;\n\n            case SIGSTOP:\n                printf(\"SIGSTOP\\n\");\n                break;\n\n            case SIGSEGV:\n                printf(\"SIGSEGV\\n\");\n                //ptrace();\n                break;\n\n            default:\n                printf(\"else\\n\");\n                break;\n        }\n    }\n</code></pre>\n"}, {"tags": ["c", "buffer", "scanf", "fgets"], "comments": [{"owner": {"reputation": 2233, "user_id": 2669128, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/430a24425fb593f00def23e45c454c39?s=128&d=identicon&r=PG", "display_name": "thurizas", "link": "https://stackoverflow.com/users/2669128/thurizas"}, "edited": false, "score": 0, "creation_date": 1430924397, "post_id": 30080022, "comment_id": 48274081, "body": "Take a look at fame open, you can use it to convert a string into a stream.  Take a look at <a href=\"https://www.gnu.org/software/libc/manual/html_node/String-Streams.html\" rel=\"nofollow noreferrer\">gnu.org/software/libc/manual/html_node/String-Streams.html</a>"}, {"owner": {"reputation": 2279, "user_id": 1370785, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/oASta.jpg?s=128&g=1", "display_name": "jiveturkey", "link": "https://stackoverflow.com/users/1370785/jiveturkey"}, "edited": false, "score": 0, "creation_date": 1430924473, "post_id": 30080022, "comment_id": 48274163, "body": "you can use <code>strtok</code>"}, {"owner": {"reputation": 25, "user_id": 4493501, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/keBqM.jpg?s=128&g=1", "display_name": "Clucluzinha", "link": "https://stackoverflow.com/users/4493501/clucluzinha"}, "edited": false, "score": 0, "creation_date": 1430931330, "post_id": 30080022, "comment_id": 48279036, "body": "Thanks for the replies, both streams and strtok will help me for sure. :D"}], "answers": [{"tags": [], "owner": {"reputation": 63, "user_id": 3849824, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100001839991267/picture?type=large", "display_name": "Lucas Sodr&#233;", "link": "https://stackoverflow.com/users/3849824/lucas-sodr%c3%a9"}, "is_accepted": false, "score": 0, "last_activity_date": 1430924527, "creation_date": 1430924527, "answer_id": 30080528, "question_id": 30080022, "link": "https://stackoverflow.com/questions/30080022/how-to-break-a-string-that-was-read-using-fgets-using-scanfs/30080528#30080528", "title": "How to break a string, that was read using fgets(), using scanf(&quot;%s&quot;,..)", "body": "<p>You can use a buffer to store all the data that is read at the first time using the fgets(); function.</p>\n\n<p>So if the expression is well formed you already have the data, and do not need to read it </p>\n\n<p>The algorithm would be:\n     Use the fgets() to get each part of the expression\n     Store in a buffer variable separating then using a space or another character\n    If the expression is well formed, get the buffer\n     Read each part of the buffer that is separated with space and put then in a new int variable (or array)\n   Compute the expression using this variables (or array)</p>\n\n<p>look this 2 function, they may help you</p>\n\n<p><a href=\"http://www.cplusplus.com/reference/string/string/find/\" rel=\"nofollow\">http://www.cplusplus.com/reference/string/string/find/</a>\n<a href=\"http://www.cplusplus.com/reference/string/string/substr/\" rel=\"nofollow\">http://www.cplusplus.com/reference/string/string/substr/</a></p>\n"}, {"tags": [], "owner": {"reputation": 6975, "user_id": 3121023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52448806175b9aa66c86d40cf0829f1?s=128&d=identicon&r=PG&f=1", "display_name": "user3121023", "link": "https://stackoverflow.com/users/3121023/user3121023"}, "is_accepted": true, "score": 1, "last_activity_date": 1430925081, "creation_date": 1430925081, "answer_id": 30080741, "question_id": 30080022, "link": "https://stackoverflow.com/questions/30080022/how-to-break-a-string-that-was-read-using-fgets-using-scanfs/30080741#30080741", "title": "How to break a string, that was read using fgets(), using scanf(&quot;%s&quot;,..)", "body": "<p>You can use <code>sscanf()</code> to advance through a buffer read by <code>fgets()</code><br>\n%n will receive the number of characters used by the scan.  Adding used to the offset will advance the scan through the buffer.</p>\n\n<pre><code>int offset = 0;\nint used = 0;\nchar line[1000];\nchar item[200];\nfgets ( line, sizeof ( line), stdin);\nwhile ( ( sscanf ( line + offset, \"%199s%n\", item, &amp;used)) == 1) {\n    offset += used;\n    // do something with item\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 4493501, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/keBqM.jpg?s=128&g=1", "display_name": "Clucluzinha", "link": "https://stackoverflow.com/users/4493501/clucluzinha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 290, "favorite_count": 0, "accepted_answer_id": 30080741, "answer_count": 2, "score": 0, "last_activity_date": 1430925081, "creation_date": 1430923374, "last_edit_date": 1430924740, "question_id": 30080022, "link": "https://stackoverflow.com/questions/30080022/how-to-break-a-string-that-was-read-using-fgets-using-scanfs", "title": "How to break a string, that was read using fgets(), using scanf(&quot;%s&quot;,..)", "body": "<p>I am working on a program that takes a mathematical expression, transforms it to posfix notation and then solves it.</p>\n\n<p>First I am checking the expression to see if it is well formed ( Open brackets and parenthesis matches the closing ones ). To do the part of checking I used <code>fgets()</code> to get the string, because it ignores white spaces as far as I know.</p>\n\n<p>Now I have to break the string when a white space shows up, but for this part would be easier to use a <em>do while</em> using the buffer of a <code>scanf( \"%s\" ,...)</code></p>\n\n<p>Is there any way that I can use the scanf trick to break the string, work on int part by part without reading it again? </p>\n"}, {"tags": ["c", "stack"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1430923298, "post_id": 30079950, "comment_id": 48273190, "body": "<code>z-&gt;next = z;</code> How does this make any sense? And how does allocating 2 head nodes instead of 1 make any sense? Also your code isn&#39;t valid C if compiled with a modern compiler. All functions must have a return type, implicit int was removed from the language 16 years ago."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1430923894, "post_id": 30079950, "comment_id": 48273682, "body": "And as always, <a href=\"http://stackoverflow.com/a/605858/3233393\">please don&#39;t cast the result of <code>malloc()</code></a>."}], "answers": [{"comments": [{"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 1, "creation_date": 1430923896, "post_id": 30080076, "comment_id": 48273686, "body": "Additionally, you have a stackinit function but I don&#39;t believe that you ever call it.  This means that <code>head</code> is invalid."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4842163"}, "reply_to_user": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 0, "creation_date": 1430923986, "post_id": 30080076, "comment_id": 48273768, "body": "Phew, I&#39;ll mention that one as well. I was all wrapped up in trying to explain the list logic."}, {"owner": {"reputation": 1379, "user_id": 4252339, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/5b8bec97210309eb1e5eba89ee3c214f?s=128&d=identicon&r=PG&f=1", "display_name": "anubis", "link": "https://stackoverflow.com/users/4252339/anubis"}, "edited": false, "score": 1, "creation_date": 1430924417, "post_id": 30080076, "comment_id": 48274105, "body": "oh yes, I don&#39;t understand all you explanations, but it work. Alternatively my solution also work, only if I add stackinit() at th begin of my main function! Thanks a lot!"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4842163"}, "is_accepted": true, "score": 3, "last_activity_date": 1430924883, "last_edit_date": 1430924883, "creation_date": 1430923495, "answer_id": 30080076, "question_id": 30079950, "link": "https://stackoverflow.com/questions/30079950/segmentation-fault-core-dumped-stack/30080076#30080076", "title": "Segmentation fault (core dumped) STACK", "body": "<p>In push:</p>\n\n<pre><code>t-&gt;next = head-&gt;next\nhead-&gt;next = t;\n</code></pre>\n\n<p>Should be:</p>\n\n<pre><code>t-&gt;next = head;\nhead = t;\n</code></pre>\n\n<p>What you want to do is first pretend like <code>t</code> is the new head, so you set the next pointer to point at the current head. If we imagine <code>head</code> is <code>A</code> and the element below in the stack is <code>B</code>, we first have <code>t</code> stranded on the side:</p>\n\n<pre><code>t = new_node;\n-- t  A(head)-&gt;B-&gt;...-&gt;NULL\n</code></pre>\n\n<p>The first line hooks <code>t</code> up to the head like so:</p>\n\n<pre><code>t-&gt;next = head;\n-- t-&gt;A(head)-&gt;B-&gt;...\n</code></pre>\n\n<p>Then the second makes <code>t</code> the new head.</p>\n\n<pre><code>head = t;\n-- t(head)-&gt;A-&gt;B-&gt;...-&gt;NULL\n</code></pre>\n\n<p>Now your pop also has some issues:</p>\n\n<pre><code>t = head-&gt;next;\nhead-&gt;next = t-&gt;next;\n</code></pre>\n\n<p>This should be:</p>\n\n<pre><code>t = head;\nhead = head-&gt;next;\n</code></pre>\n\n<p>What we are doing is copying the current head to <code>t</code> so that we don't lose it just yet, and then the next line is the real line that pops the stack (changing the head to point to the element below the stack).</p>\n\n<p>I really recommend drawing this on paper before you write your code. It'll help you learn a lot quicker.</p>\n\n<p>Last but not least, you have this <code>stackinit</code> function you need to call to initialize everything properly, but you aren't calling it. And inside there, I'm not sure what <code>z</code> is supposed to be doing, but this is surely incorrect:</p>\n\n<pre><code>z-&gt;next = z;\n</code></pre>\n\n<p>This is making <code>z</code> circular, like so: <code>z-&gt;z-&gt;z-&gt;z-&gt;...</code></p>\n"}], "owner": {"reputation": 1379, "user_id": 4252339, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/5b8bec97210309eb1e5eba89ee3c214f?s=128&d=identicon&r=PG&f=1", "display_name": "anubis", "link": "https://stackoverflow.com/users/4252339/anubis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 30080076, "answer_count": 1, "score": 0, "last_activity_date": 1430924883, "creation_date": 1430923198, "question_id": 30079950, "link": "https://stackoverflow.com/questions/30079950/segmentation-fault-core-dumped-stack", "title": "Segmentation fault (core dumped) STACK", "body": "<p>I'm trying to implement a simple stack, but I have a segmentation problem:</p>\n\n<pre><code>struct node {\n    int key;\n    struct node *next;\n};\nstatic struct node *head, *z, *t;\n\nint main(int argc, char** argv) {\n    push(5);\n    push(9);\n    push(8);\n    push(pop()+pop());\n    push(4);\n    push(6);\n    push(pop()*pop());\n    push(pop()*pop());\n    push(7);\n    push(pop()+pop());\n    push(pop()*pop());\n    printf(\"%d\\n\", pop());\n    return (EXIT_SUCCESS);\n}\n\nstackinit() {\n    head = (struct node*) malloc(sizeof *head);\n    z = (struct node*) malloc(sizeof *z);\n    head-&gt;next = z;\n    head-&gt;key = 0;\n    z-&gt;key = 0;\n    z-&gt;next = z;\n}\n\nstackempty() {\n    return head-&gt;next == z;\n}\n\nint pop() {\n    int x;\n    t = head-&gt;next;\n    head-&gt;next = t-&gt;next;\n    x = t-&gt;key;\n    free(t);\n    return x;\n}\n\npush(int v) {\n    t = (struct node*) malloc(sizeof *t);\n    t-&gt;key = v;\n    t-&gt;next = head-&gt;next;\n    head-&gt;next = t;\n\n}\n</code></pre>\n\n<p>The error given is: Segmentation fault (core dumped)</p>\n\n<p>I understand that I'm looking a id that not exist, but I don't find why?</p>\n\n<p>Somebody knows why?\nThanks\nBest regards</p>\n"}, {"tags": ["c", "multithreading", "lua", "lua-lanes"], "owner": {"reputation": 3276, "user_id": 1216152, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/7NgFg.jpg?s=128&g=1", "display_name": "Cheiron", "link": "https://stackoverflow.com/users/1216152/cheiron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 430, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1512957060, "creation_date": 1430923195, "last_edit_date": 1430923749, "question_id": 30079948, "link": "https://stackoverflow.com/questions/30079948/lua-lanes-using-a-c-library", "title": "Lua Lanes: using a C library", "body": "<p>We are running an c library that is tested trough a Lua testscript. This runs fine, but we decided that it was time for some multithreading. So we started implementing Lua Lanes but got stuck on loading the C lib for the threads. </p>\n\n<p>So we have a function test, this is the actual test suite function (it runs all other functions) and as a start I tried to push it to a seperate thread, by calling it like this:</p>\n\n<pre><code>local pwlog = require \"pwlog\"\n--A milion lines of code, one of which is the test function\ntestF = lanes.gen(\"*\", {required = {\"pwlog\"}}, tests)()\n</code></pre>\n\n<p>Just to be clear: <code>local pwlog</code> is not defined in a function, but globally.</p>\n\n<p>I based this on this: <a href=\"https://github.com/LuaLanes/lanes/issues/108\" rel=\"nofollow\">https://github.com/LuaLanes/lanes/issues/108</a>, but I found it hard to figure out exactly what he ment. Well, this was wrong:</p>\n\n<p><code>lua: /usr/local/share/lua/5.1/lanes.lua:327: main: function 'pwlogs/block_size' not found in Lane #0x2390770 destination transfer database</code></p>\n\n<p>Allright, so I tried something different. I added one additional line to the top of my test function:</p>\n\n<pre><code>local function tests ()\n    pwlog = require \"pwlog\"\n    print(\"test\")\n--etc\n</code></pre>\n\n<p>And I changed the invocation:</p>\n\n<pre><code>testF = lanes.gen(\"*\", tests)()\n</code></pre>\n\n<p>I thought this would work. Here pwlog does not exist until after the thread is already created, so I figured everything would be ok. But it came back with a very puzzeling error:</p>\n\n<pre><code>lua: /usr/local/share/lua/5.1/lanes.lua:327: can't copy non-deep full userdata across lanes\n</code></pre>\n\n<p>This error is thrown in the following line:</p>\n\n<pre><code>testF = lanes.gen(\"*\", tests)()\n</code></pre>\n\n<p>So now I am stuck. How am I supposed to load the C functions into my lua lanes thread?</p>\n\n<p>I am using Lua 5.1</p>\n"}, {"tags": ["c", "memory-management", "mpi"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 4871041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c4fe2e0ebdaae2c3f0da38013791942?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Greenhalgh", "link": "https://stackoverflow.com/users/4871041/josh-greenhalgh"}, "edited": false, "score": 0, "creation_date": 1430926465, "post_id": 30080986, "comment_id": 48275760, "body": "If I where to define Px and Py at the top of the file then all the arrays would be of known size at compile time? and then I can declare the arrays the way I have? If I do that it works fine as long as I use more than 2 procs..."}, {"owner": {"reputation": 8043, "user_id": 491687, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/2174f845b769ea2ad2242047f3118128?s=128&d=identicon&r=PG", "display_name": "Wesley Bland", "link": "https://stackoverflow.com/users/491687/wesley-bland"}, "reply_to_user": {"reputation": 31, "user_id": 4871041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c4fe2e0ebdaae2c3f0da38013791942?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Greenhalgh", "link": "https://stackoverflow.com/users/4871041/josh-greenhalgh"}, "edited": false, "score": 0, "creation_date": 1430926551, "post_id": 30080986, "comment_id": 48275826, "body": "That&#39;s true. As long as all of your values are declared as macros. You still might run out of memory though depending on how many processes you use on a single node."}, {"owner": {"reputation": 31, "user_id": 4871041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c4fe2e0ebdaae2c3f0da38013791942?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Greenhalgh", "link": "https://stackoverflow.com/users/4871041/josh-greenhalgh"}, "edited": false, "score": 0, "creation_date": 1430926676, "post_id": 30080986, "comment_id": 48275937, "body": "So I am running on my mac which has 4 cores...it will not work for Px=1,Py=2 but will work for Px=1,Py=3 and Px=2,Py=2"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1430926790, "post_id": 30080986, "comment_id": 48276023, "body": "&quot;<i>You can&#39;t allocate dynamic arrays in C in the way you&#39;re doing.</i>&quot; true for C89. Since C99 VLAs are around and the code shown is perfectly valid C."}, {"owner": {"reputation": 8043, "user_id": 491687, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/2174f845b769ea2ad2242047f3118128?s=128&d=identicon&r=PG", "display_name": "Wesley Bland", "link": "https://stackoverflow.com/users/491687/wesley-bland"}, "edited": false, "score": 0, "creation_date": 1430926798, "post_id": 30080986, "comment_id": 48276032, "body": "Bigger <code>Px</code> and <code>Py</code> values mean you allocate less memory because those are divisors. If you&#39;re really up against the wall like that, what&#39;s your aversion to using the heap? Speed probably isn&#39;t an issue anymore, especially if you&#39;re running at small scale."}, {"owner": {"reputation": 8043, "user_id": 491687, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/2174f845b769ea2ad2242047f3118128?s=128&d=identicon&r=PG", "display_name": "Wesley Bland", "link": "https://stackoverflow.com/users/491687/wesley-bland"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1430926854, "post_id": 30080986, "comment_id": 48276086, "body": "Fair enough @alk, I barely use code written with C99 so I haven&#39;t seen people widely using that. I&#39;ve updated the answer."}, {"owner": {"reputation": 4724, "user_id": 1024740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1037d544b43c71c34225fac55e0c7750?s=128&d=identicon&r=PG", "display_name": "Rob Latham", "link": "https://stackoverflow.com/users/1024740/rob-latham"}, "edited": false, "score": 1, "creation_date": 1430944282, "post_id": 30080986, "comment_id": 48287163, "body": "To confirm Wes&#39;s hunch about stack usage, gcc tells us this, if you add the -Wstack-usage flag: &quot;code_bigstack.c:128:1: warning: stack usage might be unbounded [-Wstack-usage=]&quot;  }"}], "tags": [], "owner": {"reputation": 8043, "user_id": 491687, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/2174f845b769ea2ad2242047f3118128?s=128&d=identicon&r=PG", "display_name": "Wesley Bland", "link": "https://stackoverflow.com/users/491687/wesley-bland"}, "is_accepted": false, "score": 2, "last_activity_date": 1430926919, "last_edit_date": 1495542514, "creation_date": 1430925642, "answer_id": 30080986, "question_id": 30079946, "link": "https://stackoverflow.com/questions/30079946/segmentation-fault-when-declaring-arrays/30080986#30080986", "title": "Segmentation fault when declaring arrays", "body": "<p>You're probably running out of memory on the stack. If you're not familiar with the difference between the stack and the heap, check out: <a href=\"https://stackoverflow.com/questions/79923/what-and-where-are-the-stack-and-heap\">What and where are the stack and heap?</a>. If I change to use the heap, it was fine.</p>\n\n<p>To allocate memory from the heap for your arrays, use:</p>\n\n<pre><code>    double *masterarray = malloc(sizeof(double) * M * N);\n    double *outarray = malloc(sizeof(double) * M * N);\n    double *local_array = malloc(sizeof(double) * M/Px * N/Py);\n    double *local_padded_array = malloc(sizeof(double) * (M/Px+2) * (N/Py+2));\n    double *old = malloc(sizeof(double) * (M/Px+2) * (N/Py+2));\n</code></pre>\n\n<p>Here's my version of your original code that runs fine (some extra junk removed to avoid creating files and whatnot):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n#include &lt;mpi.h&gt;\n\n#define M 768\n#define N 768\n\n#define P 2\n#define DEL 1\n#define CHECKFREQ 500\n\n#define MAXITER   5000\n\nint main(int argc, char **argv)\n{\n    MPI_Init(&amp;argc, &amp;argv);\n    int rank,size;\n    MPI_Comm_size(MPI_COMM_WORLD, &amp;size);\n    MPI_Comm_rank(MPI_COMM_WORLD, &amp;rank);\n\n    MPI_Status status;\n    MPI_Request req;\n    MPI_Comm cart_comm;\n\n    int dims[2] = {0,0};\n    int periods[2] = {0,0};\n    int coords[2];\n    MPI_Dims_create(P, 2, dims);\n    MPI_Cart_create(MPI_COMM_WORLD,2,dims,periods,1, &amp;cart_comm);\n    MPI_Cart_coords(cart_comm, rank, 2, coords);\n    int Px = dims[0];\n    int Py = dims[1];\n\n    int i,j,locali,localj,iter;\n    printf(\"%d,%d,%d\\n\",rank,M/Px,N/Py);\n\n    double *masterarray = malloc(sizeof(double) * M * N);\n    double *outarray = malloc(sizeof(double) * M * N);\n    double *local_array = malloc(sizeof(double) * M/Px * N/Py);\n    double *local_padded_array = malloc(sizeof(double) * (M/Px+2) * (N/Py+2));\n    double *old = malloc(sizeof(double) * (M/Px+2) * (N/Py+2));\n\n    if (masterarray == NULL) fprintf(stderr, \"MASTERARRAY == NULL\");\n    if (outarray == NULL) fprintf(stderr, \"OUTARRAY == NULL\");\n    if (local_array == NULL) fprintf(stderr, \"LOCAL_ARRAY == NULL\");\n    if (local_padded_array == NULL) fprintf(stderr, \"LOCAL_PADDED_ARRAY == NULL\");\n    if (old == NULL) fprintf(stderr, \"OLD == NULL\");\n\n    printf(\"%d,%d,%d\\n\",rank,Px,Py);\n\n    MPI_Finalize();\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 4871041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c4fe2e0ebdaae2c3f0da38013791942?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Greenhalgh", "link": "https://stackoverflow.com/users/4871041/josh-greenhalgh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1148, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1430926919, "creation_date": 1430923192, "last_edit_date": 1430925826, "question_id": 30079946, "link": "https://stackoverflow.com/questions/30079946/segmentation-fault-when-declaring-arrays", "title": "Segmentation fault when declaring arrays", "body": "<p>I have the following code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n#include &lt;mpi.h&gt;\n\nvoid pgmsize (char *filename, int *nx, int *ny);\nvoid pgmread (char *filename, void *vx, int nx, int ny);\nvoid pgmwrite(char *filename, void *vx, int nx, int ny);\n\n#define FILENAME \"edge768x768.pgm\"\n#define M 768\n#define N 768\n\n#define P 2\n#define DEL 1\n#define CHECKFREQ 500\n\n#define MAXITER   5000\n\nint main(int argc, char **argv){\n\n    MPI_Init(&amp;argc, &amp;argv);\n    int rank,size;\n    MPI_Comm_size(MPI_COMM_WORLD, &amp;size);\n    MPI_Comm_rank(MPI_COMM_WORLD, &amp;rank);\n\n    FILE *fp;\n    char outname[64];\n    sprintf(outname,\"out_%d.dat\",P);\n    fp = fopen( outname, \"w\" );\n    fprintf(fp,\"del,iter,avg\\n\");\n\n    MPI_Status status;\n    MPI_Request req;\n    MPI_Comm cart_comm;\n\n    int dims[2] = {0,0};\n    int periods[2] = {0,0};\n    int coords[2];\n    MPI_Dims_create(P, 2, dims);\n    MPI_Cart_create(MPI_COMM_WORLD,2,dims,periods,1, &amp;cart_comm);\n    MPI_Cart_coords(cart_comm, rank, 2, coords);\n    int Px = dims[0];\n    int Py = dims[1];\n\n    int i,j,locali,localj,iter;\n    printf(\"%d,%d,%d\\n\",rank,M/Px,N/Py);\n    double masterarray[M][N];\n    double outarray[M][N];\n    double local_array[M/Px][N/Py];\n    double local_padded_array[M/Px+2][N/Py+2];\n    double old[M/Px+2][N/Py+2];\n\n    printf(\"%d,%d,%d\\n\",rank,Px,Py);\n\n\n\n    fclose(fp);\n    MPI_Finalize();\n}\n</code></pre>\n\n<p>When compiled and run gives the following error:</p>\n\n<blockquote>\n  <p>mpiexec noticed that process rank 0 with PID 28696 on node My-MacBook-Air exited on signal 11 (Segmentation fault: 11).</p>\n</blockquote>\n\n<p>However, if I change the declaration of the master array to:</p>\n\n<pre><code>float masterarray[M][N]\n</code></pre>\n\n<p>it compiles and runs fine. Can anyone help? Also runs fine if all arrays are declared as <code>floats</code>. Perhaps a better understanding of the difference between the two types may help me understand what is going on.</p>\n\n<hr>\n\n<p>Having continued to write my code using all float arrays, I have now come up with another issue relating to the arrays. My code is now:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n#include &lt;mpi.h&gt;\n\nvoid pgmsize (char *filename, int *nx, int *ny);\nvoid pgmread (char *filename, void *vx, int nx, int ny);\nvoid pgmwrite(char *filename, void *vx, int nx, int ny);\n\n#define FILENAME \"edge768x768.pgm\"\n#define M 768\n#define N 768\n\n#define P 2\n#define DEL 1\n#define CHECKFREQ 500\n\n#define MAXITER   5000\n\nint main(int argc, char **argv){\n\n    MPI_Init(&amp;argc, &amp;argv);\n    int rank,size;\n    MPI_Comm_size(MPI_COMM_WORLD, &amp;size);\n    MPI_Comm_rank(MPI_COMM_WORLD, &amp;rank);\n\n    FILE *fp;\n    char outname[64];\n    sprintf(outname,\"out_%d.dat\",P);\n    fp = fopen( outname, \"w\" );\n    fprintf(fp,\"del,iter,avg\\n\");\n\n    MPI_Status status;\n    MPI_Request req;\n    MPI_Comm cart_comm;\n\n    int dims[2] = {0,0};\n    int periods[2] = {0,0};\n    int coords[2];\n    MPI_Dims_create(P, 2, dims);\n    MPI_Cart_create(MPI_COMM_WORLD,2,dims,periods,1, &amp;cart_comm);\n    MPI_Cart_coords(cart_comm, rank, 2, coords);\n    int Px = dims[0];\n    int Py = dims[1];\n\n    int i,j,locali,localj,iter;\n    float masterarray[M][N];\n    float outarray[M][N];\n    float local_array[M/Px][N/Py];\n    float local_padded_array[M/Px+2][N/Py+2];\n    float old[M/Px+2][N/Py+2];\n    float new[M/Px+2][N/Py+2];\n\n\n\n    if (rank == 0){\n        pgmread(FILENAME, masterarray, M, N);\n    }\n\n    MPI_Bcast(masterarray,M*N,MPI_FLOAT,0,MPI_COMM_WORLD);\n\n    for(i=0;i&lt;M/Px;i++){\n        for(j=0;j&lt;N/Py;j++){\n\n          locali = i + coords[0] * M/Px;\n          localj = j + coords[1] * N/Py;\n\n\n          local_array[i][j] = masterarray[locali][localj];\n\n        }\n    }\n\n    for (i = 0;i&lt;M/Px +2;i++){\n        for (j = 0;j&lt;N/Py +2;j++){\n            local_padded_array[i][j] = 255.0;\n        }\n    }\n\n    for (i = 1;i&lt;M/Px +1;i++){\n        for (j = 1;j&lt;N/Py +1;j++){\n            local_padded_array[i][j] = local_array[i-1][j-1];\n        }\n    }\n\n    for (i = 0;i&lt;M/Px +2;i++){\n        for (j = 0;j&lt;N/Py +2;j++){\n            old[i][j] = 255.0;\n        }\n    }\n\n    int down_rank,up_rank,right_rank,left_rank;\n    MPI_Cart_shift(cart_comm,0,1,&amp;right_rank,&amp;left_rank);\n    MPI_Cart_shift(cart_comm,1,1,&amp;down_rank,&amp;up_rank);\n\n    MPI_Datatype col;\n    MPI_Type_vector(M/Px,1,N/Py+2,MPI_FLOAT,&amp;col);\n    MPI_Type_commit(&amp;col);\n\n    float globaldel = 1000.0;\n    float globalsum = 0.0;\n    double time1 = MPI_Wtime();\n    for(iter = 0;iter &lt; MAXITER;iter++){\n\n        MPI_Issend(&amp;old[1][N/Py], 1,col,up_rank, 0,cart_comm, &amp;req);\n        MPI_Recv(&amp;old[1][0], 1,col, down_rank, 0,cart_comm, &amp;status);\n\n        MPI_Issend(&amp;old[1][1], 1,col ,down_rank, 0,cart_comm, &amp;req);\n        MPI_Recv(&amp;old[1][N/Py+1], 1,col ,up_rank, 0,cart_comm, &amp;status);\n\n        MPI_Issend(&amp;old[M/Px][1], N/Py,MPI_FLOAT,left_rank, 0,cart_comm, &amp;req);\n        MPI_Recv(&amp;old[0][1], N/Py,MPI_FLOAT, right_rank, 0,cart_comm, &amp;status);\n\n        MPI_Issend(&amp;old[1][1], N/Py,MPI_FLOAT,right_rank, 0,cart_comm, &amp;req);\n        MPI_Recv(&amp;old[M/Px+1][1], N/Py,MPI_FLOAT, left_rank, 0,cart_comm, &amp;status);\n\n        for (i = 1;i&lt;M/Px +1;i++){\n        for (j = 1;j&lt;N/Py +1;j++){\n                new[i][j] = 0.25*(old[i][j-1]+old[i][j+1]+old[i-1][j]+old[i+1][j] - local_padded_array[i][j]);\n            }\n         }\n    }\n\n    printf(\"%d,%d,%d\\n\",rank,M/Px,N/Py);\n    fclose(fp);\n    MPI_Finalize();\n}\n</code></pre>\n\n<p>which when run gives another segmentation error that seems to be corrected if in the final loop I do not set elements in the new array. So it seems that there is some major issue in the creation of my arrays! The code also seems to run fine if <code>#define P 3</code> is used rather than <code>#define P 2</code></p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 418, "user_id": 791007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9d3e6c849b790270cbdf0f265114e58?s=128&d=identicon&r=PG", "display_name": "Kik", "link": "https://stackoverflow.com/users/791007/kik"}, "edited": false, "score": 3, "creation_date": 1430923141, "post_id": 30079850, "comment_id": 48273065, "body": "<a href=\"http://stackoverflow.com/questions/3602827/what-is-the-behavior-of-integer-division-in-c\" title=\"what is the behavior of integer division in c\">stackoverflow.com/questions/3602827/&hellip;</a>"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1598157807, "post_id": 30079850, "comment_id": 112363642, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/2345902/division-result-is-always-zero\">Division result is always zero</a>"}], "answers": [{"comments": [{"owner": {"reputation": 19505, "user_id": 3604745, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/U7HAo.png?s=128&g=1", "display_name": "Hack-R", "link": "https://stackoverflow.com/users/3604745/hack-r"}, "edited": false, "score": 0, "creation_date": 1430923245, "post_id": 30079916, "comment_id": 48273140, "body": "Thank you very much. I wonder if I missed this in the book or if this is new information. I will have to double check. Either way this is very helpful and I will accept it as the solution, thanks!"}, {"owner": {"reputation": 8876, "user_id": 1545171, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TiAiM.jpg?s=128&g=1", "display_name": "DrKoch", "link": "https://stackoverflow.com/users/1545171/drkoch"}, "edited": false, "score": 3, "creation_date": 1430923327, "post_id": 30079916, "comment_id": 48273225, "body": "Clearer explanation: The result of an integer division is an integer in <code>C</code> the fractional part is thrown away. The cast to float of one of the integers turns it into a float division which works as expected"}, {"owner": {"reputation": 76206, "user_id": 108205, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ef459127edc89cc575d80a73cd8c567a?s=128&d=identicon&r=PG", "display_name": "jsbueno", "link": "https://stackoverflow.com/users/108205/jsbueno"}, "edited": false, "score": 2, "creation_date": 1430923353, "post_id": 30079916, "comment_id": 48273248, "body": "Although the O.P. intends to do float division, you should at least warn him that this approach is subject to severe rounding error - and tell about the remainder operator. Could you?"}, {"owner": {"reputation": 3785, "user_id": 4427938, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/M6mua.png?s=128&g=1", "display_name": "Ayushi Jha", "link": "https://stackoverflow.com/users/4427938/ayushi-jha"}, "edited": false, "score": 0, "creation_date": 1430923419, "post_id": 30079916, "comment_id": 48273300, "body": "Yeah, I was adding all that now."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1430923599, "post_id": 30079916, "comment_id": 48273448, "body": "Or without casting: <code>min = sec; min &#47;= secpermin;</code>"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1430923736, "post_id": 30079916, "comment_id": 48273560, "body": "Also there is no need to cast when assigning <code>hr</code> as <code>min</code> is already typed <code>float</code>. Short: <code>min&#47;minperhour;</code> isn&#39;t an integer division."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1430924072, "post_id": 30079916, "comment_id": 48273846, "body": "Those code snippets are misleadingly giving the impression the assignement to <code>hr</code> needs to be casted to <code>float</code>  to avoid integer divsion, which is not the case. 1- for this. Please correct this."}], "tags": [], "owner": {"reputation": 3785, "user_id": 4427938, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/M6mua.png?s=128&g=1", "display_name": "Ayushi Jha", "link": "https://stackoverflow.com/users/4427938/ayushi-jha"}, "is_accepted": true, "score": 5, "last_activity_date": 1430924473, "last_edit_date": 1430924473, "creation_date": 1430923104, "answer_id": 30079916, "question_id": 30079850, "link": "https://stackoverflow.com/questions/30079850/why-do-i-lose-the-remainder-of-a-value-after-performing-arithmetic-in-c/30079916#30079916", "title": "Why do I lose the remainder of a value after performing arithmetic in C?", "body": "<p>Integer division: the integer value after dividing two ints gets stored in a floating point format. Eg: </p>\n\n<pre><code> float a = 3/5;\n</code></pre>\n\n<p>here an integer division will occur between <code>3</code> and <code>5</code> resulting in <code>0</code>. Now, if you try to store this <code>0</code> in a <code>float</code> variable, it will be stored as <code>0.00</code>.  </p>\n\n<pre><code>    min = sec/secpermin;\n</code></pre>\n\n<p>Should be </p>\n\n<pre><code>    min = (float)sec/secpermin;\n</code></pre>\n\n<p>or </p>\n\n<pre><code>    min = sec/(float)secpermin;\n</code></pre>\n\n<p>or, as @alk pointed out, you could also do this instead:</p>\n\n<pre><code>    min = sec;     \n    min /= secpermin;    // min=min/secpermin;   here, typecasting is not required as \n                        // numerator (min) is already float.\n</code></pre>\n\n<p>Alternatively, you can make them all <code>float</code>, and while printing typecast them as <code>int</code>. </p>\n"}], "owner": {"reputation": 19505, "user_id": 3604745, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/U7HAo.png?s=128&g=1", "display_name": "Hack-R", "link": "https://stackoverflow.com/users/3604745/hack-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 1, "accepted_answer_id": 30079916, "answer_count": 1, "score": 3, "last_activity_date": 1430924473, "creation_date": 1430922961, "last_edit_date": 1430923103, "question_id": 30079850, "link": "https://stackoverflow.com/questions/30079850/why-do-i-lose-the-remainder-of-a-value-after-performing-arithmetic-in-c", "title": "Why do I lose the remainder of a value after performing arithmetic in C?", "body": "<p>I am trying to learn basic C programming by following a <a href=\"https://play.google.com/store/books/details?id=MAAuAgAAQBAJ&amp;source=productsearch&amp;utm_source=HA_Desktop_US&amp;utm_medium=SEM&amp;utm_campaign=PLA&amp;pcampaignid=MKTAD0930BO1&amp;gl=US&amp;gclid=COPrwYimrcUCFVY8gQodLJ0A1A&amp;gclsrc=aw.ds\" rel=\"nofollow\">textbook</a> and I must be missing something about either the data types, rounding, and/or order of operations because when I try to construct a simple program to convert seconds to hours and minutes, the hours work but the remaining minutes come out to 0 when they should not be.</p>\n\n<p>Thanks to <a href=\"https://www.coursera.org/account/accomplishments/certificate/MQWCRXVVVR\" rel=\"nofollow\">Coursera</a>, I am aware that there are huge security vulnerabilities with programs like this, but for learning purposes I'll ask you to ignore security. For now, the books wants me to stick to using <code>printf</code>, <code>scanf</code>, and a <code>while</code> loop as they correspond to the chapters of the textbook I'm reading (the books lets me know that I'll get to start worrying about security when I'm a few chapters further along).</p>\n\n<p>My C program looks like this:</p>\n\n<pre><code>/* Ask the user for a number of seconds, convert to X hours and Y minutes */\n/* Continue doing this with a while loop until user enters 0 */\n#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n#include &lt;string.h&gt;\n\nint main(void)\n{\n    const int minperhour = 60;\n    const int secpermin  = 60;\n    int sec, hr;\n    float min;\n    sec = 1;\n    while(sec != 0)\n    {\n        printf(\"Enter the number of seconds to convert: \\n\");\n        scanf(\"%i\", &amp;sec);\n        min = sec/secpermin;\n        hr  = min/minperhour;\n        min = (sec/secpermin) - (hr * minperhour);\n        printf(\"%d hours and %f minutes \\n\", hr, min);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>I would expect that I could enter <code>3601</code> and the result would be:</p>\n\n<p><code>1 hours and 0.01667 minutes</code></p>\n\n<p>because this is how the expression is evaluated in the R language, with which I'm more familiar:</p>\n\n<pre><code>&gt; min = 3601/60\n&gt; min\n[1] 60.02\n&gt; hr = min/60\n&gt; hr\n[1] 1\n&gt; min = (3601/60) - (1 * 60)\n&gt; min\n[1] 0.01667\n</code></pre>\n\n<p>However, what I get in C is this:</p>\n\n<pre><code>C:\\Users\\hackr&gt;pa2q3.exe\nEnter the number of seconds to convert:\n3601\n1 hours and 0.000000 minutes\nEnter the number of seconds to convert:\n7205\n2 hours and 0.000000 minutes\nEnter the number of seconds to convert:\n0\n0 hours and 0.000000 minutes\n\nC:\\Users\\hackr&gt;\n</code></pre>\n\n<p>I threw in the <code>7205</code> second attempt just for good measure.</p>\n\n<p>I have a feeling that some of the you C gurus on Stack Overflow could use more advanced techniques to write a secure version of the program in some more succinct form. This may be educational as well if you want to mention it, but first and foremost I need to understand what's going on with this simple program.</p>\n"}, {"tags": ["c", "gcc", "windows-7", "makefile", "eclipse-cdt"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1430923742, "post_id": 30079799, "comment_id": 48273563, "body": "From the command line, I&#39;d tell Eclipse to get lost and call Mingw directly. Just configure your Windows PATH so that it looks in Mingw&#39;s bin directory."}], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1430923910, "post_id": 30080191, "comment_id": 48273701, "body": "I&#39;m pretty sure that Eclipse always creates absolute paths, even when you add paths to sub folders relative to their location in the workspace. I know this because of a nasty <a href=\"http://stackoverflow.com/questions/27905795/eclipse-cant-find-header-filers-even-though-include-paths-have-been-set\">Eclipse bug</a> I&#39;ve encountered."}, {"owner": {"reputation": 296564, "user_id": 34088, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8a4d6f03a8879432d8563aefbf48e787?s=128&d=identicon&r=PG", "display_name": "Aaron Digulla", "link": "https://stackoverflow.com/users/34088/aaron-digulla"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1430924193, "post_id": 30080191, "comment_id": 48273926, "body": "I added that cautionary comment since I don&#39;t have CDT installed. My observations are from the Makefile alone."}], "tags": [], "owner": {"reputation": 296564, "user_id": 34088, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8a4d6f03a8879432d8563aefbf48e787?s=128&d=identicon&r=PG", "display_name": "Aaron Digulla", "link": "https://stackoverflow.com/users/34088/aaron-digulla"}, "is_accepted": true, "score": 1, "last_activity_date": 1430923740, "creation_date": 1430923740, "answer_id": 30080191, "question_id": 30079799, "link": "https://stackoverflow.com/questions/30079799/what-is-eclipse-cdt-is-doing-with-make-under-the-hood/30080191#30080191", "title": "What is Eclipse CDT is doing with &#39;make&#39; under the hood", "body": "<p>That depends a bit on the paths that Eclipse generates in the files <code>source.mk</code> and <code>objects.mk</code> but most likely you need to <code>cd</code> into the <code>Debug</code> folder. </p>\n\n<p>Inside of that, you can then run <code>make all</code> to compile the project.</p>\n\n<p>If Eclipse generated absolute paths, you can use <code>make -f .../path/to/helloworld/Debug/makefile all</code> from anywhere.</p>\n"}, {"tags": [], "owner": {"reputation": 2233, "user_id": 2669128, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/430a24425fb593f00def23e45c454c39?s=128&d=identicon&r=PG", "display_name": "thurizas", "link": "https://stackoverflow.com/users/2669128/thurizas"}, "is_accepted": false, "score": 0, "last_activity_date": 1430934459, "creation_date": 1430934459, "answer_id": 30084036, "question_id": 30079799, "link": "https://stackoverflow.com/questions/30079799/what-is-eclipse-cdt-is-doing-with-make-under-the-hood/30084036#30084036", "title": "What is Eclipse CDT is doing with &#39;make&#39; under the hood", "body": "<p>The *.o files are the object file(s) created by compilation.  these files are typically build by a command like:</p>\n\n<pre><code>    Gcc -ansi -Wall -pedantic -c helloworld.c -o helloworld.o\n</code></pre>\n\n<p>(apologies foe capitalization of gcc, my iPad insists on correct my typing)</p>\n\n<p>The *.exe is the actual executable, which may or may not contain the library functions.  This depends on static versus dynamic linking.  The executable is created typically by:</p>\n\n<pre><code>    Gcc helloworld.o -o helloworld.exe \n</code></pre>\n\n<p>The *.d files are dependency files, built by gcc attempting to determine dependencies between files, typically built with the following command</p>\n\n<pre><code>    MAKEDEPEND = gcc -M $(CPPFLAGS) -o $*.d $&lt;\n</code></pre>\n\n<p>(Rule taken from make online documentation).  </p>\n\n<p>So,to answer your final question, to compile from the command line, a command like:</p>\n\n<pre><code>    Foo gcc -ansi -WAll -pedantic helloworld.c -o helloworld.exe\n</code></pre>\n\n<p>Should do the trick for you.  Note, the flags to the compiler are the minimum that I like to use, you will probably have a different set of switches.</p>\n\n<p>Hopes this help,\nT</p>\n"}], "owner": {"reputation": 22197, "user_id": 4009451, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d4d0917cf3785fd7bc9e95abeb1bcd1d?s=128&d=identicon&r=PG&f=1", "display_name": "smeeb", "link": "https://stackoverflow.com/users/4009451/smeeb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 1, "accepted_answer_id": 30080191, "answer_count": 2, "score": 0, "last_activity_date": 1430934459, "creation_date": 1430922822, "question_id": 30079799, "link": "https://stackoverflow.com/questions/30079799/what-is-eclipse-cdt-is-doing-with-make-under-the-hood", "title": "What is Eclipse CDT is doing with &#39;make&#39; under the hood", "body": "<p>I'm on Windows 7 and have MinGW/gcc installed. I'm using the <a href=\"http://eclipse.org/cdt/\" rel=\"nofollow\">Eclipse CDT plugin</a> to compile and build my first simple C programs, and am trying to follow what exactly the plugin is doing under the hood.</p>\n\n<p>I create a new \"Hello World!\" C project with the following directory structure:</p>\n\n<pre><code>helloworld/\n    src/\n        helloworld.c\n</code></pre>\n\n<p>Where <code>helloworld.c</code> is:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void) {\n    puts(\"Hello World!\");\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>So I created a Run Configuration in Debug Mode (as opposed to \"Release Mode\", <strong>not</strong> a \"Debug Configuration\" in typical Eclipse parlance!) and ran my app, and it works beautifully, printing \"Hello World!\" to the Eclipse console.</p>\n\n<p>Now I'm looking on my file system and the file/project structure is like so:</p>\n\n<pre><code>helloworld/\n    src/\n        helloworld.c\n    Debug/\n        src/\n            helloworld.d\n            helloworld.o\n            subdir.mk\n        helloworld.exe\n        makefile\n        objects.mk\n        source.mk\n</code></pre>\n\n<p>I <em>assume</em> that running my Run Configuration in Eclipse (hence compiling/building/running <code>helloworld</code> inside Eclipse) created everything under <code>Debug</code>. Furthermore I assume that <code>helloworld.d</code> and <code>helloworld.o</code> are compiled binaries, and that <code>helloworld.exe</code> is the packaged executable containing those binaries and everything they'red linked to (<code>stdio</code> and <code>stdlib</code>). I also assume <code>makefile</code> is the actual Make file (buildscript), and that the <code>*.mk</code> files are somehow inputs to that buildscript. So, for starters, if any of those assumptions are wrong, please begin by correcting me!</p>\n\n<p>When I open <code>makefile</code> I see this:</p>\n\n<pre><code>################################################################################\n# Automatically-generated file. Do not edit!\n################################################################################\n\n-include ../makefile.init\n\nRM := rm -rf\n\n# All of the sources participating in the build are defined here\n-include sources.mk\n-include src/subdir.mk\n-include subdir.mk\n-include objects.mk\n\nifneq ($(MAKECMDGOALS),clean)\nifneq ($(strip $(C_DEPS)),)\n-include $(C_DEPS)\nendif\nendif\n\n-include ../makefile.defs\n\n# Add inputs and outputs from these tool invocations to the build variables \n\n# All Target\nall: helloworld\n\n# Tool invocations\nhelloworld: $(OBJS) $(USER_OBJS)\n    @echo 'Building target: $@'\n    @echo 'Invoking: Cross GCC Linker'\n    gcc  -o \"helloworld\" $(OBJS) $(USER_OBJS) $(LIBS)\n    @echo 'Finished building target: $@'\n    @echo ' '\n\n# Other Targets\nclean:\n    -$(RM) $(EXECUTABLES)$(OBJS)$(C_DEPS) helloworld\n    -@echo ' '\n\n.PHONY: all clean dependents\n.SECONDARY:\n\n-include ../makefile.targets\n</code></pre>\n\n<p>Please note: I am <strong>not</strong> looking for someone to explain to me how Make works, I can RTFM for that ;-)</p>\n\n<p><strong>I am just trying to understand what it would take to compile, build and run <code>helloworld</code> from the command-line, outside of Eclipse.</strong> What command line invocations would I need to accomplish this, and why? Once I see that, combined with perusing Make docs, I should be able to fill in the gaps and understand everything that is going on.</p>\n"}, {"tags": ["c", "file-io", "char"], "comments": [{"owner": {"reputation": 2861, "user_id": 1705441, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WLXDb.gif?s=128&g=1", "display_name": "martin", "link": "https://stackoverflow.com/users/1705441/martin"}, "edited": false, "score": 1, "creation_date": 1430922828, "post_id": 30079768, "comment_id": 48272837, "body": "Where have you allocated <code>mesage</code>, how large is it?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1430922863, "post_id": 30079768, "comment_id": 48272860, "body": "Declare c as <code>int</code>. This is the type returned by <code>fgetc</code> and of  <code>EOF</code>."}, {"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1430922948, "post_id": 30079768, "comment_id": 48272922, "body": "how are you terminating that string as well? unless you&#39;ve initialized <code>mesage</code> to be all-nulls, you&#39;ll just have whatever random garbage was in that chunk of memory, and printing out the string would just keep printing trash until you per-chance hit a null char."}, {"owner": {"reputation": 2861, "user_id": 1705441, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WLXDb.gif?s=128&g=1", "display_name": "martin", "link": "https://stackoverflow.com/users/1705441/martin"}, "edited": false, "score": 0, "creation_date": 1430923008, "post_id": 30079768, "comment_id": 48272970, "body": "what Eugene says, <code>EOF</code> is usually -1, you declare <code>c</code> as unsigned char. Didn&#39;t your compiler complain?"}], "owner": {"reputation": 171, "user_id": 2997809, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/c2520db2be469c16e14a972abffbd297?s=128&d=identicon&r=PG&f=1", "display_name": "cristi.gherghina", "link": "https://stackoverflow.com/users/2997809/cristi-gherghina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 225, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1430923416, "creation_date": 1430922733, "last_edit_date": 1430923416, "question_id": 30079768, "link": "https://stackoverflow.com/questions/30079768/read-text-from-file-c-string-terminator", "title": "read text from file C string terminator", "body": "<p>I want to read a text from file which contains also '\\n' character</p>\n\n<p>This is my function </p>\n\n<pre><code>void readFromFile (FILE * fid, unsigned char * mesage) {\n    unsigned char c;\n    int mesage_length = 0;\n\n    while((c = fgetc(fid)) != EOF) {\n        mesage[mesage_length] = c;\n        mesage_length++;\n    }\n}\n</code></pre>\n\n<p>I have completely absolute no idea why when it gets to the '\\n' my program crashes, it enters in an infinite loop and the mesage_length grows up to 13992 or something, but i read only 13 characters like : \"Why not working?\\n\"</p>\n\n<p>How can i read the whole text until <code>EOF</code> and put it into a string (char *) ?</p>\n\n<p>If i put the condition inside the while <code>if(c == '\\n') break;</code> it works fine.. but would read until the first <code>\\n</code></p>\n"}, {"tags": ["c", "zlib"], "answers": [{"comments": [{"owner": {"reputation": 4181, "user_id": 3337677, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2a3cb5dc363dbc123686e074c4c3181e?s=128&d=identicon&r=PG&f=1", "display_name": "packetie", "link": "https://stackoverflow.com/users/3337677/packetie"}, "edited": false, "score": 0, "creation_date": 1430933429, "post_id": 30081342, "comment_id": 48280406, "body": "Thank you, @Wumpus Q. Wumbley. Wonder if it&#39;s possible to use zlib to uncompress gzipped content."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "is_accepted": true, "score": 3, "last_activity_date": 1430926490, "creation_date": 1430926490, "answer_id": 30081342, "question_id": 30079658, "link": "https://stackoverflow.com/questions/30079658/uncompress-error-when-using-zlib/30081342#30081342", "title": "uncompress error when using zlib", "body": "<p>zlib format is not gzip format. The zlib <code>uncompress</code> function doesn't understand the gzip format.</p>\n\n<p>You can generate some zlib format test data by writing a similar program that calls the <code>compress</code> function in zlib. Or you could use the <code>openssl zlib</code> command, if you have openssl installed.</p>\n"}, {"tags": [], "owner": {"reputation": 4181, "user_id": 3337677, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2a3cb5dc363dbc123686e074c4c3181e?s=128&d=identicon&r=PG&f=1", "display_name": "packetie", "link": "https://stackoverflow.com/users/3337677/packetie"}, "is_accepted": false, "score": 1, "last_activity_date": 1430938340, "creation_date": 1430938340, "answer_id": 30085231, "question_id": 30079658, "link": "https://stackoverflow.com/questions/30079658/uncompress-error-when-using-zlib/30085231#30085231", "title": "uncompress error when using zlib", "body": "<p>A complete, working example on uncompressing gzipped data (thanks to <a href=\"http://www.codeproject.com/Questions/341319/C-Decompress-Gzipped-http-response\" rel=\"nofollow\">link</a>)</p>\n\n<pre><code>#include &lt;zlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint readFile(char *fname, char buf[]) {\n    FILE *fp = fopen(fname, \"rb\");\n    if (fp == NULL) { printf(\"Failed to open %s\\n\", fname); exit(0);}\n    int n = fread(buf, 1, 0x100000, fp);\n    fclose(fp);\n    return n;\n}\nint inf(const char *src, int srcLen, const char *dst, int dstLen){\n    z_stream strm;\n    strm.zalloc=NULL;\n    strm.zfree=NULL;\n    strm.opaque=NULL;\n\n    strm.avail_in = srcLen;\n    strm.avail_out = dstLen;\n    strm.next_in = (Bytef *)src;\n    strm.next_out = (Bytef *)dst;\n\n    int err=-1, ret=-1;\n    err = inflateInit2(&amp;strm, MAX_WBITS+16);\n    if (err == Z_OK){\n        err = inflate(&amp;strm, Z_FINISH);\n        if (err == Z_STREAM_END){\n            ret = strm.total_out;\n        }\n        else{\n            inflateEnd(&amp;strm);\n            return err;\n        }\n    }\n    else{\n        inflateEnd(&amp;strm);\n        return err;\n    }\n    inflateEnd(&amp;strm);\n    printf(\"%s\\n\", dst);\n    return err;\n}\n\n\nchar buf[2][0x10000];\nint main(int argc, char *argv[]) {\n    long n = readFile(argv[1], &amp;buf[0][0]);\n    unsigned int *pInt = (unsigned int*) (&amp;buf[0][0]);\n    printf(\"n=%d %08x\\n\", n, *pInt);\n    long m = 0x10000;\n    int rc = inf(&amp;buf[0][0], n, &amp;buf[1][0], m);\n    printf(\"rc = %d %s\\n\", rc, &amp;buf[1][0]);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 4181, "user_id": 3337677, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2a3cb5dc363dbc123686e074c4c3181e?s=128&d=identicon&r=PG&f=1", "display_name": "packetie", "link": "https://stackoverflow.com/users/3337677/packetie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 839, "favorite_count": 0, "accepted_answer_id": 30081342, "answer_count": 2, "score": 2, "last_activity_date": 1430938340, "creation_date": 1430922452, "question_id": 30079658, "link": "https://stackoverflow.com/questions/30079658/uncompress-error-when-using-zlib", "title": "uncompress error when using zlib", "body": "<p>It could be a silly question.  When I tried to uncompress a compressed data in memory, got error.  Here is the code.</p>\n\n<pre><code>#include &lt;zlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint readFile(char *fname, char buf[]) {\n    FILE *fp = fopen(fname, \"rb\");\n    if (fp == NULL) { printf(\"Failed to open %s\\n\", fname); exit(0);}\n    int n = fread(buf, 1, 0x100000, fp);\n    fclose(fp);\n    return n;\n}\n\nchar buf[2][0x10000];\nint main(int argc, char *argv[]) {\n    long n = readFile(argv[1], &amp;buf[0][0]);\n    unsigned int *pInt = (unsigned int*) (&amp;buf[0][0]);\n    printf(\"n=%d %08x\\n\", n, *pInt);\n    long m = 0x10000;\n    int rc = uncompress(&amp;buf[1][0], &amp;m, &amp;buf[0][0], n);\n    printf(\"rc = %d %s\\n\", rc, &amp;buf[1][0]);\n    return 0;\n}\n</code></pre>\n\n<p>Got error:</p>\n\n<pre><code>./a.out te.html.gz\nn=169 08088b1f\nrc = -3 \n</code></pre>\n\n<p>te.html.gz is obtained from by running `gzip te.html'.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1430922535, "post_id": 30079573, "comment_id": 48272620, "body": "Because you need to link with the <code>dl</code> library for <code>dlopen</code>. Also, the error posted is a linker error, using <code>-Wl,rpath</code> sets the <i>run-time</i> path while <code>-L</code> sets the link-time path. Furthermore, if you link with static libraries, you need to add all the libraries they depend on, as a static library aren&#39;t self-contained."}, {"owner": {"reputation": 1691, "user_id": 3936510, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/fmDHX.gif?s=128&g=1", "display_name": "Roland Seuhs", "link": "https://stackoverflow.com/users/3936510/roland-seuhs"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1430925461, "post_id": 30079573, "comment_id": 48274976, "body": "Great comment, do you think that it is possible that the problem is caused by a badly-compiled openssl library?"}], "answers": [{"tags": [], "owner": {"reputation": 1691, "user_id": 3936510, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/fmDHX.gif?s=128&g=1", "display_name": "Roland Seuhs", "link": "https://stackoverflow.com/users/3936510/roland-seuhs"}, "is_accepted": true, "score": 0, "last_activity_date": 1430925179, "creation_date": 1430925179, "answer_id": 30080785, "question_id": 30079573, "link": "https://stackoverflow.com/questions/30079573/how-is-it-possible-that-wl-rpath-fails-to-find-a-library/30080785#30080785", "title": "How is it possible that &quot;-Wl,-rpath=&quot; fails to find a library?", "body": "<p>According to the comment from Joachim, the correct answer seems to be:</p>\n\n<p>-Wl,rpath= sets the runtime path\n-L sets the linking path</p>\n\n<p>and to answer the question:</p>\n\n<p>No, -Wl,rpath cannot be negatively influenced by system variables.</p>\n"}], "owner": {"reputation": 1691, "user_id": 3936510, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/fmDHX.gif?s=128&g=1", "display_name": "Roland Seuhs", "link": "https://stackoverflow.com/users/3936510/roland-seuhs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "accepted_answer_id": 30080785, "answer_count": 1, "score": 0, "last_activity_date": 1430925179, "creation_date": 1430922258, "question_id": 30079573, "link": "https://stackoverflow.com/questions/30079573/how-is-it-possible-that-wl-rpath-fails-to-find-a-library", "title": "How is it possible that &quot;-Wl,-rpath=&quot; fails to find a library?", "body": "<p>Basically I want to use a library in a custom dicrectory:</p>\n\n<p>Compiler arguments:</p>\n\n<pre><code>gcc -o conftest -Wl,-rpath=/MYPATH/ssl/lib -O2 -Wno-system-headers  -I/MYPATH/ssl//include -I/MYPATH/ssl//include/openssl  -L/MYPATH/ssl//lib conftest.c -lssl  -lcrypto -lrt\n</code></pre>\n\n<p>Compiler error (one of many):</p>\n\n<pre><code>dso_dlfcn.c:(.text+0x19): undefined reference to `dlopen'\n</code></pre>\n\n<p>(This example is taken from a failed curl config.log file, but the question is of general nature)</p>\n\n<p>I have double-checked that libssl.a and libcrypto.a exists in <code>/MYPATH/ssl/lib</code> and as seen above the <code>-Wl,rpath=</code> option is correctly set as compiler arguments.</p>\n\n<p>How is it possible that gcc does not find the library, despite using \"-Wl,rpath\"? As far as I thought (so far), \"-Wl,rpath\" should never fail regardless of any environment variables (like LD_LIBRARY_PATH, etc.) or files.</p>\n\n<p>Are there any environment variables that can cause \"-Wl,-rpath=\" to fail?</p>\n"}, {"tags": ["c", "gtk2"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1430922774, "post_id": 30079458, "comment_id": 48272796, "body": "I would say the next step would be to print the actual file name selected, rather than the plain <code>&quot;Success&quot;</code>, and to ensure you have a valid copy before closing the dialog."}, {"owner": {"reputation": 8749, "user_id": 4702146, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ba5530d24166ce3995a46cc0f5687e3e?s=128&d=identicon&r=PG&f=1", "display_name": "Barr J", "link": "https://stackoverflow.com/users/4702146/barr-j"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1430925300, "post_id": 30079458, "comment_id": 48274833, "body": "the success is for test issues, instead of the print the file should execute."}], "answers": [{"comments": [{"owner": {"reputation": 8749, "user_id": 4702146, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ba5530d24166ce3995a46cc0f5687e3e?s=128&d=identicon&r=PG&f=1", "display_name": "Barr J", "link": "https://stackoverflow.com/users/4702146/barr-j"}, "edited": false, "score": 0, "creation_date": 1430978654, "post_id": 30081572, "comment_id": 48298580, "body": "Thanks for the quick response! when I use system, it gets the path and file but returns &quot;permission denied&quot;."}, {"owner": {"reputation": 2556, "user_id": 3488231, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/da4ac79b71c44d696f3567d4b53f6239?s=128&d=identicon&r=PG&f=1", "display_name": "user12205", "link": "https://stackoverflow.com/users/3488231/user12205"}, "reply_to_user": {"reputation": 8749, "user_id": 4702146, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ba5530d24166ce3995a46cc0f5687e3e?s=128&d=identicon&r=PG&f=1", "display_name": "Barr J", "link": "https://stackoverflow.com/users/4702146/barr-j"}, "edited": false, "score": 0, "creation_date": 1430982739, "post_id": 30081572, "comment_id": 48300641, "body": "@user4702146 In a terminal, type <code>ls -l &#47;path&#47;to&#47;file</code>, check the first column, it should be a combination of <code>-</code>, <code>r</code>, <code>w</code> and <code>x</code>. See if there is any <code>x</code>. If no, run <code>chmod +x &#47;path&#47;to&#47;file</code> in the terminal, then run your program again."}, {"owner": {"reputation": 8749, "user_id": 4702146, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ba5530d24166ce3995a46cc0f5687e3e?s=128&d=identicon&r=PG&f=1", "display_name": "Barr J", "link": "https://stackoverflow.com/users/4702146/barr-j"}, "edited": false, "score": 0, "creation_date": 1430996171, "post_id": 30081572, "comment_id": 48309553, "body": "I mean, when I choose the file I want to run from the dialog (jpg, png image fop exmple) it throws Permission denied."}, {"owner": {"reputation": 2556, "user_id": 3488231, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/da4ac79b71c44d696f3567d4b53f6239?s=128&d=identicon&r=PG&f=1", "display_name": "user12205", "link": "https://stackoverflow.com/users/3488231/user12205"}, "reply_to_user": {"reputation": 8749, "user_id": 4702146, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ba5530d24166ce3995a46cc0f5687e3e?s=128&d=identicon&r=PG&f=1", "display_name": "Barr J", "link": "https://stackoverflow.com/users/4702146/barr-j"}, "edited": false, "score": 0, "creation_date": 1431002059, "post_id": 30081572, "comment_id": 48313706, "body": "@user4702146 That&#39;s because image files are not executable files."}], "tags": [], "owner": {"reputation": 2556, "user_id": 3488231, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/da4ac79b71c44d696f3567d4b53f6239?s=128&d=identicon&r=PG&f=1", "display_name": "user12205", "link": "https://stackoverflow.com/users/3488231/user12205"}, "is_accepted": true, "score": 0, "last_activity_date": 1430927153, "last_edit_date": 1495542513, "creation_date": 1430927153, "answer_id": 30081572, "question_id": 30079458, "link": "https://stackoverflow.com/questions/30079458/gtk-dynamic-array/30081572#30081572", "title": "GTK+ dynamic array", "body": "<p>First get the file name of the selected file using <a href=\"https://developer.gnome.org/gtk3/stable/GtkFileChooser.html#gtk-file-chooser-get-filename\" rel=\"nofollow noreferrer\"><code>gtk_file_chooser_get_filename()</code></a>.</p>\n\n<pre><code>gchar *filename = gtk_file_chooser_get_filename(GTK_FILE_CHOOSER(dialog));\n</code></pre>\n\n<p>After obtaining the file name of the file, you can refer to <a href=\"https://stackoverflow.com/a/5460448/3488231\">this answer</a> and use <code>fork()</code> and <code>execv()</code> to execute the file.</p>\n\n<p>As for your dynamic array, you need to use an array of a custom-defined structure. For example:</p>\n\n<pre><code>struct my_button {\n    const char *app_name;\n    GtkWidget *app_icon;\n    const char *exec_path;\n}\n</code></pre>\n\n<p>Then you can create a dynamic array of <code>struct my_button</code>. You can implement this yourself, and I'm sure you can find many tutorials online. Alternatively, you can use GLib (which GTK+ uses) and it provides a lot of dynamic data structures that you can use, e.g. GArray. Example:</p>\n\n<pre><code>struct my_button *b = malloc(sizeof *b);\nb-&gt;app_name = \"whatever\"; // etc\nGArray *arr = g_array_new(TRUE, TRUE, sizeof *b);\ng_array_append_vals(arr, b, 1);\n</code></pre>\n\n<p>Remember to free the used memory after use.</p>\n\n<p>For more details on GArray please refer to the <a href=\"https://developer.gnome.org/glib/stable/glib-Arrays.html\" rel=\"nofollow noreferrer\">documentation</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 8749, "user_id": 4702146, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ba5530d24166ce3995a46cc0f5687e3e?s=128&d=identicon&r=PG&f=1", "display_name": "Barr J", "link": "https://stackoverflow.com/users/4702146/barr-j"}, "is_accepted": false, "score": 0, "last_activity_date": 1431003413, "creation_date": 1431003413, "answer_id": 30101743, "question_id": 30079458, "link": "https://stackoverflow.com/questions/30079458/gtk-dynamic-array/30101743#30101743", "title": "GTK+ dynamic array", "body": "<p>I found my solution! </p>\n\n<pre><code>execl(\"/usr/bin/xdg-open\", \"xdg-open\", filename, (char *)0);\n\nexit(1);\n</code></pre>\n\n<p>did the job.</p>\n"}], "owner": {"reputation": 8749, "user_id": 4702146, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ba5530d24166ce3995a46cc0f5687e3e?s=128&d=identicon&r=PG&f=1", "display_name": "Barr J", "link": "https://stackoverflow.com/users/4702146/barr-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "accepted_answer_id": 30081572, "answer_count": 2, "score": 0, "last_activity_date": 1431003413, "creation_date": 1430921947, "question_id": 30079458, "link": "https://stackoverflow.com/questions/30079458/gtk-dynamic-array", "title": "GTK+ dynamic array", "body": "<p>as was suggested by the other post, i'll ask new question, more specific one. </p>\n\n<pre><code>GtkWidget *button[] /*to be a dynamic array */\n\nvoid file_folder(GtkWidget *widget,  gpointer data)\n{\n  GtkWidget* dialog;\n\n  dialog = gtk_file_chooser_dialog_new(\"Choose a file\", GTK_WINDOW(data),\n          GTK_FILE_CHOOSER_ACTION_OPEN, GTK_STOCK_OK, GTK_RESPONSE_OK,\n          GTK_STOCK_CANCEL, GTK_RESPONSE_CANCEL, NULL);\n\n  gtk_widget_show_all(dialog);\n  gtk_file_chooser_set_current_folder(GTK_FILE_CHOOSER(dialog), \"/home/demo/Downloads\");\n  gint resp = gtk_dialog_run(GTK_DIALOG(dialog));\n\n\n  if(resp == GTK_RESPONSE_OK)\n  {\n      /*select file to execute*/\n      g_print(\"Success\\n\");\n      gtk_widget_destroy(dialog);\n  }\n  else\n  {\n      gtk_widget_destroy(dialog);\n  }\n\n}\n</code></pre>\n\n<p>How can I execute the file selected </p>\n\n<p>and how can I create this dynamic array which will contain: </p>\n\n<p>app name, app icon and executable (assuming that I am developing on ubuntu). </p>\n"}, {"tags": ["c", "buffer"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1430921864, "post_id": 30079349, "comment_id": 48272104, "body": "So you read six characters into an array that can contain only five characters? You need to read about <a href=\"http://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><i>undefined behavior</i></a>."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1430921959, "post_id": 30079349, "comment_id": 48272167, "body": "Also remember that all strings must be <i>terminated</i>, if you don&#39;t add a terminator then you will have yet another case of UB (Undefined Behavior)."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1430922520, "post_id": 30079349, "comment_id": 48272610, "body": "Aside: please note that <code>sizeof(char)</code> is <code>1</code> by definition. And that <code>fread()</code> returns the number of bytes read - very useful."}, {"owner": {"reputation": 314, "user_id": 3929610, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/436eb1241d2cd5abfb20f5898714096d?s=128&d=identicon&r=PG&f=1", "display_name": "jehutyy", "link": "https://stackoverflow.com/users/3929610/jehutyy"}, "edited": false, "score": 0, "creation_date": 1430923138, "post_id": 30079349, "comment_id": 48273062, "body": "In fact, my common sense tell me that normally when I try to put a 6 string into spool, I should get a compilation error, that&#39;s what happened when I ask for a 10 string."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1430980751, "post_id": 30079349, "comment_id": 48299533, "body": "@jehutyy The compiler cannot know in advance what you are going to type in run-time. And even if it somehow knew, it wouldn&#39;t prevent it. The main strength of C is freedom to do whatever you want, with very few restrictions. Which at the same time makes it easy to create bugs unless you know exactly what you are doing."}], "answers": [{"tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 0, "last_activity_date": 1430921858, "creation_date": 1430921858, "answer_id": 30079426, "question_id": 30079349, "link": "https://stackoverflow.com/questions/30079349/fread-weird-behavior-in-c/30079426#30079426", "title": "fread weird behavior in c", "body": "<p>What you have is undefined behavior. You are trying to read 6 characters into a array which can hold 5 characters.Please note that the array should be large enough to hold a nul terminator.</p>\n\n<p>Increase the size of your array <code>spool</code> to hold required characters. </p>\n"}, {"tags": [], "owner": {"reputation": 21711, "user_id": 418729, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Vm1jt.jpg?s=128&g=1", "display_name": "Sadique", "link": "https://stackoverflow.com/users/418729/sadique"}, "is_accepted": false, "score": 1, "last_activity_date": 1430921903, "creation_date": 1430921903, "answer_id": 30079440, "question_id": 30079349, "link": "https://stackoverflow.com/questions/30079349/fread-weird-behavior-in-c/30079440#30079440", "title": "fread weird behavior in c", "body": "<p>You need to increase the size of the <code>spool</code> buffer, (it cannot store more than 5 <code>char</code>s,  that leads to Undefined beahvior):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(){\n    char spool[15] = \"hello\";\n    fread(spool, sizeof(char), 6, stdin); //stdin == \"bonjour\"\n    printf(\"\\n%s\\n\", spool);\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>bonjou\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21711, "user_id": 418729, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Vm1jt.jpg?s=128&g=1", "display_name": "Sadique", "link": "https://stackoverflow.com/users/418729/sadique"}, "edited": false, "score": 0, "creation_date": 1430980441, "post_id": 30079896, "comment_id": 48299368, "body": "Wonder why this did not receive any vote (Sometimes SO stinks). That <code>hello</code> part was well noticed. Plus one."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 1, "last_activity_date": 1430923064, "creation_date": 1430923064, "answer_id": 30079896, "question_id": 30079349, "link": "https://stackoverflow.com/questions/30079349/fread-weird-behavior-in-c/30079896#30079896", "title": "fread weird behavior in c", "body": "<blockquote>\n  <p>char spool[5] = \"hello\";</p>\n</blockquote>\n\n<p>This is wrong, because strings in C are null terminated. You don't allocate space for the null termination. A decent compiler should give you a warning about this. (Apparently gcc does not even with -Wall -Wextra, so that kind of sucks).</p>\n\n<p>Reading \"bounjour\" into that array is also wrong, because C arrays have no boundary checks, nor do any of the library functions. So if you try to store more data in the array than you have room, you will write outside the boundaries of the array and the program will (hopefully) crash. You invoke undefined behavior, so anything might happen.</p>\n\n<p>Solve this by declaring a large enough array, and study null termination of strings.</p>\n"}], "owner": {"reputation": 314, "user_id": 3929610, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/436eb1241d2cd5abfb20f5898714096d?s=128&d=identicon&r=PG&f=1", "display_name": "jehutyy", "link": "https://stackoverflow.com/users/3929610/jehutyy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 30079896, "answer_count": 3, "score": 0, "last_activity_date": 1430923064, "creation_date": 1430921703, "question_id": 30079349, "link": "https://stackoverflow.com/questions/30079349/fread-weird-behavior-in-c", "title": "fread weird behavior in c", "body": "<p>I wrote a code just to understand how fread works and I don't understand how this is possible. Here my code :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid main(){\n    char spool[5] = \"hello\";\n    fread(spool, sizeof(char), 6, stdin); //stdin == \"bonjour\"\n    printf(\"\\n%s\\n\", spool);\n}\n</code></pre>\n\n<p>So first, I thought spool's value would be replaced by \"bonjo\" but I got \"bonjou\". I don't understand why I get a 6 characters string instead of a 5 characters string. </p>\n"}, {"tags": ["c", "floating-point", "integer", "type-conversion"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1430921659, "post_id": 30079221, "comment_id": 48271948, "body": "<code>(int64_t)1 &lt;&lt; 63</code> is shifting a <code>1</code> into the sign bit, therefore is Undefined Behaviour."}, {"owner": {"reputation": 567, "user_id": 4568958, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/43329ec8200606fdd268d79f5d38d917?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas Unterweger", "link": "https://stackoverflow.com/users/4568958/andreas-unterweger"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1430921866, "post_id": 30079221, "comment_id": 48272106, "body": "@WeatherVane: Ah, thanks for pointing that out. It now works with <code>(gdb) print (float)(-(int64_t)((uint64_t)1 &lt;&lt; 63)) $48 = -9,22337204e+18</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1430922007, "post_id": 30079221, "comment_id": 48272204, "body": "Remember that <code>float</code> only has a 24-bit mantissa!"}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1430922012, "post_id": 30079221, "comment_id": 48272207, "body": "Just use <code>INT64_MIN</code> and avoid any bit shift issues."}, {"owner": {"reputation": 24793, "user_id": 1798593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be41e365336e709f1bfc2c9866eac8e9?s=128&d=identicon&r=PG", "display_name": "Patricia Shanahan", "link": "https://stackoverflow.com/users/1798593/patricia-shanahan"}, "edited": false, "score": 1, "creation_date": 1430922013, "post_id": 30079221, "comment_id": 48272211, "body": "If possible, do the cast to float before the negation. Both 2^63 and -(2^63) can be represented in float."}, {"owner": {"reputation": 567, "user_id": 4568958, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/43329ec8200606fdd268d79f5d38d917?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas Unterweger", "link": "https://stackoverflow.com/users/4568958/andreas-unterweger"}, "edited": false, "score": 0, "creation_date": 1430922458, "post_id": 30079221, "comment_id": 48272561, "body": "Hm... That works in gdb, but not in the C code. Is there any way to convert <code>-(1 &lt;&lt; x)</code> to a float, where x=63 at run time?"}, {"owner": {"reputation": 567, "user_id": 4568958, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/43329ec8200606fdd268d79f5d38d917?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas Unterweger", "link": "https://stackoverflow.com/users/4568958/andreas-unterweger"}, "reply_to_user": {"reputation": 24793, "user_id": 1798593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be41e365336e709f1bfc2c9866eac8e9?s=128&d=identicon&r=PG", "display_name": "Patricia Shanahan", "link": "https://stackoverflow.com/users/1798593/patricia-shanahan"}, "edited": false, "score": 0, "creation_date": 1430922554, "post_id": 30079221, "comment_id": 48272630, "body": "@PatriciaShanahan: Converting to float earlier was the key, thank you. IT now works with <code>(-(float)((uint64_t)1 &lt;&lt; 63))</code>. Thank you very much."}], "answers": [{"comments": [{"owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "edited": false, "score": 3, "creation_date": 1430922173, "post_id": 30079463, "comment_id": 48272332, "body": "... which again is undefined behaviour. So each compiler is absolutely correct."}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 5, "last_activity_date": 1430921960, "creation_date": 1430921960, "answer_id": 30079463, "question_id": 30079221, "link": "https://stackoverflow.com/questions/30079221/convert-large-integer-to-float/30079463#30079463", "title": "Convert large integer to float", "body": "<p>The instruction <code>(int64_t)1 &lt;&lt; 63</code> is shifting a <code>1</code> into the sign bit, therefore is Undefined Behaviour.</p>\n\n<p>Even if the shifting was successful and gave <code>0x8000000000000000</code> that is the minimum (and negative) value that can be supported, so then negating the value with</p>\n\n<pre><code>-((int64_t)1 &lt;&lt; 63)\n</code></pre>\n\n<p>puts the value out of range of a positive signed 64 bit <code>int</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "is_accepted": false, "score": 2, "last_activity_date": 1430922635, "creation_date": 1430922635, "answer_id": 30079727, "question_id": 30079221, "link": "https://stackoverflow.com/questions/30079221/convert-large-integer-to-float/30079727#30079727", "title": "Convert large integer to float", "body": "<p>To avoid undefined behavior, multiply by powers of two using <a href=\"http://www.cplusplus.com/reference/cmath/ldexp/\" rel=\"nofollow\">the <code>ldexp</code> standard function</a>: <code>- ldexp(1.0, 63)</code>.</p>\n"}], "owner": {"reputation": 567, "user_id": 4568958, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/43329ec8200606fdd268d79f5d38d917?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas Unterweger", "link": "https://stackoverflow.com/users/4568958/andreas-unterweger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 332, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1430922664, "creation_date": 1430921379, "last_edit_date": 1430922664, "question_id": 30079221, "link": "https://stackoverflow.com/questions/30079221/convert-large-integer-to-float", "title": "Convert large integer to float", "body": "<p>I am trying to convert an integer into a float like this (simplified):</p>\n\n<pre><code>int64_t x = -((int64_t)1 &lt;&lt; 63);\nfloat y = x;\n</code></pre>\n\n<p>With MSVC 2013 on a 64-bit Windows 7 this works just fine, but with gcc 4.8 on Ubuntu 14.04 64-bit I get a positive value for x. I disabled all optimizations and looked at the variables in gdb. I even tried evaluating with gdb directly in order to find the cause of the problem:</p>\n\n<pre><code>(gdb) print (float)(-((int64_t)1 &lt;&lt; 63))\n$33 = 9,22337204e+18\n\n(gdb) print (float)(-9223372036854775808)\n$39 = 9,22337204e+18\n</code></pre>\n\n<p>As can be seen, not even adding explicit casts solves the problem. I am a bit confused since <code>float</code> should be able to hold much larger numbers (in terms of absolute value). <code>sizeof(float) == 4</code> and <code>sizeof(size_t) == 8</code> in case it matters. It seems that the value -2^63 is some magic limit, since -2^63+1 is converted perfectly fine:</p>\n\n<pre><code>(gdb) print (float)(-((int64_t)1 &lt;&lt; 63) + 1)\n$44 = -9,22337149e+18\n</code></pre>\n\n<p>What is the reason that the sign is lost in the conversion for values &lt;=-2^63? The value -2^63 can be represented by int64_t as well as float; and it works on other platforms as described above.</p>\n"}, {"tags": ["c", "winapi", "console-application"], "comments": [{"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1430920567, "post_id": 30078786, "comment_id": 48271136, "body": "Turn on compiler warnings. Especially the &quot;use of uninitialized variable&quot; warning."}, {"owner": {"reputation": 26421, "user_id": 343721, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b8ad1d8e899bd63166450473531f65b6?s=128&d=identicon&r=PG", "display_name": "Jan Turo\u0148", "link": "https://stackoverflow.com/users/343721/jan-turo%c5%88"}, "reply_to_user": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1430921217, "post_id": 30078786, "comment_id": 48271597, "body": "Ah, I get your point! The <code>out</code> is unitialized: I used <code>DWORD out</code> and provided its address as the last parameter and it works fine. Thanks. Could be an answer."}], "answers": [{"tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": true, "score": 0, "last_activity_date": 1430921234, "creation_date": 1430921234, "answer_id": 30079167, "question_id": 30078786, "link": "https://stackoverflow.com/questions/30078786/winapi-fillconsoleoutputattribute-program-crash/30079167#30079167", "title": "winapi FillConsoleOutputAttribute program crash", "body": "<p>Your <code>setPixel</code> function should be like this:</p>\n\n<pre><code>void setPixel(SHORT x, SHORT y, WORD color) {\n  COORD pos = {x, y};\n  DWORD out;\n  FillConsoleOutputAttribute(console,color,1,pos, &amp;out);\n}\n</code></pre>\n\n<p>In your version you are passing an uninitialized pointer, that is <code>out</code>, to <code>FillConsoleOutputAttribute</code>.</p>\n"}], "owner": {"reputation": 26421, "user_id": 343721, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b8ad1d8e899bd63166450473531f65b6?s=128&d=identicon&r=PG", "display_name": "Jan Turo\u0148", "link": "https://stackoverflow.com/users/343721/jan-turo%c5%88"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 30079167, "answer_count": 1, "score": 1, "last_activity_date": 1430921234, "creation_date": 1430920257, "question_id": 30078786, "link": "https://stackoverflow.com/questions/30078786/winapi-fillconsoleoutputattribute-program-crash", "title": "winapi FillConsoleOutputAttribute program crash", "body": "<p>Having these functions</p>\n\n<pre><code>void setPixel(SHORT x, SHORT y, WORD color) {\n  COORD pos = {x, y};\n  LPDWORD out;\n  FillConsoleOutputAttribute(console,color,1,pos,out);\n}\n\nvoid setScreenSize(SHORT x, SHORT y) {\n  COORD size = {x, y};\n  SetConsoleScreenBufferSize(console,size);\n}\n</code></pre>\n\n<p>I receive error when I try to call <code>setPixel()</code> after <code>screenSize()</code>:</p>\n\n<pre><code>int main() {\n  HANDLE console = GetStdHandle(STD_OUTPUT_HANDLE);\n  setScreenSize(120,40); // works well if setPixel is not called after\n  setPixel(40,12,GREEN); // works well if setScreenSize is not called\n}\n</code></pre>\n\n<p>The program above crashes. I can't call <code>GetLastError()</code> after <code>FillConsoleOutputAttribute()</code> which seems to cause the error and crashes the program immediatelly. I didn't find anything in <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682662(v=vs.85).aspx\" rel=\"nofollow\">the reference</a>.</p>\n\n<p>What might cause the program crash and how to solve it?</p>\n"}, {"tags": ["c", "segmentation-fault", "memset", "invalid-argument"], "answers": [{"tags": [], "owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "is_accepted": true, "score": 1, "last_activity_date": 1430921539, "last_edit_date": 1430921539, "creation_date": 1430921195, "answer_id": 30079157, "question_id": 30078682, "link": "https://stackoverflow.com/questions/30078682/aio-write-and-memset-invalid-argument-and-segmentation-fault-core-dumped/30079157#30079157", "title": "aio_write and memset invalid argument and Segmentation Fault (core dumped)", "body": "<p>If you want to set each byte of <code>aiorp</code> to the ASCII value of <code>'a'</code>, your first varaiant:</p>\n\n<pre><code>memset((void *) aiorp, 'a', sizeof(struct aiocb));\n</code></pre>\n\n<p>is good. (You don't need the cast to <code>void *</code>, though, and could rewrite the size to <code>sizeof(*aiorp)</code> to follow a common pattern.)</p>\n\n<p>But why do you want to do that? That's the control, struct, which now contains a lot of (nonsensical) data made up of <code>'a'</code> bytes, except the values that you explicitly overwrite afterwards.</p>\n\n<p>No wonder you get an <code>EINVAL</code>, for which \"One or more of <code>aio_offset</code>, <code>aio_reqprio</code>, <code>aio_nbytes</code> are invalid\", according to the manpage: <code>aiorp-&gt;aio_erqprio</code> is <code>0x61616161</code>.</p>\n\n<p>You want to set the data buffer to contain <code>'a'</code>s:</p>\n\n<pre><code>memset(buf, 'a', count);\n</code></pre>\n\n<p>(But given that your <code>aiocb</code> structure is allocated in local storage in <code>main</code> and thus uninitialised, you might consider <code>memset</code>ting it to all zeros with the above call.)</p>\n"}], "owner": {"reputation": 2802, "user_id": 3334375, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7ea497db44ae233839e211fdcf141f10?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/3334375/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 312, "favorite_count": 0, "accepted_answer_id": 30079157, "answer_count": 1, "score": 1, "last_activity_date": 1430921539, "creation_date": 1430919997, "question_id": 30078682, "link": "https://stackoverflow.com/questions/30078682/aio-write-and-memset-invalid-argument-and-segmentation-fault-core-dumped", "title": "aio_write and memset invalid argument and Segmentation Fault (core dumped)", "body": "<p>I'm trying to fill my file with 'a' characters and I need tu use <code>aio_write</code>. Here's my writing function</p>\n\n<pre><code>int da_aio_write(const int d, struct aiocb *aiorp, void *buf, const int count){\n   int rv = 0;\n  // memset( (void *)aiorp, 'a', sizeof( struct aiocb ) ); // &lt;--- I get Invalid argument (Error da_aio_write)\n\n  // memset(&amp;aiorp, 'a', sizeof( struct aiocb )); // &lt;--- I get Segmentation Fault (core dumped)\n   aiorp-&gt;aio_fildes = d;\n   aiorp-&gt;aio_buf = buf;\n   aiorp-&gt;aio_nbytes = count;\n   aiorp-&gt;aio_offset = 0;\n\n   rv = aio_write( aiorp );\n\n   if( rv == -1) {\n       perror(\"Error da_aio_write\\n\");\n       exit(1);\n       return rv;\n   }\n   return rv;\n}\n</code></pre>\n\n<p>When I use <code>memset( (void *)aiorp, 0, sizeof( struct aiocb ) );</code> // &lt;--- I get <strong>Invalid argument</strong> (Error da_aio_write) so my rv == -1 and I get perror printed\nAnd when I use <code>memset(&amp;aiorp, 'a', sizeof( struct aiocb ));</code> // &lt;--- I get <strong>Segmentation Fault (core dumped)</strong>\nWhy my both memset's not working? \nAlso I add my full code</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/mman.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;sys/time.h&gt;\n#include &lt;string.h&gt;\n#include &lt;aio.h&gt;\n #include &lt;errno.h&gt;\n\n#define MB 1024\n\nint da_open(const char *name);\nint da_aio_write(const int d, struct aiocb *aiorp, void *buf, const int count);\nint da_test_wait( struct aiocb *aiorp );\nint da_close(int fd);\n\nint da_open(const char *name){\n   int dskr;\n   int dskr2;\n   dskr = open( name, O_RDWR );\n   if( dskr == -1 ){\n       printf(\"File created\\n\");\n       dskr2 = open( name, O_WRONLY | O_CREAT, 0644);\n   }else{\n       printf(\"End job!\\n\");\n       exit(1);\n   }\n   printf( \"dskr1 = %d\\n\", dskr2 );\n   return dskr2;\n}\n\nint da_aio_write(const int d, struct aiocb *aiorp, void *buf, const int count){\n   int rv = 0;\n   //memset( (void *)aiorp, 'a', sizeof( struct aiocb ) );  // &lt;--- I get Invalid argument (Error da_aio_write)\n   //memset(&amp;aiorp, 'a', sizeof( struct aiocb )); / &lt;--- I get Segmentation Fault (core dumped)\n   aiorp-&gt;aio_fildes = d;\n   aiorp-&gt;aio_buf = buf;\n   aiorp-&gt;aio_nbytes = count;\n   aiorp-&gt;aio_offset = 0;\n\n   rv = aio_write( aiorp );\n\n   if( rv == -1) {\n       perror(\"Error da_aio_write\\n\");\n       exit(1);\n       return rv;\n   }\n   return rv;\n}\n\nint da_test_wait( struct aiocb *aiorp ){\n   const struct aiocb *aioptr[1];\n   int rv;\n   aioptr[0] = aiorp;\n   rv = aio_suspend( aioptr, 1, NULL );\n   if( rv != 0 ){\n      perror( \"aio_suspend failed\" );\n      abort();\n   }\n   rv = aio_return( aiorp );\n   printf( \"AIO complete, %d bytes write.\\n\", rv );\n   return 1;\n}\n\nint da_close(int fd){\n   int rv;\n   rv = close( fd );\n   if( rv != 0 ) perror ( \"close() failed\" );\n   else puts( \"closed\" );\n   return rv;\n}\n\nint main(int argc, char *argv[] ){\n        int sk;\n        int d;\n        struct aiocb aior;\n        if(argc == 3){\n                sk = atoi(argv[2]);\n                char buffer[MB * MB * sk];\n                int size; \n                size = MB * MB * sk;\n                memset( buffer, '\\0', size);\n                //memset(&amp;aior, '\\0', sizeof( struct aiocb ));\n                d = da_open(argv[1]);\n                da_aio_write( d, &amp;aior, buffer, sizeof(buffer) );\n                da_test_wait( &amp;aior );\n                da_close( d );\n        }\n        return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "windows", "gcc", "operating-system", "system-calls"], "comments": [{"owner": {"reputation": 31255, "user_id": 28494, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/c14ME.gif?s=128&g=1", "display_name": "qrdl", "link": "https://stackoverflow.com/users/28494/qrdl"}, "edited": false, "score": 1, "creation_date": 1430920213, "post_id": 30078654, "comment_id": 48270858, "body": "<code>mknod()</code> is SVr4, 4.4BSD, POSIX.1-2001 function, neither of this supported by Windows, so this function simply doesn&#39;t exist in Windows standard library"}], "answers": [{"tags": [], "owner": {"reputation": 2045, "user_id": 4117075, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oiYeG.jpg?s=128&g=1", "display_name": "Mekap", "link": "https://stackoverflow.com/users/4117075/mekap"}, "is_accepted": false, "score": 0, "last_activity_date": 1430921729, "creation_date": 1430921729, "answer_id": 30079367, "question_id": 30078654, "link": "https://stackoverflow.com/questions/30078654/undefined-reference-to-mknod-how-to-resolve-this/30079367#30079367", "title": "&quot; Undefined reference to mknod &quot; How to resolve this?", "body": "<p>As qrdl pointed out, <code>mknod()</code> is a SVr4, 4.4BSD, POSIX.1-2001 function. But, you can include <a href=\"http://gnuwin32.sourceforge.net/packages/coreutils.htm\" rel=\"nofollow\">CoreUtil</a>s to windows and, after adding the library to codeblock, you can use thoses functions. </p>\n"}], "owner": {"reputation": 43, "user_id": 3261913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb85ba1a295312ab0c461059e197b838?s=128&d=identicon&r=PG&f=1", "display_name": "IshCoo93", "link": "https://stackoverflow.com/users/3261913/ishcoo93"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 517, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1430921729, "creation_date": 1430919893, "question_id": 30078654, "link": "https://stackoverflow.com/questions/30078654/undefined-reference-to-mknod-how-to-resolve-this", "title": "&quot; Undefined reference to mknod &quot; How to resolve this?", "body": "<pre><code>/*Creating a special file */\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;unistd.h&gt;\n\nint main(int argc, char *argv[]){\n    int result;\n    if (argc != 2) {\n        fprintf(stderr, \"Usage: ./a.out fifoname\\n\");\n        exit (1);\n     }\n    result = mknod (argv[1], S_IRUSR| S_IWUSR|S_IFIFO, 0);\n    if (result &lt; 0) {\n        perror (\"mknod\");\n        exit (2);\n       }\n  }\n</code></pre>\n\n<p>I have executed a sample code to create a special file in CodeBlocks which uses GCC compiler ...But the code runs properly in Ubuntu environment..\nIs Windows environment creating the problem. If so, how to resolve the problem to run the program in Windows ?</p>\n"}, {"tags": ["objective-c", "c"], "comments": [{"owner": {"reputation": 23360, "user_id": 1214122, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kKseM.jpg?s=128&g=1", "display_name": "holex", "link": "https://stackoverflow.com/users/1214122/holex"}, "edited": false, "score": 0, "creation_date": 1430920662, "post_id": 30078637, "comment_id": 48271210, "body": "definitely the first one; later when you start to realize the possibilities of <code>NSArray</code> and you start thinking in complex model layers (including permanent storing) you will never even consider the second one as a reasonable option."}, {"owner": {"reputation": 16932, "user_id": 1489885, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ndD6y.jpg?s=128&g=1", "display_name": "HAS", "link": "https://stackoverflow.com/users/1489885/has"}, "edited": false, "score": 0, "creation_date": 1430920776, "post_id": 30078637, "comment_id": 48271298, "body": "Yes, the <code>NS</code> stuff is pretty much objc (or better Foundation/AppKit related. You would usually work with <code>NSArray</code>s, so your first attempt is better suited for Cocoa."}, {"owner": {"reputation": 95, "user_id": 1389811, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/87799cbf89cb79e4c083facb374d6eea?s=128&d=identicon&r=PG", "display_name": "user1389811", "link": "https://stackoverflow.com/users/1389811/user1389811"}, "reply_to_user": {"reputation": 16932, "user_id": 1489885, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ndD6y.jpg?s=128&g=1", "display_name": "HAS", "link": "https://stackoverflow.com/users/1489885/has"}, "edited": false, "score": 0, "creation_date": 1430920960, "post_id": 30078637, "comment_id": 48271417, "body": "@HAS if stuff prefixed with NS are objc, how come the 2nd snippet above uses NSString?"}, {"owner": {"reputation": 16932, "user_id": 1489885, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ndD6y.jpg?s=128&g=1", "display_name": "HAS", "link": "https://stackoverflow.com/users/1489885/has"}, "edited": false, "score": 0, "creation_date": 1430921070, "post_id": 30078637, "comment_id": 48271498, "body": "You&#39;re creating a C-array of pointers to Objective-C objects (in this case <code>NSString</code>s)."}, {"owner": {"reputation": 95, "user_id": 1389811, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/87799cbf89cb79e4c083facb374d6eea?s=128&d=identicon&r=PG", "display_name": "user1389811", "link": "https://stackoverflow.com/users/1389811/user1389811"}, "edited": false, "score": 0, "creation_date": 1430921468, "post_id": 30078637, "comment_id": 48271791, "body": "Got it, thanks everyone!"}, {"owner": {"reputation": 115642, "user_id": 299924, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71fc84230717311db1410d7106273128?s=128&d=identicon&r=PG", "display_name": "trojanfoe", "link": "https://stackoverflow.com/users/299924/trojanfoe"}, "edited": false, "score": 0, "creation_date": 1430923873, "post_id": 30078637, "comment_id": 48273661, "body": "... not to mention the second won&#39;t even compile if it&#39;s within a pure C implementation file (<code>.c</code>)."}, {"owner": {"reputation": 14761, "user_id": 290072, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/ITEsv.png?s=128&g=1", "display_name": "Almo", "link": "https://stackoverflow.com/users/290072/almo"}, "edited": false, "score": 0, "creation_date": 1430926123, "post_id": 30078637, "comment_id": 48275492, "body": "user1389811, don&#39;t forget to select one of these as the answer. This less everyone on the site know that your question has an accepted answer. I see that none of your questions has an accepted answer. If you keep doing that, people will eventually stop answering your questions."}], "answers": [{"comments": [{"owner": {"reputation": 115642, "user_id": 299924, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71fc84230717311db1410d7106273128?s=128&d=identicon&r=PG", "display_name": "trojanfoe", "link": "https://stackoverflow.com/users/299924/trojanfoe"}, "edited": false, "score": 0, "creation_date": 1430922193, "post_id": 30078973, "comment_id": 48272347, "body": "... and C++ via Objective-C++."}], "tags": [], "owner": {"reputation": 83109, "user_id": 1312143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d64f50f989e564c337a8a8bd653b8e6?s=128&d=identicon&r=PG", "display_name": "Ken Thomases", "link": "https://stackoverflow.com/users/1312143/ken-thomases"}, "is_accepted": false, "score": 3, "last_activity_date": 1430920712, "creation_date": 1430920712, "answer_id": 30078973, "question_id": 30078637, "link": "https://stackoverflow.com/questions/30078637/objective-c-define-in-c-or-objective-c/30078973#30078973", "title": "Objective C- define in C or objective C", "body": "<p>The stuff prefixed with <code>NS</code> is specific to the Cocoa frameworks, Foundation and AppKit. They were originally designed for Objective-C, but they are accessible from other languages if they have a binding. The obvious one these days is Swift, but they can also be accessed from Python using PyObjC, etc.</p>\n\n<p>In general, you should prefer the Cocoa collection classes (i.e. <code>NSArray</code>) over C-style types. They are higher level and thus provide better abstractions and functionality. You would use a C-style array only for APIs which require it, which are relatively rare.</p>\n"}, {"tags": [], "owner": {"reputation": 14761, "user_id": 290072, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/ITEsv.png?s=128&g=1", "display_name": "Almo", "link": "https://stackoverflow.com/users/290072/almo"}, "is_accepted": true, "score": 2, "last_activity_date": 1430921419, "last_edit_date": 1430921419, "creation_date": 1430920728, "answer_id": 30078980, "question_id": 30078637, "link": "https://stackoverflow.com/questions/30078637/objective-c-define-in-c-or-objective-c/30078980#30078980", "title": "Objective C- define in C or objective C", "body": "<p>The NS stuff comes originally from the NeXTSTEP operating system: <a href=\"http://en.wikipedia.org/wiki/NeXTSTEP\" rel=\"nofollow\">http://en.wikipedia.org/wiki/NeXTSTEP</a></p>\n\n<p>Steve Jobs ran NeXT, and brought the stuff over to Apple when he returned there.</p>\n\n<p>When working with Mac OS or iOS, it's part of the Cocoa framework. Objective-C is just the language these things are written in.</p>\n\n<p>As for your coding question, use the first. You want to use the Cocoa constructs as much as possible. Cocoa is a mature, well-designed API and you will find a lot of tasks will be easier if you do things with that style.</p>\n"}, {"tags": [], "owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "is_accepted": false, "score": 1, "last_activity_date": 1430922038, "creation_date": 1430922038, "answer_id": 30079492, "question_id": 30078637, "link": "https://stackoverflow.com/questions/30078637/objective-c-define-in-c-or-objective-c/30079492#30079492", "title": "Objective C- define in C or objective C", "body": "<p>Your first example is an NSArray object, containing several NSString objects. Your second example is an ordinary C array, containing several NSString objects. </p>\n\n<p>You will find very few methods in the Cocoa library that accept C arrays of objects. And NSArray have a huge range of useful functionality that C arrays don't have. </p>\n"}], "owner": {"reputation": 95, "user_id": 1389811, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/87799cbf89cb79e4c083facb374d6eea?s=128&d=identicon&r=PG", "display_name": "user1389811", "link": "https://stackoverflow.com/users/1389811/user1389811"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 30078980, "answer_count": 3, "score": 3, "last_activity_date": 1430922038, "creation_date": 1430919856, "question_id": 30078637, "link": "https://stackoverflow.com/questions/30078637/objective-c-define-in-c-or-objective-c", "title": "Objective C- define in C or objective C", "body": "<p>I am a beginner so please bear with me. First of all, is all the NS stuff (NSArray, NSString, etc) objective-C specific? </p>\n\n<p>Also, I'm confused about creating things in C or in objective-C. When do you use one or the other?</p>\n\n<p>For example, which cases would I use the below:</p>\n\n<pre><code>NSArray *germanCars = @[@\"Mercedes-Benz\", @\"BMW\", @\"Porsche\", @\"Opel\", @\"Volkswagen\", @\"Audi\"];\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>NSString *germanCars[] = {@\"Mercedes-Benz\", @\"BMW\", @\"Porsche\", @\"Opel\", @\"Volkswagen\", @\"Audi\"};\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "scanf"], "comments": [{"owner": {"reputation": 3785, "user_id": 4427938, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/M6mua.png?s=128&g=1", "display_name": "Ayushi Jha", "link": "https://stackoverflow.com/users/4427938/ayushi-jha"}, "edited": false, "score": 1, "creation_date": 1430919726, "post_id": 30078560, "comment_id": 48270453, "body": "<code>z&lt;1</code> instead of <code>z&lt;=1</code>"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 1, "creation_date": 1430919735, "post_id": 30078560, "comment_id": 48270461, "body": "You cannot. There has to be some kind of indicator to show the end of input. PS: How do you enter the input? <code>&lt;number&gt; &lt;number&gt;</code> or some other way like <code>&lt;number&gt;\\n&lt;number&gt;</code>"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 1, "creation_date": 1430919796, "post_id": 30078560, "comment_id": 48270512, "body": "And why are you using <code>%f</code> instead of <code>%d</code>?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1430919852, "post_id": 30078560, "comment_id": 48270561, "body": "<code>int p[1];</code> --&gt; <code>float p[2];</code>"}], "answers": [{"comments": [{"owner": {"reputation": 164, "user_id": 4185012, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/100000363661024/picture?type=large", "display_name": "Zi-yan Tseng", "link": "https://stackoverflow.com/users/4185012/zi-yan-tseng"}, "edited": false, "score": 0, "creation_date": 1430933137, "post_id": 30082083, "comment_id": 48280185, "body": "hi,thanks for your answer. maybe it&#39;s a little misconception.in this case,my partner advises me to try &quot; scanf(&quot;%s &quot;, p[N]) ; &quot; and judge the string&quot;p[N]&quot; \u3002 following it,I will input two numbers&quot;11 10&quot; or one number &quot;11&quot; .because I use space to separate  two numbers. so, if I add a judgement before the main code to judge the p[N] I can&#39;t sure would it success ? sorry , i can&#39;t express my meaning absolutely.  or the other way is use the function &quot;getline&quot; , but i can&#39;t find how to include it from the dev c++"}, {"owner": {"reputation": 164, "user_id": 4185012, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/100000363661024/picture?type=large", "display_name": "Zi-yan Tseng", "link": "https://stackoverflow.com/users/4185012/zi-yan-tseng"}, "edited": false, "score": 0, "creation_date": 1432152808, "post_id": 30082083, "comment_id": 48810681, "body": "I really appreciate you .&quot; scanf() &quot; it&#39;s a very fundamental tool for freshman like me."}], "tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 3, "last_activity_date": 1430944674, "last_edit_date": 1430944674, "creation_date": 1430928649, "answer_id": 30082083, "question_id": 30078560, "link": "https://stackoverflow.com/questions/30078560/i-cant-sure-how-many-numbers-should-input-with-scanf/30082083#30082083", "title": "i can&#39;t sure how many numbers should input with scanf", "body": "<p>In general, the user has to tell the program that there is no more input, usually by doing one of the following:</p>\n\n<ul>\n<li><p>Entering a value that's outside the range of expected values (for example, if you expect your inputs to all be greater than <code>0</code>, then an input value of <code>0</code> could signal end of input).  This is usually not the most practical approach, especially with floating-point input.</p></li>\n<li><p>Signalling an end-of-file condition from the keyboard.  On Linux, this is done by typing <code>Ctrl-D</code>, while on Windows it's done by typing <code>Ctrl-Z</code>.  The advantage of this approach is that it works for both interactive input and file-based input.</p></li>\n</ul>\n\n<p>The <code>scanf</code> function returns the number of successful conversions and assignments; it will return 0 if the input doesn't match the conversion specifier, and EOF on end-of-file or error.  That leads to logic like the following:</p>\n\n<pre><code>float p[N]; // for some number N\nsize_t z = 0;\n\nwhile ( z &lt; N &amp;&amp; scanf( \"%f\", &amp;p[z] ) == 1 )\n  z++;\n</code></pre>\n\n<p>This will first check to make sure <code>z</code> is less than <code>N</code>; if so, it will attempt to read the next input into <code>p[z]</code>.  If the read is successful (1 successful conversion and assignment), it will increment <code>z</code> and loop again.</p>\n\n<p>If the read fails (either due to EOF or bad input), it will exit the loop.  </p>\n\n<p><strong>EDIT</strong></p>\n\n<p>If you're entering multiple values on a line, another approach is to read your input as a line of text, and then parse out individual numbers.  Here's an example:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n\nint main( void )\n{\n  char input[SIZE+1]; // for some size SIZE, single line of text input, \n                      // +1 for 0 terminator\n  float p[N];         // for some size N\n  size_t z = 0;\n\n  /** \n   * Instead of scanf, use fgets to read a line of input\n   * from the input stream.  Go until z == N or \n   * there's no more input.\n   */\n  while( z &lt; N &amp;&amp; fgets( input, sizeof input, stdin ) != NULL )\n  {\n    const char *delimiter = \" \\t\";\n\n    /**\n     * Break the input line into *tokens* separated by spaces or tabs\n     * (note that this modifies the input buffer by overwriting\n     * space and tab characters with 0)\n     */\n    char *token = strtok( input, delimiter );\n\n    /**\n     * Loop while z &lt; N and token is not NULL.\n     */\n    while ( z &lt; N &amp;&amp; token )\n    {\n      char *chk = NULL;\n\n      /**\n       * Convert the token (which is a string) to the \n       * equivalent floating-point value.  If the token\n       * contains any characters that don't belong in a\n       * floating-point constant, the chk variable will be\n       * set to point to that character.\n       */\n      double val = strtod( token, &amp;chk );\n\n      /**\n       * On a successful conversion, chk should point to either\n       * a whitespace character or the 0 terminator. \n       */\n      if ( *chk != 0 &amp;&amp; !isspace( *chk ))\n      {\n        /**\n         * For this example we simply discard the bad input and keep processing\n         */\n        fprintf( stderr, \"%s is not a valid float value - discarding\\n\", token );\n      }\n      else\n      {\n        p[z++] = value;\n      }\n      /**\n       * NULL tells strtok to keep reading from the end of the\n       * previous token in the buffer\n       */\n      token = strtok( NULL, delimiter );\n    }\n  }\n  /**\n   * Do something interesting with your p array\n   */\n\n  return 0;\n}\n</code></pre>\n\n<p>This way, if you enter your data like</p>\n\n<pre><code>1.0 2.0 3.0 4.0 ...\n</code></pre>\n\n<p>this code will process each of those inputs until it reaches the end of the input.</p>\n\n<p>One edge condition that's not being handled in this example is if your input line is larger than <code>SIZE</code> characters, and you wind up splitting a token.  In other words, your buffer is sized to hold 80 characters but you wind up typing 90 characters, and one of your inputs straddles that boundary.  There are several ways around that, but I'm trying to keep the example as simple as I can.  </p>\n\n<p>If you come away from this with the impression that interactive input processing in C is tedious and error-prone, well, you're right.  It is.  Something I should have mentioned earlier is that <code>scanf</code> is not a great tool for handling interactive input; it lacks some of the error handling ability in the code above.  </p>\n"}], "owner": {"reputation": 164, "user_id": 4185012, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/100000363661024/picture?type=large", "display_name": "Zi-yan Tseng", "link": "https://stackoverflow.com/users/4185012/zi-yan-tseng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1430944674, "creation_date": 1430919672, "last_edit_date": 1430923497, "question_id": 30078560, "link": "https://stackoverflow.com/questions/30078560/i-cant-sure-how-many-numbers-should-input-with-scanf", "title": "i can&#39;t sure how many numbers should input with scanf", "body": "<p>I can't sure how many numbers will input in the main programing.\nFor example,I maybe input one or two numbers in the array.</p>\n\n<pre><code>float p[1];\nfor (int z = 0 ; z &lt;=1 ; z++)\n{\n    scanf(\"%f\",&amp;p[z]);\n}\n</code></pre>\n\n<p>in this code,if i just input one number,the for-loop will continue running until I input another number.\nhow can i do?</p>\n"}, {"tags": ["c", "function", "kbhit"], "comments": [{"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1430937712, "post_id": 30078444, "comment_id": 48283073, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/3571212/detecting-keystrokes\">Detecting keystrokes</a>"}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1430937856, "post_id": 30078444, "comment_id": 48283153, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/21091191/implementing-a-keypress-event-in-c/21101030#21101030\">Implementing a KeyPress event in C</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2223, "user_id": 325181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26de4aa17ab84757b1233714af5fec84?s=128&d=identicon&r=PG", "display_name": "Clarus", "link": "https://stackoverflow.com/users/325181/clarus"}, "is_accepted": false, "score": 2, "last_activity_date": 1430936928, "creation_date": 1430936928, "answer_id": 30084778, "question_id": 30078444, "link": "https://stackoverflow.com/questions/30078444/is-it-possible-to-program-your-own-kbhit-in-c/30084778#30084778", "title": "Is it possible to program your own kbhit() in C?", "body": "<p>It depends.</p>\n\n<p>On windows stdio (standard io, like stdin/stdout) is always blocking and thus you need to use os specific system calls to avoid a blocking call like read.</p>\n\n<p>On Linux you can change stdio to be non blocking using fcntl thus avoiding the need for specialized function calls.</p>\n"}, {"tags": [], "owner": {"reputation": 632, "user_id": 2103029, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e589c8b98f2b10490f67218fbe2f97c0?s=128&d=identicon&r=PG&f=1", "display_name": "bpinhosilva", "link": "https://stackoverflow.com/users/2103029/bpinhosilva"}, "is_accepted": false, "score": 1, "last_activity_date": 1430937214, "creation_date": 1430937214, "answer_id": 30084873, "question_id": 30078444, "link": "https://stackoverflow.com/questions/30078444/is-it-possible-to-program-your-own-kbhit-in-c/30084873#30084873", "title": "Is it possible to program your own kbhit() in C?", "body": "<p>Yes, it is possible.</p>\n\n<p>That's how it works: </p>\n\n<blockquote>\n  <p>It returns a non-zero integer if a key is in the keyboard buffer. It will not wait for a key to be pressed.</p>\n</blockquote>\n\n<p>Basically you check from <em>stdin</em> (assumed to be default input data from keyboard in C language).</p>\n\n<p>There is an implementation <a href=\"http://www.ethernut.de/api/kbhit_8c_source.html\" rel=\"nofollow\">here</a> where you can start from.</p>\n"}, {"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": true, "score": 3, "last_activity_date": 1430937750, "creation_date": 1430937750, "answer_id": 30085047, "question_id": 30078444, "link": "https://stackoverflow.com/questions/30078444/is-it-possible-to-program-your-own-kbhit-in-c/30085047#30085047", "title": "Is it possible to program your own kbhit() in C?", "body": "<p>Yes and no.</p>\n\n<p>C language has no notion of input and output. It relies on a standard library (essentially written in C) that in turn relies on system calls.</p>\n\n<p>Neither the standard library, nor the set of system calls common to Unix-like systems and Windows deal with non blocking system calls, so you have to call system specific ones.</p>\n\n<p>But again, you can call them easily from C language.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4870780"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 882, "favorite_count": 0, "accepted_answer_id": 30085047, "answer_count": 3, "score": 3, "last_activity_date": 1618402358, "creation_date": 1430919419, "last_edit_date": 1478985795, "question_id": 30078444, "link": "https://stackoverflow.com/questions/30078444/is-it-possible-to-program-your-own-kbhit-in-c", "title": "Is it possible to program your own kbhit() in C?", "body": "<p>I took a class of programming at my university and I am working on some program. I want to know if it is possible to program my own <code>kbhit()</code> function. And if it is possible to look, how <code>kbhit()</code> is coded.</p>\n\n<p>The purpose is that I need to know how functions I use work.</p>\n"}, {"tags": ["c", "interface", "fortran", "user-defined-types", "magma"], "answers": [{"tags": [], "owner": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "is_accepted": false, "score": 2, "last_activity_date": 1430920670, "last_edit_date": 1430920670, "creation_date": 1430920320, "answer_id": 30078809, "question_id": 30078369, "link": "https://stackoverflow.com/questions/30078369/how-to-use-fortran-interface-to-call-a-c-function-which-contains-user-defined-ty/30078809#30078809", "title": "How to use Fortran interface to call a C function which contains user defined type", "body": "<p><code>magma_uplo_t</code> is an enumeration. There is some support for them in Fortran 2003 but you can quite safely assume it is an <code>integer(c_int)</code> which can take the values from 121 to 124. And in your case it is passed by value.</p>\n\n<pre><code>integer(c_int), value :: uplo\n</code></pre>\n\n<p>You can actually create the constants using a Fortran 2003 enumeration</p>\n\n<pre><code> enum, bind( C )\n    enumerator :: MagmaUpper         = 121, &amp;\n                  MagmaLower         = 122, &amp;\n                  MagmaUpperLower    = 123, &amp;\n                  MagmaFull          = 123, &amp;\n                  MagmaHessenberg    = 124\n  end enum\n</code></pre>\n\n<p>but the variable and then you can also try <code>integer(kind=kind(MagmaUpper))</code> to be completely safe. This will survive things like the GCC's <code>--short-enums</code> option.</p>\n"}], "owner": {"reputation": 11, "user_id": 3271438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d5bc969c36325941bff6ca2c92a9875?s=128&d=identicon&r=PG&f=1", "display_name": "user3271438", "link": "https://stackoverflow.com/users/3271438/user3271438"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 260, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1430920670, "creation_date": 1430919236, "question_id": 30078369, "link": "https://stackoverflow.com/questions/30078369/how-to-use-fortran-interface-to-call-a-c-function-which-contains-user-defined-ty", "title": "How to use Fortran interface to call a C function which contains user defined type", "body": "<p>In fact, I want to call magma from fortran. So I add magma.lib and create an interface to use the C fuction of magma:</p>\n\n<pre><code>Interface\n      Integer function magma_dpotrf(uplo, n, a, lda, info) BIND (C, NAME=\"magma_dpotrf\")\n        use iso_c_binding\n        Implicit none\n        !character (c_char), value :: uplo????\n        integer (c_int), value ::n\n        real (c_double) ::a(*)\n        integer (c_int), value ::lda\n        integer (c_int)::info\n      end function\n   end Interface\n</code></pre>\n\n<p>But the parameter uplo is a user defined type\nIn C code (magma_uplo_t uplo):</p>\n\n<pre><code>typedef enum {\n    MagmaUpper         = 121,\n    MagmaLower         = 122,\n    MagmaUpperLower    = 123,\n    MagmaFull          = 123,  /* lascl, laset */\n    MagmaHessenberg    = 124   /* lascl */\n} magma_uplo_t;\n\nmagma_int_t\nmagma_dpotrf(\n    magma_uplo_t uplo, magma_int_t n,\n    double *A, magma_int_t lda,\n    magma_int_t *info);\n</code></pre>\n\n<p>magma_int_t = int, Does anyone knows how to create interface for it?\nThanks in advance</p>\n"}, {"tags": ["c++", "c", "struct"], "comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1430919797, "post_id": 30078300, "comment_id": 48270513, "body": "The initializer for <code>channer0</code> maybe should be <code>{GPIO_PIN,0,LED_COUNT,255,*matrix}</code>."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1430919928, "post_id": 30078300, "comment_id": 48270626, "body": "Also I notice that you don&#39;t define <code>channel1</code>. In C code the <code>channel</code> is array of 2 elements. Is this intentional?"}, {"owner": {"reputation": 1119, "user_id": 1382768, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Pdwhk.png?s=128&g=1", "display_name": "timonsku", "link": "https://stackoverflow.com/users/1382768/timonsku"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1430919995, "post_id": 30078300, "comment_id": 48270677, "body": "IT intentional, on reason being I dont know how to define and pass both channel but also channel 1 isnt being used as far as I can see."}], "answers": [{"comments": [{"owner": {"reputation": 7587, "user_id": 943010, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/R7Q27.png?s=128&g=1", "display_name": "kdopen", "link": "https://stackoverflow.com/users/943010/kdopen"}, "edited": false, "score": 0, "creation_date": 1430920673, "post_id": 30078804, "comment_id": 48271218, "body": "This beautifully answers the question in your title. My post addresses the likely causes of the memory corruption."}, {"owner": {"reputation": 1119, "user_id": 1382768, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Pdwhk.png?s=128&g=1", "display_name": "timonsku", "link": "https://stackoverflow.com/users/1382768/timonsku"}, "edited": false, "score": 0, "creation_date": 1430922807, "post_id": 30078804, "comment_id": 48272823, "body": "The memory corruption also went away using this initialization. I guess the library is handling that by itself and I hindered it somehow by passing the object instead of omitting it."}], "tags": [], "owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "is_accepted": true, "score": 4, "last_activity_date": 1430920310, "creation_date": 1430920310, "answer_id": 30078804, "question_id": 30078300, "link": "https://stackoverflow.com/questions/30078300/initializing-typedef-struct-from-c-library-properly-in-c/30078804#30078804", "title": "Initializing typedef struct from C library properly in C++", "body": "<p>You should be able to use use following initializer:</p>\n\n<pre><code>ws2811_t ledstring =\n{\n    nullptr,\n    TARGET_FREQ,\n    DMA,\n    {\n        { GPIO_PIN, 0, LED_COUNT, 255 },\n        { 0 }\n    }\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7587, "user_id": 943010, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/R7Q27.png?s=128&g=1", "display_name": "kdopen", "link": "https://stackoverflow.com/users/943010/kdopen"}, "is_accepted": false, "score": 1, "last_activity_date": 1430920460, "creation_date": 1430920460, "answer_id": 30078878, "question_id": 30078300, "link": "https://stackoverflow.com/questions/30078300/initializing-typedef-struct-from-c-library-properly-in-c/30078878#30078878", "title": "Initializing typedef struct from C library properly in C++", "body": "<p>This line</p>\n\n<pre><code>ledstring.channel[0].leds[(y * WIDTH) + x] = matrix[x][y];\n</code></pre>\n\n<p>is almost certainly the cause of the memory corruption, as that can only happen by either a buffer overrun or dereferencing an invalid (but non-NULL) pointer.</p>\n\n<p>I see some problems in this code</p>\n\n<pre><code>ws2811_channel_t channel0 = {GPIO_PIN,LED_COUNT,0,255,*matrix};\nws2811_t ledstring = {nullptr,TARGET_FREQ,DMA,channel0};\n</code></pre>\n\n<p>First, in the initializer for <code>channel0</code> you are setting the <code>leds</code> field to the contents of <code>matrix[0][0]</code> rather than its address. You need to change the final initializer to be simply <code>matrix</code>.</p>\n\n<p>Next, you are initializing <code>channel0.leds</code> to point to the two dimensional array <code>matrix</code>, but treating it as a single dimensional array in <code>ledstring.channel[0].leds[(y * WIDTH) + x]</code>. This should probably be <code>ledstring.channel[0].leds[x][y]</code>.</p>\n\n<p>Finally, the last initializer for <code>ledstring</code> should probably be <code>{channel0}</code> for clarity. That's not a big issue, but it allows you to initialize more than one entry in the array.</p>\n"}], "owner": {"reputation": 1119, "user_id": 1382768, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Pdwhk.png?s=128&g=1", "display_name": "timonsku", "link": "https://stackoverflow.com/users/1382768/timonsku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 453, "favorite_count": 0, "accepted_answer_id": 30078804, "answer_count": 2, "score": 1, "last_activity_date": 1430920460, "creation_date": 1430919055, "last_edit_date": 1495540262, "question_id": 30078300, "link": "https://stackoverflow.com/questions/30078300/initializing-typedef-struct-from-c-library-properly-in-c", "title": "Initializing typedef struct from C library properly in C++", "body": "<p>I want to include a library in my C++ project (controls RGB LED strips on the Raspberry Pi).\nImporting the library is working fine but I have quite the issue with properly initializing some structs. I'm pretty lost where to even find the proper syntax, I did a lot of googling but didn't get very far.</p>\n\n<p>What I want to at first is getting the sample application going that comes with the library. See: <a href=\"https://github.com/richardghirst/rpi_ws281x/blob/master/main.c\" rel=\"nofollow noreferrer\">https://github.com/richardghirst/rpi_ws281x/blob/master/main.c</a></p>\n\n<p>My main issue is this. How do I do what is done below the C++ way?</p>\n\n<pre><code>ws2811_t ledstring =\n{\n    .freq = TARGET_FREQ,\n    .dmanum = DMA,\n    .channel =\n    {\n        [0] =\n        {\n            .gpionum = GPIO_PIN,\n            .count = LED_COUNT,\n            .invert = 0,\n            .brightness = 255,\n        },\n        [1] =\n        {\n            .gpionum = 0,\n            .count = 0,\n            .invert = 0,\n            .brightness = 0,\n        },\n    },\n};\n</code></pre>\n\n<p>The way this is initialized is C specific and doesn't compile in any current C++ standard. See: <a href=\"https://stackoverflow.com/questions/18731707/why-does-c11-not-support-designated-initializer-list-as-c99\">Why does C++11 not support designated initializer list as C99?</a>\nSo far I only ever used my own structs and also never used typedef, so I'm just confused the way structs are defined here.</p>\n\n<p>The struct(s) that gets initialized above is defined in this way. See: <a href=\"https://github.com/richardghirst/rpi_ws281x/blob/master/ws2811.h\" rel=\"nofollow noreferrer\">https://github.com/richardghirst/rpi_ws281x/blob/master/ws2811.h</a></p>\n\n<pre><code>typedef struct\n{\n    int gpionum;                          //&lt; GPIO Pin with PWM alternate function\n    int invert;                           //&lt; Invert output signal\n    int count;                            //&lt; Number of LEDs, 0 if channel is unused\n    int brightness;                       //&lt; Brightness value between 0 and 255\n    ws2811_led_t *leds;                   //&lt; LED buffers, allocated by driver based on count\n} ws2811_channel_t;\n\ntypedef struct\n{\n    struct ws2811_device *device;                //&lt; Private data for driver use\n    uint32_t freq;                               //&lt; Required output frequency\n    int dmanum;                                  //&lt; DMA number _not_ already in use\n    ws2811_channel_t channel[RPI_PWM_CHANNELS];\n} ws2811_t;\n</code></pre>\n\n<p>What I tried was this:</p>\n\n<pre><code>ws2811_led_t matrix[WIDTH][HEIGHT];\nws2811_channel_t channel0 = {GPIO_PIN,LED_COUNT,0,255,*matrix};\nws2811_t ledstring = {nullptr,TARGET_FREQ,DMA,channel0};\n</code></pre>\n\n<p>That compiles but results in a malloc error when I come to actually \"render\" to the LED strip:</p>\n\n<pre><code>int x, y;\n\nfor (x = 0; x &lt; WIDTH; x++)\n{\n    for (y = 0; y &lt; HEIGHT; y++)\n    {\n        cout &lt;&lt; \"LEDs size: \" &lt;&lt; (y * WIDTH) + x &lt;&lt; endl;\n        ledstring.channel[0].leds[(y * WIDTH) + x] = matrix[x][y];\n    }\n}\n</code></pre>\n\n<p>Results in this error message after the loop construct finishes:</p>\n\n<pre><code>malloc(): memory corruption (fast): 0x021acaa8\n</code></pre>\n"}, {"tags": ["c", "arduino", "pwm"], "comments": [{"owner": {"reputation": 10555, "user_id": 2812864, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GVsZM.jpg?s=128&g=1", "display_name": "Mateusz Grzejek", "link": "https://stackoverflow.com/users/2812864/mateusz-grzejek"}, "edited": false, "score": 3, "creation_date": 1430918747, "post_id": 30078020, "comment_id": 48269673, "body": "What is the name of header, where <code>init_phase_correct()</code> is declared? The one <code>ifdef</code>ed with <code>INCFILE1_H_</code> ? Is it <code>PWM.h</code> or is it another file <i>included</i> by <code>PWM.h</code>?"}, {"owner": {"reputation": 59, "user_id": 4362260, "user_type": "registered", "profile_image": "https://graph.facebook.com/1144390800/picture?type=large", "display_name": "Martin", "link": "https://stackoverflow.com/users/4362260/martin"}, "reply_to_user": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1430918825, "post_id": 30078020, "comment_id": 48269738, "body": "@mch: tried- no diffrence"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 2, "creation_date": 1430918837, "post_id": 30078020, "comment_id": 48269751, "body": "The inclusion guard <code>INCFILE1_H_</code> looks pretty generic. Haven&#39;t you used the same name to protect another header file? You could also try to run only the preprocessor (with <code>-E</code>) to check whether the file was actually included as intended."}, {"owner": {"reputation": 59, "user_id": 4362260, "user_type": "registered", "profile_image": "https://graph.facebook.com/1144390800/picture?type=large", "display_name": "Martin", "link": "https://stackoverflow.com/users/4362260/martin"}, "reply_to_user": {"reputation": 10555, "user_id": 2812864, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GVsZM.jpg?s=128&g=1", "display_name": "Mateusz Grzejek", "link": "https://stackoverflow.com/users/2812864/mateusz-grzejek"}, "edited": false, "score": 0, "creation_date": 1430918985, "post_id": 30078020, "comment_id": 48269895, "body": "@MateuszGrzejek - good spotted - that was the error - was from some old code -.- thanks! :)"}, {"owner": {"reputation": 10555, "user_id": 2812864, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GVsZM.jpg?s=128&g=1", "display_name": "Mateusz Grzejek", "link": "https://stackoverflow.com/users/2812864/mateusz-grzejek"}, "edited": false, "score": 1, "creation_date": 1430919070, "post_id": 30078020, "comment_id": 48269965, "body": "@Martin Yes, I thought so. My second sight works as usual :)"}], "answers": [{"tags": [], "owner": {"reputation": 10555, "user_id": 2812864, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GVsZM.jpg?s=128&g=1", "display_name": "Mateusz Grzejek", "link": "https://stackoverflow.com/users/2812864/mateusz-grzejek"}, "is_accepted": true, "score": 3, "last_activity_date": 1430919021, "creation_date": 1430919021, "answer_id": 30078288, "question_id": 30078020, "link": "https://stackoverflow.com/questions/30078020/implicit-declaration-of-function-even-though-i-have-included-the-file/30078288#30078288", "title": "implicit declaration of function even though i have included the file?", "body": "<p>I see, that your header file, which contains declaration of <code>init_phase_correct()</code> is wrapped with include guard with some auto-generated name (<code>INCFILE1_H_</code>).</p>\n\n<p>Also, you did not specify, whether <code>init_phase_correct()</code> is declared inside <code>PWM.h</code> or maybe another file, that is <em>included by</em> <code>PWM.h</code>.</p>\n\n<p>Without more code, I cannot say for sure, but my clairvoyance skill tells me, that <code>INCFILE1_H_</code> may be used as include guard in another file - either <code>PWM.h</code> itself or another, that is being included <em>before</em> file, that contains declaration of <code>init_phase_correct()</code>.</p>\n"}], "owner": {"reputation": 59, "user_id": 4362260, "user_type": "registered", "profile_image": "https://graph.facebook.com/1144390800/picture?type=large", "display_name": "Martin", "link": "https://stackoverflow.com/users/4362260/martin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4548, "favorite_count": 0, "accepted_answer_id": 30078288, "answer_count": 1, "score": 1, "last_activity_date": 1430919303, "creation_date": 1430918388, "last_edit_date": 1430919303, "question_id": 30078020, "link": "https://stackoverflow.com/questions/30078020/implicit-declaration-of-function-even-though-i-have-included-the-file", "title": "implicit declaration of function even though i have included the file?", "body": "<p>my project is almost working but i get 1 </p>\n\n<blockquote>\n  <blockquote>\n    <p>Warning:\n    \"implicit declaration of function 'init_phase_correct' [-Wimplicit-function-declaration]\"</p>\n  </blockquote>\n</blockquote>\n\n<p>have have the function called in my main </p>\n\n<pre><code>int main(void)\n{\n    volatile char start_flag=0;\n  uart0_Init ( MYUBRRF );\n  DDRB |=(1&lt;&lt;PB7);\n  sei();  //enable global interrupt\n  initAdc();      \n  data = 'a';\n  ADCSRA |=(1&lt;&lt;ADIE);\n  init_phase_correct();\n</code></pre>\n\n<p>and init_phase_correct is included i the top in </p>\n\n<pre><code>#include \"PWM.h\"\n</code></pre>\n\n<p>that links to </p>\n\n<pre><code>/*\n * IncFile1.h\n *\n * Created: 23-04-2015 11:30:38\n *  Author: Martin Egsdal\n */ \n\n\n#ifndef INCFILE1_H_\n\n\n#define INCFILE1_H_\n\nextern void init_fastPWM();\nextern void init_phase_correct();\nextern void init_ph_frPWM();\nextern void init_phase_correct_alt();\n\n\n#endif /* INCFILE1_H_ */\n</code></pre>\n\n<p>and in the C file it is:</p>\n\n<pre><code>void init_phase_correct(){\nTCCR0A|=(1&lt;&lt;COM0A1)|(1&lt;&lt;WGM00); //Clear OC0A on Compare Match when up-counting. Set OC0A on Compare Match when down-counting\nTCCR0B =(1&lt;&lt;CS01);   //prescalling by 8 \nOCR0A =102;  //40 duty cycle    \nTCNT0= 0;\nDDRB |= (1&lt;&lt;DDB7);// configure OC0A pin for output  \n}\n</code></pre>\n\n<p>when i rightclick init_phase_correct() in my main i can see the 2 implentations - so why is it \"Wimplicit-function-declaration\"? </p>\n"}, {"tags": ["c", "arrays", "function", "pointers"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1430918080, "post_id": 30077782, "comment_id": 48269044, "body": "<code>i&lt;length-1</code> --&gt; <code>i&lt;length</code> and <code>while (p&lt;=end)</code> --&gt; <code>while (p&lt;end)</code>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1430918692, "post_id": 30077782, "comment_id": 48269619, "body": "@BLUEPIXY incorporated the same in my answer. thanks. :-)"}], "answers": [{"comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1430926017, "post_id": 30077846, "comment_id": 48275421, "body": "So what would the caller do with a pointer to an array&#39;s 1st element, where s/he does not know the number of the array&#39;s elements? Calling <code>free()</code> is the only possible action, isn&#39;t it?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1430929541, "post_id": 30077846, "comment_id": 48277855, "body": "@alk sir, IMHO, that can be resolved using <code>k</code> in this case, am I right?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1430929663, "post_id": 30077846, "comment_id": 48277950, "body": "Hu, I fully missed this. Yes, assuming the <code>k</code> would be around (still global, very ugly) this would do."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1430929685, "post_id": 30077846, "comment_id": 48277967, "body": "Please touch your answer, so I can revoke the downvote."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1430931049, "post_id": 30077846, "comment_id": 48278861, "body": "@alk yeah, updated my answer with a hint in regard to your comment. :-)"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 2, "last_activity_date": 1430931002, "last_edit_date": 1430931002, "creation_date": 1430917956, "answer_id": 30077846, "question_id": 30077782, "link": "https://stackoverflow.com/questions/30077782/c-return-pointer-to-an-array/30077846#30077846", "title": "C - return pointer to an array", "body": "<p>To resolve your issue, do not use a <em>global</em> array(<code>v[100];</code>). Instead, </p>\n\n<ol>\n<li>define a pointer inside <code>greater()</code></li>\n<li>allocate memory dynamically using <a href=\"http://linux.die.net/man/3/malloc\" rel=\"nofollow\"><code>malloc()</code></a>.</li>\n<li>resize the memory as per the requirement using <a href=\"http://linux.die.net/man/3/realloc\" rel=\"nofollow\"><code>realloc()</code></a></li>\n<li>return the pointer.</li>\n</ol>\n\n<p>In the lights of the comment from Mr. <strong>@alk</strong>, you can get the number of elements in the array using the global variable <code>k</code>.</p>\n\n<p>Note: once you're done using the memory, don't forget to <a href=\"http://linux.die.net/man/3/free\" rel=\"nofollow\"><code>free()</code></a> the pointer from <code>main()</code>.</p>\n\n<p>BTW, the recommended signature of <code>main()</code> is <code>int main(void)</code></p>\n\n<hr>\n\n<p>EDIT:</p>\n\n<p>Also, for the logical part, as mentioned in the comments by Mr. <strong>@BLUEPIXY</strong> and <strong>@karma_geek</strong>, please note</p>\n\n<ol>\n<li>change the looping condition to <code>for (int i=0; i&lt;length; i++)</code></li>\n<li>Change the <code>while</code> loop to <code>while (p&lt;end)</code></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1430925762, "post_id": 30077952, "comment_id": 48275217, "body": "You approach does not meet this requirement: &quot;<i>The array returned must be exactly the length to hold the values greater than value and have no unused elements.</i>&quot; Also it would not work for inut arrays larger then <code>v</code>."}], "tags": [], "owner": {"reputation": 3785, "user_id": 4427938, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/M6mua.png?s=128&g=1", "display_name": "Ayushi Jha", "link": "https://stackoverflow.com/users/4427938/ayushi-jha"}, "is_accepted": false, "score": 0, "last_activity_date": 1430918604, "last_edit_date": 1430918604, "creation_date": 1430918227, "answer_id": 30077952, "question_id": 30077782, "link": "https://stackoverflow.com/questions/30077782/c-return-pointer-to-an-array/30077952#30077952", "title": "C - return pointer to an array", "body": "<p>I would suggest 2 changes in addition to the ones already mentioned: </p>\n\n<p>Iterate the <code>for loop</code> till <code>&lt;length</code>, as <code>&lt;legnth-1</code> would not cover the entire array.</p>\n\n<pre><code>int * greater(int n[], int length, int value)\n{\n    for (int i=0; i&lt;length; i++)\n        if (n[i]&gt;value)\n        {\n            v[k]=n[i];\n            k++;  // increment\n        }\n    int *p=v;\n    return p;\n}\n</code></pre>\n\n<p>Also, change the formula for end. This is because in the function, where the increment occurs, <code>k=0</code> would change as: <code>k=1</code> for <code>4 &gt; 3</code>, then <code>k=2</code> for <code>5 &gt; 3</code>. Now, </p>\n\n<pre><code>end = v + k ; \n</code></pre>\n\n<p>would result in <code>end = v + 2</code> when instead we wanted 1 lesser value. </p>\n\n<pre><code>int *end; end=v+k-1;  \n</code></pre>\n\n<p><a href=\"http://ideone.com/fVYq6B\" rel=\"nofollow\">Code with correct output</a></p>\n"}, {"tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": false, "score": 0, "last_activity_date": 1430926243, "last_edit_date": 1430926243, "creation_date": 1430924500, "answer_id": 30080516, "question_id": 30077782, "link": "https://stackoverflow.com/questions/30077782/c-return-pointer-to-an-array/30080516#30080516", "title": "C - return pointer to an array", "body": "<p>As the specs do not require to return the size of the target array, allocating a new array inside the fucntion make the pointer returned quiet useless as the caller does not know which elements (if any) are valid.</p>\n\n<p>So the only sane approach would be to <strong>not</strong> allocate memory for the target, to not even use a second array. This also is not required by the specs, so you might like to take following approach</p>\n\n<ol>\n<li>Sort the input.</li>\n<li>Find the 1st element greater then the give threshold, by simply looping over the result from 1..</li>\n<li>Return the pointer to the element found in 2.</li>\n</ol>\n\n<p>Example:</p>\n\n<pre><code>#include &lt;qsort.h&gt;\n\nint cmp(const void * pv1, const void * pv2)\n{\n  int i1 = *((int *) pv1);\n  int i2 = *((int *) pv2);\n\n  return (i1 - i2);\n}\n\nint * greater(int n[], int length, int value)\n{\n  qsort(n, sizeof *n, length, cmp);\n\n  while (0 &lt; length)\n  {\n    --length;\n    if (n[length] &gt; value)\n    {      \n      break;\n    }\n  }\n\n  return n + length + 1;\n}\n</code></pre>\n\n<p>The only req/</p>\n\n<blockquote>\n  <p>array returned must be exactly the length to hold the values greater than valu</p>\n</blockquote>\n\n<p>is met.</p>\n"}, {"tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 0, "last_activity_date": 1430928180, "creation_date": 1430928180, "answer_id": 30081926, "question_id": 30077782, "link": "https://stackoverflow.com/questions/30077782/c-return-pointer-to-an-array/30081926#30081926", "title": "C - return pointer to an array", "body": "<p>Modify your search function to return the number of elements found in a pointer parameter. Allocate the results array within the function, minimize the number of possible allocations in the function, shrink the results array before returning.</p>\n\n<p>For example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint *\ngreater(\n        const int const n[],\n        const size_t n_elem,\n        const int threshold,\n        size_t *n_greater\n        )\n{\n    size_t i = 0;\n    size_t n_found = 0;\n    size_t n_allocated = 0;\n    int *ret = NULL;\n\n    for (i = 0; i &lt; n_elem; i += 1) {\n        if (n[i] &gt; threshold) {\n            n_found += 1;\n            if (n_found &gt; n_allocated) {\n                size_t new_size = (n_allocated &lt; (n_elem / 2))\n                                ? 2 * n_found\n                                : n_elem\n                ;\n                int *tmp = realloc(ret, new_size * sizeof(*tmp));\n                if (!tmp) {\n                    fputs(\"Failed to allocate memory\", stderr);\n                    exit(EXIT_FAILURE);\n                }\n                n_allocated = new_size;\n                ret = tmp;\n            }\n            ret[n_found - 1] = n[i];\n        }\n    }\n    if (n_allocated &gt; n_found) {\n        int *tmp = realloc(ret, n_found * sizeof(*tmp));\n        if (!tmp) {\n            fputs(\"Failed to shrink result array\", stderr);\n            exit(EXIT_FAILURE);\n        }\n        ret = tmp;\n    }\n    *n_greater = n_found;\n    return ret;\n}\n\nint main (void)\n{\n    int a[] = {1,2,3,4,5,1,1,2,3,7,6,5,5,0,-1,7};\n    size_t n_greater_than_three = 0;\n    size_t i =0;\n    int *p = greater(a, sizeof(a)/sizeof(a[0]), 3, &amp;n_greater_than_three);\n\n    for (i = 0; i &lt; n_greater_than_three; i += 1) {\n        printf(\"%d\\n\", p[i]);\n    }\n\n    free(p);\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre>C:\\...\\Temp> greater.exe\n4                                             \n5                                             \n7                                             \n6                                             \n5                                             \n5                                             \n7</pre>\n"}], "owner": {"reputation": 1257, "user_id": 4214719, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4f4851ca5304f2020ce92fa7ec69b48a?s=128&d=identicon&r=PG&f=1", "display_name": "Diana", "link": "https://stackoverflow.com/users/4214719/diana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 571, "favorite_count": 0, "accepted_answer_id": 30077846, "answer_count": 4, "score": 1, "last_activity_date": 1430931002, "creation_date": 1430917804, "last_edit_date": 1430918802, "question_id": 30077782, "link": "https://stackoverflow.com/questions/30077782/c-return-pointer-to-an-array", "title": "C - return pointer to an array", "body": "<p>I have to write a function with the signature</p>\n\n<pre><code> int *greater (int n[], int length, int value) \n</code></pre>\n\n<p>that returns a pointer to an array containing the elements in n[] that are greater than a value. The array returned must be exactly the length to hold the values greater than value and have no unused elements.</p>\n\n<p>I have the following code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint k=0, v[100];\n\nint * greater(int n[], int length, int value)\n{\n    for (int i=0; i&lt;length-1; i++)\n        if (n[i]&gt;value)\n        {\n            v[k]=n[i];\n            k++;\n        }\n    int *p=v;\n    return p;\n}\nint main ()\n{\n    int a[]={1,2,3,4,5};\n    int *p=greater (a,5,3);\n    int *end; end=v+k;\n    while (p&lt;=end)\n    {\n        printf (\"%i \", *p);\n        p++;\n    }\n}\n</code></pre>\n\n<p>The problem is that p will only hold the value of 4, therefore it will print 4 0, instead of 4 5. Any ideas what I am doing wrong?</p>\n"}, {"tags": ["c", "struct", "heap", "valgrind", "libconfig"], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 2889226, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/832873fa8563d7111608de0a4bcf9d09?s=128&d=identicon&r=PG&f=1", "display_name": "Odko", "link": "https://stackoverflow.com/users/2889226/odko"}, "edited": false, "score": 0, "creation_date": 1430919876, "post_id": 30077895, "comment_id": 48270579, "body": "Thank you for your answer. looks like i have to free that conf_data.timeformat after use. Is there any other option other than strdup ?"}, {"owner": {"reputation": 7592, "user_id": 2371054, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/gWrKl.jpg?s=128&g=1", "display_name": "mshildt", "link": "https://stackoverflow.com/users/2371054/mshildt"}, "reply_to_user": {"reputation": 141, "user_id": 2889226, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/832873fa8563d7111608de0a4bcf9d09?s=128&d=identicon&r=PG&f=1", "display_name": "Odko", "link": "https://stackoverflow.com/users/2889226/odko"}, "edited": false, "score": 0, "creation_date": 1430921403, "post_id": 30077895, "comment_id": 48271743, "body": "@akiD Yes, technically you must free the conf_data.timeformat after use to avoid a memory leak, however if this is global config data that survives throughout the entire life of the program, neglecting to free() it at program exit time isn&#39;t a big deal IMO. There are other ways to copy a string (memcpy, etc) but strdup() is the most straight forward."}], "tags": [], "owner": {"reputation": 7592, "user_id": 2371054, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/gWrKl.jpg?s=128&g=1", "display_name": "mshildt", "link": "https://stackoverflow.com/users/2371054/mshildt"}, "is_accepted": true, "score": 2, "last_activity_date": 1430918591, "last_edit_date": 1430918591, "creation_date": 1430918094, "answer_id": 30077895, "question_id": 30077751, "link": "https://stackoverflow.com/questions/30077751/global-struct-memory-error/30077895#30077895", "title": "Global struct memory error", "body": "<p>libconfig is passing you a pointer to its internal string storage for the <code>timeformat</code> value. Which then gets freed when you do a <code>config_destroy()</code> causing your global struct's timeformat pointer to be invalid. To avoid this <code>strdup()</code> the timeformat string returned to you by libconfig:</p>\n\n<pre><code>const char *time_str;\nconfig_lookup_string(&amp;cfg, \"timeformat\", &amp;time_str);\nconf_data.timeformat = strdup(time_str);\nconfig_destroy(&amp;cfg);\n/* conf_data.timeformat is still valid */\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "is_accepted": false, "score": 3, "last_activity_date": 1430918223, "creation_date": 1430918223, "answer_id": 30077950, "question_id": 30077751, "link": "https://stackoverflow.com/questions/30077751/global-struct-memory-error/30077950#30077950", "title": "Global struct memory error", "body": "<p>from <a href=\"http://www.hyperrealm.com/libconfig/libconfig_manual.html#The-C-API\" rel=\"nofollow\">the libconfig api manual</a></p>\n\n<blockquote>\n  <p>Storage for the string returned by config_lookup_string() is managed by the library and released automatically when the setting is destroyed or when the setting's value is changed; the string must not be freed by the caller. </p>\n</blockquote>\n\n<p>So you need to copy the pointer returned by <code>config_lookup_string()</code> into another array if you want to use it after <code>config_destroy()</code></p>\n"}], "owner": {"reputation": 141, "user_id": 2889226, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/832873fa8563d7111608de0a4bcf9d09?s=128&d=identicon&r=PG&f=1", "display_name": "Odko", "link": "https://stackoverflow.com/users/2889226/odko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 0, "accepted_answer_id": 30077895, "answer_count": 2, "score": 3, "last_activity_date": 1440659986, "creation_date": 1430917744, "last_edit_date": 1440659986, "question_id": 30077751, "link": "https://stackoverflow.com/questions/30077751/global-struct-memory-error", "title": "Global struct memory error", "body": "<p>My program's reading from config file using <code>libconfig</code> and saving values to the global struct. It's working fine but valgrind says there's error. And the error only shows for char pointer variable. What is that error and how to fix that ? Thank you</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;libconfig.h&gt;\n#include \"stdlib.h\"\n#define conf_file \"myconf\"\n\nstruct setting_data\n{\n    int number;\n    const char* timeformat;\n};\nstruct setting_data conf_data;\nvoid read_config();\nint main(){\n    read_config();\n    printf(\"%d @ %p\\n\", conf_data.number,&amp;conf_data.number);\n    printf(\"%s @ %p\\n\", conf_data.timeformat,&amp;conf_data.timeformat);\n\n}\n\nvoid read_config(){\n    config_t cfg;\n    // config_setting_t *rules, *settings,*m_number,*device,*sendduration,*pin_code;\n    config_init(&amp;cfg);\n\n    if(! config_read_file(&amp;cfg, conf_file))\n    {\n        fprintf(stderr, \"%s:%d - %s\\n\", config_error_file(&amp;cfg),\n                config_error_line(&amp;cfg), config_error_text(&amp;cfg));\n        config_destroy(&amp;cfg);\n        exit(1);\n    }\n    // conf_data.number        = config_setting_get_int   (config_lookup(&amp;cfg, \"number\"       ));\n    config_lookup_int(&amp;cfg,\"number\",&amp;conf_data.number);\n    config_lookup_string(&amp;cfg, \"timeformat\", &amp;conf_data.timeformat);\n    config_destroy(&amp;cfg);\n}\n</code></pre>\n\n<blockquote>\n  <p>==8238== Invalid read of size 1</p>\n  \n  <p>==8238==    at 0x50AFBC9: _IO_file_xsputn@@GLIBC_2.2.5 (fileops.c:1317)</p>\n  \n  <p>==8238==    by 0x5083972: vfprintf (vfprintf.c:1629)</p>\n  \n  <p>==8238==    by 0x508C269: printf (printf.c:35)</p>\n  \n  <p>==8238==    by 0x400993: main (test.c:16)</p>\n  \n  <p>....</p>\n  \n  <p>==8238==  Address 0x53cdb0c is 12 bytes inside a block of size 15 free'd</p>\n  \n  <p>==8238== ERROR SUMMARY: 43 errors from 5 contexts (suppressed: 4 from 4)</p>\n</blockquote>\n"}, {"tags": ["c", "openssl", "bignum"], "answers": [{"tags": [], "owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "is_accepted": true, "score": 11, "last_activity_date": 1468261524, "last_edit_date": 1468261524, "creation_date": 1430918100, "answer_id": 30077899, "question_id": 30077562, "link": "https://stackoverflow.com/questions/30077562/convert-a-big-number-given-as-a-string-to-an-openssl-bignum/30077899#30077899", "title": "Convert a big number given as a string to an OpenSSL BIGNUM", "body": "<blockquote>\n<pre><code>unsigned char *p_str = \"82019154470699086128524248488673846867876336512717\";\n\nBIGNUM *p = BN_bin2bn(p_str, sizeof(p_str), NULL);\n</code></pre>\n</blockquote>\n\n<p>Use <code>int BN_dec2bn(BIGNUM **a, const char *str)</code> instead. </p>\n\n<p>You would use <code>BN_bin2bn</code> when you have an array of <code>bytes</code> (and not a NULL terminated ASCII string).</p>\n\n<p>The man pages are located at <a href=\"https://www.openssl.org/docs/crypto/BN_bn2bin.html\" rel=\"noreferrer\"><code>BN_bin2bn(3)</code></a>.</p>\n\n<p>The correct code would look like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;openssl/bn.h&gt;\n\nint main ()\n{\n  static const\n  char p_str[] = \"82019154470699086128524248488673846867876336512717\";\n\n  BIGNUM *p = BN_new();\n  BN_dec2bn(&amp;p, p_str);\n\n  char * number_str = BN_bn2hex(p);\n  printf(\"%s\\n\", number_str);\n\n  OPENSSL_free(number_str);\n  BN_free(p);\n\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 6309, "user_id": 717822, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f7e6a550ddff2d2288933bfd21d49a14?s=128&d=identicon&r=PG", "display_name": "perror", "link": "https://stackoverflow.com/users/717822/perror"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11266, "favorite_count": 3, "accepted_answer_id": 30077899, "answer_count": 1, "score": 7, "last_activity_date": 1468261524, "creation_date": 1430917248, "last_edit_date": 1430920849, "question_id": 30077562, "link": "https://stackoverflow.com/questions/30077562/convert-a-big-number-given-as-a-string-to-an-openssl-bignum", "title": "Convert a big number given as a string to an OpenSSL BIGNUM", "body": "<p>I am trying to convert a string <code>p_str</code> representing a big integer to a <code>BIGNUM</code> <code>p</code> using the OpenSSL library. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;openssl/bn.h&gt;\n\nint main ()\n{\n  /* I shortened the integer */\n  unsigned char *p_str = \"82019154470699086128524248488673846867876336512717\";\n\n  BIGNUM *p = BN_bin2bn(p_str, sizeof(p_str), NULL);\n\n  BN_print_fp(stdout, p);\n  puts(\"\");\n\n  BN_free(p);\n  return 0;\n}\n</code></pre>\n\n<p>Compiled it with:</p>\n\n<pre><code>gcc -Wall -Wextra -g -o convert convert.c -lcrypto\n</code></pre>\n\n<p>But, when I execute it, I get the following result:</p>\n\n<pre><code>3832303139313534\n</code></pre>\n"}, {"tags": ["c", "linux", "locking", "daemon", "flock"], "answers": [{"comments": [{"owner": {"reputation": 33621, "user_id": 108802, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/nABuD.jpg?s=128&g=1", "display_name": "Gauthier", "link": "https://stackoverflow.com/users/108802/gauthier"}, "edited": false, "score": 0, "creation_date": 1430918029, "post_id": 30077681, "comment_id": 48268994, "body": "I meant to use <code>newgrp</code>, not to add the user to a new group (I use <code>usermod -a -G &lt;group&gt; &lt;user&gt;</code>), but to <i>make the group the current one</i>. By default, if &lt;user&gt; creates a file, it is owned by &lt;user&gt; and for <i>group</i> &lt;user&gt;. The user has to make this special group their current group for created files to have it as group. Try <code>touch asdf</code> and <code>ll asdf</code>, then <code>newgrp tty</code>, <code>touch qwer</code>, <code>ll qwer</code>."}, {"owner": {"reputation": 296564, "user_id": 34088, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8a4d6f03a8879432d8563aefbf48e787?s=128&d=identicon&r=PG", "display_name": "Aaron Digulla", "link": "https://stackoverflow.com/users/34088/aaron-digulla"}, "reply_to_user": {"reputation": 33621, "user_id": 108802, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/nABuD.jpg?s=128&g=1", "display_name": "Gauthier", "link": "https://stackoverflow.com/users/108802/gauthier"}, "edited": false, "score": 0, "creation_date": 1430918729, "post_id": 30077681, "comment_id": 48269655, "body": "I&#39;d use <code>chown(path,uid,gid)</code> in the daemon to give the file the correct group or run the daemon with the correct group in the first place. No need for <code>newgrp</code>."}], "tags": [], "owner": {"reputation": 296564, "user_id": 34088, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8a4d6f03a8879432d8563aefbf48e787?s=128&d=identicon&r=PG", "display_name": "Aaron Digulla", "link": "https://stackoverflow.com/users/34088/aaron-digulla"}, "is_accepted": false, "score": 2, "last_activity_date": 1430917554, "creation_date": 1430917554, "answer_id": 30077681, "question_id": 30077360, "link": "https://stackoverflow.com/questions/30077360/how-to-release-linux-lock-files-for-unique-daemon-process-and-multiple-users/30077681#30077681", "title": "How to release Linux lock files for unique daemon process and multiple users", "body": "<p>The standard way for lock files is to turn the daemon into a service and require <code>sudo</code> (or becoming <code>root</code> by other means) to start and stop it.</p>\n\n<p>Now you can give the file a certain group; users in this group can then modify it. They can use <code>newgrp</code> but it's better to add them to the group with <code>usermod --append --groups=foo bar</code> (to add user <code>bar</code> to the group <code>foo</code>; the user keeps her original GID and all other groups they had). After a relog, you can validate this with <code>id bar</code>.</p>\n\n<p>This is all very tedious. When I need something like that, I create a socket. Sockets are killed with the process that created them (so no cleanup necessary). Sockets can also be used to communicate with the running daemon (give me your status, shutdown, maybe even restart, ...). </p>\n\n<p>I'm using a default port number which I compile into the application but I also use an environment variable to override the default.</p>\n\n<p>Just make sure that you create a socket which listens on <code>localhost</code>; otherwise anyone on the Internet might be able talk to it.</p>\n"}], "owner": {"reputation": 33621, "user_id": 108802, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/nABuD.jpg?s=128&g=1", "display_name": "Gauthier", "link": "https://stackoverflow.com/users/108802/gauthier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1024, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1430917554, "creation_date": 1430916766, "question_id": 30077360, "link": "https://stackoverflow.com/questions/30077360/how-to-release-linux-lock-files-for-unique-daemon-process-and-multiple-users", "title": "How to release Linux lock files for unique daemon process and multiple users", "body": "<p>I have a deamon of which only one instance should be running at a time. The daemon is part of a larger application. I made this happen this way:</p>\n\n<ul>\n<li><code>open()</code> <code>/tmp/prog.pid</code> with <code>O_CREAT | O_RDWR</code>, permissions 0666. The permissions actually become 0664, probably because of umask (?)</li>\n<li><code>flock()</code> on the file descriptor returned by <code>open()</code>, with <code>LOCK_EX | LOCK_NB</code></li>\n</ul>\n\n<p>This is all I had first. My daemon exits on <code>SIGTERM</code> and <code>SIGINT</code>, but it turned out that the lock was not released upon exit. I realized with help of <code>man 1 flock</code> (strangely not in <code>man 2 flock</code>) that manually unlocking might be necessary if \"the enclosed command group may have forked a background process which should not be holding the lock\". This is exaclty the case since I am working on a daemon, so I now unlock manually at exit.</p>\n\n<p>Now to my problem: there are several users who might be running the daemon.</p>\n\n<p>If user1 is running the daemon, I want user2 to be able to kill it and restart it as themselves.</p>\n\n<p>The locked file <code>/tmp/prog.pid</code> has permissions 0664, owner user1, group user1.</p>\n\n<p>A stop script <code>prog_stop</code> kills all the processes involved in the application (it requires superuser rights, I'm ok with that). It also kills the daemon. When user2 runs <code>prog_stop</code>, the lock is released (I believe), but user2 <strong>cannot start its own daemon process</strong>, because it is neither owner of the lock file, nor in its group.</p>\n\n<p>Several possible solutions:</p>\n\n<ul>\n<li>make the lock file 0666, writeable to all. Dangerous.</li>\n<li>create a group in which users need to be in order to run the application. This requires that all users start the application with this group, probably with help of <code>newgrp</code>. Easy to forget, not easy to enforce that people do this. Possibly set the current group in the scripts used to start the application?</li>\n<li>completely delete the lock file in <code>prog_stop</code>. Drawback: I open the file from a C file, where the path string is defined. I need to write (and maintain!) the exact same file name with path in the stop script.</li>\n</ul>\n\n<p>Lock files for daemons must be very common. What is the standard way to deal with this problem?</p>\n"}, {"tags": ["c#", "c++", "c", "file", "dsofile"], "owner": {"reputation": 252, "user_id": 4604440, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/dcdfa97f4aab31fe989c58fb95d1116c?s=128&d=identicon&r=PG&f=1", "display_name": "Digvijay Rathore", "link": "https://stackoverflow.com/users/4604440/digvijay-rathore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 155, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1430916247, "creation_date": 1430916146, "last_edit_date": 1430916247, "question_id": 30077086, "link": "https://stackoverflow.com/questions/30077086/need-to-access-dsofile-properties-in-c-code", "title": "Need to access DsoFile properties in c code", "body": "<p>I have done a code in c# and set the property using Dsofile.dll. I can see that its working fine and displaying the property that I've been set even after restarting the system.\nNow I want the same property to be accessed using c or c++ code. \ncan any body help for this.</p>\n\n<pre><code>OleDocumentProperties oOleDocumentProperties = new OleDocumentProperties();\noOleDocumentProperties.Open(@\"E:\\mbam - Copy - Copy.exe\", false, DSOFile.dsoFileOpenOptions.dsoOptionDefault);     \nobject obj = \"test\";\noOleDocumentProperties.CustomProperties.Add(\"TestXXX\", ref obj);\noOleDocumentProperties.Save();\noOleDocumentProperties.Close(true);\n</code></pre>\n\n<p>is the code that I've used to set attributes now I want the Same TestXXX property to be accessed via c or c++ code.</p>\n"}, {"tags": ["c", "tic-tac-toe", "minimax"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1430963347, "post_id": 30076965, "comment_id": 48293928, "body": "this function: &#39;int whoWon(char ch) &#39; contains a path through the code where no return (value); statement is encountered.   Suggest modifying the code, perhaps by adding a default case or revise the logic to avoid the bad execution path problem."}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 3812733, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f4f35bd71a14e0f5233c87dd4ec763eb?s=128&d=identicon&r=PG&f=1", "display_name": "user3812733", "link": "https://stackoverflow.com/users/3812733/user3812733"}, "edited": false, "score": 0, "creation_date": 1431003713, "post_id": 30088238, "comment_id": 48314992, "body": "Thanks to your help I found the solution. This is how looks my heuristic evaluation of node now: <code>return terminalNode * depth;</code>, I also changed <code>bestValue</code> to -10 and 10 for maximizing player and minimizing player respectively."}, {"owner": {"reputation": 3618, "user_id": 2394945, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/g5WxC.png?s=128&g=1", "display_name": "Moby Disk", "link": "https://stackoverflow.com/users/2394945/moby-disk"}, "reply_to_user": {"reputation": 95, "user_id": 3812733, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f4f35bd71a14e0f5233c87dd4ec763eb?s=128&d=identicon&r=PG&f=1", "display_name": "user3812733", "link": "https://stackoverflow.com/users/3812733/user3812733"}, "edited": false, "score": 0, "creation_date": 1431003825, "post_id": 30088238, "comment_id": 48315092, "body": "Thanks for the reply, I was curious how it worked out.  This looks like a fun coding task."}, {"owner": {"reputation": 95, "user_id": 3812733, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f4f35bd71a14e0f5233c87dd4ec763eb?s=128&d=identicon&r=PG&f=1", "display_name": "user3812733", "link": "https://stackoverflow.com/users/3812733/user3812733"}, "edited": false, "score": 0, "creation_date": 1431005177, "post_id": 30088238, "comment_id": 48316152, "body": "I just realized that depth in some cases may equal 0 but the last move may be the winning one. So multiplication 1 or -1 by 0 doesn&#39;t make sense here. It&#39;s better to use <code>return terminalNode * (depth+1);</code> with -11 and 11 as a <code>bestValue</code>."}], "tags": [], "owner": {"reputation": 3618, "user_id": 2394945, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/g5WxC.png?s=128&g=1", "display_name": "Moby Disk", "link": "https://stackoverflow.com/users/2394945/moby-disk"}, "is_accepted": true, "score": 2, "last_activity_date": 1431003585, "last_edit_date": 1431003585, "creation_date": 1430948938, "answer_id": 30088238, "question_id": 30076965, "link": "https://stackoverflow.com/questions/30076965/obtain-the-best-move-from-minimax-algorithm-in-tic-tac-toe-game/30088238#30088238", "title": "Obtain the best move from MiniMax algorithm in Tic-Tac-Toe game", "body": "<p>I see two problems:</p>\n\n<ol>\n<li>The heuristic is wrong</li>\n<li>There is a problem with strcpy.</li>\n</ol>\n\n<p><strong>The heuristic is wrong</strong></p>\n\n<p>The Wikipedia pseudo-code says:</p>\n\n<pre><code>if depth = 0 or node is a terminal node\n    return the heuristic value of node\n</code></pre>\n\n<p>Your implementation does this:</p>\n\n<pre><code>if depth = 0 or node is a terminal node\n    return 1 if X wins, -1 if O wins, 0 if it is a draw\n</code></pre>\n\n<p>But that isn't a very good heuristic.  With that heuristic, all the possible ways that X could win are equally weighted.  So if X finds a way to win in 3 moves, that is weighted just the same as if X finds a way to win in 2 moves, and that is weighted just the same as if X finds a way to win in 1 move.  </p>\n\n<p>So, here is what happens in your test case:</p>\n\n<ol>\n<li>X tries position 2.</li>\n<li>O tries position 3.</li>\n<li>X tries position 6.</li>\n<li>This is a terminal node.  X wins.  So return positive 1.</li>\n</ol>\n\n<p>Heuristic for this decision path = 1</p>\n\n<p>Another possibility it hits is:</p>\n\n<ol>\n<li>X tries position 3.</li>\n<li>This is a terminal node.  X wins.  So return positive 1.</li>\n</ol>\n\n<p>Heuristic for this decision path = 1</p>\n\n<p>Since both of these solutions have the same heuristic, so they are both of equal value.  You probably meant for this solution to be suboptimal, because it took too many moves to win.  I suggest a heuristic based on the number of moves it took to get here, multiplied who the winner is.  So if X wins in 1 moves, heuristic is 5000.  If X wins in 2 moves, then heuristic is 2500.  If O wins in 2 moves, heuristic is -2500.  Something like that.</p>\n\n<p><strong>There is a problem with strcpy</strong></p>\n\n<p>This line:</p>\n\n<pre><code>strcpy(child, node);\n</code></pre>\n\n<p>should be:</p>\n\n<pre><code>memcpy(child, node, 9*sizeof(char));\n</code></pre>\n\n<p>Because \"node\" is not a null terminated string.  When I run this on VS2013/Windows 8.1 my output is garbage because.  You might be getting lucky on your platform.</p>\n"}], "owner": {"reputation": 95, "user_id": 3812733, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f4f35bd71a14e0f5233c87dd4ec763eb?s=128&d=identicon&r=PG&f=1", "display_name": "user3812733", "link": "https://stackoverflow.com/users/3812733/user3812733"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 917, "favorite_count": 0, "accepted_answer_id": 30088238, "answer_count": 1, "score": 4, "last_activity_date": 1431003585, "creation_date": 1430915885, "last_edit_date": 1430948162, "question_id": 30076965, "link": "https://stackoverflow.com/questions/30076965/obtain-the-best-move-from-minimax-algorithm-in-tic-tac-toe-game", "title": "Obtain the best move from MiniMax algorithm in Tic-Tac-Toe game", "body": "<p>I'm trying to implement MiniMax algorithm based on Wikipedia <a href=\"http://en.wikipedia.org/wiki/Minimax#Pseudocode\" rel=\"nofollow\">pseudocode</a> in Tic-Tac-Toe game written in C. However, I can't manage to obtain the best possible move. Here's my code:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;string.h&gt;\n\n// compile and run: gcc minimax.c -std=c99 &amp;&amp; ./a.out\n\nint max(int x, int y) {\n  return x &gt; y ? x : y;\n}\n\nint min(int x, int y) {\n  return x &lt; y ? x : y;\n}\n\nint whoWon(char ch) {\n  switch (ch) {\n    case 'O':\n      return -1;\n      break;\n    case 'X':\n      return 1;\n      break;\n  }\n}\n\nvoid printArray(char array[]) {\n  printf(\"# START\\n\"\n         \"%c | %c | %c\\n\"\n         \"--|---|--\\n\"\n         \"%c | %c | %c\\n\"\n         \"--|---|--\\n\"\n         \"%c | %c | %c\\n\"\n         \"# END\\n\\n\", array[0], array[1], array[2], array[3], array[4], array[5], array[6], array[7], array[8]);\n}\n\nint anyWinners(char board[])\n{\n  int i;\n\n  /* check every row */\n  for(i = 0; i &lt; 7; i += 3)\n    if(board[i] != ' ' &amp;&amp; board[i] == board[i+1] &amp;&amp; board[i] == board[i+2])\n      return whoWon(board[i]);\n\n  /* check every column */\n  for(i = 0; i &lt; 3; i++)\n    if(board[i] != ' ' &amp;&amp; board[i] == board[i+3] &amp;&amp; board[i] == board[i+6])\n      return whoWon(board[i]);\n\n  /* check diagonals */\n  if(board[4] != ' ' &amp;&amp; ((board[0] == board[4] &amp;&amp; board[0] == board[8]) || (board[2] == board[4] &amp;&amp; board[2] == board[6])))\n    return whoWon(board[4]);\n\n  return 0;\n}\n\nint fullBoard(char board[]) {\n  for (int i = 0; i &lt; 9; ++i) {\n    if (board[i] == ' ')\n      return 0;\n  }\n  return 1;\n}\n\nint minimax(char node[], int depth, bool maximizingPlayer, int * move) {\n  int terminalNode = anyWinners(node);\n  if (depth == 0 || terminalNode || fullBoard(node)) {\n    printf(\"################## END OF SUBTREE ##################\\n\");\n    return terminalNode;\n  }\n\n  int bestValue, val;\n  if (maximizingPlayer) {\n    bestValue = -2;\n    for (int i = 0; i &lt; 9; ++i) {\n      if (node[i] == ' ') {\n        char child[9];\n        strcpy(child, node);\n        child[i] = 'X';\n\n        // debug\n        printArray(child);\n\n        val = minimax(child, depth - 1, false, move);\n\n        // debug\n        printf(\"X: ^^ i = %d ^^ depth = %d ^^ val = %d\\n\", i, depth, val);\n\n        //bestValue = max(bestValue, val);\n        if (val &gt; bestValue) {\n          bestValue = val;\n          if (depth == 9) *move = i;\n        }\n      }\n    }\n    return bestValue;\n  } else {\n    bestValue = 2;\n    for (int i = 0; i &lt; 9; ++i) {\n      if (node[i] == ' ') {\n        char child[9];\n        strcpy(child, node);\n        child[i] = 'O';\n\n        // debug\n        printArray(child);\n\n        val = minimax(child, depth - 1, true, move);\n\n        // debug\n        printf(\"O: ^^ i = %d ^^ depth = %d ^^ val = %d\\n\", i, depth, val);\n\n        bestValue = min(bestValue, val);\n      }\n    }\n    return bestValue;\n  }\n}\n\nint main() {\n  int move = -999; // initialize only for debug\n\n  // X will always win no matter what, first best move for X is 8\n  // char board[] = {'O', ' ', ' ',\n  //                 ' ', ' ', ' ',\n  //                 'X', 'X', ' '};\n\n  // best move for X is 3\n  char board[] = {'O', 'O', ' ',\n                  ' ', 'X', 'X',\n                  ' ', ' ', ' '};\n\n  // Initial call for maximizing player\n  int result = minimax(board, 9, true, &amp;move);\n  printf(\"minimax returned: %d\\n\", result);\n  printf(\"chosen move: %d\\n\", move);\n\n  return 0;\n}\n</code></pre>\n\n<p>Code prints board for each move with state of all variables. There are also two failing tests commented out in main. Right now algorithm returns bad moves and I can't find the error.</p>\n"}, {"tags": ["c", "gcc", "xc16"], "comments": [{"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 0, "creation_date": 1430915932, "post_id": 30076949, "comment_id": 48267224, "body": "Probably dumb question but have you tried switching the two lines?"}, {"owner": {"reputation": 2182, "user_id": 1689090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef8d951e67e4b0c03f5b4c021e22b93d?s=128&d=identicon&r=PG", "display_name": "Evil Dog Pie", "link": "https://stackoverflow.com/users/1689090/evil-dog-pie"}, "reply_to_user": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 1, "creation_date": 1430915969, "post_id": 30076949, "comment_id": 48267240, "body": "There are similar posts on other (non SO) forums that almost all relate to trying to put RAM variables in ROM."}, {"owner": {"reputation": 2182, "user_id": 1689090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef8d951e67e4b0c03f5b4c021e22b93d?s=128&d=identicon&r=PG", "display_name": "Evil Dog Pie", "link": "https://stackoverflow.com/users/1689090/evil-dog-pie"}, "reply_to_user": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 0, "creation_date": 1430916107, "post_id": 30076949, "comment_id": 48267353, "body": "@Eregrith Yes.  Same result.  I&#39;ve also tried multiple variables with both zero and non-zero values.  The first one the compiler gets to works (of course), as do all other with the same (zero or non-zero) values as the first.  I.e. if I add <code>int __attribute__((section(&quot;.in_my_data&quot;))) _baz = 1;</code> at the end, <code>_baz</code> is fine, but if <code>_baz=0;</code> then <code>_baz</code> fails too."}, {"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 0, "creation_date": 1430916718, "post_id": 30076949, "comment_id": 48267856, "body": "And if the first one is <code>int __attribute__((section(&quot;.in_my_data&quot;))) _foo = 0;</code> do both fail?"}, {"owner": {"reputation": 2182, "user_id": 1689090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef8d951e67e4b0c03f5b4c021e22b93d?s=128&d=identicon&r=PG", "display_name": "Evil Dog Pie", "link": "https://stackoverflow.com/users/1689090/evil-dog-pie"}, "reply_to_user": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 0, "creation_date": 1430917100, "post_id": 30076949, "comment_id": 48268171, "body": "@Eregrith If <code>_foo = 0;</code> then <code>_bar = 0;</code> is ok, but <code>_baz = 1;</code> fails.  It appears that the compiler has deceided that the crt_startup will take care of initialising <code>= 0;</code> variables and expects them to be placed in a different section from <code>= non-zero;</code> variables."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1505374436, "post_id": 30076949, "comment_id": 79389056, "body": "Also see <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=82209\" rel=\"nofollow noreferrer\">Compile error &quot;X causes a section type conflict with Y&quot; should provide more information</a> in the GCC Issue Tracker."}], "answers": [{"tags": [], "owner": {"reputation": 2182, "user_id": 1689090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef8d951e67e4b0c03f5b4c021e22b93d?s=128&d=identicon&r=PG", "display_name": "Evil Dog Pie", "link": "https://stackoverflow.com/users/1689090/evil-dog-pie"}, "is_accepted": true, "score": 7, "last_activity_date": 1430928049, "last_edit_date": 1495540890, "creation_date": 1430928049, "answer_id": 30081882, "question_id": 30076949, "link": "https://stackoverflow.com/questions/30076949/gcc-error-variable-causes-a-section-type-conflict/30081882#30081882", "title": "GCC error &quot;&lt;variable&gt; causes a section type conflict&quot;", "body": "<p><em>Caveat: This answer may only apply to the Microchip XC16 compiler.</em></p>\n\n<h3>Research</h3>\n\n<p>The compiler assigns attributes to C variables so that they are allocated to specific sections as follows (see <em>Note 1</em> below for XC16 specific information).</p>\n\n<ul>\n<li><code>int a = 1;</code> - is assigned to <code>.data</code>.</li>\n<li><code>int b = 0;</code> - is assigned to <code>.bss</code>.</li>\n<li><code>int c;</code> - is assigned to <code>.bss</code>.</li>\n</ul>\n\n<p>The first and last of these make sense: <code>.data</code> is used for initialised data and <code>.bss</code> is used for uninitialised data.  However, <code>.bss</code> data is also set to zero by the ANSI C start up (see <em>Note 2</em>).</p>\n\n<h3>Answer</h3>\n\n<p>It would appear that the compiler is including variables that <strong>are</strong> initialised, but with a value that equates to all bits 0 in the <code>.bss</code> section as well as all those which are not initialised at all.</p>\n\n<p>According to <a href=\"http://en.wikipedia.org/wiki/.bss\" rel=\"nofollow noreferrer\">wikipedia</a>:</p>\n\n<blockquote>\n  <p>An implementation may also assign statically-allocated variables and constants initialized with a value consisting solely of zero-valued bits to the BSS section.</p>\n</blockquote>\n\n<h3>Workaround</h3>\n\n<p>GCC has an option <code>-fno-zero-initialized-in-bss</code> which can be used to force all variables that are initialised with zero into the <code>.data</code> section, as stated in <a href=\"https://stackoverflow.com/a/8721627/3581917\">this answer</a>.  This can be applied on a per-source file basis, but not on individual variables.</p>\n\n<h3>Wishful Thinking</h3>\n\n<p>It would be nice if there were an <code>__attribute__((**doload**))</code> that could be applied to force the compiler to place a zero-initialised variable in <code>.data</code> instead of <code>.bss</code>.</p>\n\n<h3>Notes</h3>\n\n<p><em>Note 1: The XC16 compiler may use <code>.ndata</code> and <code>.nbss</code> to indicate near data below address 0x8000.</em></p>\n\n<p><em>Note 2: Marking a variable with <code>__attribute__((noload))</code> will result in the variable being excluded from the <code>.bss</code> section.  XC16 generates a specific output section, with a (GUID?) unique name for each variable marked as such.</em></p>\n"}, {"tags": [], "owner": {"reputation": 71, "user_id": 5453591, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/6f845cc1142e04bbfbea8a77f4a28820?s=128&d=identicon&r=PG", "display_name": "Hendrik Beijeman", "link": "https://stackoverflow.com/users/5453591/hendrik-beijeman"}, "is_accepted": false, "score": 7, "last_activity_date": 1444995662, "creation_date": 1444995662, "answer_id": 33169626, "question_id": 30076949, "link": "https://stackoverflow.com/questions/30076949/gcc-error-variable-causes-a-section-type-conflict/33169626#33169626", "title": "GCC error &quot;&lt;variable&gt; causes a section type conflict&quot;", "body": "<p>By default, GCC places classes of objects in different sections, executable code goes to .text, initialized data to .data, static data to .bss, and some more obscure ones.</p>\n\n<p>If you try to force two objects of different class to belong to the same section, GCC will raise this section error.</p>\n\n<p>The solution is to place them in different sections, and finally, tell the linker to ultimately coalesce these objects in the same section, for example:</p>\n\n<pre><code>.boot : {                 // target ELF section will contain....\n    *(.boot)              // executable code\n    *(.boot_rodata)       // constant data\n    *(.boot_bss)          // static data\n} &gt; BOOT                  // to finally be place in this area\n</code></pre>\n"}], "owner": {"reputation": 2182, "user_id": 1689090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef8d951e67e4b0c03f5b4c021e22b93d?s=128&d=identicon&r=PG", "display_name": "Evil Dog Pie", "link": "https://stackoverflow.com/users/1689090/evil-dog-pie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8270, "favorite_count": 1, "accepted_answer_id": 30081882, "answer_count": 2, "score": 7, "last_activity_date": 1505368503, "creation_date": 1430915826, "last_edit_date": 1505368503, "question_id": 30076949, "link": "https://stackoverflow.com/questions/30076949/gcc-error-variable-causes-a-section-type-conflict", "title": "GCC error &quot;&lt;variable&gt; causes a section type conflict&quot;", "body": "<p>Why is there a compiler error when attempting to place two (RAM) variables, which only differ by their initialisation values, into the same section?</p>\n\n<h3>Problem</h3>\n\n<p>The C source:</p>\n\n<pre><code>int __attribute__((section(\".in_my_data\"))) _foo = 1;\nint __attribute__((section(\".in_my_data\"))) _bar = 0;\n</code></pre>\n\n<p>The (relevant) GCC compiler output:</p>\n\n<pre><code>mcve/main.c:75:45: error: _bar causes a section type conflict\n</code></pre>\n\n<p>The linker script contains the following line in the <code>SECTIONS</code> definition, but the (fatal) error is from the compiler, not the linker.</p>\n\n<pre><code>.my_data : { *(.in_my_data) } &gt; data\n</code></pre>\n\n<h3>Further Information</h3>\n\n<p>Changing the C source to permit the compiler to use two sections allows the compile to pass, but the linker then generates an error if the two input sections are mapped into the same output section.</p>\n\n<p>The C source:</p>\n\n<pre><code>int __attribute__((section(\".in_my_data_nonzero\"))) _foo = 1;\nint __attribute__((section(\".in_my_data_zero\"))) _bar = 0;\n</code></pre>\n\n<p>The linker script:</p>\n\n<pre><code>.my_data : { *(.in_my_data*) } &gt; data\n</code></pre>\n\n<p>The (relevant) linker output:</p>\n\n<pre><code>Link Error: attributes for input section '.in_my_data_nonzero' conflict\nwith output section '.my_data'\n</code></pre>\n\n<p>Swapping the order of the lines in the C source only changes which section (the second to appear in the C source) is in error.</p>\n\n<h3>Question</h3>\n\n<p>What attribute(s) does the GCC compiler require of a section for a variable that is initialised with zero that it doesn't for one that is initialised with non-zero, or vice versa?</p>\n\n<p>Is the compiler trying to place the variables that are initialised to zero in the <code>.bss</code> section, rather than the <code>.data</code> section for initialised data?  Or is there another section for data that is initialised to zero?</p>\n\n<h3>Related questions</h3>\n\n<p>Similar questions appear cover issues with conflicts between memory types (ROM vs. RAM):</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/q/25246984/3581917\">&quot;Section type conflict&quot; in arm embedded, what is it?</a></li>\n<li><a href=\"https://stackoverflow.com/q/10436759/3581917\">How do I resolve a &quot;section type conflict&quot; compile error and best practices for using section attribute with gcc</a></li>\n<li><a href=\"https://stackoverflow.com/q/23923911/3581917\">Getting a &quot;section type conflict&quot; using M2tklib and glcd</a></li>\n</ul>\n\n<p>... or putting initialised <code>const</code> data in NOLOAD output sections:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/q/30032468/3581917\">&quot;Section type conflict&quot; due to macro definition in GCC 4.8.2</a></li>\n</ul>\n\n<p>... or remain a mystery as to the cause and may be related:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/q/30005764/3581917\">Section type conflict for identically defined variables</a></li>\n</ul>\n\n<p>None of the above appear to have an answer that I can apply to issue in this question, as far as I can tell.</p>\n"}, {"tags": ["c", "memory-management"], "comments": [{"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 4, "creation_date": 1430915176, "post_id": 30076669, "comment_id": 48266616, "body": "What makes you think it does not do the same thing? Also warning: when calling <code>sizeof</code> in <code>malloc</code> (and the like) <a href=\"http://stackoverflow.com/a/17258659/1151654\">you should always write it</a> as <code>ptr = malloc(sizeof(*ptr) * ...);</code> instead of <code>ptr = malloc(sizeof(ptrtype*) * ...);</code>. Second warning: You <a href=\"http://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">should not cast</a> the return of malloc."}, {"owner": {"reputation": 192274, "user_id": 36565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ccfec45e3fba785daf0e89a797c9216?s=128&d=identicon&r=PG", "display_name": "David Rodr&#237;guez - dribeas", "link": "https://stackoverflow.com/users/36565/david-rodr%c3%adguez-dribeas"}, "edited": false, "score": 2, "creation_date": 1430915188, "post_id": 30076669, "comment_id": 48266628, "body": "Why do you think the latter cannot be done?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1430915256, "post_id": 30076669, "comment_id": 48266693, "body": "Start by making your code actually <i>compilable</i>. <code>free A</code>?"}, {"owner": {"reputation": 192274, "user_id": 36565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ccfec45e3fba785daf0e89a797c9216?s=128&d=identicon&r=PG", "display_name": "David Rodr&#237;guez - dribeas", "link": "https://stackoverflow.com/users/36565/david-rodr%c3%adguez-dribeas"}, "reply_to_user": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 3, "creation_date": 1430915348, "post_id": 30076669, "comment_id": 48266777, "body": "@Eregrith: The OP made the mistake of tagging with two different languages. Your comment applies completely to C, but the second half is wrong in C++ (not your problem, but the OP&#39;s). Also, I tend to avoid the parenthesis in <code>sizeof</code>, which are not needed for values, but are needed for types. If in code I see parenthesis, I remove them, it either builds or has to be changed. <code>ptr = malloc( sizeof *ptr * ... )</code>"}, {"owner": {"reputation": 11533, "user_id": 1366431, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/YBopF.png?s=128&g=1", "display_name": "Leushenko", "link": "https://stackoverflow.com/users/1366431/leushenko"}, "edited": false, "score": 1, "creation_date": 1430915367, "post_id": 30076669, "comment_id": 48266796, "body": "Re C++: <a href=\"http://stackoverflow.com/questions/4255598/delete-vs-delete\">not even remotely equivalent</a>. This shouldn&#39;t be tagged C++."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1430915513, "post_id": 30076669, "comment_id": 48266899, "body": "@lundin Sir, with all due respect, is that a vaild dupe? Can you please re-check? It seems OP already knows the fundamental of allocation, but his Q was regarding de-allocation which is not covered in the linked Q. Thanks."}, {"owner": {"reputation": 99, "user_id": 4838259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9e729a8ef4324a94cc868cb3b21523d?s=128&d=identicon&r=PG&f=1", "display_name": "Fired from Microsoft", "link": "https://stackoverflow.com/users/4838259/fired-from-microsoft"}, "reply_to_user": {"reputation": 11533, "user_id": 1366431, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/YBopF.png?s=128&g=1", "display_name": "Leushenko", "link": "https://stackoverflow.com/users/1366431/leushenko"}, "edited": false, "score": 2, "creation_date": 1430915517, "post_id": 30076669, "comment_id": 48266908, "body": "@Leushenko C++ is just C with classes"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 7, "creation_date": 1430915576, "post_id": 30076669, "comment_id": 48266959, "body": "@FiredfromMicrosoft ugh...Please..don&#39;t say that. They <b><i>are</i></b> two different languages, and better treated that way. Just having the same type of <i>syntax</i> <b><i>does not</i></b> make two languages <i>at-par</i>."}, {"owner": {"reputation": 2045, "user_id": 4117075, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oiYeG.jpg?s=128&g=1", "display_name": "Mekap", "link": "https://stackoverflow.com/users/4117075/mekap"}, "edited": false, "score": 1, "creation_date": 1430915580, "post_id": 30076669, "comment_id": 48266961, "body": "@FiredfromMicrosoft hey at least your name-tag matches your beliefs."}, {"owner": {"reputation": 609, "user_id": 4810063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cn6VM.jpg?s=128&g=1", "display_name": "Jack Whitham", "link": "https://stackoverflow.com/users/4810063/jack-whitham"}, "edited": false, "score": 3, "creation_date": 1430915751, "post_id": 30076669, "comment_id": 48267091, "body": "In C++, you shouldn&#39;t mix &quot;new&quot;/&quot;malloc&quot; and &quot;delete&quot;/&quot;free&quot;. On some platforms, and for some data types, they behave differently and you&#39;ll get strange behavior. It&#39;s safest to use only one throughout your program."}, {"owner": {"reputation": 1118, "user_id": 2450694, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a101093933ec102d4d27f5018774df48?s=128&d=identicon&r=PG&f=1", "display_name": "Creris", "link": "https://stackoverflow.com/users/2450694/creris"}, "reply_to_user": {"reputation": 609, "user_id": 4810063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cn6VM.jpg?s=128&g=1", "display_name": "Jack Whitham", "link": "https://stackoverflow.com/users/4810063/jack-whitham"}, "edited": false, "score": 0, "creation_date": 1430915782, "post_id": 30076669, "comment_id": 48267115, "body": "@JackWhitham he never asked about new/delete tho, so your comment is unrelated"}, {"owner": {"reputation": 609, "user_id": 4810063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cn6VM.jpg?s=128&g=1", "display_name": "Jack Whitham", "link": "https://stackoverflow.com/users/4810063/jack-whitham"}, "reply_to_user": {"reputation": 1118, "user_id": 2450694, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a101093933ec102d4d27f5018774df48?s=128&d=identicon&r=PG&f=1", "display_name": "Creris", "link": "https://stackoverflow.com/users/2450694/creris"}, "edited": false, "score": 1, "creation_date": 1430915915, "post_id": 30076669, "comment_id": 48267207, "body": "@Creris. He said &quot;I&#39;m tagging this with C++ because the above can be equivalently considered with new and delete&quot;, so I say, watch out, they&#39;re not equivalent."}, {"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 2, "creation_date": 1430916047, "post_id": 30076669, "comment_id": 48267303, "body": "@FiredfromMicrosoft are you just trolling?"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1430917535, "post_id": 30076669, "comment_id": 48268565, "body": "There&#39;s  lot of noise here about C or C++. This is irrelevant. The premise of the question is wrong in both languages. And is wrong for malloc/free as well as new/delete as well as new[]/delete[]."}], "answers": [{"comments": [{"owner": {"reputation": 2717, "user_id": 310888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91e34fb93000c34c068c444aad6d8df5?s=128&d=identicon&r=PG", "display_name": "Leiaz", "link": "https://stackoverflow.com/users/310888/leiaz"}, "edited": false, "score": 0, "creation_date": 1430915804, "post_id": 30076757, "comment_id": 48267132, "body": "Or perhaps the OP meant <code>delete myArray;</code> ? (Which I think would be undefined behavior.)"}, {"owner": {"reputation": 609, "user_id": 4810063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cn6VM.jpg?s=128&g=1", "display_name": "Jack Whitham", "link": "https://stackoverflow.com/users/4810063/jack-whitham"}, "edited": false, "score": 0, "creation_date": 1430916058, "post_id": 30076757, "comment_id": 48267315, "body": "Indeed it would. He&#39;d mean <code>delete[] myArray</code>. That is a particularly fun mistake to make, as sometimes <code>delete myArray</code> will appear to work."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 7, "last_activity_date": 1430915299, "creation_date": 1430915299, "answer_id": 30076757, "question_id": 30076669, "link": "https://stackoverflow.com/questions/30076669/why-can-you-free-delete-an-object-that-was-returned-but-you-cant-free-delete-a/30076757#30076757", "title": "Why can you free/delete an object that was returned, but you can&#39;t free/delete an object that was entered through a parameter?", "body": "<blockquote>\n  <p><em>would not do the same.</em></p>\n</blockquote>\n\n<p>Why'd you think like that?</p>\n\n<p>Maybe, because, after <code>freeArray(myArray);</code>, you are able to access the same, right? </p>\n\n<p>Well, that is a result of  <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"noreferrer\">undefined behaviour</a>.</p>\n\n<p>BTW, in your first snippet, </p>\n\n<pre><code>free myArray;\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>free(myArray);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 2, "last_activity_date": 1430916818, "creation_date": 1430916818, "answer_id": 30077387, "question_id": 30076669, "link": "https://stackoverflow.com/questions/30076669/why-can-you-free-delete-an-object-that-was-returned-but-you-cant-free-delete-a/30077387#30077387", "title": "Why can you free/delete an object that was returned, but you can&#39;t free/delete an object that was entered through a parameter?", "body": "<blockquote>\n  <p>From what I understand, <code>[X]</code> would free all the memory of the array <code>{69, 69, 69}</code> at the memory address <code>myArray</code></p>\n</blockquote>\n\n<p>Right.</p>\n\n<blockquote>\n  <p>but <code>[Y]</code> would not do the same.</p>\n</blockquote>\n\n<p>Wrong.</p>\n\n<p>Your understanding is incorrect. Please indicate where you read that, so that we may endeavour to correct this egregious error at source.</p>\n\n<p><code>[X]</code> and <code>[Y]</code> do the same.</p>\n"}], "owner": {"reputation": 99, "user_id": 4838259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9e729a8ef4324a94cc868cb3b21523d?s=128&d=identicon&r=PG&f=1", "display_name": "Fired from Microsoft", "link": "https://stackoverflow.com/users/4838259/fired-from-microsoft"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "answer_count": 2, "score": -7, "last_activity_date": 1437817877, "creation_date": 1430915071, "last_edit_date": 1437817877, "question_id": 30076669, "link": "https://stackoverflow.com/questions/30076669/why-can-you-free-delete-an-object-that-was-returned-but-you-cant-free-delete-a", "title": "Why can you free/delete an object that was returned, but you can&#39;t free/delete an object that was entered through a parameter?", "body": "<p>From what I understand, </p>\n\n<pre><code>int * createArray ( void )\n{\n     int * arr = (int*)malloc(3*sizeof(int));\n     arr[0] = 69; arr[1] = 69; arr[2]; \n     return arr;\n}\n\nint main ()\n{\n    int * myArray = createArray();\n    free myArray;\n    return 0;\n}\n</code></pre>\n\n<p>would free all the memory of the array <code>{69, 69, 69}</code> at the memory address pointed by <code>myArray</code>, but</p>\n\n<pre><code>void freeArray ( int * A )\n{\n     free A;\n}\n\nint main ()\n{\n    int * myArray = (int*)malloc(3*sizeof(int));\n    myArray[0] = 69; arr[1] = 69; arr[2] = 69; \n    freeArray(myArray);\n    return 0;\n}\n</code></pre>\n\n<p>would not do the same. The reason that this confuses me is because in both cases you are dealing with a copy of the original pointer, but deleting the pointed-to object from that copy only works in the first case. This seems like an inconsistency, but maybe I'm wrong an entirely. Can someone clear this up for me? </p>\n"}, {"tags": ["c", "microchip", "mplab", "xc8", "xc16"], "comments": [{"owner": {"reputation": 24405, "user_id": 99354, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b6ee96d3a17fcbd2bd24210eb7caf441?s=128&d=identicon&r=PG&f=1", "display_name": "Marco van de Voort", "link": "https://stackoverflow.com/users/99354/marco-van-de-voort"}, "edited": false, "score": 0, "creation_date": 1430993539, "post_id": 30076434, "comment_id": 48307691, "body": "__builtin_toggle() iirc. Read the manual."}, {"owner": {"reputation": 635, "user_id": 4795318, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6c50cc029a14f6ad3af57d725e7c751a?s=128&d=identicon&r=PG&f=1", "display_name": "jwsc", "link": "https://stackoverflow.com/users/4795318/jwsc"}, "reply_to_user": {"reputation": 24405, "user_id": 99354, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b6ee96d3a17fcbd2bd24210eb7caf441?s=128&d=identicon&r=PG&f=1", "display_name": "Marco van de Voort", "link": "https://stackoverflow.com/users/99354/marco-van-de-voort"}, "edited": false, "score": 0, "creation_date": 1430996901, "post_id": 30076434, "comment_id": 48310071, "body": "@MarcovandeVoort Could you give me a link/page? haven&#39;t found anything."}], "answers": [{"tags": [], "owner": {"reputation": 24405, "user_id": 99354, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b6ee96d3a17fcbd2bd24210eb7caf441?s=128&d=identicon&r=PG&f=1", "display_name": "Marco van de Voort", "link": "https://stackoverflow.com/users/99354/marco-van-de-voort"}, "is_accepted": true, "score": 0, "last_activity_date": 1431000044, "creation_date": 1431000044, "answer_id": 30100469, "question_id": 30076434, "link": "https://stackoverflow.com/questions/30076434/mplab-xc8-16-builtin-constant-p/30100469#30100469", "title": "mplab xc8/16 builtin_constant_p", "body": "<p>XC16 manual in google and out rolls: <a href=\"http://ww1.microchip.com/downloads/en/DeviceDoc/50002071E.pdf\" rel=\"nofollow\">http://ww1.microchip.com/downloads/en/DeviceDoc/50002071E.pdf</a> appendix G.</p>\n"}, {"tags": [], "owner": {"reputation": 657, "user_id": 3401601, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/NkaeT.jpg?s=128&g=1", "display_name": "EBlake", "link": "https://stackoverflow.com/users/3401601/eblake"}, "is_accepted": false, "score": 0, "last_activity_date": 1431349408, "creation_date": 1431349408, "answer_id": 30168423, "question_id": 30076434, "link": "https://stackoverflow.com/questions/30076434/mplab-xc8-16-builtin-constant-p/30168423#30168423", "title": "mplab xc8/16 builtin_constant_p", "body": "<p>The same document mentioned by @Marco van de Voort has a list of pre-defined macros in section 19.4 that give you information about the compiler environment and the device.</p>\n\n<p>There is also the somewhat undocumented __DEBUG macro which is defined when running under MPLABX in debug mode (MPLABX defines this in the call to the compiler).</p>\n"}, {"tags": [], "owner": {"reputation": 100, "user_id": 4271229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/826ae3488d16edff01efcb95abb998e8?s=128&d=identicon&r=PG&f=1", "display_name": "Cyclops", "link": "https://stackoverflow.com/users/4271229/cyclops"}, "is_accepted": false, "score": -1, "last_activity_date": 1536151155, "creation_date": 1536151155, "answer_id": 52185351, "question_id": 30076434, "link": "https://stackoverflow.com/questions/30076434/mplab-xc8-16-builtin-constant-p/52185351#52185351", "title": "mplab xc8/16 builtin_constant_p", "body": "<p>These are the builtins supported by the XC16 compiler</p>\n\n<p><a href=\"https://i.stack.imgur.com/Rf5JM.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Rf5JM.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>e.g. __builtin_add</p>\n\n<p><a href=\"https://i.stack.imgur.com/WLOWf.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WLOWf.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>For a complete description of the builtins see the MPLAB XC16 compiler user's manual (under \"docs\" folder of compiler installation) or here: <a href=\"http://www.microchip.com/mymicrochip/filehandler.aspx?ddocname=en559023\" rel=\"nofollow noreferrer\">http://www.microchip.com/mymicrochip/filehandler.aspx?ddocname=en559023</a></p>\n"}], "owner": {"reputation": 635, "user_id": 4795318, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6c50cc029a14f6ad3af57d725e7c751a?s=128&d=identicon&r=PG&f=1", "display_name": "jwsc", "link": "https://stackoverflow.com/users/4795318/jwsc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "accepted_answer_id": 30100469, "answer_count": 3, "score": 3, "last_activity_date": 1536151155, "creation_date": 1430914447, "last_edit_date": 1430997235, "question_id": 30076434, "link": "https://stackoverflow.com/questions/30076434/mplab-xc8-16-builtin-constant-p", "title": "mplab xc8/16 builtin_constant_p", "body": "<p>I was searching for this in the mplab compiler users guide but haven't found anything. I am asking it here to confirm that I am not blind or anything:</p>\n\n<p>The GCC compiler provides some very interesting and useful built-in functions like __builtin_constant_p(x) or similar stuff. I have never found anything like that in the microchip compilers and I don't think there is. </p>\n\n<p>So the question: Do Microchip XCxx Compilers provide any non-standard built-in functions apart from the device specific ones (like declaring variables at a given register address or declaring an interrupt function)? </p>\n\n<p><strong>EDIT:</strong> To clarify some more: I am mostly interested in retrieving information from the compiler. A good example would be something like builtin_constant, as it makes information available to the program which is normally not usable. But I do not limit this question to find constant expressions only.</p>\n"}, {"tags": ["c", "string", "pointers", "stdin"], "comments": [{"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 2, "creation_date": 1430914590, "post_id": 30076409, "comment_id": 48266140, "body": "Why don&#39;t you use <code>fscanf(fp, &quot;%d&quot;,&amp;num)</code>?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1430914646, "post_id": 30076409, "comment_id": 48266179, "body": "Three calls to <code>fscanf</code> with the right format string would be enough. No loops, no <code>strtok</code>, nothing complicated."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 1, "creation_date": 1430914720, "post_id": 30076409, "comment_id": 48266256, "body": "Your code has MANY problems. <code>sscanf(buff, &quot;%s&quot;, &amp;temp);</code> trying to scan a string into a <code>char</code> , using <code>a = (int)token;</code> etc"}, {"owner": {"reputation": 33, "user_id": 4818543, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mP5Eq.png?s=128&g=1", "display_name": "Leane Li", "link": "https://stackoverflow.com/users/4818543/leane-li"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1430917570, "post_id": 30076409, "comment_id": 48268592, "body": "@CoolGuy it seems that <code>fscanf</code> is asking for a FILE pointer, so how can I use it to manipulate with each line?"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1430917659, "post_id": 30076409, "comment_id": 48268670, "body": "Are you redirecting input from a file? If so, use <code>fscanf(stdin, &quot;%d&quot;,&amp;num)</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1430919256, "post_id": 30076409, "comment_id": 48270117, "body": "<code>int h_num, s_num, a, b, c; fscanf(stdin, &quot;%d %d %d %d %d&quot;, &amp;h_num, &amp;s_num, &amp;a, &amp;b, &amp;c);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 0, "creation_date": 1430915044, "post_id": 30076511, "comment_id": 48266503, "body": "<code>strtol()</code> why not <code>atoi</code> ?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 0, "creation_date": 1430915119, "post_id": 30076511, "comment_id": 48266575, "body": "@Eregrith <code>strtol()</code> is more robust, and can differenciate between a valid <code>0</code> input and error case."}, {"owner": {"reputation": 924, "user_id": 4626146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/431cc968166840d065f77f912515b3aa?s=128&d=identicon&r=PG", "display_name": "rdtsc", "link": "https://stackoverflow.com/users/4626146/rdtsc"}, "edited": false, "score": 0, "creation_date": 1430917272, "post_id": 30076511, "comment_id": 48268322, "body": "If you foresee this expanding to recognize more tokens in the future, a little more complicated (but much more robust) solution is Flex and Bison. Or similar lexers/parsers. Windows versions are available too. <a href=\"http://aquamentus.com/flex_bison.html\" rel=\"nofollow noreferrer\">aquamentus.com/flex_bison.html</a>"}, {"owner": {"reputation": 33, "user_id": 4818543, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mP5Eq.png?s=128&g=1", "display_name": "Leane Li", "link": "https://stackoverflow.com/users/4818543/leane-li"}, "edited": false, "score": 0, "creation_date": 1430917324, "post_id": 30076511, "comment_id": 48268375, "body": "@SouravGhosh I was trying to use <code>sscanf</code>in this way: <code>sscanf(buff, &quot;%d&quot;, &amp;h_num)</code>. Then I do <code>printf(&quot;%d&quot;,h_num)</code>. But when I compile it, it says that  <code>h_num</code> was undeclared. What&#39;s the point of that?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 33, "user_id": 4818543, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mP5Eq.png?s=128&g=1", "display_name": "Leane Li", "link": "https://stackoverflow.com/users/4818543/leane-li"}, "edited": false, "score": 0, "creation_date": 1430918491, "post_id": 30076511, "comment_id": 48269454, "body": "@LeaneLi You have declared in the if-block."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 0, "last_activity_date": 1430915076, "last_edit_date": 1430915076, "creation_date": 1430914635, "answer_id": 30076511, "question_id": 30076409, "link": "https://stackoverflow.com/questions/30076409/how-to-read-a-text-file-in-c-and-then-split-each-line-into-tokens/30076511#30076511", "title": "how to read a text file in c and then split each line into tokens?", "body": "<p>In your code, I can see,</p>\n\n<pre><code>int h_num = (int)temp;\n</code></pre>\n\n<p>and</p>\n\n<pre><code>int s_num = (int)temp;\n</code></pre>\n\n<p>No, that is not how you convert an <em>aphanumeric string</em> to <code>int</code>.</p>\n\n<p>You need to use <a href=\"http://linux.die.net/man/3/strtol\" rel=\"nofollow\"><code>strtol()</code></a> for this purpose.</p>\n\n<p>Then,</p>\n\n<pre><code>sscanf(buff, \"%s\", &amp;temp);\n</code></pre>\n\n<p>is wrong. <code>temp</code> is a <code>char</code>, you got to use <code>%c</code> for that.</p>\n\n<p>My suggestion for a better approach:</p>\n\n<ol>\n<li>Read a complete line from file using <a href=\"http://linux.die.net/man/3/fgets\" rel=\"nofollow\"><code>fgets()</code></a></li>\n<li>tokenize the input using <a href=\"http://linux.die.net/man/3/strtok\" rel=\"nofollow\"><code>strtok()</code></a>, using <em>space</em> (<code></code>) as <em>delimiter</em>, then convert the token (if not NULL) to <code>int</code> using <a href=\"http://linux.die.net/man/3/strtol\" rel=\"nofollow\"><code>strtol()</code></a></li>\n<li>continue untill the returned token is NULL</li>\n</ol>\n\n<p>In this case, your code will be much more <em>generic</em>, as don't need to bother seperately about the <em>number</em> of <code>int</code>s present in each line.</p>\n"}], "owner": {"reputation": 33, "user_id": 4818543, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mP5Eq.png?s=128&g=1", "display_name": "Leane Li", "link": "https://stackoverflow.com/users/4818543/leane-li"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1545, "favorite_count": 0, "accepted_answer_id": 30076511, "answer_count": 1, "score": 0, "last_activity_date": 1430915076, "creation_date": 1430914385, "question_id": 30076409, "link": "https://stackoverflow.com/questions/30076409/how-to-read-a-text-file-in-c-and-then-split-each-line-into-tokens", "title": "how to read a text file in c and then split each line into tokens?", "body": "<p>The input text file has some numbers per line, numbers are split by space. The first two lines only got one number, and the following lines got three. What I want to do is read each line of the input and store these numbers.</p>\n\n<p>This is what I've got so far:</p>\n\n<pre><code>    int\n    main(int argc, char *argv[]) {\n        int n = 0;\n        char buff[MAX_STRING_LEN]; //MAX_STRING_LEN is defined as 64\n        while (fgets(buff,MAX_STRING_LEN, stdin) != NULL) {\n            char temp;\n            if (n == 0) {\n                sscanf(buff, \"%s\", &amp;temp);\n                int h_num = (int)temp;\n            } else if (n == 1) {\n                sscanf(buff, \"%s\", &amp;temp);\n                int s_num = (int)temp;\n            } else {\n                sscanf(buff, \"%s\", &amp;temp);\n                char *token;\n                token = strtok(&amp;temp, \" \");\n                int i = 0;\n                int a,b,c;\n                while (token != NULL) {\n                    if (i == 0) {\n                        a = (int)token;\n                        token = strtok(NULL, \" \");\n                    } else if (i == 1) {\n                        b = (int)token;\n                        token = strtok(NULL, \" \");\n                    } else {\n                        c = (int)token;\n                        token = strtok(NULL, \" \");\n                    }\n                    i++;\n                }\n            }\n            n++;\n        }\n        return 0;\n    }\n</code></pre>\n\n<p>The print statement I used to test my code is like:</p>\n\n<pre><code>    printf(\"%d\\n\",h_num);\n    printf(\"%d\\n%d\\n%d\\n\",a,b,c);\n</code></pre>\n\n<p>I created a text file like this:</p>\n\n<pre><code>23\n34\n4 76 91\n</code></pre>\n\n<p>but the output is not what I expected, it's the address of the pointer I think. (I'm stuck with pointer again =( )\nCould someone help me to point out what the problem is? Appreciate it. </p>\n"}, {"tags": ["c++", "c", "arrays", "string", "gcc"], "comments": [{"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 1, "creation_date": 1430913833, "post_id": 30076134, "comment_id": 48265571, "body": "Maybe duplicate of <a href=\"http://stackoverflow.com/q/20694796/1708801\">No compiler error when fixed size char array is initialized without enough room for null terminator</a>"}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1430916125, "post_id": 30076134, "comment_id": 48267367, "body": "I don&#39;t think it is an easy to find duplicate, I only remembered about it because I edited it recently otherwise I probably would have no found it."}], "owner": {"reputation": 277, "user_id": 3035952, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/08b7c9a47ea04061ce45e614ad69ea69?s=128&d=identicon&r=PG&f=1", "display_name": "user3035952", "link": "https://stackoverflow.com/users/3035952/user3035952"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "closed_date": 1430913863, "answer_count": 0, "score": 0, "last_activity_date": 1430916072, "creation_date": 1430913703, "last_edit_date": 1430916072, "question_id": 30076134, "link": "https://stackoverflow.com/questions/30076134/how-to-enable-warnings-for-c-strings-that-are-too-long-for-a-char-array-gcc", "closed_reason": "Duplicate", "title": "How to enable warnings for c-strings that are too long for a char-array (gcc)?", "body": "<p>Following problem: I want to initialize an array of chars with a string literal like this:</p>\n\n<pre><code>char test[6] = \"hello\";\n</code></pre>\n\n<p>The string \"hello\" needs 5 characters + 1 for the terminating 0, so an array of 6 is sufficient. When I try to do this:</p>\n\n<pre><code>char test[4] = \"hello\";\n</code></pre>\n\n<p>I get a compiler warning like this: </p>\n\n<blockquote>\n  <p>warning: initializer-string for array of chars is too long [enabled by default]</p>\n</blockquote>\n\n<p>But when I try this:</p>\n\n<pre><code>char test[5] = \"hello\";\n</code></pre>\n\n<p>no warning is thrown. So obviously the compiler does not use a terminating <code>0</code> for the string in this case, which will cause unexpected behavior in my code. Is there a possibility to activate a warning in the compiler? Or is there some preprocessor-assertion that can find problems like this?\nThe only way I know is not using string literals for initialization but use normal array initialization: </p>\n\n<pre><code>char test[5] = {'h', 'e', 'l', 'l', 'o', '\\0'};\n</code></pre>\n\n<p>This will cause the following warning:</p>\n\n<blockquote>\n  <p>warning: excess elements in array initializer [enabled by default]</p>\n</blockquote>\n\n<p>PS: I know that I can just omit the length of the array in my example like this:</p>\n\n<pre><code>char test[] = \"hello\";\n</code></pre>\n\n<p>But in the real code this is not an option because the max string length is a global constant:</p>\n\n<pre><code>#define MAX_STRING_LEN\nchar string[MAX_STRING_LEN + 1] = \"default_string\";\n</code></pre>\n\n<p>As I know the value of <code>MAX_STRING_LEN</code> I can just manually check that the default strings are not longer than <code>MAX_STRING_LEN</code>, but this is error-prone and if I or some user of the code am/is not careful, this will lead to unexpected behavior so I want the compiler to do this check.</p>\n"}, {"tags": ["python", "c", "ternary-operator"], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 4810368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fff979fdc9ba5274224cc1b42ecbb9a2?s=128&d=identicon&r=PG&f=1", "display_name": "Roy Emmarson", "link": "https://stackoverflow.com/users/4810368/roy-emmarson"}, "edited": false, "score": 1, "creation_date": 1430914211, "post_id": 30076188, "comment_id": 48265866, "body": "In fact in real life we don&#39;t talk in this way... gotobeach if weather == &quot;nice&quot; else stayathome  Rather I speak like... if weather is nice then go to beach else stay at home. Well I would ask my daughter... Weather is good? Ok then go to beach else stay at home.   No problem with your opinion though. I see different people think differently. :)"}], "tags": [], "owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "is_accepted": true, "score": 3, "last_activity_date": 1430913845, "creation_date": 1430913845, "answer_id": 30076188, "question_id": 30076116, "link": "https://stackoverflow.com/questions/30076116/difference-between-c-and-python-ternary-operators/30076188#30076188", "title": "Difference Between C and Python Ternary Operators", "body": "<blockquote>\n  <p>Now my questions are...</p>\n  \n  <p>How Python is more Pythonic here? \"Simple is better than complex\" failed here in my opinion. If I am wrong please clarify me. I want to\n  know what I am missing?</p>\n</blockquote>\n\n<p>The English sentence is </p>\n\n<p><em>we go to the beach if the weather is nice, else we stay at home</em>.</p>\n\n<p>Highlight the right words, leave out the fillers:</p>\n\n<pre><code>gotobeach if weather == \"nice\" else stayathome\n</code></pre>\n\n<p>that looks a lot like valid Python ;)</p>\n\n<blockquote>\n  <p>Execution order of C and Python conditional expression is completely different I see.</p>\n</blockquote>\n\n<p>No. It's not.</p>\n\n<p>First, the line is parsed, then the condition after if is evaluated, then either one of the statements is evaluated.</p>\n"}, {"tags": [], "owner": {"reputation": 745, "user_id": 3075562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba8e36f8b2ba52c2e976c5c00f5f720f?s=128&d=identicon&r=PG&f=1", "display_name": "qwattash", "link": "https://stackoverflow.com/users/3075562/qwattash"}, "is_accepted": false, "score": 1, "last_activity_date": 1430914422, "creation_date": 1430914422, "answer_id": 30076421, "question_id": 30076116, "link": "https://stackoverflow.com/questions/30076116/difference-between-c-and-python-ternary-operators/30076421#30076421", "title": "Difference Between C and Python Ternary Operators", "body": "<p>Excerpt from the <a href=\"https://www.python.org/dev/peps/pep-0308/\" rel=\"nofollow\">PEP 308</a> which defines the conditional expression:</p>\n\n<blockquote>\n  <p>Many C-derived languages use this syntax:</p>\n\n<pre><code>&lt;condition&gt; ? &lt;expression1&gt; : &lt;expression2&gt;\n</code></pre>\n  \n  <p>Eric Raymond even implemented this.  The BDFL rejected this for\n  several reasons: the colon already has many uses in Python (even\n  though it would actually not be ambiguous, because the question\n  mark requires a matching colon); for people not used to C-derived\n  language, it is hard to understand.</p>\n</blockquote>\n\n<p>In the PEP you can find the motivations of the decision, I find those appropriate, however this is just a personal opinion.</p>\n\n<p>The parsing order is not different from C, as said by @Marcus Muller.</p>\n"}], "owner": {"reputation": 103, "user_id": 4810368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fff979fdc9ba5274224cc1b42ecbb9a2?s=128&d=identicon&r=PG&f=1", "display_name": "Roy Emmarson", "link": "https://stackoverflow.com/users/4810368/roy-emmarson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "closed_date": 1430915688, "accepted_answer_id": 30076188, "answer_count": 2, "score": -3, "last_activity_date": 1430914704, "creation_date": 1430913658, "last_edit_date": 1430914704, "question_id": 30076116, "link": "https://stackoverflow.com/questions/30076116/difference-between-c-and-python-ternary-operators", "closed_reason": "Opinion-based", "title": "Difference Between C and Python Ternary Operators", "body": "<p>Well I just read a SOF thread where I see many people are talking about Python's ternary operator. I didn't know that Python has a ternary operator (ternary operator or conditional expression whatever you feel comfort with) equivalent though. So the syntax of Python ternary operator is...</p>\n\n<pre><code>play_golf if sun_shines else stay_dumb\n</code></pre>\n\n<p>Here Python will test the block <code>sun_shines</code> after if. If the block returns <code>true</code> it will execute the block <code>play_golf</code> before if otherwise Python will execute the block <code>stay_dumb</code> after else.</p>\n\n<p>On the other hand I guess C's ternary operator is more readable.</p>\n\n<pre><code>sun_shines ? play_golf : stay_dumb\n</code></pre>\n\n<p>It is like asking a question <code>sun_shines</code>? True? Ok then <code>play_golf</code> otherwise <code>stay_dumb</code>.</p>\n\n<p>Now my questions are...</p>\n\n<ul>\n<li>How Python is Pythonic here? \"Simple is better than complex\" failed here in my opinion. If I am wrong please clarify me. I want to know what I am missing?</li>\n<li>Execution order of C and Python conditional expression is completely different I see. So How it is equivalent of C? In the terms of folding multiple statements into one single expression?</li>\n</ul>\n\n<p><strong>Edit:</strong> I guess I got the answer to my 2nd question... </p>\n\n<p><strong>Python:</strong> <code>true if true else false</code></p>\n\n<p><strong>C:</strong> <code>true ? true : false</code></p>\n"}, {"tags": ["c", "ubuntu", "activemq"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1430913330, "post_id": 30075914, "comment_id": 48265198, "body": "<i>How</i> did you build your program? What flags did you use for the compiler and linker? Did you build it for 32 or 64 bit targets?"}, {"owner": {"reputation": 1203, "user_id": 4400861, "user_type": "registered", "accept_rate": 93, "profile_image": "https://lh4.googleusercontent.com/-8UCNS8HZeso/AAAAAAAAAAI/AAAAAAAAAs0/Sg0T6EGGYy8/photo.jpg?sz=128", "display_name": "Abdessamad Doughri", "link": "https://stackoverflow.com/users/4400861/abdessamad-doughri"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1430919231, "post_id": 30075914, "comment_id": 48270101, "body": "I tried both: gcc  test -c main.c and gcc  test -c main.c -m32"}, {"owner": {"reputation": 1203, "user_id": 4400861, "user_type": "registered", "accept_rate": 93, "profile_image": "https://lh4.googleusercontent.com/-8UCNS8HZeso/AAAAAAAAAAI/AAAAAAAAAs0/Sg0T6EGGYy8/photo.jpg?sz=128", "display_name": "Abdessamad Doughri", "link": "https://stackoverflow.com/users/4400861/abdessamad-doughri"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1430919426, "post_id": 30075914, "comment_id": 48270247, "body": "now I&#39;m just trying with 32bit target"}], "answers": [{"comments": [{"owner": {"reputation": 1203, "user_id": 4400861, "user_type": "registered", "accept_rate": 93, "profile_image": "https://lh4.googleusercontent.com/-8UCNS8HZeso/AAAAAAAAAAI/AAAAAAAAAs0/Sg0T6EGGYy8/photo.jpg?sz=128", "display_name": "Abdessamad Doughri", "link": "https://stackoverflow.com/users/4400861/abdessamad-doughri"}, "edited": false, "score": 0, "creation_date": 1430921653, "post_id": 30078852, "comment_id": 48271941, "body": "for long time i didn&#39;t work with C ;) I forgot to link other resources but when I did it i got those errors:"}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 1, "last_activity_date": 1430920400, "creation_date": 1430920400, "answer_id": 30078852, "question_id": 30075914, "link": "https://stackoverflow.com/questions/30075914/i-can-not-run-c-openwire-client-for-activemq-after-compilation/30078852#30078852", "title": "I can not run C-OpenWire client for ActiveMQ after compilation", "body": "<p>The problem is the <code>-c</code> flag, as it tells <code>gcc</code> to generate an <em>object</em> file and not an executable file.</p>\n\n<p>Remove the <code>-c</code> flag:</p>\n\n<pre><code>gcc main.c -o test\n</code></pre>\n"}], "owner": {"reputation": 1203, "user_id": 4400861, "user_type": "registered", "accept_rate": 93, "profile_image": "https://lh4.googleusercontent.com/-8UCNS8HZeso/AAAAAAAAAAI/AAAAAAAAAs0/Sg0T6EGGYy8/photo.jpg?sz=128", "display_name": "Abdessamad Doughri", "link": "https://stackoverflow.com/users/4400861/abdessamad-doughri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 30078852, "answer_count": 1, "score": 0, "last_activity_date": 1430920400, "creation_date": 1430913151, "last_edit_date": 1592644375, "question_id": 30075914, "link": "https://stackoverflow.com/questions/30075914/i-can-not-run-c-openwire-client-for-activemq-after-compilation", "title": "I can not run C-OpenWire client for ActiveMQ after compilation", "body": "<p>I'm trying to develop client in C for ActiveMQ using OpenWire and after compiling example <a href=\"http://svn.apache.org/repos/asf/activemq/sandbox/openwire-c/src/examples/main.c\" rel=\"nofollow noreferrer\">main</a> for OpenWire ActiveMQ on Ubuntu, when I try to run it I get this error:</p>\n<pre><code>bash: ./test: cannot execute binary file: Exec format error\n</code></pre>\n<p>I've tried it on both ubuntu 32 and 46 bit but it didn't work</p>\n<p>Any Ideas?</p>\n<p>Is there any other C alternative then OpenWire?</p>\n"}, {"tags": ["c++", "c", "gcc"], "comments": [{"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1430916819, "post_id": 30075523, "comment_id": 48267937, "body": "This is surprisingly difficult to search for, I made a guess it was deprecated since it modern gcc does not recognize it."}], "answers": [{"comments": [{"owner": {"reputation": 351, "user_id": 4865908, "user_type": "registered", "accept_rate": 24, "profile_image": "https://i.stack.imgur.com/GXVZJ.jpg?s=128&g=1", "display_name": "vimal prathap", "link": "https://stackoverflow.com/users/4865908/vimal-prathap"}, "edited": false, "score": 0, "creation_date": 1430919717, "post_id": 30075607, "comment_id": 48270445, "body": "Is there any flag in GCC 4.8, so that i can enable &gt;? . Because when i use std::max, i am getting error that max is not part of std or is there any alternate solution exist?"}, {"owner": {"reputation": 151870, "user_id": 1501794, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/VyUv5.jpg?s=128&g=1", "display_name": "Rahul Tripathi", "link": "https://stackoverflow.com/users/1501794/rahul-tripathi"}, "reply_to_user": {"reputation": 351, "user_id": 4865908, "user_type": "registered", "accept_rate": 24, "profile_image": "https://i.stack.imgur.com/GXVZJ.jpg?s=128&g=1", "display_name": "vimal prathap", "link": "https://stackoverflow.com/users/4865908/vimal-prathap"}, "edited": false, "score": 0, "creation_date": 1430920142, "post_id": 30075607, "comment_id": 48270802, "body": "@vimalprathap:- Try to add <code>#include &lt;algorithm&gt;</code>. For reference you can check <a href=\"http://en.cppreference.com/w/cpp/algorithm/max\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/algorithm/max</a>"}], "tags": [], "owner": {"reputation": 151870, "user_id": 1501794, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/VyUv5.jpg?s=128&g=1", "display_name": "Rahul Tripathi", "link": "https://stackoverflow.com/users/1501794/rahul-tripathi"}, "is_accepted": false, "score": 5, "last_activity_date": 1430920533, "last_edit_date": 1430920533, "creation_date": 1430912290, "answer_id": 30075607, "question_id": 30075523, "link": "https://stackoverflow.com/questions/30075523/does-anyone-know-this-mysterious-operator-in-gcc/30075607#30075607", "title": "does anyone know this mysterious operator &quot;&gt;?&quot; in GCC", "body": "<p>I guess it has been removed from GCC version 4.2</p>\n\n<p>The equivalent of <code>a &gt;?= b</code> is <code>a = max(a,b);</code></p>\n\n<p>From the manual</p>\n\n<blockquote>\n  <p>The G++ minimum and maximum operators (\u2018<code>&lt;?</code>\u2019 and \u2018<code>&gt;?</code>\u2019) and their compound forms (\u2018<code>&gt;?=</code>\u2019) and \u2018<code>&lt;?=</code>\u2019) have been deprecated and are now removed from G++. Code using these operators should be modified to use <code>std::min</code> and <code>std::max</code> instead. </p>\n</blockquote>\n\n<p><strong>EDIT:</strong></p>\n\n<p>From your comments, you need to add <code>#include &lt;algorithm&gt;</code> to use the <code>std::max</code> and <code>std::min</code>. You can also check this for <a href=\"http://en.cppreference.com/w/cpp/algorithm/max\" rel=\"nofollow\">reference</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "is_accepted": false, "score": 6, "last_activity_date": 1430932493, "last_edit_date": 1430932493, "creation_date": 1430912320, "answer_id": 30075615, "question_id": 30075523, "link": "https://stackoverflow.com/questions/30075523/does-anyone-know-this-mysterious-operator-in-gcc/30075615#30075615", "title": "does anyone know this mysterious operator &quot;&gt;?&quot; in GCC", "body": "<p>The <em>minimum and maximum operators</em> are a <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Deprecated-Features.html\" rel=\"nofollow\">deprecated gcc extension</a>:</p>\n\n<blockquote>\n  <p>The G++ minimum and maximum operators (\u2018<code>&lt;?</code>\u2019 and \u2018<code>&gt;?</code>\u2019) and their compound forms (\u2018<code>&gt;?=</code>\u2019) and \u2018<code>&lt;?=</code>\u2019) have been deprecated and are now removed from G++. Code using these operators should be modified to use <code>std::min</code> and <code>std::max</code> instead. </p>\n</blockquote>\n\n<p>Here is what the <a href=\"https://gcc.gnu.org/onlinedocs/gcc-3.4.2/gcc/Min-and-Max.html\" rel=\"nofollow\">older documentation</a> says:</p>\n\n<blockquote>\n  <p>It is very convenient to have operators which return the \u201cminimum\u201d or\n  the \u201cmaximum\u201d of two arguments. In GNU C++ (but not in GNU C), </p>\n  \n  <p><code>a &lt;? b</code></p>\n  \n  <blockquote>\n    <p>is the minimum, returning the smaller of the numeric values a and b;</p>\n  </blockquote>\n  \n  <p><code>a &gt;? b</code></p>\n  \n  <blockquote>\n    <p>is the maximum, returning the larger of the numeric values a and b.</p>\n  </blockquote>\n</blockquote>\n\n<p>This had the advantage that it allowed you to avoid macros which could have issues with side-effects if they were not used carefully.</p>\n"}, {"tags": [], "owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "is_accepted": false, "score": 3, "last_activity_date": 1430912325, "creation_date": 1430912325, "answer_id": 30075618, "question_id": 30075523, "link": "https://stackoverflow.com/questions/30075523/does-anyone-know-this-mysterious-operator-in-gcc/30075618#30075618", "title": "does anyone know this mysterious operator &quot;&gt;?&quot; in GCC", "body": "<p>It's a <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Deprecated-Features.html#Deprecated-Features\" rel=\"nofollow\">deprecated non-standard operator</a> which gives the maximum of its operands. GCC no longer supports it.</p>\n\n<p>In C++, this is equivalent to <code>std::max(sizeof(a), sizeof(b))</code>.</p>\n"}], "owner": {"reputation": 351, "user_id": 4865908, "user_type": "registered", "accept_rate": 24, "profile_image": "https://i.stack.imgur.com/GXVZJ.jpg?s=128&g=1", "display_name": "vimal prathap", "link": "https://stackoverflow.com/users/4865908/vimal-prathap"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 378, "favorite_count": 0, "closed_date": 1430912337, "answer_count": 3, "score": 8, "last_activity_date": 1430932493, "creation_date": 1430912036, "last_edit_date": 1430916873, "question_id": 30075523, "link": "https://stackoverflow.com/questions/30075523/does-anyone-know-this-mysterious-operator-in-gcc", "closed_reason": "Duplicate", "title": "does anyone know this mysterious operator &quot;&gt;?&quot; in GCC", "body": "<p>Does anyone know about <code>&gt;?</code> operator? I have a macro with below definition which is throwing error, but I have never seen such an operator till now:</p>\n\n<pre><code>#define MAX_SIZEOF2(a,b)           (sizeof(a) &gt;? sizeof(b))\n</code></pre>\n"}, {"tags": ["c", "c-strings"], "answers": [{"tags": [], "owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "is_accepted": true, "score": 2, "last_activity_date": 1430912170, "creation_date": 1430912170, "answer_id": 30075571, "question_id": 30075520, "link": "https://stackoverflow.com/questions/30075520/scan-and-print-a-string/30075571#30075571", "title": "Scan and Print a string", "body": "<pre><code>char *a;\n</code></pre>\n\n<p>Here, <code>a</code> is just a pointer of type <code>char*</code>. It points to some \"random\" location. There isn't any memory allocated to it. Writing to this invalid memory location invokes <a href=\"http://www.en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">Undefined Behavior</a>. You can write to this location only if</p>\n\n<ol>\n<li>Memory for <code>a</code> is allocated dynamically using <code>malloc</code>/<code>calloc</code>.</li>\n<li><p><code>a</code> points to a valid memory location:</p>\n\n<pre><code>char buffer[100];\na = buffer;\n\n// Now you can write to `a`. \n</code></pre></li>\n</ol>\n\n<p>Here:</p>\n\n<pre><code>char a[50];\n</code></pre>\n\n<p>memory is automatically allocated for <code>a</code> on the stack. So, you can write to this memory location.</p>\n"}, {"comments": [{"owner": {"reputation": 16, "user_id": 4870315, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5LFE_aKIghw/AAAAAAAAAAI/AAAAAAAAABs/WIjvSSS3_Xs/photo.jpg?sz=128", "display_name": "Smarth Katyal", "link": "https://stackoverflow.com/users/4870315/smarth-katyal"}, "edited": false, "score": 0, "creation_date": 1430912516, "post_id": 30075647, "comment_id": 48264618, "body": "So how do i correct my problem? The string that will be entered can range from 1 to 10000 characters and i dont want to waste space by defining it like: <code>char a[10000]</code>."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1430913103, "last_edit_date": 1430913103, "creation_date": 1430912397, "answer_id": 30075647, "question_id": 30075520, "link": "https://stackoverflow.com/questions/30075520/scan-and-print-a-string/30075647#30075647", "title": "Scan and Print a string", "body": "<p><strong>TL:DR</strong>  -- Your First code snippet produces <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behaviour</a>, your second code snippet is valid.</p>\n\n<p><strong>Case 1:</strong></p>\n\n<pre><code>char *a;\nscanf(\"%s\",a);\nprintf(\"%s\",a);\n</code></pre>\n\n<p>Here, <code>a</code> is uninitialized. Using that in <code>scanf()</code> invokes UB.</p>\n\n<p><strong>Case 2:</strong></p>\n\n<pre><code>char a[50];\nscanf(\"%s\",a);\nprintf(\"%s\",a);\n</code></pre>\n\n<p>here, <code>a</code> is properly allocated memory(at the compile time itself). So, it can be used safely with <code>scanf()</code>. </p>\n\n<p>However, i'll suggest to use like</p>\n\n<pre><code>scanf(\"%49s\",a);    \n</code></pre>\n\n<p>to avoid the possible memory overflow.</p>\n"}], "owner": {"reputation": 16, "user_id": 4870315, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5LFE_aKIghw/AAAAAAAAAAI/AAAAAAAAABs/WIjvSSS3_Xs/photo.jpg?sz=128", "display_name": "Smarth Katyal", "link": "https://stackoverflow.com/users/4870315/smarth-katyal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 30075571, "answer_count": 2, "score": -2, "last_activity_date": 1430913103, "creation_date": 1430912030, "last_edit_date": 1430912217, "question_id": 30075520, "link": "https://stackoverflow.com/questions/30075520/scan-and-print-a-string", "title": "Scan and Print a string", "body": "<p>Ive written a very basic code and cant seem to get it to work.</p>\n\n<pre><code>char *a;\nscanf(\"%s\",a);\nprintf(\"%s\",a);\n</code></pre>\n\n<p>Input: aWord</p>\n\n<p>Output: Null</p>\n\n<p>Where am i wrong here?Why am i getting null output?\nI tried doing the following and it works as expected, why is it the case?</p>\n\n<pre><code>char a[50];\nscanf(\"%s\",a);\nprintf(\"%s\",a);\n</code></pre>\n\n<p>Input: aWord</p>\n\n<p>Output: aWord    </p>\n\n<p>I thought declaring a string in c using either of the above ways was equivalent?</p>\n"}, {"tags": ["c", "ssl", "libcurl"], "comments": [{"owner": {"reputation": 43751, "user_id": 93747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbf187b5b45c400649ed7f946e8f00d6?s=128&d=identicon&r=PG", "display_name": "Daniel Stenberg", "link": "https://stackoverflow.com/users/93747/daniel-stenberg"}, "edited": false, "score": 0, "creation_date": 1430913740, "post_id": 30075249, "comment_id": 48265492, "body": "It should work, try this procedure: <a href=\"http://stackoverflow.com/questions/27611193/curl-ssl-with-self-signed-certificate/27611319#27611319\" title=\"curl ssl with self signed certificate\">stackoverflow.com/questions/27611193/&hellip;</a>"}, {"owner": {"reputation": 91, "user_id": 3737648, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/93941f779ba23da3e87583f544a0f1d1?s=128&d=identicon&r=PG&f=1", "display_name": "user3737648", "link": "https://stackoverflow.com/users/3737648/user3737648"}, "reply_to_user": {"reputation": 43751, "user_id": 93747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbf187b5b45c400649ed7f946e8f00d6?s=128&d=identicon&r=PG", "display_name": "Daniel Stenberg", "link": "https://stackoverflow.com/users/93747/daniel-stenberg"}, "edited": false, "score": 0, "creation_date": 1430915467, "post_id": 30075249, "comment_id": 48266867, "body": "I tried it even though I don&#39;t really understand it but the openssl command was : socket: Connection refused connect:errno=111"}, {"owner": {"reputation": 91, "user_id": 3737648, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/93941f779ba23da3e87583f544a0f1d1?s=128&d=identicon&r=PG&f=1", "display_name": "user3737648", "link": "https://stackoverflow.com/users/3737648/user3737648"}, "reply_to_user": {"reputation": 43751, "user_id": 93747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbf187b5b45c400649ed7f946e8f00d6?s=128&d=identicon&r=PG", "display_name": "Daniel Stenberg", "link": "https://stackoverflow.com/users/93747/daniel-stenberg"}, "edited": false, "score": 0, "creation_date": 1430915783, "post_id": 30075249, "comment_id": 48267116, "body": "Okay I tried with the wrong port before it runs on 8443... now I have the server certificate in cacert.pem but I dont get the curl command"}, {"owner": {"reputation": 91, "user_id": 3737648, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/93941f779ba23da3e87583f544a0f1d1?s=128&d=identicon&r=PG&f=1", "display_name": "user3737648", "link": "https://stackoverflow.com/users/3737648/user3737648"}, "reply_to_user": {"reputation": 43751, "user_id": 93747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbf187b5b45c400649ed7f946e8f00d6?s=128&d=identicon&r=PG", "display_name": "Daniel Stenberg", "link": "https://stackoverflow.com/users/93747/daniel-stenberg"}, "edited": false, "score": 0, "creation_date": 1430916211, "post_id": 30075249, "comment_id": 48267424, "body": "I tried the curl command Unable to communicate securely with peer: requested domain name does not match the server&#39;s certificate. is the response"}, {"owner": {"reputation": 43751, "user_id": 93747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbf187b5b45c400649ed7f946e8f00d6?s=128&d=identicon&r=PG", "display_name": "Daniel Stenberg", "link": "https://stackoverflow.com/users/93747/daniel-stenberg"}, "edited": false, "score": 0, "creation_date": 1430916459, "post_id": 30075249, "comment_id": 48267630, "body": "This means your server&#39;s name is not included in its certificate: BAD SERVER."}, {"owner": {"reputation": 91, "user_id": 3737648, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/93941f779ba23da3e87583f544a0f1d1?s=128&d=identicon&r=PG&f=1", "display_name": "user3737648", "link": "https://stackoverflow.com/users/3737648/user3737648"}, "reply_to_user": {"reputation": 43751, "user_id": 93747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbf187b5b45c400649ed7f946e8f00d6?s=128&d=identicon&r=PG", "display_name": "Daniel Stenberg", "link": "https://stackoverflow.com/users/93747/daniel-stenberg"}, "edited": false, "score": 0, "creation_date": 1430916661, "post_id": 30075249, "comment_id": 48267809, "body": "Yeah but when the verification of peer and host is disabled should not it work even with this problem?"}, {"owner": {"reputation": 43751, "user_id": 93747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbf187b5b45c400649ed7f946e8f00d6?s=128&d=identicon&r=PG", "display_name": "Daniel Stenberg", "link": "https://stackoverflow.com/users/93747/daniel-stenberg"}, "edited": false, "score": 0, "creation_date": 1430917544, "post_id": 30075249, "comment_id": 48268571, "body": "You only mentioned CURLOPT_SSL_VERIFYPEER, not CURLOPT_SSL_VERIFYHOST - which is the one that checks the host name thing."}, {"owner": {"reputation": 91, "user_id": 3737648, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/93941f779ba23da3e87583f544a0f1d1?s=128&d=identicon&r=PG&f=1", "display_name": "user3737648", "link": "https://stackoverflow.com/users/3737648/user3737648"}, "reply_to_user": {"reputation": 43751, "user_id": 93747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbf187b5b45c400649ed7f946e8f00d6?s=128&d=identicon&r=PG", "display_name": "Daniel Stenberg", "link": "https://stackoverflow.com/users/93747/daniel-stenberg"}, "edited": false, "score": 0, "creation_date": 1430921726, "post_id": 30075249, "comment_id": 48272007, "body": "I forgot to mentioned it, but it is in the code. Both verifications are disabled"}, {"owner": {"reputation": 43751, "user_id": 93747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbf187b5b45c400649ed7f946e8f00d6?s=128&d=identicon&r=PG", "display_name": "Daniel Stenberg", "link": "https://stackoverflow.com/users/93747/daniel-stenberg"}, "edited": false, "score": 0, "creation_date": 1430925415, "post_id": 30075249, "comment_id": 48274937, "body": "and does &quot;curl -k [site]&quot; also fail?"}, {"owner": {"reputation": 91, "user_id": 3737648, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/93941f779ba23da3e87583f544a0f1d1?s=128&d=identicon&r=PG&f=1", "display_name": "user3737648", "link": "https://stackoverflow.com/users/3737648/user3737648"}, "reply_to_user": {"reputation": 43751, "user_id": 93747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbf187b5b45c400649ed7f946e8f00d6?s=128&d=identicon&r=PG", "display_name": "Daniel Stenberg", "link": "https://stackoverflow.com/users/93747/daniel-stenberg"}, "edited": false, "score": 0, "creation_date": 1430926302, "post_id": 30075249, "comment_id": 48275630, "body": "Response from curl -k localhost:8443 was Empty reply from server"}], "owner": {"reputation": 91, "user_id": 3737648, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/93941f779ba23da3e87583f544a0f1d1?s=128&d=identicon&r=PG&f=1", "display_name": "user3737648", "link": "https://stackoverflow.com/users/3737648/user3737648"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3159, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1431102759, "creation_date": 1430911251, "last_edit_date": 1431102759, "question_id": 30075249, "link": "https://stackoverflow.com/questions/30075249/ssl-connect-error-with-libcurl-after-skip-peer-verification", "title": "SSL Connect error with libcurl after SKIP_PEER_VERIFICATION?", "body": "<p>I am trying to connect to server which demands client authentication. I am doing it in C with libcurl. The problem is when I try to connect I get:\ncurl_easy_perform() failed: SSL connect error\nI read that I should add server certificate to ca-bundle.crt; however server's certificate is self signed so when I add it to ca-bundle I got SSL peer certificate or SSH remote key was not OK. After that I tried do set CURLOPT_SSL_VERIFYPEER to false; but I got the first error curl_easy_perform() failed: SSL connect error\nThis is my current code:</p>\n\n<pre><code>#define SKIP_HOSTNAME_VERIFICATION\n#define SKIP_PEER_VERIFICATION\n\nint authenticate(CURL *curl) {\n    char* pathToCert = \"sslCert.pem\";\n    char* pathToKey = \"privateKey.pem\";\n    curl_easy_setopt(curl, CURLOPT_SSLCERTTYPE, \"PEM\");\n    int res = curl_easy_setopt(curl, CURLOPT_SSLCERT, pathToCert);\n    if (res != CURLE_OK)\n        fprintf(stderr, \"curl_easy_perform() failed: %s\\n\",\n            curl_easy_strerror(res));\n    curl_easy_setopt(curl, CURLOPT_SSLKEY, pathToKey);\n}\n\n\nint main(int argc, char **argv) {\n    CURL *curl;\n    CURLcode res;\n\n    curl_global_init(CURL_GLOBAL_DEFAULT);\n\n    curl = curl_easy_init();\n    if (curl) {\n        curl_easy_setopt(curl, CURLOPT_URL, \"https://localhost:8443/RemSig/status\");\n        authenticate(curl);\n\n#ifdef SKIP_PEER_VERIFICATION\n        /*\n         * If you want to connect to a site who isn't using a certificate that is\n         * signed by one of the certs in the CA bundle you have, you can skip the\n         * verification of the server's certificate. This makes the connection\n         * A LOT LESS SECURE.\n         *\n         * If you have a CA cert for the server stored someplace else than in the\n         * default bundle, then the CURLOPT_CAPATH option might come handy for\n         * you.\n         */\n        curl_easy_setopt(curl, CURLOPT_SSL_VERIFYPEER, 0L);\n#endif\n\n#ifdef SKIP_HOSTNAME_VERIFICATION\n        /*\n         * If the site you're connecting to uses a different host name that what\n         * they have mentioned in their server certificate's commonName (or\n         * subjectAltName) fields, libcurl will refuse to connect. You can skip\n         * this check, but this will make the connection less secure.\n         */\n        curl_easy_setopt(curl, CURLOPT_SSL_VERIFYHOST, 0L);\n#endif\n\n        /* Perform the request, res will get the return code */\n        res = curl_easy_perform(curl);\n        /* Check for errors */\n        if (res != CURLE_OK)\n            fprintf(stderr, \"curl_easy_perform() failed: %s\\n\",\n                curl_easy_strerror(res));\n\n        /* always cleanup */\n        curl_easy_cleanup(curl);\n    }\n\n    curl_global_cleanup();\n\n    return 0;\n}\n</code></pre>\n\n<p>Does someone know where could be problem? The server is running and can be accessed from different client and browser.</p>\n\n<p>EDIT - SOLUTION</p>\n\n<p>After adding curl_easy_setopt(curl, CURLOPT_VERBOSE, 1); to my code I find out that the problem was in certificate path. In path to certificate ./ should be added, otherwise libcurl can not find the certificate.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1430911258, "post_id": 30075066, "comment_id": 48263767, "body": "This question appears to be off-topic because it is implying   <i>&quot;Please write my code for me.&quot;</i>  <a href=\"http://stackoverflow.com/help/on-topic\">On-topic Reference</a>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1430911299, "post_id": 30075066, "comment_id": 48263795, "body": "Welcome to Stack Overflow! Please take the <a href=\"http://stackoverflow.com/tour\">tour</a> and read <a href=\"http://stackoverflow.com/help/how-to-ask\">How to Ask</a> to learn what we expect from questions. Please be aware that we do not provide <i>from-scratch</i> coding service here. :-) Please show us what you&#39;ve tried so far and where you&#39;re stuck."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1430911302, "post_id": 30075066, "comment_id": 48263798, "body": "<a href=\"http://linux.die.net/man/3/sleep\" rel=\"nofollow noreferrer\">sleep</a>? You haven&#39;t actually explained your problem very clearly. Too many unknowns on the requirements of what your desired solution is."}], "answers": [{"tags": [], "owner": {"reputation": 3062, "user_id": 185881, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/031d349e27a3c04ea878413e9af1e62f?s=128&d=identicon&r=PG", "display_name": "ern0", "link": "https://stackoverflow.com/users/185881/ern0"}, "is_accepted": false, "score": 1, "last_activity_date": 1430911222, "creation_date": 1430911222, "answer_id": 30075235, "question_id": 30075066, "link": "https://stackoverflow.com/questions/30075066/file-life-access-program-in-c-using-linux-platform/30075235#30075235", "title": "File Life access program in C using Linux platform", "body": "<p>You should start a thread, which sleeps a while, then deletes the file.</p>\n\n<ul>\n<li>You can use C++ <em>thread class</em>, see <a href=\"http://www.cplusplus.com/reference/thread/thread/\" rel=\"nofollow\">http://www.cplusplus.com/reference/thread/thread/</a></li>\n<li>Or, in plain C, the <em>pthread</em> library <a href=\"https://computing.llnl.gov/tutorials/pthreads/#PthreadsAPI\" rel=\"nofollow\">https://computing.llnl.gov/tutorials/pthreads/#PthreadsAPI</a></li>\n<li>Probably you've already used <code>sleep()</code> before.</li>\n</ul>\n\n<p>Anyway, deleting a file does not affect on already opened files. You can try it in command line, launch two terminals, one with <code>cat &gt;/tmp/myfile</code>, and another with <code>rm /tmp/myfile</code>. The <code>cat</code> will not die upon deleting the file.</p>\n\n<p>Maybe, it's better to rethink this question: what is your goal?</p>\n"}, {"tags": [], "owner": {"reputation": 6076, "user_id": 1541363, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f4f4d315fdcbe1ad0e8c11fa2a177226?s=128&d=identicon&r=PG", "display_name": "askmish", "link": "https://stackoverflow.com/users/1541363/askmish"}, "is_accepted": false, "score": 0, "last_activity_date": 1430911250, "creation_date": 1430911250, "answer_id": 30075248, "question_id": 30075066, "link": "https://stackoverflow.com/questions/30075066/file-life-access-program-in-c-using-linux-platform/30075248#30075248", "title": "File Life access program in C using Linux platform", "body": "<p>The simplest way is to read the file timestamp using <code>stat</code> system call and then keep checking with your current system time, using <code>select</code>, <code>poll</code> or other event based libraries. When they exceed a certain value, you proceed to <code>unlink</code> that file.</p>\n\n<p>And ofcourse you do that in a thread or another process.</p>\n\n<p>Refer <code>man 2 stat</code> and <code>man 2 unlink</code></p>\n"}], "owner": {"reputation": 1, "user_id": 4796831, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xml40cMYHfo/AAAAAAAAAAI/AAAAAAAAAgk/iutwH6BW6bI/photo.jpg?sz=128", "display_name": "waseem rauf", "link": "https://stackoverflow.com/users/4796831/waseem-rauf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "answer_count": 2, "score": -5, "last_activity_date": 1430911250, "creation_date": 1430910723, "question_id": 30075066, "link": "https://stackoverflow.com/questions/30075066/file-life-access-program-in-c-using-linux-platform", "title": "File Life access program in C using Linux platform", "body": "<p>I have made a program in C which is used to delete a file in Linux but I want to apply timer in background for example files will be delete after 5 minutes or 10 minutes or any specified time which is given by the programmer so what should I do for implement a time. </p>\n"}, {"tags": ["c", "sizeof"], "comments": [{"owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "edited": false, "score": 1, "creation_date": 1430910456, "post_id": 30074897, "comment_id": 48263242, "body": "Which part don&#39;t you understand? <code>++</code> or <code>sizeof</code>, or something else?"}, {"owner": {"reputation": 5, "user_id": 4870247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15fdf40b0a09275e11f2ce542e6586a5?s=128&d=identicon&r=PG&f=1", "display_name": "NoobProgNobb", "link": "https://stackoverflow.com/users/4870247/noobprognobb"}, "reply_to_user": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "edited": false, "score": 0, "creation_date": 1430910556, "post_id": 30074897, "comment_id": 48263303, "body": "++resultLen * sizeof(float)"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1430910595, "post_id": 30074897, "comment_id": 48263336, "body": "Don&#39;t cast the result of <code>realloc</code>."}, {"owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "edited": false, "score": 2, "creation_date": 1430910661, "post_id": 30074897, "comment_id": 48263376, "body": "I meant, do you know what <code>++</code> operator does? Do you know what <code>sizeof</code> operator does? Specify exactly which part you don&#39;t understand."}], "answers": [{"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 0, "last_activity_date": 1430910681, "creation_date": 1430910681, "answer_id": 30075049, "question_id": 30074897, "link": "https://stackoverflow.com/questions/30074897/what-does-resultlen-sizeoffloat-mean-and-do/30075049#30075049", "title": "What does ++resultLen * sizeof(float)); mean and do?", "body": "<p>It means: increase the value of <code>resultLen</code> by 1, and then afterwards multiply the new value of <code>resultLen</code> with the number of bytes used by a float.</p>\n"}, {"tags": [], "owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "is_accepted": false, "score": 0, "last_activity_date": 1430910754, "creation_date": 1430910754, "answer_id": 30075078, "question_id": 30074897, "link": "https://stackoverflow.com/questions/30074897/what-does-resultlen-sizeoffloat-mean-and-do/30075078#30075078", "title": "What does ++resultLen * sizeof(float)); mean and do?", "body": "<p>Here</p>\n\n<pre><code>result = (float*)realloc(result, ++resultLen * sizeof(float));\n</code></pre>\n\n<p><code>result</code> is being <code>realloc</code>ed.</p>\n\n<pre><code>++resultLen * sizeof(float)\n</code></pre>\n\n<p>is the same as </p>\n\n<pre><code>(++resultLen) * sizeof(float)\n</code></pre>\n\n<p>because of <a href=\"http://en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B\" rel=\"nofollow\">operator precedence</a>(<code>++</code> has more precedence than <code>*</code>). <code>resultLen</code> is first incremented, and then, this value is multiplied with <code>sizeof(float)</code>.\n<hr>\n<em>Side note</em>: In C, <a href=\"http://www.stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">don't cast the result of <code>malloc</code>/<code>calloc</code>/<code>realloc</code></a>.</p>\n"}, {"tags": [], "owner": {"reputation": 1600, "user_id": 579228, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/12a65897f41d3c7fc778990b078cf762?s=128&d=identicon&r=PG", "display_name": "James", "link": "https://stackoverflow.com/users/579228/james"}, "is_accepted": false, "score": 0, "last_activity_date": 1430910863, "creation_date": 1430910863, "answer_id": 30075115, "question_id": 30074897, "link": "https://stackoverflow.com/questions/30074897/what-does-resultlen-sizeoffloat-mean-and-do/30075115#30075115", "title": "What does ++resultLen * sizeof(float)); mean and do?", "body": "<p>++resultLen is equivalent to (resultLen+1)</p>\n\n<p>so the equation becomes \n(resultLen+1)*sizeof(float);</p>\n\n<p>sizeof(float) is normally 4 but OS and architecture dependent, assuming 4.\nwhich gives:\n4*resultLen + 4.</p>\n\n<p>HTH</p>\n"}, {"comments": [{"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 1, "creation_date": 1430913094, "post_id": 30075164, "comment_id": 48265033, "body": "<code>sizeof</code> is an operator, not a function.  <code>++i</code> evaluates to <code>i+i</code>, and at some point before the next sequence point <code>i</code> will be updated."}], "tags": [], "owner": {"reputation": 21, "user_id": 4865746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6406874eb4f80937185da6aca1dc9735?s=128&d=identicon&r=PG&f=1", "display_name": "Thib", "link": "https://stackoverflow.com/users/4865746/thib"}, "is_accepted": false, "score": 1, "last_activity_date": 1430913666, "last_edit_date": 1430913666, "creation_date": 1430911039, "answer_id": 30075164, "question_id": 30074897, "link": "https://stackoverflow.com/questions/30074897/what-does-resultlen-sizeoffloat-mean-and-do/30075164#30075164", "title": "What does ++resultLen * sizeof(float)); mean and do?", "body": "<p>The operator <strong>sizeof</strong> returns the size of the type passed in parameter on the system you're executing your code. Usually a float would be 4 bytes.</p>\n\n<p>The operator <code>++</code> will increment your variable. If it is placed behind the variable, the variable will be incremented after the arithmetic operation in which it participates. Here it is placed before the variable, so it is incremented before the multiplication.</p>\n\n<p>So here you're reallocating memory space for your \"result\" array, incrementing its size by 1 (float).</p>\n"}], "owner": {"reputation": 5, "user_id": 4870247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15fdf40b0a09275e11f2ce542e6586a5?s=128&d=identicon&r=PG&f=1", "display_name": "NoobProgNobb", "link": "https://stackoverflow.com/users/4870247/noobprognobb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "answer_count": 4, "score": -4, "last_activity_date": 1430913666, "creation_date": 1430910256, "last_edit_date": 1430910406, "question_id": 30074897, "link": "https://stackoverflow.com/questions/30074897/what-does-resultlen-sizeoffloat-mean-and-do", "title": "What does ++resultLen * sizeof(float)); mean and do?", "body": "<p>Can you please explain what <code>++resultLen * sizeof(float)</code> means?    </p>\n\n<pre><code>if (mas[i] &gt; mas[i + 1]) \n{\n    result = (float*)realloc(result, ++resultLen * sizeof(float));\n    result[resultLen - 1] = mas[i];\n}\n</code></pre>\n"}, {"tags": ["c", "struct"], "comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1430911455, "post_id": 30074884, "comment_id": 48263902, "body": "Not possible. C provides no means to detect type of struct at runtime. You need to pass type information manually and fill members manually for each different struct type."}], "answers": [{"tags": [], "owner": {"reputation": 33, "user_id": 4863315, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BXgGJ.jpg?s=128&g=1", "display_name": "Matteo Arella", "link": "https://stackoverflow.com/users/4863315/matteo-arella"}, "is_accepted": false, "score": 1, "last_activity_date": 1430912151, "creation_date": 1430912151, "answer_id": 30075564, "question_id": 30074884, "link": "https://stackoverflow.com/questions/30074884/how-to-create-a-generic-function-which-will-accept-all-types-sizes-of-structures/30075564#30075564", "title": "How to create a generic function which will accept all types/sizes of structures and then fill the members accordingly", "body": "<p>C is a statically typed language, that means that it must know the type of variables at compile time. So you can't do that</p>\n"}], "owner": {"reputation": 1367, "user_id": 2608019, "user_type": "registered", "accept_rate": 22, "profile_image": "https://graph.facebook.com/100004210054966/picture?type=large", "display_name": "Prabhat Kumar Singh", "link": "https://stackoverflow.com/users/2608019/prabhat-kumar-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1431084931, "creation_date": 1430910227, "last_edit_date": 1431084931, "question_id": 30074884, "link": "https://stackoverflow.com/questions/30074884/how-to-create-a-generic-function-which-will-accept-all-types-sizes-of-structures", "title": "How to create a generic function which will accept all types/sizes of structures and then fill the members accordingly", "body": "<p>I want to create a generic function which will accept the address of a structure one at a time(there will be plenty of differrent structures to be passed to this function) and a sql query along with that. This function will then run the query, store the result set, and fill the members of the structure one by one with this result set depending upon whose address is passed in the function.</p>\n\n<p>Any help is much appreciated thanks..</p>\n"}, {"tags": ["c", "analysis", "series", "convergence"], "comments": [{"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 3, "creation_date": 1430910332, "post_id": 30074877, "comment_id": 48263165, "body": "The value of <code>-1&#47;4</code> is zero."}], "answers": [{"tags": [], "owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "is_accepted": true, "score": 0, "last_activity_date": 1430910369, "creation_date": 1430910369, "answer_id": 30074939, "question_id": 30074877, "link": "https://stackoverflow.com/questions/30074877/geometric-series-in-c-wrong-solution/30074939#30074939", "title": "geometric series in c, wrong solution", "body": "<p>Problem right here:</p>\n\n<pre><code>    sum+=pow((-1/4),(n+1)) * pow((0.5-1),n);\n</code></pre>\n\n<p><code>-1</code> is an integer literal, and so is <code>4</code>; hence, <code>(-1/4)</code> is <code>-0</code>, and not <code>-0.25</code> (which was probably what you wanted to use). Use floating point literals like <code>-1.0</code> if you want them in C!</p>\n"}, {"tags": [], "owner": {"reputation": 20105, "user_id": 451540, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/jajjn.png?s=128&g=1", "display_name": "thumbmunkeys", "link": "https://stackoverflow.com/users/451540/thumbmunkeys"}, "is_accepted": false, "score": 0, "last_activity_date": 1430910388, "creation_date": 1430910388, "answer_id": 30074943, "question_id": 30074877, "link": "https://stackoverflow.com/questions/30074877/geometric-series-in-c-wrong-solution/30074943#30074943", "title": "geometric series in c, wrong solution", "body": "<p><code>-1/4</code> will result to <code>0</code> as its an integer division, use floats instead:</p>\n\n<pre><code>     (float)-1/4\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4368, "user_id": 2352158, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/91cd5bff136b9c7608cf986ca729e19a?s=128&d=identicon&r=PG", "display_name": "coincoin", "link": "https://stackoverflow.com/users/2352158/coincoin"}, "is_accepted": false, "score": 0, "last_activity_date": 1430910405, "creation_date": 1430910405, "answer_id": 30074948, "question_id": 30074877, "link": "https://stackoverflow.com/questions/30074877/geometric-series-in-c-wrong-solution/30074948#30074948", "title": "geometric series in c, wrong solution", "body": "<p><code>1/4</code> refers to the euclidian division hence 0 obtained.<br>\nUse <code>sum+=pow((-1.0/4.0),(n+1)) * pow((0.5-1),n);</code> and you get the good results <code>sum= -0.285714</code></p>\n"}], "owner": {"reputation": 9, "user_id": 2432974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a6a4de0546d5a5bc8934a3292a8312b?s=128&d=identicon&r=PG", "display_name": "Oliver Al-Hassani", "link": "https://stackoverflow.com/users/2432974/oliver-al-hassani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 30074939, "answer_count": 3, "score": -1, "last_activity_date": 1430910490, "creation_date": 1430910206, "last_edit_date": 1430910490, "question_id": 30074877, "link": "https://stackoverflow.com/questions/30074877/geometric-series-in-c-wrong-solution", "title": "geometric series in c, wrong solution", "body": "<p>I'm getting a wrong solution for this series: <code>(-1/4)^(n+1)*(z-1)^n</code></p>\n\n<p>For <code>|z-1|&lt;4</code> should the series tend to converge to <code>-1/3+z</code></p>\n\n<p>For <code>z=0.5</code> should be the solution <code>-2/7</code>, but if i try to plot with c, the result is 0...</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nint main(){\n    double sum=0;\n    int n;\n    for(n=0;n&lt;=100000;n++){\n        sum+=pow((-1/4),(n+1)) * pow((0.5-1),n);\n    }\n    printf(\"sum= %f\\n\",sum);\n}\n</code></pre>\n"}]