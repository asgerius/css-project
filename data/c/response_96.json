[{"tags": ["c", "struct", "initializer"], "comments": [{"owner": {"reputation": 3420, "user_id": 675723, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8f525203adb5093c5954b43a5b6420c2?s=128&d=identicon&r=PG", "display_name": "BadZen", "link": "https://stackoverflow.com/users/675723/badzen"}, "edited": false, "score": 0, "creation_date": 1478734933, "post_id": 40517806, "comment_id": 68277335, "body": "Fields of a struct cannot have a different storage class than the struct.   Think of the entire struct as an opaque binary blob with a certain size for the purpose of storage class.  In no case will C compilers be assured of zeroing out them memory in that blob for you without explicitly declaring them static.  Also your variables in the code example have auto scope, not static."}, {"owner": {"reputation": 8084, "user_id": 2896626, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4cd83959d7fe39c658d2e49cfecfe4b6?s=128&d=identicon&r=PG&f=1", "display_name": "Paul92", "link": "https://stackoverflow.com/users/2896626/paul92"}, "edited": false, "score": 0, "creation_date": 1478735039, "post_id": 40517806, "comment_id": 68277374, "body": "Take a look at <a href=\"http://stackoverflow.com/questions/11152160/initializing-a-struct-to-0\" title=\"initializing a struct to 0\">stackoverflow.com/questions/11152160/initializing-a-struct-t&zwnj;&#8203;o-0</a>"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 4, "creation_date": 1478735073, "post_id": 40517806, "comment_id": 68277384, "body": "Empty initializers are technically not allowed in the C standard. Try compiling with <code>-std=c99 -pedantic</code> to see that."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 1, "creation_date": 1478735399, "post_id": 40517806, "comment_id": 68277483, "body": "<code>= {}</code> initializer is something you could see in C++ code. It is illegal in C code."}, {"owner": {"reputation": 5187, "user_id": 4347580, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4f8c13e8f2848fa31c1d684ace8d595c?s=128&d=identicon&r=PG&f=1", "display_name": "null", "link": "https://stackoverflow.com/users/4347580/null"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1478735744, "post_id": 40517806, "comment_id": 68277599, "body": "@AnT this explains why I found so much stuff about C++ when searching for an answer."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 3420, "user_id": 675723, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8f525203adb5093c5954b43a5b6420c2?s=128&d=identicon&r=PG", "display_name": "BadZen", "link": "https://stackoverflow.com/users/675723/badzen"}, "edited": false, "score": 0, "creation_date": 1478736360, "post_id": 40517806, "comment_id": 68277767, "body": "@BadZen: I don&#39;t see how this is realted to the storage class. The whole <code>struct</code> is automatic and the fields don&#39;t have a disfferent storage class."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478736625, "post_id": 40517806, "comment_id": 68277827, "body": "<code>struct</code>s are <i>types` (precisely: _type-specifiers</i>), not variables. That text applies to &quot;variables&quot; (which is a bit sloppy, it should actually refer to <i>objects</i> in general. However, it is exactly like your book says. Don&#39;t confuse the <code>static</code> storage class specifier with <i>static</i> storage duration! Note there is nothing like &quot;static scope&quot;, that is nonsense. Maybe you get a better book or start reading the <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.2.4p1\" rel=\"nofollow noreferrer\">standard</a> which is the only authoritative reference."}, {"owner": {"reputation": 5187, "user_id": 4347580, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4f8c13e8f2848fa31c1d684ace8d595c?s=128&d=identicon&r=PG&f=1", "display_name": "null", "link": "https://stackoverflow.com/users/4347580/null"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478737186, "post_id": 40517806, "comment_id": 68277978, "body": "@Olaf the &quot;static scope&quot; was just my bad translation, sorry. You are spot on that identifying the situation and how the text applies to it was the problem."}], "answers": [{"comments": [{"owner": {"reputation": 5187, "user_id": 4347580, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4f8c13e8f2848fa31c1d684ace8d595c?s=128&d=identicon&r=PG&f=1", "display_name": "null", "link": "https://stackoverflow.com/users/4347580/null"}, "edited": false, "score": 0, "creation_date": 1478736285, "post_id": 40517863, "comment_id": 68277742, "body": "My mistake was to skip &quot;static&quot; in the text and thus making false assumptions how it would apply to the code at hand. The book actually says storage duration, I just translated it wrong, my bad."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1478737019, "post_id": 40517863, "comment_id": 68277933, "body": "@Olaf: <code>0</code> and zero are synonymous as far as I&#39;m concerned. &quot;Zero&quot; does not mean &quot;all-bits-zero&quot;; it&#39;s just the English word for <code>0</code>."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478737831, "post_id": 40517863, "comment_id": 68278138, "body": "@Olaf: How about &quot;Note that &quot;zero&quot; is not necessarily all-bits-0&quot;, which I wrote in my answer."}], "tags": [], "owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "is_accepted": true, "score": 5, "last_activity_date": 1478736954, "last_edit_date": 1478736954, "creation_date": 1478735069, "answer_id": 40517863, "question_id": 40517806, "link": "https://stackoverflow.com/questions/40517806/whats-the-difference-between-an-empty-initialiser-and-no-initialiser-for-a-stru/40517863#40517863", "title": "What&#39;s the difference between an empty initialiser and no initialiser for a struct?", "body": "<p>The main difference is that an empty initializer:</p>\n\n<pre><code>struct Struct variable = { };\n</code></pre>\n\n<p>is a syntax error in standard C. (Your compiler might support it as an extension.)</p>\n\n<p>With a valid initializer, such as:</p>\n\n<pre><code>struct Struct variable = { 0 };\n</code></pre>\n\n<p>(<code>... = { 0 }</code> is valid for any type), any members that aren't given explicit values are implicitly initialized to zero.</p>\n\n<p>With no initializer, an object with static storage duration (defined outside any function <em>or</em> with the <code>static</code> keyword) is initialized to zero. An object with automatic storage duration (inside a function and without the <code>static</code> keyword) is not initialized at all, and its contents will be garbage.</p>\n\n<p>And in fact that's just what your C book says:</p>\n\n<blockquote>\n  <p>For variables without an initialiser: All variables with static scope\n  are implicitly initialised with zero (that is all bytes = 0). <strong>All\n  other variables have undefined values!</strong></p>\n</blockquote>\n\n<p>(It should say storage duration rather than scope, and the initialization isn't necessarily bytewise, but apart from that it's essentially correct.)</p>\n\n<p>Note that \"zero\" is not necessarily all-bits-0, though that's a common way to implement it. What the language requires is that each member (for structures), or the first member (for unions), or each element (for arrays) is initialized to zero, with the rule applied recursively until you get down to pointers (initialized to <code>NULL</code>), integers (initialized to <code>0</code>), or floating-point objects (initialized to <code>0.0</code>). Null pointers and floating-point <code>0.0</code> <em>typically</em> are represented as all-bits-0, but the language doesn't require them to be.</p>\n"}], "owner": {"reputation": 5187, "user_id": 4347580, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4f8c13e8f2848fa31c1d684ace8d595c?s=128&d=identicon&r=PG&f=1", "display_name": "null", "link": "https://stackoverflow.com/users/4347580/null"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 40517863, "answer_count": 1, "score": 1, "last_activity_date": 1478736954, "creation_date": 1478734669, "question_id": 40517806, "link": "https://stackoverflow.com/questions/40517806/whats-the-difference-between-an-empty-initialiser-and-no-initialiser-for-a-stru", "title": "What&#39;s the difference between an empty initialiser and no initialiser for a struct?", "body": "<p>I came across some code similar to this:</p>\n\n<pre><code>struct Struct\n{\n    int a;\n    int b;\n};\n\nint main()\n{\n    struct Struct variable = { };   // ???\n    variable.a = 4;\n    variable.b = 6;\n}\n</code></pre>\n\n<p>This is strange. The initialisation of <code>a</code> and <code>b</code> could be happening in the initialiser (between the curly braces). But they aren't. What's the point in keeping the <code>= { }</code> part? The following should be just fine, right?</p>\n\n<pre><code>struct Struct variable;\n</code></pre>\n\n<p>Or is it? <strong>Is having an empty initialiser in any way different to having no initialiser?</strong></p>\n\n<p>My small C handbook states that </p>\n\n<blockquote>\n  <p>For variables <em>without an initialiser</em>: All variables with static scope are implicitly initialised with zero (that is all bytes = 0). All other variables have undefined values!</p>\n</blockquote>\n\n<p>The caveat is that this is not explicitly mentioning <code>struct</code>s.\n<strong>When is the condition of being <em>without an initialiser</em> met for the fields of a <code>struct</code>?</strong> I made the following test:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nstruct Struct\n{\n    int a;\n    int b;\n};\n\nint main()\n{\n    struct Struct foo = { };\n    foo.a = 4;\n\n    struct Struct bar;\n    bar.a = 4;\n\n    printf(\"with list:\\t %i\\n\", foo.b);\n    printf(\"without list:\\t %i\\n\", bar.b);\n}\n</code></pre>\n\n<p>With the result being:</p>\n\n<pre><code>with list:   0\nwithout list:    32765\n</code></pre>\n\n<p>This is confusing. The <code>struct</code> <strong>without</strong> an initialiser list did <strong>not</strong> get initialised with 0, contrary to what my little C book says. </p>\n\n<p>How do these initialiser lists work with structs exactly?</p>\n"}, {"tags": ["c", "string", "algorithm"], "comments": [{"owner": {"reputation": 274, "user_id": 6562313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e59b0bb1e797a141fb9a0da24bc81fab?s=128&d=identicon&r=PG&f=1", "display_name": "DBPriGuy", "link": "https://stackoverflow.com/users/6562313/dbpriguy"}, "edited": false, "score": 1, "creation_date": 1478733566, "post_id": 40517618, "comment_id": 68276924, "body": "Hi, Welcome to StackOverflow! If you could post what code you have so far and what you&#39;ve tried to do, it will really help other users help you."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 3, "creation_date": 1478733782, "post_id": 40517618, "comment_id": 68276993, "body": "<a href=\"http://stackoverflow.com/questions/25347210/program-to-replace-all-substring-in-a-string/\">Program to replace all substring in a string</a>"}], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 7138734, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/rGDLX.jpg?s=128&g=1", "display_name": "kirkosaur", "link": "https://stackoverflow.com/users/7138734/kirkosaur"}, "edited": false, "score": 0, "creation_date": 1478747164, "post_id": 40517715, "comment_id": 68280189, "body": "Thank you so much!! It has gotten me on the right path, but for some reason it only accepts changes when the index is equal to 0 and not where would i want the change to be.  Thank you so much nonetheless!!!"}, {"owner": {"reputation": 581, "user_id": 4262466, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XhG84-oBmnI/AAAAAAAAAAI/AAAAAAAAAEo/GjZMY1zwcTY/photo.jpg?sz=128", "display_name": "ComradeJoecool", "link": "https://stackoverflow.com/users/4262466/comradejoecool"}, "reply_to_user": {"reputation": 97, "user_id": 7138734, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/rGDLX.jpg?s=128&g=1", "display_name": "kirkosaur", "link": "https://stackoverflow.com/users/7138734/kirkosaur"}, "edited": false, "score": 0, "creation_date": 1479242285, "post_id": 40517715, "comment_id": 68472666, "body": "Could you post your current code for changing the attay, so I can evaluate the algorithm?"}], "tags": [], "owner": {"reputation": 581, "user_id": 4262466, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XhG84-oBmnI/AAAAAAAAAAI/AAAAAAAAAEo/GjZMY1zwcTY/photo.jpg?sz=128", "display_name": "ComradeJoecool", "link": "https://stackoverflow.com/users/4262466/comradejoecool"}, "is_accepted": false, "score": 0, "last_activity_date": 1478734134, "creation_date": 1478734134, "answer_id": 40517715, "question_id": 40517618, "link": "https://stackoverflow.com/questions/40517618/replacing-substring-in-c/40517715#40517715", "title": "Replacing substring in C", "body": "<p>You will need a loop that iterates from the index of where to start making the edit and ends when the index is the length of the substring from the starting point setting the characters all the way. It needs to be careful not to overrun past the length of the original string.</p>\n\n<p>Example</p>\n\n<pre><code>char theString[10] = {'H', 'e', 'l', 'l', 'o', 'W', 'o', 'r', 'l', 'd'};\nchar theSubString[5] = {'E', 'a', 'r', 't', 'h'};\n\nfor (int i = 0; i &lt; 5, i++)\n    theString[5 + i] = theSubString[i];\n</code></pre>\n\n<p>This replaces the desired substring \"World\" with the string \"Earth\"</p>\n\n<p>\"HelloWorld\"\nbecomes\n\"HelloEarth\"</p>\n"}, {"comments": [{"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1478735027, "post_id": 40517736, "comment_id": 68277369, "body": "@kirkosaur , please note that many word processors will use a linked list of strings (words / lines / x-max-length letter groups), instead of one long array. This allows for micro-management of long sections. i.e. this would allow you to replace &quot;Hello&quot;, &quot;World&quot; with &quot;Hello&quot; &quot;Mother&quot; by simply linking &quot;Hello&quot; to the new string (&quot;Mother&quot;) and freeing the &quot;World&quot; string. Each word could have a white space indicator (what comes after it? a space? a new line? nothing?) and empty words can be used for multiple white spaces."}], "tags": [], "owner": {"reputation": 1896, "user_id": 7095601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8eccab5ef8dde840d0f0265caa911544?s=128&d=identicon&r=PG&f=1", "display_name": "Elan Hamburger", "link": "https://stackoverflow.com/users/7095601/elan-hamburger"}, "is_accepted": false, "score": 0, "last_activity_date": 1478734258, "creation_date": 1478734258, "answer_id": 40517736, "question_id": 40517618, "link": "https://stackoverflow.com/questions/40517618/replacing-substring-in-c/40517736#40517736", "title": "Replacing substring in C", "body": "<p>The problem you're facing here is how strings are stored in C. Strings in C are simply stored as an array of <code>char</code>s, with a terminating NULL character (<code>\\0</code>). That information leads to the answer to your question, as well as a problem with what you're trying to do.</p>\n\n<p>The problem is that because strings are saved as arrays, the string that you are trying to insert must be the same length as the string you are removing. Otherwise, if the new string is shorter than the old, you'll end up not fully removing the old string, and if the new string is longer than the old, you'll be overwriting other characters not included in the old string. To implement this so that the strings can be of different lengths, your code is going to have to account for the change in number of letters and shift other letters around in the word accordingly. Don't forget that if you shift letters further down the string, you also have to move the NULL character at the end and that you're not going beyond the end of the array.</p>\n\n<p>The solution, though, is that because it's only an array of characters, individual characters can be accessed (and changed) simply by using array subscripts. If you can find the index of your substring, you can simply copy in your new string letter by letter.</p>\n"}], "owner": {"reputation": 97, "user_id": 7138734, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/rGDLX.jpg?s=128&g=1", "display_name": "kirkosaur", "link": "https://stackoverflow.com/users/7138734/kirkosaur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 156, "favorite_count": 2, "answer_count": 2, "score": 1, "last_activity_date": 1478753286, "creation_date": 1478733429, "last_edit_date": 1478753286, "question_id": 40517618, "link": "https://stackoverflow.com/questions/40517618/replacing-substring-in-c", "title": "Replacing substring in C", "body": "<p>I am a very new programmer and I have been having a hard time figuring this out. I have looked online but I can't seem to find a clear answer. How do I go about replacing a desired substring by another in C?</p>\n\n<p>I basically would like the user to be able to edit their string if they wanted to.</p>\n\n<p>I know how to get the following:</p>\n\n<ul>\n<li><p>The index from where to start making the edit</p></li>\n<li><p>The length of the new substring to be added</p></li>\n</ul>\n\n<p>I was wondering how do I then go about inserting the new substring and deleting the old one?</p>\n\n<p>Any Help would be so appreciated</p>\n\n<p>This is my code:</p>\n\n<pre><code>int length;\nchar firstString[100];\nchar editIndex[100];\nchar newString[100]; \nChar editedString[100];\n\nprintf(\"Enter your string: \\n\");\nfgets(firstString, 100, stdin);\n\nprintf(\"Enter the word from which you would like to start editing: \\n\");\nfgets(editIndex, 100, stdin);\n\nprintf(\"What substring would you like there instead?\\n\");\nfgets(newString, 100, stdin);\n\nlength = strlen (newString);\n</code></pre>\n\n<p>This is where I get confused, I have the index from where to start the index (the first character of the word, and I know how long the edit is. I just don't know how to delete the original character(s) that were there and replace it by the new ones. I thought of using a for loop but I am not sure it would work.  </p>\n\n<p>This is what I would like to have as an end result:</p>\n\n<pre><code>printf(\"%s\", editedString);  \n</code></pre>\n\n<p>and then this printing the edit the user has made.</p>\n"}, {"tags": ["c++", "c", "arrays"], "comments": [{"owner": {"reputation": 92, "user_id": 3065863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/94N6G.jpg?s=128&g=1", "display_name": "bgeschka", "link": "https://stackoverflow.com/users/3065863/bgeschka"}, "edited": false, "score": 1, "creation_date": 1478733187, "post_id": 40517544, "comment_id": 68276779, "body": "you&#39;re missing the 2nd index to the assentosP array, try to compare like: if (assentosP[selecao][0] == &#39;O&#39;) and you should get it"}, {"owner": {"reputation": 1062, "user_id": 3722896, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1844152530/picture?type=large", "display_name": "woockashek", "link": "https://stackoverflow.com/users/3722896/woockashek"}, "edited": false, "score": 0, "creation_date": 1478735123, "post_id": 40517544, "comment_id": 68277401, "body": "Not related to your problem, but quite important. It&#39;s better to use english names for variables/methods/classes names, especially when you decide to share your code globally. In this simple example it&#39;s not a big deal but in general non-english code is harder to understand for most of SO users."}, {"owner": {"reputation": 7332, "user_id": 1641198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/815c90f5e93c176813333043e3d3d880?s=128&d=identicon&r=PG", "display_name": "DrC", "link": "https://stackoverflow.com/users/1641198/drc"}, "edited": false, "score": 1, "creation_date": 1478736431, "post_id": 40517544, "comment_id": 68277785, "body": "You probably want your range check to be &#39;selecao &gt;= 0 &amp;&amp; selecao &lt; 4&#39; as well."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7138732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f3a7808aef5847c81c2484dc23d6716?s=128&d=identicon&r=PG&f=1", "display_name": "Jo Viktor", "link": "https://stackoverflow.com/users/7138732/jo-viktor"}, "edited": false, "score": 0, "creation_date": 1478733555, "post_id": 40517616, "comment_id": 68276917, "body": "That&#39;s interesting. Do you have any idea of what I should use? assentosP[selecao][] also doesn&#39;t work. I&#39;m new to C"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 13, "user_id": 7138732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f3a7808aef5847c81c2484dc23d6716?s=128&d=identicon&r=PG&f=1", "display_name": "Jo Viktor", "link": "https://stackoverflow.com/users/7138732/jo-viktor"}, "edited": false, "score": 0, "creation_date": 1478733590, "post_id": 40517616, "comment_id": 68276932, "body": "@JoViktor You should select a row of the array using it as the first index."}, {"owner": {"reputation": 13, "user_id": 7138732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f3a7808aef5847c81c2484dc23d6716?s=128&d=identicon&r=PG&f=1", "display_name": "Jo Viktor", "link": "https://stackoverflow.com/users/7138732/jo-viktor"}, "edited": false, "score": 0, "creation_date": 1478733795, "post_id": 40517616, "comment_id": 68276997, "body": "I see. I&#39;m using a scanf(&quot;%d&quot;, selecao) that would filter by number. for instance, if the guy picks &quot;5&quot;, then it would go to position 5 of the array. Should I use 1 scanf for the row and then 1 scanf for the column?"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 13, "user_id": 7138732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f3a7808aef5847c81c2484dc23d6716?s=128&d=identicon&r=PG&f=1", "display_name": "Jo Viktor", "link": "https://stackoverflow.com/users/7138732/jo-viktor"}, "edited": false, "score": 0, "creation_date": 1478733808, "post_id": 40517616, "comment_id": 68277002, "body": "@JoViktor as the array has only three rows and only two of them have actual values then you can write either assentosP[0][selecao] or assentosP[1][selecao][ Of course you can also write assentosP[2][selecao]  but all elements of the row are equal to &#39;\\0&#39;"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 13, "user_id": 7138732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f3a7808aef5847c81c2484dc23d6716?s=128&d=identicon&r=PG&f=1", "display_name": "Jo Viktor", "link": "https://stackoverflow.com/users/7138732/jo-viktor"}, "edited": false, "score": 0, "creation_date": 1478733924, "post_id": 40517616, "comment_id": 68277035, "body": "@JoViktor You can use it like assentosP[selecao / 4][selecao % 4]]"}, {"owner": {"reputation": 13, "user_id": 7138732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f3a7808aef5847c81c2484dc23d6716?s=128&d=identicon&r=PG&f=1", "display_name": "Jo Viktor", "link": "https://stackoverflow.com/users/7138732/jo-viktor"}, "edited": false, "score": 0, "creation_date": 1478734147, "post_id": 40517616, "comment_id": 68277095, "body": "I see, thanks! What about &quot;the array is declared as having 3 elements&quot;? Doesn&#39;t that array have 8 elements?"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 13, "user_id": 7138732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f3a7808aef5847c81c2484dc23d6716?s=128&d=identicon&r=PG&f=1", "display_name": "Jo Viktor", "link": "https://stackoverflow.com/users/7138732/jo-viktor"}, "edited": false, "score": 0, "creation_date": 1478734269, "post_id": 40517616, "comment_id": 68277128, "body": "@JoViktor It is a typo.:)"}, {"owner": {"reputation": 13, "user_id": 7138732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f3a7808aef5847c81c2484dc23d6716?s=128&d=identicon&r=PG&f=1", "display_name": "Jo Viktor", "link": "https://stackoverflow.com/users/7138732/jo-viktor"}, "edited": false, "score": 0, "creation_date": 1478734553, "post_id": 40517616, "comment_id": 68277224, "body": "Now I remember. I must declare the array as [1] for it to have 2 rows, right? because it counts from 0"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 13, "user_id": 7138732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f3a7808aef5847c81c2484dc23d6716?s=128&d=identicon&r=PG&f=1", "display_name": "Jo Viktor", "link": "https://stackoverflow.com/users/7138732/jo-viktor"}, "edited": false, "score": 0, "creation_date": 1478734606, "post_id": 40517616, "comment_id": 68277241, "body": "@JoViktor You can declared as many rows as you like. It has nothing common with the comment to your question."}, {"owner": {"reputation": 13, "user_id": 7138732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f3a7808aef5847c81c2484dc23d6716?s=128&d=identicon&r=PG&f=1", "display_name": "Jo Viktor", "link": "https://stackoverflow.com/users/7138732/jo-viktor"}, "edited": false, "score": 0, "creation_date": 1478735158, "post_id": 40517616, "comment_id": 68277410, "body": "I mean, I want it to have 2 rows. So I should declare as [1], right?"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 13, "user_id": 7138732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f3a7808aef5847c81c2484dc23d6716?s=128&d=identicon&r=PG&f=1", "display_name": "Jo Viktor", "link": "https://stackoverflow.com/users/7138732/jo-viktor"}, "edited": false, "score": 0, "creation_date": 1478735304, "post_id": 40517616, "comment_id": 68277449, "body": "@JoViktor If an declaration of an array you gave to specify the number of elements if ithere are no initializers or the number of initializers less then the number of elements of array. So if you want to have 2 rows then you have to specify 2 in the array definition. What is unclear? Reread my answer."}, {"owner": {"reputation": 13, "user_id": 7138732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f3a7808aef5847c81c2484dc23d6716?s=128&d=identicon&r=PG&f=1", "display_name": "Jo Viktor", "link": "https://stackoverflow.com/users/7138732/jo-viktor"}, "edited": false, "score": 0, "creation_date": 1478735575, "post_id": 40517616, "comment_id": 68277544, "body": "Sorry, my english is really bad. I think I have everything set up, thanks!"}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 1, "last_activity_date": 1478734252, "last_edit_date": 1478734252, "creation_date": 1478733423, "answer_id": 40517616, "question_id": 40517544, "link": "https://stackoverflow.com/questions/40517544/check-if-something-at-position-x-of-array-is-a-char/40517616#40517616", "title": "Check if something at position X of array is a char", "body": "<p>You defined a two dimensional array</p>\n\n<pre><code>char assentosP[2][4] = {\n     {'D', 'D', 'D', 'D'}, // [0][0], [0][1], [0][2]...\n     {'D', 'D', 'D', 'D'} // [1][0], [1][1], [1][2]...\n     };\n</code></pre>\n\n<p>Thus expression <code>assentosP[selecao]</code> has type <code>char[4]</code>. You may not compare such an array with a character (or an integer after the integer promotion) like this</p>\n\n<pre><code>if (assentosP[selecao] == 'O') {\n</code></pre>\n\n<p>Take into account that if an array declared as having 4 elements then the valid range of indices is [0, 3]. Thus this statement</p>\n\n<pre><code>if (selecao &gt; 0 &amp;&amp; selecao &lt; 5) {\n</code></pre>\n\n<p>looks incorrectly.</p>\n"}], "owner": {"reputation": 13, "user_id": 7138732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f3a7808aef5847c81c2484dc23d6716?s=128&d=identicon&r=PG&f=1", "display_name": "Jo Viktor", "link": "https://stackoverflow.com/users/7138732/jo-viktor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 40517616, "answer_count": 1, "score": 1, "last_activity_date": 1478735634, "creation_date": 1478733032, "last_edit_date": 1478735634, "question_id": 40517544, "link": "https://stackoverflow.com/questions/40517544/check-if-something-at-position-x-of-array-is-a-char", "title": "Check if something at position X of array is a char", "body": "<pre><code>if (selecao &gt; 0 &amp;&amp; selecao &lt; 5) {\n if (assentosP[selecao] == 'O') {\n     printf(\"Test\");\n</code></pre>\n\n<p><code>assentosP</code> is a <code>char</code> array, that has a bunch of either <code>D</code> or <code>O</code> letters (<code>D</code> by default)</p>\n\n<pre><code>char assentosP[2][4] = {\n    {'D', 'D', 'D', 'D'}, // [0][0], [0][1], [0][2]...\n    {'D', 'D', 'D', 'D'} // [1][0], [1][1], [1][2]...\n};\n</code></pre>\n\n<p>What I need to know is a way to make <code>AssentosP</code> find out if the char in position <code>selecao</code> of the array is either <code>D</code> or <code>O</code>.</p>\n\n<p>When I try it, it gives me a error</p>\n\n<blockquote>\n  <p>iso c++ forbids comparison between pointer and integer c</p>\n</blockquote>\n"}, {"tags": ["python", "c", "static", "inline", "ctypes"], "comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 1, "creation_date": 1478733750, "post_id": 40517532, "comment_id": 68276986, "body": "1. If it&#39;s an <code>inline</code> function, it&#39;s likely pretty simple; you could just write it in <code>ctypes</code> directly. 2. Only &quot;workaround&quot; would be to make a new library that exports a function like: &quot;void inlinewrapper(...) { return inlinefunc(...); }` which should inline the original function into an exported name."}, {"owner": {"reputation": 1062, "user_id": 3722896, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1844152530/picture?type=large", "display_name": "woockashek", "link": "https://stackoverflow.com/users/3722896/woockashek"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1478734377, "post_id": 40517532, "comment_id": 68277163, "body": "@ShadowRanger: How you will write a function that uses internal library variables, methods, classes using ctypes? In general it&#39;s not possible."}, {"owner": {"reputation": 109, "user_id": 1076544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3d427b09e29ff8bfcb39cf99806f9a?s=128&d=identicon&r=PG", "display_name": "charon00", "link": "https://stackoverflow.com/users/1076544/charon00"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1478735106, "post_id": 40517532, "comment_id": 68277395, "body": "@ShadowRanger: I am new to <code>ctypes</code> so for clarity: &quot;config&quot; in the first line of the output above is an instance of a ctypes.Structure class with various _fields_ (size, begin, end, etc).  When you say &quot;write it in ctypes directly&quot; do you mean set the Python instance&#39;s members directly with Python code in the same way the inline function would have? (e.g. <code>config.size = 4</code>)"}], "answers": [{"tags": [], "owner": {"reputation": 1062, "user_id": 3722896, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1844152530/picture?type=large", "display_name": "woockashek", "link": "https://stackoverflow.com/users/3722896/woockashek"}, "is_accepted": true, "score": 2, "last_activity_date": 1478733569, "creation_date": 1478733569, "answer_id": 40517640, "question_id": 40517532, "link": "https://stackoverflow.com/questions/40517532/python-ctypes-call-a-static-inline-function-in-a-header-file/40517640#40517640", "title": "Python ctypes - call a static inline function in a header file?", "body": "<p>No it's not possible.</p>\n\n<p>This function not only is not exported by your library, it could not exist at all!</p>\n\n<p>When compiler decides it's worth inlining (keyword is only suggestion)\nfunction body is copy/pasted in all places where normally would be called when not defined inline. </p>\n"}], "owner": {"reputation": 109, "user_id": 1076544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3d427b09e29ff8bfcb39cf99806f9a?s=128&d=identicon&r=PG", "display_name": "charon00", "link": "https://stackoverflow.com/users/1076544/charon00"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 591, "favorite_count": 0, "accepted_answer_id": 40517640, "answer_count": 1, "score": 1, "last_activity_date": 1478733569, "creation_date": 1478732953, "question_id": 40517532, "link": "https://stackoverflow.com/questions/40517532/python-ctypes-call-a-static-inline-function-in-a-header-file", "title": "Python ctypes - call a static inline function in a header file?", "body": "<p>I'm working with Python's ctypes to make calls into the Intel Processor Trace library (libipt) on Linux.  One of the initialization functions in the library, pt_config_init(), is defined as a static inline function in the intel-pt.h header file.  When I try to call this function from my Python code, it throws this error:</p>\n\n<pre><code>  libipt.pt_config_init(byref(config))\nFile \"/usr/lib64/python3.5/ctypes/__init__.py\", line 355, in __getattr__\n  func = self.__getitem__(name)\nFile \"/usr/lib64/python3.5/ctypes/__init__.py\", line 360, in __getitem__\n  func = self._FuncPtr((name_or_ordinal, self))\nAttributeError: /lib64/libipt.so.1.4.0: undefined symbol: pt_config_init\n</code></pre>\n\n<p>This makes sense, as the function isn't compiled into the library but instead accessed by including the header file in the relevant C sources.  Is there a way to call an inline function like this with ctypes, and if so, how?  Any suggested workarounds if not?</p>\n"}, {"tags": ["c++", "c", "while-loop", "decrement"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 3, "creation_date": 1478732830, "post_id": 40517498, "comment_id": 68276654, "body": "When <code>count</code> is zero, <code>while (count--)</code> evaluates to zero, or false, so the loop stops because the condition is no longer true (non-zero).  It could be written more verbosely as <code>while (count-- != 0)</code>. Remember that <code>count--</code> evaluates to the value of <code>count</code> before the decrement; if you want the decrement first, write <code>--count</code> (which returns the decremented value)."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1478733522, "post_id": 40517498, "comment_id": 68276902, "body": "What do you mean &quot;no reason&quot; ? The loop condition of <code>0</code> is not a good enough reason?"}, {"owner": {"reputation": 19, "user_id": 1256053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a42989cecf5c96c39cdd166fdb70fe0?s=128&d=identicon&r=PG", "display_name": "user1256053", "link": "https://stackoverflow.com/users/1256053/user1256053"}, "edited": false, "score": 0, "creation_date": 1478734419, "post_id": 40517498, "comment_id": 68277181, "body": "I was not thinking about while thinking of count-- as false when it reaches 0."}], "answers": [{"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 1, "last_activity_date": 1478733497, "creation_date": 1478733497, "answer_id": 40517626, "question_id": 40517498, "link": "https://stackoverflow.com/questions/40517498/why-does-the-while-loop-stop-at-0-in-this-code/40517626#40517626", "title": "Why does the while loop stop at 0 in this code?", "body": "<blockquote>\n  <p>however when count reaches 0, it stops</p>\n</blockquote>\n\n<p>This is wrong conclusion, it stops when <code>count</code> reaches -1 and you can check it if you put print statement right after the loop. It does not execute loop body in that case, but that is how loop works.</p>\n"}, {"tags": [], "owner": {"reputation": 865, "user_id": 7065110, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/j7huq.jpg?s=128&g=1", "display_name": "Ludonope", "link": "https://stackoverflow.com/users/7065110/ludonope"}, "is_accepted": false, "score": 0, "last_activity_date": 1478735127, "creation_date": 1478735127, "answer_id": 40517879, "question_id": 40517498, "link": "https://stackoverflow.com/questions/40517498/why-does-the-while-loop-stop-at-0-in-this-code/40517879#40517879", "title": "Why does the while loop stop at 0 in this code?", "body": "<p>The <code>--</code> operator used after a variable applies last. When count is zero (evaluated as false), the condition is false, then it applies <code>count--</code> (so count is -1) and then exit the loop.</p>\n\n<p>For your culture, you can do <code>--count</code>, it will decrement <code>count</code> before checking the condition.</p>\n"}], "owner": {"reputation": 19, "user_id": 1256053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a42989cecf5c96c39cdd166fdb70fe0?s=128&d=identicon&r=PG", "display_name": "user1256053", "link": "https://stackoverflow.com/users/1256053/user1256053"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1676, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1478735127, "creation_date": 1478732728, "question_id": 40517498, "link": "https://stackoverflow.com/questions/40517498/why-does-the-while-loop-stop-at-0-in-this-code", "title": "Why does the while loop stop at 0 in this code?", "body": "<pre><code>#include &lt;stdio.h&gt;\n\n/* function declaration */\nvoid func(void);\n\nstatic int count = 5; /* global variable */\n\nmain() {\n\n   while(count--) {\n  func();\n}\n\nreturn 0;\n}\n\n/* function definition */\nvoid func( void ) {\n\nstatic int i = 5; /* local static variable */\ni++;\n\nprintf(\"i is %d and count is %d\\n\", i, count);\n}\n</code></pre>\n\n<p>I am looking at the while loop and there is no reason as to why it should stop at 0 however when count reaches 0, it stops. I try to set count as 0, and use -- and it went to -1 so there's no reason why this should stop at 0 from what I can see.</p>\n"}, {"tags": ["c", "linux", "file", "unix", "audio"], "comments": [{"owner": {"reputation": 71, "user_id": 3237870, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fa82004ac2bd61a6e757b50ee53c8fe8?s=128&d=identicon&r=PG&f=1", "display_name": "duckvader", "link": "https://stackoverflow.com/users/3237870/duckvader"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1478732288, "post_id": 40517309, "comment_id": 68276458, "body": "The contents of the file which are read"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1478732302, "post_id": 40517309, "comment_id": 68276465, "body": "Where are they read?"}, {"owner": {"reputation": 71, "user_id": 3237870, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fa82004ac2bd61a6e757b50ee53c8fe8?s=128&d=identicon&r=PG&f=1", "display_name": "duckvader", "link": "https://stackoverflow.com/users/3237870/duckvader"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1478732318, "post_id": 40517309, "comment_id": 68276474, "body": "On the server side. added snippet in code"}, {"owner": {"reputation": 1014, "user_id": 6047952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a56a0a74a9848b8796170a9bce83e9fa?s=128&d=identicon&r=PG", "display_name": "infixed", "link": "https://stackoverflow.com/users/6047952/infixed"}, "edited": false, "score": 0, "creation_date": 1478732413, "post_id": 40517309, "comment_id": 68276512, "body": "and <code>cp file.au &#47;dev&#47;audio</code> does what for you?  Is that audible?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1478732512, "post_id": 40517309, "comment_id": 68276547, "body": "Your <code>fread</code> call seem to be wrong. It should be <code>fread(buf,1, 1000, audioFile)</code>"}, {"owner": {"reputation": 71, "user_id": 3237870, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fa82004ac2bd61a6e757b50ee53c8fe8?s=128&d=identicon&r=PG&f=1", "display_name": "duckvader", "link": "https://stackoverflow.com/users/3237870/duckvader"}, "edited": false, "score": 0, "creation_date": 1478732552, "post_id": 40517309, "comment_id": 68276564, "body": "No, that doesn&#39;t play any sound. However this does: &#39;pacat file.au &gt; /dev/audio&#39;"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1478732650, "post_id": 40517309, "comment_id": 68276598, "body": "Well, I guess dumping a raw binary data without any timing information won&#39;t yield any good."}, {"owner": {"reputation": 71, "user_id": 3237870, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fa82004ac2bd61a6e757b50ee53c8fe8?s=128&d=identicon&r=PG&f=1", "display_name": "duckvader", "link": "https://stackoverflow.com/users/3237870/duckvader"}, "edited": false, "score": 0, "creation_date": 1478732690, "post_id": 40517309, "comment_id": 68276615, "body": "The syntax of fread is correct. I nead 1 block of size 1000"}, {"owner": {"reputation": 71, "user_id": 3237870, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fa82004ac2bd61a6e757b50ee53c8fe8?s=128&d=identicon&r=PG&f=1", "display_name": "duckvader", "link": "https://stackoverflow.com/users/3237870/duckvader"}, "edited": false, "score": 0, "creation_date": 1478732749, "post_id": 40517309, "comment_id": 68276632, "body": "The timing information will be handled later but it should still play right? Thats just not happening"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1478732757, "post_id": 40517309, "comment_id": 68276638, "body": "Second parameter of <code>fread</code> is the <i>size</i> of the elements. Third parameter is the <i>number</i> of elements."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1478732796, "post_id": 40517309, "comment_id": 68276648, "body": "@duckvader What will it play? You just dump all of the information in a single moment. It does not have any duration."}, {"owner": {"reputation": 71, "user_id": 3237870, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fa82004ac2bd61a6e757b50ee53c8fe8?s=128&d=identicon&r=PG&f=1", "display_name": "duckvader", "link": "https://stackoverflow.com/users/3237870/duckvader"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1478732892, "post_id": 40517309, "comment_id": 68276674, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/127752/discussion-between-duckvader-and-eugene-sh\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 3237870, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fa82004ac2bd61a6e757b50ee53c8fe8?s=128&d=identicon&r=PG&f=1", "display_name": "duckvader", "link": "https://stackoverflow.com/users/3237870/duckvader"}, "is_accepted": true, "score": 0, "last_activity_date": 1478738885, "creation_date": 1478738885, "answer_id": 40518382, "question_id": 40517309, "link": "https://stackoverflow.com/questions/40517309/streaming-audio-file-in-c-on-linux/40518382#40518382", "title": "Streaming audio file in C on linux", "body": "<p>The issue seems to be with Ubuntu. I tried the same on a Gentoo installation in my lab and the sound can be heard</p>\n"}], "owner": {"reputation": 71, "user_id": 3237870, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fa82004ac2bd61a6e757b50ee53c8fe8?s=128&d=identicon&r=PG&f=1", "display_name": "duckvader", "link": "https://stackoverflow.com/users/3237870/duckvader"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 0, "accepted_answer_id": 40518382, "answer_count": 1, "score": 0, "last_activity_date": 1478738885, "creation_date": 1478731787, "last_edit_date": 1478732378, "question_id": 40517309, "link": "https://stackoverflow.com/questions/40517309/streaming-audio-file-in-c-on-linux", "title": "Streaming audio file in C on linux", "body": "<p>I have a .au audio file and am reading it in parts using fread. However when i write this to /dev/audio  there is no sound being played. Do I need to do something or is the system supposed to play back as soon as I write to /dev/audio. I am not getting any errors.</p>\n\n<pre><code>    player = open(\"/dev/audio\", O_WRONLY, 0);\n    if (player &lt; 0) \n    {\n     perror(\"Opening /dev/audio failed\\n\");\n     exit(1);\n    }\n    while(1)\n    {\n        //code to read from the file writes to buf 1000 bytes per read\n        //fread(buf,1000, 1, audioFile); //server side\n\n        write(player, buf, 1000);\n    }\n</code></pre>\n"}, {"tags": ["c", "linux", "sockets"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 3, "creation_date": 1478731917, "post_id": 40517238, "comment_id": 68276315, "body": "Those warnings mean you&#39;re missing some <code>#include</code> lines. Fix that first."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1478731973, "post_id": 40517238, "comment_id": 68276334, "body": "You could try turning on the <code>SO_REUSEADDR</code> socket option on <code>defSock</code> via <code>setsockopt()</code>.  You might also consider having the server loop, so as to serve multiple connections via the same listening socket (serially)."}, {"owner": {"reputation": 554, "user_id": 1513863, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/0da7ee4d55fd5f0f2eb6e6e362fd5aae?s=128&d=identicon&r=PG", "display_name": "Karan Jit Singh", "link": "https://stackoverflow.com/users/1513863/karan-jit-singh"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1478732201, "post_id": 40517238, "comment_id": 68276425, "body": "@JohnBollinger, Thanks a lot! adding <code>setsockopt(defSock, SOL_SOCKET, SO_REUSEADDR, &amp;(int){ 1 }, sizeof(int));</code> to the code worked."}, {"owner": {"reputation": 897, "user_id": 3830887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aa739aedfb6760abc3605091e12810e?s=128&d=identicon&r=PG&f=1", "display_name": "TonyB", "link": "https://stackoverflow.com/users/3830887/tonyb"}, "edited": false, "score": 1, "creation_date": 1478736591, "post_id": 40517238, "comment_id": 68277817, "body": "You might also change the second (backlog) argument of &quot;listen()&quot; to: SOMAXCONN ... i.e.: listen(defSock,SOMAXCONN)"}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 1, "creation_date": 1479131129, "post_id": 40517238, "comment_id": 68415737, "body": "Well, you don&#39;t check the return value from the <code>bind(2)</code> and <code>accept(2)</code> system calls.  Your server is probably failing some of these calls.  It is common practice to check the return values of all system calls that are possible to fail."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1479132081, "post_id": 40517238, "comment_id": 68416378, "body": "<code>write(2)</code> is prototyped in <code>&lt;unistd.h&gt;</code>, which you don&#39;t <code>#include</code> in your source file."}], "answers": [{"tags": [], "owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "is_accepted": true, "score": 1, "last_activity_date": 1479134116, "last_edit_date": 1479134116, "creation_date": 1479114811, "answer_id": 40585174, "question_id": 40517238, "link": "https://stackoverflow.com/questions/40517238/client-stops-connecting-to-server-after-2-3-successful-connections-socket-progr/40585174#40585174", "title": "client stops connecting to server after 2-3 successful connections. socket programming in c", "body": "<p>The use of <code>SO_REUSEADDR</code> hides another problem:</p>\n\n<p>Your server is only able to serve one client, and does not cleanly close its listening socket when one client has been served.</p>\n\n<p>To correct this, you should add a <code>while</code> loop in your server in order to allow multiple clients connections. </p>\n\n<p>In your code, I added:</p>\n\n<ul>\n<li>One <code>while</code> loop not to stop after the first client connection,</li>\n<li>One test/<code>perror</code> to stop the server in case of error,</li>\n<li>One <code>close</code> on listening socket for a clean exit.</li>\n</ul>\n\n<p>This is the code:</p>\n\n<pre><code>/* include */\n\nint main(){\n\n    /* init */\n\n    if(listen(defSock,5)==0)\n        printf(\"Listening\\n\");\n    else\n        printf(\"Error\\n\");\n\n    len = sizeof(cadd);\n\n    // while they're no error\n    while (1)\n    {\n        // wait for new connection\n        newSock = accept(defSock, (struct sockaddr *) &amp;cadd, &amp;len);\n\n        // test if client connection succeded\n        if (-1 == newSock)\n        {\n            // something went wrong: kill the server\n            perror(\"accept()\");\n            break\n        }\n        else        \n        {\n            // say hello\n            static const char hello[] = \"Hello, world!\\n\";\n            int n = write(newSock, hello, sizeof hello - 1); /* -1 to exclude the final '\\0' char */\n            if (n &lt; 0)\n                perror(\"write\");\n            close(newSock);\n        }\n    }\n\n    // And close the server listening socket\n    close(defSock);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 554, "user_id": 1513863, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/0da7ee4d55fd5f0f2eb6e6e362fd5aae?s=128&d=identicon&r=PG", "display_name": "Karan Jit Singh", "link": "https://stackoverflow.com/users/1513863/karan-jit-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 40585174, "answer_count": 1, "score": -1, "last_activity_date": 1479363953, "creation_date": 1478731429, "last_edit_date": 1478731827, "question_id": 40517238, "link": "https://stackoverflow.com/questions/40517238/client-stops-connecting-to-server-after-2-3-successful-connections-socket-progr", "title": "client stops connecting to server after 2-3 successful connections. socket programming in c", "body": "<p>I am trying out simple client-server program using socket programming in c. The program works fine when I execute server first and then client but after two to three successful executions, the client stops connecting to the server. This again starts working if I execute the programs after a certain amount of time.</p>\n\n<p>Client code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;string.h&gt;\n\nint main(){\n    int clientSocket,len;\n    char buffer[1024];\n    struct sockaddr_in sadd;\n\n    clientSocket = socket(PF_INET, SOCK_STREAM, 0);\n\n    sadd.sin_family = AF_INET;\n    sadd.sin_port = htons(12345);\n    sadd.sin_addr.s_addr = inet_addr(\"127.0.0.1\");\n    memset(sadd.sin_zero, '\\0', sizeof sadd.sin_zero);  \n\n    len = sizeof sadd;\n    while(connect(clientSocket, (struct sockaddr *) &amp;sadd, len) == -1) {\n        sleep(1);\n        printf(\"trying again..\\n\");\n    }\n\n    read(clientSocket, buffer, sizeof(buffer));\n    printf(\"Data received: %s\",buffer);  \n\n    return 0;\n}\n</code></pre>\n\n<p>Server code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;string.h&gt;\n\nint main(){\n    int defSock, newSock, len;\n    char buffer[1024];\n    struct sockaddr_in sadd, cadd;\n\n\n    socklen_t addr_size;\n\n    defSock = socket(PF_INET, SOCK_STREAM, 0);\n\n    sadd.sin_family = AF_INET;\n    sadd.sin_port = htons(12345);\n    sadd.sin_addr.s_addr = INADDR_ANY;  \n\n    bind(defSock, (struct sockaddr *) &amp;sadd, sizeof(sadd));\n\n    if(listen(defSock,5)==0)\n        printf(\"Listening\\n\");\n    else\n        printf(\"Error\\n\");\n\n    len = sizeof(cadd);\n\n    newSock = accept(defSock, (struct sockaddr *) &amp;cadd, &amp;len);\n    strcpy(buffer,\"Hello World\\n\");\n    int n = write(newSock,buffer,sizeof(buffer));\n\n    close(newSock);\n\n    return 0;\n}\n</code></pre>\n\n<p>Executing client in the terminal multiple times:</p>\n\n<pre><code>[kj@localhost Downloads]$ gcc client.c -o client\nclient.c: In function \u2018main\u2019:\nclient.c:16:25: warning: implicit declaration of function \u2018inet_addr\u2019 [-Wimplicit-function-declaration]\n  sadd.sin_addr.s_addr = inet_addr(\"127.0.0.1\");\n                         ^\nclient.c:21:3: warning: implicit declaration of function \u2018sleep\u2019 [-Wimplicit-function-declaration]\n   sleep(1);\n   ^\nclient.c:25:2: warning: implicit declaration of function \u2018read\u2019 [-Wimplicit-function-declaration]\n  read(clientSocket, buffer, sizeof(buffer));\n  ^\n[kj@localhost Downloads]$ ./client \nData received: Hello World\n[kj@localhost Downloads]$ ./client \ntrying again..\ntrying again..\ntrying again..\ntrying again..\ntrying again..\ntrying again..\ntrying again..\ntrying again..\ntrying again..\n^C\n[kj@localhost Downloads]$ ./client \ntrying again..\ntrying again..\ntrying again..\n^C\n[kj@localhost Downloads]$ ./client \ntrying again..\ntrying again..\ntrying again..\ntrying again..\n^C\n[kj@localhost Downloads]$ \n</code></pre>\n\n<p>Simultaneously executing server on another terminal:</p>\n\n<pre><code>[kj@localhost Downloads]$ gcc server.c -o server\nserver.c: In function \u2018main\u2019:\nserver.c:31:10: warning: implicit declaration of function \u2018write\u2019 [-Wimplicit-function-declaration]\n  int n = write(newSock,buffer,sizeof(buffer));\n          ^\nserver.c:33:2: warning: implicit declaration of function \u2018close\u2019 [-Wimplicit-function-declaration]\n  close(newSock);\n  ^\n[kj@localhost Downloads]$ ./server \nListening\n[kj@localhost Downloads]$ ./server \nListening\n^C\n[kj@localhost Downloads]$ ./server \nListening\n^C\n[kj@localhost Downloads]$ ./server \nListening\n^C\n[kj@localhost Downloads]$ \n</code></pre>\n"}, {"tags": ["python", "c++", "c", "python-embedding"], "comments": [{"owner": {"reputation": 307, "user_id": 2977382, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3bd2926aaeeb439998afe8de517106df?s=128&d=identicon&r=PG&f=1", "display_name": "terminix00", "link": "https://stackoverflow.com/users/2977382/terminix00"}, "edited": false, "score": 0, "creation_date": 1478731480, "post_id": 40517154, "comment_id": 68276128, "body": "Okay, so if anyone runs into this. Don&#39;t replace your PythonPath with your libs. I think the location of the modules are automagically figured out."}, {"owner": {"reputation": 307, "user_id": 2977382, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3bd2926aaeeb439998afe8de517106df?s=128&d=identicon&r=PG&f=1", "display_name": "terminix00", "link": "https://stackoverflow.com/users/2977382/terminix00"}, "edited": false, "score": 0, "creation_date": 1478735267, "post_id": 40517154, "comment_id": 68277435, "body": "New problem is that I have to use WinPython&#39;s python interpreter located in the root directory for my code to run. How do I use that interpreter rather than the interpreter found one level deeper in the Python directory?"}], "owner": {"reputation": 307, "user_id": 2977382, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3bd2926aaeeb439998afe8de517106df?s=128&d=identicon&r=PG&f=1", "display_name": "terminix00", "link": "https://stackoverflow.com/users/2977382/terminix00"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 231, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1478730968, "creation_date": 1478730968, "question_id": 40517154, "link": "https://stackoverflow.com/questions/40517154/python-3-4-c-api-embedding-import-errors-for-modules-that-should-exist", "title": "Python 3.4 C API embedding Import errors for modules that should exist", "body": "<p>I am using <a href=\"http://winpython.sourceforge.net/\" rel=\"nofollow noreferrer\">WinPython's</a> python distribution as my interpreter. It should be able to import all the modules that I need in order to run some example code. I have verified this by running the module using the python.exe included with the distribution.</p>\n\n<p>The problem is that when I set the PythonHome of my variable to be where the python.exe is located and also my PythonPath to the libs folder, then run the module, I am unable to import the modules necessary for the module to run.. My code is shown below..</p>\n\n<pre><code>#include \"Python.h\"\n#include &lt;cwchar&gt;\n#include &lt;string&gt;\n\nint main() {\n\n    wchar_t PythonHome[1024];\n    std::wcsncpy(PythonHome, L\"C:\\\\Users\\\\jchen114\\\\Lasagne\\\\WinPython\\\\WinPython-64bit-3.4.4.1\\\\python-3.4.4.amd64\", 1024);\n\n    wchar_t PythonPath[1024];\n    std::wcsncpy(PythonPath, L\"C:\\\\Users\\\\jchen114\\\\Lasagne\\\\WinPython\\\\WinPython-64bit-3.4.4.1\\\\python-3.4.4.amd64\\\\Lib;C:\\\\Users\\\\jchen114\\\\Lasagne\\\\WinPython\\\\WinPython-64bit-3.4.4.1\\\\python-3.4.4.amd64\\\\Lib\\\\site-packages\", 1024);\n\n    std::string ScriptPath = \"C:\\\\users\\\\jchen114\\\\Lasagne\\\\mnist\\\\mnist.py\";\n\n    Py_SetPythonHome(PythonHome);\n    Py_SetPath(PythonPath);\n\n    Py_Initialize();\n\n    PyObject *pName, *pModule, *pFunc = NULL;\n\n    const char *s = Py_GetVersion();\n    printf(\"v: %s \\n\", s);\n\n    pName = PyUnicode_DecodeFSDefault(\"importlib.machinery\");\n    pModule = PyImport_Import(pName);\n\n\n    if (pModule != NULL) {\n        printf(\"Found module importlib.machinery \\n\");\n        PyObject *f1 = PyObject_GetAttrString(pModule, \"SourceFileLoader\");\n        if (f1) {\n            printf(\"Found SourceFileLoader. \\n\");\n            if (f1 &amp;&amp; PyCallable_Check(f1)) {\n                printf(\"SourceFileLoader  is callable. \\n\");\n\n                PyObject *args = Py_BuildValue(\"ss\", \"mnist\", ScriptPath.c_str());\n                PyObject *SFL = PyObject_CallObject(f1, args);\n\n                if (SFL) {\n                    printf(\"SourceFileLoader called. \\n\");\n                    PyObject *f2 = PyObject_GetAttrString(SFL, \"load_module\");\n                    if (f2) {\n                        printf(\"Load function found \\n\");\n                        if (f2 &amp;&amp; PyCallable_Check(f2)) {\n                            printf(\"Load function callable. \\n\");\n                            PyObject *mnist = PyObject_CallObject(f2, NULL);\n                            if (mnist) {\n                                printf(\"mnist module loaded. \\n\");\n                            }\n                            else {\n                                printf(\"mnist module not loaded. \\n\");\n                                PyErr_Print();\n                            }\n                            Py_XDECREF(mnist);\n                        }\n                    }\n                    else {\n                        printf(\"load function not found. \\n\");\n                    }\n                    Py_XDECREF(f2);\n                }\n                Py_XDECREF(args);\n                Py_XDECREF(SFL);\n            }\n        }\n        else {\n            printf(\"Did not find SourceFileLoader. \\n\");\n        }\n        /*pFunc = PyObject_GetAttrString(pModule, \"main\");\n        if (pFunc &amp;&amp; PyCallable_Check(pFunc)) {\n            printf(\"Found function. \\n\");\n        }*/\n        Py_XDECREF(f1);\n    }\n    else {\n        printf(\"Did not find module. \\n\");\n    }\n\n\n    Py_XDECREF(pName);\n    Py_XDECREF(pModule);\n    Py_XDECREF(pFunc);\n\n    Py_Finalize();\n\n    return 0;\n\n}\n</code></pre>\n\n<p>The module mnist can't be loaded because of this import error:\n<a href=\"https://i.stack.imgur.com/SzrL8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SzrL8.png\" alt=\"enter image description here\"></a></p>\n\n<p>I'm not sure if it is because I haven't included all the modules in my python path. Please advise.</p>\n"}, {"tags": ["c", "pointers", "struct", "pthreads", "void"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1478730237, "post_id": 40516955, "comment_id": 68275692, "body": "<code>my_struct input = (my_struct *) ptr;</code> --&gt; <code>my_struct input = *(my_struct *) ptr;</code>. Also <code>func</code> must return a value."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1478730313, "post_id": 40516955, "comment_id": 68275720, "body": "Learning C by experimentation will lead you to the place you don&#39;t want to get."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1478730838, "post_id": 40516955, "comment_id": 68275896, "body": "Additionally, you may face another problem: main thread might exit before the func thread could start or complete. See this on <a href=\"http://stackoverflow.com/a/40514326/1275169\">how to address it</a>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478730924, "post_id": 40516955, "comment_id": 68275922, "body": "Read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and follow the advice. Note: C is definitively a bad idea for trial&amp;error! Get a good book and learn the language properly."}], "answers": [{"tags": [], "owner": {"reputation": 863, "user_id": 507761, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1a777be80e0c463a139e737821941952?s=128&d=identicon&r=PG", "display_name": "Matthew Read", "link": "https://stackoverflow.com/users/507761/matthew-read"}, "is_accepted": false, "score": 2, "last_activity_date": 1478730547, "last_edit_date": 1478730547, "creation_date": 1478730239, "answer_id": 40517018, "question_id": 40516955, "link": "https://stackoverflow.com/questions/40516955/invalid-initializer-when-passing-a-struct-as-a-void-pointer/40517018#40517018", "title": "Invalid initializer when passing a struct as a void* pointer", "body": "<blockquote>\n  <p><code>my_struct input = (my_struct *) ptr;</code></p>\n</blockquote>\n\n<p>The type of <code>input</code> is <code>my_struct</code>, and you're trying to assign a <code>my_struct *</code> value (a pointer to a <code>my_struct</code>) to it.  The types must match.</p>\n\n<p>Try using a pointer type and dereferencing it (to get a plain <code>my_struct</code> value):</p>\n\n<pre><code>my_struct *input = (my_struct *) ptr;\nj_start = (*input).i_start;\nj_end = (*input).i_end;\n</code></pre>\n\n<p>Or using the pointer itself with the arrow operator:</p>\n\n<pre><code>my_struct *input = (my_struct *) ptr;\nj_start = input-&gt;i_start;\nj_end = input-&gt;i_end;\n</code></pre>\n\n<p>Or you can dereference before assignment:</p>\n\n<pre><code>my_struct input = *((my_struct *) ptr);\nj_start = input.i_start;\nj_end = input.i_end;\n</code></pre>\n\n<p>This syntax can be confusing, so be sure to look up how the <code>*</code> operator works and how it is different from the <code>*</code> used in the variable type.</p>\n"}], "owner": {"reputation": 35, "user_id": 6282181, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/66a6c72cb4419874a02bb06efb73bb1f?s=128&d=identicon&r=PG&f=1", "display_name": "user6282181", "link": "https://stackoverflow.com/users/6282181/user6282181"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 731, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1478730547, "creation_date": 1478729896, "question_id": 40516955, "link": "https://stackoverflow.com/questions/40516955/invalid-initializer-when-passing-a-struct-as-a-void-pointer", "title": "Invalid initializer when passing a struct as a void* pointer", "body": "<p>I'm trying to pass a struct to a function in order to take advantage of multithreading in C. I don't really understand how it works, so I've just tried various syntaxes which give a variety of error messages, so I'm not sure if my particular query has been answered before. I put together the most simple code I can which resembles what I want to do, and it still gives me an error, even if I set it up to match similar examples on this site which apparently have worked for people. I'm hoping I'm just missing something quite simple. Anyway here's the code which won't compile:</p>\n\n<pre><code>#include &lt;pthread.h&gt;\n#include &lt;stdio.h&gt;\n\ntypedef struct {\n    int i_start;\n    int i_end;\n} my_struct;\n\nvoid *func(void *ptr) {\n\n    int j_start;\n    int j_end;\n\n    my_struct input = (my_struct *) ptr;\n    j_start = input.i_start;\n    j_end = input.i_end;\n    printf(\"%d %d\\n\", j_start, j_end);\n\n}\n\nint main() {\n    my_struct qwerty;\n\n    qwerty.i_start = 0;\n    qwerty.i_end = 1;\n\n    pthread_t tid;\n\n    pthread_create(&amp;tid, NULL, func, &amp;qwerty);\n\n    return 0;\n}\n</code></pre>\n\n<p>This particular code gives me a compilation error: </p>\n\n<pre><code>test.c: In function 'func':\ntest.c:14:20: error: invalid initializer\n  my_struct input = (my_struct *) ptr;\n</code></pre>\n\n<p>Like I said, I've tried a few different things but I can't get it right. Thanks for any help.</p>\n"}, {"tags": ["c++", "c", "linux", "visual-studio", "cross-compiling"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478730736, "post_id": 40516757, "comment_id": 68275854, "body": "vmware is not a compiler! So you compiled the source code of Visual-Studio?"}, {"owner": {"reputation": 495, "user_id": 4541331, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/4HzCC.png?s=128&g=1", "display_name": "Sens4", "link": "https://stackoverflow.com/users/4541331/sens4"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478731117, "post_id": 40516757, "comment_id": 68275979, "body": "Of course not. As you have read my question I have set up a virtual machine running Linux. Visual studio remotely compiles the files via gcc..."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478731715, "post_id": 40516757, "comment_id": 68276223, "body": "You should read your headline: &quot;Visual Studio cross compiling with ...&quot;. And pick the language you use. C and C++ are different languages!"}, {"owner": {"reputation": 495, "user_id": 4541331, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/4HzCC.png?s=128&g=1", "display_name": "Sens4", "link": "https://stackoverflow.com/users/4541331/sens4"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478732482, "post_id": 40516757, "comment_id": 68276532, "body": "Thanks for this hint. Didn&#39;t knew that. I have tried both languages and they both produce this error."}], "answers": [{"comments": [{"owner": {"reputation": 495, "user_id": 4541331, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/4HzCC.png?s=128&g=1", "display_name": "Sens4", "link": "https://stackoverflow.com/users/4541331/sens4"}, "edited": false, "score": 0, "creation_date": 1478733270, "post_id": 40517433, "comment_id": 68276816, "body": "Oh okay ^^ I think I mixed it with the &quot;cross platform&quot; tab within vs. Yes, for testing purposes I have created a &quot;hello world&quot; program and when I click on Remote GDB Debugger it builds throws the error but I can run it on my Linux machine."}, {"owner": {"reputation": 1031, "user_id": 6763393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c44926355c84effac26e3a3f1582405a?s=128&d=identicon&r=PG&f=1", "display_name": "stanthomas", "link": "https://stackoverflow.com/users/6763393/stanthomas"}, "reply_to_user": {"reputation": 495, "user_id": 4541331, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/4HzCC.png?s=128&g=1", "display_name": "Sens4", "link": "https://stackoverflow.com/users/4541331/sens4"}, "edited": false, "score": 1, "creation_date": 1478734586, "post_id": 40517433, "comment_id": 68277233, "body": "In the project properties page, Debugging tab, would you try changing the <code>Debugging Mode</code> from <code>gdbserver</code> to <code>gdb</code>, start the application and capture the contents of the Output/Debug window then post them here."}, {"owner": {"reputation": 495, "user_id": 4541331, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/4HzCC.png?s=128&g=1", "display_name": "Sens4", "link": "https://stackoverflow.com/users/4541331/sens4"}, "edited": false, "score": 0, "creation_date": 1478776030, "post_id": 40517433, "comment_id": 68292395, "body": "Oh very weird, now it&#39;s working with gdb. c++ and c code. C code also with gcc. I can also set breakpoints.Is there something I am missing like starting the gdbserver or something else?"}, {"owner": {"reputation": 1031, "user_id": 6763393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c44926355c84effac26e3a3f1582405a?s=128&d=identicon&r=PG&f=1", "display_name": "stanthomas", "link": "https://stackoverflow.com/users/6763393/stanthomas"}, "reply_to_user": {"reputation": 495, "user_id": 4541331, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/4HzCC.png?s=128&g=1", "display_name": "Sens4", "link": "https://stackoverflow.com/users/4541331/sens4"}, "edited": false, "score": 0, "creation_date": 1478779631, "post_id": 40517433, "comment_id": 68294638, "body": "gdbserver uses port 4444"}, {"owner": {"reputation": 1031, "user_id": 6763393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c44926355c84effac26e3a3f1582405a?s=128&d=identicon&r=PG&f=1", "display_name": "stanthomas", "link": "https://stackoverflow.com/users/6763393/stanthomas"}, "reply_to_user": {"reputation": 495, "user_id": 4541331, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/4HzCC.png?s=128&g=1", "display_name": "Sens4", "link": "https://stackoverflow.com/users/4541331/sens4"}, "edited": false, "score": 0, "creation_date": 1478779933, "post_id": 40517433, "comment_id": 68294809, "body": "finger trouble ... does your Linux system have a firewall of other reason why a network port might be blocked? gdd goes over the ssh connection and therefore uses port 22 which is also used for building and you clearly have open and working. gdbserver uses another free port, usually 4444 but VCLinux could pick another. Try setting the <code>Debugger Port Number</code> in the project properties/Debugging page to a port on the Linux target you know to be open and running with gdbserver again."}, {"owner": {"reputation": 495, "user_id": 4541331, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/4HzCC.png?s=128&g=1", "display_name": "Sens4", "link": "https://stackoverflow.com/users/4541331/sens4"}, "edited": false, "score": 0, "creation_date": 1478790461, "post_id": 40517433, "comment_id": 68301568, "body": "I have edit the debugging settings with port = 4444. Then I have written a new entry into iptables to open port 4444 but it still doesn&#39;t work. I have also manual disabled my host (windows) firewall."}, {"owner": {"reputation": 1031, "user_id": 6763393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c44926355c84effac26e3a3f1582405a?s=128&d=identicon&r=PG&f=1", "display_name": "stanthomas", "link": "https://stackoverflow.com/users/6763393/stanthomas"}, "reply_to_user": {"reputation": 495, "user_id": 4541331, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/4HzCC.png?s=128&g=1", "display_name": "Sens4", "link": "https://stackoverflow.com/users/4541331/sens4"}, "edited": false, "score": 1, "creation_date": 1478813586, "post_id": 40517433, "comment_id": 68314251, "body": "Then you&#39;ve got me stumped. But at least you can debug in gdb mode. If you like, you can write up exactly what your system configuration looks like and raise it as an issue on the VCLinux project GitHub site: [<a href=\"https://github.com/Microsoft/VSLinux]\" rel=\"nofollow noreferrer\">github.com/Microsoft/VSLinux]</a>"}, {"owner": {"reputation": 495, "user_id": 4541331, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/4HzCC.png?s=128&g=1", "display_name": "Sens4", "link": "https://stackoverflow.com/users/4541331/sens4"}, "edited": false, "score": 0, "creation_date": 1478830807, "post_id": 40517433, "comment_id": 68319616, "body": "Thanks for your help! ... Yea maybe I will do. I tested it with a bananapi running Debian and it works. Even with gdbserver, so maybe it&#39;s because of using VMware. Might be a bug or so."}], "tags": [], "owner": {"reputation": 1031, "user_id": 6763393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c44926355c84effac26e3a3f1582405a?s=128&d=identicon&r=PG&f=1", "display_name": "stanthomas", "link": "https://stackoverflow.com/users/6763393/stanthomas"}, "is_accepted": false, "score": 0, "last_activity_date": 1478732400, "creation_date": 1478732400, "answer_id": 40517433, "question_id": 40516757, "link": "https://stackoverflow.com/questions/40516757/visual-studio-cross-compiling-with-gcc-gdb-within-vmware-memory-access-error/40517433#40517433", "title": "Visual Studio cross compiling with gcc/gdb within vmware -&gt; memory access error", "body": "<p>To clarify, VCLinux is not a cross-compiler, it simply builds and executes an application on a target Linux system under the control of Visual Studio. There is no need to run as administrator on the Windows host or root on the Linux target (unless your application needs root permissions and even then it's something to to avoid).</p>\n\n<p>Is there a difference between the \"hosting Linux system\" and the \"virtual machine\" you created. I would expect them to be one and the same but the order in which you refer to them is unusual.</p>\n\n<p>You say that your Visual Studio project is building under VCLinux. So, on the Linux target, was a directory for the project created with a sub-directory <code>bin/x32/Debug</code> (or <code>bin/x64/Debug</code>) with an executable <code>&lt;project name&gt;.out</code> (or similar)? In which case all the basic connecting and communication is working fine.\nWhat happens when you log on to the Linux system and run that executable 1)directly from the command line and 2)under gdb ?</p>\n\n<p>Did you set the project as the VS <code>Startup Project</code> (right-click on project)? Does the \"debug\" button on the VS toolbar show <code>Remote GDB Debugger</code>?</p>\n"}], "owner": {"reputation": 495, "user_id": 4541331, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/4HzCC.png?s=128&g=1", "display_name": "Sens4", "link": "https://stackoverflow.com/users/4541331/sens4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 370, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1478732400, "creation_date": 1478728948, "last_edit_date": 1478730970, "question_id": 40516757, "link": "https://stackoverflow.com/questions/40516757/visual-studio-cross-compiling-with-gcc-gdb-within-vmware-memory-access-error", "title": "Visual Studio cross compiling with gcc/gdb within vmware -&gt; memory access error", "body": "<p>I have configured visual studio to compile my files via GCC within Linux over the new Linux compiler feature (cross compiling).</p>\n\n<p>Everything works: VS compiles and also creates the correct files on my hosting Linux system. So I have created a virtual machine. I am now facing the problem that I don't have access to the virtual machines memory I guess.</p>\n\n<p>This message pops up every time I try to run my program:</p>\n\n<h2>Programm</h2>\n\n<pre><code>int main()\n{\n    return 0;\n}\n</code></pre>\n\n<h2>Message</h2>\n\n<pre><code>Warning:\nCannot insert breakpoint -1.\nCannot access memory at address 0x530\n</code></pre>\n\n<p>I thought oh well I just need to run visual studio as admin but did not work.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1478727333, "post_id": 40516412, "comment_id": 68274522, "body": "yeah, that&#39;s the same as you try to eat half-boiled rice..."}, {"owner": {"reputation": 7022, "user_id": 7659995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iZH7M.png?s=128&g=1", "display_name": "MD XF", "link": "https://stackoverflow.com/users/7659995/md-xf"}, "edited": false, "score": 0, "creation_date": 1478727379, "post_id": 40516412, "comment_id": 68274537, "body": "Where is your implementation of <code>kToM</code>?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 4, "creation_date": 1478727381, "post_id": 40516412, "comment_id": 68274538, "body": "in other words, you have to define the functions, declaration is not enough."}, {"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 2, "creation_date": 1478727402, "post_id": 40516412, "comment_id": 68274552, "body": "They mean &quot;you promised me <code>kToM</code> and <code>mToK</code> would exist but they don&#39;t, so I won&#39;t compile your code&quot;."}, {"owner": {"reputation": 8289, "user_id": 391806, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/88a2ea78dadbdaf73e1033fe7cbdeb73?s=128&d=identicon&r=PG", "display_name": "Dale Wilson", "link": "https://stackoverflow.com/users/391806/dale-wilson"}, "edited": false, "score": 2, "creation_date": 1478727640, "post_id": 40516412, "comment_id": 68274662, "body": "technically it <i>has</i> compiled the code.  Those errors are from the linker."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1478728789, "post_id": 40516412, "comment_id": 68275119, "body": "<code>C</code> doesn&#39;t allow for functions to be defined in any scope other than global scope. You can&#39;t define it inside the loop."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1478737048, "post_id": 40516412, "comment_id": 68277939, "body": "This is the second question I&#39;ve seen today where someone tries to define a function within the body of <code>main</code>; wonder where they&#39;re getting that idea?  Here&#39;s my <a href=\"http://stackoverflow.com/questions/40506092/functions-and-separating-a-program/40508692#40508692\">answer</a> to that one; might be useful."}, {"owner": {"reputation": 7022, "user_id": 7659995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iZH7M.png?s=128&g=1", "display_name": "MD XF", "link": "https://stackoverflow.com/users/7659995/md-xf"}, "edited": false, "score": 0, "creation_date": 1481006306, "post_id": 40516412, "comment_id": 69187222, "body": "Hey @Boo92, if my answer has helped you, would you consider accepting it? Accepting an answer shows the community that it has solved your problem, and helps future readers with theirs. If you don&#39;t know how to accept an answer, there&#39;s a useful <a href=\"http://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work\">faq meta post</a> about it. Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1478728684, "post_id": 40516454, "comment_id": 68275085, "body": "He tried to define them, he just did it wrong. Look at the 5 lines after the function call."}, {"owner": {"reputation": 181, "user_id": 2873045, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/166284714fb8597826054da3861adaf9?s=128&d=identicon&r=PG&f=1", "display_name": "Supercan", "link": "https://stackoverflow.com/users/2873045/supercan"}, "edited": false, "score": 0, "creation_date": 1478731643, "post_id": 40516454, "comment_id": 68276197, "body": "Nested functions anyone?"}, {"owner": {"reputation": 7022, "user_id": 7659995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iZH7M.png?s=128&g=1", "display_name": "MD XF", "link": "https://stackoverflow.com/users/7659995/md-xf"}, "reply_to_user": {"reputation": 181, "user_id": 2873045, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/166284714fb8597826054da3861adaf9?s=128&d=identicon&r=PG&f=1", "display_name": "Supercan", "link": "https://stackoverflow.com/users/2873045/supercan"}, "edited": false, "score": 0, "creation_date": 1478731766, "post_id": 40516454, "comment_id": 68276250, "body": "@Supercan Well you certainly can&#39;t declare your functions in a for loop. And you also can&#39;t make function prototypes if the functions are nested in main."}, {"owner": {"reputation": 181, "user_id": 2873045, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/166284714fb8597826054da3861adaf9?s=128&d=identicon&r=PG&f=1", "display_name": "Supercan", "link": "https://stackoverflow.com/users/2873045/supercan"}, "edited": false, "score": 0, "creation_date": 1478732051, "post_id": 40516454, "comment_id": 68276362, "body": "@MDXF That is indeed true, however you could do it the other way around since you can declare a function inside of a function, but then again it&#39;s not a nested function. Hmm, maybe you can declare multiple different functions with the use of a for loop? <i>shower thoughts</i>"}, {"owner": {"reputation": 7022, "user_id": 7659995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iZH7M.png?s=128&g=1", "display_name": "MD XF", "link": "https://stackoverflow.com/users/7659995/md-xf"}, "reply_to_user": {"reputation": 181, "user_id": 2873045, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/166284714fb8597826054da3861adaf9?s=128&d=identicon&r=PG&f=1", "display_name": "Supercan", "link": "https://stackoverflow.com/users/2873045/supercan"}, "edited": false, "score": 0, "creation_date": 1478732249, "post_id": 40516454, "comment_id": 68276440, "body": "@Supercan The idea I proposed is simply the easiest/most universal way to declare functions."}, {"owner": {"reputation": 181, "user_id": 2873045, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/166284714fb8597826054da3861adaf9?s=128&d=identicon&r=PG&f=1", "display_name": "Supercan", "link": "https://stackoverflow.com/users/2873045/supercan"}, "edited": false, "score": 0, "creation_date": 1478732660, "post_id": 40516454, "comment_id": 68276603, "body": "@MDXF No i agree with you, just thinking out loud."}], "tags": [], "owner": {"reputation": 7022, "user_id": 7659995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iZH7M.png?s=128&g=1", "display_name": "MD XF", "link": "https://stackoverflow.com/users/7659995/md-xf"}, "is_accepted": true, "score": 2, "last_activity_date": 1478731948, "last_edit_date": 1478731948, "creation_date": 1478727488, "answer_id": 40516454, "question_id": 40516412, "link": "https://stackoverflow.com/questions/40516412/undefined-reference-to-a-function-i-declared/40516454#40516454", "title": "Undefined reference to a function I declared", "body": "<p>Here's how you need to rewrite your code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint kToM (int, float);\nint mToK (int, float);\n\nint main(void)\n{\n    /* main function here */\n}\n\nint kToM(int foo, float bar)\n{\n    /* kToM function here */\n}\n\nint mToK(int foo, float bar)\n{\n    /* mToK function here */\n}\n</code></pre>\n\n<p>You should define your functions for <code>kToM</code> and <code>mToK</code> outside of <code>main</code>.</p>\n"}], "owner": {"reputation": 69, "user_id": 7076814, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1196906750332715/picture?type=large", "display_name": "Boo92", "link": "https://stackoverflow.com/users/7076814/boo92"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 40516454, "answer_count": 1, "score": -4, "last_activity_date": 1489165853, "creation_date": 1478727290, "last_edit_date": 1489165853, "question_id": 40516412, "link": "https://stackoverflow.com/questions/40516412/undefined-reference-to-a-function-i-declared", "title": "Undefined reference to a function I declared", "body": "<p>I'm getting these errors when I compile my code and I'm not sure how to fix them.</p>\n\n<pre><code>main.c:(.text+0x51): undefined reference to 'kToM'\nmain.c:(.text+0x69): undefined reference to 'kToM'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>My code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint kToM (int, float);\nint mToK (int, float);\n\nint main(void)\n{\n     int kilometers;\n     float conversion = 1.609344;\n     int miles;\n\n     printf(\"Kilometers per hour converted to miles per hour:/n\");\n     printf(\"Kph/tMph/n\");\n     for(kilometers = 185; kilometers &gt;= 0; kilometers - 5)\n     {\n         miles = kToM(kilometers, conversion);\n         kToM(kilometers,conversion);\n         {\n             miles = kilometers / conversion;\n             return miles;\n         }\n         printf(\"%f/t%f\", kilometers, miles);\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "serialization", "bit-manipulation"], "comments": [{"owner": {"reputation": 1014, "user_id": 6047952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a56a0a74a9848b8796170a9bce83e9fa?s=128&d=identicon&r=PG", "display_name": "infixed", "link": "https://stackoverflow.com/users/6047952/infixed"}, "edited": false, "score": 0, "creation_date": 1478727690, "post_id": 40516396, "comment_id": 68274682, "body": "What?  XML isn&#39;t good enough for you?  :)"}, {"owner": {"reputation": 1125, "user_id": 5672740, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c16baffcdc08015ed0b3f9dcfd424751?s=128&d=identicon&r=PG&f=1", "display_name": "SenselessCoder", "link": "https://stackoverflow.com/users/5672740/senselesscoder"}, "edited": false, "score": 0, "creation_date": 1478727804, "post_id": 40516396, "comment_id": 68274725, "body": "I&#39;d definitely use some part of the buffer as a header for every variable. The header would store how long the data type is and maybe an enumerated int to represent the data type. Then, you could write a conversion function to typecast when you want to use it."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 1014, "user_id": 6047952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a56a0a74a9848b8796170a9bce83e9fa?s=128&d=identicon&r=PG", "display_name": "infixed", "link": "https://stackoverflow.com/users/6047952/infixed"}, "edited": false, "score": 0, "creation_date": 1478728617, "post_id": 40516396, "comment_id": 68275059, "body": "@infixed: You cannot use XML on all platforms! XML is bloat."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478728835, "post_id": 40516396, "comment_id": 68275135, "body": "@Olaf It was obviously a joke, see the smiley. Clearly the OP is trying to create a very compact format, and XML is the antithesis of this."}, {"owner": {"reputation": 1014, "user_id": 6047952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a56a0a74a9848b8796170a9bce83e9fa?s=128&d=identicon&r=PG", "display_name": "infixed", "link": "https://stackoverflow.com/users/6047952/infixed"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478728904, "post_id": 40516396, "comment_id": 68275158, "body": "@olaf But bloat makes it easier.  Actually the simplest is to bloat it up to 1 ASCII character per bit.  I suggest &#39;0&#39; and &#39;1&#39;, with a third character say &#39;x&#39; as a field separator.  10x11010101x100001x.   (at least I didn&#39;t suggest Google Protocol Buffers)"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1478728907, "post_id": 40516396, "comment_id": 68275159, "body": "Are all these sizes known by both the sender and receiver, or do you need to be able to unpack all the different sized fields dynamically?"}, {"owner": {"reputation": 295, "user_id": 978563, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/487106d76b8a00a62e837e064b834c30?s=128&d=identicon&r=PG", "display_name": "zacharoni16", "link": "https://stackoverflow.com/users/978563/zacharoni16"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1478729636, "post_id": 40516396, "comment_id": 68275450, "body": "@Barmar They are known by the sender and receiver and this will run on an 8 bit microcontroller"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1478729735, "post_id": 40516396, "comment_id": 68275484, "body": "Then C code with shifting and masking is the way to do it. I don&#39;t know offhand if there&#39;s a library that does this."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1478733335, "post_id": 40516396, "comment_id": 68276843, "body": "Look up TLV (Type Length Value) encoding techniques.  You might do the &#39;type&#39; at the level of each message, so message type 1 indicates 4+1+3+8x8+13 bits which can be unpacked without much in the way of a length.  Or you might encode each set of bits into a multiple of 8 bits and prefix them with &#39;type bits&#39; and &#39;length N&#39; where N is encoded in a suitable number of bits, etc.  The options are endless; it depends on how much diversity there is in the messages, and the relative costs of lots of customer encoders and decoders vs one generic encoder and one generic decoder."}], "answers": [{"tags": [], "owner": {"reputation": 1014, "user_id": 6047952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a56a0a74a9848b8796170a9bce83e9fa?s=128&d=identicon&r=PG", "display_name": "infixed", "link": "https://stackoverflow.com/users/6047952/infixed"}, "is_accepted": true, "score": 1, "last_activity_date": 1478730969, "last_edit_date": 1478730969, "creation_date": 1478729967, "answer_id": 40516970, "question_id": 40516396, "link": "https://stackoverflow.com/questions/40516396/variable-length-data-types-inside-a-buffer-in-c/40516970#40516970", "title": "variable length data types inside a buffer in C", "body": "<p>The tough part really is the encoding of the length.</p>\n\n<p>For instance, if you never had a length greater than 255 bits (assuming that there is no zero bit option), then you would take the next 8 bits in the stream to get the length, then that number of bits to get the value.</p>\n\n<p>You could also do it in segments.  use zero as a length implies a length greater than 255.  So you read in 255 bits, then prefix those to the next segment (who has a similarly defined length), so you can keep chaining as long as you want,</p>\n\n<p>If you wanted to get fancier, and you had a known set of bit lengths to deal with, you could make a <a href=\"https://en.wikipedia.org/wiki/Huffman_coding\" rel=\"nofollow noreferrer\">Huffman Code</a> to represent the length, then alternate the Huffman code with the actual bit values.</p>\n\n<p>But that would entail knowing the possible length ahead of time.  But you could reserve a Huffman code to say 'chain to next' too </p>\n\n<p>You could even use Huffman coding to implement my ASCII scheme from the comments above, but substitute a Huffman code for the '0','1', and 'x'</p>\n\n<p>a sequence of a single zero bit  means the next bit in the field is '0'</p>\n\n<p>a sequence of one followed by another one means the next bit is a '1'</p>\n\n<p>a sequence of one followed by a zero could mean the same as 'x, end of field </p>\n"}], "owner": {"reputation": 295, "user_id": 978563, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/487106d76b8a00a62e837e064b834c30?s=128&d=identicon&r=PG", "display_name": "zacharoni16", "link": "https://stackoverflow.com/users/978563/zacharoni16"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "closed_date": 1478740000, "accepted_answer_id": 40516970, "answer_count": 1, "score": -3, "last_activity_date": 1478730969, "creation_date": 1478727259, "question_id": 40516396, "link": "https://stackoverflow.com/questions/40516396/variable-length-data-types-inside-a-buffer-in-c", "closed_reason": "Needs more focus", "title": "variable length data types inside a buffer in C", "body": "<p>What would be the easiest way to handle serialization of data of variable number of bits put into a uint8 buffer?</p>\n\n<p>For example, the first 4 bits are one variable, then 1 bit is a boolean, another one is 3 bits long. Then you have an array of 8 bytes, and then a 13 bit variable and so on. All this would be written into an unsigned char buffer to be sent over a socket.</p>\n\n<p>The variables data types are sometimes not aligning on 8 bit -16 bit boundaries, they have weird # of bits like 7 bits long, 13 bits long, 3 bits long, etc.</p>\n\n<p>Would it best to write something in C for this, or to use a third party library?</p>\n"}, {"tags": ["c", "embedded", "bit-fields", "bitflags"], "comments": [{"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1478729132, "post_id": 40516347, "comment_id": 68275247, "body": "avoid bitfields at all costs, they cause nothing but pain,  you are not saving anything (well maybe some typing) by using them.  Using masks and shifts you can gain the same number of instructions, etc.  And once you do that then masking groups of them are even easier because you know the location of each of the items in the group and you have an access method (something you dont get with bitfields even if using a union)"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 1, "creation_date": 1478729203, "post_id": 40516347, "comment_id": 68275272, "body": "Also be careful... The valid values for 1 bit are 0 and -1 because its usually (always?) 2&#39;s compliment taking up 1 bit. If you try <code>OpModes.a == 1</code>, then it will always fail or appear off or low. I&#39;ve seen it produce some very nasty, hard to track down bugs."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1478729271, "post_id": 40516347, "comment_id": 68275309, "body": "if you go with the union approach then it can work but is very compiler specific, you basically have to re-check the code every time you use a different compiler and or version and or command lines, or make the code try to detect (and of course it is an illegal use of unions anyway)."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1478729382, "post_id": 40516347, "comment_id": 68275346, "body": "@dwelch: &quot;avoid bitfields at all costs&quot;? No, really."}, {"owner": {"reputation": 5703, "user_id": 1401213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccb697eb985c37893ed06f3c3324c7c8?s=128&d=identicon&r=PG&f=1", "display_name": "kkrambo", "link": "https://stackoverflow.com/users/1401213/kkrambo"}, "edited": false, "score": 0, "creation_date": 1478729504, "post_id": 40516347, "comment_id": 68275397, "body": "I don&#39;t think there is any easy/portable way to do this with bitfields.  But if <code>_OpModes</code> was just a <code>char</code> or <code>uint8_t</code>, then it would be as simple as masking off the uninteresting bits with the bitwise-AND operator and then comparing the result with zero."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1478729827, "post_id": 40516347, "comment_id": 68275522, "body": "It is implementation-defined whether bitfields can be declared as type <code>char</code> at all.  If they can be declared that way, the only standard-defined significance of doing so is its effect on the type of lvalues designating such bitfields -- in particular, the standard makes no connection between bitfields&#39; declared types and the size of the storage units containing their representations."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1478729838, "post_id": 40516347, "comment_id": 68275524, "body": "@dwelch: <b>Iff</b> you don&#39;t care about where the bits are placed, they can be useful. But in general, if I just need a bunch of flags, I also prefer bit-ops."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 1, "creation_date": 1478730126, "post_id": 40516347, "comment_id": 68275650, "body": "Also, @jww, whether <code>char</code> is a signed or unsigned type is implementation-dependent; your comment about the possible values of such a field applies only when <code>char</code> is signed."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1478730384, "post_id": 40516347, "comment_id": 68275744, "body": "@JohnBollinger: &quot;It is implementation-defined whether bitfields can be declared as type char at all.&quot; - can you provide a reference to the standard?"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1478730654, "post_id": 40516347, "comment_id": 68275828, "body": "Thanks @John. I guess that&#39;s one of those bugs burned into my mind, so I expect all implementations to have the behavior. When I see the 1-bit bit-fields, I usually convert them to something <code>OpModes.a != 0</code>."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478730792, "post_id": 40516347, "comment_id": 68275879, "body": "@Olaf: C2011, 6.7.2.1/5: &quot;A bit-field shall have a type that is a qualified or unqualified version of <code>_Bool</code>, <code>signed int</code>, <code>unsigned  int</code>, or some other implementation-defined type.&quot;  That provides for <code>char</code>-type bitfields only under the &quot;implementation-defined&quot; alternative."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478731263, "post_id": 40516347, "comment_id": 68276045, "body": "Interesting. They indeed made bitfields even more useless for the area they otherwise would be the best solution: peripheral hardware registers. This one just adds the topping."}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478729018, "post_id": 40516591, "comment_id": 68275202, "body": "There is no need for a <code>struct</code> anymore."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1478729105, "post_id": 40516591, "comment_id": 68275236, "body": "@Olaf: Yes. But there might be a design-level reason. E.g. &quot;Today all I need is a bunch of flags, but I envision that tomorrow some combinations of these flags might require an additional piece of tag-along data&quot;. Something that is called <code>OpModes</code> probably does not need to be a struct, but something that&#39;s called, say, <code>OpParams</code> might be better off as a struct even if today it has only one field."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478729263, "post_id": 40516591, "comment_id": 68275304, "body": "That would leave you at exactly the same position as OP now has. Just define the bitfields as part of an unsigned integer and <code>typedef</code> to a fixed-width type of your choice. If 64 bits are insufficient, you have to reconsider the design anyway."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478729541, "post_id": 40516591, "comment_id": 68275418, "body": "@Olaf: I don&#39;t understand you last point. I talk about extra tag-along data that might not be even representable as a bunch of bits. If a struct is built into the design early, all I&#39;d have to do is add another field. I don&#39;t see how it even relevant to the &quot;position OP now has&quot;."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478729754, "post_id": 40516591, "comment_id": 68275494, "body": "Ah, got it. You mean to add other than single bit fields. But that is beyond the question. Hmm, some days (1-2 weeks?) ago we had exactly the same question. I&#39;ll try find it."}, {"owner": {"reputation": 59, "user_id": 3155881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57e9d2643b8ee8299c470b2d25b229a8?s=128&d=identicon&r=PG&f=1", "display_name": "Nagendra Babu", "link": "https://stackoverflow.com/users/3155881/nagendra-babu"}, "edited": false, "score": 0, "creation_date": 1478729886, "post_id": 40516591, "comment_id": 68275542, "body": "@AnT: Thank you. I got your point. If I Understand Correctly, The flags you created as FLAG_A, FLAG_B are nothing but masks for variable in which each bit depicts a Flag right?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478730051, "post_id": 40516591, "comment_id": 68275620, "body": "Found it. Would you support a CV as dup?"}], "tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": false, "score": 3, "last_activity_date": 1478729588, "last_edit_date": 1478729588, "creation_date": 1478728164, "answer_id": 40516591, "question_id": 40516347, "link": "https://stackoverflow.com/questions/40516347/detecting-at-least-one-bit-is-set-in-collection-of-bitfields/40516591#40516591", "title": "Detecting at least one bit is set in collection of bitfields", "body": "<p>There's no formally legal way to do it in one shot.</p>\n\n<p>This is actually a situation in which \"manual\" implementation of bit-fields (i.e one multi-bit value with access through bitwise operators) is far superior to the language-level declaration of separate 1-bit bit-fields.</p>\n\n<p>Even if you use language-level bit-fields, it is still a good idea to clump closely related flags together onto one larger bit-field instead of separate 1-bit fields (that is flags that have related semantics and thus might have to be processed together). E.g. in your case</p>\n\n<pre><code>#define FLAG_A 0x1\n#define FLAG_B 0x2\n#define FLAG_C 0x4\n#define FLAG_D 0x8\n\ntypedef struct\n{\n    unsigned char abcd : 4;\n} _OpModes;\n</code></pre>\n\n<p>If course, if that <code>abcd</code> is the only field in the struct, there's no real need to use a bit-field at all. Bit-fields exist for packing data, and if there's nothing there to pack, there's no need for bit-fields.</p>\n\n<p>And prefer to use unsigned types for bit-fields unless you have a good reason to use a signed one. In your case, for signed <code>char</code> bit-fields you will end up with \"flag\" fields with values of <code>0</code> and <code>-1</code>. It can be made to work, but still looks weird.</p>\n"}], "owner": {"reputation": 59, "user_id": 3155881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57e9d2643b8ee8299c470b2d25b229a8?s=128&d=identicon&r=PG&f=1", "display_name": "Nagendra Babu", "link": "https://stackoverflow.com/users/3155881/nagendra-babu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 406, "favorite_count": 0, "closed_date": 1478730324, "answer_count": 1, "score": 2, "last_activity_date": 1478729613, "creation_date": 1478727046, "last_edit_date": 1478729613, "question_id": 40516347, "link": "https://stackoverflow.com/questions/40516347/detecting-at-least-one-bit-is-set-in-collection-of-bitfields", "closed_reason": "Duplicate", "title": "Detecting at least one bit is set in collection of bitfields", "body": "<p>In my program I have a C bit-field structure as:</p>\n\n<pre><code> typedef struct\n {\n    char a:1;\n    char b:1;\n    char c:1;\n    char d:1;\n }_OpModes;\n _OpModes Operation; \n</code></pre>\n\n<p>Now I want to check at least one of the flags is set in the above structure, If so do some operation otherwise return.</p>\n\n<p>Though I can do this by checking bit by bit, that will be processor intensive for my Embedded application as structure of flags is big enough. I am looking for some operations such as (<code>operation &amp; 0xFF</code>) to detect.</p>\n\n<p>So can anyone suggest how to do this in C??</p>\n"}, {"tags": ["c", "recursion", "binary-tree", "computer-science"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1478726747, "post_id": 40516245, "comment_id": 68274239, "body": "Can you rely on your tree nodes to always have either zero or two child nodes?  That is, do you need to accommodate nodes with only one child?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 3, "creation_date": 1478726799, "post_id": 40516245, "comment_id": 68274262, "body": "Start indenting your code consistently, don&#39;t post code with line numbers if you don&#39;t use them in the question and last but not least consider to post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 9, "user_id": 6068134, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/51cc490c624ed256ff0542a1ea10d748?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Greene", "link": "https://stackoverflow.com/users/6068134/jeff-greene"}, "edited": false, "score": 0, "creation_date": 1478726896, "post_id": 40516245, "comment_id": 68274313, "body": "Every internal node should have two child nodes."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1478727094, "post_id": 40516245, "comment_id": 68274402, "body": "The posted code doesn&#39;t compile, let alone reproduce the problem."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1478727206, "post_id": 40516245, "comment_id": 68274445, "body": "I&#39;m not seeing the point of the <code>low</code>, <code>high</code>, and <code>leaf</code> parameters, nor of the <code>while</code> loop."}], "answers": [{"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1478727909, "post_id": 40516520, "comment_id": 68274764, "body": "Yes, it looks like this should work, but don&#39;t do other people&#39;s homework for them.  It does not genuinely help anybody."}], "tags": [], "owner": {"reputation": 146, "user_id": 4165293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a7c675f68c8e71197046542093a319c?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/4165293/stefan"}, "is_accepted": true, "score": 0, "last_activity_date": 1478727816, "creation_date": 1478727816, "answer_id": 40516520, "question_id": 40516245, "link": "https://stackoverflow.com/questions/40516245/constructing-a-tree-in-c-with-only-leaves-given-a-pre-order-sequence/40516520#40516520", "title": "Constructing a tree in C with only leaves, given a pre order sequence", "body": "<p>Would something like this not work (slightly summarized but hopefully it shows the idea)?:</p>\n\n<pre><code>construct_tree(int pre[], int* index){\n    root=pre[*index];\n    *index++;\n    if(root&gt;0)return root;\n    left=construct_tree(pre,index);\n    right=construct_tree(pre,index);\n    return root;\n}\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 6068134, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/51cc490c624ed256ff0542a1ea10d748?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Greene", "link": "https://stackoverflow.com/users/6068134/jeff-greene"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 40516520, "answer_count": 1, "score": 0, "last_activity_date": 1478727816, "creation_date": 1478726589, "last_edit_date": 1478727417, "question_id": 40516245, "link": "https://stackoverflow.com/questions/40516245/constructing-a-tree-in-c-with-only-leaves-given-a-pre-order-sequence", "title": "Constructing a tree in C with only leaves, given a pre order sequence", "body": "<p>I am trying to build a specific type of tree, where each internal node's data relies on the leaves of the tree. I have a pre-order array, <code>pre[] = { 0,0,0,1,2,3,0,4,5}</code>where each \"0\" represents an internal node, and anything else represents leaves. If I were to construct this tree, it would look like this:</p>\n\n<pre><code>         0\n      /     \\\n     0       0\n    / \\     / \\\n   0   3   4   5\n  / \\\n 1   2\n</code></pre>\n\n<p>I am having trouble with the recursive call, specifically in the while loop. After I finish with creating the node with data \"2\", after I return the root I am left at the internal node right above it. This internal node will continue to run in the while loop and mess up my tree. If I decide to place a return root within the while loop at the end of the condition statements then the construction will stop after filling up the left side of the tree. How can I fix this?</p>\n\n<pre><code>  1 #include &lt;stdio.h&gt;\n  2 #include &lt;stdlib.h&gt;\n  3 #include &lt;limits.h&gt;\n  4\n  5 struct node\n  6 {\n  7         int data;\n  8         int leafNode;\n  9         struct node *left;\n 10         struct node *right;\n 11 };\n 12\n 14 struct node* newNode (int data){\n 15         struct node* temp = (struct node *) malloc(sizeof(struct node));\n 16         temp-&gt;data =data;\n 17         temp-&gt;left = temp-&gt;right= NULL;\n 18         return temp;\n 19 }\n 22 struct node* _constructTree( int pre[], int * preIndex, int low, int high, int size, int leaf){\n 23         if (*preIndex &gt;= size || low &gt; high){\n 24                 return NULL;}\n 25\n 26         printf(\"We are about to create this node: %d\\n\", pre[*preIndex]);\n 27\n 28         struct node* root = newNode(pre[*preIndex]);\n 29         *preIndex = *preIndex + 1;\n 30         if(leaf){\n 31                 printf(\"Returning this leaf node: %d\\n\", pre[*preIndex - 1]);\n 32                 return root;}\n 33\n 34\n 35         if(low == high){\n 36                 return root;}\n 37\n 38         while(low&lt;high){\n 39                 if(pre[*preIndex] == 0){\n 40                 root-&gt;left = _constructTree(pre, preIndex, *preIndex, high, size, 0);}\n 41\n 42                 if(root-&gt;left == NULL){\n 43                 root-&gt;left  = _constructTree(pre, preIndex, *preIndex, high, size, 1);\n 44                 return root;\n 45                 }\n 46                 if(pre[*preIndex] != 0){\n 47                 root-&gt;right = _constructTree(pre, preIndex, *preIndex, high, size, 1);\n 48                 return root;\n 49                 }\n 50                 else{\n 51                 root-&gt;right = _constructTree(pre,preIndex, *preIndex, high, size, 0);}\n 52                         }\n 53                 return root;\n 54         }\n 55 }\n 56\n 57 struct node * constructTree(int pre[], int size){\n 58         int preIndex = 0;\n 59         return _constructTree(pre, &amp;preIndex, 0, size -1, size, 0);\n 60         }\n 61\n</code></pre>\n"}, {"tags": ["c", "nasm", "fpu", "long-double"], "answers": [{"comments": [{"owner": {"reputation": 1208, "user_id": 4681920, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/676751292436396/picture?type=large", "display_name": "Jan Grz", "link": "https://stackoverflow.com/users/4681920/jan-grz"}, "edited": false, "score": 0, "creation_date": 1478730214, "post_id": 40516321, "comment_id": 68275685, "body": "in nasm the keyword is <code>tword</code>."}, {"owner": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "reply_to_user": {"reputation": 1208, "user_id": 4681920, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/676751292436396/picture?type=large", "display_name": "Jan Grz", "link": "https://stackoverflow.com/users/4681920/jan-grz"}, "edited": false, "score": 0, "creation_date": 1478730398, "post_id": 40516321, "comment_id": 68275746, "body": "@JanOsch: Yeah, I wasn&#39;t sure between these two. Thank you,"}], "tags": [], "owner": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "is_accepted": true, "score": 3, "last_activity_date": 1478730286, "last_edit_date": 1478730286, "creation_date": 1478726925, "answer_id": 40516321, "question_id": 40516229, "link": "https://stackoverflow.com/questions/40516229/nasm-how-to-load-a-long-double-into-the-fpu-from-memory/40516321#40516321", "title": "Nasm: how to load a long double into the FPU from memory", "body": "<p>To specify the size explicitely use the following form in NASM:</p>\n\n<pre><code>fld TWORD [eax] ; load 10 bytes from [eax]\n</code></pre>\n\n<p>As you pointed out, FPU stack registers are 80 bits wide. The C compiler chooses 12 bytes, because of the data alignment requirements of the stack frame.</p>\n"}], "owner": {"reputation": 1208, "user_id": 4681920, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/676751292436396/picture?type=large", "display_name": "Jan Grz", "link": "https://stackoverflow.com/users/4681920/jan-grz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 245, "favorite_count": 0, "accepted_answer_id": 40516321, "answer_count": 1, "score": 2, "last_activity_date": 1478730286, "creation_date": 1478726504, "question_id": 40516229, "link": "https://stackoverflow.com/questions/40516229/nasm-how-to-load-a-long-double-into-the-fpu-from-memory", "title": "Nasm: how to load a long double into the FPU from memory", "body": "<p>I am writing a function in nasm that will be called from 32bit ansi C.</p>\n\n<p>The function prototype in C looks like this:\n<code>long double scalar(int n, long double *x)</code> \nWhere x is a pointer to an array of <code>long doubles</code>.</p>\n\n<p>The problem occurs when I try to load a single <code>long double</code> to the FPU:</p>\n\n<pre><code>    mov ecx, [esp+8] ; n\n    mov eax, [esp+12] ; *x\n    fld [eax] ; ERROR: operation size not specified\n</code></pre>\n\n<p>How should I specify the size? My C compiler uses 12 bytes for a long double, how to fit it into the 80 bits?  </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 3, "creation_date": 1478725935, "post_id": 40516090, "comment_id": 68273862, "body": "<code>else last(ptr-&gt;next);</code>-&gt; <code>else return last(ptr-&gt;next);</code>."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 2, "creation_date": 1478725964, "post_id": 40516090, "comment_id": 68273869, "body": "maybe reading the warnings could help in those situations"}, {"owner": {"reputation": 27, "user_id": 7112075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e1d4127a0c512636c638bdecd7812af?s=128&d=identicon&r=PG&f=1", "display_name": "garrett1027", "link": "https://stackoverflow.com/users/7112075/garrett1027"}, "edited": false, "score": 0, "creation_date": 1478726021, "post_id": 40516090, "comment_id": 68273892, "body": "after changing to     return last(ptr-&gt;next); I get the error: warning: control reaches end of non-void function [-Wreturn-type]  }"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1478726372, "post_id": 40516090, "comment_id": 68274062, "body": "@garrett1027 that&#39;s normal. Look what happens if <code>head</code> is <code>NULL</code>. That should answer the question why you get the warning: <i>control reaches end of non-void function</i>"}], "answers": [{"tags": [], "owner": {"reputation": 1014, "user_id": 6047952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a56a0a74a9848b8796170a9bce83e9fa?s=128&d=identicon&r=PG", "display_name": "infixed", "link": "https://stackoverflow.com/users/6047952/infixed"}, "is_accepted": false, "score": 2, "last_activity_date": 1478789386, "last_edit_date": 1478789386, "creation_date": 1478726880, "answer_id": 40516308, "question_id": 40516090, "link": "https://stackoverflow.com/questions/40516090/returning-value-of-last-value-in-linked-list-recursively/40516308#40516308", "title": "Returning Value of Last value in Linked List Recursively", "body": "<pre><code>int last(Node *current)\n{  \n    // degenerate case\n    if ( current == NULL ) return 0;  //or pick another number if you want\n\n    // last element found\n    if ( current-&gt;next == NULL ) return current-&gt;num;\n\n    // recursive\n    return last( current-&gt;next );\n}\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 7112075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e1d4127a0c512636c638bdecd7812af?s=128&d=identicon&r=PG&f=1", "display_name": "garrett1027", "link": "https://stackoverflow.com/users/7112075/garrett1027"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 632, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1478789386, "creation_date": 1478725845, "last_edit_date": 1478737518, "question_id": 40516090, "link": "https://stackoverflow.com/questions/40516090/returning-value-of-last-value-in-linked-list-recursively", "title": "Returning Value of Last value in Linked List Recursively", "body": "<pre><code>int last(Node *head)    // complete this, must be recursive\n{\n    Node *ptr = head;\n    if (ptr != NULL) {\n        if (ptr-&gt;next == NULL)\n            return ptr-&gt;num;\n        else\n            last(ptr-&gt;next);\n    }\n}\n</code></pre>\n\n<p>I am trying to return the last value and I have a feeling the problem has to do with the way I am trying to return the value, but I'm not sure exactly how I should go about it.</p>\n"}, {"tags": ["c", "gcc", "clang"], "comments": [{"owner": {"reputation": 3420, "user_id": 675723, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8f525203adb5093c5954b43a5b6420c2?s=128&d=identicon&r=PG", "display_name": "BadZen", "link": "https://stackoverflow.com/users/675723/badzen"}, "edited": false, "score": 1, "creation_date": 1478725982, "post_id": 40516063, "comment_id": 68273879, "body": "You need to use the appropriate feature test macros for that function.  See <code>man setlinebuf</code>"}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 1, "creation_date": 1478726150, "post_id": 40516063, "comment_id": 68273948, "body": "... <a href=\"http://man7.org/linux/man-pages/man3/setlinebuf.3.html\" rel=\"nofollow noreferrer\">which is</a> adding <code>#define _BSD_SOURCE</code> before any includes, to tell the library header files you want the BSD features (of which <code>setlinebuf()</code> is one)."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1478751558, "post_id": 40516063, "comment_id": 68281107, "body": "suggest reading the man page for <code>setlinebuf()</code>  which includes this statement: <code>Feature Test Macro Requirements for glibc (see feature_test_macros(7)):         setbuffer(), setlinebuf(): _BSD_SOURCE</code>"}], "answers": [{"comments": [{"owner": {"reputation": 554, "user_id": 1466983, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/37484fd3217d0dc5a078350523599a18?s=128&d=identicon&r=PG", "display_name": "Blieque", "link": "https://stackoverflow.com/users/1466983/blieque"}, "edited": false, "score": 0, "creation_date": 1478727302, "post_id": 40516163, "comment_id": 68274507, "body": "<code>_DEFAULT_SOURCE</code> did the trick, thank-you. Is there any drawback to doing this? Can the same not be achieved with standard C?   Edit: &quot;The setlinebuf() function is exactly equivalent to the call: <code>setvbuf(stream, NULL, _IOLBF, 0);</code>&quot;"}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 554, "user_id": 1466983, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/37484fd3217d0dc5a078350523599a18?s=128&d=identicon&r=PG", "display_name": "Blieque", "link": "https://stackoverflow.com/users/1466983/blieque"}, "edited": false, "score": 1, "creation_date": 1478727856, "post_id": 40516163, "comment_id": 68274746, "body": "<code>setlinebuf()</code> is not in the C standard&#39;s library. Hence, it requires this additional macro to expose this interface. But you don&#39;t have to use this. The man page even suggests an alternative using <code>setvbuf()</code>: <code>setvbuf(stream, buf, buf ? _IOFBF : _IONBF, BUFSIZ);</code>, which is part of C standard library and will not require any additional macros. <code>setlinebuf()</code> is a more of convenience when available (I&#39;ve used in my AIX days). But if you are writing for strictly standard complaint or concerned about portability then you can easily avoid it."}], "tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 4, "last_activity_date": 1478726175, "creation_date": 1478726175, "answer_id": 40516163, "question_id": 40516063, "link": "https://stackoverflow.com/questions/40516063/preventing-warning-implicit-declaration-of-function-setlinebuf/40516163#40516163", "title": "Preventing &quot;warning: implicit declaration of function &#39;setlinebuf&#39;...&quot;", "body": "<p>Include this <em>before</em> including <code>stdio.h</code>:</p>\n\n<pre><code>#define _BSD_SOURCE\n</code></pre>\n\n<p><code>setlinebuf()</code> is not a standard C function and thus it may not be included by default in <code>stdio.h</code>.</p>\n\n<p>But note that <code>_BSD_SOURCE</code> has been deprecated since glibc 2.20 and been superseded by <code>_DEFAULT_SOURCE</code>.</p>\n"}], "owner": {"reputation": 554, "user_id": 1466983, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/37484fd3217d0dc5a078350523599a18?s=128&d=identicon&r=PG", "display_name": "Blieque", "link": "https://stackoverflow.com/users/1466983/blieque"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 731, "favorite_count": 0, "accepted_answer_id": 40516163, "answer_count": 1, "score": 2, "last_activity_date": 1478726175, "creation_date": 1478725753, "question_id": 40516063, "link": "https://stackoverflow.com/questions/40516063/preventing-warning-implicit-declaration-of-function-setlinebuf", "title": "Preventing &quot;warning: implicit declaration of function &#39;setlinebuf&#39;...&quot;", "body": "<p>Both Clang/LLVM and GCC show this warning. I am aware that headers must be included in order to use many functions, but <code>stdio.h</code> is included at the top of the file. I've used other functions (e.g., <code>setbuf()</code>) from the same header, and these work fine. Removing the header include causes errors and warnings to be thrown for these other functions, as expected.</p>\n\n<p>I used <code>clang -MD -MF</code> to show included header files and checked <code>/usr/include/stdio.h</code>, which contains a prototype for <code>setlinebuf()</code>. I found one reference online to <code>unix.h</code>, but this doesn't appear to exist on my system.</p>\n\n<p>I'm using Lubuntu 16.10 x86_64, Clang 3.8.1.</p>\n\n<p><a href=\"https://github.com/blieque/dtetris/blob/eacfe758ef51cf5d656ab08ee9e3fe7f8e70a084/dtetris.c\" rel=\"nofollow noreferrer\"><strong>View source</strong></a>: Include on line 1, function use on line 32.</p>\n"}, {"tags": ["c", "wifi"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478725246, "post_id": 40515929, "comment_id": 68273518, "body": "So what do you think <code>void</code> as a function &quot;result&quot; means? And <code>DBG_871X_SEL_NL</code> is <b>not</b> a function, but a macro."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478725274, "post_id": 40515929, "comment_id": 68273539, "body": "@Olaf you meant <code>void</code>?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1478725377, "post_id": 40515929, "comment_id": 68273589, "body": "@SouravGhosh: Of course. Thanks. Although <code>vodi</code> actually sounds nicer. Hmm, I should define a macro and use that name only ... ;-) If not anything else, it will surprise the coleagues why it does compile ..."}, {"owner": {"reputation": 2883, "user_id": 2583765, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5e54eb8bd99cabcd824ddb09367efb4d?s=128&d=identicon&r=PG&f=1", "display_name": "birgersp", "link": "https://stackoverflow.com/users/2583765/birgersp"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478725461, "post_id": 40515929, "comment_id": 68273632, "body": "@Olaf Sorry, I don&#39;t understand your question. Can you please elaborate?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1478725462, "post_id": 40515929, "comment_id": 68273633, "body": "Note that <code>DBG_871X_SEL_NL</code> is apparently a <i>macro</i>, not a function.  In any case, the definition you present is not enough for us to identify the error with confidence, as we don&#39;t know what <code>DBG_871X_LEVEL</code> or <code>_seqdump()</code> is.  We prefer questions about code to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478725529, "post_id": 40515929, "comment_id": 68273664, "body": "@Birger: I edited the typos. It should be clear now."}, {"owner": {"reputation": 2883, "user_id": 2583765, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5e54eb8bd99cabcd824ddb09367efb4d?s=128&d=identicon&r=PG&f=1", "display_name": "birgersp", "link": "https://stackoverflow.com/users/2583765/birgersp"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1478725835, "post_id": 40515929, "comment_id": 68273805, "body": "I should have mentioned that this same code worked before I updated the kernel. So I am assuming some function in the kernel headers that previously returned a value, now is a void function. @JohnBollinger: I could give the whole driver source code, but I guess what I was hoping was some strategy to find the error. The source code is here: <a href=\"http://www.jensenofscandinavia.com/wp-content/uploads/2015/07/AL100ac_Linux_4.3.7.zip\" rel=\"nofollow noreferrer\">jensenofscandinavia.com/wp-content/uploads/2015/07/&hellip;</a>"}, {"owner": {"reputation": 2883, "user_id": 2583765, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5e54eb8bd99cabcd824ddb09367efb4d?s=128&d=identicon&r=PG&f=1", "display_name": "birgersp", "link": "https://stackoverflow.com/users/2583765/birgersp"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478726003, "post_id": 40515929, "comment_id": 68273886, "body": "@Olaf: Sorry, I still don&#39;t understand what you mean. But I&#39;ll try to answer: I think <code>void</code> as a function &quot;result&quot; means that the result cannot be used in any logic... ?"}, {"owner": {"reputation": 2883, "user_id": 2583765, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5e54eb8bd99cabcd824ddb09367efb4d?s=128&d=identicon&r=PG&f=1", "display_name": "birgersp", "link": "https://stackoverflow.com/users/2583765/birgersp"}, "edited": false, "score": 0, "creation_date": 1478726762, "post_id": 40515929, "comment_id": 68274246, "body": "Thanks. With all due respect, did you even read my question? I have an idea of what the error message means, don&#39;t I? So I <b>should</b> be able to fix it if I can find the source of the error. If your response to a question like mine is simply &quot;please read a C book&quot; then what is even the point of posting questions here?"}, {"owner": {"reputation": 2883, "user_id": 2583765, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5e54eb8bd99cabcd824ddb09367efb4d?s=128&d=identicon&r=PG&f=1", "display_name": "birgersp", "link": "https://stackoverflow.com/users/2583765/birgersp"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1478726853, "post_id": 40515929, "comment_id": 68274295, "body": "@JohnBollinger: Sorry that I can&#39;t provide a complete code example to reproduce the error, maybe I can try to write my own driver to reproduce it. I&#39;ll try"}], "answers": [{"tags": [], "owner": {"reputation": 2883, "user_id": 2583765, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5e54eb8bd99cabcd824ddb09367efb4d?s=128&d=identicon&r=PG&f=1", "display_name": "birgersp", "link": "https://stackoverflow.com/users/2583765/birgersp"}, "is_accepted": false, "score": 6, "last_activity_date": 1478727860, "creation_date": 1478727860, "answer_id": 40516526, "question_id": 40515929, "link": "https://stackoverflow.com/questions/40515929/building-drivers-yields-error-void-value-not-ignored-as-it-ought-to-be/40516526#40516526", "title": "Building drivers yields `error: void value not ignored as it ought to be`", "body": "<p>Found that the <code>_seqdump</code> function no longer returns a value since the kernel is updated.</p>\n\n<p>Thus, I fixed the error by replacing <code>if(_seqdump(sel, fmt, ##arg))</code> with <code>_seqdump(sel, fmt, ##arg)</code></p>\n\n<p>Here are the two macros affected:</p>\n\n<pre><code>/* dump message to selected 'stream' */\n#define DBG_871X_SEL(sel, fmt, arg...) \\\n    do {\\\n        if (sel == RTW_DBGDUMP)\\\n            _DBG_871X_LEVEL(_drv_always_, fmt, ##arg); \\\n        else {\\\n            _seqdump(sel, fmt, ##arg) /*rtw_warn_on(1)*/; \\\n        } \\\n    }while(0)\n</code></pre>\n\n<p>And</p>\n\n<pre><code>/* dump message to selected 'stream' with driver-defined prefix */\n#define DBG_871X_SEL_NL(sel, fmt, arg...) \\\n    do {\\\n        if (sel == RTW_DBGDUMP)\\\n            DBG_871X_LEVEL(_drv_always_, fmt, ##arg); \\\n        else {\\\n            _seqdump(sel, fmt, ##arg) /*rtw_warn_on(1)*/; \\\n        } \\\n    }while(0)\n</code></pre>\n"}], "owner": {"reputation": 2883, "user_id": 2583765, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5e54eb8bd99cabcd824ddb09367efb4d?s=128&d=identicon&r=PG&f=1", "display_name": "birgersp", "link": "https://stackoverflow.com/users/2583765/birgersp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2105, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1574236564, "creation_date": 1478725171, "last_edit_date": 1574236564, "question_id": 40515929, "link": "https://stackoverflow.com/questions/40515929/building-drivers-yields-error-void-value-not-ignored-as-it-ought-to-be", "title": "Building drivers yields `error: void value not ignored as it ought to be`", "body": "<p>I've found that the error message <code>error: void value not ignored as it ought to be</code> is thrown when void is returned. Fair enough.</p>\n\n<p>I get this error when trying to build drivers for my WIFI dongle. This is the error output:</p>\n\n<pre><code>birger@raspberrypi:~/AL100ac $ sudo make ARCH=arm\nmake ARCH=arm CROSS_COMPILE= -C /lib/modules/4.4.26+/build M=/home/birger/AL100ac  modules\nmake[1]: Entering directory '/usr/src/linux-headers-4.4.26+'\n  CC [M]  /home/birger/AL100ac/core/rtw_debug.o\n/home/birger/AL100ac/core/rtw_debug.c: In function \u2018dump_drv_version\u2019:\n/home/birger/AL100ac/core/rtw_debug.c:65:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:66:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c: In function \u2018dump_log_level\u2019:\n/home/birger/AL100ac/core/rtw_debug.c:71:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c: In function \u2018mac_reg_dump\u2019:\n/home/birger/AL100ac/core/rtw_debug.c:98:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:103:4: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:104:3: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:106:4: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c: In function \u2018bb_reg_dump\u2019:\n/home/birger/AL100ac/core/rtw_debug.c:114:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:118:4: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:119:3: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:121:4: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c: In function \u2018rf_reg_dump\u2019:\n/home/birger/AL100ac/core/rtw_debug.c:138:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:141:3: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:146:5: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:147:4: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:149:5: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c: In function \u2018proc_get_read_reg\u2019:\n/home/birger/AL100ac/core/rtw_debug.c:208:3: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:215:4: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:218:4: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:221:4: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:224:4: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c: In function \u2018proc_get_fwstate\u2019:\n/home/birger/AL100ac/core/rtw_debug.c:267:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c: In function \u2018proc_get_sec_info\u2019:\n/home/birger/AL100ac/core/rtw_debug.c:278:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:282:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:285:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:287:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:290:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:292:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:295:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:297:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c: In function \u2018proc_get_mlmext_state\u2019:\n/home/birger/AL100ac/core/rtw_debug.c:311:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c: In function \u2018proc_get_roam_flags\u2019:\n/home/birger/AL100ac/core/rtw_debug.c:322:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c: In function \u2018proc_get_roam_param\u2019:\n/home/birger/AL100ac/core/rtw_debug.c:356:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:357:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c: In function \u2018proc_get_qos_option\u2019:\n/home/birger/AL100ac/core/rtw_debug.c:426:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c: In function \u2018proc_get_ht_option\u2019:\n/home/birger/AL100ac/core/rtw_debug.c:438:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c: In function \u2018proc_get_rf_info\u2019:\n/home/birger/AL100ac/core/rtw_debug.c:450:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:453:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c: In function \u2018proc_get_survey_info\u2019:\n/home/birger/AL100ac/core/rtw_debug.c:478:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:499:3: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c: In function \u2018proc_get_ap_info\u2019:\n/home/birger/AL100ac/core/rtw_debug.c:532:3: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:533:3: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:534:3: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:535:3: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:536:3: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:538:3: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:539:3: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:540:3: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:541:3: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:542:3: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:545:3: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:546:3: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:547:3: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:555:5: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:562:3: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c: In function \u2018proc_get_adapter_state\u2019:\n/home/birger/AL100ac/core/rtw_debug.c:578:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c: In function \u2018proc_get_trx_info\u2019:\n/home/birger/AL100ac/core/rtw_debug.c:594:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:596:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:598:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:604:3: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:608:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c: In function \u2018proc_get_rate_ctl\u2019:\n/home/birger/AL100ac/core/rtw_debug.c:621:3: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:622:3: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:624:3: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c: In function \u2018proc_get_suspend_resume_info\u2019:\n/home/birger/AL100ac/core/rtw_debug.c:695:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:696:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:697:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:698:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:699:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:700:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:701:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:702:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:703:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:704:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:705:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:706:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:707:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:708:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:709:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:710:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:711:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:712:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:713:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:714:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:715:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:716:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:717:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:718:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:719:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:720:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:721:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:722:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c: In function \u2018proc_get_rx_signal\u2019:\n/home/birger/AL100ac/core/rtw_debug.c:996:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:998:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:999:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:1000:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c: In function \u2018proc_get_hw_status\u2019:\n/home/birger/AL100ac/core/rtw_debug.c:1016:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c: In function \u2018proc_get_ht_enable\u2019:\n/home/birger/AL100ac/core/rtw_debug.c:1065:3: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c: In function \u2018proc_get_bw_mode\u2019:\n/home/birger/AL100ac/core/rtw_debug.c:1103:3: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c: In function \u2018proc_get_ampdu_enable\u2019:\n/home/birger/AL100ac/core/rtw_debug.c:1143:3: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c: In function \u2018proc_get_rx_ampdu\u2019:\n/home/birger/AL100ac/core/rtw_debug.c:1184:3: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c: In function \u2018proc_get_en_fwps\u2019:\n/home/birger/AL100ac/core/rtw_debug.c:1235:3: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c: In function \u2018proc_get_rx_stbc\u2019:\n/home/birger/AL100ac/core/rtw_debug.c:1290:3: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c: In function \u2018proc_get_all_sta_info\u2019:\n/home/birger/AL100ac/core/rtw_debug.c:1381:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:1398:5: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:1399:5: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:1400:5: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:1401:5: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:1403:5: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:1404:5: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:1405:5: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:1406:5: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:1408:5: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:1409:5: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:1410:5: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:1411:5: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:1412:5: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:1414:5: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:1415:5: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:1416:5: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:1417:5: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:1418:5: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:1419:5: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:1420:5: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:1427:7: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:1439:5: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c: In function \u2018proc_get_best_channel\u2019:\n/home/birger/AL100ac/core/rtw_debug.c:1512:3: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:1517:2: error: void value not ignored as it ought to be\n/home/birger/AL100ac/core/rtw_debug.c:1518:2: error: void value not ignored as it ought to be\nscripts/Makefile.build:258: recipe for target '/home/birger/AL100ac/core/rtw_debug.o' failed\nmake[2]: *** [/home/birger/AL100ac/core/rtw_debug.o] Error 1\nMakefile:1400: recipe for target '_module_/home/birger/AL100ac' failed\nmake[1]: *** [_module_/home/birger/AL100ac] Error 2\nmake[1]: Leaving directory '/usr/src/linux-headers-4.4.26+'\nMakefile:1385: recipe for target 'modules' failed\nmake: *** [modules] Error 2\n</code></pre>\n\n<p>Specifically, the error is thrown when the function named <code>DBG_871X_SEL_NL</code> is invoked.</p>\n\n<p>So I guess the macro is what is causing this problem. I tried searching the driver source code for it, and it is defined like this:</p>\n\n<pre><code>/* dump message to selected 'stream' with driver-defined prefix */\n#define DBG_871X_SEL_NL(sel, fmt, arg...) \\\n    do {\\\n        if (sel == RTW_DBGDUMP)\\\n            DBG_871X_LEVEL(_drv_always_, fmt, ##arg); \\\n        else {\\\n            if(_seqdump(sel, fmt, ##arg)) /*rtw_warn_on(1)*/; \\\n        } \\\n    }while(0)\n</code></pre>\n\n<p>I can't wrap my head around what is causing this error and how to fix it?</p>\n\n<p>I've searched around a little, found this: <a href=\"https://github.com/hadess/rtl8723bs/issues/30\" rel=\"nofollow noreferrer\">https://github.com/hadess/rtl8723bs/issues/30</a></p>\n\n<p>Could it be a similiar bug affecting me?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>I should have mentioned that this same code worked before I updated the kernel. So I am assuming some function in the kernel headers that previously returned a value, now is a void function.</p>\n"}, {"tags": ["c", "linux", "mmap"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478724914, "post_id": 40515840, "comment_id": 68273330, "body": "Please provide a reference to the standard where it requires sigsegv for undefined behaviour by access. And did you check the machine code? Did it execute? What does the debugger say?"}, {"owner": {"reputation": 15257, "user_id": 1409312, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4TCzB.jpg?s=128&g=1", "display_name": "Syntactic Fructose", "link": "https://stackoverflow.com/users/1409312/syntactic-fructose"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478725031, "post_id": 40515840, "comment_id": 68273395, "body": "@Olaf Case 1 executes and enteres the handler for SIGSEGV as expected. If I run Case 2, I do not enter the handler and the write simply returns -1 specifying <code>EFAULT</code> in errno, so there is no crash in case 2.  As for the reference, I just assumed and I/O on protected memory generated a sigsegv"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478725107, "post_id": 40515840, "comment_id": 68273444, "body": "@Olaf What standard? The linux standard?"}, {"owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 0, "creation_date": 1478725111, "post_id": 40515840, "comment_id": 68273448, "body": "There&#39;s no reason that the OP should need to provide a reference for the expected behavior.  That would be extra credit, if it were known, but is not needed for this to be a reasonable question."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1478725153, "post_id": 40515840, "comment_id": 68273470, "body": "The C standard. And I did not say &quot;crash&quot;. That&#39;s not a standard term for good reasons."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 1, "creation_date": 1478725197, "post_id": 40515840, "comment_id": 68273492, "body": "@WayneConrad: What is the &quot;expected behaviour&quot; for <i><b>undefined</b> behaviour</i>?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1478725200, "post_id": 40515840, "comment_id": 68273498, "body": "@Olaf What does the C standard have to do with SIGSEGV, Linux, or <code>write</code>? Not every question tagged <code>C</code> is about purely ISO standard C."}, {"owner": {"reputation": 15257, "user_id": 1409312, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4TCzB.jpg?s=128&g=1", "display_name": "Syntactic Fructose", "link": "https://stackoverflow.com/users/1409312/syntactic-fructose"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1478725251, "post_id": 40515840, "comment_id": 68273523, "body": "@Olaf if you look into the <a href=\"http://man7.org/linux/man-pages/man7/signal.7.html\" rel=\"nofollow noreferrer\">signals</a> man page, you see that SIGSEGV is defined for all invalid memory access. This is why I assumed write though send this signal"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1478725686, "post_id": 40515840, "comment_id": 68273729, "body": "@SyntacticFructose: 1) So it is <b>guaranteed</b> to be emitted <i>under all circumstances</i>? 2) Did you check - as I wrote - the machine code, if it was not just optimised away?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1478751326, "post_id": 40515840, "comment_id": 68281048, "body": "this statement: <code>*(volatile int*)(addr);</code> did not write anything.  However it will cause a compiler to output a warning message"}], "answers": [{"comments": [{"owner": {"reputation": 15257, "user_id": 1409312, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4TCzB.jpg?s=128&g=1", "display_name": "Syntactic Fructose", "link": "https://stackoverflow.com/users/1409312/syntactic-fructose"}, "edited": false, "score": 0, "creation_date": 1478725171, "post_id": 40515897, "comment_id": 68273478, "body": "So in this case, <code>write</code> enters the kernel, which sees the calling address has <code>PROT_NONE</code> and considers it an <code>EFAULT</code>?"}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1478725229, "post_id": 40515897, "comment_id": 68273510, "body": "I fully agree, if you make that passed address <i>range</i>."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 15257, "user_id": 1409312, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4TCzB.jpg?s=128&g=1", "display_name": "Syntactic Fructose", "link": "https://stackoverflow.com/users/1409312/syntactic-fructose"}, "edited": false, "score": 0, "creation_date": 1478725261, "post_id": 40515897, "comment_id": 68273527, "body": "@SyntacticFructose Yes, exactly."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478725848, "post_id": 40515897, "comment_id": 68273815, "body": "One reason could be that it would be problematic to catch the signal in the kernel and raise the machine exception later for the application itself."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1478726583, "post_id": 40515897, "comment_id": 68274158, "body": "@Olaf: At least in Linux, the syscalls that return <code>-EFAULT</code> could just as well also cause a <code>SIGSEGV</code> to be raised for the calling thread; there is no need to let the hardware actually try to access the memory. However, then, there is a possibility of a signal storm deadlocky thing, if this were to occur in the signal handler -- and that is reason enough, I&#39;d guess, for syscalls used to implement async-signal-safe functions to not to raise <code>SIGSEGV</code> nor <code>SIGBUS</code> signals (which, technically, can be caught; and outside of standard C is actually an useful method in certain strange cases)."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1478727690, "post_id": 40515897, "comment_id": 68274683, "body": "@NominalAnimal: I just speculated about <b>one</b> possible reason. Of course there can be others, more relevant. Depending on how that is handled internally, it can complicate the kernel code. NUMA architectures can add additional complications. Anyway, it is well documented behaviour and part of POSIX, so there is no use in further discussion."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478729981, "post_id": 40515897, "comment_id": 68275578, "body": "@Olaf: True! I just wanted to extrapolate your comment, specifically to Linux and how it&#39;d lead to other, quite severe problems."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 7, "last_activity_date": 1478725039, "creation_date": 1478725039, "answer_id": 40515897, "question_id": 40515840, "link": "https://stackoverflow.com/questions/40515840/write-on-protected-memory-region-does-not-trigger-sigsegv-but-standard-access/40515897#40515897", "title": "write() on protected memory region does not trigger sigsegv, but standard access does", "body": "<p><code>write</code> is a system call, so the memory access happens in the kernel, not in your process. The kernel first checks whether the passed address is valid for the calling process, and if it isn't, it simply returns <code>EFAULT</code>.</p>\n\n<p>(I don't know why it was designed to work this way, though.)</p>\n"}], "owner": {"reputation": 15257, "user_id": 1409312, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4TCzB.jpg?s=128&g=1", "display_name": "Syntactic Fructose", "link": "https://stackoverflow.com/users/1409312/syntactic-fructose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 40515897, "answer_count": 1, "score": 3, "last_activity_date": 1478725039, "creation_date": 1478724810, "question_id": 40515840, "link": "https://stackoverflow.com/questions/40515840/write-on-protected-memory-region-does-not-trigger-sigsegv-but-standard-access", "title": "write() on protected memory region does not trigger sigsegv, but standard access does", "body": "<p>I'm trying to understand why calling a write on a memory protected region does not trigger a <code>sigsegv</code>. Consider the example:</p>\n\n<pre><code>void *map_addr;\nunsigned long addr;\n\nmap_addr = (void *)mmap(NULL, 0x4000, PROT_READ_WRITE, MAP_PRIVATE, fd, 0);\nmprotect(map_addr, 0x4000, PROT_NONE);\n\naddr = (unsigned long)map_addr;\n\n// case 1:\n*(volatile int*)(addr);  // sigsegv sent\n// case 2:\nwrite(STDOUT_FILENO, map_addr, size); // sigsegv NOT sent\n</code></pre>\n\n<p>Instead of sending a <code>sigsegv</code>, write in this instance returns <code>-1</code> and sets <code>errno=EFAULT</code>. Why does write have this behavior? I would imagine write would have attempted reading from the address, which creates the sigsegv fault but this is evidently not the case.</p>\n"}, {"tags": ["c", "linux-kernel", "kernel-module"], "answers": [{"comments": [{"owner": {"reputation": 307, "user_id": 2283305, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BiDP2.jpg?s=128&g=1", "display_name": "DimeCadmium", "link": "https://stackoverflow.com/users/2283305/dimecadmium"}, "edited": false, "score": 0, "creation_date": 1597369039, "post_id": 40523090, "comment_id": 112117003, "body": "While the code may not be idiomatic kernel code, that is unimportant here. Unless OP is planning to try to get this merged in the kernel (unlikely, and he&#39;d need a quite good rationale to get it accepted), kernel code style does not matter, only the OP&#39;s personal preferred code style, and that of anyone with whom he may be working. -- You didn&#39;t give any information on how it should be done, only that it is being done wrong. Clearly the OP already knew that or he would not have asked the question."}], "tags": [], "owner": {"reputation": 3598, "user_id": 4822941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06bJl.jpg?s=128&g=1", "display_name": "employee of the month", "link": "https://stackoverflow.com/users/4822941/employee-of-the-month"}, "is_accepted": false, "score": -2, "last_activity_date": 1478766842, "creation_date": 1478766842, "answer_id": 40523090, "question_id": 40515782, "link": "https://stackoverflow.com/questions/40515782/understanding-linux-kernel-data-structures-for-handling-file-descriptors/40523090#40523090", "title": "Understanding linux kernel data structures for handling file descriptors", "body": "<p>The idea is wrong and the code is wrong. What is the actual goal? Why is the file not open for writing to begin with? How can the program suddenly start writing to the file if it explicitly opened it for reading? This does not add up whatsoever.</p>\n\n<p>You can't just plop the flag to have the file open for writing either. You will have to re-do all the checks in the open path.</p>\n\n<pre><code>static int __init mainInit(void){\n</code></pre>\n\n<p>For the most part the kernel does not use camelCase.</p>\n\n<pre><code>    int pid=13433;\n</code></pre>\n\n<p>Missing spaces around '='.</p>\n\n<pre><code>    struct task_struct * task;\n</code></pre>\n\n<p>Spurious space between '*' and 'task'.</p>\n\n<pre><code>    struct files_struct * files;\n    struct fdtable * filestable;\n</code></pre>\n\n<p>The iditom is to name it 'fdt'.</p>\n\n<pre><code>    struct path files_path;\n\n    //Get Task structure from PID\n    task = pid_task(find_vpid(pid), PIDTYPE_PID );\n</code></pre>\n\n<p>Neither rcu nor tasklist are held, hence this is unsafe.</p>\n\n<pre><code>    //Get open FIles from the task tstructure\n    files = task-&gt;files;\n</code></pre>\n\n<p>task lock is not held, hence the derefeence is unsafe.</p>\n\n<pre><code>    filestable=files_fdtable(files);\n</code></pre>\n\n<p>The kernel itself would tell you the line is wrong if you had debug enabled.</p>\n\n<pre><code>    int i=0;\n    char *cwd;\n    char *buf = (char *)kmalloc(GFP_KERNEL,100*sizeof(char));\n</code></pre>\n\n<p>Why cast, why 100 and why include sizeof(char)? Hardcoded 100 here is additionally wrong as it invites an error prone repetition of the number.</p>\n\n<pre><code>    while(filestable-&gt;fd[i] != NULL){\n</code></pre>\n\n<p>Not only fd table lock is not held, hence the traversal is unsafe, it does not work they way you want it to. A process can have unused fds in-between used ones.</p>\n\n<pre><code>        files_path = filestable-&gt;fd[i]-&gt;f_path;\n        cwd=d_path(&amp;files_path,buf, 100*sizeof(char));\n</code></pre>\n\n<p>Invited error prone repetition of the number 100. What makes you think it is safe to d_path here in the first place?</p>\n\n<pre><code>        printk(KERN_INFO \"Open FD with %d with name %s with access %x\\n\", i, cwd,filestable-&gt;fd[i]-&gt;f_mode);\n\n        //printk(KERN_INFO \"FMode read:%x Fmodewrite:%x\\n\",FMODE_READ,FMODE_WRITE);\n\n\n        //Check access mode\n        if(filestable-&gt;fd[i]-&gt;f_mode==FMODE_READ){\n            printk(KERN_INFO \"File has access FMODE_READ\\n\");\n        }else if(filestable-&gt;fd[i]-&gt;f_mode==FMODE_WRITE){\n            printk(KERN_INFO \"File has access FMODE_WRTIE\\n\");\n        }\n        i++;\n    }\n    return 0;\n}\n\nstatic void __exit mainExit(void){\n    printk(KERN_INFO \"Goodbye Kernel!. Returning to normal useless world!\\n\");\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 4108840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wNC7R.jpg?s=128&g=1", "display_name": "sensei374121", "link": "https://stackoverflow.com/users/4108840/sensei374121"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1392, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1478766842, "creation_date": 1478724533, "question_id": 40515782, "link": "https://stackoverflow.com/questions/40515782/understanding-linux-kernel-data-structures-for-handling-file-descriptors", "title": "Understanding linux kernel data structures for handling file descriptors", "body": "<p>My goal is to modify a process's open file descriptor's access permission. For eg, there is a process whose PID is known, which has 2 file descriptors open apart from the standard 3. One was opened with read only permission and other was opened with write only permission. I want to modify the file descriptors permission from read only to read and write. After which, the file descriptor can be used to write the object it was created with.</p>\n\n<p>I have written a kernel module that gives me access to the file descriptor of the process identified by its PID. I searched the header and forums to understand how the linux data structure works for handling the file descriptor but I am still confused. What I found out is, every process has its own <strong><em>task_struct</em></strong>, which contains a member for all open files under, which contains an array of open file descriptor. I do not know how it links from here on with the inode.</p>\n\n<p>I found out that there is member of struct file, called as <strong><em>f_mode</em></strong> that gives us the permissions but I cannot find a method to call it. When I access it directly, it gives me an unsigned int but I don't know what value maps to what? Also, I am not sure if this is the data member which stores the access permissions. If I modify this would it change the access permissions for file descriptor? </p>\n\n<p>The code is given below:</p>\n\n<pre><code>static int __init mainInit(void){\n\n    int pid=13433;\n    struct task_struct * task;\n    struct files_struct * files;\n    struct fdtable * filestable;\n    struct path files_path;\n\n    //Get Task structure from PID\n    task = pid_task(find_vpid(pid), PIDTYPE_PID );\n    //Get open FIles from the task tstructure\n    files = task-&gt;files;\n\n    filestable=files_fdtable(files);\n\n    int i=0;\n    char *cwd;\n    char *buf = (char *)kmalloc(GFP_KERNEL,100*sizeof(char));\n\n    while(filestable-&gt;fd[i] != NULL){\n        files_path = filestable-&gt;fd[i]-&gt;f_path;\n        cwd=d_path(&amp;files_path,buf, 100*sizeof(char));\n\n        printk(KERN_INFO \"Open FD with %d with name %s with access %x\\n\", i, cwd,filestable-&gt;fd[i]-&gt;f_mode);\n\n        //printk(KERN_INFO \"FMode read:%x Fmodewrite:%x\\n\",FMODE_READ,FMODE_WRITE);\n\n\n        //Check access mode\n        if(filestable-&gt;fd[i]-&gt;f_mode==FMODE_READ){\n            printk(KERN_INFO \"File has access FMODE_READ\\n\");\n        }else if(filestable-&gt;fd[i]-&gt;f_mode==FMODE_WRITE){\n            printk(KERN_INFO \"File has access FMODE_WRTIE\\n\");\n        }\n        i++;\n    }\n    return 0;\n}\n\nstatic void __exit mainExit(void){\n    printk(KERN_INFO \"Goodbye Kernel!. Returning to normal useless world!\\n\");\n}\n\nmodule_init(mainInit);\nmodule_exit(mainExit);\n</code></pre>\n"}, {"tags": ["c", "gcc", "compiler-errors", "libc"], "comments": [{"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 1, "creation_date": 1478723875, "post_id": 40515557, "comment_id": 68272829, "body": "that&#39;s not a linker error,, <code>#include</code> problem somewhere"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 2, "creation_date": 1478723888, "post_id": 40515557, "comment_id": 68272835, "body": "you should figure out why you&#39;re getting the compiler warnings and errors. It&#39;s <i>not</i> a link problem. Since you&#39;re including <code>time.h</code> you shouldn&#39;t have any warnings. Can you create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> so we can help you further? Maybe the <code>c99</code> flag gets in the way? (just trying to guess something)"}, {"owner": {"reputation": 96, "user_id": 6581851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ed4ab470b7ff7201795a0db634ce551?s=128&d=identicon&r=PG&f=1", "display_name": "Bonan", "link": "https://stackoverflow.com/users/6581851/bonan"}, "edited": false, "score": 2, "creation_date": 1478724058, "post_id": 40515557, "comment_id": 68272915, "body": "will you try -std=gnu99 instead?"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1478724275, "post_id": 40515557, "comment_id": 68273013, "body": "Also, linking order can and does matter. Surely someone here can explain in more detail, but I&#39;d be wary of putting <code>-lrt</code> at the very end of my <code>gcc</code> command. I suspect you may run into &quot;undefined reference&quot; problems with that at the end after you resolve this issue."}, {"owner": {"reputation": 235, "user_id": 1609044, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d37baab4c209c1a084a98d62d5956f2a?s=128&d=identicon&r=PG", "display_name": "Steven", "link": "https://stackoverflow.com/users/1609044/steven"}, "edited": false, "score": 0, "creation_date": 1478725649, "post_id": 40515557, "comment_id": 68273714, "body": "Replacing -std=c99 with -std=gnu99 allowed it to compile. Removing the -std also compiled fine. What is wrong with using c99?"}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 1, "creation_date": 1478727322, "post_id": 40515557, "comment_id": 68274515, "body": "@Steven When you use -std=c99, you only get access to the standard C functions in the standard header files. clock_gettime() from time.h is defined by the posix standard, not the C standard."}], "answers": [{"comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1478724364, "post_id": 40515669, "comment_id": 68273068, "body": "tried that on MinGW, still the same compilation errors... You read this: <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=47571\" rel=\"nofollow noreferrer\">gcc.gnu.org/bugzilla/show_bug.cgi?id=47571</a>"}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1478727241, "post_id": 40515669, "comment_id": 68274469, "body": "@Jean-Fran&#231;oisFabre Mingw does not give you access to all posix functions. The OP is using Linux, so this will work fine."}], "tags": [], "owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "is_accepted": true, "score": 8, "last_activity_date": 1478724096, "creation_date": 1478724096, "answer_id": 40515669, "question_id": 40515557, "link": "https://stackoverflow.com/questions/40515557/compilation-error-on-clock-gettime-and-clock-monotonic/40515669#40515669", "title": "compilation error on clock_gettime and CLOCK_MONOTONIC", "body": "<p>Before including the header(<code>&lt;time.h&gt;</code>), do </p>\n\n<pre><code>#define _POSIX_C_SOURCE 199309L\n</code></pre>\n\n<hr>\n\n<p><a href=\"http://man7.org/linux/man-pages/man2/clock_gettime.2.html\" rel=\"noreferrer\">http://man7.org/linux/man-pages/man2/clock_gettime.2.html</a></p>\n\n<blockquote>\n  <p>Feature Test Macro Requirements for glibc (see feature_test_macros(7)):</p>\n\n<pre><code>   clock_getres(), clock_gettime(), clock_settime():\n          _POSIX_C_SOURCE &gt;= 199309L\n</code></pre>\n</blockquote>\n\n<hr>\n\n<p><a href=\"http://man7.org/linux/man-pages/man7/feature_test_macros.7.html\" rel=\"noreferrer\">http://man7.org/linux/man-pages/man7/feature_test_macros.7.html</a></p>\n\n<blockquote>\n  <p>_POSIX_C_SOURCE\n        Defining this macro causes header files to expose definitions as\n        follows:</p>\n\n<pre><code>  \u00b7  The value 1 exposes definitions conforming to POSIX.1-1990 and\n     ISO C (1990).\n\n  \u00b7  The value 2 or greater additionally exposes definitions for\n     POSIX.2-1992.\n\n  \u00b7  The value 199309L or greater additionally exposes definitions\n     for POSIX.1b (real-time extensions).\n\n  \u00b7  The value 199506L or greater additionally exposes definitions\n     for POSIX.1c (threads).\n\n  \u00b7  (Since glibc 2.3.3) The value 200112L or greater additionally\n     exposes definitions corresponding to the POSIX.1-2001 base\n     specification (excluding the XSI extension).  This value also\n     causes C95 (since glibc 2.12) and C99 (since glibc 2.10)\n     features to be exposed (in other words, the equivalent of\n     defining _ISOC99_SOURCE).\n\n  \u00b7  (Since glibc 2.10) The value 200809L or greater additionally\n     exposes definitions corresponding to the POSIX.1-2008 base\n     specification (excluding the XSI extension).\n</code></pre>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 2799, "user_id": 1747493, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Ro2p4.jpg?s=128&g=1", "display_name": "Harald", "link": "https://stackoverflow.com/users/1747493/harald"}, "edited": false, "score": 0, "creation_date": 1585043735, "post_id": 58695500, "comment_id": 107621455, "body": "This answer is not helping at all. Please, provide further links to your statements and give appropriate solution. The way you responded does not solve what OP asked."}], "tags": [], "owner": {"reputation": 1, "user_id": 6323753, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0EyRVXpa_dg/AAAAAAAAAAI/AAAAAAAAAd0/CFWFau7H5Sw/photo.jpg?sz=128", "display_name": "Rajitha Prabath", "link": "https://stackoverflow.com/users/6323753/rajitha-prabath"}, "is_accepted": false, "score": -1, "last_activity_date": 1572877801, "creation_date": 1572877801, "answer_id": 58695500, "question_id": 40515557, "link": "https://stackoverflow.com/questions/40515557/compilation-error-on-clock-gettime-and-clock-monotonic/58695500#58695500", "title": "compilation error on clock_gettime and CLOCK_MONOTONIC", "body": "<p>if you can use the following linker and Compiler flags</p>\n\n<pre><code>CFLAGS  = -g -Wall -std=c99 -D_POSIX_SOURCE -D_GNU_SOURCE\nLDFLAGS = -lpthread -lrt \n</code></pre>\n\n<p>you can get the build done in the Linux systems. -lrt linker and -D_POSIX_SOURCE are the important ones</p>\n"}, {"tags": [], "owner": {"reputation": 579, "user_id": 2562775, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/SiS8c.jpg?s=128&g=1", "display_name": "JimBamFeng", "link": "https://stackoverflow.com/users/2562775/jimbamfeng"}, "is_accepted": false, "score": 0, "last_activity_date": 1577995001, "creation_date": 1577995001, "answer_id": 59569249, "question_id": 40515557, "link": "https://stackoverflow.com/questions/40515557/compilation-error-on-clock-gettime-and-clock-monotonic/59569249#59569249", "title": "compilation error on clock_gettime and CLOCK_MONOTONIC", "body": "<p>Simply replace -std=c99 with -std=gnu99.\nThisway you do not have to add _POSIX_C_SOURCE </p>\n"}], "owner": {"reputation": 235, "user_id": 1609044, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d37baab4c209c1a084a98d62d5956f2a?s=128&d=identicon&r=PG", "display_name": "Steven", "link": "https://stackoverflow.com/users/1609044/steven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14938, "favorite_count": 0, "accepted_answer_id": 40515669, "answer_count": 3, "score": 2, "last_activity_date": 1577995001, "creation_date": 1478723689, "last_edit_date": 1478724489, "question_id": 40515557, "link": "https://stackoverflow.com/questions/40515557/compilation-error-on-clock-gettime-and-clock-monotonic", "title": "compilation error on clock_gettime and CLOCK_MONOTONIC", "body": "<p>I'm using clock_gettime in a program. I've tried including  as well as  but neither works. I have also added -lrt to my compiler arguments but still I get the same errors.</p>\n\n<p>This is on</p>\n\n<pre><code>CentOS Linux release 7.2.1511 (Core)\ngcc (GCC) 4.8.5 20150623 (Red Hat 4.8.5-4)\nGNU ld version 2.23.52.0.1-55.el7 20130226\nldd (GNU libc) 2.17\n</code></pre>\n\n<p>Compiler output:</p>\n\n<pre><code>gcc -o main packet.c connect.c transport.c accept.c main.c close.c util.c receive.c send.c congestion.c -Wall -g -std=c99 -lrt\nutil.c: In function \u2018millis\u2019:\nutil.c:42:21: error: storage size of \u2018t\u2019 isn\u2019t known\n     struct timespec t;\n                     ^\nutil.c:43:5: warning: implicit declaration of function \u2018clock_gettime\u2019 [-Wimplicit-function-declaration]\n     clock_gettime(CLOCK_MONOTONIC_RAW, &amp;t);\n     ^\nutil.c:43:19: error: \u2018CLOCK_MONOTONIC_RAW\u2019 undeclared (first use in this function)\n     clock_gettime(CLOCK_MONOTONIC_RAW, &amp;t);\n               ^\n</code></pre>\n\n<p>Makefile</p>\n\n<pre><code>CFLAGS = -Wall -g -std=c99\nLIBS = -lrt\n\n# Should be equivalent to your list of C files, if you don't build selectively\nSRC=$(wildcard *.c)\n\nmain: $(SRC)\n    gcc -o $@ $^ $(CFLAGS) $(LIBS)\n</code></pre>\n\n<p>Top of util.h</p>\n\n<pre><code>#ifndef UTILS_438_H_\n#define UTILS_438_H_\n\n#include \"const.h\"\n#include \"data.h\"\n#include \"transport.h\"\n\n#include &lt;time.h&gt;\n</code></pre>\n\n<p>Top of util.c</p>\n\n<pre><code>#include \"util.h\"\n\n#include &lt;time.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n</code></pre>\n\n<p>Please let me know if I can supply more information to help answer this</p>\n"}, {"tags": ["c", "binary", "scientific-notation"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1478723371, "post_id": 40515437, "comment_id": 68272547, "body": "Please show the code that is troublesome. And <code>print(f)</code> followed by <code>print(bin(f))</code> is very strange. Moreover, how can you possibly hope to extract that huge number into 32 bit variable?"}, {"owner": {"reputation": 167, "user_id": 6674014, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9af46c56f084518c7be4c2f1fa711191?s=128&d=identicon&r=PG", "display_name": "DCOPTimDowd", "link": "https://stackoverflow.com/users/6674014/dcoptimdowd"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1478723836, "post_id": 40515437, "comment_id": 68272800, "body": "I can&#39;t show the exact code, as it&#39;s proprietary. The print() calls were only a way to explain what happens during the system&#39;s conversion. And the number is what I believe is FLOAT_MIN, but regardless, any large, 32-bit number would do."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1478723934, "post_id": 40515437, "comment_id": 68272852, "body": "Whatever, you won&#39;t get <code>-340282346638528859811704183484516925440</code> into 32 bits. That is why we use floating point types - for the range (but not the precision)."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1478723970, "post_id": 40515437, "comment_id": 68272875, "body": "The issue is most likely in the <code>bin</code> function.  We need to see that to have any idea what the issue is."}, {"owner": {"reputation": 167, "user_id": 6674014, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9af46c56f084518c7be4c2f1fa711191?s=128&d=identicon&r=PG", "display_name": "DCOPTimDowd", "link": "https://stackoverflow.com/users/6674014/dcoptimdowd"}, "edited": false, "score": 0, "creation_date": 1478724119, "post_id": 40515437, "comment_id": 68272943, "body": "I know that bin() is the issue, but as I said, I don&#39;t have access to it. Hence me wanting a different way to convert. If I could call up whomever wrote this function and tell them to fix it I would."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1478724277, "post_id": 40515437, "comment_id": 68273015, "body": "In that case, you need to roll your own. Point a <code>char *</code> to the variable&#39;s address, then treat it as an array of <code>sizeof(float)</code> bytes.  For each byte, pull off the bits one by one. Keep in mind that the output will depend on the endianness of your system."}, {"owner": {"reputation": 167, "user_id": 6674014, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9af46c56f084518c7be4c2f1fa711191?s=128&d=identicon&r=PG", "display_name": "DCOPTimDowd", "link": "https://stackoverflow.com/users/6674014/dcoptimdowd"}, "edited": false, "score": 0, "creation_date": 1478724846, "post_id": 40515437, "comment_id": 68273295, "body": "Don&#39;t have pointers or addresses."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1478725070, "post_id": 40515437, "comment_id": 68273415, "body": "Your language is C-like but not actually C, and you do not have the C standard library available.  I don&#39;t see anything concrete left for us to base any answer upon, nor do I even see how we are supposed to interpret the question.  And your two edits (so far) don&#39;t adequately resolve these problems."}, {"owner": {"reputation": 167, "user_id": 6674014, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9af46c56f084518c7be4c2f1fa711191?s=128&d=identicon&r=PG", "display_name": "DCOPTimDowd", "link": "https://stackoverflow.com/users/6674014/dcoptimdowd"}, "edited": false, "score": 0, "creation_date": 1478725377, "post_id": 40515437, "comment_id": 68273587, "body": "That&#39;s what I&#39;m afraid of. I&#39;ve tried parsing the bits myself but they seem jumbled with larger numbers. If only there was a way to break a number apart, get each piece&#39;s binary, then combine them to make the full 32-bit representation."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1478725994, "post_id": 40515437, "comment_id": 68273885, "body": "@SamCo: You can reword the question to make it one that members here can help with. You have an unknown system architecture, and a limited subset of C to work with, but wish to know how the architecture represents floating-point values. Then, show us the binary patterns of positive and negative powers of two (..., 0.015625, 0.03125, 0.0625, 0.125, 0.25, 0.5, 1, 2, 4, 8, ...), and the same with 1 added to the positive ones and -1 to the negative ones. Then, we can see if we can infer the storage format. Expect further conversion tests to be needed."}, {"owner": {"reputation": 167, "user_id": 6674014, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9af46c56f084518c7be4c2f1fa711191?s=128&d=identicon&r=PG", "display_name": "DCOPTimDowd", "link": "https://stackoverflow.com/users/6674014/dcoptimdowd"}, "edited": false, "score": 0, "creation_date": 1478726348, "post_id": 40515437, "comment_id": 68274053, "body": "I&#39;m wording it the safest way I can. The floats are 32 bits, and the bin() conversion <b>only</b> fails when E notation gets involved. I do not need help understanding the architecture in general, only if there&#39;s a way to do the conversion in parts, or some similar, unconventional way."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1478726603, "post_id": 40515437, "comment_id": 68274170, "body": "In standard C, bit shifting is only defined on integer types, not floating point types.  So that most likely won&#39;t work."}, {"owner": {"reputation": 167, "user_id": 6674014, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9af46c56f084518c7be4c2f1fa711191?s=128&d=identicon&r=PG", "display_name": "DCOPTimDowd", "link": "https://stackoverflow.com/users/6674014/dcoptimdowd"}, "edited": false, "score": 0, "creation_date": 1478726711, "post_id": 40515437, "comment_id": 68274219, "body": "What I&#39;m doing does work for numbers (floats included) that don&#39;t cross into E notation."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1478726798, "post_id": 40515437, "comment_id": 68274261, "body": "@SamCo: I didn&#39;t say you needed help with the architecture, only that you need help understanding the format -- the bit patterns -- the architecture uses to represent floating-point values. The first step is to assume <code>bin()</code> is correct, and examine the bit patterns it produces for an easy subset of all floating-points."}, {"owner": {"reputation": 167, "user_id": 6674014, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9af46c56f084518c7be4c2f1fa711191?s=128&d=identicon&r=PG", "display_name": "DCOPTimDowd", "link": "https://stackoverflow.com/users/6674014/dcoptimdowd"}, "reply_to_user": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1478726947, "post_id": 40515437, "comment_id": 68274343, "body": "@Nominal Animal Okay. Then what numbers should I use to test? The ones you previously mentioned are too small."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1478727092, "post_id": 40515437, "comment_id": 68274399, "body": "@SamCo: You also mentioned that <code>bin()</code> seems correct for all values specified using decimal notation (i.e., non-scientific, not mantissa-and-exponent). Have you verified the compiler <i>parses</i> scientific format correctly in the first place? For example, use a loop or something to calculate the value of 10**20 via repeated multiplication, and compare the output of <code>bin()</code> of that value with the one for <code>1.0e+20f</code>."}, {"owner": {"reputation": 167, "user_id": 6674014, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9af46c56f084518c7be4c2f1fa711191?s=128&d=identicon&r=PG", "display_name": "DCOPTimDowd", "link": "https://stackoverflow.com/users/6674014/dcoptimdowd"}, "edited": false, "score": 0, "creation_date": 1478727718, "post_id": 40515437, "comment_id": 68274699, "body": "Okay. Here are the results: bin(1.0E+20f) == 00000000000000000000000000000001, bin(10^20) == 00000000000000000000000000000000."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1478728393, "post_id": 40515437, "comment_id": 68274965, "body": "@SamCo: That looks like a compiler bug, then! What about <code>bin(100000000000000000000.0f)</code> and <code>bin(1.0E+20f)</code>? I assume <code>bin(10^20)</code> refers to <code>bin(value)</code>, where <code>value</code> was computed using a loop, multiplying repeatedly by 10 or 100 or 100000? (If not, try that also.)"}, {"owner": {"reputation": 167, "user_id": 6674014, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9af46c56f084518c7be4c2f1fa711191?s=128&d=identicon&r=PG", "display_name": "DCOPTimDowd", "link": "https://stackoverflow.com/users/6674014/dcoptimdowd"}, "reply_to_user": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1478728718, "post_id": 40515437, "comment_id": 68275094, "body": "@NominalAnimal bin(100000000000000000000.0f) returns 01111111111111111111111111111111, which is NaN. And yes, a loop was used to do 10^20."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1478729267, "post_id": 40515437, "comment_id": 68275308, "body": "@SamCo: That means your compiler is buggy. The only recourse I know of in that situation, is to contact the vendor. (And that&#39;s why I avoid closed proprietary toolchains like the plague, myself; I don&#39;t like being locked in to some salesman&#39;s whims.)"}, {"owner": {"reputation": 167, "user_id": 6674014, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9af46c56f084518c7be4c2f1fa711191?s=128&d=identicon&r=PG", "display_name": "DCOPTimDowd", "link": "https://stackoverflow.com/users/6674014/dcoptimdowd"}, "edited": false, "score": 0, "creation_date": 1478729582, "post_id": 40515437, "comment_id": 68275432, "body": "I&#39;ll look around and see what I can find. Until then I&#39;ll simply put a size limit on the conversion with a dev note. Thanks for all your help. If you have any suggestions on how to reword the question to stop confusing everybody (and to stop getting downvotes), I&#39;d take you up on those too. :)"}, {"owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "edited": false, "score": 0, "creation_date": 1478730763, "post_id": 40515437, "comment_id": 68275867, "body": "@SamCo yes, that would be nice, just wanted to post a solution with respect to  your restrictions on operators (and very little and adaptable assumptions on sizes) only to find out that the question has been closed by the usual suspects for not being clear enough. Yes, it is according to the rules, but their impatience sometimes..."}], "answers": [{"tags": [], "owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "is_accepted": false, "score": 1, "last_activity_date": 1478729140, "creation_date": 1478729140, "answer_id": 40516801, "question_id": 40515437, "link": "https://stackoverflow.com/questions/40515437/create-binary-in-steps/40516801#40516801", "title": "Create binary in steps", "body": "<p>This is not an answer, but more like a summary from several comments to the original question, followed by my suggestions on as to how I'd try to pinpoint the problem.</p>\n\n<hr>\n\n<p>First, we assume we are in a situation where we have a only a subset of C (or similar enough language) -- for example, no standard C library, but perhaps some microcontroller functionality.</p>\n\n<p>Second, the problem seems to be centered around two things: the scientific notation of floating-point constants (say, <code>1.0e+0f</code>), and the <code>bin()</code> function that returns bit pattern of said constant as a string.</p>\n\n<p>Third, although the <code>bin()</code> function works for decimal constants, but not those specified in the scientific format, it is unknown whether the problem is with the <code>bin()</code> function implementation, or in the compiler parsing the constants in the scientific notation.</p>\n\n<hr>\n\n<p>At the very core, we do not even know if <code>float</code> refers to a floating-point type, or some sort of internal type that <em>supports many of the same operations</em>.</p>\n\n<p>For example, many microcontroller applications routinely use fixed-point arithmetic to avoid the complexity of implementing a real floating-point type. (That is, having some kind of mantissa, or multiplier; sign (positive or negative); and an exponent, so that the value represented is <code>\u00b1</code> <code>mantissa</code> \u00d7 radix<sup><code>exponent</code></sup>.)</p>\n\n<p>I suggest to first verify if constants written in scientific notation yield the exact same values as constants written in plain decimal. This will tell us if the compiler has a bug in parsing numeric constants written in scientific notation. This is surprisingly possible, especially if the underlying <code>float</code> format is not hardware-supported.</p>\n\n<p>Essentially, if</p>\n\n<pre><code>float a = 1000000000000000.0f;  /* 1*10^15 */\nprint (a);\nprint (bin(a));\n</code></pre>\n\n<p>produces different output to</p>\n\n<pre><code>float b = 1.0E+15;\nprint (b);\nprint (bin(b));\n</code></pre>\n\n<p>we can immediately tell which one is at fault. If the first lines differ, then the compiler parses numeric constants specified in scientific notation differently to those specified in plain decimal format, which must be a compiler bug. If the second lines differ, then the bug is in <code>bin()</code> function instead.</p>\n\n<p>Next, I suggest to verify whether compile time constants match ones computed exactly. Exact computation is a bit of a problem, since we wish to avoid rounding (including rounding due to loss of precision; domain error), although multiplying an integer value by either powers of ten, or even integers should cause the least rounding issues. (This is only because it is likely that if <code>float</code> is a true floating-point format, it likely has a radix of 10 or a power of two.)</p>\n\n<p>For example, one could compare the first of above to</p>\n\n<pre><code>float b = 1.0f;\nfloat c = 10.0f;\nint   i;\n\nfor (i = 1; i &lt;= 15; i++)\n    b = b * c;\n\nprint (b)\nprint (bin(b))\n</code></pre>\n\n<p>and, with <code>float a = 1152921504606846976.0f</code> (2<sup>60</sup>), and</p>\n\n<pre><code>float b = 1.0f;\nfloat c = 2.0f;\nint   i;\n\nfor (i = 1; i &lt;= 60; i++)\n    b = b * c;\n\nprint (b)\nprint (bin(b))\n</code></pre>\n\n<p>One or both of the above may print different (but close) values, if <code>float</code> is a true floating-point type, just with a radix not 10 nor a power of 2.</p>\n\n<p>If the <code>bin()</code> function is (suspected to be) incorrect, printing patterns with known binary representation should be illuminating. For example,</p>\n\n<pre><code>float a = 1.0f;\nfloat b;\nfloat c = 2.0f;\nint   i;\n\nfor (i = 1; i &lt;= 60; i++) {\n    a = a * c;\n    b = a + 1.0f;\n    print (b);\n    print (bin(b));\n}\n</code></pre>\n\n<p>Depending on the results of the above experiments (and if none, extending the range of tested numbers, for example) -- and similarly testing for non-integer representations (divide by 2 or 10, for example) --, I would continue trying to pinpoint the \"inconsistencies\".</p>\n\n<p>At this point of this writing, I'd need the outputs of the above tests to develop a further strategy (unless the above already pinpointed the exact cause).</p>\n"}], "owner": {"reputation": 167, "user_id": 6674014, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9af46c56f084518c7be4c2f1fa711191?s=128&d=identicon&r=PG", "display_name": "DCOPTimDowd", "link": "https://stackoverflow.com/users/6674014/dcoptimdowd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "closed_date": 1478730170, "answer_count": 1, "score": -3, "last_activity_date": 1478799884, "creation_date": 1478723232, "last_edit_date": 1478799884, "question_id": 40515437, "link": "https://stackoverflow.com/questions/40515437/create-binary-in-steps", "closed_reason": "Needs details or clarity", "title": "Create binary in steps", "body": "<p>Here's the challenge:</p>\n\n<p>I'm wanting to find a way to create the <strong>32-bit binary</strong> of a number that has it's true binary jumbled due to an environment error when handling large numbers. <strong>Basically</strong> I'm wondering if there is a way to convert any number to binary <strong>in pieces</strong>, like break apart the <strong>number itself</strong> somehow, get each section's <strong>individual binary</strong>, and then snap them back together.</p>\n\n<p>I'm working in a <strong>C-like</strong> environment but that is <strong>not actually C</strong>, which means no std stuff is available. There are also no pointers or addresses, so I need something extremely simple in terms of technique, like a loop through an array or shifting the parts to their proper place.</p>\n\n<p>Here's an example of what I'm trying to do:</p>\n\n<ol>\n<li>Start with a large number: -3.4028235e+38<br>\n1a. BIN: 11111111011111111111111111111111</li>\n<li>Remove the E notation part<br>\n2a. Create -34028235<br>\n2b. BIN: 11001100000000011100111010110011</li>\n<li>Turn 2b into 1a by fitting the E notation back in (???)</li>\n</ol>\n\n<p>I hope I'm explaining this well enough. I know it's a confusing request. Please note that I cannot show anything the environment is doing, as I don't have access to the API source. All I have are examples of the broken binary, which have already confirmed the issue is with the system itself.</p>\n\n<p>This is what I have available that seems pertinent to the request:<br>\nfor loops<br>\nif statements<br>\narray indexing<br>\nint to str conversion (-3.4028235e+38 becomes \"-3.4028235e+38\")<br>\nint to bin conversion with small numbers (5000 works fine, but 5.0e+15 does not)<br>\nBit manipulation</p>\n"}, {"tags": ["c", "printf", "double", "scanf"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1478733834, "post_id": 40515303, "comment_id": 68277013, "body": "Turn on compiler warnings.  That should have caught <code>double n1; scanf(&quot;%d&quot;, &amp;n1);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1478722774, "creation_date": 1478722774, "answer_id": 40515326, "question_id": 40515303, "link": "https://stackoverflow.com/questions/40515303/why-am-i-losing-the-value-of-variable-n2/40515326#40515326", "title": "Why am i losing the value of variable n2?", "body": "<p>The problem is in</p>\n\n<pre><code> scanf(\"%d\", &amp;n1);\n scanf(\"%d\", &amp;n2);\n</code></pre>\n\n<p><code>n1</code> and <code>n2</code> are of type <code>double</code>, so using <code>%d</code> format specifier invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>.</p>\n\n<p>Quoting <code>C11</code>, chapter \u00a77.21.6.2, for <code>fscanf()</code>, (<em>emphasis mine</em>)</p>\n\n<blockquote>\n  <p><code>d</code> <br> Matches an optionally signed decimal integer, whose format is the same as\n  expected for the subject sequence of the strtol function with the value 10\n  for the base argument. <strong>The corresponding argument shall be a pointer to\n  signed integer.</strong></p>\n</blockquote>\n\n<p>and</p>\n\n<blockquote>\n  <p>[...] Unless assignment suppression was indicated by a *, the\n  result of the conversion is placed in the object pointed to by the first argument following\n  the format argument that has not already received a conversion result. If this object\n  does not have an appropriate type, or if the result of the conversion cannot be represented\n  in the object, the behavior is undefined.</p>\n</blockquote>\n\n<p><strong>solution:</strong> For printing <code>double</code>s, you need to use <code>%f</code> and for scanning the values, you need to use <code>%lf</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 1, "last_activity_date": 1478722827, "creation_date": 1478722827, "answer_id": 40515344, "question_id": 40515303, "link": "https://stackoverflow.com/questions/40515303/why-am-i-losing-the-value-of-variable-n2/40515344#40515344", "title": "Why am i losing the value of variable n2?", "body": "<p>The variables <code>n1</code> and <code>n2</code> are of type <code>double</code>.  However, you're using the <code>%d</code> format specifier in <code>printf</code> and <code>scanf</code>, which expect an <code>int</code> and a pointer to <code>int</code>.</p>\n\n<p>For reading / writing a <code>double</code>, use the <code>%f</code> format specifier for <code>printf</code> and <code>%lf</code> for <code>scanf</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1478733748, "post_id": 40515382, "comment_id": 68276985, "body": "You should probably clarify your last sentence; using <code>%f</code> in a call to the <code>scanf()</code> family won&#39;t work with <code>n1</code> being a <code>double</code> \u2014 but it is fine for the <code>printf()</code> family."}], "tags": [], "owner": {"reputation": 1, "user_id": 7133086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d45dd5e4924626b411bf748f7a7804f?s=128&d=identicon&r=PG&f=1", "display_name": "Saurabh", "link": "https://stackoverflow.com/users/7133086/saurabh"}, "is_accepted": false, "score": 0, "last_activity_date": 1478733684, "last_edit_date": 1478733684, "creation_date": 1478723012, "answer_id": 40515382, "question_id": 40515303, "link": "https://stackoverflow.com/questions/40515303/why-am-i-losing-the-value-of-variable-n2/40515382#40515382", "title": "Why am i losing the value of variable n2?", "body": "<p>You are using double data type for <code>n1</code> and <code>n2</code>. \nThe printing format specifier for double is <code>%f</code>; the scanning format is <code>%lf</code>. \nInstead of <code>%d</code>, use <code>%f</code> every time for <code>n1</code> and <code>n2</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 6713536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de03bf2e310cb41317d10b460d1c617a?s=128&d=identicon&r=PG&f=1", "display_name": "Pchelpme", "link": "https://stackoverflow.com/users/6713536/pchelpme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1478733684, "creation_date": 1478722674, "last_edit_date": 1478723020, "question_id": 40515303, "link": "https://stackoverflow.com/questions/40515303/why-am-i-losing-the-value-of-variable-n2", "title": "Why am i losing the value of variable n2?", "body": "<p>I am doing school work and I came across a problem. Why do I loose the value of the variable <code>n2</code>?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint opt;\ndouble n1;\ndouble n2;\n\nint main()\n{\n    printf(\"Hello and welcome \\n\");\n    printf(\"Lets do Some math! \\n\");\n    printf(\"Menu!\\n\");\n    printf(\"1- \\t Areas \\n\");\n    printf(\"2- \\t Perimetros \\n\");\n    scanf(\"%d\",&amp;opt);\n\n    switch (opt){\n        case 1:\n            Areas();\n            break;\n\n        case 2:\n            break;\n    }\n    return 0;\n}\n\nvoid Areas(){\n    printf(\"Area de:\\n\");\n    printf(\"1- \\t Quadrado\\n\");\n    printf(\"2- \\t Retangulo\\n\");\n    printf(\"3- \\t Losangulo\\n\");\n    printf(\"1- \\t Circulo\\n\");\n    scanf(\"%d\", &amp;opt);\n\n    switch (opt){\n        case 1:\n            Medidas(\"dos lados.\");\n            printf(\"%d  %d\\n\", n1,n2 );\n            break;\n\n        case 2:\n            break;\n    }\n}\n\nvoid Medidas(char string[]){\n    printf(\"Introduzir as Medidas %s \\n\", string);\n    scanf(\"%d\", &amp;n1);\n    printf(\"Next\\n\");\n    scanf(\"%d\", &amp;n2);\n}\n</code></pre>\n\n<p>I tried many things and nothing works. The</p>\n\n<pre><code>    printf(\"%d  %d\\n\", n1,n2 );\n</code></pre>\n\n<p>is just for debugging purposes.</p>\n"}, {"tags": ["c", "for-loop"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1478721613, "post_id": 40514969, "comment_id": 68271687, "body": "The code shown will not even enter the body of the loop. Please post your actual code."}, {"owner": {"reputation": 2076, "user_id": 1866196, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/TrCUq.png?s=128&g=1", "display_name": "skrtbhtngr", "link": "https://stackoverflow.com/users/1866196/skrtbhtngr"}, "edited": false, "score": 0, "creation_date": 1478721808, "post_id": 40514969, "comment_id": 68271781, "body": "This is a very wrong code you have given!"}, {"owner": {"reputation": 1022, "user_id": 5401214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a528a41d62d3f2304368b8322c1369a?s=128&d=identicon&r=PG&f=1", "display_name": "Norbert Lange", "link": "https://stackoverflow.com/users/5401214/norbert-lange"}, "edited": false, "score": 0, "creation_date": 1478721900, "post_id": 40514969, "comment_id": 68271818, "body": "Scanf scans for a number, if if finds one it will remove the corresponding text from stdin. You dont enter a number, so the function fails without removing anything. The next iteration your old input is still waiting. You need to use fgets to take a whole line, then you can parse it with sscanf for example"}, {"owner": {"reputation": 111, "user_id": 7138100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a113ac7f06d12b0fdffdae15e497f17e?s=128&d=identicon&r=PG&f=1", "display_name": "Defcon97", "link": "https://stackoverflow.com/users/7138100/defcon97"}, "reply_to_user": {"reputation": 1022, "user_id": 5401214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a528a41d62d3f2304368b8322c1369a?s=128&d=identicon&r=PG&f=1", "display_name": "Norbert Lange", "link": "https://stackoverflow.com/users/5401214/norbert-lange"}, "edited": false, "score": 0, "creation_date": 1478723002, "post_id": 40514969, "comment_id": 68272361, "body": "i don&#39;t know why you say the code is wrong really...it compiles without any warning or errors with gcc.  @NorbertLange ok i think i get what you are saying but i am not familiar with &quot;fgets&quot; can you mane an example of it should be written?"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1478725859, "post_id": 40514969, "comment_id": 68273822, "body": "@Defcon97: just because it compiles doesn&#39;t mean it&#39;s right.  You initialize <code>n</code> to 0, which causes <code>n != 0</code> to evaluate to <code>false</code>, so the loop body isn&#39;t entered at all.  I think you meant to write <code>n == 0</code>, which indicates that the <code>scanf</code> call didn&#39;t match the input.  However, if a matching failure occurs, the offending character is left in the input stream to foul up the next read.  You&#39;ll want to remove it with a <code>getchar()</code> call or something like that before trying another <code>scanf</code>."}, {"owner": {"reputation": 111, "user_id": 7138100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a113ac7f06d12b0fdffdae15e497f17e?s=128&d=identicon&r=PG&f=1", "display_name": "Defcon97", "link": "https://stackoverflow.com/users/7138100/defcon97"}, "reply_to_user": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1478726024, "post_id": 40514969, "comment_id": 68273893, "body": "@JohnBode oh sorry yeah you are right that was a typo...my bad i&#39;ll edit it right away"}], "owner": {"reputation": 111, "user_id": 7138100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a113ac7f06d12b0fdffdae15e497f17e?s=128&d=identicon&r=PG&f=1", "display_name": "Defcon97", "link": "https://stackoverflow.com/users/7138100/defcon97"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "closed_date": 1478721617, "answer_count": 0, "score": 0, "last_activity_date": 1478726060, "creation_date": 1478721453, "last_edit_date": 1478726060, "question_id": 40514969, "link": "https://stackoverflow.com/questions/40514969/for-loop-stuck-in-endless-loop", "closed_reason": "Duplicate", "title": "for-loop stuck in endless loop", "body": "<p>Hi I know this will be quite an easy question but i'm quite a beginner yet.</p>\n\n<p>I was practicing on \"for\"-loops on C and wanted to write a program that asks you to input a number and that recognises whether your input is really a number. in case it isn't a number the program has to reiterate the question until the input is actually a number.</p>\n\n<p>The code i came up with is the following:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main () {\n  float a;\n  int n;\n  for(n = 0; n == 0;) {\n    printf(\"Insert your number:\\n\");\n    n = scanf(\"%f\", &amp;a);\n  }\n  printf(\"You wrote a number!\\n\");\n}\n</code></pre>\n\n<p>n is supposed to be the number of conversions the scanf function performed, so when that value is 1 we know the user actually wrote a number and not a character. this code looked fine but when i ran it I found a strange error. if I put a number in it just runs smoothly and straight out tells me i wrote a number. If i try to put a character in, let's say for example the letter 'a', it goes in an infinite loop and just keeps prinitng \"<code>Insert your number:</code>\" in the terminal endlessly.</p>\n\n<p>it looks like he understands that n is not equal to one so it starrts executing the commands in the for{} function but for some reason it keeps skipping the \"scanf\" command. thus the n-value never changes and the program keeps running the cicle for ever.</p>\n\n<p>What causes this error? and how do I fix it?</p>\n"}, {"tags": ["c", "segmentation-fault"], "comments": [{"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 2, "creation_date": 1478720747, "post_id": 40514750, "comment_id": 68271269, "body": "<code>printf(sizeof(hello));</code> is not how you print a number. <code>printf</code> will use that number as a <code>char*</code>, which most likely causes the segmentation fault. I&#39;m surprised your compiler didn&#39;t warn you about it."}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1478721105, "post_id": 40514750, "comment_id": 68271442, "body": "\u2026 And no, this has nothing to do with it running in a VM. (Quite curious about how you reached that conclusion.)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1478721347, "post_id": 40514750, "comment_id": 68271563, "body": "It is a good idea to read the man-page for standard functions you use before using them or suspecting the OS. And a VM will have impact on applications code at all. That&#39;s the fundamental idea of using one."}, {"owner": {"reputation": 148, "user_id": 3003753, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d1e1deba2cb46d90e572cc4ab900bc72?s=128&d=identicon&r=PG&f=1", "display_name": "dodo", "link": "https://stackoverflow.com/users/3003753/dodo"}, "reply_to_user": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1478728152, "post_id": 40514750, "comment_id": 68274871, "body": "@Biffen I came to the conclusion as I had no other explanation, and as it was a memory issue I thought it may be due to some memory management problems. However I did not think about <code>printf()</code> being the problem, I made the fatal mistake of assuming it took any argument like Java with <code>String.out.println()</code>."}], "answers": [{"comments": [{"owner": {"reputation": 148, "user_id": 3003753, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d1e1deba2cb46d90e572cc4ab900bc72?s=128&d=identicon&r=PG&f=1", "display_name": "dodo", "link": "https://stackoverflow.com/users/3003753/dodo"}, "edited": false, "score": 0, "creation_date": 1478728305, "post_id": 40514956, "comment_id": 68274930, "body": "This doesn&#39;t fix the original code I have, but it fixes the code in this question so I&#39;ll accept it. Useful to know at any rate :) Thanks!"}], "tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 3, "last_activity_date": 1478721376, "last_edit_date": 1592644375, "creation_date": 1478721376, "answer_id": 40514956, "question_id": 40514750, "link": "https://stackoverflow.com/questions/40514750/c-segmentation-fault-within-kali-linux-vm/40514956#40514956", "title": "C Segmentation Fault within Kali Linux VM", "body": "<p>You just need to read the <a href=\"http://man7.org/linux/man-pages/man3/fprintf.3.html\" rel=\"nofollow noreferrer\"><code>printf()</code></a> documentation carefully. It doesn't take an integer as its first argument.</p>\n<p>The problematic lines are:</p>\n<pre><code> printf(sizeof(hello));\n printf(ARR_LENGTH(hello));\n</code></pre>\n<p>It should be:</p>\n<pre><code> printf(&quot;%zu\\n&quot;, sizeof(hello));\n printf(&quot;%zu\\n&quot;, ARR_LENGTH(hello));\n</code></pre>\n<p>(<code>%zu</code> is the format specifier to print <code>size_t</code> values).</p>\n<p>My gcc compiler produces the warning:</p>\n<blockquote>\n<p>warning: passing argument 1 of \u2018printf\u2019 makes pointer from integer\nwithout a cast [-Wint-conversion]</p>\n</blockquote>\n<p>for those two statements. Up the compiler warning levels (in case you don't get them alrready).</p>\n"}], "owner": {"reputation": 148, "user_id": 3003753, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d1e1deba2cb46d90e572cc4ab900bc72?s=128&d=identicon&r=PG&f=1", "display_name": "dodo", "link": "https://stackoverflow.com/users/3003753/dodo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 363, "favorite_count": 0, "accepted_answer_id": 40514956, "answer_count": 1, "score": 0, "last_activity_date": 1478721376, "creation_date": 1478720567, "last_edit_date": 1478721206, "question_id": 40514750, "link": "https://stackoverflow.com/questions/40514750/c-segmentation-fault-within-kali-linux-vm", "title": "C Segmentation Fault within Kali Linux VM", "body": "<p>I am trying to create a C program in a Linux VM that uses a char array. I found that every time I try to do anything to the array, e.g. <code>sizeof()</code>, I get a segmentation fault. I wrote a test program that just made an array and got <code>sizeof()</code> as a test, and sure enough I get the same error.\nI think this is related to the program running in a VM. Here is the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#define ARR_LENGTH(x) sizeof(x) / sizeof(x[0])\n\nint main()\n{\n    printf(\"Hllo world!\\n\");\n    int sent = 10;\n    char hello[] = {'a','b','c','d','e','f','g','h'};\n    printf(sizeof(hello));\n    printf(ARR_LENGTH(hello));\n    return 0;\n}\n</code></pre>\n\n<p>Am I missing something, or is the VM likely the problem?</p>\n"}, {"tags": ["c", "if-statement", "while-loop"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1478720215, "post_id": 40514622, "comment_id": 68270993, "body": "You have not copied the successful string, only the pointer. Sadly, the string to which it points, gets overwritten at the next line. Have a look at <code>strdup</code>."}], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 7120150, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/268ec2feb511a8ff2127d986f765e0a6?s=128&d=identicon&r=PG&f=1", "display_name": "NouName", "link": "https://stackoverflow.com/users/7120150/nouname"}, "edited": false, "score": 0, "creation_date": 1478720979, "post_id": 40514681, "comment_id": 68271383, "body": "Ok, I got this, thanks. Is there any other way to write that program which wont require those &#39;fancy&#39; function?"}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 87, "user_id": 7120150, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/268ec2feb511a8ff2127d986f765e0a6?s=128&d=identicon&r=PG&f=1", "display_name": "NouName", "link": "https://stackoverflow.com/users/7120150/nouname"}, "edited": false, "score": 0, "creation_date": 1478721107, "post_id": 40514681, "comment_id": 68271445, "body": "Unless there&#39;s any need to keep &quot;remember&quot; those lines, you can avoid the copying by printing immediately inside the loop. i.e. you can replacew <code>temp[i]=line;</code> with <code>printf(&quot;%s\\n&quot;, line);</code>."}, {"owner": {"reputation": 87, "user_id": 7120150, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/268ec2feb511a8ff2127d986f765e0a6?s=128&d=identicon&r=PG&f=1", "display_name": "NouName", "link": "https://stackoverflow.com/users/7120150/nouname"}, "edited": false, "score": 0, "creation_date": 1478722453, "post_id": 40514681, "comment_id": 68272085, "body": "So I made changes according to your suggestions, but now it seems to crash after returning first line which follows the if statement"}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 87, "user_id": 7120150, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/268ec2feb511a8ff2127d986f765e0a6?s=128&d=identicon&r=PG&f=1", "display_name": "NouName", "link": "https://stackoverflow.com/users/7120150/nouname"}, "edited": false, "score": 0, "creation_date": 1478723098, "post_id": 40514681, "comment_id": 68272417, "body": "It works for me after the changes. See: <a href=\"http://ideone.com/9NSKG2\" rel=\"nofollow noreferrer\">ideone.com/9NSKG2</a> and the strdup version: <a href=\"http://ideone.com/xmm3k6\" rel=\"nofollow noreferrer\">ideone.com/xmm3k6</a>"}], "tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": false, "score": 1, "last_activity_date": 1478723213, "last_edit_date": 1478723213, "creation_date": 1478720289, "answer_id": 40514681, "question_id": 40514622, "link": "https://stackoverflow.com/questions/40514622/displaying-lines-with-given-number-of-characters/40514681#40514681", "title": "Displaying lines with given number of characters", "body": "<p>The problem is you are assigning the <em>same</em> address here:</p>\n\n<pre><code>temp[i]=line;\n</code></pre>\n\n<p>and <code>line</code> is used in the loop to read as well. That means it's overwritten in every iteration.</p>\n\n<p>Instead, you can use <code>strdup()</code> (POSIX function):</p>\n\n<pre><code>temp[i] = strdup(line);\n</code></pre>\n\n<p>to copy the lines you are interested in. If <code>strdup()</code> not available you can use <code>malloc()</code> + <code>strcpy()</code> to do the same. Plus, <code>free()</code> them later.</p>\n\n<p>In addition, be aware that:</p>\n\n<ul>\n<li><p><code>fgets()</code> will read in the newline character if there's room in the buffer which may not be what you want. So, you need to trim it out. You can do it with:</p>\n\n<pre><code>line[strcspn(line, \"\\n\")] = 0; /* trim the trailing newline, if any */\n</code></pre></li>\n<li><p>The arguments to <code>isalpha()</code> and <code>isdigit()</code> should be cast to <code>unsigned char</code> to avoid potential undefined behaviour i.e. these two lines:</p>\n\n<pre><code>if(isalpha(line[i])) numberAlpha++;\nelse if(isdigit(line[i])) numberDigit++;\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>if(isalpha((unsigned char)line[i])) numberAlpha++;\nelse if((unsigned char)isdigit(line[i])) numberDigit++;\n</code></pre></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 10963, "user_id": 306257, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/701752cfc3dd805d412884f38a464296?s=128&d=identicon&r=PG", "display_name": "Haldean Brown", "link": "https://stackoverflow.com/users/306257/haldean-brown"}, "is_accepted": false, "score": 1, "last_activity_date": 1478720334, "creation_date": 1478720334, "answer_id": 40514695, "question_id": 40514622, "link": "https://stackoverflow.com/questions/40514622/displaying-lines-with-given-number-of-characters/40514695#40514695", "title": "Displaying lines with given number of characters", "body": "<p>You're reusing the same buffer each time, and you're storing a pointer to that buffer in your <code>temp</code> array. What you're going to end up with is a bunch of the same pointer in that array, with that pointer pointing at the last line in the file.</p>\n\n<p>What you can do instead is to rewrite your <code>temp[i]=line</code> statement to the following:</p>\n\n<pre><code>temp[i] = malloc(sizeof(line))\nmemcpy(temp[i], line, sizeof(line))\n</code></pre>\n\n<p>In so doing, you'll be creating a new array with the contents of the matching line, which won't get overwritten when you come around and read the next line out of the file.</p>\n\n<p>Note that, because you're allocating that on the heap, at the end of your function you'll want to free it:</p>\n\n<pre><code>while (temp[k] != '\\0') {\n    printf(...);\n    free(temp[k]);\n    k++\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 111, "user_id": 7077220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30e7e77c2d42e7655a10500d87690959?s=128&d=identicon&r=PG&f=1", "display_name": "Raja Sudhan", "link": "https://stackoverflow.com/users/7077220/raja-sudhan"}, "is_accepted": false, "score": 1, "last_activity_date": 1478721941, "creation_date": 1478721941, "answer_id": 40515103, "question_id": 40514622, "link": "https://stackoverflow.com/questions/40514622/displaying-lines-with-given-number-of-characters/40515103#40515103", "title": "Displaying lines with given number of characters", "body": "<p>As said before , one issue is with copying of<br>\ntemp[i]=line;<br>\nThis can be solved by doing a new heap allocation and doing memcopy to temp.\nThe other issue that i could see is - with the value of variable i. Then temp array will always be assigned to strlen(line) index. You might be thinking of storing in the temp array from 0. Which is not happening.<br>\nThis can be solved by-  </p>\n\n<pre><code>int start_index=0;\nwhile(...){  \nif(numberAlpha+numberDigit&gt;10 &amp;&amp; numberDigit&gt;3){  \n        temp[start_index]=line;  \n        start_index++;  \n    }  \n}\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 7120150, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/268ec2feb511a8ff2127d986f765e0a6?s=128&d=identicon&r=PG&f=1", "display_name": "NouName", "link": "https://stackoverflow.com/users/7120150/nouname"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1478723213, "creation_date": 1478720045, "question_id": 40514622, "link": "https://stackoverflow.com/questions/40514622/displaying-lines-with-given-number-of-characters", "title": "Displaying lines with given number of characters", "body": "<p>I have written such a program which suppose to returns lines which are containing at least 11 characters and 4 digits. I messed up something with types of variables I guess but I cant figure out how should I fix it. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;string.h&gt;\n\n\nint main()\n{\n    char line[200];\n    char *temp[200];\n    int i = 0, k=0;\n\n    printf(\"Enter a string: \\n\");\n    while(fgets(line, sizeof(line),stdin))\n    {\n        int numberAlpha = 0;\n        int numberDigit = 0;\n        int i;\n        for(i=0; i&lt;strlen(line); i++){\n            if(isalpha(line[i])) numberAlpha++;\n            else if(isdigit(line[i])) numberDigit++;\n        }\n\n        if(numberAlpha+numberDigit&gt;10 &amp;&amp; numberDigit&gt;3){\n            temp[i]=line;\n            i++;\n        }\n    }\n    while(temp[k]!='\\0'){\n        printf(\"%s\", temp[k]);\n        k++;\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "pthreads"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1478718593, "post_id": 40514240, "comment_id": 68270243, "body": "Add a newline to the output format.   Messages don&#39;t appear otherwise (unless you flush them).  And use <code>int main(void)</code> when you&#39;re ignoring the command line arguments."}], "answers": [{"tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 7, "last_activity_date": 1478720069, "last_edit_date": 1478720069, "creation_date": 1478718752, "answer_id": 40514326, "question_id": 40514240, "link": "https://stackoverflow.com/questions/40514240/print-in-single-pthread/40514326#40514326", "title": "Print in single Pthread", "body": "<p>It's because your main thread returns and thus exits the process. It means the thread you created never gets a chance to run.</p>\n\n<p>Unlike just returning from main(), calling <code>pthread_exit(0)</code> from main(), will let the other thread continue executing.</p>\n\n<p>Alternatively, you can wait for the thread to complete execution by calling <code>pthread_join()</code> on the thread you created.</p>\n\n<p>When you execute in a loop, probably some of the threads you create gets executed before main thread exits, and thus appears to \"work\" (prints some <code>Hi</code>).\nBut it does have the same problem as the code you posted.</p>\n"}], "owner": {"reputation": 894, "user_id": 2445065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ecf68818f0f24fa84153c8e57d77e577?s=128&d=identicon&r=PG&f=1", "display_name": "rjs44", "link": "https://stackoverflow.com/users/2445065/rjs44"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 511, "favorite_count": 0, "accepted_answer_id": 40514326, "answer_count": 1, "score": 3, "last_activity_date": 1583490317, "creation_date": 1478718453, "last_edit_date": 1583490317, "question_id": 40514240, "link": "https://stackoverflow.com/questions/40514240/print-in-single-pthread", "title": "Print in single Pthread", "body": "<p>I'm trying to implement a program using Pthreads in C. Now, I've tried to let a single thread print \"Hi\":</p>\n\n<pre><code>void * generator(void *arguments){\n     printf(\"Hi\");\n     return NULL;\n}\n\nint main(int argc, const char* argv[]){\n     pthread_create(&amp;threads_ids[0], NULL, &amp;generator, NULL);=\n}\n</code></pre>\n\n<p>This doesn't work and doesn't print anything. However, when I put the creation of the pthread in a for loop it does print \"Hi\", but at each execution the occurrence differs.</p>\n\n<p>Is this normal behaviour, and if so; how can I fix it? Thanks in advance!</p>\n"}, {"tags": ["c", "gcc", "assembly", "x86", "prefetch"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1478715201, "post_id": 40513280, "comment_id": 68268620, "body": "The documentation is very clear. Which instructions it generates for a specific architecture of course depends on the features available. For some architectures it will not emit any instruction at all. So did you check which prefetch instructions your specific x86 target provides? What they actually do? And how they are related to the arguments? The instruction manuals for Intel and AMD are available for free download."}], "answers": [{"comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1478729489, "post_id": 40513689, "comment_id": 68275391, "body": "PREFETCHW exists on AMD CPUs, and Intel since Broadwell.  Excellent point that even if your current compile target doesn&#39;t support it, you should still express your intent correctly so you get good asm on other targets."}, {"owner": {"reputation": 33092, "user_id": 5801661, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D8ENZ.jpg?s=128&g=1", "display_name": "Margaret Bloom", "link": "https://stackoverflow.com/users/5801661/margaret-bloom"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1478767656, "post_id": 40513689, "comment_id": 68287049, "body": "Thank you @Peter , I totally missed that."}, {"owner": {"reputation": 273, "user_id": 5700061, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/39611b16b31ecfab7966f65bf368d6dd?s=128&d=identicon&r=PG&f=1", "display_name": "ANTHONY", "link": "https://stackoverflow.com/users/5700061/anthony"}, "edited": false, "score": 0, "creation_date": 1478934842, "post_id": 40513689, "comment_id": 68358348, "body": "Thank you for your responses. What is the use of specifying Read/Write in 2nd argument, wrt hardware.? How does hardware treat the things different.? It has same MSHR entries. I just want to know how hardware shows difference in treating these both R and W.!!"}, {"owner": {"reputation": 33092, "user_id": 5801661, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D8ENZ.jpg?s=128&g=1", "display_name": "Margaret Bloom", "link": "https://stackoverflow.com/users/5801661/margaret-bloom"}, "reply_to_user": {"reputation": 273, "user_id": 5700061, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/39611b16b31ecfab7966f65bf368d6dd?s=128&d=identicon&r=PG&f=1", "display_name": "ANTHONY", "link": "https://stackoverflow.com/users/5700061/anthony"}, "edited": false, "score": 1, "creation_date": 1478950767, "post_id": 40513689, "comment_id": 68361863, "body": "@ANTHONY Google for &quot;MESI protocol&quot;, it is the protocol that x86 use to keep the cache coherent. A cache line can be in any of the four states M,E,S,I at any moment. Writing in particular states is expensive because requires extra work, the W prefetch does this extra-work in addition to fetching the data."}, {"owner": {"reputation": 273, "user_id": 5700061, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/39611b16b31ecfab7966f65bf368d6dd?s=128&d=identicon&r=PG&f=1", "display_name": "ANTHONY", "link": "https://stackoverflow.com/users/5700061/anthony"}, "edited": false, "score": 0, "creation_date": 1479029435, "post_id": 40513689, "comment_id": 68380384, "body": "Can you elaborate why do hardware need to change the state in cache (M,E,S,I) as soon as it prefetches the data with &#39;w&#39;. In my guess, once the prefetch is done with &#39;W&#39;, it is there is the cache. But it need not change the state to &#39;M&#39; to reflect &#39;w&#39;. Because the state change to M involves invalidations (thats what you mentioned as expensive). If the prefetch is done early or late , then the state changes will cost more as they polluted the cache.  So can we still think prefetch with &#39;W&#39; will change the state.??"}], "tags": [], "owner": {"reputation": 33092, "user_id": 5801661, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D8ENZ.jpg?s=128&g=1", "display_name": "Margaret Bloom", "link": "https://stackoverflow.com/users/5801661/margaret-bloom"}, "is_accepted": false, "score": 4, "last_activity_date": 1478767602, "last_edit_date": 1478767602, "creation_date": 1478716263, "answer_id": 40513689, "question_id": 40513280, "link": "https://stackoverflow.com/questions/40513280/what-is-the-effect-of-second-argument-in-builtin-prefetch/40513689#40513689", "title": "What is the effect of second argument in _builtin_prefetch()?", "body": "<p>From the same link you posted:</p>\n\n<blockquote>\n  <p>There are two optional arguments, <em>rw</em> and <em>locality</em>. The value of <em>rw</em> is a compile-time constant one or zero; <strong>one means that the prefetch is preparing for a write to the memory address and zero, the default, means that the prefetch is preparing for a read.</strong></p>\n</blockquote>\n\n<p>The x86 architecture has no distinction between a read and a write prefetch.<br>\nThis doesn't mean that you should ignore the second argument as writing code in C is done to improve portability.\nEven if in your machine the second argument is not used, it can be used when compiling to different architectures.</p>\n\n<p><strong>EDIT</strong>\nAs @PeterCordes pointed out in his comment, x86 actually have a prefetch instruction in anticipation of a write.<br>\nIt differs from the other prefetch instructions as it invalidates other cached instanced of the line fetched (and set it to exclusive state).</p>\n"}, {"comments": [{"owner": {"reputation": 273, "user_id": 5700061, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/39611b16b31ecfab7966f65bf368d6dd?s=128&d=identicon&r=PG&f=1", "display_name": "ANTHONY", "link": "https://stackoverflow.com/users/5700061/anthony"}, "edited": false, "score": 0, "creation_date": 1478935030, "post_id": 40516861, "comment_id": 68358378, "body": "Thank you for your response. Where to give that -march=-xxxxx.?what does this march option specifies exactly, target machine/architecture?"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 273, "user_id": 5700061, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/39611b16b31ecfab7966f65bf368d6dd?s=128&d=identicon&r=PG&f=1", "display_name": "ANTHONY", "link": "https://stackoverflow.com/users/5700061/anthony"}, "edited": false, "score": 2, "creation_date": 1478935066, "post_id": 40516861, "comment_id": 68358387, "body": "@ANTHONY: On the gcc command line, at compile time, obviously.  <a href=\"https://gcc.gnu.org/onlinedocs/gcc/x86-Options.html\" rel=\"nofollow noreferrer\">gcc.gnu.org/onlinedocs/gcc/x86-Options.html</a>.  I don&#39;t think it matters at link time, just while going from <code>.c</code> to <code>.o</code> (or directly to an executable).  It tells gcc what instructions it&#39;s allowed to use, and also sets <code>-mtune=</code>."}, {"owner": {"reputation": 3593, "user_id": 234667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/704a1e4bb9b4982564141ff4c15b7eda?s=128&d=identicon&r=PG", "display_name": "Yuhong Bao", "link": "https://stackoverflow.com/users/234667/yuhong-bao"}, "edited": false, "score": 1, "creation_date": 1501662349, "post_id": 40516861, "comment_id": 77871304, "body": "To be more precise, older versions of Windows emulated for the 3DNow! prefetch instructions for older Intel CPUs."}, {"owner": {"reputation": 18599, "user_id": 4230618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRWgI.jpg?s=128&g=1", "display_name": "Hadi Brais", "link": "https://stackoverflow.com/users/4230618/hadi-brais"}, "edited": false, "score": 0, "creation_date": 1550880288, "post_id": 40516861, "comment_id": 96448287, "body": "<code>PREFETCHWT1</code> is part of the <a href=\"https://en.wikipedia.org/wiki/AVX-512\" rel=\"nofollow noreferrer\">AVX512PF</a> set. The wikipedia article doesn&#39;t mention explicitly though. It is shown more clearly <a href=\"https://en.wikichip.org/wiki/x86/avx-512\" rel=\"nofollow noreferrer\">here</a>. However, although the WikiChip article says that AVX512PF is supported on both KNL and KNM, <a href=\"https://software.intel.com/sites/default/files/managed/c5/15/architecture-instruction-set-extensions-programming-reference.pdf\" rel=\"nofollow noreferrer\">Intel&#174; Architecture Instruction Set Extensions and Future Features Programming Reference</a> says that it &#39;s only supported on KNL."}, {"owner": {"reputation": 18599, "user_id": 4230618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRWgI.jpg?s=128&g=1", "display_name": "Hadi Brais", "link": "https://stackoverflow.com/users/4230618/hadi-brais"}, "edited": false, "score": 0, "creation_date": 1550880407, "post_id": 40516861, "comment_id": 96448317, "body": "That Wikipedia article does say that AVX512PF is supported on KNM and it cites that same Intel document, but that document doesn&#39;t say that."}, {"owner": {"reputation": 18599, "user_id": 4230618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRWgI.jpg?s=128&g=1", "display_name": "Hadi Brais", "link": "https://stackoverflow.com/users/4230618/hadi-brais"}, "edited": false, "score": 0, "creation_date": 1550880690, "post_id": 40516861, "comment_id": 96448373, "body": "On the other hand, the clang <a href=\"https://github.com/llvm-mirror/clang/blob/master/lib/Basic/Targets/X86.cpp#L272\" rel=\"nofollow noreferrer\">source code</a> suggests that it is supported on KNM."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 18599, "user_id": 4230618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRWgI.jpg?s=128&g=1", "display_name": "Hadi Brais", "link": "https://stackoverflow.com/users/4230618/hadi-brais"}, "edited": false, "score": 0, "creation_date": 1550886054, "post_id": 40516861, "comment_id": 96449262, "body": "@HadiBrais: I think it&#39;s safe to assume that when the <code>PREFETCHWT1</code>  was added to the future-extensions guide, Knight&#39;s Mill didn&#39;t exist yet, and/or they forgot to say &quot;and later&quot;.  And when they later added some KNM new instructions, they missed updating KNL-only entry.  I&#39;m sure they wouldn&#39;t have actually removed it.  But anyway, PREFETCHWT1 has a separate feature bit from AVX512PF."}], "tags": [], "owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": false, "score": 5, "last_activity_date": 1550886298, "last_edit_date": 1550886298, "creation_date": 1478729416, "answer_id": 40516861, "question_id": 40513280, "link": "https://stackoverflow.com/questions/40513280/what-is-the-effect-of-second-argument-in-builtin-prefetch/40516861#40516861", "title": "What is the effect of second argument in _builtin_prefetch()?", "body": "<p>As Margaret points out, one of the args is <em>rw</em>.</p>\n\n<p>Baseline x86-64 (SSE2) does not include <strong>write-prefetch instructions</strong>, but they exist as ISA extensions.  As usual, compilers won't use them unless you tell them you're compiling for a target that supports it.  (But they will safely run as a NOP on any non-ancient CPU.)</p>\n\n<p>The two instructions are: <a href=\"http://www.felixcloutier.com/x86/PREFETCHW.html\" rel=\"nofollow noreferrer\">PREFETCHW</a> (into L1d cache like PREFETCHT0) and <a href=\"http://www.felixcloutier.com/x86/PREFETCHWT1.html\" rel=\"nofollow noreferrer\">PREFETCHWT1</a> (into L2 cache like <a href=\"https://www.felixcloutier.com/x86/prefetchh\" rel=\"nofollow noreferrer\">PREFETCHT1</a>).  <strong>They prefetch a line into Exclusive MESI state</strong> by sending out an RFO (Read-For-Ownership). This invalidates every other copy of the line in every other core.  From that state, the store buffer can commit data to a line (and flip it to Modified) without any further off-core traffic.  Or if not modified before eviction, can simply be dropped.</p>\n\n<blockquote>\n  <p>The PREFETCHW instruction is merely a hint and does not affect program behavior. If executed, this instruction moves data closer to the processor and invalidates other cached copies in anticipation of the line being written to in the future.</p>\n</blockquote>\n\n<p>They have nearly the same machine encoding, same <code>OF 0D</code> opcode, differing only in <code>/1</code> or <code>/2</code> in the ModRM <code>/r</code> field.  Just like how read-prefetch PREFETCHT0/T1/T2/NTA share an opcode and are differentiated only by <code>/0</code> (NTA), <code>/1</code> (T0), etc. in the ModRM <code>/r</code> field.  Using <code>/r</code> bits as extra opcode bits is not unique; other one-operand and immediate instructions also do that.</p>\n\n<p>related: <a href=\"https://stackoverflow.com/questions/30003361/difference-between-prefetch-for-read-or-write/30259403#30259403\">Difference between prefetch for read or write</a></p>\n\n<hr>\n\n<p>PREFETCHW originally appeared in <a href=\"https://en.wikipedia.org/wiki/3DNow!\" rel=\"nofollow noreferrer\">AMD's 3DNow!</a>, but has its own feature bit so that CPUs can indicate support for it but not other 3DNow! (packed-<code>float</code> in MMX regs) instructions.</p>\n\n<p>PREFETCHWT1 also has its own CPUID feature bit, but might be associated with AVX512PF.  It appears to only be available in Xeon Phi (Knight's Landing / Knight's Mill), not mainstream Skylake-AVX512, same as AVX512PF (<a href=\"https://en.wikipedia.org/wiki/AVX-512#CPUs_with_AVX-512\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/AVX-512#CPUs_with_AVX-512</a>).  (Evidence: According to <a href=\"https://software.intel.com/sites/default/files/managed/c5/15/architecture-instruction-set-extensions-programming-reference.pdf\" rel=\"nofollow noreferrer\">Intel's Future Extensions manual</a>, CPUID with EAX=7/ECX=0 gives a feature bitmap in ECX including <em>Bit 00: PREFETCHWT1 (Intel\u00ae Xeon Phi\u2122 only.)</em>  Also <a href=\"https://gcc.gnu.org/ml/gcc-patches/2014-02/msg01330.html\" rel=\"nofollow noreferrer\">mailing list</a>.  </p>\n\n<hr>\n\n<p><strong><code>__builtin_prefetch(p,1,2);</code> compiles as follows with GCC</strong>:</p>\n\n<ul>\n<li>PREFETCHT1 with no <code>-m</code> options, or <code>-march=haswell</code> or older Intel.</li>\n<li>PREFETCHW with an AMD target, like <code>-march=k8</code> or <code>-march=bdver2</code> (Piledriver).</li>\n<li>PREFETCHW with <code>-march=broadwell</code> or newer Intel SnB-family, and/or <code>-mprfchw</code> for any arch.</li>\n<li><p>PREFETCHWT1 with <a href=\"https://gcc.gnu.org/onlinedocs/gcc/x86-Options.html\" rel=\"nofollow noreferrer\"><code>-mprefetchwt1</code></a>.  (If PREFETCHW is also available, gcc uses it for locality=3, but PREFETCHWT1 for locality&lt;=2.)  GCC for some reason doesn't enable this as part of <code>-march=knl</code> or <code>-march=knm</code>, but clang does.  I think this is an oversight in GCC.</p></li>\n<li><p><code>-mprefetchwt1</code> implies <code>-mprfchw</code>.  See also the <a href=\"https://gcc.gnu.org/onlinedocs/gcc/x86-Options.html\" rel=\"nofollow noreferrer\">x86 options</a> section in the GCC manual for more about <code>-march=native</code> vs. <code>-march=whatever</code> to enable a set of ISA extensions and set <code>-mtune=whatever</code> appropriately.</p></li>\n</ul>\n\n<p>Check it out on the <a href=\"https://gcc.godbolt.org/#z:OYLghAFBqd5QCxAYwPYBMCmBRdBLAF1QCcAaPECAKxAEZSAbAQwDtRkBSAJgCFufSAZ1QBXYskwgA5AHoZAagC0AWwAOxAGbIEAd3nyQ8zCyYAjBpnkAFAErYAYtgAqAYQASAdQ4AGAIJylNWJMDUwCbR0CWh9fGICVJnEEDgBmABEAaxYGeRJ5LOUDeWRmNnyWVB1BeQIEPGq8FhKRLGrbB2d3Dyd6eVMRAnlgZGR5dFRMQRYwKQI4hQSk1LTTYlQmdB1MBhy8lkwt4iLjMws2u0dXT3nAxO1l1gBPeSZldGOTc0nrC87rvxiADdUHh3uoQhBgaD5AAqVQASnkHAA7Hw/PoAPoY/p4BgERoY8GhcIICCqUj0Ljw1I8fQBBioZBMBiER6pFzLLjyImYYjnDpXbq0eQ6BDGF6Api406YGKY7EiXH4liE4LE7RkimkFLUlK0%2BT0xnM1lI9Ipblq3n8y5dIyA8Wi8XtG2eHryeoSqXML4xOXyLE4vEEnkkzXebW6tG%2BeWB5WqkJhDXk8NUml%2BgOKoMqkNJ0jh2iR9MKpXBy2h5N5wsA5FpGJSeGMaQAVikpBY0m8rdQ0g5vH48mEYgkSK4KVorYIHfrDYyIBSABYAHTz%2BcANi4AE5vMjkbQN1x5/vG1J56321JO6Ru1JW4IQOHJxf66Q4LAkGg1LjeeRKB/VF/iBAYAAA4UlIDQlStShTCnUhTEaRJHmkcdSA/ZRjAIAB5bIkKfUgsGUVhgAsWD8GCZB8XtO88MwAAPTBkAGSQpBQxoCG2WCWVWRCXAwZiUIIYg8GUZDn1Kdh%2BH4Rg8FMO9IAbVBVHxVAWGoxZ7nSBAmEELYdiUWjRkUTDzSUQQCHQZZgBYERaGFRQPGZHJ7LowSmCUDQKkUe1iFMVBBEwRRtOUW9RHESQC2PFs21g69aOA1dFFXechhGeRgMXc0IFwQg8m4MdSHkXjPwsI48oLQrJN4Ccp3hGc5y4RcuC4bwUmRJtgI3edkXnWhkVXY9T2ivDr1ve9SEfTsG1fKAYEQFBUGK78KAgP8AKA0DwMgvloNg%2BCTGIXCULQjDsIYXDLwIoiSLwsiGMoyZYLohimNE8gWHYhhOJk4geL417BOE0SG3ElBKoELi5IgBSlLwFS1KCBMSUiOzCKWdIClM8zLOs2ylAcvTnNo1z3M87zfP8wLBEKRQDKUYz5BCodwuB5szxi6Q4oSpKUtGdLMuyohStHXoiv/EqRxSKkKr7KrxpquqUhSDLFZV1XVYG1sRKbcNz0vEahDGibn2miB3wWsWlt/c21pKIjkW8cMILxKCIBgvC9sQ17jve07ztbS62Gui68HI%2B7qMvJ7GPY162I4vCuJ%2Bg7eKwf6hJElixKI0GZfBmTIeh5TVOkdTknRlhqfxpyPBcn79MM4zGbCugWakKLda7Dn4sS5LbbKZFF28Af5Cy/BBYlkXrfFvKdWlvhZaN2rSDFDZeUoFvBq1nX2ZvA2H3l0hZ0V5W1ZPsDPqkFI2eG6RqqfRfz64K%2B9ZvuW74bbzBFh9t5yAA%3D\" rel=\"nofollow noreferrer\">Godbolt compiler explorer</a>, for <code>-march=haswell</code> vs. <code>-march=broadwell -mprefetchwt1</code>.  Or modify the compiler args yourself.</p>\n\n<p><code>clang -O3 -march=knl</code>, and <code>gcc -O3 -march=broadwell -mprefetchwt1</code> make the same asm:</p>\n\n<pre><code>pref:\n        prefetchwt1     [rdi]    #   __builtin_prefetch(p,1,2);  // KNL only, otherwise we get prefetchw\n        prefetchw       [rdi]    #   __builtin_prefetch(p,1,3);\n\n        prefetcht0      [rdi]    #   __builtin_prefetch(p,0,3);\n        prefetcht1      [rdi]    #   __builtin_prefetch(p,0,2);\n        prefetcht2      [rdi]    #   __builtin_prefetch(p,0,1);\n        prefetchnta     [rdi]    #   __builtin_prefetch(p,0,0);\n        ret\n</code></pre>\n\n<p>Also note that their <a href=\"http://ref.x86asm.net/coder64.html#x0F0D\" rel=\"nofollow noreferrer\"><code>0F 0D r/m8</code> machine code decodes as a multi-byte NOP</a> on non-ancient CPUs that don't have the PREFETCHW or 3DNow! feature-bit.  On early 64-bit Intel CPUs, it's an illegal instruction.  (Newer versions of Windows require that PREFETCHW executes without faulting, and in that context people talk about a CPU \"supporting PREFETCHW\" even if it runs as a NOP).</p>\n\n<p>It's possible that CPUs which support PREFETCHW but not PREFETCHWT1 will actually run PREFETCHWT1 as if it were PREFETCHW, but I haven't tested.  (It should be testable by running threads on different cores, one doing repeated stores to a location and the other doing PREFETCHWT1 vs. PREFETCHW vs. read prefetch vs. NOP, and see how the writing thread's throughput is affected.)</p>\n\n<hr>\n\n<p>It might be preferable to use a read-intent prefetch instead of a NOP, though (like GCC does).  But you probably don't want to do a PREFETCHW and a PREFETCHT0, because too many prefetch instructions aren't a good thing.  (especially for Intel IvyBridge, which has some kind of performance bug for prefetch-instruction throughput.  But IvB would run PREFETCHW as a NOP, so you're only getting one prefetch on that uarch.)</p>\n\n<p>Tuning software-prefetch is hard: too much prefetching means fewer execution resources spent doing real work, if HW prefetch does its job successfully.  See <a href=\"https://stackoverflow.com/questions/54821849/cost-of-a-sub-optimal-cacheline-prefetch\">Cost of a sub-optimal cacheline prefetch</a> and <a href=\"https://stackoverflow.com/questions/8126311/what-every-programmer-should-know-about-memory/47714514#47714514\">What Every Programmer Should Know About Memory?</a></p>\n"}], "owner": {"reputation": 273, "user_id": 5700061, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/39611b16b31ecfab7966f65bf368d6dd?s=128&d=identicon&r=PG&f=1", "display_name": "ANTHONY", "link": "https://stackoverflow.com/users/5700061/anthony"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1427, "favorite_count": 1, "answer_count": 2, "score": 4, "last_activity_date": 1550888380, "creation_date": 1478714573, "last_edit_date": 1550888380, "question_id": 40513280, "link": "https://stackoverflow.com/questions/40513280/what-is-the-effect-of-second-argument-in-builtin-prefetch", "title": "What is the effect of second argument in _builtin_prefetch()?", "body": "<p>The GCC doc <a href=\"https://gcc.gnu.org/onlinedocs/gcc-4.8.0/gcc/Other-Builtins.html\" rel=\"nofollow noreferrer\">here</a> specifies the usage of _buitin_prefetch.</p>\n\n<p>Third argument is perfect. \nIf it is 0, compiler generates prefetchtnta (%rax) instruction\nIf it is 1, compiler generates prefetcht2 (%rax) instruction\nIf it is 2, compiler generates prefetcht1 (%rax) instruction\nIf it is 3 (default), compiler generates prefetcht0 (%rax) instruction.</p>\n\n<p>If we vary third argument the opcode already changed accordingly.</p>\n\n<p>But second argument do not seem to have any effect. </p>\n\n<pre><code>__builtin_prefetch(&amp;x,1,2);\n__builtin_prefetch(&amp;x,0,2);\n__builtin_prefetch(&amp;x,0,1);\n__builtin_prefetch(&amp;x,0,0);\n</code></pre>\n\n<p>The above is the sample piece of code, that generated:</p>\n\n<p>The following is the assembly: </p>\n\n<pre><code> 27:    0f 18 10                prefetcht1 (%rax)\n  2a:   48 8d 45 fc             lea    -0x4(%rbp),%rax\n  2e:   0f 18 10                prefetcht1 (%rax)\n  31:   48 8d 45 fc             lea    -0x4(%rbp),%rax\n  35:   0f 18 18                prefetcht2 (%rax)\n  38:   48 8d 45 fc             lea    -0x4(%rbp),%rax\n  3c:   0f 18 00                prefetchnta (%rax)\n</code></pre>\n\n<p>One can observe the change in opcodes wrt 3rd argument. But even if I changed 2nd argument (that specifies read or write), the assembly code remains the same. &lt;27,2a> and &lt;2e,31>. So it not giving any information to the machine. Then what is the purpose of the second argument? </p>\n"}, {"tags": ["c", "bash"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1478713410, "post_id": 40512970, "comment_id": 68267715, "body": "<i>I would then like to run the code</i> - this is hardly a <i>code</i>. And there is nothing to <i>run</i>."}, {"owner": {"reputation": 63, "user_id": 5003258, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/63blV.jpg?s=128&g=1", "display_name": "Mal", "link": "https://stackoverflow.com/users/5003258/mal"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1478713886, "post_id": 40512970, "comment_id": 68267958, "body": "I do not think it is necessary to write the entire code, being very long and completely ininfluent to the question"}, {"owner": {"reputation": 2912, "user_id": 3081206, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YaKOY.jpg?s=128&g=1", "display_name": "takendarkk", "link": "https://stackoverflow.com/users/3081206/takendarkk"}, "edited": false, "score": 0, "creation_date": 1478714211, "post_id": 40512970, "comment_id": 68268111, "body": "Show us what you tried and explain what specifically is confusing about why it doesn&#39;t work. We don&#39;t just write your code for you."}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1478722412, "post_id": 40514396, "comment_id": 68272069, "body": "Why not: <code>for N in 100 120 300 350 426; do .&#47;a.out $n; done</code>?  There&#39;s no need for the curly-brace notation."}, {"owner": {"reputation": 2076, "user_id": 1866196, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/TrCUq.png?s=128&g=1", "display_name": "skrtbhtngr", "link": "https://stackoverflow.com/users/1866196/skrtbhtngr"}, "edited": false, "score": 0, "creation_date": 1478723211, "post_id": 40514396, "comment_id": 68272477, "body": "Mentioned the braces just for clarity."}], "tags": [], "owner": {"reputation": 2076, "user_id": 1866196, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/TrCUq.png?s=128&g=1", "display_name": "skrtbhtngr", "link": "https://stackoverflow.com/users/1866196/skrtbhtngr"}, "is_accepted": true, "score": 0, "last_activity_date": 1478719016, "creation_date": 1478719016, "answer_id": 40514396, "question_id": 40512970, "link": "https://stackoverflow.com/questions/40512970/how-to-run-a-c-program-in-bash-script-and-give-it-some-values-of-a-defined-const/40514396#40514396", "title": "How to run a C program in bash script and give it some values of a defined constant?", "body": "<p>This would only work if your program accepts the value of <code>N</code> as a command-line argument.</p>\n\n<p>If you call your program as <code>./a.out 3</code> where <code>3</code> is the value for <code>N</code>, then you could write a one-liner in the terminal as:</p>\n\n<p><code>for N in {100,120,300,350,426}; do ./a.out $N; done</code></p>\n\n<p>You can even make a script out of it if you like.</p>\n"}], "owner": {"reputation": 63, "user_id": 5003258, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/63blV.jpg?s=128&g=1", "display_name": "Mal", "link": "https://stackoverflow.com/users/5003258/mal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 40514396, "answer_count": 1, "score": -2, "last_activity_date": 1478722350, "creation_date": 1478713311, "last_edit_date": 1478722350, "question_id": 40512970, "link": "https://stackoverflow.com/questions/40512970/how-to-run-a-c-program-in-bash-script-and-give-it-some-values-of-a-defined-const", "title": "How to run a C program in bash script and give it some values of a defined constant?", "body": "<p>I have a program in C (<code>bact.c</code>), where I define a constant value N.</p>\n\n<p>I would then like to run the code for different values of N,\nnot consecutively (e.g. N=100,120,300,350,426...).</p>\n\n<p>How can I automate the process with a script, which loops over the \nchosen values N? Is it possible without <code>scanf</code>?</p>\n"}, {"tags": ["c", "loops", "for-loop", "do-while"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 2, "creation_date": 1478713128, "post_id": 40512890, "comment_id": 68267576, "body": "You start with <code>i=1</code>, so <code>i==(l-1)</code> is true if and only if <code>l==2</code>. Perhaps you meant <code>i&lt;=(l-1)</code>."}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1478713150, "post_id": 40512890, "comment_id": 68267588, "body": "<code>i == (l-1)</code> would check whether <code>i</code> is <i>equat</i> to <code>l-1</code> and wouldn&#39;t enter the loop otherwise. Is that what you need?"}, {"owner": {"reputation": 4168, "user_id": 6273251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fCGXep-7snc/AAAAAAAAAAI/AAAAAAAAADk/nk_YDFGfkc0/photo.jpg?sz=128", "display_name": "Random Davis", "link": "https://stackoverflow.com/users/6273251/random-davis"}, "edited": false, "score": 0, "creation_date": 1478713320, "post_id": 40512890, "comment_id": 68267672, "body": "Welcome to Stack Overflow. It would appear that you need to learn how to use a debugger to step line-by-line through your code, which will likely allow you to easily pinpoint the nature and location of the issue you&#39;re having. Using a debugger is, for all intents and purposes, required knowledge for any programmer. For more info, see <a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>."}], "answers": [{"tags": [], "owner": {"reputation": 326, "user_id": 7137867, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FvVfZyScV4Q/AAAAAAAAAAI/AAAAAAAAADA/5-libN4cCck/photo.jpg?sz=128", "display_name": "Paul T", "link": "https://stackoverflow.com/users/7137867/paul-t"}, "is_accepted": true, "score": 1, "last_activity_date": 1478719969, "creation_date": 1478719969, "answer_id": 40514608, "question_id": 40512890, "link": "https://stackoverflow.com/questions/40512890/c-not-entering-for-statement-inside-do-while/40514608#40514608", "title": "C: Not entering &quot;for&quot; statement inside do...while", "body": "<p>your comparison within the for loop is checking to see if i is equal to the characters in your string. you will only enter the for loop if this case is true.</p>\n\n<p>you probably want to enter the for loop and then continue to increment i checking to see if it is less than or equal to the characters in your string.</p>\n\n<p><strong>example code</strong></p>\n\n<pre><code>char * str = \"Hello\"\nfor(int i = 0; i &lt;= strlen(str) - 1; i++)\n{\n    printf(\"%c\", str[i]);\n}\n</code></pre>\n\n<p><strong>expected output</strong></p>\n\n<pre><code>Hello\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 7137619, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a3ab4945f309dfdc2f7898c61712e31a?s=128&d=identicon&r=PG&f=1", "display_name": "Ignacio Garcia", "link": "https://stackoverflow.com/users/7137619/ignacio-garcia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 40514608, "answer_count": 1, "score": -2, "last_activity_date": 1478719969, "creation_date": 1478713015, "last_edit_date": 1478713278, "question_id": 40512890, "link": "https://stackoverflow.com/questions/40512890/c-not-entering-for-statement-inside-do-while", "title": "C: Not entering &quot;for&quot; statement inside do...while", "body": "<p>I\u00b4m currently learning to program and I don\u00b4t know why my code does not enter into the for that is inside the do.</p>\n\n<p>Any ideas or help would be amazingly helpful!</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;string.h&gt;  \n\nvoid swap(char *num1, char *num2) {\n    char temp;\n    temp = *num1;\n    *num1 = *num2;\n    *num2 = temp;\n}\n\nint main()\n{\n    int l,i;\n    char s[100];\n    bool swapped;\n\n    scanf(\"%s\", s); \n    l=strlen(s);\n\n    do\n    {\n        swapped = 0;\n        for(i=1;i==(l-1);i++)\n        {\n            if(s[i-1] &gt; s[i])\n            {\n                swap(&amp;s[i-1],&amp;s[i]);\n                printf(\"%s\\n\",s);\n                swapped = 1;\n            }    \n        }\n    }while(swapped);\n\n    // printf(\"%s\\n\",s);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "string", "struct", "scanf"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 2, "creation_date": 1478712802, "post_id": 40512715, "comment_id": 68267441, "body": "Strings in C consist of an array of <code>char</code> terminated with the NUL character, aka <code>&#39;\\0&#39;</code>. Since the <code>p_id</code> array is 11 bytes, you can only store 10 digits plus the NUL. In other words, you have a buffer overrun bug."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1478712962, "post_id": 40512715, "comment_id": 68267506, "body": "ie - change pid to char[12] (if 11 is the max length of pid)"}], "answers": [{"comments": [{"owner": {"reputation": 449, "user_id": 1985937, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tSzRq.jpg?s=128&g=1", "display_name": "Laura Martins", "link": "https://stackoverflow.com/users/1985937/laura-martins"}, "edited": false, "score": 0, "creation_date": 1478742333, "post_id": 40513010, "comment_id": 68279184, "body": "Thank you so very much :)"}], "tags": [], "owner": {"reputation": 2076, "user_id": 1866196, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/TrCUq.png?s=128&g=1", "display_name": "skrtbhtngr", "link": "https://stackoverflow.com/users/1866196/skrtbhtngr"}, "is_accepted": false, "score": 1, "last_activity_date": 1478713888, "last_edit_date": 1478713888, "creation_date": 1478713450, "answer_id": 40513010, "question_id": 40512715, "link": "https://stackoverflow.com/questions/40512715/consecutive-scanf-is-adding-up-strings/40513010#40513010", "title": "Consecutive scanf is adding up strings", "body": "<p>This is actually a very minute mistake here. Basically, you are experiencing a <strong>Buffer Overflow</strong> in the string <code>p.p_id</code>.</p>\n\n<p>When you input the value for <code>p.p_id</code> as <code>11111111111</code> (11 times <code>1</code>), you must realise that the actual capacity for the <code>p_id</code> string is declared as just <code>11</code> which must include the NULL character at the end.</p>\n\n<p>If you assign <code>11111111111</code> to <code>p_id</code> there will be no space left for the NULL character in that string and so there will NOT be any at its end.</p>\n\n<p>When you input the value for next member string of the structure, the same happens there, too.</p>\n\n<p>Now, when you are trying to print the value of <code>p.p_id</code> the value will print until a <code>'\\0'</code> (NULL character) is found in the string. But, there is none here, so the next string will start printing! (The buffer or string <code>p_id</code> overflows) </p>\n\n<p>This is happening due to the member alignment done in structures in C. The next string will be stored in a consecutive memory cell, so the printing will continue. (If there was a third consecutive string member, then due to the buffer overflow in the second string, it will print too!)</p>\n\n<p>But, the printing stops after second string because either there is no data in the next consecutive memory cell due to certain struct alignment or there may be an actual <code>0</code> value in the next cell which is interpreted as NULL character.</p>\n\n<p>To avoid, either use a larger size for the character array or use dynamically allocated strings.</p>\n"}, {"tags": [], "owner": {"reputation": 17904, "user_id": 364818, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/5fd80d98f96f9adbde7876cbda181715?s=128&d=identicon&r=PG", "display_name": "Mark Lakata", "link": "https://stackoverflow.com/users/364818/mark-lakata"}, "is_accepted": false, "score": 0, "last_activity_date": 1478715294, "creation_date": 1478715294, "answer_id": 40513455, "question_id": 40512715, "link": "https://stackoverflow.com/questions/40512715/consecutive-scanf-is-adding-up-strings/40513455#40513455", "title": "Consecutive scanf is adding up strings", "body": "<p>As @skrtbhtngr pointed out, you have a buffer overflow. In order to prevent this in the future, you should use <code>fgets</code> instead of <code>scanf</code> on unknown string inputs.  This example will <code>exit(1)</code> if the input is corrupted.</p>\n\n<pre><code>int getsafestring(char* s, int maxlen)\n{\n   if(fgets(s,maxlen,stdin) == NULL) return 1; // read error\n   if(strlen(s) == 0) return 2; // other read error\n   if(s[strlen(s)-1] !='\\n') return 3; // buffer overflow error\n   s[strlen(s)-1]=0; // replace newline with null\n   return 0;\n}\n\nif(Getsafestring(p.name,sizeof(p.name))) exit(1);\nif(scanf(\"%d\", &amp;p.by) != 1)              exit(1);\nif(getsafestring(p.p_id,sizeof(p.p_id))) exit(1);\nif(getsafestring(p.cel,sizeof(p.cel)))   exit(1);\n</code></pre>\n"}], "owner": {"reputation": 449, "user_id": 1985937, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tSzRq.jpg?s=128&g=1", "display_name": "Laura Martins", "link": "https://stackoverflow.com/users/1985937/laura-martins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "closed_date": 1478722567, "answer_count": 2, "score": 1, "last_activity_date": 1478721130, "creation_date": 1478712395, "last_edit_date": 1478721130, "question_id": 40512715, "link": "https://stackoverflow.com/questions/40512715/consecutive-scanf-is-adding-up-strings", "closed_reason": "Duplicate", "title": "Consecutive scanf is adding up strings", "body": "<p>I've been having a problem with a very simple program and I really don't know why. There is a struct for a person:</p>\n\n<pre><code>typedef struct {\n   char name[50];\n   char p_id[11];\n   char cel[11];\n   int by;\n   int id;\n} Person;\n</code></pre>\n\n<p>Now, there is another struct which stands for the list of contacts:</p>\n\n<pre><code>typedef struct {\n   Person * people;\n} lContacts;\n</code></pre>\n\n<p>I've been trying to include the person's data to it, and add that person to the contact list. The person is being added normally, so I won't post the code here, but there is something wrong happening when I read the string: </p>\n\n<pre><code>void include(lContacts * myContacts)\n{\n\n    Person p;\n\n    scanf(\"%s\", p.name);\n    scanf(\"%d\", &amp;p.by); //birth year\n    scanf(\"%s\", p.p_id);\n    printf(\"TEST P_ID: %s\\n\\n\", p.p_id);\n    scanf(\"%s\", p.cel);\n    printf(\"TEST P_ID AGAIN: %s\\n\\n\", p.p_id);\n\n    myContacts-&gt;people[index]=p; //don't worry about the index, there is a piece of code I'm omitting to make it easier to read, just assume it is right.\n    }\n}\n</code></pre>\n\n<p>Notice that I have a print test there, because when I listed my contacts, the contact <code>p_id</code> had itself concatenated with the <code>cel</code>, so I printed the whole code until I found the mistake was there. </p>\n\n<p>Here is a input example:</p>\n\n<pre><code>Name\n1991\n11111111111\n&lt;console prints| TEST P_ID: 11111111111&gt;\n22222222222\n&lt;console prints| TEST P_ID AGAIN: 1111111111122222222222&gt;\n</code></pre>\n\n<p>however, if I print <code>p.cel</code>, it is correctly printed</p>\n\n<pre><code>&lt;console prints 22222222222&gt;\n</code></pre>\n\n<p>Any ideas? Maybe I should use '&amp;' when scanning strings? (I read about it and the way I understood, there is no need.. is that right?)</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1478711445, "post_id": 40512368, "comment_id": 68266730, "body": "Please post sample input, and expected output."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1478711860, "post_id": 40512368, "comment_id": 68266942, "body": "I suggest looping through your arrays based on an index into the array. Something like <code>for(int index=0; index&lt;n; index++){ scanf(&quot;%d&quot;, &amp;ar[index]); }</code>"}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1478904384, "post_id": 40512368, "comment_id": 68352761, "body": "Because of operator precedence <code>if((*ar+n)%2==0)</code> should be <code>if(*(ar+n)%2==0)</code>.  That&#39;s assuming you have a reason to use pointer arithmetic instead of subscripting for some reason (maybe it&#39;s an assignment requirement?)."}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 0, "last_activity_date": 1478711897, "creation_date": 1478711897, "answer_id": 40512580, "question_id": 40512368, "link": "https://stackoverflow.com/questions/40512368/find-even-numbers-in-an-array-using-pointers/40512580#40512580", "title": "Find even numbers in an array using pointers", "body": "<p><code>ar+n</code> is a pointer to <code>arr[n]</code>. That's correct for the limit of your <code>for</code> loops, but you shouldn't be using it inside the loop bodies. In the loops, <code>i</code> is the pointer to the current element of the array.</p>\n\n<p>There's also no reason for nested loops when finding the even elements.</p>\n\n<pre><code>for(i=ar;i&lt;ar+n;i++)\n{\n    scanf(\"%d\",i);\n}\n*peven = 0;\nfor(i=ar;i&lt;ar+n;i++)\n{\n    if (*i % 2 == 0)\n    {\n        (*peven)++;\n    }\n}\nprintf(\"%d\",*peven);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7137506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f39ce9762e17ab6511e59f936aa71ee2?s=128&d=identicon&r=PG&f=1", "display_name": "Derek", "link": "https://stackoverflow.com/users/7137506/derek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2632, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1478903764, "creation_date": 1478711167, "last_edit_date": 1478903764, "question_id": 40512368, "link": "https://stackoverflow.com/questions/40512368/find-even-numbers-in-an-array-using-pointers", "title": "Find even numbers in an array using pointers", "body": "<p>I am trying to find the even numbers in the array <code>arr[100];</code> using pointers.</p>\n\n<pre><code>int main()\n{\n\n    int ar[100],*i,*j,n=0,even,*peven=&amp;even;\n    scanf(\"%d\",&amp;n);\n    for(i=ar;i&lt;ar+n;i++)\n    {\n        scanf(\"%d\",ar+n);\n    }\n    for(i=ar;i&lt;ar+n;i++)\n    {\n        *peven=0;\n        for(j=ar;j&lt;ar+n;j++)\n        {\n            if((*ar+n)%2==0)\n            {\n                (*peven)++;\n            }\n        }\n        printf(\"%d\",*peven);\n\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "assembly"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1478711396, "post_id": 40512327, "comment_id": 68266702, "body": "At the time C was developed, this may not have been a common instruction, so they didn&#39;t see the point of it."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 7, "creation_date": 1478711877, "post_id": 40512327, "comment_id": 68266957, "body": "&quot;Assembly has an xchg directive&quot;  <i>Which</i> assember?  <i>What</i> platform?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 4, "creation_date": 1478712545, "post_id": 40512327, "comment_id": 68267305, "body": "There is also no rotate function in C, but in many machine languages. And which &quot;Assembly&quot; do you refer to? Many CPUs don&#39;t have such an instruction."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 3, "creation_date": 1478715767, "post_id": 40512327, "comment_id": 68268899, "body": "C doesnt have separate logical and arithmetic shift right operations.  C doesnt support a carry bit.  C doesnt have direct support for an overflow for add or multipy, doesnt have direct support for a borrow on subtract.  Doesnt directly in the language support floating point round up, round down, round to zero options.  Divide by zero.   And the answer is it is generic there is no reason to supply those, any more than you would in Pascal, Python, JAVA, or any other high level language."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1478750995, "post_id": 40512327, "comment_id": 68280979, "body": "most CPUs (and microprocessors/microcontrollers, etc) do NOT have such an instruction.  Even now, the best that is usually available is to swap the high/low nibbles of a byte"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1540784217, "post_id": 40512327, "comment_id": 92976601, "body": "Only a really dumb compiler would want to actually emit <code>xchg</code> every time the source swapped variables.  It&#39;s not faster than 3 <code>mov</code> instructions, and a good compiler can simply change its local-variable &lt;-&gt; CPU register mapping without emitting any asm instructions.  (Or inside a loop, unrolling can often optimize away swapping.)  Often you need only 1 or <code>mov</code> instructions in asm, not all 3.  See also <a href=\"https://stackoverflow.com/q/45766444\">Why is XCHG reg, reg a 3 micro-op instruction on modern Intel architectures?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 3, "creation_date": 1478711347, "post_id": 40512373, "comment_id": 68266669, "body": "Language features don&#39;t have to correspond to instructures that every architecture has. You can implement C on architectures with no floating point hardware, it gets done in software instead."}, {"owner": {"reputation": 23944, "user_id": 1305969, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wlo8z.png?s=128&g=1", "display_name": "zx485", "link": "https://stackoverflow.com/users/1305969/zx485"}, "edited": false, "score": 1, "creation_date": 1478711692, "post_id": 40512373, "comment_id": 68266872, "body": "An interesting question remains: why should this (suggested (and on x86) native function) not be emulated on other architectures than x86 by the C compiler?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 23944, "user_id": 1305969, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wlo8z.png?s=128&g=1", "display_name": "zx485", "link": "https://stackoverflow.com/users/1305969/zx485"}, "edited": false, "score": 0, "creation_date": 1478711902, "post_id": 40512373, "comment_id": 68266967, "body": "@zx485 Do you find it useful enough to be added as a part of the language? I don&#39;t..."}, {"owner": {"reputation": 23944, "user_id": 1305969, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wlo8z.png?s=128&g=1", "display_name": "zx485", "link": "https://stackoverflow.com/users/1305969/zx485"}, "edited": false, "score": 1, "creation_date": 1478712021, "post_id": 40512373, "comment_id": 68267029, "body": "@EugeneSh.: Well...yes. There are <b>many</b> algorithms that could make use of it, e.g. <i>BubbleSort</i> as a simple example."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 23944, "user_id": 1305969, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wlo8z.png?s=128&g=1", "display_name": "zx485", "link": "https://stackoverflow.com/users/1305969/zx485"}, "edited": false, "score": 4, "creation_date": 1478712219, "post_id": 40512373, "comment_id": 68267130, "body": "@zx485 Well, I guess if there are enough supporters, it will make it&#39;s way into the standard at some point."}, {"owner": {"reputation": 76876, "user_id": 287586, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/tB5AG.png?s=128&g=1", "display_name": "dan04", "link": "https://stackoverflow.com/users/287586/dan04"}, "reply_to_user": {"reputation": 23944, "user_id": 1305969, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wlo8z.png?s=128&g=1", "display_name": "zx485", "link": "https://stackoverflow.com/users/1305969/zx485"}, "edited": false, "score": 0, "creation_date": 1478712429, "post_id": 40512373, "comment_id": 68267232, "body": "@zx485: The C standard library already includes a sort function (<code>qsort</code>).  Now, there may be occasions when you need to roll your own, because you need a guarantee of a stable sort and/or O(n log n) worst-case running time.  But how many non-sorting uses would a <code>swap</code> function have in C?  (C++ code uses <code>swap</code> a lot, but for reasons related to copy-construction, overloaded assignment, and destructors, which C doesn&#39;t have.)"}, {"owner": {"reputation": 12072, "user_id": 1630963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97c2d181ef6bbb9eee0c4033561c3891?s=128&d=identicon&r=PG", "display_name": "enhzflep", "link": "https://stackoverflow.com/users/1630963/enhzflep"}, "reply_to_user": {"reputation": 23944, "user_id": 1305969, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wlo8z.png?s=128&g=1", "display_name": "zx485", "link": "https://stackoverflow.com/users/1305969/zx485"}, "edited": false, "score": 0, "creation_date": 1478712484, "post_id": 40512373, "comment_id": 68267268, "body": "@zx485 - at a guess, because C was around quite some time before the x86 architecture was. It seems odd that a language be altered/supplemented by something that achieves the same task as just one(some) of the many microprocessor archs it runs on."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1478712730, "post_id": 40512373, "comment_id": 68267406, "body": "And still, there is a question about the semantics. What should it swap? Numbers? Which numbers? Or arbitrary-typed objects? In any case it will have to work with pointer arguments. It will involve some extra checks and calls and branches. I believe it doesn&#39;t worth  this hassle, since it can be implemented in three straight-forward statements."}, {"owner": {"reputation": 23944, "user_id": 1305969, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wlo8z.png?s=128&g=1", "display_name": "zx485", "link": "https://stackoverflow.com/users/1305969/zx485"}, "reply_to_user": {"reputation": 12072, "user_id": 1630963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97c2d181ef6bbb9eee0c4033561c3891?s=128&d=identicon&r=PG", "display_name": "enhzflep", "link": "https://stackoverflow.com/users/1630963/enhzflep"}, "edited": false, "score": 1, "creation_date": 1478712766, "post_id": 40512373, "comment_id": 68267425, "body": "@enhzflep: That may have been so, but the task of swapping two (memory/whatever) locations had been around far longer. So why has it not been included in an &quot;very old&quot; <i>high level language</i>?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 23944, "user_id": 1305969, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wlo8z.png?s=128&g=1", "display_name": "zx485", "link": "https://stackoverflow.com/users/1305969/zx485"}, "edited": false, "score": 0, "creation_date": 1478712824, "post_id": 40512373, "comment_id": 68267451, "body": "@zx485: No one keeps you from writing a simple function using machine-dependent inline-assembler or leave it to the compiler to recognise the pattern and emit the instruction if available. It simply makes no sense to provide some built-in for every possibly useful machine instruction. Why do you thing there is no rotate-operator in C, no parity-operator or string-compare/-copy operator? All instructions some CPUs provide. Read what K.I.S.S. means."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478713178, "post_id": 40512373, "comment_id": 68267602, "body": "@EugeneSh.: Swapping two values only makes sense on simple types and possibly very small <code>struct</code>s. For normal <code>struct</code>s as well as arrays, most times it is better to use pointers. And experienced programmers have their standard library for such misc. stuff anyway. I can&#39;t rememberif I ever had use for such a swap-function in my projects. And that&#39;s more than 30 years of programming."}, {"owner": {"reputation": 23944, "user_id": 1305969, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wlo8z.png?s=128&g=1", "display_name": "zx485", "link": "https://stackoverflow.com/users/1305969/zx485"}, "edited": false, "score": 1, "creation_date": 1478713252, "post_id": 40512373, "comment_id": 68267640, "body": "This discussion gets nowhere. No one has kept me from writing such a function. In fact, I did - several times. But a native C/ASM (keyword/opcode) would have been handy. I just ascertained. Nothing more."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 23944, "user_id": 1305969, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wlo8z.png?s=128&g=1", "display_name": "zx485", "link": "https://stackoverflow.com/users/1305969/zx485"}, "edited": false, "score": 0, "creation_date": 1478713452, "post_id": 40512373, "comment_id": 68267740, "body": "@zx485: C has no <b>op-codes</b>! You might want to learn more than x86 assembly before recommending new features for high-level languages. As I wrote: most CPUs with GP registers don&#39;t even have such an instruction! Just because <b>you</b> swap values frequently does not mean we all do. Even if: what keeps you from writing your own generic function once and forever?"}, {"owner": {"reputation": 23944, "user_id": 1305969, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wlo8z.png?s=128&g=1", "display_name": "zx485", "link": "https://stackoverflow.com/users/1305969/zx485"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1478713732, "post_id": 40512373, "comment_id": 68267888, "body": "@Olaf: Of course C has not opcodes, but it has keywords. That&#39;s why I wrote in two-tuples: <i>(C/ASM)</i> - <i>(keyword/opcode)</i>. As I said: this discussion is going nowhere. BTW: you never tried to swap two values?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478713930, "post_id": 40512373, "comment_id": 68267990, "body": "No, I never <b>tried</b>. I can&#39;t remember to have need for swapping two values in my serious projects. And <b>iff</b> I did, I did not try, but just did it. There is a reason it is not part of any language itself, except for stack-oriented ones like Forth."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 23944, "user_id": 1305969, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wlo8z.png?s=128&g=1", "display_name": "zx485", "link": "https://stackoverflow.com/users/1305969/zx485"}, "edited": false, "score": 0, "creation_date": 1478717021, "post_id": 40512373, "comment_id": 68269480, "body": "@zx485, you ask &quot;<i>why has it not been included in an &quot;very old&quot; high level language?</i>&quot;, but those of us who did not participate in C&#39;s invention or standardization can only interpret history here.  My interpretation is two-pronged: (1) C was not initially given such an operation because the languages that inspired C did not have one, because the PDP-7 on which C was first implemented had no corresponding machine instruction, and because it is not a primitive operation with respect to memory locations. (2) No one since has considered adding such an instruction to be sufficiently valuable."}, {"owner": {"reputation": 1619, "user_id": 3342206, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/92d5672ff3c806eb71d84d7298d5be43?s=128&d=identicon&r=PG&f=1", "display_name": "8bittree", "link": "https://stackoverflow.com/users/3342206/8bittree"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1478720724, "post_id": 40512373, "comment_id": 68271260, "body": "@JohnBollinger C started off on the PDP-11, not the PDP-7. That aside, <a href=\"https://en.wikipedia.org/wiki/PDP-11_architecture#Instruction_set\" rel=\"nofollow noreferrer\">Wikipedia</a> and the <a href=\"http://bitsavers.trailing-edge.com/pdf/dec/pdp11/handbooks/PDP11_Handbook1979.pdf\" rel=\"nofollow noreferrer\">handbook PDF</a> it references support your guess about a lack of corresponding instructions. The only instruction that swaps things is <code>SWAB</code>, but that only swaps the high and low order bytes of the given word, hardly a general purpose swapping operation."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 1619, "user_id": 3342206, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/92d5672ff3c806eb71d84d7298d5be43?s=128&d=identicon&r=PG&f=1", "display_name": "8bittree", "link": "https://stackoverflow.com/users/3342206/8bittree"}, "edited": false, "score": 0, "creation_date": 1478722187, "post_id": 40512373, "comment_id": 68271968, "body": "@8bittree, oops, yes, it was B that was written for the PDP-7.  Differences between the PDP-7 and the PDP-11 were among the reasons for C&#39;s creation and the influences on its design.  Language historians may find <a href=\"https://www.bell-labs.com/usr/dmr/www/chist.html\" rel=\"nofollow noreferrer\">Ritchie&#39;s essay on C&#39;s early history</a> an interesting read."}], "tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": true, "score": 7, "last_activity_date": 1478712315, "last_edit_date": 1478712315, "creation_date": 1478711169, "answer_id": 40512373, "question_id": 40512327, "link": "https://stackoverflow.com/questions/40512327/why-is-there-no-inbuilt-swap-function-in-c-but-there-is-xchg-in-assembly/40512373#40512373", "title": "Why is there no inbuilt swap function in C but there is xchg in Assembly?", "body": "<p><strong>C</strong> is a cross-platform language. Assembly is architecture specific. Not every architecture has such an instruction. Moreover, <strong>C</strong>, as a high-level language doesn't have to correspond to the machine-level instruction set and features, as it's purpose is to bridge between the \"human\" language and the machine language, not to mimic it. Said that, a <strong>C</strong> compiler for this specific architecture <em>might</em> have an extension for this swapping instruction or optimize the swapping code to use this instruction if smart enough.</p>\n"}, {"tags": [], "owner": {"reputation": 787, "user_id": 1159290, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8413d7f973d5c9207cc9134db63314a6?s=128&d=identicon&r=PG", "display_name": "user1159290", "link": "https://stackoverflow.com/users/1159290/user1159290"}, "is_accepted": false, "score": 5, "last_activity_date": 1478732555, "last_edit_date": 1478732555, "creation_date": 1478711981, "answer_id": 40512614, "question_id": 40512327, "link": "https://stackoverflow.com/questions/40512327/why-is-there-no-inbuilt-swap-function-in-c-but-there-is-xchg-in-assembly/40512614#40512614", "title": "Why is there no inbuilt swap function in C but there is xchg in Assembly?", "body": "<p>That would work for variables that fit in the register and are in the register. It would not work for large struct or variables held in memory (If you load a variable A in reg X and another, say B in reg Y, and swap them, you could skip the swapping and load A in Y and B in X directly).</p>\n\n<p>Having said said, nothing prevent the compiler for a given architecture to use the swap instruction to compile:</p>\n\n<pre><code> int a;\n int b;\n int tmp;\n tmp=a;\n a=b;\n b=tmp;\n</code></pre>\n\n<p>... If those happens to be in registers: the fact that it is not in C does not mean the compiler does not use it.</p>\n"}, {"tags": [], "owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "is_accepted": false, "score": 0, "last_activity_date": 1478713764, "creation_date": 1478713764, "answer_id": 40513081, "question_id": 40512327, "link": "https://stackoverflow.com/questions/40512327/why-is-there-no-inbuilt-swap-function-in-c-but-there-is-xchg-in-assembly/40513081#40513081", "title": "Why is there no inbuilt swap function in C but there is xchg in Assembly?", "body": "<p>Even though <code>xchg</code> is a very elementary instruction, this doesn't mean C must have its equivalent. The fact that C <em>sometimes</em> maps directly to assembly is not very relevant; the standard says nothing about \"assembly\" (why map to assembly and not another low-level language?).</p>\n\n<p>You might also ask: Why does C not have built-in vector instructions? They're becoming largely available!</p>\n\n<p>There's also compiler's help: swapping variables is a very visible pattern, so such optimization shouldn't be hard to implement. And you also have inline <code>asm</code>, should you need it.</p>\n"}, {"tags": [], "owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "is_accepted": false, "score": 5, "last_activity_date": 1478714212, "creation_date": 1478714212, "answer_id": 40513202, "question_id": 40512327, "link": "https://stackoverflow.com/questions/40512327/why-is-there-no-inbuilt-swap-function-in-c-but-there-is-xchg-in-assembly/40513202#40513202", "title": "Why is there no inbuilt swap function in C but there is xchg in Assembly?", "body": "<p>There are two points which can explain why <code>swap()</code> is not in C</p>\n\n<p><strong>1. Function call semantics:</strong><br>\nIncluding a <code>swap()</code> function would break a very fundamental design decision in C: <code>swap()</code> can only work with pass-by-reference semantics (which C++ added to the language, but which are absent in C), not with pass-by-value.</p>\n\n<p><strong>2. Diversity of available assembler instructions</strong><br>\nApart from that, there is usually quite a number of assembler instructions on any given CPU architecture which are totally inaccessible from pure C. This includes instructions as diverse as interrupt handling instructions, virtual memory space manipulating instructions, I/O instructions, bit fiddling instructions (google the PPC instruction <code>rlwimi</code> for an especially powerful example of this), etc.</p>\n\n<p>It is simply impossible to include any significant number of these in a general purpose language like C.</p>\n\n<p>Some of these are crucial for implementing operating systems, which is why any OS must include at the very least some small amounts of assembler code. They are usually encapsulated in some functions with inline assembler or defined in the kernel headers as preprocessor directives. Other instructions are less important, or only good for optimizations, these may be generated by optimizing compilers, and many compilers do generate them (the whole class of vector functions fall in this category).</p>\n\n<p>In the face of this vast diversity, the designers of C just had to cut it somewhere. And they opted for providing whatever is representable as simple operators like (+, -, ~, &amp;, |, !, &amp;&amp;, ||, etc.), but did not provide anything that would require function call syntax like the <code>swap()</code> function you propose.</p>\n"}, {"tags": [], "owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": false, "score": 1, "last_activity_date": 1540784955, "creation_date": 1540784955, "answer_id": 53038512, "question_id": 40512327, "link": "https://stackoverflow.com/questions/40512327/why-is-there-no-inbuilt-swap-function-in-c-but-there-is-xchg-in-assembly/53038512#53038512", "title": "Why is there no inbuilt swap function in C but there is xchg in Assembly?", "body": "<p>Besides what the other correct answers say, another part of your premise is wrong.</p>\n\n<p>Only a really dumb compiler would want to actually emit <code>xchg</code> every time the source swapped variables, whether there's an intrinsic or operator for it or not.  Optimizing compilers don't just transliterate C into asm, they typically convert to an SSA internal representation of the program logic, and optimize that so they can implement it with as few instructions as possible (or really in the most efficient way possible; using multiple fast instructions can be better than a single slower one).</p>\n\n<p><code>xchg</code> is rarely faster than 3 <code>mov</code> instructions, and a good compiler can simply change its local-variable &lt;-> CPU register mapping without emitting any asm instructions in many cases.  (Or inside a loop, unrolling can often optimize away swapping.)  Often you need only 1 or <code>mov</code> instructions in asm, not all 3.  e.g. if only one of the C vars being swapped needs to stay in the same register, you can do:</p>\n\n<pre><code># start:   x in EAX,  y in ECX \nmov    edx, eax\nmov    eax, ecx\n# end:     y in EAX,  x in EDX\n</code></pre>\n\n<p>See also <a href=\"https://stackoverflow.com/q/45766444\">Why is XCHG reg, reg a 3 micro-op instruction on modern Intel architectures?</a></p>\n\n<p>Also note that <code>xchg [mem], reg</code> is atomic (implicit <code>lock</code> prefix), and thus is a full memory barrier, and much slower than 3 <code>mov</code> instructions, and with much higher impact on surrounding code because of the memory-barrier effect.</p>\n\n<hr>\n\n<p>If you <em>do</em> actually need to exchange registers, 3x <code>mov</code> is pretty good.  Often better than <code>xchg reg,reg</code> because of <code>mov</code> elimination, at the cost of more code-size and a tmp reg.</p>\n\n<p>There's a reason compilers never use <code>xchg</code>.  If <code>xchg</code> was a win, compilers would look for it as a peephole optimization the same way they look for <code>inc eax</code> over <code>add eax,1</code>,  or <code>xor eax,eax</code> instead of <code>mov eax,0</code>.  But they don't.</p>\n\n<p>(semi-related: <a href=\"https://stackoverflow.com/questions/26469196/swapping-2-registers-in-8086-assembly-language16-bits/47021804#47021804\">swapping 2 registers in 8086 assembly language(16 bits)</a>)</p>\n"}], "owner": {"reputation": 197, "user_id": 6565997, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3f1f841f9f8e2d9746f1db5f2717004b?s=128&d=identicon&r=PG&f=1", "display_name": "Jayesh Saita", "link": "https://stackoverflow.com/users/6565997/jayesh-saita"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1052, "favorite_count": 0, "accepted_answer_id": 40512373, "answer_count": 5, "score": 4, "last_activity_date": 1540784955, "creation_date": 1478711018, "last_edit_date": 1540783845, "question_id": 40512327, "link": "https://stackoverflow.com/questions/40512327/why-is-there-no-inbuilt-swap-function-in-c-but-there-is-xchg-in-assembly", "title": "Why is there no inbuilt swap function in C but there is xchg in Assembly?", "body": "<p>Recently I came across Assembly language.  x86 assembly has <a href=\"http://felixcloutier.com/x86/XCHG.html\" rel=\"nofollow noreferrer\">an xchg instruction</a> which swaps the contents of two registers.</p>\n\n<p>Since every C code is first converted to Assembly, it would have been nice if there was a swap function inbuilt in C like in the header <code>stdio.h</code>. Then whenever the compiler detects the swap function, it could add the xchg directive in the assembly file.</p>\n\n<p>So why this swap function was not implemented in C?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1108, "user_id": 3795491, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/42ae3e8407acf24055cf54a9f61887c9?s=128&d=identicon&r=PG&f=1", "display_name": "Aidenhjj", "link": "https://stackoverflow.com/users/3795491/aidenhjj"}, "edited": false, "score": 2, "creation_date": 1478711043, "post_id": 40512281, "comment_id": 68266500, "body": "You need to open <code>file_out</code> with write privileges (i.e. <code>file_out = fopen(&quot;&#47;Users&#47;mathmoiselle&#47;Desktop&#47;out.txt&quot;,&quot;w&quot;);</code>"}, {"owner": {"reputation": 41, "user_id": 5571199, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/afac0a6d48b7ba9ebe5475e9875f59cf?s=128&d=identicon&r=PG&f=1", "display_name": "jekyll", "link": "https://stackoverflow.com/users/5571199/jekyll"}, "reply_to_user": {"reputation": 1108, "user_id": 3795491, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/42ae3e8407acf24055cf54a9f61887c9?s=128&d=identicon&r=PG&f=1", "display_name": "Aidenhjj", "link": "https://stackoverflow.com/users/3795491/aidenhjj"}, "edited": false, "score": 0, "creation_date": 1478711271, "post_id": 40512281, "comment_id": 68266628, "body": "Thanks reply, ok i changed that line &quot; file_out = fopen(&quot;/Users/mathmoiselle/Desktop/out.txt&quot;,&quot;w&quot;); &quot; still my file is empty."}, {"owner": {"reputation": 1108, "user_id": 3795491, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/42ae3e8407acf24055cf54a9f61887c9?s=128&d=identicon&r=PG&f=1", "display_name": "Aidenhjj", "link": "https://stackoverflow.com/users/3795491/aidenhjj"}, "edited": false, "score": 0, "creation_date": 1478711599, "post_id": 40512281, "comment_id": 68266818, "body": "One problem is that you need to rewind the file pointer for <code>file_in</code> after the first time you run through it (i.e. <code>rewind(file_in)</code>)"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 5571199, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/afac0a6d48b7ba9ebe5475e9875f59cf?s=128&d=identicon&r=PG&f=1", "display_name": "jekyll", "link": "https://stackoverflow.com/users/5571199/jekyll"}, "edited": false, "score": 1, "creation_date": 1478712346, "post_id": 40512543, "comment_id": 68267192, "body": "awwww, ok now i understand. Thank you so much.  (i am newbie at C :) ) And btw i deleted some lines, <code>gets(text);</code> and  <code>char text[300];</code> that&#39;s not necessary i think. Thank you again."}, {"owner": {"reputation": 41, "user_id": 5571199, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/afac0a6d48b7ba9ebe5475e9875f59cf?s=128&d=identicon&r=PG&f=1", "display_name": "jekyll", "link": "https://stackoverflow.com/users/5571199/jekyll"}, "edited": false, "score": 0, "creation_date": 1478712496, "post_id": 40512543, "comment_id": 68267272, "body": "and i have just one question too, can i add generate random key?"}, {"owner": {"reputation": 1108, "user_id": 3795491, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/42ae3e8407acf24055cf54a9f61887c9?s=128&d=identicon&r=PG&f=1", "display_name": "Aidenhjj", "link": "https://stackoverflow.com/users/3795491/aidenhjj"}, "reply_to_user": {"reputation": 41, "user_id": 5571199, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/afac0a6d48b7ba9ebe5475e9875f59cf?s=128&d=identicon&r=PG&f=1", "display_name": "jekyll", "link": "https://stackoverflow.com/users/5571199/jekyll"}, "edited": false, "score": 0, "creation_date": 1478712606, "post_id": 40512543, "comment_id": 68267336, "body": "Look at <a href=\"http://stackoverflow.com/questions/822323/how-to-generate-a-random-number-in-c\" title=\"how to generate a random number in c\">stackoverflow.com/questions/822323/&hellip;</a>, then use the random number generated, times it by the number of letters, and minus <code>char &#39;a&#39;</code>."}, {"owner": {"reputation": 41, "user_id": 5571199, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/afac0a6d48b7ba9ebe5475e9875f59cf?s=128&d=identicon&r=PG&f=1", "display_name": "jekyll", "link": "https://stackoverflow.com/users/5571199/jekyll"}, "edited": false, "score": 0, "creation_date": 1478713237, "post_id": 40512543, "comment_id": 68267630, "body": "but i used % for modulo. Actually i wanted user enter the key but i wondered how is generate random key. i will try this lines:  <code>srand(time(NULL)); int r = rand();</code> as you were saying."}, {"owner": {"reputation": 1108, "user_id": 3795491, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/42ae3e8407acf24055cf54a9f61887c9?s=128&d=identicon&r=PG&f=1", "display_name": "Aidenhjj", "link": "https://stackoverflow.com/users/3795491/aidenhjj"}, "reply_to_user": {"reputation": 41, "user_id": 5571199, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/afac0a6d48b7ba9ebe5475e9875f59cf?s=128&d=identicon&r=PG&f=1", "display_name": "jekyll", "link": "https://stackoverflow.com/users/5571199/jekyll"}, "edited": false, "score": 0, "creation_date": 1478713365, "post_id": 40512543, "comment_id": 68267696, "body": "just do <code>int r = (rand() % 26)</code>"}, {"owner": {"reputation": 1108, "user_id": 3795491, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/42ae3e8407acf24055cf54a9f61887c9?s=128&d=identicon&r=PG&f=1", "display_name": "Aidenhjj", "link": "https://stackoverflow.com/users/3795491/aidenhjj"}, "reply_to_user": {"reputation": 41, "user_id": 5571199, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/afac0a6d48b7ba9ebe5475e9875f59cf?s=128&d=identicon&r=PG&f=1", "display_name": "jekyll", "link": "https://stackoverflow.com/users/5571199/jekyll"}, "edited": false, "score": 0, "creation_date": 1478713590, "post_id": 40512543, "comment_id": 68267813, "body": "The only thing then is the &#39;key&#39; is generated inside the program and lost afterwards. So you&#39;ll have to crack the code (find what random value the computer assigned to &#39;key&#39;) in whatever decoder you&#39;re implementing."}, {"owner": {"reputation": 41, "user_id": 5571199, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/afac0a6d48b7ba9ebe5475e9875f59cf?s=128&d=identicon&r=PG&f=1", "display_name": "jekyll", "link": "https://stackoverflow.com/users/5571199/jekyll"}, "edited": false, "score": 0, "creation_date": 1478713607, "post_id": 40512543, "comment_id": 68267822, "body": "i want randomly choosing a number from a text file again, i.e i&#39;ll create key.txt on my desktop again, which include 0123456789 Hmm i will try your code."}, {"owner": {"reputation": 41, "user_id": 5571199, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/afac0a6d48b7ba9ebe5475e9875f59cf?s=128&d=identicon&r=PG&f=1", "display_name": "jekyll", "link": "https://stackoverflow.com/users/5571199/jekyll"}, "edited": false, "score": 0, "creation_date": 1478713664, "post_id": 40512543, "comment_id": 68267848, "body": "inverse is simply, i decoded ciphertext (reading from file out.txt), but if we know the key :)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1478719359, "post_id": 40512543, "comment_id": 68270631, "body": "Cannot up-vote an answer that suggests using depreciate/dropped <code>gets()</code>.  Consider re-write."}, {"owner": {"reputation": 41, "user_id": 5571199, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/afac0a6d48b7ba9ebe5475e9875f59cf?s=128&d=identicon&r=PG&f=1", "display_name": "jekyll", "link": "https://stackoverflow.com/users/5571199/jekyll"}, "edited": false, "score": 0, "creation_date": 1478723933, "post_id": 40512543, "comment_id": 68272850, "body": "Aidenhjj i did it. Our code are read plaintext from the lucky.txt file and  generated random key. (<code>srand( (unsigned int) time(NULL) );</code> <code>key = rand() % 26; </code> ..etc.) and it wrote ciphertext to output.txt and generated key to key.txt file. For decryption, read the key from key.txt and ciphertext from output1.txt file and wrote the plaintext to output2.txt file. it works :) i did it. with your help thank you ^^"}, {"owner": {"reputation": 41, "user_id": 5571199, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/afac0a6d48b7ba9ebe5475e9875f59cf?s=128&d=identicon&r=PG&f=1", "display_name": "jekyll", "link": "https://stackoverflow.com/users/5571199/jekyll"}, "edited": false, "score": 0, "creation_date": 1479333553, "post_id": 40512543, "comment_id": 68518263, "body": "@Aidenhjj, i need your help dude, i am dealing with affine cipher but encryption doesnt work correctly. actually the original affine encryption function is r = ((alpha * p) + beta ) % 26; thats ok but how can i modified inside putc function &gt;&gt; <code>putc( ((alpha * p) + beta - 65) % 26 + 65 , cipher);</code> i checked the keys in txt file but it doesnt correctly encrypted. (char p;)"}], "tags": [], "owner": {"reputation": 1108, "user_id": 3795491, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/42ae3e8407acf24055cf54a9f61887c9?s=128&d=identicon&r=PG&f=1", "display_name": "Aidenhjj", "link": "https://stackoverflow.com/users/3795491/aidenhjj"}, "is_accepted": false, "score": 1, "last_activity_date": 1478722993, "last_edit_date": 1478722993, "creation_date": 1478711765, "answer_id": 40512543, "question_id": 40512281, "link": "https://stackoverflow.com/questions/40512281/read-from-a-text-file-shift-cipher-in-c/40512543#40512543", "title": "Read from a text file shift cipher in C", "body": "<p>Following on from my comments. You need to rewind the file pointer for <code>file_in</code> and also your includes were poorly formatted at the top. Not sure whether this makes a difference (beginner myself, but certainly stuck out when I read it):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctype.h&gt;\n\nint encode (int, int);\n\nint encode(int ch, int key) {\n    if (islower(ch)) {\n        ch = (ch-'a' + key) % 26 + 'a';\n        ch += (ch &lt; 'a') ? 26 : 0;\n    }\n    else if (isupper(ch)) {\n        ch = (ch-'A' + key) % 26 + 'A';\n        ch += (ch &lt; 'A') ? 26 : 0;\n    }\n    return ch;\n}\nint main (void)\n{\n    FILE *file_in;\n    FILE *file_out;\n    char ch;\n    char text[300];\n    int key;\n\n    // gets(text);  // Removed in question\n    file_in = fopen(\"shift_cipher.c\", \"r\");\n\n\n    if( file_in == NULL )\n    {\n        perror(\"Error while opening the file.\\n\");\n        exit(EXIT_FAILURE);\n    }\n    printf(\"\\n The contents of the file are : \\n\");\n\n    while( ( ch = fgetc(file_in) ) != EOF )\n    {\n        printf(\"%c\",ch);\n    }\n\n    rewind(file_in);\n\n    // while (fgets(line, MAXLINE, f1)) {\n    //     printf(\"%s\", line);\n    // }\n\n    // gets(text);  // Removed in question\n    file_out = fopen(\"out.txt\",\"w\");\n\n    printf(\"\\n Enter the alphabetic offset key you would like to use:\");\n    scanf(\"%d\", &amp;key);\n\n    while( ( ch = fgetc(file_in) ) != EOF )\n    {\n        printf(\"%c\", ch);\n        ch=encode(ch, key);\n        fprintf(file_out, \"%c\", ch);\n    }\n    printf(\"file has been encoded\");\n    fclose(file_out);\n    fclose(file_in);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 5571199, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/afac0a6d48b7ba9ebe5475e9875f59cf?s=128&d=identicon&r=PG&f=1", "display_name": "jekyll", "link": "https://stackoverflow.com/users/5571199/jekyll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 598, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1479285428, "creation_date": 1478710859, "last_edit_date": 1479285428, "question_id": 40512281, "link": "https://stackoverflow.com/questions/40512281/read-from-a-text-file-shift-cipher-in-c", "title": "Read from a text file shift cipher in C", "body": "<p>I'm working on Shift cipher, I am having problems with encryption. It has no errors or trouble compiling but after I run it the output file is empty. i think reading the file but not encrypted out.txt file is empty. i didn't solve it. Thank you.</p>\n\n<pre><code>int main\n{\n\n    file_in = fopen(\"/Users/mathmoiselle/Desktop/lucky.txt\", \"r\");\n\n    if( file_in == NULL )\n    {\n        perror(\"Error while opening the file.\\n\");\n        exit(EXIT_FAILURE);\n    }\n\n    file_out = fopen(\"/Users/mathmoiselle/Desktop/out.txt\",\"r\");\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "algorithm", "data-structures", "tree", "binary-search-tree"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1478710891, "post_id": 40512239, "comment_id": 68266415, "body": "Debug it then.."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1478723066, "post_id": 40512239, "comment_id": 68272393, "body": "Please do not post links to code stored off-site; post the code in the question.  If it is big, work on creating an MCVE (<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>).  Then post the MCVE code."}], "answers": [{"tags": [], "owner": {"reputation": 2076, "user_id": 1866196, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/TrCUq.png?s=128&g=1", "display_name": "skrtbhtngr", "link": "https://stackoverflow.com/users/1866196/skrtbhtngr"}, "is_accepted": false, "score": 0, "last_activity_date": 1478711044, "creation_date": 1478711044, "answer_id": 40512334, "question_id": 40512239, "link": "https://stackoverflow.com/questions/40512239/binary-search-tree-level-order-traversal-in-c/40512334#40512334", "title": "Binary Search Tree - Level order traversal in C", "body": "<p>In line 83, <code>while(isEmpty(q))</code> should be <code>while(!isEmpty(q))</code> because we would want to run the loop while the Queue is non-empty.</p>\n\n<p>I hope I got the bug right.</p>\n"}, {"tags": [], "owner": {"reputation": 13895, "user_id": 1162233, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/e3Eil.jpg?s=128&g=1", "display_name": "Kaidul", "link": "https://stackoverflow.com/users/1162233/kaidul"}, "is_accepted": false, "score": 2, "last_activity_date": 1478712545, "last_edit_date": 1478712545, "creation_date": 1478712169, "answer_id": 40512657, "question_id": 40512239, "link": "https://stackoverflow.com/questions/40512239/binary-search-tree-level-order-traversal-in-c/40512657#40512657", "title": "Binary Search Tree - Level order traversal in C", "body": "<p>You have several bugs in your <code>levelorder</code> function. Please check the corrections below. I've kept your buggy line in side comment.</p>\n\n<pre><code>void levelorder(Node* root)\n{\n    if(root==NULL) return;\n    else\n    {\n        Queue* q = createQ();\n        enqueue(q,root);\n        while(!isEmpty(q)) // not while(isEmpty(q)) you have to check untill Queue is non-empty\n        {\n            Node* temp = dequeue(q);\n            printf(\"%d \",temp-&gt;data);\n            if(temp-&gt;right)\n                enqueue(q,temp-&gt;right);\n            if(temp-&gt;left)  // not else if(temp-&gt;left); there can be right node and left node as well.. no semicolon\n                enqueue(q,temp-&gt;left);\n        }\n    }\n}\n</code></pre>\n\n<p>Rest of the code is okay. You should practice debugging yourself using some well-known IDE.</p>\n"}], "owner": {"reputation": 1, "user_id": 6638859, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rBVTee6_ABg/AAAAAAAAAAI/AAAAAAAAANw/RG4DGNs8HAM/photo.jpg?sz=128", "display_name": "Abhishek Thanki", "link": "https://stackoverflow.com/users/6638859/abhishek-thanki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 839, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1478723142, "creation_date": 1478710699, "last_edit_date": 1478723142, "question_id": 40512239, "link": "https://stackoverflow.com/questions/40512239/binary-search-tree-level-order-traversal-in-c", "title": "Binary Search Tree - Level order traversal in C", "body": "<p>I was trying out the code for level order traversal in a binary search tree using a queue and I don't know why I'm getting no output when I try to print the level order. Someone please help!</p>\n\n<p><a href=\"http://codepad.org/ocIVKXhf\" rel=\"nofollow noreferrer\">Link to my code.</a></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct \n{\n    int data;\n    struct Node *right, *left;\n}Node;\n\ntypedef struct\n{\n    int front, rear, size;\n    unsigned capacity;\n    Node* arr[100];\n}Queue;\n\nQueue* createQ()\n{\n    Queue* q = (Queue*) malloc(sizeof(Queue));\n    q-&gt;capacity = 100;\n    q-&gt;front = q-&gt;size = 0; \n    q-&gt;rear = q-&gt;capacity - 1;\n    return q;\n}\n\nint isEmpty(Queue* q)\n{  \n    return (q-&gt;size == 0); \n}\nint isFull(Queue* q)\n{  \n    return (q-&gt;size == q-&gt;capacity);  \n}\nvoid enqueue(Queue* q, Node* item)\n{\n    if (isFull(q))\n        return;\n    q-&gt;rear = (q-&gt;rear + 1)%q-&gt;capacity;\n    q-&gt;arr[q-&gt;rear] = item;\n    q-&gt;size = q-&gt;size + 1;\n }\n\n\nNode* dequeue(Queue* q)\n{\n    if (isEmpty(q))\n        return NULL;\n    Node* item = q-&gt;arr[q-&gt;front];\n    q-&gt;front = (q-&gt;front + 1)%q-&gt;capacity;\n    q-&gt;size = q-&gt;size - 1;\n    return item;\n}\n\nNode* create(Node* root, int data)\n{\n    if(root==NULL)\n    {\n        root = (Node*)malloc(sizeof(Node));\n        root-&gt;data = data;\n        root-&gt;left = root-&gt;right = NULL;\n        return root;\n    }\n    else\n    {\n        if(data&gt;root-&gt;data)\n        {\n            root-&gt;right = create(root-&gt;right,data);\n        }\n        else\n        {\n            root-&gt;left = create(root-&gt;left,data);\n        }\n        return root;\n    }\n}\nvoid levelorder(Node* root)\n{\n    if(root==NULL) return;\n    else\n    {\n        Queue* q = createQ();\n        enqueue(q,root);\n        while(isEmpty(q))\n        {\n            Node* temp = dequeue(q);\n            printf(\"%d \",temp-&gt;data);\n            if(temp-&gt;right)\n                enqueue(q,temp-&gt;right);\n            else if(temp-&gt;left);\n                enqueue(q,temp-&gt;left);\n        }\n    }\n}\n\nvoid main()\n{\n    int data;\n    Node *root = NULL;\n    for(;;)\n    {\n        printf(\"\\nEnter the elements (-1 to stop) : \");\n        scanf(\"%d\",&amp;data);\n        if(data==-1) break;\n        root = create(root,data);\n    }\n    printf(\"\\nPrinting the elemtents in level order : \");\n    levelorder(root);\n}\n</code></pre>\n"}, {"tags": ["c", "string", "algorithm", "logic"], "owner": {"reputation": 31, "user_id": 7137395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6f2e9bde0c5373aac0f1c667422e707?s=128&d=identicon&r=PG&f=1", "display_name": "Nitish", "link": "https://stackoverflow.com/users/7137395/nitish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 228, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1478710334, "creation_date": 1478710334, "question_id": 40512133, "link": "https://stackoverflow.com/questions/40512133/how-to-implement-implication-free-nnf-distr-functions-for-cnf", "title": "How to implement Implication Free, NNF, DISTR functions for CNF?", "body": "<p><strong>Algorithm 1: IMPL FREE(\u03c6)</strong></p>\n\n<p><em>Input</em>: \u03c6 : a logic formula<br>\n<em>Output</em>: \u03c6\u2032: all implications ( \u00d4\u21d2 ) in \u03c6\u2032are removed and \u03c6\u2032 \u2261 \u03c6</p>\n\n<p><code>switch \u03c6 do\n    case \u03c6 is a literal: do return \u03c6;\n    case \u03c6 is \u00ac\u03c61: do return \u00acIMPL FREE(\u03c61);\n    case \u03c6 is \u03c61 \u2227 \u03c62: do return IMPL FREE(\u03c61) \u2227 IMPL FREE(\u03c62);\n    case \u03c6 is \u03c61 \u2228 \u03c62: do return IMPL FREE(\u03c61) \u2228 IMPL FREE(\u03c62); \n    case \u03c6 is \u03c61 \u00d4\u21d2 \u03c62: do return IMPL FREE(\u00ac\u03c61 \u2228 \u03c62);\n    otherwise do assert(0);</code></p>\n\n<p><strong>Algorithm 2: NNF(\u03c6)</strong></p>\n\n<p><em>Input</em>: \u03c6 : a logic formula without implication (=>)<br>\n<em>Output</em>: \u03c6\u2032: only propositional atoms in \u03c6\u2032are negated and \u03c6\u2032 \u2261 \u03c6</p>\n\n<p><code>switch \u03c6 do\n    case \u03c6 is a literal: do return \u03c6;\n    case \u03c6 is \u00ac\u00ac\u03c61: do return NNF(\u03c61);\n    case \u03c6 is \u03c61 \u2227 \u03c62: do return NNF(\u03c61) \u2227 NNF(\u03c62);\n    case \u03c6 is \u03c61 \u2228 \u03c62: do return NNF(\u03c61) \u2228 NNF(\u03c62);\n    case \u03c6 is \u00ac(\u03c61 \u2227 \u03c62): do return NNF(\u00ac\u03c61 \u2228 \u00ac\u03c62);\n    case \u03c6 is \u00ac(\u03c61 \u2228 \u03c62): do return NNF(\u00ac\u03c61 \u2227 \u00ac\u03c62);\n    otherwise do assert(0);</code></p>\n\n<p>How to implement these in C? \nI have been trying hard but couldn't code.<br>\nPlease help.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 1, "creation_date": 1478713638, "post_id": 40512094, "comment_id": 68267839, "body": "What&#39;s the strange result the program throws up?"}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1478714424, "post_id": 40512094, "comment_id": 68268228, "body": "Do you really need to store all of the values?"}, {"owner": {"reputation": 53, "user_id": 6825441, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/af9bd2ffef4166030a3175db0d812721?s=128&d=identicon&r=PG&f=1", "display_name": "sls1981", "link": "https://stackoverflow.com/users/6825441/sls1981"}, "edited": false, "score": 0, "creation_date": 1478715454, "post_id": 40512094, "comment_id": 68268740, "body": "Hi, here is the result   Enter the amount of integers you would like to enter:    4 Enter 4 positive integers: 6  You entered 6  4  You entered 4 9  You entered 9 7  You entered 7 The smallest number you entered is: 88 The largest number you entered is: 4201024 2100556.00 is the average of the integers you entered  Process returned 0 (0x0)   execution time : 35.329 s Press any key to continue."}], "answers": [{"tags": [], "owner": {"reputation": 64, "user_id": 5476684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q9Bcq.jpg?s=128&g=1", "display_name": "Chris Nevers", "link": "https://stackoverflow.com/users/5476684/chris-nevers"}, "is_accepted": true, "score": 1, "last_activity_date": 1478720673, "creation_date": 1478720673, "answer_id": 40514777, "question_id": 40512094, "link": "https://stackoverflow.com/questions/40512094/unknown-number-of-user-input-integers/40514777#40514777", "title": "Unknown number of user input integers", "body": "<p>Try something along the lines of</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, const char * argv[]) {\n    int lo, hi, input;\n    scanf(\"\\n%d\", &amp;input);\n    if(input &gt;= 0) {\n        hi = input;\n        lo = input;\n        while(input &gt;= 0) {\n            if(input &gt; hi) {\n                hi = input;\n            }\n            if(input &lt; lo) {\n                lo = input;\n            }\n            scanf(\"\\n%d\", &amp;input);\n        }\n    }\n    printf(\"\\nlo:%d\", lo);\n    printf(\"\\nhi:%d\", hi);\n    printf(\"\\navg:%d\", (hi + lo)/2);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 6825441, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/af9bd2ffef4166030a3175db0d812721?s=128&d=identicon&r=PG&f=1", "display_name": "sls1981", "link": "https://stackoverflow.com/users/6825441/sls1981"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 202, "favorite_count": 0, "accepted_answer_id": 40514777, "answer_count": 1, "score": 0, "last_activity_date": 1478720673, "creation_date": 1478710187, "last_edit_date": 1478711201, "question_id": 40512094, "link": "https://stackoverflow.com/questions/40512094/unknown-number-of-user-input-integers", "title": "Unknown number of user input integers", "body": "<p>So the second part of my homework this week is to: Write a program that accepts an arbitrary number of positive integers, supplied by\nthe user, and then prints out the highest and lowest integer, as well as the average\nof these two. The program should accept data until the user signals that data entry is\ncomplete by entering a negative value.\nThe program should use the functions from Assignment 1, i.e. one which returns the\nlarger of two integer arguments, one that returns the lower of two integers, and one\nwhich returns the average. </p>\n\n<p>I am so far out of my depth here it is unbelievable. Extremely worried about this module as it doesn't seem to be sinking in for me. :(</p>\n\n<p>I can's seem to figure out how to do this with an unknown number of integers. Currently the program throws up a strange result.</p>\n\n<p>My code so far is this:  </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint getLo(int num1, int num2); \nint getHi(int num1, int num2);\nfloat getAv(int num1, int num2);\n\nint main() \n{\n    int num1, num2;\n    int count=0,i;\n    int *storedNumb;\n\n    printf(\"Enter the amount of integers you would like to enter:\\n\\n\\n\\n\");\n    scanf(\"%d\", &amp;count);\n\n    printf(\"Enter %d positive integers:\\n\", count);\n\n     storedNumb= (int *) calloc(count,sizeof(int));\n\n    for(i=0; i&lt;count; ++i)\n    {\n        scanf(\"%d\",&amp;storedNumb[i]);\n        printf(\"\\nYou entered %d\\n\",storedNumb[i]);\n    }\n\n    float avg = getAv(num1, num2);\n\n    if (num1 &lt;= 0){ // if statement prompting a positive input\n        printf(\"Please enter POSITIVE integers!\\n\");\n        return 0;}\n        else if (num2 &lt;= 0){\n                printf(\"Please enter POSITIVE integers!\\n\");\n                return 0;\n                }\n\n\n    printf(\"The smallest number you entered is: %d\\n\", getLo(num1, num2));\n    printf(\"The largest number you entered is: %d\\n\", getHi(num1, num2));\n    printf(\"%.2f is the average of the integers you entered\\n\", avg);\n\n    return 0;\n\n}\n\nfloat getAv(int num1, int num2)\n{\n    return (num1 + num2) / 2.;\n}\n\nint getLo(int num1, int num2)\n{\n    if (num1 &lt; num2)\n    {\n        return num1;\n    }\n    else\n    {\n        return num2;\n    }\n}\n\nint getHi(int num1, int num2)\n{\n    if (num1 &gt; num2)\n    {\n        return num1;\n    }\n    else\n    {\n        return num2;\n    }\n\n}\n</code></pre>\n"}, {"tags": ["c", "linked-list", "swap", "doubly-linked-list"], "comments": [{"owner": {"reputation": 1140, "user_id": 1037018, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/fefbe252f40e21b3e7fcedaea9f6fb5d?s=128&d=identicon&r=PG", "display_name": "Hypino", "link": "https://stackoverflow.com/users/1037018/hypino"}, "edited": false, "score": 1, "creation_date": 1478710115, "post_id": 40511887, "comment_id": 68265983, "body": "You may want to consider swapping the data of the nodes instead of the nodes themselves. That would make things much easier for you in this case."}, {"owner": {"reputation": 65, "user_id": 3120283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d3d14635a19b417dd0bec26c0e8bc9a?s=128&d=identicon&r=PG&f=1", "display_name": "user3120283", "link": "https://stackoverflow.com/users/3120283/user3120283"}, "reply_to_user": {"reputation": 1140, "user_id": 1037018, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/fefbe252f40e21b3e7fcedaea9f6fb5d?s=128&d=identicon&r=PG", "display_name": "Hypino", "link": "https://stackoverflow.com/users/1037018/hypino"}, "edited": false, "score": 0, "creation_date": 1478711916, "post_id": 40511887, "comment_id": 68266976, "body": "@Hypino No, i actually want to swap the nodes"}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 3120283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d3d14635a19b417dd0bec26c0e8bc9a?s=128&d=identicon&r=PG&f=1", "display_name": "user3120283", "link": "https://stackoverflow.com/users/3120283/user3120283"}, "edited": false, "score": 0, "creation_date": 1478712156, "post_id": 40512042, "comment_id": 68267101, "body": "Hmm, add these commands at the end of the swapElements2 function? Because if i do that, i get &quot;Changed list: 1&quot;(<a href=\"http://ideone.com/YouUbd\" rel=\"nofollow noreferrer\">here</a>)"}], "tags": [], "owner": {"reputation": 1215, "user_id": 5292630, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9xh1qblC2Uk/AAAAAAAAAAI/AAAAAAAAAKM/GTBB97nnbYA/photo.jpg?sz=128", "display_name": "Heman Gandhi", "link": "https://stackoverflow.com/users/5292630/heman-gandhi"}, "is_accepted": false, "score": 0, "last_activity_date": 1478710015, "creation_date": 1478710015, "answer_id": 40512042, "question_id": 40511887, "link": "https://stackoverflow.com/questions/40511887/c-swap-first-and-last-element-in-doubly-linked-list/40512042#40512042", "title": "C - Swap first and last element in doubly linked list", "body": "<p>You forget to alter <code>(*head) -&gt; prev</code> and <code>(*tail) -&gt; prev</code>.</p>\n\n<pre><code>(*head)-&gt;prev = temp;\n(*tail)-&gt;prev = NULL;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1478722720, "post_id": 40515170, "comment_id": 68272209, "body": "Indentation is not correct, and there should always be a short explanation, not just a code dump."}, {"owner": {"reputation": 5901, "user_id": 6082645, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/Cgm7x.jpg?s=128&g=1", "display_name": "jafarbtech", "link": "https://stackoverflow.com/users/6082645/jafarbtech"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1478723180, "post_id": 40515170, "comment_id": 68272460, "body": "Thanks, i have added the explanation now."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1478724810, "post_id": 40515170, "comment_id": 68273278, "body": "Please indent your code correctly, this makes it more readable and easier to follow."}, {"owner": {"reputation": 5901, "user_id": 6082645, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/Cgm7x.jpg?s=128&g=1", "display_name": "jafarbtech", "link": "https://stackoverflow.com/users/6082645/jafarbtech"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1478725056, "post_id": 40515170, "comment_id": 68273412, "body": "Sorry, i don&#39;t know what do u mean"}, {"owner": {"reputation": 65, "user_id": 3120283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d3d14635a19b417dd0bec26c0e8bc9a?s=128&d=identicon&r=PG&f=1", "display_name": "user3120283", "link": "https://stackoverflow.com/users/3120283/user3120283"}, "edited": false, "score": 0, "creation_date": 1478726782, "post_id": 40515170, "comment_id": 68274257, "body": "@jafarbtech Thank you kind sir. This solved my problem. I appreciate your help and thanks for the explanation you provided."}], "tags": [], "owner": {"reputation": 5901, "user_id": 6082645, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/Cgm7x.jpg?s=128&g=1", "display_name": "jafarbtech", "link": "https://stackoverflow.com/users/6082645/jafarbtech"}, "is_accepted": true, "score": 1, "last_activity_date": 1478728680, "last_edit_date": 1478728680, "creation_date": 1478722250, "answer_id": 40515170, "question_id": 40511887, "link": "https://stackoverflow.com/questions/40511887/c-swap-first-and-last-element-in-doubly-linked-list/40515170#40515170", "title": "C - Swap first and last element in doubly linked list", "body": "<p>To swap the first and head and tail elements you have to walk through the following procedure.\nFirst we have to get the previous node of tail and next node of head in some temporary variable and exchange head and tail's next and prev pointers.</p>\n\n<pre><code>void swapElements2(struct node2 **head, struct node2 **tail) {\n    struct node2 *ttail, *thead;\n\n    ttail = (*tail) -&gt; prev;\n    thead = (*head) -&gt; next;\n\n    (*head) -&gt; next = NULL;\n    (*tail) -&gt; prev = NULL;\n\n    (*head) -&gt; prev = ttail;\n    (*tail) -&gt; next = thead;\n\n    ttail -&gt; next = (*head);\n    thead -&gt; prev = (*tail);\n\n    (*tail)  = ttail -&gt; next;\n    (*head)  = thead -&gt; next;\n}\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 3120283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d3d14635a19b417dd0bec26c0e8bc9a?s=128&d=identicon&r=PG&f=1", "display_name": "user3120283", "link": "https://stackoverflow.com/users/3120283/user3120283"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1351, "favorite_count": 0, "accepted_answer_id": 40515170, "answer_count": 2, "score": 1, "last_activity_date": 1478884476, "creation_date": 1478709529, "last_edit_date": 1478884476, "question_id": 40511887, "link": "https://stackoverflow.com/questions/40511887/c-swap-first-and-last-element-in-doubly-linked-list", "title": "C - Swap first and last element in doubly linked list", "body": "<p>I'm trying to swap the first and last elements of a doubly linked list. So far i have the following code, where i create a list and add some numbers to it. But the output is the same list both times.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct node2 {\n    int number;\n    struct node2 *next, *prev;\n};\n\nvoid addNodeDouble(struct node2 **head, struct node2 **tail, int num, int thesi) {\n    if (*head == NULL) {\n        struct node2 * current;\n        current = (struct node2 *)malloc(1 * sizeof(struct node2));\n        current-&gt;number = num;\n        current-&gt;prev = NULL;\n        current-&gt;next = NULL;\n        *head = current;\n        *tail = current;\n    } else {\n        if (thesi == 1) {\n            struct node2 *current, *temp;\n            current = (struct node2 *)malloc(1 * sizeof(struct node2));\n            current-&gt;number = num;\n            temp = *head;\n            while (temp-&gt;next != NULL)\n                temp = temp-&gt;next;\n\n            temp-&gt;next = current;\n            current-&gt;prev = *tail;\n            current-&gt;next = NULL;\n            (*tail)-&gt;next = current;\n            *tail = current;\n        } else  {\n            struct node2 *current;\n            current = (struct node2 *)malloc(1 * sizeof(struct node2));\n            current-&gt;number = num;\n            current-&gt;next = *head;\n            (*head)-&gt;prev = current;\n            *head = current;\n        }\n    }\n}\n\nvoid ReversedisplayList(struct node2 **head, struct node2 **tail) {\n    struct node2 *current;\n    if (*head == NULL)\n        printf(\"I lista einai adeia!\\n\");\n    else {\n        current = *tail;\n        while (current != NULL) {\n            printf(\"%d \", current-&gt;number);\n            current = current-&gt;prev;\n        }\n    }\n}\n\nvoid swapElements2(struct node2 **head, struct node2 **tail) {\n    struct node2 *current, *temp;\n\n    temp = (*tail)-&gt;prev;\n    current = *tail;\n\n    temp-&gt;next = *head;\n    current-&gt;next = (*head)-&gt;next;\n    (*head)-&gt;next = NULL;\n    *head = current;\n}\n\nint main() {\n    struct node2 *head, *tail;\n    head = tail = NULL;\n\n    addNodeDouble(&amp;head, &amp;tail, 4, 1);\n    addNodeDouble(&amp;head, &amp;tail, 8, 1);\n    addNodeDouble(&amp;head, &amp;tail, 3, 0);\n    addNodeDouble(&amp;head, &amp;tail, 1, 1);\n    addNodeDouble(&amp;head, &amp;tail, 7, 0);\n\n    printf(\"\\n\\nDoubly linked list (reversed): \");\n    ReversedisplayList(&amp;head, &amp;tail);\n\n    swapElements2(&amp;head, &amp;tail);\n    printf(\"\\nChanged list: \");\n    ReversedisplayList(&amp;head, &amp;tail);\n}  \n</code></pre>\n\n<p>I get:</p>\n\n<pre><code>Doubly linked list (reversed): 1 8 4 3 7 \nChanged list: 1 8 4 3 7 \n</code></pre>\n\n<p>But I want:</p>\n\n<pre><code>Changed list: 7 8 4 3 1 \n</code></pre>\n"}, {"tags": ["c", "daemon"], "comments": [{"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1478709561, "post_id": 40511770, "comment_id": 68265679, "body": "Why are you doing the <code>ls</code> and where do you expect its output to go?  Child processes by convention inherit the stdout of the parent process.  You closed the stdout in the parent process.  <code>ls</code> uses stdout.  This is the correct expected behaviour."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1478709758, "post_id": 40511770, "comment_id": 68265794, "body": "<a href=\"https://stackoverflow.com/questions/33121631/return-value-of-system-function\">Somewhat related post</a>"}, {"owner": {"reputation": 6816, "user_id": 375551, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ce1cb9cee857eac6c2c3fb77433a8129?s=128&d=identicon&r=PG", "display_name": "BlueBird", "link": "https://stackoverflow.com/users/375551/bluebird"}, "edited": false, "score": 0, "creation_date": 1478745116, "post_id": 40511770, "comment_id": 68279806, "body": "my program is pretty big and I am not using <code>ls</code> in real environment. i made the program simple to reproduce the issue what I am facing. Also, to see the status of program, I am not looking at the out but but the statis code in the syslog. Hope you understand."}], "answers": [{"comments": [{"owner": {"reputation": 6816, "user_id": 375551, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ce1cb9cee857eac6c2c3fb77433a8129?s=128&d=identicon&r=PG", "display_name": "BlueBird", "link": "https://stackoverflow.com/users/375551/bluebird"}, "edited": false, "score": 0, "creation_date": 1478745470, "post_id": 40511982, "comment_id": 68279878, "body": "thanks for the response. unfortunately I am not expecting any output in this program. I am completely aware that there wont be any output after closing tbe <code>STDOUT</code>. Thats y I am using <code>log</code>. And my real program is not using <code>ls</code> at all. this is to minimize the scenario. I just put an update on the question. All what I need to know is, wether the externel program exited with <code>0</code> exit code or not using the <code>syslog</code>."}], "tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": false, "score": 2, "last_activity_date": 1478709834, "creation_date": 1478709834, "answer_id": 40511982, "question_id": 40511770, "link": "https://stackoverflow.com/questions/40511770/error-in-executing-system-function-with-stdout-fileno-closed/40511982#40511982", "title": "error in executing system function with STDOUT_FILENO closed", "body": "<p>Your daemon creation looks fine. But daemon processes by convention do not have a controlling terminal which you accomplish by closing all the standard file descriptors and  call <code>setsid()</code> to create a new session to make the daemon a session leader. So, you can't make the daemon produce any output on the <code>stdout</code> stream. It obviously works if you don't close the <code>stdout</code> stream.</p>\n\n<p>So, what you are doing is trying to write something to a tty from a terminal. So, you either don't need a daemon for this purpose or you need to write to a different file (instead of stdout).</p>\n"}, {"comments": [{"owner": {"reputation": 6816, "user_id": 375551, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ce1cb9cee857eac6c2c3fb77433a8129?s=128&d=identicon&r=PG", "display_name": "BlueBird", "link": "https://stackoverflow.com/users/375551/bluebird"}, "edited": false, "score": 0, "creation_date": 1478749164, "post_id": 40519276, "comment_id": 68280604, "body": "Looks like a perfect explaination. I did not realize this. let me try this and comment back.Thanks."}, {"owner": {"reputation": 6816, "user_id": 375551, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ce1cb9cee857eac6c2c3fb77433a8129?s=128&d=identicon&r=PG", "display_name": "BlueBird", "link": "https://stackoverflow.com/users/375551/bluebird"}, "edited": false, "score": 0, "creation_date": 1478761351, "post_id": 40519276, "comment_id": 68283999, "body": "Perfect!. Thanks for the guide."}], "tags": [], "owner": {"reputation": 74709, "user_id": 21945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/631470ecb1d4fe8bd3be6d7e0dfe4449?s=128&d=identicon&r=PG", "display_name": "mhawke", "link": "https://stackoverflow.com/users/21945/mhawke"}, "is_accepted": true, "score": 2, "last_activity_date": 1478746522, "creation_date": 1478746522, "answer_id": 40519276, "question_id": 40511770, "link": "https://stackoverflow.com/questions/40511770/error-in-executing-system-function-with-stdout-fileno-closed/40519276#40519276", "title": "error in executing system function with STDOUT_FILENO closed", "body": "<p>In case it is not clear from other comments and answers, <code>ls</code> writes its output to stdout. If it can not write to stdout it terminates and (apparently) sets an status code of 512 (non-zero in any case).</p>\n\n<p>The child process will inherit stdout from the parent, so if you do not close stdout in the parent, the child will have a stdout to write to and the command will succeed. If you close stdout, then the child has nowhere to write its output and the error occurs.</p>\n\n<p>So, although <code>ls</code> is just an example for this question, your actual child process is writing to stdout which results in the same problem.</p>\n\n<p>The simplest way around this, and assuming that you do not want the child's output, is to redirect the child's stdout on the command line:</p>\n\n<pre><code>int status = system(\"ls &gt;/dev/null 2&gt;&amp;1\");\n</code></pre>\n\n<p>This will redirect stdout and stderr to <code>/dev/null</code>, effectively throwing away the child's output while still giving it somewhere to write to.</p>\n"}], "owner": {"reputation": 6816, "user_id": 375551, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ce1cb9cee857eac6c2c3fb77433a8129?s=128&d=identicon&r=PG", "display_name": "BlueBird", "link": "https://stackoverflow.com/users/375551/bluebird"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 307, "favorite_count": 0, "accepted_answer_id": 40519276, "answer_count": 2, "score": 1, "last_activity_date": 1478746522, "creation_date": 1478709095, "last_edit_date": 1478745571, "question_id": 40511770, "link": "https://stackoverflow.com/questions/40511770/error-in-executing-system-function-with-stdout-fileno-closed", "title": "error in executing system function with STDOUT_FILENO closed", "body": "<p>I have an strange issue. I am not very good in C language. I am trying to create a daemon to execute my bash script based service in Linux. To make it easy I have made the code simple. Below is my code.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string.h&gt;\n#include &lt;syslog.h&gt;\n\nint main(int argc, char* argv[])\n{\n    pid_t process_id = 0;\n    pid_t sid = 0;\n    process_id = fork();\n    if (process_id &lt; 0)\n    {\n        printf(\"fork failed!\\n\");\n        exit(1);\n    }\n    if (process_id &gt; 0)\n    {\n        printf(\"daemon creatd with process id %d \\n\", process_id);\n        exit(0);\n    }\n\n    umask(0);\n    sid = setsid();\n    if(sid &lt; 0)\n    {\n        fprintf(stderr, \"Return error\\n\");\n        exit(1);\n    }\n\n    chdir(\"/\");\n    close(STDIN_FILENO);\n    close(STDOUT_FILENO);\n    close(STDERR_FILENO);\n\n\n\n    int status = system(\"ls\");\n\n    openlog(\"slog\", LOG_PID|LOG_CONS, LOG_USER);\n    syslog(LOG_INFO, \"Returned status is %d\", status);\n    closelog();\n\n    return (0);\n}\n</code></pre>\n\n<p>As you can see, the above program will execute the <code>system</code> function to execute the <code>ls</code> command and output the exit code to system log. </p>\n\n<p>After I compile the program and run, in the logs I can see the status code is 512. But If I comment out the following line,</p>\n\n<pre><code>close(STDOUT_FILENO);\n</code></pre>\n\n<p>then it works perfect and I can see in the log the status code is 0,</p>\n\n<p>What I might be doing wrong?</p>\n\n<p><strong><em>UPDATE</em></strong></p>\n\n<p>My program is pretty big and I am not using <code>ls</code> in real environment. i made the program simple to reproduce the issue what I am facing. Also, to see the status of program, I am not looking at the output but the status code in the syslog. </p>\n"}, {"tags": ["c", "scanf", "stdin"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1478710602, "post_id": 40511500, "comment_id": 68266251, "body": "UV for checking the return value of the input function  <code>... != 1</code>.  Far too many problems stem from not doing that first step.  At least this post did that important step."}], "answers": [{"comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1478708870, "post_id": 40511589, "comment_id": 68265296, "body": "May want to check for newlines as well."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 3, "creation_date": 1478709111, "post_id": 40511589, "comment_id": 68265441, "body": "You need a bit more complex <code>while</code> loop, best wrapped in a function. Reading until EOF doesn&#39;t stop reading when input buffer is empty, it will block. It will only end at EOF, which means user entered ctrl-d (Unix shell) or ctrl-Z (Windows terminal) or something like that."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1478709240, "post_id": 40511589, "comment_id": 68265494, "body": "@hyde yes, basically you&#39;re correct, i just wanted to portray the idea, that&#39;s all."}, {"owner": {"reputation": 69, "user_id": 7137259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3416ebb770303776db3fa78195af066?s=128&d=identicon&r=PG&f=1", "display_name": "Koli96", "link": "https://stackoverflow.com/users/7137259/koli96"}, "edited": false, "score": 0, "creation_date": 1478709685, "post_id": 40511589, "comment_id": 68265759, "body": "Thanks for your help! Version with EOF just stucked the program, but this with &#39;\\n&#39; works!"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 1, "last_activity_date": 1478709209, "last_edit_date": 1478709209, "creation_date": 1478708511, "answer_id": 40511589, "question_id": 40511500, "link": "https://stackoverflow.com/questions/40511500/scanf-returns-0-without-waiting-for-input/40511589#40511589", "title": "Scanf returns 0 without waiting for input", "body": "<p>That is because, once the first <code>scanf()</code> failed, it is probably because of matching failure, and the input which caused the matching failure, remains inside the input buffer, waiting to be consumed by next call. </p>\n\n<p>Thus, the next call to <code>scanf()</code> also try to consume the same <em>invalid</em> input residing in the input buffer immediately, without waiting for the explicit external user input as  the input buffer is not empty.</p>\n\n<p><strong>Solution:</strong> After the first input fails for <code>scanf()</code>, you have to clean up the input buffer, for a trivial example, something like <code>while (getchar() != '\\n');</code> should do the job.</p>\n"}, {"tags": [], "owner": {"reputation": 3252, "user_id": 6131611, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3789df5ff075b7a2bfa71c8e2dccd18d?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/6131611/pavel"}, "is_accepted": false, "score": 0, "last_activity_date": 1478710252, "last_edit_date": 1478710252, "creation_date": 1478709180, "answer_id": 40511795, "question_id": 40511500, "link": "https://stackoverflow.com/questions/40511500/scanf-returns-0-without-waiting-for-input/40511795#40511795", "title": "Scanf returns 0 without waiting for input", "body": "<p>It's because of input and output aren't synchronized in C. The program can output some lines after user's input while the input hasn't been read. Try to run this code:</p>\n\n<pre><code>char token;\n\nscanf(\"%c\", &amp;token);\nprintf(\"%c\\n\", token);\nprintf(\"line 1\\n\");\n\nscanf(\"%c\", &amp;token);\nprintf(\"%c\\n\", token);\nprintf(\"line 2\\n\");\n\nscanf(\"%c\", &amp;token);\nprintf(\"%c\\n\", token);\nprintf(\"line 3\\n\");\n</code></pre>\n\n<p>And input <strong><em>abc</em></strong> in one line.</p>\n\n<p>You can imagine this like there are two separated consoles, one for input and another for output.</p>\n\n<hr>\n\n<p>For example you want to input <strong><em>asd</em></strong> for <code>a</code> and <strong><em>3</em></strong> for <code>b</code>. In this case, the first <code>scanf</code> won't find any number and will return 0. But it also won't read anything from the input. Because of this, the second <code>scanf</code> will see <strong><em>asd</em></strong> too.</p>\n\n<p>To clear the input if <code>a</code> isn't a number, you should input all remaining chars in the line until <code>'\\n'</code> (look at the @Sourav's solution)</p>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 2, "last_activity_date": 1478709754, "creation_date": 1478709754, "answer_id": 40511958, "question_id": 40511500, "link": "https://stackoverflow.com/questions/40511500/scanf-returns-0-without-waiting-for-input/40511958#40511958", "title": "Scanf returns 0 without waiting for input", "body": "<p>The input that failed to convert to a number for the first <code>fscanf()</code> is still pending in standard input's buffer and causes the second <code>fscanf()</code> to fail as well.  Try discarding offending input and re-prompting the user:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    int a = 0;\n    int b = 0;\n    int c;\n    printf(\"Number a:\\n\");\n    while (scanf(\"%d\", &amp;a) != 1) {\n        printf(\"Not a number, try again:\\n\");\n        while ((c = getchar()) != EOF &amp;&amp; c != '\\n')\n            continue;\n        if (c == EOF)\n            exit(1);\n    }\n    printf(\"Number b:\\n\");\n    while (scanf(\"%d\", &amp;b) != 1) {\n        printf(\"Not a number, try again:\\n\");\n        while ((c = getchar()) != EOF &amp;&amp; c != '\\n')\n            continue;\n        if (c == EOF)\n            exit(1);\n    }\n    printf(\"%d\\n\", a + b);\n    return 0;\n}\n</code></pre>\n\n<p>Factorizing the code with a utility function makes it much clearer:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint get_number(const char *prompt, int *valp) {\n    printf(\"%s:\\n\", prompt);\n    while (scanf(\"%d\", valp) != 1) {\n        printf(\"Not a number, try again:\\n\");\n        while ((c = getchar()) != EOF &amp;&amp; c != '\\n')\n            continue;\n        if (c == EOF)\n            return 0;\n    }\n    return 1;\n}\n\nint main(void) {\n    int a, b;\n\n    if (!get_number(\"Number a\", &amp;a) || !get_number(\"Number b\", &amp;b)) {\n         return 1;\n    }\n    printf(\"%d\\n\", a + b);\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7091963, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-irMlJ68ImP0/AAAAAAAAAAI/AAAAAAAAAmQ/-VUTMQJU4X4/photo.jpg?sz=128", "display_name": "Mikheil Chkheidze", "link": "https://stackoverflow.com/users/7091963/mikheil-chkheidze"}, "is_accepted": false, "score": 0, "last_activity_date": 1478716791, "creation_date": 1478716791, "answer_id": 40513825, "question_id": 40511500, "link": "https://stackoverflow.com/questions/40511500/scanf-returns-0-without-waiting-for-input/40513825#40513825", "title": "Scanf returns 0 without waiting for input", "body": "<p>You could do the same thing using strings without problems with scanf. Just take the user input as string and convert it to integer. Then convert the string back to integer to check whether they are the same. If they are the same, treat a and b as integers, if not, do what you do (You will need to include string.h). Here is the working code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\nint a;\nint b;\nchar str1[100];\nchar str2[100];\n\nprintf(\"Number a:\\n\");  \nscanf(\"%s\", &amp;str1); //take input as a string\na = atoi(str1); //convert string to integer\nsnprintf(str2, 100, \"%d\", a); //convert integer back to string\n\n//if the integer converted to string is not the same as the string converted to integer\nif (strcmp(str1, str2)!= 0)\n{\nprintf(\"Not a number. a=0!\\n\");\na = 0;\n}\nprintf(\"Number b:\\n\");\nscanf(\"%s\", &amp;str1);\nb = atoi(str1);\nsnprintf(str2, 100, \"%d\", b);\n\nif (strcmp(str1, str2)!= 0)\n{\nprintf(\"Not a number. b=0!\\n\");\nb = 0;\n}\nprintf(\"%d\\n\", a+b);\n\nreturn(0);\n}\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 7137259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3416ebb770303776db3fa78195af066?s=128&d=identicon&r=PG&f=1", "display_name": "Koli96", "link": "https://stackoverflow.com/users/7137259/koli96"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1555, "favorite_count": 0, "accepted_answer_id": 40511589, "answer_count": 4, "score": 3, "last_activity_date": 1478716791, "creation_date": 1478708255, "last_edit_date": 1478708747, "question_id": 40511500, "link": "https://stackoverflow.com/questions/40511500/scanf-returns-0-without-waiting-for-input", "title": "Scanf returns 0 without waiting for input", "body": "<p>I have never programmed in C and today I have to write small code. Program is very easy - I want to add two integers.\nBut when I'm trying to check if given input is a number and first scanf returns 0, the second one returns 0 too without waiting for input.\nCode:</p>\n\n<pre><code>int main()\n{\n    int a = 0;\n    int b = 0;\n    printf(\"Number a:\\n\");\n    if (scanf(\"%d\", &amp;a) != 1)\n    {\n        printf(\"Not a number. a=0!\\n\");\n        a = 0;\n    }\n    printf(\"Number b:\\n\");\n    if (scanf(\"%d\", &amp;b) != 1)\n    {\n        printf(\"Not a number. b=0!\\n\");\n        b = 0;\n    }\n    printf(\"%d\\n\", a+b);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["android", "c", "ubuntu"], "comments": [{"owner": {"reputation": 2264, "user_id": 5884788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4f484bab0de0d57ef1fcf392c952791?s=128&d=identicon&r=PG&f=1", "display_name": "bradimus", "link": "https://stackoverflow.com/users/5884788/bradimus"}, "edited": false, "score": 3, "creation_date": 1478707188, "post_id": 40511057, "comment_id": 68264232, "body": "Did you compile the C code on and x86 machine and then try to run it on an ARM machine?"}, {"owner": {"reputation": 7617, "user_id": 2878070, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42b5fba5761d7e519d05b642be0b2e14?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/2878070/sergio"}, "edited": false, "score": 3, "creation_date": 1478707208, "post_id": 40511057, "comment_id": 68264248, "body": "It means that binary, you&#39;ve built, is incompatible with your android CPU architecture. To run C/C++ code on Android it must be compiled by proper toolchain.  <a href=\"https://developer.android.com/ndk/index.html\" rel=\"nofollow noreferrer\">Android NDK</a> is the official toolset for your purpose."}, {"owner": {"reputation": 25, "user_id": 6342711, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qVJoBrbDp8s/AAAAAAAAAAI/AAAAAAAAAMw/RGeItNWYFJI/photo.jpg?sz=128", "display_name": "NoodleCoder312", "link": "https://stackoverflow.com/users/6342711/noodlecoder312"}, "edited": false, "score": 0, "creation_date": 1478707317, "post_id": 40511057, "comment_id": 68264324, "body": "I&#39;m not so sure, my machine is an x64 bits Intel machine, I compiled with -m32 because the library was in 64 bits apparantly. I&#39;m not sure if this was the right way. My phone is an ARM type"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 3, "creation_date": 1478707334, "post_id": 40511057, "comment_id": 68264331, "body": "Machine code is (at least) architecture-specific.  You need to compile for the correct target architecture, and if that architecture is different from the one on which the compilation is performed then that requires engaging a special tool called a &quot;cross compiler&quot; that can generate code for a different architecture than the one on which it is running."}, {"owner": {"reputation": 25, "user_id": 6342711, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qVJoBrbDp8s/AAAAAAAAAAI/AAAAAAAAAMw/RGeItNWYFJI/photo.jpg?sz=128", "display_name": "NoodleCoder312", "link": "https://stackoverflow.com/users/6342711/noodlecoder312"}, "edited": false, "score": 0, "creation_date": 1478707379, "post_id": 40511057, "comment_id": 68264357, "body": "Oh so I have to compile it with Android NDK and it&#39;ll give me the .so files so I can remove the .c and .h files later?"}, {"owner": {"reputation": 3624, "user_id": 2657100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d998dcf9d454b9d9349b29f84947f2da?s=128&d=identicon&r=PG", "display_name": "nandsito", "link": "https://stackoverflow.com/users/2657100/nandsito"}, "edited": false, "score": 0, "creation_date": 1478735983, "post_id": 40511057, "comment_id": 68277669, "body": "i suggest you to install the latest version of Android Studio and <code>Import an Android code sample</code> that uses NDK"}, {"owner": {"reputation": 3624, "user_id": 2657100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d998dcf9d454b9d9349b29f84947f2da?s=128&d=identicon&r=PG", "display_name": "nandsito", "link": "https://stackoverflow.com/users/2657100/nandsito"}, "edited": false, "score": 0, "creation_date": 1478736140, "post_id": 40511057, "comment_id": 68277705, "body": "it may be good for you to take a time to study how a CPU works, about different CPU architectures, compilers, assemblers, linkers, static libraries, dynamic libraries and executables"}], "owner": {"reputation": 25, "user_id": 6342711, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qVJoBrbDp8s/AAAAAAAAAAI/AAAAAAAAAMw/RGeItNWYFJI/photo.jpg?sz=128", "display_name": "NoodleCoder312", "link": "https://stackoverflow.com/users/6342711/noodlecoder312"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1478707282, "creation_date": 1478706906, "last_edit_date": 1478707282, "question_id": 40511057, "link": "https://stackoverflow.com/questions/40511057/compiling-c-files-on-ubuntu-and-using-them-on-android", "title": "Compiling C files on Ubuntu and using them on Android", "body": "<p>so today I've tried to use my C code in Android. I've made it work on intellij with regular generated dll files. From what I've understood, Android uses .so files instead of .dll files. So I've compiled with ubuntu and gcc, using the following commandline : <code>\ngcc -m32 -fPIC -o libilcore.so -shared -I/usr/lib/jvm/java-9-openjdk-amd64/include -I/usr/lib/jvm/java-9-openjdk-amd64/include/linux java.c -lc</code> this went fine, no errors whatsoever and I got the .so file. I've put it in the jniLibs directory, and inside I made a armeabi directory, However when I try to load the library, it says <code>\njava.lang.UnsatisfiedLinkError: dlopen failed: \"/data/app/org.packagename.test-1/lib/arm/libilcore.so\" has unexpected e_machine: 3</code>\nI have no clue on what this means, I've looked it up on google, its either the wrong way to compile on ubuntu or I've done something else wrong, can anyone please help? \nThank you in advance!</p>\n"}, {"tags": ["c", "arrays", "multidimensional-array"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 3, "creation_date": 1478706622, "post_id": 40510929, "comment_id": 68263820, "body": "<code>fflush(stdin)</code> is bad (undefined behaviour)."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 3, "creation_date": 1478706679, "post_id": 40510929, "comment_id": 68263861, "body": "even badder: <code>scanf(&quot;%[^\\n]s&quot;, &amp;title[i])</code> should be <code>scanf(&quot;%[^\\n]s&quot;, title[i])</code>. same thing for <code>author</code> and all strings BTW"}, {"owner": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1478706756, "post_id": 40510929, "comment_id": 68263906, "body": "first it&#39;s better to have a working program pasted :-) second the issue is in your <code>scanf</code>; since you&#39;re entering strings for <code>title</code> and <code>author</code> (which are designated by character arrays) the <code>&amp;</code> is not needed in front of them in <code>scanf</code>. as @PaulR said you should not use <code>fflush(stdin)</code> ... there&#39;s no need for it"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1478706789, "post_id": 40510929, "comment_id": 68263926, "body": "Unrelated to your problem, but you should probably learn about <i>structures</i>."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1478706877, "post_id": 40510929, "comment_id": 68263995, "body": "Please read this: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1478707245, "post_id": 40510929, "comment_id": 68264275, "body": "And please show an example of input and expected output"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7027398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8eb00e16b6a0b6c6e1588e849678373b?s=128&d=identicon&r=PG&f=1", "display_name": "Defry Heryanto", "link": "https://stackoverflow.com/users/7027398/defry-heryanto"}, "edited": false, "score": 0, "creation_date": 1478792443, "post_id": 40514253, "comment_id": 68302921, "body": "it&#39;s working. Thanks for your help!! i really appreciate it"}], "tags": [], "owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "is_accepted": false, "score": 0, "last_activity_date": 1478718493, "creation_date": 1478718493, "answer_id": 40514253, "question_id": 40510929, "link": "https://stackoverflow.com/questions/40510929/weird-array-string-output/40514253#40514253", "title": "weird array string output", "body": "<p>The problem is you never terminate the strings in <code>shelf[][]</code> and you're not tracking the index into <code>shelf[i][]</code> correctly.  (It's also not clear where you declare <code>i</code> and <code>j</code>.)  Try this inner loop instead:</p>\n\n<pre><code>for (i = 0; i &lt; 2; i++)\n{\n    int k = 0;\n\n    for (j = 0; j &lt; strlen(title[i]); j++)\n    {\n        if (j == 0 || title[i][j - 1] == ' ')\n        {\n            shelf[i][k++] = title[i][j];\n        }\n    }\n\n    shelf[i][k] = '\\0';\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7027398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8eb00e16b6a0b6c6e1588e849678373b?s=128&d=identicon&r=PG&f=1", "display_name": "Defry Heryanto", "link": "https://stackoverflow.com/users/7027398/defry-heryanto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1478718493, "creation_date": 1478706520, "last_edit_date": 1478707087, "question_id": 40510929, "link": "https://stackoverflow.com/questions/40510929/weird-array-string-output", "title": "weird array string output", "body": "<p>I am new to C and I want to make a library with the inputs are title, author and the book's publishing year. and outputs are shelf code(shortened title), book code(first letter of book title and first letter of author), title, author and book's publishing year. if i input \"C How to Programming\" in title, so the shelf code should printed \"CHtP\". and the question is, when i print the shelf code, there are weird symbol printed in my program. Please help..</p>\n\n<pre><code>int main() \n{\n    char title[5][200], author[5][200], shelf[5][200], bookcode[5][200], temp[200];\n    int year;\n\n    printf(\"Welcome to Blues Library\\n\");\n    printf(\"============================\\n\\n\");\n\n    for(i = 0; i &lt; 2; i++)\n    {\n        printf(\"Book's Title = \");\n        scanf(\"%[^\\n]s\", &amp;title[i]); fflush(stdin);\n        printf(\"Book's Author = \");\n        scanf(\"%[^\\n]s\", &amp;author[i]); fflush(stdin);\n        printf(\"Book's publishing year = \");\n        scanf(\"%d\", &amp;year); fflush(stdin);\n        printf(\"\\n\");\n    }\n\n    printf(\"\\n\");\n    for(i = 0; i &lt; 2; i++)\n    {\n        for(j = 0; j &lt; strlen(title[i]); j++)\n        {\n            if(j == 0)\n            {\n                shelf[i][j] = title[i][j];\n            }\n            else if(title[i][j-1] == ' ')\n            {\n                shelf[i][j] = title[i][j];\n            }\n        }\n    }\n    //print\n    for(i = 0; i &lt; 2; i++)\n    {\n        printf(\"Book's Title = %s\\n\", title[i]);\n        printf(\"Book's Author = %s\\n\", author[i]);\n        printf(\"Book's publishing year = %d\\n\", year);\n        printf(\"Shelf Code = %s\\n\", shelf[i]);\n\n    }\n\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "string", "malloc"], "comments": [{"owner": {"reputation": 6295, "user_id": 118803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6534d583d8b442b3be4f608a3c45b5b9?s=128&d=identicon&r=PG", "display_name": "Joshua Smith", "link": "https://stackoverflow.com/users/118803/joshua-smith"}, "edited": false, "score": 4, "creation_date": 1478706009, "post_id": 40510714, "comment_id": 68263437, "body": "What is the problem with your current code that you want to fix?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1478706025, "post_id": 40510714, "comment_id": 68263445, "body": "You have a few problems, like not allocating enough memory to begin with, and <code>add_name</code> does not return the correct type. The compiler should warn you about many things, listen to it."}, {"owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "edited": false, "score": 0, "creation_date": 1478706385, "post_id": 40510714, "comment_id": 68263678, "body": "Joshua Smith - I just wanted to share something I wrote, not a question.  I checked the box that I wanted to share knowledge"}, {"owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "edited": false, "score": 0, "creation_date": 1478706442, "post_id": 40510714, "comment_id": 68263713, "body": "some programmer dude - Neither gcc nor clang gave any warnings, perhaps you could elaborate?"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1478706856, "post_id": 40510714, "comment_id": 68263982, "body": "Please read: <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 1, "creation_date": 1478707908, "post_id": 40510714, "comment_id": 68264707, "body": "<code>char **name_list = malloc(name_list_size);</code> --&gt; <code>char **name_list = malloc(sizeof(char*));</code> at least. Simply compiling with the <code>-Wall</code> flag will turn on several warnings."}, {"owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "edited": false, "score": 0, "creation_date": 1478712631, "post_id": 40510714, "comment_id": 68267354, "body": "Hi Yano,  I already compiled with -Wall flag. No warnings given.  I&#39;m afraid you may misunderstand, name_list_size needs to adjust its size according to the string.  Your suggestion, &#39;malloc(sizeof(char*))&#39;, would give a segfault."}], "answers": [{"tags": [], "owner": {"reputation": 6544, "user_id": 451601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/164602d512ce01f188e5a50593b46c5f?s=128&d=identicon&r=PG", "display_name": "James K. Lowden", "link": "https://stackoverflow.com/users/451601/james-k-lowden"}, "is_accepted": false, "score": 0, "last_activity_date": 1478737044, "creation_date": 1478737044, "answer_id": 40518124, "question_id": 40510714, "link": "https://stackoverflow.com/questions/40510714/writing-allocating-list-of-strings-in-c/40518124#40518124", "title": "writing/allocating list of strings in C", "body": "<p>I would offer the following suggestions:</p>\n\n<ul>\n<li>assign <code>realloc</code> to a temporary pointer, so if it returns NULL you don't destroy <code>array</code></li>\n<li>use <code>strdup</code> instead of <code>malloc</code> for the string storage</li>\n<li>use <code>lsearch</code> to check &amp; insert the string</li>\n<li>when increasing the size of <code>array</code>, do it by doubling instead of linearly</li>\n<li>package the array, its count &amp; capacity in a <code>struct</code> (see below), and pass that as an argument to the add &amp; clear functions</li>\n</ul>\n\n<p>You'll need to add a comparison function to pass to <code>lsearch</code>.  If <code>lsearch</code> adds a name, it updates the count.  Allocation is still up to you, so make sure capacity exceeds count before calling it.  </p>\n\n<p>If you do this, I think you'll find your code is smaller and simpler.  It will also lend itself to adding delete &amp; search functions.  </p>\n\n<p>One advantage of using the struct is you can use shorter names, e.g.:</p>\n\n<pre><code>struct name_list_t { \n       char **array; \n       size_t n, capacity; } names = { .array = NULL };\n</code></pre>\n\n<blockquote>\n  <p>//this function works, when freed inside main()</p>\n</blockquote>\n\n<p>Meh.  The comment doesn't really make sense, because functions aren't freed.  I get what you mean, but you're making me work.  </p>\n\n<p>HTH.  </p>\n"}], "owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1478737044, "creation_date": 1478705873, "question_id": 40510714, "link": "https://stackoverflow.com/questions/40510714/writing-allocating-list-of-strings-in-c", "title": "writing/allocating list of strings in C", "body": "<p>I'm making a list of strings in C, and I couldn't find anything online to easily add to and then clear a list of strings.  This would be close to Perl's \"push\" function.</p>\n\n<p>I would like to share the code I've come up with here:</p>\n\n<pre><code>#include &lt;stdio.h&gt;//printf\n#include &lt;stdlib.h&gt;//EXIT_FAILURE, malloc, realloc\n#include &lt;string.h&gt;//need for strcmp and strlen\n\nvoid *add_name(char **restrict array, size_t *restrict size, size_t *restrict number_of_names, const char *restrict NAME) {//this function works, when freed inside main()\n    for (unsigned int name = *number_of_names-1; name &lt;= 0; name--) {\n        if (strcmp(array[name], NAME) == 0) {\n            return array;//if this name is already in the list, don't add it\n        }\n    }\n    const size_t NAME_SIZE = strlen(NAME)*sizeof(char)+sizeof(char*);\n    *size += NAME_SIZE;\n    array = realloc(array, *size);\n    if (array == NULL) {\n        puts(\"realloc of array failed.\\n\");\n        exit(EXIT_FAILURE);\n    }\n    array[*number_of_names] = malloc(NAME_SIZE);\n    if (array[*number_of_names] == NULL) {\n        printf(\"alloc of array[%zu] failed.\\n\", *number_of_names);\n        exit(EXIT_FAILURE);\n    }\n    strcpy(array[*number_of_names], NAME);\n    *number_of_names += 1;\n    return array;\n}\n\nvoid *clear_names(char **restrict array, size_t *restrict size, size_t *restrict number_of_names) {//empty the list of names\n    for (size_t name = 0; name &lt; *number_of_names; name++) {\n        free(array[name]); array[name] = NULL;//this is missing something\n        if (array[name] != NULL) {\n            printf(\"free of array[%zu] failed.\\n\", name);\n        }\n    }\n    *number_of_names = 0;\n    *size = sizeof(char);\n    array = realloc(array, *size);\n    if (array == NULL) {\n        printf(\"realloc of array failed @ line %u\\n\",__LINE__);\n        exit(EXIT_FAILURE);\n    }\n    return array;\n}\n\nint main (void) {\n    puts(\"This program demonstrates how to add to and clear a list of names.\");\n    size_t name_list_size = sizeof(char);\n    char **name_list = malloc(name_list_size);\n    size_t number_of_names = 0;\n    name_list = add_name(name_list, &amp;name_list_size, &amp;number_of_names, \"James\");\n    name_list = add_name(name_list, &amp;name_list_size, &amp;number_of_names, \"Mary\");\n    name_list = add_name(name_list, &amp;name_list_size, &amp;number_of_names, \"Mary\");\n    name_list = add_name(name_list, &amp;name_list_size, &amp;number_of_names, \"Thomas\");\n    for (size_t name = 0; name &lt; number_of_names; name++) {\n        printf(\"%s\\n\",name_list[name]);\n    }\n    name_list = clear_names(name_list, &amp;name_list_size, &amp;number_of_names);\n//\n    name_list = add_name(name_list, &amp;name_list_size, &amp;number_of_names, \"Matthew\");\n    name_list = add_name(name_list, &amp;name_list_size, &amp;number_of_names, \"Mark\");\n    name_list = add_name(name_list, &amp;name_list_size, &amp;number_of_names, \"Luke\");\n    name_list = add_name(name_list, &amp;name_list_size, &amp;number_of_names, \"John\");\n    for (size_t name = 0; name &lt; number_of_names; name++) {\n        printf(\"%s\\n\",name_list[name]);\n    }\n//\n    name_list = clear_names(name_list, &amp;name_list_size, &amp;number_of_names);\n    name_list = add_name(name_list, &amp;name_list_size, &amp;number_of_names, \"Titus\");\n    printf(\"size = %zu  number_of_names = %zu\\n\", name_list_size, number_of_names);\n    name_list = add_name(name_list, &amp;name_list_size, &amp;number_of_names, \"Peter\");\n    printf(\"size = %zu  number_of_names = %zu\\n\", name_list_size, number_of_names);\n    name_list = add_name(name_list, &amp;name_list_size, &amp;number_of_names, \"Bartholomew\");\n    printf(\"size = %zu  number_of_names = %zu\\n\", name_list_size, number_of_names);\n    name_list = add_name(name_list, &amp;name_list_size, &amp;number_of_names, \"Paul\");\n    printf(\"size = %zu  number_of_names = %zu\\n\", name_list_size, number_of_names);\n    for (size_t name = 0; name &lt; number_of_names; name++) {\n        printf(\"%s\\n\",name_list[name]);\n    }\n    name_list = clear_names(name_list, &amp;name_list_size, &amp;number_of_names);\n    free(name_list); name_list = NULL;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "file", "scanf", "feof"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1478705211, "post_id": 40510483, "comment_id": 68262854, "body": "Welcome to Stack Overflow! Please see <a href=\"http://stackoverflow.com/q/5431941/2173917\">Why is \u201cwhile ( !feof (file) )\u201d always wrong?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1478705287, "last_edit_date": 1495542270, "creation_date": 1478705287, "answer_id": 40510528, "question_id": 40510483, "link": "https://stackoverflow.com/questions/40510483/cant-print-txt-file-correctly/40510528#40510528", "title": "can&#39;t print txt file correctly", "body": "<p>The first problem I see here, is you use the value of <code>i</code> uninitialized. It invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>.</p>\n\n<p>To elaborate, <code>i</code> is an automatic local variable and unless intialized explicitly, will have an indeterminate value. Attempt to use that will lead to UB.</p>\n\n<p>Also, you have never increased the value of <code>i</code> which is supposed to be used as the index for storing and printing the values.</p>\n\n<p>Lastly, always check the return value of <code>scanf()</code> and family to ensure the success, before you try to use the scanned value.</p>\n\n<p>That said, Please see <a href=\"https://stackoverflow.com/q/5431941/2173917\">Why is \u201cwhile ( !feof (file) )\u201d always wrong?</a></p>\n"}], "owner": {"reputation": 105, "user_id": 7136970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88e98cbde0fd93a626323471a96414bd?s=128&d=identicon&r=PG&f=1", "display_name": "MongJi", "link": "https://stackoverflow.com/users/7136970/mongji"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1478705445, "creation_date": 1478705123, "last_edit_date": 1478705445, "question_id": 40510483, "link": "https://stackoverflow.com/questions/40510483/cant-print-txt-file-correctly", "title": "can&#39;t print txt file correctly", "body": "<p>Hi i have this text file, where the first column in a character the 2nd and the third one is an integer.. but I'm not able to read and print the values correctley. </p>\n\n<p>So this the file am trying to read: </p>\n\n<pre><code>c 6\no 4 3\no 2 4\no 3 2\no 1 1\no 3 3\n</code></pre>\n\n<p>And here is the code :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define N 6\n\nint main (int argc, char *argv[]) \n{\n  int i;\n  int M[N];\n  int U[N];\n  char c ;\n  FILE* fichier = NULL;\n\n  fichier = fopen(\"pb1.txt\",\"r\");\n\nif(fichier!= NULL )\n  { \n    while(!feof(fichier))   \n    {\n    fscanf(fichier, \"%c %d %d\", &amp;c, &amp;M[i], &amp;U[i]); \n\n    printf(\"%c %d %d \\n\", c, M[i],U[i]);\n    }\n\n  }\n}\n</code></pre>\n\n<p>This is what the output looks like</p>\n\n<pre><code>c 6 1472131424 \no 4 3 \n\n 4 3 \no 2 4 \n\n 2 4 \no 3 2 \n\n 3 2 \no 1 1 \n\n 1 1 \no 3 3 \n\n 3 3 \n</code></pre>\n\n<p>I have no clue why it gives me this. thank you </p>\n"}, {"tags": ["c", "contiki"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1478704959, "post_id": 40510368, "comment_id": 68262686, "body": "which code? I don&#39;t see any code."}, {"owner": {"reputation": 126, "user_id": 5718351, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F8T4C.jpg?s=128&g=1", "display_name": "SH&#39;", "link": "https://stackoverflow.com/users/5718351/sh"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1478704998, "post_id": 40510368, "comment_id": 68262708, "body": "Can you click to &quot;How to exit from this code?&quot;"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1478705032, "post_id": 40510368, "comment_id": 68262727, "body": "No code there too."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1478705038, "post_id": 40510368, "comment_id": 68262731, "body": "You <a href=\"http://contiki.sourceforge.net/docs/2.6/a01671.html#ga9c2681a0070eba8a7c9fdf4dbb6db05e\" rel=\"nofollow noreferrer\">end the process</a>?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1478705086, "post_id": 40510368, "comment_id": 68262771, "body": "What @EugeneSh. is asking for is the actual code. Or rather (and preferably) a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>."}, {"owner": {"reputation": 126, "user_id": 5718351, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F8T4C.jpg?s=128&g=1", "display_name": "SH&#39;", "link": "https://stackoverflow.com/users/5718351/sh"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1478705186, "post_id": 40510368, "comment_id": 68262836, "body": "@EugeneSh. How to get exit from any contiki code? I have ended the process but still have to press &quot;cmd+c&quot;"}, {"owner": {"reputation": 126, "user_id": 5718351, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F8T4C.jpg?s=128&g=1", "display_name": "SH&#39;", "link": "https://stackoverflow.com/users/5718351/sh"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1478705231, "post_id": 40510368, "comment_id": 68262872, "body": "@Someprogrammerdude I have ended the process. but still have to enter cmd+c to exit."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478705785, "post_id": 40510368, "comment_id": 68263277, "body": "Read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and follow the advice!"}, {"owner": {"reputation": 126, "user_id": 5718351, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F8T4C.jpg?s=128&g=1", "display_name": "SH&#39;", "link": "https://stackoverflow.com/users/5718351/sh"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1478705942, "post_id": 40510368, "comment_id": 68263392, "body": "@EugeneSh. I have edited my question. You can see both now .. (My code + My doubt) Thank you in advance."}, {"owner": {"reputation": 126, "user_id": 5718351, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F8T4C.jpg?s=128&g=1", "display_name": "SH&#39;", "link": "https://stackoverflow.com/users/5718351/sh"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1478706019, "post_id": 40510368, "comment_id": 68263443, "body": "@Someprogrammerdude can you help now? Thank you :)"}], "answers": [{"comments": [{"owner": {"reputation": 36, "user_id": 1374363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lI2e6.jpg?s=128&g=1", "display_name": "Zhitao", "link": "https://stackoverflow.com/users/1374363/zhitao"}, "reply_to_user": {"reputation": 126, "user_id": 5718351, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F8T4C.jpg?s=128&g=1", "display_name": "SH&#39;", "link": "https://stackoverflow.com/users/5718351/sh"}, "edited": false, "score": 0, "creation_date": 1479985298, "post_id": 40764895, "comment_id": 68791887, "body": "@SH&#39; Glad to hear that it helped. Answer accepted, then?"}], "tags": [], "owner": {"reputation": 36, "user_id": 1374363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lI2e6.jpg?s=128&g=1", "display_name": "Zhitao", "link": "https://stackoverflow.com/users/1374363/zhitao"}, "is_accepted": true, "score": 2, "last_activity_date": 1479904938, "creation_date": 1479904938, "answer_id": 40764895, "question_id": 40510368, "link": "https://stackoverflow.com/questions/40510368/how-to-exit-from-contiki-code/40764895#40764895", "title": "How to exit from Contiki code?", "body": "<p>Contiki OS is for running programs on small devices autonomously. Such programs usually execute in an infinite loop awaiting for sensor inputs or scheduled timeouts, hence no need for exiting. You are probably asking about a special case, where you want to execute some code natively on a Linux PC, and then kill the program along with the whole Contiki OS, which in this case is a single Linux process. Therefore, pressing Ctrl+C is the correct way to do that.</p>\n\n<p>Because your program is compiled and linked together with Contiki, you can put an exit() in your program to exit Contiki, if you really want to skip the Ctrl+C:</p>\n\n<pre><code>include &lt;stdlib.h&gt;\n...\nPROCESS_THREAD(hello_world_process, ev, data)\n{\n  PROCESS_BEGIN();\n\n  printf(\"Hello, world\\n\");\n  exit(0);\n\n  PROCESS_END();\n}\n</code></pre>\n\n<p>But this is only useful when you run the program natively; on an embedded device, you probably would want a system reset, rather than an exit that leaves the device \"dead\".</p>\n"}], "owner": {"reputation": 126, "user_id": 5718351, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F8T4C.jpg?s=128&g=1", "display_name": "SH&#39;", "link": "https://stackoverflow.com/users/5718351/sh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 256, "favorite_count": 0, "accepted_answer_id": 40764895, "answer_count": 1, "score": -1, "last_activity_date": 1479904938, "creation_date": 1478704803, "last_edit_date": 1478705877, "question_id": 40510368, "link": "https://stackoverflow.com/questions/40510368/how-to-exit-from-contiki-code", "title": "How to exit from Contiki code?", "body": "<p>Please find below attached snapshot of my code output. Every time when I execute my code, I have to use ctrl+c (cmd+c) to exit. Is there any function in Contiki's library which will help me to resolve this issue?\nThank you in advance!!!</p>\n\n<p><a href=\"https://i.stack.imgur.com/5HKDQ.png\" rel=\"nofollow noreferrer\">My Code</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/ZPnJ7.png\" rel=\"nofollow noreferrer\">How to exit from this program without manually entering ctrl+C</a></p>\n"}, {"tags": ["c", "casting"], "comments": [{"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 0, "creation_date": 1478704032, "post_id": 40510079, "comment_id": 68262074, "body": "A bit more context would help. Casting does not do string-to-integer conversion."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1478704128, "post_id": 40510079, "comment_id": 68262150, "body": "Without more context it&#39;s hard to say anything for certain, but it seems to me that the casting isn&#39;t really needed."}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1478704146, "post_id": 40510079, "comment_id": 68262161, "body": "From what you tell us, this code does exactly the same as <code>if (ASS_CODE[0] == ASCII_ZERO)</code> why anyone added those casts is anyones guess."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1478706636, "post_id": 40510079, "comment_id": 68263830, "body": "When you say &quot;ASS_CODE is a a character string ...&quot;, that lacks specificity as to the <i>type</i> of <code>ASS_CODE</code>.  Please post the definition of <code>ASS_CODE</code> for quality answers."}, {"owner": {"reputation": 11, "user_id": 5534098, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9f1597227c96830c17fd9fc5f959d6d7?s=128&d=identicon&r=PG&f=1", "display_name": "Jaffa6", "link": "https://stackoverflow.com/users/5534098/jaffa6"}, "edited": false, "score": 0, "creation_date": 1478766510, "post_id": 40510079, "comment_id": 68286497, "body": "The definition of ASS_CODE is    char   ASS_CODE[5];"}], "answers": [{"comments": [{"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 1, "creation_date": 1478706166, "post_id": 40510383, "comment_id": 68263545, "body": "For your first part, this is because  in <code>a == b</code> , where <code>a</code> is an unsigned char and <code>b</code> is an int, <code>a</code> gets promoted to an int (as long as an int type is wider than an unsigned char - which it is on your platform.)"}], "tags": [], "owner": {"reputation": 36931, "user_id": 225757, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/e7140b12949e4652885f6bb02b435f42?s=128&d=identicon&r=PG", "display_name": "Roland Illig", "link": "https://stackoverflow.com/users/225757/roland-illig"}, "is_accepted": false, "score": 0, "last_activity_date": 1478704842, "creation_date": 1478704842, "answer_id": 40510383, "question_id": 40510079, "link": "https://stackoverflow.com/questions/40510079/what-is-this-casting-achieving-in-c-code/40510383#40510383", "title": "What is this casting achieving in C Code", "body": "<pre><code>char ASS_CODE[4] = { ... };\n#define ASCII_ZERO 48\n\nif ((int)(*ASS_CODE) == ASCII_ZERO)\n</code></pre>\n\n<p>Apparently, this is code for a non-ASCII execution character set, or some developer who is very careful. Otherwise the <code>ASCII_ZERO</code> constant would not be necessary.</p>\n\n<p>My first thought was that the type <code>char</code> was equal to <code>unsigned char</code> on that platform, and that the cast would be needed to suppress a compiler warning. But no matter how I define the constant, GCC doesn't omit any warning. I tried this:</p>\n\n<pre><code>enum { ASCII_ZERO = 48 };\n\nvoid x() {\n    char ASS_CODE[4] = {0};\n    if (ASS_CODE[0] == ASCII_ZERO) {} else {}\n}\n</code></pre>\n\n<p>The next idea is that the code must conform to some industry standard, like MISRA. This standard might require that the left-hand side and the right-hand side of every binary operator must have the same type. And since 48 has type <code>int</code>, the character must be cast to exactly that type.</p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 0, "last_activity_date": 1478705644, "creation_date": 1478705644, "answer_id": 40510647, "question_id": 40510079, "link": "https://stackoverflow.com/questions/40510079/what-is-this-casting-achieving-in-c-code/40510647#40510647", "title": "What is this casting achieving in C Code", "body": "<blockquote>\n  <p>I am [...] trying to interpret the outcome of these lines of C that are doing some casting.</p>\n  \n  <p>[...]\n  ASS_CODE is a a character string of up to 4 characters that may or may not be numeric, ASCII_ZERO is a constant defined as 48</p>\n  \n  <p>[...]</p>\n\n<pre><code>if ((int)(*ASS_CODE) == ASCII_ZERO)\n</code></pre>\n</blockquote>\n\n<p>If <code>ASS_CODE</code> has type <code>char *</code> or type <code>char[n]</code> for some <code>n</code>, then <code>*ASSCODE</code> has type <code>char</code>, and evaluates to the same thing as <code>ASS_CODE[0]</code> -- <em>i.e.</em>, the first character of the string.  The literal <code>48</code> to which macro <code>ASCII_ZERO</code> expands represents a value of type <code>int</code>; specifically, it is the value of the <code>'0'</code> character in ASCII-compatible character encodings.</p>\n\n<p>Cast operators have higher precedence than the <code>==</code> operator, so in evaluating the condition, the value of <code>*ASS_CODE</code> (a <code>char</code>) is first converted to type <code>int</code> and then compared to the right-hand operand (already an <code>int</code>).  The condition evaluates to <code>1</code> (true) when the first character of <code>ASS_CODE</code> is the digit <code>'0'</code> (assuming an ASCII-compatible encoding).  It is conceivable that <code>ASCII_ZERO</code> is used instead of a character literal (<code>'0'</code>) because a comparison specifically to the <em>ASCII</em> sense of 0 is desired even when a different character encoding is in use.  In any event, that is the effect that will be produced.</p>\n\n<p>I speculate that the reason for the cast was to make both operands have the same type, or maybe just to emphasize that the comparison was being performed on <code>int</code> values.  It has no effect whatever on the semantics of the program, however, because the operands of the <code>==</code> operator are subject to \"the usual arithmetic conversions\" before the operation is evaluated anyway, and in this case, that would involve converting the left-hand operand to <code>int</code> even without the explicit cast.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 3, "last_activity_date": 1478706176, "creation_date": 1478706176, "answer_id": 40510810, "question_id": 40510079, "link": "https://stackoverflow.com/questions/40510079/what-is-this-casting-achieving-in-c-code/40510810#40510810", "title": "What is this casting achieving in C Code", "body": "<p>If <code>char</code> as in <code>*ASS_CODE</code>, is a signed <code>char</code> or an unsigned <code>char</code> narrower than <code>int</code> (1 of these 2 is almost always the case) will be promoted to <code>int</code>.  The <em>integer constant</em> <code>48</code> is of type <code>int</code> and so the cast <code>(int)</code> is unnecessary.</p>\n\n<p>On rare platforms, <code>char</code> as in <code>*ASS_CODE</code>, is an unsigned <code>char</code> as wide as <code>int/unsigned</code>.  <code>*ASS_CODE</code> is promoted to <code>unsigned</code> as part of the pending compare operation.  Comparing an <code>unsigned</code> to the <em>integer constant</em> <code>48</code> (which is an <code>int</code>) may warn about comparing <code>int</code> to <code>unsigned</code>.   The cast in this case will quiet the warning.</p>\n"}], "owner": {"reputation": 11, "user_id": 5534098, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9f1597227c96830c17fd9fc5f959d6d7?s=128&d=identicon&r=PG&f=1", "display_name": "Jaffa6", "link": "https://stackoverflow.com/users/5534098/jaffa6"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1478706176, "creation_date": 1478703919, "question_id": 40510079, "link": "https://stackoverflow.com/questions/40510079/what-is-this-casting-achieving-in-c-code", "title": "What is this casting achieving in C Code", "body": "<p>I am relatively new to C Code and am trying to interpret the outcome of these lines of C that are doing some casting. </p>\n\n<p>ASS_CODE is a a character string of up to 4 characters that may or may not be numeric, ASCII_ZERO is a constant defined as 48 and ASCII_ONE is a constant defined as 49. I'm guessing that either this is trying to force some sort of true or false outcome based on whether ASS_CODE is numeric or otherwise or alternatively testing if the string is '0'or '1', but am not entirely sure</p>\n\n<pre><code> if ((int)(*ASS_CODE) == ASCII_ZERO)\n       {\n         calc_SDIS_EL13();\n        }\n         else if ((int)(*ASS_CODE) == ASCII_ONE)\n        {\n         do_gn11();\n       } else\n            {\n               ........\n            }\n       }\n</code></pre>\n"}, {"tags": ["c", "gtk", "gtk3", "glade"], "answers": [{"tags": [], "owner": {"reputation": 12075, "user_id": 2241569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QMrPS.jpg?s=128&g=1", "display_name": "Jussi Kukkonen", "link": "https://stackoverflow.com/users/2241569/jussi-kukkonen"}, "is_accepted": true, "score": 0, "last_activity_date": 1478765522, "creation_date": 1478765522, "answer_id": 40522715, "question_id": 40509730, "link": "https://stackoverflow.com/questions/40509730/gtk-expanders-one-at-at-time/40522715#40522715", "title": "GTK expanders one at at time", "body": "<p>Your activate handler must have the signature defined for the activate signal.</p>\n\n<pre><code>void\nexpandlights (GtkExpander *expander, gpointer user_data);\n</code></pre>\n\n<p>To be able to modify the other expanders from this function you'll need to use the user_data pointer: typically it's made to point to a struct that contains pointers to all widgets you may need. You can set the pointer value with <code>gtk_builder_connect_signals()</code> in your initialization when using glade if I recall correctly.</p>\n\n<p>You should be able to use the same handler for all three expanders if you code it carefully (if the expander is being expanded then unexpand all of the  expanders except the one that emitted the signal). Note that when you call <code>gtk_expander_set_expanded()</code> the activate signal handler for that expander will be called. This shouldn't be a problem for your case but keep it in mind -- don't create a never-ending expand loop.</p>\n"}], "owner": {"reputation": 5, "user_id": 7134662, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154061707072217/picture?type=large", "display_name": "Robbie Aggas", "link": "https://stackoverflow.com/users/7134662/robbie-aggas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 40522715, "answer_count": 1, "score": 0, "last_activity_date": 1478765522, "creation_date": 1478702877, "question_id": 40509730, "link": "https://stackoverflow.com/questions/40509730/gtk-expanders-one-at-at-time", "title": "GTK expanders one at at time", "body": "<p>I have made a glade interface where there are three expanders. I only want one to be open at any given time. So when the signal \"activate\" is used it calls a function expandlights() and all other expanders should close. I cant figure out how to affect the other expanders from the function. below was my best try, its clearly very wrong. I'm SO new to this.</p>\n\n<p>MAIN:</p>\n\n<pre><code>int main(int argc, char *argv[])\n{   \nGtkBuilder      *builder; \nGtkWidget       *window;\ngtk_init(&amp;argc, &amp;argv);\n\nbuilder = gtk_builder_new();\ngtk_builder_add_from_file (builder, \"interface.ui\", NULL);\n\nwindow = GTK_WIDGET(gtk_builder_get_object(builder, \"window1\"));\ngtk_builder_connect_signals(builder, NULL);\n\ng_object_unref(builder);\n\ngtk_widget_show(window);                \ngtk_main();\n\nreturn 0;\n}\n</code></pre>\n\n<p>this is the function i attempted which clearly fails</p>\n\n<pre><code>void expandlights(  GtkWidget    *expander1,\n                    GtkWidget    *expander2,\n                    GtkWidget    *expander3)\n{\n    gtk_expander_set_expanded(expander2, FALSE);\n    gtk_expander_set_expanded(expander3, FALSE);\n}\n</code></pre>\n\n<p><strong>I dont know if im on the right track or way off here. Could use a schoolin!</strong></p>\n\n<p>Glade file:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;!-- Generated with glade 3.18.3 --&gt;\n&lt;interface&gt;\n  &lt;requires lib=\"gtk+\" version=\"3.12\"/&gt;\n  &lt;object class=\"GtkWindow\" id=\"window1\"&gt;\n    &lt;property name=\"can_focus\"&gt;False&lt;/property&gt;\n    &lt;child&gt;\n      &lt;object class=\"GtkBox\" id=\"box1\"&gt;\n        &lt;property name=\"visible\"&gt;True&lt;/property&gt;\n        &lt;property name=\"can_focus\"&gt;False&lt;/property&gt;\n        &lt;property name=\"orientation\"&gt;vertical&lt;/property&gt;\n        &lt;child&gt;\n          &lt;object class=\"GtkExpander\" id=\"expander1\"&gt;\n            &lt;property name=\"visible\"&gt;True&lt;/property&gt;\n            &lt;property name=\"can_focus\"&gt;True&lt;/property&gt;\n            &lt;signal name=\"activate\" handler=\"expandlights\" swapped=\"no\"/&gt;\n            &lt;child&gt;\n              &lt;object class=\"GtkLabel\" id=\"label4\"&gt;\n                &lt;property name=\"visible\"&gt;True&lt;/property&gt;\n                &lt;property name=\"can_focus\"&gt;False&lt;/property&gt;\n                &lt;property name=\"label\" translatable=\"yes\"&gt;lighting stuff&lt;/property&gt;\n              &lt;/object&gt;\n            &lt;/child&gt;\n            &lt;child type=\"label\"&gt;\n              &lt;object class=\"GtkLabel\" id=\"label1\"&gt;\n                &lt;property name=\"visible\"&gt;True&lt;/property&gt;\n                &lt;property name=\"can_focus\"&gt;False&lt;/property&gt;\n                &lt;property name=\"label\" translatable=\"yes\"&gt;Lights&lt;/property&gt;\n              &lt;/object&gt;\n            &lt;/child&gt;\n          &lt;/object&gt;\n          &lt;packing&gt;\n            &lt;property name=\"expand\"&gt;False&lt;/property&gt;\n            &lt;property name=\"fill\"&gt;True&lt;/property&gt;\n            &lt;property name=\"position\"&gt;0&lt;/property&gt;\n          &lt;/packing&gt;\n        &lt;/child&gt;\n        &lt;child&gt;\n          &lt;object class=\"GtkExpander\" id=\"expander2\"&gt;\n            &lt;property name=\"visible\"&gt;True&lt;/property&gt;\n            &lt;property name=\"can_focus\"&gt;True&lt;/property&gt;\n            &lt;signal name=\"activate\" handler=\"expandalarm\" swapped=\"no\"/&gt;\n            &lt;child&gt;\n              &lt;object class=\"GtkLabel\" id=\"label5\"&gt;\n                &lt;property name=\"visible\"&gt;True&lt;/property&gt;\n                &lt;property name=\"can_focus\"&gt;False&lt;/property&gt;\n                &lt;property name=\"label\" translatable=\"yes\"&gt;Alarm stuff&lt;/property&gt;\n              &lt;/object&gt;\n            &lt;/child&gt;\n            &lt;child type=\"label\"&gt;\n</code></pre>\n"}, {"tags": ["c", "string", "char"], "comments": [{"owner": {"reputation": 9460, "user_id": 3588973, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/11G8Y.jpg?s=128&g=1", "display_name": "Droppy", "link": "https://stackoverflow.com/users/3588973/droppy"}, "edited": false, "score": 0, "creation_date": 1478702913, "post_id": 40509680, "comment_id": 68261348, "body": "One way would be to parse the line into an array of words making it easy to know what/if the next two words are.  This is slightly more expensive that alternative approaches, however."}, {"owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "edited": false, "score": 0, "creation_date": 1478703454, "post_id": 40509680, "comment_id": 68261698, "body": "So you would want to get <code>word1</code> and <code>word2</code> in this case? Please be more specific in the question, or show some examples."}, {"owner": {"reputation": 425, "user_id": 5682871, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1fc8f64bc201bcdd81c16d90f66a4dc1?s=128&d=identicon&r=PG&f=1", "display_name": "Whin3", "link": "https://stackoverflow.com/users/5682871/whin3"}, "edited": false, "score": 0, "creation_date": 1478703676, "post_id": 40509680, "comment_id": 68261852, "body": "I edited the post, sorry if I wasn&#39;t clear. Yes I want the word1 and word2 in that case."}], "answers": [{"comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1478704086, "post_id": 40510020, "comment_id": 68262120, "body": "This approach is very simplistic. What if there is &quot;rated&quot; before &quot;rat&quot;? What if words are separated by more than one blank or. as in the question, by punctuation? Worst of all, this code tries to read beyond the original string if fewer than two words follow the key."}], "tags": [], "owner": {"reputation": 2988, "user_id": 452414, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rDMfs.png?s=128&g=1", "display_name": "babon", "link": "https://stackoverflow.com/users/452414/babon"}, "is_accepted": false, "score": 0, "last_activity_date": 1478704666, "last_edit_date": 1478704666, "creation_date": 1478703754, "answer_id": 40510020, "question_id": 40509680, "link": "https://stackoverflow.com/questions/40509680/c-find-a-word-and-get-the-next-two/40510020#40510020", "title": "C - Find a word and get the next two", "body": "<p>One approach would be this:</p>\n\n<pre><code>int main(void)\n{\n    char *str = \"rated rat cat bat hat\";\n    char *key = \"rat \";\n    char *pointer = NULL;\n    char nwords = 2;\n\n    if ((pointer = strstr(str, key)) != NULL)\n    {\n        while (*pointer != ' ') pointer++;\n        while (nwords &gt;= 0)\n        {\n            printf(\"%c\", *pointer);\n            if (*pointer == ' ') {\n                nwords--;\n            } else if (*pointer == '\\0') {\n                exit(0);\n            }\n\n            pointer++;\n        }\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "is_accepted": false, "score": 0, "last_activity_date": 1478707914, "last_edit_date": 1478707914, "creation_date": 1478705751, "answer_id": 40510678, "question_id": 40509680, "link": "https://stackoverflow.com/questions/40509680/c-find-a-word-and-get-the-next-two/40510678#40510678", "title": "C - Find a word and get the next two", "body": "<p>You can try an aproach like this, using <a href=\"https://www.tutorialspoint.com/c_standard_library/c_function_strtok.htm\" rel=\"nofollow noreferrer\"><code>strtok</code></a> to parse the words at every space. This code also uses <a href=\"https://www.tutorialspoint.com/c_standard_library/c_function_malloc.htm\" rel=\"nofollow noreferrer\"><code>malloc</code></a> and <a href=\"https://www.tutorialspoint.com/c_standard_library/c_function_malloc.htm\" rel=\"nofollow noreferrer\"><code>realloc</code></a> to allocate space for an array of strings, and grows it when needed. </p>\n\n<p>The code looks like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n\n#define MAXCHAR 100\n\nvoid exit_if_null(void *ptr, const char *msg);\nchar *stripped_word(char *word);\n\nint\nmain(int argc, char const *argv[]) {\n    FILE *filename;\n    char line[MAXCHAR];\n    char *word, *newword;\n    char **allwords;\n    int init_size = 8, count = 0, i;\n    const char *key = \"WORDTOFIND\";\n\n    filename = fopen(\"files.txt\", \"r\");\n\n    if (filename == NULL) {\n        fprintf(stderr, \"%s\\n\", \"Error reading file!\");\n        exit(EXIT_FAILURE);\n    }\n\n    allwords = malloc(init_size * sizeof(*allwords));\n    exit_if_null(allwords, \"Initial Allocation\");\n\n    while (fgets(line, MAXCHAR, filename) != NULL) {\n        word = strtok(line, \" \\n\");\n\n        while (word != NULL) {\n            if (count == init_size) {\n                init_size *= 2;\n                allwords = realloc(allwords, init_size * sizeof(*allwords));\n            }\n\n            allwords[count] = malloc(strlen(word)+1);\n            exit_if_null(allwords[count], \"Initial Allocation\");\n\n            newword = stripped_word(word);\n\n            strcpy(allwords[count], newword);\n\n            count++;\n\n            word = strtok(NULL, \" \\n\");\n\n            free(newword);\n        }\n    }\n\n    for (i = 0; i &lt; count; i++) {\n        if (strcmp(key, allwords[i]) == 0) {\n            printf(\"Next two words:\\n\");\n            printf(\"%s\\n\", allwords[i+1]);\n            printf(\"%s\\n\", allwords[i+2]);\n        } \n        free(allwords[i]);\n        allwords[i] = NULL;\n    }\n\n    free(allwords);\n    allwords = NULL;\n\n    return 0;\n}\n\nvoid\nexit_if_null(void *ptr, const char *msg) {\n    if (!ptr) {\n        printf(\"Unexpected null pointer: %s\\n\", msg);\n        exit(EXIT_FAILURE);\n    }\n}\n\nchar\n*stripped_word(char *word) {\n    int i, pos = 0;\n    char *result;\n\n    result = malloc(strlen(word)+1);\n    exit_if_null(result, \"Initial Allocation\");\n\n    for (i = 0; word[i] != '\\0'; i++) {\n        if (isalpha(word[i]) || isdigit(word[i])) {\n            result[pos++] = word[i];\n        }\n    }\n\n    result[pos] = '\\0';\n\n    return result;\n}\n</code></pre>\n"}], "owner": {"reputation": 425, "user_id": 5682871, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1fc8f64bc201bcdd81c16d90f66a4dc1?s=128&d=identicon&r=PG&f=1", "display_name": "Whin3", "link": "https://stackoverflow.com/users/5682871/whin3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1478708428, "creation_date": 1478702720, "last_edit_date": 1478708428, "question_id": 40509680, "link": "https://stackoverflow.com/questions/40509680/c-find-a-word-and-get-the-next-two", "title": "C - Find a word and get the next two", "body": "<p>I am parsing a file in C, line by line. Here is an exemple of what I am trying to do :</p>\n\n<p>I have a line for example :\n<code>word word word WORDTOFIND: word1 word2 word word</code></p>\n\n<p>What I want to do is : When I find the word <code>WORDTOFIND</code>, get the two next words (<code>word1</code> and <code>word2</code> in this case) of the line. Is there an easy way to do that in C ? I know about the <strong>strstr</strong> function, but I don't find a way to get the next two words <code>word1</code> and <code>word2</code> after I found the good one.</p>\n"}, {"tags": ["c", "linux", "ubuntu", "process", "named-pipes"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1478700786, "post_id": 40508994, "comment_id": 68260038, "body": "Yes you can send a structure over a pipe. The problem is that you can&#39;t send <i>pointers</i> to an unrelated process. A pointer is unique to a specific process and can&#39;t be passed to other unrelated processes. You have to figure out a way to transmit the actual data."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1478700951, "post_id": 40508994, "comment_id": 68260137, "body": "Another problem is that you don&#39;t seem to be allocating memory for the pointer in the <code>matrix_t</code> structure. You never make it point anywhere. That will lead to <i>undefined behavior</i> and is most likely the reason you have the crash."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1478701326, "post_id": 40508994, "comment_id": 68260374, "body": "Never write <code>extern int errno;</code> in code; it has been outlawed by POSIX for the whole of the current millennium.  You must use <code>#include &lt;errno.h&gt;</code> to gain access to <code>errno</code>.  Only old books and code contain that line and it is not safe in the modern world."}, {"owner": {"reputation": 11342, "user_id": 299301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9d84c403343c5d7cb9d6abdb26a9a81?s=128&d=identicon&r=PG", "display_name": "nategoose", "link": "https://stackoverflow.com/users/299301/nategoose"}, "edited": false, "score": 0, "creation_date": 1478706100, "post_id": 40508994, "comment_id": 68263501, "body": "The reason to not write <code>extern int errno;</code> in code that <code>errno</code> is often defined as something like <code>#define errno (*thread_local_errno())</code> where <code>thread_local_errno</code> is a function that returns the address that the current thread&#39;s <code>errno</code> values are stored.  If a regular <code>int errno</code> is used then multiple threads could get their error values mixed up."}, {"owner": {"reputation": 11, "user_id": 7136699, "user_type": "registered", "profile_image": "https://graph.facebook.com/684893111680208/picture?type=large", "display_name": "Xuan Thao", "link": "https://stackoverflow.com/users/7136699/xuan-thao"}, "edited": false, "score": 0, "creation_date": 1478791522, "post_id": 40508994, "comment_id": 68302289, "body": "Thank you guys so much for replying me. I understand all of your comments. Thank a lot :D"}], "owner": {"reputation": 11, "user_id": 7136699, "user_type": "registered", "profile_image": "https://graph.facebook.com/684893111680208/picture?type=large", "display_name": "Xuan Thao", "link": "https://stackoverflow.com/users/7136699/xuan-thao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 659, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1478700711, "creation_date": 1478700711, "question_id": 40508994, "link": "https://stackoverflow.com/questions/40508994/can-a-struct-be-sent-and-received-in-named-pipe", "title": "Can a struct be sent and received in named pipe?", "body": "<p>I have an excercise for operating system subject. </p>\n\n<p>Question is: Create two process P0 and P1. P0 read a squared matrix from input file, then send to pipe. P1 read matrix from pipe, invert it and write to output file. If the inputted matrix can not be inverted, P1 write a message to output file and return</p>\n\n<p>My code is below. I compiled with</p>\n\n<pre><code>gcc -Wall main.c -o main.out\n</code></pre>\n\n<p>the program keeps \"Segmentation fault (Core dumped)\"</p>\n\n<p>Please help me find where i failed. Sorry for my bad English</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;sys/errno.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;fcntl.h&gt;\n\n#define FIFO1 \"/tmp/ff.1\"\n#define FIFO2 \"/tmp/ff.2\"\n#define PM 0666\n#define PIPE_BUF 10240\n#define SIGN(x) ((x%2)? -1:1)\n\nextern int errno;\n\n/*\nmatrix struct insist of \nsize and a two-dimension array\n*/\ntypedef struct {\n    int size;\n    float** array;\n} matrix_t;\n\n/*\nprototypes\nof some functions\n*/\nmatrix_t readMatrix(char* filename);\nvoid writeMatrix(char* filename, matrix_t matrix);\nmatrix_t invertMatrix(matrix_t matrix);\nfloat detOfMatrix(float** arr, int size);\nfloat** allocArr(int szRow, int szCol);\nvoid FreeMem(float ** buff, int n);\n/*\nmain here\nreturn -1 if fork() == -1\nreturn -3 if there is no pipe created\n*/\nint main(void) {\n    //FILE *in, *out;\n\n    //int fd[2];\n    char input[] = \"/home/thao/ass1/input.txt\";\n    char output[] = \"/home/thao/ass1/output.txt\";\n    matrix_t sendmatrix, receivematrix, invertedmatrix;\n    int childpid, readfd, writefd;\n    if ((mknod(FIFO1, S_IFIFO | PM, 0) &lt; 0) &amp;&amp; (errno!=EEXIST)) {\n        printf(\"Ko tao duoc fifo1 \\n\");\n        return -1; \n    }\n    if ((mknod(FIFO2, S_IFIFO | PM, 0) &lt; 0) &amp;&amp; (errno!=EEXIST)) {\n        unlink(FIFO1);\n        printf(\"Ko tao duoc fifo2 \\n\");\n        return -1;\n    }\n\n    switch(childpid = fork()) {\n        case -1: \n            printf(\"Ko tao duoc process\\n\");\n            return -2;\n        case 0: //Child\n            if((readfd = open(FIFO1, 0)) &lt; 0)\n                perror(\"Child, ko mo duoc readfido\\n\");\n            read(readfd, &amp;receivematrix, PIPE_BUF);\n            int det;\n            if ((det = detOfMatrix(receivematrix.array, receivematrix.size)) == 0.0) {\n                FILE *out = fopen(output, \"w\");\n                fprintf(out, \"Ma tran khong nghich dao duoc\\n\");\n                return -1;\n            }\n            else {\n                invertedmatrix = invertMatrix(receivematrix);   \n                writeMatrix(output, invertedmatrix);\n            }\n            close(readfd);\n        default: //Parent\n            if ((writefd = open(FIFO1, 1)) &lt; 0)\n                perror(\"Parent, ko mo duoc writefifo\\n\");\n            sendmatrix = readMatrix(input);\n            write(writefd, &amp;sendmatrix, PIPE_BUF);\n            while(wait((int*)0) != childpid);\n            close(writefd);\n            if (unlink(FIFO1) &lt; 0)\n                perror(\"Khong the xoa ten FIFO1 tu file system\\n\");\n            if (unlink(FIFO2) &lt; 0) \n                perror (\"Ko the xoa ten FIFO2 tu file system\\n\");\n    }\n    return 0;\n}\n\n/*\nFunction: invert matrix\nParameters: struct of matrix\nReturn: inverted matrix - type struct of matrix\n*/\nmatrix_t invertMatrix (matrix_t matrix) {\n    matrix_t result;\n    result.size = matrix.size;\n    result.array = matrix.array;\n    float det = detOfMatrix(matrix.array, matrix.size);\n    int i, j;\n    for (i = 0; i &lt; matrix.size; i++) \n        for (j = 0; j &lt; matrix.size; j++) \n            result.array[i][j] = (1/det) * matrix.array[i][j];\n    return result;\n}\n\n/*\nFunction: read matrix from input\nParameters: path of input file\nReturn: struct of matrix\n*/\nmatrix_t readMatrix(char* filename) {\n    FILE *in = fopen(filename, \"r\");\n    char buf[10000];\n    matrix_t matrix;\n    int size = 0;\n    matrix.array = 0;\n    int i = 0, j = 0;\n    while(fgets(buf, sizeof(buf), in)) {\n        size += 1;\n        for (j = 0; j &lt; size; j++) {\n            fscanf(in,\"%f\", &amp;matrix.array[i][j]);\n            printf(\"%f\\t\",matrix.array[i][j]);\n        }\n        printf(\"\\n\");\n        i++;\n    }\n    matrix.size = size;\n    return matrix;\n}\n\n/*\nFunction: write matrix to output\nParameters: path of output file, struct of matrix\nReturn: void\n*/\nvoid writeMatrix(char* filename, matrix_t matrix) {\n    FILE *out = fopen(filename, \"wb\");\n    int i = 0, j = 0;\n    for (i = 0; i &lt; matrix.size; i++) {\n        for (j = 0; j &lt; matrix.size; j++) {\n            fprintf(out,\"%f\\t\", matrix.array[i][j]);\n            printf(\"%f\\t\",matrix.array[i][j]);\n        }\n        fprintf(out,\"\\n\");\n        printf(\"\\n\");\n    }\n    fclose(out);\n}\n\n/*\nFunction: calculate determinant of matrix\nParameters: struct of matrix\nReturn: determinant of matrix - type float \n*/\nfloat detOfMatrix(float** arr, int size) {\n    float result = 0;\n    int m, n, i, j, k;\n\n    float** subArr;\n    if (size &lt; 2) \n        return -1;\n    if (size == 2)\n        return arr[0][0] * arr[1][1] - arr[1][0] * arr[0][1];\n    else {\n        if (!(subArr = allocArr(size - 1, size - 1))) \n            return -1;\n        for (i = 0; i &lt; size; i++) {\n            m = n = 0;\n            for (j = 1; j &lt; size; j++) {\n                for (k = 0; k &lt; size; k++) {\n                    if (k != i) {\n                        subArr[m][n] = arr[j][k];\n                        n++;\n                        if (n == size - 1) {\n                            m++;\n                            n = 0;\n                        }\n                    }\n                }\n            }\n        result += SIGN(i) * arr[0][i]*detOfMatrix(subArr, size - 1);\n        }\n        FreeMem(subArr, size - 1);\n        return result;  \n    }\n}\n\n/*\nFunction: Allocate memory for array\n*/\nfloat ** allocArr(int szRow, int szCol) {\n    int i;\n    float **pArr;\n    pArr = (float**)malloc(szRow * sizeof(float *));\n    if (!pArr)\n        return NULL;\n    for (i = 0; i &lt; szRow; i++) {\n        pArr[i] = (float*)malloc(szCol * sizeof(float *));\n        if (!pArr[i])\n            return NULL;\n    }\n    return pArr;\n}\n\n/*\nFunction: free allocated memory\nParameters: pointer to memory\nReturn: void\n*/\nvoid FreeMem(float ** buff, int n) {\n    int i;\n    for (i = 0; i &lt; n; i++) {\n        if (buff[i])\n        {\n            free(buff[i]);\n            buff[i] = NULL;\n        }\n    }\n    if (buff)\n        free(buff);\n}\n</code></pre>\n"}, {"tags": ["c", "jpeg", "libjpeg"], "comments": [{"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1478700720, "post_id": 40508958, "comment_id": 68260000, "body": "as far as I know, shifting a negative signed value is implementation defined (as long as the shift amount is positive and within <code>sizeof(operator) * CHAR_BIT</code>)"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 3, "creation_date": 1478701051, "post_id": 40508958, "comment_id": 68260203, "body": "@bolov, <i>right</i>-shifting a negative value is implementation-defined.  <i>Left</i>-shifting a value of a signed type, on the other hand, is <b><i>un</i></b>defined unless the original value is non-negative and the mathematical result is representable in the result type.  In particular, the OP is quite correct that left-shifting -1 produces UB."}, {"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1478701186, "post_id": 40508958, "comment_id": 68260292, "body": "@JohnBollinger thank you. There is always something to (re)learn about C or C++."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1479114518, "post_id": 40508958, "comment_id": 68405374, "body": "@malat, sorry, but.... where do you see negative shiftings?  I don&#39;t see them, just shifting negative numbers... but never a negative shift."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1479114765, "post_id": 40508958, "comment_id": 68405500, "body": "@JohnBollinger, right shifting a negative value is not implementation defined (nor undefined behaviour).  It&#39;s defined as equivalent to the two&#39;s complement division by two, so the sign bit is extended (1 turns into 11 and 0 turns into 00 on the most signifiant part of the operand)  In C, right shifting a <code>signed int</code> is different than shifting an <code>unsigned int</code>, but it&#39;s not implementation dependant or undefined behaviour.  What is not defined is shifting a negative amount of bits.  You cannot shift less than zero bits or more than the operand size, in bits."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1479115216, "post_id": 40508958, "comment_id": 68405743, "body": "The expression in the first macro call is <code>... &lt;&lt; ((s) - 1)</code> which means to left shift <i>the value expanded in the <code>s</code> parameter minus one</i>, and not the value <code>-1</code> in any case. I think the implementor is taking the precaution of not passing a value less than <code>1</code> which should make the right part negative.  Indeed, doing a left shift of something less than <code>1</code> is nonsense, anyway.  Who wants to left shift zero bits some value?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1479344532, "post_id": 40508958, "comment_id": 68521991, "body": "@LuisColorado, the standard disagrees with you: &quot;If [the left operand] has a signed type and a negative value, the resulting value is implementation-defined&quot; (C2011; 6.5.7/5)."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1479392973, "post_id": 40508958, "comment_id": 68546078, "body": "@JohnBollinger, read K&amp;R and you&#39;ll get the opposite.  I think even C98 also says something about that."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1479683950, "post_id": 40508958, "comment_id": 68649203, "body": "@LuisColorado, C99 and even C89/C90 have identical wording to C2011 in this regard.  I doubt your claim about K&amp;R, but that&#39;s irrelevant in any case.  For more than a quarter century it has been the international standard, not K&amp;R, that defines the C language."}], "answers": [{"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 3, "last_activity_date": 1478701643, "creation_date": 1478701643, "answer_id": 40509322, "question_id": 40508958, "link": "https://stackoverflow.com/questions/40508958/shifting-a-negative-signed-value-is-undefined/40509322#40509322", "title": "shifting a negative signed value is undefined", "body": "<blockquote>\n  <p>Is the JPEG standard limited to Two's complement number representation ?</p>\n</blockquote>\n\n<p>With the chart using <code>SLL</code> rather than <code>*2</code>, the flow chart is relying of 2's complement implementation.  </p>\n\n<p>C, OTOH, is not limited to 2's complement nor using shifts in a certain \"2's complement\" way.  Better to code without that assumption.  Using unsigned types is a good first step.</p>\n\n<pre><code>// ((-1)&lt;&lt;15) + 1\n((-1u)&lt;&lt;15) + 1\n</code></pre>\n\n<p>Need to see applications of <code>HUFF_EXTEND()</code> for a deeper answer.</p>\n"}, {"comments": [{"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1479116127, "post_id": 40509974, "comment_id": 68406305, "body": "Nope, only shifting <i>negative displacements (or more than or equal to left operand size displacements) is undefined behaviour</i>.  As left shifting is equivalent to a <i>by two multiplication</i>, the same is right shifting in C (change multiply by divide) for <code>signed</code>s.  What actually happens is that <code>unsigned int</code> shifting <b>is different</b> than <code>signed int</code> value shifting.  To conserve signedness and continue behaving as a divide by two operation, right shifting is impl. as <i>sign extend divide by two operation</i> on <code>signed</code>s. <code>ASR</code>/<code>LSR</code> machine instruction is used with <code>signed</code>/<code>unsigned</code>s, resp."}, {"owner": {"reputation": 154, "user_id": 2307853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6844e99a738ded1126fd1c424eb815a?s=128&d=identicon&r=PG", "display_name": "Max Barraclough", "link": "https://stackoverflow.com/users/2307853/max-barraclough"}, "reply_to_user": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1525538169, "post_id": 40509974, "comment_id": 87400314, "body": "@LuisColorado &quot;right shifting is impl. as sign extend divide by two operation on signeds&quot; Assuming this other comment is correct, that&#39;s not required by the standard, it&#39;s just a common (and legal) implementation-specific behaviour. <a href=\"https://stackoverflow.com/a/1857965/\">stackoverflow.com/a/1857965</a>"}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 154, "user_id": 2307853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6844e99a738ded1126fd1c424eb815a?s=128&d=identicon&r=PG", "display_name": "Max Barraclough", "link": "https://stackoverflow.com/users/2307853/max-barraclough"}, "edited": false, "score": 0, "creation_date": 1525546920, "post_id": 40509974, "comment_id": 87403070, "body": "@MaxBarraclough, No, it&#39;s not required by the standard... but it isn&#39;t <i>Undefined Behaviour</i>, it is <i>Implementation Dependent Behaviour</i>,  which actually is well defined behaviour, assuming you read the compiler documentation :)"}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 1, "last_activity_date": 1478703619, "creation_date": 1478703619, "answer_id": 40509974, "question_id": 40508958, "link": "https://stackoverflow.com/questions/40508958/shifting-a-negative-signed-value-is-undefined/40509974#40509974", "title": "shifting a negative signed value is undefined", "body": "<p>Shifting negative values is only undefined behavior in the C language. On assembler level, such shifts are perfectly fine. A logical/arithmetic shift left instruction will move the MSB into the carry bit and that's it. The CPU will not halt and catch fire in undefined ways.</p>\n\n<p>That being said, you can dodge UB in C by converting your signed number to unsigned. Then you will merely have implementation-defined behavior. For example, <code>(int)(-1u&lt;&lt;1)</code> does actually not invoke UB, even though such code looks quite questionable.</p>\n\n<p>The safe approach is to perform all calculations on unsigned numbers (<code>uint32_t</code>) and convert to signed only when it is actually needed. Never perform any form of bitwise operations on signed types.</p>\n\n<p>I would completely ignore compatibility with wildly exotic/fictional systems that do not use two's complement. Focus on compatibility with real-world mainstream computers.</p>\n"}, {"comments": [{"owner": {"reputation": 154, "user_id": 2307853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6844e99a738ded1126fd1c424eb815a?s=128&d=identicon&r=PG", "display_name": "Max Barraclough", "link": "https://stackoverflow.com/users/2307853/max-barraclough"}, "edited": false, "score": 0, "creation_date": 1525520587, "post_id": 40586255, "comment_id": 87394854, "body": "&quot;well and preciselly defined for C/C++&quot; I don&#39;t think so. The standards don&#39;t require use of 2&#39;s complement. The C11 standard says that when doing bitwise operations on signed integer types, the best you can hope for is &quot;values that depend on the internal representations of integers, and thus have implementation-defined and undefined aspects&quot;. <a href=\"https://wiki.sei.cmu.edu/confluence/display/c/INT13-C.+Use+bitwise+operators+only+on+unsigned+operands\" rel=\"nofollow noreferrer\">wiki.sei.cmu.edu/confluence/display/c/&hellip;</a>"}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 154, "user_id": 2307853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6844e99a738ded1126fd1c424eb815a?s=128&d=identicon&r=PG", "display_name": "Max Barraclough", "link": "https://stackoverflow.com/users/2307853/max-barraclough"}, "edited": false, "score": 0, "creation_date": 1525547273, "post_id": 40586255, "comment_id": 87403174, "body": "@MaxBarraclough, indeed, the standard specifies that all these are implementation defined behaviours, and <i>must be perfectly defined</i> in the compiler&#39;s documentation.  The wording the standar uses for that is <i>implementation defined behaviour</i>, and it explains quite thoroughly what it means."}], "tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": false, "score": 1, "last_activity_date": 1479119712, "last_edit_date": 1592644375, "creation_date": 1479118416, "answer_id": 40586255, "question_id": 40508958, "link": "https://stackoverflow.com/questions/40508958/shifting-a-negative-signed-value-is-undefined/40586255#40586255", "title": "shifting a negative signed value is undefined", "body": "<p>Quite obviously, shifting a negative quantity <strong>has the same effect as multiply/divide by two raised to the power n</strong> (for <code>a &lt;&lt; n</code>/<code>a &gt;&gt; n</code> where <code>a</code> is <code>signed</code>)  This is never undefined behaviour for a negative left operand, and is well and preciselly defined for C/C++.</p>\n<p>Well, despite of the fact that the accepted answer has already been selected and the amount of confussion about the <code>&lt;&lt;</code> and <code>&gt;&gt;</code> operators this question has generated, I'll try to clarify what's undefined and what is not.</p>\n<ul>\n<li><p><code>&lt;&lt;</code> operator behaves equally on <code>signed</code> and <code>unsigned</code> left operand quantities, as the net effect on an integer is to numerically double it, and the process is the same for <code>signed</code> and <code>unsigned</code> quantities, just insert a <code>0</code> on the right part of the number, left shifting all the number bits the number indicated as the right operator.</p>\n</li>\n<li><p><code>&gt;&gt;</code> operator behaves <strong>differently on <code>signed</code> and <code>unsigned</code> left operands</strong>, as the net effect is, again, like integer division by two raised to the right operand, this means, <em>for a two's complement representation</em> to <em>extend</em> the most signifiant bit (<code>0</code> on the left becomes <code>00</code> and <code>1</code> on the left becomes <code>11</code>) to achieve the net effect of a division by two raised to the power of the right operand (<code>-24 &gt;&gt; 3</code> becomes <code>-3</code>, as dividing by 2^3, and <code>24 &gt;&gt; 3</code> becomes <code>3</code>)  When using <code>unsigned</code> integers, this behaviour changes (<code>0</code> becomes <code>00</code> and <code>1</code> becomes <code>01</code>) making again the shifting like a division by two raised to the power of the right operator.</p>\n</li>\n</ul>\n<p>As the standards says, behaviour is undefined <strong>if you try to left/right shift a negative amount of bits</strong> (right operator must be <code>&gt; 0</code>) or <strong>an amount greater or equal than the left operator's size in bits</strong>.  But this only affects the right operand, and not the left one.</p>\n<p>On trying to get an explanation about JPEG decoding, just try to think that JPEG decoding uses COSIN transformation (which is defined for real vectors) on discrete real approximations encoded as signed quantities and or that, it uses signed integers to evaluate low precision samples, so they never deal with unsigned quantities (the library designers assume that operating on integers is faster than operating on floating point quantities).</p>\n<h1>NOTE</h1>\n<ul>\n<li><code>-24</code> is binary <code>1111111...1111101000</code>, and right shifting by <code>3</code> makes it <code>11111...11111101</code>, or <code>-3</code>.  If we shift it again, it becomes <code>111...1110</code> or <code>-2</code> (<code>-1.5</code> rounded to minus infinity), and again <code>1111...1111</code> or <code>-1</code>.</li>\n<li><code>24</code> is <code>00000000....00011000</code> and right shifting it becomes <code>000000...0000011</code> which is <code>3</code>.  If we shift it again, it becomes <code>000...0001</code> or <code>1</code> (<code>1.5</code> rounded to minus infinity), and again we get <code>000...0000</code> or <code>0</code> (<code>0.5</code> rounded to minus infinity).</li>\n</ul>\n<p>(Beware that negative shifts made with this approach truncate up to minus infinity, making <code>-1 &gt;&gt; 1</code> to become <code>-1</code>, as <code>-0.5</code> truncates to <code>-1</code> and not to <code>0</code>.)</p>\n"}], "owner": {"reputation": 11132, "user_id": 136285, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/98d92168760c5b402a315926e4700d5f?s=128&d=identicon&r=PG", "display_name": "malat", "link": "https://stackoverflow.com/users/136285/malat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4277, "favorite_count": 0, "accepted_answer_id": 40509322, "answer_count": 3, "score": 0, "last_activity_date": 1479119712, "creation_date": 1478700557, "last_edit_date": 1478701632, "question_id": 40508958, "link": "https://stackoverflow.com/questions/40508958/shifting-a-negative-signed-value-is-undefined", "title": "shifting a negative signed value is undefined", "body": "<p>I am starring at the original JPEG standard (<a href=\"https://www.w3.org/Graphics/JPEG/itu-t81.pdf\" rel=\"nofollow noreferrer\">ITU 81</a>), in particular the figure <strong>Figure F.12: extending the sign bit of a decoded value in V</strong>:</p>\n\n<p>For reference the <code>SLL</code> terms means: <code>shift left logical operation</code> (see page 15 of the PDF)</p>\n\n<p><a href=\"https://i.stack.imgur.com/4f3bq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4f3bq.png\" alt=\"Figure F.12: extend sign bit.\"></a></p>\n\n<p>Now the famous libjpeg implementation decided to implement it <a href=\"https://dev.w3.org/Amaya/libjpeg/jdhuff.c\" rel=\"nofollow noreferrer\">this way</a> (quite direct transcription):</p>\n\n<pre><code>/*\n * Figure F.12: extend sign bit.\n * On some machines, a shift and add will be faster than a table lookup.\n */\n\n#ifdef AVOID_TABLES\n\n#define HUFF_EXTEND(x,s)  ((x) &lt; (1&lt;&lt;((s)-1)) ? (x) + (((-1)&lt;&lt;(s)) + 1) : (x))\n\n#else\n\n#define HUFF_EXTEND(x,s)  ((x) &lt; extend_test[s] ? (x) + extend_offset[s] : (x))\n\nstatic const int extend_test[16] =   /* entry n is 2**(n-1) */\n  { 0, 0x0001, 0x0002, 0x0004, 0x0008, 0x0010, 0x0020, 0x0040, 0x0080,\n    0x0100, 0x0200, 0x0400, 0x0800, 0x1000, 0x2000, 0x4000 };\n\nstatic const int extend_offset[16] = /* entry n is (-1 &lt;&lt; n) + 1 */\n  { 0, ((-1)&lt;&lt;1) + 1, ((-1)&lt;&lt;2) + 1, ((-1)&lt;&lt;3) + 1, ((-1)&lt;&lt;4) + 1,\n    ((-1)&lt;&lt;5) + 1, ((-1)&lt;&lt;6) + 1, ((-1)&lt;&lt;7) + 1, ((-1)&lt;&lt;8) + 1,\n    ((-1)&lt;&lt;9) + 1, ((-1)&lt;&lt;10) + 1, ((-1)&lt;&lt;11) + 1, ((-1)&lt;&lt;12) + 1,\n    ((-1)&lt;&lt;13) + 1, ((-1)&lt;&lt;14) + 1, ((-1)&lt;&lt;15) + 1 };\n\n#endif /* AVOID_TABLES */\n</code></pre>\n\n<p>Quite obviously shifting a negative signed value is UB, so I am wondering what the original author of the JPEG standard actually meant here. Is the JPEG standard limited to Two's complement number representation ?</p>\n"}, {"tags": ["python", "c", "sockets", "network-programming", "client-server"], "comments": [{"owner": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "edited": false, "score": 0, "creation_date": 1478700270, "post_id": 40508823, "comment_id": 68259735, "body": "<code>[...] i wrote a simple python script that sends malicious data to the server [...]</code>: If you don&#39;t own that server you might want to think twice before doing that."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1478700271, "post_id": 40508823, "comment_id": 68259736, "body": "<i>Where</i> in the server do you get the error?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1478700582, "post_id": 40508823, "comment_id": 68259914, "body": "Since you claim that the server &quot;works fine&quot; when you connect to it with a browser but behaves differently when you connect to it with your exploit script, it seems reasonable to think that the details of the client&#39;s communication and the server&#39;s code for handling it would be central to the problem, yet you do not provide these.  If you want help with code, we ordinarily expect to see a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> representative of the problem."}, {"owner": {"reputation": 1, "user_id": 7136671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcb7425526c5c20247579a5dc28af330?s=128&d=identicon&r=PG&f=1", "display_name": "T. Richter", "link": "https://stackoverflow.com/users/7136671/t-richter"}, "edited": false, "score": 0, "creation_date": 1478715963, "post_id": 40508823, "comment_id": 68268988, "body": "sorry guys, i forgot to mention two things, i updated the post."}, {"owner": {"reputation": 3984, "user_id": 164344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c978ca7e1c3da231710b8c114009faa5?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/164344/tim"}, "edited": false, "score": 0, "creation_date": 1478911439, "post_id": 40508823, "comment_id": 68354491, "body": "Once I added headers, removed the call to <code>handle_connection</code>, added <code>#define PORT 8000</code>, removed the <code>shellcode</code> variable, and hardcoded <code>values</code> as a string, the code you posted works fine for me. What is the rest of your code doing?"}], "owner": {"reputation": 1, "user_id": 7136671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcb7425526c5c20247579a5dc28af330?s=128&d=identicon&r=PG&f=1", "display_name": "T. Richter", "link": "https://stackoverflow.com/users/7136671/t-richter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1478765328, "creation_date": 1478700147, "last_edit_date": 1478765328, "question_id": 40508823, "link": "https://stackoverflow.com/questions/40508823/c-webserver-and-python-client", "title": "C WebServer and Python Client", "body": "<p>I made a simple webserver using c. I can connect to it via a web browser and it works fine.</p>\n\n<p>The goal of this webserver was to exploit it. So I wrote a simple python script that sends malicious data to the server. However, I only get an error message on the server saying: \"Bad file descriptor\".</p>\n\n<p>C-Server Main:</p>\n\n<pre><code>int main(void) {\n  int sockfd, new_sockfd, yes=1; \n  struct sockaddr_in host_addr, client_addr;  \n  socklen_t sin_size;\n\n  printf(\"Accepting web requests on port %d\\n\", PORT);\n\n  if ((sockfd = socket(PF_INET, SOCK_STREAM, 0)) == -1)\n    error_and_exit(\"in socket\");\n\n  if (setsockopt(sockfd, SOL_SOCKET, SO_REUSEADDR, &amp;yes, sizeof(int)) == -1)\n    error_and_exit(\"setting socket option SO_REUSEADDR\");\n\n  host_addr.sin_family = AF_INET;      \n  host_addr.sin_port = htons(PORT);    \n  host_addr.sin_addr.s_addr = INADDR_ANY; \n  memset(&amp;(host_addr.sin_zero), '\\0', 8);\n\n  if (bind(sockfd, (struct sockaddr *)&amp;host_addr, sizeof(struct sockaddr))     == -1)\n    error_and_exit(\"binding to socket\");\n\n  if (listen(sockfd, 20) == -1)\n    error_and_exit(\"listening on socket\");\n\n  while(1) {   // Accept loop\n    sin_size = sizeof(struct sockaddr_in);\n    new_sockfd = accept(sockfd, (struct sockaddr *)&amp;client_addr, &amp;sin_size);\n    if(new_sockfd == -1)\n      error_and_exit(\"accepting connection\");\n\n    handle_connection(new_sockfd, &amp;client_addr);\n  }\n return 0;\n}\n</code></pre>\n\n<p>python code:</p>\n\n<pre><code>import socket\nimport struct\nimport sys\nimport time\n\nsock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\nserver_address = ('127.0.0.1', 8000)\nsock.connect(server_address)\n\nshellcode =(....)\n\nvalues = ....\n\ntry: \n    sock.sendall(values)\nfinally:\n    sock.close()\n</code></pre>\n\n<p>Notes:</p>\n\n<p>1.\nthe <code>accept</code> function (from <code>&lt;sys/socket.h&gt;</code>) in the <code>while(1)</code> loop returns -1, calling <code>error_and_exit(\"accepting connection\")</code>. So the Server never executes <code>handle_connection</code> for my python client.</p>\n\n<p>2.\nCode for <code>error_and_exit</code> function:</p>\n\n<pre><code>void error_and_exit(char *message) {\n  char error_message[100];\n\n  strcpy(error_message, \" Error \");\n  strncat(error_message, message, 83);\n  perror(error_message);\n  exit(-1);\n}\n</code></pre>\n"}, {"tags": ["c", "function", "header", "extern"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1478698926, "post_id": 40508391, "comment_id": 68258910, "body": "Hmm.. this is interesting....IIRC, functions are external linkage, by default."}, {"owner": {"reputation": 11220, "user_id": 2609288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3634e5c231c72e362f00ae39b637734f?s=128&d=identicon&r=PG", "display_name": "Baldrick", "link": "https://stackoverflow.com/users/2609288/baldrick"}, "edited": false, "score": 2, "creation_date": 1478698991, "post_id": 40508391, "comment_id": 68258947, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/11712707/extern-functions-in-c-vs-c\">Extern functions in C vs C++</a>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1478701999, "post_id": 40508391, "comment_id": 68260765, "body": "In general, code like that is dangerous.  It means that somewhere in the two sections there is probably a significant difference (not merely the presence or absence of <code>extern</code>) between some functions for &#39;inside the library&#39; and &#39;outside the library&#39;.  That&#39;s a problem because having the &#39;inside&#39; code use the same definitions as the &#39;outside&#39; code uses ensures that the two are synchronized \u2014 so if there&#39;s a difference, there could be a problem that the compiler won&#39;t diagnose. Note that the declaration isn&#39;t a prototype; it&#39;s merely a function with unspecified argument list (but no ellipsis)."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1478704821, "post_id": 40508391, "comment_id": 68262591, "body": "I&#39;d say the most likely explanation is that the person who wrote the code didn&#39;t know C in detail. Putting an <code>extern</code> before your function declarations can even startle intermediately experienced C programmers. It&#39;s good for posing. Kind of the same thing as declaring your local variables as <code>auto</code>."}], "answers": [{"tags": [], "owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "is_accepted": false, "score": 4, "last_activity_date": 1478699003, "creation_date": 1478699003, "answer_id": 40508465, "question_id": 40508391, "link": "https://stackoverflow.com/questions/40508391/function-declared-twice-in-c-header-file/40508465#40508465", "title": "Function declared twice in C header file", "body": "<p>It's either an affectation, or a compatibility hack for some non-conforming or ancient compiler.  You don't need the <code>extern</code> version, but using it is also fine, because function declarations are extern by default.</p>\n\n<p>In other words, it's cruft, but maybe someone needs that cruft.  We can't know for sure.</p>\n"}], "owner": {"reputation": 31, "user_id": 4210792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae61e7408383fc9b3a95fff2b2bd23fe?s=128&d=identicon&r=PG&f=1", "display_name": "Cid", "link": "https://stackoverflow.com/users/4210792/cid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 753, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1478699003, "creation_date": 1478698792, "question_id": 40508391, "link": "https://stackoverflow.com/questions/40508391/function-declared-twice-in-c-header-file", "title": "Function declared twice in C header file", "body": "<p>I'm aware of the declaration of C header files with #ifdef and the meaning of extern before variables and functions. But recently I've got a third party library for an embedded device with the following scheme:</p>\n\n<pre><code>/* \"lib.h\" */\n#ifndef LIB_H_\n#define LIB_H_\n\n   #ifdef LIB_C\n\n      void function1();\n      /* ... */\n\n   #else\n\n      extern void function1();\n      /* ... */\n\n   #endif\n\n#endif /* LIB_H_ */\n</code></pre>\n\n<p>And additionally I've got a corresponding C source file:</p>\n\n<pre><code>/* lib.c */\n#define LIB_C\n#include \"lib.h\"\n\nvoid function1()\n   {\n   /* ... */\n   }\n\n/* ... */\n</code></pre>\n\n<p>So here I am and a bit confused. What is the reason to declare all functions twice in the header in this way?</p>\n"}, {"tags": ["c", "arm", "embedded", "gnu-toolchain"], "comments": [{"owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "edited": false, "score": 0, "creation_date": 1478698870, "post_id": 40508337, "comment_id": 68258882, "body": "Not that this is your problem but you probably <i>shouldn&#39;t</i> have to run this compiler as <code>root</code> (i.e., with <code>sudo</code>)."}, {"owner": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 1, "creation_date": 1478698945, "post_id": 40508337, "comment_id": 68258921, "body": "On an Ubuntu machine, just install the gcc-arm-none-eabi package in the normal manner, and if you really need the most up-to-date version, use the PPA the launchpad site provides. This is probably more of an <a href=\"https://askubuntu.com\">Ask Ubuntu</a> thing."}, {"owner": {"reputation": 487, "user_id": 4266956, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/udhVR.jpg?s=128&g=1", "display_name": "FabioDev", "link": "https://stackoverflow.com/users/4266956/fabiodev"}, "edited": false, "score": 0, "creation_date": 1478699361, "post_id": 40508337, "comment_id": 68259185, "body": "What is the normal manner?"}, {"owner": {"reputation": 487, "user_id": 4266956, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/udhVR.jpg?s=128&g=1", "display_name": "FabioDev", "link": "https://stackoverflow.com/users/4266956/fabiodev"}, "edited": false, "score": 0, "creation_date": 1478699539, "post_id": 40508337, "comment_id": 68259292, "body": "If I don&#39;t use &quot;sudo&quot; I get the same error."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1478710378, "post_id": 40508337, "comment_id": 68266120, "body": "@FabioDev : As he said using sudo is not your problem, it is just a bad idea and unnecessary.  If it was intended to be a solution, it would have been posted and an answer not a comment."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478721900, "post_id": 40508337, "comment_id": 68271819, "body": "Any reason you don&#39;t use the ppa and install via packet manager? That&#39;s not a question about programming according to site-rules."}], "answers": [{"tags": [], "owner": {"reputation": 487, "user_id": 4266956, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/udhVR.jpg?s=128&g=1", "display_name": "FabioDev", "link": "https://stackoverflow.com/users/4266956/fabiodev"}, "is_accepted": false, "score": 1, "last_activity_date": 1478701677, "last_edit_date": 1495535567, "creation_date": 1478701677, "answer_id": 40509334, "question_id": 40508337, "link": "https://stackoverflow.com/questions/40508337/gnu-arm-embedded-toolchain-installation-issue/40509334#40509334", "title": "GNU ARM Embedded Toolchain Installation Issue", "body": "<p>Problem solved.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/2716702/no-such-file-or-directory-error-when-executing-a-binary\">&quot;No such file or directory&quot; error when executing a binary</a></p>\n\n<p>I was missing the /lib/ld-linux.so.2 file, which is needed to run 32-bit apps.</p>\n"}], "owner": {"reputation": 487, "user_id": 4266956, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/udhVR.jpg?s=128&g=1", "display_name": "FabioDev", "link": "https://stackoverflow.com/users/4266956/fabiodev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 781, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1478701677, "creation_date": 1478698633, "question_id": 40508337, "link": "https://stackoverflow.com/questions/40508337/gnu-arm-embedded-toolchain-installation-issue", "title": "GNU ARM Embedded Toolchain Installation Issue", "body": "<p>I am trying to install a GNU ARM Embedded Toolchain in order to integrate it with Sublime Text 3 in an Ubuntu machine.</p>\n\n<p>I followed this steps, but I got an error:</p>\n\n<p>1.Download the packet from \"<a href=\"https://launchpad.net/gcc-arm-embedded/+downloadGo\" rel=\"nofollow noreferrer\">https://launchpad.net/gcc-arm-embedded/+downloadGo</a>\", then unzip the packet in Home directory:</p>\n\n<pre><code>cd ~/\ntar -xvjf ~/Downloads/gcc-arm-none-eabi-5_4-2016q3-20160926-linux.tar.bz2\n</code></pre>\n\n<p>2.Test if the file exist, and permissions are ok.</p>\n\n<pre><code>ll ~/gcc-arm-none-eabi-5_4-2016q3/bin\n-rwxrwxrwx 2 root root  776368 set 26 19:36 arm-none-eabi-gcc*\n\n--- I obmited the others files... ---\n</code></pre>\n\n<p>3.Test if it works:</p>\n\n<pre><code>sudo ~/gcc-arm-none-eabi-5_4-2016q3/bin/arm-none-eabi-gcc --version\n</code></pre>\n\n<p>But I got this error:</p>\n\n<pre><code>bash: /home/fabio/gcc-arm-none-eabi-5_4-2016q3/bin/arm-none-eabi-gcc: No such file or directory\n</code></pre>\n\n<p>How can I fix this? My user is \"fabio\", but the owner of the file is root.</p>\n"}, {"tags": ["c", "linux", "elf", "readelf"], "comments": [{"owner": {"reputation": 35543, "user_id": 149530, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b6c8b04130af49735de5be666d67c00?s=128&d=identicon&r=PG", "display_name": "Michael Foukarakis", "link": "https://stackoverflow.com/users/149530/michael-foukarakis"}, "edited": false, "score": 0, "creation_date": 1478698828, "post_id": 40508188, "comment_id": 68258858, "body": "Sorry, how is <code>0x3a0</code> wrong, in the readelf output? What&#39;s the objdump output for the same binary?"}, {"owner": {"reputation": 83, "user_id": 5177457, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15efbca197897074f934fe0313c3f718?s=128&d=identicon&r=PG&f=1", "display_name": "CS.", "link": "https://stackoverflow.com/users/5177457/cs"}, "reply_to_user": {"reputation": 35543, "user_id": 149530, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b6c8b04130af49735de5be666d67c00?s=128&d=identicon&r=PG", "display_name": "Michael Foukarakis", "link": "https://stackoverflow.com/users/149530/michael-foukarakis"}, "edited": false, "score": 0, "creation_date": 1478698964, "post_id": 40508188, "comment_id": 68258928, "body": "@MichaelFoukarakis Thanks for replying. the objdump&#39;s output is same as what I see in the hexeditor and it&#39;s &quot;0x000002C8&quot;"}, {"owner": {"reputation": 35543, "user_id": 149530, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b6c8b04130af49735de5be666d67c00?s=128&d=identicon&r=PG", "display_name": "Michael Foukarakis", "link": "https://stackoverflow.com/users/149530/michael-foukarakis"}, "edited": false, "score": 0, "creation_date": 1478699063, "post_id": 40508188, "comment_id": 68258990, "body": "Please post the entire <code>objdump</code> output."}, {"owner": {"reputation": 83, "user_id": 5177457, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15efbca197897074f934fe0313c3f718?s=128&d=identicon&r=PG&f=1", "display_name": "CS.", "link": "https://stackoverflow.com/users/5177457/cs"}, "reply_to_user": {"reputation": 35543, "user_id": 149530, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b6c8b04130af49735de5be666d67c00?s=128&d=identicon&r=PG", "display_name": "Michael Foukarakis", "link": "https://stackoverflow.com/users/149530/michael-foukarakis"}, "edited": false, "score": 0, "creation_date": 1478699213, "post_id": 40508188, "comment_id": 68259094, "body": "@MichaelFoukarakis I edited the post. Take a look at the bottom please."}, {"owner": {"reputation": 35543, "user_id": 149530, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b6c8b04130af49735de5be666d67c00?s=128&d=identicon&r=PG", "display_name": "Michael Foukarakis", "link": "https://stackoverflow.com/users/149530/michael-foukarakis"}, "edited": false, "score": 0, "creation_date": 1478704757, "post_id": 40508188, "comment_id": 68262550, "body": "Are you sure you&#39;re looking at the same file? All 25 sections shown by <code>objdump</code> should also be shown by <code>readelf</code>. The output of each tool is consistent with itself, so I think the files examined are different (see how the sizes for <code>.dynsym</code> and <code>.dynstr</code> differ, for instance)."}, {"owner": {"reputation": 83, "user_id": 5177457, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15efbca197897074f934fe0313c3f718?s=128&d=identicon&r=PG&f=1", "display_name": "CS.", "link": "https://stackoverflow.com/users/5177457/cs"}, "reply_to_user": {"reputation": 35543, "user_id": 149530, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b6c8b04130af49735de5be666d67c00?s=128&d=identicon&r=PG", "display_name": "Michael Foukarakis", "link": "https://stackoverflow.com/users/149530/michael-foukarakis"}, "edited": false, "score": 0, "creation_date": 1478713135, "post_id": 40508188, "comment_id": 68267580, "body": "@MichaelFoukarakis Well, I&#39;m note sure what happened! Now that I repeat the test, readelf is showing correct offset. I don&#39;t remember using different binaries. Though it seems a strange mistake, but apparently I&#39;ve made it. Thank you for your responses anyway."}, {"owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "edited": false, "score": 0, "creation_date": 1478920909, "post_id": 40508188, "comment_id": 68355926, "body": "I&#39;m voting to close this question as off-topic because it&#39;s due to a user mistake: running readelf and objdump on different files is <i>expected</i> to produce different results."}], "owner": {"reputation": 83, "user_id": 5177457, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15efbca197897074f934fe0313c3f718?s=128&d=identicon&r=PG&f=1", "display_name": "CS.", "link": "https://stackoverflow.com/users/5177457/cs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 926, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1478699700, "creation_date": 1478698148, "last_edit_date": 1478699700, "question_id": 40508188, "link": "https://stackoverflow.com/questions/40508188/readelf-shows-wrong-section-offset", "title": "readelf shows wrong section offset", "body": "<p>For some sections of an ELF file, '.dynstr' for example, the offset which is written in the structure of the section header table is something that \"readelf -a\" does not report. For example the offset is \"0x0245\" but readelf reports \"0x0300\" as the offset of the section. I can confirm that the offset returned by \"readelf\" is wrong using a HexEditor. For the first few sections what readelf is reporting as their corresponding offset is correct, but some point downward all the offsets are wrong. Does any body know why the reported offsets are different from what is written in the file? Or is this a bug related to readelf?</p>\n\n<p><strong>Note</strong>: By using \"objdump -h\" I can also confirm that the offsets reported by readelf are wrong </p>\n\n<p><strong>Note2</strong>: Some offsets returned by 'readelf' are even bigger than the file size.</p>\n\n<p>This is as output example or readelf:</p>\n\n<pre><code>Section Headers:\n  [Nr] Name              Type             Address           Offset\n       Size              EntSize          Flags  Link  Info  Align\n  [ 0]                   NULL             0000000000000000  00000000\n       0000000000000000  0000000000000000           0     0     0\n  [ 1] .interp           PROGBITS         0000000000400200  00000200\n       000000000000001c  0000000000000000   A       0     0     1\n  [ 2] .note.ABI-tag     NOTE             000000000040021c  0000021c\n       0000000000000020  0000000000000000   A       0     0     4\n  [ 3] .note.gnu.build-i NOTE             000000000040023c  0000023c\n       0000000000000024  0000000000000000   A       0     0     4\n  [ 4] .gnu.hash         GNU_HASH         0000000000400260  00000260\n       000000000000001c  0000000000000000   A       5     0     8\n  [ 5] .dynsym           DYNSYM           0000000000400280  00000280\n       0000000000000120  0000000000000018   A       6     1     8\n  &gt;&gt; [ 6] .dynstr           STRTAB           00000000004003a0  000003a0  &lt;&lt;&lt; 0x3a0 is wrong\n       0000000000000084  0000000000000000   A       0     0     1\n</code></pre>\n\n<p>This is 'objdump -h' output :</p>\n\n<pre><code>Sections:\nIdx Name          Size      VMA               LMA               File off  Algn\n  0 .interp       0000001c  0000000000400200  0000000000400200  00000200  2**0\n                  CONTENTS, ALLOC, LOAD, READONLY, DATA\n  1 .note.ABI-tag 00000020  000000000040021c  000000000040021c  0000021c  2**2\n                  CONTENTS, ALLOC, LOAD, READONLY, DATA\n  2 .note.gnu.build-id 00000024  000000000040023c  000000000040023c  0000023c  2**2\n                  CONTENTS, ALLOC, LOAD, READONLY, DATA\n  3 .gnu.hash     0000001c  0000000000400260  0000000000400260  00000260  2**3\n                  CONTENTS, ALLOC, LOAD, READONLY, DATA\n  4 .dynsym       00000048  0000000000400280  0000000000400280  00000280  2**3\n                  CONTENTS, ALLOC, LOAD, READONLY, DATA\n  5 .dynstr       00000038  00000000004002c8  00000000004002c8  000002c8  2**0\n                  CONTENTS, ALLOC, LOAD, READONLY, DATA\n  6 .gnu.version  00000006  0000000000400300  0000000000400300  00000300  2**1\n                  CONTENTS, ALLOC, LOAD, READONLY, DATA\n  7 .gnu.version_r 00000020  0000000000400308  0000000000400308  00000308  2**3\n                  CONTENTS, ALLOC, LOAD, READONLY, DATA\n  8 .rela.dyn     00000018  0000000000400328  0000000000400328  00000328  2**3\n                  CONTENTS, ALLOC, LOAD, READONLY, DATA\n  9 .rela.plt     00000030  0000000000400340  0000000000400340  00000340  2**3\n                  CONTENTS, ALLOC, LOAD, READONLY, DATA\n 10 .init         0000001a  0000000000400370  0000000000400370  00000370  2**2\n                  CONTENTS, ALLOC, LOAD, READONLY, CODE\n 11 .plt          00000030  0000000000400390  0000000000400390  00000390  2**4\n                  CONTENTS, ALLOC, LOAD, READONLY, CODE\n 12 .text         00000182  00000000004003c0  00000000004003c0  000003c0  2**4\n                  CONTENTS, ALLOC, LOAD, READONLY, CODE\n 13 .fini         00000009  0000000000400544  0000000000400544  00000544  2**2\n                  CONTENTS, ALLOC, LOAD, READONLY, CODE\n 14 .rodata       00000004  0000000000400550  0000000000400550  00000550  2**2\n                  CONTENTS, ALLOC, LOAD, READONLY, DATA\n 15 .eh_frame_hdr 00000034  0000000000400554  0000000000400554  00000554  2**2\n                  CONTENTS, ALLOC, LOAD, READONLY, DATA\n 16 .eh_frame     000000f4  0000000000400588  0000000000400588  00000588  2**3\n                  CONTENTS, ALLOC, LOAD, READONLY, DATA\n 17 .init_array   00000008  0000000000600680  0000000000600680  00000680  2**3\n                  CONTENTS, ALLOC, LOAD, DATA\n 18 .fini_array   00000008  0000000000600688  0000000000600688  00000688  2**3\n                  CONTENTS, ALLOC, LOAD, DATA\n 19 .jcr          00000008  0000000000600690  0000000000600690  00000690  2**3\n                  CONTENTS, ALLOC, LOAD, DATA\n 20 .dynamic      000001d0  0000000000600698  0000000000600698  00000698  2**3\n                  CONTENTS, ALLOC, LOAD, DATA\n 21 .got          00000008  0000000000600868  0000000000600868  00000868  2**3\n                  CONTENTS, ALLOC, LOAD, DATA\n 22 .got.plt      00000028  0000000000600870  0000000000600870  00000870  2**3\n                  CONTENTS, ALLOC, LOAD, DATA\n 23 .data         00000014  0000000000600898  0000000000600898  00000898  2**3\n                  CONTENTS, ALLOC, LOAD, DATA\n 24 .bss          00000004  00000000006008ac  00000000006008ac  000008ac  2**0\n                  ALLOC\n 25 .comment      00000039  0000000000000000  0000000000000000  000008ac  2**0\n                  CONTENTS, READONLY\n</code></pre>\n"}, {"tags": ["c", "linux", "signals", "open-source", "signal-handling"], "comments": [{"owner": {"reputation": 5198, "user_id": 186580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51af0a007f1bdc7134c0f02d3a156abb?s=128&d=identicon&r=PG", "display_name": "Oleksandr Kravchuk", "link": "https://stackoverflow.com/users/186580/oleksandr-kravchuk"}, "edited": false, "score": 0, "creation_date": 1478699572, "post_id": 40508007, "comment_id": 68259308, "body": "in Linux C? You mean Linux kernel signals handler?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1478701607, "post_id": 40508007, "comment_id": 68260529, "body": "There isn&#39;t a default signal handler at the user-level for SIGABRT (or any other signal, come to that).  The default behaviour for SIGABRT is to terminate with a core dump; that is all handled by the kernel, not by user-level code."}], "answers": [{"tags": [], "owner": {"reputation": 249, "user_id": 14800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6501a4d97420c943fb7571628c6318cb?s=128&d=identicon&r=PG", "display_name": "xslr", "link": "https://stackoverflow.com/users/14800/xslr"}, "is_accepted": false, "score": 1, "last_activity_date": 1478700259, "creation_date": 1478700259, "answer_id": 40508861, "question_id": 40508007, "link": "https://stackoverflow.com/questions/40508007/how-to-find-the-source-code-of-the-default-signal-handler-function/40508861#40508861", "title": "How to find the source code of the default signal handler function?", "body": "<p><a href=\"http://lxr.free-electrons.com\" rel=\"nofollow noreferrer\">http://lxr.free-electrons.com</a> is a great way to read the linux kernel's source.</p>\n\n<p>Doing a quick search for <code>SIGABRT</code> shows that it is used only by the <a href=\"http://lxr.free-electrons.com/source/include/linux/signal.h#L416\" rel=\"nofollow noreferrer\">SIG_KERNEL_COREDUMP_MASK</a> macro. This macro is in turn used exclusively by <a href=\"http://lxr.free-electrons.com/source/include/linux/signal.h#L427\" rel=\"nofollow noreferrer\">sig_kernel_coredump</a>.</p>\n\n<p>Tracing the usage of this macro leads us to the place where the signal handlers are executed in <a href=\"http://lxr.free-electrons.com/source/kernel/signal.c#L2301\" rel=\"nofollow noreferrer\">kernel/signal.c:2301</a>.</p>\n\n<p>This corresponds to what the <a href=\"http://man7.org/linux/man-pages/man7/signal.7.html\" rel=\"nofollow noreferrer\">man pages</a> tell us, i.e. the default action for SIGABRT is to terminate the process and dump the program core memory.</p>\n"}], "owner": {"reputation": 356, "user_id": 6026006, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0yk-JaTSgEo/AAAAAAAAAAI/AAAAAAAAAnY/MtLNVHTkscE/photo.jpg?sz=128", "display_name": "Aarian P. Aleahmad", "link": "https://stackoverflow.com/users/6026006/aarian-p-aleahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 475, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1478700259, "creation_date": 1478697582, "question_id": 40508007, "link": "https://stackoverflow.com/questions/40508007/how-to-find-the-source-code-of-the-default-signal-handler-function", "title": "How to find the source code of the default signal handler function?", "body": "<p>I wanted to see the source code of the default handler of SIGABRT in Linux C, But I couldn't find it. Would you please mind help to find it?</p>\n"}, {"tags": ["python", "c", "dll", "ada", "gnat"], "comments": [{"owner": {"reputation": 17509, "user_id": 1818839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c85353a93872849b5ef6041b2f28fb3?s=128&d=identicon&r=PG&f=1", "display_name": "user_1818839", "link": "https://stackoverflow.com/users/1818839/user-1818839"}, "edited": false, "score": 0, "creation_date": 1478699303, "post_id": 40507535, "comment_id": 68259153, "body": "Any chance you can make the example an MCVE? I think that would require the Ada source (implementing division only), presumably a Python client, and build commands/Makefile. Also, would it work to build the C DLL in the same gcc version as Gnat, and only <i>use</i> it via MSVC?"}, {"owner": {"reputation": 103, "user_id": 356356, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06c38e1e55d8805e68b0ad355392713b?s=128&d=identicon&r=PG", "display_name": "gccinac", "link": "https://stackoverflow.com/users/356356/gccinac"}, "reply_to_user": {"reputation": 17509, "user_id": 1818839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c85353a93872849b5ef6041b2f28fb3?s=128&d=identicon&r=PG&f=1", "display_name": "user_1818839", "link": "https://stackoverflow.com/users/1818839/user-1818839"}, "edited": false, "score": 0, "creation_date": 1478701928, "post_id": 40507535, "comment_id": 68260725, "body": "I have several Python header files. What is the best way to upload an MCVE with so many &quot;standard &quot; header files? Yes, using gcc would be another option, I&#39;ll try it and post the results. Thanks!"}, {"owner": {"reputation": 17509, "user_id": 1818839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c85353a93872849b5ef6041b2f28fb3?s=128&d=identicon&r=PG&f=1", "display_name": "user_1818839", "link": "https://stackoverflow.com/users/1818839/user-1818839"}, "edited": false, "score": 0, "creation_date": 1478704437, "post_id": 40507535, "comment_id": 68262356, "body": "gcc may be worth a try : even if it yields the same error with only C code that may help find a fix. Also, how (where) are you calling <code>adainit()</code> and <code>adafinal()</code>?"}, {"owner": {"reputation": 103, "user_id": 356356, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06c38e1e55d8805e68b0ad355392713b?s=128&d=identicon&r=PG", "display_name": "gccinac", "link": "https://stackoverflow.com/users/356356/gccinac"}, "reply_to_user": {"reputation": 17509, "user_id": 1818839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c85353a93872849b5ef6041b2f28fb3?s=128&d=identicon&r=PG&f=1", "display_name": "user_1818839", "link": "https://stackoverflow.com/users/1818839/user-1818839"}, "edited": false, "score": 0, "creation_date": 1478706899, "post_id": 40507535, "comment_id": 68264011, "body": "Thanks @Brian! It compiled with gcc although I&#39;m getting import DIVISION_CPP:  ValueError: module functions cannot set METH_CLASS or METH_STATIC. Is it a must to call adainit/adafinal in the c code? In my (inherited) code there wasn&#39;t anything like that. Does it have anything to do with it?"}, {"owner": {"reputation": 17509, "user_id": 1818839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c85353a93872849b5ef6041b2f28fb3?s=128&d=identicon&r=PG&f=1", "display_name": "user_1818839", "link": "https://stackoverflow.com/users/1818839/user-1818839"}, "edited": false, "score": 0, "creation_date": 1478707875, "post_id": 40507535, "comment_id": 68264686, "body": "I am not clear on adainit etc; it may happen automatically as part of the DLL framework ... or not ... for all I know, so I raised it as one thing to look into. But in any case it sounds unrelated to the METH_CLASS error."}], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 356356, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06c38e1e55d8805e68b0ad355392713b?s=128&d=identicon&r=PG", "display_name": "gccinac", "link": "https://stackoverflow.com/users/356356/gccinac"}, "edited": false, "score": 0, "creation_date": 1478773726, "post_id": 40512375, "comment_id": 68290867, "body": "You were right on the &quot;{NULL, NULL, 0, NULL}&quot; hypothesis! :)  I&#39;ll change it in my question, as I now get a .//libmath.lib: error adding symbols: Malformed archive  with gcc similar to the original error with MS compiler."}, {"owner": {"reputation": 17509, "user_id": 1818839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c85353a93872849b5ef6041b2f28fb3?s=128&d=identicon&r=PG&f=1", "display_name": "user_1818839", "link": "https://stackoverflow.com/users/1818839/user-1818839"}, "reply_to_user": {"reputation": 103, "user_id": 356356, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06c38e1e55d8805e68b0ad355392713b?s=128&d=identicon&r=PG", "display_name": "gccinac", "link": "https://stackoverflow.com/users/356356/gccinac"}, "edited": false, "score": 0, "creation_date": 1478776227, "post_id": 40512375, "comment_id": 68292509, "body": "I think making an MCVE has to be the next step - maybe you can use the linked question as a starting point and add the Ada component to it."}], "tags": [], "owner": {"reputation": 17509, "user_id": 1818839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c85353a93872849b5ef6041b2f28fb3?s=128&d=identicon&r=PG&f=1", "display_name": "user_1818839", "link": "https://stackoverflow.com/users/1818839/user-1818839"}, "is_accepted": false, "score": 1, "last_activity_date": 1478711174, "last_edit_date": 1495535428, "creation_date": 1478711174, "answer_id": 40512375, "question_id": 40507535, "link": "https://stackoverflow.com/questions/40507535/wrapper-dll-for-python-fatal-error-lnk1127-library-is-corrupt/40512375#40512375", "title": "Wrapper DLL for Python: &quot;fatal error LNK1127: library is corrupt&quot;", "body": "<p>Preamble: Apologies if this turns out to be a non-answer; I want to be able to come back to this and find the links again, and comments tend to rot...</p>\n\n<p>First, gcc (in the version matching Gnat) may work as an alternative C compiler, and if it does, it may eliminate difficulties with incompatible library versions.</p>\n\n<p>GCC can be used for building Windows DLLs so the result should be usable from other Windows executables.</p>\n\n<p>Following comments; gcc does appear to allow compilation, but the result is not currently usable from Python - here, my Python knowledge is shallow, and we don't have an MCVE, so this is speculative:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/11584765/integrating-c-and-python-valueerror-module-functions-cannot-set-meth-class-or\">This Q&amp;A addresses the same error message</a> between Python and pure C, with no Ada, suggesting this error may not be specific to C-wrapped Ada.</p>\n\n<p>You have already bypassed the asker's specific error, </p>\n\n<pre><code>static PyMethodDef* _npfindmethods = { ... };\n</code></pre>\n\n<p>which was using a pointer; you are (correctly according to the answer) statically allocating an array. However, the accepted answer terminates the list of methods </p>\n\n<pre><code>static PyMethodDef _npfindmethods[] = {\n    {\"add\", py_add, METH_VARARGS, py_add_doc},\n    {NULL, NULL, 0, NULL}\n};\n</code></pre>\n\n<p>with a NULL method; your example does not:</p>\n\n<pre><code>static PyMethodDef LIB_METHODS_methods[] = {\n   { \"CPP_DIVISION\", _wrap_DIVISION, METH_VARARGS }\n};\n</code></pre>\n\n<p>So my hypothesis is that when you run <code>setup()</code> on this module, it finds CPP_DIVISION successfully, then in the absence of a NULL method it runs off into the weeds, producing the same symptoms despite the difference in cause.</p>\n\n<p>I could test this hypothesis using the MCVE in that question by deleting the NULL method; however I don't have a Windows system handy, only Linux.</p>\n\n<p>Alternatively, I see no reason for a C layer. If there isn't one, <a href=\"https://stackoverflow.com/questions/13271818/preventing-mangled-names-in-ada-dll?rq=1\">this Q&amp;A addresses direct interaction between Python and Ada</a> with no C layer, though it appears to use a different method, <code>getattr()</code> to import the external method. Might be an alternative?</p>\n"}, {"tags": [], "owner": {"reputation": 103, "user_id": 356356, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06c38e1e55d8805e68b0ad355392713b?s=128&d=identicon&r=PG", "display_name": "gccinac", "link": "https://stackoverflow.com/users/356356/gccinac"}, "is_accepted": true, "score": 0, "last_activity_date": 1479221871, "creation_date": 1479221871, "answer_id": 40612991, "question_id": 40507535, "link": "https://stackoverflow.com/questions/40507535/wrapper-dll-for-python-fatal-error-lnk1127-library-is-corrupt/40612991#40612991", "title": "Wrapper DLL for Python: &quot;fatal error LNK1127: library is corrupt&quot;", "body": "<p>Finally I managed to compile with gcc+gnat but not with MSVC+gnat.</p>\n\n<p>With gcc+gnat, I was getting .//libmath.lib: error adding symbols: Malformed archive. The solution consists on using libmath.dll instead of building the .lib from the .dll.</p>\n\n<p><strong>So, in summary:</strong></p>\n\n<ul>\n<li>If you have a .dll generated by gnat, use it with gcc. You don't need to build a  .lib.</li>\n<li>If you have a .lib (for example python27.lib) or a .dll not generated by gnat, convert it to a .a using a tool like \"pexport\" (DO NOT USE SED!).</li>\n<li>If you really need to compile using the MSVC... I'm sorry, I could not manage to make it work. Your princess is in another castle.</li>\n</ul>\n"}], "owner": {"reputation": 103, "user_id": 356356, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06c38e1e55d8805e68b0ad355392713b?s=128&d=identicon&r=PG", "display_name": "gccinac", "link": "https://stackoverflow.com/users/356356/gccinac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 378, "favorite_count": 0, "accepted_answer_id": 40612991, "answer_count": 2, "score": 0, "last_activity_date": 1479221871, "creation_date": 1478696093, "last_edit_date": 1478774215, "question_id": 40507535, "link": "https://stackoverflow.com/questions/40507535/wrapper-dll-for-python-fatal-error-lnk1127-library-is-corrupt", "title": "Wrapper DLL for Python: &quot;fatal error LNK1127: library is corrupt&quot;", "body": "<h2>Brief description</h2>\n\n<p>I have a DLL programmed in ADA with GNAT. I want to compile with MSVC another DLL in C as a wrapper to the ADA_DLL in order to use it with Python.</p>\n\n<p>I have compiled the ada_DLL, then I have generated the .lib file according to <a href=\"https://gcc.gnu.org/onlinedocs/gnat_ugn/Using-GNAT-DLLs-from-Microsoft-Visual-Studio-Applications.html#Using-GNAT-DLLs-from-Microsoft-Visual-Studio-Applications\" rel=\"nofollow noreferrer\">gnat documentation about MSVC</a>. And finally I tried to compile the C_DLL with Visual-Studio, getting the error:</p>\n\n<pre><code>libmath.lib : fatal error LNK1127: library is corrupt\n</code></pre>\n\n<p>Update: In the case of compiling with gcc as suggested by @Brian, I get the following output:</p>\n\n<pre><code>&gt;\"C:\\GNAT\\2015\\bin\\gcc.exe\" -c      -IC:\\Python27\\include -o libmath_c.o libmath_c.c\n&gt;\"C:\\GNAT\\2015\\bin\\gcc.exe\" -shared -LC:\\Python27\\libs -L./ -l libmath -o DIVISION_CPP.pyd libmath_c.o -lpython27\n    .//libmath.lib: error adding symbols: Malformed archive\ncollect2.exe: error: ld returned 1 exit status\n</code></pre>\n\n<h2>Things I tried &amp; more data:</h2>\n\n<p>I have tried importing the ADA_DLL directly with ctypes in Python and it works, so I believe that the ADA_DLL is correctly compiled. Also, forgetting about the C_DLL is not really an option.</p>\n\n<p>I did a small example with a division example module. My .def file looks something like:</p>\n\n<pre><code>; dlltool -z libmath.def --export-all-symbols libmath.dll\nEXPORTS\n   [...]\n    div @ 259\n   [...]\n</code></pre>\n\n<p>The libmath_c.c:</p>\n\n<pre><code>#include \"libmath_c.h\"\n    PyObject* _wrap_DIVISION(PyObject *self, PyObject *args){\n       div(10, 2);\n       return Py_None;\n    }\n    __declspec(dllexport) void __cdecl initDIVISION_CPP(void){\n       Py_InitModule(\"DIVISION_CPP\", LIB_METHODS_methods);\n      }\n</code></pre>\n\n<p>The libmath_c.h:</p>\n\n<pre><code>#include &lt;windows.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;Python.h&gt;\nPyObject* _wrap_DIVISION(PyObject *self, PyObject *args);\nstatic PyMethodDef LIB_METHODS_methods[] = {\n   { \"CPP_DIVISION\", _wrap_DIVISION, METH_VARARGS },\n   {NULL, NULL, 0, NULL}   //Added as indicated by @Brian. Thanks! \n};\n__declspec(dllexport) void __cdecl initDIVISION_CPP(void);\n</code></pre>\n\n<p>Any idea of what is happening? Any help would be really appreciated. Thanks!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 3, "creation_date": 1478695532, "post_id": 40507318, "comment_id": 68256836, "body": "&quot;// here is negative decimal code&quot; ... i dont see any code for this case. Do you want someone to write it for you?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1478695722, "post_id": 40507318, "comment_id": 68256951, "body": "What are you trying to do? Build up an array of ints where each int is a binary digit? What&#39;s that good for? Any reason why you can&#39;t just do <code>for(uint32_t i=0; i&lt;sizeof(int)*8; i++) { printf(&quot;%c&quot;, number &amp; (1&lt;&lt;i) ? &#39;1&#39; : &#39;0&#39;); }</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1478702864, "post_id": 40507318, "comment_id": 68261318, "body": "To print the binary encoding of <i>any</i> object, consider <a href=\"http://stackoverflow.com/questions/35364772/how-to-print-memory-bits-in-c/35367414#35367414\">this</a>"}], "answers": [{"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 2, "last_activity_date": 1478696831, "last_edit_date": 1478696831, "creation_date": 1478695548, "answer_id": 40507366, "question_id": 40507318, "link": "https://stackoverflow.com/questions/40507318/negative-decimal-to-binary-c-code/40507366#40507366", "title": "negative decimal to binary c code", "body": "<p>Just view the integer as <code>unsigned</code>, and output the bits.</p>\n\n<p>You will get the bits of the internal representation of the negative number (typically two's complement). No need to treat negative numbers separately.</p>\n\n<p>Also, and this seems to be very hard to understand for many beginners, the number in <code>i</code> is not \"decimal\". It was initialized by reading a string of decimal digits, but the underlying computer memory is probably using a binary representation to store it.</p>\n\n<p>The actual numbers are the same: for instance 23<sub>10</sub> = 10111<sub>2</sub> means that the two entities are the same, they are equal. Viewing a number in a particular base doesn't change the number.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1478702655, "post_id": 40507496, "comment_id": 68261169, "body": "Right shifting a 16-bit int with a negative value results in implementation defined behavior <a href=\"http://stackoverflow.com/questions/40508958/shifting-a-negative-signed-value-is-undefined/40509322#comment68260203_40508958\">Ref</a> as this code does.  This will likely give expected results, but not specified by C to do so."}, {"owner": {"reputation": 1805, "user_id": 6284997, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/1376431542382698/picture?type=large", "display_name": "MayurK", "link": "https://stackoverflow.com/users/6284997/mayurk"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1478839357, "post_id": 40507496, "comment_id": 68321492, "body": "@chux, I didn&#39;t understand that post completely, but I understand your point. I modified my code and using unsigned int for shift operation."}], "tags": [], "owner": {"reputation": 1805, "user_id": 6284997, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/1376431542382698/picture?type=large", "display_name": "MayurK", "link": "https://stackoverflow.com/users/6284997/mayurk"}, "is_accepted": false, "score": 2, "last_activity_date": 1478839287, "last_edit_date": 1478839287, "creation_date": 1478695943, "answer_id": 40507496, "question_id": 40507318, "link": "https://stackoverflow.com/questions/40507318/negative-decimal-to-binary-c-code/40507496#40507496", "title": "negative decimal to binary c code", "body": "<p>You can use bitshift operator to get the bits.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n    int main(void){\n        int i            = 0;\n        unsigned int u_i = 0;\n        int j            = 0;\n        int b[16]        = {0}; //Assuming your integer size is 16bit\n\n        printf(\"input number\");\n        scanf(\"%d\",&amp;i);\n\n        u_i = (unsigned int)i;\n\n        for(j=15;j&gt;=0;j--) {\n            b[j] = u_i &amp; 0x1;\n            u_i  = u_i &gt;&gt; 1;\n        }\n\n        for (j=0;j&lt;=15;j++)\n            printf(\"%d\", b[j]);\n\n        printf(\"\\n\");\n        return 0;\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1478702477, "creation_date": 1478702477, "answer_id": 40509595, "question_id": 40507318, "link": "https://stackoverflow.com/questions/40507318/negative-decimal-to-binary-c-code/40509595#40509595", "title": "negative decimal to binary c code", "body": "<p>To print a signed integer as binary, perform repeated divisions by 2.  No need to assume the width is 16 nor using 2's complement.  Using <code>&gt;&gt;</code> shifts invites implementation defined behavior.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\n\nvoid print2_helper(int x) {\n  bool isodd = x%2;\n  x /= 2;\n  if (x) print2_helper(x);\n  putchar('0' + isodd);\n}\n\nvoid print2(int x) {\n  printf(\"Decimal:%d\\tBinary:\", x);\n  if (x &lt; 0) putchar('-');\n  print2_helper(x);\n  putchar('\\n');\n}\n\nint main(void){\n  print2(0);\n  print2(1);\n  print2(-1);\n  print2(2);\n  print2(-2);\n  print2(INT_MAX);\n  print2(INT_MIN);\n  return 0;\n}\n</code></pre>\n\n<p>Output.</p>\n\n<pre><code>Decimal:0   Binary:0\nDecimal:1   Binary:1\nDecimal:-1  Binary:-1\nDecimal:2   Binary:10\nDecimal:-2  Binary:-10\nDecimal:2147483647  Binary:1111111111111111111111111111111\nDecimal:-2147483648 Binary:-10000000000000000000000000000000\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 2219478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcf026b61712fcc22e4e6eddf1213e66?s=128&d=identicon&r=PG", "display_name": "Jong Sun Choi", "link": "https://stackoverflow.com/users/2219478/jong-sun-choi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8550, "favorite_count": 0, "accepted_answer_id": 40509595, "answer_count": 3, "score": -1, "last_activity_date": 1506503975, "creation_date": 1478695411, "last_edit_date": 1478695614, "question_id": 40507318, "link": "https://stackoverflow.com/questions/40507318/negative-decimal-to-binary-c-code", "title": "negative decimal to binary c code", "body": "<p>I can't write negative decimal to binary c code.\nneed help :)\nHere is my code......\nThere is no need other includes.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n    int main(void){\n        int i;\n        int j;\n        int b[16];\n        printf(\"input number\");\n        scanf(\"%d\",&amp;i);\n        if(i &lt;= 0) {\n            // here is negative decimal code\n        } else {\n            for(j=15;j&gt;=0;j--) {\n                b[j] = i % 2;\n                i = i / 2;\n            }\n            for (j=0;j&lt;=15;j++)\n                printf(\"%d\", b[j]);\n            printf(\"\\n\");\n        }\n        return 0;\n    }\n</code></pre>\n"}, {"tags": ["c", "macos", "opengl"], "comments": [{"owner": {"reputation": 1156, "user_id": 4772791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e9e0e4bd022920a359eac1b22749ca6?s=128&d=identicon&r=PG&f=1", "display_name": "arsv", "link": "https://stackoverflow.com/users/4772791/arsv"}, "edited": false, "score": 1, "creation_date": 1478696427, "post_id": 40507317, "comment_id": 68257374, "body": "<a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}], "answers": [{"comments": [{"owner": {"reputation": 109, "user_id": 4654710, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/778a810c89fe72ca03e908a115744cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Desperate", "link": "https://stackoverflow.com/users/4654710/desperate"}, "edited": false, "score": 0, "creation_date": 1478700574, "post_id": 40508578, "comment_id": 68259907, "body": "Well I guess part of my problem is that I don&#39;t quite see what the use of GLee is anyways. Thing is that the framework we&#39;re provided uses GLee .. so is there a simple way to work around this? Because if I don&#39;t use GLeeInit() then the code exits with an error that OpenGL 3 is required.. so how can I link this into the code? sorry if the question seems stupid.. really totally new to OpenGL and all this stuff.."}, {"owner": {"reputation": 109, "user_id": 4654710, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/778a810c89fe72ca03e908a115744cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Desperate", "link": "https://stackoverflow.com/users/4654710/desperate"}, "edited": false, "score": 0, "creation_date": 1478701720, "post_id": 40508578, "comment_id": 68260597, "body": "I have manually removed all calls to GLee but when I try to run the whole thing now I get this error.. &quot;ERROR: 0:1: &#39;&#39; :  version &#39;130&#39; is not supported&quot;"}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "reply_to_user": {"reputation": 109, "user_id": 4654710, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/778a810c89fe72ca03e908a115744cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Desperate", "link": "https://stackoverflow.com/users/4654710/desperate"}, "edited": false, "score": 0, "creation_date": 1478713568, "post_id": 40508578, "comment_id": 68267804, "body": "@Desperate: That error is likely from the GLSL compiler and it tells you that you try to compile a OpenGL-2.x shader in a OpenGL-3.x context. OpenGL shader versions start with 1.50 for OpenGL-3. OpenGL-3.3 &quot;synched up&quot; GLSL shader versions with OpenGL versions. Assuming you got a 3.3 context you should get your shaders to <code>#version 330</code>"}, {"owner": {"reputation": 109, "user_id": 4654710, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/778a810c89fe72ca03e908a115744cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Desperate", "link": "https://stackoverflow.com/users/4654710/desperate"}, "edited": false, "score": 0, "creation_date": 1478715414, "post_id": 40508578, "comment_id": 68268714, "body": "that&#39;s actually it!! when I check my gl.h file I can see that the two shaders I try to compile are from OpenGL 2.0!.. so how can I force my program to use 3.0 shaders? :/"}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "reply_to_user": {"reputation": 109, "user_id": 4654710, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/778a810c89fe72ca03e908a115744cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Desperate", "link": "https://stackoverflow.com/users/4654710/desperate"}, "edited": false, "score": 0, "creation_date": 1478718068, "post_id": 40508578, "comment_id": 68269963, "body": "@Desperate: It&#39;s not something you can &quot;force&quot; your program to do. We&#39;re talking about the version of the <i>GLSL programming language</i> used to write the shaders. So you&#39;ll likely have to rewrite your shader code. For example the specialized <code>texture1D, texture2D, \u2026</code> functions have been replaced by a polymorphic <code>texture</code> function. See <a href=\"https://www.opengl.org/wiki/Core_Language_(GLSL)\" rel=\"nofollow noreferrer\">opengl.org/wiki/Core_Language_(GLSL)</a> for an overview and consult the GLSL language reference for differences between versions."}, {"owner": {"reputation": 109, "user_id": 4654710, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/778a810c89fe72ca03e908a115744cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Desperate", "link": "https://stackoverflow.com/users/4654710/desperate"}, "edited": false, "score": 0, "creation_date": 1478719199, "post_id": 40508578, "comment_id": 68270548, "body": "I see! Well thanks a bunch for your patience with me. Sadly this doesn&#39;t really help me since I&#39;m doing this for a CG course and I don&#39;t plan on rewriting a huge framework given to us.. so I&#39;ll see what I can do (or if it actually IS a shader incompatability issue) or whatever .."}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "reply_to_user": {"reputation": 109, "user_id": 4654710, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/778a810c89fe72ca03e908a115744cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Desperate", "link": "https://stackoverflow.com/users/4654710/desperate"}, "edited": false, "score": 0, "creation_date": 1478769813, "post_id": 40508578, "comment_id": 68288264, "body": "@Desperate: It&#39;s just the shaders you have to rewrite. That shouldn&#39;t be too much work (shaders are very short programs). Also talk to your tutors and teachers and ask them to update their coursework to core profile OpenGL. What they&#39;re currently teaching is useful for only a very small subset of developers and users. Either stick to old-style OpenGL-2.x or go fully modern core profile OpenGL-3.x. That no man&#39;s land in between should be avoided."}, {"owner": {"reputation": 109, "user_id": 4654710, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/778a810c89fe72ca03e908a115744cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Desperate", "link": "https://stackoverflow.com/users/4654710/desperate"}, "edited": false, "score": 0, "creation_date": 1478771355, "post_id": 40508578, "comment_id": 68289247, "body": "I think the problem is not what you mentioned before. When looking at the shaders they should be 3.0 as far as I can tell and now I&#39;m really clueless about why they don&#39;t compile or rather give me this error message.. I have added the shorter one (they&#39;re REALLY short) to my question so I&#39;d be thankful if you had a short look at it!"}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "reply_to_user": {"reputation": 109, "user_id": 4654710, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/778a810c89fe72ca03e908a115744cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Desperate", "link": "https://stackoverflow.com/users/4654710/desperate"}, "edited": false, "score": 0, "creation_date": 1478774296, "post_id": 40508578, "comment_id": 68291275, "body": "@Desperate: The shader starts with <code>#version 130</code>. That is the GLSL version for OpenGL-3.0. OpenGL core profile has been introduced with OpenGL-3.3. So if you have a core profile context, then you need that as minimum shader version as well, which would be <code>#version 330</code>. \u2013 The introduction of <i>core</i> profile was <b>the</b> big break in OpenGL. Among other things this is also reflected by GLSL version numbers. OpenGL-3.2/GLSL-1.50 \u2192 OpenGL-3.3/GLSL-3.30. If anything you should always try to get at least OpenGL-3.3 when aiming for modern GL. Or OpenGL-2.1 when aiming for legacy."}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "reply_to_user": {"reputation": 109, "user_id": 4654710, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/778a810c89fe72ca03e908a115744cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Desperate", "link": "https://stackoverflow.com/users/4654710/desperate"}, "edited": false, "score": 0, "creation_date": 1478774479, "post_id": 40508578, "comment_id": 68291405, "body": "@Desperate: As already told, the area between OpenGL-2.1 to OpenGL-3.2 including is kind of a no-man&#39;s-land where we had funny things like the &quot;forward compatible profiles&quot; flag and there was <i>no</i> distinction between core and compatibility profile. As far as <b>all</b> implementations except AMD&#39;s and NVidia&#39;s proprietary ones on Windows and Linux are concerned, OpenGL-3.3+ <b>compatibility</b> profile is supported nowhere and support for OpenGL-3.0 \u2026 OpenGL-3.2 very shoddy."}, {"owner": {"reputation": 109, "user_id": 4654710, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/778a810c89fe72ca03e908a115744cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Desperate", "link": "https://stackoverflow.com/users/4654710/desperate"}, "edited": false, "score": 0, "creation_date": 1478775149, "post_id": 40508578, "comment_id": 68291836, "body": "I think I&#39;m getting there! Now I have added a bit of code to start the whole thing in core profile and with this my other shader (not the one from above) actually does compile!! Now my last problem (hopefully) is that obviously in version 330 &#39;gl_FragColor&#39; is not defined .. but if this is the last piece of work this should be easily corrected!! thank you SO much for your patience"}, {"owner": {"reputation": 109, "user_id": 4654710, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/778a810c89fe72ca03e908a115744cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Desperate", "link": "https://stackoverflow.com/users/4654710/desperate"}, "edited": false, "score": 0, "creation_date": 1478780012, "post_id": 40508578, "comment_id": 68294854, "body": "fyi I think I got it to work now! So far I don&#39;t see a rendered picture but that&#39;s fine since I haven&#39;t solved the exercise yet! at least I get a black window and the program doesn&#39;t crash. Thanks again!"}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "reply_to_user": {"reputation": 109, "user_id": 4654710, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/778a810c89fe72ca03e908a115744cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Desperate", "link": "https://stackoverflow.com/users/4654710/desperate"}, "edited": false, "score": 0, "creation_date": 1478794927, "post_id": 40508578, "comment_id": 68304547, "body": "@Desperate: For the output of a fragment shader you can just define a single <code>out vec4 fragcolor;</code> global variable and write to that. The default behavior is, that if there&#39;s only a single output variable in a fragment shader, then <i>that one</i> is the fragment colour output."}, {"owner": {"reputation": 109, "user_id": 4654710, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/778a810c89fe72ca03e908a115744cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Desperate", "link": "https://stackoverflow.com/users/4654710/desperate"}, "edited": false, "score": 0, "creation_date": 1478795472, "post_id": 40508578, "comment_id": 68304933, "body": "that&#39;s what I did and it worked out &#39;alright&#39; I guess.. but now I&#39;m stuck with a new kind of error.. namely &quot;OPENGL_ERROR:&lt;project location&gt;/colors.cpp:541:invalid operation (1282)&quot; which according to some google research probably means that one of the shaders didn&#39;t compile correctly (the output I get now is simply a black window) and once again I&#39;m out of ideas and getting annoyed by this project.."}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "reply_to_user": {"reputation": 109, "user_id": 4654710, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/778a810c89fe72ca03e908a115744cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Desperate", "link": "https://stackoverflow.com/users/4654710/desperate"}, "edited": false, "score": 0, "creation_date": 1478799383, "post_id": 40508578, "comment_id": 68307287, "body": "@Desperate: Well, after compiling a shader you can retrieve an error log of the compiler which exactly tells you where something went wrong. If your coursework framework does not do this, then shame on it. Here&#39;s a shader loader that does error checking: <a href=\"https://gist.github.com/datenwolf/9bdc52a92ac4091220d0b3270dbcf179\" rel=\"nofollow noreferrer\">gist.github.com/datenwolf/9bdc52a92ac4091220d0b3270dbcf179</a> \u2013 you can see how to use it in this little program: <a href=\"https://github.com/datenwolf/pointoverdrawbench/blob/master/solid.c\" rel=\"nofollow noreferrer\">github.com/datenwolf/pointoverdrawbench/blob/master/solid.c</a> (feel also free to use the debuggl stuff of that small project)."}], "tags": [], "owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "is_accepted": true, "score": -1, "last_activity_date": 1478699325, "creation_date": 1478699325, "answer_id": 40508578, "question_id": 40507317, "link": "https://stackoverflow.com/questions/40507317/call-to-gleeinit-gives-exc-bad-access/40508578#40508578", "title": "call to GLeeInit() gives EXC_BAD_ACCESS", "body": "<blockquote>\n  <p>Since I'm working on OSx</p>\n</blockquote>\n\n<p>\u2026 you don't need GLee. Seriously. <em>You don't need GLee, or GLEW, or any other extension loader at all, because you're on MacOS X.</em> Loading modern OpenGL entry points is required only on Windows, Linux, Solaris and BSD. <em>But in MacOS X you get all the OpenGL entry points, including those of OpenGL-3 and -4 <strong>out of the box</strong>.</em></p>\n"}], "owner": {"reputation": 109, "user_id": 4654710, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/778a810c89fe72ca03e908a115744cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Desperate", "link": "https://stackoverflow.com/users/4654710/desperate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 40508578, "answer_count": 1, "score": -1, "last_activity_date": 1478771244, "creation_date": 1478695408, "last_edit_date": 1478771244, "question_id": 40507317, "link": "https://stackoverflow.com/questions/40507317/call-to-gleeinit-gives-exc-bad-access", "title": "call to GLeeInit() gives EXC_BAD_ACCESS", "body": "<p>So I'm trying to solve an exercise for a computer graphics class and I already have a problem trying to get the project to run.</p>\n\n<p>So we just started working with OpenGL and we are using the GLee library. Since I'm working on OSx and the project wasn't really made for this I already had some trouble forcing my mac to use OpenGL 3.0 instead of 2.1 but I figured that a call to GLeeInit() is supposed to fix this. Now this is where I have a problem. When I call GLeeInit() this gives me a bunch of EXC_BAD_ACCESS' and the whole stuff exits with return code 11.</p>\n\n<p>To me it seems that I somewhere try have a null-pointer access but I have no idea what the actual problem is.</p>\n\n<p>EDIT: Taking advice from the first answer I'll simply remove calls to GLee since I probably don't need GLee on OS x. Now I get stuck with the following error \"ERROR: 0:1: '' : version '130' is not supported\" which tells me absolutely nothing..</p>\n\n<p>EDIT: Trying to get my shaders to work here is the code for the shorter one.. so I think it's not as mentioned a problem that I try to compile a 2.0 shader as 3.0 or something like that</p>\n\n<pre><code>\\#version 130\n\nin vec4 color_out;\n\n//=======================================================================\n// Fragment program entry point\n//=======================================================================\nvoid main(void)\n{\n    gl_FragColor = color_out;\n} \n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers", "char"], "comments": [{"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 4, "creation_date": 1478693944, "post_id": 40506851, "comment_id": 68255933, "body": "<a href=\"http://stackoverflow.com/questions/4824342/returning-a-local-variable-from-function-in-c\">returning a local variable from function in C</a>"}, {"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 1, "creation_date": 1478693965, "post_id": 40506851, "comment_id": 68255947, "body": "Inside your function, <code>char new_array[4][4];</code> declares an array on the stack. This data is lost as soon as your function returns. I suggest you use <code>malloc()</code> to create an array on the heap and return a pointer to that instead."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1478694190, "post_id": 40506851, "comment_id": 68256055, "body": "That function is nonsense. When programming, you actually have to know what you are doing. You can&#39;t just guess with trial &amp; error. How about reading the chapters about arrays and pointers in your C book instead? I&#39;m sure there will be examples."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1478694309, "post_id": 40506851, "comment_id": 68256123, "body": "@P.P. That problem is not just the local variable, but that the OP doesn&#39;t even understand what arrays are nor how they work."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1478694375, "post_id": 40506851, "comment_id": 68256164, "body": "@Lundin That&#39;s just a related link. Not sure why felt you need to ping me on that."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1478694408, "post_id": 40506851, "comment_id": 68256194, "body": "@P.P. Because people are now close-voting this as a duplicate to that link."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478694983, "post_id": 40506851, "comment_id": 68256516, "body": "And C does not support <i>methods</i>, only <i>functions</i>!"}], "answers": [{"tags": [], "owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "is_accepted": true, "score": 2, "last_activity_date": 1478695018, "creation_date": 1478695018, "answer_id": 40507202, "question_id": 40506851, "link": "https://stackoverflow.com/questions/40506851/c-return-of-local-variable-and-wrong-expected-arguments-for-4x4-matrix/40507202#40507202", "title": "C return of local variable and wrong expected arguments for 4x4 matrix", "body": "<p>A function should not return a non-static array declared inside it.</p>\n\n<hr>\n\n<p>Change your main code to:</p>\n\n<pre><code>char arr1[4][4] = {...};\nchar arr2[4][4];\n\nmatrixTranspose(arr1,arr2);\nprintArray(arr1);\nprintArray(arr2);\n</code></pre>\n\n<p>And your function to:</p>\n\n<pre><code>void matrixTranspose(const char input_arr[4][4],char output_arr[4][4])\n{\n    // logic\n}\n</code></pre>\n"}], "owner": {"reputation": 715, "user_id": 1915888, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/711d81924101b6c6ecff04284511e46f?s=128&d=identicon&r=PG", "display_name": "vicR", "link": "https://stackoverflow.com/users/1915888/vicr"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "closed_date": 1478695498, "accepted_answer_id": 40507202, "answer_count": 1, "score": -3, "last_activity_date": 1478695732, "creation_date": 1478693852, "question_id": 40506851, "link": "https://stackoverflow.com/questions/40506851/c-return-of-local-variable-and-wrong-expected-arguments-for-4x4-matrix", "closed_reason": "Duplicate", "title": "C return of local variable and wrong expected arguments for 4x4 matrix", "body": "<p>I'm having a few problems to understandU/implement something small with pointers in c. \nI'm having a 4x4 matrix and i want to transpose it. Its implementation is already working. but know i want to but the logic into methods to make it more fancy. </p>\n\n<pre><code>char arr[4][4] = { //filled } \nprintArray(arr)\n</code></pre>\n\n<p>The first code part only prints the array as i formated it and its working perfectly.</p>\n\n<pre><code>char matrixTranspose(char array[4][4]) {\n\n  char new_array[4][4];\n\n  // logic\n\n  return new_array;\n}\n</code></pre>\n\n<p>So know I want to get back the the transposed matrix but I'm always getting back the warnings:</p>\n\n<blockquote>\n  <p>warning: function returns address of local variable\n  [-Wreturn-local-addr]</p>\n  \n  <p>warning: return makes integer from pointer without a cast [enabledby\n  default]</p>\n</blockquote>\n\n<p>the further steps in my main method would be to just print the new array like:</p>\n\n<pre><code>char new_matrix = matrixTranspose(arr);\nprintArray(new_matrix);\n</code></pre>\n\n<p>which results to the error:</p>\n\n<blockquote>\n  <p>warning: passing argument 1 of 'printArray' makes pointer from integer</p>\n  \n  <p>without a cast [enabled by default] note: expected 'char (*)[4]' but\n  argument is of type 'char'</p>\n</blockquote>\n\n<p>So my question is, why does it have to be a pointer and when do i use the pointer ? I jsut want to overgive the variable the whole way, transpose it give it back and print it, do i need pointes? thanks for any help. </p>\n"}, {"tags": ["c", "i2c", "msp430"], "comments": [{"owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1478696713, "post_id": 40506764, "comment_id": 68257564, "body": "TX/RX is controlled by the master; you should not ever need to change the module configuration for that."}, {"owner": {"reputation": 1043, "user_id": 2148328, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5edcf5f720c9a8bf4d3ecf379e0e35fc?s=128&d=identicon&r=PG", "display_name": "Muckle_ewe", "link": "https://stackoverflow.com/users/2148328/muckle-ewe"}, "reply_to_user": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1478697458, "post_id": 40506764, "comment_id": 68258019, "body": "Hi CL. Ok that&#39;s fine, so the I2C enable/setMode/enableInterrupt should only be done at the start right? If so I have already tried that and had the same affect."}, {"owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1478698336, "post_id": 40506764, "comment_id": 68258580, "body": "What exactly do you mean with &quot;stuck in the start interrupt&quot;?"}, {"owner": {"reputation": 1043, "user_id": 2148328, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5edcf5f720c9a8bf4d3ecf379e0e35fc?s=128&d=identicon&r=PG", "display_name": "Muckle_ewe", "link": "https://stackoverflow.com/users/2148328/muckle-ewe"}, "reply_to_user": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1478699381, "post_id": 40506764, "comment_id": 68259198, "body": "When I suspend the debugger in Code Composer after detecting there has been an issue, the code will jump to the I2C interrupt vector and is in the start interrupt case statement. Subsequent starts and suspends yield the same result."}, {"owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1478699819, "post_id": 40506764, "comment_id": 68259451, "body": "Might be erratum USCI30 or USCI39."}, {"owner": {"reputation": 1043, "user_id": 2148328, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5edcf5f720c9a8bf4d3ecf379e0e35fc?s=128&d=identicon&r=PG", "display_name": "Muckle_ewe", "link": "https://stackoverflow.com/users/2148328/muckle-ewe"}, "reply_to_user": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1478700143, "post_id": 40506764, "comment_id": 68259661, "body": "Thanks for that suggestion, the datasheet revisions look promising and the symptoms seems to match. I&#39;ll have a look at the workarounds to see if they fix the problem"}], "owner": {"reputation": 1043, "user_id": 2148328, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5edcf5f720c9a8bf4d3ecf379e0e35fc?s=128&d=identicon&r=PG", "display_name": "Muckle_ewe", "link": "https://stackoverflow.com/users/2148328/muckle-ewe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 543, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1478693555, "creation_date": 1478693555, "question_id": 40506764, "link": "https://stackoverflow.com/questions/40506764/msp430-i2c-slave-holding-clock-line-low", "title": "MSP430 I2C slave holding clock line low", "body": "<p>I'm more of a high level software guy but have been working on some embedded projects lately so I'm sure there's something obvious I'm missing here, though I have spent over a week trying to debug this and every 'MSP' related link in google is purple at this point... </p>\n\n<p>I currently have an MSP430F5529 set up as an I2C slave device whose only responsibility currently is to receive packets from a master device. The master uses industry grade I2C and has been heavily tested and ruled out as the source of my problem here. I'm using Code composer as my IDE using the TI v15.12.3.LTS compiler.</p>\n\n<p>What is currently happening is the master queries how many packets (of size 62 bytes) the slave can hold, then sends over a few packets which the MSP is just currently discarding. This is happening every 100ms on the master side and for the minimal example below the MSP will always just send back 63 when asked how many packets it can hold. I have tested the master with a Total Phase Aardvark and everything is working fine with that so I'm sure it's a problem on the MSP side. The problem is as follows:</p>\n\n<p>The program will work for 15-20 minutes, sending over tens of thousands of packets. At some point the slave starts to hold the clock line low and when paused in debug mode, is shown to be stuck in the start interrupt. The same sequence of events is happening every single time to cause this.</p>\n\n<p>1) Master queries how many packets the MSP can hold.<br>\n2) A packet is sent successfully<br>\n3) Another packet is attempted but &lt; 62 bytes are received by the MSP (counted by logging how many Rx interrupts I receive). No stop condition is sent so master times out.<br>\n4) Another packet is attempted. A single byte is sent before the stop condition is sent.<br>\n5) Another packet is attempted to be sent. A start interrupt, then a Tx interrupt happens and the device hangs.  </p>\n\n<p>Ignoring the fact that I'm not handling the timeout errors on the master side, something very strange is happening to cause that sequence of events, but that's what happens every single time.</p>\n\n<p>Below is the minimal working example which is reproducing the problem. My particular concern is with the SetUpRx and SetUpTx functions. The examples that the Code Composer Resource Explorer gives only has examples of Rx or Tx, I'm not sure if I'm combining them in the right way. I also tried removing the SetUpRx completely, putting the device into transmit mode and replacing all calls to SetUpTx/Rx with mode = TX_MODE/RX_MODE, which did work but still eventually holds the clock line low. Ultimately I'm not 100% sure on how to set this up to receive both Rx and Tx requests.</p>\n\n<pre><code>#include \"driverlib.h\"\n\n#define SLAVE_ADDRESS           (0x48)\n\n// During main loop, set mode to either RX_MODE or TX_MODE\n// When I2C is finished, OR mode with I2C_DONE, hence upon exit mdoe will be one of I2C_RX_DONE or I2C_TX_DONE\n#define RX_MODE                 (0x01)\n#define TX_MODE                 (0x02)\n#define I2C_DONE                (0x04)\n#define I2C_RX_DONE             (RX_MODE | I2C_DONE)\n#define I2C_TX_DONE             (TX_MODE | I2C_DONE)\n\n\n/**\n * I2C message ids\n */\n#define MESSAGE_ADD_PACKET      (3)\n#define MESSAGE_GET_NUM_SLOTS   (5)\n\nstatic volatile uint8_t mode = RX_MODE;     // current mode, TX or RX\n\nstatic volatile uint8_t rx_buff[64] = {0};  // where to write rx data\nstatic volatile uint8_t* rx_data = rx_buff; // used in rx interrupt\n\nstatic volatile uint8_t tx_len = 0;         // number of bytes to reply with\n\nstatic inline void SetUpRx(void) {\n    // Specify receive mode\n    USCI_B_I2C_setMode(USCI_B0_BASE, USCI_B_I2C_RECEIVE_MODE);\n\n    // Enable I2C Module to start operations\n    USCI_B_I2C_enable(USCI_B0_BASE);\n\n    // Enable interrupts\n    USCI_B_I2C_clearInterrupt(USCI_B0_BASE, USCI_B_I2C_TRANSMIT_INTERRUPT);\n    USCI_B_I2C_enableInterrupt(USCI_B0_BASE, USCI_B_I2C_START_INTERRUPT + USCI_B_I2C_RECEIVE_INTERRUPT + USCI_B_I2C_STOP_INTERRUPT);\n\n    mode = RX_MODE;\n}\n\n\nstatic inline void SetUpTx(void) {\n    //Set in transmit mode\n    USCI_B_I2C_setMode(USCI_B0_BASE, USCI_B_I2C_TRANSMIT_MODE);\n\n    //Enable I2C Module to start operations\n    USCI_B_I2C_enable(USCI_B0_BASE);\n\n    //Enable master trasmit interrupt\n    USCI_B_I2C_clearInterrupt(USCI_B0_BASE, USCI_B_I2C_RECEIVE_INTERRUPT);\n    USCI_B_I2C_enableInterrupt(USCI_B0_BASE, USCI_B_I2C_START_INTERRUPT + USCI_B_I2C_TRANSMIT_INTERRUPT + USCI_B_I2C_STOP_INTERRUPT);\n\n    mode = TX_MODE;\n}\n\n\n/**\n * Parse the incoming message and set up the tx_data pointer and tx_len for I2C reply\n *\n * In most cases, tx_buff is filled with data as the replies that require it either aren't used frequently or use few bytes.\n * Straight pointer assignment is likely better but that means everything will have to be volatile which seems overkill for this\n */\nstatic void DecodeRx(void) {\n    static uint8_t message_id = 0;\n\n    message_id = (*rx_buff);\n    rx_data = rx_buff;\n\n    switch (message_id) {\n    case MESSAGE_ADD_PACKET:        // Add some data...\n        // do nothing for now\n        tx_len = 0;\n\n        break;\n\n    case MESSAGE_GET_NUM_SLOTS:     // How many packets can we send to device\n        tx_len = 1;\n\n        break;\n\n    default:\n        tx_len = 0;\n\n        break;\n    }\n}\n\nvoid main(void) {\n    //Stop WDT\n    WDT_A_hold(WDT_A_BASE);\n\n    //Assign I2C pins to USCI_B0\n    GPIO_setAsPeripheralModuleFunctionInputPin(GPIO_PORT_P3, GPIO_PIN0 + GPIO_PIN1);\n\n    //Initialize I2C as a slave device\n    USCI_B_I2C_initSlave(USCI_B0_BASE, SLAVE_ADDRESS);\n\n    // go into listening mode\n    SetUpRx();\n\n    while(1) {\n        __bis_SR_register(LPM4_bits + GIE);\n\n        // Message received over I2C, check if we have anything to transmit\n        switch (mode) {\n        case I2C_RX_DONE:\n            DecodeRx();\n            if (tx_len &gt; 0) {\n                // start a reply\n                SetUpTx();\n            } else {\n                // nothing to do, back to listening\n                mode = RX_MODE;\n            }\n            break;\n\n        case I2C_TX_DONE:\n            // go back to listening\n            SetUpRx();\n\n            break;\n\n        default:\n            break;\n        }\n    }\n}\n\n/**\n * I2C interrupt routine\n */\n#pragma vector=USCI_B0_VECTOR\n__interrupt void USCI_B0_ISR(void) {\n    switch(__even_in_range(UCB0IV,12)) {\n    case USCI_I2C_UCSTTIFG:\n        break;\n\n    case USCI_I2C_UCRXIFG:\n        *rx_data = USCI_B_I2C_slaveGetData(USCI_B0_BASE);\n        ++rx_data;\n\n        break;\n\n    case USCI_I2C_UCTXIFG:\n        if (tx_len &gt; 0) {\n            USCI_B_I2C_slavePutData(USCI_B0_BASE, 63);\n            --tx_len;\n        }\n\n        break;\n\n    case USCI_I2C_UCSTPIFG:\n        // OR'ing mode will let it be flagged in the main loop\n        mode |= I2C_DONE;\n        __bic_SR_register_on_exit(LPM4_bits);\n\n        break;\n    }\n}\n</code></pre>\n\n<p>Any help on this would be much appreciated!\nThank you!</p>\n"}, {"tags": ["c", "avr"], "comments": [{"owner": {"reputation": 11138, "user_id": 1015327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00d71e011fc61cad60c5ffc9bf48c5ef?s=128&d=identicon&r=PG", "display_name": "JimmyB", "link": "https://stackoverflow.com/users/1015327/jimmyb"}, "edited": false, "score": 1, "creation_date": 1478692138, "post_id": 40506140, "comment_id": 68254958, "body": "&quot;I assume the address goes wrong because I&#39;m using integers and hexadecimals inconsistently.&quot; - That assumption is wrong. decimal, binary, hexa-decimal and octal literals are all perfectly compatible."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1478692513, "post_id": 40506140, "comment_id": 68255181, "body": "Indeed the bug is not related to hex, but something else. It will be impossible for anyone to re-produce it with the code given."}, {"owner": {"reputation": 11138, "user_id": 1015327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00d71e011fc61cad60c5ffc9bf48c5ef?s=128&d=identicon&r=PG", "display_name": "JimmyB", "link": "https://stackoverflow.com/users/1015327/jimmyb"}, "edited": false, "score": 1, "creation_date": 1478692643, "post_id": 40506140, "comment_id": 68255258, "body": "Try and run gcc with the <code>-save-temps</code> option. Then locate the file <code>&lt;c-filename&gt;.i</code> and see what e.g. <code>loadingAddr</code> gets really initialized to."}], "answers": [{"tags": [], "owner": {"reputation": 1447, "user_id": 6746897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1eb640fcdc6847c55c189ceddb6afca5?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/6746897/julien"}, "is_accepted": true, "score": 0, "last_activity_date": 1479799778, "creation_date": 1479799778, "answer_id": 40736071, "question_id": 40506140, "link": "https://stackoverflow.com/questions/40506140/avr-c-int-to-hexadecimal-address/40736071#40736071", "title": "AVR C: Int to hexadecimal address", "body": "<pre><code>RESERVED_CMP_ROM_SPACE  28000\n</code></pre>\n\n<p>28000 is not page aligned so if your implementation of <code>boot_program_page</code> is the one <a href=\"http://www.nongnu.org/avr-libc/user-manual/group__avr__boot.html\" rel=\"nofollow noreferrer\">here</a> the program will compile and even do something but not write the program you expect.\nIf you read the memory with a debugger after bootload I think you will observe something like a3a1a2b3b1b2c3c1c2  instead of a1a2a3b1b2b3c1c2c3.</p>\n\n<p>Try with <code>RESERVED_CMP_ROM_SPACE  32768</code></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3493202"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 0, "accepted_answer_id": 40736071, "answer_count": 1, "score": 0, "last_activity_date": 1479799778, "creation_date": 1478691645, "question_id": 40506140, "link": "https://stackoverflow.com/questions/40506140/avr-c-int-to-hexadecimal-address", "title": "AVR C: Int to hexadecimal address", "body": "<p>Working with AVR GCC on an Atmega1284P, I used to have the following:</p>\n\n<pre><code>#define CMP_START_ADDR 0x18000\nstatic UInt32 loadingAddr = CMP_START_ADDR;\nstatic UInt32 newCmpAddr = CMP_START_ADDR;\n</code></pre>\n\n<p>Where, e.g. loadingAddr ,  is used as follows somewhere (as an address):</p>\n\n<pre><code>        boot_program_page(loadingAddr,block_page);\n</code></pre>\n\n<p>and where UInt32 is typedef unsigned long UInt32;</p>\n\n<p>Now I want the same setup but as follows:</p>\n\n<pre><code>#define CMP_START_ADDR ROM_SIZE-RESERVED_CMP_ROM_SPACE\n\nstatic UInt8 amount_of_files = 0;\nstatic UInt32 loadingAddr = CMP_START_ADDR;\nstatic UInt32 newCmpAddr = CMP_START_ADDR;\n</code></pre>\n\n<p>Where ROM_SIZE and RESERVED_CMP_ROM_SPACE are respectively defined somewhere as:</p>\n\n<pre><code>    #define ROM_SIZE            FLASHEND\n    #define RESERVED_CMP_ROM_SPACE  28000\n</code></pre>\n\n<p>And FLASHEND is from iom128.h:</p>\n\n<pre><code>#define FLASHEND   0x1FFFF\n</code></pre>\n\n<p>The new code compiles but does not work. I assume the address goes wrong because I'm using integers and hexadecimals inconsistently. How would I most efficiently resolve this?</p>\n"}, {"tags": ["c", "function"], "answers": [{"comments": [{"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 1, "creation_date": 1478692375, "post_id": 40506231, "comment_id": 68255094, "body": "@ManguSinghRajpurohit your first version was bad. This is OK"}], "tags": [], "owner": {"reputation": 8724, "user_id": 2393267, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/PVkBB.jpg?s=128&g=1", "display_name": "Mangu Singh Rajpurohit", "link": "https://stackoverflow.com/users/2393267/mangu-singh-rajpurohit"}, "is_accepted": false, "score": 2, "last_activity_date": 1478692296, "last_edit_date": 1478692296, "creation_date": 1478691968, "answer_id": 40506231, "question_id": 40506092, "link": "https://stackoverflow.com/questions/40506092/functions-and-separating-a-program/40506231#40506231", "title": "Functions and separating a program", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint getLow(int num1, int num2);\nint getHigh(int num1, int num2);\nfloat getAvg(int num1, int num2);\n\nint main()\n{\n    int num1, num2, avres;\n\n    printf(\"Enter two integers:\\n\");\n    scanf(\"%i %i\", &amp;num1, &amp;num2);\n\n    float avg = getAvg(num1, num2);\n    printf(\"The smallest number is %d\", getLow(num1, num2));\n    printf(\"The largest number is %d\", getHigh(num1, num2));\n    printf(\"%f is the average of the two integers\\n\", avg);\n\n    return 0;\n\n}\n\nfloat getAvg(int num1, int num2)\n{\n    return (num1 + num2) / 2.;\n}\n\nint getLow(int num1, int num2)\n{\n    if (num1 &lt; num2)\n    {\n        return num1;\n    }\n    else\n    {\n        return num2;\n    }\n}\n\nint getHigh(int num1, int num2)\n{\n    if (num1 &gt; num2)\n    {\n        return num1;\n    }\n    else\n    {\n        return num2;\n    }\n\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1478692814, "post_id": 40506402, "comment_id": 68255345, "body": "easy with the empty lines there cowboy. To many empty lines can be as bad as too few empty lines. I took the liberty to eliminate the one that were overboard."}], "tags": [], "owner": {"reputation": 147, "user_id": 2699574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cea81fb14d6f5cae2929e9691276284f?s=128&d=identicon&r=PG&f=1", "display_name": "rodelarode", "link": "https://stackoverflow.com/users/2699574/rodelarode"}, "is_accepted": false, "score": 1, "last_activity_date": 1478692624, "last_edit_date": 1478692624, "creation_date": 1478692459, "answer_id": 40506402, "question_id": 40506092, "link": "https://stackoverflow.com/questions/40506092/functions-and-separating-a-program/40506402#40506402", "title": "Functions and separating a program", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nint getLow(int num1, int num2);\nint getHigh(int num1, int num2);\nfloat getAvg(int num1, int num2);\n\nint main()\n{\n    float avg;\n    int num1, num2, low, high;\n\n    printf(\"Enter two integers:\\n\");\n    scanf(\"%i %i\", &amp;num1, &amp;num2);\n\n    low=getLow(num1, num2);\n    high=getHigh(num1, num2);\n    avg=getAvg(num1, num2);\n\n    printf(\"Low: %d, High: %d, Average: %f\", low, high, avg);\n\n    return 0;\n}  \n\nint getLow(int num1, int num2){\n    if (num1 &lt; num2)\n        return num1;\n    return num2;\n}\n\nint getHigh(int num1, int num2){\n    if (num1 &gt; num2)\n        return num1;\n    return num2;\n}\n\nfloat getAvg(int num1, int num2){\n    return (float)(num1 + num2) / 2;\n}\n</code></pre>\n\n<p>Output: </p>\n\n<pre><code>Enter two integers:\n5 6\nLow: 5, High: 6, Average: 5.500000\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 1, "last_activity_date": 1478699724, "creation_date": 1478699724, "answer_id": 40508692, "question_id": 40506092, "link": "https://stackoverflow.com/questions/40506092/functions-and-separating-a-program/40508692#40508692", "title": "Functions and separating a program", "body": "<p>C doesn't allow nested functions - you can't <em>define</em> <code>getLow</code>, <code>getHigh</code>, or <code>getAvg</code> within the body of <code>main</code>.</p>\n\n<p>A function <em>definition</em> may appear before (<code>getHigh</code>) or after (<code>getLow</code>) its caller:</p>\n\n<pre><code>int getHigh( int num1, int num2 )      // function definition, also serves\n{                                      // as a function declaration\n  return num1 &gt; num2 ? num1 : num2;\n}\n\nint getLow( int num1, int num2 );      // function declaration\n\nint main( void )\n{\n  double getAvg( int num1, int num2 ); // function declaration\n  ...\n  high = getHigh( num1, num2 );        // function call\n  low = getLow( num1, num2 );          // function call\n  avg = getAvg( num1, num2 );          // function call\n  ...\n}\n\nint getLow( int num1, int num2 )       // function definition\n{\n  return num1 &lt; num2 ? num1 : num2;\n}\n</code></pre>\n\n<p>A function <em>declaration</em> may appear within its caller (<code>getAvg</code>) or before it (<code>getLow</code>).</p>\n\n<p>A function <em>declaration</em> must be visible before the function is called.  Since a function definition also serves as a declaration, I will typically define a function before its caller (if they're both in the same source file), so my code tends to read from the bottom up.</p>\n"}], "owner": {"reputation": 53, "user_id": 6825441, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/af9bd2ffef4166030a3175db0d812721?s=128&d=identicon&r=PG&f=1", "display_name": "sls1981", "link": "https://stackoverflow.com/users/6825441/sls1981"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1478699724, "creation_date": 1478691455, "last_edit_date": 1478692658, "question_id": 40506092, "link": "https://stackoverflow.com/questions/40506092/functions-and-separating-a-program", "title": "Functions and separating a program", "body": "<p>Basically my homework this week is: </p>\n\n<p>Write three functions:\nOne which when supplied with two integers, returns the lower.\nAnother which returns the higher of two supplied integers.\nAnd a third which returns the average of two supplied integers\nTo test your functions, write a program which prompts for two integers and then\nprints out the lower, then the higher and then the average.\nYour program should include the function prototypes.</p>\n\n<p>Anyway, as I mentioned before, I seem to have real difficulty with this module - even though it is my favourite. </p>\n\n<p>So here is my code so far (embarrassing). I cant work out if my logic should be above or below the int main line. Just really confused overall. I have been trying so hard with this module (far more than all of the others) but still feel like a lost child with it.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint getLow(int num1 int num2);\n\nint getHigh(int num1 int num2);\n\nint getAvg(int num1 int num2);\n\nint main()\n{\n    int lores, hires, avres;\n\n\n    printf(\"Enter two integers:\\n\");\n    scanf(\"%i %i\", &amp;num1, &amp;num2);\n\n    int getLow(int num1, int num2){\n\n    if (num1 &lt; num2){\n        printf(\"%i is the lowest\\n\", num1);}\n      if (num1 &gt; num2){\n        printf(\"%i is the lowest\\n\", num2);}}\n\n   int getLow(int num1, int num2){\n\n    if (num1 &gt; num2){\n        printf(\"%i is the highest\\n\", num1);}\n      if (num1 &lt; num2){\n        printf(\"%i is the highest\\n\", num2);}}\n\n    int getAvg(int num1, int num2)\n\n    getAvg = (num1 + num2) / 2;\n\n     printf(\"%i is the average of the two integers\\n\", getAvg);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "security", "ssl", "openssl"], "comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1478694231, "post_id": 40505923, "comment_id": 68256079, "body": "Check all your return values.  How useful is that comment style of putting your comments way out to the right of your code?  Can you <i>see</i> those comments without having to play around with the scroll bar?  Commenting like that is a bad idea.  And how much time did you spend creating those pretty ASCII-art box comments?"}], "answers": [{"comments": [{"owner": {"reputation": 1517, "user_id": 3420919, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/163b2d7861ae2b7fe5d25e0b86debb11?s=128&d=identicon&r=PG&f=1", "display_name": "RootPhoenix", "link": "https://stackoverflow.com/users/3420919/rootphoenix"}, "edited": false, "score": 0, "creation_date": 1478716289, "post_id": 40508791, "comment_id": 68269133, "body": "Hi, thank you, I used ubuntu 14.04 and the code goes ahead past the error for the method creation.  I get an error during SSL_accept, although normal accept passes and a client connection fd is getting created, how can I solve this."}, {"owner": {"reputation": 5198, "user_id": 186580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51af0a007f1bdc7134c0f02d3a156abb?s=128&d=identicon&r=PG", "display_name": "Oleksandr Kravchuk", "link": "https://stackoverflow.com/users/186580/oleksandr-kravchuk"}, "reply_to_user": {"reputation": 1517, "user_id": 3420919, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/163b2d7861ae2b7fe5d25e0b86debb11?s=128&d=identicon&r=PG&f=1", "display_name": "RootPhoenix", "link": "https://stackoverflow.com/users/3420919/rootphoenix"}, "edited": false, "score": 0, "creation_date": 1478730457, "post_id": 40508791, "comment_id": 68275766, "body": "It doesn&#39;t matter which Ubuntu version you&#39;re using, it was disabled in Ubuntu&#39;s package of SSL v1.0.2g, which you&#39;ve used, therefore you can get back to Ubuntu 16.04 and downgrade your package if you want. Or change SSL server method."}], "tags": [], "owner": {"reputation": 5198, "user_id": 186580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51af0a007f1bdc7134c0f02d3a156abb?s=128&d=identicon&r=PG", "display_name": "Oleksandr Kravchuk", "link": "https://stackoverflow.com/users/186580/oleksandr-kravchuk"}, "is_accepted": false, "score": 1, "last_activity_date": 1478700050, "creation_date": 1478700050, "answer_id": 40508791, "question_id": 40505923, "link": "https://stackoverflow.com/questions/40505923/ssl-accept-fails-ssl-get-error-returns-1/40508791#40508791", "title": "SSL_Accept fails, SSL_get_error returns 1", "body": "<p>Apparently, SSLv3 has been disabled in packages distributed with some Linux distros (e.g. Ubuntu 16.04):</p>\n\n<blockquote>\n  <p>openssl (1.0.2g-1ubuntu1) xenial; urgency=medium</p>\n  \n  <ul>\n  <li>Merge with Debian, remaining changes.\n  \n  <ul>\n  <li>Disable SSLv3 without changing ABI:\n  \n  <ul>\n  <li>debian/patches/no-sslv3.patch: Disable SSLv3 without using the\n  no-ssl3-method option</li>\n  <li>debian/rules: don't use no-ssl3-method, don't bump soname</li>\n  <li>debian/patches/engines-path.patch: don't bump soname</li>\n  <li>debian/patches/version-script.patch: don't bump soname</li>\n  <li>debian/patches/soname.patch: removed</li>\n  <li>debian/lib*: don't bump soname</li>\n  </ul></li>\n  </ul></li>\n  </ul>\n</blockquote>\n\n<p>Therefore you need to use another method:</p>\n\n<pre><code>method = SSLv3_server_method();\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 703, "user_id": 2794395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Pbxie.jpg?s=128&g=1", "display_name": "fiorentinoing", "link": "https://stackoverflow.com/users/2794395/fiorentinoing"}, "edited": false, "score": 0, "creation_date": 1571521024, "post_id": 40520533, "comment_id": 103270815, "body": "s_client is a great place to start to understand what&#39;s going on with SSL errors"}], "tags": [], "owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "is_accepted": false, "score": 1, "last_activity_date": 1478755797, "creation_date": 1478755797, "answer_id": 40520533, "question_id": 40505923, "link": "https://stackoverflow.com/questions/40505923/ssl-accept-fails-ssl-get-error-returns-1/40520533#40520533", "title": "SSL_Accept fails, SSL_get_error returns 1", "body": "<p>The man page for <a href=\"http://www.openssl.org/docs/man1.0.2/ssl/SSL_accept.html\" rel=\"nofollow noreferrer\"><code>SSL_accept</code></a> states:</p>\n\n<blockquote>\n  <p>If the underlying BIO is non-blocking, SSL_accept() will also return\n  when the underlying BIO could not satisfy the needs of SSL_accept() to\n  continue the handshake, indicating the problem by the return value -1.\n  In this case a call to SSL_get_error() with the return value of\n  SSL_accept() will yield SSL_ERROR_WANT_READ or SSL_ERROR_WANT_WRITE.\n  The calling process then must repeat the call after taking appropriate\n  action to satisfy the needs of SSL_accept()...</p>\n</blockquote>\n\n<p>I believe that means your code should look something like:</p>\n\n<pre><code>while (1)\n{\n    int acc = SSL_accept(ssl);\n    if (acc == 0)\n    {\n        /* Hard error */\n        exit(-1);\n    }\n    else if (acc == -1)\n    {\n        int err = SSL_get_error(ssl, ret);\n        if (err == SSL_ERROR_WANT_READ)\n        {\n            /* Wait for data to be read */\n        }\n        else if (err == SSL_ERROR_WANT_WRITE)\n        {\n            /* Write data to continue */\n        }\n        else if (err == SSL_ERROR_SYSCALL || err == SSL_ERROR_SSL)\n        {\n            /* Hard error */\n            exit(-1);\n        }\n        else if (err == SSL_ERROR_ZERO_RETURN)\n        {\n            /* Same as error */\n            exit(-1);\n        }\n    }\n    else\n    {\n        /* Continue */\n        break;\n    }\n}\n</code></pre>\n\n<p>OpenSSL has sample code in <code>&lt;openssl src&gt;/apps/s_client.c</code> and <code>&lt;openssl src&gt;/apps/s_server.c</code></p>\n"}], "owner": {"reputation": 1517, "user_id": 3420919, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/163b2d7861ae2b7fe5d25e0b86debb11?s=128&d=identicon&r=PG&f=1", "display_name": "RootPhoenix", "link": "https://stackoverflow.com/users/3420919/rootphoenix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7338, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1478755797, "creation_date": 1478690913, "last_edit_date": 1478753834, "question_id": 40505923, "link": "https://stackoverflow.com/questions/40505923/ssl-accept-fails-ssl-get-error-returns-1", "title": "SSL_Accept fails, SSL_get_error returns 1", "body": "<p>I am new to SSL socket programming and my first task is to get the SSL server client to be working and understanding.</p>\n\n<p>I have obtained the server and client sources floating on the web and compiled them against my openssl library (compiled from source).</p>\n\n<p>When I start the server I am able to create a normal clientfd using accept system call, however SSL_accept fails.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>clientsocketfd = accept(serversocketfd, NULL, 0);\nserverssl = SSL_new(ssl_server_ctx);\nif(!serverssl)\n{\n    printf(\"Error SSL_new\\n\");\n    return -1;\n}\nSSL_set_fd(serverssl, clientsocketfd);\n\nif((ret = SSL_accept(serverssl))!= 1)\n{\n    printf(\"Handshake Error %d\\n\", SSL_get_error(serverssl, ret));\n    return -1;\n}\n</code></pre>\n\n<p><code>SSL_accept</code> fails printing <code>Handshake error 1</code>.</p>\n\n<p>Why is <code>SSL_accept</code> failing with error 1?</p>\n\n<hr>\n\n<p>Server source:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>/*---------------------------------------------------------------------*/\n/*--- main - create SSL socket server.                              ---*/\n/*---------------------------------------------------------------------*/\nint main(int count, char *strings[])\n{   SSL_CTX *ctx;\n    int server;\n    char *portnum;\n\n    if ( count != 2 )\n    {\n        printf(\"Usage: %s &lt;portnum&gt;\\n\", strings[0]);\n        exit(0);\n    }\n    portnum = strings[1];\n    SSL_library_init();\n    ctx = InitServerCTX();                                                              /* initialize SSL */\n    LoadCertificates(ctx, \"newreq.pem\", \"newreq.pem\");  /* load certs */\n    server = OpenListener(atoi(portnum));                               /* create server socket */\n    while (1)\n    {   struct sockaddr_in addr;\n        int len = sizeof(addr);\n        SSL *ssl;\n\n        int client = accept(server, (struct sockaddr*)&amp;addr, &amp;len);             /* accept connection as usual */\n        printf(\"Connection: %s:%d\\n\",\n                inet_ntoa(addr.sin_addr), ntohs(addr.sin_port));\n        ssl = SSL_new(ctx);                                             /* get new SSL state with context */\n        SSL_set_fd(ssl, client);                                                /* set connection socket to SSL state */\n        Servlet(ssl);                                                                   /* service connection */\n    }\n    close(server);                                                                              /* close server socket */\n    SSL_CTX_free(ctx);                                                                  /* release context */\n}\n\n/*---------------------------------------------------------------------*/\n/*--- InitServerCTX - initialize SSL server  and create context     ---*/\n/*---------------------------------------------------------------------*/\nSSL_CTX* InitServerCTX(void)\n{   SSL_METHOD *method;\n    SSL_CTX *ctx;\n\n    OpenSSL_add_all_algorithms();               /* load &amp; register all cryptos, etc. */\n    SSL_load_error_strings();                   /* load all error messages */\n    method = SSLv3_server_method();             /* create new server-method instance */\n    ctx = SSL_CTX_new(method);                  /* create new context from method */\n    if ( ctx == NULL )\n    {\n        ERR_print_errors_fp(stderr);\n        abort();\n    }\n    return ctx;\n}\n</code></pre>\n\n<p>The OpenSSL version and compilation options are as folows:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>/usr/bin/openssl version -a\nOpenSSL 1.0.2g  1 Mar 2016\nbuilt on: reproducible build, date unspecified\nplatform: debian-amd64\noptions:  bn(64,64) rc4(16x,int) des(idx,cisc,16,int) blowfish(idx) \ncompiler: cc -I. -I.. -I../include  -fPIC -DOPENSSL_PIC -DOPENSSL_THREADS -D_REENTRANT \n-DDSO_DLFCN -DHAVE_DLFCN_H -m64 -DL_ENDIAN -g -O2 -fstack-protector-strong \n-Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 -Wl,\n-Bsymbolic-functions -Wl,-z,relro -Wa,--noexecstack -Wall -DMD32_REG_T=int \n-DOPENSSL_IA32_SSE2 -DOPENSSL_BN_ASM_MONT \n-DOPENSSL_BN_ASM_MONT5 -DOPENSSL_BN_ASM_GF2m -DSHA1_ASM -DSHA256_ASM \n-DSHA512_ASM -DMD5_ASM -DAES_ASM -DVPAES_ASM -DBSAES_ASM \n-DWHIRLPOOL_ASM -DGHASH_ASM -DECP_NISTZ256_ASM\nOPENSSLDIR: \"/usr/lib/ssl\"\n</code></pre>\n"}, {"tags": ["c", "sockets", "post", "browser", "get"], "comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1478690401, "post_id": 40505640, "comment_id": 68254003, "body": "I think you need to resolve ip address of <code>www.google.co.in</code> for the second request."}, {"owner": {"reputation": 488, "user_id": 6402817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08853f25a9f1ac361a5e10bd4816c740?s=128&d=identicon&r=PG&f=1", "display_name": "kaiser", "link": "https://stackoverflow.com/users/6402817/kaiser"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1478691008, "post_id": 40505640, "comment_id": 68254321, "body": "That doesn&#39;t work either. Keeps on replying with This document has been MOVED"}], "answers": [{"comments": [{"owner": {"reputation": 488, "user_id": 6402817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08853f25a9f1ac361a5e10bd4816c740?s=128&d=identicon&r=PG&f=1", "display_name": "kaiser", "link": "https://stackoverflow.com/users/6402817/kaiser"}, "edited": false, "score": 0, "creation_date": 1478691517, "post_id": 40505978, "comment_id": 68254617, "body": "Alright I see your logic, I tried changing the &amp;amp; to &amp; but still it didn&#39;t work. Probably my User-Agent is not defined thats why it doesn&#39;t work."}, {"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "reply_to_user": {"reputation": 488, "user_id": 6402817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08853f25a9f1ac361a5e10bd4816c740?s=128&d=identicon&r=PG&f=1", "display_name": "kaiser", "link": "https://stackoverflow.com/users/6402817/kaiser"}, "edited": false, "score": 0, "creation_date": 1478693094, "post_id": 40505978, "comment_id": 68255507, "body": "@kaiser You should also consider sending other headers such as <code>Referer</code> and <code>Accept</code>. The more  your code behaves like an ordinary browser, the better your chances of getting a valid response."}], "tags": [], "owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "is_accepted": false, "score": 1, "last_activity_date": 1478691083, "creation_date": 1478691083, "answer_id": 40505978, "question_id": 40505640, "link": "https://stackoverflow.com/questions/40505640/get-request-google/40505978#40505978", "title": "GET request google", "body": "<p>You're requesting the wrong URL.</p>\n\n<p>Take a closer look at the URL given in the <code>Location</code> header:</p>\n\n<pre><code>http://www.google.co.in/?gfe_rd=cr&amp;ei=1wIjWPqZA6DmugSY4I-IDw\n</code></pre>\n\n<p>and the URL in the HTML source:</p>\n\n<pre><code>http://www.google.co.in/?gfe_rd=cr&amp;amp;ei=1wIjWPqZA6DmugSY4I-IDw\n</code></pre>\n\n<p>You'll notice that the second of these is slightly different, because ampersands have to be encoded as <code>&amp;amp;</code> in HTML documents.</p>\n\n<p>If you use the URL in the <code>Location</code> header, you stand a better chance of success. However, you might still have problems if the server's behaviour depends on other factors. For example, a lot of websites will reject requests without a recognisable <code>User-Agent</code> request header.</p>\n"}], "owner": {"reputation": 488, "user_id": 6402817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08853f25a9f1ac361a5e10bd4816c740?s=128&d=identicon&r=PG&f=1", "display_name": "kaiser", "link": "https://stackoverflow.com/users/6402817/kaiser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2275, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1478691083, "creation_date": 1478690069, "question_id": 40505640, "link": "https://stackoverflow.com/questions/40505640/get-request-google", "title": "GET request google", "body": "<p>I'm trying to implement a simple web browser in C.\nWhen ever I send a get request to google.com using</p>\n\n<pre><code>    GET / HTTP/1.1\\r\\n\\r\\n\n</code></pre>\n\n<p>I receive</p>\n\n<pre><code>HTTP/1.1 302 Found\nCache-Control: private\nContent-Type: text/html; charset=UTF-8\nLocation: http://www.google.co.in/?gfe_rd=cr&amp;ei=1wIjWPqZA6DmugSY4I-IDw\nContent-Length: 261\nDate: Wed, 09 Nov 2016 11:04:55 GMT\n\n&lt;HTML&gt;&lt;HEAD&gt;&lt;meta http-equiv=\"content-type\" content=\"text/html;charset=utf-8\"&gt;\n&lt;TITLE&gt;302 Moved&lt;/TITLE&gt;&lt;/HEAD&gt;&lt;BODY&gt;\n&lt;H1&gt;302 Moved&lt;/H1&gt;\nThe document has moved\n&lt;A HREF=\"http://www.google.co.in/?gfe_rd=cr&amp;amp;ei=1wIjWPqZA6DmugSY4I-IDw\"&gt;here&lt;/A&gt;.\n&lt;/BODY&gt;&lt;/HTML&gt;\n</code></pre>\n\n<p>Subsequently I send another GET request</p>\n\n<pre><code>GET /?gfe_rd=cr&amp;amp;ei=1wIjWPqZA6DmugSY4I-IDw HTTP/1.1\\r\\n\\r\\n\n</code></pre>\n\n<p>And I receive error code 404 not found.</p>\n\n<p>If not this, what should be the GET request to redirect me to the site. I find ip address of google using</p>\n\n<pre><code>char *hostname = \"www.google.com\";\nstruct hostent *he;\nhe = gethostbyname( hostname );\n</code></pre>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1478689852, "post_id": 40505521, "comment_id": 68253699, "body": "So the numbers and the two strings are separated by a literal <code>#</code> character? For all the records you read? Then you can place the <code>#</code> in the format string, and <code>fscanf</code> will try to match it."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 2, "creation_date": 1478690066, "post_id": 40505521, "comment_id": 68253800, "body": "Sidenote: For checking if <code>fscanf</code> succeeds or fails, you should check with <code>== 3</code> instead of <code>&gt; 0</code>. You want to make sure that all 3 parameters are read correctly."}], "owner": {"user_type": "does_not_exist", "display_name": "user7135972"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1478689734, "creation_date": 1478689734, "question_id": 40505521, "link": "https://stackoverflow.com/questions/40505521/reading-a-text-file-up-to-a-certain-character-and-store-different-varibles", "title": "Reading a text file up to a certain character and store different varibles", "body": "<p>i have a text file and it includes data like this;</p>\n\n<p>int#char#char</p>\n\n<p>i have to read this and store in (\"%d, %s, %s\", &amp;number, name, surname) and of course i have many data it has to be in while loop.</p>\n\n<p>i tried but i didnt get how to read until certain character (in my case it is #)</p>\n\n<pre><code>void readText()\n{\n      int number;\n      char firstName[20];\n      char secondName[20];\n\n      FILE *fp = fopen (\"stack.txt\", \"r\");\n      if (fp == NULL) {\n        fprintf (stderr, \"file error\\n\");\n        return 255;\n      }\n\n      while (fscanf(fp,\"%d %s %s\", &amp;number, firtName, secondName)&gt;0);\n      fclose (fp);\n}\n</code></pre>\n"}, {"tags": ["c", "system-calls", "pid"], "comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 2, "creation_date": 1478690514, "post_id": 40505490, "comment_id": 68254067, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/22346545/what-is-structure-pointer-current-pointing-to-in-linux-kernel-code\">What is Structure pointer &quot;current&quot; pointing to in Linux kernel code?</a>"}, {"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1478697962, "post_id": 40505490, "comment_id": 68258337, "body": "I think you have a fundamental, and common, misunderstanding of how kernel mode works. Kernel code runs in the context of the current process, just in supervisor mode rather than user mode. So the current process is what is currently set up to run (e.g. has page tables loaded). Different OS&#39;s have different ways of providing basic Process Information to the kernel."}], "owner": {"reputation": 33, "user_id": 7122781, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09debced6465f7bde067fc677c9517c5?s=128&d=identicon&r=PG&f=1", "display_name": "Alex.P", "link": "https://stackoverflow.com/users/7122781/alex-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1478697184, "creation_date": 1478689649, "last_edit_date": 1478697184, "question_id": 40505490, "link": "https://stackoverflow.com/questions/40505490/which-process-made-the-systemcall", "title": "Which process made the systemcall", "body": "<p>How can i find out which process made a system call and switched the program from user to kernel mode without passing the pid to system call? Is there a function that returns this process pid, or a variable that it is stored into?</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1478689785, "post_id": 40505383, "comment_id": 68253649, "body": "<code>if(a[i] &lt;= &#39;9&#39;)</code> --&gt; <code>if ((a[i] &lt; &#39;0&#39;) || (a[i] &gt; &#39;9&#39;))</code>"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1478690096, "post_id": 40505383, "comment_id": 68253824, "body": "@WhozCraig Right! Edited."}], "answers": [{"comments": [{"owner": {"reputation": 13431, "user_id": 7051394, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/035a36a4ffaec4c1c1efd85e34181ace?s=128&d=identicon&r=PG&f=1", "display_name": "Right leg", "link": "https://stackoverflow.com/users/7051394/right-leg"}, "edited": false, "score": 0, "creation_date": 1478690117, "post_id": 40505586, "comment_id": 68253838, "body": "I would have said &quot;at the output stage&quot;. Just in case the non-numeric characters are actually wanted. This fulfills the demand, since OP just want to print the values but the numbers."}, {"owner": {"reputation": 15, "user_id": 7100275, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/HTTWp.jpg?s=128&g=1", "display_name": "Terminatorka", "link": "https://stackoverflow.com/users/7100275/terminatorka"}, "edited": false, "score": 0, "creation_date": 1478690662, "post_id": 40505586, "comment_id": 68254140, "body": "I wanted to skip &#39;\\n&#39; otherwise it would put it in my char array and I didn&#39;t like it because I would loose half of the entered data. Thanks for the answer."}], "tags": [], "owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "is_accepted": false, "score": 0, "last_activity_date": 1478689920, "creation_date": 1478689920, "answer_id": 40505586, "question_id": 40505383, "link": "https://stackoverflow.com/questions/40505383/delete-numbers-from-an-array/40505586#40505586", "title": "Delete numbers from an array?", "body": "<p>The easiest way is to skip numbers at the input stage:</p>\n\n<pre><code>        while(i&lt;25){\n                c=getchar();\n                if(c =='\\n'){\n                        /* I don't know what you are trying to do here */\n                        a[i] != c; \n                }else if(c == EOF){\n                        break;\n                }else if(c &gt;= '0' &amp;&amp; c &lt;= '9'){\n                    /* number - skip it */\n                }else{\n                        a[i] = c;\n                        i++;\n                        d++;\n                }\n        }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1478690215, "post_id": 40505610, "comment_id": 68253891, "body": "Fixed it. Thanks @LPs"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1478690273, "post_id": 40505610, "comment_id": 68253922, "body": "Not yet. You should delete <code>=</code> from conditions and <code>&amp;&amp;</code> should be <code>||</code>"}], "tags": [], "owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "is_accepted": true, "score": 0, "last_activity_date": 1478690289, "last_edit_date": 1478690289, "creation_date": 1478689988, "answer_id": 40505610, "question_id": 40505383, "link": "https://stackoverflow.com/questions/40505383/delete-numbers-from-an-array/40505610#40505610", "title": "Delete numbers from an array?", "body": "<p>If you just want to print the character's, you do not need to delete them from the array. Just print the ones that are not integers.</p>\n\n<pre><code>void element(char a[], int d){\n  int i;\n  for(i=0;i&lt;d;i++){\n    if(!((a[i] &gt;= '0') &amp;&amp;(a[i] &lt;= '9')))\n       printf(\"%c\",a[i]);\n  }\n}    \n</code></pre>\n\n<p>If, however, you want to use the array of characters later, and you have no use of the array of integers, you can filter them out at the input stage. i.e. You use the <code>if</code> condition above at the time of reading the array and the array will only contain characters. You can then print normally.</p>\n"}, {"tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": false, "score": 0, "last_activity_date": 1478690044, "creation_date": 1478690044, "answer_id": 40505631, "question_id": 40505383, "link": "https://stackoverflow.com/questions/40505383/delete-numbers-from-an-array/40505631#40505631", "title": "Delete numbers from an array?", "body": "<p>You can simply do</p>\n\n<pre><code>void element(char a[], int d)\n{\n   int i;\n\n   for(i=0;i&lt;d;i++)\n   {\n      if ((a[i] &lt; '0') || (a[i] &gt; '9'))\n      {\n          printf(\"%c\",a[i]);\n      }\n   }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "is_accepted": false, "score": 0, "last_activity_date": 1478691059, "last_edit_date": 1478691059, "creation_date": 1478690396, "answer_id": 40505749, "question_id": 40505383, "link": "https://stackoverflow.com/questions/40505383/delete-numbers-from-an-array/40505749#40505749", "title": "Delete numbers from an array?", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n\nvoid element(char a[], int *d){\n    int i, j;\n\n    for(j = i = 0; i &lt; *d; i++){\n        if(!isdigit((unsigned char)a[i])){\n            a[j++] = a[i];\n        }\n    }\n    *d = j;//Reflect size change by deletion\n    for(i = 0; i &lt; *d; i++){\n        printf(\"%c\", a[i]);\n    }\n    putchar('\\n');\n}\n\nint main(void){\n    char a[25];\n    int c, d, i = 0;\n\n    while(i &lt; 25 &amp;&amp; (c=getchar())!= EOF &amp;&amp; c != '\\n'){\n        a[i++] = c;\n    }\n    d = i;\n\n    putchar('\\n');\n    element(a, &amp;d);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1058, "user_id": 6597572, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/aa5e67631743095cc01e0981d0fa179e?s=128&d=identicon&r=PG&f=1", "display_name": "Samarth Kejriwal", "link": "https://stackoverflow.com/users/6597572/samarth-kejriwal"}, "is_accepted": false, "score": 2, "last_activity_date": 1478690728, "last_edit_date": 1478690728, "creation_date": 1478690411, "answer_id": 40505757, "question_id": 40505383, "link": "https://stackoverflow.com/questions/40505383/delete-numbers-from-an-array/40505757#40505757", "title": "Delete numbers from an array?", "body": "<p>In your <code>void element(char a[], int d)</code> function just put the following code -->></p>\n\n<pre><code>          int i;\n\n            for(i=0;i&lt;d;i++){\n                    if(a[i] &gt; '9' || a[i]&lt; '0')\n                    {\n                        printf(\"%c\",a[i]);\n\n                    }\n\n            }\n</code></pre>\n\n<p>The above code will print all the characters other than Numbers (0-9).And if you want to remove the Special characters also then Do refer to the ASCII values of the special characters and mention it in your code </p>\n"}, {"tags": [], "owner": {"reputation": 1263, "user_id": 7099984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb73d10a9ce4b91379b514722601f9ee?s=128&d=identicon&r=PG&f=1", "display_name": "myxaxa", "link": "https://stackoverflow.com/users/7099984/myxaxa"}, "is_accepted": false, "score": 1, "last_activity_date": 1478691932, "last_edit_date": 1478691932, "creation_date": 1478690815, "answer_id": 40505887, "question_id": 40505383, "link": "https://stackoverflow.com/questions/40505383/delete-numbers-from-an-array/40505887#40505887", "title": "Delete numbers from an array?", "body": "<p>you can use isalpha to check for a letter-character</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define MAX_SIZE 25\n\nint main(){\n\n        char a[MAX_SIZE];\n        int i = 0,d = 0;\n        char c;\n\n        do {\n            c = getchar();\n            if (isalpha(c)) {\n                a[d++] = c;\n            }\n            ++i;\n        } while (c != EOF &amp;&amp; i &lt; MAX_SIZE);\n        putchar('\\n');\n\n        for(i = 0; i &lt; d; ++i) {\n            printf(\"%c\",a[i]);\n        }\n\n        return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15, "user_id": 7100275, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/HTTWp.jpg?s=128&g=1", "display_name": "Terminatorka", "link": "https://stackoverflow.com/users/7100275/terminatorka"}, "is_accepted": false, "score": 0, "last_activity_date": 1478708481, "creation_date": 1478708481, "answer_id": 40511574, "question_id": 40505383, "link": "https://stackoverflow.com/questions/40505383/delete-numbers-from-an-array/40511574#40511574", "title": "Delete numbers from an array?", "body": "<p>All the answers are giving me what I want to see.Thank you for all the different approaches and helping me in learning! \n@Klas Lindback , @samarth kejriwal,@myxaxa, @BLUEPIXY, @LPs, @Rishikesh Raje</p>\n"}], "owner": {"reputation": 15, "user_id": 7100275, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/HTTWp.jpg?s=128&g=1", "display_name": "Terminatorka", "link": "https://stackoverflow.com/users/7100275/terminatorka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 0, "accepted_answer_id": 40505610, "answer_count": 7, "score": 0, "last_activity_date": 1478708481, "creation_date": 1478689304, "last_edit_date": 1478690103, "question_id": 40505383, "link": "https://stackoverflow.com/questions/40505383/delete-numbers-from-an-array", "title": "Delete numbers from an array?", "body": "<p>I am trying to make a program that asks the user to start typing different characters(doesn't matter what) until 'EOF'. After that I have to \"printf\" this array without the numbers. \nSo something like this:</p>\n\n<pre><code>'User input':123asd (! only example)\n\n'Output':asd (! only example)\n</code></pre>\n\n<p>My problem is that I can't figure out the function. I was able to achieve:</p>\n\n<pre><code>User input:asd123   (!only example)\n\nOutput:asd          (!only example)\n</code></pre>\n\n<p>But when I turn it around<code>(first example!)</code> it doesn't work at all.\nEven something like you are stupid use pointers instead of this would be great. I am just trying to figure it if its possible this way!!</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid element(char a[], int d) {\n    int i;\n\n    for (i = 0; i &lt;d; i++) {\n        if (a[i] &lt;= '9') {\n            /*\n            ..........\n            */\n        }\n    }\n    for (i = 0; i &lt; d; i++) {\n        printf(\"%c\", a[i]);\n    }\n}\n\nint main() {\n    char a[25];\n    int c, i, d;\n    i = 0;\n    d = 0;\n\n    while (i &lt; 25) {\n        c = getchar();\n        if (c =='\\n') {\n            a[i] != c;\n        } else if (c == EOF) {\n            break;\n        } else {\n            a[i] = c;\n            i++;\n            d++;\n        }\n    }\n    putchar('\\n');\n\n    element(a, d);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "macros", "c-preprocessor", "counter"], "comments": [{"owner": {"reputation": 35543, "user_id": 149530, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b6c8b04130af49735de5be666d67c00?s=128&d=identicon&r=PG", "display_name": "Michael Foukarakis", "link": "https://stackoverflow.com/users/149530/michael-foukarakis"}, "edited": false, "score": 0, "creation_date": 1478688549, "post_id": 40505091, "comment_id": 68253008, "body": "If the IDs are statically defined, they could go into an <code>enum</code>, right?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1478688730, "post_id": 40505091, "comment_id": 68253112, "body": "So you want one counter for events, and one for modules, and those two counters should be separate? Then why not just use two variables, initialized to zero and incremented in your macros? E.g. <code>int eventId = eventIdCounter++;</code>"}, {"owner": {"reputation": 91, "user_id": 3448481, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1123485953/picture?type=large", "display_name": "Elamre", "link": "https://stackoverflow.com/users/3448481/elamre"}, "edited": false, "score": 0, "creation_date": 1478688742, "post_id": 40505091, "comment_id": 68253125, "body": "They could, yes, but I like to keep it as easy as possible to register an event. Only one line is sufficient now. Don&#39;t want to have to change an enum all the time I add or remove or change an event"}, {"owner": {"reputation": 91, "user_id": 3448481, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1123485953/picture?type=large", "display_name": "Elamre", "link": "https://stackoverflow.com/users/3448481/elamre"}, "edited": false, "score": 0, "creation_date": 1478688819, "post_id": 40505091, "comment_id": 68253158, "body": "Sorry, I left out some detail. I&#39;m using a struct to hold the information. And I need constants to initialize that. Compiler restrictions :( . So i can&#39;t use two variables"}, {"owner": {"reputation": 1836, "user_id": 351861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/540239cb3a1089fcb53aae8abea1cfdd?s=128&d=identicon&r=PG&f=1", "display_name": "specializt", "link": "https://stackoverflow.com/users/351861/specializt"}, "edited": false, "score": 0, "creation_date": 1478691777, "post_id": 40505091, "comment_id": 68254748, "body": "i think someone should mention that you&#39;re trying to <a href=\"http://www.boost.org/doc/libs/1_62_0/doc/html/signals/tutorial.html\" rel=\"nofollow noreferrer\">re-invent the wheel</a>, which is <b>always</b> a bad idea and doesnt even serve an educational purpose."}, {"owner": {"reputation": 91, "user_id": 3448481, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1123485953/picture?type=large", "display_name": "Elamre", "link": "https://stackoverflow.com/users/3448481/elamre"}, "edited": false, "score": 0, "creation_date": 1478692152, "post_id": 40505091, "comment_id": 68254965, "body": "For an actual project with the goal of achieving I would certainly not reinvent the wheel. But the goal of this project is learning."}, {"owner": {"reputation": 1836, "user_id": 351861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/540239cb3a1089fcb53aae8abea1cfdd?s=128&d=identicon&r=PG&f=1", "display_name": "specializt", "link": "https://stackoverflow.com/users/351861/specializt"}, "edited": false, "score": 0, "creation_date": 1478693331, "post_id": 40505091, "comment_id": 68255629, "body": "you wont learn much from the wheel - it has always been like that. Pupils dont learn from their own wheels <b>but</b> they <b>do</b> learn from finished cars or even car dealerships. If you want to learn you need to attack worthy tutorials, do proven exercises and <b>read</b> a lot - if you&#39;re autodidactic you might as well have a detailed look into completed libraries, sometimes you discover fascinating <i>(or shocking)</i> stuff in there"}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 3448481, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1123485953/picture?type=large", "display_name": "Elamre", "link": "https://stackoverflow.com/users/3448481/elamre"}, "edited": false, "score": 0, "creation_date": 1478688930, "post_id": 40505241, "comment_id": 68253227, "body": "That would work, yes, but now I need to maintain two enum lists."}, {"owner": {"reputation": 35543, "user_id": 149530, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b6c8b04130af49735de5be666d67c00?s=128&d=identicon&r=PG", "display_name": "Michael Foukarakis", "link": "https://stackoverflow.com/users/149530/michael-foukarakis"}, "reply_to_user": {"reputation": 91, "user_id": 3448481, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1123485953/picture?type=large", "display_name": "Elamre", "link": "https://stackoverflow.com/users/3448481/elamre"}, "edited": false, "score": 0, "creation_date": 1478689342, "post_id": 40505241, "comment_id": 68253423, "body": "What kind of maintenance are you referring to?"}, {"owner": {"reputation": 91, "user_id": 3448481, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1123485953/picture?type=large", "display_name": "Elamre", "link": "https://stackoverflow.com/users/3448481/elamre"}, "edited": false, "score": 0, "creation_date": 1478690234, "post_id": 40505241, "comment_id": 68253898, "body": "Well, I would have to register the event somewhere, and I would have to add it to an enum"}, {"owner": {"reputation": 35543, "user_id": 149530, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b6c8b04130af49735de5be666d67c00?s=128&d=identicon&r=PG", "display_name": "Michael Foukarakis", "link": "https://stackoverflow.com/users/149530/michael-foukarakis"}, "reply_to_user": {"reputation": 91, "user_id": 3448481, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1123485953/picture?type=large", "display_name": "Elamre", "link": "https://stackoverflow.com/users/3448481/elamre"}, "edited": false, "score": 0, "creation_date": 1478690299, "post_id": 40505241, "comment_id": 68253948, "body": "You have to do the typing at some point, you&#39;re not getting away from that. Check out the edit."}], "tags": [], "owner": {"reputation": 35543, "user_id": 149530, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b6c8b04130af49735de5be666d67c00?s=128&d=identicon&r=PG", "display_name": "Michael Foukarakis", "link": "https://stackoverflow.com/users/149530/michael-foukarakis"}, "is_accepted": false, "score": 2, "last_activity_date": 1479033895, "last_edit_date": 1479033895, "creation_date": 1478688867, "answer_id": 40505241, "question_id": 40505091, "link": "https://stackoverflow.com/questions/40505091/multiple-counter-c/40505241#40505241", "title": "Multiple __COUNTER__ C", "body": "<p>Unless you have additional requirements for the identifiers, the following will do:</p>\n\n<p>definitions.inc</p>\n\n<pre><code>EVENT_REGISTER(Timer_5, \"Timer 5 Hz\")\nEVENT_REGISTER(Timer_10, \"Timer 10 Hz\")\nMODULE_REGISTER(Module_SSH)\nMODULE_REGISTER(Module_NCO)\n#undef EVENT_REGISTER\n#undef MODULE_REGISTER\n</code></pre>\n\n<p>app.c</p>\n\n<pre><code>#define EVENT_REGISTER(a, d) a,\n#define MODULE_REGISTER(a)\nenum events {\n#include \"definitions.inc\"\n};\n\n#define EVENT_REGISTER(a, d)\n#define MODULE_REGISTER(a) a,\nenum modules {\n#include \"definitions.inc\"\n};\n\nstruct Event {\n    uint8_t event_id;\n    uint8_t *data;\n    const char *description;\n};\n\n#define MODULE_REGISTER(a)\n#define EVENT_REGISTER(a, d) static struct Event Event_##a = { .event_id = a, \\\n    .data = NULL, \\\n    .description = d \\\n};\n#include \"definitions.inc\"\n\n\nint main (int argc, char **argv)\n{\n    printf(\"events(%d, %d) modules(%d)\\n\", Timer_10, Timer_5, Module_SSH);\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 91, "user_id": 3448481, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1123485953/picture?type=large", "display_name": "Elamre", "link": "https://stackoverflow.com/users/3448481/elamre"}, "edited": false, "score": 0, "creation_date": 1478692567, "post_id": 40505920, "comment_id": 68255210, "body": "Thanks for that X-Macro! That&#39;s the kind of stuff I hope on finding out about by doing this. Although it might not be the best approach in this case"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2512323"}, "is_accepted": true, "score": 1, "last_activity_date": 1478690904, "creation_date": 1478690904, "answer_id": 40505920, "question_id": 40505091, "link": "https://stackoverflow.com/questions/40505091/multiple-counter-c/40505920#40505920", "title": "Multiple __COUNTER__ C", "body": "<p>You must either:</p>\n\n<ul>\n<li>assign ids at runtime,</li>\n<li>assign ids by hands</li>\n<li>or keep all events and modules definitions in one place.</li>\n</ul>\n\n<p>Consider that you have <code>a.c</code> and <code>b.c</code>, and they contains some <code>EventA</code> and <code>EventB</code> definitions respectively. As they are separate compilation units, there is no way compiler can assign non-overlapping ids to them. Compiling <code>b.c</code>, it doesn't even know there is another <code>a.c</code> where id <code>1</code> is already assigned.</p>\n\n<p>For the first one, have a <code>RegisterEvent</code> function like so:</p>\n\n<pre><code>void RegisterEvent(Event* event){\n  static int nextEventId = 0;\n  event-&gt;eventId = nextEventId;\n}\n</code></pre>\n\n<p>And call it for every <code>Event</code> you need.</p>\n\n<p>Second one is obvious, but tedious and error prone.</p>\n\n<p>For the third solution, you can use an <a href=\"https://en.wikipedia.org/wiki/X_Macro\" rel=\"nofollow noreferrer\">X macro</a>.</p>\n\n<p>Have a X-list of all your events:</p>\n\n<pre><code>#define EventList \\\n  Event(FirstEvent, \"FirstEvent\") \\\n  Event(Timer_1, \"Timer 1 hZ\") \\\n  ... \n  Event(Timer_5, \"Timer 5 hZ\")\n</code></pre>\n\n<p>Now, in a header there you are going to declare all your events (say, <code>events.h</code>):</p>\n\n<pre><code>#define Event(name, desc) EventID ## name,\nenum EventID{\n EventIDZero = 0,\n EventList \n EventIDCount\n};\n#undef Event\n\n#define Event(name, desc) \\\n  extern Event name;\nEventList\n#undef Event\n</code></pre>\n\n<p>And in a single compilation unit where your event definitions will reside (say, <code>events.c</code>):</p>\n\n<pre><code>#include \"events.h\"\n\n#define Event(name, desc) \\\n  Event name = {.eventId = EventID ## name, .data = 0, .description = desc };\nEventList\n#undef Event\n</code></pre>\n\n<p>After macro expansion, <code>events.c</code> looks like (slightly edited for readability):</p>\n\n<pre><code>enum EventID{\n EventIDZero = 0,\n EventIDFirstEvent, EventIDTimer_1, EventIDTimer_5,\n EventIDCount\n};\n\nextern Event FirstEvent; \nextern Event Timer_1; \nextern Event Timer_5;\n\nEvent FirstEvent = {.eventId = EventIDFirstEvent, .data = 0, .description = \"FirstEvent\" }; \nEvent Timer_1 = {.eventId = EventIDTimer_1, .data = 0, .description = \"Timer 1 hZ\" }; \nEvent Timer_5 = {.eventId = EventIDTimer_5, .data = 0, .description = \"Timer 5 hZ\" };\n</code></pre>\n\n<p>Same thing goes for modules.</p>\n"}], "owner": {"reputation": 91, "user_id": 3448481, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1123485953/picture?type=large", "display_name": "Elamre", "link": "https://stackoverflow.com/users/3448481/elamre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 710, "favorite_count": 0, "accepted_answer_id": 40505920, "answer_count": 2, "score": 0, "last_activity_date": 1479033895, "creation_date": 1478688352, "last_edit_date": 1478689025, "question_id": 40505091, "link": "https://stackoverflow.com/questions/40505091/multiple-counter-c", "title": "Multiple __COUNTER__ C", "body": "<p>I'm playing around with the preprocessor and c. Trying to implement my own event and hierarchy system. \nHowever I'm facing a problem. I'm trying to statically define my \"modules\" which can be initialized, and some events which also are statically defined in advance. For the events I'm using <strong>COUNTER</strong> which works beautiful. But I don't want to mix up module id's and event id's.</p>\n\n<p>So a simplified version of what I'm trying to achieve:</p>\n\n<p>hierarchy.h</p>\n\n<pre><code>#define HIERARCHY_DEFINE(NAME) int hierarchyId = __COUNTER__\n</code></pre>\n\n<p>event.h</p>\n\n<pre><code>#define EVENT_REGISTER(NAME) int eventId = __COUNTER__\n</code></pre>\n\n<p>main.c</p>\n\n<pre><code>#include \"event.h\"\n#include \"hierarchy.h\"\n\nEVENT_REGISTER(EventOne);\nHIERARCHY_DEFINE(ModuleOne);\nEVENT_REGISTER(EventTwo);\n\nint main(void){\n    printf(\"events(%d, %d) modules(%d)\\n\",EventOne,EventTwo,ModuleOne);\n    return 1;\n}\n</code></pre>\n\n<p>This will print out:</p>\n\n<pre><code>events(0, 2) modules(1)\n</code></pre>\n\n<p>When I'm trying to achieve:</p>\n\n<pre><code>events(0, 1) modules(0)\n</code></pre>\n\n<p>I've looked around and people saying I can't create a counter on my own. And seen the boost counter, but that doesn't achieve what I want either.</p>\n\n<p>Does anybody have an idea how I could  handle this situation?</p>\n\n<p>Thanks!</p>\n\n<p>Edit:</p>\n\n<p>slight adition of what my code actually looks like</p>\n\n<pre><code>struct Event{\n    uint8_t eventId;\n    uint8_t * data;\n    const char * description;\n};\n\n#define EVENT_REGISTER(eventName, desc)\\\nstatic Event eventName = {.eventId = __COUNTER__, .data = 0, .description = desc }\n\n\n\n\nEVENT_REGISTER(Timer_5, \"Timer 5 hZ\");\n</code></pre>\n"}, {"tags": ["ios", "objective-c", "c", "arrays"], "comments": [{"owner": {"reputation": 6130, "user_id": 706020, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/fBRG0.png?s=128&g=1", "display_name": "CodeChanger", "link": "https://stackoverflow.com/users/706020/codechanger"}, "edited": false, "score": 0, "creation_date": 1478687719, "post_id": 40504851, "comment_id": 68252529, "body": "what you want here ? sum of both array int ??"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1478687754, "post_id": 40504851, "comment_id": 68252557, "body": "One way would be to coalesce both arrays to an integeral type (hint: each step is 10 * current + digit), perform the sum in integer arithmetic, then separate back into an array of digits (hint: use integer division by 10 and modulo 10)."}, {"owner": {"reputation": 17713, "user_id": 1801544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CcSB.jpg?s=128&g=1", "display_name": "Larme", "link": "https://stackoverflow.com/users/1801544/larme"}, "edited": false, "score": 0, "creation_date": 1478688323, "post_id": 40504851, "comment_id": 68252871, "body": "Why do you use array? Exercise?"}, {"owner": {"reputation": 655, "user_id": 5746235, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-f9JSHDiL6EI/AAAAAAAAAAI/AAAAAAAAABY/hJ6r6CH6fEg/photo.jpg?sz=128", "display_name": "Narendra Pandey", "link": "https://stackoverflow.com/users/5746235/narendra-pandey"}, "edited": false, "score": 0, "creation_date": 1478691306, "post_id": 40504851, "comment_id": 68254493, "body": "have u learned Matrix multiplication? if not go through it. you will get idea"}, {"owner": {"reputation": 7148, "user_id": 501439, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Vq6Nw.jpg?s=128&g=1", "display_name": "GeneCode", "link": "https://stackoverflow.com/users/501439/genecode"}, "edited": false, "score": 0, "creation_date": 1478746164, "post_id": 40504851, "comment_id": 68280005, "body": "Have u tried my code? Pls update."}], "answers": [{"comments": [{"owner": {"reputation": 17713, "user_id": 1801544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CcSB.jpg?s=128&g=1", "display_name": "Larme", "link": "https://stackoverflow.com/users/1801544/larme"}, "edited": false, "score": 0, "creation_date": 1478688374, "post_id": 40505052, "comment_id": 68252899, "body": "Missing point: {3}+{7}, you must be careful with the &quot;length&quot; of the auxiliary array."}, {"owner": {"reputation": 102, "user_id": 6654303, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-sgEmOtp4RZw/AAAAAAAAAAI/AAAAAAAAAM8/rMSGxd7goJw/photo.jpg?sz=128", "display_name": "Henrique Mois&#233;s", "link": "https://stackoverflow.com/users/6654303/henrique-mois%c3%a9s"}, "reply_to_user": {"reputation": 17713, "user_id": 1801544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CcSB.jpg?s=128&g=1", "display_name": "Larme", "link": "https://stackoverflow.com/users/1801544/larme"}, "edited": false, "score": 0, "creation_date": 1478689599, "post_id": 40505052, "comment_id": 68253558, "body": "The length of the aux array is the max(length(num1),length(num2)) + 1. Even if you end up with a 0 in the first position of the array you can easily manipulate the array to remove it."}], "tags": [], "owner": {"reputation": 102, "user_id": 6654303, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-sgEmOtp4RZw/AAAAAAAAAAI/AAAAAAAAAM8/rMSGxd7goJw/photo.jpg?sz=128", "display_name": "Henrique Mois&#233;s", "link": "https://stackoverflow.com/users/6654303/henrique-mois%c3%a9s"}, "is_accepted": false, "score": 0, "last_activity_date": 1478688247, "creation_date": 1478688247, "answer_id": 40505052, "question_id": 40504851, "link": "https://stackoverflow.com/questions/40504851/how-to-add-two-different-size-array-in-objective-c/40505052#40505052", "title": "How to add two different size array in Objective C?", "body": "<p>I would say to do the following:</p>\n\n<ol>\n<li>Create an auxiliary array.</li>\n<li>Loop through each array <code>num1</code> &amp; <code>num2</code>, starting from the end of each one.</li>\n<li>Calculate the remainder after division of the sum by 10 (i.e. (9+9)%10).</li>\n<li>Update a \"carry\" variable for each loop iteration to add to the next sum if that's the case.</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 451, "user_id": 2853332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31eb4bec466b42995b5c71461c955013?s=128&d=identicon&r=PG&f=1", "display_name": "hmjha", "link": "https://stackoverflow.com/users/2853332/hmjha"}, "edited": false, "score": 0, "creation_date": 1478765733, "post_id": 40520823, "comment_id": 68286106, "body": "It&#39;s working for small numbers calculation but when we use two big numeric value, getting result in negative. If  u can do any solution for big numbers please suggest."}, {"owner": {"reputation": 199, "user_id": 4207610, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-SbB2tTNQvqo/AAAAAAAAAAI/AAAAAAAAAE0/VUV6w4HyAvM/photo.jpg?sz=128", "display_name": "Smit Shah", "link": "https://stackoverflow.com/users/4207610/smit-shah"}, "reply_to_user": {"reputation": 451, "user_id": 2853332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31eb4bec466b42995b5c71461c955013?s=128&d=identicon&r=PG&f=1", "display_name": "hmjha", "link": "https://stackoverflow.com/users/2853332/hmjha"}, "edited": false, "score": 0, "creation_date": 1478771072, "post_id": 40520823, "comment_id": 68289068, "body": "for big numbers use NSInteger"}], "tags": [], "owner": {"reputation": 199, "user_id": 4207610, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-SbB2tTNQvqo/AAAAAAAAAAI/AAAAAAAAAE0/VUV6w4HyAvM/photo.jpg?sz=128", "display_name": "Smit Shah", "link": "https://stackoverflow.com/users/4207610/smit-shah"}, "is_accepted": false, "score": 0, "last_activity_date": 1478757407, "creation_date": 1478757407, "answer_id": 40520823, "question_id": 40504851, "link": "https://stackoverflow.com/questions/40504851/how-to-add-two-different-size-array-in-objective-c/40520823#40520823", "title": "How to add two different size array in Objective C?", "body": "<p>Use following code for simple calculation</p>\n\n<pre><code>    NSArray *array1 = @[@\"1\",@\"1\",@\"9\",@\"9\",@\"9\"];\n    NSArray *array2 = @[@\"9\",@\"9\",@\"9\",@\"9\"];\n\n    NSString *numString = @\"\";\n    for (int i = 0; i&lt;array1.count; i++)\n    {\n        numString = [numString stringByAppendingString:[NSString stringWithFormat:@\"%@\",[array1 objectAtIndex:i]]];\n    }\n    int firstNum = [numString intValue];\n\n    NSString *numString2 = @\"\";\n    for (int i = 0; i&lt;array2.count; i++)\n    {\n        numString2 = [numString2 stringByAppendingString:[NSString stringWithFormat:@\"%@\",[array2 objectAtIndex:i]]];\n    }\n    int secondNum = [numString2 intValue];\n\n    int finalResult = firstNum + secondNum;\n\n    NSLog(@\"%d\",finalResult);\n</code></pre>\n"}], "owner": {"reputation": 451, "user_id": 2853332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31eb4bec466b42995b5c71461c955013?s=128&d=identicon&r=PG&f=1", "display_name": "hmjha", "link": "https://stackoverflow.com/users/2853332/hmjha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 125, "favorite_count": 0, "closed_date": 1478785532, "answer_count": 2, "score": 2, "last_activity_date": 1478757407, "creation_date": 1478687581, "last_edit_date": 1478687950, "question_id": 40504851, "link": "https://stackoverflow.com/questions/40504851/how-to-add-two-different-size-array-in-objective-c", "closed_reason": "Needs details or clarity", "title": "How to add two different size array in Objective C?", "body": "<p>I want to add two different size array with carry \ni.e.</p>\n\n<pre><code>   num1 = {1,1,9,9,9};\n   num2 = {9,9,9,9};\n   num1 + num2 = arraySum = {2,1,9,9,8}\n</code></pre>\n"}, {"tags": ["c", "security", "hash", "passwords"], "comments": [{"owner": {"reputation": 695058, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1478688051, "post_id": 40504841, "comment_id": 68252732, "body": "If the attacker already has that level of access then why would they need to log in when they can just pull all the data they want directly?"}, {"owner": {"reputation": 456, "user_id": 1014334, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a643bcc68735258bd978860bb9f8e2e2?s=128&d=identicon&r=PG", "display_name": "Matan", "link": "https://stackoverflow.com/users/1014334/matan"}, "reply_to_user": {"reputation": 695058, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1478688529, "post_id": 40504841, "comment_id": 68252999, "body": "Well that&#39;s exactly what I want to prevent. How do I prevent the attacker from having access to the data that&#39;s stored locally?"}, {"owner": {"reputation": 995, "user_id": 2679327, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9Gmc3.png?s=128&g=1", "display_name": "Milack27", "link": "https://stackoverflow.com/users/2679327/milack27"}, "edited": false, "score": 0, "creation_date": 1478689636, "post_id": 40504841, "comment_id": 68253577, "body": "I think one possibility is encrypting your text file. Still, your binary program has the information of how to decrypt it, so it&#39;s not impossible for an attacker to figure it out, but it can be really difficult if you obscure things enough."}], "answers": [{"tags": [], "owner": {"reputation": 1552, "user_id": 944230, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/44c259f4e05a5631a40695841c7fd01c?s=128&d=identicon&r=PG", "display_name": "Pixou", "link": "https://stackoverflow.com/users/944230/pixou"}, "is_accepted": false, "score": 1, "last_activity_date": 1478694712, "creation_date": 1478694712, "answer_id": 40507109, "question_id": 40504841, "link": "https://stackoverflow.com/questions/40504841/safely-storing-a-password-locally/40507109#40507109", "title": "Safely storing a password locally", "body": "<p>It seems you have only one single server in place, which hosts the application, but also the username and hashed password. In this configuration, there is no perfect protection against an attacker being root.</p>\n\n<p>However, you can try to have some good features:</p>\n\n<ul>\n<li>The hashed password makes it hard for an attacker to get the password and use the application with the user's credentials</li>\n<li>however, an attacker could indeed change the hash. To prevent that, you could try to protect that file, either by: \n\n<ul>\n<li>detecting changes comparing with a remote copy </li>\n<li>or use a signature on it: basically, allowing only your application to update password. You can have a secret key in the app, used to sign the file, and add the signature at the end. When the app reads the file for authentication, it can check if the file was corrupted or not. It's probably going to be hard for the attacker to get that signature mechanism, but nothing impossible of course.</li>\n</ul></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 21225, "user_id": 575765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/877fab7e16fb4639a88aa48496b5e8cb?s=128&d=identicon&r=PG", "display_name": "martinstoeckli", "link": "https://stackoverflow.com/users/575765/martinstoeckli"}, "is_accepted": true, "score": 1, "last_activity_date": 1478694839, "creation_date": 1478694839, "answer_id": 40507141, "question_id": 40504841, "link": "https://stackoverflow.com/questions/40504841/safely-storing-a-password-locally/40507141#40507141", "title": "Safely storing a password locally", "body": "<p>It depends on whether the attacker has only access to this password file, or if he has access to the executable as well. In the latter case you can only make it harder to exchange the hashes, but you cannot entirely prevent it.</p>\n\n<p>For the first case, on can use a <a href=\"https://en.wikipedia.org/wiki/Hash-based_message_authentication_code\" rel=\"nofollow noreferrer\">HMAC</a> to verify the stored hash:</p>\n\n<ol>\n<li>Your application would then contain a secret strong key, and would calculate the HMAC of the hash with this key.</li>\n<li>This HMAC can be stored together with the password hash in the file.</li>\n<li>When reading the hash for verification, the software calculates the HMAC again and can compare it with the stored one.</li>\n</ol>\n\n<p>An attacker won't be able to produce the correct HMAC for his own hashes, as long as he doesn't know the secret key in your application. So what we gain is, that the password file cannot be altered but by your application, the security is concentrated into the key of your application. The same can be achieved with encrypting/decrypting the password file.</p>\n\n<p><em>P.S. Please do not use SHA-</em> to store passwords, instead use a hash function with a cost factor like BCrypt, PBKDF2 or SCrypt.*</p>\n"}], "owner": {"reputation": 456, "user_id": 1014334, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a643bcc68735258bd978860bb9f8e2e2?s=128&d=identicon&r=PG", "display_name": "Matan", "link": "https://stackoverflow.com/users/1014334/matan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1463, "favorite_count": 1, "accepted_answer_id": 40507141, "answer_count": 2, "score": 1, "last_activity_date": 1478694839, "creation_date": 1478687564, "question_id": 40504841, "link": "https://stackoverflow.com/questions/40504841/safely-storing-a-password-locally", "title": "Safely storing a password locally", "body": "<p>I am making a program in C that allows the user to register and login. When the user registers I want to save his username and password in a file. <br>\n<br>\nAs I understood it, the best way of doing so is adding a random salt to the end of the password and then store a secure hash (SHA-1 for example) of the salted password.<br><br>\nMy question is: If I locally store the username, hash and salt in the text file, what prevents an attacker from just changing the hash and salt in the file to his own SHA-1 hash with his own salt and then log in using his new password?<br>\nThanks.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 7123, "user_id": 2305521, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4d9cba345c724ca98dc17a9ea8a7e0c6?s=128&d=identicon&r=PG", "display_name": "fpg1503", "link": "https://stackoverflow.com/users/2305521/fpg1503"}, "edited": false, "score": 5, "creation_date": 1478687654, "post_id": 40504830, "comment_id": 68252488, "body": "Related: <a href=\"http://stackoverflow.com/q/588004/2305521\">Is floating point math broken?</a>"}, {"owner": {"reputation": 3783, "user_id": 2428235, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sj48p.jpg?s=128&g=1", "display_name": "Roman Hocke", "link": "https://stackoverflow.com/users/2428235/roman-hocke"}, "edited": false, "score": 3, "creation_date": 1478687917, "post_id": 40504830, "comment_id": 68252644, "body": "How about using <code>sprintf()</code> and then analyzing resulting string?"}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 4, "creation_date": 1478688239, "post_id": 40504830, "comment_id": 68252827, "body": "Your <code>value += 0.000000001</code> solution is not solution. It will break other numbers which would not otherwise be broken. Your problem is that conversion from floating pointer literal, which is in <i>decimal</i> format, can never be converted to perfectly to <i>binary</i> floating point number. If you need perfect decomposition, you cannot use floating point types."}], "answers": [{"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 1, "last_activity_date": 1478688550, "creation_date": 1478688550, "answer_id": 40505144, "question_id": 40504830, "link": "https://stackoverflow.com/questions/40504830/decompose-decimal-part-of-a-double/40505144#40505144", "title": "Decompose decimal part of a double", "body": "<p>If you want 6 decimal places, you should add <code>0.0000005</code> (ie <code>0.5e-6</code>) to round the value to the nearest place.  This method will work for positive numbers, first extract the sign, then work on the absolute value.</p>\n"}, {"tags": [], "owner": {"reputation": 99, "user_id": 7126130, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-h4x6zvSq8rI/AAAAAAAAAAI/AAAAAAAAAC4/6U8kw_FDfwI/photo.jpg?sz=128", "display_name": "Florian", "link": "https://stackoverflow.com/users/7126130/florian"}, "is_accepted": true, "score": 3, "last_activity_date": 1478703175, "last_edit_date": 1478703175, "creation_date": 1478689153, "answer_id": 40505337, "question_id": 40504830, "link": "https://stackoverflow.com/questions/40504830/decompose-decimal-part-of-a-double/40505337#40505337", "title": "Decompose decimal part of a double", "body": "<p>The reason you get unexpected output is that decimal fractions cannot always be exactly represented using (most common) base two floating point numbers. Using <code>printf(\"%.20f\", value);</code> after your assignment of <code>value</code> you will see that the value 0.123 is actually being stored as 0.12299..., which is why you receive that output.  </p>\n\n<p>If you only need to print out six digits, you can use string formatting of floating point numbers:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(){\n    double value = 0.123;\n    char *s = malloc(9);\n\n    sprintf(s++, \"%.6f\", value);\n    while(*s++){\n        putchar(*s);\n        putchar('\\n');\n    }\n}\n</code></pre>\n\n<p>EDIT: The code in my answer is very specific to the example you gave, so when using it be aware that I made some assumptions, e.g. your value will never have more than one digit before the decimal point.</p>\n"}, {"tags": [], "owner": {"reputation": 106086, "user_id": 15809, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2ULwK.jpg?s=128&g=1", "display_name": "Mecki", "link": "https://stackoverflow.com/users/15809/mecki"}, "is_accepted": false, "score": 1, "last_activity_date": 1478689685, "creation_date": 1478689685, "answer_id": 40505502, "question_id": 40504830, "link": "https://stackoverflow.com/questions/40504830/decompose-decimal-part-of-a-double/40505502#40505502", "title": "Decompose decimal part of a double", "body": "<p>Floating point numbers are not exact value representation. Here's a simple sample:</p>\n\n<pre><code>double a = 0.15 + 0.15; // 0.15 + 0.15 == 0.3, right?\ndouble b = 0.1 + 0.2;   // 0.1 + 0.2 == 0.3, right?\nif (a == b) {\n  printf(\"Equal\\n\");\n} else {\n  printf(\"Unequal\\n\");\n}\n</code></pre>\n\n<p>What will that print? <code>Equal</code>? Are you sure? Try it yourself:</p>\n\n<p><a href=\"http://rextester.com/VZOZ1043\" rel=\"nofollow noreferrer\">http://rextester.com/VZOZ1043</a></p>\n\n<p>It prints <code>Unequal</code>, that's because there are some numbers that floating point can't represent exactly and that's something you always need to keep in mind when doing floating point math. Also there is rounding involved in many operations, so the results of math operations are as good as possible but not always \"exact\", there's a tiny error that can also sum up if you run multiple operations.</p>\n\n<pre><code>double value = 0.123;\n\n// Assuming none of your numbers has more than 58 digits,\n// one period and one termination char.\nchar buffer[60];\n\n// Print the number to the buffer.\n// Missing: Error checking if it did fit!\nsnprintf(buffer, sizeof(buffer), \"%f\", value);\n\n// Find the period or end of string\nint idx = 0;\nfor (; buffer[idx] &amp;&amp; buffer[idx] != '.'; idx++);\n\n// Print anything after the period till \n// the end of the string\nif (buffer[idx] == '.') {\n    for (idx++; buffer[idx]; idx++) {\n        printf(\"%c\\n\", buffer[idx]);\n    }\n}\n</code></pre>\n\n<p>Test it: <a href=\"http://rextester.com/CYDQO24769\" rel=\"nofollow noreferrer\">http://rextester.com/CYDQO24769</a></p>\n"}], "owner": {"reputation": 495, "user_id": 6755801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/843afe4ade85ef00319a529e41cc9d73?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Blanquet", "link": "https://stackoverflow.com/users/6755801/thomas-blanquet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 40505337, "answer_count": 3, "score": 4, "last_activity_date": 1478703175, "creation_date": 1478687513, "last_edit_date": 1478687801, "question_id": 40504830, "link": "https://stackoverflow.com/questions/40504830/decompose-decimal-part-of-a-double", "title": "Decompose decimal part of a double", "body": "<p><br>\nI need to decompose a decimal part of a number in single digits, but I need to get the most obvious representation. Here is my code, to be clearer : <br></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid main(){\n    double value = 0.123;\n    int decim_tab[6];\n    int decimal;\n    int i;\n\n    for (i = 0; i &lt; 6; ++i) {\n        value *= 10;\n        decimal = (int)value;\n        decim_tab[i] = decimal;\n        value -= decimal;\n    }\n    for (i = 0; i &lt; 6; ++i)\n        print(\"%d\\n\", decim_tab[i]);\n}\n</code></pre>\n\n<p>The output I need is : <br></p>\n\n<pre><code>1\n2\n3\n0\n0\n0\n</code></pre>\n\n<p>But I get : <br></p>\n\n<pre><code>1\n2\n2\n9\n9\n9\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>A solution I found is to add a small delta to the value in order to force the shortest representation :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid main(){\n    double value = 0.123;\n    int decim_tab[6];\n    int decimal;\n    int i;\n\n    value += 0.000000001\n    for (i = 0; i &lt; 6; ++i) {\n        value *= 10;\n        decimal = (int)value;\n        decim_tab[i] = decimal;\n        value -= decimal;\n    }\n    for (i = 0; i &lt; 6; ++i)\n        print(\"%d\\n\", decim_tab[i]);\n}\n</code></pre>\n\n<p>I would be happy to find a better way, any suggestions ?</p>\n"}, {"tags": ["c++", "c", "windows"], "comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1478688932, "post_id": 40504546, "comment_id": 68253228, "body": "In the same place as where you placed <code>&lt;jpeglib.h&gt;</code> you must install all the other header files of the jpeg lib. You must add this path to your include [environment] variables/makefile. The compiler/linker must also know where to find jpeg.lib."}], "answers": [{"comments": [{"owner": {"reputation": 2259, "user_id": 1446689, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/WZmEf.jpg?s=128&g=1", "display_name": "moki", "link": "https://stackoverflow.com/users/1446689/moki"}, "edited": false, "score": 0, "creation_date": 1572882319, "post_id": 44408712, "comment_id": 103689911, "body": "that&#39;s an old version and it won&#39;t work for those who want to use it with dlib libraries."}, {"owner": {"reputation": 111, "user_id": 10924229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcf2dbcecabd93210a65ae1bc5083fd9?s=128&d=identicon&r=PG&f=1", "display_name": "Questwalker", "link": "https://stackoverflow.com/users/10924229/questwalker"}, "edited": false, "score": 0, "creation_date": 1598549369, "post_id": 44408712, "comment_id": 112502710, "body": "&quot;include the include folder from the installation in visual studio&quot; can you elaborate?"}], "tags": [], "owner": {"reputation": 2980, "user_id": 5330223, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NXuLS.jpg?s=128&g=1", "display_name": "Ultraviolet", "link": "https://stackoverflow.com/users/5330223/ultraviolet"}, "is_accepted": false, "score": 1, "last_activity_date": 1496827693, "creation_date": 1496827693, "answer_id": 44408712, "question_id": 40504546, "link": "https://stackoverflow.com/questions/40504546/how-to-install-jpeglib-on-windows-10/44408712#44408712", "title": "How to install jpeglib on Windows 10", "body": "<p>install the binary from <a href=\"http://gnuwin32.sourceforge.net/packages/jpeg.htm\" rel=\"nofollow noreferrer\">here</a> and then include the include folder from the installation in visual studio.</p>\n\n<p>for more instruction follow this <a href=\"https://stackoverflow.com/a/10777306/5330223\">answer</a>.</p>\n"}], "owner": {"reputation": 19, "user_id": 6667312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de2d56a8bc2c088ac04479acbff54922?s=128&d=identicon&r=PG&f=1", "display_name": "user6667312", "link": "https://stackoverflow.com/users/6667312/user6667312"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6173, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1496827693, "creation_date": 1478686651, "last_edit_date": 1478696137, "question_id": 40504546, "link": "https://stackoverflow.com/questions/40504546/how-to-install-jpeglib-on-windows-10", "title": "How to install jpeglib on Windows 10", "body": "<p>I am having 64 bit Windows 10 operating system.  I have downloaded  <code>jpegsr9b</code> library from JPEG website which is used for reading JPEG header file. I have written program in C to read JPEG file as below: </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;jpeglib.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n\nstruct jpeg_decompress_struct cinfo;\n\n struct jpeg_error_mgr jerr;\n\nint height,width,pixel_size,colorspace,i,j,k,res;\n\nFILE *infile = fopen(\"e:/Images/im.jpg\", \"rb\");\ncinfo.err = jpeg_std_error(&amp;jerr);\n\njpeg_create_decompress(&amp;cinfo);\njpeg_stdio_src(&amp;cinfo, infile);\njpeg_read_header(&amp;cinfo, TRUE);\njpeg_start_decompress(&amp;cinfo);\nwidth = cinfo.output_width;\nheight = cinfo.output_height;\n\nprintf(\"\\nWidth = %d\",width);\nprintf(\"\\nHeight = %d\",height);\n}\n</code></pre>\n\n<p>Then compiled as</p>\n\n<pre><code>gcc demo.c -ljpeg\n</code></pre>\n\n<p>But it gives error</p>\n\n<blockquote>\n  <p>In file included from demo.c:2:0:\n  jpeglib.h:25:62: fatal error: jconfig.h: No such file or directory\n  compilation terminated.</p>\n</blockquote>\n\n<p>How to solve the problem?</p>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 3331, "user_id": 1747088, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QZWPt.png?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/1747088/james"}, "edited": false, "score": 0, "creation_date": 1478686370, "post_id": 40504338, "comment_id": 68251644, "body": "Thanks, the timestamps weren&#39;t exact matches so I suspect you&#39;re right. Luckily it was only over the course of an hour or so, so roll-over shouldn&#39;t be a problem. Could you explain to me how you arrived at the value <code>344</code> please?"}, {"owner": {"reputation": 3331, "user_id": 1747088, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QZWPt.png?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/1747088/james"}, "edited": false, "score": 0, "creation_date": 1478687158, "post_id": 40504338, "comment_id": 68252176, "body": "Thanks, that really helps, you&#39;ve saved me a lot of pain."}], "tags": [], "owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "is_accepted": true, "score": 5, "last_activity_date": 1478686850, "last_edit_date": 1478686850, "creation_date": 1478686038, "answer_id": 40504338, "question_id": 40503962, "link": "https://stackoverflow.com/questions/40503962/magically-undo-fprintf-format-mistake/40504338#40504338", "title": "Magically Undo fprintf format Mistake", "body": "<p>I'm guessing that the timestamp <code>1130802699</code> should be more like <code>1478599552523</code> than <code>1478599582064</code>.</p>\n\n<p>If so, you may be able to recover the timestamps by adding the appropriate multiple of 1&lt;&lt;32 (I'm assuming that your <code>long</code> is 32 bits and the truncated values don't roll over into negative range).  In this case, that's 344 times, or <code>1477468749824</code> to add to each value.</p>\n\n<p>Your 32-bit values will roll over every 6 weeks or so, so you might have to do something a bit cleverer if your files span a longer range.</p>\n\n<hr>\n\n<p>If you're wondering how I came up with that value, we should work backwards.  </p>\n\n<p>We know we truncated the <code>uint64_t</code> to (roughly) <code>int32_t</code>, and if we make some reasonable assumptions (e.g. 2's complement arithmetic), that means masking with 0xffffffff:</p>\n\n<pre><code>stamp0 &amp; 0xffffffff\n</code></pre>\n\n<p>That's equivalent to subtracting</p>\n\n<pre><code>stamp0 - (stamp0 &amp; 0xffffffff00000000)\n</code></pre>\n\n<p>This difference will be constant across a large range of values, and approximately equal to the difference between the actual and expected values. </p>\n\n<p>1478599582064 - 1130802699 is 1477468779365, or 0x15800007365.</p>\n\n<p>So I think the offset to add back on is actually 0x15800000000.</p>\n"}], "owner": {"reputation": 3331, "user_id": 1747088, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QZWPt.png?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/1747088/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 40504338, "answer_count": 1, "score": 2, "last_activity_date": 1478686850, "creation_date": 1478684960, "question_id": 40503962, "link": "https://stackoverflow.com/questions/40503962/magically-undo-fprintf-format-mistake", "title": "Magically Undo fprintf format Mistake", "body": "<p>I have some code that was logging data from a device and was timestamping that data with system time in milliseconds.</p>\n\n<p>I was using a <code>uint64_t</code> to store the timestamp, which was created like this:</p>\n\n<pre>\n<code>\nstruct timespec request;\nclock_gettime(CLOCK_REALTIME, &request);\nuint64_t stamp0 = (uint64_t)((uint64_t)request.tv_sec * 1000 + (uint64_t)request.tv_nsec / 1000000);\n</code>\n</pre>\n\n<p>Then I wrote the timestamp to file (without thinking it through) like this:</p>\n\n<pre>\n<code>\nfprintf(ptr,\"%ld\\n\",(long)stamp0);\n</code>\n</pre>\n\n<p>Now I have incorrect timestamps in my files that look like <code>1130802699</code> but should look like <code>1478599582064</code>.</p>\n\n<p>Is there anything I can do to fix my error?</p>\n"}, {"tags": ["c", "strtol"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1478683062, "post_id": 40503305, "comment_id": 68249764, "body": "Note: <code>CA6B</code> is valid as whole in hex."}, {"owner": {"reputation": 41, "user_id": 6318361, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-rJmWhGTvNEU/AAAAAAAAAAI/AAAAAAAAACI/n8ctTxtidZU/photo.jpg?sz=128", "display_name": "user6318361", "link": "https://stackoverflow.com/users/6318361/user6318361"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1478683580, "post_id": 40503305, "comment_id": 68250051, "body": "yes, its a the whole CA6B in decimal, but i wanted it to be separated away like my intention"}, {"owner": {"reputation": 2375, "user_id": 3985859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34af6d164c53c629e625c11a3d11bbcc?s=128&d=identicon&r=PG&f=1", "display_name": "Karsten Koop", "link": "https://stackoverflow.com/users/3985859/karsten-koop"}, "edited": false, "score": 0, "creation_date": 1478683719, "post_id": 40503305, "comment_id": 68250108, "body": "What exactly is the requirement? Your first paragraph makes it seem you want to split a string of 6 characters into 3 strings with two characters each, but your code looks like you have to convert a decimal number, followed by a hex number, followed by another decimal one. Are the lengths fixed? Are there no separators?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1478683833, "post_id": 40503305, "comment_id": 68250165, "body": "Please indent your code."}, {"owner": {"reputation": 41, "user_id": 6318361, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-rJmWhGTvNEU/AAAAAAAAAAI/AAAAAAAAACI/n8ctTxtidZU/photo.jpg?sz=128", "display_name": "user6318361", "link": "https://stackoverflow.com/users/6318361/user6318361"}, "edited": false, "score": 0, "creation_date": 1478683976, "post_id": 40503305, "comment_id": 68250242, "body": "the general purpose is i want to split a string with 6 characters into 3 string with 2 char each one, then i want to convert them to int using strtol and store em in array. no, no separator, nothing at all. if my code looks confusing, dont mind,, im just blankly try everything to do my goal because im new in c, thats why my code looks strange"}, {"owner": {"reputation": 41, "user_id": 6318361, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-rJmWhGTvNEU/AAAAAAAAAAI/AAAAAAAAACI/n8ctTxtidZU/photo.jpg?sz=128", "display_name": "user6318361", "link": "https://stackoverflow.com/users/6318361/user6318361"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1478684037, "post_id": 40503305, "comment_id": 68250280, "body": "@MichaelWalz thats my whole code"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1478684278, "post_id": 40503305, "comment_id": 68250401, "body": "Read <a href=\"https://en.wikipedia.org/wiki/Indent_style\" rel=\"nofollow noreferrer\">this</a>."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 6318361, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-rJmWhGTvNEU/AAAAAAAAAAI/AAAAAAAAACI/n8ctTxtidZU/photo.jpg?sz=128", "display_name": "user6318361", "link": "https://stackoverflow.com/users/6318361/user6318361"}, "edited": false, "score": 0, "creation_date": 1478683530, "post_id": 40503438, "comment_id": 68250025, "body": "what should i do to make it separate hex value?"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1478686656, "last_edit_date": 1478686656, "creation_date": 1478683208, "answer_id": 40503438, "question_id": 40503305, "link": "https://stackoverflow.com/questions/40503305/cant-split-and-store-hexstring-in-array/40503438#40503438", "title": "Cant Split and Store hexstring in array", "body": "<p>The \"issue\" that you see in because of this line</p>\n\n<pre><code> resulta = strtol (theEnd, &amp;theEnd, 16 );\n</code></pre>\n\n<p>there, <code>theEnd</code> points to <code>CA6B</code> which, as per the base 16, is a valid input as whole, so the whole string is consumed and converted. The decimal representation value is 51819, which you see as output.</p>\n\n<p>The best way to achieve this would be (based on your approach) to take a pointer to the starting of the array, and \"clip\" it on alternate indexes.</p>\n\n<p>That said, all your <code>printf()</code> statements are logically wrong, as you have only one format specifier but you supply two arguments, so as the last one will be ignored silently.</p>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 6318361, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-rJmWhGTvNEU/AAAAAAAAAAI/AAAAAAAAACI/n8ctTxtidZU/photo.jpg?sz=128", "display_name": "user6318361", "link": "https://stackoverflow.com/users/6318361/user6318361"}, "edited": false, "score": 0, "creation_date": 1478684368, "post_id": 40503640, "comment_id": 68250456, "body": "i need the value to be stored in variable so i can do something with it"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 41, "user_id": 6318361, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-rJmWhGTvNEU/AAAAAAAAAAI/AAAAAAAAACI/n8ctTxtidZU/photo.jpg?sz=128", "display_name": "user6318361", "link": "https://stackoverflow.com/users/6318361/user6318361"}, "edited": false, "score": 1, "creation_date": 1478684447, "post_id": 40503640, "comment_id": 68250494, "body": "@user6318361 It is better to use arrays than to use separate variables. (However, loops can be expanded.)"}, {"owner": {"reputation": 41, "user_id": 6318361, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-rJmWhGTvNEU/AAAAAAAAAAI/AAAAAAAAACI/n8ctTxtidZU/photo.jpg?sz=128", "display_name": "user6318361", "link": "https://stackoverflow.com/users/6318361/user6318361"}, "edited": false, "score": 0, "creation_date": 1478687092, "post_id": 40503640, "comment_id": 68252139, "body": "thank god.. its perfect.. thank you so much, you save a lot of time for me, thanks blue"}], "tags": [], "owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "is_accepted": false, "score": 1, "last_activity_date": 1478685229, "last_edit_date": 1478685229, "creation_date": 1478683915, "answer_id": 40503640, "question_id": 40503305, "link": "https://stackoverflow.com/questions/40503305/cant-split-and-store-hexstring-in-array/40503640#40503640", "title": "Cant Split and Store hexstring in array", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main(void){\n    char bc[] = \"27CA6B\";\n    unsigned char result[(sizeof(bc)-1)/2] = {0};\n    int i = 0;\n\n    for(char *p = bc; *p; p += 2){\n        char part[3] = {0};\n        memcpy(part, p, 2);//Extract 2 characters\n        result[i++] = strtoul(part, NULL, 16);\n    }\n\n    for(i = 0; i &lt; sizeof(result); ++i){\n        printf(\"%3u %c%c\\n\", result[i], bc[i*2], bc[i*2+1]);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<hr>\n\n<p>expand loop</p>\n\n<pre><code>unsigned char result1,result2,result3;\nint i = 0;\nchar part[3] = {0};\n\nmemcpy(part, bc + i, 2); i += 2;\nresult1 = strtoul(part, NULL, 16);\nmemcpy(part, bc + i, 2); i += 2;\nresult2 = strtoul(part, NULL, 16);\nmemcpy(part, bc + i, 2); i += 2;\nresult3 = strtoul(part, NULL, 16);\n\ni = 0;\nprintf(\"%3u %c%c\\n\", result1, bc[i], bc[i+1]); i += 2;\nprintf(\"%3u %c%c\\n\", result2, bc[i], bc[i+1]); i += 2;\nprintf(\"%3u %c%c\\n\", result3, bc[i], bc[i+1]); i += 2;\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 6318361, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-rJmWhGTvNEU/AAAAAAAAAAI/AAAAAAAAACI/n8ctTxtidZU/photo.jpg?sz=128", "display_name": "user6318361", "link": "https://stackoverflow.com/users/6318361/user6318361"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1478686656, "creation_date": 1478682822, "last_edit_date": 1478686560, "question_id": 40503305, "link": "https://stackoverflow.com/questions/40503305/cant-split-and-store-hexstring-in-array", "title": "Cant Split and Store hexstring in array", "body": "<p>i wanted to split this hexstring, convert em, and store em in an array.\nbut it seems there is something off from my work, and i don't know what.</p>\n\n<p>I intend to split this string</p>\n\n<blockquote>\n  <p>27CA6B</p>\n</blockquote>\n\n<p>to</p>\n\n<pre><code> 27\n CA\n 6B\n</code></pre>\n\n<p>but the output is always only the first string.\nlike</p>\n\n<pre><code>27\n51819\n0\n</code></pre>\n\n<p>please somebody help, here is my code</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;errno.h&gt;\n\nint main(void)\n {\nchar bc[] = \"27CA6B\";\nchar *theEnd;\n\nlong result;\nlong resulta;\nlong resultb;\nlong resultc;\n\nresult = strtol (bc, &amp;theEnd, 0);\nresulta = strtol (theEnd, &amp;theEnd, 16 );\nresultb = strtol (theEnd, NULL, 0);\n\n//int i = 0;\n//printf(\"%c%c%c%c%c%c\\n\", bc[0], bc[1], bc[2], bc[3], bc[4], bc[5]);\n\nprintf(\"%ld\\n\", result, &amp;bc[0]);\nprintf(\"%ld\\n\", resulta, &amp;bc[1]);\nprintf(\"%ld\\n\", resultb, &amp;bc[2]);\n\n\nreturn 0;\n }\n</code></pre>\n"}, {"tags": ["c", "microcontroller", "real-time-clock"], "comments": [{"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1478685232, "post_id": 40503304, "comment_id": 68250987, "body": "Why don&#39;t you search for <code>global_rtc_cb</code> and <code>rtc_callback</code>, and track down exactly where each one of them is invoked? (in the case of <code>rtc_callback</code>, you will have to go into the code of function <code>rtc_set_config</code>, and see where the value of <code>cfg-&gt;callback</code> is stored)."}], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 6931518, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/8f541966eda1278f7eeed043c243b7ce?s=128&d=identicon&r=PG&f=1", "display_name": "logitech mouse", "link": "https://stackoverflow.com/users/6931518/logitech-mouse"}, "edited": false, "score": 0, "creation_date": 1478700149, "post_id": 40507031, "comment_id": 68259667, "body": "Thanks that is very helpful description."}], "tags": [], "owner": {"reputation": 5703, "user_id": 1401213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccb697eb985c37893ed06f3c3324c7c8?s=128&d=identicon&r=PG&f=1", "display_name": "kkrambo", "link": "https://stackoverflow.com/users/1401213/kkrambo"}, "is_accepted": true, "score": 1, "last_activity_date": 1478694472, "creation_date": 1478694472, "answer_id": 40507031, "question_id": 40503304, "link": "https://stackoverflow.com/questions/40503304/rtc-initialisation-in-an-mcu-why-use-a-global-callback/40507031#40507031", "title": "RTC initialisation in an MCU - why use a global callback", "body": "<p>The <code>rtc_</code> functions are part of the RTC driver.  The RTC driver has something driver-specific to do when the event that prompts the callback occurs.  This driver-specific stuff happens in <code>rtc_callback</code>.  But there may also be other application-specific stuff that the application must do when the event occurs.  The application-specific stuff should be done at the application layer, not within the driver.  So if the application has something to do in response to the event it can provide a callback to <code>rtc_init</code>.  Surely <code>rtc_callback</code> calls <code>global_rtc_cb</code> so that both the driver-specific stuff and the application-specific stuff is performed when the event occurs.  Apparently your particular application doesn't need to do anything for this event so it passes NULL to <code>rtc_init</code>.  But a different application that uses the same driver may provide a callback function.</p>\n"}], "owner": {"reputation": 81, "user_id": 6931518, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/8f541966eda1278f7eeed043c243b7ce?s=128&d=identicon&r=PG&f=1", "display_name": "logitech mouse", "link": "https://stackoverflow.com/users/6931518/logitech-mouse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 40507031, "answer_count": 1, "score": 1, "last_activity_date": 1478694472, "creation_date": 1478682820, "question_id": 40503304, "link": "https://stackoverflow.com/questions/40503304/rtc-initialisation-in-an-mcu-why-use-a-global-callback", "title": "RTC initialisation in an MCU - why use a global callback", "body": "<p>The code below is related to the initialization of an RTC in an MCU. </p>\n\n<p>Would anybody know the rational for passing <code>NULL</code> to <code>rtc_init()</code> and then setting a global callback <code>global_rtc_cb</code> equal to it. </p>\n\n<p>Why would you use a global callback at all when there is an other function called <code>rtc_callback</code> defined and used as the callback in the struct.  </p>\n\n<pre><code>int main() {\nrtc_init(NULL);   \n} \n\n//-----------------------------------------------------------------\nvoid ( * global_rtc_cb)(void *);  \n\nint rtc_init(void (*cb)(void *)) {\nrtc_config_t cfg;\n\n  cfg.init_val = 0;\n  cfg.alarm_en = true;\n  cfg.alarm_val = ALARM;\n  cfg.callback = rtc_callback;\n  cfg.callback_data = NULL;\n\n  global_rtc_cb = cb;\n\n  irq_request(IRQ_RTC_0, rtc_isr_0);\n  clk_periph_enable(CLK_PERIPH_RTC_REGISTER | CLK_PERIPH_CLK);\n  rtc_set_config(QM_RTC_0, &amp;cfg);\n\n  return 0;\n}\n\n//---------------------------------------------------------------------\n/**\n * RTC configuration type.\n */\ntypedef struct {\n    uint32_t init_val;  /**&lt; Initial value in RTC clocks. */\n    bool alarm_en;      /**&lt; Alarm enable. */\n    uint32_t alarm_val; /**&lt; Alarm value in RTC clocks. */\n\n    /**\n     * User callback.\n     *\n     * @param[in] data User defined data.\n     */\n    void (*callback)(void *data);\n    void *callback_data; /**&lt; Callback user data. */\n} rtc_config_t;\n</code></pre>\n"}, {"tags": ["c", "recursion", "printf", "function-call"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1478682274, "post_id": 40503100, "comment_id": 68249345, "body": "in the first aproach, use <code>return i * factorial(i - 1, count);</code>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1478682298, "post_id": 40503100, "comment_id": 68249352, "body": "In the <code>factorial</code> function, the variable <code>count</code> already is a pointer. Using the address-of operator on it will give you a pointer to the pointer (i.e. <code>&amp;count</code> is of type <code>int **</code>)."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1478682416, "post_id": 40503100, "comment_id": 68249413, "body": "You also have <i>undefined behavior</i> in the <code>main</code> function when you print the result. The evaluation order of function arguments is not defined so you don&#39;t know if the call to <code>factorial</code> will be before the <code>count</code> variable is passed to <code>printf</code>. You need to do the <code>factorial</code> call separately before the <code>printf</code> call."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1478682604, "post_id": 40503100, "comment_id": 68249528, "body": "@Someprogrammerdude Last comment is very valuable. I added that in the answer itself."}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1478682429, "creation_date": 1478682429, "answer_id": 40503183, "question_id": 40503100, "link": "https://stackoverflow.com/questions/40503100/how-to-implement-a-running-variable-in-a-recursive-function/40503183#40503183", "title": "How to implement a running variable in a recursive function", "body": "<p>In your first case, <code>factorial()</code> function, <code>count</code> is of type <code>int *</code>. So, while calling the function recursively (in the <code>return</code> statement), do not pass address of <code>count</code>, just pass the <code>count</code> itself.</p>\n\n<p>That said, as <code>count</code> is to be modified in the function call of <code>factorial()</code>, don't pass both of them (the variable and the function call which modifies the variable) in the same argument list as there is no sequence point in the elements passed as argument list, so you'll end up invoking <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 737, "user_id": 3373945, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oa5aU.jpg?s=128&g=1", "display_name": "ViKiG", "link": "https://stackoverflow.com/users/3373945/vikig"}, "is_accepted": false, "score": 0, "last_activity_date": 1478682721, "creation_date": 1478682721, "answer_id": 40503265, "question_id": 40503100, "link": "https://stackoverflow.com/questions/40503100/how-to-implement-a-running-variable-in-a-recursive-function/40503265#40503265", "title": "How to implement a running variable in a recursive function", "body": "<p>Declare the <code>count</code> variable as <code>static</code> inside the factorial function itself. </p>\n\n<pre><code>    static int count = 0;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "is_accepted": false, "score": 0, "last_activity_date": 1478683169, "creation_date": 1478683169, "answer_id": 40503426, "question_id": 40503100, "link": "https://stackoverflow.com/questions/40503100/how-to-implement-a-running-variable-in-a-recursive-function/40503426#40503426", "title": "How to implement a running variable in a recursive function", "body": "<p>There are two ways of solving this problem. </p>\n\n<ol>\n<li>Declare a static variable in the recursive function to count the no of times it is called.</li>\n</ol>\n\n<p>e.g. </p>\n\n<pre><code>int factorial(unsigned int i, int *count)\n{\n   static int count2;\n   *count = ++count2;\n   if(i &lt;= 1)\n   {\n     return 1;\n   }\n   return i * factorial(i - 1, count);\n}\n\nint  main()\n{\n   int i = 10;\n   int count = 0, fact;\n   fact = factorial(i, &amp;count);\n   printf(\"%d Iterations, Factorial of %d is %d\\n\", count, i, fact);\n   return 0;\n}\n</code></pre>\n\n<ol start=\"2\">\n<li>Have count as a pointer to integer, which can then be updated in each function to find the number of iterations. </li>\n</ol>\n\n<p>e.g. </p>\n\n<pre><code>int factorial(unsigned int i, int *count)\n{\n   (*count)++;\n   // Remaining lines the same as first solution.\n}\n</code></pre>\n\n<p>The second solution will only work in some special types of recursive functions where the first function calls the second and the second calls the third, etc. It will not work for example in a recursive fibbonaci sequence algorithm. </p>\n\n<p>The first solution is a more general one, and will work for all conditions.</p>\n"}, {"tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 1, "last_activity_date": 1478690097, "last_edit_date": 1478690097, "creation_date": 1478689755, "answer_id": 40505525, "question_id": 40503100, "link": "https://stackoverflow.com/questions/40503100/how-to-implement-a-running-variable-in-a-recursive-function/40505525#40505525", "title": "How to implement a running variable in a recursive function", "body": "<p>There is no need for static variables, as other solutions suggest. The following is correct:</p>\n\n<pre><code>int factorial(unsigned int i, int *count)\n{\n   *count += 1;\n   if(i &lt;= 1)\n   {\n     return 1;\n   }\n   return i * factorial(i - 1, count);\n}   \n\nint main(void)\n{\n   int i = 10;\n   int count = 0;\n   printf(\"%d Iterations, Factorial of %d is %d\\n\", count, i, factorial(i, &amp;count));\n   return 0;\n}\n</code></pre>\n\n<p>One note: as the order of parameter evaluation in the <code>printf</code> statement is not guaranteed, as I understand it the value of <code>count</code> in the call to <code>printf</code> may either be zero (it is passed before factorial was called) or may be 10 (the value after factorial was called). Therefore, main could better be written as:</p>\n\n<pre><code>int main(void)\n{\n   int i = 10;\n   int count = 0;\n   int fact= factorial(i, &amp;count);\n   printf(\"%d Iterations, Factorial of %d is %d\\n\", count, i, fact);\n   return 0;\n}\n</code></pre>\n\n<blockquote>\n  <p>6.5.2.2 Function calls: 10 The order of evaluation of the function designator, the actual arguments, and subexpressions within the actual arguments is unspecified, but there is a sequence point before the actual call.</p>\n</blockquote>\n"}], "owner": {"reputation": 2437, "user_id": 3861775, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/Ij1Eg.jpg?s=128&g=1", "display_name": "Samuel", "link": "https://stackoverflow.com/users/3861775/samuel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1121, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1478690097, "creation_date": 1478682144, "last_edit_date": 1478682680, "question_id": 40503100, "link": "https://stackoverflow.com/questions/40503100/how-to-implement-a-running-variable-in-a-recursive-function", "title": "How to implement a running variable in a recursive function", "body": "<p>At the moment I am coding a program in which I need a variable <code>count</code> that increments every time I call the function. In my case I have a recursive function and want to know how many iterations the program does.</p>\n\n<p>I simplified the code by computing the factorial of a number.</p>\n\n<p>My first approach does not work and ends up with warning messages:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint factorial(unsigned int i, int *count)\n{\n   *count += 1;\n   if(i &lt;= 1)\n   {\n     return 1;\n   }\n   return i * factorial(i - 1, &amp;count);\n}  \n\nint  main()\n{\n   int i = 10;\n   int count = 0;\n   printf(\"%d Iterations, Factorial of %d is %d\\n\", count, i, factorial(i, &amp;count));\n   return 0;\n}\n\n\nwarning: passing argument 2 of \u2018factorial\u2019 from incompatible pointer type\n</code></pre>\n\n<p>My second approach does not work either but also does not ends up with any warning messages.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint factorial(unsigned int i, int count)\n{\n   count += 1;\n   if(i &lt;= 1)\n   {\n     return 1;\n   }\n   return i * factorial(i - 1, count);\n}   \n\nint  main()\n{\n   int i = 10;\n   int count = 0;\n   printf(\"%d Iterations, Factorial of %d is %d\\n\", count, i, factorial(i, count));\n   return 0;\n}\n</code></pre>\n\n<p>How can I make it run? Any ideas? I use Ubuntu and gcc.</p>\n"}, {"tags": ["c++", "c", "opengl", "glut"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7135453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03ae5fad40d61cd5856b59b80cec327c?s=128&d=identicon&r=PG&f=1", "display_name": "marcusscarface", "link": "https://stackoverflow.com/users/7135453/marcusscarface"}, "edited": false, "score": 0, "creation_date": 1478724037, "post_id": 40513181, "comment_id": 68272908, "body": "Ok I think I got it, thanks a lot ! P.S: do you know if is there any way to get the pixel coordinates of the green rect (the 4 vertex I mean) every time the reshape funct is called ? Thanks again."}, {"owner": {"reputation": 1243, "user_id": 1129815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lROzF.jpg?s=128&g=1", "display_name": "Steeve", "link": "https://stackoverflow.com/users/1129815/steeve"}, "reply_to_user": {"reputation": 3, "user_id": 7135453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03ae5fad40d61cd5856b59b80cec327c?s=128&d=identicon&r=PG&f=1", "display_name": "marcusscarface", "link": "https://stackoverflow.com/users/7135453/marcusscarface"}, "edited": false, "score": 0, "creation_date": 1478765622, "post_id": 40513181, "comment_id": 68286050, "body": "You can do what OpenGL does: Multiply your matrices with the vertex to get the projected screen coorindate. Like: <code>screenCoord = viewportMatrix * projectionMatrix * modelViewMatrix * vertex</code>."}], "tags": [], "owner": {"reputation": 1243, "user_id": 1129815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lROzF.jpg?s=128&g=1", "display_name": "Steeve", "link": "https://stackoverflow.com/users/1129815/steeve"}, "is_accepted": true, "score": 0, "last_activity_date": 1478714152, "creation_date": 1478714152, "answer_id": 40513181, "question_id": 40502934, "link": "https://stackoverflow.com/questions/40502934/visualization-issue-in-opengl-glortho-projection/40513181#40513181", "title": "Visualization Issue in OpenGL (glOrtho &amp; projection)", "body": "<p>Everything seems normal to me.\nNothing guaranties that <code>s3hex-&gt;columns</code> and <code>s3hex-&gt;rows</code> will match your viewport size.</p>\n\n<p>What you can do is to scale up the modelview to make the drawing fill your viewport.</p>\n\n<p>Something along the lines of:</p>\n\n<pre><code>glScalef(viewportWidth / s3hex-&gt;columns, viewportHeight / s3hex-&gt;rows, 1);\n</code></pre>\n\n<p>Don't do this if <code>s3hex-&gt;columns</code> or <code>s3hex-&gt;rows</code> is zero.</p>\n"}], "owner": {"reputation": 3, "user_id": 7135453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03ae5fad40d61cd5856b59b80cec327c?s=128&d=identicon&r=PG&f=1", "display_name": "marcusscarface", "link": "https://stackoverflow.com/users/7135453/marcusscarface"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 40513181, "answer_count": 1, "score": 0, "last_activity_date": 1478717316, "creation_date": 1478681518, "last_edit_date": 1478717316, "question_id": 40502934, "link": "https://stackoverflow.com/questions/40502934/visualization-issue-in-opengl-glortho-projection", "title": "Visualization Issue in OpenGL (glOrtho &amp; projection)", "body": "<p>I don't know if I did something wrong in my functions (maybe wrong parameters to glOrtho) and so the result is just wrong or if it's all normal as it would be.</p>\n\n<p>In particular I have this situation:</p>\n\n<p><a href=\"https://i.stack.imgur.com/uJTNJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uJTNJ.png\" alt=\"link to image\"></a>\n<br></p>\n\n<p>I would like to have the green rect and all its inner content to take all the space of the window and not just a part of it (if you notice there are some empty spaces all around the main content: \"the green rect\").</p>\n\n<p>Here there are my main functions:</p>\n\n<pre><code>#define HEXAGONAL_SHRINK 0.8655f\n\nint main(int argc, char** argv)\n{\n    glutInit(&amp;argc, argv);\n    glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGB);\n    glutInitWindowSize(640, 480);\n    glutInitWindowPosition(100, 100);\n    glutCreateWindow(argv[0]);\n    glClearColor (0.0, 0.0, 0.0, 0.0);\n    glShadeModel (GL_FLAT);\n    glutDisplayFunc(display);\n    glutReshapeFunc(reshape);\n    glutMouseFunc(mouse);\n    glutMainLoop();\n    return 0;\n}\n\nvoid reshape(int w, int h)\n{\n    GLfloat aspect, dim;\n\n    glViewport (0, 0, (GLsizei) w, (GLsizei) h);\n\n    glMatrixMode(GL_PROJECTION);\n    glLoadIdentity();\n    if (s3hex-&gt;rows &gt; s3hex-&gt;columns)\n          dim = s3hex-&gt;rows * 0.5f; \n        else \n          dim = s3hex-&gt;columns * 0.5f;\n    aspect = (GLfloat)w / (GLfloat)h;\n    if (w &lt;= h)\n        glOrtho (-dim, dim, -dim/aspect, dim/aspect, 1.0, -1.0);\n    else\n        glOrtho (-dim*aspect, dim*aspect, -dim, dim, 1.0, -1.0);\n\n    glMatrixMode(GL_MODELVIEW);\n    glLoadIdentity();\n}\n\nvoid display(void)\n{\n    CALint i, j;\n    CALreal z, h, color;\n\n    glClear(GL_COLOR_BUFFER_BIT);\n    glPushMatrix();\n\n    glTranslatef(-(s3hex-&gt;columns*HEXAGONAL_SHRINK)/2.0f, s3hex-&gt;rows/2.0f, 0);\n    glScalef(HEXAGONAL_SHRINK, -1, 1);\n\n    for (i=0; i&lt;s3hex-&gt;rows; i++)\n        for (j=0; j&lt;s3hex-&gt;columns; j++)\n        {\n            z = calGet2Dr(s3hex,Q.z,i,j);\n            h = calGet2Dr(s3hex,Q.h,i,j);\n\n            if (h &gt; 0)\n            {\n                color = (h - h_min) / (h_Max - h_min);\n                glColor3d(1,color,0);\n                glRecti(j, i, j+1, i+1);\n            }\n            else\n                if (z &gt; 0)\n                {\n                    color = (z - z_min) / (z_Max - z_min);\n                    glColor3d(color,color,color);\n                    glRecti(j, i, j+1, i+1);\n                }\n        }\n\n    glPolygonMode(GL_FRONT_AND_BACK, GL_LINE);\n    glColor3d(0,1,0);\n    glRectd(0,0,s3hex-&gt;columns, s3hex-&gt;rows);\n    glPolygonMode(GL_FRONT_AND_BACK, GL_FILL);\n\n    glPopMatrix();\n\n    glutSwapBuffers();\n}\n</code></pre>\n\n<p>P.S: If you need to know what's s3hex is, then you can see it as a normal matrix in which every cell contains a set of substates. Then in according to the value of these substates I set the colors for the rendering in the display func.</p>\n"}, {"tags": ["c", "struct", "types"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1478680963, "post_id": 40502759, "comment_id": 68248722, "body": "If you only include the <code>temperature.h</code> header file, and not the <code>application.h</code> header file, how will then the compiler know what the symbol <code>ButterwothSecondOrderFilterParameter_str</code> is?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1478682067, "post_id": 40502759, "comment_id": 68249250, "body": "<code>temperature.h</code> must include <code>application.h</code> for the type to be known. You should be able to include <code>temperature.h</code> (only) at the top of <code>temperature.c</code> and the file should compile (that makes the header self-contained).  At the moment, the file doesn&#39;t compile; the header isn&#39;t self-contained.  The header guards are used to ensure that the headers are idempotent; even if they are included several times, the effect is the same as including them once."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1478682468, "post_id": 40502759, "comment_id": 68249433, "body": "Rather than explaining with words, explain with code: Please provide <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Currently it&#39;s unclear where your problem comes from."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 7135325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce98644f8aa519eb5c9f647d4586b11c?s=128&d=identicon&r=PG&f=1", "display_name": "SamPirate", "link": "https://stackoverflow.com/users/7135325/sampirate"}, "is_accepted": false, "score": 0, "last_activity_date": 1478790688, "creation_date": 1478790688, "answer_id": 40530903, "question_id": 40502759, "link": "https://stackoverflow.com/questions/40502759/unknown-type-name-error-with-typedef-struct-and-extern-declaration-c-language/40530903#40530903", "title": "unknown type name error with typedef struct and extern declaration - C language", "body": "<p>Justly I included application.h in temperature.h. Then temperature.h is the only file included in temperature.c. I add that temperature.h is included in application.h too normally without consequence.</p>\n\n<p>I tried to add application.h directly in temperature.c but I have the same error.</p>\n\n<p>I tried to delete the extern declaration in temperature.h and it works.</p>\n\n<p>So the type in unknown for temperature.h but not for temperature.c....I don't understand.</p>\n"}], "owner": {"reputation": 11, "user_id": 7135325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce98644f8aa519eb5c9f647d4586b11c?s=128&d=identicon&r=PG&f=1", "display_name": "SamPirate", "link": "https://stackoverflow.com/users/7135325/sampirate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1453, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1478790688, "creation_date": 1478680753, "last_edit_date": 1478680932, "question_id": 40502759, "link": "https://stackoverflow.com/questions/40502759/unknown-type-name-error-with-typedef-struct-and-extern-declaration-c-language", "title": "unknown type name error with typedef struct and extern declaration - C language", "body": "<p>I would like to understand an error from my compiler in C language.</p>\n\n<p>In a file application.h, I create a typedef struct :</p>\n\n<pre><code>typedef struct\n{\n    FLOAT64 CoefficientA1_F64;\n    FLOAT64 CoefficientA2_F64;\n    FLOAT64 CoefficientB0_F64;\n    FLOAT64 CoefficientB1_F64;\n    FLOAT64 CoefficientB2_F64;\n    FLOAT32 OldOldRawValue_F32;\n    FLOAT32 OldRawValue_F32;\n    FLOAT32 RawValue_F32;\n    FLOAT32 OldOldFilteredValue_F32;\n    FLOAT32 OldFilteredValue_F32;\n    FLOAT32 FilteredValue_F32;\n}ButterwothSecondOrderFilterParameter_str;\n</code></pre>\n\n<p>Then I create variable in another file temperature.c :</p>\n\n<pre><code>ButterwothSecondOrderFilterParameter_str TMP_TemperatureLowPassFilterParameter_STR;\n</code></pre>\n\n<p>Then I declare this new variable as extern in temperature.h to do the possibility to use it in another file :</p>\n\n<pre><code>extern ButterwothSecondOrderFilterParameter_str TMP_TemperatureLowPassFilterParameter_STR;\n</code></pre>\n\n<p>For a *.c file I only includes his related *.h file and if I need global variable from another *.h file I include it in the *.h file</p>\n\n<p>For example temperature.c only includes temperature.h and to access to the typedef struct of application.h I include application.h in temperature.h.</p>\n\n<p>For my *.h file I always encapsulate with a :</p>\n\n<pre><code>#ifndef xxxx\n#define xxxx\n#endif\n</code></pre>\n\n<p>And this is this last declaration which generates an error :</p>\n\n<pre><code>Description Resource    Path    Location    Type\nunknown type name 'ButterwothSecondOrderFilterParameter_str'\n</code></pre>\n\n<p>I don't know where's my error.... ?</p>\n"}, {"tags": ["c++", "c", "caching", "dns", "libresolv"], "comments": [{"owner": {"reputation": 67, "user_id": 2015409, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iav9C.jpg?s=128&g=1", "display_name": "Yaroslav", "link": "https://stackoverflow.com/users/2015409/yaroslav"}, "reply_to_user": {"reputation": 311848, "user_id": 6782, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dc8c4ddd99b446c28d2e1546c457e508?s=128&d=identicon&r=PG", "display_name": "Alnitak", "link": "https://stackoverflow.com/users/6782/alnitak"}, "edited": false, "score": 0, "creation_date": 1478781977, "post_id": 40502207, "comment_id": 68296047, "body": "@Alnitak yeah so i should ask admins about how libresolv works? Stackoverflow became very ridiculous place to ask questions."}, {"owner": {"reputation": 311848, "user_id": 6782, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dc8c4ddd99b446c28d2e1546c457e508?s=128&d=identicon&r=PG", "display_name": "Alnitak", "link": "https://stackoverflow.com/users/6782/alnitak"}, "edited": false, "score": 0, "creation_date": 1478926447, "post_id": 40502207, "comment_id": 68356878, "body": "I may have misread the question (hard to tell now, I&#39;ve got 9 hours of jetlag and only had 3 hours sleep) but as written I can&#39;t really tell what you&#39;re asking.  Try looking at tcpdump to see the difference (if any) between what libresolv is sending vs what dig is sending.  Perhaps also show some code to show <i>how</i> you&#39;re using libresolv."}, {"owner": {"reputation": 67, "user_id": 2015409, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iav9C.jpg?s=128&g=1", "display_name": "Yaroslav", "link": "https://stackoverflow.com/users/2015409/yaroslav"}, "reply_to_user": {"reputation": 311848, "user_id": 6782, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dc8c4ddd99b446c28d2e1546c457e508?s=128&d=identicon&r=PG", "display_name": "Alnitak", "link": "https://stackoverflow.com/users/6782/alnitak"}, "edited": false, "score": 0, "creation_date": 1479135628, "post_id": 40502207, "comment_id": 68418823, "body": "@Alnitak I&#39;ve put some code in my question. Tnx for advice with tcpdump. I&#39;ve already tried it. Seems like res_nquery still sends packets to check dns, while dig sends nothing, just checks dns cache. Seems that res_nquery can only work with strait requests to dns"}, {"owner": {"reputation": 311848, "user_id": 6782, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dc8c4ddd99b446c28d2e1546c457e508?s=128&d=identicon&r=PG", "display_name": "Alnitak", "link": "https://stackoverflow.com/users/6782/alnitak"}, "edited": false, "score": 0, "creation_date": 1479163132, "post_id": 40502207, "comment_id": 68433627, "body": "Both <code>dig</code> and <code>res_nquery</code> will just send the queries to whatever&#39;s in your <code>resolv.conf</code>, i.e. your dnsmasq instance, and both will also by default set the <code>+RD</code> bit to request recursion.   dnsmasq will then either serve the answers from cache, or go fetch if the TTL has expired, but there is to my knowledge <i>nothing in the DNS protocol itself</i> (and therefore nothing in the <code>res_nquery</code> settings) that a client can set that will influence that behaviour."}, {"owner": {"reputation": 311848, "user_id": 6782, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dc8c4ddd99b446c28d2e1546c457e508?s=128&d=identicon&r=PG", "display_name": "Alnitak", "link": "https://stackoverflow.com/users/6782/alnitak"}, "edited": false, "score": 0, "creation_date": 1479163465, "post_id": 40502207, "comment_id": 68433743, "body": "p.s. also try sending the <i>same</i> query - your <code>dig</code> example requests an A record but your <code>res_nquery</code> is asking for an MX record - perhaps dnsmasq itself behaves differently based on the query RTYPE ?"}, {"owner": {"reputation": 67, "user_id": 2015409, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iav9C.jpg?s=128&g=1", "display_name": "Yaroslav", "link": "https://stackoverflow.com/users/2015409/yaroslav"}, "reply_to_user": {"reputation": 311848, "user_id": 6782, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dc8c4ddd99b446c28d2e1546c457e508?s=128&d=identicon&r=PG", "display_name": "Alnitak", "link": "https://stackoverflow.com/users/6782/alnitak"}, "edited": false, "score": 0, "creation_date": 1479193547, "post_id": 40502207, "comment_id": 68442696, "body": "I&#39;ve tried sending the same requests, both for an A record. The behavior doesn&#39;t change (however, dnsmasq really doesn&#39;t cache MX records. I switched to unbound that does, but that didn&#39;t help). In my <code>resolv.conf</code> localhost (127.0.0.1) is on the first place, so requests should go to local cache first, but seems they behave differently under the hood and i can&#39;t do anything with it.  @Alnitak can you put your comment about <code>dig</code> and <code>res_nquery</code> behavior as an aswer so that i can accept it? Thank you for explanation"}, {"owner": {"reputation": 311848, "user_id": 6782, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dc8c4ddd99b446c28d2e1546c457e508?s=128&d=identicon&r=PG", "display_name": "Alnitak", "link": "https://stackoverflow.com/users/6782/alnitak"}, "edited": false, "score": 0, "creation_date": 1479199014, "post_id": 40502207, "comment_id": 68445296, "body": "Just for curiosity&#39;s sake I&#39;d quite like to get to the bottom of this.  If you run <code>dig google.com A</code> and then (before the TTL expires) use your own code to make the same query it <i>should</i> come from cache."}, {"owner": {"reputation": 67, "user_id": 2015409, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iav9C.jpg?s=128&g=1", "display_name": "Yaroslav", "link": "https://stackoverflow.com/users/2015409/yaroslav"}, "reply_to_user": {"reputation": 311848, "user_id": 6782, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dc8c4ddd99b446c28d2e1546c457e508?s=128&d=identicon&r=PG", "display_name": "Alnitak", "link": "https://stackoverflow.com/users/6782/alnitak"}, "edited": false, "score": 0, "creation_date": 1479210193, "post_id": 40502207, "comment_id": 68452291, "body": "According to what i see from tcpdump <code>res_nquery</code> still sends one packet to remote servers (which means a new socket will be opened on the server side), but actual response comes from cache."}, {"owner": {"reputation": 311848, "user_id": 6782, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dc8c4ddd99b446c28d2e1546c457e508?s=128&d=identicon&r=PG", "display_name": "Alnitak", "link": "https://stackoverflow.com/users/6782/alnitak"}, "edited": false, "score": 0, "creation_date": 1479231002, "post_id": 40502207, "comment_id": 68466323, "body": "<code>res_nquery</code> won&#39;t (itself) send anything other than to the server in resolv.conf"}, {"owner": {"reputation": 67, "user_id": 2015409, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iav9C.jpg?s=128&g=1", "display_name": "Yaroslav", "link": "https://stackoverflow.com/users/2015409/yaroslav"}, "reply_to_user": {"reputation": 311848, "user_id": 6782, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dc8c4ddd99b446c28d2e1546c457e508?s=128&d=identicon&r=PG", "display_name": "Alnitak", "link": "https://stackoverflow.com/users/6782/alnitak"}, "edited": false, "score": 0, "creation_date": 1479284821, "post_id": 40502207, "comment_id": 68487573, "body": "Yes, but if i have localhost on first place and on the second - remote server, it still &#39;pings&#39; to remote. Maybe i&#39;m doing something wrong or misunderstood output of tcpdump, but it shows ip of remote server from resolv.conf."}, {"owner": {"reputation": 311848, "user_id": 6782, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dc8c4ddd99b446c28d2e1546c457e508?s=128&d=identicon&r=PG", "display_name": "Alnitak", "link": "https://stackoverflow.com/users/6782/alnitak"}, "edited": false, "score": 0, "creation_date": 1479287526, "post_id": 40502207, "comment_id": 68489173, "body": "You never mentioned before that you have <i>two</i> servers in resolv.conf - your traces above only showed what dnsmasq was doing. It&#39;s perfectly possible that libresolv is trying them in a random order"}, {"owner": {"reputation": 67, "user_id": 2015409, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iav9C.jpg?s=128&g=1", "display_name": "Yaroslav", "link": "https://stackoverflow.com/users/2015409/yaroslav"}, "reply_to_user": {"reputation": 311848, "user_id": 6782, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dc8c4ddd99b446c28d2e1546c457e508?s=128&d=identicon&r=PG", "display_name": "Alnitak", "link": "https://stackoverflow.com/users/6782/alnitak"}, "edited": false, "score": 0, "creation_date": 1479287942, "post_id": 40502207, "comment_id": 68489427, "body": "@Alnitak Oh, okay. Thanks for your help! Good to know it"}], "answers": [{"tags": [], "owner": {"reputation": 311848, "user_id": 6782, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dc8c4ddd99b446c28d2e1546c457e508?s=128&d=identicon&r=PG", "display_name": "Alnitak", "link": "https://stackoverflow.com/users/6782/alnitak"}, "is_accepted": true, "score": 1, "last_activity_date": 1479198961, "creation_date": 1479198961, "answer_id": 40605264, "question_id": 40502207, "link": "https://stackoverflow.com/questions/40502207/how-to-make-res-query-work-with-dns-caching/40605264#40605264", "title": "How to make res_query work with dns caching?", "body": "<p>Both dig and <code>res_nquery()</code> will just send the queries to whatever's in your <code>/etc/resolv.conf</code> file, i.e. your dnsmasq instance.  Both will also by default set the <code>RD</code> bit to request recursion.</p>\n\n<p>dnsmasq will then either serve the answers from cache, or go fetch them if the TTL has expired.  However to my knowledge there is nothing in the DNS protocol itself (and therefore nothing in the <code>res_nquery</code> settings) that a client can set that will influence that behaviour</p>\n"}], "owner": {"reputation": 67, "user_id": 2015409, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iav9C.jpg?s=128&g=1", "display_name": "Yaroslav", "link": "https://stackoverflow.com/users/2015409/yaroslav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 724, "favorite_count": 1, "accepted_answer_id": 40605264, "answer_count": 1, "score": 1, "last_activity_date": 1479198961, "creation_date": 1478678112, "last_edit_date": 1479147444, "question_id": 40502207, "link": "https://stackoverflow.com/questions/40502207/how-to-make-res-query-work-with-dns-caching", "title": "How to make res_query work with dns caching?", "body": "<p>I'm using libresolv to perform requests to dns servers.</p>\n\n<p>Also i use local dns cache. (dnsmasq/unbound)</p>\n\n<p>When i use <code>dig</code>, for example <code>dig google.com</code>, request gets cached and the next request uses cached value.</p>\n\n<p>We can see this in dnsmasq logs:</p>\n\n<pre><code>Nov  9 10:46:46 y dnsmasq[24003]: query[A] google.com from 127.0.0.1\nNov  9 10:46:46 y dnsmasq[24003]: forwarded google.com to **.**.**.**\nNov  9 10:46:46 y dnsmasq[24003]: reply google.com is 173.194.32.165\nNov  9 10:46:46 y dnsmasq[24003]: reply google.com is 173.194.32.160\nNov  9 10:46:49 y dnsmasq[24003]: query[A] google.com from 127.0.0.1\nNov  9 10:46:49 y dnsmasq[24003]: cached google.com is 173.194.32.165\nNov  9 10:46:49 y dnsmasq[24003]: cached google.com is 173.194.32.168\n</code></pre>\n\n<p>Then i use <code>res_query</code>  and i get this:</p>\n\n<pre><code>Nov  9 10:50:29 y dnsmasq[24003]: query[MX] google.com from 127.0.0.1\nNov  9 10:50:29 y dnsmasq[24003]: forwarded google.com to **.**.**.**\nNov  9 10:50:29 y dnsmasq[24003]: forwarded google.com to **.**.**.**\nNov  9 10:51:13 y dnsmasq[24003]: query[MX] google.com from 127.0.0.1\nNov  9 10:51:13 y dnsmasq[24003]: forwarded google.com to **.**.**.**\nNov  9 10:51:13 y dnsmasq[24003]: forwarded google.com to **.**.**.**\n</code></pre>\n\n<p>So it looks like the response from dns server doesn't hit the dns cache and doesn't get cached.</p>\n\n<p>Is there any way to cache request from <code>res_query</code> ?</p>\n\n<p>This is how I'm making the request to the DNS resolver:</p>\n\n<pre><code> struct __res_state dnsstate;\n int rc = res_ninit(&amp;dnsstate);\n if (rc &lt; 0) {\n     return result;\n }\n dnsstate.retrans = timeout;\n\n int len = res_nquery(&amp;dnsstate, domain.c_str(), ns_c_in, ns_t_mx, nsbuf, sizeof(nsbuf));\n</code></pre>\n\n<p>I suppose that res_nquery doesn't check local DNS cache, and dig does.</p>\n"}, {"tags": ["c", "binary", "bit-manipulation"], "comments": [{"owner": {"reputation": 40834, "user_id": 297323, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/97e8a3c4945a8a898cbf216ce912fd46?s=128&d=identicon&r=PG", "display_name": "Fredrik Pihl", "link": "https://stackoverflow.com/users/297323/fredrik-pihl"}, "edited": false, "score": 3, "creation_date": 1478678142, "post_id": 40502193, "comment_id": 68247694, "body": "<a href=\"http://stackoverflow.com/questions/47981/how-do-you-set-clear-and-toggle-a-single-bit-in-c-c?rq=1\" title=\"how do you set clear and toggle a single bit in c c\">stackoverflow.com/questions/47981/&hellip;</a>"}, {"owner": {"reputation": 1562, "user_id": 6828329, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/cb5516b7f44760e32dcceabb543a0ebc?s=128&d=identicon&r=PG&f=1", "display_name": "The Pointer", "link": "https://stackoverflow.com/users/6828329/the-pointer"}, "reply_to_user": {"reputation": 40834, "user_id": 297323, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/97e8a3c4945a8a898cbf216ce912fd46?s=128&d=identicon&r=PG", "display_name": "Fredrik Pihl", "link": "https://stackoverflow.com/users/297323/fredrik-pihl"}, "edited": false, "score": 0, "creation_date": 1478678326, "post_id": 40502193, "comment_id": 68247754, "body": "@FredrikPihl Thanks. They seem to use the shift operators, rather than equalities. In the context of the information from my textbook, what am I doing incorrectly?"}, {"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1478678410, "post_id": 40502193, "comment_id": 68247778, "body": "You usually don&#39;t compare against the mask after masking, but instead use the result as a boolean, as an enumerated value or what have you."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1478678961, "post_id": 40502193, "comment_id": 68247973, "body": "@IljaEveril&#228; comparing against the mask checks whether every bit in the mask was set; using result as a boolean checks whether at least one of the bits in the mask was set"}], "answers": [{"tags": [], "owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "is_accepted": false, "score": 2, "last_activity_date": 1478678357, "creation_date": 1478678357, "answer_id": 40502255, "question_id": 40502193, "link": "https://stackoverflow.com/questions/40502193/checking-the-value-of-a-bit-in-c/40502255#40502255", "title": "Checking the value of a bit in C", "body": "<p>If I understood the question correctly, checking a single bit can be done by using a bit mask that contains the specific bit to test. If the first bit (which corresponds to a value of two) is to be ckecked, one would use</p>\n\n<pre><code>result = flags &amp; 00000010\n</code></pre>\n\n<p>and afterwards check <code>result</code>, which will be zero if the bit is not set and nonzero if the bit is set. More generalized, one could use</p>\n\n<pre><code>result = flags &amp; (00000001 &lt;&lt; i)\n</code></pre>\n\n<p>where <code>&lt;&lt;</code> denotes the shift operator to check the <code>i</code>-th bit.</p>\n"}, {"tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": true, "score": 8, "last_activity_date": 1478678762, "last_edit_date": 1478678762, "creation_date": 1478678571, "answer_id": 40502301, "question_id": 40502193, "link": "https://stackoverflow.com/questions/40502193/checking-the-value-of-a-bit-in-c/40502301#40502301", "title": "Checking the value of a bit in C", "body": "<ol>\n<li><p>Condition <code>(flags &amp; MASK) != 0</code> checks whether <em>any</em> of the <code>flags</code>'s bits specified by <code>MASK</code> are set to 1.</p></li>\n<li><p>Condition <code>(flags &amp; MASK) == MASK</code> checks whether <em>all</em> of the <code>flags</code>'s bits specified by <code>MASK</code> are set to 1.</p></li>\n</ol>\n\n<p>Symmetrically</p>\n\n<ol start=\"3\">\n<li><p>Condition <code>(flags &amp; MASK) == 0</code> checks whether <em>all</em> of the <code>flags</code>'s bits specified by <code>MASK</code> are set to 0.</p></li>\n<li><p>Condition <code>(flags &amp; MASK) != MASK</code> checks whether <em>any</em> of the <code>flags</code>'s bits specified by <code>MASK</code> are set to 0.</p></li>\n</ol>\n\n<p>Choose the one you need in each particular case.</p>\n\n<p>If you need to check just a single bit (i.e. <code>MASK</code> contains only one bit set to 1), then conditons 1 and 2 are equivalent (and conditons 3 and 4 are equivalent as well).</p>\n\n<p>It is not entirely clear from the text you quoted whether <code>MASK</code> can contain more than one bit set to 1.</p>\n"}], "owner": {"reputation": 1562, "user_id": 6828329, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/cb5516b7f44760e32dcceabb543a0ebc?s=128&d=identicon&r=PG&f=1", "display_name": "The Pointer", "link": "https://stackoverflow.com/users/6828329/the-pointer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1276, "favorite_count": 1, "accepted_answer_id": 40502301, "answer_count": 2, "score": 2, "last_activity_date": 1478678762, "creation_date": 1478678046, "question_id": 40502193, "link": "https://stackoverflow.com/questions/40502193/checking-the-value-of-a-bit-in-c", "title": "Checking the value of a bit in C", "body": "<p>I am learning how to check the value of a bit. My textbook claims the following.</p>\n\n<p>'Even if bit 1 in <code>flags</code> is set to 1, the other bit setting in <code>flags</code> can make the comparison untrue. Instead, you must first mask the other bits in <code>flags</code> so that you compare only bit 1 of <code>flags</code> with <code>MASK</code>:'</p>\n\n<pre><code>if ((flags &amp; MASK) == MASK)\nputs(\"Wow!\");\n</code></pre>\n\n<p>I'm having trouble understanding this concept. </p>\n\n<p>For instance, let <code>flags = 00001111</code> and <code>MASK = 10110110</code>. </p>\n\n<p>Therefore, <code>flags &amp; MASK = 00000110</code>.</p>\n\n<p>If we now compared <code>MASK</code> and <code>00000110</code>, we would be comparing bits 2 and 3. However, I isn't the goal to compare the value of a specific (single) bit?</p>\n\n<p>I must be misunderstanding this. I would appreciate it if someone could clarify my misunderstanding and explain the correct way to do this.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["java", "c", "java-native-interface", "shared-libraries", "static-libraries"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1478677211, "post_id": 40501964, "comment_id": 68247350, "body": "Are you linking somehow (statically or dynamically) PBC libs?"}, {"owner": {"reputation": 77, "user_id": 6384738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99b36cd880248c141f9adcb62c3282f2?s=128&d=identicon&r=PG&f=1", "display_name": "Tortxu13", "link": "https://stackoverflow.com/users/6384738/tortxu13"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1478677812, "post_id": 40501964, "comment_id": 68247573, "body": "In the C program I have only included them, I have to make something else?"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1478677929, "post_id": 40501964, "comment_id": 68247616, "body": "It depends: you can link the lib statically to your shared lib, or you can add shared PBC libs to the linking command of your final application."}, {"owner": {"reputation": 77, "user_id": 6384738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99b36cd880248c141f9adcb62c3282f2?s=128&d=identicon&r=PG&f=1", "display_name": "Tortxu13", "link": "https://stackoverflow.com/users/6384738/tortxu13"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1478678310, "post_id": 40501964, "comment_id": 68247747, "body": "How do I link them to the shared PBC lib to the final application? And how can I link the that shared lib statically to my own shared lib?"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1478678429, "post_id": 40501964, "comment_id": 68247790, "body": "How did you link your native C lib to your application? Same way for PBC libs..."}, {"owner": {"reputation": 77, "user_id": 6384738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99b36cd880248c141f9adcb62c3282f2?s=128&d=identicon&r=PG&f=1", "display_name": "Tortxu13", "link": "https://stackoverflow.com/users/6384738/tortxu13"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1478679385, "post_id": 40501964, "comment_id": 68248144, "body": "Used System.loadLibrary(&quot;libname&quot;); to link the shared library but if I also put the other shared library there if doesn&#39;t work. Should I use dlopen or sthing like that? Sorry, im quite new :S"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1478679859, "post_id": 40501964, "comment_id": 68248334, "body": "I&#39;m not a Java expert. What is the error? You should post the code that load libs and the errors. BTW try to take a look at <a href=\"http://stackoverflow.com/questions/5425034/java-load-shared-librariees-with-dependencies\">this SO question</a>"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1478680565, "post_id": 40501964, "comment_id": 68248566, "body": "Ok, After the edit, surely you must switch load library instructions: first load the <code>PBC</code> and after <code>myLibrary</code>. In other words: first the when you load a lib that depends on some other libs, those libs must be loaded before."}, {"owner": {"reputation": 77, "user_id": 6384738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99b36cd880248c141f9adcb62c3282f2?s=128&d=identicon&r=PG&f=1", "display_name": "Tortxu13", "link": "https://stackoverflow.com/users/6384738/tortxu13"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1478681663, "post_id": 40501964, "comment_id": 68249070, "body": "Switched them and still same error. Im going to try using dlOpen :s"}], "answers": [{"tags": [], "owner": {"reputation": 9545, "user_id": 5295429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XcJZr.png?s=128&g=1", "display_name": "Oo.oO", "link": "https://stackoverflow.com/users/5295429/oo-oo"}, "is_accepted": true, "score": 3, "last_activity_date": 1582356598, "last_edit_date": 1582356598, "creation_date": 1479314534, "answer_id": 40637572, "question_id": 40501964, "link": "https://stackoverflow.com/questions/40501964/jni-and-shared-libraries/40637572#40637572", "title": "Jni and shared libraries", "body": "<p>Make sure to link your JNI code with shared library you want to use.</p>\n\n<p>You can take a look at sample code here:</p>\n\n<p><a href=\"https://github.com/mkowsiak/jnicookbook/tree/master/recipes/recipeNo023\" rel=\"nofollow noreferrer\">https://github.com/mkowsiak/jnicookbook/tree/master/recipes/recipeNo023</a></p>\n\n<p>In this sample you have JNI function:</p>\n\n<pre><code>JNIEXPORT void JNICALL Java_recipeNo023_HelloWorld_displayMessage\n  (JNIEnv *env, jclass obj) {\n\n    printf(\"Hello world!\\n\");\n    /* We are calling function from another source */\n\n    anotherFunction();\n}\n</code></pre>\n\n<p>that calls function from some external shared library</p>\n\n<pre><code>void anotherFunction() {\n    // we are printing message from another C file\n    printf(\"Hello from another function!\\n\");\n}\n</code></pre>\n\n<p>You have to make sure that your JNI library is linked with the library you want to use:</p>\n\n<pre><code>cc -g -shared -fpic -I${JAVA_HOME}/include -I${JAVA_HOME}/include/$(ARCH) c/recipeNo023_HelloWorld.c -L./lib -lAnotherFunction -o lib/libHelloWorld.$(EXT)\n</code></pre>\n\n<p>In this sample</p>\n\n<pre><code>-L./lib -lAnotherFunction\n</code></pre>\n\n<p>tells compiler to use this \"other\" library that contains symbols not available inside library that contains JNI code.</p>\n"}], "owner": {"reputation": 77, "user_id": 6384738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99b36cd880248c141f9adcb62c3282f2?s=128&d=identicon&r=PG&f=1", "display_name": "Tortxu13", "link": "https://stackoverflow.com/users/6384738/tortxu13"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2306, "favorite_count": 0, "accepted_answer_id": 40637572, "answer_count": 1, "score": 4, "last_activity_date": 1582356598, "creation_date": 1478676869, "last_edit_date": 1478693084, "question_id": 40501964, "link": "https://stackoverflow.com/questions/40501964/jni-and-shared-libraries", "title": "Jni and shared libraries", "body": "<p>I have made a program in Java that calls to some functions in native language C. Made a shared library of that C function file and made a shared library, and all worked perfectly. </p>\n\n<p>My problem is when I try to call other functions for example in PBC (Pairing Based Cryptography) library. The C files that are in the shared library include the required .h files for knowing the functions in PBC but I can't use them, I don't know why. What should I do? How can I call functions that are in another libraries?</p>\n\n<p>Java code for loading the libraries.</p>\n\n<pre><code>static {\n\n    System.loadLibrary(\"myLibrary\");\n    System.loadLibrary(\"pbc\");\n}\n</code></pre>\n\n<p>Error when executing my own Java program: </p>\n\n<pre><code>undefined symbol: pairing_init_set_buf\n</code></pre>\n"}, {"tags": ["c++", "c", "arrays", "string", "pointers"], "comments": [{"owner": {"reputation": 7393, "user_id": 1690777, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/18ef5bab4c70735313d86c7240e4abed?s=128&d=identicon&r=PG", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1690777/sergey"}, "edited": false, "score": 0, "creation_date": 1478675493, "post_id": 40501601, "comment_id": 68246705, "body": "Did you suppose to write <code>ara[i]!=&#39;\\0&#39;</code> instead of <code>i!=&#39;\\0&#39;</code>?"}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 1, "creation_date": 1478676169, "post_id": 40501601, "comment_id": 68246959, "body": "A matter of coincidence."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1478688233, "post_id": 40501601, "comment_id": 68252824, "body": "Thought experiment: take a deck of cards and toss them all over the floor. Set down your foot on one card. Lift your foot and see what it is. Put your foot down on the card again. Would you be surprised if you saw the same card the next time you lifted your foot?"}], "answers": [{"comments": [{"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1478676404, "post_id": 40501666, "comment_id": 68247056, "body": "Ending at <code>ara[4]</code> is not so much of luck, as it could theoretically be outside the region of mapped memory (i.e., result in a bus-fault). The luck, perhaps, is in the fact that no memory access violations occurs as a result of reading <code>ara[4]</code> (or perhaps it&#39;s in fact not so fortunate, as one does not become aware of the problem immediately thereafter, leaving themselves to the mercy of the gods of debug sessions)."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1478676547, "post_id": 40501666, "comment_id": 68247120, "body": "@barakmanos, I doubt it could end up outside of the mapped memory region. There is the data kept by the hosted environment on the stack frame to consider. But yes, &quot;working&quot; rather than crash &amp; burning is unlucky."}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1478676835, "post_id": 40501666, "comment_id": 68247238, "body": "&quot;the data kept by the hosted environment on the stack frame to consider&quot; - that&#39;s platform specific (and in any case, not something dictated by the language standard). For example, suppose you&#39;re running on bare-metal (i.e., no OS, no virtual memory, no threads and no processes), and it just so happen that this array is allocated at the end of the stack at the point in time when the function is called. BTW, this array may well be allocated in the data section, not in the stack (i.e., global and or static). OP doesn&#39;t specify that fact. But again, this is not dictated by the language standard."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1478677115, "post_id": 40501666, "comment_id": 68247321, "body": "@barakmanos, Rationalizing UB is an exercise in futility. So I reworded it with less assumptions about the OPs code. Any one of your points or my original explanation can be true."}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1478677777, "post_id": 40501666, "comment_id": 68247560, "body": "I wasn&#39;t trying to rationalize it. I merely implied that by &quot;It ends in <code>ara[4]</code> because you are lucky&quot;, you were in fact trying to rationalize it yourself, since there is not much luck in that. In any case, I guess that this is more of a philosophical debate, so..."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1478677877, "post_id": 40501666, "comment_id": 68247598, "body": "@barakmanos, well I admitted to trying to rationalize it. Regardless, I think my latest edit covers all bases :)"}], "tags": [], "owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1478677848, "last_edit_date": 1478677848, "creation_date": 1478675425, "answer_id": 40501666, "question_id": 40501601, "link": "https://stackoverflow.com/questions/40501601/why-does-a-char-string-of-n-length-in-c-always-have-a-null-char-on-n-index-a/40501666#40501666", "title": "Why does a char string of n length in c++ always have a null char on [n] index as garbage?", "body": "<p>You don't have a null terminator inside your array. <code>printf</code> reads past its end. That is undefined behavior by the c++ standard. It ends in <code>ara[4]</code> because you are (un)lucky. It can go further or even crash you program, because what it should do is <strong>undefined</strong>.</p>\n\n<p>To possibly rationalize the stop at <code>ara[4]</code>: There is probably a <code>\\0</code> character at that location past your buffer</p>\n"}, {"comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1478675614, "post_id": 40501683, "comment_id": 68246758, "body": "It&#39;s not garbage, it&#39;s unspecified."}, {"owner": {"reputation": 1320, "user_id": 2951452, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/f290996860e5cd35acb0835e4f0d33ea?s=128&d=identicon&r=PG&f=1", "display_name": "Ali Kazmi", "link": "https://stackoverflow.com/users/2951452/ali-kazmi"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1478675644, "post_id": 40501683, "comment_id": 68246776, "body": "yeah its Undefined and may lead to UB"}], "tags": [], "owner": {"reputation": 1320, "user_id": 2951452, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/f290996860e5cd35acb0835e4f0d33ea?s=128&d=identicon&r=PG&f=1", "display_name": "Ali Kazmi", "link": "https://stackoverflow.com/users/2951452/ali-kazmi"}, "is_accepted": false, "score": 0, "last_activity_date": 1478675487, "creation_date": 1478675487, "answer_id": 40501683, "question_id": 40501601, "link": "https://stackoverflow.com/questions/40501601/why-does-a-char-string-of-n-length-in-c-always-have-a-null-char-on-n-index-a/40501683#40501683", "title": "Why does a char string of n length in c++ always have a null char on [n] index as garbage?", "body": "<p>How you you expect to <code>i=='\\0'</code>\nsimply iterate up to array size or compare a character value to '\\0'. The random indexes you are getting because of garbage values in memory.</p>\n"}, {"tags": [], "owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "is_accepted": false, "score": 0, "last_activity_date": 1478700827, "creation_date": 1478700827, "answer_id": 40509039, "question_id": 40501601, "link": "https://stackoverflow.com/questions/40501601/why-does-a-char-string-of-n-length-in-c-always-have-a-null-char-on-n-index-a/40509039#40509039", "title": "Why does a char string of n length in c++ always have a null char on [n] index as garbage?", "body": "<p>It's quite likely that your implementation lays out the local variables as</p>\n\n<ul>\n<li><code>ara</code> - 3 bytes</li>\n<li>padding - 1 byte</li>\n<li><code>i</code> (or some other local variable).</li>\n</ul>\n\n<p>So when you reach the end of <code>ara</code> and get into Undefined Behaviour, the outcome is still fairly deterministic (but subject to change if you use a different compiler).</p>\n"}], "owner": {"reputation": 859, "user_id": 6452525, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/1137294009661181/picture?type=large", "display_name": "Rahat Zaman", "link": "https://stackoverflow.com/users/6452525/rahat-zaman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "closed_date": 1479163691, "answer_count": 3, "score": -5, "last_activity_date": 1510979522, "creation_date": 1478675133, "last_edit_date": 1510979522, "question_id": 40501601, "link": "https://stackoverflow.com/questions/40501601/why-does-a-char-string-of-n-length-in-c-always-have-a-null-char-on-n-index-a", "closed_reason": "Duplicate", "title": "Why does a char string of n length in c++ always have a null char on [n] index as garbage?", "body": "<p>When declaring a char array of length n, the value at [n] always is 0. Shouldn't it be a garbage value? </p>\n\n<h2>Code</h2>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    char arr[3];\n    arr[0] = 'a'; arr[1] = 'b'; arr[2] = 'c';\n    // Here arr[3] can be any garbage value.\n    // But it always appears to be 0. Why?\n\n    // Also arr[4], arr[5], arr[6]... are not 0,\n    // just some garbage as expected\n\n    printf(\"i\\tch  ascii\\n\");\n    int i;\n\n    for(i = 0; arr[i] != 0; i++) //Always breaks at i=3\n        printf(\"%d\\t%c\\t%d\\n\", i, arr[i], (int) arr[i]);\n    int more = i + 5;\n    for(; i&lt;more; i++)\n        // I am intentionally going outside the bound\n        printf(\"%i\\t%c\\t%d\\n\", i, arr[i], (int) arr[i]);\n    return 0;\n}\n</code></pre>\n\n<h2>Expected output</h2>\n\n<p>What do you think the output will be? You may assume :</p>\n\n<pre><code>i   ch  ascii\n0   a   97\n1   b   98\n2   c   99\n3   N   78  ----&gt; (This may or may not be 0)\n4   \ufffd   -103\n5   N   78\n6   \ufffd   -125\n7   \ufffd   -100\n</code></pre>\n\n<h2>Actual output</h2>\n\n<pre><code>i   ch  ascii\n0   a   97\n1   b   98\n2   c   99\n3       0  ----&gt; (Why is this always 0?)\n4   \ufffd   -103\n5   N   78\n6   \ufffd   -125\n7   \ufffd   -100\n</code></pre>\n\n<p>Note: This does not happen with int/double/float arrays.</p>\n"}, {"tags": ["c", "arrays", "pointers", "char"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1478674158, "post_id": 40501342, "comment_id": 68246278, "body": "1) <code>char(array)</code> --&gt; <code>char array[]</code> 2) <code>array[&amp;i]</code> --&gt; <code>array[i]</code> 3) put <code>void countletter(char array[], char x);</code> before <code>main</code>. 4) <code>&quot;%[^\\n],</code> --&gt; <code>&quot;%[^\\n]&quot;,</code>"}], "answers": [{"tags": [], "owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "is_accepted": false, "score": 2, "last_activity_date": 1478674159, "creation_date": 1478674159, "answer_id": 40501411, "question_id": 40501342, "link": "https://stackoverflow.com/questions/40501342/how-to-count-a-specific-character-in-an-array-and-also-call-the-function/40501411#40501411", "title": "How to count a specific character in an array and also call the function?", "body": "<p>The function you have written is wrong</p>\n\n<pre><code>void countletter(char *array, char x)\n{\n  int i = 0;\n  int count = 0;\n  for (i = 0; array[i] != '\\0'; i++)\n     if(array[i] == x)\n       count++;\n  printf(\"Number of %c's: %d\\n\", x, count);\n}\n</code></pre>\n\n<p>Also before main, you have to declare the function</p>\n\n<pre><code>void countletter(char *array, char x);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 70, "user_id": 6907380, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/31f33090406e100c561dd39c8781af82?s=128&d=identicon&r=PG&f=1", "display_name": "CodeFreak", "link": "https://stackoverflow.com/users/6907380/codefreak"}, "edited": false, "score": 0, "creation_date": 1478678071, "post_id": 40501441, "comment_id": 68247665, "body": "Thank you! this is exactly where my confusion was. It is working perfect. However, I had one more question in hopes of not having to make a whole new question...My question is, is there a way using the toupper() function that I could take in input that was lowercase &#39;a&#39;, and &#39;l&#39;, and still count them along with still counting the capital version?"}, {"owner": {"reputation": 409, "user_id": 3415821, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/698e7f6547b4565c18f25d9120ef4e48?s=128&d=identicon&r=PG&f=1", "display_name": "Hrishikesh Goyal", "link": "https://stackoverflow.com/users/3415821/hrishikesh-goyal"}, "reply_to_user": {"reputation": 70, "user_id": 6907380, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/31f33090406e100c561dd39c8781af82?s=128&d=identicon&r=PG&f=1", "display_name": "CodeFreak", "link": "https://stackoverflow.com/users/6907380/codefreak"}, "edited": false, "score": 0, "creation_date": 1478695003, "post_id": 40501441, "comment_id": 68256536, "body": "I didn&#39;t get your doubt. Can you please explain properly using an example?"}, {"owner": {"reputation": 70, "user_id": 6907380, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/31f33090406e100c561dd39c8781af82?s=128&d=identicon&r=PG&f=1", "display_name": "CodeFreak", "link": "https://stackoverflow.com/users/6907380/codefreak"}, "edited": false, "score": 0, "creation_date": 1478740750, "post_id": 40501441, "comment_id": 68278822, "body": "ok, so if I had entered AabcdlL as an input. I want it to count both the capital and lowercase letters of &#39;a/A&#39; and &#39;l/L&#39;. The output would say there are 2 A&#39;s and 2 L&#39;s if that clears up any confusion. I assumed I could just add the &#39;toupper&#39; function somewhere but I have had no luck."}, {"owner": {"reputation": 409, "user_id": 3415821, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/698e7f6547b4565c18f25d9120ef4e48?s=128&d=identicon&r=PG&f=1", "display_name": "Hrishikesh Goyal", "link": "https://stackoverflow.com/users/3415821/hrishikesh-goyal"}, "reply_to_user": {"reputation": 70, "user_id": 6907380, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/31f33090406e100c561dd39c8781af82?s=128&d=identicon&r=PG&f=1", "display_name": "CodeFreak", "link": "https://stackoverflow.com/users/6907380/codefreak"}, "edited": false, "score": 0, "creation_date": 1478758881, "post_id": 40501441, "comment_id": 68283049, "body": "Okay. So basically you want to make case insensitive count of char provided in the countletter() function parameter &#39;x&#39;. In that case replace the conditional block &lt;if(array[i] == x)&gt; inside the loop with &lt;if(toupper(array[i]) == toupper(x))&gt;"}], "tags": [], "owner": {"reputation": 409, "user_id": 3415821, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/698e7f6547b4565c18f25d9120ef4e48?s=128&d=identicon&r=PG&f=1", "display_name": "Hrishikesh Goyal", "link": "https://stackoverflow.com/users/3415821/hrishikesh-goyal"}, "is_accepted": false, "score": 2, "last_activity_date": 1478674306, "creation_date": 1478674306, "answer_id": 40501441, "question_id": 40501342, "link": "https://stackoverflow.com/questions/40501342/how-to-count-a-specific-character-in-an-array-and-also-call-the-function/40501441#40501441", "title": "How to count a specific character in an array and also call the function?", "body": "<p>Instead of defining </p>\n\n<pre><code>void countletter(char(array), char x)\n {\n   int i = 0;\n   int count = 0;\n   for (i = 0; array[&amp;i] != '\\0'; i++)\n      if(array[&amp;i] == x)\n         count++;\n    printf(\"Number of %c's: %d\\n\", x, count);\n  }\n</code></pre>\n\n<p>you should define:</p>\n\n<pre><code>void countletter(char array[], char x) // OR void countletter(char* array, char x)\n {\n   int i = 0;\n   int count = 0;\n   for (i = 0; array[i] != '\\0'; i++)\n      if(array[i] == x)\n         count++;\n    printf(\"Number of %c's: %d\\n\", x, count);\n  }\n</code></pre>\n\n<p>Moreover its a good practice to always pass size with an array or string. So probably below is the better function prototype.</p>\n\n<pre><code>void countletter(char array[], int size, char x)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2604, "user_id": 93763, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/0398272b3bacf46c360bc7f17bfcc500?s=128&d=identicon&r=PG", "display_name": "GMichael", "link": "https://stackoverflow.com/users/93763/gmichael"}, "is_accepted": false, "score": 2, "last_activity_date": 1478674345, "creation_date": 1478674345, "answer_id": 40501452, "question_id": 40501342, "link": "https://stackoverflow.com/questions/40501342/how-to-count-a-specific-character-in-an-array-and-also-call-the-function/40501452#40501452", "title": "How to count a specific character in an array and also call the function?", "body": "<p>There are two errors int he code:</p>\n\n<pre><code>void countletter(char(array), char x)\n</code></pre>\n\n<p>and</p>\n\n<pre><code> for (i = 0; array[&amp;i] != '\\0'; i++)\n  if(array[&amp;i] == x)\n</code></pre>\n\n<p>The correct lines are:</p>\n\n<pre><code>void countletter(char* array, size_t size, char x)\n</code></pre>\n\n<p>and</p>\n\n<pre><code> for (i = 0; (i &lt; size) &amp;&amp; (array[i] != '\\0'); i++)\n  if(array[i] == x)\n</code></pre>\n\n<p>You have to pass the entire array (by passing pointer to its first element in my example) and you have to work as usual (exactly as you did in the first monolithic version).</p>\n\n<p>You must also pass the array size and take it into account when working with the array.</p>\n"}, {"tags": [], "owner": {"reputation": 136, "user_id": 3816150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d7e5c21c02c69fd8b292b1d9f63e778?s=128&d=identicon&r=PG&f=1", "display_name": "AnkitAti", "link": "https://stackoverflow.com/users/3816150/ankitati"}, "is_accepted": false, "score": 0, "last_activity_date": 1478675353, "creation_date": 1478675353, "answer_id": 40501650, "question_id": 40501342, "link": "https://stackoverflow.com/questions/40501342/how-to-count-a-specific-character-in-an-array-and-also-call-the-function/40501650#40501650", "title": "How to count a specific character in an array and also call the function?", "body": "<p>I would personally prefer this syntax for dealing with pointers.</p>\n\n<pre><code>void countLetter(char *array, char x) {...}\n</code></pre>\n\n<p>And for iterating through the array</p>\n\n<pre><code>for(i=0; *(array+i) != '\\0'; i++)\n</code></pre>\n\n<p>Similarly for comparing </p>\n\n<pre><code>if(*(array+i) == x)\n</code></pre>\n\n<p>Internally, <code>array[i]</code> gets converted in <code>*(array+i)</code>, so you can choose whatever you want.\nThe problem with your code is your method</p>\n\n<pre><code>countletter(char(array), char x)\n</code></pre>\n\n<p>This method is expecting two characters as parameters, where as you are passing a pointer and a character.\nSecond one is</p>\n\n<pre><code>array[&amp;i]\n</code></pre>\n\n<p>For accessing ith element of an array, you should use something like <code>array[i]</code>.  </p>\n"}], "owner": {"reputation": 70, "user_id": 6907380, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/31f33090406e100c561dd39c8781af82?s=128&d=identicon&r=PG&f=1", "display_name": "CodeFreak", "link": "https://stackoverflow.com/users/6907380/codefreak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1254, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1478675353, "creation_date": 1478673823, "last_edit_date": 1478674458, "question_id": 40501342, "link": "https://stackoverflow.com/questions/40501342/how-to-count-a-specific-character-in-an-array-and-also-call-the-function", "title": "How to count a specific character in an array and also call the function?", "body": "<p>I am trying to make a program to count a specific character in an array. I got the program working how I think it should be working, however it was all in my main function and I wanted to break it out of there but I seem to be having an issue with doing so. My code when it was all in main was:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void)\n{\n   char array[100];\n   int i = 0;\n   int a_counter = 0;\n   printf(\"Enter an array: \\n\");\n   scanf(\"%[^\\n], array);\n   printf(\"Array is: %s\\n\", array);\n   for( i = 0; array[i] != '\\0'; i++)\n   {\n      if (array[i] == 'A')\n        a_counter++;\n   }\n   printf(\"Number of A's: %d\\n, a_counter);\n</code></pre>\n\n<p>}</p>\n\n<p>In the code above, if I enter AAABCDEF, the result would tell me that there are 3 A's.</p>\n\n<p>Now, I want to get this out of main and also not limit the character to only being an 'A'. I wanted to to count whatever character I set the function call with. My attempt to do so was this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void)\n{\n   char array[100];\n   printf(\"Enter an array: \\n\");\n   scanf(\"%[^\\n], array);\n   printf(\"Array is: %s\\n\", array);\n\n   countletter(array, 'A');\n   countletter(array, 'L');            //I want to call function and add \n                                       //whatever letter I felt like it\n   return 0;      \n }\n\n void countletter(char(array), char x)\n {\n   int i = 0;\n   int count = 0;\n   for (i = 0; array[&amp;i] != '\\0'; i++)\n      if(array[&amp;i] == x)\n         count++;\n    printf(\"Number of %c's: %d\\n\", x, count);\n  }\n</code></pre>\n\n<p>so if I called the countletter function, I wanted it to count the specific letter I sent it to count but my outputs were not even close. My outputs seemed to always be zero, and if I entered a specific array, it would put me in an infinite input mode. It seems that I am still confused on pointers and passing and calling functions.</p>\n"}, {"tags": ["c", "exit"], "answers": [{"tags": [], "owner": {"reputation": 1170, "user_id": 5829367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KSLEs.jpg?s=128&g=1", "display_name": "mahendra kamble", "link": "https://stackoverflow.com/users/5829367/mahendra-kamble"}, "is_accepted": false, "score": 0, "last_activity_date": 1478673038, "creation_date": 1478673038, "answer_id": 40501183, "question_id": 40501142, "link": "https://stackoverflow.com/questions/40501142/loop-conditional-and-exit-work-in-linear-and-binary-search/40501183#40501183", "title": "Loop conditional and exit work in linear and binary search", "body": "<p>The <code>exit</code> function is defined in <code>stdlib.h</code> library.</p>\n\n<p>Then you need to add this <code>#include &lt;stdlib.h&gt;</code> line to your  program </p>\n"}], "owner": {"reputation": 1, "user_id": 7116332, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rgqme.jpg?s=128&g=1", "display_name": "Abdul Sami Ayoubi", "link": "https://stackoverflow.com/users/7116332/abdul-sami-ayoubi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "closed_date": 1478686740, "answer_count": 1, "score": -3, "last_activity_date": 1478685035, "creation_date": 1478672808, "last_edit_date": 1478685035, "question_id": 40501142, "link": "https://stackoverflow.com/questions/40501142/loop-conditional-and-exit-work-in-linear-and-binary-search", "closed_reason": "Duplicate", "title": "Loop conditional and exit work in linear and binary search", "body": "<blockquote>\n  <p>25    6   C:\\Users\\DELL\\Desktop\\Dev C++\\binary.c  [Warning] incompatible\n  implicit declaration of built-in function 'exit'</p>\n</blockquote>\n\n<p>I am using Dev c++ and here as you can see it says:</p>\n\n<blockquote>\n  <p>incompatible implicit declaration of built-in function 'exit'</p>\n</blockquote>\n\n<p>I really fed up of this error. </p>\n"}, {"tags": ["c", "glibc", "wchar-t", "setlocale", "widechar"], "comments": [{"owner": {"reputation": 695058, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 1, "creation_date": 1478667609, "post_id": 40500388, "comment_id": 68244463, "body": "How else would it know which alphabet to use?"}, {"owner": {"reputation": 1243, "user_id": 1487773, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/gnHdG.png?s=128&g=1", "display_name": "Igor Liferenko", "link": "https://stackoverflow.com/users/1487773/igor-liferenko"}, "reply_to_user": {"reputation": 695058, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1478667685, "post_id": 40500388, "comment_id": 68244478, "body": "@IgnacioVazquez-Abrams ISO10646 - it is fixed for wide characters. <a href=\"https://www.gnu.org/software/libc/manual/html_node/Extended-Char-Intro.html\" rel=\"nofollow noreferrer\">gnu.org/software/libc/manual/html_node/Extended-Char-Intro.h&zwnj;&#8203;tml</a>"}, {"owner": {"reputation": 695058, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1478667720, "post_id": 40500388, "comment_id": 68244487, "body": "ISO 10646 does not name an alphabet."}, {"owner": {"reputation": 1243, "user_id": 1487773, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/gnHdG.png?s=128&g=1", "display_name": "Igor Liferenko", "link": "https://stackoverflow.com/users/1487773/igor-liferenko"}, "reply_to_user": {"reputation": 695058, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1478667858, "post_id": 40500388, "comment_id": 68244513, "body": "@IgnacioVazquez-Abrams Did you notice that I used <code>en_US.UTF-8</code>, but the symbol <code>\u044f</code> is not from <code>en_US</code>, and it is classified correctly. So, no, ISO10646 <i>does</i> name the alphabet."}, {"owner": {"reputation": 695058, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1478667981, "post_id": 40500388, "comment_id": 68244536, "body": "It is not part of the en_US alphabet, but it does have a defined collate in that language."}, {"owner": {"reputation": 1243, "user_id": 1487773, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/gnHdG.png?s=128&g=1", "display_name": "Igor Liferenko", "link": "https://stackoverflow.com/users/1487773/igor-liferenko"}, "reply_to_user": {"reputation": 695058, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1478668094, "post_id": 40500388, "comment_id": 68244563, "body": "@IgnacioVazquez-Abrams if any alphabet has info from any other alphabet (as it follows from your last comment) - this confirms that there is no need to specify the alphabet separately."}, {"owner": {"reputation": 695058, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1478668462, "post_id": 40500388, "comment_id": 68244647, "body": "<a href=\"https://sourceware.org/git/?p=glibc.git;a=blob;f=localedata/locales/en_US;hb=HEAD\" rel=\"nofollow noreferrer\">en_US</a> inherits from <a href=\"https://sourceware.org/git/?p=glibc.git;a=blob;f=localedata/locales/en_GB;hb=HEAD\" rel=\"nofollow noreferrer\">en_GB</a> which inherits from <a href=\"https://sourceware.org/git/?p=glibc.git;a=blob;f=localedata/locales/i18n;hb=HEAD\" rel=\"nofollow noreferrer\">i18n</a> which does classify &quot;\u044f&quot;."}, {"owner": {"reputation": 1243, "user_id": 1487773, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/gnHdG.png?s=128&g=1", "display_name": "Igor Liferenko", "link": "https://stackoverflow.com/users/1487773/igor-liferenko"}, "reply_to_user": {"reputation": 695058, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1478668921, "post_id": 40500388, "comment_id": 68244757, "body": "@IgnacioVazquez-Abrams OK, but WHY specify the parameter which carries no information? All alphabets are inherited (according to your last comment) from a fixed all-inclusive alphabet. Moreover, this is the point of wide characters - to use <i>one</i> alphabet."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1478669501, "post_id": 40500388, "comment_id": 68244897, "body": "Using <code>&lt;ctype.h&gt;</code> does not require a call to <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/setlocale.html\" rel=\"nofollow noreferrer\"><code>setlocale()</code></a> \u2014 those functions must work in an implementation-defined manner as if <code>setlocale(LC_ALL, &quot;C&quot;)</code> was called before the program starts. The same is true of the rest of the standard library. The only other defined value (in the C standard) is <code>&quot;&quot;</code>, the empty string, which uses an implementation-defined locale.  POSIX defines <code>&quot;POSIX&quot;</code> as an alternative name too, but it is equivalent to <code>&quot;C&quot;</code>.  So, I disagree with your &quot;It goes without saying&quot; aside."}, {"owner": {"reputation": 695058, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1478669502, "post_id": 40500388, "comment_id": 68244898, "body": "Wide characters let you use a unified set of characters, but still represent multiple overlapping alphabets. E.g. the English and Turkish alphabets have &quot;i&quot; and &quot;I&quot;, but English considers them the same character while Turkish considers them different."}, {"owner": {"reputation": 1243, "user_id": 1487773, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/gnHdG.png?s=128&g=1", "display_name": "Igor Liferenko", "link": "https://stackoverflow.com/users/1487773/igor-liferenko"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1478670056, "post_id": 40500388, "comment_id": 68245045, "body": "@JonathanLeffler Thanks, I will correct this."}], "answers": [{"comments": [{"owner": {"reputation": 1243, "user_id": 1487773, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/gnHdG.png?s=128&g=1", "display_name": "Igor Liferenko", "link": "https://stackoverflow.com/users/1487773/igor-liferenko"}, "edited": false, "score": 0, "creation_date": 1478675520, "post_id": 40501368, "comment_id": 68246714, "body": "I&#39;m trying to understand the reasoning behind the standard. If unspecified, locale is <code>&quot;C&quot;</code>. So, if <code>setlocale()</code> is removed from the example in OP, it must work anyway, but it does not. What prevents <code>&quot;C&quot;</code> to inherit from <code>i18n</code>, while <code>&quot;en_US&quot;</code> inherits from <code>i18n</code> ? (see comment of IgnacioVazquez-Abrams to OP)"}], "tags": [], "owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "is_accepted": true, "score": 1, "last_activity_date": 1478678799, "last_edit_date": 1478678799, "creation_date": 1478673921, "answer_id": 40501368, "question_id": 40500388, "link": "https://stackoverflow.com/questions/40500388/why-functions-from-wctype-h-do-not-work-without-setlocale/40501368#40501368", "title": "Why functions from wctype.h do not work without setlocale()?", "body": "<p>The C standard says:</p>\n\n<blockquote>\n  <p>7.25 Wide character classification and mapping utilities <code>&lt;wctype.h&gt;</code></p>\n  \n  <p>...</p>\n  \n  <p>The behavior of these functions is affected by the <code>LC_CTYPE</code> category of the current locale.</p>\n</blockquote>\n\n<p>Moreover (5.2.1 Character sets)</p>\n\n<blockquote>\n  <p>Two sets of characters and their associated collating sequences shall be defined: the set in\n  which source files are written (the source character set), and the set interpreted in the\n  execution environment (the execution character set). Each set is further divided into a\n  basic character set, whose contents are given by this subclause, and a set of zero or more\n  <strong>locale-specific members</strong> (which are not members of the basic character set) called\n  extended characters.</p>\n</blockquote>\n\n<p>and then (7.19 Common definitions <code>&lt;stddef.h&gt;</code>)</p>\n\n<blockquote>\n  <p><code>wchar_t</code>\n  which is an integer type whose range of values can represent distinct codes for all members of the <strong>largest extended character set specified among the supported locales</strong></p>\n</blockquote>\n\n<p>So there may be many extended character sets, one for each locale. Thus, wchar_t encoding may be locale dependent, because an encoding is a mapping between a set of integer codes and a set of characters, and the latter is potentially locale dependent.</p>\n\n<p>Given the above, <code>&lt;wctype.h&gt;</code> <strong>must</strong> be locale dependent. Otherwise the standard would have to mandate that there is a single locale independent extended character set.</p>\n\n<p>In this particular example, the value of the wide character constant <code>L'\u044f'</code> (some integer code) may or may not correspond to any member of the extended character set under C locale. </p>\n\n<p>As for specific behaviour of gcc and glibc, they always use Unicode/ISO10646/UCS4 as the extended character set for simplicity, under any locale. However they do not classify extended characters under C locale because they don't have to, as the standard permits. (A wild guess follows) Full Unicode classification tables are large and programs that only need ASCII don't have to pay for their use.</p>\n"}], "owner": {"reputation": 1243, "user_id": 1487773, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/gnHdG.png?s=128&g=1", "display_name": "Igor Liferenko", "link": "https://stackoverflow.com/users/1487773/igor-liferenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 40501368, "answer_count": 1, "score": 3, "last_activity_date": 1478678799, "creation_date": 1478667529, "last_edit_date": 1478670132, "question_id": 40500388, "link": "https://stackoverflow.com/questions/40500388/why-functions-from-wctype-h-do-not-work-without-setlocale", "title": "Why functions from wctype.h do not work without setlocale()?", "body": "<p>My setup: glibc 2.24, gcc 6.2.0, UTF-8 environment.</p>\n\n<p>Consider the following example:</p>\n\n<pre><code>#include &lt;wchar.h&gt;\n#include &lt;wctype.h&gt;\n#include &lt;locale.h&gt;\nint main(void)\n{\n  setlocale(LC_CTYPE, \"en_US.UTF-8\");\n  wchar_t wc = L'\u044f'; /* 00000100 01001111 */\n  if (iswlower(wc)) return 0;\n  return 1;\n}\n</code></pre>\n\n<p>Compile and run it:</p>\n\n<pre><code>$ gcc test.c\n$ ./a.out; echo $?\n0\n</code></pre>\n\n<p>Now remove <code>setlocale()</code> and run again. The result is different:</p>\n\n<pre><code>$ gcc test.c\n$ ./a.out; echo $?\n1\n</code></pre>\n\n<p>Technically, <code>setlocale()</code> is not needed here, because functions from <code>wctype.h</code> work with wide characters, which have a fixed encoding. (It goes without saying that <code>setlocale()</code> is required if we want functions from <code>ctype.h</code> to work correctly with non-ASCII characters, and if we use character conversion functions from wchar.h - to set external encoding.)</p>\n\n<p>Why the example doesn't work without <code>setlocale()</code>?</p>\n"}, {"tags": ["c", "arrays", "pointers", "struct"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1478664656, "post_id": 40500072, "comment_id": 68243969, "body": "Your assignment to <code>insertItem</code> in the loop leaks the memory allocated before the loop.  I don&#39;t think you need the memory allocation or release at all in the sort function.  In fact, I&#39;m sure you don&#39;t; you free the last item that was stored in <code>insertItem</code> after the loop, which then gives you problems later when you access (and free) already freed memory."}, {"owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "edited": false, "score": 0, "creation_date": 1478668015, "post_id": 40500072, "comment_id": 68244543, "body": "What does your file look like btw?"}], "answers": [{"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 2, "last_activity_date": 1478681798, "last_edit_date": 1495541231, "creation_date": 1478668544, "answer_id": 40500501, "question_id": 40500072, "link": "https://stackoverflow.com/questions/40500072/sorting-an-array-of-struct-pointers/40500501#40500501", "title": "Sorting an array of struct pointers", "body": "<p>There was a bit more work than there should be to create an MCVE (<a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, Verifiable Example</a>), but this code basically validates my <a href=\"https://stackoverflow.com/questions/40500072/sorting-an-array-of-struct-pointers#comment68243969_40500072\">comment</a>:</p>\n\n<blockquote>\n  <p>Your assignment to <code>insertItem</code> in the loop leaks the memory allocated before the loop. I don't think you need the memory allocation or release at all in the sort function. In fact, I'm sure you don't; you free the last item that was stored in <code>insertItem</code> after the loop, which then gives you problems later when you access (and free) already freed memory.</p>\n</blockquote>\n\n<p>Your data structure with the allocated single integer is wasteful (especially on a 64-bit machine); it should be a plain <code>int</code> member of the structure.  If you're going to deal with fixed size names, you could make the name into a fixed size array too.  However, that's a minor refinement (and not implemented).  The integer pointer made it inconvenient to use the <code>candidate</code> structure for the internal data.  I could have used C99 'compound literals' such as <code>&amp;(int){ 8000 }</code>, but that requires more explanation (and the array can no longer be <code>static</code>, and the call to <code>new_candidate()</code> has to be modified).</p>\n\n<p>You also needed to change the limit in the <code>while</code> loop from <code>k &gt; 0</code> to <code>k &gt;= 0</code>; otherwise, Henrietta stays at the front of the list.</p>\n\n<p>Here is a more-or-less minimal MCVE with the fixes in place:</p>\n\n<pre><code>#include &lt;assert.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\ntypedef struct candidate\n{\n    char *name;\n    int  *numVotes;\n} candidate;\n\nstatic\nvoid insertionSortAlpha(candidate *person[], int lo, int hi)\n{\n    candidate *insertItem;\n    //insertItem = malloc(sizeof(candidate));\n    //insertItem-&gt;name = malloc(25 * sizeof(char));\n    //insertItem-&gt;numVotes = malloc(sizeof(int));\n\n    int i;\n    for (i = lo + 1; i &lt;= hi; i++)\n    {\n        insertItem = person[i];\n        int k = i - 1;\n        // k &gt; 0 --&gt; k &gt;= 0\n        while (k &gt;= 0 &amp;&amp; strcmp(insertItem-&gt;name, person[k]-&gt;name) &lt; 0)\n        {\n            person[k + 1] = person[k];\n            --k;\n        }\n        person[k + 1] = insertItem;\n    }\n    //free(insertItem-&gt;numVotes);\n    //free(insertItem-&gt;name);\n    //free(insertItem);\n}\n\ntypedef struct BaseData\n{\n    char *name;\n    int   numVotes;\n} BaseData;\n\nstatic void *emalloc(size_t size, const char *func)\n{\n    void *vp = malloc(size);\n    if (vp == 0)\n    {\n        fprintf(stderr, \"Failed to allocate %zu bytes of memory in %s()\\n\", size, func);\n        exit(EXIT_FAILURE);\n    }\n    return vp;\n}\n\nstatic candidate *new_candidate(const char *name, int votes)\n{\n    candidate *person = emalloc(sizeof(*person), __func__);\n    person-&gt;name = emalloc(25, __func__);\n    assert(strlen(name) &lt; 25);\n    strcpy(person-&gt;name, name);\n    person-&gt;numVotes = emalloc(sizeof(int), __func__);\n    *person-&gt;numVotes = votes;\n    return person;\n}\n\nint main(void)\n{\n    candidate *Person[10];\n    static const BaseData people[] =\n    {\n        { \"Henrietta\",  8000 },\n        { \"Eric\",       5000 },\n        { \"Beatrice\",   2000 },\n        { \"Diana\",      4000 },\n        { \"Francesca\",  6000 },\n        { \"George\",     7000 },\n        { \"Ian\",        9000 },\n        { \"Janice\",    10000 },\n        { \"Adrian\",     1000 },\n        { \"Charles\",    3000 },\n    };\n\n    for (int i = 0; i &lt; 10; i++)\n        Person[i] = new_candidate(people[i].name, people[i].numVotes);\n\n    insertionSortAlpha(Person, 0, 9);\n    printf(\"\\n\\n\");\n    printf(\"Sorted Alphabetically\\n\");\n    for (int i = 0; i &lt; 10; i++)\n    {\n        printf(\"%-15s = %6d votes\\n\", Person[i]-&gt;name, *Person[i]-&gt;numVotes);\n    }\n\n    for (int i = 0; i &lt; 10; i++)\n    {\n        free(Person[i]-&gt;numVotes);\n        free(Person[i]-&gt;name);\n        free(Person[i]);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Example output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Sorted Alphabetically\nAdrian          =   1000 votes\nBeatrice        =   2000 votes\nCharles         =   3000 votes\nDiana           =   4000 votes\nEric            =   5000 votes\nFrancesca       =   6000 votes\nGeorge          =   7000 votes\nHenrietta       =   8000 votes\nIan             =   9000 votes\nJanice          =  10000 votes\n</code></pre>\n\n<p>Congratulations to Janice for winning the election.</p>\n"}], "owner": {"reputation": 49, "user_id": 7134754, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/427e4c1f7851170f630f2f57a68371c5?s=128&d=identicon&r=PG&f=1", "display_name": "sdfsdfsdf", "link": "https://stackoverflow.com/users/7134754/sdfsdfsdf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1478681798, "creation_date": 1478664447, "question_id": 40500072, "link": "https://stackoverflow.com/questions/40500072/sorting-an-array-of-struct-pointers", "title": "Sorting an array of struct pointers", "body": "<p>I have a function to sort an array of struct pointers alphabetically like so:  </p>\n\n<pre><code> void insertionSortAlpha(candidate* person[], int lo, int hi) { \n        candidate* insertItem;\n        insertItem = malloc(sizeof(candidate));\n        insertItem-&gt;name = malloc(25*sizeof(char));\n        insertItem-&gt;numVotes=malloc(sizeof(int));   \n\n        int i;\n        for(i=lo+1; i&lt;=hi; i++) { \n            insertItem = person[i];\n            int k = i - 1;\n            while (k &gt; 0 &amp;&amp; strcmp(insertItem-&gt;name, person[k]-&gt;name) &lt; 0) { \n                person[k + 1] = person[k];\n                --k;\n            }\n            person[k + 1] = insertItem;\n        }\n    free(insertItem-&gt;numVotes);\n    free(insertItem-&gt;name);\n    free(insertItem);}\n</code></pre>\n\n<p>I then call the function and free the memory like so. The names are populated from a file. When printing out, it always skips the name and number for the third element in the array. It also gives me an invalid pointer error. Why is this happening?</p>\n\n<pre><code>insertionSortAlpha(Person, 0, 9);\n  printf(\"\\n\\n\");\n  printf(\"Sorted Alphabetically\\n\");\n  for (i=0; i&lt;10;i++) {\n    printf(\"%s =  %d votes \\n\", Person[i]-&gt;name, *Person[i]-&gt;numVotes);\n  }\n for (i =0; i&lt;10; i++) { \n    free(Person[i]-&gt;numVotes);\n    free(Person[i]-&gt;name);\n    free(Person[i]);\n  }\n</code></pre>\n"}, {"tags": ["c", "return"], "comments": [{"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 4224, "user_id": 3383213, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/91b489041a73ecbb02cc26af19b5f664?s=128&d=identicon&r=PG&f=1", "display_name": "Himanshu", "link": "https://stackoverflow.com/users/3383213/himanshu"}, "edited": false, "score": 0, "creation_date": 1478664450, "post_id": 40500017, "comment_id": 68243929, "body": "@Himanshu OP said that he tried that but didn&#39;t get expected output."}, {"owner": {"reputation": 4224, "user_id": 3383213, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/91b489041a73ecbb02cc26af19b5f664?s=128&d=identicon&r=PG&f=1", "display_name": "Himanshu", "link": "https://stackoverflow.com/users/3383213/himanshu"}, "edited": false, "score": 0, "creation_date": 1478664680, "post_id": 40500017, "comment_id": 68243975, "body": "in function <code>convertToMPH</code> you are having argument type <code>float</code> while in loop you are passing <code>int</code>. try <code>convertToMPH((float)i)</code>."}, {"owner": {"reputation": 4224, "user_id": 3383213, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/91b489041a73ecbb02cc26af19b5f664?s=128&d=identicon&r=PG&f=1", "display_name": "Himanshu", "link": "https://stackoverflow.com/users/3383213/himanshu"}, "reply_to_user": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1478664944, "post_id": 40500017, "comment_id": 68244016, "body": "@ameyCU, see OP&#39;s comment in given answer. Problem was same as I mentioned earlier."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 4224, "user_id": 3383213, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/91b489041a73ecbb02cc26af19b5f664?s=128&d=identicon&r=PG&f=1", "display_name": "Himanshu", "link": "https://stackoverflow.com/users/3383213/himanshu"}, "edited": false, "score": 0, "creation_date": 1478665032, "post_id": 40500017, "comment_id": 68244031, "body": "@Himanshu Then OP&#39;s question is misleading as he mentioned <i>&quot;When I change &quot;%d&quot; to &quot;%f&quot; the output is 10 times worse,&quot;</i> ."}, {"owner": {"reputation": 51, "user_id": 7134696, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b8d4fcf7a0a3d1c8db018238f7e23bf7?s=128&d=identicon&r=PG&f=1", "display_name": "User_Unknown_3458", "link": "https://stackoverflow.com/users/7134696/user-unknown-3458"}, "edited": false, "score": 0, "creation_date": 1478668582, "post_id": 40500017, "comment_id": 68244682, "body": "I was changing both instances of &quot;%d&quot; instead of just one. For some reason I had spaced that one is an int and the other is a float. Honestly it was a dumb mistake but after staring at it for an hour the issue only seemed to further escape me. Thank you all for your help. :)"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 7134696, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b8d4fcf7a0a3d1c8db018238f7e23bf7?s=128&d=identicon&r=PG&f=1", "display_name": "User_Unknown_3458", "link": "https://stackoverflow.com/users/7134696/user-unknown-3458"}, "edited": false, "score": 0, "creation_date": 1478664651, "post_id": 40500055, "comment_id": 68243968, "body": "WOW. I feel dumb. Thank you so much."}], "tags": [], "owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "is_accepted": true, "score": 4, "last_activity_date": 1478664282, "creation_date": 1478664282, "answer_id": 40500055, "question_id": 40500017, "link": "https://stackoverflow.com/questions/40500017/returning-a-float-value-in-a-c-function/40500055#40500055", "title": "Returning a float value in a C function", "body": "<p>Change</p>\n\n<pre><code> printf(\"%d\\t%d\\n\", i, convertToMPH(i));\n</code></pre>\n\n<p>to</p>\n\n<pre><code> printf(\"%d\\t%f\\n\", i, convertToMPH(i));\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 7134696, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b8d4fcf7a0a3d1c8db018238f7e23bf7?s=128&d=identicon&r=PG&f=1", "display_name": "User_Unknown_3458", "link": "https://stackoverflow.com/users/7134696/user-unknown-3458"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 668, "favorite_count": 0, "accepted_answer_id": 40500055, "answer_count": 1, "score": 0, "last_activity_date": 1478664499, "creation_date": 1478663905, "last_edit_date": 1478664499, "question_id": 40500017, "link": "https://stackoverflow.com/questions/40500017/returning-a-float-value-in-a-c-function", "title": "Returning a float value in a C function", "body": "<p>First semester of CS. \nWhen I change \"%d\" to \"%f\" the output is 10 times worse, not even showing the KPH row. Really not sure what I am doing wrong other than that. \nThis is a screenie of what happens as it is now. </p>\n\n<p>Thanks for halpz I am n00b</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nfloat convertToMPH(float KPH);\nfloat convertToKPH(float MPH);\n\nint main(void){\n\n    int i;\n\n    puts(\"Kilometers per hour converted to miles per hour:\");\n    puts(\"Kph\\tMph\");\n\n\n    for(i=185; i&gt;=0; i-=5){\n        printf(\"%d\\t%d\\n\", i, convertToMPH(i));\n    }\n}\n\nfloat convertToMPH(float KPH){\nreturn (float) (KPH / 1.609344); \n\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/8quQy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8quQy.png\" alt=\"http://i63.tinypic.com/24mhmk3.png\"></a></p>\n"}, {"tags": ["c", "floating-point", "compare", "floating-accuracy"], "comments": [{"owner": {"reputation": 2866, "user_id": 327395, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/lYouK.jpg?s=128&g=1", "display_name": "dazedandconfused", "link": "https://stackoverflow.com/users/327395/dazedandconfused"}, "edited": false, "score": 0, "creation_date": 1478662152, "post_id": 40499814, "comment_id": 68243501, "body": "What is DBL_EPSILON set to?"}, {"owner": {"reputation": 183, "user_id": 5525220, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/MMLAK.jpg?s=128&g=1", "display_name": "Hichigaya Hachiman", "link": "https://stackoverflow.com/users/5525220/hichigaya-hachiman"}, "reply_to_user": {"reputation": 2866, "user_id": 327395, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/lYouK.jpg?s=128&g=1", "display_name": "dazedandconfused", "link": "https://stackoverflow.com/users/327395/dazedandconfused"}, "edited": false, "score": 0, "creation_date": 1478662336, "post_id": 40499814, "comment_id": 68243537, "body": "2.220446e-016 on my machine."}, {"owner": {"reputation": 2866, "user_id": 327395, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/lYouK.jpg?s=128&g=1", "display_name": "dazedandconfused", "link": "https://stackoverflow.com/users/327395/dazedandconfused"}, "edited": false, "score": 0, "creation_date": 1478662614, "post_id": 40499814, "comment_id": 68243581, "body": "Why multiple DBL_EPSILON by a in the equality function?  Is it your intention to allow a wider epsilon for larger values?"}, {"owner": {"reputation": 183, "user_id": 5525220, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/MMLAK.jpg?s=128&g=1", "display_name": "Hichigaya Hachiman", "link": "https://stackoverflow.com/users/5525220/hichigaya-hachiman"}, "reply_to_user": {"reputation": 2866, "user_id": 327395, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/lYouK.jpg?s=128&g=1", "display_name": "dazedandconfused", "link": "https://stackoverflow.com/users/327395/dazedandconfused"}, "edited": false, "score": 0, "creation_date": 1478662826, "post_id": 40499814, "comment_id": 68243618, "body": "<a href=\"http://c-faq.com/fp/fpequal.html\" rel=\"nofollow noreferrer\">THIS</a> was my reference."}, {"owner": {"reputation": 183, "user_id": 5525220, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/MMLAK.jpg?s=128&g=1", "display_name": "Hichigaya Hachiman", "link": "https://stackoverflow.com/users/5525220/hichigaya-hachiman"}, "edited": false, "score": 0, "creation_date": 1478663865, "post_id": 40499814, "comment_id": 68243811, "body": "There&#39;s a line of code after that <code>floor()</code> which increments <code>x</code> if the % is not 0. So before entering <code>greater()</code> <code>x</code> is 7."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1478665242, "post_id": 40499814, "comment_id": 68244056, "body": "Try <code>if ( a * 0.999999999999 &gt; b )</code>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1478665347, "post_id": 40499814, "comment_id": 68244076, "body": "In <code>equality()</code>, if <code>a</code> is negative, the values will never be counted as equal.  I&#39;ve usually seen the comparison as something like <code>fabs(a - b) &#47; max(fabs(a), fabs(b)) &gt; EPSILON</code> where the EPSILON would not usually be as aggressive as DBL_EPSILON."}, {"owner": {"reputation": 183, "user_id": 5525220, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/MMLAK.jpg?s=128&g=1", "display_name": "Hichigaya Hachiman", "link": "https://stackoverflow.com/users/5525220/hichigaya-hachiman"}, "edited": false, "score": 0, "creation_date": 1478666081, "post_id": 40499814, "comment_id": 68244196, "body": "I&#39;ve secured that none of those numbers will be negative."}, {"owner": {"reputation": 183, "user_id": 5525220, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/MMLAK.jpg?s=128&g=1", "display_name": "Hichigaya Hachiman", "link": "https://stackoverflow.com/users/5525220/hichigaya-hachiman"}, "edited": false, "score": 0, "creation_date": 1478666117, "post_id": 40499814, "comment_id": 68244206, "body": "<code>( a * 0.999999999999 &gt; b )</code> why would I only multiply the former number and not the latter?"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1478670566, "post_id": 40499814, "comment_id": 68245185, "body": "<code>(a-b) &gt; DBL_EPSILON</code> can be algebraically rearranged to <code>(a-DBL_EPSILON) &gt; b</code>. But notice in the <code>equality</code> function you multiply epsilon by <code>a</code>. That&#39;s due to the fact that the LSB of the mantissa scales with the value of <code>a</code>, so the epsilon value needs to be scaled. Hence, you should have <code>(a - a*DBL_EPSILON) &gt; b</code>, which is the same as <code>(a * (1-DBL_EPSILON)) &gt; b</code>. I have simply replaced <code>(1-DBL_EPSILON)</code> with <code>0.999999999999</code>."}, {"owner": {"reputation": 1580, "user_id": 6667256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c939d82ad703536dcfc9f9eee6dd819?s=128&d=identicon&r=PG&f=1", "display_name": "Franck", "link": "https://stackoverflow.com/users/6667256/franck"}, "edited": false, "score": 0, "creation_date": 1478733118, "post_id": 40499814, "comment_id": 68276752, "body": "in <code>greater</code>, you should test <code>(a-b) &gt; DBL_EPSILON*fabs(a)</code> since <code>DBL_EPSILON</code> is relative precision, not absolute precision."}], "owner": {"reputation": 183, "user_id": 5525220, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/MMLAK.jpg?s=128&g=1", "display_name": "Hichigaya Hachiman", "link": "https://stackoverflow.com/users/5525220/hichigaya-hachiman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 223, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1478678726, "creation_date": 1478661898, "last_edit_date": 1478678726, "question_id": 40499814, "link": "https://stackoverflow.com/questions/40499814/comparing-doubles-in-a-function", "title": "Comparing doubles in a function", "body": "<p>this is a part of my program:</p>\n\n<pre><code>int calculation ( double f_a, double f_b, double s_a, double s_b, double seam) {\n    int x, y, r1, r2;\n    double waste_x, waste_y, c;\n\n    x = (int)floor( s_a/f_a);\n    if ( equality(s_a-(f_a*x), 0) != 1) { //overlapping is better than missing though if there's no overlap, no need to add another piece of fabric\n        x++;\n    }\n    waste_x = x*f_a - s_a; //how much is wasted\n    if ( (greater((x-1)*seam,waste_x) == 1) ) { //seamed part of fabric has to be within the waste, greater and not eq\n        x++;\n    }\n        y = (int)floor( s_b/f_b);\n    if ( equality(s_b-(f_b*y),0) != 1) {\n        y++;\n    }\n    waste_y = y*f_b - s_b;\n    if ( greater((y-1)*seam,waste_y) == 1 ) {\n        y++;\n    }\n    r1 = x*y;\n\n    c = s_a;\n    s_a = s_b;\n    s_b = c; //swapping dimensions of sail\n    //repeat the process\n    x = (int)floor( s_a/f_a);\n    if ( equality(s_a-(f_a*x),0) != 1) {\n        x++;\n    }\n    waste_x = x*f_a - s_a;\n    if ( greater((x-1)*seam,waste_x) == 1 ) {\n        x++;\n    }\n    y = (int)floor( s_b/f_b);\n    if ( equality(s_b-(f_b*y),0) != 1) {\n        y++;\n    }\n    waste_y = y*f_b - s_b;\n    if ( greater((y-1)*seam,waste_y) == 1 ) {\n        y++;\n    }\n    r2 = x*y;\n\n    if ( r1 &gt;= r2)\n        return r2;\n    else\n        return r1;\n}\n\nint equality (double a, double b) {\n    if ( fabs(a-b) &lt;= a*DBL_EPSILON ) {\n        return 1;\n    }\n    else\n        return 0;\n}\nint greater (double a, double b) {\n    if ( (a-b) &gt; DBL_EPSILON) {\n        printf(\"%f is greater than %f, returning 1.\\n\", a, b);\n        return 1;\n    }\n    else {\n        printf(\"%f is not greater than %f, returning 0.\\n\", a, b);\n        return 0;\n    }\n}\n</code></pre>\n\n<p>The problem I'm having so far is that for inputs:</p>\n\n<pre><code>f_a = 0.71\nf_b = 1\ns_a = 4.91\ns_b = 1.7\nseam = 0.01\n</code></pre>\n\n<p>I will compare <code>(x-1)*seam</code> which is <code>0.06</code> with <code>waste_x</code> which is <code>0.0599999</code>, in other words, <code>(x-1)*seam</code> and <code>waste_x</code> should be equal.</p>\n\n<p>My function <code>greater()</code> should return <code>0</code> since the difference between those should be smaller than <code>EPSILON</code> - a is not greater than b but lesser or equal.</p>\n\n<p>My best guess would be my <code>greater()</code> function is not correctly implemented and I don't understand the Machine precision well enough.</p>\n\n<p>So how do I make this piece of code work?</p>\n"}, {"tags": ["c", "arguments"], "answers": [{"tags": [], "owner": {"reputation": 325, "user_id": 6637731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bb62f5777baf98090227bd4e4038952?s=128&d=identicon&r=PG&f=1", "display_name": "Cubicle257", "link": "https://stackoverflow.com/users/6637731/cubicle257"}, "is_accepted": true, "score": 5, "last_activity_date": 1478661261, "last_edit_date": 1478661261, "creation_date": 1478660581, "answer_id": 40499671, "question_id": 40499599, "link": "https://stackoverflow.com/questions/40499599/how-to-check-if-arguments-is-passed-to-a-function-in-c/40499671#40499671", "title": "How to check if arguments is passed to a function in C?", "body": "<p>In C (and C++) calling a funciton without its parameters will result in a compile time error. So the function cannot be called without the parameter.</p>\n\n<p>I think what you are looking for are <a href=\"http://en.cppreference.com/w/cpp/language/default_arguments\" rel=\"nofollow noreferrer\">default arguments</a>, which is a C++ feature. It is not available in normal C.</p>\n\n<p>A way to implement something similar in C is possible through pointers:</p>\n\n<pre><code>int * func (int * initial_value) {\n    int x;\n    if( initial_value == NULL ) {\n        x = 5;\n    } else {\n        x = *initial_value;\n    }\n    //...more code and return\n}\n\n//when you call it use:\nfunc( NULL ); // x = 5\nint arg = 7;\nfunc( &amp;arg ); // x = 7\n</code></pre>\n\n<p>Side note:</p>\n\n<pre><code>scanf(\"%d\", &amp;number); -&gt; scanf(\"%d\", number); //because number already is a pointer\n</code></pre>\n"}], "owner": {"reputation": 802, "user_id": 4761970, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a315ab696cfef87adcaac0748ea283f7?s=128&d=identicon&r=PG&f=1", "display_name": "left click", "link": "https://stackoverflow.com/users/4761970/left-click"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1426, "favorite_count": 0, "accepted_answer_id": 40499671, "answer_count": 1, "score": 3, "last_activity_date": 1478661261, "creation_date": 1478659901, "question_id": 40499599, "link": "https://stackoverflow.com/questions/40499599/how-to-check-if-arguments-is-passed-to-a-function-in-c", "title": "How to check if arguments is passed to a function in C?", "body": "<p>I don't know how to fill up the sentence \"if initial_value is passed\".\nDo I have to use the variable argument? It isn't very readable to me, so I'm finding out other methods.</p>\n\n<p>Help me please..</p>\n\n<pre><code>int *func (int initial_value) {\n    int *number;\n\n    number = malloc(sizeof(int));\n    if (\"if initial_value is passed\") *number = initial_value;\n    else scanf(\"%d\", &amp;number);\n\n    return number;\n}\n</code></pre>\n"}, {"tags": ["c", "arduino", "avr"], "comments": [{"owner": {"reputation": 1548, "user_id": 3082873, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wT9Nk.jpg?s=128&g=1", "display_name": "cagdas", "link": "https://stackoverflow.com/users/3082873/cagdas"}, "edited": false, "score": 0, "creation_date": 1478673741, "post_id": 40499594, "comment_id": 68246140, "body": "So you will use also AVR registers in your sketch ?"}], "answers": [{"tags": [], "owner": {"reputation": 5310, "user_id": 1790864, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/u8BJF.png?s=128&g=1", "display_name": "Rev", "link": "https://stackoverflow.com/users/1790864/rev"}, "is_accepted": false, "score": 4, "last_activity_date": 1478683502, "last_edit_date": 1478683502, "creation_date": 1478683139, "answer_id": 40503416, "question_id": 40499594, "link": "https://stackoverflow.com/questions/40499594/custom-delay-function-using-arduino-ide/40503416#40503416", "title": "Custom Delay function using arduino IDE", "body": "<p>I can give you a quick overview about what the provided code does.</p>\n\n<p>(This is from memory, so don't take my word for it. And you don't mention your controller type. You will have to look up the registers up in detail.)</p>\n\n<pre><code>DDRB |= _BV(1);         // set the compare match output pin to output\nTCCR1A |= _BV(COM1A0);  // enable output compare PIN toggle\nTCNT1 = 0;              // set counter start value to 0\nOCR1A = 100;            // set compare match value to 100 (the actual delay)\nTIFR1 = _BV(OCF1A);     // clear the output compare flag \nTCCR1B |= _BV(CS10);    // enable the timer by setting the pre-scaler\nwhile((TIFR1 &amp; _BV(OCF1A)) == 0);  // wait until the timer counted to 100 (compare flag is set again)\n</code></pre>\n\n<p>So the actual delay depends on:</p>\n\n<ul>\n<li>the setting of the prescaler</li>\n<li>the clock speed of your controller</li>\n<li>the value of OCR1A</li>\n</ul>\n\n<p>Example:<br>\nIf the prescaler is set to 1 and you run at 10MHz you got<br>\nt = (1 / (10000000/s)) * 100 = 10us </p>\n\n<p>This should get you started.</p>\n"}], "owner": {"reputation": 33, "user_id": 7134603, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ibb-6OEC7P4/AAAAAAAAAAI/AAAAAAAAAAs/4ktDzVwr4Vk/photo.jpg?sz=128", "display_name": "Bradley Weiand", "link": "https://stackoverflow.com/users/7134603/bradley-weiand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 397, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1478683502, "creation_date": 1478659867, "last_edit_date": 1478681009, "question_id": 40499594, "link": "https://stackoverflow.com/questions/40499594/custom-delay-function-using-arduino-ide", "title": "Custom Delay function using arduino IDE", "body": "\n\n<p>I'm in a microprocessors class and we're writing our own delay functions that are actually accurate. Our professor gave us, what I assume is, a 4 ms delay function. I don't really understand how to transfer that to a .25 s or a 1 s delay, which are both needed for my homework.</p>\n\n<p>The given function is as follows(Assume _BV() is defined as _BV(x) 1&lt;&lt;(x)):</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>DDRB |= _BV(1);\nTCCR1A |= _BV(COM1A0);\nTCNT1 = 0;\nOCR1A = 100;\nTIFR1 = _BV(OCF1A);\nTCCR1B |= _BV(CS10);\nwhile((TIFR1 &amp; _BV(OCF1A)) == 0);\n\nTIFR1 = _BV(OCF1A);\nOCR1A = 100 + 64000;\nwhile((TIFR1 &amp; _BV(OCF1A)) == 0);\nTCCR1B = 0;\nTCCR1A = 0;\n</code></pre>\n\n<p>I've written the code needed to complete the homework except the two delay functions.</p>\n\n<p>Here is what I have so far:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;avr/io.h&gt;\n\nuint8_t numIN;\n\nvoid setup() {\n  Serial.begin(9600);\n\n  DDRB |= _BV(5);\n}\n\nvoid loop() {\n  int i;\n\n  numIN = 10;\n\n  Serial.println(\"Enter a number between 0 and 9.\");\n\n  do {\n    while (Serial.available() &gt; 0)\n    {\n      numIN = Serial.read() - '0';\n      if (numIN &lt; 0 || numIN &gt; 9)\n      {\n        Serial.println(\"Input Error!\");\n      }\n    }\n  } while (numIN &lt; 0 || numIN &gt; 9);\n\n  Serial.print(\"You entered \");\n  Serial.println(numIN);\n\n  if (isEven(numIN))\n  {\n    for (i = 0; i &lt; 5; i++)\n    {\n      PORTB |= _BV(5);\n      delay(1000); //temporary\n      //delay_Sec();\n      PORTB &amp;= ~_BV(5);\n      delay(1000); //temporary\n      //delay_Sec();\n    }\n  }\n\n  else\n  {\n    for (i = 0; i &lt; 5; i++)\n    {\n      PORTB |= _BV(5);\n      delay(250); //temporary\n      //delay_quarterSec();\n      PORTB &amp;= ~_BV(5);\n      delay(250); //temporary\n      //delay_quarterSec();\n        }\n  }\n}\n\nvoid delay_quarterSec(void)\n{\n  //need to finish\n}\n\nvoid delay_Sec(void)\n{\n  //need to finish\n}\n\nboolean isEven(int num)\n{\n  if (num &amp; _BV(0))\n    return false;\n\n  else\n    return true;\n}\n</code></pre>\n\n<p>I'm just confused how I take my professor's code and transfer it to what I need to do. Any help is greatly appreciated!</p>\n"}, {"tags": ["c", "file", "copy", "printf", "scanf"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1478660074, "post_id": 40499562, "comment_id": 68243095, "body": "End your error messages with a newline.  Include the name of the unopenable file in the error message.  Do not continue to use the unopened files if they fail to open.  For most purposes, you can&#39;t use <code>sscanf()</code> if spacing between words matters, or if you need to track newlines accurately.  If you&#39;re only allowed to use <code>%s</code> and not also <code>%c</code> or something similar (<code>getc()</code> for example), then you&#39;re stuck \u2014 you can&#39;t tell what sort of space character separated the words because you&#39;re not allowed to use the tools that would let you find out."}, {"owner": {"reputation": 328, "user_id": 6762142, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/70f0ddb770d4f893fed76e34dae7bfdb?s=128&d=identicon&r=PG&f=1", "display_name": "posixKing", "link": "https://stackoverflow.com/users/6762142/posixking"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1478661029, "post_id": 40499562, "comment_id": 68243270, "body": "The formatting: noted. But is there no way to do it? Like say first get an entire line and then start scanning it word by word and then separating them by spaces etc?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1478661227, "post_id": 40499562, "comment_id": 68243310, "body": "Yes; there are ways to do it with <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/fgets.html\" rel=\"nofollow noreferrer\"><code>fgets()</code></a> (or  <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/getline.html\" rel=\"nofollow noreferrer\"><code>getline()</code></a> on POSIX-ish systems), and then using  <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/sscanf.html\" rel=\"nofollow noreferrer\"><code>sscanf()</code></a> in a loop (see <a href=\"http://stackoverflow.com/questions/3975236/how-to-use-sscanf-in-loops\">How to use <code>sscanf()</code> in a loop</a>).  But if you&#39;re stuck with <code>fscanf(fp, &quot;%s&quot;, buffer)</code> as the only allowed input mechanism, then I think you are hosed."}, {"owner": {"reputation": 328, "user_id": 6762142, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/70f0ddb770d4f893fed76e34dae7bfdb?s=128&d=identicon&r=PG&f=1", "display_name": "posixKing", "link": "https://stackoverflow.com/users/6762142/posixking"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1478661480, "post_id": 40499562, "comment_id": 68243363, "body": "Do you happen to know any website or stackoverflow question that has an implementation that uses fgets() alongside sscanf()?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1478661989, "post_id": 40499562, "comment_id": 68243461, "body": "The linked question shows how to process a line once you&#39;ve read it.  There isn&#39;t much magic to <code>char line[4096]; while (fgets(line, sizeof(line), fp) != 0) { \u2026code using sscanf to analyze line\u2026 }</code>.  I don&#39;t have a specific question to point you at; that much is too routine for me to have any one question to point at \u2014 there are probably thousands that could be cited."}], "answers": [{"tags": [], "owner": {"reputation": 147, "user_id": 7045778, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-O2D8aUiiCO4/AAAAAAAAAAI/AAAAAAAAAEY/_dOwZgx1zNo/photo.jpg?sz=128", "display_name": "Darshan b", "link": "https://stackoverflow.com/users/7045778/darshan-b"}, "is_accepted": true, "score": 0, "last_activity_date": 1478784083, "last_edit_date": 1478784083, "creation_date": 1478783732, "answer_id": 40528568, "question_id": 40499562, "link": "https://stackoverflow.com/questions/40499562/how-to-copy-contents-from-one-file-to-another-word-by-word-in-c/40528568#40528568", "title": "How to copy contents from one file to another word by word in C?", "body": "<p>since the request is to read the string using fscanf only, use the following logic :</p>\n\n<pre><code>char c;\nchar tmpbuffer[100], buffer[1000];\n\nfp = fopen(\"file.txt\",\"r\");\nwhile(fscanf(fp,\"%s\",tmpbuffer)!=-1)\n{\nstrcat(buffer,tmpbuffer,strlen(tmpbuffer));\nwhile((c = fgetc(fp)) == \" \")\n{\nstrcat(buffer,&amp;c,1);\n}\nfseek(fp,-1,SEEK_CUR);\n}\n</code></pre>\n\n<p>here the buffer contains the entire string in a line so you can write the entire line into the output file.</p>\n"}], "owner": {"reputation": 328, "user_id": 6762142, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/70f0ddb770d4f893fed76e34dae7bfdb?s=128&d=identicon&r=PG&f=1", "display_name": "posixKing", "link": "https://stackoverflow.com/users/6762142/posixking"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 801, "favorite_count": 1, "accepted_answer_id": 40528568, "answer_count": 1, "score": 0, "last_activity_date": 1478784083, "creation_date": 1478659517, "last_edit_date": 1478662092, "question_id": 40499562, "link": "https://stackoverflow.com/questions/40499562/how-to-copy-contents-from-one-file-to-another-word-by-word-in-c", "title": "How to copy contents from one file to another word by word in C?", "body": "<p>I know how to copy contents from one file to another character by character, but I am supposed to do it word by word. I tried this code, but when I run this, my output file ends up having each word on a new line. How am I supposed to copy contents from one file to another (as is) word by word?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(int argc, char* argv[])\n{\n    // Error checking\n    if(argc &lt; 3)\n    {\n        fprintf(stderr, \"Please print two arguments\");\n        exit(EXIT_FAILURE);\n    }\n\n    char* input = argv[1];\n    char* output = argv[2];\n    char buffer[4096];\n\n    FILE* fp_open = fopen(input, \"r\");\n    if(fp_open == NULL) fprintf(stderr, \"Unable to open input file\");\n\n    FILE* fp_write = fopen(output, \"w\");\n    if(fp_write == NULL) fprintf(stderr, \"Unable to open output file\");\n\n    while(fscanf(fp_open, \"%s\", buffer) == 1)\n    {\n        fprintf(fp_write,\"%s\\n\", buffer);\n    }\n\n    fclose(fp_open);\n    fclose(fp_write);\n\n    return 0;\n}\n</code></pre>\n\n<p>Note: I am only allowed to use <code>fscanf(\"%s\")</code> for reading from an input file.</p>\n\n<p>P.S. I also know that it is inefficient way to do it, but this is what I am supposed to do.</p>\n"}, {"tags": ["c", "binary", "hex", "converter"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478659407, "post_id": 40499484, "comment_id": 68242969, "body": "Read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>, provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. The code is incomplete."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1478677381, "post_id": 40499484, "comment_id": 68247415, "body": "<code>char x[4];</code> --&gt; <code>char x[5];</code>"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5628280"}, "edited": false, "score": 0, "creation_date": 1478661522, "post_id": 40499603, "comment_id": 68243372, "body": "Do I have to change address to type int?"}, {"owner": {"reputation": 596, "user_id": 4089756, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh6.googleusercontent.com/-1aTM_jDrKgs/AAAAAAAAAAI/AAAAAAAAANQ/gp0BYfHV4SY/photo.jpg?sz=128", "display_name": "kh&#244;i nguy\u1ec5n", "link": "https://stackoverflow.com/users/4089756/kh%c3%b4i-nguy%e1%bb%85n"}, "edited": false, "score": 0, "creation_date": 1478663993, "post_id": 40499603, "comment_id": 68243839, "body": "yes. But I recommend to use unsigned long (to make sure it 32bit integer, int is platform dependent size), when convert it to binary use &amp;1u, the signed bit may cause trouble."}], "tags": [], "owner": {"reputation": 596, "user_id": 4089756, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh6.googleusercontent.com/-1aTM_jDrKgs/AAAAAAAAAAI/AAAAAAAAANQ/gp0BYfHV4SY/photo.jpg?sz=128", "display_name": "kh&#244;i nguy\u1ec5n", "link": "https://stackoverflow.com/users/4089756/kh%c3%b4i-nguy%e1%bb%85n"}, "is_accepted": false, "score": 0, "last_activity_date": 1478659932, "last_edit_date": 1495535421, "creation_date": 1478659932, "answer_id": 40499603, "question_id": 40499484, "link": "https://stackoverflow.com/questions/40499484/hexadecimal-string-to-binary-string/40499603#40499603", "title": "Hexadecimal String to Binary String", "body": "<p>You don't need to store hexadecimal in char array. You can read it via scanf with specifier %x<br>\n<a href=\"http://www.cplusplus.com/reference/cstdio/scanf/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/reference/cstdio/scanf/</a></p>\n\n<p>Then convert it to binary (C-string form)\n<a href=\"https://stackoverflow.com/questions/6373093/how-to-print-binary-number-via-printf\">how to print binary number via printf</a> </p>\n"}, {"tags": [], "owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "is_accepted": true, "score": 0, "last_activity_date": 1478678739, "creation_date": 1478678739, "answer_id": 40502336, "question_id": 40499484, "link": "https://stackoverflow.com/questions/40499484/hexadecimal-string-to-binary-string/40502336#40502336", "title": "Hexadecimal String to Binary String", "body": "<p>fix like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nchar address[6+1];    //+1 for NUL\nchar binAddress[6*4+1];//+1 for NUL\nvoid hexToBin(void);\n\nint main(void){\n    scanf(\"%6s\", address);\n\n    hexToBin();\n\n    printf(\"%s\\n\", binAddress);\n    return 0;\n}\n\nvoid hexToBin(){\n    int i, j;\n\n    for(j = i = 0; address[i]; ++i, j += 4){\n        switch(address[i]){\n        case '0': strcpy(binAddress + j, \"0000\"); break;\n        case '1': strcpy(binAddress + j, \"0001\"); break;\n        case '2': strcpy(binAddress + j, \"0010\"); break;\n        case '3': strcpy(binAddress + j, \"0011\"); break;\n        case '4': strcpy(binAddress + j, \"0100\"); break;\n        case '5': strcpy(binAddress + j, \"0101\"); break;\n        case '6': strcpy(binAddress + j, \"0110\"); break;\n        case '7': strcpy(binAddress + j, \"0111\"); break;\n        case '8': strcpy(binAddress + j, \"1000\"); break;\n        case '9': strcpy(binAddress + j, \"1001\"); break;\n        case 'a': strcpy(binAddress + j, \"1010\"); break;\n        case 'b': strcpy(binAddress + j, \"1011\"); break;\n        case 'c': strcpy(binAddress + j, \"1100\"); break;\n        case 'd': strcpy(binAddress + j, \"1101\"); break;\n        case 'e': strcpy(binAddress + j, \"1110\"); break;\n        case 'f': strcpy(binAddress + j, \"1111\"); break;\n        default:\n            printf(\"invalid character %c\\n\", address[i]);\n            strcpy(binAddress + j, \"0000\"); break;\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5628280"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2054, "favorite_count": 0, "accepted_answer_id": 40502336, "answer_count": 2, "score": 0, "last_activity_date": 1478678739, "creation_date": 1478658680, "last_edit_date": 1478673195, "question_id": 40499484, "link": "https://stackoverflow.com/questions/40499484/hexadecimal-string-to-binary-string", "title": "Hexadecimal String to Binary String", "body": "<p>I'm trying to make a program where the user enters a hexadecimal string (\"in format 3ecf, no 0x and no capitals\") The code below is my attempt to copy what the user enters (address) and store its binary equivalent in binAddress. </p>\n\n<p>How do I fix this?<br>\nOr is there an easier way?</p>\n\n<pre><code>char address [6];//global\nchar binAddress[24]; //global\nscanf(\"%s\", address); //in some other function\n</code></pre>\n\n<p>...</p>\n\n<pre><code>void hexToBin(){\nint i = 0;\nint j = 24;\nint z;\nwhile(address[i]){\n    char x[4]; //strcpy(char x, \"0000\")\n    switch(address[i]){\n        case '0': strcpy(x, \"0000\"); break;\n        case '1': strcpy(x, \"0001\"); break;\n        case '2': strcpy(x, \"0010\"); break;\n        case '3': strcpy(x, \"0011\"); break;\n        case '4': strcpy(x, \"0100\"); break;\n        case '5': strcpy(x, \"0101\"); break;\n        case '6': strcpy(x, \"0110\"); break;\n        case '7': strcpy(x, \"0111\"); break;\n        case '8': strcpy(x, \"1000\"); break;\n        case '9': strcpy(x, \"1001\"); break;\n        case 'a': strcpy(x, \"1010\"); break;\n        case 'b': strcpy(x, \"1011\"); break;\n        case 'c': strcpy(x, \"1100\"); break;\n        case 'd': strcpy(x, \"1101\"); break;\n        case 'e': strcpy(x, \"1110\"); break;\n        case 'f': strcpy(x, \"1111\"); break;\n        default: strcpy(x, \"0000\"); break;\n    }\n    i++;\n    for (z = 3; z &gt; -1; z--){\n        binAddress[j] = x[z];\n        j--;\n         printf(\"%c\\n\", binAddress[j]);\n    }\n}\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 0, "creation_date": 1478656411, "post_id": 40499231, "comment_id": 68242406, "body": "If it compiles it&#39;s not a &quot;syntax error&quot;. It may very well be code that is written incorrectly."}, {"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 1, "creation_date": 1478656461, "post_id": 40499231, "comment_id": 68242414, "body": "And yes, your code is indeed trivially wrong. How can it be the same formula in both cases?"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 4, "creation_date": 1478656463, "post_id": 40499231, "comment_id": 68242415, "body": "<code>%d</code> is for <code>int</code> arguments, not <code>double</code> arguments."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478657130, "post_id": 40499231, "comment_id": 68242555, "body": "What is &quot;KPH&quot; ?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 2434, "user_id": 3684653, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KyLtW.jpg?s=128&g=1", "display_name": "Isuka", "link": "https://stackoverflow.com/users/3684653/isuka"}, "edited": false, "score": 0, "creation_date": 1478658694, "post_id": 40499231, "comment_id": 68242863, "body": "@Isuka: That would be &quot;km/h&quot;. Both are SI units, so it would be good to use standard notation;-)."}], "answers": [{"comments": [{"owner": {"reputation": 12557, "user_id": 1270789, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FXwoB.png?s=128&g=1", "display_name": "Ken Y-N", "link": "https://stackoverflow.com/users/1270789/ken-y-n"}, "edited": false, "score": 0, "creation_date": 1478656753, "post_id": 40499261, "comment_id": 68242469, "body": "<a href=\"http://stackoverflow.com/a/4264154/1270789\"><code>%lf</code> and <code>%f</code> are handled identically for <code>printf</code></a>."}, {"owner": {"reputation": 2434, "user_id": 3684653, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KyLtW.jpg?s=128&g=1", "display_name": "Isuka", "link": "https://stackoverflow.com/users/3684653/isuka"}, "reply_to_user": {"reputation": 12557, "user_id": 1270789, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FXwoB.png?s=128&g=1", "display_name": "Ken Y-N", "link": "https://stackoverflow.com/users/1270789/ken-y-n"}, "edited": false, "score": 0, "creation_date": 1478656855, "post_id": 40499261, "comment_id": 68242492, "body": "@KenY-N Fair point. I&#39;m editing the answer this way."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1478656987, "post_id": 40499261, "comment_id": 68242525, "body": "@Isuka: Even though <code>%f</code> works fine four <code>double</code>, there was no reason to edit the answer. Quite the opposite, since C99 <code>%lf</code> is supported by <code>printf</code>. And it is actually a better idea to use <code>%lf</code> for <code>double</code> and keep <code>%f</code> reserved for <code>float</code>. That keeps <code>printf</code> consistent with <code>scanf</code>."}], "tags": [], "owner": {"reputation": 2434, "user_id": 3684653, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KyLtW.jpg?s=128&g=1", "display_name": "Isuka", "link": "https://stackoverflow.com/users/3684653/isuka"}, "is_accepted": false, "score": 2, "last_activity_date": 1478657365, "last_edit_date": 1478657365, "creation_date": 1478656559, "answer_id": 40499261, "question_id": 40499231, "link": "https://stackoverflow.com/questions/40499231/syntax-error-in-my-c-code/40499261#40499261", "title": "Syntax error in my C code?", "body": "<p>You are using <code>%d</code> to show your final result, which is used for <code>int</code> variables. In your case, as you are using <code>double</code> variables, you should go for <code>%f</code> or <code>%lf</code>.</p>\n\n<pre><code>printf(\"%.2lf     %.2lf \\n\", kph, kph2mph(kph));\n</code></pre>\n\n<p>Also, your kilometers per hour to miles per hour conversion function is wrong. You should divide and not multiply.</p>\n\n<pre><code>double kph2mph(double x){\n    return x/1.61;\n}\n</code></pre>\n\n<p>Testing your code with those corrections leads to correct results:</p>\n\n<pre><code>Kilometers per hour converted to miles per hour: \nKph          Mph\n185.00     114.91 \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 59, "user_id": 6891122, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TS9sC.png?s=128&g=1", "display_name": "Ardowi", "link": "https://stackoverflow.com/users/6891122/ardowi"}, "edited": false, "score": 0, "creation_date": 1478660835, "post_id": 40499352, "comment_id": 68243232, "body": "Thanks for the help, I wasn&#39;t aware that a while loop would be the best option. How would I make it completely loop until kph = 0 and mph = 0?"}, {"owner": {"reputation": 8660, "user_id": 5749570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d2d0247d580de0aae4511d84551f10?s=128&d=identicon&r=PG&f=1", "display_name": "VHS", "link": "https://stackoverflow.com/users/5749570/vhs"}, "reply_to_user": {"reputation": 59, "user_id": 6891122, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TS9sC.png?s=128&g=1", "display_name": "Ardowi", "link": "https://stackoverflow.com/users/6891122/ardowi"}, "edited": false, "score": 0, "creation_date": 1478660947, "post_id": 40499352, "comment_id": 68243253, "body": "The condition <code>kph != -5</code> makes sure that the <code>while</code> loop continues until kph reaches -5. Note that kph is decremented by 5 on every iteration."}], "tags": [], "owner": {"reputation": 8660, "user_id": 5749570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d2d0247d580de0aae4511d84551f10?s=128&d=identicon&r=PG&f=1", "display_name": "VHS", "link": "https://stackoverflow.com/users/5749570/vhs"}, "is_accepted": true, "score": 0, "last_activity_date": 1478657354, "creation_date": 1478657354, "answer_id": 40499352, "question_id": 40499231, "link": "https://stackoverflow.com/questions/40499231/syntax-error-in-my-c-code/40499352#40499352", "title": "Syntax error in my C code?", "body": "<p>I have made some changes to your program to give your desired output. Some errors in your program are already identified by some other users. Compare this with yours and try to learn. Best of luck!</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n// Prototypes\ndouble mph2kph(double); // convert Miles to KM\ndouble kph2mph(double); // convert KM to Miles\n\nint main()\n{\n\nint loop = 1; \nint kph = 185;              // kilometers per hour   \ndouble mph = 115;              // miles per hour for computation \n\nprintf(\"Kilometers per hour converted to miles per hour: \\n\");\nprintf(\"Kph          Mph\\n\"); // Display Header\n\nwhile (kph != -5){\n    printf(\"%d     %.2lf \\n\", kph, kph2mph(kph));\n    getchar();\n    kph = kph - 5;\n}\n\n }\n\n//Other Functions:\ndouble mph2kph(double x){\n    return x*1.61;\n}\n\ndouble kph2mph(double x){\n   return x/1.61;\n}\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 6891122, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TS9sC.png?s=128&g=1", "display_name": "Ardowi", "link": "https://stackoverflow.com/users/6891122/ardowi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "closed_date": 1478667402, "accepted_answer_id": 40499352, "answer_count": 2, "score": -3, "last_activity_date": 1478657365, "creation_date": 1478656367, "last_edit_date": 1478656556, "question_id": 40499231, "link": "https://stackoverflow.com/questions/40499231/syntax-error-in-my-c-code", "closed_reason": "Not suitable for this site", "title": "Syntax error in my C code?", "body": "<p>Ok so basically, I am trying to make a program that will take a KPH of 185 and convert it to MPH all the way to 0 like so. (using prototypes)\nKilometers per hour converted to miles per hour:</p>\n\n<pre><code>Kph     Mph\n185     115\n180     112\n175     109\n... ...\n10      6\n5       3\n0       0\n</code></pre>\n\n<p>Unfortunately my conversion is a bit off, can someone heed some information on why that may be?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n// Prototypes\ndouble mph2kph(double); // convert Miles to KM\ndouble kph2mph(double); // convert KM to Miles\n\nint main()\n{\n\n    int loop = 1; \n    double kph = 185;              // kilometers per hour   \n    double mph = 115;              // miles per hour for computation \n\n    printf(\"Kilometers per hour converted to miles per hour: \\n\");\n    printf(\"Kph          Mph\\n\"); // Display Header\n\n    while (loop == 1){\n        printf(\"%.2d     %.2d \\n\", kph, kph2mph(kph));\n        break;\n    }\nloop = 0;\n\n}\n\n//Other Functions:\ndouble mph2kph(double x){\n    return x*1.61;\n}\n\ndouble kph2mph(double x){\n    return x*1.61;\n}\n</code></pre>\n\n<p>Output =</p>\n\n<pre><code>Kilometers per hour converted to miles per hour:                                                                                                                                             \nKph          Mph                                                                                                                                                                             \n40325120     38090656\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1478656099, "post_id": 40499187, "comment_id": 68242358, "body": "<code>-o test1.c</code>. The <code>-o</code> option tells the compiler to put the output into that file. Something that you could work out yourself if you just read <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Option-Summary.html\" rel=\"nofollow noreferrer\">the manual</a>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1478657037, "post_id": 40499187, "comment_id": 68242535, "body": "What in the gcc documentation about the <code>-o</code> option was unclear?"}, {"owner": {"reputation": 1562, "user_id": 6828329, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/cb5516b7f44760e32dcceabb543a0ebc?s=128&d=identicon&r=PG&f=1", "display_name": "The Pointer", "link": "https://stackoverflow.com/users/6828329/the-pointer"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478657127, "post_id": 40499187, "comment_id": 68242554, "body": "@Olaf Where in the documentation does it explain the reason behind this deletion? I wasn&#39;t asking what <code>-o</code> does. I was asking why it chooses to delete the file, instead of just leaving it and printing an error."}], "answers": [{"comments": [{"owner": {"reputation": 1562, "user_id": 6828329, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/cb5516b7f44760e32dcceabb543a0ebc?s=128&d=identicon&r=PG&f=1", "display_name": "The Pointer", "link": "https://stackoverflow.com/users/6828329/the-pointer"}, "edited": false, "score": 0, "creation_date": 1478656263, "post_id": 40499210, "comment_id": 68242384, "body": "So when it fails to output into <code>test1.c</code>, it will just delete the target file and terminate?"}, {"owner": {"reputation": 183, "user_id": 2097917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abd80985c1e09e96e24a22d8aac10a52?s=128&d=identicon&r=PG", "display_name": "Scott Greenup", "link": "https://stackoverflow.com/users/2097917/scott-greenup"}, "reply_to_user": {"reputation": 1562, "user_id": 6828329, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/cb5516b7f44760e32dcceabb543a0ebc?s=128&d=identicon&r=PG&f=1", "display_name": "The Pointer", "link": "https://stackoverflow.com/users/6828329/the-pointer"}, "edited": false, "score": 1, "creation_date": 1478657005, "post_id": 40499210, "comment_id": 68242528, "body": "So, at some point during <code>cc ...</code> the program opens up <code>test1.c</code> in the following mode <code>open(&quot;test1.c&quot;, O_RDWR|O_CREAT|O_TRUNC, 0666)</code> which means that it truncates the file to 0. It then runs <code>unlink(&quot;test1.c&quot;)</code> which deletes the file.   If you want to see this for yourself you can run this command: <code>strace -f cc -o test1.c test2.c &amp;&gt; output; grep &quot;test1.c&quot; output</code> -- which shows you the system calls. You can also read more on <code>man unlink</code>. I think it does this because CC believe it is the creator of the file, and therefore is trying to clean up after itself."}, {"owner": {"reputation": 1562, "user_id": 6828329, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/cb5516b7f44760e32dcceabb543a0ebc?s=128&d=identicon&r=PG&f=1", "display_name": "The Pointer", "link": "https://stackoverflow.com/users/6828329/the-pointer"}, "edited": false, "score": 1, "creation_date": 1478657211, "post_id": 40499210, "comment_id": 68242568, "body": "This is what I was looking for. Thank you."}, {"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "reply_to_user": {"reputation": 1562, "user_id": 6828329, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/cb5516b7f44760e32dcceabb543a0ebc?s=128&d=identicon&r=PG&f=1", "display_name": "The Pointer", "link": "https://stackoverflow.com/users/6828329/the-pointer"}, "edited": false, "score": 2, "creation_date": 1478657291, "post_id": 40499210, "comment_id": 68242580, "body": "@ThePointer - if you had syntax errors, it won&#39;t delete <code>test1.c</code>. What actually occurred is that <code>gcc</code> compiled <code>test2.c</code>. It never compiled <code>test1.c</code> being an output destination. It then called <code>ld</code> to link the object file stored in temporary directory with random filename. <code>ld</code> cleaned out the output destination and couldn&#39;t find <code>main()</code> from <code>test1.c</code> which was never compiled to begin with. Running <code>strace -f gcc -o test1.c test2.c</code> will reveal it."}, {"owner": {"reputation": 1562, "user_id": 6828329, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/cb5516b7f44760e32dcceabb543a0ebc?s=128&d=identicon&r=PG&f=1", "display_name": "The Pointer", "link": "https://stackoverflow.com/users/6828329/the-pointer"}, "reply_to_user": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1478657425, "post_id": 40499210, "comment_id": 68242599, "body": "@alvits Illuminating response. Thank you."}, {"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1478657436, "post_id": 40499210, "comment_id": 68242602, "body": "oh nevermind. @ScottGreenup beat me to it ... by 6 minutes."}, {"owner": {"reputation": 1562, "user_id": 6828329, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/cb5516b7f44760e32dcceabb543a0ebc?s=128&d=identicon&r=PG&f=1", "display_name": "The Pointer", "link": "https://stackoverflow.com/users/6828329/the-pointer"}, "reply_to_user": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1478657472, "post_id": 40499210, "comment_id": 68242607, "body": "@alvits Leave your comment. It is good to have multiple explanations of the same concept. :)"}, {"owner": {"reputation": 183, "user_id": 2097917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abd80985c1e09e96e24a22d8aac10a52?s=128&d=identicon&r=PG", "display_name": "Scott Greenup", "link": "https://stackoverflow.com/users/2097917/scott-greenup"}, "reply_to_user": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1478657474, "post_id": 40499210, "comment_id": 68242608, "body": "@alvits It&#39;s a good point though, it only occurs due to <code>cc</code> failing."}, {"owner": {"reputation": 1562, "user_id": 6828329, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/cb5516b7f44760e32dcceabb543a0ebc?s=128&d=identicon&r=PG&f=1", "display_name": "The Pointer", "link": "https://stackoverflow.com/users/6828329/the-pointer"}, "edited": false, "score": 0, "creation_date": 1478657889, "post_id": 40499210, "comment_id": 68242702, "body": "@ScottGreenup The <code>strace</code> commands supplied by yourself and alvits does not seem to be working. Alvits&#39; command gives the error <code>-bash: strace: command not found</code>. Your command creates a file called <code>output</code>, which contains the text <code>-bash: strace: command not found</code>. Any idea how I can fix this? My OS is OS X, if that helps."}, {"owner": {"reputation": 1562, "user_id": 6828329, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/cb5516b7f44760e32dcceabb543a0ebc?s=128&d=identicon&r=PG&f=1", "display_name": "The Pointer", "link": "https://stackoverflow.com/users/6828329/the-pointer"}, "reply_to_user": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1478657908, "post_id": 40499210, "comment_id": 68242708, "body": "@alvits Above is related."}, {"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "reply_to_user": {"reputation": 1562, "user_id": 6828329, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/cb5516b7f44760e32dcceabb543a0ebc?s=128&d=identicon&r=PG&f=1", "display_name": "The Pointer", "link": "https://stackoverflow.com/users/6828329/the-pointer"}, "edited": false, "score": 2, "creation_date": 1478657976, "post_id": 40499210, "comment_id": 68242719, "body": "@ThePointer - Either you are not running Linux or <code>strace</code> package is not installed."}, {"owner": {"reputation": 183, "user_id": 2097917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abd80985c1e09e96e24a22d8aac10a52?s=128&d=identicon&r=PG", "display_name": "Scott Greenup", "link": "https://stackoverflow.com/users/2097917/scott-greenup"}, "edited": false, "score": 1, "creation_date": 1478658032, "post_id": 40499210, "comment_id": 68242731, "body": "Ah, right -- strace is something more specific to linux. You&#39;ll need to find an equivalent for OSX; and read it&#39;s documentation about how it works. <a href=\"https://www.google.com.au/search?num=50&amp;q=OSX+strace\" rel=\"nofollow noreferrer\">google.com.au/search?num=50&amp;q=OSX+strace</a>"}], "tags": [], "owner": {"reputation": 183, "user_id": 2097917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abd80985c1e09e96e24a22d8aac10a52?s=128&d=identicon&r=PG", "display_name": "Scott Greenup", "link": "https://stackoverflow.com/users/2097917/scott-greenup"}, "is_accepted": true, "score": 2, "last_activity_date": 1478657411, "last_edit_date": 1478657411, "creation_date": 1478656154, "answer_id": 40499210, "question_id": 40499187, "link": "https://stackoverflow.com/questions/40499187/why-does-this-incorrect-compilation-and-linkage-result-in-a-deletion-of-my-c-sou/40499210#40499210", "title": "Why does this incorrect compilation and linkage result in a deletion of my C source file?", "body": "<p>Your command is outputting to <code>test1.c</code>, the command fails and therefore effectively deletes the file.</p>\n\n<pre><code>cc -std=c99 -Wall -Werror -pedantic -o output test1.c test2.c\n                                     ^ the output flag\n</code></pre>\n\n<p>I've modified your command to output the program to <code>./output</code>.</p>\n\n<hr>\n\n<p>[Edited due to further question in comments]</p>\n\n<p>To the question of why <code>cc</code> deletes the file: I ran <code>strace -f cc -o test1.c test2.c</code> to find out more about what it was doing. At some point in the output of strace you see this line:</p>\n\n<pre><code>[pid XXXXX] unlink(\"test1.c\")           = 0\n</code></pre>\n\n<p><code>unlink</code> will delete a file, read more at <code>man 3 unlink</code>.</p>\n\n<p>I believe the reason <code>cc</code> deletes the file is <code>cc</code> thinks it is creator of the file, and therefore is trying to clean up after itself. </p>\n"}], "owner": {"reputation": 1562, "user_id": 6828329, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/cb5516b7f44760e32dcceabb543a0ebc?s=128&d=identicon&r=PG&f=1", "display_name": "The Pointer", "link": "https://stackoverflow.com/users/6828329/the-pointer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 40499210, "answer_count": 1, "score": -1, "last_activity_date": 1478657411, "creation_date": 1478655954, "question_id": 40499187, "link": "https://stackoverflow.com/questions/40499187/why-does-this-incorrect-compilation-and-linkage-result-in-a-deletion-of-my-c-sou", "title": "Why does this incorrect compilation and linkage result in a deletion of my C source file?", "body": "<p>I have noticed that an erroneous compilation and linkage command results in the deletion of one of my C source files.</p>\n\n<p>Assume I have 2 source files and a header file: <code>test1.c</code>, <code>test2.c</code>, and <code>header.h</code>. I then erroneously attempt to compile and link these files with the shell command <code>cc -std=c99 -Wall -Werror -pedantic -o test1.c test2.c</code>.</p>\n\n<p>Due to this erroneous command, I get the error message: </p>\n\n<p><code>Undefined symbols for architecture x86_64:\n  \"_main\", referenced from:\n     implicit entry/start for main executable\nld: symbol(s) not found for architecture x86_64</code>.</p>\n\n<p>After this, the file <code>test1.c</code> is deleted. </p>\n\n<p>I am curious as to what's causing the deletion and why?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 9511, "user_id": 7023590, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/82052fbf0815ce82c4eded8fd941be14?s=128&d=identicon&r=PG&f=1", "display_name": "MarianD", "link": "https://stackoverflow.com/users/7023590/mariand"}, "edited": false, "score": 1, "creation_date": 1478655113, "post_id": 40499037, "comment_id": 68242178, "body": "Very strange commenting in C (<code>&gt; comment&#47;&#47;</code>). My compiler don&#39;t like it."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 7134336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/982e378a8d32d5cfc5b397eb67bf3545?s=128&d=identicon&r=PG&f=1", "display_name": "Omar ", "link": "https://stackoverflow.com/users/7134336/omar"}, "edited": false, "score": 0, "creation_date": 1478657548, "post_id": 40499201, "comment_id": 68242630, "body": "sorry about the commenting, the correct answer should be result=10728."}, {"owner": {"reputation": 115, "user_id": 6812910, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/66f46e0acaa1eab99290a341ed2e53fc?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Hili", "link": "https://stackoverflow.com/users/6812910/ben-hili"}, "reply_to_user": {"reputation": 15, "user_id": 7134336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/982e378a8d32d5cfc5b397eb67bf3545?s=128&d=identicon&r=PG&f=1", "display_name": "Omar ", "link": "https://stackoverflow.com/users/7134336/omar"}, "edited": false, "score": 0, "creation_date": 1478657697, "post_id": 40499201, "comment_id": 68242664, "body": "@Omar given what input exactly?"}, {"owner": {"reputation": 15, "user_id": 7134336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/982e378a8d32d5cfc5b397eb67bf3545?s=128&d=identicon&r=PG&f=1", "display_name": "Omar ", "link": "https://stackoverflow.com/users/7134336/omar"}, "edited": false, "score": 0, "creation_date": 1478658075, "post_id": 40499201, "comment_id": 68242738, "body": "when k=16, result=10728 , for the range 1 to 100000"}], "tags": [], "owner": {"reputation": 115, "user_id": 6812910, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/66f46e0acaa1eab99290a341ed2e53fc?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Hili", "link": "https://stackoverflow.com/users/6812910/ben-hili"}, "is_accepted": false, "score": 0, "last_activity_date": 1478656089, "creation_date": 1478656089, "answer_id": 40499201, "question_id": 40499037, "link": "https://stackoverflow.com/questions/40499037/getting-result-1-more-divisor-counting-program-c/40499201#40499201", "title": "Getting result 1 more, divisor counting Program - C", "body": "<p>It works fine for me once the comments are removed as they're causing some issues</p>\n\n<p><strong>cleaned up code</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n\nint main(void){\nint k=0, i=0, n_divisors=0, result=0;\ndouble N=0, r=0;\nprintf(\"Enter the number of divisors: \");\n\nscanf(\" %d\",&amp;k);\nfor(N=1; N&lt;=100000; N++){\n    n_divisors=0;\n  for(i=1; i&lt;sqrt(N); i++ ){\n        r=fmod(N, i);\n        if( r==0)\n            n_divisors+=2;\n }\n            if(n_divisors==k)\n            result++;\n}\nprintf(\"There are %d numbers between 1 and 100000 inclusive which have exactly\\n\",result);\nprintf(\"%d divisors.\",k);\nreturn 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 7134336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/982e378a8d32d5cfc5b397eb67bf3545?s=128&d=identicon&r=PG&f=1", "display_name": "Omar ", "link": "https://stackoverflow.com/users/7134336/omar"}, "edited": false, "score": 0, "creation_date": 1478659250, "post_id": 40499440, "comment_id": 68242945, "body": "Thank you for the feedback, i had a feeling it was serious for a range of values but wasn&#39;t sure what they where."}], "tags": [], "owner": {"reputation": 9511, "user_id": 7023590, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/82052fbf0815ce82c4eded8fd941be14?s=128&d=identicon&r=PG&f=1", "display_name": "MarianD", "link": "https://stackoverflow.com/users/7023590/mariand"}, "is_accepted": true, "score": 1, "last_activity_date": 1478659223, "last_edit_date": 1478659223, "creation_date": 1478658276, "answer_id": 40499440, "question_id": 40499037, "link": "https://stackoverflow.com/questions/40499037/getting-result-1-more-divisor-counting-program-c/40499440#40499440", "title": "Getting result 1 more, divisor counting Program - C", "body": "<p>It is more serious as you think - you may obtain strange results, not only increased by 1. (See: You count number of divisors by adding <code>2</code>, <em>as all numbers could have only <strong>even</strong> numbers of divisors</em>.)</p>\n\n<p>The problem is in this statement:</p>\n\n<pre><code>        for(i=1; i&lt;sqrt(N); i++ ){\n</code></pre>\n\n<p>particularly in the expression </p>\n\n<pre><code>        i&lt;sqrt(N)\n</code></pre>\n\n<p>in it which <em>excludes</em> <code>sqrt(N)</code> from possible divisors.</p>\n\n<p>But for numbers which <em>are</em> 2nd power of integers (as <code>1</code>, <code>4</code>, <code>9</code>, <code>16</code>, ...) the <code>sqrt(N)</code> <strong><em>is</em></strong> their divisor.</p>\n\n<p>So insert into your code something as</p>\n\n<pre><code>        if (i * i == N)\n            n_divisors++;\n</code></pre>\n\n<p>so touched part of your code will then look as (I added correct indentations)</p>\n\n<pre><code>// loop to count the no. of divisors in an integer from 1 to 100000\nfor(N=1; N&lt;=100000; N++){\n    n_divisors=0;\n    // loop for incrementing the no. divisors in an integer by 2\n    for(i=1; i&lt;sqrt(N); i++ ){\n        // Testing if i is a divisor of the integer.\n        r=(N%i);\n        if( r==0)\n            n_divisors+=2;\n    }\n    if (i * i == N)\n        n_divisors++;\n    //  If the no. of divisors is equal to k, then increment result//\n    if(n_divisors==k)\n        result++;\n    // else reset the value of no. of divisors to 0//\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 7134336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/982e378a8d32d5cfc5b397eb67bf3545?s=128&d=identicon&r=PG&f=1", "display_name": "Omar ", "link": "https://stackoverflow.com/users/7134336/omar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 40499440, "answer_count": 2, "score": -1, "last_activity_date": 1478661230, "creation_date": 1478654522, "last_edit_date": 1478661230, "question_id": 40499037, "link": "https://stackoverflow.com/questions/40499037/getting-result-1-more-divisor-counting-program-c", "title": "Getting result 1 more, divisor counting Program - C", "body": "<blockquote>\n  <p>Write a program which reads in an integer k, and prints out the number of positive integers between 1 and 100000 (inclusive) which have exactly k divisors.</p>\n</blockquote>\n\n<pre><code>    #include &lt;stdio.h&gt;\n    #include &lt;stdlib.h&gt;\n    #include &lt;math.h&gt;\n\n    int main(void){\n    int k=0, N=0, i=0, r=0, n_divisors=0, result=0;\n    printf(\"Enter the number of divisors: \");\n\n/*scanning in an integer value*/\n    scanf(\" %d\",&amp;k);\n/*loop to count the no. of divisors in an integer from 1 to 100000*/ \n    for(N=1; N&lt;=100000; N++){\n            n_divisors=0;\n/*loop for incrementing the no. divisors in an integer by 2 */\n      for(i=1; i&lt;sqrt(N); i++ ){\n/*Testing if i is a divisor of the integer.*/\n                r=(N%i);\n                if( r==0)\n                    n_divisors+=2;\n      }\n/* If the no. of divisors is equal to k, then increment result*/\n                if(n_divisors==k)\n                    result++;\n/* else reset the value of no. of divisors to 0*/\n    }\n/* printing the value for no. of integers form 1 to 100000 with K no. of divisors*/\n        printf(\"There are %d numbers between 1 and 100000 inclusive which have exactly  \\n\",result  );\n        printf(\"%d divisors.\",k);\n    return 0;\n    }\n</code></pre>\n"}, {"tags": ["c", "linux-kernel", "kernel", "linux-device-driver", "embedded-linux"], "comments": [{"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1478654005, "post_id": 40498963, "comment_id": 68241942, "body": "What architecture? Alignment traps are an architecture-specific issue."}, {"owner": {"reputation": 39, "user_id": 6894380, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/807b3d9ac1c1de59b6d44638fcb74a76?s=128&d=identicon&r=PG&f=1", "display_name": "Titus", "link": "https://stackoverflow.com/users/6894380/titus"}, "reply_to_user": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1478654425, "post_id": 40498963, "comment_id": 68242043, "body": "Its imx6 (ARM cortex A9) 32 bit arch."}, {"owner": {"reputation": 371, "user_id": 6923832, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ECOZvsHS5bQ/AAAAAAAAAAI/AAAAAAAAAPk/Y3G7W4TKuMQ/photo.jpg?sz=128", "display_name": "lyst", "link": "https://stackoverflow.com/users/6923832/lyst"}, "edited": false, "score": 0, "creation_date": 1478798377, "post_id": 40498963, "comment_id": 68306726, "body": "The <code>--i2c_reg-&gt;reg_size</code> part of <code>for(i = --i2c_reg-&gt;reg_size; i &gt;= 0 ; i--,j++)</code> seems suspect.  Why would you need to alter reg_size?  Do you really mean <code>i=(i2c_reg-&gt;reg_size-1);</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 6894380, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/807b3d9ac1c1de59b6d44638fcb74a76?s=128&d=identicon&r=PG&f=1", "display_name": "Titus", "link": "https://stackoverflow.com/users/6894380/titus"}, "edited": false, "score": 0, "creation_date": 1478655069, "post_id": 40499074, "comment_id": 68242168, "body": "Excellent!, thanks &#39;lyst&#39; for your answer. I hope it would work, let me try and update you, thanks again lyst and Jonathon for your replies."}, {"owner": {"reputation": 39, "user_id": 6894380, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/807b3d9ac1c1de59b6d44638fcb74a76?s=128&d=identicon&r=PG&f=1", "display_name": "Titus", "link": "https://stackoverflow.com/users/6894380/titus"}, "edited": false, "score": 0, "creation_date": 1478657524, "post_id": 40499074, "comment_id": 68242624, "body": "Can you please tell me how I can fix the issue ? I should not change/increase buffer &quot;i2c_reg-&gt;buffer&quot; since its used by user space, that&#39;s why I have created one more buffer for moving to other place....how can I change this ?"}, {"owner": {"reputation": 371, "user_id": 6923832, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ECOZvsHS5bQ/AAAAAAAAAAI/AAAAAAAAAPk/Y3G7W4TKuMQ/photo.jpg?sz=128", "display_name": "lyst", "link": "https://stackoverflow.com/users/6923832/lyst"}, "reply_to_user": {"reputation": 39, "user_id": 6894380, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/807b3d9ac1c1de59b6d44638fcb74a76?s=128&d=identicon&r=PG&f=1", "display_name": "Titus", "link": "https://stackoverflow.com/users/6894380/titus"}, "edited": false, "score": 0, "creation_date": 1478658602, "post_id": 40499074, "comment_id": 68242846, "body": "Are you asking how you can change your code so that you&#39;re passing to free() the same address that malloc() returned?  Or have you encountered another alignment error once you made the free()/malloc() change?"}, {"owner": {"reputation": 39, "user_id": 6894380, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/807b3d9ac1c1de59b6d44638fcb74a76?s=128&d=identicon&r=PG&f=1", "display_name": "Titus", "link": "https://stackoverflow.com/users/6894380/titus"}, "edited": false, "score": 0, "creation_date": 1478673344, "post_id": 40499074, "comment_id": 68246008, "body": "Yes lyst. Thank you."}, {"owner": {"reputation": 39, "user_id": 6894380, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/807b3d9ac1c1de59b6d44638fcb74a76?s=128&d=identicon&r=PG&f=1", "display_name": "Titus", "link": "https://stackoverflow.com/users/6894380/titus"}, "edited": false, "score": 0, "creation_date": 1478675381, "post_id": 40499074, "comment_id": 68246676, "body": "As of now, I took back up that address to u32 variable and apply free.  <code>u32 temp_buiffer_bkp;   temp_buffer_bkp = temp_buffer;   kfree(temp_buffer_bkp);</code> is it okay ? or any other method we can do ?"}, {"owner": {"reputation": 371, "user_id": 6923832, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ECOZvsHS5bQ/AAAAAAAAAAI/AAAAAAAAAPk/Y3G7W4TKuMQ/photo.jpg?sz=128", "display_name": "lyst", "link": "https://stackoverflow.com/users/6923832/lyst"}, "reply_to_user": {"reputation": 39, "user_id": 6894380, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/807b3d9ac1c1de59b6d44638fcb74a76?s=128&d=identicon&r=PG&f=1", "display_name": "Titus", "link": "https://stackoverflow.com/users/6894380/titus"}, "edited": false, "score": 0, "creation_date": 1478798856, "post_id": 40499074, "comment_id": 68306998, "body": "Yes, that solution is fine.  Other method - you could eliminate <code>temp_buff</code> entirely if you just perform the <code>memcpy()</code> from <code>i2c_reg-&gt;buffer[]</code> directly into <code>&amp;i2c_w_buff[i2c_reg-&gt;reg_size]</code> (if you stop decrementing that value in the for-loop)."}], "tags": [], "owner": {"reputation": 371, "user_id": 6923832, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ECOZvsHS5bQ/AAAAAAAAAAI/AAAAAAAAAPk/Y3G7W4TKuMQ/photo.jpg?sz=128", "display_name": "lyst", "link": "https://stackoverflow.com/users/6923832/lyst"}, "is_accepted": false, "score": 3, "last_activity_date": 1478654950, "creation_date": 1478654950, "answer_id": 40499074, "question_id": 40498963, "link": "https://stackoverflow.com/questions/40498963/alignment-trap-not-handling-instruction-e1913f9f-at-80467364/40499074#40499074", "title": "Alignment trap: not handling instruction e1913f9f at [&lt;80467364&gt;]", "body": "<pre><code>for(i = reg_size_bkp; i &lt; (i2c_reg-&gt;count + reg_size_bkp) ; i++,temp_buff++)\n</code></pre>\n\n<p>In this line, you're incrementing the temp_buff pointer, so you're losing address of the start of the memory you malloc'd.  When you go to <code>free()</code>, you're freeing some random address that is character-aligned, not necessarily word-aligned, and I'm guessing that's what's raising your alignment error. You need to pass to <code>free()</code> the same address that <code>malloc()</code> returned.</p>\n"}], "owner": {"reputation": 39, "user_id": 6894380, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/807b3d9ac1c1de59b6d44638fcb74a76?s=128&d=identicon&r=PG&f=1", "display_name": "Titus", "link": "https://stackoverflow.com/users/6894380/titus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4013, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1478655019, "creation_date": 1478653865, "last_edit_date": 1478655019, "question_id": 40498963, "link": "https://stackoverflow.com/questions/40498963/alignment-trap-not-handling-instruction-e1913f9f-at-80467364", "title": "Alignment trap: not handling instruction e1913f9f at [&lt;80467364&gt;]", "body": "<p>I'm getting \"alignment trap: not handling instruction\" issue from kernel when I do i2c write using my own ioctl i2c write function in application.</p>\n\n<p>Actually I written my own driver for a camera, have i2c read/write function to control the camera (control path).</p>\n\n<p>This is my code which I used to access the i2c for write purpose.</p>\n\n<p>This issue is coming after few runs of i2c write in application or first run itself....\nSo, we can't predict the issue occurring.</p>\n\n<p>I have seen this case too, after single run, we would get this issue after few minutes.</p>\n\n<p>I don't know know what could be the problem.\nBTW, I have i2c read function in same manner but without having any \"kmalloc\" or memory alloc/free.\nAnd its working without any problem.</p>\n\n<p>In code, if I commented out the \"kfree(temp_buff)\", then I'm not getting this 'alignment' trap issue', but its not recommended right ?.</p>\n\n<p>Can any one help me on this problem ?</p>\n\n<pre><code>    static s32 ioctl_i2cwrite(struct v4l2_int_device *s, struct v4l2_i2c *i2c_reg)\n    {\n        int j = 0, i = 0, ret = 0, reg_size_bkp = 0;\n    //Titus\n        int total_size = i2c_reg-&gt;count + i2c_reg-&gt;reg_size;    \n        u8 i2c_w_buf [total_size];\n        char *temp_buff;\n\n\n    //  int total_size = 3;\n    //  u8 i2c_w_buf[3];\n\n\n        printk(\"Titus : i2c_write executed! %s : %d, total_size -&gt; %d\\n\",__func__,__LINE__,total_size);\n\n\n    //  temp_buff = kmalloc(i2c_reg-&gt;count * sizeof(char), GFP_KERNEL);\n        temp_buff = kmalloc(i2c_reg-&gt;count, GFP_KERNEL);\n        if(temp_buff == NULL){\n            printk(\"failed to allocate memory:\\n\");\n            return -1;  \n        }\n\n        memset(temp_buff, 0, i2c_reg-&gt;count);\n        memcpy(temp_buff, i2c_reg-&gt;buffer, i2c_reg-&gt;count);\n    /*\n        ret = copy_from_user(temp_buff,i2c_reg-&gt;buffer,i2c_reg-&gt;count);\n        if(ret != 0)\n        {\n        pr_err(\"copy_from_user is failed... %s %d\\n\",__FILE__,__LINE__);\n        kfree(temp_buff);\n        return ret; \n        }\n    */\n\n        /* Backup the size of register which needs to be read after filling the address buffer */\n        reg_size_bkp = i2c_reg-&gt;reg_size;\n        printk(\" i2c_write: reg_size_bkp=%d i2c_reg-&gt;reg_size=%d  %s\\n\",reg_size_bkp,i2c_reg-&gt;reg_size, __FILE__);\n\n\n        // Fill the address in buffer upto size of address want to write */\n        for(i = --i2c_reg-&gt;reg_size; i &gt;= 0 ; i--,j++)              \n            i2c_w_buf[i] = ((i2c_reg-&gt;reg &gt;&gt; (8*j)) &amp; 0xFF);    \n\n        /* Append the data value in the same buffer  */\n        for(i = reg_size_bkp; i &lt; (i2c_reg-&gt;count + reg_size_bkp) ; i++,temp_buff++)\n            i2c_w_buf[i] = *temp_buff;\n\n        ret = i2c_master_send(leonardo_data.i2c_client, i2c_w_buf, total_size );\n\n        //TODO: Titus: It leads to alignment trap issue.\n        kfree(temp_buff);\n\n\n        return ret;\n}\n</code></pre>\n\n<blockquote>\n  <p>root@imx6:/# root@imx6:/# Alignment trap: not handling instruction\n  e1913f9f at [&lt;80467364>] Unhandled fault: alignment exception (0x001)\n  at 0x9e383d41 Internal error: : 1 [#1] PREEMPT SMP ARM Modules linked\n  in: ov5642_camera mxc_v4l2_capture ipu_bg_overlay_sdc ipu_still\n  ipu_prp_enc ipu_csi_enc adv7180_tvin ipu_fg_overlay_sdc\n  v4l2_int_device gpio_keys usb_f_ecm g_ether usb_f_rndis u_ether\n  libcomposite CPU: 1 PID: 935 Comm: Xorg Not tainted 3.14.52-svn99 #2\n  task: a8ace3c0 ti: a8d38000 task.ti: a8d38000 PC is at\n  gckOS_AtomIncrement+0x1c/0x48 LR is at\n  gckVIDMEM_NODE_Allocate+0x100/0x13c pc : [&lt;80467368>]    lr :\n  [&lt;8047b810>]    psr: a00f0013 sp : a8d39c50  ip : a8d39c60  fp :\n  a8d39c5c r10: 00000006  r9 : a8ec7e80  r8 : 00000009 r7 : a8846700  r6\n  : 00000000  r5 : a8846300  r4 : 9e383240 r3 : 00000000  r2 : a8d39c6c \n  r1 : 9e383d41  r0 : a8846300 Flags: NzCv  IRQs on  FIQs on  Mode\n  SVC_32  ISA ARM  Segment user Control: 10c5387d  Table: 3840404a  DAC:\n  00000015 Process Xorg (pid: 935, stack limit = 0xa8d38238) Stack:\n  (0xa8d39c50 to 0xa8d3a000) 9c40:<br>\n  a8d39c9c a8d39c60 8047b810 80467358 9c60: 800dd984 9e383240 00000000\n  a8ec7e80 a868c540 00000009 00000007 00000002 9c80: 00000006 00000001\n  a8846700 00004000 a8d39cfc a8d39ca0 8046ecfc 8047b71c 9ca0: a8d39ccc\n  a8d39cb0 800ddb1c 80052c24 a8819a00 000003a7 00004000 a8d39db8 9cc0:\n  000000cc a8b37cc0 a8ec7e80 00000000 a8b37eb4 ffffffff 00000000\n  a8d39d88 9ce0: a8846700 00000000 a8d38000 00000001 a8d39d5c a8d39d00\n  80471768 8046ea34 9d00: 00000040 00000006 00000003 a8d39dbc 00000000\n  00100100 00000000 00000000 9d20: 00000000 000003a7 a8b37eb4 00000000\n  ffffffff 00000000 a8844600 a8de7540 9d40: a8d38000 00007530 a8104338\n  7e8f38f8 a8d39ef4 a8d39d60 8046d848 80470d9c</p>\n  \n  <p>9d60: 00000000 00000000 7e8f3970 00000000 00000140 00000000 7e8f3970\n  00000000 9d80: 00000140 00000000 00000007 00000002 00000000 00000000\n  00000000 00000000 9da0: 00000000 00000000 00004000 00000040 00000006\n  00000003 00000001 00000000 9dc0: 00000000 00000000 00000000 00000000\n  00000000 00000000 00000000 7e8f39d8 9de0: 00000000 76fa4000 76f6e6fd\n  76f9899c 00000017 76e4ff10 00001000 ffffffff 9e00: fffffff0 783b79f0\n  00001000 00000000 00000000 7e8f39ec 00000001 7e8f3a10 root@imx6:/#\n  9e20: 00000000 00000000 00000020 76f674a3 00000000 00000002 00000000\n  76fab554 9e40: 7835f998 76b89000 00000009 76fb018c 76fb018c 76fb018c\n  76fb018c 76fb018c 9e60: 78153960 00000000 78382c70 765746b3 00000000\n  00000000 00000000 00000000 9e80: 00000000 00000000 00000000 76b894e8\n  7e8f3ae4 00000044 7e8f3ad0 00000028 9ea0: 0000001a 783fac14 00000000\n  76afbe9d 00000000 00000000 00000040 7e8f3ae4 9ec0: 780d6228 766ce63c\n  a8d39ef4 a82f4780 a82f4780 00007530 7e8f38f8 a8104338 9ee0: a8d38000\n  7e8f38f8 a8d39f7c a8d39ef8 800f26fc 8046d728 8004e090 8004dcb8 9f00:\n  a8d39f1c a8d39f10 7e8f3a10 7e8f39f4 00000000 00000129 8000eae4\n  a63ed680 9f20: 7e8f39f4 00000000 00000129 8000eae4 a8d38000 00000000\n  a8d39f94 a8d39f48 9f40: 80507e24 805067b4 00000000 00000001 7e8f3c48\n  a82f4780 a82f4780 00007530 9f60: 7e8f38f8 00000009 a8d38000 00000000\n  a8d39fa4 a8d39f80 800f2c50 800f2688 9f80: 780d6228 00002710 766f2548\n  00007530 00000036 8000eae4 00000000 a8d39fa8 9fa0: 8000e960 800f2c20\n  00002710 766f2548 00000009 00007530 7e8f38f8 780d6228 9fc0: 00002710\n  766f2548 00007530 00000036 00000028 0000001a 783fac14 00000000 9fe0:\n  766e7550 7e8f38e4 766cf9d8 76b342b6 800f0030 00000009 3bf58811\n  3bf58c11 Backtrace: [&lt;8046734c>] (gckOS_AtomIncrement) from\n  [&lt;8047b810>] (gckVIDMEM_NODE_Allocate+0x100/0x13c) [&lt;8047b710>]\n  (gckVIDMEM_NODE_Allocate) from [&lt;8046ecfc>]\n  (gckKERNEL_AllocateLinearMemory+0x2d4/0x338)  r10:00004000 r9:a8846700\n  r8:00000001 r7:00000006 r6:00000002 r5:00000007  r4:00000009\n  [&lt;8046ea28>] (gckKERNEL_AllocateLinearMemory) from [&lt;80471768>]\n  (gckKERNEL_Dispatch+0x9d8/0x1080)  r10:00000001 r9:a8d38000\n  r8:00000000 r7:a8846700 r6:a8d39d88 r5:00000000  r4:ffffffff\n  [&lt;80470d90>] (gckKERNEL_Dispatch) from [&lt;8046d848>]\n  (drv_ioctl+0x12c/0x2b8)  r10:7e8f38f8 r8:a8104338 r7:00007530\n  r6:a8d38000 r5:a8de7540 r4:a8844600 [&lt;8046d71c>] (drv_ioctl) from\n  [&lt;800f26fc>] (do_vfs_ioctl+0x80/0x598)  r10:7e8f38f8 r9:a8d38000\n  r8:a8104338 r7:7e8f38f8 r6:00007530 r5:a82f4780  r4:a82f4780\n  [&lt;800f267c>] (do_vfs_ioctl) from [&lt;800f2c50>] (SyS_ioctl+0x3c/0x60) \n  r10:00000000 r9:a8d38000 r8:00000009 r7:7e8f38f8 r6:00007530\n  r5:a82f4780  r4:a82f4780 [&lt;800f2c14>] (SyS_ioctl) from [&lt;8000e960>]\n  (ret_fast_syscall+0x0/0x38)  r8:8000eae4 r7:00000036 r6:00007530\n  r5:766f2548 r4:00002710 r3:780d6228 Code: e3510000 0a00000a f57ff05b\n  e1913f9f (e2833001)\n  ---[ end trace 095d3b4029173c21 ]---\n  ------------[ cut here ]------------ Kernel BUG at 800dda80 [verbose debug info unavailable] Internal error: Oops - BUG: 0 [#2] PREEMPT SMP\n  ARM Modules linked in: ov5642_camera mxc_v4l2_capture\n  ipu_bg_overlay_sdc ipu_stillCPU: 2 PID: 754 Comm: NetworkManager\n  Tainted: G      D      3.14.52-svn99 #2 task: a8349300 ti: a8526000\n  task.ti: a8526000 PC is at kfree+0x18c/0x198 LR is at\n  inotify_free_event+0x10/0x14 pc : [&lt;800dda80>]    lr : [&lt;8011db68>]<br>\n  psr: 40010013 sp : a8527e80  ip : 80934240  fp : a8527eb4 r10:\n  00000800  r9 : a8bea6c8  r8 : a8526000 r7 : abb1e000  r6 : 7e8e4124 \n  r5 : 9e380000  r4 : 00000020 r3 : 00000000  r2 : ab757000  r1 :\n  00000000  r0 : 00000000 Flags: nZcv  IRQs on  FIQs on  Mode SVC_32 \n  ISA ARM  Segment user Control: 10c5387d  Table: 3866404a  DAC:\n  00000015 Process NetworkManager (pid: 754, stack limit = 0xa8526238)\n  Stack: (0xa8527e80 to 0xa8528000) 7e80: 800f34e0 0001352e 8005de80\n  00000020 00000005 7e8e4124 a8bea6c0 a8526000 7ea0: a8bea6c8 00000800\n  a8527ec4 a8527eb8 8011db68 800dd900 a8527ed4 a8527ec8 7ec0: 8011bec4\n  8011db64 a8527f44 a8527ed8 8011e168 8011bea0 a8527f44 7e8e4134 7ee0:\n  00000010 a8bea780 7e8e4124 a8bea6e8 a8527f44 00000001 00000080\n  00000282 7f00: 00000010 00000000 a8349300 8006657c a8527f10 a8527f10\n  a8d8f600 a8bea780 7f20: 00000800 7e8e4124 a8527f78 00000800 a8526000\n  7e8e4124 a8527f74 a8527f48 7f40: 800e2e64 8011df5c 800fc0a4 800fc024\n  00000000 00000000 a8bea781 a8bea780 7f60: 00000800 7e8e4124 a8527fa4\n  a8527f78 800e303c 800e2dd8 00000000 00000000 7f80: 7e8e411c 0000000a\n  7e8e4124 00000003 8000eae4 00000000 00000000 a8527fa8 7fa0: 8000e960\n  800e3004 7e8e411c 0000000a 0000000a 7e8e4124 00000800 00000000 7fc0:\n  7e8e411c 0000000a 7e8e4124 00000003 004cc0b0 76bdc5b8 004dcdd8\n  0005a195 7fe0: 00000000 7e8e4110 76a99619 76a99620 80010030 0000000a\n  3bf5e821 3bf5ec21 Backtrace: [&lt;800dd8f4>] (kfree) from [&lt;8011db68>]\n  (inotify_free_event+0x10/0x14)  r10:00000800 r9:a8bea6c8 r8:a8526000\n  r7:a8bea6c0 r6:7e8e4124 r5:00000005  r4:00000020 [&lt;8011db58>]\n  (inotify_free_event) from [&lt;8011bec4>]\n  (fsnotify_destroy_event+0x30/0x34) [&lt;8011be94>]\n  (fsnotify_destroy_event) from [&lt;8011e168>] (inotify_read+0x218/0x2f8)\n  [&lt;8011df50>] (inotify_read) from [&lt;800e2e64>] (vfs_read+0x98/0x138) \n  r10:7e8e4124 r9:a8526000 r8:00000800 r7:a8527f78 r6:7e8e4124\n  r5:00000800  r4:a8bea780 [&lt;800e2dcc>] (vfs_read) from [&lt;800e303c>]\n  (SyS_read+0x44/0x90)  r10:7e8e4124 r8:00000800 r7:a8bea780 r6:a8bea781\n  r5:00000000 r4:00000000 [&lt;800e2ff8>] (SyS_read) from [&lt;8000e960>]\n  (ret_fast_syscall+0x0/0x38)  r10:00000000 r8:8000eae4 r7:00000003\n  r6:7e8e4124 r5:0000000a r4:7e8e411c Code: e7923283 e3130902 11a07001\n  eaffffb0 (e7f001f2)\n  ---[ end trace 095d3b4029173c22 ]--- power_down_callback: ipu0/csi0  ipu_prp_enc ipu_csi_enc adv7180_tvin ipu_fg_overlay_sdc\n  v4l2_int_device gpio_keys usb_f_ecm g_ether usb_f_rndis u_ether\n  libcomposite mxc_sdc_fb fb.20: 1280x720 h_sync,r,l: 40,110,220 \n  v_sync,l,u: 5,5,20 pixclock=74250000 Hz imx-ipuv3 2800000.ipu: try ipu\n  internal clk imx-ipuv3 2800000.ipu: disp=0, pixel_clk=74250000\n  74250000 parent=74250000 div=1 mxc_sdc_fb fb.20: 1280x720 h_sync,r,l:\n  40,110,220  v_sync,l,u: 5,5,20 pixclock=74250000 Hz imx-ipuv3\n  2800000.ipu: try ipu internal clk imx-ipuv3 2800000.ipu: disp=0, pixel_clk=74250000 74250000 parent=74250000 div=1 mxc_sdc_fb fb.20:\n  1280x720 h_sync,r,l: 40,110,220  v_sync,l,u: 5,5,20 pixclock=74250000\n  Hz imx-ipuv3 2800000.ipu: try ipu internal clk imx-ipuv3 2800000.ipu:\n  disp=0, pixel_clk=74250000 74250000 parent=74250000 div=1 mxc_sdc_fb\n  fb.20: 1280x720 h_sync,r,l: 40,110,220  v_sync,l,u: 5,5,20\n  pixclock=74250000 Hz imx-ipuv3 2800000.ipu: try ipu internal clk\n  imx-ipuv3 2800000.ipu: disp=0, pixel_clk=74250000 74250000\n  parent=74250000 div=1 Unable to handle kernel paging request at\n  virtual address 0024d8ac pgd = a9390000 [0024d8ac] *pgd=00000000</p>\n</blockquote>\n\n<p>Regards,<br>\nTitus S.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1478656070, "post_id": 40498928, "comment_id": 68242349, "body": "Is your compiler not <b><i>Screaming</i></b> warnings at you that might help explain some of your difficulty?"}, {"owner": {"reputation": 1, "user_id": 7134283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58ed52ed8595df5e608bbe4ceba918d9?s=128&d=identicon&r=PG&f=1", "display_name": "xf88tr", "link": "https://stackoverflow.com/users/7134283/xf88tr"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1478658737, "post_id": 40498928, "comment_id": 68242875, "body": "thanks for your help David, you&#39;re swell."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1478659685, "post_id": 40498928, "comment_id": 68243025, "body": "Please post code that compiles.  You&#39;ve written <code>struct Inventory     {         char *name, int year, int amount;     }</code> which is not valid C \u2014 as your compiler should be telling you.  Those commas need to be semicolons.  And you should declare each structure member on its own line.  You should be checking the result of <code>scanf()</code>; you should be fixing the format string.  Calling <code>free(ptr); free(ptr);</code> is a straight-forward double-free and undefined behaviour.  You aren&#39;t making proper use of the allocated memory.  You aren&#39;t allocating enough memory."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1478661039, "post_id": 40498928, "comment_id": 68243272, "body": "<a href=\"http://stackoverflow.com/q/605845/995714\">Don&#39;t cast the result of <code>malloc</code> in C</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7134283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58ed52ed8595df5e608bbe4ceba918d9?s=128&d=identicon&r=PG&f=1", "display_name": "xf88tr", "link": "https://stackoverflow.com/users/7134283/xf88tr"}, "edited": false, "score": 0, "creation_date": 1478662787, "post_id": 40499631, "comment_id": 68243613, "body": "updating, thanks for the help, its appreciated. Was told to define a structure type, declare, and initialize an array all in one statement, but I&#39;ll adjust to at least shut the compiler up."}], "tags": [], "owner": {"reputation": 1, "user_id": 5669413, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-d4P8hYrzrzQ/AAAAAAAAAAI/AAAAAAAAACo/QFYM5drZmVk/photo.jpg?sz=128", "display_name": "Bravo", "link": "https://stackoverflow.com/users/5669413/bravo"}, "is_accepted": false, "score": 0, "last_activity_date": 1478660183, "creation_date": 1478660183, "answer_id": 40499631, "question_id": 40498928, "link": "https://stackoverflow.com/questions/40498928/c-program-to-dynamically-allocate-memory-for-structure-then-memcpy-input-into/40499631#40499631", "title": "C program to dynamically allocate memory for structure then memcpy input into", "body": "<p>A structure pointer + an integer:\nptr+count.</p>\n\n<p>Non-initialization of count, using count &amp; incrementing another variable :count1++\nfor (count1 = 0; count &lt; ITEMS; ++count1)</p>\n\n<p>Rectify these mistakes.</p>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 0, "last_activity_date": 1478718446, "creation_date": 1478718446, "answer_id": 40514238, "question_id": 40498928, "link": "https://stackoverflow.com/questions/40498928/c-program-to-dynamically-allocate-memory-for-structure-then-memcpy-input-into/40514238#40514238", "title": "C program to dynamically allocate memory for structure then memcpy input into", "body": "<p>There are a number of issues that will bite you in your code. While you are free to allocate storage for <code>name</code>, that will complicate things quite a bit if you also assign <em>string literals</em> to the first 2 elements of <code>brand</code>. You then will have mixed literals and allocated blocks of memory that you will have to keep track of in order to know what needs to be freed later on.</p>\n\n<p>Additionally, when using <code>scanf</code> to read multiple values, you are better off reading an entire line into a buffer with <code>fgets</code> and then calling <code>sscanf</code> to parse the values. There are a number of reasons why decoupling your read from your parse makes sense.</p>\n\n<p>Also, if name is short, then why not use an array and eliminate the dynamic allocation altogether? For purposes of your example, where you are assigning literals to the first two, that also solves your problem of which will need to be <code>free</code>d and which will <em>segfault</em> if you try to free them.</p>\n\n<p>I've included more in the comments below. Look things over and let me know if you have further questions:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nenum { ITEMS = 5, MAXN = 32, MAXC = 256 };\n\ntypedef struct {\n    char name[MAXN];\n    int year, amount;\n} inventory;\n\nint main (void) {\n\n    /* you do not want to mix string literals below for 'name' with allocated\n     * blocks of memory also used for 'name' because the logic to free the allocated\n     * blocks would be unnecessarily complicated. (e.g., some 'name's allocated,\n     * some holding literals) Keep your code consistent. If the length of name is\n     * reasonably short, just use an array.\n     */\n    inventory brand[ITEMS] = { {\"chevy\", 2014, 12}, {\"acura\", 2016, 22} };\n    int num = 2;\n\n    while (num &lt; ITEMS) {\n\n        char buf[MAXC] = \"\";\n        /* no need for ptr, it's up to you, brand[num] with dot notation is fine */\n        inventory *ptr = &amp;brand[num];\n        printf (\"Enter a brand of automobile, year, and count \"\n                \"of the vehicle with a space in between:\\n\");\n        /* if name is a pointer, you must allocate space before calling scanf\n         * (unless using the 'm' modifier ('a' for older scanf and windoze) and\n         * you then provide a pointer-to-pointer-to-char) Using an array avoids\n         * that problem wit name.\n         */\n        if (!fgets (buf, MAXC, stdin) ||\n            sscanf (buf, \" %s %d %d\", ptr-&gt;name, &amp;ptr-&gt;year, &amp;ptr-&gt;amount) != 3) {\n            fprintf (stderr, \"error: invalid input.\\n\");\n            continue;\n        }\n\n        /* allocating 1-char for ptr is somewhat pointless here */\n        // if ( !(ptr = malloc (sizeof(char)) == NULL)) {\n        /* you would allocate the sizeof one struct, or just s, however using\n         * an array for name makes allocation unnecessary.\n         */\n        // if (!(ptr = malloc (sizeof s))) {\n        //     fputs (\"Out of memory\", stderr);  /* fputs adds a newline */\n        //     exit (EXIT_FAILURE);\n        // }\n\n        /* memcpy -- WTF?? (there is no memcpy here, what is weight, calories?) */\n        // printf(\"%s\\t%d\\t%d\\n\", ptr-&gt;name, ptr-&gt;weight, ptr-&gt;calories);\n\n        /* you probably want */\n\n        // free(ptr); (no allocation, no free required\n        num++;\n    }\n\n    /* now lets see if it worked */\n    for (int i = 0; i &lt; num; i++)\n        printf (\"\\n name   : %s\\n year   : %d\\n amount : %d\\n\",\n                brand[i].name, brand[i].year, brand[i].amount);\n\n    return 0;\n}\n</code></pre>\n\n<p>(lastly, leave <em>MixedCase</em> variable names for C++. C style generally prefers all lower-case, reserving upper-case for constants and macros. While style is completely up to you, an odd style telegraphs a lot about your code before any of the details are reached)</p>\n\n<p><strong>Example Use/Output</strong></p>\n\n<pre><code>$ ./bin/inventory2\nEnter a brand of automobile, year, and count of the vehicle with a space in between:\nford 1968 7\nEnter a brand of automobile, year, and count of the vehicle with a space in between:\nfoo bar\nerror: invalid input.\nEnter a brand of automobile, year, and count of the vehicle with a space in between:\nmazda 2007 9\nEnter a brand of automobile, year, and count of the vehicle with a space in between:\ntoyota 2012 4\n\n name   : chevy\n year   : 2014\n amount : 12\n\n name   : acura\n year   : 2016\n amount : 22\n\n name   : ford\n year   : 1968\n amount : 7\n\n name   : mazda\n year   : 2007\n amount : 9\n\n name   : toyota\n year   : 2012\n amount : 4\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7134283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58ed52ed8595df5e608bbe4ceba918d9?s=128&d=identicon&r=PG&f=1", "display_name": "xf88tr", "link": "https://stackoverflow.com/users/7134283/xf88tr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 153, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1478718446, "creation_date": 1478653603, "last_edit_date": 1478662709, "question_id": 40498928, "link": "https://stackoverflow.com/questions/40498928/c-program-to-dynamically-allocate-memory-for-structure-then-memcpy-input-into", "title": "C program to dynamically allocate memory for structure then memcpy input into", "body": "<p>Need some help gurus. I'm new to C, trying to understand how to pull this off.\nOk, so I need to allocate the exact amount of memory for the input NAME(plus a null terminator), and store the pointer to the allocation in its place inside array. Use memcpy to copy NAME into allocated memory, the int values can be stored directly into the corresponding members of the structure in the array element. \nAny help would be appreciated. \nCheers.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#define ITEMS 5\n\nint main(void)\n{\n    struct Inventory\n    {\n        char *name, int year, int amount;\n    } brand[ITEMS] = { {\"chevy\", 2014, 12}, {\"acura\", 2016, 22} };\n\n    struct Inventory *ptr, s;\n    ptr = &amp;s;\n    int count, num;\n\n    for (count1 = 0; count &lt; ITEMS; count1++)\n    {\n        printf(\"Enter a brand of automobile, year, and count of the vehicle with a space in between:\\n\");\n        scanf(\"%s%d&amp;d\", &amp;ptr-&gt;name, &amp;ptr-&gt;year, &amp;ptr-&gt;amount);\n\n        if ( (ptr = (char *)malloc(sizeof(char)) == NULL))\n        {\n            fputs(\"Out of memory\\n\", stderr);\n            exit(EXIT_FAILURE);\n        }\n        /* memcpy */\n        printf(\"%s\\t%d\\t%d\\n\", ptr-&gt;name, ptr-&gt;weight, ptr-&gt;calories);\n        free(ptr);\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "function", "pointers"], "comments": [{"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1478653174, "post_id": 40498861, "comment_id": 68241743, "body": "I would change make_v to return a double *, and then return v at the end. Get rid of the second parameter."}, {"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1478653286, "post_id": 40498861, "comment_id": 68241774, "body": "If you pass in a <code>double *</code> pointer you can change what is in the location it points to but you can&#39;t change where it points because the address is passed by value.  If you want to update where it points you need to pass a <code>double **</code> like this: <code>void make_v(double num, double **v){...} int main(){... double *v=NULL; ... make_v(num, &amp;v); ... }</code>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478653617, "post_id": 40498861, "comment_id": 68241839, "body": "Do not cast the result of <code>calloc</code> &amp; friends or <code>void *</code> in general. And don&#39;t use <code>void *</code> without need!"}, {"owner": {"reputation": 29, "user_id": 7129460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec408b90479aea17c7560f2ae6d064d7?s=128&d=identicon&r=PG&f=1", "display_name": "Kate", "link": "https://stackoverflow.com/users/7129460/kate"}, "edited": false, "score": 0, "creation_date": 1478656674, "post_id": 40498861, "comment_id": 68242456, "body": "Hi JerryJeremiah - sorry to be thick, I follow you so far but how do I alloc and fill v in the function now?"}, {"owner": {"reputation": 29, "user_id": 7129460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec408b90479aea17c7560f2ae6d064d7?s=128&d=identicon&r=PG&f=1", "display_name": "Kate", "link": "https://stackoverflow.com/users/7129460/kate"}, "edited": false, "score": 0, "creation_date": 1478656805, "post_id": 40498861, "comment_id": 68242483, "body": "Hi Bruceg - yes that would be neater but this is a troubleshooting function. My real function has 6 parameters, fills two arrays and returns an int... so that&#39;s not an option unfortunately."}, {"owner": {"reputation": 29, "user_id": 7129460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec408b90479aea17c7560f2ae6d064d7?s=128&d=identicon&r=PG&f=1", "display_name": "Kate", "link": "https://stackoverflow.com/users/7129460/kate"}, "edited": false, "score": 0, "creation_date": 1478659695, "post_id": 40498861, "comment_id": 68243028, "body": "Don&#39;t worry, I worked it out! For any other hapless newbies, I assigned memory in the function as before but to *v; then to print used (*v)[i]. Happy happy Kate. Thankyou everyone for helping so quickly"}], "answers": [{"tags": [], "owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "is_accepted": false, "score": 0, "last_activity_date": 1478653279, "creation_date": 1478653279, "answer_id": 40498887, "question_id": 40498861, "link": "https://stackoverflow.com/questions/40498861/how-do-i-return-a-pointer-to-an-array-from-my-function-in-c/40498887#40498887", "title": "How do I return a pointer to an array from my function in C?", "body": "<pre><code>double *make_v(double num)\n{\n    int i;\n    v = (double *)calloc(5,sizeof(double));\n    for (i=0; i&lt;5; i++) {\n            num += 5;\n            v[i] = num;\n    }\n\n    printf(\"IN: \");\n    for (i=0; i&lt;5; i++)\n            printf(\"%lf \", v[i]);\n    printf(\"\\n\");\n    retrun v;\n}\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 7129460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec408b90479aea17c7560f2ae6d064d7?s=128&d=identicon&r=PG&f=1", "display_name": "Kate", "link": "https://stackoverflow.com/users/7129460/kate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1478653279, "creation_date": 1478653070, "question_id": 40498861, "link": "https://stackoverflow.com/questions/40498861/how-do-i-return-a-pointer-to-an-array-from-my-function-in-c", "title": "How do I return a pointer to an array from my function in C?", "body": "<p>Sorry there are many similar questions but I just can't work out what I'm doing wrong (amateur alert!). </p>\n\n<p>I'm trying to fill two arrays within a function then get the information back in main. I declare the arrays in main but need to assign them memory in the function (which works out how big they should be). Although the arrays seem to fill fine and I can print them from within the function, I get a segmentation fault when I try to print them from main.</p>\n\n<p>I've tried to troubleshoot in this simplified program with a function that fills one array - it has the same problem. I assume I'm stuffing up my pointers - what am I doing wrong?? Here is the code and the output:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;malloc.h&gt;\n\nvoid *make_v(double num, double *v)\n{\n        int i;\n        v = (double *)calloc(5,sizeof(double));\n        for (i=0; i&lt;5; i++) {\n                num += 5;\n                v[i] = num;\n        }\n\n        printf(\"IN: \");\n        for (i=0; i&lt;5; i++)\n                printf(\"%lf \", v[i]);\n        printf(\"\\n\");\n}\n\nmain(int argc,char **argv)\n{\n        double *v=NULL;\n        double num=10.0;\n        int i;\n\n        make_v(num, v);\n\n        printf(\"OUT:\\nv:[\");\n        for (i=0; i&lt;5; ++i) {\n                printf(\"%lf \", v[i]);\n        }\n}\n</code></pre>\n\n<p>This outputs: \nIN: 15.000000 20.000000 25.000000 30.000000 35.000000\nOUT:\nSegmentation fault</p>\n\n<p>I'm coding in linux if that makes a difference...</p>\n\n<p>Hope someone can help, thanks!</p>\n"}, {"tags": ["c", "cs50"], "comments": [{"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1478653461, "post_id": 40498842, "comment_id": 68241803, "body": "Could you post what the problem is? I think you&#39;re just doing the math wrong."}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "reply_to_user": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1478654760, "post_id": 40498842, "comment_id": 68242098, "body": "@Schwern: Yep, you&#39;re right. I misread it with the extra unnecessary pairs of parentheses."}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 7134351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5879f417a5b7e7c2fc2886061be0039?s=128&d=identicon&r=PG&f=1", "display_name": "Matteo Rehm", "link": "https://stackoverflow.com/users/7134351/matteo-rehm"}, "edited": false, "score": 0, "creation_date": 1478813675, "post_id": 40498976, "comment_id": 68314289, "body": "Thank you so much for your help! I ended up implementing the standard geometric series formula that I haven&#39;t used since algebra 2: <code>printf(&quot;$%.2f\\n&quot;,(((pennies * (1 - pow(2, days))) &#47; (1 - 2)) &#47; 100));</code>"}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 7, "user_id": 7134351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5879f417a5b7e7c2fc2886061be0039?s=128&d=identicon&r=PG&f=1", "display_name": "Matteo Rehm", "link": "https://stackoverflow.com/users/7134351/matteo-rehm"}, "edited": false, "score": 0, "creation_date": 1478814057, "post_id": 40498976, "comment_id": 68314463, "body": "@MatteoRehm You&#39;re welcome. You can simplify that. (1 - 2) is just -1. Dividing something by -1 is the same as multiplying it by -1. And the outer parens are unnecessary. <code>((pennies * (1 - pow(2, days))) * -1) &#47; 100</code>. You should really do it in two steps for clarity (the compiler will probably make it one) and to get into the habit of keeping things as integers for as long as possible to avoid floating point inaccuracies. <code>long long accumulated_pennies = (pennies * (1 - pow(2, days))) * -1</code>, then <code>printf(&quot;$%.2f\\n&quot;, accumulated_pennies &#47; 100)</code>."}], "tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 1, "last_activity_date": 1478654436, "last_edit_date": 1478654436, "creation_date": 1478653994, "answer_id": 40498976, "question_id": 40498842, "link": "https://stackoverflow.com/questions/40498842/cs50-expected-prompt-for-input-not-exit-code-of-0-not-too-sure-what-i-am-doi/40498976#40498976", "title": "CS50: &quot;expected prompt for input, not exit code of 0&quot; not too sure what I am doing wrong here", "body": "<p>Assuming it's <a href=\"http://cdn.cs50.net/ap/1516/problems/1/6/1-6.html\" rel=\"nofollow noreferrer\">this assignment</a>, your math is wrong.</p>\n\n<p>The assignment is what happens if your initial amount of pennies doubles every day for a month. If you start with 5 pennies, that means 5 then 10 then 20 then 40... 5 * 2 * 2 * 2 ... or 5 * 2<sup>N</sup> where <code>N</code> is the number of days.</p>\n\n<p>But you have <code>pow(pennies, days)</code>. If <code>pennies = 5</code> and <code>days = 30</code> that's 5<sup>30</sup> which is something entirely different and very large.</p>\n\n<p>What you need is <code>pennies * pow(2, days)</code>. And that's the number of pennies, so divide by 100 to get the dollar amount.</p>\n\n<p>This isn't 100% correct, but since this is an exercise I leave the rest of the details up to you.</p>\n\n<hr>\n\n<p>As to the \"exit 0\" problem, it's this:</p>\n\n<pre><code>for (; pennies &lt; 0; pennies = GetInt())\n{   \n    printf(\"You can't have negative pennies! Please try again.\\n\");\n}\n</code></pre>\n\n<p>You're allowing 0 pennies. You're supposed to reject that.</p>\n\n<blockquote>\n  <p>If the user does not input a positive integer for the first day\u2019s number of pennies, the program should prompt the user to retry.</p>\n</blockquote>\n\n<p>As to why it says it didn't get a prompt, it gave you 0 pennies and expected to be prompted again. Whoever wrote the checking code didn't think to see if it got output.</p>\n"}], "owner": {"reputation": 7, "user_id": 7134351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5879f417a5b7e7c2fc2886061be0039?s=128&d=identicon&r=PG&f=1", "display_name": "Matteo Rehm", "link": "https://stackoverflow.com/users/7134351/matteo-rehm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 335, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1478654436, "creation_date": 1478652941, "last_edit_date": 1478653774, "question_id": 40498842, "link": "https://stackoverflow.com/questions/40498842/cs50-expected-prompt-for-input-not-exit-code-of-0-not-too-sure-what-i-am-doi", "title": "CS50: &quot;expected prompt for input, not exit code of 0&quot; not too sure what I am doing wrong here", "body": "<p>I was just wondering what I did wrong here, because when the program is executed, it runs just fine. I'm a newbie at programming and am very lost. Any advise would be great!</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;cs50.h&gt;\n#include &lt;math.h&gt;\nint main(void)\n{\n    printf(\"Days in Month:\\n\");\n    int days = GetInt();\n    for (; days &lt; 28 || days &gt; 31; days = GetInt())\n    {   \n        printf(\"No month has that amount of days! Please try again.\\n\");\n    }\n    printf(\"Pennies on first day:\\n\");\n    int pennies = GetInt();\n    for (; pennies &lt; 0; pennies = GetInt())\n    {   \n        printf(\"You can't have negative pennies! Please try again.\\n\");\n    }\n    if (pennies == 1) \n        printf(\"$%.2f\",pow ((pennies + 1), (days - 1)));\n    else \n        printf(\"$%.2f\",pow (pennies, days));\n}\n</code></pre>\n\n<p>Check50 yields:</p>\n\n<pre><code>~/workspace/chapter1/ $ check50 1617.chapter1.pennies pennies.c\n:) pennies.c exists\n:) pennies.c compiles\n:( 28 days, 1 penny on first day\n   \\ expected output, but not \"$134217728.00\"\n:( 31 days, 1 penny on first day\n   \\ expected output, but not \"$1073741824.00\"\n:( 29 days, 2 pennies on first day\n   \\ expected output, but not \"$536870912.00\"\n:( 30 days, 30 pennies on first day\n   \\ expected output, but not \"$20589113209464899002378237447530552256...\"\n:) rejects days not 28, 29, 30, or 31\n:( rejects non-positive pennies\n   \\ expected prompt for input, not exit code of 0\n:) rejects a non-numeric days input of \"foo\"\n:) rejects a non-numeric penny input of \"foo\"\n:) rejects a non-numeric days input of \"\"\n:) rejects a non-numeric penny input of \"\" \n</code></pre>\n\n<p>As you can see it says that it is accepting negative inputs and is not yielding the correct amount of money. Is this a bug in check50, or did I do something wrong?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 3, "creation_date": 1478651940, "post_id": 40498725, "comment_id": 68241425, "body": "<code>gender==&quot;m&quot;</code> --&gt; <code>gender==&#39;m&#39;</code>"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1478652149, "post_id": 40498725, "comment_id": 68241474, "body": "By analogy, the same would apply to <code>else if(gender==&quot;f&quot;)</code>"}, {"owner": {"reputation": 41, "user_id": 6163929, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/9ff8538e8d50d588999c76ecc616b46e?s=128&d=identicon&r=PG&f=1", "display_name": "nibukdk93", "link": "https://stackoverflow.com/users/6163929/nibukdk93"}, "edited": false, "score": 0, "creation_date": 1478652558, "post_id": 40498725, "comment_id": 68241571, "body": "Thanks it worked."}], "answers": [{"tags": [], "owner": {"reputation": 37, "user_id": 4857858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oYThX.jpg?s=128&g=1", "display_name": "Chirag Soni", "link": "https://stackoverflow.com/users/4857858/chirag-soni"}, "is_accepted": false, "score": 3, "last_activity_date": 1478652210, "creation_date": 1478652210, "answer_id": 40498761, "question_id": 40498725, "link": "https://stackoverflow.com/questions/40498725/prints-only-an-error-occurred-in-the-program/40498761#40498761", "title": "Prints only &quot;An error occurred in the program!&quot;", "body": "<p>You are comparing a <code>char</code> to a <code>string</code> literal <code>(gender == \"m\")</code>. Double quotes are for string. Use single quotes around m <code>(gender == 'm')</code> and f <code>(gender == 'f')</code>.</p>\n"}], "owner": {"reputation": 41, "user_id": 6163929, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/9ff8538e8d50d588999c76ecc616b46e?s=128&d=identicon&r=PG&f=1", "display_name": "nibukdk93", "link": "https://stackoverflow.com/users/6163929/nibukdk93"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1478652210, "creation_date": 1478651876, "last_edit_date": 1478652163, "question_id": 40498725, "link": "https://stackoverflow.com/questions/40498725/prints-only-an-error-occurred-in-the-program", "title": "Prints only &quot;An error occurred in the program!&quot;", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nint main(){\n\n    int age;\n    char gender;\n    printf(\"Are you male or female (m/f)?\");\n    scanf(\"%c\",&amp;gender);\n    printf(\"Enter your age:\");\n    scanf(\"%d\",&amp;age);\n    printf(\"\\n\");\n\n    if(gender==\"m\"){\n        if(age&gt;=0 &amp;&amp; age&lt;=55){\n         printf(\"You are a man in your best years!\\n\");\n        }\n        else if (age&gt;=56 &amp;&amp; age&lt;=100){\n            printf(\"You are a wise man!\\n\");}\n        else{\n    printf(\"An error occurred in the program!\");}\n    }\n    else if(gender==\"f\"){\n    if(age&gt;=0 &amp;&amp; age&lt;=55){\n         printf(\"You are a beauty!\\n\");\n        }\n        else if (age&gt;=56 &amp;&amp; age&lt;=100){\n            printf(\"You look young for your age!\\n\");}\n        else{\n    printf(\"An error occurred in the program!\");}\n\n    }\n    else{\n    printf(\"An error occurred in the program!\");}\n    return 0;\n}\n</code></pre>\n\n<p>The program is not working correctly. It prints only the last else statements print i.e. \"An error occurred in the program!\". I also tried to put the all the conditions in the same small brackets</p>\n\n<p>like: </p>\n\n<pre><code>if(gender==\"f\"&amp;&amp; age&gt;=0 &amp;&amp; age&lt;=55)) \n</code></pre>\n\n<p>but still it didn't output the expected result.</p>\n"}]