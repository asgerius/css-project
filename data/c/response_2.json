[{"tags": ["c", "pointers", "segmentation-fault", "int"], "comments": [{"owner": {"reputation": 9112, "user_id": 2721883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5c8448407184c2a90cc46db06c159ca?s=128&d=identicon&r=PG&f=1", "display_name": "clcto", "link": "https://stackoverflow.com/users/2721883/clcto"}, "edited": false, "score": 1, "creation_date": 1421884518, "post_id": 28079060, "comment_id": 44536892, "body": "You attempt to dereference a pointer that has not been assigned to a valid memory address. This is undefined behavior."}, {"owner": {"reputation": 1155, "user_id": 3479753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/271b3b053003525a1add378d49cb804a?s=128&d=identicon&r=PG&f=1", "display_name": "etheranger", "link": "https://stackoverflow.com/users/3479753/etheranger"}, "edited": false, "score": 2, "creation_date": 1421884715, "post_id": 28079060, "comment_id": 44536950, "body": "Not to mention that your <code>set</code> takes 2 parameters, you&#39;re only passing 1, and you claim there are no compilation errors?"}, {"owner": {"reputation": 5996, "user_id": 1152524, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b2e23f3f9bf82e6fe806261f50b2f9b6?s=128&d=identicon&r=PG&f=1", "display_name": "txtechhelp", "link": "https://stackoverflow.com/users/1152524/txtechhelp"}, "reply_to_user": {"reputation": 1155, "user_id": 3479753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/271b3b053003525a1add378d49cb804a?s=128&d=identicon&r=PG&f=1", "display_name": "etheranger", "link": "https://stackoverflow.com/users/3479753/etheranger"}, "edited": false, "score": 0, "creation_date": 1421885012, "post_id": 28079060, "comment_id": 44537038, "body": "@etheranger, this actually compiles just fine with GCC (and even VC), due to how the compiler (sans optimizations) will build out the stack variables. Not a good &#39;trick&#39; to use though as it will lead to all sorts of havoc come debug time (or if you use the same variable name in a lot of functions). See paxdiablo&#39;s answer for how to &#39;fix&#39; it (i.e. define the function prototype BEFORE you use it)"}, {"owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "reply_to_user": {"reputation": 5996, "user_id": 1152524, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b2e23f3f9bf82e6fe806261f50b2f9b6?s=128&d=identicon&r=PG&f=1", "display_name": "txtechhelp", "link": "https://stackoverflow.com/users/1152524/txtechhelp"}, "edited": false, "score": 0, "creation_date": 1421885097, "post_id": 28079060, "comment_id": 44537065, "body": "@txtechhelp, that may be so on your system, but gcc under Debian segfaults. Which is <i>why</i> UB is no insidious, it may work, but that doesn&#39;t make it correct :-)"}, {"owner": {"reputation": 5996, "user_id": 1152524, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b2e23f3f9bf82e6fe806261f50b2f9b6?s=128&d=identicon&r=PG&f=1", "display_name": "txtechhelp", "link": "https://stackoverflow.com/users/1152524/txtechhelp"}, "reply_to_user": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "edited": false, "score": 0, "creation_date": 1421885125, "post_id": 28079060, "comment_id": 44537076, "body": "@paxdiablo, completely agree :)"}, {"owner": {"reputation": 1155, "user_id": 3479753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/271b3b053003525a1add378d49cb804a?s=128&d=identicon&r=PG&f=1", "display_name": "etheranger", "link": "https://stackoverflow.com/users/3479753/etheranger"}, "reply_to_user": {"reputation": 5996, "user_id": 1152524, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b2e23f3f9bf82e6fe806261f50b2f9b6?s=128&d=identicon&r=PG&f=1", "display_name": "txtechhelp", "link": "https://stackoverflow.com/users/1152524/txtechhelp"}, "edited": false, "score": 0, "creation_date": 1421885740, "post_id": 28079060, "comment_id": 44537256, "body": "@txtechhelp Oh, I totally missed that it wasn&#39;t even declared before use. C and its implicit function declaration, I swear.... <i>scurries back to C++ land, where things make sense</i>"}], "answers": [{"tags": [], "owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "is_accepted": false, "score": 4, "last_activity_date": 1421889855, "last_edit_date": 1421889855, "creation_date": 1421884524, "answer_id": 28079096, "question_id": 28079060, "link": "https://stackoverflow.com/questions/28079060/printing-an-int-in-c/28079096#28079096", "title": "Printing an int in C", "body": "<pre><code>int main(){\n    int* a;\n    printf(\"%d\",*a);\n</code></pre>\n\n<p>What you have there is a <em>pointer</em> to an <code>int</code> rather than an actual <code>int</code>.</p>\n\n<p>And, while that's the correct way to print the <code>int</code> it points to, unfortunately it points to an arbitrary memory location which is why you're crashing.</p>\n\n<p>You are not allowed to dereference arbitrary pointers, they have to point to something valid, such as if you begin your code with:</p>\n\n<pre><code>int main(){\n    int target_of_a = 42;\n    int *a = &amp;target_of_a;\n    printf (\"%d\", *a);\n</code></pre>\n\n<p>In addition, you probably should be calling <code>set</code> with something like:</p>\n\n<pre><code>set (a, 10);\n</code></pre>\n\n<p>something the compiler would generally warn you about though, in this case, it would probably just say it didn't know about <code>set</code> at the time you called it. If it had known, it could have told you about the parameter mismatch.</p>\n\n<p>One way for you to acheive that is to ensure you have a prototype defined for the function <em>before</em> you call it:</p>\n\n<pre><code>int set(int*,int);\n</code></pre>\n\n<p>or just move the function to before <code>main</code>. With all those changes (and a bit of a general tidy up), you'd end up with:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint set (int *a, int val) {\n    *a = val;\n    return *a;\n}\n\nint main (void) {\n    int target_of_a = 42;\n    int *a = &amp;target_of_a;\n    printf (\"%d\\n\", *a);\n    set (a, 10);\n    printf (\"%d\\n\", *a);\n    return 0;\n}\n</code></pre>\n\n<p>The wisdom of <em>returning</em> the variable you're changing is also debatable but there are situations where that might be useful (such as if you want to us it immediately without another statement: <code>printf (\"%d\\n\", set (a, 10));</code> for example) so I've left that as is.</p>\n\n<p>I should also mention that it's a little unusual to <em>artificially</em> create a pointer variable in a situation like this.</p>\n\n<p>Now it may be that your code is just a simplification of some more complex scenario where you already <em>have</em> a pointer but, if not, the usual way to do this would be to just have the <code>int</code> itself and just use <code>&amp;</code> to create one on the fly:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint set (int *a, int val) {\n    *a = val;\n    return *a;\n}\n\nint main (void) {\n    int a = 42;\n    printf (\"%d\\n\", a);\n    set (&amp;a, 10);\n    printf (\"%d\\n\", a);\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16, "user_id": 4093115, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kowre.jpg?s=128&g=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/4093115/matthew"}, "is_accepted": false, "score": 0, "last_activity_date": 1421885205, "creation_date": 1421885205, "answer_id": 28079214, "question_id": 28079060, "link": "https://stackoverflow.com/questions/28079060/printing-an-int-in-c/28079214#28079214", "title": "Printing an int in C", "body": "<p>This code should work:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define FIRST_VALUE 20\n#define SECOND_VALUE 10\n\nint main(){\n int a = FIRST_VALUE;                     /* Declare a as an int variable. */\n printf(\"Before set: a = %d\\n\",a);        /* Print the first value. */\n set(&amp;a, SECOND_VALUE);                   /* Pass the ADDRESS of a to set. */\n printf(\"After set: a = %d\\n\", a);        /* Print the new value of a. */\n return 0;\n}\n\nint set(int*a, int val){\n *a = val;\n return *a;\n}\n</code></pre>\n\n<p>Note that the variable a in main() is not the same as the variable a in set(); you have to pass a pointer to a to set() in order for set() to operate on it.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 4358268, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hKNzylikicQ/AAAAAAAAAAI/AAAAAAAAAOw/f4ktM8k4xaM/photo.jpg?sz=128", "display_name": "Ratoestiloso", "link": "https://stackoverflow.com/users/4358268/ratoestiloso"}, "is_accepted": false, "score": 0, "last_activity_date": 1421885668, "creation_date": 1421885668, "answer_id": 28079293, "question_id": 28079060, "link": "https://stackoverflow.com/questions/28079060/printing-an-int-in-c/28079293#28079293", "title": "Printing an int in C", "body": "<p>Try this:</p>\n\n<p>And remember, all functions before the <code>main()</code> (if you're using only one file)</p>\n\n<p>Take a read on value and reference params.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint set(int* a, int val){\n *a = val;\n}\n\n\nint main(){\n int a = 2;\n printf(\"%d\\n\", a);\n set(&amp;a, 10);\n printf(\"%d\\n\", a);\n return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 337, "user_id": 3068177, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/eac437f92e28d9896250a3d7b9b76d42?s=128&d=identicon&r=PG&f=1", "display_name": "user3068177", "link": "https://stackoverflow.com/users/3068177/user3068177"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1421889855, "creation_date": 1421884325, "question_id": 28079060, "link": "https://stackoverflow.com/questions/28079060/printing-an-int-in-c", "title": "Printing an int in C", "body": "<p>I am trying to print an int a before and after calling a set function to set the value of a. I am doing this in C. When I compile it I have no errors but when I attempt to run it, I get a segmentation fault.</p>\n\n<p>Here is what I have so far:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(){\n int* a;\n printf(\"%d\",*a);\n set(10);\n printf(\"%d\", *a);\n return 0;\n}\n\nint set(int*a, int val){\n *a = val;\n return *a;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "linux", "system"], "comments": [{"owner": {"reputation": 4932, "user_id": 4358570, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/U40Df.jpg?s=128&g=1", "display_name": "Innocent Bystander", "link": "https://stackoverflow.com/users/4358570/innocent-bystander"}, "edited": false, "score": 1, "creation_date": 1421884143, "post_id": 28078931, "comment_id": 44536791, "body": "Might this be your answer? <a href=\"https://stackoverflow.com/questions/7134590/how-to-test-if-an-address-is-readable-in-linux-userspace-app\" title=\"how to test if an address is readable in linux userspace app\">stackoverflow.com/questions/7134590/&hellip;</a>"}, {"owner": {"reputation": 15720, "user_id": 19719, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3355303796cad8b9ea85993abc9030aa?s=128&d=identicon&r=PG&f=1", "display_name": "indiv", "link": "https://stackoverflow.com/users/19719/indiv"}, "edited": false, "score": 1, "creation_date": 1421884264, "post_id": 28078931, "comment_id": 44536825, "body": "You could also just try to access it and catch the segfault:  <a href=\"http://stackoverflow.com/questions/2350489/how-to-catch-segmentation-fault-in-linux\" title=\"how to catch segmentation fault in linux\">stackoverflow.com/questions/2350489/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3076, "user_id": 2112731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c0cd41c5afcd4701fbb21ca081bcb0c?s=128&d=identicon&r=PG", "display_name": "DoxyLover", "link": "https://stackoverflow.com/users/2112731/doxylover"}, "edited": false, "score": 0, "creation_date": 1421903644, "post_id": 28079041, "comment_id": 44541844, "body": "@ruemorgue - one example: an address on the stack could be a valid local variable of the calling function or this function&#39;s return address from the call. In the latter case, your program is likely to fail when the function returns."}], "tags": [], "owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "is_accepted": false, "score": 6, "last_activity_date": 1421884229, "creation_date": 1421884229, "answer_id": 28079041, "question_id": 28078931, "link": "https://stackoverflow.com/questions/28078931/how-can-i-check-the-validity-of-an-address-before-accessing-the-address-in-a-lin/28079041#28079041", "title": "How can I check the validity of an address before accessing the address in a Linux environment program?linux?", "body": "<p>You just cannot. The best you can do is to check a pointer value is not a null pointer, which C terminology wise is not an invalid pointer. Even if your pointer is inside an accessible segment, it does not mean it is a valid pointer and that you will not get an undefined behavior.</p>\n"}], "owner": {"reputation": 29, "user_id": 4480440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da1f9abe6e1483d93179cb826ac333b3?s=128&d=identicon&r=PG&f=1", "display_name": "ruemorgue", "link": "https://stackoverflow.com/users/4480440/ruemorgue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1513435385, "creation_date": 1421883554, "last_edit_date": 1513435385, "question_id": 28078931, "link": "https://stackoverflow.com/questions/28078931/how-can-i-check-the-validity-of-an-address-before-accessing-the-address-in-a-lin", "title": "How can I check the validity of an address before accessing the address in a Linux environment program?linux?", "body": "<p>I would like to check the validity of an address or pointer before I read or write to an address in a Linux executable. I'm using either C or C++. My goal is to avoid segment violation type errors if an API function is passed an invalid pointer.</p>\n"}, {"tags": ["c", "unix", "linux-kernel", "power-management", "pci"], "comments": [{"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 0, "creation_date": 1421920957, "post_id": 28078711, "comment_id": 44549245, "body": "I hardly understand the context. Are you having some issue with some device? Do you want to manage the device via userspace? Does the device have a driver in kernel? Be more elaborative."}, {"owner": {"reputation": 155, "user_id": 2114651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WLgMs.jpg?s=128&g=1", "display_name": "Roman Kovtuh", "link": "https://stackoverflow.com/users/2114651/roman-kovtuh"}, "reply_to_user": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 0, "creation_date": 1422012345, "post_id": 28078711, "comment_id": 44591621, "body": "I want to switch off any power of any PCI-device. In my situation it has driver, but i don&#39;t know either it compiled in kernel or not. Kernel or userspace is not important, but userspace application is more comfortable to me."}], "answers": [{"comments": [{"owner": {"reputation": 155, "user_id": 2114651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WLgMs.jpg?s=128&g=1", "display_name": "Roman Kovtuh", "link": "https://stackoverflow.com/users/2114651/roman-kovtuh"}, "edited": false, "score": 0, "creation_date": 1566381219, "post_id": 57588414, "comment_id": 101635422, "body": "Thank you.  I already found this but forgot to post answer. I finally used this command to switch device off: <code>echo 1 &gt; &#47;sys&#47;bus&#47;pci&#47;devices&#47;0000\\:03\\:00.0&#47;remove</code> and this command to switch it on: <code>echo 1 blur &gt; &#47;sys&#47;bus&#47;pci&#47;rescan</code>. I really don&#39;t sure that it switches device to D3cold state, but it did the trick for me. To see if d3cold allowed read <code>&#47;sys&#47;bus&#47;pci&#47;devices&#47;0000\\:03\\:00.0&#47;d3cold_allowed</code>."}, {"owner": {"reputation": 155, "user_id": 2114651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WLgMs.jpg?s=128&g=1", "display_name": "Roman Kovtuh", "link": "https://stackoverflow.com/users/2114651/roman-kovtuh"}, "edited": false, "score": 0, "creation_date": 1566381816, "post_id": 57588414, "comment_id": 101635780, "body": "What distro do you use? I have <code>power</code> only as a directory in my sysfs (<code>4.15.0-55-generic #60-Ubuntu SMP Tue Jul 2 18:22:20 UTC 2019 x86_64 x86_64 x86_64 GNU&#47;Linux</code>)."}], "tags": [], "owner": {"reputation": 384, "user_id": 10366339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70d926a465011ebfe84712bb106bebbe?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/10366339/andy"}, "is_accepted": true, "score": 1, "last_activity_date": 1566379336, "creation_date": 1566379336, "answer_id": 57588414, "question_id": 28078711, "link": "https://stackoverflow.com/questions/28078711/switch-pci-device-to-d3-cold-d3cold-state/57588414#57588414", "title": "Switch PCI device to D3 cold (D3cold) state", "body": "<p>Potential Method #1\nI think you can do it with these commands:</p>\n\n<p>disable</p>\n\n<blockquote>\n  <p>echo 0 > /sys/bus/pci/slots/$NUMBER/power</p>\n</blockquote>\n\n<p>enable</p>\n\n<blockquote>\n  <p>echo 1 > /sys/bus/pci/slots/$NUMBER/power</p>\n</blockquote>\n\n<p>Where $NUMBER is the number of the PCI slot.</p>\n\n<p>lspci -vv may help to identify the device. This is not very well documented...</p>\n"}, {"tags": [], "owner": {"reputation": 384, "user_id": 10366339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70d926a465011ebfe84712bb106bebbe?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/10366339/andy"}, "is_accepted": false, "score": 0, "last_activity_date": 1567160143, "creation_date": 1567160143, "answer_id": 57724854, "question_id": 28078711, "link": "https://stackoverflow.com/questions/28078711/switch-pci-device-to-d3-cold-d3cold-state/57724854#57724854", "title": "Switch PCI device to D3 cold (D3cold) state", "body": "<p>Another way is to send shutdown notification to pci device. I take nvm device for example</p>\n\n<ol>\n<li><p>read bar0 value by lspci, offset is 10h.</p>\n\n<p>lspci -s 01:00.0 -xxxx. For example you got value: 0xfc1f4004</p></li>\n<li><p>read memory whose addr is 0xfc1f4000</p></li>\n<li><p>write 1 in bit 14 of 0xfc1f4014</p></li>\n</ol>\n\n<p>Offset 14h: CC \u2013 Controller Configuration.  Bit 15:14 = 01b  Normal shutdown notification</p>\n"}], "owner": {"reputation": 155, "user_id": 2114651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WLgMs.jpg?s=128&g=1", "display_name": "Roman Kovtuh", "link": "https://stackoverflow.com/users/2114651/roman-kovtuh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1861, "favorite_count": 1, "accepted_answer_id": 57588414, "answer_count": 2, "score": 0, "last_activity_date": 1567160143, "creation_date": 1421882361, "last_edit_date": 1421922775, "question_id": 28078711, "link": "https://stackoverflow.com/questions/28078711/switch-pci-device-to-d3-cold-d3cold-state", "title": "Switch PCI device to D3 cold (D3cold) state", "body": "<p>I need to phisically power off my PCI device in linux. I have find the functions I need, but it seems to write a kernel mode application to use that library, because I have find it in kernel headers.</p>\n\n<p>I have found this function <code>int pci_set_power_state(struct pci_dev *dev, pci_power_t state)</code> in drivers/pci/pci.c and I don't know how to use it.</p>\n\n<p>Also, I've read in documentation, that device driver in general is not used to switch device to d3cold, because the device simply switches off and don't work at all (yes, there are some devices, that can be switched off not completely, and are able to send a wake up call, but this is another story...) and I think, that I need to communicate with PCI bus.</p>\n\n<p>I don't know where to look for an answer, please guide my quest.</p>\n"}, {"tags": ["c", "arrays", "string"], "comments": [{"owner": {"reputation": 10668, "user_id": 1062250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d7bed607125818c218b48621d4a37a2?s=128&d=identicon&r=PG", "display_name": "nullptr", "link": "https://stackoverflow.com/users/1062250/nullptr"}, "edited": false, "score": 0, "creation_date": 1421882621, "post_id": 28078708, "comment_id": 44536262, "body": "This code inputs only a single string (apart from not compiling). Also, what you are getting instead of the expected result?"}, {"owner": {"reputation": 171, "user_id": 1832428, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/5nPSe.png?s=128&g=1", "display_name": "iHubble", "link": "https://stackoverflow.com/users/1832428/ihubble"}, "reply_to_user": {"reputation": 10668, "user_id": 1062250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d7bed607125818c218b48621d4a37a2?s=128&d=identicon&r=PG", "display_name": "nullptr", "link": "https://stackoverflow.com/users/1062250/nullptr"}, "edited": false, "score": 0, "creation_date": 1421883190, "post_id": 28078708, "comment_id": 44536461, "body": "@Inspired, this is more or less pseudocode. I didn&#39;t want to include everything for the sake of clarity. I will modify it slightly so it&#39;s more easy to understand. I am seeking a general way of solving this, so it&#39;s more a general question than a debug one."}, {"owner": {"reputation": 5701, "user_id": 4392605, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IgDqF.png?s=128&g=1", "display_name": "Meninx - \u30e1\u30cd\u30f3\u30c3\u30af\u30b9", "link": "https://stackoverflow.com/users/4392605/meninx-%e3%83%a1%e3%83%8d%e3%83%b3%e3%83%83%e3%82%af%e3%82%b9"}, "edited": false, "score": 0, "creation_date": 1421883308, "post_id": 28078708, "comment_id": 44536504, "body": "I think if you give us the whole code is much better than the pseudocode because this latter does nothing but confusing me honestly ! @iHubble I get the idea but I want to see how you did it so it will be easy to fix it !"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1421883396, "post_id": 28078708, "comment_id": 44536533, "body": "NB: <code>#define N = 10;</code> is wrong; you should write <code>enum { N = 10 };</code> or <code>#define N 10</code>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1421883555, "post_id": 28078708, "comment_id": 44536599, "body": "All the shifting is modestly pointless -- a waste of energy.  Keep a record of the first valid entry and the next available entry for overwriting.  When one of the numbers reaches the upper bound, wrap it back to zero.  When the next available entry is the first valid entry, overwrite the first valid entry and increment the first valid entry tracker to go to the next.  Rinse and repeat."}, {"owner": {"reputation": 5701, "user_id": 4392605, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IgDqF.png?s=128&g=1", "display_name": "Meninx - \u30e1\u30cd\u30f3\u30c3\u30af\u30b9", "link": "https://stackoverflow.com/users/4392605/meninx-%e3%83%a1%e3%83%8d%e3%83%b3%e3%83%83%e3%82%af%e3%82%b9"}, "edited": false, "score": 0, "creation_date": 1421883760, "post_id": 28078708, "comment_id": 44536666, "body": "he can keep a record of the number of inputs and do the strcpy with array of subscript <code>(number_inputs -1) mod N</code> which can do the trick !"}, {"owner": {"reputation": 171, "user_id": 1832428, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/5nPSe.png?s=128&g=1", "display_name": "iHubble", "link": "https://stackoverflow.com/users/1832428/ihubble"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1421883984, "post_id": 28078708, "comment_id": 44536737, "body": "@JonathanLeffler, can you elaborate more into an answer?"}], "answers": [{"comments": [{"owner": {"reputation": 171, "user_id": 1832428, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/5nPSe.png?s=128&g=1", "display_name": "iHubble", "link": "https://stackoverflow.com/users/1832428/ihubble"}, "edited": false, "score": 0, "creation_date": 1421884980, "post_id": 28079100, "comment_id": 44537030, "body": "This works quite nicely, but the numbering is still from 1 to N. I would like it to be from M-N to M. I can easily fix this, thanks a bunch."}], "tags": [], "owner": {"reputation": 5701, "user_id": 4392605, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IgDqF.png?s=128&g=1", "display_name": "Meninx - \u30e1\u30cd\u30f3\u30c3\u30af\u30b9", "link": "https://stackoverflow.com/users/4392605/meninx-%e3%83%a1%e3%83%8d%e3%83%b3%e3%83%83%e3%82%af%e3%82%b9"}, "is_accepted": true, "score": 1, "last_activity_date": 1421884855, "last_edit_date": 1421884855, "creation_date": 1421884553, "answer_id": 28079100, "question_id": 28078708, "link": "https://stackoverflow.com/questions/28078708/cycling-through-a-c-array-with-global-counter/28079100#28079100", "title": "Cycling through a C array with global counter", "body": "<p>This is your code with some changes </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string.h&gt;\n\n#define N 10                                      /* max size of array */\n#define BUFF_MAX 50                               /* max size of buffer */\nint M = 0;                                        /* input count */\nchar A[N][BUFF_MAX];                              /* should i initialize this? */\n\nvoid displayArray()\n{\n    int h;\n    //you need to change the condition of for in order to print\n    // the adequate number of elements\n    for ( h = 0; h &lt; (M&gt;N?N:M); h++)                   /* print the elements */\n    {\n        printf(\"%2d  %s\\n\", h + 1, A[h]);         /* this doesn't number properly */\n        /* and needs to be modified */\n    }\n}\n\nint main(void)\n{\n    while(1)                                      /* keep reading from the user */\n    {\n        char input[BUFF_MAX];\n        fgets(input, sizeof(input), stdin); /* read input from user */\n        // you need to add the condition below because the fgets include the newline\n        // if the user hit enter after each input\n        if(input[strlen(input)-1]=='\\n')\n            input[strlen(input)-1]='\\0';\n        // note that the subscript of the array is changed in order to\n        // get the desired input A[ M % N ]\n        // so the sequence of index will be 0 1 2 ... N-1 0 1 2 etc.\n        strcpy(A[M % N], input);                      /* copy input into array */\n        M++;                                      /* i might need some modulo here */\n\n        if (!strcmp(input, \"hist\"))\n            displayArray();\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Keep in mind that your code doesn't have a break point in order to exit the program. You need to add a <code>break</code> or <code>return</code> or <code>goto</code> inside the <code>while</code> loop to finish its execution !!</p>\n"}, {"comments": [{"owner": {"reputation": 171, "user_id": 1832428, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/5nPSe.png?s=128&g=1", "display_name": "iHubble", "link": "https://stackoverflow.com/users/1832428/ihubble"}, "edited": false, "score": 0, "creation_date": 1421887384, "post_id": 28079263, "comment_id": 44537729, "body": "This answer is better as calling <code>hist</code> at the beginning does not get numbered as a negative number like the other solution. Will definitely use this one."}], "tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 1, "last_activity_date": 1421885557, "creation_date": 1421885557, "answer_id": 28079263, "question_id": 28078708, "link": "https://stackoverflow.com/questions/28078708/cycling-through-a-c-array-with-global-counter/28079263#28079263", "title": "Cycling through a C array with global counter", "body": "<p>This is what I had in mind. Note that I avoid 'infinite loops' and the program detects EOF and stops upon EOF.  Entering <code>hist</code> triggers a print operation but that line is not saved in the history.  Also, if you're observant, you'll note that there are only 9 entries saved in the 10-line buffer.  If you must have 10 lines on display, increase N by 1.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define N 10          /* max size of array */\n#define BUFF_MAX 50   /* max size of buffer */\n\nint M = 0;            /* monotonic input count */\nint first_valid = 0;\nint first_avail = 0;\nchar A[N][BUFF_MAX];\n\nstatic\nvoid displayArray(int v1, int v2)\n{\n    int h = v1;\n    int x = M - N + 1;\n    if (x &lt; 0)\n        x = 0;\n    while (h != v2)\n    {\n        printf(\"%2d  %s\\n\", ++x, A[h++]);\n        if (h &gt;= N)\n            h = 0;\n    }\n}\n\nint main(void)\n{\n    char input[BUFF_MAX];\n    while (fgets(input, sizeof(input), stdin) != 0)\n    {\n        int len = strlen(input);\n        if (input[len-1] == '\\n')\n            input[--len] = '\\0';\n        if (strcmp(input, \"hist\") == 0)\n            displayArray(first_valid, first_avail);\n        else\n        {\n            strcpy(A[first_avail++], input);\n            M++;\n            if (first_avail &gt;= N)\n                first_avail = 0;\n            if (first_avail == first_valid)\n            {\n                if (++first_valid &gt;= N)\n                    first_valid = 0;\n            }\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Sample run:</p>\n\n<pre><code>Line 1\nhist\n 1  Line 1\nline 2\nhist\n 1  Line 1\n 2  line 2\nline 3\nxyz 4\nasd 5\nhist\n 1  Line 1\n 2  line 2\n 3  line 3\n 4  xyz 4\n 5  asd 5\nEmergency 6\nHelpline 7\nhist\n 1  Line 1\n 2  line 2\n 3  line 3\n 4  xyz 4\n 5  asd 5\n 6  Emergency 6\n 7  Helpline 7\nLooping Later 8\nLast Line Before Recycling 9\nhist\n 1  Line 1\n 2  line 2\n 3  line 3\n 4  xyz 4\n 5  asd 5\n 6  Emergency 6\n 7  Helpline 7\n 8  Looping Later 8\n 9  Last Line Before Recycling 9\nFirst lot of recycling 10\nhist\n 2  line 2\n 3  line 3\n 4  xyz 4\n 5  asd 5\n 6  Emergency 6\n 7  Helpline 7\n 8  Looping Later 8\n 9  Last Line Before Recycling 9\n10  First lot of recycling 10\nKeep going\nDozens of lines\nBad Luck\nA fortnight\nhist\n 6  Emergency 6\n 7  Helpline 7\n 8  Looping Later 8\n 9  Last Line Before Recycling 9\n10  First lot of recycling 10\n11  Keep going\n12  Dozens of lines\n13  Bad Luck\n14  A fortnight\n</code></pre>\n"}], "owner": {"reputation": 171, "user_id": 1832428, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/5nPSe.png?s=128&g=1", "display_name": "iHubble", "link": "https://stackoverflow.com/users/1832428/ihubble"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 28079100, "answer_count": 2, "score": 0, "last_activity_date": 1421885557, "creation_date": 1421882346, "last_edit_date": 1421883885, "question_id": 28078708, "link": "https://stackoverflow.com/questions/28078708/cycling-through-a-c-array-with-global-counter", "title": "Cycling through a C array with global counter", "body": "<p>I have an array of strings that I would like to dynamically change when a user input a string. This 2D array has a fixed size, say <code>char A[N][BUFF_MAX]</code> will store <code>N</code> strings each of size at most <code>BUFF_MAX</code>. I want this array to cycle through, that is, the most recent input should be stored in <code>A[0]</code> and so on.</p>\n\n<p>So far, I have no problem implementing the above. My problem arises when the user inputs more than <code>N</code> strings. At this point I would like to store the <em>last</em> <code>N</code> inputs and discard the rest to only use <code>N</code> cells. Shifting can be done using using <code>strcpy</code>.</p>\n\n<p>Now, I want to print this array with the string number. For instance, if the user inputs <code>M</code> strings, where <code>M &lt; N</code> strings, it should print</p>\n\n<pre><code>    1  string_1\n    2  string_2\n    :  :\n    M  string_M\n</code></pre>\n\n<p>However, if <code>M &gt; N</code> then it should print</p>\n\n<pre><code>  M-N  string_(M-N)\nM-N+1  string_(M-N+1)\n    :  :\n    M  string_M\n</code></pre>\n\n<p>I have tried several things and I can't quite make it work. Here is simplified version of my code.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string.h&gt;\n\n#define N 10                                      /* max size of array */\n#define BUFF_MAX 50                               /* max size of buffer */\nint M = 0;                                        /* input count */\nchar A[N][BUFF_MAX];                              /* should i initialize this? */\n\nvoid displayArray() {                        \n    for (int h = 0; h &lt; M; h++) {                 /* print the elements */\n        printf(\"%2d  %s\\n\", h + 1, A[h]);         /* this doesn't number properly */\n                                                  /* and needs to be modified */\n    }\n}\n\nint main(void) {\n    while(1) {                                    /* keep reading from the user */\n        char input[BUFF_MAX];\n        fgets(input, sizeof(input), stdin);       /* read input from user */\n        strcpy(A[M], input);                      /* copy input into array */\n        M++;                                      /* i might need some modulo here */\n\n        if (M &gt;= N) {                             /* if user inputs more than N */\n            for (int i = N - 1; i &gt; 0; i--) {     /* shift the array */\n                strcpy(A[i], A[i - 1]); \n            }\n        }\n        if (!strcmp(input, \"hist\"))\n            displayArray();\n    }    \n}\n</code></pre>\n\n<p>Thank you for your help.</p>\n"}, {"tags": ["c", "clang", "clang-static-analyzer"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421881886, "post_id": 28078586, "comment_id": 44536003, "body": "I don&#39;t really see any problem in the program, have you read about what the warning means in <code>clang</code>&#39;s documentation?"}, {"owner": {"reputation": 25907, "user_id": 509706, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/yedDa.png?s=128&g=1", "display_name": "Wilfred Hughes", "link": "https://stackoverflow.com/users/509706/wilfred-hughes"}, "reply_to_user": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1421882587, "post_id": 28078586, "comment_id": 44536245, "body": "@nos yep, the same error. Note that <code>temp_buffer</code> is never passed to <code>realloc</code>."}, {"owner": {"reputation": 25907, "user_id": 509706, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/yedDa.png?s=128&g=1", "display_name": "Wilfred Hughes", "link": "https://stackoverflow.com/users/509706/wilfred-hughes"}, "reply_to_user": {"reputation": 6975, "user_id": 3121023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52448806175b9aa66c86d40cf0829f1?s=128&d=identicon&r=PG&f=1", "display_name": "user3121023", "link": "https://stackoverflow.com/users/3121023/user3121023"}, "edited": false, "score": 1, "creation_date": 1421882735, "post_id": 28078586, "comment_id": 44536306, "body": "@user3121023 true, but as the comment says, fixing that doesn&#39;t silence this error. I tried to keep my example short, but <a href=\"https://gist.github.com/Wilfred/edbbdd8b61d3aef1d52a\" rel=\"nofollow noreferrer\">see this version for the same warning even when checking for errors</a>."}, {"owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "edited": false, "score": 0, "creation_date": 1421883224, "post_id": 28078586, "comment_id": 44536472, "body": "The incriminated code looks OK to me, so it looks like a false positive. Are you using the latest version of <code>scan-build</code>?"}, {"owner": {"reputation": 25907, "user_id": 509706, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/yedDa.png?s=128&g=1", "display_name": "Wilfred Hughes", "link": "https://stackoverflow.com/users/509706/wilfred-hughes"}, "edited": false, "score": 0, "creation_date": 1421883494, "post_id": 28078586, "comment_id": 44536573, "body": "I&#39;m running clang-analyzer 3.5.1."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1421883649, "post_id": 28078586, "comment_id": 44536629, "body": "As an aside, why do you use a side-buffer in <code>read_string</code> anyway?"}, {"owner": {"reputation": 25907, "user_id": 509706, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/yedDa.png?s=128&g=1", "display_name": "Wilfred Hughes", "link": "https://stackoverflow.com/users/509706/wilfred-hughes"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1421884733, "post_id": 28078586, "comment_id": 44536957, "body": "@Deduplicator what do you suggest instead?"}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1421884815, "post_id": 28078586, "comment_id": 44536981, "body": "Reading directly into the target buffer? Also, <code>sizeof(char)</code> is a bit superfluous."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1421886155, "post_id": 28078586, "comment_id": 44537374, "body": "Does the error report change if you check the return value from <code>malloc()</code> or <code>realloc()</code> for nullness?"}], "answers": [{"comments": [{"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1421883803, "post_id": 28078963, "comment_id": 44536677, "body": "Well, at least that gives a concise bug-report then."}, {"owner": {"reputation": 25907, "user_id": 509706, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/yedDa.png?s=128&g=1", "display_name": "Wilfred Hughes", "link": "https://stackoverflow.com/users/509706/wilfred-hughes"}, "edited": false, "score": 0, "creation_date": 1421884655, "post_id": 28078963, "comment_id": 44536933, "body": "Thanks, I&#39;ve filed <a href=\"http://llvm.org/bugs/show_bug.cgi?id=22289\" rel=\"nofollow noreferrer\">bug 22289</a> based on your minimised version."}], "tags": [], "owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "is_accepted": true, "score": 5, "last_activity_date": 1421883700, "creation_date": 1421883700, "answer_id": 28078963, "question_id": 28078586, "link": "https://stackoverflow.com/questions/28078586/why-is-accessing-a-null-terminated-string-giving-garbage-or-undefined/28078963#28078963", "title": "Why is accessing a null-terminated string giving &#39;garbage or undefined&#39;?", "body": "<p>You can reduce the read_string() function to this:</p>\n\n<pre><code>char *read_string(int file_descriptor) {\n    char *s = NULL;\n\n    s = malloc(1);\n    //memset(s,0,1);\n    s[0] = 0;\n\n    return s;\n}\n</code></pre>\n\n<p>If you comment in the memset() call, the warning goes away. I therefore conclude that the static analyzer is wrong in this case.</p>\n"}, {"tags": [], "owner": {"reputation": 25907, "user_id": 509706, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/yedDa.png?s=128&g=1", "display_name": "Wilfred Hughes", "link": "https://stackoverflow.com/users/509706/wilfred-hughes"}, "is_accepted": false, "score": 2, "last_activity_date": 1421919544, "creation_date": 1421919544, "answer_id": 28085367, "question_id": 28078586, "link": "https://stackoverflow.com/questions/28078586/why-is-accessing-a-null-terminated-string-giving-garbage-or-undefined/28085367#28085367", "title": "Why is accessing a null-terminated string giving &#39;garbage or undefined&#39;?", "body": "<p>There's nothing wrong with the code.</p>\n\n<p>This is a false positive bug in LLVM's clang-analyzer, see <a href=\"http://llvm.org/bugs/show_bug.cgi?id=22289\" rel=\"nofollow\">bug 22289</a>.</p>\n"}], "owner": {"reputation": 25907, "user_id": 509706, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/yedDa.png?s=128&g=1", "display_name": "Wilfred Hughes", "link": "https://stackoverflow.com/users/509706/wilfred-hughes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 247, "favorite_count": 0, "accepted_answer_id": 28078963, "answer_count": 2, "score": 4, "last_activity_date": 1421919544, "creation_date": 1421881747, "last_edit_date": 1421919495, "question_id": 28078586, "link": "https://stackoverflow.com/questions/28078586/why-is-accessing-a-null-terminated-string-giving-garbage-or-undefined", "title": "Why is accessing a null-terminated string giving &#39;garbage or undefined&#39;?", "body": "<p>I have a simple brainfuck interpreter in C that produces the following warning in <code>scan-build</code>:</p>\n\n<pre><code>$ scan-build gcc -Wall -g -std=c99 main.c \nscan-build: Using '/usr/bin/clang' for static analysis\nmain.c:14:11: warning: Assigned value is garbage or undefined\n        c = *(program + instruction_index);\n          ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n1 warning generated.\nscan-build: 1 bug found.\n</code></pre>\n\n<p>Here's the smallest version of my program that exhibits this behaviour:</p>\n\n<pre><code>#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;alloca.h&gt;\n\nvoid eval_program(char *program) {\n    int program_len = strlen(program);\n    int data_index = 0, instruction_index = 0;\n\n    char c;\n    while (instruction_index &lt; program_len) {\n        c = *(program + instruction_index);\n\n        switch (c) {\n        case '&gt;':\n            data_index++;\n            instruction_index++;\n            break;\n        default:\n            instruction_index++;\n            break;\n        }\n    }\n}\n\nchar *read_string(int file_descriptor) {\n    char *s = NULL;\n    int total_bytes_read = 0;\n\n    int BUFFER_SIZE = sizeof(char) * 1024;\n    char *temp_buffer = alloca(BUFFER_SIZE);\n\n    int bytes_read;\n    // Not bothering checking the return code from read or realloc for\n    // errors, because it doesn't affect scan-build's output.\n    while ((bytes_read = read(file_descriptor, temp_buffer, BUFFER_SIZE))) {\n        s = realloc(s, total_bytes_read + bytes_read);\n        memcpy(s + total_bytes_read, temp_buffer, bytes_read);\n        total_bytes_read += bytes_read;\n    }\n\n    s = realloc(s, total_bytes_read + 1);\n    s[total_bytes_read] = '\\0';\n\n    return s;\n}\n\nint main() {\n    char *program = read_string(0); // read from stdin\n    eval_program(program);\n    free(program);\n\n    return 0;\n}\n</code></pre>\n\n<p>This program does not generate any warnings when compiled with GCC and <code>-Wall -Wextra</code>, so why is accessing the string garbage or undefined? The program works fine in my testing.</p>\n\n<p>This is a minimal example without error checking <code>malloc</code> or <code>read</code>, but <a href=\"https://gist.github.com/Wilfred/edbbdd8b61d3aef1d52a\" rel=\"nofollow\">the warning still occurs if I use error checking</a>. The warning also occurs if I replace <code>realloc</code> with <code>malloc</code>.</p>\n"}, {"tags": ["python", "c"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421881518, "post_id": 28078495, "comment_id": 44535871, "body": "You can, I don&#39;t get <code>self.position = [], []</code>? if you want a list of points, you can define a point <code>class</code> too."}, {"owner": {"reputation": 12066, "user_id": 3924118, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/abb01e1c2a8e3d9e1534dca14b19b3d8?s=128&d=identicon&r=PG&f=1", "display_name": "nbro", "link": "https://stackoverflow.com/users/3924118/nbro"}, "edited": false, "score": 0, "creation_date": 1421881531, "post_id": 28078495, "comment_id": 44535878, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/35988/c-like-structures-in-python\">C-like structures in Python</a>"}, {"owner": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "edited": false, "score": 0, "creation_date": 1421881534, "post_id": 28078495, "comment_id": 44535879, "body": "Right now, <code>particle</code> is defined as a list that contains the value of <code>N</code>, which means it&#39;s a list with one element in it."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1421881820, "post_id": 28078495, "comment_id": 44535981, "body": "Yes, a class is like a struct with methods. But your array of structs is not part of the struct in C--why would you make it part of the class in Python? It should be a list of particle objects. The particle objects should just have the same members your struct does."}], "answers": [{"comments": [{"owner": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "edited": false, "score": 0, "creation_date": 1421881863, "post_id": 28078577, "comment_id": 44535993, "body": "A list of dictionaries, eh?  I&#39;m thinking a class is definitely appropriate here."}, {"owner": {"reputation": 3177, "user_id": 4385912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b6b8544ab6bbb623b148d994914f331?s=128&d=identicon&r=PG&f=1", "display_name": "cleros", "link": "https://stackoverflow.com/users/4385912/cleros"}, "edited": false, "score": 0, "creation_date": 1421882002, "post_id": 28078577, "comment_id": 44536049, "body": "to class or not to class ... well, that&#39;s a different debate :-)"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1421882931, "post_id": 28078577, "comment_id": 44536376, "body": "Your proposed change to a dictionary would slow his code down tremendously. Yes, dictionaries are fabulously useful when your need them--but a huge waste of resources when you don&#39;t."}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1421883431, "post_id": 28078577, "comment_id": 44536551, "body": "@LeeDanielCrocker: In CPython, the attribute lookup uses a dictionary anyway."}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 2, "creation_date": 1421883455, "post_id": 28078577, "comment_id": 44536560, "body": "The example with <code>class TypeParticle</code> has some serious errors in it: <code>self</code> is missing everywhere."}], "tags": [], "owner": {"reputation": 3177, "user_id": 4385912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b6b8544ab6bbb623b148d994914f331?s=128&d=identicon&r=PG&f=1", "display_name": "cleros", "link": "https://stackoverflow.com/users/4385912/cleros"}, "is_accepted": false, "score": 1, "last_activity_date": 1421937780, "last_edit_date": 1421937780, "creation_date": 1421881715, "answer_id": 28078577, "question_id": 28078495, "link": "https://stackoverflow.com/questions/28078495/can-i-use-a-class-variable-in-python-similarly-to-how-a-struct-variable-in-c-is/28078577#28078577", "title": "Can I use a class variable in python similarly to how a struct variable in C is used?", "body": "<p>You have two options for this problem. The first is to use a class;</p>\n\n<pre><code>struct type_particle {\n    double mass;\n    double acceleration[3];\n    double position[3][3];\n    double velocity[3][3];\n};\n</code></pre>\n\n<p>becomes</p>\n\n<pre><code>class TypeParticle:\n    def __init__(self): #pass any kind of init variable you know as an argument\n        self.mass = None\n        self.acceleration = []\n        self.position = []\n        self.velocity = []\n</code></pre>\n\n<p>However, you should - maybe - look into dictionaries (the single most useful data object in Python - I think). However, this only makes sense if the number of particles is small, for a (large) list of dictionaries is, as was commented on, not something you want. In this case, this would become</p>\n\n<pre><code>type_particle = {\n    'mass' = 0.,\n    'acceleration' = [],\n    'position' = [],\n    'velocity' = []\n}\n</code></pre>\n\n<p>you could then access it with e.g.</p>\n\n<pre><code>type_particle['acceleration']\n</code></pre>\n\n<p>Some explanation: Python <a href=\"http://en.wikipedia.org/wiki/Duck_typing\" rel=\"nofollow\">duck-types</a> and dynamically allocates memory. Therefore you do need neither to set the types, nor the exact size of the lists.</p>\n"}, {"comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421882603, "post_id": 28078644, "comment_id": 44536254, "body": "I don&#39;t see the benefit in using this, what is it?"}, {"owner": {"reputation": 3941, "user_id": 1226066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d07a07156fae305353d13c74f04c8125?s=128&d=identicon&r=PG&f=1", "display_name": "s16h", "link": "https://stackoverflow.com/users/1226066/s16h"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421883490, "post_id": 28078644, "comment_id": 44536572, "body": "If all is needed is a simple class with some attributes, then it&#39;s simpler to write and read; I feel it&#39;s more pythonic (although you may disagree). It may not be suitable if the OP requires to do different checks etc. when instantiating an object. But, since OP was using a struct, I assumed all OP needs is a container."}, {"owner": {"reputation": 3627, "user_id": 1460849, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1f8e4125e72fd9a100f62da3324a3635?s=128&d=identicon&r=PG", "display_name": "kalhartt", "link": "https://stackoverflow.com/users/1460849/kalhartt"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1421885719, "post_id": 28078644, "comment_id": 44537252, "body": "@iharob as for the benefit, namedtuples use less memory because their properties are not stored in a normal dict. It&#39;s essentially the same as your answer, but with <code>__slots__</code> and some other batteries included."}], "tags": [], "owner": {"reputation": 3941, "user_id": 1226066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d07a07156fae305353d13c74f04c8125?s=128&d=identicon&r=PG&f=1", "display_name": "s16h", "link": "https://stackoverflow.com/users/1226066/s16h"}, "is_accepted": false, "score": 3, "last_activity_date": 1421883344, "last_edit_date": 1421883344, "creation_date": 1421882015, "answer_id": 28078644, "question_id": 28078495, "link": "https://stackoverflow.com/questions/28078495/can-i-use-a-class-variable-in-python-similarly-to-how-a-struct-variable-in-c-is/28078644#28078644", "title": "Can I use a class variable in python similarly to how a struct variable in C is used?", "body": "<p>What you need is a Python <a href=\"https://docs.python.org/3.4/tutorial/classes.html\" rel=\"nofollow\">class</a>. Since your use-case is quite simple, you can use a <a href=\"https://docs.python.org/3.4/library/collections.html#collections.namedtuple\" rel=\"nofollow\"><code>namedtuple</code></a> which essentially creates a boilerplate class for you:</p>\n\n<pre><code>from collections import namedtuple\n\nParticle = namedtuple('Particle', ['mass', 'acceleration', 'position', 'velocity'])\n</code></pre>\n\n<p>Then,</p>\n\n<pre><code>&gt;&gt;&gt; sun_mass = 1.989e30\n&gt;&gt;&gt; sun_acceleration = [1, 2, 3]\n&gt;&gt;&gt; sun_position = [4, 5, 6]\n&gt;&gt;&gt; sun_velocity = [7, 8, 9]\n&gt;&gt;&gt; sun = Particle(sun_mass, sun_acceleration, sun_position, sun_velocity)\n&gt;&gt;&gt; sun\nParticle(mass=1.989e+30, acceleration=[1, 2, 3], position=[4, 5, 6], velocity=[7, 8, 9])\n</code></pre>\n\n<p>Inspired by iharob's answer, you can also have a <code>Vector</code> <a href=\"https://docs.python.org/3.4/library/collections.html#collections.namedtuple\" rel=\"nofollow\">namedtuple</a>:</p>\n\n<pre><code>Vector = namedtuple('Vector', ['x', 'y', 'z'])\n</code></pre>\n\n<p>Even if you were to create your own class for <code>Particle</code> because you want to easily to some checks etc. before initialising it, you should still use a <code>namedtuple</code> for <code>Vector</code> as it is very simple. But, be mindful that <code>namedtuple</code>s are immutable so once initialised you cannot change its attributes. For <code>mass</code>, that is fine because the mass doesn't change. But if you wanted to change the attributes on the <code>Vector</code> then you have to use a <code>list</code> instead, as shown in the first example.</p>\n"}, {"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 1, "last_activity_date": 1421882261, "creation_date": 1421882261, "answer_id": 28078692, "question_id": 28078495, "link": "https://stackoverflow.com/questions/28078495/can-i-use-a-class-variable-in-python-similarly-to-how-a-struct-variable-in-c-is/28078692#28078692", "title": "Can I use a class variable in python similarly to how a struct variable in C is used?", "body": "<p>See this idea</p>\n\n<pre><code>class Vector:\n    def __init__(self, x, y, z):\n        self.x = x\n        self.y = y\n        self.z = z\n\nclass Particle:\n    def __init__(self, mass, acceleration, position, velocity):\n        self.position = [None, position,None]\n        self.velocity = [None, velocity, None]\n        self.acceleration = [None, acceleration, None]\n        self.mass = mass\n\nparticles    = []\nposition     = Vector(-0.002893107099833329, 0, 0)\nvelocity     = Vector(0, 0, 0) # at rest\nmass         = sunMass\nacceleration = initialAcceleration\n\nparticle.append(Particle(mass, acceleration, position, velocity);\n.\n.\n.\nparticle.append(Particle(otherMass, otherAcceleration, otherPosition, otherVelocity);\n</code></pre>\n\n<p>you can use classes this way, and further more, you can add methods to update the values, get the values, print the etc.</p>\n"}], "owner": {"reputation": 41, "user_id": 3650942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03eaf2476bec6cc22ab90b6634d5c71a?s=128&d=identicon&r=PG&f=1", "display_name": "user3650942", "link": "https://stackoverflow.com/users/3650942/user3650942"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 536, "favorite_count": 1, "answer_count": 3, "score": 3, "last_activity_date": 1421937780, "creation_date": 1421881333, "last_edit_date": 1421881535, "question_id": 28078495, "link": "https://stackoverflow.com/questions/28078495/can-i-use-a-class-variable-in-python-similarly-to-how-a-struct-variable-in-c-is", "title": "Can I use a class variable in python similarly to how a struct variable in C is used?", "body": "<p>I wrote a program in C that uses structs to model the motion of planets going around the Sun.  I want to write that same program in Python.  The planets and Sun are treated as particles.</p>\n\n<p>In C I wrote a struct for the data of any particle.  In the 2D arrays, the rows are the x,y,z components and the columns are the old,current,new iterations.  The acceleration of each particle doesn't change so it is an array of x,y,z components. </p>\n\n<pre><code>struct type_particle {\n    double mass;\n    double acceleration[3];\n    double position[3][3];\n    double velocity[3][3];\n};\n</code></pre>\n\n<p>I used this struct variable to access data about specific particles.  Each element in the array is a specific particle where N=9.  For example, particle[0] is the Sun.</p>\n\n<pre><code>static struct type_particle particle[N];\n</code></pre>\n\n<p>I define the initial x-position of the Sun by</p>\n\n<pre><code>particle[0].position[0][0] = -0.002893107099833329;   \n</code></pre>\n\n<p>I want to do the same thing in Python using classes.  I am just using the Sun and one planet so N=2.  So far I have this.     </p>\n\n<pre><code>class type_particle:\n    particle = [N]\n    def __init__(self, position):\n        self.position = [],[]\n</code></pre>\n\n<p>I am not sure if I can define the class variable \"particle\" as a list.  Is this on the right track to creating something that gives the same results as the struct and struct variable I used earlier?  I read that classes can be used like structs but I do not understand how.  My goal is to use a class to access data for a particular particle.  Any help is appreciated.</p>\n"}, {"tags": ["c++", "c", "igraph"], "comments": [{"owner": {"reputation": 3612, "user_id": 2422013, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/VwKps.jpg?s=128&g=1", "display_name": "AStopher", "link": "https://stackoverflow.com/users/2422013/astopher"}, "edited": false, "score": 0, "creation_date": 1421880847, "post_id": 28078282, "comment_id": 44535560, "body": "The library is <code>C</code>, therefore you need to do an <code>extern &quot;C&quot;</code> block and insert the <code>#include</code> within it."}], "answers": [{"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 4, "last_activity_date": 1421880644, "creation_date": 1421880644, "answer_id": 28078310, "question_id": 28078282, "link": "https://stackoverflow.com/questions/28078282/using-igraph-object-oriented-programming/28078310#28078310", "title": "Using IGRAPH object oriented programming", "body": "<p>Just do this</p>\n\n<pre><code>extern \"C\" {\n   #include &lt;igraph.h&gt;\n}\n</code></pre>\n\n<p>c++ compiler mangles function names so when searching the library for that function it will not be found, if you do this, then every function declared in <code>igraph.h</code> will have c linkage preventing name mangling.</p>\n"}], "owner": {"reputation": 73, "user_id": 4480213, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003384667080/picture?type=large", "display_name": "Rodrigo Francisquini", "link": "https://stackoverflow.com/users/4480213/rodrigo-francisquini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 0, "accepted_answer_id": 28078310, "answer_count": 1, "score": 3, "last_activity_date": 1421880644, "creation_date": 1421880495, "last_edit_date": 1421880601, "question_id": 28078282, "link": "https://stackoverflow.com/questions/28078282/using-igraph-object-oriented-programming", "title": "Using IGRAPH object oriented programming", "body": "<p>I have the library igraph perfectly working for codes in C.</p>\n\n<p>However, when I try to compile a code in C ++, I have undefined reference problems. Some functions work, and some doesn't. I believe that what is missing is to include \" igraph.hpp\", based on my research. Although, I don't know how to install these files.</p>\n\n<p>I'm trying compile the following example program:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;igraph.h&gt;\n\nusing namespace std;\n\nint main() {\n\n  igraph_t g;\n  FILE *ifile;\n  int i;\n  igraph_sparsemat_t temp;\n\n  ifile=fopen(\"karate.gml\", \"r\");\n  if (ifile==0) printf(\"erro\");\n\n  igraph_read_graph_gml(&amp;g, ifile);\n  fclose(ifile);\n\n  i=igraph_get_sparsemat(&amp;g, &amp;temp);\n\n  return 0;\n\n}\n</code></pre>\n\n<p>I'm compiling the program using the command:\n</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>g++ teste.cc -I/usr/local/include/igraph -L/usr/local/lib -ligraph -o teste\n</code></pre>\n\n<p>But, this error occurs:\n</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>teste.cc:(.text+0x77): refer\u00eancia indefinida para `igraph_get_sparsemat(igraph_s const*, igraph_sparsemat_t*)'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>Can anyone help me?</p>\n"}, {"tags": ["c", "parsing", "compiler-construction", "scope", "compiler-theory"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 3, "creation_date": 1421879433, "post_id": 28077931, "comment_id": 44534975, "body": "That&#39;s not parser&#39;s job. The parser builds a syntax tree. Other stages verify the semantics is valid."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1421879456, "post_id": 28077931, "comment_id": 44534989, "body": "It sounds like you need a review of the first term study of <a href=\"http://en.wikipedia.org/wiki/Compilers:_Principles,_Techniques,_and_Tools\" rel=\"nofollow noreferrer\">The Dragon Book.</a>. Lexers build tokens from input, Parsers validate syntax of token streams against the language grammar. <i>Neither</i> are destined for the task you&#39;re describing"}, {"owner": {"reputation": 1553, "user_id": 3839220, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8062ce7db5476fc8d470bba1e7cc785d?s=128&d=identicon&r=PG&f=1", "display_name": "metro-man", "link": "https://stackoverflow.com/users/3839220/metro-man"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1421879590, "post_id": 28077931, "comment_id": 44535034, "body": "@n.m. Cool, so the parser just builds it even if the stuff on there is wrong?"}, {"owner": {"reputation": 1553, "user_id": 3839220, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8062ce7db5476fc8d470bba1e7cc785d?s=128&d=identicon&r=PG&f=1", "display_name": "metro-man", "link": "https://stackoverflow.com/users/3839220/metro-man"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1421879696, "post_id": 28077931, "comment_id": 44535071, "body": "@WhozCraig So what part of an interpreter/compiler would do this?"}, {"owner": {"reputation": 1553, "user_id": 3839220, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8062ce7db5476fc8d470bba1e7cc785d?s=128&d=identicon&r=PG&f=1", "display_name": "metro-man", "link": "https://stackoverflow.com/users/3839220/metro-man"}, "edited": false, "score": 2, "creation_date": 1421879737, "post_id": 28077931, "comment_id": 44535086, "body": "Am I thinking of Semantic Analysis?"}, {"owner": {"reputation": 12687, "user_id": 2809095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/705cfb2d48f12159ebae7d0275355a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Iwillnotexist Idonotexist", "link": "https://stackoverflow.com/users/2809095/iwillnotexist-idonotexist"}, "edited": false, "score": 2, "creation_date": 1421879756, "post_id": 28077931, "comment_id": 44535098, "body": "The lexer chunks a string without knowing whether the sequence of tokens makes sense. The parser builds a tree without knowing if the sequence of statements it encodes makes sense. It&#39;s <i>semantic analysis</i> that looks at the parse tree and sees undeclared or redeclared variables and says &quot;this is wrong&quot;."}, {"owner": {"reputation": 1553, "user_id": 3839220, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8062ce7db5476fc8d470bba1e7cc785d?s=128&d=identicon&r=PG&f=1", "display_name": "metro-man", "link": "https://stackoverflow.com/users/3839220/metro-man"}, "reply_to_user": {"reputation": 12687, "user_id": 2809095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/705cfb2d48f12159ebae7d0275355a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Iwillnotexist Idonotexist", "link": "https://stackoverflow.com/users/2809095/iwillnotexist-idonotexist"}, "edited": false, "score": 0, "creation_date": 1421879812, "post_id": 28077931, "comment_id": 44535125, "body": "@IwillnotexistIdonotexist Great, thanks! This is nice to know since it means I won&#39;t have to worry about implementing it just yet :) Should I delete this question, or perhaps someone could put an answer in or something?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1421879984, "post_id": 28077931, "comment_id": 44535191, "body": "@user3839220 Sry, just saw your comment, yes, that&#39;s the most common place."}, {"owner": {"reputation": 1553, "user_id": 3839220, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8062ce7db5476fc8d470bba1e7cc785d?s=128&d=identicon&r=PG&f=1", "display_name": "metro-man", "link": "https://stackoverflow.com/users/3839220/metro-man"}, "edited": false, "score": 0, "creation_date": 1421880272, "post_id": 28077931, "comment_id": 44535319, "body": "Can the parser do some error checking? Like if theres an unexpected token can it say?"}, {"owner": {"reputation": 12687, "user_id": 2809095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/705cfb2d48f12159ebae7d0275355a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Iwillnotexist Idonotexist", "link": "https://stackoverflow.com/users/2809095/iwillnotexist-idonotexist"}, "edited": false, "score": 2, "creation_date": 1421882602, "post_id": 28077931, "comment_id": 44536251, "body": "@user3839220 It must; I&#39;m gonna sound like a broken record, but each component handles different classes of errors. A lexer errors on foreign objects (like a <code>`</code> backtick, which isn&#39;t a valid character anywhere in a C program), a parser errors on syntax (like a missing <code>;</code> where one was expected), and a semantic analyzer errors on nonsensical code (syntactically well-formed code that is still incorrect, like redeclarations <code>int x;int x;</code>. They are both syntactically valid (<code>nameofType nameofVar;</code>), it&#39;s their togetherness that is bad)."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 12687, "user_id": 2809095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/705cfb2d48f12159ebae7d0275355a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Iwillnotexist Idonotexist", "link": "https://stackoverflow.com/users/2809095/iwillnotexist-idonotexist"}, "edited": false, "score": 2, "creation_date": 1421890124, "post_id": 28077931, "comment_id": 44538514, "body": "@IwillnotexistIdonotexist: Actually, a back-tick can appear in a character constant or a character string, but your general point is clear and well stated."}, {"owner": {"reputation": 8356, "user_id": 443265, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/34f10e24ce2786d8a6ddb4d79462dce5?s=128&d=identicon&r=PG", "display_name": "Martin T&#246;rnwall", "link": "https://stackoverflow.com/users/443265/martin-t%c3%b6rnwall"}, "edited": false, "score": 0, "creation_date": 1421940149, "post_id": 28077931, "comment_id": 44561037, "body": "Books like the Dragon Book try to convey an idealized picture of the structure of a compiler. In doing so, I think they tend to overemphasize the importance of keeping the stages&#39; responsibilities separated. For example, it&#39;s sometimes useful for the parser and lexer to interact more like coroutines than separate pipeline stages. Sorry. I don&#39;t think there&#39;s anything inherently <i>wrong</i> with the parser taking on some of the responsibilities traditionally delegated to the &quot;semantic analyzer&quot; (whatever that even means!)."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 8356, "user_id": 443265, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/34f10e24ce2786d8a6ddb4d79462dce5?s=128&d=identicon&r=PG", "display_name": "Martin T&#246;rnwall", "link": "https://stackoverflow.com/users/443265/martin-t%c3%b6rnwall"}, "edited": false, "score": 1, "creation_date": 1422075643, "post_id": 28077931, "comment_id": 44618852, "body": "@MartinT&#246;rnwall: Point well taken, but it is often tempting to put a shortcut into your pipeline only to find later that it has unfortunate consequences. For example, binding names to scopes while parsing is tempting, but it precludes language constructs where names are used before their definition. Classic case in point: list comprehensions. Python <code>[x+3 for x in values]</code> or Haskell <code>[ transform x | x &lt;- values ]</code>. (Haskell <code>where</code> expressions are another example, and there are many others.)"}, {"owner": {"reputation": 8356, "user_id": 443265, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/34f10e24ce2786d8a6ddb4d79462dce5?s=128&d=identicon&r=PG", "display_name": "Martin T&#246;rnwall", "link": "https://stackoverflow.com/users/443265/martin-t%c3%b6rnwall"}, "edited": false, "score": 0, "creation_date": 1422092379, "post_id": 28077931, "comment_id": 44621796, "body": "Indeed it does! I&#39;m naturally not proposing that one ought to design a language that prohibits use-before-definition just to allow the parser to build the symbol table. :-) But if the language you are implementing already suffers from this deficiency, I figure you may as well exploit it. The point I&#39;m really trying to make is that you don&#39;t necessarily have to follow the textbook&#39;s model to the letter."}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1421890241, "post_id": 28079290, "comment_id": 44538549, "body": "Welcome to Stack Overflow. Please read the <a href=\"https://stackoverflow.com/tour\">About</a> page soon.  Note that this question is tagged &#39;C&#39; and not &#39;C++&#39;, which makes a &#39;class&#39; a bit problematic.  I&#39;m not clear why the class should have static methods; why not regular member functions?  However, that&#39;s somewhat tangential to the question."}, {"owner": {"reputation": 56, "user_id": 3127365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39e22b79d260d674692d514251c8b073?s=128&d=identicon&r=PG&f=1", "display_name": "capagira87", "link": "https://stackoverflow.com/users/3127365/capagira87"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1421922174, "post_id": 28079290, "comment_id": 44549946, "body": "First of all I apologize for my answer. I didn&#39;t understood the language used for the creation of the compiler and I supposed it was Java. And so, I suggested the use of static methods, because I&#39;ve seen on cup that this kind of method is requested, when you call it in the customization of the grammar rule, beetween {: and :}"}], "tags": [], "owner": {"reputation": 56, "user_id": 3127365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39e22b79d260d674692d514251c8b073?s=128&d=identicon&r=PG&f=1", "display_name": "capagira87", "link": "https://stackoverflow.com/users/3127365/capagira87"}, "is_accepted": false, "score": -1, "last_activity_date": 1421885646, "creation_date": 1421885646, "answer_id": 28079290, "question_id": 28077931, "link": "https://stackoverflow.com/questions/28077931/verifying-data-types-structs-in-a-parser/28079290#28079290", "title": "Verifying data types/structs in a parser", "body": "<p>The best way is to use a class, where you define structures like HashMap, that lets you to do controls about the type and or the existence of a variable. This class should have static methods that interface with the grammar rules written in the parser.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2512323"}, "edited": false, "score": 0, "creation_date": 1421946318, "post_id": 28092270, "comment_id": 44565133, "body": "Minor note: search time in this data structure is linear on scope nesting level."}, {"owner": {"reputation": 1553, "user_id": 3839220, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8062ce7db5476fc8d470bba1e7cc785d?s=128&d=identicon&r=PG&f=1", "display_name": "metro-man", "link": "https://stackoverflow.com/users/3839220/metro-man"}, "edited": false, "score": 0, "creation_date": 1421954092, "post_id": 28092270, "comment_id": 44569563, "body": "Awesome, loads of detail this helped me a lot :)"}], "tags": [], "owner": {"reputation": 8356, "user_id": 443265, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/34f10e24ce2786d8a6ddb4d79462dce5?s=128&d=identicon&r=PG", "display_name": "Martin T&#246;rnwall", "link": "https://stackoverflow.com/users/443265/martin-t%c3%b6rnwall"}, "is_accepted": true, "score": 2, "last_activity_date": 1421940353, "last_edit_date": 1421940353, "creation_date": 1421939731, "answer_id": 28092270, "question_id": 28077931, "link": "https://stackoverflow.com/questions/28077931/verifying-data-types-structs-in-a-parser/28092270#28092270", "title": "Verifying data types/structs in a parser", "body": "<p>I'm going to assume that regardless of which approach you choose, your parser will be constructing some kind of abstract syntax tree. You now have two options. Either, the parser could populate the tree with identifier nodes that store the name of the variable or function that they are referencing. This leaves the issue of scope resolution to a later pass, as advocated in many compiler textbooks.</p>\n\n<p>The other option is to have the parser immediately look the identifier up in a symbol table that it builds as it goes, and store a pointer to the symbol in the abstract syntax tree node instead. This approach tends to work well if your language doesn't allow implicit forward-references to names that haven't been declared yet.</p>\n\n<p>I recently implemented the latter approach in a compiler that I'm working on, and I've been very pleased with the result so far. I will briefly describe my solution below.</p>\n\n<p>Symbols are stored in a structure that looks something like this:</p>\n\n<pre><code>typedef struct symbol {\n    char  *name;\n    Type  *type;\n    Scope *scope; // Points to the scope in which the symbol was defined.\n} Symbol;\n</code></pre>\n\n<p>So what is this <code>Scope</code> thing? The language I'm compiling is lexically scoped, and each function definition, block, etc, introduces a new scope. Scopes form a stack where the bottom element is the global scope. Here's the structure:</p>\n\n<pre><code>typedef struct scope {\n    struct scope *parent;\n    Symbol *buckets;\n    size_t  nbuckets;\n} Scope;\n</code></pre>\n\n<p>The <code>buckets</code> and <code>nbuckets</code> fields are a hash map of identifiers (strings) to <code>Symbol</code> pointers. By following the <code>parent</code> pointers, one can walk the scope stack while searching for an identifier.</p>\n\n<p>With the data structures in place, it's easy to write a parser that resolves names in accordance with the rules of lexical scoping.</p>\n\n<ol>\n<li>Upon encountering a statement or declaration that introduces a new scope (such as a function declaration or a block statement), the parser pushes a new <code>Scope</code> onto the stack. The new scope's <code>parent</code> field points to the old scope.</li>\n<li>When the parser sees an identifier, it tries to look it up in the current scope. If the lookup fails in the current scope, it continues recursively in the <code>parent</code> scope, etc. If no corresponding <code>Symbol</code> can be found, an error is raised. If the lookup is successful, the parser creates an AST node with a pointer to the symbol.</li>\n<li>Finally, when a variable or function declaration is encountered, it is bound in the current scope.</li>\n</ol>\n\n<p>Some languages use more than one namespace. For instance, in Erlang, functions and variables occupy different namespaces, requiring awkward syntax like <code>fun foo:bar/1</code> to get at the value of a function. This is easily implemented in the model I outlined above by keeping several <code>Scope</code> stacks - one for each namespace.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2512323"}, "is_accepted": false, "score": 0, "last_activity_date": 1421945948, "creation_date": 1421945948, "answer_id": 28094472, "question_id": 28077931, "link": "https://stackoverflow.com/questions/28077931/verifying-data-types-structs-in-a-parser/28094472#28094472", "title": "Verifying data types/structs in a parser", "body": "<p>If we define \"scope\" or \"context\" as mapping from variable names to types (and possibly some more information, such as scope depth), then its natural implementation is either hashmap or some sort of search tree. Upon reaching any variable definition, compiler should insert the name with corresponding type into this data structure. When some sort of 'end scope' operator is encountered, we must already have enough information to 'backtrack' changes in this mapping to its previous state.</p>\n\n<p>For hashmap implementation, for each variable definition we can store previous mapping for this name, and restore this mapping when we have reached the 'end of scope' operator. We should keep a stack of stacks of this changes (one stack for each currently open scope), and backtrack topmost stack of changes in the end of each scope.</p>\n\n<p>One drawback of this approach is that we must either complete compilation in one pass, or store mapping for each identifier in program somewhere, as we can't inspect any scope more than once, or in order other than order of appearance in the source file (or AST).</p>\n\n<p>For tree-based implemetation, this can be easily achieved with so called <a href=\"http://en.wikipedia.org/wiki/Persistent_data_structure#Trees\" rel=\"nofollow\">persistent trees</a>. We just maintain a stack of trees, one for each scope, pushing as we 'open' some scope, and poping when the scope is ended.</p>\n\n<p>The 'depth of scope' is enough for choose what to do in the situation where then new variable name conflicts with one already in mapping. Just check for <code>old depth &lt; new depth</code> and overwrite on success, or report error on failure.</p>\n\n<p>To differentiate between function and variable names you can use separate (yet similar or same) mappings for those objects. If some context permits only function or only variable name, you already know where to look. If both are permited in some context, perform lookup in both structures, and report \"ambiguity error\" if name corresponds to a function and a variable at the same time.</p>\n"}], "owner": {"reputation": 1553, "user_id": 3839220, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8062ce7db5476fc8d470bba1e7cc785d?s=128&d=identicon&r=PG&f=1", "display_name": "metro-man", "link": "https://stackoverflow.com/users/3839220/metro-man"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 1, "accepted_answer_id": 28092270, "answer_count": 3, "score": 0, "last_activity_date": 1421945948, "creation_date": 1421878911, "question_id": 28077931, "link": "https://stackoverflow.com/questions/28077931/verifying-data-types-structs-in-a-parser", "title": "Verifying data types/structs in a parser", "body": "<p>I'm writing a recursive descent parser, and I'm at the point where I'm unsure how to validate everything. I'm not even sure if I should be doing this at the stage of the parser. What I mean is, I could have some syntax i.e:</p>\n\n<pre><code>int x = 5\nint x = 5\n</code></pre>\n\n<p>And that would be valid, so would the parser check if x has already been defined? If so, would I use a hashmap? And what kind of information would I need to store, like how can I handle the scope of a variable, since x could be defined in a function in a local and global scope:</p>\n\n<pre><code>int x = 5;\nvoid main() {\n    int x = 2;\n}\n</code></pre>\n\n<p>And finally, when I store to the hashmap, how can I differentiate the types? For example, I could have a variable called <code>foo</code>, and a struct also called <code>foo</code>. So when I put <code>foo</code> in a hashmap, it will probably cause some errors. I'm thinking I could prefix it like storing this as the hashmaps key for a struct <code>struct_xyz</code> where xyz is the name of the struct, and for variables <code>int_xyz</code>?\nThanks :)</p>\n"}, {"tags": ["c", "arrays", "gcc", "printf", "typecast-operator"], "comments": [{"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 5, "creation_date": 1421878375, "post_id": 28077790, "comment_id": 44534542, "body": "You&#39;re passing a char to function that takes a char array (write_file) and also passing a char to fprintf, which takes a char*"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 5, "creation_date": 1421878472, "post_id": 28077790, "comment_id": 44534589, "body": "&quot;THIS IS THE ERROR &quot; ... um... that isn&#39;t the only error: <code>scanf(&quot;%s&quot;, &amp;ch);</code>  - ouch."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 7, "creation_date": 1421878707, "post_id": 28077790, "comment_id": 44534689, "body": "You seem confused about the difference between a <i>single</i> character, an array of characters, and a C string. I think you need to find a basic tutorial, or maybe start from the C FAQ, eg. <a href=\"http://c-faq.com/charstring/index.html\" rel=\"nofollow noreferrer\">here</a>"}], "owner": {"reputation": 7423, "user_id": 2605112, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/MpAe0.png?s=128&g=1", "display_name": "makansij", "link": "https://stackoverflow.com/users/2605112/makansij"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 662, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1421878524, "creation_date": 1421878255, "question_id": 28077790, "link": "https://stackoverflow.com/questions/28077790/does-fprintf-not-accept-an-array-of-characters", "title": "Does fprintf not accept an array of characters?", "body": "<p>I keep getting an error/warning about the argument of write_file making a pointer from integer without cast.  </p>\n\n<p>I'm trying to write an array of characters to file.  I thought that an array of characters would be received by fprintf.<br>\nhere's the code:  (error message at end)</p>\n\n<pre><code># include &lt;stdio.h&gt;\n# include &lt;stdlib.h&gt;\n\nchar take_char();\nvoid write_file(char ch[10]);\n\nint main(){\n    char ch;\n    ch = take_char();\n    write_file(ch);\n    printf(\"successfully worked\");\n    return 0;\n}\n\nchar take_char(){\n    char ch;\n    printf(\"Please input a character:\\n\");\n    scanf(\"%s\", &amp;ch);\n    return ch;\n}\n\nvoid write_file(char ch[10]){\n    FILE *fp;\n    fp = fopen(\"C:\\\\Users\\\\Jormak\\\\Desktop\\\\C_practicing\\\\Projects\\\\file_main.txt\",\"w\");\n\n    if (fp == NULL){\n        printf(\"FILE did not open.\");\n    }\n    else{\n        printf(\"Successfully opened the file\");\n    }\n\n    fprintf(fp,ch[10]);\n    fclose(fp);\n}\n</code></pre>\n\n<p>Error message:</p>\n\n<p>THIS IS THE ERROR:</p>\n\n<pre><code>main.c: In function \u2018main\u2019:\nmain.c:10:2: warning: passing argument 1 of \u2018write_file\u2019 makes pointer from     integer without a cast [enabled by default]\n  write_file(ch[10]);\n  ^\nmain.c:5:6: note: expected \u2018char *\u2019 but argument is of type \u2018char\u2019\n void write_file(char ch[10]);\n      ^\nmain.c: In function \u2018write_file\u2019:\nmain.c:33:2: warning: passing argument 2 of \u2018fprintf\u2019 makes pointer from     integer without a cast [enabled by default]\n  fprintf(fp,ch[10]);\n</code></pre>\n\n<p>^\n    In file included from /usr/include/stdio.h:29:0,\n                 from main.c:1:\n    /usr/include/stdio.h:173:5: note: expected \u2018const char *\u2019 but argument is of     type \u2018char\u2019\n     int _EXFUN(fprintf, (FILE *__restrict, const char *__restrict, ...)\n     ^</p>\n"}, {"tags": ["c", "arrays", "string"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1421886877, "post_id": 28077759, "comment_id": 44537595, "body": "<code>char help_string[][rowLength];</code> is illegal, as is <code>strcpy(help_strig, string);</code>. Also it&#39;s not possible to return an array of strings in C. I&#39;d suggest reading some tutorials or books about arrays, before continuing"}, {"owner": {"reputation": 273, "user_id": 4241871, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ac6bbd0ae2234f23463a983f4d09d141?s=128&d=identicon&r=PG&f=1", "display_name": "Y&#237;u", "link": "https://stackoverflow.com/users/4241871/y%c3%adu"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1421886973, "post_id": 28077759, "comment_id": 44537623, "body": "Thanks for the suggestion, yes, I&#39;ll still have to read A LOT."}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1421880180, "post_id": 28077882, "comment_id": 44535280, "body": "Be wary of <code>strncpy()</code>; it does not always null-terminate the string it copies to.  If the array is already zeroed, it won&#39;t matter.  If it was used for something else before hand, it does matter."}], "tags": [], "owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "is_accepted": true, "score": 1, "last_activity_date": 1421880539, "last_edit_date": 1421880539, "creation_date": 1421878625, "answer_id": 28077882, "question_id": 28077759, "link": "https://stackoverflow.com/questions/28077759/two-dimensional-array-of-strings/28077882#28077882", "title": "two dimensional array of strings", "body": "<p>You need to declare a two dimensional array, e.g.</p>\n\n<pre><code>char array[50][200];\n</code></pre>\n\n<p>Then to copy a 1D string into the array you would do this</p>\n\n<pre><code>strcpy( array[0], \"Hello\" );\n</code></pre>\n\n<p>To copy a portion of a string from a 2D array to another 2D array, use the <code>strncpy</code> function, e.g.</p>\n\n<pre><code>length = 3;\nstrncpy( new_string[index], help_string[10], length );\nnew_string[index][length] = '\\0';\n</code></pre>\n\n<p>That would copy the first 3 characters of <code>help_string[10]</code> into the <code>new_string</code> array. Note that <code>strncpy</code> may not terminate the string with a NUL character (depending on the length of the source string) so that needs to be done after the copy.</p>\n"}, {"tags": [], "owner": {"reputation": 43, "user_id": 3272935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ff78267d00607648c24f12386973bb5?s=128&d=identicon&r=PG&f=1", "display_name": "Scott", "link": "https://stackoverflow.com/users/3272935/scott"}, "is_accepted": false, "score": 0, "last_activity_date": 1421895574, "creation_date": 1421895574, "answer_id": 28080586, "question_id": 28077759, "link": "https://stackoverflow.com/questions/28077759/two-dimensional-array-of-strings/28080586#28080586", "title": "two dimensional array of strings", "body": "<p>This should do it for you. Using dynamic allocation can reduce the program's memory footprint at runtime as well as file size of the executable.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\nchar **\nstutterString(char *str)\n{\n  int i, sz, len=strlen(str);\n  char **rtn; /* a 2-dimensional array */\n  char *s;\n\n  /* allocate the number of rows plus an extra one to indicate the end of list.\n     calloc() will set all \"rows\" to NULL.\n  */\n  rtn = (char **)calloc(len+1, sizeof(char **));\n  for(i=0; i&lt;len; ++i) {\n    /* allocate the string -\n      '2' is 0 offset plus i plus 1 for \\0\n    */\n    s = (char *)malloc(sizeof(char *) * (i+2));\n    memcpy(s, str, i+1);\n    s[i+1] = '\\0';\n    rtn[i] = s;\n  }\n\n  return(rtn);\n}\n\nint\nmain()\n{\n  int i;\n  char **stutter;   /* think of it as a 2-dimensional array */\n\n  stutter = stutterString(\"hello\");\n\n  /* Print and free the string. It's important to free when\n     you are done with the memory! */\n  for(i=0; stutter[i]!=NULL; ++i) {\n    puts(stutter[i]);\n    free(stutter[i]);\n  }\n  free(stutter); /* free the array itself */\n\n  return(0);\n}\n</code></pre>\n"}], "owner": {"reputation": 273, "user_id": 4241871, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ac6bbd0ae2234f23463a983f4d09d141?s=128&d=identicon&r=PG&f=1", "display_name": "Y&#237;u", "link": "https://stackoverflow.com/users/4241871/y%c3%adu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 780, "favorite_count": 0, "accepted_answer_id": 28077882, "answer_count": 2, "score": 0, "last_activity_date": 1421895574, "creation_date": 1421878102, "last_edit_date": 1421878834, "question_id": 28077759, "link": "https://stackoverflow.com/questions/28077759/two-dimensional-array-of-strings", "title": "two dimensional array of strings", "body": "<p>I try to make a function that gets a string delivered like \"Hello\".\nThe function's return value should be an array of strings that would look like</p>\n\n<pre><code>H\nHe\nHel\nHell\nHello\n</code></pre>\n\n<p>I really don't know how to do that. My current code is super messy because I made a lot of adjustions and everyone made it worse.</p>\n\n<pre><code>char stutterString(char string[])\n{\n  rowLength = strlen(string);\n  char help_string[][rowLength]; // I wanted to make the onedimensiol string i get into a two dimensial one so I can then compare my strings in a forloop \n\n    strcpy(help_strig, string); // I'm not sure if that's how you copy a 1d string into a 2d string, I guess not.\n</code></pre>\n\n<p>My loops look like</p>\n\n<pre><code>for(; count1 &lt;= COLUMN; count1++)\n  {\n    for(count2 = 0; count2 &lt;= NumberRow; count2++)\n    {\n      new_string[count1][ROW] = help_string[0][count2];\n\n      ROW++\n    }\n    NumberRow++;\n  }\n\n// NumberRow indicates the limit on the letters that should be copied. like in the beginning it's 1 for H, then 2 for the He and so on..\n//count1 is for the column number we r currently and count2 for the row\n</code></pre>\n\n<p>Any ideas how I could achieve that easier / where to improve my code?</p>\n"}, {"tags": ["c", "linux", "visual-studio", "gcc"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 2, "creation_date": 1421876544, "post_id": 28077340, "comment_id": 44533637, "body": "You forgot to call <code>getchar</code>. To use <code>getchar</code> with gcc you have to call it."}, {"owner": {"reputation": 1, "user_id": 4454012, "user_type": "registered", "profile_image": "https://graph.facebook.com/1130876833/picture?type=large", "display_name": "Tomer Cohen", "link": "https://stackoverflow.com/users/4454012/tomer-cohen"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1421876705, "post_id": 28077340, "comment_id": 44533720, "body": "my bad i meant to write fgetc"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1421878026, "post_id": 28077340, "comment_id": 44534403, "body": "<i>&quot;the first char on the input is the &quot;enter&quot; the user pressed from the line before&quot;</i> Yes, that&#39;s true, that&#39;s how <code>scanf</code> works, so you need to call <code>getchar</code> on the line after <code>scanf</code>, to eat the newline."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1421878132, "post_id": 28077340, "comment_id": 44534455, "body": "Code that <i>compiles</i> would be helpful"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1421878265, "post_id": 28077340, "comment_id": 44534500, "body": "There is a memory leak with <code>inputString = malloc(stringSize);</code> because you immediately discard the pointer on re-assigning it the one returned from <code>inputStrings()</code>."}, {"owner": {"reputation": 1, "user_id": 4454012, "user_type": "registered", "profile_image": "https://graph.facebook.com/1130876833/picture?type=large", "display_name": "Tomer Cohen", "link": "https://stackoverflow.com/users/4454012/tomer-cohen"}, "edited": false, "score": 0, "creation_date": 1421878411, "post_id": 28077340, "comment_id": 44534558, "body": "Thanks user3386109, That fixed my issue!"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1421883437, "post_id": 28077340, "comment_id": 44536554, "body": "Code has a edge case problem with <code>inputStrings(FILE* fp, 0)</code> or any negative <code>size</code>.  Suggest <code>if (size &lt;= 1) { error_message()</code>"}], "owner": {"reputation": 1, "user_id": 4454012, "user_type": "registered", "profile_image": "https://graph.facebook.com/1130876833/picture?type=large", "display_name": "Tomer Cohen", "link": "https://stackoverflow.com/users/4454012/tomer-cohen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 146, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1421876669, "creation_date": 1421876361, "last_edit_date": 1421876669, "question_id": 28077340, "link": "https://stackoverflow.com/questions/28077340/how-do-i-use-fgetc-with-gcc-compiler", "title": "How do i use fgetc with gcc compiler", "body": "<p>I am trying to get 2 inputs from a user:</p>\n\n<p>the first one is a size which i get using scanf.\nthe next input is a string of unknown size,\nand the problem is that the first char on the input is the \"enter\" the user pressed from the line before therefor i dont get an input at all.\nI will just note that on visual studio its completely fine! the problem is only on my mac and on my friends linux.\nhere is the code:</p>\n\n<pre><code>int main()\n    {\n        int size;\n        char* inputString;\n        printf(\"Enter the number of computers:\");\n        scanf(\"%d\", &amp;size);\n        if (size == 1)\n        {\n            printf(\"Only one computer\\n\");\n            return;\n        }\n    inputString = malloc(stringSize);\n    inputString = inputStrings(stdin, stringSize);\n }\nchar *inputStrings(FILE* fp, int size)\n{\n    //The size is extended by the input with the value of the provisional\n    char *str;\n    int ch = 0;\n    int len = 0;\n    str = realloc(NULL, sizeof(char)*size);//size is start size\n    if (!str)return str;\n    while (EOF != (ch = fgetc(fp)) &amp;&amp; ch != '\\n')\n    {\n        str[len++] = ch;\n        if (len == size)\n        {\n            str = realloc(str, sizeof(char)*(size += 16));\n            if (!str)return str;\n        }\n    }\n    str[len++] = '\\0';\n\n    return realloc(str, sizeof(char)*len);\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "pic18"], "comments": [{"owner": {"reputation": 16853, "user_id": 4101725, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dGwoPMFb_tM/AAAAAAAAAAI/AAAAAAAABks/tMMqc6E9REg/photo.jpg?sz=128", "display_name": "Michele d&#39;Amico", "link": "https://stackoverflow.com/users/4101725/michele-damico"}, "edited": false, "score": 6, "creation_date": 1421875939, "post_id": 28077151, "comment_id": 44533331, "body": "You are trying to allocate it on the stack and not heap. You should look at the stack configuration."}, {"owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 2, "creation_date": 1421876046, "post_id": 28077151, "comment_id": 44533392, "body": "What does the documentation for your processor or C implementation document as the maximum stack size (if it <i>has</i> a stack)?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1421877799, "post_id": 28077151, "comment_id": 44534282, "body": "PIC18F66K90 has a 31-level internal stack. If the RAM is in 256-byte pages, a C stack won&#39;t take 512 bytes, but heap memory management obviously will, perhaps similar to a huge array on older segmented x86 machines."}, {"owner": {"reputation": 51, "user_id": 4459067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8be5d6f46b13e9b5f8e682a48e32e269?s=128&d=identicon&r=PG&f=1", "display_name": "burnorthingham", "link": "https://stackoverflow.com/users/4459067/burnorthingham"}, "reply_to_user": {"reputation": 16853, "user_id": 4101725, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dGwoPMFb_tM/AAAAAAAAAAI/AAAAAAAABks/tMMqc6E9REg/photo.jpg?sz=128", "display_name": "Michele d&#39;Amico", "link": "https://stackoverflow.com/users/4101725/michele-damico"}, "edited": false, "score": 0, "creation_date": 1421879434, "post_id": 28077151, "comment_id": 44534976, "body": "@Micheled&#39;Amico yep, the compiler didn&#39;t like that large of a variable allocated to the stack.  -I&#39;ll elaborate as an answer."}], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 4459067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8be5d6f46b13e9b5f8e682a48e32e269?s=128&d=identicon&r=PG&f=1", "display_name": "burnorthingham", "link": "https://stackoverflow.com/users/4459067/burnorthingham"}, "is_accepted": true, "score": 3, "last_activity_date": 1421880259, "creation_date": 1421880259, "answer_id": 28078236, "question_id": 28077151, "link": "https://stackoverflow.com/questions/28077151/declaring-large-arrays-on-pic18/28078236#28078236", "title": "Declaring large arrays on PIC18", "body": "<p><strong>From the xc8 user guide 3.5.2.2 and 3.5.2.3</strong> </p>\n\n<p>Auto variables, the default type for local variables, are stored on the compiled stack.  They come into existence when a function is executed and disappear once the function returns.  Each item on the compiled stack must fit within one bank of data memory (256k for PIC18F66K90).  Use the <code>static</code> keyword to change the type to non-auto, so that it is stored in general memory and thus, can be larger than one bank of memory.</p>\n\n<pre><code>#define buffSize 512\n\nint main (void) {\n    static char buffer[buffSize];\n    ...\n}\n</code></pre>\n\n<p>This is what I'm using now and it works.  Thank you for the pokes in the right direction.</p>\n"}, {"tags": [], "owner": {"reputation": 7797, "user_id": 942746, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/34cf9eae5d595c0b480a7cb42f3722b1?s=128&d=identicon&r=PG", "display_name": "Brian McFarland", "link": "https://stackoverflow.com/users/942746/brian-mcfarland"}, "is_accepted": false, "score": 0, "last_activity_date": 1421881438, "creation_date": 1421881438, "answer_id": 28078525, "question_id": 28077151, "link": "https://stackoverflow.com/questions/28077151/declaring-large-arrays-on-pic18/28078525#28078525", "title": "Declaring large arrays on PIC18", "body": "<p>You can also likely increase the stack size by playing with a linker directives file.   </p>\n\n<p>For the old MPLAB-C18 + MPLINK toolchain, you could use a custom linker directive (lkr) file for your project, and specify the stack size like so:</p>\n\n<pre><code> DATABANK   NAME=stackregion   START=0xB00       END=0xEFF\n</code></pre>\n\n<p>Looks like this compiler has been replaced by XC8, but I would be surprised if the newer toolchain does <em>not</em> offer similar features.</p>\n"}], "owner": {"reputation": 51, "user_id": 4459067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8be5d6f46b13e9b5f8e682a48e32e269?s=128&d=identicon&r=PG&f=1", "display_name": "burnorthingham", "link": "https://stackoverflow.com/users/4459067/burnorthingham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3097, "favorite_count": 1, "accepted_answer_id": 28078236, "answer_count": 2, "score": 2, "last_activity_date": 1421881438, "creation_date": 1421875577, "question_id": 28077151, "link": "https://stackoverflow.com/questions/28077151/declaring-large-arrays-on-pic18", "title": "Declaring large arrays on PIC18", "body": "<p>I'm trying to declare a 512 byte array in MPLAB X v2.26, using compiler XC8 v1.32.  My target is a PIC18F66K90 (4k of RAM).  </p>\n\n<p>If I declare the array inside any function, main for example, I get an error.  </p>\n\n<pre><code>#define buffSize 512\n\nint main (void) {\n    char buffer[buffSize];\n    ...\n}\n</code></pre>\n\n<p><em>error: (1250) could not find space (512 bytes) for variable _buffer</em></p>\n\n<p>If I declare the array globally, I don't get an error.</p>\n\n<pre><code>#define buffSize 512\nchar buffer[buffSize];\n\nint main (void) {\n    ...\n}\n</code></pre>\n\n<p><em>All good and happy</em></p>\n\n<p>I've looked at the manual for the processor and the compiler's user guide and suspect the problem has to do with RAM banks (16 banks of 256 bytes each).  My program is working with the array declared globally, but I'm curious about why it must be done this way.  Is it best practice?  Do you have any tips or ideas?</p>\n\n<p>Thank you,\nJames</p>\n"}, {"tags": ["python", "c", "windows-ce"], "answers": [{"tags": [], "owner": {"reputation": 2566, "user_id": 114265, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/AxupL.jpg?s=128&g=1", "display_name": "GR Envoy", "link": "https://stackoverflow.com/users/114265/gr-envoy"}, "is_accepted": true, "score": 1, "last_activity_date": 1422023397, "creation_date": 1422023397, "answer_id": 28112067, "question_id": 28076918, "link": "https://stackoverflow.com/questions/28076918/having-problems-running-python-on-old-ce-device/28112067#28112067", "title": "Having Problems running Python on old CE device", "body": "<p>I found that the problem was the attributes on the CreateFile calls. For some reason on our device the '\\' directory needs different attributes then the '\\Application\\' folder.  mainly I needed to add the FILE_FLAG_BACKUP_SEMANTICS bit to the FlagAndAttributes field.</p>\n"}], "owner": {"reputation": 2566, "user_id": 114265, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/AxupL.jpg?s=128&g=1", "display_name": "GR Envoy", "link": "https://stackoverflow.com/users/114265/gr-envoy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 28112067, "answer_count": 1, "score": -1, "last_activity_date": 1422023397, "creation_date": 1421874804, "last_edit_date": 1421951871, "question_id": 28076918, "link": "https://stackoverflow.com/questions/28076918/having-problems-running-python-on-old-ce-device", "title": "Having Problems running Python on old CE device", "body": "<p>I have a Python interpreter that runs on a CE device and is a C application. Currently the device comes configure with a root '\\' folder and a '\\Application' folder. If I install and run python on the '\\' drive everything is fine, but if I try to put it on the '\\Application' drive it will not run.</p>\n\n<p>In digging further, the problem is with the CreateFileW call. When trying to access '\\PythonLib' I get a normal error code of 80 saying the file exists, when I try to access '\\Application\\PythonLib' I get an error code of 5, or Access is Denied.</p>\n\n<p>Has anyone had any experience with this?  Any C++ app we develop in Visual Studio 2008 and run on the device has no problem accessing '\\Application', but anything we try with Python can not seem to resolve that path.</p>\n"}, {"tags": ["c", "string"], "answers": [{"comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 2, "creation_date": 1421874953, "post_id": 28076891, "comment_id": 44532835, "body": "In your example, 9 characters will be moved (18-9), when only 4 need to be (not counting the terminating NULL)."}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1421881145, "post_id": 28076891, "comment_id": 44535705, "body": "Maybe <code>memmove(s+i, s+n+i, strlen(s+n+i)+1);</code> provided that <code>s+n+i</code> is definitely before the terminating nul."}, {"owner": {"reputation": 3, "user_id": 3294564, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6ed3cfccf2886349d1c1764afefff879?s=128&d=identicon&r=PG&f=1", "display_name": "user3294564", "link": "https://stackoverflow.com/users/3294564/user3294564"}, "edited": false, "score": 0, "creation_date": 1421886538, "post_id": 28076891, "comment_id": 44537497, "body": "thank you for that but could you provide some code without using memmove? Thats what I am trying to achieve right now. Thank you :)"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 3, "user_id": 3294564, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6ed3cfccf2886349d1c1764afefff879?s=128&d=identicon&r=PG&f=1", "display_name": "user3294564", "link": "https://stackoverflow.com/users/3294564/user3294564"}, "edited": false, "score": 0, "creation_date": 1421887226, "post_id": 28076891, "comment_id": 44537692, "body": "@user3294564 is this what you want?"}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1421889704, "post_id": 28076891, "comment_id": 44538416, "body": "Your new (no <code>memmove()</code>) code still copies additional chars from beyond the end of the string..."}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1421894878, "post_id": 28076891, "comment_id": 44539624, "body": "..and now it doesn&#39;t copy enough if <code>n</code> is less than the remaining part of the string.  I think you&#39;re trying to copy <code>n</code> characters, but you actually need to copy <code>length - i - n</code> plus the nul (ie. whatever is left in the string after the removed segment)."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 0, "last_activity_date": 1421890506, "last_edit_date": 1421890506, "creation_date": 1421874738, "answer_id": 28076891, "question_id": 28076798, "link": "https://stackoverflow.com/questions/28076798/remove-given-number-of-characters-from-given-position-in-string-c/28076891#28076891", "title": "remove given number of characters from given position in string C", "body": "<p>You have a couple of errors in your code</p>\n\n<ol>\n<li><p>You are trying to alter a string literal in</p>\n\n<pre><code>remove(\"helloStackOverFlow\", 9, 5);\n</code></pre></li>\n<li><p>Your function name, is the same of a that of a standard functio.</p></li>\n<li><p>Your <code>remove()</code> function algorithm is wrong, the while loop will never end because neither <code>j</code> or <code>n</code> are changing inside the loop.</p></li>\n</ol>\n\n<p>This code should work</p>\n\n<pre><code>void removeChunk(char s[], unsigned int n, unsigned int i)\n{\n    unsigned int k;\n    unsigned int length;\n\n    if ((s == NULL) || (i == 0))\n        return;\n    length = strlen(s);\n    if (i + n &gt; length)\n        n = length - i;\n    for (k = 0 ; (k &lt; n) &amp;&amp; (s[k + i - 1] != '\\0') ; k++)\n        s[k + i] = s[k + i + n];\n}\n\nint main()\n{\n    char s[100] = \"helloStackOverFlow\";\n\n    removeChunk(s, 9, 5);\n\n    printf(\"%s\\n\", s);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 3294564, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6ed3cfccf2886349d1c1764afefff879?s=128&d=identicon&r=PG&f=1", "display_name": "user3294564", "link": "https://stackoverflow.com/users/3294564/user3294564"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 951, "favorite_count": 0, "accepted_answer_id": 28076891, "answer_count": 1, "score": -1, "last_activity_date": 1421890506, "creation_date": 1421874364, "question_id": 28076798, "link": "https://stackoverflow.com/questions/28076798/remove-given-number-of-characters-from-given-position-in-string-c", "title": "remove given number of characters from given position in string C", "body": "<p>I am trying to remove a given number of characters from string and also it must be removed from certain position. Eg. I have a string \"helloStackOverFlow\" and given numbers: position <code>i = 5</code>, numbers of chars to remove <code>n = 9</code>. So we get \"helloFlow\".</p>\n\n<p>When I execute the program, I get error <code>Unhandled exception at 0x00EC166F in skuska trening.exe: 0xC0000005: Access violation writing location 0x00EC58D7.</code></p>\n\n<p>Here is my code, I think there is a problem with string allocation, it wants to write somewhere what does not exist, but I am not sure... </p>\n\n<pre><code> void remove(char s[], int n, int i){\n\n    int j,dlzka=0;\n    dlzka = strlen(s);\n\n    for(j=i; j&lt;dlzka; j++){\n        do{\n        s[j] = s[j+n];\n        }while( (j+n)==dlzka);\n    }\n    printf(\"%s\\n\", s);\n\n}\n\nint main()\n{\n    char s[100];\n    int n, i;\n\n    remove(\"helloStackOverFlow\", 9, 5);\n\n    system(\"pause\");\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "dll", "dllexport", "name-decoration"], "comments": [{"owner": {"reputation": 3688, "user_id": 1111557, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f2b40cacf02c8fa3f91429ef441912ac?s=128&d=identicon&r=PG", "display_name": "inetknght", "link": "https://stackoverflow.com/users/1111557/inetknght"}, "edited": false, "score": 3, "creation_date": 1421873235, "post_id": 28076475, "comment_id": 44531998, "body": "Have you tried exporting them as <code>extern &quot;C&quot;</code> ?"}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1421878686, "post_id": 28076475, "comment_id": 44534680, "body": "I vaguely remember this to be a problem but can&#39;t repro on VS2013.  It should be <code>testfunc@4 = _testfunc@4</code>  Without the @ on the right-hand side, the @4 is interpreted as the ordinal."}, {"owner": {"reputation": 41, "user_id": 4479971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49bb2b5fe978d96f1eba5c080814a117?s=128&d=identicon&r=PG&f=1", "display_name": "Tobias", "link": "https://stackoverflow.com/users/4479971/tobias"}, "edited": false, "score": 0, "creation_date": 1421880295, "post_id": 28076475, "comment_id": 44535332, "body": "extern &quot;c&quot; removed all decoration (what is not what i want - i need the @4 at the end; And if i specify the line you mention in the .def file the linker seems to strip everything away after the &quot;@&quot;"}, {"owner": {"reputation": 770, "user_id": 1108056, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/db29ab9496d7cf1beed295ebdd1e5677?s=128&d=identicon&r=PG", "display_name": "AnotherParker", "link": "https://stackoverflow.com/users/1108056/anotherparker"}, "edited": false, "score": 0, "creation_date": 1439836991, "post_id": 28076475, "comment_id": 52013859, "body": "Original DLL was probably created by GCC or one of its variations."}, {"owner": {"reputation": 2559, "user_id": 2334932, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a1844eccc9d568378157965e433d023b?s=128&d=identicon&r=PG", "display_name": "Vinz", "link": "https://stackoverflow.com/users/2334932/vinz"}, "edited": false, "score": 1, "creation_date": 1515268337, "post_id": 28076475, "comment_id": 83239515, "body": "It may be noteworthy that it&#39;s not possible to <code>extern &quot;C&quot;</code> when compiling pure C units (.c). Hence the popular <code>#ifdef __cplusplus</code> check prior to using it. But if you&#39;re compiling C, that export decoration is inevitable."}], "owner": {"reputation": 41, "user_id": 4479971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49bb2b5fe978d96f1eba5c080814a117?s=128&d=identicon&r=PG&f=1", "display_name": "Tobias", "link": "https://stackoverflow.com/users/4479971/tobias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1214, "favorite_count": 1, "answer_count": 0, "score": 4, "last_activity_date": 1421876019, "creation_date": 1421873091, "question_id": 28076475, "link": "https://stackoverflow.com/questions/28076475/how-to-remove-the-underscore-from-dll-export", "title": "How to remove the underscore from DLL export", "body": "<p>I want to replace a DLL for which I don't have the full source code (but the function declarations). The application loads this DLL at runtime and calls GetProcAddress with (all) the function names. (so I have to name the functions exactly the same). </p>\n\n<p>I created a new DLL (in MS VC2013) and wrote the functions. But I have a problem exporting them correctly.</p>\n\n<p>In the original DLL they are _stdcall but their name have no underscore at first.</p>\n\n<p>If T specify the name in the .def file like this \"testfunc@4=testfunc\" everything behind the @ is removed.</p>\n\n<p>How can I specify in VS2013 that I want an DLL-export like \"testfunc@4\"?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 2, "creation_date": 1421872088, "post_id": 28076194, "comment_id": 44531459, "body": "You need to read about multithreading."}, {"owner": {"reputation": 22608, "user_id": 618598, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/37b955736b6911e9bbfd417c6aede9ca?s=128&d=identicon&r=PG", "display_name": "Bernd Elkemann", "link": "https://stackoverflow.com/users/618598/bernd-elkemann"}, "edited": false, "score": 0, "creation_date": 1421880794, "post_id": 28076194, "comment_id": 44535542, "body": "@Newbie_Programmer I have added complete code."}], "answers": [{"tags": [], "owner": {"reputation": 22608, "user_id": 618598, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/37b955736b6911e9bbfd417c6aede9ca?s=128&d=identicon&r=PG", "display_name": "Bernd Elkemann", "link": "https://stackoverflow.com/users/618598/bernd-elkemann"}, "is_accepted": true, "score": 2, "last_activity_date": 1426147034, "last_edit_date": 1426147034, "creation_date": 1421872552, "answer_id": 28076341, "question_id": 28076194, "link": "https://stackoverflow.com/questions/28076194/timer-in-c-language-on-windows/28076341#28076341", "title": "Timer in C language on Windows", "body": "<p>The correct way to do this is to <strong>not</strong> use threads or 0.1-second sleeps.</p>\n\n<p>You should get a little Windows application from some tutorial (you recognize a typical example Windows application by a <code>WinMain()</code> instead of a <code>main()</code>).</p>\n\n<p>You can then add these functions:</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms644906%28v=vs.85%29.aspx\" rel=\"nofollow\">SetTimer</a> and <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms644903%28v=vs.85%29.aspx\" rel=\"nofollow\">KillTimer</a></p>\n\n<p>Here's a full working example: It creates a window with a text-input, gives it focus and sets a timer to 1 second. When the timer expires it gets the text from the text-input and shows it in a dialog-box.</p>\n\n<pre><code>#include &lt;windows.h&gt;\n\nHWND hwndMain = 0;\nHWND hwndEdit = 0;\n#define idTimer 123\nVOID CALLBACK TimerProc(HWND w, UINT msg, UINT_PTR e, DWORD t) {\n  Beep(2000, 10);\n  KillTimer(hwndMain, idTimer);\n  char tmp[100];\n  GetWindowText(hwndEdit, tmp, 100);\n  MessageBox(0, tmp, \"you entered:\", 0);\n}\nLRESULT CALLBACK WndProc(HWND hwnd, UINT msg, WPARAM w, LPARAM l)\n{\n  #define id_note 50\n\n    switch(msg) {\n      case WM_CREATE:\n        hwndMain = hwnd;\n        hwndEdit = CreateWindowEx(WS_EX_CLIENTEDGE,\"EDIT\",\n        \"\",WS_CHILD|WS_VISIBLE,\n        0,0,80,20,hwnd,(HMENU)id_note,GetModuleHandle(0), 0);\n        SetFocus(hwndEdit);\n        SetTimer(hwndMain, idTimer, 1000, TimerProc);\n      break;\n      case WM_CLOSE:\n          DestroyWindow(hwnd);\n      break;\n      case WM_DESTROY:\n          PostQuitMessage(0);\n      break;\n      default:\n        return DefWindowProc(hwnd, msg, w, l);\n    }\n    return 0;\n}\n\nconst char g_szClassName[] = \"myWindowClass\";\nint WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance,\n    LPSTR lpCmdLine, int nCmdShow)\n{\n    WNDCLASSEX wc;\n    HWND hwnd;\n    MSG Msg;\n    memset(&amp;wc, 0, sizeof(WNDCLASSEX));\n    wc.cbSize        = sizeof(WNDCLASSEX);\n    wc.lpfnWndProc   = WndProc;\n    wc.hInstance     = hInstance;\n    wc.hbrBackground = (HBRUSH)(COLOR_WINDOW+1);\n    wc.lpszClassName = g_szClassName;\n    wc.hIconSm       = LoadIcon(0, IDI_APPLICATION);\n\n    RegisterClassEx(&amp;wc);\n\n    hwnd = CreateWindowEx(\n        WS_EX_CLIENTEDGE,\n        g_szClassName,\n        \"\",\n        WS_OVERLAPPEDWINDOW,\n        CW_USEDEFAULT, CW_USEDEFAULT, 240, 120,\n        0, 0, hInstance, 0);\n\n    ShowWindow(hwnd, nCmdShow);\n    UpdateWindow(hwnd);\n\n    while(GetMessage(&amp;Msg, 0, 0, 0) &gt; 0) {\n        TranslateMessage(&amp;Msg);\n        DispatchMessage(&amp;Msg);\n    }\n    return Msg.wParam;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4131842, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F5eB7.jpg?s=128&g=1", "display_name": "Newbie_Programmer", "link": "https://stackoverflow.com/users/4131842/newbie-programmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 1, "accepted_answer_id": 28076341, "answer_count": 1, "score": 0, "last_activity_date": 1426147034, "creation_date": 1421871978, "question_id": 28076194, "link": "https://stackoverflow.com/questions/28076194/timer-in-c-language-on-windows", "title": "Timer in C language on Windows", "body": "<p>I am making a Quiz program. A question is displayed and a timer starts. The user has to answer the question in 30 seconds. If he doesn't answer the question during the 30 seconds, the timer ends and the next question is displayed. The problem is that all the TIMER programs i have come across stop the program i.e. user won't be able to input his answer during that timer</p>\n"}, {"tags": ["c", "strcpy"], "comments": [{"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 1, "creation_date": 1421870801, "post_id": 28075877, "comment_id": 44530855, "body": "<code>getchar</code> returns an <code>int</code> (not a <code>char</code>), change to <code>int c;</code>, and <code>strcpy</code> wants a <code>char *</code> (not a <code>char</code>) as first argument"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1421870808, "post_id": 28075877, "comment_id": 44530859, "body": "The target of your <code>strcpy</code> as-written is a <code>char</code>. It needs to be a <code>char *</code> That would be wrong from the get-go."}, {"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1421870827, "post_id": 28075877, "comment_id": 44530869, "body": "<code>strcpy</code> (not strcopy) copies a string to a string, not a string to a char."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1421872436, "post_id": 28075877, "comment_id": 44531610, "body": "C is declared a <code>char</code>, but then you assign it from <code>getchar()</code> which returns an int, and then you pass it to <code>strcpy()</code> which expects a char*. Make up your mind--a variable can only have one type."}], "answers": [{"tags": [], "owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "is_accepted": true, "score": 0, "last_activity_date": 1421870819, "creation_date": 1421870819, "answer_id": 28075921, "question_id": 28075877, "link": "https://stackoverflow.com/questions/28075877/i-cant-figure-out-strcpy/28075921#28075921", "title": "I can&#39;t figure out strcpy", "body": "<p><code>c</code> is a single character, while <code>a</code> is a string (which explains both why <code>c</code> can only hold a single character, and why the compiler is complaining).  If you want <code>c</code> to hold a whole string, declare it as such (like you did for <code>sentence</code>).</p>\n"}, {"tags": [], "owner": {"reputation": 2097, "user_id": 2769487, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lzm16.png?s=128&g=1", "display_name": "Squirrel", "link": "https://stackoverflow.com/users/2769487/squirrel"}, "is_accepted": false, "score": 0, "last_activity_date": 1421870937, "creation_date": 1421870937, "answer_id": 28075951, "question_id": 28075877, "link": "https://stackoverflow.com/questions/28075877/i-cant-figure-out-strcpy/28075951#28075951", "title": "I can&#39;t figure out strcpy", "body": "<p>You've declared the variable <code>c</code> to have type <code>char</code>:</p>\n\n<pre><code>char c;\n</code></pre>\n\n<p>Then you're trying to use <code>strcpy(c,a)</code> -- but what type does <code>strcpy</code> expect for its first argument?  Here's the signature from the manpage:</p>\n\n<pre><code>char *strcpy(char *dest, const char *src);\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 3983476, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9df27697fe39ac9c0fc24558c2d9a380?s=128&d=identicon&r=PG", "display_name": "FrancisDoy", "link": "https://stackoverflow.com/users/3983476/francisdoy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 234, "favorite_count": 0, "accepted_answer_id": 28075921, "answer_count": 2, "score": 0, "last_activity_date": 1421870937, "creation_date": 1421870660, "last_edit_date": 1421870892, "question_id": 28075877, "link": "https://stackoverflow.com/questions/28075877/i-cant-figure-out-strcpy", "title": "I can&#39;t figure out strcpy", "body": "<p>This is an unfinished code for converting alphanumeric characters into Morse code. So far only the character \"A\" is in set. I can't seem to copy the Morse code string of \"a\" into the variable \"c\". The compiler tells me that passing argument 1 of <code>strcpy</code> makes pointer from integer without a cast.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;string.h&gt;\n\nint main(){\n    char c; /* variable to hold character input by user */\n    char sentence[ 80 ]; /* create char array */\n    int i = 0; /* initialize counter i */\n    const char *a = \".- \";\n\n    /* prompt user to enter line of text */\n    puts( \"Enter a line of text:\" );\n\n    /* use getchar to read each character */\n    while ( ( c = getchar() ) != '\\n') {\n        c = toupper(c);\n        switch (c){\n            case 'A':\n                strcpy(c, a);\n                break\n            }\n        sentence[ i++ ] = c;\n    } /* end while */\n\n    sentence[ i ] = '\\0'; /* terminate string */\n\n    /* use puts to display sentence */\n    puts( \"\\nThe line entered was:\" );\n    puts( sentence );\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "string", "printf"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 3, "creation_date": 1421870164, "post_id": 28075726, "comment_id": 44530518, "body": "What are you trying to achieve? It&#39;s not clear... You want the values stored somewhere or what? What will you do with the substrings?"}, {"owner": {"reputation": 362, "user_id": 4381342, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/169a101b329b4e692ccd07ed16e4589f?s=128&d=identicon&r=PG&f=1", "display_name": "question", "link": "https://stackoverflow.com/users/4381342/question"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421870302, "post_id": 28075726, "comment_id": 44530591, "body": "updated my question @iharob"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1421870417, "post_id": 28075726, "comment_id": 44530667, "body": "You need two nested loops: One for the start and one for the substring length. And you need a way to print (or hatever you want to do) a substring based on start and length."}, {"owner": {"reputation": 362, "user_id": 4381342, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/169a101b329b4e692ccd07ed16e4589f?s=128&d=identicon&r=PG&f=1", "display_name": "question", "link": "https://stackoverflow.com/users/4381342/question"}, "edited": false, "score": 0, "creation_date": 1421870437, "post_id": 28075726, "comment_id": 44530682, "body": "I dont want the stored values . i just want to split up the input string as shown in the question."}, {"owner": {"reputation": 362, "user_id": 4381342, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/169a101b329b4e692ccd07ed16e4589f?s=128&d=identicon&r=PG&f=1", "display_name": "question", "link": "https://stackoverflow.com/users/4381342/question"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421870535, "post_id": 28075726, "comment_id": 44530724, "body": "made the edit. sorry for the typo @iharob"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421870538, "post_id": 28075726, "comment_id": 44530725, "body": "Split it and output it immediately?"}, {"owner": {"reputation": 20114, "user_id": 691711, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/bf26891a2ec4eca6dd1962a6804f5a40?s=128&d=identicon&r=PG", "display_name": "zero298", "link": "https://stackoverflow.com/users/691711/zero298"}, "edited": false, "score": 0, "creation_date": 1421870615, "post_id": 28075726, "comment_id": 44530756, "body": "Are you trying to find the correct usage for <code>printf</code> or are you trying to figure out what substring pattern will generate your provided output?  Because the latter smells a lot like homework."}, {"owner": {"reputation": 362, "user_id": 4381342, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/169a101b329b4e692ccd07ed16e4589f?s=128&d=identicon&r=PG&f=1", "display_name": "question", "link": "https://stackoverflow.com/users/4381342/question"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1421870627, "post_id": 28075726, "comment_id": 44530765, "body": "I get the point but not able to implement it @MOehm"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1421873618, "post_id": 28075726, "comment_id": 44532197, "body": "Do you consider <code>&quot;&quot;</code> a sub-string of <code>&quot;com&quot;</code>?"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1573200092, "post_id": 28075726, "comment_id": 103811570, "body": "just two loops: <code>void substrings(const char *word) { for (; *word; word++) { for (int len = 1; len &lt;= strlen(word); len++) printf(&quot;%.*s&quot;, len, word); }}</code>"}], "answers": [{"tags": [], "owner": {"reputation": 35069, "user_id": 1324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883238a436c061eaf848af87b8fda561?s=128&d=identicon&r=PG", "display_name": "Paul Roub", "link": "https://stackoverflow.com/users/1324/paul-roub"}, "is_accepted": false, "score": 0, "last_activity_date": 1421870923, "last_edit_date": 1421870923, "creation_date": 1421870588, "answer_id": 28075857, "question_id": 28075726, "link": "https://stackoverflow.com/questions/28075726/find-all-substrings-of-a-string/28075857#28075857", "title": "Find all substrings of a string", "body": "<p>You're missing a comma in your code:</p>\n\n<pre><code>for(int i=0 ; i&lt;len ;i++)\n{\n    printf(\"%s\", &amp;string[strlen(string)-i])\n}\n</code></pre>\n\n<p>But that will print \"\", \"m\", \"om\" - not what you want.</p>\n\n<p>Something more like:</p>\n\n<pre><code>// start at each point in the string\nfor ( const char *start = string; *start; ++start )\n{\n  // for each starting point, go from the whole remainder down\n  // to just one character\n  for ( const char *end = string + strlen(string); end &gt; start; --end )\n  {\n    for ( const char *s = start; s &lt; end; ++s )\n      putchar(*s);\n\n    putchar('\\n');   \n  }\n}\n</code></pre>\n\n<p>Example: <a href=\"https://ideone.com/XXoYv6\" rel=\"nofollow\">https://ideone.com/XXoYv6</a></p>\n"}, {"tags": [], "owner": {"reputation": 2801, "user_id": 904194, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/KGqRa.png?s=128&g=1", "display_name": "mrk", "link": "https://stackoverflow.com/users/904194/mrk"}, "is_accepted": true, "score": 4, "last_activity_date": 1421870668, "creation_date": 1421870668, "answer_id": 28075880, "question_id": 28075726, "link": "https://stackoverflow.com/questions/28075726/find-all-substrings-of-a-string/28075880#28075880", "title": "Find all substrings of a string", "body": "<p>A substring is defined by its left and right ends so there are <code>O(n*n)</code> substrings in a string of length <code>n</code>.</p>\n\n<pre><code>int n = strlen(string);\nfor(int i = 0; i &lt; n; i++)\n{   for(int j = i; j &lt; n; j++)\n    {   /* print substring from i to j */\n        for(int k = i; k &lt;= j; k++)\n        {   printf(\"%c\", string[k]);\n        }\n        printf(\"\\n\");\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user3133925"}, "is_accepted": false, "score": 0, "last_activity_date": 1549711507, "creation_date": 1549711507, "answer_id": 54605745, "question_id": 28075726, "link": "https://stackoverflow.com/questions/28075726/find-all-substrings-of-a-string/54605745#54605745", "title": "Find all substrings of a string", "body": "<ul>\n<li>Substring means any contiguous group of characters. </li>\n<li>For the n string\nit will generate (n*(n-1) /2) substrings. </li>\n<li>For example of String\nsource = \"STACK\"\nLength of the character is 5, so it total substring would be (5(5-1) /2) = 10</li>\n</ul>\n\n<p>We have to iterate through the first element of string and print all the substring and than onwards one by one we increment the index of i and printing the substring from range (j to k)</p>\n\n<pre><code>public void generateSubString(String source){\n        char[] arr = source.toCharArray();\n        for(int i = 0; i&lt;arr.length; i++){\n            for(int j = i ; j &lt; arr.length; j++){\n                for(int k = i; k&lt;=j; k++){\n                    System.out.print(arr[k]);\n                }\n                System.out.println();\n            }\n</code></pre>\n\n<p>OUTPUT:</p>\n\n<p>S\nST\nSTA\nSTAC\nSTACK\nT\nTA\nTAC\nTACK\nA\nAC\nACK\nC\nCK\nK </p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10086953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/289363b2f75770abb81cd293f063cf8e?s=128&d=identicon&r=PG&f=1", "display_name": "kedar shivshette", "link": "https://stackoverflow.com/users/10086953/kedar-shivshette"}, "is_accepted": false, "score": -1, "last_activity_date": 1573198587, "creation_date": 1573198587, "answer_id": 58762315, "question_id": 28075726, "link": "https://stackoverflow.com/questions/28075726/find-all-substrings-of-a-string/58762315#58762315", "title": "Find all substrings of a string", "body": "<p>Below is the code to find all substrings of a string in javascript without for loop, which will increase the speed of code.</p>\n\n<pre><code>const devideSubStr = (str) =&gt; {\n var totalLoop = str.length * ((str.length + 1)/2);\n // looping count\n let i = 0;\n var totalChar = 1;//character to get\n var charFrom = 0;// from which index\n var strLength = str.length;//length of digit\n while( i &lt; totalLoop){     \n      console.log(str.substr(charFrom, totalChar))\n      charFrom ++;\n      i ++;\n      if(charFrom == strLength){\n          charFrom = 0;\n          strLength = strLength - 1;\n          totalChar ++;\n      }  \n }}\n</code></pre>\n"}], "owner": {"reputation": 362, "user_id": 4381342, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/169a101b329b4e692ccd07ed16e4589f?s=128&d=identicon&r=PG&f=1", "display_name": "question", "link": "https://stackoverflow.com/users/4381342/question"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3245, "favorite_count": 0, "accepted_answer_id": 28075880, "answer_count": 4, "score": 0, "last_activity_date": 1573198587, "creation_date": 1421870099, "last_edit_date": 1421870953, "question_id": 28075726, "link": "https://stackoverflow.com/questions/28075726/find-all-substrings-of-a-string", "title": "Find all substrings of a string", "body": "<p>I have a string where I need to do substring operation.  I'm trying to achieve something like this for example if the input string is <code>com</code> then the output must be something like this - </p>\n\n<p><code>c</code> \n<code>co</code> \n<code>com</code> \n<code>o</code>\n <code>om</code>\n <code>m</code>.. I have tried this </p>\n\n<pre><code>for(int i=0 ; i&lt;len ;i++)\n{\n    printf(\"%s\",&amp;string[strlen(string)-i]));\n}\n</code></pre>\n"}, {"tags": ["c", "windows", "winapi", "portable-executable", "internals"], "comments": [{"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1421891724, "post_id": 28075521, "comment_id": 44538899, "body": "What do you mean by &quot;some loaders&quot; ?  Different versions of Windows?  Third-party loaders?  The loader for boot drivers vs. the loader for applications?"}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1421968489, "post_id": 28075521, "comment_id": 44576382, "body": "Then it&#39;s possible that they&#39;re just doing it wrong.  I think the specification requires you to allocate <code>VirtualSize</code> bytes for each section."}, {"owner": {"reputation": 281, "user_id": 3116596, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/AXIRo.jpg?s=128&g=1", "display_name": "CodeNinja", "link": "https://stackoverflow.com/users/3116596/codeninja"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1422030073, "post_id": 28075521, "comment_id": 44602344, "body": "But what should you do when SizeOfRawData is bigger than VirtualSize (which is not unusual)? You are at risk to get an exception when copying the section contents into the allocated memory.The solution I found is: 1) do <code>max</code> between VirtualSize and SizeOfRawData, aka <code>dwAllocationSize</code>. 2) Allocate dwAllocationSize bytes and set memory to zero. 3) Copy SizeOfRawData bytes from PointerToRawData into the allocated area. These rules seem to work fine for me (at least until I&#39;ll find that I did something wrong. For now, all the loaders I&#39;ve explored had some bugs and inconsistencies in that area)"}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1422049191, "post_id": 28075521, "comment_id": 44612535, "body": "That&#39;s very odd; have you been able to identify the circumstances under which SizeOfRawData is bigger than VirtualSize?  (For example, do the Microsoft build tools ever do this, or is it just that some third-party build tools are broken?)  FWIW I think your solution is the only sensible one, though perhaps you should see what the Windows loader does.  (The other option being to truncate the data, I suppose.)"}, {"owner": {"reputation": 281, "user_id": 3116596, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/AXIRo.jpg?s=128&g=1", "display_name": "CodeNinja", "link": "https://stackoverflow.com/users/3116596/codeninja"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1422050516, "post_id": 28075521, "comment_id": 44613124, "body": "Just compiled a Test DLL with VS, here is a screenshot taken from CFF explorer. At the left, VirtualSize, at the right, SizeOfRawData. <a href=\"http://imgur.com/dwRoUbm\" rel=\"nofollow noreferrer\">imgur.com/dwRoUbm</a>. Just implemented a quick basic loader, my solution works. still, I don&#39;t know if it is the right solution and I&#39;m too tired to reverse the loader so I guess I should deal with the uncertainty."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1422053129, "post_id": 28075521, "comment_id": 44614130, "body": "Oh, I think I see what&#39;s happening.  The extra bytes are just padding, for alignment within the PE file.  In principle, you should probably truncate them.  On the other hand, if you were using file mappings (as the Windows loader presumably does) then I think the page alignment means that the padding would get loaded into memory, and some DLLs generated by third-party tools might depend on that undocumented behaviour.  So I think the algorithm you&#39;re using is probably the safest choice."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1422053721, "post_id": 28075521, "comment_id": 44614338, "body": "Similar reasoning might explain why some loaders take SectionAlignment into consideration when allocating address space.  The section after the one you&#39;re loading must be aligned to a multiple of SectionAlignment, and one way to ensure this would be to round the allocation up accordingly.  (It should be rounded up, though; I&#39;m sure that it would be wrong to allocate less than VirtualSize.)"}, {"owner": {"reputation": 281, "user_id": 3116596, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/AXIRo.jpg?s=128&g=1", "display_name": "CodeNinja", "link": "https://stackoverflow.com/users/3116596/codeninja"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1422054259, "post_id": 28075521, "comment_id": 44614544, "body": "Exactly what I was thinking.The compiler sets <code>VirtualSize</code> to contain the raw data + the uninitialized data of the section when loaded into the memory.However, the compiler aligns the <code>SizeOfRawData</code> using <code>SectionAlignment</code> and thats why it is sometimes bigger than the <code>VirtualSize</code>. However, to stay on the safe side (means allocation enough space for raw data and uninitialized data) one should use my solution because it can be <i>crucial</i> when taking into consideration the VirtualProtect that comes right after loading the section,would you take the risk of protecting only part of the section?"}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1422054566, "post_id": 28075521, "comment_id": 44614645, "body": "Sounds reasonable.  One nitpick: <code>SizeOfRawData</code> should be aligned to <code>FileAlignment</code> rather than <code>SectionAlignment</code>."}], "answers": [{"comments": [{"owner": {"reputation": 281, "user_id": 3116596, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/AXIRo.jpg?s=128&g=1", "display_name": "CodeNinja", "link": "https://stackoverflow.com/users/3116596/codeninja"}, "edited": false, "score": 0, "creation_date": 1422031177, "post_id": 28075838, "comment_id": 44603097, "body": "You are correct. this is exactly how the windows loader does that, and it is easy because you have a file on disk. When loading a DLL from buffer it can&#39;t be done that way and therefore the sections should get copied from the buffer to the allocated memory and get committed right after. Look at my last comment the question, maybe you could assist me resolving this issue."}], "tags": [], "owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "is_accepted": false, "score": 5, "last_activity_date": 1421870489, "creation_date": 1421870489, "answer_id": 28075838, "question_id": 28075521, "link": "https://stackoverflow.com/questions/28075521/pe-file-sections-sizeofrawdata-or-virtualsize/28075838#28075838", "title": "PE File sections - SizeOfRawData or VirtualSize", "body": "<p>As far as I understand it, the Windows loader does not generally <code>copy the PE sections to the allocated PE memory</code>. Rather, it creates a file mapping for each relevant section of the PE, each with its virtual size, and then lets the paging system bring the file content into committed memory as needed.</p>\n\n<p>Section alignment normally refers to the minimum section resolution size, typically 4096 bytes (the size of a traditional memory page).</p>\n\n<p>Size of raw data is the size of the data actually present in the PE image on disk for the section.</p>\n"}], "owner": {"reputation": 281, "user_id": 3116596, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/AXIRo.jpg?s=128&g=1", "display_name": "CodeNinja", "link": "https://stackoverflow.com/users/3116596/codeninja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1365, "favorite_count": 2, "answer_count": 1, "score": 3, "last_activity_date": 1421870489, "creation_date": 1421869349, "question_id": 28075521, "link": "https://stackoverflow.com/questions/28075521/pe-file-sections-sizeofrawdata-or-virtualsize", "title": "PE File sections - SizeOfRawData or VirtualSize", "body": "<p>Lately I've been messing around with PE files at my workplace and became interested in the work of the Windows' loader behind the scenes.\nI know that when loading a PE file, the loader needs to copy the PE sections to the allocated PE memory, some loaders commit <code>SizeOfRawData</code> bytes, some commit <code>VirtualSize</code> bytes for the section and sometimes <code>SectionAlignment</code> (When SizeOfRawData equals 0, for uninitialized data).\nMy question is how can I know that <code>SectionAlignment</code> bytes will be enough for all the section's uninitialized data? maybe I have an uninitialized buffer that is much bigger than <code>SectionAlignment</code>, so how can I be sure that it won't override other sections? and I can I predict the size needed to be allocated? Can I commit <code>VirtualSize</code> bytes instead of <code>SectionAlignment</code> bytes to be safe?</p>\n"}, {"tags": ["c", "integer-overflow"], "comments": [{"owner": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 13, "creation_date": 1421868826, "post_id": 28075323, "comment_id": 44529772, "body": "<code>Standard says that argv[argc] must be a null pointer but this will be false if argc overflow</code>  -- I read this as &quot;Don&#39;t let argc overflow.&quot; (&quot;Doctor, it hurts when I do this&quot;)"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 4, "creation_date": 1421868921, "post_id": 28075323, "comment_id": 44529825, "body": "On POSIX and on most Linux systems, the initial stack of <code>main</code> -as installed by <code>execve</code>-, including its arguments (i.e. <code>argv</code>), is much more limited (typically, a few megabytes). So <code>argc</code> is less than a few milions and I never heard of an OS where <code>argc</code> could be near <code>INT_MAX</code>"}, {"owner": {"reputation": 796419, "user_id": 34397, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7deca8ec973c3c0875e9a36e1e3e2c44?s=128&d=identicon&r=PG", "display_name": "SLaks", "link": "https://stackoverflow.com/users/34397/slaks"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1421869079, "post_id": 28075323, "comment_id": 44529927, "body": "@BasileStarynkevitch: If <code>int</code> is 16 bits, it could overflow."}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 6, "creation_date": 1421869237, "post_id": 28075323, "comment_id": 44529994, "body": "arguably the implementation will in such case have system specific limit that makes it impossible to pass 2^15 arguments to a program"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 14, "creation_date": 1421871454, "post_id": 28075323, "comment_id": 44531168, "body": "Well, I&#39;m certainly not typing them in:)"}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 1, "creation_date": 1421918705, "post_id": 28075323, "comment_id": 44547920, "body": "How exactly would you pass a number of arguments to a process that would, effectively, exceed the process memory space all by itself, not even counting the executable <i>taking</i> those arguments?"}, {"owner": {"reputation": 256589, "user_id": 13005, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4690b9a0df8a4c1e35c088b077942e6?s=128&d=identicon&r=PG", "display_name": "Steve Jessop", "link": "https://stackoverflow.com/users/13005/steve-jessop"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 1, "creation_date": 1421919857, "post_id": 28075323, "comment_id": 44548623, "body": "@DevSolar: the quotation is speaking of unusual corner cases, I wouldn&#39;t be too surprised if there&#39;s an implementation out there where <code>int</code> is smaller than the process memory space. Even if there isn&#39;t one, it&#39;s the kind of hypothetical that the standards folks fret about while considering the rationales for their decisions. After all, they decided not to ban it."}, {"owner": {"reputation": 256589, "user_id": 13005, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4690b9a0df8a4c1e35c088b077942e6?s=128&d=identicon&r=PG", "display_name": "Steve Jessop", "link": "https://stackoverflow.com/users/13005/steve-jessop"}, "edited": false, "score": 3, "creation_date": 1421923429, "post_id": 28075323, "comment_id": 44550710, "body": "Hang on a second, what do I mean &quot;I wouldn&#39;t be surprised&quot;. Any LP64 or LLP64 architecture fits the bill, so Windows or Linux. You&#39;d need a lot of RAM, though. I suppose that if starting from scratch, <code>argc</code> should have type <code>size_t</code>."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "reply_to_user": {"reputation": 256589, "user_id": 13005, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4690b9a0df8a4c1e35c088b077942e6?s=128&d=identicon&r=PG", "display_name": "Steve Jessop", "link": "https://stackoverflow.com/users/13005/steve-jessop"}, "edited": false, "score": 0, "creation_date": 1421924677, "post_id": 28075323, "comment_id": 44551430, "body": "@SteveJessop: That&#39;s what you get for playing it through only for the <i>old</i> and <i>small</i> architectures. You&#39;re right, of course."}], "answers": [{"comments": [{"owner": {"reputation": 1105, "user_id": 3147740, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jtxHB.png?s=128&g=1", "display_name": "PTwr", "link": "https://stackoverflow.com/users/3147740/ptwr"}, "edited": false, "score": 1, "creation_date": 1421912975, "post_id": 28075426, "comment_id": 44545128, "body": "That list have no data for Windows but there is <a href=\"http://stackoverflow.com/questions/3205027/maximum-length-of-command-line-string\">question on SO</a> with some numbers."}], "tags": [], "owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": false, "score": 17, "last_activity_date": 1421869080, "creation_date": 1421869080, "answer_id": 28075426, "question_id": 28075323, "link": "https://stackoverflow.com/questions/28075323/can-argc-overflow/28075426#28075426", "title": "Can argc overflow?", "body": "<p>In practice, no, you can't. Most systems place a relatively low limit on the total combined size of <code>argv</code> and <code>envp</code>. Limits in the tens to low hundreds of KB aren't uncommon; see <a href=\"http://www.in-ulm.de/~mascheck/various/argmax/\" rel=\"noreferrer\">http://www.in-ulm.de/~mascheck/various/argmax/</a> for a reasonably comprehensive listing of the limits on various OSes.</p>\n"}, {"comments": [{"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 0, "creation_date": 1421930416, "post_id": 28075442, "comment_id": 44554655, "body": "But imagine you are on a system where the ARG_MAX thing is pretty big (for what reasons ever) and it could happen. What kind of failure would it be? As it is still respecting the standard, it can be called C compatible, but it also could occur a undefined behaving, where the programmer has no option to prevent. What kind of error is it?"}, {"owner": {"reputation": 35932, "user_id": 76722, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4baed26d9b00bbc7c0c706515aeb596e?s=128&d=identicon&r=PG", "display_name": "Sebastian Mach", "link": "https://stackoverflow.com/users/76722/sebastian-mach"}, "edited": false, "score": 0, "creation_date": 1421936162, "post_id": 28075442, "comment_id": 44558360, "body": "I think the Standard has undefined behaviour, there, as signed overflow is not defined."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 1, "creation_date": 1421944698, "post_id": 28075442, "comment_id": 44564174, "body": "@zaibis The requirement for <code>argv[argc]</code> to be a null pointer implies a requirement to set <code>ARG_MAX</code> small enough that <code>argc</code> <i>cannot</i> overflow."}], "tags": [], "owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "is_accepted": true, "score": 78, "last_activity_date": 1422453194, "last_edit_date": 1422453194, "creation_date": 1421869101, "answer_id": 28075442, "question_id": 28075323, "link": "https://stackoverflow.com/questions/28075323/can-argc-overflow/28075442#28075442", "title": "Can argc overflow?", "body": "<h2>According to the standard</h2>\n\n<p>So, from your quote:</p>\n\n<blockquote>\n  <p><code>argv[argc]</code> is required to be a null pointer</p>\n</blockquote>\n\n<p>Therefore, <code>argc</code> cannot overflow, because then the above statement would not be true.</p>\n\n<h2>In practice</h2>\n\n<p>In practice, the total size of the arguments passed to a program is limited.</p>\n\n<p>On my Linux/x64 system:</p>\n\n<pre>\n$ getconf ARG_MAX\n2097152\n</pre>\n\n<p>Therefore, the total argument size is about 2 megabytes, and <code>argc</code> cannot overflow.  I believe this limit measures a combination of the total data in <code>argv</code> and the environment.  If you exceed this limit when you try to run a command, <code>exec()</code> will fail with <code>E2BIG</code>.  From <a href=\"http://linux.die.net/man/2/execve\"><code>man 2 execve</code></a>:</p>\n\n<pre>\nE2BIG  The total number of bytes in the environment (envp) and argument\n       list (argv) is too large.\n</pre>\n\n<p>I believe the ~2 megabyte limit on my system is relatively generous compared to other systems.  My OS X system reports a limit of ~260KB.</p>\n\n<h2>But what if <code>ARG_MAX</code> were really big?</h2>\n\n<p>Okay, let's suppose you're on an old/weird system, so <code>int</code> is 16 bits, and ARG_MAX is well over 2<sup>15</sup>, which is otherwise quite reasonable.  Now, suppose you invoke <code>execve()</code> with more than 2<sup>15</sup> arguments.  The implementation has two options.</p>\n\n<ol>\n<li><p>It can allow <code>argc</code> to overflow... basically, throwing away your data, ensuring that the program you're running executes in some unexpected and probably erroneous manner, and violating the C standard.  Worst of all, the error is silent, so you might never know.</p></li>\n<li><p>Or, it can simply return <code>EOVERFLOW</code> from <code>execve()</code>, informing you that it simply can't run an image with that many parameters.  Now, the POSIX / SUS standards don't mention anything about this error result... but, I suspect this is simply because the standard writers never expected <code>ARG_MAX</code> to be larger than <code>INT_MAX</code>.</p></li>\n</ol>\n\n<p>Option #2 is the <em>only</em> reasonable option.  If your system somehow chooses option #1, then it is <em>broken</em> and you should file a bug report.</p>\n\n<p>Alternatively, you could be trying to run an old program compiled for a 16-bit system, but you're running it through some kind of emulator or compatibility layer.  I'd expect that the emulator or compatibility layer would give an error message if you tried to pass more than 2<sup>15</sup> parameters to a program.</p>\n"}, {"comments": [{"owner": {"reputation": 532, "user_id": 890698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0163c6cff69f4f162d599d16d5e6489a?s=128&d=identicon&r=PG", "display_name": "pflaquerre", "link": "https://stackoverflow.com/users/890698/pflaquerre"}, "edited": false, "score": 2, "creation_date": 1422472400, "post_id": 28092047, "comment_id": 44767146, "body": "Why use a zip file to generate arguments when you can just $(seq 1 100000)?"}, {"owner": {"reputation": 246, "user_id": 3922692, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FYozZ.jpg?s=128&g=1", "display_name": "ehwas", "link": "https://stackoverflow.com/users/3922692/ehwas"}, "reply_to_user": {"reputation": 532, "user_id": 890698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0163c6cff69f4f162d599d16d5e6489a?s=128&d=identicon&r=PG", "display_name": "pflaquerre", "link": "https://stackoverflow.com/users/890698/pflaquerre"}, "edited": false, "score": 0, "creation_date": 1422480392, "post_id": 28092047, "comment_id": 44771495, "body": "Didn&#39;t think of it. Thanks!"}], "tags": [], "owner": {"reputation": 246, "user_id": 3922692, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FYozZ.jpg?s=128&g=1", "display_name": "ehwas", "link": "https://stackoverflow.com/users/3922692/ehwas"}, "is_accepted": false, "score": 10, "last_activity_date": 1421939238, "creation_date": 1421939238, "answer_id": 28092047, "question_id": 28075323, "link": "https://stackoverflow.com/questions/28075323/can-argc-overflow/28092047#28092047", "title": "Can argc overflow?", "body": "<p>I tried this:</p>\n\n<p>test.c :</p>\n\n<pre><code> \u26a1\u26a1\u26a1  more test.c \n#include &lt;stdio.h&gt;\nint main(int argc, char **argv)\n{\n    printf(\"argc = %d\\n\", argc);\n    printf(\"Size of argc = %d\\n\", sizeof(argc));\n    return 0;\n}\n</code></pre>\n\n<p>Then used a big zipfile</p>\n\n<pre><code> \u26a1\u26a1\u26a1  ls -h bigfile \n-rw-r--r-- 1 ehwas ehwas 355M Jan 22 16:54 bigfile\n</code></pre>\n\n<p>Then read the file as parameters to the test program:</p>\n\n<pre><code>\u26a1\u26a1\u26a1  ./test $(more bigfile)\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>5 minutes nothing happend, then everything froze\n</code></pre>\n\n<p>Then I tried a smaller file: </p>\n\n<pre><code> \u26a1\u26a1\u26a1  ls -h notsobigfile \n-rw-r--r-- 1 ehwas ehwas 6.7M Jan 22 17:04 notsobigfile\n</code></pre>\n\n<p>And: </p>\n\n<pre><code> \u26a1\u26a1\u26a1  ./test $(more notsobigfile)\nbash: ./test: Argument list too long\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "is_accepted": false, "score": 2, "last_activity_date": 1422454366, "creation_date": 1422454366, "answer_id": 28194388, "question_id": 28075323, "link": "https://stackoverflow.com/questions/28075323/can-argc-overflow/28194388#28194388", "title": "Can argc overflow?", "body": "<p>As indicated by the standard, argv[argc] must be a valid value.</p>\n\n<p>So if the run-time environment is in a situation such that it cannot guarantee that, it should not start the program.</p>\n"}], "owner": {"reputation": 2317, "user_id": 4466589, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uPR5Y.jpg?s=128&g=1", "display_name": "Bora M. Alper", "link": "https://stackoverflow.com/users/4466589/bora-m-alper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5016, "favorite_count": 11, "protected_date": 1423588835, "accepted_answer_id": 28075442, "answer_count": 4, "score": 75, "last_activity_date": 1422454366, "creation_date": 1421868726, "last_edit_date": 1592644375, "question_id": 28075323, "link": "https://stackoverflow.com/questions/28075323/can-argc-overflow", "title": "Can argc overflow?", "body": "<p>I was wandering in SO and saw <a href=\"https://stackoverflow.com/questions/18547114/why-do-we-need-argc-while-there-is-always-a-null-at-the-end-of-argv\">this question</a>. Then I started wondering if I can overflow argc.</p>\n<p>Standard says that <code>argv[argc]</code> must be a null pointer but this will be false if argc overflow.</p>\n<p>(I <a href=\"https://gist.github.com/boramalper/b0c6116ada4dd8f7e80a\" rel=\"noreferrer\">wrote</a> a small C program and a python script to test it but got a <code>MemoryError</code>.)</p>\n<p>Thanks!</p>\n<hr />\n<blockquote>\n<h3><a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/C99RationaleV5.10.pdf\" rel=\"noreferrer\">Rationale for International Standard \u2014 Programming Languages \u2014 C</a> \u00a75.1.2.2.1 <em>Program startup</em></h3>\n<p>The specification of <code>argc</code> and <code>argv</code> as arguments to <code>main</code> recognizes extensive prior practice. <code>argv[argc]</code> is required to be a null pointer to provide a redundant check for the end of the list, also on the basis of common practice.</p>\n</blockquote>\n"}, {"tags": ["c", "gtk", "gtk3", "gtkmm"], "answers": [{"tags": [], "owner": {"reputation": 12075, "user_id": 2241569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QMrPS.jpg?s=128&g=1", "display_name": "Jussi Kukkonen", "link": "https://stackoverflow.com/users/2241569/jussi-kukkonen"}, "is_accepted": true, "score": 22, "last_activity_date": 1508610839, "last_edit_date": 1508610839, "creation_date": 1421870553, "answer_id": 28075850, "question_id": 28075304, "link": "https://stackoverflow.com/questions/28075304/how-to-disable-buttons-in-gtk3/28075850#28075850", "title": "How to disable buttons in GTK3", "body": "<pre><code>gtk_widget_set_sensitive (widget, FALSE);\n</code></pre>\n\n<p>Note that if you need to check whether a widget is sensitive,  <code>gtk_widget_get_sensitive()</code> returns the value set with the above function and <code>gtk_widget_is_sensitive()</code> will tell you whether the widget <em>really</em> is sensitive -- this is affected by parent widgets sensitivity as well.</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 6621213, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-nHd0HBTseVE/AAAAAAAAAAI/AAAAAAAADq4/FQ3Bcwat-Uk/photo.jpg?sz=128", "display_name": "Thien Do", "link": "https://stackoverflow.com/users/6621213/thien-do"}, "is_accepted": false, "score": 1, "last_activity_date": 1578833029, "creation_date": 1578833029, "answer_id": 59703928, "question_id": 28075304, "link": "https://stackoverflow.com/questions/28075304/how-to-disable-buttons-in-gtk3/59703928#59703928", "title": "How to disable buttons in GTK3", "body": "<p>For specific control, I think you can use \"set_sensitive\":</p>\n\n<pre><code>var button = new Gtk.Button.with_label(\"Hello\");\n\nbutton.set_sensitive(false); // true to enable the button\n</code></pre>\n"}], "owner": {"reputation": 1103, "user_id": 893601, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/503d2dd57d66237ff913d6d3abfb330e?s=128&d=identicon&r=PG", "display_name": "felknight", "link": "https://stackoverflow.com/users/893601/felknight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11159, "favorite_count": 2, "accepted_answer_id": 28075850, "answer_count": 2, "score": 9, "last_activity_date": 1578833029, "creation_date": 1421868659, "last_edit_date": 1519579679, "question_id": 28075304, "link": "https://stackoverflow.com/questions/28075304/how-to-disable-buttons-in-gtk3", "title": "How to disable buttons in GTK3", "body": "<p>Windows API has a function called <code>EnableWindow</code> that disables controls so user can't interact with them any more.</p>\n\n<p>Is there an equivalent for GTK3 or GTK3++?</p>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 1, "creation_date": 1421868616, "post_id": 28075225, "comment_id": 44529647, "body": "Why so many questions together?"}, {"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1421868634, "post_id": 28075225, "comment_id": 44529658, "body": "@haccks Why so serious?"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1421868685, "post_id": 28075225, "comment_id": 44529683, "body": "@bolov; I decided to answer but now changed my mind."}, {"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1421868690, "post_id": 28075225, "comment_id": 44529688, "body": "<code>Are strings initialized in this way are literals?</code> well in <code>char s[] = &quot;asdf&quot;</code> the <code>&quot;asdf&quot;</code> is the literal"}, {"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1421868752, "post_id": 28075225, "comment_id": 44529730, "body": "it is undefined behavior to modify the value of a literal so you should write  <code>char const *p = &quot;asdf&quot;</code>"}, {"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1421868956, "post_id": 28075225, "comment_id": 44529848, "body": "the standard doesn&#39;t talk about code segment or text segment. Those are implementation details on the most used architectures. But not all architectures have to use this system. The standard talks about linkage, lifetime, scope, const&#39;ness"}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 4479676, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uMHiK.jpg?s=128&g=1", "display_name": "HAROLD RABBIE", "link": "https://stackoverflow.com/users/4479676/harold-rabbie"}, "is_accepted": false, "score": 3, "last_activity_date": 1421869014, "creation_date": 1421869014, "answer_id": 28075404, "question_id": 28075225, "link": "https://stackoverflow.com/questions/28075225/c-string-literals/28075404#28075404", "title": "C string literals", "body": "<p>Neither firstlit nor secondlit are literals. They are both initialized arrays of characters.  firstlit is declared outside of any function body, and therefore lives in the data segment. It is initialized once, at start time. secondlit is declared inside a function, and therefore lives in the stack segment. It is initialized when the function is entered.  </p>\n"}, {"tags": [], "owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "is_accepted": true, "score": 3, "last_activity_date": 1421869192, "creation_date": 1421869192, "answer_id": 28075475, "question_id": 28075225, "link": "https://stackoverflow.com/questions/28075225/c-string-literals/28075475#28075475", "title": "C string literals", "body": "<p>You have exactly one string-literal object in your question:</p>\n\n<pre><code>char *ptr = \"Hello\"; // The array containing Hello\\0\n</code></pre>\n\n<p>All the others are just initializers for the arrays, and there's no guarantee how, if at all, they are stored.</p>\n\n<ul>\n<li>String-literals and constant compound-literals can share space and are immutable.</li>\n<li>Despite that, a string-literal is of type <code>char[]</code> for historical reasons.</li>\n<li>And there is no guarantee in what executable section they are stored, or even that there are any executable sections.</li>\n<li>There is also no guarantee what happens if you disregard the fact that they are immutable. Proceed at your own peril.</li>\n</ul>\n"}], "owner": {"reputation": 193, "user_id": 3604597, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bb37c3fdbcfaf68d80004da85064c2f4?s=128&d=identicon&r=PG&f=1", "display_name": "user3604597", "link": "https://stackoverflow.com/users/3604597/user3604597"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 28075475, "answer_count": 2, "score": 0, "last_activity_date": 1421869192, "creation_date": 1421868420, "question_id": 28075225, "link": "https://stackoverflow.com/questions/28075225/c-string-literals", "title": "C string literals", "body": "<p>I have some basic questions about string literals. I tried going through some similar SO question but I still don't get it :(.</p>\n\n<p>if we have for example the following program:</p>\n\n<pre><code>char firstlit[] = \"First Literal\";\nint main()\n{\nchar secondlit[] = \"Second Literal\";\n}\n</code></pre>\n\n<p>Are strings initialized in this way are literals? If so, how come we can modify their value? Is it undefined to change their values? </p>\n\n<p>Are both of them stored in the data section? I saw somewhere that some data can be saved in the code segment, why is that? </p>\n\n<p>Is the only difference between them is that secondlit contains pointer to the address which the string is initialized, but we can only use this variable in the main, while the firstlit we can use in the whole file (global)? \nAnother question:</p>\n\n<pre><code>char *ptr = \"Hello\";\nchar secondptr[] = \"Hello\";\n</code></pre>\n\n<p>Are both of them actually the same in the way they are stored? What is the better way to use for string literals?\nSorry for so much questions.\nThanks.</p>\n"}, {"tags": ["c++", "c", "multithreading", "locking", "lockless"], "comments": [{"owner": {"reputation": 96886, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 3, "creation_date": 1421868472, "post_id": 28075130, "comment_id": 44529560, "body": "Side note: don&#39;t name your variable <code>new</code> that is a C++ keyword"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 3, "creation_date": 1421868745, "post_id": 28075130, "comment_id": 44529722, "body": "Both are a busy loop - there is no difference (both are bad)"}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 1, "creation_date": 1421869616, "post_id": 28075130, "comment_id": 44530217, "body": "If the <code>global_var</code> type is integral, use an atomic increment."}, {"owner": {"reputation": 633, "user_id": 3167839, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9733482d33613b69ce278f902ecf93bc?s=128&d=identicon&r=PG&f=1", "display_name": "eswaat", "link": "https://stackoverflow.com/users/3167839/eswaat"}, "edited": false, "score": 0, "creation_date": 1421871901, "post_id": 28075130, "comment_id": 44531384, "body": "This is rough as I can&#39;t post my code. global_var is not a int it is structure"}, {"owner": {"reputation": 633, "user_id": 3167839, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9733482d33613b69ce278f902ecf93bc?s=128&d=identicon&r=PG&f=1", "display_name": "eswaat", "link": "https://stackoverflow.com/users/3167839/eswaat"}, "edited": false, "score": 0, "creation_date": 1421872669, "post_id": 28075130, "comment_id": 44531720, "body": "@DieterL&#252;cking any better idea ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1421873044, "post_id": 28075130, "comment_id": 44531914, "body": "@eswaat you might consider a condition variable"}, {"owner": {"reputation": 633, "user_id": 3167839, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9733482d33613b69ce278f902ecf93bc?s=128&d=identicon&r=PG&f=1", "display_name": "eswaat", "link": "https://stackoverflow.com/users/3167839/eswaat"}, "edited": false, "score": 0, "creation_date": 1421873622, "post_id": 28075130, "comment_id": 44532198, "body": "I can&#39;t sleep. can you give use case that fit my above condition."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1421874118, "post_id": 28075130, "comment_id": 44532421, "body": "<a href=\"http://en.cppreference.com/w/cpp/thread/condition_variable\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/thread/condition_variable</a>"}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1421885921, "post_id": 28075130, "comment_id": 44537310, "body": "If <code>global_var</code> is not integral or a pointer type, the <code>atomic_compare_and_swap</code> is misleading."}], "answers": [{"tags": [], "owner": {"reputation": 501, "user_id": 2623183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f681c02a87bdc9d1320f2ca5f36767d4?s=128&d=identicon&r=PG", "display_name": "phil", "link": "https://stackoverflow.com/users/2623183/phil"}, "is_accepted": false, "score": 0, "last_activity_date": 1421887010, "creation_date": 1421887010, "answer_id": 28079481, "question_id": 28075130, "link": "https://stackoverflow.com/questions/28075130/which-one-is-faster-atomic-compare-and-swap-or-spin-trylock/28079481#28079481", "title": "Which one is faster atomic_compare_and_swap or spin trylock?", "body": "<p>You need to use a blocking test. non-blocking tests like a spin lock which at best is test and sleep in a loop take a lot of processor cycles at the detriment to all other processes. Try using a semaphore </p>\n"}], "owner": {"reputation": 633, "user_id": 3167839, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9733482d33613b69ce278f902ecf93bc?s=128&d=identicon&r=PG&f=1", "display_name": "eswaat", "link": "https://stackoverflow.com/users/3167839/eswaat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 235, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1421887010, "creation_date": 1421868107, "last_edit_date": 1421871951, "question_id": 28075130, "link": "https://stackoverflow.com/questions/28075130/which-one-is-faster-atomic-compare-and-swap-or-spin-trylock", "title": "Which one is faster atomic_compare_and_swap or spin trylock?", "body": "<p>Below is my use case</p>\n\n<p>I have one global variable and multiple thread across all CPU are accessing this.</p>\n\n<p>With atomic compare and exchange</p>\n\n<pre><code>auto old = global_var;\nauto new_var = old\nfor (;;) {\n            new++;\n            bool got_it = atomic_compare_and_swap(global_var,\n                                  old,\n                                  new_var);\n            if (got_it) {\n                return new_var;\n            }\n            old = global_var;\n            new_var = old;\n    }\n</code></pre>\n\n<p>With spin trylock</p>\n\n<pre><code>for(;;)\n    {\n        auto temp = go_for_work();\n        if (temp -&gt; spin.trylock() == 0 )\n        {\n            continue;\n        }\n\n    }\n\n... go_for_work\n{\n    auto old = global_var;\n    auto new_var = old\n    new_var++;\n    global_var  =  new_var;\n    return new_var\n}\n</code></pre>\n\n<p>This is rough code I hope it is clear. Let me know if it is not clear.</p>\n\n<p>global_var is not a int it is structure.</p>\n\n<p>So, my main aim is to protect global_var, which one is faster atomic_compare_and_swap or spin.trylock(), also if some other technique ?</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1421868117, "post_id": 28075100, "comment_id": 44529378, "body": "Related <a href=\"http://stackoverflow.com/q/18898736/1708801\">What does sizeof without () do?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1570, "user_id": 2501921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba89206691a9b80f87abe01cebe4660c?s=128&d=identicon&r=PG", "display_name": "cmidi", "link": "https://stackoverflow.com/users/2501921/cmidi"}, "edited": false, "score": 0, "creation_date": 1421868182, "post_id": 28075117, "comment_id": 44529410, "body": "That is what I was thinking thanks for clearing my doubt."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 9, "creation_date": 1421868199, "post_id": 28075117, "comment_id": 44529418, "body": "Nit: depending on the expression, you may still need parentheses even then. <code>sizeof a + b</code> doesn&#39;t mean <code>sizeof (a + b)</code>. (I know that&#39;s what you meant too.)"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1421868238, "post_id": 28075117, "comment_id": 44529438, "body": "@hvd That&#39;s why I mentioned (and now elaborated on) operator precedence."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1421868251, "post_id": 28075117, "comment_id": 44529449, "body": "@hvd: There&#39;s no parentheses around that expression.  There are parentheses inside the expression, of course, controlling parsing."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 4, "creation_date": 1421868311, "post_id": 28075117, "comment_id": 44529476, "body": "A worse situation would be <code>char x[10]; sizeof(x + 1)</code> will be very different from <code>sizeof x + 1</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1421868349, "post_id": 28075117, "comment_id": 44529499, "body": "Yeah, I didn&#39;t think you thought otherwise. :) @BenVoigt In <code>sizeof (a + b)</code>, there are parentheses around the expression <code>a + b</code>."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1421868404, "post_id": 28075117, "comment_id": 44529527, "body": "@hvd: But the expression <code>a + b</code> is not the operand of <code>sizeof</code>.  The expression <code>(a + b)</code> is.  There are no parentheses around the operand."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1421868499, "post_id": 28075117, "comment_id": 44529575, "body": "@BenVoigt Let me rephrase, then. If you have the expression <code>a + b</code>, and want to use it as an operand of <code>sizeof</code>, you cannot do so directly, you need to first put parentheses around it. And you&#39;re right that that makes <code>(a + b)</code> the operand of <code>sizeof</code>."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 3, "creation_date": 1421868879, "post_id": 28075117, "comment_id": 44529804, "body": "@hvd: It&#39;s also important to note that parentheses may be required around <code>sizeof operand</code>.  Consider <code>char a; int x = sizeof(a)[&quot;abcdef&quot;];</code>  What is <code>x</code> ?  Would you know whether that is equivalent to <code>sizeof (a[&quot;abcdef&quot;])</code> or <code>(sizeof a)[&quot;abcdef&quot;]</code> ?  Very confusing to people who assume the <code>()</code> are part of the sizeof syntax."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1421869027, "post_id": 28075117, "comment_id": 44529889, "body": "@BenVoigt I would, because a common use of <code>sizeof</code> is <code>sizeof array &#47; sizeof array[0]</code>, so I&#39;m well aware that <code>[0]</code> is part of the operand of <code>sizeof</code>. :) To disambiguate, when <code>(sizeof a)[&quot;abcdef&quot;]</code> is meant, I would strongly prefer <code>&quot;abcdef&quot;[sizeof a]</code>, without a need for parentheses around <code>sizeof a</code>."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1421869247, "post_id": 28075117, "comment_id": 44529997, "body": "@hvd: Of course.  But it comes as a surprise to people who think that <code>sizeof (expression)</code> takes care of operator precedence concerns.  Of course, for <code>(sizeof a)</code> and <code>[sizeof a]</code> alike, there&#39;s clearly no value to putting parentheses in the operand, doing so just adds line noise."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1421869494, "post_id": 28075117, "comment_id": 44530147, "body": "@hvd: But if &quot;Expressions with unary operators group right-to-left&quot; and <code>sizeof</code>, unary <code>+</code>, and cast are all the same precedence, why is <code>sizeof (int)+5</code> equivalent to <code>(sizeof (int))+5</code> and not <code>sizeof ((int)+5)</code> ?"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1421870366, "post_id": 28075117, "comment_id": 44530628, "body": "@BenVoigt; In <code>sizeof (int)+5</code>, <code>+</code> will be treated as binary <code>+</code> and <code>(int)</code> will go with <code>sizeof</code>. In <code>sizeof ((int)+5)</code>, no evaluation of operand takes place and it will return the size of type."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1421870656, "post_id": 28075117, "comment_id": 44530781, "body": "@BenVoigt What haccks said, but also, &quot;Expressions with unary operators group right-to-left&quot; isn&#39;t something I&#39;ve said, and I&#39;m not sure what you&#39;re quoting from. The C grammar is clear that <code>sizeof</code>&#39;s expression operand must be a <i>unary-expression</i>, not a <i>cast-expression</i>."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1421872785, "post_id": 28075117, "comment_id": 44531780, "body": "@hvd: The quoted text is straight from the Standard.  But actually, you&#39;re right, casts have their own grammar production not mixed with <i>unary-expression</i>.  So the precedence table on Wikipedia is wrong."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1421873595, "post_id": 28075117, "comment_id": 44532183, "body": "@BenVoigt Ah, sorry, the question is tagged both C and C++, and I was looking at the C standard, which does not contain those same words."}, {"owner": {"reputation": 469, "user_id": 4824854, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SPhK8fI7Ih8/AAAAAAAAAAI/AAAAAAAACnc/0BBhoF9bSXg/photo.jpg?sz=128", "display_name": "Sandburg", "link": "https://stackoverflow.com/users/4824854/sandburg"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1565779462, "post_id": 28075117, "comment_id": 101455978, "body": "It&#39;s because <code>sizeof</code>has priority over <code>+</code>: <a href=\"https://en.cppreference.com/w/c/language/operator_precedence\" rel=\"nofollow noreferrer\">en.cppreference.com/w/c/language/operator_precedence</a>  @iharob"}], "tags": [], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "is_accepted": true, "score": 36, "last_activity_date": 1421868064, "creation_date": 1421868064, "answer_id": 28075117, "question_id": 28075100, "link": "https://stackoverflow.com/questions/28075100/when-should-we-use-sizeof-with-and-without-parentheses/28075117#28075117", "title": "When should we use sizeof with and without parentheses", "body": "<p>When using <code>sizeof</code> with a <em>type,</em> you need parentheses around the type. When using it with an <em>expression,</em> you don't. But you can of course include them in this case as well, and you don't have to worry about operator precedence in such case. With uncommon operators such as this one, fewer people would be sure of the precedence, so clarity certainly helps.</p>\n\n<p>So I'd say it's preferable to use them always.</p>\n"}, {"comments": [{"owner": {"reputation": 5701, "user_id": 4392605, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IgDqF.png?s=128&g=1", "display_name": "Meninx - \u30e1\u30cd\u30f3\u30c3\u30af\u30b9", "link": "https://stackoverflow.com/users/4392605/meninx-%e3%83%a1%e3%83%8d%e3%83%b3%e3%83%83%e3%82%af%e3%82%b9"}, "edited": false, "score": 0, "creation_date": 1421868486, "post_id": 28075212, "comment_id": 44529568, "body": "cause irritations ... like what ?"}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "reply_to_user": {"reputation": 5701, "user_id": 4392605, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IgDqF.png?s=128&g=1", "display_name": "Meninx - \u30e1\u30cd\u30f3\u30c3\u30af\u30b9", "link": "https://stackoverflow.com/users/4392605/meninx-%e3%83%a1%e3%83%8d%e3%83%b3%e3%83%83%e3%82%af%e3%82%b9"}, "edited": false, "score": 2, "creation_date": 1421868612, "post_id": 28075212, "comment_id": 44529644, "body": "@Meninx What is the value of <code>sizeof 1*2</code>? Is it intuitive?"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1421868839, "post_id": 28075212, "comment_id": 44529775, "body": "@Columbo; From which standard you have quoted it?"}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "reply_to_user": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1421868878, "post_id": 28075212, "comment_id": 44529801, "body": "@haccks N3337 (C++11), but the quote should have remained the same since C++98"}, {"owner": {"reputation": 5701, "user_id": 4392605, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IgDqF.png?s=128&g=1", "display_name": "Meninx - \u30e1\u30cd\u30f3\u30c3\u30af\u30b9", "link": "https://stackoverflow.com/users/4392605/meninx-%e3%83%a1%e3%83%8d%e3%83%b3%e3%83%83%e3%82%af%e3%82%b9"}, "edited": false, "score": 0, "creation_date": 1421868894, "post_id": 28075212, "comment_id": 44529811, "body": "@Columbo: the value is machine-dependent ! but I can say that it is the same as sizeof(int) * 2"}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "reply_to_user": {"reputation": 5701, "user_id": 4392605, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IgDqF.png?s=128&g=1", "display_name": "Meninx - \u30e1\u30cd\u30f3\u30c3\u30af\u30b9", "link": "https://stackoverflow.com/users/4392605/meninx-%e3%83%a1%e3%83%8d%e3%83%b3%e3%83%83%e3%82%af%e3%82%b9"}, "edited": false, "score": 0, "creation_date": 1421869004, "post_id": 28075212, "comment_id": 44529873, "body": "@Meninx Exactly. Who expects <code>sizeof 1*2</code> to be twice the size of an <code>int</code>? It&#39;s not quite obvious, IMO."}, {"owner": {"reputation": 5701, "user_id": 4392605, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IgDqF.png?s=128&g=1", "display_name": "Meninx - \u30e1\u30cd\u30f3\u30c3\u30af\u30b9", "link": "https://stackoverflow.com/users/4392605/meninx-%e3%83%a1%e3%83%8d%e3%83%b3%e3%83%83%e3%82%af%e3%82%b9"}, "edited": false, "score": 0, "creation_date": 1421869038, "post_id": 28075212, "comment_id": 44529897, "body": "Okay get it now @Columbo ! Thanks for your explanation ! :)"}], "tags": [], "owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "is_accepted": false, "score": 12, "last_activity_date": 1421868379, "creation_date": 1421868379, "answer_id": 28075212, "question_id": 28075100, "link": "https://stackoverflow.com/questions/28075100/when-should-we-use-sizeof-with-and-without-parentheses/28075212#28075212", "title": "When should we use sizeof with and without parentheses", "body": "<p>[expr.sizeof]/1:</p>\n\n<blockquote>\n  <p>The operand is either an <em>expression</em>, which is an unevaluated operand\n  (Clause 5), or a <strong>parenthesized <em>type-id</em></strong>.</p>\n</blockquote>\n\n<p>Thus the parentheses are required for types only. If you prefer to use parentheses for clarity and consistency (as I do) you can always use them though, as parentheses around an <em>expression</em> form another <em>expression</em>.<br>\nThe operator precedence of <code>sizeof</code> is not very well known and could cause irritations.</p>\n\n<p>Also, for the <code>sizeof...</code> operator, you always have to use parentheses (another reason for consistency).</p>\n"}], "owner": {"reputation": 1570, "user_id": 2501921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba89206691a9b80f87abe01cebe4660c?s=128&d=identicon&r=PG", "display_name": "cmidi", "link": "https://stackoverflow.com/users/2501921/cmidi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6985, "favorite_count": 6, "closed_date": 1421869313, "accepted_answer_id": 28075117, "answer_count": 2, "score": 22, "last_activity_date": 1421868434, "creation_date": 1421867976, "last_edit_date": 1421868272, "question_id": 28075100, "link": "https://stackoverflow.com/questions/28075100/when-should-we-use-sizeof-with-and-without-parentheses", "closed_reason": "Duplicate", "title": "When should we use sizeof with and without parentheses", "body": "<pre><code>typedef struct rem{\n    int  addr;\n    char addrbuf[32];\n} foo;\n</code></pre>\n\n<p>Both of these codes return the same results</p>\n\n<pre><code>foo addr;\nprintf(\"size is: %d\\n\",sizeof addr);\nprintf(\"size is: %d\\n\",sizeof (foo));\n</code></pre>\n\n<p>size is: 36</p>\n\n<p>size is: 36</p>\n\n<p>But when should we use <code>sizeof</code> with and without parentheses?</p>\n"}, {"tags": ["c", "malloc"], "comments": [{"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 2, "creation_date": 1421866390, "post_id": 28074587, "comment_id": 44528512, "body": "malloc requests memory from the OS. The OS maps whole <a href=\"http://en.wikipedia.org/wiki/Page_(computer_memory)\" rel=\"nofollow noreferrer\">page(s)</a> at once to the virtual space of the process. Since you allocate in small chunks I suspect this is where  the difference comes from."}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1421866792, "post_id": 28074587, "comment_id": 44528694, "body": "You could allocate multiple &quot;chunks&quot; at once, so that some of your pointers are within one of the allocated chunks.  Makes keeping track of things when you need to deallocate things trickier."}, {"owner": {"reputation": 17464, "user_id": 2040251, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UsW2G.jpg?s=128&g=1", "display_name": "kraskevich", "link": "https://stackoverflow.com/users/2040251/kraskevich"}, "edited": false, "score": 2, "creation_date": 1421866883, "post_id": 28074587, "comment_id": 44528743, "body": "I cannot reproduce it. I have tried to run your program with several different <code>MANY</code> values and it always had reasonably small overhead.  Could you show some code that allows to reproduce it?"}, {"owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "edited": false, "score": 1, "creation_date": 1421866937, "post_id": 28074587, "comment_id": 44528772, "body": "Most allocators will round up the number of bytes to a multiple of 16. 20 bytes -&gt; 32 bytes, 33 bytes -&gt; 48 bytes, 48 bytes -&gt; 48 bytes. How to deal with it? By taking a deep breath and stopping to worry about it."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421867052, "post_id": 28074587, "comment_id": 44528827, "body": "<i>I do not think I will do better job than gnu or facebook people</i> I am not sure, you could, but if you think you can&#39;t, may be you&#39;re right. It actually depends on why? would you want to do this. And it&#39;s not a matter of doing a better job, it&#39;s about doing the right job, the one that fits your needs."}, {"owner": {"reputation": 8429, "user_id": 964080, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/136f4c71facafdb75bfaa0e4f047f1fc?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/964080/nick"}, "reply_to_user": {"reputation": 17464, "user_id": 2040251, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UsW2G.jpg?s=128&g=1", "display_name": "kraskevich", "link": "https://stackoverflow.com/users/2040251/kraskevich"}, "edited": false, "score": 0, "creation_date": 1421867177, "post_id": 28074587, "comment_id": 44528885, "body": "@ILoveCoding what system you are using? I am using Arch Linux on 32 bit ARM, but tried it on Arch Linux on 64 bit XEON and got ~62 MB usage"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1421868488, "post_id": 28074587, "comment_id": 44529570, "body": "@Nick should you include the &quot;ARM&quot; tag?"}, {"owner": {"reputation": 8429, "user_id": 964080, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/136f4c71facafdb75bfaa0e4f047f1fc?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/964080/nick"}, "edited": false, "score": 0, "creation_date": 1421869044, "post_id": 28074587, "comment_id": 44529903, "body": "No, same thing happen regardless of the architecture Arm, x86 or x86_64. I am on Arm at the moment and give Arm usage."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1421869469, "post_id": 28074587, "comment_id": 44530133, "body": "@Nick your above comment says <i>&quot;pieces are different sizes&quot;</i>, so the code you posted does <b>not</b> state your problem. Also, I see you have used <code>long int</code> type to work with <code>1000000</code> so is that a 16-bit processor, perhaps with bank switching?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1421870112, "post_id": 28074587, "comment_id": 44530486, "body": "@Nick said <i>&quot;tried it on Arch Linux on 64 bit XEON and got ~62 MB usage&quot;</i>. You allocate memory for 1000000 records of 43--&gt;64 bytes each, which will use 64000000 bytes, or ~62Mb. What are you on?"}, {"owner": {"reputation": 8429, "user_id": 964080, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/136f4c71facafdb75bfaa0e4f047f1fc?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/964080/nick"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1421870259, "post_id": 28074587, "comment_id": 44530567, "body": "@Weather Vane you are probably correct for &quot;different sizes&quot;. about the Arm is 32 bit, no particular reason for long int, i am developing it on normal 64 bit intel but from time to time checking it on Arm for compatibility."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1421870377, "post_id": 28074587, "comment_id": 44530638, "body": "@Nick your comment to an answer said &quot;I believe memory is wasted, because I have a file with around 500 MB data. I can not load it on machine with 6 GB free RAM (Intel i5).&quot; That&#39;s not ARM now is it? Your posts are getting contradictory."}, {"owner": {"reputation": 8429, "user_id": 964080, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/136f4c71facafdb75bfaa0e4f047f1fc?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/964080/nick"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1421870400, "post_id": 28074587, "comment_id": 44530657, "body": "@Weather Vane I don&#39;t have the test data with me. I will check this tomorrow and will update the question with exact breakdown with sizes and so on"}, {"owner": {"reputation": 8429, "user_id": 964080, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/136f4c71facafdb75bfaa0e4f047f1fc?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/964080/nick"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1421870636, "post_id": 28074587, "comment_id": 44530770, "body": "@Weather Vane as I said I test my code on 4-5 systems, but mostly on i5 / 10 GB ram and ARM v7 / 2 GB ram. Heavy &quot;memory&quot; things I do on i5. Will post exact memory usage tomorrow."}, {"owner": {"reputation": 8429, "user_id": 964080, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/136f4c71facafdb75bfaa0e4f047f1fc?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/964080/nick"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1421872536, "post_id": 28074587, "comment_id": 44531650, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/69342/discussion-between-nick-and-weather-vane\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 8429, "user_id": 964080, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/136f4c71facafdb75bfaa0e4f047f1fc?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/964080/nick"}, "edited": false, "score": 0, "creation_date": 1421868016, "post_id": 28075022, "comment_id": 44529334, "body": "there are no de-allocations in the code, just malloc()&#39;s I will do profiling of the data tomorrow and will post the result here."}, {"owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "reply_to_user": {"reputation": 8429, "user_id": 964080, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/136f4c71facafdb75bfaa0e4f047f1fc?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/964080/nick"}, "edited": false, "score": 0, "creation_date": 1421868154, "post_id": 28075022, "comment_id": 44529393, "body": "You&#39;re quite sure <code>printf</code> and <code>stdio</code> buffering never allocate (or free) any memory internally?"}, {"owner": {"reputation": 8429, "user_id": 964080, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/136f4c71facafdb75bfaa0e4f047f1fc?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/964080/nick"}, "edited": false, "score": 0, "creation_date": 1421868732, "post_id": 28075022, "comment_id": 44529712, "body": "not sure for printf(), but fopen() for sure do. however &quot;hole&quot; should be small comparing to the rest of the usage."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1421869014, "post_id": 28075022, "comment_id": 44529881, "body": "<code>printf()</code> is only in the loop when <code>malloc()</code> fails."}, {"owner": {"reputation": 8429, "user_id": 964080, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/136f4c71facafdb75bfaa0e4f047f1fc?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/964080/nick"}, "edited": false, "score": 0, "creation_date": 1421952376, "post_id": 28075022, "comment_id": 44568534, "body": "I did following file <a href=\"https://github.com/nmmmnu/HM2/blob/master/malloc_tools.h\" rel=\"nofollow noreferrer\">github.com/nmmmnu/HM2/blob/master/malloc_tools.h</a> and run the test with it. Seems all additional space is the overhead. I also profiled the &quot;pieces&quot; of data by size and I found I have lots of &quot;non so aligned&quot; pieces, for example 17 bytes long - on x86_64 this gets &quot;rounded&quot; to 32 bytes and on Arm it is rounded to 24 byte. Finally I tried Doug Lea malloc and it give me surprisingly good results. Seems like I will need to find or made custom allocator after all :)"}], "tags": [], "owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "is_accepted": true, "score": 0, "last_activity_date": 1421867721, "creation_date": 1421867721, "answer_id": 28075022, "question_id": 28074587, "link": "https://stackoverflow.com/questions/28074587/why-malloc-consume-that-much-memory/28075022#28075022", "title": "Why malloc consume that much memory?", "body": "<p>Firstly, overhead. There is a small overhead in the <code>malloc</code> structure. I think it's about 8 bytes per <code>malloc</code>. Also (partly for alignment, partly for practicality, and partly to minimise the effect below), memory allocations are going to be rounded up in size to a multiple of a small power of 2.</p>\n\n<p>Secondly, fragmentation. Suppose you allocate 3 900 byte blocks, A, B, and C, and the allocator chooses to allocate them sequentially. Next, suppose B is freed. As the hole is smaller than the OS page size, the 'hole' that B is in can't be given back to the OS. If all subsequent allocations using <code>malloc</code> are larger than 900 bytes, the hole will never be filled - i.e. its wasted. If (say) a 600 byte allocation comes along, it <em>might</em> be placed in the hole, but that's then going to leave a 300 byte hole. No allocator is going to perform perfectly in this situation.</p>\n"}, {"comments": [{"owner": {"reputation": 8429, "user_id": 964080, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/136f4c71facafdb75bfaa0e4f047f1fc?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/964080/nick"}, "edited": false, "score": 0, "creation_date": 1421868946, "post_id": 28075279, "comment_id": 44529840, "body": "I believe memory is wasted, because I have a file with around 500 MB data. I can not load it on machine with 6 GB free RAM (Intel i5)."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 8429, "user_id": 964080, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/136f4c71facafdb75bfaa0e4f047f1fc?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/964080/nick"}, "edited": false, "score": 0, "creation_date": 1421869108, "post_id": 28075279, "comment_id": 44529945, "body": "@Nick But you mentioned ARM. Be clear, which platform, what problem."}], "tags": [], "owner": {"reputation": 7440, "user_id": 166156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f03c1e9f0f59035f1e2289f1cdb1e9?s=128&d=identicon&r=PG", "display_name": "Variable Length Coder", "link": "https://stackoverflow.com/users/166156/variable-length-coder"}, "is_accepted": false, "score": 0, "last_activity_date": 1421868571, "creation_date": 1421868571, "answer_id": 28075279, "question_id": 28074587, "link": "https://stackoverflow.com/questions/28074587/why-malloc-consume-that-much-memory/28075279#28075279", "title": "Why malloc consume that much memory?", "body": "<p>On a modern OS, a common implementation of <code>malloc</code> will request large chunks of virtual memory space and split it up into allocation pools.  It will then hand out that memory from these pools as due to its own optimization parameters (whether by size, thread, fragment reduction, etc.).  A naive view of memory sees this as wasted.  However, virtual memory is not necessarily backed by physical pages until it is put to use, when the OS will backfill a mapping for it on demand (similar to how paging works, but with anonymous memory-backing).  Therefore, the number that you view as being used by your process is not necessarily real memory that is being consumed, simply allocated VM space waiting to be used.</p>\n"}], "owner": {"reputation": 8429, "user_id": 964080, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/136f4c71facafdb75bfaa0e4f047f1fc?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/964080/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 231, "favorite_count": 1, "accepted_answer_id": 28075022, "answer_count": 2, "score": 2, "last_activity_date": 1421868571, "creation_date": 1421866108, "question_id": 28074587, "link": "https://stackoverflow.com/questions/28074587/why-malloc-consume-that-much-memory", "title": "Why malloc consume that much memory?", "body": "<p>I have project where I do lots of malloc's. I found that memory usage is much greater than the data itself. If I use valgrind and put 100 MB data allocated memory is 500 MB. The data chunks are different sizes, 20-40 bytes each. Here are minimal program that do similar thing, but with chunks of same size.</p>\n\n<p>It allocates around 43 MB, but valgrind massif show 53 MB.</p>\n\n<p>If run with jemalloc, top show 47 MB as well.</p>\n\n<p>For the moment all chunks are different sizes and I cannot use array or something.</p>\n\n<p>Is there some settings for malloc I can use or if there are different malloc-like commands I can use to minimize the wasted memory? </p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n\n#define BUFFER_SIZE 39\n#define MANY        1000000LU\n\ntypedef struct _list{\n    void    *next;\n    char    payload[BUFFER_SIZE];\n}list;\n\n\nint main(){\n    list root;\n\n    printf(\"Allocating %lu chunks %zu bytes each, equals to %lu bytes\\n\", MANY, sizeof(list), MANY * sizeof(list));\n\n    list *node = &amp; root;\n    unsigned long int i;\n    for(i = 0; i &lt; MANY; i++){\n        node-&gt;next = malloc(sizeof(list));\n\n        if (node-&gt;next == NULL){\n            printf(\"Out of memory\\n\");\n            return 1;\n        }\n\n        memset(node-&gt;payload, 0, BUFFER_SIZE);\n\n        node = node-&gt;next;\n    }\n\n    printf(\"done\\n\");\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "sockets", "file-descriptor"], "comments": [{"owner": {"reputation": 11703, "user_id": 490930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ea6fa37340ab617bdbd37456deb2411?s=128&d=identicon&r=PG", "display_name": "Antoine Pelisse", "link": "https://stackoverflow.com/users/490930/antoine-pelisse"}, "edited": false, "score": 3, "creation_date": 1421866094, "post_id": 28074452, "comment_id": 44528344, "body": "At the beginning of the <code>while(!endOfTransfer)</code> loop. you have: <code>messageLength = read(..., buffer, strlen(buffer)-1)</code>, but buffer is not initialized yet? You could end-up with <code>strlen(buffer)</code> to 0 so <code>strlen(buffer)-1</code> to be -1."}, {"owner": {"reputation": 11703, "user_id": 490930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ea6fa37340ab617bdbd37456deb2411?s=128&d=identicon&r=PG", "display_name": "Antoine Pelisse", "link": "https://stackoverflow.com/users/490930/antoine-pelisse"}, "edited": false, "score": 3, "creation_date": 1421866160, "post_id": 28074452, "comment_id": 44528384, "body": "So what you meant probably is <code>sizeof(buffer) - 1</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1421866400, "post_id": 28074452, "comment_id": 44528518, "body": "Side issue: there is a memory leak in <code>tempString = strdup(buffer);</code> because you never <code>free(tempString);</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1421866647, "post_id": 28074452, "comment_id": 44528624, "body": "... and in the two lines following, you are not checking the return value of <code>strtok()</code>, which might be <code>NULL</code>, but which you are processing."}, {"owner": {"reputation": 3188, "user_id": 937153, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/X4pGh.jpg?s=128&g=1", "display_name": "Unni", "link": "https://stackoverflow.com/users/937153/unni"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1421866698, "post_id": 28074452, "comment_id": 44528638, "body": "I was sort of going by the logic that strlen() will give the size along with the terminating &#39;\\0&#39; so strlen()-1. Turns out that logic was wrong. Thanks for pointing it out.  @WeatherVane: Yup. The code is just too messy. Thanks for pointing them out :)"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1421866742, "post_id": 28074452, "comment_id": 44528664, "body": "Assume nothing, be rigorous, <code>strlen(NULL)</code> will give a segmentation fault."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1421867817, "post_id": 28074452, "comment_id": 44529246, "body": "You don&#39;t need the <code>memset()</code> at all if you use the count returned by <code>read()</code> correctly."}], "owner": {"reputation": 3188, "user_id": 937153, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/X4pGh.jpg?s=128&g=1", "display_name": "Unni", "link": "https://stackoverflow.com/users/937153/unni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1176, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1421865748, "creation_date": 1421865651, "last_edit_date": 1421865748, "question_id": 28074452, "link": "https://stackoverflow.com/questions/28074452/socket-programming-bad-address-error-in-read-when-used-in-loop", "title": "Socket Programming: Bad address Error in read() when used in loop", "body": "<p>I was trying to implement FTP Server as a part of an assignment and I wrote the following code to implement GET Command, which essentially reads file1 from server and stores it in file2. </p>\n\n<pre><code>int getCommandImpl(int clientSocket, char *file1, char *file2){\nchar *messageContent;\nchar buffer[256], userCommand[256], *tempString ;\nint messageHead, endOfTransfer =0;\nint messageLength;\nsprintf(userCommand, \"GET %s\", file1);\nmessageLength = write(clientSocket,userCommand,strlen(userCommand));\nif(messageLength &lt;0){\n    perror(\"Error sending data to server in RETR\");\n    return 0;\n}\nFILE *fp;\nfp = fopen(file2, \"w\");\nif(fp==NULL){\n    printf(\"%s Can not be created\\n\", file2);\n    return 0;\n}\nprintf(\"Writing to file %s\\n\", file2);\nwhile(!endOfTransfer){\n    messageLength = read(clientSocket, buffer, strlen(buffer)-1);\n    if(messageLength == -1){\n        perror(\"GET: Error in read() \");\n        break;\n    }\n    //puts(buffer);\n    printf(\"Buffer is %s with len %d\\n\", buffer, strlen(buffer));\n    tempString = strdup(buffer);\n    messageHead = atoi(strtok(tempString, \" \"));\n    messageContent = strtok(NULL, \" \");\n    if(messageHead == 0 &amp;&amp; strlen(messageContent)==0){ //End of file transfer\n        endOfTransfer = 1;\n        break;\n    }\n    fwrite(messageContent, sizeof(char), sizeof(messageContent), fp);\n    memset(buffer,0,sizeof(buffer));\n    printf(\"Buffer is %s with len %d\\n\", buffer, strlen(buffer));\n}\nfclose(fp);\nreturn 1;\n}\n</code></pre>\n\n<p>While running it, I am always getting the error \"GET: Error in read() : Bad address\". If I remove the statement </p>\n\n<pre><code>memset(buffer,0,sizeof(buffer));\n</code></pre>\n\n<p>I am getting a segmentation fault. I am assuming that the error has something to do with the string buffer being empty from the second iteration. \nAny help to solve this will be highly appreciated. </p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 11196, "user_id": 1079907, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/a7c69e39fbec2c781db5f27b40f63023?s=128&d=identicon&r=PG", "display_name": "Sunil Bojanapally", "link": "https://stackoverflow.com/users/1079907/sunil-bojanapally"}, "edited": false, "score": 1, "creation_date": 1421864958, "post_id": 28074239, "comment_id": 44527768, "body": "Yes. Depends on the max size member in it."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1421865148, "post_id": 28074239, "comment_id": 44527863, "body": "Yes, up to alignment."}, {"owner": {"reputation": 2670, "user_id": 346104, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/31duc.jpg?s=128&g=1", "display_name": "franji1", "link": "https://stackoverflow.com/users/346104/franji1"}, "edited": false, "score": 0, "creation_date": 1421866083, "post_id": 28074239, "comment_id": 44528339, "body": "Are you truly defining a union instance or are you mapping a pointer to a struct that contains this union, where the first struct member (m_eAddrType) tells you how to interpret the next member of the struct that is this union (i.e. look at .addr vs. looking at .addrBuff?  I have implemented this &quot;variant record&quot; data-structure using struct that contain a union."}], "answers": [{"comments": [{"owner": {"reputation": 8338, "user_id": 39138, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5b2c32394549cbfe730a2aa0dbc56486?s=128&d=identicon&r=PG", "display_name": "Roland Rabien", "link": "https://stackoverflow.com/users/39138/roland-rabien"}, "edited": false, "score": 4, "creation_date": 1421865081, "post_id": 28074262, "comment_id": 44527829, "body": "There may also be space allocated for padding."}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": true, "score": 8, "last_activity_date": 1421867017, "last_edit_date": 1421867017, "creation_date": 1421864923, "answer_id": 28074262, "question_id": 28074239, "link": "https://stackoverflow.com/questions/28074239/how-much-memory-does-a-union-need/28074262#28074262", "title": "How much memory does a union need", "body": "<blockquote>\n  <p>Does it mean that a union allocates or needs the memory equal to biggest element in the union at definition ?  </p>\n</blockquote>\n\n<p>Yes. Memory for the largest member is allocated. That's why the members of a <code>union</code> are stored at the same location.    </p>\n\n<p>Assuming <code>int</code> requires 4 bytes, for union  </p>\n\n<pre><code>union{\n    char c;\n    int i;\n} U; \n</code></pre>\n\n<p>memory will be allocated as:</p>\n\n<p><img src=\"https://i.stack.imgur.com/ZnCQk.png\" alt=\"enter image description here\"></p>\n\n<p>Note that how <code>c</code> and <code>i</code> overlap. In fact <code>c</code> is first byte of <code>i</code>. </p>\n"}, {"tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 1, "last_activity_date": 1421865278, "creation_date": 1421865278, "answer_id": 28074343, "question_id": 28074239, "link": "https://stackoverflow.com/questions/28074239/how-much-memory-does-a-union-need/28074343#28074343", "title": "How much memory does a union need", "body": "<p>Memory occupied by union unlike structure will be memory for the largest member of the union. But depending on the implementation there might be extra padding at the end so there is no guarantee that the <code>size of a union = size of the largest member</code>. So you can say size of union will be atleast the size of the largest member in the union.</p>\n\n<p>Side note: Since the memory is shared between all the members of the union only one member is active at a time. </p>\n"}], "owner": {"reputation": 1570, "user_id": 2501921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba89206691a9b80f87abe01cebe4660c?s=128&d=identicon&r=PG", "display_name": "cmidi", "link": "https://stackoverflow.com/users/2501921/cmidi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 852, "favorite_count": 1, "closed_date": 1421865847, "accepted_answer_id": 28074262, "answer_count": 2, "score": 3, "last_activity_date": 1421867017, "creation_date": 1421864855, "question_id": 28074239, "link": "https://stackoverflow.com/questions/28074239/how-much-memory-does-a-union-need", "closed_reason": "Duplicate", "title": "How much memory does a union need", "body": "<p>I have the following union</p>\n\n<pre><code>typedef union rem{\n    int addr;\n    char addrbuf[32];\n} foo;\n</code></pre>\n\n<p>A sizeof on the union provides the following output</p>\n\n<pre><code>foo addr;\nprintf(\"size is: %d\\n\",sizeof addr);\n</code></pre>\n\n<p>size is: 32</p>\n\n<p>Does it mean that a union allocates or needs the memory equal to biggest element in the union at definition ?</p>\n"}, {"tags": ["c", "antlr", "antlr3", "mainframe", "zos"], "comments": [{"owner": {"reputation": 8847, "user_id": 624463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/995rN.png?s=128&g=1", "display_name": "cschneid", "link": "https://stackoverflow.com/users/624463/cschneid"}, "edited": false, "score": 0, "creation_date": 1421930741, "post_id": 28074230, "comment_id": 44554845, "body": "Why use the metal option?  That&#39;s for applications where you specifically don&#39;t want to use Language Environment, e.g. in a JES exit.  LE is ubiquitous in the &quot;normal&quot; application space.  Why can&#39;t you just use the C runtime provided by LE?"}, {"owner": {"reputation": 41, "user_id": 3803240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/396a02e613525602bf44ae3a5a4e8066?s=128&d=identicon&r=PG&f=1", "display_name": "user3803240", "link": "https://stackoverflow.com/users/3803240/user3803240"}, "reply_to_user": {"reputation": 8847, "user_id": 624463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/995rN.png?s=128&g=1", "display_name": "cschneid", "link": "https://stackoverflow.com/users/624463/cschneid"}, "edited": false, "score": 0, "creation_date": 1422463538, "post_id": 28074230, "comment_id": 44761885, "body": "Thanks for your suggestion.  I&#39;m new to mainframes. I wasn&#39;t aware of the LE option.  Metal C was recommended to me.  But I&#39;ll check to see whether it&#39;s necessary for the project.  Do you know if anyone has run ANTLR generated C code on LE?"}, {"owner": {"reputation": 8847, "user_id": 624463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/995rN.png?s=128&g=1", "display_name": "cschneid", "link": "https://stackoverflow.com/users/624463/cschneid"}, "edited": false, "score": 0, "creation_date": 1422487094, "post_id": 28074230, "comment_id": 44774466, "body": "I do not.  Try browsing through the documentation and see if it conforms to the standards ANTLR requires.  It looks to be C11 compliant, among others.  <a href=\"http://www-01.ibm.com/support/knowledgecenter/#!/SSLTBW_2.1.0/com.ibm.zos.v2r1.cbc/cbc.htm\" rel=\"nofollow noreferrer\">www-01.ibm.com/support/knowledgecenter/#!/SSLTBW_2.1.0/&hellip;</a>"}, {"owner": {"reputation": 41, "user_id": 3803240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/396a02e613525602bf44ae3a5a4e8066?s=128&d=identicon&r=PG&f=1", "display_name": "user3803240", "link": "https://stackoverflow.com/users/3803240/user3803240"}, "reply_to_user": {"reputation": 8847, "user_id": 624463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/995rN.png?s=128&g=1", "display_name": "cschneid", "link": "https://stackoverflow.com/users/624463/cschneid"}, "edited": false, "score": 0, "creation_date": 1422569038, "post_id": 28074230, "comment_id": 44814159, "body": "We&#39;re making progress with LE.  I&#39;ll post a summary of what we did if we get everything working."}, {"owner": {"reputation": 41, "user_id": 3803240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/396a02e613525602bf44ae3a5a4e8066?s=128&d=identicon&r=PG&f=1", "display_name": "user3803240", "link": "https://stackoverflow.com/users/3803240/user3803240"}, "reply_to_user": {"reputation": 8847, "user_id": 624463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/995rN.png?s=128&g=1", "display_name": "cschneid", "link": "https://stackoverflow.com/users/624463/cschneid"}, "edited": false, "score": 0, "creation_date": 1424893811, "post_id": 28074230, "comment_id": 45742866, "body": "We&#39;ve been able to compile an link an ANTLR3 generated parser in C on z/OS. However, now we&#39;d like it to work properly in an EBCDIC environment.  How can we go about doing this?  Where do we set the encoding to ANTLR3_ENC_EBCDIC?  Do we need to create a new string template?  Has anyone already done this?"}], "owner": {"reputation": 41, "user_id": 3803240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/396a02e613525602bf44ae3a5a4e8066?s=128&d=identicon&r=PG&f=1", "display_name": "user3803240", "link": "https://stackoverflow.com/users/3803240/user3803240"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1421864833, "creation_date": 1421864833, "question_id": 28074230, "link": "https://stackoverflow.com/questions/28074230/compile-antlr-generated-code-with-c-runtime-on-ibm-mainframe-z-os-using-metal", "title": "Compile ANTLR generated code with C runtime on IBM mainframe (z/OS) using Metal C", "body": "<p>I'm looking to run a parser generated by ANTLR 3.5.2 on an IBM mainframe under zOS. I don't need to run ANTLR itself on the mainframe.  But I do need to be able to run the C code that ANTLR generates on the mainframe along with ANTLR's C runtime.  My question is really about how compatible gnu C is with Metal C for ANTLR's C runtime.  </p>\n\n<p>Either a positive or negative experience porting the C runtime to Metal C would help me assess the difficulty of this task.\nThanks very much.</p>\n"}, {"tags": ["c", "dev-c++"], "comments": [{"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 1, "creation_date": 1421863346, "post_id": 28073804, "comment_id": 44526956, "body": "You do realize <code>fflush(stdin)</code> is undefined behavior, right? (and why are you trying to flush it anyway? <code>stdin</code> is an input stream\u2026 don&#39;t you want to flush <code>stdout</code>, rather?) Also, you <b>do</b> realize that <code>iStevec=iStevec+1</code> is equivalent with <code>++iStevec</code>, so you are incrementing the loop counter <b>twice</b> on each iteration? Furthermore, the &quot;File format not recognized&quot; error, if it&#39;s a compiler error, has nothing to do with arrays, not with your code at all \u2013 rather with your compiler settings and/or invocation."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1421863366, "post_id": 28073804, "comment_id": 44526969, "body": "@TheParamagneticCroissant they find them in some tutorials."}, {"owner": {"reputation": 8818, "user_id": 994153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93223e5ce701c54b075a45e57f61f37d?s=128&d=identicon&r=PG", "display_name": "Colin D Bennett", "link": "https://stackoverflow.com/users/994153/colin-d-bennett"}, "edited": false, "score": 7, "creation_date": 1421863384, "post_id": 28073804, "comment_id": 44526977, "body": "Perhaps Dev C++ does not use the correct character encoding when reading the source file?  The non-Latin characters in the string literals might cause this error if the IDE tries to read it as US-ASCII or another incorrect encoding."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1421863973, "post_id": 28073804, "comment_id": 44527295, "body": "Check result of <code>scanf(&quot;%lf&quot;,&amp;dPolje[iStevec]);</code>  --&gt; <code>if (1 != scanf(&quot;%lf&quot;,&amp;dPolje[iStevec])) break;</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 3, "creation_date": 1421864136, "post_id": 28073804, "comment_id": 44527371, "body": "Does  even a simple &quot;hello World&quot; program work?  It may be that your compiled code is not compatible with your machine."}, {"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 0, "creation_date": 1421865703, "post_id": 28073804, "comment_id": 44528141, "body": "Maybe related: <a href=\"http://stackoverflow.com/q/4443642/509868\">here</a>"}], "answers": [{"comments": [{"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 9, "user_id": 4330350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c6000f410ae3ad7e7a6867a67ceb11e?s=128&d=identicon&r=PG&f=1", "display_name": "Janac9", "link": "https://stackoverflow.com/users/4330350/janac9"}, "edited": false, "score": 0, "creation_date": 1421868686, "post_id": 28074644, "comment_id": 44529684, "body": "@Janac9 Same error? It&#39;s pretty clear that this compiles and runs. I suspect that you have problems with your Dev C++ setup. I cannot stress strongly enough that you will waste a measurable amount of your life trying to get that to work. Is there a reason that you cannot change IDEs?"}], "tags": [], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "is_accepted": false, "score": 0, "last_activity_date": 1421866364, "creation_date": 1421866364, "answer_id": 28074644, "question_id": 28073804, "link": "https://stackoverflow.com/questions/28073804/c-arrays-file-format-not-recognized/28074644#28074644", "title": "C, Arrays, file format not recognized", "body": "<p>I'm guessing that Dev C++ doesn't support Slovenian.</p>\n\n<p>Create a new file and try this code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define SIZE 23\n\nint main(){\n    double dField[SIZE];\n    int i, larger = 0;\n\n    printf(\"This algorithm, determines how many data field items have values greater than or equal to 10.\\n\");\n\n    for (i = 0; i &lt; SIZE; i++){\n        printf(\"Enter field number %i:\", i + 1); //Note I fixed this original code had i = i + 1\n        //fflush(stdin); unneeded\n        scanf(\"%lf\", &amp;dField[i]);\n\n        if (dField[i] &gt;= 10){\n            larger++;\n            printf(\"Field number %i = %lf\", i, dField[i]);\n        }\n    } //Moved this above final output and return\n    printf(\"%i field items were greater than or equal to 10 \", larger);\n    return 0;\n}\n</code></pre>\n\n<p>I expect that to work.</p>\n\n<p>Either way I'd definitely change compilers. <a href=\"http://www.visualstudio.com/en-us/products/visual-studio-community-vs.aspx\" rel=\"nofollow\">Visual Studio Community</a> Is a great fully featured IDE.</p>\n"}], "owner": {"reputation": 9, "user_id": 4330350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c6000f410ae3ad7e7a6867a67ceb11e?s=128&d=identicon&r=PG&f=1", "display_name": "Janac9", "link": "https://stackoverflow.com/users/4330350/janac9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 120, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1421866364, "creation_date": 1421863199, "last_edit_date": 1421863333, "question_id": 28073804, "link": "https://stackoverflow.com/questions/28073804/c-arrays-file-format-not-recognized", "title": "C, Arrays, file format not recognized", "body": "<p>for our homework we have to compile the program we wrote in the school. I have typed it without mistakes(verified with my colleagues) and the program does not work, I am using DEV C++ and the error log says, <em>file not recognized: File format not recognized.</em></p>\n\n<p>I tried using integer and not double but it stays the same...I have no idea what is wrong.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define VELIKOST 23\nint main (void)\n{\n  double dPolje[VELIKOST];\n  int iStevec,iVecje=0;\n\n  printf(\"Algoritem, ki dolo\u010di koliko elementov podatkovnega polja imajo vrednosti vecje ali enake od 10 \\r\\n\");\n\n  for(iStevec=0;iStevec&lt;VELIKOST;iStevec++)\n  {\n    printf(\"Vnesite %i. stevilo:\",iStevec=iStevec+1);\n    fflush(stdin);\n    scanf(\"%lf\",&amp;dPolje[iStevec]);\n\n      if(dPolje[VELIKOST]&gt;=10)\n      {\n        iVecje++;\n        printf(\"Element dPolje [%i]=%f.\",iStevec,dPolje[iStevec]);\n      }\n       printf(\"%i elementov polja je imelo vecje ali enako vredost 10.\",iVecje);\n       return(0);\n  }\n}\n</code></pre>\n"}, {"tags": ["c", "visual-c++"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1421865241, "post_id": 28073739, "comment_id": 44527903, "body": "It&#39;s more difficult, but far from impossible, in a compiled language.  Creating, for example, a new instance of a form class and and any associated gunge to control a new servo instance would be a one-liner in many OO languages, though streaming out the form, with it&#39;s configured parameters, and subsequent streaming back in, may be an annoying complication."}, {"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 0, "creation_date": 1421866179, "post_id": 28073739, "comment_id": 44528395, "body": "Which graphics framework are you using? Does it have a <a href=\"http://en.wikipedia.org/wiki/Layout_manager\" rel=\"nofollow noreferrer\">layout manager</a>?"}, {"owner": {"reputation": 13, "user_id": 3685925, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AfKBu.jpg?s=128&g=1", "display_name": "Len Paulsen", "link": "https://stackoverflow.com/users/3685925/len-paulsen"}, "edited": false, "score": 0, "creation_date": 1421868572, "post_id": 28073739, "comment_id": 44529622, "body": "The graphics framework currently implemented is the integrated one with Lab Windows; UIR, or National Instruments User Interface Resource.  There is a drag and drop editor, as well as an associated header file that is really just a list of macros for each element.  For example: |          #define    TABPANEL_STRING    1"}], "owner": {"reputation": 13, "user_id": 3685925, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AfKBu.jpg?s=128&g=1", "display_name": "Len Paulsen", "link": "https://stackoverflow.com/users/3685925/len-paulsen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1421862941, "creation_date": 1421862941, "question_id": 28073739, "link": "https://stackoverflow.com/questions/28073739/is-it-possible-to-program-a-selectable-number-of-devices-without-actually-hard", "title": "Is it possible to program a &quot;selectable&quot; number of devices without actually hardcoding every possible scenario?", "body": "<p>I have been working on a project over the past 6 months creating a program to control some machinery.  The software controls some servos, and other bits mostly via serial communication.</p>\n\n<p>It is currently programmed in ANSI C99 in the Lab Windows IDE, along with some of its included libraries.  As the project continues, there are many different variations on \"how many\" servos are needed for each build.  This ends up requiring custom coding for each one.  I feel the core logic could still be programmed this way, and just put into a dll if need be, and the rest programmed in something else like C++ if need be.</p>\n\n<p>Due to the fact that each servo needs to be individually controllable, is there really a way to allow a user to select how many they want during an initial setup?</p>\n\n<p>I know it is simple to create a UI element to allow a selection, but how would you go about dynamically creating new UI elements, and variables associated with that UI element for individual control?  I think this could work in an interpreted language, where you could have a function literally write out new code after the user makes a selection, but I don't know how to achieve this in a compiled language.</p>\n\n<p>I am currently just researching the feasibility of moving this direction at all, and would greatly appreciate any thoughts or input. If it is possible, I think I just need a basic example of how to go about this sort of problem.</p>\n\n<p>The only way I can personally think of achieving this is to literally program out every possible scenario, but we are talking potentially about 50 variations, so I am really hoping there is a more efficient way to go about this.</p>\n\n<p>If you have any questions for me in order to better answer, please feel free to ask!  Thanks in advance!</p>\n"}, {"tags": ["c", "arrays", "sorting", "macros", "generic-programming"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 4, "creation_date": 1421862938, "post_id": 28073730, "comment_id": 44526736, "body": "Why don&#39;t you use <code>qsort()</code>?"}, {"owner": {"reputation": 155, "user_id": 4464750, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/c37102222b80012ba96de653cf2aa4b3?s=128&d=identicon&r=PG&f=1", "display_name": "flaviumanica", "link": "https://stackoverflow.com/users/4464750/flaviumanica"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421863104, "post_id": 28073730, "comment_id": 44526826, "body": "I&#39;m preparing for an exam,and in the courses there&#39;s an example with GENERIC_MAX,which finds the maximum between 2 values. And I&#39;m supposed to make the sort just like this..."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421863138, "post_id": 28073730, "comment_id": 44526848, "body": "should it be a macro? you could mimic <code>qsort()</code> and use a callback function."}], "answers": [{"tags": [], "owner": {"reputation": 53754, "user_id": 198536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9edaf4c1c1b89b5d39c40528d0017509?s=128&d=identicon&r=PG", "display_name": "wallyk", "link": "https://stackoverflow.com/users/198536/wallyk"}, "is_accepted": false, "score": 5, "last_activity_date": 1421863128, "creation_date": 1421863128, "answer_id": 28073781, "question_id": 28073730, "link": "https://stackoverflow.com/questions/28073730/how-to-write-a-generic-function-to-sort-a-string-array-in-c/28073781#28073781", "title": "How to write a generic function to sort a string array in C?", "body": "<p>A prime example of a generic sort is the C runtime library <code>qsort()</code>.  One of its most versatile attributes is that it makes use of a \"comparison function\" which is passed as a parameter.</p>\n\n<p>Why not adopt that tactic?  While it is true that most comparison functions are trivial, in the case of accessing objects it is invaluable for interpreting what is inside the object.</p>\n"}, {"comments": [{"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 0, "creation_date": 1421864939, "post_id": 28073913, "comment_id": 44527762, "body": "<code>functionName: binarySearch</code>: copy-paste typo?"}, {"owner": {"reputation": 17102, "user_id": 1022889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WZOSZ.jpg?s=128&g=1", "display_name": "Cloud", "link": "https://stackoverflow.com/users/1022889/cloud"}, "reply_to_user": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 0, "creation_date": 1421865016, "post_id": 28073913, "comment_id": 44527801, "body": "@anatolyg Lol, yup. Thanks!"}], "tags": [], "owner": {"reputation": 17102, "user_id": 1022889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WZOSZ.jpg?s=128&g=1", "display_name": "Cloud", "link": "https://stackoverflow.com/users/1022889/cloud"}, "is_accepted": false, "score": 3, "last_activity_date": 1421865038, "last_edit_date": 1495540245, "creation_date": 1421863564, "answer_id": 28073913, "question_id": 28073730, "link": "https://stackoverflow.com/questions/28073730/how-to-write-a-generic-function-to-sort-a-string-array-in-c/28073913#28073913", "title": "How to write a generic function to sort a string array in C?", "body": "<p>What you need to do is generate the C equivalent of C++'s template functions using generics. This is usually a combination of function pointers and re-casting <code>void*</code> data to achieve the desired result. The <code>qsort()</code> function does just this. Included below is a code listing and sample run <a href=\"https://stackoverflow.com/questions/27662383/sorting-structures-basis-of-any-structure-element/27662526#27662526\">from a similar answer of mine from some time back</a> that shows you how to use a simple Bubble Sort implementation for multiple data types.</p>\n\n<p>To extend this to any data type, you just need to:</p>\n\n<ol>\n<li>Create your own <code>int compareDataType(void* a, void* b)</code> function</li>\n<li>Update the <code>sizeOfElement</code> and <code>compareFcn</code> parameters passed to the <code>BubbleSort()</code> function.</li>\n</ol>\n\n<p>Your approach might work for primitive data types that already have defined comparison operations, but it won't work for abstract data types likes <code>struct</code>s, etc. </p>\n\n<p><strong>Code Listing</strong></p>\n\n<hr>\n\n<pre><code>/*******************************************************************************\n * Preprocessor Directives\n ******************************************************************************/\n#include &lt;stdio.h&gt;   // printf\n#include &lt;stdlib.h&gt;  // calloc\n#include &lt;string.h&gt;  // memcpy\n#include &lt;time.h&gt;    // random seed initialization\n#define ELEMENT_AT(arr, i, w) (((char*)arr) + ((i)*(w)))\n#define BUF_SIZE  (20)\n\n\n/*******************************************************************************\n * Function Prototypes\n ******************************************************************************/\ntypedef struct cricket_s {\n   char pname[BUF_SIZE];\n   char tname[BUF_SIZE];\n   int avg;\n} cricket_t;\n\n\n/*******************************************************************************\n * Function Prototypes\n ******************************************************************************/\n/* @functionName: bubbleSort\n * @brief:        Performs a bubble sort on an input array, using a user-\n *                provided function pointer for comparing data types so that\n *                the function can be as generic as possible.\n * @param:        arr: The array to search.\n * @param:        compareFcn: The comparison function to use.\n * @param:        sizeOfElement: The size of a single element in arr\n * @param:        numElements: The number of elements in arr\n */\nvoid* bubbleSort(void* arr, int (*compareFcn)(void*, void*), size_t sizeOfElement, size_t numElements);\n\nvoid rand_str(char *dest, size_t length);\nint compareCricketAvg(void *a, void *b);\nint compareCricketPname(void *a, void *b);\n\n/*******************************************************************************\n * Function Definitions\n ******************************************************************************/\n/*----------------------------------------------------------------------------*/\nvoid* bubbleSort(void* arr, int (*compareFcn)(void*, void*), size_t sizeOfElement, size_t numElements) {\n   if (!arr || !compareFcn || !numElements || !sizeOfElement) {\n      return NULL;\n   }\n   int i, j;\n   void* tempBuf;\n   /* Create a swap buffer */\n   if ((tempBuf = calloc(1, sizeOfElement)) == NULL) {\n      return NULL;\n   }\n   /* Sort the list via bubble sort (stable) */\n   for (i=0; i&lt;(numElements-1); i++) {\n      for (j=0; j&lt;(numElements - i -1); j++) {\n         if (compareFcn(ELEMENT_AT(arr, j, sizeOfElement), ELEMENT_AT(arr, j+1, sizeOfElement)) == (-1)) {\n            memcpy(tempBuf, ELEMENT_AT(arr, j, sizeOfElement), sizeOfElement);\n            memcpy(ELEMENT_AT(arr, j, sizeOfElement), ELEMENT_AT(arr, j+1, sizeOfElement), sizeOfElement);\n            memcpy(ELEMENT_AT(arr, j+1, sizeOfElement), tempBuf, sizeOfElement);\n         }\n      }\n   }\n   /* Clean up and exit */\n   free(tempBuf);\n   return arr;\n}\n\n/*******************************************************************************\n * Comparson function s.\n * Returns (-1) if a&lt;b, +1 if a&gt;b, 0 if a==b\n */\n/*----------------------------------------------------------------------------*/\nint compareCricketAvg(void *a, void *b) {\n   if (!a || !b) {\n      /* Treat bad input as equality */\n      return 0;\n   }\n   int ret;\n   if (((cricket_t*)a)-&gt;avg &lt; ((cricket_t*)b)-&gt;avg) {\n      ret = (-1);\n   } else if (((cricket_t*)a)-&gt;avg &gt; ((cricket_t*)b)-&gt;avg) {\n      ret = 1;\n   } else\n      ret = 0;\n   return ret;\n}\n\n\n/*----------------------------------------------------------------------------*/\nint compareCricketPname(void *a, void *b) {\n   if (!a || !b) {\n      /* Treat bad input as equality */\n      return 0;\n   }\n   int ret;\n   char *s1, *s2;\n   s1 = ((cricket_t*)a)-&gt;pname;\n   s2 = ((cricket_t*)b)-&gt;pname;\n   ret = strncmp(s1, s2, BUF_SIZE);\n   if (ret &gt; 0) {\n      ret = 1;\n   } else if (ret &lt; 0) {\n      ret = (-1);\n   } else {\n      ret = 0;\n   }\n\n   return ret;\n}\n\n\n/*----------------------------------------------------------------------------*/\nvoid rand_str(char *dest, size_t length) {\n    char charset[] = \"0123456789\"\n                     \"abcdefghijklmnopqrstuvwxyz\"\n                     \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n\n    while (length-- &gt; 0) {\n        size_t index = (double) rand() / RAND_MAX * (sizeof charset - 1);\n        *dest++ = charset[index];\n    }\n    *dest = '\\0';\n}\n\n/*******************************************************************************\n * Main Entry Point\n ******************************************************************************/\n/*----------------------------------------------------------------------------*/\nint main(void) {\n   srand(time(NULL));   // init random seed\n   int numPlayers = 10;\n   int i;\n\n   /* Dynamically allocate memory for a few teams */\n   cricket_t* team;\n   if ((team = calloc(numPlayers, sizeof(cricket_t))) == NULL) {\n      printf(\"Memory error\\n\");\n      return (-1);\n   }\n\n   /* Populate struct values */\n   for (i=0; i&lt;numPlayers; i++) {\n      team[i].avg = rand() % 1000;\n      rand_str(team[i].pname, BUF_SIZE);\n      printf(\"Team %d - Pname:%s - Average:%d\\n\", i, team[i].pname, team[i].avg);\n   }\n   printf(\"\\n\");\n\n   /* Sort the list according to AVG value */\n   bubbleSort((void*)team, compareCricketAvg, sizeof(cricket_t), numPlayers);\n\n   /* Print sorted team */\n   for (i=0; i&lt;numPlayers; i++) {\n      printf(\"Team %d - Pname:%s - Average:%d\\n\", i, team[i].pname, team[i].avg);\n   }\n   printf(\"\\n\");\n\n   /* Sort again, now by pname */\n   bubbleSort((void*)team, compareCricketPname, sizeof(cricket_t), numPlayers);\n\n   /* Print sorted team */\n   for (i=0; i&lt;numPlayers; i++) {\n      printf(\"Team %d - Pname:%s - Average:%d\\n\", i, team[i].pname, team[i].avg);\n   }\n   printf(\"\\n\");\n\n   free(team);\n   return 0;\n}\n</code></pre>\n\n<p><strong>Sample Run</strong></p>\n\n<hr>\n\n<pre><code>Team 0 - Pname:YY7plBOnjIi7YQTKjgqB - Average:605\nTeam 1 - Pname:sKGbl8pIAjHzq6U2UimD - Average:439\nTeam 2 - Pname:tBrmmKDNmvf6crrlQaWa - Average:226\nTeam 3 - Pname:vBXqESI0vju7KRuvvhS1 - Average:117\nTeam 4 - Pname:YdYqzPBv0s0Bqqgi9hNs - Average:209\nTeam 5 - Pname:VdDpJ8GB9dAnb0W1Bs14 - Average:633\nTeam 6 - Pname:DuUTM3bAvXvJAVsJB3TP - Average:212\nTeam 7 - Pname:h1Fd2hF3l8GQ2AD6LdBI - Average:237\nTeam 8 - Pname:kjEN3gRX5ve6ar8r7cMg - Average:467\nTeam 9 - Pname:Djtgpet1XdmhSal81iew - Average:473\n\nTeam 0 - Pname:VdDpJ8GB9dAnb0W1Bs14 - Average:633\nTeam 1 - Pname:YY7plBOnjIi7YQTKjgqB - Average:605\nTeam 2 - Pname:Djtgpet1XdmhSal81iew - Average:473\nTeam 3 - Pname:kjEN3gRX5ve6ar8r7cMg - Average:467\nTeam 4 - Pname:sKGbl8pIAjHzq6U2UimD - Average:439\nTeam 5 - Pname:h1Fd2hF3l8GQ2AD6LdBI - Average:237\nTeam 6 - Pname:tBrmmKDNmvf6crrlQaWa - Average:226\nTeam 7 - Pname:DuUTM3bAvXvJAVsJB3TP - Average:212\nTeam 8 - Pname:YdYqzPBv0s0Bqqgi9hNs - Average:209\nTeam 9 - Pname:vBXqESI0vju7KRuvvhS1 - Average:117\n\nTeam 0 - Pname:vBXqESI0vju7KRuvvhS1 - Average:117\nTeam 1 - Pname:tBrmmKDNmvf6crrlQaWa - Average:226\nTeam 2 - Pname:sKGbl8pIAjHzq6U2UimD - Average:439\nTeam 3 - Pname:kjEN3gRX5ve6ar8r7cMg - Average:467\nTeam 4 - Pname:h1Fd2hF3l8GQ2AD6LdBI - Average:237\nTeam 5 - Pname:YdYqzPBv0s0Bqqgi9hNs - Average:209\nTeam 6 - Pname:YY7plBOnjIi7YQTKjgqB - Average:605\nTeam 7 - Pname:VdDpJ8GB9dAnb0W1Bs14 - Average:633\nTeam 8 - Pname:DuUTM3bAvXvJAVsJB3TP - Average:212\nTeam 9 - Pname:Djtgpet1XdmhSal81iew - Average:473\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "is_accepted": false, "score": 0, "last_activity_date": 1421864771, "creation_date": 1421864771, "answer_id": 28074212, "question_id": 28073730, "link": "https://stackoverflow.com/questions/28073730/how-to-write-a-generic-function-to-sort-a-string-array-in-c/28074212#28074212", "title": "How to write a generic function to sort a string array in C?", "body": "<p>If you already have the <code>GENERIC_MAX</code> code (as described in a comment), you can use it instead of comparing and swapping. To do it, define <code>GENERIC_MIN</code> (should be easy - very similar to generic max). Then:</p>\n\n<pre><code>#define GENERIC_SORT(TYPE) \\\nTYPE ##_SORT(TYPE a[],int n) \\\n{  \\\nint i,j; \\\nTYPE aux_min, aux_max; \\\nfor(i=1;i&lt;n;i++) \\\n    for(j=n-1;j&gt;=i;j--) \\\n{ \\\n    aux_min=GENERIC_MIN(a[j], a[j-1]); \\\n    aux_max=GENERIC_MAX(a[j], a[j-1]); \\\n    a[j-1]=aux_min; \\\n    a[j]=aux_max; \\\n} \\\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "is_accepted": false, "score": 1, "last_activity_date": 1421865509, "creation_date": 1421865509, "answer_id": 28074419, "question_id": 28073730, "link": "https://stackoverflow.com/questions/28073730/how-to-write-a-generic-function-to-sort-a-string-array-in-c/28074419#28074419", "title": "How to write a generic function to sort a string array in C?", "body": "<p>You can circumvent the problem of non-symbol types like <code>char *</code> or <code>struct point</code> by defining new types with <code>typedef</code>. A better approach may be to pass the name of the new function to the macro as additional parameter.</p>\n\n<p>The problem of the comparison can be solved by passing the comparison criterion, as in the callback function of <code>qsort</code> that others have pointed you to. Because the function is not really called, but substituted at compile time, it can be a macro.</p>\n\n<p>Here's your macro extended:</p>\n\n<pre><code>#define GENERIC_SORT(NAME, TYPE, LT)            \\\n    void NAME(TYPE a[], int n)                  \\\n    {                                           \\\n        int i, j;                               \\\n                                                \\\n        for (i = 1; i &lt; n; i++) {               \\\n            for (j = n - 1; j &gt;= i; j--) {      \\\n                if (LT(a[j], a[j - 1])) {       \\\n                    TYPE aux = a[j];            \\\n                    a[j] = a[j - 1];            \\\n                    a[j - 1] = aux;             \\\n                }                               \\\n            }                                   \\\n        }                                       \\\n    }\n</code></pre>\n\n<p>Your integer sort is then:</p>\n\n<pre><code>#define LESS(a, b) ((a) &lt; (b))\n\nGENERIC_SORT(int_sort, int, LESS);\n\nint main(void)\n{\n    int array[] = {\n        6, 3, 9, 2, 7, 10, 5, 1\n    };\n    int n = sizeof(array) / sizeof(*array);\n    int i;\n\n    int_sort(array, n);\n    for (i = 0; i &lt; n; i++) {\n        printf(\"%d\\n\", array[i]);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Sort strings with a comparison function:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n#include \"gen.h\"   /* your macro */\n\nint str_less(const char *a, const char *b)\n{\n    return strcmp(a, b) &lt; 0;\n}\n\nGENERIC_SORT(str_sort, const char *, str_less);\n\nint main(void)\n{\n    const char *array[] = {\n        \"apricot\", \"orange\", \"banana\", \"apple\", \"papaya\", \"kiwi\"\n    };\n    int n = sizeof(array) / sizeof(*array);\n    int i;\n\n    str_sort(array, n);\n    for (i = 0; i &lt; n; i++) {\n        printf(\"%s\\n\", array[i]);\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 155, "user_id": 4464750, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/c37102222b80012ba96de653cf2aa4b3?s=128&d=identicon&r=PG&f=1", "display_name": "flaviumanica", "link": "https://stackoverflow.com/users/4464750/flaviumanica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2549, "favorite_count": 0, "answer_count": 4, "score": 3, "last_activity_date": 1421865509, "creation_date": 1421862881, "last_edit_date": 1421865182, "question_id": 28073730, "link": "https://stackoverflow.com/questions/28073730/how-to-write-a-generic-function-to-sort-a-string-array-in-c", "title": "How to write a generic function to sort a string array in C?", "body": "<p>I'm trying to write a generic function to sort different types of data. My code is:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#define GENERIC_SORT(TYPE) \\\nTYPE ##_SORT(TYPE a[],int n) \\\n{  \\\nint i,j; \\\nTYPE aux; \\\nfor(i=1;i&lt;n;i++) \\\n    for(j=n-1;j&gt;=i;j--) \\\n    if(a[j]&lt;a[j-1]) \\\n{ \\\n    aux=a[j]; \\\n    a[j]=a[j-1]; \\\n    a[j-1]=aux; \\\n} \\\n}\nGENERIC_SORT(int)\nGENERIC_SORT(float)\nGENERIC_SORT(double)\nGENERIC_SORT(char)\nint main(void)\n{\nint i,a[]={3,7,5,4,6,1};\nint_SORT(a,6);\nfor(i=0;i&lt;6;i++)\n    printf(\"%d \",a[i]);\nreturn 0;\n}\n</code></pre>\n\n<p>I'm preparing for an exam,and in the courses there's an example with <code>GENERIC_MAX</code>, which finds the maximum between 2 values. And I'm supposed to make the sort just like this...</p>\n\n<p>It works fine on <code>int</code>, <code>float</code>, <code>double</code> and <code>char</code>. But how can I use it to sort a string array (<code>char a[][100]</code> or <code>char *a[]</code>)?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 3, "creation_date": 1421862247, "post_id": 28073520, "comment_id": 44526397, "body": "This question implies that you don&#39;t understand the difference between a file and it&#39;s contents. You want to send the file contents which are bytes."}, {"owner": {"reputation": 3, "user_id": 4479413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/386f101bee8673d92d6af5e1e6c4364a?s=128&d=identicon&r=PG&f=1", "display_name": "terminator847", "link": "https://stackoverflow.com/users/4479413/terminator847"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421862341, "post_id": 28073520, "comment_id": 44526449, "body": "So I just use the send function? How?"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1421862549, "post_id": 28073520, "comment_id": 44526553, "body": "If the server speaks HTTP, FTP (etc...) you should use some HTTP client library like <a href=\"http://curl.haxx.se/libcurl/\" rel=\"nofollow noreferrer\">libcurl</a>. Notice that your question is operating system specific (standard C11 does not know about sockets)"}, {"owner": {"reputation": 403, "user_id": 1957816, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/8b0bc9a47c4547e69feb4e6437ab1126?s=128&d=identicon&r=PG", "display_name": "Fl&#225;vio Schuindt", "link": "https://stackoverflow.com/users/1957816/fl%c3%a1vio-schuindt"}, "edited": false, "score": 0, "creation_date": 1421864238, "post_id": 28073520, "comment_id": 44527428, "body": "To send something to the server you can use <code>write()</code> or <code>send()</code>. Using <code>write()</code> is simpler because it is &#39;universal&#39; file descriptor functions. <code>send()</code> is a more specialized function (you can ignore SIGPIPE, etc)."}, {"owner": {"reputation": 403, "user_id": 1957816, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/8b0bc9a47c4547e69feb4e6437ab1126?s=128&d=identicon&r=PG", "display_name": "Fl&#225;vio Schuindt", "link": "https://stackoverflow.com/users/1957816/fl%c3%a1vio-schuindt"}, "edited": false, "score": 0, "creation_date": 1421864266, "post_id": 28073520, "comment_id": 44527440, "body": "For the sake of simplicity, I will show a example using <code>write()</code>. Using <code>send()</code> is similar. So, if you want to write a file to server:   - Prepare all the socket setup as you have already mentioned;  - Send the file. You must open the file and get a file descriptor to it. Also, you must have the socket fd in hands."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 4479413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/386f101bee8673d92d6af5e1e6c4364a?s=128&d=identicon&r=PG&f=1", "display_name": "terminator847", "link": "https://stackoverflow.com/users/4479413/terminator847"}, "edited": false, "score": 0, "creation_date": 1421863146, "post_id": 28073613, "comment_id": 44526853, "body": "So I just the function send() or read() in a loop?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 3, "user_id": 4479413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/386f101bee8673d92d6af5e1e6c4364a?s=128&d=identicon&r=PG&f=1", "display_name": "terminator847", "link": "https://stackoverflow.com/users/4479413/terminator847"}, "edited": false, "score": 0, "creation_date": 1421863241, "post_id": 28073613, "comment_id": 44526900, "body": "@terminator847 pretty much, sure there is of course a lot more to take care of, but the file copy will be performed this way, you could also send the file size to the server so it can check if the transmission was finished. That would be the hard part in fact, how to know when to start and when to stop sending/recieving."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 1, "last_activity_date": 1421862443, "creation_date": 1421862443, "answer_id": 28073613, "question_id": 28073520, "link": "https://stackoverflow.com/questions/28073520/how-do-you-upload-a-file-from-a-server-to-a-client-in-c/28073613#28073613", "title": "How do you upload a file from a server to a client in C?", "body": "<p>Just do this</p>\n\n<ol>\n<li><p>Open the local file with <code>open()</code> for reading i.e.</p>\n\n<pre><code>int fd = open(localFileName, O_RDONLY);\nif (fd == -1)\n    errorFileCantBeOpenedForReadingAbortThis();\n</code></pre></li>\n<li><p>Read bytes from the file and write them to the socket</p>\n\n<pre><code>int size;\nunsigned char buffer[SOME_REASONABLE_SIZE];\n\nsize = read(fd, buffer, sizeof(buffer));\nif (size == -1)\n    aReadErrorHandleIt();\nif (write(sockfd, buffer, size) == -1)\n    aWriteErrorHandleIt();\n</code></pre>\n\n<p>do this in a loop until all the data was written.</p></li>\n</ol>\n\n<p>In the server side, you need to write the data to the file that was probably specified through the <code>put</code> command or some custom command you might specify.</p>\n\n<p>Of course you should first send the destination file name to the server along with something that indicates that a file write is about to start and open the file for writing.</p>\n\n<p>It would be good if the server notifies the client that the writing might start and then the client could start writing until you send something to indicate that it was all sent, and the server could then close the file.</p>\n"}], "owner": {"reputation": 3, "user_id": 4479413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/386f101bee8673d92d6af5e1e6c4364a?s=128&d=identicon&r=PG&f=1", "display_name": "terminator847", "link": "https://stackoverflow.com/users/4479413/terminator847"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "closed_date": 1421862755, "accepted_answer_id": 28073613, "answer_count": 1, "score": -2, "last_activity_date": 1421863000, "creation_date": 1421862092, "last_edit_date": 1421863000, "question_id": 28073520, "link": "https://stackoverflow.com/questions/28073520/how-do-you-upload-a-file-from-a-server-to-a-client-in-c", "closed_reason": "Needs more focus", "title": "How do you upload a file from a server to a client in C?", "body": "<p>I need to do this function:\nput X Y : uploads the local file X to the server and names it Y at server side</p>\n\n<p>I already wrote everything needed to set up the connection, I only want to know how to upload a file.\nI only know the <code>send()</code> function which has 4 parameters, but it just seems to send an array of characters. How do you send an entire file, like an image for example?</p>\n\n<p>Using HTTP, on Windows.</p>\n"}, {"tags": ["c", "erlang"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1421863924, "post_id": 28073411, "comment_id": 44527268, "body": "please describe these functions: enif_alloc_binar(), enif_realloc_binary().  Are they functions written by you or some system function?  If written by you, then we cannot help without LOTS more code."}, {"owner": {"reputation": 113, "user_id": 3979627, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001926851235/picture?type=large", "display_name": "Przemek Krzysztof Wycisk", "link": "https://stackoverflow.com/users/3979627/przemek-krzysztof-wycisk"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1421942953, "post_id": 28073411, "comment_id": 44563014, "body": "these are functions from <a href=\"http://www.erlang.org/doc/man/erl_nif.html\" rel=\"nofollow noreferrer\">here</a>, a person who knows the answer would know that so i didn&#39;t mention that ;)"}], "answers": [{"tags": [], "owner": {"reputation": 18889, "user_id": 409228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c1bdfc9f659a18f39e8d2f81329e241?s=128&d=identicon&r=PG", "display_name": "Steve Vinoski", "link": "https://stackoverflow.com/users/409228/steve-vinoski"}, "is_accepted": true, "score": 1, "last_activity_date": 1421864025, "creation_date": 1421864025, "answer_id": 28074030, "question_id": 28073411, "link": "https://stackoverflow.com/questions/28073411/erlang-enif-realloc-binary-memory-copying/28074030#28074030", "title": "Erlang enif_realloc_binary memory copying", "body": "<p>Yes. As you'd expect, if you reduce the size of the binary, it copies only that many bytes to the newly-allocated space, but if you increase the size, it copies all the currently-allocated bytes. See the <a href=\"https://github.com/erlang/otp/blob/maint/erts/emulator/beam/erl_nif.c#L565-L588\" rel=\"nofollow\"><code>enif_realloc_binary</code> source</a> for details.</p>\n"}], "owner": {"reputation": 113, "user_id": 3979627, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001926851235/picture?type=large", "display_name": "Przemek Krzysztof Wycisk", "link": "https://stackoverflow.com/users/3979627/przemek-krzysztof-wycisk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 28074030, "answer_count": 1, "score": 1, "last_activity_date": 1421864025, "creation_date": 1421861625, "last_edit_date": 1421862548, "question_id": 28073411, "link": "https://stackoverflow.com/questions/28073411/erlang-enif-realloc-binary-memory-copying", "title": "Erlang enif_realloc_binary memory copying", "body": "<p>Does <code>enif_realloc_binary</code> copy data after <code>enif_alloc_binary</code>, when we just trim size?</p>\n\n<p>Code</p>\n\n<pre><code>ErlNifBinary output;\nenif_alloc_binary(length, &amp;output);\nproduce_output(input.data, length, &amp;output);\nenif_realloc_binary(&amp;output, length - 10);\n</code></pre>\n"}, {"tags": ["c", "macros", "c-preprocessor"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1421861651, "post_id": 28073317, "comment_id": 44526089, "body": "why do you have this <code>#define awesome (range){4,6}</code> what is it supposed to do?"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1421861654, "post_id": 28073317, "comment_id": 44526090, "body": "Why are you even using macros for this ? Why not just use functions (inline if necessary) ?"}, {"owner": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "edited": false, "score": 0, "creation_date": 1421862201, "post_id": 28073317, "comment_id": 44526367, "body": "The first compiler error is pretty clear.  So what part of your code is calling BitMap_getMask with two arguments?"}, {"owner": {"reputation": 7145, "user_id": 31326, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/375fe48b92417121e65b2145dcc840be?s=128&d=identicon&r=PG", "display_name": "Peter M", "link": "https://stackoverflow.com/users/31326/peter-m"}, "reply_to_user": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "edited": false, "score": 1, "creation_date": 1421862330, "post_id": 28073317, "comment_id": 44526446, "body": "@DavidGrayson He is most likely suffering from a bad macro expansion, so that what looks like a single parameter is actually 2 by the time the pre-processor expands everything.  iharob&#39;s answer is headed that way by adding additional parentheses to clarify things"}, {"owner": {"reputation": 406, "user_id": 4214412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5ad8718ddc68c9ff1967e81780bb2b5?s=128&d=identicon&r=PG", "display_name": "Gophyr", "link": "https://stackoverflow.com/users/4214412/gophyr"}, "edited": false, "score": 1, "creation_date": 1421865139, "post_id": 28073317, "comment_id": 44527855, "body": "I think the problem is that you are trying to return something from the first macro (?) And TECHNICALLY macros don&#39;t return anything; use a function."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1448620223, "post_id": 28073317, "comment_id": 55668572, "body": "Please can somebody tell me the reason to use macros? Just use them for simple stuff..The compiler is a lot better"}], "answers": [{"comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1421862997, "post_id": 28073537, "comment_id": 44526766, "body": "when using C macros, each argument should always be surrounded by parens &#39;(&#39; and &#39;)&#39; in the expansion of the macro.  Without the parens, very subtle errors in the expansion can occur, where those errors are very difficult to debug."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1421863046, "post_id": 28073537, "comment_id": 44526791, "body": "@user3629249 In fact being paranoid with parentheses in macros seems very good to me, it avoids a lot of problems."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 3, "last_activity_date": 1421862147, "creation_date": 1421862147, "answer_id": 28073537, "question_id": 28073317, "link": "https://stackoverflow.com/questions/28073317/using-macro-within-another-macro-declaration/28073537#28073537", "title": "Using macro within another macro declaration", "body": "<p>This might be what you need</p>\n\n<pre><code>#define BitMap_getMask(range) \\\n   (((~(unsigned int) 0 &gt;&gt; (31 - (range).max + (range).min)) &lt;&lt; (range).min))\n\n#define BitMap_get(x, range) \\\n   ((x) &amp; BitMap_getMask(range))\n\n#define awesome \\\n   ((struct {int min; int max;}){4, 6})\n</code></pre>\n\n<p>the error was due to the expansion of <code>{4, 6}</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 414, "user_id": 4369740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/465640e769a726efeeb7d16db1b01259?s=128&d=identicon&r=PG&f=1", "display_name": "tipaye", "link": "https://stackoverflow.com/users/4369740/tipaye"}, "is_accepted": true, "score": 3, "last_activity_date": 1421863520, "creation_date": 1421863520, "answer_id": 28073895, "question_id": 28073317, "link": "https://stackoverflow.com/questions/28073317/using-macro-within-another-macro-declaration/28073895#28073895", "title": "Using macro within another macro declaration", "body": "<p>When range is expanded to {4,6} and passed to BitMap_getMask, what you're getting is BitMap_getMask({4,6}) which is 2 arguments, whereas BitMap_getMask expects 1 argument.</p>\n\n<p>Furthermore, the pre-processor only does text replacement for these macros. It is unaware of type. It will replace every instance of text \"range\" with text \"{4,6}\" so you don't have a type (struct range) or instance of a type, that you can use, just some text, so \"range.a\" and \"range.b\" are also not going work; they would result something like \"{4,6}.a\" and \"{4,6}.b\"</p>\n\n<p>Not valid C.</p>\n\n<p>C99 supports inline functions, and there is almost no excuse for using pre-processor macros in C these days. They are trouble (one good use of course is include guards). Inline functions are in the domain of the compiler and properly type-checked.</p>\n\n<pre><code>struct awesome\n{\n    unsigned int a;\n    unsigned int b;\n};\n\n...\n\nstatic inline unsigned int BitMap_get(unsigned int x, awesome range) \n{\n    return (x &amp; BitMap_getMask(range));\n}\n\nstatic inline unsigned int BitMap_getMask(awesome range) \n{\n    return (((~(unsigned int)0&gt;&gt;(31-range.b+range.a))&lt;&lt;range.a));\n}\n\n...\n\nawesome range = \n{\n    .a = 4,\n    .b = 6,\n};\n\nunsigned int x = 0xEEEEEEEE;\nunsigned int bm = BitMap_get(x, awesome);\n...\n</code></pre>\n"}], "owner": {"reputation": 630, "user_id": 3022945, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/2VQPb.png?s=128&g=1", "display_name": "Hristo Ivanov", "link": "https://stackoverflow.com/users/3022945/hristo-ivanov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 28073895, "answer_count": 2, "score": 0, "last_activity_date": 1448620015, "creation_date": 1421861328, "last_edit_date": 1448620015, "question_id": 28073317, "link": "https://stackoverflow.com/questions/28073317/using-macro-within-another-macro-declaration", "title": "Using macro within another macro declaration", "body": "<p>Let's start with the code and the error.</p>\n\n<pre><code>#define BitMap_getMask(range)           (((~(unsigned int)0&gt;&gt;(31-range.b+range.a))&lt;&lt;range.a))\n#define BitMap_get(x, range)            (x &amp; BitMap_getMask(range))\n#define awesome (range){4,6}\n...................\nprintf(\"%08x\\n\", BitMap_get(0xEEEEEEEE, awesome));\n</code></pre>\n\n<p>Now the error from the compiler. Line 29, the line with the printf.</p>\n\n<blockquote>\n  <p>error: macro \"BitMap_getMask\" passed 2 arguments, but takes just 1<br>\n      error: 'BitMap_getMask' undeclared (first use in this function)</p>\n</blockquote>\n\n<p>I'm working on a small library which will help me with bitwise operations. When trying to use a macro within another macro I am getting this error.</p>\n"}, {"tags": ["c", "benchmarking"], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1421927859, "post_id": 28088110, "comment_id": 44553180, "body": "(OT) Have you got any other interesting stories about the history of benchmarks? (other than what&#39;s in wikipedia). My first PC had a benchmark with Dhrystones and KWhetstones. I figured there was some sort of pun going on (dry - wet) but other than that it was just a bunch of numbers."}, {"owner": {"reputation": 4068, "user_id": 792589, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/863696978053d25d7e55920ebaa775d7?s=128&d=identicon&r=PG", "display_name": "aarelovich", "link": "https://stackoverflow.com/users/792589/aarelovich"}, "edited": false, "score": 0, "creation_date": 1421929064, "post_id": 28088110, "comment_id": 44553844, "body": "Ok, I understand now. So I can&#39;t compare DMIPS scores with different compilers. That explains it. I had actually found your page looking and found the the number that you provided for GCC where the same as mine. However I then found this guy: <a href=\"https://blog.fierydragonlord.com/index.php?/archives/5-Dhrystone-Running-a-25-year-old-benchmark-on-modern-hardware.html\" rel=\"nofollow noreferrer\">blog.fierydragonlord.com/index.php?/archives/&hellip;</a> That got the exact same DMIPS score on a slower i7. So according to you the difference is the compiler? (He did say he used a Visual Studio Compiler). By the way, thank you for your answer"}, {"owner": {"reputation": 4068, "user_id": 792589, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/863696978053d25d7e55920ebaa775d7?s=128&d=identicon&r=PG", "display_name": "aarelovich", "link": "https://stackoverflow.com/users/792589/aarelovich"}, "edited": false, "score": 0, "creation_date": 1421929525, "post_id": 28088110, "comment_id": 44554107, "body": "One last thing. One of the reasons I was trying to understand this benchmark is because I want to run it in a couple of different (very unknown, specific) microprocessors. However since they belong to two different companies and each provide their own version of gcc to compile for their microprocessor, comparing this benchmark would be invalid, right? Becuase they are essentially two different compilers..."}, {"owner": {"reputation": 1194, "user_id": 2099012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4150331e600852766b87df730ed2f7d9?s=128&d=identicon&r=PG", "display_name": "Roy Longbottom", "link": "https://stackoverflow.com/users/2099012/roy-longbottom"}, "edited": false, "score": 0, "creation_date": 1421929776, "post_id": 28088110, "comment_id": 44554261, "body": "You did not say which i7. I found that at least all single CPU benchmarks run at the Turbo Boost GHz. It is the Dhrystone 1 results that are similar to yours. Dhry 2 was produced as Dhry 1 could be over optimised."}, {"owner": {"reputation": 1194, "user_id": 2099012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4150331e600852766b87df730ed2f7d9?s=128&d=identicon&r=PG", "display_name": "Roy Longbottom", "link": "https://stackoverflow.com/users/2099012/roy-longbottom"}, "edited": false, "score": 0, "creation_date": 1421930035, "post_id": 28088110, "comment_id": 44554418, "body": "Not invalid but treated with care. If you run with all Opt levels, you can have more confidence."}, {"owner": {"reputation": 1194, "user_id": 2099012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4150331e600852766b87df730ed2f7d9?s=128&d=identicon&r=PG", "display_name": "Roy Longbottom", "link": "https://stackoverflow.com/users/2099012/roy-longbottom"}, "edited": false, "score": 0, "creation_date": 1421930176, "post_id": 28088110, "comment_id": 44554494, "body": "Matt - Whetstone came first with floating point. Dhrystone has no floating point, hence the pun Dhry."}, {"owner": {"reputation": 4068, "user_id": 792589, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/863696978053d25d7e55920ebaa775d7?s=128&d=identicon&r=PG", "display_name": "aarelovich", "link": "https://stackoverflow.com/users/792589/aarelovich"}, "edited": false, "score": 0, "creation_date": 1421932292, "post_id": 28088110, "comment_id": 44555782, "body": "My processor is an i7 3770 which runs at 3.4 GHz base. With level two optimization of Dhry2 I got 22977.5 which is very much like this score: Core i7 4820K 64b  Ub  $$$1  32659   8436   23607  8481 (from your webpage). The last two values are very similar to my first two values (optimized and non optimized)"}, {"owner": {"reputation": 4068, "user_id": 792589, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/863696978053d25d7e55920ebaa775d7?s=128&d=identicon&r=PG", "display_name": "aarelovich", "link": "https://stackoverflow.com/users/792589/aarelovich"}, "edited": false, "score": 0, "creation_date": 1421932409, "post_id": 28088110, "comment_id": 44555850, "body": "The difference is that the values you posted here seem to be for 32 bit compilation while I compile for 64 bits. Then the values match up, I think."}, {"owner": {"reputation": 1194, "user_id": 2099012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4150331e600852766b87df730ed2f7d9?s=128&d=identicon&r=PG", "display_name": "Roy Longbottom", "link": "https://stackoverflow.com/users/2099012/roy-longbottom"}, "edited": false, "score": 0, "creation_date": 1421933879, "post_id": 28088110, "comment_id": 44556768, "body": "3770 has the same Turbo Boost Speed  as 4820K at 3.9 GHz. I forgot to ask about 64 bit compilation and should have noticed."}, {"owner": {"reputation": 4068, "user_id": 792589, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/863696978053d25d7e55920ebaa775d7?s=128&d=identicon&r=PG", "display_name": "aarelovich", "link": "https://stackoverflow.com/users/792589/aarelovich"}, "reply_to_user": {"reputation": 1194, "user_id": 2099012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4150331e600852766b87df730ed2f7d9?s=128&d=identicon&r=PG", "display_name": "Roy Longbottom", "link": "https://stackoverflow.com/users/2099012/roy-longbottom"}, "edited": false, "score": 0, "creation_date": 1421934179, "post_id": 28088110, "comment_id": 44556978, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/69391/discussion-between-aarelovich-and-roy-longbottom\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 1194, "user_id": 2099012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4150331e600852766b87df730ed2f7d9?s=128&d=identicon&r=PG", "display_name": "Roy Longbottom", "link": "https://stackoverflow.com/users/2099012/roy-longbottom"}, "is_accepted": true, "score": 5, "last_activity_date": 1421927469, "creation_date": 1421927469, "answer_id": 28088110, "question_id": 28072939, "link": "https://stackoverflow.com/questions/28072939/interpreting-the-dhrystone-benchmark-results-on-modern-pc/28088110#28088110", "title": "Interpreting the Dhrystone Benchmark results on Modern PC", "body": "<p>Except with a broad brush treatment, you cannot compare benchmark results produced by different compilers. As the design authority of the first standard benchmark (Whetstone), I can advise that it even less safe to include comparisons with results from a computer manufacturer\u2019s in-house compiler. In minicomputer days, manufacturers found that sections of the Whetstone benchmark could be optimised out, to double the score. I arranged for changes and more detailed results to avoid and later highlight over optimisation.</p>\n\n<p>Below are example results on PCs from my original (1990\u2019s) Dhrystone Benchmarks. For details, more results and (free) execution and source files see:</p>\n\n<p><a href=\"http://www.roylongbottom.org.uk/dhrystone%20results.htm\" rel=\"noreferrer\">http://www.roylongbottom.org.uk/dhrystone%20results.htm</a></p>\n\n<p>Also included, and compiled from the same source code, are results from a later MS compiler and some via Linux and on Android, via ARM CPUs, plus one for an Intel Atom, via Houdini compatibility layer. I prefer the term VAX MIPS instead to DMIPS, as the 1757 divisor is the result on  DEC VAX 11/780. Anyway, MIPS/MHz calculations are also shown. Note differences due to compilers and the particularly low ratios on Android ARM CPUs.</p>\n\n<pre><code>                          Dhry1   Dhry1   Dhry2   Dhry2     Dhry2\n                            Opt   NoOpt     Opt   NoOpt       Opt\n                            VAX     VAX     VAX     VAX     MIPS/\nCPU                 MHz    MIPS    MIPS    MIPS    MIPS       MHz\n\nAMD 80386            40    17.5    4.32    13.7    4.53       0.3\n80486 DX2            66    45.1      12    35.3    12.4       0.5\nPentium             100     169    31.8     122    32.2       1.2\nPentium Pro         200     373    92.4     312    91.9       1.6\nPentium II          300     544     132     477     136       1.6\nPentium III         450     846     197     722     203       1.6\nPentium 4          1900    2593     261    2003     269       1.1\nAtom               1666    2600     772    1948     780       1.2\nAthlon 64          2211    5798    1348    4462    1312       2.0\nCore 2 Duo 1 CP    2400    7145    1198    6446    1251       2.7\nPhenom II 1 CP     3000    9462    2250    7615    2253       2.5\nCore i7 4820K      3900   14776    2006   11978    2014       3.1\n\nLater Intel Compiler\nPentium 4          1900    2613            1795               0.9\nAthlon 64          2211    6104            3720               1.7\nCore 2 Duo         2400    8094            5476               2.3\nPhenom II          3000    9768            6006               2.0\nCore i7 4820K      3900   15587           10347               2.7\n\nLinux Ubuntu GCC Compiler\nAtom               1666    5485    1198    2055    1194       1.2\nAthlon 64          2211    9034    2286    4580    2347       2.1\nCore 2 Duo         2400   13599    3428    5852    3348       2.4\nPhenom II          3000   13406    3368    6676    3470       2.2\nCore i7 4820K      3900   29277    7108   16356    7478       4.2\n\nARM Android NDK\n926EJ               800                     356     196       0.4\nv7-A9              1500                    1650     786       1.1\nv7-A15             1700                    3189    1504       1.9\n\nAtom Houdini       1866                    1840    1310       1.0\n</code></pre>\n"}], "owner": {"reputation": 4068, "user_id": 792589, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/863696978053d25d7e55920ebaa775d7?s=128&d=identicon&r=PG", "display_name": "aarelovich", "link": "https://stackoverflow.com/users/792589/aarelovich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2727, "favorite_count": 0, "accepted_answer_id": 28088110, "answer_count": 1, "score": 0, "last_activity_date": 1421927469, "creation_date": 1421860159, "last_edit_date": 1495540799, "question_id": 28072939, "link": "https://stackoverflow.com/questions/28072939/interpreting-the-dhrystone-benchmark-results-on-modern-pc", "title": "Interpreting the Dhrystone Benchmark results on Modern PC", "body": "<p>First I'll give a run down on what I did.</p>\n\n<p>I downloaded dhry.h dhry_1.c and dhry_2.c from here: \n<a href=\"http://giga.cps.unizar.es/~spd/src/other/dhry/\" rel=\"nofollow noreferrer\">http://giga.cps.unizar.es/~spd/src/other/dhry/</a></p>\n\n<p>Then I made some corrections (so that I would compile) according to this:</p>\n\n<p><a href=\"https://github.com/maximeh/buildroot/blob/master/package/dhrystone/dhrystone-2-HZ.patch\" rel=\"nofollow noreferrer\">https://github.com/maximeh/buildroot/blob/master/package/dhrystone/dhrystone-2-HZ.patch</a></p>\n\n<p>And this</p>\n\n<p><a href=\"https://stackoverflow.com/questions/9948508/errors-while-compiling-dhrystone-in-unix\">Errors while compiling dhrystone in unix</a></p>\n\n<p>I've compiled the files with the following command line:</p>\n\n<p>gcc dhry_1.c dhry_2.c -O2 -o run</p>\n\n<p>I finally entered the number of runs to be 1000000000</p>\n\n<p>And waited. I compiled with four different optimization levels and I got these values of DMIPS (According to <a href=\"http://en.wikipedia.org/wiki/Dhrystone\" rel=\"nofollow noreferrer\">http://en.wikipedia.org/wiki/Dhrystone</a> this is the Dhrystones per Second divided by 1757):</p>\n\n<p>O0: 8112 O1: 16823.9 O2: 22977.5  O3: 23164.5 (these represent the compiler flags like -O2 is optimization level two and O0 is none).</p>\n\n<p>This would give the following DMIPS/MHz (base frequency for my processor is 3.4 GHz):</p>\n\n<p>2.3859   4.9482   6.7581   6.8131</p>\n\n<p>However, I get the feelign tha 6.7 is way to low. According to what I've read an A15 has between 3.5 to 4 DMIPS/MHz and a third generation I7 only has double that? Shouldn't it be a lot higher?</p>\n\n<p>Can anyone tell me from my procedure if they can see that I might have done something wrong? Or maybe I'm interpretting the results incorrectly?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 4005, "user_id": 4200092, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/saOd8.png?s=128&g=1", "display_name": "GoBusto", "link": "https://stackoverflow.com/users/4200092/gobusto"}, "edited": false, "score": 5, "creation_date": 1421856387, "post_id": 28071664, "comment_id": 44522717, "body": "Use <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/toupper.html\" rel=\"nofollow noreferrer\"><code>toupper()</code></a> and <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/tolower.html\" rel=\"nofollow noreferrer\"><code>tolower()</code></a> and define <code>int main(int argc, char *argv[])</code> if you want to use <code>arc</code> and <code>argv</code>."}, {"owner": {"reputation": 83063, "user_id": 2310830, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P6rM1.png?s=128&g=1", "display_name": "RiggsFolly", "link": "https://stackoverflow.com/users/2310830/riggsfolly"}, "edited": false, "score": 0, "creation_date": 1421857999, "post_id": 28071664, "comment_id": 44523791, "body": "Dare I suggest doing your own homework?"}, {"owner": {"reputation": 25361, "user_id": 924299, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a142d1ec6b8444c9baf3ec6176e1cf61?s=128&d=identicon&r=PG&f=1", "display_name": "showdev", "link": "https://stackoverflow.com/users/924299/showdev"}, "edited": false, "score": 0, "creation_date": 1421862310, "post_id": 28071664, "comment_id": 44526430, "body": "What goes wrong with your code?"}], "answers": [{"comments": [{"owner": {"reputation": 54577, "user_id": 1339987, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/76aa5ba88e0d95b6480113239fe50008?s=128&d=identicon&r=PG", "display_name": "djechlin", "link": "https://stackoverflow.com/users/1339987/djechlin"}, "edited": false, "score": 0, "creation_date": 1421856798, "post_id": 28071807, "comment_id": 44523002, "body": "non-portable meaning to encodings other than ascii?"}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 54577, "user_id": 1339987, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/76aa5ba88e0d95b6480113239fe50008?s=128&d=identicon&r=PG", "display_name": "djechlin", "link": "https://stackoverflow.com/users/1339987/djechlin"}, "edited": false, "score": 0, "creation_date": 1421856857, "post_id": 28071807, "comment_id": 44523040, "body": "@AAA Yes, non-ASCII encodings use a different way of going from lower to upper case and back."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1421860251, "post_id": 28071807, "comment_id": 44525269, "body": "Minor point: <code>char ch = ... tolower(ch)</code> is UB should if <code>ch &lt; 0</code> and not <code>EOF</code>.  C11 &#167;7.4 1.  Certainly this is not the usual case and even then many <code>tolower()</code> gracefully handle it forcing -128 to -2 to 128 to 254. To be portable, do you think <code>tolower((unsigned char) ch)</code> (needed to prevent UB) is a practical necessity?"}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 4, "last_activity_date": 1421856700, "creation_date": 1421856700, "answer_id": 28071807, "question_id": 28071664, "link": "https://stackoverflow.com/questions/28071664/how-can-i-write-a-code-in-c-to-display-each-letter-of-a-word-in-both-upper-and-l/28071807#28071807", "title": "how can i write a code in C to display each letter of a word in both upper and lowercase?", "body": "<p>Your code is incorrect in several ways:</p>\n\n<ul>\n<li>Since you want to use <code>argc</code> and <code>argv</code>, you need to add them as parameters of <code>main</code>, and remove the call of <code>scanf</code></li>\n<li>You do not need nested loops for this - only one loop is sufficient</li>\n<li>If you take length of string with <code>strlen</code>, your loop should go from 0 to <code>len-1</code>, i.e. you should use <code>&lt;</code> or <code>!=</code>, not <code>&lt;=</code> in your loop condition</li>\n<li>You do not need to perform non-portable numeric manipulations on the characters; use <code>tolower</code> and <code>toupper</code> functions instead.</li>\n<li>Printing should be done character-by-character, not the whole string</li>\n</ul>\n\n<p>The body of your loop should looks something like this:</p>\n\n<pre><code>char ch = ... // Get i-th character of argv[1]\nprintf(\"%c%c\", tolower(ch), toupper(ch));\n</code></pre>\n\n<p>Print <code>\\n</code> after the loop to flush the buffer:</p>\n\n<pre><code>printf(\"\\n\");\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 217, "user_id": 4093612, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4f9cbeae9d2e0abda15591db7c45f92e?s=128&d=identicon&r=PG&f=1", "display_name": "arahan567", "link": "https://stackoverflow.com/users/4093612/arahan567"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421857467, "post_id": 28071968, "comment_id": 44523451, "body": "Here I mean to say it will print the characters as he expected. thank you iharob, i edited the post for readability"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1421857550, "post_id": 28071968, "comment_id": 44523517, "body": "Note what it says in <a href=\"http://stackoverflow.com/questions/204476/what-should-main-return-in-c-and-c/18721336#18721336\">What should <code>main()</code> return in C and C++</a>."}], "tags": [], "owner": {"reputation": 217, "user_id": 4093612, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4f9cbeae9d2e0abda15591db7c45f92e?s=128&d=identicon&r=PG&f=1", "display_name": "arahan567", "link": "https://stackoverflow.com/users/4093612/arahan567"}, "is_accepted": false, "score": 0, "last_activity_date": 1421857646, "last_edit_date": 1421857646, "creation_date": 1421857222, "answer_id": 28071968, "question_id": 28071664, "link": "https://stackoverflow.com/questions/28071664/how-can-i-write-a-code-in-c-to-display-each-letter-of-a-word-in-both-upper-and-l/28071968#28071968", "title": "how can i write a code in C to display each letter of a word in both upper and lowercase?", "body": "<p>Modify your program as below, You can obtain the output as you expected. The ascii range of capital letters is from 65 to 90 and for small letters it is 97 to 122. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nvoid main(){\nint i;\nint count;\nchar str [100];\n\nprintf(\"Enter a string\");\nscanf(\"%s\", str);\n\ncount = strlen(str);\nfor(i=0; i&lt;=count; i++){\n        printf(\"%c\", str[i]);      \n    if((str[i] &gt;= 97) &amp;&amp; (str[i] &lt;= 122)){  \n        str[i] = str[i] - 32;\n        printf(\"%c\", str[i]);\n    }\n        if ((str[i] &gt;= 65) &amp;&amp; (str[i] &lt;= 90)){\n            str[i] = str[i] +32;\n            printf(\"%c\", str[i]);\n        }\n}\n    getch();\n}\n</code></pre>\n\n<p>Input  : <code>NAME</code>\nOutput : <code>NnAaMmEe</code></p>\n"}, {"tags": [], "owner": {"reputation": 3923, "user_id": 3640699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NxDM0.jpg?s=128&g=1", "display_name": "Karthikeyan.R.S", "link": "https://stackoverflow.com/users/3640699/karthikeyan-r-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1421907251, "last_edit_date": 1421907251, "creation_date": 1421857632, "answer_id": 28072108, "question_id": 28071664, "link": "https://stackoverflow.com/questions/28071664/how-can-i-write-a-code-in-c-to-display-each-letter-of-a-word-in-both-upper-and-l/28072108#28072108", "title": "how can i write a code in C to display each letter of a word in both upper and lowercase?", "body": "<p>You can use the <code>toupper</code> and <code>tolower</code> functions for converting the values into lower and upper. Use another array to store that values.</p>\n\n<p>In loop,</p>\n\n<pre><code>for ( i=0 , j=0 ; i &lt; len ; i++) {\n      if ( isupper ( str[ i]) ) {\n           str1 [j++]= str [i] ;\n           str1 [j++]=tolower(str[i]);\n      }\n      else if ( islower (str [i ] ) ) {\n             str1[j++]= toupper (str[i]);\n             str1[j++ ]= str [i]; \n      }\n}\n</code></pre>\n\n<p>Then make sure that variables are declared.</p>\n"}], "owner": {"reputation": 49, "user_id": 4183388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14d24c798ffdbb493c1b53ecd5db501d?s=128&d=identicon&r=PG&f=1", "display_name": "HB3", "link": "https://stackoverflow.com/users/4183388/hb3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "closed_date": 1421864174, "answer_count": 3, "score": -1, "last_activity_date": 1421907251, "creation_date": 1421856269, "last_edit_date": 1421856357, "question_id": 28071664, "link": "https://stackoverflow.com/questions/28071664/how-can-i-write-a-code-in-c-to-display-each-letter-of-a-word-in-both-upper-and-l", "closed_reason": "Needs more focus", "title": "how can i write a code in C to display each letter of a word in both upper and lowercase?", "body": "<p>i.e. user inputs NAME (all in capital) and the code will print out NnAaMmEe.</p>\n\n<p>i want to use the function argv and args. this is the code so far</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n#include &lt;string.h&gt;\n\nvoid main(){\n    int i;\n    int count;\n    char str [100];\n\n    clrscr();\n\n    printf(\"Enter a string\");\n    scanf(\"%s\", str);\n\n    count = strlen(str);\n    for(i=0; i&lt;=count; i++){\n        if((str[i] &gt;= 97) &amp;&amp; (str[i] &lt;= 100)){\n            str[i] = str[i] - 32;\n        }\n        for(i=0; i&gt;=count; i++){\n            if ((str[i] &lt;97) &amp;&amp; (str[i] &gt;100)){\n                str[i] = str[i] +32;                \n            }\n        }\n        printf(\"%s\", str);\n        getch();\n    }\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 4, "creation_date": 1421856533, "post_id": 28071659, "comment_id": 44522831, "body": "Have you tried anything, anything?"}, {"owner": {"reputation": 17, "user_id": 4478566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f0fc7700bd801d7fba5c7b71f5fc093?s=128&d=identicon&r=PG&f=1", "display_name": "Akhil Vadrevu", "link": "https://stackoverflow.com/users/4478566/akhil-vadrevu"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421856762, "post_id": 28071659, "comment_id": 44522982, "body": "actually my complete program is to print the sum of the selected coefficients.. like 3c1+3c2=6.. i tried it using a new array to every new line with termination of a delimiter &#39;\\n&#39; but it is not getting done.."}, {"owner": {"reputation": 17, "user_id": 4478566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f0fc7700bd801d7fba5c7b71f5fc093?s=128&d=identicon&r=PG&f=1", "display_name": "Akhil Vadrevu", "link": "https://stackoverflow.com/users/4478566/akhil-vadrevu"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421857048, "post_id": 28071659, "comment_id": 44523161, "body": "i am passing new array to the function that returns the sum of the selected coefficients.. but my program needs sum of individual transition line to print as follows as 6 20 16.."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 2, "creation_date": 1421857100, "post_id": 28071659, "comment_id": 44523206, "body": "post the code please, and explain why it doesn&#39;t work."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421858366, "post_id": 28071659, "comment_id": 44524029, "body": "Click edit, copy the code and paste it, try to format it, indenting it properly so it&#39;s readable, blocks of code should be indented with for spaces, and then your own indentation is good."}], "answers": [{"tags": [], "owner": {"reputation": 886, "user_id": 2804342, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/QGVn9.jpg?s=128&g=1", "display_name": "Sudip Bhattarai", "link": "https://stackoverflow.com/users/2804342/sudip-bhattarai"}, "is_accepted": false, "score": 1, "last_activity_date": 1421859579, "creation_date": 1421859579, "answer_id": 28072749, "question_id": 28071659, "link": "https://stackoverflow.com/questions/28071659/how-to-store-this-kind-of-data-in-an-array/28072749#28072749", "title": "How to store this kind of data in an array", "body": "<p>If you make a structure like this you might be able to do what you are trying to do. You can pass structure to function to compute sum of each line.</p>\n\n<pre><code>struct pascaltirangle\n{\n  int size;          //The no of lines\n  int* no_transactions; //To store no of transactions of each line\n  int** contents;    //To store contents of each line. No of contents in line determined by transaction[i]\n} dat;\n\n//code to take input of size\n\ndat.no_transactions=(int*)malloc(sizeof(int) * (dat.size+1));\n\n//code to take no of transaction for each line\n\nfor(int i=0;i&lt;=dat.size;i++)\n    contents[i]=malloc(sizeof(int)*dat.no_transaction[i]);      \n\n//code to take input for contents[i][j] \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 886, "user_id": 2804342, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/QGVn9.jpg?s=128&g=1", "display_name": "Sudip Bhattarai", "link": "https://stackoverflow.com/users/2804342/sudip-bhattarai"}, "reply_to_user": {"reputation": 17, "user_id": 4478566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f0fc7700bd801d7fba5c7b71f5fc093?s=128&d=identicon&r=PG&f=1", "display_name": "Akhil Vadrevu", "link": "https://stackoverflow.com/users/4478566/akhil-vadrevu"}, "edited": false, "score": 0, "creation_date": 1422375726, "post_id": 28102045, "comment_id": 44719295, "body": "you can make a larger array and end the transactions for a line when user gives 0 as no, of transaction."}], "tags": [], "owner": {"reputation": 886, "user_id": 2804342, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/QGVn9.jpg?s=128&g=1", "display_name": "Sudip Bhattarai", "link": "https://stackoverflow.com/users/2804342/sudip-bhattarai"}, "is_accepted": true, "score": 0, "last_activity_date": 1421979489, "creation_date": 1421979489, "answer_id": 28102045, "question_id": 28071659, "link": "https://stackoverflow.com/questions/28071659/how-to-store-this-kind-of-data-in-an-array/28102045#28102045", "title": "How to store this kind of data in an array", "body": "<p>It simply adds all the transactions for a line using recursive function.</p>\n\n<pre><code> #include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nint add_transaction(int *contents,int size)\n{\n   if(!size)\n     return 0;\n   return (*contents + add_transaction(contents+1,size-1));\n\n}\n\nvoid main()\n{\n\n  int size;             //The no of lines\n  int* no_transaction;  //To store no of transactions of each line\n  int** contents;       //To store contents of each line. No of contents in line determined by transaction[i]\n\n  int c1,c2;\n  printf(\"Give size of triangle :\");\n  scanf(\"%d\",&amp;size);\n\n  no_transaction=(int*)malloc(sizeof(int) * (size+1));\n  contents=(int**)malloc(sizeof(int)*(size+1));\n  for(c1=0;c1&lt;=size;c1++)\n  {\n     printf(\"\\nGive no of transaction for line no %d :\",c1+1);\n     scanf(\"%d\",no_transaction+c1);\n     contents[c1]=(int*)malloc(sizeof(int)*no_transaction[c1]);\n     for(c2=0;c2&lt;no_transaction[c1];c2++)\n     {\n        printf(\"\\tFor line %d give transaction no %d :\",c1+1,c2+1);\n        scanf(\"%d\",contents[c1]+c2);\n     }\n  }\n  printf(\"\\nThe sum of the series is :\");\n  for(c1=0;c1&lt;=size;c1++)\n  {\n     if(c1)\n      printf(\"+ %d \",add_transaction(contents[c1],no_transaction[c1]));\n     else\n      printf(\" %d\",add_transaction(contents[c1],no_transaction[c1]));\n  }\n\n //Code to free the allocated memory.\n}\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 4478566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f0fc7700bd801d7fba5c7b71f5fc093?s=128&d=identicon&r=PG&f=1", "display_name": "Akhil Vadrevu", "link": "https://stackoverflow.com/users/4478566/akhil-vadrevu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 28102045, "answer_count": 2, "score": -1, "last_activity_date": 1421979489, "creation_date": 1421856257, "last_edit_date": 1421856476, "question_id": 28071659, "link": "https://stackoverflow.com/questions/28071659/how-to-store-this-kind-of-data-in-an-array", "title": "How to store this kind of data in an array", "body": "<p>The input consists of multiple lines.\nThe first line contains a number n which indicates that the number of rows in the Pascal\u2019s triangle will be n+1.\nThe second line contains a number m which indicates the number of transactions to be performed on the Pascal\u2019s triangle. Each transaction is given in a separate line. A transaction is a space separated list of integers. The first integer in each list indicates the row number, say R, and the rest of the integers in the list indicate the indices of values in row R. For each transaction, you have to compute the sum of given coefficients in the given row R.\nExample: Input will be given in the following format:\n</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>5\n3\n3 1 2\n5 1 1 1 4\n4 2 3 2\n</code></pre>\n\n<p>what should be done to store the values of transition lines like\n</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>3 1 2\n5 1 1 1 4\n4 2 3 2\n</code></pre>\n\n<p>under a single array variable.So that it can be passed to a function completely.    </p>\n"}, {"tags": ["c", "arrays", "sorting"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 3, "creation_date": 1421856180, "post_id": 28071593, "comment_id": 44522556, "body": "<i>I know how to perform some separate steps</i>, ok show what you know and where are you stuck, and I will be glad to help, as I&#39;m sure other SO users would."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1421856319, "post_id": 28071593, "comment_id": 44522666, "body": "1) Read. 2) Sort. Where is the problem?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1421857553, "post_id": 28071593, "comment_id": 44523521, "body": "I think you should start with one of the similar questions and adapt it for your own use, after all, they are all basically the same question, but hitting different problems."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1421859426, "post_id": 28071593, "comment_id": 44524781, "body": "1) <code>char buffer[256][256 + 2]</code>  2) call <code>fgets()</code> up to 256 times.  3) <code>qsort()</code>.  4) Print the lines."}, {"owner": {"reputation": 1244, "user_id": 4157407, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pJlVJ.jpg?s=128&g=1", "display_name": "Mikhail V", "link": "https://stackoverflow.com/users/4157407/mikhail-v"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421877680, "post_id": 28071593, "comment_id": 44534224, "body": "@iharob (and other) nice that you are glad to help, So I know that <code>char*</code> is just a byte array and I can compare each char just like an int. Would be easy to compare two strings. But I just found it hard to understand some sorting examples due to my lack of C syntax knowledge, especially pointer arithmetic."}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1421857757, "post_id": 28072141, "comment_id": 44523642, "body": "Better to use <code>fgets()</code>."}, {"owner": {"reputation": 23, "user_id": 4478274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1d9ae12259e1cb41adf11e0a24737f6?s=128&d=identicon&r=PG&f=1", "display_name": "Parul Setia", "link": "https://stackoverflow.com/users/4478274/parul-setia"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1421857907, "post_id": 28072141, "comment_id": 44523737, "body": "using fgets can be a problem because it picks &#39;\\n&#39; with it and can skip some further string. so you have to flush the &#39;\\n&#39;."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1421857938, "post_id": 28072141, "comment_id": 44523758, "body": "That is not a problem, it is a task. As for &quot;can skip further string&quot; would you prefer to break your buffer?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1421859193, "post_id": 28072141, "comment_id": 44524646, "body": "&quot;fscan will read your whole line till &#39;\\n&#39;&quot;  --&gt; no.  There is no single <code>fscanf()</code> call that will &quot;read your whole line till &#39;\\n&quot;.  Even <code>fscanf(&quot;%[^n]&quot;)</code> fails if the line begins with <code>&#39;\\n&#39;</code>.  Use <code>fgets()</code>."}, {"owner": {"reputation": 23, "user_id": 4478274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1d9ae12259e1cb41adf11e0a24737f6?s=128&d=identicon&r=PG&f=1", "display_name": "Parul Setia", "link": "https://stackoverflow.com/users/4478274/parul-setia"}, "edited": false, "score": 0, "creation_date": 1421862344, "post_id": 28072141, "comment_id": 44526451, "body": "FILE *fp; \tchar a[5][25]; \tint i=0; \tfp=fopen(&quot;abc.txt&quot;,&quot;r&quot;); \twhile(!feof(fp)){ \t\t \t\tfscanf(fp,&quot;%s&quot;,a[i]); \t \t\tprintf(&quot;%s\\n&quot;,a[i]); \t\ti++; \t}                                 it will read whole line but dont append &#39;\\n&#39; and fgets can append with it &#39;\\n&#39;"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1421865401, "post_id": 28072141, "comment_id": 44528002, "body": "<code>feof()</code> returns a nonzero value if there was an attempt to read past the end of a file. So <code>while(!feof(fp))</code> is incorrect. <i>&quot;For example, if a file contains 10 bytes and you read 10 bytes from the file, feof will return 0 because, even though the file pointer is at the end of the file, you have not attempted to read beyond the end. Only after you try to read an 11th byte will feof return a nonzero value.&quot;</i> <a href=\"https://msdn.microsoft.com/en-us/library/xssktc6e.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/xssktc6e.aspx</a>"}], "tags": [], "owner": {"reputation": 23, "user_id": 4478274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1d9ae12259e1cb41adf11e0a24737f6?s=128&d=identicon&r=PG&f=1", "display_name": "Parul Setia", "link": "https://stackoverflow.com/users/4478274/parul-setia"}, "is_accepted": false, "score": -2, "last_activity_date": 1421857710, "creation_date": 1421857710, "answer_id": 28072141, "question_id": 28071593, "link": "https://stackoverflow.com/questions/28071593/read-lines-from-a-file-and-create-alphabetically-sorted-array/28072141#28072141", "title": "Read lines from a file and create alphabetically sorted array", "body": "<p>Make a 2D char array\n try to read it by using fscanf function(sorry i cant remember the syntax).\nfscan will read your whole line till '\\n' but there should not be space\nand store each string in a row.\nthen sort it by comparaing the first index of each string</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1421860970, "post_id": 28072988, "comment_id": 44525694, "body": "Minor thoughts: 1) Max line <i>length</i> is 256, this usual requires additional buffer space for the <code>&#39;\\n&#39;</code> and <code>&#39;\\0&#39;</code>, 2) <code>words[i][strlen(words[i])-1]</code>  is a problem in rare situations when the line begins with an embedded <code>&#39;\\0&#39;</code> 3) interesting that code rolled its own sort rather than calling<code>qsort()</code>.  4) Initializing <code>words</code> is not needed - but not bad either."}, {"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1421861087, "post_id": 28072988, "comment_id": 44525770, "body": "@chux Also for eg if the buf size is <code>5</code> and the input is <code>1234</code> then <code>a[i][strlen(a[i]) -1] = &#39;\\0&#39;</code> should not be done right so I have the check in my code for the same"}], "tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": true, "score": 2, "last_activity_date": 1421860329, "creation_date": 1421860329, "answer_id": 28072988, "question_id": 28071593, "link": "https://stackoverflow.com/questions/28071593/read-lines-from-a-file-and-create-alphabetically-sorted-array/28072988#28072988", "title": "Read lines from a file and create alphabetically sorted array", "body": "<pre><code>The following cleanly compiles\nhowever, I have not tested it\n\nyou might want to modify it to get the file name from \nthe command line\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define MAX_ROWS (256)\n#define MAX_COLUMNS (256)\n#define FILE_NAME \"myInputFile\"\n\n// prototypes\nvoid bubbleSortWordsArray( int wordCount );\nvoid printWordsArray( int wordCount );\n\nstatic char words[MAX_ROWS][MAX_COLUMNS] = {{'\\0','\\0'}};\n\nint main(void)\n{\n    FILE *fp = NULL;\n\n    if( NULL == (fp = fopen( FILE_NAME, \"r\") ) )\n    {\n        perror( \"fopen failed\" );\n        exit( EXIT_FAILURE );\n    }\n\n    // implied else, fopen successful\n\n    // read each line from file into entry in words array\n    int i = 0;\n    while( fgets(words[i], MAX_COLUMNS, fp ) )\n    {\n        // remove trailing newline from string\n        words[i][strlen(words[i])-1] = '\\0';\n        i++;\n    }\n\n     // 'i' contains number of valid entries in words[][]\n    // sort the array of strings\n    bubbleSortWordsArray(i);\n\n    printWordsArray(i);\n\n    return(0);\n} // end function: main\n\n\nvoid bubbleSortWordsArray( int wordCount )\n{\n    int c;  // outer index through rows\n    int d;  // inner index through rows\n    char swap[MAX_COLUMNS] = {'\\0'};\n\n    for (c = 0 ; c &lt; ( wordCount - 1 ); c++)\n    {\n        for (d = 0 ; d &lt;  (wordCount - c - 1); d++)\n        {\n            if(  0 &gt; strcmp( words[d], words[d+1] ) )\n            { // then words need to be swapped\n                strcpy( swap, words[d]  );\n                strcpy( words[d], words[d+1]);\n                strcpy( words[d+1], swap );\n            } // end if compare/swap\n        } // end for\n    } // end for each row\n} // end function: bubbleSortWordsArray\n\n\nvoid printWordsArray( int wordCount )\n{\n    int i; // loop index\n\n    printf( \"\\n\" ); // start on new output line\n    for( i=0; i&lt;wordCount; i++ )\n    {\n        printf( \"%s\\n\", words[i] );\n    }\n} // end function: printWordsArray\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1421861287, "post_id": 28073185, "comment_id": 44525880, "body": "Comments I made <a href=\"http://stackoverflow.com/a/28072988/2410359\">here</a> mostly apply here too.  Should a line <i>not</i> fit <code>if(strlen(a[i]) &lt; 255)</code>, IMO, better to complain than proceed.  Else the split line will be sorted into maybe 2 locations.  Suggest insuring <code>i</code> does not exceed 255/6."}, {"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1421862588, "post_id": 28073185, "comment_id": 44526581, "body": "@chux Thanks for the inputs"}], "tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 3, "last_activity_date": 1421862555, "last_edit_date": 1421862555, "creation_date": 1421860925, "answer_id": 28073185, "question_id": 28071593, "link": "https://stackoverflow.com/questions/28071593/read-lines-from-a-file-and-create-alphabetically-sorted-array/28073185#28073185", "title": "Read lines from a file and create alphabetically sorted array", "body": "<p>Check the below code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include&lt;string.h&gt;\n\nint main(void) {\n    char a[256][256];\n    int i=0,j=0,k=0,n;\n\n    while(i&lt;256 &amp;&amp; fgets(a[i],256,stdin) != NULL)\n    {\n        n = strlen(a[i]);\n        if(n &gt;0 &amp;&amp; a[i][n-1] == '\\n')\n        a[i][n -1] = '\\0';\n        i++;\n    }\n\n    for(j=0;j&lt;i;j++)\n    {\n        char max[256];\n        strcpy(max,a[j]);\n        for(k=j+1;k&lt;i;k++)\n        {\n            if(strcmp(a[k],max) &lt; 0)\n            {\n                char tmp[256];\n                strcpy(tmp,a[k]);\n                strcpy(a[k],max);\n                strcpy(max,tmp);\n            }\n        }\n        strcpy(a[j],max);\n    }\n\n    for(j=0;j&lt;i;j++)\n    {\n        printf(\"%s\\n\",a[j]);\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1244, "user_id": 4157407, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pJlVJ.jpg?s=128&g=1", "display_name": "Mikhail V", "link": "https://stackoverflow.com/users/4157407/mikhail-v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8201, "favorite_count": 0, "accepted_answer_id": 28072988, "answer_count": 3, "score": 0, "last_activity_date": 1421862555, "creation_date": 1421856040, "question_id": 28071593, "link": "https://stackoverflow.com/questions/28071593/read-lines-from-a-file-and-create-alphabetically-sorted-array", "title": "Read lines from a file and create alphabetically sorted array", "body": "<p>I am learning C and I want to do this specific task. I know there is a number of similar questions and answers, but still... I will try to be more specific. Lets say, I have a file with following lines:</p>\n\n<pre><code>program01\nprograms\naprogram\n1program\nprog\n5program\n</code></pre>\n\n<p>And I want now an array with:</p>\n\n<pre><code>1program\n5program\naprogram\nprog\nprogram01\nprograms\n</code></pre>\n\n<p>So there are ONLY latin small letters and numbers in strings, no spaces. I know how to perform some separate steps, but want to get and feel the whole (and proper) concept, so to say. Probably it could make some sorting decisions on the fly when reading from file first? Manual sort is preferred for my particular case, just for the sake of better learning and possible optimisation. Lets say, maximal length of one line is 256, maximal number of lines is 256. Thanks in advance.</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 198, "user_id": 3577994, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/b57e421b03418199a3f198cb6fcb0508?s=128&d=identicon&r=PG&f=1", "display_name": "Crysis85", "link": "https://stackoverflow.com/users/3577994/crysis85"}, "edited": false, "score": 0, "creation_date": 1421855793, "post_id": 28071283, "comment_id": 44522256, "body": "Thanks guys, solved the problem and understood what caused it."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421855839, "post_id": 28071283, "comment_id": 44522299, "body": "I am glad, you can accept the answer that worked better for you."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1421855881, "post_id": 28071283, "comment_id": 44522326, "body": "Note: you can omit <code>struct TIMEOUT_LIST</code> and most of the {add,add_after,append} logic by using a pointer to pointer to <code>struct THE_NODE</code> as function argument."}], "answers": [{"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 2, "last_activity_date": 1421855336, "creation_date": 1421855336, "answer_id": 28071319, "question_id": 28071283, "link": "https://stackoverflow.com/questions/28071283/deferencing-pointer-to-incomplete-type-on-my-custom-list/28071319#28071319", "title": "deferencing pointer to incomplete type on my custom list", "body": "<p>This is wrong</p>\n\n<pre><code>struct time_node* temp;\n</code></pre>\n\n<p>it should be</p>\n\n<pre><code>struct TIME_NODE* temp;\n</code></pre>\n\n<p>but since you have <code>typedef</code>ed it, then this should be enough</p>\n\n<pre><code>time_node* temp;\n</code></pre>\n\n<p>and you should fix it in the <code>struct TIMEOUT_LIST</code> too.</p>\n\n<p>If you want either syntaxes to work then you have to use the same name for the struct and for the <code>typedef</code> like this</p>\n\n<pre><code>typedef struct time_node {\n    int timeout;\n    int seq_number;\n    struct time_node* next;\n} time_node;\n</code></pre>\n\n<p>and you can even do it this way</p>\n\n<pre><code>typedef struct time_node time_node;\nstruct time_node {\n    int timeout;\n    int seq_number;\n    time_node* next;\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9308, "user_id": 235700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31ab02b76dcfedbe47d2b7335a6277f3?s=128&d=identicon&r=PG", "display_name": "slugonamission", "link": "https://stackoverflow.com/users/235700/slugonamission"}, "is_accepted": false, "score": 1, "last_activity_date": 1421855390, "creation_date": 1421855390, "answer_id": 28071337, "question_id": 28071283, "link": "https://stackoverflow.com/questions/28071283/deferencing-pointer-to-incomplete-type-on-my-custom-list/28071337#28071337", "title": "deferencing pointer to incomplete type on my custom list", "body": "<pre><code>typedef struct TIME_NODE {\n    int timeout;\n    int seq_number;\n    struct time_node* next;\n} time_node;\n</code></pre>\n\n<p>That will create a struct type called <code>TIME_NODE</code> (which can be declared using <code>struct TIME_NODE</code>, and then typedefs it to <code>time_node</code>.</p>\n\n<p>You either need to declare the variable using the type <code>struct TIME_NODE*</code>, or <code>time_node*</code>.</p>\n"}], "owner": {"reputation": 198, "user_id": 3577994, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/b57e421b03418199a3f198cb6fcb0508?s=128&d=identicon&r=PG&f=1", "display_name": "Crysis85", "link": "https://stackoverflow.com/users/3577994/crysis85"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 28071319, "answer_count": 2, "score": 0, "last_activity_date": 1421855479, "creation_date": 1421855232, "question_id": 28071283, "link": "https://stackoverflow.com/questions/28071283/deferencing-pointer-to-incomplete-type-on-my-custom-list", "title": "deferencing pointer to incomplete type on my custom list", "body": "<p>I'm writing a custom list with some operations on it but i'm having trouble with the \"deferencing pointer to incomplete type error\"\nhere are the struct definitions:</p>\n\n<pre><code>typedef struct TIME_NODE {\n    int timeout;\n    int seq_number;\n    struct time_node* next;\n} time_node;\n\ntypedef struct TIMEOUT_LIST {\n    struct time_node* head;\n} timeout_list;\n</code></pre>\n\n<p>And here is one of the functions</p>\n\n<pre><code>void insert(timeout_list *l, int sequence_number, int timeout)\n{\n    int c=0;\n    struct time_node* temp;\n    temp = l-&gt;head;\n    if(temp==NULL)\n    {\n        add(sequence_number, timeout);\n    }\n    else\n    {\n        while(temp!=NULL)\n        {\n            if(temp-&gt;timeout &lt; timeout) {\n                c++;\n            }\n            temp = temp-&gt;next;\n        }\n        if(c==0)\n            add(sequence_number, timeout);\n        else if(c&lt;count())\n            add_after(sequence_number, timeout, ++c);\n        else\n            append(sequence_number, timeout);\n    }\n}\n</code></pre>\n\n<p>Why can't I deference temp?</p>\n"}, {"tags": ["c", "curl", "rtsp", "ip-camera", "mjpeg"], "comments": [{"owner": {"reputation": 7860, "user_id": 482864, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9ffc50d98e28398302c3a28040e8f63d?s=128&d=identicon&r=PG", "display_name": "soulseekah", "link": "https://stackoverflow.com/users/482864/soulseekah"}, "edited": false, "score": 0, "creation_date": 1422394474, "post_id": 28071231, "comment_id": 44729961, "body": "Would be nice to have a sample of the stream to look into."}], "answers": [{"tags": [], "owner": {"reputation": 629, "user_id": 347832, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c2623df5cb0a7b52dfbb61f46cb86aa7?s=128&d=identicon&r=PG", "display_name": "Manny", "link": "https://stackoverflow.com/users/347832/manny"}, "is_accepted": true, "score": 4, "last_activity_date": 1422445667, "creation_date": 1422445667, "answer_id": 28191519, "question_id": 28071231, "link": "https://stackoverflow.com/questions/28071231/constructing-a-jpeg-image-from-rtsp-mjpeg-stream/28191519#28191519", "title": "Constructing a JPEG image from RTSP MJPEG stream", "body": "<p>There were extra 0x0d in the data that I was getting from curl. All the extra 0x0d were before a 0x0a. I removed all the 0x0d that came before a 0x0a and then my algorithm worked fine. I figured this out by comparing the output of the data given by curl and wire shark. It seems like a bug in curl inserting extra characters. </p>\n"}], "owner": {"reputation": 629, "user_id": 347832, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c2623df5cb0a7b52dfbb61f46cb86aa7?s=128&d=identicon&r=PG", "display_name": "Manny", "link": "https://stackoverflow.com/users/347832/manny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3085, "favorite_count": 2, "accepted_answer_id": 28191519, "answer_count": 1, "score": 5, "last_activity_date": 1594285713, "creation_date": 1421855074, "last_edit_date": 1421984971, "question_id": 28071231, "link": "https://stackoverflow.com/questions/28071231/constructing-a-jpeg-image-from-rtsp-mjpeg-stream", "title": "Constructing a JPEG image from RTSP MJPEG stream", "body": "<p>I am trying to construct a JPEG image from the RTSP MJPEG stream of an IP Camera. I am using <a href=\"http://curl.haxx.se/\" rel=\"noreferrer\">CURL</a> to get the RTSP data and then I am following the <a href=\"https://tools.ietf.org/html/rfc2435#section-4.2\" rel=\"noreferrer\">RTP Payload Format for JPEG-compressed video RFC</a></p>\n\n<p>I have been successfully able to form JPEG images which do not have the Quantization Tables in them .However with Q of type 128, my algorithm is not able to correctly assemble the JPEG image. </p>\n\n<p>I know there are libraries like ffmpeg  and gstreamer that can perform this decoding but I can't use them because of some other issues. I have also looked at other posts and I think I am decoding the stream properly. But after JPEG decompression the image looks like this. The background image seems correct but with incorrect horizontal bands scattered over the picture.</p>\n\n<p><img src=\"https://i.stack.imgur.com/CG1PZ.png\" alt=\"Corrupted JPEG with Type 65 and Q 128 \"></p>\n\n<p>This is the code snippet I am using:</p>\n\n<pre><code>    while(!firstPacketFound) {\n        std::cout &lt;&lt;  \"-----------RTP Packet: \" &lt;&lt; index++ &lt;&lt; \" starting at \" &lt;&lt; startOfRTPPacketIterator &lt;&lt; \"---------\"&lt;&lt; endl;\n        isFirstPacket = false; isLastPacket = false;\n        // 0 - LibCurl header\n        // 1 - channel identifier\n        // 2, 3 - packet length\n        uint16_T packet_length_msb = f[ startOfRTPPacketIterator+2];\n        uint16_T packet_length_lsb = f[ startOfRTPPacketIterator+3];\n        packet_length = packet_length_msb &lt;&lt; 8 | packet_length_lsb;\n        std::cout &lt;&lt; \"Packet Size: \" &lt;&lt; packet_length &lt;&lt; endl;\n        // 4 - RTP Header - version + pasdding - generally 80\n        // 5 - Marker Bit + Payload  26 for JPEG\n        uint8_T rtp1 = f[ startOfRTPPacketIterator+4];\n        uint8_T payloadandmarkerbit = f[startOfRTPPacketIterator+5];\n        uint8_T markerbit =(payloadandmarkerbit &gt;&gt; 7) ;\n        uint8_T payload = payloadandmarkerbit &amp; 0x7F;\n        std::cout &lt;&lt; \"Marker byte : \" &lt;&lt; int(payloadandmarkerbit) &lt;&lt; endl;\n        if( payload != 26) {\n            cout &lt;&lt; \"NOT JPEG packet\" &lt;&lt; endl;\n        }\n        // 6 &amp; 7 - sequence \n        // 8, 9, 10,11 - timestamp\n        //12, 13, 14, 15 - ssrc\n        uint16_t sequenceNumber_m = f[ startOfRTPPacketIterator+6];\n        uint16_t sequenceNumber_l = f[ startOfRTPPacketIterator+7];\n        uint16_t sequenceNumber = (sequenceNumber_m &lt;&lt; 8) | sequenceNumber_l;\n        std::cout &lt;&lt; \"Sequence Number : \" &lt;&lt; sequenceNumber &lt;&lt;endl;\n\n        uint32_t timestamp1 = f[ startOfRTPPacketIterator+8];\n        uint32_t timestamp2 = f[ startOfRTPPacketIterator+9];\n        uint32_t timestamp3 = f[ startOfRTPPacketIterator+10];\n        uint32_t timestamp4 = f[ startOfRTPPacketIterator+11];\n        uint32_t timestamp = (timestamp1 &lt;&lt;24) | (timestamp2 &lt;&lt;16) | (timestamp3&lt;&lt;8) | timestamp4;\n         std::cout &lt;&lt; \"Timestamp : \" &lt;&lt; timestamp &lt;&lt;endl;\n\n        //--------------------JPEG Header ----------------------/\n        // 16 - type specific\n        // 17, 18, 19, - framgemnt offset\n        // 20 - type\n        // 21 - Q\n        // 22 - Width\n        //23- Height\n        uint32_t framgent_offset_1 = f[startOfRTPPacketIterator+17];\n        uint32_t framgent_offset_2 = f[startOfRTPPacketIterator+18];\n        uint32_t framgent_offset_3 = f[startOfRTPPacketIterator+19];\n        uint32_t framgent_offset = ((framgent_offset_1 &lt;&lt; 16) | (framgent_offset_2 &lt;&lt; 8) | (framgent_offset_3));\n        if (framgent_offset == 0)\n        {\n            isFirstPacket = true;\n        }\n\n        cout &lt;&lt; \"Fragment Offset: \" &lt;&lt; framgent_offset &lt;&lt;endl;\n        uint8_t type_specific = f[ startOfRTPPacketIterator+16];\n        cout &lt;&lt; \"type_specific: \" &lt;&lt; int(type_specific) &lt;&lt;endl;\n        uint8_t type = f[startOfRTPPacketIterator+20];\n        cout &lt;&lt; \"type : \" &lt;&lt; int(type) &lt;&lt;endl;\n        uint8_t Q = f[ startOfRTPPacketIterator+21];\n        cout &lt;&lt; \"Q: \" &lt;&lt; int(Q) &lt;&lt;endl;\n        uint8_t width = f[ startOfRTPPacketIterator+22];\n        cout &lt;&lt; \"width : \" &lt;&lt; int(width*8) &lt;&lt;endl;\n        uint8_t height = f[ startOfRTPPacketIterator+23];\n        cout &lt;&lt; \"height : \" &lt;&lt; int(height*8) &lt;&lt;endl;\n\n        // Check for restart markers\n        if ( type &gt; 63) {\n        // For 64-127, restart markers are present in the JPEG data\n        //------------------Restart Marker Header------------------/\n        // 24, 25 - restart interval\n        // 26, 27 - F+L+ Restart Count\n        uint16_T restart_interval_m = uint16_T(f[startOfRTPPacketIterator+24]);\n        uint16_T restart_interval_l = uint16_T(f[startOfRTPPacketIterator+25]);\n        restart_interval = (restart_interval_m &lt;&lt;8 ) | restart_interval_l;\n        uint16_T restart_count_m = uint16_T(f[startOfRTPPacketIterator+26]);\n        uint16_T restart_count_l = uint16_T(f[startOfRTPPacketIterator+27]);\n        uint16_T restart_count = ((restart_count_m &lt;&lt;8 ) | restart_count_l) &amp; 0x3F;\n\n\n        uint8_T F = restart_count_m  &gt;&gt; 7;\n        uint8_T L = (restart_count_m &amp; 0x40) &gt;&gt; 6;\n        cout &lt;&lt; \"restart_interval : \" &lt;&lt; restart_interval &lt;&lt;endl;\n        cout &lt;&lt; \"restart_count : \" &lt;&lt; restart_count &lt;&lt;endl;\n        cout &lt;&lt; \"F : \" &lt;&lt; int(F) &lt;&lt;endl;\n        cout &lt;&lt; \"L : \" &lt;&lt; int(L) &lt;&lt;endl;\n        }\n\n        //Check for quantization table in the first packet of the frame\n        if ( Q &gt; 127) {\n                        //--------------Quantization Header -----------------------/\n        // 28 - MBZ\n        // 29- Precision \n        // 30, 31 - length\n        // ...Quantization data\n        uint8_t MBZ = f[startOfRTPPacketIterator+28];\n        uint8_t precision = f[startOfRTPPacketIterator+29];\n        uint16_T qauntization_data_length = uint16_T(f[startOfRTPPacketIterator+30]) &lt;&lt; 8 | uint16_T(f[startOfRTPPacketIterator+31])  ;\n\n        cout &lt;&lt; \"MBZ : \" &lt;&lt; int(MBZ) &lt;&lt; endl;\n        cout &lt;&lt; \"precision : \" &lt;&lt; int(precision) &lt;&lt; endl;\n        cout &lt;&lt; \"qauntization_data_length : \" &lt;&lt; qauntization_data_length &lt;&lt; endl;\n        }\n\n        int indexOfPayload;\n        indexOfPayload = 28 ;\n\n\n\n\n       if (isFirstPacket) {\n           cout &lt;&lt; \"First packet found\" &lt;&lt; endl;\n           memcpy(lqt,&amp;f[startOfRTPPacketIterator+32],64);\n           memcpy(cqt,&amp;f[startOfRTPPacketIterator+32+65],64);\n           //  MakeTables(Q,lqt,cqt);\n           unsigned char * p = new unsigned char[3000];\n           int sizeOfHeaders =  MakeHeaders(p,type,width, height, lqt, cqt, restart_interval);\n           cout &lt;&lt; \"Size of headers:\"&lt;&lt; sizeOfHeaders &lt;&lt;endl;\n           jpegPayload.insert(jpegPayload.end(),p,p+sizeOfHeaders+1);\n           delete p;\n            indexOfPayload = 32 +128 ;\n\n       }\n         int laststartOfRTPPacketIterator = startOfRTPPacketIterator;\n          // Look for start of frame marker\n         std::vector&lt;uint8_t&gt;::iterator startOfRTPPacketIterator2;\n       // startOfRTPPacketIterator2 = std::find(f.begin() + startOfRTPPacketIterator +packet_length ,f.end(),0x24);\n         startOfRTPPacketIterator2 = std::search(f.begin() + startOfRTPPacketIterator +packet_length,f.end(),startOfStreamMarker.begin(),startOfStreamMarker.begin()+2);\n         startOfRTPPacketIterator = (int)std::distance(f.begin(),startOfRTPPacketIterator2);\n\n         cout &lt;&lt; \"Adding payload data\" &lt;&lt; endl;\n         cout &lt;&lt; \"Starting at \" &lt;&lt; (laststartOfRTPPacketIterator+indexOfPayload)  &lt;&lt; endl;\n         cout &lt;&lt; \"Ending at \" &lt;&lt; startOfRTPPacketIterator  &lt;&lt; endl;\n         cout &lt;&lt; \"Size of vector before : \" &lt;&lt;jpegPayload.size() &lt;&lt;endl;\n        // jpegPayload.reserve(framgent_offset);\n       jpegPayload.insert(jpegPayload.end(), &amp;f[laststartOfRTPPacketIterator+indexOfPayload], &amp;f[startOfRTPPacketIterator]);\n        cout &lt;&lt; \"Size of vector after : \" &lt;&lt;jpegPayload.size() &lt;&lt;endl;\n\n        if (markerbit) {\n            firstPacketFound = true;\n            cout &lt;&lt; \"Last packet found\" &lt;&lt; endl;\n            isLastPacket = true;\n\n            FILE * image = fopen(\"image.jpeg\",\"wb\");\n            fwrite(&amp;jpegPayload[0],sizeof(char), jpegPayload.size(), image);\n            fclose(image);            \n\n        }  \n</code></pre>\n\n<p>Any ideas what could be going wrong? </p>\n\n<ul>\n<li>I am copying the quantization tables from only the first RTP packet. This is what I interpreted from the RFC. Is that correct.</li>\n<li>Should I be using Fragment Offset field to construct my image or just keeping appending payload data till I hit the next packet.</li>\n<li>The packet exceeds beyond the length in Libcurl packet. Is that expected.</li>\n</ul>\n\n<p>Thanks!</p>\n\n<p><strong>UPDATE:</strong> I also noticed that the application that works uses UDP streaming, whereas I set transport to TCP -  <code>const char *transport = \"RTP/AVP/TCP;unicast;interleaved=0-1\";</code> </p>\n\n<p>Could that result in any differences? Do some cameras only support UDP and not TCP.</p>\n"}, {"tags": ["c", "performance", "c99", "c89"], "comments": [{"owner": {"reputation": 325, "user_id": 4464062, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0NUbW.png?s=128&g=1", "display_name": "Arashium", "link": "https://stackoverflow.com/users/4464062/arashium"}, "edited": false, "score": 1, "creation_date": 1421855007, "post_id": 28071126, "comment_id": 44521679, "body": "write you specific code and get a profile of it. if it doesnt make noticeable difference, dont mind it for that application."}, {"owner": {"reputation": 11220, "user_id": 2609288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3634e5c231c72e362f00ae39b637734f?s=128&d=identicon&r=PG", "display_name": "Baldrick", "link": "https://stackoverflow.com/users/2609288/baldrick"}, "edited": false, "score": 0, "creation_date": 1421855353, "post_id": 28071126, "comment_id": 44521927, "body": "I would expect that you only pay for what you use! Code which does not use VLAs would have no reason to perform differently. And for most purposes the performance difference due to VLAs would be insignificant. What would make more of a difference is which compiler you&#39;re using and how well it optimizes. It&#39;s quite possible that a C99 compiler, being more recent, might use more sophisticated optimization techniques. Or maybe not. If in doubt, write a simple test program, compile with 2 different compilers, and test it for yourself! :)"}], "answers": [{"tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 1, "last_activity_date": 1421855314, "creation_date": 1421855314, "answer_id": 28071309, "question_id": 28071126, "link": "https://stackoverflow.com/questions/28071126/performance-difference-between-c89-and-c99/28071309#28071309", "title": "Performance difference between C89 and C99", "body": "<p>Providing some new features in a language does not necessarily means that it will improve performance. VLAs are added to C language for creating small arrays on stack without wasting space. In C11, VLA is optional. </p>\n"}], "owner": {"reputation": 1292, "user_id": 978813, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/1NVf3.jpg?s=128&g=1", "display_name": "Dabloons", "link": "https://stackoverflow.com/users/978813/dabloons"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 311, "favorite_count": 0, "closed_date": 1421855426, "answer_count": 1, "score": -4, "last_activity_date": 1421855314, "creation_date": 1421854778, "question_id": 28071126, "link": "https://stackoverflow.com/questions/28071126/performance-difference-between-c89-and-c99", "closed_reason": "Needs more focus", "title": "Performance difference between C89 and C99", "body": "<p>Because C99 allows for things such as VLAs, does this actually cause a measurable performance difference?</p>\n"}, {"tags": ["c", "linux", "serial-port", "serial-communication"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 2, "creation_date": 1421854944, "post_id": 28071122, "comment_id": 44521631, "body": "Define <i><code>Not Working</code></i>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1421856593, "post_id": 28071122, "comment_id": 44522873, "body": "Couple of points. You send 1 character and expect 1 character back, but are not terminating the <code>buffer</code> where you treat the reply as a string. Next, if you have not enabled blocking mode, remember that at 9600 baud it will take at least 2 milliseconds to receive a reply, so on the call to <code>read()</code> you might get 0 characters waiting."}, {"owner": {"reputation": 13673, "user_id": 1599004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9d2a02744f666e97375e05fdc54255?s=128&d=identicon&r=PG", "display_name": "sawdust", "link": "https://stackoverflow.com/users/1599004/sawdust"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1421867806, "post_id": 28071122, "comment_id": 44529241, "body": "Your <code>read(...,&amp;buffer,...)</code> statement has pointer to a pointer for the second argument, but it should be just a pointer, i.e. <code>read(..., buffer,...)</code>.  And as @WeatherVane pointed out, once that character is stored in the correct buffer (or the <code>read()</code> simply returns), the code to print it is flawed.  Overall your program should be checking the return values from all syscalls, and during compile you should enable all warnings to catch issues like that bad <code>read()</code> statement."}, {"owner": {"reputation": 1, "user_id": 4478859, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cJL2YSqcYAs/AAAAAAAAAAI/AAAAAAAAAwE/_9c9qDmC23M/photo.jpg?sz=128", "display_name": "Gwendal Le Gorju", "link": "https://stackoverflow.com/users/4478859/gwendal-le-gorju"}, "edited": false, "score": 0, "creation_date": 1421918530, "post_id": 28071122, "comment_id": 44547826, "body": "Thanks for your fast response. I modified my code, like it was before I try a lot of thing. When I enable blocking mode the program stay in read mode."}, {"owner": {"reputation": 13673, "user_id": 1599004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9d2a02744f666e97375e05fdc54255?s=128&d=identicon&r=PG", "display_name": "sawdust", "link": "https://stackoverflow.com/users/1599004/sawdust"}, "edited": false, "score": 0, "creation_date": 1421964152, "post_id": 28071122, "comment_id": 44574670, "body": "Your code still has a serious problem/deficiency in properly checking the return codes from syscalls.   The read call will block when only one alpha character is received without any line termination, since the serial port is configured for canonical mode."}], "owner": {"reputation": 1, "user_id": 4478859, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cJL2YSqcYAs/AAAAAAAAAAI/AAAAAAAAAwE/_9c9qDmC23M/photo.jpg?sz=128", "display_name": "Gwendal Le Gorju", "link": "https://stackoverflow.com/users/4478859/gwendal-le-gorju"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1421920240, "creation_date": 1421854767, "last_edit_date": 1421920240, "question_id": 28071122, "link": "https://stackoverflow.com/questions/28071122/easyvr-serial-connection-c-linux", "title": "EasyVR serial connection C linux", "body": "<p>I'm working on an EasyVR device (voice recognition system) and trying to communicate with my computer using a serial connection. If I send a <code>b</code> I'm supposed to receive an <code>o</code>.</p>\n\n<p>I wrote a C program to do this and I'm able to send a <code>b</code>, but the <code>read</code> function  is not working.\nI saw with an oscilloscope that I'm sending the good caracter and I'm receiving an <code>o</code> too.\nI also tested with gtkterm and my EasyVR worked well.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;termios.h&gt;\n#include &lt;errno.h&gt;\n\nint main(void)\n{\n\nint port_serie;\nstruct termios options;\nint reception=1;\n/*char buffer[10];*/ char buffer ='m';\nchar data = 'b'; //message que tu veux envoyer\n\n\nport_serie = open(\"/dev/ttyUSB0\", O_RDWR | O_NOCTTY | O_NDELAY);//lecture et ecriture | pas controlling terminal | ne pas attendre DCD\n\n//cas d'erreur d'ouverture\nif(port_serie &lt; 0)\n{\n    perror(\"Erreur d'ouverture du port serie\");\n    exit(EXIT_FAILURE);\n}\n\nelse\n{\n    printf(\"Port serie numero %d bien ouvert. \\n\", port_serie);\n\n    //chargement des donn\u00e9es\n    tcgetattr(port_serie, &amp;options);\n    //9600 bauds\n    cfsetospeed(&amp;options, B9600);\n    cfsetispeed(&amp;options, B9600);\n    options.c_cflag |= (CLOCAL | CREAD );//programme propri\u00e9taire du port\n    //structure en 8N1 !!\n    options.c_cflag &amp;= ~PARENB; //pas de parit\u00e9\n    options.c_cflag &amp;= ~CSTOPB; // 1 bit de stop\n    options.c_cflag &amp;= ~CSIZE; //option a 0\n    options.c_cflag |= CS8; //8 bits\n    options.c_cflag &amp;= ~CRTSCTS;// pas de flow de controle\n    tcsetattr(port_serie, TCSANOW, &amp;options); //enregistrement des valeurs de configuration\n    printf(\"Configuration OK strcuture en 8N1 !. \\n\");\n    //while(buffer !='o'){\n        // Envoie de donnees.\n        printf(\"Envoie des donnees en cours ... \\n\");\n        if (write(port_serie,&amp;data, 1) &lt; 0){perror(\"ERROR\\n\");}\n        printf(\"Envoie Termine. \\n\");\n\n        // Lecture des donnees.\n        printf(\"Lecture des donnees en cours ... \\n\");\n        fcntl(port_serie,F_SETFL,1);//mode bloquant pour la fonction read() si aucun caractere dispo, programme attend\n        reception=read(port_serie,buffer,sizeof(buffer));\n        printf(\"message recu : %c\\n\",buffer);\n\n        if (reception == -1){\n        printf(\"Erreur lecture port serie\\n\");\n\n        printf(\"Reception finie.\\n\" );sleep(1);\n //}\n\n}\n\nclose(port_serie);//fermeture du port serie\n\nreturn 0;\n}\n</code></pre>\n\n<p>code edited : 01/22  10:50am</p>\n"}, {"tags": ["c", "linux", "shell", "compilation", "command"], "comments": [{"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1421854301, "post_id": 28070835, "comment_id": 44521136, "body": "You need to configure the coreutils source and then you can probably run <code>make printenv</code> (or similar). Try running <code>.&#47;configure</code>."}, {"owner": {"reputation": 335, "user_id": 1709234, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/34b2ff32606a73912699c37e68666c3b?s=128&d=identicon&r=PG", "display_name": "Greg", "link": "https://stackoverflow.com/users/1709234/greg"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1421854637, "post_id": 28070835, "comment_id": 44521407, "body": "@EtanReisner  Question.. I want to compile it locally. I dont want to recompile the system printenv command.      Also, : run : ./configure &amp;&amp; make printenv Result:   GEN      man/dynamic-deps.mk make: *** No rule to make target `printenv&#39;.  Stop."}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1421854804, "post_id": 28070835, "comment_id": 44521538, "body": "<code>make printenv</code> was a guess. That may not be the actual target. <code>make</code> by itself will almost certainly build it (as well as everything else). And this won&#39;t do anything to the normal system <code>printenv</code> unless you copy it to the wrong place or use something incorrect like <code>.&#47;configure --prefix=&#47;usr; make install</code> (don&#39;t do that)."}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1421855165, "post_id": 28070835, "comment_id": 44521796, "body": "Try <code>make src&#47;printenv</code> maybe."}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1421855501, "post_id": 28070835, "comment_id": 44522044, "body": "No <code>make src&#47;printenv</code> doesn&#39;t work. I just tried that and it fails horribly. coreutils doesn&#39;t appear to be set up in a sane and correct fashion (good job people). Just run <code>make</code> and deal with it building everything else."}, {"owner": {"reputation": 335, "user_id": 1709234, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/34b2ff32606a73912699c37e68666c3b?s=128&d=identicon&r=PG", "display_name": "Greg", "link": "https://stackoverflow.com/users/1709234/greg"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1421856038, "post_id": 28070835, "comment_id": 44522447, "body": "I cant run ./configure in guest mode or with a typical &quot;test&quot; user. It need sudoers permissions.   Ah, great! I have to recompile all the coreutils.. I ll try a virtual machine. fss   @EtanReisner"}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1421856905, "post_id": 28070835, "comment_id": 44523072, "body": "Running <code>.&#47;configure</code> should require <i>no</i> elevated permissions and in fact the configure script bails out and yells at you if you run it as root. Make sure you didn&#39;t extract the tarball as root or anything like that."}], "answers": [{"tags": [], "owner": {"reputation": 414, "user_id": 4369740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/465640e769a726efeeb7d16db1b01259?s=128&d=identicon&r=PG&f=1", "display_name": "tipaye", "link": "https://stackoverflow.com/users/4369740/tipaye"}, "is_accepted": false, "score": 0, "last_activity_date": 1421863984, "creation_date": 1421863984, "answer_id": 28074017, "question_id": 28070835, "link": "https://stackoverflow.com/questions/28070835/more-options-in-a-linux-command-and-compilation-error/28074017#28074017", "title": "More options in a Linux command and compilation error", "body": "<p>If you google \"printenv.c\" You'll find several versions of just that file, that you can compile and run with minimal jiggery-pokery.</p>\n\n<p>Example: \"<a href=\"http://www.opensource.apple.com/source/shell_cmds/shell_cmds-170/printenv/printenv.c\" rel=\"nofollow\">http://www.opensource.apple.com/source/shell_cmds/shell_cmds-170/printenv/printenv.c</a>\"</p>\n"}, {"tags": [], "owner": {"reputation": 335, "user_id": 1709234, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/34b2ff32606a73912699c37e68666c3b?s=128&d=identicon&r=PG", "display_name": "Greg", "link": "https://stackoverflow.com/users/1709234/greg"}, "is_accepted": true, "score": 0, "last_activity_date": 1422318104, "creation_date": 1422318104, "answer_id": 28161247, "question_id": 28070835, "link": "https://stackoverflow.com/questions/28070835/more-options-in-a-linux-command-and-compilation-error/28161247#28161247", "title": "More options in a Linux command and compilation error", "body": "<p><code>./configure &amp;&amp; make</code> (without sudo). It compiles every .c program locally.\nIt compiles only the .c files that have been changed, due to datestamp.</p>\n"}], "owner": {"reputation": 335, "user_id": 1709234, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/34b2ff32606a73912699c37e68666c3b?s=128&d=identicon&r=PG", "display_name": "Greg", "link": "https://stackoverflow.com/users/1709234/greg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 1, "accepted_answer_id": 28161247, "answer_count": 2, "score": 0, "last_activity_date": 1422318104, "creation_date": 1421854026, "last_edit_date": 1421854333, "question_id": 28070835, "link": "https://stackoverflow.com/questions/28070835/more-options-in-a-linux-command-and-compilation-error", "title": "More options in a Linux command and compilation error", "body": "<p>I am trying to add as option in the command <code>$ printenv</code> the command <code>date</code> .  e.g. if you try to run <code>$ printenv -d</code>  it should return the date output.</p>\n\n<p>I have the src code from the link <code>ftp://ftp.ntua.gr/pub/gnu/coreutils/coreutils-8.23.tar.xz</code> that contains all the coreutils in a linux distribution.</p>\n\n<p>I have already change the source code of src/printenv.c (this file is in the coreutils.tar file). But what is my next move ?</p>\n\n<p>I can not compile it with <code>gcc printenv.c</code>  </p>\n\n<pre><code>Compile error: fatal error: config.h: No such file or directory\ncompilation terminated.\n</code></pre>\n\n<p>Should I make the makefiles/configs etc  and install it manually? How? </p>\n\n<p>I post my changed code (printenv.c)</p>\n\n<pre><code>    /* printenv -- print all or part of environment\n   Copyright (C) 1989-2014 Free Software Foundation, Inc.\n\n   This program is free software: you can redistribute it and/or modify\n   it under the terms of the GNU General Public License as published by\n   the Free Software Foundation, either version 3 of the License, or\n   (at your option) any later version.\n\n   This program is distributed in the hope that it will be useful,\n   but WITHOUT ANY WARRANTY; without even the implied warranty of\n   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   GNU General Public License for more details.\n\n   You should have received a copy of the GNU General Public License\n   along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.  */\n\n/* Usage: printenv [variable...]\n\n   If no arguments are given, print the entire environment.\n   If one or more variable names are given, print the value of\n   each one that is set, and nothing for ones that are not set.\n\n   Exit status:\n   0 if all variables specified were found\n   1 if not\n   2 if some other error occurred\n\n   David MacKenzie and Richard Mlynarik */\n\n#include &lt;config.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;getopt.h&gt;\n\n#include \"system.h\"\n\n/* Exit status for syntax errors, etc.  */\nenum { PRINTENV_FAILURE = 2 };\n\n/* The official name of this program (e.g., no 'g' prefix).  */\n#define PROGRAM_NAME \"printenv\"\n\n#define AUTHORS \\\n  proper_name (\"David MacKenzie\"), \\\n  proper_name (\"Richard Mlynarik\")\n\nstatic struct option const longopts[] =\n{\n  {\"null\", no_argument, NULL, '0'},\n  {\"date\", required_argument, NULL, 'd'},\n  {GETOPT_HELP_OPTION_DECL},\n  {GETOPT_VERSION_OPTION_DECL},\n  {NULL, 0, NULL, 0}\n};\n\n/* Forward declarations.  */\nstatic void dateMachine (void);\n\nvoid\nusage (int status)\n{\n  if (status != EXIT_SUCCESS)\n    emit_try_help ();\n  else\n    {\n      printf (_(\"\\\nUsage: %s [OPTION]... [VARIABLE]...\\n\\\nPrint the values of the specified environment VARIABLE(s).\\n\\\nIf no VARIABLE is specified, print name and value pairs for them all.\\n\\\n\\n\\\n\"),\n              program_name);\n      fputs (_(\"\\\n  -0, --null     end each output line with NUL, not newline\\n\\\n\"), stdout);\n      fputs (HELP_OPTION_DESCRIPTION, stdout);\n      fputs (VERSION_OPTION_DESCRIPTION, stdout);\n      printf (USAGE_BUILTIN_WARNING, PROGRAM_NAME);\n      emit_ancillary_info ();\n    }\n  exit (status);\n}\n\nint\nmain (int argc, char **argv)\n{\n  char **env;\n  char *ep, *ap;\n  int i;\n  bool ok;\n  int optc;\n  bool opt_nul_terminate_output = false;\n\n  initialize_main (&amp;argc, &amp;argv);\n  set_program_name (argv[0]);\n  setlocale (LC_ALL, \"\");\n  bindtextdomain (PACKAGE, LOCALEDIR);\n  textdomain (PACKAGE);\n\n  initialize_exit_failure (PRINTENV_FAILURE);\n  atexit (close_stdout);\n\n  while ((optc = getopt_long (argc, argv, \"+iu:0d\", longopts, NULL)) != -1)\n    {\n      switch (optc)\n        {\n        case '0':\n          opt_nul_terminate_output = true;\n          break;\n        case 'd':\n          dateMachine ();\n          break;\n        case_GETOPT_HELP_CHAR;\n        case_GETOPT_VERSION_CHAR (PROGRAM_NAME, AUTHORS);\n        default:\n          usage (PRINTENV_FAILURE);\n        }\n    }\n\n  if (optind &gt;= argc)\n    {\n      for (env = environ; *env != NULL; ++env)\n        printf (\"%s%c\", *env, opt_nul_terminate_output ? '\\0' : '\\n');\n      ok = true;\n    }\n  else\n    {\n      int matches = 0;\n\n      for (i = optind; i &lt; argc; ++i)\n        {\n          bool matched = false;\n\n          /* 'printenv a=b' is silent, even if 'a=b=c' is in environ.  */\n          if (strchr (argv[i], '='))\n            continue;\n\n          for (env = environ; *env; ++env)\n            {\n              ep = *env;\n              ap = argv[i];\n              while (*ep != '\\0' &amp;&amp; *ap != '\\0' &amp;&amp; *ep++ == *ap++)\n                {\n                  if (*ep == '=' &amp;&amp; *ap == '\\0')\n                    {\n                      printf (\"%s%c\", ep + 1,\n                              opt_nul_terminate_output ? '\\0' : '\\n');\n                      matched = true;\n                      break;\n                    }\n                }\n            }\n\n          matches += matched;\n        }\n\n      ok = (matches == argc - optind);\n    }\n\n  exit (ok ? EXIT_SUCCESS : EXIT_FAILURE);\n}\n\nstatic void\ndateMachine (void)\n{\n    system(date);\n}\n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1421854131, "post_id": 28070669, "comment_id": 44520991, "body": "Not sure that I understand why you can&#39;t use <code>*((*(matrix+i))+j)</code> instead.  Why are you wanting to use this particular mapping function?"}, {"owner": {"reputation": 11, "user_id": 4478799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91476545df4770754da1d4cee74b830c?s=128&d=identicon&r=PG&f=1", "display_name": "Levi", "link": "https://stackoverflow.com/users/4478799/levi"}, "reply_to_user": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1421854558, "post_id": 28070669, "comment_id": 44521341, "body": "@RichardChambers It&#39;s because I&#39;m learning for my exam, it could be a question to explain why <code>*(matrix+Q*i+j)</code> seems equivalent but isn&#39;t and to adjust it so it does work."}, {"owner": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "edited": false, "score": 0, "creation_date": 1421855539, "post_id": 28070669, "comment_id": 44522077, "body": "@Levi Because <code>matrix</code>, <code>matrix[i]</code> and <code>matrix[i][j]</code> are three different types, thus incrementing each of them has completely different meaning."}, {"owner": {"reputation": 11, "user_id": 4478799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91476545df4770754da1d4cee74b830c?s=128&d=identicon&r=PG&f=1", "display_name": "Levi", "link": "https://stackoverflow.com/users/4478799/levi"}, "reply_to_user": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "edited": false, "score": 0, "creation_date": 1421856034, "post_id": 28070669, "comment_id": 44522441, "body": "@Let_Me_Be But I&#39;m trying to use pointer arithmetic on a 2D array. So I&#39;m always selecting the element on place (i,j) from the same matrix."}, {"owner": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "edited": false, "score": 1, "creation_date": 1421856298, "post_id": 28070669, "comment_id": 44522654, "body": "@Levi Yes, and that&#39;s why it doesn&#39;t work. Because the element of an 2D array is a 1D array. So for example by adding 1 to the array you are jumping Q elements."}, {"owner": {"reputation": 11, "user_id": 4478799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91476545df4770754da1d4cee74b830c?s=128&d=identicon&r=PG&f=1", "display_name": "Levi", "link": "https://stackoverflow.com/users/4478799/levi"}, "reply_to_user": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "edited": false, "score": 0, "creation_date": 1421856660, "post_id": 28070669, "comment_id": 44522908, "body": "@Let_Me_Be oh okay, so do you have any idea how you can add 1 without jumping Q elements? Would it help to use sizeof()?"}, {"owner": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "edited": false, "score": 0, "creation_date": 1421857016, "post_id": 28070669, "comment_id": 44523139, "body": "@Levi The second element in the array can be accessed: <code>*(matrix[0]+1)</code> or <code>*((*(matrix+0))+1)</code> or <code>*((*matrix)+1)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "edited": false, "score": 3, "creation_date": 1421854081, "post_id": 28070811, "comment_id": 44520939, "body": "2D flat arrays (like <code>int array[X][Y]</code>) are ALWAYS continuous"}, {"owner": {"reputation": 98, "user_id": 4474526, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FJiwe.png?s=128&g=1", "display_name": "JasonPap", "link": "https://stackoverflow.com/users/4474526/jasonpap"}, "reply_to_user": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "edited": false, "score": 0, "creation_date": 1421854249, "post_id": 28070811, "comment_id": 44521102, "body": "@ElderBug you&#39;re right, was talking about dynamically allocated arrays."}, {"owner": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "reply_to_user": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "edited": false, "score": 0, "creation_date": 1421854379, "post_id": 28070811, "comment_id": 44521192, "body": "@ElderBug Well, he is sort of correct. The standard mandates that 1D arrays are continuous. However a 2D array could theoretically have padding between the 1D blocks without breaking the standard. It would be weird, but it&#39;s possible."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "edited": false, "score": 1, "creation_date": 1421855308, "post_id": 28070811, "comment_id": 44521895, "body": "@Let_Me_Be <b>6.2.5 Types 20</b> <i>An array type describes a contiguously allocated nonempty set of objects with a particular member object type, called the element type</i>"}, {"owner": {"reputation": 11, "user_id": 4478799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91476545df4770754da1d4cee74b830c?s=128&d=identicon&r=PG&f=1", "display_name": "Levi", "link": "https://stackoverflow.com/users/4478799/levi"}, "edited": false, "score": 1, "creation_date": 1421855311, "post_id": 28070811, "comment_id": 44521897, "body": "Yes I&#39;m talking about static arrays, not dynamically allocated arrays."}, {"owner": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1421855438, "post_id": 28070811, "comment_id": 44521996, "body": "@BLUEPIXY Yup. But there is nothing mandating that the size of the 1D array is exactly N*element_size. So when the element type is the 1D array, the 1D array can contain a padding on the end."}, {"owner": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "reply_to_user": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "edited": false, "score": 2, "creation_date": 1421855490, "post_id": 28070811, "comment_id": 44522035, "body": "@Let_Me_Be A 2D array is a 1D array of 1D arrays. What you are saying is non-sense. Padding is unrelated to arrays, if there is padding, its part of the element size."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "edited": false, "score": 0, "creation_date": 1421855681, "post_id": 28070811, "comment_id": 44522179, "body": "@Let_Me_Be no, when T name[dim1][dim2], standard says object <code>T</code>(T is continuous.), not  means <code>T[dim2](1D Block)</code>."}, {"owner": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1421855863, "post_id": 28070811, "comment_id": 44522316, "body": "@BLUEPIXY What? But that&#39;s what I&#39;m saying. T is continuous array of 1D arrays. There is no space between the 1D arrays. What the standard doesn&#39;t mandate is that the 1D arrays take up precisely <code>N*sizeof(elem)</code> bytes."}, {"owner": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1421856047, "post_id": 28070811, "comment_id": 44522455, "body": "@BLUEPIXY It is generally irrelevant since using out-of bounds indices for arrays invokes undefined behaviour, so it doesn&#39;t matter how the sub-arrays are actually organized."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "edited": false, "score": 0, "creation_date": 1421856140, "post_id": 28070811, "comment_id": 44522522, "body": "@Let_Me_Be 1D-array even or even 2D-array are continuously  is T (in this case <code>int</code>). There is no gap between the int element."}, {"owner": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1421856265, "post_id": 28070811, "comment_id": 44522626, "body": "@BLUEPIXY The element of a 2D array is a 1D array, not T. Simply because there is no such thing as a 2D array in the standard. Every array is a 1D array of something."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "edited": false, "score": 0, "creation_date": 1421856622, "post_id": 28070811, "comment_id": 44522881, "body": "@Let_Me_Be Standard says array of T.  T is continuous. It is not to say that the change by dimension. Is it(your say <code>not T</code>) possible to show by  say  of standard?"}, {"owner": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1421856858, "post_id": 28070811, "comment_id": 44523042, "body": "@BLUEPIXY Christ. Say T is an array of 7 chars, padded to 8 bytes. T is continous. Array of T is continous, but there is one byte padding between each line."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "edited": false, "score": 0, "creation_date": 1421858979, "post_id": 28070811, "comment_id": 44524479, "body": "@Let_Me_Be <a href=\"http://ideone.com/4YEGv1\" rel=\"nofollow noreferrer\">TEST CODE</a>  If After the padding is present in the array sizeof (string [0]) must be the 8. functions like qsort if it comes to 8 will not work correctly."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1421867325, "post_id": 28070811, "comment_id": 44528969, "body": "I seem that One system may be exist  such as <code>sizieof (char [7])</code> become 8. However, it can not be used methods such as <code>sizeof(a) &#47; sizeof (*a)</code> to count the elements."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1421868305, "post_id": 28070811, "comment_id": 44529473, "body": "In other words it can be said continuous if  <code>sizeof (char [n]) == n(sizeof(type [n])==n*sizeof(type)</code> is true."}, {"owner": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1421868885, "post_id": 28070811, "comment_id": 44529806, "body": "@BLUEPIXY Yes. That is a reasonable assumption. However still not a guarantee. Btw. you cannot use qsort to sort multi-dimensional arrays. That violates strict aliasing."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "edited": false, "score": 0, "creation_date": 1421870048, "post_id": 28070811, "comment_id": 44530454, "body": "@Let_Me_Be <code>qsort</code> does not know whether it is multi-dimensional. BTW &quot;still not a guarantee&quot; What reason that is not a guarantee?"}, {"owner": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1421870249, "post_id": 28070811, "comment_id": 44530560, "body": "@BLUEPIXY And you don&#39;t know what strict aliasing is. However it turns out that this is actually a moot point, since strict aliasing would only be violated in C++, not in C."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "edited": false, "score": 0, "creation_date": 1421871519, "post_id": 28070811, "comment_id": 44531200, "body": "@Let_Me_Be  Does it exist boundary problem in the case of <code>int a[n][m];</code> ..<code>sizeof(a) == n*m*sizeof(int)</code> is true?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1421872361, "post_id": 28070811, "comment_id": 44531579, "body": "if the problem exists <code>int (*a)[m] = malloc (n * m * sizeof(int));</code>, it will cannot apply. but it can <code>int (*a)[m] = malloc (n * sizeof(*a));</code>"}], "tags": [], "owner": {"reputation": 98, "user_id": 4474526, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FJiwe.png?s=128&g=1", "display_name": "JasonPap", "link": "https://stackoverflow.com/users/4474526/jasonpap"}, "is_accepted": false, "score": -1, "last_activity_date": 1421854398, "last_edit_date": 1421854398, "creation_date": 1421853968, "answer_id": 28070811, "question_id": 28070669, "link": "https://stackoverflow.com/questions/28070669/storage-mapping-function-for-multi-array-in-c/28070811#28070811", "title": "storage mapping function for multi array in C", "body": "<p>2D C arrays are not always allocated on continuous memory blocks so you cant calculate the offset of their elements from just one pointer.</p>\n\n<p>EDIT: this is the case only for dynamically allocated arrays, as @ElderBug pointed out when arrays are declared like this:</p>\n\n<pre><code>int array[X][Y]\n</code></pre>\n\n<p>they are allocated to continuous memory blocks.</p>\n"}, {"comments": [{"owner": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "edited": false, "score": 0, "creation_date": 1421857299, "post_id": 28071918, "comment_id": 44523341, "body": "No, this code is invoking undefined behaviour. Access beyond valid indices of an array is not defined."}, {"owner": {"reputation": 940, "user_id": 2359982, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1ae5c8c1c0def133aa169ea926f72e68?s=128&d=identicon&r=PG", "display_name": "JBarberU", "link": "https://stackoverflow.com/users/2359982/jbarberu"}, "reply_to_user": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "edited": false, "score": 0, "creation_date": 1421858488, "post_id": 28071918, "comment_id": 44524116, "body": "Would you care to elaborate? The example above doesn&#39;t access beyond valid indices. It does however assume that the memory is allocated in P number of blocks with length Q (which the OP also seem to assume). The sources I found related to array memory allocation seemed to agree with that (none of them refuted it)."}, {"owner": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "edited": false, "score": 0, "creation_date": 1421858578, "post_id": 28071918, "comment_id": 44524171, "body": "No sub-array of matrix has indices upto Q*P-1. Just a side note, this code also breaks strict aliasing rules."}, {"owner": {"reputation": 940, "user_id": 2359982, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1ae5c8c1c0def133aa169ea926f72e68?s=128&d=identicon&r=PG", "display_name": "JBarberU", "link": "https://stackoverflow.com/users/2359982/jbarberu"}, "reply_to_user": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "edited": false, "score": 0, "creation_date": 1421859964, "post_id": 28071918, "comment_id": 44525118, "body": "And exactly where does the code access beyond Q*P-1?"}, {"owner": {"reputation": 940, "user_id": 2359982, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1ae5c8c1c0def133aa169ea926f72e68?s=128&d=identicon&r=PG", "display_name": "JBarberU", "link": "https://stackoverflow.com/users/2359982/jbarberu"}, "reply_to_user": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "edited": false, "score": 0, "creation_date": 1421867254, "post_id": 28071918, "comment_id": 44528931, "body": "I&#39;m also curious about the strict aliasing, gcc seems unable to catch it."}, {"owner": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "edited": false, "score": 0, "creation_date": 1421869405, "post_id": 28071918, "comment_id": 44530093, "body": "Hmm, interesting, it would seem that in C, pointers <code>int *</code> and <code>int **</code> would be considered compatible. So not breaking strict aliasing in C, but definitely in C++."}, {"owner": {"reputation": 940, "user_id": 2359982, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1ae5c8c1c0def133aa169ea926f72e68?s=128&d=identicon&r=PG", "display_name": "JBarberU", "link": "https://stackoverflow.com/users/2359982/jbarberu"}, "reply_to_user": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "edited": false, "score": 0, "creation_date": 1421872566, "post_id": 28071918, "comment_id": 44531665, "body": "Are you sure about that? GCC seems fine with it as C++ as well, in fact <code>int arr[P][Q]...</code> and <code>int arr[P*Q]...</code> generate the exact same assembler."}, {"owner": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "edited": false, "score": 0, "creation_date": 1421885806, "post_id": 28071918, "comment_id": 44537279, "body": "GCC is relatively lenient towards strict aliasing, but I&#39;m confident that <code>int*</code> and <code>int**</code> are incompatible types in C++. Also strict aliasing generally licks in when you are using some sort of loop construct (some variable that shouldn&#39;t have been get cached)."}], "tags": [], "owner": {"reputation": 940, "user_id": 2359982, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1ae5c8c1c0def133aa169ea926f72e68?s=128&d=identicon&r=PG", "display_name": "JBarberU", "link": "https://stackoverflow.com/users/2359982/jbarberu"}, "is_accepted": false, "score": 0, "last_activity_date": 1421862634, "last_edit_date": 1421862634, "creation_date": 1421857112, "answer_id": 28071918, "question_id": 28070669, "link": "https://stackoverflow.com/questions/28070669/storage-mapping-function-for-multi-array-in-c/28071918#28071918", "title": "storage mapping function for multi array in C", "body": "<p>In order to work with the matrix as a 1D array, you'll need to cast it to one.</p>\n\n<p>The following test program does the job:</p>\n\n<pre><code>#include &lt;assert.h&gt;\n\nint main(int argc, char** argv)\n{\n    #define P 7\n    #define Q 4\n    int matrix[P][Q] = {{ 1, 2, 3, 4}, { 5, 6, 7, 8},\n                        { 9,10,11,12}, {13,14,15,16},\n                        {17,18,19,20}, {21,22,23,24},\n                        {25,26,27,28}};\n\n    for (int i = 0; i &lt; P; ++i)\n    {\n        for (int j = 0; j &lt; Q; ++j)\n        {\n            int val_1d = *(((int*)matrix)+Q*i+j);\n            assert(matrix[i][j] == val_1d);\n        }\n    }\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 4478799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91476545df4770754da1d4cee74b830c?s=128&d=identicon&r=PG&f=1", "display_name": "Levi", "link": "https://stackoverflow.com/users/4478799/levi"}, "edited": false, "score": 0, "creation_date": 1421953155, "post_id": 28086364, "comment_id": 44569032, "body": "Your explanation sounded good to me, but when I tested it, I still got a random integer and not one from the matrix. It looks to me that there&#39;s no way to get the element by using only 1 time * and without [ ]."}, {"owner": {"reputation": 175, "user_id": 3565288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/984ca5cc225f3ab0fed12d890af35ef6?s=128&d=identicon&r=PG", "display_name": "Hideki", "link": "https://stackoverflow.com/users/3565288/hideki"}, "reply_to_user": {"reputation": 11, "user_id": 4478799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91476545df4770754da1d4cee74b830c?s=128&d=identicon&r=PG&f=1", "display_name": "Levi", "link": "https://stackoverflow.com/users/4478799/levi"}, "edited": false, "score": 0, "creation_date": 1421967435, "post_id": 28086364, "comment_id": 44575997, "body": "Try <code>for(i = 0; i &lt; P*Q; ++i) printf(&quot;%d\\n&quot;, *((int *)matrix + i));</code> This gives you the idea about how values in <code>matrix</code> are stored."}], "tags": [], "owner": {"reputation": 175, "user_id": 3565288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/984ca5cc225f3ab0fed12d890af35ef6?s=128&d=identicon&r=PG", "display_name": "Hideki", "link": "https://stackoverflow.com/users/3565288/hideki"}, "is_accepted": false, "score": 0, "last_activity_date": 1421922183, "creation_date": 1421922183, "answer_id": 28086364, "question_id": 28070669, "link": "https://stackoverflow.com/questions/28070669/storage-mapping-function-for-multi-array-in-c/28086364#28086364", "title": "storage mapping function for multi array in C", "body": "<pre><code>*(matrix+Q*i+j)    \n</code></pre>\n\n<p>is interpreted as  </p>\n\n<pre><code>matrix[Q*i+j]\n</code></pre>\n\n<p><code>matrix</code> is not a pointer to <code>int</code> but a pointer to <code>int[Q]</code>. You need to cast <code>matrix</code> to <code>int</code>.<br>\n<code>*((int*)matrix + Q*i + j)</code> should work.</p>\n"}], "owner": {"reputation": 11, "user_id": 4478799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91476545df4770754da1d4cee74b830c?s=128&d=identicon&r=PG&f=1", "display_name": "Levi", "link": "https://stackoverflow.com/users/4478799/levi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 832, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1421922183, "creation_date": 1421853637, "question_id": 28070669, "link": "https://stackoverflow.com/questions/28070669/storage-mapping-function-for-multi-array-in-c", "title": "storage mapping function for multi array in C", "body": "<p>When you have a two dimensional array like </p>\n\n<pre><code>int matrix[P][Q];\n</code></pre>\n\n<p>you can acces the element on place [i][j] be using one of these options:</p>\n\n<pre><code>matrix[i][j]\n*(matrix[i]+j)\n*((*(matrix+i))+j)\n</code></pre>\n\n<p>But I would like to acces the element by using a storage mapping function, I tried this</p>\n\n<pre><code>*(matrix+Q*i+j)\n</code></pre>\n\n<p>but this seems to give the location in the memory and not the element I want from the matrix. I think I'm pretty close but I can't figure out how to adjust this so it gives the result I want.</p>\n"}, {"tags": ["c", "string", "pointers"], "comments": [{"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1421853694, "post_id": 28070646, "comment_id": 44520666, "body": "Don&#39;t cast <code>malloc</code> in C. Also, you obviously are asking for the address of the <code>char *</code> by doing <code>&amp;string1</code> in the function call, which passes a <code>char **</code>."}, {"owner": {"reputation": 273, "user_id": 4241871, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ac6bbd0ae2234f23463a983f4d09d141?s=128&d=identicon&r=PG&f=1", "display_name": "Y&#237;u", "link": "https://stackoverflow.com/users/4241871/y%c3%adu"}, "reply_to_user": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1421854257, "post_id": 28070646, "comment_id": 44521109, "body": "Ah true. Can you explain why I should not use malloc here?"}, {"owner": {"reputation": 16571, "user_id": 2180189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0de29e70b63441baf6a99393f7ff2027?s=128&d=identicon&r=PG", "display_name": "MightyPork", "link": "https://stackoverflow.com/users/2180189/mightypork"}, "edited": false, "score": 0, "creation_date": 1421854454, "post_id": 28070646, "comment_id": 44521251, "body": "use malloc != cast malloc. Casting malloc is not needed and iirc it suppresses some kind of warning, but I&#39;m not exactly sure. It&#39;s discouraged."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1421854512, "post_id": 28070646, "comment_id": 44521303, "body": "@Y&#237;u You shouldn&#39;t <i>cast</i> the result from <code>malloc</code>, as it will make your code compile (and probably crash badly) if you forgot to include its header. (It&#39;s unnecessary to use too in this case, as you can just write <code>char string1[10];</code> and get rid of <code>free</code>)."}, {"owner": {"reputation": 273, "user_id": 4241871, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ac6bbd0ae2234f23463a983f4d09d141?s=128&d=identicon&r=PG&f=1", "display_name": "Y&#237;u", "link": "https://stackoverflow.com/users/4241871/y%c3%adu"}, "edited": false, "score": 0, "creation_date": 1421854842, "post_id": 28070646, "comment_id": 44521562, "body": "Hmm okay. But in this example I think casting malloc is okay as the program runs fine if I exclude the function /* and just printf my strings."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1421857675, "post_id": 28070646, "comment_id": 44523603, "body": "<a href=\"http://stackoverflow.com/a/605858/3233393\">Please don&#39;t cast the result of <code>malloc()</code> for the reasons herein listed</a>."}], "answers": [{"tags": [], "owner": {"reputation": 16571, "user_id": 2180189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0de29e70b63441baf6a99393f7ff2027?s=128&d=identicon&r=PG", "display_name": "MightyPork", "link": "https://stackoverflow.com/users/2180189/mightypork"}, "is_accepted": false, "score": 3, "last_activity_date": 1421854394, "last_edit_date": 1421854394, "creation_date": 1421853647, "answer_id": 28070674, "question_id": 28070646, "link": "https://stackoverflow.com/questions/28070646/passing-string-via-pointer-incompatible-argument/28070674#28070674", "title": "Passing string via pointer - incompatible argument", "body": "<p>You really want just</p>\n\n<pre><code>CopyStrings(string1, string2)\n</code></pre>\n\n<p>It's <code>char*</code> already, and you're making <code>char**</code> from it with the ampersand.</p>\n\n<p>Another problem is in your function - it should be:</p>\n\n<pre><code>char* CopyStrings(char* string1, char* string2)\n{\n    strcpy(string1, string2);\n    return string1;\n}\n</code></pre>\n\n<p>(if you want to return the first string).</p>\n"}, {"comments": [{"owner": {"reputation": 273, "user_id": 4241871, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ac6bbd0ae2234f23463a983f4d09d141?s=128&d=identicon&r=PG&f=1", "display_name": "Y&#237;u", "link": "https://stackoverflow.com/users/4241871/y%c3%adu"}, "edited": false, "score": 0, "creation_date": 1421854168, "post_id": 28070704, "comment_id": 44521014, "body": "Okay thanks. I&#39;ve changed that, but the program still crashes. :/"}], "tags": [], "owner": {"reputation": 11196, "user_id": 1079907, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/a7c69e39fbec2c781db5f27b40f63023?s=128&d=identicon&r=PG", "display_name": "Sunil Bojanapally", "link": "https://stackoverflow.com/users/1079907/sunil-bojanapally"}, "is_accepted": false, "score": 1, "last_activity_date": 1421857148, "last_edit_date": 1421857148, "creation_date": 1421853720, "answer_id": 28070704, "question_id": 28070646, "link": "https://stackoverflow.com/questions/28070646/passing-string-via-pointer-incompatible-argument/28070704#28070704", "title": "Passing string via pointer - incompatible argument", "body": "<p>Change </p>\n\n<p><code>CopyStrings(&amp;string1, &amp;string2)</code></p>\n\n<p>to</p>\n\n<p><code>CopyStrings(string1, string2)</code></p>\n\n<p><code>char* string1</code>, here <code>string1</code> is a pointer and when you pass address if pointer which is pointer to pointer, its not what you mean and formal arguments should be double pointers. Passing just the pointer is sufficient.</p>\n\n<p>The <code>CopyStrings()</code> function need to return a <code>char *</code> string after performing strcpy() to caller. Here is the modified <a href=\"http://ideone.com/RUFxQU\" rel=\"nofollow\">code</a>.  </p>\n"}, {"comments": [{"owner": {"reputation": 273, "user_id": 4241871, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ac6bbd0ae2234f23463a983f4d09d141?s=128&d=identicon&r=PG&f=1", "display_name": "Y&#237;u", "link": "https://stackoverflow.com/users/4241871/y%c3%adu"}, "edited": false, "score": 0, "creation_date": 1421874287, "post_id": 28073650, "comment_id": 44532512, "body": "Thanks for the help, appreciate. But since a char pointer is equal to an array it kinda does make sense to allocate memory for it - or am I wrong?"}, {"owner": {"reputation": 11196, "user_id": 1079907, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/a7c69e39fbec2c781db5f27b40f63023?s=128&d=identicon&r=PG", "display_name": "Sunil Bojanapally", "link": "https://stackoverflow.com/users/1079907/sunil-bojanapally"}, "reply_to_user": {"reputation": 273, "user_id": 4241871, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ac6bbd0ae2234f23463a983f4d09d141?s=128&d=identicon&r=PG&f=1", "display_name": "Y&#237;u", "link": "https://stackoverflow.com/users/4241871/y%c3%adu"}, "edited": false, "score": 0, "creation_date": 1421903643, "post_id": 28073650, "comment_id": 44541843, "body": "@Yiu you&#39;re right. Whether it is char array or pointer to char, memory allocation is must but first case can be compilation time and later one allocates at runtime."}], "tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": true, "score": 1, "last_activity_date": 1421862781, "last_edit_date": 1421862781, "creation_date": 1421862562, "answer_id": 28073650, "question_id": 28070646, "link": "https://stackoverflow.com/questions/28070646/passing-string-via-pointer-incompatible-argument/28073650#28073650", "title": "Passing string via pointer - incompatible argument", "body": "<p>There were several problems with the OPs code:</p>\n\n<p>In the following code, most of the problems are commented (and fixed)\nOne thing to know, in C, an array name degrades to the address of the array try to always pass pointer to array rather than the complete array the <code>%s</code> conversion operator is expecting the associated parameter to be the address of a char array.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\n// a function that gets 2 strings and copies the second one into the first one\n\n\nchar* CopyStrings(char* string1, char* string2)\n{\n  strcpy(string1, string2);\n  return string1; // return pointer to string1\n}\n\nint main()\n{\n  char* string1 = malloc(10);  // char is always 1 so no need for sizeof(char)\n  char* string2 = malloc(10);\n\n  strcpy(string1, \"ugabuga\");\n  strcpy(string2, \"mukaluka\");\n\n  printf(\"%s\\n\", CopyStrings(string1, string2));\n\n  free(string1);\n  free(string2);\n  return 0;\n} // end function: main\n</code></pre>\n"}], "owner": {"reputation": 273, "user_id": 4241871, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ac6bbd0ae2234f23463a983f4d09d141?s=128&d=identicon&r=PG&f=1", "display_name": "Y&#237;u", "link": "https://stackoverflow.com/users/4241871/y%c3%adu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 28073650, "answer_count": 3, "score": 1, "last_activity_date": 1421862781, "creation_date": 1421853559, "last_edit_date": 1421854328, "question_id": 28070646, "link": "https://stackoverflow.com/questions/28070646/passing-string-via-pointer-incompatible-argument", "title": "Passing string via pointer - incompatible argument", "body": "<p>I'm trying to pass two strings to a function that copies the second string into the first string. Get the error messages </p>\n\n<pre><code>\"passing arguement 1/2 of 'CopyStrings'from incompatible pointer type - line 25.\nnote: expected 'char*' but argument is of type 'char**' - line 8\n</code></pre>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\n// a function that gets 2 strings and copies the second one into the first one\n\n\nchar CopyStrings(char* string1, char* string2)\n{\n  strcpy(string1, string2);\n\n  return *string1;\n\n}\n\nint main()\n{\n  char* string1 = (char*)malloc(sizeof(char)*10);\n  char* string2 = (char*)malloc(sizeof(char)*10);\n\n  strcpy(string1, \"ugabuga\");\n  strcpy(string2, \"mukaluka\");\n\n\n  printf(\"%s\", CopyStrings(string1, string2));\n\n\n  free(string1);\n  free(string2);\n  return 0;\n\n}\n</code></pre>\n\n<p>Any suggestions what I messed up and how I write the pointers correctly?</p>\n\n<p>EDIT - Now that I changed </p>\n\n<pre><code>(&amp;string1, &amp;string2)\n</code></pre>\n\n<p>into</p>\n\n<pre><code>(string1, string2)\n</code></pre>\n\n<p>the program chrashes.</p>\n"}, {"tags": ["c", "switch-statement", "sdl"], "comments": [{"owner": {"reputation": 1570, "user_id": 2501921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba89206691a9b80f87abe01cebe4660c?s=128&d=identicon&r=PG", "display_name": "cmidi", "link": "https://stackoverflow.com/users/2501921/cmidi"}, "edited": false, "score": 0, "creation_date": 1421853478, "post_id": 28070524, "comment_id": 44520527, "body": "have you tried moving the declaration of variable <code>i</code> outside the case statements"}, {"owner": {"reputation": 18524, "user_id": 282474, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/IRn4g.png?s=128&g=1", "display_name": "Marlon", "link": "https://stackoverflow.com/users/282474/marlon"}, "edited": false, "score": 1, "creation_date": 1421853495, "post_id": 28070524, "comment_id": 44520539, "body": "<code>SDL_xxx</code> are probably const variables not macros, and those are not allowed to be used as case labels."}, {"owner": {"reputation": 1570, "user_id": 2501921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba89206691a9b80f87abe01cebe4660c?s=128&d=identicon&r=PG", "display_name": "cmidi", "link": "https://stackoverflow.com/users/2501921/cmidi"}, "edited": false, "score": 0, "creation_date": 1421853541, "post_id": 28070524, "comment_id": 44520568, "body": "<a href=\"http://stackoverflow.com/questions/92396/why-cant-variables-be-declared-in-a-switch-statement\" title=\"why cant variables be declared in a switch statement\">stackoverflow.com/questions/92396/&hellip;</a>"}, {"owner": {"reputation": 18524, "user_id": 282474, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/IRn4g.png?s=128&g=1", "display_name": "Marlon", "link": "https://stackoverflow.com/users/282474/marlon"}, "edited": false, "score": 0, "creation_date": 1421853574, "post_id": 28070524, "comment_id": 44520589, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/14069737/switch-case-error-case-label-does-not-reduce-to-an-integer-constant\">switch case: error: case label does not reduce to an integer constant</a>"}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "reply_to_user": {"reputation": 18524, "user_id": 282474, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/IRn4g.png?s=128&g=1", "display_name": "Marlon", "link": "https://stackoverflow.com/users/282474/marlon"}, "edited": false, "score": 0, "creation_date": 1421853583, "post_id": 28070524, "comment_id": 44520595, "body": "@Marlon: Huh? I would assume <code>SDL_Quit</code> is not an integer constant but maybe a function. But if it is an integer constant then of course it&#39;s valid as a case label."}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 1, "creation_date": 1421853614, "post_id": 28070524, "comment_id": 44520615, "body": "Perhaps that was supposed to be <code>SDL_QUIT</code>."}, {"owner": {"reputation": 311, "user_id": 4050448, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/rS5rd.png?s=128&g=1", "display_name": "Flo", "link": "https://stackoverflow.com/users/4050448/flo"}, "edited": false, "score": 0, "creation_date": 1421853721, "post_id": 28070524, "comment_id": 44520679, "body": "Indeed, it was only a fail on the SDL_Quit, SDL_QUIT resolved the problem.. Could you make an answer, to uprate it and agree as answer?"}], "answers": [{"tags": [], "owner": {"reputation": 11196, "user_id": 1079907, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/a7c69e39fbec2c781db5f27b40f63023?s=128&d=identicon&r=PG", "display_name": "Sunil Bojanapally", "link": "https://stackoverflow.com/users/1079907/sunil-bojanapally"}, "is_accepted": false, "score": 0, "last_activity_date": 1421853617, "creation_date": 1421853617, "answer_id": 28070663, "question_id": 28070524, "link": "https://stackoverflow.com/questions/28070524/c-error-case-label-does-not-reduce-to-an-integer-constant/28070663#28070663", "title": "c error: case label does not reduce to an integer constant", "body": "<p>Your <code>case</code> labels such as <code>SDL_Quit/SDL_MOUSEMOTION...</code> could not be integer constants. For example its valid if they are characters labels but not something like <code>const char *</code>  string literals which are not integer constants. </p>\n"}, {"comments": [{"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 1, "creation_date": 1421853701, "post_id": 28070679, "comment_id": 44520670, "body": "This is what I suspected (see my comments) but I&#39;m not familiar with SDL. Thanks for getting the right info for the answer."}], "tags": [], "owner": {"reputation": 940, "user_id": 2359982, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1ae5c8c1c0def133aa169ea926f72e68?s=128&d=identicon&r=PG", "display_name": "JBarberU", "link": "https://stackoverflow.com/users/2359982/jbarberu"}, "is_accepted": true, "score": 5, "last_activity_date": 1421853659, "creation_date": 1421853659, "answer_id": 28070679, "question_id": 28070524, "link": "https://stackoverflow.com/questions/28070524/c-error-case-label-does-not-reduce-to-an-integer-constant/28070679#28070679", "title": "c error: case label does not reduce to an integer constant", "body": "<p>You are using the function <code>void SDL_Quit(void)</code> rather than the <code>SDL_QUIT</code> event type at line 3.</p>\n\n<pre><code>case SDL_Quit:\n     ^^^^^^^^\n        for (int i=0;i&lt;NUMMENU;i++)\n            SDL_FreeSurface(menus[i]);\n        return 1;\n</code></pre>\n"}], "owner": {"reputation": 311, "user_id": 4050448, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/rS5rd.png?s=128&g=1", "display_name": "Flo", "link": "https://stackoverflow.com/users/4050448/flo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1469, "favorite_count": 0, "accepted_answer_id": 28070679, "answer_count": 2, "score": 0, "last_activity_date": 1421853659, "creation_date": 1421853178, "question_id": 28070524, "link": "https://stackoverflow.com/questions/28070524/c-error-case-label-does-not-reduce-to-an-integer-constant", "title": "c error: case label does not reduce to an integer constant", "body": "<p>This is the switch case concerned by the error:</p>\n\n<pre><code>switch(event.type)\n        {\n        case SDL_Quit:\n            for (int i=0;i&lt;NUMMENU;i++)\n                SDL_FreeSurface(menus[i]);\n            return 1;\n\n        case SDL_MOUSEMOTION:\n            x=event.motion.x;\n            y=event.motion.y;\n            for(int i=0;i&lt;NUMMENU;i++)\n            {\n                if(x&gt;=position[i].x &amp;&amp; x&lt;=position[i].x+position[i].w &amp;&amp; y&gt;=position[i].y &amp;&amp; y&lt;=position[i].y+position[i].h)\n                    {\n                    if(!selected[i])\n                    {\n                        selected[i]=1;\n                        SDL_FreeSurface(menus[i]);\n                        menus[i]=TTF_RenderText_Solid(font,labels[i],color[1]);\n                    }\n                }else{\n                        if(selected[i])\n                        {\n                            selected[i]=0;\n                            SDL_FreeSurface(menus[i]);\n                            menus[i]=TTF_RenderText_Solid(font,labels[i],color[0]);\n                        }\n                      }\n            }\n\n        case SDL_MOUSEBUTTONDOWN:\n            x=event.button.x;\n            y=event.button.y;\n            for(int i=0;i&lt;NUMMENU;i++)\n                if(x&gt;=position[1].x &amp;&amp; x&lt;=position[1].x+position[i].w &amp;&amp; y&gt;=position[i].y &amp;&amp; y&lt;=position[i].y+position[i].h)\n                {\n                    for(int j=0;j&lt;NUMMENU;j++)\n                        SDL_FreeSurface(menus[j]);\n                    return i;\n                }\n                break;\n        case SDL_KEYDOWN:\n            if(event.key.keysym.sym==SDLK_ESCAPE)\n            {\n                for(int i=0;i&lt;NUMMENU;i++)\n                    SDL_FreeSurface(menus[i]);\n                return 0;\n            }\n\n        }\n</code></pre>\n\n<p>I have this error and I haven't any idea of why and what should I do to resolve this. I have tried to add break; at the end of each case but no results.</p>\n\n<p>If you need more code or further information, I can give precisions.</p>\n\n<p>Regards,</p>\n"}, {"tags": ["c++", "c", "opengl", "sdl"], "comments": [{"owner": {"reputation": 6383, "user_id": 4371276, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/02ce728cefdf7fcbcff17ee06ad463db?s=128&d=identicon&r=PG&f=1", "display_name": "dmg", "link": "https://stackoverflow.com/users/4371276/dmg"}, "edited": false, "score": 1, "creation_date": 1421853344, "post_id": 28070460, "comment_id": 44520449, "body": "I&#39;m guessing events are coming in way slower that your main loop iterates?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1421853541, "post_id": 28070460, "comment_id": 44520571, "body": "Your computer probably has setting for the &quot;repeat rate&quot; of keys. That&#39;s your limit in the second case. (Even if it doesn&#39;t have a setting, your OS has a limited repeat rate.)"}, {"owner": {"reputation": 187, "user_id": 1561882, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sKpRY.jpg?s=128&g=1", "display_name": "Aabesh Karmacharya", "link": "https://stackoverflow.com/users/1561882/aabesh-karmacharya"}, "edited": false, "score": 0, "creation_date": 1421853623, "post_id": 28070460, "comment_id": 44520620, "body": "I used some <code>cout</code>s and noticed that the event poll loop runs only once while the main loop runs more than 5 times when a key is being pressed down. Is it a problem of the <code>pollevent</code> function ?"}, {"owner": {"reputation": 100228, "user_id": 150634, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9f438bc04462ee5af4132921a3474842?s=128&d=identicon&r=PG", "display_name": "Joseph Mansfield", "link": "https://stackoverflow.com/users/150634/joseph-mansfield"}, "edited": false, "score": 0, "creation_date": 1421853815, "post_id": 28070460, "comment_id": 44520729, "body": "@Elvisjames It&#39;s a problem with how you understand &quot;keydown&quot; - it doesn&#39;t mean &quot;the key is down&quot;, it means &quot;the key has transitioned to a down state&quot;. The OS usually fires this event repeatedly (with a delay) for the purpose of typing many characters by holding down the key."}], "answers": [{"tags": [], "owner": {"reputation": 351, "user_id": 4475293, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CijOD.jpg?s=128&g=1", "display_name": "Angivare", "link": "https://stackoverflow.com/users/4475293/angivare"}, "is_accepted": true, "score": 4, "last_activity_date": 1421868424, "last_edit_date": 1421868424, "creation_date": 1421853665, "answer_id": 28070682, "question_id": 28070460, "link": "https://stackoverflow.com/questions/28070460/why-does-the-function-in-the-event-polling-loop-trigger-less-frequently-than-the/28070682#28070682", "title": "Why does the function in the event polling loop trigger less frequently than the function outside it", "body": "<p>Your <code>keydown</code> event is simply <em>fired</em> less frequently than your game logic is updated.</p>\n\n<p>A common solution is to keep track of the keyboard's state.</p>\n\n<h2>SDL way</h2>\n\n<p>I suggest storing the  keyboard state as an array of booleans, which size is the number of keys you will check against, e.g. <code>bool[SDL_KEYLAST]</code>.\nSo you'll have to modify it whenever an event is fired. Finally, at each loop, check for the saved keyboard state.\nExample code:</p>\n\n<pre><code>handleInput()\n{\n    while(pollEvent(&amp;ev))\n    {\n        if(event.type = keydown)\n            ks[event.key.symbol] = true;\n        else if(event.type = keyup)\n            ks[event.key.symbol] = false;\n    }\n}\n\nupdate()\n{\n    if(ks[KEY_R]) cube.rotation += 0.05f;\n}\n</code></pre>\n\n<h2>SDL2 way</h2>\n\n<p><code>const Uint8* ks = SDL_GetKeyboardState(NULL)</code>.</p>\n\n<p>This function returns the keyboard state array, which is not a <code>bool[]</code> but a <code>Uint8[]</code> containing 0/1 values (so you can still check on false/true values).</p>\n\n<p>But also, you'll have to check against <code>SDL_Scancode</code> index values if you want to use that array, which are listed here: <a href=\"https://wiki.libsdl.org/SDL_Scancode\" rel=\"nofollow\">https://wiki.libsdl.org/SDL_Scancode</a></p>\n\n<pre><code>handleinput()\n{\n    //pump events so that SDL can update the keyboard state array...\n}\n\nupdate()\n{\n    const Uint8* ks = SDL_GetKeyboardState(NULL);\n    if(ks[SDL_SCANCODE_R]) cube.rotation += 0.05f;\n}\n</code></pre>\n\n<p>Reference: <a href=\"https://wiki.libsdl.org/SDL_GetKeyboardState\" rel=\"nofollow\">https://wiki.libsdl.org/SDL_GetKeyboardState</a></p>\n"}, {"tags": [], "owner": {"reputation": 244, "user_id": 2570209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uDzoM.jpg?s=128&g=1", "display_name": "TASagent", "link": "https://stackoverflow.com/users/2570209/tasagent"}, "is_accepted": false, "score": 0, "last_activity_date": 1421853712, "creation_date": 1421853712, "answer_id": 28070703, "question_id": 28070460, "link": "https://stackoverflow.com/questions/28070460/why-does-the-function-in-the-event-polling-loop-trigger-less-frequently-than-the/28070703#28070703", "title": "Why does the function in the event polling loop trigger less frequently than the function outside it", "body": "<p>dmg is likely correct.  </p>\n\n<p>Pollevent doesn't just iterate over a list of keys currently pressed, you're iterating over a list of events to handle, and it only gets updated at your repeat rate. You probably want to internally handle the state of the button, and toggle it on and off with the events, handling the rotation in the update (better separation of functionality, anyway).</p>\n"}], "owner": {"reputation": 187, "user_id": 1561882, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sKpRY.jpg?s=128&g=1", "display_name": "Aabesh Karmacharya", "link": "https://stackoverflow.com/users/1561882/aabesh-karmacharya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 405, "favorite_count": 0, "accepted_answer_id": 28070682, "answer_count": 2, "score": 2, "last_activity_date": 1421868424, "creation_date": 1421852981, "question_id": 28070460, "link": "https://stackoverflow.com/questions/28070460/why-does-the-function-in-the-event-polling-loop-trigger-less-frequently-than-the", "title": "Why does the function in the event polling loop trigger less frequently than the function outside it", "body": "<p>I have a cube that rotates by itself and one that rotates when a key is being pressed. The problem is that the one that rotates by itself always rotates faster(much faster) than the one that rotates only when a key is being pressed.</p>\n\n<pre><code>while(!quit())\n{\n  handleInput();\n  update();\n  render();\n}\n</code></pre>\n\n<p>When I put my rotation here:</p>\n\n<pre><code>update()\n{\n  cube.rotation += 0.09f;\n}\n</code></pre>\n\n<p>The cube rotates fast.<br>\nBut when i put it here:</p>\n\n<pre><code>handleinput()\n{\n   while(pollevent(&amp;event))\n   {\n      if(event.type == keydown)\n      {\n        if(event.key.symbol == KEY_r )\n        {\n           cube.rotation += 0.09f;\n        }\n      }\n   }\n</code></pre>\n\n<p>It is much slower. Though I assume that both should be getting called once each loop when the key is being held down.<br>\nAnd I don't know what this question must be tagged.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1421852770, "post_id": 28070379, "comment_id": 44520098, "body": "<code>exit(EXIT_FAILURE);</code> is often used at several points to fail the run of some program; there is no reason to have it once. And what clean-up do you want to do on failure?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1421852857, "post_id": 28070379, "comment_id": 44520147, "body": "The <code>exit</code> function doesn&#39;t exit or leave the function, it exits <i>the process</i>. When you call <code>exit</code> the whole program will end."}, {"owner": {"reputation": 6383, "user_id": 4371276, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/02ce728cefdf7fcbcff17ee06ad463db?s=128&d=identicon&r=PG&f=1", "display_name": "dmg", "link": "https://stackoverflow.com/users/4371276/dmg"}, "edited": false, "score": 0, "creation_date": 1421852891, "post_id": 28070379, "comment_id": 44520165, "body": "In C++ you can use <code>try</code> and <code>catch</code> and some exceptions. The C way uses errcodes which can encode information relevant to your program work-flow and the point of failure.."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1421852942, "post_id": 28070379, "comment_id": 44520194, "body": "Multiple exit points are fine (although <code>return</code> should always be preferred to <code>exit()</code>, even in <code>main()</code>), what&#39;s not however is that you need manual cleanup. Your objects should have destructors doing the job (cf RAII). What are they ?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1421853092, "post_id": 28070379, "comment_id": 44520286, "body": "@Quentin you are assuming that it&#39;s only c++ which is not necessarily true, in c++ you should worry less about cleanup at function exit points, but you could be using dynamic allocation too, so the destructor will no be called for every object, for example if your do <code>new char[size];</code> that might need cleanup."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 2, "creation_date": 1421853106, "post_id": 28070379, "comment_id": 44520295, "body": "Also, please choose a language and stick to it so we can answer. If you&#39;re curious about both, post two distinct questions."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421853206, "post_id": 28070379, "comment_id": 44520356, "body": "@iharob I originally didn&#39;t see the C tag \u2014 hence my above comment. My remark stands for C++ : if you allocate something dynamically, you should use <code>unique_ptr</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1421853318, "post_id": 28070379, "comment_id": 44520426, "body": "To be clear: Are you asking about several exit points - as in exit the program? or several return points - as in return from function call?"}, {"owner": {"reputation": 23, "user_id": 4471564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2ffc7c84f88357f37071503a4dc816d?s=128&d=identicon&r=PG&f=1", "display_name": "Claus", "link": "https://stackoverflow.com/users/4471564/claus"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1421853532, "post_id": 28070379, "comment_id": 44520562, "body": "@Quentin they were variables allocated in heap via <code>malloc()</code> and opened handles, depending on how far from the start was the return point some of them needed to be deallocated and closed."}, {"owner": {"reputation": 23, "user_id": 4471564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2ffc7c84f88357f37071503a4dc816d?s=128&d=identicon&r=PG&f=1", "display_name": "Claus", "link": "https://stackoverflow.com/users/4471564/claus"}, "edited": false, "score": 0, "creation_date": 1421853734, "post_id": 28070379, "comment_id": 44520688, "body": "Sorry everyone for the confusing question, they were return points from a function. I edited it and also selected only C as language since that&#39;s the language of the code I had."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1421853802, "post_id": 28070379, "comment_id": 44520723, "body": "@Claus My point is : in C++, anything needing cleanup should be, use or be wrapped into an object implementing RAII. Edit : well that doesn&#39;t stand for C of course, just keep it in mind just in case ;)"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1421863645, "post_id": 28070379, "comment_id": 44527117, "body": "the reality is code should be clear, maintainable, structured and easily followed.  the goto statement obliterates those principles.  in the long run, the do { ... } while( false );  is the best option for the kind of logic given by the OP."}], "answers": [{"comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 3, "creation_date": 1421852859, "post_id": 28070405, "comment_id": 44520148, "body": "I know that many will downvote this answer, but don&#39;t be irrational about <code>goto</code>, if <code>goto</code> wasn&#39;t useful, why it&#39;s still in the language?"}, {"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 0, "creation_date": 1421852984, "post_id": 28070405, "comment_id": 44520225, "body": "because the latest C standard came on 98. people still used that at the time. also , because C is close to Assembly , it still contains many Assembly elements, that doesn&#39;t make them useful."}, {"owner": {"reputation": 655, "user_id": 1056303, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b08c0819e5dd2803c2bb65501e64e660?s=128&d=identicon&r=PG&f=1", "display_name": "mhl", "link": "https://stackoverflow.com/users/1056303/mhl"}, "edited": false, "score": 6, "creation_date": 1421853146, "post_id": 28070405, "comment_id": 44520319, "body": "Actually the latest C standard is C11"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 2, "creation_date": 1421853228, "post_id": 28070405, "comment_id": 44520367, "body": "@user3613500 you blindly believe that this code is wrong because of the use of <code>goto</code> but I have seen some of the best open source projects use this technique, and it&#39;s so clean and easy to follow that it would be a shame if the <code>goto</code> was removed from c."}, {"owner": {"reputation": 6383, "user_id": 4371276, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/02ce728cefdf7fcbcff17ee06ad463db?s=128&d=identicon&r=PG&f=1", "display_name": "dmg", "link": "https://stackoverflow.com/users/4371276/dmg"}, "edited": false, "score": 0, "creation_date": 1421853233, "post_id": 28070405, "comment_id": 44520370, "body": "@user2079303 The only reason it&#39;s not deprecated is compatibility. Code from the last century still uses <code>goto</code>."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 6383, "user_id": 4371276, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/02ce728cefdf7fcbcff17ee06ad463db?s=128&d=identicon&r=PG&f=1", "display_name": "dmg", "link": "https://stackoverflow.com/users/4371276/dmg"}, "edited": false, "score": 0, "creation_date": 1421853350, "post_id": 28070405, "comment_id": 44520454, "body": "@dmg, sorry I removed my comment since I hadn&#39;t noticed that user3613500 claimed C98 to be the latest version which made my comment sound silly. But on the topic of my deleted comment, deprecation does not affect compatibility."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 2, "creation_date": 1421853599, "post_id": 28070405, "comment_id": 44520604, "body": "This is perfectly fine and idiomatic error handling in C. Just be ready to move this answer if OP decides to switch this question to C++ ;)"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 2, "creation_date": 1421853682, "post_id": 28070405, "comment_id": 44520660, "body": "@Quentin I am ready, if the OP picks C++ i will remove it... Also I am expecting more downvotes, I can&#39;t understand how &quot;<i>programmers</i>&quot; can believe in <code>goto</code> as a bad thing without reasoning about it..."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1421853882, "post_id": 28070405, "comment_id": 44520778, "body": "@Quentin now the <code>try</code>/<code>catch</code> thing is not a good answer, the OP picked c."}, {"owner": {"reputation": 2743, "user_id": 2554810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bcabfe7eb829de8fb40e2f3d1719128?s=128&d=identicon&r=PG", "display_name": "IllusiveBrian", "link": "https://stackoverflow.com/users/2554810/illusivebrian"}, "edited": false, "score": 4, "creation_date": 1421853959, "post_id": 28070405, "comment_id": 44520841, "body": "@iharob Despite my earlier comment I upvoted your answer, this is probably the only situation I would say using <code>goto</code> is acceptable (so long as the label&#39;s name was a bit more descriptive).  I think people just have a knee-jerk reaction to it since they either have had to use it for everything at some point in the past or who/whatever taught them to code railed against it and pointed out all the flaws."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 2, "creation_date": 1421854124, "post_id": 28070405, "comment_id": 44520984, "body": "@iharob The C answer stands ! Well, I don&#39;t understand either. It&#39;s kind of a vicious circle where people are taught that <code>goto</code> is useless and dangerous, then repeat it to you and prove it by using it wrong. It&#39;s like banning scissors as lethal and proving your point by trying to remove one of your teeth with them."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 2743, "user_id": 2554810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bcabfe7eb829de8fb40e2f3d1719128?s=128&d=identicon&r=PG", "display_name": "IllusiveBrian", "link": "https://stackoverflow.com/users/2554810/illusivebrian"}, "edited": false, "score": 0, "creation_date": 1421854127, "post_id": 28070405, "comment_id": 44520987, "body": "@Namfuak yes I know, or they all read the title of <i><code>Go To Statement Considered Harmful</code></i> by Edsger Dijkstra, without even reading why."}, {"owner": {"reputation": 23, "user_id": 4471564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2ffc7c84f88357f37071503a4dc816d?s=128&d=identicon&r=PG&f=1", "display_name": "Claus", "link": "https://stackoverflow.com/users/4471564/claus"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1421854509, "post_id": 28070405, "comment_id": 44521300, "body": "@Quentin I was one of those persons taught not to use <code>goto</code> no matter what."}, {"owner": {"reputation": 23, "user_id": 4471564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2ffc7c84f88357f37071503a4dc816d?s=128&d=identicon&r=PG&f=1", "display_name": "Claus", "link": "https://stackoverflow.com/users/4471564/claus"}, "edited": false, "score": 1, "creation_date": 1421854536, "post_id": 28070405, "comment_id": 44521325, "body": "So using a <code>goto cleanup;</code> for example would be a better choice than the awkward <code>do { ... break; ... break; ... } while (false);</code> right?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 23, "user_id": 4471564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2ffc7c84f88357f37071503a4dc816d?s=128&d=identicon&r=PG&f=1", "display_name": "Claus", "link": "https://stackoverflow.com/users/4471564/claus"}, "edited": false, "score": 0, "creation_date": 1421854558, "post_id": 28070405, "comment_id": 44521342, "body": "@Claus I think it&#39;s easier to follow and read, and maintain too, but that is my opinion which might be wrong of course. Oh, BTW, good choice for the label name."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 23, "user_id": 4471564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2ffc7c84f88357f37071503a4dc816d?s=128&d=identicon&r=PG&f=1", "display_name": "Claus", "link": "https://stackoverflow.com/users/4471564/claus"}, "edited": false, "score": 0, "creation_date": 1421854800, "post_id": 28070405, "comment_id": 44521535, "body": "@Claus I see you are new to SO, did you take the <a href=\"http://stackoverflow.com/tour\">tour</a>?"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 23, "user_id": 4471564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2ffc7c84f88357f37071503a4dc816d?s=128&d=identicon&r=PG&f=1", "display_name": "Claus", "link": "https://stackoverflow.com/users/4471564/claus"}, "edited": false, "score": 1, "creation_date": 1421854841, "post_id": 28070405, "comment_id": 44521560, "body": "@Claus well you want to jump. What do you use, the jump instruction, or a degenerate looping instruction, that doesn&#39;t actually loop because you want to bend it into a jump instruction ? The fact that you qualify the latter as &quot;awkward&quot; should be a hint."}, {"owner": {"reputation": 23, "user_id": 4471564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2ffc7c84f88357f37071503a4dc816d?s=128&d=identicon&r=PG&f=1", "display_name": "Claus", "link": "https://stackoverflow.com/users/4471564/claus"}, "edited": false, "score": 0, "creation_date": 1421855009, "post_id": 28070405, "comment_id": 44521681, "body": "@iharob Yes, I registered a couple of days ago and I took the tour at that time, read about the no discussion just questions and answers as well. But these days going through some sites this one still seemed the better one to make the question."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1421855071, "post_id": 28070405, "comment_id": 44521722, "body": "In fact I believe that your question was really good, just that there are many answers to it. BTW, the <code>do { ... } while (0)</code> is useful for writing macros sometimes."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1421855148, "post_id": 28070405, "comment_id": 44521781, "body": "@iharob yes, but for another reason altogether (not screwing up the syntax if the macro spans several instructions)."}, {"owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "edited": false, "score": 0, "creation_date": 1421856987, "post_id": 28070405, "comment_id": 44523122, "body": "You could use two labels to show how <code>goto</code> can help with several cleanups (something along <code>close_file: if(fclose(file)) { ... }; free_mem: free(foo); return error_code;</code>). That can&#39;t be achieved with <code>break</code>ing from a pseudo-loop. [edit: Or maybe not, another answer already did.]"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "edited": false, "score": 1, "creation_date": 1421857065, "post_id": 28070405, "comment_id": 44523180, "body": "@mafso, I can&#39;t because that&#39;s what mhl answer did. So let&#39;s see if the OP thinks that is more useful and picks that instead of putting that here after that answer appeared."}, {"owner": {"reputation": 145496, "user_id": 811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r63DY.png?s=128&g=1", "display_name": "Shog9", "link": "https://stackoverflow.com/users/811/shog9"}, "edited": false, "score": 0, "creation_date": 1421859039, "post_id": 28070405, "comment_id": 44524522, "body": "Comments are not for extended discussion; this conversation has been <a href=\"http://chat.stackoverflow.com/rooms/69330/discussion-on-answer-by-iharob-how-to-deal-with-function-exits-on-a-function-tha\">moved to chat</a>."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1421863450, "post_id": 28070405, "comment_id": 44527008, "body": "To put it bluntly, NEVER use &#39;goto&#39;  Such usage turns what could have been well structured code into spaghetti code."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1421863759, "post_id": 28070405, "comment_id": 44527183, "body": "@user3629249 you can&#39;t use a generalization, this code is actually way easier to understand and maintain thanks to the <code>goto</code>. What you say referes to the days when programmers used <code>goto</code> for every thing that involved flow control, but this usage is actually elegant in my point of view. Why would a programmer think of that in a blind way? Something isn&#39;t wrong just because others say so, in this case this is a very elegant solution to this problem."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1421863846, "post_id": 28070405, "comment_id": 44527237, "body": "@user3629249 the fact that you say that, indicates that you follow blind rules that don&#39;t necessarily make sense. I was expecting many downvotes, because some programmers think that <code>goto</code> is bad without even having a good criterion, I am not trying to be offensive, you can try to prove me wrong."}, {"owner": {"reputation": 23, "user_id": 4471564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2ffc7c84f88357f37071503a4dc816d?s=128&d=identicon&r=PG&f=1", "display_name": "Claus", "link": "https://stackoverflow.com/users/4471564/claus"}, "edited": false, "score": 1, "creation_date": 1422234581, "post_id": 28070405, "comment_id": 44658645, "body": "@iharob I marked your answer as accepted based on the reading of the comments and the other answers, but I agree there are probably too many different situations for a general guideline to be recommended."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1426444306, "post_id": 28070405, "comment_id": 46364890, "body": "I will not downvote this answer. The reason it is still is in the language is for historical reasons and people need to compile old code with a newer compiler."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 7, "last_activity_date": 1421852782, "creation_date": 1421852782, "answer_id": 28070405, "question_id": 28070379, "link": "https://stackoverflow.com/questions/28070379/how-to-deal-with-function-exits-on-a-function-that-has-several-exit-points/28070405#28070405", "title": "How to deal with function exits on a function that has several exit points?", "body": "<p>You can use <code>goto</code> for that.</p>\n\n<pre><code>code = firstCode;\nif (condition != 0)\n    goto label;\ncode = secondCode;\nif (anotherCondition != 0)\n    goto label;\n\nlabel:\n    clean_up_code_if_necessary()\n    exit(code); // may be you should return from the function\n</code></pre>\n\n<p>but there could be many other options depending on the specific case.</p>\n"}, {"comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1421854241, "post_id": 28070606, "comment_id": 44521095, "body": "You should remove the C++ part (as OP switched the question to C) and elaborate a bit."}, {"owner": {"reputation": 23, "user_id": 4471564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2ffc7c84f88357f37071503a4dc816d?s=128&d=identicon&r=PG&f=1", "display_name": "Claus", "link": "https://stackoverflow.com/users/4471564/claus"}, "edited": false, "score": 0, "creation_date": 1421854791, "post_id": 28070606, "comment_id": 44521523, "body": "Thanks for the answer, if there were calculations of calls to other functions among the return locations wouldn&#39;t this make the code less readable?"}, {"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 0, "creation_date": 1421854908, "post_id": 28070606, "comment_id": 44521603, "body": "each case should be small enough to understand . if one or more cases has significant amount of lines, consider making these lines a different function and call it within the case itself"}], "tags": [], "owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "is_accepted": false, "score": 4, "last_activity_date": 1421854412, "last_edit_date": 1421854412, "creation_date": 1421853451, "answer_id": 28070606, "question_id": 28070379, "link": "https://stackoverflow.com/questions/28070379/how-to-deal-with-function-exits-on-a-function-that-has-several-exit-points/28070606#28070606", "title": "How to deal with function exits on a function that has several exit points?", "body": "<p>well , we need do differentiate between C and C++ , the way of handling things is quite different between C and C++.</p>\n\n<p>In C , I would recommend use an Enum which states the current state of of the code , for example:</p>\n\n<pre><code>enum {State1,State2,Invalid_Argument,Error}\n</code></pre>\n\n<p>then , create a function that checkes whatever it needs, then return some constant from the enum above as return value:</p>\n\n<pre><code>int check_statement(arg1,arg2...)\n</code></pre>\n\n<p>and at last , use a switch case on the function above:</p>\n\n<pre><code>   switch(check_statment(...)){\n     case state1:\n     ...\n     return ...\n\n    case Error:\n    ...\n    return..\n\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1421856064, "post_id": 28071435, "comment_id": 44522471, "body": "I didn&#39;t want to mention linux Kernel, but that&#39;s precisely where I learned it... Although, <code>goto ok</code> could just be <code>return 0;</code>."}, {"owner": {"reputation": 655, "user_id": 1056303, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b08c0819e5dd2803c2bb65501e64e660?s=128&d=identicon&r=PG&f=1", "display_name": "mhl", "link": "https://stackoverflow.com/users/1056303/mhl"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421856296, "post_id": 28071435, "comment_id": 44522651, "body": "It could. I was adhering to the &#39;single return point&#39; principle."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421856413, "post_id": 28071435, "comment_id": 44522741, "body": "no no, I do think your answer is good... I upvoted it, even though I have an answer in this post."}], "tags": [], "owner": {"reputation": 655, "user_id": 1056303, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b08c0819e5dd2803c2bb65501e64e660?s=128&d=identicon&r=PG&f=1", "display_name": "mhl", "link": "https://stackoverflow.com/users/1056303/mhl"}, "is_accepted": false, "score": 7, "last_activity_date": 1421855661, "creation_date": 1421855661, "answer_id": 28071435, "question_id": 28070379, "link": "https://stackoverflow.com/questions/28070379/how-to-deal-with-function-exits-on-a-function-that-has-several-exit-points/28071435#28071435", "title": "How to deal with function exits on a function that has several exit points?", "body": "<p>Here is frequently used linux kernel idiom. When something fails, it rolls back and cleanup after previously executed code.</p>\n\n<pre><code>if(do_a()==FAIL)\n    goto fail_a;\nif(do_b()==FAIL)\n    goto fail_c;\nif(do_c()==FAIL)\n    goto fail_c;\n/* rest of the code goes here */\n/* if it's ok then set err to 0 and jump to ok */\nerr = 0;\ngoto ok;\n// otherwise unroll what have been done\nfail_c:\n    undo_c();\nfail_b:\n    undo_b();\nfail_a:\n    undo_a();\nok:\nreturn err;\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 4471564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2ffc7c84f88357f37071503a4dc816d?s=128&d=identicon&r=PG&f=1", "display_name": "Claus", "link": "https://stackoverflow.com/users/4471564/claus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 0, "accepted_answer_id": 28070405, "answer_count": 3, "score": 2, "last_activity_date": 1421855661, "creation_date": 1421852681, "last_edit_date": 1421853669, "question_id": 28070379, "link": "https://stackoverflow.com/questions/28070379/how-to-deal-with-function-exits-on-a-function-that-has-several-exit-points", "title": "How to deal with function exits on a function that has several exit points?", "body": "<p>I'm more of a student than I am a seasoned programmer and the other day I was refactoring a piece of code I wrote some time ago. In there, there was a function that was rather big in code size and had a structure like this:</p>\n\n<pre><code>if (eval)\n    return code;\n...\nif (different test)\n    return another code;\n...\n</code></pre>\n\n<p>In all there were about 6 or 7 return points some of them with cleanup code inside of the branch. Some of them also responded to erroneous situations, paths where the function wouldn't fully process the input but rather return an error code.</p>\n\n<p>Even though the code was commented and all it seemed to me hard on the eyes and difficult to read. So I was wondering if there are any best practices on the matter.</p>\n\n<p>Reading code from all around the net I found different approaches to this matter. For example one would follow this scheme:</p>\n\n<pre><code>do {\n    whole body of the function;\nwhile (false);\n\nclean up code if necessary;\nreturn code;\n</code></pre>\n\n<p>Mainly to be able to use <code>break;</code> sentences in different evaluations (since we were inside a loop) to exit the loop, do the cleanup if necessary and return the exit code. But that feels the same as <code>goto</code>s to me, with the limitation that they place to go to would only be forward in code.</p>\n\n<p>Another one would be similar to mine, but have only one <code>return</code> statement at the end of the function and having a variable to hold error codes.</p>\n"}, {"tags": ["c", "pointers", "icc", "iar"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1421852591, "post_id": 28070327, "comment_id": 44519982, "body": "I don&#39;t think this is about guessing what errors you are getting, please be specific."}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1423092821, "post_id": 28071043, "comment_id": 45014052, "body": "He wants to keep <code>g_I2C_BusPtr_Port0</code> as a variable because it is used elsewhere; the workaround is just to write <code>&amp;(g_I2C_Bus[0])</code> in the initializer list instead of <code>g_I2C_BusPtr_Port0</code> ."}], "tags": [], "owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "is_accepted": false, "score": 6, "last_activity_date": 1421854542, "creation_date": 1421854542, "answer_id": 28071043, "question_id": 28070327, "link": "https://stackoverflow.com/questions/28070327/iar-ewarm-icc-expression-must-have-a-constant-value/28071043#28071043", "title": "IAR EWARM (ICC) - Expression must have a constant value", "body": "<p>This is a limitation with C language. Values of variables, like</p>\n\n<pre><code>int const a = 1;\n</code></pre>\n\n<p>cannot be used in constant expressions, like as initializers:</p>\n\n<pre><code>int b = a; /* Will not work */\n</code></pre>\n\n<p>Not even with <code>const</code> qualifier. Reasoning is that compiler cannot know values of variables, even if it would seem completely trivial. Variable with <code>const</code> is not <em>a constant</em> in C, it's only variable which cannot be changed by <em>you</em>.</p>\n\n<p>Addresses of global variables are a different matter. Linker complete control where these variables are located, and can use the same information for initializers.</p>\n\n<p>Work-around is to use preprocessor:</p>\n\n<pre><code>#define g_I2C_BusPtr_Port0 (&amp;(g_I2C_Bus[0]))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "is_accepted": false, "score": 0, "last_activity_date": 1423081945, "last_edit_date": 1423081945, "creation_date": 1421857015, "answer_id": 28071889, "question_id": 28070327, "link": "https://stackoverflow.com/questions/28070327/iar-ewarm-icc-expression-must-have-a-constant-value/28071889#28071889", "title": "IAR EWARM (ICC) - Expression must have a constant value", "body": "<p>Intializers for a static object must either be a constant expression or a string literal, if for example <code>ADC123_Device g_Device_ADC123_U14</code> was a automatic variable then there would be no error, for example if you declared it in <code>main</code>. We can see this by going to the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf\" rel=\"nofollow\">draft C99 standard</a> section <code>6.7.8</code> Initialization which says:</p>\n\n<blockquote>\n  <p>All the expressions in an initializer for an object that has static storage duration shall be\n  constant expressions or string literals.</p>\n</blockquote>\n\n<p>The reason why the second case works is that constant addresses are allowed, we can see this from <code>6.6</code> Constant expressions which says:</p>\n\n<blockquote>\n  <p>More latitude is permitted for constant expressions in initializers. Such a constant\n  expression shall be, or evaluate to, one of the following:</p>\n</blockquote>\n\n<p>and includes the following bullet:</p>\n\n<blockquote>\n  <ul>\n  <li>an address constant, or</li>\n  </ul>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 1, "last_activity_date": 1423093084, "creation_date": 1423093084, "answer_id": 28333662, "question_id": 28070327, "link": "https://stackoverflow.com/questions/28070327/iar-ewarm-icc-expression-must-have-a-constant-value/28333662#28333662", "title": "IAR EWARM (ICC) - Expression must have a constant value", "body": "<p>In case it is not clear from the other answers already; the correct code organization is:</p>\n\n<pre><code>// stuff.h\n//\nextern I2C_Bus *const g_I2C_BusPtr_Port0;\nextern I2C_Bus *const g_I2C_BusPtr_Port1;\n</code></pre>\n\n<p>and then:</p>\n\n<pre><code>// stuff.c\n//\n#include \"stuff.h\"\n\nI2C_Bus* const g_I2C_BusPtr_Port0 = &amp;g_I2C_Bus[0];\nI2C_Bus* const g_I2C_BusPtr_Port1 = &amp;g_I2C_Bus[1];\n\nconst ADC123_Device g_Device_ADC123_U14 = \n{ { &amp;g_I2C_Bus[0], 0xAE } };\n</code></pre>\n\n<p>and so on.</p>\n"}], "owner": {"reputation": 21, "user_id": 4478731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06b7f79155c1ad7395d38f83f6a3118a?s=128&d=identicon&r=PG&f=1", "display_name": "user4478731", "link": "https://stackoverflow.com/users/4478731/user4478731"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3589, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1474448459, "creation_date": 1421852511, "last_edit_date": 1421853030, "question_id": 28070327, "link": "https://stackoverflow.com/questions/28070327/iar-ewarm-icc-expression-must-have-a-constant-value", "title": "IAR EWARM (ICC) - Expression must have a constant value", "body": "<p>I'm trying to compile the following C code using IAR EWARM but I'm getting three compilation errors (Error[Pe028]: expression must have a constant value). See below:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;stdint.h&gt;\n\ntypedef uint8_t I2C_BusIdentifier;\ntypedef uint8_t I2C_SlaveAddress;\n\ntypedef enum {\n    I2C_BUS_STATE_UNINITIALIZED = 0,\n    I2C_BUS_STATE_GPIO_HARDWARE_READY,\n    I2C_BUS_STATE_READY_TO_OPERATE,\n} I2C_BusState;\n\ntypedef struct BUS_I2C_BUS_INSTANCE_TYPE {\n    I2C_BusIdentifier BusIdentifer;                                         // 0 for I2C0, 1 for I2C1\n    I2C_BusState CurrentState;                                              // bus status\n} I2C_Bus; // I\u00b2C Bus Instance Type, I2C_BusInstanceType\n\n\ntypedef struct DEVICE_I2C_GENERIC {\n    I2C_Bus* DeviceBusPointer;\n    I2C_SlaveAddress DeviceAddress;\n} I2C_Device;\n\n// inherits from I2C_Device\ntypedef struct DEVICE_ADC123 {\n    I2C_Device Device;\n} ADC123_Device;\n\n#define NUMBER_OF_I2C_PORTS   2\n\nstatic I2C_Bus g_I2C_Bus[NUMBER_OF_I2C_PORTS] = {\n    { 0, I2C_BUS_STATE_UNINITIALIZED, },\n    { 1, I2C_BUS_STATE_UNINITIALIZED, },\n};\n\nI2C_Bus* const g_I2C_BusPtr_Port0 = &amp;(g_I2C_Bus[0]);\nI2C_Bus* const g_I2C_BusPtr_Port1 = &amp;(g_I2C_Bus[1]);\n\n\nconst ADC123_Device g_Device_ADC123_U14 = {\n    { g_I2C_BusPtr_Port0, 0xAE, }, // &lt;--- Error[Pe028]: expression must have a constant value\n};\n\nconst ADC123_Device g_Device_ADC123_U15 = {\n    { g_I2C_BusPtr_Port1, 0x8A, }, // &lt;--- Error[Pe028]: expression must have a constant value\n};\n\nconst ADC123_Device g_Device_ADC123_U9 = {\n    { g_I2C_BusPtr_Port1, 0xAA, }, // &lt;--- Error[Pe028]: expression must have a constant value\n};\n\n#define NUMBER_OF_ADC123_DEVICES   3\n\nconst ADC123_Device* g_ADC123_Array[NUMBER_OF_ADC123_DEVICES] = {\n    &amp;g_Device_ADC123_U14,\n    &amp;g_Device_ADC123_U15,\n    &amp;g_Device_ADC123_U9,\n};\n\nint main(void)\n{\n    while(1);\n}\n</code></pre>\n\n<p>However, everything compiles OK if I use the g_I2C_Bus addresses directly instead of through the g_I2C_BusPtr_PortX pointers:</p>\n\n<pre><code>const ADC123_Device g_Device_ADC123_U14 = {\n    { &amp;(g_I2C_Bus[0]), 0xAE, },\n};\n\nconst ADC123_Device g_Device_ADC123_U15 = {\n    { &amp;(g_I2C_Bus[1]), 0x8A, },\n};\n\nconst ADC123_Device g_Device_ADC123_U9 = {\n    { &amp;(g_I2C_Bus[1]), 0xAA, },\n};\n</code></pre>\n\n<p>I want to use the const pointers (g_I2C_BusPtr_Port0, g_I2C_BusPtr_Port1) because they are extern'd in a .h file, whereas the array (g_I2C_Bus[]) will not be exposed globally but static in a specific .c file.</p>\n\n<p>Why is the compuler unhappy about this when the definitions/values should be equivalent since they reference the same thing?</p>\n"}, {"tags": ["c", "arrays", "struct", "dmx512"], "comments": [{"owner": {"reputation": 16571, "user_id": 2180189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0de29e70b63441baf6a99393f7ff2027?s=128&d=identicon&r=PG", "display_name": "MightyPork", "link": "https://stackoverflow.com/users/2180189/mightypork"}, "edited": false, "score": 2, "creation_date": 1421852496, "post_id": 28070273, "comment_id": 44519915, "body": "I don&#39;t think uint32_t has 6 bytes... and honestly, maybe it&#39;ll be a better idea not to use struct for this, you&#39;ll have to deal with things like padding, alignment etc.. not worth the trouble imo"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1421856750, "post_id": 28070273, "comment_id": 44522971, "body": "The checksum appears at a variable position; that at least requires special attention. There&#39;s likely to be padding in the structure after <code>messageLength</code> and before <code>destinationUID</code>, too. That means the structure cannot accurately represent the byte stream on the wire.  You&#39;re better off not trying to serialize/deserialize the structure directly (it won&#39;t work accurately).  Use code to pack/unpack the relevant data into/out of an array of bytes."}, {"owner": {"reputation": 321, "user_id": 4478695, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/aed5ebc3aecfae90cf38964b0a8195fc?s=128&d=identicon&r=PG&f=1", "display_name": "RobbG", "link": "https://stackoverflow.com/users/4478695/robbg"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1421923036, "post_id": 28070273, "comment_id": 44550472, "body": "@JonathanLeffler That is true, I think I&#39;ll take this approach to it. Shouldn&#39;t be too hard to have it packed into the struct as it arrives. Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 6673, "user_id": 4213662, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/693430827/picture?type=large", "display_name": "Persixty", "link": "https://stackoverflow.com/users/4213662/persixty"}, "edited": false, "score": 0, "creation_date": 1421853702, "post_id": 28070637, "comment_id": 44520672, "body": "Agreed. The answer might be to pre-pad his structure with 2 bytes to tip the structure into alignment."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1421855116, "post_id": 28070637, "comment_id": 44521759, "body": "In the sample structure, the only place where padding is likely to be needed is after <code>messageLength</code>.  If <code>uint32_t</code> members must be aligned on a 4-byte boundary (a common requirement), then there will be 2 bytes of padding between <code>messageLength</code> and <code>destinationUID</code>.  Each member of the structure has to be placed such that it will be aligned correctly for its type, and the structure as a whole has to be allocated such that its member with the most stringent alignment requirement is always properly aligned.  But there&#39;ll be no padding between consecutive <code>uint8_t</code> members, for example."}], "tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": true, "score": 4, "last_activity_date": 1421853533, "creation_date": 1421853533, "answer_id": 28070637, "question_id": 28070273, "link": "https://stackoverflow.com/questions/28070273/access-struct-as-array-of-bytes/28070637#28070637", "title": "Access struct as array of bytes", "body": "<p>The problem that you are describing can arise when you are dealing with a non-byte aligned memory structure. In this case each struct field will have the specific alignment. I.e., if the alignment is 4 bytes, each field will start on an address that is divisible by 4. To avoid this, you can use GCC's attribute <code>packed</code> for the structure, that instructs the compiler to pack the structure to a minimal memory. In other compilers there is <code>#pragma pack</code> or some other corresponding compiler directives for this purpose. To make sure that your struct is packed, you can check it's size with <code>sizeof</code> and compare it to the expected size. </p>\n"}], "owner": {"reputation": 321, "user_id": 4478695, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/aed5ebc3aecfae90cf38964b0a8195fc?s=128&d=identicon&r=PG&f=1", "display_name": "RobbG", "link": "https://stackoverflow.com/users/4478695/robbg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1297, "favorite_count": 2, "accepted_answer_id": 28070637, "answer_count": 1, "score": 2, "last_activity_date": 1432161254, "creation_date": 1421852353, "last_edit_date": 1432161254, "question_id": 28070273, "link": "https://stackoverflow.com/questions/28070273/access-struct-as-array-of-bytes", "title": "Access struct as array of bytes", "body": "<p>I'm currently in the process of re-writing a program to process data received over a serial connection using the <a href=\"http://www.rdmprotocol.org/developers/resources/downloads/?did=5\" rel=\"nofollow\">RDM protocol</a>, each packet is received by a UART and has a specific structure but may vary in length, a packet structure example is below, assuming the number of bytes in the packet to be n (this may change depending on the contents of the packet)</p>\n\n<p>What I want to do is define a struct in my C code that has the various parameters defined, but to be able to read and write bytes to/from the struct from the UART as though the struct is just an array of uint8_t. My issue with this is that I have read that structs may not always be stored in continuous sections of memory, so taking <code>&amp;RDMPacket1</code> and increment through the struct may end up with the data not being in the right place.</p>\n\n<p>My other problem is that if I have an array to store a packet data of the maximum possible length (220 bytes) inside the struct, then the checksum at the end of the packet would be written into the wrong place. What methods could be used to receive the data and place it into the struct?</p>\n\n<p>Example packet definition (shortened from standard)</p>\n\n<pre><code>Byte     | Description\n0        | START Code - Constant, can be ignored\n1        | Sub-Start Code - Contains command for device to process\n2        | Message Length - Points to byte number of Checksum High (up to 255)\n3-8      | Destination UID - Unique ID of packet Destination\n9-14     | Source UID - Unique ID of packet Source\n15       | Transaction Number - ID of transaction between controller and responder\n16-(n-2) | Data (up to 220 bytes long)\nn-1      | Checksum High\nn        | Checksum Low\n</code></pre>\n\n<p>This is an example of a struct to hold the a packet of maximum possible length:</p>\n\n<pre><code>struct RDMPacket\n{\n    uint8_t     subStartCode;\n    uint8_t     messageLength;\n    uint32_t    destinationUID;\n    uint32_t    sourceUID;\n    uint8_t     transactionNumber;\n    uint8_t     portID;\n    uint8_t     messageCount;\n    uint8_t     subDevice;\n    uint8_t     commandClass\n    uint8_t     parameterID;\n    uint8_t     parameterDataLength;\n    uint8_t     parameterData[220];\n    uint16_t    checksum\n} RDMPacket1;\n</code></pre>\n"}, {"tags": ["c", "naming-conventions", "bit-fields"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1421852025, "post_id": 28070040, "comment_id": 44519610, "body": "<code>uint</code> is not a standard type - how is it defined ?"}, {"owner": {"reputation": 8605, "user_id": 389432, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6bcef902fa27b86a860c44c3a55f1af3?s=128&d=identicon&r=PG", "display_name": "Jayapal Chandran", "link": "https://stackoverflow.com/users/389432/jayapal-chandran"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1421852119, "post_id": 28070040, "comment_id": 44519692, "body": "It is defined in a top header as typedef unsigned int uint; i have also updated my question with this."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1421852289, "post_id": 28070040, "comment_id": 44519795, "body": "If I change <code>uint</code> to <code>unsigned</code>, it works.  But if, as you say, <code>uint</code> is defined on your system, your example code should compile with no problem."}, {"owner": {"reputation": 8605, "user_id": 389432, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6bcef902fa27b86a860c44c3a55f1af3?s=128&d=identicon&r=PG", "display_name": "Jayapal Chandran", "link": "https://stackoverflow.com/users/389432/jayapal-chandran"}, "edited": false, "score": 0, "creation_date": 1421852421, "post_id": 28070040, "comment_id": 44519873, "body": "no it is single underscore but in the error it shows 3 underscores"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 1, "creation_date": 1421852510, "post_id": 28070040, "comment_id": 44519923, "body": "If <code>_arj</code> is defined somewhere else, (i.e. typed), its usage here would be syntactically wrong.  By the way, what you have in your example code does not seem to match the error you indicate:  i.e. <code>___arj</code>, does not match <code>_arj</code>"}, {"owner": {"reputation": 8605, "user_id": 389432, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6bcef902fa27b86a860c44c3a55f1af3?s=128&d=identicon&r=PG", "display_name": "Jayapal Chandran", "link": "https://stackoverflow.com/users/389432/jayapal-chandran"}, "edited": false, "score": 0, "creation_date": 1421852554, "post_id": 28070040, "comment_id": 44519956, "body": "not _arj but i meant uint is defined in a top header file"}, {"owner": {"reputation": 8605, "user_id": 389432, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6bcef902fa27b86a860c44c3a55f1af3?s=128&d=identicon&r=PG", "display_name": "Jayapal Chandran", "link": "https://stackoverflow.com/users/389432/jayapal-chandran"}, "edited": false, "score": 0, "creation_date": 1421852867, "post_id": 28070040, "comment_id": 44520150, "body": "i changed unit to unsigned int and i still get the error"}, {"owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "edited": false, "score": 2, "creation_date": 1421852899, "post_id": 28070040, "comment_id": 44520170, "body": "<code>gcc -E</code> gives the preprocessor output, <code>gcc -E -dM</code> the macros defined. If <code>_arj</code> isn&#39;t a macro (but it seems to be one), the code should be OK."}, {"owner": {"reputation": 8605, "user_id": 389432, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6bcef902fa27b86a860c44c3a55f1af3?s=128&d=identicon&r=PG", "display_name": "Jayapal Chandran", "link": "https://stackoverflow.com/users/389432/jayapal-chandran"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1421853324, "post_id": 28070040, "comment_id": 44520431, "body": "@ryyker it seems that there is a conflict with the name _arj. when i renamed it to arj or _srj or _zxarj it worked."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1421853722, "post_id": 28070040, "comment_id": 44520681, "body": "Identifiers should NOT start wth an underscore <a href=\"http://c-faq.com/decl/namespace.html\" rel=\"nofollow noreferrer\">c-faq.com/decl/namespace.html</a> . Structure members are a bit different, but it is still a bad habit. Just don&#39;t do it."}], "answers": [{"tags": [], "owner": {"reputation": 414, "user_id": 4369740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/465640e769a726efeeb7d16db1b01259?s=128&d=identicon&r=PG&f=1", "display_name": "tipaye", "link": "https://stackoverflow.com/users/4369740/tipaye"}, "is_accepted": false, "score": 0, "last_activity_date": 1421864345, "creation_date": 1421864345, "answer_id": 28074107, "question_id": 28070040, "link": "https://stackoverflow.com/questions/28070040/bit-fields-variable-naming-convention-and-invalid-type-error-gcc-4-2-1-freebsd-7/28074107#28074107", "title": "bit fields variable naming convention and invalid type error gcc 4.2.1 freebsd 7", "body": "<p>About implementation reserved names, it's generally a bad idea to start names with a leading underscore. A leading double underscore is actually a violation. Here's an excerpt from the glibc manual:</p>\n\n<blockquote>\n  <p>In addition to the names documented in this manual, reserved names\n  include all external identifiers (global functions and variables) that\n  begin with an underscore (\u2018_\u2019) and all identifiers regardless of use\n  that begin with either two underscores or an underscore followed by a\n  capital letter are reserved names. This is so that the library and\n  header files can define functions, variables, and macros for internal\n  purposes without risk of conflict with names in user programs.</p>\n</blockquote>\n\n<p>And a link to the page I got that from:\n<a href=\"http://www.gnu.org/software/libc/manual/html_node/Reserved-Names.html\" rel=\"nofollow\">http://www.gnu.org/software/libc/manual/html_node/Reserved-Names.html</a></p>\n"}], "owner": {"reputation": 8605, "user_id": 389432, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6bcef902fa27b86a860c44c3a55f1af3?s=128&d=identicon&r=PG", "display_name": "Jayapal Chandran", "link": "https://stackoverflow.com/users/389432/jayapal-chandran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 904, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1421864345, "creation_date": 1421851686, "last_edit_date": 1421852216, "question_id": 28070040, "link": "https://stackoverflow.com/questions/28070040/bit-fields-variable-naming-convention-and-invalid-type-error-gcc-4-2-1-freebsd-7", "title": "bit fields variable naming convention and invalid type error gcc 4.2.1 freebsd 7", "body": "<ol>\n<li>I am migrating php from 5.3 to 5.5.</li>\n<li>I am doing cross compilation in freebsd 7 - gcc 4.2.1</li>\n<li>Compiling for arm, i386 and powerpc.</li>\n</ol>\n\n<p>a source file is not compiling. Following is the code similar the real one.</p>\n\n<pre><code>typedef struct _abc {\n        char *d;\n        size_t s;\n        size_t u;\n        uint f:1;\n        uint _arj:31;\n}abc;\n</code></pre>\n\n<p>unit and other types are defined in a top header file using typedef. <em>I added this line after the first comment</em>.</p>\n\n<p>i get error: bit-field '___arj' has invalid type</p>\n\n<p>i renamed _arj to just arj and it worked. yet i have to find and replace _arj to arj in the code base.</p>\n\n<p>Is there any naming convention for variables used in bit fields?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 86959, "user_id": 1735406, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IF9uS.png?s=128&g=1", "display_name": "Maroun", "link": "https://stackoverflow.com/users/1735406/maroun"}, "edited": false, "score": 3, "creation_date": 1421850570, "post_id": 28069626, "comment_id": 44518589, "body": "First thing wrong: your title."}, {"owner": {"reputation": 309, "user_id": 3155753, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/cQZpm.jpg?s=128&g=1", "display_name": "Moon", "link": "https://stackoverflow.com/users/3155753/moon"}, "edited": false, "score": 2, "creation_date": 1421850750, "post_id": 28069626, "comment_id": 44518715, "body": "Wintermute is right, also you should add <code>int</code> before <code>main()</code> and in your <code>for</code> loop, you reset <code>check</code>&#39;s value to 1. There&#39;s a few things to fix."}, {"owner": {"reputation": 1318, "user_id": 42552, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/d3d8778bfd7699f34e9346683b4458db?s=128&d=identicon&r=PG", "display_name": "JosephDoggie", "link": "https://stackoverflow.com/users/42552/josephdoggie"}, "edited": false, "score": 0, "creation_date": 1421850871, "post_id": 28069626, "comment_id": 44518801, "body": "Among other things the for loop is such that check starts at 1 and can be less than or equal to 1, and is incremented, therefore it only runs once -- it doesn&#39;t appear to be modified in the loop at all....furthermore, it is at a minimum confusing to use &quot;check&quot; for both the scanf variable and the for loop variable {not sure how C resolves this, frankly, in some languages, it would just overwrite it, but perhaps there are separate instances for each scope)."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1421850896, "post_id": 28069626, "comment_id": 44518824, "body": "I get 3 warnings with gcc -- two for the malformed <code>main</code>, and <code>warning: too many arguments for format</code> for the mis-used <code>scanf</code> line."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421851115, "post_id": 28069626, "comment_id": 44518977, "body": "Return <code>int</code> from <code>main()</code>"}], "answers": [{"comments": [{"owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "reply_to_user": {"reputation": 1, "user_id": 4121829, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-oYyfF7DS0Wc/AAAAAAAAAAI/AAAAAAAAAJg/uq9dW4-fvAQ/photo.jpg?sz=128", "display_name": "Ajay Rengasamy", "link": "https://stackoverflow.com/users/4121829/ajay-rengasamy"}, "edited": false, "score": 0, "creation_date": 1421851461, "post_id": 28069661, "comment_id": 44519215, "body": "Yeees, there&#39;s a few more things. Took me a moment to see them all."}], "tags": [], "owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "is_accepted": false, "score": 2, "last_activity_date": 1421851449, "last_edit_date": 1421851449, "creation_date": 1421850623, "answer_id": 28069661, "question_id": 28069626, "link": "https://stackoverflow.com/questions/28069626/c-program-prime-numbers/28069661#28069661", "title": "C Program - Prime numbers", "body": "<pre><code>scanf(\"&amp;d\",&amp;check);\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>//     v-- percent, not ampersand\nscanf(\"%d\",&amp;check);\n</code></pre>\n\n<p>Or (probably)</p>\n\n<pre><code>scanf(\"%d\", &amp;input);\n</code></pre>\n\n<p>...since it would make a lot more sense to read into the <code>input</code> variable. Later in the program, then, </p>\n\n<pre><code>printf(\"The number %d is prime\", check); \n</code></pre>\n\n<p>should be</p>\n\n<pre><code>printf(\"The number %d is prime\\n\", input);\n</code></pre>\n\n<p>because you're checking <code>input</code>, not <code>check</code>. The same two lines below that. Finally, the loop condition in</p>\n\n<pre><code>for(check=1;check&lt;=1;check++)\n</code></pre>\n\n<p>makes no sense. The loop would run exactly once, and you don't want to test if input is divisible by 1. It would make sense with</p>\n\n<pre><code>                 // v-- check factors until input\nfor(check=1;check&lt;=input;check++)\n</code></pre>\n\n<p>This is not the most efficient check here, but it's something to get you started.</p>\n\n<p>Side note: the prototype</p>\n\n<pre><code>main()\n</code></pre>\n\n<p>is compliant only with C89. From C99 onwards, the old K&amp;R method of function declaration is no longer included, and the proper equivalent prototype for main is</p>\n\n<pre><code>int main(void)\n</code></pre>\n\n<p>So while you're fixing things, you should put that there.</p>\n"}, {"tags": [], "owner": {"reputation": 11196, "user_id": 1079907, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/a7c69e39fbec2c781db5f27b40f63023?s=128&d=identicon&r=PG", "display_name": "Sunil Bojanapally", "link": "https://stackoverflow.com/users/1079907/sunil-bojanapally"}, "is_accepted": false, "score": 0, "last_activity_date": 1421850951, "creation_date": 1421850951, "answer_id": 28069783, "question_id": 28069626, "link": "https://stackoverflow.com/questions/28069626/c-program-prime-numbers/28069783#28069783", "title": "C Program - Prime numbers", "body": "<p>Some issues are: </p>\n\n<ol>\n<li>Variable <code>input</code> is not defined which contains garbage value.   </li>\n<li><code>for(check=1;check&lt;=1;check++)</code> This seems incorrect, loops only once for all cases. </li>\n<li>Read values using scanf by passing format specifier as <code>%d</code> instead of <code>&amp;d</code>. </li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1421852530, "post_id": 28070286, "comment_id": 44519941, "body": "The OP is <b>not</b> tagged with <a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b\">c++</a> tag."}, {"owner": {"reputation": 309, "user_id": 3155753, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/cQZpm.jpg?s=128&g=1", "display_name": "Moon", "link": "https://stackoverflow.com/users/3155753/moon"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1421855885, "post_id": 28070286, "comment_id": 44522328, "body": "Sorry about that. Simple fix."}, {"owner": {"reputation": 1, "user_id": 4121829, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-oYyfF7DS0Wc/AAAAAAAAAAI/AAAAAAAAAJg/uq9dW4-fvAQ/photo.jpg?sz=128", "display_name": "Ajay Rengasamy", "link": "https://stackoverflow.com/users/4121829/ajay-rengasamy"}, "edited": false, "score": 0, "creation_date": 1422787267, "post_id": 28070286, "comment_id": 44880648, "body": "Thank you! That helped me!"}], "tags": [], "owner": {"reputation": 309, "user_id": 3155753, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/cQZpm.jpg?s=128&g=1", "display_name": "Moon", "link": "https://stackoverflow.com/users/3155753/moon"}, "is_accepted": true, "score": 0, "last_activity_date": 1421856451, "last_edit_date": 1421856451, "creation_date": 1421852383, "answer_id": 28070286, "question_id": 28069626, "link": "https://stackoverflow.com/questions/28069626/c-program-prime-numbers/28070286#28070286", "title": "C Program - Prime numbers", "body": "<p>Well I assume it always comes down to someone doing the code for the asker anyway.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n\nint main() // note \"int\" before \"main()\"\n{\n    int input, check, count;\n    printf(\"Enter the number: \");\n    scanf(\"%d\", &amp;input); //I believe this is what you meant instead of storing the inputted value in \"check\"\n\n    count = 0;\n    check = 2; //Check should equal \"2\" because anything divided by one will have no remainder\n\n\n    while((count != 1) &amp;&amp; (check &lt;= 50)) //If you want to stop trying to divide when the number you're dividing by is above 50, change this line. I stopped at 50 just as a random number, but I'm sure there's a more logical one to use. ------ \"while(count != 1)\" stops the loop when the number is successfully divided.\n\n    {\n        if (check == input) break; // stop checking when the number we're trying to divide is equal to the number to divide by.\n\n        if((input%check) == 0)\n        {\n            count++;\n        }\n\n        check++; //increment the number we're checking by\n    }\n\n    if(count == 1)\n    {\n        printf(\"The number %d is not prime\\n\", input); // output the number the user tried to input\n    }\n\n    else\n    {\n        printf(\"The number %d is prime\\n\", input);\n    }\n\n    getch();\n    return 1;\n}\n</code></pre>\n\n<p>I beg of you to read the comments and understand them instead of just copying the code, as I've seen done so many times.</p>\n\n<p>Edit: My mistake for originally including a c++ function. It's in C now.</p>\n"}], "owner": {"reputation": 1, "user_id": 4121829, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-oYyfF7DS0Wc/AAAAAAAAAAI/AAAAAAAAAJg/uq9dW4-fvAQ/photo.jpg?sz=128", "display_name": "Ajay Rengasamy", "link": "https://stackoverflow.com/users/4121829/ajay-rengasamy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 291, "favorite_count": 1, "accepted_answer_id": 28070286, "answer_count": 3, "score": -1, "last_activity_date": 1422120153, "creation_date": 1421850521, "last_edit_date": 1422120153, "question_id": 28069626, "link": "https://stackoverflow.com/questions/28069626/c-program-prime-numbers", "title": "C Program - Prime numbers", "body": "<p>It is to determine whether a number is prime or not.\nExecuted using Codeblocks 13.12.\nCompiler GNU GCC 4.7.0</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nmain()\n{\n    int input,check,count;\n\n    printf(\"Enter the number: \");\n    scanf(\"&amp;d\",&amp;check);\n\n    count=0;        \n    for(check=1;check&lt;=1;check++)\n    {\n        if((input%check)==0)\n        {\n            count++;\n        }\n    }\n    if(count==2)\n    {\n        printf(\"The number %d is prime\",check);\n    }\n    else\n    {\n        printf(\"The number %d is not prime\",check);\n    }\n}\n</code></pre>\n\n<p>Please note that there is no error or warning.\nBut the compiler assumes a number \"2\" even after giving someother input and it says 2 is not prime!!</p>\n"}, {"tags": ["objective-c", "c", "scanf"], "comments": [{"owner": {"reputation": 54742, "user_id": 608157, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Li27g.jpg?s=128&g=1", "display_name": "David R&#246;nnqvist", "link": "https://stackoverflow.com/users/608157/david-r%c3%b6nnqvist"}, "edited": false, "score": 0, "creation_date": 1421851789, "post_id": 28069618, "comment_id": 44519440, "body": "Put a breakpoint after scanning the variable and inspect its value. What do you think it&#39;s value is?"}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 1, "creation_date": 1421851820, "post_id": 28069618, "comment_id": 44519466, "body": "You&#39;re only reading a single <code>char</code>, so when you enter <code>197</code>, <code>c</code> will be <code>&#39;1&#39;</code>."}, {"owner": {"reputation": 54742, "user_id": 608157, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Li27g.jpg?s=128&g=1", "display_name": "David R&#246;nnqvist", "link": "https://stackoverflow.com/users/608157/david-r%c3%b6nnqvist"}, "reply_to_user": {"reputation": 16571, "user_id": 2180189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0de29e70b63441baf6a99393f7ff2027?s=128&d=identicon&r=PG", "display_name": "MightyPork", "link": "https://stackoverflow.com/users/2180189/mightypork"}, "edited": false, "score": 0, "creation_date": 1421851857, "post_id": 28069618, "comment_id": 44519493, "body": "@MightyPork It&#39;s more about C than it is about Objective-C. It doesn&#39;t really matter that the OP is using NSLog to write to the console. That&#39;s not where the problem lies"}, {"owner": {"reputation": 54742, "user_id": 608157, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Li27g.jpg?s=128&g=1", "display_name": "David R&#246;nnqvist", "link": "https://stackoverflow.com/users/608157/david-r%c3%b6nnqvist"}, "reply_to_user": {"reputation": 16571, "user_id": 2180189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0de29e70b63441baf6a99393f7ff2027?s=128&d=identicon&r=PG", "display_name": "MightyPork", "link": "https://stackoverflow.com/users/2180189/mightypork"}, "edited": false, "score": 0, "creation_date": 1421852054, "post_id": 28069618, "comment_id": 44519633, "body": "@MightyPork @EvgeniyKleban If the OP would use <code>puts</code>, this would be a C question, right? The problem has to do with <code>char</code>s and <code>scanf</code>, which is C."}, {"owner": {"reputation": 54742, "user_id": 608157, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Li27g.jpg?s=128&g=1", "display_name": "David R&#246;nnqvist", "link": "https://stackoverflow.com/users/608157/david-r%c3%b6nnqvist"}, "edited": false, "score": 0, "creation_date": 1421852260, "post_id": 28069618, "comment_id": 44519774, "body": "Anyway, the <a href=\"https://stackoverflow.com/questions/tagged/scanf\">scanf</a> tag is probably more relevant than either of the language tags."}, {"owner": {"reputation": 16571, "user_id": 2180189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0de29e70b63441baf6a99393f7ff2027?s=128&d=identicon&r=PG", "display_name": "MightyPork", "link": "https://stackoverflow.com/users/2180189/mightypork"}, "edited": false, "score": 0, "creation_date": 1421852262, "post_id": 28069618, "comment_id": 44519776, "body": "Good job on removing the language tag, now you killed the syntax highlighting."}, {"owner": {"reputation": 16621, "user_id": 319741, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b625972bd759abcd3de0d2283617a1b7?s=128&d=identicon&r=PG", "display_name": "Scott C Wilson", "link": "https://stackoverflow.com/users/319741/scott-c-wilson"}, "edited": false, "score": 1, "creation_date": 1421852311, "post_id": 28069618, "comment_id": 44519806, "body": "Guys, this should be tagged  - I am updating to use both tags."}, {"owner": {"reputation": 6072, "user_id": 1451247, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JCS3K.jpg?s=128&g=1", "display_name": "Evgeniy Kleban", "link": "https://stackoverflow.com/users/1451247/evgeniy-kleban"}, "reply_to_user": {"reputation": 16621, "user_id": 319741, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b625972bd759abcd3de0d2283617a1b7?s=128&d=identicon&r=PG", "display_name": "Scott C Wilson", "link": "https://stackoverflow.com/users/319741/scott-c-wilson"}, "edited": false, "score": 0, "creation_date": 1421867662, "post_id": 28069618, "comment_id": 44529157, "body": "@ScottWilson thank you for updating tags!"}], "answers": [{"tags": [], "owner": {"reputation": 16621, "user_id": 319741, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b625972bd759abcd3de0d2283617a1b7?s=128&d=identicon&r=PG", "display_name": "Scott C Wilson", "link": "https://stackoverflow.com/users/319741/scott-c-wilson"}, "is_accepted": false, "score": 1, "last_activity_date": 1421851813, "creation_date": 1421851813, "answer_id": 28070080, "question_id": 28069618, "link": "https://stackoverflow.com/questions/28069618/logical-statement/28070080#28070080", "title": "Logical &amp;&amp; statement", "body": "<p>You are only reading the \"1\".  And this is within your range.</p>\n"}, {"tags": [], "owner": {"reputation": 11196, "user_id": 1079907, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/a7c69e39fbec2c781db5f27b40f63023?s=128&d=identicon&r=PG", "display_name": "Sunil Bojanapally", "link": "https://stackoverflow.com/users/1079907/sunil-bojanapally"}, "is_accepted": true, "score": 2, "last_activity_date": 1421852334, "last_edit_date": 1421852334, "creation_date": 1421851996, "answer_id": 28070148, "question_id": 28069618, "link": "https://stackoverflow.com/questions/28069618/logical-statement/28070148#28070148", "title": "Logical &amp;&amp; statement", "body": "<p><code>char c</code>, implies <code>scanf(\"%c\", &amp;c)</code> can only read a single character into char variable <code>c</code>. Hence input <code>197</code> will read as <code>1</code> in to <code>c</code>, making logical <code>&amp;&amp;</code> true.  <a href=\"http://ideone.com/RUFxQU\" rel=\"nofollow\">Look at this compilation</a></p>\n"}], "owner": {"reputation": 6072, "user_id": 1451247, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JCS3K.jpg?s=128&g=1", "display_name": "Evgeniy Kleban", "link": "https://stackoverflow.com/users/1451247/evgeniy-kleban"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 28070148, "answer_count": 2, "score": 0, "last_activity_date": 1421852334, "creation_date": 1421850489, "last_edit_date": 1421852308, "question_id": 28069618, "link": "https://stackoverflow.com/questions/28069618/logical-statement", "title": "Logical &amp;&amp; statement", "body": "<p>I want to understand why following code is not work as it should:</p>\n\n<pre><code> char c;\n\n NSLog(@\"Enter a single character: \");\n scanf(\"%c\", &amp;c);\n\n if (c &gt;= '0' &amp;&amp;  c &lt;= '9') {\n     NSLog(@\"It's a digit\");\n }\n</code></pre>\n\n<p>When I enter a number between 0 and 9 I get correct output - \"It's a digit\". But when I enter something like 197 I get the same output. But in logical operator (&amp;&amp;) both conditions should met. Why does it evaluate to true when the number is larger than 9? </p>\n\n<p>By the way, if case any of you don't know, <code>scanf</code> allows you to input something in the Xcode console or in the terminal.</p>\n"}, {"tags": ["c", "string", "printf"], "answers": [{"comments": [{"owner": {"reputation": 362, "user_id": 4381342, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/169a101b329b4e692ccd07ed16e4589f?s=128&d=identicon&r=PG&f=1", "display_name": "question", "link": "https://stackoverflow.com/users/4381342/question"}, "edited": false, "score": 0, "creation_date": 1421850523, "post_id": 28069591, "comment_id": 44518570, "body": "can u please explain it?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421850726, "post_id": 28069591, "comment_id": 44518701, "body": "Why are you asking in my answer?"}, {"owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "edited": false, "score": 1, "creation_date": 1421851596, "post_id": 28069591, "comment_id": 44519310, "body": "<code>sizeof(int)*CHAR_BIT &#47; 3</code> is enough for <code>INT_MAX</code> in decimal, so a buffer <code>char format[3 + sizeof(int)*CHAR_BIT&#47;3 + 2];</code> is sufficient in this case."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 1, "last_activity_date": 1421850858, "last_edit_date": 1421850858, "creation_date": 1421850435, "answer_id": 28069591, "question_id": 28069543, "link": "https://stackoverflow.com/questions/28069543/printing-specific-character-from-a-string-in-c/28069591#28069591", "title": "Printing specific character from a string in C", "body": "<p>This is the simplest way of achieving what you want.</p>\n\n<pre><code>printf(\"%.*s\\n\", i, string);\n</code></pre>\n\n<p>If you want to generate the format string, you can do it too</p>\n\n<pre><code>char format[100]; /* the size should be estimated by you */\n\nsnprintf(format, sizeof(format), \"%%.%ds\", i);\nprintf(format, string)\n</code></pre>\n\n<p>check the <code>snprintf()</code> return value to ensure that the string was not truncated, if you choos a reasonable size for the format string it will be unlikely, but you should check anyway.</p>\n\n<p>Above, the format specifier means</p>\n\n<ul>\n<li>A literal <code>\"%\"</code></li>\n<li>Then a <code>\".\"</code></li>\n<li>Then the integer <code>\"%d\"</code></li>\n<li>Then the letter <code>\"s\"</code></li>\n</ul>\n\n<p>so the resulting string will be the format string you need to pass to <code>printf()</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "edited": false, "score": 1, "creation_date": 1421850801, "post_id": 28069664, "comment_id": 44518756, "body": "@Gopi; I didn&#39;t downvoted, but your answer is wrong."}, {"owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "edited": false, "score": 0, "creation_date": 1421851955, "post_id": 28069664, "comment_id": 44519554, "body": "That should be <code>sizeof</code> (or <code>strlen(...) + 1</code>, but maybe put it outside the loop) to get <code>c co com </code>."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421852035, "post_id": 28069664, "comment_id": 44519618, "body": "And also, don&#39;t use <code>strlen()</code> that way. Store it somewhere instead of calling it on each iteration."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421852603, "post_id": 28069664, "comment_id": 44519990, "body": "@iharob; Modern compilers are smart enough to optimize it."}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 0, "last_activity_date": 1421852625, "last_edit_date": 1421852625, "creation_date": 1421850634, "answer_id": 28069664, "question_id": 28069543, "link": "https://stackoverflow.com/questions/28069543/printing-specific-character-from-a-string-in-c/28069664#28069664", "title": "Printing specific character from a string in C", "body": "<p>Try this:  </p>\n\n<pre><code>char s[] = \"com\";  \nfor(size_t i = 1; i &lt;= strlen(s); i++)\n{\n    for(int j = 0; j &lt; i; j++)  \n         printf(\"%c\", s[j]);\n    printf(\" \");  \n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "is_accepted": true, "score": 5, "last_activity_date": 1421850825, "creation_date": 1421850825, "answer_id": 28069730, "question_id": 28069543, "link": "https://stackoverflow.com/questions/28069543/printing-specific-character-from-a-string-in-c/28069730#28069730", "title": "Printing specific character from a string in C", "body": "<p>In <code>printf</code> format specifiers, all field widths (before the dot) and precisions (after the dot) can be given as asterisk <code>*</code>. For each asterisk, there must be one additional <code>int</code> argument before the printed object.</p>\n\n<p>So, for your problem:</p>\n\n<pre><code>printf(\"%.*s\", i, string);\n</code></pre>\n\n<p>Note that the additional parameter must be an <code>int</code>, so if you have another integer type, you should cast it:</p>\n\n<pre><code>size_t len = strlen(len);\nif (len &gt; 2) printf(\"%.*s\", (int) (len - 2), string);\n</code></pre>\n"}], "owner": {"reputation": 362, "user_id": 4381342, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/169a101b329b4e692ccd07ed16e4589f?s=128&d=identicon&r=PG&f=1", "display_name": "question", "link": "https://stackoverflow.com/users/4381342/question"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2287, "favorite_count": 0, "accepted_answer_id": 28069730, "answer_count": 3, "score": 0, "last_activity_date": 1421852625, "creation_date": 1421850306, "last_edit_date": 1421850676, "question_id": 28069543, "link": "https://stackoverflow.com/questions/28069543/printing-specific-character-from-a-string-in-c", "title": "Printing specific character from a string in C", "body": "<p>I'm working on prefixing of a string for example : <code>com</code> should give me <code>c</code> <code>co</code> <code>com</code>.\nI know to print a character in this was <code>printf(\"%.5s\",string)</code> to print the first five values. I want to do this in a loop instead of 5 how can I replace it with <code>i</code> which is a incrementing value,something like this <code>printf(\"%.is\",string)</code>. how can I obtain this?   </p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 4, "creation_date": 1421849510, "post_id": 28069269, "comment_id": 44517958, "body": "<code>why would you need separate address for that?</code> - Variable <code>p</code> resides in memory, so it has an address (by the definition of &quot;something that resides in memory&quot;)."}], "answers": [{"comments": [{"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "reply_to_user": {"reputation": 29011, "user_id": 442284, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b5c1e7936dd4e0e08a75b7b16aebb6f1?s=128&d=identicon&r=PG", "display_name": "CashCow", "link": "https://stackoverflow.com/users/442284/cashcow"}, "edited": false, "score": 1, "creation_date": 1421850004, "post_id": 28069291, "comment_id": 44518281, "body": "@CashCow This link has many good answers which says its good to have (void *) while printing pointers <a href=\"http://stackoverflow.com/questions/9053658/correct-format-specifier-to-print-pointer-address\" title=\"correct format specifier to print pointer address\">stackoverflow.com/questions/9053658/&hellip;</a> Standard says <code>p  The void * pointer argument is printed in hexadecimal (as if by %#x or %#lx). it shoud be pointer to void.</code>"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 1, "creation_date": 1421850382, "post_id": 28069291, "comment_id": 44518485, "body": "Do not use the term &quot;double pointer&quot; in this case. It does not mean <i>pointer to pointer</i>. It means &quot;<code>double</code> pointer&quot;."}], "tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 3, "last_activity_date": 1421850004, "last_edit_date": 1421850004, "creation_date": 1421849488, "answer_id": 28069291, "question_id": 28069269, "link": "https://stackoverflow.com/questions/28069269/if-p-is-a-pointer-to-int-where-would-one-use-p/28069291#28069291", "title": "If p is a pointer to int where would one use &amp;p", "body": "<p>If <code>p</code> is pointer to <code>int</code> then </p>\n\n<pre><code>int **q = &amp;p;\n</code></pre>\n\n<p>When you want to use <em>pointer to pointer</em>, then use the address of a single pointer to assign it to pointer to pointer.</p>\n\n<p>Just to make a point that pointer is also a data-type and it stored in the memory location and it holds a valid memory location as its value. The address in which this valid memory location is stored is given by <code>&amp;p</code></p>\n\n<p>Your <code>printf()</code> also needs to be fixed. <code>%p</code> expects <code>void *</code></p>\n\n<pre><code>printf(\"%p\",(void *)p);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421850701, "post_id": 28069376, "comment_id": 44518687, "body": "I think someone downvoted because this is not the question, I think the OP knows this."}, {"owner": {"reputation": 3852, "user_id": 921723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38e3b1e32ece685d794a2d839300166c?s=128&d=identicon&r=PG", "display_name": "Jite", "link": "https://stackoverflow.com/users/921723/jite"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421850800, "post_id": 28069376, "comment_id": 44518754, "body": "<code>and also when would you use &amp;p</code>, i read that as a generic question of pointers. My answer gives a perfect example of when to use it."}, {"owner": {"reputation": 3852, "user_id": 921723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38e3b1e32ece685d794a2d839300166c?s=128&d=identicon&r=PG", "display_name": "Jite", "link": "https://stackoverflow.com/users/921723/jite"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421850980, "post_id": 28069376, "comment_id": 44518895, "body": "I just assumed that if this was known to the author, he wouldn&#39;t have needed to ask the question in the first place. I might have missunderstood it though."}], "tags": [], "owner": {"reputation": 3852, "user_id": 921723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38e3b1e32ece685d794a2d839300166c?s=128&d=identicon&r=PG", "display_name": "Jite", "link": "https://stackoverflow.com/users/921723/jite"}, "is_accepted": false, "score": 2, "last_activity_date": 1421850411, "last_edit_date": 1495540257, "creation_date": 1421849783, "answer_id": 28069376, "question_id": 28069269, "link": "https://stackoverflow.com/questions/28069269/if-p-is-a-pointer-to-int-where-would-one-use-p/28069376#28069376", "title": "If p is a pointer to int where would one use &amp;p", "body": "<p>A trivial example:</p>\n\n<pre><code>int nochange(int *c, int *val)\n{\n    c = val; // Changes local pointer c to point to val\n             // Note that C passes copies of the arguments, not actual references.\n}\nint do_change(int **c, int *val)\n{\n    *c = val; // Accesses the real pointer c at its real location and makes\n              // that one point to val\n              // Even though c is a pointer-to-pointer copy, its value is \n              // copied too, and the value is the address of the real c\n}\n\nint main()\n{\n    int a = 1;\n    int b = 2;\n    int *c = &amp;a; // A pointer is also a datatype that resides in memory\n\n    printf(\"%d\\n\", *c); // Will print 1\n    nochange(c, &amp;b);\n    printf(\"%d\\n\", *c); // Will print 1\n    do_change(&amp;c, &amp;b);\n    printf(\"%d\\n\", *c); // Will print 2 because c now points to b\n}\n</code></pre>\n\n<p>I have a similar answer with a bit more detail here about pointer vs pointer-to-pointer: <a href=\"https://stackoverflow.com/questions/15244429/pointer-of-a-pointer-in-linked-list-append/15244654#15244654\">pointer of a pointer in linked list append</a></p>\n"}, {"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 2, "last_activity_date": 1421850216, "creation_date": 1421850216, "answer_id": 28069503, "question_id": 28069269, "link": "https://stackoverflow.com/questions/28069269/if-p-is-a-pointer-to-int-where-would-one-use-p/28069503#28069503", "title": "If p is a pointer to int where would one use &amp;p", "body": "<blockquote>\n  <p>But i don't get why would you need separate address for that</p>\n</blockquote>\n\n<p>You don't, but there exists the address of operator so you can take the address of a pointer, which is what </p>\n\n<pre><code>printf(\"%p\\n\", &amp;p);\n</code></pre>\n\n<p>is printing.</p>\n\n<blockquote>\n  <p>And also when would you use <code>&amp;p</code></p>\n</blockquote>\n\n<p>There are cases where this might be useful, consider for example that you need to pass a pointer to a function which could be reassigned into the function, you can do something like this</p>\n\n<pre><code>int allocateIntegerArray(int **pointerToPointer, size_t someSize)\n{\n    if (pointerToPointer == NULL)\n        return 0;\n    *pointerToPointer = malloc(someSize * sizeof(int));\n\n    return (*pointerToPointer != NULL);\n}\n</code></pre>\n\n<p>then you could use this funciton the following way</p>\n\n<pre><code>int *pointer;\n\nif (allocateIntergerArray(&amp;pointer, 10) == 0)\n{\n    fprintf(stderr, \"Error, cannot allocate integer array\\n\");\n    /* do some extra cleanup or recover from this error, or exit() */\n    exit(0);\n}\n</code></pre>\n\n<p>The pointers themselves are also variables and as such they need to be sotred somewhere, so the address of a pointer tells you where is the pointer stored, it's value tells you where it is pointing to.</p>\n\n<p>By knowing where it is stored you can do things like the one explained above.</p>\n"}], "owner": {"reputation": 161, "user_id": 4362815, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/10808f4c5a0243cd3e8792f348d5b773?s=128&d=identicon&r=PG&f=1", "display_name": "daft300punk", "link": "https://stackoverflow.com/users/4362815/daft300punk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 460, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1421850411, "creation_date": 1421849412, "last_edit_date": 1421849541, "question_id": 28069269, "link": "https://stackoverflow.com/questions/28069269/if-p-is-a-pointer-to-int-where-would-one-use-p", "title": "If p is a pointer to int where would one use &amp;p", "body": "<p>In the following code p is pointer to an int. It is quite clear that p points to the address of i. Through my research i know &amp;p points to the address of pointer p. But i don't get why would you need separate address for that. And also when would you use &amp;p.</p>\n\n<pre><code>int main() {\n    int i = 3, *p = &amp;i;\n    printf(\"%p\",&amp;p);\n    printf(\"%p\",p);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 561, "user_id": 4402646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e2a354f796bf1b1393cba56952653c1?s=128&d=identicon&r=PG&f=1", "display_name": "Rubix Rechvin", "link": "https://stackoverflow.com/users/4402646/rubix-rechvin"}, "edited": false, "score": 0, "creation_date": 1421848734, "post_id": 28068978, "comment_id": 44517437, "body": "What is meant by &quot;Consider that time I get the last descriptor is 13&quot;?"}, {"owner": {"reputation": 1203, "user_id": 3775099, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DRvde.jpg?s=128&g=1", "display_name": "Bhuvanesh", "link": "https://stackoverflow.com/users/3775099/bhuvanesh"}, "reply_to_user": {"reputation": 561, "user_id": 4402646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e2a354f796bf1b1393cba56952653c1?s=128&d=identicon&r=PG&f=1", "display_name": "Rubix Rechvin", "link": "https://stackoverflow.com/users/4402646/rubix-rechvin"}, "edited": false, "score": 0, "creation_date": 1421848807, "post_id": 28068978, "comment_id": 44517492, "body": "@RubixRechvin - After opening a 10 files, the last opened file got the file descriptor as 13."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 2, "creation_date": 1421848822, "post_id": 28068978, "comment_id": 44517503, "body": "4096 means the maximum file descriptor number that can be opened by this process + 1."}, {"owner": {"reputation": 1203, "user_id": 3775099, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DRvde.jpg?s=128&g=1", "display_name": "Bhuvanesh", "link": "https://stackoverflow.com/users/3775099/bhuvanesh"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421848879, "post_id": 28068978, "comment_id": 44517547, "body": "@iharob - so how to i know the last opened files descriptor??"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 3, "creation_date": 1421848900, "post_id": 28068978, "comment_id": 44517556, "body": "Keep track of the information if you need it."}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1421850149, "post_id": 28068978, "comment_id": 44518367, "body": "I hate it when devs try to come up with cute solutions like this instead just properly tracking their file descriptors. The most straightforward solution is almost always the best."}, {"owner": {"reputation": 18507, "user_id": 13317, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/47a9a5b4589057085336011863d2ee9a?s=128&d=identicon&r=PG", "display_name": "Kenster", "link": "https://stackoverflow.com/users/13317/kenster"}, "edited": false, "score": 0, "creation_date": 1421851226, "post_id": 28068978, "comment_id": 44519055, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/899038/getting-the-highest-allocated-file-descriptor\">Getting the highest allocated file descriptor</a>"}, {"owner": {"reputation": 18507, "user_id": 13317, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/47a9a5b4589057085336011863d2ee9a?s=128&d=identicon&r=PG", "display_name": "Kenster", "link": "https://stackoverflow.com/users/13317/kenster"}, "edited": false, "score": 0, "creation_date": 1421851807, "post_id": 28068978, "comment_id": 44519451, "body": "What specifically do you want to know? The number of the most recently opened file? Or the largest descriptor number? What about files opened by library functions that your program calls? What do you need the value for?"}, {"owner": {"reputation": 537, "user_id": 619595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb10444b71bf5c21f8ce278e7f5e33bf?s=128&d=identicon&r=PG", "display_name": "vtha", "link": "https://stackoverflow.com/users/619595/vtha"}, "edited": false, "score": 0, "creation_date": 1421916726, "post_id": 28068978, "comment_id": 44546813, "body": "You may want to try reading /proc/&lt;pid&gt;/fd directory in your code to see how many fds were opened. Not sure if that is what you are looking for."}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "reply_to_user": {"reputation": 537, "user_id": 619595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb10444b71bf5c21f8ce278e7f5e33bf?s=128&d=identicon&r=PG", "display_name": "vtha", "link": "https://stackoverflow.com/users/619595/vtha"}, "edited": false, "score": 0, "creation_date": 1422011377, "post_id": 28068978, "comment_id": 44591160, "body": "@vtha this would work in a sense, but seems an unnecessarily complicated hack considering the simplicity of the task. Remembering an fd is as simple as storing it in a variable."}], "answers": [{"tags": [], "owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "is_accepted": false, "score": 1, "last_activity_date": 1422011417, "last_edit_date": 1422011417, "creation_date": 1421849139, "answer_id": 28069168, "question_id": 28068978, "link": "https://stackoverflow.com/questions/28068978/how-to-find-the-last-opened-file-descriptor/28069168#28069168", "title": "How to find the last opened file descriptor?", "body": "<p>There is no (sensible) magic way to do this. You must remember it in a variable somewhere. Each time you open a file, update this variable.</p>\n\n<p>(<code>getrlimit</code> with <code>RLIMIT_NOFILE</code> tells you how many files you <em>can</em> open, not how many you <em>have</em> opened).</p>\n"}], "owner": {"reputation": 1203, "user_id": 3775099, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DRvde.jpg?s=128&g=1", "display_name": "Bhuvanesh", "link": "https://stackoverflow.com/users/3775099/bhuvanesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1422011417, "creation_date": 1421848580, "question_id": 28068978, "link": "https://stackoverflow.com/questions/28068978/how-to-find-the-last-opened-file-descriptor", "title": "How to find the last opened file descriptor?", "body": "<p>Consider I have a process called <code>a.out</code> , In that process, i have opened the 10 files using a <code>open()</code> function.</p>\n\n<p>Consider that time I get the last descriptor is 13. So I need to know is there is any way to find the last opened descriptor in the process.</p>\n\n<p>For that I am using a <code>getrlimit</code> like this</p>\n\n<pre><code>   if(getrlimit(RLIMIT_NOFILE,&amp;r1)&lt;0)\n              perror(\"error\");\n</code></pre>\n\n<p>But when I am priting this I get 4096 in my system. SO Is there is any way to do this?</p>\n"}, {"tags": ["c", "unix", "radius"], "answers": [{"tags": [], "owner": {"reputation": 82430, "user_id": 17833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ExIEf.png?s=128&g=1", "display_name": "Petesh", "link": "https://stackoverflow.com/users/17833/petesh"}, "is_accepted": true, "score": 0, "last_activity_date": 1421853347, "creation_date": 1421853347, "answer_id": 28070573, "question_id": 28068694, "link": "https://stackoverflow.com/questions/28068694/is-there-any-way-in-libradius-to-get-radius-ip-address-of-the-server-which-actua/28070573#28070573", "title": "Is there any way in libradius to get RADIUS ip address of the server which actually responded request", "body": "<p>There is no way with the libradius API to determine this information.</p>\n\n<p>Once you've received the response from the server, it's already discarded the information about what server address replied to it.</p>\n\n<p>Your only option would be to make a customized version of libradius that populated this information.</p>\n\n<p>The library itself is quite small, so understanding it in order to make changes of that kind should be quite simple.</p>\n\n<blockquote>\n  <p>This is of course, assuming the <a href=\"https://www.gitorious.org/freebsd/freebsd/source/f1d6f4778d2044502209708bc167c05f9aa48615:lib/libradius\" rel=\"nofollow\">bsd libradius</a>, and not the <a href=\"http://freeradius.org/freeradius-client/\" rel=\"nofollow\">FreeRadius Client Library</a></p>\n</blockquote>\n"}], "owner": {"reputation": 3, "user_id": 4478460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/924eab657751ef39fde85bf2914a18c2?s=128&d=identicon&r=PG&f=1", "display_name": "Oleg", "link": "https://stackoverflow.com/users/4478460/oleg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 28070573, "answer_count": 1, "score": 0, "last_activity_date": 1421853347, "creation_date": 1421847656, "question_id": 28068694, "link": "https://stackoverflow.com/questions/28068694/is-there-any-way-in-libradius-to-get-radius-ip-address-of-the-server-which-actua", "title": "Is there any way in libradius to get RADIUS ip address of the server which actually responded request", "body": "<p>I'm using libradius in my app.\nThe structure <strong>struct rad_handle</strong> where this info is available after call of <strong>rad_send_request()</strong> is private, so i can't access <strong>h->servers[h->srv].addr</strong> from my app.</p>\n\n<p>Is there any way to know which one from several RADIUS servers i previously added with <strong>rad_add_server()</strong> responded to my <strong>RAD_ACCESS_REQUEST</strong> sent by <strong>rad_send_request()</strong>?</p>\n"}, {"tags": ["c++", "c", "linux", "debian", "beagleboneblack"], "answers": [{"comments": [{"owner": {"reputation": 333, "user_id": 3692842, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b65cffa4f6a8e16416a7d137b26f881b?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/3692842/chris"}, "edited": false, "score": 0, "creation_date": 1421853642, "post_id": 28070205, "comment_id": 44520633, "body": "But is creating a daemon the correct way for this particular application? Is a daemon used in userspace or kernel space? Sorry I&#39;m rather new to programming linux"}, {"owner": {"reputation": 324, "user_id": 1320564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7199d4c54adfe89297782670ccd859a7?s=128&d=identicon&r=PG", "display_name": "byron he", "link": "https://stackoverflow.com/users/1320564/byron-he"}, "reply_to_user": {"reputation": 333, "user_id": 3692842, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b65cffa4f6a8e16416a7d137b26f881b?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/3692842/chris"}, "edited": false, "score": 0, "creation_date": 1421854290, "post_id": 28070205, "comment_id": 44521127, "body": "in linux , a daemon is a ordinary process not  attached to a terminal, running in userspace."}], "tags": [], "owner": {"reputation": 324, "user_id": 1320564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7199d4c54adfe89297782670ccd859a7?s=128&d=identicon&r=PG", "display_name": "byron he", "link": "https://stackoverflow.com/users/1320564/byron-he"}, "is_accepted": true, "score": 0, "last_activity_date": 1421852134, "creation_date": 1421852134, "answer_id": 28070205, "question_id": 28068665, "link": "https://stackoverflow.com/questions/28068665/how-to-effectively-run-a-background-processing-and-logging-of-data-debian-beag/28070205#28070205", "title": "How to effectively run a background Processing and Logging of Data (Debian, Beaglebone Black)", "body": "<p>to make a daemon process , just take this as a reference:</p>\n\n<p><a href=\"https://github.com/memcached/memcached/blob/master/daemon.c\" rel=\"nofollow\">https://github.com/memcached/memcached/blob/master/daemon.c</a></p>\n"}], "owner": {"reputation": 333, "user_id": 3692842, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b65cffa4f6a8e16416a7d137b26f881b?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/3692842/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 392, "favorite_count": 0, "accepted_answer_id": 28070205, "answer_count": 1, "score": 0, "last_activity_date": 1421852134, "creation_date": 1421847554, "last_edit_date": 1421850518, "question_id": 28068665, "link": "https://stackoverflow.com/questions/28068665/how-to-effectively-run-a-background-processing-and-logging-of-data-debian-beag", "title": "How to effectively run a background Processing and Logging of Data (Debian, Beaglebone Black)", "body": "<p>I'm looking for some help with an implementation problem I'm facing. I'm an experienced C/C++ programmer in embedded environments and RTOSs, but when it comes to linux I'm a newbie.</p>\n\n<p>I have a beaglebone black running Debian. I need to log and process data from sensors connected to the I2C bus and the ADC. I have written the handler functions for collecting the data from the sensors connected, no problem there, they work fine. I want to implement (similar to a RTOS) a timer interrupt that can throw the process to my handler functions so they can do their things and I want this to run in the background. i.e. I don't want to tie up the shell or whatever so the user can do other things. I was reading that timer_create is a way do this within Debian, or using fork()-exec() but I thought I'd ask people experienced in Linux first before going down any particular path! Also, not 100% sure how to use either of these functions.</p>\n\n<p>side-note: I know that timers etc. are not highly accurate in Linux unless you are implementing pre-emptive kernels or whatever, which is a whole other problem in itself, but the time constraints of this problem are somewhere near 10-50ms which is not extremely tight.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "matlab", "simulink", "matlab-coder"], "answers": [{"tags": [], "owner": {"reputation": 5, "user_id": 4472965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63b772c0b5bd05669beea8da684fbea7?s=128&d=identicon&r=PG&f=1", "display_name": "hans", "link": "https://stackoverflow.com/users/4472965/hans"}, "is_accepted": false, "score": 0, "last_activity_date": 1421919107, "creation_date": 1421919107, "answer_id": 28085240, "question_id": 28068239, "link": "https://stackoverflow.com/questions/28068239/including-c-libraries-in-the-custome-code-section-of-simulink/28085240#28085240", "title": "Including c libraries in the custome code section of Simulink", "body": "<p>I found the c- functions <code>cs_spalloc</code> online, and just copyed it. Now it works.</p>\n"}], "owner": {"reputation": 5, "user_id": 4472965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63b772c0b5bd05669beea8da684fbea7?s=128&d=identicon&r=PG&f=1", "display_name": "hans", "link": "https://stackoverflow.com/users/4472965/hans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 282, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1421919107, "creation_date": 1421846251, "question_id": 28068239, "link": "https://stackoverflow.com/questions/28068239/including-c-libraries-in-the-custome-code-section-of-simulink", "title": "Including c libraries in the custome code section of Simulink", "body": "<p>I'm trying to include <code>Csparse</code> from <code>SuiteSparse</code> in to Simulink.<br>\nI've included the header <code>ch.h</code> and the directory of the c-functions in the custom code section.<br>\n If I call the function <code>cs_compress</code> over <code>code.ceval</code> I get this error:</p>\n\n<pre><code>cs_compress.obj : error LNK2019: unresolved external symbol cs_spalloc referenced in function cs_compress \nTest2_sfun.mexw64 : fatal error LNK1120: 1 unresolved externals \nNMAKE : fatal error U1077: '\"C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\bin\\amd64\\link.exe\"' : return code '0x460' \nStop.\n</code></pre>\n\n<p>The function <code>cs_spalloc</code> I presume is called from a library since there exists no <code>cs_spalloc.c</code>. The function is however defined in the  header file as:</p>\n\n<pre><code>cs *cs_spalloc (csi m, csi n, csi nzmax, csi values, csi triplet) ;\n</code></pre>\n\n<p>Am I right to presume it is called from a library?\nAnd if so where do I find the library in a format to include in to the custom code section in Simulink?</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 8, "creation_date": 1421846364, "post_id": 28068203, "comment_id": 44515964, "body": "In the Northern or Southern hemisphere?"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 5, "creation_date": 1421846526, "post_id": 28068203, "comment_id": 44516055, "body": "How fast are the tape drives, and how quickly can the operator change the reels?"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 3, "creation_date": 1421846812, "post_id": 28068203, "comment_id": 44516215, "body": "If this is indeed a homework question, I suggest you find another college where they ask meaningful questions."}, {"owner": {"reputation": 6383, "user_id": 4371276, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/02ce728cefdf7fcbcff17ee06ad463db?s=128&d=identicon&r=PG&f=1", "display_name": "dmg", "link": "https://stackoverflow.com/users/4371276/dmg"}, "edited": false, "score": 0, "creation_date": 1421847334, "post_id": 28068203, "comment_id": 44516536, "body": "<a href=\"https://en.wikipedia.org/wiki/Big_O_notation\" rel=\"nofollow noreferrer\">This</a> will not answer your question, but it will be more beneficial to you than the answer to your question."}], "answers": [{"tags": [], "owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "is_accepted": false, "score": 3, "last_activity_date": 1421849246, "last_edit_date": 1421849246, "creation_date": 1421848511, "answer_id": 28068957, "question_id": 28068203, "link": "https://stackoverflow.com/questions/28068203/calculate-efficiency-for-insertion-sort-and-merge-sortdaa/28068957#28068957", "title": "Calculate efficiency for insertion sort and merge sort(daa)", "body": "<p>The information given is insufficient to give an exact answer to the question.</p>\n\n<p>The time taken will depend on data itself and the implementation of the algorithm.</p>\n\n<p>It is, of course, possible to make an estimate based on reasonable assumptions.</p>\n\n<p>Insertion sort is <code>O(n^2)</code>, so it will take in the order of <code>K1 * 10^12</code> operations to sort the array, or <code>K1 * 10^4</code> seconds. Insertion sort would probably take several hours, even with an optimized implementation.</p>\n\n<p>Merge sort is <code>O(n * log n)</code>, so it will take in the order of <code>K2 * 10^6 * 6</code> operations to sort the array, or <code>K2 * 6 * 10^(-2)</code> seconds. Merge sort would probably take less than a second.</p>\n\n<p>This example is a good illustrator on why it is important to choose the right algorithm for the job. </p>\n"}], "owner": {"reputation": 9, "user_id": 3252462, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/823eb0ae420c7761aaef96e16a844e34?s=128&d=identicon&r=PG&f=1", "display_name": "user3252462", "link": "https://stackoverflow.com/users/3252462/user3252462"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 0, "answer_count": 1, "score": -18, "last_activity_date": 1421849246, "creation_date": 1421846132, "last_edit_date": 1421846979, "question_id": 28068203, "link": "https://stackoverflow.com/questions/28068203/calculate-efficiency-for-insertion-sort-and-merge-sortdaa", "title": "Calculate efficiency for insertion sort and merge sort(daa)", "body": "<p>Assume that a CPU can process 10^8 operations per second. Suppose you have to sort an array with 10^6 elements?</p>\n\n<p>What is the time taken by insertion sort n merge sort in hr?</p>\n\n<p>Want to know how to calculate the time.</p>\n"}, {"tags": ["android", "c", "location", "android-service"], "comments": [{"owner": {"reputation": 1479, "user_id": 2190945, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JfRhH.jpg?s=128&g=1", "display_name": "Lunchbox", "link": "https://stackoverflow.com/users/2190945/lunchbox"}, "edited": false, "score": 0, "creation_date": 1421849187, "post_id": 28068130, "comment_id": 44517750, "body": "I would suggest that you use fusedlocation. It works brilliantly. Here is the docs: <a href=\"https://developer.android.com/reference/com/google/android/gms/location/FusedLocationProviderApi.html\" rel=\"nofollow noreferrer\">developer.android.com/reference/com/google/android/gms/locat&zwnj;&#8203;ion/&hellip;</a> and this is a pretty good example: <a href=\"http://www.kpbird.com/2013/06/fused-location-provider-example.html\" rel=\"nofollow noreferrer\">kpbird.com/2013/06/fused-location-provider-example.html</a> ."}, {"owner": {"reputation": 23469, "user_id": 775964, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/glHLl.jpg?s=128&g=1", "display_name": "Jeegar Patel", "link": "https://stackoverflow.com/users/775964/jeegar-patel"}, "reply_to_user": {"reputation": 1479, "user_id": 2190945, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JfRhH.jpg?s=128&g=1", "display_name": "Lunchbox", "link": "https://stackoverflow.com/users/2190945/lunchbox"}, "edited": false, "score": 0, "creation_date": 1421902483, "post_id": 28068130, "comment_id": 44541539, "body": "@Lunchbox all that stuff are in java i want in C or c++."}, {"owner": {"reputation": 1479, "user_id": 2190945, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JfRhH.jpg?s=128&g=1", "display_name": "Lunchbox", "link": "https://stackoverflow.com/users/2190945/lunchbox"}, "edited": false, "score": 0, "creation_date": 1421906987, "post_id": 28068130, "comment_id": 44542807, "body": "So I geuss you arent using Android Studio? Sorry for the asumption."}], "answers": [{"comments": [{"owner": {"reputation": 23469, "user_id": 775964, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/glHLl.jpg?s=128&g=1", "display_name": "Jeegar Patel", "link": "https://stackoverflow.com/users/775964/jeegar-patel"}, "edited": false, "score": 0, "creation_date": 1421902406, "post_id": 28068716, "comment_id": 44541512, "body": "No i do not want to keep any part in java. All i need in native. Is there any native api for that?"}, {"owner": {"reputation": 1884, "user_id": 3700330, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/ijdjf.png?s=128&g=1", "display_name": "X.Otano", "link": "https://stackoverflow.com/users/3700330/x-otano"}, "reply_to_user": {"reputation": 23469, "user_id": 775964, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/glHLl.jpg?s=128&g=1", "display_name": "Jeegar Patel", "link": "https://stackoverflow.com/users/775964/jeegar-patel"}, "edited": false, "score": 0, "creation_date": 1526990432, "post_id": 28068716, "comment_id": 87947304, "body": "@JeegarPatel find NDK for Android in Google."}], "tags": [], "owner": {"reputation": 1884, "user_id": 3700330, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/ijdjf.png?s=128&g=1", "display_name": "X.Otano", "link": "https://stackoverflow.com/users/3700330/x-otano"}, "is_accepted": false, "score": 1, "last_activity_date": 1421847711, "creation_date": 1421847711, "answer_id": 28068716, "question_id": 28068130, "link": "https://stackoverflow.com/questions/28068130/how-to-get-network-based-location-in-native-code-in-android/28068716#28068716", "title": "How to get Network based location in Native code in Android?", "body": "<p>You should use NDK. You can develop the main functionality in java using the services provided by Android, and then callback your C code with the results.</p>\n"}, {"comments": [{"owner": {"reputation": 23469, "user_id": 775964, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/glHLl.jpg?s=128&g=1", "display_name": "Jeegar Patel", "link": "https://stackoverflow.com/users/775964/jeegar-patel"}, "edited": false, "score": 1, "creation_date": 1421913239, "post_id": 28083312, "comment_id": 44545240, "body": "yes i agree with that. But android has support of some native services also. Like sensor service is available for native. You can read any sensor value in native"}, {"owner": {"reputation": 1884, "user_id": 3700330, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/ijdjf.png?s=128&g=1", "display_name": "X.Otano", "link": "https://stackoverflow.com/users/3700330/x-otano"}, "reply_to_user": {"reputation": 23469, "user_id": 775964, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/glHLl.jpg?s=128&g=1", "display_name": "Jeegar Patel", "link": "https://stackoverflow.com/users/775964/jeegar-patel"}, "edited": false, "score": 1, "creation_date": 1421914276, "post_id": 28083312, "comment_id": 44545665, "body": "didn&#180;t know that. Thanks!"}], "tags": [], "owner": {"reputation": 1884, "user_id": 3700330, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/ijdjf.png?s=128&g=1", "display_name": "X.Otano", "link": "https://stackoverflow.com/users/3700330/x-otano"}, "is_accepted": true, "score": 1, "last_activity_date": 1421911640, "creation_date": 1421911640, "answer_id": 28083312, "question_id": 28068130, "link": "https://stackoverflow.com/questions/28068130/how-to-get-network-based-location-in-native-code-in-android/28083312#28083312", "title": "How to get Network based location in Native code in Android?", "body": "<p>No, the NDK only supports a limited number of libraries. It is designed to be used for things that are really processor intensive, and thus would actually benefit from being written in a native language. From the docs, only supported areas:</p>\n\n<pre><code>    libc (C library) headers\n    libm (math library) headers\n    JNI interface headers\n    libz (Zlib compression) headers\n    liblog (Android logging) header\n    OpenGL ES 1.1 and OpenGL ES 2.0 (3D graphics libraries) headers\n    libjnigraphics (Pixel buffer access) header (for Android 2.2 and above)\n    Minimal set of headers for C++ support\n</code></pre>\n"}], "owner": {"reputation": 23469, "user_id": 775964, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/glHLl.jpg?s=128&g=1", "display_name": "Jeegar Patel", "link": "https://stackoverflow.com/users/775964/jeegar-patel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 895, "favorite_count": 1, "accepted_answer_id": 28083312, "answer_count": 2, "score": 1, "last_activity_date": 1502543640, "creation_date": 1421845944, "last_edit_date": 1422350736, "question_id": 28068130, "link": "https://stackoverflow.com/questions/28068130/how-to-get-network-based-location-in-native-code-in-android", "title": "How to get Network based location in Native code in Android?", "body": "<p>To get network based location we use below code in java</p>\n\n<pre><code>// Check network provider is available\nif( locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER) ) \n{                    \nlocation = locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);\n}\n</code></pre>\n\n<p><strong>1) So same thing how can i do from Native C code?</strong></p>\n\n<p><strong>2) Is there any native service is available for location  in android?</strong></p>\n"}, {"tags": ["c", "postfix-operator"], "comments": [{"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1421845835, "post_id": 28068030, "comment_id": 44515609, "body": "Sure, how would you evaluate the expression <i>without</i> evaluating the expression?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user539810"}, "edited": false, "score": 2, "creation_date": 1421854210, "post_id": 28068030, "comment_id": 44521060, "body": "Technically the <code>TimeCount</code> will be decremented whether the condition is true or not. If you want it done conditionally, move it inside the if statement (or inside an <code>else</code> statement) and check <code>TimeCount</code> rather than <code>TimeCount--</code>."}], "answers": [{"tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 1, "last_activity_date": 1421846547, "last_edit_date": 1421846547, "creation_date": 1421845840, "answer_id": 28068085, "question_id": 28068030, "link": "https://stackoverflow.com/questions/28068030/postfix-with-if-condition/28068085#28068085", "title": "postfix with if condition", "body": "<p>Yes it does decrement check this</p>\n\n<pre><code>int i=5;\nif(i--  == 0)\n{\n}\nprintf(\"%d\\n\",i);\n</code></pre>\n\n<p><code>i</code> is 4 so <code>i</code> inside <code>if()</code> got decremented . </p>\n\n<p><code>i--</code> is a expression which gets executed like <code>i = i-1</code> and so the value of <code>i</code> will be decremented. </p>\n\n<p>Note the post-decrement returns the value of operand and decrements it.</p>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 4994694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23df66f763955a1e351ec078988ca2aa?s=128&d=identicon&r=PG&f=1", "display_name": "Sneh Kumar", "link": "https://stackoverflow.com/users/4994694/sneh-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1439321969, "last_edit_date": 1439321969, "creation_date": 1439321166, "answer_id": 31950280, "question_id": 28068030, "link": "https://stackoverflow.com/questions/28068030/postfix-with-if-condition/31950280#31950280", "title": "postfix with if condition", "body": "<p>In the statement </p>\n\n<pre><code>if (TimeCount-- == 0)\n</code></pre>\n\n<p>the postfix -- operator has a higher precedence over equality (==) operator.\nSo the <strong>TimeCount is decremented irrespective of the result of if statement because it is decremented before evaluation</strong>.</p>\n\n<p>But remember, <strong>the evaluation will be carried out with the old value (before decrement) of TimeCount</strong> as happens in the case of postfix operators.</p>\n\n<p>So the value of TimeCount will be decremented whatsoever be the result of the if statement.</p>\n"}], "owner": {"reputation": 189, "user_id": 1645601, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d8f880f6d8cd3c447f8816c460bd8595?s=128&d=identicon&r=PG", "display_name": "sw_embed", "link": "https://stackoverflow.com/users/1645601/sw-embed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1130, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1439321969, "creation_date": 1421845693, "last_edit_date": 1429612520, "question_id": 28068030, "link": "https://stackoverflow.com/questions/28068030/postfix-with-if-condition", "title": "postfix with if condition", "body": "<p>I have this condition below:</p>\n\n<pre><code> if (MovementDetected)\n {\n   if (MovementCount++ == 0)\n   {\n     TimeCount = WindowTime; /* e.g this is 10 seconds*/\n   }\n   if (MovementCount &gt; MovementLimit)\n   {\n     MovementWasDetectedPreviously = TRUE;\n   }\n   if (MovementWasDetectedPreviously &amp;&amp; TimeCount-- == 0)\n   {\n    Alarm=TRUE;\n   }\n }\nif (TimeCount-- == 0)\n  {\n    Alarm=FALSE;\n    MovementCount = 0;\n  }\nMovementDetected = FALSE;\n</code></pre>\n\n<p>I am wondering if the condition <strong>\"if (TimeCount-- == 0)\"</strong> will decrement the TimeCount by 1 IF the condition is <strong>NOT TRUE</strong>?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1421841131, "post_id": 28066517, "comment_id": 44512893, "body": "In <code>m=read(fd1,buf2,n);</code> you are trying to read from the end of the file you are writing."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 2, "creation_date": 1421841287, "post_id": 28066517, "comment_id": 44512981, "body": "` if (fd1==0)  printf(&quot;error&quot;);` WRONG. open() returns -1 on error."}], "answers": [{"tags": [], "owner": {"reputation": 3923, "user_id": 3640699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NxDM0.jpg?s=128&g=1", "display_name": "Karthikeyan.R.S", "link": "https://stackoverflow.com/users/3640699/karthikeyan-r-s"}, "is_accepted": false, "score": 2, "last_activity_date": 1421843223, "last_edit_date": 1421843223, "creation_date": 1421841473, "answer_id": 28066702, "question_id": 28066517, "link": "https://stackoverflow.com/questions/28066517/unix-read-write-function/28066702#28066702", "title": "UNIX read ()/write() function", "body": "<p>After the First read file offset has moved to 7th byte of the file. To get back that to starting position use the <code>lseek</code> function. </p>\n\n<pre><code>off_t lseek(int fd, off_t offset, int whence);\n</code></pre>\n\n<p>in your case:</p>\n\n<pre><code>lseek(fd1, 0, SEEK_SET); // reposition fd1 to beginning of file\n</code></pre>\n\n<p>and checking the condition you have to compare the return value of <code>open</code> with <code>-1</code>.</p>\n\n<pre><code>if ( fd1 == -1 )\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 3849069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fef75371e4f749f856d4085b3f6023ec?s=128&d=identicon&r=PG&f=1", "display_name": "shivi", "link": "https://stackoverflow.com/users/3849069/shivi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1421843223, "creation_date": 1421840907, "question_id": 28066517, "link": "https://stackoverflow.com/questions/28066517/unix-read-write-function", "title": "UNIX read ()/write() function", "body": "<p>I wrote one program .Its working fine till printing n variable after that its not printing buf2.Can anyone tell me why its happening and what should be the right approach?Same approach working fine for test.txt which is already created but not working for file.txt which we are creating in this code only</p>\n\n<pre><code> #include&lt;sys/stat.h&gt;\n #include&lt;sys/types.h&gt;\n #include&lt;stdio.h&gt;\n #include&lt;fcntl.h&gt;\n int main()\n{\n int fd1,m,n;\n int fd2;\n fd2=open(\"test.txt\",O_RDWR);\n fd1=open(\"file.txt\",O_CREAT|O_RDWR,S_IRWXU);\n    if (fd1==0)\n      printf(\"error\");\n    else\n     printf(\"file created \\t %d\\n\",fd1);\n char buf[6];\n fgets(buf,6,stdin);\n printf(\"%s\",buf);\n\n n=write(fd1,buf,6);\n printf(\"\\n\\n%d\",n);\n char buf2[6];\n\n read (fd2, buf2,6) ;\n\n printf(\"final \\t %s\",buf2);\n //From here not getting desired o/p\n m=read(fd1,buf2,n);\n printf(\"\\n\\n%d\",m);\n printf(\"\\nstring is \\n\");\n\n write(1,buf2,m);\n\n close(fd1);\n return 0;\n }\n</code></pre>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 2, "creation_date": 1421841910, "post_id": 28066697, "comment_id": 44513338, "body": "+1 But I would also recommend making type definition for the function pointer <code>typedef char* (*T)(void)</code>, so it could be written like normal arrays are: <code>T array[]</code>."}], "tags": [], "owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "is_accepted": true, "score": 5, "last_activity_date": 1421842414, "last_edit_date": 1421842414, "creation_date": 1421841464, "answer_id": 28066697, "question_id": 28066510, "link": "https://stackoverflow.com/questions/28066510/passing-array-of-functions-as-argument-to-function/28066697#28066697", "title": "Passing array of functions as argument to function", "body": "<p>The parameter has the same type as the array, except that you can omit the size:</p>\n\n<pre><code>void print(char* (*p[])(void)) { ... }\n</code></pre>\n\n<p>You can also use the fact that the array decays into a pointer and declare:</p>\n\n<pre><code>void print(char* (**p)(void)) { ... }\n</code></pre>\n\n<p>These function signatures are equivalent. In the function, call the function with either of these:</p>\n\n<pre><code>char *a = (*p)();\nchar *b = (p[0])();\n</code></pre>\n\n<p>These calls are equivalent, too.</p>\n\n<p>But, as user694733 points out in the comments, everything is made easier by making a <code>typedef</code> for functions of a certain signature, say:</p>\n\n<pre><code>typedef char *(*Charpfunc)(void);\n</code></pre>\n\n<p>Then you can just use the familiar syntax for your arrays and function parameters:</p>\n\n<pre><code>char *hello(void) { return \"hello\"; }\nchar *howdy(void) { return \"howdy\"; }\nchar *goodbye(void) { return \"goodbye\"; }\n\ntypedef char *(*Charpfunc)(void);\n\nvoid print(Charpfunc *p)\n{\n    while (*p) {\n        puts((*p)());\n        p++;\n    }\n}\n\nint main()\n{\n    Charpfunc funcs[] = {\n        hello, howdy, goodbye, NULL\n    };\n\n    print(funcs);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 6147, "user_id": 948652, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/22ed67baa24e475226ef327a818e4ffd?s=128&d=identicon&r=PG", "display_name": "arynaq", "link": "https://stackoverflow.com/users/948652/arynaq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 1, "accepted_answer_id": 28066697, "answer_count": 1, "score": 1, "last_activity_date": 1421842414, "creation_date": 1421840890, "question_id": 28066510, "link": "https://stackoverflow.com/questions/28066510/passing-array-of-functions-as-argument-to-function", "title": "Passing array of functions as argument to function", "body": "<p>My C is a bit rusty. Suppose I have the following</p>\n\n<pre><code>char* (*funcs[n])(void);\n</code></pre>\n\n<p>How would I define or declare another function to take this array as parameter. I tried with</p>\n\n<pre><code>void func(char* (*p)(void));\n</code></pre>\n\n<p>But gcc complains. </p>\n"}, {"tags": ["c", "posix", "standards", "semaphore", "sysv-ipc"], "comments": [{"owner": {"reputation": 31206, "user_id": 18017, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/PNf9N.png?s=128&g=1", "display_name": "Airsource Ltd", "link": "https://stackoverflow.com/users/18017/airsource-ltd"}, "edited": false, "score": 1, "creation_date": 1422349446, "post_id": 28066152, "comment_id": 44703459, "body": "Is this answered by <a href=\"http://stackoverflow.com/questions/2053679/how-do-i-recover-a-semaphore-when-the-process-that-decremented-it-to-zero-crashe\" title=\"how do i recover a semaphore when the process that decremented it to zero crashe\">stackoverflow.com/questions/2053679/&hellip;</a>"}, {"owner": {"reputation": 6356, "user_id": 1109725, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab7e17981e19525fe1bed0878d0d2cc9?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/1109725/joe"}, "reply_to_user": {"reputation": 31206, "user_id": 18017, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/PNf9N.png?s=128&g=1", "display_name": "Airsource Ltd", "link": "https://stackoverflow.com/users/18017/airsource-ltd"}, "edited": false, "score": 1, "creation_date": 1422349724, "post_id": 28066152, "comment_id": 44703584, "body": "Yes and no. I was hoping for some authoritative source on POSIX semaphores leaving things in an indeterminate state as a result of a crash. That link certainly offers a way to handle such a situation but without explaining the why / how of what seems to be an oversight from the POSIX spec. I just used SYS V semaphores in the end, but I&#39;m curious to know why POSIX doesn&#39;t mandate what seems like the only sensible behaviour of a mutex in a crash."}, {"owner": {"reputation": 31206, "user_id": 18017, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/PNf9N.png?s=128&g=1", "display_name": "Airsource Ltd", "link": "https://stackoverflow.com/users/18017/airsource-ltd"}, "edited": false, "score": 1, "creation_date": 1422351160, "post_id": 28066152, "comment_id": 44704327, "body": "Well: <a href=\"http://charette.no-ip.com:81/programming/2010-01-13_PosixSemaphores/\" rel=\"nofollow noreferrer\">charette.no-ip.com:81/programming/2010-01-13_PosixSemaphores</a> - also using the file locking solution."}, {"owner": {"reputation": 12687, "user_id": 2809095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/705cfb2d48f12159ebae7d0275355a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Iwillnotexist Idonotexist", "link": "https://stackoverflow.com/users/2809095/iwillnotexist-idonotexist"}, "edited": false, "score": 0, "creation_date": 1422396577, "post_id": 28066152, "comment_id": 44731062, "body": "The topic is debated in answers to the following question: <a href=\"http://stackoverflow.com/questions/368322/differences-between-system-v-and-posix-semaphores\" title=\"differences between system v and posix semaphores\">stackoverflow.com/questions/368322/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 6356, "user_id": 1109725, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab7e17981e19525fe1bed0878d0d2cc9?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/1109725/joe"}, "edited": false, "score": 0, "creation_date": 1422875839, "post_id": 28276271, "comment_id": 44907459, "body": "But there&#39;s no guarantee which thread catches a SEGV. So there&#39;s no guarantee you&#39;ll be in the thread that owns the lock."}, {"owner": {"reputation": 557, "user_id": 350600, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d9b3660f3a07ae33d3f007404fd82639?s=128&d=identicon&r=PG", "display_name": "Pointer", "link": "https://stackoverflow.com/users/350600/pointer"}, "reply_to_user": {"reputation": 6356, "user_id": 1109725, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab7e17981e19525fe1bed0878d0d2cc9?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/1109725/joe"}, "edited": false, "score": 0, "creation_date": 1422879442, "post_id": 28276271, "comment_id": 44909443, "body": "I guess semaphores have no notion of ownership, mutexes do."}], "tags": [], "owner": {"reputation": 557, "user_id": 350600, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d9b3660f3a07ae33d3f007404fd82639?s=128&d=identicon&r=PG", "display_name": "Pointer", "link": "https://stackoverflow.com/users/350600/pointer"}, "is_accepted": false, "score": -1, "last_activity_date": 1422874868, "creation_date": 1422874868, "answer_id": 28276271, "question_id": 28066152, "link": "https://stackoverflow.com/questions/28066152/equivalent-of-sys-v-sem-undo-for-posix-semaphores/28276271#28276271", "title": "Equivalent of Sys V SEM_UNDO for posix semaphores", "body": "<p>You can use signal handler for SIGSEGV and then do unlock and remove the signal handler.</p>\n\n<pre><code>// set handler\nsignal(SIGSEGV, handler);\n\nvoid handler(int signum) {\n// unlock the locked semaphores\nsignal(SIGSEGV, SIG_DFL);\n}\n</code></pre>\n"}], "owner": {"reputation": 6356, "user_id": 1109725, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab7e17981e19525fe1bed0878d0d2cc9?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/1109725/joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 766, "favorite_count": 1, "answer_count": 1, "score": 8, "last_activity_date": 1432030140, "creation_date": 1421839824, "last_edit_date": 1432030140, "question_id": 28066152, "link": "https://stackoverflow.com/questions/28066152/equivalent-of-sys-v-sem-undo-for-posix-semaphores", "title": "Equivalent of Sys V SEM_UNDO for posix semaphores", "body": "<p>In a Linux system with multiple processes system V semaphores allow an option of SEM_UNDO preventing a semaphore from getting \"stuck\" if a process holding the semaphore crashes. What is the correct method to prevent POSIX semaphores getting jammed as a result of a crash in a process holding the semaphore? Or does POSIX <strong>guarantee</strong> that the semaphore is freed in the case of a crash?</p>\n"}, {"tags": ["c", "pointers", "portability", "dynamic-memory-allocation", "bmp"], "comments": [{"owner": {"reputation": 2801, "user_id": 904194, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/KGqRa.png?s=128&g=1", "display_name": "mrk", "link": "https://stackoverflow.com/users/904194/mrk"}, "edited": false, "score": 0, "creation_date": 1421838756, "post_id": 28065742, "comment_id": 44511492, "body": "Just keep a <code>char **pixeels</code> and multiply by 3 each time you want to reallocate."}, {"owner": {"reputation": 325, "user_id": 4464062, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0NUbW.png?s=128&g=1", "display_name": "Arashium", "link": "https://stackoverflow.com/users/4464062/arashium"}, "edited": false, "score": 1, "creation_date": 1421838918, "post_id": 28065742, "comment_id": 44511583, "body": "usage of <code>preprocessor statements</code> ?"}, {"owner": {"reputation": 551, "user_id": 3000271, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/40868737f7c22bc2e27a64ab6d098aa3?s=128&d=identicon&r=PG&f=1", "display_name": "BigBadWolf", "link": "https://stackoverflow.com/users/3000271/bigbadwolf"}, "reply_to_user": {"reputation": 2801, "user_id": 904194, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/KGqRa.png?s=128&g=1", "display_name": "mrk", "link": "https://stackoverflow.com/users/904194/mrk"}, "edited": false, "score": 0, "creation_date": 1421839182, "post_id": 28065742, "comment_id": 44511739, "body": "@saadtaame: having an array of lines, to account for width and height, I would already have a pointer-pointer, adding the necessity to allways allocate 3sizeof(char) for every pixel greatly diminishes the readability and simplicity of the code. It&#39;s supposed to be easily understandable for my colleagues.  Arashium: writing a struct to file needs either #pragma or <i>attribute</i>&#39;s, which are specific to the gcc and won&#39;t compile on different platforms."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1421840335, "post_id": 28065742, "comment_id": 44512383, "body": "You know <code>sizeof(char)</code> is always 1?"}, {"owner": {"reputation": 551, "user_id": 3000271, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/40868737f7c22bc2e27a64ab6d098aa3?s=128&d=identicon&r=PG&f=1", "display_name": "BigBadWolf", "link": "https://stackoverflow.com/users/3000271/bigbadwolf"}, "edited": false, "score": 0, "creation_date": 1421846126, "post_id": 28065742, "comment_id": 44515808, "body": "I do, yes. It&#39;s just that I&#39;m working on an assignment and the coding standard requirements that I was handed specify that I need to write it like this, so I got used to it by now. I hope it&#39;s not too inconvenient to read."}], "answers": [{"comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 3, "creation_date": 1421839569, "post_id": 28065937, "comment_id": 44511955, "body": "You cannot make 3D array into jagged array just by pretending that pointer is <code>char***</code>."}, {"owner": {"reputation": 551, "user_id": 3000271, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/40868737f7c22bc2e27a64ab6d098aa3?s=128&d=identicon&r=PG&f=1", "display_name": "BigBadWolf", "link": "https://stackoverflow.com/users/3000271/bigbadwolf"}, "edited": false, "score": 0, "creation_date": 1421839862, "post_id": 28065937, "comment_id": 44512108, "body": "Great and readable solution, thank you! Just one question though, wouldn&#39;t I have to allocate the char* inside the char** seperately, for the allocation to work? (to my understanding) it seems that your code allocates 300 times the type of char*** but leaves the char** and char* unallocated. (unless I just confused myself)"}, {"owner": {"reputation": 551, "user_id": 3000271, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/40868737f7c22bc2e27a64ab6d098aa3?s=128&d=identicon&r=PG&f=1", "display_name": "BigBadWolf", "link": "https://stackoverflow.com/users/3000271/bigbadwolf"}, "edited": false, "score": 0, "creation_date": 1421851418, "post_id": 28065937, "comment_id": 44519182, "body": "thanks! I salute you for the effort and thank you, but that method will not work for large dimensions, as my dimensions go to INT_MAX * INT_MAX. (I know it&#39;s not useful to make dimensions that big, but again, it&#39;s the assignment..) So I guess I will have to settle for char***."}], "tags": [], "owner": {"reputation": 2162, "user_id": 2534472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d8dce53c214aa63495ff868b09a1a4?s=128&d=identicon&r=PG", "display_name": "UniversE", "link": "https://stackoverflow.com/users/2534472/universe"}, "is_accepted": false, "score": -2, "last_activity_date": 1421848002, "last_edit_date": 1421848002, "creation_date": 1421839141, "answer_id": 28065937, "question_id": 28065742, "link": "https://stackoverflow.com/questions/28065742/c-dynamic-memory-allocation-using-pointer-to-array-with-fixed-number-of-chars/28065937#28065937", "title": "C: Dynamic memory allocation using pointer to array with fixed number of chars", "body": "<p><s>If you don't want structs, you can't avoid writing <code>char***</code>.</p>\n\n<p>But you can use a type, to make it more <em>stylish</em>.</p>\n\n<p>So the best solution matching your requirements seems to be:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n\ntypedef char*** pixelmap_t;\n\nint main() {\n\n  int channels = 3, width = 10, height = 10;\n\n  pixelmap_t test = malloc(width*height*channels);\n\n  int x = 1, y = 2, channel = 0;\n\n  test[x][y][channel] = 3;\n\n  free(test);\n\n  return 0;\n}\n</code></pre>\n\n<p></s></p>\n\n<p>It seems, I totally fucked up. I confused the following two things:</p>\n\n<ol>\n<li><p>When you declare a static 3D-Array <code>pixels[100][100][3]</code>, then the type is <strong>not</strong> <code>char***</code>. It is a one-dimensional array of 300 consecutive items in memory.</p></li>\n<li><p>When you declare a <code>char***</code> and assign 300 items in memory, then dereferencing all of the dimensions with the <code>pixels[x][y][z]</code> syntax results in derefrencing the first dimension and interpreting the value in memory as pointer and derefrencing this pointer instead of computing the correct offset in a 3D-Array.</p></li>\n</ol>\n\n<p>That means, I overlooked, that the <code>array[x][y][z]</code> accessor syntax has two different semantics. The first I would call the <code>array ([x][y][z])</code> semantic for 3D-arrays and the second I would call the <code>((array[x])[y])[z]</code> semantics for <code>char***</code> (I used the brackets for emphasizing).</p>\n\n<p>This code snipped compiles and works (tested it) - but does <strong>not</strong> use heap memory.\nFor heap memory I don't know an other solution than those, which have been posted already (<code>malloc(width*height*channels)</code> and access with <code>pixels[c + channels*(y + x*height)]</code>).</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nint main() {\n\n  int channels = 3, width = 10, height = 10;\n\n  char test[width][height][channels];\n\n  char *ptr = (char*) test;\n  for (int i = 0 ; i &lt; channels * width * height ; i++) {\n    ptr[i] = (char) (i % 255);\n  }\n\n  for (int x = 0 ; x &lt; width ; x++) {\n    for (int y = 0 ; y &lt; height ; y++) {\n        for (int c = 0 ; c &lt; channels ; c++) {\n            int d = (int) test[x][y][c];\n            printf(\"%d %d - %d : %d\\n\", x, y, c, d);\n        }\n    }\n  }\n\n  return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2162, "user_id": 2534472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d8dce53c214aa63495ff868b09a1a4?s=128&d=identicon&r=PG", "display_name": "UniversE", "link": "https://stackoverflow.com/users/2534472/universe"}, "edited": false, "score": 0, "creation_date": 1421839451, "post_id": 28065943, "comment_id": 44511892, "body": "1. your cast should be <code>(char*)</code>, not <code>(char**)</code> and 2. you can&#39;t access a <code>char*</code> with the convenient <code>pixels[x][y][channel]</code> syntax."}, {"owner": {"reputation": 2801, "user_id": 904194, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/KGqRa.png?s=128&g=1", "display_name": "mrk", "link": "https://stackoverflow.com/users/904194/mrk"}, "reply_to_user": {"reputation": 2162, "user_id": 2534472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d8dce53c214aa63495ff868b09a1a4?s=128&d=identicon&r=PG", "display_name": "UniversE", "link": "https://stackoverflow.com/users/2534472/universe"}, "edited": false, "score": 0, "creation_date": 1421839493, "post_id": 28065943, "comment_id": 44511917, "body": "Fixed, thank you! That&#39;s true but you can write one line functions (or macros) to do that easily."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "reply_to_user": {"reputation": 2162, "user_id": 2534472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d8dce53c214aa63495ff868b09a1a4?s=128&d=identicon&r=PG", "display_name": "UniversE", "link": "https://stackoverflow.com/users/2534472/universe"}, "edited": false, "score": 0, "creation_date": 1421839765, "post_id": 28065943, "comment_id": 44512050, "body": "@UniversE You cannot use the &quot;convenient syntax&quot; at all, because compler doesn&#39;t know the 3D array dimensions."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 2, "creation_date": 1421840064, "post_id": 28065943, "comment_id": 44512233, "body": "@saadtaame Note that casting result of malloc is unnecessary in C. Also <code>sizeof(char)</code> is always <code>1</code> by definition, so it is also unnecessary."}, {"owner": {"reputation": 2162, "user_id": 2534472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d8dce53c214aa63495ff868b09a1a4?s=128&d=identicon&r=PG", "display_name": "UniversE", "link": "https://stackoverflow.com/users/2534472/universe"}, "edited": false, "score": 0, "creation_date": 1421846974, "post_id": 28065943, "comment_id": 44516313, "body": "@saadtaame maybe you can add to this answer, how to access a specific element by using x, y and the channel-index. Then I would consider this the best answer for heap memory."}], "tags": [], "owner": {"reputation": 2801, "user_id": 904194, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/KGqRa.png?s=128&g=1", "display_name": "mrk", "link": "https://stackoverflow.com/users/904194/mrk"}, "is_accepted": false, "score": 1, "last_activity_date": 1421849454, "last_edit_date": 1421849454, "creation_date": 1421839151, "answer_id": 28065943, "question_id": 28065742, "link": "https://stackoverflow.com/questions/28065742/c-dynamic-memory-allocation-using-pointer-to-array-with-fixed-number-of-chars/28065943#28065943", "title": "C: Dynamic memory allocation using pointer to array with fixed number of chars", "body": "<p>You can simulate this using a 1D array. Say you want to allocate a <code>wxh</code> rectangle of pixels. You could write.</p>\n\n<pre><code>char *pixels = (char *) malloc(w*h*3*sizeof(char));\n</code></pre>\n\n<p>Now the 3 color bytes appear contiguous in memory and you can access any cell using some arithmetic</p>\n\n<p>You can get/set the color channels at cell <code>(i,j)</code> by defining the macros:</p>\n\n<pre><code>#define r(p, i, j) ((p)[(3*((w)*(i)+(j)))])\n#define g(p, i, j) ((p)[(3*((w)*(i)+(j)) + 1)])\n#define b(p, i, j) ((p)[(3*((w)*(i)+(j)) + 2)])\n</code></pre>\n\n<p>Call looks like <code>r(pixels, 0, 1)</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "is_accepted": false, "score": 3, "last_activity_date": 1421847055, "last_edit_date": 1421847055, "creation_date": 1421839699, "answer_id": 28066122, "question_id": 28065742, "link": "https://stackoverflow.com/questions/28065742/c-dynamic-memory-allocation-using-pointer-to-array-with-fixed-number-of-chars/28066122#28066122", "title": "C: Dynamic memory allocation using pointer to array with fixed number of chars", "body": "<p>Do you mean <code>N</code> blocks of 3 <code>unsigned char</code>' s [0...255]?</p>\n\n<p>Note the difference:</p>\n\n<p><code>unsigned char *pixel[3]</code>  -> array of pointers to char</p>\n\n<p>Vs</p>\n\n<p><code>unsigned char (*pixel)[3]</code> -> pointer to array of chars</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define N 4\n\nint main(void)\n{\n    unsigned char (*pixel)[3];\n\n    pixel = malloc(sizeof(*pixel) * N);\n    pixel[0][0] = 0;\n    pixel[0][1] = 128;\n    pixel[0][2] = 255;\n    /* ... */\n    pixel[3][0] = 0;\n    pixel[3][1] = 128;\n    pixel[3][2] = 255;\n\n    printf(\"R:%d G:%d B:%d\\n\", pixel[0][0], pixel[0][1], pixel[0][2]);\n    free(pixel);\n    return 0;\n}\n</code></pre>\n\n<p>If you don't know <code>N</code> before hand replace <code>malloc</code> with <code>realloc</code></p>\n"}], "owner": {"reputation": 551, "user_id": 3000271, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/40868737f7c22bc2e27a64ab6d098aa3?s=128&d=identicon&r=PG&f=1", "display_name": "BigBadWolf", "link": "https://stackoverflow.com/users/3000271/bigbadwolf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 640, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1421849454, "creation_date": 1421838632, "question_id": 28065742, "link": "https://stackoverflow.com/questions/28065742/c-dynamic-memory-allocation-using-pointer-to-array-with-fixed-number-of-chars", "title": "C: Dynamic memory allocation using pointer to array with fixed number of chars", "body": "<p>so I guess this is more a stylistic question.</p>\n\n<p>I need to write into a dynamic array of elements with the size of 3 bytes. (bitmap with pixel size of 24bpp)</p>\n\n<p>So, every element would have to be a char[3].\nIf I want to avoid using a <code>struct pixel{ char R, char G, char B}</code>, to avoid the usage of preprocessor statements, is it possible to write it as </p>\n\n<pre><code>char* pixel[3]\n</code></pre>\n\n<p>and allocate in steps of <code>3*sizeof(char)</code>?</p>\n\n<p>To account for height and width, I would need a char** pixel[3], and having to allocate in single char steps would make that a char*** pixel.</p>\n\n<p>So I guess I'm looking for a way to avoid using a pointer-pointer-pointer.\nThanks!</p>\n"}, {"tags": ["c", "microcontroller", "led", "lcd"], "comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1421838857, "post_id": 28065720, "comment_id": 44511540, "body": "What values do <code>str_2</code> and <code>i</code> have?"}, {"owner": {"reputation": 46708, "user_id": 179715, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e240f1a5bb197450dfb8934dd55d9e3a?s=128&d=identicon&r=PG", "display_name": "jamesdlin", "link": "https://stackoverflow.com/users/179715/jamesdlin"}, "edited": false, "score": 1, "creation_date": 1421839091, "post_id": 28065720, "comment_id": 44511678, "body": "What is the return type of <code>OWReadByte()</code>?  Hint: the <code>%02X</code> format specifier means that you print a <i>minimum</i> of two hexadecimal digits, <i>not</i> a maximum."}, {"owner": {"reputation": 146, "user_id": 4457720, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed04c94f4fc3145a5dd2bdef8e606a93?s=128&d=identicon&r=PG&f=1", "display_name": "s3v3ns", "link": "https://stackoverflow.com/users/4457720/s3v3ns"}, "edited": false, "score": 0, "creation_date": 1421839440, "post_id": 28065720, "comment_id": 44511887, "body": "str_2 has a value of 8 and the value from OWReadByte is 8 bits long Int. I removed the i*2"}, {"owner": {"reputation": 4709, "user_id": 2001149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SqsJM.png?s=128&g=1", "display_name": "Santosh A", "link": "https://stackoverflow.com/users/2001149/santosh-a"}, "edited": false, "score": 5, "creation_date": 1421840287, "post_id": 28065720, "comment_id": 44512357, "body": "Should <code>sprintf(str_2, &quot;X&quot;, ~OWReadByte());</code> be <code>sprintf(str_2, &quot;%X&quot;, ~OWReadByte());</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1421840624, "post_id": 28065720, "comment_id": 44512579, "body": "<i>&quot;the value from <code>OWReadByte</code> is 8 bits long Int&quot;</i>. Do you mean &quot;8-bit <code>long Int</code>&quot; or &quot;8-bit long <code>Int</code>&quot;? Please show the declaration of <code>OWReadByte</code>. Either way, it is not a <code>char</code> type so @mafso is correct. <code>~0xFE = 0xFF01</code>"}, {"owner": {"reputation": 146, "user_id": 4457720, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed04c94f4fc3145a5dd2bdef8e606a93?s=128&d=identicon&r=PG&f=1", "display_name": "s3v3ns", "link": "https://stackoverflow.com/users/4457720/s3v3ns"}, "edited": false, "score": 0, "creation_date": 1421840772, "post_id": 28065720, "comment_id": 44512668, "body": "It is just int, sorry for the confusion, as proof int OWReadByte(void)"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1421840803, "post_id": 28065720, "comment_id": 44512694, "body": "In that case please understand and accept the answer - you have to mask off the unwanted bits."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1421841067, "post_id": 28065720, "comment_id": 44512861, "body": "Do you want the &quot;<i>one byte</i>&quot; to be signed of unsigned? This is: do you want it to represent the values <code>0..255</code> or <code>-127..127</code>?"}, {"owner": {"reputation": 146, "user_id": 4457720, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed04c94f4fc3145a5dd2bdef8e606a93?s=128&d=identicon&r=PG&f=1", "display_name": "s3v3ns", "link": "https://stackoverflow.com/users/4457720/s3v3ns"}, "edited": false, "score": 0, "creation_date": 1421841331, "post_id": 28065720, "comment_id": 44513000, "body": "So i tried masking like this <code>sprintf(str_2, &quot;%X&quot;, (~OWReadByte()&amp;0xFF));</code> But, i am losing zeroes now."}, {"owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "edited": false, "score": 1, "creation_date": 1421841419, "post_id": 28065720, "comment_id": 44513051, "body": "@s3v3ns: For the zeros, you need a minimum field width of 2 and the  <code>0</code> flag (to pad with 0 instead of spaces): &quot;%02X&quot; ;)"}, {"owner": {"reputation": 146, "user_id": 4457720, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed04c94f4fc3145a5dd2bdef8e606a93?s=128&d=identicon&r=PG&f=1", "display_name": "s3v3ns", "link": "https://stackoverflow.com/users/4457720/s3v3ns"}, "edited": false, "score": 0, "creation_date": 1421841540, "post_id": 28065720, "comment_id": 44513130, "body": "That made it work, thanks. There is this 1 thing tho, but this is probably from my functions. From the example program that i have, i can see that the hexes are printed other way around (e.g.) i have B3 D4 DC 07 00 00  example has 00 00 07 DC D4 B3"}, {"owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "edited": false, "score": 1, "creation_date": 1421842059, "post_id": 28065720, "comment_id": 44513415, "body": "That looks like an <a href=\"https://en.wikipedia.org/wiki/Endianness\" rel=\"nofollow noreferrer\">endianness</a> issue. A value and its representation are really two things. Anyway, that&#39;s a different question."}], "answers": [{"comments": [{"owner": {"reputation": 146, "user_id": 4457720, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed04c94f4fc3145a5dd2bdef8e606a93?s=128&d=identicon&r=PG&f=1", "display_name": "s3v3ns", "link": "https://stackoverflow.com/users/4457720/s3v3ns"}, "edited": false, "score": 0, "creation_date": 1421839478, "post_id": 28065995, "comment_id": 44511905, "body": "It returns a int. Hex value that is 8 bits."}, {"owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "reply_to_user": {"reputation": 146, "user_id": 4457720, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed04c94f4fc3145a5dd2bdef8e606a93?s=128&d=identicon&r=PG&f=1", "display_name": "s3v3ns", "link": "https://stackoverflow.com/users/4457720/s3v3ns"}, "edited": false, "score": 1, "creation_date": 1421839666, "post_id": 28065995, "comment_id": 44512002, "body": "8-bit types get promoted to <code>int</code> (and a value is a value, &quot;hex&quot; is a way to <i>represent</i> certain values)."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 146, "user_id": 4457720, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed04c94f4fc3145a5dd2bdef8e606a93?s=128&d=identicon&r=PG&f=1", "display_name": "s3v3ns", "link": "https://stackoverflow.com/users/4457720/s3v3ns"}, "edited": false, "score": 0, "creation_date": 1421839783, "post_id": 28065995, "comment_id": 44512063, "body": "@s3v3ns the format specifiers cannot be used to truncate (except decimal places) - if the value does not fit the format, then the format breaks, not the value."}, {"owner": {"reputation": 146, "user_id": 4457720, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed04c94f4fc3145a5dd2bdef8e606a93?s=128&d=identicon&r=PG&f=1", "display_name": "s3v3ns", "link": "https://stackoverflow.com/users/4457720/s3v3ns"}, "edited": false, "score": 0, "creation_date": 1421839793, "post_id": 28065995, "comment_id": 44512068, "body": "Well the whole idea is printing the hex value onto the LCD (I know hex and binary is pretty much the same). I said it the way I said it, because in my mind it made things a bit clearer."}, {"owner": {"reputation": 146, "user_id": 4457720, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed04c94f4fc3145a5dd2bdef8e606a93?s=128&d=identicon&r=PG&f=1", "display_name": "s3v3ns", "link": "https://stackoverflow.com/users/4457720/s3v3ns"}, "edited": false, "score": 0, "creation_date": 1421840100, "post_id": 28065995, "comment_id": 44512254, "body": "Well i had never used format specifiers before and i just used them blindly out of frustrating in hopes they will work, i will edit the code so people can leave that part alone"}, {"owner": {"reputation": 146, "user_id": 4457720, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed04c94f4fc3145a5dd2bdef8e606a93?s=128&d=identicon&r=PG&f=1", "display_name": "s3v3ns", "link": "https://stackoverflow.com/users/4457720/s3v3ns"}, "edited": false, "score": 0, "creation_date": 1421840426, "post_id": 28065995, "comment_id": 44512441, "body": "It is important to correct the value, because i will be using OWReadByte a lot. But as i said, i am pretty sure the FF doesn&#39;t come from the function it self, because of the LEDs it is working just fine. Of course that might be because it does not show the higher 8 bits on the LEDs."}, {"owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "reply_to_user": {"reputation": 146, "user_id": 4457720, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed04c94f4fc3145a5dd2bdef8e606a93?s=128&d=identicon&r=PG&f=1", "display_name": "s3v3ns", "link": "https://stackoverflow.com/users/4457720/s3v3ns"}, "edited": false, "score": 0, "creation_date": 1421840461, "post_id": 28065995, "comment_id": 44512464, "body": "@s3v3ns, I hadn&#39;t seen the edit of your comment... If it returns an <code>int</code>, then the same applies without integer promotions: <code>~0xfe</code> is <code>0xff01</code> (for a 16-bit <code>int</code>, and as a bit pattern, with two&#39;s complement, this is the value -255)."}, {"owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1421840576, "post_id": 28065995, "comment_id": 44512548, "body": "@WeatherVane: Thanks, precision for <code>d</code> conversion gives the minimum number of digits to appear, not a maximal width; I confused it with <code>s</code> conversion."}, {"owner": {"reputation": 146, "user_id": 4457720, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed04c94f4fc3145a5dd2bdef8e606a93?s=128&d=identicon&r=PG&f=1", "display_name": "s3v3ns", "link": "https://stackoverflow.com/users/4457720/s3v3ns"}, "edited": false, "score": 0, "creation_date": 1421840617, "post_id": 28065995, "comment_id": 44512575, "body": "You are right in there, that it is 0xFE. So it has something to do with my functions?"}, {"owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "edited": false, "score": 0, "creation_date": 1421840694, "post_id": 28065995, "comment_id": 44512622, "body": "It&#39;s the <code>~</code> operator. It operates on the whole <code>int</code>, not only on the lower 8 bits."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1421841277, "post_id": 28065995, "comment_id": 44512976, "body": "Are you sure the OP is interested in an unsigned 8bit integer and not in a signed one? Also why do you use the non-standard type <code>uint8_t</code> and not just <code>unsigned char</code>?"}, {"owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1421841489, "post_id": 28065995, "comment_id": 44513095, "body": "@alk, Initially, I thought, the return value would be <code>char</code> and OP is confused about integer promotions. But given that the function returns an <code>int</code> where only the lower 8 bits are used, I think OP wants positive values."}, {"owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1421841656, "post_id": 28065995, "comment_id": 44513193, "body": "@alk, <code>uint8_t</code> is a standard type, but doesn&#39;t exist on machines with <code>CHAR_BIT</code> != 8, on which the code doesn&#39;t compile. With <code>unsigned char</code>, it would compile, but do the wrong thing. I currently wonder if the cast is a good suggestion anyway, maybe I&#39;ll remove it entirely."}, {"owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1421842397, "post_id": 28065995, "comment_id": 44513618, "body": "Removed the cast, @alk. With the assumption that <code>OWReadByte</code> returns <code>unsigned char</code> (or <code>uint8_t</code> or whatever), the cast could be thought of as &quot;convert back to what it was before promotion and what it is supposed to be&quot;. Given that it returns <code>int</code>, &quot;mask off the higher bits&quot; is the more straight-forward way, I think. (And it avoids the off-topic discussion if <code>%X</code> requires <code>(unsigned)(unsigned char)~OWReadByte()</code>.)"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1421843833, "post_id": 28065995, "comment_id": 44514433, "body": "What about: <code>... &quot;%02hhX&quot;, ~OWReadByte());</code> :-) And btw: <code>uint8_t</code> is POSIX not C."}, {"owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1421849557, "post_id": 28065995, "comment_id": 44517994, "body": "@alk, <code>%hhX</code> looks good (maybe with an <code>unsigned char</code> cast). Is this a real suggestion for the answer or just discussing for the sake of having a discussion? Just wondering, I don&#39;t have a problem with the latter :) <code>uint8_t</code> is C99; it is optional, though (POSIX requires it, iirc), but the standard is quite clear that an implementation should provide it wherever possible. Given that <code>typedef unsigned char uint8_t;</code> is a valid way to provide this type on any machine with <code>CHAR_BIT</code> == 8, I think this type can be assumed to exist if (and only if) a <code>char</code> has 8 bits."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1421854468, "post_id": 28065995, "comment_id": 44521266, "body": "You are correct, the <code>[u]int[N]_t</code> are an optional part of the C-Standard."}], "tags": [], "owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "is_accepted": true, "score": 2, "last_activity_date": 1421841842, "last_edit_date": 1421841842, "creation_date": 1421839312, "answer_id": 28065995, "question_id": 28065720, "link": "https://stackoverflow.com/questions/28065720/sprintf-puts-ff-infront-without-any-reason-in-c/28065995#28065995", "title": "sprintf puts FF infront without any reason in C", "body": "<p>The unary <code>~</code> operator changes the bits of the whole <code>int</code>, not only the lower 8 bits. <code>~0xfeu</code> (equivalently, <code>~0x00feu</code>) is <code>0xff01u</code> for 16-bit <code>int</code>.</p>\n\n<p>I suggest to always use unsigned types when doing bit manipulation, passing a negative <code>int</code> to <code>%X</code> is, strictly speaking, undefined behavior.</p>\n\n<p>To get rid of the higher bits, you can do</p>\n\n<pre><code>sprintf(&amp;str_2[i * 2], \"%02X\", ~OWReadByte() &amp; 0xffu);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "edited": false, "score": 0, "creation_date": 1421854473, "post_id": 28070881, "comment_id": 44521272, "body": "<code>%hX</code> is for <code>unsigned short</code>, which has at least 16 bits."}, {"owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "edited": false, "score": 0, "creation_date": 1421854587, "post_id": 28070881, "comment_id": 44521369, "body": "Then a <code>short</code> has the same range as <code>int</code>."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "edited": false, "score": 0, "creation_date": 1421854773, "post_id": 28070881, "comment_id": 44521510, "body": "Are sure this is the case for a 16bit platform?"}, {"owner": {"reputation": 932, "user_id": 1721186, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/191bbec6bbd670cff4888c4f9d8e7ca6?s=128&d=identicon&r=PG", "display_name": "Steve Valliere", "link": "https://stackoverflow.com/users/1721186/steve-valliere"}, "edited": false, "score": 0, "creation_date": 1421854806, "post_id": 28070881, "comment_id": 44521540, "body": "Just don&#39;t try %hhX in Microsoft&#39;s compiler -- they don&#39;t support hh!"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1421854843, "post_id": 28070881, "comment_id": 44521565, "body": "Ok, makeing my answer less precise on the effects of <code>h</code>."}, {"owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "reply_to_user": {"reputation": 932, "user_id": 1721186, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/191bbec6bbd670cff4888c4f9d8e7ca6?s=128&d=identicon&r=PG", "display_name": "Steve Valliere", "link": "https://stackoverflow.com/users/1721186/steve-valliere"}, "edited": false, "score": 0, "creation_date": 1421855116, "post_id": 28070881, "comment_id": 44521757, "body": "@SteveValliere, <code>%hhX</code> is C99, Microsoft&#39;s C library only supports C89. (Could be pointed out, perhaps, but C99 usually is considered &quot;the&quot; C on SO anyway.)"}, {"owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "edited": false, "score": 0, "creation_date": 1421855445, "post_id": 28070881, "comment_id": 44522002, "body": "@alk, on a standard conforming platform, <code>short</code> must have at least 16 bit (see n1570 5.2.4.2.1), so <code>h</code> has basically no effect on <code>X</code> conversions on a 16-bit platform. In case you&#39;re interested in language-layerism, maybe have a look <a href=\"http://stackoverflow.com/questions/4586962/what-is-the-purpose-of-the-h-and-hh-modifiers-for-printf\">here</a> for why an <code>unsigned char</code> cast might be required by a strict reading of the standard. (I don&#39;t consider this a real-world issue, so +1 for the alternative approach.)"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "edited": false, "score": 0, "creation_date": 1421872136, "post_id": 28070881, "comment_id": 44531480, "body": "Added the missing, but necessary note on C99. @mafso: Thanks for pointing this out."}], "tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": false, "score": 1, "last_activity_date": 1421872004, "last_edit_date": 1421872004, "creation_date": 1421854148, "answer_id": 28070881, "question_id": 28065720, "link": "https://stackoverflow.com/questions/28065720/sprintf-puts-ff-infront-without-any-reason-in-c/28070881#28070881", "title": "sprintf puts FF infront without any reason in C", "body": "<p>Assuming at least C99 the most simple and straight forward to fix the observed issue is to specify the correct <em>length modifer(s)</em>.</p>\n\n<pre><code>sprintf(..., \"%hhX\", ~OWReadByte());\n</code></pre>\n\n<p>No casting, no precision is necessary.</p>\n"}], "owner": {"reputation": 146, "user_id": 4457720, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed04c94f4fc3145a5dd2bdef8e606a93?s=128&d=identicon&r=PG&f=1", "display_name": "s3v3ns", "link": "https://stackoverflow.com/users/4457720/s3v3ns"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "accepted_answer_id": 28065995, "answer_count": 2, "score": 0, "last_activity_date": 1422260012, "creation_date": 1421838580, "last_edit_date": 1422260012, "question_id": 28065720, "link": "https://stackoverflow.com/questions/28065720/sprintf-puts-ff-infront-without-any-reason-in-c", "title": "sprintf puts FF infront without any reason in C", "body": "<p>I have this weird problem where I am using sprintf and it puts FF in front of the value I have.</p>\n\n<p>(e.g.) I should get 01, but I am getting FF01</p>\n\n<p>My code looks like this</p>\n\n<pre><code>while(1)\n{\n\n    if(getkey()=='g')\n    {\n       sprintf(str_2, \"%X\", ~OWReadByte());\n       lcd_delay();\n       lcd_string(str_2);\n    }\n}\n</code></pre>\n\n<p>I did some checking on the LEDs and on there i get the value i want, after using sprintf it just gets screwed up.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 2, "creation_date": 1421838509, "post_id": 28065612, "comment_id": 44511348, "body": "Sounds reasonable.  I don&#39;t understand it either, it&#39;s a plie of gunge."}, {"owner": {"reputation": 33621, "user_id": 108802, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/nABuD.jpg?s=128&g=1", "display_name": "Gauthier", "link": "https://stackoverflow.com/users/108802/gauthier"}, "edited": false, "score": 0, "creation_date": 1421841106, "post_id": 28065612, "comment_id": 44512876, "body": "I wouldn&#39;t say &quot;surprisingly easily&quot;, it&#39;s very hard to read, totally uncommented, and the code structure is nearly completely hidden. Try to start from this code, then simplify it a little at a time, doing only one operation per line of code. Hopefully the structure will pop out."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1421841494, "post_id": 28065612, "comment_id": 44513096, "body": "the <code>my_length()</code> function is called too often, IMHO. What does it do ?"}], "answers": [{"tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 0, "last_activity_date": 1421839071, "last_edit_date": 1421839071, "creation_date": 1421838432, "answer_id": 28065671, "question_id": 28065612, "link": "https://stackoverflow.com/questions/28065612/i-do-not-understand-the-logic-behind-this-code/28065671#28065671", "title": "I do not understand the logic behind this code", "body": "<pre><code>return (res = (last-- &amp;&amp; buff[my_length(buff) - rd - 1] != 10) ? res : NULL);\n</code></pre>\n\n<p>Here <code>?:</code> is a ternary operator . If the expression before the <code>?</code> turns out to be TRUE then the value immediately after <code>?</code> gets executed else the latter one after <code>:</code> gets executed. </p>\n\n<p>This is same as</p>\n\n<pre><code>if((last--) &amp;&amp; (buff[my_length(buff) - rd - 1] != 10))\n{\n   res = res;\n}\nelse\n{\n   res = NULL;\n}\nreturn res;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11196, "user_id": 1079907, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/a7c69e39fbec2c781db5f27b40f63023?s=128&d=identicon&r=PG", "display_name": "Sunil Bojanapally", "link": "https://stackoverflow.com/users/1079907/sunil-bojanapally"}, "is_accepted": false, "score": 1, "last_activity_date": 1421839512, "last_edit_date": 1421839512, "creation_date": 1421838486, "answer_id": 28065687, "question_id": 28065612, "link": "https://stackoverflow.com/questions/28065612/i-do-not-understand-the-logic-behind-this-code/28065687#28065687", "title": "I do not understand the logic behind this code", "body": "<pre><code>What does the '?' and ':' mean? \n</code></pre>\n\n<p>This is called <a href=\"http://en.wikipedia.org/wiki/Ternary_operation\" rel=\"nofollow\">Ternary operator</a> in <code>C</code>. An example is here,</p>\n\n<pre><code>result = a &gt; b ? x : y;\n</code></pre>\n\n<p>is equivalent to,</p>\n\n<pre><code>if (a &gt; b) {\n  result = x;\n} else {\n  result = y;\n}\n</code></pre>\n\n<p>Now about making you understand the code posted, most if it are standard function calls such as <code>read()</code>, <code>malloc()</code>, <code>realloc()</code>, <code>sizeof()</code>, string termination with <code>\\0</code>  etc., I suggest going through each line one by one would really help you in learning. </p>\n"}, {"tags": [], "owner": {"reputation": 3923, "user_id": 3640699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NxDM0.jpg?s=128&g=1", "display_name": "Karthikeyan.R.S", "link": "https://stackoverflow.com/users/3640699/karthikeyan-r-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1421838997, "last_edit_date": 1421838997, "creation_date": 1421838616, "answer_id": 28065733, "question_id": 28065612, "link": "https://stackoverflow.com/questions/28065612/i-do-not-understand-the-logic-behind-this-code/28065733#28065733", "title": "I do not understand the logic behind this code", "body": "<p>It is ternary operator.Refer this <a href=\"http://en.wikipedia.org/wiki/%3F:\" rel=\"nofollow\">link</a>.</p>\n\n<pre><code>( if the condition is true)?it will execute:or else it will execute;\n</code></pre>\n\n<p>In this case </p>\n\n<pre><code>(res = (last-- &amp;&amp; buff[my_length(buff) - rd - 1] != 10) ? res : NULL);\n</code></pre>\n\n<p>if the condition <code>(res = (last-- &amp;&amp; buff[my_length(buff) - rd - 1] != 10)</code> is true then <code>res</code> will return. If the condition is false, then <code>NULL</code> will return.</p>\n\n<p>It is equal to this.</p>\n\n<pre><code>if ( (res = (last-- &amp;&amp; buff[my_length(buff) - rd - 1] ) != 10 )\n{\n     return (res=res);\n}\nelse \n{\n     return (res=NULL);\n}\n</code></pre>\n"}], "owner": {"reputation": 1362, "user_id": 4283840, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/5271515568ac55bf2de7bd0ae0e423ac?s=128&d=identicon&r=PG", "display_name": "Christopher", "link": "https://stackoverflow.com/users/4283840/christopher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1421840905, "creation_date": 1421838233, "last_edit_date": 1421840905, "question_id": 28065612, "link": "https://stackoverflow.com/questions/28065612/i-do-not-understand-the-logic-behind-this-code", "title": "I do not understand the logic behind this code", "body": "<p>I already coded a similar function, it is call get_next_line and at each call it returns a string to the current line. But I found someone who did it surprisingly easily and could not understand his code totally. I would love some help from you guys.</p>\n\n<pre><code>char *get_next_line(const int fd)\n{\n  static int    last = 1;\n  static int    rd = 0;\n  static int    i = 0;\n  static char   *res = NULL;\n  static char   buff[READ_MAX];\n\n  if (buff[my_length(buff) - rd] == '\\0')\n    {\n      if ((rd = read(fd, buff, READ_MAX)) &lt;= 0)\n        return (res = (last-- &amp;&amp; buff[my_length(buff) - rd - 1] != 10) ? res : NULL);\n      buff[rd] = '\\0';\n    }\n  if ((res = (i == 0) ? malloc(sizeof(*res) * READ_MAX + 1) :\n       my_realloc(res, sizeof(*res) * READ_MAX + 1)) == NULL)\n    return (NULL);\n  while (buff[my_length(buff) - rd] &amp;&amp; buff[my_length(buff) - rd] != '\\n')\n    res[i++] = buff[my_length(buff) - rd--];\n  res[i] = '\\0';\n  if (buff[my_length(buff) - rd] == '\\n')\n    {\n      i = 0;\n      rd--;\n      return (res);\n    }\n  return (get_next_line(fd));\n}\n</code></pre>\n\n<p>For example, I don't understand :</p>\n\n<pre><code>return (res = (last-- &amp;&amp; buff[my_length(buff) - rd - 1] != 10) ? res : NULL);\n</code></pre>\n\n<p>What does the '?' and ':' mean? Does it mean for the condition before '?' return res or NULL?</p>\n\n<p>It is a rather large question, but thanks for your help anyways.</p>\n\n<p>PS : READ_MAX's value is 5 in a header file.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 1, "creation_date": 1421839082, "post_id": 28065457, "comment_id": 44511674, "body": "Your usage of <code>feof()</code> is wrong, it doesn&#39;t work like that. You can only use it <i>once I/O has failed</i> to figure out if it failed due to reaching EOF. You can&#39;t use it to predict the future."}], "answers": [{"tags": [], "owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "is_accepted": false, "score": 1, "last_activity_date": 1421837971, "creation_date": 1421837971, "answer_id": 28065527, "question_id": 28065457, "link": "https://stackoverflow.com/questions/28065457/trouble-reading-in-tokens-in-c/28065527#28065527", "title": "Trouble reading in Tokens in C", "body": "<p>Your string <code>oprtr</code> is too small to hold anything but an empty string (remember that C strings need a terminating 0 character!). So:</p>\n\n<pre><code>char oprtr[1];\n</code></pre>\n\n<p>needs to be at least:</p>\n\n<pre><code>char oprtr[2];         // string of maximum size 1\n</code></pre>\n\n<p>or more defensively:</p>\n\n<pre><code>char oprtr[256];       // string of maximum size 255\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1421838729, "post_id": 28065574, "comment_id": 44511481, "body": "This is better than the OP&#39;s code, but will become confused if a line has three tokens for instance. There&#39;s nothing inherent in the <code>fscanf()</code> call that says &quot;read <i>lines</i> formatted like this&quot;."}, {"owner": {"reputation": 2801, "user_id": 904194, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/KGqRa.png?s=128&g=1", "display_name": "mrk", "link": "https://stackoverflow.com/users/904194/mrk"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1421838870, "post_id": 28065574, "comment_id": 44511547, "body": "I&#39;m assuming the input is well-formatted but you&#39;re right. In general, the input can be anything and some more sophisticated parsing needs to be done."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1421852376, "post_id": 28065574, "comment_id": 44519843, "body": "I don&#39;t think that this would work as expected. Wouldn&#39;t <code>%c</code> gobble up the <code>\\n</code> character in the second iteration?"}, {"owner": {"reputation": 2801, "user_id": 904194, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/KGqRa.png?s=128&g=1", "display_name": "mrk", "link": "https://stackoverflow.com/users/904194/mrk"}, "edited": false, "score": 0, "creation_date": 1421852478, "post_id": 28065574, "comment_id": 44519905, "body": "didn&#39;t try it, but you can add <code>\\n</code> to the end of <code>fscanf</code> if that happens."}, {"owner": {"reputation": 164, "user_id": 2437080, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/61c5f13911c9523a4641a6f13d7f86f9?s=128&d=identicon&r=PG", "display_name": "harrisonfooord", "link": "https://stackoverflow.com/users/2437080/harrisonfooord"}, "edited": false, "score": 0, "creation_date": 1421934620, "post_id": 28065574, "comment_id": 44557288, "body": "since my input is standardised as I mentioned in the first post &quot;%c %d\\n&quot; is the way to go!"}], "tags": [], "owner": {"reputation": 2801, "user_id": 904194, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/KGqRa.png?s=128&g=1", "display_name": "mrk", "link": "https://stackoverflow.com/users/904194/mrk"}, "is_accepted": true, "score": 2, "last_activity_date": 1421838103, "creation_date": 1421838103, "answer_id": 28065574, "question_id": 28065457, "link": "https://stackoverflow.com/questions/28065457/trouble-reading-in-tokens-in-c/28065574#28065574", "title": "Trouble reading in Tokens in C", "body": "<p>You have single characters, you can use <code>==</code> to compare them instead of <code>strcmp</code>. Just read the input in pairs and use a <code>switch</code> for example.</p>\n\n<pre><code>char c;\nint x;\n\nwhile(fscanf(fp, \"%c %d\", &amp;c, &amp;x) == 2)\n{   switch(c)\n    {   case '+': /* ... */\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3923, "user_id": 3640699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NxDM0.jpg?s=128&g=1", "display_name": "Karthikeyan.R.S", "link": "https://stackoverflow.com/users/3640699/karthikeyan-r-s"}, "is_accepted": false, "score": -1, "last_activity_date": 1421838395, "creation_date": 1421838395, "answer_id": 28065663, "question_id": 28065457, "link": "https://stackoverflow.com/questions/28065457/trouble-reading-in-tokens-in-c/28065663#28065663", "title": "Trouble reading in Tokens in C", "body": "<p>You can use the fscanf function, you can get the input from the file.</p>\n\n<pre><code>int fscanf(FILE *stream, const char *format, ...);\n\nfscanf(fp,\" %c %d\",&amp;c,&amp;d);\n</code></pre>\n"}], "owner": {"reputation": 164, "user_id": 2437080, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/61c5f13911c9523a4641a6f13d7f86f9?s=128&d=identicon&r=PG", "display_name": "harrisonfooord", "link": "https://stackoverflow.com/users/2437080/harrisonfooord"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 28065574, "answer_count": 3, "score": 0, "last_activity_date": 1421838395, "creation_date": 1421837781, "question_id": 28065457, "link": "https://stackoverflow.com/questions/28065457/trouble-reading-in-tokens-in-c", "title": "Trouble reading in Tokens in C", "body": "<p>I can't seem to figure out, how to correctly read in a .txt file that has the following appereance: (example)</p>\n\n<pre><code>+ 1\n+ 2\n- 2\n+ 5\np -1\n? 5\n</code></pre>\n\n<p>and so on...\nwhat I need now is to store the operator / token which can be '+' '-' 'p' or something like that, and the int that follows in <strong>two different variables</strong> because I need to check them later on.</p>\n\n<pre><code>char oprtr[1];\nint value;\nFILE *fp = fopen(args[1], \"r\");\n\nwhile(!feof(fp) &amp;&amp; !ferror(fp)){\n    if(fscanf(fp, \"%s %d\\n\", oprtr, &amp;value) &lt; 1){\n        printf(\"fscanf error\\n\");\n    }\n    if(strcmp(oprtr, \"+\") == 0){\n        function1(bst, value);\n\n    } else if(strcmp(oprtr, \"-\") == 0){\n        function2(bst, value);\n\n    } else if((strcmp(oprtr, \"p\") == 0) &amp;&amp; value == -1){\n        function3(root);\n    //some other functions and so on...\n    }\n</code></pre>\n\n<p>printing out oprtr and value in the loop shows that they are not being red in correctly, but it does compile. Does someone have a solution?</p>\n"}, {"tags": ["c", "string", "c-strings"], "comments": [{"owner": {"reputation": 2801, "user_id": 904194, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/KGqRa.png?s=128&g=1", "display_name": "mrk", "link": "https://stackoverflow.com/users/904194/mrk"}, "edited": false, "score": 0, "creation_date": 1421840666, "post_id": 28065439, "comment_id": 44512602, "body": "use <code>sscanf</code>. it stops reading when it encounters spaces."}, {"owner": {"reputation": 63648, "user_id": 97248, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/d891ba8bd448f11617333f8642870262?s=128&d=identicon&r=PG", "display_name": "pts", "link": "https://stackoverflow.com/users/97248/pts"}, "edited": false, "score": 2, "creation_date": 1421845311, "post_id": 28065439, "comment_id": 44515287, "body": "The language C doesn&#39;t have vectors. That would be C++. If you mean array, then write array. If you mean an array whose size is not known at compile time, write dynamic array."}], "answers": [{"comments": [{"owner": {"reputation": 149, "user_id": 4232062, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6e3a4e28d2dd447c5c838430c81a0b20?s=128&d=identicon&r=PG&f=1", "display_name": "piXel_pRo", "link": "https://stackoverflow.com/users/4232062/pixel-pro"}, "edited": false, "score": 0, "creation_date": 1421839168, "post_id": 28065512, "comment_id": 44511736, "body": "I do not know the number of spaces separated sub-strings in the bigger string"}, {"owner": {"reputation": 3923, "user_id": 3640699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NxDM0.jpg?s=128&g=1", "display_name": "Karthikeyan.R.S", "link": "https://stackoverflow.com/users/3640699/karthikeyan-r-s"}, "edited": false, "score": 0, "creation_date": 1421839939, "post_id": 28065512, "comment_id": 44512148, "body": "It will work. He is asking that he is not knowing the no of spaces like <code>i &lt; 4</code>. Just remove that condition he may accept it."}, {"owner": {"reputation": 149, "user_id": 4232062, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6e3a4e28d2dd447c5c838430c81a0b20?s=128&d=identicon&r=PG&f=1", "display_name": "piXel_pRo", "link": "https://stackoverflow.com/users/4232062/pixel-pro"}, "edited": false, "score": 0, "creation_date": 1421840240, "post_id": 28065512, "comment_id": 44512332, "body": "I can declare a sufficiently large vector for my purpose. right ?"}, {"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "edited": false, "score": 0, "creation_date": 1421840449, "post_id": 28065512, "comment_id": 44512453, "body": "Yes you can this is just an example"}, {"owner": {"reputation": 149, "user_id": 4232062, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6e3a4e28d2dd447c5c838430c81a0b20?s=128&d=identicon&r=PG&f=1", "display_name": "piXel_pRo", "link": "https://stackoverflow.com/users/4232062/pixel-pro"}, "edited": false, "score": 0, "creation_date": 1421840996, "post_id": 28065512, "comment_id": 44512811, "body": "I would be a great help, if you can give me some insight of the code"}], "tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": true, "score": 0, "last_activity_date": 1421844576, "last_edit_date": 1421844576, "creation_date": 1421837934, "answer_id": 28065512, "question_id": 28065439, "link": "https://stackoverflow.com/questions/28065439/split-string-with-spaces-to-vector-of-strings-in-c/28065512#28065512", "title": "Split string with spaces to vector of strings in C", "body": "<p>It can be done as shown below:</p>\n\n<pre><code>char str[20] = \"22 3 43 5\";\nchar *vec[4];\nint i=0;\nchar *p = strtok(str,\" \");\n\nwhile(p!= NULL )\n{\n   vec[i] = malloc(20); /* Free the memory once you are done using it */\n   strcpy(vec[i],p);\n   p = strtok(NULL,\" \");\n   i++;\n}\n</code></pre>\n\n<p>If you have </p>\n\n<pre><code>char* str = \"22 3 43 5\";\n</code></pre>\n\n<p>Then <code>str</code> is a string literal and it is read-only and <code>strtok()</code> changes the passed string so you might see a crash.</p>\n\n<p>Edits:</p>\n\n<p><code>strotk()</code> function is helpful to break the char array into tokens based on a delimiter. Here I am making use of the same and breaking the char array into tokens using space as delimiter and each token is been copied to the vector. <code>vec[i]</code>. Where <code>vec</code> is array of pointers and for each pointer I allocate memory and copy the token to it . </p>\n"}], "owner": {"reputation": 149, "user_id": 4232062, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6e3a4e28d2dd447c5c838430c81a0b20?s=128&d=identicon&r=PG&f=1", "display_name": "piXel_pRo", "link": "https://stackoverflow.com/users/4232062/pixel-pro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 28065512, "answer_count": 1, "score": -1, "last_activity_date": 1421844576, "creation_date": 1421837749, "question_id": 28065439, "link": "https://stackoverflow.com/questions/28065439/split-string-with-spaces-to-vector-of-strings-in-c", "title": "Split string with spaces to vector of strings in C", "body": "<p>I have a <code>char* str</code> which points to a string say \"22 3 43 5\". I need to store this into a vector(1-d array) say <code>char *vec[]</code>, such that,<br><code>vec[0]=\"22\"</code> and so on<br>How can it be done?</p>\n"}, {"tags": ["c", "type-conversion"], "comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1421837221, "post_id": 28065199, "comment_id": 44510621, "body": "Probably just a duplicate of <a href=\"http://stackoverflow.com/questions/6884061/cant-compile-with-void-variable-in-c\" title=\"cant compile with void variable in c\">stackoverflow.com/questions/6884061/&hellip;</a> -- the tl,dr is &quot;there is no such thing in C&quot;."}, {"owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "edited": false, "score": 0, "creation_date": 1421837236, "post_id": 28065199, "comment_id": 44510633, "body": "I don&#39;t understand the question. What error is given? Is the problem that a variable of type <code>void</code> cannot be declared or that <code>sizeof(void)</code> evaluates to <code>1</code>?"}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 3, "creation_date": 1421837244, "post_id": 28065199, "comment_id": 44510639, "body": "That would actually make a nice question if you made a little effort formatting it properly."}, {"owner": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 0, "creation_date": 1421837276, "post_id": 28065199, "comment_id": 44510660, "body": "Why you need <code>void</code> variable? If you want to reserve memory and use it for different data types, define <code>union</code> with corresponding members. <code>void</code> is for function return value (missing) or abstract pointer."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 4161532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cc72ccffff1ca18062f026168b0f2ff?s=128&d=identicon&r=PG&f=1", "display_name": "technojohn", "link": "https://stackoverflow.com/users/4161532/technojohn"}, "is_accepted": false, "score": 0, "last_activity_date": 1421837410, "creation_date": 1421837410, "answer_id": 28065314, "question_id": 28065199, "link": "https://stackoverflow.com/questions/28065199/void-data-type-in-c/28065314#28065314", "title": "VOID data type in C", "body": "<p>The void type, in several programming languages derived from C and Algol68, is the type for the result of a function that returns normally, but does not provide a result value to its caller. Usually such functions are called for their side effects, such as performing some task or writing to their output parameters.\nUpto my knowledge, You cannot use void as datatype, as the value is true or false statement the Boolean value will be 1 by default, so, it prints 1.</p>\n"}, {"tags": [], "owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "is_accepted": false, "score": 6, "last_activity_date": 1421837519, "creation_date": 1421837519, "answer_id": 28065361, "question_id": 28065199, "link": "https://stackoverflow.com/questions/28065199/void-data-type-in-c/28065361#28065361", "title": "VOID data type in C", "body": "<p><code>sizeof (void)</code> is not valid in C and is allowed in GNU C as an extension to allow pointer arithmetic with <code>void *</code>.</p>\n\n<p>From <code>gcc</code> <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Pointer-Arith.html\" rel=\"noreferrer\">documentation</a>:</p>\n\n<blockquote>\n  <p>In GNU C, addition and subtraction operations are supported on pointers to void and on pointers to functions. This is done by treating the size of a void or of a function as 1. [...]  consequence of this is that sizeof is also allowed on void and on function types, and returns 1.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 1183, "user_id": 77431, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8d0532a13348650ef87211151bc180f3?s=128&d=identicon&r=PG", "display_name": "NevilleDNZ", "link": "https://stackoverflow.com/users/77431/nevillednz"}, "is_accepted": false, "score": 0, "last_activity_date": 1431751111, "creation_date": 1431751111, "answer_id": 30271884, "question_id": 28065199, "link": "https://stackoverflow.com/questions/28065199/void-data-type-in-c/30271884#30271884", "title": "VOID data type in C", "body": "<p>c.f. Is there a specific reason why \u201cvoid\u201d was not simply defined as \u201ctypedef struct{} void\u201d (i.e. an empty struct) with appropriate casting rules? ... </p>\n\n<p>This was originally suggested by <a href=\"http://en.wikipedia.org/wiki/Stephen_R._Bourne\" rel=\"nofollow\">Steve Bourne</a> in <a href=\"http://archive.computerhistory.org/resources/text/algol/ACM_Algol_bulletin/1061601/p54-bourne.pdf\" rel=\"nofollow\">AB33/Mar 1972</a> for <a href=\"http://rosettacode.org/wiki/Category:ALGOL_68\" rel=\"nofollow\">Algol68</a> ...</p>\n\n<p>Note: Algol68 doesn't have pointer arithmetic... but array slicing is available.</p>\n"}], "owner": {"reputation": 21, "user_id": 3497219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a644554551a22a1f1cd020ecd8d6f7f?s=128&d=identicon&r=PG&f=1", "display_name": "anp4355", "link": "https://stackoverflow.com/users/3497219/anp4355"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1431751111, "creation_date": 1421837097, "last_edit_date": 1421837621, "question_id": 28065199, "link": "https://stackoverflow.com/questions/28065199/void-data-type-in-c", "title": "VOID data type in C", "body": "<p>If i declare any variable using <code>void</code>, it gives error but <code>sizeof(void)</code> is 1. \nWhat is reason for this?</p>\n\n<pre><code>void var; // it gives error\nprintf(\"sizeof(void) = %d\", sizeof(void)); //prints 1\n</code></pre>\n"}, {"tags": ["c", "lotus-notes", "lotus-designer"], "comments": [{"owner": {"reputation": 4709, "user_id": 2001149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SqsJM.png?s=128&g=1", "display_name": "Santosh A", "link": "https://stackoverflow.com/users/2001149/santosh-a"}, "edited": false, "score": 3, "creation_date": 1421836722, "post_id": 28065022, "comment_id": 44510287, "body": "Show the source code"}, {"owner": {"reputation": 69, "user_id": 1214526, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/e0f0bcdb53a06e4f436c6b64c4cb417e?s=128&d=identicon&r=PG", "display_name": "Alexandre Oliveira", "link": "https://stackoverflow.com/users/1214526/alexandre-oliveira"}, "reply_to_user": {"reputation": 4709, "user_id": 2001149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SqsJM.png?s=128&g=1", "display_name": "Santosh A", "link": "https://stackoverflow.com/users/2001149/santosh-a"}, "edited": false, "score": 0, "creation_date": 1421837656, "post_id": 28065022, "comment_id": 44510868, "body": "Follows the link for files: <a href=\"https://www.dropbox.com/s/4rho3jlbywhilgt/c-sample-ibm.zip?dl=0\" rel=\"nofollow noreferrer\">dropbox.com/s/4rho3jlbywhilgt/c-sample-ibm.zip?dl=0</a>"}, {"owner": {"reputation": 69, "user_id": 1214526, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/e0f0bcdb53a06e4f436c6b64c4cb417e?s=128&d=identicon&r=PG", "display_name": "Alexandre Oliveira", "link": "https://stackoverflow.com/users/1214526/alexandre-oliveira"}, "reply_to_user": {"reputation": 4709, "user_id": 2001149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SqsJM.png?s=128&g=1", "display_name": "Santosh A", "link": "https://stackoverflow.com/users/2001149/santosh-a"}, "edited": false, "score": 0, "creation_date": 1421838173, "post_id": 28065022, "comment_id": 44511155, "body": "remembering that I use the noteapi 9.01. Follows the api: <a href=\"https://www.dropbox.com/s/2ahuj7s6xfa7350/C_API_TKT_NOTDOM_901AIXEN.tar.z?dl=0\" rel=\"nofollow noreferrer\">dropbox.com/s/2ahuj7s6xfa7350/&hellip;</a>"}, {"owner": {"reputation": 69, "user_id": 1214526, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/e0f0bcdb53a06e4f436c6b64c4cb417e?s=128&d=identicon&r=PG", "display_name": "Alexandre Oliveira", "link": "https://stackoverflow.com/users/1214526/alexandre-oliveira"}, "reply_to_user": {"reputation": 4709, "user_id": 2001149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SqsJM.png?s=128&g=1", "display_name": "Santosh A", "link": "https://stackoverflow.com/users/2001149/santosh-a"}, "edited": false, "score": 0, "creation_date": 1421844545, "post_id": 28065022, "comment_id": 44514846, "body": "In my environment I&#39;m using:  - Suse enterprise linux 11 x86/64 - IBM Domino 9.01 64bit - GCC 4.3x - Notes api for domino 9.01"}, {"owner": {"reputation": 13430, "user_id": 622571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41523c6db74e0f187eae731a6871a320?s=128&d=identicon&r=PG", "display_name": "Richard Schwartz", "link": "https://stackoverflow.com/users/622571/richard-schwartz"}, "edited": false, "score": 0, "creation_date": 1421850428, "post_id": 28065022, "comment_id": 44518510, "body": "When does the error occur? During compilation, or during a test run of your code?"}, {"owner": {"reputation": 69, "user_id": 1214526, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/e0f0bcdb53a06e4f436c6b64c4cb417e?s=128&d=identicon&r=PG", "display_name": "Alexandre Oliveira", "link": "https://stackoverflow.com/users/1214526/alexandre-oliveira"}, "edited": false, "score": 0, "creation_date": 1421857815, "post_id": 28065022, "comment_id": 44523674, "body": "During test. On SUSE Enterprise Server 11 64BIT worked when I ran by the path: /opt/lotus/data the sample code &#39;FindByKeyExtend&#39;, but on Red Hat Enterprise Server 6.6 64BIT appears the follow error message: &#39;Unable to initialize Notes.&#39;"}, {"owner": {"reputation": 69, "user_id": 1214526, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/e0f0bcdb53a06e4f436c6b64c4cb417e?s=128&d=identicon&r=PG", "display_name": "Alexandre Oliveira", "link": "https://stackoverflow.com/users/1214526/alexandre-oliveira"}, "edited": false, "score": 0, "creation_date": 1421858413, "post_id": 28065022, "comment_id": 44524063, "body": "I&#39;m using SUSE for build/compile and Red Hat for execute. My production environment is in Red Hat Enterprise 6.6"}, {"owner": {"reputation": 69, "user_id": 1214526, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/e0f0bcdb53a06e4f436c6b64c4cb417e?s=128&d=identicon&r=PG", "display_name": "Alexandre Oliveira", "link": "https://stackoverflow.com/users/1214526/alexandre-oliveira"}, "edited": false, "score": 0, "creation_date": 1421863530, "post_id": 28065022, "comment_id": 44527053, "body": "I did a procedure that solved the problem. Daniel Nashed (<a href=\"http://blog.nashcom.de/\" rel=\"nofollow noreferrer\">blog.nashcom.de</a>) give me a solution:"}, {"owner": {"reputation": 69, "user_id": 1214526, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/e0f0bcdb53a06e4f436c6b64c4cb417e?s=128&d=identicon&r=PG", "display_name": "Alexandre Oliveira", "link": "https://stackoverflow.com/users/1214526/alexandre-oliveira"}, "edited": false, "score": 0, "creation_date": 1421863624, "post_id": 28065022, "comment_id": 44527102, "body": "Follows the solution: when you build the example correctly and it has no errors, the binary should not be the issue. how do you run it? you need to properly copy it to the server binary directory and create a start link. it should be in &#39;/opt/ibm/domino/notes/latest/linux&#39; and in &#39;/opt/ibm/domino/bin&#39; you need a link for your binary &#39;ln -s tools/startup yourbinaryname&#39; than switch to the data directory &#39;cd /local/notesdata&#39; and run it from there..."}], "owner": {"reputation": 69, "user_id": 1214526, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/e0f0bcdb53a06e4f436c6b64c4cb417e?s=128&d=identicon&r=PG", "display_name": "Alexandre Oliveira", "link": "https://stackoverflow.com/users/1214526/alexandre-oliveira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1421836665, "creation_date": 1421836665, "question_id": 28065022, "link": "https://stackoverflow.com/questions/28065022/implementation-in-c-language-with-notesapi-9-01-in-red-hat-enterprise-6-x-enviro", "title": "Implementation in C language with notesapi 9.01 in Red Hat Enterprise 6.x environment", "body": "<p>I have a problem with implementation in C language using notesapi 9.01 in Red Hat Enterprise 6.x. I have code (IBM Examples) that normally runs on Windows and AIX, but when I run the same code on RedHat, appears the error 'Segment Failure'. What can be?\nI use GCC as compiler.</p>\n"}, {"tags": ["c", "string", "printf"], "comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 6, "creation_date": 1421836164, "post_id": 28064827, "comment_id": 44509946, "body": "Think what will happen if your string contains <code>%</code>."}, {"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 1, "creation_date": 1421836282, "post_id": 28064827, "comment_id": 44510018, "body": "<a href=\"http://stackoverflow.com/questions/7459630/how-can-a-format-string-vulnerability-be-exploited\" title=\"how can a format string vulnerability be exploited\">stackoverflow.com/questions/7459630/&hellip;</a>"}, {"owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "edited": false, "score": 0, "creation_date": 1421836715, "post_id": 28064827, "comment_id": 44510279, "body": "but <code>printf(&quot;Hello world!&quot;); &#47;* GOOD *&#47;</code>"}], "owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 165, "favorite_count": 3, "closed_date": 1421836414, "answer_count": 0, "score": 5, "last_activity_date": 1421836285, "creation_date": 1421836095, "question_id": 28064827, "link": "https://stackoverflow.com/questions/28064827/why-is-it-better-to-use-s-to-print-a-string-using-printf-rather-than-printi", "closed_reason": "Duplicate", "title": "Why is it better to use `%s` to print a string using `printf` rather than printing it directly?", "body": "<p>I know that the declaration of <code>printf</code> is:</p>\n\n<pre><code>int printf ( const char * format, ... );\n</code></pre>\n\n<p>This means that one can directly print a string instead of using <code>%s</code> and the string as an argument. See the following code:</p>\n\n<pre><code>char str[50];\nchar *ptr;\n//initialize str and ptr\n\nprintf(str);  //BAD\nprintf(ptr);  //BAD\nprintf(\"%s\",str);  //GOOD\nprintf(\"%s\",ptr); //GOOD\n</code></pre>\n\n<p>I've read that printing the string directly as shown in the first two <code>printf</code>s is bad and one should always avoid doing that. Instead, using <code>%s</code> as shown in the last two <code>printf</code>s is better. Both of them prints the two strings correctly.</p>\n\n<p>So, Why is it better to use <code>%s</code> to print a string using <code>printf</code> rather than printing it directly?<br>\nWhat are the problems that arises when one does not use <code>%s</code> to print a string using <code>printf</code>?</p>\n"}, {"tags": ["c", "pointers"], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 2659525, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4e080e13f3018b3b5a98d58a5a01d04b?s=128&d=identicon&r=PG", "display_name": "Max_S", "link": "https://stackoverflow.com/users/2659525/max-s"}, "edited": false, "score": 0, "creation_date": 1421837382, "post_id": 28064581, "comment_id": 44510717, "body": "Thanks Codor. Makes sense. Still confusing however as I&#39;m new with C"}, {"owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "reply_to_user": {"reputation": 125, "user_id": 2659525, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4e080e13f3018b3b5a98d58a5a01d04b?s=128&d=identicon&r=PG", "display_name": "Max_S", "link": "https://stackoverflow.com/users/2659525/max-s"}, "edited": false, "score": 0, "creation_date": 1421837494, "post_id": 28064581, "comment_id": 44510773, "body": "@Max_S I&#39;m <i>not</i> new to C; however still seriously confused from time to time."}], "tags": [], "owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "is_accepted": true, "score": 5, "last_activity_date": 1421835303, "creation_date": 1421835303, "answer_id": 28064581, "question_id": 28064484, "link": "https://stackoverflow.com/questions/28064484/get-value-without-dereferencing-the-pointer-in-c/28064581#28064581", "title": "Get value without dereferencing the pointer in C", "body": "<p>The 'argument vector' <code>argv</code> is a pointer to a pointer (type <code>char**</code>). The assignment in the code assigns <code>argv[1]</code> (which is of type <code>char*</code>) to <code>File_1</code> (which is also of type <code>char*</code>). In total, a <code>char*</code> is copied to another <code>char*</code>. The pointers are not dereferenced any further as otherwise only one <code>char</code> would be copied, which is not desired. In C, character strings are usually implemented as <code>char*</code>, and copying of only one <code>char</code> would contradict this semantic.</p>\n"}, {"tags": [], "owner": {"reputation": 5706, "user_id": 2628863, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/kOcmK.png?s=128&g=1", "display_name": "Don&#39;t You Worry Child", "link": "https://stackoverflow.com/users/2628863/dont-you-worry-child"}, "is_accepted": false, "score": -1, "last_activity_date": 1421835314, "creation_date": 1421835314, "answer_id": 28064588, "question_id": 28064484, "link": "https://stackoverflow.com/questions/28064484/get-value-without-dereferencing-the-pointer-in-c/28064588#28064588", "title": "Get value without dereferencing the pointer in C", "body": "<p><code>File_1</code> is a pointer to <code>char</code> variable.</p>\n\n<p>while when you de-reference it using <code>*File_1</code>, you refer to a <code>char</code> not a <code>char *</code>.</p>\n\n<p>Since <code>printf</code> uses <code>%s</code> for strings i.e. <code>char *</code> therefore, to print <code>*File_1</code> you should use <code>%c</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 3, "last_activity_date": 1421836814, "last_edit_date": 1421836814, "creation_date": 1421835445, "answer_id": 28064621, "question_id": 28064484, "link": "https://stackoverflow.com/questions/28064484/get-value-without-dereferencing-the-pointer-in-c/28064621#28064621", "title": "Get value without dereferencing the pointer in C", "body": "<pre><code>char *p = argv[1];\n</code></pre>\n\n<p><code>agrv</code> is a double pointer so it can hold pointers <code>argv[0]</code> <code>argv[1]</code> and so on.</p>\n\n<p>Now <code>argv[1]</code> is a pointer. So the address of this pointer is being assigned to another pointer <code>p</code> of same type <code>char</code></p>\n\n<p>Example:</p>\n\n<pre><code>char **p = malloc(sizeof(char*) * 2);/* double pointer */\n\np[0] = malloc(20); /* memory allocated to single pointer */\np[1] = malloc(20); /* memory allocated to single pointer */\n\nstrcpy(p[0],\"string\");\nstrcpy(p[1],\"another\");\n\nprintf(\"%s\\n\",p[0]);\nprintf(\"%s\\n\",p[1]);\n</code></pre>\n\n<p>In 2D space </p>\n\n<pre><code>int **p; /* Here p is double pointer */\n\n*p is a single pointer.\n</code></pre>\n\n<p>As already pointed out in another answer <code>%s</code> expects <code>char *</code> and you just pass the pointer of type char and allow the <code>printf()</code> to do job of dereferencing</p>\n\n<p><strong>PS</strong>: *p = p[0]</p>\n"}, {"tags": [], "owner": {"reputation": 21711, "user_id": 418729, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Vm1jt.jpg?s=128&g=1", "display_name": "Sadique", "link": "https://stackoverflow.com/users/418729/sadique"}, "is_accepted": false, "score": 3, "last_activity_date": 1421835858, "creation_date": 1421835858, "answer_id": 28064755, "question_id": 28064484, "link": "https://stackoverflow.com/questions/28064484/get-value-without-dereferencing-the-pointer-in-c/28064755#28064755", "title": "Get value without dereferencing the pointer in C", "body": "<p>From <a href=\"http://linux.die.net/man/3/printf\" rel=\"nofollow\"><code>printf(3)</code></a>, here's the documentation for the <code>s</code> conversion specifier (i.e <code>%s</code>):</p>\n\n<blockquote>\n  <p>If no l modifier is present: The <strong>const char *</strong> argument is expected to\n  be a pointer to an array of character type (pointer to a string).\n  Characters from the array are written up to (but not including) a\n  terminating null byte ('\\0'); if a precision is specified, no more\n  than the number specified are written. If a precision is given, no\n  null byte need be present; if the precision is not specified, or is\n  greater than the size of the array, the array must contain a\n  terminating null byte.</p>\n</blockquote>\n\n<p>So basically <code>printf</code> is dereferencing it inside itself. If you do a double indirection then it may lead to UB, because:</p>\n\n<pre><code> printf(\"%s  %s\\n\", *File_1, *File_2);  \n</code></pre>\n\n<p>The above sends 1st char pointed by <code>File_1</code> and <code>File_2</code> and then <code>printf</code> would try to dereference it again inside thinking you sent a pointer to char when you actually sent a char.</p>\n"}, {"tags": [], "owner": {"reputation": 2884, "user_id": 2558027, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/srmnC.jpg?s=128&g=1", "display_name": "sjdowling", "link": "https://stackoverflow.com/users/2558027/sjdowling"}, "is_accepted": false, "score": 0, "last_activity_date": 1421836050, "creation_date": 1421836050, "answer_id": 28064813, "question_id": 28064484, "link": "https://stackoverflow.com/questions/28064484/get-value-without-dereferencing-the-pointer-in-c/28064813#28064813", "title": "Get value without dereferencing the pointer in C", "body": "<p>Try to visualise what this looks like in memory:\n<code>char** argv</code> is a pointer to a pointer, both pointers happen to point to the beginning of an array. The first array looks like <code>[0][1]</code> where each item is a pointer to a <code>char *</code>:</p>\n\n<pre><code>[0] -&gt; [\"file_one\"]\n[1] -&gt; [\"file_two\"]\n</code></pre>\n\n<p>Where <code>[\"file_one\"]</code> is actually just a pointer to <code>'f'</code> in memory, so we have <code>'f', 'i', 'l', 'e', '_', 'o', 'n', 'e', '\\0'</code> next to each other in memory and the null byte <code>'\\0'</code> tells us where the array ends.</p>\n\n<p>So when you assign:</p>\n\n<pre><code>char * File_1 = argv[1];\n</code></pre>\n\n<p>Your <code>File_1</code> now contains a pointer to that first <code>f</code> and when we use <code>printf</code>:</p>\n\n<pre><code>printf(\"%s  %s\\n\", File_1, File_2);\n</code></pre>\n\n<p>It takes that <code>char *</code>, assumes it is a null terminated string, and dereferences the pointer at consecutive memory locations until it hits the null byte in order to read in the contents of the string.</p>\n"}], "owner": {"reputation": 125, "user_id": 2659525, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4e080e13f3018b3b5a98d58a5a01d04b?s=128&d=identicon&r=PG", "display_name": "Max_S", "link": "https://stackoverflow.com/users/2659525/max-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 295, "favorite_count": 0, "accepted_answer_id": 28064581, "answer_count": 5, "score": 2, "last_activity_date": 1421836814, "creation_date": 1421835037, "last_edit_date": 1421835346, "question_id": 28064484, "link": "https://stackoverflow.com/questions/28064484/get-value-without-dereferencing-the-pointer-in-c", "title": "Get value without dereferencing the pointer in C", "body": "<p>I'm a little bit confused with the pointer in C. My understanding is that to get a value from a pointer we need to put asterisk in the front (dereferencing). So why is the below code where I define two pointers and then assign to them what argvs point to work just fine?\nHowever if I put asterisks in the <code>printf</code> it doesn't work?\nI.e. if my arguments are <code>file_one</code> and <code>file_two</code> the output will be <code>file_one  file_two</code></p>\n\n<p>Thanks</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(int argc, char** argv)\n{\n\n    char *File_1, *File_2;\n\n    File_1 = argv[1];\n    File_2 = argv[2];\n    printf(\"%s  %s\\n\", File_1, File_2);\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n"}, {"tags": ["c", "bash", "shell"], "answers": [{"tags": [], "owner": {"reputation": 2640, "user_id": 2387328, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/OdMxG.jpg?s=128&g=1", "display_name": "nj-ath", "link": "https://stackoverflow.com/users/2387328/nj-ath"}, "is_accepted": false, "score": 1, "last_activity_date": 1421835042, "creation_date": 1421835042, "answer_id": 28064486, "question_id": 28064318, "link": "https://stackoverflow.com/questions/28064318/how-can-i-put-bash-script-in-c-program/28064486#28064486", "title": "How can I put bash script in C program", "body": "<p>Question 1: Look for \"how to make a process as deamon process in UNIX\" Although daemon process is a overkill for your requirement, you can perform steps until the process is running according to your requirements<br/>\nQuestion 3: You need to have command line arguments, check about that. Your main should look like <code>main(int arg_count, char *args_vector[]){...}</code> and in that you can access each command line argument as an array element</p>\n"}, {"tags": [], "owner": {"reputation": 1893, "user_id": 4257674, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o1ZeC.png?s=128&g=1", "display_name": "frasnian", "link": "https://stackoverflow.com/users/4257674/frasnian"}, "is_accepted": false, "score": 1, "last_activity_date": 1421835696, "last_edit_date": 1421835696, "creation_date": 1421835349, "answer_id": 28064598, "question_id": 28064318, "link": "https://stackoverflow.com/questions/28064318/how-can-i-put-bash-script-in-c-program/28064598#28064598", "title": "How can I put bash script in C program", "body": "<p>Q1: use <code>fork()</code> and don't wait on the child's PID.</p>\n\n<p>Q2: C and C++ will concatenate adjacent string literals, like so:</p>\n\n<pre><code>static const char script[] =\n\"echo hello\\n\"\n\"echo how are you\\n\"\n\"echo today\"\n;\n\nint main(int argc, char* argv[])\n{\n  puts(script);      // so you can see what it looks like \n  // system(script); // &lt;-- uncomment this line to actually run it.\n  return 0;\n}\n</code></pre>\n\n<p>Q3: use the <code>argc</code> and <code>argv</code> parameters to <code>main()</code> to build the command line you want to execute.</p>\n"}], "owner": {"reputation": 4106, "user_id": 4124087, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a916fecc5dc146ae13acb136de974b3f?s=128&d=identicon&r=PG&f=1", "display_name": "onur", "link": "https://stackoverflow.com/users/4124087/onur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1421835696, "creation_date": 1421834548, "question_id": 28064318, "link": "https://stackoverflow.com/questions/28064318/how-can-i-put-bash-script-in-c-program", "title": "How can I put bash script in C program", "body": "<p>I have shell scripts and I need to run that continuous work in background. </p>\n\n<p>For example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char **argv)\n{\n    for (; ;) {\n            system(\"./dup -r /root/duptest/\");  \n            sleep(60);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>It's working and run every minute. </p>\n\n<p><strong>First question:</strong> How can I run this background(like &amp; --> ./dup ... &amp;) without put &amp;.</p>\n\n<p><strong>Second question:</strong> How can I put shell codes in C source codes? \nI found this, Do I need to put <code>\\n\\</code> for all lines? It's so hard for edit.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define SHELLSCRIPT \"\\\n#/bin/bash \\n\\\necho \\\"hello\\\" \\n\\\necho \\\"how are you\\\" \\n\\\necho \\\"today\\\" \\n\\\n\"\n\nint main()\n{\nsystem(SHELLSCRIPT);\nreturn 0;\n}\n</code></pre>\n\n<p><strong>Third question:</strong> How can I use shell parameter in C, like this:</p>\n\n<pre><code>./dup.exe -r /blablabla...\n</code></pre>\n\n<p>mean</p>\n\n<pre><code> system(\"./dup -r /blablabla\");\n</code></pre>\n\n<p>I need to use $1 $2 parameter with compiled C program.</p>\n"}, {"tags": ["c", "linux", "crc", "stm32", "crc32"], "comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1421835804, "post_id": 28064278, "comment_id": 44509720, "body": "If STM32 version gives you the incorrect result, you should probably show the relevant code with the results."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1421836782, "post_id": 28064278, "comment_id": 44510337, "body": "Doc you linked said that start value on that model should be programmable, but your code doesn&#39;t initialize it. Also, you should also show the result you get from that."}], "answers": [{"comments": [{"owner": {"reputation": 2798, "user_id": 492747, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/6175ac3e7ef6faba1f1ac2a3decbec7b?s=128&d=identicon&r=PG", "display_name": "evading", "link": "https://stackoverflow.com/users/492747/evading"}, "edited": false, "score": 0, "creation_date": 1421852269, "post_id": 28065011, "comment_id": 44519781, "body": "Yes, as a matter of fact it is generating a <code>str</code> instruction. Do you know how I force arm gcc to generate a <code>strb</code> instruction instead?"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 2798, "user_id": 492747, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/6175ac3e7ef6faba1f1ac2a3decbec7b?s=128&d=identicon&r=PG", "display_name": "evading", "link": "https://stackoverflow.com/users/492747/evading"}, "edited": false, "score": 0, "creation_date": 1421852715, "post_id": 28065011, "comment_id": 44520069, "body": "First, make sure (by reading the CPU docs) that it really <i>can</i> update the CRC by just 8 bits of data. I looked in a similar chip&#39;s docs, and it says the CRC32 module is 32-bit only. So, the reasonable thing to do then is to change your zlib test to update by four 0-bytes and compare that."}, {"owner": {"reputation": 2219, "user_id": 384507, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/08ca63344a235f109fcd53656cf14a42?s=128&d=identicon&r=PG", "display_name": "Greg", "link": "https://stackoverflow.com/users/384507/greg"}, "edited": false, "score": 1, "creation_date": 1469874932, "post_id": 28065011, "comment_id": 64726083, "body": "The 8-bit issue (<code>strb</code>) will be because <code>CRC-&gt;DR</code> is defined as <code>volatile uint32_t*</code>, thus all accesses are word oriented (independent of the cast you did) try casting to a <code>volatile uint8_t*</code>"}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 1, "last_activity_date": 1421836647, "creation_date": 1421836647, "answer_id": 28065011, "question_id": 28064278, "link": "https://stackoverflow.com/questions/28064278/matching-crc32-from-stm32f0-and-zlib/28065011#28065011", "title": "Matching CRC32 from STM32F0 and zlib", "body": "<p>I haven't tested this, but I suspect that you're not, in fact, doing an 8-bit write on the STM32.</p>\n\n<p>Instead you're probably doing a write to the full width of the register (32 bits), which of course means you're computing the CRC32 of more bytes than you intended.</p>\n\n<p>Disassemble the generated code to analyze the exact store instruction that is being used.</p>\n"}, {"comments": [{"owner": {"reputation": 2798, "user_id": 492747, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/6175ac3e7ef6faba1f1ac2a3decbec7b?s=128&d=identicon&r=PG", "display_name": "evading", "link": "https://stackoverflow.com/users/492747/evading"}, "edited": false, "score": 3, "creation_date": 1421910523, "post_id": 28077091, "comment_id": 44544068, "body": "To think I would get an answer from the &quot;God Father&quot; of zlib himself, fantastic! The CRC_INIT and Polynomial are actually the same as zlib by default. It was the rev_in, rev_out and final inversion of the result that got me there. Thanks!"}, {"owner": {"reputation": 121, "user_id": 4646735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2159a73e51936cf851e7ccf325b71f16?s=128&d=identicon&r=PG&f=1", "display_name": "curator23", "link": "https://stackoverflow.com/users/4646735/curator23"}, "edited": false, "score": 0, "creation_date": 1549537596, "post_id": 28077091, "comment_id": 95941470, "body": "Unfortunately this doesn&#39;t seem to work on the STM32F4xx. It has a data register and a reset bit. No other configuration is possible."}, {"owner": {"reputation": 78348, "user_id": 1180620, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/FXaAg.jpg?s=128&g=1", "display_name": "Mark Adler", "link": "https://stackoverflow.com/users/1180620/mark-adler"}, "reply_to_user": {"reputation": 121, "user_id": 4646735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2159a73e51936cf851e7ccf325b71f16?s=128&d=identicon&r=PG&f=1", "display_name": "curator23", "link": "https://stackoverflow.com/users/4646735/curator23"}, "edited": false, "score": 0, "creation_date": 1549565620, "post_id": 28077091, "comment_id": 95957929, "body": "@curator23 Oh well. It does however use the correct polynomial, but without reversing the order in which the bits are processed. There might still be a benefit to using the hardware CRC over a software CRC if you reverse the bits in the bytes you feed to the CRC, and then reverse the bits in the resulting CRC."}, {"owner": {"reputation": 121, "user_id": 4646735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2159a73e51936cf851e7ccf325b71f16?s=128&d=identicon&r=PG&f=1", "display_name": "curator23", "link": "https://stackoverflow.com/users/4646735/curator23"}, "edited": false, "score": 0, "creation_date": 1550163508, "post_id": 28077091, "comment_id": 96178494, "body": "@MarkAdler Yes, found the &#39;reverse bits&#39; instruction rbit and its gcc macro __RBIT in core_cmInst.h. Wouldn&#39;t work with DMA, but that seems an unlikely scenario. I guess you could pre-reverse the bits and then initiate DMA if you really wanted :)"}], "tags": [], "owner": {"reputation": 78348, "user_id": 1180620, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/FXaAg.jpg?s=128&g=1", "display_name": "Mark Adler", "link": "https://stackoverflow.com/users/1180620/mark-adler"}, "is_accepted": true, "score": 5, "last_activity_date": 1421875403, "creation_date": 1421875403, "answer_id": 28077091, "question_id": 28064278, "link": "https://stackoverflow.com/questions/28064278/matching-crc32-from-stm32f0-and-zlib/28077091#28077091", "title": "Matching CRC32 from STM32F0 and zlib", "body": "<p>From the documentation, it appears that your STM32 code is not just uninteresting \u2014 it is rather incomplete.  From the documentation, in order to use the CRC hardware you need to:</p>\n\n<ol>\n<li>Enable the CRC peripheral clock via the RCC peripheral.</li>\n<li>Set the CRC Data Register to the initial CRC value by configuring the Initial CRC value register (CRC_INIT).(a)</li>\n<li>Set the I/O reverse bit order through the REV_IN[1:0] and REV_OUT bits respectively in CRC Control register (CRC_CR).(a)</li>\n<li>Set the polynomial size and coefficients through the POLYSIZE[1:0] bits in CRC\nControl register (CRC_CR) and CRC Polynomial register (CRC_POL) respectively.(b)</li>\n<li>Reset the CRC peripheral through the Reset bit in CRC Control register (CRC_CR).</li>\n<li>Set the data to the CRC Data register.</li>\n<li>Read the content of the CRC Data register.</li>\n<li>Disable the CRC peripheral clock.</li>\n</ol>\n\n<p>Note in particular steps 2, 3, and 4, which define the CRC being computed.  They say that their example has rev_in and rev_out false, but for the zlib crc, they need to be true.  Depending on the way the hardware is implemented, the polynomial will likely need to reversed as well (<code>0xedb88320UL</code>).  The initial CRC needs to be <code>0xffffffff</code>, and the final CRC inverted to match the zlib crc.</p>\n"}, {"comments": [{"owner": {"reputation": 2219, "user_id": 384507, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/08ca63344a235f109fcd53656cf14a42?s=128&d=identicon&r=PG", "display_name": "Greg", "link": "https://stackoverflow.com/users/384507/greg"}, "edited": false, "score": 2, "creation_date": 1469957795, "post_id": 37745234, "comment_id": 64744596, "body": "FYI: You can configure STM32F0 to give you CRC32 as per zip using the     <code>CRC_ReverseInputDataSelect(CRC_ReverseInputData_32bits);</code> <code>CRC_ReverseOutputDataCmd(ENABLE);</code> in the <code>stdperiph</code> library - I haven&#39;t looked at the newer <code>HAL</code> library.  You&#39;ll just have to invert the result you read from the hardware."}], "tags": [], "owner": {"reputation": 119, "user_id": 1346811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9ff6b44c7b022b9d587f809e5b50fe6?s=128&d=identicon&r=PG", "display_name": "Ayyala", "link": "https://stackoverflow.com/users/1346811/ayyala"}, "is_accepted": false, "score": 7, "last_activity_date": 1465552480, "creation_date": 1465552480, "answer_id": 37745234, "question_id": 28064278, "link": "https://stackoverflow.com/questions/28064278/matching-crc32-from-stm32f0-and-zlib/37745234#37745234", "title": "Matching CRC32 from STM32F0 and zlib", "body": "<p>The CRC32 implementation on STM32Fx seems to be not the standard CRC32 implementation you find on many online CRC calculators and the one used in zip. </p>\n\n<p>STM32 implements CRC32-MPEG2 which uses big endian and no final flip mask compared to the zip CRC32 which uses little endian and a final flip mask.</p>\n\n<p>I found <a href=\"http://www.sunshine2k.de/coding/javascript/crc/crc_js.html\" rel=\"noreferrer\">this</a> online calculator which supports CRC32-MPEG2.</p>\n\n<p>If you are more interested on other CRC algorithms and their implementation, look at this <a href=\"http://reveng.sourceforge.net/crc-catalogue/all.htm\" rel=\"noreferrer\">link</a>. </p>\n\n<p>PS: The HAL driver from STM supports input in byte, half word and word formats and they seem to work fine for STM32F0x in v1.3.1</p>\n"}, {"tags": [], "owner": {"reputation": 3559, "user_id": 2717397, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Ur8zJ.jpg?s=128&g=1", "display_name": "Enix", "link": "https://stackoverflow.com/users/2717397/enix"}, "is_accepted": false, "score": 0, "last_activity_date": 1474777362, "last_edit_date": 1495541887, "creation_date": 1474777362, "answer_id": 39683344, "question_id": 28064278, "link": "https://stackoverflow.com/questions/28064278/matching-crc32-from-stm32f0-and-zlib/39683344#39683344", "title": "Matching CRC32 from STM32F0 and zlib", "body": "<p>From my experience, you can not compare the CRC32 code between the STM32 CRC unit output with the online CRC32 calculator. </p>\n\n<p>Please find my CRC32 calculator for STM32 <a href=\"https://stackoverflow.com/questions/39646441/how-to-set-stm32-to-generate-standard-crc32/39683314#39683314\">in this link</a>.</p>\n\n<p>This function has been used in my project, and proved to be correct.</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 9175027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f9745e45ce57f0622475a5bbda2aa06?s=128&d=identicon&r=PG&f=1", "display_name": "James Yau", "link": "https://stackoverflow.com/users/9175027/james-yau"}, "is_accepted": false, "score": 1, "last_activity_date": 1515105317, "creation_date": 1515105317, "answer_id": 48104558, "question_id": 28064278, "link": "https://stackoverflow.com/questions/28064278/matching-crc32-from-stm32f0-and-zlib/48104558#48104558", "title": "Matching CRC32 from STM32F0 and zlib", "body": "<p>I had similar issues implementing a CRC on an STM32 CRC module where the final checksum was not matching. I was able to fix this by looking at the example code in stm32f30x_crc.c that is provided with STMCube. In the source it has a function for 8-bit CRC that used the following code</p>\n\n<p><em>(uint8_t</em>)(CRC_BASE) = (uint8_t) CRC_Data;</p>\n\n<p>to write to the DR register. As stated previously, the line CRC->DR is defined as volatile uint32_t which will access the whole register. It would have been helpful if ST had been more explicit about accessing the DR register rather than simply saying it supports 8-bit types.</p>\n"}], "owner": {"reputation": 2798, "user_id": 492747, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/6175ac3e7ef6faba1f1ac2a3decbec7b?s=128&d=identicon&r=PG", "display_name": "evading", "link": "https://stackoverflow.com/users/492747/evading"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7122, "favorite_count": 4, "accepted_answer_id": 28077091, "answer_count": 5, "score": 4, "last_activity_date": 1515105317, "creation_date": 1421834415, "last_edit_date": 1421913417, "question_id": 28064278, "link": "https://stackoverflow.com/questions/28064278/matching-crc32-from-stm32f0-and-zlib", "title": "Matching CRC32 from STM32F0 and zlib", "body": "<p>I'm working on a communication link between a computer running Linux and a STM32F0. I want to use some kind of error detection for my packets and since the STM32F0 has CRC32 hw and I have zlib with CRC32 on Linux I thought it would be a good idea to use CRC32 for my project. The problem is that I won't get the same CRC value for the same data on the different platforms.</p>\n\n<pre><code>#include &lt;inttypes.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;zlib.h&gt;\n\nint\nmain(void)\n{\n  uint8_t byte0 = 0x00;\n  uint32_t crc0 = crc32(0L, Z_NULL, 0);\n  crc0 = crc32(crc0, &amp;byte0, 1);\n  printf(\"CRC32 value of %\" PRIu8 \" is: %08\" PRIx32 \"\\n\", byte0, crc0);\n}\n</code></pre>\n\n<p>outputs <code>CRC32 value of 0 is: d202ef8d</code> which matches the result on several online calculators.</p>\n\n<p>It seems though that whatever settings I use on the STM32 I can't get the same CRC.\nI have found a flowchart on how the CRC hw calculates its value <a href=\"http://www.st.com/st-web-ui/static/active/en/resource/technical/document/application_note/DM00068118.pdf\" rel=\"nofollow\">in an application note from ST</a> but I can't figure out how it's done in zlib.</p>\n\n<p>Does anyone know if they are compatible?</p>\n\n<p>[edit 1] They both uses the same init value and polynomial.</p>\n\n<p>[edit 2] The STM32 code is relatively uninteresging since it's using the hw.</p>\n\n<pre><code>...\n/* Default values are used for init value and polynomial, see edit 1 */\nCRC-&gt;CR |= CRC_CR_RESET;\nCRC-&gt;DR = (uint8_t)0x00;\nuint32_t crc = CRC-&gt;DR;\n...\n</code></pre>\n"}, {"tags": ["c", "windows"], "comments": [{"owner": {"reputation": 3193, "user_id": 2694511, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/2e9aw.png?s=128&g=1", "display_name": "Spencer D", "link": "https://stackoverflow.com/users/2694511/spencer-d"}, "edited": false, "score": 0, "creation_date": 1421834056, "post_id": 28063501, "comment_id": 44508610, "body": "If you are looking to confirm that the URL&#39;s domain is legitimate, you could use <code>gethostbyname()</code>."}], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 4314127, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/21714cd93517ace250a120267b3f96b7?s=128&d=identicon&r=PG&f=1", "display_name": "Darshan", "link": "https://stackoverflow.com/users/4314127/darshan"}, "edited": false, "score": 0, "creation_date": 1421835351, "post_id": 28063857, "comment_id": 44509393, "body": "Hi, PathIsURL only checks whether the given path is right or wrong,for ex <a href=\"http://www.ocean.com/\" rel=\"nofollow noreferrer\">ocean.com</a> above api retrives TRUE but in reality there is no website by that name. So here i want validate the url by retrieving the error  message i got in the content of browser. I hope you got my concern"}, {"owner": {"reputation": 955, "user_id": 4384927, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c233d91742b49c9a2f27a62e9f08b0ab?s=128&d=identicon&r=PG&f=1", "display_name": "Chostakovitch", "link": "https://stackoverflow.com/users/4384927/chostakovitch"}, "reply_to_user": {"reputation": 121, "user_id": 4314127, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/21714cd93517ace250a120267b3f96b7?s=128&d=identicon&r=PG&f=1", "display_name": "Darshan", "link": "https://stackoverflow.com/users/4314127/darshan"}, "edited": false, "score": 0, "creation_date": 1421835594, "post_id": 28063857, "comment_id": 44509565, "body": "@dharani Sorry, I understood that you wanted to validate the format of the URL. In your case, you may use <a href=\"http://man7.org/linux/man-pages/man3/getaddrinfo.3.html\" rel=\"nofollow noreferrer\">getaddrinfo()</a> function and check for the return value (for exemple, <code>EAI_ADDRFAMILY</code> if the adress doesn&#39;t exist). <code>gethostbyname()</code> is deprecated."}, {"owner": {"reputation": 121, "user_id": 4314127, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/21714cd93517ace250a120267b3f96b7?s=128&d=identicon&r=PG&f=1", "display_name": "Darshan", "link": "https://stackoverflow.com/users/4314127/darshan"}, "edited": false, "score": 0, "creation_date": 1421842841, "post_id": 28063857, "comment_id": 44513857, "body": "Thanks for the information i will try with the same."}], "tags": [], "owner": {"reputation": 955, "user_id": 4384927, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c233d91742b49c9a2f27a62e9f08b0ab?s=128&d=identicon&r=PG&f=1", "display_name": "Chostakovitch", "link": "https://stackoverflow.com/users/4384927/chostakovitch"}, "is_accepted": false, "score": 0, "last_activity_date": 1421833221, "creation_date": 1421833221, "answer_id": 28063857, "question_id": 28063501, "link": "https://stackoverflow.com/questions/28063501/how-to-get-content-of-url-opened-to-determine-whether-url-provided-is-valid-or-n/28063857#28063857", "title": "How to get content of URL opened to determine whether Url provided is valid or not", "body": "<p>You may want to use <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb773724%28v=vs.85%29.aspx\" rel=\"nofollow\">PathIsURL</a> function from the Windows API.</p>\n"}], "owner": {"reputation": 121, "user_id": 4314127, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/21714cd93517ace250a120267b3f96b7?s=128&d=identicon&r=PG&f=1", "display_name": "Darshan", "link": "https://stackoverflow.com/users/4314127/darshan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1421833221, "creation_date": 1421832097, "question_id": 28063501, "link": "https://stackoverflow.com/questions/28063501/how-to-get-content-of-url-opened-to-determine-whether-url-provided-is-valid-or-n", "title": "How to get content of URL opened to determine whether Url provided is valid or not", "body": "<p>What is the best way to check if a URL is valid in c?</p>\n\n<p>i am launching url using windows api (ShellExecute) and it always launches default web browser, whether url is right or wrong.</p>\n\n<p>I'm not concerned about establishing a connection, just validity. Is there a method for this? </p>\n"}, {"tags": ["c", "macros", "malloc", "null-check"], "comments": [{"owner": {"reputation": 7714, "user_id": 172695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/M8IPi.png?s=128&g=1", "display_name": "Sebastian Dressler", "link": "https://stackoverflow.com/users/172695/sebastian-dressler"}, "edited": false, "score": 0, "creation_date": 1421831168, "post_id": 28063162, "comment_id": 44506974, "body": "<code>do { } while(0)</code> ?!"}, {"owner": {"reputation": 736, "user_id": 3677289, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/d8bf6fa3da2b8f7775956078adc8042c?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Ivanovich", "link": "https://stackoverflow.com/users/3677289/ivan-ivanovich"}, "reply_to_user": {"reputation": 7714, "user_id": 172695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/M8IPi.png?s=128&g=1", "display_name": "Sebastian Dressler", "link": "https://stackoverflow.com/users/172695/sebastian-dressler"}, "edited": false, "score": 0, "creation_date": 1421831222, "post_id": 28063162, "comment_id": 44507010, "body": "it is from freebsd source"}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1421831331, "post_id": 28063162, "comment_id": 44507067, "body": "the free macro is wrong, it should be <code>if(p)</code> instead of <code>if(!p)</code>. Also it is unnecessary, because you are allowed to do a <code>free(NULL);</code>."}, {"owner": {"reputation": 7714, "user_id": 172695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/M8IPi.png?s=128&g=1", "display_name": "Sebastian Dressler", "link": "https://stackoverflow.com/users/172695/sebastian-dressler"}, "edited": false, "score": 0, "creation_date": 1421831358, "post_id": 28063162, "comment_id": 44507082, "body": "@IvanIvanovich, yeah, because of this: <a href=\"http://stackoverflow.com/questions/257418/do-while-0-what-is-it-good-for\">do { \u2026 } while (0) \u2014 what is it good for?</a>. However, if you do not understand what it does, do not use it."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1421831777, "post_id": 28063162, "comment_id": 44507305, "body": "If I&#39;m reading this right, the macro retries <code>calloc</code> 5 times. I don&#39;t see how that guarantees getting memory."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1421832092, "post_id": 28063162, "comment_id": 44507476, "body": "1. If you know you always get memory you don&#39;t need error handling and no wrapper, so I do not understand your question to begin with. 2 In your first example, <code>if (p) </code>must be changed to <code>if(!p)</code>. 3. If calloc fails once, it will fail most likely 5 times as well, multiple tries don&#39;t make much sense. 4. Why do you pass i in as a parameter? It should be declared a local variable in the do loop."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1421832276, "post_id": 28063162, "comment_id": 44507589, "body": "Apart from my objections above, I like error handling wrapper macros. SGI had a header for that iirc, 20 years ago, and so does Stevens in his books. It makes the important code more readable by reducing the noise. For larger projects more elaborate error handlig (logging etc.) makes such macros more difficult to use, but for small, isolated  programs it can be nice."}], "answers": [{"tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 2, "last_activity_date": 1421831699, "last_edit_date": 1495542510, "creation_date": 1421831168, "answer_id": 28063234, "question_id": 28063162, "link": "https://stackoverflow.com/questions/28063162/macro-wrapper-for-malloc-pros-and-cons/28063234#28063234", "title": "macro wrapper for malloc pros and cons", "body": "<blockquote>\n  <p>why do it if you can guarantee getting memory.</p>\n</blockquote>\n\n<p>Your assumption is wrong.</p>\n\n<p><code>malloc()</code>  <code>calloc()</code> and <code>realloc()</code> might fail. So when the memory requested by you is not successfully allocated then these functions retrun NULL. If this check is not there then you go ahead and start writing to this memory location which is not allocated which causes undefined behavior.</p>\n\n<p>If your question is about why there is a do while loop in the macro. The below link explains it really well</p>\n\n<p><a href=\"https://stackoverflow.com/questions/257418/do-while-0-what-is-it-good-for\">do { ... } while (0) \u2014 what is it good for?</a></p>\n"}, {"tags": [], "owner": {"reputation": 3193, "user_id": 2694511, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/2e9aw.png?s=128&g=1", "display_name": "Spencer D", "link": "https://stackoverflow.com/users/2694511/spencer-d"}, "is_accepted": false, "score": 1, "last_activity_date": 1421834537, "last_edit_date": 1421834537, "creation_date": 1421833437, "answer_id": 28063929, "question_id": 28063162, "link": "https://stackoverflow.com/questions/28063162/macro-wrapper-for-malloc-pros-and-cons/28063929#28063929", "title": "macro wrapper for malloc pros and cons", "body": "<p>First of all, this is incorrect and actually does the opposite of what it should:</p>\n\n<pre><code>void *p; \np = malloc(100);\nif (p) \n{ \n  perror(\"malloc\"); \n  return false;\n}\n</code></pre>\n\n<p>This if statement says: <code>if( malloc succeeded ){ return AN_ERROR; }</code></p>\n\n<p>It should say:</p>\n\n<pre><code>void *p; \np = malloc(100);\nif( NULL == p ) \n{ \n  perror(\"malloc\"); \n  return false;\n}\n</code></pre>\n\n<p>Now as for your question:</p>\n\n<blockquote>\n  <p>But one thought, why do it if you can guarantee getting memory?</p>\n</blockquote>\n\n<p>As Gopi stated, you cannot guarantee getting memory. You very well can run out of memory and thus be unable to allocate anymore. It is unlikely that you will use up all of the available memory for the process, but it could happen. This is why checking the return of functions like like <code>malloc()</code>, <code>calloc()</code>, and <code>realloc()</code> is essential.</p>\n\n<p>Any of these memory allocation functions can fail if there is not enough memory and you must be prepared to handle that. Let us suppose you allocate space for string, but malloc fails and you do not check for that:</p>\n\n<pre><code>int main(int argc, char *argv[]){\n    char stringToCopy[] = \"Some very long string would be here ...\";\n    char *stringBuffer = malloc( 1000 ); // 1000 char buffer\n    // Malloc failed and we did not check for it\n    strncpy(stringBuffer, stringToCopy); /* UNDEFINED BEHAVIOUR */\n    return 0;\n}\n</code></pre>\n\n<p>So in this situation, malloc failed and we proceeded to attempt to copy the string to the buffer anyway. As soon as we begin doing that, we cause undefined behavior. Typically this kind of action would cause the program to crash due to a <a href=\"https://en.wikipedia.org/wiki/Segmentation_fault\" rel=\"nofollow\">Segmentation Fault</a>.</p>\n\n<p>This can be serious and can result in the loss of data or the loss of service. At a minimum, a segmentation fault would inconvenience the user.</p>\n\n<p>As some general rules: <strong>Always</strong> check the return values of <code>malloc()</code>, <code>calloc()</code> and <code>realloc()</code>; <strong>Never</strong> blindly trust that these functions were successful.</p>\n\n<p>Whether you choose to do this check inside of a macro or not is your own choice (there aren't many advantages/disadvantages), but just make sure you perform the check and you perform it properly.</p>\n"}], "owner": {"reputation": 736, "user_id": 3677289, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/d8bf6fa3da2b8f7775956078adc8042c?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Ivanovich", "link": "https://stackoverflow.com/users/3677289/ivan-ivanovich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 766, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1421834537, "creation_date": 1421830927, "last_edit_date": 1421831388, "question_id": 28063162, "link": "https://stackoverflow.com/questions/28063162/macro-wrapper-for-malloc-pros-and-cons", "title": "macro wrapper for malloc pros and cons", "body": "<p>I've always done checking what <code>malloc</code> returns like this: </p>\n\n<pre><code>void *p; \np = malloc(100);\nif (p) \n{ \n  perror(\"malloc\"); \n  return false;\n}\n</code></pre>\n\n<p>But one thought, why do it if you can guarantee getting memory?</p>\n\n<pre><code>#define GET_MEM(p,s,i) do{for(p=NULL,i=0;!(p=calloc(1,s))&amp;&amp;i&lt;5;perror(\"calloc\"),i++)}while(0)\n</code></pre>\n\n<p>What are the <code>pros</code> and <code>cons</code> of such a decision? How should it be done?</p>\n"}, {"tags": ["c", "web-services", "wsdl", "axis2c", "wsdl2code"], "answers": [{"comments": [{"owner": {"reputation": 488, "user_id": 2482874, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/57d7366da5584bda643930c73c2bf485?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah Aziziyan", "link": "https://stackoverflow.com/users/2482874/sarah-aziziyan"}, "edited": false, "score": 0, "creation_date": 1422169758, "post_id": 28077728, "comment_id": 44640553, "body": "I still can&#39;t make it work. I explained in the question above."}], "tags": [], "owner": {"reputation": 4721, "user_id": 395616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26d967054fff7c5ad56b31a270ab3e47?s=128&d=identicon&r=PG", "display_name": "loentar", "link": "https://stackoverflow.com/users/395616/loentar"}, "is_accepted": false, "score": 1, "last_activity_date": 1421878751, "last_edit_date": 1421878751, "creation_date": 1421877963, "answer_id": 28077728, "question_id": 28063026, "link": "https://stackoverflow.com/questions/28063026/how-to-use-axis2c-to-generate-c-files-from-wsdl-file/28077728#28077728", "title": "How to use Axis2c to generate C files from WSDL file", "body": "<p>In addition to Axis2/C you must have Axis2/Java installed.</p>\n\n<p><code>AXIS2_HOME</code> must point to Axis2/Java installation.</p>\n\n<p>For details please see <a href=\"https://axis2c-unofficial.googlecode.com/hg/tools/codegen/javatool/README\" rel=\"nofollow\">README</a> of codegen.</p>\n\n<p>The complete list of commands to create and compile client is:</p>\n\n<pre><code># create stubs\nsh $AXIS2C_HOME/bin/tools/wsdl2c/WSDL2C.sh -uri Calculator.wsdl -u -uw\n\n# implement main() in src/your_client.c\n# see samples/codegen/client/calculator for example\n\n# compile and link client\ngcc -o calculator_client src/*.c -I$AXIS2C_HOME/include/axis2-1.6.0 -L$AXIS2C_HOME/lib -laxutil -laxis2_axiom -laxis2_parser -laxis2_engine -lpthread -laxis2_http_sender -laxis2_http_receiver -ldl -Wl,--rpath -Wl,$AXIS2C_HOME/lib\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 488, "user_id": 2482874, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/57d7366da5584bda643930c73c2bf485?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah Aziziyan", "link": "https://stackoverflow.com/users/2482874/sarah-aziziyan"}, "is_accepted": true, "score": 0, "last_activity_date": 1422268429, "last_edit_date": 1422268429, "creation_date": 1422254947, "answer_id": 28145764, "question_id": 28063026, "link": "https://stackoverflow.com/questions/28063026/how-to-use-axis2c-to-generate-c-files-from-wsdl-file/28145764#28145764", "title": "How to use Axis2c to generate C files from WSDL file", "body": "<p>I set the envinroment variable for JAVA_HOME, AXIS2_HOME, AXIS2C_HOME, and added their lib folder to CLASSPATH. after running this command:\n WSDL2C.bat -uri hello.wsdl -u -uw \nI got this message:</p>\n\n<pre><code>echo off \nError: Could not find or load main class org.apache.axis2.wsdl.WSDL2C\n</code></pre>\n\n<p>I found the solution myself. :)\nI double checked if I had created the environment variable for AXIS2_HOME and I saw that it is there, correctly.\nin spite of it's existence I tried to set it again in command prompt. so I typed:</p>\n\n<pre><code>SET AXIS2_HOME=E:\\dev\\Tools\\axis2-1.6.2\n</code></pre>\n\n<p>then I typed the command for WSDL2C code generator:</p>\n\n<pre><code>WSDL2C.bat -uri hello.wsdl -u -uw\n</code></pre>\n\n<p>And BAM ! it worked properly.\nNow I can generate C files from WSDL file.</p>\n"}], "owner": {"reputation": 488, "user_id": 2482874, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/57d7366da5584bda643930c73c2bf485?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah Aziziyan", "link": "https://stackoverflow.com/users/2482874/sarah-aziziyan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1418, "favorite_count": 0, "accepted_answer_id": 28145764, "answer_count": 2, "score": 0, "last_activity_date": 1422268429, "creation_date": 1421830489, "last_edit_date": 1422255393, "question_id": 28063026, "link": "https://stackoverflow.com/questions/28063026/how-to-use-axis2c-to-generate-c-files-from-wsdl-file", "title": "How to use Axis2c to generate C files from WSDL file", "body": "<p>I want to use a webservice in C code. I am trying to make a client. I need something to do what Axis2java does and generates the classes from a wsdl files. \nI found that Axis2c makes (.c) files generated from wsdl file.\nI downloaded it from <a href=\"http://axis.apache.org/axis2/c/core/download.cgi\" rel=\"nofollow\">here</a> . unzipped it. I created the environment variable for AXIS2C_HOME and I created AXIS2C_CLASSPATH.\nbut I can't make it work.</p>\n\n<p>when I type this command :</p>\n\n<pre><code>WSDL2C -uri -ss -sd -d none -u -f -o\n</code></pre>\n\n<p>I get this error : </p>\n\n<pre>\necho off\nError: Could not find or load main class org.apache.axis2.wsdl.WSDL2C\n</pre>\n\n<p>how can I solve this problem. and please tell me how to use this Axis2c tool properly.</p>\n\n<p>Thank you in advance.</p>\n\n<p>@loentar :  I installed Axis2/Java and I set the environment variable for it. now I run the wsdl2c.bat I get this :</p>\n\n<pre>\nE:\\dev\\Tools\\axis2c-bin-1.6.0-win32\\bin\\tools\\wsdl2c>WSDL2C.bat\n\nE:\\dev\\Tools\\axis2c-bin-1.6.0-win32\\bin\\tools\\wsdl2c>echo off\nUsage: java [-options] class [args...]\n           (to execute a class)\n   or  java [-options] -jar jarfile [args...]\n           (to execute a jar file)\nwhere options include:\n    -d32          use a 32-bit data model if available\n    -d64          use a 64-bit data model if available\n    -server       to select the \"server\" VM\n                  The default VM is server.\n\n    -cp \n    -classpath \n                  A ; separated list of directories, JAR archives,\n                  and ZIP archives to search for class files.\n    -D=\n                  set a system property\n    -verbose:[class|gc|jni]\n                  enable verbose output\n    -version      print product version and exit\n    -version:\n                  require the specified version to run\n    -showversion  print product version and continue\n    -jre-restrict-search | -no-jre-restrict-search\n                  include/exclude user private JREs in the version search\n    -? -help      print this help message\n    -X            print help on non-standard options\n    -ea[:...|:]\n    -enableassertions[:...|:]\n                  enable assertions with specified granularity\n    -da[:...|:]\n    -disableassertions[:...|:]\n                  disable assertions with specified granularity\n    -esa | -enablesystemassertions\n                  enable system assertions\n    -dsa | -disablesystemassertions\n                  disable system assertions\n    -agentlib:[=]\n                  load native agent library , e.g. -agentlib:hprof\n                  see also, -agentlib:jdwp=help and -agentlib:hprof=help\n    -agentpath:[=]\n                  load native agent library by full pathname\n    -javaagent:[=]\n                  load Java programming language agent, see java.lang.instrument\n\n    -splash:\n                  show splash screen with specified image\nSee http://www.oracle.com/technetwork/java/javase/documentation/index.html for m\nore details.\n</pre>\n\n<p>after that I run this command :</p>\n\n<pre>\nE:\\dev\\Tools\\axis2c-bin-1.6.0-win32\\bin\\tools\\wsdl2c>WSDL2C.bat -uri hello.wsdl\n-u -uw\n\nE:\\dev\\Tools\\axis2c-bin-1.6.0-win32\\bin\\tools\\wsdl2c>echo off\nUnrecognized option: -uri\nError: Could not create the Java Virtual Machine.\nError: A fatal exception has occurred. Program will exit.\n</pre>\n\n<p>what can I do ?\nI'm using windows 8 by the way.</p>\n"}, {"tags": ["c", "callback", "gtk", "gtk3"], "answers": [{"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 1, "last_activity_date": 1421832662, "creation_date": 1421832662, "answer_id": 28063688, "question_id": 28062882, "link": "https://stackoverflow.com/questions/28062882/gtk3-checking-whether-callback-is-connected-to-an-object/28063688#28063688", "title": "GTK3+ checking whether callback is connected to an object.", "body": "<p>You use <a href=\"https://developer.gnome.org/gobject/stable/gobject-Signals.html#g-signal-handler-find\" rel=\"nofollow\"><code>g_signal_handler_find()</code></a>, and its <code>G_SIGNAL_MATCH_FUNC</code> matching-mode.</p>\n"}], "owner": {"reputation": 163, "user_id": 4363423, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh3.googleusercontent.com/-rppH_NjBxZM/AAAAAAAAAAI/AAAAAAAAAJg/MBvcNZI4Sl8/photo.jpg?sz=128", "display_name": "Sackhorn", "link": "https://stackoverflow.com/users/4363423/sackhorn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1421832662, "creation_date": 1421829897, "question_id": 28062882, "link": "https://stackoverflow.com/questions/28062882/gtk3-checking-whether-callback-is-connected-to-an-object", "title": "GTK3+ checking whether callback is connected to an object.", "body": "<p>How do i check whether a given function is connected to an object via g_signal_connect ? </p>\n\n<p>I'm using gtk+ 3.0 , code::blocks 13.12 ,ubuntu 14.04 and C as a programming language.</p>\n"}, {"tags": ["c", "database", "sqlite"], "comments": [{"owner": {"reputation": 304952, "user_id": 18771, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/0ada184c98bf9073d15b2dc815be0170?s=128&d=identicon&r=PG", "display_name": "Tomalak", "link": "https://stackoverflow.com/users/18771/tomalak"}, "edited": false, "score": 0, "creation_date": 1421830052, "post_id": 28062791, "comment_id": 44506376, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/1313120/retrieving-the-last-record-in-each-group\">Retrieving the last record in each group</a>"}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 1851886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/174193b7c012ac5a2ce0d4d00728f831?s=128&d=identicon&r=PG", "display_name": "kollarotta", "link": "https://stackoverflow.com/users/1851886/kollarotta"}, "edited": false, "score": 0, "creation_date": 1421834619, "post_id": 28063025, "comment_id": 44508943, "body": "how should I bind the user_input? What is the best way to do it against sql injection?"}], "tags": [], "owner": {"reputation": 8331, "user_id": 4350275, "user_type": "registered", "accept_rate": 36, "profile_image": "https://lh4.googleusercontent.com/-Mo6YiD_JPIc/AAAAAAAAAAI/AAAAAAAAHB4/TgdGmvza868/photo.jpg?sz=128", "display_name": "Prerak Sola", "link": "https://stackoverflow.com/users/4350275/prerak-sola"}, "is_accepted": true, "score": 0, "last_activity_date": 1421832098, "last_edit_date": 1421832098, "creation_date": 1421830480, "answer_id": 28063025, "question_id": 28062791, "link": "https://stackoverflow.com/questions/28062791/sqlite-find-a-certain-value-and-find-the-highest-value-on-another-column-on-th/28063025#28063025", "title": "SQLite - find a certain value and find the highest value on another column on the row input value appears then select all the elements on that row", "body": "<p>Yes, you can use <code>prepared statement</code> and <code>sqlite_bind</code> for passing the user input to query.\nFor selecting the row with highest <code>messsage</code> value you can use,</p>\n\n<p><code>Select * from [table_name] where id = [user_input] order by message desc limit 1;</code></p>\n"}], "owner": {"reputation": 9, "user_id": 1851886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/174193b7c012ac5a2ce0d4d00728f831?s=128&d=identicon&r=PG", "display_name": "kollarotta", "link": "https://stackoverflow.com/users/1851886/kollarotta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 28063025, "answer_count": 1, "score": 0, "last_activity_date": 1421832098, "creation_date": 1421829527, "question_id": 28062791, "link": "https://stackoverflow.com/questions/28062791/sqlite-find-a-certain-value-and-find-the-highest-value-on-another-column-on-th", "title": "SQLite - find a certain value and find the highest value on another column on the row input value appears then select all the elements on that row", "body": "<p>I am using sqlite3 library on a c project. And I have a database like this:</p>\n\n<pre><code>|  Time  |  Message  |  ID  |  Temp  |\n|--------|-----------|------|--------|\n|09:05:37|    1514   |  62  |   35   |\n|10:14:45|    1515   |  43  |   14   |\n|11:18:50|    1997   |  28  |   43   |\n|08:04:23|    1998   |  28  |   50   |           \n</code></pre>\n\n<p>Message is an autoincrement value. What I am trying to do and my questions are:</p>\n\n<pre><code>int ID_in;\nprintf(\"Enter the ID you want to check: \");\nscanf(\"%d\", &amp;ID_in);\n</code></pre>\n\n<p>Firstly user will input a value and I have to find does that value appear on ID column and if it appears I can start my operations. Since user will input a value should I use a <code>sqlite3_bind()</code> function on my database to compare the <code>ID_in</code> with the values on database?</p>\n\n<p>If the <code>ID_in</code> appears on the ID column I have to find the highest value on the Message column which is on the same row with ID_in value since there may be more on than one <code>ID_in</code> value on the ID column. For example if the <code>ID_in</code> is 28 I have to access the row which Message value is highest, for this one I have to access the row where Message value is 1998.</p>\n\n<p>After I access that row I should print all the columns on that row. For example if ID_in is 28 find the value 28 on ID column. Then find the highest Message column value which is 1998. Then print Time, Message, ID, Temp on that row which are 08:04:23, 1998, 28, 50 for this example.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 5, "creation_date": 1421829731, "post_id": 28062785, "comment_id": 44506238, "body": "&quot;In this example, if i type &quot;ST&quot; and then hit enter, &#39;S&#39; will be stored in firstinit, while &quot;\\n&quot; will be stored in lastInit instead of &#39;T&#39;.&quot; - this is simply not true.  Try it."}, {"owner": {"reputation": 21711, "user_id": 418729, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Vm1jt.jpg?s=128&g=1", "display_name": "Sadique", "link": "https://stackoverflow.com/users/418729/sadique"}, "edited": false, "score": 0, "creation_date": 1421829941, "post_id": 28062785, "comment_id": 44506335, "body": "@Reeza - Are you really entering <code>ST</code> together in your second example?"}, {"owner": {"reputation": 1, "user_id": 4477269, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uIfph.jpg?s=128&g=1", "display_name": "ReezaHendricks", "link": "https://stackoverflow.com/users/4477269/reezahendricks"}, "edited": false, "score": 0, "creation_date": 1421830071, "post_id": 28062785, "comment_id": 44506384, "body": "hmm..i am really confused now..actually i lifted both these examples from a c text book...can u explain how the getchar() logic works"}, {"owner": {"reputation": 1, "user_id": 4477269, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uIfph.jpg?s=128&g=1", "display_name": "ReezaHendricks", "link": "https://stackoverflow.com/users/4477269/reezahendricks"}, "reply_to_user": {"reputation": 21711, "user_id": 418729, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Vm1jt.jpg?s=128&g=1", "display_name": "Sadique", "link": "https://stackoverflow.com/users/418729/sadique"}, "edited": false, "score": 0, "creation_date": 1421830248, "post_id": 28062785, "comment_id": 44506476, "body": "@al-Acme yes..but it seems johnzwinck is right...it does work.."}, {"owner": {"reputation": 1, "user_id": 4477269, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uIfph.jpg?s=128&g=1", "display_name": "ReezaHendricks", "link": "https://stackoverflow.com/users/4477269/reezahendricks"}, "edited": false, "score": 0, "creation_date": 1421830282, "post_id": 28062785, "comment_id": 44506497, "body": "Here is that para from the book:   You would think that ifthe user typed GT, the G would go in the variable firstInit and the T would go in lastInit, but that\u2019s not what happens. The first getchar() doesn\u2019t finish until the user presses Enter because the G was going to the buffer. Only when the user presses Enter does the G leave the buffer and go to the program\u2014but then the Enter is still on the buffer! Therefore, the second getchar() sends that Enter (actually, the \\n that represents Enter) to lastInit. The T is still left for a subsequent getchar() (ifthere is one)."}, {"owner": {"reputation": 2182, "user_id": 1689090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef8d951e67e4b0c03f5b4c021e22b93d?s=128&d=identicon&r=PG", "display_name": "Evil Dog Pie", "link": "https://stackoverflow.com/users/1689090/evil-dog-pie"}, "edited": false, "score": 0, "creation_date": 1421830987, "post_id": 28062785, "comment_id": 44506875, "body": "That&#39;s incorrect.  What book are you reading?"}, {"owner": {"reputation": 1, "user_id": 4477269, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uIfph.jpg?s=128&g=1", "display_name": "ReezaHendricks", "link": "https://stackoverflow.com/users/4477269/reezahendricks"}, "reply_to_user": {"reputation": 2182, "user_id": 1689090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef8d951e67e4b0c03f5b4c021e22b93d?s=128&d=identicon&r=PG", "display_name": "Evil Dog Pie", "link": "https://stackoverflow.com/users/1689090/evil-dog-pie"}, "edited": false, "score": 0, "creation_date": 1421836548, "post_id": 28062785, "comment_id": 44510179, "body": "@MikeofSST saw this thing in this book C Programming Absolute Beginner - Perry, Greg"}, {"owner": {"reputation": 2182, "user_id": 1689090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef8d951e67e4b0c03f5b4c021e22b93d?s=128&d=identicon&r=PG", "display_name": "Evil Dog Pie", "link": "https://stackoverflow.com/users/1689090/evil-dog-pie"}, "edited": false, "score": 0, "creation_date": 1421840568, "post_id": 28062785, "comment_id": 44512542, "body": "Ok, it&#39;s not &#39;strictly&#39; correct.  Most of my code is in embedded systems that do not use buffered input.  In these situations <code>getchar()</code> will return immediately when a character is present in the <code>stdin</code> stream.  On systems that do use a buffered driver, <code>getchar()</code> will only return when the buffer is flushed to the stream, usually when the user presses &lt;RETURN&gt; or similar.  See <a href=\"http://stackoverflow.com/a/3676874/3581917\">this answer</a> for more information."}, {"owner": {"reputation": 2182, "user_id": 1689090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef8d951e67e4b0c03f5b4c021e22b93d?s=128&d=identicon&r=PG", "display_name": "Evil Dog Pie", "link": "https://stackoverflow.com/users/1689090/evil-dog-pie"}, "edited": false, "score": 0, "creation_date": 1421840657, "post_id": 28062785, "comment_id": 44512595, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/3676796/what-does-getchar-exactly-do\">What does getchar() exactly do?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 4161, "user_id": 3404637, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/N9Qo0.jpg?s=128&g=1", "display_name": "Ali786", "link": "https://stackoverflow.com/users/3404637/ali786"}, "is_accepted": false, "score": 0, "last_activity_date": 1421830272, "last_edit_date": 1421830272, "creation_date": 1421829803, "answer_id": 28062858, "question_id": 28062785, "link": "https://stackoverflow.com/questions/28062785/getchar-function-logic-in-the-following-codes/28062858#28062858", "title": "Getchar() function logic in the following codes", "body": "<p>the only reason for storing \\n is when you are entering S the pressing enter and not flushing out the carriage return so it will store <code>\\n</code> in your second string.</p>\n\n<pre><code>firstInit = getchar() ; \n</code></pre>\n\n<p>will read and store S</p>\n\n<pre><code>lastInit = getchar() ;\n</code></pre>\n\n<p>will read and store carriage return</p>\n\n<p>getchar() is a standard library function which will read a character from the console.</p>\n"}, {"comments": [{"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "reply_to_user": {"reputation": 1, "user_id": 4477269, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uIfph.jpg?s=128&g=1", "display_name": "ReezaHendricks", "link": "https://stackoverflow.com/users/4477269/reezahendricks"}, "edited": false, "score": 0, "creation_date": 1421836853, "post_id": 28062968, "comment_id": 44510383, "body": "@ReezaHendricks Your issue is fixed? You got to know how gethchar works ?"}], "tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 0, "last_activity_date": 1421830680, "last_edit_date": 1421830680, "creation_date": 1421830264, "answer_id": 28062968, "question_id": 28062785, "link": "https://stackoverflow.com/questions/28062785/getchar-function-logic-in-the-following-codes/28062968#28062968", "title": "Getchar() function logic in the following codes", "body": "<p>Check the below code which takes your input <code>ST</code> and stores it in 2 char's a and b.</p>\n\n<pre><code>int main(void){\nchar a;\nchar b;\n\na = getchar();\nb= getchar();\n\nprintf(\"a = %c b = %c\\n\",a,b);\nreturn 0;\n}\n</code></pre>\n\n<p>Input</p>\n\n<pre><code>ST&lt;enter&gt;\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>a = S b = T\n</code></pre>\n\n<p>If you are seeing a newline char being saved into <code>b</code> here then the input is like <code>S&lt;enter&gt;</code> not <code>ST&lt;enter&gt;</code></p>\n"}], "owner": {"reputation": 1, "user_id": 4477269, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uIfph.jpg?s=128&g=1", "display_name": "ReezaHendricks", "link": "https://stackoverflow.com/users/4477269/reezahendricks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1421830882, "creation_date": 1421829492, "last_edit_date": 1421830882, "question_id": 28062785, "link": "https://stackoverflow.com/questions/28062785/getchar-function-logic-in-the-following-codes", "title": "Getchar() function logic in the following codes", "body": "<p>I would like to know about the getchar() logic in the following codes...</p>\n\n<pre><code>printf(\"Type up to 25 characters and then press Enter. . . \\n\") ;  \nfor (i = 0; i &lt; 25; i++)  \n{  \n    msg[ i] = getchar() ;   \n    if (msg[ i] == ' \\n' )  \n    {   \n            i--;  \n            break;  \n    }  \n}\nputchar(' \\n' ) ;  \nfor (; i &gt;= 0; i--)  \n{\n    putchar(msg[ i] ) ;\n}\n</code></pre>\n\n<p>In the above code if i input a name,say \"STACKEXCHANGE\" and then hit enter it will display the word properly..but the below code works differently..</p>\n\n<pre><code>printf(\"What are your two initials?\\n\") ;  \nfirstInit = getchar() ;  \nlastInit = getchar() ;\n</code></pre>\n\n<p>In this example, if i type \"ST\" and then hit enter, 'S' will be stored in firstinit, while \"\\n\" will be stored in lastInit instead of 'T'.</p>\n\n<p>How does this happen? Isn't 'T' the second character input into the buffer. Infact \\n is the third character in the buffer. so why does \\n get stored. correct me if iam wrong, but the buffer is released when \\n is pressed or entered, then why is it again being stored in the next getchar() function. </p>\n\n<p>Why is the first code executed differently then? I mean if i input \"stackexchange\" and hit enter \"t\" is stored as the second character as is wanted, but it in the second example if the same \"st\" is typed and \"enter' is input, the \"t\" is not stored as the second input, but instead \"enter' is taken as the second input.</p>\n\n<p>I am sorry if my typing is confusing... basically i want to know the logical flow in both codes, how it happens behind the scene..</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 125, "user_id": 3483181, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/GgpoG.jpg?s=128&g=1", "display_name": "DsDude", "link": "https://stackoverflow.com/users/3483181/dsdude"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1421829606, "post_id": 28062738, "comment_id": 44506186, "body": "No, sorry I&#39;ll make sure to edit that, I was having another problem but realized the problem and fixed it, and stackoverflow saves a draft what you write previously, my bad"}, {"owner": {"reputation": 2182, "user_id": 1689090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef8d951e67e4b0c03f5b4c021e22b93d?s=128&d=identicon&r=PG", "display_name": "Evil Dog Pie", "link": "https://stackoverflow.com/users/1689090/evil-dog-pie"}, "edited": false, "score": 0, "creation_date": 1421830014, "post_id": 28062738, "comment_id": 44506360, "body": "You should declare your program entry point as <code>int main(void)</code> and put a <code>return 0;</code> as the last statement.  Also, in C <code>=</code> is assignment and will set the value of th variable on the left to that of the item on the right, and <code>==</code> is a test for equality.  Also arrays are indexed from 0 to N-1 (rather than 1 to N)."}, {"owner": {"reputation": 2182, "user_id": 1689090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef8d951e67e4b0c03f5b4c021e22b93d?s=128&d=identicon&r=PG", "display_name": "Evil Dog Pie", "link": "https://stackoverflow.com/users/1689090/evil-dog-pie"}, "edited": false, "score": 0, "creation_date": 1421830736, "post_id": 28062738, "comment_id": 44506735, "body": "What happens if you remove or comment out the line (start it with <code>&#47;&#47;</code> or put <code>&#47;*</code> before it and <code>*&#47;</code> after it) in the <code>main</code> function?  Does the Process still return the a non-zero value?"}], "answers": [{"tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": true, "score": 0, "last_activity_date": 1421834376, "last_edit_date": 1421834376, "creation_date": 1421829706, "answer_id": 28062834, "question_id": 28062738, "link": "https://stackoverflow.com/questions/28062738/process-returned-26866464-0x28fe00-error/28062834#28062834", "title": "Process returned 26866464 &lt;0x28FE00&gt; error", "body": "<pre><code>visited[N][N] == false;\n</code></pre>\n\n<p>This is not a assignment operator it is a comparison operator(==) and you need to fix this like</p>\n\n<pre><code>visited[N-1][N-1] = false; /* Array access should be within bound */\n</code></pre>\n\n<p>The same fix needs to done in multiple places. </p>\n\n<p>Without initializing the array elements you use them for comparison like</p>\n\n<pre><code>visited[x][y] == true \n</code></pre>\n\n<p>Using uninitialized variables will cause undefined behavior</p>\n"}], "owner": {"reputation": 125, "user_id": 3483181, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/GgpoG.jpg?s=128&g=1", "display_name": "DsDude", "link": "https://stackoverflow.com/users/3483181/dsdude"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 28062834, "answer_count": 1, "score": 1, "last_activity_date": 1421834376, "creation_date": 1421829332, "last_edit_date": 1421829655, "question_id": 28062738, "link": "https://stackoverflow.com/questions/28062738/process-returned-26866464-0x28fe00-error", "title": "Process returned 26866464 &lt;0x28FE00&gt; error", "body": "<p>I'm taking a computer programming class in C and I'm trying to implement an algorithm to use for the Knight's Tour Problem. I realized that C doesn't have booleans unless you design them yourself or put '0' and '1' as true and false and be consistent with them.  I decided to use the latter, and it compiled but said \"Process returned 26866464 &lt;0x28FE00>\" I wrote this program from pseudocode that was provided on the internet, I understand the idea of the Knight's Tour and this code, but I can't really point out what exactly is the mistake. I feel like it's something wrong with the way I'm printing it.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\n#define N 5\n\nbool algorithmMove(int x, int y, int m)\n{\n   bool visited[N][N];\n   visited[N][N] == false;\n\n   if (x &lt; 0 || x &gt;= N || y &lt; 0 || y &gt;= N)\n   {\n       return false;\n   }\n   if (visited[x][y] == true)\n   {\n       return false;\n   }\n   if (m = (N*N) - 1)\n   {\n       printf(\"A solution has been found\");\n       printf(\"x, y\");\n       visited[x][y] == true;\n       return true;\n   }\n   else\n   {\n       bool result;\n       result = false;\n\n       result = result || algorithmMove(x+2, y+1, m+1);\n       result = result || algorithmMove(x+2, y-1, m+1);\n       result = result || algorithmMove(x-2, y+1, m+1);\n       result = result || algorithmMove(x-2, y-1, m+1);\n       result = result || algorithmMove(x+1, y+2, m+1);\n       result = result || algorithmMove(x+1, y-2, m+1);\n       result = result || algorithmMove(x-1, y+2, m+1);\n       result = result || algorithmMove(x-1, y-2, m+1);\n\n       if (result = true)\n       {\n           printf(\"x, y\");\n           return true;\n       }\n       else\n       {\n           visited[x][y] == false;\n           return false;\n       }\n   }\n}\n\nmain()\n{\n   algorithmMove(2, 4, 0);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 3491, "user_id": 1978330, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0e9eb90f9829e55edb3852aa5208ab5c?s=128&d=identicon&r=PG", "display_name": "theadam", "link": "https://stackoverflow.com/users/1978330/theadam"}, "edited": false, "score": 1, "creation_date": 1421829418, "post_id": 28062693, "comment_id": 44506094, "body": "I recommend learning C basics first, there are quite a few C tutorials online, just Google."}], "answers": [{"comments": [{"owner": {"reputation": 193, "user_id": 4477301, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-HOsJmulw0Xs/AAAAAAAAAAI/AAAAAAAAG8w/TdHW-oqtSPs/photo.jpg?sz=128", "display_name": "H_meir", "link": "https://stackoverflow.com/users/4477301/h-meir"}, "edited": false, "score": 0, "creation_date": 1421842991, "post_id": 28062761, "comment_id": 44513937, "body": "thank you very nuch p.s i forced to use scanf_s becoas im using vs... p.s.2 if i dont use scanf_s did i steal need to do it like this?    scanf(&quot;%s&quot;, choice, sizeof(choice)); ? or i need to do it back like this scanf(&quot;%s&quot;, &amp;choice);?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 193, "user_id": 4477301, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-HOsJmulw0Xs/AAAAAAAAAAI/AAAAAAAAG8w/TdHW-oqtSPs/photo.jpg?sz=128", "display_name": "H_meir", "link": "https://stackoverflow.com/users/4477301/h-meir"}, "edited": false, "score": 0, "creation_date": 1421843340, "post_id": 28062761, "comment_id": 44514146, "body": "@H_meir The plain <code>scanf</code> doesn&#39;t use the size argument, and you still should not use the address-of operator <code>&amp;</code> on arrays (or pointers) for strings."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 0, "last_activity_date": 1421829431, "creation_date": 1421829431, "answer_id": 28062761, "question_id": 28062693, "link": "https://stackoverflow.com/questions/28062693/c-programming-try-to-get-enum-word-in-scanf-and-put-it-in-int-array/28062761#28062761", "title": "c programming try to get enum word in scanf and put it in int array", "body": "<p>You're using <a href=\"https://msdn.microsoft.com/en-us/library/w40768et.aspx\" rel=\"nofollow\"><code>scanf_s</code></a> wrong. First of all the array <code>choice</code> decays to a pointer when passing it to a function, so you should not use the address-of operator <code>&amp;</code> there. Secondly, and more importantly, for each format code in the format string, <a href=\"https://msdn.microsoft.com/en-us/library/w40768et.aspx\" rel=\"nofollow\"><code>scanf_s</code></a> expects <em>two</em> arguments: The destination of the conversion, and the size of the destination.</p>\n\n<p>Since you don't pass the size, you have <a href=\"http://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\"><em>undefined behavior</em></a> when the <code>scanf_s</code> function tries to fetch that value of the stack.</p>\n\n<p>Your call should look like</p>\n\n<pre><code>scanf_s(\"%s\", choice, sizeof(choice));\n</code></pre>\n\n<hr>\n\n<p>As a side-note: You don't actually <em>use</em> the enumeration you define. To use it you should do e.g.</p>\n\n<pre><code>...\nenum color colors[20];\n...\ncolors[i] = RED;\n</code></pre>\n\n<p>As another side-note: You only use 20 entries in the <code>colors</code> array, but you define it as 21 entries.</p>\n"}], "owner": {"reputation": 193, "user_id": 4477301, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-HOsJmulw0Xs/AAAAAAAAAAI/AAAAAAAAG8w/TdHW-oqtSPs/photo.jpg?sz=128", "display_name": "H_meir", "link": "https://stackoverflow.com/users/4477301/h-meir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 561, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1421829431, "creation_date": 1421829150, "question_id": 28062693, "link": "https://stackoverflow.com/questions/28062693/c-programming-try-to-get-enum-word-in-scanf-and-put-it-in-int-array", "title": "c programming try to get enum word in scanf and put it in int array", "body": "<p>I try to run this program and use the enum to get a string from the user and put it in A array as a int \nthe problme is that when i try to get with scanf the data from the user , than instead of runing the program  by  its gump forward </p>\n\n<p>this is the code :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt; \n\n\nint main()\n{\n    enum color { RED = 1, BLUE, BLACK };\nchar choice[6];\nint colors[21];\nint  i, counter_red = 0, counter_blue = 0, counter_black = 0, x;\n\n\nfor (i = 0; i &lt; 20; i++)\n{\n    printf(\"Write your favorite color : RED, BLUE or BLACK\\n\");\n    scanf_s(\"%s\", &amp;choice);\n\n\n    if (strcmp(choice, \"BLACK\") == 0)\n    {\n        colors[i] = 3;\n    }\n\n    if (strcmp(choice, \"BLUE\") == 0)\n    {\n        colors[i] = 2;\n    }\n\n    if (strcmp(choice, \"RED\") == 0)\n    {\n        colors[i] = 1;\n    }\n\n\n\n}\n\n\nfor (x = 0; x &lt; 20; x++)\n{\n    if (colors[x] == 1)\n    {\n        counter_red++;\n    }\n    else if (colors[x] == 2)\n    {\n        counter_blue++;\n    }\n    else if (colors[x] == 3)\n    {\n        counter_black++;\n    }\n}\nif (counter_red &gt; counter_blue &amp;&amp; counter_red &gt; counter_black)\n{\n    printf(\"%s\", \"The most popular color is: RED\\n\");\n}\nelse if (counter_blue &gt; counter_red &amp;&amp; counter_blue &gt; counter_black)\n{\n    printf(\"%s\", \"The most popular color is: BLUE\\n\");\n}\nelse if (counter_black &gt; counter_red &amp;&amp; counter_blue &lt; counter_black)\n{\n    printf(\"%s\", \"The most popular color is: BLACK\\n\");\n}\nprintf(\"RED: %d % \\nBLUE: %d %\\nBLACK : %d % \\n\", counter_red * 5, counter_blue * 5, counter_black * 5);\n\n\nreturn 0;\n\n}\n</code></pre>\n"}, {"tags": ["c", "math", "bit-manipulation", "bitwise-operators"], "comments": [{"owner": {"reputation": 222, "user_id": 2407888, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8898a1f760282508e81e645453096576?s=128&d=identicon&r=PG", "display_name": "srjohnhuang", "link": "https://stackoverflow.com/users/2407888/srjohnhuang"}, "reply_to_user": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 0, "creation_date": 1421829339, "post_id": 28062656, "comment_id": 44506057, "body": "Better than count it manually. :-D"}, {"owner": {"reputation": 5996, "user_id": 1152524, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b2e23f3f9bf82e6fe806261f50b2f9b6?s=128&d=identicon&r=PG&f=1", "display_name": "txtechhelp", "link": "https://stackoverflow.com/users/1152524/txtechhelp"}, "edited": false, "score": 2, "creation_date": 1421829412, "post_id": 28062656, "comment_id": 44506092, "body": "what does <code>getAmountFromBitwise()</code> do now?"}, {"owner": {"reputation": 222, "user_id": 2407888, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8898a1f760282508e81e645453096576?s=128&d=identicon&r=PG", "display_name": "srjohnhuang", "link": "https://stackoverflow.com/users/2407888/srjohnhuang"}, "edited": false, "score": 0, "creation_date": 1421829652, "post_id": 28062656, "comment_id": 44506201, "body": "The definations are defined in sequence, 0x01, 0x02, 0x04, 0x8, 0x10, ...., every next value are multiple by 2 from previous one."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1421829838, "post_id": 28062656, "comment_id": 44506287, "body": "Are you saying that you want a function to identify the most-significant bit set in its argument?"}, {"owner": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1421830112, "post_id": 28062656, "comment_id": 44506408, "body": "@MattMcNabb: Seems like the index of <b>L</b>SB, index starting at 1."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1421830266, "post_id": 28062656, "comment_id": 44506485, "body": "your function doesn&#39;t even compile because <code>2^x = input;</code> is invalid and x and y weren&#39;t declared before. And this is not the &quot;amount&quot; but the bit position"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1421830477, "post_id": 28062656, "comment_id": 44506598, "body": "possible duplicate: <a href=\"http://stackoverflow.com/questions/757059/position-of-least-significant-bit-that-is-set\" title=\"position of least significant bit that is set\">stackoverflow.com/questions/757059/&hellip;</a>"}, {"owner": {"reputation": 222, "user_id": 2407888, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8898a1f760282508e81e645453096576?s=128&d=identicon&r=PG", "display_name": "srjohnhuang", "link": "https://stackoverflow.com/users/2407888/srjohnhuang"}, "reply_to_user": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1421830496, "post_id": 28062656, "comment_id": 44506611, "body": "@L\u01b0uV\u0129nhPh&#250;c, it is just my pseudo code. i want to know how do i get the y."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 1, "creation_date": 1421830587, "post_id": 28062656, "comment_id": 44506660, "body": "best way: <code>__builtin_ctz</code> in gcc and <code>_BitScanReverse</code> in MSVC <a href=\"http://en.wikipedia.org/wiki/Find_first_set\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Find_first_set</a>"}, {"owner": {"reputation": 27478, "user_id": 183120, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fc147f814e1473bb6105db3d924fb590?s=128&d=identicon&r=PG", "display_name": "legends2k", "link": "https://stackoverflow.com/users/183120/legends2k"}, "reply_to_user": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1421833212, "post_id": 28062656, "comment_id": 44508145, "body": "@L\u01b0uV\u0129nhPh&#250;c Wouldn&#39;t that be <a href=\"https://msdn.microsoft.com/en-us/library/vstudio/wfd9z0bb%28v=vs.100%29.aspx\" rel=\"nofollow noreferrer\"><code>_BitScanForward</code></a>?"}], "answers": [{"tags": [], "owner": {"reputation": 5054, "user_id": 548515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55624bebc921a03713d00a91c9e58a36?s=128&d=identicon&r=PG", "display_name": "Hans Lub", "link": "https://stackoverflow.com/users/548515/hans-lub"}, "is_accepted": true, "score": 3, "last_activity_date": 1421832745, "creation_date": 1421832745, "answer_id": 28063719, "question_id": 28062656, "link": "https://stackoverflow.com/questions/28062656/how-to-get-the-position-of-the-first-set-bit-of-a-number/28063719#28063719", "title": "How to get the position of the first set bit of a number", "body": "<p>I would use this as your <code>getAmountFromBitwise()</code>.</p>\n\n<pre><code>int highest_bit_set(long long n) {\n  int result = 1;\n  while(n &gt;&gt;= 1) /* keep shifting right until n == 0 */\n    result++;\n  return result;\n}\n</code></pre>\n\n<p>Note that this requires that <code>n != 0</code> for a correct result.</p>\n"}], "owner": {"reputation": 222, "user_id": 2407888, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8898a1f760282508e81e645453096576?s=128&d=identicon&r=PG", "display_name": "srjohnhuang", "link": "https://stackoverflow.com/users/2407888/srjohnhuang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 457, "favorite_count": 0, "accepted_answer_id": 28063719, "answer_count": 1, "score": 0, "last_activity_date": 1423261745, "creation_date": 1421829027, "last_edit_date": 1423261745, "question_id": 28062656, "link": "https://stackoverflow.com/questions/28062656/how-to-get-the-position-of-the-first-set-bit-of-a-number", "title": "How to get the position of the first set bit of a number", "body": "<p>for example, my definition looks like the following:</p>\n\n<pre><code>#define AA              0x0000000000000001LL\n#define BB              0x0000000000000002LL\n#define CC              0x0000000000000004LL\n#define DD              0x0000000000000008LL\n#define EE              0x0000000000000010LL\n#define FF              0x0000000000000020LL\n#define GG              0x0000000000000040LL\n#define HH              0x0000000000000080LL\n</code></pre>\n\n<p>I would like to get the position of the first set bit (counting backwards from the least significant bit)  from the maximum definition.</p>\n\n<pre><code>h = getAmountFromBitwise(HH);\noutput of h is 8;\nb = getAmountFromBitwise(BB);\noutput b is 2;\n</code></pre>\n\n<p>Is there any better way to implement getAmountFromBitwise()?</p>\n\n<pre><code>int getAmountFromBitwise(long long input) {\n  2^x = input;\n  y=x+1;\n  return y;\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "strncmp"], "comments": [{"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 1, "creation_date": 1421827496, "post_id": 28062256, "comment_id": 44505299, "body": "What compiler are you using?  Do you have optimization turned all the way up?  Also, why use <code>strncmp()</code> to compare only one character?  You could just compare the <code>char</code>s directly."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 6, "creation_date": 1421827547, "post_id": 28062256, "comment_id": 44505317, "body": "You can probably make it even &quot;faster&quot; if you <i>don&#39;t</i> use <code>strncmp</code>. Since you&#39;re only comparing two characters (don&#39;t forget the string terminator), you could do e,g, <code>if (info[i - 1].name[0] == &#39;2&#39; &amp;&amp; info[i - 1].name[1] == &#39;\\0&#39;) ...</code>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 9, "creation_date": 1421828189, "post_id": 28062256, "comment_id": 44505551, "body": "Also note that the two code snippets are <i>not</i> equivalent. In the first code snippet, if the second <code>strncmp</code> in the first <code>if</code> is false, the code goes to the <code>else</code> which if both comparisons are true you do the code in it (e.g. <code>i += 2</code>. However in the second code snippet, if the first outer <code>if</code> is true, and the first nested <code>if</code> condition is false, you will <b><i>not</i></b> go to the <code>else</code>."}, {"owner": {"reputation": 224, "user_id": 3663917, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/RWAo3.jpg?s=128&g=1", "display_name": "user-ag", "link": "https://stackoverflow.com/users/3663917/user-ag"}, "edited": false, "score": 0, "creation_date": 1421828287, "post_id": 28062256, "comment_id": 44505597, "body": "Thanks  Joachim Pileborg . For comparison of single character i could use the index. But in some other comparisons i want to compare more than one characters. There i have to use strncmp."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1421828400, "post_id": 28062256, "comment_id": 44505652, "body": "Oh, my first comment is kind of wrong, that check is equivalent to a <code>strcmp</code> call, not <code>strncmp</code>. If you&#39;re only comparing the first character then you don&#39;t need the extra check for the string terminator."}, {"owner": {"reputation": 12300, "user_id": 249618, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/81060fe344980bc9a3273a48b8f3e31c?s=128&d=identicon&r=PG", "display_name": "SF.", "link": "https://stackoverflow.com/users/249618/sf"}, "edited": false, "score": 0, "creation_date": 1421832390, "post_id": 28062256, "comment_id": 44507661, "body": "One more thing: Caching the results. Likely, in the previous iteration you&#39;ve already compared <code>info[i].name</code> to <code>&quot;1&quot;</code> with i=1, now at i=2, you&#39;re comparing <code>info[i-1].name</code> to <code>&quot;1&quot;</code> repeating the previous operation. Remember results in some variables and reuse them."}, {"owner": {"reputation": 224, "user_id": 3663917, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/RWAo3.jpg?s=128&g=1", "display_name": "user-ag", "link": "https://stackoverflow.com/users/3663917/user-ag"}, "edited": false, "score": 0, "creation_date": 1421833076, "post_id": 28062256, "comment_id": 44508058, "body": "All the strings are stored in the array &quot;info&quot; so is available every time. Also the value of i is incremented by 2 so that a single string is not compared twice."}], "answers": [{"comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1421827917, "post_id": 28062362, "comment_id": 44505449, "body": "Theoretically not different from the second code snippet, where if the expression in the outer <code>if</code> is false then the second (nested) comparison will not occur and the code will go straight to the <code>else</code>."}, {"owner": {"reputation": 224, "user_id": 3663917, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/RWAo3.jpg?s=128&g=1", "display_name": "user-ag", "link": "https://stackoverflow.com/users/3663917/user-ag"}, "edited": false, "score": 1, "creation_date": 1421828070, "post_id": 28062362, "comment_id": 44505504, "body": "The same applies to code 2 also right? ie, if the first &#39;if&#39; statement is false then it wont evaluate the second &#39;if &#39; statement inside it and moves to the else condition."}, {"owner": {"reputation": 12300, "user_id": 249618, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/81060fe344980bc9a3273a48b8f3e31c?s=128&d=identicon&r=PG", "display_name": "SF.", "link": "https://stackoverflow.com/users/249618/sf"}, "edited": false, "score": 0, "creation_date": 1421828235, "post_id": 28062362, "comment_id": 44505572, "body": "While I&#39;ve known of the short-circuit evaluation for years, it still sometimes bites me in the rump if I forget to think about it. Just recently, an operation is retried a fixed number of times and at the end the number of tries is logged; the retry loop was like <code>do { ... } while (! operation_successful &amp;&amp; (++tries_count) &lt; tries_limit)</code>. If the operation is successful in the first try, tries_count shows 0. Switching the conditions around <code>&amp;&amp;</code> fixed the count."}], "tags": [], "owner": {"reputation": 2640, "user_id": 2387328, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/OdMxG.jpg?s=128&g=1", "display_name": "nj-ath", "link": "https://stackoverflow.com/users/2387328/nj-ath"}, "is_accepted": false, "score": 1, "last_activity_date": 1421828750, "last_edit_date": 1421828750, "creation_date": 1421827843, "answer_id": 28062362, "question_id": 28062256, "link": "https://stackoverflow.com/questions/28062256/strncmp-in-two-statements-takes-more-time-than-in-single-statement/28062362#28062362", "title": "strncmp in two statements takes more time than in single statement", "body": "<p>In code 1, you're using <code>&amp;&amp;</code> operator. The speciality is that it doesn't evaluate the second expression if the first expression(LHS) turns out to be false. This is called short-circuit evaluation. So if your first expression in code 1 is false, it directly goes to <code>else</code>. </p>\n\n<p>Also, your nested if-statement will generate extra stack frame which will slow down the program(code 2)</p>\n"}], "owner": {"reputation": 224, "user_id": 3663917, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/RWAo3.jpg?s=128&g=1", "display_name": "user-ag", "link": "https://stackoverflow.com/users/3663917/user-ag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1421829007, "creation_date": 1421827402, "last_edit_date": 1421829007, "question_id": 28062256, "link": "https://stackoverflow.com/questions/28062256/strncmp-in-two-statements-takes-more-time-than-in-single-statement", "title": "strncmp in two statements takes more time than in single statement", "body": "<p>For doing a file sorting in my code i used <code>strncmp</code> for the comparison of first elements of each string.</p>\n\n<p>Including my code here :</p>\n\n<p><strong>Code 1:</strong></p>\n\n<pre><code>for (i = 1; i &lt; file_cnt; )\n{\n  if ((strncmp(info[i-1].name, \"1\", 1) == 0) &amp;&amp; \n      (strncmp(info[i].name, \"2\", 1) == 0))\n  {\n    to do....\n    i += 2;\n  }\n  else if ((strncmp(info[i-1].name, \"2\", 1) == 0) &amp;&amp;\n           (strncmp(info[i].name, \"1\", 1) == 0))\n  {\n    to do....\n    i += 2;\n  }\n  ...\n}\n</code></pre>\n\n<p><strong>Code 2:</strong></p>\n\n<pre><code>for (i = 1; i &lt; file_cnt; )\n{\n  if (strncmp(info[i-1].name, \"1\", 1) == 0)\n  {\n    if (strncmp(info[i].name, \"2\", 1) == 0)\n    {\n      to do....\n      i += 2;\n    }\n  }\n  else if (strncmp(info[i-1].name, \"2\", 1) == 0)\n  {\n    if (strncmp(info[i].name, \"1\", 1) == 0)\n    {\n      to do....\n      i += 2;\n    }\n  }\n  ...\n}\n</code></pre>\n\n<p>Here the <code>Code 2</code> takes comparatively more time than <code>Code 1</code>. I am working with a cross platform device and running <code>Code 2</code> on it causes many issues with other portions of my code.</p>\n\n<p>Why is it that the two statement comparison taking more time than a single statement comparison? </p>\n"}, {"tags": ["c", "arrays", "pointers", "gcc-warning"], "comments": [{"owner": {"reputation": 1475, "user_id": 1428404, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/353406b60b21d6d03c7c6f293876a069?s=128&d=identicon&r=PG", "display_name": "in need of help", "link": "https://stackoverflow.com/users/1428404/in-need-of-help"}, "edited": false, "score": 0, "creation_date": 1421826910, "post_id": 28062095, "comment_id": 44505077, "body": "Very straight forward. The function <code>Sum2D</code> is expecting to receive a const 2d array but you give it a non const one. This might be dangerous but not necessarily, that&#39;s why a warning and not error."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 1475, "user_id": 1428404, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/353406b60b21d6d03c7c6f293876a069?s=128&d=identicon&r=PG", "display_name": "in need of help", "link": "https://stackoverflow.com/users/1428404/in-need-of-help"}, "edited": false, "score": 0, "creation_date": 1421827002, "post_id": 28062095, "comment_id": 44505124, "body": "@inneedofhelp Actually, the function expects a <i>pointer</i> to a size COLS array of <code>const int</code>. In a function parameter, <code>const int ar[][COLS]</code> is the same as <code>const int (*ar)[COLS]</code>"}, {"owner": {"reputation": 33251, "user_id": 409744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b055a62302498782454622c61e44aa51?s=128&d=identicon&r=PG", "display_name": "Mario", "link": "https://stackoverflow.com/users/409744/mario"}, "edited": false, "score": 0, "creation_date": 1421827015, "post_id": 28062095, "comment_id": 44505130, "body": "Any reason for your parameter <code>rows</code> is there rather than just using the defined dimension?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1421827250, "post_id": 28062095, "comment_id": 44505221, "body": "Apparently gcc had a field day with their warnings. <a href=\"http://coliru.stacked-crooked.com/a/a099d825ec238dfe\" rel=\"nofollow noreferrer\">4.9.2 shows no such warnings</a>"}, {"owner": {"reputation": 998, "user_id": 1602266, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/457d6abcf68c31e39d26fb08f99e2ca4?s=128&d=identicon&r=PG", "display_name": "Naitree", "link": "https://stackoverflow.com/users/1602266/naitree"}, "reply_to_user": {"reputation": 1475, "user_id": 1428404, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/353406b60b21d6d03c7c6f293876a069?s=128&d=identicon&r=PG", "display_name": "in need of help", "link": "https://stackoverflow.com/users/1428404/in-need-of-help"}, "edited": false, "score": 0, "creation_date": 1421827310, "post_id": 28062095, "comment_id": 44505238, "body": "@inneedofhelp But this is actually an simplified example in the book <i>C Primer Plus</i>. It says that assigning a non-const pointer to a const pointer is okay. Because the <code>const</code> is for protection. Maybe it is not correct?"}, {"owner": {"reputation": 998, "user_id": 1602266, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/457d6abcf68c31e39d26fb08f99e2ca4?s=128&d=identicon&r=PG", "display_name": "Naitree", "link": "https://stackoverflow.com/users/1602266/naitree"}, "reply_to_user": {"reputation": 33251, "user_id": 409744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b055a62302498782454622c61e44aa51?s=128&d=identicon&r=PG", "display_name": "Mario", "link": "https://stackoverflow.com/users/409744/mario"}, "edited": false, "score": 0, "creation_date": 1421827410, "post_id": 28062095, "comment_id": 44505272, "body": "@Mario No, not really. It&#39;s just for use with arrays with different row number."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1421827462, "post_id": 28062095, "comment_id": 44505287, "body": "For the record, this compiles fine with clang, in strict c89, c99 and c11 modes."}, {"owner": {"reputation": 998, "user_id": 1602266, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/457d6abcf68c31e39d26fb08f99e2ca4?s=128&d=identicon&r=PG", "display_name": "Naitree", "link": "https://stackoverflow.com/users/1602266/naitree"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1421827594, "post_id": 28062095, "comment_id": 44505336, "body": "@WhozCraig Well that&#39;s somewhat relieving. Thanks for providing result from different version of gcc."}, {"owner": {"reputation": 998, "user_id": 1602266, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/457d6abcf68c31e39d26fb08f99e2ca4?s=128&d=identicon&r=PG", "display_name": "Naitree", "link": "https://stackoverflow.com/users/1602266/naitree"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1421827702, "post_id": 28062095, "comment_id": 44505373, "body": "@juanchopanza Thanks for providing results from clang."}, {"owner": {"reputation": 998, "user_id": 1602266, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/457d6abcf68c31e39d26fb08f99e2ca4?s=128&d=identicon&r=PG", "display_name": "Naitree", "link": "https://stackoverflow.com/users/1602266/naitree"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1421829177, "post_id": 28062095, "comment_id": 44505990, "body": "@juanchopanza and WhozCraig, Do you think this might be a &quot;bug&quot; in gcc 4.8.2? And this should actually be valid? (As it seems to be in gcc 4.9.2.)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1421830980, "post_id": 28062095, "comment_id": 44506870, "body": "Compilers are allowed to compile non-conforming programs as an extension, so it wouldn&#39;t be a serious bug, however it could be annoying if somebody writes code this way and later ports the code to a compiler that doesn&#39;t have the extension"}], "answers": [{"comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1421827708, "post_id": 28062262, "comment_id": 44505376, "body": "Do you have a reference for this? I wonder if this means clang is &quot;fixing&quot; this as an extension. I tried compiling in strict mode (<code>-Wall -Wextra -Wconversion -pedantic-errors  -std=cxx</code> where <code>xx</code> is 89, 99, 11.)"}, {"owner": {"reputation": 998, "user_id": 1602266, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/457d6abcf68c31e39d26fb08f99e2ca4?s=128&d=identicon&r=PG", "display_name": "Naitree", "link": "https://stackoverflow.com/users/1602266/naitree"}, "edited": false, "score": 0, "creation_date": 1421828496, "post_id": 28062262, "comment_id": 44505689, "body": "By ugly cast, do you mean something like <code>(const int (*)[])</code>? I did &quot;fix&quot; it by adding this in function call."}, {"owner": {"reputation": 998, "user_id": 1602266, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/457d6abcf68c31e39d26fb08f99e2ca4?s=128&d=identicon&r=PG", "display_name": "Naitree", "link": "https://stackoverflow.com/users/1602266/naitree"}, "edited": false, "score": 0, "creation_date": 1421832342, "post_id": 28062262, "comment_id": 44507628, "body": "I think my knowledge is still too limited to fully understand what you mean. But when I am trying, I want to ask: Are <code>const int (*)[4]</code> and <code>int const (*)[4]</code> the same thing? As the former is what I saw in the warning message."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 998, "user_id": 1602266, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/457d6abcf68c31e39d26fb08f99e2ca4?s=128&d=identicon&r=PG", "display_name": "Naitree", "link": "https://stackoverflow.com/users/1602266/naitree"}, "edited": false, "score": 1, "creation_date": 1421835832, "post_id": 28062262, "comment_id": 44509735, "body": "@Naitree <code>const int (*)[4]</code> and <code>int const (*)[4]</code> are the same thing; a pointer to an array of four const <code>int</code>. <i>Both</i> differ from <code>int (*const)[4]</code>, a const pointer to an array of four non-const <code>int</code>. And lest we leave it out, <code>int const (*const)[4]</code>, a const pointer to an array of four const <code>int</code>."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 998, "user_id": 1602266, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/457d6abcf68c31e39d26fb08f99e2ca4?s=128&d=identicon&r=PG", "display_name": "Naitree", "link": "https://stackoverflow.com/users/1602266/naitree"}, "edited": false, "score": 0, "creation_date": 1421836734, "post_id": 28062262, "comment_id": 44510302, "body": "@Naitree And imho, the const-issue of a fixed-declaration of a non-const array of const-qualified elements, per C11 6.7.3/9, is nothing if not pointless. As the array id itself is not an lvalue, the lack of const-ness applied therein shouldn&#39;t even be a question. That the compiler pukes a warning on the conversion-to-const-qualified-pointer-to-first-element where other versions of gcc don&#39;t makes me go &quot;wtf&quot;."}, {"owner": {"reputation": 998, "user_id": 1602266, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/457d6abcf68c31e39d26fb08f99e2ca4?s=128&d=identicon&r=PG", "display_name": "Naitree", "link": "https://stackoverflow.com/users/1602266/naitree"}, "edited": false, "score": 0, "creation_date": 1421893564, "post_id": 28062262, "comment_id": 44539301, "body": "@MattMcNabb Sorry for bothering you again. Would you mind checking if I understand your point correctly? As I understand,  the problem is that <code>const int[4]</code> means the data type &quot;array-of-4-constant-integer-numbers&quot;, rather than &quot;constant-array-of-4-integer-numbers&quot;. A pointer to &quot;array-of-4-integer-numbers&quot;(<code>int[4]</code>) may be converted to &quot;constant-array-of-4-integer-numbers&quot;, rather than to &quot;array-of-4-constant-integer numbers&quot;(<code>const int[4]</code>)."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1421895024, "post_id": 28062262, "comment_id": 44539659, "body": "add &quot;a pointer to&quot; before your last two quoted terms, and then it&#39;s ok"}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": true, "score": 11, "last_activity_date": 1421829354, "last_edit_date": 1421829354, "creation_date": 1421827434, "answer_id": 28062262, "question_id": 28062095, "link": "https://stackoverflow.com/questions/28062095/pass-a-two-dimensional-array-to-a-function-of-constant-parameter/28062262#28062262", "title": "Pass a two dimensional array to a function of constant parameter", "body": "<p>This is an unfortunate \"bug\" in C's design; <code>T (*p)[N]</code> does not implicitly convert to <code>T const (*p)[N]</code>.  You will have to either use an ugly cast, or have the function parameter not accept <code>const</code>.</p>\n\n<hr>\n\n<p>At first sight it looks like this conversion should be legal. C11 6.3.2.3/2:</p>\n\n<blockquote>\n  <p>For any qualifier <em>q</em>, a pointer to a non-<em>q</em>-qualified type may be converted to a pointer to the <em>q</em>-qualified version of the type; </p>\n</blockquote>\n\n<p>However also look at C11 6.7.3/9  (was /8 in C99):</p>\n\n<blockquote>\n  <p>If the specification of an array type includes any type qualifiers, the element type is so-qualified, not the array type.</p>\n</blockquote>\n\n<p>This last quote says that <code>int const[4]</code> is <strong>not</strong> considered to be a <code>const</code>-qualified version of <code>int[4]</code>. Actually it is a non-<code>const</code>-qualified array of 4 <code>const int</code>s.  <code>int[4]</code> and <code>int const[4]</code> are arrays of different element types.  </p>\n\n<p>So 6.3.2.3/2 does not in fact permit <code>int (*)[4]</code> to be converted to <code>int const (*)[4]</code>.</p>\n\n<hr>\n\n<p>Another weird situation where this issue with <code>const</code> and arrays shows up is when typedefs are in use; for example:</p>\n\n<pre><code>typedef int X[5];\nvoid func1( X const x );\nvoid func1( int const x[5] );\n</code></pre>\n\n<p>This would cause a compiler error: <code>X const x</code> means that <code>x</code> is const, but it is pointing to an array of non-const <code>int</code>s; whereas <code>int const x[5]</code> means <code>x</code> is not const but it is pointing to an array of const ints!</p>\n\n<p>Further reading <a href=\"https://gustedt.wordpress.com/2011/02/12/const-and-arrays/\">here</a>, thanks to @JensGustedt</p>\n"}, {"comments": [{"owner": {"reputation": 998, "user_id": 1602266, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/457d6abcf68c31e39d26fb08f99e2ca4?s=128&d=identicon&r=PG", "display_name": "Naitree", "link": "https://stackoverflow.com/users/1602266/naitree"}, "edited": false, "score": 0, "creation_date": 1421828237, "post_id": 28062294, "comment_id": 44505574, "body": "I actually still get warning using your typecast. I think what you mean is <code>(const int (*)[])</code>. Then the warning is gone."}], "tags": [], "owner": {"reputation": 3923, "user_id": 3640699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NxDM0.jpg?s=128&g=1", "display_name": "Karthikeyan.R.S", "link": "https://stackoverflow.com/users/3640699/karthikeyan-r-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1427586208, "last_edit_date": 1427586208, "creation_date": 1421827552, "answer_id": 28062294, "question_id": 28062095, "link": "https://stackoverflow.com/questions/28062095/pass-a-two-dimensional-array-to-a-function-of-constant-parameter/28062294#28062294", "title": "Pass a two dimensional array to a function of constant parameter", "body": "<p>You can type cast the array while calling the function. It will not automatically convert non-const into const.\nYou can use this.</p>\n\n<pre><code>Sum2D( (const int (*)[])array, ROWS );\n</code></pre>\n"}], "owner": {"reputation": 998, "user_id": 1602266, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/457d6abcf68c31e39d26fb08f99e2ca4?s=128&d=identicon&r=PG", "display_name": "Naitree", "link": "https://stackoverflow.com/users/1602266/naitree"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4128, "favorite_count": 4, "accepted_answer_id": 28062262, "answer_count": 2, "score": 5, "last_activity_date": 1427586208, "creation_date": 1421826798, "last_edit_date": 1421830583, "question_id": 28062095, "link": "https://stackoverflow.com/questions/28062095/pass-a-two-dimensional-array-to-a-function-of-constant-parameter", "title": "Pass a two dimensional array to a function of constant parameter", "body": "<p>I learned from <em>C Primer Plus</em> that if you want to protect an array from being accidentally modified by a function, you should add <code>const</code> modifier before the pointer declaration in the header of function definition.</p>\n\n<p>Following this sensible advice, in the following minimal example, I'm trying to pass a non-constant two-dimensional array <code>array</code> to the function <code>Sum2D</code>, one parameter of which is a <code>pointer-to-const-int[2]</code>.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define ROWS 2\n#define COLS 2\nint Sum2D(const int ar[][COLS], int rows); //use `const` to protect input array\nint main(void)\n{\n    int array[ROWS][COLS]={{1,2},{3,4}}; //the non-constant array\n\n    printf( \"%d\\n\", Sum2D(array,ROWS) );\n\n    return 0;\n}\n\nint Sum2D(const int ar[][COLS], int rows)\n{\n    int total=0;\n    int i,j;\n    for( i=0 ; i&lt;rows ; i++ )\n    {\n        for( j=0 ; j&lt;COLS ; j++ )\n        {\n            total+=ar[i][j];\n        }\n    }\n    return total;\n}\n</code></pre>\n\n<p>However, <code>gcc</code> cannot successfully compile this code without issuing the following warnings:</p>\n\n<pre><code>$gcc -ggdb3 -Wall -Wextra -o test test.c\n\ntest.c: In function \u2018main\u2019:\ntest.c:16:2: warning: passing argument 1 of \u2018Sum2D\u2019 from incompatible pointer type [enabled by default]\n  printf( \"%d\\n\", Sum2D(array,4) );\n  ^\ntest.c:4:5: note: expected \u2018const int (*)[4]\u2019 but argument is of type \u2018int (*)[4]\u2019\n int Sum2D(const int ar[][COLS], int rows);\n     ^\n</code></pre>\n\n<p>1) Why the warning?</p>\n\n<p>2) How can I eliminate the \"noise\"?(Apart from adding <code>const</code> to <code>array</code> declaration.)</p>\n\n<p>(If the <code>array</code> and function both use one-dimensional array, there is no warning.)</p>\n\n<blockquote>\n  <p>System information:</p>\n  \n  <p>Ubuntu 14.04LTS</p>\n  \n  <p>Compiler: gcc 4.8.2</p>\n</blockquote>\n"}, {"tags": ["c", "doxygen", "eclipse-cdt", "doxygen-wizard"], "answers": [{"tags": [], "owner": {"reputation": 2519, "user_id": 202037, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oktOo.png?s=128&g=1", "display_name": "Archie", "link": "https://stackoverflow.com/users/202037/archie"}, "is_accepted": false, "score": 1, "last_activity_date": 1553435474, "last_edit_date": 1553435474, "creation_date": 1421920801, "answer_id": 28085818, "question_id": 28061987, "link": "https://stackoverflow.com/questions/28061987/how-can-we-change-the-default-html-file-generated-by-doxygen/28085818#28085818", "title": "How can we change the default html file generated by doxygen?", "body": "<p>I don't think you can change this from configuration. Main page is always <code>index.html</code>. And you cannot really rename it afterwards because of all cross-references that point to the main page. </p>\n\n<p>But you can make doxygen output generated files to a specific folder using <a href=\"http://www.doxygen.nln/manual/config.html#cfg_html_output\" rel=\"nofollow noreferrer\"><code>HTML_OUTPUT</code></a> configuration option.</p>\n"}], "owner": {"reputation": 13, "user_id": 4435810, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c95c1b91fa948fc3cfbc387afcb1b7ae?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi", "link": "https://stackoverflow.com/users/4435810/ravi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 607, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1553435474, "creation_date": 1421826367, "last_edit_date": 1421906263, "question_id": 28061987, "link": "https://stackoverflow.com/questions/28061987/how-can-we-change-the-default-html-file-generated-by-doxygen", "title": "How can we change the default html file generated by doxygen?", "body": "<p>I am using doxygen and doxywizard for documentation C code.</p>\n\n<p>How to rename the index.html file through configuring doxygen or doxywizard.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1417, "user_id": 4386321, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh4.googleusercontent.com/-gvM9Pl76WIc/AAAAAAAAAAI/AAAAAAAAAFQ/xHjZvlZM9FU/photo.jpg?sz=128", "display_name": "maxpovver", "link": "https://stackoverflow.com/users/4386321/maxpovver"}, "edited": false, "score": 1, "creation_date": 1421824479, "post_id": 28061475, "comment_id": 44504105, "body": "this is weird. provide your code, please"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 1, "creation_date": 1421824826, "post_id": 28061475, "comment_id": 44504248, "body": "Show us the relevant parts of your code.(How you are reading and printing the contents of the file) and the content of the text file"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1421825440, "post_id": 28061475, "comment_id": 44504489, "body": "So the file actually contains an escaped version of the string and you want, for example, the newlines to be real new-lines?"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 1, "creation_date": 1421825960, "post_id": 28061475, "comment_id": 44504676, "body": "Post your code. What you need to do is read lines using <code>fgets</code>,print them using <code>printf</code>"}], "answers": [{"tags": [], "owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "is_accepted": true, "score": 1, "last_activity_date": 1421833383, "last_edit_date": 1495541569, "creation_date": 1421828567, "answer_id": 28062534, "question_id": 28061475, "link": "https://stackoverflow.com/questions/28061475/c-load-text-from-file-print-escape-characters/28062534#28062534", "title": "C load text from file, print escape characters", "body": "<p>There doesn't seem to be a standard function for this, but you can roll your own:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\n/*\n *      Converts simple C-style escape sequences. Treats single-letter\n *      escapes (\\t, \\n etc.) only. Does not treat \\0 and the octal and\n *      hexadecimal escapes (\\033, \\x, \\u).\n *\n *      Overwrites the string and returns the length of the unescaped\n *      string.\n */\nint unescape(char *str)\n{\n    static const char escape[256] = {\n        ['a'] = '\\a',        ['b'] = '\\b',        ['f'] = '\\f',\n        ['n'] = '\\n',        ['r'] = '\\r',        ['t'] = '\\t',\n        ['v'] = '\\v',        ['\\\\'] = '\\\\',       ['\\''] = '\\'',\n        ['\"'] = '\\\"',        ['?'] = '\\?',\n    };\n\n    char *p = str;      /* Pointer to original string */\n    char *q = str;      /* Pointer to new string; q &lt;= p */\n\n    while (*p) {\n        int c = *(unsigned char*) p++;\n\n        if (c == '\\\\') {\n            c = *(unsigned char*) p++;\n            if (c == '\\0') break;\n            if (escape[c]) c = escape[c];\n        }\n\n        *q++ = c;    \n    }\n    *q = '\\0';\n\n    return q - str;\n}\n\nint main()\n{\n    char str[] = \"\\\\\\\"Hello -&gt;\\\\t\\\\\\\\Man\\\\\\\"\\\\n\";\n\n    printf(\"'%s'\\n\", str);\n    unescape(str);\n    printf(\"'%s'\\n\", str);\n\n    return 0;\n}\n</code></pre>\n\n<p>This function unescapes the string in place. This is safe to do, because the unescaped string cannot be longer than the original string. (On the other hand, that might not be a good idea, because the same char buffer is used for the escaped and unescaped string and you have to remember which it holds.)</p>\n\n<p>This function doesn't convert the numerical sequences for octal and hex notation. There are <a href=\"http://www.opensource.apple.com/source/postfix/postfix-229/postfix/src/util/unescape.c\" rel=\"nofollow noreferrer\">more complete implementations</a> around, but they are usually part of some library and rely on other modules, usually for dynamic strings.</p>\n\n<p>There are similar <a href=\"https://stackoverflow.com/questions/7369344/how-to-unescape-strings-in-c-c\">functions for escaping</a> a string, of course.</p>\n"}], "owner": {"reputation": 25, "user_id": 4343957, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1354465858/picture?type=large", "display_name": "Liviu Valentin", "link": "https://stackoverflow.com/users/4343957/liviu-valentin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 887, "favorite_count": 0, "accepted_answer_id": 28062534, "answer_count": 1, "score": -2, "last_activity_date": 1421833383, "creation_date": 1421824264, "question_id": 28061475, "link": "https://stackoverflow.com/questions/28061475/c-load-text-from-file-print-escape-characters", "title": "C load text from file, print escape characters", "body": "<p>I'm loading a text file from disk to my C app. Everything works well, but the text contains multiple escape characters, like \\r\\n and after loading the text i want to keep count of those characters and display accordingly.</p>\n\n<p>At this moment if I'm using printf on the string, it shows me this:</p>\n\n<p>Hello\\nMan\\n</p>\n\n<p>Any quick way of doing this?</p>\n"}, {"tags": ["c++", "c", "bit-manipulation", "bit"], "comments": [{"owner": {"reputation": 1961, "user_id": 1874323, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7f6c299c60b5eab6f199347f6715bc05?s=128&d=identicon&r=PG", "display_name": "BlamKiwi", "link": "https://stackoverflow.com/users/1874323/blamkiwi"}, "edited": false, "score": 1, "creation_date": 1421825100, "post_id": 28061377, "comment_id": 44504366, "body": "One of my suggestions would be to not limit yourself to doing it all by bit operations. A solution that would be easy to see its correctness is to have a lookup table for bits strings of [0&#39;b1, 0&#39;b11, 0&#39;b111, ...] and then use this table to get masks of m that can be shifted by n."}, {"owner": {"reputation": 764, "user_id": 2899478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juuUm.jpg?s=128&g=1", "display_name": "o_weisman", "link": "https://stackoverflow.com/users/2899478/o-weisman"}, "edited": false, "score": 3, "creation_date": 1421825894, "post_id": 28061377, "comment_id": 44504651, "body": "Your example shows clearing after 5 bits from the right"}, {"owner": {"reputation": 4932, "user_id": 4358570, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/U40Df.jpg?s=128&g=1", "display_name": "Innocent Bystander", "link": "https://stackoverflow.com/users/4358570/innocent-bystander"}, "edited": false, "score": 0, "creation_date": 1421882736, "post_id": 28061377, "comment_id": 44536307, "body": "FWIW, <a href=\"http://www.cplusplus.com/reference/bitset/bitset/\" rel=\"nofollow noreferrer\">std::bitset</a> might be a &quot;better&quot; solution"}], "answers": [{"comments": [{"owner": {"reputation": 764, "user_id": 2899478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juuUm.jpg?s=128&g=1", "display_name": "o_weisman", "link": "https://stackoverflow.com/users/2899478/o-weisman"}, "edited": false, "score": 0, "creation_date": 1421826155, "post_id": 28061872, "comment_id": 44504760, "body": "If he&#39;s actually looking to do this from the left, it would have to be 16 - n I guess"}, {"owner": {"reputation": 17723, "user_id": 733077, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/db1bf62fae51d5bafb8f1db7fb677176?s=128&d=identicon&r=PG", "display_name": "luser droog", "link": "https://stackoverflow.com/users/733077/luser-droog"}, "reply_to_user": {"reputation": 764, "user_id": 2899478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juuUm.jpg?s=128&g=1", "display_name": "o_weisman", "link": "https://stackoverflow.com/users/2899478/o-weisman"}, "edited": false, "score": 0, "creation_date": 1421826277, "post_id": 28061872, "comment_id": 44504816, "body": "Yes. I suppose so. Then it&#39;s the same number of ops. If it&#39;s really from the right, then I count 5 in mine, 6 in OP."}, {"owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "edited": false, "score": 1, "creation_date": 1421836647, "post_id": 28061872, "comment_id": 44510231, "body": "Suggest using unsigned integers: <code>(1u&lt;&lt;m)-1 &lt;&lt; n</code>"}], "tags": [], "owner": {"reputation": 17723, "user_id": 733077, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/db1bf62fae51d5bafb8f1db7fb677176?s=128&d=identicon&r=PG", "display_name": "luser droog", "link": "https://stackoverflow.com/users/733077/luser-droog"}, "is_accepted": false, "score": 7, "last_activity_date": 1421860150, "last_edit_date": 1421860150, "creation_date": 1421825918, "answer_id": 28061872, "question_id": 28061377, "link": "https://stackoverflow.com/questions/28061377/mask-for-clearing-m-bits-after-n-lsbits/28061872#28061872", "title": "Mask for clearing m bits after n LSBits", "body": "<p>I'm not sure about \"better\", but I always seem to build masks the same way. </p>\n\n<pre><code>((1u&lt;&lt;m)-1)&lt;&lt;n\n</code></pre>\n\n<p>For m=3 n=5 this gives</p>\n\n<pre><code>000011100000\n</code></pre>\n\n<p>Then using this mask to clear those bits from another value,</p>\n\n<pre><code>x &amp; ~(((1u&lt;&lt;m)-1)&lt;&lt;n)\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 1728008, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1a92d4b60353135afcec8aff0eac989a?s=128&d=identicon&r=PG&f=1", "display_name": "Skanda", "link": "https://stackoverflow.com/users/1728008/skanda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 3, "answer_count": 1, "score": 4, "last_activity_date": 1421882591, "creation_date": 1421823822, "last_edit_date": 1421882591, "question_id": 28061377, "link": "https://stackoverflow.com/questions/28061377/mask-for-clearing-m-bits-after-n-lsbits", "title": "Mask for clearing m bits after n LSBits", "body": "<p>I was asked this question in an interview to clear m bits after n bits of a 16 bit integer.</p>\n\n<p>Lets say the number is 10010010010100101. Clear three bits after 5 bits from the LSBit.</p>\n\n<p>Before:    10011001<strong>110</strong>11001\nAfter :    10011001<strong>000</strong>11001</p>\n\n<p>My solution for the mask was <code>(~0 &lt;&lt; (m+n))+((1&lt;&lt;n)-1)</code></p>\n\n<p>Is there any solution better than this?</p>\n"}, {"tags": ["c", "compilation", "header", "include"], "comments": [{"owner": {"reputation": 6115, "user_id": 2339452, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FvFTP.jpg?s=128&g=1", "display_name": "Dayal rai", "link": "https://stackoverflow.com/users/2339452/dayal-rai"}, "edited": false, "score": 0, "creation_date": 1421822924, "post_id": 28061115, "comment_id": 44503402, "body": "Verify if you file name is same as included and it is in same directory where your *.c file is."}, {"owner": {"reputation": 4709, "user_id": 2001149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SqsJM.png?s=128&g=1", "display_name": "Santosh A", "link": "https://stackoverflow.com/users/2001149/santosh-a"}, "edited": false, "score": 0, "creation_date": 1421826240, "post_id": 28061115, "comment_id": 44504794, "body": "If the file was edited under Linux, then <code>retype the file name with quotes (&quot;&quot;) again in windows environment</code>"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1421830622, "post_id": 28061115, "comment_id": 44506676, "body": "Does this ancient Turbo-C version support &quot;long&quot; (&gt;8.3 characters) file names? Try renaming the file to &quot;Protocol.h&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 103, "user_id": 4449440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5860034107f022406b75e7d2af42612?s=128&d=identicon&r=PG&f=1", "display_name": "Kai", "link": "https://stackoverflow.com/users/4449440/kai"}, "is_accepted": false, "score": 0, "last_activity_date": 1421828734, "creation_date": 1421828734, "answer_id": 28062582, "question_id": 28061115, "link": "https://stackoverflow.com/questions/28061115/unable-to-open-an-include-file-protocols-h-using-c-compiler/28062582#28062582", "title": "Unable to Open an Include file &quot;Protocols.h&quot; using C Compiler", "body": "<p>If you really set the correct path in you compiler, you could try to hardcode the path like #include \"/path/name.h\". <br>\nIf this works, you have some issue with your compiler and maybe not set the path (the right way).<br>\nIf this does not work it seems, that the file is not existing or broken in some way. In this case: Get a new version of the headerfile and make sure, that it is in the right place. </p>\n"}], "owner": {"reputation": 1, "user_id": 4269254, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Oto1ESIZOx8/AAAAAAAAAAI/AAAAAAAAAHI/0OgfBF5ATiU/photo.jpg?sz=128", "display_name": "Chaitanya Chowdary", "link": "https://stackoverflow.com/users/4269254/chaitanya-chowdary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 399, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1421828734, "creation_date": 1421822750, "question_id": 28061115, "link": "https://stackoverflow.com/questions/28061115/unable-to-open-an-include-file-protocols-h-using-c-compiler", "title": "Unable to Open an Include file &quot;Protocols.h&quot; using C Compiler", "body": "<p>I have a c Program and it was running Perfectly, but now i want to run it in Windows. So i am trying to compile the code in the Windows 7 Operating System, using Turboc3.\nWhen i am compiling, i am getting an error \"Unable to open include file Protocols.h\"\nBut the Protocols.h file exists in the Directory. And all the directories are set perfectly in the C compiler.</p>\n\n<p>From .c file it will include one .h file, and from that .h file another .h file is included.</p>\n\n<p>But still i am facing the same issue, Can anyone help me out.</p>\n\n<p>The header i have is like below:</p>\n\n<pre><code>#include &lt;netinet/in.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;signal.h&gt;\n//#include &lt;wait.h&gt;\n#include &lt;sys/time.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;sys/types.h&gt;\n//#include &lt;ipc.h&gt;\n//#include &lt;shm.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n\n#define  socklen_t      int\n\n/* limit values */\n\n#define MAX_TAGS                    500\n#define MAX_OBJECTS                         500\n\n#include \"Protocols.h\"\n</code></pre>\n"}, {"tags": ["c", "linux", "mmap"], "comments": [{"owner": {"reputation": 1417, "user_id": 4386321, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh4.googleusercontent.com/-gvM9Pl76WIc/AAAAAAAAAAI/AAAAAAAAAFQ/xHjZvlZM9FU/photo.jpg?sz=128", "display_name": "maxpovver", "link": "https://stackoverflow.com/users/4386321/maxpovver"}, "edited": false, "score": 1, "creation_date": 1421822435, "post_id": 28061013, "comment_id": 44503206, "body": "are you sure that your system is not 64-bit?"}, {"owner": {"reputation": 1, "user_id": 4473360, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VtYGOtPl6b0/AAAAAAAAAAI/AAAAAAAAAV0/R9Tr_CYlHMU/photo.jpg?sz=128", "display_name": "carlo val gocela", "link": "https://stackoverflow.com/users/4473360/carlo-val-gocela"}, "reply_to_user": {"reputation": 1417, "user_id": 4386321, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh4.googleusercontent.com/-gvM9Pl76WIc/AAAAAAAAAAI/AAAAAAAAAFQ/xHjZvlZM9FU/photo.jpg?sz=128", "display_name": "maxpovver", "link": "https://stackoverflow.com/users/4386321/maxpovver"}, "edited": false, "score": 0, "creation_date": 1421825380, "post_id": 28061013, "comment_id": 44504469, "body": "@maxpovver   it is an 32bit. Linux pcm052 3.0.15-ts-armv7l armv7l GNU/Linux Processor       : ARMv7 Processor rev 1 (v7l)"}, {"owner": {"reputation": 2978, "user_id": 904148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cf9d0b9f5d61826525247bd5b79cdc0?s=128&d=identicon&r=PG", "display_name": "Timothy Baldwin", "link": "https://stackoverflow.com/users/904148/timothy-baldwin"}, "edited": false, "score": 0, "creation_date": 1558958893, "post_id": 28061013, "comment_id": 99259141, "body": "What hardware are you running on? What is at physical address 0x3F050000? What is the memory shared with?"}], "owner": {"reputation": 1, "user_id": 4473360, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VtYGOtPl6b0/AAAAAAAAAAI/AAAAAAAAAV0/R9Tr_CYlHMU/photo.jpg?sz=128", "display_name": "carlo val gocela", "link": "https://stackoverflow.com/users/4473360/carlo-val-gocela"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 234, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1421822331, "creation_date": 1421822331, "question_id": 28061013, "link": "https://stackoverflow.com/questions/28061013/reading-data-from-virtual-memory-after-mmap-returns-0", "title": "Reading data from virtual memory after mmap returns 0", "body": "<p>I'm reading a data from a shared memory allocated.\nI have successfully get data by accessing the virtual address given by mmap().\nUnfortunately, some data retrieved returned 0 and the rest of the data is correct</p>\n\n<pre><code>#define MEMORY_A (0x3F050000)\n#define MAP_SIZE 1024UL\n#define MAP_MASK (MAP_SIZE - 1)\n\n\nint main()\n{\n\n int32_t *mapped_baseA, *mapped_dev_baseA;\n off_t target_A=MEMORY_A; \n int   memfdA;\n int32_t fdA;\n\n\n    /* A */\n\n    memfdA = open(\"/dev/mem\", O_RDWR | O_SYNC);\nif (memfdA == -1) \n{\n         printf(\"Can't open /dev/mem.\\n\");\n         exit(0);\n}\n\nmapped_baseA = (int32_t *) mmap(0, SIZEBUFFER*sizeof(int), PROT_READ|PROT_WRITE, MAP_SHARED, memfdA, target_A &amp; ~ MAP_MASK_VECTOR);\n\nmapped_dev_baseA = (mapped_baseA + (target_A &amp; MAP_MASK));\n\n\nfor(i=0 ,nMemAdd=0; i &lt; SIZEBUFFER;i++)\n{\n     fdA=(int32_t*)mapped_dev_baseA[i];\n     printf(\"\\n\\nA: %ld \",fdA);\n}\n\n fclose(fp);\n  close (memfdA);\n\n munmap(mapped_baseA,MAP_SIZE);\n\n return 0;\n</code></pre>\n\n<p>}</p>\n\n<p><strong>Results</strong></p>\n\n<pre><code>A: -3769313     ncounter: 933\nA: -3746454     ncounter: 934\nA: -3723030     ncounter: 935\nA: 0            ncounter: 936\nA: 0            ncounter: 937\nA: 0            ncounter: 938\nA: 0            ncounter: 939\nA: 0            ncounter: 940\nA: 0            ncounter: 941\nA: 0            ncounter: 942\nA: 0            ncounter: 943\nA: -3487436     ncounter: 944\nA: -3458578     ncounter: 945\nA: -3429199     ncounter: 946\nA: -3399303     ncounter: 947\nA: -3368896     ncounter: 948\nA: -3337981     ncounter: 949\nA: -3306564     ncounter: 950\nA: -3274649     ncounter: 951\n</code></pre>\n\n<p>What might be the possible reason the data i get is 0?</p>\n"}, {"tags": ["c", "sha1", "bitwise-operators"], "comments": [{"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 0, "creation_date": 1421819260, "post_id": 28060408, "comment_id": 44502136, "body": "What is the <i>exact type</i> of <code>temp</code>?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 3, "creation_date": 1421819271, "post_id": 28060408, "comment_id": 44502140, "body": "On some machines, <code>int</code> (or <code>unsigned int</code>) could be a 64-bit type.  The mask is a no-op on machines where <code>int</code> is a 32-bit type, but critical on machines where it is a 64-bit type.  The compiler will know and will optimize the operation away when it does nothing useful."}], "answers": [{"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 2, "last_activity_date": 1421819736, "creation_date": 1421819736, "answer_id": 28060513, "question_id": 28060408, "link": "https://stackoverflow.com/questions/28060408/interesting-bitwise-operation/28060513#28060513", "title": "Interesting bitwise operation", "body": "<p>On some machines, <code>int</code> (and therefore <code>unsigned int</code> too) could be a 64-bit type. The mask is a no-op on machines where <code>int</code> is a 32-bit type, but critical on machines where it is a 64-bit type. The compiler will know and will optimize the operation away when it does nothing useful.</p>\n\n<p>Also, there used to be machines with <a href=\"http://en.wikipedia.org/wiki/36-bit\" rel=\"nofollow\">36-bit <code>int</code> types</a> and others with <a href=\"http://en.wikipedia.org/wiki/60-bit\" rel=\"nofollow\">60-bit <code>int</code> types</a>; it would matter on such machines too.</p>\n"}, {"tags": [], "owner": {"reputation": 30210, "user_id": 735446, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/9dfecf03d8106728f8bb324b201ebf1f?s=128&d=identicon&r=PG", "display_name": "Petr Abdulin", "link": "https://stackoverflow.com/users/735446/petr-abdulin"}, "is_accepted": false, "score": 2, "last_activity_date": 1421820075, "creation_date": 1421820075, "answer_id": 28060577, "question_id": 28060408, "link": "https://stackoverflow.com/questions/28060408/interesting-bitwise-operation/28060577#28060577", "title": "Interesting bitwise operation", "body": "<p>The <a href=\"https://tools.ietf.org/html/rfc3174\" rel=\"nofollow\">reference implementation</a> of SHA1, have the following note in comments:</p>\n\n<pre><code>/*\n *  sha1.c\n *\n *  Description:\n *      This file implements the Secure Hashing Algorithm 1 as\n *      defined in FIPS PUB 180-1 published April 17, 1995.\n *\n *      The SHA-1, produces a 160-bit message digest for a given\n *      data stream.  It should take about 2**n steps to find a\n *      message with the same digest as a given message and\n *      2**(n/2) to find any two messages with the same digest,\n *      when n is the digest size in bits.  Therefore, this\n *      algorithm can serve as a means of providing a\n *      \"fingerprint\" for a message.\n *\n *  Portability Issues:\n *      SHA-1 is defined in terms of 32-bit \"words\".  This code\n *      uses &lt;stdint.h&gt; (included via \"sha1.h\" to define 32 and 8\n *      bit unsigned integer types.  If your C compiler does not\n *      support 32 bit unsigned integers, this code is not\n *      appropriate.\n *\n *  Caveats:\n *      SHA-1 is designed to work with messages less than 2^64 bits\n *      long.  Although SHA-1 allows a message digest to be generated\n *      for messages of any number of bits less than 2^64, this\n *      implementation only works with messages with a length that is\n *      a multiple of the size of an 8-bit character.\n *\n */\n</code></pre>\n\n<p>The <code>Portability Issues</code> is the case for this operation in this implementation of SHA1, it allows it to function properly on machines with larger <code>int</code>s.</p>\n"}], "owner": {"reputation": 841, "user_id": 992530, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6527ad996a8cd5e0901f6c68a943bd4b?s=128&d=identicon&r=PG&f=1", "display_name": "DeathByTensors", "link": "https://stackoverflow.com/users/992530/deathbytensors"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 1, "accepted_answer_id": 28060513, "answer_count": 2, "score": 2, "last_activity_date": 1421820075, "creation_date": 1421819131, "last_edit_date": 1421819495, "question_id": 28060408, "link": "https://stackoverflow.com/questions/28060408/interesting-bitwise-operation", "title": "Interesting bitwise operation", "body": "<p>I came across some rather interesting code today while reviewing an implementation of SHA1 in C.</p>\n\n<pre><code>temp = SHA1CircularShift(5,A) + (B ^ C ^ D) + E + W[t] + K[1];\ntemp &amp;= 0xFFFFFFFF;\n</code></pre>\n\n<p>The part I find interesting is <code>temp &amp;= 0xFFFFFFFF;</code>. Note that <code>temp</code> is declared as an <b>unsigned integer</b> already. Won't this operation simply have no effect? The only thing I can think of is that the designer is trying to enforce the use of 32-bit integers, but wouldn't this be done at compile-time?<br/>\nI'm curious to know peoples thoughts.</p>\n"}, {"tags": ["c", "linux", "timer", "signals", "syslog"], "comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1421822796, "post_id": 28060399, "comment_id": 44503339, "body": "<code>printf()</code> is not async signal save. So do not call it from signal handlers ... and timer handlers?"}, {"owner": {"reputation": 194, "user_id": 1868884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4a4ddb2356ab30a0b5adbed4d7a26bb?s=128&d=identicon&r=PG", "display_name": "ravi bhuva", "link": "https://stackoverflow.com/users/1868884/ravi-bhuva"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1421823418, "post_id": 28060399, "comment_id": 44503624, "body": "Thanks i appreciate it. Even if i remove all printf from signal handler and timer handler it is getting blocked. So can you suggest me how to resolve hang issue or can you give me some point to debug it more."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 1, "creation_date": 1421832746, "post_id": 28060399, "comment_id": 44507862, "body": "It hangs because <code>exit_flag</code> is not <code>volatile</code>, allowing the compiler to make assumptions about its value without actually checking it. Also, <a href=\"http://www.man7.org/linux/man-pages/man3/sleep.3.html\" rel=\"nofollow noreferrer\"><code>sleep()</code></a> interacts badly with signals. You should use <a href=\"http://man7.org/linux/man-pages/man2/nanosleep.2.html\" rel=\"nofollow noreferrer\"><code>nanosleep()</code></a> instead; it will be interrupted by signal delivery, but it&#39;ll then return -1 with <code>errno == EINTR</code> and <code>*rem</code> updated to indicate the un-slept time."}, {"owner": {"reputation": 194, "user_id": 1868884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4a4ddb2356ab30a0b5adbed4d7a26bb?s=128&d=identicon&r=PG", "display_name": "ravi bhuva", "link": "https://stackoverflow.com/users/1868884/ravi-bhuva"}, "edited": false, "score": 0, "creation_date": 1421832956, "post_id": 28060399, "comment_id": 44507985, "body": "exit_flag is not volatile: When flag is defined in the same file then compiler is that much intelligent to detect flag is changeable. So hang issue is not due to exit_flag. Thanks for giving idea of nanosleep instead of sleep, i will definitely look for this option."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 1, "creation_date": 1421838923, "post_id": 28060399, "comment_id": 44511586, "body": "(I&#39;m not so sure about <code>exit_flag</code> as you are, as it depends on compiler, compiler version, and compiler options used. I&#39;ll accept your word, however.) <code>syslog()</code> is not async-signal safe either, and it&#39;s pretty complex function; it would be no surprise if it blocked (for a long time) in a signal handler. Look, this is very simple: If you use non-<a href=\"http://man7.org/linux/man-pages/man7/signal.7.html\" rel=\"nofollow noreferrer\">async-signal safe functions</a> in a signal handler, and your program craps out, <b>it is your own fault</b>. Just fix your code, and the hang/blocking will go away."}, {"owner": {"reputation": 194, "user_id": 1868884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4a4ddb2356ab30a0b5adbed4d7a26bb?s=128&d=identicon&r=PG", "display_name": "ravi bhuva", "link": "https://stackoverflow.com/users/1868884/ravi-bhuva"}, "edited": false, "score": 0, "creation_date": 1421839153, "post_id": 28060399, "comment_id": 44511726, "body": "You are absolutely right. But i want to operate syslog and timer handler together, So can you provide me some other direction to resolve it. Or i can&#39;t use it any other way?"}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1421950813, "post_id": 28060399, "comment_id": 44567695, "body": "What are you trying to accomplish? In general, you are better off using a separate thread to handle timeouts, and/or to log to syslog rather than trying to do it in a signal handler. If you absolutely have to log from a signal handler, use a pipe or a socketpair and use low-level I/O, <code>write()</code> or <code>send()</code>, to write/send from the signal handler. (To get that to syslog, you need another thread or process reading from the pipe and syslogging the messages.)"}], "answers": [{"tags": [], "owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "is_accepted": false, "score": 1, "last_activity_date": 1421952720, "creation_date": 1421952720, "answer_id": 28096520, "question_id": 28060399, "link": "https://stackoverflow.com/questions/28060399/timer-and-syslog-combination-will-lead-my-code-to-hang-situation/28096520#28096520", "title": "Timer and syslog combination will lead my code to hang situation", "body": "<p>As mentioned in the comments, you cannot use <code>syslog()</code> in a signal handler. It is not <a href=\"http://man7.org/linux/man-pages/man7/signal.7.html\" rel=\"nofollow\">async-signal safe</a>, and as a complicated function (opening and closing the connection to syslog as needed), it is no wonder if using it causes your program to fail in odd and varying ways.</p>\n\n<p>Instead, use <a href=\"http://man7.org/linux/man-pages/man2/write.2.html\" rel=\"nofollow\"><code>write()</code></a> and standard output and standard error streams. For example,</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string.h&gt;\n#include &lt;errno.h&gt;\n\nstatic void wr(int fd, const void *const ptr, const size_t len)\n{\n    const char       *p = (const char *)ptr;\n    const char *const q = (const char *)ptr + len;\n    ssize_t           n;\n\n    while (p &lt; q) {\n        n = write(fd, p, (size_t)(q - p));\n        if (n &gt; (ssize_t)0)\n            p += n;\n        else\n        if (n != (ssize_t)-1 || errno != EINTR)\n            return;\n    }\n}\n\nstatic void wrerr(const char *const string)\n{\n    if (string != NULL)\n        wr(STDERR_FILENO, string, strlen(string));\n}\n\nstatic void wrout(const char *const string)\n{\n    if (string != NULL)\n        wr(STDOUT_FILENO, string, strlen(string));\n}\n</code></pre>\n\n<p>Above, <code>wrout()</code> and <code>wrerr()</code> take only a single string (like <code>puts()</code>, except these do not append a newline automatically), and are not as useful as <code>printf()</code>, but they are async-signal safe, and safe to use from a signal handler.</p>\n\n<p>Remember that when using Bash, you can use <code>&gt;out</code> to redirect standard output to file <code>out</code>, and <code>2&gt;err</code> to redirect standard error to file <code>err</code>. Outputting to a terminal is surprisingly slow, so for any timing, do redirect to files (or better yet, don't output extra debugging information at all).</p>\n\n<p>If you do need to send some output from a signal handler to syslog, you need to use a pipe or a socket pair, and have a thread or a child process read from the other end of that, sending the data to syslog. Then you can just write to the pipe or socket pair (using <code>write()</code>) from the signal handler, using only async-signal safe functions. (Obviously, the thread or child process that reads and syslogs the data, does not need to use async-signal safe functions -- after all, it is not a signal handler.) </p>\n\n<hr>\n\n<p>Let's discuss the topic of timeouts in general.</p>\n\n<p>I recommend against using a normal signal for timeouts. If you need signals, say for interrupting a blocking syscall in a specific thread, use a realtime signal (<code>SIGRTMIN+0</code> to <code>SIGRTMAX-0</code>) instead.</p>\n\n<p>In practice, using a separate thread to handle a set of timeouts works out much better. Here is an example, using less than 400 lines of code, which allows you to use any number of concurrent timeouts, and provides both a volatile flag and a semaphore per timeout for easy use. It uses the <code>CLOCK_MONOTONIC</code> clock, which is not susceptible to jumps (UTC seconds, daylight savings time, etc.), but otherwise tries to keep the tick rate of the realtime clock (wall clock):</p>\n\n<pre><code>#define _POSIX_C_SOURCE 200809L\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;semaphore.h&gt;\n#include &lt;time.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;stdio.h&gt;\n\n/* Number of timeouts to test. */\n#ifndef TIMEOUT_TESTS\n#define TIMEOUT_TESTS 100000\n#endif\n\n/* Seconds per timeout. */\n#ifndef TIMEOUT_SECONDS\n#define TIMEOUT_SECONDS 0.000000001\n#endif\n\n/* Timeout thread worker stack size; uses very few local variables. */\n#define TIMEOUT_STACK_SIZE    65536\n\ntypedef struct timeout  timeout;\nstruct timeout {\n    struct timeout      *next;\n    struct timespec      abstime;   /* Using CLOCK_MONOTONIC clock */\n    sem_t                elapsed;   /* sem_post()ed when elapsed */\n    volatile int         pending;   /* Cleared to zero when expires */\n};\n\nstatic volatile int      timeouts_error = -1;\nstatic pthread_t         timeouts_thread;\nstatic pthread_mutex_t   timeout_lock;\nstatic pthread_cond_t    timeout_cond; /* Uses CLOCK_MONOTONIC clock */\nstatic timeout *volatile timeout_pending = NULL;\n\nstatic void *timeouts_worker(void *unused __attribute__((unused)))\n{\n    struct timespec now;\n    timeout *curr;\n    int err;\n\n    err = pthread_mutex_lock(&amp;timeout_lock);\n    if (err) {\n        timeouts_error = err;\n        pthread_cond_signal(&amp;timeout_cond);\n        return (void *)(long)err;\n    }\n\n    timeouts_error = 0;\n    pthread_cond_signal(&amp;timeout_cond);\n\n    while (!timeouts_error) {\n\n        /* If there are no pending timeouts,\n         * all we need to do is wait for a condition. */\n        if (timeout_pending == NULL) {\n            pthread_cond_wait(&amp;timeout_cond, &amp;timeout_lock);\n            continue;\n        }\n\n        /* CLOCK_MONOTONIC is used for the timeouts. */\n        if (clock_gettime(CLOCK_MONOTONIC, &amp;now) == -1) {\n            timeouts_error = errno;\n            pthread_mutex_unlock(&amp;timeout_lock);\n            return (void *)(long)timeouts_error;\n        }\n\n        /* Trigger and remove all timeouts that have elapsed thus far. */\n        curr = timeout_pending;\n        while (curr != NULL &amp;&amp;\n               (curr-&gt;abstime.tv_sec &lt; now.tv_sec ||\n                (curr-&gt;abstime.tv_sec == now.tv_sec &amp;&amp;\n                 curr-&gt;abstime.tv_nsec &lt;= now.tv_nsec))) {\n            timeout *const prev = curr;\n            curr = prev-&gt;next;\n            prev-&gt;next = NULL;\n\n            /* Mark 'prev' timeout elapsed. */\n            prev-&gt;pending = 0;\n            sem_post(&amp;(prev-&gt;elapsed));\n        }\n\n        /* No more timeouts? */\n        if (timeout_pending == NULL)\n            continue;\n\n        /* Wait for the next one to elapse.\n         * TODO: Adjust 'now' according to previous over/undershoots,\n         *       Say, by one tenth of previous wakeup error\n         *       (i.e. dynamically estimating the _timedwait latency).\n         *       This would result in much more accurate timeouts.\n        */\n        now = timeout_pending-&gt;abstime;\n        pthread_cond_timedwait(&amp;timeout_cond, &amp;timeout_lock, &amp;now);\n    }\n\n    return (void *)0L;\n}\n\nstatic int timeout_free(timeout *const old_timeout)\n{\n    int err;\n\n    if (old_timeout == NULL)\n        return 0;\n\n    err = pthread_mutex_lock(&amp;timeout_lock);\n    if (err)\n        return errno = err; /* We also leak memory here. */\n\n    /* Remove from timeout_pending chain. */\n    if (timeout_pending == old_timeout)\n        timeout_pending = old_timeout-&gt;next;\n    else {\n        timeout *temp = timeout_pending;\n        if (temp != NULL)\n            while (temp-&gt;next != NULL)\n                if (temp-&gt;next == old_timeout) {\n                    temp-&gt;next = old_timeout-&gt;next;\n                    break;\n                } else\n                    temp = temp-&gt;next;\n    }\n\n    /* Unlock mutex; we no longer need to access the chain. */\n    pthread_mutex_unlock(&amp;timeout_lock);\n\n    /* Poison and free the timeout structure. */\n    sem_destroy(&amp;(old_timeout-&gt;elapsed));\n    old_timeout-&gt;next = NULL;\n    old_timeout-&gt;abstime.tv_sec = 0;\n    old_timeout-&gt;abstime.tv_nsec = 0;\n    old_timeout-&gt;pending = 0;\n\n    free(old_timeout);\n\n    return 0;\n}\n\n\nstatic timeout *timeout_after(const double seconds)\n{\n    const long sec = (long)seconds;\n    const long nsec = (long)(1000000000.0 * (seconds - (double)sec));\n    struct timespec now;\n    timeout *new_timeout;\n    int err;\n\n    /* Negative time is not allowed. */\n    if (seconds &lt; 0.0) {\n        errno = EINVAL;\n        return NULL;\n    }\n\n    /* Get current monotonic time. */ \n    if (clock_gettime(CLOCK_MONOTONIC, &amp;now))\n        return NULL;\n\n    new_timeout = malloc(sizeof *new_timeout);\n    if (new_timeout == NULL) {\n        errno = ENOMEM;\n        return NULL;\n    }\n\n    if (sem_init(&amp;(new_timeout-&gt;elapsed), 0, 0) == -1) {\n        err = errno;\n        free(new_timeout);\n        errno = err;\n        return NULL;\n    }\n\n    new_timeout-&gt;next = NULL;\n    new_timeout-&gt;abstime.tv_sec = now.tv_sec + sec + (now.tv_nsec + nsec) / 1000000000L;\n    new_timeout-&gt;abstime.tv_nsec = (now.tv_nsec + nsec) % 1000000000L;\n    new_timeout-&gt;pending = 1;\n\n    /* Already elapsed? */\n    if (new_timeout-&gt;abstime.tv_sec &lt; now.tv_sec ||\n        (new_timeout-&gt;abstime.tv_sec == now.tv_sec &amp;&amp;\n         new_timeout-&gt;abstime.tv_nsec &lt;= now.tv_nsec)) {\n        new_timeout-&gt;next = NULL;\n        new_timeout-&gt;pending = 0;\n        sem_post(&amp;(new_timeout-&gt;elapsed));\n        return new_timeout;\n    }\n\n    /* Get timeout lock, to add to chain. */\n    err = pthread_mutex_lock(&amp;timeout_lock);\n    if (err) {\n        sem_destroy(&amp;(new_timeout-&gt;elapsed));\n        free(new_timeout);\n        errno = err;\n        return NULL;\n    }\n\n\n    if (timeout_pending == NULL)\n        timeout_pending = new_timeout;\n    else\n    if (timeout_pending-&gt;abstime.tv_sec &gt; new_timeout-&gt;abstime.tv_sec ||\n        (timeout_pending-&gt;abstime.tv_sec == new_timeout-&gt;abstime.tv_sec &amp;&amp;\n         timeout_pending-&gt;abstime.tv_nsec &gt;= new_timeout-&gt;abstime.tv_nsec)) {\n        new_timeout-&gt;next = timeout_pending;\n        timeout_pending = new_timeout;\n    } else {\n        timeout *temp = timeout_pending;\n\n        while (temp-&gt;next != NULL &amp;&amp;\n               (temp-&gt;next-&gt;abstime.tv_sec &gt; new_timeout-&gt;abstime.tv_sec ||\n                (temp-&gt;next-&gt;abstime.tv_sec == new_timeout-&gt;abstime.tv_sec &amp;&amp;\n                 temp-&gt;next-&gt;abstime.tv_nsec &gt;= new_timeout-&gt;abstime.tv_nsec)))\n            temp = temp-&gt;next;\n\n        new_timeout-&gt;next = temp-&gt;next;\n        temp-&gt;next = new_timeout;\n    }\n\n    /* Timeout chain manipulated; notify and unlock. */\n    pthread_cond_signal(&amp;timeout_cond);\n    pthread_mutex_unlock(&amp;timeout_lock);\n\n    errno = 0;\n    return new_timeout;\n}\n\nstatic int timeouts_end(void)\n{\n    if (timeouts_error == 0) {\n        int err;\n        void *errptr;\n\n        pthread_mutex_lock(&amp;timeout_lock);\n        timeouts_error = -1;\n        pthread_cond_signal(&amp;timeout_cond);\n        pthread_mutex_unlock(&amp;timeout_lock);\n\n        err = pthread_join(timeouts_thread, &amp;errptr);\n        if (err == 0)\n            err = (long)errptr;\n\n        return errno = err;\n\n    } else\n    if (timeouts_error != -1) {\n        int err;\n        void *errptr;\n\n        err = pthread_join(timeouts_thread, &amp;errptr);\n        if (err == 0)\n            err = (long)errptr;\n        else\n            err = timeouts_error;\n\n        return errno = err;\n\n    } else\n        return errno = ENOENT;\n}\n\nstatic int timeouts_init(void)\n{\n    pthread_mutexattr_t lock_attrs;\n    pthread_condattr_t cond_attrs;\n    pthread_attr_t attrs;\n    void *errptr;\n    int err;\n\n    if (timeouts_error != -1)\n        return errno = EEXIST;\n\n    /* Initialize timeout_lock as an adaptive mutex. */\n    err = pthread_mutexattr_init(&amp;lock_attrs);\n    if (err)\n        return errno = err;\n\n    err = pthread_mutexattr_settype(&amp;lock_attrs, PTHREAD_MUTEX_ADAPTIVE_NP);\n    if (err)\n        return errno = err;\n\n    err = pthread_mutex_init(&amp;timeout_lock, &amp;lock_attrs);\n    if (err)\n        return errno = err;\n\n    err = pthread_mutexattr_destroy(&amp;lock_attrs);\n    if (err)\n        return errno = err;\n\n    /* Initialize timeout_cond as a process-private monotonic clock condition variable. */\n    err = pthread_condattr_init(&amp;cond_attrs);\n    if (err)\n        return errno = err;\n\n    err = pthread_condattr_setpshared(&amp;cond_attrs, PTHREAD_PROCESS_PRIVATE);\n    if (err)\n        return errno = err;\n\n    err = pthread_condattr_setclock(&amp;cond_attrs, CLOCK_MONOTONIC);\n    if (err)\n        return errno = err;\n\n    err = pthread_cond_init(&amp;timeout_cond, &amp;cond_attrs);\n    if (err)\n        return errno = err;\n\n    err = pthread_condattr_destroy(&amp;cond_attrs);\n    if (err)\n        return errno = err;\n\n    /* Initialize the thread attributes to a 64k stack. */\n    err = pthread_attr_init(&amp;attrs);\n    if (err)\n        return errno = err;\n\n    err = pthread_attr_setstacksize(&amp;attrs, TIMEOUT_STACK_SIZE);\n    if (err)\n        return errno = err;\n\n    /* Grab the timeout lock; we'll wait on the cond later. */\n    err = pthread_mutex_lock(&amp;timeout_lock);\n    if (err)\n        return errno = err;\n\n    /* Start the timeout worker thread. */\n    err = pthread_create(&amp;timeouts_thread, &amp;attrs, timeouts_worker, NULL);\n    if (err)\n        return errno = err;\n\n    pthread_attr_destroy(&amp;attrs);\n\n    /* Wait for the worker to be ready. */\n    pthread_cond_wait(&amp;timeout_cond, &amp;timeout_lock);\n\n    /* Failed? */\n    if (timeouts_error != 0) {\n        timeouts_error = -1;\n        pthread_mutex_unlock(&amp;timeout_lock);\n        err = pthread_join(timeouts_thread, &amp;errptr);\n        if (err == 0)\n            err = (long)errptr;\n        return errno = err;\n    }\n\n    /* Unlock. */\n    pthread_mutex_unlock(&amp;timeout_lock);\n\n    /* Success. */\n    return 0;\n}\n\nint main(void)\n{\n    long i;\n    timeout *t;\n\n    if (timeouts_init()) {\n        fprintf(stderr, \"Cannot initialize timeouts: %s.\\n\", strerror(errno));\n        return EXIT_FAILURE;\n    }\n\n    fprintf(stderr, \"Testing:\\n\");\n    fflush(stderr);\n\n    for (i = 1L; i &lt;= TIMEOUT_TESTS; i++) {\n\n        t = timeout_after(0.000000001);\n        if (t == NULL) {\n            fprintf(stderr, \"Test %ld of %ld failed: Cannot obtain a timeout: %s.\\n\", i, (long)TIMEOUT_TESTS, strerror(errno));\n            timeouts_end();\n            return EXIT_FAILURE;\n        }\n\n        printf(\"Timeout %ld of %ld: \", i, (long)TIMEOUT_TESTS);\n        fflush(stdout);\n\n        /* Wait for timeout to elapse. */\n        sem_wait(&amp;(t-&gt;elapsed));\n\n        printf(\"Elapsed.\\n\");\n        fflush(stdout);\n\n        timeout_free(t);\n    }\n\n    if (timeouts_end()) {\n        fprintf(stderr, \"Error in disarming timeouts: %s.\\n\", strerror(errno));\n        return EXIT_FAILURE;\n    }\n\n    fprintf(stderr, \"No errors.\\n\");\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>Since we have a dedicated timeout worker thread, the above uses <code>pthread_cond_timedwait()</code> to wait for the next timeout to occur (with the condition variable set to use the <code>CLOCK_MONOTONIC</code> clock source), or a signal (by another thread that a new timeout was inserted).</p>\n\n<p>To interrupt blocking syscalls, add a <code>pthread_t thread</code> to the <code>timeout</code> structure, have the <code>timeout_after()</code> set it to <code>pthread_self()</code>. Install a realtime signal (<code>SIGRTMIN+0</code> for example) handler (with an empty body -- it's the delivery that counts, not what the handler does). Finally, add <code>pthread_kill(curr-&gt;thread, SIGRTMIN+0)</code> to <code>timeouts_worker()</code> to raise the signal in the target thread.</p>\n\n<p>The above implementation uses a simple sorted linked list, <code>timeout_pending</code>, to keep the currently pending timeouts. This yields <em>O(N)</em> behaviour in adding, removing, and triggering the timeouts, which is quite suboptimal if you have hundreds or thousands of concurrent timeouts. Replace the list handling with a binary min-heap for much better performance with lots of concurrent timeouts.</p>\n\n<p>Also, it is not necessary to <em>always</em> signal the timeout worker that a new timeout was added. Since the adder holds the mutex, it would be sufficient to only signal when the new timeout was added as the next to elapse.</p>\n\n<p>The code compiles, but I've not checked the logic thoroughly, so there might be some bugs lurking about. If you find any, let me know, and I shall try to fix them. (I'm quite certain the algorithm and approach itself works, though.)</p>\n\n<p>I do not consider the above code copyrightable, as it is so straightforward, but in case someone does, I consider it to be in Public Domain, and in those jurisdictions that do not have the legal concept, licensed under Creative Commons Zero license. In short: Do what you wish with it, but there are no guarantees, and you cannot blame me for any breakage. </p>\n\n<p>Questions? Comments? Bug fixes?</p>\n"}], "owner": {"reputation": 194, "user_id": 1868884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4a4ddb2356ab30a0b5adbed4d7a26bb?s=128&d=identicon&r=PG", "display_name": "ravi bhuva", "link": "https://stackoverflow.com/users/1868884/ravi-bhuva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 435, "favorite_count": 2, "answer_count": 1, "score": 2, "last_activity_date": 1421952720, "creation_date": 1421819089, "last_edit_date": 1421838979, "question_id": 28060399, "link": "https://stackoverflow.com/questions/28060399/timer-and-syslog-combination-will-lead-my-code-to-hang-situation", "title": "Timer and syslog combination will lead my code to hang situation", "body": "<p>I try to debug issue which is due to the use of timer and syslog function in my program. Here i attach sample program code and logs of terminal and syslog to debug it appropriately.</p>\n\n<p>I don't understand why this program get hangs after a while.\nSo here i have 2 issues,\n1. Sleep is getting break when timer expires as it generates SIGPROF\n2. syslog is get hanged after a while or some time in first trial</p>\n\n<p><strong>Code:</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;syslog.h&gt;\n\n#define get_curr_date_time(date_time) \\\n{ \\\n   time_t t; \\\n   time(&amp;t); \\\n   char *strtime = ctime(&amp;t); \\\n   strncpy(date_time, strtime, strlen(strtime) - 1); \\\n}\n\n#define DEBUG_INFO(p,x,arg...) \\\n{\\\n   printf(\"%s:%d,1\\n\", __func__, __LINE__);\\\n   char current_time[32] = {0}; \\\n   printf(\"%s:%d,2\\n\", __func__, __LINE__);\\\n   get_curr_date_time(current_time); \\\n   printf(\"%s:%d,3\\n\", __func__, __LINE__);\\\n   syslog(LOG_INFO,\"[%s] : \" p \" : \"#x\"\\n\", current_time, ##arg);\\\n   printf(\"%s:%d,4\\n\", __func__, __LINE__);\\\n}\n\nchar exit_flag = 0;\n\ntypedef struct _test_ctx_\n{\n   char     timer_init;\n   timer_t  timerid;\n\n}test_ctx;\n\nvoid Timer_Handler(int sig, siginfo_t *si, void *uc)\n{\n   printf(\"Timer handler is start\\n\");\n   DEBUG_INFO(\"timer_hang\", \"Timer handler is running\\n\");\n   printf(\"Timer handler is stop\\n\");\n}\n\nint InitTimer(test_ctx *tst_ctx)\n{\n   int                  status   = 0;\n   struct sigaction     sa;\n   struct sigevent      sig;\n\n   memset(&amp;sig, 0x00, sizeof(struct sigevent));\n   memset(&amp;sa, 0x00, sizeof(struct sigaction));\n\n   do\n   {\n      sa.sa_flags = SA_SIGINFO;\n      sa.sa_sigaction = Timer_Handler;\n      sigemptyset(&amp;sa.sa_mask);\n      if (0 != (status = sigaction(SIGPROF, &amp;sa, NULL)))\n      {\n         printf(\"Fail to register SIGPROF signal for timer, ret: %d\\n\", status);\n         break;\n      }\n\n      sig.sigev_notify = SIGEV_SIGNAL;\n      sig.sigev_signo = SIGPROF;\n      sig.sigev_value.sival_ptr = &amp;tst_ctx-&gt;timerid;\n      if (0 != (status = timer_create(CLOCK_REALTIME, &amp;sig, &amp;(tst_ctx-&gt;timerid))))\n      {\n         printf(\"Failed to create timer, ret: %d\\n\", status);\n         break;\n      }\n\n      //Timer inited sucessfully\n      tst_ctx-&gt;timer_init = 1;\n\n   }while(0);\n\n   return status;\n}\n\nvoid DeInitTimer(test_ctx *tst_ctx)\n{\n   int   status   = 0;\n\n   if (0 != tst_ctx-&gt;timer_init)\n   {\n      //Delete timer\n      if (0 != (status = timer_delete(tst_ctx-&gt;timerid)))\n      {\n         printf(\"Fail to delete timer, ret: %d\\n\", status);\n      }\n      tst_ctx-&gt;timer_init = 0;\n   }\n}\n\nint SetTimer(test_ctx *tst_ctx)\n{\n   int   status   = 0;\n   struct itimerspec in;\n   memset(&amp;in, 0x00, sizeof(struct itimerspec));\n\n   do\n   {\n      in.it_value.tv_sec = 0;\n      in.it_value.tv_nsec = 1;\n      in.it_interval.tv_sec = 0;\n      in.it_interval.tv_nsec = 0;\n\n      if (0 != (status = timer_settime(tst_ctx-&gt;timerid, 0, &amp;in, NULL)))\n      {\n         printf(\"Fail to set timer, ret: %d\\n\", status);\n         break;\n      }\n\n   }while(0);\n\n   return status;\n}\n\nvoid terminate_app(int sig)\n{\n   exit_flag = 1;\n   printf(\"signal %d received exiting application\\n\", sig);\n   DEBUG_INFO(\"timer_hang\", \"signal %d received exiting application\\n\", sig);\n}\n\nint main(int argc, char *argv[])\n{\n   int            status   = 0;\n   test_ctx       tst_ctx;\n   memset(&amp;tst_ctx, 0x00, sizeof(tst_ctx));\n\n   do\n   {\n      //Register signal handler\n      signal(SIGTERM, terminate_app);\n      signal(SIGINT,  terminate_app);\n\n      //Init timer\n      status = InitTimer(&amp;tst_ctx);\n      if (0 != status)\n      {\n         break;\n      }\n\n      while(0 == exit_flag)\n      {\n         printf(\"Setting timer\\n\");\n         DEBUG_INFO(\"timer_hang\", \"Setting timer\");\n\n         //Set Timer\n         SetTimer(&amp;tst_ctx);\n\n         printf(\"Hello!!!\\n\");\n         DEBUG_INFO(\"timer_hang\", \"Hello!!!\");\n         printf(\"Say!!!\\n\");\n\n         sleep(5);\n      }\n\n   }while(0);\n\n   //De init timer\n   DeInitTimer(&amp;tst_ctx);\n\n   return status;\n}\n</code></pre>\n\n<p><strong>Teminal Logs:</strong></p>\n\n<pre><code>root@AHMCPU0085:/home/ravi/work/test_app/timer_hang# ./hang_issue\nSetting timer\nmain:148,1\nmain:148,2\nmain:148,3\nmain:148,4\nHello!!!\nmain:154,1\nmain:154,2\nmain:154,3\nmain:154,4\nSay!!!\nTimer handler is start\nTimer_Handler:39,1\nTimer_Handler:39,2\nTimer_Handler:39,3\nTimer_Handler:39,4\nTimer handler is stop\nSetting timer\nmain:148,1\nmain:148,2\nmain:148,3\nmain:148,4\nHello!!!\nmain:154,1\nmain:154,2\nmain:154,3\nmain:154,4\nSay!!!\nTimer handler is start\nTimer_Handler:39,1\nTimer_Handler:39,2\nTimer_Handler:39,3\nTimer_Handler:39,4\nTimer handler is stop\nSetting timer\nmain:148,1\nmain:148,2\nmain:148,3\nmain:148,4\nHello!!!\nmain:154,1\nmain:154,2\nmain:154,3\nmain:154,4\nSay!!!\nTimer handler is start\nTimer_Handler:39,1\nTimer_Handler:39,2\nTimer_Handler:39,3\nTimer_Handler:39,4\nTimer handler is stop\nSetting timer\nmain:148,1\nmain:148,2\nmain:148,3\nmain:148,4\nHello!!!\nmain:154,1\nmain:154,2\nmain:154,3\nmain:154,4\nSay!!!\nTimer handler is start\nTimer_Handler:39,1\nTimer_Handler:39,2\nTimer_Handler:39,3\nTimer_Handler:39,4\nTimer handler is stop\nSetting timer\nmain:148,1\nmain:148,2\nmain:148,3\nmain:148,4\nHello!!!\nmain:154,1\nmain:154,2\nmain:154,3\nmain:154,4\nSay!!!\nTimer handler is start\nTimer_Handler:39,1\nTimer_Handler:39,2\nTimer_Handler:39,3\nTimer_Handler:39,4\nTimer handler is stop\nSetting timer\nmain:148,1\nmain:148,2\nmain:148,3\nmain:148,4\nHello!!!\nmain:154,1\nmain:154,2\nmain:154,3\nmain:154,4\nSay!!!\nTimer handler is start\nTimer_Handler:39,1\nTimer_Handler:39,2\nTimer_Handler:39,3\nTimer_Handler:39,4\nTimer handler is stop\nSetting timer\nmain:148,1\nmain:148,2\nmain:148,3\nmain:148,4\nHello!!!\nmain:154,1\nmain:154,2\nmain:154,3\nmain:154,4\nSay!!!\nTimer handler is start\nTimer_Handler:39,1\nTimer_Handler:39,2\nTimer_Handler:39,3\nTimer_Handler:39,4\nTimer handler is stop\nSetting timer\nmain:148,1\nmain:148,2\nmain:148,3\nmain:148,4\nHello!!!\nmain:154,1\nmain:154,2\nmain:154,3\nmain:154,4\nSay!!!\nTimer handler is start\nTimer_Handler:39,1\nTimer_Handler:39,2\nTimer_Handler:39,3\nTimer_Handler:39,4\nTimer handler is stop\nSetting timer\nmain:148,1\nmain:148,2\nmain:148,3\nmain:148,4\nHello!!!\nmain:154,1\nmain:154,2\nmain:154,3\nmain:154,4\nSay!!!\nTimer handler is start\nTimer_Handler:39,1\nTimer_Handler:39,2\nTimer_Handler:39,3\nTimer_Handler:39,4\nTimer handler is stop\nSetting timer\nmain:148,1\nmain:148,2\nmain:148,3\nmain:148,4\nTimer handler is start\nTimer_Handler:39,1\nTimer_Handler:39,2\nTimer_Handler:39,3\nTimer_Handler:39,4\nTimer handler is stop\nHello!!!\nmain:154,1\nmain:154,2\nmain:154,3\nmain:154,4\nSay!!!\n\n\n\nSetting timer\nmain:148,1\nmain:148,2\nmain:148,3\nmain:148,4\nHello!!!\nmain:154,1\nmain:154,2\nmain:154,3\nmain:154,4\nSay!!!\nTimer handler is start\nTimer_Handler:39,1\nTimer_Handler:39,2\nTimer_Handler:39,3\nTimer_Handler:39,4\nTimer handler is stop\nSetting timer\nmain:148,1\nmain:148,2\nmain:148,3\nmain:148,4\nHello!!!\nmain:154,1\nmain:154,2\nmain:154,3\nmain:154,4\nSay!!!\nTimer handler is start\nTimer_Handler:39,1\nTimer_Handler:39,2\nTimer_Handler:39,3\nTimer_Handler:39,4\nTimer handler is stop\nSetting timer\nmain:148,1\nmain:148,2\nmain:148,3\nmain:148,4\nHello!!!\nmain:154,1\nmain:154,2\nmain:154,3\nmain:154,3\nTimer handler is start\nTimer_Handler:39,1\nTimer_Handler:39,2\nTimer_Handler:39,3\nTimer_Handler:39,4\nTimer handler is stop\nmain:154,4\nSay!!!\n\n\n\n\nSetting timer\nmain:148,1\nmain:148,2\nmain:148,3\nmain:148,4\nHello!!!\nmain:154,1\nmain:154,2\nmain:154,3\nmain:154,4\nSay!!!\nTimer handler is start\nTimer_Handler:39,1\nTimer_Handler:39,2\nTimer_Handler:39,3\nTimer_Handler:39,4\nTimer handler is stop\nSetting timer\nmain:148,1\nmain:148,2\nmain:148,3\nmain:148,4\nHello!!!\nmain:154,1\nmain:154,2\nmain:154,3\nmain:154,4\nSay!!!\nTimer handler is start\nTimer_Handler:39,1\nTimer_Handler:39,2\nTimer_Handler:39,3\nTimer_Handler:39,4\nTimer handler is stop\nSetting timer\nmain:148,1\nmain:148,2\nmain:148,3\nmain:148,4\nHello!!!\nmain:154,1\nmain:154,2\nmain:154,3\nmain:154,4\nSay!!!\nTimer handler is start\nTimer_Handler:39,1\nTimer_Handler:39,2\nTimer_Handler:39,3\nTimer_Handler:39,4\nTimer handler is stop\nSetting timer\nmain:148,1\nmain:148,2\nmain:148,3\nmain:148,4\nHello!!!\nmain:154,1\nmain:154,2\nmain:154,3\nmain:154,4\nSay!!!\nTimer handler is start\nTimer_Handler:39,1\nTimer_Handler:39,2\nTimer_Handler:39,3\nTimer_Handler:39,4\nTimer handler is stop\nSetting timer\nmain:148,1\nmain:148,2\nmain:148,3\nmain:148,4\nHello!!!\nmain:154,1\nmain:154,2\nmain:154,3\nmain:154,4\nSay!!!\nTimer handler is start\nTimer_Handler:39,1\nTimer_Handler:39,2\nTimer_Handler:39,3\nTimer_Handler:39,4\nTimer handler is stop\nSetting timer\nmain:148,1\nmain:148,2\nmain:148,3\nmain:148,4\nHello!!!\nmain:154,1\nmain:154,2\nmain:154,3\nTimer handler is start\nTimer_Handler:39,1\nTimer_Handler:39,2\nTimer_Handler:39,3\n\n\n\n^Csignal 2 received exiting application\nterminate_app:123,1\nterminate_app:123,2\nterminate_app:123,3\n\n^Z\n[1]+  Stopped                 ./hang_issue\nroot@AHMCPU0085:/home/ravi/work/test_app/timer_hang#\nroot@AHMCPU0085:/home/ravi/work/test_app/timer_hang# killall -s 9 hang_issue\n[1]+  Killed                  ./hang_issue\nroot@AHMCPU0085:/home/ravi/work/test_app/timer_hang#\nroot@AHMCPU0085:/home/ravi/work/test_app/timer_hang#\n</code></pre>\n\n<p><strong>Syslog messages:</strong></p>\n\n<pre><code>root@AHMCPU0085:/home/ravi/work/test_app/timer_hang# tail -f /var/log/messages\n...\n\nJan 21 10:52:15 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:15 2015] : timer_hang : \"Setting timer\"\nJan 21 10:52:15 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:15 2015] : timer_hang : \"Hello!!!\"\nJan 21 10:52:15 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:15 2015] : timer_hang : \"Timer handler is running\\n\"\nJan 21 10:52:15 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:15 2015] : timer_hang : \"Setting timer\"\nJan 21 10:52:15 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:15 2015] : timer_hang : \"Hello!!!\"\nJan 21 10:52:15 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:15 2015] : timer_hang : \"Timer handler is running\\n\"\nJan 21 10:52:15 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:15 2015] : timer_hang : \"Setting timer\"\nJan 21 10:52:15 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:15 2015] : timer_hang : \"Hello!!!\"\nJan 21 10:52:15 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:15 2015] : timer_hang : \"Timer handler is running\\n\"\nJan 21 10:52:15 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:15 2015] : timer_hang : \"Setting timer\"\nJan 21 10:52:15 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:15 2015] : timer_hang : \"Hello!!!\"\nJan 21 10:52:15 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:15 2015] : timer_hang : \"Timer handler is running\\n\"\nJan 21 10:52:15 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:15 2015] : timer_hang : \"Setting timer\"\nJan 21 10:52:15 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:15 2015] : timer_hang : \"Hello!!!\"\nJan 21 10:52:15 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:15 2015] : timer_hang : \"Timer handler is running\\n\"\nJan 21 10:52:15 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:15 2015] : timer_hang : \"Setting timer\"\nJan 21 10:52:15 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:15 2015] : timer_hang : \"Hello!!!\"\nJan 21 10:52:15 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:15 2015] : timer_hang : \"Timer handler is running\\n\"\nJan 21 10:52:15 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:15 2015] : timer_hang : \"Setting timer\"\nJan 21 10:52:15 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:15 2015] : timer_hang : \"Hello!!!\"\nJan 21 10:52:15 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:15 2015] : timer_hang : \"Timer handler is running\\n\"\nJan 21 10:52:15 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:15 2015] : timer_hang : \"Setting timer\"\nJan 21 10:52:15 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:15 2015] : timer_hang : \"Hello!!!\"\nJan 21 10:52:15 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:15 2015] : timer_hang : \"Timer handler is running\\n\"\nJan 21 10:52:15 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:15 2015] : timer_hang : \"Setting timer\"\nJan 21 10:52:15 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:15 2015] : timer_hang : \"Hello!!!\"\nJan 21 10:52:15 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:15 2015] : timer_hang : \"Timer handler is running\\n\"\nJan 21 10:52:15 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:15 2015] : timer_hang : \"Setting timer\"\nJan 21 10:52:15 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:15 2015] : timer_hang : \"Timer handler is running\\n\"\nJan 21 10:52:15 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:15 2015] : timer_hang : \"Hello!!!\"\n\n\n\nJan 21 10:52:20 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:20 2015] : timer_hang : \"Setting timer\"\nJan 21 10:52:20 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:20 2015] : timer_hang : \"Hello!!!\"\nJan 21 10:52:20 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:20 2015] : timer_hang : \"Timer handler is running\\n\"\nJan 21 10:52:20 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:20 2015] : timer_hang : \"Setting timer\"\nJan 21 10:52:20 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:20 2015] : timer_hang : \"Hello!!!\"\nJan 21 10:52:20 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:20 2015] : timer_hang : \"Timer handler is running\\n\"\nJan 21 10:52:20 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:20 2015] : timer_hang : \"Setting timer\"\nJan 21 10:52:20 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:20 2015] : timer_hang : \"Timer handler is running\\n\"\nJan 21 10:52:20 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:20 2015] : timer_hang : \"Hello!!!\"\n\n\n\nJan 21 10:52:25 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:25 2015] : timer_hang : \"Setting timer\"\nJan 21 10:52:25 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:25 2015] : timer_hang : \"Hello!!!\"\nJan 21 10:52:25 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:25 2015] : timer_hang : \"Timer handler is running\\n\"\nJan 21 10:52:25 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:25 2015] : timer_hang : \"Setting timer\"\nJan 21 10:52:25 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:25 2015] : timer_hang : \"Hello!!!\"\nJan 21 10:52:25 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:25 2015] : timer_hang : \"Timer handler is running\\n\"\nJan 21 10:52:25 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:25 2015] : timer_hang : \"Setting timer\"\nJan 21 10:52:25 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:25 2015] : timer_hang : \"Hello!!!\"\nJan 21 10:52:25 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:25 2015] : timer_hang : \"Timer handler is running\\n\"\nJan 21 10:52:25 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:25 2015] : timer_hang : \"Setting timer\"\nJan 21 10:52:25 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:25 2015] : timer_hang : \"Hello!!!\"\nJan 21 10:52:25 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:25 2015] : timer_hang : \"Timer handler is running\\n\"\nJan 21 10:52:25 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:25 2015] : timer_hang : \"Setting timer\"\nJan 21 10:52:25 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:25 2015] : timer_hang : \"Hello!!!\"\nJan 21 10:52:25 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:25 2015] : timer_hang : \"Timer handler is running\\n\"\nJan 21 10:52:25 AHMCPU0085 hang_issue: [Wed Jan 21 10:52:25 2015] : timer_hang : \"Setting timer\"\n\n\n^C\nroot@AHMCPU0085:/home/ravi/work/test_app/timer_hang#\n</code></pre>\n\n<p>You will run this test app at your linux machine by doing below steps:</p>\n\n<pre><code># gcc -o hang_issue timer_hang.c -Wall -lrt\n# ./hang_issue\n... &lt;You will get logs&gt; ...\n</code></pre>\n\n<p>Any help will be greatly appreciated.</p>\n\n<p>Regards,\nRavi</p>\n"}, {"tags": ["c", "for-loop", "while-loop", "correctness", "loop-invariant"], "comments": [{"owner": {"reputation": 15, "user_id": 4167347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78d3d97469272d55c4b326461b0243b3?s=128&d=identicon&r=PG&f=1", "display_name": "Stupid", "link": "https://stackoverflow.com/users/4167347/stupid"}, "reply_to_user": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "edited": false, "score": 0, "creation_date": 1421820249, "post_id": 28060241, "comment_id": 44502460, "body": "yeah but i thought loop invariant is an expression of when should the loop runs and what operation it does during its run time? which I have to proof by relating to its pre, mid and post condition. If I advise loop invariant i=1, just like you said and rewrote my code, I didn&#39;t describe what the loop does exactly and has no way of proofing the pre mid and post condition @Gopi"}], "answers": [{"tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 0, "last_activity_date": 1421822724, "last_edit_date": 1421822724, "creation_date": 1421822194, "answer_id": 28060979, "question_id": 28060241, "link": "https://stackoverflow.com/questions/28060241/loop-invariant-with-no-return-value-is-it-possible-and-program-correctness/28060979#28060979", "title": "Loop invariant with no return value, is it possible? And program correctness", "body": "<blockquote>\n  <p>A loop invariant is a formal statement about the relationship between\n  variables in your program which holds true just before the loop is\n  ever run (establishing the invariant) and is true again at the bottom\n  of the loop, each time through the loop (maintaining the invariant)</p>\n</blockquote>\n\n<p>Presuming this is what you wanted. The code shown by you looks good to add a node to the linked list so regarding correctness it should be fine.</p>\n\n<pre><code>char str[100];\nint cnt = 0;\nint n;\nfgets(str,100,stdin);\nif(strlen(str) &lt; 99)\nstr[strlen(str) -1] = '\\0';\n\nn = strlen(str);\n/* cnt &lt;= n */\nwhile(str[i] != '.')\n{\n   /* cnt &lt;= n */\n   // Do your stuff\n   cnt++;\n   /* cnt &lt;= n */\n}\n/* cnt &lt;= n */\n</code></pre>\n\n<p>The loop invariant will be </p>\n\n<pre><code>cnt &lt;= n\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4709, "user_id": 2001149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SqsJM.png?s=128&g=1", "display_name": "Santosh A", "link": "https://stackoverflow.com/users/2001149/santosh-a"}, "is_accepted": false, "score": 0, "last_activity_date": 1421822252, "last_edit_date": 1495542035, "creation_date": 1421822252, "answer_id": 28060993, "question_id": 28060241, "link": "https://stackoverflow.com/questions/28060241/loop-invariant-with-no-return-value-is-it-possible-and-program-correctness/28060993#28060993", "title": "Loop invariant with no return value, is it possible? And program correctness", "body": "<blockquote>\n  <p>A loop invariant is a condition that is necessarily true immediately before and immediately after each iteration of a loop</p>\n</blockquote>\n\n<pre><code>int main(void)\n{\n    char c = ' ';\n    Node* start = NULL; \n    Node* temp = NULL; \n\n    while(c!='.'){\n        /* temp = NULL before each iteration*/\n\n        c=getchar();\n        temp=(Node*)calloc(1, sizeof(Node));\n        temp-&gt;x = c; \n        temp-&gt;next = start; \n        start = temp;\n\n        temp = NULL;\n        /* temp = NULL after each iteration*/\n    }\n</code></pre>\n\n<p><strong><code>So in this case temp is NULL before and after each iteration of the loop</code></strong>. You can use this as a proof.</p>\n\n<p>For more details refer <a href=\"http://en.wikipedia.org/wiki/Loop_invariant\" rel=\"nofollow noreferrer\">http://en.wikipedia.org/wiki/Loop_invariant</a>\nand <a href=\"https://stackoverflow.com/questions/3221577/what-is-a-loop-invariant\">What is a loop invariant?</a></p>\n"}], "owner": {"reputation": 15, "user_id": 4167347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78d3d97469272d55c4b326461b0243b3?s=128&d=identicon&r=PG&f=1", "display_name": "Stupid", "link": "https://stackoverflow.com/users/4167347/stupid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 133, "favorite_count": 1, "answer_count": 2, "score": -2, "last_activity_date": 1421822724, "creation_date": 1421818183, "last_edit_date": 1421818666, "question_id": 28060241, "link": "https://stackoverflow.com/questions/28060241/loop-invariant-with-no-return-value-is-it-possible-and-program-correctness", "title": "Loop invariant with no return value, is it possible? And program correctness", "body": "<p>So I'm writing this program that store user input on linked list and reverse it, but I'm a bit lost.  Is it possible to come up a loop invariants for types of loop where it doesn't return any value? For example a loop that is located inside main.</p>\n\n<p>Here's an example of a loop I use to get user input inside main and store it in a linked list, of course there are more on the code, but I only showed what's relevant.</p>\n\n<pre><code>typedef struct node {\nchar x; // data\nstruct node* next; // link to next node\n} Node;\n\nint main(void){\nchar c = ' ';\nNode* start = NULL; \nNode* temp; \nwhile(c!='.'){\n    c=getchar();\n    temp=(Node*)calloc(1, sizeof(Node));\n    temp-&gt;x = c; \n    temp-&gt;next = start; \n    start = temp; \n}\n</code></pre>\n\n<p>Is it possible to come up with a loop invariant for this? Also what does it mean by program correctness and how do I proof it in my case?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c", "stack-frame"], "comments": [{"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 2, "creation_date": 1421817009, "post_id": 28060029, "comment_id": 44501356, "body": "It&#39;s undefined behavior.  It could be anything or crash."}, {"owner": {"reputation": 948, "user_id": 2562673, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a151baad58c6e98b4c2ada0c80341536?s=128&d=identicon&r=PG", "display_name": "Bill Randerson", "link": "https://stackoverflow.com/users/2562673/bill-randerson"}, "reply_to_user": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1421817099, "post_id": 28060029, "comment_id": 44501389, "body": "Is this value read from StackFrame? What&#39;s the potential value is this from? Some local variable or return address?"}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1421817246, "post_id": 28060029, "comment_id": 44501447, "body": "This may help you understand: <a href=\"http://stackoverflow.com/questions/12376461/what-actually-happens-when-a-function-with-the-warning-control-reaches-end-o\" title=\"what actually happens when a function with the warning control reaches end o\">stackoverflow.com/questions/12376461/&hellip;</a>  The value is generally whatever happens to be in the register that is used to return a value of that type."}, {"owner": {"reputation": 948, "user_id": 2562673, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a151baad58c6e98b4c2ada0c80341536?s=128&d=identicon&r=PG", "display_name": "Bill Randerson", "link": "https://stackoverflow.com/users/2562673/bill-randerson"}, "reply_to_user": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1421829562, "post_id": 28060029, "comment_id": 44506164, "body": "So basically the caller simply tries to read some register as return value, and caller doesn&#39;t have any knowledge as if the callee really returns something or not. Right?"}], "answers": [{"tags": [], "owner": {"reputation": 6115, "user_id": 2339452, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FvFTP.jpg?s=128&g=1", "display_name": "Dayal rai", "link": "https://stackoverflow.com/users/2339452/dayal-rai"}, "is_accepted": true, "score": 5, "last_activity_date": 1421817218, "creation_date": 1421817218, "answer_id": 28060085, "question_id": 28060029, "link": "https://stackoverflow.com/questions/28060029/whats-the-return-value-from-a-function-call-if-that-function-doesnt-really-pro/28060085#28060085", "title": "What&#39;s the return value from a function call if that function doesn&#39;t really provide one", "body": "<p>If no return statement appears in a function definition, control automatically returns to the calling function after the last statement of the called function is executed. In this case, the return value of the called function is <a href=\"http://en.wikipedia.org/wiki/Undefined_behavior\">undefined</a>. If a return value is not required, declare the function to have void return type; otherwise, the default return type is int.</p>\n\n<p>As mentioned above its undefined so finding root cause behind some random value as return will be useless.</p>\n"}], "owner": {"reputation": 948, "user_id": 2562673, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a151baad58c6e98b4c2ada0c80341536?s=128&d=identicon&r=PG", "display_name": "Bill Randerson", "link": "https://stackoverflow.com/users/2562673/bill-randerson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 943, "favorite_count": 1, "accepted_answer_id": 28060085, "answer_count": 1, "score": 0, "last_activity_date": 1447177299, "creation_date": 1421816912, "last_edit_date": 1447177299, "question_id": 28060029, "link": "https://stackoverflow.com/questions/28060029/whats-the-return-value-from-a-function-call-if-that-function-doesnt-really-pro", "title": "What&#39;s the return value from a function call if that function doesn&#39;t really provide one", "body": "<p>Let's say we have following code:</p>\n\n<pre><code>int func(char str[], int len) {\n    // Don't return anything here.\n}\n\nint main() {\n    char str[] = \"Hello\";\n    int result = func(str, strlen(str));\n    printf(\"%d\\n\", result);\n}\n</code></pre>\n\n<p>It will print some string value -1679929632 on my computer. And it changes from time to time when I execute.</p>\n\n<p>Can anyone explain why this happen?</p>\n"}, {"tags": ["c", "linux", "sendto"], "answers": [{"tags": [], "owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "is_accepted": true, "score": 2, "last_activity_date": 1421816204, "last_edit_date": 1495541569, "creation_date": 1421816204, "answer_id": 28059895, "question_id": 28059867, "link": "https://stackoverflow.com/questions/28059867/sendto-is-not-giving-error-on-sending/28059895#28059895", "title": "sendto is not giving error on sending", "body": "<p>It's UDP (<code>SOCK_DGRAM</code>), so you may never find out.  If you need reliability guarantees, use TCP instead.  If you're satisfied with a partial solution of just knowing when the receiving side is completely missing/unavailable, see here: <a href=\"https://stackoverflow.com/questions/24117719/icmp-destination-unreachable-packet-on-udp-connected-socket\">ICMP &quot;destination unreachable&quot; packet on udp connected socket</a></p>\n\n<p>The general idea is that you can receive ICMP \"destination unreachable\" errors if you <code>connect()</code> your UDP socket and then receive data on it (you will want to use <code>select()</code> or <code>epoll()</code> for this).  In some scenarios you will find out that your messages are not making it to the other side...but in other scenarios you may not, because hey, it's UDP.</p>\n"}], "owner": {"reputation": 3, "user_id": 4476661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51a4b72291f2626b75620a57a43db621?s=128&d=identicon&r=PG&f=1", "display_name": "Achint", "link": "https://stackoverflow.com/users/4476661/achint"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 868, "favorite_count": 0, "accepted_answer_id": 28059895, "answer_count": 1, "score": 0, "last_activity_date": 1421816204, "creation_date": 1421816072, "question_id": 28059867, "link": "https://stackoverflow.com/questions/28059867/sendto-is-not-giving-error-on-sending", "title": "sendto is not giving error on sending", "body": "<p>Hi I have following code:</p>\n\n<pre><code>if ((fd = socket(PF_INET, SOCK_DGRAM, 0)) &lt; 0)\n {\n   perror(\"socket(UDP): \");\n   return 0;\n }\n\n family = AF_INET;\n if((remote_server_ent = gethostbyname2(hptr, family)) == NULL )\n {\n   perror(\"gethostbyname2\");\n   return 0;\n }\n\n if (family == AF_INET)\n {  \n   sin = (struct sockaddr_in *) addr;\n   sin-&gt;sin_family = AF_INET;\n   sin-&gt;sin_port = htons(server_port);;\n   bcopy( (char *)remote_server_ent-&gt;h_addr, (char *)&amp;(sin-&gt;sin_addr), remote_server_ent-&gt;h_length );\n   return (sizeof(struct sockaddr_in));\n }\n\n  if (sendto(fd, msg_data_ptr, sizeof(Msg_data_hdr), 0, (struct sockaddr *)&amp;sin, sizeof(struct sockaddr)) != sizeof(Msg_data_hdr))\n  {\n    fprintf(stderr, \"Error in sending data to the server \\n\");\n  }\n</code></pre>\n\n<p>My APP is listing on port 7000 IP 127.0.0.1.\n  Now when i stop my application still sendto send the data, it does not give me error. I am always getting the written bytes equal the size of data which i am writting. How will i know if sending is failed or not???</p>\n"}, {"tags": ["c", "perl"], "comments": [{"owner": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "edited": false, "score": 3, "creation_date": 1421817432, "post_id": 28059717, "comment_id": 44501526, "body": "Run <code>perldoc -f unpack</code> for info about the unpack function, and it points you to <code>perldoc -f pack</code> for explanations about the different formats.  Also, note that &quot;FF&quot; is not the hex value 0xFF if that&#39;s what you&#39;re expecting."}, {"owner": {"reputation": 2509, "user_id": 1695900, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/NnNuy.jpg?s=128&g=1", "display_name": "matthewpalmer", "link": "https://stackoverflow.com/users/1695900/matthewpalmer"}, "reply_to_user": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "edited": false, "score": 1, "creation_date": 1421817676, "post_id": 28059717, "comment_id": 44501619, "body": "Ah, reading up on <code>pack</code> was what I needed. Cheers!"}], "answers": [{"comments": [{"owner": {"reputation": 2509, "user_id": 1695900, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/NnNuy.jpg?s=128&g=1", "display_name": "matthewpalmer", "link": "https://stackoverflow.com/users/1695900/matthewpalmer"}, "edited": false, "score": 0, "creation_date": 1421819833, "post_id": 28060480, "comment_id": 44502312, "body": "We posted our answers at the same time :). Thanks for the C example\u2014that will be really helpful. I\u2019ll mark yours as the accepted answer since it more directly answers the question."}, {"owner": {"reputation": 4116, "user_id": 4402825, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ESJ4SrCVfE/AAAAAAAAAAI/AAAAAAAAFO8/yBWcRYAN94s/photo.jpg?sz=128", "display_name": "Ben Grimm", "link": "https://stackoverflow.com/users/4402825/ben-grimm"}, "edited": false, "score": 0, "creation_date": 1421943580, "post_id": 28060480, "comment_id": 44563439, "body": "I agree and probably should have removed it in the last edit, but I left it because the answer had been accepted with that code."}], "tags": [], "owner": {"reputation": 4116, "user_id": 4402825, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ESJ4SrCVfE/AAAAAAAAAAI/AAAAAAAAFO8/yBWcRYAN94s/photo.jpg?sz=128", "display_name": "Ben Grimm", "link": "https://stackoverflow.com/users/4402825/ben-grimm"}, "is_accepted": true, "score": 3, "last_activity_date": 1421944065, "last_edit_date": 1421944065, "creation_date": 1421819572, "answer_id": 28060480, "question_id": 28059717, "link": "https://stackoverflow.com/questions/28059717/perl-unpack-s-equivalent-in-c/28060480#28060480", "title": "Perl unpack &quot;S*&quot; equivalent in C", "body": "<p>Your code in C would look (roughly) like this: </p>\n\n<pre><code>const char *data = \"FA\";\nunsigned short s;\nmemcpy( &amp;s, data, strlen(data) );\nprintf(\"%s = %d\\n\", data, s);\n</code></pre>\n\n<p>This only handles your case with two characters, while unpack('S*',...) will return a list of shorts corresponding to its input.</p>\n\n<p>Why? One of the primary motivations for pack and unpack was to make it easier interchange binary data with C structures.</p>\n\n<p><a href=\"http://perldoc.perl.org/perlpacktut.html\" rel=\"nofollow\">perlpacktut</a> is a good place to start.</p>\n"}, {"comments": [{"owner": {"reputation": 4116, "user_id": 4402825, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ESJ4SrCVfE/AAAAAAAAAAI/AAAAAAAAFO8/yBWcRYAN94s/photo.jpg?sz=128", "display_name": "Ben Grimm", "link": "https://stackoverflow.com/users/4402825/ben-grimm"}, "edited": false, "score": 0, "creation_date": 1421820541, "post_id": 28060508, "comment_id": 44502554, "body": "Byte order is important -- &quot;S&quot; is an unsigned short in the <i>system&#39;s</i> byte order. If you need big or little endian you&#39;ll use &quot;n&quot; or &quot;v&quot; respectively."}], "tags": [], "owner": {"reputation": 2509, "user_id": 1695900, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/NnNuy.jpg?s=128&g=1", "display_name": "matthewpalmer", "link": "https://stackoverflow.com/users/1695900/matthewpalmer"}, "is_accepted": false, "score": 1, "last_activity_date": 1421819723, "creation_date": 1421819723, "answer_id": 28060508, "question_id": 28059717, "link": "https://stackoverflow.com/questions/28059717/perl-unpack-s-equivalent-in-c/28060508#28060508", "title": "Perl unpack &quot;S*&quot; equivalent in C", "body": "<p>I\u2019m answering my own question, so I might have some things wrong, but I'll leave this here for anyone coming in the future.</p>\n\n<p>First, let's change my example to</p>\n\n<pre><code>$data = \"FA\";\nprint \"$data - \", unpack(\"S*\", $data), \"\\n\";\n# &gt; FA - 16710\n</code></pre>\n\n<p>since having \u201cFF\u201d wasn\u2019t particularly helpful.</p>\n\n<p>The question is: how did we get from \u201cFA\u201d to 16710?</p>\n\n<p>First, the character \u2018F\u2019 is converted to its ASCII value\u201470. In binary, this is <code>0100 0110</code> (note that I padded a leading zero so it\u2019s clear that it\u2019s a whole byte).</p>\n\n<p>Then, we need the ASCII value of \u2018A\u2019\u201465. In binary, <code>0100 0001</code>.</p>\n\n<p>So we have <code>F</code> corresponding to <code>0100 0110</code> and <code>A</code> corresponding to <code>0100 0001</code>.</p>\n\n<p>Then we just glue these two binary values together, <em>except</em> we put the <code>A</code> first:</p>\n\n<p><code>0100 0001 0100 0110</code></p>\n\n<p>And converting <code>0100 0001 0100 0110</code> to decimal gives <code>16,710</code>.</p>\n\n<p><strong>Note</strong>: I <em>think</em> the order in which the bytes are glued together might be different on different computers, so while the principle here should apply everywhere, the numbers might be different.</p>\n"}, {"comments": [{"owner": {"reputation": 7958, "user_id": 1069726, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2cbbae354bb4f5f320b93ab3ad4b0fa1?s=128&d=identicon&r=PG", "display_name": "LeoNerd", "link": "https://stackoverflow.com/users/1069726/leonerd"}, "edited": false, "score": 0, "creation_date": 1421943112, "post_id": 28072098, "comment_id": 44563126, "body": "The bitshifting parts of this answer in the middle are the only safe way to do it. Best not to do any of the silly casting parts like the top or bottom bits."}, {"owner": {"reputation": 7958, "user_id": 1069726, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2cbbae354bb4f5f320b93ab3ad4b0fa1?s=128&d=identicon&r=PG", "display_name": "LeoNerd", "link": "https://stackoverflow.com/users/1069726/leonerd"}, "edited": false, "score": 0, "creation_date": 1422006759, "post_id": 28072098, "comment_id": 44588593, "body": "The <code>memcpy</code> itself will be fine, but now you&#39;ve got some random bit-pattern of bytes in memory where the compiler is expecting a valid <code>uint16_t</code>. How do you know the bitpattern will be valid as that type? There&#39;s no danger of that when you let the compiler construct the <code>uint16_t</code> by numerical bitshift operations, because it knows it will be valid then"}, {"owner": {"reputation": 7958, "user_id": 1069726, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2cbbae354bb4f5f320b93ab3ad4b0fa1?s=128&d=identicon&r=PG", "display_name": "LeoNerd", "link": "https://stackoverflow.com/users/1069726/leonerd"}, "edited": false, "score": 0, "creation_date": 1422032827, "post_id": 28072098, "comment_id": 44604144, "body": "@ikagami - could be all sorts. C doesn&#39;t require that all possible bit-patterns of bytes are valid integer representations. They just happen to be so on, say, Linux x86_64 gcc, but that&#39;s a platform-specific guarantee."}, {"owner": {"reputation": 7958, "user_id": 1069726, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2cbbae354bb4f5f320b93ab3ad4b0fa1?s=128&d=identicon&r=PG", "display_name": "LeoNerd", "link": "https://stackoverflow.com/users/1069726/leonerd"}, "edited": false, "score": 0, "creation_date": 1422381149, "post_id": 28072098, "comment_id": 44722766, "body": "On platforms that Perl supports, perhaps it is true. But C <i>itself</i> can support some very very strange places, and these places may not validly hold that you can just copy bits around and make it work."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 7958, "user_id": 1069726, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2cbbae354bb4f5f320b93ab3ad4b0fa1?s=128&d=identicon&r=PG", "display_name": "LeoNerd", "link": "https://stackoverflow.com/users/1069726/leonerd"}, "edited": false, "score": 0, "creation_date": 1422381884, "post_id": 28072098, "comment_id": 44723174, "body": "@LeoNerd, <code>unpack &#39;S&#39;</code> uses <i>native</i> representation of a <code>uint16_t</code>. As such, you&#39;re actually arguing that <code>memcpy</code> is the only correct solution."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 7958, "user_id": 1069726, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2cbbae354bb4f5f320b93ab3ad4b0fa1?s=128&d=identicon&r=PG", "display_name": "LeoNerd", "link": "https://stackoverflow.com/users/1069726/leonerd"}, "edited": false, "score": 0, "creation_date": 1422381921, "post_id": 28072098, "comment_id": 44723195, "body": "@LeoNerd, I doubt your claims about the existence of a system that uses something other than one&#39;s complement or two&#39;s complement. This is your fourth chance to back up your claims of the existence of something else."}], "tags": [], "owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1421858315, "last_edit_date": 1421858315, "creation_date": 1421857597, "answer_id": 28072098, "question_id": 28059717, "link": "https://stackoverflow.com/questions/28059717/perl-unpack-s-equivalent-in-c/28072098#28072098", "title": "Perl unpack &quot;S*&quot; equivalent in C", "body": "<p><code>unpack 'S'</code> casts two bytes into a <code>uint16_t</code>.</p>\n\n<pre><code>#include &lt;stdint.h&gt;\nconst char *data = \"\\x46\\x41\";\nuint16_t n;\nmemcpy(&amp;n, data, sizeof(n));  // n = 0x4146 or 0x4641\n</code></pre>\n\n<p>Don't forget to check the number of bytes in <code>data</code> before doing this!</p>\n\n<hr>\n\n<p>Notice that it can give two different results based on the system.</p>\n\n<p>On a little-endian system (e.g. x86, x64), <code>unpack 'S'</code> is also equivalent to</p>\n\n<pre><code>uint16_t n = (data[1] &lt;&lt; 8) | data[0];  // 0x4146\n</code></pre>\n\n<p>On a big-endian system, <code>unpack 'S'</code> is also equivalent to</p>\n\n<pre><code>uint16_t n = (data[0] &lt;&lt; 8) | data[1];  // 0x4641\n</code></pre>\n\n<hr>\n\n<p>By the way, you might be tempted to do the following, but it's not portable due to memory alignment issues:</p>\n\n<pre><code>uint16_t n = *((const uint16_t *)data);\n</code></pre>\n"}], "owner": {"reputation": 2509, "user_id": 1695900, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/NnNuy.jpg?s=128&g=1", "display_name": "matthewpalmer", "link": "https://stackoverflow.com/users/1695900/matthewpalmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 436, "favorite_count": 0, "accepted_answer_id": 28060480, "answer_count": 3, "score": 4, "last_activity_date": 1421944065, "creation_date": 1421815193, "question_id": 28059717, "link": "https://stackoverflow.com/questions/28059717/perl-unpack-s-equivalent-in-c", "title": "Perl unpack &quot;S*&quot; equivalent in C", "body": "<p>I'm having a little trouble understanding Perl's unpack in some code I'm reading, specifically with the <code>S*</code> template.</p>\n\n<pre><code>$data = \"FF\";\nprint \"$data - \", unpack(\"S*\", $data), \"\\n\";\n# &gt; FF - 17990\n</code></pre>\n\n<ol>\n<li>What is the equivalent of this in C?</li>\n<li>Why?</li>\n</ol>\n\n<p>Thanks very much for your help</p>\n"}, {"tags": ["c", "tree", "b-tree"], "answers": [{"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 2, "last_activity_date": 1421815542, "creation_date": 1421815542, "answer_id": 28059777, "question_id": 28059643, "link": "https://stackoverflow.com/questions/28059643/is-there-is-any-limit-for-order-in-b-tree-and-btree/28059777#28059777", "title": "Is there is any limit for order in B-tree and B+tree?", "body": "<p>You can design a system with any order you choose from 1 upwards.  If you make the order too big, it becomes difficult to find the key in the node, and the tree will be just 1 or 2 levels deep.</p>\n\n<p>For example, if the order is 1,000,000, then you'd need getting on for a trillion records before you split any nodes to the third level in the tree, and you'd probably never get to the fourth level.  And you'd have to search through a million keys at each level to find where to go.  Even with a binary search, that's up to 20 probes.</p>\n\n<p>If you choose a smaller order, then your searches are smaller.  For example, if the order is 32, you have at most 5 searches per level with a binary search to find the key and where to go next.  Against this, each time you move down a level, you have to read a new page from disk (if it is a disk-backed B-tree).  If it's in-memory, there's very little cost to that.</p>\n\n<p>Often, you design the B-tree with a fixed page size, and tune the order based on the size of the keys and the size of the pointers.  Big keys give you a smaller order; small keys give you a bigger order.</p>\n"}], "owner": {"reputation": 1203, "user_id": 3775099, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DRvde.jpg?s=128&g=1", "display_name": "Bhuvanesh", "link": "https://stackoverflow.com/users/3775099/bhuvanesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 28059777, "answer_count": 1, "score": -1, "last_activity_date": 1421815542, "creation_date": 1421814632, "question_id": 28059643, "link": "https://stackoverflow.com/questions/28059643/is-there-is-any-limit-for-order-in-b-tree-and-btree", "title": "Is there is any limit for order in B-tree and B+tree?", "body": "<p>In a <code>B tree</code> and <code>B+tree</code> , If we specify the order as <code>5</code> then we can store the <code>4 keys</code> in a single node and <code>5 pointers</code> for that node.</p>\n\n<p>It has any limit for setting the order in the above trees (or) its limit is infinite ?</p>\n"}, {"tags": ["c", "kernighan-and-ritchie"], "comments": [{"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 2, "creation_date": 1421841414, "post_id": 28066548, "comment_id": 44513048, "body": "<a href=\"http://stackoverflow.com/q/605845\">Don&#39;t cast the result of malloc (and friends)</a>. Also, while it&#39;s nice you check for allocation failure, shouldn&#39;t you <code>abort()</code> or something, instead of just writing to <code>stderr</code>?"}, {"owner": {"reputation": 6383, "user_id": 4371276, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/02ce728cefdf7fcbcff17ee06ad463db?s=128&d=identicon&r=PG&f=1", "display_name": "dmg", "link": "https://stackoverflow.com/users/4371276/dmg"}, "edited": false, "score": 0, "creation_date": 1421842360, "post_id": 28066548, "comment_id": 44513595, "body": "<code>getline</code> expects a pointer to a buffer, not only a pointer. Check it out <a href=\"http://crasseux.com/books/ctutorial/getline.html\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "edited": false, "score": 0, "creation_date": 1422028899, "post_id": 28066548, "comment_id": 44601508, "body": "The only error that I can see is that the second argument to <code>getline()</code> should be <code>size_t *</code> instead of <code>int *</code>. Can you give an example of the long string that you used to cause the error? I wasn&#39;t able to trigger an error with either valgrind or manual inspection."}, {"owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "edited": false, "score": 0, "creation_date": 1422029243, "post_id": 28066548, "comment_id": 44601764, "body": "For example, I had no issues with this long and heavily tabbed test: <a href=\"https://gist.github.com/sharth/d58c7998c3113232ed34\" rel=\"nofollow noreferrer\">gist.github.com/sharth/d58c7998c3113232ed34</a>"}, {"owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "reply_to_user": {"reputation": 6383, "user_id": 4371276, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/02ce728cefdf7fcbcff17ee06ad463db?s=128&d=identicon&r=PG&f=1", "display_name": "dmg", "link": "https://stackoverflow.com/users/4371276/dmg"}, "edited": false, "score": 0, "creation_date": 1422029337, "post_id": 28066548, "comment_id": 44601829, "body": "@dmg: You are allowed to pass a null pointer to <code>getline()</code>, which is what happens here. Quoting the <a href=\"http://man7.org/linux/man-pages/man3/getline.3.html\" rel=\"nofollow noreferrer\">man page</a>: <i>If <code>*lineptr</code> is set to <code>NULL</code> and <code>*n</code> is set <code>0</code> before the call, then <code>getline()</code> will allocate a buffer for storing the line.</i>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1440501509, "post_id": 28066548, "comment_id": 52289273, "body": "@Deduplicator He is reading K&amp;R. The crappy book is teaching out that incorrect practice, among many other blatantly incorrect or bad things."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 4785106, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/3bacab94e5e44659766bd0a207974eae?s=128&d=identicon&r=PG", "display_name": "knr_fan", "link": "https://stackoverflow.com/users/4785106/knr-fan"}, "is_accepted": false, "score": 1, "last_activity_date": 1440500820, "last_edit_date": 1440500820, "creation_date": 1428969348, "answer_id": 29616951, "question_id": 28066548, "link": "https://stackoverflow.com/questions/28066548/the-c-programming-language-kr-ex1-20-i-encounter-some-trouble/29616951#29616951", "title": "The C Programming Language (K&amp;R) ex1-20 . I encounter some trouble", "body": "<p>I solved problem 1_20 by reading each input line into a doubly linked list.  Each node in the list represents one character of the line in sequence.</p>\n\n<p>After creating the linked list, I delete white space from the end of the list, i.e. from the end of the line.</p>\n\n<p>Then I walk the linked list, scanning for tabs, keeping a column count as I go.</p>\n\n<p>When I encounter a tab, I mark its column number and calculate how many spaces I need until the next tabstop.  The formula is:</p>\n\n<pre><code>tabstop = ((col + (m-1)) / m) * m;\n</code></pre>\n\n<p>where:</p>\n\n<ul>\n<li><code>tabstop</code> is the next tabstop</li>\n<li><code>m</code> is the distance between tabstops</li>\n<li><code>col</code> is the column where the tab occurs</li>\n</ul>\n\n<p>I replace the tab with a space and insert new nodes of single spaces in the linked list until I reach the next tabstop.</p>\n\n<p>I continue walking the linked list from the column of the tabstop, searching for the next tab character and repeat the conversion process.</p>\n\n<p>Once I reach the end of the linked list, I print it out as the output line.</p>\n\n<p>Using a doubly linked list may seem tedious, but it greatly simplifies the logic of the <code>main()</code> function in the program.</p>\n\n<p>The <code>main()</code> function says:</p>\n\n<pre><code>while (not end of file)\n    {\n    getline()\n    remove_final_white_space()\n    convert_tabs_to_spaces()\n    putline()\n    }\n</code></pre>\n\n<p>The <code>getline()</code> function creates the linked list with tab characters.</p>\n\n<p>The <code>putline()</code> function flushes the linked list while it prints one character at a time.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user3236961"}, "is_accepted": false, "score": 0, "last_activity_date": 1443550282, "creation_date": 1443550282, "answer_id": 32850979, "question_id": 28066548, "link": "https://stackoverflow.com/questions/28066548/the-c-programming-language-kr-ex1-20-i-encounter-some-trouble/32850979#32850979", "title": "The C Programming Language (K&amp;R) ex1-20 . I encounter some trouble", "body": "<p>okay first thing:</p>\n\n<ul>\n<li><p>consider the scope of what you have read so far can only be used </p></li>\n<li><p>you cannot use pointers and out of scope functions like <code>malloc()</code></p></li>\n<li><p>this ex1-20 is designed to use only what you have learned so far so don't complicate things.</p></li>\n</ul>\n\n<p>ex1-20:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define MAXLINE 1000\n\nvoid getendtab(char s[],int lim,int n){\n\nint c, i;\ni=0;\n\nwhile((c = getchar()) != EOF){\n  if( c == '\\t'){\n   while( n != 0){\n     s[i] = ' ';\n     i++;\n     n--;\n   }\n  n = 3;\n  }else{s[i] = c; i++;}\n}\n\n}\n\nint main(){\n\nint n = 3;\nint len;\nchar bytes[MAXLINE] = {0};\ngetendtab(bytes,MAXLINE,n);\nprintf(\"%s\",bytes);\n\nreturn 0;\n}\n</code></pre>\n"}], "migrated_from": {"other_site": {"aliases": ["http://programmer.stackexchange.com", "http://programmers.stackexchange.com"], "markdown_extensions": ["Prettify"], "launch_date": 1292524346, "open_beta_date": 1283972400, "closed_beta_date": 1283367600, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/apple-touch-icon@2.png", "twitter_account": "StackSoftEng", "favicon_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/apple-touch-icon.png", "audience": "professionals, academics, and students working within the systems development life cycle", "site_url": "https://softwareengineering.stackexchange.com", "api_site_parameter": "softwareengineering", "logo_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/logo.png", "name": "Software Engineering", "site_type": "main_site"}, "on_date": 1421841000, "question_id": 270686}, "owner": {"reputation": 21, "user_id": 4303057, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AZS5t.png?s=128&g=1", "display_name": "wy-ei", "link": "https://stackoverflow.com/users/4303057/wy-ei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 301, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1443550282, "creation_date": 1421813912, "last_edit_date": 1422028371, "question_id": 28066548, "link": "https://stackoverflow.com/questions/28066548/the-c-programming-language-kr-ex1-20-i-encounter-some-trouble", "title": "The C Programming Language (K&amp;R) ex1-20 . I encounter some trouble", "body": "<pre><code>/*\n * 1-20. Write a program detab that replaces tabs in the input with the proper number\n * of blanks to space to the next tab stop. Assume a fixed set of tab stops, say every n columns.\n * Should n be a variable or a symbolic parameter?\n *\n*/\n\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define  N 4\n\nvoid detab(char **str);\n\nint main(){\n    char *line=NULL;\n    char *newline;\n    int len;\n    while(getline(&amp;line,&amp;len,stdin)!=-1){\n        detab(&amp;line);\n        printf(\"%s\",line);\n    }\n    free(line);\n    return 0;\n}\nvoid detab(char **str){\n    int len=0,num=0;\n    int i=0;\n    char c;\n    while((c=(*str)[i])!='\\0'){\n        if(c=='\\t'){   // get the number of tab\n            num++;\n        }\n        len++;          // get length of string\n        i++;\n    }\n    char *newline;\n    newline=(char *)malloc(len+(N-1)*num+1);   //use four blank replace one tab\n    if(newline==NULL){\n        fprintf(stderr,\"can't malloc space\\n\");\n    }\n    i=0;\n    int j=0;        //index of newline\n    while((c=(*str)[i])!='\\0'){\n        if(c=='\\t'){\n            int k;\n            for(k=0;k&lt;N;k++){\n                newline[j]=' ';\n                ++j;\n            }\n        }\n        else{\n            newline[j]=c;\n            ++j;\n        }\n        ++i;\n    }\n    newline[j]='\\0';\n    free(*str);\n    *str=newline;\n}\n</code></pre>\n\n<p>When I enter a short string, it works correctly, but if I enter a long string of maybe 50 characters, it says this:</p>\n\n<pre><code>*** Error in `./a.out': free(): invalid next size (fast): 0x0961b068 ***\nAborted (core dumped)\n</code></pre>\n\n<p>I have been stuck here for almost three hours. Please help me.</p>\n\n<p>It works OK, if I try to use single pointer, like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define  N 4\n\nchar* detab(char *str);\n\nint main(){\n    char *line=NULL;\n    char *newline;\n    int len;\n    while(getline(&amp;line,&amp;len,stdin)!=-1){\n        newline = detab(line);\n        printf(\"%s\",newline);\n        free(newline);\n    }\n    free(line);\n    return 0;\n}\nchar* detab(char *str){\n    int len=0,num=0;\n    int i=0;\n    char c;\n    while((c=str[i])!='\\0'){\n        if(c=='\\t'){\n            num++;\n        }\n        len++;\n        i++;\n    }\n    char *newline;\n    newline=(char *)malloc(len+(N-1)*num+1);   //use four blank replace one tab\n    if(newline==NULL){\n        fprintf(stderr,\"can't malloc space\\n\");\n    }\n    i=0;\n    int j=0;        //index of newline\n    while((c=str[i])!='\\0'){\n        if(c=='\\t'){\n            int k;\n            for(k=0;k&lt;N;k++){\n                newline[j]=' ';\n                ++j;\n            }\n        }\n        else{\n            newline[j]=str[i];\n            ++j;\n        }\n        ++i;\n    }\n    newline[j]='\\0';\n    return newline;\n}\n</code></pre>\n"}]