[{"tags": ["c", "linux", "fpga"], "comments": [{"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1573695603, "post_id": 58847193, "comment_id": 103969681, "body": "Does this help? <a href=\"https://stackoverflow.com/questions/6947413/how-to-open-read-and-write-from-serial-port-in-c\" title=\"how to open read and write from serial port in c\">stackoverflow.com/questions/6947413/&hellip;</a>  I notice they open with O_SYNC to avoid buffering characters."}, {"owner": {"reputation": 1, "user_id": 12369631, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mAnouwmzYtM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reg0UqNl9CXzq0dKGyr3So9HBOiTQ/photo.jpg?sz=128", "display_name": "Bioracing", "link": "https://stackoverflow.com/users/12369631/bioracing"}, "reply_to_user": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1573749840, "post_id": 58847193, "comment_id": 103994463, "body": "O_SYNC is not working, any other suggestion? thanks for your time"}, {"owner": {"reputation": 578, "user_id": 9609830, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Christian B.", "link": "https://stackoverflow.com/users/9609830/christian-b"}, "edited": false, "score": 0, "creation_date": 1574067711, "post_id": 58847193, "comment_id": 104084107, "body": "does it need to be in C? Or is the task to just communicate with your FPGA via the PC?"}], "owner": {"reputation": 1, "user_id": 12369631, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mAnouwmzYtM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reg0UqNl9CXzq0dKGyr3So9HBOiTQ/photo.jpg?sz=128", "display_name": "Bioracing", "link": "https://stackoverflow.com/users/12369631/bioracing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 103, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573687902, "creation_date": 1573687902, "question_id": 58847193, "link": "https://stackoverflow.com/questions/58847193/uart-c-code-for-linux-working-only-sometimes-with-basys3-fpga", "title": "UART C code for linux working only sometimes with BASYS3 FPGA", "body": "<p>I've got a strange situation with my C code for linux (ubuntu 19.04), I'm an FPGA developer, mainly I know only HDLs languages, now I've decided to focus on C coding, I have very poor background with C, and would like to write programs that can comunicate with my FPGA. I'm using for this a Basys3 board.\nI've got a basic UART module, (on FPGA) that on windows works perfectly with TERA TERM.\nFPGA does this: all what comes from UART goes to a buffer (8 bytes wide), when the first 4 bytes are the binary value of ASCII \"data\" it saves the remaining 4 bytes into the memory. When I press a button the 4 bytes from the memory are sent to UART Tx.\nI'm sure that it's sending data: without shutting off the board I load win10 and check on tera term.\nOn ubuntu it just works sometimes. for example: turning on PC, loading bitstream to the FPGA, running C program for sending 8 bytes \"data1234\", running C uart receiver and pressing the button I get \"1234123412341234\". shutting off PC, rebooting, doing exactly the same things, can't read anything from UART (pc side).</p>\n\n<p>the previous version of the FPGA bitstream was easier: what comes from UART goes to memory and when I press the button is sent to UART Tx. This works everytime, sending unknown characters, but at least it works, and makes me think that I need some kind of response from UART to enable receiving (pc side), but honestly I don't know..</p>\n\n<p>this is the code that I'm using from an online tutorial and modded. I added some features in some version, but now I'm back to a nearly untouched version.</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n    #include &lt;fcntl.h&gt;   /* File Control Definitions           */\n    #include &lt;termios.h&gt; /* POSIX Terminal Control Definitions */\n    #include &lt;unistd.h&gt;  /* UNIX Standard Definitions      */ \n    #include &lt;errno.h&gt;   /* ERROR Number Definitions           */\n\nvoid main(void)\n    {\n        int fd;/*File Descriptor*/\n\n    printf(\"\\n +----------------------------------+\");\n    printf(\"\\n |        Serial Port Read          |\");\n    printf(\"\\n +----------------------------------+\");\n\n    /*------------------------------- Opening the Serial Port -------------------------------*/\n\n    /* Change /dev/ttyUSB1 to the one corresponding to your system */\n\n        fd = open(\"/dev/ttyUSB1\",O_RDWR | O_NOCTTY );   /* ttyUSB0 is the FT232 based USB2SERIAL Converter   */\n                            /* O_RDWR   - Read/Write access to serial port       */\n                            /* O_NOCTTY - No terminal will control the process   */\n                            /* Open in blocking mode,read will wait              */\n\n\n\n        if(fd == -1)                        /* Error Checking */\n               printf(\"\\n  Error! in Opening ttyUSB1  \");\n        else\n               printf(\"\\n  ttyUSB1 Opened Successfully \");\n\n\n    /*---------- Setting the Attributes of the serial port using termios structure --------- */\n\n    struct termios SerialPortSettings ; /* Create the structure                          */\n\n    tcgetattr(fd, &amp;SerialPortSettings); /* Get the current attributes of the Serial port */\n\n    /* Setting the Baud rate */\n    cfsetispeed(&amp;SerialPortSettings,B9600); /* Set Read  Speed as 9600                       */\n    cfsetospeed(&amp;SerialPortSettings,B9600); /* Set Write Speed as 9600                       */\n\n    /* 8N1 Mode */\n    SerialPortSettings.c_cflag &amp;= ~PARENB;   /* Disables the Parity Enable bit(PARENB),So No Parity   */\n    SerialPortSettings.c_cflag &amp;= ~CSTOPB;   /* CSTOPB = 2 Stop bits,here it is cleared so 1 Stop bit */\n    SerialPortSettings.c_cflag &amp;= ~CSIZE;    /* Clears the mask for setting the data size             */\n    SerialPortSettings.c_cflag |=  CS8;      /* Set the data bits = 8                                 */\n\n    SerialPortSettings.c_cflag &amp;= ~CRTSCTS;       /* No Hardware flow Control                         */\n    SerialPortSettings.c_cflag |= CREAD | CLOCAL; /* Enable receiver,Ignore Modem Control lines       */ \n\n\n    SerialPortSettings.c_iflag &amp;= ~(IXON | IXOFF | IXANY);          /* Disable XON/XOFF flow control both i/p and o/p */\n    SerialPortSettings.c_iflag &amp;= ~(ICANON | ECHO | ECHOE | ISIG);  /* Non Cannonical mode                            */\n\n    SerialPortSettings.c_oflag &amp;= ~OPOST;/*No Output Processing*/\n\n    /* Setting Time outs */\n    SerialPortSettings.c_cc[VMIN] = 32; /* Read at least 10 characters */\n    SerialPortSettings.c_cc[VTIME] = 5; /* Wait indefinetly   */\n\n\n    if((tcsetattr(fd,TCSANOW,&amp;SerialPortSettings)) != 0) /* Set the attributes to the termios structure*/\n        printf(\"\\n  ERROR ! in Setting attributes\");\n    else\n                printf(\"\\n  BaudRate = 9600 \\n  StopBits = 1  \\n  Parity   = none\");\n\n        /*------------------------------- Read data from serial port -----------------------------*/\n\n    tcflush(fd, TCIFLUSH);   /* Discards old data in the rx buffer            */\n\n    char read_buffer[32];   /* Buffer to store the data received              */\n    int  bytes_read = 0;    /* Number of bytes read by the read() system call */\n    int i = 0;\n\n    bytes_read = read(fd,&amp;read_buffer,32); /* Read the data                   */\n\n    printf(\"\\n\\n  Bytes Rxed -%d\", bytes_read); /* Print the number of bytes read */\n    printf(\"\\n\\n  \");\n\n    for(i=0;i&lt;bytes_read;i++)    /*printing only the received characters*/\n        printf(\"%c\",read_buffer[i]);\n\n    printf(\"\\n +----------------------------------+\\n\\n\\n\");\n\n    close(fd); /* Close the serial port */\n\n    }\n</code></pre>\n\n<p>if you can help me finding what is wrong I will love you forever</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "string", "file"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1573861327, "post_id": 58846982, "comment_id": 104039217, "body": "regarding: <code>perror(&quot;Error opening file\\n&quot;);</code>  This is only going to print the results of the second call to <code>fopen()</code>  Suggest: <code>FILE * file_1;  if( !( file_1 = fopen( &quot;file1.ll&quot;, &quot;r&quot; ) ) )  { perror( &quot;fopen for file_1.ll failed&quot; );  exit( EXIT_FAILURE );}  and a similar logic for </code>fopen()` of file_2.ll"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1573861641, "post_id": 58846982, "comment_id": 104039309, "body": "OT: regarding: <code>char ** string_1 = (char **)malloc (sizeof(char * ) * 1000);</code> 1) in C, the returned type is <code>void*</code> which can be assigned to any pointer.  Casting just clutters the code.  Suggest removing that cast.  2) always check (!=NULL) the returned value to assure the operation was successful.  if not successful, call <code>perror( &quot;malloc failed&quot; );  exit( EXIT_FAILURE );</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1573861906, "post_id": 58846982, "comment_id": 104039370, "body": "OT: for ease of readability and understanding: 1) Please follow the axiom: <i>only one statement line and (at most) one variable declaration per statement.</i>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1573862028, "post_id": 58846982, "comment_id": 104039397, "body": "OT:  regarding: <code>char ** string_1 = malloc (sizeof(char * ) * 1000);</code>  Much better to use: <code>calloc()</code> rather than <code>malloc()</code> then no need to count how many of the entries are used.  just loop until a NULL entry is encountered"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1573862146, "post_id": 58846982, "comment_id": 104039426, "body": "OT:  regarding: <code>while (fgets(temp_string, 1000, file_1) != NULL) {</code>  for flexibility, much better to use: <code>while (fgets(temp_string, sizeof( temp_string ), file_1) != NULL) {</code>  then if the length of <code>temp_string</code> is changed, only one place in the code needs to be modified"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1573862300, "post_id": 58846982, "comment_id": 104039457, "body": "regarding: <code>while (fgets(temp_string, sizeof( temp_string ), file_1) != NULL)</code>  Much better to be checking that there is still room in the array before reading another line from the file.  Suggest: <code>while ( i&lt;1000 &amp;&amp; fgets(temp_string, sizeof( temp_string ), file_1) )</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1573862440, "post_id": 58846982, "comment_id": 104039483, "body": "OT:  regarding: <code>string_2[i] = (char *) malloc (sizeof(char) * 1000);</code>  1) see prior comment about returned type.  2) the expression: <code>sizeof( char )</code> is defined in the C standard as 1.  Multiplying anything by 1 has no effect.  Suggest removing that expression"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1573862677, "post_id": 58846982, "comment_id": 104039529, "body": "before the inputting of the second file, the variable <code>i</code> has not been reset.  So any lines from the second file are copied to WAY far along in the second array  This is an error,"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1573865703, "post_id": 58846982, "comment_id": 104040071, "body": "regarding your comment: <i>//Until now everything is okay. The compiler warns nothing and the code is read and printed. //I&#39;ve put big spaces to facilitate the reading of the code</i> actually, the second array is WAY off due to <code>i</code> not being reset.  The result is undefined behavior if <code>i</code> is &gt;= 1000 due to a buffer overflow"}], "answers": [{"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": true, "score": 1, "last_activity_date": 1573866253, "creation_date": 1573866253, "answer_id": 58886580, "question_id": 58846982, "link": "https://stackoverflow.com/questions/58846982/how-to-fix-code-that-prints-the-code-read-in-a-file-with-a-double-char-pointer/58886580#58886580", "title": "how to fix code that prints the code read in a file with a double char pointer", "body": "<p>The following proposed code:</p>\n\n<ol>\n<li>corrects the problems identified in the comments to the OPs question</li>\n<li>properly checks for I/O and heap allocation errors</li>\n<li>properly checks that each buffer will not be overflowed by a large file</li>\n<li>avoids allocating local buffers that are not needed</li>\n<li>cleanly compiles</li>\n<li>performs the desired functionality</li>\n<li>properly cleans up after itself</li>\n<li>defines meaningful names to avoid the use of 'magic' numbers</li>\n</ol>\n\n<p>and now, the proposed code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;   // fopen(), perror(), FILE\n#include &lt;stdlib.h&gt;  // exit(), EXIT_FAILURE, malloc(),  calloc()\n#include &lt;string.h&gt;  // strcpy()\n\n#define  MAX_LINES     1024\n#define  MAX_LINE_LEN  1024\n\n\nvoid cleanup( FILE* file1, FILE* file2, char **array1, char **array2 )\n{\n    if( file1 )\n        fclose( file1 );\n\n    if( file2 )\n        fclose( file2 );\n\n    if( array1 )\n    {\n        for( size_t i = 0; array1[i]; i++ )\n            free( array1[i] );\n        free( array1 );\n    }\n\n    if( array2 )\n    {\n        for( size_t i = 0; array2[i]; i++ )\n            free( array2[i] );\n        free( array2 );\n    }\n}\n\n\nint main( void ) \n{\n    FILE *file_1 = NULL;\n    FILE *file_2 = NULL;\n    char ** string_1 = NULL;\n    char ** string_2 = NULL;\n\n    //Opening the files\n    if( !( file_1 = fopen(\"file1.ll\", \"r\") ) )\n    {\n        perror( \"fopen for file1.ll failed\" );\n        cleanup( file_1, file_2, string_1, string_2 );\n        exit( EXIT_FAILURE );\n    }\n\n    if( !( file_2 = fopen(\"file2.ll\", \"r\") ) )\n    {\n        perror( \"fopen for file2.ll failed\" );\n        cleanup( file_1, file_2, string_1, string_2 );\n        exit( EXIT_FAILURE );\n    }\n\n    string_1 = calloc ( sizeof(char * ), MAX_LINES );\n    if( ! string_1 )\n    {\n        perror( \"malloc failed\" );\n        cleanup( file_1, file_2, string_1, string_2 );\n\n        exit( EXIT_FAILURE );\n    }\n\n\n    int i = 0;\n    char temp_string[ MAX_LINE_LEN ];\n\n    while ( i&lt;MAX_LINES &amp;&amp; fgets(temp_string, sizeof( temp_string ), file_1) )\n    {\n        string_1[i] = malloc ( MAX_LINE_LEN );\n        if( ! string_1[i] )\n        {\n            perror( \"malloc for new line failed\" );\n            cleanup( file_1, file_2, string_1, string_2 );\n\n            exit( EXIT_FAILURE );\n        }\n\n        strcpy (string_1[i], temp_string);\n        fputs(string_1[i], stdout);\n    }\n\n    printf(\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\");\n\n    //I do the same for file 2\n    i = 0;  // Note: the index into the array needs to be reset\n\n    string_2 = calloc ( sizeof(char *), MAX_LINES );\n    if( ! string_2 )\n    {\n        perror( \"malloc failed\" );\n        cleanup( file_1, file_2, string_1, string_2 );\n\n        exit( EXIT_FAILURE );\n    }\n\n    while ( i&lt;MAX_LINES &amp;&amp; fgets(temp_string, sizeof( temp_string ), file_2) ) \n    {\n        string_2[i] = malloc ( MAX_LINE_LEN );\n        if( ! string_2[i] )\n        {\n            perror( \"malloc for new line failed\" );\n            cleanup( file_1, file_2, string_1, string_2 );\n\n            exit( EXIT_FAILURE );\n        }\n\n        strcpy (string_2[i], temp_string);\n        fputs(string_2[i], stdout);\n    }\n\n    printf(\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\");\n\n    printf(\"%s%s%s%s\\n\\n\", string_1[0], string_1[1],string_1[2],string_1[3]);\n\n    printf(\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\");\n\n    //Here only two lines are printed\n    for (size_t i=0; string_1[i]; i++) \n    {\n        fputs(string_1[i], stdout);\n    }\n\n    printf(\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\");\n\n    for (size_t i=0; string_2[i]; i++) \n    {\n        fputs(string_2[i], stdout);\n    }\n\n    cleanup( file_1, file_2, string_1, string_2 );\n\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 11996956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c4e12d1b82a232b9b9c669d6cec0f88?s=128&d=identicon&r=PG&f=1", "display_name": "francescobfc", "link": "https://stackoverflow.com/users/11996956/francescobfc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 58886580, "answer_count": 1, "score": 0, "last_activity_date": 1573866253, "creation_date": 1573686414, "question_id": 58846982, "link": "https://stackoverflow.com/questions/58846982/how-to-fix-code-that-prints-the-code-read-in-a-file-with-a-double-char-pointer", "title": "how to fix code that prints the code read in a file with a double char pointer", "body": "<p>This code is intended to read the content of two files and to store them into two double char pointers, so that each element of each array stores a line of each file. When reading the files, I tell the program to print the lines, and it prints exactly as it is written. However, when I try to print random elements of the arrays of even the entire arrays themselves, outside of the foor loops, the program returns NULL or doesn't print anything.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n\nint main() {\n\n    //Opening the files\n    FILE * file_1 = fopen(\"file1.ll\", \"r\");\n    FILE * file_2 = fopen(\"file2.ll\", \"r\");\n    if (file_1 == NULL || file_2 == NULL) {\n        perror(\"Error opening file\\n\");\n    }\n    //Here I create a temporary string\n    char temp_string [1000];\n    // I create an array of strings\n    char ** string_1 = (char **)malloc (sizeof(char * ) * 1000);\n    int i = 0;\n    //size_1 and size_2 will be used to account for the effective size of the arrays\n    int size_1 = 0, size_2 = 0;\n    //I read the file into temp_string\n    while (fgets(temp_string, 1000, file_1) != NULL) {\n        string_1[i] = (char *) malloc (sizeof(char) * 1000);\n        //Then I copy temp_string to the element i of string_1\n        strcpy (string_1[i], temp_string);\n        //I print the string\n        fputs(string_1[i], stdout);\n        //and increase the size\n        size_1++;\n    }\n\n    printf(\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\");\n    //I do the same for file 2\n    char temp_string_2 [1000];\n    char ** string_2 = (char **)malloc (sizeof(char * ) * 1000);\n    while (fgets(temp_string_2, 1000, file_2) != NULL) {\n        string_2[i] = (char *) malloc (sizeof(char) * 1000);\n        strcpy (string_2[i], temp_string_2);\n        fputs(string_2[i], stdout);\n        size_2++;\n    }\n    //Until now everything is okay. The compiler warns nothing and the code is read and printed.\n    //I've put big spaces to facilitate the reading of the code\n    printf(\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\");\n\n    //Here I try to print the first four elements of string_1, but string_1[2] and\n    //string_1[3] return NULL\n    printf(\"%s%s%s%s\\n\\n\", string_1[0], string_1[1],string_1[2],string_1[3]);\n\n    printf(\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\");\n\n    //Here only two lines are printed\n    for (int i=0; i&lt;size_1; i++) {\n        fputs(string_1[i], stdout);\n    }\n    printf(\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\");\n    for (int i=0; i&lt;size_2; i++) {\n        fputs(string_2[i], stdout);\n    }\n\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "gcc", "clang", "language-lawyer", "bit-fields"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1573685857, "post_id": 58846584, "comment_id": 103967437, "body": "You might want to take a step back, and just print the value of the six bit fields."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1573686251, "post_id": 58846584, "comment_id": 103967557, "body": "The code also has two warnings about mismatched arguments and format specifiers in the <code>printf</code>s. Until those are fixed, the code has undefined behavior, and is therefore allowed to do anything."}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 1, "creation_date": 1573690207, "post_id": 58846584, "comment_id": 103968519, "body": "<a href=\"https://godbolt.org/z/4PAAnE\" rel=\"nofollow noreferrer\">godbolt</a> <code>gcc</code> looks like is masking every calculation on <code>long long : 33</code> bit-fields with a <code>2&lt;&lt;33-1</code> mask before and after calculation. <code>clang</code> just sign-extends <code>a33</code> and uses <code>rax</code> to calculate it - <code>clang</code> doesn&#39;t mask it with <code>2&lt;&lt;33-1</code>. I don&#39;t know if this is correct - should be a <code>long long : 33</code> bitfield promoted to <code>long long</code> or could be promoted to some implementation supported &quot;__uint33_t&quot;` type."}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 2, "creation_date": 1573691518, "post_id": 58846584, "comment_id": 103968816, "body": "One issue that&#39;s confusing this is that you&#39;re ignoring the warnings about incompatible arguments for your format specifiers.   You need to cast the results of your inline additions to <code>long long</code> to get consistent results in the 4th, 5th, and 6th <code>printf</code> calls, e.g. <code>(long long) (s.a31 + s.b31)</code>  Fixing this gives consistent results for the function calls vs. the inline computations, at least with <code>gcc</code>."}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1573692248, "post_id": 58846584, "comment_id": 103968981, "body": "The compiler behavior seems unintuitive to me.  One thing I noticed is that, with <code>gcc</code>, <code>sizeof(s.a31 + 0)</code> and <code>sizeof(s.a32 + 0)</code> are both 4 on my system, but <code>sizeof(s.a33 + 0)</code> is 8.  I would have thought they would all be unpacked into <code>long long</code> and have size 8, but apparently not."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 4, "creation_date": 1573705293, "post_id": 58846584, "comment_id": 103971773, "body": "* Do not use bit field types other than <code>signed int</code>, <code>unsigned</code>, <code>_Bool</code>.  Anything else is trouble.  &quot;A bit-field shall have a type that is a qualified or unqualified version of _Bool, signed int, unsigned int, or some other implementation-defined type.&quot; C11 &#167;6.7.2.1 5"}], "answers": [{"tags": [], "owner": {"reputation": 206, "user_id": 14840097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fde9b3b957e17961a8af717be0c1e205?s=128&d=identicon&r=PG&f=1", "display_name": "sidcoder", "link": "https://stackoverflow.com/users/14840097/sidcoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1612844405, "creation_date": 1612844405, "answer_id": 66112931, "question_id": 58846584, "link": "https://stackoverflow.com/questions/58846584/multiple-inconsistent-behavior-of-signed-bit-fields/66112931#66112931", "title": "Multiple inconsistent behavior of signed bit-fields", "body": "<p>Please have a look to the proposed code which works correctly and as expected.</p>\n<p>For the practical purpose, I would suggest, just make sure that</p>\n<ul>\n<li>compatible types are added,</li>\n<li>correct types are returned and</li>\n<li>correct types are in the printf statement.</li>\n</ul>\n<p>That's it.</p>\n<p>For more information, see also Ref.[1] and [2], below.</p>\n<pre><code>#include &lt;stdio.h&gt;\n\nstruct S {\n    long long a31 : 31;\n    long long a32 : 32;\n    long long a33 : 33;\n    \n    unsigned long long b31 : 31;\n    unsigned long long b32 : 32;\n    unsigned long long b33 : 33;\n};\n\nlong long f31(struct S *p) { return ((long long)p-&gt;a31 + (long long)p-&gt;b31); }\nlong long f32(struct S *p) { return ((long long)p-&gt;a32 + (long long)p-&gt;b32); }\nlong long f33(struct S *p) { return ((long long)p-&gt;a33 + (long long)p-&gt;b33); }\n\nint main() {\n    struct S s = { -2, -2, -2, 1, 1, 1 };\n    long long a32 = -2;\n    unsigned long long b32 = 1;\n    \n    printf(&quot;p-&gt;a31       =&gt; %lld\\n&quot;, (long long)(s.a31));\n    printf(&quot;p-&gt;a32       =&gt; %lld\\n&quot;, (long long)(s.a32));\n    printf(&quot;p-&gt;a33       =&gt; %lld\\n&quot;, (long long)(s.a33));\n    \n    printf(&quot;p-&gt;b31       =&gt; %lld\\n&quot;, (long long)(s.b31));\n    printf(&quot;p-&gt;b32       =&gt; %lld\\n&quot;, (long long)(s.b32));\n    printf(&quot;p-&gt;b33       =&gt; %lld\\n&quot;, (long long)(s.b33));\n    \n    \n    printf(&quot;f31(&amp;s)       =&gt; %lld\\n&quot;, (long long)(f31(&amp;s)));\n    printf(&quot;f32(&amp;s)       =&gt; %lld\\n&quot;, (long long)(f32(&amp;s)));\n    printf(&quot;f33(&amp;s)       =&gt; %lld\\n&quot;, (long long)(f33(&amp;s)));\n    printf(&quot;s.a31 + s.b31 =&gt; %lld\\n&quot;, ((long long)s.a31 + (long long)s.b31));\n    printf(&quot;s.a32 + s.b32 =&gt; %lld\\n&quot;, ((long long)s.a32 + (long long)s.b32));\n    printf(&quot;s.a33 + s.b33 =&gt; %lld\\n&quot;, ((long long)s.a33 + (long long)s.b33));\n    printf(&quot;  a32 +   b32 =&gt; %lld\\n&quot;, (long long) (a32 +   b32));\n    return 0;\n}\n\n</code></pre>\n<pre><code>p-&gt;a31       =&gt; -2\np-&gt;a32       =&gt; -2\np-&gt;a33       =&gt; -2\np-&gt;b31       =&gt; 1\np-&gt;b32       =&gt; 1\np-&gt;b33       =&gt; 1\nf31(&amp;s)       =&gt; -1\nf32(&amp;s)       =&gt; -1\nf33(&amp;s)       =&gt; -1\ns.a31 + s.b31 =&gt; -1\ns.a32 + s.b32 =&gt; -1\ns.a33 + s.b33 =&gt; -1\n  a32 +   b32 =&gt; -1\n</code></pre>\n<p>References</p>\n<p>[1] <a href=\"https://stackoverflow.com/questions/50605/signed-to-unsigned-conversion-in-c-is-it-always-safe\">Signed to unsigned conversion in C - is it always safe?</a></p>\n<p>[2] <a href=\"https://www.geeksforgeeks.org/bit-fields-c/\" rel=\"nofollow noreferrer\">https://www.geeksforgeeks.org/bit-fields-c/</a>\n&quot;We cannot have pointers to bit field members as they may not start at a byte boundary.&quot;</p>\n"}], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 156, "favorite_count": 1, "answer_count": 1, "score": 7, "last_activity_date": 1612844405, "creation_date": 1573684001, "last_edit_date": 1592644375, "question_id": 58846584, "link": "https://stackoverflow.com/questions/58846584/multiple-inconsistent-behavior-of-signed-bit-fields", "title": "Multiple inconsistent behavior of signed bit-fields", "body": "<p>I have come across a strange behavior on signed bit-fields:</p>\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n\nstruct S {\n    long long a31 : 31;\n    long long a32 : 32;\n    long long a33 : 33;\n    long long : 0;\n    unsigned long long b31 : 31;\n    unsigned long long b32 : 32;\n    unsigned long long b33 : 33;\n};\n\nlong long f31(struct S *p) { return p-&gt;a31 + p-&gt;b31; }\nlong long f32(struct S *p) { return p-&gt;a32 + p-&gt;b32; }\nlong long f33(struct S *p) { return p-&gt;a33 + p-&gt;b33; }\n\nint main() {\n    struct S s = { -2, -2, -2, 1, 1, 1 };\n    long long a32 = -2;\n    unsigned long long b32 = 1;\n    printf(&quot;f31(&amp;s)       =&gt; %lld\\n&quot;, f31(&amp;s));\n    printf(&quot;f32(&amp;s)       =&gt; %lld\\n&quot;, f32(&amp;s));\n    printf(&quot;f33(&amp;s)       =&gt; %lld\\n&quot;, f33(&amp;s));\n    printf(&quot;s.a31 + s.b31 =&gt; %lld\\n&quot;, s.a31 + s.b31);\n    printf(&quot;s.a32 + s.b32 =&gt; %lld\\n&quot;, s.a32 + s.b32);\n    printf(&quot;s.a33 + s.b33 =&gt; %lld\\n&quot;, s.a33 + s.b33);\n    printf(&quot;  a32 +   b32 =&gt; %lld\\n&quot;,   a32 +   b32);\n    return 0;\n}\n</code></pre>\n<p>Using Clang on OS/X, I get this output:</p>\n<pre>\nf31(&s)       => -1\nf32(&s)       => 4294967295\nf33(&s)       => -1\ns.a31 + s.b31 => 4294967295\ns.a32 + s.b32 => 4294967295\ns.a33 + s.b33 => -1\n  a32 +   b32 => -1\n</pre>\n<p>Using GCC on Linux, I get this:</p>\n<pre>\nf31(&s)       => -1\nf32(&s)       => 4294967295\nf33(&s)       => 8589934591\ns.a31 + s.b31 => 4294967295\ns.a32 + s.b32 => 4294967295\ns.a33 + s.b33 => 8589934591\n  a32 +   b32 => -1\n</pre>\n<p>The above output shows 3 types of inconsistencies:</p>\n<ul>\n<li>different behavior for different compilers;</li>\n<li>different behavior for different bit-field widths;</li>\n<li>different behavior for inline expressions and equivalent expressions wrapped in a function.</li>\n</ul>\n<p>The C Standard has this language:</p>\n<blockquote>\n<p><strong>6.7.2 Type specifiers</strong></p>\n<p>...</p>\n<p>Each of the comma-separated multisets designates the same type, except that for bit-fields, it is implementation-defined whether the specifier <code>int</code> designates the same type as <code>signed int</code> or the same type as <code>unsigned int</code>.</p>\n</blockquote>\n<p>Bit-fields are notoriously broken in many older compilers...<br>\nIs the behavior of Clang and GCC conformant or are these inconsistencies the result of one or more bugs?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 1, "creation_date": 1573683672, "post_id": 58846492, "comment_id": 103966673, "body": "If the first version works, the argument you\u2019re passing with the call to <code>test_matrix</code> is wrong. <code>%d</code> doesn\u2019t expect an <code>int*</code>, which is what <code>*(matrix+j+4*i)</code> is when <code>matrix</code> is an <code>int**</code>."}, {"owner": {"reputation": 63634, "user_id": 215752, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/face3276756bf64319a7d1df0d194d5c?s=128&d=identicon&r=PG", "display_name": "Hogan", "link": "https://stackoverflow.com/users/215752/hogan"}, "edited": false, "score": 1, "creation_date": 1573683802, "post_id": 58846492, "comment_id": 103966732, "body": "You need to do it twice -- if this is an array and you want to use it like an array than use the <code>[</code>]` or cast it to the new type after the pointer arithmatic."}, {"owner": {"reputation": 5813, "user_id": 1075282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70efe94a6c2237ec96f429402a03a27d?s=128&d=identicon&r=PG", "display_name": "Renat", "link": "https://stackoverflow.com/users/1075282/renat"}, "edited": false, "score": 0, "creation_date": 1573684251, "post_id": 58846492, "comment_id": 103966895, "body": "Better to show how <code>test_matrix</code> is being called, that is how <code>matrix</code> was constructed before passing to the function"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 2, "creation_date": 1573684264, "post_id": 58846492, "comment_id": 103966902, "body": "<code>matrix[i][j]</code> can work, depending on how <code>matrix</code> was declared and initialized in the caller. But you haven&#39;t shown the code that calls your function. See <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1573686711, "post_id": 58846492, "comment_id": 103967661, "body": "Start by fixing <a href=\"https://pastebin.com/9FuTUPEi\" rel=\"nofollow noreferrer\">the errors the compiler is giving</a>."}, {"owner": {"reputation": 2060, "user_id": 3808573, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CmqrY.png?s=128&g=1", "display_name": "ssd", "link": "https://stackoverflow.com/users/3808573/ssd"}, "edited": false, "score": 1, "creation_date": 1573689055, "post_id": 58846492, "comment_id": 103968242, "body": "You&#39;d better revise pointers chapter of a C book. How you conceptualize a pointer in your head is way different from how the compiler treat them. As far as I understand; you conceptualize a double dimension matrix had to be passed via a double star pointer. Things doesn&#39;t work that way in C. For a matrix <code>int matrix[4][4]</code>, matrix data is laid down in the memory as 16 (= 4 &#215; 4) consecutive integers, starting from the address <code>matrix</code> or <code>&amp;matrix[0]</code> or <code>&amp;matrix[0][0]</code>. Not only the receiving function but the <code>main</code> function as well doesn&#39;t even know that your matrix has 4 rows &amp; 4 columns."}, {"owner": {"reputation": 2060, "user_id": 3808573, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CmqrY.png?s=128&g=1", "display_name": "ssd", "link": "https://stackoverflow.com/users/3808573/ssd"}, "edited": false, "score": 0, "creation_date": 1573689061, "post_id": 58846492, "comment_id": 103968246, "body": "The array <code>matrix</code> to the compiler is simply 16 integers laid consecutive in the memory. So, your calling line is better be like <code>test_matrix(matrix, 4, 4)</code> and your function decoration is better be like <code>void test_matrix(int *matrix, int no_of_rows, int no_of_cols)</code>."}, {"owner": {"reputation": 1895, "user_id": 10505778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d48a83c7fb094806cc998ecd3685e06?s=128&d=identicon&r=PG&f=1", "display_name": "DarkAtom", "link": "https://stackoverflow.com/users/10505778/darkatom"}, "edited": false, "score": 0, "creation_date": 1573727936, "post_id": 58846492, "comment_id": 103981374, "body": "How does the compiler not yell at you for passing an <code>int(*)[4]</code> to an <code>int**</code> parameter?"}], "answers": [{"tags": [], "owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "is_accepted": false, "score": 2, "last_activity_date": 1573734913, "creation_date": 1573734913, "answer_id": 58856925, "question_id": 58846492, "link": "https://stackoverflow.com/questions/58846492/dereferencing-pointer-to-a-pointer-doesnt-work-when-i-pass-it-to-a-function-wh/58856925#58856925", "title": "Dereferencing pointer to a pointer doesn&#39;t work when I pass it to a function. Why? (C)", "body": "<p>The error is that this 2D-array is laid out as 4 x 4 = 16 integers. But your function expects a pointer to pointers.</p>\n\n<p>It's right that at the calling site the address of <code>matrix</code> is provided as the argument. But unlike some commenter said, it's not a pointer to <code>int</code> but a pointer to an <code>int</code>-array.</p>\n\n<p>To handle this address of the 2D-array correctly you need to tell it your function, like this:</p>\n\n<pre><code>void test_matrix(int (*matrix)[4])\n{\n    for (int i = 0; i &lt; 4; i++) {\n        for (int j = 0; j &lt; 4; j++) {\n            printf(\"%d \", *(*(matrix + i) + j));\n        }\n    }\n}\n</code></pre>\n\n<p>or like this:</p>\n\n<pre><code>void test_matrix(int matrix[][4])\n{\n    for (int i = 0; i &lt; 4; i++) {\n        for (int j = 0; j &lt; 4; j++) {\n            printf(\"%d \", matrix[i][j]);\n        }\n    }\n}\n</code></pre>\n\n<p>Which kind of access you use doesn't matter, sometimes it's just a matter of taste. These expressions are equivalent, actually <code>p[i]</code> is syntactic sugar for <code>*(p + i)</code>:</p>\n\n<pre><code>*(*(matrix + i) + j)\n\nmatrix[i][j]\n</code></pre>\n\n<hr>\n\n<p><em>Note 1: As some commenters already recommend, you should raise the warning level to the maximum and correct the source until all diagnostics are handled.</em></p>\n\n<p><em>Note 2: When your arrays vary in their dimensional sizes you need to think of a way to tell these sizes to your function.</em></p>\n"}], "owner": {"reputation": 17, "user_id": 10858925, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nFdt0EMl8XM/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZRLaves_PpMqv_xok908cd53oN2g/mo/photo.jpg?sz=128", "display_name": "Finki Pero", "link": "https://stackoverflow.com/users/10858925/finki-pero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1573734913, "creation_date": 1573683556, "last_edit_date": 1573686535, "question_id": 58846492, "link": "https://stackoverflow.com/questions/58846492/dereferencing-pointer-to-a-pointer-doesnt-work-when-i-pass-it-to-a-function-wh", "title": "Dereferencing pointer to a pointer doesn&#39;t work when I pass it to a function. Why? (C)", "body": "<p>I tried everything I could think off. I don't know if I'm missing something obvious. Why does this work:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nvoid test_matrix(int** matrix)\n{\n    for(int i=0; i&lt;4; i++) {\n        for(int j=0; j&lt;4; j++) {\n            printf(\"%d \", *(matrix+j+4*i));\n        }\n    }\n    /**\n    for(int i=0; i&lt;4; i++) {\n        for(int j=0; j&lt;4; j++) {\n            printf(\"%d \", *(*(matrix+i)+j));\n        }\n    }\n    */\n}\nint main()\n{\n    int matrix[4][4];\n    for(int i=0; i&lt;4; i++)\n        for(int j=0; j&lt;4; j++)\n            scanf(\"%d\", &amp;matrix[i][j]);\n    test_matrix(matrix);\n}\n\n</code></pre>\n\n<p>But the commented section doesn't work. I also tried matrix[i][j] and it still won't work. My program times out.\nEDIT: I added the function calling in MAIN.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1573832266, "post_id": 58846489, "comment_id": 104027559, "body": "in general, it is a poor programming practice to hide a pointer in a typedef.  I.E.  the <code>*stack</code> will create problems with humans reading the code.\\"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 10558068, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Ri152aJxPmY/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbB2MqvjwwMzijMbSRNAHWOoV-SK_Q/mo/photo.jpg?sz=128", "display_name": "Reda Legzali", "link": "https://stackoverflow.com/users/10558068/reda-legzali"}, "edited": false, "score": 0, "creation_date": 1573748533, "post_id": 58846536, "comment_id": 103993613, "body": "Now I got it ! Thanks"}], "tags": [], "owner": {"reputation": 200780, "user_id": 116908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54d38793d7a407446999b33b81d607fd?s=128&d=identicon&r=PG", "display_name": "Carl Norum", "link": "https://stackoverflow.com/users/116908/carl-norum"}, "is_accepted": true, "score": 1, "last_activity_date": 1573683741, "creation_date": 1573683741, "answer_id": 58846536, "question_id": 58846489, "link": "https://stackoverflow.com/questions/58846489/pointer-in-typedef-struct/58846536#58846536", "title": "Pointer in typedef struct", "body": "<p>Neither points to anything in the example you've given. This code is just the declaration of the structure type itself. You could break the typedefs out into maybe simpler form:</p>\n\n<pre><code>struct StackElement\n{\n    int value;\n    struct StackElement *next;\n};\n\ntypedef struct StackElement StackElement;\ntypedef struct StackElement *Stack;\n</code></pre>\n\n<p>That is, there is a declaration of the structure itself, which contains a field <code>next</code> to be used by the implementation code of this stack. That field, when filled in, will point to another <code>struct StackElement</code> structure.</p>\n\n<p>The <code>typedef</code> parts just make convenience names - <code>StackElement</code> can be used in place of <code>struct StackElement</code>, and <code>Stack</code> can be used instead of <code>struct StackElement *</code>.</p>\n"}], "owner": {"reputation": 13, "user_id": 10558068, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Ri152aJxPmY/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbB2MqvjwwMzijMbSRNAHWOoV-SK_Q/mo/photo.jpg?sz=128", "display_name": "Reda Legzali", "link": "https://stackoverflow.com/users/10558068/reda-legzali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 58846536, "answer_count": 1, "score": 0, "last_activity_date": 1573684046, "creation_date": 1573683537, "last_edit_date": 1573684046, "question_id": 58846489, "link": "https://stackoverflow.com/questions/58846489/pointer-in-typedef-struct", "title": "Pointer in typedef struct", "body": "<p>I came across a stack tutorial in the C language and I can't seem to understand what the <code>*Stack</code> pointer is pointing towards nor the <code>*next</code> pointer.\nI would just like to have a quick explanation on what these two pointers actually point to.</p>\n\n<pre><code>typedef struct StackElement\n    {\n        int value;\n        struct StackElement *next;\n    }StackElement, *Stack;\n</code></pre>\n"}, {"tags": ["c", "linked-list"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 1, "creation_date": 1573683898, "post_id": 58846421, "comment_id": 103966775, "body": "<code>cut-&gt;point = &amp;link;</code> You are trying to store the address of a local variable. Use <code>malloc</code> instead."}, {"owner": {"reputation": 1320, "user_id": 5495906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5b319c1b73d80f4155fbdd4fcb81525?s=128&d=identicon&r=PG&f=1", "display_name": "LegendofPedro", "link": "https://stackoverflow.com/users/5495906/legendofpedro"}, "edited": false, "score": 0, "creation_date": 1573683931, "post_id": 58846421, "comment_id": 103966788, "body": "Neither example should compile. Function prototypes should come before <code>main</code>, not nested within."}, {"owner": {"reputation": 119, "user_id": 12362688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/861a2499edb61aa2389e26d26027f3f8?s=128&d=identicon&r=PG&f=1", "display_name": "yolin00", "link": "https://stackoverflow.com/users/12362688/yolin00"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1573693663, "post_id": 58846421, "comment_id": 103969262, "body": "Though link variable (in while statement) is a local variable but i am pointing it.So it&#39;s should be seen.Otherwise it point  no local variable.But it point only one variable.And that&#39;s one cann&#39;t point  2nd link variable (which is declared in 2nd executuion of while loop.).If you compile code you would understand well.  @Johnny"}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1573696852, "post_id": 58846421, "comment_id": 103969945, "body": "Johnny Mopp is correct.  Your pointer is pointing to garbage on the second loop because the local variable that it was pointing to is gone."}], "owner": {"reputation": 119, "user_id": 12362688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/861a2499edb61aa2389e26d26027f3f8?s=128&d=identicon&r=PG&f=1", "display_name": "yolin00", "link": "https://stackoverflow.com/users/12362688/yolin00"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1573692316, "creation_date": 1573683177, "last_edit_date": 1573692316, "question_id": 58846421, "link": "https://stackoverflow.com/questions/58846421/problem-in-linked-list-while-using-struct-variable", "title": "Problem in linked list while using struct variable", "body": "<p>Code for linked list using memory allocation:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nstruct node\n{\n    int val;\n    struct node *point;\n\n};\nint main()\n{\n    struct node *head;\n    head=(struct node* )  malloc(sizeof(struct node ));\n    void create(struct node* start);\n    void print(struct node* start);\n\n\n    create(head);\n    print(head);\n\n    return 0;\n}\nvoid create(struct node* start)\n{\n    int test,a=1;\n    struct node* cur;\n    cur=start;\n\n    while(scanf(\"%d\",&amp;test)!=EOF)\n    {       if(a!=1)\n            {\n                cur=cur-&gt;point;\n            }\n            cur-&gt;point=(struct node* )  malloc(sizeof(struct node ));\n            cur-&gt;val=test;\n\n            a++;\n            printf(\"---------------\");\n            printf(\"%d\\n\",cur);\n            printf(\"%d\\n\",cur-&gt;val);\n            printf(\"%d\\n\",cur-&gt;point);\n            printf(\"%d\\n\",a);\n            printf(\"---------------\");\n    }\n    cur-&gt;point=NULL;\n    return;\n}\nvoid print(struct node* start)\n{\n        struct node* cur;\n        cur=start;\n        while(cur!=NULL)\n        {\n            printf(\"%d \",cur-&gt;val);\n            cur=cur-&gt;point;\n        }\n\n        return;\n}\n</code></pre>\n\n<p>Code for linked list using struct variable:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nstruct node\n{\n    int val;\n    struct node *point;\n\n};\nint main()\n{\n    struct node *head,link;\n    head=&amp;link;\n    void create(struct node* start);\n    void print(struct node* start);\n\n\n    create(head);\n    print(head);\n\n    return 0;\n}\nvoid create(struct node* start)\n{\n    int test,a=1;\n    struct node* cur;\n    cur=start;\n\n    while(scanf(\"%d\",&amp;test)!=EOF)\n    {   if(a!=1)\n        {\n            cur=cur-&gt;point;\n\n        }\n        struct node link;\n        cur-&gt;point=&amp;link;\n        cur-&gt;val=test;\n\n        a++;\n\n        printf(\"---------------\");\n        printf(\"%d\\n\",cur);\n        printf(\"%d\\n\",cur-&gt;val);\n        printf(\"%d\\n\",cur-&gt;point);\n        printf(\"%d\\n\",&amp;link);\n        printf(\"%d\\n\",a);\n        printf(\"---------------\");\n    }\n    cur-&gt;point=NULL;\n    return;\n}\nvoid print(struct node* start)\n{\n     struct node* cur;\n     cur=start;\n     while(cur!=NULL)\n     {\n        printf(\"%d \",cur-&gt;val);\n        cur=cur-&gt;point;\n     }\n\n     return;\n} \n</code></pre>\n\n<p>When I use 2nd code it doesn't work correctly. It prints just two values.</p>\n\n<p>In while loop of create() I use struct node type variable declaration.</p>\n\n<p>That's why it should it would declare a new struct node type link variable and a new memory (struct node link) address should be seen in every execution.</p>\n\n<p>So what's the problem?</p>\n\n<p>I am a newbie learning data structure using C. Please explain in simple language. </p>\n"}, {"tags": ["c", "microcontroller"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1573682895, "post_id": 58846265, "comment_id": 103966376, "body": "Did you mis-type it? Aside: there is no &quot;of course&quot; about <code>ui32ADC0Value</code> being <code>0</code>. It is <i>uninitialised</i>."}, {"owner": {"reputation": 21, "user_id": 12369355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5214bd5f9762fae8b9ad6ca8721d2d7b?s=128&d=identicon&r=PG&f=1", "display_name": "Markus", "link": "https://stackoverflow.com/users/12369355/markus"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1573684709, "post_id": 58846265, "comment_id": 103967060, "body": "I checked it twice, this is not the probleme..."}, {"owner": {"reputation": 45031, "user_id": 213136, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b84a36c241e04175fcec402dac43018?s=128&d=identicon&r=PG", "display_name": "Bob Jarvis - Reinstate Monica", "link": "https://stackoverflow.com/users/213136/bob-jarvis-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1573686077, "post_id": 58846265, "comment_id": 103967504, "body": "What happens if you move the definition of <code>ui32ADC0Value</code> outside of <code>main</code>?"}, {"owner": {"reputation": 2741, "user_id": 2036161, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ba65c6994b3945d68ea848b7d8a27253?s=128&d=identicon&r=PG", "display_name": "ventsyv", "link": "https://stackoverflow.com/users/2036161/ventsyv"}, "edited": false, "score": 2, "creation_date": 1573686567, "post_id": 58846265, "comment_id": 103967625, "body": "Try assigning it. Sounds like it&#39;s being optimized away."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1573704848, "post_id": 58846265, "comment_id": 103971685, "body": "I dont use that tool but I assume there is a build for debug option and build for release?  are you building for debug?"}, {"owner": {"reputation": 3478, "user_id": 9061264, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TPing.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/9061264/mike"}, "edited": false, "score": 0, "creation_date": 1573715020, "post_id": 58846265, "comment_id": 103974764, "body": "Does it work if you write <code>uint32_t ui32ADC0Value = 0</code> ?"}], "answers": [{"comments": [{"owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 2, "creation_date": 1573684885, "post_id": 58846629, "comment_id": 103967115, "body": "Another classic trick is to mark the variable in question as <code>volatile</code>, which has the side effect of preventing the optimizer from trying to optimize it away."}, {"owner": {"reputation": 21, "user_id": 12369355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5214bd5f9762fae8b9ad6ca8721d2d7b?s=128&d=identicon&r=PG&f=1", "display_name": "Markus", "link": "https://stackoverflow.com/users/12369355/markus"}, "edited": false, "score": 0, "creation_date": 1573685455, "post_id": 58846629, "comment_id": 103967324, "body": "Optimizations are completely disabled, this does not help. If I mark the variable as volatile, the debugger shows the warning &#39;argument of type &quot;volatile uint32_t *&quot; is incompatible with parameter of type &quot;uint32_t *&quot;&#39;"}], "tags": [], "owner": {"reputation": 200780, "user_id": 116908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54d38793d7a407446999b33b81d607fd?s=128&d=identicon&r=PG", "display_name": "Carl Norum", "link": "https://stackoverflow.com/users/116908/carl-norum"}, "is_accepted": false, "score": 1, "last_activity_date": 1573684240, "creation_date": 1573684240, "answer_id": 58846629, "question_id": 58846265, "link": "https://stackoverflow.com/questions/58846265/identifier-not-found-in-c/58846629#58846629", "title": "&quot;identifier not found&quot; in C", "body": "<p>Optimized code can make it difficult for the debugger to know how to track your variable value. Try debugging the function with optimizations disabled, or watch the disassembly while stepping to track the value at function call points, etc.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 12369355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5214bd5f9762fae8b9ad6ca8721d2d7b?s=128&d=identicon&r=PG&f=1", "display_name": "Markus", "link": "https://stackoverflow.com/users/12369355/markus"}, "is_accepted": true, "score": 0, "last_activity_date": 1573686632, "creation_date": 1573686632, "answer_id": 58847015, "question_id": 58846265, "link": "https://stackoverflow.com/questions/58846265/identifier-not-found-in-c/58847015#58847015", "title": "&quot;identifier not found&quot; in C", "body": "<p>When I define the variable outside of main, it works. Thank you all :)</p>\n"}], "owner": {"reputation": 21, "user_id": 12369355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5214bd5f9762fae8b9ad6ca8721d2d7b?s=128&d=identicon&r=PG&f=1", "display_name": "Markus", "link": "https://stackoverflow.com/users/12369355/markus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 58847015, "answer_count": 2, "score": 0, "last_activity_date": 1573686632, "creation_date": 1573682329, "last_edit_date": 1573685746, "question_id": 58846265, "link": "https://stackoverflow.com/questions/58846265/identifier-not-found-in-c", "title": "&quot;identifier not found&quot; in C", "body": "<p>I'm currently programming a microcontroller (TM4C123GH6PM from Texas Instruments) with Code Composer Studion in C. For testing the code, I want to read out the voltage over a resistance. I have written this code and also checked it with an example by TI (which is pretty close to what I want to do).</p>\n\n<p>In both cases, it is no problem to compile the code. But when I want to watch the expression ui32ADC0Value, Code Composer Studio shows before starting the code ui32ADC0Value = 0 with ui32ADC0Value as type unsigned int, but after starting the code it says \"identifier not found\" and suddenly the type gets unknown.</p>\n\n<p>I can't explain that to me, because as I already said, I tried something quite similar with the code officially published by TI and in both cases the error appeared.</p>\n\n<p>This is my code:</p>\n\n<pre><code>#include&lt;stdint.h&gt;\n#include&lt;stdbool.h&gt;\n#include\"inc/hw_ints.h\"\n#include\"inc/hw_memmap.h\"\n#include\"inc/hw_types.h\"\n#include\"driverlib/gpio.h\"\n#include\"driverlib/sysctl.h\"\n#include\"driverlib/timer.h\"\n#include\"driverlib/interrupt.h\"\n#include&lt;math.h&gt;\n#include&lt;driverlib/adc.h&gt;\n#include&lt;driverlib/timer.h&gt;\n\n\nvoid main(void)\n{\n    uint32_t ui32ADC0Value;\n\n    // set system clock\n    SysCtlClockSet(SYSCTL_SYSDIV_5|SYSCTL_USE_PLL|SYSCTL_OSC_MAIN|SYSCTL_XTAL_16MHZ);\n\n    // activate ADC\n    SysCtlPeripheralEnable(SYSCTL_PERIPH_ADC0);\n    SysCtlPeripheralEnable(SYSCTL_PERIPH_GPIOE);\n\n    // assign ADC function to PIN PE2\n    GPIOPinTypeADC(GPIO_PORTE_BASE,GPIO_PIN_2);\n\n    // configure ADC\n    ADCSequenceConfigure(ADC0_BASE,1,ADC_TRIGGER_PROCESSOR,0); // prozessor as trigger source\n    ADCSequenceStepConfigure(ADC0_BASE,1,0,ADC_CTL_CH1|ADC_CTL_IE| ADC_CTL_END); // scan AI1 /generate interrupt at the end /last step\n    ADCSequenceEnable(ADC0_BASE,1); // activate ADC Sequence 1\n\n    while(1){\n        ADCIntClear(ADC0_BASE,1); // delete maybe existing ADC Interrupts\n        ADCProcessorTrigger(ADC0_BASE,1); // start convertion\n        while(!ADCIntStatus(ADC0_BASE,1,false)){} // wait for end of convertion\n        ADCSequenceDataGet(ADC0_BASE,1,&amp;ui32ADC0Value); // read value\n    }\n}\n</code></pre>\n\n<p>Thank you for helping me in advance.</p>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 2, "creation_date": 1573681828, "post_id": 58846088, "comment_id": 103965949, "body": "The first type is not <code>char*[30]</code> but <code>char (*)[30]</code> (pointer to array, not array of pointers). And it is completely different from <code>char**</code> (pointer to pointer)."}], "answers": [{"tags": [], "owner": {"reputation": 111, "user_id": 10027156, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/d05d3fc5f6205c1b0993f5f0f47d0693?s=128&d=identicon&r=PG", "display_name": "Abel", "link": "https://stackoverflow.com/users/10027156/abel"}, "is_accepted": false, "score": 0, "last_activity_date": 1573705450, "creation_date": 1573705450, "answer_id": 58849353, "question_id": 58846088, "link": "https://stackoverflow.com/questions/58846088/why-the-difference-between-char-and-charx-matter-when-using-the-operator/58849353#58849353", "title": "Why the difference between char* and char[x] matter when using the &amp; operator", "body": "<p>If you look at the man for strsep, it needs the double pointer because it tries to assign the pointer.</p>\n\n<pre><code>\"char *strsep(char **stringp, const char *delim);\n...\nand *stringp is updated to point past the token\"\n</code></pre>\n\n<p>Basically if you have an array, you can't just tell the head of the array to be in a new place.  You can however make a pointer to any element in that array and then change the value of the pointer (thereby making it point to a different element if you so wish).</p>\n"}], "owner": {"reputation": 61, "user_id": 12064738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0bc2d16e88def8f0541b37dc4ce4fc0?s=128&d=identicon&r=PG&f=1", "display_name": "gberthiaume", "link": "https://stackoverflow.com/users/12064738/gberthiaume"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "closed_date": 1573706911, "answer_count": 1, "score": 0, "last_activity_date": 1573711262, "creation_date": 1573681446, "question_id": 58846088, "link": "https://stackoverflow.com/questions/58846088/why-the-difference-between-char-and-charx-matter-when-using-the-operator", "closed_reason": "Duplicate", "title": "Why the difference between char* and char[x] matter when using the &amp; operator", "body": "<p>The following code will segfault.</p>\n\n<pre><code>char* input = \"12.34\"; //&lt; this is only to simplify the example.\n\nchar buffer[30] = { 0 };\nmemcpy(buffer, input, strlen(input));\n\nchar* part1 = strsep(&amp;buffer, \".\"); \n</code></pre>\n\n<p>The following code will not.</p>\n\n<pre><code>char* input = \"12.34\"; //&lt; this is only to simplify the example.\n\nchar buffer[30] = { 0 };\nmemcpy(buffer, input, strlen(input));\n\nchar* ptr = buffer; //&lt; Only diff.\nchar* part1 = strsep(&amp;ptr , \".\"); \n</code></pre>\n\n<p>When passed by reference (<code>&amp;</code>) as a function argument, why does the difference between <code>char**</code> and <code>char*[30]</code> matter? </p>\n"}, {"tags": ["c", "networking"], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 2, "last_activity_date": 1573681264, "creation_date": 1573681264, "answer_id": 58846058, "question_id": 58845961, "link": "https://stackoverflow.com/questions/58845961/why-use-union-to-represent-ip-in-in6-addr/58846058#58846058", "title": "Why use union to represent IP in IN6_ADDR", "body": "<p>IPv6 addresses are typically represented as a group of 16-bit values, for example:</p>\n\n<p>2001:0db8:0000:0000:0000:8a2e:0370:7334</p>\n\n<p>The <code>Word</code> member allows you to read these 16 bit words individually instead of reading a single byte at a time.</p>\n"}, {"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 3, "last_activity_date": 1573681287, "creation_date": 1573681287, "answer_id": 58846064, "question_id": 58845961, "link": "https://stackoverflow.com/questions/58845961/why-use-union-to-represent-ip-in-in6-addr/58846064#58846064", "title": "Why use union to represent IP in IN6_ADDR", "body": "<p>IPv6 addresses are generally written in a format that uses 2-byte groups, e.g.</p>\n\n<pre><code>2001:0db8:85a3:0000:0000:8a2e:0370:7334\n</code></pre>\n\n<p>Each of those groups corresponds to an element of the <code>Word</code> array.</p>\n\n<p>But sometimes it's also useful to process each byte of the address. In this case, you would use the <code>Byte</code> array, rather than having to shift and mask elements of <code>Word</code>.</p>\n"}], "owner": {"reputation": 391, "user_id": 12369194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f86b97f6f93d08e13afaea84e4db113f?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Segdewick", "link": "https://stackoverflow.com/users/12369194/robert-segdewick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 1, "accepted_answer_id": 58846064, "answer_count": 2, "score": 4, "last_activity_date": 1573681287, "creation_date": 1573680853, "question_id": 58845961, "link": "https://stackoverflow.com/questions/58845961/why-use-union-to-represent-ip-in-in6-addr", "title": "Why use union to represent IP in IN6_ADDR", "body": "<p>I am learning networking on Windows using C. I came across <code>IN6_ADDR</code> structure that represents an IPv6 address as a union of 2 arrays:</p>\n\n<pre><code>typedef struct in6_addr {\n  union {\n    UCHAR  Byte[16];\n    USHORT Word[8];\n  } u;\n} IN6_ADDR, *PIN6_ADDR, *LPIN6_ADDR;\n</code></pre>\n\n<p>I can't wrap my head around why would someone desire a union of 2 arrays instead of just 1 array. What is the reason for such declaration? Note that both arrays are 128 bits long.</p>\n"}, {"tags": ["c", "linux", "pulseaudio", "dwm"], "comments": [{"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1573682293, "post_id": 58845780, "comment_id": 103966149, "body": "This code exactly works on my system. (debian+xfce)  <a href=\"https://gist.github.com/jasonwhite/1df6ee4b5039358701d2\" rel=\"nofollow noreferrer\">gist.github.com/jasonwhite/1df6ee4b5039358701d2</a>"}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1573682377, "post_id": 58845780, "comment_id": 103966176, "body": "consider before compile install: <code>libpulse-dev</code>library for a debian base: <code>sudo apt install libpulse-dev</code>"}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1573682564, "post_id": 58845780, "comment_id": 103966253, "body": "Change volume with default <code>xfce4-pulseaudio-plugin</code> in my desktop, the code can correctly show the correct volume."}], "owner": {"reputation": 19, "user_id": 6290455, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7RglBlEiaI0/AAAAAAAAAAI/AAAAAAAAA30/JaISLkvL3U4/photo.jpg?sz=128", "display_name": "Anej", "link": "https://stackoverflow.com/users/6290455/anej"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 436, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1573680009, "creation_date": 1573680009, "question_id": 58845780, "link": "https://stackoverflow.com/questions/58845780/how-to-get-pulseaudio-volume-in-c", "title": "How to get pulseaudio volume in C?", "body": "<p>I am writing my own status bar program for suckless dwm and the last thing left on the list is getting volume percentage from default pulseaudio sink. In bash, I have solved this with this pipe: </p>\n\n<p><code>pactl list sinks | awk '$1==\"Volume:\" {print $5}'</code></p>\n\n<p>Is there a good way to do it in C?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 2, "creation_date": 1573680424, "post_id": 58845767, "comment_id": 103965331, "body": "It is not clear what you want. <code>static_cast&lt;unsigned int&gt;(-1)</code> gives a compile-time constant. What could be better than that?.."}, {"owner": {"reputation": 141, "user_id": 9386720, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Singh", "link": "https://stackoverflow.com/users/9386720/singh"}, "reply_to_user": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1573680639, "post_id": 58845767, "comment_id": 103965436, "body": "It&#39;s complicate to explain because for me  that&#39;s the best way but my teacher don&#39;t accept it ... Idk what to do ... he said :  the algorithm is made with the hypothesis that you don&#39;t know about variables... Idk what that means"}, {"owner": {"reputation": 641, "user_id": 11914177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7e85896555130accfbf01698d6be73?s=128&d=identicon&r=PG&f=1", "display_name": "user11914177", "link": "https://stackoverflow.com/users/11914177/user11914177"}, "edited": false, "score": 0, "creation_date": 1573680646, "post_id": 58845767, "comment_id": 103965444, "body": "Do you mean the highest number that can be stored in an unsigned int?"}, {"owner": {"reputation": 141, "user_id": 9386720, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Singh", "link": "https://stackoverflow.com/users/9386720/singh"}, "reply_to_user": {"reputation": 641, "user_id": 11914177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7e85896555130accfbf01698d6be73?s=128&d=identicon&r=PG&f=1", "display_name": "user11914177", "link": "https://stackoverflow.com/users/11914177/user11914177"}, "edited": false, "score": 0, "creation_date": 1573680695, "post_id": 58845767, "comment_id": 103965462, "body": "Yes sir @user11914177"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 3, "creation_date": 1573680866, "post_id": 58845767, "comment_id": 103965523, "body": "<code>~0u</code> is a good value."}, {"owner": {"reputation": 559, "user_id": 12214916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24f96f92d6d7d820a020ca270b198f0a?s=128&d=identicon&r=PG&f=1", "display_name": "alteredinstance", "link": "https://stackoverflow.com/users/12214916/alteredinstance"}, "edited": false, "score": 0, "creation_date": 1573680883, "post_id": 58845767, "comment_id": 103965533, "body": "Try <code>z = ~z;</code> If he doesn&#39;t accept that, he should be fired, lol. Your solution already demonstrates a clear understanding of how unsigned integers work."}, {"owner": {"reputation": 141, "user_id": 9386720, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Singh", "link": "https://stackoverflow.com/users/9386720/singh"}, "reply_to_user": {"reputation": 559, "user_id": 12214916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24f96f92d6d7d820a020ca270b198f0a?s=128&d=identicon&r=PG&f=1", "display_name": "alteredinstance", "link": "https://stackoverflow.com/users/12214916/alteredinstance"}, "edited": false, "score": 0, "creation_date": 1573681001, "post_id": 58845767, "comment_id": 103965583, "body": "@alteredinstance that&#39;s what I think ... He doesn&#39;t even like initializing variable in c like int x = 0 ..."}, {"owner": {"reputation": 559, "user_id": 12214916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24f96f92d6d7d820a020ca270b198f0a?s=128&d=identicon&r=PG&f=1", "display_name": "alteredinstance", "link": "https://stackoverflow.com/users/12214916/alteredinstance"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1573681082, "post_id": 58845767, "comment_id": 103965630, "body": "I&#39;d defer to @Eljay &#39;s answer then, <code>~0u</code> is purely a number with the maximum value of a unsigned int. Or even, as one of the answers says, <code>unsigned int(-1)</code> should work."}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "reply_to_user": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "edited": false, "score": 1, "creation_date": 1573681334, "post_id": 58845767, "comment_id": 103965731, "body": "@Jason, I don&#39;t know about C, but in C++ it is perfectly defined. Unsigned types are 2&#39;s complement already, signed will be 2&#39;s complement in C++20."}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1573681399, "post_id": 58845767, "comment_id": 103965763, "body": "What&#39;s wrong with using a standard header? (I&#39;m guessing that this was a thought experiment given as a learning exercise. If that is the case, you might want to mention that in the question to spare your teacher accusations of being incompetent.)"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1573688533, "post_id": 58845767, "comment_id": 103968101, "body": "@evg : you should not have deleted your answer IMO - it is valid and not at all &quot;like&quot; the solution in the question as Singh suggested.  It is a compile time constant not a runtime calculation - that is fundamentally different."}], "answers": [{"comments": [{"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "reply_to_user": {"reputation": 141, "user_id": 9386720, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Singh", "link": "https://stackoverflow.com/users/9386720/singh"}, "edited": false, "score": 0, "creation_date": 1573680272, "post_id": 58845792, "comment_id": 103965269, "body": "@Singh, then you should clarify your question."}], "tags": [], "owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "is_accepted": false, "score": 0, "last_activity_date": 1573712431, "last_edit_date": 1573712431, "creation_date": 1573680074, "answer_id": 58845792, "question_id": 58845767, "link": "https://stackoverflow.com/questions/58845767/best-algorithm-to-calculate-maximum-value-of-unsigned-int-without-limits-h/58845792#58845792", "title": "Best Algorithm to calculate maximum value of unsigned int without limits.h", "body": "<p><code>(unsigned int)(-1)</code> or <code>static_cast&lt;unsigned int&gt;(-1)</code> are guaranteed to give the maximum value representable by <code>unsigned int</code>. These are compile-time constants.</p>\n"}, {"comments": [{"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 0, "creation_date": 1573681835, "post_id": 58845975, "comment_id": 103965953, "body": "Does, according to <a href=\"https://stackoverflow.com/a/16728392/7151494\">this</a>, this snippet never terminate?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 0, "creation_date": 1573681977, "post_id": 58845975, "comment_id": 103966018, "body": "@Fureeish It does terminate.  Unsigned integer types will wrap around, so eventually <code>i+1</code> will be 0."}, {"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 0, "creation_date": 1573682074, "post_id": 58845975, "comment_id": 103966061, "body": "True, my oversight."}, {"owner": {"reputation": 141, "user_id": 9386720, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Singh", "link": "https://stackoverflow.com/users/9386720/singh"}, "edited": false, "score": 0, "creation_date": 1573682383, "post_id": 58845975, "comment_id": 103966181, "body": "i will accept this answer  , i know this isn&#39;t the best solution but this do what i am looking for (my teacher is looking for)."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 141, "user_id": 9386720, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Singh", "link": "https://stackoverflow.com/users/9386720/singh"}, "edited": false, "score": 0, "creation_date": 1573684900, "post_id": 58845975, "comment_id": 103967124, "body": "@Singh : <i>&quot;this isn&#39;t the best solution</i>&quot; - on the contrary  <code>~0u</code> is exactly the best solution.  In fact I&#39;d disagree with the assertion that <code>-1</code> is the simplest solution - <code>~0u</code> is the simpler, requiring neither implicit or explicit cast or any assumption about 2&#39;s complement representation.  It also demonstrates an understanding of the fundamentals that the naive and unnecessary algorithm does nothing to reinforce."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1573685258, "post_id": 58845975, "comment_id": 103967259, "body": "@Clifford Actually <code>-1</code> is better as it doesn&#39;t depend on the representation while <code>~0</code> does."}, {"owner": {"reputation": 141, "user_id": 9386720, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Singh", "link": "https://stackoverflow.com/users/9386720/singh"}, "reply_to_user": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1573685432, "post_id": 58845975, "comment_id": 103967318, "body": "@Clifford I mean for the while loop"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 141, "user_id": 9386720, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Singh", "link": "https://stackoverflow.com/users/9386720/singh"}, "edited": false, "score": 0, "creation_date": 1573686568, "post_id": 58845975, "comment_id": 103967626, "body": "@Singh : but why would you submit that as the answer, when it demonstrates a complete lack of understanding that <code>~0u</code> exemplifies perfectly?"}, {"owner": {"reputation": 141, "user_id": 9386720, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Singh", "link": "https://stackoverflow.com/users/9386720/singh"}, "reply_to_user": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1573687153, "post_id": 58845975, "comment_id": 103967771, "body": "@Clifford idk if I got your question but my answer was unsigned x = 0; x= x-1; but my teacher doesn&#39;t accepted and said that he wanted something without limits and without as like my solution , Actually I don&#39;t know why.He is strange, he doesn&#39;t even like the initialization of variables like x = 0 ..."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 141, "user_id": 9386720, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Singh", "link": "https://stackoverflow.com/users/9386720/singh"}, "edited": false, "score": 0, "creation_date": 1573688185, "post_id": 58845975, "comment_id": 103968023, "body": "@Singh : Because the initialisation to zero and calculation is unnecessary, you can assign <code>unsigned x = ~0u ;</code> directly.  It is fundamentally different as it generated no code to &quot;calculate&quot; the value - the max is inserted as a literal constant value.  That would be a good reason for him rejecting your answer, and not strange at all.  However he is the one paid to teach you, so perhaps you should ask him!?"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1573688245, "post_id": 58845975, "comment_id": 103968039, "body": "This solution will take rather a long time in the event that <code>unsigned</code> is a 64-bit value!  It is unworkable and unnecessary.  it can be done in N rather than 2^N iterations."}, {"owner": {"reputation": 141, "user_id": 9386720, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Singh", "link": "https://stackoverflow.com/users/9386720/singh"}, "reply_to_user": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1573688420, "post_id": 58845975, "comment_id": 103968077, "body": "@Clifford I tried with ~0u but he wants an algorithm ... Like your answer with for loop"}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 1, "creation_date": 1573689013, "post_id": 58845975, "comment_id": 103968229, "body": "<code>-1</code> is definitely better than <code>~0</code>. The standard guarantees that <code>-1</code> will always give the largest possible value when converted to an unsigned type. <code>~0</code> gives no such guarantee. In fact, it only works when <code>~0</code> happens to produce <code>-1</code> (as a signed number), which then converts to the largest value of a unsigned type."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1573690853, "post_id": 58845975, "comment_id": 103968658, "body": "@JerryCoffin : Fair point.  In a ones-complement system all ones equals <code>-0</code>.  I&#39;d suggest that was an academic rather then practical distinction, but this is an academic question."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1573692151, "post_id": 58845975, "comment_id": 103968959, "body": "@Clifford: It&#39;s a practical distinction as well though--as an unsigned it&#39;ll just become 0, which doesn&#39;t seem to be the desired result."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1573717587, "post_id": 58845975, "comment_id": 103975837, "body": "@JerryCoffin I am not sure what you mean.  My point is that an assumption of two&#39;s complement is not unreasonable."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1573717786, "post_id": 58845975, "comment_id": 103975938, "body": "@Clifford: Fair enough--and yes, anymore 2&#39;s complement is pervasive."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 3, "last_activity_date": 1573680921, "creation_date": 1573680921, "answer_id": 58845975, "question_id": 58845767, "link": "https://stackoverflow.com/questions/58845767/best-algorithm-to-calculate-maximum-value-of-unsigned-int-without-limits-h/58845975#58845975", "title": "Best Algorithm to calculate maximum value of unsigned int without limits.h", "body": "<p>The simplest way to do this is to simply assign -1 to an <code>unsigned int</code>.  You could also assign <code>~0u</code> to it.</p>\n\n<p>If that's not acceptable, while inefficient, you could do something like this:</p>\n\n<pre><code>unsigned int i = 0;\nwhile (i+1 &gt; 0) \n  i++;\nprintf(\"i=%u\\n\", i);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1573681863, "post_id": 58846073, "comment_id": 103965965, "body": "<code>sizeof</code> does not tell you how many value bits are in an <code>unsigned int</code> because there may be padding bits and because there may be more than eight bits in a byte."}, {"owner": {"reputation": 641, "user_id": 11914177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7e85896555130accfbf01698d6be73?s=128&d=identicon&r=PG&f=1", "display_name": "user11914177", "link": "https://stackoverflow.com/users/11914177/user11914177"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1573681959, "post_id": 58846073, "comment_id": 103966006, "body": "Really? More than eight bits in a byte? Just because something extraordinary exists doesn&#39;t mean that there are no general cases!"}, {"owner": {"reputation": 141, "user_id": 9386720, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Singh", "link": "https://stackoverflow.com/users/9386720/singh"}, "edited": false, "score": 1, "creation_date": 1573682185, "post_id": 58846073, "comment_id": 103966108, "body": "tried this but doesnt work maybe im doing something wrong ... unsigned int j = 0 ;     j = 2^(sizeof(unsigned int)*8)-1;     printf(&quot;j = %u\\n&quot;,j);"}, {"owner": {"reputation": 641, "user_id": 11914177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7e85896555130accfbf01698d6be73?s=128&d=identicon&r=PG&f=1", "display_name": "user11914177", "link": "https://stackoverflow.com/users/11914177/user11914177"}, "edited": false, "score": 0, "creation_date": 1573682477, "post_id": 58846073, "comment_id": 103966222, "body": "Oh sorry, so in C the <code>^</code> operator means xor, but in math, like I intended to use it means 2 to the power of sizeof... so you would need <code>pow(2, sizeof...)</code>"}, {"owner": {"reputation": 141, "user_id": 9386720, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Singh", "link": "https://stackoverflow.com/users/9386720/singh"}, "edited": false, "score": 1, "creation_date": 1573682699, "post_id": 58846073, "comment_id": 103966300, "body": "@user11914177 oh I forget about it ahha , my bad anyway thanks"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1573685208, "post_id": 58846073, "comment_id": 103967249, "body": "@user11914177 - yest really, and not at all extraordinary.  TI C2000 series microcontrollers for example."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1573686107, "post_id": 58846073, "comment_id": 103967513, "body": "The question clearly states the type in question is <code>unsigned int</code> so the discussion of signed types is irrelevant.  Your answer does not calculate the maximum value in a manner that can be coded.  Your comment regarding <code>pow()</code> does not provide a solution because in the event that <code>sizeof(double) == sizeof(int)</code>, then <code>INT_MAX</code> will not be representable by the return type of <code>pow()</code>.  So your &quot;quite easy&quot; is both rather complicated, unworkable and really not as easy as the obvious <code>~0u</code>."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1573686269, "post_id": 58846073, "comment_id": 103967565, "body": "Since your exponential expressions are not in the language in question, the use of code tags/markup should be avoided - changed to &lt;sup&gt;...&lt;/sup&gt; HTML tags."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1573686475, "post_id": 58846073, "comment_id": 103967602, "body": "Regarding the width of a <code>char</code>, that is defined in limits.h as <code>CHAR_BIT</code> - but limits.h is not allowed."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1573688658, "post_id": 58846073, "comment_id": 103968138, "body": "Yes, really. This is an academic question\u2014that is the reason for the constraint of not using <code>&lt;limits.h&gt;</code>, and a comment confirms it was posed by a teacher. That means the answer should be based on properties of the C standard, not on common implementations, and hence you should not assume either the lack of padding bits nor the number of bits in a byte."}], "tags": [], "owner": {"reputation": 641, "user_id": 11914177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7e85896555130accfbf01698d6be73?s=128&d=identicon&r=PG&f=1", "display_name": "user11914177", "link": "https://stackoverflow.com/users/11914177/user11914177"}, "is_accepted": false, "score": -1, "last_activity_date": 1573681376, "creation_date": 1573681376, "answer_id": 58846073, "question_id": 58845767, "link": "https://stackoverflow.com/questions/58845767/best-algorithm-to-calculate-maximum-value-of-unsigned-int-without-limits-h/58846073#58846073", "title": "Best Algorithm to calculate maximum value of unsigned int without limits.h", "body": "<p>So that is quite easy, C and C++ has the function <code>sizeof</code>. This will return the number of bytes a variable of this type needs. So for example on my system </p>\n\n<p><code>sizeof(int)</code> will return 4. So 4 bytes are needed to store a <code>int</code> value.</p>\n\n<p>Now to calculate the highest number that can be fit in this variable you first need to make sure if the variable is <code>signed</code> or <code>unsigned</code>. </p>\n\n<p>Why? A signed variable (meaning it also can store negative values) uses the first bit of its memory to indicate if it is positive or negative. </p>\n\n<p>As the name suggest, a <code>unsigned int</code> is <code>unsigned</code>. So your calculation will look like this:\n<code>2^(sizeof(unsigned int) * 8) - 1</code>. </p>\n\n<p>Why? <code>sizeof</code> return the number of bytes the variable needs, but this calculation only works with bits. Because <code>1 Byte = 8 Bit</code> you have to multiply by 8. \nWhy the - 1? Your computer starts counting with 0 not with 1.</p>\n\n<p>If you want to calculate the highest number storable in a signed variable you calculate like this:\n<code>2^(sizeof(int) * 8 - 1) - 1</code>. </p>\n\n<p>But this is only half, your signed variable stores from <code>-some amount to +some amount</code> right? So <code>2^(sizeof(int) * 8 - 1) - 1</code> is your upper bound and <code>-2^(sizeof(int) * 8 - 1) + 1</code> is your lower bound.</p>\n"}, {"comments": [{"owner": {"reputation": 141, "user_id": 9386720, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Singh", "link": "https://stackoverflow.com/users/9386720/singh"}, "edited": false, "score": 0, "creation_date": 1573688454, "post_id": 58847162, "comment_id": 103968085, "body": "Can you explain me &lt;&lt;=1 and 1,b"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 141, "user_id": 9386720, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Singh", "link": "https://stackoverflow.com/users/9386720/singh"}, "edited": false, "score": 0, "creation_date": 1573689310, "post_id": 58847162, "comment_id": 103968312, "body": "Funny, I thought I&#39;d edited that.  Now corrected.  <code>&lt;&lt;=</code> is <i>shift-right-and-assign</i>.  <code>b &lt;&lt;=  1</code> is the same as <code>b = b &lt;&lt; 1</code>. it moves all the bits right by 1.   <code>z = (z &lt;&lt; 1) | 1</code> shifts s right by 1 then sets the vacated LSB to 1 - filling z with 1&#39;s one bit at a time.  the comma-operator, is simply a way of combining several independent sub-expressions where only a single expression is otherwise valid.  It is deliberately terse code.  I&#39;ll add a simplified expansion."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 141, "user_id": 9386720, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Singh", "link": "https://stackoverflow.com/users/9386720/singh"}, "edited": false, "score": 0, "creation_date": 1573691429, "post_id": 58847162, "comment_id": 103968799, "body": "Note @JerryCoffin&#39;s comment of <code>~0</code> vs <code>(unsigned)-1</code>.  The former assumes a 2&#39;s complement system (only <i>almost</i> universally true - but probably true for any hardware you are likely to ever be coding in C on).  That said the bit shift method makes the same assumption, but at least it will finish in a reasonable time!"}], "tags": [], "owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "is_accepted": false, "score": 1, "last_activity_date": 1573690331, "last_edit_date": 1573690331, "creation_date": 1573687716, "answer_id": 58847162, "question_id": 58845767, "link": "https://stackoverflow.com/questions/58845767/best-algorithm-to-calculate-maximum-value-of-unsigned-int-without-limits-h/58847162#58847162", "title": "Best Algorithm to calculate maximum value of unsigned int without limits.h", "body": "<p>Your <code>z = z - 1</code> determines the value at run-time arithmetically.  It can be determined as a compile time constant without implicit or explicit casts:</p>\n\n<pre><code>unsigned int z = ~0u ;\n</code></pre>\n\n<p>That will be what your tutor is looking for if he has any credibility.</p>\n\n<p>Otherwise if you really <em>must</em> provide an \"algorithim\" to get a grade in a clearly flawed assignment, then;</p>\n\n<pre><code>unsigned z = 1 ;\nfor( unsigned b = 1; \n     b != 0; \n     z = (z &lt;&lt; 1) | 1, b &lt;&lt;= 1 ) ; \n\nprintf( \"z = %u\\n\", z ) ;\n</code></pre>\n\n<p>That is a somewhat terse way of writing:</p>\n\n<pre><code>unsigned z = 1 ;       // Initial set LSB of max-int to 1\nfor( unsigned b = 1;   // \"Walk\" a 1 through each bit of an unsigned\n     b != 0;           // until the 1 falls of the end\n     b &lt;&lt;= 1 )         // move the 1 right\n{\n     z = (z &lt;&lt; 1) | 1 ; // shift max-int right and set LSB to 1\n} \n</code></pre>\n\n<p>Another alternative:</p>\n\n<pre><code>unsigned z = 1 ;\nunsigned p = 0 ;\nwhile( z != p )\n{\n    z = (z &lt;&lt; 1) | 1 ;\n    p = (p &lt;&lt; 1) | 1 ;\n}\n</code></pre>\n\n<p>In this solution <code>p</code> has one fewer bits than <code>z</code> until both are \"all ones\" when they are equal.</p>\n\n<p>The only possible advantage of these loop methods is that by adding a counter you can simultaneously determine the maximum value and the bit width:</p>\n\n<pre><code>unsigned z = 1 ;\nunsigned bits = 0 ;\nfor( unsigned b = 1; \n     b != 0; \n     z = (z &lt;&lt; 1) | 1, b &lt;&lt;= 1, bits++ ) ; \n\nprintf( \"z = %u %u-bits\\n\", z, bits ) ;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 621, "user_id": 2158599, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/SqPLe.jpg?s=128&g=1", "display_name": "Paul McCarthy", "link": "https://stackoverflow.com/users/2158599/paul-mccarthy"}, "is_accepted": false, "score": 0, "last_activity_date": 1574302297, "creation_date": 1574302297, "answer_id": 58966209, "question_id": 58845767, "link": "https://stackoverflow.com/questions/58845767/best-algorithm-to-calculate-maximum-value-of-unsigned-int-without-limits-h/58966209#58966209", "title": "Best Algorithm to calculate maximum value of unsigned int without limits.h", "body": "<p>I am guessing that this is an academic question based on not knowing the underlying architecture of the computer that a program will run on. E.g. in the 80's we had 8 bit computers, then it moved to 16 bit, then 32 and now 64 bit. (think there may be 128 bit). </p>\n\n<p>The formula below calculates the largest value</p>\n\n<p>int max = pow(2, number of bits assigned to data type) \u2014 1;</p>\n\n<p>e.g. for 8 bits you get 2^8 - 1 = 255</p>\n\n<p>To get the number of bytes available for the unsigned int type use sizeof.\nsizeof is part of the c core language so does not need limits.h</p>\n"}], "owner": {"reputation": 141, "user_id": 9386720, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Singh", "link": "https://stackoverflow.com/users/9386720/singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 342, "favorite_count": 0, "accepted_answer_id": 58845975, "answer_count": 5, "score": 2, "last_activity_date": 1574302297, "creation_date": 1573679950, "last_edit_date": 1573681638, "question_id": 58845767, "link": "https://stackoverflow.com/questions/58845767/best-algorithm-to-calculate-maximum-value-of-unsigned-int-without-limits-h", "title": "Best Algorithm to calculate maximum value of unsigned int without limits.h", "body": "<p>Is there a way to calculate the maximum value representable by <code>unsigned int</code> without using <code>limits.h</code> \n(so no <code>UINT_MAX</code>) or without using</p>\n\n<pre><code>unsigned int z = 0;\nz = z - 1;\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1573678846, "post_id": 58845444, "comment_id": 103964629, "body": "What is <code>conv[i]</code>? Is it a typo? If so, is this your actual code? Without a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">Minimal Reproducible Example</a> it&#39;s not easy to say what is wrong."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1573679088, "post_id": 58845444, "comment_id": 103964732, "body": "Does the file really have quotes around each line?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1573679150, "post_id": 58845444, "comment_id": 103964762, "body": "I&#39;ll bet the file has CRLF line breaks. Use <code>dos2unix</code> to fix it."}, {"owner": {"reputation": 1, "user_id": 12361818, "user_type": "registered", "profile_image": "https://graph.facebook.com/2562696650488563/picture?type=large", "display_name": "Ondrej Masarovi\u010d", "link": "https://stackoverflow.com/users/12361818/ondrej-masarovi%c4%8d"}, "edited": false, "score": 0, "creation_date": 1573679258, "post_id": 58845444, "comment_id": 103964811, "body": "It&#39;s a snippet of code. The code inbetween doesn&#39;t do anything with the array in question, but I&#39;ll edit the whole thing in, conv[i] is an array of letter converted to numbers and it&#39;s a really ugly function..."}, {"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 0, "creation_date": 1573679456, "post_id": 58845444, "comment_id": 103964908, "body": "I don&#39;t see <code>main</code> here."}], "answers": [{"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": true, "score": 1, "last_activity_date": 1573680557, "creation_date": 1573680557, "answer_id": 58845903, "question_id": 58845444, "link": "https://stackoverflow.com/questions/58845444/array-doesnt-print-the-first-letter-in-it/58845903#58845903", "title": "Array doesn&#39;t print the first letter in it", "body": "<p>I've run the code and <code>John</code> is output as <code>\u00c9ohn</code>. It likely comes from </p>\n\n<pre><code>people[i][j] = conv_people[i][j] + 32;\n</code></pre>\n\n<p>because you never set any values in <code>conv_people[i]</code> except a terminator.</p>\n\n<p>If I add this first line in the loop</p>\n\n<pre><code>strcpy(conv_people[i], people[i]);\n</code></pre>\n\n<p>then is outputs</p>\n\n<pre><code>john\n</code></pre>\n\n<p>with a lower case initial letter.</p>\n\n<p>Aside: it  is safer and convenient to use</p>\n\n<pre><code>people[i][j] = tolower(conv_people[i][j]);\n</code></pre>\n\n<p>which doesn't even need to be tested to see if an uppercase letter was passed.</p>\n"}], "owner": {"reputation": 1, "user_id": 12361818, "user_type": "registered", "profile_image": "https://graph.facebook.com/2562696650488563/picture?type=large", "display_name": "Ondrej Masarovi\u010d", "link": "https://stackoverflow.com/users/12361818/ondrej-masarovi%c4%8d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "closed_date": 1573690236, "accepted_answer_id": 58845903, "answer_count": 1, "score": -2, "last_activity_date": 1573680557, "creation_date": 1573678416, "last_edit_date": 1573679686, "question_id": 58845444, "link": "https://stackoverflow.com/questions/58845444/array-doesnt-print-the-first-letter-in-it", "closed_reason": "Needs details or clarity", "title": "Array doesn&#39;t print the first letter in it", "body": "<p>I have an array formed from a text file imported by <em>stdin</em>.</p>\n\n<p>The text file looks like this:</p>\n\n<pre><code>\"Name\"\n\"Number\"\n\"Name\"\n\"Number\"\n...\n</code></pre>\n\n<p>The entire code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n\n\n\nint main(int argc, char** argv)\n{\n    //number of arguments\n\n    if (argc &gt; 2)\n    {\n        fprintf(stderr, \"Too many arguments\\n\");\n        return 1;\n    }\n\n    //check argument 1\n\n    {\n        if (argc == 2)\n        {\n            unsigned i = 0;\n\n            while (i &lt; strlen(argv[1]))\n            {\n                if ((isdigit(argv[1][i])) == 0)\n                {\n                    fprintf(stderr, \"Enter a number\\n\");\n                    return 1;\n                }\n                i++;\n            }\n        }\n        else\n        {\n            fprintf(stderr, \"argument\\n\");\n            return -1;\n        }\n    }\n\n\n    //find \\n and separate\n\n    int g = 0;\n    int c = 0;\n    char buffer[102];\n    char people[42][102];\n    char numbers[42][102];\n\n    while (fgets(buffer, sizeof buffer, stdin) != NULL)\n    {\n        if (g % 2 == 0)\n        {\n            strcpy(people[c], buffer);\n            //printf(\"%s\", people[c]);\n        }\n\n        if (g % 2 == 1)\n        {\n            strcpy(numbers[c], buffer);\n            c++;\n        }\n        g++;\n\n    }\n\n    //convert and remove \\n\n\n    char conv_people[42][102];\n    for (int i = 0; i &lt; c; i++)\n    {\n        for (unsigned j = 0; j &lt; strlen(people[i]); j++)\n        {\n            if (islower(people[i][j]) == 0 &amp;&amp; people[i][j] != ' ' &amp;&amp; people[i][j] != '.')\n            {\n                if (people[i][j] == '\\n')\n                {\n                    conv_people[i][j] = '\\0';\n                }\n                people[i][j] = conv_people[i][j] + 32;\n            }\n\n        }\n    }\n\n    //covert to numbers\n\n    char conv[42][102];\n    for (int i = 0; i &lt; c; i++)\n    {\n        for (unsigned j = 0; j &lt; strlen(people[i]); j++)\n        {\n            if (conv_people[i][j] == ' ' || conv_people[i][i] == '.' || conv_people[i][i] == '\\n' || conv_people[i][i] == '\\0')\n            {\n                conv[i][j] = '0';\n            }\n            if (conv_people[i][j] == 'a' || conv_people[i][j] == 'b' || conv_people[i][j] == 'c')\n            {\n                conv[i][j] = '2';\n            }\n            if (conv_people[i][j] == 'd' || conv_people[i][j] == 'e' || conv_people[i][j] == 'f')\n            {\n                conv[i][j] = '3';\n            }\n            if (conv_people[i][j] == 'g' || conv_people[i][j] == 'h' || conv_people[i][j] == 'i')\n            {\n                conv[i][j] = '4';\n            }\n            if (conv_people[i][j] == 'j' || conv_people[i][j] == 'k' || conv_people[i][j] == 'l')\n            {\n                conv[i][j] = '5';\n            }\n            if (conv_people[i][j] == 'm' || conv_people[i][j] == 'n' || conv_people[i][j] == 'o')\n            {\n                conv[i][j] = '6';\n            }\n            if (conv_people[i][j] == 'p' || conv_people[i][j] == 'q' || conv_people[i][j] == 'r' || conv_people[i][j] == 's')\n            {\n                conv[i][j] = '7';\n            }\n            if (conv_people[i][j] == 't' || conv_people[i][j] == 'u' || conv_people[i][j] == 'v')\n            {\n                conv[i][j] = '8';\n            }\n            if (conv_people[i][j] == 'w' || conv_people[i][j] == 'x' || conv_people[i][j] == 'y' || conv_people[i][j] == 'z')\n            {\n                conv[i][j] = '9';\n            }\n        }\n    }\n\n    //compare\n\n    int i = 0;\n    while (i &lt; c)\n    {\n        if (strstr(conv[i], argv[1]) != NULL)\n            printf(\"%s, %s\", people[i], numbers[i]);\n        if (strstr(numbers[i], argv[1]) != NULL)\n            printf(\"%s, %s\", people[i], numbers[i]);\n        i++;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>The program takes a list of people and their phone numbers and searches it using argv[1]\nThe output always omits the first capital letter in each word\nSo if the file contains a name like: Barrack Obama\nthe program returns arrack bama\nThe numbers and converted names are working fine</p>\n\n<p>I didn't want to post the whole thing because it's extremely ugly.</p>\n"}, {"tags": ["c", "pointers", "fgets"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 4, "creation_date": 1573677429, "post_id": 58845214, "comment_id": 103964045, "body": "You must allocate some memory for <code>char *buf;</code> in <code>main</code>, because you pass the available size. Use <code>malloc</code>."}, {"owner": {"reputation": 112977, "user_id": 390278, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/84715fec547362389d02f5be0ed12814?s=128&d=identicon&r=PG", "display_name": "Jeff Mercado", "link": "https://stackoverflow.com/users/390278/jeff-mercado"}, "edited": false, "score": 2, "creation_date": 1573677430, "post_id": 58845214, "comment_id": 103964046, "body": "<code>buf</code> never got initialized"}, {"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1573677464, "post_id": 58845214, "comment_id": 103964054, "body": "Why isn&#39;t <code>buf</code> pointing at anything?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 112977, "user_id": 390278, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/84715fec547362389d02f5be0ed12814?s=128&d=identicon&r=PG", "display_name": "Jeff Mercado", "link": "https://stackoverflow.com/users/390278/jeff-mercado"}, "edited": false, "score": 1, "creation_date": 1573677473, "post_id": 58845214, "comment_id": 103964056, "body": "@JeffMercado it needs more than initialising. It needs to point to a valid buffer."}, {"owner": {"reputation": 112977, "user_id": 390278, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/84715fec547362389d02f5be0ed12814?s=128&d=identicon&r=PG", "display_name": "Jeff Mercado", "link": "https://stackoverflow.com/users/390278/jeff-mercado"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1573677716, "post_id": 58845214, "comment_id": 103964160, "body": "@WeatherVane clearly, a lot of things could be done about this"}], "answers": [{"tags": [], "owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "is_accepted": false, "score": 1, "last_activity_date": 1573677715, "creation_date": 1573677715, "answer_id": 58845310, "question_id": 58845214, "link": "https://stackoverflow.com/questions/58845214/why-do-i-get-segmentation-fault-core-dumped/58845310#58845310", "title": "Why do I get &#39;Segmentation fault (core dumped)&#39;?", "body": "<p>The simplest thing you can do is change the following:</p>\n\n<pre><code>char buf[1024];\np = read_line(buf, sizeof(buf));\n</code></pre>\n\n<p>As an alternative, you can do the following:</p>\n\n<pre><code>char *buf;\np = read_line(&amp;buf, 1024);\n\nchar *read_line(char **buf, size_t sz)\n{\n    *buf = malloc(sz);\n    ...\n}\n</code></pre>\n\n<p>If you use this method, don't forget to <code>free</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 59348, "user_id": 522663, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OKOEw.png?s=128&g=1", "display_name": "Jonathan Wood", "link": "https://stackoverflow.com/users/522663/jonathan-wood"}, "is_accepted": true, "score": 3, "last_activity_date": 1573707780, "last_edit_date": 1573707780, "creation_date": 1573677785, "answer_id": 58845323, "question_id": 58845214, "link": "https://stackoverflow.com/questions/58845214/why-do-i-get-segmentation-fault-core-dumped/58845323#58845323", "title": "Why do I get &#39;Segmentation fault (core dumped)&#39;?", "body": "<pre><code>char *buf;\n</code></pre>\n\n<p>You've declared a pointer to a <code>char</code> here, but have not initialized it. Therefore, it's value is whatever was on the stack when your function is called.</p>\n\n<p>When you attempt to access the memory it points to, which is some random memory address, that's almost certainly going to be an illegal memory access.</p>\n\n<p>Either use <code>malloc()</code> to allocate some memory to point to (don't forget <code>free()</code>), or set the variable to the address of another variable.</p>\n"}], "owner": {"reputation": 195, "user_id": 8902744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea2b2c747d0bebd8b2b714961e356a60?s=128&d=identicon&r=PG&f=1", "display_name": "Jake Jackson", "link": "https://stackoverflow.com/users/8902744/jake-jackson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 1, "accepted_answer_id": 58845323, "answer_count": 2, "score": 0, "last_activity_date": 1573707780, "creation_date": 1573677294, "last_edit_date": 1573677419, "question_id": 58845214, "link": "https://stackoverflow.com/questions/58845214/why-do-i-get-segmentation-fault-core-dumped", "title": "Why do I get &#39;Segmentation fault (core dumped)&#39;?", "body": "<p>I am making a program that has the user enter in a line of text, and the program then prints it back to them. They way I have done it - more specifically with the <code>char *read_line()</code> method - is in a way I have to for my homework.</p>\n\n<p>When the user enters in something (such as their name) and presses enter, it just says, 'Segmentation fault (core dumped)' and I don't know why.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nchar *read_line(char *buf, size_t sz)  {\n    if (fgets(buf, sz, stdin) &amp;&amp; buf[0] != '\\n' ) \n    {\n        return buf;\n    }\n    else\n    {\n        return NULL;\n    }\n}\n\nint main(int argc, char** argv) {\n    char *buf;\n    char *p;\n\n    p = read_line(buf, 1024);\n\n    if (p != NULL) {\n        fputs(p, stdout);\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "function", "linux-kernel", "arguments"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 1, "creation_date": 1573681596, "post_id": 58844946, "comment_id": 103965842, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/58839420/linux-kernel-threads-how-to-pass-the-linux-module-write-function-as-the-functi\">Linux Kernel Threads : How to pass the Linux module write function as the function that the thread has to execute?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 10815116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b1a40de9b92a9ef69c759266baec2b3?s=128&d=identicon&r=PG&f=1", "display_name": "vasilevnikitad", "link": "https://stackoverflow.com/users/10815116/vasilevnikitad"}, "is_accepted": true, "score": 1, "last_activity_date": 1573676959, "creation_date": 1573676959, "answer_id": 58845122, "question_id": 58844946, "link": "https://stackoverflow.com/questions/58844946/how-to-call-a-function-with-its-arguments-from-another-function/58845122#58845122", "title": "How to call a function with its arguments from another function?", "body": "<p>The simplest way to do it, is to use additional struct.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>struct exr_write_args_s {\n    struct file *pfile;\n    const char __user *buffer;\n    size_t length;\n    loff_t *offset;\n};\n\nint exer_write_in_thread(void *data) {\n\n    struct exr_write_args_s *const args = data;\n    exer_write(args-&gt;pfile, args-&gt;buffer, args-&gt;length, args-&gt;offset);\n    return 0;\n}\n\nint exer_simple_module_init(void) {\n...\n    struct exr_write_args_s args = {0/*FIXME: init it!*/};\n...\n    thread1 = kthread_create(exer_write_in_thread, &amp;args, our_thread);\n...\n}\n</code></pre>\n"}], "owner": {"reputation": 375, "user_id": 11958500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/808134f06cedf9957a27a924d1589f3a?s=128&d=identicon&r=PG&f=1", "display_name": "gaston", "link": "https://stackoverflow.com/users/11958500/gaston"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 58845122, "answer_count": 1, "score": -1, "last_activity_date": 1573676959, "creation_date": 1573676260, "last_edit_date": 1573676775, "question_id": 58844946, "link": "https://stackoverflow.com/questions/58844946/how-to-call-a-function-with-its-arguments-from-another-function", "title": "How to call a function with its arguments from another function?", "body": "<p>I am developing Linux Kernel Module. I want to call the module <code>exer_write</code> function :</p>\n\n<pre><code>exer_write(struct file *pfile, const char __user *buffer, size_t length, loff_t *offset)\n</code></pre>\n\n<p>from another function named <code>exer_write_in_thread</code> :</p>\n\n<pre><code>int exer_write_in_thread(void *data)\n</code></pre>\n\n<p>This is the module :</p>\n\n<pre><code>#include &lt;linux/init.h&gt;\n#include &lt;linux/module.h&gt;\n#include &lt;linux/fs.h&gt;\n#include &lt;linux/device.h&gt;  \n#include &lt;linux/kernel.h&gt;\n#include &lt;linux/uaccess.h&gt;\n#include &lt;linux/kthread.h&gt;\n\nMODULE_LICENSE(\"GPL\");      \nMODULE_AUTHOR(\"Gaston\");  \nMODULE_DESCRIPTION(\"A simple Linux char driver\"); \nMODULE_VERSION(\"0.1\"); \n\n#define MAX 256\nstatic struct task_struct *thread1;\nstatic char message[MAX] =\"\";      ///&lt; Memory for the string that is passed from userspace\n\n\nssize_t exer_open(struct inode *pinode, struct file *pfile) {\n\n    printk(KERN_INFO \"Device has been opened\\n\");\n    return 0;\n}\n\n\nssize_t exer_write(struct file *pfile, const char __user *buffer, size_t length, loff_t *offset) {\n\n    if (length &gt; MAX)\n        return -EINVAL;\n\n    printk(\"Thread_fuction is running ...\\n\");\n\n    if (copy_from_user(message, buffer, length) != 0)\n        return -EFAULT;\n\n    printk(KERN_INFO \"Received this message : %s ,from the user\\n\", message);\n\n    return 0;\n\n}   \n\n\nint exer_write_in_thread(void *data) {\n    exer_write(struct file *pfile, const char __user *buffer, size_t length, loff_t *offset);\n    return 0;\n}\n\n\nstruct file_operations exer_file_operations = { \n    .owner = THIS_MODULE,\n    .open = exer_open,\n    .write = exer_write,    \n};\n\n\nint exer_simple_module_init(void) {\n\n    char our_thread[8]=\"thread1\";\n\n    printk(KERN_INFO \"Initializing the LKM\\n\");\n    register_chrdev(240, \"Simple Char Drv\", &amp;exer_file_operations);\n\n    thread1 = kthread_create(exer_write_in_thread,NULL,our_thread);\n    if((thread1))\n            {\n                printk(KERN_INFO \"Thread is created\");\n                wake_up_process(thread1);\n            }\n\n    return 0;\n}\n\n\n\nvoid exer_simple_module_exit(void) {\n\n    int ret;    \n\n    unregister_chrdev(240, \"Simple Char Drv\");\n\n    ret = kthread_stop(thread1);\n    if(!ret)\n        printk(KERN_INFO \"Thread stopped\");\n}\n\n\nmodule_init(exer_simple_module_init);\nmodule_exit(exer_simple_module_exit);\n</code></pre>\n\n<p>My problem here is with the arguments of the called function <code>exer_write</code>.</p>\n\n<p>How could these arguments be called with its function from <code>exer_write_in_thread</code> ?</p>\n"}, {"tags": ["c", "linux", "linux-kernel", "virtualization", "hypervisor"], "answers": [{"tags": [], "owner": {"reputation": 9461, "user_id": 8422330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c0f90445d03447c587d1e595d531f69?s=128&d=identicon&r=PG&f=1", "display_name": "prl", "link": "https://stackoverflow.com/users/8422330/prl"}, "is_accepted": true, "score": 1, "last_activity_date": 1573682874, "creation_date": 1573682874, "answer_id": 58846370, "question_id": 58844495, "link": "https://stackoverflow.com/questions/58844495/cant-call-vmxon-on-more-than-1-processor/58846370#58846370", "title": "can&#39;t call VMXON on more than 1 processor", "body": "<p><code>for_each_possible_cpu</code> simply iterates over the available CPUs; it doesn\u2019t change execution to run on each CPU in turn. The entire loop runs on a single CPU.</p>\n\n<p>Because of this, you are trying to execute <code>vmxon</code> repeatedly on the same CPU, which is why it is failing.</p>\n"}], "owner": {"reputation": 103, "user_id": 10013007, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-a--Yg6NSJ_s/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq0EUc440l43DVYt1hkQbtc7qdK84A/mo/photo.jpg?sz=128", "display_name": "Paul", "link": "https://stackoverflow.com/users/10013007/paul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "accepted_answer_id": 58846370, "answer_count": 1, "score": 1, "last_activity_date": 1573682874, "creation_date": 1573674330, "last_edit_date": 1573677508, "question_id": 58844495, "link": "https://stackoverflow.com/questions/58844495/cant-call-vmxon-on-more-than-1-processor", "title": "can&#39;t call VMXON on more than 1 processor", "body": "<p>I'm trying to build my own hypervisor for Linux (5.0.x kernel) on an Intel chip and I'm running into an odd problem.\nWhenever I try to execute VMXON on more than one processor, it fails.\nI made sure that VMX is enabled, that I allocated an aligned page and wrote VMCS REV ID into the VMXON region, but I'm not sure where the issue is. </p>\n\n<p>This is my code:</p>\n\n<p>vmx.c:</p>\n\n<pre><code>#include \"vmx.h\"\n\ntypedef struct vmstate {\n    bool vmx_enabled;\n    void *vmxon_region;\n    phys_addr_t vmxon_physical;\n    void *vmcs_region;\n    phys_addr_t vmcs_physical;\n} vmstate;\n\nstatic DEFINE_PER_CPU(vmstate*, cpu_vms);\n\nstatic inline int VMXON(phys_addr_t phys){\n    uint8_t ret;\n    // TODO: Signal VMX to PT, to avoid PT crashes (Processor Trace)\n    __asm__ __volatile__ (\n        \"vmxon %[pa]; setna %[ret]\"\n        : [ret]\"=rm\"(ret)\n        : [pa]\"m\"(phys)\n        : \"cc\", \"memory\"\n    );\n    return ret;\n}\n\nstatic inline void VMXOFF(void){\n    __asm__ __volatile__(\"vmxoff\" : : : \"cc\");\n}\n\nstatic void enable_vmx_operation_cr(void){\n    // Enable 14th bit in CR4\n    __write_cr4(__read_cr4() | 0x2000);\n}\n\nstatic void disable_vmx_operation_cr(void){\n    __write_cr4(__read_cr4() &amp; ~(0x2000));\n}\n\nstatic vmstate *create_vmstate(void){\n    vmstate *vms = kzalloc(sizeof(vmstate), GFP_KERNEL);\n    vms-&gt;vmx_enabled = false;\n    return vms;\n}\n\nstatic void alloc_vmxon_region(vmstate *vms){\n    // TODO: respect physical width as set by the IA32_VMX_BASIC[48] bit for 32bit support\n    uint32_t vmcs_revid = 0;\n    uint32_t hi = 0;\n\n    void *vmxon_region = kmalloc(4096, GFP_KERNEL);\n\n    rdmsr_safe(MSR_IA32_VMX_BASIC, &amp;vmcs_revid, &amp;hi);\n    memcpy(vmxon_region, &amp;vmcs_revid, 4);\n\n    vms-&gt;vmxon_region = vmxon_region;\n    vms-&gt;vmxon_physical = virt_to_phys(vmxon_region);\n}\n\nstatic void teardown_vmstate(vmstate *vms){\n    if(vms-&gt;vmxon_region)\n        kfree(vms-&gt;vmxon_region);\n\n}\n\nvoid vmx_teardown(void){\n    int i;\n    vmstate* vms;\n    for_each_possible_cpu(i){\n        vms = per_cpu(cpu_vms, i);\n\n        if(vms-&gt;vmx_enabled == true) {\n            VMXOFF();\n            vms-&gt;vmx_enabled = false;\n        }\n        disable_vmx_operation_cr();\n        teardown_vmstate(vms);\n        kfree(vms);\n    }\n}\n\nint vmx_setup(void){\n    int i;\n    vmstate* vms;\n    printk(KERN_INFO \"NUM CPUS: %d\", num_possible_cpus());\n\n    for_each_possible_cpu(i) {\n        // Allocate vmstate for every processor\n        per_cpu(cpu_vms, i) = create_vmstate();\n        vms = per_cpu(cpu_vms, i);\n\n        alloc_vmxon_region(vms);\n\n        enable_vmx_operation_cr();\n        if(VMXON(vms-&gt;vmxon_physical)){\n            printk(KERN_ALERT \"VMXON operation failed!\");\n            vms-&gt;vmx_enabled = false;   \n        }\n        else\n            vms-&gt;vmx_enabled = true;\n    }\n    for_each_possible_cpu(i){\n        vms = per_cpu(cpu_vms, i);\n        if(vms-&gt;vmx_enabled == false) {\n            printk(KERN_ALERT \"Tearing down after VMXON fail!\");\n            vmx_teardown();\n            return -1;\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>vmx_setup is called by a device open file operation:</p>\n\n<pre><code>static int hyper_dev_open(struct inode* inode, struct file *filep){\n        int err;\n        printk(KERN_INFO \"Enabling VMX operation!\\n\");\n        if((err = vmx_setup()))\n                return err;\n        return 0;\n}\n</code></pre>\n\n<p>When I execute VMXON on another processor, the carry flag is set to 1, zero flag is 0.\nThe driver works however if I add a VMXOFF() right after VMXON() so two VMX operations aren't enabled in parallel.</p>\n\n<p>Any suggestions would help :)</p>\n"}, {"tags": ["c", "memory-management"], "comments": [{"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1573674813, "post_id": 58844420, "comment_id": 103962902, "body": "First you need to define what you mean by &quot;memory usage&quot;.  Physical RAM only, or ???"}, {"owner": {"reputation": 4108, "user_id": 1149924, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aaf5827d09d4eb31df2e3e25d1de9bd8?s=128&d=identicon&r=PG", "display_name": "kkm", "link": "https://stackoverflow.com/users/1149924/kkm"}, "edited": false, "score": 2, "creation_date": 1573674942, "post_id": 58844420, "comment_id": 103962969, "body": "\u201cthere are already stack overflow questions on this, and while I&#39;ve read a few\u201d -- it would certainly be helpful to link them to the question. And, in general, as you already discovered, there is no single \u201cmemory usage\u201d figure in a modern OS. Read-only ELF sections may be mapped to the same physical RAM, R/W data may be swapped out. If you could state your <i>ultimate</i> problem better, i.e. <i>why</i> do you need the number, that would be helpful: it would show <i>which</i> of the \u201cmemory usages\u201d is the right one for your use case."}, {"owner": {"reputation": 4150, "user_id": 7412986, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xOv4e.png?s=128&g=1", "display_name": "AlexP", "link": "https://stackoverflow.com/users/7412986/alexp"}, "edited": false, "score": 0, "creation_date": 1573675310, "post_id": 58844420, "comment_id": 103963140, "body": "You should begin by actually specifying what you mean the &quot;memory usage of a process&quot;. Once you have a precise definition, finding out the corresponding value will become easy and you will wonder what was it that you thought was hard."}, {"owner": {"reputation": 167, "user_id": 8913611, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/99846733bc45c981c7d1e50b765da58c?s=128&d=identicon&r=PG&f=1", "display_name": "B.M. Corwen", "link": "https://stackoverflow.com/users/8913611/b-m-corwen"}, "reply_to_user": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1573675883, "post_id": 58844420, "comment_id": 103963381, "body": "@Chris Dodd @kkm @AlexP I believe what is being asked of me is how much memory is being used by a process, when I check on said process&#39;s statistics in the <code>&#47;proc&#47;[pid]&#47;status</code> folder. I&#39;ve also linked the stack overflow questions I looked at previously (edited above), but I mostly looked at the two other links I listed above."}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1573699764, "post_id": 58844420, "comment_id": 103970588, "body": "Those links tell you how to see how much of different classes of memory you are using.  So the question becomes, which classes of memory do you care about?"}], "owner": {"reputation": 167, "user_id": 8913611, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/99846733bc45c981c7d1e50b765da58c?s=128&d=identicon&r=PG&f=1", "display_name": "B.M. Corwen", "link": "https://stackoverflow.com/users/8913611/b-m-corwen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 465, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573675493, "creation_date": 1573674019, "last_edit_date": 1573675493, "question_id": 58844420, "link": "https://stackoverflow.com/questions/58844420/how-do-you-calculate-memory-usage-from-the-proc-pid-status-folder-for-a-pro", "title": "How do you calculate memory usage from the &quot;/proc/[pid]/status&quot; folder for a process in C?", "body": "<p>I know there are already stack overflow questions on this, and while I've read a few, I still don't quite understand how to make the calculation for memory usage for a C process.</p>\n\n<p>I read multiple stack overflow questions on the topic: </p>\n\n<p><strong>[1]</strong> <a href=\"https://stackoverflow.com/questions/131303/how-to-measure-actual-memory-usage-of-an-application-or-process\">How to measure actual memory usage of an application or process?</a></p>\n\n<p><strong>[2]</strong> <a href=\"https://stackoverflow.com/questions/1558402/memory-usage-of-current-process-in-c\">Memory usage of current process in C</a></p>\n\n<p><strong>[3]</strong> <a href=\"https://stackoverflow.com/questions/2754237/monitor-memory-usage-of-child-process\">Monitor memory usage of child process</a></p>\n\n<p>I also read these links:</p>\n\n<p><strong>[1]</strong> <a href=\"https://www.quora.com/What-is-the-simplest-and-most-accurate-way-to-measure-the-memory-used-by-a-program-in-a-programming-contest-environment\" rel=\"nofollow noreferrer\">https://www.quora.com/What-is-the-simplest-and-most-accurate-way-to-measure-the-memory-used-by-a-program-in-a-programming-contest-environment</a></p>\n\n<p><strong>[2]</strong> <a href=\"https://locklessinc.com/articles/memory_usage/\" rel=\"nofollow noreferrer\">https://locklessinc.com/articles/memory_usage/</a></p>\n\n<p>From this, I gathered the following points:</p>\n\n<ul>\n<li><p>I can't just use <code>VMSize</code>, as this is is the <strong>total</strong> amount of virtual memory allocated to the process/program. The program may not use all of it. Is this a correct assumption?</p></li>\n<li><p>Since a program/process consists of the stack + heap + shared libraries + code segments, the calculation is <code>VMData (Data + Uninitialized Data + Heap Segments sizes) + VmStk (Stack Segment size)</code>. Am I correct in saying this? Do I also need to add <code>VmExe (Text Segment size)</code> and/or <code>VmLib (Shared Library usage size)</code>?</p></li>\n<li><p>A couple of suggestions I found somewhere was to use <code>getrusage()</code> (<a href=\"https://linux.die.net/man/2/getrusage\" rel=\"nofollow noreferrer\">https://linux.die.net/man/2/getrusage</a>), or to use <code>VmRSS</code> (which, apparently, is how much memory in RAM is occupied by the process). Are these also viable suggestions? I've noticed that using <code>/proc/[pid]/status</code> is more commonly used. Why use the latter suggestion over the former ones?</p></li>\n</ul>\n\n<p>Edit: This is for a program I am writing that runs <code>fork()</code> and <code>exec()</code> to run multiple processes. I am just suppose to report memory usage statistics of each process.</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["python", "c", "gcc", "buffer-overflow"], "comments": [{"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 2, "creation_date": 1573672473, "post_id": 58843687, "comment_id": 103961827, "body": "The canary is randomly chosen on process startup, so this technique will only work if you have a chance to make many probes of the same process. Getting it wrong crashes the process, so that may be very hard."}], "owner": {"reputation": 391, "user_id": 12081291, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OhHvy.png?s=128&g=1", "display_name": "BitFriends", "link": "https://stackoverflow.com/users/12081291/bitfriends"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 934, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1573670886, "creation_date": 1573670886, "question_id": 58843687, "link": "https://stackoverflow.com/questions/58843687/how-to-bruteforce-the-stack-canary", "title": "How to bruteforce the stack canary", "body": "<p>gcc implemented a stack protector, to protect programs for buffer overflows. I want to know, if its possible (and if it is how) to exploit this and run a buffer overflow. I created a simple python script, that should bruteforce the canary:</p>\n\n<pre><code>from pwn import *\nimport os\n\ncanary = \"\"\nbyte = 0x00\n\ndef brute():\n    global canary\n    global byte\n    while byte != 0xff:\n        p = process(\"./vuln\")\n        p.sendline(\"A\"*64 + canary + chr(byte))\n        reply=p.recvall()\n        if \"***\" in reply:\n            byte += 1\n        else:\n            canary += chr(byte)\n            byte = 0x00\n            break\n\nbrute()\nbrute()\nbrute()\nbrute()\nprint \"Canary: \\\\x\" + '\\\\x'.join(\"{:02x}\".format(ord(c)) for c in canary)\n</code></pre>\n\n<p>The result was: <code>Canary: \\x0a\\x00\\x00\\x00</code> and thats obviously not the canary.<br>\nThe binary i used to hack:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdio.h&gt;\n\nint main(int argc, char **argv)\n{\n  volatile int modified;\n  char buffer[64];\n\n  modified = 0;\n  gets(buffer);\n\n  if(modified != 0) {\n      printf(\"you have changed the 'modified' variable\\n\");\n  } else {\n      printf(\"Try again?\\n\");\n  }\n}\n\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2323, "user_id": 8350647, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zJNHD.png?s=128&g=1", "display_name": "Nina", "link": "https://stackoverflow.com/users/8350647/nina"}, "edited": false, "score": 0, "creation_date": 1573676828, "post_id": 58843596, "comment_id": 103963786, "body": "You might have to enable the debug output in the registry. I had a similar issue a while back. <a href=\"https://stackoverflow.com/questions/45622094/dbgview-on-vmware-workstation-12-not-capturing-output\" title=\"dbgview on vmware workstation 12 not capturing output\">stackoverflow.com/questions/45622094/&hellip;</a>"}, {"owner": {"reputation": 110, "user_id": 11035201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eef371216ecd2d409c95f4d568137007?s=128&d=identicon&r=PG&f=1", "display_name": "Raicha", "link": "https://stackoverflow.com/users/11035201/raicha"}, "reply_to_user": {"reputation": 2323, "user_id": 8350647, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zJNHD.png?s=128&g=1", "display_name": "Nina", "link": "https://stackoverflow.com/users/8350647/nina"}, "edited": false, "score": 0, "creation_date": 1573707276, "post_id": 58843596, "comment_id": 103972264, "body": "Thanks for the reply, I have already changed that registry value directly from debugger with command: ed nt!Kd_Default_Mask 8 But still no luck"}], "answers": [{"tags": [], "owner": {"reputation": 110, "user_id": 11035201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eef371216ecd2d409c95f4d568137007?s=128&d=identicon&r=PG&f=1", "display_name": "Raicha", "link": "https://stackoverflow.com/users/11035201/raicha"}, "is_accepted": false, "score": 0, "last_activity_date": 1573801063, "creation_date": 1573801063, "answer_id": 58871776, "question_id": 58843596, "link": "https://stackoverflow.com/questions/58843596/windbg-does-not-show-the-dbgprint-messages/58871776#58871776", "title": "WinDBG does not show the DbgPrint messages", "body": "<p>I've fixed this problem already. Solution for that was, after windbg attachment, I need to restart my VM, without turning off debugger and then everything works.</p>\n"}], "owner": {"reputation": 110, "user_id": 11035201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eef371216ecd2d409c95f4d568137007?s=128&d=identicon&r=PG&f=1", "display_name": "Raicha", "link": "https://stackoverflow.com/users/11035201/raicha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 258, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573801063, "creation_date": 1573670532, "last_edit_date": 1573670685, "question_id": 58843596, "link": "https://stackoverflow.com/questions/58843596/windbg-does-not-show-the-dbgprint-messages", "title": "WinDBG does not show the DbgPrint messages", "body": "<p>I got a problem with WinDBG. It won't show the DbgPrint messages. And it is weird because it outputs the new lines, but not the message.</p>\n\n<p><img src=\"https://i.stack.imgur.com/YoHdq.png\" alt=\"Screenshot from WinDBG]\"></p>\n\n<p>Driver, in this case, is very simple:</p>\n\n<pre><code>#include &lt;ntddk.h&gt;\n#include &lt;wdf.h&gt;\n\nVOID Unload(IN PDRIVER_OBJECT DriverObject)\n{\n    DbgPrint(\"Driver Unloaded \\r \\n\");\n}\n\nNTSTATUS DriverEntry(IN PDRIVER_OBJECT DriverObject, IN PUNICODE_STRING RegistryPath)\n{\n    DriverObject-&gt;DriverUnload = Unload;\n    DbgPrint(\"Hello Driver \\r \\n\");\n\n    return STATUS_SUCCESS;\n}\n</code></pre>\n\n<p>I am using the OSR Driver Loader, and it seems to be loading the driver successfully on to the system:</p>\n\n<p><img src=\"https://i.stack.imgur.com/QT38k.png\" alt=\"enter image description here\"></p>\n\n<p>But, no output. Strange</p>\n"}, {"tags": ["c", "gcc", "rhel", "hp-ux", "cc"], "comments": [{"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 1, "creation_date": 1573671601, "post_id": 58843458, "comment_id": 103961452, "body": "Once upon a time, back when we were using <a href=\"https://en.wikipedia.org/wiki/A.out\" rel=\"nofollow noreferrer\">a.out</a> format executables, the answer to this question hinged on what &quot;magic number&quot; your executable had.  There were 0407 executables, 0410, and perhaps a few others.  The old format (0407) had page 0 mapped, meaning that null pointers were accessible.  There were linker options (perhaps the same <code>-z</code> and <code>-Z</code> that HPUX is using, I don&#39;t remember) to say what kind of executable / which magic number you wanted."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 1, "creation_date": 1573671775, "post_id": 58843458, "comment_id": 103961528, "body": "These days, <a href=\"https://en.wikipedia.org/wiki/Executable_and_Linkable_Format\" rel=\"nofollow noreferrer\">ELF</a> has almost completely supplanted a.out.  I can easily imagine that there are different flavors of ELF (or more specifically, option bits in the ELF header) controlling things like whether page 0 should be accessible.  I haven&#39;t had any luck finding any lists of such flavors, though.  (For a.out, the flavors used to be listed either on the exec(2) or a.out(5) man pages, but I haven&#39;t found any modern Linux pages corresponding to those.)"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 1, "creation_date": 1573672491, "post_id": 58843458, "comment_id": 103961840, "body": "I just tried the mmap solution by @mevets at that <a href=\"https://stackoverflow.com/questions/58736028/c-strchr-works-with-null-value-on-hpux-but-segfaults-on-rhel\">other question</a> and it worked for me under Debian.  Did you rule it out because it requires running as root?  (If so I don&#39;t blame you.)"}, {"owner": {"reputation": 87, "user_id": 11907992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d85518ed70c0df3b94509f9ca9778f51?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle", "link": "https://stackoverflow.com/users/11907992/kyle"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1573672604, "post_id": 58843458, "comment_id": 103961893, "body": "@SteveSummit yes this is my followup to that question.  root is an issue and RHEL actually blocks mmap, at least what I&#39;m on.  I should have mentioned that in the question."}, {"owner": {"reputation": 48092, "user_id": 136208, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8a30f566f1b7c9ae44cf245138850ba4?s=128&d=identicon&r=PG", "display_name": "AProgrammer", "link": "https://stackoverflow.com/users/136208/aprogrammer"}, "edited": false, "score": 1, "creation_date": 1573673143, "post_id": 58843458, "comment_id": 103962150, "body": "It is perhaps possible to do what you want with the help of linker scripts. See gnu ld manual for information about them."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 1, "creation_date": 1573673216, "post_id": 58843458, "comment_id": 103962180, "body": "I&#39;m no expert on ELF format, but I&#39;m guessing it would be possible to create an ELF file that, besides all the normal code and data segments it typically sets up today, also created a page of 0&#39;s at address 0.  So it would be possible to have an option to <code>ld</code> to make it do that.  Or it would be possible to write a program to take an ELF file to modify it to add such a segment.  There might even be an off-the-shelf ELF-manipulation tool that could do it. (Or, as AProgrammer wrote while I was writing this, a linker script.)"}], "answers": [{"tags": [], "owner": {"reputation": 1376, "user_id": 2838941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03e39251a55e152152746be25dc9cddf?s=128&d=identicon&r=PG&f=1", "display_name": "fork2execve", "link": "https://stackoverflow.com/users/2838941/fork2execve"}, "is_accepted": false, "score": 0, "last_activity_date": 1587856153, "creation_date": 1587856153, "answer_id": 61433796, "question_id": 58843458, "link": "https://stackoverflow.com/questions/58843458/hp-ux-cc-uses-a-default-setting-to-allow-null-dereferences-is-that-possible-in/61433796#61433796", "title": "HP-UX cc uses a default setting to allow null dereferences, is that possible in gcc with RHEL?", "body": "<p>This is possible by adding some code to your program.</p>\n\n<p>Linux kernels have a <em>minimal mapped address</em> that is generally > 0 to prevent null pointers from going undetected. They control this with system control <code>vm.mmap_min_addr</code> that is generally set to 4096 (32 bit) or 65536 (64 bit). Although it is not advised to do so, you <em>can</em> set this to using</p>\n\n<pre><code>sudo sysctl -w vm.mmap_min_addr=0\n</code></pre>\n\n<p>Or to set it permanently:</p>\n\n<pre><code>echo \"vm.mmap_min_addr=0\" &gt; /etc/sysctl.d/mmap_min_addr.conf\n/sbin/sysctl -p\n</code></pre>\n\n<p>Then you can add an empty memory page at virtual address 0:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/mman.h&gt;\n\nint main(int argc, char **argv) {\n  int *p = NULL;\n  int n;\n\n  printf(\" p = %p\\n\", p);\n\n  printf(\" map = %p\\n\", mmap(NULL, 4096, PROT_READ,\n                             MAP_FIXED | MAP_ANON | MAP_PRIVATE, 0, 0));\n\n  n = *p;\n\n  printf(\"*p = %d\\n\", n);\n\n  return 0;\n}\n</code></pre>\n\n<p>Example runs:</p>\n\n<pre><code>$ ./ref0\np = (nil)\nSegmentation fault (core dumped)\n$ ./ref0 map\np = (nil)\nmap = (nil)\n*p = 0\n</code></pre>\n\n<p><em>References:</em> </p>\n\n<ul>\n<li><a href=\"https://access.redhat.com/articles/20484\" rel=\"nofollow noreferrer\">https://access.redhat.com/articles/20484</a></li>\n<li><a href=\"https://wiki.debian.org/mmap_min_addr\" rel=\"nofollow noreferrer\">https://wiki.debian.org/mmap_min_addr</a></li>\n</ul>\n"}], "owner": {"reputation": 87, "user_id": 11907992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d85518ed70c0df3b94509f9ca9778f51?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle", "link": "https://stackoverflow.com/users/11907992/kyle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1587856153, "creation_date": 1573669933, "last_edit_date": 1573670051, "question_id": 58843458, "link": "https://stackoverflow.com/questions/58843458/hp-ux-cc-uses-a-default-setting-to-allow-null-dereferences-is-that-possible-in", "title": "HP-UX cc uses a default setting to allow null dereferences, is that possible in gcc with RHEL?", "body": "<p>From the HPUX cc, c89 - C compiler man page:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>  -z             Do not bind anything to address zero.  This option\n                 allows runtime detection of null pointers.  See the\n                 note on pointers below.\n\n  -Z             Allow dereferencing of null pointers.  See the note on\n                 pointers below.  The -z and -Z are linker options.  See\n                 ld(1) for more details.\n</code></pre>\n\n<p>Then from <code>ld(1)</code>:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>The default value of the -Z/-z option is -Z.\n</code></pre>\n\n<p>This means that, by default, any C program compiled with this version of cc on HPUX that dereferences a null pointer will read the value as 0 and not segfault.  There is no option for this with gcc or cc on RHEL.  Does anyone know how I would compile a C program with an option like this on RHEL (to allow null dereferece)?  I know this is a terrible coding practice and I will not be using it to create new code.  Thank you.</p>\n"}, {"tags": ["c", "assembly", "arm", "stm32", "keil"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1573669792, "post_id": 58843387, "comment_id": 103960674, "body": "Probably a very private internal function that you should not use yourself."}, {"owner": {"reputation": 33, "user_id": 12368460, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mA7JR9v2ix-w72AUmEpwN2Q3X_108O1slvOKF6M=k-s128", "display_name": "\u0410\u043d\u0434\u0440\u0435\u0439 \u0413\u0438\u043b\u044c", "link": "https://stackoverflow.com/users/12368460/%d0%90%d0%bd%d0%b4%d1%80%d0%b5%d0%b9-%d0%93%d0%b8%d0%bb%d1%8c"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1573670242, "post_id": 58843387, "comment_id": 103960869, "body": "some weeks ago I have seen something like this function in Keil help. It was about &quot;compact versions&quot; of standart C functions, or so... but I do not remember what it was and where exactly I have seen this."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 2, "creation_date": 1573670422, "post_id": 58843387, "comment_id": 103960939, "body": "It has two leading underscores, meaning it&#39;s reserved for the implementation, ie, a private implementation detail. Looking like a mangled version of a standard function name is one clue, and the two leading underscores is another."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1573670918, "post_id": 58843387, "comment_id": 103961156, "body": "If code-size is an issue, almost certainly a function like <code>itoa</code> for int-&gt;string would be smaller and do only what you need, not supporting all the things that full-on sprintf needs to do (including parse a format string, handle field widths and stuff which can be <code>*</code> to take it as another arg, and <code>%n</code> conversions that require storing a number to an output arg pointer.  And for POSIX sprintf, conversions like <code>%2$d</code> that let you index the args instead of having to pass the same value multiple times.)"}, {"owner": {"reputation": 33, "user_id": 12368460, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mA7JR9v2ix-w72AUmEpwN2Q3X_108O1slvOKF6M=k-s128", "display_name": "\u0410\u043d\u0434\u0440\u0435\u0439 \u0413\u0438\u043b\u044c", "link": "https://stackoverflow.com/users/12368460/%d0%90%d0%bd%d0%b4%d1%80%d0%b5%d0%b9-%d0%93%d0%b8%d0%bb%d1%8c"}, "edited": false, "score": 0, "creation_date": 1573674725, "post_id": 58843387, "comment_id": 103962853, "body": "itoa does not fit because I want to convert float into the string... So - I think sprintf is the one of easiest and simplest options."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1573723596, "post_id": 58843387, "comment_id": 103978789, "body": "@\u0410\u043d\u0434\u0440\u0435\u0439\u0413\u0438\u043b\u044c To convert a string to a float try <code>strtod</code>."}], "answers": [{"tags": [], "owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "is_accepted": true, "score": 4, "last_activity_date": 1573670737, "creation_date": 1573670737, "answer_id": 58843646, "question_id": 58843387, "link": "https://stackoverflow.com/questions/58843387/what-is-0sprintf-in-keils-c-library-how-to-use-it-to-save-code-size-vs-full/58843646#58843646", "title": "What is __0sprintf in Keil&#39;s C library? How to use it to save code size vs. full sprintf?", "body": "<blockquote>\n  <p>I can not find in Google any information about __0sprintf function or something about it.</p>\n</blockquote>\n\n<p>Names beginning with two underscores are reserved for the implementation.\nThat means you're not allowed to use them in your code, but it also means that if you see one, it's probably an internal implementation detail.</p>\n\n<blockquote>\n  <p>Where can I read about these functions? </p>\n</blockquote>\n\n<p>If it's an implementation detail, all you can do is check the documentation for that implementation, ask the vendor or examine the source if it's available, or search to see if someone else has already investigated or decompiled this function.</p>\n\n<blockquote>\n  <p>May be I can understand why it is not working?</p>\n</blockquote>\n\n<p>You can always try disassembling that function from your vendor's runtime library (assuming that doesn't breach some license), or try instruction-stepping into it if the platform has an interactive debugger.</p>\n\n<p>Otherwise, your best bet is to figure out how to write some regular C code that calls the same implementation, and compare the call sites.</p>\n"}], "owner": {"reputation": 33, "user_id": 12368460, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mA7JR9v2ix-w72AUmEpwN2Q3X_108O1slvOKF6M=k-s128", "display_name": "\u0410\u043d\u0434\u0440\u0435\u0439 \u0413\u0438\u043b\u044c", "link": "https://stackoverflow.com/users/12368460/%d0%90%d0%bd%d0%b4%d1%80%d0%b5%d0%b9-%d0%93%d0%b8%d0%bb%d1%8c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 58843646, "answer_count": 1, "score": 3, "last_activity_date": 1573671060, "creation_date": 1573669657, "last_edit_date": 1573671060, "question_id": 58843387, "link": "https://stackoverflow.com/questions/58843387/what-is-0sprintf-in-keils-c-library-how-to-use-it-to-save-code-size-vs-full", "title": "What is __0sprintf in Keil&#39;s C library? How to use it to save code size vs. full sprintf?", "body": "<p>I am trying to use <code>sprintf</code> standard C function in ARM assembler code, in Keil uVision, for STM32.\nLooking in example C project disassembly, I can see this:</p>\n\n<pre><code>54:         sprintf( test_string, format_string, num); \n0x080028C2 F1000110  ADD      r1,r0,#0x10\n0x080028C6 E9D02302  LDRD     r2,r3,[r0,#0x08]\n0x080028CA 4810      LDR      r0,[pc,#64]  ; @0x0800290C\n0x080028CC F7FFFB66  BL.W     __0sprintf (0x08001F9C)\n</code></pre>\n\n<p>C code disassembly calls function <strong>__0sprintf</strong>.</p>\n\n<p>In my assembly program, I write such code:</p>\n\n<pre><code>LDR     r0, =Data_string\nLDR     r1, =Format_str\n;r2 &amp; r3 loaded above\nBL      sprintf\n</code></pre>\n\n<p>And it works well, but takes up to 11 kB.\nIf I call __0sprintf function in my code:</p>\n\n<pre><code>LDR     r0, =Data_string\nLDR     r1, =Format_str\n;r2 &amp; r3 loaded above\nBL      __0sprintf\n</code></pre>\n\n<p>it takes up much less, about 5 kB - but do not work.</p>\n\n<p>I can not find in Google any information about __0sprintf function or something about it. Where can I read about these functions? May be I can understand why it is not working?</p>\n"}, {"tags": ["c", "struct", "macros"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 2, "creation_date": 1573666307, "post_id": 58842547, "comment_id": 103959068, "body": "First things first, ditch the macro and write an actual function instead."}, {"owner": {"reputation": 103, "user_id": 3707533, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e10ffe2869552ce51c1b1e9b4356805f?s=128&d=identicon&r=PG&f=1", "display_name": "francis2tm", "link": "https://stackoverflow.com/users/3707533/francis2tm"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1573666359, "post_id": 58842547, "comment_id": 103959097, "body": "But I wanted to make a macro, can I have the same effect by declaring a static inline function?"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1573666404, "post_id": 58842547, "comment_id": 103959119, "body": "Yes, but it needs only be one of <code>static</code> or <code>inline</code>."}, {"owner": {"reputation": 103, "user_id": 3707533, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e10ffe2869552ce51c1b1e9b4356805f?s=128&d=identicon&r=PG&f=1", "display_name": "francis2tm", "link": "https://stackoverflow.com/users/3707533/francis2tm"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1573669666, "post_id": 58842547, "comment_id": 103960632, "body": "@Quentin if my function is static, will there be a performance gain? Because I&#39;m having a hard time defining it as a inline function because I have to define the function in matrix.h and as the structure is not define yet (it is only defined in matrix.c) it gives a error saying &quot;undefined reference to `mz&#39;&quot;. If I define mz in matrix.h it says that mz doesn&#39;t have a field named content, because the structure is only defined later in the matrix.c"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1573679153, "post_id": 58842547, "comment_id": 103964765, "body": "If only <code>matrix.c</code> knows about the definition of <code>Matrix_Pos_Struct</code>, there is no point in defining the macro in <code>matrix.h</code>, since no one could use it without knowing the struct. An inline function definition in the header fails on the spot for this very reason. From then on, it&#39;s straightforward to just define the function inside <code>matrix.c</code> and you won&#39;t notice any performance difference since any compiler will inline it. Note that the function has the added bonus that you can <i>declare</i> it in the header for other source files to call it without knowing the struct: this goes towards your goal."}], "answers": [{"tags": [], "owner": {"reputation": 103, "user_id": 3707533, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e10ffe2869552ce51c1b1e9b4356805f?s=128&d=identicon&r=PG&f=1", "display_name": "francis2tm", "link": "https://stackoverflow.com/users/3707533/francis2tm"}, "is_accepted": false, "score": 0, "last_activity_date": 1573667535, "creation_date": 1573667535, "answer_id": 58842883, "question_id": 58842547, "link": "https://stackoverflow.com/questions/58842547/c-share-macro-which-is-a-method-of-accessing-a-member-of-a-struct-between-multip/58842883#58842883", "title": "C share macro which is a method of accessing a member of a struct between multiple files", "body": "<p>I came to the conclusion that making a function is a better way of doing this, instead of a macro</p>\n"}], "owner": {"reputation": 103, "user_id": 3707533, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e10ffe2869552ce51c1b1e9b4356805f?s=128&d=identicon&r=PG&f=1", "display_name": "francis2tm", "link": "https://stackoverflow.com/users/3707533/francis2tm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573667535, "creation_date": 1573666162, "question_id": 58842547, "link": "https://stackoverflow.com/questions/58842547/c-share-macro-which-is-a-method-of-accessing-a-member-of-a-struct-between-multip", "title": "C share macro which is a method of accessing a member of a struct between multiple files", "body": "<p>So I want to share a macro between different .c files which \"returns\" the \"content\" (which is a member of a struct) of a element of a matrix of structures. I have these files:</p>\n\n<p>matrix.h:</p>\n\n<pre><code>#ifndef _MATRIX_H\n#define _MATRIX_H\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct Matrix_Pos_Struct Matrix_Pos;\n\n#define GET_CONTENT(i, j) (mz[(i)][(j)].content)\n\n#endif\n\n</code></pre>\n\n<p>matrix.c:</p>\n\n<pre><code>#include \"matrix.h\"\n\nextern Matrix_Pos** mz;\n\nstruct Matrix_Pos_Struct{\n    char content;\n    char visited;\n};\n\n</code></pre>\n\n<p>And then I have another_file.c that invokes the macro GET_CONTENT(), and mz is a double pointer that is declared in yet another file where the main() is at. How can I make this while achieving the most abstraction possible? This is fora university project and the teacher values abstraction</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1573666678, "post_id": 58842392, "comment_id": 103959231, "body": "All of these thing you are trying to call as a function are defined as local <code>float</code> <i>variables</i> in <code>main</code>."}], "answers": [{"tags": [], "owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "is_accepted": false, "score": 4, "last_activity_date": 1573666751, "creation_date": 1573666751, "answer_id": 58842683, "question_id": 58842392, "link": "https://stackoverflow.com/questions/58842392/why-wont-my-functions-be-read-i-just-get-error-called-object-functionname-i/58842683#58842683", "title": "Why wont my functions be read? I just get &quot;error: called object \u2018FunctionName\u2019 is not a function or function pointer&quot;", "body": "<p>When I compile your program with GCC, I get several error messages.</p>\n\n<pre><code>fence.c: At top level:\nfence.c:15:68: error: unknown type name \u2018howmuchfence\u2019\n float costoffence(float link, float post, float gate, float chain, howmuchfence)\n                                                                    ^~~~~~~~~~~~\n</code></pre>\n\n<p>You forgot the data type, probably <code>float howmuchfence</code>.</p>\n\n<p>The main problem is this error and some similar ones:</p>\n\n<pre><code>fence.c: In function \u2018main\u2019:\nfence.c:69:17: error: called object \u2018costoffence\u2019 is not a function or function pointer\n     fencecost = costoffence(link, post, gate);\n                 ^~~~~~~~~~~\nfence.c:46:120: note: declared here\n , gate, size, link, grassprice, total, gst, totaltax, howmuchfence, costoffence, fencecost, amountoffence, amountofgrass, costofgrass;\n                                                                     ^~~~~~~~~~~\n</code></pre>\n\n<p>Here the compiler complains that <code>costoffence</code> is not a function because you defined a variable of the same name at the beginning of function <code>main</code> which shadows the corresponding function. GCC even tells you where you declared the identifier that is not a function.</p>\n\n<p>If you enable warnings the compiler will also warn you about some unused function parameters.</p>\n"}, {"comments": [{"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 0, "creation_date": 1573722362, "post_id": 58845177, "comment_id": 103978075, "body": "If you &quot;Thought you needed to do that&quot; you should read about scope and shadowing in C. See e.g. <a href=\"https://stackoverflow.com/a/623279/10622916\">stackoverflow.com/a/623279/10622916</a> and <a href=\"https://softwareengineering.stackexchange.com/a/306799\">softwareengineering.stackexchange.com/a/306799</a> and <a href=\"https://en.wikipedia.org/wiki/Variable_shadowing\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Variable_shadowing</a> (Even if the title is &quot;Variable shadowing&quot;, this applies to other tidentifiers as well.)"}], "tags": [], "owner": {"reputation": 11, "user_id": 12368248, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mB80fw_yZeS0uXG6_CdwhPpour3MiIBlUkDagWTJg=k-s128", "display_name": "Kyler Axten", "link": "https://stackoverflow.com/users/12368248/kyler-axten"}, "is_accepted": false, "score": 0, "last_activity_date": 1573739476, "last_edit_date": 1573739476, "creation_date": 1573677154, "answer_id": 58845177, "question_id": 58842392, "link": "https://stackoverflow.com/questions/58842392/why-wont-my-functions-be-read-i-just-get-error-called-object-functionname-i/58845177#58845177", "title": "Why wont my functions be read? I just get &quot;error: called object \u2018FunctionName\u2019 is not a function or function pointer&quot;", "body": "<p>Found out why. It's because the variables for the functions were also in the main as stated variables. Thought I needed to do that but turns out you CAN'T do that.</p>\n"}], "owner": {"reputation": 11, "user_id": 12368248, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mB80fw_yZeS0uXG6_CdwhPpour3MiIBlUkDagWTJg=k-s128", "display_name": "Kyler Axten", "link": "https://stackoverflow.com/users/12368248/kyler-axten"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "closed_date": 1573727243, "answer_count": 2, "score": -1, "last_activity_date": 1573739476, "creation_date": 1573665573, "question_id": 58842392, "link": "https://stackoverflow.com/questions/58842392/why-wont-my-functions-be-read-i-just-get-error-called-object-functionname-i", "closed_reason": "Not suitable for this site", "title": "Why wont my functions be read? I just get &quot;error: called object \u2018FunctionName\u2019 is not a function or function pointer&quot;", "body": "<p>Ive tried a lot of things and I cant seem to find out why my functions are not being detected? I understand that some of the code may be wrong I just started but I don't get why the functions wont be read to the main?\nIve used functions in previous programs but I used integers. Im not sure if its cause im trying to use floats but I just cant get it to work.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n\n\nfloat amountoffence(float chain, float link, float width, float length)\n{\n    float howmuchfence;\n\n    howmuchfence=length+length+width+width;\n\n    return howmuchfence;\n}\n\nfloat costoffence(float link, float post, float gate, float chain, howmuchfence)\n{\n    float fencecost;\n\n    link=howmuchfence*chain;\n    fencecost = link+post+gate;\n\n    return fencecost;\n}\n\nfloat amountofgrass(float length, float width)\n{\n    float grass;\n    grass = length*width;\n\n    return grass;\n}\n\nfloat costofgrass(float grass)\n{\n    float grassprice;\n\n    grassprice=grass*64.25;\n\n    return grassprice;\n}\n\n\n\nint main()\n{\n    float grass, length, width, height, post, chain, gate, size, link, grassprice, total, gst, totaltax, howmuchfence, costoffence, fencecost, amountoffence, amountofgrass, costofgrass;\n\n\nprintf(\"Please note that all measurements are in meters \\n \\n \\n\");\n    printf(\"Please enter the length of the base (Minimum length is 2 and Maximum is 5) \\n\");\n    scanf(\"%f\", &amp;length);\n    printf(\"Please enter the width of the base (Minimum width is 1 and Maximum is 2) \\n\");\n    scanf(\"%f\", &amp;width);\n    printf(\"Do you have a large dog or small dog (Type 1 for large or 2 for small)\");\n    scanf(\"%f\", &amp;size);\n\n    if(size == 1)\n    {\n        chain=8.10;\n        gate=165;\n        post=82;\n    }\n    else\n    {\n        chain=12.45;\n        gate=148;\n        post=66;\n    }\n    fencecost = costoffence(link, post, gate);\n\n    grass = amountofgrass(length, width);\n\n    howmuchfence = amountoffence(chain, link, width);\n\n    grassprice = costofgrass(grass);\n\n\n\n    total=fencecost+grassprice;\n    gst=5;\n    totaltax=total*(gst/100);\n\n\n\n\n    printf(\"--Customized Dog Run Recipt--\\n\");\n    printf(\"Length of dog run: %0.02f m\\n\", length);\n    printf(\"Width of dog run: %0.02f m\\n\", width);\n    printf(\"Height of dog run: %0.02f m\\n\", height);\n    printf(\"Amount of fence: %0.02f m\\n\", howmuchfence);\n    printf(\"Amount of gates: 1\\n\");\n    printf(\"Cost of fence: $ %0.02f\\n\", fencecost);\n    printf(\"Amount of grass: %0.02f m^2\\n\", grass);\n    printf(\"Cost of grass: $ %0.02f\\n\", grassprice);\n    printf(\"Total cost before GST: $ %0.02f\\n\", total);\n    printf(\"Amount of GST: %0.02f percent \\n\", gst);\n    printf(\"Total cost after GST: $ %0.02f \\n\", totaltax);\n\n\n\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "azure-iot-hub", "firmware", "mender"], "answers": [{"tags": [], "owner": {"reputation": 121, "user_id": 7981505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9810108e3c8b0ecb0b582b29213f21b6?s=128&d=identicon&r=PG&f=1", "display_name": "ghost_duke", "link": "https://stackoverflow.com/users/7981505/ghost-duke"}, "is_accepted": false, "score": 0, "last_activity_date": 1573664675, "creation_date": 1573664675, "answer_id": 58842136, "question_id": 58841325, "link": "https://stackoverflow.com/questions/58841325/integrate-mender-io-with-azure-iot-hub/58842136#58842136", "title": "Integrate Mender.io with Azure IOT Hub", "body": "<p>Depends, I have not used it personally but did check it out as a possibility once. Check if you can integrate mender into your board <a href=\"https://hub.mender.io/c/board-integrations\" rel=\"nofollow noreferrer\">https://hub.mender.io/c/board-integrations</a></p>\n\n<p>If it is possible then I would suggest looking at some resources mender provides on how to do so.</p>\n\n<p>Get some results and post problems after you try it out once.</p>\n"}], "owner": {"reputation": 119, "user_id": 9333042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9d9aec3bb19838e145f045667585e2d?s=128&d=identicon&r=PG&f=1", "display_name": "Walid", "link": "https://stackoverflow.com/users/9333042/walid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1573664675, "creation_date": 1573661987, "question_id": 58841325, "link": "https://stackoverflow.com/questions/58841325/integrate-mender-io-with-azure-iot-hub", "title": "Integrate Mender.io with Azure IOT Hub", "body": "<p>I have iot device developed by C programming, connecting to azure iot hub.\nCan I use mender.io in my C application to update my firmware over the air</p>\n"}, {"tags": ["c", "struct", "linked-list", "singly-linked-list"], "comments": [{"owner": {"reputation": 1, "user_id": 12332604, "user_type": "registered", "profile_image": "https://graph.facebook.com/2514815755262948/picture?type=large", "display_name": "Carisse Chen", "link": "https://stackoverflow.com/users/12332604/carisse-chen"}, "edited": false, "score": 0, "creation_date": 1573661177, "post_id": 58841077, "comment_id": 103956255, "body": "The program above will only store the values but not on its ascending order."}, {"owner": {"reputation": 160, "user_id": 6594779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/847c25720c1e7423a97c7894b530bfa4?s=128&d=identicon&r=PG&f=1", "display_name": "svtag", "link": "https://stackoverflow.com/users/6594779/svtag"}, "edited": false, "score": 0, "creation_date": 1573662242, "post_id": 58841077, "comment_id": 103956910, "body": "I will recommend to add more data about the problem and the solution you tried. This will help you in getting some help here. And please read this <a href=\"https://stackoverflow.com/help/how-to-ask\">How to Ask</a>."}, {"owner": {"reputation": 308, "user_id": 3927579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79c6744b7d14faaaa0cf636601f0aeb5?s=128&d=identicon&r=PG", "display_name": "tbejos", "link": "https://stackoverflow.com/users/3927579/tbejos"}, "edited": false, "score": 0, "creation_date": 1573662306, "post_id": 58841077, "comment_id": 103956951, "body": "In order to make sure you insert nodes in ascending order you&#39;re likely going to have to walk the list every time you add a node until you find a place where it is &lt;= the next value but &gt;= the previous value and then insert it"}], "answers": [{"comments": [{"owner": {"reputation": 3419, "user_id": 7422352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c4e9f7e19cb98ee09930bb5454a5e78?s=128&d=identicon&r=PG", "display_name": "Deepak Tatyaji Ahire", "link": "https://stackoverflow.com/users/7422352/deepak-tatyaji-ahire"}, "edited": false, "score": 0, "creation_date": 1573663202, "post_id": 58841462, "comment_id": 103957502, "body": "Hello @Vlad from Moscow. Sorry to post it here, but there is no other way as I wanted to connect to you on LinkedIn and I don&#39;t have your full name"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 3419, "user_id": 7422352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c4e9f7e19cb98ee09930bb5454a5e78?s=128&d=identicon&r=PG", "display_name": "Deepak Tatyaji Ahire", "link": "https://stackoverflow.com/users/7422352/deepak-tatyaji-ahire"}, "edited": false, "score": 0, "creation_date": 1573663278, "post_id": 58841462, "comment_id": 103957555, "body": "@Carisse Chen Ignore the down-voting. The code is correct. See the demonstrative program in my answer."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 3419, "user_id": 7422352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c4e9f7e19cb98ee09930bb5454a5e78?s=128&d=identicon&r=PG", "display_name": "Deepak Tatyaji Ahire", "link": "https://stackoverflow.com/users/7422352/deepak-tatyaji-ahire"}, "edited": false, "score": 0, "creation_date": 1573663570, "post_id": 58841462, "comment_id": 103957717, "body": "@DeepakTatyajiAhire See my profile. I do not take part at Linkedin."}, {"owner": {"reputation": 3419, "user_id": 7422352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c4e9f7e19cb98ee09930bb5454a5e78?s=128&d=identicon&r=PG", "display_name": "Deepak Tatyaji Ahire", "link": "https://stackoverflow.com/users/7422352/deepak-tatyaji-ahire"}, "edited": false, "score": 0, "creation_date": 1573663697, "post_id": 58841462, "comment_id": 103957778, "body": "Your profile is really interesting man. How do I connect to you if I need any specific help."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": -1, "last_activity_date": 1573668209, "last_edit_date": 1573668209, "creation_date": 1573662462, "answer_id": 58841462, "question_id": 58841077, "link": "https://stackoverflow.com/questions/58841077/add-a-node-it-its-proper-place-list-will-be-in-ascending-order/58841462#58841462", "title": "Add a node it its proper place (list will be in ascending order)", "body": "<p>It is very simply to do. Write</p>\n\n<pre><code>node **current = &amp;head;\n\nwhile ( ( *current != NULL ) &amp;&amp; !( temp &lt; ( *current )-&gt;value ) )\n{\n    current = &amp;( *current )-&gt;next;\n}\n\nnewnode-&gt;next = *current;\nif ( *current == NULL ) tail = newnode;\n*current = newnode;\n</code></pre>\n\n<p>Here is a demonstrative program</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\ntypedef struct node\n{\n    int value;\n    struct node *next;\n} node;\n\nint main(void) \n{\n    node *head = NULL, *tail = NULL;\n\n    srand( ( unsigned int )time( NULL ) );\n\n    const size_t N = 10;\n\n    for ( size_t i = 0; i &lt; N; i++ )\n    {\n        int value = rand() % N;\n\n        node *newnode = malloc( sizeof( node ) );\n        newnode-&gt;value = value;\n\n        node **current = &amp;head;\n\n        while ( ( *current != NULL ) &amp;&amp; !( value &lt; ( *current )-&gt;value ) )\n        {\n            current = &amp;( *current )-&gt;next;\n        }\n\n        newnode-&gt;next = *current;\n        if ( *current == NULL ) tail = newnode;\n        *current = newnode; \n    }\n\n    for ( node *current = head; current != NULL; current = current-&gt;next )\n    {\n        printf( \"%d -&gt; \", current-&gt;value );\n    }\n\n    puts( \"NULL\" );\n\n    return 0;\n}\n</code></pre>\n\n<p>The program output might look like</p>\n\n<pre><code>1 -&gt; 1 -&gt; 3 -&gt; 5 -&gt; 5 -&gt; 6 -&gt; 7 -&gt; 8 -&gt; 9 -&gt; 9 -&gt; NULL\n</code></pre>\n\n<p>You can move the code that inserts a node into a separate function.</p>\n\n<p>For example</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\ntypedef struct node\n{\n    int value;\n    struct node *next;\n} node;\n\nint insert_node( node **head, node **tail, int value )\n{\n    node *newnode = malloc( sizeof( node ) );\n\n    int success = newnode != NULL;\n\n    if ( success )\n    {\n        newnode-&gt;value = value;\n\n        node **current = head;\n\n        while ( ( *current != NULL ) &amp;&amp; !( value &lt; ( *current )-&gt;value ) )\n        {\n            current = &amp;( *current )-&gt;next;\n        }\n\n        newnode-&gt;next = *current;\n        if ( *current == NULL ) *tail = newnode;\n        *current = newnode; \n    }       \n\n    return success;\n}\n\nint main(void) \n{\n    node *head = NULL, *tail = NULL;\n\n    srand( ( unsigned int )time( NULL ) );\n\n    const size_t N = 10;\n\n    for ( size_t i = 0; i &lt; N; i++ )\n    {\n        int value = rand() % N;\n        insert_node( &amp;head, &amp;tail, value );     \n    }\n\n    for ( node *current = head; current != NULL; current = current-&gt;next )\n    {\n        printf( \"%d -&gt; \", current-&gt;value );\n    }\n\n    puts( \"NULL\" );\n\n    return 0;\n}\n</code></pre>\n\n<p>Again the program output might look like for example</p>\n\n<pre><code>4 -&gt; 5 -&gt; 6 -&gt; 6 -&gt; 7 -&gt; 7 -&gt; 8 -&gt; 8 -&gt; 9 -&gt; 9 -&gt; NULL\n</code></pre>\n\n<p>However it is better if you add one more structure as for example</p>\n\n<pre><code>typedef struct list\n{\n    node *head;\n    node *tail;\n} list;\n</code></pre>\n\n<p>and write the function <code>insert_node</code> that deals with this structure.</p>\n"}, {"tags": [], "owner": {"reputation": 1990, "user_id": 12326421, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JbJl27mnzzQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reae_Gn8hEX-jZUqSenBmr_v-zCaw/photo.jpg?sz=128", "display_name": "Himanshu Singh", "link": "https://stackoverflow.com/users/12326421/himanshu-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1573662626, "creation_date": 1573662626, "answer_id": 58841504, "question_id": 58841077, "link": "https://stackoverflow.com/questions/58841077/add-a-node-it-its-proper-place-list-will-be-in-ascending-order/58841504#58841504", "title": "Add a node it its proper place (list will be in ascending order)", "body": "<p>You are on right track, you know how to iterate linked list and add new nodes. </p>\n\n<p>Now suppose user entered a value <strong>val</strong>, so while iterating your linked list you have to check whether <strong>current node's value</strong> is greater or smaller than <strong>val</strong>. Based on that you have to add <strong>val</strong> before or after your current node.</p>\n"}, {"tags": [], "owner": {"reputation": 3419, "user_id": 7422352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c4e9f7e19cb98ee09930bb5454a5e78?s=128&d=identicon&r=PG", "display_name": "Deepak Tatyaji Ahire", "link": "https://stackoverflow.com/users/7422352/deepak-tatyaji-ahire"}, "is_accepted": false, "score": 0, "last_activity_date": 1573662776, "creation_date": 1573662776, "answer_id": 58841555, "question_id": 58841077, "link": "https://stackoverflow.com/questions/58841077/add-a-node-it-its-proper-place-list-will-be-in-ascending-order/58841555#58841555", "title": "Add a node it its proper place (list will be in ascending order)", "body": "<p><strong>The only thing you have to do here is to traverse the linked list unless you find the correct position for the new node to be inserted</strong></p>\n\n<p>Try to understand the code below, which solves your usecase and you can implement it on your own:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\ntypedef struct node\n{\n    int data;\n     struct node*next;\n}node;\n\nvoid add(node**s,int num)\n{\n    node*temp;\n    if(*s==NULL||num&lt;(*s)-&gt;data)\n    {\n        temp=(node*)malloc(sizeof(node));\n        temp-&gt;data=num;\n        temp-&gt;next=*s;\n        *s=temp;\n    }\n    else\n    {\n        temp=*s;\n        while(temp!=NULL)\n        {\n            if(temp-&gt;data&lt;=num&amp;&amp;(temp-&gt;next==NULL || temp-&gt;next-&gt;data&gt;num))\n            {\n                 node*temp1=(node*)malloc(sizeof(node));\n                 temp1-&gt;data=num;\n                 temp1-&gt;next=temp-&gt;next;\n                 temp-&gt;next=temp1;\n                 return;\n            }\n            temp=temp-&gt;next;\n        }\n     }\n }\n\nvoid traverse(node*s)\n{\n     while(s!=NULL)\n     {\n          printf(\"%d\\t\",s-&gt;data);\n          s=s-&gt;next;\n     }\n}\n\nvoid main()\n{\n     node*n=NULL;\n\n     add(&amp;n,2);\n     add(&amp;n,5);\n     add(&amp;n,3);\n     add(&amp;n,6);\n     add(&amp;n,4);\n     traverse(n);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 121, "user_id": 7981505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9810108e3c8b0ecb0b582b29213f21b6?s=128&d=identicon&r=PG&f=1", "display_name": "ghost_duke", "link": "https://stackoverflow.com/users/7981505/ghost-duke"}, "is_accepted": false, "score": 0, "last_activity_date": 1573663409, "creation_date": 1573663409, "answer_id": 58841731, "question_id": 58841077, "link": "https://stackoverflow.com/questions/58841077/add-a-node-it-its-proper-place-list-will-be-in-ascending-order/58841731#58841731", "title": "Add a node it its proper place (list will be in ascending order)", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct Node {\n    int value;\n    struct Node * next;\n} node;\n\nint main()\n{\n    int i = 0;\n    printf(\"\\nEnter Number:\");\n    scanf(\"%d\",&amp;i);\n\n    //define root node here\n    node root;\n    root.value = 0;\n    root.next  = NULL;\n\n    while(i&gt;=0){\n\n        node * newnode = (node *)malloc(sizeof(node));\n        newnode-&gt;value = i;\n        newnode-&gt;next  = NULL;\n\n        node * temp = &amp;root;\n        while (1) {\n            if (temp-&gt;next == NULL) {\n                temp-&gt;next = newnode;\n                break;\n            } else {\n                if (temp-&gt;next-&gt;value &gt; newnode-&gt;value) {\n                    newnode-&gt;next = temp-&gt;next;\n                    temp-&gt;next = newnode;\n                    break;\n                } else {\n                    temp = temp-&gt;next;\n                }\n            }\n        }\n\n        printf(\"\\nEnter Number:\"); //Repeats the process until negative number is given\n        scanf(\"%d\",&amp;i);\n    }//endwhile\n\n    node * temp = &amp;root;\n    while (temp-&gt;next != NULL) {\n        temp = temp-&gt;next;\n        printf(\"%d,\", temp-&gt;value);\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": false, "score": 0, "last_activity_date": 1573676434, "creation_date": 1573676434, "answer_id": 58844995, "question_id": 58841077, "link": "https://stackoverflow.com/questions/58841077/add-a-node-it-its-proper-place-list-will-be-in-ascending-order/58844995#58844995", "title": "Add a node it its proper place (list will be in ascending order)", "body": "<p>I'll add an answer that keeps things simple. It's not the most compact code and most like not the best performing code but some times keeping things simple are more important. And performance is not an issue here as you read in values from stdin.</p>\n\n<p>But first notice that having a <code>tail</code> pointer for this list makes little sense. A <code>tail</code> pointer is good when you want to make fast insert at the end of a list. Since you want to make sorted inserts you'll have to iterate the list anyway and therefore wont get any benefit from the <code>tail</code> pointer.</p>\n\n<p>So here is the simple example code - inline comments explains the code.</p>\n\n<pre><code>printf(\"Enter Number:\");\nscanf(\"%d\",&amp;temp);\nwhile(temp&gt;=0){\n    newnode = malloc(sizeof(node));\n    newnode-&gt;value= temp;\n    newnode-&gt; next = NULL;\n\n    if (head==NULL)\n    {\n        // List was empty so just make newnode the head\n        head=newnode;\n    }\n    else if (newnode-&gt;value &lt;= head-&gt;value)\n    {\n        // The newnode has a value less or equal to current head\n        // so the newnode can be inserted as head\n        newnode-&gt;next = head;\n        head = newnode;\n    }\n    else\n    {\n        // Now iterate the list to find where to insert newnode\n        node* p = head;\n        while(p-&gt;next)   // Repeat until end-of-list is reached\n        {\n            if (newnode-&gt;value &lt;= p-&gt;next-&gt;value)\n            {\n                // Insert the newnode between node p and node p-&gt;next\n                newnode-&gt;next = p-&gt;next;\n                p-&gt;next = newnode;\n\n                // Stop the while-loop\n                break;\n            } \n\n            // Advance to next list element\n            p = p-&gt;next;\n        }\n\n        // Check if newnode was inserted or end-of-list was reached\n        if (p-&gt;next == NULL)\n        {\n            // end-of-list was reached so insert newnode at the end\n            p-&gt;next = newnode;\n        }\n    }\n\n    printf(\"Enter Number:\");\n    scanf(\"%d\",&amp;temp);\n}\n</code></pre>\n\n<p>Some extra info:</p>\n\n<p>Always check the value returned by <code>scanf</code> - in this case like:</p>\n\n<pre><code>// scanf(\"%d\",&amp;temp);  Dont do this but do:\nif (scanf(\"%d\",&amp;temp) != 1)\n{\n    // Didn't get an int :(\n    Add error handling here\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12332604, "user_type": "registered", "profile_image": "https://graph.facebook.com/2514815755262948/picture?type=large", "display_name": "Carisse Chen", "link": "https://stackoverflow.com/users/12332604/carisse-chen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 5, "score": 0, "last_activity_date": 1573676434, "creation_date": 1573661120, "last_edit_date": 1573664181, "question_id": 58841077, "link": "https://stackoverflow.com/questions/58841077/add-a-node-it-its-proper-place-list-will-be-in-ascending-order", "title": "Add a node it its proper place (list will be in ascending order)", "body": "<p>I am trying to a add a node in its proper place (in ascending order). So when the user enters a number, then its value will be automatically stored in a memory location. </p>\n\n<p>For example the user entered 2,5,3,6 and 4. Then these values will be stored in a memory location that is in ascending order, so that will be: 2,3,4,5, and 6. So the program will print out the values.</p>\n\n<pre><code> //ADDING A NODE INTO A LIST\nprintf(\"Enter Number:\");\nscanf(\"%d\",&amp;temp);\nwhile(temp&gt;=0){\n    newnode = malloc(sizeof(node)); //create a memory location with the size of the node\n    //whatever data size is on the node, the 'sizeof' fcn will compute its size\n    newnode-&gt;value= temp;\n    newnode-&gt; next = NULL;\n\n    if (tail==NULL){\n        head=newnode;\n        tail=newnode;\n    } else{\n        tail-&gt;next=newnode;\n        tail=newnode;\n\n    }//end if\n\n    printf(\"Enter Number:\"); //Repeats the process until negative number is given\n    scanf(\"%d\",&amp;temp);\n}//endwhile\n</code></pre>\n\n<p>Then the program will display the values on the list</p>\n\n<pre><code>iter = head;\ni=1;\nwhile(iter!= NULL){\nprintf(\"i:%d -- value: %d\\n\",i, iter-&gt;value);\niter = iter-&gt; next;\ni++;\n</code></pre>\n"}, {"tags": ["c", "windows", "file"], "comments": [{"owner": {"reputation": 121, "user_id": 7981505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9810108e3c8b0ecb0b582b29213f21b6?s=128&d=identicon&r=PG&f=1", "display_name": "ghost_duke", "link": "https://stackoverflow.com/users/7981505/ghost-duke"}, "edited": false, "score": 0, "creation_date": 1573661247, "post_id": 58840923, "comment_id": 103956286, "body": "<a href=\"https://stackoverflow.com/questions/2423628/whats-the-difference-between-a-file-descriptor-and-file-pointer\" title=\"whats the difference between a file descriptor and file pointer\">stackoverflow.com/questions/2423628/&hellip;</a>"}, {"owner": {"reputation": 121, "user_id": 7981505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9810108e3c8b0ecb0b582b29213f21b6?s=128&d=identicon&r=PG&f=1", "display_name": "ghost_duke", "link": "https://stackoverflow.com/users/7981505/ghost-duke"}, "edited": false, "score": 0, "creation_date": 1573661396, "post_id": 58840923, "comment_id": 103956382, "body": "also GetFileSize is a windows only function, not standard c"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1573664414, "post_id": 58840923, "comment_id": 103958135, "body": "worth mentioning that the <code>stdio.h</code> closest equivalent (which will let you pass a <code>FILE*</code>) is <code>fseek(SEEK_END)</code> followed by <code>ftell()</code>.  And the equivalent on other OSes (which is in the POSIX standard but not the C standard, and does not use <code>FILE*</code>) is <code>fstat()</code>."}], "answers": [{"tags": [], "owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "is_accepted": false, "score": 1, "last_activity_date": 1573661328, "creation_date": 1573661328, "answer_id": 58841140, "question_id": 58840923, "link": "https://stackoverflow.com/questions/58840923/file-vs-handle-what-is-the-difference-between-these-two-things/58841140#58841140", "title": "FILE vs HANDLE - what is the difference between these two things", "body": "<p>The <code>GetFileSize()</code> function with <code>HANDLE</code> are part of the Windows API which means that it is only usable with a Windows program.</p>\n\n<p>The <code>fopen()</code> and <code>FILE</code> are part of the C Runtime library that comes with any standard C compiler which means that using those should be operating system independent.</p>\n\n<p>You can not pass a <code>FILE</code> to the <code>GetFileSize()</code> function because a <code>HANDLE</code> and a <code>FILE</code> are two different things.</p>\n"}, {"comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1573663253, "post_id": 58841481, "comment_id": 103957535, "body": "<a href=\"https://stackoverflow.com/questions/3989545/how-do-i-get-the-file-handle-from-the-fopen-file-structure\" title=\"how do i get the file handle from the fopen file structure\">stackoverflow.com/questions/3989545/&hellip;</a>"}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1573664314, "post_id": 58841481, "comment_id": 103958085, "body": "<code>fopen</code> calls <code>_open</code>. The latter returns a C file descriptor. This in turn wraps a Windows File handle, which comes from an internal <code>CreateFileW</code> call. A File handle refers to a kernel File object. Handles for kernel objects also include the access granted to the object at the time the handle was opened, along with flags that determine whether the handle can be closed via <code>CloseHandle</code> and whether it can be inherited by a child process."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 3, "last_activity_date": 1573662531, "creation_date": 1573662531, "answer_id": 58841481, "question_id": 58840923, "link": "https://stackoverflow.com/questions/58840923/file-vs-handle-what-is-the-difference-between-these-two-things/58841481#58841481", "title": "FILE vs HANDLE - what is the difference between these two things", "body": "<p><code>FILE</code> is a type of the standard C library, used exclusively for file handling with the stdio.h functions. It cannot be used for anything else. The C standard lib has the advantage of being portable.</p>\n\n<p><code>HANDLE</code> is a similar but wider concept used by the Windows API, used for everything where they want an abstraction layer on top of raw pointers. It is used for files, ports, threads, mutex, events, pipes and so on. Generally: any Windows resource that you can <code>WaitForSingleObject</code> on - the <code>WaitFor...</code> functions being Window's way of letting a thread effectively sleep without using up CPU resources. See <a href=\"https://stackoverflow.com/questions/902967/what-is-a-windows-handle\">What is a Windows Handle?</a>. It only works for Windows API specific-functions like <code>CreateFile</code>.</p>\n\n<p>Both of these are \"opaque types\" that the application programmer doesn't know or care about how they are implemented internally.</p>\n\n<p>In practice, the standard C library port for Windows is just an abstraction layer on top of the Windows API. So <code>FILE* fp = fopen(\"\", \"w\");</code> will very likely boil down to a <code>CreateFile</code> call internally. So for all we know, <code>FILE</code> could contain a <code>HANDLE</code> internally.</p>\n"}], "owner": {"reputation": 11251, "user_id": 3284878, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/d324c610856d2626e9b719eb4135b3cb?s=128&d=identicon&r=PG&f=1", "display_name": "Aviv Cohn", "link": "https://stackoverflow.com/users/3284878/aviv-cohn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 0, "accepted_answer_id": 58841481, "answer_count": 2, "score": 2, "last_activity_date": 1573662531, "creation_date": 1573660620, "last_edit_date": 1573661417, "question_id": 58840923, "link": "https://stackoverflow.com/questions/58840923/file-vs-handle-what-is-the-difference-between-these-two-things", "title": "FILE vs HANDLE - what is the difference between these two things", "body": "<p>So, I'm running on Windows and need to figure out the size of a file.</p>\n\n<p>SO mentions <code>GetFileSize</code> in many places, which takes a <code>HANDLE</code>. I'm used to just working with <code>FILE</code>s returned from <code>fopen</code> and such.</p>\n\n<ol>\n<li>What is the difference between <code>FILE</code> and the Windows <code>HANDLE</code>? When should each be used?</li>\n<li>For example, can I pass a plain <code>FILE</code> obtained from <code>fopen</code> to <code>GetFileSize</code>? Or do I need to use the Windows <code>CreateFile</code> (?) function to get a <code>HANDLE</code> and then pass it in?</li>\n</ol>\n"}, {"tags": ["c", "linker", "linker-errors"], "comments": [{"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 2, "creation_date": 1573658362, "post_id": 58840157, "comment_id": 103954531, "body": "This error message has a lot of extra text that may be confusing you. The only important bits are <code>undefined symbol: _intClassic</code> and <code>undefined symbol: _intQuadrature</code>.  You need to find the definitions of functions or data objects named <code>_intClassic</code> and <code>_intQuadrature</code>.  (For reasons too complicated to get into here, their names might actually be <code>intClassic</code> and <code>intQuadrature</code>.)  In order to help you any further than that I would need to know a lot more about the software you&#39;re trying to compile."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1573658603, "post_id": 58840157, "comment_id": 103954657, "body": "You need to include the header when compiling from C source to object file, and you need to include the library (via <code>-L &#47;path&#47;to&#47;library</code> and <code>-llibname</code> options) when you link the code.  You&#39;re getting the header OK; you&#39;re not including the library in the linking phase.  Or you need to include more than one object file in the linking phase \u2014 it depends where <code>intClassic</code> and <code>intQuadrature</code> are defined."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1573658608, "post_id": 58840157, "comment_id": 103954665, "body": "@Sam_Bad You forgot to include the object file in the project that contains the definitions of the speified identifiers."}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 0, "creation_date": 1573659840, "post_id": 58840157, "comment_id": 103955454, "body": "The &quot;for architecture x86_64&quot;, while not meaningful to OP or to the programmer in general, is at least meaningful to us in that it tells us OP is using/building for Mac with fat binaries."}, {"owner": {"reputation": 15, "user_id": 12235397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4309a26c5776f7a2c206e66dd042c80f?s=128&d=identicon&r=PG&f=1", "display_name": "Sam_Bad", "link": "https://stackoverflow.com/users/12235397/sam-bad"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 1, "creation_date": 1573660007, "post_id": 58840157, "comment_id": 103955576, "body": "@zwol @JonathanLeffer I have 3 files in my project main.c, integral.h and integral.c. integral.c contains the code of the functions <code>intClassic</code> and <code>intQuadrature</code> that allow me to calculate different types of integral. In  integral.h I declared the functions and structures I use. Finally in the main I included <i>integral.h</i> . Also <code>$ gcc -o output file1.o file2.o</code> can this command help me ?"}, {"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 2, "creation_date": 1573661744, "post_id": 58840157, "comment_id": 103956594, "body": "Well, show us the command you used when the error was reported. Then we might be able to help you better."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 1, "creation_date": 1573662456, "post_id": 58840157, "comment_id": 103957040, "body": "<code>gcc *.c</code> might work."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1573672195, "post_id": 58840157, "comment_id": 103961712, "body": "@Yunnosch Please don&#39;t do that. Despite the corporate messaging and groupthink, the true value of SO <i>is</i> personalized help. The archive of answered questions is only useful when a search turns up exactly what someone needs <i>and</i> they realize that it&#39;s what they need. By the time someone has gotten around to posting a question, they are already convinced that their question is <i>not</i> already answered, and that is true <i>for them</i> even if someone more experienced would recognize one of the search hits as containing relevant information."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1573672215, "post_id": 58840157, "comment_id": 103961719, "body": "@Yunnosch Therefore: By all means mark questions as duplicates, because that helps with future searches, <i>but answer them anyway</i> if there is enough information to do so. Don&#39;t nag people to think harder about potential duplicates, that will only discourage them."}, {"owner": {"reputation": 9021, "user_id": 1250381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88331c480b23341e10b1b0c0051f4eee?s=128&d=identicon&r=PG", "display_name": "dAm2K", "link": "https://stackoverflow.com/users/1250381/dam2k"}, "edited": false, "score": 0, "creation_date": 1573677140, "post_id": 58840157, "comment_id": 103963928, "body": "Please share the code, also share how you are going to compile it. The problem might be related to the lack of the object file (.o) compiled(?) from the C file where you implemented the intClassic() and intQuadrature() functions that you did not use at link time."}, {"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 0, "creation_date": 1573678552, "post_id": 58840157, "comment_id": 103964494, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix\">What is an undefined reference/unresolved external symbol error and how do I fix it?</a>"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1573681810, "post_id": 58840157, "comment_id": 103965941, "body": "@Yunnosch (The ideal thing would be for the SE <i>system</i> to provide a way for us to answer duplicates <i>by explaining how the linked q&amp;a answers the question</i>, because that&#39;s the hurdle that a beginner can&#39;t necessarily get over on their own.  But that would require SE-the-organization to admit it has a problem.  <i>hollow, bitter laughter</i>)"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 1, "creation_date": 1573682149, "post_id": 58840157, "comment_id": 103966086, "body": "@zwol I see. Thanks for that perspective. I think I will refrain from fighting on your side, but I definitly see your point. Please feel cheered on. I will try harder to avoid the &quot;do your homework first&quot; impression, by more specifically proposing <i>how</i> exactly I believe an existing Q/A to answer and then ask to highlight the relevant difference."}], "answers": [{"tags": [], "owner": {"reputation": 3445, "user_id": 261542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/237a47074475f635e5d08c125c18f790?s=128&d=identicon&r=PG", "display_name": "mikek3332002", "link": "https://stackoverflow.com/users/261542/mikek3332002"}, "is_accepted": true, "score": 2, "last_activity_date": 1573708583, "creation_date": 1573708583, "answer_id": 58849823, "question_id": 58840157, "link": "https://stackoverflow.com/questions/58840157/how-to-fix-undefined-symbols-for-architecture-x86-64-in-c/58849823#58849823", "title": "How to fix &quot; Undefined symbols for architecture x86_64 &quot; in C?", "body": "<p>In the same directory as your files, try running the command</p>\n\n<pre><code>gcc main.c integral.c -o integral\n</code></pre>\n\n<p>This should take the 2 files and compile them into a program called <code>./integral</code></p>\n"}], "owner": {"reputation": 15, "user_id": 12235397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4309a26c5776f7a2c206e66dd042c80f?s=128&d=identicon&r=PG&f=1", "display_name": "Sam_Bad", "link": "https://stackoverflow.com/users/12235397/sam-bad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1261, "favorite_count": 0, "accepted_answer_id": 58849823, "answer_count": 1, "score": 1, "last_activity_date": 1573708583, "creation_date": 1573658158, "last_edit_date": 1573707837, "question_id": 58840157, "link": "https://stackoverflow.com/questions/58840157/how-to-fix-undefined-symbols-for-architecture-x86-64-in-c", "title": "How to fix &quot; Undefined symbols for architecture x86_64 &quot; in C?", "body": "<p>I have a header file included in the main but when I compile the main, I have an error saying that the linker failed.</p>\n\n<p>I tried to find the object files but I cannot find them.\nI think the problem may come from my machine. I am kind of a beginner so I don't know how to solve this </p>\n\n<p>When I try compiling my code I get this error: </p>\n\n<pre><code>Undefined symbols for architecture x86_64:\n\"_intClassic\", referenced from:\n      _main in main-53b7e4.o\n  \"_intQuadrature\", referenced from:\n      _main in main-53b7e4.o\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n</code></pre>\n\n<blockquote>\n  <p>@zwol @JonathanLeffer I have 3 files in my project <code>main.c</code>, <code>integral.h</code>\n  and <code>integral.c</code>. <code>integral.c</code> contains the code of the functions\n  <code>intClassic</code> and <code>intQuadrature</code> that allow me to calculate different\n  types of integral. In <code>integral.h</code> I declared the functions and\n  structures I use. Finally in the main I included <code>integral.h</code> . \n  Also <code>$ gcc -o output file1.o file2.o</code> can this command help me ?</p>\n</blockquote>\n"}, {"tags": ["c", "string", "types", "casting", "declaration"], "comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 4, "creation_date": 1573657128, "post_id": 58839829, "comment_id": 103953856, "body": "Data types in C are static.  Why do you want to do this?  What problem do you think doing this will solve?"}, {"owner": {"reputation": 848, "user_id": 9815377, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_ix-HrP8dks/AAAAAAAAAAI/AAAAAAAAAGQ/EsjH8FtkC2k/photo.jpg?sz=128", "display_name": "sephiroth", "link": "https://stackoverflow.com/users/9815377/sephiroth"}, "edited": false, "score": 1, "creation_date": 1573657390, "post_id": 58839829, "comment_id": 103954003, "body": "Explain what you&#39;re trying to achieve and maybe we can help you"}, {"owner": {"reputation": 3, "user_id": 12367442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/684beab080f94da62492db8a84c413db?s=128&d=identicon&r=PG&f=1", "display_name": "Praveen", "link": "https://stackoverflow.com/users/12367442/praveen"}, "edited": false, "score": 0, "creation_date": 1573657480, "post_id": 58839829, "comment_id": 103954056, "body": "I am using a 3D array of strings . Its called inventory data structures.   In that Iam storing floating points as well as character as strings but I want to convert valid strings to float type  and I want to access it from there itself. Is it possible??"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1573657703, "post_id": 58839829, "comment_id": 103954174, "body": "Store both strings and floats. Only use the floats when they are valid."}, {"owner": {"reputation": 848, "user_id": 9815377, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_ix-HrP8dks/AAAAAAAAAAI/AAAAAAAAAGQ/EsjH8FtkC2k/photo.jpg?sz=128", "display_name": "sephiroth", "link": "https://stackoverflow.com/users/9815377/sephiroth"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1573658925, "post_id": 58839829, "comment_id": 103954856, "body": "Instead of a 3D array of simple strings, you could make a 3D array of a custom data structure that fits your needs, something like storing both strings and floats as @Lundin suggested or even a wrapper to string with a <code>.toFloat()</code> method."}, {"owner": {"reputation": 3, "user_id": 12367442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/684beab080f94da62492db8a84c413db?s=128&d=identicon&r=PG&f=1", "display_name": "Praveen", "link": "https://stackoverflow.com/users/12367442/praveen"}, "edited": false, "score": 0, "creation_date": 1573660608, "post_id": 58839829, "comment_id": 103955924, "body": "I can&#39;t change the original code as it is given by my professor. He used a 3 D matrix and gave the following problem statement.  Write a function to  convert between the data types. You know that table houses float data as well in the form of  strings. Write a function to convert such strings to float values. You need to devise a  mechanism to only convert the valid fields. Example: the field \u2018car\u2019 should not be converted to  float type."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 2, "creation_date": 1573662454, "post_id": 58839829, "comment_id": 103957039, "body": "@PraveenNaik That statement doesn&#39;t seem to say anything about storing the <code>float</code> in the same place as the string.  It also doesn&#39;t say what to do with the converted values.  Do you just print them or store them elsewhere?  I suspect you don&#39;t fully understand what is being asked. Perhaps placing the complete problem description in your question would clarify things."}], "answers": [{"comments": [{"owner": {"reputation": 47633, "user_id": 3889449, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/eb07e0f09deb982a1a0deedca7a5c002?s=128&d=identicon&r=PG", "display_name": "Marco Bonelli", "link": "https://stackoverflow.com/users/3889449/marco-bonelli"}, "edited": false, "score": 0, "creation_date": 1573657189, "post_id": 58839860, "comment_id": 103953889, "body": "I get what you&#39;re trying to say.... but this is totally <b>not</b> what OP wants."}, {"owner": {"reputation": 121, "user_id": 7981505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9810108e3c8b0ecb0b582b29213f21b6?s=128&d=identicon&r=PG&f=1", "display_name": "ghost_duke", "link": "https://stackoverflow.com/users/7981505/ghost-duke"}, "edited": false, "score": 0, "creation_date": 1573661035, "post_id": 58839860, "comment_id": 103956162, "body": "What the hell, this is literally one of the best ways of doing it, needs minor changes but yes. OP say &quot;Now I don&#39;t want to use a new variable &#39;i&#39; instead, I want to store it in str itself. It is required for me to access data from str. Is it possible ?? If not suggest a better solution or indirect method.&quot;"}], "tags": [], "owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "is_accepted": false, "score": -2, "last_activity_date": 1573657154, "creation_date": 1573657154, "answer_id": 58839860, "question_id": 58839829, "link": "https://stackoverflow.com/questions/58839829/can-i-change-the-datatype-of-previously-declared-variable-in-c/58839860#58839860", "title": "Can I change the datatype of previously declared variable in C?", "body": "<p>You can use <code>union</code> for that.</p>\n\n<pre><code>union mytype {\n  char * str;\n  float f;\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 12367442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/684beab080f94da62492db8a84c413db?s=128&d=identicon&r=PG&f=1", "display_name": "Praveen", "link": "https://stackoverflow.com/users/12367442/praveen"}, "edited": false, "score": 0, "creation_date": 1573661778, "post_id": 58840167, "comment_id": 103956618, "body": "Thank You. Even though this doesn&#39;t completely solve my problem but I can use it as an indirect method. I wish I could able to explain my problem statement more clearly."}], "tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 1, "last_activity_date": 1573658189, "creation_date": 1573658189, "answer_id": 58840167, "question_id": 58839829, "link": "https://stackoverflow.com/questions/58839829/can-i-change-the-datatype-of-previously-declared-variable-in-c/58840167#58840167", "title": "Can I change the datatype of previously declared variable in C?", "body": "<p>Since the pointer returned by <code>malloc()</code> is sufficiently well aligned to be used as a pointer to any type, you could (but probably shouldn't) use:</p>\n\n<pre><code>assert(sizeof(float) &lt;= 10);\nvoid *data = malloc(10);\nchar *str = data;\nstrcpy(str, \"123.4\");\nfloat *vp = data;\n*vp = strtof(str, NULL);\n\n\u2026use *vp\u2026\n\nfree(data);\n</code></pre>\n\n<p>And now you can use <code>*vp</code> for the <code>float</code> value.  However, that's ridiculous compared with:</p>\n\n<pre><code>char *str = malloc(10);\nstrcpy(str, \"123.4\");\nfloat value = strtof(str, NULL);\n\n\u2026use value\u2026\n\nfree(str);\n</code></pre>\n\n<p>which is basically your original code \u2014 that you decided for unclear reasons was not what you wanted to do.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 0, "last_activity_date": 1573658370, "creation_date": 1573658370, "answer_id": 58840230, "question_id": 58839829, "link": "https://stackoverflow.com/questions/58839829/can-i-change-the-datatype-of-previously-declared-variable-in-c/58840230#58840230", "title": "Can I change the datatype of previously declared variable in C?", "body": "<p>There is a way to do it, but it's ugly, unsafe, may not work as expected, and is most definitely <em>not</em> recommended.  </p>\n\n<p>You can treat the first <code>sizeof (double)</code> bytes of the memory pointed to by <code>str</code> as a <code>double</code><sup>1</sup>:</p>\n\n<pre><code>*(double *)str = strtod( str, NULL );\n</code></pre>\n\n<p>Basically, we're treating <code>str</code> as the address of a <code>double</code> object and assigning the result of <code>strtod</code> to it.  To access that <code>double</code> value, you'd need to cast again:</p>\n\n<pre><code>printf( \"value stored in str = %f\\n\", *(double *) str );\n</code></pre>\n\n<p>Now, this means we've overwritten the first <code>sizeof (double)</code> bytes of the string with the <code>double</code> value, so you've lost the original string value.  If you need to preserve the original string value while also treating it as a floating-point value, then you <em>have</em> to use separate objects to do so.  C isn't Python or Javascript, and values don't magically change their representation based on context.  </p>\n\n<p><hr>\n<sup></p>\n\n<ol>\n<li>Unless you're really constrained on memory or have a specific reason to use <code>float</code>, use <code>double</code> instead.  This also means you need to make sure the memory you allocate is <em>at least</em> <code>sizeof (double)</code> bytes wide.\n</ol>\n\n<p></sup></p>\n"}], "owner": {"reputation": 3, "user_id": 12367442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/684beab080f94da62492db8a84c413db?s=128&d=identicon&r=PG&f=1", "display_name": "Praveen", "link": "https://stackoverflow.com/users/12367442/praveen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 1, "accepted_answer_id": 58840167, "answer_count": 3, "score": -5, "last_activity_date": 1573662191, "creation_date": 1573657047, "last_edit_date": 1573662191, "question_id": 58839829, "link": "https://stackoverflow.com/questions/58839829/can-i-change-the-datatype-of-previously-declared-variable-in-c", "title": "Can I change the datatype of previously declared variable in C?", "body": "<p>I have declared a string and using malloc function I allocated the memory... Now I want to change this string into a floating type.</p>\n\n<pre><code>char *str;\nstr=malloc(sizeof(char)*10);\nstrcpy(str,\"123.4\");\nfloat i=strtof(str, NULL);\n</code></pre>\n\n<p>Now I don't want to use a new variable 'i'  instead, I want to store it in str  itself. It is required for me to access data from 'str'<br>\n1. Is it possible ??<br>\n2. If not suggest a better solution or indirect method.<br>\nPlease answer 1st question clearly.</p>\n"}, {"tags": ["c", "embedded-linux", "crc", "modbus", "crc16"], "comments": [{"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 1, "creation_date": 1573657055, "post_id": 58839611, "comment_id": 103953809, "body": "If you use this <a href=\"http://www.sunshine2k.de/coding/javascript/crc/crc_js.html\" rel=\"nofollow noreferrer\">online crc calculator</a>, click on CRC16, then select CRC16_MODBUS, it matches the first loop. I don&#39;t know what the purpose of the second loop is, since it&#39;s just reversing the data. Is there a case where a message bytes are sent in reverse order? (Note - the bits of each byte are sent in reverse order, and this is taken into account in the first loop.)"}, {"owner": {"reputation": 21, "user_id": 8381528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae05c6206aa1b3df0eb29764274dfcfe?s=128&d=identicon&r=PG&f=1", "display_name": "MXDel", "link": "https://stackoverflow.com/users/8381528/mxdel"}, "reply_to_user": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1573658892, "post_id": 58839611, "comment_id": 103954829, "body": "thanks @rcgldr .can you please tell me what&#39;s the purpose of this line? why str array is filled with 1..9? uint8_t str[] = &quot;123456789&quot;;"}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 1, "creation_date": 1573659802, "post_id": 58839611, "comment_id": 103955428, "body": "The 9 character string &quot;123456789&quot; became a standard to use as data for CRC algorithm verification (so you can compare your CRC implementation to known working implementations, with a relatively short string). I don&#39;t know the history behind the choice to use that string."}], "owner": {"reputation": 21, "user_id": 8381528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae05c6206aa1b3df0eb29764274dfcfe?s=128&d=identicon&r=PG&f=1", "display_name": "MXDel", "link": "https://stackoverflow.com/users/8381528/mxdel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 325, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573666369, "creation_date": 1573656324, "last_edit_date": 1573666369, "question_id": 58839611, "link": "https://stackoverflow.com/questions/58839611/how-to-calculate-crc-for-modbus-16-bit", "title": "how to calculate CRC for modbus 16 bit", "body": "<p>How to calculate MODBUS CRC(16bit) for 1 byte of data in C? I have referred some codes but didn't understand properly. user wants to give polynomial and data at run time. Can anybody help me out with some code?  I have tried this below code by referring the most below example, but I'm stuck in between. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;string.h&gt;\nint main(){\n\nstring msg;\nstring crc;\nstring encoded=\"\";\nprintf(\"enter msg: \");\nscanf(\"%s\", &amp;msg);\nprintf(\"enter the polynomial:\");\nscanf(\"%s\", &amp;crc);\nint m=strlen(msg);\nint n = strlen(crc);\n//encoded += msg;\nfor(int i=1;i&lt;=n-1;i++) \n</code></pre>\n\n<p>after this what to do?</p>\n\n<p>I have referred the below code.\nhere I have 2 doubts. </p>\n\n<p>what actually these line(inside main() indicates? ---->     uint8_t str[] = \"123456789\";\n                                                  ---->     crc = crc16_update(crc, str[8-i]);\n                                                  ---->     and why 2 times for loop is running inside main() and why 2 times the polynomial is initiated?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\nuint16_t crc16_update(uint16_t crc, uint8_t a) {\n    int i;\n\n    crc ^= (uint16_t)a;\n    for (i = 0; i &lt; 8; ++i) {\n        if (crc &amp; 1)\n            crc = (crc &gt;&gt; 1) ^ 0xA001;\n        else\n            crc = (crc &gt;&gt; 1);\n    }\n\n    return crc;\n}\n\nint main(void) {\n    uint16_t crc;\n    int i;\n    uint8_t str[] = \"123456789\";\n\n    crc = 0xFFFF;\n    for(i = 0; i &lt; 9; i++)\n        crc = crc16_update(crc, str[i]);\n    printf(\"%X\\n\", (int)crc);\n\n    crc = 0xFFFF;\n    for(i = 0; i &lt; 9; i++)\n        crc = crc16_update(crc, str[8-i]);\n    printf(\"%X\\n\", (int)crc);\n\n}\n</code></pre>\n"}, {"tags": ["c", "struct"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 4, "creation_date": 1573655792, "post_id": 58839452, "comment_id": 103953105, "body": "The short answer is &quot;no&quot;. The long answer is &quot;Unfortunately not&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 758, "user_id": 7732820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15065f5a9c803122ab2080f83dc39dd3?s=128&d=identicon&r=PG&f=1", "display_name": "Lavair", "link": "https://stackoverflow.com/users/7732820/lavair"}, "edited": false, "score": 0, "creation_date": 1573656461, "post_id": 58839488, "comment_id": 103953464, "body": "Is this approach with the default value common? Because I could equivalently check for every single arg if it is uninitialized and just use a big if condition which checks for each arg if all is uninitialized. But I would prefer a dynamic approach where I don&#39;t have to change at multiple ends each time I change argument functionalities."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 758, "user_id": 7732820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15065f5a9c803122ab2080f83dc39dd3?s=128&d=identicon&r=PG&f=1", "display_name": "Lavair", "link": "https://stackoverflow.com/users/7732820/lavair"}, "edited": false, "score": 1, "creation_date": 1573656629, "post_id": 58839488, "comment_id": 103953564, "body": "@Lavair Instead of printing help if only -h is specified, just don&#39;t bother checking the other arguments if -h is specified and exit after printing the help message.  That&#39;s what most command line utilities do."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 1, "last_activity_date": 1573655860, "creation_date": 1573655860, "answer_id": 58839488, "question_id": 58839452, "link": "https://stackoverflow.com/questions/58839452/is-there-a-fast-way-to-check-if-all-attributes-inside-an-initialized-struct-are/58839488#58839488", "title": "Is there a fast way to check if all attributes inside an initialized struct are uninitialized?", "body": "<p>In general, there's no way to know whether a variable is initialized or not.  For memory returned by <code>malloc</code>, all memory is uninitialized.</p>\n\n<p>You need some way of keeping track of that yourself, either by assigning some known default values or separate flag variables.  </p>\n\n<p>Regarding command line arguments passed to your program, each of them should have a default value.  Then if particular arguments contain the default value then you can display your help message.</p>\n"}, {"comments": [{"owner": {"reputation": 758, "user_id": 7732820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15065f5a9c803122ab2080f83dc39dd3?s=128&d=identicon&r=PG&f=1", "display_name": "Lavair", "link": "https://stackoverflow.com/users/7732820/lavair"}, "edited": false, "score": 0, "creation_date": 1573656244, "post_id": 58839518, "comment_id": 103953352, "body": "couldn&#39;t I use an enum instead of a struct for my particular getopt-problem and iterate through it? Or is there something, I am missing?"}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "reply_to_user": {"reputation": 758, "user_id": 7732820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15065f5a9c803122ab2080f83dc39dd3?s=128&d=identicon&r=PG&f=1", "display_name": "Lavair", "link": "https://stackoverflow.com/users/7732820/lavair"}, "edited": false, "score": 2, "creation_date": 1573656898, "post_id": 58839518, "comment_id": 103953719, "body": "@Lavair: For the XY problem, which really should be an entirely separate question, just have a flag that starts at 0 and set it to 1 every time you process an option."}], "tags": [], "owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "is_accepted": true, "score": 3, "last_activity_date": 1573655949, "creation_date": 1573655949, "answer_id": 58839518, "question_id": 58839452, "link": "https://stackoverflow.com/questions/58839452/is-there-a-fast-way-to-check-if-all-attributes-inside-an-initialized-struct-are/58839518#58839518", "title": "Is there a fast way to check if all attributes inside an initialized struct are uninitialized?", "body": "<p>First, we're going to have some repetition of types, so remove the gratuitous and actively harmful one:</p>\n\n<pre><code>some_type *a = (some_type *) malloc(sizeof(some_type));\n</code></pre>\n\n<p>becomes:</p>\n\n<pre><code>some_type *a = malloc(sizeof *a);\n</code></pre>\n\n<p>Now, there's no way to \"probe\" whether particular/all members are initialized, but you can at least ensure that everything not explicitly initialized gets a default initializeation, by assigning an initialized struct to yours:</p>\n\n<pre><code>*a = (some_type){ .id = x, .key = y }; // message and ret have default initializers\n</code></pre>\n\n<p>This isn't quite as good as what you wanted, but better than nothing.</p>\n\n<p>If you don't just want to help catch mistaken use of uninitialized data, but actually have a long-term need to know validity status, then dbush's answer is for you. You need either a separate member indicating validity flags for the optional members, or you need sentinel values (like null pointers, negative integers, etc.) which you will interpret as \"lacking any value\", and you need to set them up (which requires doing each individually, whereas a boolean flag could work with my default-initializer approach above).</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1573661731, "post_id": 58839880, "comment_id": 103956584, "body": "Curious: 8, 16 or 32 bit CRC?"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1573662140, "post_id": 58839880, "comment_id": 103956847, "body": "32 bit hardware  - STM32 uCs"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1573662151, "post_id": 58839880, "comment_id": 103956855, "body": "<i>using CRC for every data structures</i> How did you account for structure padding?"}], "tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 4, "last_activity_date": 1573662913, "last_edit_date": 1592644375, "creation_date": 1573657213, "answer_id": 58839880, "question_id": 58839452, "link": "https://stackoverflow.com/questions/58839452/is-there-a-fast-way-to-check-if-all-attributes-inside-an-initialized-struct-are/58839880#58839880", "title": "Is there a fast way to check if all attributes inside an initialized struct are uninitialized?", "body": "<p>I was using CRC for every data structure when I was programming uCs working in the radioactive environment. Use calloc, add CRC and probability that data is wrong will be minimized</p>\n<h1>edit</h1>\n<pre><code>struct data {\n    uint8_t a;\n};\n\ntypedef struct\n{\n    struct data d;\n    uint8_t _padding[4 * (sizeof(struct data) &amp; 3) - (sizeof(struct data) &amp; 3)];\n    uint32_t CRC;\n} __attribute__((packed)) data1;\n</code></pre>\n"}], "owner": {"reputation": 758, "user_id": 7732820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15065f5a9c803122ab2080f83dc39dd3?s=128&d=identicon&r=PG&f=1", "display_name": "Lavair", "link": "https://stackoverflow.com/users/7732820/lavair"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 58839518, "answer_count": 3, "score": 1, "last_activity_date": 1573662913, "creation_date": 1573655674, "last_edit_date": 1573655975, "question_id": 58839452, "link": "https://stackoverflow.com/questions/58839452/is-there-a-fast-way-to-check-if-all-attributes-inside-an-initialized-struct-are", "title": "Is there a fast way to check if all attributes inside an initialized struct are uninitialized?", "body": "<p>Consider the following struct:</p>\n\n<pre><code>typedef struct {\n    int id;\n    int *key;\n    char *message;\n    char ret;\n} some_type;\n</code></pre>\n\n<p>and inside my code I have now:</p>\n\n<pre><code>some_type *a = (some_type *) malloc(sizeof(some_type));\n</code></pre>\n\n<p>I initialized the struct but not its attributes yet. Is there a simple way to retrieve that kind of information? I want a function which gives me true if all attributes of an initialized struct are uninitialized.</p>\n\n<p><strong>EDIT:</strong> I am doing this because I want to realize a specific functionality in a <code>getopt</code> in my program. Arguments that are passed over command line by the user are collected in this struct. If no arguments except an \"-h\" is passed, I want to print out a help section. Thus, I thought I could use such a function to check if nothing else is initialized inside my struct. If this is not possible, can somebody else think of a short way to achieve my target?</p>\n"}, {"tags": ["c", "multithreading", "linux-kernel", "linux-device-driver", "kernel-module"], "answers": [{"comments": [{"owner": {"reputation": 190, "user_id": 1985755, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3a0ef3a561c16d12a688292f7648fa28?s=128&d=identicon&r=PG", "display_name": "hit.at.ro", "link": "https://stackoverflow.com/users/1985755/hit-at-ro"}, "edited": false, "score": 0, "creation_date": 1573685114, "post_id": 58839521, "comment_id": 103967209, "body": "To add more information,   You need to embed a struct or container that contains details like :  file *pfile, const char __user *buffer, size_t length, loff_t *offset . Retrieve this from the void pointer (void *data) and marshall them to the write call."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 190, "user_id": 1985755, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3a0ef3a561c16d12a688292f7648fa28?s=128&d=identicon&r=PG", "display_name": "hit.at.ro", "link": "https://stackoverflow.com/users/1985755/hit-at-ro"}, "edited": false, "score": 0, "creation_date": 1573724742, "post_id": 58839521, "comment_id": 103979476, "body": "Well, you don&#39;t <i>need</i> to. That&#39;s only if you want to pass more than 1 parameter through from <code>exer_simple_module_init</code> to <code>exer_write</code>."}], "tags": [], "owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "is_accepted": true, "score": 1, "last_activity_date": 1573655980, "creation_date": 1573655980, "answer_id": 58839521, "question_id": 58839420, "link": "https://stackoverflow.com/questions/58839420/linux-kernel-threads-how-to-pass-the-linux-module-write-function-as-the-functi/58839521#58839521", "title": "Linux Kernel Threads : How to pass the Linux module write function as the function that the thread has to execute?", "body": "<p>You can't. Your thread function has to use this format:</p>\n\n<pre><code>int my_thread_function(void *data)\n</code></pre>\n\n<p>You can call it whatever you want - it doesn't have to be called <code>my_thread_function</code> - and the parameter doesn't have to be called <code>data</code> but it does have to be a <code>void *</code>.</p>\n\n<p>This will not work:</p>\n\n<pre><code>ssize_t exer_write(struct file *pfile, const char __user *buffer, size_t length, loff_t *offset)\n</code></pre>\n\n<p>I suggest writing a new function to be your thread function:</p>\n\n<pre><code>int exer_write_in_thread(void *data) {\n    exer_write(???, ???, ???, ???);\n    return 0;\n}\n</code></pre>\n\n<p>Obviously you have to figure out what arguments you want to call <code>exer_write</code> with.</p>\n"}], "owner": {"reputation": 375, "user_id": 11958500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/808134f06cedf9957a27a924d1589f3a?s=128&d=identicon&r=PG&f=1", "display_name": "gaston", "link": "https://stackoverflow.com/users/11958500/gaston"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 256, "favorite_count": 0, "accepted_answer_id": 58839521, "answer_count": 1, "score": 0, "last_activity_date": 1573655980, "creation_date": 1573655583, "question_id": 58839420, "link": "https://stackoverflow.com/questions/58839420/linux-kernel-threads-how-to-pass-the-linux-module-write-function-as-the-functi", "title": "Linux Kernel Threads : How to pass the Linux module write function as the function that the thread has to execute?", "body": "<p>I am developing <strong>Linux kernel module</strong> that communicate with user space program. This module waits for a message which is being sent from user space in order to print it in kernel mode.</p>\n\n<p>This is the module :</p>\n\n<pre><code>#include &lt;linux/init.h&gt;\n#include &lt;linux/module.h&gt;\n#include &lt;linux/fs.h&gt;\n#include &lt;linux/device.h&gt;  \n#include &lt;linux/kernel.h&gt;\n#include &lt;linux/uaccess.h&gt;\n\nMODULE_LICENSE(\"GPL\");      \nMODULE_AUTHOR(\"Gaston\");  \nMODULE_DESCRIPTION(\"A simple Linux char driver\"); \nMODULE_VERSION(\"0.1\"); \n\n#define MAX 256\nstatic char message[MAX] =\"\";      ///&lt; Memory for the string that is passed from userspace\n\nssize_t exer_open(struct inode *pinode, struct file *pfile) {\n\n    printk(KERN_INFO \"Device has been opened\\n\");\n    return 0;\n}\n\n\nssize_t exer_read(struct file *pfile, char __user *buffer, size_t length, loff_t *offset) {\n\n    return 0;\n}\n\n\nssize_t exer_write(struct file *pfile, const char __user *buffer, size_t length, loff_t *offset) {\n    if (length &gt; MAX)\n        return -EINVAL;\n\n    if (copy_from_user(message, buffer, length) != 0)\n        return -EFAULT;\n\n    printk(KERN_INFO \"Received %s characters from the user\\n\", message);\n    return 0;\n\n}   \n\n\nssize_t exer_close(struct inode *pinode, struct file *pfile) {\n\n    printk(KERN_INFO \"Device successfully closed\\n\");\n    return 0;\n}\n\n\nstruct file_operations exer_file_operations = { \n    .owner = THIS_MODULE,\n    .open = exer_open,\n    .read = exer_read,\n    .write = exer_write,\n    .release = exer_close,\n};\n\n\nint exer_simple_module_init(void) {\n\n    printk(KERN_INFO \"Initializing the LKM\\n\");\n    register_chrdev(240, \"Simple Char Drv\", &amp;exer_file_operations);\n    return 0;\n}\n\n\nvoid exer_simple_module_exit(void) {\n\n    unregister_chrdev(240, \"Simple Char Drv\");\n}\n\n\nmodule_init(exer_simple_module_init);\nmodule_exit(exer_simple_module_exit);\n</code></pre>\n\n<p>This is the user-space program :</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;errno.h&gt;\n#include&lt;fcntl.h&gt;\n#include&lt;string.h&gt;\n#include&lt;unistd.h&gt;\n\n\n#define BUFFER_LENGTH 256 \n\nint main()\n\n{\n\nint ret, fd;\nchar stringToSend[BUFFER_LENGTH];\n\n\nfd = open(\"/dev/char_device\", O_RDWR);             // Open the device with read/write access\n\nif (fd &lt; 0)\n    {\n            perror(\"Failed to open the device...\");\n            return errno;\n    }\n\n\nprintf(\"Type in a short string to send to the kernel module:\\n\");\n\nscanf(\"%s\", stringToSend);                // Read in a string (with spaces)\n\nprintf(\"Writing message to the device [%s].\\n\", stringToSend);\n\nret = write(fd, stringToSend, strlen(stringToSend)); // Send the string to the LKM\n\nif (ret &lt; 0)\n    {\n            perror(\"Failed to write the message to the device.\");\n            return errno;\n    }\n\nreturn 0;\n\n}\n</code></pre>\n\n<p>This works fine and the message that I enter from user-space is printed in kernel space.</p>\n\n<p>Now, I am using this example in order to learn <strong>kernel thread programming</strong>.</p>\n\n<p>I am trying to make the LKM <strong>write function</strong> as a function that kernel thread has to execute, so I modified my module like this :</p>\n\n<pre><code>#include &lt;linux/init.h&gt;\n#include &lt;linux/module.h&gt;\n#include &lt;linux/fs.h&gt;\n#include &lt;linux/device.h&gt;  \n#include &lt;linux/kernel.h&gt;\n#include &lt;linux/uaccess.h&gt;\n#include &lt;linux/kthread.h&gt;\n\nMODULE_LICENSE(\"GPL\");      \nMODULE_AUTHOR(\"Gaston\");  \nMODULE_DESCRIPTION(\"A simple Linux char driver\"); \nMODULE_VERSION(\"0.1\"); \n\n\n#define MAX 256\nstatic struct task_struct *thread1;\nstatic char message[MAX] =\"\";           ///&lt; Memory for the string that is passed from userspace\n\n\nssize_t exer_open(struct inode *pinode, struct file *pfile) {\n\n    printk(KERN_INFO \"Device has been opened\\n\");\n    return 0;\n}\n\n\n\nssize_t exer_write(struct file *pfile, const char __user *buffer, size_t length, loff_t *offset) {\n\n    if (length &gt; MAX)\n        return -EINVAL;\n\n    printk(\"Thread_fuction is running ...\\n\");\n\n    if (copy_from_user(message, buffer, length) != 0)\n        return -EFAULT;\n\n    printk(KERN_INFO \"Received this message : %s ,from the user\\n\", message);\n\n    return 0;\n\n}   \n\n\n\n\nstruct file_operations exer_file_operations = { \n    .owner = THIS_MODULE,\n    .open = exer_open,\n    .write = exer_write,    \n};\n\n\n\n\nint exer_simple_module_init(void) {\n\n    char our_thread[8]=\"thread1\";\n\n    printk(KERN_INFO \"Initializing the LKM\\n\");\n    register_chrdev(240, \"Simple Char Drv\", &amp;exer_file_operations);\n\n    thread1 = kthread_create(exer_write,NULL,our_thread);\n    if((thread1))\n            {\n                printk(KERN_INFO \"Thread is created\");\n                wake_up_process(thread1);\n            }\n\n    return 0;\n}\n\n\n\nvoid exer_simple_module_exit(void) {\n\n    int ret;    \n\n    unregister_chrdev(240, \"Simple Char Drv\");\n\n    ret = kthread_stop(thread1);\n    if(!ret)\n        printk(KERN_INFO \"Thread stopped\");\n}\n\n\nmodule_init(exer_simple_module_init);\nmodule_exit(exer_simple_module_exit);\n</code></pre>\n\n<p>The problem here, when I compile the module, an error occurs :</p>\n\n<blockquote>\n  <p>/exer_simple_char_drv.c:63:27: error: passing argument 1 of\n  \u2018kthread_create_on_node\u2019 from incompatible pointer type\n  [-Werror=incompatible-pointer-types]   thread1 =\n  kthread_create(exer_write,NULL,our_thread);</p>\n</blockquote>\n\n<p>Searching the net, I find that a thread is created by the call to the function :</p>\n\n<pre><code>struct task_struct *kthread_create(int (*function)(void *data), void *data, const char name[], ...)\n</code></pre>\n\n<p>This function has as first argument the function that the thread has to execute and has as argument <code>(void *data)</code>, but, my write kernel function has not the same arguments : </p>\n\n<pre><code>ssize_t exer_write(struct file *pfile, const char __user *buffer, size_t length, loff_t *offset)\n</code></pre>\n\n<p>Is there a way to solve this problem please ? How can I modify my Linux kernel in order to execute the <code>write</code> function as a thread ? </p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c", "algorithm", "cs50"], "comments": [{"owner": {"reputation": 1428, "user_id": 7189060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d72ad91327f4eca9e7aaf84abfd403c3?s=128&d=identicon&r=PG&f=1", "display_name": "StillFantasy", "link": "https://stackoverflow.com/users/7189060/stillfantasy"}, "edited": false, "score": 1, "creation_date": 1573654980, "post_id": 58839140, "comment_id": 103952656, "body": "Please provide the problem detail so that we can help you"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1573667981, "post_id": 58839140, "comment_id": 103959845, "body": "Welcome to StackOverflow. See <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal, reproducible example</a>.  Your problem appears to be faulting on invalid input, and inserting newlines in front of the expected output in many cases.  Show your attempts to diagnose and resolve these; the effects should be quite limited in your code."}], "answers": [{"tags": [], "owner": {"reputation": 4475, "user_id": 5577076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qG4gB.png?s=128&g=1", "display_name": "DinoCoderSaurus", "link": "https://stackoverflow.com/users/5577076/dinocodersaurus"}, "is_accepted": false, "score": 1, "last_activity_date": 1573735256, "creation_date": 1573735256, "answer_id": 58857039, "question_id": 58839140, "link": "https://stackoverflow.com/questions/58839140/cs50-credit-task-review/58857039#58857039", "title": "CS50 Credit task review", "body": "<p>Good news! CS50 has their own SE community that you can find <a href=\"https://cs50.stackexchange.com/\">here</a>.</p>\n\n<p>Pay close attention to what the errors are telling you. There is an extra carriage return (<code>\\n</code>) being output somewhere, as indicated by this: <code>:( identifies 378282246310005 as AMEX expected \"AMEX\\n\", not \"\\nAMEX\\n\"</code>. Notice the difference between what check50 expects (<code>\"AMEX\\n\"</code>) and what the program outputs (<code>\"\\nAMEX\\n\"</code>). Once that is corrected it will eliminate 5 of the errors. Good start.</p>\n\n<p>Review the code to see where it is returning an exit code of 1. That is not required by the spec. Stick to the spec. Sometimes more is not better :).  When that is corrected, it will eliminate the last two errors. </p>\n\n<p>Perhaps these seem like small details that shouldn't affect grading. But if a boss or a customer expects a specification to be followed exactly, these \"small details\",could translate to real money.  </p>\n"}], "owner": {"reputation": 9, "user_id": 12367261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d09aa51a9d6e2d27b74748347f72190?s=128&d=identicon&r=PG&f=1", "display_name": "Snowing Yeti", "link": "https://stackoverflow.com/users/12367261/snowing-yeti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 345, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1573736480, "creation_date": 1573654644, "last_edit_date": 1573736480, "question_id": 58839140, "link": "https://stackoverflow.com/questions/58839140/cs50-credit-task-review", "title": "CS50 Credit task review", "body": "<p>I've got a very interesting case. I've written source code compiled and it was work but when I added my code to course for review got next issues:</p>\n\n<pre><code>:) credit.c exists.\n\n:) credit.c compiles.\n\n:( identifies 378282246310005 as AMEX expected \"AMEX\\n\", not \"\\nAMEX\\n\"\n\n:( identifies 371449635398431 as AMEX expected \"AMEX\\n\", not \"\\nAMEX\\n\"\n\n:( identifies 5555555555554444 as MASTERCARD\n    expected \"MASTERCARD\\n\", not \"\\nMASTERCARD\\n\"\n\n:) identifies 5105105105105100 as MASTERCARD\n\n:) identifies 4111111111111111 as VISA\n\n:( identifies 4012888888881881 as VISA\n    expected \"VISA\\n\", not \"\\nVISA\\n\"\n\n:( identifies 1234567890 as INVALID\n    expected \"INVALID\\n\", not \"\\nINVALID\\n\"\n\n:) identifies 369421438430814 as INVALID\n\n:( identifies 4062901840 as INVALID\n    expected exit code 0, not 1\n\n:) identifies 5673598276138003 as INVALID\n\n:( identifies 4111111111111113 as INVALID\n    expected exit code 0, not 1\n\n:) rejects a non-numeric input of \"foo\"\n\n:) rejects a non-numeric input of \"\"\n</code></pre>\n\n<p>The next part is my code:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;cs50.h&gt;\n#include &lt;math.h&gt;\n\nint main (void)\n{\n    long long card_num;\n\n\n    // getting card number    \n    do\n    {\n        card_num = get_long(\"Number: \\n\");\n    }\n    while (card_num &lt; 1 || card_num &gt; 9999999999999999);\n\n    for (int i = 0; i &lt; card_num.length(); i++)\n    {\n        if (card_num[i] == '-')\n            printf('foo\\n');\n            card_num[i] == '';\n        else (card_num[i] == ' ')\n            printf ('foo\\n');\n            card_num[i] == '';\n    }\n\n    long long temp_num = card_num;\n\n    int count = 0;\n\n    while (temp_num &gt; 0)\n    {\n        temp_num = temp_num / 10;\n        count++;\n    }\n\n\n    // umber volume cheking    \n    if (count != 13 &amp;&amp; count != 15 &amp;&amp; count != 16)\n    {\n        printf(\"INVALID\\n\");\n        return 1;\n    }\n\n    // luna's algorithm checking    \n    int sum = 0;\n    temp_num = card_num;\n    for (int i = 1; i &lt;= count; i++)\n    {\n        int digit = temp_num % 10;\n        if (i % 2 == 0)\n        {\n            digit *= 2;\n            if (digit &gt; 9)\n            {\n                digit -= 9;\n            }\n        }\n\n        sum += digit;\n        temp_num /= 10;\n    }\n\n    if (sum % 10 != 0)\n    {\n        printf(\"INVALID\\n\");\n        return 1;\n    }    \n\n    // bank info cheking    \n    temp_num = card_num;\n    while (temp_num &gt; 100)\n    {\n        temp_num = temp_num / 10;\n    }\n\n    int company_id = temp_num;\n    if (company_id &gt; 50 &amp;&amp; company_id &lt; 56 &amp;&amp; count == 16)\n    {\n        printf(\"MASTERCARD\\n\");\n    }\n    else if ((company_id == 34 || company_id == 37) &amp;&amp; (count == 15))\n    {\n        printf(\"AMEX\\n\");\n    }\n    else if ((company_id / 10 == 4) &amp;&amp; (count == 13 || count == 16))\n    {\n        printf(\"VISA\\n\");\n    }\n    else\n    {\n        printf(\"INVALID\\n\");\n    }\n    return 0;    \n}\n</code></pre>\n"}, {"tags": ["c", "json", "cjson"], "answers": [{"comments": [{"owner": {"reputation": 132, "user_id": 11633464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdb13d27fb20606ae0f2530aec2f52ee?s=128&d=identicon&r=PG&f=1", "display_name": "hw-135", "link": "https://stackoverflow.com/users/11633464/hw-135"}, "edited": false, "score": 0, "creation_date": 1573657918, "post_id": 58839658, "comment_id": 103954298, "body": "Thanks a lot specially for the <code>cJSON_ArrayForEach</code> bit. I have one doubt though, if I want to make it absolutely dynamic for future purposes, <code>elem-&gt;valueint</code> won&#39;t work. If the value is a string and as before I cannot know that, how can I write it in a more general way instead of using <code>valueint</code>? Do I need to do a <code>elem-&gt;type</code> check each time?"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "reply_to_user": {"reputation": 132, "user_id": 11633464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdb13d27fb20606ae0f2530aec2f52ee?s=128&d=identicon&r=PG&f=1", "display_name": "hw-135", "link": "https://stackoverflow.com/users/11633464/hw-135"}, "edited": false, "score": 0, "creation_date": 1573658161, "post_id": 58839658, "comment_id": 103954415, "body": "@rb-93 There are functions for checking to see if a value is a string, number, etc. that should be checked first in robust code, yes."}, {"owner": {"reputation": 132, "user_id": 11633464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdb13d27fb20606ae0f2530aec2f52ee?s=128&d=identicon&r=PG&f=1", "display_name": "hw-135", "link": "https://stackoverflow.com/users/11633464/hw-135"}, "edited": false, "score": 0, "creation_date": 1573725924, "post_id": 58839658, "comment_id": 103980184, "body": "I have one question regarding what you wrote. &quot;The easy way is as a bunch of if/else if&#39;s and strcmp()&quot;. I read somewhere that in C I cannot check if struct members exists. Is that the reason why I have to check for each member with <code>if&#47;else</code>?"}, {"owner": {"reputation": 132, "user_id": 11633464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdb13d27fb20606ae0f2530aec2f52ee?s=128&d=identicon&r=PG&f=1", "display_name": "hw-135", "link": "https://stackoverflow.com/users/11633464/hw-135"}, "edited": false, "score": 0, "creation_date": 1573733438, "post_id": 58839658, "comment_id": 103984487, "body": "Another question which popped in my mind, can I populate a <code>char *array[]</code>  with <code>elem-&gt;string</code> and <code>elem-&gt;valueint</code> separated  by whitespaces to emulate <code>char *argv[]</code> used in taking command line arguments?"}], "tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": true, "score": 1, "last_activity_date": 1573656482, "creation_date": 1573656482, "answer_id": 58839658, "question_id": 58838914, "link": "https://stackoverflow.com/questions/58838914/cjson-key-value-parsing/58839658#58839658", "title": "cJSON Key-Value Parsing", "body": "<p>Here's an example program that walks all the elements of the <code>parameters</code> array from your sample JSON, and prints out the names of the fields of each object in the array:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;cJSON.h&gt;\n\nint main(void) {\n  const char *json_string = \"{\\\"text\\\":\\\"HelloWorld!!\\\",\\\"parameters\\\":[{\\\"length\\\":10},{\\\"width\\\":16},{\\\"height\\\":16}]}\";\n\n  cJSON *root = cJSON_Parse(json_string);\n  cJSON *parameters = cJSON_GetObjectItemCaseSensitive(root, \"parameters\");\n  puts(\"Parameters:\");\n  cJSON *parameter;\n  cJSON_ArrayForEach(parameter, parameters) {\n    /* Each element is an object with unknown field(s) */\n    cJSON *elem;\n    cJSON_ArrayForEach(elem, parameter) {\n      printf(\"Found key '%s', set to %d\\n\", elem-&gt;string, elem-&gt;valueint);     \n    }\n  }\n\n  cJSON_Delete(root);\n  return 0;\n}\n</code></pre>\n\n<p>You can compare each field name against a list of the ones you care about (The easy way is as a bunch of <code>if</code>/<code>else if</code>'s and <code>strcmp()</code>), setting the appropriate field of your struct for each one.</p>\n\n<p>The important thing here is using the <code>cJSON_ArrayForEach</code> macro to walk both the elements of the array (cJSON represents JSON arrays as linked lists, and getting each element by index like in your code makes iterating through the array an <code>O(N^2)</code> operation while this macro is <code>O(N)</code>), and the elements of each object in the array, since you don't know ahead of time which fields are in which object.</p>\n"}], "owner": {"reputation": 132, "user_id": 11633464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdb13d27fb20606ae0f2530aec2f52ee?s=128&d=identicon&r=PG&f=1", "display_name": "hw-135", "link": "https://stackoverflow.com/users/11633464/hw-135"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1370, "favorite_count": 1, "accepted_answer_id": 58839658, "answer_count": 1, "score": 1, "last_activity_date": 1573656482, "creation_date": 1573653920, "question_id": 58838914, "link": "https://stackoverflow.com/questions/58838914/cjson-key-value-parsing", "title": "cJSON Key-Value Parsing", "body": "<p>I am using cJSON to parse a JSON stored in <code>testdata.json</code> file which looks like this:</p>\n\n<pre><code>{\n    \"text\": \"HelloWorld!!\",\n    \"parameters\": [{\n            \"length\": 10\n        },\n        {\n            \"width\": 16\n        },\n\n        {\n            \"height\": 16\n        }\n    ]\n}\n</code></pre>\n\n<p>With the following I can access the <code>text</code> field.</p>\n\n<pre><code>int main(int argc, const char * argv[]) {\n\n    //open file and read into buffer\n\n    cJSON *root = cJSON_Parse(buffer);\n    char *text = cJSON_GetObjectItem(root, \"text\")-&gt;valuestring;\n    printf(\"text: %s\\n\", text); \n}\n</code></pre>\n\n<p>Note: These parameters are dynamic in the sense that there can be more parameters such as <code>volume</code>, <code>area</code>, etc depending upon what the JSON file contains. The idea is that I have a <code>struct</code> containing all these parameters and I have to check whether the parameters provided in the JSON exists or not and set the values accordingly.\nThe <code>struct</code> looks like:</p>\n\n<pre><code>typedef struct {\n   char *path;\n   int length;\n   int width;\n   int height;\n   int volume;\n   int area;\n   int angle;\n   int size;\n} JsonParameters;\n</code></pre>\n\n<p>I tried to do it like this:</p>\n\n<pre><code>cJSON *parameters = cJSON_GetObjectItem(root, \"parameters\");\nint parameters_count = cJSON_GetArraySize(parameters);\nprintf(\"Parameters:\\n\");\nfor (int i = 0; i &lt; parameters_count; i++) {\n\n    cJSON *parameter = cJSON_GetArrayItem(parameters, i);\n    int length = cJSON_GetObjectItem(parameter, \"length\")-&gt;valueint;\n    int width = cJSON_GetObjectItem(parameter, \"width\")-&gt;valueint;\n    int height = cJSON_GetObjectItem(parameter, \"height\")-&gt;valueint;\n    printf(\"%d %d %d\\n\",length, width, height);\n}\n</code></pre>\n\n<p>This returns <code>Memory access error (memory dumped)</code> plus I have to state what are the keys. As mentioned, I cannot know what will be the parameters. </p>\n\n<p>How can I store the key-value pairs (<code>\"length\":10</code>, <code>\"width\":16</code>, <code>\"height\":16</code> etc) and how can I check the keys against the valid parameters in <code>JsonParameters</code>?</p>\n"}, {"tags": ["c", "linux", "curl", "ftp", "libcurl"], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 4633702, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/88aa9dd3a7de72562c7d2631250992eb?s=128&d=identicon&r=PG&f=1", "display_name": "Tohkai", "link": "https://stackoverflow.com/users/4633702/tohkai"}, "edited": false, "score": 0, "creation_date": 1573652428, "post_id": 58838428, "comment_id": 103951128, "body": "Thanks for your interest, but, as I said, this happens before strdup: when I display the pointer passed by curl in my write function, it&#39;s already &quot;elf+unreadable chars&quot;"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 99, "user_id": 4633702, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/88aa9dd3a7de72562c7d2631250992eb?s=128&d=identicon&r=PG&f=1", "display_name": "Tohkai", "link": "https://stackoverflow.com/users/4633702/tohkai"}, "edited": false, "score": 3, "creation_date": 1573652564, "post_id": 58838428, "comment_id": 103951213, "body": "@Tohkai And how do you <i>print</i> the data? Using <code>printf</code> and the <code>%s</code> format? Then you have the same problem with binary data that can contain a zero byte anywhere inside itself, which <code>printf</code> will think is the string terminator. You just can&#39;t treat arbitrary binary data as strings, <i>at all</i>."}, {"owner": {"reputation": 99, "user_id": 4633702, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/88aa9dd3a7de72562c7d2631250992eb?s=128&d=identicon&r=PG&f=1", "display_name": "Tohkai", "link": "https://stackoverflow.com/users/4633702/tohkai"}, "edited": false, "score": 0, "creation_date": 1573652690, "post_id": 58838428, "comment_id": 103951284, "body": "But here&#39;s the thing: I thought it was the problem at first as well, but the initial binary file does not contain any ELF+unreadable chars at the start of it, so I don&#39;t even think it stops at 0 because these initial first characters are, well, nowhere to be found in the first place  EDIT: nvm it does, I must have opened the wrong file"}, {"owner": {"reputation": 99, "user_id": 4633702, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/88aa9dd3a7de72562c7d2631250992eb?s=128&d=identicon&r=PG&f=1", "display_name": "Tohkai", "link": "https://stackoverflow.com/users/4633702/tohkai"}, "edited": false, "score": 0, "creation_date": 1573653195, "post_id": 58838428, "comment_id": 103951542, "body": "Alright... I also thought printf didn&#39;t stop at &#39;\\0&#39; because, in the past, when I wanted to cut strings by putting a 0 where I wanted to cut, it would sometimes display the entire string anyway."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1573653298, "post_id": 58838428, "comment_id": 103951612, "body": "&quot;0&quot; or &#39;0&#39; do not equal the binary value <code>0</code>"}, {"owner": {"reputation": 99, "user_id": 4633702, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/88aa9dd3a7de72562c7d2631250992eb?s=128&d=identicon&r=PG&f=1", "display_name": "Tohkai", "link": "https://stackoverflow.com/users/4633702/tohkai"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1573653382, "post_id": 58838428, "comment_id": 103951663, "body": "@ryyker 0 is &#39;\\0&#39;. If you do str[0] = 0 or str[0] = &#39;\\0&#39;, it does the same thing as stated in the ascii table. I don&#39;t think I&#39;ve said otherwise anywhere"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 99, "user_id": 4633702, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/88aa9dd3a7de72562c7d2631250992eb?s=128&d=identicon&r=PG&f=1", "display_name": "Tohkai", "link": "https://stackoverflow.com/users/4633702/tohkai"}, "edited": false, "score": 0, "creation_date": 1573653596, "post_id": 58838428, "comment_id": 103951783, "body": "@Tohkai - Yes, I agree.  I was just clarifying your comment, 2 comments ago, <i>by putting a 0 where I wanted to cut</i> sounded like you were inserting a <code>0</code> into a string eg. <i>this is 0 a string</i>."}, {"owner": {"reputation": 99, "user_id": 4633702, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/88aa9dd3a7de72562c7d2631250992eb?s=128&d=identicon&r=PG&f=1", "display_name": "Tohkai", "link": "https://stackoverflow.com/users/4633702/tohkai"}, "edited": false, "score": 0, "creation_date": 1573653663, "post_id": 58838428, "comment_id": 103951825, "body": "Alright, understood, sorry for lacking clarity on this one, I did mean 0 as in &#39;\\0&#39;"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 3, "creation_date": 1573653859, "post_id": 58838428, "comment_id": 103951941, "body": "<i>&quot;I also thought printf didn&#39;t stop at &#39;\\0&#39; because, in the past, when I wanted to cut strings by putting a 0 where I wanted to cut, it would sometimes display the entire string anyway&quot;</i>: I don&#39;t believe you."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 3, "last_activity_date": 1573652459, "last_edit_date": 1573652459, "creation_date": 1573652364, "answer_id": 58838428, "question_id": 58838335, "link": "https://stackoverflow.com/questions/58838335/file-transferred-as-binary-via-libcurl-is-corrupted/58838428#58838428", "title": "File transferred as binary via libcurl is corrupted", "body": "<p>Your problem is that you treat binary data as a string.</p>\n\n<p>The <code>strdup</code> function works like any other string functions: It looks for the string terminator to find the end of the source string. And the string terminator <code>'\\0'</code> is the byte value <code>0</code>. So if the binary data contains any zero bytes (very very likely) then that will be seen as the end of the \"string\".</p>\n\n<p>Easy solution? Just do <code>return s.ptr;</code> But do note that there's no way to find out the length of the data using the returned pointer. So a better solution might be to return <code>s</code> itself (as it contains a pointer to the data as well as the size of it).</p>\n"}, {"comments": [{"owner": {"reputation": 99, "user_id": 4633702, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/88aa9dd3a7de72562c7d2631250992eb?s=128&d=identicon&r=PG&f=1", "display_name": "Tohkai", "link": "https://stackoverflow.com/users/4633702/tohkai"}, "edited": false, "score": 1, "creation_date": 1573657853, "post_id": 58839497, "comment_id": 103954256, "body": "usr_psswd also includes a separator, though. So there would definitely have to be at least + 1 to allocate for &#39;:&#39;"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 99, "user_id": 4633702, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/88aa9dd3a7de72562c7d2631250992eb?s=128&d=identicon&r=PG&f=1", "display_name": "Tohkai", "link": "https://stackoverflow.com/users/4633702/tohkai"}, "edited": false, "score": 0, "creation_date": 1573658310, "post_id": 58839497, "comment_id": 103954503, "body": "@Tohkai - That makes sense.  Added <code>+1</code> to malloc statement.  Thanks."}], "tags": [], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "is_accepted": false, "score": 1, "last_activity_date": 1573658255, "last_edit_date": 1573658255, "creation_date": 1573655891, "answer_id": 58839497, "question_id": 58838335, "link": "https://stackoverflow.com/questions/58838335/file-transferred-as-binary-via-libcurl-is-corrupted/58839497#58839497", "title": "File transferred as binary via libcurl is corrupted", "body": "<p>Most of the issues you are seeing are due to using techniques designed for working with strings, but are being applied to binary files.  </p>\n\n<p>When writing code that must at some point be used with binary data and file content, it is best to follow a couple of rules</p>\n\n<blockquote>\n  <p>1) Variables used to contain binary data should prefer <code>unsigned char</code> over <code>char</code>. For example:   </p>\n</blockquote>\n\n<pre><code>char *usr_psswd(char *user, char *psswd){...  \n</code></pre>\n\n<p>Should be written as </p>\n\n<pre><code>unsigned char *usr_psswd(unsigned char *user, size_t lenUser, unsigned char *psswd, size_t lenPsswd){...  \n</code></pre>\n\n<p>Note: Reason for including array lengths is covered below.</p>\n\n<p><em><a href=\"https://stackoverflow.com/questions/13642381/c-c-why-to-use-unsigned-char-for-binary-data\">More on the rational of using unsigned char with binary data</a></em>.  </p>\n\n<blockquote>\n  <p>2) Avoid use of string functions such as <code>strdup()</code>, <code>strlen()</code>, etc.  They are all written to look for the terminating null byte to indicated the end of a <em><a href=\"https://www.tutorialspoint.com/cprogramming/c_strings.htm\" rel=\"nofollow noreferrer\">C string</a></em>.  For example: ></p>\n</blockquote>\n\n<pre><code>usrpsswd = (char *)malloc(strlen(user) + strlen(psswd) + 2);\n</code></pre>\n\n<p>should be written as:</p>\n\n<pre><code> usrpsswd = malloc(lenUser + lenPasswd + 1);//No need for null terminator. (+1 for delimiter, per comments)\n                                        //usrpasswrd should be unsigned char *\n                                        //Casting return of malloc not recommended. in C.  \n</code></pre>\n\n<p><em><a href=\"https://stackoverflow.com/questions/2404567/how-to-reliably-get-size-of-c-style-array\">More on reliable ways to get array lengths in C.</a></em></p>\n"}], "owner": {"reputation": 99, "user_id": 4633702, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/88aa9dd3a7de72562c7d2631250992eb?s=128&d=identicon&r=PG&f=1", "display_name": "Tohkai", "link": "https://stackoverflow.com/users/4633702/tohkai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 271, "favorite_count": 0, "accepted_answer_id": 58838428, "answer_count": 2, "score": 1, "last_activity_date": 1573658255, "creation_date": 1573652072, "question_id": 58838335, "link": "https://stackoverflow.com/questions/58838335/file-transferred-as-binary-via-libcurl-is-corrupted", "title": "File transferred as binary via libcurl is corrupted", "body": "<p>There are many other threads talking about binary file corruption, yet they all seem unrelated to my problem somehow.</p>\n\n<p>I have a C program that downloads/reads files.</p>\n\n<p>Because I do not write all the files I get into a file, the function that I use with curl rather stores data into a string. I may be free to write this string into a file, or not, later. </p>\n\n<p>I have a binary file.\nI put it on a FTP.</p>\n\n<p>If I download it via a ftp client like filezilla, it contains the right things (that is, the same characters I get when I cat my compiled binary)\nIf I use a curl command line to download the file, it contains the right things as well.</p>\n\n<p>If I use my program to download such a file, it will only contain a string like \"ELF\" followed by 3 unwritable/unreadable characters.</p>\n\n<p>It's important to note that this only happens with binary files. Text files were transferred/read just file.\nIt's also important to know that it seems to be the data that is passed to my function from curl that's already false: if I put a printf of the data in my write function, I see the same ELF + 3 unreadable chars string, therefore the method I use later on to write it into a file isn't in question.</p>\n\n<p>When I use verbose, curl says it's in binary mode yet the binary isn't properly transferred.</p>\n\n<p>Here is what I have so far, works fine with any file that's not binary, will always be garbage otherwise. Thanks in advance:</p>\n\n<pre><code>struct string \n{\n  char *ptr;\n  size_t len;\n};\n\nchar *usr_psswd(char *user, char *psswd)\n{\n    char *usrpsswd;\n\n    usrpsswd = (char *)malloc(strlen(user) + strlen(psswd) + 2);\n    int i = 0;\n    int j = 0;\n\n    while (user[i])\n    {\n        usrpsswd[i] = user[i];\n        ++i;\n    }\n    usrpsswd[i++] = ':';\n    while (psswd[j])\n    {\n        usrpsswd[i] = psswd[j];\n        ++i;\n        ++j;\n    }\n    usrpsswd[i] = 0;\n    return usrpsswd;\n}\n\nvoid init_string(struct string *s) \n{\n  s-&gt;len = 0;\n  s-&gt;ptr = malloc(s-&gt;len+1);\n  if (s-&gt;ptr == NULL) \n  {\n    fprintf(stderr, \"malloc() failed\\n\");\n    exit(EXIT_FAILURE);\n  }\n  s-&gt;ptr[0] = '\\0';\n}\n\nsize_t writefunc(void *ptr, size_t size, size_t nmemb, struct string *s)\n{\n    size_t new_len = s-&gt;len + size*nmemb;\n    s-&gt;ptr = realloc(s-&gt;ptr, new_len+1);\n    if (s-&gt;ptr == NULL) \n    {\n        fprintf(stderr, \"realloc() failed\\n\");\n        exit(EXIT_FAILURE);\n    }\n    memcpy(s-&gt;ptr+s-&gt;len, ptr, size*nmemb);\n    s-&gt;ptr[new_len] = '\\0';\n    s-&gt;len = new_len;\n    return size*nmemb;\n}\n\nchar *curl_get(char *addr, t_data *data)\n{\n  CURL *curl;\n  CURLcode res;\n  char *rtrn;\n  curl = curl_easy_init();\n  if(curl) \n  {\n    struct string s;\n    init_string(&amp;s);\n    curl_easy_setopt(curl, CURLOPT_URL, addr);\n    curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, writefunc);\n    curl_easy_setopt(curl, CURLOPT_WRITEDATA, &amp;s);\n    curl_easy_setopt(curl, CURLOPT_PORT, 21);\n    curl_easy_setopt(curl, CURLOPT_USERPWD, usr_psswd(data-&gt;login, data-&gt;password));\n    res = curl_easy_perform(curl);\n    if(res != CURLE_OK)\n    {\n        printf(\"curl_easy_perform() failed: %s\\n\", curl_easy_strerror(res));\n        free(s.ptr);\n        curl_easy_cleanup(curl);\n        return NULL;\n    }\n    rtrn = strdup(s.ptr);\n    free(s.ptr);\n    curl_easy_cleanup(curl);\n  }\n  return rtrn;\n}\n</code></pre>\n"}, {"tags": ["c", "embedded", "iot"], "comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1573653706, "post_id": 58838309, "comment_id": 103951852, "body": "Example causes: there is another device that sends packets at the same time. Your antenna is bad. Your device is parsing the messages too slow. The RX window timeouts are not what they should be."}, {"owner": {"reputation": 21, "user_id": 9704603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e22dceece69419957a92adb1e0d0dc37?s=128&d=identicon&r=PG&f=1", "display_name": "Monseigneur Artous", "link": "https://stackoverflow.com/users/9704603/monseigneur-artous"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1573658473, "post_id": 58838309, "comment_id": 103954593, "body": "Thanks for your propositions ! I&#39;ve tried with other antennas and the problem is still here. I dont think my device is too slow since it does manages to get some messages correctly. What do you mean by the window timeouts are not what they should be ? how could I modify them ?"}], "owner": {"reputation": 21, "user_id": 9704603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e22dceece69419957a92adb1e0d0dc37?s=128&d=identicon&r=PG&f=1", "display_name": "Monseigneur Artous", "link": "https://stackoverflow.com/users/9704603/monseigneur-artous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1573651979, "creation_date": 1573651979, "question_id": 58838309, "link": "https://stackoverflow.com/questions/58838309/sigfox-timeout-on-downlinks", "title": "Sigfox timeout on downlinks", "body": "<p>I'm working on a B-L072-LRWAN1 board</p>\n\n<p>I'm having a problem where close to 50% of all the downlinks I send to my device are just not received and instead I get a <code>SFX_ERR_INT_GET_RECEIVED_FRAMES_TIMEOUT</code> (0x9B) from the <code>SIGFOX_API_send_frame</code> function even though the sigfox backend tells me that my downlink has been received and ACKED</p>\n\n<p>My LQI varies between good and excellent so I dont think the problem is related to a bad connectivity</p>\n\n<p>I would be very grateful to anyone who has at least an idea on what could be happening here</p>\n\n<p>Thanks for your answers</p>\n"}, {"tags": ["c", "gcc", "vectorization", "avx2", "gcc9"], "comments": [{"owner": {"reputation": 32382, "user_id": 587803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7431a850a166ca3a648141c532aa9d0?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/587803/ben"}, "edited": false, "score": 1, "creation_date": 1573650986, "post_id": 58837873, "comment_id": 103950257, "body": "Are you looking for <code>v4di __builtin_ia32_pmuludq256 (v8si,v8si)</code>"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 0, "creation_date": 1573651310, "post_id": 58837873, "comment_id": 103950428, "body": "@JL2210: The type promotion rules are not pertinent. The question does not ask for a standard C way to do this. It asks  for GCC features."}, {"owner": {"reputation": 4651, "user_id": 4262344, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/70dad663dd1685c6b4f9675d01253e78?s=128&d=identicon&r=PG&f=1", "display_name": "Goswin von Brederlow", "link": "https://stackoverflow.com/users/4262344/goswin-von-brederlow"}, "reply_to_user": {"reputation": 32382, "user_id": 587803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7431a850a166ca3a648141c532aa9d0?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/587803/ben"}, "edited": false, "score": 0, "creation_date": 1573651769, "post_id": 58837873, "comment_id": 103950701, "body": "@ben: &quot;the intrinsic isn&#39;t the answere&quot;"}, {"owner": {"reputation": 10060, "user_id": 919747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/291c33625deabed28aea713a55208c3f?s=128&d=identicon&r=PG", "display_name": "Jason R", "link": "https://stackoverflow.com/users/919747/jason-r"}, "reply_to_user": {"reputation": 32382, "user_id": 587803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7431a850a166ca3a648141c532aa9d0?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/587803/ben"}, "edited": false, "score": 7, "creation_date": 1573652128, "post_id": 58837873, "comment_id": 103950928, "body": "If you just want to know how to make GCC do what you want, why not use the intrinsic that @Ben proposed? It seems fragile to rely on creating some pattern of code that the version of GCC that you&#39;re using right now happens to recognize and emit the code that you want. If you want to <i>know</i> it will work, use the intrinsic function that explicitly specifies your intent."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 2, "creation_date": 1573654057, "post_id": 58837873, "comment_id": 103952079, "body": "@GoswinvonBrederlow: <b>Why</b> is the intrinsic not the answer? If it does what you want, why not use it?"}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1573654465, "post_id": 58837873, "comment_id": 103952290, "body": "@EricPostpischil: As I understand it, with this extension GCC (very reasonably) follows the C practice that the result of the arithmetic operation is the (possibly promoted) operand type. If you want 32x32-&gt;64 you&#39;d need to promote one to 64 before the operation and rely on it being optimized correctly."}, {"owner": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "edited": false, "score": 2, "creation_date": 1573656807, "post_id": 58837873, "comment_id": 103953667, "body": "<code>mul</code> and <code>mul2</code> are optimized fine with clang: <a href=\"https://godbolt.org/z/d3MAay\" rel=\"nofollow noreferrer\">godbolt.org/z/d3MAay</a>, <code>mul3</code> is not equivalent, since it needs to truncate the results to 32 bits. I guess your options are: a) Use clang, b) use intrinsics, c) provide a patch to gcc which properly optimizes this (or file a bug and hope someone else fixes it)."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 32382, "user_id": 587803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7431a850a166ca3a648141c532aa9d0?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/587803/ben"}, "edited": false, "score": 3, "creation_date": 1573657176, "post_id": 58837873, "comment_id": 103953880, "body": "@Ben: the standard portable intrinsic is <a href=\"https://www.felixcloutier.com/x86/pmuludq\" rel=\"nofollow noreferrer\"><code>_mm256_mul_epu32</code></a>, defined by <code>immintrin.h</code>"}, {"owner": {"reputation": 4651, "user_id": 4262344, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/70dad663dd1685c6b4f9675d01253e78?s=128&d=identicon&r=PG&f=1", "display_name": "Goswin von Brederlow", "link": "https://stackoverflow.com/users/4262344/goswin-von-brederlow"}, "reply_to_user": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "edited": false, "score": 0, "creation_date": 1573661941, "post_id": 58837873, "comment_id": 103956718, "body": "@chtz Added the missing cast to 64bit to mul3. Doesn&#39;t make gcc use the pmuludq."}, {"owner": {"reputation": 4651, "user_id": 4262344, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/70dad663dd1685c6b4f9675d01253e78?s=128&d=identicon&r=PG&f=1", "display_name": "Goswin von Brederlow", "link": "https://stackoverflow.com/users/4262344/goswin-von-brederlow"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1573662617, "post_id": 58837873, "comment_id": 103957147, "body": "@EricPostpischil Because if I wanted to use the intrinsic I would have done so. The goal is to get the compiler to produce the right opcode for the -m&lt;arch&gt; specified. The intrinsic will fail to compile if -mavx2 isn&#39;t used."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1573740352, "post_id": 58837873, "comment_id": 103988413, "body": "@GoswinvonBrederlow: You can test <code>__AVX2__</code> with <code>#if</code> and use the intrinsic if it is <code>__AVX2__</code> is non-zero and other code if it is not."}, {"owner": {"reputation": 4651, "user_id": 4262344, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/70dad663dd1685c6b4f9675d01253e78?s=128&d=identicon&r=PG&f=1", "display_name": "Goswin von Brederlow", "link": "https://stackoverflow.com/users/4262344/goswin-von-brederlow"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1573740510, "post_id": 58837873, "comment_id": 103988509, "body": "@EricPostpischil and <code>__MMX__</code> and <code>__SSE__</code> and <code>__SSE2__</code> and <code>__SSE3__</code> and <code>__SSE4__</code> and <code>__NEON__</code> and <code>__NEON2__</code> and some 30 other. As said that is not what I want."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 2, "creation_date": 1573740813, "post_id": 58837873, "comment_id": 103988690, "body": "@GoswinvonBrederlow: \u201cnot what I want\u201d and \u201cif I wanted to use the intrinsic I would have done so\u201d are not justifiable reasons. \u201cBecause we need to support many different target architectures and writing individual code for each is too costly\u201d is. Edit the question to state your full requirements, based on actual project requirements, not on \u201cwants.\u201d"}], "answers": [{"tags": [], "owner": {"reputation": 4651, "user_id": 4262344, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/70dad663dd1685c6b4f9675d01253e78?s=128&d=identicon&r=PG&f=1", "display_name": "Goswin von Brederlow", "link": "https://stackoverflow.com/users/4262344/goswin-von-brederlow"}, "is_accepted": false, "score": 2, "last_activity_date": 1573740777, "creation_date": 1573740777, "answer_id": 58858779, "question_id": 58837873, "link": "https://stackoverflow.com/questions/58837873/uint32-t-uint32-t-uint64-t-vector-multiplication-with-gcc/58858779#58858779", "title": "uint32_t * uint32_t = uint64_t vector multiplication with gcc", "body": "<p>As noted in the comments by chtz both mul1 and mul2 are optimized right by clang. Code similar to mul3 but using a for loop will be optimized too (but not as well).</p>\n\n<p>So to me it looks like the syntax is correct to express what the code should do and gcc simply lacks the smarts so far to optimize this properly.</p>\n"}], "owner": {"reputation": 4651, "user_id": 4262344, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/70dad663dd1685c6b4f9675d01253e78?s=128&d=identicon&r=PG&f=1", "display_name": "Goswin von Brederlow", "link": "https://stackoverflow.com/users/4262344/goswin-von-brederlow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 1, "answer_count": 1, "score": 6, "last_activity_date": 1573750781, "creation_date": 1573650558, "last_edit_date": 1573750781, "question_id": 58837873, "link": "https://stackoverflow.com/questions/58837873/uint32-t-uint32-t-uint64-t-vector-multiplication-with-gcc", "title": "uint32_t * uint32_t = uint64_t vector multiplication with gcc", "body": "<p>I'm trying to multiply vectors of <code>uint32_t</code> producing the full 64-bit result in an <code>uint64_t</code> vector in gcc. The result I expect is for gcc to emit a single <code>VPMULUDQ</code> instruction. But what gcc outputs as code is horrible shuffling around of the individual <code>uint32_t</code> of the source vectors and then a full 64*64=64 multiplication. Here is what I've tried:</p>\n\n<pre><code>#include &lt;stdint.h&gt;\n\ntypedef uint32_t v8lu __attribute__ ((vector_size (32)));\ntypedef uint64_t v4llu __attribute__ ((vector_size (32)));\n\nv4llu mul(v8lu x, v8lu y) {\n    x[1] = 0; x[3] = 0; x[5] = 0; x[7] = 0;\n    y[1] = 0; y[3] = 0; y[5] = 0; y[7] = 0;\n    return (v4llu)x * (v4llu)y;\n}\n</code></pre>\n\n<p>The first masks out the unwanted parts of the <code>uint32_t</code> vector in the hope that gcc would optimize away the unneeded parts of the 64*64=64 multiplication and then see the masking is pointless as well. No such luck.</p>\n\n<pre><code>v4llu mul2(v8lu x, v8lu y) {\n    v4llu tx = {x[0], x[2], x[4], x[6]};\n    v4llu ty = {y[0], y[2], y[4], y[6]};\n    return tx * ty;\n}\n</code></pre>\n\n<p>Here I try to create a <code>uint64_t</code> vector from scratch with only the used parts set. Again gcc should see the top 32 bits of each <code>uint64_t</code> are 0 and not do a full 64*64=64 multiply. Instead, a lot of extracting and putting back of the values happens, and a 64*64=64 multiply.</p>\n\n<pre><code>v4llu mul3(v8lu x, v8lu y) {\n    v4llu t = {x[0] * (uint64_t)y[0], x[2] * (uint64_t)y[2], x[4] * (uint64_t)y[4], x[6] * (uint64_t)y[6]};\n    return t;\n}\n</code></pre>\n\n<p>Let's build the result vector by multiplying the parts. Maybe gcc sees that it can use <code>VPMULUDQ</code> to achieve exactly that. No luck, it falls back to 4 <code>IMUL</code> opcodes.</p>\n\n<p>Is there a way to tell gcc what I want it to do (32*32=64 multiplication with everything perfectly placed)? </p>\n\n<p>Note: Inline asm or the intrinsic isn't the answer. Writing the opcode by hand obviously works. But then I would have to write different versions of the code for many target architectures and feature sets. I want gcc to understand the problem and produce the right solution from a single source code.</p>\n"}, {"tags": ["c", "bash", "command-line-arguments"], "comments": [{"owner": {"reputation": 6715, "user_id": 2899280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4458bb90b869271c5787c7e600b4ed8e?s=128&d=identicon&r=PG&f=1", "display_name": "Brad Allred", "link": "https://stackoverflow.com/users/2899280/brad-allred"}, "edited": false, "score": 44, "creation_date": 1573682543, "post_id": 58837835, "comment_id": 103966243, "body": "the syntax highlighting on StackOverflow illustrates your problem nicely :)"}], "answers": [{"tags": [], "owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "is_accepted": false, "score": 8, "last_activity_date": 1573733345, "last_edit_date": 1573733345, "creation_date": 1573650556, "answer_id": 58837872, "question_id": 58837835, "link": "https://stackoverflow.com/questions/58837835/unable-to-pass-character-as-a-command-line-argument/58837872#58837872", "title": "Unable to pass &#39;#&#39; character as a command-line argument", "body": "<p>It's because you're using an <code>sh</code>-like shell. Quote the <code>#</code> or escape it using <code>\\</code> and it will work.</p>\n\n<p>This is called a <em>comment</em> in <code>sh</code>. It causes the <code>#</code> (space-hash) and any arguments after it to be discarded. It's used similarly to comments in C, where it is used to document code.</p>\n\n<p>Strings beginning with <code>$</code> are called <em>variables</em> in <code>sh</code>. If you haven't set a variable, it will expand to an empty string.</p>\n\n<p>For example, all of these would be valid ways to pass the <code>#</code> to your application:</p>\n\n<pre><code>2 4 '#' 5 6\n2 4 \"#\" 5 6\n2 4 \\# 5 6\n</code></pre>\n\n<p>And these would be valid ways to pass a string starting with <code>$</code>:</p>\n\n<pre><code>2 4 '$var' 5 6\n2 4 '$'var 5 6\n2 4 \\$var 5 6\n</code></pre>\n\n<p>Please note that variables inside <code>\"</code>s are still expanded.</p>\n"}, {"comments": [{"owner": {"reputation": 547, "user_id": 12342782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddf1b8213fb01a7d8c0e576cec49752f?s=128&d=identicon&r=PG&f=1", "display_name": "cd-00", "link": "https://stackoverflow.com/users/12342782/cd-00"}, "edited": false, "score": 0, "creation_date": 1573651838, "post_id": 58838012, "comment_id": 103950753, "body": "I also find that &#39;$&#39; ignore characters that follow it, but not others. Are there other special characters?"}, {"owner": {"reputation": 1059, "user_id": 8368990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e3e253063cfcfeff6159f83a5c2404d?s=128&d=identicon&r=PG&f=1", "display_name": "fanduin", "link": "https://stackoverflow.com/users/8368990/fanduin"}, "reply_to_user": {"reputation": 547, "user_id": 12342782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddf1b8213fb01a7d8c0e576cec49752f?s=128&d=identicon&r=PG&f=1", "display_name": "cd-00", "link": "https://stackoverflow.com/users/12342782/cd-00"}, "edited": false, "score": 2, "creation_date": 1573652149, "post_id": 58838012, "comment_id": 103950944, "body": "This seems to be a pretty good list <a href=\"https://unix.stackexchange.com/a/270979\">unix.stackexchange.com/a/270979</a>"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "reply_to_user": {"reputation": 547, "user_id": 12342782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddf1b8213fb01a7d8c0e576cec49752f?s=128&d=identicon&r=PG&f=1", "display_name": "cd-00", "link": "https://stackoverflow.com/users/12342782/cd-00"}, "edited": false, "score": 22, "creation_date": 1573652695, "post_id": 58838012, "comment_id": 103951286, "body": "@cd-00 You need to learn how the shell works. This has nothing to do with your C code."}, {"owner": {"reputation": 3525, "user_id": 1440433, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/mKFTJ.jpg?s=128&g=1", "display_name": "Joker_vD", "link": "https://stackoverflow.com/users/1440433/joker-vd"}, "edited": false, "score": 3, "creation_date": 1573683241, "post_id": 58838012, "comment_id": 103966516, "body": "Ah, so you can type comments in <i>interactive</i> shell sessions, so the shell can ignore it immedaitely after you&#39;ve finished typing it. What a useful feature."}, {"owner": {"reputation": 18098, "user_id": 276232, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c7dd5b284cb4046a3f3dd0ede614e12a?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Schultz", "link": "https://stackoverflow.com/users/276232/christopher-schultz"}, "reply_to_user": {"reputation": 3525, "user_id": 1440433, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/mKFTJ.jpg?s=128&g=1", "display_name": "Joker_vD", "link": "https://stackoverflow.com/users/1440433/joker-vd"}, "edited": false, "score": 6, "creation_date": 1573685628, "post_id": 58838012, "comment_id": 103967377, "body": "@Joker_vD While you think of a shell as a command-line interface, it&#39;s actually a script interpreter. The fact that you can use it like an interactive CLI is a nice bonus. Why should the interpreted behave significantly differently when you are &quot;running a script&quot; versus typing commands in interactively? What about <code>echo echo Hello, World | bash</code>. Is that interactive? Or maybe <code>bash &lt;&lt;END</code>?"}, {"owner": {"reputation": 14194, "user_id": 732016, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9d2eb40aff994d83e1d271a3543efb22?s=128&d=identicon&r=PG", "display_name": "wchargin", "link": "https://stackoverflow.com/users/732016/wchargin"}, "reply_to_user": {"reputation": 3525, "user_id": 1440433, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/mKFTJ.jpg?s=128&g=1", "display_name": "Joker_vD", "link": "https://stackoverflow.com/users/1440433/joker-vd"}, "edited": false, "score": 6, "creation_date": 1573708039, "post_id": 58838012, "comment_id": 103972454, "body": "@Joker_vD: I frequently type comments in interactive sessions to refer back to in my shell history. Sometimes this is to record a commit hash or other ID emitted to stdout; sometimes it\u2019s to note that a command failed as a note to my future self; sometimes it\u2019s to record timing data for ad hoc benchmarking. It <i>is</i> a useful feature."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 3525, "user_id": 1440433, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/mKFTJ.jpg?s=128&g=1", "display_name": "Joker_vD", "link": "https://stackoverflow.com/users/1440433/joker-vd"}, "edited": false, "score": 0, "creation_date": 1573708465, "post_id": 58838012, "comment_id": 103972588, "body": "@Joker_vD: How much would it suck if the OP&#39;s command worked interactively, but <i>failed when copy/pasted into a shell script</i>?  (Answer: not a huge amount because you can run the script with <code>bash -x</code> to trace commands).  You can even disable interactive comments in bash with <code>shopt  -u interactive_comments</code>"}, {"owner": {"reputation": 5543, "user_id": 6372809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O11k5.jpg?s=128&g=1", "display_name": "ilkkachu", "link": "https://stackoverflow.com/users/6372809/ilkkachu"}, "edited": false, "score": 0, "creation_date": 1573720210, "post_id": 58838012, "comment_id": 103976979, "body": "The handling of <code>#</code> also depends on the shell. I think zsh doesn&#39;t honor it as a comment character in interactive mode by default, and then there&#39;s the csh variants which might or might not do something different (I don&#39;t know)."}], "tags": [], "owner": {"reputation": 1059, "user_id": 8368990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e3e253063cfcfeff6159f83a5c2404d?s=128&d=identicon&r=PG&f=1", "display_name": "fanduin", "link": "https://stackoverflow.com/users/8368990/fanduin"}, "is_accepted": true, "score": 47, "last_activity_date": 1573719833, "last_edit_date": 1573719833, "creation_date": 1573650996, "answer_id": 58838012, "question_id": 58837835, "link": "https://stackoverflow.com/questions/58837835/unable-to-pass-character-as-a-command-line-argument/58838012#58838012", "title": "Unable to pass &#39;#&#39; character as a command-line argument", "body": "<p><code>#</code> begins a comment in Unix shells, much like <code>//</code> in C.</p>\n\n<p>This means that when the shell passes the arguments to the progam, it ignores everything following the #. Escaping it with a backslash or quotes will mean it is treated like the other parameters and the program should work as expected.</p>\n\n<pre><code>2 4 \\# 5 6\n</code></pre>\n\n<p>or</p>\n\n<pre><code>2 4 '#' 5 6\n</code></pre>\n\n<p>or</p>\n\n<pre><code>2 4 \"#\" 5 6\n</code></pre>\n\n<p>Note that the <code>#</code> is a comment character only at the start of a word, so this should also work:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>2 4#5 6\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5543, "user_id": 6372809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O11k5.jpg?s=128&g=1", "display_name": "ilkkachu", "link": "https://stackoverflow.com/users/6372809/ilkkachu"}, "edited": false, "score": 3, "creation_date": 1573719976, "post_id": 58838321, "comment_id": 103976865, "body": "How should they be escaped then?"}, {"owner": {"reputation": 453, "user_id": 12212950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d93f9b746b6b7988fb224d49ba07c9c?s=128&d=identicon&r=PG&f=1", "display_name": "VJAYSLN", "link": "https://stackoverflow.com/users/12212950/vjaysln"}, "reply_to_user": {"reputation": 5543, "user_id": 6372809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O11k5.jpg?s=128&g=1", "display_name": "ilkkachu", "link": "https://stackoverflow.com/users/6372809/ilkkachu"}, "edited": false, "score": 3, "creation_date": 1573724641, "post_id": 58838321, "comment_id": 103979418, "body": "\\ - Escaped by using backslash .EX: <code>2 4 \\{#,$,&amp;,*} 5 6</code>"}], "tags": [], "owner": {"reputation": 453, "user_id": 12212950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d93f9b746b6b7988fb224d49ba07c9c?s=128&d=identicon&r=PG&f=1", "display_name": "VJAYSLN", "link": "https://stackoverflow.com/users/12212950/vjaysln"}, "is_accepted": false, "score": 12, "last_activity_date": 1573652021, "creation_date": 1573652021, "answer_id": 58838321, "question_id": 58837835, "link": "https://stackoverflow.com/questions/58837835/unable-to-pass-character-as-a-command-line-argument/58838321#58838321", "title": "Unable to pass &#39;#&#39; character as a command-line argument", "body": "<p>When passing the value through command line arguments you have to walk through these following instructions.\nThe following characters have special meaning to the shell itself in some contexts and may need to be escaped in arguments:</p>\n\n<pre><code>` Backtick (U+0060 Grave Accent)\n~ Tilde (U+007E)\n! Exclamation mark (U+0021)\n# Hash (U+0023 Number Sign)\n$ Dollar sign (U+0024)\n&amp; Ampersand (U+0026)\n* Asterisk (U+002A)\n( Left Parenthesis (U+0028)\n) Right parenthesis (U+0029)\n\u2002(\u21e5) Tab (U+0009)\n{ Left brace (U+007B Left Curly Bracket)\n[ Left square bracket (U+005B)\n| Vertical bar (U+007C Vertical Line)\n\\ Backslash (U+005C Reverse Solidus)\n; Semicolon (U+003B)\n' Single quote / Apostrophe (U+0027)\n\" Double quote (U+0022)\n\u21a9 New line (U+000A)\n&lt; Less than (U+003C)\n&gt; Greater than (U+003E)\n? Question mark (U+003F)\n\u2002 Space (U+0020)1\n</code></pre>\n"}], "owner": {"reputation": 547, "user_id": 12342782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddf1b8213fb01a7d8c0e576cec49752f?s=128&d=identicon&r=PG&f=1", "display_name": "cd-00", "link": "https://stackoverflow.com/users/12342782/cd-00"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1989, "favorite_count": 2, "accepted_answer_id": 58838012, "answer_count": 3, "score": 36, "last_activity_date": 1574529435, "creation_date": 1573650438, "last_edit_date": 1574467621, "question_id": 58837835, "link": "https://stackoverflow.com/questions/58837835/unable-to-pass-character-as-a-command-line-argument", "title": "Unable to pass &#39;#&#39; character as a command-line argument", "body": "<p>I can't pass strings starting with <code>#</code> as command-line arguments.</p>\n\n<p>Here is a simple test:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char *argv[])\n{\n    for (int i = 1; i &lt; argc; i++)\n        printf(\"%s \", argv[i]);\n\n    putchar('\\n');\n\n    return 0;\n}\n</code></pre>\n\n<p>If I input the arguments as follows:</p>\n\n<pre><code>2 4 # 5 6\n</code></pre>\n\n<p>The value of <code>argc</code> is <code>3</code> and not <code>6</code>. It reads <code>#</code> and stops there. I don't know why, and I can't find the answer in my copies of <em>The C Programming Language</em> and <em>C Primer Plus</em>.</p>\n"}, {"tags": ["c", "sockets", "serversocket"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1573650835, "post_id": 58837718, "comment_id": 103950160, "body": "Try flushing or closing the output file."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1573832927, "post_id": 58837718, "comment_id": 104027958, "body": "OT:  regarding: <code>printf(&quot;Could not open file %s\\n&quot;,output_file_name);</code>    Error messages should be output to <code>stderr</code>, not <code>stdout</code>  And when the error indication is from a C library function, should also output to <code>stderr</code> the text reason the system thinks the error occurred.   The function: <code>perror()</code> handles the second circumstance very well.  Suggest you use that function:"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1573833261, "post_id": 58837718, "comment_id": 104028169, "body": "OT: regarding: <code>int len;       len=recv(sock , rx_buffer, sizeof(rx_buffer),0);</code>  The function: <code>recv()</code> retruns a <code>ssock_t</code> not a <code>int</code>  AND <code>recv()</code> does not NUL terminate the message, so should use something like:  <code>rx_buffer[ len ] = &#39;\\0&#39;;</code> to insert a NUL byte at the end of the message"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1573833447, "post_id": 58837718, "comment_id": 104028287, "body": "OT:  regarding: <code>send(sock , mess , 5,0);</code>  This would be much better written as <code>ssize_t  bytesSent = send(sock , mess , strlen( mess ),0);</code> followed by: <code>if( bytesSent != strlen( mess) ) { &#47;&#47; handle error }</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1573833672, "post_id": 58837718, "comment_id": 104028444, "body": "OT:  regarding: <code>if(p&lt;0){ perror(&quot;accept failed&quot;);} printf(&quot;Client Address=%s\\n&quot;,inet_ntop(AF_INET,&amp;source_addr.sin_addr,client&zwnj;&#8203;,sizeof(client)));</code>  for ease of readability and understanding: Please follow the axiom: <i>only one statement per line and (at most) one variable declaration per statement.</i>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1573833762, "post_id": 58837718, "comment_id": 104028506, "body": "OT: for ease of readability and understanding:  Please consistently indent the code.  Indent after every opening brace &#39;{&#39;.  Unindent before every closing brace &#39;}&#39;.  Suggest each indent level be 4 spaces."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1573833946, "post_id": 58837718, "comment_id": 104028603, "body": "regarding:  <code>p = accept(sock, (struct sockaddr *)&amp;source_addr, (socklen_t*)&amp;source_addr);         if(p&lt;0)         {               perror(&quot;accept failed&quot;);</code>  After the &#39;accept()&#39; fails and the error message is output to <code>stderr</code>,  either loop back to the <code>accept()</code> statement or exit the program."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1573834023, "post_id": 58837718, "comment_id": 104028645, "body": "regarding: <code>listen(sock,1);</code>  the size of the &#39;buffering&#39; is best to be 3 or more, not 1"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1573834228, "post_id": 58837718, "comment_id": 104028781, "body": "regarding: <code>if((bind(sock, (struct sockaddr *)&amp;dest_addr, sizeof(dest_addr)))&lt;0){                perror(&quot;Bind failed.&quot;);                }</code>  after the call to <code>bind()</code> fails, there is no recovery.  So the program should call <code>exit( EXIT_FAILURE );</code>  Not continue to execute"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1573834675, "post_id": 58837718, "comment_id": 104029020, "body": "regarding: <code>}      return 0; }</code>    before exiting the program, close the open file.  Do not depend on the OS to close it when the program exits"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1573834885, "post_id": 58837718, "comment_id": 104029134, "body": "regarding: <code>int listen_sock;</code> and <code>p = accept(sock, (struct sockaddr *)&amp;source_addr, (socklen_t*)&amp;source_addr);</code>   Why use: <code>p</code> when <code>listen_sock</code> is already available?"}], "answers": [{"tags": [], "owner": {"reputation": 65, "user_id": 12360746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d33ae492f1fae7dd81861242f95177e?s=128&d=identicon&r=PG&f=1", "display_name": "Anup Agrawal", "link": "https://stackoverflow.com/users/12360746/anup-agrawal"}, "is_accepted": true, "score": 0, "last_activity_date": 1573658430, "last_edit_date": 1573658430, "creation_date": 1573657771, "answer_id": 58840037, "question_id": 58837718, "link": "https://stackoverflow.com/questions/58837718/i-am-unable-to-print-message-recived-from-client-side-in-c-server-using-socket/58840037#58840037", "title": "I am unable to print message recived from client side in c server using socket?", "body": "<ul>\n<li>in while ,you should open your file always and after putting data into the file close file descriptor properly.</li>\n</ul>\n\n<p>see this code in main(),</p>\n\n<pre><code>int main() {\n\n\n    char *output_file_name = \"data_from_client.txt\";\n\n    // Create socket and accept connection from client\n    int sock = socket_create(dest_addr, source_addr);\n\n\n\n\n\n    while (1) {\n\n    output_fp = fopen(output_file_name, \"a+\");\n  if (output_fp == NULL){\n        printf(\"Could not open file %s\\n\",output_file_name);\n        return 1;\n    }\n\n        receive_from_send_to_client(sock);\n          printf(\"%s\",rx_buffer);\n        fprintf(output_fp,\"%s\",rx_buffer);\n        fclose(output_fp);\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7615121, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-bp1e6iYOcjw/AAAAAAAAAAI/AAAAAAAAAEQ/JWu2VcYoxgM/photo.jpg?sz=128", "display_name": "assassin ", "link": "https://stackoverflow.com/users/7615121/assassin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 58840037, "answer_count": 1, "score": 0, "last_activity_date": 1573658430, "creation_date": 1573650002, "last_edit_date": 1573650184, "question_id": 58837718, "link": "https://stackoverflow.com/questions/58837718/i-am-unable-to-print-message-recived-from-client-side-in-c-server-using-socket", "title": "I am unable to print message recived from client side in c server using socket?", "body": "<p>In debugging I can see that values of rx_buffer changes to what is send from client but printf function and even fputs function is not printng the value on terminal or updating the output file</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;netdb.h&gt; \n#include &lt;arpa/inet.h&gt;\n#include &lt;unistd.h&gt;\n\n\n// Constants defined\n#define SERVER_PORT 3333\n#define RX_BUFFER_SIZE 1024\n#define TX_BUFFER_SIZE 1024\n\n#define MAXCHAR 1000                // max characters to read from txt file\n\n// Global variables\nstruct sockaddr_in dest_addr;\nstruct sockaddr_in source_addr;\n\nchar rx_buffer[RX_BUFFER_SIZE];     // buffer to store data from client\nchar tx_buffer[RX_BUFFER_SIZE];     // buffer to store data to be sent to client\n\nchar ipv4_addr_str[128];            // buffer to store IPv4 addresses as string\nchar ipv4_addr_str_client[128];     // buffer to store IPv4 addresses as string\n\nint listen_sock;\n\nchar line_data[MAXCHAR];\n\nFILE *input_fp, *output_fp;\n\n\n\nint socket_create(struct sockaddr_in dest_addr, struct sockaddr_in source_addr){\n\n    int addr_family;\n    int ip_protocol;\n\n    dest_addr.sin_addr.s_addr = htonl(INADDR_ANY);\n    dest_addr.sin_family = AF_INET;\n    dest_addr.sin_port = htons(SERVER_PORT);\n    addr_family = AF_INET;\n    ip_protocol = IPPROTO_IP;\n\n    int sock,p;\n        printf(\"Create the socket\\n\");\n        sock=socket(addr_family , SOCK_STREAM , 0);\n        if((bind(sock, (struct sockaddr *)&amp;dest_addr, sizeof(dest_addr)))&lt;0){\n               perror(\"Bind failed.\");\n               }\n        else{\n\n            printf(\"bind done\");\n}\nchar client[100];\n        listen(sock,1);\n        printf(\"Waiting for incoming connections...\\n\");\n        p = accept(sock, (struct sockaddr *)&amp;source_addr, (socklen_t*)&amp;source_addr);\n         if(p&lt;0){ perror(\"accept failed\");} printf(\"Client Address=%s\\n\",inet_ntop(AF_INET,&amp;source_addr.sin_addr,client,sizeof(client)));\nreturn p;\n\n\n}\n\n\n\nint receive_from_send_to_client(int sock){\n      char mess[10]=\"hello\";\n      int len;\n      len=recv(sock , rx_buffer, sizeof(rx_buffer),0);\n     send(sock , mess , 5,0);\n\n\n    return 0;\n\n}\n\n\nint main() {\n\n\n    char *output_file_name = \"data_from_client.txt\";\n\n    // Create socket and accept connection from client\n    int sock = socket_create(dest_addr, source_addr);\n\n\n    output_fp = fopen(output_file_name, \"w\");\n\n    if (output_fp == NULL){\n        printf(\"Could not open file %s\\n\",output_file_name);\n        return 1;\n    }\n\n    while (1) {\n\n\n        receive_from_send_to_client(sock);\n          printf(\"%s\",rx_buffer);\n        fputs(rx_buffer, output_fp);\n        fputs(\"\\n\", output_fp);\n\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>In debugging I can see that values of rx_buffer are changing but not able to put that in file or print the message.  </p>\n\n<p>Note:- I am sending message from a python client.</p>\n"}, {"tags": ["c", "memory-management", "linux-kernel", "kmalloc", "vmalloc"], "answers": [{"comments": [{"owner": {"reputation": 197, "user_id": 3513722, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f2dfa975f29679023d7d587a470898a6?s=128&d=identicon&r=PG&f=1", "display_name": "Usr1", "link": "https://stackoverflow.com/users/3513722/usr1"}, "edited": false, "score": 0, "creation_date": 1573669181, "post_id": 58842468, "comment_id": 103960410, "body": "Thanks for your answer!! I have only one question from the above answer.       So the &quot;dynamic mapping area&quot; you had mentioned is the 128MB above ZONE_NORMAL(896MB) in the example i have taken ?  Since 128 MB can not directly map to (4GB minus 896MB) memory, The memory can be allocated somewhere above 896MB and mapped into kernel virtual address(128MB) ? And this is called as &quot;Dynamic mapping area&quot;"}, {"owner": {"reputation": 25733, "user_id": 559737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5de249db6565b87a2699e131974268a?s=128&d=identicon&r=PG", "display_name": "Brendan", "link": "https://stackoverflow.com/users/559737/brendan"}, "reply_to_user": {"reputation": 197, "user_id": 3513722, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f2dfa975f29679023d7d587a470898a6?s=128&d=identicon&r=PG&f=1", "display_name": "Usr1", "link": "https://stackoverflow.com/users/3513722/usr1"}, "edited": false, "score": 0, "creation_date": 1573670257, "post_id": 58842468, "comment_id": 103960875, "body": "If there&#39;s 1024 MiB of kernel space, 896 MiB of &quot;kmalloc area&quot;, 50 MiB of &quot;memory mapped devices&quot;; then there&#39;d be 78 MiB of &quot;dynamic mapping area&quot;. I don&#39;t know what name Linux kernel developers use for the &quot;dynamic mapping area&quot; - I think they just call it the &quot;vmalloc() / ioremap() space&quot;. Note that I have simplified - depending on which CPU (e.g. ARM vs. 80x86 vs ...) it&#39;s likely that there&#39;s multiple small fixed mappings in kernel space that I haven&#39;t mentioned."}], "tags": [], "owner": {"reputation": 25733, "user_id": 559737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5de249db6565b87a2699e131974268a?s=128&d=identicon&r=PG", "display_name": "Brendan", "link": "https://stackoverflow.com/users/559737/brendan"}, "is_accepted": true, "score": 2, "last_activity_date": 1573665837, "creation_date": 1573665837, "answer_id": 58842468, "question_id": 58837677, "link": "https://stackoverflow.com/questions/58837677/memory-mapping-in-linux-kernel-use-of-vamlloc-and-kmalloc/58842468#58842468", "title": "Memory Mapping in Linux Kernel - use of vamlloc() and kmalloc()", "body": "<p>In theory there are 3 different \"memory managers\". One manages physical RAM (mostly keeping track of pages of free physical RAM), one manages virtual space (what is mapped into each virtual address space where, working with fixed size pieces - the page size), and the third manages \"heap\" (allowing a larger area of the virtual address space to be split up into arbitrary sized pieces).</p>\n\n<p>Originally; the Linux kernel tried to use its kernel \"heap\" to manage all 3 of these very different things. By linearly mapping \"all RAM\" into kernel space they bypass the need for managing the kernel's virtual memory and end up with a simple relationship between virtual addresses in kernel space and physical addresses (e.g. \"physical = virtual - base\"), and by allocating \"heap\" you also allocate physical memory.</p>\n\n<p>This was fine originally because at the time computers rarely had more than 128 MiB of RAM (and Linus didn't expect the kernel to exist for very long, as GNU were planning to switch to Hurd \"soon\"), and kernel space was significantly larger than \"all RAM\". As the amount of RAM increased it became a problem -\"all RAM\" became larger than kernel space, so \"use heap to manage 3 very different things\" couldn't work.</p>\n\n<p>Of course once it became a problem a lot of the kernel's code dependent on \"kmalloc to allocate physical memory\", making it too hard to fix the problem. Instead, they split physical memory into 2 zones - one zone that would be managed by \"kmalloc\" and another zone that is managed by \"vmalloc\"; then changed pieces of the kernel to use \"vmalloc\" instead of \"kmalloc\" where it's easy make those changes.</p>\n\n<blockquote>\n  <ol>\n  <li>My understanding is that When kmalloc() is used to allocate memory, It always comes from the 0 to 896MB within the RAM and not beyond that.</li>\n  </ol>\n</blockquote>\n\n<p>Yes; this is the first zone of physical memory, which fits into the kernel space mapping that \"kmalloc\" uses.</p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>When we use vmalloc() to allocate memory, Does that memory allocated anywhere from 896MB to 4GB range within the RAM ? or it is allocated only from 896MB upto 1GB range within RAM?</li>\n  </ol>\n</blockquote>\n\n<p>It would be allocated from any RAM that is not in the first zone (anywhere in \"896MB or higher\" range).</p>\n\n<blockquote>\n  <ol start=\"3\">\n  <li>When we say that kernel has only 1GB of virtual address space, Does that meant that the kernel can not access the RAM beyond 1GB ? If it can then how it is done ? Does the 128MB of kernel virtual address space are used for this purpose ?</li>\n  </ol>\n</blockquote>\n\n<p>Of the kernel's 1 GiB of virtual space; some (896MB) will be the linear mapping of the physical address space, some will be memory mapped (PCI) devices, and some will be set aside as an area where dynamic mappings can be made. For \"vmalloc\" the kernel would allocate physical pages of RAM and then map them into the \"dynamic mapping area\" (and return a pointer to where it was mapped that has nothing to do with its physical address and breaks the \"physical = virtual - base\" relationship).</p>\n\n<p><em>Note 1: Exact sizes/limits are variable - e.g. kernel can be compiled for \"2 GiB / 2 GiB split\" where kernel space is 2 GiB (instead of \"3 GiB / 1 GiB split\"); and the size of the \"kmalloc zone\" probably depends on various factors (how much space PCI devices need, how much RAM there is, etc) and may be something other than 896MB.</em></p>\n\n<p><em>Note 2: Since introducing \"vmalloc\" to work around the original problem; computers switched to 64 bit (where \"all memory\" can/does fit in kernel space again), and \"vmalloc\" became unnecessary (and probably just falls through to \"kmalloc\"). However a lot of other changes have occurred (introduction of NUMA, encrypted RAM, non-volatile RAM, ..; plus more security vulnerabilities than any single person can keep track of) so the original design flaw has reached a temporary \"bad idea, but still technically not broken if we keep adding work-arounds for security vulnerabilities\" stage (until RAM and non-volatile RAM sizes inevitably increase and \"vmalloc\" becomes needed again at some point in the future - probably in about 30 years).</em></p>\n"}], "owner": {"reputation": 197, "user_id": 3513722, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f2dfa975f29679023d7d587a470898a6?s=128&d=identicon&r=PG&f=1", "display_name": "Usr1", "link": "https://stackoverflow.com/users/3513722/usr1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 552, "favorite_count": 1, "accepted_answer_id": 58842468, "answer_count": 1, "score": 1, "last_activity_date": 1573665837, "creation_date": 1573649868, "last_edit_date": 1573657487, "question_id": 58837677, "link": "https://stackoverflow.com/questions/58837677/memory-mapping-in-linux-kernel-use-of-vamlloc-and-kmalloc", "title": "Memory Mapping in Linux Kernel - use of vamlloc() and kmalloc()", "body": "<p>Considering a <strong>32bit x86 Linux</strong> system with 4 GB of <strong>RAM</strong> memory, So as described in books as well as on many forums that the Memory mapping would be as follows:</p>\n\n<ol>\n<li><strong>Kernel logical address</strong> - upto <strong>896 MB</strong>  - Which is one to one mapped and can be allocated using <strong>kmalloc()</strong>.</li>\n<li><strong>Kernel virtual address</strong> - <strong>128MB</strong> (above 896MB - kernel logical address) - allocated using <strong>vmalloc()</strong> and allocates Virtually contiguous but physically(scattered within <strong>RAM</strong>) non-contiguous memory pages.</li>\n</ol>\n\n<p>Few points that I am not able to fully understand and need clarity on.</p>\n\n<ol>\n<li><p>My understanding is that When <strong>kmalloc()</strong> is used to allocate memory, It always comes from the 0 to 896MB within the RAM and not beyond that.</p></li>\n<li><p>When we use <strong>vmalloc()</strong> to allocate memory, Does that memory allocated anywhere from 896MB to 4GB range within the RAM ? or it is allocated only from 896MB upto 1GB range within RAM?</p></li>\n<li><p>When we say that kernel has only 1GB of virtual address space, Does that meant that the kernel can not access the RAM beyond 1GB ?   If it can then how it is done ? Does the 128MB of kernel virtual address space are used for this purpose ?</p></li>\n</ol>\n\n<p>Please help.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1573647691, "post_id": 58836958, "comment_id": 103948421, "body": "Use <code>sscanf</code> or <code>atoi</code>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 3, "creation_date": 1573647889, "post_id": 58836958, "comment_id": 103948521, "body": "@PaulOgilvie Use neither, use <code>strtoul</code>."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 1, "creation_date": 1573648062, "post_id": 58836958, "comment_id": 103948598, "body": "What is the source for your input? A file (or keyboard)? Another program? Command-line arguments?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1573648142, "post_id": 58836958, "comment_id": 103948644, "body": "Actually what is the question here.... what&#39;s the meaning of &quot;how I should assing a value to a uint32_t variable into the &quot;input&quot; variable. &quot; Given that input is already uint32_t."}, {"owner": {"reputation": 29, "user_id": 4306431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77c56434ee8cf5642a493a2732ba2fc1?s=128&d=identicon&r=PG&f=1", "display_name": "sigsag", "link": "https://stackoverflow.com/users/4306431/sigsag"}, "edited": false, "score": 0, "creation_date": 1573649557, "post_id": 58836958, "comment_id": 103949393, "body": "I updated the post."}, {"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 1, "creation_date": 1573650090, "post_id": 58836958, "comment_id": 103949714, "body": "So the question is how to convert the string <code>HEXlastName</code> to an array of <code>uint32_t</code> values, right? Is there no delimiter between the values? (i.e. every <code>0x</code> starts a new value? Are there always 5 values in the string or can the number vary? Please add all clarification to the question."}, {"owner": {"reputation": 29, "user_id": 4306431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77c56434ee8cf5642a493a2732ba2fc1?s=128&d=identicon&r=PG&f=1", "display_name": "sigsag", "link": "https://stackoverflow.com/users/4306431/sigsag"}, "edited": false, "score": 0, "creation_date": 1573650900, "post_id": 58836958, "comment_id": 103950200, "body": "yes, Bodo. HexlastName will have one value i.e.: HexlastName=&quot;0x00D1&quot; and I would like to put into &quot;input&quot; (uint32_t)."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1573651086, "post_id": 58836958, "comment_id": 103950310, "body": "see <a href=\"https://ideone.com/rtRdAE\" rel=\"nofollow noreferrer\">ideone.com/rtRdAE</a>"}, {"owner": {"reputation": 29, "user_id": 4306431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77c56434ee8cf5642a493a2732ba2fc1?s=128&d=identicon&r=PG&f=1", "display_name": "sigsag", "link": "https://stackoverflow.com/users/4306431/sigsag"}, "edited": false, "score": 0, "creation_date": 1573651616, "post_id": 58836958, "comment_id": 103950603, "body": "really pmg!! thank you so much!!! For me, you&#39;re a machine!!! :) Thanks, thanks!!!"}, {"owner": {"reputation": 29, "user_id": 4306431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77c56434ee8cf5642a493a2732ba2fc1?s=128&d=identicon&r=PG&f=1", "display_name": "sigsag", "link": "https://stackoverflow.com/users/4306431/sigsag"}, "edited": false, "score": 0, "creation_date": 1573652081, "post_id": 58836958, "comment_id": 103950906, "body": "Sorry pmg, one question, why in &quot;ideone.com/rtRdAE&quot; has size &quot;33&quot;?  could it be dynamic, I mean, in function of lenght var.&quot;HexlastName&quot;? Thank you."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1573652248, "post_id": 58836958, "comment_id": 103950997, "body": "yes it could be dynamic; <code>33</code> was just the number that my fingers touched. And, to be safe, the code should check to not write outside the defined length. Those details I left for you :)"}], "answers": [{"tags": [], "owner": {"reputation": 29, "user_id": 4306431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77c56434ee8cf5642a493a2732ba2fc1?s=128&d=identicon&r=PG&f=1", "display_name": "sigsag", "link": "https://stackoverflow.com/users/4306431/sigsag"}, "is_accepted": true, "score": 0, "last_activity_date": 1573727645, "creation_date": 1573727645, "answer_id": 58854687, "question_id": 58836958, "link": "https://stackoverflow.com/questions/58836958/assign-char-string-to-uint32-t-only-c-not-c/58854687#58854687", "title": "assign char string to uint32_t (only c, not c++)", "body": "<p>Thanks to the reply sir pmg give to me the answer.</p>\n\n<p>I've got a var named \"input\"(uint32_t), and another var called \"HEXlocalName\"that contains an array string with unicodes (0x0000010x000002). </p>\n\n<p>This routine moves the content of var \"hexlocalname\" into var \"input\" (unit32_t)</p>\n\n<pre><code>#include &lt;limits.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;stdio.h&gt;\n\nint main(void) {\n    char v[UCHAR_MAX + 1] = {0};\n    v['0'] = 0;\n    v['1'] = 1;\n    v['2'] = 2;\n    v['3'] = 3;\n    v['4'] = 4;\n    v['5'] = 5;\n    v['6'] = 6;\n    v['7'] = 7;\n    v['8'] = 8;\n    v['9'] = 9;\n    v['a'] = v['A'] = 10;\n    v['b'] = v['B'] = 11;\n    v['c'] = v['C'] = 12;\n    v['d'] = v['D'] = 13;\n    v['e'] = v['E'] = 14;\n    v['f'] = v['F'] = 15;\n    char *HEXlastName = \"0x00D10x00C10x00450x00C10x00D1\";\n    char *p = HEXlastName;\n    uint32_t input[33];\n    size_t n = 0;\n    while (*p) {\n        input[n++] = (v[(unsigned)p[2]]&lt;&lt;12) + (v[(unsigned)p[3]]&lt;&lt;8) + (v[(unsigned)p[4]]&lt;&lt;4) + (v[(unsigned)p[5]]);\n        p += 6;\n    }\n    for (int k = 0; k &lt; n; k++) {\n        printf(\"input[%d] is 0x%04X\\n\", k, input[k]);\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 4306431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77c56434ee8cf5642a493a2732ba2fc1?s=128&d=identicon&r=PG&f=1", "display_name": "sigsag", "link": "https://stackoverflow.com/users/4306431/sigsag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 58854687, "answer_count": 1, "score": -4, "last_activity_date": 1573727645, "creation_date": 1573647450, "last_edit_date": 1573651152, "question_id": 58836958, "link": "https://stackoverflow.com/questions/58836958/assign-char-string-to-uint32-t-only-c-not-c", "title": "assign char string to uint32_t (only c, not c++)", "body": "<p>I would like to know how I should assing a value to a uint32_t variable into the \"input\" variable. </p>\n\n<p>see code below.</p>\n\n<pre><code>char *HEXlastName = \"0x00D1\";\nuint32_t *in, input[];\n\nchar *utf8;\nchar word[50] = { \"\" };\n    for(in = input; *in; ++in) {\n        utf8 = to_utf8(*in);\n        strcat(word, utf8);\n        (void)userlog(\"%s:word--&gt; %s\",prc, word);\n    }\n\nchar *to_utf8(const uint32_t cp)\n{\n    static char ret[5];\n    const int bytes = codepoint_len(cp);\n\n    int shift = utf[0]-&gt;bits_stored * (bytes - 1);\n    ret[0] = (cp &gt;&gt; shift &amp; utf[bytes]-&gt;mask) | utf[bytes]-&gt;lead;\n    shift -= utf[0]-&gt;bits_stored;\n    int i;\n    for(i=1; i &lt; bytes; ++i) {\n        ret[i] = (cp &gt;&gt; shift &amp; utf[0]-&gt;mask) | utf[0]-&gt;lead;\n        shift -= utf[0]-&gt;bits_stored;\n    }\n    ret[bytes] = '\\0';\n    return ret;\n}\n</code></pre>\n\n<p>I'd like to assign the value of \"HEXlastName\" to var.: input(uint32_t). How shoud I do it?</p>\n\n<pre><code>char *HEXlastName = \"0x00D1\";\ninput = HEXlastName ;   //--&gt; This sentente is wrong. \n                       //How I could move the content of HEXlastName to input\n</code></pre>\n\n<p>Maybe it's a silly question, but I'm new in C language.</p>\n\n<p>Regards</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 0, "creation_date": 1573646343, "post_id": 58836527, "comment_id": 103947784, "body": "Please take the <a href=\"https://stackoverflow.com/tour\">tour</a> and learn <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>. Then provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, please."}, {"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 1, "creation_date": 1573647453, "post_id": 58836527, "comment_id": 103948305, "body": "You should use <code>fgets(s, sizeof(s), stdin);</code> unless <code>s</code> is dynamically allocated."}, {"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 1, "creation_date": 1573647510, "post_id": 58836527, "comment_id": 103948334, "body": "The other letters go past <code>s</code> and overwrite the stack, which will probably cause your program to crash."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1573649926, "post_id": 58836527, "comment_id": 103949605, "body": "Overwriting memory that doesn&#39;t belong to you will result in <i>undefined dbehaviour</i> (google that term)."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 2, "creation_date": 1573649933, "post_id": 58836527, "comment_id": 103949612, "body": "Two rules about <code>fgets</code>: (1) the number you pass as the second argument should always be the size of the memory area pointed to by the first argument.  (2) This number should always be comfortably greater than the longest input line you can reasonably expect."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1573649975, "post_id": 58836527, "comment_id": 103949641, "body": "This means that if you want to limit the user&#39;s input to (say) 2 or 10 characters, the limit you pass to <code>fgets</code> is <i>not</i> the way to do it."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1573649987, "post_id": 58836527, "comment_id": 103949652, "body": "Also <code>sizeof(s)</code> isn&#39;t the length of the string pointed to by <code>s</code>. You need the <code>strlen</code> function."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1573652460, "post_id": 58836527, "comment_id": 103951145, "body": "Try <code>char s[2];     fgets(s, 10, stdin);</code> --&gt; <code>char s[80];     fgets(s, sizeof s, stdin);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 163, "user_id": 12313191, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDelPS5VpuVOfMYXPwWBTLBvilRRWDWFzYm4WiPJA=k-s128", "display_name": "Yoni Melki", "link": "https://stackoverflow.com/users/12313191/yoni-melki"}, "is_accepted": false, "score": 0, "last_activity_date": 1573651571, "creation_date": 1573651571, "answer_id": 58838175, "question_id": 58836527, "link": "https://stackoverflow.com/questions/58836527/fgets-difference-between-array-size-and-int-num/58838175#58838175", "title": "fgets -difference between array size and int num", "body": "<p>Your string has a size of 2. so it can only collect from the user 1 character because after it, it has to put a '\\0' for marking the end of the string.\nif you want to put 10 char - try <code>s[11]</code>.\nlike this you can collect 10 chars and then the last char (s[10]) will be '\\0' (will be inputed there automatically).</p>\n"}], "owner": {"reputation": 1, "user_id": 12366503, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_CqewhO1yT4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfGLvfSxoHMwUfpCx5T4OK2oMu6Dw/photo.jpg?sz=128", "display_name": "Qu\u1ed1c L\u1eadp Tr\u01b0\u01a1ng", "link": "https://stackoverflow.com/users/12366503/qu%e1%bb%91c-l%e1%ba%adp-tr%c6%b0%c6%a1ng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1573665883, "creation_date": 1573645922, "last_edit_date": 1573665883, "question_id": 58836527, "link": "https://stackoverflow.com/questions/58836527/fgets-difference-between-array-size-and-int-num", "title": "fgets -difference between array size and int num", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n    char s[2];\n    printf(\"Enter some things here: \");\n    fgets(s, 10, stdin);\n//    strrev(s);\n    printf(\"\\nText: %s\", s);\n    printf(\"\\nsize: %d\\n\", sizeof(s));\n    for(int i = 0; i &lt; 10; i++)\n        printf(\"%c\\n\", s[i]);\n    return 0;\n}\n\n//CONSOLE:\n/*Enter some things here: abcdefghiklmn\n\nText: abcdefghi\nsize: 2\na\nb\n  (this is a symbol)\n\n\n\ng\nh\ni\n\n*/\n</code></pre>\n\n<p>A problem using fgets when i make the \"INT\" that fgets read higher than size of the arra (pic)\nSo where do other letters go?, what truly happens in the memmory ??\nthanks everyone!</p>\n\n<p>**update: \nTks everyone. Btw, i noticed that regardless of any \"string\" and size of s (smaller than the \"int\" - basically just some testing), the output will be \n 1. those that stored in array s \n 2. weird symbol ( maybe it's the \"\\0\" to construc a string ) \n 3. blank blank blank... \n 4. last part of my inputed String before. \n Is there any concidences here ? Just some curiosity, tks all again ^^</p>\n"}, {"tags": ["c", "dynamic", "stack", "malloc"], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 8746969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/360338f43a6420b517d3fd0d56cba828?s=128&d=identicon&r=PG&f=1", "display_name": "pixel", "link": "https://stackoverflow.com/users/8746969/pixel"}, "edited": false, "score": 1, "creation_date": 1573647312, "post_id": 58836557, "comment_id": 103948238, "body": "That&#39;s it. Is sizeof(*tmp) instead of sizeof(tmp). Thank you very much!!"}, {"owner": {"reputation": 7239, "user_id": 12361700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/287854d44d93bab6658abf2d547578cc?s=128&d=identicon&r=PG&f=1", "display_name": "Berto99", "link": "https://stackoverflow.com/users/12361700/berto99"}, "edited": false, "score": 0, "creation_date": 1573647473, "post_id": 58836557, "comment_id": 103948319, "body": "what i mean is that <code>tmp=(tFavoriteStackNode*)malloc(sizeof(tmp));</code> should become   <code>tmp=(tFavoriteStackNode*)malloc(sizeof(tFavoriteStackNode));</code>"}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 2, "creation_date": 1573647779, "post_id": 58836557, "comment_id": 103948465, "body": "The <code>tmp=malloc(sizeof(*tmp));</code> form (no cast) is generally recommended. See <a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\" title=\"do i cast the result of malloc\">stackoverflow.com/questions/605845/&hellip;</a>"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1573656034, "post_id": 58836557, "comment_id": 103953247, "body": "People recommend <code>sizeof(*tmp)</code> since you don&#39;t have to write the type twice. But you do have to write the variable name twice."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 2, "creation_date": 1573663454, "post_id": 58836557, "comment_id": 103957657, "body": "@user253751 It doesn&#39;t matter much if you&#39;re <code>malloc</code>ing in an initialization: <code>t *p = malloc(sizeof(t));</code>,  where the type on the left and the type in the sizeof are right next to each other =&gt; easy to verify the <code>t</code> matches the <code>sizeof(t)</code>. But you could also have <code>t *p; &#47;*...code...*&#47; p = malloc(sizeof(t))</code> and then if the declaration changes to <code>t1 *p</code>, the <code>malloc</code> call will be wrong and the error might not be easy to spot. <code>t *p; &#47;*...code...*&#47; p = malloc(sizeof(*p));</code> won&#39;t have that problem."}], "tags": [], "owner": {"reputation": 7239, "user_id": 12361700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/287854d44d93bab6658abf2d547578cc?s=128&d=identicon&r=PG&f=1", "display_name": "Berto99", "link": "https://stackoverflow.com/users/12361700/berto99"}, "is_accepted": false, "score": 3, "last_activity_date": 1573647633, "last_edit_date": 1573647633, "creation_date": 1573645996, "answer_id": 58836557, "question_id": 58836500, "link": "https://stackoverflow.com/questions/58836500/stack-push-function-only-works-when-debugging/58836557#58836557", "title": "Stack Push function only works when debugging", "body": "<p><code>sizeof(tmp)</code> will return the size of the pointer, not the size of the object, maybe <code>sizeof(*tmp)</code>, but the best in my opinion is </p>\n\n<p><code>tmp=(tFavoriteStackNode*)malloc(sizeof(tFavoriteStackNode));</code></p>\n"}], "owner": {"reputation": 9, "user_id": 8746969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/360338f43a6420b517d3fd0d56cba828?s=128&d=identicon&r=PG&f=1", "display_name": "pixel", "link": "https://stackoverflow.com/users/8746969/pixel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573647633, "creation_date": 1573645853, "question_id": 58836500, "link": "https://stackoverflow.com/questions/58836500/stack-push-function-only-works-when-debugging", "title": "Stack Push function only works when debugging", "body": "<p>I have a problem with a push function. It's a simple push function for stack structure but most of the time doesn't work. It only works when debugging.\nThis is the function:</p>\n\n<pre><code>tError favoriteStack_push(tFavoriteStack *stack, tFavorite favorite) {\n    //assert(stack!=NULL);\n\n    tFavoriteStackNode* tmp;\n\n    //mem_allocation of new node\n    tmp=(tFavoriteStackNode*)malloc(sizeof(tmp));\n\n    if(tmp==NULL)\n        return ERR_MEMORY_ERROR;\n\n    //copying element to new node\n    tmp-&gt;e=favorite;\n\n    //pointing next to previous first element\n    tmp-&gt;next=stack-&gt;first;\n\n    //new node is the new first node\n    stack-&gt;first=tmp;\n\n    return OK;\n\n}\n</code></pre>\n\n<p>I can't see the mistake. \nI would appreciate some help.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "stm32"], "comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1573645818, "post_id": 58836403, "comment_id": 103947518, "body": "Given <code>uint8_t var;</code>, <code>st = sscanf(&amp;line[off], &quot;%x&quot;, &amp;var);</code> is undefined behavior because <code>%x</code> is for the address of an <code>unsigned int</code> variable, not the address of a <code>uint8_t</code> variable."}, {"owner": {"reputation": 3435, "user_id": 2699113, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/94940a425c39618d108ce74cde4d3931?s=128&d=identicon&r=PG&f=1", "display_name": "user2699113", "link": "https://stackoverflow.com/users/2699113/user2699113"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1573646090, "post_id": 58836403, "comment_id": 103947655, "body": "@AndrewHenle  Yes, I know about it. But why the second line produces wrong result?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1573646214, "post_id": 58836403, "comment_id": 103947716, "body": "@user2699113 Because the first sscanf bug blew up your memory somehow (<code>.stack</code> or <code>.data</code> has been overwritten etc) and the program has ceased to exist in a predictable execution environment. Such is the nature of undefined behavior bugs."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1573646231, "post_id": 58836403, "comment_id": 103947728, "body": "remember that embedded implementations are much simpler and do not support many formats. Try to fucus on the native types, do not use modifiers like <code>hh</code> etc etc"}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1573646272, "post_id": 58836403, "comment_id": 103947748, "body": "What is your standard library implementation? Are you using newlib? Are you linking with newlib-nano? Do you compile/link with <code>-lnano</code> or <code>-specs=nano.specs</code>?"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1573646279, "post_id": 58836403, "comment_id": 103947753, "body": "@Lundin we do not know if it is an actual code"}, {"owner": {"reputation": 3435, "user_id": 2699113, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/94940a425c39618d108ce74cde4d3931?s=128&d=identicon&r=PG&f=1", "display_name": "user2699113", "link": "https://stackoverflow.com/users/2699113/user2699113"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1573646421, "post_id": 58836403, "comment_id": 103947813, "body": "@KamilCuk: yes, I&#39;m using nano.specs."}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1573646440, "post_id": 58836403, "comment_id": 103947825, "body": "Then <code>hhu</code> is not supported, let me check. <a href=\"https://github.com/32bitmicro/newlib-nano-1.0/blob/master/newlib/libc/stdio/vfwscanf.c#L496\" rel=\"nofollow noreferrer\">Indeed</a>"}, {"owner": {"reputation": 3435, "user_id": 2699113, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/94940a425c39618d108ce74cde4d3931?s=128&d=identicon&r=PG&f=1", "display_name": "user2699113", "link": "https://stackoverflow.com/users/2699113/user2699113"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1573646621, "post_id": 58836403, "comment_id": 103947924, "body": "@Lundin: Not quite, I&#39;m using only one of those scanfs at a time not both at the same time."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1573646894, "post_id": 58836403, "comment_id": 103948062, "body": "Anyway just nuke stdio.h from orbit and use <code>strtoul(buf, NULL, 16)</code>."}], "answers": [{"comments": [{"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1573646452, "post_id": 58836574, "comment_id": 103947828, "body": "<code>&quot;%&quot;PRIx8</code> in small embedded uC implementtion?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1573646670, "post_id": 58836574, "comment_id": 103947949, "body": "@P__J__ <code>stdio.h</code> shouldn&#39;t be used in production code, least of all in embedded systems. But that&#39;s another story."}, {"owner": {"reputation": 3435, "user_id": 2699113, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/94940a425c39618d108ce74cde4d3931?s=128&d=identicon&r=PG&f=1", "display_name": "user2699113", "link": "https://stackoverflow.com/users/2699113/user2699113"}, "edited": false, "score": 0, "creation_date": 1573646989, "post_id": 58836574, "comment_id": 103948111, "body": "Yes, I&#39;ve already used strtoul instead and it is working properly. Regarding &quot;%&quot;PRIx8 I get error from gcc: error: expected &#39;)&#39; before &#39;PRIx8&#39;."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 3435, "user_id": 2699113, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/94940a425c39618d108ce74cde4d3931?s=128&d=identicon&r=PG&f=1", "display_name": "user2699113", "link": "https://stackoverflow.com/users/2699113/user2699113"}, "edited": false, "score": 0, "creation_date": 1573647392, "post_id": 58836574, "comment_id": 103948277, "body": "@user2699113 Sorry, it should be <code>SCNx8</code>! printf and scanf use different specifiers for the stdint.h types."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 2, "last_activity_date": 1573647433, "last_edit_date": 1573647433, "creation_date": 1573646064, "answer_id": 58836574, "question_id": 58836403, "link": "https://stackoverflow.com/questions/58836403/problem-with-using-scanf-function-under-stm32/58836574#58836574", "title": "Problem with using scanf function under stm32", "body": "<ul>\n<li><code>%x</code> without a prefix before the <code>x</code> means scanf is expecting a pointer to <code>unsigned int</code></li>\n<li><code>%hh</code> is used for <code>signed char</code> or <code>unsigned char</code>.</li>\n<li><code>%hhx</code> is used for <code>signed char</code> or <code>unsigned char</code> in hex format.</li>\n<li><code>\"%\"SCNu8</code> is used for scanning <code>uint8_t</code>.</li>\n<li><code>\"%\"SCNx8</code> is used for <code>uint8_t</code> in hex format.</li>\n<li><code>uint8_t</code> is most likely 100% equivalent to <code>unsigned char</code> on any system.</li>\n</ul>\n\n<p>This means that here <code>\"%x\", &amp;var</code> you lie to the compiler and (assuming 32 bit CPU) you tell it \"go ahead and read 32 bit large integer), then pass a memory address where only 8 bits of valid data are stored. This is undefined behavior and anything can happen. </p>\n\n<p>Speculating about why undefined behavior bugs manifest themselves in a certain way for your specific system is rather meaningless.</p>\n\n<p>Instead, do this:</p>\n\n<pre><code>#include &lt;inttypes.h&gt;\nuint8_t var;\nst = sscanf(&amp;line[off], \"%\"SCNx8, &amp;var);\n</code></pre>\n\n<hr>\n\n<p>Please note that <code>sscanf</code> is a terribly slow and dangerous function and should not be used on embedded systems. Always use <code>strtoul</code> instead.</p>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1573647538, "post_id": 58836830, "comment_id": 103948348, "body": "If that&#39;s the case then the correct solution is probably to stick with what the OP have, a freestanding implementation lib, and adapt the code accordingly to suit freestanding (embedded) systems."}], "tags": [], "owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "is_accepted": false, "score": 1, "last_activity_date": 1573647000, "creation_date": 1573647000, "answer_id": 58836830, "question_id": 58836403, "link": "https://stackoverflow.com/questions/58836403/problem-with-using-scanf-function-under-stm32/58836830#58836830", "title": "Problem with using scanf function under stm32", "body": "<p>You are linking against what is commonly refereed as \"newlib-nano\". Nano version of newlib comes with limited support from the standard library - it doesn't support all C99 <em>length modifiers</em>, like <code>ll</code> or <code>hh</code> in both <code>printf</code> and <code>scanf</code>.</p>\n\n<p>The solution is to link against full implementation of newlib, so remove <code>-specs=nano.specs</code> or similar from the linking options, or don't use <code>hh</code> <em>length modifier</em> when compiling with newlib-nano or use other method of converting a string to an integer.</p>\n"}], "owner": {"reputation": 3435, "user_id": 2699113, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/94940a425c39618d108ce74cde4d3931?s=128&d=identicon&r=PG&f=1", "display_name": "user2699113", "link": "https://stackoverflow.com/users/2699113/user2699113"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 960, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1573647433, "creation_date": 1573645542, "last_edit_date": 1573645883, "question_id": 58836403, "link": "https://stackoverflow.com/questions/58836403/problem-with-using-scanf-function-under-stm32", "title": "Problem with using scanf function under stm32", "body": "<p>I've came across on some interesting thing during use of sscanf() for STM32F437:</p>\n\n<pre><code>uint8_t var;\nst = sscanf(&amp;line[off], \"%x\", &amp;var);\nst = sscanf(&amp;line[off], \"%hhx\", &amp;var);\n</code></pre>\n\n<p>When I'm trying to compile first line I get suggestion from gcc to use \"%hhx\" instead of \"%x\". But when I changed this line to the second one - suggestion from gcc disappeared, but the result of scanning is wrong. </p>\n\n<p>When &amp;line[off] points to following string: 52 then the first scanf(...\"%x\"...) is working correctly giving 0x52, but the second scanf(...\"%hhx\"...) produces result 0x34.</p>\n\n<p>Seems like scanf(\"...\"%hhx\"...\") interpretes 52 as a decimal value 52 and then converts it to hexadecimal value 0x34.\nI am using arm-none-eabi-gcc version 9.2.0.</p>\n\n<p>Did I miss something or this is some bug in scanf()?</p>\n"}, {"tags": ["c", "memory-management"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1573644522, "post_id": 58836073, "comment_id": 103946906, "body": "Where are your <code>#include</code>s?"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 2, "creation_date": 1573644565, "post_id": 58836073, "comment_id": 103946934, "body": "<code>check_num(j, &amp;num[j]);</code> ==&gt; <code>check_num(j, num);</code>"}, {"owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "reply_to_user": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1573644634, "post_id": 58836073, "comment_id": 103946967, "body": "@pmg: A bit terse?"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "reply_to_user": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 1, "creation_date": 1573644683, "post_id": 58836073, "comment_id": 103946995, "body": "LOL @500 I love terse on mobile phone"}, {"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 1, "creation_date": 1573645406, "post_id": 58836073, "comment_id": 103947309, "body": "What is the purpose of the return value of <code>check_num()</code>? The calculation <code>val = sqrt(number[j]);</code> may not always do what you expect. It first converts the <code>int</code> value to <code>double</code>, which may change the value, calculate the square root as a <code>double</code> value and truncate it to an integer. If you pass <code>10</code> you will probably get the result <code>3</code>. You should at least cross check that <code>val * val</code> is equal to the original number."}], "answers": [{"comments": [{"owner": {"reputation": 7239, "user_id": 12361700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/287854d44d93bab6658abf2d547578cc?s=128&d=identicon&r=PG&f=1", "display_name": "Berto99", "link": "https://stackoverflow.com/users/12361700/berto99"}, "edited": false, "score": 0, "creation_date": 1573645541, "post_id": 58836354, "comment_id": 103947374, "body": "well, also check_num(j, num); will work, rather i think it&#39;s better, because check_num with &amp; can modify the pointer, is a array pointer can be changed in C.."}], "tags": [], "owner": {"reputation": 7239, "user_id": 12361700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/287854d44d93bab6658abf2d547578cc?s=128&d=identicon&r=PG&f=1", "display_name": "Berto99", "link": "https://stackoverflow.com/users/12361700/berto99"}, "is_accepted": true, "score": 0, "last_activity_date": 1573646893, "last_edit_date": 1573646893, "creation_date": 1573645389, "answer_id": 58836354, "question_id": 58836073, "link": "https://stackoverflow.com/questions/58836073/function-returning-garbage-values-but-not-all-of-them-in-c/58836354#58836354", "title": "Function returning garbage values but not all of them in C", "body": "<p>For what I can see, there is only one error:</p>\n\n<p>The call to <code>check_num</code> must be changed from <code>check_num(j, &amp;num[j]);</code> to <code>check_num(j, &amp;num);</code> otherwise you are passing for example the address <code>num[j]</code> and from that address you are trying to access the <code>j</code> element, so you are trying to access the <code>j+j</code> element.</p>\n"}, {"tags": [], "owner": {"reputation": 65, "user_id": 12360746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d33ae492f1fae7dd81861242f95177e?s=128&d=identicon&r=PG&f=1", "display_name": "Anup Agrawal", "link": "https://stackoverflow.com/users/12360746/anup-agrawal"}, "is_accepted": false, "score": 0, "last_activity_date": 1573647960, "last_edit_date": 1573647960, "creation_date": 1573647178, "answer_id": 58836878, "question_id": 58836073, "link": "https://stackoverflow.com/questions/58836073/function-returning-garbage-values-but-not-all-of-them-in-c/58836878#58836878", "title": "Function returning garbage values but not all of them in C", "body": "<p>you are getting that int array into an int array variable. Instead of that , you can directly give it to the int variable.\nsee this code.</p>\n\n<pre><code>int num_of_elements=4;\n\n//function declarations\nvoid check_num(int i, int number);\n\n//main function\nint main() {\n\n\n    //local variables\n    int num[5];\n    int i;\n\n    printf(\"\\nEnter a number that ends with 0\");\n\n    for (i=0;i&lt;num_of_elements;i++) {\n        do {\n            printf(\"\\n%d.Enter a number: \", i+1);\n            scanf(\"%d\", &amp;num[i]);\n        } while (num[i] % 10 != 0);\n\n        printf(\"\\nElement %d: %d\\n\", i+1, num[i]);\n    }\n\n    int j = 0;\n\n    while (j&lt;num_of_elements) {\n\n        check_num(j,num[j]);\n        printf(\"%d\\n\",num[j]);\n        j++;\n    }\n\n    return 0;\n}\n\n\n\n\nvoid check_num(int j, int number) {\n\n\n\n\n    int val;\n\n    printf(\"\\nnumber[%d] is %d\",j,number);\n\n    val = sqrt((number));\n    printf(\"\\nsquare root is  %d\", val);\n\n        if (val % 2 == 0) {\n            printf(\"\\n%d is a an even number squared\", number);\n        } else {\n            printf(\"\\n%d is an odd number squared\", number);\n        }\n    printf(\"\\n\");\n\n    //return number;\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 10513290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/810897f6fb86a1b2f7ce28961517ff3b?s=128&d=identicon&r=PG&f=1", "display_name": "jimmyblow", "link": "https://stackoverflow.com/users/10513290/jimmyblow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 58836354, "answer_count": 2, "score": 1, "last_activity_date": 1573647960, "creation_date": 1573644352, "question_id": 58836073, "link": "https://stackoverflow.com/questions/58836073/function-returning-garbage-values-but-not-all-of-them-in-c", "title": "Function returning garbage values but not all of them in C", "body": "<p><strong>So here's what I need to accomplish:</strong></p>\n\n<ul>\n<li>Enter a sequence of whole numbers that end with 0</li>\n<li>Out of those numbers - calculate its square root and check if it's an odd or even number.</li>\n<li>Make use of while or do-while loops in the process.</li>\n</ul>\n\n<p>I have my no. of elements set to 4 for now, but no matter what number I set, <strong>roughly half of them come out as garbage values</strong> in the end. </p>\n\n<p>I assume this is a pointer related issue or a memory leak somewhere, I'm just not sure. Any input would be appreciated</p>\n\n<pre><code>    int num_of_elements = 4;\n\n//function declarations\nint* check_num(int i, int number[num_of_elements]);\n\n//main function\nint main() {\n\n\n    //local variables\n    int num[5];\n    int i;\n\n    printf(\"\\nEnter a number that ends with 0\");\n\n    for (i=0;i&lt;num_of_elements;i++) {\n        do {\n            printf(\"\\n%d.Enter a number: \", i+1);\n            scanf(\"%d\", &amp;num[i]);\n        } while (num[i] % 10 != 0);\n\n        printf(\"\\nElement %d: %d\\n\", i+1, num[i]);\n    }\n\n    int j = 0;\n\n    while (j&lt;num_of_elements) {\n        check_num(j, &amp;num[j]);\n        j++;\n    }\n\n    return 0;\n}\n\n//function that takes the square root and checks if it's an odd or even number\n\nint* check_num(int j, int number[num_of_elements]) {\n\n    int val;\n\n    printf(\"\\nnumber[%d] is %d\",j,number[j]);\n\n    val = sqrt(number[j]);\n    printf(\"\\nsquare root is is %d\", val);\n\n        if (val % 2 == 0) {\n            printf(\"\\n%d is a an even number squared\", number[j]);\n        } else {\n            printf(\"\\n%d is an odd number squared\", number[j]);\n        }\n    printf(\"\\n\");\n\n    return number;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "openssl", "sha256", "pbkdf2"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1573646005, "post_id": 58835731, "comment_id": 103947615, "body": "How about running the program in the debugger?"}], "answers": [{"tags": [], "owner": {"reputation": 55, "user_id": 12362433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2313d9ef4e35366dd9ba01ec40bb07d4?s=128&d=identicon&r=PG&f=1", "display_name": "Valerio Coretti", "link": "https://stackoverflow.com/users/12362433/valerio-coretti"}, "is_accepted": false, "score": 0, "last_activity_date": 1575121262, "creation_date": 1575121262, "answer_id": 59116718, "question_id": 58835731, "link": "https://stackoverflow.com/questions/58835731/how-to-translate-openssl-command-pbkdf2-in-c-languge/59116718#59116718", "title": "How to translate openssl command pbkdf2 in c languge?", "body": "<p>I solved this problem seeing in the source code of openssl on GitHub:</p>\n\n<p><a href=\"https://github.com/openssl/openssl/blob/master/apps/enc.c\" rel=\"nofollow noreferrer\">https://github.com/openssl/openssl/blob/master/apps/enc.c</a></p>\n"}], "owner": {"reputation": 55, "user_id": 12362433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2313d9ef4e35366dd9ba01ec40bb07d4?s=128&d=identicon&r=PG&f=1", "display_name": "Valerio Coretti", "link": "https://stackoverflow.com/users/12362433/valerio-coretti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575121262, "creation_date": 1573643067, "last_edit_date": 1573643249, "question_id": 58835731, "link": "https://stackoverflow.com/questions/58835731/how-to-translate-openssl-command-pbkdf2-in-c-languge", "title": "How to translate openssl command pbkdf2 in c languge?", "body": "<p>Hy guys, another problem about openssl:</p>\n\n<p>I have this command: </p>\n\n<pre><code>openssl enc -aes-192-cbc -pbkdf2 -e -in &lt;infile&gt; -out &lt;outfile&gt; -pass pass:password \n</code></pre>\n\n<p>Now i have only the ciphertext of this command and i know the password and then i know also the salt that is the first 8 bytes of the ciphertext after the string \"Salted__\". I know also that openssl as default parameter take 1000 iteration count and sha256 as a digest. My problem is: how i can go back to the derived key and derived iv from c language?</p>\n\n<p>My code is this but it not return the right values:</p>\n\n<pre><code>void decrypt(unsigned char *ciphertext, int ciphertext_len, unsigned char *plaintext, const char *password, unsigned char* salt){\n    EVP_CIPHER_CTX *ctx;\n\n    int len;\n\n    int plaintext_len;\n\n    //unsigned char* key = \"EF04020D6979FC09CC1859A2BFB832FFFCF57C64BA61F682\"; right value\n    //unsigned char* iv = \"722EDDC813763C9AAB96A0A6885CE1DB\"; right value\n    unsigned char key[24], iv[16];\n\n    int i;  \n\n    PKCS5_PBKDF2_HMAC(password, strlen(password), (unsigned char*)salt, strlen(salt), 1000, EVP_sha256(), 16, key);\n\n    EVP_BytesToKey(EVP_aes_192_cbc(), EVP_sha256(), (unsigned char*)salt, (unsigned char*)password, strlen(password), 1000, key+16, iv);\n\n    printf(\"Key: \"); for(i=0; i &lt; 24; ++i){ printf(\"%02x\", key[i]); } printf(\"\\n\");\n    printf(\"IV: \"); for(i=0; i &lt; 16; ++i){ printf(\"%02x\", iv[i]); } printf(\"\\n\\n\");\n\n    //Create and initialise the context \n    if(!(ctx = EVP_CIPHER_CTX_new()))\n        handleErrors();\n\n\n    //Initialise the decryption operation. IMPORTANT - ensure you use a key\n    //and IV size appropriate for your cipher\n\n    if(1 != EVP_DecryptInit_ex(ctx, EVP_aes_192_cbc(), NULL, key, iv))\n        handleErrors();\n\n    //Provide the message to be decrypted, and obtain the plaintext output.\n    //EVP_DecryptUpdate can be called multiple times if necessary.\n\n    if(1 != EVP_DecryptUpdate(ctx, plaintext, &amp;len, ciphertext, ciphertext_len))\n        handleErrors();\n    plaintext_len = len;\n\n    //Finalise the decryption. Further plaintext bytes may be written at\n    //this stage.\n\n    if(1 != EVP_DecryptFinal_ex(ctx, plaintext + len, &amp;len))\n        handleErrors();\n    plaintext_len += len;\n\n    //Clean up \n    EVP_CIPHER_CTX_free(ctx);\n\n}\n</code></pre>\n\n<p>The right values are commented and i take it from the terminal.... but my c code don't return that values.\nI think this depends by the fact that i don't translate well the -pbkdf2 derivation key...Help me please</p>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "edited": false, "score": 2, "creation_date": 1573642884, "post_id": 58835621, "comment_id": 103946077, "body": "I don&#39;t quite get you&#39;re question, to be honest, but I guess you&#39;re thinking of <code>y[i] == *(y+i)</code>\u2026"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 3, "creation_date": 1573642986, "post_id": 58835621, "comment_id": 103946133, "body": "<code>int readArray(*y, dimension)</code> is that suppose dto be a function declaration? because it&#39;s completely missing per-argument type specifications. And you should learn sooner rather than later, <i>&quot;but the array is also a pointer&quot;</i> is flat-wrong. Arrays are not pointers. When used in an expression context their <i>value</i> representation is converted to a <i>temporary</i> pointer to first element. Pointers are <i>not</i> arrays; arrays are <i>not</i> pointers."}, {"owner": {"reputation": 581, "user_id": 5863848, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s3w85.jpg?s=128&g=1", "display_name": "NishanthSpShetty", "link": "https://stackoverflow.com/users/5863848/nishanthspshetty"}, "edited": false, "score": 1, "creation_date": 1573643046, "post_id": 58835621, "comment_id": 103946171, "body": "array will decay into pointer,  so <code>y[i]</code> statement will become <code>*(y+1)</code>"}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 1, "creation_date": 1573643046, "post_id": 58835621, "comment_id": 103946172, "body": "I\u2019ll let somebody else answer but note that your first code comment is incorrect: the <i>size</i> of the array is 10, not its dimension. In fact, the <i>dimension</i> is 1."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1573643113, "post_id": 58835621, "comment_id": 103946209, "body": "when you call the function <code>readArray(x, 10)</code> the array <code>x</code> is converted to a pointer to its first element (some people say it &quot;decays&quot;) so your comment is misleading. <code>readArray(x, 10); &#47;* 2 arguments: a pointer and a length *&#47;</code>"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1573643141, "post_id": 58835621, "comment_id": 103946221, "body": "C does not pass the array to a function. It always passes the address of the first element to the function. Inside the function, C allows a pointer to be treated as an array and so you can write <code>y[i]= i;</code>"}, {"owner": {"reputation": 581, "user_id": 5863848, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s3w85.jpg?s=128&g=1", "display_name": "NishanthSpShetty", "link": "https://stackoverflow.com/users/5863848/nishanthspshetty"}, "edited": false, "score": 0, "creation_date": 1573643448, "post_id": 58835621, "comment_id": 103946382, "body": "for more detailed understanding of C, read <a href=\"https://www.bell-labs.com/usr/dmr/www/chist.html\" rel=\"nofollow noreferrer\">this</a>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1573645272, "post_id": 58835621, "comment_id": 103947248, "body": "<code>*y[i] = i;</code> is an error, you should get an error message (adjust compiler settings if you do not)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1573645296, "post_id": 58835621, "comment_id": 103947254, "body": "&quot;y is a pointer to x&quot; -- actually <code>y</code> is a pointer to <code>x[0]</code>. Recall that you initialized y as <code>x</code>, not <code>&amp;x</code> ."}, {"owner": {"reputation": 636, "user_id": 12184817, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eMaKO.png?s=128&g=1", "display_name": "Duarte Arribas", "link": "https://stackoverflow.com/users/12184817/duarte-arribas"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1573645480, "post_id": 58835621, "comment_id": 103947347, "body": "@M.M I guess I got confused, because if you want to change a variable by its pointer you do *y (where y is a pointer to a variable) but it doesn&#39;t work in arrays. Is that right?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1573688062, "post_id": 58835621, "comment_id": 103967998, "body": "@DuarteArribas <code>*y</code> means the same as <code>y[0]</code>. The <code>[]</code> operator dereferences with offset"}], "answers": [{"tags": [], "owner": {"reputation": 163, "user_id": 12313191, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDelPS5VpuVOfMYXPwWBTLBvilRRWDWFzYm4WiPJA=k-s128", "display_name": "Yoni Melki", "link": "https://stackoverflow.com/users/12313191/yoni-melki"}, "is_accepted": false, "score": -1, "last_activity_date": 1573643239, "creation_date": 1573643239, "answer_id": 58835780, "question_id": 58835621, "link": "https://stackoverflow.com/questions/58835621/how-does-to-access-pointers-of-variables-or-arrays-work/58835780#58835780", "title": "How does * to access pointers of variables or arrays work?", "body": "<p>The function readArray get a variable of type int* (y).\nWhen you do y[i] you \u00ab\u00a0cancel\u00a0\u00bb the * and then you can change the value in y[i]. Actually y[i] is like *(y+i).\nWhen you do *y[i] you are trying to use * on the element in y[i] and then the program makes you a bug.\nTell me if you understood :)</p>\n\n<p>Ps: write readArray(int* y, int size) \u2014>like this you can define a function (with the type of every variable)</p>\n"}, {"tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": true, "score": 1, "last_activity_date": 1573646668, "creation_date": 1573646668, "answer_id": 58836750, "question_id": 58835621, "link": "https://stackoverflow.com/questions/58835621/how-does-to-access-pointers-of-variables-or-arrays-work/58836750#58836750", "title": "How does * to access pointers of variables or arrays work?", "body": "<pre><code>readArray(x, 10); //calls the function readArray(), with 2 arguments, \n                   //the array x and its size, the constant 10\n</code></pre>\n\n<p>This does not actually pass the array <code>x</code>. When an array is used in an expression other than as the operand of <code>sizeof</code> or unary <code>&amp;</code> or as a string literal used to initialize an array, it is automatically converted to a pointer to its first argument. So this passes a pointer to <code>x[0]</code>, not <code>x</code>.</p>\n\n<pre><code>int readArray(int *y, int size){ //creates the function   readArray() with\n                              //a pointer y to the array x (with the address of the \n                              //first element of x and its size\n</code></pre>\n\n<p>The second part of the comment is correct, <code>y</code> receives the address of the first element of <code>x</code>. You should avoid thinking of it as the first part, a pointer to the array. A parameter <code>int *y</code> is a pointer to an <code>int</code>, not a pointer to an array. Even though an array and its first element may have the same value for their addresses (since they start in the same place), pointers to them have different types and behave differently.</p>\n\n<pre><code>*y[i] = i; //an * is used to access the array x and change its value\n</code></pre>\n\n<p>The subscript operator, <code>[ ]</code>, has higher precedence than <code>*</code>. So <code>*y[i]</code> is equivalent to <code>*(y[i])</code>. In <code>y[i]</code>, the index <code>i</code> is used to identify the element that is <code>i</code> elements beyond where <code>y</code> points. Then <code>y[i]</code> designates that element. By definition, <code>y[i]</code> is equivalent to <code>(*(y+i))</code>\u2014the C implementation takes the pointer <code>y</code>, adds <code>i</code> to it, and then applies <code>*</code> to refer to the element at the resulting address.</p>\n\n<p>When you then apply <code>*</code> to <code>y[i]</code>, you are attempting to apply <code>*</code> to an <code>int</code>, because <code>y[i]</code> is the <code>int</code> at the calculated location. So that yields an error message.</p>\n\n<pre><code>   y[i] = i // this is supposed to also change the value of x,\n            // but I thought to change the value we needed to use * as \n            // y is a pointer to x, therefore changing the values of x (because y is local to readArray())\n</code></pre>\n\n<p>The subscript operator, <code>[ ]</code> has a built-in <code>*</code> operator. So <code>y[i]</code> is <code>*(y+i)</code>.</p>\n\n<p>When you use the subscript operator with an array, as in <code>x[i]</code>, the array <code>x</code> is automatically converted to a pointer to its first element. So <code>x[i]</code> is actually <code>(&amp;x[0])[i]</code>. And, by definition of the subscript operator, that is actually <code>*(&amp;x[0] + i)</code>. So, when you use <code>x[i]</code>, the C implementation takes the address of the first element of <code>x</code>, adds <code>i</code> to it (counting in units of elements, not bytes), and then refers to that address.</p>\n\n<p>Because of this automatic conversion of arrays to pointers and the definition of the subscript operator, you can use both <code>x[i]</code> (where <code>x</code> is an array) and <code>y[i]</code> (where <code>y</code> is a pointer) to refer to the element number <code>i</code>.</p>\n"}], "owner": {"reputation": 636, "user_id": 12184817, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eMaKO.png?s=128&g=1", "display_name": "Duarte Arribas", "link": "https://stackoverflow.com/users/12184817/duarte-arribas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 58836750, "answer_count": 2, "score": 1, "last_activity_date": 1573646668, "creation_date": 1573642744, "last_edit_date": 1573644725, "question_id": 58835621, "link": "https://stackoverflow.com/questions/58835621/how-does-to-access-pointers-of-variables-or-arrays-work", "title": "How does * to access pointers of variables or arrays work?", "body": "<p>I'm having a lot of confusion regarding arrays and pointer in C; to demonstrate it, here are my interpretations of some bits of code.</p>\n\n<pre><code>int main(void){\n int x[10]; //allocates memory for the array x with dimension 10 in the main function\n for(int i=0;i&lt;10;i++){\n  x[i] = i; //for each index of x write the corresponding i number\n }\n readArray(x, 10); //calls the function readArray(), with 2 arguments, \n                   //the array x and its size, the constant 10\n}\n</code></pre>\n\n<p>Now the confusing part is in the function readArray(), which should be defined before the main function.</p>\n\n<pre><code>int readArray(int *y, int size){ //creates the function readArray() with\n                              //a pointer y to the array x (with the address of the \n                              //first element of x and its size\n for(int i=0;i&lt;size;i++){\n  //here is the problem, I want to change the values\n  //of the array x, but y is a pointer to x, therefore, to me, it should be as\n  *y[i] = i; //an * is used to access the array x and change its value\n  //the correct code, however is\n   y[i] = i // this is supposed to also change the value of x,\n            // but I thought to change the value we needed to use * as \n            // y is a pointer to x, therefore changing the values of x (because y is local to readArray())\n }\n}\n</code></pre>\n\n<p>I know * is used for pointers, but the array is also a pointer, so why isn't it used?\nPlease correct what I wrote in the comments and explain when and where * should be used to change the value of a value pointed by another.</p>\n"}, {"tags": ["c", "struct"], "comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 2, "creation_date": 1573644404, "post_id": 58835352, "comment_id": 103946862, "body": "Good luck to the poor sod that has to maintain this code. Better to write this out long hand - at least it is understandable and portable."}], "answers": [{"tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 1, "last_activity_date": 1573643143, "creation_date": 1573643143, "answer_id": 58835751, "question_id": 58835352, "link": "https://stackoverflow.com/questions/58835352/typecast-binary-to-struct/58835751#58835751", "title": "typecast binary to struct", "body": "<p>There is no portable way of typecasting one type to the data typed like structs.</p>\n\n<p>You can pune the type using pointers, structs or using memcpy but it is not portable and might break the strict aliasing rules:</p>\n\n<p>Example <a href=\"https://godbolt.org/z/bNH7Vc\" rel=\"nofollow noreferrer\">https://godbolt.org/z/bNH7Vc</a>:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n\n#include &lt;string.h&gt;\n\n\ntypedef struct {\n    uint8_t ui8:4;\n    uint8_t ui8v2:4;\n    uint8_t ui8v3;\n    uint8_t ui8v4;\n}L;\n\nint main(){\n    unsigned val = 0b000000010000000000000001;\n    L *myStructPtr = (L *)&amp;val;\n    L myStruct;\n\n    memcpy(&amp;myStruct, &amp;val, sizeof(myStruct));\n\n    printf(\"0x%02x \\n\", myStructPtr -&gt; ui8);\n    printf(\"0x%02x \\n\", myStructPtr -&gt; ui8v2);\n    printf(\"0x%02x \\n\", myStructPtr -&gt; ui8v3);\n    printf(\"0x%02x \\n----\\n\", myStructPtr -&gt; ui8v4);\n\n    printf(\"0x%02x \\n\", myStruct.ui8);\n    printf(\"0x%02x \\n\", myStruct.ui8v2);\n    printf(\"0x%02x \\n\", myStruct.ui8v3);\n    printf(\"0x%02x \\n\", myStruct.ui8v4);\n}\n</code></pre>\n"}], "owner": {"reputation": 3853, "user_id": 5139911, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/oW4zX.png?s=128&g=1", "display_name": "sanjihan", "link": "https://stackoverflow.com/users/5139911/sanjihan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1573643143, "creation_date": 1573641836, "question_id": 58835352, "link": "https://stackoverflow.com/questions/58835352/typecast-binary-to-struct", "title": "typecast binary to struct", "body": "<p>I've read about how structs are stored in memory and came up with an idea to typecast binary data directly to struct. I tried to typecast to normal struct type, but the compiler complained that typecast to only pointer types is valid (see first line of main). <strong>Why is that?</strong></p>\n\n<p>After that, I used a pointer to struct typecast which apparently succeeded. When I try to access the variables of struct, I get a silent erroneous exit code 11. <strong>What is the correct way to typecast binary to struct?</strong> Or any other type, such as array.. Is this concept possible in C?</p>\n\n<pre><code>typedef unsigned char UINT8;\nstruct L{\n    UINT8 ui8:4;\n    UINT8 ui8v2:4;\n    UINT8 ui8v3;\n    UINT8 ui8v4;\n};\ntypedef struct L L, *PL;\n\nint main(){\n    // L myStruct = (L)0b000000010000000000000001;  gives error =&gt; pointer type required\n    PL pMyStruct = (PL)0b000000010000000000000001; // compiles normally\n    printf(\"ui8: %d\", pMyStruct-&gt;ui8); // but returns error code 11 at runtime\n\n}\n</code></pre>\n"}, {"tags": ["c", "code-generation", "enterprise-architect"], "comments": [{"owner": {"reputation": 30989, "user_id": 3379653, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/f97JZ.png?s=128&g=1", "display_name": "qwerty_so", "link": "https://stackoverflow.com/users/3379653/qwerty-so"}, "edited": false, "score": 0, "creation_date": 1573668265, "post_id": 58835316, "comment_id": 103959995, "body": "I don&#39;t use that scrappy macro language but export such stuff with the API.  I don&#39;t think you can alter it except for digging in those macros. But their basics can&#39;t be changed."}], "answers": [{"comments": [{"owner": {"reputation": 10618, "user_id": 2018133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e3fd4734236360fc59fa597dc8f9ffa7?s=128&d=identicon&r=PG", "display_name": "Geert Bellekens", "link": "https://stackoverflow.com/users/2018133/geert-bellekens"}, "edited": false, "score": 0, "creation_date": 1573736113, "post_id": 58856719, "comment_id": 103985967, "body": "You can&#39;t make your own macros, or edit existing ones. These are hardcoded in EA."}], "tags": [], "owner": {"reputation": 53, "user_id": 12337075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72379d1a729b98223de00064df1d5256?s=128&d=identicon&r=PG&f=1", "display_name": "GiatManos", "link": "https://stackoverflow.com/users/12337075/giatmanos"}, "is_accepted": true, "score": 1, "last_activity_date": 1574324581, "last_edit_date": 1574324581, "creation_date": 1573734273, "answer_id": 58856719, "question_id": 58835316, "link": "https://stackoverflow.com/questions/58835316/is-there-a-way-to-modify-or-write-a-new-version-of-cstyle-comment-in-enterprise/58856719#58856719", "title": "Is there a way to modify or write a new version of CSTYLE_COMMENT in Enterprise Architect?", "body": "<p>I found a way of doing this but I am not sure it is the best and it does not work well with reverse engineering and synchronization of the model. I could not find how to write my own macro as there is literally no documentation anywhere I looked.</p>\n\n<p>This is how I did it:\nInstead of </p>\n\n<pre><code>%CSTYLE_COMMENT($wrapLen)%\n</code></pre>\n\n<p>I wrote</p>\n\n<pre><code>/***************************************\\n\n%WRAP_COMMENT(opNotes,$wrapLen, \"\", \"*\")%\n\\n***************************************/\n</code></pre>\n\n<p>It worked exactly as I intended it to.</p>\n\n<p><strong>EDIT:</strong> I found what was missing to be able to correctly reverse engineer this commenting format. In EA 14, I navigated to START->Preferences->Source Code Engineering and I unchecked the option \"Remove hard breaks from comments on import\". This made the reverse engineering work correctly and update comments in the Element Notes field without losing their layout.</p>\n"}], "owner": {"reputation": 53, "user_id": 12337075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72379d1a729b98223de00064df1d5256?s=128&d=identicon&r=PG&f=1", "display_name": "GiatManos", "link": "https://stackoverflow.com/users/12337075/giatmanos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 58856719, "answer_count": 1, "score": 1, "last_activity_date": 1574324581, "creation_date": 1573641724, "question_id": 58835316, "link": "https://stackoverflow.com/questions/58835316/is-there-a-way-to-modify-or-write-a-new-version-of-cstyle-comment-in-enterprise", "title": "Is there a way to modify or write a new version of CSTYLE_COMMENT in Enterprise Architect?", "body": "<p>I am trying to find a way of creating a custom function macro in Enterprise Architect to \"override\" the built-in <code>CSTYLE_COMMENT</code> macro with a custom version of it that creates comments differently to use for operation headers when generating code.</p>\n\n<p>EA's built-in <code>CSTYLE_COMMENT</code> generates comments like this:</p>\n\n<pre><code>/**\n* Name: OperationA\n* Inputs: int int\n* Outputs: -\n* Description: It doesn't do stuff\n*/\n</code></pre>\n\n<p>I want to create some custom template that generates comments like this:</p>\n\n<pre><code>/***********************************\n* Name: OperationA\n* Inputs: int int\n* Outputs: -\n* Description: It doesn't do stuff\n***********************************/\n</code></pre>\n\n<p>Is this possible? If so, how would I go about doing so? My efforts on finding any detailed guide on syntax online have been futile. Even though SparX systems has the exact search term that I looked for here:\n<a href=\"https://sparxsystems.com/enterprise_architect_user_guide/14.0/model_domains/codetemplatesyntax.html\" rel=\"nofollow noreferrer\">https://sparxsystems.com/enterprise_architect_user_guide/14.0/model_domains/codetemplatesyntax.html</a>\nthere is no useful information on how to do what I want.</p>\n"}, {"tags": ["c", "windows", "pipe"], "answers": [{"tags": [], "owner": {"reputation": 730, "user_id": 6009051, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/077b5fa5d4fce7acc4362c52fcd4de36?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Heinrich", "link": "https://stackoverflow.com/users/6009051/daniel-heinrich"}, "is_accepted": true, "score": 2, "last_activity_date": 1573641370, "creation_date": 1573641370, "answer_id": 58835204, "question_id": 58834830, "link": "https://stackoverflow.com/questions/58834830/how-can-my-pipe-client-wait-for-the-server/58835204#58835204", "title": "How can my pipe client wait for the server", "body": "<p>You could loop (and sleep) until CreateFile returns something different from ERROR_FILE_NOT_FOUND.</p>\n"}], "owner": {"reputation": 105, "user_id": 11609849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a097987ecbb2997fa21c0e44975147b?s=128&d=identicon&r=PG&f=1", "display_name": "Gunner", "link": "https://stackoverflow.com/users/11609849/gunner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 58835204, "answer_count": 1, "score": 0, "last_activity_date": 1573641370, "creation_date": 1573640190, "question_id": 58834830, "link": "https://stackoverflow.com/questions/58834830/how-can-my-pipe-client-wait-for-the-server", "title": "How can my pipe client wait for the server", "body": "<p>I am implementing a named pipe IPC scheme in C running on windows, which is mostly working.\nOn the client side I create the pipe like this</p>\n\n<pre><code>void CreatePipex(const LPCWSTR pipename, InteruptHandler interruptHandler, unsigned char *USARTData)\n{\n  while (1)\n   {\n      pipes [_pipeIndex].handle = CreateFile(\n         pipename,\n         GENERIC_READ |\n         GENERIC_WRITE,\n         0,\n         NULL,\n         OPEN_EXISTING,\n         0,\n         NULL);\n\n      // break if pipe was created\n      if (pipes[_pipeIndex].handle != INVALID_HANDLE_VALUE)\n      {\n         wprintf(L\"created pipe %s\\n\", pipename);\n         break;\n      }\n\n        if (GetLastError() == ERROR_FILE_NOT_FOUND)\n        {\n\n        }\n      // exit if pipe not created and not busy\n      if (GetLastError() != ERROR_PIPE_BUSY)\n      {\n          wchar_t buf[256];\n          FormatMessageW(FORMAT_MESSAGE_FROM_SYSTEM | FORMAT_MESSAGE_IGNORE_INSERTS,\n              NULL, GetLastError(), MAKELANGID(LANG_NEUTRAL, SUBLANG_DEFAULT),\n              buf, (sizeof(buf) / sizeof(wchar_t)), NULL);\n          wprintf(L\"Could not create %s : %s %d\\n\",pipename, buf,GetLastError());\n         //printf(\"could not create pipe %d\\n\", lastError);\n         exit(-1);\n      }\n      if (!WaitNamedPipe(pipename, 20000))\n      {\n         wprintf(L\"Could not open %s: 20 second wait timed out.\\n\",pipename);\n         exit(-1);\n      }\n\n   }\n\n   DWORD mode = PIPE_NOWAIT;\n   if (!SetNamedPipeHandleState(pipes[_pipeIndex].handle, &amp;mode, 0, 0))\n   {\n       wchar_t buf[256];\n       FormatMessageW(FORMAT_MESSAGE_FROM_SYSTEM | FORMAT_MESSAGE_IGNORE_INSERTS,\n           NULL, GetLastError(), MAKELANGID(LANG_NEUTRAL, SUBLANG_DEFAULT),\n           buf, (sizeof(buf) / sizeof(wchar_t)), NULL);\n       wprintf(L\"Could not set mode for %s : %s\\n\", pipename, buf);\n\n      exit(-1);\n   }\n</code></pre>\n\n<p>But if I run the client without the server the client pipe cannot be created</p>\n\n<pre><code>Could not create \\\\.\\pipe\\F0 : The system cannot find the file specified.\n</code></pre>\n\n<p>Is there a way of getting my client to wait for the server?</p>\n"}, {"tags": ["c", "winapi", "icons"], "comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 1, "creation_date": 1573642173, "post_id": 58834806, "comment_id": 103945684, "body": "You are only extracting icons. You want to set the icon. Look at <a href=\"https://docs.microsoft.com/en-us/windows/win32/shell/how-to-create-icon-handlers\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/windows/win32/shell/&hellip;</a>"}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1573671290, "post_id": 58834806, "comment_id": 103961312, "body": "The interface you want is <a href=\"https://docs.microsoft.com/en-us/windows/win32/api/shobjidl_core/nn-shobjidl_core-ishellitemimagefactory\" rel=\"nofollow noreferrer\">IShellItemImageFactory</a>."}, {"owner": {"reputation": 82917, "user_id": 3501, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/1fd5f5cc203c393634379a3b3b7e7a87?s=128&d=identicon&r=PG", "display_name": "Anders", "link": "https://stackoverflow.com/users/3501/anders"}, "edited": false, "score": 0, "creation_date": 1573692932, "post_id": 58834806, "comment_id": 103969116, "body": "GIL_SIMULATEDOC is for files, not folders."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11883749, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0T2rIAaVRsE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcZDelajkwPuPzIAOsyOcPJnRoc4w/photo.jpg?sz=128", "display_name": "wei qian", "link": "https://stackoverflow.com/users/11883749/wei-qian"}, "edited": false, "score": 0, "creation_date": 1573694617, "post_id": 58847927, "comment_id": 103969474, "body": "Thanks\uff0cI think this should be the effect I want."}], "tags": [], "owner": {"reputation": 8787, "user_id": 6601582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd0a2f69702729da5aaa628bc58811a7?s=128&d=identicon&r=PG&f=1", "display_name": "Rita Han", "link": "https://stackoverflow.com/users/6601582/rita-han"}, "is_accepted": true, "score": 0, "last_activity_date": 1573693861, "last_edit_date": 1573693861, "creation_date": 1573693536, "answer_id": 58847927, "question_id": 58834806, "link": "https://stackoverflow.com/questions/58834806/how-to-get-a-folder-icon-with-a-preview/58847927#58847927", "title": "How to get a Folder icon with a preview?", "body": "<p>Here is an official sample for this purpose you can use or refer to: \"<a href=\"https://github.com/microsoft/Windows-classic-samples/tree/1d363ff4bd17d8e20415b92e2ee989d615cc0d91/Samples/Win7Samples/winui/shell/appplatform/UsingImageFactory\" rel=\"nofollow noreferrer\">Image Factory API Sample</a>\". It demonstrates how to use the IShellItemImageFactory interface to get the best possible image for an item.</p>\n\n<p>And make sure your folder looks exactly what you expected in File explorer.</p>\n\n<p>This is my target folder:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Zho1k.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Zho1k.png\" alt=\"enter image description here\"></a></p>\n\n<p>This is what I get using the sample:</p>\n\n<p><a href=\"https://i.stack.imgur.com/k1VeN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/k1VeN.png\" alt=\"enter image description here\"></a></p>\n\n<p>The core related code lines:</p>\n\n<pre><code>        HRESULT hr = CoInitializeEx(NULL, COINIT_APARTMENTTHREADED | COINIT_DISABLE_OLE1DDE);\n        if (SUCCEEDED(hr))\n        {\n            // Getting the IShellItemImageFactory interface pointer for the file.\n            IShellItemImageFactory *pImageFactory;\n            hr = SHCreateItemFromParsingName(argv[2], NULL, IID_PPV_ARGS(&amp;pImageFactory));\n            if (SUCCEEDED(hr))\n            {\n                SIZE size = { nSize, nSize };\n\n                //sz - Size of the image, SIIGBF_BIGGERSIZEOK - GetImage will stretch down the bitmap (preserving aspect ratio)\n                HBITMAP hbmp;\n                hr = pImageFactory-&gt;GetImage(size, SIIGBF_BIGGERSIZEOK, &amp;hbmp);\n                if (SUCCEEDED(hr))\n                {\n                    DialogBoxParamW(NULL, MAKEINTRESOURCEW(IDD_DIALOG1), NULL, DialogProc, (LPARAM)hbmp);\n                    DeleteObject(hbmp);\n                }\n                else\n                {\n                    pwszError = L\"IShellItemImageFactory::GetImage failed with error code %x\";\n                }\n\n                pImageFactory-&gt;Release();\n            }\n            else\n            {\n                pwszError = L\"SHCreateItemFromParsingName failed with error %x\";\n            }\n\n            CoUninitialize();\n        }\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11883749, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0T2rIAaVRsE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcZDelajkwPuPzIAOsyOcPJnRoc4w/photo.jpg?sz=128", "display_name": "wei qian", "link": "https://stackoverflow.com/users/11883749/wei-qian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 58847927, "answer_count": 1, "score": 0, "last_activity_date": 1573693861, "creation_date": 1573640114, "last_edit_date": 1573640789, "question_id": 58834806, "link": "https://stackoverflow.com/questions/58834806/how-to-get-a-folder-icon-with-a-preview", "title": "How to get a Folder icon with a preview?", "body": "<p>I wanted to get a folder icon to look like this</p>\n\n<p><img src=\"https://i.stack.imgur.com/IXX7A.png\" alt=\"like this\"></p>\n\n<p>But I actually got it to look like this</p>\n\n<p><img src=\"https://i.stack.imgur.com/124dG.png\" alt=\"like this\">.</p>\n\n<p>My implementation\uff1a</p>\n\n<pre><code>HICON GetSystemIcon(IShellFolder* folder, PCIDLIST_ABSOLUTE idpl) {\n  IExtractIcon* extract_icon;\n  folder-&gt;GetUIObjectOf(NULL, 1, &amp;idpl, IID_IExtractIcon, NULL, (void**)&amp;extract_icon);\n  wchar_t icon_file[MAX_PATH] = {0};\n  int icon_index = 0;\n  UINT flag = GIL_SIMULATEDOC;\n  extract_icon-&gt;GetIconLocation(GIL_FORSHELL, icon_file, MAX_PATH, &amp;icon_index, &amp;flag);\n  HICON small_icon = NULL;\n  HICON large_icon = NULL;\n  UINT size = MAKELONG(32, 32);\n  extract_icon-&gt;Extract(icon_file, icon_index, &amp;large_icon, &amp;small_icon, size);\n}\n</code></pre>\n\n<p>How should I change it?</p>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1573640165, "post_id": 58834695, "comment_id": 103944583, "body": "The compiler generates a warning for the fourth <code>printf</code> &quot;C4477: &#39;printf&#39; : format string &#39;%d&#39; requires an argument of type &#39;int&#39;, but variadic argument 1 has type &#39;int *&#39; &quot;"}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1573640176, "post_id": 58834695, "comment_id": 103944589, "body": "You can change the last print to <code>printf(&quot;%d\\n&quot;, *((int*)ar + rowIndex * colsCount + colIndex));</code>"}, {"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 0, "creation_date": 1573640179, "post_id": 58834695, "comment_id": 103944592, "body": "Also relevant : <a href=\"https://stackoverflow.com/questions/33035068/difference-between-array-and-array0\">Difference between array and &amp;array&#91;0&#93;</a>."}, {"owner": {"reputation": 2246, "user_id": 5108631, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/Bm0c3.jpg?s=128&g=1", "display_name": "Youssef13", "link": "https://stackoverflow.com/users/5108631/youssef13"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1573640347, "post_id": 58834695, "comment_id": 103944693, "body": "@WeatherVane, I&#39;m working on codeblocks with GNU GCC and I have 0 warnings in it. Not sure what compiler/IDE are you using. Also an explanation is preferred."}, {"owner": {"reputation": 2246, "user_id": 5108631, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/Bm0c3.jpg?s=128&g=1", "display_name": "Youssef13", "link": "https://stackoverflow.com/users/5108631/youssef13"}, "reply_to_user": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1573640378, "post_id": 58834695, "comment_id": 103944709, "body": "@klutt, thanks for the fix. but in case of saying just ar, what is the type of the pointer if it&#39;s not <code>int *</code> ?"}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1573640576, "post_id": 58834695, "comment_id": 103944803, "body": "<code>ar</code> is not a pointer. It&#39;s an array."}, {"owner": {"reputation": 2246, "user_id": 5108631, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/Bm0c3.jpg?s=128&g=1", "display_name": "Youssef13", "link": "https://stackoverflow.com/users/5108631/youssef13"}, "reply_to_user": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 0, "creation_date": 1573640581, "post_id": 58834695, "comment_id": 103944806, "body": "@SanderDeDycker, I don&#39;t think the linked question answers mine."}, {"owner": {"reputation": 2246, "user_id": 5108631, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/Bm0c3.jpg?s=128&g=1", "display_name": "Youssef13", "link": "https://stackoverflow.com/users/5108631/youssef13"}, "reply_to_user": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1573640615, "post_id": 58834695, "comment_id": 103944819, "body": "@klutt, don&#39;t arrays decay to pointers ?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1573640698, "post_id": 58834695, "comment_id": 103944867, "body": "MSVC compiled from a command line, no IDE. There should be a setting for you somewhere, or an option. The <code>ar</code> is a different type from <code>&amp;ar[0][0]</code>, and so the pointer arithmetic works differently. <code>sizeof ar</code> is <code>48</code> so <code>ar + 1</code> would add <code>48</code> to the address."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1573640735, "post_id": 58834695, "comment_id": 103944888, "body": "@Youssef13 Yes, they sometimes do."}, {"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 0, "creation_date": 1573640879, "post_id": 58834695, "comment_id": 103944972, "body": "@Youssef13 : the answers to the linked question explain that while the memory address is the same, the type is different for both expressions. This in turn means that <code>sizeof</code> and pointer arithmetic will work differently for them. That should answer your question of why they&#39;re not interchangeable - if it doesn&#39;t, you might want to clarify your question."}, {"owner": {"reputation": 2246, "user_id": 5108631, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/Bm0c3.jpg?s=128&g=1", "display_name": "Youssef13", "link": "https://stackoverflow.com/users/5108631/youssef13"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1573641209, "post_id": 58834695, "comment_id": 103945148, "body": "@WeatherVane, I printed <code>ar</code> and <code>ar + 1</code>, the difference was 12 only not 48. so it seems adding 1 jumps to the next row instead of the next element. Am I right ?"}, {"owner": {"reputation": 2246, "user_id": 5108631, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/Bm0c3.jpg?s=128&g=1", "display_name": "Youssef13", "link": "https://stackoverflow.com/users/5108631/youssef13"}, "reply_to_user": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 0, "creation_date": 1573641383, "post_id": 58834695, "comment_id": 103945229, "body": "@SanderDeDycker, Thanks for clarification. I understood that arithmetic is different now. but is what I&#39;m saying in the previous comment correct ?"}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1573641529, "post_id": 58834695, "comment_id": 103945323, "body": "@Youssef13 In this case, it decays to a pointer of type <code>int (*)[3]</code>."}, {"owner": {"reputation": 2246, "user_id": 5108631, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/Bm0c3.jpg?s=128&g=1", "display_name": "Youssef13", "link": "https://stackoverflow.com/users/5108631/youssef13"}, "reply_to_user": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1573641952, "post_id": 58834695, "comment_id": 103945566, "body": "@klutt, Thanks! this really clarified much of the thing to me. so that clarifies why even *(ar + 1) doesn&#39;t print the element at ar[1][0]"}, {"owner": {"reputation": 2246, "user_id": 5108631, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/Bm0c3.jpg?s=128&g=1", "display_name": "Youssef13", "link": "https://stackoverflow.com/users/5108631/youssef13"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1573641957, "post_id": 58834695, "comment_id": 103945572, "body": "It also clarifies the warning stated by @WeatherVane."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1573643675, "post_id": 58834695, "comment_id": 103946515, "body": "@Youssef13 What it clarifies is why you ALWAYS should enable warnings when the code is not behaving the way you want."}, {"owner": {"reputation": 2246, "user_id": 5108631, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/Bm0c3.jpg?s=128&g=1", "display_name": "Youssef13", "link": "https://stackoverflow.com/users/5108631/youssef13"}, "reply_to_user": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1573643816, "post_id": 58834695, "comment_id": 103946584, "body": "@klutt, I&#39;ve left codeblocks with its default settings. and I sometimes get warnings, but not sure why not all warnings. is there a specific compiler flag I should enable ?"}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1573643964, "post_id": 58834695, "comment_id": 103946668, "body": "<code>-Wall -Wextra</code> is a good start. You could also add <code>-pedantic</code>. It can also be a good thing to specify your desired C version (usually a modern one unless you have reasons to do otherwise) with <code>-std=c18</code>"}, {"owner": {"reputation": 2246, "user_id": 5108631, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/Bm0c3.jpg?s=128&g=1", "display_name": "Youssef13", "link": "https://stackoverflow.com/users/5108631/youssef13"}, "reply_to_user": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1573644143, "post_id": 58834695, "comment_id": 103946746, "body": "@klutt, They were disabled, but even after enabling them I still don&#39;t get warnings for it."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1573644348, "post_id": 58834695, "comment_id": 103946829, "body": "@Youssef13 Then it&#39;s a bug or you&#39;re doing something wrong. That&#39;s something you could post a question about. :)"}], "owner": {"reputation": 2246, "user_id": 5108631, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/Bm0c3.jpg?s=128&g=1", "display_name": "Youssef13", "link": "https://stackoverflow.com/users/5108631/youssef13"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 1, "closed_date": 1573640095, "answer_count": 0, "score": 2, "last_activity_date": 1573639763, "creation_date": 1573639763, "question_id": 58834695, "link": "https://stackoverflow.com/questions/58834695/difference-between-ar00-and-ar", "closed_reason": "Duplicate", "title": "Difference between &amp;ar[0][0] and ar", "body": "<p>When I print <code>ar</code> and <code>&amp;ar[0][0]</code> as pointers, I see the same value.\nso I'm expecting them to be interchangeable, However, that is not the case:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Mj8rg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Mj8rg.png\" alt=\"enter image description here\"></a></p>\n\n<pre class=\"lang-c prettyprint-override\"><code>int main(void)\n{\n    #define rowsCount 4\n    #define colsCount 3\n    int ar[rowsCount][colsCount] =\n    {\n        {0, 1, 2},\n        {3, 4, 5},\n        {6, 7, 8},\n        {9, 10, 11},\n    };\n    int rowIndex = 1;\n    int colIndex = 5;\n\n\n    printf(\"TEST: %p %p\\n\", ar, &amp;ar[0][0]);\n    printf(\"%d\\n\", ar[rowIndex][colIndex]);\n    printf(\"%d\\n\", *(&amp;ar[0][0] + rowIndex * colsCount + colIndex));\n    printf(\"%d\\n\", *(ar + rowIndex * colsCount + colIndex));\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "signals", "sleep"], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 12101637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45fcced12cca6cfdcdd11b93c1211eb6?s=128&d=identicon&r=PG&f=1", "display_name": "joif doi", "link": "https://stackoverflow.com/users/12101637/joif-doi"}, "edited": false, "score": 0, "creation_date": 1573639200, "post_id": 58834251, "comment_id": 103944074, "body": "How can I know if <code>sigtimedwait</code> finish because timeout or because signal arrived ?"}, {"owner": {"reputation": 141, "user_id": 12101637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45fcced12cca6cfdcdd11b93c1211eb6?s=128&d=identicon&r=PG&f=1", "display_name": "joif doi", "link": "https://stackoverflow.com/users/12101637/joif-doi"}, "edited": false, "score": 0, "creation_date": 1573639481, "post_id": 58834251, "comment_id": 103944235, "body": "errno will be EAGAIN  and <code>sigtimedwait</code> will return -1 ?"}, {"owner": {"reputation": 1145, "user_id": 11783812, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LFwV3.jpg?s=128&g=1", "display_name": "cocool97", "link": "https://stackoverflow.com/users/11783812/cocool97"}, "reply_to_user": {"reputation": 141, "user_id": 12101637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45fcced12cca6cfdcdd11b93c1211eb6?s=128&d=identicon&r=PG&f=1", "display_name": "joif doi", "link": "https://stackoverflow.com/users/12101637/joif-doi"}, "edited": false, "score": 0, "creation_date": 1573639557, "post_id": 58834251, "comment_id": 103944279, "body": "You have to check the value of errno after the terminaison of the function."}], "tags": [], "owner": {"reputation": 1145, "user_id": 11783812, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LFwV3.jpg?s=128&g=1", "display_name": "cocool97", "link": "https://stackoverflow.com/users/11783812/cocool97"}, "is_accepted": false, "score": 2, "last_activity_date": 1573639409, "last_edit_date": 1573639409, "creation_date": 1573638439, "answer_id": 58834251, "question_id": 58834185, "link": "https://stackoverflow.com/questions/58834185/c-wait-for-time-or-signal-with-sigwait/58834251#58834251", "title": "C wait for time or signal with sigwait", "body": "<p>You can use the <code>sigtimedwait()</code> function, which returns after a timeout given as a parameter. <br/>\nHere is the documentation : <a href=\"http://www2.phys.canterbury.ac.nz/dept/docs/manuals/unix/DEC_4.0e_Docs/HTML/MAN/MAN3/1795____.HTM\" rel=\"nofollow noreferrer\">http://www2.phys.canterbury.ac.nz/dept/docs/manuals/unix/DEC_4.0e_Docs/HTML/MAN/MAN3/1795____.HTM</a></p>\n\n<p>By reading the documentation, you can see that the return value of this function identifies what is the cause : <br/></p>\n\n<pre><code>ERRORS\n\n  If the sigwait functions fail, errno is set to one of the following values:\n\n  [EINVAL]   The value of the set parameter contains an invalid or\n         unsupported signal number.\n\n  [EINVAL]   The timeout argument specified a tv_nsec value that is less\n         than 0 or greater than or equal to 1,000,000,000.\n\n  [EINTR]    The wait was interrupted by an unblocked, caught signal.\n\n  [EAGAIN]   No signal specified by set was delivered within the\n         specified timeout period.\n</code></pre>\n\n<p>You may want to check if the value is <code>EAGAIN</code> or <code>EINTR</code></p>\n"}], "owner": {"reputation": 141, "user_id": 12101637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45fcced12cca6cfdcdd11b93c1211eb6?s=128&d=identicon&r=PG&f=1", "display_name": "joif doi", "link": "https://stackoverflow.com/users/12101637/joif-doi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573639409, "creation_date": 1573638217, "question_id": 58834185, "link": "https://stackoverflow.com/questions/58834185/c-wait-for-time-or-signal-with-sigwait", "title": "C wait for time or signal with sigwait", "body": "<p>I want to wait X secondes or when signal arrived.</p>\n\n<p>I can use <code>sigwait</code> but that only listen for signal , without timeout.</p>\n\n<p>What is the right way do to that?</p>\n"}, {"tags": ["c", "gcc", "inline-assembly", "esp-idf"], "comments": [{"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 2, "creation_date": 1573638706, "post_id": 58834175, "comment_id": 103943805, "body": "<a href=\"https://gcc.gnu.org/onlinedocs/gcc/Asm-Labels.html#Asm-Labels\" rel=\"nofollow noreferrer\">gcc.gnu.org/onlinedocs/gcc/Asm-Labels.html#Asm-Labels</a>"}], "answers": [{"comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1573658733, "post_id": 58834353, "comment_id": 103954748, "body": "Yes, this is GNU C syntax to set the asm symbol name for a variable, e.g. to hard-code the leading <code>_</code>.  <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Asm-Labels.html\" rel=\"nofollow noreferrer\">gcc.gnu.org/onlinedocs/gcc/Asm-Labels.html</a>"}], "tags": [], "owner": {"reputation": 564, "user_id": 5199255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/seJ5j.jpg?s=128&g=1", "display_name": "Damiano", "link": "https://stackoverflow.com/users/5199255/damiano"}, "is_accepted": false, "score": 1, "last_activity_date": 1573638726, "creation_date": 1573638726, "answer_id": 58834353, "question_id": 58834175, "link": "https://stackoverflow.com/questions/58834175/c-array-declaration-with-inline-assembly/58834353#58834353", "title": "C array declaration with inline assembly", "body": "<p>This is compiler dependend. However my guess is that this code declare an array named server_root_cert_pem_start and binds it to another symbol (memory location) _binary_server_root_cert_pem_start probably defined elsewhere (in an assembly file?)</p>\n"}], "owner": {"reputation": 3684, "user_id": 4224575, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Nvq43.gif?s=128&g=1", "display_name": "Lorah Attkins", "link": "https://stackoverflow.com/users/4224575/lorah-attkins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573658675, "creation_date": 1573638200, "last_edit_date": 1573658675, "question_id": 58834175, "link": "https://stackoverflow.com/questions/58834175/c-array-declaration-with-inline-assembly", "title": "C array declaration with inline assembly", "body": "<p>I recently came upon this snippet: </p>\n\n<pre><code>extern const uint8_t server_root_cert_pem_start[] asm(\"_binary_server_root_cert_pem_start\");\n//                                                ^^^^^^^^^^^^^ what's going on here?\n</code></pre>\n\n<p>in the <a href=\"https://github.com/espressif/esp-idf/blob/master/examples/protocols/https_mbedtls/main/https_mbedtls_example_main.c\" rel=\"nofollow noreferrer\">esp-idf examples</a>(line 74). I cannot understand the declaration, and my online search hasn't been successful. My best guess would be that this code: </p>\n\n<ul>\n<li><p>Uses <code>uint8_t</code> as a replacement for <code>char</code> since they have the same size (1 byte). No clue why though</p></li>\n<li><p>Ultimately declares a string (a <code>const char</code> array) <s>by inferring the array size from the string length</s> whose length has been specified outside our module</p></li>\n</ul>\n\n<p>Even if my assumptions are correct, I fail to understand <strong>why</strong> it's written this way or what happens with \"null termination\" in this case. So the actual questions:</p>\n\n<ul>\n<li>What is this code doing?</li>\n<li>Why is it doing it this way (advantages)?</li>\n<li>Are there any implications that differentiate it from a simple C-style declaration? </li>\n</ul>\n"}, {"tags": ["c", "pointers", "pointer-arithmetic"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1573637643, "post_id": 58833982, "comment_id": 103943216, "body": "Two issues: When you print <code>ptr</code> is no longer pointing to the original location; And <code>char</code> strings in C are really called <b><i>null-terminated</b> byte strings</i>. This null-terminator is incredibly important for all string handling (including using <code>printf</code> with the <code>%s</code> format) to know where the string ends."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1573637815, "post_id": 58833982, "comment_id": 103943304, "body": "Don&#39;t increment the original pointer. Have a temporary pointer point at <code>ptr</code> right after malloc, then do all arithmetic on the temporary pointer."}], "answers": [{"tags": [], "owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "is_accepted": true, "score": 5, "last_activity_date": 1573637695, "creation_date": 1573637695, "answer_id": 58834027, "question_id": 58833982, "link": "https://stackoverflow.com/questions/58833982/printing-entered-string-using-pointer-manipulation/58834027#58834027", "title": "Printing entered string using pointer manipulation", "body": "<p>You forgot the null-terminator. Add this:</p>\n\n<pre><code>ptr++;\n*ptr = '\\0';\n</code></pre>\n\n<p>Also, the pointer is now pointing to the null-terminator (or previously the newline character). You have to set it back to point to the <code>'h'</code> again:</p>\n\n<pre><code>ptr -= 6;\n</code></pre>\n\n<p>And when you're done, you should free the memory:</p>\n\n<pre><code>free(ptr);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 35, "user_id": 12364725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f801931902cedfea473c89488e1e551c?s=128&d=identicon&r=PG&f=1", "display_name": "TiyaDSoftwareDeveloper", "link": "https://stackoverflow.com/users/12364725/tiyadsoftwaredeveloper"}, "edited": false, "score": 2, "creation_date": 1573638599, "post_id": 58834126, "comment_id": 103943735, "body": "calloc() will increase unnecessary call for initializing ptr with &#39;0&#39;."}, {"owner": {"reputation": 1145, "user_id": 11783812, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LFwV3.jpg?s=128&g=1", "display_name": "cocool97", "link": "https://stackoverflow.com/users/11783812/cocool97"}, "reply_to_user": {"reputation": 35, "user_id": 12364725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f801931902cedfea473c89488e1e551c?s=128&d=identicon&r=PG&f=1", "display_name": "TiyaDSoftwareDeveloper", "link": "https://stackoverflow.com/users/12364725/tiyadsoftwaredeveloper"}, "edited": false, "score": 1, "creation_date": 1573638649, "post_id": 58834126, "comment_id": 103943767, "body": "True, but it avoids problems with non-null terminated strings."}, {"owner": {"reputation": 1145, "user_id": 11783812, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LFwV3.jpg?s=128&g=1", "display_name": "cocool97", "link": "https://stackoverflow.com/users/11783812/cocool97"}, "reply_to_user": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 1, "creation_date": 1573638917, "post_id": 58834126, "comment_id": 103943927, "body": "@kiranBiradar Definitely true yes ! But in that case author missed this &#39;\\0&#39;..."}], "tags": [], "owner": {"reputation": 1145, "user_id": 11783812, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LFwV3.jpg?s=128&g=1", "display_name": "cocool97", "link": "https://stackoverflow.com/users/11783812/cocool97"}, "is_accepted": false, "score": 0, "last_activity_date": 1573717368, "last_edit_date": 1573717368, "creation_date": 1573638044, "answer_id": 58834126, "question_id": 58833982, "link": "https://stackoverflow.com/questions/58833982/printing-entered-string-using-pointer-manipulation/58834126#58834126", "title": "Printing entered string using pointer manipulation", "body": "<p>You can, rather using the <code>malloc()</code> function, use the <code>calloc()</code> function, which achieves the same goal of <code>malloc()</code>, but fills the memory with '\\0'. This makes it easier to play with non-fixed length strings. <br/>\nYou can find the documentation of this function  <a href=\"https://fr.cppreference.com/w/c/memory/calloc\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>Here is the code I've made : <br/></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n  char *ptr;\n  ptr = calloc(32,sizeof(char));\n  *ptr = 'h';\n  ptr++;\n  *ptr = 'e';\n  ptr++; \n  *ptr = 'l';\n  ptr++;\n  *ptr = 'l';\n  ptr++;\n  *ptr = 'o';\n  ptr++;\n  *ptr = '\\0';  //It should be null terminated\n\n  ptr -= 5;\n  printf(\"value entered is %s\\n\", ptr);\n\n  free(ptr);\n\n  return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 35, "user_id": 12364725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f801931902cedfea473c89488e1e551c?s=128&d=identicon&r=PG&f=1", "display_name": "TiyaDSoftwareDeveloper", "link": "https://stackoverflow.com/users/12364725/tiyadsoftwaredeveloper"}, "edited": false, "score": 0, "creation_date": 1573644403, "post_id": 58834475, "comment_id": 103946859, "body": "@TiyaDSoftwareDeveloper What do you mean?"}, {"owner": {"reputation": 35, "user_id": 12364725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f801931902cedfea473c89488e1e551c?s=128&d=identicon&r=PG&f=1", "display_name": "TiyaDSoftwareDeveloper", "link": "https://stackoverflow.com/users/12364725/tiyadsoftwaredeveloper"}, "edited": false, "score": 1, "creation_date": 1573644781, "post_id": 58834475, "comment_id": 103947045, "body": "before free() add ptr = NULL; For making sure pointer is not containing any data, which can be junk in future."}, {"owner": {"reputation": 35, "user_id": 12364725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f801931902cedfea473c89488e1e551c?s=128&d=identicon&r=PG&f=1", "display_name": "TiyaDSoftwareDeveloper", "link": "https://stackoverflow.com/users/12364725/tiyadsoftwaredeveloper"}, "edited": false, "score": 1, "creation_date": 1573645132, "post_id": 58834475, "comment_id": 103947201, "body": "setting a pointer after free? Sorry but that will throw invalid pointer error, as the memory you have u freed and trying to make pointer null. Please correct me if I m wrong"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 35, "user_id": 12364725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f801931902cedfea473c89488e1e551c?s=128&d=identicon&r=PG&f=1", "display_name": "TiyaDSoftwareDeveloper", "link": "https://stackoverflow.com/users/12364725/tiyadsoftwaredeveloper"}, "edited": false, "score": 0, "creation_date": 1573645398, "post_id": 58834475, "comment_id": 103947307, "body": "@TiyaDSoftwareDeveloper Yeah, either I don&#39;t understand you or everything you say is wrong. To begin with, the pointer itself is not stored on the heap..."}, {"owner": {"reputation": 35, "user_id": 12364725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f801931902cedfea473c89488e1e551c?s=128&d=identicon&r=PG&f=1", "display_name": "TiyaDSoftwareDeveloper", "link": "https://stackoverflow.com/users/12364725/tiyadsoftwaredeveloper"}, "edited": false, "score": 1, "creation_date": 1573645786, "post_id": 58834475, "comment_id": 103947506, "body": "True,  pointer itself is not stored on the heap. So, once you freed, no sense of making it NULL(ptr = NULL), its now beyond your scope."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 35, "user_id": 12364725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f801931902cedfea473c89488e1e551c?s=128&d=identicon&r=PG&f=1", "display_name": "TiyaDSoftwareDeveloper", "link": "https://stackoverflow.com/users/12364725/tiyadsoftwaredeveloper"}, "edited": false, "score": 1, "creation_date": 1573646604, "post_id": 58834475, "comment_id": 103947914, "body": "@TiyaDSoftwareDeveloper It&#39;s very common practice to set pointers to NULL after freeing them, to allow allocation functions like <code>free(ptr); ptr = malloc(...)</code> that free() up old data and can be called at any point, regardless of whether the pointer is pointing to allocated memory or not. This is taking advantage of <code>free(NULL)</code> being a no-op. Anyway, this isn&#39;t the place for this discussion."}, {"owner": {"reputation": 35, "user_id": 12364725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f801931902cedfea473c89488e1e551c?s=128&d=identicon&r=PG&f=1", "display_name": "TiyaDSoftwareDeveloper", "link": "https://stackoverflow.com/users/12364725/tiyadsoftwaredeveloper"}, "edited": false, "score": 0, "creation_date": 1573713708, "post_id": 58834475, "comment_id": 103974225, "body": "thanks for correcting me. Will remember this in future"}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 4, "last_activity_date": 1573639102, "creation_date": 1573639102, "answer_id": 58834475, "question_id": 58833982, "link": "https://stackoverflow.com/questions/58833982/printing-entered-string-using-pointer-manipulation/58834475#58834475", "title": "Printing entered string using pointer manipulation", "body": "<p>You should fix your code like this, with a temporary pointer:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main (void)\n{\n  char* ptr;\n  ptr = malloc(32 * sizeof(char));\n  if(ptr == NULL)\n  {\n    puts(\"Allocation failed\");\n    return EXIT_FAILURE;\n  }\n\n  char* tmp = ptr;\n\n  *tmp = 'h';\n  tmp++;\n  *tmp = 'e';\n  tmp++; \n  *tmp = 'l';\n  tmp++;\n  *tmp = 'l';\n  tmp++;\n  *tmp = 'o';\n  tmp++;\n  *tmp = '\\0'; // NOTE: null termination not \\n\n\n  printf(\"value entered is %s\\n\", ptr);\n  free(ptr);    \n\n  return 0;\n}\n</code></pre>\n\n<p>A proper version without messy pointer arithmetic looks like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main (void)\n{\n  char* ptr;\n  ptr = malloc(32 * sizeof(char));\n  if(ptr == NULL)\n  {\n    puts(\"Allocation failed\");\n    return EXIT_FAILURE;\n  }\n\n  strcpy(ptr, \"hello\");\n  printf(\"value entered is %s\\n\", ptr);\n  free(ptr);\n\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 12364725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f801931902cedfea473c89488e1e551c?s=128&d=identicon&r=PG&f=1", "display_name": "TiyaDSoftwareDeveloper", "link": "https://stackoverflow.com/users/12364725/tiyadsoftwaredeveloper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 58834027, "answer_count": 3, "score": 2, "last_activity_date": 1573801937, "creation_date": 1573637513, "last_edit_date": 1573801937, "question_id": 58833982, "link": "https://stackoverflow.com/questions/58833982/printing-entered-string-using-pointer-manipulation", "title": "Printing entered string using pointer manipulation", "body": "<p>I am new to pointers, please let me know how can i print the entered character.</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n    #include &lt;stdlib.h&gt;\n\n   int main()\n   {\n      char *ptr;\n      ptr = malloc(32 * sizeof(char));\n      *ptr = 'h';\n      ptr++;\n      *ptr = 'e';\n      ptr++; \n      *ptr = 'l';\n      ptr++;\n      *ptr = 'l';\n      ptr++;\n      *ptr = 'o';\n      ptr++;\n      *ptr = '\\n';\n\n      printf(\"value entered is %s\\n\", ptr);\n\n      return 0;\n    }\n</code></pre>\n\n<p>I want to print hello</p>\n"}, {"tags": ["c", "opengl", "opengl-compat"], "comments": [{"owner": {"reputation": 1180, "user_id": 1763382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/gCf2f.png?s=128&g=1", "display_name": "auburg", "link": "https://stackoverflow.com/users/1763382/auburg"}, "edited": false, "score": 2, "creation_date": 1573636824, "post_id": 58833728, "comment_id": 103942793, "body": "Welcome to SO - please post your code"}, {"owner": {"reputation": 1861, "user_id": 571227, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/oFDE2.png?s=128&g=1", "display_name": "haxpor", "link": "https://stackoverflow.com/users/571227/haxpor"}, "edited": false, "score": 0, "creation_date": 1573649926, "post_id": 58833728, "comment_id": 103949606, "body": "It&#39;s more the question of c for how to pass variable into function which doesn&#39;t accept any parameter. In this case for glut, I didn&#39;t see other cleaner possibility rather than define your input matrix as global variable as <code>static int a[2][2]</code> (I stick to <code>int</code> type as per your code, but I believe you mean <code>float</code> and it might be 3x3 or 4x4 matrix for <code>GL_MODELVIEW</code> matrix). Before rendering you can normally accept input for your <code>a</code> matrix, then inside <code>display()</code> you just refer variable <code>a</code> normally."}], "answers": [{"tags": [], "owner": {"reputation": 195, "user_id": 9927425, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-th4EvU1tNNA/AAAAAAAAAAI/AAAAAAAAAec/_5nsC1ycISs/photo.jpg?sz=128", "display_name": "ismail ak\u0131n &#231;elik", "link": "https://stackoverflow.com/users/9927425/ismail-ak%c4%b1n-%c3%a7elik"}, "is_accepted": false, "score": 1, "last_activity_date": 1573643580, "creation_date": 1573643580, "answer_id": 58835872, "question_id": 58833728, "link": "https://stackoverflow.com/questions/58833728/displaying-in-opengl-based-on-a-matrix/58835872#58835872", "title": "Displaying in openGL based on a matrix", "body": "<pre><code>void display(void)\n{\n    glClear(GL_COLOR_BUFFER_BIT);\n\n    //-----------\n    float a[4][4] = {\n        1,0,0,0,\n        0,1,0,0,\n        0,0,1,0,\n        0,0,0,1 };\n\n    glMatrixMode(GL_MODELVIEW);\n    glLoadIdentity();\n    glLoadMatrixf((float*)a);\n    //----------\n\n    glBegin(GL_POINTS);\n    float x, y, i;\n    for (i = 0; i &lt; (2 * pi); i += 0.001)\n    {\n        x = 200 * cos(i);\n        y = 200 * sin(i);\n\n        glVertex2i(x, y);\n    }\n    glEnd();\n    glFlush();\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 138000, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": false, "score": 1, "last_activity_date": 1573660123, "last_edit_date": 1573660123, "creation_date": 1573652608, "answer_id": 58838494, "question_id": 58833728, "link": "https://stackoverflow.com/questions/58833728/displaying-in-opengl-based-on-a-matrix/58838494#58838494", "title": "Displaying in openGL based on a matrix", "body": "<p>In general you can load the current model view matrix, by setting the <code>GL_MODELVIEW</code> matrix mode (<a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl2.1/xhtml/glMatrixMode.xml\" rel=\"nofollow noreferrer\"><code>glMatrixMode</code></a>), and loading the matrix by <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl2.1/xhtml/glLoadMatrix.xml\" rel=\"nofollow noreferrer\"><code>glLoadMatrixf</code></a>.<br>\nOptionally the matrix can be multiplied to the current matrix by <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl2.1/xhtml/glMultMatrix.xml\" rel=\"nofollow noreferrer\"><code>glMultMatrix</code></a>.</p>\n\n<p>But in both cases, the matrix has to be 4x4 <a href=\"https://en.wikipedia.org/wiki/Transformation_matrix\" rel=\"nofollow noreferrer\">Transformation matrix</a>. The parameter to both functions is a pointer to an array of 16 <code>float</code>s respectively an 2 dimensional 4x4 <code>float</code>-array.<br>\nInit a 4x4 <a href=\"https://en.wikipedia.org/wiki/Identity_matrix\" rel=\"nofollow noreferrer\">Identity matrix</a> and read the upper left 2x2, to set up a rotation matrix around the z-axis:</p>\n\n<p>Further, I recommend to read an rotation angle in degree and to calculate the rotation axis by the trigonometric functions <code>sin</code> respectively <code>cos</code>. \nFinally read the xy translation components: </p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#define _USE_MATH_DEFINES\n#include &lt;math.h&gt;\n</code></pre>\n\n<pre class=\"lang-c prettyprint-override\"><code>float a[4][4];\n\nvoid mat()\n{\n    // init identity matrix\n    for(int i = 0; i &lt; 4; i++)\n        for (int j = 0; j &lt; 4; ++j)\n            a[i][j] = (i==j) ? 1.0f : 0.0f; \n\n    // read the angle in degrees\n    float angle_degree;\n    scanf(\"%f\", &amp;angle_degree);\n\n    // convert the angle to radian\n    float angle_radiant = angle_degree * (float)M_PI / 180.0f;\n\n    // set rotation around z-axis\n    float cos_ang = cos(angle_radiant); \n    float sin_ang = sin(angle_radiant); \n    a[0][0] = cos_ang; \n    a[0][1] = -sin_ang;\n    a[1][0] = sin_ang;\n    a[1][1] = cos_ang;  \n\n    // read translation\n    scanf(\"%f\", &amp;a[3][0]);\n    scanf(\"%f\", &amp;a[3][1]);\n}\n</code></pre>\n\n<pre class=\"lang-c prettyprint-override\"><code>void display (void)\n{\n    glMatrixMode(GL_MODELVIEW);\n    glLoadMatrixf(&amp;a[0][0]);\n\n    // [...]\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10879816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b97dd5ddb079700a92d41c22452cc5c?s=128&d=identicon&r=PG&f=1", "display_name": "D.Kashyap", "link": "https://stackoverflow.com/users/10879816/d-kashyap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1573660123, "creation_date": 1573636546, "last_edit_date": 1573652647, "question_id": 58833728, "link": "https://stackoverflow.com/questions/58833728/displaying-in-opengl-based-on-a-matrix", "title": "Displaying in openGL based on a matrix", "body": "<p>I am trying to draw some shapes in the openGL window. I draw these shapes based on the values in a particular matrix. I am using glut which has a function glutDisplayFunc that takes 1 parameter, a function callback taking no arguments and returns void. But I need to draw an image on the window based on a matrix which I cannot pass to the function callback.</p>\n\n<p>This is an example code</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;GL/glut.h&gt;\n#include&lt;math.h&gt;\n#define pi 3.142857\nvoid mat()\n{\n        int a[2][2];\n    //\n    for(int i=0;i&lt;2;i++)\n        for (int j = 0; j &lt; 2; ++j)\n        {\n            scanf(\"%d\",&amp;a[i][j]);\n        }\n}\n// function to initialize\nvoid myInit (void)\n{\n    glClearColor(0.0, 0.0, 0.0, 1.0);\n    glColor3f(0.0, 1.0, 0.0);\n    glPointSize(1.0);\n    glMatrixMode(GL_PROJECTION);\n    glLoadIdentity();\n    gluOrtho2D(-780, 780, -420, 420);\n}\n\nvoid display (void)\n{\n    glClear(GL_COLOR_BUFFER_BIT);\n    glBegin(GL_POINTS);\n    float x, y, i;\n    for ( i = 0; i &lt; (2 * pi); i += 0.001)\n    {\n        x = 200 * cos(i);\n        y = 200 * sin(i);\n\n        glVertex2i(x, y);\n    }\n    glEnd();\n    glFlush();\n}\n\nint main (int argc, char** argv)\n{\n    glutInit(&amp;argc, argv);\n    glutInitDisplayMode(GLUT_SINGLE | GLUT_RGB);\n\n    // giving window size in X- and Y- direction\n    glutInitWindowSize(1366, 768);\n    glutInitWindowPosition(0, 0);\n    glutCreateWindow(\"Circle Drawing\");\n    myInit();\n    glutDisplayFunc(display);\n    glutMainLoop();\n}\n\n</code></pre>\n\n<p>I need to be able to use the matrix a in function mat to define the center of 2 circles. How do I draw the window from within the mat function?\nEdit:included code and fixed some typos</p>\n"}, {"tags": ["c", "oracle", "oracle-call-interface"], "owner": {"reputation": 45, "user_id": 9518966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1b806be3bada9abaccae52973f8af22?s=128&d=identicon&r=PG&f=1", "display_name": "LustAndWipe", "link": "https://stackoverflow.com/users/9518966/lustandwipe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1573635780, "creation_date": 1573635780, "question_id": 58833528, "link": "https://stackoverflow.com/questions/58833528/how-to-use-ocibinddynamic-to-input-output-in-one-variable", "title": "How to use OCIBindDynamic to INPUT/OUTPUT in one variable?", "body": "<p>I have some code on OCI/C transport for my program. But I haven't any result after using struct with OCIBindDynamics, I think error where I need to remove cbf_no_data, and add BindByName for output variable after bind by dynamic. I use not a stack for memory, so problem not in data removing, after function</p>\n\n<pre><code> int conn_dynamic(uint16_t id,int pos,char *name,uint16_t type,uint32_t size,int16_t ind,void *data,uint16_t typein,uint32_t sizein,int16_t indin,void *datain,uint16_t mass_arr){\n  CHECK_CURSOR_ID(id)\n  int state = 1;\n  cb_context_t* cbct = (cb_context_t*)malloc(sizeof(cb_context_t));\n  cbct-&gt;cht.ptr = (void*)malloc(sizeof(void*));\n  cbct-&gt;err     = connection.errhp;\n\n\n  temp_arr_num = mass_arr;\n\n  CHECK_IN_ID(id, pos)\n\n  uint8_t bindbyname = 1;\n  char bindname[65536];\n  uint32_t bindpos;\n\n  if (name[0] &gt;= '0' &amp;&amp; name[0] &lt;= '9') {\n    bindbyname = 0;\n    bindpos = atoi(name);\n  } else {\n    bindname[0] = ':';\n    strcpy(bindname + 1, name);\n  }\n\n\n  connection.statements[id].inbinds[pos].type = typein;\n  connection.statements[id].inbinds[pos].ind = indin;\n   memcpy(connection.statements[id].inbinds[pos].ptr, datain, sizein);\n  if (typein == SQLT_CLOB || typein == SQLT_BLOB) {\n    assert(connection.statements[id].inbinds[pos].lob == NULL);\n    OCI_CALL(OCIDescriptorAlloc(connection.envhp, (void **)&amp;connection.statements[id].inbinds[pos].lob, OCI_DTYPE_LOB, 0, 0));\n    OCI_CALL(OCILobCreateTemporary(connection.svchp, connection.errhp, connection.statements[id].inbinds[pos].lob, (ub2)OCI_DEFAULT, OCI_DEFAULT,\n                                   (typein == SQLT_CLOB)?OCI_TEMP_CLOB:OCI_TEMP_BLOB, OCI_ATTR_NOCACHE, OCI_DURATION_SESSION));\n    OCI_CALL(OCILobOpen(connection.svchp, connection.errhp, connection.statements[id].inbinds[pos].lob, OCI_LOB_READWRITE));\n    uint32_t amtp = sizein;\n    OCI_CALL(OCILobWrite(connection.svchp, connection.errhp, connection.statements[id].inbinds[pos].lob, &amp;amtp, 1, datain, sizein, OCI_ONE_PIECE, 0, 0, 0, SQLCS_IMPLICIT));\n\n    if (bindbyname) {\n      OCI_CALL(OCIBindByName(connection.statements[id].handle, &amp;(connection.statements[id].inbinds[pos].handle), connection.errhp, (OraText *) name, strlen(name),\n                             &amp;(connection.statements[id].inbinds[pos].lob), 0, typein, 0, 0, 0, 0, 0, OCI_DATA_AT_EXEC));\n    } else {\n      OCI_CALL(OCIBindByPos(connection.statements[id].handle, &amp;(connection.statements[id].inbinds[pos].handle), connection.errhp, bindpos,\n                            &amp;(connection.statements[id].inbinds[pos].lob), 0, typein, 0, 0, 0, 0, 0, OCI_DATA_AT_EXEC));\n    }\n  } else {\n    if (!(connection.statements[id].inbinds[pos].ptr = malloc(sizein))) {                 //create temporary storage for value\n      connection.error.code = 301;\n      strcpy(connection.error.msg, \"Out of memory\");\n      return -1;\n    }\n\n\n//    if (bindbyname) {\n//      OCI_CALL(OCIBindByName(connection.statements[id].handle, &amp;(connection.statements[id].inbinds[pos].handle), connection.errhp, (OraText *) name, strlen(name),\n//                             &amp;(connection.statements[id].inbinds[pos].ptr), sizein, typein, &amp;connection.statements[id].inbinds[pos].ind, 0, 0, 0, 0, OCI_DATA_AT_EXEC));\n//    } else {\n//      OCI_CALL(OCIBindByPos(connection.statements[id].handle, &amp;(connection.statements[id].inbinds[pos].handle), connection.errhp, bindpos,\n//                            &amp;(connection.statements[id].inbinds[pos].ptr), sizein, typein, &amp;connection.statements[id].inbinds[pos].ind, 0, 0, 0, 0, OCI_DATA_AT_EXEC));\n//    }\n }\n  uint16_t oratype=0;\n  WRITELOG(params,LDEBUG1,\"TYPE IN BIND %d \\n\", type);\n  switch (type) {\n    case 2:{\n        oratype = SQLT_INT;\n        OCIBindDynamic(connection.statements[id].outbinds[pos].handle,connection.errhp,(dvoid*)cbct,cbf_no_data,(dvoid*)cbct,cbf_get_numeric_data);\n        break;\n      }\n    case 3:{\n        oratype = SQLT_FLT;\n        OCIBindDynamic(connection.statements[id].outbinds[pos].handle,connection.errhp,(dvoid*)cbct,cbf_no_data,(dvoid*)cbct,cbf_get_numeric_data);\n\n        break;\n      }\n    case 1:\n    case 4:\n    case 5:\n    {\n      if (type == 1){\n        oratype = SQLT_STR;\n        WRITELOG(params,LDEBUG1,\"call str\\n\");\n        OCI_CALL(OCIBindDynamic(connection.statements[id].outbinds[pos].handle,connection.errhp,(dvoid*)cbct,cbf_no_data,(dvoid*)cbct,cbf_get_string));\n\n        }\n      if (type == 5){ oratype = SQLT_CLOB;\n        OCIBindDynamic(connection.statements[id].outbinds[pos].handle,connection.errhp,(dvoid*)cbct,cbf_no_data,(dvoid*)cbct,cbf_get_clob_data);\n      }\n      if (type == 4){\n          oratype = SQLT_BLOB;\n        OCIBindDynamic(connection.statements[id].outbinds[pos].handle,connection.errhp,(dvoid*)cbct,cbf_no_data,(dvoid*)cbct,cbf_get_blob_data);\n      break;}\n    case 6:{\n        oratype = SQLT_RSET;\n        OCIBindDynamic(connection.statements[id].outbinds[pos].handle,connection.errhp,(dvoid*)cbct,cbf_no_data,(dvoid*)cbct,cbf_ref_cursor);\n      break;}\n    }\n    default:\n      return -1;\n    }\n    printf(\"error here??\");\n    out_array[temp_arr_num]-&gt;type = oratype;\n    out_array[temp_arr_num]-&gt;pos = pos;\n\n    printf(\"No\");\n  //it's not a magic numbers. See outputbind in commands.c\n\n\n\n  cursorid = id;\n\n\n  //WRITE LOG HERE\n  return 1;\n\n}\n</code></pre>\n\n<p>So I don't have output bind, and program try to fetch variable. As example cbf_get_string</p>\n\n<pre><code>sb4 cbf_get_string(dvoid *ctxp, OCIBind *bindp, ub4 iter, ub4 index,\n         dvoid **bufpp, ub4 **alenp, ub1 *piecep,\n         dvoid **indpp, ub2 **rcodepp) {\n\n  cb_context_t* cbct = (cb_context_t*)ctxp;\n  ub4    pos = *((ub4 *)ctxp);\n  /* find out how many rows we are expecting */\n  if (index == 0) {\n    int rows = 0;\n    OCIAttrGet((dvoid*)bindp, OCI_HTYPE_BIND, (dvoid*)&amp;rows, (ub4*)sizeof(int), OCI_ATTR_ROWS_RETURNED, cbct-&gt;err);\n    int sz = rows * sizeof(out_string_t);\n    void* rs = (void*)malloc(sz);\n    memcpy(cbct-&gt;cht.ptr, &amp;rs, sizeof(void*)); /* ptr is now a pointer to a pointer */\n#ifdef DEBUG\n    char dbuf[256]; snprintf(dbuf, 255, \"cbf_get_string: rows=%d rs=%p cbct-&gt;cht.ptr=%p bytes=%d\", rows, rs, *(void**)cbct-&gt;cht.ptr, sz); debug(dbuf);\n#endif\n  }\n\n  out_string_t* offset = (out_string_t*) ((*(void**)cbct-&gt;cht.ptr) + (index * sizeof(out_string_t)));\n  *indpp =   (dvoid*)&amp;offset-&gt;indicator;\n  *rcodepp = (dvoid*)&amp;offset-&gt;rc;\n  *bufpp =   (dvoid*)&amp;offset-&gt;bufpp;\n  int size = sizeof(bufpp);\n\n  offset-&gt;alenp =  size;\n  *alenp =   (dvoid*)&amp;offset-&gt;alenp;\n  *piecep = OCI_ONE_PIECE;\n  out_array[temp_arr_num]-&gt;ptr = cbct-&gt;cht.ptr;\n  out_array[temp_arr_num]-&gt;index = index;\n  WRITELOG(params,LDEBUG1,\"string in bind %s \\n\", *(offset-&gt;bufpp));\n  return OCI_CONTINUE;\n}\n</code></pre>\n\n<p>Can you show me, where I wrong? Cause I can't show some errors. I try only bind 'a' to input and 'a' to output. As example \"Begin :a := :b End;\nAnd I need view a</p>\n"}, {"tags": ["c", "pointers", "struct"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1573635959, "post_id": 58833437, "comment_id": 103942360, "body": "64 bit embedded device? Which CPU would that be?"}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1573636036, "post_id": 58833437, "comment_id": 103942401, "body": "Are there different pointer types in your development environment, like near/far/huge? Maybe you need to specify the respective return and variable pointer types."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1573636134, "post_id": 58833437, "comment_id": 103942461, "body": "I also find your pointer to incomplete array type curious (I assume that is what it is): <code>*(*context)[]</code>. IIUC you could as well just use a pointer to pointer. Would that change anything?"}, {"owner": {"reputation": 1000, "user_id": 2945630, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/bc7b93821d03d8f5892a0e4cf75bee21?s=128&d=identicon&r=PG&f=1", "display_name": "boortmans", "link": "https://stackoverflow.com/users/2945630/boortmans"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1573637036, "post_id": 58833437, "comment_id": 103942895, "body": "@Lundin; it is a library that should run on both embedded and server device, so for now I&#39;m developing on my pc"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1573637398, "post_id": 58833437, "comment_id": 103943085, "body": "How is <code>DEBUG_PRINTF</code> implemented? Is it just a wrapper around <code>printf</code>?"}, {"owner": {"reputation": 1000, "user_id": 2945630, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/bc7b93821d03d8f5892a0e4cf75bee21?s=128&d=identicon&r=PG&f=1", "display_name": "boortmans", "link": "https://stackoverflow.com/users/2945630/boortmans"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1573637439, "post_id": 58833437, "comment_id": 103943109, "body": "@Lundin, yes <code>#define DEBUG_PRINTF(...) \t\tprintf(__VA_ARGS__)</code>"}, {"owner": {"reputation": 1000, "user_id": 2945630, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/bc7b93821d03d8f5892a0e4cf75bee21?s=128&d=identicon&r=PG&f=1", "display_name": "boortmans", "link": "https://stackoverflow.com/users/2945630/boortmans"}, "reply_to_user": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1573637659, "post_id": 58833437, "comment_id": 103943221, "body": "@Peter-ReinstateMonica I have been strugling with the <code>context</code> array.. I did not try to change it back since I managed to fix it"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1573637675, "post_id": 58833437, "comment_id": 103943230, "body": "Ok well then it looks like some pointer compatibility issue across translation units, or some linker hiccup. Do you get the same issues if you place everything in a single file? Make sure to compile as C99 or later to rule out missing prototypes."}, {"owner": {"reputation": 1000, "user_id": 2945630, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/bc7b93821d03d8f5892a0e4cf75bee21?s=128&d=identicon&r=PG&f=1", "display_name": "boortmans", "link": "https://stackoverflow.com/users/2945630/boortmans"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1573639591, "post_id": 58833437, "comment_id": 103944304, "body": "@Lundin very interesting.. when I place everything in a single file I get <code>get_schc_rule(): 0x563ebd9f0bf0 0x563ebd9f0bf0  schc_fragment_input(): rule ptr 0x563ebd9f0bf0</code>, any suggestions on how I should continue from here?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1573640600, "post_id": 58833437, "comment_id": 103944816, "body": "Either you are compiling as C89 after which you can get function incompatibility bugs. Or the structs aren&#39;t visible to all translation units, some of them taking them as incomplete type or similar. The problem seems to clearly be related to your project file structure though, and which files that see which functions/struct definitions. Start by with compiling as <code>gcc -std=c11 -pedantic-errors</code> or your compiler&#39;s equivalent strict standard setting, to rule out crap like c89, -std=gnu etc."}, {"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 0, "creation_date": 1573641088, "post_id": 58833437, "comment_id": 103945082, "body": "Are you cross-compiling ? In any case, make sure all compilation units are compiled with the same (relevant) flags (as for the working file eg.). Same for the linker flags."}, {"owner": {"reputation": 1000, "user_id": 2945630, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/bc7b93821d03d8f5892a0e4cf75bee21?s=128&d=identicon&r=PG&f=1", "display_name": "boortmans", "link": "https://stackoverflow.com/users/2945630/boortmans"}, "edited": false, "score": 1, "creation_date": 1573647081, "post_id": 58833437, "comment_id": 103948141, "body": "I saw there was a <code>warning: implicit declaration of function \u2018get_schc_rule_by_rule_id\u2019 [-Wimplicit-function-declaration]</code>, which converted the pointer to an <code>int</code> (<code>warning: assignment makes pointer from integer without a cast [-Wint-conversion]</code>) and led me to the fact that I forgot to include a file and it is now working fine. Thanks for the replies"}], "owner": {"reputation": 1000, "user_id": 2945630, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/bc7b93821d03d8f5892a0e4cf75bee21?s=128&d=identicon&r=PG&f=1", "display_name": "boortmans", "link": "https://stackoverflow.com/users/2945630/boortmans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1573635447, "creation_date": 1573635447, "question_id": 58833437, "link": "https://stackoverflow.com/questions/58833437/returning-a-pointer-of-a-global-struct", "title": "Returning a pointer of a global struct", "body": "<p>I have a global struct defining a protocol rule as follows</p>\n\n<pre><code>const struct schc_rule_t schc_rule_1 = { 0x01, &amp;compression_rule_1, NOT_FRAGMENTED, 0, 0, 0, 0 };\n</code></pre>\n\n<p>All rules are grouped together in an array</p>\n\n<pre><code>const struct schc_rule_t* node2_schc_rules[] = { &amp;schc_rule_1 };\n</code></pre>\n\n<p>Which can than be assigned to a device</p>\n\n<pre><code>const struct schc_device node2 = { 2, 1, &amp;node2_schc_rules};\n</code></pre>\n\n<p>Of which the <code>struct</code> looks like</p>\n\n<pre><code>struct schc_device {\n    uint32_t device_id;\n    uint8_t rule_count;\n    const struct schc_rule_t *(*context)[];\n};\n</code></pre>\n\n<p>All of these arrays are defined globally, as I'm implementing this for an embedded device and want to store as many variables as possible in the <code>.text</code> section (I'm not sure whether this is best practice, but this will do for now).</p>\n\n<p>Now,\nI have a lookup function that tries to find a rule for a particular device</p>\n\n<pre><code>struct schc_rule_t* get_schc_rule_by_rule_id(uint8_t rule_id, uint32_t device_id) {\n    int i;\n    struct schc_device *device = get_device_by_id(device_id);\n\n    if (device == NULL) {\n        DEBUG_PRINTF(\"get_schc_rule(): no device was found for this id\");\n        return NULL;\n    }\n\n    for (i = 0; i &lt; device-&gt;rule_count; i++) {\n        struct schc_rule_t* curr_rule = (*device-&gt;context)[i];\n        if(curr_rule-&gt;id == rule_id) {\n            DEBUG_PRINTF(\"get_schc_rule(): %p %p \\n\", &amp;schc_rule_2, curr_rule);\n            return curr_rule;\n        }\n    }\n\n    return NULL;\n}\n</code></pre>\n\n<p>The rule I'm looking for is <code>schc_rule_2</code>, and is therefore present in the <code>DEBUG_PRINTF()</code> function.</p>\n\n<p>The output of this function is</p>\n\n<pre><code>get_schc_rule(): 0x560e806f9bf0 0x560e806f9bf0  \n</code></pre>\n\n<p>However, whenever I call this function from another function, like so</p>\n\n<pre><code>struct schc_rule_t* ptr = get_schc_rule_by_rule_id(rule_id, device_id);\nDEBUG_PRINTF(\"schc_fragment_input(): rule ptr %p \\n\", ptr);\n</code></pre>\n\n<p>I get the following:</p>\n\n<pre><code>schc_fragment_input(): rule ptr 0xffffffff806f9bf0 \n</code></pre>\n\n<p>The last 32-bits of the address seem to be correct, however the first 16 are not and leave me with a pointer I can not access. Any idea?</p>\n"}, {"tags": ["c", "coding-style"], "comments": [{"owner": {"reputation": 896, "user_id": 6659361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/200d3e89398030d70445b9a3f071c385?s=128&d=identicon&r=PG&f=1", "display_name": "Maxime B.", "link": "https://stackoverflow.com/users/6659361/maxime-b"}, "edited": false, "score": 2, "creation_date": 1573635102, "post_id": 58833212, "comment_id": 103941865, "body": "I&#39;d tend to prefer the first one as it&#39;s slightly more flexible (e.g. if there is an evolution of the norm and another kind of error is defined with another negative value), but I think it&#39;s just a matter of taste thus I don&#39;t think this question belongs to SO..."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 4, "creation_date": 1573635305, "post_id": 58833212, "comment_id": 103941986, "body": "-1 is clearly defined as the error return value. So you should compare with exactly -1. If there was a <code>#define FILEIO_ERROR -1</code> you would compare with <code>FILEIO_ERROR</code>."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 1, "creation_date": 1573635364, "post_id": 58833212, "comment_id": 103942014, "body": "Because it is so clearly defined, there is not a case of defensive programming, in which you would compare <code>&lt;0</code>"}, {"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 1, "creation_date": 1573635491, "post_id": 58833212, "comment_id": 103942093, "body": "I also prefer the <code>ret &lt; 0</code> check. A comparison <code>&lt; 0</code> <b>may</b> result in less machine code, because it needs to check the sign only, it doesn&#39;t have to compare with a specific value. With <code>read</code> and <code>write</code> you should also compare the return value with the amount of data you wanted to write or read as the functions are not required to read or write all data in one call."}, {"owner": {"reputation": 2145, "user_id": 1478315, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/k8wlG.jpg?s=128&g=1", "display_name": "mozcelikors", "link": "https://stackoverflow.com/users/1478315/mozcelikors"}, "reply_to_user": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 0, "creation_date": 1573635575, "post_id": 58833212, "comment_id": 103942151, "body": "@Bodo I think Paul favors -1 check"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1573635633, "post_id": 58833212, "comment_id": 103942189, "body": "Properly written API:s in C look like <code>result func (size_t* bytes_read);</code>. Crappy ones mix number of bytes with error handling and then force you to go check some global variable. Conclusion: these functions are written with bad API design and no matter how prettily you package them, they will still remain crap. There&#39;s no best way to package crap - just write some icky code with magic number <code>-1</code> and be done with it."}], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 4, "creation_date": 1573636663, "post_id": 58833638, "comment_id": 103942715, "body": "Talking about the overhead of a few extra move instructions next to a huge performance bottleneck like a <code>write</code> system call is ridiculous though..."}], "tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 0, "last_activity_date": 1573636150, "creation_date": 1573636150, "answer_id": 58833638, "question_id": 58833212, "link": "https://stackoverflow.com/questions/58833212/whats-the-best-way-to-check-return-value-of-read-and-write-system-calls/58833638#58833638", "title": "What&#39;s the best way to check return value of read and write system calls?", "body": "<p>The style question  has been IMO answered by Maxine in his comment. </p>\n\n<p>The efficiency is also better especially if compiler optimizes the code more aggressively </p>\n\n<p><a href=\"https://godbolt.org/z/MrTdqX\" rel=\"nofollow noreferrer\">https://godbolt.org/z/MrTdqX</a></p>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1573636990, "post_id": 58833764, "comment_id": 103942865, "body": "I don&#39;t know x86 well, but are you sure the <code>cmp</code> instruction won&#39;t result in a different amount of cycles depending on parameters? The <code>cmp</code> with zero could take <code>0</code> as an 8 bit parameter, but the <code>-1</code> case would force it to be 32 bit."}, {"owner": {"reputation": 730, "user_id": 6009051, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/077b5fa5d4fce7acc4362c52fcd4de36?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Heinrich", "link": "https://stackoverflow.com/users/6009051/daniel-heinrich"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1573637911, "post_id": 58833764, "comment_id": 103943365, "body": "In this case the cmp is the same and the difference lies with the jmp. And both use exactly one cpu cycle."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1573838343, "post_id": 58833764, "comment_id": 104030838, "body": "OT: the parameter <code>argc</code> will never be less than 1"}], "tags": [], "owner": {"reputation": 730, "user_id": 6009051, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/077b5fa5d4fce7acc4362c52fcd4de36?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Heinrich", "link": "https://stackoverflow.com/users/6009051/daniel-heinrich"}, "is_accepted": true, "score": 1, "last_activity_date": 1595951933, "last_edit_date": 1595951933, "creation_date": 1573636655, "answer_id": 58833764, "question_id": 58833212, "link": "https://stackoverflow.com/questions/58833212/whats-the-best-way-to-check-return-value-of-read-and-write-system-calls/58833764#58833764", "title": "What&#39;s the best way to check return value of read and write system calls?", "body": "<p>First I'll look at it with performance in mind, using gcc 9.2 (x86-64):</p>\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char **args, char **env) {\n   if (argc &lt; 0) {\n       printf(&quot;ERROR!&quot;);\n   }\n\n   return 0;\n}\n</code></pre>\n<p>will generate something like</p>\n<pre><code>.LC0:\n        .string &quot;ERROR!&quot;\nmain:\n        push    rbp\n        mov     rbp, rsp\n        sub     rsp, 32\n        mov     DWORD PTR [rbp-4], edi\n        mov     QWORD PTR [rbp-16], rsi\n        mov     QWORD PTR [rbp-24], rdx\n        cmp     DWORD PTR [rbp-4], 0\n        jns     .L2\n        mov     edi, OFFSET FLAT:.LC0\n        mov     eax, 0\n        call    printf\n.L2:\n        mov     eax, 0\n        leave\n        ret\n</code></pre>\n<p>and</p>\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char **args, char **env) {\n   if (argc == -1) {\n       printf(&quot;ERROR!&quot;);\n   }\n\n   return 0;\n}\n</code></pre>\n<p>generates</p>\n<pre><code>.LC0:\n        .string &quot;ERROR!&quot;\nmain:\n        push    rbp\n        mov     rbp, rsp\n        sub     rsp, 32\n        mov     DWORD PTR [rbp-4], edi\n        mov     QWORD PTR [rbp-16], rsi\n        mov     QWORD PTR [rbp-24], rdx\n        cmp     DWORD PTR [rbp-4], -1\n        jne     .L2\n        mov     edi, OFFSET FLAT:.LC0\n        mov     eax, 0\n        call    printf\n.L2:\n        mov     eax, 0\n        leave\n        ret\n</code></pre>\n<p>so there isn't any difference performance-wise. With THIS compiler and architecture.</p>\n<p>Anything else is personal opinion. I personally would go for &quot;&lt; 0&quot; ... just because it catches everything.</p>\n"}], "owner": {"reputation": 2145, "user_id": 1478315, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/k8wlG.jpg?s=128&g=1", "display_name": "mozcelikors", "link": "https://stackoverflow.com/users/1478315/mozcelikors"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 304, "favorite_count": 0, "accepted_answer_id": 58833764, "answer_count": 2, "score": 0, "last_activity_date": 1595951933, "creation_date": 1573634604, "last_edit_date": 1573634986, "question_id": 58833212, "link": "https://stackoverflow.com/questions/58833212/whats-the-best-way-to-check-return-value-of-read-and-write-system-calls", "title": "What&#39;s the best way to check return value of read and write system calls?", "body": "<p>I am interested in finding out the best way possible for checking the return value from read and write system calls on Linux. According to the man page, e.g for write:</p>\n\n<blockquote>\n  <p>Upon successful completion, write() and pwrite() shall return the\n  number of bytes actually written to the file associated with fildes.\n  This number shall never be greater than nbyte. Otherwise, -1 shall be\n  returned and errno set to indicate the error.</p>\n</blockquote>\n\n<p>For read:</p>\n\n<blockquote>\n  <p>On success, the number of bytes read is returned (zero indicates end\n  of file), and the file position is advanced by this number. It is not\n  an error if this number is smaller than the number of bytes requested;\n  this may happen for example because fewer bytes are actually available\n  right now (maybe because we were close to end-of-file, or because we\n  are reading from a pipe, or from a terminal), or because read() was\n  interrupted by a signal. On error, -1 is returned, and errno is set\n  appropriately. In this case it is left unspecified whether the file\n  position (if any) changes.</p>\n</blockquote>\n\n<p>So that makes me wondering:</p>\n\n<pre><code>if (ret &lt; 0) {\n    // see strerror\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>if (ret == -1) {\n    // see strerror\n}\n</code></pre>\n\n<p>Which one is the way to go, and why? Per man page, it seems to me like these are exactly same from functionality perspective. Is it right? Only difference I'm guessing would be that first statement should use a comparator, which would require more resources. Am I right with this assumption? Please share with me your thoughts. Thanks</p>\n"}, {"tags": ["c", "linux", "openssl"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1573641952, "post_id": 58832887, "comment_id": 103945567, "body": "See <a href=\"http://wiki.openssl.org/index.php/EVP_Symmetric_Encryption_and_Decryption\" rel=\"nofollow noreferrer\">EVP Symmetric Encryption and Decryption</a> on the OpenSSL wiki. You might also want to look at <a href=\"http://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a>."}, {"owner": {"reputation": 45, "user_id": 10653713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83736665299084b4d7dce298aac7c155?s=128&d=identicon&r=PG&f=1", "display_name": "vkkindia", "link": "https://stackoverflow.com/users/10653713/vkkindia"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1573647737, "post_id": 58832887, "comment_id": 103948448, "body": "I already gone throuth the documentation i would like to get clarified on how to get  ciphertext_len from the ciphertext (a binary data). Those examples get the ciphertext_len from the encrypt function. But in my case i have to do decrypt only."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 10653713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83736665299084b4d7dce298aac7c155?s=128&d=identicon&r=PG&f=1", "display_name": "vkkindia", "link": "https://stackoverflow.com/users/10653713/vkkindia"}, "edited": false, "score": 0, "creation_date": 1573749849, "post_id": 58855325, "comment_id": 103994473, "body": "thanks for suggesting EVP_DecodeBlock, i could not find examples of this decode_block as iam new can some one please modify it to working. thanks again dave thompson"}], "tags": [], "owner": {"reputation": 23625, "user_id": 2868801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ec5567811049b7ce8192be0bc0246d1?s=128&d=identicon&r=PG&f=1", "display_name": "dave_thompson_085", "link": "https://stackoverflow.com/users/2868801/dave-thompson-085"}, "is_accepted": false, "score": 0, "last_activity_date": 1573729863, "last_edit_date": 1573729863, "creation_date": 1573729554, "answer_id": 58855325, "question_id": 58832887, "link": "https://stackoverflow.com/questions/58832887/how-to-get-ciphertext-len-from-ciphertext-to-use-in-openssl-evp-in-c-program/58855325#58855325", "title": "How to get ciphertext_len from ciphertext to use in openssl EVP_ in c program", "body": "<p>Ciphertext is arbitrary bits and you can't determine its length by looking at it, you must know already what its length is. In particular ciphertext can contain a null byte, which terminates a C string, and this will cause <code>strlen</code> to return too small a value. However, you actually have a base64 string <em>passed from the commandline</em> which <em>is</em> a null-terminated C string, so <code>strlen()</code> gives the correct length, and decoding that base64 gives a known amount of data -- the final value of <code>decoded_byte_index</code> in your decode function. Since you also want to pass back the (alloc'ed) pointer you need to handle <em>two</em> values; to do this in C you can (1) use a pointer argument/parameter that the function stores through; (2) set a shared global that is read by the caller, but shared globals are widely considered very bad style; or (3) create a suitable <code>struct</code> type and use that.</p>\n\n<p>But you don't need all that hassle with BIOs. Your entire decode function could be replaced by one call to <code>EVP_DecodeBlock</code> which conveniently returns the number of bytes in the decoded result as an <code>int</code>, using a supplied buffer instead of alloc'ing. (And your encode function could be replaced by <code>EVP_EncodeBlock</code>, except it isn't used or needed at all.) </p>\n\n<p>The decrypted value similarly is not null-terminated and cannot be safely treated as a C string: <code>printf(\"The decrypted is %s\\n\", outBuf)</code> may run past the end of the valid data and print garbage or even crash, and <code>rtrim</code> using <code>strlen(str)</code> may access past the end of your actual buffer and clobber other data. Instead use the length you computed by adding up the 'outl' arguments, i.e. the final value of <code>outBytes</code>. For the printf you can use <code>printf (\"%.*s\\n\", outBytes, outBuf)</code> to truncate at the specified length instead of searching for the absent null byte.</p>\n\n<p>Finally, when an OpenSSL function returns an error indication, instead of simply saying 'didn't work' it is almost always good to at least print the value of <code>ERR_get_error()</code> (preferably in hex), or better the result of calling <code>ERR_get_error_string()</code> on that number, or best to call <code>ERR_print_errors[_fp|cb]</code> to print the number <em>and</em> string <em>and</em> some other data that may help figure out the problem. All of these are described on their respective man pages.</p>\n\n<p>You might also want to consider that nested functions (your <code>rtrim</code> within <code>main</code>) are a GCC extension not in standard C and not implemented by most other compilers. And in your case not needed.</p>\n"}], "owner": {"reputation": 45, "user_id": 10653713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83736665299084b4d7dce298aac7c155?s=128&d=identicon&r=PG&f=1", "display_name": "vkkindia", "link": "https://stackoverflow.com/users/10653713/vkkindia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 145, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573886993, "creation_date": 1573633190, "last_edit_date": 1573886993, "question_id": 58832887, "link": "https://stackoverflow.com/questions/58832887/how-to-get-ciphertext-len-from-ciphertext-to-use-in-openssl-evp-in-c-program", "title": "How to get ciphertext_len from ciphertext to use in openssl EVP_ in c program", "body": "<p>In order to find <code>ciphertext_len</code> from ciphertext to use in openssl EVP_ in  C program I have created a ciphertext using OpenSSL in bash to give base64 output:</p>\n\n<pre><code>echo -n \"Hello\"|openssl enc -aes-256-cbc -e -nosalt -K \n000102030405060708090A0B0C0D0E0F101112131415161718191A1B1C1D1E1F -iv \n000102030405060708090A0B0C0D0E0F|base64 -w0\n</code></pre>\n\n<p>A program to decrypt in C from the example I found it works for the above bash command but if I give: </p>\n\n<pre><code>./evp_decrypt 0t3Z18pJqxIbbCFlnqDBIjMSFFvaOEoA7HFuRjQeExA0B1zCJoBhIzV5Qj3JU44qLcI+qbyLG/b2WJE2weKDynX6WJ/9OlujH6tTlITsbw4/hVpxZJnFFF6PfD5Hqyjct6YcLlmhtXYjZab9MsaPO+m/RJH+koe+FUdzxNJpjtWEgijaWQkpDLszsXTKgM+XXZloi6WQicItDRj02iQvXEAmGxejBbekWq0y1LX+SpQ=\n</code></pre>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;openssl/ssl.h&gt;\n#include &lt;openssl/bio.h&gt;\n#include &lt;stdio.h&gt;\n\n#define INBUFSIZE 512\n#define OUTBUFSIZE (1024*1024)\n\n\nchar *base64encode (const void *b64_encode_this, int encode_this_many_bytes){\n    BIO *b64_bio, *mem_bio;      //Declares two OpenSSL BIOs: a base64 filter and a memory BIO.\n    BUF_MEM *mem_bio_mem_ptr;    //Pointer to a \"memory BIO\" structure holding our base64 data.\n    b64_bio = BIO_new(BIO_f_base64());                      //Initialize our base64 filter BIO.\n    mem_bio = BIO_new(BIO_s_mem());                           //Initialize our memory sink BIO.\n    BIO_push(b64_bio, mem_bio);            //Link the BIOs by creating a filter-sink BIO chain.\n    BIO_set_flags(b64_bio, BIO_FLAGS_BASE64_NO_NL);  //No newlines every 64 characters or less.\n    BIO_write(b64_bio, b64_encode_this, encode_this_many_bytes); //Records base64 encoded data.\n    BIO_flush(b64_bio);   //Flush data.  Necessary for b64 encoding, because of pad characters.\n    BIO_get_mem_ptr(mem_bio, &amp;mem_bio_mem_ptr);  //Store address of mem_bio's memory structure.\n    BIO_set_close(mem_bio, BIO_NOCLOSE);   //Permit access to mem_ptr after BIOs are destroyed.\n    BIO_free_all(b64_bio);  //Destroys all BIOs in chain, starting with b64 (i.e. the 1st one).\n    BUF_MEM_grow(mem_bio_mem_ptr, (*mem_bio_mem_ptr).length + 1);   //Makes space for end null.\n    (*mem_bio_mem_ptr).data[(*mem_bio_mem_ptr).length] = '\\0';  //Adds null-terminator to tail.\n    return (*mem_bio_mem_ptr).data; //Returns base-64 encoded data. (See: \"buf_mem_st\" struct).\n}\n\nchar *base64decode (const void *b64_decode_this, int decode_this_many_bytes){\n    BIO *b64_bio, *mem_bio;      //Declares two OpenSSL BIOs: a base64 filter and a memory BIO.\n    char *base64_decoded = calloc( (decode_this_many_bytes*3)/4+1, sizeof(char) ); //+1 = null.\n    b64_bio = BIO_new(BIO_f_base64());                      //Initialize our base64 filter BIO.\n    mem_bio = BIO_new(BIO_s_mem());                         //Initialize our memory source BIO.\n    BIO_write(mem_bio, b64_decode_this, decode_this_many_bytes); //Base64 data saved in source.\n    BIO_push(b64_bio, mem_bio);          //Link the BIOs by creating a filter-source BIO chain.\n    BIO_set_flags(b64_bio, BIO_FLAGS_BASE64_NO_NL);          //Don't require trailing newlines.\n    int decoded_byte_index = 0;   //Index where the next base64_decoded byte should be written.\n    while ( 0 &lt; BIO_read(b64_bio, base64_decoded+decoded_byte_index, 1) ){ //Read byte-by-byte.\n        decoded_byte_index++; //Increment the index until read of BIO decoded data is complete.\n    } //Once we're done reading decoded data, BIO_read returns -1 even though there's no error.\n    BIO_free_all(b64_bio);  //Destroys all BIOs in chain, starting with b64 (i.e. the 1st one).\n    return base64_decoded;        //Returns base-64 decoded data with trailing null terminator.\n}\n\n\n\n\nvoid prtErrAndExit(int eVal, char *msg);\nint main(int argc, char *argv[]);\n\nint main(int argc, char *argv[]) {\n  int outBytes, inBytes, tmpOutBytes, bytesInBuf, i;\n  int cipherBlockSize, cipherKeyLength, cipherIvLength;\n  unsigned char key[] = { /* Need all 32 bytes... */\n    0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, \n    0x08, 0x09, 0x0A, 0x0B, 0x0C, 0x0D, 0x0E, 0x0F,\n    0x10, 0x11, 0x12, 0x13, 0x14, 0x15, 0x16, 0x17, \n    0x18, 0x19, 0x1A, 0x1B, 0x1C, 0x1D, 0x1E, 0x1F\n  };\n  unsigned char iv[] = { /* Only need 16 bytes... */\n    0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, \n    0x08, 0x09, 0x0A, 0x0B, 0x0C, 0x0D, 0x0E, 0x0F,\n    0x10, 0x11, 0x12, 0x13, 0x14, 0x15, 0x16, 0x17, \n    0x18, 0x19, 0x1A, 0x1B, 0x1C, 0x1D, 0x1E, 0x1F\n  };\n  unsigned char buf2crypt[INBUFSIZE];\n  unsigned char outBuf[OUTBUFSIZE];\n  EVP_CIPHER_CTX ctx;\n\n  EVP_CIPHER_CTX_init(&amp;ctx);\n  EVP_DecryptInit_ex(&amp;ctx, EVP_aes_256_cbc(), NULL, key, iv);\n\n  cipherBlockSize = EVP_CIPHER_CTX_block_size(&amp;ctx); \n  cipherKeyLength = EVP_CIPHER_CTX_key_length(&amp;ctx);\n  cipherIvLength  = EVP_CIPHER_CTX_iv_length(&amp;ctx);\n\n  fprintf(stderr, \"INFO(evp_decrypt): Enc Algo:   %s\\n\", OBJ_nid2ln(EVP_CIPHER_CTX_nid(&amp;ctx)));\n  fprintf(stderr, \"INFO(evp_decrypt): Key:        \");\n  for(i=0; i&lt;cipherKeyLength; i++)\n    fprintf(stderr, \"%02X\", (int)(key[i]));\n  fprintf(stderr, \"\\n\");\n  fprintf(stderr, \"INFO(evp_decrypt): IV:         \");\n  for(i=0; i&lt;cipherIvLength; i++)\n    fprintf(stderr, \"%02X\", (int)(iv[i]));\n  fprintf(stderr, \"\\n\");\n  fprintf(stderr, \"INFO(evp_decrypt): block size: %d\\n\", cipherBlockSize);\n  fprintf(stderr, \"INFO(evp_decrypt): key length: %d\\n\", cipherKeyLength);\n  fprintf(stderr, \"INFO(evp_decrypt): IV length:  %d\\n\", cipherIvLength);\n\n  if((cipherKeyLength &gt; 32) || (cipherIvLength  &gt; 16))\n    prtErrAndExit(1, \"ERROR: Hardwired key or iv was too short!!\\n\"); \n\n  //fprintf(stderr, \"INFO(evp_decrypt): READING DATA\");\n  inBytes = outBytes = 0;\n    char *input_base64encoded = argv[1];\n    int bytes_to_decode = strlen(input_base64encoded)+1; //Number of bytes in string to base64 decode.\n     //unsigned char buf2crypt[INBUFSIZE];\n    char *base64_decoded_encrypted = base64decode(input_base64encoded, bytes_to_decode);   //Base-64 decoding.\n\n    bytesInBuf =  strlen(base64_decoded_encrypted); // HOW TO GET LENGTH OF ciphertext\n    BIO_dump_fp (stdout, (const char *)base64_decoded_encrypted, bytesInBuf);\n\n    if((OUTBUFSIZE - ((bytesInBuf + cipherBlockSize - 1) + outBytes)) &lt;= 0)\n      prtErrAndExit(1, \"ERROR: Buffer was not big enough to hold decrypted data!!\\n\");\n      //printf (\"%d and %d, %d, %s, %d \\n\", outBuf, outBytes, tmpOutBytes, base64_decoded_encrypted, bytesInBuf);\n       printf (\"tmpOutBytes before is %d\\n\", tmpOutBytes);\n\n\n\n    if(!EVP_DecryptUpdate(&amp;ctx, outBuf + outBytes, &amp;tmpOutBytes, base64_decoded_encrypted, bytesInBuf))\n      prtErrAndExit(1, \"ERROR: EVP_DecryptUpdate didn't work...\\n\");\n     printf (\"tmpOutBytes before is %d\\n\", tmpOutBytes);\n    outBytes += tmpOutBytes;\n    inBytes += bytesInBuf;\n;\n\n  if((OUTBUFSIZE - (cipherBlockSize + outBytes)) &lt;= 0)\n    prtErrAndExit(1, \"ERROR: Buffer was not big enough to hold decrypted data!!\\n\");\n  if(!EVP_DecryptFinal_ex(&amp;ctx, outBuf+outBytes, &amp;tmpOutBytes))\n    prtErrAndExit(1, \"ERROR: EVP_DecryptFinal_ex didn't work...\\n\");\n  outBytes += tmpOutBytes;\n\n  fprintf(stderr, \"INFO(evp_decrypt): Bytes in:   %d\\n\", inBytes);\n  fprintf(stderr, \"INFO(evp_decrypt): Bytes out:  %d\\n\", outBytes);\n\n  EVP_CIPHER_CTX_cleanup(&amp;ctx);\n\n  //fwrite(outBuf, 1, outBytes, stdout);\n  //outBuf has length of array ie with empty space filled \n  printf(\"The decrypted is %s\\n\", outBuf);\n\n  char *rtrim(char *str, const char *seps)\n{\n    int i;\n    if (seps == NULL) {\n        seps = \"\\t\\n\\v\\f\\r \";\n    }\n    i = strlen(str) - 1;\n    while (i &gt;= 0 &amp;&amp; strchr(seps, str[i]) != NULL) {\n        str[i] = '\\0';\n        i--;\n    }\n    return str;\n}\n\n    char *decrypted_key =  rtrim(outBuf, NULL) ;\n   printf(\"The trimmed decrypted is %s\\n\", decrypted_key);\n  return 0;\n} /* end func main */\n\n/* Save some vertical space with this simple error handling function.. */\nvoid prtErrAndExit(int eVal, char *msg) {\n  if(msg != NULL)\n    fprintf(stderr, \"INFO(evp_decrypt_error): %s\\n\\n\", msg);\n    fprintf(stderr, \"INFO(evp_decrypt_error_message): \\n\\n\");\n\n  exit(eVal);\n} /* end func prtErrAndExit */\n</code></pre>\n\n<p>I know something wrong in getting length of the ciphertext - how can I fix it?</p>\n"}, {"tags": ["c", "com", "clang", "directx", "directx-12"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1573634896, "post_id": 58832679, "comment_id": 103941747, "body": "This is not necessarily the cause of your problem, but in standard C, the <code>void**</code> casts are incorrect and an incompatible pointer type conversion. The correct way to get a <code>void**</code> from an object pointer is to declare a local <code>void* tmp = &amp;g_pd3dRtvDescHeap;</code> then pass <code>&amp;tmp</code> to the function."}, {"owner": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1573642740, "post_id": 58832679, "comment_id": 103945979, "body": "@Lundin <i>&quot;in standard C, the void * * casts are incorrect and an incompatible pointer type conversion&quot;</i> - which part of the standard enforces this restriction? <code>6.3.2.3 Pointers</code> explicitly allows such conversions."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1573644538, "post_id": 58832679, "comment_id": 103946918, "body": "@VTT 6.5.16.1 Simple assignment: <code>the left operand has atomic, qualified, or unqualified pointer type, and (considering the type the left operand would have after lvalue conversion) both operands are pointers to qualified or unqualified versions of compatible types, and the type pointed to by the left has all the qualifiers of the type pointed to by the right;</code>. Parameter passing to functions is done according to the rules of simple assignment."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1573644667, "post_id": 58832679, "comment_id": 103946988, "body": "@VTT As for 6.3.2.3/7 it doesn&#39;t mention what will happen when you de-reference the pointer though an incompatible type. It does mention that such pointer conversions may invoke undefined behavior in case of different alignment though."}], "answers": [{"comments": [{"owner": {"reputation": 567, "user_id": 4122132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61b5101f94d7434dda690dbdb70693f8?s=128&d=identicon&r=PG&f=1", "display_name": "mbl", "link": "https://stackoverflow.com/users/4122132/mbl"}, "edited": false, "score": 0, "creation_date": 1573722776, "post_id": 58852998, "comment_id": 103978312, "body": "cool, I&#39;ll just work around this one by holding the pointer before the call to this specific function. Thanks a lot!"}], "tags": [], "owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "is_accepted": true, "score": 1, "last_activity_date": 1573750857, "last_edit_date": 1573750857, "creation_date": 1573722490, "answer_id": 58852998, "question_id": 58832679, "link": "https://stackoverflow.com/questions/58832679/problem-calling-dx12-functions-in-a-program-compiled-with-clang-in-c11/58852998#58852998", "title": "Problem calling DX12 functions in a program compiled with clang in c11", "body": "<p>You are hitting a known bug in the C-bindings... See <a href=\"https://stackoverflow.com/questions/34118929/getcpudescriptorhandleforheapstart-stack-corruption\">this thread</a> which explains there's a bug with <code>GetCPUDescriptorHandleForHeapStart</code>.</p>\n\n<blockquote>\n  <p>There were similar issues with the C-bindings with Direct3D9Ex. The basic issue is that almost all users use C++ for DirectX since it naturally maps to COM. The C bindings are mostly automatically generated; they are not well tested or maintained.</p>\n</blockquote>\n"}], "owner": {"reputation": 567, "user_id": 4122132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61b5101f94d7434dda690dbdb70693f8?s=128&d=identicon&r=PG&f=1", "display_name": "mbl", "link": "https://stackoverflow.com/users/4122132/mbl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 58852998, "answer_count": 1, "score": 1, "last_activity_date": 1573750857, "creation_date": 1573632196, "question_id": 58832679, "link": "https://stackoverflow.com/questions/58832679/problem-calling-dx12-functions-in-a-program-compiled-with-clang-in-c11", "title": "Problem calling DX12 functions in a program compiled with clang in c11", "body": "<p>For the sake of learning, I am trying to correctly call the DirectX12 APIs using clang in pure c11. I managed to get everything to compile, but sometimes the vtable pointers seem to get corrupted and change where they point when they shouldn't be.</p>\n\n<pre><code>ID3D12DeviceVtbl* tbl; //tracking the vtable pointer for debugging purposes\n\nD3D_FEATURE_LEVEL featureLevel = D3D_FEATURE_LEVEL_11_0;\nif (D3D12CreateDevice(NULL, featureLevel, &amp;IID_ID3D12Device, (void**)&amp;g_pd3dDevice) != S_OK)\n{\n    return false;\n}\n\n{\n    tbl = g_pd3dDevice-&gt;lpVtbl;\n\n    D3D12_DESCRIPTOR_HEAP_DESC desc ;\n    desc.Type = D3D12_DESCRIPTOR_HEAP_TYPE_RTV;\n    desc.NumDescriptors = NUM_BACK_BUFFERS;\n    desc.Flags = D3D12_DESCRIPTOR_HEAP_FLAG_NONE;\n    desc.NodeMask = 1;\n\n    // works fine\n    if (g_pd3dDevice-&gt;lpVtbl-&gt;CreateDescriptorHeap(g_pd3dDevice,&amp;desc, &amp;IID_ID3D12DescriptorHeap, (void**)&amp;g_pd3dRtvDescHeap) != S_OK)\n        return false;\n\n    // works fine\n    SIZE_T rtvDescriptorSize = g_pd3dDevice-&gt;lpVtbl-&gt;GetDescriptorHandleIncrementSize(g_pd3dDevice,D3D12_DESCRIPTOR_HEAP_TYPE_RTV);\n\n    // works fine\n    D3D12_CPU_DESCRIPTOR_HANDLE rtvHandle = g_pd3dRtvDescHeap-&gt;lpVtbl-&gt;GetCPUDescriptorHandleForHeapStart(g_pd3dRtvDescHeap);\n\n    // after the line above executes, g_pd3dDevice-&gt;lpVtbl now points to somewhere new and invalid\n}\n\n{\n    D3D12_DESCRIPTOR_HEAP_DESC desc ;\n    desc.Type = D3D12_DESCRIPTOR_HEAP_TYPE_CBV_SRV_UAV;\n    desc.NumDescriptors = 1;\n    desc.Flags = D3D12_DESCRIPTOR_HEAP_FLAG_SHADER_VISIBLE;\n\n    // g_pd3dDevice-&gt;lpVtbl can't find CreateDescriptorHeap\n    if (g_pd3dDevice-&gt;lpVtbl-&gt;CreateDescriptorHeap(g_pd3dDevice,&amp;desc, &amp;IID_ID3D12DescriptorHeap, (void**)&amp;g_pd3dSrvDescHeap) != S_OK)\n    {\n        return false;\n    }\n\n    // tbl-&gt;CreateDescriptorHeap is still a valid pointer however.\n}\n</code></pre>\n\n<p>As explaining in the comments, after the line <code>D3D12_CPU_DESCRIPTOR_HANDLE rtvHandle = g_pd3dRtvDescHeap-&gt;lpVtbl-&gt;GetCPUDescriptorHandleForHeapStart(g_pd3dRtvDescHeap);</code> the <code>g_pd3dDevice-&gt;lpVtbl</code> pointer changes and points somewhere invalid and I don't understand why.</p>\n\n<p>I am compiling with the following options:</p>\n\n<pre><code>clang.exe -std=c11 -pedantic-errors -g -D CINTERFACE .\\main.c\n</code></pre>\n"}, {"tags": ["c", "windows", "symlink"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1573630653, "post_id": 58832271, "comment_id": 103939848, "body": "In short: No there isn&#39;t. For starters, in Windows you have to decide if you want to create a <i>shortcut</i> or a file-system link or a file-system fork. I think that NTFS support a few different kinds of &quot;links&quot; (shortcuts not included)."}, {"owner": {"reputation": 1, "user_id": 6897971, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-IBJUul2GdXA/AAAAAAAAAAI/AAAAAAAAAGo/iRtySqOytHA/photo.jpg?sz=128", "display_name": "Sampath Reddy", "link": "https://stackoverflow.com/users/6897971/sampath-reddy"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1573632851, "post_id": 58832271, "comment_id": 103940838, "body": "yes understood, In other terms any C API for only windows, which does &quot;mklink &lt;linkname&gt; &lt;filepath&gt;&quot; (<a href=\"https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/mklink\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/windows-server/administration/&hellip;</a>)"}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1573653632, "post_id": 58832271, "comment_id": 103951806, "body": "NTFS has reparse points. This is an extension of NT object-namespace reparsing into the filesystem namespace. A reparse point buffer that&#39;s set on a file or directory might target a full reparse to another absolute path or relative path in the system, or it might be handled inline by a filter driver (e.g. swap in a file from hierarchical storage). Each type is identified by a registered tag, so system and third-party reparse points don&#39;t interfere. Common system types are <code>IO_REPARSE_TAG_MOUNT_POINT</code> and <code>IO_REPARSE_TAG_SYMLINK</code>, which emulate Unix mount points and symlinks."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1573654043, "post_id": 58832271, "comment_id": 103952067, "body": "At a high level, the Windows API supports creating symlinks via <a href=\"https://docs.microsoft.com/en-us/windows/win32/api/winbase/nf-winbase-createsymboliclinkw\" rel=\"nofollow noreferrer\"><code>CreateSymbolicLinkW</code></a>. The caller needs to have the privilege &quot;SeCreateSymbolicLinkPrivilege&quot;, which is granted to elevated administrators -- or can be granted to specific users or groups, in which case elevation is not required. Another difference with Windows symlinks is that a link that targets a directory must be set as a reparse point on a directory, so there&#39;s a flag <code>SYMBOLIC_LINK_FLAG_DIRECTORY</code> to specify this."}], "owner": {"reputation": 1, "user_id": 6897971, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-IBJUul2GdXA/AAAAAAAAAAI/AAAAAAAAAGo/iRtySqOytHA/photo.jpg?sz=128", "display_name": "Sampath Reddy", "link": "https://stackoverflow.com/users/6897971/sampath-reddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 131, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1573630366, "creation_date": 1573630366, "question_id": 58832271, "link": "https://stackoverflow.com/questions/58832271/symlink-creating-system-file-instead-of-symlink-file-in-windows", "title": "symlink() creating .system file instead of .symlink file in windows", "body": "<p>This case is used for the mix of windows and UNIX based os's. When used symlink() its works fine for UNIX/Linux but when same applied on windows instead of a symbolic link file .system file gets created.</p>\n\n<p>Is there any C API I can use for which supports both OS's.</p>\n\n<p>Thanks for your help!</p>\n"}, {"tags": ["c++", "c", "intrinsics", "avx", "avx2"], "answers": [{"comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1573632306, "post_id": 58832219, "comment_id": 103940623, "body": "Yup, having a choice of scale factors allows you to use element indices, byte offsets (including possibly unaligned), or even (with a base of <code>0</code>) 32-bit pointers.  Or 64-bit pointers with a qword-index gather."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 95, "user_id": 11020966, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A7g59A28Ddw/AAAAAAAAAAI/AAAAAAAAADQ/m6XAwFOkR5U/photo.jpg?sz=128", "display_name": "Pritam Pallab", "link": "https://stackoverflow.com/users/11020966/pritam-pallab"}, "edited": false, "score": 1, "creation_date": 1573647490, "post_id": 58832219, "comment_id": 103948328, "body": "@PritamPallab You&#39;re welcome. Please, accept the answer if you don&#39;t need any more info, such that others know it has been resolved."}], "tags": [], "owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "is_accepted": true, "score": 5, "last_activity_date": 1573630159, "creation_date": 1573630159, "answer_id": 58832219, "question_id": 58832024, "link": "https://stackoverflow.com/questions/58832024/avx2-gather-instruction-usage-details/58832219#58832219", "title": "AVX2 Gather Instruction Usage Details", "body": "<p>The offsets in <code>vindex</code> are in bytes. Therefore, you gather 32-bit integer values from addresses <code>{arr, arr+2, arr+4, ...}</code>. Either change these indexes from <code>{0,2,4...}</code> to <code>{0,8,16,...}</code>, or update the scale factor as:</p>\n\n<pre><code>var = _mm256_i32gather_epi32(arr,ind_intel, 4 ); // 1 -&gt; 4\n</code></pre>\n\n<p>This prints out the expected values.</p>\n\n<p>I would prefer the second option, that is to update the scale factor. It is basically its purpose \u2014 to allow indexes in <code>vindex</code> having logical offset values with respect to data byte-size, rather that byte-offset values.</p>\n"}], "owner": {"reputation": 95, "user_id": 11020966, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A7g59A28Ddw/AAAAAAAAAAI/AAAAAAAAADQ/m6XAwFOkR5U/photo.jpg?sz=128", "display_name": "Pritam Pallab", "link": "https://stackoverflow.com/users/11020966/pritam-pallab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 2, "accepted_answer_id": 58832219, "answer_count": 1, "score": 1, "last_activity_date": 1573630159, "creation_date": 1573629299, "question_id": 58832024, "link": "https://stackoverflow.com/questions/58832024/avx2-gather-instruction-usage-details", "title": "AVX2 Gather Instruction Usage Details", "body": "<p>I am trying to understand the gather functionality of AVX2 intel intrinsic.</p>\n\n<p>As per the official document <a href=\"https://software.intel.com/sites/landingpage/IntrinsicsGuide/#techs=AVX2&amp;expand=2983\" rel=\"nofollow noreferrer\">Link</a>, the function definition is,</p>\n\n<pre><code>__m256i _mm256_i32gather_epi32 (int const* base_addr, __m256i vindex, const int scale)\n\nGather 32-bit integers from memory using 32-bit indices. 32-bit elements are loaded from addresses starting at base_addr and offset by each 32-bit element in vindex (each index is scaled by the factor in scale). Gathered elements are merged into dst. scale should be 1, 2, 4 or 8.\n</code></pre>\n\n<p>Therfore as per my understanding, it returns a __m256i vector stuffed with 8 integers from the array with the base index <code>base_addr</code> from the indexes(8) stuffed in <code>vindex</code>. If any <code>scale</code> is mentioned then that is also multiplied. Now, in order to test the understanding I wrote a code,</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include &lt;immintrin.h&gt;\nint main()\n{\n    __m256i var, ind_intel;\n    int * arr = (int *) aligned_alloc(sizeof(__m256i), sizeof(int) * 64);\n    int * out = (int *) aligned_alloc(sizeof(__m256i), sizeof(int) * 8);\n    int * ind = (int *) aligned_alloc(sizeof(__m256i), sizeof(int) * 8);\n    int i;\n    ind[0] = 0;ind[1] = 2;ind[2] = 4;ind[3] = 6;ind[4] = 8;ind[5] = 10;ind[6] = 12;ind[7] = 14;\n    ind_intel = _mm256_load_si256((__m256i *)&amp;ind[0]);\n    for(i=0;i&lt;64;i++)\n        arr[i] = i;\n    var = _mm256_i32gather_epi32(arr,ind_intel,1);\n    _mm256_store_si256((__m256i *)&amp;out[0], var);\n    for(i=0;i&lt;8;i++)\n        printf(\"%d \",out[i]);\n    return 0;\n}\n</code></pre>\n\n<p>Now, the <code>__m256i</code> variable <code>ind_intel</code> gets the indices as <code>0,2,..,14</code>. The main array <code>arr</code> is loaded with <code>0,1,..,63</code>. Therefore, gather should load the data as <code>arr[0],arr[2],..,arr[14]</code>. But it is printing the value,</p>\n\n<pre><code>0 65536 1 131072 2 196608 3 262144\n</code></pre>\n\n<p>Definitely, I am missing something big. But I could not found any website or document clearly mentioning the usage of gather. Each one of them repeat the same description as of the official document. Can anyone explain the issue in the code and understanding?</p>\n\n<p>N.B. The code is just for testing purpose.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 6288, "user_id": 5167682, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/2vexc.jpg?s=128&g=1", "display_name": "roottraveller", "link": "https://stackoverflow.com/users/5167682/roottraveller"}, "edited": false, "score": 1, "creation_date": 1573628670, "post_id": 58831754, "comment_id": 103938995, "body": "for start <code>int arrayindex;</code> is not initialized"}], "answers": [{"tags": [], "owner": {"reputation": 488, "user_id": 12199970, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-o1lnLQaFIl4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd-DeKatHNuf7q7OLUjUujB8yO-xQ/photo.jpg?sz=128", "display_name": "Venkatesh Nandigama", "link": "https://stackoverflow.com/users/12199970/venkatesh-nandigama"}, "is_accepted": false, "score": 0, "last_activity_date": 1573628547, "creation_date": 1573628547, "answer_id": 58831862, "question_id": 58831754, "link": "https://stackoverflow.com/questions/58831754/how-can-i-search-for-the-number-in-the-array/58831862#58831862", "title": "How can I search for the number in the array?", "body": "<p>You can only conclude the number is not the list, after checking with all elements\nremove else from for loop. </p>\n\n<pre><code>    else\n        {\n            printf(\"The number you entered is not in the array\");\n            break;\n        }\n</code></pre>\n\n<p>write printf(\"not found\") after the loop, and write return in if</p>\n"}, {"tags": [], "owner": {"reputation": 6288, "user_id": 5167682, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/2vexc.jpg?s=128&g=1", "display_name": "roottraveller", "link": "https://stackoverflow.com/users/5167682/roottraveller"}, "is_accepted": false, "score": 1, "last_activity_date": 1573628894, "creation_date": 1573628894, "answer_id": 58831938, "question_id": 58831754, "link": "https://stackoverflow.com/questions/58831754/how-can-i-search-for-the-number-in-the-array/58831938#58831938", "title": "How can I search for the number in the array?", "body": "<p>your logic to check-in array is wrong. try this</p>\n\n<pre><code>void arrayresult(int arraylength[], int input_num) {  \n    bool isFound = false;\n\n   // iterate over till you found the  number or reaches end of array\n    for (int i = 0; i &lt; 10; i++){\n        if (arraylength[i] == input_num){\n            isFound = true;\n            break;\n        }\n     }\n\n     if(isFound == true) {\n         printf(\"The number you entered is in the array\");\n      }else{\n            printf(\"The number you entered is not in the array\");\n        }\n\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 65, "user_id": 9887026, "user_type": "registered", "profile_image": "https://graph.facebook.com/1359959924148760/picture?type=large", "display_name": "Jung Jae Won", "link": "https://stackoverflow.com/users/9887026/jung-jae-won"}, "edited": false, "score": 0, "creation_date": 1573629192, "post_id": 58831966, "comment_id": 103939184, "body": "Oh, I got it! Thanks for your help!"}, {"owner": {"reputation": 140, "user_id": 11269833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/corD7.jpg?s=128&g=1", "display_name": "ratsafalig", "link": "https://stackoverflow.com/users/11269833/ratsafalig"}, "reply_to_user": {"reputation": 65, "user_id": 9887026, "user_type": "registered", "profile_image": "https://graph.facebook.com/1359959924148760/picture?type=large", "display_name": "Jung Jae Won", "link": "https://stackoverflow.com/users/9887026/jung-jae-won"}, "edited": false, "score": 0, "creation_date": 1573629276, "post_id": 58831966, "comment_id": 103939213, "body": "by the way, your arrayindex never initialized"}], "tags": [], "owner": {"reputation": 140, "user_id": 11269833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/corD7.jpg?s=128&g=1", "display_name": "ratsafalig", "link": "https://stackoverflow.com/users/11269833/ratsafalig"}, "is_accepted": false, "score": 0, "last_activity_date": 1573629006, "creation_date": 1573629006, "answer_id": 58831966, "question_id": 58831754, "link": "https://stackoverflow.com/questions/58831754/how-can-i-search-for-the-number-in-the-array/58831966#58831966", "title": "How can I search for the number in the array?", "body": "<pre><code>    void arrayresult(int arraylength[], int &amp;input_num)\n    {   \n        for (int i = 0; i &lt; 10; i++)\n        {\n            if (arraylength[i] == input_num)\n            {\n                printf(\"The number you entered is in the array\");\n                break;\n            }\n\n            else\n            {\n                printf(\"The number you entered is not in the array\");\n                break;\n            }\n        }\n    }\n</code></pre>\n\n<p>in this for loop,if your input not match the arraylength[0],</p>\n\n<p>then your method immediately print 'the number you entered is not in the array'</p>\n\n<p>and then break the for loop,so you never get the chance to compare the rest of your array to input_num</p>\n"}, {"tags": [], "owner": {"reputation": 143, "user_id": 8381663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b026e362a85b2a7b3241b0e1b95b6369?s=128&d=identicon&r=PG&f=1", "display_name": "BrianChen", "link": "https://stackoverflow.com/users/8381663/brianchen"}, "is_accepted": false, "score": 0, "last_activity_date": 1573629139, "creation_date": 1573629139, "answer_id": 58831996, "question_id": 58831754, "link": "https://stackoverflow.com/questions/58831754/how-can-i-search-for-the-number-in-the-array/58831996#58831996", "title": "How can I search for the number in the array?", "body": "<p>This code might help you.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\nvoid arrayresult(int arraylength[], int input_num)\n{   \n    for (int i = 0; i &lt; 10; i++)\n    {\n        if (arraylength[i] == input_num)\n        {\n            printf(\"The number you entered is in the array\");\n            return;\n        }\n    }\n    printf(\"The number you entered is not in the array\");\n}\n\nint main(void)\n{\n    int input_num;\n    int arraylength[10];\n    int i = 0;\n\n    srand(time(NULL));\n\n    for (i = 0; i &lt; 10; i++)\n    {\n        arraylength[i] = rand() % (99 + 1 - 11) + 11;\n        printf(\"A[%d]: %d \", i + 1, arraylength[i]);\n    }\n\n    printf(\"\\n\");\n    printf(\"Enter the number you want to search: \");\n    scanf(\"%d\", &amp;input_num);\n\n    arrayresult(arraylength, input_num);\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 219, "user_id": 8198361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6261d06afb1d50c3759e956bf36438f?s=128&d=identicon&r=PG", "display_name": "Lily AB", "link": "https://stackoverflow.com/users/8198361/lily-ab"}, "edited": false, "score": 1, "creation_date": 1573630446, "post_id": 58832101, "comment_id": 103939750, "body": "Hello @VJAYSLN, <code>input_num</code> is being passed as an integer, but the function is defined to accept the address of  <code>input_num</code> (<code>void arrayresult(int arraylength[], int &amp;input_num)</code>)....the definition of the function needs to be corrected as well. Secondly since <code>arrayindex</code> is declared as an automatic variable, it would be worthwhile to initialize it with a value (0 in this case)......"}, {"owner": {"reputation": 453, "user_id": 12212950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d93f9b746b6b7988fb224d49ba07c9c?s=128&d=identicon&r=PG&f=1", "display_name": "VJAYSLN", "link": "https://stackoverflow.com/users/12212950/vjaysln"}, "reply_to_user": {"reputation": 219, "user_id": 8198361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6261d06afb1d50c3759e956bf36438f?s=128&d=identicon&r=PG", "display_name": "Lily AB", "link": "https://stackoverflow.com/users/8198361/lily-ab"}, "edited": false, "score": 0, "creation_date": 1573631012, "post_id": 58832101, "comment_id": 103940026, "body": "Hi @LilyAB, Thanks for your corrections. Eventhough, these corrections not impact on the ouputs, these may affect the standards."}], "tags": [], "owner": {"reputation": 453, "user_id": 12212950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d93f9b746b6b7988fb224d49ba07c9c?s=128&d=identicon&r=PG&f=1", "display_name": "VJAYSLN", "link": "https://stackoverflow.com/users/12212950/vjaysln"}, "is_accepted": true, "score": 0, "last_activity_date": 1573630887, "last_edit_date": 1573630887, "creation_date": 1573629615, "answer_id": 58832101, "question_id": 58831754, "link": "https://stackoverflow.com/questions/58831754/how-can-i-search-for-the-number-in-the-array/58832101#58832101", "title": "How can I search for the number in the array?", "body": "<p>Simply,Your program tend to check only the first index of the arraylength with that input number. If its fails you are out of the for loop. Time to know about the uses of flag variable. If Flag is set, the number is already found, and don't wants to check again. If Flag is unset, the number is not found.    </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\nvoid arrayresult(int arraylength[], int input_num)\n{   \n    int flag = 0;\n    for (int i = 0; i &lt; 10; i++)\n    {\n        if (arraylength[i] == input_num)\n        {\n            printf(\"The number you entered is in the array\");\n            flag = 1;\n            break;\n        }\n\n\n    }\nif (flag == 0)\n        {\n            printf(\"The number you entered is not in the array\");\n        }\n}\n\nint main(void)\n{\n    int input_num;\n    int arrayindex = 0;\n    int arraylength[10];\n    int i = 0;\n\n    srand(time(NULL));\n\n    for (i = 0; i &lt; 10; i++)\n    {\n        arrayindex += 1;\n        arraylength[i] = rand() % (99 + 1 - 11) + 11;\n        printf(\"A[%d]: %d \", arrayindex, arraylength[i]);\n    }\n\n\n    printf(\"\\n\");\n    printf(\"Enter the number you want to search: \");\n    scanf(\"%d\", &amp;input_num);\n\n    arrayresult(arraylength, input_num);\n\n    return 0;\n}\n</code></pre>\n\n<p>Hope this might helps : )</p>\n"}], "owner": {"reputation": 65, "user_id": 9887026, "user_type": "registered", "profile_image": "https://graph.facebook.com/1359959924148760/picture?type=large", "display_name": "Jung Jae Won", "link": "https://stackoverflow.com/users/9887026/jung-jae-won"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 58832101, "answer_count": 5, "score": 1, "last_activity_date": 1573630887, "creation_date": 1573628078, "last_edit_date": 1573628233, "question_id": 58831754, "link": "https://stackoverflow.com/questions/58831754/how-can-i-search-for-the-number-in-the-array", "title": "How can I search for the number in the array?", "body": "<ol>\n<li>I have to get user input and search for the user input in the array</li>\n<li>If there is the number that is exactly matching with user input then I have to display \"The number you entered is in the array\"</li>\n<li>If there is no number matching in array then I'm required to display \"The number you entered is not in the array\"</li>\n</ol>\n\n<p>but currently I am experiencing the wrong output, I have double checked that user input was in the array but the result displayed as \"no number matching\".</p>\n\n<p>How can I solve this problem?</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n    #include &lt;stdlib.h&gt;\n    #include &lt;time.h&gt;\n\n    void arrayresult(int arraylength[], int &amp;input_num)\n    {   \n        for (int i = 0; i &lt; 10; i++)\n        {\n            if (arraylength[i] == input_num)\n            {\n                printf(\"The number you entered is in the array\");\n                break;\n            }\n\n            else\n            {\n                printf(\"The number you entered is not in the array\");\n                break;\n            }\n        }\n    }\n\n    int main(void)\n    {\n        int input_num;\n        int arrayindex;\n        int arraylength[10];\n        int i = 0;\n\n        srand(time(NULL));\n\n        for (i = 0; i &lt; 10; i++)\n        {\n            arrayindex += 1;\n            arraylength[i] = rand() % (99 + 1 - 11) + 11;\n            printf(\"A[%d]: %d \", arrayindex, arraylength[i]);\n        }\n\n\n        printf(\"\\n\");\n        printf(\"Enter the number you want to search: \");\n        scanf(\"%d\", &amp;input_num);\n\n        arrayresult(arraylength, input_num);\n\n        return 0;\n    }\n</code></pre>\n"}, {"tags": ["c", "visual-studio-2015", "io", "compilation"], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 3604853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e02a25ba9a2d67117f0006b253472193?s=128&d=identicon&r=PG&f=1", "display_name": "just_a_user", "link": "https://stackoverflow.com/users/3604853/just-a-user"}, "edited": false, "score": 0, "creation_date": 1573627184, "post_id": 58831522, "comment_id": 103938457, "body": "Thank you for the response. So this is something that needs to be changed/enabled on the PC itself. Since what I&#39;m working on is expected to run on many PCs, is there some option within VS for this project?"}, {"owner": {"reputation": 1605, "user_id": 11723965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3ygAu.jpg?s=128&g=1", "display_name": "nivpeled", "link": "https://stackoverflow.com/users/11723965/nivpeled"}, "reply_to_user": {"reputation": 67, "user_id": 3604853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e02a25ba9a2d67117f0006b253472193?s=128&d=identicon&r=PG&f=1", "display_name": "just_a_user", "link": "https://stackoverflow.com/users/3604853/just-a-user"}, "edited": false, "score": 0, "creation_date": 1573627694, "post_id": 58831522, "comment_id": 103938631, "body": "@just_a_user not sure; you may code your application such that it access and modifies the relevant registry entries. not sure if this is advised though"}], "tags": [], "owner": {"reputation": 1605, "user_id": 11723965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3ygAu.jpg?s=128&g=1", "display_name": "nivpeled", "link": "https://stackoverflow.com/users/11723965/nivpeled"}, "is_accepted": true, "score": 1, "last_activity_date": 1573626858, "creation_date": 1573626858, "answer_id": 58831522, "question_id": 58831495, "link": "https://stackoverflow.com/questions/58831495/compilation-flag-to-handle-long-path-filename-in-i-o-operations-in-visual-studio/58831522#58831522", "title": "Compilation flag to handle long path/filename in I/O operations in Visual Studio", "body": "<p>Try the following:</p>\n\n<blockquote>\n  <p>Local Computer Policy -> Computer Configuration -> Administrative\n  Templates -> System -> Filesystem -> Set \"Enable Win32 long paths\" to\n  Enabled</p>\n</blockquote>\n\n<p>Also:</p>\n\n<blockquote>\n  <p>Starting in Windows 10, version 1607, MAX_PATH limitations have been removed from common Win32 file and directory functions. However, you must opt-in to the new behavior.</p>\n</blockquote>\n\n<p><a href=\"https://docs.microsoft.com/en-us/windows/win32/fileio/naming-a-file\" rel=\"nofollow noreferrer\">read more here.</a></p>\n"}], "owner": {"reputation": 67, "user_id": 3604853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e02a25ba9a2d67117f0006b253472193?s=128&d=identicon&r=PG&f=1", "display_name": "just_a_user", "link": "https://stackoverflow.com/users/3604853/just-a-user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24, "favorite_count": 0, "accepted_answer_id": 58831522, "answer_count": 1, "score": 1, "last_activity_date": 1573626858, "creation_date": 1573626674, "question_id": 58831495, "link": "https://stackoverflow.com/questions/58831495/compilation-flag-to-handle-long-path-filename-in-i-o-operations-in-visual-studio", "title": "Compilation flag to handle long path/filename in I/O operations in Visual Studio", "body": "<p>There's currently a limit to the length of the input file/directory that the Visual Studio I/O operations can handle (not sure if its 180 or 260 or something similar).\nI understood that there's a possible compilation flag (hopefully supported in VS2015) which can help with this issue and increase the max acceptable length for input.</p>\n\n<p>Would appreciate your help in identifying the right flag.</p>\n\n<p>Not sure if 32bit vs 64bit compilation has any effect here as well.</p>\n"}, {"tags": ["c", "arrays", "file", "pointers", "malloc"], "comments": [{"owner": {"reputation": 6031, "user_id": 10871900, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-noQwojQppnY/AAAAAAAAAAI/AAAAAAAAACs/59RU8UyHFSk/photo.jpg?sz=128", "display_name": "dan1st", "link": "https://stackoverflow.com/users/10871900/dan1st"}, "edited": false, "score": 0, "creation_date": 1573625277, "post_id": 58831153, "comment_id": 103937895, "body": "I would recommend you to use a linked list. You may not have a block with that much RAM for this array(maybe multiple blocks)."}, {"owner": {"reputation": 6031, "user_id": 10871900, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-noQwojQppnY/AAAAAAAAAAI/AAAAAAAAACs/59RU8UyHFSk/photo.jpg?sz=128", "display_name": "dan1st", "link": "https://stackoverflow.com/users/10871900/dan1st"}, "edited": false, "score": 0, "creation_date": 1573625362, "post_id": 58831153, "comment_id": 103937917, "body": "And you should test if <code>malloc</code> returns <code>NULL</code>"}, {"owner": {"reputation": 6031, "user_id": 10871900, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-noQwojQppnY/AAAAAAAAAAI/AAAAAAAAACs/59RU8UyHFSk/photo.jpg?sz=128", "display_name": "dan1st", "link": "https://stackoverflow.com/users/10871900/dan1st"}, "edited": false, "score": 1, "creation_date": 1573625484, "post_id": 58831153, "comment_id": 103937959, "body": "And in your example you allocate RAM and store the address of the allocated RAM in the lines array and free it afterwards(you didn&#39;t even use the allocated space)"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 2, "creation_date": 1573625751, "post_id": 58831153, "comment_id": 103938053, "body": "You allocate memory for <code>lines[i]</code> and <code>strcpy</code> into that memory. Then you increment <code>i</code> and call <code>free(lines[i])</code>. As a result, you attempt to free an uninitialized pointer. Simply remove the <code>free(lines[i])</code> for now. It&#39;s good practice to free the memory when you&#39;re done with it, but it&#39;s not absolutely required. The OS will clean up the mess when the program exits."}, {"owner": {"reputation": 124, "user_id": 8300469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/147bb444f1193e83b4dd30e0a87aeddc?s=128&d=identicon&r=PG&f=1", "display_name": "W.Cameron", "link": "https://stackoverflow.com/users/8300469/w-cameron"}, "edited": false, "score": 0, "creation_date": 1573625914, "post_id": 58831153, "comment_id": 103938104, "body": "First, you should specific your platform, which is very sense for C or Cpp. Second, if your program is running on VS,  allocating such a lager memory may be limited by compiler, which you can types the /z command line to VS to support lager memory allocation. Finally, your program allocates line but free it immediately, your compiler may never compile it because optimism."}, {"owner": {"reputation": 124, "user_id": 8300469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/147bb444f1193e83b4dd30e0a87aeddc?s=128&d=identicon&r=PG&f=1", "display_name": "W.Cameron", "link": "https://stackoverflow.com/users/8300469/w-cameron"}, "edited": false, "score": 0, "creation_date": 1573625958, "post_id": 58831153, "comment_id": 103938121, "body": "First, you should specific your platform, which is very sense for C or Cpp. Second, if your program is running on VS,  allocating such a lager memory may be limited by compiler, which you can types the /z command line to VS to support lager memory allocation. Finally, your program allocates line but free it immediately, your compiler may never compile it because optimism."}, {"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 0, "creation_date": 1573627060, "post_id": 58831153, "comment_id": 103938418, "body": "Well, your question misses at least one information: <i>How</i> does it not work? Please take the <a href=\"https://stackoverflow.com/tour\">tour</a> and learn <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>. Then read user3386109&#39;s comment and if it helps you ask her/him kindly to make this an answer and mark it."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1573628078, "post_id": 58831153, "comment_id": 103938775, "body": "Rather than allocate to the size of the buffer, allocate to the size used.  <code>lines[i] = malloc(strlen(buffer) + 1);</code>"}, {"owner": {"reputation": 95, "user_id": 8213053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/662cdb8606d0600bf86a3c79f282dd81?s=128&d=identicon&r=PG&f=1", "display_name": "Santiago", "link": "https://stackoverflow.com/users/8213053/santiago"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1573629536, "post_id": 58831153, "comment_id": 103939333, "body": "@chux-ReinstateMonica could you explain a little more? How different is that from lines[i] = malloc(sizeof(buffer));?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1573629687, "post_id": 58831153, "comment_id": 103939404, "body": "<code>sizeof(buffer)</code> is always 600.  <code>strlen(&quot;Hello world\\n&quot;) + 1</code> is 13"}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 8213053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/662cdb8606d0600bf86a3c79f282dd81?s=128&d=identicon&r=PG&f=1", "display_name": "Santiago", "link": "https://stackoverflow.com/users/8213053/santiago"}, "edited": false, "score": 0, "creation_date": 1573629204, "post_id": 58831717, "comment_id": 103939187, "body": "That made the trick! The problem now is how to free each memory chunk. Would be a good implemention by calling a for loop i times calling free(lines[i]) each iteration? Because as I could see, I can&#39;t make free(lines)."}, {"owner": {"reputation": 132, "user_id": 6066745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NvjLx.jpg?s=128&g=1", "display_name": "hazirovich", "link": "https://stackoverflow.com/users/6066745/hazirovich"}, "reply_to_user": {"reputation": 95, "user_id": 8213053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/662cdb8606d0600bf86a3c79f282dd81?s=128&d=identicon&r=PG&f=1", "display_name": "Santiago", "link": "https://stackoverflow.com/users/8213053/santiago"}, "edited": false, "score": 1, "creation_date": 1573630070, "post_id": 58831717, "comment_id": 103939572, "body": "@Santiago you are correct, you should iterate the lines array and free each entry that you have called malloc previously for. (Notice not to call free on indexes where you didn&#39;t)"}, {"owner": {"reputation": 10846, "user_id": 1673776, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/0llsY.jpg?s=128&g=1", "display_name": "Victor", "link": "https://stackoverflow.com/users/1673776/victor"}, "edited": false, "score": 0, "creation_date": 1573667948, "post_id": 58831717, "comment_id": 103959838, "body": "This approach can still cause problems when you need to allocate high amount of memory, because as someone pointed out here, there may not even be that much contiguous memory available. Yes, <code>10000 * sizeof(char *)</code> which is 80k bytes on a 64 bit machine may work, but be careful with higher amounts."}], "tags": [], "owner": {"reputation": 132, "user_id": 6066745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NvjLx.jpg?s=128&g=1", "display_name": "hazirovich", "link": "https://stackoverflow.com/users/6066745/hazirovich"}, "is_accepted": true, "score": 3, "last_activity_date": 1573627876, "creation_date": 1573627876, "answer_id": 58831717, "question_id": 58831153, "link": "https://stackoverflow.com/questions/58831153/c-insert-lines-from-very-big-file-into-array/58831717#58831717", "title": "C - insert lines from very big file into array", "body": "<p><code>char *lines[10000];</code> is just an array of pointers to the lines, not the array (memory) that is going to store the actual lines.</p>\n\n<p><code>malloc</code> is allocating a chunk of memory for each line, you are suppose to call <code>free</code> only when you are done using this chunk.</p>\n\n<p>If you remove the <code>free</code> your solution would work, but you need to remember to <code>free</code> at some other point.</p>\n"}, {"comments": [{"owner": {"reputation": 95, "user_id": 8213053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/662cdb8606d0600bf86a3c79f282dd81?s=128&d=identicon&r=PG&f=1", "display_name": "Santiago", "link": "https://stackoverflow.com/users/8213053/santiago"}, "edited": false, "score": 0, "creation_date": 1573629757, "post_id": 58831763, "comment_id": 103939436, "body": "So, you say that it would be best to directly allocate the variable dynamically and expand the chunk as I need? Also, why **? Sorry if it&#39;s a basic question, but I have just a couple of weeks of learning"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 95, "user_id": 8213053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/662cdb8606d0600bf86a3c79f282dd81?s=128&d=identicon&r=PG&f=1", "display_name": "Santiago", "link": "https://stackoverflow.com/users/8213053/santiago"}, "edited": false, "score": 0, "creation_date": 1573630258, "post_id": 58831763, "comment_id": 103939677, "body": "@Santiago The <code>**</code> is because you need a &quot;pointer to pointer to char&quot; so that you can use it as an array of &quot;pointers to char&quot;."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 95, "user_id": 8213053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/662cdb8606d0600bf86a3c79f282dd81?s=128&d=identicon&r=PG&f=1", "display_name": "Santiago", "link": "https://stackoverflow.com/users/8213053/santiago"}, "edited": false, "score": 0, "creation_date": 1573630591, "post_id": 58831763, "comment_id": 103939816, "body": "@Santiago yes, I would start by allocating e.g. 1000 char-pointers. If I later found out the file was larger, I would use <code>realloc</code> to increase the size of allocated memory. Anyway - start by fixing the case where you allocate &quot;a big chunck&quot;. When that works move on to implement the <code>realloc</code> solution"}, {"owner": {"reputation": 10846, "user_id": 1673776, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/0llsY.jpg?s=128&g=1", "display_name": "Victor", "link": "https://stackoverflow.com/users/1673776/victor"}, "edited": false, "score": 0, "creation_date": 1573630860, "post_id": 58831763, "comment_id": 103939955, "body": "You should also include a linked list solution here. Reallocating that much memory is for sure a problem."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 10846, "user_id": 1673776, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/0llsY.jpg?s=128&g=1", "display_name": "Victor", "link": "https://stackoverflow.com/users/1673776/victor"}, "edited": false, "score": 0, "creation_date": 1573631316, "post_id": 58831763, "comment_id": 103940178, "body": "@Victor notice that reallocation are only needed for the array of pointers (i.e. <code>lines</code>). The individual line do not need reallocation. So even with 1.000.000 lines, it&#39;s just a few MB which shouldn&#39;t be a problem. And reallocation shall not increment the size by 1 but with a larger value so that the number of reallocations will be small."}, {"owner": {"reputation": 95, "user_id": 8213053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/662cdb8606d0600bf86a3c79f282dd81?s=128&d=identicon&r=PG&f=1", "display_name": "Santiago", "link": "https://stackoverflow.com/users/8213053/santiago"}, "edited": false, "score": 0, "creation_date": 1573664282, "post_id": 58831763, "comment_id": 103958063, "body": "I&#39;ve implemented your solution and it worked! Now I&#39;ve got to figure out how to reallocate the memory according to the input file. I need to ask you just one more thing: how do I know the size I reserve for **lines?. I tried with a 147 lines file, and char **lines = malloc(1 * sizeof *lines);  for example just worked fine. I&#39;m a bit confused as how this works."}], "tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": false, "score": 1, "last_activity_date": 1573630432, "last_edit_date": 1573630432, "creation_date": 1573628107, "answer_id": 58831763, "question_id": 58831153, "link": "https://stackoverflow.com/questions/58831153/c-insert-lines-from-very-big-file-into-array/58831763#58831763", "title": "C - insert lines from very big file into array", "body": "<blockquote>\n  <p>And I need to get this work with a 100.000 lines file with variable length lines,</p>\n  \n  <p>So, how could I declare a very large array so I can pass each line? </p>\n</blockquote>\n\n<p>This line</p>\n\n<pre><code>char *lines[10000];\n</code></pre>\n\n<p>gives you a variable with automatic storage duration - often called a local variable.</p>\n\n<p>On most systems such a variable are located on a stack and most systems have a fixed limit for the size of the stack and thereby also a limit for the size of such a local variable.</p>\n\n<p>So if you change the code to</p>\n\n<pre><code>char *lines[1000000];\n</code></pre>\n\n<p>to be able to handle larger files, it is likely that the variable use too much memory on the stack, i.e. you have a stack overflow.</p>\n\n<p>A simple solution is to allocate the variable dynamically. Like:</p>\n\n<pre><code>char **lines = malloc(1000000 * sizeof *lines);\n</code></pre>\n\n<p>This will allocate 1000000 char-pointers and you can use <code>lines</code> as if it's an array - for instance like:</p>\n\n<pre><code>lines[i] = malloc(sizeof(buffer));\n</code></pre>\n\n<p>For something like this I'll also recommend that you take a look at <code>realloc</code> so that you can adjust the size of memory as needed.</p>\n\n<p>Besides that your use of <code>free</code> seems strange and it's for sure wrong as you increment <code>i</code> between the <code>malloc</code> and the <code>free</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1573653583, "post_id": 58832670, "comment_id": 103951777, "body": "Using <code>realloc()</code> to increment the size by 1 tends to lead to quadratic behaviour as the memory is often copied from the smaller space to the larger space.  It is generally better to track two numbers \u2014 the number of pointers allocated and the number used.  When the number of pointers used would exceed the number allocated, double the number of pointers allocated (making sure 0 doesn&#39;t &quot;double&quot; to 0 \u2014 I often use 2N+2).  If you&#39;re worried about the space used, you can free the unwanted pointers when the loop ends with a shrinking <code>realloc()</code>."}, {"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1573661139, "post_id": 58832670, "comment_id": 103956233, "body": "@JonathanLeffler That&#39;s what I meant by &quot;will scale bad&quot; and considering the experience level of the OP I didn&#39;t want to go deeper."}], "tags": [], "owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "is_accepted": false, "score": 1, "last_activity_date": 1573632144, "creation_date": 1573632144, "answer_id": 58832670, "question_id": 58831153, "link": "https://stackoverflow.com/questions/58831153/c-insert-lines-from-very-big-file-into-array/58832670#58832670", "title": "C - insert lines from very big file into array", "body": "<p>You can allocate any space just as big as you need. So you will get rid of the fixed and limited numbers. </p>\n\n<p>I have \"massaged\" your example in this way. The only thing I didn't is a first round through the file to obtain the longest line. So I kept the fixed buffer length.</p>\n\n<ol>\n<li>Allocate only as many pointer to the lines as you need. For this you define a pointer to pointers to <code>char</code>.</li>\n<li>Allocate only as many characters for each line as you need. This is done most conveniently with the function <code>strdup()</code>. If your library doesn't have it (it is not standard) you can replace it with the right combination of <code>strlen()</code>, <code>malloc()</code>, and <code>strcpy()</code>. How to do this is left as an exercise for you. ;-)</li>\n<li>Handle allocation errors, especially if you plan to read huge files.</li>\n<li>Free the allocated memories blocks, the sequence for the lines is not important. But <code>lines</code> has to be kept until all <code>lines[*]</code> are freed.</li>\n</ol>\n\n<p>This is the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n    FILE *file;\n    file = fopen(\"test.txt\", \"r\");\n    char buffer[600];\n    char **lines = NULL;\n    int i = 0;\n\n    while (fgets(buffer, sizeof(buffer), file))\n    {\n        lines = realloc(lines, (i + 1) * sizeof (char*));\n        if (lines == NULL)\n        {\n            // any error handling you like...\n            return EXIT_FAILURE;\n        }\n        lines[i] = strdup(buffer);\n        if (lines[i] == NULL)\n        {\n            // any error handling you like...\n            return EXIT_FAILURE;\n        }\n        i++;\n    }\n\n    fclose(file);\n\n    // work with the lines\n\n    for (int j = 0; j &lt; i; ++j)\n    {\n        free(lines[j]);\n    }\n    free(lines);\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>Some notes:</p>\n\n<ul>\n<li>Because of the <code>realloc()</code> on each line the run time of you program will scale bad for files with a giant number of lines. To improve this you might like to use some better algorithm, for example by allocating in steps of growing numbers. But this is a completely different issue.</li>\n<li>You don't need to free allocated memory yourself at all if you need the memory until the end of the program. The C runtime will then free the memory automatically.</li>\n</ul>\n"}], "owner": {"reputation": 95, "user_id": 8213053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/662cdb8606d0600bf86a3c79f282dd81?s=128&d=identicon&r=PG&f=1", "display_name": "Santiago", "link": "https://stackoverflow.com/users/8213053/santiago"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 58831717, "answer_count": 3, "score": 2, "last_activity_date": 1573632144, "creation_date": 1573624912, "last_edit_date": 1573628703, "question_id": 58831153, "link": "https://stackoverflow.com/questions/58831153/c-insert-lines-from-very-big-file-into-array", "title": "C - insert lines from very big file into array", "body": "<p>First of all, I'm quite new with C, and I know this is a very repeated question, however, I could not find anything that could help me with my problem.</p>\n\n<p>Here is my code:\nIt takes a text file and stores each line in an array.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n    FILE *file;\n    file = fopen(\"test.txt\", \"r\");\n    char buffer[600];\n    char *lines[10000];\n    int i = 0;\n\n    while(fgets(buffer, sizeof(buffer), file))\n    {\n\n        lines[i] = malloc(sizeof(buffer));\n        strcpy(lines[i], buffer);\n        i++;\n        free(lines[i]);\n    }\n\n    fclose(file);\n\n\n    return 1;\n}\n\n</code></pre>\n\n<p>This works fine for small text files.</p>\n\n<p>However it doesn't with large ones (even setting buffer and lines with much bigger numbers). Actually, if I increment buffer[] and *lines[] like 1000000 bytes, it doesn't give anything (if I understood well, it gives undefined behaviour). And I need to get this work with a 100.000 lines file with variable length lines,</p>\n\n<p>So, how could I declare a very large array so I can pass each line? Since, as I exposed, it doesn't work with a large file.</p>\n\n<p>Any help is appreciated!</p>\n"}, {"tags": ["c", "assembly", "x86-64", "abi"], "comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1573622089, "post_id": 58830670, "comment_id": 103937062, "body": "Why don&#39;t you just use a debugger like a normal person instead of hoping that GCC doesn&#39;t clobber the incoming RAX with your inline-asm hack?  Or write the function in pure asm."}, {"owner": {"reputation": 23069, "user_id": 2786156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/fWMLm.jpg?s=128&g=1", "display_name": "St.Antario", "link": "https://stackoverflow.com/users/2786156/st-antario"}, "reply_to_user": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1573622151, "post_id": 58830670, "comment_id": 103937076, "body": "@RaymondChen <code>n</code> is supposed to be on the stack."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1573622202, "post_id": 58830670, "comment_id": 103937090, "body": "It&#39;s the 7th FP arg, it&#39;s in XMM7.  Unlike Windows x64, integer args don&#39;t steal register slots from FP args and vice versa."}, {"owner": {"reputation": 23069, "user_id": 2786156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/fWMLm.jpg?s=128&g=1", "display_name": "St.Antario", "link": "https://stackoverflow.com/users/2786156/st-antario"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1573622208, "post_id": 58830670, "comment_id": 103937093, "body": "@PeterCordes Can it clobber the incoming RAX? If it does would not it break the ABI?"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 2, "creation_date": 1573622330, "post_id": 58830670, "comment_id": 103937127, "body": "I think the figure 3.32 is totally b0rked. There is no mention of <code>z</code> for example, and it says that &quot;Only named __m256 and __m512 arguments may be passed in register&quot; and it then shows a vararg __m256 being passed in a register..."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1573622521, "post_id": 58830670, "comment_id": 103937175, "body": "Yes, sure it can.  It can generate any code it wants to between checking incoming AL and the code for your inline asm statement.  e.g. with optimization disabled, it will set up a stack frame and spill the fixed args to the stack.  It probably doesn&#39;t modify RAX but it&#39;s not in general a safe assumption.  Setting a breakpoint with a debugger would be vastly easier, and so would <code>asm(&quot;func: ret&quot;);</code> at global scope."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1573622523, "post_id": 58830670, "comment_id": 103937177, "body": "Ok, I found a better one: <a href=\"https://www.uclibc.org/docs/psABI-x86_64.pdf\" rel=\"nofollow noreferrer\">uclibc.org/docs/psABI-x86_64.pdf</a> - different 3.32"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1573622634, "post_id": 58830670, "comment_id": 103937202, "body": "Strange that the paper I found <i>predates</i> in versions, maybe they somehow messed up the revisions :P"}, {"owner": {"reputation": 23069, "user_id": 2786156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/fWMLm.jpg?s=128&g=1", "display_name": "St.Antario", "link": "https://stackoverflow.com/users/2786156/st-antario"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1573622760, "post_id": 58830670, "comment_id": 103937227, "body": "@AnttiHaapala It seems they introduced the bug in newer version when trying to add an example with <code>__m512</code>. Anyway, should <code>rax</code> really contain <code>3</code>?"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1573622768, "post_id": 58830670, "comment_id": 103937231, "body": "@AnttiHaapala: that older version of the ABI predates <code>__m512</code>.  The version linked in the question is the (still current I think) 1.0 version.  If they introduced bogus wording, check <a href=\"https://github.com/hjl-tools/x86-psABI/tree/hjl/master\" rel=\"nofollow noreferrer\">github.com/hjl-tools/x86-psABI/tree/hjl/master</a> for the change in the LaTeX source; there&#39;s also a discussion forum for the ABI; there&#39;s probably a message somewhere about the reason for the change."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1573623050, "post_id": 58830670, "comment_id": 103937303, "body": "@PeterCordes hmm <a href=\"https://github.com/hjl-tools/x86-psABI/blame/hjl/master/low-level-sys-info.tex#L661\" rel=\"nofollow noreferrer\">github.com/hjl-tools/x86-psABI/blame/hjl/master/&hellip;</a> the blame is not helpful at all..."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1573623382, "post_id": 58830670, "comment_id": 103937386, "body": "@AnttiHaapala: I don&#39;t see a variadic <code>__m256</code> passed in regs.  ymm1 and zmm2 are fixed args and <code>y</code> is on the stack.  I do see that they failed to update 3.32 to include <code>z</code> on the stack, though, at 64.  Since <code>al</code> is supposed to be the <i>total</i> number of args in vector regs (including the fixed args), the correct value is <code>4</code> in the updated ABI (with a <code>__m512</code> fixed args), and <code>3</code> in the older ABI."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1573623590, "post_id": 58830670, "comment_id": 103937437, "body": "oops sorry, wrong link above, should have been <a href=\"https://github.com/hjl-tools/x86-psABI/blame/hjl/master/low-level-sys-info.tex#L2076\" rel=\"nofollow noreferrer\">github.com/hjl-tools/x86-psABI/blame/hjl/master/&hellip;</a> line 2076"}, {"owner": {"reputation": 23069, "user_id": 2786156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/fWMLm.jpg?s=128&g=1", "display_name": "St.Antario", "link": "https://stackoverflow.com/users/2786156/st-antario"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1573623603, "post_id": 58830670, "comment_id": 103937441, "body": "@PeterCordes Why does GCC use the value <code>2</code> for the older ABI?"}], "answers": [{"tags": [], "owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": true, "score": 3, "last_activity_date": 1573624966, "creation_date": 1573624966, "answer_id": 58831164, "question_id": 58830670, "link": "https://stackoverflow.com/questions/58830670/vararg-x86-64-abi-number-of-floating-point-parameters-in-registers/58831164#58831164", "title": "Vararg x86-64 ABI. Number of floating point parameters in registers", "body": "<p>The ABI doc has an error: it should be <code>al=4</code> for that example.  This figure only got partially updated when adding AVX512 <code>__m512</code>; it was previously correct with <code>al=3</code>, e.g. <a href=\"https://www.uclibc.org/docs/psABI-x86_64.pdf\" rel=\"nofollow noreferrer\">in the 0.99.7 revision of the ABI</a> without the fixed <code>__m512</code> arg.</p>\n\n<p>@AnttiHaapala is correct that they also failed to update 3.32 to show <code>z</code> on the stack, at <code>64:</code>.</p>\n\n<p><code>al</code> is supposed to be the <em>total</em> number of args in vector regs (including the fixed args).  <strong>This includes <em>any</em> arg in XMM registers, whether it's scalar or <code>__m128</code> (which <em>can</em> be passed as variadic).</strong>  Or for fixed args, also including <code>__m256</code> and <code>__m512</code>.  (Wide vectors are passed on the stack for variadic functions; variadic functions that (might) use <code>va_arg</code> on a <code>__m256</code> don't need dump all the YMM regs, still only XMM.  There is very little use-case for passing variadic SIMD vectors.)</p>\n\n<p>But note that 80-bit <code>long double ld</code> is <em>not</em> passed in an XMM register.  SSE/AVX instructions can't do anything with 80-bit x87 extended precision data so forcing functions to copy it to/from an XMM reg and then back into an x87 stack reg makes no sense.</p>\n\n<hr>\n\n<p>Note that the upper bytes of RAX must be ignored by the callee.  It's often convenient for the caller to <code>mov eax, 3</code> instead of just <code>mov al,3</code> to avoid the possibility of false dependencies; the ABI doc's diagram is based on GCC's normal behaviour and should actually say <code>%al</code>, not <code>%rax</code></p>\n\n<hr>\n\n<blockquote>\n  <p>Why does GCC use the value 2 for older ABI?</p>\n</blockquote>\n\n<p><strong>Because you forgot to actually enable AVX (and AVX512) when compiling.</strong></p>\n\n<p>The ABI doc assumes that <code>__m256</code> variables will only be used on machines with YMM registers (AVX support) so they can be passed in registers.</p>\n\n<p>If you get this wrong, GCC warns you about it:</p>\n\n<pre><code>&lt;source&gt;: In function 'void caller()':\n&lt;source&gt;:11:9: warning: AVX vector argument without AVX enabled changes the ABI [-Wpsabi]\n   11 |    func (a, m, u, v, b, ld, y, z, n);\n      |    ~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\n&lt;source&gt;:11:9: note: the ABI for passing parameters with 32-byte alignment has changed in GCC 4.6\n&lt;source&gt;:11:9: warning: AVX512F vector argument without AVX512F enabled changes the ABI [-Wpsabi]\n</code></pre>\n\n<p>Compiling with <code>gcc -O3</code> gives that warning and includes <code>mov eax,2</code> in the asm for a <code>caller()</code> containing the <code>func()</code> call from the ABI doc.</p>\n\n<p>Compiling with <code>gcc -O3 -march=skylake-avx512</code> (or <code>-mavx512f</code>) gives <code>4</code>.  Or <code>3</code> if you were to leave out one of the args that go into a vector register.</p>\n\n<p>It's usually a safe bet that GCC correctly implements the ABI so you can just look at its code to see what happens.  Constructing a convoluted way to actually <em>print</em> RAX is way more complicated, and stopped you from noticing that your code wasn't using AVX512.</p>\n\n<pre><code>void caller() {\n   func (a, m, u, v, b, ld, y, z, n);\n}\n</code></pre>\n\n<p>compiles properly to this asm (<strong><a href=\"https://godbolt.org/#g:!((g:!((g:!((g:!((h:codeEditor,i:(fontScale:14,j:1,lang:c%2B%2B,source:&#39;%23include+%3Cimmintrin.h%3E%0A%0Aint+a,+b%3B%0Along+double+ld%3B%0Adouble+m,+n%3B%0A__m256+u,+y%3B%0A__m512+v,+z%3B%0Aextern+void+func+(int+a,+double+m,+__m256+u,+__m512+v,+...)%3B%0A%0Avoid+caller()+%7B%0A+++func+(a,+m,+u,+v,+b,+ld,+y,+z,+n)%3B%0A%7D%0A&#39;),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;C%2B%2B+source+%231&#39;,t:&#39;0&#39;)),k:42.952380952380956,l:&#39;4&#39;,m:48.25699116408237,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;),(g:!((h:compiler,i:(compiler:g92,filters:(b:&#39;0&#39;,binary:&#39;1&#39;,commentOnly:&#39;0&#39;,demangle:&#39;0&#39;,directives:&#39;0&#39;,execute:&#39;1&#39;,intel:&#39;0&#39;,libraryCode:&#39;1&#39;,trim:&#39;1&#39;),fontScale:14,lang:c%2B%2B,libs:!(),options:&#39;-O3+-march%3Dskylake-avx512&#39;,source:1),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;x86-64+gcc+9.2+(Editor+%231,+Compiler+%232)+C%2B%2B&#39;,t:&#39;0&#39;)),header:(),l:&#39;4&#39;,m:51.74300883591763,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;)),k:42.952380952380956,l:&#39;3&#39;,n:&#39;0&#39;,o:&#39;&#39;,t:&#39;0&#39;),(g:!((g:!((h:compiler,i:(compiler:g92,filters:(b:&#39;0&#39;,binary:&#39;1&#39;,commentOnly:&#39;0&#39;,demangle:&#39;0&#39;,directives:&#39;0&#39;,execute:&#39;1&#39;,intel:&#39;0&#39;,libraryCode:&#39;1&#39;,trim:&#39;1&#39;),fontScale:14,lang:c%2B%2B,libs:!(),options:&#39;-O3&#39;,source:1),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;x86-64+gcc+9.2+(Editor+%231,+Compiler+%231)+C%2B%2B&#39;,t:&#39;0&#39;)),header:(),k:50.59396531242576,l:&#39;4&#39;,m:63.822629969418955,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;),(g:!((h:output,i:(compiler:1,editor:1,fontScale:14,wrap:&#39;1&#39;),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;%231+with+x86-64+gcc+9.2&#39;,t:&#39;0&#39;)),header:(),l:&#39;4&#39;,m:36.177370030581045,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;)),k:57.047619047619044,l:&#39;3&#39;,n:&#39;0&#39;,o:&#39;&#39;,t:&#39;0&#39;)),l:&#39;2&#39;,n:&#39;0&#39;,o:&#39;&#39;,t:&#39;0&#39;)),version:4\" rel=\"nofollow noreferrer\">Godbolt, gcc9.2 <code>-O3 -march=skylake-avx512</code></a></strong>):</p>\n\n<pre><code>caller():\n        lea     r10, [rsp+8]\n        and     rsp, -64                # align the stack by 64\n        push    QWORD PTR [r10-8]\n        mov     eax, 4                  # AL = 4 args in vector regs\n        push    rbp\n        mov     rbp, rsp                # frame pointer for some reason?\n        push    r10\n        sub     rsp, 152                # reserve space for args\n        vmovaps zmm4, ZMMWORD PTR z[rip]\n        vmovaps ymm5, YMMWORD PTR y[rip]\n        vmovaps ZMMWORD PTR [rsp+48], zmm4\n        vmovaps YMMWORD PTR [rsp+16], ymm5  # copy the variadic wide vectors to their slots\n        push    QWORD PTR ld[rip+8]\n        vmovsd  xmm3, QWORD PTR n[rip]      # n passed in xmm3\n        mov     esi, DWORD PTR b[rip]       # b passed in ESI\n        push    QWORD PTR ld[rip]           # low half of 16-byte  ld\n        vmovaps zmm2, ZMMWORD PTR v[rip]\n        vmovaps ymm1, YMMWORD PTR u[rip]    # fixed args passed in x/y/zmm0..2\n        vmovsd  xmm0, QWORD PTR m[rip]\n        mov     edi, DWORD PTR a[rip]       # a passed in EDI\n\n        call    func(int, double, float __vector(8), float __vector(16), ...)\n\n        mov     r10, QWORD PTR [rbp-8]\n        sub     rsp, -128\n        leave\n        lea     rsp, [r10-8]                 # stack-alignment cleanup\n        ret\n</code></pre>\n\n<p>4 args in vector regs, AL = 4.</p>\n"}], "owner": {"reputation": 23069, "user_id": 2786156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/fWMLm.jpg?s=128&g=1", "display_name": "St.Antario", "link": "https://stackoverflow.com/users/2786156/st-antario"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 1, "accepted_answer_id": 58831164, "answer_count": 1, "score": 2, "last_activity_date": 1573624966, "creation_date": 1573621792, "question_id": 58830670, "link": "https://stackoverflow.com/questions/58830670/vararg-x86-64-abi-number-of-floating-point-parameters-in-registers", "title": "Vararg x86-64 ABI. Number of floating point parameters in registers", "body": "<p>I'm looking at <a href=\"https://github.com/hjl-tools/x86-psABI/wiki/x86-64-psABI-1.0.pdf\" rel=\"nofollow noreferrer\"><code>x86-64</code> ABI</a> and have a question about the example in <code>Figure 3.31</code> and <code>Figure 3.32</code>:</p>\n\n<pre><code>int a, b;\nlong double ld;\ndouble m, n;\n__m256 u, y;\n__m512 v, z;\nextern void func (int a, double m, __m256 u, __m512 v, ...);\nfunc (a, m, u, v, b, ld, y, z, n);\n</code></pre>\n\n<p>It was said that when passing arguments to the <code>func</code> function <code>%rax</code> contained 3, but I could see only 2 floating point values passed in registers: <code>ld</code> and <code>m</code>. So I implemented the following example:</p>\n\n<p><code>impl.c</code>:</p>\n\n<pre><code>#include &lt;immintrin.h&gt;\n\nunsigned long func(int a, double m, __m256 u, __m512 v, ...){\n    unsigned long rax;\n    __asm__ __volatile__(\n        \"\" :\n        \"=a\" (rax) : :\n    );\n    return rax;\n}\n</code></pre>\n\n<p><code>main.c</code></p>\n\n<pre><code>#include &lt;immintrin.h&gt;\n#include &lt;stdio.h&gt;\n\nunsigned long func(int a, double m, __m256 u, __m512 v, ...);\n\nint main(void){\n    int a = 10,\n        b = 20;\n    long double ld = 30.0;\n    double m = 40.0,\n           n = 50.0;\n    __m256 u, y;\n    __m512 v, z;\n    printf(\"%lu\\n\", func(a, m, u, v, b, ld, y, z, n)); //prints 2\n}\n</code></pre>\n\n<p>Is it a typo? So the correct content of register <code>%rax</code> should be <code>2</code> instead of <code>3</code>?</p>\n"}, {"tags": ["c", "segmentation-fault", "glob"], "comments": [{"owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1573620543, "post_id": 58830466, "comment_id": 103936684, "body": "In the cases where it segfaults, what&#39;s in <code>err</code>? (And why isn&#39;t your code checking it?)"}, {"owner": {"reputation": 330, "user_id": 8504592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A0lBH.jpg?s=128&g=1", "display_name": "PunyCode", "link": "https://stackoverflow.com/users/8504592/punycode"}, "reply_to_user": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1573621816, "post_id": 58830466, "comment_id": 103936981, "body": "err is zero i checked right now."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1573623294, "post_id": 58830466, "comment_id": 103937362, "body": "the function: <code>glob()</code> returns an <code>int</code>, not a <code>uint32_t</code>"}, {"owner": {"reputation": 330, "user_id": 8504592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A0lBH.jpg?s=128&g=1", "display_name": "PunyCode", "link": "https://stackoverflow.com/users/8504592/punycode"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1573624002, "post_id": 58830466, "comment_id": 103937555, "body": "@user3629249 thanks for pointing that out, err should have been signed int. but in this scenario its same in both cases."}, {"owner": {"reputation": 143, "user_id": 8381663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b026e362a85b2a7b3241b0e1b95b6369?s=128&d=identicon&r=PG&f=1", "display_name": "BrianChen", "link": "https://stackoverflow.com/users/8381663/brianchen"}, "edited": false, "score": 1, "creation_date": 1573624484, "post_id": 58830466, "comment_id": 103937682, "body": "You should check the ret from glob function, because if ret is not 0, use glob_results is undefined behavior."}], "answers": [{"comments": [{"owner": {"reputation": 330, "user_id": 8504592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A0lBH.jpg?s=128&g=1", "display_name": "PunyCode", "link": "https://stackoverflow.com/users/8504592/punycode"}, "edited": false, "score": 0, "creation_date": 1573624280, "post_id": 58830940, "comment_id": 103937614, "body": "sorry mate but i did mention code was working fine if not in a thread."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "reply_to_user": {"reputation": 330, "user_id": 8504592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A0lBH.jpg?s=128&g=1", "display_name": "PunyCode", "link": "https://stackoverflow.com/users/8504592/punycode"}, "edited": false, "score": 0, "creation_date": 1573624498, "post_id": 58830940, "comment_id": 103937686, "body": "well, the signature for <code>dir_disp()</code> is not valid for a thread. and the proper exit from a thread is via: <code>pthread_exit( NULL );</code>  and the function where the thread is started needs a call to <code>pthread_create()</code> to start the thread, then call <code>pthread_join( NULL );</code>  to wait for the thread to finish.  when programming the details make the difference between working and crashing.  A thread gets its&#39; own stack.  Perhaps you need to modify the stack allocation for a thread"}, {"owner": {"reputation": 330, "user_id": 8504592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A0lBH.jpg?s=128&g=1", "display_name": "PunyCode", "link": "https://stackoverflow.com/users/8504592/punycode"}, "edited": false, "score": 0, "creation_date": 1573624825, "post_id": 58830940, "comment_id": 103937777, "body": "dir_disp() is not the threaded function but is called from a function running in thread."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "reply_to_user": {"reputation": 330, "user_id": 8504592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A0lBH.jpg?s=128&g=1", "display_name": "PunyCode", "link": "https://stackoverflow.com/users/8504592/punycode"}, "edited": false, "score": 0, "creation_date": 1573715415, "post_id": 58830940, "comment_id": 103974925, "body": "Then you need to post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> so we have a complete picture of what is going on.  Then we can help you debug it."}], "tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1573623994, "last_edit_date": 1573623994, "creation_date": 1573623602, "answer_id": 58830940, "question_id": 58830466, "link": "https://stackoverflow.com/questions/58830466/segmentation-fault-while-calling-globfree/58830940#58830940", "title": "Segmentation fault while calling globfree()", "body": "<p>the following proposed code:</p>\n\n<ol>\n<li>cleanly compiles</li>\n<li>performs the desired functionality</li>\n</ol>\n\n<p>Notice how the first parameter to <code>glob()</code> is written</p>\n\n<p>and now, the proposed code:</p>\n\n<pre><code>#include &lt;stdint.h&gt;\n#include &lt;glob.h&gt;\n#include &lt;stdio.h&gt;\n\n\nuint32_t dir_disp(void)\n{\n    int             err;\n    size_t          cnt;\n    char            **p;\n\n    glob_t          glob_results;   \n\n    err = glob(\"/home/richard/*\", GLOB_MARK, 0, &amp;glob_results);\n\n    printf( \"err: %d\\n\", err );\n\n    p = glob_results.gl_pathv;\n    cnt = glob_results.gl_pathc;\n\n    for (size_t i=0; i&lt;cnt; i++)\n    {\n        printf(\"[DEBUG] dir_disp: %s\\n\",p[i]);\n    }\n\n    globfree(&amp;glob_results);\n    return 0;\n}\n\n\nint main( void )\n{\n    uint32_t result = dir_disp();\n    printf( \"result: %d\\n\", result );\n}\n</code></pre>\n\n<p>a run of the above code results in:</p>\n\n<pre><code>err: 0\n[DEBUG] dir_disp: /home/richard/Desktop/\n[DEBUG] dir_disp: /home/richard/Documents/\n[DEBUG] dir_disp: /home/richard/Downloads/\n[DEBUG] dir_disp: /home/richard/Music/\n[DEBUG] dir_disp: /home/richard/OpenMPI/\n[DEBUG] dir_disp: /home/richard/Pictures/\n[DEBUG] dir_disp: /home/richard/Public/\n[DEBUG] dir_disp: /home/richard/Templates/\n[DEBUG] dir_disp: /home/richard/Videos/\n[DEBUG] dir_disp: /home/richard/examples.desktop\nresult: 0\n</code></pre>\n\n<p>there were lots of other directories, but they are not relevant to this answer</p>\n"}, {"comments": [{"owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1573668599, "post_id": 58841445, "comment_id": 103960165, "body": "To be specific, it&#39;s <code>MT-Unsafe race:utent env sig:ALRM timer locale</code>. Doesn&#39;t that mean it&#39;s only unsafe in those particular ways, and if your program avoids those cases, then it is fine to call in a multithreaded program?"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1573669240, "post_id": 58841445, "comment_id": 103960436, "body": "@joseph: yes, that&#39;s what it means. And, as I said, it&#39;s possible that the issues are only triggered by certain uses of the function, although that&#39;s not documented anywhere. So it&#39;s not necessarily a reason to not use <code>glob</code> but it does indicate the need for caution. I think stack overflow is a more likely culprit."}, {"owner": {"reputation": 330, "user_id": 8504592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A0lBH.jpg?s=128&g=1", "display_name": "PunyCode", "link": "https://stackoverflow.com/users/8504592/punycode"}, "edited": false, "score": 0, "creation_date": 1573727221, "post_id": 58841445, "comment_id": 103980932, "body": "@rici thanks mate it really was stack overflow segfault was gone once I assigned more stack in pthread."}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": true, "score": 1, "last_activity_date": 1573662421, "creation_date": 1573662421, "answer_id": 58841445, "question_id": 58830466, "link": "https://stackoverflow.com/questions/58830466/segmentation-fault-while-calling-globfree/58841445#58841445", "title": "Segmentation fault while calling globfree()", "body": "<p>According to the Linux manpage, <code>glob()</code> is <a href=\"http://man7.org/linux/man-pages/man3/glob.3.html#ATTRIBUTES\" rel=\"nofollow noreferrer\">not MT-safe</a> so it is <a href=\"http://man7.org/linux/man-pages/man7/attributes.7.html\" rel=\"nofollow noreferrer\">\"not safe to call in a multithreaded program\"</a>.</p>\n\n<p>It's possibly worth noting that Posix does require <code>glob()</code> to be MT-safe, so this attribute is specific to the Gnu implementation in glibc, and might have to do with Gnu extensions such as the tilde expansion option. All the same, you should be aware of the warning.</p>\n\n<p>Based on the symptoms you report, a possible issue is stack overflow, perhaps related to the use of <code>alloca</code> or VLAs in the <code>glob</code> implementation. (I didn't check the source code, though; I have no particular evidence that such features are actually used.) Default stack sizes in multithreaded code tend to be quite small, and code which works fine in a non-MT environment can easily exceed the stack size of a default thread. You could try increasing the stack size when you create the thread(s) which call <code>glob</code>.</p>\n"}], "owner": {"reputation": 330, "user_id": 8504592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A0lBH.jpg?s=128&g=1", "display_name": "PunyCode", "link": "https://stackoverflow.com/users/8504592/punycode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "accepted_answer_id": 58841445, "answer_count": 2, "score": 0, "last_activity_date": 1573662421, "creation_date": 1573620275, "last_edit_date": 1573625564, "question_id": 58830466, "link": "https://stackoverflow.com/questions/58830466/segmentation-fault-while-calling-globfree", "title": "Segmentation fault while calling globfree()", "body": "<p><strong>[using arm-hisiv300-linux-gcc to compile for Linux based Target board]</strong></p>\n\n<p>I got segmentation fault while I called this function.</p>\n\n<pre><code>uint32_t dir_disp(void)\n{\n    uint32_t        err;\n    uint32_t        i;\n    size_t          cnt;\n    char            *str;\n    char            **p;\n\n    glob_t          glob_results;   \n\n    err = glob(\"/home/2019-11-12/H*\", GLOB_MARK, 0, &amp;glob_results);\n\n    p = glob_results.gl_pathv;\n    cnt = glob_results.gl_pathc;\n\n    for (i=0; i&lt;cnt; i++)\n    {\n        printf(\"[DEBUG] dir_disp: %s\\n\",p[i]);\n    }\n\n    globfree(&amp;glob_results);\n    return 0;\n}\n</code></pre>\n\n<p>the above function is called only once from a <strong>thread function</strong>, the segmentation fault occurred only when there are more than ~100 items matching the pattern \"<code>/home/2019-11-12/H*</code>\"</p>\n\n<p>Segmentation fault doesn't occur if:</p>\n\n<ul>\n<li>less than ~100 items matching the pattern </li>\n<li>or comment out the printf in for loop </li>\n<li>or comment out globfree()</li>\n<li>or call the function in another program without thread</li>\n</ul>\n\n<p>[Edit]</p>\n\n<p>Sorry but I forgot to mention the segfault occur only after printing all the items matching the pattern.</p>\n\n<p>I checked the ret val of <code>glob()</code> and found it to be zero. Not changing the original question.</p>\n"}, {"tags": ["c", "linux", "io", "x86", "osdev"], "answers": [{"tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": true, "score": 5, "last_activity_date": 1573712856, "last_edit_date": 1573712856, "creation_date": 1573619039, "answer_id": 58830323, "question_id": 58830291, "link": "https://stackoverflow.com/questions/58830291/how-can-we-reboot-through-keyboard-port/58830323#58830323", "title": "How can we reboot through keyboard port", "body": "<p>The original 8042 \"PS/2 keyboard controller\" design had some extra pins on the controller and the cheapskate IBM engineers did wire lots of stuff to these extra pins. One pin was wired to the CPU reset pin, another unused pin was used to fix the 80286 address wraparound incompatibility, the fix was called the <a href=\"https://en.wikipedia.org/wiki/A20_line#A20_gate\" rel=\"nofollow noreferrer\">the A20 gate</a>.</p>\n\n<p>The command byte <code>0xFx</code> means \"pulse the chosen line down for 6 milliseconds\", with <code>E</code> choosing the reset line (the bit 0 is zeroed). The effect is resetting the CPU so that it starts executing code according to its boot sequence.</p>\n\n<p>Naturally the current PCs do not have Intel 8042 microcontrollers, just an emulation thereof...</p>\n\n<hr>\n\n<p>More information in Osdev wiki articles <a href=\"https://wiki.osdev.org/Reboot\" rel=\"nofollow noreferrer\">Reboot</a> and <a href=\"https://wiki.osdev.org/%228042%22_PS/2_Controller\" rel=\"nofollow noreferrer\">PS/2 Controller</a>.</p>\n"}], "owner": {"reputation": 3001, "user_id": 2830324, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e718abdfd920bb3f66d81bbbb10e80f?s=128&d=identicon&r=PG&f=1", "display_name": "md.jamal", "link": "https://stackoverflow.com/users/2830324/md-jamal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 58830323, "answer_count": 1, "score": 2, "last_activity_date": 1573712943, "creation_date": 1573618807, "last_edit_date": 1573712943, "question_id": 58830291, "link": "https://stackoverflow.com/questions/58830291/how-can-we-reboot-through-keyboard-port", "title": "How can we reboot through keyboard port", "body": "<p>How is the below code able to reboot the system, can any provide documentation on this </p>\n\n<pre><code>#define KEYBOARD_PORT 0x64\nioperm(KEYBOARD_PORT, 0x01, 0x01);\noutb(0xfe, KEYBOARD_PORT);\n</code></pre>\n\n<p>What is the significance of writing '0xfe' on the Keyboard Port.</p>\n"}, {"tags": ["c", "arrays", "pointers", "struct", "double-pointer"], "comments": [{"owner": {"reputation": 908, "user_id": 3589567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CKIds.png?s=128&g=1", "display_name": "Alejandro Blasco", "link": "https://stackoverflow.com/users/3589567/alejandro-blasco"}, "edited": false, "score": 0, "creation_date": 1573625969, "post_id": 58830255, "comment_id": 103938127, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/2257735/assigning-memory-to-double-pointer\">Assigning memory to double pointer?</a>"}, {"owner": {"reputation": 47, "user_id": 6583104, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Xcjtg7UE4TM/AAAAAAAAAAI/AAAAAAAAFkk/L5PI8A726ho/photo.jpg?sz=128", "display_name": "Software Developer", "link": "https://stackoverflow.com/users/6583104/software-developer"}, "reply_to_user": {"reputation": 908, "user_id": 3589567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CKIds.png?s=128&g=1", "display_name": "Alejandro Blasco", "link": "https://stackoverflow.com/users/3589567/alejandro-blasco"}, "edited": false, "score": 0, "creation_date": 1573626071, "post_id": 58830255, "comment_id": 103938144, "body": "@AlejandroBlasco I figured it out. My problem is in AddBusStop. I am adding the BusStop to the array AFTER incrementing numBusStops. Since arrays start at index 0, this is wrong."}, {"owner": {"reputation": 47, "user_id": 6583104, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Xcjtg7UE4TM/AAAAAAAAAAI/AAAAAAAAFkk/L5PI8A726ho/photo.jpg?sz=128", "display_name": "Software Developer", "link": "https://stackoverflow.com/users/6583104/software-developer"}, "reply_to_user": {"reputation": 908, "user_id": 3589567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CKIds.png?s=128&g=1", "display_name": "Alejandro Blasco", "link": "https://stackoverflow.com/users/3589567/alejandro-blasco"}, "edited": false, "score": 0, "creation_date": 1573626079, "post_id": 58830255, "comment_id": 103938146, "body": "My problem is now resolved"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1573635152, "post_id": 58830255, "comment_id": 103941885, "body": "The question you should be asking is not how but <i>why</i> you are using pointer-to-pointer here. See <a href=\"https://stackoverflow.com/questions/42094465/correctly-allocating-multi-dimensional-arrays\">Correctly allocating multi-dimensional arrays</a>."}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 6583104, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Xcjtg7UE4TM/AAAAAAAAAAI/AAAAAAAAFkk/L5PI8A726ho/photo.jpg?sz=128", "display_name": "Software Developer", "link": "https://stackoverflow.com/users/6583104/software-developer"}, "edited": false, "score": 0, "creation_date": 1573619487, "post_id": 58830351, "comment_id": 103936465, "body": "1. Yes, bus is initialized in the InitializeBus method. A reference/pointer to bus is passed in from the main method. 2. Yes, BusStops is of type &quot;BusStop**&quot; 3. As per my assignment instructions, each individual BusStop pointer for the array of BusStop pointers will have memory malloced to it in the AddBusStop method. If I use a for loop like you said, will I still be able to allocate memory for each individual BusStop pointer in the AddBusStop method?"}], "tags": [], "owner": {"reputation": 163, "user_id": 12313191, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDelPS5VpuVOfMYXPwWBTLBvilRRWDWFzYm4WiPJA=k-s128", "display_name": "Yoni Melki", "link": "https://stackoverflow.com/users/12313191/yoni-melki"}, "is_accepted": false, "score": 1, "last_activity_date": 1573619336, "creation_date": 1573619336, "answer_id": 58830351, "question_id": 58830255, "link": "https://stackoverflow.com/questions/58830255/how-do-i-initialize-a-double-pointer-in-c-array-of-pointers/58830351#58830351", "title": "How do I initialize a double pointer in C? (array of pointers)", "body": "<p>First of all, did you initialized bus ? You can\u2019t get its field without initializing it.\nSecond: Check if BusStops is of type BusStop**.\nThird: because BusStop is an array of pointer, if you want to put strings in it - You need to allocate every columns allocate BusStops[0], BusStops[1]...) with a for loop and then you can put string.\nWithout allocating the column - your program won\u2019t work when you will try to compare a string - The program will go to BusStops[i] but there will be no string/memory allocated.</p>\n"}, {"tags": [], "owner": {"reputation": 47, "user_id": 6583104, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Xcjtg7UE4TM/AAAAAAAAAAI/AAAAAAAAFkk/L5PI8A726ho/photo.jpg?sz=128", "display_name": "Software Developer", "link": "https://stackoverflow.com/users/6583104/software-developer"}, "is_accepted": false, "score": 0, "last_activity_date": 1573626125, "creation_date": 1573626125, "answer_id": 58831379, "question_id": 58830255, "link": "https://stackoverflow.com/questions/58830255/how-do-i-initialize-a-double-pointer-in-c-array-of-pointers/58831379#58831379", "title": "How do I initialize a double pointer in C? (array of pointers)", "body": "<p>I figured it out!</p>\n\n<p>My problem is in AddBusStop. I am adding the BusStop to the array AFTER incrementing numBusStops. Since arrays start at index 0, this is wrong.</p>\n"}], "owner": {"reputation": 47, "user_id": 6583104, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Xcjtg7UE4TM/AAAAAAAAAAI/AAAAAAAAFkk/L5PI8A726ho/photo.jpg?sz=128", "display_name": "Software Developer", "link": "https://stackoverflow.com/users/6583104/software-developer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1573695531, "creation_date": 1573618504, "last_edit_date": 1573695531, "question_id": 58830255, "link": "https://stackoverflow.com/questions/58830255/how-do-i-initialize-a-double-pointer-in-c-array-of-pointers", "title": "How do I initialize a double pointer in C? (array of pointers)", "body": "<p>Below is my code. I am receiving an error because I did not initialize bus -> BusStops, an array of pointers, after allocating memory to it. Each individual BusStop to be added to the bus -> BusStops array will have memory allocated to it in the AddBusStop method.</p>\n\n<p>However, initially, the bus->BusStops in it. How do I initialize the bus -> BusStops array with that taken into account so that I don't receive this error?</p>\n\n<p>I am receiving an Uinitialized value was created  by heap allocation error on Valgrind and a segmentation fault</p>\n\n<p><strong>EDIT - I tried using calloc instead of malloc in my InitializeBus method, but alas, no luck</strong></p>\n\n<pre><code>//ONE METHOD I WROTE\n\nvoid InitializeBus(Bus *bus, int maxBusStops) {\n    bus -&gt; numBusStops = 0; //initializing numBusStops element from struct to 0\n    bus -&gt; maxBusStops = maxBusStops; //initializing maxBusStops element from struct to parameter maxBusStops\n    bus -&gt; BusStops = (BusStop**)malloc(maxBusStops * sizeof(BusStop*)); //add memory to bus -&gt; BusStops\n}\n\n\n//THE OTHER METHOD I WROTE\n\nint AddBusStop(Bus *bus, const char* name) { //NOTE - the bus variable passed in is already initialized from the previous method. \"name\" is the name of the bus stop.\n       for(int i = 0; i &lt; bus -&gt; numBusStops; i++) { //for each bus stop that is currently in the array\n        if(strcmp(bus -&gt; busStops[i] -&gt; name, name) == 0) { //if that bus stop has the same name as the bus stop passed in as a parameter\n           return 1; //return 1\n        }\n\n//ERROR ALERT - READ BELOW\n// ***I am getting a segmentation fault error at this line. An uninitialized value was created using heap allocation** in the final line of the InitializeBus method. How do I initialize bus -&gt; BusStops once I have added memory to it? Each individual BusStop that is being added has memory allocated to it in this method, but the bus -&gt; busStops array is uninitialized and I am not sure what to initialize it to\n\n\n    }   //OTHERWISE\n    BusStop *newBus = (BusStop*)malloc(sizeof(BusStop) + 1); //create a new BusStop pointer to be added to the array of BusStop pointers, bu. I am not sure if I am allocating enough memory\n    newBus -&gt; name = (char*)name; //set the name of this newBus bus stop equal to the name passed in as 0\n    newBus -&gt; numDestinations = 0; //initialize numDestinations to 0\n    newBus -&gt; destinations = NULL; //set newBus -&gt; destinations to NULL - I was specified to do this and can't change it\n    if(bus -&gt; numBusStops == bus -&gt; maxBusStops) { //if there is no more space in bu to add the newly created bus\n        bu = (BusStop**)realloc(bu, bus -&gt; maxBusStops * 2 * sizeof(BusStop)); //allocate double the memory to bu\n        bus -&gt; maxBusStops *= 2; //make sure maxBusStops is now doubled. I am not sure if I am allocating enough memory\n        }\n        bus-&gt;numBusStops++; //increase the amount of bus stops the bus can hold by 1\n        bu[bus -&gt; numBusStops] = newBus; //add the newly created bus at the end of the array bu. **THIS LINE IS WHERE I AM GETTING THE \"Invalid Write of Size 8\" error\n        bus-&gt;busStops = bu; //update the struct element bus -&gt; busStops and set it equal to the updated bu value\n    return 0; //return 0\n}\n\n//MAIN METHOD TO TEST CODE\n\nint main() {\n    Bus bus; //create a new bus\n    InitializeBus(&amp;bus, 10); //pass in its address and a maxBusStop value of 10\n    const char *london = \"London\"; //create a new char pointer called london\n    AddBusStop(&amp;bus, london); //add the London Bus Stop to bus -&gt; busStop\n    const char *paris = \"Paris\"; //create a new char pointer called Paris\n    AddBusStop(&amp;bus, paris); //add the Paris Bus Stop to bus -&gt; busStop\n}\n\n\n//STRUCTS\n\ntypedef struct Bus {\n\nBusStop** BusStops; /*The array of all Bus stops managed by the bus -- this is an array of pointers, each with type BusStop*/\n\nint numBusStops; /*The current number of bus stops managed by the company*/\n\nint maxBusStops; /*The max number of bus stops the BusStop array can store*/\n\n} Bus;\n\ntypedef struct BusStop{\n\nchar \\* name; /\\*The bus stop name\\*/\n\nint numDestinations; /\\*The number of destinations the bus stop offers rides to\\*/\n\nstruct BusStop \\*\\* destinations; /\\*The array of destinations the bus stop offers rides to\\*/\n\n} BusStop;\n\n</code></pre>\n"}, {"tags": ["c", "linux", "io", "x86"], "comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1573617972, "post_id": 58830017, "comment_id": 103936161, "body": "Use <code>strace</code> to decode system calls; that sanity-check would have shown you that <code>ioperm</code> was returning <code>-EPERM</code>.  Voted to close as off-topic: typo / not a real problem."}], "answers": [{"tags": [], "owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1573617041, "creation_date": 1573617041, "answer_id": 58830069, "question_id": 58830017, "link": "https://stackoverflow.com/questions/58830017/ioperm-is-working-without-root-permission/58830069#58830069", "title": "ioperm is working without root permission", "body": "<p>From <a href=\"http://man7.org/linux/man-pages/man2/ioperm.2.html#RETURN_VALUE\" rel=\"nofollow noreferrer\">the manual</a>:</p>\n\n<blockquote>\n  <p>On success, zero is returned.  On error, -1 is returned, and  errno  is set appropriately.</p>\n</blockquote>\n\n<p>You have this backwards. -1 means failure, but your code incorrectly assumes it means success.</p>\n"}], "owner": {"reputation": 3001, "user_id": 2830324, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e718abdfd920bb3f66d81bbbb10e80f?s=128&d=identicon&r=PG&f=1", "display_name": "md.jamal", "link": "https://stackoverflow.com/users/2830324/md-jamal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 58830069, "answer_count": 1, "score": -1, "last_activity_date": 1573617041, "creation_date": 1573616659, "question_id": 58830017, "link": "https://stackoverflow.com/questions/58830017/ioperm-is-working-without-root-permission", "title": "ioperm is working without root permission", "body": "<p>I read that we need superuser permission to access I/O ports from user space. But i am saying different behavior. ioperm is successful under normal user.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;sys/io.h&gt;\n\nint main(int argc, char *argv[])\n{\n    if (!ioperm(0x70, 3, 1)) {\n        perror(\"ioperm failed\");\n    }\n    else {\n        printf(\"ioperm on 0x70 success\\n\");\n    }\n\n    return 0;\n}\n\n$ ./prog \nioperm on 0x70 success\n</code></pre>\n\n<p>Is this the expected behavior</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 1, "creation_date": 1573616524, "post_id": 58829947, "comment_id": 103935849, "body": "You can\u2019t resize an array. How is <code>a</code> declared?"}, {"owner": {"reputation": 1040, "user_id": 11767140, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Tbfr3YlhoOs/AAAAAAAAAAI/AAAAAAAAAWo/4_25j9xubwc/photo.jpg?sz=128", "display_name": "David Garc&#237;a Bodego", "link": "https://stackoverflow.com/users/11767140/david-garc%c3%ada-bodego"}, "edited": false, "score": 0, "creation_date": 1573617806, "post_id": 58829947, "comment_id": 103936115, "body": "Welcome to SO! The code you post it is not for deleting purposes so... which one is your real question?"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1573618184, "post_id": 58829947, "comment_id": 103936196, "body": "After delete you just pretend it has one less element."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1573628625, "post_id": 58829947, "comment_id": 103938977, "body": "What Antti is proposing would be to just decrement <code>size</code> for the rest of the program. But don&#39;t try to ever increase it beyond the actual <code>sizeof(a)&#47;sizeof(a[0])</code>."}], "answers": [{"comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1573715065, "post_id": 58832382, "comment_id": 103974786, "body": "Good edit. I like the answer. I took some liberty in brushing it up, maybe slightly beyond the usual limits of editing. Feel free to undo anything you do not like and please accept my apology in that case. I left in the use of the term <code>allocate</code> which is not strictly correct for statically mapped/linked arrays. Consider doing a larger edit to make that perfect."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user11847100"}, "is_accepted": false, "score": 1, "last_activity_date": 1573714959, "last_edit_date": 1573714959, "creation_date": 1573630911, "answer_id": 58832382, "question_id": 58829947, "link": "https://stackoverflow.com/questions/58829947/how-can-i-delete-the-last-element-in-the-array/58832382#58832382", "title": "how can I delete the last element in the array?", "body": "<p>It seems you do not quite understand how arrays are in C.</p>\n\n<p>In C, an array is a continuous sequence of items of the same type and therefore same size.</p>\n\n<p>The system will allocate space for the array initially.</p>\n\n<p>For example when you say <code>int a[4]</code> and run your function, <code>a</code> is of type \"array of <code>int</code>\", each entry is type of 'int'.<br>\nMostly, an int value needs 4 bytes of space. And the <code>[4]</code> means space for four ints will be allocated. That is, it will allocate 4*4=16 bytes in your memory.</p>\n\n<p>For example, down here is the spaces allocated by <code>a</code>:</p>\n\n<p><code>\n01010101        first byte (start of a[0])\n01111110        second byte\n00101001        third byte\n00000111        fourth byte\n01100000        fifth byte (start of a[1])\n.....\n.....\n.....\n01010101        16th  byte\n</code></p>\n\n<p>While it is just allocated, the bytes value is unknown. You can initialize or assign value to it.</p>\n\n<p>Okay, then when you use <code>a</code> to do something, you can say <code>a[1]</code> to access the int represented by the 4 bytes ranging from the 5th byte to the 8th byte.</p>\n\n<p>What will happen if you say <code>a[10]</code>?<br>\nThe space is not allocated by your program! Accessing it is an error. But only if you are lucky maybe an error tip window showing \"Access Violation at memory 0x6463a80 (the number is just example)\" or you get a value unknown without a noticeable warning and that would be worse!</p>\n\n<p>From your question, I know that you want to say,<br>\n\"Oh gosh, I originally have <code>int a[4]</code>, but later in the code, I want to shrink it to something like <code>int a[3]</code>!\"</p>\n\n<p>The solution is: just ignore <code>a[3]</code>, view it as it does not exist! Never use <code>a[3]</code> then that's okay!</p>\n\n<p>If you want to have a full access of operations like \"Add\" \"insert\" \"Remove\" etc. Array is not suitable. Consider C++. It has std library, and there is Vector type. It's not array, it works different from this. Search Google or chat me if u want to know.</p>\n\n<p>You may be not completely understand what I am saying here but please feel free to ask. I'm almost on the same boat with you and I am willing to teach &amp; help you.</p>\n"}], "owner": {"reputation": 1, "user_id": 12364412, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCHvZC7bmZ0njkUEaRtLlTpePVwKKRXUdQlmD5y9A=k-s128", "display_name": "anirban paul", "link": "https://stackoverflow.com/users/12364412/anirban-paul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1573714959, "creation_date": 1573616081, "question_id": 58829947, "link": "https://stackoverflow.com/questions/58829947/how-can-i-delete-the-last-element-in-the-array", "title": "how can I delete the last element in the array?", "body": "<p>In the given code, there is a method that</p>\n\n<pre><code>for(i = pos - 1 ; i &lt; size -1 ; i++)\n{\na[i] = a[i+1] ;\n}\n</code></pre>\n\n<p>but suppose the size is 4 and I want to delete the 4th position value of the array. \nIn this scenerio I am not able to understand how this code will work.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1573614579, "post_id": 58829703, "comment_id": 103935476, "body": "regarding: <code>while((c=getchar()) != EOF)</code>  the function: <code>getchar()</code> returns a <code>int</code> not a <code>char</code>.  In most circumstances, a <code>char</code> will fail to compare to <code>EOF</code>.  Suggest:  <code>int c; ... while( (c = getchar() ) != EOF)</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1573614704, "post_id": 58829703, "comment_id": 103935503, "body": "exactly what was the input you passed to the program?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1573614840, "post_id": 58829703, "comment_id": 103935533, "body": "what is <code>position 2</code>?  what is <code>structure</code>?"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1573618231, "post_id": 58829703, "comment_id": 103936203, "body": "<a href=\"https://stackoverflow.com/questions/35356322/difference-between-int-and-char-in-getchar-fgetc-and-putchar-fputc\">Difference between int and char in getchar/fgetc and putchar/fputc?</a>"}, {"owner": {"reputation": 3, "user_id": 12364316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/446182c26dd6185328aa0db195458a4c?s=128&d=identicon&r=PG&f=1", "display_name": "Krishbin Paudel", "link": "https://stackoverflow.com/users/12364316/krishbin-paudel"}, "edited": false, "score": 0, "creation_date": 1573705309, "post_id": 58829703, "comment_id": 103971781, "body": "i want to print out the total number of letters in longest word, and when printf is as marker 1 it gives the output but when it is at marker 2 it doesnt even return a value."}], "answers": [{"tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": false, "score": 1, "last_activity_date": 1573620020, "creation_date": 1573620020, "answer_id": 58830438, "question_id": 58829703, "link": "https://stackoverflow.com/questions/58829703/how-does-c-structure-loop-why-is-the-variable-not-assigned-the-value-at-positio/58830438#58830438", "title": "How does c structure loop? why is the variable not assigned the value at position (2) of the program? it only prints in position (1)?", "body": "<p>You should get into the habit of putting a newline (<code>\\n</code>) at the end of your printf formats. That will usually make the data easier to read, and it will mostly save you from having to think about <code>stdout</code> buffering. (q.v.)</p>\n\n<p>Also, I've heard that some IDEs swallow the last line of output if it's not terminated with a newline.</p>\n\n<p>Sometimes, of course, you will want to use more than one <code>printf</code> call to print a single line; in that case, you only put the <code>\\n</code> for the last printf in the line. But the normal case is that every format string ends with <code>\\n</code>.</p>\n"}], "owner": {"reputation": 3, "user_id": 12364316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/446182c26dd6185328aa0db195458a4c?s=128&d=identicon&r=PG&f=1", "display_name": "Krishbin Paudel", "link": "https://stackoverflow.com/users/12364316/krishbin-paudel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1573704750, "creation_date": 1573614046, "last_edit_date": 1573704750, "question_id": 58829703, "link": "https://stackoverflow.com/questions/58829703/how-does-c-structure-loop-why-is-the-variable-not-assigned-the-value-at-positio", "title": "How does c structure loop? why is the variable not assigned the value at position (2) of the program? it only prints in position (1)?", "body": "<pre><code>\n#include &lt;stdio.h&gt;\n\nint main()\n{\n    char c;\n    char d[10000];\n    int i = 0, nl = 0,ll = 0,k = 0;\n    int maxi = 0;\n    while((c=getchar()) != EOF){\n        d[i]=c;\n        if(c == '\\n'){\n            ++nl;\n            ll = i - k; //line length\n            k = i;\n            if(maxi&lt;=ll){\n                maxi=ll;\n                printf(\"%d\",maxi); //**(1)**\n            }\n        }\n        ++i;\n    }\n    // printf(\"%d\",maxi); **(2)**\n}\n\n</code></pre>\n\n<p>why is the variable not assigned the value at position (2) of the program? it only prints in position (1)? </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 929, "user_id": 12136319, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nZLSt.jpg?s=128&g=1", "display_name": "Problematic Dude", "link": "https://stackoverflow.com/users/12136319/problematic-dude"}, "edited": false, "score": 1, "creation_date": 1573614633, "post_id": 58829593, "comment_id": 103935484, "body": "What&#39;s the problem ?"}, {"owner": {"reputation": 139, "user_id": 9627068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52cea3983d4faadb779dcdfd90a8902?s=128&d=identicon&r=PG&f=1", "display_name": "pmac", "link": "https://stackoverflow.com/users/9627068/pmac"}, "edited": false, "score": 0, "creation_date": 1573614825, "post_id": 58829593, "comment_id": 103935529, "body": "Says right in the first paragraph. I guess I just have a corrupted file?"}, {"owner": {"reputation": 139, "user_id": 9627068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52cea3983d4faadb779dcdfd90a8902?s=128&d=identicon&r=PG&f=1", "display_name": "pmac", "link": "https://stackoverflow.com/users/9627068/pmac"}, "edited": false, "score": 0, "creation_date": 1573614872, "post_id": 58829593, "comment_id": 103935538, "body": "Above mentioned code is running under one file name but not under another."}, {"owner": {"reputation": 929, "user_id": 12136319, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nZLSt.jpg?s=128&g=1", "display_name": "Problematic Dude", "link": "https://stackoverflow.com/users/12136319/problematic-dude"}, "edited": false, "score": 0, "creation_date": 1573614946, "post_id": 58829593, "comment_id": 103935551, "body": "Remove space in scanf. Scanf don&#39;t have space in them. Try may be it work."}, {"owner": {"reputation": 929, "user_id": 12136319, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nZLSt.jpg?s=128&g=1", "display_name": "Problematic Dude", "link": "https://stackoverflow.com/users/12136319/problematic-dude"}, "edited": false, "score": 0, "creation_date": 1573615005, "post_id": 58829593, "comment_id": 103935561, "body": "@pmac there is nothing like corrupt file. It must be some code issue."}, {"owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "reply_to_user": {"reputation": 929, "user_id": 12136319, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nZLSt.jpg?s=128&g=1", "display_name": "Problematic Dude", "link": "https://stackoverflow.com/users/12136319/problematic-dude"}, "edited": false, "score": 1, "creation_date": 1573615024, "post_id": 58829593, "comment_id": 103935566, "body": "@problematicDude You are wrong; spaces are allowed and have well-defined behavior in <code>scanf</code>."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1573616066, "post_id": 58829593, "comment_id": 103935755, "body": "OT: the posted code outputs the desired pattern.  However, I would strongly suggest always checking the returned value from any of the <code>scanf()</code> family of functions.  Those functions return the number of successful &#39;input format conversion&#39; specifications.  (in the OPs posted code any returned value other than 2 indicates an error occurred"}, {"owner": {"reputation": 139, "user_id": 9627068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52cea3983d4faadb779dcdfd90a8902?s=128&d=identicon&r=PG&f=1", "display_name": "pmac", "link": "https://stackoverflow.com/users/9627068/pmac"}, "reply_to_user": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1573616428, "post_id": 58829593, "comment_id": 103935824, "body": "@JosephSible But I just did the same thing again! I tried running the original code: didn&#39;t work. Copied-pasted that exact code into a new file: worked. But I just figured something else out. When I enter different numbers for the new code, it runs as should. When I enter different numbers in the original code it is printing a christmas tree of *&#39;s, which is from a completely different code I was working on before that. So basically when I compile and run the &#39;corrupt&#39; code, it is running another programs code! So it is trying to print a christmas tree of 1010101 lines. Very weird."}, {"owner": {"reputation": 139, "user_id": 9627068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52cea3983d4faadb779dcdfd90a8902?s=128&d=identicon&r=PG&f=1", "display_name": "pmac", "link": "https://stackoverflow.com/users/9627068/pmac"}, "edited": false, "score": 0, "creation_date": 1573616968, "post_id": 58829593, "comment_id": 103935939, "body": "even happens after restarting"}, {"owner": {"reputation": 121, "user_id": 7981505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9810108e3c8b0ecb0b582b29213f21b6?s=128&d=identicon&r=PG&f=1", "display_name": "ghost_duke", "link": "https://stackoverflow.com/users/7981505/ghost-duke"}, "edited": false, "score": 0, "creation_date": 1573660655, "post_id": 58829593, "comment_id": 103955942, "body": "copy the file to another folder and try again. Did you use the same name to compile a different code before? are you accessing the correct files to compile?"}], "answers": [{"tags": [], "owner": {"reputation": 4286, "user_id": 1440105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/QxCty.jpg?s=128&g=1", "display_name": "Dweeberly", "link": "https://stackoverflow.com/users/1440105/dweeberly"}, "is_accepted": false, "score": 1, "last_activity_date": 1573616946, "creation_date": 1573616946, "answer_id": 58830055, "question_id": 58829593, "link": "https://stackoverflow.com/questions/58829593/c-program-execution-success-apparently-depends-on-file-name/58830055#58830055", "title": "C program execution success apparently depends on file name", "body": "<p>I cannot doubt your experience but I'm not sure your conclusion is correct.  First we don't run source code, it has to be compiled first.  This leaves open the possibility that you have an old executable, i.e. an executable that doesn't reflect the code.  The same code compiled the same way should produce the same runtime behavior (given that that code logic is correct).</p>\n\n<p>Since all the variables are integer the <code>d</code> variable can become 0 and if this happens before <code>i</code> becomes less than or equal to 1 the <code>i%d</code> would result in a divide by zero error.  Trying your code on repl.it with i = 1000 and d = 77 generates a floating point exception, but different compilers/environments may surface that undefined state differently (though all should produce an error state).</p>\n\n<p>My advice is to delete both your compiled executables and any object files (clean your project), then recompile and compare results.  If you still see different behavior based on the same output, then carefully compare your source files (or 'diff' them if you are on a unix'y system).  If you still find a discrepancy, update your question with both source files (even if you find them identical), the compiler (name/version) and environment (OS/version) you are using.    </p>\n"}], "owner": {"reputation": 139, "user_id": 9627068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52cea3983d4faadb779dcdfd90a8902?s=128&d=identicon&r=PG&f=1", "display_name": "pmac", "link": "https://stackoverflow.com/users/9627068/pmac"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "closed_date": 1573619882, "answer_count": 1, "score": 0, "last_activity_date": 1573619822, "creation_date": 1573613190, "last_edit_date": 1573613755, "question_id": 58829593, "link": "https://stackoverflow.com/questions/58829593/c-program-execution-success-apparently-depends-on-file-name", "closed_reason": "Not suitable for this site", "title": "C program execution success apparently depends on file name", "body": "<p>I tried to run a C source file and the result was it got stuck in an infinite loop. I literally copied and pasted the same code into a new source file, Untitled1, and it ran fine. Both the original and the new source file are saved on the desktop. Why is this happening?</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\nint main()\n{\n    int i, j, d, a;\n    scanf(\"%d %d\", &amp;i, &amp;d);\n\n    printf(\"%d\\n\", i);\n\n    a = 1;\n    while(i&gt;1)\n    {\n        i = i%d;\n\n        for(j = 1; j&lt;=a; j++)\n        {\n            printf(\" \");\n        }\n\n        printf(\"%d\\n\", i);\n\n        d = d/100;\n\n        a++;\n    }\n    //////////\n    return 0;\n}\n</code></pre>\n\n<p>Just a simple exercise from CodesDope. The goal is to print</p>\n\n<pre><code>1010101\n 10101\n  101\n   1\n</code></pre>\n\n<p>Which you get by entering i=1010101 and d=1000000.</p>\n"}, {"tags": ["c", "crash"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1573617278, "post_id": 58829359, "comment_id": 103936014, "body": "regarding: <code>(strlen(ptr[k])</code>  and similar expressions:  since <code>ptr</code> is a pointer to a pointer, need code similar to <code>( strlen(*ptr)[k] )</code>"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9366456, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-p8gF8d9Lko0/AAAAAAAAAAI/AAAAAAAAAGY/mgoxPLKbU2o/photo.jpg?sz=128", "display_name": "Austin Rathkamp", "link": "https://stackoverflow.com/users/9366456/austin-rathkamp"}, "edited": false, "score": 0, "creation_date": 1573612453, "post_id": 58829502, "comment_id": 103935094, "body": "The program itself crashes, rather than due to an infinite loop"}, {"owner": {"reputation": 121, "user_id": 7981505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9810108e3c8b0ecb0b582b29213f21b6?s=128&d=identicon&r=PG&f=1", "display_name": "ghost_duke", "link": "https://stackoverflow.com/users/7981505/ghost-duke"}, "reply_to_user": {"reputation": 11, "user_id": 9366456, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-p8gF8d9Lko0/AAAAAAAAAAI/AAAAAAAAAGY/mgoxPLKbU2o/photo.jpg?sz=128", "display_name": "Austin Rathkamp", "link": "https://stackoverflow.com/users/9366456/austin-rathkamp"}, "edited": false, "score": 1, "creation_date": 1573613433, "post_id": 58829502, "comment_id": 103935284, "body": "let&#39;s say k reaches 41 and you have only defined memory till 40, ptr1[k] will throw segmentation fault and crash."}], "tags": [], "owner": {"reputation": 121, "user_id": 7981505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9810108e3c8b0ecb0b582b29213f21b6?s=128&d=identicon&r=PG&f=1", "display_name": "ghost_duke", "link": "https://stackoverflow.com/users/7981505/ghost-duke"}, "is_accepted": true, "score": 0, "last_activity_date": 1573612277, "creation_date": 1573612277, "answer_id": 58829502, "question_id": 58829359, "link": "https://stackoverflow.com/questions/58829359/program-crashes-and-i-cant-figure-out-why/58829502#58829502", "title": "Program crashes and I can&#39;t figure out why", "body": "<p>You run out of valid array indices</p>\n\n<p>you keep incrementing k in:</p>\n\n<pre><code>while ((strlen(ptr[k]) &gt; 1 &amp;&amp; strlen(ptr1[i]) &gt; 1) &amp;&amp; isFound == 0)\n</code></pre>\n\n<p>Add a check for k here, like </p>\n\n<pre><code>while ((strlen(ptr[k]) &gt; 1 &amp;&amp; strlen(ptr1[i]) &gt; 1) &amp;&amp; isFound == 0 &amp;&amp; k &lt; k_max)\n</code></pre>\n\n<p>same for i in </p>\n\n<pre><code>while (strlen(ptr[k]) &gt; 1 &amp;&amp; strlen(ptr1[i]) &gt; 1)\n</code></pre>\n\n<p>Add a check for i here, like:</p>\n\n<pre><code>while (strlen(ptr[k]) &gt; 1 &amp;&amp; strlen(ptr1[i]) &gt; 1 &amp;&amp; i &lt; i_max)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 12323487, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCHqQNH8eHCceIoyfhOEIWLoQQ3GnXN_NrXzO57=k-s128", "display_name": "JTS", "link": "https://stackoverflow.com/users/12323487/jts"}, "is_accepted": false, "score": 0, "last_activity_date": 1573615195, "creation_date": 1573615195, "answer_id": 58829833, "question_id": 58829359, "link": "https://stackoverflow.com/questions/58829359/program-crashes-and-i-cant-figure-out-why/58829833#58829833", "title": "Program crashes and I can&#39;t figure out why", "body": "<p>I ran the following code through a C compiler.</p>\n\n<pre><code>#include &lt;assert.h&gt; //  Conditionally compiled macro that compares its argument to zero\n#include &lt;complex.h&gt; // (since C99) Complex number arithmetic\n#include &lt;ctype.h&gt; //   Functions to determine the type contained in character data\n#include &lt;errno.h&gt; //   Macros reporting error conditions\n#include &lt;fenv.h&gt; // (since C99)    Floating-point environment\n#include &lt;float.h&gt; //   Limits of float types\n#include &lt;inttypes.h&gt; // (since C99)    Format conversion of integer types\n#include &lt;iso646.h&gt; // (since C95)  Alternative operator spellings\n#include &lt;limits.h&gt; //  Sizes of basic types\n#include &lt;locale.h&gt; //  Localization utilities\n#include &lt;math.h&gt; //    Common mathematics functions\n#include &lt;setjmp.h&gt; //  Nonlocal jumps\n#include &lt;signal.h&gt; //  Signal handling\n#include &lt;stdalign.h&gt; // (since C11)    alignas and alignof convenience macros\n#include &lt;stdarg.h&gt; //  Variable arguments\n#include &lt;stdatomic.h&gt; // (since C11)   Atomic types\n#include &lt;stdbool.h&gt; // (since C99) Boolean type\n#include &lt;stddef.h&gt; //  Common macro definitions\n#include &lt;stdint.h&gt; // (since C99)  Fixed-width integer types\n#include &lt;stdio.h&gt; //   Input/output\n#include &lt;stdlib.h&gt; //  General utilities: memory management, program utilities, string conversions, random numbers\n#include &lt;stdnoreturn.h&gt; // (since C11) noreturn convenience macros\n#include &lt;string.h&gt; //  String handling\n#include &lt;tgmath.h&gt; // (since C99)  Type-generic math (macros wrapping math.h and complex.h)\n#include &lt;time.h&gt; //    Time/date utilities\n#include &lt;uchar.h&gt; // (since C11)   UTF-16 and UTF-32 character utilities\n#include &lt;wchar.h&gt; // (since C95)   Extended multibyte and wide character utilities\n#include &lt;wctype.h&gt; // (since C95)\nint main(){\n  int ptr[]={0, 1, 2};\n  int ptr1[]={3, 4, 5};\n  int isFound=0;\n  int wordCounter=0;\n  int totalCounter=0;\n  int lineCounter=0;\n  int i=1;\n  int k=0;\n  while (strlen(ptr[k]) &gt; 1 &amp;&amp; strlen (ptr1[i]) &gt; 1)\n  {\n  while ((strlen (ptr[k]) &gt; 1 &amp;&amp; strlen (ptr1[i]) &gt; 1) &amp;&amp; isFound == 0)\n  {\n    totalCounter++;\n    lineCounter++;\n    if (strcmp (ptr[k], ptr1[i]) == 0)\n    {\n      printf (\"'%s' is word %d in the list\\n\", ptr[k], lineCounter);\n      isFound = 1;\n    }\n    k++;\n  }\n  if (isFound == 0)\n  {\n    printf (\"'%s' is not in the word list\\n\", ptr1[i]);\n  }\n  isFound = 0;\n  lineCounter = 0;\n  k = 0;\n  i++;\n  wordCounter++;\n  }\n}\n</code></pre>\n\n<p>here are errors I captured when I put it in the compiler.</p>\n\n<blockquote>\n  <p>main.c:38:17: warning: passing argument 1 of \u2018strlen\u2019 makes pointer\n  from integer without a cast [-Wint-conversion]                        </p>\n  \n  <p>/usr/include/string.h:399:15: note: expected \u2018const char *\u2019 but\n  argument is of type \u2018int\u2019                                             </p>\n  \n  <p>main.c:38:40: warning: passing argument 1 of \u2018strlen\u2019 makes pointer\n  from integer without a cast [-Wint-conversion]                        </p>\n  \n  <p>/usr/include/string.h:399:15: note: expected \u2018const char *\u2019 but\n  argument is of type \u2018int\u2019                                             </p>\n  \n  <p>main.c:40:19: warning: passing argument 1 of \u2018strlen\u2019 makes pointer\n  from integer without a cast [-Wint-conversion]                        </p>\n  \n  <p>/usr/include/string.h:399:15: note: expected \u2018const char *\u2019 but\n  argument is of type \u2018int\u2019                                             </p>\n  \n  <p>main.c:40:42: warning: passing argument 1 of \u2018strlen\u2019 makes pointer\n  from integer without a cast [-Wint-conversion]                        </p>\n  \n  <p>/usr/include/string.h:399:15: note: expected \u2018const char *\u2019 but\n  argument is of type \u2018int\u2019                                             </p>\n  \n  <p>main.c:44:16: warning: passing argument 1 of \u2018strcmp\u2019 makes pointer\n  from integer without a cast [-Wint-conversion]                        </p>\n  \n  <p>/usr/include/string.h:144:12: note: expected \u2018const char *\u2019 but\n  argument is of type \u2018int\u2019</p>\n  \n  <p>segmentation fault</p>\n  \n  <p>program finished with exit code 139</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 35, "user_id": 12364725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f801931902cedfea473c89488e1e551c?s=128&d=identicon&r=PG&f=1", "display_name": "TiyaDSoftwareDeveloper", "link": "https://stackoverflow.com/users/12364725/tiyadsoftwaredeveloper"}, "is_accepted": false, "score": 1, "last_activity_date": 1573632834, "last_edit_date": 1573632834, "creation_date": 1573628915, "answer_id": 58831947, "question_id": 58829359, "link": "https://stackoverflow.com/questions/58829359/program-crashes-and-i-cant-figure-out-why/58831947#58831947", "title": "Program crashes and I can&#39;t figure out why", "body": "<p>You did string length for a member of array, i.e. <code>strlen(ptr[k])</code>, this will try to evaluate the len for member available at position k of array p. So final processing will be</p>\n\n<ol>\n<li><code>strlen(ptr[0]);</code> //As k is initialized as 0,\n-> then it will be evaluated as </li>\n<li><code>strlen(0);</code> //As p is an array having elements <code>{0,1,2}</code>, so at 0th position, 0 is the element\n-> So, here <code>strlen</code> will try to evaluate length of type integer, which is out of scope for <code>strlen</code></li>\n</ol>\n\n<p>As <code>strlen</code> is a string function so, only string can be evaluated.</p>\n"}], "owner": {"reputation": 11, "user_id": 9366456, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-p8gF8d9Lko0/AAAAAAAAAAI/AAAAAAAAAGY/mgoxPLKbU2o/photo.jpg?sz=128", "display_name": "Austin Rathkamp", "link": "https://stackoverflow.com/users/9366456/austin-rathkamp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 58829502, "answer_count": 3, "score": 0, "last_activity_date": 1573632834, "creation_date": 1573611263, "question_id": 58829359, "link": "https://stackoverflow.com/questions/58829359/program-crashes-and-i-cant-figure-out-why", "title": "Program crashes and I can&#39;t figure out why", "body": "<p>Program crashes and I can't figure out why. ptr and ptr1 are char** and each element of ptr and ptr1 is a char*, not all of the malloc'd space if full, however, leaving some null pointers in each. I think the problem is in this segment as the last thing printed is in this segment before crashing.</p>\n\n<pre><code> while (strlen(ptr[k]) &gt; 1 &amp;&amp; strlen(ptr1[i]) &gt; 1)\n    {\n        while ((strlen(ptr[k]) &gt; 1 &amp;&amp; strlen(ptr1[i]) &gt; 1) &amp;&amp; isFound == 0)\n        {\n            totalCounter++;\n            lineCounter++;\n            if(strcmp(ptr[k], ptr1[i]) == 0)\n            {\n                printf(\"'%s' is word %d in the list\\n\", ptr[k], lineCounter);\n                isFound = 1;\n            }\n            k++;\n        }\n        if (isFound == 0)\n            {\n                printf(\"'%s' is not in the word list\\n\", ptr1[i]);\n            }\n        isFound = 0;\n        lineCounter = 0;\n        k = 0;\n        i++;\n        wordCounter++;\n    }\n</code></pre>\n"}, {"tags": ["c", "multithreading", "process", "operating-system", "pthreads"], "comments": [{"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1573610653, "post_id": 58829193, "comment_id": 103934709, "body": "You seem to have forgotten to include the warnings you want us to address."}, {"owner": {"reputation": 117, "user_id": 12185282, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lwQMLnUZAeI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcBevbtLYaqdkjGOANpFz1mBnX3KQ/photo.jpg?sz=128", "display_name": "Daniel Decker", "link": "https://stackoverflow.com/users/12185282/daniel-decker"}, "reply_to_user": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1573611496, "post_id": 58829193, "comment_id": 103934897, "body": "@ikegami well there were quite a few... which leads me to believe that my syntax is off, but I can fix that on my own, I&#39;m more concerned that the code isn&#39;t going to work for what I&#39;m trying to have it do, logically, should what I&#39;ve coded up spawn some number of threads correctly or am I missing some pieces?"}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1573611590, "post_id": 58829193, "comment_id": 103934924, "body": "There&#39;s only one thread creation call"}, {"owner": {"reputation": 117, "user_id": 12185282, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lwQMLnUZAeI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcBevbtLYaqdkjGOANpFz1mBnX3KQ/photo.jpg?sz=128", "display_name": "Daniel Decker", "link": "https://stackoverflow.com/users/12185282/daniel-decker"}, "reply_to_user": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1573611992, "post_id": 58829193, "comment_id": 103935002, "body": "@ikegami I had been under the impression that runner would give the thread creation call the number of threads to create."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1573612109, "post_id": 58829193, "comment_id": 103935026, "body": "<code>runner</code> is executed by the thread."}, {"owner": {"reputation": 117, "user_id": 12185282, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lwQMLnUZAeI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcBevbtLYaqdkjGOANpFz1mBnX3KQ/photo.jpg?sz=128", "display_name": "Daniel Decker", "link": "https://stackoverflow.com/users/12185282/daniel-decker"}, "reply_to_user": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1573613353, "post_id": 58829193, "comment_id": 103935264, "body": "@ikegami so should I be executing the pthread_create in a random loop and not even bother with the runner function that I have?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1573617739, "post_id": 58829193, "comment_id": 103936101, "body": "regarding: ` pthread_t tid = gettid();`  this returns the TID of the <code>main()</code> function, which is <code>iffy</code> and of no interest to the program."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1573617935, "post_id": 58829193, "comment_id": 103936152, "body": "regarding; <code>printf(&quot;Child %d executes iteration\\n&quot;, param, i);</code>  this is in a <code>thread</code>, not in a <code>child process</code>"}, {"owner": {"reputation": 117, "user_id": 12185282, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lwQMLnUZAeI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcBevbtLYaqdkjGOANpFz1mBnX3KQ/photo.jpg?sz=128", "display_name": "Daniel Decker", "link": "https://stackoverflow.com/users/12185282/daniel-decker"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1573618399, "post_id": 58829193, "comment_id": 103936238, "body": "@user3629249 so I don&#39;t need the thread id for creating the threads? And yes my bad, I was building off of another code which used processes to do what I&#39;m trying to do here"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1573620542, "post_id": 58829193, "comment_id": 103936683, "body": "The <code>thread id</code> is generated by the call to <code>pthread_create()</code> (first parameter)"}], "answers": [{"comments": [{"owner": {"reputation": 117, "user_id": 12185282, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lwQMLnUZAeI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcBevbtLYaqdkjGOANpFz1mBnX3KQ/photo.jpg?sz=128", "display_name": "Daniel Decker", "link": "https://stackoverflow.com/users/12185282/daniel-decker"}, "edited": false, "score": 1, "creation_date": 1573613801, "post_id": 58829604, "comment_id": 103935342, "body": "I&#39;ve edited the question and I appreciate you pointing out those errors! I know getpid() won&#39;t work for threads and I had thought that gettid() was a function in c. I was also under the impression that rand() was not good for threads"}, {"owner": {"reputation": 121, "user_id": 7981505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9810108e3c8b0ecb0b582b29213f21b6?s=128&d=identicon&r=PG&f=1", "display_name": "ghost_duke", "link": "https://stackoverflow.com/users/7981505/ghost-duke"}, "reply_to_user": {"reputation": 117, "user_id": 12185282, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lwQMLnUZAeI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcBevbtLYaqdkjGOANpFz1mBnX3KQ/photo.jpg?sz=128", "display_name": "Daniel Decker", "link": "https://stackoverflow.com/users/12185282/daniel-decker"}, "edited": false, "score": 2, "creation_date": 1573615531, "post_id": 58829604, "comment_id": 103935660, "body": "yes, rand is not safe, use drand48_r or erand48 instead"}, {"owner": {"reputation": 117, "user_id": 12185282, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lwQMLnUZAeI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcBevbtLYaqdkjGOANpFz1mBnX3KQ/photo.jpg?sz=128", "display_name": "Daniel Decker", "link": "https://stackoverflow.com/users/12185282/daniel-decker"}, "edited": false, "score": 1, "creation_date": 1573617210, "post_id": 58829604, "comment_id": 103935995, "body": "ok, so I&#39;ve swapped out the line which used the gettid() with:     &quot;pthread_t tid = syscall(SYS_gettid);&quot; and the line which used rand() with:     &quot;int max = drand48_r()%100;&quot; does that seem like the correct way to go?"}, {"owner": {"reputation": 121, "user_id": 7981505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9810108e3c8b0ecb0b582b29213f21b6?s=128&d=identicon&r=PG&f=1", "display_name": "ghost_duke", "link": "https://stackoverflow.com/users/7981505/ghost-duke"}, "reply_to_user": {"reputation": 117, "user_id": 12185282, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lwQMLnUZAeI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcBevbtLYaqdkjGOANpFz1mBnX3KQ/photo.jpg?sz=128", "display_name": "Daniel Decker", "link": "https://stackoverflow.com/users/12185282/daniel-decker"}, "edited": false, "score": 1, "creation_date": 1573656182, "post_id": 58829604, "comment_id": 103953317, "body": "you don&#39;t need syscall, sorry I went to sleep last night before answering properly but @user3629249 is correct. next edit would have been about you creating just 1 thread in main. keep in mind you should create threads only from main."}], "tags": [], "owner": {"reputation": 121, "user_id": 7981505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9810108e3c8b0ecb0b582b29213f21b6?s=128&d=identicon&r=PG&f=1", "display_name": "ghost_duke", "link": "https://stackoverflow.com/users/7981505/ghost-duke"}, "is_accepted": false, "score": 2, "last_activity_date": 1573613268, "creation_date": 1573613268, "answer_id": 58829604, "question_id": 58829193, "link": "https://stackoverflow.com/questions/58829193/spawning-arbitrary-number-of-threads/58829604#58829604", "title": "Spawning Arbitrary Number of Threads", "body": "<p>1: I see no function called <strong>gettid()</strong> </p>\n\n<pre><code>pthread_t tid = gettid();\nsrand48(gettid());\n</code></pre>\n\n<p>2: You cannot print pthread_t as an integer, it's a structure </p>\n\n<pre><code>printf(\"My thread identifier is: %d\\n\", tid);\n</code></pre>\n\n<p>3: it's rand(), I have not seen nrand() before.</p>\n\n<pre><code>int max = nrand()%100;\n</code></pre>\n\n<p>Fix these and edit the question if required.</p>\n"}, {"comments": [{"owner": {"reputation": 117, "user_id": 12185282, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lwQMLnUZAeI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcBevbtLYaqdkjGOANpFz1mBnX3KQ/photo.jpg?sz=128", "display_name": "Daniel Decker", "link": "https://stackoverflow.com/users/12185282/daniel-decker"}, "edited": false, "score": 1, "creation_date": 1573621301, "post_id": 58830491, "comment_id": 103936864, "body": "Thank you so much! I&#39;ve been trying to figure out how to do this for a very long time and failing to understand (I&#39;m still very new to C programming), you make it very clear and easy to understand and I really appreciate you giving me something to work with!"}], "tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": true, "score": 3, "last_activity_date": 1573620979, "last_edit_date": 1573620979, "creation_date": 1573620462, "answer_id": 58830491, "question_id": 58829193, "link": "https://stackoverflow.com/questions/58829193/spawning-arbitrary-number-of-threads/58830491#58830491", "title": "Spawning Arbitrary Number of Threads", "body": "<p>If I understand your objective, you want to create the number of threads as the command line parameter indicates.</p>\n\n<p>(remembering that any specific OS can only support a fixed number of threads, which varies depending on the OS, so I will not validate the magnitude that number here.)</p>\n\n<p>the following proposed code:</p>\n\n<ol>\n<li>cleanly compiles</li>\n<li>performs the desired functionality</li>\n<li>documents why each header file is included</li>\n<li>checks for error indications returned from C library functions, like <code>pthread_create()</code></li>\n</ol>\n\n<p>and now the proposed code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;   // printf(), perror(), NULL\n#include &lt;pthread.h&gt; // pthread_create(), pthread_join(), pthread_t\n#include &lt;stdlib.h&gt;  // exit(), EXIT_FAILURE, atof()\n\nvoid *runner(void *param); //the thread\n\nint main(int argc, char *argv[]) \n{\n    if (argc != 2)\n    {\n        fprintf(stderr, \"Usage: %s &lt;integer value&gt;\\n\", argv[0]);\n        exit( EXIT_FAILURE );\n    }\n\n    // might want to use: `strtol()` rather than `atoi()` \n    // so can check for errors\n    size_t maxThreads = (size_t)atoi(argv[1]);\n\n    pthread_t tid[ maxThreads ];   \n    for( size_t i=0; i&lt;maxThreads; i++ )\n    {\n        tid[i] = 0;\n    }\n\n    // create the threads\n    for( size_t i=0; i&lt;maxThreads; i++ )\n    {\n        if( pthread_create( &amp;tid[i], NULL, runner, (void *)i ) )\n        { \n            perror( \"pthread_create failed\" );\n        }\n    }\n\n    // wait for each thread to exit\n    for( size_t i = 0; i&lt;maxThreads; i++ )\n    {\n        // if thread was created, then wait for it to exit\n        if( tid[i] != 0 )\n        {\n            pthread_join( tid[i], NULL );\n        }\n    }\n}\n\n\nvoid *runner(void *arg)\n{\n    size_t threadNum = (size_t)arg;\n    printf( \"in thread: %zu\\n\", threadNum );\n\n    pthread_exit( NULL );\n}\n</code></pre>\n\n<p>a run with no command line parameter results in: (where the executable is named: untitled</p>\n\n<pre><code>Usage: ./untitled &lt;integer value&gt;\n</code></pre>\n\n<p>a run with a command line parameter of 10 results in:</p>\n\n<pre><code>in thread: 0\nin thread: 4\nin thread: 2\nin thread: 6\nin thread: 1\nin thread: 5\nin thread: 7\nin thread: 8\nin thread: 9\nin thread: 3\n</code></pre>\n\n<p>which makes it clear that threads are run in no particular order</p>\n"}], "owner": {"reputation": 117, "user_id": 12185282, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lwQMLnUZAeI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcBevbtLYaqdkjGOANpFz1mBnX3KQ/photo.jpg?sz=128", "display_name": "Daniel Decker", "link": "https://stackoverflow.com/users/12185282/daniel-decker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 58830491, "answer_count": 2, "score": 2, "last_activity_date": 1573620979, "creation_date": 1573609749, "last_edit_date": 1573613665, "question_id": 58829193, "link": "https://stackoverflow.com/questions/58829193/spawning-arbitrary-number-of-threads", "title": "Spawning Arbitrary Number of Threads", "body": "<p>I'm trying to write a program which will spawn an arbitrary number of threads, similar to the code I have in <a href=\"https://stackoverflow.com/questions/58826841/convert-a-process-based-program-into-a-thread-based-version/58828623?noredirect=1#comment103933798_58828623\">Convert a process based program into a thread based version?</a>, which uses processes to do what I'm trying to accomplish, so far I have the following code, I'm getting a lot of warnings currently, but I'm really wondering if I'm approaching what I'm trying to do somewhat correctly.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid *runner(void *param); //the thread\n\nint main(int argc, char *argv[]) {\n  pthread_t tid = gettid();\n  pthread_attr_t attr;\n\n  if (argc != 2){\n    fprintf(stderr, \"Usage: a.out &lt;integer value&gt;\\n\");\n    return -1;\n  }\n\n  if (atoi(argv[1]) &lt; 0) {\n    fprintf(stderr, \"Argument %d must be non negative\\n\", atoi(argv[1]));\n    return -1;\n  }\n\n  printf(\"My thread identifier is: %d\\n\", tid);\n\n  // default attributes\n  pthread_attr_init(&amp;attr);\n\n  // create the thread\n  pthread_create(&amp;tid, &amp;attr, runner, argv[1]);\n\n  // wait for the thread to exit\n  pthread_join(tid, NULL);\n\n}\n\nvoid *runner(void *param){\n  //int i, upper = atoi(param);\n  int i;\n  srand48(gettid());\n  int max = nrand()%100;\n\n  if (max &gt; 0){\n    for (i=1; i&lt;=max; i++){\n      printf(\"Child %d executes iteration\\n\", param, i);\n    }\n  }\n  pthread_exit(0);\n}\n</code></pre>\n\n<p>Appreciate  any guidance I can get with this!</p>\n"}, {"tags": ["c", "arrays", "character"], "comments": [{"owner": {"reputation": 897, "user_id": 10492703, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rRz5r.png?s=128&g=1", "display_name": "jacob13smith", "link": "https://stackoverflow.com/users/10492703/jacob13smith"}, "edited": false, "score": 0, "creation_date": 1573609864, "post_id": 58829156, "comment_id": 103934518, "body": "Why are you looping <code>n</code> times when <code>n</code> isn&#39;t even declared?"}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1573610515, "post_id": 58829156, "comment_id": 103934677, "body": "s/declared/initialized"}], "answers": [{"tags": [], "owner": {"reputation": 2416, "user_id": 12188799, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-x2Us7lDjK_k/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdbvJBo6jnFH2eAReBMTWM_XkFHSw/photo.jpg?sz=128", "display_name": "Javier Silva Ort&#237;z", "link": "https://stackoverflow.com/users/12188799/javier-silva-ort%c3%adz"}, "is_accepted": false, "score": 0, "last_activity_date": 1573612187, "last_edit_date": 1573612187, "creation_date": 1573610908, "answer_id": 58829321, "question_id": 58829156, "link": "https://stackoverflow.com/questions/58829156/how-to-reverse-characters-stored-in-an-array-in-c/58829321#58829321", "title": "How to reverse characters stored in an array in C?", "body": "<p>Let's assume you already have the word in <code>arrA</code>. Then to display in reverse order just do:</p>\n\n<pre><code>int len = strlen(arrA);\nfor (int i = len - 1; i &gt;= 0; i--)\n{\n    printf(\"%c\", arrA[i]);\n}\n</code></pre>\n\n<p>And to display per line in reverse order each letter do:</p>\n\n<pre><code>printf(\"%s\", \"\\n\");\nfor (int i = len - 1; i &gt;= 0; i--)\n{\n    printf(\"%c\\n\", arrA[i]);\n}\n</code></pre>\n\n<p>The full code would look like this:</p>\n\n<pre><code>int main()\n{\n    char arrA[100];\n\n    printf(\"Enter the word: \");\n    scanf(\"%s\", arrA);\n\n    //Prints the word\n    printf(\"%s\\n----\\n\", arrA);\n\n    int len = strlen(arrA);\n\n    //Prints in reversed order in a line\n    for (int i = len - 1; i &gt;= 0; i--)\n    {\n        printf(\"%c\", arrA[i]);\n    }\n    printf(\"%s\", \"\\n----\\n\");\n\n    //Prints in order in multiple lines\n    for (int i = 0; i &lt; len; i++)\n    {\n        printf(\"%c\\n\", arrA[i]);        \n    }\n\n    //Prints in reverse order in multiple lines.\n    printf(\"%s\", \"----\\n\");\n    for (int i = len - 1; i &gt;= 0; i--)\n    {\n        printf(\"%c\\n\", arrA[i]);\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 12195285, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-90WrffkTlpA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfGRyEcag6jDLW4GGbyyU5RS_uMDw/photo.jpg?sz=128", "display_name": "James Henderson", "link": "https://stackoverflow.com/users/12195285/james-henderson"}, "edited": false, "score": 0, "creation_date": 1573673122, "post_id": 58829662, "comment_id": 103962141, "body": "This is perfect! Thank you so much for your guidance!"}], "tags": [], "owner": {"reputation": 126, "user_id": 7669794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rXfPX.jpg?s=128&g=1", "display_name": "taseikyo", "link": "https://stackoverflow.com/users/7669794/taseikyo"}, "is_accepted": true, "score": 0, "last_activity_date": 1573613701, "creation_date": 1573613701, "answer_id": 58829662, "question_id": 58829156, "link": "https://stackoverflow.com/questions/58829156/how-to-reverse-characters-stored-in-an-array-in-c/58829662#58829662", "title": "How to reverse characters stored in an array in C?", "body": "<p>This problem is not so difficult, so we can solve it in a straightforward way.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n#define MAXLEN 100\n\nvoid primaryFunction() {\n    char arrA[MAXLEN] = {0};\n    char Arra[MAXLEN] = {0};\n    int i, len = 0;\n\n    printf(\"Enter Your Word:\\n\");\n    scanf(\"%s\", arrA);               // store the input word\n    printf(\"%s\\n----\\n\", arrA);\n\n    len = strlen(arrA);\n    for (i = 0; i &lt; len; ++i) {\n        Arra[i] = arrA[len - i - 1]; // reverse it!\n    }\n    printf(\"%s\\n----\\n\", Arra);\n\n    for (i = 0; i &lt; len; ++i) {\n        printf(\"%c\\n\", arrA[i]);\n    }\n\n    printf(\"----\\n\");\n    for (i = 0; i &lt; len; ++i) {\n        printf(\"%c\\n\", Arra[i]);\n    }\n}\n\nint main() {\n    primaryFunction();\n}\n</code></pre>\n\n<p>input</p>\n\n<pre><code>array\n</code></pre>\n\n<p>output</p>\n\n<pre><code>array\n----\nyarra\n----\na\nr\nr\na\ny\n----\ny\na\nr\nr\na\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 121, "user_id": 7981505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9810108e3c8b0ecb0b582b29213f21b6?s=128&d=identicon&r=PG&f=1", "display_name": "ghost_duke", "link": "https://stackoverflow.com/users/7981505/ghost-duke"}, "is_accepted": false, "score": 0, "last_activity_date": 1573614732, "creation_date": 1573614732, "answer_id": 58829775, "question_id": 58829156, "link": "https://stackoverflow.com/questions/58829156/how-to-reverse-characters-stored-in-an-array-in-c/58829775#58829775", "title": "How to reverse characters stored in an array in C?", "body": "<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\n#define MAXLEN 10\n\nvoid primaryFunction()\n{\n    char arrA[MAXLEN] = {0};\n\n    printf(\"Enter Your Word:\\n\");\n    int n = 0;\n    int e = 0;\n\n    //Use this just in case you run out of memory\n    while (e != 10 &amp;&amp; n &lt; MAXLEN) {\n        scanf(\"%c\", &amp;arrA[n]);\n        e = (int)arrA[n];\n        n++;\n    }\n\n    n--;\n\n    for(int i = 0; i&lt;n; i++)\n    {\n        printf(\"%c\", arrA[i]);           \n    }\n\n    printf(\"\\n----\\n\");\n\n    for(int i = (n-1); i&gt;=0; i--)\n    {\n        printf(\"%c\", arrA[i]);           \n    }\n\n    printf(\"\\n----\\n\");\n\n    for(int i = 0; i&lt;n; i++)\n    {\n        printf(\"%c\\n\", arrA[i]);           \n    }\n\n    printf(\"----\\n\");\n\n    for(int i = (n-1); i&gt;=0; i--)\n    {\n        printf(\"%c\\n\", arrA[i]);           \n    }\n}\n\nint main(void)\n{\n  primaryFunction();\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1573615303, "post_id": 58829812, "comment_id": 103935616, "body": "When <code>j=strlen(string);</code> then <code>string[j]</code> is <code>&#39;\\0&#39;</code> which if you swap with the first results in an empty-string..."}, {"owner": {"reputation": 157, "user_id": 10454066, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FwCqezw-Upk/AAAAAAAAAAI/AAAAAAAAATQ/U7qh5dxMsyk/photo.jpg?sz=128", "display_name": "Karthik Chennupati", "link": "https://stackoverflow.com/users/10454066/karthik-chennupati"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1573618755, "post_id": 58829812, "comment_id": 103936324, "body": "Yeah! forgot that. Thanks for pointing out."}], "tags": [], "owner": {"reputation": 157, "user_id": 10454066, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FwCqezw-Upk/AAAAAAAAAAI/AAAAAAAAATQ/U7qh5dxMsyk/photo.jpg?sz=128", "display_name": "Karthik Chennupati", "link": "https://stackoverflow.com/users/10454066/karthik-chennupati"}, "is_accepted": false, "score": -1, "last_activity_date": 1573618772, "last_edit_date": 1573618772, "creation_date": 1573615076, "answer_id": 58829812, "question_id": 58829156, "link": "https://stackoverflow.com/questions/58829156/how-to-reverse-characters-stored-in-an-array-in-c/58829812#58829812", "title": "How to reverse characters stored in an array in C?", "body": "<p>You can just reverse the string this way and print</p>\n\n<pre><code>for(int i=0, j=strlen(string)-1; i&lt;j; ++i, --j) swap(string[i], string[j]);\n</code></pre>\n\n<p>or even print the string in reverse order.</p>\n\n<pre><code>for(int i=strlen(string)-1; i&gt;=0; --i) printf(\"%c\\n\", string[i]);\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 12195285, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-90WrffkTlpA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfGRyEcag6jDLW4GGbyyU5RS_uMDw/photo.jpg?sz=128", "display_name": "James Henderson", "link": "https://stackoverflow.com/users/12195285/james-henderson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 367, "favorite_count": 0, "closed_date": 1573615525, "accepted_answer_id": 58829662, "answer_count": 4, "score": 0, "last_activity_date": 1573618772, "creation_date": 1573609398, "last_edit_date": 1573610463, "question_id": 58829156, "link": "https://stackoverflow.com/questions/58829156/how-to-reverse-characters-stored-in-an-array-in-c", "closed_reason": "Duplicate", "title": "How to reverse characters stored in an array in C?", "body": "<p>I am tasked with creating a program that uses functions to take a user input word, store it in an array,  and then display this word, the word in reverse, the word vertically, then the word reverse and vertical. For example:</p>\n\n<p>Input:</p>\n\n<pre><code>array\n</code></pre>\n\n<p>Output: </p>\n\n<pre><code>array\n ----\nyarra\n ---- \na\nr\nr\na\ny\n------\ny\na\nr\nr\na\n</code></pre>\n\n<p>So far, I have the code to store and display the word, I am just wondering what the best way to display this in reverse would be? The code so far:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n\nvoid primaryFunction()\n{\n  char arrA[100] = {0};\n\n  int n;\n    //unsigned char ch;\n    unsigned int i = 0;\n    printf(\"Enter Your Word:\\n\");\n\n    for(i = 0; i&lt;n; i++)\n    {\n    scanf(\"%c\", &amp;arrA[i]);\n    printf(\"\\n%c\",arrA[i]); \n    printf(\"%c\",arrA[i]);           \n    }\n}\n\nint main(void)\n{\n  primaryFunction();\n}\n</code></pre>\n\n<p>Any guidance can help. Thank you!!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1573609264, "post_id": 58829124, "comment_id": 103934407, "body": "Hint: Print <code>VECTOR: [</code> once, then the contents separated by commas, then the closing brace. Skip the comma after the last entry by checking your index vs. the array size."}], "answers": [{"comments": [{"owner": {"reputation": 405, "user_id": 7560917, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f6ad0889eaf5c0fde5d8a58cd2c30634?s=128&d=identicon&r=PG&f=1", "display_name": "Allen Li", "link": "https://stackoverflow.com/users/7560917/allen-li"}, "edited": false, "score": 0, "creation_date": 1573609609, "post_id": 58829165, "comment_id": 103934466, "body": "what if the user enter the array size as 5?"}, {"owner": {"reputation": 1064, "user_id": 551967, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a7a36c264afc0dc84a919dcbf3b92c69?s=128&d=identicon&r=PG", "display_name": "shan", "link": "https://stackoverflow.com/users/551967/shan"}, "reply_to_user": {"reputation": 405, "user_id": 7560917, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f6ad0889eaf5c0fde5d8a58cd2c30634?s=128&d=identicon&r=PG&f=1", "display_name": "Allen Li", "link": "https://stackoverflow.com/users/7560917/allen-li"}, "edited": false, "score": 0, "creation_date": 1573609848, "post_id": 58829165, "comment_id": 103934514, "body": "It will be something like this <code>VECTORS:[1.000000, 2.000000, 3.000000] VECTORS:[4.000000, 5.000000, 0.000000]</code>. What is the expected output?"}], "tags": [], "owner": {"reputation": 1064, "user_id": 551967, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a7a36c264afc0dc84a919dcbf3b92c69?s=128&d=identicon&r=PG", "display_name": "shan", "link": "https://stackoverflow.com/users/551967/shan"}, "is_accepted": false, "score": -1, "last_activity_date": 1573610451, "last_edit_date": 1573610451, "creation_date": 1573609481, "answer_id": 58829165, "question_id": 58829124, "link": "https://stackoverflow.com/questions/58829124/how-to-for-loop-an-array-then-put-elements-into-a-list-format/58829165#58829165", "title": "How to for loop an array then put elements into a list format?", "body": "<p>Change your for loop to take 3 elements at once.</p>\n\n<pre><code>for(a=0;a&lt;arraySize;a+=3) {\n   printf(\"VECTORS:[%lf\", vector[a]);\n   if (a+1 &lt; arraySize) printf(\", %lf\", vector[a+1]);\n   if (a+2 &lt; arraySize) printf(\", %lf\", vector[a+2]);\n   printf(\"]\\n\");\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 929, "user_id": 12136319, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nZLSt.jpg?s=128&g=1", "display_name": "Problematic Dude", "link": "https://stackoverflow.com/users/12136319/problematic-dude"}, "edited": false, "score": 0, "creation_date": 1573610384, "post_id": 58829185, "comment_id": 103934649, "body": "C don&#39;t support VLA . Modify your code to make it const literal."}, {"owner": {"reputation": 405, "user_id": 7560917, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f6ad0889eaf5c0fde5d8a58cd2c30634?s=128&d=identicon&r=PG&f=1", "display_name": "Allen Li", "link": "https://stackoverflow.com/users/7560917/allen-li"}, "edited": false, "score": 0, "creation_date": 1573612049, "post_id": 58829185, "comment_id": 103935013, "body": "should u define i in the if statement?"}], "tags": [], "owner": {"reputation": 897, "user_id": 10492703, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rRz5r.png?s=128&g=1", "display_name": "jacob13smith", "link": "https://stackoverflow.com/users/10492703/jacob13smith"}, "is_accepted": false, "score": 1, "last_activity_date": 1573610528, "last_edit_date": 1573610528, "creation_date": 1573609655, "answer_id": 58829185, "question_id": 58829124, "link": "https://stackoverflow.com/questions/58829124/how-to-for-loop-an-array-then-put-elements-into-a-list-format/58829185#58829185", "title": "How to for loop an array then put elements into a list format?", "body": "<p>Print <code>VECTOR</code> once then loop over all the vectors and output them in the desired format.</p>\n\n<pre><code>const int size = 10;\nint main(void) {\n   double vector[size];\n\n   for(int i=0;i&lt;size;i++) \n      scanf(\"%lf\", &amp;vector[i]);\n\n   printf(\"VECTOR: [ \");\n\n   for(int a=0;a&lt;size;a++){\n      printf(\"%lf\", vector[a]);\n      if(i &lt; size - 1)\n         printf(\", \");\n   }\n\n   printf(\" ]\");\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 929, "user_id": 12136319, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nZLSt.jpg?s=128&g=1", "display_name": "Problematic Dude", "link": "https://stackoverflow.com/users/12136319/problematic-dude"}, "is_accepted": true, "score": 1, "last_activity_date": 1573610787, "last_edit_date": 1573610787, "creation_date": 1573610328, "answer_id": 58829258, "question_id": 58829124, "link": "https://stackoverflow.com/questions/58829124/how-to-for-loop-an-array-then-put-elements-into-a-list-format/58829258#58829258", "title": "How to for loop an array then put elements into a list format?", "body": "<p>Your one major mistake is your array size.  I know your compiler won't issue any warning but this is not any feature which language provide so size must be a \nconstant numerical value or const expression.</p>\n\n<p>So in short you can't create array After asking size from user. This is completely wrong.</p>\n\n<pre><code>int arraySize;\nscanf(\"%d\",&amp;arraySize);\ndouble vector[arraySize];\n</code></pre>\n\n<p>You must make size const. If you want less values than the declared size you can decrease the no of times for loop will run but you can't decide array size as inputted by user.</p>\n\n<pre><code>const int size = 10; //  this is how your size should be. Even your compiler allowed VLA you should not try this. size of arrays must be constant.\n\n\nint main()\n{\n  unsigned int i,s;\n   int arr[size];\n   printf (\"Enter the size of array.\");\n   scanf(\"%d\",&amp;s);\n   for(i = 0 ; i&lt;s;i++){\n     scanf(\"%d\",&amp;arr[i]);\n   }\n   for(i = 0 ; i&lt;s;i++){\n     arr[i] = arr[i]*arr[i];\n   }\n   for(i = 0 ; i&lt;s;i++){\n     printf(\"%d\",arr[i]);\n   }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 121, "user_id": 7981505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9810108e3c8b0ecb0b582b29213f21b6?s=128&d=identicon&r=PG&f=1", "display_name": "ghost_duke", "link": "https://stackoverflow.com/users/7981505/ghost-duke"}, "is_accepted": false, "score": 0, "last_activity_date": 1573611513, "creation_date": 1573611513, "answer_id": 58829388, "question_id": 58829124, "link": "https://stackoverflow.com/questions/58829124/how-to-for-loop-an-array-then-put-elements-into-a-list-format/58829388#58829388", "title": "How to for loop an array then put elements into a list format?", "body": "<p>You need to allocate memory dynamically to use it.\nUse the printf in the code below to define precision.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void) {\n\n    int arraySize = 0;\n\n    scanf(\"%d\",&amp;arraySize);\n\n    double *vector = (double *) calloc(arraySize, sizeof(double));\n\n    for(int i=0; i&lt;arraySize; i++) {\n       scanf(\"%lf\", &amp;vector[i]);\n    }\n\n    printf(\"VECTORS:[\");\n    int a;\n    for(a=0;a&lt;arraySize;a++) {\n        printf(\" %.3lf\",vector[a]);\n        if (a&lt;(arraySize-1)) {\n            printf(\",\");\n        } else {\n            printf(\" \");\n        }\n    }\n    printf(\"]\");\n}\n</code></pre>\n"}], "owner": {"reputation": 405, "user_id": 7560917, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f6ad0889eaf5c0fde5d8a58cd2c30634?s=128&d=identicon&r=PG&f=1", "display_name": "Allen Li", "link": "https://stackoverflow.com/users/7560917/allen-li"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 58829258, "answer_count": 4, "score": -1, "last_activity_date": 1573611513, "creation_date": 1573609108, "question_id": 58829124, "link": "https://stackoverflow.com/questions/58829124/how-to-for-loop-an-array-then-put-elements-into-a-list-format", "title": "How to for loop an array then put elements into a list format?", "body": "<p>I'm writing a program which <code>scanf</code> integers and <code>printf</code> in double.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>int main(void) {\nint arraySize;\nscanf(\"%d\",&amp;arraySize);\ndouble vector[arraySize];\nfor(int i=0;i&lt;arraySize;i++) scanf(\"%lf\", &amp;vector[i]);\nfor(int a=0;a&lt;arraySize;a++) printf(\"VECTORS:[%lf]\",vector[a]);\n}\n</code></pre>\n\n<p>Since I need to <code>for loop</code> every element in the array then <code>printf</code> all of them one by one.\nthis is the output I had:</p>\n\n<pre><code>VECTORS:[1.000000] VECTORS:[2.000000] VECTORS:[3.000000] \n</code></pre>\n\n<p>How can I change the format of the <code>printf</code> function and get ouput like this:</p>\n\n<pre><code>VECTOR: [ 1.000, 2.000, 3.000 ]\n</code></pre>\n"}, {"tags": ["c++", "c", "clang", "openmp", "libclang"], "comments": [{"owner": {"reputation": 1807, "user_id": 1900441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa3540494c1cb556bf1f517992b172fe?s=128&d=identicon&r=PG", "display_name": "Jim Cownie", "link": "https://stackoverflow.com/users/1900441/jim-cownie"}, "edited": false, "score": 0, "creation_date": 1573816543, "post_id": 58829118, "comment_id": 104019292, "body": "Not your issue, but your test code is not doing what you think it is. Variables are shared by default, so you need #pragma omp parallel default(private) to do what your comment says (&quot;/* Fork a team of threads giving them their own copies of variables */&quot;). Normally it&#39;s better to declare variables in their minimal required scope, then sharing often falls out naturally."}, {"owner": {"reputation": 11, "user_id": 10119704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3010124d7b42de9cb648a491e04bab9f?s=128&d=identicon&r=PG&f=1", "display_name": "D. Tastet", "link": "https://stackoverflow.com/users/10119704/d-tastet"}, "reply_to_user": {"reputation": 1807, "user_id": 1900441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa3540494c1cb556bf1f517992b172fe?s=128&d=identicon&r=PG", "display_name": "Jim Cownie", "link": "https://stackoverflow.com/users/1900441/jim-cownie"}, "edited": false, "score": 0, "creation_date": 1574024608, "post_id": 58829118, "comment_id": 104073072, "body": "Right, I should have mentioned that I found the test file out there on the internet. It originally had a private clause, but I removed it to see if there was any effect on the AST."}], "owner": {"reputation": 11, "user_id": 10119704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3010124d7b42de9cb648a491e04bab9f?s=128&d=identicon&r=PG&f=1", "display_name": "D. Tastet", "link": "https://stackoverflow.com/users/10119704/d-tastet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1573609019, "creation_date": 1573609019, "question_id": 58829118, "link": "https://stackoverflow.com/questions/58829118/libclang-cxcursors-hiding-body-of-openmp-directives", "title": "libclang CXCursors hiding body of openmp directives?", "body": "<p>I'm trying to write a linter for openmp code, but libclang hides the body of openmp directives. My problem is essentially the same as <a href=\"http://lists.llvm.org/pipermail/cfe-dev/2015-January/041226.html\" rel=\"nofollow noreferrer\">this</a> unanswered issue from the llvm mailing list.</p>\n\n<p>I took a look at clang's textual ast-dump, and the information I need seems to be present. However, when I use the binary dump to create a CXCursor to iterate over the tree using the libclang library, the subtrees captured by openmp directives seem to turn into \"unexposed statements.\"</p>\n\n<p>I have tried using clang's parseTranslationUnit function to generate the AST internally, but the result is the same. Is this a limitation of libclang, or could I be doing something wrong? Below are snapshots of my code, the textual AST dump and the command I used to generate it, and the output I get from walking the AST with libclang. Thanks!</p>\n\n<p><strong>AST Walker:</strong></p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;clang-c/Index.h&gt;\nusing namespace std;\n\nint main(int argc, char** argv)\n{\n  CXIndex index = clang_createIndex(0, 0);\n  CXTranslationUnit unit = clang_createTranslationUnit(index, argv[1]); //.ast filename\n  if (unit == nullptr)\n  {\n    cerr &lt;&lt; \"Unable to parse translation unit. Quitting.\" &lt;&lt; endl;\n    exit(-1);\n  }\n  printf(\"%d\\n\",clang_getNumDiagnostics(unit));\n  for (unsigned I = 0, N = clang_getNumDiagnostics(unit); I != N; ++I) { \n    CXDiagnostic Diag = clang_getDiagnostic(unit, I);\n    CXString String = clang_formatDiagnostic(Diag, clang_defaultDiagnosticDisplayOptions());\n    fprintf(stderr, \"%s\\n\", clang_getCString(String));\n    clang_disposeString(String);\n}\n  CXCursor cursor = clang_getTranslationUnitCursor(unit);\n  clang_visitChildren(\n    cursor,\n    [](CXCursor c, CXCursor parent, CXClientData client_data)\n    {\n      if(clang_Location_isFromMainFile(clang_getCursorLocation(c))){\n        unsigned loc = -1;\n        clang_getExpansionLocation(clang_getCursorLocation(c),NULL,&amp;loc,NULL,NULL);\n        printf(\"%d: \",loc);\n        cout &lt;&lt; clang_getCString(clang_getCursorSpelling(c))&lt;&lt; '+' &lt;&lt; clang_getCString(clang_getCursorKindSpelling(clang_getCursorKind(c))) &lt;&lt; endl;\n      }\n      return CXChildVisit_Recurse;\n    },\n    nullptr);\n  clang_disposeTranslationUnit(unit);\n  clang_disposeIndex(index);\n}\n</code></pre>\n\n<p><strong>Test File:</strong></p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;omp.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main (int argc, char *argv[]) \n{\nint nthreads, tid;\n\n/* Fork a team of threads giving them their own copies of variables */\n#pragma omp parallel\n  {\n\n  /* Obtain thread number */\n  tid = omp_get_thread_num();\n  printf(\"Hello World from thread = %d\\n\", tid);\n\n  /* Only master thread does this */\n  if (tid == 0) \n    {\n    nthreads = omp_get_num_threads();\n    printf(\"Number of threads = %d\\n\", nthreads);\n    }\n\n  }  /* All threads join master thread and disband */\n\n}\n</code></pre>\n\n<p><strong>Textual AST:</strong></p>\n\n<pre><code>`-FunctionDecl 0x7fbcd785a140 &lt;helloworld.c:17:1, line:38:1&gt; line:17:5 main 'int (int, char **)'\n  |-ParmVarDecl 0x7fbcd7859f38 &lt;col:11, col:15&gt; col:15 argc 'int'\n  |-ParmVarDecl 0x7fbcd785a020 &lt;col:21, col:32&gt; col:27 argv 'char **':'char **'\n  `-CompoundStmt 0x7fbcd785cd18 &lt;line:18:1, line:38:1&gt;\n    |-DeclStmt 0x7fbcd785a308 &lt;line:19:1, col:18&gt;\n    | |-VarDecl 0x7fbcd785a208 &lt;col:1, col:5&gt; col:5 used nthreads 'int'\n    | `-VarDecl 0x7fbcd785a288 &lt;col:1, col:15&gt; col:15 used tid 'int'\n    `-OMPParallelDirective 0x7fbcd785cce0 &lt;line:22:1, col:44&gt;\n      |-OMPPrivateClause 0x7fbcd785c538 &lt;col:22, col:43&gt;\n      | |-DeclRefExpr 0x7fbcd785a320 &lt;col:30&gt; 'int' lvalue Var 0x7fbcd785a208 'nthreads' 'int'\n      | `-DeclRefExpr 0x7fbcd785a340 &lt;col:40&gt; 'int' lvalue Var 0x7fbcd785a288 'tid' 'int'\n      `-CapturedStmt 0x7fbcd785ccb8 &lt;line:23:3, line:36:3&gt;\n        `-CapturedDecl 0x7fbcd785c650 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; nothrow\n          |-CompoundStmt 0x7fbcd785cc90 &lt;line:23:3, line:36:3&gt; openmp_structured_block\n          | |-BinaryOperator 0x7fbcd785c8f0 &lt;line:26:3, col:28&gt; 'int' '='\n          | | |-DeclRefExpr 0x7fbcd785c848 &lt;col:3&gt; 'int' lvalue Var 0x7fbcd785a288 'tid' 'int'\n          | | `-CallExpr 0x7fbcd785c8d0 &lt;col:9, col:28&gt; 'int'\n          | |   `-ImplicitCastExpr 0x7fbcd785c8b8 &lt;col:9&gt; 'int (*)(void)' &lt;FunctionToPointerDecay&gt;\n          | |     `-DeclRefExpr 0x7fbcd785c868 &lt;col:9&gt; 'int (void)' Function 0x7fbcd781f590 'omp_get_thread_num' 'int (void)'\n          | |-CallExpr 0x7fbcd785c9d0 &lt;line:27:3, col:47&gt; 'int'\n          | | |-ImplicitCastExpr 0x7fbcd785c9b8 &lt;col:3&gt; 'int (*)(const char *, ...)' &lt;FunctionToPointerDecay&gt;\n          | | | `-DeclRefExpr 0x7fbcd785c910 &lt;col:3&gt; 'int (const char *, ...)' Function 0x7fbcd7847550 'printf' 'int (const char *, ...)'\n          | | |-ImplicitCastExpr 0x7fbcd785ca18 &lt;col:10&gt; 'const char *' &lt;NoOp&gt;\n          | | | `-ImplicitCastExpr 0x7fbcd785ca00 &lt;col:10&gt; 'char *' &lt;ArrayToPointerDecay&gt;\n          | | |   `-StringLiteral 0x7fbcd785c930 &lt;col:10&gt; 'char [30]' lvalue \"Hello World from thread = %d\\n\"\n          | | `-ImplicitCastExpr 0x7fbcd785ca30 &lt;col:44&gt; 'int' &lt;LValueToRValue&gt;\n          | |   `-DeclRefExpr 0x7fbcd785c968 &lt;col:44&gt; 'int' lvalue Var 0x7fbcd785a288 'tid' 'int'\n          | `-IfStmt 0x7fbcd785cc78 &lt;line:30:3, line:34:5&gt;\n          |   |-BinaryOperator 0x7fbcd785caa0 &lt;line:30:7, col:14&gt; 'int' '=='\n          |   | |-ImplicitCastExpr 0x7fbcd785ca88 &lt;col:7&gt; 'int' &lt;LValueToRValue&gt;\n          |   | | `-DeclRefExpr 0x7fbcd785ca48 &lt;col:7&gt; 'int' lvalue Var 0x7fbcd785a288 'tid' 'int'\n          |   | `-IntegerLiteral 0x7fbcd785ca68 &lt;col:14&gt; 'int' 0\n          |   `-CompoundStmt 0x7fbcd785cc58 &lt;line:31:5, line:34:5&gt;\n          |     |-BinaryOperator 0x7fbcd785cb38 &lt;line:32:5, col:36&gt; 'int' '='\n          |     | |-DeclRefExpr 0x7fbcd785cac0 &lt;col:5&gt; 'int' lvalue Var 0x7fbcd785a208 'nthreads' 'int'\n          |     | `-CallExpr 0x7fbcd785cb18 &lt;col:16, col:36&gt; 'int'\n          |     |   `-ImplicitCastExpr 0x7fbcd785cb00 &lt;col:16&gt; 'int (*)(void)' &lt;FunctionToPointerDecay&gt;\n          |     |     `-DeclRefExpr 0x7fbcd785cae0 &lt;col:16&gt; 'int (void)' Function 0x7fbcd781f090 'omp_get_num_threads' 'int (void)'\n          |     `-CallExpr 0x7fbcd785cbe0 &lt;line:33:5, col:48&gt; 'int'\n          |       |-ImplicitCastExpr 0x7fbcd785cbc8 &lt;col:5&gt; 'int (*)(const char *, ...)' &lt;FunctionToPointerDecay&gt;\n          |       | `-DeclRefExpr 0x7fbcd785cb58 &lt;col:5&gt; 'int (const char *, ...)' Function 0x7fbcd7847550 'printf' 'int (const char *, ...)'\n          |       |-ImplicitCastExpr 0x7fbcd785cc28 &lt;col:12&gt; 'const char *' &lt;NoOp&gt;\n          |       | `-ImplicitCastExpr 0x7fbcd785cc10 &lt;col:12&gt; 'char *' &lt;ArrayToPointerDecay&gt;\n          |       |   `-StringLiteral 0x7fbcd785cb78 &lt;col:12&gt; 'char [24]' lvalue \"Number of threads = %d\\n\"\n          |       `-ImplicitCastExpr 0x7fbcd785cc40 &lt;col:40&gt; 'int' &lt;LValueToRValue&gt;\n\n</code></pre>\n\n<p><strong>Command to generate AST (change to emit-ast for the binary file):</strong></p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>clang -fopenmp -Xclang -ast-dump -L/usr/local/lib helloworld.c\n</code></pre>\n\n<p><strong>Program Output:</strong></p>\n\n<pre><code>0\n13: omp.h+inclusion directive\n14: stdio.h+inclusion directive\n15: stdlib.h+inclusion directive\n17: main+FunctionDecl\n17: argc+ParmDecl\n17: argv+ParmDecl\n18: +CompoundStmt\n19: +DeclStmt\n19: nthreads+VarDecl\n19: tid+VarDecl\n22: +OMPParallelDirective\n23: +UnexposedStmt\n26: tid+DeclRefExpr\n32: nthreads+DeclRefExpr\n</code></pre>\n"}, {"tags": ["c", "arrays", "string"], "comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1573607552, "post_id": 58828905, "comment_id": 103934011, "body": "You leak memory, you miss to do <code>free</code>. Also <code>if (surname = strpbrk(input, &quot; &quot;))</code>  - you meant to <code>==</code> ?"}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1573609095, "post_id": 58828905, "comment_id": 103934375, "body": "also... <code>if (name == NULL | surname == NULL)</code> ==&gt; <code>if (name == NULL || surname == NULL)</code>. One | is bitwise or, two ||s is logical or."}, {"owner": {"user_type": "does_not_exist", "display_name": "user12039958"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1573958405, "post_id": 58828905, "comment_id": 104058635, "body": "@KamilCuk No I want to assign strpbrk() to surname if it exists, which is what the implementation does... And yes the code is incomplete, which is why the free() hasn&#39;t been implemented yet..."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1574003613, "post_id": 58828905, "comment_id": 104067000, "body": "Why have you deleted all the text of the original and replaced it? None of the answers or comments make any sense anymore"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 1, "creation_date": 1574008282, "post_id": 58828905, "comment_id": 104068346, "body": "please do not vandalize your post; I&#39;ve rolled back the edits."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1574008576, "post_id": 58828905, "comment_id": 104068412, "body": "<code>if ((length &gt; 0) &amp;&amp; (input[length - 1] == &#39;\\n&#39;)) input[length - 1] = &#39;\\0&#39;;</code> is better written as <code>input[ strcspn( input, &quot;\\n&quot; ) ] = &#39;\\0&#39;;</code>  See <a href=\"https://stackoverflow.com/questions/2693776/removing-trailing-newline-character-from-fgets-input\" title=\"removing trailing newline character from fgets input\">stackoverflow.com/questions/2693776/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 480, "user_id": 4956243, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jRaTj.jpg?s=128&g=1", "display_name": "Drake Main", "link": "https://stackoverflow.com/users/4956243/drake-main"}, "is_accepted": false, "score": 1, "last_activity_date": 1573609087, "last_edit_date": 1573609087, "creation_date": 1573608769, "answer_id": 58829086, "question_id": 58828905, "link": "https://stackoverflow.com/questions/58828905/how-to-dereference-a-string-pointer/58829086#58829086", "title": "How to dereference a string pointer", "body": "<p>I think you want <code>strcpy(char* dest, char* src)</code>. Dereferencing a char* will simply yield you the first char in the string. </p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    char* test = \"hello world\";\n    char* test2 = malloc(11*sizeof(char));\n    strcpy(test2, test);\n\n    printf(\"%s\\n\", test);\n    printf(\"%s\\n\", test2);\n    test2[5] = '_';\n    printf(\"%s\\n\", test);\n    printf(\"%s\\n\", test2);\n    printf(\"%c\\n\", *test);\n\n    free(test2);\n}\n</code></pre>\n\n<p>spits out </p>\n\n<pre><code>hello world                                                                                                                                                                        \nhello world                                                                                                                                                                        \nhello world                                                                                                                                                                        \nhello_world                                                                                                                                                                        \nh\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user12039958"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1574008247, "creation_date": 1573607220, "last_edit_date": 1574008247, "question_id": 58828905, "link": "https://stackoverflow.com/questions/58828905/how-to-dereference-a-string-pointer", "title": "How to dereference a string pointer", "body": "<p>I'm having issues getting the desired behaviour out of my code. I'm new to the C language (although I usually program in C++ so I'm sort of familiar), and I'm unsure where to go with my issue. In the below code, when attempting to populate the 2 strings with the contents of the \"input\" string passed to the function, the result is that the memory locations are passed to the 2 strings, meaning when I perform modifications on the individual strings, the original data is edited... I want to have it such that the initial data is copied to the new memory locations allocated to the new strings. </p>\n\n<pre><code>bool interpretInput(char *input)\n{\n    char *name = malloc(MAX_NAME_SIZE / 2);\n    char *surname = malloc(MAX_NAME_SIZE / 2);\n\n    if (name == NULL | surname == NULL)\n    {\n        return 1;\n    }\n\n    int length = (int) strlen(input);\n    if ((length &gt; 0) &amp;&amp; (input[length - 1] == '\\n')) input[length - 1] = '\\0';\n\n    if (surname = strpbrk(input, \" \"))\n    {\n        int sLength = (int) strlen(surname);\n\n        for (int i = 0; i &lt; sLength; i++)\n        {\n            surname[i] = surname[i + 1];\n        }\n\n        length = (int) strlen(input);\n\n        for (int i = 0; i &lt;= length - sLength; i++)\n        {\n            name[i] = input[i];\n        }\n\n        length = (int) strlen(name);\n        sLength = (int) strlen(surname);\n\n        printf(\"Name: %s length: %d \\n\", name, length);\n        printf(\"Surname: %s length: %d \\n\", surname, sLength);\n    }\n    else\n    {\n        printf(\"Name length: %d\", length);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>EDIT: I, effectively, want to populate one array with the values at each increment of another array, without using strcpy.</p>\n"}, {"tags": ["python", "c", "python-3.x", "string"], "comments": [{"owner": {"reputation": 3506, "user_id": 8164958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9ae95eb70ca30f93806b7ec071b13db?s=128&d=identicon&r=PG&f=1", "display_name": "Seb", "link": "https://stackoverflow.com/users/8164958/seb"}, "edited": false, "score": 1, "creation_date": 1573606898, "post_id": 58828836, "comment_id": 103933866, "body": "Regular expressions are the way to go. Check out <a href=\"https://docs.python.org/3/library/re.html#simulating-scanf\" rel=\"nofollow noreferrer\">this page</a> from the standard library."}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1573607140, "post_id": 58828836, "comment_id": 103933910, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/4289331/how-to-extract-numbers-from-a-string-in-python\">How to extract numbers from a string in Python?</a>"}, {"owner": {"reputation": 1, "user_id": 10010048, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NBjp7UyAd3Q/AAAAAAAAAAI/AAAAAAAABIU/aD2H0b3_KlE/photo.jpg?sz=128", "display_name": "user10010048", "link": "https://stackoverflow.com/users/10010048/user10010048"}, "reply_to_user": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1573629620, "post_id": 58828836, "comment_id": 103939374, "body": "@AlexanderC&#233;cile this answers the first part of my question, i dont know how the answer for the second part should look like."}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1573786959, "post_id": 58828836, "comment_id": 104008278, "body": "@user10010048 what is the second part? I\u2019m not sure I understand which is which."}], "answers": [{"tags": [], "owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "is_accepted": false, "score": 0, "last_activity_date": 1573607095, "creation_date": 1573607095, "answer_id": 58828892, "question_id": 58828836, "link": "https://stackoverflow.com/questions/58828836/how-can-i-read-defined-values-from-a-string-in-python-like-i-can-do-in-c-with-s/58828892#58828892", "title": "How can i read defined values from a string in python, like i can do in C with scanf", "body": "<p>As Seb said, regex!</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import re\n\nregex = r\"R(\\d+)C(\\d+)\"\n\ntest_str = \"R150C123\"\n\nmatch_res = re.fullmatch(regex, test_str)\n\nnum_1, num_2 = match_res.groups()\nnum_1 = int(num_1)\nnum_2 = int(num_2)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3426, "user_id": 10818128, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YiTeo4kuZiQ/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYYf6McGCeXvwrDf9sDgLHNO5VGKQ/mo/photo.jpg?sz=128", "display_name": "Derek Eden", "link": "https://stackoverflow.com/users/10818128/derek-eden"}, "is_accepted": false, "score": 0, "last_activity_date": 1573607768, "creation_date": 1573607768, "answer_id": 58828966, "question_id": 58828836, "link": "https://stackoverflow.com/questions/58828836/how-can-i-read-defined-values-from-a-string-in-python-like-i-can-do-in-c-with-s/58828966#58828966", "title": "How can i read defined values from a string in python, like i can do in C with scanf", "body": "<p>you could also do this in a one liner with regex:</p>\n\n<pre><code>import re\ns = 'R150C123'\n\nr,c = list(map(int,re.findall('\\d+',s)))\n</code></pre>\n\n<p>the re.findall function creates a list of all the numbers embedded in the string\nthe map(int,...) function converts each matched number to a int\nfinally list returns the ints as a list, allowing r&amp;c to be defined in one assignment</p>\n"}], "owner": {"reputation": 1, "user_id": 10010048, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NBjp7UyAd3Q/AAAAAAAAAAI/AAAAAAAABIU/aD2H0b3_KlE/photo.jpg?sz=128", "display_name": "user10010048", "link": "https://stackoverflow.com/users/10010048/user10010048"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 1, "answer_count": 2, "score": -1, "last_activity_date": 1573607768, "creation_date": 1573606629, "last_edit_date": 1573607735, "question_id": 58828836, "link": "https://stackoverflow.com/questions/58828836/how-can-i-read-defined-values-from-a-string-in-python-like-i-can-do-in-c-with-s", "title": "How can i read defined values from a string in python, like i can do in C with scanf", "body": "<p>I have  a String, which is formatted as following str=\"R%dC%d\" for example Str=R150C123 and i want to save the numeric values in a variable for example in C Language this would be as following:</p>\n\n<pre><code>int c,r;\nsscanf(Str,\"R%dC%d\",&amp;r,&amp;c);\n</code></pre>\n\n<p>in python i do it like this </p>\n\n<pre><code>c = int(str[str.find(\"C\") + 1:])\nr = int(str[:str.find(\"C\")])\n</code></pre>\n\n<p>is there any other way to do this in python similler to how i've done it in C?</p>\n\n<p>because my way in python takes a to much time to execute.</p>\n\n<p>another example for another String format is: Str=\"%[A-Z]%d\", for example Str= ABCD1293</p>\n\n<p>i want to save 2 values, the first one is an Array or a String and the second one is the numbers </p>\n\n<p>in C i do it like this:</p>\n\n<pre><code>int r;\nchar CC[2000];\nsscanf(s,\"%[A-Z]%d\",CC,&amp;r)\n</code></pre>\n\n<p>in Python like this:</p>\n\n<pre><code>        for j in x:\n            if j.isdigit():              \n                r = x[x.find(j):]\n                CC= x[:x.find(j)]\n                break\n</code></pre>\n\n<p>I dont think, that this is an elegant way to solve this kind of task in python.\nCan you please help me?</p>\n"}, {"tags": ["c", "function", "multiplication"], "comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1573606694, "post_id": 58828830, "comment_id": 103933828, "body": "Do you know how to write a function in C?"}, {"owner": {"reputation": 43, "user_id": 12247433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c90dc2268e84f98e79e2100a66b712fb?s=128&d=identicon&r=PG&f=1", "display_name": "PatientJK", "link": "https://stackoverflow.com/users/12247433/patientjk"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1573606871, "post_id": 58828830, "comment_id": 103933858, "body": "yea, so it just want me to write a function to implement what it want?"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1573606979, "post_id": 58828830, "comment_id": 103933882, "body": "Yes, write the definition for a function named <code>multiplier</code> that does what is described."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1573607063, "post_id": 58828830, "comment_id": 103933896, "body": "There is some question about what it means by \u201creal\u201d parameters. C does not have a standard real type. The author might mean <code>double</code> or <code>float</code>."}, {"owner": {"reputation": 43, "user_id": 12247433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c90dc2268e84f98e79e2100a66b712fb?s=128&d=identicon&r=PG&f=1", "display_name": "PatientJK", "link": "https://stackoverflow.com/users/12247433/patientjk"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1573607096, "post_id": 58828830, "comment_id": 103933902, "body": "okay thanks, I was just not sure about what it want"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1573607428, "post_id": 58828830, "comment_id": 103933976, "body": "The phrase &quot;definition of a function&quot; might be ambiguous. One might assume it&#39;s asking for a dictionary definition of the word &quot;function&quot;. But in fact it&#39;s asking for a <i>function definition</i> (that&#39;s a technical term in the C standard). In other words, you need to write a C function."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1573609009, "post_id": 58828830, "comment_id": 103934358, "body": "The &quot;definition&quot; and the &quot;implementation&quot; of a function are synonymous in C."}, {"owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "edited": false, "score": 0, "creation_date": 1573609152, "post_id": 58828830, "comment_id": 103934385, "body": "The &quot;definition&quot; of a function includes its return value, name, parameters (with names) and body.   If there is semicolon instead of a body, then it&#39;s a &quot;declaration&quot;."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "reply_to_user": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "edited": false, "score": 0, "creation_date": 1573609342, "post_id": 58828830, "comment_id": 103934422, "body": "@Kaz - actually, a function definition is a type of declaration.   A function declaration includes its name, return type, and type of arguments.   A function definition is a declaration that ALSO includes names of used arguments (unused arguments do not need to be named in the definition), and the function block (what you&#39;re calling the &quot;body&quot;)."}, {"owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1573609628, "post_id": 58828830, "comment_id": 103934471, "body": "@Peter That&#39;s a good correction, except in C, names aren&#39;t part of a declaration (e.g. there is no mismatch if multiple declarations of the same function use different parameter names, or no names), and parameters cannot be unnamed in a definition; that&#39;s a C++ feature."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "reply_to_user": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "edited": false, "score": 0, "creation_date": 1573610206, "post_id": 58828830, "comment_id": 103934596, "body": "@Kaz -  You&#39;re correct that the definition in C requires arguments to be named, even if unused."}], "answers": [{"tags": [], "owner": {"reputation": 2892, "user_id": 391691, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vCKhh.jpg?s=128&g=1", "display_name": "Simson", "link": "https://stackoverflow.com/users/391691/simson"}, "is_accepted": false, "score": 0, "last_activity_date": 1573639697, "last_edit_date": 1573639697, "creation_date": 1573612045, "answer_id": 58829466, "question_id": 58828830, "link": "https://stackoverflow.com/questions/58828830/the-definition-of-a-function-in-c/58829466#58829466", "title": "The definition of a function in C", "body": "<blockquote>\n  <p>Write the definition of a function <code>multiplier()</code>, which has two real parameters <code>n</code> and <code>m</code>, and which returns value of <code>n</code> multiplied by <code>m</code></p>\n</blockquote>\n\n<p>Lets try to unwrap this, there are no <em>real</em>-type in C so <em>Real</em> is the code word for <code>float</code> or <code>double</code>. <em>Function</em> is the name of a subroutine.</p>\n\n<p>The wording of the question is vague definition could ask for the optional prototype declaration(the definition of functions which is usually stored in the header files) which is</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>float multiplier(float,float);\n</code></pre>\n\n<p>or the function could be defined and implemented at the same time</p>\n\n<pre><code>float multiplier(float n, float m){\n   return (n*m);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 393, "user_id": 10572727, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bnMJo.jpg?s=128&g=1", "display_name": "Adan Vivero", "link": "https://stackoverflow.com/users/10572727/adan-vivero"}, "is_accepted": false, "score": 0, "last_activity_date": 1574183983, "creation_date": 1574183983, "answer_id": 58939590, "question_id": 58828830, "link": "https://stackoverflow.com/questions/58828830/the-definition-of-a-function-in-c/58939590#58939590", "title": "The definition of a function in C", "body": "<p>Your question is,</p>\n\n<blockquote>\n  <p>Write the definition of a function multiplier(), which has two real parameters n and m, and which returns value of n multiplied by m</p>\n</blockquote>\n\n<p>A function is a certain way to write a code, that way you can call it in the main, or wherever, and it performs any tasks assign to it. In your case, for your multiplier, it will perform the function of multiplication. Therefore, it would make sense to use two integers in order to perform this task.</p>\n\n<p>To start, since we will be returning an int, we will call it as that. We set it up like this,</p>\n\n<p><em>type</em> <em>name</em> (*parameters) \n{</p>\n\n<p>}</p>\n\n<p>in your case, \nint multiplier(<em>Parameters go here</em>)</p>\n\n<p>For the code:</p>\n\n<pre><code>int multiplier(int m, int n)\n{\n   return m*n;\n}\n</code></pre>\n\n<p>then when we call it in the main, we would pass two numbers for the multiplier and it will return it as a product.</p>\n\n<pre><code>int main()\n{\n  multipler(2, 4); // prints 8\n}\n</code></pre>\n\n<p>I hope this helps, I tried to explain it very basic. </p>\n"}], "owner": {"reputation": 43, "user_id": 12247433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c90dc2268e84f98e79e2100a66b712fb?s=128&d=identicon&r=PG&f=1", "display_name": "PatientJK", "link": "https://stackoverflow.com/users/12247433/patientjk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1574183983, "creation_date": 1573606599, "last_edit_date": 1573612288, "question_id": 58828830, "link": "https://stackoverflow.com/questions/58828830/the-definition-of-a-function-in-c", "title": "The definition of a function in C", "body": "<p>I have an assignment question which ask me about the <em>definition of a function.</em> I'm not quite sure how it want me to answer. The question is below:</p>\n\n<blockquote>\n  <p>Write the definition of a function <code>multiplier()</code>, which has two real parameters <code>n</code> and <code>m</code>, and which returns value of <code>n</code> multiplied by <code>m</code></p>\n</blockquote>\n"}, {"tags": ["c", "gcc", "optimization", "compiler-optimization"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 12363981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/573333c225c9336842c4afd4e62e3d63?s=128&d=identicon&r=PG&f=1", "display_name": "rs_oops", "link": "https://stackoverflow.com/users/12363981/rs-oops"}, "edited": false, "score": 0, "creation_date": 1573607256, "post_id": 58828889, "comment_id": 103933925, "body": "So, the loop unrolling was done manually. To be clear, I was specifically wondering why the compiler changed the loop index in the middle of the loop body. The source code did not include anything like that."}, {"owner": {"reputation": 9461, "user_id": 8422330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c0f90445d03447c587d1e595d531f69?s=128&d=identicon&r=PG&f=1", "display_name": "prl", "link": "https://stackoverflow.com/users/8422330/prl"}, "edited": false, "score": 0, "creation_date": 1573608605, "post_id": 58828889, "comment_id": 103934274, "body": "At first, I thought that it changes rcx so that it can use 1-byte offsets instead of 4-byte offsets. But that\u2019s wrong, because all the offsets would fit in 7 bits even if rcx weren\u2019t adjusted."}, {"owner": {"reputation": 11, "user_id": 12363981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/573333c225c9336842c4afd4e62e3d63?s=128&d=identicon&r=PG&f=1", "display_name": "rs_oops", "link": "https://stackoverflow.com/users/12363981/rs-oops"}, "edited": false, "score": 0, "creation_date": 1573609079, "post_id": 58828889, "comment_id": 103934367, "body": "Yeah, the highest offset would be 0x78 if it didn&#39;t adjust the index"}], "tags": [], "owner": {"reputation": 10926, "user_id": 300745, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/7KEV8.png?s=128&g=1", "display_name": "Gearoid Murphy", "link": "https://stackoverflow.com/users/300745/gearoid-murphy"}, "is_accepted": false, "score": 0, "last_activity_date": 1573607081, "creation_date": 1573607081, "answer_id": 58828889, "question_id": 58828812, "link": "https://stackoverflow.com/questions/58828812/gcc-loop-increment-optimization-o2-and-above/58828889#58828889", "title": "GCC Loop Increment Optimization -O2 and above", "body": "<p>0xffffffffffffff80 is -128 in 64-bit signed integers (I think). RCX is a scratch register, probably being used from some sort of pointer in this case. As it's subtracting, the -128 becomes +128. The compiler issues a set of instructions decrementing the offset by jumps of 64-bits. This indicates that the compiler is using loop-unrolling on blocks of 128-bits with a very specific set of operations all of which involve subtractions which may possibly be faster on your specific processor. It would be interesting to know your CPU type and the source code that produced this assembly.</p>\n"}], "owner": {"reputation": 11, "user_id": 12363981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/573333c225c9336842c4afd4e62e3d63?s=128&d=identicon&r=PG&f=1", "display_name": "rs_oops", "link": "https://stackoverflow.com/users/12363981/rs-oops"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1573607081, "creation_date": 1573606378, "question_id": 58828812, "link": "https://stackoverflow.com/questions/58828812/gcc-loop-increment-optimization-o2-and-above", "title": "GCC Loop Increment Optimization -O2 and above", "body": "<p>I've been doing some research involving optimization and loop unrolling and I've been looking at the generated assembly code for different optimization levels. I've come across a weird optimization strategy that gcc uses at -O2 and above. I was wondering if there was a name for this. Here's the generated assembly code:</p>\n\n<pre><code>mov    %rsi,(%rcx)\nmov    %rsi,0x8(%rcx)\nmov    %rsi,0x10(%rcx)\nmov    %rsi,0x18(%rcx)\nsub    $0xffffffffffffff80,%rcx // What is this called?\nmov    %rsi,-0x60(%rcx)\nmov    %rsi,-0x58(%rcx)\nmov    %rsi,-0x50(%rcx)\nmov    %rsi,-0x48(%rcx)\nmov    %rsi,-0x38(%rcx)\nmov    %rsi,-0x30(%rcx)\nmov    %rsi,-0x28(%rcx)\nmov    %rsi,-0x20(%rcx)\nmov    %rsi,-0x18(%rcx)\nmov    %rsi,-0x10(%rcx)\nmov    %rsi,-0x8(%rcx)\ncmp    %rdx,%r8\n</code></pre>\n"}, {"tags": ["c", "linux", "sockets"], "comments": [{"owner": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "edited": false, "score": 1, "creation_date": 1573605338, "post_id": 58828684, "comment_id": 103933532, "body": "Can you describe how you verified that the data fails to send, as opposed to the problem being on the receiver side?"}, {"owner": {"reputation": 975, "user_id": 4400904, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1e1cc89cb94ef29c646a07ed8da499c3?s=128&d=identicon&r=PG&f=1", "display_name": "hockeybro", "link": "https://stackoverflow.com/users/4400904/hockeybro"}, "reply_to_user": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "edited": false, "score": 0, "creation_date": 1573605545, "post_id": 58828684, "comment_id": 103933572, "body": "The program above is supposed to be a tunnel that handles multiple requests. Every time one comes in, I create a currSocket (as shown above) and send it to the appropriate spot. I tested the receiver app without the tunnel and it is able to receive messages, so that&#39;s how I know it works."}, {"owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "edited": false, "score": 1, "creation_date": 1573606071, "post_id": 58828684, "comment_id": 103933686, "body": "Suggest you grab a copy of Wireshark and see what&#39;s happening on the actual wire. That will let you know whether the problem lies with that code or over on the receiver."}, {"owner": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "edited": false, "score": 1, "creation_date": 1573606488, "post_id": 58828684, "comment_id": 103933779, "body": "I copy-pasted this code without modification, added ~20 lines around it to make it compile and run, and it successfully sent data multiple times. Please take the time to turn your snippet into a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">MCVE</a> so that you can be sure that you include all relevant information."}, {"owner": {"reputation": 975, "user_id": 4400904, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1e1cc89cb94ef29c646a07ed8da499c3?s=128&d=identicon&r=PG&f=1", "display_name": "hockeybro", "link": "https://stackoverflow.com/users/4400904/hockeybro"}, "reply_to_user": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "edited": false, "score": 0, "creation_date": 1573606818, "post_id": 58828684, "comment_id": 103933845, "body": "Hmm ok, maybe it&#39;s some other part of my code then. I will investigate. Thank you @thatotherguy"}, {"owner": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "edited": false, "score": 0, "creation_date": 1573606956, "post_id": 58828684, "comment_id": 103933876, "body": "It could still be this part but with different assumptions about how e.g. the connection was set up. A MCVE helps uncover unstated assumptions."}, {"owner": {"reputation": 975, "user_id": 4400904, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1e1cc89cb94ef29c646a07ed8da499c3?s=128&d=identicon&r=PG&f=1", "display_name": "hockeybro", "link": "https://stackoverflow.com/users/4400904/hockeybro"}, "reply_to_user": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "edited": false, "score": 0, "creation_date": 1573607760, "post_id": 58828684, "comment_id": 103934070, "body": "@thatotherguy I looked into it more and it&#39;s because the IP address is wrong, for some reason it get&#39;s overwritten by a buffer when I Call read to get data from another socket. Edited the original post"}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1573608001, "post_id": 58828684, "comment_id": 103934120, "body": "Where does <code>ipAddress</code> come from? Where does it go?"}, {"owner": {"reputation": 975, "user_id": 4400904, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1e1cc89cb94ef29c646a07ed8da499c3?s=128&d=identicon&r=PG&f=1", "display_name": "hockeybro", "link": "https://stackoverflow.com/users/4400904/hockeybro"}, "reply_to_user": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1573608113, "post_id": 58828684, "comment_id": 103934143, "body": "@Ry- It&#39;s a char* which is valid when I originally print it."}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1573608413, "post_id": 58828684, "comment_id": 103934224, "body": "Okay. Where does it come from, and where else are you using it?"}, {"owner": {"reputation": 975, "user_id": 4400904, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1e1cc89cb94ef29c646a07ed8da499c3?s=128&d=identicon&r=PG&f=1", "display_name": "hockeybro", "link": "https://stackoverflow.com/users/4400904/hockeybro"}, "edited": false, "score": 0, "creation_date": 1573609226, "post_id": 58828684, "comment_id": 103934401, "body": "I figured out. I didn&#39;t allocate enough space for ipAddress."}], "answers": [{"tags": [], "owner": {"reputation": 975, "user_id": 4400904, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1e1cc89cb94ef29c646a07ed8da499c3?s=128&d=identicon&r=PG&f=1", "display_name": "hockeybro", "link": "https://stackoverflow.com/users/4400904/hockeybro"}, "is_accepted": false, "score": -1, "last_activity_date": 1573609253, "creation_date": 1573609253, "answer_id": 58829144, "question_id": 58828684, "link": "https://stackoverflow.com/questions/58828684/c-sendto-doesnt-work-when-doing-it-repeatedly/58829144#58829144", "title": "C Sendto doesn&#39;t work when doing it repeatedly", "body": "<p>I hadn't allocated enough space for ipAddress. Had it as a pointer, when it should have been a char[] and I copy to it using strcpy. </p>\n"}], "owner": {"reputation": 975, "user_id": 4400904, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1e1cc89cb94ef29c646a07ed8da499c3?s=128&d=identicon&r=PG&f=1", "display_name": "hockeybro", "link": "https://stackoverflow.com/users/4400904/hockeybro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1573609253, "creation_date": 1573605019, "last_edit_date": 1573607725, "question_id": 58828684, "link": "https://stackoverflow.com/questions/58828684/c-sendto-doesnt-work-when-doing-it-repeatedly", "title": "C Sendto doesn&#39;t work when doing it repeatedly", "body": "<p>I'm facing a weird problem when using sendto() in C. I have this code:</p>\n\n<pre><code>struct sockaddr_in currSocket;\nint currSocketLength = sizeof(currSocket);\nmemset((char *)&amp;currSocket, 0, sizeof(currSocket));\ncurrSocket.sin_family = AF_INET;\ncurrSocket.sin_port = htons(serverPortNumber);\n// add the server IP address\ninet_aton(serverIP, &amp;currSocket.sin_addr);\n\nint send_result = sendto(masterSocket, bufferToSend , 1000, 0, (struct sockaddr *) &amp;currSocket, currSocketLength);\nif (send_result &lt; 0) {\n    perror(\"Something is wrong\");\n}\nbzero(bufferToSend, 1000);\n</code></pre>\n\n<p>This works great when I send data the first time in <code>bufferToSend</code>. However, if I want to send data again the exact same way (following the code above - create the socket and send it there), it doesn't get received. Why is this and how can I fix it?</p>\n\n<p>Edit:\nAfter looking into it some more, I've realized it's because my IP address string is wrong because it's being overwritten. It seems to have it's value change after I do a previous read. </p>\n\n<pre><code>// here the IP address is fine\nprintf(\"%s\\n\", ipAddress);\nchar bufferFromSocket[512];\nint amount_read = read(masterSocket, bufferFromSocket, 512);\n// here the IP address is overwritten by whatever is in bufferFromSocket\nprintf(\"%s\\n\", ipAddress);\n</code></pre>\n\n<p>Any ideas why this could be happening?</p>\n"}, {"tags": ["python", "c"], "answers": [{"tags": [], "owner": {"reputation": 1271, "user_id": 2027390, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/354a23f38243af2d4167b7acd598d8f1?s=128&d=identicon&r=PG&f=1", "display_name": "hugos", "link": "https://stackoverflow.com/users/2027390/hugos"}, "is_accepted": true, "score": 1, "last_activity_date": 1573609409, "creation_date": 1573609409, "answer_id": 58829157, "question_id": 58828537, "link": "https://stackoverflow.com/questions/58828537/c-function-imported-in-python-gives-meaningless-output-translation-mishap/58829157#58829157", "title": "C function imported in python gives meaningless output - translation mishap?", "body": "<p>By default, <code>ctypes</code> assumes that the function returns an <code>int</code>. You must specify that the function returns a <code>char*</code> for it to work. Try the following before calling the function:</p>\n\n<pre><code>pb_get_version.restype = ctypes.c_char_p\n</code></pre>\n"}], "owner": {"reputation": 1320, "user_id": 6145945, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tcVF8.jpg?s=128&g=1", "display_name": "SuperCiocia", "link": "https://stackoverflow.com/users/6145945/superciocia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 58829157, "answer_count": 1, "score": 0, "last_activity_date": 1573609409, "creation_date": 1573603812, "last_edit_date": 1573607144, "question_id": 58828537, "link": "https://stackoverflow.com/questions/58828537/c-function-imported-in-python-gives-meaningless-output-translation-mishap", "title": "C function imported in python gives meaningless output - translation mishap?", "body": "<p>I am translating some code from C to Python 3, and checking that the functions give the correct output.</p>\n\n<p>In the manual for the C code, this is what it says for the <code>pb_get_version()</code> function:</p>\n\n<p><a href=\"https://i.stack.imgur.com/GPo3x.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GPo3x.png\" alt=\"enter image description here\"></a></p>\n\n<p>I then try to implement this in Python. I load the DLL, define the function, and print its output.</p>\n\n<pre><code>import ctypes\n\nspinapi = ctypes.CDLL(\"spinapi64\")\npb_get_version = spinapi.pb_get_version\n\nversion = pb_get_version()\nprint(\"Using SpinAPI Library version {}\".format(version))\n\n% Using SpinAPI Library version 331435824 \n</code></pre>\n\n<p>The output is not in the YYYMMDD as I expect it...</p>\n\n<p>Could this be a translation error from the DLL (C) to Python? Is there a simple way to translate <code>char*</code> to python?</p>\n"}, {"tags": ["c", "loops", "char", "int", "scanf"], "comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1573604083, "post_id": 58828365, "comment_id": 103933257, "body": "<a href=\"http://www.asciitable.com/\" rel=\"nofollow noreferrer\">ASCII Table and Description</a> -- what character makes <code>number == 0</code> if you scan as a character instead of a int? (hint: none)? Always, always <b>validate the return</b> of any function you use to take user-input (especially <code>scanf</code>)."}, {"owner": {"reputation": 49, "user_id": 11721543, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-sCYH9bGIeGE/AAAAAAAAAAI/AAAAAAAAAAc/GVe-7ncO6OA/photo.jpg?sz=128", "display_name": "World", "link": "https://stackoverflow.com/users/11721543/world"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1573604197, "post_id": 58828365, "comment_id": 103933283, "body": "It doesen&#39;t return 0 ? bc its false ?"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1573604291, "post_id": 58828365, "comment_id": 103933306, "body": "When deciding whether to terminate the loop, instead of just looking at the value of <code>number</code>, also (or only) look at <i>the return value of <code>scanf</code> itself</i>."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1573604295, "post_id": 58828365, "comment_id": 103933308, "body": "The ASCII character <code>&#39;0&#39;</code> has decimal value <code>48</code>. The character with decimal value zero is the <i>nul-character</i> (which you can&#39;t enter). What about <code>while (scanf(&quot;%d&quot;,&amp;number) == 1) puts (&quot;text&quot;);</code> ?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1573604706, "post_id": 58828365, "comment_id": 103933408, "body": "Bonus: what remains in <code>stdin</code> <b><i>unread</i></b> if you type something other than a number? What type failure does it cause with <code>scanf</code>? (<i>matching</i> or <i>input</i>?) What if you needed to take more input after your loop exited? Spend 45 minutes with <a href=\"http://man7.org/linux/man-pages/man3/scanf.3.html\" rel=\"nofollow noreferrer\"><code>man 3 scanf</code></a> and save yourself ten-times that number of hours of frustration later..."}], "answers": [{"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1573604784, "post_id": 58828631, "comment_id": 103933419, "body": "How do I enter <code>341</code>?"}, {"owner": {"reputation": 3971, "user_id": 2840714, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/s9vli.jpg?s=128&g=1", "display_name": "ChuckCottrill", "link": "https://stackoverflow.com/users/2840714/chuckcottrill"}, "edited": false, "score": 1, "creation_date": 1573604920, "post_id": 58828631, "comment_id": 103933450, "body": "&#39;3&#39;, &#39;4&#39;, &#39;1&#39;, &#39;\\n&#39;, append to string, atoi()"}, {"owner": {"reputation": 121, "user_id": 7981505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9810108e3c8b0ecb0b582b29213f21b6?s=128&d=identicon&r=PG&f=1", "display_name": "ghost_duke", "link": "https://stackoverflow.com/users/7981505/ghost-duke"}, "edited": false, "score": 1, "creation_date": 1573604952, "post_id": 58828631, "comment_id": 103933455, "body": "you can enter 341, scanf will just read it char by char, thus printing out:  text 51text 52 text 49"}, {"owner": {"reputation": 49, "user_id": 11721543, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-sCYH9bGIeGE/AAAAAAAAAAI/AAAAAAAAAAc/GVe-7ncO6OA/photo.jpg?sz=128", "display_name": "World", "link": "https://stackoverflow.com/users/11721543/world"}, "edited": false, "score": 0, "creation_date": 1573605570, "post_id": 58828631, "comment_id": 103933578, "body": "not what i am asking about my question is  How to get a int from scanf and then work with them like n++ or using if statemans and when i insert &#39; .&#39;  and only &#39; . &#39; not other char only &#39; . &#39; to break from while ."}, {"owner": {"reputation": 49, "user_id": 11721543, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-sCYH9bGIeGE/AAAAAAAAAAI/AAAAAAAAAAc/GVe-7ncO6OA/photo.jpg?sz=128", "display_name": "World", "link": "https://stackoverflow.com/users/11721543/world"}, "edited": false, "score": 0, "creation_date": 1573647906, "post_id": 58828631, "comment_id": 103948532, "body": "Ok the second code works perfectly but how did it work why we get number *10 and if not n-48 i don&#39;t understand ."}, {"owner": {"reputation": 121, "user_id": 7981505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9810108e3c8b0ecb0b582b29213f21b6?s=128&d=identicon&r=PG&f=1", "display_name": "ghost_duke", "link": "https://stackoverflow.com/users/7981505/ghost-duke"}, "edited": false, "score": 0, "creation_date": 1573654906, "post_id": 58828631, "comment_id": 103952612, "body": "scanf will get all the characters which includes the end of line or &#39;\\n&#39; character also. n = (int)c; converts a char into it&#39;s ASCII value, read about ascii here: <a href=\"https://en.wikipedia.org/wiki/ASCII\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/ASCII</a>. thus char &#39;0&#39; = 48, &#39;1&#39; = 49, &#39;2&#39; = 50 and so on. I&#39;ll add an edit to explain more."}], "tags": [], "owner": {"reputation": 121, "user_id": 7981505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9810108e3c8b0ecb0b582b29213f21b6?s=128&d=identicon&r=PG&f=1", "display_name": "ghost_duke", "link": "https://stackoverflow.com/users/7981505/ghost-duke"}, "is_accepted": true, "score": 1, "last_activity_date": 1573656103, "last_edit_date": 1573656103, "creation_date": 1573604635, "answer_id": 58828631, "question_id": 58828365, "link": "https://stackoverflow.com/questions/58828365/while-loops-int-vs-char-reading-from-scanf-true-and-false/58828631#58828631", "title": "while loops , int vs char reading from scanf , true and false", "body": "<p>change it from scanf int to char</p>\n\n<p>Assumption: You are reading a single char at a time</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    char c = \"0\";\n    int n = 0;\n\n    while (n != 46)// we made a loop while if char isn't '.' ASCII - 46 do that\n    {\n        scanf(\" %c\", &amp;c);\n        n = (int)c;\n        printf(\"text %d\", n);\n        //Add if statement to confirm it is a number ASCII 48 - 57 and use it.\n    }\n    return 0;\n}\n</code></pre>\n\n<p>EDIT:\nJust some more info on how to use numbers:\ninput number one by one or just a whole number like 123 with some ending special char like ';' or change the line </p>\n\n<pre><code>scanf(\" %c\", &amp;c);\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>scanf(\"%c\", &amp;c);\n</code></pre>\n\n<p>this way it will register '\\n' as ASCII 10</p>\n\n<p>use that with atoi to get the actual int value and use it. </p>\n\n<p>EDIT 2:</p>\n\n<p>@World, you cannot expect to read only numbers and '.'\nOne way to do this with your own code is:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    char c = \"0\";\n    int n = 0;\n    int number = 0;\n\n    while (n != 46)// we made a loop while if char isn't '.' ASCII - 46 do that\n    {\n        scanf(\"%c\", &amp;c);\n        n = (int)c;\n\n        if (n&gt;=48 &amp;&amp; n&lt;=57) {\n            number *= 10;\n            number += (n-48);\n        }\n        if (n==10) {\n             printf(\"text %d\\n\", number);\n             //Use number for something over here\n             number = 0;\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>EDIT 3:\nLogic behind this:</p>\n\n<p>Let's say you enter 341 in the console\nthe line</p>\n\n<pre><code>scanf(\"%c\", &amp;c);\n</code></pre>\n\n<p>will read this one by one thus reading '3', '4', '1' and '\\n' respectively\nthe while loop </p>\n\n<pre><code>while (n != 46)\n</code></pre>\n\n<p>will thus run 4 times where:</p>\n\n<p>1st time</p>\n\n<p>c = '3'; \n<br> n = 51; \n<br> if (n>=48 &amp;&amp; n&lt;=57) is true;\n<br> number = 0 * 10; \n<br> number = number + n - 48 = 0 + 51 - 48 = 3</p>\n\n<p>2nd time</p>\n\n<p>c = '4'; \n<br> n = 52; \n<br> if (n>=48 &amp;&amp; n&lt;=57) is true;\n<br> number = 3 * 10 = 30; \n<br> number = number + n - 48 = 30 + 52 - 48 = 34</p>\n\n<p>3rd time</p>\n\n<p>c = '1'; \n<br> n = 49; \n<br> if (n>=48 &amp;&amp; n&lt;=57) is true;\n<br> number = 34 * 10 = 340; \n<br> number = number + n - 48 = 340 + 49 - 48 = 341</p>\n\n<p>4th time</p>\n\n<p>c = '\\n'; \n<br> n = 10; \n<br> if (n>=48 &amp;&amp; n&lt;=57) is false;\n<br> if (n==10) is true;\n<br> it prints \"text 341\" and sets number to 0</p>\n\n<p>while loop exits when c = '.' and n = 46</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1573607828, "last_edit_date": 1573607828, "creation_date": 1573607498, "answer_id": 58828937, "question_id": 58828365, "link": "https://stackoverflow.com/questions/58828365/while-loops-int-vs-char-reading-from-scanf-true-and-false/58828937#58828937", "title": "while loops , int vs char reading from scanf , true and false", "body": "<blockquote>\n  <p>how to make a program reading numbers from keyboard till I enter some special sign for ex '.' </p>\n</blockquote>\n\n<p>When <code>scanf(\"%d\",&amp;number)</code> returns 0, there is some non-numeric input.  Read that non-numeric input with alternate code.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n  while (1) {\n    int number;\n    int scan_count = scanf(\"%d\", &amp;number);\n    if (scan_count == EOF) break;  // End-of-file or rare input error.\n    if (scan_count != 1) {\n      int ch = fgetc(stdin);\n      if (ch == '.') break;  // Expected non-numeric input to break the loop.\n      printf(\"Unexpected input character '%c'\\n\", ch);\n    } else {\n      printf(\"Expected numeric input: %d\\n\", ch);\n    }\n  } // endwhile\n  printf(\"Done\\n\");\n}\n</code></pre>\n\n<hr>\n\n<p>A better approach is to  ditch <code>scanf()</code> and use fgets()` to read user input.  Then process the inputted string.</p>\n"}], "owner": {"reputation": 49, "user_id": 11721543, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-sCYH9bGIeGE/AAAAAAAAAAI/AAAAAAAAAAc/GVe-7ncO6OA/photo.jpg?sz=128", "display_name": "World", "link": "https://stackoverflow.com/users/11721543/world"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 1, "accepted_answer_id": 58828631, "answer_count": 2, "score": 0, "last_activity_date": 1573656103, "creation_date": 1573602524, "last_edit_date": 1573607694, "question_id": 58828365, "link": "https://stackoverflow.com/questions/58828365/while-loops-int-vs-char-reading-from-scanf-true-and-false", "title": "while loops , int vs char reading from scanf , true and false", "body": "<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\n    int number; // We make 1 int named number\n    scanf(\"%d\",&amp;number); // We give to number some number xd\n    while (number!=0)// We made a loop while if number isn't 0 do that\n    {\n        printf(\"text\");// print text\n        scanf(\"%d\",&amp;number); // and get again a number. \n        // So everything works well beside inserting some char instead of int.\n        // So what is the problem wont scanf return 0 so we exit the program not\n        // just printing a text all day?  That's my first question.\n    }\n    return 0;\n}\n</code></pre>\n\n<p>The second problem is how to make a program reading numbers from keyboard till I enter some special sign for ex '.' Yea we do it with loop while right? But how when <code>scanf(\"%d\",&amp;something)</code> it give me back <code>0</code> if I enter everything but number?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 1, "creation_date": 1573603188, "post_id": 58828352, "comment_id": 103933091, "body": "you mean print each line once and only once?"}, {"owner": {"reputation": 85, "user_id": 12300341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/019701aa28c787894824eae5d88bd49d?s=128&d=identicon&r=PG&f=1", "display_name": "Jaoa", "link": "https://stackoverflow.com/users/12300341/jaoa"}, "reply_to_user": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1573603689, "post_id": 58828352, "comment_id": 103933181, "body": "@yano that is correct but in a random order"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1573603974, "post_id": 58828352, "comment_id": 103933238, "body": "you&#39;ll need to keep track of what numbers have already been generated, and if you get a duplicate, generate another. Keep going until all in the set have been generated. Not very efficient. I think there are shuffling algorithms that could do a better job. But that aside, you could use an array of <code>bool</code>s, where the index into the array is the generated number. Set that to true for each generation, then check the whole array, when they&#39;re all true you&#39;re done."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1573604075, "post_id": 58828352, "comment_id": 103933256, "body": "be careful with <code>line[rand()%10]</code>. You say your file has 6 lines, then only <code>line[0]</code> thru <code>line[5]</code> are going to have valid data. Trying to print <code>line[6]</code> thru <code>line[9]</code> will invoke undefined behavior and probably print gibberish or segfault."}], "answers": [{"tags": [], "owner": {"reputation": 121, "user_id": 7981505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9810108e3c8b0ecb0b582b29213f21b6?s=128&d=identicon&r=PG&f=1", "display_name": "ghost_duke", "link": "https://stackoverflow.com/users/7981505/ghost-duke"}, "is_accepted": false, "score": 0, "last_activity_date": 1573608667, "creation_date": 1573608667, "answer_id": 58829067, "question_id": 58828352, "link": "https://stackoverflow.com/questions/58828352/printing-randomly-to-the-screen-in-c/58829067#58829067", "title": "Printing randomly to the screen in C", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;time.h&gt;\n\n#define LEN 128 //Don't mind the capital, personal preference for defines\n#define ARR 6 //Make this match the number of lines in your file\n\nint main(void) \n{\n    char line[ARR][LEN];\n    char fname[20];\n\n    int test[ARR] = {0}; //Added an array to test if index already created\n    int ind[ARR] = {0}; //Array to store index created randomly\n    int ind_done = 0; //Counter for index array\n\n    FILE *fptr = NULL; \n\n    int i = 0;\n    int tot = 0;\n    scanf(\"%s\",fname);  \n\n    fptr = fopen(fname, \"r\");\n    while(fgets(line[i], LEN, fptr)) \n    {\n        line[i][strlen(line[i]) - 1] = '\\0';\n        i++;\n    }\n\n    srand(time(0));\n\n    for(int i = 0; i &lt; ARR; ++i)\n    {\n        printf(\"%s\\n\", line[rand()%ARR]);\n    }\n\n    //Keep creating indexes using rand till all unique indexes are created\n    while (ind_done&lt;ARR) {\n        int i = rand()%ARR;\n        if (test[i] == 0) {\n            ind[ind_done] = i;\n            ind_done++;\n            test[i] = 1;\n        }\n    }\n\n    for(int i = 0; i &lt; ARR; ++i)\n    {\n        printf(\"%s\\n\", line[ind[i]]);\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 12300341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/019701aa28c787894824eae5d88bd49d?s=128&d=identicon&r=PG&f=1", "display_name": "Jaoa", "link": "https://stackoverflow.com/users/12300341/jaoa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573608667, "creation_date": 1573602414, "question_id": 58828352, "link": "https://stackoverflow.com/questions/58828352/printing-randomly-to-the-screen-in-c", "title": "Printing randomly to the screen in C", "body": "<p>I am trying to print to the screen randomly in C. I am using random and time to generate random index and printing it but It definetely is not the way to do it. How do I print every element randomly to the screen in c?</p>\n\n<p>Here is the code I have so far.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;time.h&gt;\n\n#define leng 128 \n#define arr 10 \n\nint main(void) \n{\n    char line[arr][leng];\n    char fname[20];\n    FILE *fptr = NULL; \n    int i = 0;\n    int tot = 0;\n    scanf(\"%s\",fname);  \n\n    fptr = fopen(fname, \"r\");\n    while(fgets(line[i], leng, fptr)) \n    {\n        line[i][strlen(line[i]) - 1] = '\\0';\n        i++;\n    }\n    srand(time(0));\n    for(int i = 0; i &lt; 6; ++i)\n    {\n        printf(\"%s\\n\", line[rand()%10]);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>My random text file has 6 lines of code.</p>\n"}, {"tags": ["c++", "c", "macos", "keychain"], "comments": [{"owner": {"reputation": 21298, "user_id": 309425, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/75a67cd9a3d7367a6e594fcbe5e41400?s=128&d=identicon&r=PG", "display_name": "JWWalker", "link": "https://stackoverflow.com/users/309425/jwwalker"}, "edited": false, "score": 0, "creation_date": 1573601932, "post_id": 58828239, "comment_id": 103932803, "body": "I&#39;m unclear on what you&#39;re asking.  Are you looking for sample code, or just the APIs?  <code>SecKeychainAddGenericPassword</code>, for example, is a C API."}, {"owner": {"reputation": 11609, "user_id": 233944, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/231ea4f1017c30d4fabcda7671c91f27?s=128&d=identicon&r=PG", "display_name": "TheNextman", "link": "https://stackoverflow.com/users/233944/thenextman"}, "edited": false, "score": 0, "creation_date": 1573625373, "post_id": 58828239, "comment_id": 103937923, "body": "Your security tool example is indeed old, but the keychain API on macOS is old. It&#39;s still supported. It&#39;s a C API. Apple have an archived code sample on their documentation called <code>GenericKeychain</code> but at some point it got ported to swift. If you drill into the <a href=\"https://developer.apple.com/documentation/security/keychain_services/keychain_items?language=objc\" rel=\"nofollow noreferrer\">keychain services</a> documentation, you&#39;ll see it&#39;s all C..."}, {"owner": {"reputation": 85, "user_id": 1257398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33969e767fae2271156e55344402553d?s=128&d=identicon&r=PG", "display_name": "harshc", "link": "https://stackoverflow.com/users/1257398/harshc"}, "reply_to_user": {"reputation": 21298, "user_id": 309425, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/75a67cd9a3d7367a6e594fcbe5e41400?s=128&d=identicon&r=PG", "display_name": "JWWalker", "link": "https://stackoverflow.com/users/309425/jwwalker"}, "edited": false, "score": 0, "creation_date": 1573691075, "post_id": 58828239, "comment_id": 103968708, "body": "@JWWalker I was looking for code references using the C APIs or any kind of examples. The one that you pointed out seems to be an Objective C API on searching. Apart from the tool I mentioned I couldn&#39;t find anything. I had basic questions regarding this, what libs to link against, what right headers to include, the tool is old and just dumps out code. I working example would have definitely helped."}, {"owner": {"reputation": 85, "user_id": 1257398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33969e767fae2271156e55344402553d?s=128&d=identicon&r=PG", "display_name": "harshc", "link": "https://stackoverflow.com/users/1257398/harshc"}, "reply_to_user": {"reputation": 11609, "user_id": 233944, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/231ea4f1017c30d4fabcda7671c91f27?s=128&d=identicon&r=PG", "display_name": "TheNextman", "link": "https://stackoverflow.com/users/233944/thenextman"}, "edited": false, "score": 0, "creation_date": 1573691171, "post_id": 58828239, "comment_id": 103968740, "body": "@TheNextman I have been looking into the keychain services, seems everything has been ported to Objective C. I am trying to quickly understand Objective C basics and write a short sample code that does what I am trying to do. I will try to see if there is a good way to mix Obj C code with the traditional C/C++ code base."}, {"owner": {"reputation": 11609, "user_id": 233944, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/231ea4f1017c30d4fabcda7671c91f27?s=128&d=identicon&r=PG", "display_name": "TheNextman", "link": "https://stackoverflow.com/users/233944/thenextman"}, "edited": false, "score": 1, "creation_date": 1573702911, "post_id": 58828239, "comment_id": 103971270, "body": "@harshc you seem to be confused, Keychain Services is C. The <code>SecKeychainAddGenericPassword</code> function mentioned is a C function. There is no Objective C involved."}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 1257398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33969e767fae2271156e55344402553d?s=128&d=identicon&r=PG", "display_name": "harshc", "link": "https://stackoverflow.com/users/1257398/harshc"}, "edited": false, "score": 1, "creation_date": 1574044708, "post_id": 58850099, "comment_id": 104077214, "body": "thanks @TheNextman. There was indeed some confusion and lack of understanding. I am a bit wiser than yesterday. I did not use your code, but it nudged me to look in the right direction. Thank you."}], "tags": [], "owner": {"reputation": 11609, "user_id": 233944, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/231ea4f1017c30d4fabcda7671c91f27?s=128&d=identicon&r=PG", "display_name": "TheNextman", "link": "https://stackoverflow.com/users/233944/thenextman"}, "is_accepted": true, "score": 4, "last_activity_date": 1573710161, "creation_date": 1573710161, "answer_id": 58850099, "question_id": 58828239, "link": "https://stackoverflow.com/questions/58828239/os-x-keychain-access-using-c-c/58850099#58850099", "title": "OS X Keychain access using C/C++", "body": "<p>A minimal example showing how to add a password to the keychain using C:</p>\n\n<pre><code>#include &lt;CoreFoundation/CoreFoundation.h&gt;\n#include &lt;Security/Security.h&gt;\n\nint main(int argc, const char* argv[]) {\n    CFStringRef keys[3];\n    keys[0] = kSecClass;\n    keys[1] = kSecAttrAccount;\n    keys[2] = kSecValueData;\n\n    CFTypeRef values[3];\n    values[0] = kSecClassGenericPassword;\n    values[1] = CFSTR(\"accountname\");\n    values[2] = CFSTR(\"password\");\n\n    CFDictionaryRef query;\n    query = CFDictionaryCreate(kCFAllocatorDefault, (const void**) keys, (const void**) values, 3, NULL, NULL);\n\n    OSStatus result = SecItemAdd(query, NULL);\n\n    printf(\"%d\", result);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 1257398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33969e767fae2271156e55344402553d?s=128&d=identicon&r=PG", "display_name": "harshc", "link": "https://stackoverflow.com/users/1257398/harshc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 743, "favorite_count": 1, "accepted_answer_id": 58850099, "answer_count": 1, "score": 4, "last_activity_date": 1588579347, "creation_date": 1573601652, "question_id": 58828239, "link": "https://stackoverflow.com/questions/58828239/os-x-keychain-access-using-c-c", "title": "OS X Keychain access using C/C++", "body": "<p>I am trying to write a simple test application to access OS X keychain. Add/Update/Delete an entry using C/C++. I am just testing whether I can use this in a larger C/C++ code base that we have, where we need a secure secret storage, hence the language requirements. </p>\n\n<p>I looked up the API that Apple has on this but that is mostly in Objective-C. Are there any solutions anyone is aware of? The only thing I could find was <a href=\"https://opensource.apple.com/source/SecurityTool/SecurityTool-55002/\" rel=\"nofollow noreferrer\">Apple's Security tool</a> which seems old and am not sure if the APIs are still supported. </p>\n\n<p>Thanks in advance. </p>\n"}, {"tags": ["c", "microcontroller", "avr"], "comments": [{"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1573602035, "post_id": 58828210, "comment_id": 103932834, "body": "Please create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> with a minimal main function demonstrating what&#39;s wrong. Show actual and expected output. Also, I think you should explain your formula a bit better."}, {"owner": {"reputation": 117, "user_id": 5200402, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/YFIUn.jpg?s=128&g=1", "display_name": "mike", "link": "https://stackoverflow.com/users/5200402/mike"}, "reply_to_user": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1573602191, "post_id": 58828210, "comment_id": 103932872, "body": "Same program as shown in my other question, but I narrowed the issue down.  I will delete my other question, and edit this one to show context."}, {"owner": {"reputation": 4150, "user_id": 7412986, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xOv4e.png?s=128&g=1", "display_name": "AlexP", "link": "https://stackoverflow.com/users/7412986/alexp"}, "edited": false, "score": 1, "creation_date": 1573602454, "post_id": 58828210, "comment_id": 103932934, "body": "How do you represent <code>964 * 7000</code> as an <code>uint16_t</code>? Hint: your calculations overflow."}, {"owner": {"reputation": 117, "user_id": 5200402, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/YFIUn.jpg?s=128&g=1", "display_name": "mike", "link": "https://stackoverflow.com/users/5200402/mike"}, "edited": false, "score": 0, "creation_date": 1573602911, "post_id": 58828210, "comment_id": 103933042, "body": "I&#39;ve edited my question, and eliminated the alternative way I did the calculation."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 2, "creation_date": 1573602969, "post_id": 58828210, "comment_id": 103933056, "body": "A <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> does not mean the main function you are using. It means a <i>minimal</i> main function that is enough to demonstrate the problem, which means that WE should be able to just copy the code in the question and compile it and get the same problem you have."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1573603075, "post_id": 58828210, "comment_id": 103933074, "body": "Also, please be very careful with modifying the question too much when people have started answering. Otherwise you might invalidate existing answers. I have rolled back your edit."}, {"owner": {"reputation": 117, "user_id": 5200402, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/YFIUn.jpg?s=128&g=1", "display_name": "mike", "link": "https://stackoverflow.com/users/5200402/mike"}, "edited": false, "score": 0, "creation_date": 1573603191, "post_id": 58828210, "comment_id": 103933093, "body": "ok, thx for the feedback.  I&#39;ve had enough looking at this for one day,  do you want the entire file?  Shall i edit my question and add it so you can copy/paste?"}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1573603491, "post_id": 58828210, "comment_id": 103933144, "body": "I have studied the question and answered it. This time a MRE (minimal, reproducible example) was not necessary since I was able to spot the error anyway. But in general, a MRE is a superb tool for debugging code, and it&#39;s very often people post questions here where the error isn&#39;t in the code they have posted but somewhere else. That is why we are requesting an MRE almost instantly when people post a question. And no, it does not mean the entire file. It means just enough, but no more than necessary to reproduce the problem."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1573604199, "post_id": 58828210, "comment_id": 103933284, "body": "@mike I updated my answer to also give a demonstration about how to produce a MRE."}], "answers": [{"tags": [], "owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "is_accepted": true, "score": 4, "last_activity_date": 1573606829, "last_edit_date": 1573606829, "creation_date": 1573602513, "answer_id": 58828363, "question_id": 58828210, "link": "https://stackoverflow.com/questions/58828210/return-value-not-as-expected-avr-c-calculation/58828363#58828363", "title": "Return value not as expected. AVR C calculation", "body": "<p>Look at your input array: <code>{15, 12, 5, 16, 11, 35, 964, 76}</code></p>\n\n<p>Specifically, look at the element that is 964. That element times 7000 is 6748000 which is greater than a <code>uint16_t</code> can handle.</p>\n\n<p>There are a number of solutions. One of them is changing to <code>uint32_t</code>. If this is not an option, you could extract a factor of 1000, like this:</p>\n\n<pre><code>position = 1000 *(\n            ((1 * channel_positions[0]) + \n            (2 * channel_positions[1]) + \n            (3 * channel_positions[2]) + \n            (4 * channel_positions[3]) + \n            (5 * channel_positions[4]) + \n            (6 * channel_positions[5]) + \n            (7 * channel_positions[6]) + \n            (8 * channel_positions[7])) /\n            (channel_positions[0] + \n             channel_positions[1] + \n             channel_positions[2] + \n             channel_positions[3] + \n             channel_positions[4] + \n             channel_positions[5] + \n             channel_positions[6] + \n             channel_positions[7]));\n</code></pre>\n\n<p>Note that this will not eliminate the problem, but it could possibly reduce it so that the problem never occurs for reasonable input. </p>\n\n<p>Taking the same idea to the loop version, we get:</p>\n\n<pre><code>uint16_t calculatePosition(uint16_t* channel_positions)\n{\n    uint16_t temp_sum = 0;\n    uint16_t divisor = 0;\n\n    for(uint8_t i = 0; i &lt; 8; i++) {\n        temp_sum  += (channel_positions[i] * (i+1));\n        divisor += channel_positions[i];\n    }\n\n    return 1000*(temp_sum/divisor);\n}\n</code></pre>\n\n<p>Note that you will lose some accuracy in the process due to rounding with integer division. Since you have been very careful with specifying the width, I assume you're not willing to change the type of the input array. This code should give you maximum accuracy with minimal extra memory usage. But if you're running this function often on a 16-bit machine it can impact performance quite a bit.</p>\n\n<pre><code>uint16_t calculatePosition(uint16_t* channel_positions)\n{\n    // Use 32 bit for these\n    uint32_t temp_sum = 0;\n    uint32_t divisor = 0;\n\n    for(uint8_t i = 0; i &lt; 8; i++) {\n        // Copy the value to a 32 bit number\n        uint32_t temp_pos = channel_positions[i];\n        temp_sum  += temp_pos * (i+1);\n        divisor += temp_pos;\n    }\n\n    // Moved parenthesis for better accuracy\n    return (1000*temp_sum) / divisor;\n}\n</code></pre>\n\n<p>Provided that the result can fit in a <code>uint16_t</code> there is absolutely zero chance that this version will fail, because the biggest possible value for <code>1000*temp_sum</code> is <code>2,359,260,000</code> and the biggest value it can hold is <code>4,294,967,295</code>.</p>\n\n<h2>Sidenote about MRE (minimal, reproducible example)</h2>\n\n<p>MRE:s are described here: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">https://stackoverflow.com/help/minimal-reproducible-example</a></p>\n\n<p>In this example, a good main function to post in the question would be:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() \n{ \n    uint16_t positions[] = {15, 12, 5, 16, 11, 35, 964, 76}; \n    uint16_t pos = calculatePosition(positions); \n    printf(\"%d\\n\", pos); \n}\n</code></pre>\n\n<p>It's enough to demonstrate the problem you had and no more.</p>\n"}, {"comments": [{"owner": {"reputation": 117, "user_id": 5200402, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/YFIUn.jpg?s=128&g=1", "display_name": "mike", "link": "https://stackoverflow.com/users/5200402/mike"}, "edited": false, "score": 0, "creation_date": 1573648774, "post_id": 58837074, "comment_id": 103948979, "body": "Is the result variable &#39;position&#39; in this example of type  uint16_t.... Knowing the result will always be an integer?"}, {"owner": {"reputation": 3648, "user_id": 4931630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4290ddd0630dd0091e3b9713a23c3434?s=128&d=identicon&r=PG&f=1", "display_name": "AterLux", "link": "https://stackoverflow.com/users/4931630/aterlux"}, "reply_to_user": {"reputation": 117, "user_id": 5200402, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/YFIUn.jpg?s=128&g=1", "display_name": "mike", "link": "https://stackoverflow.com/users/5200402/mike"}, "edited": false, "score": 0, "creation_date": 1573656511, "post_id": 58837074, "comment_id": 103953500, "body": "yes, integer divided by integer gives integer result"}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1573663516, "post_id": 58837074, "comment_id": 103957688, "body": "Minor detail, but technically it is not overflow. Only signed integers overflow, and the behavior of this is undefined. But here it is unsigned integers."}, {"owner": {"reputation": 13772, "user_id": 379311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c993f4f111e6ff3211ccda1b98828253?s=128&d=identicon&r=PG", "display_name": "Yann Vernier", "link": "https://stackoverflow.com/users/379311/yann-vernier"}, "edited": false, "score": 0, "creation_date": 1573756816, "post_id": 58837074, "comment_id": 103998074, "body": "While <a href=\"http://port70.net/~nsz/c/c89/c89-draft.html#3.1.2.5\" rel=\"nofollow noreferrer\">C89 claims &quot;computation involving unsigned operands can never overflow&quot;</a>, this is C specific language; the modular arithmetic is defined (wraps around), but none the less does <a href=\"https://en.wikipedia.org/wiki/Integer_overflow\" rel=\"nofollow noreferrer\">overflow</a>, as the true sum does not fit. It just can&#39;t produce the exception (and in this case would still overflow unless the type of <code>posititon</code> is also changed)."}], "tags": [], "owner": {"reputation": 3648, "user_id": 4931630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4290ddd0630dd0091e3b9713a23c3434?s=128&d=identicon&r=PG&f=1", "display_name": "AterLux", "link": "https://stackoverflow.com/users/4931630/aterlux"}, "is_accepted": false, "score": 0, "last_activity_date": 1573647841, "creation_date": 1573647841, "answer_id": 58837074, "question_id": 58828210, "link": "https://stackoverflow.com/questions/58828210/return-value-not-as-expected-avr-c-calculation/58837074#58837074", "title": "Return value not as expected. AVR C calculation", "body": "<p>As it was said, the problem is in integer overflow.</p>\n\n<p>Be careful when moving the multiplier outside, when using integer math! <code>(A * 1000) / B</code> does not equal to <code>(A / B) * 1000</code>.</p>\n\n<p>The simplest solution, to convert first of operands in each operation into a wider type. Others will be converted implicitly. E.q.</p>\n\n<pre><code>    ...\n    position = ((1000UL * channel_positions[0]) + \n                (2000UL * channel_positions[1]) + \n                (3000UL * channel_positions[2]) + \n                (4000UL * channel_positions[3]) + \n                (5000UL * channel_positions[4]) + \n                (6000UL * channel_positions[5]) + \n                (7000UL * channel_positions[6]) + \n                (8000UL * channel_positions[7])) /\n                ((uint32_t)channel_positions[0] + \n                 channel_positions[1] + // no need to convert, it will be converted implicitly\n                 channel_positions[2] + // since previous operand is wider\n                 channel_positions[3] + \n                 channel_positions[4] + \n                 channel_positions[5] + \n                 channel_positions[6] + \n                 channel_positions[7]);\n</code></pre>\n"}], "owner": {"reputation": 117, "user_id": 5200402, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/YFIUn.jpg?s=128&g=1", "display_name": "mike", "link": "https://stackoverflow.com/users/5200402/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 58828363, "answer_count": 2, "score": 0, "last_activity_date": 1573647841, "creation_date": 1573601428, "last_edit_date": 1573603026, "question_id": 58828210, "link": "https://stackoverflow.com/questions/58828210/return-value-not-as-expected-avr-c-calculation", "title": "Return value not as expected. AVR C calculation", "body": "<p>I am trying to perform the following calculation using an ATmega328P MCU.</p>\n\n<p>\ud835\udc5d\ud835\udc5c\ud835\udc60\ud835\udc56\ud835\udc61\ud835\udc56\ud835\udc5c\ud835\udc5b = 1000 \u00b7 \ud835\udc49\ud835\udc4e\ud835\udc590 + 2000 \u00b7 \ud835\udc49\ud835\udc4e\ud835\udc591 + \u22ef + 8000 \u00b7 \ud835\udc49\ud835\udc4e\ud835\udc597 / \ud835\udc49\ud835\udc4e\ud835\udc590+\ud835\udc49\ud835\udc4e\ud835\udc591+\u22ef+\ud835\udc49\ud835\udc4e\ud835\udc597</p>\n\n<p>In the main routine (as shown here):</p>\n\n<pre><code>int main(void)\n{\n    //variables\n    uint16_t raw_values[8];\n    uint16_t position = 0;\n    uint16_t positions[8];\n    char raw[] = \" raw\";\n    char space[] = \", \";\n    char channelString[] = \"Channel#: \";\n    char positionString[] = \"Position: \";\n\n    //initialize ADC (Analog)\n    initADC();\n\n    //initialize UART\n    initUART(BAUD, DOUBLE_SPEED);\n\n    //give time for ADC to perform &amp; finish 1st conversion\n    //8us x 25 = 200us\n    delay_us(200);\n\n    while(1)\n    {\n        //get the raw values from the ADC for each channel\n        for(uint8_t channel = 0; channel &lt; 8; channel++)\n        {\n            raw_values[channel] = analog(channel);\n\n            //invert the raw value\n            raw_values[channel] = DIVISOR - raw_values[channel];\n        }\n\n        for(uint8_t channel = 0; channel &lt; 8; channel++)\n        {\n            //print the channel#\n            transmitString(channelString);\n            printDec16bit(channel);\n            transmitString(space);\n\n            //print the raw value from the ADC conversion\n            printDec16bit(raw_values[channel]);\n            transmitString(raw);\n            transmitString(space);\n\n            //calculate the position value at each sensor\n            transmitString(positionString);\n            positions[channel] = (uint16_t)((POSITION_REF/DIVISOR) * raw_values[channel]);\n            printDec16bit(positions[channel]);\n            printCR();\n        }\n\n        printCR();\n\n        //calculate and display 'position'\n        position = calculatePosition(positions);\n        printDec16bit(position);\n        printCR();\n        printCR();\n\n\n        //add a delay\n        delay_ms(2000);\n    }\n}\n</code></pre>\n\n<p>I am calling the following function, but the return value I am getting is way off.</p>\n\n<pre><code>uint16_t calculatePosition(uint16_t* channel_positions)\n{\n    uint32_t intermediates[8];\n    uint32_t temp_sum = 0;\n    uint16_t divisor = 0;\n    uint16_t value = 0;\n\n    for(uint8_t i = 0; i &lt; 8; i++)\n    {\n        intermediates[i] = channel_positions[i] * ((i + 1) * 1000);\n    }\n\n    for(uint8_t j = 0; j &lt; 8; j++)\n    {\n        temp_sum = temp_sum + intermediates[j];\n    }\n\n    for(uint8_t k = 0; k &lt; 8; k++)\n    {\n        divisor = divisor + channel_positions[k];\n    }\n\n    value = temp_sum/divisor;\n\n    return value;\n}\n</code></pre>\n\n<p>Alternatively, I have even tried this code, and get a result that is not what I expect.</p>\n\n<pre><code>uint16_t calculatePosition(uint16_t* channel_positions)\n{\n    uint16_t position;\n    position = ((1000 * channel_positions[0]) + \n                (2000 * channel_positions[1]) + \n                (3000 * channel_positions[2]) + \n                (4000 * channel_positions[3]) + \n                (5000 * channel_positions[4]) + \n                (6000 * channel_positions[5]) + \n                (7000 * channel_positions[6]) + \n                (8000 * channel_positions[7])) /\n                (channel_positions[0] + \n                 channel_positions[1] + \n                 channel_positions[2] + \n                 channel_positions[3] + \n                 channel_positions[4] + \n                 channel_positions[5] + \n                 channel_positions[6] + \n                 channel_positions[7]);\n    return position;\n}\n</code></pre>\n\n<p>What could I be doing wrong?  For an array of values such as {15, 12, 5, 16, 11, 35, 964, 76} I expect a result of 6504, but instead I get a value in the 200's (or some other weird value).</p>\n"}, {"tags": ["c", "stdint"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1573608632, "post_id": 58828063, "comment_id": 103934281, "body": "&quot;to check if a1 value is within range of signed 32-bit integer.&quot; --&gt; <code>in_range = a1 &lt;= INT32_MAX;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 301, "user_id": 11107336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b526308c21ba6cfa904666135a459330?s=128&d=identicon&r=PG&f=1", "display_name": "MLapaj", "link": "https://stackoverflow.com/users/11107336/mlapaj"}, "edited": false, "score": 0, "creation_date": 1573601518, "post_id": 58828112, "comment_id": 103932702, "body": "Is there any way to check if the value of a1 will truly be the same before and after casting? I am trying to check if a1 value is within range of signed 32-bit integer."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 301, "user_id": 11107336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b526308c21ba6cfa904666135a459330?s=128&d=identicon&r=PG&f=1", "display_name": "MLapaj", "link": "https://stackoverflow.com/users/11107336/mlapaj"}, "edited": false, "score": 0, "creation_date": 1573601615, "post_id": 58828112, "comment_id": 103932726, "body": "@MLapaj Check <code>a1 &lt; (1U &lt;&lt; 31)</code>"}], "tags": [], "owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "is_accepted": false, "score": 4, "last_activity_date": 1573601261, "last_edit_date": 1573601261, "creation_date": 1573600733, "answer_id": 58828112, "question_id": 58828063, "link": "https://stackoverflow.com/questions/58828063/casting-uint32-t-to-int32-t-and-comparing-them-afterwards/58828112#58828112", "title": "Casting uint32_t to int32_t and comparing them afterwards", "body": "<p>The builtin <code>==</code> can only compare values of the same type. If the types of the operands are different, they are converted to a same type beforehand. (See <a href=\"https://en.cppreference.com/w/c/language/operator_comparison\" rel=\"nofollow noreferrer\">cppreference</a> for how this type is chosen.)</p>\n\n<p>In this case, <code>b1</code> is converted to <code>uint32_t</code> before the comparsion is performed. </p>\n"}, {"tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": false, "score": 4, "last_activity_date": 1573601117, "creation_date": 1573601117, "answer_id": 58828163, "question_id": 58828063, "link": "https://stackoverflow.com/questions/58828063/casting-uint32-t-to-int32-t-and-comparing-them-afterwards/58828163#58828163", "title": "Casting uint32_t to int32_t and comparing them afterwards", "body": "<p>In general, unsigned-to-signed conversions are implementation defined \n(<a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.3.1.3\" rel=\"nofollow noreferrer\">6.3.1.3</a>) as of now (this may change in future versions of the C standard).</p>\n\n<p>In practice, the integers will be two's complement and conversions in either direction will be a no-op\u2014the same data will just be interpreted differently in accordance with how two's complement arithmetic works.</p>\n\n<p>The equality in your case is caused by the signed <code>b1</code> getting semantically converted to an <code>a1</code>'s unsigned type in the comparison due to <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.3.1.8\" rel=\"nofollow noreferrer\">usual arithmetic conversions (6.3.1.8)</a>. </p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1573608445, "post_id": 58828188, "comment_id": 103934232, "body": "Good answer.  Pedantic: if <code>int</code> was 64-bit, the result would be <code>&quot;Not equal&quot;</code> ;-)"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1573618804, "post_id": 58828188, "comment_id": 103936338, "body": "You forgot the <i>first</i> line from the first excerpt: &quot;<b>Otherwise, <i>the integer promotions are performed on both operands.</i> Then the following rules are applied to the promoted operands:</b>&quot; If <code>int</code> is 64 bits, then this clause will convert them both to <code>int</code> and then &quot;they are of the same type&quot;"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 6, "last_activity_date": 1573601796, "last_edit_date": 1573601796, "creation_date": 1573601263, "answer_id": 58828188, "question_id": 58828063, "link": "https://stackoverflow.com/questions/58828063/casting-uint32-t-to-int32-t-and-comparing-them-afterwards/58828188#58828188", "title": "Casting uint32_t to int32_t and comparing them afterwards", "body": "<p>An out-of-range conversion to a signed integer type, as you are doing, is <strong>implementation defined</strong>.  </p>\n\n<p>On most implementations you're likely to come across, converting the max value for a <code>uint32_t</code> to a <code>int32_t</code> means retaining the bit pattern and treating it as a signed value.  This means that <code>b1</code> gets assigned the value -1.</p>\n\n<p>When you then compare <code>a1</code> and <code>b1</code>, the <strong>usual arithmetic conversions</strong> apply.   These are spelled out in section 6.3.1.8 of the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">C standard</a>:</p>\n\n<blockquote>\n  <p>If both operands have the same type, then no further conversion is\n  needed.</p>\n  \n  <p>Otherwise, if both operands have signed integer types or both have\n  unsigned integer  types,  the  operand  with  the  type  of  lesser \n  integer  conversion  rank  is converted to the type of the operand\n  with greater rank.</p>\n  \n  <p><strong>Otherwise,  if  the  operand  that  has  unsigned  integer  type  has \n  rank  greater  or equal  to  the  rank  of  the  type  of  the  other \n  operand,  then  the  operand  with signed  integer  type  is \n  converted  to  the  type  of  the  operand  with  unsigned integer\n  type.</strong></p>\n  \n  <p>Otherwise, if the type of the operand with signed integer type can\n  represent all of the values of the type of the operand with unsigned\n  integer type, then the  operand  with  unsigned  integer  type  is \n  converted  to  the  type  of  the operand with signed integer type.</p>\n  \n  <p>Otherwise,   both   operands   are   converted   to   the   unsigned<br>\n  integer   type corresponding to the type of the operand with signed\n  integer type</p>\n</blockquote>\n\n<p>The highlighted portion is what applies in this case, since <code>uint32_t</code> and <code>int32_t</code> have the same rank, so the value of <code>b1</code> is converted to type <code>uint32_t</code>.  </p>\n\n<p>When converting an out-of-range value for an unsigned type, this is accomplished by numerically adding or subtracting one more that the max value of the unsigned type repeatedly until the value is in range.  This effectively means that any excess bytes of the source value are truncated and what is left is treated as an unsigned value.  </p>\n\n<p>This conversion is spelled out in section 6.3.1.3 of the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">C standard</a>:</p>\n\n<blockquote>\n  <p><em>1</em> When a value with integer type is converted to another integer type other than <code>_Bool</code>, if the value can be represented by the new\n  type, it is unchanged.</p>\n  \n  <p><em>2</em> Otherwise,  if  the  new  type  is  unsigned,  the  value  is  converted  by  repeatedly  adding  or subtracting  one  more  than \n  the  maximum  value  that  can  be  represented  in  the  new type\n  until the value is in the range of the new type.</p>\n  \n  <p><em>3</em> Otherwise,  the  new  type  is  signed  and  the  value  cannot  be  represented  in  it;  either  the result is implementation-defined\n  or an implementation-defined signal is raised</p>\n</blockquote>\n\n<p>In this case, paragraph 3 applies when you first assign <code>a1</code> to <code>b1</code>, and paragraph 2 then applies when you do the comparison and <code>b1</code> is converted.  So  that means that the value -1 gets converted to the value <code>UINT32_MAX</code>, which is why the comparison evaluates to true.</p>\n"}], "owner": {"reputation": 301, "user_id": 11107336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b526308c21ba6cfa904666135a459330?s=128&d=identicon&r=PG&f=1", "display_name": "MLapaj", "link": "https://stackoverflow.com/users/11107336/mlapaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1018, "favorite_count": 0, "accepted_answer_id": 58828188, "answer_count": 3, "score": 7, "last_activity_date": 1573601796, "creation_date": 1573600409, "last_edit_date": 1573600532, "question_id": 58828063, "link": "https://stackoverflow.com/questions/58828063/casting-uint32-t-to-int32-t-and-comparing-them-afterwards", "title": "Casting uint32_t to int32_t and comparing them afterwards", "body": "<p>I'm having trouble understanding how does comparing two ints, where one is unsigned int32 and the other one signed int32 work. \nLet's consider this simple program:</p>\n\n<pre><code>#include &lt;stdint.h&gt;\n\nint main()\n{\n    uint32_t a1 = UINT32_MAX;\n    int32_t b1 = (int32_t)a1;\n\n    if (a1 == b1)\n        printf(\"Equal\");\n    else\n        printf(\"Not equal\");\n\n    return 0;\n}\n</code></pre>\n\n<p>In this case, <code>a1</code> exceeds a signed 32-bit integer range, so as I have confirmed while debugging, after it's been casted, <code>b1</code> equals <code>-1</code>. \nHowever it still prints \"Equal\", while those values obviously aren't the same. What is it caused by?</p>\n"}, {"tags": ["c"], "answers": [{"tags": [], "owner": {"reputation": 3902, "user_id": 10302746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5ySG.png?s=128&g=1", "display_name": "Lev M.", "link": "https://stackoverflow.com/users/10302746/lev-m"}, "is_accepted": false, "score": 1, "last_activity_date": 1573600029, "creation_date": 1573600029, "answer_id": 58828007, "question_id": 58827914, "link": "https://stackoverflow.com/questions/58827914/how-work-with-malloc-and-array-of-struct-pointer/58828007#58828007", "title": "How work with malloc and array of struct pointer", "body": "<p>You allocated an array of pointers.</p>\n\n<p>But you did not allocate memory for the actual structures, and you did not initialize the pointers you allocated.</p>\n\n<p>This line:</p>\n\n<pre><code>string_pair = malloc(10 * sizeof(test *));\n</code></pre>\n\n<p>Allocates array of 4 or 8 (depending on your architecture) byte variables that can store memory addresses.</p>\n\n<p>It does not allocate <code>struct TEST</code>.\nThe pointers will contain garbage (possibly invalid) addresses until you initialize them.</p>\n\n<p>You are suppose to do it by calling <code>malloc</code> for <code>struct TEST</code>, and placing the resulting pointer in the array.</p>\n\n<p>Otherwise, when your code reaches this line:</p>\n\n<pre><code>string_pair[count]-&gt;first_string\n</code></pre>\n\n<p>it will look for <code>struct TEST</code> at some random address, possibly 0, and try to read its <code>first_string</code> field, which will cause segmentation fault.</p>\n"}, {"tags": [], "owner": {"reputation": 139, "user_id": 12350719, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K392K.png?s=128&g=1", "display_name": "reeeee", "link": "https://stackoverflow.com/users/12350719/reeeee"}, "is_accepted": true, "score": 1, "last_activity_date": 1573600095, "creation_date": 1573600095, "answer_id": 58828018, "question_id": 58827914, "link": "https://stackoverflow.com/questions/58827914/how-work-with-malloc-and-array-of-struct-pointer/58828018#58828018", "title": "How work with malloc and array of struct pointer", "body": "<p>You are getting a segmentation fault because you are allocating an array of pointers but not allocating the structure itself.</p>\n\n<p>With <code>string_pair = malloc(10 * sizeof(test *));</code>, you allocate <code>string_pair</code> (a pointer to a pointer) to 10 pointers (pointing to a <code>test</code> structure). </p>\n\n<p>Then, with <code>string_pair[count]-&gt;first_string = malloc(10 * sizeof(char));</code>, you allocate the <code>first_string</code> member of <code>string_pair[count]</code> to a string of 10 characters. The <code>-&gt;</code> token means to access the member in <code>string_pair[count]</code>. However, the actual structure is not allocated.</p>\n\n<p>You need to allocate <code>string_pair[count]</code>, with something like <code>string_pair[count] = malloc(sizeof(test));</code>.</p>\n\n<p>I'd recommend just using a <code>test*</code> for your array, and allocating it with <code>test* string_pair = malloc(10 * sizeof(test));</code>.</p>\n"}], "owner": {"reputation": 13, "user_id": 12348483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7001c3392d74316cba88c51f6d86406e?s=128&d=identicon&r=PG&f=1", "display_name": "cyberc33", "link": "https://stackoverflow.com/users/12348483/cyberc33"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 58828018, "answer_count": 2, "score": -1, "last_activity_date": 1573600095, "creation_date": 1573599354, "question_id": 58827914, "link": "https://stackoverflow.com/questions/58827914/how-work-with-malloc-and-array-of-struct-pointer", "title": "How work with malloc and array of struct pointer", "body": "<p>I would like to try allocating my first 10 structs. We have to store an array of struct pointer at the heap but I don't know what i am doing wrong</p>\n\n<p>my struct looks like this</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>typedef struct TEST\n{\n    char* first_string;\n    char* second_string;\n} test;\n\n</code></pre>\n\n<p>what i have written:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>\ntest **string_pair;\n\nstring_pair = malloc(10 * sizeof(test *));\n  if(string:pair == NULL)\n  {\n    free(string_pair);\n    exit(4);\n  }\n\n</code></pre>\n\n<p>This works fine\nHowever later I am trying in an for loop to allocate my strings</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>\nstring_pair[count]-&gt;first_string = malloc(10 * sizeof(char)); // note that count is currently 0\n  if(string_pair[count]-&gt;first_string == NULL)\n  {\n    free(string_pair[count]-&gt;first_string);\n    free(string_pair[count]);\n    exit(4);\n  }\n</code></pre>\n\n<p>And I get an segmentation fault</p>\n\n<p>Before anyone suggests we are not allowed to simply use an array of structs we have to do it the complicated way.</p>\n\n<p>Thx in advance</p>\n"}, {"tags": ["c", "loops", "post-increment"], "comments": [{"owner": {"reputation": 504, "user_id": 2136847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PGDwR.jpg?s=128&g=1", "display_name": "Zachary McGee", "link": "https://stackoverflow.com/users/2136847/zachary-mcgee"}, "edited": false, "score": 1, "creation_date": 1573596801, "post_id": 58827455, "comment_id": 103931329, "body": "You need to assign &#39;exit&#39; to -1 when it is inputted."}, {"owner": {"reputation": 504, "user_id": 2136847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PGDwR.jpg?s=128&g=1", "display_name": "Zachary McGee", "link": "https://stackoverflow.com/users/2136847/zachary-mcgee"}, "edited": false, "score": 0, "creation_date": 1573596886, "post_id": 58827455, "comment_id": 103931358, "body": "So check if price is -1 and if so set exit to price(-1)."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1573596984, "post_id": 58827455, "comment_id": 103931384, "body": "The best thing to do is see one of the teacher&#39;s assistants, and go through this code line by line."}, {"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 4, "creation_date": 1573597090, "post_id": 58827455, "comment_id": 103931432, "body": "Why are you incrementing <code>price</code>?"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 3, "creation_date": 1573598813, "post_id": 58827455, "comment_id": 103932031, "body": "you need to initialize <code>sum</code> to 0"}, {"owner": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "edited": false, "score": 3, "creation_date": 1573599323, "post_id": 58827455, "comment_id": 103932169, "body": "Why even have a variable &quot;exit&quot;? After reading price, if it is -1, break from the loop."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1573599502, "post_id": 58827455, "comment_id": 103932233, "body": "Consider using the more common <code>while</code> loop. <code>while(scanf(&quot;%d&quot;, &amp;price) == 1 &amp;&amp; price &gt;= 0) { sum += price; }</code>"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1573599526, "post_id": 58827455, "comment_id": 103932238, "body": "What is your question? Stating requirements and showing code which does not match them is not a question. Did you debug? Did you rubber duck it? What problem do you see? What got you stuck?"}], "answers": [{"tags": [], "owner": {"reputation": 139, "user_id": 12350719, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K392K.png?s=128&g=1", "display_name": "reeeee", "link": "https://stackoverflow.com/users/12350719/reeeee"}, "is_accepted": false, "score": 1, "last_activity_date": 1573600341, "creation_date": 1573600341, "answer_id": 58828052, "question_id": 58827455, "link": "https://stackoverflow.com/questions/58827455/why-does-my-program-not-add-numbers-until-1-is-given/58828052#58828052", "title": "Why does my program not add numbers until -1 is given?", "body": "<p>You aren't assigning <code>exit</code> to anything. If you want the user to enter the string <code>-1</code>, the check if <code>price</code> is -1 and break from the loop. If you meant for the user to enter a character with a value of -1, then use <code>fgetc(stdin)</code>, and check if the character is -1.</p>\n\n<p>Also, to calculate the sum correctly, you shouldn't be incrementing price with <code>sum = sum + price++;</code>. If this was meant to circumvent the situation where price is -1 and you don't want to subtract from the sum, you should check if exit is -1 inside the loop, and use the <code>break</code> keyword.</p>\n\n<p>It isn't the largest issue, but you should be formatting your code according to conventions (e.g. indenting properly, address-of-operator next to the identifier, etc).</p>\n"}, {"tags": [], "owner": {"reputation": 49, "user_id": 11721543, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-sCYH9bGIeGE/AAAAAAAAAAI/AAAAAAAAAAc/GVe-7ncO6OA/photo.jpg?sz=128", "display_name": "World", "link": "https://stackoverflow.com/users/11721543/world"}, "is_accepted": false, "score": 0, "last_activity_date": 1573603668, "creation_date": 1573603668, "answer_id": 58828516, "question_id": 58827455, "link": "https://stackoverflow.com/questions/58827455/why-does-my-program-not-add-numbers-until-1-is-given/58828516#58828516", "title": "Why does my program not add numbers until -1 is given?", "body": "<p>Hello man look now in what is the problem u named a int exit right ?\nBut you only make exit only int varible and the memory is unfiltered so the computer get a memory from something else and its not a -1 you need to put the %d price in the wile </p>\n\n<pre><code>int price;\ndo\n{\n block_of_command\n}\nWhile(price!=-1);\n</code></pre>\n\n<p>Or </p>\n\n<pre><code>int exit;\nint price\ndo\n{\nscanf(\"%d\",&amp;price);\nexit=price;\n}\nwhile(exit!=-1);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1990, "user_id": 12326421, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JbJl27mnzzQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reae_Gn8hEX-jZUqSenBmr_v-zCaw/photo.jpg?sz=128", "display_name": "Himanshu Singh", "link": "https://stackoverflow.com/users/12326421/himanshu-singh"}, "edited": false, "score": 0, "creation_date": 1573621534, "post_id": 58828588, "comment_id": 103936916, "body": "Use if-else to differentiate the two cases. 1) to add user input 2) to break loop and exit. Just for reference I have added coffee snippet in answer below."}], "tags": [], "owner": {"reputation": 9, "user_id": 11190527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34615fed4117bb39ca0d40821dda3cee?s=128&d=identicon&r=PG&f=1", "display_name": "sweet", "link": "https://stackoverflow.com/users/11190527/sweet"}, "is_accepted": false, "score": 0, "last_activity_date": 1573604636, "last_edit_date": 1573604636, "creation_date": 1573604259, "answer_id": 58828588, "question_id": 58827455, "link": "https://stackoverflow.com/questions/58827455/why-does-my-program-not-add-numbers-until-1-is-given/58828588#58828588", "title": "Why does my program not add numbers until -1 is given?", "body": "<p>i updated the code but i dont know how to add all the user inputted prices before exiting. here is my code.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\nint price;\nint sum = 0;\n\nwhile(price != -1)\n{\n    printf(\" Enter a price(-1 to exit)\");\n    scanf(\"%d\", &amp; price);\n\n\n    if (price == -1)\n    {\n      sum = sum + price;\n      printf(\" adds is %d\", sum);\n      break;\n    }\n\n   }\n\n\n\n  return 0; \n  }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 139, "user_id": 12350719, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K392K.png?s=128&g=1", "display_name": "reeeee", "link": "https://stackoverflow.com/users/12350719/reeeee"}, "edited": false, "score": 0, "creation_date": 1574293333, "post_id": 58830564, "comment_id": 104185240, "body": "You should use <code>while(1)</code> or <code>for(;;)</code> if you break out of the loop internally."}], "tags": [], "owner": {"reputation": 1990, "user_id": 12326421, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JbJl27mnzzQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reae_Gn8hEX-jZUqSenBmr_v-zCaw/photo.jpg?sz=128", "display_name": "Himanshu Singh", "link": "https://stackoverflow.com/users/12326421/himanshu-singh"}, "is_accepted": false, "score": 1, "last_activity_date": 1573621133, "creation_date": 1573621133, "answer_id": 58830564, "question_id": 58827455, "link": "https://stackoverflow.com/questions/58827455/why-does-my-program-not-add-numbers-until-1-is-given/58830564#58830564", "title": "Why does my program not add numbers until -1 is given?", "body": "<p>You should use <strong>if-else</strong> statement to resolve it. Like shown below:</p>\n\n<pre><code>while(price != -1)\n{\n    printf(\" \\nEnter a price(-1 to exit)\");\n    scanf(\"%d\", &amp;price);\n    if (price == -1)\n    {\n      break;\n    }\n    else{\n        sum = sum + price;\n        printf(\" \\ntotal sum till now is %d\", sum);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 11190527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34615fed4117bb39ca0d40821dda3cee?s=128&d=identicon&r=PG&f=1", "display_name": "sweet", "link": "https://stackoverflow.com/users/11190527/sweet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 4, "score": -1, "last_activity_date": 1573621133, "creation_date": 1573596702, "last_edit_date": 1573618648, "question_id": 58827455, "link": "https://stackoverflow.com/questions/58827455/why-does-my-program-not-add-numbers-until-1-is-given", "title": "Why does my program not add numbers until -1 is given?", "body": "<p>The following code should prompt the user for prices and add that to a total. If the user inputs <code>-1</code> the adding loop must terminate and the program should print a total and exit. But for some reason this is not happening.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\nint main()\n{\n  int price;\n  int sum;\n  int exit;\n\n  do\n  {\n    printf(\" Enter a price(-1 to exit)\");\n    scanf(\"%d\", &amp; price);\n    sum = sum + price++;\n\n    printf(\"the sum of prices is % d \", sum);\n  }\n  while (exit != -1);\n\n  return 0;\n}\n</code></pre>\n\n<p>Q: Why does my program not add numbers until -1 is given?</p>\n"}, {"tags": ["c", "linux", "signals", "typedef"], "comments": [{"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 1, "creation_date": 1573596807, "post_id": 58827396, "comment_id": 103931331, "body": "It&#39;s just giving a name (<code>sighandler_t</code>) to the otherwise unnamed (function) type (<code>void(*)(int)</code>). Like <code>typedef struct { double x, y; } point;</code> gives the name <code>point</code> to the untagged (and unnamed) struct."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1573604898, "post_id": 58827396, "comment_id": 103933448, "body": "See also <a href=\"https://stackoverflow.com/questions/1591361/understanding-typedefs-for-function-pointers-in-c\">Understanding typedefs for function pointers in C</a>."}], "answers": [{"tags": [], "owner": {"reputation": 12967, "user_id": 1168588, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BxNie.jpg?s=128&g=1", "display_name": "PaulProgrammer", "link": "https://stackoverflow.com/users/1168588/paulprogrammer"}, "is_accepted": false, "score": 1, "last_activity_date": 1573604756, "last_edit_date": 1573604756, "creation_date": 1573596741, "answer_id": 58827465, "question_id": 58827396, "link": "https://stackoverflow.com/questions/58827396/sighandler-t-typedef-statement-in-linux/58827465#58827465", "title": "sighandler_t typedef statement in Linux?", "body": "<p>This is a bit of C magic that says the following:</p>\n\n<pre><code>typedef void (*sighandler_t)(int);\n</code></pre>\n\n<blockquote>\n  <p>there is a special type called <code>sighandler_t</code> that is a pointer to a function that takes an integer argument and returns nothing.</p>\n</blockquote>\n\n<pre><code>sighandler_t signal(int signo, sighandler_t handler);\n</code></pre>\n\n<blockquote>\n  <p>there is a function <code>signal</code> that takes an integer named <code>signo</code> and a function pointer <code>handler</code> as arguments and returns a function pointer.</p>\n</blockquote>\n\n<p>The <code>typedef</code> literally means \"type definition\" and is used to define a placeholder for complex types \u2014 like function pointers or structures etc.</p>\n\n<p>The definition of a function pointer is a bit beyond the scope of this question, but can be thought of as a command that the user writes, that the framework will call, without knowing exactly what that function will be.</p>\n"}], "owner": {"reputation": 23, "user_id": 10956279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5153beb9d94b191007bc373ce6d61a39?s=128&d=identicon&r=PG&f=1", "display_name": "Badri", "link": "https://stackoverflow.com/users/10956279/badri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 643, "favorite_count": 1, "closed_date": 1573654719, "answer_count": 1, "score": 0, "last_activity_date": 1573604756, "creation_date": 1573596369, "last_edit_date": 1573604688, "question_id": 58827396, "link": "https://stackoverflow.com/questions/58827396/sighandler-t-typedef-statement-in-linux", "closed_reason": "Duplicate", "title": "sighandler_t typedef statement in Linux?", "body": "<p>While studying Signals in Linux, I came across this declaration :</p>\n\n<pre><code>typedef void (*sighandler_t)(int);\nsighandler_t signal (int signo, sighandler_t handler);\n</code></pre>\n\n<p>The handler function must return <code>void</code> and its prototype has the form :</p>\n\n<pre><code>void my_handler (int signo);\n</code></pre>\n\n<p>Linux uses a <code>typedef</code>, <code>sighandler_t</code>, to define this prototype.</p>\n\n<p>When I saw Linux Man pages for <code>signal()</code> function it is present there.</p>\n\n<p>But I don't understand What that <code>typedef</code> statement here means.</p>\n\n<p>Can anyone explain what that <code>typedef sighandler_t</code> means?</p>\n"}, {"tags": ["c", "multithreading", "process", "operating-system", "pthreads"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 2, "creation_date": 1573593826, "post_id": 58826841, "comment_id": 103930301, "body": "Search for <code>[c] pthread_create</code> to get some examples."}], "answers": [{"comments": [{"owner": {"reputation": 117, "user_id": 12185282, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lwQMLnUZAeI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcBevbtLYaqdkjGOANpFz1mBnX3KQ/photo.jpg?sz=128", "display_name": "Daniel Decker", "link": "https://stackoverflow.com/users/12185282/daniel-decker"}, "edited": false, "score": 1, "creation_date": 1573606017, "post_id": 58828623, "comment_id": 103933678, "body": "I see! I believe it would matter in this case! So the different threads can&#39;t be identified through the use of getpid(), I&#39;m reading that instead I should be using some sort of a gettid() to return the thread&#39;s ID of the current process? Although it&#39;s not clear that that is something that can be implemented in C? Otherwise this program could be used to spawn an arbitrary number of threads?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 117, "user_id": 12185282, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lwQMLnUZAeI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcBevbtLYaqdkjGOANpFz1mBnX3KQ/photo.jpg?sz=128", "display_name": "Daniel Decker", "link": "https://stackoverflow.com/users/12185282/daniel-decker"}, "edited": false, "score": 1, "creation_date": 1573606576, "post_id": 58828623, "comment_id": 103933798, "body": "Using <code>gettid()</code> to get a thread ID seems logical.   Whether it\u2019s a good seed is debatable, but it is better than <code>getpid()</code>.  There probably is an upper bound on the number of threads, but it will probably be substantial."}, {"owner": {"reputation": 117, "user_id": 12185282, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lwQMLnUZAeI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcBevbtLYaqdkjGOANpFz1mBnX3KQ/photo.jpg?sz=128", "display_name": "Daniel Decker", "link": "https://stackoverflow.com/users/12185282/daniel-decker"}, "edited": false, "score": 0, "creation_date": 1573607547, "post_id": 58828623, "comment_id": 103934009, "body": "Okay so I think I&#39;ve somewhat implemented it with your advice, although it isn&#39;t functioning like the other program, should I update the question to include this code so someone can maybe take a look?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 117, "user_id": 12185282, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lwQMLnUZAeI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcBevbtLYaqdkjGOANpFz1mBnX3KQ/photo.jpg?sz=128", "display_name": "Daniel Decker", "link": "https://stackoverflow.com/users/12185282/daniel-decker"}, "edited": false, "score": 1, "creation_date": 1573607781, "post_id": 58828623, "comment_id": 103934077, "body": "You could add the new code, leaving the old code also in place, but \u2026 since you\u2019ve accepted my answer (thanks), a new question for the revised code is probably better.  You could include a link to this question to give context."}, {"owner": {"reputation": 117, "user_id": 12185282, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lwQMLnUZAeI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcBevbtLYaqdkjGOANpFz1mBnX3KQ/photo.jpg?sz=128", "display_name": "Daniel Decker", "link": "https://stackoverflow.com/users/12185282/daniel-decker"}, "edited": false, "score": 0, "creation_date": 1573608184, "post_id": 58828623, "comment_id": 103934170, "body": "Okay thank you! I&#39;ll ask a new question with a link to this for reference, appreciate the help"}], "tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 2, "last_activity_date": 1573604575, "creation_date": 1573604575, "answer_id": 58828623, "question_id": 58826841, "link": "https://stackoverflow.com/questions/58826841/convert-a-process-based-program-into-a-thread-based-version/58828623#58828623", "title": "Convert a process based program into a thread based version?", "body": "<p>The general case depends on whether the threads are wholly independent of each other.  If you go multi-threaded, you must ensure that any shared resource is accessed appropriate protection.</p>\n\n<p>The code shown has a shared resource in the use of <code>srand()</code> and <code>rand()</code>. You will get different results in a multi-threaded process compared with those from multiple separate processes. Does this matter? If not, you may be able to let the threads run, but the C standard says the <a href=\"http://port70.net/~nsz/c/c11/n1570.html#7.22.2.2\" rel=\"nofollow noreferrer\"><code>srand()</code></a> and <a href=\"http://port70.net/~nsz/c/c11/n1570.html#7.22.2.1\" rel=\"nofollow noreferrer\"><code>rand()</code></a> functions don't have to be thread-safe.</p>\n\n<p>If it matters \u2014 and it probably does \u2014 you need to use a different PRNG (pseudo-random number generator) which allows you to have independent sequences (for example, POSIX <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/nrand48.html\" rel=\"nofollow noreferrer\"><code>nrand48()</code></a> \u2014 there may well be better alternatives, especially if you use modern C++).</p>\n\n<p>The use of <code>getpid()</code> won't work well in a multi-threaded process either. Each thread will get the same value (because the threads are all part of the same process), so the threads won't get independent sequences of random numbers for another reason.</p>\n"}], "owner": {"reputation": 117, "user_id": 12185282, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lwQMLnUZAeI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcBevbtLYaqdkjGOANpFz1mBnX3KQ/photo.jpg?sz=128", "display_name": "Daniel Decker", "link": "https://stackoverflow.com/users/12185282/daniel-decker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 1, "accepted_answer_id": 58828623, "answer_count": 1, "score": -2, "last_activity_date": 1573604575, "creation_date": 1573593591, "last_edit_date": 1573596544, "question_id": 58826841, "link": "https://stackoverflow.com/questions/58826841/convert-a-process-based-program-into-a-thread-based-version", "title": "Convert a process based program into a thread based version?", "body": "<p>I currently have this program which spawns an arbitrary number of child processes and I'm interested in having it implement threads instead of processes. I'm having trouble understanding how to convert from what I have, here is the code which uses processes:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;unistd.h&gt;\n\nvoid childprocess(int num);\n\nint main(int argc, char **argv) {\n\n  if (argc != 2)\n  {\n    fprintf(stderr, \"Usage: %s num-procs\\n\", argv[0]);\n    exit(EXIT_FAILURE);\n  }\n\n  int counter;\n  pid_t pid = getpid();\n  int x = atoi(argv[1]);\n\n  printf(\"Parent Process, my PID is %d\\n\", pid);\n\n  for(counter = 1; counter &lt;= x; counter++){\n\n    if(!fork()){\n      printf(\"Child %d is born, my PID is %d\\n\", counter, getpid());\n      childprocess(counter);\n      printf(\"Child %d dies\\n\", counter);\n      exit(0);\n    }\n  }\n}\n\nvoid childprocess(int num){\n\n  srand(getpid());\n  int max = rand() % 100;\n\n  for(int i = 0; i &lt; max; i++){\n    printf(\"Child %d executes iteration: %d\\n\", num, i);\n  }\n\n}\n</code></pre>\n\n<p>Is it as simple as changing a few lines to make it use threads instead? I understand the theory behind using threads but not how to actually write it in C given what I have here</p>\n"}, {"tags": ["c", "malloc"], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 11319588, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zdA3SbBLx60/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3red9Xc-ZvownSepcZgCFmq_MOy5XQ/mo/photo.jpg?sz=128", "display_name": "steve", "link": "https://stackoverflow.com/users/11319588/steve"}, "edited": false, "score": 0, "creation_date": 1573594303, "post_id": 58826834, "comment_id": 103930475, "body": "Thanks a million for your answer!"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1573596047, "post_id": 58826834, "comment_id": 103931047, "body": "The behavior in the question is not evidence that <code>malloc</code> allocated more than the requested amount of memory. The fact that the program can write to it and read from it just means the memory is mapped and writeable. It could have been memory that was allocated to something else, memory that the memory management subsystem had acquired from the operating system but not yet allocated, data structures used by the memory management subsystem, or other things."}], "tags": [], "owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "is_accepted": true, "score": 3, "last_activity_date": 1573593558, "creation_date": 1573593558, "answer_id": 58826834, "question_id": 58826707, "link": "https://stackoverflow.com/questions/58826707/confusion-over-successfully-writing-to-unallocated-memory-with-malloc/58826834#58826834", "title": "Confusion over successfully writing to unallocated memory with malloc();", "body": "<p>What you are seeing is <strong><em>Undefined Behaviour</em></strong> at it's most confusing: things work that shouldn't work.</p>\n\n<p>When you use <code>malloc</code> to allocate a block of memory of a given size (let's say, 20 bytes), there is no constraint on the implementation to allocate <strong>exactly</strong> that amount. In fact, on most modern PCs and operating systems, memory is more efficiently allocated in fixed-size blocks rather larger than 20 bytes, and typically something like 512 or 1,024 bytes (often known as a memory <em>page</em>).</p>\n\n<p>Thus, it would appear in your case that this has happened - but <strong><em>NEVER</em></strong> rely on this working. In fact, you may run your program 1,000 times and it works but, on run number 1,001 it doesn't work.</p>\n\n<blockquote>\n  <p>Also, if we are treating a pointer like an array, is there any way to\n  get the number of elements on that array?</p>\n</blockquote>\n\n<p>Short answer: No! When you use <code>malloc</code> to reserve memory, it is down to you to make sure you stay within the allocated bounds.</p>\n"}], "owner": {"reputation": 119, "user_id": 11319588, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zdA3SbBLx60/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3red9Xc-ZvownSepcZgCFmq_MOy5XQ/mo/photo.jpg?sz=128", "display_name": "steve", "link": "https://stackoverflow.com/users/11319588/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "closed_date": 1573596121, "accepted_answer_id": 58826834, "answer_count": 1, "score": 1, "last_activity_date": 1573596143, "creation_date": 1573593011, "question_id": 58826707, "link": "https://stackoverflow.com/questions/58826707/confusion-over-successfully-writing-to-unallocated-memory-with-malloc", "closed_reason": "Duplicate", "title": "Confusion over successfully writing to unallocated memory with malloc();", "body": "<p>I've created a simple program that has a struct <code>node</code> that consists of only an <code>int id</code>. In <code>main()</code>, I've created a node pointer <code>array</code>, and used <code>malloc(sizeof(struct node)*3)</code> to allocate space for three <code>struct node</code>. I then make these three pointers point to the nodes <code>first</code>, <code>second</code>, and <code>third</code>. </p>\n\n<p>However, I also create a <code>fourth</code> and <code>fifth</code> node, and allocate these to pointers after the third node. I was expecting to get a segmentation fault, but instead the program successfully reads and prints the <code>int id</code> for <code>fourth</code> and <code>fifth</code>, despite the fact that I didn't allocate memory. </p>\n\n<p>Am I misunderstanding <code>malloc()</code>? Also, if we are treating a pointer like an array, is there any way to get the number of elements on that array?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;assert.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;string.h&gt;\n\nstruct node{\n    int id;\n};\n\nint main(){\n    struct node * array;\n    array = malloc(sizeof(struct node) * 3);\n    struct node first = {7};\n    struct node second = {8};\n    struct node third = {9};\n    struct node fourth = {10};\n    struct node fifth = {11};\n    *(array + 0) = first;\n    *(array + 1) = second;\n    *(array + 2) = third;\n    *(array + 3) = fourth;\n    *(array + 4) = fifth;\n\n    printf(\"%d, %d, %d, %d, %d\\n\", (array + 0) -&gt; id, (array + 1) -&gt; id, (array + 2) -&gt; id, (array + 3) -&gt; id, (array + 4) -&gt; id);\n    printf(\"%d\\n\", sizeof(array));\n}\n</code></pre>\n"}, {"tags": ["c", "isalpha"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 6, "creation_date": 1573593056, "post_id": 58826696, "comment_id": 103930016, "body": "Because you are not comparing it to zero? You are comparing it to <code>1</code>. And it is only guaranteed to produce <i>zero</i> or  <i>non-zero</i>. And for some reason you are even comparing it to <code>2</code>?"}, {"owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "edited": false, "score": 1, "creation_date": 1573594003, "post_id": 58826696, "comment_id": 103930371, "body": "Note that <code>isalpha(str[c])</code>, where the argument <code>str</code> is an array of <code>char</code>, is not safe. <code>char</code> can be signed, which means it can have negative values. The input to <code>isalpha</code> (and other <code>ctype.h</code> functions) must either be a non-negative value (in the range 0 to UCHAR_MAX), or else the value of the negative constant <code>EOF</code> (not just any negative value). Basically, the input convention of these functions is derived from the return value convention of the <code>getc</code> function; they are geared toward classifying input characters read with <code>getc</code>."}, {"owner": {"reputation": 1, "user_id": 12363138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d925bce8437ffa392eda6b6ea190f00?s=128&d=identicon&r=PG&f=1", "display_name": "CrisUnipg", "link": "https://stackoverflow.com/users/12363138/crisunipg"}, "edited": false, "score": 0, "creation_date": 1573594346, "post_id": 58826696, "comment_id": 103930493, "body": "Because I had already tried to put 0 but it didn&#39;t seem to read me and therefore to verify it I tried to see the opposite case. I used 1 and 2 because I read that the function gives me 1 if the characters I read are tiny, while it returns 2 if the characters I read are capitalized."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1573594389, "post_id": 58826696, "comment_id": 103930512, "body": "<i>I read that the function gives me 1 if the characters I read are tiny, while it returns 2 if the characters I read are capitalized</i> - No way. Where did you read it?"}, {"owner": {"reputation": 1, "user_id": 12363138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d925bce8437ffa392eda6b6ea190f00?s=128&d=identicon&r=PG&f=1", "display_name": "CrisUnipg", "link": "https://stackoverflow.com/users/12363138/crisunipg"}, "edited": false, "score": 0, "creation_date": 1573594510, "post_id": 58826696, "comment_id": 103930552, "body": "Kaz - And if I use an unsigned char could it works?"}, {"owner": {"reputation": 1, "user_id": 12363138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d925bce8437ffa392eda6b6ea190f00?s=128&d=identicon&r=PG&f=1", "display_name": "CrisUnipg", "link": "https://stackoverflow.com/users/12363138/crisunipg"}, "edited": false, "score": 0, "creation_date": 1573594620, "post_id": 58826696, "comment_id": 103930588, "body": "Eugene - I have read it here [<a href=\"https://www.programiz.com/c-programming/library-function/ctype.h/isalpha]\" rel=\"nofollow noreferrer\">programiz.com/c-programming/library-function/ctype.h/isalph&zwnj;&#8203;a]</a>"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1573594733, "post_id": 58826696, "comment_id": 103930632, "body": "So you didn&#39;t read it carefully. It has the note right after the snippet you are probably referring to: <i>Note: You can get a different non-zero integer when alphabetic character is passed to isalpha() on your system. But, when you pass non-alphabetic character to isalpha(), it always returns 0.</i>"}, {"owner": {"reputation": 1, "user_id": 12363138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d925bce8437ffa392eda6b6ea190f00?s=128&d=identicon&r=PG&f=1", "display_name": "CrisUnipg", "link": "https://stackoverflow.com/users/12363138/crisunipg"}, "edited": false, "score": 0, "creation_date": 1573595031, "post_id": 58826696, "comment_id": 103930742, "body": "Yes, but it doesn&#39;t works..."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1573595108, "post_id": 58826696, "comment_id": 103930777, "body": "Then you should post the code which is at least attempting to conform with the proper function usage, and ask why it does not work. The posted code is not conforming."}, {"owner": {"reputation": 10586, "user_id": 170383, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4d9f7a30948dca1bbd05eaf27f277ae6?s=128&d=identicon&r=PG", "display_name": "David R Tribble", "link": "https://stackoverflow.com/users/170383/david-r-tribble"}, "edited": false, "score": 0, "creation_date": 1573596932, "post_id": 58826696, "comment_id": 103931372, "body": "The problems you might have with signed chars can be eliminated by declaring your array as <code>unsigned char alfabeto_sostituzione[26+1]</code>. Or alternatively, by casting the argument to <code>isalpha</code> to an unsigned char, as in <code>isalpha((unsigned char) ch)</code>."}, {"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 0, "creation_date": 1573627619, "post_id": 58826696, "comment_id": 103938594, "body": "If you like to detect lowercase and uppercase characters, try <a href=\"https://en.cppreference.com/w/c/string/byte/islower\" rel=\"nofollow noreferrer\"><code>islower()</code></a> and <a href=\"https://en.cppreference.com/w/c/string/byte/isupper\" rel=\"nofollow noreferrer\"><code>isupper()</code></a>. --- BTW, the link in your comment to Eugene is dead for me."}], "answers": [{"tags": [], "owner": {"reputation": 219, "user_id": 8198361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6261d06afb1d50c3759e956bf36438f?s=128&d=identicon&r=PG", "display_name": "Lily AB", "link": "https://stackoverflow.com/users/8198361/lily-ab"}, "is_accepted": false, "score": 1, "last_activity_date": 1573639435, "creation_date": 1573639435, "answer_id": 58834591, "question_id": 58826696, "link": "https://stackoverflow.com/questions/58826696/isalpha-function-in-c-dont-read/58834591#58834591", "title": "isalpha() function in C don&#39;t read", "body": "<ul>\n<li><code>isalpha(argument)</code> and other related functions declared in <code>ctype.h</code>\nreturn a non-zero(true) if the argument satisfies the condition\ndescribed, and zero(false) if not.</li>\n</ul>\n\n<p>Since you are checking for <code>lower</code> and <code>upper</code> case characters, the <code>ctype</code> library already has functions <code>islower(argument)</code> and <code>isupper(argument)</code> defined.\nYou could use them in tandem with the <code>isaplha</code> function, like so...... </p>\n\n<pre><code>for (int c=0; alfabeto_sostituzione[c] != '\\0'; c++)\n      {\n        if (isalpha(alfabeto_sostituzione[c]))\n          {\n            if(islower(alfabeto_sostituzione[c]))\n              alpha_minuscoli++;\n            else\n              alpha_maiuscoli++;\n          } \n      }\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12363138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d925bce8437ffa392eda6b6ea190f00?s=128&d=identicon&r=PG&f=1", "display_name": "CrisUnipg", "link": "https://stackoverflow.com/users/12363138/crisunipg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573639435, "creation_date": 1573592966, "question_id": 58826696, "link": "https://stackoverflow.com/questions/58826696/isalpha-function-in-c-dont-read", "title": "isalpha() function in C don&#39;t read", "body": "<p>I'm trying to write the substitution cipher  but, a part of it, in particular the one where it sees me if the inserted alphabet is composed only of text characters \"a ... z\", doesn't work me. Could you tell me why the isalpha function (alfabeto_sostitutivo), although I insert the normal alphabet, gives me 0 as a result? Thanks in advance for the time spent.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n\nint main () {\n\n  int  caratteri_diversi_1 = 0, caratteri_diversi_2 = 0, b = 0, tutti_alpha = 0, alpha_minuscoli = 0,            alpha_maiuscoli = 0;\n  char alfabeto_sostituzione [27];\n\n  printf (\"Inserisci l'alfabeto di criptazione (inglese):\\n\");\n  fgets  (alfabeto_sostituzione, sizeof(alfabeto_sostituzione), stdin);\n    if (strlen(alfabeto_sostituzione)==26) //se la lunghezza dell'alfabeto sostitutivo \u00e8 giusta\n      {\n        printf(\"I due alfabeti sono lunghi uguale\\n\");\n        for (int c=0; alfabeto_sostituzione[c] != '\\0'; c++)\n          {\n            if (isalpha(alfabeto_sostituzione[c])==1)\n              alpha_minuscoli++;\n            else if (isalpha(alfabeto_sostituzione[c])==2)\n              alpha_maiuscoli++;\n          }\n        tutti_alpha = alpha_minuscoli + alpha_maiuscoli;\n        printf(\"alpha_minuscoli: %d\\n\",alpha_minuscoli);\n        printf(\"alpha_maiuscoli: %d\\n\",alpha_maiuscoli);\n        printf(\"tutti_alpha: %d\\n\",tutti_alpha);\n        if (tutti_alpha &lt; 26 )\n          printf(\"L'alfabeto inserito NON contiene solo caratteri dell'alfabeto\\n\");\n      }\n  }\n</code></pre>\n\n<p>By filling in the program, the following text is returned:</p>\n\n<p>Inserisci l'alfabeto di criptazione (inglese):</p>\n\n<p>abcdefghijklmnopqrstuvwxyz</p>\n\n<p>I due alfabeti sono lunghi uguale </p>\n\n<p>alpha_minuscole: 0\n                                                                                      alpha_maiuscole:0</p>\n\n<p>tutti_alpha: 0</p>\n\n<p>L'alfabeto inserito NON contiene solo caratteri dell'alfabeto</p>\n"}, {"tags": ["c", "loops", "operators"], "comments": [{"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 0, "creation_date": 1573591252, "post_id": 58826218, "comment_id": 103929321, "body": "The second doesn&#39;t have a period at the end of the sentence."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1573591601, "post_id": 58826218, "comment_id": 103929445, "body": "And it also lacks a newline, which is even more problematic on some systems"}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 3, "last_activity_date": 1573591115, "creation_date": 1573591115, "answer_id": 58826315, "question_id": 58826218, "link": "https://stackoverflow.com/questions/58826218/can-anyone-tell-the-difference-between-these-two-code-snippets-in-c/58826315#58826315", "title": "Can anyone tell the difference between these two code snippets in C?", "body": "<p>Look closely at the <code>while</code> in the second snippet:</p>\n\n<pre><code>char c;\n//    here ----------------v\nwhile((c=getchar()) != 'X');\nprintf(\"Thanks for finally inputting an X\");\n</code></pre>\n\n<p>There is a <code>;</code> immediately after the <code>while</code>.  This means that the body of the loop is empty.  So the loop will continue to run just the condition until it is false, i.e. when <code>c</code> is equal to <code>'X'</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 405, "user_id": 7560917, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f6ad0889eaf5c0fde5d8a58cd2c30634?s=128&d=identicon&r=PG&f=1", "display_name": "Allen Li", "link": "https://stackoverflow.com/users/7560917/allen-li"}, "edited": false, "score": 1, "creation_date": 1573591677, "post_id": 58826347, "comment_id": 103929475, "body": "Thanks for your detailed answer."}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 2, "last_activity_date": 1573591896, "last_edit_date": 1573591896, "creation_date": 1573591254, "answer_id": 58826347, "question_id": 58826218, "link": "https://stackoverflow.com/questions/58826218/can-anyone-tell-the-difference-between-these-two-code-snippets-in-c/58826347#58826347", "title": "Can anyone tell the difference between these two code snippets in C?", "body": "<p>Both approaches are equivalent, but the second is more concise and uses less code:</p>\n\n<p>Evaluating the condition <code>(c = getchar()) != 'X')</code> first calls <code>getchar()</code> to read a byte from the standard input, store in into <code>c</code>, which by the way should be defined as an <code>int</code>, and compares this byte with <code>'X'</code>, continuing the loop until the user finally types an <code>X</code> (followed by a return) because the body of the <code>while</code> loop is an empty statement.</p>\n\n<p>The main problem with this approach is the program does not test for <code>EOF</code>, so it will perform a costly infinite loop if the standard intput reaches the end of file without ever reading an <code>X</code>.</p>\n\n<p>Here is a better alternative:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>int c;\nwhile ((c = getchar()) != EOF) {\n    if (c == 'X') {\n        printf(\"Thanks for finally inputting an X\\n\");\n        break;\n    }\n}\n</code></pre>\n\n<p>To avoid the confusing syntax <code>while((c=getchar()) != 'X');</code> some programmers would use an empty block:</p>\n\n<pre><code>while ((c = getchar()) != 'X') {\n}\n</code></pre>\n\n<p>Possiblity with an obnoxious comment:</p>\n\n<pre><code>while ((c = getchar()) != 'X') {\n    /* do nothing */\n}\n</code></pre>\n\n<p>I personally prefer a redundant <code>continue</code>:</p>\n\n<pre><code>while ((c = getchar()) != 'X')\n    continue;\n</code></pre>\n\n<p>Note also that this syntactic issue is also present in other languages inspired by C: C++, java, javascript, C#, Objective C, etc.</p>\n"}, {"tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": false, "score": 1, "last_activity_date": 1573591426, "creation_date": 1573591426, "answer_id": 58826376, "question_id": 58826218, "link": "https://stackoverflow.com/questions/58826218/can-anyone-tell-the-difference-between-these-two-code-snippets-in-c/58826376#58826376", "title": "Can anyone tell the difference between these two code snippets in C?", "body": "<p>These two code snippets are equivalent in behavior.</p>\n\n<p>In order to understand the second snippet, you need to remember that what exists in the inner parentheses in this case, will be evaluated first.</p>\n\n<p>So, this:</p>\n\n<pre><code>while((c=getchar()) != 'X');\n</code></pre>\n\n<p>will have the expression:</p>\n\n<pre><code>c = getchar()\n</code></pre>\n\n<p>evaluated first. Now, as you already know, the method getchar will be executed, receive the character the user input, and it will assign it to the variable <code>c</code>.</p>\n\n<p>Now our expression looks like this:</p>\n\n<pre><code>while((c) != 'X');\n</code></pre>\n\n<p>but since <code>c</code> is just a character, it's surrounding parentheses do not have an effect anymore, and we have right now:</p>\n\n<pre><code>while(c != 'X')\n</code></pre>\n\n<p>which is the same as the the condition of the while loop in the first code snippet, that you already understand.</p>\n\n<hr>\n\n<p>Tip: Read about <a href=\"https://en.cppreference.com/w/cpp/language/operator_precedence\" rel=\"nofollow noreferrer\">operators precedence</a>, which will help you understand why the parentheses are needed - otherwise you'd get a different, most probably unwanted, behavior.</p>\n\n<p>The reason is that the <code>!=</code> operator has higher precedence than the assignment operator. Using parentheses imposes the order of evaluation we desire.</p>\n"}], "owner": {"reputation": 405, "user_id": 7560917, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f6ad0889eaf5c0fde5d8a58cd2c30634?s=128&d=identicon&r=PG&f=1", "display_name": "Allen Li", "link": "https://stackoverflow.com/users/7560917/allen-li"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 58826347, "answer_count": 3, "score": 3, "last_activity_date": 1573591896, "creation_date": 1573590631, "last_edit_date": 1573591765, "question_id": 58826218, "link": "https://stackoverflow.com/questions/58826218/can-anyone-tell-the-difference-between-these-two-code-snippets-in-c", "title": "Can anyone tell the difference between these two code snippets in C?", "body": "<p>I'm new to C programming, I'm practicing while loop using getchar(). But I'm confusing about these two while loop code.\nThis is the first code: </p>\n\n<pre><code>char c;\nc=getchar();\nwhile(c != 'X')\n  c=getchar();\nprintf(\"Thanks for finally inputting an X.\\n\");\n</code></pre>\n\n<p>I undestand that this function will <code>printf</code> until the user enter X.</p>\n\n<p>Here is the second code:</p>\n\n<pre><code>char c;\nwhile((c=getchar()) != 'X');\nprintf(\"Thanks for finally inputting an X\");\n</code></pre>\n\n<p>Which did the same thing as the last function, but I don't really understand <code>while((c=getchar()) != 'X');</code> It means to me that when the user enters other characters than X, it will be true and print the sentence.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 1, "creation_date": 1573590485, "post_id": 58826168, "comment_id": 103929002, "body": "You have to put newlines in."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1573590779, "post_id": 58826168, "comment_id": 103929116, "body": "a) <code>first</code> etc are the wrong type. b) they are <i>uninitialised</i>. c) you must compare strings in C with <code>strcmp</code> not <code>==</code> or <code>!=</code>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1573590954, "post_id": 58826168, "comment_id": 103929188, "body": "Please take a look at the compiler&#39;s warnings and see what you can do to correct it."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1573652886, "post_id": 58826168, "comment_id": 103951380, "body": "Never use <code>scanf()</code> with plain <code>%s</code> (no width specifier).  And don&#39;t discard the result.  You should have <code>if (scanf(&quot;%99s&quot;, hotel) != 1) { fputs(&quot;Input error!&quot;, stderr); exit(EXIT_FAILURE); }</code> there."}], "answers": [{"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 1, "creation_date": 1573592137, "post_id": 58826456, "comment_id": 103929662, "body": "You might want to play it safe: <code>scanf(&quot;%s&quot;, hotel);</code> =&gt; <code>if (scanf(&quot;%99s&quot;, hotel) != 1) { printf(&quot;Unexpected end of file\\n&quot;); return 1; }</code>"}, {"owner": {"reputation": 3410, "user_id": 2900196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Lz658.jpg?s=128&g=1", "display_name": "Idriss Neumann", "link": "https://stackoverflow.com/users/2900196/idriss-neumann"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1573627044, "post_id": 58826456, "comment_id": 103938408, "body": "@chqrlie or use <code>fgets</code> instead like I suggest in comment :)"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1573630181, "post_id": 58826456, "comment_id": 103939637, "body": "<code>fgets()</code> however is not a direct replacement for <code>scanf(&quot;%s&quot;,...)</code>: <code>fgets()</code> will read a full (but potentially empty) line including he trailing newline if any, whereas <code>scanf()</code> will skip initial white space, including newlines and read the first word, leaving any subsequent white separator pending  in the standard input buffer. Very different semantics."}], "tags": [], "owner": {"reputation": 3410, "user_id": 2900196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Lz658.jpg?s=128&g=1", "display_name": "Idriss Neumann", "link": "https://stackoverflow.com/users/2900196/idriss-neumann"}, "is_accepted": false, "score": 0, "last_activity_date": 1573627076, "last_edit_date": 1573627076, "creation_date": 1573591796, "answer_id": 58826456, "question_id": 58826168, "link": "https://stackoverflow.com/questions/58826168/taking-string-input-in-c/58826456#58826456", "title": "Taking string input in C", "body": "<p>This should do the job (take a look to the comments to get the explanations):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt; /* to use strcmp */\n\nint main(int argc, char *argv[]) {\n    char hotel[100];\n\n    /* You need to initialize those strings and use the right type (char* or char[]) */\n    const char *first = \"first\";\n    const char *second = \"second\";\n    const char *third = \"third\" ;\n\n    printf(\"Enter Your Choice: \");\n    scanf(\"%s\", hotel); /* format specifies type 'char *' but the argument has type 'char (*)[100]' [-Wformat] =&gt; remove the '&amp;' */\n    /* Note: using fgets instead of scanf is safer */\n\n    /* Use strcmp to compare strings */\n    if (strcmp(hotel, first) != 0 &amp;&amp; strcmp(hotel, second) != 0 &amp;&amp; strcmp(hotel, third) != 0) {\n        printf(\"Invalid!\");\n        return 1; /* Your main function should return an integer value (0 if success) */\n    } else {\n        printf(\"OK\");\n        return 0; /* Your main function should return an integer value (0 if success) */\n    }\n} \n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 12281997, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OwBzgUbQh0c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcCTO3KCV86lrFD02x15jhZqfB29A/photo.jpg?sz=128", "display_name": "bizz123", "link": "https://stackoverflow.com/users/12281997/bizz123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1573627076, "creation_date": 1573590376, "last_edit_date": 1573590721, "question_id": 58826168, "link": "https://stackoverflow.com/questions/58826168/taking-string-input-in-c", "title": "Taking string input in C", "body": "<p>I want to take input from user (string). however, i want to restrict the user to enter only three types, and then proceed with the program. otherwise i want to print invalid, if any other string has been input. I wrote a program, but it certainly doesnt work.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() \n{\n    char hotel[100], first, second, third;\n\n    printf(\"Enter Your Choice: \");\n    scanf(\"%s\", &amp;hotel);\n\n    if (hotel != first &amp;&amp; hotel != second &amp;&amp; hotel != third) {\n        printf(\"Invalid!\");\n    } else {\n        printf(\"OK\");\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "operating-system", "disk", "hard-drive", "ata"], "answers": [{"tags": [], "owner": {"reputation": 25733, "user_id": 559737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5de249db6565b87a2699e131974268a?s=128&d=identicon&r=PG", "display_name": "Brendan", "link": "https://stackoverflow.com/users/559737/brendan"}, "is_accepted": true, "score": 1, "last_activity_date": 1573614162, "creation_date": 1573614162, "answer_id": 58829715, "question_id": 58826165, "link": "https://stackoverflow.com/questions/58826165/what-are-the-pata-ide-status-codes-and-what-do-they-mean/58829715#58829715", "title": "What are the PATA/IDE status codes, and what do they mean?", "body": "<p>Before you consider writing a device driver for any kind of device you need to find/download and read all relevant specs for that device (you shouldn't rely on partial scraps of heresy from strangers).</p>\n\n<p>Most of the relevant specs are ANSI standards created by a T13 working group; and a list of them can be found here: <a href=\"http://www.t13.org/Standards/Default.aspx?DocumentType=3\" rel=\"nofollow noreferrer\">http://www.t13.org/Standards/Default.aspx?DocumentType=3</a></p>\n\n<p>Unfortunately they are not free  (you're supposed to pay ANSI for copies because unpaid hobbyist programmers working on stuff that is no longer commercially relevant get treated the same as companies that manufacture hardware for profit (!) ). Fortunately a web search (searching for the title of the document from the T13 list) will usually find draft versions that are almost the same as the final standards.</p>\n\n<p>There are many (eight?) version of the \"AT Attachment\" specs (plus other specs that you'll also need). The register you're talking about is the IDE/ATA controller's status register and is defined within these specs. Some of the definitions of the status register bits have changed (becoming \"depends on command\" or \"obsolete\") in different versions of the specs; and \"depends on command\" (for bit 4 of the status register) is what it sounds like - the meaning of that bit depends on what command you gave the controller last.</p>\n"}, {"comments": [{"owner": {"reputation": 671, "user_id": 9273877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1aa81ca9d791711aad7bfd748752eb02?s=128&d=identicon&r=PG&f=1", "display_name": "Jachdich", "link": "https://stackoverflow.com/users/9273877/jachdich"}, "edited": false, "score": 0, "creation_date": 1573898408, "post_id": 58886913, "comment_id": 104045049, "body": "You mentioned 32 bit r/w - is that necessary if I&#39;m in 32 bit mode? Because I am reading and writing 256 16-bit values"}, {"owner": {"reputation": 311, "user_id": 12381289, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z7wLQ.jpg?s=128&g=1", "display_name": "fysnet", "link": "https://stackoverflow.com/users/12381289/fysnet"}, "reply_to_user": {"reputation": 671, "user_id": 9273877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1aa81ca9d791711aad7bfd748752eb02?s=128&d=identicon&r=PG&f=1", "display_name": "Jachdich", "link": "https://stackoverflow.com/users/9273877/jachdich"}, "edited": false, "score": 0, "creation_date": 1573924558, "post_id": 58886913, "comment_id": 104051573, "body": "No, reading/writing 16-bit words is okay.  Port I/O (PIO) doesn&#39;t know the difference between 16-bit real mode and 32-bit pmode."}], "tags": [], "owner": {"reputation": 311, "user_id": 12381289, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z7wLQ.jpg?s=128&g=1", "display_name": "fysnet", "link": "https://stackoverflow.com/users/12381289/fysnet"}, "is_accepted": false, "score": 1, "last_activity_date": 1573870091, "last_edit_date": 1573870091, "creation_date": 1573869989, "answer_id": 58886913, "question_id": 58826165, "link": "https://stackoverflow.com/questions/58826165/what-are-the-pata-ide-status-codes-and-what-do-they-mean/58886913#58886913", "title": "What are the PATA/IDE status codes, and what do they mean?", "body": "<p><a href=\"https://stackoverflow.com/a/58829715\">Brendan's answer</a> makes some good points.  Also, please note that a read from the command register is actually a read from the status register.  The command register is write only while a read from the same address is a read from the status register.  Then, if this register shows that the controller is busy, bit 7 set, reading from the status register could and may return undefined results.</p>\n\n<p>A return value of 88d (0x58) is a very common return for the status register.  This is shown as: 01011000b</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>bit 7 = 0 = not busy\nbit 6 = 1 = Drive is ready\nbit 5 = x = command specific\nbit 4 = x = command specific\nbit 3 = 1 = Data Request\nbit 2 = 0 = obsolete (command specific)\nbit 1 = 0 = obsolete (command specific)\nbit 0 = 0 = no error\n</code></pre>\n\n<p>With this in mind, notice that bit 3 is set.  This means that the controller/drive is ready for/expecting a data transfer, depending on the command sent.</p>\n\n<p>For example, if you sent the READ command, this bit means that it is ready for you to read from the data register (assuming you are using PIO).  If you are reading words (16-bit values), you should read the data register 256 times and this bit will clear.</p>\n\n<p>Note that if you are reading more than one sector at a time, you will receive an interrupt after each sector has been read, no matter how many you are reading, and the DRQ bit (bit 3) will again be set for the next sector.</p>\n\n<p>For writes, the DRQ bit indicates that the drive is ready for a write.  I.e.: write a 16-bit word to the DATA register.</p>\n\n<p>32-bit reads and writes are the same, though you only transfer 128 words instead of 256 words.</p>\n\n<p>Also, a read from the status register clears the interrupt status of the command, indicating to the controller that the next command can be started.  Sometimes this is not the intent.  Therefore, the controller has an ALT STATUS register which returns the exact same result without clearing the interrupt status.  You should be reading from it until you are ready to clear the interrupt.</p>\n"}], "owner": {"reputation": 671, "user_id": 9273877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1aa81ca9d791711aad7bfd748752eb02?s=128&d=identicon&r=PG&f=1", "display_name": "Jachdich", "link": "https://stackoverflow.com/users/9273877/jachdich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 58829715, "answer_count": 2, "score": 3, "last_activity_date": 1573870091, "creation_date": 1573590362, "question_id": 58826165, "link": "https://stackoverflow.com/questions/58826165/what-are-the-pata-ide-status-codes-and-what-do-they-mean", "title": "What are the PATA/IDE status codes, and what do they mean?", "body": "<p>I'm writing an OS for fun and I'm trying to write a PATA/IDE driver to access the disk, however it is not working. I have this line <code>unsigned char status = port_byte_in(ATAPort + COMMANDPORT);</code> which returns the value of 88 (decimal). As this might be an indication of what I've done wrong, and as a referance for others, what are the PATA/IDE status codes?</p>\n\n<p>My driver follows the <a href=\"https://wiki.osdev.org/ATA_PIO_Mode#28_bit_PIO\" rel=\"nofollow noreferrer\">28 bit PIO</a> PATA/IDE process.</p>\n\n<p>EDIT - to clarify, here's the <code>port_byte_in</code> function:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>unsigned char port_byte_in(unsigned short port) {\n    unsigned char result;\n    __asm__(\"in %%dx, %%al\" : \"=a\" (result) : \"d\" (port));\n    return result;\n}\n</code></pre>\n\n<p>And <code>ATAPort</code> is <code>0x1F0</code>, <code>COMMANDPORT</code> = <code>0x07</code></p>\n"}, {"tags": ["c++", "c", "mql4", "metatrader4", "mql5"], "comments": [{"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1573589057, "post_id": 58825820, "comment_id": 103928405, "body": "Although I am not quite sure what you really trying to do, how about replace percentages 120 ,...,190 to 10 ,..., 90?"}, {"owner": {"reputation": 49, "user_id": 9436218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0263eb06563156af1e9dd5c9065533a?s=128&d=identicon&r=PG&f=1", "display_name": "olu mide", "link": "https://stackoverflow.com/users/9436218/olu-mide"}, "reply_to_user": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1573589276, "post_id": 58825820, "comment_id": 103928497, "body": "You mean replace the percentage with direct values? like 0.1 * 120? lemme try it out in a moment. I&#39;m not just good at maths"}, {"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1573589389, "post_id": 58825820, "comment_id": 103928535, "body": "No I mean just the percentages, For example (0.1/100)*10"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1573589836, "post_id": 58825820, "comment_id": 103928727, "body": "Divide <code>6.7 &#47; 45</code> (the sum of 1..9). First term is that. Add again for the second term, etc. Sum of terms (<code>0.149 0.298 0.447 0.596 0.744 0.893 1.042 1.191 1.340</code>) is <code>6.7</code>."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1573590096, "post_id": 58825820, "comment_id": 103928836, "body": "@olumide -- <code>Lots1 = 0.1;</code> -- Please note that this is not precise.  You may come across <a href=\"https://stackoverflow.com/questions/588004/is-floating-point-math-broken\">this issue</a>.  You would be better off if you worked in integer, and only during calculations you divide to get the decimal fractions."}, {"owner": {"reputation": 49, "user_id": 9436218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0263eb06563156af1e9dd5c9065533a?s=128&d=identicon&r=PG&f=1", "display_name": "olu mide", "link": "https://stackoverflow.com/users/9436218/olu-mide"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1573590206, "post_id": 58825820, "comment_id": 103928885, "body": "Hi @WeatherVane My maths is poor to know &quot;add second term&quot;... If i see tw examples, i might be able to follow-up myself"}, {"owner": {"reputation": 49, "user_id": 9436218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0263eb06563156af1e9dd5c9065533a?s=128&d=identicon&r=PG&f=1", "display_name": "olu mide", "link": "https://stackoverflow.com/users/9436218/olu-mide"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1573590288, "post_id": 58825820, "comment_id": 103928919, "body": "Thanks, @PaulMcKenzie. I normalize before usage..."}, {"owner": {"reputation": 1149, "user_id": 2472827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5rYY.jpg?s=128&g=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/2472827/neil"}, "edited": false, "score": 0, "creation_date": 1573590390, "post_id": 58825820, "comment_id": 103928954, "body": "Have you normalised the total of your fractions? (I see you did just now.)"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1573590484, "post_id": 58825820, "comment_id": 103929001, "body": "<code>x = 6.7 &#47; 45</code> is <code>0.148889</code>. The first term is <code>x</code>, the second term is <code>2 * x</code>, the third term is <code>3 * x</code> etc. They added up to <code>45 * x</code> which is <code>6.7</code>, but it&#39;s better to divide <i>last</i>. So the second term, say, would be <code>6.7 * 2 &#47; 45</code>"}, {"owner": {"reputation": 49, "user_id": 9436218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0263eb06563156af1e9dd5c9065533a?s=128&d=identicon&r=PG&f=1", "display_name": "olu mide", "link": "https://stackoverflow.com/users/9436218/olu-mide"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1573594370, "post_id": 58825820, "comment_id": 103930505, "body": "Thanks, @WeatherVane. I wasn&#39;t expecting to get this maths programming problem solved... Yours as well is worth an answer"}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 9436218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0263eb06563156af1e9dd5c9065533a?s=128&d=identicon&r=PG&f=1", "display_name": "olu mide", "link": "https://stackoverflow.com/users/9436218/olu-mide"}, "edited": false, "score": 0, "creation_date": 1573589493, "post_id": 58825980, "comment_id": 103928574, "body": "Do you mean totalPercentage += AllZoneLots[i]; ?"}, {"owner": {"reputation": 49, "user_id": 9436218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0263eb06563156af1e9dd5c9065533a?s=128&d=identicon&r=PG&f=1", "display_name": "olu mide", "link": "https://stackoverflow.com/users/9436218/olu-mide"}, "edited": false, "score": 0, "creation_date": 1573589862, "post_id": 58825980, "comment_id": 103928735, "body": "Please, give the Lots2 example, so i can guess the rest in my test... My test from Lots1 = 0.28;"}, {"owner": {"reputation": 1591, "user_id": 7264980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6251945f2fe3a58c482788f1cd20fa9?s=128&d=identicon&r=PG", "display_name": "Anatoliy R", "link": "https://stackoverflow.com/users/7264980/anatoliy-r"}, "reply_to_user": {"reputation": 49, "user_id": 9436218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0263eb06563156af1e9dd5c9065533a?s=128&d=identicon&r=PG&f=1", "display_name": "olu mide", "link": "https://stackoverflow.com/users/9436218/olu-mide"}, "edited": false, "score": 0, "creation_date": 1573590059, "post_id": 58825980, "comment_id": 103928825, "body": "@olumide you just continue you code: Lots2 = (Lots1 / 100.00) * AllZoneLots[0], Lots3 = (Lots1 / 100.00) * AllZoneLots[1], etc. Total for Lots2 to Lots9 must be 3.5. If you want to include Lots1 into 3.5, you have to add 100 to the totalPercentage"}, {"owner": {"reputation": 49, "user_id": 9436218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0263eb06563156af1e9dd5c9065533a?s=128&d=identicon&r=PG&f=1", "display_name": "olu mide", "link": "https://stackoverflow.com/users/9436218/olu-mide"}, "edited": false, "score": 0, "creation_date": 1573597710, "post_id": 58825980, "comment_id": 103931641, "body": "Your answer is fine, even nice to work with... I had to select the answer from @weathervane coz it looks more closer to the implementation i need - which doesn&#39;t deal with my actual example implementation"}], "tags": [], "owner": {"reputation": 1591, "user_id": 7264980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6251945f2fe3a58c482788f1cd20fa9?s=128&d=identicon&r=PG", "display_name": "Anatoliy R", "link": "https://stackoverflow.com/users/7264980/anatoliy-r"}, "is_accepted": false, "score": 0, "last_activity_date": 1573589862, "last_edit_date": 1573589862, "creation_date": 1573589414, "answer_id": 58825980, "question_id": 58825820, "link": "https://stackoverflow.com/questions/58825820/how-to-divide-a-number-into-several-unequal-yet-increasing-numbers-for-sendi/58825980#58825980", "title": "How to divide a number into several, unequal, yet increasing numbers [ for sending a PlaceOrder( OP_BUY, lots ) contract XTO ]", "body": "<p>Not sure I understood right, but probably you need total of 3.5 shared between all lots.</p>\n\n<p>And I can see only 8 lots not counting initial one.</p>\n\n<pre><code>totalPercentage = 0;\nfor(int i = 0; i &lt; ArraySize(AllZoneLots); i++) {\n    totalPercentage += AllZoneLots[i];\n}\n\ndouble totalValue = 3.5;\n\n// total value is total percentage, Lots1 - 100%, so:\nLots1 = totalValue / totalPercentage * 100.00;\n</code></pre>\n\n<p>Then you continue with your code.</p>\n\n<p>If you want to include Lots1, you just add 100 to the total and do the same.</p>\n"}, {"comments": [{"owner": {"reputation": 49, "user_id": 9436218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0263eb06563156af1e9dd5c9065533a?s=128&d=identicon&r=PG&f=1", "display_name": "olu mide", "link": "https://stackoverflow.com/users/9436218/olu-mide"}, "edited": false, "score": 0, "creation_date": 1573597750, "post_id": 58827546, "comment_id": 103931652, "body": "This is just that which i need... Increment by step...  Thanks"}, {"owner": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "edited": false, "score": 0, "creation_date": 1573603508, "post_id": 58827546, "comment_id": 103933148, "body": "With all due respect ( respecting also chances the MQL4-domain is not your primary domain of expertise ), <b>this algorithm is principally wrong and does not solve the O/P in the domain of application</b>: The next instruction: <b>PlaceOrder( OP_BUY, lots ); confirms that the quantities are not free to compute</b>, but also have to meet all the legally set constraints from conditions of valid MINLOTS, MAXLOTS and MINLOTSTEP values from MarketInfo() context."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "edited": false, "score": 1, "creation_date": 1573634696, "post_id": 58827546, "comment_id": 103941639, "body": "@user3666197 thank you for your advice. I posted this as a comment originally, just to show how increasing values can be evenly distributed, which is what the question asks. OP <a href=\"https://stackoverflow.com/questions/58825820/divide-a-digit-into-several-unequal-yet-increasing-digits/58827546?noredirect=1#comment103930505_58825820\">asked me</a> to convert it to an answer, which I did in C because of the tag C, and because the posted code looks like C. <code>PlaceOrder</code> is commented out. If you feel this answer is wrong <b>in principal</b>, please post what you believe to be the correct answer."}, {"owner": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "edited": false, "score": 0, "creation_date": 1573657267, "post_id": 58827546, "comment_id": 103953925, "body": "IMHO it was not necessary to explain the history @WeatherVane as it was since the very beginning of the text noted above, the comment was not an objection ( of any form or fashion ) but was rather a warning to the Community Members and general public, that the presented algorithm, as-is, does not solve the O/P&#39;s problem in her/his domain of application ( which was understood as most probably not being at the same time a domain of your primary expertise, which was also expressed above ). The principally correct, context-aware solution demo was posted below."}, {"owner": {"reputation": 49, "user_id": 9436218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0263eb06563156af1e9dd5c9065533a?s=128&d=identicon&r=PG&f=1", "display_name": "olu mide", "link": "https://stackoverflow.com/users/9436218/olu-mide"}, "edited": false, "score": 0, "creation_date": 1573718469, "post_id": 58827546, "comment_id": 103976219, "body": "There was a code I removed for brevity which checks for MINLOT, MAXLOT, etc."}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": true, "score": 0, "last_activity_date": 1573718814, "last_edit_date": 1573718814, "creation_date": 1573597162, "answer_id": 58827546, "question_id": 58825820, "link": "https://stackoverflow.com/questions/58825820/how-to-divide-a-number-into-several-unequal-yet-increasing-numbers-for-sendi/58827546#58827546", "title": "How to divide a number into several, unequal, yet increasing numbers [ for sending a PlaceOrder( OP_BUY, lots ) contract XTO ]", "body": "<p>This can be done so as to make <strong>equal steps</strong> in the values. If there are 9 steps, divide the value by 45 to get the first value, and the equal step <code>x</code>. Why? Because the sum of 1..9 is 45.</p>\n\n<pre><code>x = 6.7 / 45\n</code></pre>\n\n<p>which is 0.148889</p>\n\n<p>The first term is <code>x</code>, the second term is <code>2 * x</code>, the third term is <code>3 * x</code> etc. They add up to <code>45 * x</code> which is 6.7, but it's better to divide <em>last</em>. So the second term, say, would be <code>6.7 * 2 / 45;</code></p>\n\n<p>Here is code which shows how it can be done in C, since MQL4 works with C Syntax:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    double val = 6.7;\n    double term;\n    double sum = 0;\n    for(int i = 1; i &lt;= 9; i++) {\n        term = val * i / 45;\n        printf(\"%.3f \", term);\n        sum += term;\n    }\n    printf(\"\\nsum = %.3f\\n\", sum);\n}\n</code></pre>\n\n<p>Program output:</p>\n\n<pre><code>0.149 0.298 0.447 0.596 0.744 0.893 1.042 1.191 1.340 \nsum = 6.700\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 49, "user_id": 9436218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0263eb06563156af1e9dd5c9065533a?s=128&d=identicon&r=PG&f=1", "display_name": "olu mide", "link": "https://stackoverflow.com/users/9436218/olu-mide"}, "edited": false, "score": 0, "creation_date": 1573718914, "post_id": 58839688, "comment_id": 103976378, "body": "range and len also doesn&#39;t exist in MQL4, looks like python pseudo-code?"}, {"owner": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "reply_to_user": {"reputation": 49, "user_id": 9436218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0263eb06563156af1e9dd5c9065533a?s=128&d=identicon&r=PG&f=1", "display_name": "olu mide", "link": "https://stackoverflow.com/users/9436218/olu-mide"}, "edited": false, "score": 0, "creation_date": 1573720236, "post_id": 58839688, "comment_id": 103976997, "body": "<b>Obviously.</b> The purpose was to immediately show the progression of the above requested sizing ( rolling sum was not added as one can sum by heart, reaching more than <b>~ 64+ LOTs</b> ) Btw. <b>whoever can trade XTO-s with volumes above 64+ LOTs, there are way more problems to face</b> ( and due measures have to get implemented and operated ) in the production-grade code for live-trading on real markets."}], "tags": [], "owner": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "is_accepted": false, "score": 0, "last_activity_date": 1573657442, "last_edit_date": 1573657442, "creation_date": 1573656600, "answer_id": 58839688, "question_id": 58825820, "link": "https://stackoverflow.com/questions/58825820/how-to-divide-a-number-into-several-unequal-yet-increasing-numbers-for-sendi/58839688#58839688", "title": "How to divide a number into several, unequal, yet increasing numbers [ for sending a PlaceOrder( OP_BUY, lots ) contract XTO ]", "body": "<blockquote>\n  <p><strong>Q</strong> : <em>How to divide a number into several, unequal, yet increasing numbers [ for sending a <code>PlaceOrder( OP_BUY, lots )</code> contract XTO ]?</em></p>\n</blockquote>\n\n<h2>A : The problem is not as free as it might look for a first sight :</h2>\n\n<p>In <a href=\"/questions/tagged/metatrader\" class=\"post-tag\" title=\"show questions tagged &#39;metatrader&#39;\" rel=\"tag\">metatrader</a> Terminal ecosystem, the problem formulation has also to obey the externally decided factors ( that are mandatory for any XTO with an ambition not to get rejected, as being principally incompatible with the XTO Terms &amp; Conditions set, and to get filled ~ \"placed\" At Market )</p>\n\n<p>These factors are reportable via a call to:</p>\n\n<pre><code>MarketInfo( &lt;_a_SymbolToReportSTRING&gt;, MODE_MINLOT  ); // a minimum permitted size\nMarketInfo( &lt;_a_SymbolToReportSTRING&gt;, MODE_LOTSTEP ); // a mandatory size-stepping\nMarketInfo( &lt;_a_SymbolToReportSTRING&gt;, MODE_MAXLOT  ); // a maximum permitted size\n</code></pre>\n\n<p>Additionally, any such lot-size has to be prior of submitting an XTO also \"normalised\" for given number of decimal places, so as to successfully placed / accepted by the Trading-Server on the Broker's side. A failure to do so results in remotely rejected XTO-s ( which obviously come at a remarkable blocking / immense code-execution latency penalty one would always want to prevent from ever happening in real trading )</p>\n\n<p>Last, but not least, any such XTO sizing has to be covered by a safe amount of leveraged equity ( checking the free-margin availability first, before ever sending any such XTO for reasons just mentioned above ).</p>\n\n<hr>\n\n<h2>The code:</h2>\n\n<p>While the initial pseudo-code above, does a progressive ( Martingale-alike ) lot-size scaling:</p>\n\n<pre><code>&gt;&gt;&gt; aListOfFACTORs = [ 100, 120, 130, 140, 140, 160, 170, 180, 190 ]\n&gt;&gt;&gt; for endPoint in range( len( aListOfFACTORs ) ):\n...     product = 1.\n...     for item in aListOfFACTORs[:1+endPoint]:\n...         product *= item / 100.\n...     print( \"Lots{0:} ~ ought be about {1:} times the amount of Lots1\".format( 1 + endPoint, product ) )\n... \n\nLots1 ~ ought be about  1.0        times the amount of Lots1\nLots2 ~ ought be about  1.2        times the amount of Lots1\nLots3 ~ ought be about  1.56       times the amount of Lots1\nLots4 ~ ought be about  2.184      times the amount of Lots1\nLots5 ~ ought be about  3.0576     times the amount of Lots1\nLots6 ~ ought be about  4.89216    times the amount of Lots1\nLots7 ~ ought be about  8.316672   times the amount of Lots1\nLots8 ~ ought be about 14.9700096  times the amount of Lots1\nLots9 ~ ought be about 28.44301824 times the amount of Lots1\n</code></pre>\n\n<p>the <strong><code>_MINLOT</code></strong>, <strong><code>_LOTSTEP</code></strong> and <strong><code>_MAXLOT</code></strong> put the game into a new light.</p>\n\n<p>Any successful strategy is not free to chose the sizes. Given the said <strong><code>9</code>-steps</strong> and a fixed amount of the <strong>total-amount <code>~ 6.7</code> lots</strong>, the process can obey the stepping and total, <strong>plus, it must obey the <code>MarketInfo()</code>-reported sizing algebra</strong></p>\n\n<p>Given <strong>9-steps</strong> are mandatory,<br>\neach one has to be at least <code>_MINLOT</code>-sized:</p>\n\n<pre><code>double total_amount_to_split = aSizeToSPLIT;\n\ntotal_amount_to_split = Min(   aSizeToSPLIT,                 // a wished-to-have-sizing\n                               FreeMargin/LotInBaseCurr*sFty // a FreeMargin-covered size \n                               );\nint next = 0;\n\nwhile ( total_amount_to_split &gt;= _MINLOT )\n{       total_amount_to_split -= _MINLOT;\n        lot_size[next++]       = _MINLOT;\n       }\n/*\n###################################################################################\n------------------------------------------------- HERE, WE HAVE 0:next lot_sizes\n                                                                  next NEED NOT == 9\nIf there is anything yet to split:\n   there is an integer amount of _LOTSTEP-s to distribute among 'em\n\n   HERE, and ONLY here, you have a freedom to decide about split/mapping\n                                           of the integer amount of _LOTSTEP-sized\n                                           additions to the _MINLOT \"pre\"-sets\n                                                                     in lot_size[]-s\n   YET, still no more than _MAXLOT is permissible for the above explained reasons\n------------------------------------------------- CODE has to obey this, if XTO-s\n                                                                         are to\n                                                                         get a chance\n###################################################################################\n                                                  */\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 9436218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0263eb06563156af1e9dd5c9065533a?s=128&d=identicon&r=PG&f=1", "display_name": "olu mide", "link": "https://stackoverflow.com/users/9436218/olu-mide"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 2, "accepted_answer_id": 58827546, "answer_count": 3, "score": -2, "last_activity_date": 1573718814, "creation_date": 1573588633, "last_edit_date": 1573654200, "question_id": 58825820, "link": "https://stackoverflow.com/questions/58825820/how-to-divide-a-number-into-several-unequal-yet-increasing-numbers-for-sendi", "title": "How to divide a number into several, unequal, yet increasing numbers [ for sending a PlaceOrder( OP_BUY, lots ) contract XTO ]", "body": "<p>I try to create an MQL4-script (an almost C++ related language, MQL4) where I want to <strong>divide a <code>double</code></strong> value into <strong>9 parts</strong>, where the fractions would be unequal, yet <strong>increasing</strong></p>\n\n<p>My current code attempts to do it this way (pseudo-code) :</p>\n\n<pre><code>   Lots1 = 0.1;\n   Lots2 = (Lots1 / 100) * 120;//120% of Lot1\n   Lots3 = (Lots2 / 100) * 130;//130% of Lot2\n   Lots4 = (Lots3 / 100) * 140;//140% of Lot3\n   Lots5 = (Lots4 / 100) * 140;//140% of Lot4\n   Lots6 = (Lots5 / 100) * 160;//160% of Lot5\n   Lots7 = (Lots6 / 100) * 170;//170% of Lot6\n   Lots8 = (Lots7 / 100) * 180;//180% of Lot7\n   Lots9 = (Lots8 / 100) * 190;//190% of Lot8\n   ...\n</code></pre>\n\n<p>or better :</p>\n\n<pre><code>double Lots = 0.1;   // a Lot Size\ndouble lot  = Lots;\n...\n                   /* Here is the array with percentages of lots' increments\n                                                         in order */\nint AllZoneLots[8] = { 120, 130, 140, 140, 160, 170, 180, 190 }; // 120%, 130%,...\n\n                  /* Here, the lot sizes are used by looping the array\n                                         and increasing the lot size by the count */\nfor( int i = 0; i &lt; ArraySize( AllZoneLots ); i++ ) {\n                        lots = AllZoneLots[i] * ( lots / 100 ) *;\n // PlaceOrder( OP_BUY, lots );\n}\n</code></pre>\n\n<p>But, what I want is to just have a fixed value of 6.7 split into 9 parts, like these codes do, yet to have the value increasing, rather than being same...\ne.g, 6.7 split into :</p>\n\n<pre><code>double lots = { 0.10, 0.12, 0.16, 0.22, 0.31, 0.50, 0.85, 1.53, 2.91 };\n            /* This is just an example\n                            of how to divide a value of 6.7 into 9, growing parts\n</code></pre>\n"}, {"tags": ["c", "linked-list", "segmentation-fault", "doubly-linked-list"], "comments": [{"owner": {"reputation": 5, "user_id": 12304339, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAdSbvHoP6w2jYO-QWwhS-al0a2crfaH5BrdnGRPg=k-s128", "display_name": "Clothing Diares", "link": "https://stackoverflow.com/users/12304339/clothing-diares"}, "reply_to_user": {"reputation": 2060, "user_id": 3808573, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CmqrY.png?s=128&g=1", "display_name": "ssd", "link": "https://stackoverflow.com/users/3808573/ssd"}, "edited": false, "score": 0, "creation_date": 1573588437, "post_id": 58825571, "comment_id": 103928142, "body": "@ssd Inside that function there is only one instruction : <code>return (lista_char)malloc(sizeof(struct nodo_char));</code>"}, {"owner": {"reputation": 2060, "user_id": 3808573, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CmqrY.png?s=128&g=1", "display_name": "ssd", "link": "https://stackoverflow.com/users/3808573/ssd"}, "edited": false, "score": 0, "creation_date": 1573588562, "post_id": 58825571, "comment_id": 103928200, "body": "Ok... I think you&#39;d better pass the address with a double star; i.e. <code>(lista_char **pl)</code>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 2060, "user_id": 3808573, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CmqrY.png?s=128&g=1", "display_name": "ssd", "link": "https://stackoverflow.com/users/3808573/ssd"}, "edited": false, "score": 0, "creation_date": 1573588697, "post_id": 58825571, "comment_id": 103928253, "body": "@ssd it looks as though <code>lista_char</code> is <code>typedef</code>ed as a pointer, from <code>lista_char new_node = makesNode();</code>"}, {"owner": {"reputation": 5, "user_id": 12304339, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAdSbvHoP6w2jYO-QWwhS-al0a2crfaH5BrdnGRPg=k-s128", "display_name": "Clothing Diares", "link": "https://stackoverflow.com/users/12304339/clothing-diares"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1573588903, "post_id": 58825571, "comment_id": 103928333, "body": "@WeatherVane Yes, it&#39;s like that. I also wrote that in the body of the question..."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1573588985, "post_id": 58825571, "comment_id": 103928373, "body": "You are dereferencing with <code>if(*pl != NULL)</code> but suppose it&#39;s the head of an empty list and <code>pl == NULL</code>? It might be easier to follow it you only <code>typedef</code> the pointer <i>after</i> the code is working. Teacher doesn&#39;t have to know that."}, {"owner": {"reputation": 5, "user_id": 12304339, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAdSbvHoP6w2jYO-QWwhS-al0a2crfaH5BrdnGRPg=k-s128", "display_name": "Clothing Diares", "link": "https://stackoverflow.com/users/12304339/clothing-diares"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1573589252, "post_id": 58825571, "comment_id": 103928493, "body": "@WeatherVane You&#39;re right. I think I&#39;ll do an else to allow the insert when the list is empty. It probably was the problem, thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 2060, "user_id": 3808573, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CmqrY.png?s=128&g=1", "display_name": "ssd", "link": "https://stackoverflow.com/users/3808573/ssd"}, "is_accepted": true, "score": 0, "last_activity_date": 1573592695, "last_edit_date": 1573592695, "creation_date": 1573591375, "answer_id": 58826370, "question_id": 58825571, "link": "https://stackoverflow.com/questions/58825571/incurring-in-segmentation-fault-problems-with-doubly-linked-lists-in-c/58826370#58826370", "title": "Incurring in segmentation fault problems with doubly linked lists in C", "body": "<p>I think, a pointer with a double star will work:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct lista_char {\n  char info;\n  struct lista_char *next;\n  struct lista_char *prev;\n} lista_char;\n\nlista_char *makesNode()\n{\n  lista_char *node = malloc(sizeof(lista_char));\n  return (node);\n}\n\nvoid insertInList(lista_char **pl)\n{\n  char charSel[] = {'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'e'};\n  lista_char *new_node = makesNode();\n\n  new_node-&gt;info = charSel[rand() % 10];\n  new_node-&gt;next = *pl;\n  new_node-&gt;prev = NULL;\n\n  printf(\"%c\\n\", new_node-&gt;info);\n\n  if (*pl != NULL)\n    (*pl)-&gt;prev = new_node;\n\n  *pl = new_node;\n}\n\nint main()\n{\n  lista_char *temp;\n  lista_char *head = NULL;\n\n  for (int i = 0; i &lt; 10; i++) {\n    insertInList(&amp;head);\n  }\n\n  temp = head;\n\n  while (temp-&gt;next) {\n    if (temp-&gt;prev == NULL) {\n      printf(\"prev: %c this: %c next: %c\\n\", '-', temp-&gt;info, (temp-&gt;next)-&gt;info);\n    }\n    else {\n      printf(\"prev: %c this: %c next: %c\\n\", (temp-&gt;prev)-&gt;info, temp-&gt;info, (temp-&gt;next)-&gt;info);\n    }\n\n    temp = temp-&gt;next;\n  }\n\n  printf(\"prev: %c this: %c next: %c\\n\", (temp-&gt;prev)-&gt;info, temp-&gt;info, '-');\n\n  // free memory\n  temp = head;\n\n  while (temp-&gt;next) {\n    temp = temp-&gt;next;\n    free(temp-&gt;prev);\n  }\n\n  free(temp);\n\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 12304339, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAdSbvHoP6w2jYO-QWwhS-al0a2crfaH5BrdnGRPg=k-s128", "display_name": "Clothing Diares", "link": "https://stackoverflow.com/users/12304339/clothing-diares"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 58826370, "answer_count": 1, "score": 0, "last_activity_date": 1573592695, "creation_date": 1573587507, "question_id": 58825571, "link": "https://stackoverflow.com/questions/58825571/incurring-in-segmentation-fault-problems-with-doubly-linked-lists-in-c", "title": "Incurring in segmentation fault problems with doubly linked lists in C", "body": "<p>I'm trying to insert nodes at the front of a doubly linked list using a function, but I get a segmentation fault error and just can't understand what the problem is. For the typedefing of the pointers I actually know I shouldn't do that, but my teacher asked me to typedef them, for who knows what reason.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>void insertInList(lista_char *pl){\n    char charSel[] = {'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'e'};\n    lista_char new_node = makesNode();\n\n    new_node-&gt;info = charSel[rand()%10]; \n\n    new_node-&gt;next = *pl;\n    new_node-&gt;prev = NULL;\n\n    if(*pl != NULL)\n        (*pl)-&gt;prev = new_node;\n\n    *pl = new_node;\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "encryption"], "comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 2, "creation_date": 1573585928, "post_id": 58825122, "comment_id": 103927076, "body": "<code>z[i]</code> isn&#39;t a <i>pointer</i>, it&#39;s a <i>character</i>."}, {"owner": {"reputation": 11, "user_id": 12362783, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pfuNfaTEH_o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc5Cbp_xTXaKxeVuOO8NvMtFaCycQ/photo.jpg?sz=128", "display_name": "Johnstone88", "link": "https://stackoverflow.com/users/12362783/johnstone88"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1573586255, "post_id": 58825122, "comment_id": 103927211, "body": "@FredLarsonyes but i want to reduce the <i>char</i> value in <i>decimal</i> form then display it as a <i>string</i>. Example: The c decimal is 98, reduced by 2 to 97 which is &#39;a&#39;. I want to display it again as a <i>string</i>.. So what the solution?"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 1, "creation_date": 1573586322, "post_id": 58825122, "comment_id": 103927235, "body": "Regardless, you can&#39;t dereference a <code>char</code>. Assign the char value to an <code>int</code> if you like, but don&#39;t treat it like a pointer."}, {"owner": {"reputation": 11, "user_id": 12362783, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pfuNfaTEH_o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc5Cbp_xTXaKxeVuOO8NvMtFaCycQ/photo.jpg?sz=128", "display_name": "Johnstone88", "link": "https://stackoverflow.com/users/12362783/johnstone88"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1573586379, "post_id": 58825122, "comment_id": 103927257, "body": "i want to save decimal value in <code>dec_ofletter</code> variable and then convert it to char again in <code>z[i]</code>"}, {"owner": {"reputation": 11, "user_id": 12362783, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pfuNfaTEH_o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc5Cbp_xTXaKxeVuOO8NvMtFaCycQ/photo.jpg?sz=128", "display_name": "Johnstone88", "link": "https://stackoverflow.com/users/12362783/johnstone88"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1573586782, "post_id": 58825122, "comment_id": 103927436, "body": "@FredLarson if i delete the pointer, it show like this. I dont get it. <code>main.c:16:21: error: subscripted value is not an array,       pointer, or vector       dec_ofletter=z[i]                    ~^~ main.c:19:4: error: subscripted value is not an array, pointer,       or vector   z[i]=dec_ofletter;   ~^~</code>"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1573587044, "post_id": 58825122, "comment_id": 103927530, "body": "Ah, you removed the <code>* </code> where you should not have. <code>z</code> must be a pointer within the <code>encrypt()</code> function, but <code>z[i]</code> will not be a pointer."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 1, "creation_date": 1573587429, "post_id": 58825122, "comment_id": 103927727, "body": "&lt;OT&gt; but eventually relevant, I doni&#39;t think you want to loop <code>i &lt;= h</code>. That last iteration will be the <code>NUL</code> terminator.. you&#39;re not going to want to shift that character or it will blow up your string."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "reply_to_user": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1573587733, "post_id": 58825122, "comment_id": 103927854, "body": "@yano: Correct, but <code>i</code> must start at <code>0</code> as well or it will not encrypt the first character."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1573587974, "post_id": 58825122, "comment_id": 103927954, "body": "@FredLarson based on his sample input/output, doesn&#39;t look like OP wants to shift the first letter."}, {"owner": {"reputation": 11, "user_id": 12362783, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pfuNfaTEH_o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc5Cbp_xTXaKxeVuOO8NvMtFaCycQ/photo.jpg?sz=128", "display_name": "Johnstone88", "link": "https://stackoverflow.com/users/12362783/johnstone88"}, "reply_to_user": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1573588173, "post_id": 58825122, "comment_id": 103928039, "body": "@yano what is the correct program flow for you? I was confused when exchanging the value"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 1, "creation_date": 1573588434, "post_id": 58825122, "comment_id": 103928140, "body": "@Johnstone88 what is <code>x</code>? It&#39;s unused in <code>encrypt</code>. I think you&#39;re segfaulting now b/c of my first comment. <code>strlen(&quot;Good Morning&quot;)</code> is 12, so your <code>for</code> loop is getting to that 13th character (the <code>NUL</code> terminator at <code>z[12]</code>), subtracting 2 from it, which destroys the terminator. Then you try to print, <code>printf</code> happily goes along looking for the next <code>NUL</code> terminator, and it runs into memory it doesn&#39;t own before that happens, and you bomb out. Try changing that to <code>i&lt;h</code>"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1573588566, "post_id": 58825122, "comment_id": 103928202, "body": "you&#39;re also using the wrong format specifier to print a <code>char</code>. <code>a</code> is a <code>char</code>, use <code>%c</code> to print that, <code>%s</code> expects a string. But I suspect you want <code>printf(&quot;%s&quot;, z);</code> there."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1573588681, "post_id": 58825122, "comment_id": 103928249, "body": "the return type of <code>encrypt</code> is a <code>char</code>, yet you return a <code>char*</code>."}, {"owner": {"reputation": 11, "user_id": 12362783, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pfuNfaTEH_o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc5Cbp_xTXaKxeVuOO8NvMtFaCycQ/photo.jpg?sz=128", "display_name": "Johnstone88", "link": "https://stackoverflow.com/users/12362783/johnstone88"}, "reply_to_user": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1573589039, "post_id": 58825122, "comment_id": 103928393, "body": "@yano i ve changed it to this ` <code>char encrypt(int x,int y, char *z){   int i;   int h=strlen(z);   for(i=0;i&lt;h;i++){      if(i%2==0){       dec_ofletter=z[i];        dec_ofletter = dec_ofletter-y;     }   z[i]=dec_ofletter;   }   return z; }</code>"}, {"owner": {"reputation": 11, "user_id": 12362783, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pfuNfaTEH_o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc5Cbp_xTXaKxeVuOO8NvMtFaCycQ/photo.jpg?sz=128", "display_name": "Johnstone88", "link": "https://stackoverflow.com/users/12362783/johnstone88"}, "edited": false, "score": 0, "creation_date": 1573589142, "post_id": 58825122, "comment_id": 103928453, "body": "@yanoactually x to limit the number of strings entered. But I haven&#39;t considered it because I focused on encryption first."}, {"owner": {"reputation": 11, "user_id": 12362783, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pfuNfaTEH_o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc5Cbp_xTXaKxeVuOO8NvMtFaCycQ/photo.jpg?sz=128", "display_name": "Johnstone88", "link": "https://stackoverflow.com/users/12362783/johnstone88"}, "edited": false, "score": 0, "creation_date": 1573589293, "post_id": 58825122, "comment_id": 103928504, "body": "Yes I want to print string, in my previous program I can print <i>char</i> with <code>%s</code> too. it working"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1573589752, "post_id": 58825122, "comment_id": 103928688, "body": "using the wrong format specifier is undefined behavior, it&#39;s working by chance. It may not work 5 min from now, or if you change the compiler flags, or when the TA compiles and runs your code. <code>%s</code> expected a <i>string</i>, which is a character array terminated with <code>&#39;\\0&#39;</code>, <code>%c</code> expects simply a single character. Pay attention to the warnings of your compiler, <code>encrypt</code> is still returning the wrong type."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1573590274, "post_id": 58825122, "comment_id": 103928909, "body": "Your debugger should stop on the line of the segfault, otherwise, consider adding some debug printing to your loop.  I can see a segfault if the value of <code>i</code> were greater than the size of <code>z</code> or if your printf() of a string while using a char happened to read into bad memory trying to find a NUL terminator."}], "answers": [{"tags": [], "owner": {"reputation": 219, "user_id": 8198361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6261d06afb1d50c3759e956bf36438f?s=128&d=identicon&r=PG", "display_name": "Lily AB", "link": "https://stackoverflow.com/users/8198361/lily-ab"}, "is_accepted": false, "score": 0, "last_activity_date": 1573671860, "creation_date": 1573671860, "answer_id": 58843910, "question_id": 58825122, "link": "https://stackoverflow.com/questions/58825122/how-do-i-encrypt-words-by-reducing-the-decimal-form-of-words-entered-according-t/58843910#58843910", "title": "How do I encrypt words by reducing the decimal form of words entered according to the input in C and print it?", "body": "<p>Have added a <code>flag</code> to ensure purposed entry into the correct conditional.</p>\n\n<p>The logic employed is</p>\n\n<p>1 Start the counter <code>int i</code> at one.</p>\n\n<ul>\n<li>since you are attempting to replace every second non-space character\nfrom the array. </li>\n<li>And to control the flow of the conditionals that follow.</li>\n</ul>\n\n<p>2.Check if the character is space,</p>\n\n<ul>\n<li><code>if</code> yes check if the counter is even or odd.</li>\n<li>If even or odd set the flag accordingly and <code>continue</code>(since spaces are not encrypted).</li>\n</ul>\n\n<p>3.The following <code>ifs</code> update the array based on odd/even positions and the flag which was in the first <code>if</code>.</p>\n\n<p>In addition, </p>\n\n<ul>\n<li>am returning the character pointer (char *) received in the <code>encrypt</code> function\nback to <code>main</code>.</li>\n<li>Have removed the <code>global</code> variable <code>dec_ofletter</code> since it is not\nrequired in operations.</li>\n</ul>\n\n<p>The code should, hopefully, be able to handle leading and multiple spaces in between words.</p>\n\n<p>Putting it together, this is the code......</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n\nint x,y;\nchar a;\n\nchar z[100];\n\nchar w[100];\n\nchar * encrypt(int x,int y, char *z){\n  int i;\n  int flag = 1;//set flag at beginning \n  int h=strlen(z);\n  for(i = 1;i&lt;h;i++){//set counter at 1\n    if(z[i] == ' '){   //If space\n      if(i % 2 == 1){  //counter is odd\n        flag = 1;      //set flag\n        continue;\n      }\n      if(i % 2 == 0){//If even \n        flag = 0;    //clear flag\n        continue;\n      }\n    }\n  if(i%2==1 &amp;&amp; flag == 1)//select odd based on flag\n  z[i] = z[i] - y;//update array\n  if(i%2 == 0 &amp;&amp; flag == 0)//select even based on flag\n    z[i] = z[i] - y;//update array\n\n  }\n return z;\n}   \n\nint main(void) \n{\n  scanf(\"%d %d\",&amp;x,&amp;y);\n  getchar();\n  scanf(\"%99[^\\n]\",z);\n  encrypt(x,y,z);\n  printf(\"%s\",z);\n  return 0;\n} \n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 12362783, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pfuNfaTEH_o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc5Cbp_xTXaKxeVuOO8NvMtFaCycQ/photo.jpg?sz=128", "display_name": "Johnstone88", "link": "https://stackoverflow.com/users/12362783/johnstone88"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1573671860, "creation_date": 1573585612, "last_edit_date": 1573588938, "question_id": 58825122, "link": "https://stackoverflow.com/questions/58825122/how-do-i-encrypt-words-by-reducing-the-decimal-form-of-words-entered-according-t", "title": "How do I encrypt words by reducing the decimal form of words entered according to the input in C and print it?", "body": "<p>So I have a question, I was asked to encrypt a word using ASCII, with the following parameters</p>\n\n<p>Input</p>\n\n<p><code>12 2</code>  //16 is the number of words , 2 is the subtraction number for the decimal form of the word</p>\n\n<p><code>Good Morning</code> // the words, spaces are not encrypted</p>\n\n<p>Output</p>\n\n<p><code>Gmob Mmrlilg</code> // only 2 multiply of characters are encrypted</p>\n\n<p>I have tried to make the decimal subtraction program first and not considering the space. But its error on pointer values</p>\n\n<p>I have tried this </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n#include&lt;math.h&gt;\n\nint x,y,dec_ofletter;\nchar a;\n\nchar z[100];\n\nchar w[100];\n\nchar encrypt(int x,int y, char *z){\n int i;\n int h=strlen(z);\n for(i=0;i&lt;h;i++){\n  if(i%2==0){\n   dec_ofletter=z[i]\n   dec_ofletter = dec_ofletter-y;\n  }\n  z[i]=dec_ofletter;\n }\n return z;\n}\n\nint main(void) \n{\n scanf(\"%d %d\",&amp;x,&amp;y);\n scanf(\"%99[^\\n]\",z);\n a=encrypt(x,y,z);\n printf(\"%s\",a);\n return 0;\n}\n</code></pre>\n\n<p>But it getting error. In console it say</p>\n\n<pre><code>main.c:16:20: error: indirection requires pointer operand\n  ('int' invalid)\n  dec_ofletter=*z[i]\n               ^~~~~\nmain.c:19:3: error: indirection requires pointer operand\n  ('int' invalid)\n*z[i]=dec_ofletter;\n^~~~~\n</code></pre>\n\n<p>thanks for your kind help</p>\n\n<p><strong>update</strong> the pointer problem is solved , but di output is like this</p>\n\n<pre><code>12 2 Good Morning  //input\nexited, segmentation fault //output\n</code></pre>\n\n<p>Is the logic of my program wrong?</p>\n"}]