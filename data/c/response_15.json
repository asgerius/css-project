[{"tags": ["c"], "comments": [{"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 0, "creation_date": 1429746979, "post_id": 29811047, "comment_id": 47750037, "body": "<code>for (i = 0; i &lt; stackP-&gt;maxSize; i++) free(stackP-&gt;contents[i]);</code> This tries to free empty stack slots."}, {"owner": {"reputation": 1648, "user_id": 1365798, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/5e7494eb925ebf7e2e93ea8ef7c3b946?s=128&d=identicon&r=PG", "display_name": "Juan", "link": "https://stackoverflow.com/users/1365798/juan"}, "reply_to_user": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 0, "creation_date": 1429747176, "post_id": 29811047, "comment_id": 47750102, "body": "@ColonelThirtyTwo Why his tries to free empty stack slots?"}, {"owner": {"reputation": 2295, "user_id": 1015722, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/95bc6501f8452eb4b459bf2dc4de5a96?s=128&d=identicon&r=PG", "display_name": "Jeremy Rodi", "link": "https://stackoverflow.com/users/1015722/jeremy-rodi"}, "edited": false, "score": 0, "creation_date": 1429748079, "post_id": 29811047, "comment_id": 47750424, "body": "Try adding the <code>--track-origins=yes</code> flag to valgrind, it should show you where the memory was allocated, if I recall correctly."}], "answers": [{"comments": [{"owner": {"reputation": 1648, "user_id": 1365798, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/5e7494eb925ebf7e2e93ea8ef7c3b946?s=128&d=identicon&r=PG", "display_name": "Juan", "link": "https://stackoverflow.com/users/1365798/juan"}, "edited": false, "score": 1, "creation_date": 1429747351, "post_id": 29811118, "comment_id": 47750166, "body": "when I comment &quot;free(s0);&quot; now I get only one error but error yet. The error is 24 bytes in 1 blocks are definitely lost in loss record 1 of 1"}, {"owner": {"reputation": 1648, "user_id": 1365798, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/5e7494eb925ebf7e2e93ea8ef7c3b946?s=128&d=identicon&r=PG", "display_name": "Juan", "link": "https://stackoverflow.com/users/1365798/juan"}, "edited": false, "score": 0, "creation_date": 1429748553, "post_id": 29811118, "comment_id": 47750571, "body": "oks I choose the second option, then I change stackP-&gt;contents[++stackP-&gt;top] = element; by memcpy(stackP-&gt;contents[++stackP-&gt;top],element,r); but I get  4 bytes in 1 blocks are definitely lost in loss record 1 of 1 ==32064==    at 0x4C2AB80: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so) ==32064==    by 0x400B70: main (in /test)"}, {"owner": {"reputation": 18935, "user_id": 19405, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a72b55a41a43ea0493fc64641a1ed295?s=128&d=identicon&r=PG", "display_name": "nobody", "link": "https://stackoverflow.com/users/19405/nobody"}, "reply_to_user": {"reputation": 1648, "user_id": 1365798, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/5e7494eb925ebf7e2e93ea8ef7c3b946?s=128&d=identicon&r=PG", "display_name": "Juan", "link": "https://stackoverflow.com/users/1365798/juan"}, "edited": false, "score": 1, "creation_date": 1429748891, "post_id": 29811118, "comment_id": 47750690, "body": "Since you&#39;ve changed <code>StackPush</code> to copy the data (and not take ownership of the pointer), you need to free the malloced <code>s0</code> block in <code>main</code> again."}], "tags": [], "owner": {"reputation": 18935, "user_id": 19405, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a72b55a41a43ea0493fc64641a1ed295?s=128&d=identicon&r=PG", "display_name": "nobody", "link": "https://stackoverflow.com/users/19405/nobody"}, "is_accepted": true, "score": 1, "last_activity_date": 1429747961, "last_edit_date": 1429747961, "creation_date": 1429747168, "answer_id": 29811118, "question_id": 29811047, "link": "https://stackoverflow.com/questions/29811047/valgrind-blocks-are-lost/29811118#29811118", "title": "Valgrind blocks are lost", "body": "<p>The first valgrind message is pretty clear: you're freeing the same block of memory twice, first with <code>free(s0)</code> in <code>main</code> and for the second time in <code>StackDestroy</code>. Chang your code so it doesn't do that - either by having the stack take ownership of the objects (so it frees them and <code>main</code> doesn't), or vice-versa (the stack does not take ownership of the objects and does not free them).</p>\n\n<p>The \"blocks lost\" matter is because you allocate blocks of memory for each stack slot in the loop in <code>StackInit</code>, and <code>StackPush</code> overwrites the pointers so you can never release the original memory allocated for used stack slots. There are at least two possible resolutions here as well: don't pre-allocate blocks of memory in <code>StackInit</code> (just copy pointers in <code>StackPush</code>), or copy the element <em>data</em> (instead of the pointer) in <code>StackPush</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 1648, "user_id": 1365798, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/5e7494eb925ebf7e2e93ea8ef7c3b946?s=128&d=identicon&r=PG", "display_name": "Juan", "link": "https://stackoverflow.com/users/1365798/juan"}, "edited": false, "score": 1, "creation_date": 1429747334, "post_id": 29811128, "comment_id": 47750156, "body": "when I comment &quot;free(s0);&quot; now I get only one error but error yet. The error is 24 bytes in 1 blocks are definitely lost in loss record 1 of 1."}], "tags": [], "owner": {"reputation": 535, "user_id": 788379, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/888090a8d42d6c808d7c0a86aabdb888?s=128&d=identicon&r=PG", "display_name": "tommyo", "link": "https://stackoverflow.com/users/788379/tommyo"}, "is_accepted": false, "score": 0, "last_activity_date": 1429747220, "creation_date": 1429747220, "answer_id": 29811128, "question_id": 29811047, "link": "https://stackoverflow.com/questions/29811047/valgrind-blocks-are-lost/29811128#29811128", "title": "Valgrind blocks are lost", "body": "<p>You free s0 in <code>StackDestroy()</code> and in <code>main()</code>.</p>\n"}], "owner": {"reputation": 1648, "user_id": 1365798, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/5e7494eb925ebf7e2e93ea8ef7c3b946?s=128&d=identicon&r=PG", "display_name": "Juan", "link": "https://stackoverflow.com/users/1365798/juan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1214, "favorite_count": 0, "accepted_answer_id": 29811118, "answer_count": 2, "score": 1, "last_activity_date": 1429747985, "creation_date": 1429746798, "last_edit_date": 1429747985, "question_id": 29811047, "link": "https://stackoverflow.com/questions/29811047/valgrind-blocks-are-lost", "title": "Valgrind blocks are lost", "body": "<p>I'm trying to write the data structure stack in C. Each element of my stack is a string. Below are the three files that I used. The first one is a main the other ones are the header stack.h and the file stack.c. I declared stackElement as a pointer to the element. stackT is a struct that define a stack. My problem appears when I trying to free allocate memory, because when I run valgrind I get </p>\n\n<pre><code>==31235== ERROR SUMMARY: 2 errors from 2 contexts (suppressed: 0 from 0)\n==31235== \n==31235== 1 errors in context 1 of 2:\n==31235== Invalid free() / delete / delete[] / realloc()\n==31235==    at 0x4C2BDEC: free (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==31235==    by 0x400893: StackDestroy (in /test)\n==31235==    by 0x400B61: main (in /test)\n==31235==  Address 0x51fc150 is 0 bytes inside a block of size 4 free'd\n==31235==    at 0x4C2BDEC: free (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==31235==    by 0x400B55: main (in /test)\n\n24 bytes in 1 blocks are definitely lost in loss record 1 of 1\n</code></pre>\n\n<p>Could you help me please?</p>\n\n<pre><code>int main(){\nstackT S;\nint r = 3, i;\nStackInit(&amp;S, 2, r);\nprintf(\"test\\n\");\nstackElementT s0;\ns0 = malloc((r + 1) * sizeof(unsigned char));\nmemset(s0, 1, r + 1);\ns0[r] = 0;\nfor (i = 0; i &lt; r; i++) {\n    s0[i] = random() &amp; 0xff;\n}\nStackPush(&amp;S, s0);\nfree(s0);\nStackDestroy(&amp;S);\nreturn 0;\n}\n</code></pre>\n\n<p>stack.h</p>\n\n<pre><code>typedef unsigned char * stackElementT;\ntypedef struct {\n  stackElementT *contents;\n  int maxSize;\n  int top;\n} stackT;\n</code></pre>\n\n<p>stack.c</p>\n\n<pre><code>void StackInit(stackT *stackP, int maxSize, int r) {\nstackElementT *newContents;\nint i;\nr = 3;\nnewContents = malloc(sizeof(stackElementT) * maxSize);\n\nif (newContents == NULL) {\n        fprintf(stderr, \"Insufficient memory to initialize stack.\\n\");\n        exit(1); \n}\n\nfor (i = 0; i &lt; maxSize; i++) {\n    if ((newContents[i] = malloc(r * sizeof(stackElementT))) == NULL) {\n        fprintf(stderr, \"Insufficient memory to initialize stack.\\n\");\n        exit(1); \n    }\n}\n\nstackP-&gt;contents = newContents;\nstackP-&gt;maxSize = maxSize;\nstackP-&gt;top = -1; /* I.e., empty */\n}\n\nvoid StackDestroy(stackT *stackP) {\nint i;\nfor (i = 0; i &lt; stackP-&gt;maxSize; i++)\n    free(stackP-&gt;contents[i]);\nfree(stackP-&gt;contents);\nstackP-&gt;contents = NULL;\nstackP-&gt;maxSize = 0;\nstackP-&gt;top = -1; \n}\nvoid StackPush(stackT *stackP, stackElementT element) {\nif (StackIsFull(stackP)) {\n    fprintf(stderr, \"Can't push element on stack: stack is full.\\n\");\n    exit(1); \n}\nstackP-&gt;contents[++stackP-&gt;top] = element;\n}\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>Using the answers below I comment the line free(s0), but I get the next error now:</p>\n\n<pre><code>==31855== 24 bytes in 1 blocks are definitely lost in loss record 1 of 1\n==31855==    at 0x4C2AB80: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==31855==    by 0x4007F9: StackInit (in /test)\n==31855==    by 0x400AA9: main (in /test)\n</code></pre>\n"}, {"tags": ["c", "pointers", "linked-list", "heap", "dynamic-memory-allocation"], "comments": [{"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 3, "creation_date": 1429746622, "post_id": 29810972, "comment_id": 47749923, "body": "It&#39;s not really a linked list if the nodes are a continuous block.  That&#39;s just an array :)"}, {"owner": {"reputation": 3, "user_id": 4543595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/678f04a49b817ef8588380518457da86?s=128&d=identicon&r=PG&f=1", "display_name": "Chuckles", "link": "https://stackoverflow.com/users/4543595/chuckles"}, "reply_to_user": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1429746696, "post_id": 29810972, "comment_id": 47749943, "body": "<i>(mind=blown)</i> I love the basics."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 4543595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/678f04a49b817ef8588380518457da86?s=128&d=identicon&r=PG&f=1", "display_name": "Chuckles", "link": "https://stackoverflow.com/users/4543595/chuckles"}, "edited": false, "score": 0, "creation_date": 1429749580, "post_id": 29811130, "comment_id": 47750919, "body": "Thanks! Now, in my current implementation, My root node is a normal node that also &quot;doubles&quot; (npi) as a &quot;load-bearing&quot; (value-holding) node. Is it good practice to have that extra node?"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "reply_to_user": {"reputation": 3, "user_id": 4543595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/678f04a49b817ef8588380518457da86?s=128&d=identicon&r=PG&f=1", "display_name": "Chuckles", "link": "https://stackoverflow.com/users/4543595/chuckles"}, "edited": false, "score": 0, "creation_date": 1429749743, "post_id": 29811130, "comment_id": 47750975, "body": "i would not do it - it means that the root node is not on the heap and so must be managed differently, instead have a node pointer called ListHead or the name of the list (Customers, ShoeSizes,....)"}, {"owner": {"reputation": 3, "user_id": 4543595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/678f04a49b817ef8588380518457da86?s=128&d=identicon&r=PG&f=1", "display_name": "Chuckles", "link": "https://stackoverflow.com/users/4543595/chuckles"}, "edited": false, "score": 0, "creation_date": 1429749950, "post_id": 29811130, "comment_id": 47751042, "body": "<i>(mind=2*blown)</i> I can&#39;t believe I didn&#39;t notice that distinction earlier. The root pointer as I currently have it is still on the stack!"}, {"owner": {"reputation": 3, "user_id": 4543595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/678f04a49b817ef8588380518457da86?s=128&d=identicon&r=PG&f=1", "display_name": "Chuckles", "link": "https://stackoverflow.com/users/4543595/chuckles"}, "edited": false, "score": 0, "creation_date": 1429750488, "post_id": 29811130, "comment_id": 47751180, "body": "Actually, now that I look at my particular code, this root pointer is already the single element within a <code>struct List</code>. So, while the pointer is on the heap, now I at least know that the root node is directly attached to the <code>struct List</code>. Still a good distinction to make, nonetheless."}], "tags": [], "owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": true, "score": 2, "last_activity_date": 1429747225, "creation_date": 1429747225, "answer_id": 29811130, "question_id": 29810972, "link": "https://stackoverflow.com/questions/29810972/design-choices-implementing-linked-list-in-c/29811130#29811130", "title": "Design choices implementing linked list in C", "body": "<p>Your second way is the 'classic' linked list. malloc each node in turn. Each node has a pointer to the next node. Last one has a null next pointer. You have a root pointer that points to the first node</p>\n\n<p>There is no scale issue with this; modern heap managers are very efficient. There is however a brain scale issue. You need to write nice clean code so that you dont leak or crash :-)</p>\n\n<p>if you are doing this on linux learn how to use a tool called valgrind. (and of course learn how to use gdb)</p>\n"}], "owner": {"reputation": 3, "user_id": 4543595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/678f04a49b817ef8588380518457da86?s=128&d=identicon&r=PG&f=1", "display_name": "Chuckles", "link": "https://stackoverflow.com/users/4543595/chuckles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 29811130, "answer_count": 1, "score": 0, "last_activity_date": 1429747225, "creation_date": 1429746370, "question_id": 29810972, "link": "https://stackoverflow.com/questions/29810972/design-choices-implementing-linked-list-in-c", "title": "Design choices implementing linked list in C", "body": "<p>I hope this question isn't too open for the format of this site. I am somewhat new to C, and enjoy playing around with it to learn its intricacies. My current \"task\" is building a singly-linked list.</p>\n\n<p>Here's my setup: The first iteration of my linked list program stored all nodes in one contiguous block of memory. This required realloc for my push and pop functions.</p>\n\n<p>However, when I got to using realloc, I decided to try a new design where malloc and free is called during the creation or deletion of a single node, respectively. I've read that on larger scales this can be very hampering to the program.</p>\n\n<p>Which way is better, the first or the second? Or do both ideas lend themselves to certain implementations? Forgive me if this is too broad, I just want to check my understanding and really learn about designing a program.</p>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 6167, "user_id": 468570, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/092fc7e05b5d9850d2f4b93bed8cfd70?s=128&d=identicon&r=PG", "display_name": "Ruslanas Bal\u010di\u016bnas", "link": "https://stackoverflow.com/users/468570/ruslanas-bal%c4%8di%c5%abnas"}, "edited": false, "score": 0, "creation_date": 1429746315, "post_id": 29810860, "comment_id": 47749830, "body": "Try to be more specific in your question."}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 4724669, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/92209cfc554d849970fddcdd211b26d6?s=128&d=identicon&r=PG&f=1", "display_name": "Rinzler", "link": "https://stackoverflow.com/users/4724669/rinzler"}, "edited": false, "score": 0, "creation_date": 1429796716, "post_id": 29811907, "comment_id": 47777046, "body": "Thanks so much! You are great. @BLUEPIXY"}], "tags": [], "owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "is_accepted": true, "score": 0, "last_activity_date": 1429752470, "last_edit_date": 1429752470, "creation_date": 1429751987, "answer_id": 29811907, "question_id": 29810860, "link": "https://stackoverflow.com/questions/29810860/how-to-divide-a-string-to-substring-and-assign-another-substring/29811907#29811907", "title": "How to divide a string to substring and assign another substring?", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main(void){\n    char *eString = \"The quick brown fox jumps over the lazy dog\";\n    int keylen = 5;\n    int len = strlen(eString);\n    int y_len = (len + keylen) / keylen + 1;\n    int i,j;\n    char **y = malloc(keylen * sizeof(*y));\n\n    for(i=0; i &lt; keylen; ++i){\n        y[i] = malloc(y_len * sizeof(**y));\n    }\n    char *p = eString;\n    i = j = 0;\n    while(*p){\n        y[i % keylen][j] = *p++;\n        y[i % keylen][j+1] = 0;\n        if(++i % keylen == 0)\n            ++j;\n    }\n\n    //check print &amp; deallocate\n    for(i = 0; i &lt; keylen; ++i){\n        printf(\"y_{%d} : %s\\n\", i+1, y[i]);\n        free(y[i]);\n    }\n    free(y);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 4724669, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/92209cfc554d849970fddcdd211b26d6?s=128&d=identicon&r=PG&f=1", "display_name": "Rinzler", "link": "https://stackoverflow.com/users/4724669/rinzler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 29811907, "answer_count": 1, "score": 0, "last_activity_date": 1429762694, "creation_date": 1429745729, "last_edit_date": 1429762694, "question_id": 29810860, "link": "https://stackoverflow.com/questions/29810860/how-to-divide-a-string-to-substring-and-assign-another-substring", "title": "How to divide a string to substring and assign another substring?", "body": "<p>I want to divide *eString to substrings. Substrings should be like that:</p>\n\n<pre><code>y_{1} = y_{1}y_{m+1}y_{2m+1}...\ny_{2} = y_{2}y_{m+2}y_{2m+2}...\ny_{m} = y_{m}y_{2m}y_{3m}...\n</code></pre>\n\n<p>where <code>y</code> is the element of *eString, and <code>y</code> is the substring of these elements.</p>\n\n<p>For instance, if an user expects the key length which is 5, there should be (string size / 5) substrings. <code>y_{1}</code> has to contain the fist element of each divided substring. So, how can I implement this?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#define ALPHA 26\n\n\nchar *ReadFile(char *);\n\n\nint main(int argc, char *argv[])\n{\n    double frequency[ALPHA] = {0};\n    int c = 0;\n    int keylen = 0;\n    int counter = 0;\n    double indexofCoincidence = 0,total = 0;\n\n    const char *eString = ReadFile(\"cipher.txt\");\n    int len = 0;\n      if (eString) {\n        puts(\"The encrypted text is:\");\n\n        puts(eString);\n        puts(\"\");\n\n        len = strlen(eString);\n        printf(\"The length of text is %d\\n\",len);\n      }\n   puts(\"\");\n\n      while(eString[c]!= '\\0'){\n\n         if(eString[c]&gt;= 'a' &amp;&amp; eString[c]&lt;='z')\n             frequency[eString[c]-'a']++;\n        c++;\n      }\nputs(\"The letters frequencies are :\\n\");\n      for(c=0; c&lt;ALPHA;c++){\n           if(frequency[c]!= 0)\n                printf(\"%c : %.3f\\t\",c+'a',(frequency[c]/len));\n\n           total += (frequency[c]*(frequency[c]-1));\n\n      }\n\n        indexofCoincidence = (total/((len)*(len-1)));\n\nprintf(\"\\n\\nIndex of Coincidence : %.3f\\n\",indexofCoincidence);\n\n        if(indexofCoincidence &lt; 0.060){\n\n                 printf(\"\\nIt looks like randomly.\\n\");\n\n        }\n    printf(\"Enter the your expected key length : \");\n    scanf(\"%d\",keylen);\n    printf(\"\\n\");\n\n    char *y;\n       while(counter != keylen)\n       {\n           for(int i = 0; i&lt;(len/keylen);i++){\n             y[counter] = *eString();\n           }\n         counter++\n       }\n\n\n  return EXIT_SUCCESS;\n}\n</code></pre>\n"}, {"tags": ["c", "terminate"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 7, "creation_date": 1429745762, "post_id": 29810853, "comment_id": 47749639, "body": "The sheer number of loops you are asking it to do."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1429745837, "post_id": 29810853, "comment_id": 47749678, "body": "I would love an explanation about why <code>long long num</code> is global?"}, {"owner": {"reputation": 175722, "user_id": 328193, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/FnwU5.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/328193/david"}, "edited": false, "score": 1, "creation_date": 1429745902, "post_id": 29810853, "comment_id": 47749692, "body": "Oh, your code is running.  You&#39;re just asking it to do many, many, <i>many</i> calculations before you output anything.  Brute force loops are not how you solve this particular Project Euler problem."}, {"owner": {"reputation": 11, "user_id": 3630559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4442e39d4e02579c9742dab635fb3500?s=128&d=identicon&r=PG&f=1", "display_name": "user3630559", "link": "https://stackoverflow.com/users/3630559/user3630559"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1429745940, "post_id": 29810853, "comment_id": 47749700, "body": "long long num is global because I am a dummy @iharob"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1429745942, "post_id": 29810853, "comment_id": 47749702, "body": "I though it was a Project Euler problem, but wasn&#39;t sure..."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1429745961, "post_id": 29810853, "comment_id": 47749709, "body": "@user3630559 that&#39;s what I thought."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1429745969, "post_id": 29810853, "comment_id": 47749715, "body": "You could easliy find ways to reduce the work. 1) iterate only up the (precalculated) square root. 2) only test odd divisors. 3) ditto for <code>isPrime</code>"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1429746023, "post_id": 29810853, "comment_id": 47749732, "body": "@WeatherVane also, the primes could be pre-generated and stored instead of computing them on each iteration."}, {"owner": {"reputation": 11, "user_id": 3630559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4442e39d4e02579c9742dab635fb3500?s=128&d=identicon&r=PG&f=1", "display_name": "user3630559", "link": "https://stackoverflow.com/users/3630559/user3630559"}, "reply_to_user": {"reputation": 175722, "user_id": 328193, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/FnwU5.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/328193/david"}, "edited": false, "score": 0, "creation_date": 1429746037, "post_id": 29810853, "comment_id": 47749735, "body": "Ok, I&#39;ll look into another solution @David"}, {"owner": {"reputation": 175722, "user_id": 328193, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/FnwU5.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/328193/david"}, "edited": false, "score": 0, "creation_date": 1429746053, "post_id": 29810853, "comment_id": 47749741, "body": "Hint: Once you&#39;ve calculated a prime, there&#39;s no need to ever calculate it again.  You can <i>store</i> the result of the calculation.  Second hint: A lot of numbers are <i>obviously</i> not prime and don&#39;t need to be calculated to determine that fact."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1429746124, "post_id": 29810853, "comment_id": 47749764, "body": "And I aslo suspect that <b>the largest</b> means something, don&#39;t you think so?"}, {"owner": {"reputation": 11, "user_id": 3630559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4442e39d4e02579c9742dab635fb3500?s=128&d=identicon&r=PG&f=1", "display_name": "user3630559", "link": "https://stackoverflow.com/users/3630559/user3630559"}, "reply_to_user": {"reputation": 175722, "user_id": 328193, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/FnwU5.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/328193/david"}, "edited": false, "score": 0, "creation_date": 1429746176, "post_id": 29810853, "comment_id": 47749788, "body": "@David ok, I&#39;ll try that.  I just thought that &quot;good code&quot; didn&#39;t have any hard coded numbers like that, and that it was better and more versatile to have the program do it."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1429746191, "post_id": 29810853, "comment_id": 47749792, "body": "<code>isPrime</code> is faulty - it will show <i>any</i> number to be prime."}, {"owner": {"reputation": 11, "user_id": 3630559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4442e39d4e02579c9742dab635fb3500?s=128&d=identicon&r=PG&f=1", "display_name": "user3630559", "link": "https://stackoverflow.com/users/3630559/user3630559"}, "edited": false, "score": 0, "creation_date": 1429747098, "post_id": 29810853, "comment_id": 47750077, "body": "Sort of off topic question, why is this question getting downvoted?  I&#39;m new to StackOverflow, and just wanna know so I can more effectively use the site later.  Is it because my question was too easy/stupid?  Was I too vague?  Thanks for all of your responses."}], "answers": [{"tags": [], "owner": {"reputation": 110, "user_id": 4424920, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/27b7b36a8baf1745c5c000c8e6478005?s=128&d=identicon&r=PG&f=1", "display_name": "SantLev", "link": "https://stackoverflow.com/users/4424920/santlev"}, "is_accepted": false, "score": 1, "last_activity_date": 1429745883, "creation_date": 1429745883, "answer_id": 29810895, "question_id": 29810853, "link": "https://stackoverflow.com/questions/29810853/my-c-code-doesnt-output-anything-or-end-running/29810895#29810895", "title": "My C code doesn&#39;t output anything, or end running", "body": "<p>It doesn't print anything because it never leaves the loop, after which is found the only line which prints anything in the code. Try a smaller number and see if it ends.</p>\n"}, {"comments": [{"owner": {"reputation": 400, "user_id": 4761313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fb6832d56a54e93d97ec251c3596d96?s=128&d=identicon&r=PG&f=1", "display_name": "James T. Smith", "link": "https://stackoverflow.com/users/4761313/james-t-smith"}, "edited": false, "score": 0, "creation_date": 1429746367, "post_id": 29810965, "comment_id": 47749851, "body": "The first prime factor of your number is 71. Hint: There are 4."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1429746721, "post_id": 29810965, "comment_id": 47749952, "body": "No need to go up to <code>(number &#47; 2)</code>, up to <code>sqrt(number)</code> will suffice."}, {"owner": {"reputation": 400, "user_id": 4761313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fb6832d56a54e93d97ec251c3596d96?s=128&d=identicon&r=PG&f=1", "display_name": "James T. Smith", "link": "https://stackoverflow.com/users/4761313/james-t-smith"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1429747087, "post_id": 29810965, "comment_id": 47750073, "body": "I was a bit vague, sorry. I wasn&#39;t talking about finding primes. I was talking about finding the prime factors of a number. To find the prime factors of 13714, we have to check up to (13714 / 2) to find the prime factor 6857."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1429773559, "post_id": 29810965, "comment_id": 47759826, "body": "You would have found that with the very first <code>2</code>. If you want to check for factors check <code>2</code> then iterate the odd numbers up the the square root. Beyond that you will already have checked the other factor."}], "tags": [], "owner": {"reputation": 400, "user_id": 4761313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fb6832d56a54e93d97ec251c3596d96?s=128&d=identicon&r=PG&f=1", "display_name": "James T. Smith", "link": "https://stackoverflow.com/users/4761313/james-t-smith"}, "is_accepted": true, "score": 3, "last_activity_date": 1429746565, "last_edit_date": 1429746565, "creation_date": 1429746312, "answer_id": 29810965, "question_id": 29810853, "link": "https://stackoverflow.com/questions/29810853/my-c-code-doesnt-output-anything-or-end-running/29810965#29810965", "title": "My C code doesn&#39;t output anything, or end running", "body": "<p>That's a terribly inefficient way of finding the prime factors of a number.</p>\n\n<p>To find the prime factors, you should:</p>\n\n<blockquote>\n  <ol>\n  <li>Create a static list of primes less than or equal to (number / 2).</li>\n  <li>Iterate over each element in the list of primes and see if each\n   one can evenly divide the number.</li>\n  <li>Divide the original number by the prime, and check the last number \n  again.</li>\n  </ol>\n</blockquote>\n\n<p>Why? Well the smallest prime is 2. If the number isn't even then the first prime that can divide any number > 2 is 3.</p>\n\n<p>Every number can be uniquely identified by its prime factors. This is called the <a href=\"https://en.wikipedia.org/wiki/Fundamental_theorem_of_arithmetic\" rel=\"nofollow\">Fundamental Theorem of Arithmetic</a>. That means that there is only one way to represent e.g. 15 as a product of primes, in this case { 3, 5 }.</p>\n\n<p>However any prime can divide a number more than once. For example, 49 is the product of two primes { 7, 7 }. Dividing the original number by one of its factors makes subsequent divisions quicker. And you can logically stop checking when the number == 1.</p>\n"}], "owner": {"reputation": 11, "user_id": 3630559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4442e39d4e02579c9742dab635fb3500?s=128&d=identicon&r=PG&f=1", "display_name": "user3630559", "link": "https://stackoverflow.com/users/3630559/user3630559"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 29810965, "answer_count": 2, "score": -5, "last_activity_date": 1429746565, "creation_date": 1429745686, "question_id": 29810853, "link": "https://stackoverflow.com/questions/29810853/my-c-code-doesnt-output-anything-or-end-running", "title": "My C code doesn&#39;t output anything, or end running", "body": "<p>I'm trying to answer this question:</p>\n\n<p>The prime factors of 13195 are 5, 7, 13 and 29.</p>\n\n<p>What is the largest prime factor of the number 600851475143 ?</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint isPrime(long long num)\n{\n    for (long long k = 1; k &lt; num; k++)\n    {\n            if (num%k == 0)\n                    return 0;\n    }\n\n    return 1;\n} \nlong long num = 600851475143;\nint main(void)\n{\n    long long prime_factor = 0;\n    for (long long j = 2; j &lt; num; j++)\n    {\n            if (num % j == 0 &amp;&amp; isPrime(j) == 1)\n                    prime_factor = j;\n    }\n\n    printf(\"%lli\\n\", prime_factor);\n\n\n}\n</code></pre>\n\n<p>But for some reason it doesn't print anything, or even end.  What is causing this?</p>\n"}, {"tags": ["c", "file-io"], "answers": [{"tags": [], "owner": {"reputation": 6099, "user_id": 1638010, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/02688b7723adbdc1a47705b2bf6b617c?s=128&d=identicon&r=PG", "display_name": "Craig S. Anderson", "link": "https://stackoverflow.com/users/1638010/craig-s-anderson"}, "is_accepted": false, "score": 0, "last_activity_date": 1429749995, "creation_date": 1429749995, "answer_id": 29811581, "question_id": 29810785, "link": "https://stackoverflow.com/questions/29810785/searching-for-a-combination-of-characters-in-a-file/29811581#29811581", "title": "Searching for a combination of characters in a file", "body": "<p>When you reach the end of the buffer, record the state of the current partial match, if any.  Then when you get the next buffer, you have 4 general cases:</p>\n\n<ul>\n<li>Not inside any text to be matched.</li>\n<li>Saw just a beginning <code>/</code> at the end of the last buffer</li>\n<li>Currently inside <code>/start/</code>.  Another variable records how far you have matched.</li>\n<li>Currently inside <code>/end/</code>.  Same variable as for <code>/start</code>/ records how far you have matched.</li>\n</ul>\n\n<p>Your states inside the matcher are generally:</p>\n\n<ol>\n<li>Currently not matching anything</li>\n<li>Just saw a <code>/</code> - next looking for an 's' or an 'e'.</li>\n<li>Matching either <code>start/</code> or <code>end/</code>.</li>\n<li>Matched - either <code>/start</code> or <code>/end</code>.</li>\n</ol>\n\n<p>Based on the partial match, just jump to the right state in the matcher.</p>\n\n<p>OR</p>\n\n<p>You can use the <a href=\"http://www.pcre.org/current/doc/html/pcre2api.html\" rel=\"nofollow\">PCRE library</a>.  It supports partial matching.  But probably is overkill for your purposes.</p>\n"}], "owner": {"reputation": 408, "user_id": 4484809, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/df2175d6f457176d542ac82929a80e74?s=128&d=identicon&r=PG&f=1", "display_name": "pirox22", "link": "https://stackoverflow.com/users/4484809/pirox22"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1429749995, "creation_date": 1429745312, "question_id": 29810785, "link": "https://stackoverflow.com/questions/29810785/searching-for-a-combination-of-characters-in-a-file", "title": "Searching for a combination of characters in a file", "body": "<p>I am trying to create a program that reads a file and searches for a specific combination of characters. \nFor example: \"/start/ 4jy42jygsfsf /end/\". </p>\n\n<p>So I want to find all the \"strings\" starting with /start/ and ending with /end/.</p>\n\n<p>In order to do that, I use read() function because the file might be a binary file (it doesn't have to be a file with chars).</p>\n\n<p>I call the read() function like that:</p>\n\n<pre><code>#define BUFFSIZE 4000\n\n// more declarations\n\nwhile (read(file_descriptor, buffer, BUFFSIZE) &gt; 0)\n{\n    //search for /start/\n    //then search for /end/\n    //build a string with all the chars between these two\n    //keep searching till you reach the end of buffer\n}\n</code></pre>\n\n<p>Assume that every /start/ is followed by an /end/.</p>\n\n<p>The question is:</p>\n\n<p>How do I deal with cases that this combination of characters is cut in half?</p>\n\n<p>For example, let's say that the first time read() gets called, in the end of this buffer I spot <strong>/star</strong> and the next time read() gets called at the start of the second buffer there is <strong>t/ 4jy42jygsfsf /end/</strong>. </p>\n\n<p>This combination might get cut anywhere. The solutions I thought will result to many many lines of code. Is there any smart way to deal with all these cases?</p>\n"}, {"tags": ["c", "conditional-statements", "bitwise-operators", "logical-operators"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1429745550, "post_id": 29810766, "comment_id": 47749560, "body": "You have a logic error in your proof :-) You have shown that there is no difference in one set of cases and incorrectly extrapolated that to be true for all cases."}], "answers": [{"comments": [{"owner": {"reputation": 3709, "user_id": 4501084, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/JQ1ra.jpg?s=128&g=1", "display_name": "pgmank", "link": "https://stackoverflow.com/users/4501084/pgmank"}, "edited": false, "score": 0, "creation_date": 1429745696, "post_id": 29810803, "comment_id": 47749610, "body": "You mean that, the output of 123&gt;45 is a one bit string which is 0x1 ?"}, {"owner": {"reputation": 6532, "user_id": 919578, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/VaAKB.jpg?s=128&g=1", "display_name": "Benjy Kessler", "link": "https://stackoverflow.com/users/919578/benjy-kessler"}, "reply_to_user": {"reputation": 3709, "user_id": 4501084, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/JQ1ra.jpg?s=128&g=1", "display_name": "pgmank", "link": "https://stackoverflow.com/users/4501084/pgmank"}, "edited": false, "score": 0, "creation_date": 1429745761, "post_id": 29810803, "comment_id": 47749638, "body": "No it is implementation dependent. but when you print you are casting to the string true or false. If you just printed the values as integers instead of casting to bools you will see the difference."}], "tags": [], "owner": {"reputation": 6532, "user_id": 919578, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/VaAKB.jpg?s=128&g=1", "display_name": "Benjy Kessler", "link": "https://stackoverflow.com/users/919578/benjy-kessler"}, "is_accepted": false, "score": 1, "last_activity_date": 1429745843, "last_edit_date": 1429745843, "creation_date": 1429745384, "answer_id": 29810803, "question_id": 29810766, "link": "https://stackoverflow.com/questions/29810766/what-is-the-difference-between-bitwise-and-logical-operators-inside-conditional/29810803#29810803", "title": "What is the difference between bitwise and logical operators inside conditional statements in C?", "body": "<pre><code>1101 &amp; 0010 = 0000, 1101 &amp;&amp; 0010 = True\n1101 | 0010 = 1111, 1101 || 0010 = True\n</code></pre>\n\n<p>The reason is bitwise compares each bit separately whereas logical treats the whole bit string as one bit true or false. When looking at a bit string of one bit there is indeed no difference between logical and bitwise operators. Another way of thinking of it is bitwise operators are functions from integers to integers where logical operators are functions from booleans to booleans.</p>\n\n<p>By calling <code>table[0][i] ? \"true\" : \"false\"</code> you are casting the integer into a bit. If you keep it as an integer you will see the difference between the two types of operators.</p>\n"}, {"comments": [{"owner": {"reputation": 200780, "user_id": 116908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54d38793d7a407446999b33b81d607fd?s=128&d=identicon&r=PG", "display_name": "Carl Norum", "link": "https://stackoverflow.com/users/116908/carl-norum"}, "edited": false, "score": 1, "creation_date": 1429745674, "post_id": 29810811, "comment_id": 47749606, "body": "Also short circuiting."}, {"owner": {"reputation": 3709, "user_id": 4501084, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/JQ1ra.jpg?s=128&g=1", "display_name": "pgmank", "link": "https://stackoverflow.com/users/4501084/pgmank"}, "edited": false, "score": 0, "creation_date": 1429746152, "post_id": 29810811, "comment_id": 47749774, "body": "I am aware of this difference but the one that my question is not explicitly referring to is in the case when we have a bitwise or logical operator between two or more results of a comparison operation inside a conditional statement."}, {"owner": {"reputation": 3709, "user_id": 4501084, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/JQ1ra.jpg?s=128&g=1", "display_name": "pgmank", "link": "https://stackoverflow.com/users/4501084/pgmank"}, "edited": false, "score": 0, "creation_date": 1429747995, "post_id": 29810811, "comment_id": 47750397, "body": "I have also seen all this information you posted scattered in many different websites but all of them referred to either C++ or C#. Now I also know that the same thing goes for C and everything is gathered in one place."}], "tags": [], "owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "is_accepted": true, "score": 7, "last_activity_date": 1429746837, "last_edit_date": 1429746837, "creation_date": 1429745460, "answer_id": 29810811, "question_id": 29810766, "link": "https://stackoverflow.com/questions/29810766/what-is-the-difference-between-bitwise-and-logical-operators-inside-conditional/29810811#29810811", "title": "What is the difference between bitwise and logical operators inside conditional statements in C?", "body": "<p>You're only checking the values <code>0</code> and <code>1</code>. Try <strong>other values</strong> and you'll see differences.</p>\n\n<pre><code>int a = 4, b = 2;\n\nputs(a &amp;&amp; b ? \"true\" : \"false\");\nputs(a &amp; b  ? \"true\" : \"false\");\n</code></pre>\n\n<p>This prints:</p>\n\n<pre><code>true\nfalse\n</code></pre>\n\n<p>Bitwise operators <strong>only work with integers</strong>. Logical operators can be used with pointers, floating point numbers, and other non-integral types.</p>\n\n<p>There's also <strong>short-circuiting</strong>. The logical operators won't evaluate their second operand if the first was enough.</p>\n\n<pre><code>int a() { puts(\"a\"); return 0; }\nint b() { puts(\"b\"); return 1; }\n\nint main() {\n    puts(a() &amp;&amp; b() ? \"true\" : \"false\");\n    puts(\"---\");\n    puts(a() &amp; b()  ? \"true\" : \"false\");\n}\n</code></pre>\n\n<p>This prints:</p>\n\n<pre><code>a\nfalse\n---\na\nb\nfalse\n</code></pre>\n\n<p>Notice how <code>b</code> is printed when using <code>&amp;</code>. There is no short-circuiting so <code>&amp;</code> calls both functions, whereas <code>&amp;&amp;</code> only calls <code>a()</code>.</p>\n\n<p>And on a subtler note, unlike <code>&amp;&amp;</code>, <code>&amp;</code> does not impose an <strong>order of evaluation</strong> on its operands. The output could equally well have the <code>a</code> and <code>b</code> printouts reversed.</p>\n\n<pre><code>a\nfalse\n---\nb\na\nfalse\n</code></pre>\n\n<p>If you put <em>all of these differences aside</em>, then yes, the operators are equivalent. In that case, <strong>do not worry about efficiency</strong>. Use whichever operators are semantically correct: the logical ones.</p>\n\n<p>(If it helps ease your mind, there will be no difference in efficiency. Compilers are very smart and will certainly emit the optimal bytecode to evaluate these expressions, whichever operator you use.)</p>\n"}, {"tags": [], "owner": {"reputation": 12251, "user_id": 1199684, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/d997a71f1df34149c9166926baad0d37?s=128&d=identicon&r=PG", "display_name": "bytecode77", "link": "https://stackoverflow.com/users/1199684/bytecode77"}, "is_accepted": false, "score": 1, "last_activity_date": 1429745933, "last_edit_date": 1429745933, "creation_date": 1429745606, "answer_id": 29810835, "question_id": 29810766, "link": "https://stackoverflow.com/questions/29810766/what-is-the-difference-between-bitwise-and-logical-operators-inside-conditional/29810835#29810835", "title": "What is the difference between bitwise and logical operators inside conditional statements in C?", "body": "<p><code>&amp;&amp;</code> is a boolean operator, while <code>&amp;</code> is a bitwise operator.</p>\n\n<p><code>&amp;</code> is an <strong>and</strong> operation on two integers. Example: <code>1100 &amp; 1001 = 1101</code>, so <code>12 &amp; 9 = 13</code>.</p>\n\n<p><code>&amp;&amp;</code> only checks if both (left and right) values are TRUE (i.e. non-zero).</p>\n\n<p><code>1 &amp; 2</code> for example is <code>0</code>, because a binary and of 1 and 2 is 0. Example: <code>01 &amp; 10 = 00</code></p>\n\n<p>While <code>1 &amp;&amp; 2</code> is like <code>TRUE &amp;&amp; TRUE</code>, which also equals true. So with <code>&amp;&amp;</code>, both left and right values are \"converted\" to a boolean expression first and are then compared.</p>\n\n<p>Also, don't forget that compilers are capable of short circuiting <code>&amp;&amp;</code> expressions. Like this one:</p>\n\n<pre><code>bool variable = isValid &amp;&amp; compareSomething()\n</code></pre>\n\n<p>The right value is not evaluated, because it doesn't need to. The first one already states clearly that <code>variable</code> is <code>isValid</code>, as long as <code>isValid</code> is true.</p>\n\n<p><a href=\"http://web.student.tuwien.ac.at/~e0226430/tutorial/operators.xhtml\" rel=\"nofollow\">Read more</a></p>\n"}], "owner": {"reputation": 3709, "user_id": 4501084, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/JQ1ra.jpg?s=128&g=1", "display_name": "pgmank", "link": "https://stackoverflow.com/users/4501084/pgmank"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1743, "favorite_count": 0, "accepted_answer_id": 29810811, "answer_count": 3, "score": 0, "last_activity_date": 1429748450, "creation_date": 1429745226, "last_edit_date": 1429748450, "question_id": 29810766, "link": "https://stackoverflow.com/questions/29810766/what-is-the-difference-between-bitwise-and-logical-operators-inside-conditional", "title": "What is the difference between bitwise and logical operators inside conditional statements in C?", "body": "<p>There are many questions on the net that refer to the differences between bitwise and logical operators. Hoping that I have done a good search, none of them specialize to whether they are the same or not when used inside conditional statements nor refer exclusively to C Language. The majority referred to C++ and C# and I do not know if the same answers were applicable to C Language too.</p>\n\n<p>This is an example code I wrote to test what is going on:</p>\n\n<pre><code>// Difference between logical &amp;&amp; and bitwise &amp; //\n\n#include &lt;stdio.h&gt;\n\n#define TRUE 123&gt;45\n#define FALSE 4&gt;2342\n\nvoid print_tt(int table[][4]);\n\nint main(void) {\n\n    int and_tt[2][4];   // AND truth table\n    int or_tt[2][4];    // OR truth table\n\n    // Create truth table for logical and bitwise AND operator all in one 2d array\n    and_tt[0][0] = TRUE &amp;&amp; TRUE ? 1 : 0;\n    and_tt[0][1] = TRUE &amp;&amp; FALSE ? 1 : 0;\n    and_tt[0][2] = FALSE &amp;&amp; TRUE ? 1 : 0;\n    and_tt[0][3] = FALSE &amp;&amp; FALSE ? 1 : 0;\n    and_tt[1][0] = TRUE &amp; TRUE ? 1 : 0;\n    and_tt[1][1] = TRUE &amp; FALSE ? 1 : 0;\n    and_tt[1][2] = FALSE &amp; TRUE ? 1 : 0;\n    and_tt[1][3] = FALSE &amp; FALSE ? 1 : 0;\n\n    // Create truth table for logical and bitwise OR operator all in one 2d array\n    or_tt[0][0] = TRUE || TRUE ? 1 : 0;\n    or_tt[0][1] = TRUE || FALSE ? 1 : 0;\n    or_tt[0][2] = FALSE || TRUE ? 1 : 0;\n    or_tt[0][3] = FALSE || FALSE ? 1 : 0;\n    or_tt[1][0] = TRUE | TRUE ? 1 : 0;\n    or_tt[1][1] = TRUE | FALSE ? 1 : 0;\n    or_tt[1][2] = FALSE | TRUE ? 1 : 0;\n    or_tt[1][3] = FALSE | FALSE ? 1 : 0;\n\n    puts(\"_______AND_______\");\n    puts(\"Logical   Bitwise\");\n    print_tt(and_tt);\n\n    puts(\"_______OR________\");\n    puts(\"Logical   Bitwise\");\n    print_tt(or_tt);\n\n}\n\n\n// prints the truth table of the bitwise and logical operator given side by side\nvoid print_tt(int table[][4]) {\n    int i;\n    for(i=0; i&lt;4 ; ++i) {\n        printf(\"%-10s%s\\n\", table[0][i] ? \"true\" : \"false\",\n            table[1][i] ? \"true\" : \"false\");\n    }\n}\n</code></pre>\n\n<p>The program\u2019s output is:</p>\n\n<pre><code>_______AND_______\nLogical   Bitwise\ntrue      true\nfalse     false\nfalse     false\nfalse     false\n_______OR________\nLogical   Bitwise\ntrue      true\ntrue      true\ntrue      true\nfalse     false\n</code></pre>\n\n<p>Which proves that there are no differences between bitwise and logical operators. Changing the definition of <code>TRUE</code> and <code>FALSE</code> macros to include the remaining comparison operators, one can see that there is no difference again.</p>\n\n<p>Therefore, if there are differences, these might be associated to the way the compiler interprets the statement or the efficiency of the code.</p>\n\n<p>In conclusion, in the specific case when we have a bitwise or logical operator between two or more results of a comparison operation inside a conditional statement, which of the two should we use, mostly for greater efficiency ?</p>\n"}, {"tags": ["c", "windows", "call", "nasm", "extern"], "comments": [{"owner": {"reputation": 14111, "user_id": 1126943, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yeuHw.png?s=128&g=1", "display_name": "zch", "link": "https://stackoverflow.com/users/1126943/zch"}, "edited": false, "score": 0, "creation_date": 1429748721, "post_id": 29810704, "comment_id": 47750637, "body": "If I read <a href=\"http://en.wikipedia.org/wiki/X86_calling_conventions#List_of_x86_calling_conventions\" rel=\"nofollow noreferrer\">this table</a> correctly than second half of your answer should be in EDX - &quot;POD return values 33-64 bits in size are returned via the EAX:EDX registers.&quot;"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1429749303, "post_id": 29810704, "comment_id": 47750829, "body": "1) do not typedef struct definitions.  2) since that struct is declared in a different file the definition should be in a header file, that both source files #include.  3) referencing an external function is not done via extern. rather in a common header file, that is included in both the source file where the function is declared and in the local file via #include.  the header file would have the prototype, the linker handles the rest. 4) the search order for #include files depends on weither &#39;&lt; ...&gt;&#39; or &#39;&quot;...&quot;&#39; is used.  system headers should always use the &#39;&lt;&#39; and &#39;&gt;&#39;"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1429749892, "post_id": 29810704, "comment_id": 47751024, "body": "this line: &#39; return m_T;&#39; will not work correctly, because when the function exits, anything on the stack is &#39;lost&#39;  so returning an item that is on the stack is undefined behaviour.   However, since the actual full struct is being returned, rather than a pointer, the compiler will invoke memcpy() to copy the struct to a &#39;hidden&#39; memory area (that cannot be used for anything else) then invoke memcpy() again to copy from the hidden memory area to the callers&#39; variable.   Much better to pass a third parameter that is a pointer to the callers&#39; instance of the struct, and use that pointer"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1429750823, "post_id": 29810704, "comment_id": 47751277, "body": "please use meaningful variable/parameter names.  &#39;s&#39; and &#39;l&#39;  and &#39;t&#39; have little or no indication of the content nor their usage"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1429751798, "post_id": 29810704, "comment_id": 47751590, "body": "assuming the posted assembly code is a faithful reproduction, then the compiler only handled the first field of the struct, I.E. it failed to copy/return the second field"}, {"owner": {"reputation": 14111, "user_id": 1126943, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yeuHw.png?s=128&g=1", "display_name": "zch", "link": "https://stackoverflow.com/users/1126943/zch"}, "edited": false, "score": 0, "creation_date": 1429783271, "post_id": 29810704, "comment_id": 47766541, "body": "If you want to know how something is done on your system and don&#39;t know where to check it you can also write simple C program and check generated assembly."}], "answers": [{"comments": [{"owner": {"reputation": 18818, "user_id": 210709, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/51074bf9fb1da9546246986784cfbdd9?s=128&d=identicon&r=PG", "display_name": "IAbstract", "link": "https://stackoverflow.com/users/210709/iabstract"}, "edited": false, "score": 0, "creation_date": 1429761185, "post_id": 29811664, "comment_id": 47754351, "body": "BTW, I still have to have something extern in order to invoke from assembly. The sample code I have in my question is based on very sketchy details at best and how to create an externally accessible function."}, {"owner": {"reputation": 18818, "user_id": 210709, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/51074bf9fb1da9546246986784cfbdd9?s=128&d=identicon&r=PG", "display_name": "IAbstract", "link": "https://stackoverflow.com/users/210709/iabstract"}, "edited": false, "score": 0, "creation_date": 1429802987, "post_id": 29811664, "comment_id": 47782290, "body": "To be honest, I really don&#39;t see how this offers any solution to the question."}], "tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": -2, "last_activity_date": 1429750457, "creation_date": 1429750457, "answer_id": 29811664, "question_id": 29810704, "link": "https://stackoverflow.com/questions/29810704/how-to-call-c-extern-function-and-get-return-struct/29811664#29811664", "title": "How to call C extern function and get return struct?", "body": "<pre><code>As I stated in a comment.\nit would be far better to pass a pointer to \nan instance of struct token\nrather than the current code.\nThe following follows the current code.\nbut remember all those hidden calls to memcpy()\nand the hidden ram allocation\n</code></pre>\n\n<p>otherfile.h contains</p>\n\n<pre><code>#ifndef OTHER_FILE_H\n#define OTHER_FILE_H\n\nstruct token \n{\n    int start;\n    int length;\n};\n\nstruct token get_token( int, int );\n\n#endif // OTHER_FILE_H\n</code></pre>\n\n<p>in file otherfile.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"otherfile.h\"\n\nstruct token get_token( int tokenStart, int tokenLength ) \n{\n    printf(\"[C] new token: start [%d]  length [%d]\\n\\n\", s, l);\n\n    struct token m_T = {0,0};\n    m_T.start = tokenStart;\n    m_T.length = tokenLength;\n\n    return m_T;\n}\n</code></pre>\n\n<p>in file token.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"otherfile.h\"\n...\n    struct token myToken = {0,0};\n    myToken = get_token( tokenStart, tokenLength );\n...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1746, "user_id": 2636457, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29162c5b215ddb5b900c713c5eb2be9c?s=128&d=identicon&r=PG", "display_name": "Levi", "link": "https://stackoverflow.com/users/2636457/levi"}, "is_accepted": false, "score": 0, "last_activity_date": 1429795647, "last_edit_date": 1429795647, "creation_date": 1429780320, "answer_id": 29818828, "question_id": 29810704, "link": "https://stackoverflow.com/questions/29810704/how-to-call-c-extern-function-and-get-return-struct/29818828#29818828", "title": "How to call C extern function and get return struct?", "body": "<p>I believe the problem lies in your <code>.bss</code> section:</p>\n\n<pre><code>SECTION .bss        ; uninitialized data\n    tkn:        resd        1\n</code></pre>\n\n<p>Here, you set aside a single <code>dword</code> (one integer's worth of memory) of memory for the token. However, in your C code, you define the token struct as having 2 <code>int</code>s (<code>start</code> and <code>length</code>), or 2 <code>dword</code>s worth of memory. This means that you are only able to write to part of the token struct (<code>start</code>), and the member <code>length</code> is treated as non-existent. Your problem can probably be solved by simply defining <code>tkn</code> as</p>\n\n<pre><code>    tkn:        resd        2\n</code></pre>\n\n<p>or</p>\n\n<pre><code>    tkn:        resq        1     ;; 1 QWORD == 2 DWORDs\n</code></pre>\n\n<p>Hope this helps ;)</p>\n"}, {"tags": [], "owner": {"reputation": 18818, "user_id": 210709, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/51074bf9fb1da9546246986784cfbdd9?s=128&d=identicon&r=PG", "display_name": "IAbstract", "link": "https://stackoverflow.com/users/210709/iabstract"}, "is_accepted": true, "score": 0, "last_activity_date": 1429800466, "creation_date": 1429800466, "answer_id": 29826986, "question_id": 29810704, "link": "https://stackoverflow.com/questions/29810704/how-to-call-c-extern-function-and-get-return-struct/29826986#29826986", "title": "How to call C extern function and get return struct?", "body": "<p>I decided instead of a single token at a time, that I should allocate a buffer and fill it: determine how many tokens are required, <code>malloc</code> the buffer, call <code>get_tokens</code> and pass in the pointer to the buffer and number of tokens.  </p>\n\n<p>The <code>get_tokens</code> method fills the buffer and returns a count of tokens created.</p>\n\n<p>The assembly then iterates the token buffer and displays the values - <code>start</code> and <code>length</code> - for each token.  </p>\n\n<p><strong>token.c</strong>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ntypedef struct token {\n    int start;\n    int length;\n} t;\n\nextern int get_tokens(t*, int);\nextern int token_size();\n\n/*\n    p_t: pointer to allocated buffer\n    num: number of tokens with which to fill buffer\n*/\nint get_tokens(t* p_t, int num) {\n    printf(\"[C] create %d tokens: %d bytes\\n\", num, token_size() * num);\n    int idx = 0;\n\n    while (idx &lt; num) {\n        //  values are arbitrary for testing purposes\n        t tkn = {idx, idx * 10};\n        p_t[idx] = tkn;\n        printf(\"[C] [%d] start: %d; len: %d\\n\", idx, tkn.start, tkn.length);\n\n        ++idx;\n    }\n\n    return idx;\n}\n\nint token_size() {\n    return sizeof(t);\n}\n</code></pre>\n\n<p><strong>make_tokens.asm</strong>:  </p>\n\n<pre><code>SECTION .data       ; initialized data\n    endl:       db  10, 0\n    mszt:       db  \"token size: %d bytes\", 10, 0\n    tk_info:    db  \"[%d]: s[%d] l[%d]\", 10, 0\n    mlen        db  \"length: %d\", 10, 0\n    mstt:       db  \"start: %d\", 10, 0\n\n    mend:       db  10, \"*** END ***\", 10, 0\n\n    mt1         db  \"malloc space for 3 tokens: %d bytes\", 10, 0\n    mty         db  10, \"success\", 10, 0\n    mtn         db  10, \"fail\", 10, 0\n\nSECTION .text       ; code\n    extern _get_tokens\n    extern _token_size\n\n    extern _free\n    extern _malloc\n    extern _printf\n\n    global _main\n\n    _main:\n        ;   stash base stack pointer\n        push    ebp\n        mov     ebp,        esp\n\n        ;   get token size\n        call    _token_size\n        mov     [tsz],      eax\n\n        push    DWORD [tsz]\n        push    DWORD mszt\n        call    _printf\n        add     esp,        8\n\n        mov     eax,        [tsz]\n        mov     edx,        3               \n        mul     edx\n        mov     [tbsz],     eax\n\n        push    DWORD [tbsz]\n        push    DWORD mt1\n        call    _printf\n        add     esp,        8\n\n        push    DWORD [tbsz]               ; malloc 3 tokens\n        call    _malloc\n        mov     [tkn_buf],  eax\n        add     esp,        4\n\n        mov     ecx,        3               ; 3 tokens\n        push    DWORD ecx\n        push    DWORD [tkn_buf]\n        call    _get_tokens\n        add     esp,        8\n        cmp     eax,        3\n        je      .yes\n\n        .no:\n        push    DWORD mtn\n        call    _printf\n        add     esp,        4\n        jmp     .end\n\n        .yes:\n        push    DWORD mty\n        call    _printf\n        add     esp,        4\n\n        mov     ecx,        0\n        mov     ebx,        [tkn_buf]\n        .loopTokens:\n            mov     eax,    [tsz]       ; determine next token\n            mul     ecx                 ; start location =&gt; eax\n\n            mov     edi,    ecx         ; preserve counter\n\n            push    DWORD [ebx + eax + 4]   ; length\n            push    DWORD [ebx + eax]       ; start\n            push    DWORD ecx\n            push    DWORD tk_info\n            call    _printf\n            add     esp,    16\n\n            mov     ecx,    edi\n            inc     ecx\n            cmp     ecx,    3\n            jl      .loopTokens\n\n        .end:\n        push    DWORD [tkn_buf]\n        call    _free\n\n        push    DWORD mend\n        call    _printf\n        ;   restore base stack pointer\n        mov     esp,        ebp\n        pop     ebp\n\nSECTION .bss        ; uninitialized data\n    tkn_buf:    resd        1\n    tbsz:       resd        1\n    tsz:        resd        1\n</code></pre>\n\n<p>...and the resulting output:  </p>\n\n<blockquote>\n  <p>token size: 8 bytes<br>\n  malloc space for 3 tokens: 24 bytes<br>\n  [C] create 3 tokens: 24 bytes<br>\n  [C] [0] start: 0; len: 0<br>\n  [C] [1] start: 1; len: 10<br>\n  [C] [2] start: 2; len: 20</p>\n  \n  <p>success<br>\n  [0]: s[0] l[0]<br>\n  [1]: s[1] l[10]<br>\n  [2]: s[2] l[20]</p>\n</blockquote>\n"}], "owner": {"reputation": 18818, "user_id": 210709, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/51074bf9fb1da9546246986784cfbdd9?s=128&d=identicon&r=PG", "display_name": "IAbstract", "link": "https://stackoverflow.com/users/210709/iabstract"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 236, "favorite_count": 0, "accepted_answer_id": 29826986, "answer_count": 3, "score": 5, "last_activity_date": 1429800466, "creation_date": 1429744859, "question_id": 29810704, "link": "https://stackoverflow.com/questions/29810704/how-to-call-c-extern-function-and-get-return-struct", "title": "How to call C extern function and get return struct?", "body": "<p>I have an extern function and a <code>struct</code> defined in <code>token.c</code>:</p>\n\n<pre><code>#include \"stdio.h\"\n\ntypedef struct token {\n    int start;\n    int length;\n} t;\n\nextern t get_token(int, int);\n\nt get_token(int s, int l) {\n    printf(\"[C] new token: start [%d]  length [%d]\\n\\n\", s, l);\n\n    t m_T = {};\n    m_T.start = s;\n    m_T.length = l;\n\n    return m_T;\n}\n</code></pre>\n\n<p>... so that I can call <code>_get_token</code> from my assembly and get a new token. In make_token.asm I have the following:</p>\n\n<pre><code>SECTION .data       ; initialized data\n    mtkn:       db  \"call: token(%d, %d)\", 10, 0\n    mlen        db  \"length: %d\", 10, 0\n    mstt:       db  \"start: %d\", 10, 0\n\n    mend:       db  10, \"*** END ***\", 10, 0\n\nSECTION .text       ; code\n    extern _get_token\n\n    extern _printf\n\n    global _main\n\n    _main:\n        ;   stash base stack pointer\n        push    ebp\n        mov     ebp,        esp\n\n        mov     eax,        5\n        mov     ebx,        10\n        push    ebx                     ; length\n        push    eax                     ; start\n        call    _get_token              ; get a token\n        mov     [tkn],      eax\n\n        add     esp,        8\n\n        ;   test token properties\n        push    DWORD [tkn]\n        push    mstt\n        call    _printf\n\n        push    DWORD [tkn + 4]\n        push    mlen\n        call    _printf\n\n        add     esp,        16\n\n        .end:\n        push    DWORD   mend\n        call    _printf\n        ;   restore base stack pointer\n        mov     esp,        ebp\n        pop     ebp\n\nSECTION .bss        ; uninitialized data\n    tkn:        resd        1\n</code></pre>\n\n<p>The output is:</p>\n\n<blockquote>\n  <p>[C] new token: start [5]  length [10]      </p>\n  \n  <p>start: 5<br>\n  length: 0  </p>\n</blockquote>\n\n<p>What am I missing to get both start and length? The output verifies that the extern function in C is getting called and the values are pushed into the function.</p>\n"}, {"tags": ["c", "io", "hex", "negative-number"], "comments": [{"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1429744032, "post_id": 29810508, "comment_id": 47749016, "body": "But you know that 0xfffffff5 and 0xff5 are different values?"}, {"owner": {"reputation": 200780, "user_id": 116908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54d38793d7a407446999b33b81d607fd?s=128&d=identicon&r=PG", "display_name": "Carl Norum", "link": "https://stackoverflow.com/users/116908/carl-norum"}, "reply_to_user": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 2, "creation_date": 1429744090, "post_id": 29810508, "comment_id": 47749036, "body": "@deviantfan, not if they both are representing <code>-11</code> in 32-bit vs 12-bit signed two&#39;s complement representations."}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "reply_to_user": {"reputation": 200780, "user_id": 116908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54d38793d7a407446999b33b81d607fd?s=128&d=identicon&r=PG", "display_name": "Carl Norum", "link": "https://stackoverflow.com/users/116908/carl-norum"}, "edited": false, "score": 0, "creation_date": 1429744395, "post_id": 29810508, "comment_id": 47749149, "body": "@CarlNorum Yes, and that&#180;s why in the C code with 32bit vars it will need special treatment (when reading it in again or something). That&#180;s why I&#180;m writing this, somehow I doubt OP is aware of this if the only concern are spaces."}, {"owner": {"reputation": 200780, "user_id": 116908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54d38793d7a407446999b33b81d607fd?s=128&d=identicon&r=PG", "display_name": "Carl Norum", "link": "https://stackoverflow.com/users/116908/carl-norum"}, "edited": false, "score": 0, "creation_date": 1429744450, "post_id": 29810508, "comment_id": 47749169, "body": "I assumed he meant 3 hex place values available in his instruction encoding. That is, the displacement is a 12-bit relative offset."}, {"owner": {"reputation": 41, "user_id": 3420440, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/b826b6b331060033b223e5d52f728bd8?s=128&d=identicon&r=PG&f=1", "display_name": "narcolepticNarwhal", "link": "https://stackoverflow.com/users/3420440/narcolepticnarwhal"}, "edited": false, "score": 0, "creation_date": 1429745093, "post_id": 29810508, "comment_id": 47749391, "body": "You are correct. I am only allowed 3 hex place values in the instruction encoding. The range for my pc relative addressing is from -2048 - 2047 with only 3 hex values to represent the number."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 3420440, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/b826b6b331060033b223e5d52f728bd8?s=128&d=identicon&r=PG&f=1", "display_name": "narcolepticNarwhal", "link": "https://stackoverflow.com/users/3420440/narcolepticnarwhal"}, "edited": false, "score": 0, "creation_date": 1429745215, "post_id": 29810551, "comment_id": 47749438, "body": "Hey thanks. I really appreciate that it fixed it perfectly. Is there a webpage you got that from? I had been searching for a way to truncate integers and couldn&#39;t find it anywhere!"}], "tags": [], "owner": {"reputation": 200780, "user_id": 116908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54d38793d7a407446999b33b81d607fd?s=128&d=identicon&r=PG", "display_name": "Carl Norum", "link": "https://stackoverflow.com/users/116908/carl-norum"}, "is_accepted": false, "score": 2, "last_activity_date": 1429743985, "creation_date": 1429743985, "answer_id": 29810551, "question_id": 29810508, "link": "https://stackoverflow.com/questions/29810508/in-c-is-there-a-way-to-set-a-maximum-width-for-an-integer-output/29810551#29810551", "title": "In C is there a way to set a maximum width for an integer output?", "body": "<p>You can just truncate before printing:</p>\n\n<pre><code>unsigned int x = -11;\nprintf(\"%03x\\n\", x &amp; 0xfff);\n</code></pre>\n\n<p>Example output:</p>\n\n<pre><code>$ ./example \nff5\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 200780, "user_id": 116908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54d38793d7a407446999b33b81d607fd?s=128&d=identicon&r=PG", "display_name": "Carl Norum", "link": "https://stackoverflow.com/users/116908/carl-norum"}, "edited": false, "score": 1, "creation_date": 1429750170, "post_id": 29810756, "comment_id": 47751106, "body": "@Carl Norum If you mean that pesky extra <code>&#39;F&#39;</code> - fixed."}, {"owner": {"reputation": 200780, "user_id": 116908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54d38793d7a407446999b33b81d607fd?s=128&d=identicon&r=PG", "display_name": "Carl Norum", "link": "https://stackoverflow.com/users/116908/carl-norum"}, "edited": false, "score": 0, "creation_date": 1429750809, "post_id": 29810756, "comment_id": 47751270, "body": "Yup - that&#39;s it. I think I was missing what was going on at first. Now I get it."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1429750019, "last_edit_date": 1495540623, "creation_date": 1429745195, "answer_id": 29810756, "question_id": 29810508, "link": "https://stackoverflow.com/questions/29810508/in-c-is-there-a-way-to-set-a-maximum-width-for-an-integer-output/29810756#29810756", "title": "In C is there a way to set a maximum width for an integer output?", "body": "<p>Limiting the values to the range -0x800 to 0x7FF works as suggested by <a href=\"https://stackoverflow.com/users/116908/carl-norum\">@Carl Norum</a> with <code>x &amp; 0xfff</code>.</p>\n\n<p>In <em>theory</em>, <code>printf()</code> also needs to control locale which literally could print out a whole lot more but practically is not a concern.  Of course code could use.</p>\n\n<pre><code>char buf[4];\nbuf[0] = 0;\nsnprintf(buf, sizeof buf, \"%03x\", x &amp; 0xFFF);\nfputs(buf, stdout);\n</code></pre>\n\n<p>But this is a bit of <a href=\"http://en.wiktionary.org/wiki/belt_and_suspenders\" rel=\"nofollow noreferrer\">belt <em>and</em> suspenders</a>.</p>\n"}], "owner": {"reputation": 41, "user_id": 3420440, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/b826b6b331060033b223e5d52f728bd8?s=128&d=identicon&r=PG&f=1", "display_name": "narcolepticNarwhal", "link": "https://stackoverflow.com/users/3420440/narcolepticnarwhal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1429750019, "creation_date": 1429743830, "last_edit_date": 1429744140, "question_id": 29810508, "link": "https://stackoverflow.com/questions/29810508/in-c-is-there-a-way-to-set-a-maximum-width-for-an-integer-output", "title": "In C is there a way to set a maximum width for an integer output?", "body": "<p>I am printing hexadecimal numbers in sequence to make an opcode for an assembler in C. I have everything perfect except for when the displacement is negative. Now I only have 3 spaces available for the displacement and when it is say -11(base 10) I convert that and get <code>fffffff5</code> as my answer. I want to limit this so that only <code>ff5</code> is displayed. Is there a way to do this? When printing positive numbers because of restrictions the number will never be greater than <code>7FF</code> so I get no issue there. But with negative numbers it will always print 8 hex numbers and I want just the 3 right most digits, is there anyway to do this?</p>\n"}, {"tags": ["javascript", "c++", "c", "printf"], "comments": [{"owner": {"reputation": 574431, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "edited": false, "score": 0, "creation_date": 1429743432, "post_id": 29810359, "comment_id": 47748803, "body": "There is no <code>swprintf()</code> in Javascript."}], "answers": [{"comments": [{"owner": {"reputation": 30076, "user_id": 1828637, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/46b5428a878306d5af0a87fc7b2db499?s=128&d=identicon&r=PG", "display_name": "Noitidart", "link": "https://stackoverflow.com/users/1828637/noitidart"}, "edited": false, "score": 0, "creation_date": 1429744295, "post_id": 29810483, "comment_id": 47749115, "body": "I&#39;m trying to replicate its behavior here: <a href=\"http://mxr.mozilla.org/mozilla-central/source/other-licenses/nsis/Contrib/CityHash/CityHash.cpp#78\" rel=\"nofollow noreferrer\">mxr.mozilla.org/mozilla-central/source/other-licenses/nsis/&hellip;</a>"}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "reply_to_user": {"reputation": 30076, "user_id": 1828637, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/46b5428a878306d5af0a87fc7b2db499?s=128&d=identicon&r=PG", "display_name": "Noitidart", "link": "https://stackoverflow.com/users/1828637/noitidart"}, "edited": false, "score": 1, "creation_date": 1429756688, "post_id": 29810483, "comment_id": 47753061, "body": "@Noitidart This answers your question. You just take the resulting hash value generated in <code>CityHash64</code> and use <code>toString</code> to convert it to hexadecimal text string -  <code>hashString = hashValue.toString(16);</code>."}, {"owner": {"reputation": 30076, "user_id": 1828637, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/46b5428a878306d5af0a87fc7b2db499?s=128&d=identicon&r=PG", "display_name": "Noitidart", "link": "https://stackoverflow.com/users/1828637/noitidart"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1429768748, "post_id": 29810483, "comment_id": 47757105, "body": "Thanks @CaptainObvlious Ill try that ou! :)"}], "tags": [], "owner": {"reputation": 715, "user_id": 4817677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a09791349eb1721b4fd7027ef5b68f3?s=128&d=identicon&r=PG", "display_name": "thetoast", "link": "https://stackoverflow.com/users/4817677/thetoast"}, "is_accepted": true, "score": 2, "last_activity_date": 1429743679, "creation_date": 1429743679, "answer_id": 29810483, "question_id": 29810359, "link": "https://stackoverflow.com/questions/29810359/from-javascript-swprintf/29810483#29810483", "title": "From JavaScript - swprintf", "body": "<p>JavaScript numbers have a <code>toString</code> method which takes a radix.  Using <code>toString(16)</code> will get you the number in hex.  Is this what you're looking for?</p>\n"}], "owner": {"reputation": 30076, "user_id": 1828637, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/46b5428a878306d5af0a87fc7b2db499?s=128&d=identicon&r=PG", "display_name": "Noitidart", "link": "https://stackoverflow.com/users/1828637/noitidart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 29810483, "answer_count": 1, "score": -1, "last_activity_date": 1429743679, "creation_date": 1429743020, "question_id": 29810359, "link": "https://stackoverflow.com/questions/29810359/from-javascript-swprintf", "title": "From JavaScript - swprintf", "body": "<p>I'm trying to do this <code>swprintf(hexResult, L\"%I64X\", result);</code> from javascript, is this possible? Such that <code>CityHash64('C:\\Program Files (x86)\\Mozilla Firefox')</code> is encoded as <code>E7CF176E110C211B</code>.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 3687, "user_id": 1143300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cc17abb77e13e5569f395a526c70353?s=128&d=identicon&r=PG", "display_name": "angabriel", "link": "https://stackoverflow.com/users/1143300/angabriel"}, "edited": false, "score": 0, "creation_date": 1429741408, "post_id": 29809989, "comment_id": 47748020, "body": "Please also give your error/compile message :)"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1429741730, "post_id": 29809989, "comment_id": 47748163, "body": "Please post code that actually compiles! What is <code>modifyArray()</code> supposed to do? It does not modify an array."}, {"owner": {"reputation": 858, "user_id": 4806970, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/EO255.jpg?s=128&g=1", "display_name": "LandonZeKepitelOfGreytBritn", "link": "https://stackoverflow.com/users/4806970/landonzekepitelofgreytbritn"}, "edited": false, "score": 0, "creation_date": 1429742148, "post_id": 29809989, "comment_id": 47748341, "body": "It doesn&#39;t give any errors. It just crashes. Well It should do some calculations with the var result. Nothing more. But it already crashes now, so I think it is useless to give an entire chunk of code of pure math that doesn&#39;t get executed."}], "answers": [{"comments": [{"owner": {"reputation": 858, "user_id": 4806970, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/EO255.jpg?s=128&g=1", "display_name": "LandonZeKepitelOfGreytBritn", "link": "https://stackoverflow.com/users/4806970/landonzekepitelofgreytbritn"}, "edited": false, "score": 0, "creation_date": 1429742263, "post_id": 29810092, "comment_id": 47748390, "body": "How could I correct it then? because just printing the entire array in the function myArray works fine. It is doing actual calculations that fails..."}], "tags": [], "owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": false, "score": 1, "last_activity_date": 1429741772, "creation_date": 1429741772, "answer_id": 29810092, "question_id": 29809989, "link": "https://stackoverflow.com/questions/29809989/c-accessing-2d-array-trough-function-doesnt-work-crash/29810092#29810092", "title": "C - accessing 2D array trough function doesn&#39;t work, crash", "body": "<p>The cast to <code>( int ** )</code> is forcing myArray to be treated as an array of pointers to int.</p>\n\n<p>That's not what it is - it's a single chunk of memory the compiler treats as a 2-dimensional array.</p>\n"}, {"tags": [], "owner": {"reputation": 1787, "user_id": 916549, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/yezKv.jpg?s=128&g=1", "display_name": "Sarang", "link": "https://stackoverflow.com/users/916549/sarang"}, "is_accepted": false, "score": 0, "last_activity_date": 1429742254, "creation_date": 1429742254, "answer_id": 29810181, "question_id": 29809989, "link": "https://stackoverflow.com/questions/29809989/c-accessing-2d-array-trough-function-doesnt-work-crash/29810181#29810181", "title": "C - accessing 2D array trough function doesn&#39;t work, crash", "body": "<p>The 2D array is compiled as a single dimensional array\nSee how the assembly generated is single array (between elements there is increment of 4 bytes)</p>\n\n<pre><code>int myArray[2][3] = {{1,2,3},{5,4,3}};\n000000013F6510D4  mov         dword ptr [myArray],1  \n000000013F6510DC  mov         dword ptr [rsp+2Ch],2  \n000000013F6510E4  mov         dword ptr [rsp+30h],3  \n000000013F6510EC  mov         dword ptr [rsp+34h],5  \n000000013F6510F4  mov         dword ptr [rsp+38h],4  \n000000013F6510FC  mov         dword ptr [rsp+3Ch],3  \n</code></pre>\n\n<p>by doing reinterpret_cast (c-style cast) to int**- the memory layout being accessed is no more compatible- thus leading to accessing invalid memory</p>\n"}, {"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": true, "score": 0, "last_activity_date": 1429742433, "creation_date": 1429742433, "answer_id": 29810222, "question_id": 29809989, "link": "https://stackoverflow.com/questions/29809989/c-accessing-2d-array-trough-function-doesnt-work-crash/29810222#29810222", "title": "C - accessing 2D array trough function doesn&#39;t work, crash", "body": "<p>As the function treats the array passed as a 1-D array of <code>int</code> your declaration can be simplified to this.</p>\n\n<pre><code>#include &lt;stdio.h&gt;                        // &lt;&lt;--- include\n\nvoid modifyArray(int *array, int height1, int width1)\n{\n    int i, j, result;                     // var declarations\n    for(i=0;i&lt;height1;i++) \n    {\n        for(j=0;j&lt;width1;j++)\n        {\n            result = *((array+i*3)+j);\n            printf(\"%d \", result);        // added ;\n        }\n    }\n}\n\nint main (void)\n{\n    int myArray[2][3] = {{1,2,3},{5,4,3}};\n    int height = 2;\n    int width = 3;\n\n    modifyArray( &amp;myArray[0][0],height, width);\n    return 0;\n}\n</code></pre>\n\n<p>Program output:</p>\n\n<p>1 2 3 5 4 3</p>\n\n<p>If you want to modify the array, that is simply done with, for example</p>\n\n<pre><code>*((array+i*3)+j) = result;\n</code></pre>\n"}], "owner": {"reputation": 858, "user_id": 4806970, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/EO255.jpg?s=128&g=1", "display_name": "LandonZeKepitelOfGreytBritn", "link": "https://stackoverflow.com/users/4806970/landonzekepitelofgreytbritn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 29810222, "answer_count": 3, "score": -1, "last_activity_date": 1429945208, "creation_date": 1429741300, "last_edit_date": 1429945208, "question_id": 29809989, "link": "https://stackoverflow.com/questions/29809989/c-accessing-2d-array-trough-function-doesnt-work-crash", "title": "C - accessing 2D array trough function doesn&#39;t work, crash", "body": "<p>I am trying to do calculation with a 2D matrix. Why does this crash without an error?</p>\n\n<p>Code:</p>\n\n<pre><code>int main (void)\n{\n    int myArray[2][3] = {{1,2,3},{5,4,3}};\n    int height = 2;\n    int width = 3;\n\n    modifyArray( (int**)myArray,height, width);\n\n}\n\nvoid modifyArray(int **array, int height1, int width1)\n{\n\n    int result;\n\n    for(i=0;i&lt;height1;i++) \n    {\n        for(j=0;j&lt;width1;j++)\n        {\n          result = (**((array+i*3)+j));\n          printf(\"%d\", result)\n         }\n   }\n}\n</code></pre>\n"}, {"tags": ["c", "macos", "curses", "compiler-flags", "xcode6.3"], "comments": [{"owner": {"reputation": 6017, "user_id": 4694621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lIYBa.png?s=128&g=1", "display_name": "Mateusz Piotrowski", "link": "https://stackoverflow.com/users/4694621/mateusz-piotrowski"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1429742357, "post_id": 29809959, "comment_id": 47748432, "body": "The point is there is not much left to show - I can post the whole code if it&#39;s necessary but it is not complicated (just a bunch of more not yet implemented functions like <code>add()</code> or <code>clear()</code>. What&#39;s surprising is that only the <code>clear()</code> function throws the errors and warnings.."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1429760833, "post_id": 29809959, "comment_id": 47754256, "body": "Note: Interesting &quot;changing the name of the <code>clear</code> funtcion to a <code>cleark</code> function&quot;.  <code>funtcion</code> --&gt; <code>function</code>"}, {"owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "edited": false, "score": 0, "creation_date": 1429800246, "post_id": 29809959, "comment_id": 47779926, "body": "The code you have posted does not cause the problem that you show. You will have to be more specific about your includes. Alternatively, you can just pick another function name and be done with it."}, {"owner": {"reputation": 6017, "user_id": 4694621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lIYBa.png?s=128&g=1", "display_name": "Mateusz Piotrowski", "link": "https://stackoverflow.com/users/4694621/mateusz-piotrowski"}, "edited": false, "score": 1, "creation_date": 1429800436, "post_id": 29809959, "comment_id": 47780107, "body": "The thing is it does not cause the problem if you compile it using standard <code>gcc</code> in terminal. <b>It does cause the problem however when I&#39;m trying to compile it in Xcode with a command line tool template loaded.</b>"}, {"owner": {"reputation": 22751, "user_id": 2399879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UxMS5.jpg?s=128&g=1", "display_name": "Crowman", "link": "https://stackoverflow.com/users/2399879/crowman"}, "edited": false, "score": 1, "creation_date": 1429805016, "post_id": 29809959, "comment_id": 47783858, "body": "I can indeed replicate this problem with Xcode 6.3.1 with only the code presented. For some reason, <code>stdio.h</code> seems to be including <code>curses.h</code> (i.e. if you don&#39;t include <code>stdio.h</code>, this issue goes away), and I haven&#39;t been quickly able to find a way to stop it doing that. This seems to be problematic, since standard headers should not import random symbols into the global namespace without an easy and obvious way to turn it off."}], "answers": [{"comments": [{"owner": {"reputation": 6017, "user_id": 4694621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lIYBa.png?s=128&g=1", "display_name": "Mateusz Piotrowski", "link": "https://stackoverflow.com/users/4694621/mateusz-piotrowski"}, "edited": false, "score": 0, "creation_date": 1429743382, "post_id": 29810367, "comment_id": 47748790, "body": "<code>trie.h</code> is not the issue. Sorry for being careless.. I&#39;ll check my stdio.h - maybe xcode has <code>clear()</code> inside."}, {"owner": {"reputation": 6017, "user_id": 4694621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lIYBa.png?s=128&g=1", "display_name": "Mateusz Piotrowski", "link": "https://stackoverflow.com/users/4694621/mateusz-piotrowski"}, "edited": false, "score": 0, "creation_date": 1429744039, "post_id": 29810367, "comment_id": 47749020, "body": "after renaming the function <code>clear</code> the Xcode has finally been able to build the project. Why is it so?"}, {"owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "edited": false, "score": 1, "creation_date": 1429822373, "post_id": 29810367, "comment_id": 47794816, "body": "The usual way to investigate this is to use the C preprocessor to make a file showing which files were included.  With the given methodology, there is no useful information for a bug report to <i>anyone</i>."}], "tags": [], "owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "is_accepted": false, "score": 1, "last_activity_date": 1429743046, "creation_date": 1429743046, "answer_id": 29810367, "question_id": 29809959, "link": "https://stackoverflow.com/questions/29809959/how-to-disable-curses-h-header-a-part-of-stdio-h-in-xcode-6-3-osx-yosemite/29810367#29810367", "title": "How to disable &quot;curses.h&quot; header (a part of &quot;stdio.h in Xcode 6.3 OSX Yosemite) to avoid conflicting function declarations", "body": "<p>You are including \"trie.h\", not \"tree.h\". </p>\n\n<p>But maybe that's just you being careless when posting the code...</p>\n\n<p>I bet there is another function named clear () defined somewhere. Possibly in your version of stdio.h. </p>\n"}, {"tags": [], "owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "is_accepted": true, "score": 4, "last_activity_date": 1430530032, "last_edit_date": 1495541176, "creation_date": 1430530032, "answer_id": 29997362, "question_id": 29809959, "link": "https://stackoverflow.com/questions/29809959/how-to-disable-curses-h-header-a-part-of-stdio-h-in-xcode-6-3-osx-yosemite/29997362#29997362", "title": "How to disable &quot;curses.h&quot; header (a part of &quot;stdio.h in Xcode 6.3 OSX Yosemite) to avoid conflicting function declarations", "body": "<p>Normally I run the C preprocessor to see what the compiler actually parses.  However, following <em><a href=\"https://stackoverflow.com/questions/5937031/xcode-preprocessor-output\">Xcode Preprocessor Output</a></em> to examine the preprocessor output with Xcode does not achieve that - it is translating the <code>#include</code> to <code>@import</code>.  Here is what the preprocessor view shows me:</p>\n\n<pre><code>// Preprocessed output for tree.c\n// Generated at 9:24:57 PM on Friday, May 1, 2015\n// Using Debug configuration, x86_64 architecture for curses-vs-stdio target of curses-vs-stdio project\n\n# 1 \"/Users/thomas/Desktop/curses-vs-stdio/curses-vs-stdio/tree.c\"\n# 1 \"&lt;built-in&gt;\" 1\n# 1 \"&lt;built-in&gt;\" 3\n# 322 \"&lt;built-in&gt;\" 3\n# 1 \"&lt;command line&gt;\" 1\n# 1 \"&lt;built-in&gt;\" 2\n# 1 \"/Users/thomas/Desktop/curses-vs-stdio/curses-vs-stdio/tree.c\" 2\n\n\n\n# 1 \"/Users/thomas/Desktop/curses-vs-stdio/curses-vs-stdio/tree.h\" 1\n\n\nvoid clear(void);\n\n@import Darwin.C.stdio; /* clang -E: implicit import for \"/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.10.sdk/usr/include/stdio.h\" */\n# 5 \"/Users/thomas/Desktop/curses-vs-stdio/curses-vs-stdio/tree.c\" 2\n\nvoid clear(void) {\n    printf(\"Command clear.\\n\");\n}\n</code></pre>\n\n<p>Apparently the problem is Xcode's use of modules <em>rather</em> than <code>stdio.h</code> including <code>curses.h</code>.  The \"Darwin\" module is where the problem lies.</p>\n\n<p>In fact, if I disable modules (using the hint in <a href=\"http://indiestack.com/2015/02/enable-clang-modules-disable-auto-linking/\" rel=\"nofollow noreferrer\">Enable Clang Modules, Disable Auto Linking</a>), the build problem goes away.  This is</p>\n\n<ul>\n<li>in Build Settings</li>\n<li>section <em>Apple LLVM 6.1 - Language - Modules</em></li>\n<li>setting <em>Enable Modules (C and Objective-C)</em></li>\n</ul>\n\n<p>As a further hint to the problem, having rearranged the example slightly (putting the prototype before the include), I see a message complaining about <em>overloading</em> &mdash; but that is not C.</p>\n\n<p>Perhaps Apple will fix this in the next release.</p>\n"}], "owner": {"reputation": 6017, "user_id": 4694621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lIYBa.png?s=128&g=1", "display_name": "Mateusz Piotrowski", "link": "https://stackoverflow.com/users/4694621/mateusz-piotrowski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 918, "favorite_count": 0, "accepted_answer_id": 29997362, "answer_count": 2, "score": 2, "last_activity_date": 1582543629, "creation_date": 1429741156, "last_edit_date": 1582543629, "question_id": 29809959, "link": "https://stackoverflow.com/questions/29809959/how-to-disable-curses-h-header-a-part-of-stdio-h-in-xcode-6-3-osx-yosemite", "title": "How to disable &quot;curses.h&quot; header (a part of &quot;stdio.h in Xcode 6.3 OSX Yosemite) to avoid conflicting function declarations", "body": "<p>I'm trying to build a project in Xcode but I get the following errors <code>Implicit declaration of function 'clear' is invalid in C99</code> and <code>Conflicting types for 'clear'</code>.</p>\n\n<p>Here's the code:</p>\n\n<pre><code>//main.c\n#include &lt;stdio.h&gt;\n#include \"tree.h\"\n\nint main(){\n  clear(); // Implicit declaration of function 'clear' is invalid in C99\n  return 0;\n}\n\n//tree.c\n#include &lt;stdio.h&gt;\n#include \"tree.h\"\nvoid clear(){ ///Conflicting types for 'clear'\n  printf(\"Command clear.\\n\");\n}\n\n//tree.h\n#include &lt;stdio.h&gt;\n\nvoid clear(); ///Conflicting types for 'clear'\n</code></pre>\n\n<p>Why do I get these errors and warnings? I've tried to search for the solution on StackOverflow, but all the related answers where about the case when there were no <code>#include</code> of some sort.</p>\n\n<p>'clear' is not a keyword in C so it's not the case, is it? <br>(source: <a href=\"http://aboutc.weebly.com/keywords.html\" rel=\"nofollow noreferrer\">http://aboutc.weebly.com/keywords.html</a>)</p>\n\n<p>Related topics (do not answer my question although they are actually related):</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/13870227/implicit-declaration-of-function-sum-is-invalid-in-c99\">Implicit declaration of function &#39;sum&#39; is invalid in C99</a></li>\n<li><a href=\"https://stackoverflow.com/questions/27126490/implicit-declaration-of-function-is-invalid-in-c99\">Implicit declaration of function is invalid in C99</a></li>\n</ul>\n\n<p>Thanks for any help.</p>\n\n<hr>\n\n<p><b>UPDATE!</b></p>\n\n<p>It turns out that changing the name of the <code>clear</code> funtcion to a <code>cleark</code> function solved the problem. Nevertheless it does not make any sense to me yet.</p>\n\n<hr>\n\n<p><b>UPDATE 2!</b></p>\n\n<p>I based my project on the <code>command line tool</code> template from Xcode 6.3 on Mac OS 10.10. Because of that Xcode has automatically added some libraries and flags to the project's compiler. What's the most important here is that the <code>curses.h</code> header has been added and this header already <b>contains the <code>clear()</code> function</b>.</p>\n\n<p>Here's the <code>Conflicting types for 'clear'</code> error log:\n<code>/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.10.sdk/usr/include/curses.h:541:28: Previous declaration is here</code></p>\n\n<p>I've tried to remove the <code>-lcurses</code> from the compiler's flags manually, but I couldn't locate such settings. Is there any another way to build the project? (All in all my goal is to be able to use the Xcode's debugger when the project expands)</p>\n\n<hr>\n\n<p><b>UPDATE 3!</b>\nAccording to what Paul Griffiths discovered and published in the comment below the problem is following:</p>\n\n<blockquote>\n  <p>I can indeed replicate this problem with Xcode 6.3.1 with only the code presented. <b>For some reason, stdio.h seems to be including curses.h</b> (i.e. if you don't include stdio.h, this issue goes away), and I haven't been quickly able to find a way to stop it doing that. This seems to be problematic, since standard headers should not import random symbols into the global namespace without an easy and obvious way to turn it off.</p>\n</blockquote>\n"}, {"tags": ["c", "go"], "comments": [{"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 2, "creation_date": 1429742703, "post_id": 29809935, "comment_id": 47748556, "body": "Translating between languages <i>requires</i> knowing both the old and new language well as well as the thing being translated. You should usually translate/port at higher than the statement level. In any case, either you know what that C does (in which case it should be easy-ish to port) or you don&#39;t, in which case you shouldn&#39;t be trying to port it."}, {"owner": {"reputation": 38332, "user_id": 763585, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/34f929fab16e27f59c5193f0db678125?s=128&d=identicon&r=PG", "display_name": "evanmcdonnal", "link": "https://stackoverflow.com/users/763585/evanmcdonnal"}, "edited": false, "score": 0, "creation_date": 1429743011, "post_id": 29809935, "comment_id": 47748655, "body": "I recommend reading this Go blog post <a href=\"https://blog.golang.org/strings\" rel=\"nofollow noreferrer\">blog.golang.org/strings</a> because this is on place where Go is not very much like C imo."}, {"owner": {"reputation": 951, "user_id": 631593, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6f0ab0bf648041c211675b2bd06313c6?s=128&d=identicon&r=PG", "display_name": "Varun", "link": "https://stackoverflow.com/users/631593/varun"}, "reply_to_user": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1429743026, "post_id": 29809935, "comment_id": 47748658, "body": "Thanks @DaveC, I agree with you to a certain extent, but if I don&#39;t try how do I learn. Also I have been able to port most of it and this is kind of last thing that I need to get it done. I am not a master on both c or go, but have ability to read and make sense and write something new (with go)."}, {"owner": {"reputation": 951, "user_id": 631593, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6f0ab0bf648041c211675b2bd06313c6?s=128&d=identicon&r=PG", "display_name": "Varun", "link": "https://stackoverflow.com/users/631593/varun"}, "reply_to_user": {"reputation": 38332, "user_id": 763585, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/34f929fab16e27f59c5193f0db678125?s=128&d=identicon&r=PG", "display_name": "evanmcdonnal", "link": "https://stackoverflow.com/users/763585/evanmcdonnal"}, "edited": false, "score": 0, "creation_date": 1429743201, "post_id": 29809935, "comment_id": 47748724, "body": "@evanmcdonnal thanks for the link, I have read that, I know that char * is most probably a generic raw memory pointer used in place of void *, but want to confirm my understanding."}, {"owner": {"reputation": 44047, "user_id": 1400793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7VxVK.png?s=128&g=1", "display_name": "Paul Hankin", "link": "https://stackoverflow.com/users/1400793/paul-hankin"}, "edited": false, "score": 3, "creation_date": 1429756125, "post_id": 29809935, "comment_id": 47752891, "body": "This is undefined behavior in C, unless the first element of the struct is an Oid (in which case there&#39;s no need for the pointer nonsense). What&#39;s the struct, and what are you trying to do? Probably there&#39;s a better way."}, {"owner": {"reputation": 38332, "user_id": 763585, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/34f929fab16e27f59c5193f0db678125?s=128&d=identicon&r=PG", "display_name": "evanmcdonnal", "link": "https://stackoverflow.com/users/763585/evanmcdonnal"}, "edited": false, "score": 0, "creation_date": 1429802889, "post_id": 29809935, "comment_id": 47782223, "body": "The string abstraction in Go simply doesn&#39;t allow for that. It intentionally will not allow you to take the address of an arbitrary index in a string. The reason I linked the article is because you should think about what piece of data you&#39;re trying to access and then assign it directly to a variable. Even if you find some way to arbitrarily point into a string in Go, it will be extremely questionable/hacky code."}], "answers": [{"comments": [{"owner": {"reputation": 951, "user_id": 631593, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6f0ab0bf648041c211675b2bd06313c6?s=128&d=identicon&r=PG", "display_name": "Varun", "link": "https://stackoverflow.com/users/631593/varun"}, "edited": false, "score": 0, "creation_date": 1429750313, "post_id": 29811385, "comment_id": 47751141, "body": "Thanks @JimB, let me try that."}], "tags": [], "owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "is_accepted": false, "score": 0, "last_activity_date": 1429748706, "creation_date": 1429748706, "answer_id": 29811385, "question_id": 29809935, "link": "https://stackoverflow.com/questions/29809935/how-to-change-char-to-go-equivalent/29811385#29811385", "title": "how to change char * to Go equivalent", "body": "<p>The Go equivalent to a casting a C pointer is converting a pointer to an <code>unsafe.Pointer</code>, which can then be converted to a pointer of any type you wish.</p>\n\n<p>If <code>tup</code> is a pointer to a struct in C, you could convert it to a <code>*uint32</code> like so:</p>\n\n<pre><code>u := (*uint32)(unsafe.Pointer(C.tup))\n</code></pre>\n"}], "owner": {"reputation": 951, "user_id": 631593, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6f0ab0bf648041c211675b2bd06313c6?s=128&d=identicon&r=PG", "display_name": "Varun", "link": "https://stackoverflow.com/users/631593/varun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1429748706, "creation_date": 1429741052, "question_id": 29809935, "link": "https://stackoverflow.com/questions/29809935/how-to-change-char-to-go-equivalent", "title": "how to change char * to Go equivalent", "body": "<p>I have some c code that look like this-</p>\n\n<pre><code>*((Oid *) ((char *)(tup)\n</code></pre>\n\n<p>where Oid is a uint32 type and tup is a struct. I want to convert it to go lang. I have decoded the struct but not able to figure out how to convert above line to go lang.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 1, "creation_date": 1429740994, "post_id": 29809898, "comment_id": 47747858, "body": "because sizeof is compile time construct, not runtime, also <code>*ptr</code> means <code>ptr[0]</code> which is 8 bytes :)"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1429741154, "post_id": 29809898, "comment_id": 47747925, "body": "The total size being allocated for <code>ptr</code> is the size you requested, which you know to be <code>10*sizeof(integers)</code> unless <code>malloc()</code> returns <code>NULL</code> which you should always check for."}, {"owner": {"reputation": 196, "user_id": 4086221, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a0c8f9bd967153b185cb538dedd2b981?s=128&d=identicon&r=PG&f=1", "display_name": "Adarsh Rao", "link": "https://stackoverflow.com/users/4086221/adarsh-rao"}, "edited": false, "score": 0, "creation_date": 1429741214, "post_id": 29809898, "comment_id": 47747949, "body": "Yes but right now, that ptr does not point to anything in particular. So, is there any way to find out how much of the allocated memory I am using?"}, {"owner": {"reputation": 2157, "user_id": 3865653, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Fv3Fj.jpg?s=128&g=1", "display_name": "Deanie", "link": "https://stackoverflow.com/users/3865653/deanie"}, "edited": false, "score": 1, "creation_date": 1429741306, "post_id": 29809898, "comment_id": 47747981, "body": "There is no need to typecast the returned pointer from malloc in C."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1429741427, "post_id": 29809898, "comment_id": 47748029, "body": "The syntax says <code>sizeof expr</code> (or <code>sizeof (type)</code> ) Just look at the source, and find out what the <i>size</i> of your <i>expression</i> is. BTW: <code>main()</code> should return int."}], "answers": [{"comments": [{"owner": {"reputation": 196, "user_id": 4086221, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a0c8f9bd967153b185cb538dedd2b981?s=128&d=identicon&r=PG&f=1", "display_name": "Adarsh Rao", "link": "https://stackoverflow.com/users/4086221/adarsh-rao"}, "edited": false, "score": 0, "creation_date": 1429741290, "post_id": 29809928, "comment_id": 47747972, "body": "Actually, if I use sizeof(ptr), I get the output to be 4."}, {"owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "reply_to_user": {"reputation": 196, "user_id": 4086221, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a0c8f9bd967153b185cb538dedd2b981?s=128&d=identicon&r=PG&f=1", "display_name": "Adarsh Rao", "link": "https://stackoverflow.com/users/4086221/adarsh-rao"}, "edited": false, "score": 0, "creation_date": 1429741468, "post_id": 29809928, "comment_id": 47748047, "body": "@AdarshRao:  <b>Part 1:</b> The value of <code>sizeof(*ptr)</code> is the size of a single object of type <code>integers</code>. If I can assume that your <code>int</code> is a 32 bit integer, then <code>integers</code> will have a size of <code>8</code>.  <b>Part 2:</b> The value of <code>sizeof(ptr)</code> is the size of a pointer. This will usually be 4 or 8 bytes depending on your platform."}, {"owner": {"reputation": 7641, "user_id": 4282370, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0WI7C.jpg?s=128&g=1", "display_name": "Amnon Shochot", "link": "https://stackoverflow.com/users/4282370/amnon-shochot"}, "edited": false, "score": 0, "creation_date": 1429741495, "post_id": 29809928, "comment_id": 47748063, "body": "This is because you&#39;re compiling your code with 32 bits architecture where a pointer is 32 bits (4 bytes) long."}], "tags": [], "owner": {"reputation": 7641, "user_id": 4282370, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0WI7C.jpg?s=128&g=1", "display_name": "Amnon Shochot", "link": "https://stackoverflow.com/users/4282370/amnon-shochot"}, "is_accepted": false, "score": 2, "last_activity_date": 1429741549, "last_edit_date": 1429741549, "creation_date": 1429741006, "answer_id": 29809928, "question_id": 29809898, "link": "https://stackoverflow.com/questions/29809898/why-am-i-not-getting-the-correct-size-after-using-malloc-and-printing-using-size/29809928#29809928", "title": "Why am I not getting the correct size after using malloc and printing using sizeof?", "body": "<p>Because you're using <code>sizeof(*ptr)</code> you're actually asking for the size of the first element in the allocated buffer, thus <code>sizeof</code> will return the size of the <strong>first element in <code>ptr</code></strong> (i.e. 2x4 bytes integers on 32bits system) rather than the allocated size.</p>\n\n<p>Also, please note that even if you'd use <code>sizeof(ptr)</code> you'd get the size of the <code>ptr</code> pointer which on 32bits system would be 4 bytes.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 1, "last_activity_date": 1429798106, "last_edit_date": 1429798106, "creation_date": 1429742388, "answer_id": 29810215, "question_id": 29809898, "link": "https://stackoverflow.com/questions/29809898/why-am-i-not-getting-the-correct-size-after-using-malloc-and-printing-using-size/29810215#29810215", "title": "Why am I not getting the correct size after using malloc and printing using sizeof?", "body": "<blockquote>\n  <p>Why then does using sizeof(*ptr) give only 8? How do I find the total size being allocated for ptr?</p>\n</blockquote>\n\n<p>The type of the expression <code>*ptr</code> is <code>integers</code> - thus, </p>\n\n<pre><code>sizeof *ptr == sizeof (integers) == sizeof (int) + sizeof (int)\n</code></pre>\n\n<p>You cannot determine the size of the allocated buffer by looking at the pointer (it doesn't store any metadata about the buffer size).  You will have to keep track of that information separately. </p>\n\n<p><strong>Edit</strong></p>\n\n<p>Note that you can do something like the following:</p>\n\n<pre><code> integers (*foo)[10] = malloc( sizeof *foo );\n if ( foo )\n   printf( \"sizeof *foo = %zu\\n\", sizeof *foo );\n</code></pre>\n\n<p>and that will give you the result you're expecting.  In this case, <code>foo</code> is a pointer to an <em>array</em> of <code>integers</code>, not to a single instance of <code>integers</code>, so <code>sizeof *foo</code> will give you the size of the allocated array.  The downside is that you have to expliticly dereference <code>foo</code> before applying the subscript:</p>\n\n<pre><code>(*foo)[i].a = some_value();         // or foo[0][i].a\n(*foo)[i].b = some_other_value();   // or foo[0][i].b\n</code></pre>\n\n<p>This is normally done when you want to allocate an NxM array and make sure all the rows are contiguous:</p>\n\n<pre><code>integers (*foo)[10] = malloc( 10 * sizeof *foo );\n</code></pre>\n\n<p>will allocate a 10x10 array of <code>integers</code> such that the rows are all adjacent in memory.</p>\n\n<p>Also, a pointer to a 10-element array of <code>integers</code> is not compatible with a pointer to an 11-element array of <code>integers</code>, making it more difficult to write functions that can work with pointers to arrays of different sizes.  IOW, if you have a function declared as</p>\n\n<pre><code>void bar( integers (*foo)[10] ) { ... }\n</code></pre>\n\n<p>it can <em>only</em> work with Nx10 arrays of <code>integers</code>.  There are ways around this that involve varying levels of pain, but that's a topic for another day.</p>\n"}, {"tags": [], "owner": {"reputation": 26, "user_id": 12879591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98c1b8e2cd737fb4f40779734bd63e4f?s=128&d=identicon&r=PG&f=1", "display_name": "Kartikeya Gupta", "link": "https://stackoverflow.com/users/12879591/kartikeya-gupta"}, "is_accepted": true, "score": 1, "last_activity_date": 1591453760, "creation_date": 1591453760, "answer_id": 62233115, "question_id": 29809898, "link": "https://stackoverflow.com/questions/29809898/why-am-i-not-getting-the-correct-size-after-using-malloc-and-printing-using-size/62233115#62233115", "title": "Why am I not getting the correct size after using malloc and printing using sizeof?", "body": "<p>Well, I know that this question is pretty outdated but finding no suitable answer, I decided to write one.\nWhen specifying <code>sizeof(*ptr)</code>, you're actually trying to reach out for the size of data type you've stored in the variable that the pointer is pointing to( here its the first element of the array). Here, that's quite evidently 8.</p>\n\n<p>Even when you'll try to print <code>sizeof(ptr)</code>, you'll be again printing the size of the <strong>pointer address</strong> which by default is 8 bytes in GCC compilers as the data type is long unsigned int.</p>\n"}], "owner": {"reputation": 196, "user_id": 4086221, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a0c8f9bd967153b185cb538dedd2b981?s=128&d=identicon&r=PG&f=1", "display_name": "Adarsh Rao", "link": "https://stackoverflow.com/users/4086221/adarsh-rao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 62233115, "answer_count": 3, "score": 1, "last_activity_date": 1591453760, "creation_date": 1429740865, "question_id": 29809898, "link": "https://stackoverflow.com/questions/29809898/why-am-i-not-getting-the-correct-size-after-using-malloc-and-printing-using-size", "title": "Why am I not getting the correct size after using malloc and printing using sizeof?", "body": "<p>This is my code.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\ntypedef struct {\n    int a,b;\n    } integers;\n\nvoid main() {\n    integers *ptr = (integers *)malloc(10*sizeof(integers));\n    printf(\"%d\",sizeof(*ptr)); // prints 8\n\n}\n</code></pre>\n\n<p>From what I understand about Malloc, the above code should actually reserve 10x8=80 bytes of memory for ptr to point to. </p>\n\n<p>Why then does using sizeof(*ptr) give only 8? How do I find the total size being allocated for ptr?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 2, "creation_date": 1429739124, "post_id": 29809431, "comment_id": 47747002, "body": "You want <a href=\"https://en.wikipedia.org/wiki/Least_common_multiple\" rel=\"nofollow noreferrer\">LCM</a>, not GCD."}, {"owner": {"reputation": 3383, "user_id": 4446875, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/EilfZ.jpg?s=128&g=1", "display_name": "Aify", "link": "https://stackoverflow.com/users/4446875/aify"}, "edited": false, "score": 4, "creation_date": 1429739136, "post_id": 29809431, "comment_id": 47747009, "body": "Why don&#39;t you just multiply the inputs together to get that number..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1864610"}, "edited": false, "score": 2, "creation_date": 1429739244, "post_id": 29809431, "comment_id": 47747056, "body": "See <a href=\"https://stackoverflow.com/help/on-topic\">help center</a>, point #3: <i>Questions asking for homework help must include a summary of the work you&#39;ve done so far to solve the problem, and a description of the difficulty you are having solving it.</i>"}], "answers": [{"tags": [], "owner": {"reputation": 68, "user_id": 3458302, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001422838322/picture?type=large", "display_name": "vishwajit kumar vishnu", "link": "https://stackoverflow.com/users/3458302/vishwajit-kumar-vishnu"}, "is_accepted": false, "score": 0, "last_activity_date": 1429739957, "last_edit_date": 1592644375, "creation_date": 1429739957, "answer_id": 29809683, "question_id": 29809431, "link": "https://stackoverflow.com/questions/29809431/how-to-find-an-integer-between-1-and-1-100-000-000-divisible-by-two-given-intege/29809683#29809683", "title": "How to find an integer between 1 and 1,100,000,000 divisible by two given integers by input (C)", "body": "<p>Since you have seen threads of GCD, then i will suggest that to find LCM simply divide the number n by the GCD. Reason:</p>\n<h2>LCM* GCD=NUMBER(n)</h2>\n<p>So to write a program for a number n that is divisible by two user input value you must do it in following way:</p>\n<pre><code>if(n%LCM==0){\n   printf(&quot;The number is divisible\\n&quot;);\n}\nelse {\n    printf(&quot;number is not divisible&quot;);\n}\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 4821558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4be50a9323766512d636bfddef35232a?s=128&d=identicon&r=PG&f=1", "display_name": "lhenze3", "link": "https://stackoverflow.com/users/4821558/lhenze3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1429739957, "creation_date": 1429739033, "question_id": 29809431, "link": "https://stackoverflow.com/questions/29809431/how-to-find-an-integer-between-1-and-1-100-000-000-divisible-by-two-given-intege", "title": "How to find an integer between 1 and 1,100,000,000 divisible by two given integers by input (C)", "body": "<p>I have a homework assignment that is to find and integer between 1 and 1,100,000,000 that is divisible by two inputted numbers from the user. I have seen many threads on finding the GCD of two given integers but never one that seems to do it in reverse as this one does. Any help?</p>\n"}, {"tags": ["java", "c", "reference", "garbage-collection", "java-native-interface"], "answers": [{"comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1429921256, "post_id": 29811041, "comment_id": 47844978, "body": "The &#39;byte buffer <code>bb</code>&#39; does not get freed. It doesn&#39;t exist. <code>bb</code> is a <i>reference,</i> not an object. There is a fundamental confusion here and in the question between references and objects."}, {"owner": {"reputation": 40731, "user_id": 581205, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/2be517e3b51c48a1c514627a87a1dd53?s=128&d=identicon&r=PG&f=1", "display_name": "maaartinus", "link": "https://stackoverflow.com/users/581205/maaartinus"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1429923185, "post_id": 29811041, "comment_id": 47845356, "body": "@EJP I&#39;m pretty sure, I don&#39;t confuse objects and references, but I might have understand something wrong here. Whenever I write &quot;<code>x</code> gets free, I obviously mean, &quot;the object pointed by <code>x</code> get freed.&quot; Concerning <code>bb</code>, I assume that the call to <code>NewDirectByteBuffer</code> allocates a new byte buffer and returns a reference to it. Currently, I&#39;m unsure how it continues."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1429931115, "post_id": 29811041, "comment_id": 47846785, "body": "You&#39;re confusing freeing of local references by JNI on return with freeing of objects by GC when there are no more references."}], "tags": [], "owner": {"reputation": 40731, "user_id": 581205, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/2be517e3b51c48a1c514627a87a1dd53?s=128&d=identicon&r=PG&f=1", "display_name": "maaartinus", "link": "https://stackoverflow.com/users/581205/maaartinus"}, "is_accepted": true, "score": 0, "last_activity_date": 1429746771, "creation_date": 1429746771, "answer_id": 29811041, "question_id": 29809328, "link": "https://stackoverflow.com/questions/29809328/java-jni-reference-types-passing-bytebuffers-around/29811041#29811041", "title": "Java JNI Reference Types, passing ByteBuffers around", "body": "<p>Take my answer with a shovel of salt as it's too long ago.</p>\n\n<blockquote>\n  <p>I create and allocate DirectByteBuffer in native. I then pass this back to Java. Since DirectByteBuffer is allocated in C</p>\n</blockquote>\n\n<p>That's not exactly true. You allocated <code>bb</code> using <code>(*env)-&gt;NewDirectByteBuffer</code>, so it's JNI.</p>\n\n<p>You allocated <code>dp</code> using <code>malloc</code>, and that's a different thing. The <code>bb</code> is a Java object wrapping <code>dp</code>.</p>\n\n<blockquote>\n  <p>But a call to (*env)->GetObjectRefType() on the buffer object in JNI returns 1, meaning it's a local reference. Local references are said to be automatically freed by Java's GC when JNI method returns.</p>\n</blockquote>\n\n<p>This makes sense. The byte buffer <code>bb</code> gets freed, it's underlying memory <code>dp</code> does not.</p>\n\n<blockquote>\n  <p>should i use the (*env)->NewGlobalRef(env, bb) to turn the allocated buffer into Global ref?</p>\n</blockquote>\n\n<p>I guess so.</p>\n"}, {"comments": [{"owner": {"reputation": 40731, "user_id": 581205, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/2be517e3b51c48a1c514627a87a1dd53?s=128&d=identicon&r=PG&f=1", "display_name": "maaartinus", "link": "https://stackoverflow.com/users/581205/maaartinus"}, "edited": false, "score": 0, "creation_date": 1429923695, "post_id": 29859557, "comment_id": 47845444, "body": "Right, Java has a reference and when it loses it, <code>bb</code> may be GC&#39;ed. But this is probably not what the OP wants as then there would be no reason for allocating it via JNI, would it?"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 40731, "user_id": 581205, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/2be517e3b51c48a1c514627a87a1dd53?s=128&d=identicon&r=PG&f=1", "display_name": "maaartinus", "link": "https://stackoverflow.com/users/581205/maaartinus"}, "edited": false, "score": 0, "creation_date": 1429931198, "post_id": 29859557, "comment_id": 47846808, "body": "@maaartinus I have no idea what the OP wants or why the OP is allocating  it via JNI, and neither do you. I&#39;m just answering the question he asked."}, {"owner": {"reputation": 113, "user_id": 2092119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5d1407ea85d41fb05ce6b9d84be27cb8?s=128&d=identicon&r=PG", "display_name": "user2092119", "link": "https://stackoverflow.com/users/2092119/user2092119"}, "edited": false, "score": 0, "creation_date": 1429953540, "post_id": 29859557, "comment_id": 47851913, "body": "@EJP If i understood you correctly, the memory location pointed by native *dp (and allocated my malloc) will get freed (GC) if all references to it in Java/JNI are lost, just like any other object? And the only way to keep it is to always have a reference to it in Java or JNI (via global ref)?"}], "tags": [], "owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "is_accepted": false, "score": 0, "last_activity_date": 1429931449, "last_edit_date": 1429931449, "creation_date": 1429921147, "answer_id": 29859557, "question_id": 29809328, "link": "https://stackoverflow.com/questions/29809328/java-jni-reference-types-passing-bytebuffers-around/29859557#29859557", "title": "Java JNI Reference Types, passing ByteBuffers around", "body": "<p>Local references are freed when the JNI method returns. However if you return a local reference to Java code, obviosuly the Java code now has a reference. <em>Objects</em> can be <em>garbage-collected</em> when there are no more <em>references.</em> It isn't the same thing.</p>\n\n<blockquote>\n  <p>Since DirectByteBuffer is allocated in C, it resides in heap memory and is \"immune\" to Java's garbage collector, right?</p>\n</blockquote>\n\n<p>Wrong.</p>\n\n<blockquote>\n  <p>The only way to free it is from C using free()?</p>\n</blockquote>\n\n<p>Wrong. It is a Java object and is subject to GC like any other Java object. If you try to <code>free()</code> it you will get a crash.</p>\n\n<blockquote>\n  <p>But a call to (*env)->GetObjectRefType() on the buffer object in JNI returns 1, meaning it's a local reference.</p>\n</blockquote>\n\n<p>Correct.</p>\n\n<blockquote>\n  <p>Local references are said to be automatically freed by Java's GC when JNI method returns.</p>\n</blockquote>\n\n<p>No. You're mixing up objects and references. The reference is freed by JNI. The object <em>can be</em> freed when there are no more references.</p>\n\n<blockquote>\n  <p>Should i use the (*env)->NewGlobalRef(env, bb) to turn the allocated buffer into Global ref?</p>\n</blockquote>\n\n<p>Not unless you want to use it again in a subsequent JNI method without having it passed as a parameter.</p>\n"}], "owner": {"reputation": 113, "user_id": 2092119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5d1407ea85d41fb05ce6b9d84be27cb8?s=128&d=identicon&r=PG", "display_name": "user2092119", "link": "https://stackoverflow.com/users/2092119/user2092119"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 703, "favorite_count": 0, "accepted_answer_id": 29811041, "answer_count": 2, "score": 0, "last_activity_date": 1429931449, "creation_date": 1429738633, "question_id": 29809328, "link": "https://stackoverflow.com/questions/29809328/java-jni-reference-types-passing-bytebuffers-around", "title": "Java JNI Reference Types, passing ByteBuffers around", "body": "<p>I create and allocate DirectByteBuffer in native. I then pass this back to Java. Since DirectByteBuffer is allocated in C, it resides in heap memory and is \"immune\" to Java's garbage collector, right? The only way to free it is from C using free()?</p>\n\n<p>But a call to (*env)->GetObjectRefType() on the buffer object in JNI returns 1, meaning it's a local reference. Local references are said to be automatically freed by Java's GC when JNI method returns. Can someone clarify what is being freed by the GC in this case and should i use the (*env)->NewGlobalRef(env, bb) to turn the allocated buffer into Global ref?</p>\n\n<p>C:</p>\n\n<pre><code>JNIEXPORT jobject JNICALL Java_main_Main_byteBufferTest2(JNIEnv *env, jobject obj){\n    double *dp = malloc(sizeof(double)*100);\n    jobject bb = (*env)-&gt;NewDirectByteBuffer(env, (void*)dp, sizeof(double)*100);\n    return bb;\n}\n</code></pre>\n\n<p>Java:</p>\n\n<pre><code>ByteBuffer dbb = byteBufferTest2();\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 5663, "user_id": 4401293, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8e7aa14bcc48ad45b4c0d12cf5b4b147?s=128&d=identicon&r=PG", "display_name": "Quality Catalyst", "link": "https://stackoverflow.com/users/4401293/quality-catalyst"}, "edited": false, "score": 0, "creation_date": 1429738546, "post_id": 29809277, "comment_id": 47746700, "body": "Please read this article: <a href=\"http://stackoverflow.com/help/how-to-ask\">How to ask</a> and consider removing your question. We are not here to do your homework, but happy to help if you have a specific programming issue."}, {"owner": {"reputation": 65, "user_id": 4821506, "user_type": "registered", "profile_image": "https://graph.facebook.com/875655125813335/picture?type=large", "display_name": "KayKoder", "link": "https://stackoverflow.com/users/4821506/kaykoder"}, "reply_to_user": {"reputation": 5663, "user_id": 4401293, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8e7aa14bcc48ad45b4c0d12cf5b4b147?s=128&d=identicon&r=PG", "display_name": "Quality Catalyst", "link": "https://stackoverflow.com/users/4401293/quality-catalyst"}, "edited": false, "score": 0, "creation_date": 1429740781, "post_id": 29809277, "comment_id": 47747763, "body": "sorry i have changed it now, i just wanted to know how to input a random word into the grid"}, {"owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 0, "creation_date": 1429741295, "post_id": 29809277, "comment_id": 47747976, "body": "What happened to <code>insertHorizontally</code>? Most of the code is missing and what&#39;s there makes no sense."}, {"owner": {"reputation": 65, "user_id": 4821506, "user_type": "registered", "profile_image": "https://graph.facebook.com/875655125813335/picture?type=large", "display_name": "KayKoder", "link": "https://stackoverflow.com/users/4821506/kaykoder"}, "edited": false, "score": 0, "creation_date": 1429741512, "post_id": 29809277, "comment_id": 47748069, "body": "its in the code snippet isnt it? I havent removed anything."}, {"owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 1, "creation_date": 1429742351, "post_id": 29809277, "comment_id": 47748427, "body": "We see the same thing you see and the <code>insertHorizontally</code> function is incomplete. The function doesn&#39;t even have a closing brace."}, {"owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 1, "creation_date": 1429746366, "post_id": 29809277, "comment_id": 47749849, "body": "Ask yourself what  you&#39;re doing with the <code>word</code> and <code>array</code> parameters that are passed into <code>insertHorizontally</code>. You&#39;re overwriting both of them with nonsense. You&#39;re setting <code>array</code> to point to the <code>rand</code> function and you&#39;re overwriting the address contained in <code>word</code>. You shouldn&#39;t be assigning anything to either of these parameters."}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 4821506, "user_type": "registered", "profile_image": "https://graph.facebook.com/875655125813335/picture?type=large", "display_name": "KayKoder", "link": "https://stackoverflow.com/users/4821506/kaykoder"}, "edited": false, "score": 0, "creation_date": 1429815078, "post_id": 29811504, "comment_id": 47790409, "body": "Thank you this worked perfectly, it seems so obvious now i see it"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 65, "user_id": 4821506, "user_type": "registered", "profile_image": "https://graph.facebook.com/875655125813335/picture?type=large", "display_name": "KayKoder", "link": "https://stackoverflow.com/users/4821506/kaykoder"}, "edited": false, "score": 0, "creation_date": 1429815562, "post_id": 29811504, "comment_id": 47790692, "body": "I think <code>HEIGHT</code> &lt;--&gt; <code>WIDTH</code>."}, {"owner": {"reputation": 65, "user_id": 4821506, "user_type": "registered", "profile_image": "https://graph.facebook.com/875655125813335/picture?type=large", "display_name": "KayKoder", "link": "https://stackoverflow.com/users/4821506/kaykoder"}, "edited": false, "score": 0, "creation_date": 1429823804, "post_id": 29811504, "comment_id": 47795612, "body": "ye i noticed but i don&#39;t want to switch them until i finish the program in case i manage to botch things up"}], "tags": [], "owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "is_accepted": true, "score": 0, "last_activity_date": 1429749424, "creation_date": 1429749424, "answer_id": 29811504, "question_id": 29809277, "link": "https://stackoverflow.com/questions/29809277/a-wordsearch-c-program-assignment/29811504#29811504", "title": "A wordsearch c program assignment", "body": "<pre><code>array=&amp;myArray;//overwrite\narray=&amp;rand();//overwrite?, `&amp;rand()` invalid\nword = (char *) malloc(sizeof(char) * HEIGHT);//overwrite\nsizeof(word)//pointer size, change to `char words[] = \"free\";...strlen(word)\n</code></pre>\n\n<p>write in a horizontal direction at random positions:</p>\n\n<pre><code>void insertHorizontally(char*word, char** array)\n{\n    int word_len = 4;\n    int i = rand() % (HEIGHT-word_len+1);\n    int j = rand() % WIDTH;\n    int k;\n    for(k=0;k &lt; word_len;k++) {\n        array[j][i+k] = word[k];\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 4821506, "user_type": "registered", "profile_image": "https://graph.facebook.com/875655125813335/picture?type=large", "display_name": "KayKoder", "link": "https://stackoverflow.com/users/4821506/kaykoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 453, "favorite_count": 0, "accepted_answer_id": 29811504, "answer_count": 1, "score": -5, "last_activity_date": 1429749424, "creation_date": 1429738383, "last_edit_date": 1429745392, "question_id": 29809277, "link": "https://stackoverflow.com/questions/29809277/a-wordsearch-c-program-assignment", "title": "A wordsearch c program assignment", "body": "<p>EDIT: My new question is how can i put words in a random location on the grid, ive tried like below but just get a single random letter in the same spot. And also have i done the functions correctly as i feel that that may be the issue.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>#include &lt;stdlib.h&gt;\r\n#include &lt;stdio.h&gt;\r\n#include &lt;time.h&gt;\r\n\r\nchar **createArray(); //function prototype\r\nvoid printArray(char** array);\r\nvoid insertHorizontally(char*word, char** array);\r\n#define WIDTH 16\r\n#define HEIGHT 16\r\nchar** myArray; //global array\r\nvoid main()\r\n{\r\n\tchar words[4] = {'f','r','e','e'};\r\n\tmyArray = createArray();\r\n\tinsertHorizontally(words,myArray);\r\n\tprintArray(myArray);\r\n\t\r\n}\r\n\t//Creates a 2D array of WIDTH * HEIGHT and returns a pointer to it\r\nchar **createArray()\r\n{\r\n\tint i,j;\r\n\tchar **array = (char **) malloc(sizeof(char *) * WIDTH);\r\n\tfor(i=0; i&lt;WIDTH; i++)\r\n\t{\r\n\t\tarray[i] = (char *) malloc(sizeof(char) * HEIGHT);\r\n\t}\r\n \tfor(i=0; i&lt;WIDTH; i++)\r\n \t{\r\n\t\tfor(j=0; j&lt;HEIGHT; j++)\r\n \t\t{\r\n\t\t\t //words[i][j] = 65 + rand() % 25;\r\n\t\t\t array[i][j] = '_';\r\n \t\t}\r\n \t}\r\n \treturn array;\r\n}\r\nvoid printArray(char** array)\r\n{\r\n\tint i,j;\r\n\tarray =myArray;\r\n\tfor(i=0; i&lt;WIDTH; i++)\r\n \t{\r\n\t\tfor(j=0; j&lt;HEIGHT; j++)\r\n \t\t{\r\n\t\t\tprintf(\" %c \", array[i][j]);\r\n\t\t}\r\n\t\tprintf(\"\\n\");\r\n\t}\r\n}\r\nvoid insertHorizontally(char*word, char** array)\r\n{\r\n\tarray=&amp;myArray;\r\n\tarray=&amp;rand();\r\n\tword = (char *) malloc(sizeof(char) * HEIGHT);\r\n\tint i,j,a;\r\n\tfor(j = 0; j&lt;HEIGHT; j++)\r\n\t{\r\n\t\tfor(a=0;a&lt;sizeof(word);a++)\t\r\n\t\t{\r\n\t\t\tarray[i][j] = *word;\r\n\t\t}\r\n\t}\r\n\t\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["c", "cmake"], "answers": [{"tags": [], "owner": {"reputation": 9001, "user_id": 1486118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60c6fce6b29f584a305c76ddd722a512?s=128&d=identicon&r=PG", "display_name": "Guillaume", "link": "https://stackoverflow.com/users/1486118/guillaume"}, "is_accepted": true, "score": 2, "last_activity_date": 1429738845, "creation_date": 1429738845, "answer_id": 29809383, "question_id": 29809178, "link": "https://stackoverflow.com/questions/29809178/link-to-library-target-from-different-subdirectory/29809383#29809383", "title": "Link to library target from different subdirectory", "body": "<p>You forgot the <code>target</code> parameter in your call to <code>target_link_libraries</code>, it should be:</p>\n\n<pre><code>target_link_libraries(main lib)\n</code></pre>\n"}], "owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 611, "favorite_count": 0, "accepted_answer_id": 29809383, "answer_count": 1, "score": -1, "last_activity_date": 1429738845, "creation_date": 1429738053, "question_id": 29809178, "link": "https://stackoverflow.com/questions/29809178/link-to-library-target-from-different-subdirectory", "title": "Link to library target from different subdirectory", "body": "<p>I have the following set-up:</p>\n\n<p>In a folder <code>lib</code>:</p>\n\n<h1>lib.h</h1>\n\n<pre><code>#ifndef LIB_H_\n#define LIB_H_\n\nint fun(int i);\n\n#endif\n</code></pre>\n\n<h1>lib.c</h1>\n\n<pre><code>#include \"lib.h\"\n\nint fun(int i) {\n  return i;\n}\n</code></pre>\n\n<h1>CMakeLists.txt</h1>\n\n<pre><code>add_library(lib SHARED lib.c)\n</code></pre>\n\n<p>In a directory <code>src</code>:</p>\n\n<h1>main.c</h1>\n\n<pre><code>#include \"lib.h\"\nint main () {\n  return fun(0);\n}\n</code></pre>\n\n<h1>CMakeLists.txt</h1>\n\n<pre><code>add_executable(main main.c)\ntarget_link_libraries(lib)\n</code></pre>\n\n<p>and finally in their common parent directory:</p>\n\n<h1>CMakeLists.txt</h1>\n\n<pre><code>include_directories(lib)\nadd_subdirectory(lib)\nadd_subdirectory(src)\n</code></pre>\n\n<p>When I try to build my project with</p>\n\n<pre><code>cmake\nmake\n</code></pre>\n\n<p>I get the following linker error:</p>\n\n<pre><code>CMakeFiles/main.dir/main.o: In function `main':\nmain.c:(.text+0xa): undefined reference to `fun'\n</code></pre>\n\n<p>What am I doing wrong here?</p>\n"}, {"tags": ["c", "multithreading"], "comments": [{"owner": {"reputation": 29810, "user_id": 423170, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/H9kNQ.png?s=128&g=1", "display_name": "Frxstrem", "link": "https://stackoverflow.com/users/423170/frxstrem"}, "edited": false, "score": 0, "creation_date": 1429737567, "post_id": 29809026, "comment_id": 47746203, "body": "You only posted the part of the code that calls the thread; you should also post the <code>Multi_Calculate</code> method that runs each thread. As far as I can tell, there&#39;s nothing in the code you posted that indicates what might be wrong."}, {"owner": {"reputation": 1007, "user_id": 4518130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/995292c4ecafd61eef01cc6d09314974?s=128&d=identicon&r=PG&f=1", "display_name": "beasone", "link": "https://stackoverflow.com/users/4518130/beasone"}, "reply_to_user": {"reputation": 29810, "user_id": 423170, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/H9kNQ.png?s=128&g=1", "display_name": "Frxstrem", "link": "https://stackoverflow.com/users/423170/frxstrem"}, "edited": false, "score": 0, "creation_date": 1429737890, "post_id": 29809026, "comment_id": 47746375, "body": "I just updated my code."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1429738690, "post_id": 29809026, "comment_id": 47746792, "body": "Why do you <code>malloc()</code> your <code>locate_neighbor</code>, only to assign to it later, leaking the memory?"}, {"owner": {"reputation": 1007, "user_id": 4518130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/995292c4ecafd61eef01cc6d09314974?s=128&d=identicon&r=PG&f=1", "display_name": "beasone", "link": "https://stackoverflow.com/users/4518130/beasone"}, "edited": false, "score": 0, "creation_date": 1429738849, "post_id": 29809026, "comment_id": 47746872, "body": "I don&#39;t free any pointers. Because I worried about freeing pointer at inappropriate  time, so I don&#39;t free anything."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1429738935, "post_id": 29809026, "comment_id": 47746914, "body": "That&#39;s inadvisable, and doesn&#39;t explain why you even <code>malloc()</code> that memory if you never use it. Also, is <code>root_addr</code> global? I don&#39;t see the definition anywhere in the code you&#39;ve provided."}, {"owner": {"reputation": 1007, "user_id": 4518130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/995292c4ecafd61eef01cc6d09314974?s=128&d=identicon&r=PG&f=1", "display_name": "beasone", "link": "https://stackoverflow.com/users/4518130/beasone"}, "edited": false, "score": 0, "creation_date": 1429739123, "post_id": 29809026, "comment_id": 47747001, "body": "root_addr is global. The original code is very long, I only post key part of it. I use it here: locate_neighbor=root_addr[root_level][leaf_addr].head;"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1429739370, "post_id": 29809026, "comment_id": 47747100, "body": "*sigh* that doesn&#39;t use the memory allocated by <code>malloc()</code>, it just reassigns <code>locate_neighbor</code>. If you don&#39;t understand that distinction, you&#39;re not ready to write multi-threaded code in C."}, {"owner": {"reputation": 1007, "user_id": 4518130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/995292c4ecafd61eef01cc6d09314974?s=128&d=identicon&r=PG&f=1", "display_name": "beasone", "link": "https://stackoverflow.com/users/4518130/beasone"}, "edited": false, "score": 0, "creation_date": 1429739576, "post_id": 29809026, "comment_id": 47747189, "body": "Can you give me more details ?"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1429739719, "post_id": 29809026, "comment_id": 47747260, "body": "You need to familiarize yourself with some rather basic concepts regarding pointers and memory management in C. I&#39;m not going to explain this in a comment, and your question is not useful if there are dragons like this lurking in code you haven&#39;t posted. Try a tutorial on C pointers and memory management."}, {"owner": {"reputation": 1007, "user_id": 4518130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/995292c4ecafd61eef01cc6d09314974?s=128&d=identicon&r=PG&f=1", "display_name": "beasone", "link": "https://stackoverflow.com/users/4518130/beasone"}, "edited": false, "score": 0, "creation_date": 1429739799, "post_id": 29809026, "comment_id": 47747303, "body": "Is this problem resulting that the time is not reduced by multithread ?"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1429740002, "post_id": 29809026, "comment_id": 47747407, "body": "Not likely. While increasing your memory usage <i>could</i> slow down your program, this memory is never used and unlikely to impact runtime. Unfortunately, this error is symptomatic of a deep misunderstanding of C."}], "answers": [{"tags": [], "owner": {"reputation": 888, "user_id": 4618308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/moha6.jpg?s=128&g=1", "display_name": "mrflash818", "link": "https://stackoverflow.com/users/4618308/mrflash818"}, "is_accepted": false, "score": 0, "last_activity_date": 1429739984, "creation_date": 1429739984, "answer_id": 29809692, "question_id": 29809026, "link": "https://stackoverflow.com/questions/29809026/using-multithreads-to-calculate-data-but-it-doest-reduce-the-time/29809692#29809692", "title": "Using multithreads to calculate data but it does&#39;t reduce the time", "body": "<p>It could be a bug, but if you feel the code is correct, then the overhead of parallelization, mutexes and such, might mean the overall performance (runtime) is the same as for the non-parallelized code, for the size of elements to compute against.</p>\n\n<p>It might be an interesting study, to do looped code, single-threaded, and the threaded code, against very large arrays (100k elements?), and see if the results start to diverge to be faster in the parallel/threaded code?</p>\n\n<p><code>Amdahl's law, also known as Amdahl's argument,[1] is used to find the maximum expected improvement to an overall system when only part of the system is improved. It is often used in parallel computing to predict the theoretical maximum speedup using multiple processors.</code></p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Amdahl%27s_law\" rel=\"nofollow\">https://en.wikipedia.org/wiki/Amdahl%27s_law</a></p>\n"}, {"tags": [], "owner": {"reputation": 429, "user_id": 1795794, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9541c33aba61aeefe4a1fcb0a6250fce?s=128&d=identicon&r=PG", "display_name": "Bing Bang", "link": "https://stackoverflow.com/users/1795794/bing-bang"}, "is_accepted": false, "score": 0, "last_activity_date": 1429740546, "creation_date": 1429740546, "answer_id": 29809831, "question_id": 29809026, "link": "https://stackoverflow.com/questions/29809026/using-multithreads-to-calculate-data-but-it-doest-reduce-the-time/29809831#29809831", "title": "Using multithreads to calculate data but it does&#39;t reduce the time", "body": "<p>You don't always gain speed by multi-threading a program. There is a certain amount of overhead that comes with threading. Unless there is enough inefficiencies in the non-threaded code to make up for the overhead, you'll not see an improvement. A lot can be learned about how multi-threading works even if the program you write ends up running slower.</p>\n"}, {"tags": [], "owner": {"reputation": 1007, "user_id": 4518130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/995292c4ecafd61eef01cc6d09314974?s=128&d=identicon&r=PG&f=1", "display_name": "beasone", "link": "https://stackoverflow.com/users/4518130/beasone"}, "is_accepted": true, "score": 0, "last_activity_date": 1429751745, "creation_date": 1429751745, "answer_id": 29811871, "question_id": 29809026, "link": "https://stackoverflow.com/questions/29809026/using-multithreads-to-calculate-data-but-it-doest-reduce-the-time/29811871#29811871", "title": "Using multithreads to calculate data but it does&#39;t reduce the time", "body": "<p>I know why this happen now. The problem is that I use clock() to calculate the time. It is wrong when it is used in multithread program because this function will multiple the real time based on the num of threads. When I use time() to calculate the time, the result is correct.</p>\n"}], "owner": {"reputation": 1007, "user_id": 4518130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/995292c4ecafd61eef01cc6d09314974?s=128&d=identicon&r=PG&f=1", "display_name": "beasone", "link": "https://stackoverflow.com/users/4518130/beasone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 29811871, "answer_count": 3, "score": 0, "last_activity_date": 1429752161, "creation_date": 1429737417, "last_edit_date": 1429752161, "question_id": 29809026, "link": "https://stackoverflow.com/questions/29809026/using-multithreads-to-calculate-data-but-it-doest-reduce-the-time", "title": "Using multithreads to calculate data but it does&#39;t reduce the time", "body": "<p>My CPU has four cores,MAC os. I use 4 threads to calculate an array. But the time of calculating does't being reduced. If I don't use multithread, the time  of calculating is about 52 seconds. But even I use 4 multithreads, or 2 threads, the time doesn't change.</p>\n\n<p>(I know why this happen now. The problem is that I use clock() to calculate the time. It is wrong when it is used in multithread program because this function will multiple the real time based on the num of threads. When I use time() to calculate the time, the result is correct.)\nThe output of using 2 threads:</p>\n\n<pre><code>id 1 use time = 43 sec to finish \nid 0 use time = 51 sec to finish \ntime for round 1 = 51 sec\nid 1 use time = 44 sec to finish \nid 0 use time = 52 sec to finish \ntime for round 2 = 52 sec\n</code></pre>\n\n<p>id 1 and id 0 is thread 1 and thread 0. <code>time for round</code> is the time of finishing two threads. If I don't use multithread, <code>time for round</code> is also about 52 seconds.\nThis is the part of calling 4 threads:</p>\n\n<pre><code> for(i=1;i&lt;=round;i++)\n{\n    time_round_start=clock();\n    for(j=0;j&lt;THREAD_NUM;j++)\n    {\n        cal_arg[j].roundth=i;\n        pthread_create(&amp;thread_t_id[j], NULL, Multi_Calculate, &amp;cal_arg[j]);\n    }\n    for(j=0;j&lt;THREAD_NUM;j++)\n    {\n        pthread_join(thread_t_id[j], NULL);\n    }\n    time_round_end=clock();\n    int round_time=(int)((time_round_end-time_round_start)/CLOCKS_PER_SEC);\n\n        printf(\"time for round %d = %d sec\\n\",i,round_time);\n\n}\n</code></pre>\n\n<p>This is the code  inside the thread function:</p>\n\n<pre><code>void *Multi_Calculate(void *arg)\n{\nstruct multi_cal_data cal=*((struct multi_cal_data *)arg);\nint p_id=cal.thread_id;\nint i=0;\nint root_level=0;\nint leaf_addr=0;\nint neighbor_root_level=0;\nint neighbor_leaf_addr=0;\nNeighbor *locate_neighbor=(Neighbor *)malloc(sizeof(Neighbor));\n\nprintf(\"id:%d, start:%d end:%d,round:%d\\n\",p_id,cal.start_num,cal.end_num,cal.roundth);\n\nfor(i=cal.start_num;i&lt;=cal.end_num;i++)\n{\n\n    root_level=i/NUM_OF_EACH_LEVEL;\n    leaf_addr=i%NUM_OF_EACH_LEVEL;\n\n    if(root_addr[root_level][leaf_addr].node_value!=i)\n    {\n        //ignore, because this is a gap, no this node\n    }\n    else\n    {\n        int k=0;\n        locate_neighbor=root_addr[root_level][leaf_addr].head;\n        double tmp_credit=0;\n\n        for(k=0;k&lt;root_addr[root_level][leaf_addr].degree;k++)\n        {\n\n            neighbor_root_level=locate_neighbor-&gt;neighbor_value/NUM_OF_EACH_LEVEL;\n            neighbor_leaf_addr=locate_neighbor-&gt;neighbor_value%NUM_OF_EACH_LEVEL;\n\n\n            tmp_credit += root_addr[neighbor_root_level][neighbor_leaf_addr].g_credit[cal.roundth-1]/root_addr[neighbor_root_level][neighbor_leaf_addr].degree;\n\n            locate_neighbor=locate_neighbor-&gt;next;\n\n        }\n        root_addr[root_level][leaf_addr].g_credit[cal.roundth]=tmp_credit;\n\n    }\n}\n\n\n\nreturn 0;\n}\n</code></pre>\n\n<p>The array is very large, each thread calculate part of the array.\nIs there something wrong with my code?</p>\n"}, {"tags": ["c", "websocket", "webserver", "mongoose-web-server"], "answers": [{"comments": [{"owner": {"reputation": 5251, "user_id": 551436, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9f3ca1db737cdb15bbded04d021da48a?s=128&d=identicon&r=PG", "display_name": "arthurakay", "link": "https://stackoverflow.com/users/551436/arthurakay"}, "edited": false, "score": 0, "creation_date": 1429808994, "post_id": 29827357, "comment_id": 47786665, "body": "Returning <code>MG_FALSE</code> seems to do the trick. I swear I tried that yesterday to no avail, but maybe I had been staring at the code too long :-) Thanks!"}], "tags": [], "owner": {"reputation": 777, "user_id": 49889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b4f59071f058144327338eef555593c?s=128&d=identicon&r=PG", "display_name": "valenok", "link": "https://stackoverflow.com/users/49889/valenok"}, "is_accepted": true, "score": 1, "last_activity_date": 1432320927, "last_edit_date": 1432320927, "creation_date": 1429801318, "answer_id": 29827357, "question_id": 29808687, "link": "https://stackoverflow.com/questions/29808687/creating-a-dual-web-socket-server-with-mongoose/29827357#29827357", "title": "Creating a dual web/socket server with mongoose", "body": "<p>There are several ways to deal with that :</p>\n\n<ol>\n<li><p>Fix the example you have. Change this</p>\n\n<pre><code>mg_send_file(conn, \"index.html\", NULL);\nreturn MG_MORE;\n</code></pre>\n\n<p>to this</p>\n\n<pre><code>return MG_FALSE;\n</code></pre>\n\n<p>Don't forget to set \"document_root\" option.</p></li>\n<li><p>Use fossa - this is a library by the same vendor (Cesanta). Fossa is a superset of Mongoose, with richer and more clear API. Fossa uses different events for plain HTTP and Websocket request. Here is an example: <a href=\"https://github.com/cesanta/fossa/blob/master/examples/websocket_chat/websocket_chat.c\" rel=\"nofollow\">https://github.com/cesanta/fossa/blob/master/examples/websocket_chat/websocket_chat.c</a></p></li>\n</ol>\n"}], "owner": {"reputation": 5251, "user_id": 551436, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9f3ca1db737cdb15bbded04d021da48a?s=128&d=identicon&r=PG", "display_name": "arthurakay", "link": "https://stackoverflow.com/users/551436/arthurakay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3557, "favorite_count": 0, "accepted_answer_id": 29827357, "answer_count": 1, "score": 1, "last_activity_date": 1432320927, "creation_date": 1429736316, "last_edit_date": 1429736579, "question_id": 29808687, "link": "https://stackoverflow.com/questions/29808687/creating-a-dual-web-socket-server-with-mongoose", "title": "Creating a dual web/socket server with mongoose", "body": "<p>I'm trying to port an example I've built with Node.js, Express and Socket.io into mongoose -- but I'm having trouble getting the created server to respond to both WebSocket connections and generic HTTP requests.</p>\n\n<p>I started by copying the <a href=\"https://github.com/cesanta/mongoose/blob/master/examples/web_server/web_server.c\" rel=\"nofollow\">web_server</a> example from mongoose, which simply creates an HTTP server. In this example line 384 calls <code>mg_create_server(NULL, EV_HANDLER)</code> where <code>EV_HANDLER</code> is actually NULL -- so all HTTP requests to the server just map appropriately to the \"document_root\" as you would expect. <strong>So far, so good.</strong></p>\n\n<p>However, when I look at the various WebSocket examples that ship with mongoose, I see that the <code>mg_create_server(server, handler)</code> calls have an actual handler method defined -- something like this:</p>\n\n<pre><code>static int ev_handler(struct mg_connection *conn, enum mg_event ev) {\n    switch (ev) {\n        case MG_REQUEST:\n            if (conn-&gt;is_websocket) {\n                handle_websocket_message(conn);\n                return MG_TRUE;\n            } \n            else {\n                mg_send_file(conn, \"index.html\", NULL);  // Return MG_MORE after!\n                return MG_MORE;\n            }\n        case MG_WS_CONNECT:\n            // New websocket connection. Send connection ID back to the client.\n          conn-&gt;connection_param = calloc(1, sizeof(struct conn_data));\n          mg_websocket_printf(conn, WEBSOCKET_OPCODE_TEXT, \"id %p\", conn);\n          return MG_FALSE;\n        case MG_CLOSE:\n            free(conn-&gt;connection_param);\n            return MG_TRUE;\n        case MG_AUTH:\n            return MG_TRUE;\n        default:\n            return MG_FALSE;\n    }\n}\n</code></pre>\n\n<p>In these examples, the <code>MG_REQUEST</code> case manually returns \"index.html\" for <strong>any request</strong> which is not coming from a WebSocket... great for the simple examples, but it doesn't help me understand how to host a website AND socket connections on the same server.</p>\n\n<p>I tried simply porting the <code>ev_handler</code> method from the WebSocket examples into the \"web_server\" example, but the HTTP requests seem to just hang and never resolve.</p>\n\n<p>Any help would be appreciated!</p>\n"}, {"tags": ["c", "pointers", "embedded", "pic", "pic32"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1429737279, "post_id": 29808642, "comment_id": 47746022, "body": "What compiler are you using?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1429737419, "post_id": 29808642, "comment_id": 47746117, "body": "What type is <code>buffer</code>?  If <code>uint8_t buffer[]</code>, then <code>&lt;&lt; (8*(3-byte_address));</code> may be a problem depending in <code>int</code> size."}, {"owner": {"reputation": 191, "user_id": 1572217, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/56b636d20e314ee51e5e43234a64ef9f?s=128&d=identicon&r=PG", "display_name": "Drew", "link": "https://stackoverflow.com/users/1572217/drew"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1429757647, "post_id": 29808642, "comment_id": 47753337, "body": "I&#39;m using xc32 in MPLAB X. buffer is an array of BYTE type, but flash word is 32bit so even the max bit-shift of 24 should be ok."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1429758544, "post_id": 29808642, "comment_id": 47753591, "body": "Note: <code>flash_word</code> type is irrelevant concerning <code>buffer[buffer_index] &lt;&lt; (8*(3-byte_address))</code>.  If shifting 24 is OK depends on <code>int</code> size, not <code>flash_word</code> size.  IAC, xc32 likely uses a 32-bit <code>int</code> and the shift is not a problem."}], "answers": [{"comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 1, "creation_date": 1429797922, "post_id": 29825718, "comment_id": 47778043, "body": "Your explanation is scary, since you seem to assume C&#39;s pointer arithmetic is done in bytes, which isn&#39;t true."}, {"owner": {"reputation": 191, "user_id": 1572217, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/56b636d20e314ee51e5e43234a64ef9f?s=128&d=identicon&r=PG", "display_name": "Drew", "link": "https://stackoverflow.com/users/1572217/drew"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1429798803, "post_id": 29825718, "comment_id": 47778727, "body": "Well, it only has to work on on one device (a pic32). And it appears that it is done in bytes."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1429799488, "post_id": 29825718, "comment_id": 47779318, "body": "In C, if you have <code>INT16 array[10];</code>, then the expression <code>array[1] = 3;</code> is exactly the same as <code>*(array + 1) = 3;</code>. That addition happens in units of <code>INT16</code>, whatever its actual size in bytes may be."}, {"owner": {"reputation": 191, "user_id": 1572217, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/56b636d20e314ee51e5e43234a64ef9f?s=128&d=identicon&r=PG", "display_name": "Drew", "link": "https://stackoverflow.com/users/1572217/drew"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1429821319, "post_id": 29825718, "comment_id": 47794222, "body": "Ah thanks, I see what you mean now. The address are for bytes, but doing &quot;pointer +1&quot; increases the address by whatever the size of the pointer type is, not necessarily 1."}], "tags": [], "owner": {"reputation": 191, "user_id": 1572217, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/56b636d20e314ee51e5e43234a64ef9f?s=128&d=identicon&r=PG", "display_name": "Drew", "link": "https://stackoverflow.com/users/1572217/drew"}, "is_accepted": false, "score": 0, "last_activity_date": 1429797447, "creation_date": 1429797447, "answer_id": 29825718, "question_id": 29808642, "link": "https://stackoverflow.com/questions/29808642/on-a-pic32-how-are-arrays-of-int16s-allocated-in-memory/29825718#29825718", "title": "On a PIC32, how are arrays of INT16&#39;s allocated in memory?", "body": "<p>Ok I got it! I created some const arrays of different types and took a look at them in memory using the debugger. It turns out... they're all just laid out sequentially like you'd expect. No padding.</p>\n\n<p>Here's the trick: each BYTE has its own address, not each word(32bits). So after writing a bunch of int16's to flash you can just access them normally using a pointer.</p>\n\n<p>I had mistakenly assumed that array[a] of INT16 was equivalent to <code>*(array+a)</code>, but it's aware of the data size, so it's actually equivalent to <code>*(array+(a*VARIABLE_SIZE))</code></p>\n"}], "owner": {"reputation": 191, "user_id": 1572217, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/56b636d20e314ee51e5e43234a64ef9f?s=128&d=identicon&r=PG", "display_name": "Drew", "link": "https://stackoverflow.com/users/1572217/drew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 313, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1429797447, "creation_date": 1429736173, "question_id": 29808642, "link": "https://stackoverflow.com/questions/29808642/on-a-pic32-how-are-arrays-of-int16s-allocated-in-memory", "title": "On a PIC32, how are arrays of INT16&#39;s allocated in memory?", "body": "<p>Basically I have a bunch of 2 byte ints written sequentially in 32bit flash memory. How do I access these as an array of int16's?</p>\n\n<p>I wrote the array irrespective of word boundaries. But I could add padding so that the array starts on a word boundary if necessary.</p>\n\n<p>Here's my code that writes the flash memory (basically it just combines every 4 bytes into a word and then writes that word to the flash):</p>\n\n<pre><code>   for(flash_page = 0; flash_page &lt; protocol_pages; flash_page++){ //loop through all the pages\n       for(flash_address = 0; flash_address &lt; NUMBER_OF_INSTRUCTIONS_IN_PAGE; flash_address++){ //loop through all the words in the page\n           for (byte_address = 0; byte_address &lt; 4; byte_address++){ //loop through the byte in each word\n               buffer_check();\n               flash_word += buffer[buffer_index] &lt;&lt; (8*(3-byte_address));\n               buffer_index++;\n               bytes_written++;\n               if(bytes_written &gt;= data_length)\n                   break;\n           }\n           ///////Write word here\n           NVMWriteWord((void*) &amp;(proto_data_addr[flash_page][flash_address]), flash_word);\n           flash_word = 0;\n           if(bytes_written &gt;= data_length)\n                break;\n       }\n       if(bytes_written &gt;= data_length)\n            break;\n   }\n</code></pre>\n\n<p>Mixed into this block of bytes is sequences of 2 byte ints strung end to end. How can I access them as an array once they're written in the flash memory? Do I have to pad the arrays so that there are 2 int16's in every word?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c", "arrays", "char", "integer"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 5, "creation_date": 1429736339, "post_id": 29808605, "comment_id": 47745521, "body": "May be a good idea to give some sample input, expected output and actual output."}, {"owner": {"reputation": 6045, "user_id": 260149, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/4bc8281ffce4ae99edaa020c54da6add?s=128&d=identicon&r=PG", "display_name": "Michas", "link": "https://stackoverflow.com/users/260149/michas"}, "edited": false, "score": 0, "creation_date": 1429736358, "post_id": 29808605, "comment_id": 47745534, "body": "It would be nice to add some comments into code."}, {"owner": {"reputation": 683, "user_id": 4196542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fed5f5d87d99e2bcf6d21b77e9950dab?s=128&d=identicon&r=PG", "display_name": "crashxxl", "link": "https://stackoverflow.com/users/4196542/crashxxl"}, "edited": false, "score": 0, "creation_date": 1429736945, "post_id": 29808605, "comment_id": 47745845, "body": "Tell me if i understand, you sort a char array according to the asci value, then you want to print these value in the order ?"}, {"owner": {"reputation": 6045, "user_id": 260149, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/4bc8281ffce4ae99edaa020c54da6add?s=128&d=identicon&r=PG", "display_name": "Michas", "link": "https://stackoverflow.com/users/260149/michas"}, "edited": false, "score": 0, "creation_date": 1429737228, "post_id": 29808605, "comment_id": 47745995, "body": "There are other problems with this code, but order of ints looks, more or less, fine for me."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1429738809, "post_id": 29808605, "comment_id": 47746860, "body": "<code>scanf(&quot;%s&quot;, &amp;c)</code> is dreadfully wrong.  You are scanning an indeterminate number of chars and trying to store the result into the space reserved for a single one.  Moreover, you are skipping leading whitespace, and even if you only got one char at a time, you would still need storeage for at least two, because the <code>%s</code> field descriptor instructs scanf that the scanned value must be a nul-terminated string.  Use <code>c = getchar()</code> instead."}, {"owner": {"reputation": 200780, "user_id": 116908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54d38793d7a407446999b33b81d607fd?s=128&d=identicon&r=PG", "display_name": "Carl Norum", "link": "https://stackoverflow.com/users/116908/carl-norum"}, "edited": false, "score": 0, "creation_date": 1429744282, "post_id": 29808605, "comment_id": 47749109, "body": "1. <code>sizeof(char)</code> is <code>1</code>. 2. You don&#39;t have to cast the return value of <code>malloc</code> in a C program."}], "answers": [{"comments": [{"owner": {"reputation": 200780, "user_id": 116908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54d38793d7a407446999b33b81d607fd?s=128&d=identicon&r=PG", "display_name": "Carl Norum", "link": "https://stackoverflow.com/users/116908/carl-norum"}, "edited": false, "score": 0, "creation_date": 1429743828, "post_id": 29810422, "comment_id": 47748948, "body": "This answer keeps many of the original&#39;s bugs (buffer overflows, etc)."}, {"owner": {"reputation": 1181, "user_id": 2966808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3864b68f53c776ed8186f516ee636989?s=128&d=identicon&r=PG&f=1", "display_name": "baranbaris", "link": "https://stackoverflow.com/users/2966808/baranbaris"}, "reply_to_user": {"reputation": 200780, "user_id": 116908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54d38793d7a407446999b33b81d607fd?s=128&d=identicon&r=PG", "display_name": "Carl Norum", "link": "https://stackoverflow.com/users/116908/carl-norum"}, "edited": false, "score": 0, "creation_date": 1429744644, "post_id": 29810422, "comment_id": 47749226, "body": "I&#39;m aware of the bugs from the original code.I tried to make it work with the fewest corrections, I just noticed the buffer overflow."}], "tags": [], "owner": {"reputation": 1181, "user_id": 2966808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3864b68f53c776ed8186f516ee636989?s=128&d=identicon&r=PG&f=1", "display_name": "baranbaris", "link": "https://stackoverflow.com/users/2966808/baranbaris"}, "is_accepted": false, "score": 0, "last_activity_date": 1429743373, "creation_date": 1429743373, "answer_id": 29810422, "question_id": 29808605, "link": "https://stackoverflow.com/questions/29808605/converting-array-of-chars-to-array-of-ints/29810422#29810422", "title": "Converting array of chars to array of ints", "body": "<p>I've made some modifications. The following code should work.    </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main(void)\n{\n    int cont = 0;\n    int i, j, tmp;\n    char c;\n    char *dados = NULL;\n    dados = malloc(sizeof(char));\n    do\n    {\n        scanf(\"%s\", &amp;c);\n        dados = (char*)realloc(dados, sizeof(char)*cont);\n        dados[cont] = c;\n        cont++;\n\n    }\n    while(c != 'x');\n    for (i = 0; i &lt; (cont - 2); i++)\n    {\n        for (j = 0; j &lt; (cont - i - 2); j++)\n        {\n            if (dados[j] &gt; dados[j + 1])\n            {\n                tmp = dados[j];\n                dados[j] = dados[j + 1];\n                dados[j + 1] = tmp;\n            }\n        }\n    }\n\n    char *charInt = (char*)dados;\n    int aux = sizeof(char);\n\n    for(i = 0; i &lt;= (cont - 2)*aux; i = i + aux)\n    {\n        printf(\"%d\\n\",*charInt);\n\n        ++charInt;\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4821394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30cb90cd2dcefc0a071d60d474671e8b?s=128&d=identicon&r=PG&f=1", "display_name": "CPbr", "link": "https://stackoverflow.com/users/4821394/cpbr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1429743373, "creation_date": 1429736040, "last_edit_date": 1429736586, "question_id": 29808605, "link": "https://stackoverflow.com/questions/29808605/converting-array-of-chars-to-array-of-ints", "title": "Converting array of chars to array of ints", "body": "<p>I have this homework and it's been giving me a headache because I can't find what I'm doing wrong.</p>\n\n<p>Basically, it should read a certain number of chars, being 'x' the last char and store them into heap memory.</p>\n\n<p>After that, the program should sort it using the ASCII table.</p>\n\n<p>Then, it should read every four chars as an int. The number of chars of the input will always be a multiple of four, so it will work everytime.</p>\n\n<p>Last, but not least important, it should print the integer numbers.</p>\n\n<p>My problem is: the program is printing the integers in the wrong order.</p>\n\n<p>Here it goes:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main(void)\n{\n    int cont = 1;\n    int i, j, tmp;\n    char c;\n    char *dados = NULL;\n\n    do\n    {\n        scanf(\"%s\", &amp;c);\n        dados = (char*)realloc(dados, sizeof(char)*cont);\n        dados[cont - 1] = c;\n        cont++;\n    }\n    while(c != 'x');\n\n    for (i = 0; i &lt; (cont - 1); i++)\n    {\n        for (j = 0; j &lt; (cont - i - 1); j++)\n        {\n            if (dados[j] &gt; dados[j + 1])\n            {\n                tmp = dados[j];\n                dados[j] = dados[j + 1];\n                dados[j + 1] = tmp;\n            }\n        }\n    }\n\n    int *charInt = (int*)dados;\n    int aux = sizeof(int);\n\n    for(i = 1; i &lt;= (cont - 1); i = i + aux)\n    {\n        printf(\"%d\\n\", *charInt);\n        ++charInt;\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "algorithm", "optimization"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 4, "creation_date": 1429735751, "post_id": 29808488, "comment_id": 47745112, "body": "Seems to me like you could try both of these options yourself and benchmark the results, you&#39;d get a definitive answer."}, {"owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "edited": false, "score": 0, "creation_date": 1429735971, "post_id": 29808488, "comment_id": 47745267, "body": "What about posting some real code?"}, {"owner": {"reputation": 46142, "user_id": 773113, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/FKKLW.jpg?s=128&g=1", "display_name": "Mike Nakis", "link": "https://stackoverflow.com/users/773113/mike-nakis"}, "edited": false, "score": 3, "creation_date": 1429735996, "post_id": 29808488, "comment_id": 47745290, "body": "Whatever performance problems you are facing are most probably not in how you store your variables, nor on how you call your functions.  This would be the case if you threw a profiler on your code, and found that every single one of your, say, 1000 lines of code takes roughly one thousandth of the total run time.  But in all likelihood, that will not be the case.  So, use a profiler to pinpoint the bottleneck, and fix <b>that part only</b>."}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 1, "creation_date": 1429736002, "post_id": 29808488, "comment_id": 47745296, "body": "try to limit the lifetime of variable to &quot;just enough&quot;"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1429736123, "post_id": 29808488, "comment_id": 47745385, "body": "Suggestion: you are probably focusing on the wrong thing. How/where you declare variables can have performance impacts but is unlikely to be the dominate performance factor in the situation you have described. Unless you have specific reason to think it is."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1429736988, "post_id": 29808488, "comment_id": 47745858, "body": "Have you actually run your code and discovered it&#39;s too slow, or are you simply <i>anticipating</i> a problem? Computers are <i>extremely</i> fast these days, millions of computations aren&#39;t usually a problem."}, {"owner": {"reputation": 153, "user_id": 3333877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a40b0d8c1d2fd0a160df817911541273?s=128&d=identicon&r=PG", "display_name": "Fractal20", "link": "https://stackoverflow.com/users/3333877/fractal20"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1429737604, "post_id": 29808488, "comment_id": 47746222, "body": "@MarkRansom. I converted it from a MATLAB code. My simulations took ~30 days on my schools cluster. The C code is 6 times faster, still longer than I would like. I have to solve a bunch of fluid equations, so it is computationally expensive"}], "answers": [{"comments": [{"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1429774630, "post_id": 29808747, "comment_id": 47760463, "body": "Consider that optimization can even turn a local variable into global or the opposite (or even reserve a cpu register for it, leading to a non-memory-at-all variable)"}], "tags": [], "owner": {"reputation": 973, "user_id": 4777513, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/inkg3.jpg?s=128&g=1", "display_name": "Ekleog", "link": "https://stackoverflow.com/users/4777513/ekleog"}, "is_accepted": false, "score": 2, "last_activity_date": 1429736522, "creation_date": 1429736522, "answer_id": 29808747, "question_id": 29808488, "link": "https://stackoverflow.com/questions/29808488/efficiently-treating-functions-in-c-c-called-a-million-times/29808747#29808747", "title": "Efficiently treating functions in C/C++ called a million times", "body": "<p>Roughly, storing the variable as global or local should not change anything if you call your function inside a loop. Actually, the assembly code should most likely be the same (<code>sub esp, SomeValue</code>) ; the only difference being <code>SomeValue</code> that could change a bit ; which does not change anything to the delay ; to the clock cycle precision.</p>\n\n<p>Actually, setting the variable as global could even make your program run slower, as the compiler will be less able to understand your code and optimize it.</p>\n\n<p>So, if you call your function inside a loop, do not bother with global vs. local and just go the usual way: variables as local as possible.</p>\n\n<p>However, if your million calls are recursive calls, then memory is scarce and you should do your best to save it, and then should go for the global way.</p>\n\n<p>Anyway, you most likely have much better optimizations waiting to be made somewhere in your code !</p>\n"}, {"comments": [{"owner": {"reputation": 153, "user_id": 3333877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a40b0d8c1d2fd0a160df817911541273?s=128&d=identicon&r=PG", "display_name": "Fractal20", "link": "https://stackoverflow.com/users/3333877/fractal20"}, "edited": false, "score": 0, "creation_date": 1429738187, "post_id": 29808804, "comment_id": 47746518, "body": "Thank you. I don&#39;t know enough about programming to understand the stack details, but I&#39;ll take your word for it and initialize them inside the functions"}, {"owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "reply_to_user": {"reputation": 153, "user_id": 3333877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a40b0d8c1d2fd0a160df817911541273?s=128&d=identicon&r=PG", "display_name": "Fractal20", "link": "https://stackoverflow.com/users/3333877/fractal20"}, "edited": false, "score": 0, "creation_date": 1429738604, "post_id": 29808804, "comment_id": 47746741, "body": "Thanks for believing me :-) , but keep in mind that optimisations always have to be tested when everything is finished, to know what difference (if any at all) they make."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1429771362, "post_id": 29808804, "comment_id": 47758455, "body": "Allocating a stack variable has no performaance cost, <b>but initializing it does</b>.  If he is going to initialize <i>several local variables</i>, but just once before calling the function (global vars in life, but local in scope) he has the option to <i>declare them as <code>static</code> inside the function body</i>.  He&#39;ll initialize them once and use many times, without the risk of being seen elsewhere.  Indeed, that&#39;s the reason to not initialize by default local variables."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1429771704, "post_id": 29808804, "comment_id": 47758672, "body": "The processor doesn&#39;t cache data based on spatial locality.  It uses a hash table, so the data can be spread.   It is <b>locality in time</b> what does data to remain in the cache.  If you access the same data soon after last use, it&#39;s most probable that it will be still present in the cache than not. Cache uses normally some LRU algorithm (least recently used) to replace the data in the cache."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1429772035, "post_id": 29808804, "comment_id": 47758874, "body": "By the way, spatial locality is important in instruction cache.  If the code of a loop is completely cached, you&#39;ll use the cache for all the execution of the loop.  This has to do with the secuential access done by the cpu to execute instructions.  But data is not subject to this same problem."}, {"owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "reply_to_user": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1429785376, "post_id": 29808804, "comment_id": 47767983, "body": "@LuisColorado, thanks for trying to improve my answer, but this was too much. I tried to address some points you edited in myself."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1429851750, "post_id": 29808804, "comment_id": 47804415, "body": "Ok, well.  Do it yourself."}], "tags": [], "owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "is_accepted": false, "score": 3, "last_activity_date": 1429785313, "last_edit_date": 1429785313, "creation_date": 1429736686, "answer_id": 29808804, "question_id": 29808488, "link": "https://stackoverflow.com/questions/29808488/efficiently-treating-functions-in-c-c-called-a-million-times/29808804#29808804", "title": "Efficiently treating functions in C/C++ called a million times", "body": "<blockquote>\n  <p>If I call a function a million times and every time it is called in\n  initializes a temporary variable, does this waste more time than if I\n  have a global temp value that it alters instead?</p>\n</blockquote>\n\n<p>No, it's even likely that the opposite is true. A temporary variable is created on the stack.   </p>\n\n<p><strong>Allocating a stack variable has no performance cost</strong><br>\nWhen the function is called, the stack pointer has to be moved anyway, to make room for the function arguments and other things. Now if an additional variable has to be allocated, all that has to be done is to increase the amount the stack pointer moves.<br>\nUnlike as with Java, you can leave a variable uninitialized, and store the final value directly when needed, such that there is no initialisation cost.</p>\n\n<p><a href=\"http://en.wikipedia.org/wiki/Locality_of_reference\" rel=\"nofollow\"><strong>Locality of reference</strong></a><br>\nis also better, when you use a stack variable. This means the values the function uses are closer to each other, and this helps the processor to cache the data more efficiently. The cache is organized in lines of typically 64 bytes, that means two 32bit values that are adjacent to each other are more efficient than two scattered ones.<br>\nSpatial locality is especially important when paging occurs, because loading a page from permanent storage has a <em>huge</em> performance cost. Therefore it is better to have all the variables needed at a certain time stored close together, such that they fit into one page.</p>\n"}, {"comments": [{"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1429774882, "post_id": 29808861, "comment_id": 47760648, "body": "What does <b>Type 1</b> variables mean?  What happened to <b>Type 2</b> ???  A <code>const double ABC</code> can be handled as a simple value if you never use a reference to it (in its scope).  This is exactly the performance you gain in case the compiler takes it into account."}], "tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": false, "score": 2, "last_activity_date": 1429736891, "creation_date": 1429736891, "answer_id": 29808861, "question_id": 29808488, "link": "https://stackoverflow.com/questions/29808488/efficiently-treating-functions-in-c-c-called-a-million-times/29808861#29808861", "title": "Efficiently treating functions in C/C++ called a million times", "body": "<p>Type 1 variables should be global</p>\n\n<p>const double ABC = 1.234567;</p>\n\n<p>The const is important for performance.</p>\n\n<p>Type 3 can't be global. They need to be passed in each function call</p>\n\n<pre><code>void f1(double x)\n{\n    x = x + ABC;\n    f2(x);\n}\n</code></pre>\n\n<p>In case you need f2 to change x and get a changed value back use a reference instead:</p>\n\n<pre><code>void f1(double&amp; x)\n{\n    x = x + ABC;\n    f2(x);\n}\n</code></pre>\n\n<p>Type 2 shall just be local in the functions:</p>\n\n<pre><code>void f1(double x)\n{\n    double y;\n    x = x + ABC;\n    f2(x);\n}\n</code></pre>\n\n<p>Be sure to check the compilers optimization flags to get best performance.</p>\n"}, {"tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": false, "score": 1, "last_activity_date": 1429852045, "last_edit_date": 1429852045, "creation_date": 1429776606, "answer_id": 29817387, "question_id": 29808488, "link": "https://stackoverflow.com/questions/29808488/efficiently-treating-functions-in-c-c-called-a-million-times/29817387#29817387", "title": "Efficiently treating functions in C/C++ called a million times", "body": "<p>You are talking about two differentiated concepts in C language:  extent and scope.</p>\n\n<ul>\n<li><p><strong>Extent</strong> has to do with the extent of time the variable is going to last.  Global variables have always <strong>global extent</strong>, it means that they last from program beginning to program end, retaining their values from assignment to assignment during the whole program life.  Local variables have normally <strong>local extent</strong>, that means that variable is created/allocated at the point of its definition, and its life extends to the end of the inner block containing it.  Normally, compilers advance the stack pointer register at each function/block entry call by a fixed amount depending on the local storage of the block and the sizes and the number of parameters (in case of function blocks), so adding a local variable only changes the constant value to be added to SP register resulting in no extra execution penalty.  This is also the reason for local variables not being initialized on entry.</p></li>\n<li><p><strong>Scope</strong> has to do with the visibility of the variable.  There are three different scopes for every object: <strong>Global scope</strong> means a variable can be accessed everywhere in the program;  <strong>File scope</strong> means a variable is only visible inside the file module that defines it, but not elsewhere, and; <strong>Local scope</strong> means a variable is visible from the point of declaration up to the end of the block. For global scope, you always have its name available to allow you to reference it.  In the opposite, local scope means a variable name is only available in the inner block containing its declaration (this is, the inner pair of <code>{</code> and <code>}</code> where the object is defined)</p></li>\n</ul>\n\n<p>When you use the word <code>static</code>, it means two things, depending on where you are using it:</p>\n\n<ul>\n<li>If you use it outside any blocks, <code>static</code> means <strong>file scope</strong> (as oppossed to <code>extern</code> that means global program scope) By default, variables (and data) are file scope and functions (and code) are global scope (with functions, you have to use <code>static</code> to make them visible only inside the file of declaration).  With file scope, the variables are only visible inside the file where it's declared, but it has also global extent.  All objects defined outside any block (at the file level) have global extent (they exist from program start to program end)</li>\n<li>If you use <code>static</code> inside a block, it means this variable has local scope but it has global extent.  If you use <code>extern</code> inside a block, it means the object is defined this way, but elsewhere (it has global extent and scope, and I want to use it locally)</li>\n</ul>\n\n<p>Just to complete, the appearance of <code>extern</code> doesn't make the compiler to allocate a variable, it only informs it that there's a variable (defined elsewhere, with global scope and extent) that has this type and name and can be accessed from here on, locally (or file scope, if used outside any block)  You'll have to put a declaration somewhere (in other file, or in this) without the word <code>extern</code> to make the compiler to allocate space for it.  For a program global variable, you have to define it twice (one with <code>extern</code> keyword and a definition without it ---and possibly an initializer) in the file where it actually resides, and be declared <code>extern</code> in all other files that are going to use it.</p>\n\n<h2>EDIT</h2>\n\n<p>For variables that do not change during the lifetime of the program, it's best to define them as <code>const</code>.  This way, you allow the compiler to remember the constant value and to use its value instead of making references to it all around the program.  There is a large benefit in making a global value a <code>const</code>.  <code>const</code>s aren't even allocated memory, if you never use them by reference (through the <code>&amp;</code> operator).</p>\n"}, {"comments": [{"owner": {"reputation": 153, "user_id": 3333877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a40b0d8c1d2fd0a160df817911541273?s=128&d=identicon&r=PG", "display_name": "Fractal20", "link": "https://stackoverflow.com/users/3333877/fractal20"}, "edited": false, "score": 0, "creation_date": 1429798513, "post_id": 29823910, "comment_id": 47778483, "body": "Thank you. I will definitely look into this. Yes indeed, the majority of the time is taken with the actual computation of my fluid solver which has many calls to Sinh and logs. I&#39;ve spent a while carefully pre-calculating any expressions that show up more than once. With this specific part I&#39;m at the extent of my knowledge of how to even try to speed up that part. So now I&#39;m looking at the rest..."}, {"owner": {"reputation": 38606, "user_id": 23771, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NeuGc.jpg?s=128&g=1", "display_name": "Mike Dunlavey", "link": "https://stackoverflow.com/users/23771/mike-dunlavey"}, "reply_to_user": {"reputation": 153, "user_id": 3333877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a40b0d8c1d2fd0a160df817911541273?s=128&d=identicon&r=PG", "display_name": "Fractal20", "link": "https://stackoverflow.com/users/3333877/fractal20"}, "edited": false, "score": 0, "creation_date": 1429802172, "post_id": 29823910, "comment_id": 47781649, "body": "@Fractal20: I take my problem of interest and run it through a code-generator to make a problem-specific C program, which I then compile and link into my main program. That way no time is spent in superstructure. Then in place of calls to <code>exp</code> (for example) I have statics that remember the prior value of the argument and result to <code>exp</code>, and call a wrapper <code>exp_cached</code> which basically memoizes the function. This saved <i>big-time</i>, because lots of the calls were with arguments that change seldom or never. But again, first let the samples indicate it&#39;s necessary."}], "tags": [], "owner": {"reputation": 38606, "user_id": 23771, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NeuGc.jpg?s=128&g=1", "display_name": "Mike Dunlavey", "link": "https://stackoverflow.com/users/23771/mike-dunlavey"}, "is_accepted": false, "score": 0, "last_activity_date": 1429793928, "last_edit_date": 1492088034, "creation_date": 1429793223, "answer_id": 29823910, "question_id": 29808488, "link": "https://stackoverflow.com/questions/29808488/efficiently-treating-functions-in-c-c-called-a-million-times/29823910#29823910", "title": "Efficiently treating functions in C/C++ called a million times", "body": "<p>First, don't go guessing what the problem is (that's what you're doing :)</p>\n\n<p>Second, let the running program tell you what takes time.\nIn your comment, you said it takes many hours.\nThe method I use is to run it under a debugger, interrupt it, and see what it's doing.\nIf you do this several times, you will see that the interrupts are strongly drawn to the problem.</p>\n\n<p>Do this with compiler optimization <em>off</em>. When you've made it as fast as you can, then turn on the compiler's optimizer.\nIf you've got silly stuff in there that you need to clean out, the optimizer won't clean it out for you. It will only make it harder to find.</p>\n\n<p><a href=\"https://scicomp.stackexchange.com/a/2719/1262\"><em>This post</em></a> shows some of my experience using this with scientific software.\nIt also gives the statistical justification why the method is so effective.</p>\n\n<p>Things I've found in the past are spending a large fraction of those hours a) calling functions like <code>exp</code> or <code>log</code> over and over with same or almost-same arguments, b) calling general-purpose functions like matrix-multiply or cholesky transform which might be replaced with specialized routines.</p>\n"}, {"tags": [], "owner": {"reputation": 15724, "user_id": 1716339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835fc3719b0118c68c4d202b3e5cbf18?s=128&d=identicon&r=PG", "display_name": "Aki Suihkonen", "link": "https://stackoverflow.com/users/1716339/aki-suihkonen"}, "is_accepted": false, "score": 0, "last_activity_date": 1429865919, "creation_date": 1429865919, "answer_id": 29842992, "question_id": 29808488, "link": "https://stackoverflow.com/questions/29808488/efficiently-treating-functions-in-c-c-called-a-million-times/29842992#29842992", "title": "Efficiently treating functions in C/C++ called a million times", "body": "<blockquote>\n  <p>If I call a function a million times and every time it is called in\n  initializes a temporary variable, does this waste more time than if I\n  have a global temp value that it alters instead?</p>\n</blockquote>\n\n<p>Not necessarily, because an optimizing compiler can put these variables directly into registers, instead of using even the stack. <strong>Also the global temp value can be stored in a register</strong>, as shown in below. In some architectures, such as x64, which has plenty of registers, one can hint the compiler to allocate both constants and other variables permanently to some registers.</p>\n\n<p>Sufficiently small data could be similarly placed on xmm0..xmm7.</p>\n\n<pre><code>register long int a __asm__(\"r14\");\n\nint foo(int b)\n{\n    a = b * 2 + a;\n    return a;\n}\n\nint bar(int c)\n{\n    a = a * 5 - c;\n    return a;\n}\n\nint init(int i) { a = i; }\n</code></pre>\n\n<hr>\n\n<pre><code>// in a separate file\nint main(){\n  init(3);\n  printf(\"%d %d\\n\", foo(1), bar(2));\n}\n</code></pre>\n\n<p>The disassembly shows, that the \"global\" variable is indeed stored into a register, allocated only once in <code>main</code></p>\n\n<pre><code>foo:  leal (%rdi,%rdi), %eax\n      cltq\n      addq %r14, %rax\n      movq %rax, %r14\n      ret\n\nbar:  leaq (%r14,%r14,2), %rax\n      movslq %edi, %rdi\n      subq %rdi, %rax\n      movq %rax, %r14\n      ret\n\nmain:  ...\n      movl $3, %r14d\n</code></pre>\n"}], "owner": {"reputation": 153, "user_id": 3333877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a40b0d8c1d2fd0a160df817911541273?s=128&d=identicon&r=PG", "display_name": "Fractal20", "link": "https://stackoverflow.com/users/3333877/fractal20"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 319, "favorite_count": 0, "answer_count": 6, "score": 1, "last_activity_date": 1429865919, "creation_date": 1429735683, "last_edit_date": 1429736816, "question_id": 29808488, "link": "https://stackoverflow.com/questions/29808488/efficiently-treating-functions-in-c-c-called-a-million-times", "title": "Efficiently treating functions in C/C++ called a million times", "body": "<p>I'm new both to C and stackoverflow for programming questions. I've done a bit of googling about my question and I haven't been able to turn up information directly addressing this question. However, I also may just be so new to the subject that I'm not sure what terms are even appropriate to search for. So my apologies if this is a commonly asked question.</p>\n\n<p>My program is implementing a scientific computation. In particular, it mostly involves taking given coordinates and given forces and updating everything based on a series of computations. To get results, I run through everything about a million times, so I'm concerned about making it as efficient as possible. In particular I've found that I have 3 types of variables</p>\n\n<ol>\n<li>Variables that are constant and do not change</li>\n<li>Temporarily variables that change from iteration to iteration\nand just are used as place holders in calculations</li>\n<li>Data that is altered each iteration and then is carried through\nto the next</li>\n</ol>\n\n<p>What is the most efficient ways to declare these different variables? In my naivety I am tempted to declare everything as global variables, I'm pretty sure this could make sense for variables of type (1) and (3). However for type (2) I'm unsure. If I call a function a million times and every time it is called in initializes a temporary variable, does this waste more time than if I have a global temp value that it alters instead?</p>\n"}, {"tags": ["c++", "c", "math", "limits"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 3, "creation_date": 1429747180, "post_id": 29808397, "comment_id": 47750103, "body": "@barakmanos: They&#39;re not the same; usually, <code>INT_MIN == -INT_MAX - 1</code>. I think it&#39;s actually UB to take <code>-INT_MIN</code> on such systems."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 1, "creation_date": 1429779694, "post_id": 29808397, "comment_id": 47763793, "body": "you mean the <code>abs</code> function 2&#39;s complement which returns the same type as the argument so <code>abs(INT_MIN) == INT_MIN</code> or abs in the mathematical sense, which might need a wider type to return the correct value of <code>min(INT_MAX, abs(INT_MIN))</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 91978, "user_id": 387076, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/cFyP6.jpg?s=128&g=1", "display_name": "Gilles &#39;SO- stop being evil&#39;", "link": "https://stackoverflow.com/users/387076/gilles-so-stop-being-evil"}, "edited": false, "score": 2, "creation_date": 1429735697, "post_id": 29808442, "comment_id": 47745069, "body": "This is not what the question asks. <code>abs(INT_MIN)</code> isn&#39;t portable \u2014 so how do you compute the absolute value of <code>INT_MIN</code>? If <code>INT_MAX</code> is -2^31, then abs(<code>INT_MAX</code>) <i>is</i> 2^31 \u2014 this is simple math. That number cannot be represented as an <code>int32_t</code>, so you need another way to compare it with <code>INT_MAX</code>."}], "tags": [], "owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "is_accepted": false, "score": 0, "last_activity_date": 1429735531, "creation_date": 1429735531, "answer_id": 29808442, "question_id": 29808397, "link": "https://stackoverflow.com/questions/29808397/how-to-portably-find-out-minint-max-absint-min/29808442#29808442", "title": "How to portably find out min(INT_MAX, abs(INT_MIN))?", "body": "<p>On most systems, abs (INT_MIN) is not defined. For example, on typical 32 bit machines, INT_MAX = 2^31 - 1, INT_MIN = - 2^31, and abs (INT_MIN) cannot be 2^31. </p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 1, "creation_date": 1429735728, "post_id": 29808457, "comment_id": 47745094, "body": "This is no bad answer!"}, {"owner": {"reputation": 6316, "user_id": 3323096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1227f90127f0f7b8678a8c13261f48b4?s=128&d=identicon&r=PG", "display_name": "Vality", "link": "https://stackoverflow.com/users/3323096/vality"}, "edited": false, "score": 0, "creation_date": 1429735806, "post_id": 29808457, "comment_id": 47745145, "body": "I didnt -1, I was just pointing out an error in an earlier revision. I will remove that now"}, {"owner": {"reputation": 9542, "user_id": 985296, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/fb867640ddc6aee363d96530573845b0?s=128&d=identicon&r=PG", "display_name": "stefan", "link": "https://stackoverflow.com/users/985296/stefan"}, "edited": false, "score": 1, "creation_date": 1429735862, "post_id": 29808457, "comment_id": 47745184, "body": "Well it&#39;s still incorrect. <code>abs(INT_MIN)</code> <i>may</i> be equal to INT_MAX, depending on the architecture. In that case it&#39;s clearly well-formed."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 9542, "user_id": 985296, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/fb867640ddc6aee363d96530573845b0?s=128&d=identicon&r=PG", "display_name": "stefan", "link": "https://stackoverflow.com/users/985296/stefan"}, "edited": false, "score": 0, "creation_date": 1429735895, "post_id": 29808457, "comment_id": 47745207, "body": "@stefan; Standard says its UB and that&#39;s it."}, {"owner": {"reputation": 9542, "user_id": 985296, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/fb867640ddc6aee363d96530573845b0?s=128&d=identicon&r=PG", "display_name": "stefan", "link": "https://stackoverflow.com/users/985296/stefan"}, "edited": false, "score": 0, "creation_date": 1429735927, "post_id": 29808457, "comment_id": 47745229, "body": "@haccks No, it does not. it does not force 2s or 1s complement."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "edited": false, "score": 0, "creation_date": 1429736328, "post_id": 29808457, "comment_id": 47745515, "body": "@milleniumbug; Now it answers ."}, {"owner": {"reputation": 9542, "user_id": 985296, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/fb867640ddc6aee363d96530573845b0?s=128&d=identicon&r=PG", "display_name": "stefan", "link": "https://stackoverflow.com/users/985296/stefan"}, "edited": false, "score": 0, "creation_date": 1429740717, "post_id": 29808457, "comment_id": 47747734, "body": "@haccks I posted my own answer as I was tired of explaining the same thing over and over again. Please tell me if there are things left unclear."}, {"owner": {"reputation": 23625, "user_id": 2868801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ec5567811049b7ce8192be0bc0246d1?s=128&d=identicon&r=PG&f=1", "display_name": "dave_thompson_085", "link": "https://stackoverflow.com/users/2868801/dave-thompson-085"}, "edited": false, "score": 0, "creation_date": 1429746871, "post_id": 29808457, "comment_id": 47750000, "body": "If UINT_MAX == INT_MAX (where INT_MAX == math_not_C_pow(2,num_magnitude_bits)-1) as is allowed but rare, and INT_MIN == -INT_MAX -1 as is allowed and common (for 2sC), b=(unsigned)(INT_MIN) yields 0 and is selected as the minimum, which is not the correct result."}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": -1, "last_activity_date": 1429765576, "last_edit_date": 1592644375, "creation_date": 1429735585, "answer_id": 29808457, "question_id": 29808397, "link": "https://stackoverflow.com/questions/29808397/how-to-portably-find-out-minint-max-absint-min/29808457#29808457", "title": "How to portably find out min(INT_MAX, abs(INT_MIN))?", "body": "<p><code>abs(INT_MIN)</code> will invoke undefined behavior. Standard says</p>\n<h3>7.22.6.1 The <code>abs</code>, <code>labs</code> and <code>llabs</code> functions:</h3>\n<blockquote>\n<p>The <code>abs</code>, <code>labs</code>, and <code>llabs</code> functions compute the absolute value of an integer <code>j</code>. If the result cannot be represented, the behavior is undefined.</p>\n</blockquote>\n<p>Try this instead  :<br />\nConvert <code>INT_MIN</code> to <code>unsignrd int</code>. Since -ve numbers can't be represented as an <code>unsigned int</code>, <code>INT_MAX</code> will be converted to <code>UINT_MAX + 1 + INT_MIN</code>.</p>\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nunsigned min(unsigned a, unsigned b)\n{\n    return a &lt; b ? a : b;\n}\n\nint main(void)\n{\n    printf(&quot;%u\\n&quot;, min(INT_MAX, INT_MIN));\n}  \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7587, "user_id": 943010, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/R7Q27.png?s=128&g=1", "display_name": "kdopen", "link": "https://stackoverflow.com/users/943010/kdopen"}, "edited": false, "score": 2, "creation_date": 1429735742, "post_id": 29808461, "comment_id": 47745104, "body": "Actually, it&#39;s still not correct because <code>-INT_MIN</code> can&#39;t be represented in an <code>int</code>"}, {"owner": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "reply_to_user": {"reputation": 7587, "user_id": 943010, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/R7Q27.png?s=128&g=1", "display_name": "kdopen", "link": "https://stackoverflow.com/users/943010/kdopen"}, "edited": false, "score": 7, "creation_date": 1429736774, "post_id": 29808461, "comment_id": 47745750, "body": "@kdopen The branch with <code>-INT_MIN</code> is not evaluated then, which means UB doesn&#39;t happen."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1429740202, "post_id": 29808461, "comment_id": 47747504, "body": "<code>INT_MAX + INT_MIN</code> will evaluate to either 0 (sign and magnitude, one\u2019s complement) or -1 (two\u2019s complement).  In either case, the result have the value of  <code>INT_MAX</code>."}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1429740259, "post_id": 29808461, "comment_id": 47747531, "body": "@chux See the answer by JeremyRoman: pre-C99, other representations were allowed."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1429741117, "post_id": 29808461, "comment_id": 47747903, "body": "Let me know of a C89 compliant platform where <code>INT_MAX + INT_MIN</code> does not have the values 0 nor -1 so I may award a bonus of +50 for this answer."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1429744595, "post_id": 29808461, "comment_id": 47749214, "body": "Even simpler would just be to compare <code>INT_MIN &lt; -INIT_MAX</code>"}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "reply_to_user": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 3, "creation_date": 1429745173, "post_id": 29808461, "comment_id": 47749427, "body": "@JensGustedt That makes an analogous assumption, that <code>-INT_MAX</code> is representable as an <code>int</code>."}, {"owner": {"reputation": 91978, "user_id": 387076, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/cFyP6.jpg?s=128&g=1", "display_name": "Gilles &#39;SO- stop being evil&#39;", "link": "https://stackoverflow.com/users/387076/gilles-so-stop-being-evil"}, "edited": false, "score": 0, "creation_date": 1429747150, "post_id": 29808461, "comment_id": 47750095, "body": "@Brian On what implementation (real or hypothetical) is <code>-INT_MAX</code> not representable?"}, {"owner": {"reputation": 7587, "user_id": 943010, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/R7Q27.png?s=128&g=1", "display_name": "kdopen", "link": "https://stackoverflow.com/users/943010/kdopen"}, "reply_to_user": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "edited": false, "score": 0, "creation_date": 1429822411, "post_id": 29808461, "comment_id": 47794847, "body": "@milleniumbug Actually I reassert my original objection. Although the the branch with {{-INT_MIN}} in it won&#39;t be <i>executed</i>, it must still be <i>compiled</i>. Unless the compiler uses a larger data type (assumes {{sizeof(int) &lt; sizeof(long)}}) to store the constant and then coerces it at run time, this should raise a compilation error on older C compilers."}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "reply_to_user": {"reputation": 7587, "user_id": 943010, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/R7Q27.png?s=128&g=1", "display_name": "kdopen", "link": "https://stackoverflow.com/users/943010/kdopen"}, "edited": false, "score": 0, "creation_date": 1429823286, "post_id": 29808461, "comment_id": 47795326, "body": "@kdopen I see no reason why this should not compile. The compiler is not required to evaluate constant expressions at compile time. It may do so, but not if this would cause it to reject a conforming program. This expression follows all the rules. In C, a minus sign is not considered part of an integer constant."}], "tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": false, "score": 10, "last_activity_date": 1429735979, "last_edit_date": 1429735979, "creation_date": 1429735596, "answer_id": 29808461, "question_id": 29808397, "link": "https://stackoverflow.com/questions/29808397/how-to-portably-find-out-minint-max-absint-min/29808461#29808461", "title": "How to portably find out min(INT_MAX, abs(INT_MIN))?", "body": "<pre><code>INT_MAX + INT_MIN &lt; 0 ? INT_MAX : -INT_MIN\n</code></pre>\n\n<p><em>Edited to add explanation:</em> Of course the difficulty is that <code>-INT_MIN</code> or <code>abs(INT_MIN)</code> will be undefined if <code>-INT_MIN</code> is too big to fit in an <code>int</code>. So we need some way of checking whether this is the case. The condition <code>INT_MAX + INT_MIN &lt; 0</code> tests whether <code>-INT_MIN</code> is greater than <code>INT_MAX</code>. If it is, then <code>INT_MAX</code> is the smaller of the two absolute values. If not, then <code>INT_MAX</code> is the larger of the two absolute values, and <code>-INT_MIN</code> is the correct answer.</p>\n"}, {"tags": [], "owner": {"reputation": 91978, "user_id": 387076, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/cFyP6.jpg?s=128&g=1", "display_name": "Gilles &#39;SO- stop being evil&#39;", "link": "https://stackoverflow.com/users/387076/gilles-so-stop-being-evil"}, "is_accepted": false, "score": 1, "last_activity_date": 1429735927, "creation_date": 1429735927, "answer_id": 29808571, "question_id": 29808397, "link": "https://stackoverflow.com/questions/29808397/how-to-portably-find-out-minint-max-absint-min/29808571#29808571", "title": "How to portably find out min(INT_MAX, abs(INT_MIN))?", "body": "<p><code>-INT_MAX</code> is representable as an <code>int</code> in all C and C++ dialects, as far as I know. Therefore:</p>\n\n<pre><code>-INT_MAX &lt;= INT_MIN ? -INT_MIN : INT_MAX\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 91978, "user_id": 387076, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/cFyP6.jpg?s=128&g=1", "display_name": "Gilles &#39;SO- stop being evil&#39;", "link": "https://stackoverflow.com/users/387076/gilles-so-stop-being-evil"}, "edited": false, "score": 0, "creation_date": 1429736139, "post_id": 29808593, "comment_id": 47745392, "body": "Is that true in C89? That old but not dead language doesn&#39;t mandate one of those three representations."}, {"owner": {"reputation": 15544, "user_id": 864393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59ae69e09086fed821a36d36814022c2?s=128&d=identicon&r=PG", "display_name": "Jeremy Roman", "link": "https://stackoverflow.com/users/864393/jeremy-roman"}, "reply_to_user": {"reputation": 91978, "user_id": 387076, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/cFyP6.jpg?s=128&g=1", "display_name": "Gilles &#39;SO- stop being evil&#39;", "link": "https://stackoverflow.com/users/387076/gilles-so-stop-being-evil"}, "edited": false, "score": 0, "creation_date": 1429736284, "post_id": 29808593, "comment_id": 47745484, "body": "Ah, thanks. I don&#39;t have a C89 spec at hand, but as you edited, this is true in C99."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1429736534, "post_id": 29808593, "comment_id": 47745626, "body": "How does this answer the question?"}, {"owner": {"reputation": 15544, "user_id": 864393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59ae69e09086fed821a36d36814022c2?s=128&d=identicon&r=PG", "display_name": "Jeremy Roman", "link": "https://stackoverflow.com/users/864393/jeremy-roman"}, "edited": false, "score": 4, "creation_date": 1429737166, "post_id": 29808593, "comment_id": 47745963, "body": "haccks: On C99 and above, the representation restriction prevents abs(INT_MIN) from being smaller than INT_MAX."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1429737990, "post_id": 29808593, "comment_id": 47746418, "body": "I know and OP does know it too. He is asking about how to find min of mathematical absolute value of <code>INT_MIN</code> and <code>INT_MAX</code>."}, {"owner": {"reputation": 23625, "user_id": 2868801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ec5567811049b7ce8192be0bc0246d1?s=128&d=identicon&r=PG&f=1", "display_name": "dave_thompson_085", "link": "https://stackoverflow.com/users/2868801/dave-thompson-085"}, "reply_to_user": {"reputation": 91978, "user_id": 387076, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/cFyP6.jpg?s=128&g=1", "display_name": "Gilles &#39;SO- stop being evil&#39;", "link": "https://stackoverflow.com/users/387076/gilles-so-stop-being-evil"}, "edited": false, "score": 0, "creation_date": 1429746976, "post_id": 29808593, "comment_id": 47750036, "body": "@Gilles C89 didn&#39;t specifically say 2sC 1sC S&amp;M, but it did require &quot;pure binary&quot; except for the &quot;highest&quot; bit, which was obviously intended to mean the sign bit for signed but as written also formally allowed some limited weirdness in unsigned. AFAIK no machine used any signed representation satisfying &quot;pure binary except sign&quot; other than those three, and no implementor objected to this &quot;clarification&quot; in C99."}, {"owner": {"reputation": 15544, "user_id": 864393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59ae69e09086fed821a36d36814022c2?s=128&d=identicon&r=PG", "display_name": "Jeremy Roman", "link": "https://stackoverflow.com/users/864393/jeremy-roman"}, "edited": false, "score": 2, "creation_date": 1429748955, "post_id": 29808593, "comment_id": 47750711, "body": "haccks: If abs(INT_MIN) &gt;= INT_MAX (which you&#39;ve agreed to), then min(INT_MAX, abs(INT_MIN)) == INT_MAX."}], "tags": [], "owner": {"reputation": 15544, "user_id": 864393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59ae69e09086fed821a36d36814022c2?s=128&d=identicon&r=PG", "display_name": "Jeremy Roman", "link": "https://stackoverflow.com/users/864393/jeremy-roman"}, "is_accepted": false, "score": 7, "last_activity_date": 1429736184, "last_edit_date": 1429736184, "creation_date": 1429736000, "answer_id": 29808593, "question_id": 29808397, "link": "https://stackoverflow.com/questions/29808397/how-to-portably-find-out-minint-max-absint-min/29808593#29808593", "title": "How to portably find out min(INT_MAX, abs(INT_MIN))?", "body": "<p>In C99 and above, <code>INT_MAX</code>.</p>\n\n<p>Quoth the spec:</p>\n\n<blockquote>\n  <p>For signed integer types, the bits of the object representation shall be divided into three\n  groups: value bits, padding bits, and the sign bit. There need not be any padding bits;\n  signed char shall not have any padding bits. There shall be exactly one sign bit.\n  Each bit that is a value bit shall have the same value as the same bit in the object\n  representation of the corresponding unsigned type (if there are M value bits in the signed\n  type and N in the unsigned type, then M \u2264 N). If the sign bit is zero, it shall not affect\n  the resulting value. If the sign bit is one, the value shall be modified in one of the\n  following ways:</p>\n  \n  <ul>\n  <li>the corresponding value with sign bit 0 is negated (sign and magnitude);</li>\n  <li>the sign bit has the value \u2212(2^M) (two\u2019s complement);</li>\n  <li>the sign bit has the value \u2212(2^M \u2212 1) (ones\u2019 complement).</li>\n  </ul>\n</blockquote>\n\n<p>(Section 6.2.6.2 of <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\">http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf</a>)</p>\n"}, {"comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 1, "creation_date": 1429742093, "post_id": 29809849, "comment_id": 47748315, "body": "Note that the unevaluated <i>const-expr</i> <code>-INT-MIN</code> has been specifically allowed since C++14."}, {"owner": {"reputation": 256589, "user_id": 13005, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4690b9a0df8a4c1e35c088b077942e6?s=128&d=identicon&r=PG", "display_name": "Steve Jessop", "link": "https://stackoverflow.com/users/13005/steve-jessop"}, "edited": false, "score": 0, "creation_date": 1429748223, "post_id": 29809849, "comment_id": 47750467, "body": "... and thus the code needn&#39;t compile on pre-C++14 implementations. I can&#39;t remember whether or not a diagnostic is required."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1429758080, "post_id": 29809849, "comment_id": 47753456, "body": "Actually Std C. 6.2.6.2 and its equivalent in C++ do constrain the representation so that INT_MAX must be 2^N-1 for some N and INT_MIN must be either -INT_MAX or -INT_MAX-1."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1429769134, "post_id": 29809849, "comment_id": 47757283, "body": "Could the <code>if</code> be replaced with an <code>#if</code> ?  Or does that run into issues around the preprocessor&#39;s integer representation not necessarily being the same as the compiler&#39;s?"}], "tags": [], "owner": {"reputation": 9542, "user_id": 985296, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/fb867640ddc6aee363d96530573845b0?s=128&d=identicon&r=PG", "display_name": "stefan", "link": "https://stackoverflow.com/users/985296/stefan"}, "is_accepted": true, "score": 24, "last_activity_date": 1429795850, "last_edit_date": 1429795850, "creation_date": 1429740677, "answer_id": 29809849, "question_id": 29808397, "link": "https://stackoverflow.com/questions/29808397/how-to-portably-find-out-minint-max-absint-min/29809849#29809849", "title": "How to portably find out min(INT_MAX, abs(INT_MIN))?", "body": "<p>While the <em>typical</em> value of <code>INT_MIN</code> is -2147483648, and the <em>typical</em> value of <code>INT_MAX</code> is 2147483647, it is not guaranteed by the standard. TL;DR: The value you're searching for is <code>INT_MAX</code> in a conforming implementation. But <em>calculating</em> <code>min(INT_MAX, abs(INT_MIN))</code> isn't portable.</p>\n\n<hr>\n\n<h2>The possible values of <code>INT_MIN</code> and <code>INT_MAX</code></h2>\n\n<p><code>INT_MIN</code> and <code>INT_MAX</code> are defined by the Annex E (Implementation limits) 1 (C standard, C++ inherits this stuff):</p>\n\n<blockquote>\n  <p>The contents of the header  are given below, in alphabetical\n  order. The minimum magnitudes shown shall be replaced by\n  implementation-defined magnitudes with the same sign. The values shall\n  all be constant expressions suitable for use in #if preprocessing\n  directives. The components are described further in 5.2.4.2.1.</p>\n  \n  <p>[...]</p>\n  \n  <p><code>#define INT_MAX +32767</code></p>\n  \n  <p><code>#define INT_MIN -32767</code></p>\n  \n  <p>[...]</p>\n</blockquote>\n\n<p>The standard requires the type <code>int</code> to be an integer type that can represent the range <code>[INT_MIN, INT_MAX]</code> (section 5.2.4.2.1.).</p>\n\n<p>Then, 6.2.6.2. (Integer types, again part of the C standard), comes into play and further restricts this to what we know as <em>two's or ones' complement</em>:</p>\n\n<blockquote>\n  <p>For signed integer types, the bits of the object representation shall be divided into three\n  groups: value bits, padding bits, and the sign bit. There need not be any padding bits;\n  signed char shall not have any padding bits. There shall be exactly one sign bit.\n  Each bit that is a value bit shall have the same value as the same bit in the object\n  representation of the corresponding unsigned type (if there are M value bits in the signed\n  type and N in the unsigned type, then M \u2264 N). If the sign bit is zero, it shall not affect the resulting value. If the sign bit is one, the value shall be modified in one of the\n  following ways:</p>\n  \n  <p>\u2014 the corresponding value with sign bit 0 is negated (sign and magnitude);</p>\n  \n  <p>\u2014 the sign bit has the value \u2212(2M) (two\u2019s complement);</p>\n  \n  <p>\u2014 the sign bit has the value \u2212(2M \u2212 1) (ones\u2019 complement).</p>\n</blockquote>\n\n<p>Section 6.2.6.2. is also very important to relate the value representation of the signed integer types with the value representation of its unsigned siblings.</p>\n\n<p>This means, you either get the range <code>[-(2^n - 1), (2^n - 1)]</code> or <code>[-2^n, (2^n - 1)]</code>, where <code>n</code> is <em>typically</em> 15 or 31.</p>\n\n<h2>Operations on signed integer types</h2>\n\n<p>Now for the second thing: Operations on signed integer types, that result in a value that is not within the range <code>[INT_MIN, INT_MAX]</code>, the behavior is undefined. This is explicitly mandated in C++ by Paragraph 5/4:</p>\n\n<blockquote>\n  <p>If during the evaluation of an expression, the result is not mathematically defined or not in the range of\n  representable values for its type, the behavior is undefined.</p>\n</blockquote>\n\n<p>For C, 6.5/5 offers a very similar passage:</p>\n\n<blockquote>\n  <p>If an exceptional condition occurs during the evaluation of an expression (that is, if the\n  result is not mathematically defined or not in the range of representable values for its\n  type), the behavior is undefined.</p>\n</blockquote>\n\n<p>So what happens if the value of <code>INT_MIN</code> happens to be less than the negative of <code>INT_MAX</code> (e.g. -32768 and 32767 respectively)? Calculating <code>-(INT_MIN)</code> will be undefined, the same as <code>INT_MAX + 1</code>.</p>\n\n<p>So we need to avoid ever calculating a value that may isn't in the range of <code>[INT_MIN, INT_MAX]</code>. Lucky, <code>INT_MAX + INT_MIN</code> is always in that range, as <code>INT_MAX</code> is a strictly positive value and <code>INT_MIN</code> a strictly negative value. Hence <code>INT_MIN &lt; INT_MAX + INT_MIN &lt; INT_MAX</code>.</p>\n\n<p>Now we can check, whether, <code>INT_MAX + INT_MIN</code> is equal to, less than, or greater than 0.</p>\n\n<pre><code>`INT_MAX + INT_MIN`  |  value of -INT_MIN    | value of -INT_MAX \n------------------------------------------------------------------\n         &lt; 0         |  undefined            | -INT_MAX\n         = 0         |  INT_MAX = -INT_MIN   | -INT_MAX = INT_MIN\n         &gt; 0         |  cannot occur according to 6.2.6.2. of the C standard\n</code></pre>\n\n<p>Hence, to determine the minimum of <code>INT_MAX</code> and <code>-INT_MIN</code> (in the mathematical sense), the following code is sufficient:</p>\n\n<pre><code>if ( INT_MAX + INT_MIN == 0 )\n{\n    return INT_MAX; // or -INT_MIN, it doesn't matter\n}\nelse if ( INT_MAX + INT_MIN &lt; 0 )\n{\n    return INT_MAX; // INT_MAX is smaller, -INT_MIN cannot be represented.\n}\nelse // ( INT_MAX + INT_MIN &gt; 0 )\n{\n    return -INT_MIN; // -INT_MIN is actually smaller than INT_MAX, may not occur in a conforming implementation.\n}\n</code></pre>\n\n<p>Or, to simplify:</p>\n\n<pre><code>return (INT_MAX + INT_MIN &lt;= 0) ? INT_MAX : -INT_MIN;\n</code></pre>\n\n<p>The values in a ternary operator will only be evaluated if necessary. Hence, <code>-INT_MIN</code> is either left unevaluated (therefore cannot produce UB), or is a well-defined value.</p>\n\n<p>Or, if you want an assertion:</p>\n\n<pre><code>assert(INT_MAX + INT_MIN &lt;= 0);\nreturn INT_MAX;\n</code></pre>\n\n<p>Or, if you want that at compile time:</p>\n\n<pre><code>static_assert(INT_MAX + INT_MIN &lt;= 0, \"non-conforming implementation\");\nreturn INT_MAX;\n</code></pre>\n\n<hr>\n\n<h2>Getting integer operations right (i.e. if correctness matters)</h2>\n\n<p>If you're interested in safe integer arithmetic, have a look at my <a href=\"http://ideone.com/bGClJX\" rel=\"noreferrer\">implementation of safe integer operations</a>. If you want to see the patterns (rather than this lengthy text output) on which operations fail and which succeed, choose <a href=\"http://ideone.com/p9FqHn\" rel=\"noreferrer\">this demo</a>.</p>\n\n<p>Depending on the architecture, there may be other options to ensure correctness, such as gcc's option <code>-ftrapv</code>.</p>\n"}], "owner": {"reputation": 6043, "user_id": 3998522, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/042b8c418b7f1129fa54862a935377b8?s=128&d=identicon&r=PG&f=1", "display_name": "xiver77", "link": "https://stackoverflow.com/users/3998522/xiver77"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3467, "favorite_count": 1, "accepted_answer_id": 29809849, "answer_count": 6, "score": 31, "last_activity_date": 1431206004, "creation_date": 1429735357, "last_edit_date": 1431206004, "question_id": 29808397, "link": "https://stackoverflow.com/questions/29808397/how-to-portably-find-out-minint-max-absint-min", "title": "How to portably find out min(INT_MAX, abs(INT_MIN))?", "body": "<p>How can I portably find out the smallest of <code>INT_MAX</code> and abs(<code>INT_MIN</code>)? (That's the mathematical absolute value of <code>INT_MIN</code>, not a call to the <code>abs</code> function.)</p>\n\n<p>It should be as same as <code>INT_MAX</code> in most systems, but I'm looking for a more portable way.</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 2, "creation_date": 1429733861, "post_id": 29807902, "comment_id": 47743992, "body": "a lot of context is missing here."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1429734006, "post_id": 29807902, "comment_id": 47744073, "body": "You do not break out of the inner loop when you find the substitution character.  As a result, it is sometimes the case that the updated character is <i>also</i> found in <code>substitution_alphabet</code>, and substituted again.  Put a <code>break</code> statement at the end of the body of your <code>if</code> statement."}], "answers": [{"tags": [], "owner": {"reputation": 2827, "user_id": 3931225, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/46nwm.gif?s=128&g=1", "display_name": "KompjoeFriek", "link": "https://stackoverflow.com/users/3931225/kompjoefriek"}, "is_accepted": true, "score": 1, "last_activity_date": 1429733976, "creation_date": 1429733976, "answer_id": 29807973, "question_id": 29807902, "link": "https://stackoverflow.com/questions/29807902/changing-array-values-while-iterating-though-the-same-array-causes-strange-behav/29807973#29807973", "title": "Changing array values while iterating though the same array causes strange behaviour", "body": "<p>Put a <code>break;</code> after the line you needed to remove to make it correct (inside the for loops)</p>\n\n<p>You change the contents of <code>encoded_message_copy</code>, this can cause the statement <code>if(encoded_message_copy[i] == substitution_alphabet[j])</code> to match multiple times for the same value of <code>i</code> ;-)</p>\n"}, {"tags": [], "owner": {"reputation": 550, "user_id": 4596797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/980708640d67708d1f37365bbaba058d?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Derevyanko", "link": "https://stackoverflow.com/users/4596797/andrey-derevyanko"}, "is_accepted": false, "score": 1, "last_activity_date": 1429734031, "creation_date": 1429734031, "answer_id": 29807989, "question_id": 29807902, "link": "https://stackoverflow.com/questions/29807902/changing-array-values-while-iterating-though-the-same-array-causes-strange-behav/29807989#29807989", "title": "Changing array values while iterating though the same array causes strange behaviour", "body": "<p>You're finding several symbols at the same position.\nYou need to skip further looking at i-th symbol when you found it.\nTry to add <code>break</code>:</p>\n\n<pre><code>if(encoded_message_copy[i] == substitution_alphabet[j]) {\n    printf(\"%c -&gt;&gt;&gt;&gt; %c @ index:%d \\n\",encoded_message_copy[i], original_alphabet[j], i);\n    encoded_message_copy[i] = original_alphabet[j];\n    break;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": false, "score": 1, "last_activity_date": 1429734088, "creation_date": 1429734088, "answer_id": 29808007, "question_id": 29807902, "link": "https://stackoverflow.com/questions/29807902/changing-array-values-while-iterating-though-the-same-array-causes-strange-behav/29808007#29808007", "title": "Changing array values while iterating though the same array causes strange behaviour", "body": "<p>You're changing your data - an early iteration of the outer loop changes your data so it gets seen later.</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1429734251, "creation_date": 1429734251, "answer_id": 29808069, "question_id": 29807902, "link": "https://stackoverflow.com/questions/29807902/changing-array-values-while-iterating-though-the-same-array-causes-strange-behav/29808069#29808069", "title": "Changing array values while iterating though the same array causes strange behaviour", "body": "<p>The problem is that when you use statement</p>\n\n<pre><code>        encoded_message_copy[i] = original_alphabet[j];\n</code></pre>\n\n<p>you do not break the loop. </p>\n\n<pre><code>for(int j=0; j &lt; 26 ; j++){\n\n    if(encoded_message_copy[i] == substitution_alphabet[j]){\n\n        printf(\"%c -&gt;&gt;&gt;&gt; %c @ index:%d \\n\",encoded_message_copy[i], original_alphabet[j], i);\n        encoded_message_copy[i] = original_alphabet[j];\n    }\n}\n</code></pre>\n\n<p>So the loop continues to compare the new substituted character with other characters in substitution_alphabet.</p>\n\n<p>You should break the loop if the character was already substituted</p>\n\n<pre><code>for(int j=0; j &lt; 26 ; j++){\n\n    if(encoded_message_copy[i] == substitution_alphabet[j]){\n\n        printf(\"%c -&gt;&gt;&gt;&gt; %c @ index:%d \\n\",encoded_message_copy[i], original_alphabet[j], i);\n        encoded_message_copy[i] = original_alphabet[j];\n        break;\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4887, "user_id": 83348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a1203dd766cfafabdfa21c3b196454?s=128&d=identicon&r=PG", "display_name": "mctylr", "link": "https://stackoverflow.com/users/83348/mctylr"}, "is_accepted": false, "score": 1, "last_activity_date": 1429736280, "creation_date": 1429736280, "answer_id": 29808680, "question_id": 29807902, "link": "https://stackoverflow.com/questions/29807902/changing-array-values-while-iterating-though-the-same-array-causes-strange-behav/29808680#29808680", "title": "Changing array values while iterating though the same array causes strange behaviour", "body": "<pre><code>/* msg_ptr is the position within the encoded message */\n/* letter is a numeric value which corresponds to letter of the\n   alphabet (0 maps to 'A', 1 =&gt; 'B', etc. */\nfor (int msg_ptr = 0 ; msg_ptr &lt; message_len ; msg_ptr++) {\n    for (int letter = 0; letter &lt; 26 ; letter++) {\n        if(encoded_message[msg_ptr] == substitution[letter]) {\n           encoded_message[msg_ptr] = original[letter];\n        }\n    }\n}\n</code></pre>\n\n<p>The problem may become clearer to you now. The problem is that while you modify <code>encoded_message[msg_ptr]</code> with the value from the <code>original[letter]</code>, the inner loop (the <em>letter</em> <code>for</code> loop) is next to execute / increment. This means the <code>if</code> comparison is done again for an unchanged <code>msg_ptr</code> (i) and an incremented <code>letter</code> (j) values. This means the comparison is done with the freshly decoded value at <code>encoded_message[msg_ptr]</code>.</p>\n\n<p>Once you successfully find and replace the encoded message at a given position, you want to advance to the next character in the <code>encoded_message</code> array (i.e. increment the value of <code>msg_ptr</code> (i). This can be done using the <strong><code>break</code></strong> <a href=\"https://msdn.microsoft.com/en-us/library/wt88dxx6.aspx\" rel=\"nofollow\">keyword</a>. </p>\n\n<p><a href=\"http://www.programiz.com/c-programming/c-break-continue-statement\" rel=\"nofollow\">Another site</a> has some program execution diagrams for the <code>break</code> (and <code>continue</code>) statement, which may make it clearer.</p>\n\n<hr>\n\n<p>If you have problems understanding why this is necessary (or in other words how nested loops operate), mentally run through the following example in your head, as well as your compiler to see.</p>\n\n<pre><code>for (int i = 0; i &lt; 3; i++) {\n    for (int j = 0; j &lt; 4; j++) {\n        printf(\"i=%d j=%d\\n\", i, j);\n    }\n}\n</code></pre>\n\n<p>The inner loop (<code>j</code>) by default will finish before the next <em>iteration</em> of the outer loop (<code>i</code>) occurs.</p>\n"}], "owner": {"reputation": 1419, "user_id": 3813104, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mj3AN.jpg?s=128&g=1", "display_name": "SivaDotRender", "link": "https://stackoverflow.com/users/3813104/sivadotrender"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 29807973, "answer_count": 5, "score": 0, "last_activity_date": 1429736280, "creation_date": 1429733714, "question_id": 29807902, "link": "https://stackoverflow.com/questions/29807902/changing-array-values-while-iterating-though-the-same-array-causes-strange-behav", "title": "Changing array values while iterating though the same array causes strange behaviour", "body": "<p>I wrote a loop to replace every character in a string with another using a reference array. </p>\n\n<pre><code>for(int i=0 ; i &lt; encoded_message_len ; i++){\n\n    for(int j=0; j &lt; 26 ; j++){\n\n        if(encoded_message_copy[i] == substitution_alphabet[j]){\n\n            printf(\"%c -&gt;&gt;&gt;&gt; %c @ index:%d \\n\",encoded_message_copy[i], original_alphabet[j], i);\n            encoded_message_copy[i] = original_alphabet[j];\n        }\n    }\n}\n</code></pre>\n\n<p>When I run this code however, I get a strange output: </p>\n\n<pre><code>J -&gt;&gt;&gt;&gt; C @ index:0\nH -&gt;&gt;&gt;&gt; R @ index:1\nQ -&gt;&gt;&gt;&gt; Y @ index:2\nY -&gt;&gt;&gt;&gt; Z @ index:2\nS -&gt;&gt;&gt;&gt; P @ index:3\nU -&gt;&gt;&gt;&gt; T @ index:4\nT -&gt;&gt;&gt;&gt; V @ index:4\nX -&gt;&gt;&gt;&gt; O @ index:6\nF -&gt;&gt;&gt;&gt; L @ index:7\nL -&gt;&gt;&gt;&gt; X @ index:7\nX -&gt;&gt;&gt;&gt; O @ index:8\nB -&gt;&gt;&gt;&gt; G @ index:9\nG -&gt;&gt;&gt;&gt; W @ index:9\nQ -&gt;&gt;&gt;&gt; Y @ index:10\nY -&gt;&gt;&gt;&gt; Z @ index:10\n</code></pre>\n\n<p>When I remove this line : <code>encoded_message_copy[i] = original_alphabet[j];</code> from the loop, I get the expected output: </p>\n\n<pre><code>J -&gt;&gt;&gt;&gt; C @ index:0\nH -&gt;&gt;&gt;&gt; R @ index:1\nQ -&gt;&gt;&gt;&gt; Y @ index:2\nS -&gt;&gt;&gt;&gt; P @ index:3\nU -&gt;&gt;&gt;&gt; T @ index:4\nX -&gt;&gt;&gt;&gt; O @ index:6\nF -&gt;&gt;&gt;&gt; L @ index:7\nX -&gt;&gt;&gt;&gt; O @ index:8\nB -&gt;&gt;&gt;&gt; G @ index:9\nQ -&gt;&gt;&gt;&gt; Y @ index:10\n</code></pre>\n\n<p>Can someone explain why this is happening?</p>\n"}, {"tags": ["c", "ubuntu", "sdl-2"], "answers": [{"comments": [{"owner": {"reputation": 163, "user_id": 4276300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/05cfefd25c5dfca7962375157340b9d0?s=128&d=identicon&r=PG&f=1", "display_name": "Rokner", "link": "https://stackoverflow.com/users/4276300/rokner"}, "edited": false, "score": 0, "creation_date": 1429796768, "post_id": 29814890, "comment_id": 47777090, "body": "Ok thanks. It worked when I set the blend mode to  SDL_BLENDMODE_BLEND. Method one wasn&#39;t an option for me because the texture was runtime generated through rendering on top of it."}], "tags": [], "owner": {"reputation": 1153, "user_id": 3496135, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/de2debb79517c3c97de136c4cac1d350?s=128&d=identicon&r=PG&f=1", "display_name": "kdyz", "link": "https://stackoverflow.com/users/3496135/kdyz"}, "is_accepted": true, "score": 3, "last_activity_date": 1429768662, "creation_date": 1429768662, "answer_id": 29814890, "question_id": 29807872, "link": "https://stackoverflow.com/questions/29807872/sdl2-texture-render-target-doesnt-have-alpha-transparency/29814890#29814890", "title": "SDL2 Texture Render target doesn&#39;t have alpha transparency", "body": "<p>First off, you have two methods in SDL2 if you want to have a transparent image.</p>\n\n<hr>\n\n<ul>\n<li>Method 1: (Static Method)</li>\n</ul>\n\n<p>Use an image editing software and directly change the alpha value there, it will carry on to SDL2.</p>\n\n<hr>\n\n<p>Method 2: (Dynamic Method)</p>\n\n<blockquote>\n  <blockquote>\n    <p>SDL_SetTextureBlendMode(texture, SDL_BLENDMODE_BLEND);//This sets the texture in blendmode</p>\n    \n    <p>alpha = xx //this section should be where you alter the alpha value. You can make fade in-fade out effects, etc... Just put the changes here.</p>\n    \n    <p>SDL_SetTextureAlphaMod(texture, alpha); //sets the alpha into the texture</p>\n    \n    <p>SDL_RenderCopy(renderer, texture, NULL, &amp;rect); //Redraws the image with a fresh, new alpha ~</p>\n  </blockquote>\n</blockquote>\n"}], "owner": {"reputation": 163, "user_id": 4276300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/05cfefd25c5dfca7962375157340b9d0?s=128&d=identicon&r=PG&f=1", "display_name": "Rokner", "link": "https://stackoverflow.com/users/4276300/rokner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1440, "favorite_count": 0, "accepted_answer_id": 29814890, "answer_count": 1, "score": 1, "last_activity_date": 1429768662, "creation_date": 1429733643, "question_id": 29807872, "link": "https://stackoverflow.com/questions/29807872/sdl2-texture-render-target-doesnt-have-alpha-transparency", "title": "SDL2 Texture Render target doesn&#39;t have alpha transparency", "body": "<p>I've encountered a problem while programming on C with SDL2. I have rendered to a texture simple images of squares that are transparent in the center. But when I draw the texture on which they are rendered they are not see-through. I've tried even changing the transparency of the rendered texture with SDL_SetTextureAlphaMod() but it isn't changing anything. If I change the alpha on the  textures that are being rendered(the squares). They get dimmer but still they cover anything behind them. So I'm open to suggestions.<br><br>\nThis is an image where I have lowered the alpha on the squares textueres:<a href=\"http://imgur.com/W8dNbBY\" rel=\"nofollow\">http://imgur.com/W8dNbBY</a></p>\n"}, {"tags": ["c", "binary-tree"], "answers": [{"tags": [], "owner": {"reputation": 8305, "user_id": 2654518, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e222ed5c00d3fece05f0121e059d7ea1?s=128&d=identicon&r=PG", "display_name": "ericbn", "link": "https://stackoverflow.com/users/2654518/ericbn"}, "is_accepted": true, "score": 3, "last_activity_date": 1429734313, "last_edit_date": 1429734313, "creation_date": 1429733633, "answer_id": 29807868, "question_id": 29807777, "link": "https://stackoverflow.com/questions/29807777/search-recursively-in-binary-tree-in-c/29807868#29807868", "title": "Search recursively in binary tree in C", "body": "<p>You're overwriting your node parameter variable:</p>\n\n<pre><code>node = search_RtLR(node-&gt;left, str); // overwriting node here at assignment\nif (node != NULL) return node;\nnode = search_RtLR(node-&gt;right, str); // node is NULL here, look at line above!\n</code></pre>\n\n<p>You shouldn't!</p>\n\n<p>Defining your parameters as const (since this is a function that does not change any data) also helps (as the compiler will warn you if you try to overwrite the const variables):</p>\n\n<pre><code>Node* search_RtLR(const Node* node, const char* str) {\n    if (node == NULL) return NULL;\n    if (strcmp(node-&gt;name, str) == 0) return node; \n    const Node* newNode = search_RtLR(node-&gt;left, str);\n    if (newNode != NULL) return newNode;\n    return search_RtLR(node-&gt;right, str);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "is_accepted": false, "score": 0, "last_activity_date": 1429733973, "creation_date": 1429733973, "answer_id": 29807971, "question_id": 29807777, "link": "https://stackoverflow.com/questions/29807777/search-recursively-in-binary-tree-in-c/29807971#29807971", "title": "Search recursively in binary tree in C", "body": "<p>When the string is not in the leftsubtree the recursive search returns NULL, which you assign to <code>node</code>. Then <code>search_RtLR(node-&gt;right, str)</code> searches 'nowhere'. You should not overwrite your <code>node</code>: </p>\n\n<pre><code>if (node == NULL) return NULL;\nif (strcmp(node-&gt;name, str) == 0) return node;\nnode1 = search_RtLR(node-&gt;left, str);\nif (node1 != NULL) return node1;\nnode1 = search_RtLR(node-&gt;right, str);\nif (node1 != NULL) return node1;\n\nreturn NULL;\n</code></pre>\n"}], "owner": {"reputation": 141, "user_id": 4800848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/521e0ee86600fb8aa608cf119b6e2c59?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/4800848/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 29807868, "answer_count": 2, "score": 0, "last_activity_date": 1429734313, "creation_date": 1429733280, "last_edit_date": 1429733546, "question_id": 29807777, "link": "https://stackoverflow.com/questions/29807777/search-recursively-in-binary-tree-in-c", "title": "Search recursively in binary tree in C", "body": "<p>The function receives parameter node (has member name) and str (the name to search)</p>\n\n<pre><code>{\n    if (node == NULL) return NULL;\n    if (strcmp(node-&gt;name, str) == 0) return node;\n    node = search_RtLR(node-&gt;left, str);\n    if (node != NULL) return node;\n    node = search_RtLR(node-&gt;right, str);\n    if (node != NULL) return node;\n\n    return NULL;\n}\n</code></pre>\n\n<p>When I search a name that is in left subtree, it works, but when I search in right subtree the program terminates(also when there is no such name in the tree), and I can't find what's wrong. The tree is not sorted in alphabetical order.</p>\n"}, {"tags": ["c", "linux", "system-calls"], "comments": [{"owner": {"reputation": 1, "user_id": 4820917, "user_type": "registered", "profile_image": "https://graph.facebook.com/678970882232242/picture?type=large", "display_name": "Sheanan Verma", "link": "https://stackoverflow.com/users/4820917/sheanan-verma"}, "reply_to_user": {"reputation": 1081, "user_id": 4629102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/857b6d784b99de3915d9dfb4de92d67d?s=128&d=identicon&r=PG&f=1", "display_name": "Iqbal S", "link": "https://stackoverflow.com/users/4629102/iqbal-s"}, "edited": false, "score": 0, "creation_date": 1429731357, "post_id": 29807130, "comment_id": 47742414, "body": "Error: /tmp/cc6wIvoJ.o: In function main&#39;: j.c:(.text+0x81): undefined reference toexcel&#39;  j.c:(.text+0xcf): undefined reference to `excel&#39;  collect2: error: ld returned 1 exit status"}], "answers": [{"tags": [], "owner": {"reputation": 3265, "user_id": 2606938, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7gIUB.jpg?s=128&g=1", "display_name": "Prabhu", "link": "https://stackoverflow.com/users/2606938/prabhu"}, "is_accepted": false, "score": 0, "last_activity_date": 1429731739, "creation_date": 1429731739, "answer_id": 29807325, "question_id": 29807130, "link": "https://stackoverflow.com/questions/29807130/compilation-error-in-i-o-redirection-in-c-program-in-linux/29807325#29807325", "title": "Compilation Error in i/o redirection in C program in linux", "body": "<p>There isn't a system call called <code>excel</code>. Hence you are getting undefined error. Try using one of the <code>exec()</code> family of calls like execl. - </p>\n\n<blockquote>\n  <p><a href=\"http://linux.die.net/man/3/execl\" rel=\"nofollow\">http://linux.die.net/man/3/execl</a></p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 8730, "user_id": 551514, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/606c8931ba3660ab28aad15d82840dd4?s=128&d=identicon&r=PG", "display_name": "resultsway", "link": "https://stackoverflow.com/users/551514/resultsway"}, "is_accepted": false, "score": 0, "last_activity_date": 1429915812, "last_edit_date": 1429915812, "creation_date": 1429731781, "answer_id": 29807340, "question_id": 29807130, "link": "https://stackoverflow.com/questions/29807130/compilation-error-in-i-o-redirection-in-c-program-in-linux/29807340#29807340", "title": "Compilation Error in i/o redirection in C program in linux", "body": "<p>Its execl not excel . execl is the call you are looking for.</p>\n"}, {"tags": [], "owner": {"reputation": 3598, "user_id": 4822941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06bJl.jpg?s=128&g=1", "display_name": "employee of the month", "link": "https://stackoverflow.com/users/4822941/employee-of-the-month"}, "is_accepted": false, "score": 1, "last_activity_date": 1429775814, "last_edit_date": 1429775814, "creation_date": 1429774431, "answer_id": 29816671, "question_id": 29807130, "link": "https://stackoverflow.com/questions/29807130/compilation-error-in-i-o-redirection-in-c-program-in-linux/29816671#29816671", "title": "Compilation Error in i/o redirection in C program in linux", "body": "<p>There are some bogus answers here which I can't comment on since I don't have '50 reputation' points. Hence an entirely new reply instead.</p>\n\n<p>As correctly noted by people you obviously have a typo, you want <em>execl</em> instead of <em>excel</em>.</p>\n\n<p>However, people claim that execl is a system call. IT IS NOT. It's a convenience function in your libc. Syscall which is executed at the end of the day is execve, which you can confirm by e.g. using strace.</p>\n\n<p>There are several issues with your code, do you have warnings enabled when you compile? -Wall -Wextra to gcc will definitely help out.</p>\n\n<p>Example issues:\n- wait() <em>takes an argument</em>, and you would be warned about this if only you had proper header files included\n- missing error checking (fork, pipe, wait)</p>\n\n<p>In general your coding style will lead you to trouble.</p>\n\n<p>Always include relevant headers (to be found in manpages) and check return values.</p>\n"}], "owner": {"reputation": 1, "user_id": 4820917, "user_type": "registered", "profile_image": "https://graph.facebook.com/678970882232242/picture?type=large", "display_name": "Sheanan Verma", "link": "https://stackoverflow.com/users/4820917/sheanan-verma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 325, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1429915812, "creation_date": 1429731043, "last_edit_date": 1429740609, "question_id": 29807130, "link": "https://stackoverflow.com/questions/29807130/compilation-error-in-i-o-redirection-in-c-program-in-linux", "title": "Compilation Error in i/o redirection in C program in linux", "body": "<p>I'm trying to make a simple I/O redirection(ls to sort)(ls|sort>f1) and then my next step is to direct the output of sort to a file in C but when compiling gcc is giving following error..plz help me :)</p>\n\n<p>Code</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;fcntl.h&gt;\n#include&lt;string.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;sys/types.h&gt;\n#include&lt;unistd.h&gt;\nint main()\n{\nint a,b,c,d,pfd[2],kk,i,j;\nFILE *fp;\n\ni=fork();\nif(i==0)\n{\n    pipe(pfd);\n    j=fork();\n    if(j==0)\n    {\n        close(1);\n        dup(pfd[1]);\n        close(pfd[0]);\n        close(pfd[1]);\n        excel(\"/bin/ls\",\"/ls\",0);\n    }\n    else\n    {\n        close(0);\n        dup(pfd[0]);\n        close(pfd[0]);\n        close(pfd[1]);\n        /*close(1);\n        kk=open(f.txt,O_WRONLY);\n        dup(kk);\n        */\n        excel(\"/usr/bin/sort\",\"/sort\",0);\n    }\n}\nelse\n    wait();\n/*char k[100],pp[100],ll[]=\"/bin/\";\nprintf(\"Enter the cmd to execut\");\nscanf(\"%s\",k);\nstrcpy(pp,k);\nstrcat(ll,k);\nprintf(\"%s\",ll);\nsystem(ll);*/\n    return 0;\n}\n</code></pre>\n\n<p><strong>Error:</strong></p>\n\n<blockquote>\n  <p><em>/tmp/cc6wIvoJ.o:</em></p>\n\n<pre><code>In function **main**:\nj.c:(.text+0x81): undefined reference to **excel**\n\nj.c:(.text+0xcf): undefined reference to **excel**\n\ncollect2: error: ld returned 1 exit status\n</code></pre>\n</blockquote>\n"}, {"tags": ["c", "function", "recursion", "self", "getchar"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1429730419, "post_id": 29806893, "comment_id": 47741833, "body": "See previous question, there are lots of others: <a href=\"http://stackoverflow.com/questions/7937789/how-does-the-c-code-that-prints-from-1-to-1000-without-loops-or-conditional-stat\" title=\"how does the c code that prints from 1 to 1000 without loops or conditional stat\">stackoverflow.com/questions/7937789/&hellip;</a>"}, {"owner": {"reputation": 40537, "user_id": 465378, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c03b8d34978563858020eff0d14cc17b?s=128&d=identicon&r=PG", "display_name": "Alexis King", "link": "https://stackoverflow.com/users/465378/alexis-king"}, "edited": false, "score": 0, "creation_date": 1429730608, "post_id": 29806893, "comment_id": 47741941, "body": "This looks like an program that would print stdin in reverse, though it would probably stack overflow for any large inputs."}], "answers": [{"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1429732151, "last_edit_date": 1429732151, "creation_date": 1429730619, "answer_id": 29807011, "question_id": 29806893, "link": "https://stackoverflow.com/questions/29806893/what-does-this-program-do-self-calling-main-function-getchar/29807011#29807011", "title": "What does this program do? (Self calling main function + getchar)", "body": "<p>It is a recursive function that echoes in the reverse order entered by the user characters until the end of file key combination will be pressed.</p>\n\n<p>The first enetered character will be outputed last because between its input and output there is next call of main</p>\n\n<pre><code>   if (( c = getchar() ) != EOF) {\n        main();\n        printf(\"%c\", c);\n   }\n</code></pre>\n\n<p>So this porgram simulates a stack.</p>\n\n<p>Here is a similar program that outputs the name of the program file in the reverse order</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main( int argc, char *argv[] ) \n{\n    if ( *argv != NULL &amp;&amp; **argv != '\\0' )\n    {\n        char c = *( *argv )++;\n        main( argc, argv );\n        printf( \"%c\", c );\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": true, "score": 1, "last_activity_date": 1429730920, "creation_date": 1429730920, "answer_id": 29807093, "question_id": 29806893, "link": "https://stackoverflow.com/questions/29806893/what-does-this-program-do-self-calling-main-function-getchar/29807093#29807093", "title": "What does this program do? (Self calling main function + getchar)", "body": "<p>The program <em>is</em> satisfied, by the <code>EOF</code> returned by <code>getchar()</code>, achieved by entering <code>Ctrl^Z</code> (Windows console) or <code>Ctrl-D</code> (Linux). The program will continue to recurse until that happens (unless the stack breaks). After getting <code>EOF</code> it drops out of all the recursion printing the inputs in reverse order (including a character representing <code>EOF</code>).</p>\n\n<p>Note that the <code>EOF</code> typed must be the first keystroke after an <code>Enter</code> key.</p>\n"}], "owner": {"reputation": 5, "user_id": 4821082, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mGtFiXqJSwI/AAAAAAAAAAI/AAAAAAAAAJs/Oth0ScwmUOI/photo.jpg?sz=128", "display_name": "Snoviet", "link": "https://stackoverflow.com/users/4821082/snoviet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 276, "favorite_count": 0, "accepted_answer_id": 29807093, "answer_count": 2, "score": -3, "last_activity_date": 1429732151, "creation_date": 1429730203, "last_edit_date": 1429730459, "question_id": 29806893, "link": "https://stackoverflow.com/questions/29806893/what-does-this-program-do-self-calling-main-function-getchar", "title": "What does this program do? (Self calling main function + getchar)", "body": "<p>Can anybody help me explain this question from a past exam paper? When I compile it, it is never satisfied with any input. Also, what is the reason for the self calling main function?</p>\n\n<p><strong>What does the following program do? Justify your answer.</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main ( void ) {\n    int c;\n    if (( c = getchar() ) != EOF) {\n        main();\n        printf(\"%c\", c);\n    }\n    return 0; \n}\n</code></pre>\n"}, {"tags": ["c++", "c", "linux", "opencv", "raspberry-pi"], "comments": [{"owner": {"reputation": 96886, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 3, "creation_date": 1429729381, "post_id": 29806609, "comment_id": 47741150, "body": "This is a C99 feature and is not available in C++ as written. You would just instantiate your <code>struct</code> variable, then assign to the named members afterwards, you cannot initialize using the name members as written."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 96886, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1429729547, "post_id": 29806609, "comment_id": 47741256, "body": "@Cyber Does that question explain how to do the equivalent in C++? If not, it&#39;s not a duplicate."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1429729568, "post_id": 29806609, "comment_id": 47741268, "body": "You should not convert working C-code. I suggest wrapping the C-code with C++ (if it has development/maintenance benefits)"}, {"owner": {"reputation": 96886, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1429729577, "post_id": 29806609, "comment_id": 47741280, "body": "@Barmar No it doesn&#39;t, but if they understand what it is doing, they&#39;ll know how to do it in C++. Especially since I explained it in the comment following the duplicate link."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1429729665, "post_id": 29806609, "comment_id": 47741352, "body": "That&#39;s quite an assumption from someone who&#39;s been here as long as you have :)"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1429731088, "post_id": 29806609, "comment_id": 47742236, "body": "The duplicate does not explain how to do this in C++, reopening."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 96886, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1429732303, "post_id": 29806609, "comment_id": 47743029, "body": "@Cyber : But that is neither the only or even the best method of initialising structure members in C++, and comments are not intended for posting answers in any case.  By closing the question down you got your &quot;answer&quot; in in a comment then prevented anyone else from posting an answer in the correct manner"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 1, "creation_date": 1429732543, "post_id": 29806609, "comment_id": 47743171, "body": "@DieterL&#252;cking : I would say &quot;need not&quot; rather than &quot;should not&quot;, but it is a worthwhile point to make that C and C++ are interoperable, and it is often a waste of effort to &quot;convert&quot; C code rather then simply using it as-is, as you risk changing the semantics in ways that are not always obvious.  And of course because C99 has diverged from C++ so it may just be hard work."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 96886, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1429734070, "post_id": 29806609, "comment_id": 47744119, "body": "@Cyber: Your suggestion is not a method of <i>initializing</i> members at all.  There&#39;s a world of difference between initialization and assignment (even in C -- you cannot put those <i>assignment statements</i> outside of a function, though that appears not to be an issue in this specific case)"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1429734195, "post_id": 29806609, "comment_id": 47744204, "body": "@Clifford: And then it is a duplicate after all."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1429778971, "post_id": 29806609, "comment_id": 47763285, "body": "@BenVoigt : It is a duplicate of the question you have identified - it was <i>not</i> a duplicate of the <a href=\"http://stackoverflow.com/questions/8047261/what-does-dot-mean-in-a-struct-initializer\">question previously identified</a> by Cyber as its duplicate."}], "answers": [{"comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1429734090, "post_id": 29807186, "comment_id": 47744136, "body": "Aggregate initialization still works just fine in C++."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1429778400, "post_id": 29807186, "comment_id": 47762891, "body": "@BenVoigt :  I have not said otherwise (although I edited to clarify - perhaps you are referring ot the pre-edited text?); you answer remains valid - I have chosen not to duplicate it.  I would suggest that C99 has named member initialisation because it does not have constructors, and equally C++ does not have named member initialisation <i>because</i> it does have constructors.  I am simply stating this method as the C++ method of selective member initialisation."}], "tags": [], "owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "is_accepted": true, "score": 1, "last_activity_date": 1429779538, "last_edit_date": 1429779538, "creation_date": 1429731236, "answer_id": 29807186, "question_id": 29806609, "link": "https://stackoverflow.com/questions/29806609/converting-code-from-c-to-c/29807186#29807186", "title": "Converting code from c to c++", "body": "<p>The named structure member initialisation in C99 is not implemented in C++.  In C++ you can perform member initialisation using a constructor.  E.g:</p>\n\n<pre><code>struct sConfig \n{\n    int m_x ;\n    int m_y ;\n\n    sConfig( int x, int y ) : m_x(x),\n                              m_y(y)\n    {}\n} ;\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>struct sConfig \n{\n    int m_x ;\n    int m_y ;\n\n    sConfig( int x, int y )\n    {\n        m_x = x ;\n        m_y = y ;\n    }\n} ;\n</code></pre>\n\n<p>or even a combination of the two methods.  Then you instantiate an object thus:</p>\n\n<pre><code>sConfig myConfig( 10, 20 ) ;\n</code></pre>\n\n<p>Initialising <code>m_x</code> and <code>m_y</code> to 10 and 20 respectively in this example.</p>\n\n<p>You can then of course only perform the initialisation provided by the structures defined constructors; but that is not necessarily a bad thing - letting the user arbitrarily decide which members to initialise is not particularly safe or maintainable.  You can of course define multiple constructors to perform different initialisations; you would normally want define a default constructor for example:</p>\n\n<pre><code>struct sConfig \n{\n    int m_x ;\n    int m_y ;\n\n    sConfig( int x, int y ) : m_x(x),\n                              m_y(y)\n    {}\n\n    sConfig( ) : m_x(0),\n                 m_y(0)\n    {}\n} ;\n</code></pre>\n\n<p>So that in this example:</p>\n\n<pre><code>sConfig myConfig ;\n</code></pre>\n\n<p>is equivalent to all of the following:</p>\n\n<pre><code>sConfig myConfig( 0, 0 ) ;\nsConfig myConfig = { 0, 0 } ;\nsConfig myConfig = {0} ;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1429778669, "post_id": 29807199, "comment_id": 47763085, "body": "C++ supports named initialisers using a different syntax via constructor initialiser lists."}], "tags": [], "owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "is_accepted": false, "score": 2, "last_activity_date": 1429731270, "creation_date": 1429731270, "answer_id": 29807199, "question_id": 29806609, "link": "https://stackoverflow.com/questions/29806609/converting-code-from-c-to-c/29807199#29807199", "title": "Converting code from c to c++", "body": "<p>C++ doesn't support named initializers, only positional ones.</p>\n\n<p>You'll have to read the <code>struct</code> definition and arrange all the initializers into declaration order.</p>\n\n<p>Any members which weren't being named in the C code were being initialized to zero implicitly.  You may have to make some of them explicit in order to not skip positions.</p>\n\n<p>If this code is from <a href=\"http://www.jvcref.com/files/PI/documentation/html/struct_m_m_a_l___p_a_r_a_m_e_t_e_r___c_a_m_e_r_a___c_o_n_f_i_g___t.html\" rel=\"nofollow\">JVCleave</a> then it appears that the members are already in the correct order, you can just comment out the names and it will still work.</p>\n"}], "owner": {"reputation": 256, "user_id": 3397436, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/27e8ba40a23a05c85c114f2dc61ee21f?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/3397436/matthew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 0, "closed_date": 1429734174, "accepted_answer_id": 29807186, "answer_count": 2, "score": 0, "last_activity_date": 1429779538, "creation_date": 1429729276, "last_edit_date": 1429732107, "question_id": 29806609, "link": "https://stackoverflow.com/questions/29806609/converting-code-from-c-to-c", "closed_reason": "Duplicate", "title": "Converting code from c to c++", "body": "<p>I'm trying to convert some code from C to C++\nThis is a project using a raspberry pi with camera module and I'd like to analyse pictures with it.</p>\n\n<p>But on this piece of code (somebody else created) I get this error</p>\n\n<pre><code>231:8: error: expected primary-expression before \u2018.\u2019 token\n</code></pre>\n\n<p>Which is this line:</p>\n\n<pre><code>.max_stills_w = state-&gt;width,\n</code></pre>\n\n<p>I tried everything I could find but it keeps giving me other errors</p>\n\n<pre><code>    video_port = camera-&gt;output[MMAL_CAMERA_VIDEO_PORT];\n    still_port = camera-&gt;output[MMAL_CAMERA_CAPTURE_PORT];\n\n    //  set up the camera configuration\n    {\n       MMAL_PARAMETER_CAMERA_CONFIG_T cam_config =\n       {\n          { MMAL_PARAMETER_CAMERA_CONFIG, sizeof(cam_config) },\n          .max_stills_w = state-&gt;width,\n          .max_stills_h = state-&gt;height,\n          .stills_yuv422 = 0,\n          .one_shot_stills = 0,\n          .max_preview_video_w = state-&gt;width,\n          .max_preview_video_h = state-&gt;height,\n          .num_preview_video_frames = 3,\n          .stills_capture_circular_buffer_height = 0,\n          .fast_preview_resume = 0,\n          .use_stc_timestamp = MMAL_PARAM_TIMESTAMP_MODE_RESET_STC\n       };\n       mmal_port_parameter_set(camera-&gt;control, &amp;cam_config.hdr);\n    }\n    // Set the encode format on the video  port\n</code></pre>\n"}, {"tags": ["c", "lua"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 4793310, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OxtGR.png?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/4793310/alex"}, "edited": false, "score": 0, "creation_date": 1429778816, "post_id": 29810494, "comment_id": 47763172, "body": "I corrected the typo in the <code>a = realloc[ud](L, a, a-&gt;size,</code> statement.  I will follow lhf&#39;s advice. Thank you both ! Alexander"}], "tags": [], "owner": {"reputation": 5811, "user_id": 2726734, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JkA2E.jpg?s=128&g=1", "display_name": "ryanpattison", "link": "https://stackoverflow.com/users/2726734/ryanpattison"}, "is_accepted": false, "score": 0, "last_activity_date": 1429743752, "creation_date": 1429743752, "answer_id": 29810494, "question_id": 29806478, "link": "https://stackoverflow.com/questions/29806478/reallocating-resizing-lua-5-1-userdata-in-c/29810494#29810494", "title": "Reallocating/resizing Lua 5.1 userdata in C", "body": "<p>you have:</p>\n\n<pre><code>static int numarray_resize (lua_State *L) {\n\n    [...]\n\n    if (n &gt; a-&gt;size) {  /* extend */\n        a = realloc(L, a, a-&gt;size, n, a-&gt;isnumber ? sizeof(lua_Number) : sizeof(char), sizeof(NumArray));\n        if (a-&gt;isnumber) {\n\n  [...]\n</code></pre>\n\n<p>But <code>realloc</code> takes 2 arguments, you want <code>reallocud</code>.</p>\n\n<p><code>realloc</code>ing <code>L</code> with size <code>a</code> is likely to be a giant number and <code>L</code> may not have ever been allocated by the alloc family so there a couple reasons to get <code>NULL</code> unexpectedly.</p>\n"}, {"tags": [], "owner": {"reputation": 64130, "user_id": 107090, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/RZVHK.png?s=128&g=1", "display_name": "lhf", "link": "https://stackoverflow.com/users/107090/lhf"}, "is_accepted": false, "score": 3, "last_activity_date": 1429767840, "last_edit_date": 1429767840, "creation_date": 1429747218, "answer_id": 29811127, "question_id": 29806478, "link": "https://stackoverflow.com/questions/29806478/reallocating-resizing-lua-5-1-userdata-in-c/29811127#29811127", "title": "Reallocating/resizing Lua 5.1 userdata in C", "body": "<p>There is no need to mess with the internals of Lua.</p>\n\n<p>But you need to change how the userdata is created: instead of allocating the struct and the data in the same memory block, allocate them separately, using <code>lua_newuserdata</code> to allocate the struct and <code>malloc</code> to allocate the data.</p>\n\n<p>Then, to resize the data part, just update the size in the struct and <code>realloc</code> the data part.</p>\n"}], "owner": {"reputation": 21, "user_id": 4793310, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OxtGR.png?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/4793310/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 387, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1429778757, "creation_date": 1429728792, "last_edit_date": 1429778757, "question_id": 29806478, "link": "https://stackoverflow.com/questions/29806478/reallocating-resizing-lua-5-1-userdata-in-c", "title": "Reallocating/resizing Lua 5.1 userdata in C", "body": "<p>How do you resize a Lua 5.1 userdata object in C during runtime?</p>\n\n<p>I would like to change the size of the NumArray structure described in Roberto Ierusalimschy's book Programming in Lua, 2nd edition, pp. 260, from the Lua 5.1 console.</p>\n\n<p>My NumArray userdata can either store unsigned chars or lua_Numbers. I played around with calling the unmodified luaM_realloc_ function defined in lmem.c, but finally any call to C's realloc \n(via l_alloc) function just returns NULL, so I get a <code>not enough memory</code> error message.</p>\n\n<p>Would somebody please help me ?</p>\n\n<pre><code>--- lapi.c -------------------------------------------------------------------------------------------------\n\nLUA_API void *agn_resizeud (lua_State *L, void *block, size_t osize, size_t nsize) {\n  Udata *u = (Udata *)luaM_realloc_(L, block, osize + sizeof(Udata), nsize + sizeof(Udata));\n  u-&gt;uv.len = nsize;\n  if (u == NULL)\n    luaL_error(L, \"Error in \" LUA_QS \": failed to allocate memory.\", \"API/agn_resizeud\");\n  return u;\n}\n\n--- numarray.c ---------------------------------------------------------------------------------------------\n\n#define checkarray(L, n) (NumArray *)luaL_checkudata(L, n, \"numarray\")\n\n[...]\n\n/* Auxiliary C function to finally call luaM_realloc_ via the Lua C API */\n\nvoid *reallocud (lua_State *L, void *block, size_t o, size_t n, size_t sizeofelem, size_t sizeofnumarray) {\n  if (n + 1 &gt; MAX_SIZET/sizeofelem)\n    luaL_error(L, \"Error in \" LUA_QS \": memory allocation error: block too big.\", \"(reallocud)\", n);\n  else\n    return agn_resizeud(L, block, sizeofnumarray + o*sizeofelem, sizeofnumarray + n*sizeofelem);\n}\n\n/* function to resize a NumArray */\n\nstatic int numarray_resize (lua_State *L) {\n  size_t i;\n  global_State *g = G(L);\n  NumArray *a = checkarray(L, 1);\n  int n = luaL_checkinteger(L, 2);\n  if (n &lt; 1)\n    luaL_error(L, \"Error in \" LUA_QS \": new size %d is non-positive.\", \"numarray.resize\", n);\n  if (n == a-&gt;size) {   /* do nothing and do not complain */\n    lua_pushinteger(L, a-&gt;size);\n    return 1;\n  }\n  if (n &gt; a-&gt;size) {  /* extend */\n    a = reallocud(L, a, a-&gt;size, n, a-&gt;isnumber ? sizeof(lua_Number) : sizeof(char), sizeof(NumArray));\n    if (a-&gt;isnumber) {\n      for (i=a-&gt;size; i &lt; n; i++) a-&gt;data.n[i] = 0;\n    } else {\n      for (i=a-&gt;size; i &lt; n; i++) a-&gt;data.c[i] = 0;\n    }\n  } else {  /* reduce */\n    if (a-&gt;isnumber) {\n      for (i=a-&gt;size - 1; i &gt; n - 1; i--) a-&gt;data.n[i] = 0;\n    } else {\n      for (i=a-&gt;size - 1; i &gt; n - 1; i--) a-&gt;data.c[i] = 0;\n    }\n    a = reallocud(L, a, a-&gt;size, n, a-&gt;isnumber ? sizeof(lua_Number) : sizeof(char), sizeof(NumArray));\n  }\n  a-&gt;size = n;\n  lua_pushnumber(L, a-&gt;size);\n  return 1;\n}\n\n[...]\n\ntypedef struct NumArray {\n  size_t size;           /* number of slots */\n  char isnumber;\n  union data {\n    lua_Number n[1];  /* pointer to the various lua_Number values */\n    unsigned char c[1];\n  } data;\n} NumArray;\n</code></pre>\n"}, {"tags": ["c", "mpi", "deadlock"], "comments": [{"owner": {"reputation": 8043, "user_id": 491687, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/2174f845b769ea2ad2242047f3118128?s=128&d=identicon&r=PG", "display_name": "Wesley Bland", "link": "https://stackoverflow.com/users/491687/wesley-bland"}, "edited": false, "score": 0, "creation_date": 1429731090, "post_id": 29806195, "comment_id": 47742239, "body": "Please do cut the code down."}, {"owner": {"reputation": 1618, "user_id": 635923, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7cdb4e4ac630893dd32c29769c0ba0e0?s=128&d=identicon&r=PG", "display_name": "Daniel Lopez", "link": "https://stackoverflow.com/users/635923/daniel-lopez"}, "reply_to_user": {"reputation": 8043, "user_id": 491687, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/2174f845b769ea2ad2242047f3118128?s=128&d=identicon&r=PG", "display_name": "Wesley Bland", "link": "https://stackoverflow.com/users/491687/wesley-bland"}, "edited": false, "score": 0, "creation_date": 1429731342, "post_id": 29806195, "comment_id": 47742408, "body": "I cut it down. If more please let me know. I can cut down even further."}, {"owner": {"reputation": 8043, "user_id": 491687, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/2174f845b769ea2ad2242047f3118128?s=128&d=identicon&r=PG", "display_name": "Wesley Bland", "link": "https://stackoverflow.com/users/491687/wesley-bland"}, "edited": false, "score": 0, "creation_date": 1429731408, "post_id": 29806195, "comment_id": 47742449, "body": "&quot;Cut it down&quot; doesn&#39;t mean to make it not compile. You code should be a minimal, self-contained example as per the guide: <a href=\"http://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>."}, {"owner": {"reputation": 1618, "user_id": 635923, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7cdb4e4ac630893dd32c29769c0ba0e0?s=128&d=identicon&r=PG", "display_name": "Daniel Lopez", "link": "https://stackoverflow.com/users/635923/daniel-lopez"}, "reply_to_user": {"reputation": 8043, "user_id": 491687, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/2174f845b769ea2ad2242047f3118128?s=128&d=identicon&r=PG", "display_name": "Wesley Bland", "link": "https://stackoverflow.com/users/491687/wesley-bland"}, "edited": false, "score": 0, "creation_date": 1429731518, "post_id": 29806195, "comment_id": 47742532, "body": "The code can&#39;t be smaller and compilable.  This as small as a parallel program is going to get. Its mainly the extra whitespace that is hard to remove because when you paste in StackOverflow the formatting becomes a nag."}, {"owner": {"reputation": 8043, "user_id": 491687, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/2174f845b769ea2ad2242047f3118128?s=128&d=identicon&r=PG", "display_name": "Wesley Bland", "link": "https://stackoverflow.com/users/491687/wesley-bland"}, "edited": false, "score": 0, "creation_date": 1429731639, "post_id": 29806195, "comment_id": 47742623, "body": "In that case, the original version is needed."}, {"owner": {"reputation": 8043, "user_id": 491687, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/2174f845b769ea2ad2242047f3118128?s=128&d=identicon&r=PG", "display_name": "Wesley Bland", "link": "https://stackoverflow.com/users/491687/wesley-bland"}, "edited": false, "score": 0, "creation_date": 1429731816, "post_id": 29806195, "comment_id": 47742745, "body": "We also need the writeMatrix, readMatrix, and Multiply functions and some sample input. This version still won&#39;t compile."}, {"owner": {"reputation": 1618, "user_id": 635923, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7cdb4e4ac630893dd32c29769c0ba0e0?s=128&d=identicon&r=PG", "display_name": "Daniel Lopez", "link": "https://stackoverflow.com/users/635923/daniel-lopez"}, "reply_to_user": {"reputation": 8043, "user_id": 491687, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/2174f845b769ea2ad2242047f3118128?s=128&d=identicon&r=PG", "display_name": "Wesley Bland", "link": "https://stackoverflow.com/users/491687/wesley-bland"}, "edited": false, "score": 0, "creation_date": 1429731877, "post_id": 29806195, "comment_id": 47742772, "body": "Added the whole code and I also added output of the program. If it helps."}, {"owner": {"reputation": 8043, "user_id": 491687, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/2174f845b769ea2ad2242047f3118128?s=128&d=identicon&r=PG", "display_name": "Wesley Bland", "link": "https://stackoverflow.com/users/491687/wesley-bland"}, "reply_to_user": {"reputation": 1618, "user_id": 635923, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7cdb4e4ac630893dd32c29769c0ba0e0?s=128&d=identicon&r=PG", "display_name": "Daniel Lopez", "link": "https://stackoverflow.com/users/635923/daniel-lopez"}, "edited": false, "score": 0, "creation_date": 1429732107, "post_id": 29806195, "comment_id": 47742911, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/75975/discussion-between-wesley-bland-and-daniel-lopez\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 8727, "user_id": 2999346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQ1wB.png?s=128&g=1", "display_name": "francis", "link": "https://stackoverflow.com/users/2999346/francis"}, "is_accepted": true, "score": 3, "last_activity_date": 1429733331, "creation_date": 1429733331, "answer_id": 29807788, "question_id": 29806195, "link": "https://stackoverflow.com/questions/29806195/trouble-resolving-deadlock-in-mpi-program-dealing-with-a-cartesian-mesh/29807788#29807788", "title": "Trouble Resolving Deadlock in MPI Program dealing with a Cartesian mesh", "body": "<p>There are two little issues to get something working :</p>\n\n<ul>\n<li><p>In lines :</p>\n\n<pre><code>a = calloc(n*n, sizeof(double));\nb = calloc(n*n, sizeof(double));\nc = calloc(n*n, sizeof(double));\nMPI_Bcast(&amp;n, 1, MPI_INT, 0, MPI_COMM_WORLD);\n</code></pre></li>\n</ul>\n\n<p><code>n</code> should be broadcasted before allocating <code>a</code>. Otherwise, <code>n</code> is not initialized and the output is undefined. It can trigger a segmentation fault.</p>\n\n<ul>\n<li><p>In the function <a href=\"http://www.mpich.org/static/docs/v3.1/www3/MPI_Cart_shift.html\" rel=\"nofollow\"><code>MPI_Cart_shift</code></a>, the third argument is the displacement : negative for downward and positive for upward. I changed it to set the same displacement for everyone and it worked fine. Even if <a href=\"https://www.open-mpi.org/doc/v1.8/man3/MPI_Sendrecv_replace.3.php\" rel=\"nofollow\"><code>MPI_Sendrecv_replace()</code></a> is used, the number of messages received by a process must match the number of messages sent to this process. It is likely not the case in your call to <code>MPI_Sendrecv_replace()</code> :</p>\n\n<pre><code>MPI_Cart_shift(comm_2d, 0, -mycoords[0], &amp;shiftsource, &amp;shiftdest); \nMPI_Sendrecv_replace(a, nlocal*nlocal, MPI_DOUBLE, shiftdest,1, shiftsource, 1, comm_2d, &amp;status);\n</code></pre></li>\n</ul>\n\n<p>In the <a href=\"https://www.open-mpi.org/doc/v1.8/man3/MPI_Cart_shift.3.php\" rel=\"nofollow\">\"skew\" example of open-mpi</a>, it is slightly different :</p>\n\n<pre><code> C compute shift source and destination\n    CALL MPI_CART_SHIFT(comm, 0, coords(2), source,\n                        dest, ierr)\n  C skew array\n    CALL MPI_SENDRECV_REPLACE(A, 1, MPI_REAL, dest, 0,\n                              source, 0, comm, status,\n                              ierr)\n</code></pre>\n\n<p>In this case, all processes in each line get the same displacement. Hence, each process should send a message and each process should receive one. Yet, the displacement depends on the line and the matrix is skewed.</p>\n\n<p>Here is the resulting code. It is compiled by <code>mpicc main.c -o main -lm -Wall</code> and run by <code>mpirun -np 4 main</code> :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n#include \"mpi.h\"\n\nint main(int argc, char **argv) \n{\n\n    MPI_Init(&amp;argc, &amp;argv);   \n\n    double* a,*b,*c;\n    int i, t, n;\n    int nlocal; \n    int npes, dims[2], periods[2]; \n    int myrank, my2drank, mycoords[2]; \n    int uprank, downrank, leftrank, rightrank; \n    int shiftsource, shiftdest; \n    MPI_Status status; \n    MPI_Comm comm_2d; \n\n\n    MPI_Comm_size(MPI_COMM_WORLD, &amp;npes); \n    MPI_Comm_rank(MPI_COMM_WORLD, &amp;myrank); \n\n    MPI_Barrier(MPI_COMM_WORLD);\n\n    t = -MPI_Wtime();\n\n\n    if (myrank == 0) {\n\n        int sizeA,sizeB;\n        printf(\"Reading \\n\");\n        //  a = readMatrix(argv[1], &amp;sizeA);\n        sizeA=16;\n        a=malloc(sizeA*sizeA*sizeof(double));\n        //  b = readMatrix(argv[2], &amp;sizeB);\n        sizeB=16;\n        b=malloc(sizeB*sizeB*sizeof(double));\n        printf(\"Reading \\n\");\n        c = calloc(sizeA*sizeB, sizeof(double));\n        n = sizeA;\n        MPI_Bcast(&amp;n, 1, MPI_INT, 0, MPI_COMM_WORLD);\n        MPI_Bcast(a, n*n, MPI_DOUBLE, 0, MPI_COMM_WORLD);\n        MPI_Bcast(b, n*n, MPI_DOUBLE, 0, MPI_COMM_WORLD);\n        MPI_Bcast(c, n*n, MPI_DOUBLE, 0, MPI_COMM_WORLD);\n\n        if (sizeA != sizeB) {\n            printf(\"Matrix not sized n^2\\n\");\n            MPI_Abort(MPI_COMM_WORLD, 0);\n        }\n\n\n    }\n    else {\n        MPI_Bcast(&amp;n, 1, MPI_INT, 0, MPI_COMM_WORLD);//n should be broadcast before allocation\n        a = calloc(n*n, sizeof(double));\n        b = calloc(n*n, sizeof(double));\n        c = calloc(n*n, sizeof(double));\n\n        MPI_Bcast(a, n*n, MPI_DOUBLE, 0, MPI_COMM_WORLD);\n        MPI_Bcast(b, n*n, MPI_DOUBLE, 0, MPI_COMM_WORLD);\n        MPI_Bcast(c, n*n, MPI_DOUBLE, 0, MPI_COMM_WORLD);\n    }\n\n\n    dims[0] = dims[1] = sqrt(npes); \n\n\n\n\n    periods[0] = periods[1] = 1; \n\n\n    MPI_Cart_create(MPI_COMM_WORLD, 2, dims, periods, 1, &amp;comm_2d); \n\n\n    MPI_Comm_rank(comm_2d, &amp;my2drank); \n    MPI_Cart_coords(comm_2d, my2drank, 2, mycoords); \n\n\n    MPI_Cart_shift(comm_2d, 0, -1, &amp;rightrank, &amp;leftrank); \n    MPI_Cart_shift(comm_2d, 1, -1, &amp;downrank, &amp;uprank); \n\n\n    nlocal = n/dims[0]; \n\n    MPI_Cart_shift(comm_2d, 0, -1, &amp;shiftsource, &amp;shiftdest); \n    // MPI_Cart_shift(comm_2d, 0, -mycoords[0], &amp;shiftsource, &amp;shiftdest); \n    MPI_Sendrecv_replace(a, nlocal*nlocal, MPI_DOUBLE, shiftdest,5, shiftsource, 5, comm_2d, &amp;status); \n\n    // MPI_Cart_shift(comm_2d, 1, -mycoords[1], &amp;shiftsource, &amp;shiftdest);\n    MPI_Cart_shift(comm_2d, 1, -1, &amp;shiftsource, &amp;shiftdest); \n    MPI_Sendrecv_replace(b, nlocal*nlocal, MPI_DOUBLE,shiftdest, 6, shiftsource, 6, comm_2d, &amp;status); \n\n    printf(\"rank[%d] has entered loop dim %d\\n\", myrank,dims[0]);fflush(stdout);\n    for (i=0; i&lt;dims[0]; i++) { \n        //  Multiply(nlocal, a, b, c); \n\n        MPI_Sendrecv_replace(a, nlocal*nlocal, MPI_DOUBLE,leftrank, 1, rightrank, 1, comm_2d, &amp;status); \n\n\n        MPI_Sendrecv_replace(b, nlocal*nlocal, MPI_DOUBLE,uprank, 2, downrank, 2, comm_2d, &amp;status); \n    } \n    printf(\"rank[%d] has left loop\\n\", myrank);fflush(stdout);\n    MPI_Barrier(MPI_COMM_WORLD);\n\n    // MPI_Cart_shift(comm_2d, 0, +mycoords[0], &amp;shiftsource, &amp;shiftdest); \n    MPI_Cart_shift(comm_2d, 0, 1, &amp;shiftsource, &amp;shiftdest); \n    MPI_Sendrecv_replace(a, nlocal*nlocal, MPI_DOUBLE,shiftdest, 3, shiftsource, 3, comm_2d, &amp;status); \n\n    MPI_Cart_shift(comm_2d, 1, 1, &amp;shiftsource, &amp;shiftdest); \n    //MPI_Cart_shift(comm_2d, 1, +mycoords[1], &amp;shiftsource, &amp;shiftdest); \n    MPI_Sendrecv_replace(b, nlocal*nlocal, MPI_DOUBLE,shiftdest, 4, shiftsource, 4, comm_2d, &amp;status); \n\n\n\n\n    printf(\"rank[%d] has reached the barrier...\\n\", myrank);fflush(stdout);\n    MPI_Barrier(MPI_COMM_WORLD);\n\n    if (myrank == 0) {\n        t += MPI_Wtime();\n        //  writeMatrix(c, argv[3], n); \n        printf(\"Finshed in %d second(s)\\n\",t);\n    }\n\n    free(a); free(b); free(c);\n\n    MPI_Comm_free(&amp;comm_2d); \n\n    MPI_Finalize();\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1618, "user_id": 635923, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7cdb4e4ac630893dd32c29769c0ba0e0?s=128&d=identicon&r=PG", "display_name": "Daniel Lopez", "link": "https://stackoverflow.com/users/635923/daniel-lopez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 266, "favorite_count": 0, "accepted_answer_id": 29807788, "answer_count": 1, "score": 0, "last_activity_date": 1429811863, "creation_date": 1429727925, "last_edit_date": 1429811863, "question_id": 29806195, "link": "https://stackoverflow.com/questions/29806195/trouble-resolving-deadlock-in-mpi-program-dealing-with-a-cartesian-mesh", "title": "Trouble Resolving Deadlock in MPI Program dealing with a Cartesian mesh", "body": "<p>I am implementing the cannon's algorithm. I run it using 4 processors. I hit a dead lock when I enter the loop:</p>\n\n<pre><code>   for (i=0; i&lt;dims[0]; i++) { \n    Multiply(nlocal, a, b, c); \n    MPI_Sendrecv_replace(a, nlocal*nlocal, MPI_DOUBLE,leftrank, 1, rightrank, 1, comm_2d, &amp;status); \n    MPI_Sendrecv_replace(b, nlocal*nlocal, MPI_DOUBLE,uprank, 1, downrank, 1, comm_2d, &amp;status); \n  } \n</code></pre>\n\n<h1>The entire code is here:</h1>\n\n<pre><code>#include &lt;math.h&gt;\n#include &lt;mpi.h&gt;\n#include &lt;stdarg.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n\nvoid Multiply(int n, double *a, double *b, double *c);\n\ndouble* readMatrix(char* filename, int* size);\nvoid writeMatrix(double* matrix, char* filename, int size);\n\nint main(int argc, char* argv[])\n{\n     MPI_Init(&amp;argc, &amp;argv);   \n\n  double* a,*b,*c;\n  int i, t, n;\n  int nlocal; \n  int npes, dims[2], periods[2]; \n  int myrank, my2drank, mycoords[2]; \n  int uprank, downrank, leftrank, rightrank, coords[2]; \n  int shiftsource, shiftdest; \n  MPI_Status status; \n  MPI_Comm comm_2d; \n\n\n  MPI_Comm_size(MPI_COMM_WORLD, &amp;npes); \n  MPI_Comm_rank(MPI_COMM_WORLD, &amp;myrank); \n\n  MPI_Barrier(MPI_COMM_WORLD);\n\n  t = -MPI_Wtime();\n\n\n  if (myrank == 0) {\n\n    int sizeA,sizeB;\n    printf(\"Reading %s\\n\", argv[1]);\n    a = readMatrix(argv[1], &amp;sizeA);\n    b = readMatrix(argv[2], &amp;sizeB);\n    printf(\"Reading %s\\n\", argv[2]);\n    c = calloc(sizeA*sizeB, sizeof(double));\n    n = sizeA;\n    MPI_Bcast(&amp;n, 1, MPI_INT, 0, MPI_COMM_WORLD);\n    MPI_Bcast(a, n*n, MPI_DOUBLE, 0, MPI_COMM_WORLD);\n    MPI_Bcast(b, n*n, MPI_DOUBLE, 0, MPI_COMM_WORLD);\n    MPI_Bcast(c, n*n, MPI_DOUBLE, 0, MPI_COMM_WORLD);\n\n    if (sizeA != sizeB) {\n        printf(\"Matrix not sized n^2\\n\");\n        MPI_Abort(MPI_COMM_WORLD, 0);\n    }\n\n\n  }\n  else {\n      a = calloc(n*n, sizeof(double));\n      b = calloc(n*n, sizeof(double));\n      c = calloc(n*n, sizeof(double));\n      MPI_Bcast(&amp;n, 1, MPI_INT, 0, MPI_COMM_WORLD);\n      MPI_Bcast(a, n*n, MPI_DOUBLE, 0, MPI_COMM_WORLD);\n      MPI_Bcast(b, n*n, MPI_DOUBLE, 0, MPI_COMM_WORLD);\n      MPI_Bcast(c, n*n, MPI_DOUBLE, 0, MPI_COMM_WORLD);\n  }\n\n\n  dims[0] = dims[1] = sqrt(npes); \n\n\n\n\n  periods[0] = periods[1] = 1; \n\n\n  MPI_Cart_create(MPI_COMM_WORLD, 2, dims, periods, 1, &amp;comm_2d); \n\n\n  MPI_Comm_rank(comm_2d, &amp;my2drank); \n  MPI_Cart_coords(comm_2d, my2drank, 2, mycoords); \n\n\n  MPI_Cart_shift(comm_2d, 0, -1, &amp;rightrank, &amp;leftrank); \n  MPI_Cart_shift(comm_2d, 1, -1, &amp;downrank, &amp;uprank); \n\n\n  nlocal = n/dims[0]; \n\n\n  MPI_Cart_shift(comm_2d, 0, -mycoords[0], &amp;shiftsource, &amp;shiftdest); \n  MPI_Sendrecv_replace(a, nlocal*nlocal, MPI_DOUBLE, shiftdest,1, shiftsource, 1, comm_2d, &amp;status); \n\n  MPI_Cart_shift(comm_2d, 1, -mycoords[1], &amp;shiftsource, &amp;shiftdest); \n  MPI_Sendrecv_replace(b, nlocal*nlocal, MPI_DOUBLE,shiftdest, 1, shiftsource, 1, comm_2d, &amp;status); \n\n  printf(\"rank[%d] has entered loop\\n\", myrank);\n  for (i=0; i&lt;dims[0]; i++) { \n    Multiply(nlocal, a, b, c); \n\n\n    MPI_Sendrecv_replace(a, nlocal*nlocal, MPI_DOUBLE,leftrank, 1, rightrank, 1, comm_2d, &amp;status); \n\n\n    MPI_Sendrecv_replace(b, nlocal*nlocal, MPI_DOUBLE,uprank, 1, downrank, 1, comm_2d, &amp;status); \n  } \n  printf(\"rank[%d] has left loop\\n\", myrank);\n\n  MPI_Cart_shift(comm_2d, 0, +mycoords[0], &amp;shiftsource, &amp;shiftdest); \n  MPI_Sendrecv_replace(a, nlocal*nlocal, MPI_DOUBLE,shiftdest, 1, shiftsource, 1, comm_2d, &amp;status); \n\n  MPI_Cart_shift(comm_2d, 1, +mycoords[1], &amp;shiftsource, &amp;shiftdest); \n  MPI_Sendrecv_replace(b, nlocal*nlocal, MPI_DOUBLE,shiftdest, 1, shiftsource, 1, comm_2d, &amp;status); \n\n\n\n\n  printf(\"rank[%d] has reached the barrier...\\n\", myrank);\n  MPI_Barrier(MPI_COMM_WORLD);\n\n  if (myrank == 0) {\n      t += MPI_Wtime();\n      writeMatrix(c, argv[3], n); \n      printf(\"%s %d second(s)\\n\", \"Finshed in\", t);\n  }\n\n  free(a); free(b); free(c);\n\n  MPI_Comm_free(&amp;comm_2d); \n\n  MPI_Finalize();\n}\n\ndouble* readMatrix(char* filename, int* size) {\n    FILE* file_handle = fopen(filename, \"r\");\n    int row;\n    int col;\n    fread(&amp;row, sizeof(int), 1, file_handle);\n    fread(&amp;col, sizeof(int), 1, file_handle);\n    if (row == col) {\n            *size = row;\n    }\n    else {\n        *size = -1;\n        return NULL;\n    }\n    double* buffer = calloc(row*col, sizeof(double));\n    for(int i = 0; i &lt; row; i++) {\n        for(int j = 0; j &lt; col; j++) {\n            double x;\n            fread(&amp;x, sizeof(double), 1, file_handle);\n            buffer[row * i + j] = x;\n        }\n    }\n    fclose(file_handle);\n    printf(\"Buffer has size %d\\n\", row*col);\n    return buffer;\n}\n\nvoid writeMatrix(double* matrix, char* filename, int size) {\n    FILE* file_handle = fopen(filename, \"w\");\n    fwrite(&amp;size, sizeof(int), 1, file_handle);\n    fwrite(&amp;size, sizeof(int), 1, file_handle);\n    for(int i = 0; i &lt; size; i++) {\n        for(int j = 0; j &lt; size; j++) {\n            double x = matrix[size * i + j];\n            fwrite(&amp;x, sizeof(double), 1, file_handle);\n        }\n    }\n    fclose(file_handle);\n}\n\n\nvoid Multiply(int n, double *a, double *b, double *c)\n{ \n  int i, j, k; \n\n  for (i=0; i&lt;n; i++) \n    for (j=0; j&lt;n; j++) \n      for (k=0; k&lt;n; k++) \n    c[i*n+j] += a[i*n+k]*b[k*n+j]; \n} \n</code></pre>\n\n<p>If it is too much code I can easily remove certain parts. I am just wondering what is causing the deadlock and how to resolve it. Thank you for your time, in advance.</p>\n\n<h1>Important information:</h1>\n\n<p>Rank 0 always hits the barrier. But since the other 3 are deadlocked rank 0 is stuck until all have hit barrier. </p>\n\n<h1>Output</h1>\n\n<pre><code>Reading 10\nBuffer has size 100\nBuffer has size 100\nReading 10\nrank[0] has entered loop\nrank[0] has left loop\nrank[0] has reached the barrier...\nrank[1] has entered loop\nrank[2] has entered loop\nrank[3] has entered loop\n</code></pre>\n"}, {"tags": ["c", "multithreading", "sockets", "unix"], "comments": [{"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 1, "creation_date": 1429732725, "post_id": 29806135, "comment_id": 47743299, "body": "It&#39;s probably safe in that your program won&#39;t crash, but I doubt it will result in useful behavior.  In particular, the data your thread sees will represent only a small, random subset of the actual data that the other thread is receiving, since there will be lots of data that &quot;slips by&quot; in between your calls to recv()."}, {"owner": {"reputation": 1875, "user_id": 1091536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94d2f11fe9ce90bd4462a24c1bf2975c?s=128&d=identicon&r=PG", "display_name": "gomons", "link": "https://stackoverflow.com/users/1091536/gomons"}, "reply_to_user": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1429733958, "post_id": 29806135, "comment_id": 47744050, "body": "AFAIK, calls to <code>read()</code> and <code>recv()</code> protected by locks in linux kernel, so @Jeremy Friesner is right."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1429738448, "post_id": 29806135, "comment_id": 47746661, "body": "System calls are always atomic."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 1, "creation_date": 1429759708, "post_id": 29806135, "comment_id": 47753947, "body": "However I don&#39;t see the point. If you want to know whether there is data there, just use <code>select().</code> I still don&#39;t know what good it does you to know in another thread that the reading thread is reading something. It will read it as soon as it&#39;s there."}], "answers": [{"tags": [], "owner": {"reputation": 1625, "user_id": 2334407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kites.jpg?s=128&g=1", "display_name": "haneefmubarak", "link": "https://stackoverflow.com/users/2334407/haneefmubarak"}, "is_accepted": false, "score": 1, "last_activity_date": 1429759051, "creation_date": 1429759051, "answer_id": 29813026, "question_id": 29806135, "link": "https://stackoverflow.com/questions/29806135/is-read-recv-thread-safe-msg-peek/29813026#29813026", "title": "Is read/recv thread safe (MSG_PEEK)", "body": "<p>Since syscalls operate in kernel space, they are thread safe (they have to be, otherwise kernel data could get corrupted and bring down your entire system) in the sense that your program won't crash - HOWEVER, as noted by Jeremy Friesner in the comments:</p>\n\n<ul>\n<li><p>The order in which your syscalls are executed may not necessarily be guaranteed.</p></li>\n<li><p>syscalls take time. This means that a lot of data will slip past in between your calls to <code>recv ()</code>.</p></li>\n</ul>\n\n<hr>\n\n<p>However, you could definitely write the bytes into a named FIFO. Open the writing end in the thread doing the <code>read ()</code> and the reading end in the thread doing the <code>recv ()</code>.</p>\n\n<p>Now, every time you successfully complete a <code>read ()</code>, write the first byte (that's all you wanted, yeah?) into the FIFO. Meanwhile, in the other thread, instead of using <code>sleep ()</code> in between the <code>recv ()</code>, just use a blocking <code>read</code> of size 1 byte on the FIFO and <code>printf ()</code> the result.</p>\n\n<p>This way, the kernel can automatically wake up your <code>recv ()</code> thread whenever there is data to be read. You don't waste any CPU time with unnecessary context switches either (which are actually pretty big), so your application's overall performance/speed will go up too.</p>\n"}], "owner": {"reputation": 5649, "user_id": 49733, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/46d6184d8f4347ca961b6a9479a8cf2f?s=128&d=identicon&r=PG&f=1", "display_name": "Francisco Ryan Tolmasky I", "link": "https://stackoverflow.com/users/49733/francisco-ryan-tolmasky-i"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 391, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1429759051, "creation_date": 1429727719, "last_edit_date": 1429729221, "question_id": 29806135, "link": "https://stackoverflow.com/questions/29806135/is-read-recv-thread-safe-msg-peek", "title": "Is read/recv thread safe (MSG_PEEK)", "body": "<p>I have one thread that is doing a blocking <code>read</code>:</p>\n\n<pre><code>rec = read(socket, data, size);\n</code></pre>\n\n<p>I'm curious to know whether it is safe or not for me to have another thread, doing <code>recv(MSG_PEEK)</code> in the background on the same socket:</p>\n\n<pre><code>while (true)\n{\n   if (recv(socket, byte, size, MSG_DONTWAIT | MSG_PEEK) &gt; 0)\n   {\n       printf(\"peeked %d\", byte);\n   }\n   sleep(1);\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "argv", "calloc", "argc"], "comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 4, "creation_date": 1429727698, "post_id": 29806070, "comment_id": 47740084, "body": "These are pointer values of the arguments as char arrays. You should convert the argument strings to integers with <code>strtol</code> or <code>atoi</code> before storing them in your <code>int</code> array."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1429730381, "post_id": 29806070, "comment_id": 47741808, "body": "@MOehm : That&#39;s an answer not a comment; you should post an answer."}], "answers": [{"tags": [], "owner": {"reputation": 1618, "user_id": 635923, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7cdb4e4ac630893dd32c29769c0ba0e0?s=128&d=identicon&r=PG", "display_name": "Daniel Lopez", "link": "https://stackoverflow.com/users/635923/daniel-lopez"}, "is_accepted": false, "score": 2, "last_activity_date": 1429728373, "creation_date": 1429728373, "answer_id": 29806336, "question_id": 29806070, "link": "https://stackoverflow.com/questions/29806070/store-argv-to-an-int-array/29806336#29806336", "title": "Store argv to an int array", "body": "<p><strong>Should be:</strong></p>\n\n<pre><code>   data[i]=atoi(argv[i]);\n</code></pre>\n\n<p>Remember command line argument are strings. So even though you pass an integer in the command line its a string that needs to be converted to an integer.</p>\n"}, {"tags": [], "owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "is_accepted": false, "score": 2, "last_activity_date": 1429730256, "last_edit_date": 1429730256, "creation_date": 1429729943, "answer_id": 29806824, "question_id": 29806070, "link": "https://stackoverflow.com/questions/29806070/store-argv-to-an-int-array/29806824#29806824", "title": "Store argv to an int array", "body": "<p><code>argv</code> is an array of pointers to strings; the arguments are not integers, they are null terminated strings containing ASCII characters; you if you want to interpret them as integer values you will need to perform a conversion:</p>\n\n<p>Consider:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(int argc, char** argv ) \n{\n    int size = argc - 1 ;\n    int* data  = (int*)calloc( size, sizeof(int) ) ;\n\n    printf( \"Size = %d\\n\", size ) ;\n\n    // For each argument...\n    for( int i = 0; i &lt; size; i++)\n    {\n        // convert string to an integer\n        sscanf( argv[i + 1], \"%d\", &amp;data[i] ) ;\n\n       // Output the argument string and its converted value\n        printf( \"\\\"%s\\\" -&gt; %d\\n\", argv[i + 1], data[i] ) ; \n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Which for your input, outputs:</p>\n\n<pre><code>Size = 5\n\"5\" -&gt; 5\n\"1\" -&gt; 1\n\"2\" -&gt; 2\n\"3\" -&gt; 3\n\"4\" -&gt; 4\n</code></pre>\n\n<p>It is perhaps instructive to see what happens when you invoke:</p>\n\n<pre><code>./sumprime 5 1 hello 3 4\n</code></pre>\n\n<p>Which gives the following output:</p>\n\n<pre><code>Size = 5\n\"5\" -&gt; 5\n\"1\" -&gt; 1\n\"hello\" -&gt; 0\n\"3\" -&gt; 3\n\"4\" -&gt; 4\n</code></pre>\n"}], "owner": {"reputation": 2495, "user_id": 4760425, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1415935128722296/picture?type=large", "display_name": "necroface", "link": "https://stackoverflow.com/users/4760425/necroface"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7023, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1429730256, "creation_date": 1429727493, "question_id": 29806070, "link": "https://stackoverflow.com/questions/29806070/store-argv-to-an-int-array", "title": "Store argv to an int array", "body": "<p>I have code like this to store <code>argv</code> to a dynamically allocated <code>int</code> array:</p>\n\n<pre><code>int *data;    // pointer to array of integer numbers\nint size;     // size of data array\n\nint main(int argc, char* argv[]) {\n  // initialize array data\n  size=argc;\n  printf(\"%dSize=\\n\",size);\n  printf(\"%d\\n\",argc);\n  data=(int*)calloc(size,sizeof(int));\n  int i=0;\n  for (i=1;i&lt;size;i++)\n  {\n   data[i]=argv[i];\n   printf(\"%d\\n\",data[i]);\n  }\n  for (i=1;i&lt;argc;i++)\n  {\n   printf(\"%d\\n\",argv[i]);\n  }\n  return 0;\n}\n</code></pre>\n\n<p>When I run in command line:\n<code>./sumprime 5 1 2 3 4</code>\nIt prints:</p>\n\n<pre><code>6Size=\n6\n15311660\n15311662\n15311664\n15311666\n15311668\n15311660\n15311662\n15311664\n15311666\n15311668\n</code></pre>\n\n<p>Not an array of <code>5 1 2 3 4</code> as I expected. How can I store an <code>int</code> array from <code>argv</code> and then print it out?</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 4, "creation_date": 1429727512, "post_id": 29806045, "comment_id": 47739983, "body": "&quot;in C&quot;, so why the C++ tag?"}, {"owner": {"reputation": 10264, "user_id": 1655700, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/xObp1.png?s=128&g=1", "display_name": "Tyler Durden", "link": "https://stackoverflow.com/users/1655700/tyler-durden"}, "edited": false, "score": 0, "creation_date": 1429727706, "post_id": 29806045, "comment_id": 47740089, "body": "This is a completely unintelligible question. I have no idea what you are talking about. There is not even any code illustrating the problem or the supposed &quot;errors&quot;. Damnit Jim, I am a doctor not a mind reader."}, {"owner": {"reputation": 325758, "user_id": 415784, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2WX9Z.jpg?s=128&g=1", "display_name": "Nawaz", "link": "https://stackoverflow.com/users/415784/nawaz"}, "edited": false, "score": 0, "creation_date": 1429727709, "post_id": 29806045, "comment_id": 47740092, "body": "<code>(intptr_t)ptr2 - (intptr_t)ptr1</code>?"}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1429727965, "post_id": 29806045, "comment_id": 47740248, "body": "@vsoftco actually <code>(metadata_t*)heap</code>"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 325758, "user_id": 415784, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2WX9Z.jpg?s=128&g=1", "display_name": "Nawaz", "link": "https://stackoverflow.com/users/415784/nawaz"}, "edited": false, "score": 0, "creation_date": 1429728138, "post_id": 29806045, "comment_id": 47740347, "body": "@Nawaz: No, you don&#39;t have to convert pointers to integers; just do pointer arithmetic directly. (I&#39;ve worked on systems where the <code>intptr_t</code> conversion would cause incorrect results.)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1429728169, "post_id": 29806045, "comment_id": 47740364, "body": "Generally in C: (char*)p - (char*)base = offset_in_bytes"}, {"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "edited": false, "score": 0, "creation_date": 1429728228, "post_id": 29806045, "comment_id": 47740395, "body": "What have you tried so far? Usually it is no problem whatsoever to subtract two pointers and store the result in an <code>int</code> (on a64 bit machine you probably want to use e.g. a long long int."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1429728236, "post_id": 29806045, "comment_id": 47740402, "body": "What do you mean by &quot;the address of a pointer&quot;? Do you mean the address of a pointer object, or the address to which it points? If you want the difference in bytes, convert both pointers to <code>char*</code> and subtrace. Be aware that the language doesn&#39;t define the behavior unless both pointers point into, or just past the end of, the same (array) object -- but if you&#39;re implementing <code>malloc</code> you&#39;re almost certainly going to have to depend on non-portable behavior anyway."}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 3, "creation_date": 1429728237, "post_id": 29806045, "comment_id": 47740403, "body": "Just note that result of pointer and pointer subtraction is <code>ptfdiff_t</code>."}], "answers": [{"comments": [{"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1429729136, "post_id": 29806371, "comment_id": 47740987, "body": "(intptr_t)ptr2 - (intptr_t)ptr1 = sizeof(*ptr1) * (ptr1 - ptr2)"}], "tags": [], "owner": {"reputation": 19025, "user_id": 17826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5a7aca325b6be746ea9e9ae17ff5b6b?s=128&d=identicon&r=PG", "display_name": "Mark Bessey", "link": "https://stackoverflow.com/users/17826/mark-bessey"}, "is_accepted": false, "score": 0, "last_activity_date": 1429728466, "creation_date": 1429728466, "answer_id": 29806371, "question_id": 29806045, "link": "https://stackoverflow.com/questions/29806045/how-do-i-subtract-the-address-of-a-pointer-from-another-pointer/29806371#29806371", "title": "How do I subtract the address of a pointer from another pointer?", "body": "<p>The short answer is that subtraction \"just works\", and returns an integer-type result.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, const char * argv[]) {\n    char string[] = \"This is a test string\";\n    char *a = string+8;\n    char *b = string+10;\n    long x = b-a;\n\n    printf(\"Hello, World! a and b are %ld bytes apart\\n\", x);\n    return 0;\n}\n</code></pre>\n\n<p>Longer answer - if you're going to do <strong>a lot</strong> of arithmetic, cast the pointers to an appropriately-large integer type, do the arithmetic, then cast them back to a pointer. This is inherently unportable, but you're writing malloc, so portability is probably not high on the list of concerns.</p>\n\n<p>Things can get a bit tricky, because you'll likely want an unsigned integer type to preserve all of the bits of the pointer, but doing arithmetic on unsigned types in C can be annoying.</p>\n"}], "owner": {"reputation": 11, "user_id": 4792529, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0SWC3.jpg?s=128&g=1", "display_name": "GolfinDolphin", "link": "https://stackoverflow.com/users/4792529/golfindolphin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1429728466, "creation_date": 1429727422, "last_edit_date": 1429728372, "question_id": 29806045, "link": "https://stackoverflow.com/questions/29806045/how-do-i-subtract-the-address-of-a-pointer-from-another-pointer", "title": "How do I subtract the address of a pointer from another pointer?", "body": "<p>I have a HW assignment to write malloc in C.  For part of the whole algorithm of freeing a pointer, I need to subtract the address of the heap we are using to then do some bit manipulation.  So I have the following two declarations that are later defined in my program.</p>\n\n<pre><code>void* heap;  \n metadata_t* ptr; //always &lt; 8kb from heap\n</code></pre>\n\n<p>My goal is to take the address of heap and subtract it from ptr because the bit manipulation that I'm doing only works if the left most bit is a zero. Everything I've tried so far has resulted in errors. Does anyone know how to do what I'm trying?</p>\n"}, {"tags": ["c", "arduino", "splash-screen"], "answers": [{"tags": [], "owner": {"reputation": 1006, "user_id": 3888756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mPnk1.jpg?s=128&g=1", "display_name": "DigitalNinja", "link": "https://stackoverflow.com/users/3888756/digitalninja"}, "is_accepted": false, "score": 0, "last_activity_date": 1429728642, "last_edit_date": 1429728642, "creation_date": 1429728226, "answer_id": 29806284, "question_id": 29805917, "link": "https://stackoverflow.com/questions/29805917/arduino-pro-mini-splash-screen/29806284#29806284", "title": "Arduino Pro Mini Splash Screen", "body": "<p>I believe that is just a bitmap. The values indicate where to draw a pixel. The <code>0x00</code> values are just the blank space (probably black screen), and any where where there is a value greater than zero there will be pixels drawn (a <code>1</code> will be a pixel). All the painted pixels come together to create an image.</p>\n\n<p>I think if you search, you should be able to find some kind of editor that will let you draw what you want and it will generate the bitmap for you.</p>\n"}], "owner": {"reputation": 1, "user_id": 4425583, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000694005323/picture?type=large", "display_name": "Dr\u0103ghici Andrei", "link": "https://stackoverflow.com/users/4425583/dr%c4%83ghici-andrei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 238, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1429728642, "creation_date": 1429727034, "question_id": 29805917, "link": "https://stackoverflow.com/questions/29805917/arduino-pro-mini-splash-screen", "title": "Arduino Pro Mini Splash Screen", "body": "<p>I want to build this Altimeter: <a href=\"https://www.youtube.com/watch?v=mMiMNTv25Bw\" rel=\"nofollow\">https://www.youtube.com/watch?v=mMiMNTv25Bw</a>. While I was waiting for the parts to arrive, I started looking over the code. I have a Splash.c file. \nThis is the code in the file:</p>\n\n<p>*</p>\n\n<pre><code>// Splash.c\n// Font type    : Splash Screen\n// Font size    : 128x64 pixels\n// Memory usage : 1024 bytes\n#include &lt;avr/pgmspace.h&gt;\nuint8_t Splash[] PROGMEM={\n  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, \n  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, \n  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, \n  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, \n  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, \n  0x0f, 0xff, 0xbf, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, \n  0x0f, 0xff, 0xbf, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0x00, 0x00, \n  0x0f, 0xff, 0xbf, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x78, 0x01, 0xc0, \n  0x0f, 0xff, 0xbf, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x78, 0x01, 0xc0, \n  0x0f, 0xff, 0xbf, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x04, 0x78, 0x01, 0xc0, \n  0x01, 0xf8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0e, 0x20, 0x01, 0xc0, \n  0x01, 0xf8, 0x3f, 0x3f, 0xfc, 0x7e, 0x7e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0c, 0xe0, 0x01, 0xc0, \n  0x01, 0xf8, 0x3f, 0x3f, 0xfe, 0x7e, 0x7e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1d, 0xf0, 0x03, 0xc0, \n  0x01, 0xf8, 0x3f, 0x3f, 0xff, 0x7e, 0x7e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1b, 0xf8, 0x0f, 0xc0, \n  0x01, 0xf8, 0x3f, 0x3f, 0xff, 0x7e, 0x7e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3b, 0xfc, 0x0f, 0xc0, \n  0x01, 0xf8, 0x3f, 0x3f, 0x3f, 0x7e, 0x7e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x37, 0xef, 0x9f, 0xc0, \n  0x01, 0xf8, 0x3f, 0x3f, 0x3f, 0x7e, 0x7e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0xc7, 0xdf, 0xc0, \n  0x01, 0xf8, 0x3f, 0x3f, 0x3f, 0x7e, 0x7e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0xc0, 0x9f, 0xc0, \n  0x01, 0xf8, 0x3f, 0x3f, 0x3f, 0x7e, 0x7e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0xc0, 0x3f, 0xc0, \n  0x01, 0xf8, 0x3f, 0x3f, 0x3f, 0x7e, 0x7e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0xf0, 0x1f, 0xc0, \n  0x01, 0xf8, 0x3f, 0x3f, 0x3f, 0x7e, 0x7e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0xf8, 0x1f, 0xc0, \n  0x01, 0xf8, 0x3f, 0x3f, 0x3f, 0x7e, 0x7e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0e, 0x78, 0x0f, 0xc0, \n  0x01, 0xf8, 0x3f, 0x3f, 0x3f, 0x7e, 0x7e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0e, 0x18, 0x0f, 0xc0, \n  0x01, 0xf8, 0x3f, 0x3f, 0x3f, 0x7f, 0xfe, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0e, 0x1c, 0x0f, 0xc0, \n  0x01, 0xf8, 0x3f, 0x3f, 0x3f, 0x7f, 0xfe, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0e, 0x1c, 0x1f, 0xc0, \n  0x01, 0xf8, 0x3f, 0x3f, 0x3f, 0x3f, 0xfe, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0e, 0x1c, 0xff, 0xc0, \n  0x01, 0xf8, 0x3f, 0x3f, 0x3f, 0x00, 0x7e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1c, 0x09, 0xff, 0xc0, \n  0x00, 0x00, 0x00, 0x00, 0x00, 0x7e, 0x7e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1c, 0x01, 0xff, 0xc0, \n  0x00, 0x00, 0x00, 0x00, 0x00, 0x7f, 0xfe, 0x00, 0x00, 0x00, 0x00, 0x00, 0x38, 0x3f, 0xff, 0xc0, \n  0x00, 0x00, 0x00, 0x00, 0x00, 0x7f, 0xfe, 0x00, 0x00, 0x00, 0x00, 0x00, 0x38, 0x7f, 0xff, 0xc0, \n  0x00, 0x00, 0x00, 0x00, 0x00, 0x3f, 0xfc, 0x00, 0x00, 0x00, 0x00, 0x00, 0x10, 0x00, 0x00, 0x00, \n  0x00, 0x00, 0x00, 0x00, 0x00, 0x1f, 0xf8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, \n  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, \n  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, \n  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, \n  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, \n  0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, \n  0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, \n  0xff, 0x00, 0x7c, 0x0f, 0xff, 0x03, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, \n  0xff, 0x00, 0x7c, 0x0f, 0xff, 0x03, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, \n  0xff, 0x00, 0x7c, 0x0e, 0x0f, 0x03, 0xff, 0xff, 0xff, 0xff, 0xff, 0xc1, 0xff, 0xff, 0xff, 0xff, \n  0xfe, 0x00, 0x7c, 0x0e, 0x0f, 0x03, 0xff, 0xff, 0xff, 0xff, 0xff, 0xc1, 0xff, 0xff, 0xff, 0xff, \n  0xfe, 0x00, 0x3c, 0x0e, 0x0f, 0x03, 0xff, 0xff, 0xff, 0xff, 0xff, 0xc1, 0xff, 0xff, 0xff, 0xff, \n  0xfe, 0x00, 0x3c, 0x0e, 0x0f, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xc1, 0xff, 0xff, 0xff, 0xff, \n  0xfe, 0x08, 0x3c, 0x0c, 0x01, 0x03, 0x02, 0x06, 0x07, 0xe0, 0x07, 0x80, 0x3c, 0x00, 0xf0, 0x23, \n  0xfe, 0x08, 0x3c, 0x0c, 0x01, 0x03, 0x00, 0x00, 0x03, 0xc0, 0x01, 0x80, 0x38, 0x00, 0x30, 0x03, \n  0xfc, 0x08, 0x3c, 0x0c, 0x01, 0x03, 0x00, 0x00, 0x03, 0x80, 0x01, 0x80, 0x30, 0x00, 0x30, 0x03, \n  0xfc, 0x08, 0x1c, 0x0c, 0x01, 0x03, 0x00, 0x00, 0x03, 0x80, 0x01, 0x80, 0x30, 0x00, 0x30, 0x03, \n  0xfc, 0x18, 0x1c, 0x0c, 0x01, 0x03, 0x03, 0x03, 0x83, 0x80, 0x01, 0x80, 0x30, 0x00, 0x30, 0x3f, \n  0xfc, 0x1c, 0x1c, 0x0e, 0x0f, 0x03, 0x03, 0x03, 0x83, 0x81, 0xc1, 0xc1, 0xf0, 0x38, 0x30, 0x3f, \n  0xfc, 0x1c, 0x1c, 0x0e, 0x0f, 0x03, 0x03, 0x03, 0x83, 0x81, 0xc1, 0xc1, 0xf0, 0x38, 0x30, 0x3f, \n  0xfc, 0x1c, 0x1c, 0x0e, 0x0f, 0x03, 0x03, 0x03, 0x83, 0x81, 0x81, 0xc1, 0xf0, 0x30, 0x30, 0x3f, \n  0xf8, 0x00, 0x1c, 0x0e, 0x0f, 0x03, 0x03, 0x03, 0x83, 0x80, 0x01, 0xc1, 0xf0, 0x00, 0x30, 0x3f, \n  0xf8, 0x00, 0x0c, 0x0e, 0x0f, 0x03, 0x03, 0x03, 0x83, 0x80, 0xff, 0xc1, 0xf0, 0x1f, 0xf0, 0x3f, \n  0xf8, 0x00, 0x0c, 0x0e, 0x0f, 0x03, 0x03, 0x03, 0x83, 0x81, 0xff, 0xc1, 0xf0, 0x3f, 0xf0, 0x3f, \n  0xf8, 0x00, 0x0c, 0x0e, 0x0f, 0x03, 0x03, 0x03, 0x83, 0x81, 0xff, 0xc1, 0xf0, 0x3f, 0xf0, 0x3f, \n  0xf8, 0x00, 0x0c, 0x0e, 0x01, 0x03, 0x03, 0x03, 0x83, 0x80, 0x01, 0xc0, 0x30, 0x00, 0x30, 0x3f, \n  0xf8, 0x1c, 0x0c, 0x0e, 0x01, 0x03, 0x03, 0x03, 0x83, 0x80, 0x01, 0xc0, 0x30, 0x00, 0x30, 0x3f, \n  0xf0, 0x3c, 0x0c, 0x0e, 0x01, 0x03, 0x03, 0x03, 0x83, 0x80, 0x01, 0xc0, 0x30, 0x00, 0x30, 0x3f, \n  0xf0, 0x3c, 0x04, 0x0f, 0x01, 0x03, 0x03, 0x03, 0x83, 0xc0, 0x01, 0xe0, 0x38, 0x00, 0x30, 0x3f, \n  0xf0, 0x3e, 0x04, 0x0f, 0x81, 0x03, 0x03, 0x03, 0x83, 0xe0, 0x07, 0xf0, 0x3c, 0x00, 0xf0, 0x3f, \n  0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, \n  0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, \n  0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff\n};\n</code></pre>\n\n<p>*</p>\n\n<p>This is for the splash screen when the device boots, right? ( see YT link )</p>\n\n<p>Can someone explain what it means and how it's made? I want to create my custom splash screen but I don't understand this code. Thanks!</p>\n"}, {"tags": ["c", "string", "pointers"], "comments": [{"owner": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "edited": false, "score": 3, "creation_date": 1429727000, "post_id": 29805870, "comment_id": 47739674, "body": "You need to allocate enough memory for the string you operate on. You don&#39;t do that."}, {"owner": {"reputation": 5811, "user_id": 2726734, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JkA2E.jpg?s=128&g=1", "display_name": "ryanpattison", "link": "https://stackoverflow.com/users/2726734/ryanpattison"}, "edited": false, "score": 2, "creation_date": 1429727102, "post_id": 29805870, "comment_id": 47739738, "body": "the <code>word++</code> after the loop is one too many"}, {"owner": {"reputation": 6017, "user_id": 4694621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lIYBa.png?s=128&g=1", "display_name": "Mateusz Piotrowski", "link": "https://stackoverflow.com/users/4694621/mateusz-piotrowski"}, "reply_to_user": {"reputation": 5811, "user_id": 2726734, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JkA2E.jpg?s=128&g=1", "display_name": "ryanpattison", "link": "https://stackoverflow.com/users/2726734/ryanpattison"}, "edited": false, "score": 0, "creation_date": 1429727319, "post_id": 29805870, "comment_id": 47739877, "body": "@rpattiso Thanks! That&#39;s true. However <code>word</code> is not cleared after the first line, so there is more than only a one bug. I&#39;ll work on what @milleniumbug said."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1429728378, "post_id": 29805870, "comment_id": 47740502, "body": "Enable all compiler warnings. Follow up every warning about pointer indirection, for example in this inconsistency <code>while (!isEndOfLine(line) &amp;&amp; isLowerCaseLetter(*line))</code>. And add a <code>;</code> at the end of the <code>printf()</code> line."}], "answers": [{"comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1429731534, "post_id": 29807113, "comment_id": 47742545, "body": "I see a big bug. I post an update (Error in strncopy)"}, {"owner": {"reputation": 6017, "user_id": 4694621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lIYBa.png?s=128&g=1", "display_name": "Mateusz Piotrowski", "link": "https://stackoverflow.com/users/4694621/mateusz-piotrowski"}, "edited": false, "score": 0, "creation_date": 1429738541, "post_id": 29807113, "comment_id": 47746697, "body": "Actually, the code does not work for one-letter-long words: <code>insert v</code> throws the <code>segmentation fault 11</code>. It crashes when it tries to run the <code>*wordPointer[i]= &#39;\\0&#39;</code> line."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "reply_to_user": {"reputation": 6017, "user_id": 4694621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lIYBa.png?s=128&g=1", "display_name": "Mateusz Piotrowski", "link": "https://stackoverflow.com/users/4694621/mateusz-piotrowski"}, "edited": false, "score": 1, "creation_date": 1429740798, "post_id": 29807113, "comment_id": 47747769, "body": "Sorry, that should be <code>(*wordPointer)[i]= &#39;\\0&#39;;</code>."}], "tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": true, "score": 3, "last_activity_date": 1429740817, "last_edit_date": 1429740817, "creation_date": 1429730983, "answer_id": 29807113, "question_id": 29805870, "link": "https://stackoverflow.com/questions/29805870/a-peculiar-bug-while-reading-and-printing-strings-of-char-in-c/29807113#29807113", "title": "A peculiar bug while reading and printing strings of *char in C", "body": "<p>Never trust your input, so check for spaces to go to the beginning of the word.</p>\n\n<p>You increment word one too many, as @rpattiso notes.</p>\n\n<p>I have doubts about your memory allocation (you don't show us all your code):\n<code>root.word = (char *)malloc(sizeof(char *));</code> allocates room for a <em>pointer</em> to a char, but does not allocate the room for the characters themselves. readWord can do that.</p>\n\n<p>The following adapted version should work (updated):</p>\n\n<pre><code>void readWord(char **linePointer, char **wordPointer){\n    char *line  = *linePointer;\n    int i;\n\n    while (!isEndOfLine(line) &amp;&amp; !isLowerCaseLetter(*line)) line++; // go to begin of word\n    *linePointer= line;\n    while (!isEndOfLine(line) &amp;&amp;  isLowerCaseLetter(*line)) line++; // go to end of word\n\n    i= line - *linePointer;                     // allocate room for word and copy it\n    *wordPointer= malloc((i+1) * sizeof(char));\n    strncpy(*wordPointer, *linePointer, i);\n    (*wordPointer)[i]= '\\0;\n\n    printf(\"The retrieved word is: %s.\\n\", *wordPointer);\n    *linePointer = line;\n}\n</code></pre>\n"}], "owner": {"reputation": 6017, "user_id": 4694621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lIYBa.png?s=128&g=1", "display_name": "Mateusz Piotrowski", "link": "https://stackoverflow.com/users/4694621/mateusz-piotrowski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 29807113, "answer_count": 1, "score": 0, "last_activity_date": 1429740817, "creation_date": 1429726867, "last_edit_date": 1429727100, "question_id": 29805870, "link": "https://stackoverflow.com/questions/29805870/a-peculiar-bug-while-reading-and-printing-strings-of-char-in-c", "title": "A peculiar bug while reading and printing strings of *char in C", "body": "<p>I've just encountered something really odd. My string of char (let's call it <code>word</code>) turns out to have additional letters when I print it. <br> The contatenated letter varies depending on:</p>\n\n<ol>\n<li>the length of the proper prefix word.</li>\n<li>the number of spaces after the word.</li>\n</ol>\n\n<p>I'm parsing the <code>word</code> from a <code>line</code> which is just a one line form the standard input. I'm using a function <code>readWord</code> to get the <code>word</code> out of the <code>line</code>:</p>\n\n<pre><code>void readWord(char **linePointer, char **wordPointer){\n  char *line  = *linePointer;\n  char *word = *wordPointer;\n  while (!isEndOfLine(line) &amp;&amp; isLowerCaseLetter(*line)){\n    *word = *line;\n    word++;\n    line++;\n  }\n  word++;\n  *word = '\\0';\n  printf(\"The retrieved word is: %s.\\n\", *wordPointer)\n  *linePointer = line;\n}\n</code></pre>\n\n<p>My inputs/outputs look like this (please note that I call the <code>readWord</code> function AFTER taking care of <code>insert</code> and the whitespace between):</p>\n\n<pre><code>// INPUT 1 :\ninsert foo\ninsert ba      // several spaces after 'ba'\n// OUTPUT 2:\nThe retrieved word is foo.\nThe retrieved word is bas.\n\n// INPUT 1 :\ninsert foo\ninsert ba      // several spaces after 'bar'\n// OUTPUT 2:\nThe retrieved word is foo.\nThe retrieved word is bare.\n</code></pre>\n\n<p>I was thinking whether I allocate the <code>*word</code> properly and I guess I do:</p>\n\n<pre><code>root.word = (char *)malloc(sizeof(char *)); //root is my structure\n</code></pre>\n\n<p><strike>Moreover, it is unlikely connected to some errors of reassigning the <code>word</code> string because it is completely clear at the beginning of the <code>readWord()</code> function.</strike></p>\n\n<p>Thank you for any help. It is indeed a challenging bug for me and I don't know what else I can do.</p>\n\n<p><b>UPDATE</b></p>\n\n<p>It turns out that I actually have some problems with allocating/reassigning, since:</p>\n\n<pre><code>//INPUT\ninsert foo//no spaces\n  insert bar                //spaces here\n//OUTPUT\nword variable before calling readWord function: ' '.\nThe retrieved word is foo.\nword variable before calling readWord function: 'insert foo\n'.\nThe retrieved word is bare.\n</code></pre>\n"}, {"tags": ["c++", "c", "sockets", "openssl", "winsock2"], "answers": [{"comments": [{"owner": {"reputation": 449, "user_id": 4708444, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/57e1665328d412a518089ebbdcfb1845?s=128&d=identicon&r=PG&f=1", "display_name": "GloriousLemon", "link": "https://stackoverflow.com/users/4708444/gloriouslemon"}, "edited": false, "score": 0, "creation_date": 1429729865, "post_id": 29805872, "comment_id": 47741472, "body": "Thanks. winsock is the Windows library equivalent to the Unix sockets library."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1461718043, "post_id": 29805872, "comment_id": 61322825, "body": "Winsock sockets are indeed <i>blocking</i> by default."}], "tags": [], "owner": {"reputation": 3265, "user_id": 2606938, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7gIUB.jpg?s=128&g=1", "display_name": "Prabhu", "link": "https://stackoverflow.com/users/2606938/prabhu"}, "is_accepted": false, "score": 0, "last_activity_date": 1429726884, "creation_date": 1429726884, "answer_id": 29805872, "question_id": 29805785, "link": "https://stackoverflow.com/questions/29805785/if-a-winsock2-socket-is-non-blocking-would-an-ssl-object-associated-with-it-als/29805872#29805872", "title": "If a winsock2 socket is non-blocking, would an SSL object associated with it also exhibit non-blocking behavior?", "body": "<blockquote>\n  <p>If my assumption is correct, does that mean if the socket is non-blocking, the SSL is as well?</p>\n</blockquote>\n\n<p>Yes.</p>\n\n<blockquote>\n  <p>Is a winsock tcp socket non-blocking by default (assuming I have created a TCP socket, but have not called ioctlsocket and set non-blocking mode)</p>\n</blockquote>\n\n<p>Unix sockets are by default blocking. Haven't used Winsock. But am sure Winsock should be by default blocking.</p>\n"}, {"tags": [], "owner": {"reputation": 24, "user_id": 5046868, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ibNPU.jpg?s=128&g=1", "display_name": "Chungkil Kim", "link": "https://stackoverflow.com/users/5046868/chungkil-kim"}, "is_accepted": false, "score": 0, "last_activity_date": 1445947542, "creation_date": 1445947542, "answer_id": 33367572, "question_id": 29805785, "link": "https://stackoverflow.com/questions/29805785/if-a-winsock2-socket-is-non-blocking-would-an-ssl-object-associated-with-it-als/33367572#33367572", "title": "If a winsock2 socket is non-blocking, would an SSL object associated with it also exhibit non-blocking behavior?", "body": "<p>try following code:</p>\n\n<pre><code>   SSL_set_fd(ss, sock);\nretry:\n   int ret = SSL_accept(ssl);\n   if (ret != 1) {\n      int err = SSL_get_error(ssl, ret);\n      if (err == SSL_ERROR_WANT_READ || SSL_ERROR_WANT_WRITE) {\n         // maybe need some sleep or select\n         goto retry;\n      }\n   }\n</code></pre>\n"}], "owner": {"reputation": 449, "user_id": 4708444, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/57e1665328d412a518089ebbdcfb1845?s=128&d=identicon&r=PG&f=1", "display_name": "GloriousLemon", "link": "https://stackoverflow.com/users/4708444/gloriouslemon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 254, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1445947542, "creation_date": 1429726583, "question_id": 29805785, "link": "https://stackoverflow.com/questions/29805785/if-a-winsock2-socket-is-non-blocking-would-an-ssl-object-associated-with-it-als", "title": "If a winsock2 socket is non-blocking, would an SSL object associated with it also exhibit non-blocking behavior?", "body": "<p>I'm asking this question because I am unsure whether an SSL object treats a socket as a sink/source for messages like it does with a BIO object. My gut is telling me yes, but I'm not certain.</p>\n\n<p><strong>Goal:</strong>\nI am integrating a SSL authentication into already existing TCP code. Rather than calling the conventional send()/receive(), I would like to direct the messages through OpenSSL's SSL_read()/SSL_write() instead. My other requirement is that communication is non-blocking and data can be partially sent.</p>\n\n<p>Here's how I've associated the SSL object with the socket (Server code).</p>\n\n<pre><code>SSL_Init(std::wstring &amp;peer_hostname, SOCKET sock){\n        //...\n        //Initialize SSL structure\n                ssl = SSL_new(context);\n                if (ssl == NULL){\n                    mr = APPZRETURN(E_FAIL, L\"%ls (%d) : SSL_new failed. Unable to create SSL structure\", __FUNCTIONW__, __LINE__);\n                }\n\n                //Agent uses winsock class, but OpenSSL uses unix socket. Surpressed warning added here for 4244. It works\n                if (SSL_set_fd(ssl, sock) == 0){    //set file descriptor for ssl\n                    //Operation failed\n                    return -1;\n        }\n        //...\n        int status = SSL_accept(ssl);   \n        SSL_set_mode(ssl, SSL_MODE_ACCEPT_MOVING_WRITE_BUFFER|SSL_MODE_ENABLE_PARTIAL_WRITE);\n        //...\n    }\n</code></pre>\n\n<p>According to the documentation for SSL_read() [<a href=\"https://www.openssl.org/docs/ssl/SSL_read.html]\" rel=\"nofollow\">https://www.openssl.org/docs/ssl/SSL_read.html]</a>, the SSL is non-blocking if the underlying BIO is non-blocking. If my assumption is correct, does that mean if the socket is non-blocking, the SSL is as well?</p>\n\n<p><strong>Extension of my Question</strong>: Is a winsock tcp socket non-blocking by default (assuming I have created a TCP socket, but have not called ioctlsocket and set non-blocking mode)</p>\n\n<p>Thank you for taking the time to read this. It's much appreciated.</p>\n"}, {"tags": ["c", "search", "select", "dynamic", "properties"], "comments": [{"owner": {"reputation": 1907, "user_id": 3161525, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/6c4bdb240d87fd9fa82717d3cfbea305?s=128&d=identicon&r=PG&f=1", "display_name": "EMBLEM", "link": "https://stackoverflow.com/users/3161525/emblem"}, "edited": false, "score": 0, "creation_date": 1429726771, "post_id": 29805753, "comment_id": 47739521, "body": "Can we see <code>struct Address</code>? It looks like you&#39;re trying to use a string as a key to access something (as with a Python dictionary or Ruby hash), which is a high-level function that doesn&#39;t exist in C."}, {"owner": {"reputation": 51353, "user_id": 380562, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ShCrU.jpg?s=128&g=1", "display_name": "Adam Halasz", "link": "https://stackoverflow.com/users/380562/adam-halasz"}, "reply_to_user": {"reputation": 1907, "user_id": 3161525, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/6c4bdb240d87fd9fa82717d3cfbea305?s=128&d=identicon&r=PG&f=1", "display_name": "EMBLEM", "link": "https://stackoverflow.com/users/3161525/emblem"}, "edited": false, "score": 0, "creation_date": 1429726857, "post_id": 29805753, "comment_id": 47739572, "body": "@emblem Of course! I updated the question. By the way <code>rows[i].name</code> is working that is why I tried <code>rows[i][key]</code>"}, {"owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "edited": false, "score": 0, "creation_date": 1429727262, "post_id": 29805753, "comment_id": 47739840, "body": "What type should <code>rows[i][key]</code> be? It needs to be known at compile time"}, {"owner": {"reputation": 51353, "user_id": 380562, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ShCrU.jpg?s=128&g=1", "display_name": "Adam Halasz", "link": "https://stackoverflow.com/users/380562/adam-halasz"}, "reply_to_user": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "edited": false, "score": 0, "creation_date": 1429727365, "post_id": 29805753, "comment_id": 47739898, "body": "@Eric mostly strings/character arrays"}, {"owner": {"reputation": 1785, "user_id": 4680870, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClLL3.png?s=128&g=1", "display_name": "tivn", "link": "https://stackoverflow.com/users/4680870/tivn"}, "edited": false, "score": 0, "creation_date": 1429727440, "post_id": 29805753, "comment_id": 47739943, "body": "It is not clear what you are trying to achieve. Does <code>key</code> should match <code>id</code> or <code>name</code>? What you are trying to print? Print <code>name</code>?"}, {"owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "edited": false, "score": 0, "creation_date": 1429727471, "post_id": 29805753, "comment_id": 47739960, "body": "That&#39;s not my point. There does not exist a T for which you can write <code>T result = rows[i][key]</code>, and guarantee it would compile for any value of key."}, {"owner": {"reputation": 51353, "user_id": 380562, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ShCrU.jpg?s=128&g=1", "display_name": "Adam Halasz", "link": "https://stackoverflow.com/users/380562/adam-halasz"}, "reply_to_user": {"reputation": 1785, "user_id": 4680870, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClLL3.png?s=128&g=1", "display_name": "tivn", "link": "https://stackoverflow.com/users/4680870/tivn"}, "edited": false, "score": 0, "creation_date": 1429727628, "post_id": 29805753, "comment_id": 47740049, "body": "@tivn ideally I would like to be able to select data by all of the methods, id, name, set and email too. My goal here is that I can select data dynamically without having to write a bunch of if-else statements for every method in the for loop."}, {"owner": {"reputation": 1785, "user_id": 4680870, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClLL3.png?s=128&g=1", "display_name": "tivn", "link": "https://stackoverflow.com/users/4680870/tivn"}, "edited": false, "score": 0, "creation_date": 1429728888, "post_id": 29805753, "comment_id": 47740833, "body": "@Adam, basically a <code>struct</code> field name can not be accessed dynamically. So you will need if-else statement for each field."}], "answers": [{"comments": [{"owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "edited": false, "score": 0, "creation_date": 1429727309, "post_id": 29805921, "comment_id": 47739863, "body": "What is <code>myArray</code>? What is <code>Address</code>? Why has <code>Address</code> switched from a class name to a variable name?"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "edited": false, "score": 0, "creation_date": 1429802002, "post_id": 29805921, "comment_id": 47781509, "body": "You are using object oriented source terms to ask about C source syntax.  In any case, my previous example has been re-written to address OP&#39;s question.  Please let me know if you have any more quesions."}, {"owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "edited": false, "score": 0, "creation_date": 1429829202, "post_id": 29805921, "comment_id": 47798106, "body": "s/Class/struct/. Also, there&#39;s a buffer overflow waiting to happen here if you&#39;re not using <code>strncpy</code>/<code>snprintf</code>"}], "tags": [], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "is_accepted": false, "score": 0, "last_activity_date": 1429803911, "last_edit_date": 1429803911, "creation_date": 1429727050, "answer_id": 29805921, "question_id": 29805753, "link": "https://stackoverflow.com/questions/29805753/get-property-dynamically-in-c/29805921#29805921", "title": "Get property dynamically in c", "body": "<p><strong><em>I would like to create a simple key-value find function...</em></strong>\nand<br>\n<strong><em>I'm stuck at printing specific dynamic columns of a row...</em></strong></p>\n\n<p>From your written descriptions (as opposed to the code examples), it appears you are looking for a way to do the following:</p>\n\n<p><strong><em>1)</em></strong> use an array of struct as a <em>database</em><br>\n<strong><em>2)</em></strong> consider the members of the struct as fields of a row (or a record)<br>\n<strong><em>3)</em></strong> struct array should be searchable using <em>key-value</em> approach<br>\n<strong><em>4)</em></strong> executable acts on user input value of key.  </p>\n\n<p>Regarding the meaning/context of the word <em>dynamic</em>, in the comments you have expressed interest in getting the information you want without using if/else, or other branching methods to search.     </p>\n\n<p>But you are using a struct.  I agree that a struct is a good choice here because it accommodates multiple data types, (in this case ints and chars) where using a 2D array restricts to only 1 data type.   </p>\n\n<p>Because you have expressed interest in using a struct array as the container for a collection of records ( rows of associated values), searching and manipulating the data at some point requires use of branching. </p>\n\n<p>The code illustration below may miss some of the points you have described, but it does include a way to search a <em>database</em> (array of struct, which is simulated in the code), and either:</p>\n\n<p><strong><em>print out a column of data</em></strong>, using </p>\n\n<pre><code>void PrintSelectedColumnData(int col);\n</code></pre>\n\n<p>or <strong><em>retrieve a single tag-value pair</em></strong> using  </p>\n\n<pre><code>void GetSelectedColumnData(int col, int row, char *data);\n</code></pre>\n\n<p><strong><em>Code exmaple</em></strong>: includes two search functions (executable requires argument of 0 - 3)</p>\n\n<pre><code>typedef struct {\n    int id;\n    int set;\n    char name[512]; \n    char email[512];\n}ADDRESS;\n\n// column names       ID  SET NAME   EMAIL\nADDRESS Address[] = {{1,  1, \"Joe\", \"joe@email.com\"}, //for illustration purposes\n                     {2,  2, \"Ann\", \"ann@email.com\"}, //initialize a struct \"database\n                     {3,  3, \"Ben\", \"ben@email.com\"}, //with fillers in code.\n                     {4,  4, \"Gil\", \"gil@email.com\"}, //(Can later modify to read from a file)\n                     {5,  5, \"pat\", \"pat@email.com\"},\n                     {6,  6, \"Gin\", \"gin@email.com\"},\n                     {7,  7, \"Jen\", \"Jen@email.com\"},\n                     {8,  8, \"Wil\", \"wil@email.com\"},\n                     {9,  9, \"Abe\", \"Abe@email.com\"},\n                     {10,10, \"Del\", \"del@email.com\"}};\n\nenum {\n    ID,\n    SET,\n    NAME,\n    EMAIL,\n    MAX_COLS\n};\n\n//prototypes\nvoid PrintSelectedColumnData(int col);\nvoid GetSelectedColumnData(int col, int row, char *data) ;\n\nint main(int argv, char *argc[])\n{\n    int col=0;\n    int i;\n    char data[512] = {0};\n\n    if(argv == 1) \n    {\n        printf(\"no arguments, leaving\");\n        return 0;\n    }\n    col = atoi(argc[1]);\n\n    PrintSelectedColumnData(col);\n\n    GetSelectedColumnData(col, 5, data);//Example: get sixth record of column data\n                                        //call with changed arguments to retrieve different data\n    switch(col) {\n        case ID:\n            Address[5].id = atoi(data);\n            break;\n        case SET:\n            Address[5].id = atoi(data);\n            break;\n        case NAME:\n            strcpy(Address[5].name,  data);\n            break;\n        case EMAIL:\n            strcpy(Address[5].email,  data);\n            break;\n        default:\n            printf(\"%d is not valid, must used values 0 - 3\\n\", col);\n            break;\n    }\n\n    getchar();//stop execution to view resuls   \n    return 0;\n}\n\nvoid PrintSelectedColumnData(int col)\n{\n    int i=0;\n\n    for(i=0;i&lt;sizeof(Address)/sizeof(Address[0]);i++)\n    {\n\n        switch(col) {\n            case ID:\n                printf(\"ID %d: %d\\n\", i+1, Address[i].id);\n                break;\n            case SET:\n                printf(\"SET %d: %d\\n\", i+1, Address[i].set);\n                break;\n            case NAME:\n                printf(\"NAME %d: %s\\n\", i+1, Address[i].name);\n                break;\n            case EMAIL:\n                printf(\"ID %d: %s\\n\", i+1, Address[i].email);\n                break;\n            default:\n                printf(\"%d is not valid, must used values 0 - 3\\n\", col);\n                i = sizeof(Address)/sizeof(Address[0]) + 1;\n                break;\n        }\n    }\n}\n\nvoid GetSelectedColumnData(int col, int row, char *data)\n{\n    switch(col) {\n        case ID:\n            sprintf(data, \"%d\", Address[row].id);\n            break;\n        case SET:\n            sprintf(data, \"%d\", Address[row].set);\n            break;\n        case NAME:\n            strcpy(data, Address[row].name); \n            break;\n        case EMAIL:\n            strcpy(data, Address[row].email); \n            break;\n        default:\n            printf(\"%d is not valid, must used values 0 - 3\\n\", col);\n            break;\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 51353, "user_id": 380562, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ShCrU.jpg?s=128&g=1", "display_name": "Adam Halasz", "link": "https://stackoverflow.com/users/380562/adam-halasz"}, "edited": false, "score": 0, "creation_date": 1429727746, "post_id": 29806106, "comment_id": 47740117, "body": "Well this is definetely a solution to the main problem! :P However what I would like to achieve is to select the fields dynamically so I don&#39;t need to write those if else statements. Is that possible somehow?"}, {"owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "reply_to_user": {"reputation": 51353, "user_id": 380562, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ShCrU.jpg?s=128&g=1", "display_name": "Adam Halasz", "link": "https://stackoverflow.com/users/380562/adam-halasz"}, "edited": false, "score": 0, "creation_date": 1429727941, "post_id": 29806106, "comment_id": 47740232, "body": "<i>&quot;Well this is definetely a solution to the main problem&quot;</i> - no it isn&#39;t, because you can&#39;t do anything with the result"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1429727943, "post_id": 29806106, "comment_id": 47740235, "body": "The <code>if()</code> construct is as close as you are going to get.  <code>switch () {...}</code> looks very similar once compiled."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 1, "creation_date": 1429728483, "post_id": 29806106, "comment_id": 47740570, "body": "@Eric - yes, but if with the string array (say <code>char array[max][]={&quot;name&quot;,...};</code>)  there is an accompanying enum, say enum {NAME,.,...,MAX};, then the enum values can be used as <code>case:</code> values, and in turn as the index to the array of strings to pull name, id, or email strings.  This is what I started to do in an answer a few minutes ago.  (albeit without the benefit of some of the information you have since put together)"}, {"owner": {"reputation": 1785, "user_id": 4680870, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClLL3.png?s=128&g=1", "display_name": "tivn", "link": "https://stackoverflow.com/users/4680870/tivn"}, "edited": false, "score": 0, "creation_date": 1429728497, "post_id": 29806106, "comment_id": 47740579, "body": "@Eric, rather than <code>getField()</code>, <code>printField()</code> would be more useful."}, {"owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "reply_to_user": {"reputation": 1785, "user_id": 4680870, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClLL3.png?s=128&g=1", "display_name": "tivn", "link": "https://stackoverflow.com/users/4680870/tivn"}, "edited": false, "score": 1, "creation_date": 1429728834, "post_id": 29806106, "comment_id": 47740799, "body": "@tivn: <code>void strifyField(struct Address* addr, char* field, char* dest, int n)</code> is probably where you&#39;d need to go with that"}], "tags": [], "owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "is_accepted": false, "score": 1, "last_activity_date": 1429728950, "last_edit_date": 1429728950, "creation_date": 1429727646, "answer_id": 29806106, "question_id": 29805753, "link": "https://stackoverflow.com/questions/29805753/get-property-dynamically-in-c/29806106#29806106", "title": "Get property dynamically in c", "body": "<p>This is as close as you can get:</p>\n\n<pre><code>// we have to return void*, because we don't know what type to expect\nvoid* getField(struct Address* addr, char* field) {\n    if(strcmp(field, \"name\") == 0) return &amp;addr-&gt;name;\n    if(strcmp(field, \"id\") == 0) return &amp;addr-&gt;id;\n    if(strcmp(field, \"email\") == 0) return &amp;addr-&gt;email;\n    return 0;\n}\n</code></pre>\n\n<p>But this doesn't help as much as you might hope, because:</p>\n\n<pre><code>char* key = \"name\";\nvoid* value = getField(&amp;row, key);\n// uh oh - we don't know what type `value` points to. Better double check:\n\n//               This changes per field   V              V  And so does this\nif(value == &amp;row.name)  printf(\"row.%s = %s\\n\", key, *(char(*)[512])value);\nif(value == &amp;row.email) printf(\"row.%s = %s\\n\", key, *(char(*)[512])value);\nif(value == &amp;row.id)    printf(\"row.%s = %d\\n\", key, *(int*)        value);\n\n// We could conceivably write a function to return the correct format specifier, but\n// the language does not allow us to write a function to do the appropriate cast\n</code></pre>\n"}], "owner": {"reputation": 51353, "user_id": 380562, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ShCrU.jpg?s=128&g=1", "display_name": "Adam Halasz", "link": "https://stackoverflow.com/users/380562/adam-halasz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1429803911, "creation_date": 1429726476, "last_edit_date": 1429727248, "question_id": 29805753, "link": "https://stackoverflow.com/questions/29805753/get-property-dynamically-in-c", "title": "Get property dynamically in c", "body": "<p>I'm new to C. I'm building a very tiny \"database\" while I'm learning. I undestand most of the basics in C, but I'm having trouble with Pointers and Arrays.</p>\n\n<p>I would like to create a simple key-value find function. The key is entered by the user as an argument (argv) when the program is executed. </p>\n\n<p><strong>I'm stuck at printing specific dynamic <em>columns</em> of a row</strong>. I would like to do something like this:</p>\n\n<pre><code>myArray[i][key] // the key is dynamic, i is from a loop\n</code></pre>\n\n<p>Here is the find function:</p>\n\n<pre><code>void Find(char *key, char *value){\n    // Print intention to terminal\n    printf(\"\\nGet where %s=%s\\n\", key, value);\n\n    // Get rows\n    struct Address *rows = conn-&gt;db-&gt;rows;\n\n    // List rows\n    int i = 0;\n    for(i = 0; i &lt; 100; i++){\n        if(rows[i].set){\n            printf(\"rows[%d] = %s\\n\", i, rows[i][key] ); // &lt;-- how to do this?\n        }\n    }\n}\n</code></pre>\n\n<p>Here is the Address Structure:</p>\n\n<pre><code>struct Address {\n    int id;\n    int set;\n    char name[512]; \n    char email[512];\n};\n</code></pre>\n\n<p>And here is the Database Structure:</p>\n\n<pre><code>struct Database {\n    struct Address rows[100];\n};\n</code></pre>\n"}, {"tags": ["c", "string", "char", "substring"], "comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1429727551, "post_id": 29805742, "comment_id": 47740004, "body": "What do you need the substring for? I ask, because the C technique for substrings depends on whether you need the substring only temporarily, whether it should be modified, etc."}, {"owner": {"reputation": 37, "user_id": 3106485, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/82c2dcf5da75145e47908e0003ed865f?s=128&d=identicon&r=PG&f=1", "display_name": "user3106485", "link": "https://stackoverflow.com/users/3106485/user3106485"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1429743495, "post_id": 29805742, "comment_id": 47748822, "body": "I will continue to manipulate the resulting string. It should do to just be able to copy it to a new location in memory"}], "answers": [{"comments": [{"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 2, "creation_date": 1429726772, "post_id": 29805816, "comment_id": 47739522, "body": "He&#39;s a Java boy, make sure to mention he has to free that pointer when he is done with it :)"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": -1, "last_activity_date": 1429761250, "last_edit_date": 1429761250, "creation_date": 1429726673, "answer_id": 29805816, "question_id": 29805742, "link": "https://stackoverflow.com/questions/29805742/how-to-obtain-a-substring-based-on-index-in-c/29805816#29805816", "title": "How to obtain a substring based on index in C", "body": "<p>This should do it:</p>\n\n<pre><code>char* cut_string(char const* in)\n{\n   // Compute the length of the input string and use\n   // that length to allocate memory for the string to\n   // be returned.\n   // strlen(in) returns the length of the string.\n   // malloc(...) allocates memory.\n   char* ret = malloc(strlen(in));\n   if ( ret == NULL )\n   {\n      // If there is a problem in allocating memory\n      // return NULL. We can't do anything about \n      // cutting the input string.\n      return NULL;\n   }\n\n   // Copy the input string to the string to be returned.\n   // Start copying from the second character. If\n   // in is \"This is a string\", in+1 is \"his is a string\".\n   strcpy(ret, in+1);\n\n   // Return the resulting string.\n   return ret;\n}\n</code></pre>\n\n<p>In the calling function,</p>\n\n<pre><code>char* s = cut_string(\"my string\");\nif ( s != NULL )\n{\n   // Use s\n\n   // Make sure to free the memory returned by cut_string.\n   free(s);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 116, "user_id": 4769551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1a81fa7d947d26531f73f989f006e68?s=128&d=identicon&r=PG&f=1", "display_name": "palash jain", "link": "https://stackoverflow.com/users/4769551/palash-jain"}, "is_accepted": false, "score": 1, "last_activity_date": 1429726724, "creation_date": 1429726724, "answer_id": 29805835, "question_id": 29805742, "link": "https://stackoverflow.com/questions/29805742/how-to-obtain-a-substring-based-on-index-in-c/29805835#29805835", "title": "How to obtain a substring based on index in C", "body": "<p>Use something like this</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nchar* substring(char*, int, int);\n\nint main() \n{\n   char string[100], *pointer;\n   int position, length;\n\n   printf(\"Input a string\\n\");\n   gets(string);\n\n   printf(\"Enter the position and length of substring\\n\");\n   scanf(\"%d%d\",&amp;position, &amp;length);\n\n   pointer = substring( string, position, length);\n\n   printf(\"Required substring is \\\"%s\\\"\\n\", pointer);\n\n   free(pointer);\n\n   return 0;\n}\n\n/*C substring function: It returns a pointer to the substring */\n\nchar *substring(char *string, int position, int length) \n{\n   char *pointer;\n   int c;\n\n   pointer = malloc(length+1);\n\n   if (pointer == NULL)\n   {\n      printf(\"Unable to allocate memory.\\n\");\n      exit(1);\n   }\n\n   for (c = 0 ; c &lt; length ; c++)\n   {\n      *(pointer+c) = *(string+position-1);      \n      string++;   \n   }\n\n   *(pointer+c) = '\\0';\n\n   return pointer;\n}\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 3106485, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/82c2dcf5da75145e47908e0003ed865f?s=128&d=identicon&r=PG&f=1", "display_name": "user3106485", "link": "https://stackoverflow.com/users/3106485/user3106485"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2913, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1429761250, "creation_date": 1429726398, "last_edit_date": 1429726722, "question_id": 29805742, "link": "https://stackoverflow.com/questions/29805742/how-to-obtain-a-substring-based-on-index-in-c", "title": "How to obtain a substring based on index in C", "body": "<p>For some background, I'm not too familiar with C, but I'm very proficient in Java.  In the current program I'm working on, I'm trying to figure out how to implement something exactly like the java method <code>someString.substring(int startIndex, int endIndex)</code> that returns a new String based on the starting and ending index of the previous one. </p>\n\n<p>For the purposes of my implementation, I would only cut the first char off and return the remaining String.  Here's my implementation in java.</p>\n\n<pre><code>public String cut_string(String word)\n{\n\n    String temp = word.substring(1, word.length());\n    return temp;\n}\n</code></pre>\n"}, {"tags": ["c", "unix", "ubuntu", "signals"], "comments": [{"owner": {"reputation": 41122, "user_id": 2101267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06383b51463f855d7cc0f07d4566bd42?s=128&d=identicon&r=PG", "display_name": "Dark Falcon", "link": "https://stackoverflow.com/users/2101267/dark-falcon"}, "edited": false, "score": 3, "creation_date": 1429726341, "post_id": 29805676, "comment_id": 47739274, "body": "Because a signal can never be pending more than once for a process. Subsequent signals received before the first is handled are ignored."}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1429727045, "post_id": 29805676, "comment_id": 47739705, "body": "Signals arn&#39;t queued. see <a href=\"http://stackoverflow.com/questions/5285414/signal-queuing-in-c\">stackoverflow.com/questions/5285414/signal-queuing-in-c</a>"}], "owner": {"reputation": 231, "user_id": 2441297, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3ead2073e5193439fc91f2d310986265?s=128&d=identicon&r=PG", "display_name": "user2441297", "link": "https://stackoverflow.com/users/2441297/user2441297"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1475, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1429726156, "creation_date": 1429726156, "question_id": 29805676, "link": "https://stackoverflow.com/questions/29805676/sending-multiple-sigusr1-sigusr2-signals", "title": "Sending multiple SIGUSR1/SIGUSR2 signals", "body": "<p>I have the following C files: parent &amp; child. Parent forks the child, and sends multiple SIGUSR1/SIGUSR2 to the child, the child receives them and prints the output.</p>\n\n<p>receiver.c:</p>\n\n<pre><code>void start_signalset();\n\nvoid wypisz(int signo) {\n    if (signo == SIGUSR1) \n        printf(\"Received SIGNAL1\\n\");\n    if (signo == SIGUSR2) \n        printf(\"Received SIGNAL2\\n\")\n    start_signalset();\n}\n\nvoid start_signalset() {\n    if(signal(SIGUSR2, wypisz) == SIG_ERR) {  exit(0);  }\n    if(signal(SIGUSR1, wypisz) == SIG_ERR) {  exit(0);  }\n}\n\nint main(int argc, char ** argv) {\n    start_signalset();\n    while(is_active) {\n        sigset_t pusty;\n        sigemptyset(&amp;pusty);\n        sigsuspend(&amp;pusty);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>parent.c:</p>\n\n<pre><code>int main(int argc, char ** argv) {\n\nsigset_t nowy, stary;\nsigaddset(&amp;nowy, SIGUSR1);\nsigaddset(&amp;nowy, SIGUSR2);\nsigprocmask(SIG_BLOCK, &amp;nowy, &amp;stary);\n\npid_t pid;\nif((pid = fork()) == -1) {//error handling }    \nelse if(pid == 0)\n    if(execlp(\"./receiver\", \"receiver\", NULL) == -1)\n        _exit(7);\n\nkill(pid, SIGUSR1);\nkill(pid, SIGUSR1);\nkill(pid, SIGUSR1);\nkill(pid, SIGUSR2);\n\nreturn 0;\n}\n</code></pre>\n\n<p>The problem is that in receiver I get only one SIGUSR1 and SIGUSR2, no matter how many kills I sent in the parent. So the sample output is:</p>\n\n<pre><code>Received SIGNAL2\nReceived SIGNAL1\n</code></pre>\n\n<p>Instead of 4 entries, I have only 2.</p>\n\n<p>Any ideas why?</p>\n"}, {"tags": ["c", "arrays", "pointers", "void-pointers"], "comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 3, "creation_date": 1429726173, "post_id": 29805617, "comment_id": 47739156, "body": "<code>link-&gt;dataItem.dataPtr = &amp;string;</code> - That doesn&#39;t work. First, you don&#39;t need the <code>&amp;</code>, because the local array will decay into a pointer. Second, and more importantly, you assign a local array to a pointer to be used outside of its scope. That&#39;s undefined behaviour."}], "answers": [{"comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1429726431, "post_id": 29805720, "comment_id": 47739321, "body": "... and <code>strcpy()</code>, or just use something like <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/strdup.html\" rel=\"nofollow noreferrer\"><code>strdup()</code></a> if amicable."}], "tags": [], "owner": {"reputation": 55561, "user_id": 418715, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ExBMo.gif?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/418715/joe"}, "is_accepted": false, "score": 1, "last_activity_date": 1429726975, "last_edit_date": 1429726975, "creation_date": 1429726316, "answer_id": 29805720, "question_id": 29805617, "link": "https://stackoverflow.com/questions/29805617/printing-charvoid-works-in-main-program-but-not-function/29805720#29805720", "title": "Printing (Char*)(Void*) works in main program but not function", "body": "<p>You are assigning the <code>dataPtr</code> to a string that is declared on the stack on this line:</p>\n\n<pre><code>link-&gt;dataItem.dataPtr = &amp;string;\n</code></pre>\n\n<p>Once you are out of scope you have undefined behavior. You need to allocate memory for the string on the heap. </p>\n\n<pre><code>char *string = malloc(220);\n\n... \n\n//then assign it directly\nlink-&gt;dataItem.dataPtr = string;\n</code></pre>\n\n<p>You will also need a function to free all of your data when you are done with it.</p>\n"}, {"tags": [], "owner": {"reputation": 11286, "user_id": 3928385, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3HdfL.png?s=128&g=1", "display_name": "Ishamael", "link": "https://stackoverflow.com/users/3928385/ishamael"}, "is_accepted": true, "score": 1, "last_activity_date": 1429726972, "creation_date": 1429726972, "answer_id": 29805895, "question_id": 29805617, "link": "https://stackoverflow.com/questions/29805617/printing-charvoid-works-in-main-program-but-not-function/29805895#29805895", "title": "Printing (Char*)(Void*) works in main program but not function", "body": "<p>This is what happens in your code:</p>\n\n<p>As you call to the LoadData function, it allocates <code>string[220]</code> on the stack. The stack then looks like this:</p>\n\n<pre><code>[main variables] [LoadData variables, including string[220]] &lt;-- HEAD\n</code></pre>\n\n<p>Then load data exits. As it exits, it moves the stack pointer back. At this time your stack looks like this:</p>\n\n<pre><code>[main variables] &lt;-- HEAD [LoadData variables, including string[220]]\n</code></pre>\n\n<p>Note, that in your case <code>string</code> is still technically there, it can be read and accessed, but this is purely by coincidence and depends on your complier implementation. Some other compiler might have immediately erased it, or optimized it in some other way. As soon as a function exits, there should be no pointers left pointing to variables allocated on the stack! Your code violates this, by leaking a pointer to the stack-allocated <code>string</code>. At this time your code is already in the danger zone! The moment you access that pointer, your code can crash, your computer can catch fire, or the world can cease to exist.</p>\n\n<p>But in your particular case <code>string</code> happens to be still accessible, so as you print it from <code>main</code>, it appears to be printed properly. It gives you an illusion that everything is fine. The illusion disappears as you call to the <code>printFunc</code>, because now it will occupy the stack space where <code>string</code> was located!</p>\n\n<pre><code>[main variables] [printFunc variables] &lt;-- HEAD\n</code></pre>\n\n<p>Note, that the <code>string</code> is now gone! But your <code>Stack</code> variable still points to that memory, which now contains garbage!</p>\n\n<p>How to address it? Well, if you plan to return something from the function, you need to either allocate string for that on the calling side:</p>\n\n<pre><code>int main {\n    ...\n    char string[220];\n    LoadData(&amp;Stack[0], string); // and make LoadData use the argument string instead of creating its own\n    ...\n}\n</code></pre>\n\n<p>or make LoadData allocate the string on the heap:</p>\n\n<pre><code>char* LoadData (...) {\n    char* string = malloc(220);\n    ...\n}\n</code></pre>\n\n<p>In which case do not forget to deallocate it in <code>main</code> later:</p>\n\n<pre><code>int main() {\n    loadData(&amp;Stack[0]);\n    ...\n    free(Stack[0].dataItem.dataPtr);\n}\n</code></pre>\n"}], "owner": {"reputation": 1442, "user_id": 2592424, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zaexb.jpg?s=128&g=1", "display_name": "beckah", "link": "https://stackoverflow.com/users/2592424/beckah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 894, "favorite_count": 0, "accepted_answer_id": 29805895, "answer_count": 2, "score": 1, "last_activity_date": 1429726975, "creation_date": 1429725958, "question_id": 29805617, "link": "https://stackoverflow.com/questions/29805617/printing-charvoid-works-in-main-program-but-not-function", "title": "Printing (Char*)(Void*) works in main program but not function", "body": "<p>I have an array of structures called <code>node</code>s. Each node contains a field of a void pointer. </p>\n\n<p>In a function I take the specific node and assign the void pointer to a string, that string containing the result of a decimal that has been converted to binary. </p>\n\n<p>The issue is that accessing and printing that void pointer cast to a char* works fine in the function to assign the void* to a new char* AND prints fine when returning back to the main function. However it does not print properly when I try to print it in a separate function that take the node[] and index of the array as arguments.</p>\n\n<p>To help illuminate confusion this is the simplified version of my program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define listSize 100\n\ntypedef struct Node\n{\n    union{\n        void *dataPtr;\n        int countr;\n    }dataItem;\n    int  link;\n}node;\n\nvoid loadData(node*);\nvoid printFunc(node[], int);\n\nvoid main()\n{\n    struct Node Stack[listSize];\n\n    loadData(&amp;Stack[0]);\n\n    //This prints fine\n    char * temp;\n    temp = (char*)(Stack[0].dataItem.dataPtr);\n    printf(\"\\nMain():  Stack[empty].dataItem.dataPtr = %s\\n\", temp);\n\n\n    printFunc(Stack, 0);\n\n}\n\nvoid loadData(node* link){\n    char string[220];\n\n    int n, c, k, i;\n\n    printf(\"Enter an integer: \");\n    scanf(\"%d\", &amp;n);\n\n    i = 0;\n\n    for (c = 31; c &gt;= 0; c--)\n    {\n        k = n &gt;&gt; c;\n\n        if (k &amp; 1){\n            string[i] = '1';\n            i++;\n        }\n        else{\n            string[i] = '0';\n            i++;\n        }\n        if (c == 0){ string[i] = '\\0'; }//end the string\n    }\n\n    link-&gt;dataItem.dataPtr = &amp;string;\n\n    //This prints fine:\n    printf(\"\\nLoadData(): link-&gt;dataItem.dataPtr is now %s\\n\", (char *)(link-&gt;dataItem.dataPtr));\n}\n\n\nvoid printFunc(node Stack[], int newLink){\n\n    //This does not work!\n    char* temp;\n    temp = (char*)(Stack[newLink].dataItem.dataPtr);\n    printf(\"\\npush():  Stack[newLink].dataItem.dataPtr %s\\n\", temp);\n}\n</code></pre>\n\n<p>Output:\n<img src=\"https://i.stack.imgur.com/Sk3AQ.jpg\" alt=\"Output of program\"></p>\n\n<p>I am also compiling in Visual Studios 2012. I know that sometimes pointers in GCC to the Microsoft C compiler can be a little different.</p>\n\n<p>What am I writing that is making the program unable to print the void* cast as a char* in the <code>printFunc</code> function? </p>\n"}, {"tags": ["c", "for-loop", "input", "scanf", "freeze"], "comments": [{"owner": {"reputation": 223115, "user_id": 426671, "user_type": "moderator", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zgBsf.jpg?s=128&g=1", "display_name": "Taryn", "link": "https://stackoverflow.com/users/426671/taryn"}, "edited": false, "score": 0, "creation_date": 1429728637, "post_id": 29805396, "comment_id": 47740677, "body": "Comments are not for extended discussion; this conversation has been <a href=\"http://chat.stackoverflow.com/rooms/75968/discussion-on-question-by-antoni4040-why-is-this-c-for-loop-not-working-properly\">moved to chat</a>."}, {"owner": {"reputation": 1870, "user_id": 2627868, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000913831419/picture?type=large", "display_name": "Diversity", "link": "https://stackoverflow.com/users/2627868/diversity"}, "edited": false, "score": 0, "creation_date": 1429728693, "post_id": 29805396, "comment_id": 47740720, "body": "@Wather Vane thats correct but using Visual C++ doesn&#39;t either compile without the cast. So it was a suggestion."}, {"owner": {"reputation": 4912, "user_id": 1953533, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Vs4v8.jpg?s=128&g=1", "display_name": "CroCo", "link": "https://stackoverflow.com/users/1953533/croco"}, "edited": false, "score": 0, "creation_date": 1429730344, "post_id": 29805396, "comment_id": 47741775, "body": "It is working with me. I&#39;m using visual studio 2010."}, {"owner": {"reputation": 4912, "user_id": 1953533, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Vs4v8.jpg?s=128&g=1", "display_name": "CroCo", "link": "https://stackoverflow.com/users/1953533/croco"}, "edited": false, "score": 0, "creation_date": 1429730636, "post_id": 29805396, "comment_id": 47741968, "body": "Show us what exactly you are typing. This might show the actual problem."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1429735813, "post_id": 29805396, "comment_id": 47745151, "body": "In chat, OP&#39;s comments &quot;No... BTW, if I add a printf in the loop that prints the current input, it prints everything except from the last one...&quot;.  1) So I have to ask simply, did you press &lt;Enter&gt; after the last number?  2) Try adding a <code>&#39;\\n&#39;</code> to <code>printf(&quot;hey&quot;);</code> --&gt; <code>printf(&quot;hey\\n&quot;);</code>."}, {"owner": {"reputation": 2177, "user_id": 938884, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/ZQtqX.png?s=128&g=1", "display_name": "Antoni4040", "link": "https://stackoverflow.com/users/938884/antoni4040"}, "edited": false, "score": 0, "creation_date": 1429793736, "post_id": 29805396, "comment_id": 47774450, "body": "That worked! Thank you so much! But why?"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1429794817, "post_id": 29805396, "comment_id": 47775376, "body": "@chux , Post an answer. @OP, Or use <code>fflush(stdout);</code> just after the last <code>printf</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1429796764, "post_id": 29805396, "comment_id": 47777087, "body": "@Antoni4040 I assume when you commented &quot;That worked!&quot; that you are referring to #2 &quot;adding a <code>&#39;\\n&#39;</code>&quot;.  If you meant #1 (adding &lt;Enter&gt;) let me know."}, {"owner": {"reputation": 2177, "user_id": 938884, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/ZQtqX.png?s=128&g=1", "display_name": "Antoni4040", "link": "https://stackoverflow.com/users/938884/antoni4040"}, "edited": false, "score": 0, "creation_date": 1429803720, "post_id": 29805396, "comment_id": 47782884, "body": "I meant that adding &#39;\\n&#39; finally fixed the problem... Not sure why..."}], "answers": [{"comments": [{"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 1, "creation_date": 1429725686, "post_id": 29805515, "comment_id": 47738829, "body": "That doesn&#39;t explain why it hangs on scanf or which scanf it is hanging on."}, {"owner": {"reputation": 2177, "user_id": 938884, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/ZQtqX.png?s=128&g=1", "display_name": "Antoni4040", "link": "https://stackoverflow.com/users/938884/antoni4040"}, "edited": false, "score": 0, "creation_date": 1429726050, "post_id": 29805515, "comment_id": 47739074, "body": "It hangs even if I write it like this: int nums[5]"}, {"owner": {"reputation": 16470, "user_id": 179372, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7735d49d1b04ba5e18bbe107ad756b0d?s=128&d=identicon&r=PG", "display_name": "Tarantula", "link": "https://stackoverflow.com/users/179372/tarantula"}, "edited": false, "score": 2, "creation_date": 1429726059, "post_id": 29805515, "comment_id": 47739079, "body": "It says that &quot;it hangs, waiting for more input&quot;, so this hanging is very dubious."}], "tags": [], "owner": {"reputation": 16470, "user_id": 179372, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7735d49d1b04ba5e18bbe107ad756b0d?s=128&d=identicon&r=PG", "display_name": "Tarantula", "link": "https://stackoverflow.com/users/179372/tarantula"}, "is_accepted": false, "score": 1, "last_activity_date": 1429726650, "last_edit_date": 1429726650, "creation_date": 1429725643, "answer_id": 29805515, "question_id": 29805396, "link": "https://stackoverflow.com/questions/29805396/why-is-this-c-for-loop-not-working-properly/29805515#29805515", "title": "Why is this C for-loop not working properly?", "body": "<p>This code is correct, except for the fact that you're not freeing your memory (not a big issue for this simple code) and you're not checking <code>scanf</code> for errors, which may be the cause of your problem.</p>\n\n<p>A better implementation with error checking and correct memory handling is described below:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n    int t, i, ret;\n    int *nums;\n\n    ret = scanf(\"%d\", &amp;t);          \n    if(ret != 1)\n    {\n        /* something wrong */\n    }\n\n    nums = malloc(t * sizeof(int));\n    if(nums==NULL)\n    {\n        /* memory error */\n    }\n\n    for(i = 0; i &lt; t; i++)\n    {\n        ret = scanf(\"%d\", &amp;nums[i]);          \n        if(ret != 1)\n        {\n            /* something wrong */\n        }\n\n    }\n    free(nums);\n    printf(\"hey\");\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1429726288, "post_id": 29805640, "comment_id": 47739238, "body": "Did you literally enter a space between each number or did you hit return?"}], "tags": [], "owner": {"reputation": 2093, "user_id": 3153883, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/xVr3z.jpg?s=128&g=1", "display_name": "LawfulEvil", "link": "https://stackoverflow.com/users/3153883/lawfulevil"}, "is_accepted": false, "score": 1, "last_activity_date": 1429726992, "last_edit_date": 1429726992, "creation_date": 1429726043, "answer_id": 29805640, "question_id": 29805396, "link": "https://stackoverflow.com/questions/29805396/why-is-this-c-for-loop-not-working-properly/29805640#29805640", "title": "Why is this C for-loop not working properly?", "body": "<p>Just a guess here...</p>\n\n<p>But I'm guessing you ran it and entered :</p>\n\n<pre><code>4\n1234\n</code></pre>\n\n<p>For example, you put in 4 and then 1234 and it hangs. Well, that would be because 1234 is the first number and not 4 distinct numbers so its waiting for the second number. You have to press enter or some such delimiter between each number.</p>\n\n<p>Try this set of inputs instead: </p>\n\n<pre><code>4\n1234\n29\n4\n5\n</code></pre>\n\n<p>You should get :</p>\n\n<pre><code>hey\n</code></pre>\n\n<p>Pro grammatically, you should be checking return values from your function calls.   Make sure malloc didn't return zero.  Make sure scanf returns the number of inputs you expected to read.   Add in printouts to make sure the values it read in are what you expected/wanted to read in.</p>\n\n<p>EDIT : \nGuessing you have a typo in the program which isn't displayed here.   such as :</p>\n\n<pre><code>scanf(\"%s\", &amp;t);\n</code></pre>\n\n<p>Or you are getting the 'hey' and just not seeing it.</p>\n\n<pre><code>[ov@MARVIN sotest]$ ./a.out\n5 5 4 3 23 1\nhey[ov@MARVIN sotest]$ \n</code></pre>\n\n<p>See the 'hey' is sort of hidden in my prompt because you are missing the '\\n' new line in the printout?</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1429796872, "last_edit_date": 1495541260, "creation_date": 1429796483, "answer_id": 29825274, "question_id": 29805396, "link": "https://stackoverflow.com/questions/29805396/why-is-this-c-for-loop-not-working-properly/29825274#29825274", "title": "Why is this C for-loop not working properly?", "body": "<p>Remember to flush when you are done.</p>\n\n<p>In chat, OP's comments \"No... BTW, if I add a printf in the loop that prints the current input, it prints everything except from the last one...\".  This hinted that the issue was on the final output.</p>\n\n<p>The following sends data out to be printed.  But <code>stdout</code> is typically buffered.  Actual output may not occur until sometime later.  Output is <em>flushed</em> when  1) output contains an end-of-line <code>'\\n'</code>, 2) <code>fflush()</code> is called 3) the program ends.  I am surprised output did not appear when the program ended, but possibly OP's true code differs from the post.</p>\n\n<pre><code>printf(\"hey\");\n</code></pre>\n\n<p>Change to </p>\n\n<pre><code>printf(\"hey\\n\");\n</code></pre>\n\n<p>Or <a href=\"https://stackoverflow.com/users/3049655/cool-guy\">@Cool Guy</a></p>\n\n<pre><code>printf(\"hey\");\nfflush(stdout);\n</code></pre>\n\n<p>BTW: This is also hinted in <a href=\"https://stackoverflow.com/a/29805593/2410359\">@Diversity</a> answer.</p>\n\n<hr>\n\n<p>Note: Always a good idea to check the result of <code>scanf()</code></p>\n\n<pre><code>// scanf(\"%d\", &amp;t)\nif (1 != scanf(\"%d\", &amp;t)) Handle_BadInput_or_EOF();\n</code></pre>\n"}], "owner": {"reputation": 2177, "user_id": 938884, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/ZQtqX.png?s=128&g=1", "display_name": "Antoni4040", "link": "https://stackoverflow.com/users/938884/antoni4040"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4348, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1429796872, "creation_date": 1429725248, "last_edit_date": 1429725457, "question_id": 29805396, "link": "https://stackoverflow.com/questions/29805396/why-is-this-c-for-loop-not-working-properly", "title": "Why is this C for-loop not working properly?", "body": "<pre><code>int main()\n{\n    int t, i;\n    int *nums;\n    scanf(\"%d\", &amp;t);\n    nums = malloc(t * sizeof(int));\n    for(i = 0; i &lt; t; i++)\n    {\n        scanf(\"%d\", &amp;nums[i]);          \n    }\n    printf(\"hey\");\n}\n</code></pre>\n\n<p>For some reason, it hangs, waiting for more input! Any ideas?</p>\n"}, {"tags": ["c", "store"], "comments": [{"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 1, "creation_date": 1429724757, "post_id": 29805177, "comment_id": 47738199, "body": "<code>int one = 4</code>? That&#39;s just... wrong. next up: <code>#define TRUE 0</code>"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1429724757, "post_id": 29805177, "comment_id": 47738200, "body": "One <code>=</code> is assignment. Two <code>==</code> is comparison. Your compiler should be warning you about this. If not, use <code>-Wall</code>."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1429724761, "post_id": 29805177, "comment_id": 47738202, "body": "Unrelated to your question, but <code>if (a=1)</code> is always true, because you have used the assignment operator (single <code>=</code>) instead of the comparison operator (<code>==</code>)."}, {"owner": {"reputation": 3595, "user_id": 1072647, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/weTJG.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/1072647/john"}, "edited": false, "score": 0, "creation_date": 1429724779, "post_id": 29805177, "comment_id": 47738219, "body": "You will need to save this information to a file."}, {"owner": {"reputation": 641, "user_id": 2711654, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cntf6.jpg?s=128&g=1", "display_name": "Spidey", "link": "https://stackoverflow.com/users/2711654/spidey"}, "edited": false, "score": 0, "creation_date": 1429725354, "post_id": 29805177, "comment_id": 47738608, "body": "Answers below recommend you FILE I/O and they are correct but I think you should rather get comfortable writing simple C programmes then later return to this problem. Find a tutorial page that teaches C and suits you and as you learn find some simple exercises to complete. Exercises like these <a href=\"http://www.cprogramming.com/challenge.html\" rel=\"nofollow noreferrer\">cprogramming.com/challenge.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 678, "user_id": 1760073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e99e004737483107ba2924a915a96ab?s=128&d=identicon&r=PG", "display_name": "Mouze", "link": "https://stackoverflow.com/users/1760073/mouze"}, "is_accepted": false, "score": 2, "last_activity_date": 1429729196, "last_edit_date": 1429729196, "creation_date": 1429724762, "answer_id": 29805235, "question_id": 29805177, "link": "https://stackoverflow.com/questions/29805177/save-increment-in-c/29805235#29805235", "title": "Save increment in C", "body": "<p>Use fopen/fread/fclose when you start the application (before write checks if the FILE handle is correctly created)</p>\n\n<p>Use fopen/fwrite/fclose when you exit from the application.</p>\n\n<p>How to access file? very basic functionalities, read this:\n<a href=\"http://www.thegeekstuff.com/2012/07/c-file-handling/\" rel=\"nofollow\">http://www.thegeekstuff.com/2012/07/c-file-handling/</a></p>\n"}, {"comments": [{"owner": {"reputation": 2792, "user_id": 3125367, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/650027e104822e3cd1be56bb90fa5271?s=128&d=identicon&r=PG&f=1", "display_name": "user3125367", "link": "https://stackoverflow.com/users/3125367/user3125367"}, "edited": false, "score": 0, "creation_date": 1429728684, "post_id": 29805256, "comment_id": 47740710, "body": "Although one/two only grow, both in numeric and string representations, it is still unsafe in development and support perspective to just rewind file without truncating. Should put &#39;\\n&#39; in fprintf at least?"}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 0, "last_activity_date": 1429728733, "last_edit_date": 1429728733, "creation_date": 1429724815, "answer_id": 29805256, "question_id": 29805177, "link": "https://stackoverflow.com/questions/29805177/save-increment-in-c/29805256#29805256", "title": "Save increment in C", "body": "<p>Read both variables from file and write it to the file before closing the program.    </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    int a;\n    FILE *fp = fopen(\"save.txt\", \"r+\"); // File contains two integers 4 3\n    int one;\n    int two;\n    fscanf(fp, \"%d %d\", &amp;one, &amp;two);\n    printf(\"%d %d\\n\", one, two);\n    printf(\"If you have done this then write '1', if you have done that write '2' \");\n    scanf(\"%d\" ,&amp;a);\n    if (a==1)\n    {\n        one = one+1;\n    }\n    else if (a==2)\n    {\n        two = two+1;\n    }\n    rewind(fp);\n    fprintf(fp,\"%d %d\\n\", one, two);\n}  \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 481, "user_id": 3623056, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d12778b73dfe65165c66f2e88ce1c3bf?s=128&d=identicon&r=PG&f=1", "display_name": "mbsingh", "link": "https://stackoverflow.com/users/3623056/mbsingh"}, "is_accepted": false, "score": 0, "last_activity_date": 1429724888, "creation_date": 1429724888, "answer_id": 29805280, "question_id": 29805177, "link": "https://stackoverflow.com/questions/29805177/save-increment-in-c/29805280#29805280", "title": "Save increment in C", "body": "<p>When the program finishes processing it is removed from the memory along with it's variables. What you what to achieve requires file handling. See this tutorial - <a href=\"http://www.w3schools.in/c/file-handling/\" rel=\"nofollow\">http://www.w3schools.in/c/file-handling/</a></p>\n\n<p>A couple of suggestions:</p>\n\n<p>1 - It's supposed to be <code>if (a==1)</code></p>\n\n<p>2 - It's always recommended to add the <code>else</code> block for a <code>if..else if</code> control block to handle any unexpected input</p>\n"}], "owner": {"reputation": 73, "user_id": 3375665, "user_type": "registered", "accept_rate": 13, "profile_image": "https://www.gravatar.com/avatar/a082cbed0cb852828588a2edd5f4c545?s=128&d=identicon&r=PG&f=1", "display_name": "user3375665", "link": "https://stackoverflow.com/users/3375665/user3375665"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1447855190, "creation_date": 1429724591, "last_edit_date": 1447855190, "question_id": 29805177, "link": "https://stackoverflow.com/questions/29805177/save-increment-in-c", "title": "Save increment in C", "body": "<p>I need a little help with something I'm writing C. </p>\n\n<p>So I have this:</p>\n\n<pre><code>int a;\nint one = 4;\nint two = 3;\nprintf(\"If you have done this then write '1', if you have done that write '2' \");\nscanf(\"%d\" ,&amp;a);\nif (a=1)\n   {\n     one = one+1;\n    }\nelse if (a=2)\n   {\n    two = two+1\n   }\n</code></pre>\n\n<p>So the thing I want to do is to save that increment so the next time I open the program, the values of int one and two will change based on the last usage of the program.\nHow do I do this ?</p>\n"}, {"tags": ["c", "process", "pipe"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1429725405, "post_id": 29805165, "comment_id": 47738638, "body": "Checking the results of the library calls you&#39;re making is probably worthwhile, as is acting on those results accordingly. When the child process is done, naturally its memory is gone as well. But don&#39;t assume so is the data written on the pipe. That pipe still has an outstanding read-handle (and write handle, for that matter), since you didn&#39;t close the parent process write-side until after your <code>wait()</code>)."}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 4723530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6e802364ad90162318d1356d6a4741d?s=128&d=identicon&r=PG&f=1", "display_name": "Horatiu", "link": "https://stackoverflow.com/users/4723530/horatiu"}, "edited": false, "score": 0, "creation_date": 1429727780, "post_id": 29805554, "comment_id": 47740141, "body": "Thank you, that was what I was asking about."}], "tags": [], "owner": {"reputation": 1581, "user_id": 4788085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8412430be42932ed20e55d7b1400356a?s=128&d=identicon&r=PG&f=1", "display_name": "Moldova", "link": "https://stackoverflow.com/users/4788085/moldova"}, "is_accepted": false, "score": 3, "last_activity_date": 1429725778, "creation_date": 1429725778, "answer_id": 29805554, "question_id": 29805165, "link": "https://stackoverflow.com/questions/29805165/risk-of-losing-data-when-sending-variables-through-pipe/29805554#29805554", "title": "Risk of losing data when sending variables through pipe?", "body": "<p>Although the child process' memory is given back to the operating system when the process exits, I suspect this is not what you're really asking about.</p>\n\n<p>You are more likely concerned about what happens to the data that was written to the pipe after the child process exits. As the pipe(2) man page states:</p>\n\n<blockquote>\n  <p>Data written to the write end of the pipe is buffered by the kernel\n  until it is read from the read end of the pipe.</p>\n</blockquote>\n\n<p>So your data will arrive, even if the process that wrote it has already exited. </p>\n"}], "owner": {"reputation": 61, "user_id": 4723530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6e802364ad90162318d1356d6a4741d?s=128&d=identicon&r=PG&f=1", "display_name": "Horatiu", "link": "https://stackoverflow.com/users/4723530/horatiu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1429725778, "creation_date": 1429724547, "last_edit_date": 1495539816, "question_id": 29805165, "link": "https://stackoverflow.com/questions/29805165/risk-of-losing-data-when-sending-variables-through-pipe", "title": "Risk of losing data when sending variables through pipe?", "body": "<p>I have the following code:</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;sys/types.h&gt; // may not be needed\n#include &lt;sys/stat.h&gt; // may not be needed\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\ntypedef struct {\n    int pid;\n    char arg[100];\n    int nr;\n} Str;\n\nint main() {\n    int c2p[2];\n    pipe(c2p);\n    int f = fork();\n\n    if (f == 0) {\n        Str s;\n        s.pid = 1234;\n        strcpy(s.arg, \"abcdef\");\n        s.nr = 1;\n\n        close(c2p[0]);\n        write(c2p[1], &amp;s, sizeof(Str));\n        close(c2p[1]);\n        exit(0);\n    }\n\n    wait(0);\n    close(c2p[1]);\n    Str s;\n    read(c2p[0], &amp;s, sizeof(Str));\n    printf(\"pid: %d nr: %d arg: %s\", s.pid, s.nr, s.arg);\n    close(c2p[0]);\n    return 0;\n}\n</code></pre>\n\n<p>I have to say that it worked just fine until now (pid, nr and arg were never altered), but:</p>\n\n<p>When the child process is done, is the memory segment (used by the child) destroyed (marked as free)?\nIf so, is there the risk that between the time of writing and the time of reading to lose the acces to that segment or the data to be altered?</p>\n\n<p>(The original question was this: <a href=\"https://stackoverflow.com/questions/29802517/sending-structure-through-pipe-without-losing-data/29803129#29803129\">Sending structure through pipe without losing data</a> )</p>\n"}, {"tags": ["c", "unix", "fgets", "enter", "getchar"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1429724539, "post_id": 29805137, "comment_id": 47738035, "body": "Why so many people arbitrarily use <code>while (1)</code>?... And you don&#39;t need to empty anything with <code>fgets()</code>."}], "answers": [{"comments": [{"owner": {"reputation": 503, "user_id": 4807591, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/667094b001ffcd576b904e0c485a100b?s=128&d=identicon&r=PG&f=1", "display_name": "anto150192", "link": "https://stackoverflow.com/users/4807591/anto150192"}, "edited": false, "score": 0, "creation_date": 1429727617, "post_id": 29805187, "comment_id": 47740047, "body": "if i set MAX_DIMENSION=1240 and I send as input: a string &gt; 1024 it remains the remaining part on stdin that it&#39;s taken as next input, so I have to use while(getchar()!=&#39;\\n&#39;)"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 503, "user_id": 4807591, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/667094b001ffcd576b904e0c485a100b?s=128&d=identicon&r=PG&f=1", "display_name": "anto150192", "link": "https://stackoverflow.com/users/4807591/anto150192"}, "edited": false, "score": 0, "creation_date": 1429730882, "post_id": 29805187, "comment_id": 47742106, "body": "It would not work, you should then use <code>while (getchar() != EOF)</code>, but it would also block, what are you trying to do?"}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 0, "last_activity_date": 1429724616, "creation_date": 1429724616, "answer_id": 29805187, "question_id": 29805137, "link": "https://stackoverflow.com/questions/29805137/using-whilegetchar-n-i-empty-the-stdin-but-i-have-to-push-on-enter-key/29805187#29805187", "title": "Using while(getchar()!=&#39;\\n&#39;) I empty the stdin, but I have to push on Enter key", "body": "<p>The <code>fgets()</code> function, captures the <code>'\\n'</code> from <code>stdin</code>, you are using <code>getchar()</code> to extract the <code>'\\n'</code> from <code>stdin</code> but it was already consumed by <code>fgets()</code>, that's why you need one extra <code>\\'n'</code>.</p>\n\n<p>And also, you don't check if <code>getchar()</code> returns <code>EOF</code> instead of a character. And in my opinion, <code>while (1)</code> loops, make it hard to follow the logic</p>\n\n<pre><code>char buffer[MAX_DIMENSIONS];\nwhile (fgets(buffer, sizeof(buffer), stdin) == NULL)\n{\n   printf(\"Not correct term\\n\");\n   sleep(1); \n}\n</code></pre>\n\n<p>would be better.</p>\n"}, {"tags": [], "owner": {"reputation": 7456, "user_id": 1202400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4ddf9dd040b42f80911e4a53010dfc7?s=128&d=identicon&r=PG", "display_name": "unxnut", "link": "https://stackoverflow.com/users/1202400/unxnut"}, "is_accepted": false, "score": 2, "last_activity_date": 1429724736, "creation_date": 1429724736, "answer_id": 29805227, "question_id": 29805137, "link": "https://stackoverflow.com/questions/29805137/using-whilegetchar-n-i-empty-the-stdin-but-i-have-to-push-on-enter-key/29805227#29805227", "title": "Using while(getchar()!=&#39;\\n&#39;) I empty the stdin, but I have to push on Enter key", "body": "<p>You have used <code>fgets</code> to get a string.  That string was terminated by the newline characters.  Then, you are trying to <em>empty</em> <code>stdin</code> by using <code>getchar</code> and to get something into <code>getchar</code>, you have to input another newline character.  You can simply ignore the buffer after <code>fgets</code> if that is what you wanted.  There is no need to use <code>getchar</code> to empty the buffer.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 0, "last_activity_date": 1429890863, "last_edit_date": 1495541662, "creation_date": 1429729921, "answer_id": 29806816, "question_id": 29805137, "link": "https://stackoverflow.com/questions/29805137/using-whilegetchar-n-i-empty-the-stdin-but-i-have-to-push-on-enter-key/29806816#29806816", "title": "Using while(getchar()!=&#39;\\n&#39;) I empty the stdin, but I have to push on Enter key", "body": "<p>2 issues:  </p>\n\n<p>1: Code has extra <code>}</code>.</p>\n\n<pre><code>//                                                                   here\nif(fgets(buffer,MAX_DIMENSION,stdin)==NULL){ perror(\"Error\"); exit(1);}\n}else{\n// or at the beginning\n</code></pre>\n\n<p>2: Assuming the above it not the issue, then as <a href=\"https://stackoverflow.com/a/29805227/2410359\">@unxnut</a> answered, typically <code>fgets()</code> contains the <code>'\\n'</code> and there is no need to <em>empty</em> <code>stdin</code>.</p>\n\n<p>Yet when the line is excessively long and the <code>'\\n'</code> is not read by <code>fgets()</code>, then is makes sense to read until the end is found.</p>\n\n<pre><code>  if (fgets(buffer, MAX_DIMENSION, stdin) == NULL) {\n    perror(\"Error\");\n    exit(1);\n  }\n  if (strchr(buffer, '\\n') == NULL) {\n    int ch;\n    printf(\"Not correct term\\n\");\n    while (((ch = getchar()) != '\\n') &amp;&amp; (ch != EOF))\n      ;\n    // while(getchar()!='\\n');\n    sleep(1);\n  }\n</code></pre>\n"}], "owner": {"reputation": 503, "user_id": 4807591, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/667094b001ffcd576b904e0c485a100b?s=128&d=identicon&r=PG&f=1", "display_name": "anto150192", "link": "https://stackoverflow.com/users/4807591/anto150192"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 838, "favorite_count": 0, "accepted_answer_id": 29806816, "answer_count": 3, "score": 1, "last_activity_date": 1429890863, "creation_date": 1429724450, "last_edit_date": 1429726693, "question_id": 29805137, "link": "https://stackoverflow.com/questions/29805137/using-whilegetchar-n-i-empty-the-stdin-but-i-have-to-push-on-enter-key", "title": "Using while(getchar()!=&#39;\\n&#39;) I empty the stdin, but I have to push on Enter key", "body": "<p>I'm using while(getchar()!='\\n')  to empty my stdin, but sometimes if I want to go on, I need to push on Enter key and so the computation continue... Why? I'll post part of my code:</p>\n\n<pre><code>while(1){\n   if(fgets(buffer,MAX_DIMENSION,stdin)==NULL){ perror(\"Error\"); exit(1);}\n   }else{\n       printf(\"Not correct term\\n\");\n       while(getchar()!='\\n');\n       sleep(1); \n   }\n}\n</code></pre>\n\n<p>thanks!</p>\n\n<p>@iharob if i set MAX_DIMENSION=1240 and I send as input: a string > 1024 it remains something on stdin, so I have to use while(getchar()!='\\n')</p>\n"}, {"tags": ["c", "linux", "posix"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1429724226, "post_id": 29805023, "comment_id": 47737802, "body": "You are a ~34k user and you didn&#39;t think of this question as opinion based? And yes, there is include <code>limits.h</code> and use <code>PATH_MAX</code> or <code>MAX_PATH</code> on windows."}, {"owner": {"reputation": 62902, "user_id": 90511, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/nmOPo.png?s=128&g=1", "display_name": "hugomg", "link": "https://stackoverflow.com/users/90511/hugomg"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1429724281, "post_id": 29805023, "comment_id": 47737843, "body": "I outlined 3 different possibilities but I don&#39;t know which one is gonna end up being the simplest on to implement. So I think the question has a definite answer."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1429724320, "post_id": 29805023, "comment_id": 47737868, "body": "Implementation simplicity is not a good criterion, think of portability and scalability. Also, you can search the web for a <code>key</code> <code>value</code> file reading library, I am sure there would be options."}, {"owner": {"reputation": 62902, "user_id": 90511, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/nmOPo.png?s=128&g=1", "display_name": "hugomg", "link": "https://stackoverflow.com/users/90511/hugomg"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1429724489, "post_id": 29805023, "comment_id": 47737996, "body": "@iharob: my restriction that all configuration files are file names means that scalability is not an issue (its not worth adding dependencies for some XML parser lib because I don&#39;t need most of the features there). In the end the most simple solution is likely to be the most portable one as well."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1429724704, "post_id": 29805023, "comment_id": 47738154, "body": "You might like to have a look at <code>libconfig</code> (<a href=\"http://www.hyperrealm.com/libconfig/\" rel=\"nofollow noreferrer\">hyperrealm.com/libconfig</a>)."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1429725169, "post_id": 29805023, "comment_id": 47738480, "body": "Linux has <a href=\"http://linux.die.net/man/3/getline\" rel=\"nofollow noreferrer\">getline</a>, which handles lines of arbitrary length."}, {"owner": {"reputation": 62902, "user_id": 90511, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/nmOPo.png?s=128&g=1", "display_name": "hugomg", "link": "https://stackoverflow.com/users/90511/hugomg"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1429725403, "post_id": 29805023, "comment_id": 47738637, "body": "@MOehm: You should put that as an answer"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1429725693, "post_id": 29805023, "comment_id": 47738833, "body": "@hugomg: Okay, I&#39;ve re-written my comment as a short answer."}], "answers": [{"comments": [{"owner": {"reputation": 62902, "user_id": 90511, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/nmOPo.png?s=128&g=1", "display_name": "hugomg", "link": "https://stackoverflow.com/users/90511/hugomg"}, "edited": false, "score": 0, "creation_date": 1429725178, "post_id": 29805330, "comment_id": 47738486, "body": "I&#39;m looking for something simpler than that :) Preferably without adding more dependencies to the project."}], "tags": [], "owner": {"reputation": 2427, "user_id": 222131, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d3ff4ce3070fbfa81ff65ab53309dbd4?s=128&d=identicon&r=PG", "display_name": "Woodrow Douglass", "link": "https://stackoverflow.com/users/222131/woodrow-douglass"}, "is_accepted": false, "score": 0, "last_activity_date": 1429725049, "creation_date": 1429725049, "answer_id": 29805330, "question_id": 29805023, "link": "https://stackoverflow.com/questions/29805023/what-is-the-simplest-way-for-my-c-program-to-receive-some-file-paths-from-config/29805330#29805330", "title": "What is the simplest way for my C program to receive some file paths from configuration?", "body": "<p>If your application has a GUI, you may want your user to configure it from within the application. In this case, you may want to use a database to store your configuration; that way you can validate your data on it's way in, so your user can't write a bad config file. I would suggest using SQLite for this: it provides a full database in a file, and is pretty easy to use.</p>\n\n<p><a href=\"http://www.sqlite.org/\" rel=\"nofollow\">http://www.sqlite.org/</a></p>\n"}, {"tags": [], "owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "is_accepted": true, "score": 1, "last_activity_date": 1429725659, "creation_date": 1429725659, "answer_id": 29805520, "question_id": 29805023, "link": "https://stackoverflow.com/questions/29805023/what-is-the-simplest-way-for-my-c-program-to-receive-some-file-paths-from-config/29805520#29805520", "title": "What is the simplest way for my C program to receive some file paths from configuration?", "body": "<p>Your configuration file approach with a simple syntax looks good to me.</p>\n\n<p>Since you are on Linux, you could use <a href=\"http://linux.die.net/man/3/getline\" rel=\"nofollow\">getline</a> to read the file. It can handle lines of arbitrary length and manages the memory allocation for you.</p>\n"}], "owner": {"reputation": 62902, "user_id": 90511, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/nmOPo.png?s=128&g=1", "display_name": "hugomg", "link": "https://stackoverflow.com/users/90511/hugomg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 29805520, "answer_count": 2, "score": 1, "last_activity_date": 1429725659, "creation_date": 1429724148, "question_id": 29805023, "link": "https://stackoverflow.com/questions/29805023/what-is-the-simplest-way-for-my-c-program-to-receive-some-file-paths-from-config", "title": "What is the simplest way for my C program to receive some file paths from configuration?", "body": "<p>I have an application that is currently configurable via command line arguments</p>\n\n<pre><code>myprog  -fooFile 'foo.txt' -barFile 'bar.txt'\n</code></pre>\n\n<p>Command line parameters are a bit cumbersome so I want to allow for other avenues for these configurations but I am a bit disappointed that its looking more complicated then it taught it should be.</p>\n\n<h3>Solution 1: Use environment variables</h3>\n\n<p>I could make my program look for <code>MYPROG_FOO_FILE</code> and <code>MYPROG_BAR_FILE</code> envorinment variables. The implementation is just a <code>getenv</code> but env variables are global and add clutter and are also hard to configure. Specially for GUI apps because many window managers don't source \".profile\" during initialization.</p>\n\n<h3>Solution 2: Use a configuration file</h3>\n\n<p>Since the fooFile and progFile are kind of static configuration values, it seems like its better to put those in a configuration file somewhere:</p>\n\n<pre><code>fooFile = /home/hugomg/foo.txt\nbarFile = /home/hugomg/bar.txt\n</code></pre>\n\n<p>But afaik there is no easy way in C to read an arbitrarily long string from a file. Do I really need to make a loop that keeps reallocing a buffer just for this?</p>\n\n<p>Alternatively, since all my values are file names, is there some <code>#define</code> somewhere specifying the maximum size of a path string?</p>\n"}, {"tags": ["java", "c", "gwt", "xml-rpc", "gwt-rpc"], "owner": {"reputation": 1203, "user_id": 4400861, "user_type": "registered", "accept_rate": 93, "profile_image": "https://lh4.googleusercontent.com/-8UCNS8HZeso/AAAAAAAAAAI/AAAAAAAAAs0/Sg0T6EGGYy8/photo.jpg?sz=128", "display_name": "Abdessamad Doughri", "link": "https://stackoverflow.com/users/4400861/abdessamad-doughri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1429956366, "creation_date": 1429722874, "last_edit_date": 1429956366, "question_id": 29804585, "link": "https://stackoverflow.com/questions/29804585/how-to-invoke-a-gwt-service-from-c-client", "title": "How to invoke a gwt service from c client?", "body": "<p>I'm looking for a simple way to invoke a GWT service from C client. For the Server side I'm using the simple Gwt default source:</p>\n\n<pre><code>public String greetServer(String input) throws IllegalArgumentException {\n    // Verify that the input is valid. \n    if (!FieldVerifier.isValidName(input)) {\n        // If the input is not valid, throw an IllegalArgumentException Back to:\n        // the client.\n        throw new IllegalArgumentException(\n                \"Name must be at least 4 characters long\");\n    }\n\n    String serverInfo = getServletContext().getServerInfo();\n    String userAgent = getThreadLocalRequest().getHeader(\"User-Agent\");\n\n    // Escape data from the client to avoid cross-site script vulnerabilities.\n    input = escapeHtml(input);\n    userAgent = escapeHtml(userAgent);\n\n    return \"Hello, \" + input + \"!&lt;br&gt;&lt;br&gt;I am running \" + serverInfo\n            + \".&lt;br&gt;&lt;br&gt;It looks like you are using:&lt;br&gt;\" + userAgent;\n}\n</code></pre>\n\n<p>Now I've to create an RPC call from the C client that will call <code>greetServer</code> with a <code>String</code> parameter. So what kind of libraries do I have to use and how can I identify this service (<code>greetServer</code>)  in the client side. I've found this <a href=\"http://xmlrpc-c.sourceforge.net/\" rel=\"nofollow\">library</a> but I don't know if it'll work for me.</p>\n\n<p>Any Ideas?</p>\n"}, {"tags": ["c", "struct"], "comments": [{"owner": {"reputation": 1787, "user_id": 916549, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/yezKv.jpg?s=128&g=1", "display_name": "Sarang", "link": "https://stackoverflow.com/users/916549/sarang"}, "edited": false, "score": 1, "creation_date": 1429722765, "post_id": 29804539, "comment_id": 47736805, "body": "would help if you post code"}, {"owner": {"reputation": 52, "user_id": 4706075, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/622224314544496/picture?type=large", "display_name": "white lotus", "link": "https://stackoverflow.com/users/4706075/white-lotus"}, "reply_to_user": {"reputation": 1787, "user_id": 916549, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/yezKv.jpg?s=128&g=1", "display_name": "Sarang", "link": "https://stackoverflow.com/users/916549/sarang"}, "edited": false, "score": 0, "creation_date": 1429722827, "post_id": 29804539, "comment_id": 47736839, "body": "I don&#39;t have any code. It&#39;s an assignment. They give you parameters to follow and you have to design it yourself."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1429723829, "post_id": 29804539, "comment_id": 47737498, "body": "Are you perhaps lost in linguistics? The function can not create a type (and hey, a struct is a type, so  creating a struct means creating a type, right?) -- that&#39;s still something the programmer must do, in statically typed languages like C. It can create <i>objects</i> of certain types though, and that is probably the meaning of this in the pesky natural language we use."}, {"owner": {"reputation": 52, "user_id": 4706075, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/622224314544496/picture?type=large", "display_name": "white lotus", "link": "https://stackoverflow.com/users/4706075/white-lotus"}, "edited": false, "score": 0, "creation_date": 1429724010, "post_id": 29804539, "comment_id": 47737631, "body": "I wrote it verbatim as it was written on the assignment. I didn&#39;t know if the assignment had a typo or not."}], "answers": [{"comments": [{"owner": {"reputation": 52, "user_id": 4706075, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/622224314544496/picture?type=large", "display_name": "white lotus", "link": "https://stackoverflow.com/users/4706075/white-lotus"}, "edited": false, "score": 0, "creation_date": 1429723163, "post_id": 29804568, "comment_id": 47737064, "body": "That makes sense. Thanks ForceBru"}], "tags": [], "owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "is_accepted": true, "score": 4, "last_activity_date": 1429722843, "creation_date": 1429722843, "answer_id": 29804568, "question_id": 29804539, "link": "https://stackoverflow.com/questions/29804539/how-can-a-function-create-a-struct/29804568#29804568", "title": "How can a function create a struct?", "body": "<p>This is an example of a function returning a struct.     </p>\n\n<pre><code>struct test {\n    int a;\n};\nstruct test Fun(int k) {\n    struct test d;\n    d.a=k;\n    return d;\n}\n</code></pre>\n\n<p>Replace <code>struct test</code> with the name of your struct and the definition of <code>struct test</code> with your struct's definition. </p>\n\n<p>How to use</p>\n\n<pre><code>int main() {\n    struct test Test=Fun(6);\n    printf(\"%d\",Test.a); // prints '6'\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1429723289, "post_id": 29804646, "comment_id": 47737133, "body": "Don&#39;t forget to <code>free(fooptr);</code> when it&#39;s not needed anymore."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1429723439, "post_id": 29804646, "comment_id": 47737241, "body": "A literal string is a constant array of bytes, terminated by a zero byte. Arrays are <i>decaying</i> into pointers."}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": -1, "last_activity_date": 1429724419, "last_edit_date": 1495541153, "creation_date": 1429723068, "answer_id": 29804646, "question_id": 29804539, "link": "https://stackoverflow.com/questions/29804539/how-can-a-function-create-a-struct/29804646#29804646", "title": "How can a function create a struct?", "body": "<p>You can either <em>return</em> a <code>struct</code> from a function like in <a href=\"https://stackoverflow.com/a/29804568/841108\">ForceBru's answer</a>, or you can <em>create</em> a <code>struct</code> in <a href=\"http://en.wikipedia.org/wiki/C_dynamic_memory_allocation\" rel=\"nofollow noreferrer\">C dynamic memory</a> (a.k.a. the heap), using <code>malloc</code>, and return a pointer to it, e.g.</p>\n\n<pre><code>struct foo_st {\n  int num;\n  const char* str;\n};\n\nstruct foo_st* \n/* the second argument s should practically be a literal string */\nmake_foo (int n, const char* s) {\n   struct foo_st* p = malloc(sizeof(struct foo_st));\n   if (!p) { perror(\"malloc foo\"); exit(EXIT_FAILURE); };\n   p-&gt;num = n;\n   p-&gt;str = s;\n   return p;\n}\n</code></pre>\n\n<p>Your <code>main</code> (or some other function) might later do <code>struct foo_st*fooptr = make_foo(32, \"abc\");</code> but someone should call <code>free(fooptr)</code> (or at least, <code>free</code> the address which has been inside <code>fooptr</code>).</p>\n\n<p>Of course, you should never forget to <code>free</code> a <code>malloc</code>-ed pointer when it becomes useless. Be afraid of <a href=\"http://en.wikipedia.org/wiki/Memory_leak\" rel=\"nofollow noreferrer\">memory leaks</a>, <a href=\"http://en.wikipedia.org/wiki/Buffer_overflow\" rel=\"nofollow noreferrer\">buffer overflow</a> and <a href=\"http://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>. Read more about <a href=\"http://man7.org/linux/man-pages/man3/malloc.3.html\" rel=\"nofollow noreferrer\">malloc(3)</a> &amp; <code>free</code>.</p>\n\n<p>BTW, in practice you should decide of who is responsible for <code>free</code>-ing memory. In the above <code>make_foo</code> example, the second parameter to <code>make_foo</code> is supposed to be a literal string (if it is <code>malloc</code>-ed e.g. using <a href=\"http://man7.org/linux/man-pages/man3/strdup.3.html\" rel=\"nofollow noreferrer\">strdup(3)</a>, you'll need to <code>free</code> it elsewhere, and that becomes very messy).</p>\n\n<p>In practice you should <em>document the conventions about <strong>who is responsible</strong> to <code>free</code></em> some dynamically previously <code>malloc</code>ated memory. You might want to use <a href=\"http://valgrind.org/\" rel=\"nofollow noreferrer\">valgrind</a> (if your system has it), and, if using a recent <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a> compiler, its <a href=\"https://stackoverflow.com/a/16747187/841108\">-fsanitize=address option</a> to hunt memory related bugs. Very often, you happen to code both making and destroying functions (like <a href=\"https://stackoverflow.com/a/25365945/841108\">here</a> or <a href=\"https://stackoverflow.com/a/23433573/841108\">here</a>).</p>\n\n<p>You might want to read about <a href=\"http://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29\" rel=\"nofollow noreferrer\">garbage collection</a> (at least, to understand the concepts, such as <a href=\"http://en.wikipedia.org/wiki/Reference_counting\" rel=\"nofollow noreferrer\">reference counting</a>, and the terminology). Perhaps you'll later want to use <a href=\"http://www.hboehm.info/gc/\" rel=\"nofollow noreferrer\">Boehm's conservative garbage collector</a>.</p>\n"}], "owner": {"reputation": 52, "user_id": 4706075, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/622224314544496/picture?type=large", "display_name": "white lotus", "link": "https://stackoverflow.com/users/4706075/white-lotus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 29804568, "answer_count": 2, "score": 0, "last_activity_date": 1429724419, "creation_date": 1429722744, "last_edit_date": 1429722787, "question_id": 29804539, "link": "https://stackoverflow.com/questions/29804539/how-can-a-function-create-a-struct", "title": "How can a function create a struct?", "body": "<p>One of my assignments for the C Programming course was define a function called create_card. This function receives a suit character and an a card value, and returns a card_t struct.</p>\n\n<p>Question: How is a function supposed to create a struct? Can't it only create values for the struct? Did I misinterpret the meaning of the question or was the assignment written down wrong?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1787, "user_id": 916549, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/yezKv.jpg?s=128&g=1", "display_name": "Sarang", "link": "https://stackoverflow.com/users/916549/sarang"}, "edited": false, "score": 0, "creation_date": 1429723046, "post_id": 29804511, "comment_id": 47736993, "body": "I don&#39;t see any problems with this on Windows with VS2012. you need to provide more details"}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 3, "creation_date": 1429723118, "post_id": 29804511, "comment_id": 47737042, "body": "You forget to send 0 as last parameter in the function call <code>foo(&quot;hello&quot;, ..., 0);</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4284784"}, "reply_to_user": {"reputation": 1787, "user_id": 916549, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/yezKv.jpg?s=128&g=1", "display_name": "Sarang", "link": "https://stackoverflow.com/users/916549/sarang"}, "edited": false, "score": 0, "creation_date": 1429725526, "post_id": 29804511, "comment_id": 47738721, "body": "@Sarang So windows is better than MacOSX. I am using MacOSX and output as above. :-)"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1429726584, "post_id": 29804511, "comment_id": 47739426, "body": "No it is not You  are just  lucky"}, {"owner": {"reputation": 1787, "user_id": 916549, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/yezKv.jpg?s=128&g=1", "display_name": "Sarang", "link": "https://stackoverflow.com/users/916549/sarang"}, "edited": false, "score": 0, "creation_date": 1429726728, "post_id": 29804511, "comment_id": 47739493, "body": "agreed- you are lucky that it failed and now it got fixed the right way :)"}], "answers": [{"tags": [], "owner": {"reputation": 199084, "user_id": 56338, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/92fb4563ddc5ceeaa8b19b60a7a172f4?s=128&d=identicon&r=PG", "display_name": "sth", "link": "https://stackoverflow.com/users/56338/sth"}, "is_accepted": false, "score": 3, "last_activity_date": 1429725692, "last_edit_date": 1429725692, "creation_date": 1429723327, "answer_id": 29804747, "question_id": 29804511, "link": "https://stackoverflow.com/questions/29804511/c-function-variable-argument-length/29804747#29804747", "title": "C function variable argument length", "body": "<p>When you call the function, you don't provide a <code>0.0</code> argument. The function tries to print everything up to a zero argument, but there is not such argument.</p>\n\n<p>The function will go on to look at memory where it would expect a 5th, 6th, ... parameter until one such location randomly contains a zero or the program crashes.</p>\n"}, {"comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1429724441, "post_id": 29804780, "comment_id": 47737958, "body": "But, <code>0.0</code> is ok if it&#39;s not a result of a calculation."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1429725364, "post_id": 29804780, "comment_id": 47738618, "body": "@iharob, in subsequent tests passing a <code>double</code> var of value <code>0.0</code>, an <code>int</code> var of value <code>0</code>, and a plain <code>0</code> all worked, so I don&#39;t know what the original issue was when passing <code>0</code> failed. I only guess that the compiler pushed an <code>int</code> instead of a <code>double</code> as the function <code>foo()</code> does not declare types, but subsequently that was a benign bug.."}, {"owner": {"reputation": 199084, "user_id": 56338, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/92fb4563ddc5ceeaa8b19b60a7a172f4?s=128&d=identicon&r=PG", "display_name": "sth", "link": "https://stackoverflow.com/users/56338/sth"}, "edited": false, "score": 0, "creation_date": 1429725906, "post_id": 29804780, "comment_id": 47738970, "body": "Yes it should be <code>0.0</code>, since the function will expect a double, not an int."}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": true, "score": 4, "last_activity_date": 1429723415, "creation_date": 1429723415, "answer_id": 29804780, "question_id": 29804511, "link": "https://stackoverflow.com/questions/29804511/c-function-variable-argument-length/29804780#29804780", "title": "C function variable argument length", "body": "<p>You could solve it by adding a sentinel value to the values passed.</p>\n\n<pre><code>int main()\n{\n    foo(\"hello\", 5.5, 4.5, 3.5, 0.0);\n}\n</code></pre>\n\n<p>This had to be <code>0.0</code> in my test, not <code>0</code>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4284784"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 29804780, "answer_count": 2, "score": 0, "last_activity_date": 1429725692, "creation_date": 1429722693, "question_id": 29804511, "link": "https://stackoverflow.com/questions/29804511/c-function-variable-argument-length", "title": "C function variable argument length", "body": "<p>I want to pass variable argument to a function but don't want set the number in argument. so I check the end of argument with 0 as below:</p>\n\n<pre><code>#include &lt;stdarg.h&gt;\n#include &lt;stdio.h&gt;\n\nvoid foo(char* str, ... )\n{\n    printf(\"str: %s\\n\",str);\n    va_list arguments;                     \n    va_start(arguments,str);\n    while(1) {\n        double data = va_arg(arguments,double); \n        if (data == 0) {\n            break;\n        }\n        printf(\"data: %.2f\\n\",data);\n    }\n    va_end (arguments);\n    return;\n}\n\nint main()\n{\n    foo(\"hello\", 5.5, 4.5, 3.5);\n}\n</code></pre>\n\n<p>But it seems the out put not correct:</p>\n\n<pre><code>str: hello\ndata: 5.50\ndata: 4.50\ndata: 3.50\ndata: 34498135662005122837381407988349324615424289861359674446209831441373336786008345008385190019649501215393603210517859097842586295826918562939434091794406737728862534747430060032.00\n</code></pre>\n\n<p>The last data output is random value, it should not there! </p>\n"}, {"tags": ["ios", "c", "floating-point", "accelerate-framework"], "comments": [{"owner": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 0, "creation_date": 1429723327, "post_id": 29804305, "comment_id": 47737161, "body": "THe standard C/C++ math function is <code>signbit{f}</code>. You may need to apply a correction for negative zero, but in most cases this should suffice as-is."}], "answers": [{"comments": [{"owner": {"reputation": 1936, "user_id": 778240, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/H1oyk.png?s=128&g=1", "display_name": "olynoise", "link": "https://stackoverflow.com/users/778240/olynoise"}, "edited": false, "score": 1, "creation_date": 1429724768, "post_id": 29805103, "comment_id": 47738211, "body": "running a few tests with dispatch_benchmark -- this method is about 80% faster than doing it in a loop as described in the question.  And even faster than doing it with signbit()"}], "tags": [], "owner": {"reputation": 1936, "user_id": 778240, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/H1oyk.png?s=128&g=1", "display_name": "olynoise", "link": "https://stackoverflow.com/users/778240/olynoise"}, "is_accepted": true, "score": 1, "last_activity_date": 1429729762, "last_edit_date": 1429729762, "creation_date": 1429724362, "answer_id": 29805103, "question_id": 29804305, "link": "https://stackoverflow.com/questions/29804305/accelerate-framework-sign-function/29805103#29805103", "title": "Accelerate framework &quot;sign&quot; function", "body": "<p>Ok, I think I've found a way...</p>\n\n<p>vvcopysignf() \"Copies an array, setting the sign of each value based on a second array.\"</p>\n\n<p>So, one method would be to make an array of 1s, then use this function to change the sign of the 1s based on an input array. </p>\n\n<pre><code>float *ones = ... // a vector filled with 1's\nfloat *input = .... // an input vector\nfloat *output = ... // an output vector\nint bufferSize = ... // size of the vectors;\n\nvvcopysignf(output, ones, input, &amp;bufferSize);\n\n//output now is an array of -1s and 1s based the sign of the input.\n</code></pre>\n"}], "owner": {"reputation": 1936, "user_id": 778240, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/H1oyk.png?s=128&g=1", "display_name": "olynoise", "link": "https://stackoverflow.com/users/778240/olynoise"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 29805103, "answer_count": 1, "score": 0, "last_activity_date": 1429729762, "creation_date": 1429722089, "last_edit_date": 1429722399, "question_id": 29804305, "link": "https://stackoverflow.com/questions/29804305/accelerate-framework-sign-function", "title": "Accelerate framework &quot;sign&quot; function", "body": "<p>I'm trying to find a super fast way of getting the sign of each value in a vector.  I was hoping to find a function in the accelerate framework to do this, but couldn't find one.  Here's what it would do:  </p>\n\n<pre><code>float *inputVector = .... // some audio vector\nint length = ...// length of input vector.\nfloat *outputVector = ....// result\n\nfor( int i = 0; i&lt;length; i++ )\n{\n  if( inputVector[i] &gt;= 0 ) outputVector[i] = 1;\n  else outputVector[i] = -1;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "string", "function"], "comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1429721746, "post_id": 29804023, "comment_id": 47736112, "body": "This <code>strlen(lex[j])-1</code> is a receipe for desaster. Imagine what happens if <code>lex[j]</code> is an emtpy &quot;string&quot; with the length of <code>0</code>. Hint: Check the type <code>strlen()</code> returns."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1429721858, "post_id": 29804023, "comment_id": 47736183, "body": "I deleted my comment which said you do not terminate <code>temp[]</code> by using <code>temp[2]=&#39;\\0&#39;</code> because I noticed you never use <code>temp</code> or <code>p</code> as a string, only as a plain array."}, {"owner": {"reputation": 109, "user_id": 4775128, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/mWZiO.png?s=128&g=1", "display_name": "Shivalnu", "link": "https://stackoverflow.com/users/4775128/shivalnu"}, "edited": false, "score": 0, "creation_date": 1429721879, "post_id": 29804023, "comment_id": 47736199, "body": "well i know it&#39;s not the best solution, but what could be an alternative?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1429721997, "post_id": 29804023, "comment_id": 47736267, "body": "consistent indentation, say 4 spaces after every opening brace and un-indent before every closing brace would make the code much easier for humans to read/understand"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1429722023, "post_id": 29804023, "comment_id": 47736285, "body": "Using <code>strlen()</code> like that in a <code>for</code> loop, indicates a lack of understanding how strings work in c. You need to read about strings in c, what they are, and how <code>str*()</code> functions work."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1429722044, "post_id": 29804023, "comment_id": 47736301, "body": "Run your code in a debugger, trace through it and inspect the relevant values. To learn how to do this you might like to read here: <a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">ericlippert.com/2014/03/05/how-to-debug-small-programs</a>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1429722106, "post_id": 29804023, "comment_id": 47736351, "body": "Two remarks about <code>convert()</code>. First the loop is one too short: it should be <code>i &lt; strlen(word)</code>. Second, it would be simpler to use <code>tolower()</code> to convert to lower case with <code>word[i] = tolower(word[i]);</code>"}, {"owner": {"reputation": 109, "user_id": 4775128, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/mWZiO.png?s=128&g=1", "display_name": "Shivalnu", "link": "https://stackoverflow.com/users/4775128/shivalnu"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1429722244, "post_id": 29804023, "comment_id": 47736451, "body": "@WeatherVane yes i know but this was part of an exercise and i had to do it that way."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1429722455, "post_id": 29804023, "comment_id": 47736582, "body": "In that case the code would be clearer as <code>if(word[i] &gt;= &#39;A&#39; &amp;&amp; word[i] &lt;= &#39;Z&#39;)</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1429722603, "post_id": 29804023, "comment_id": 47736693, "body": "Perhaps you should have posted the code showing how <code>strstr()</code> and <code>strchr()</code> crash your program."}, {"owner": {"reputation": 109, "user_id": 4775128, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/mWZiO.png?s=128&g=1", "display_name": "Shivalnu", "link": "https://stackoverflow.com/users/4775128/shivalnu"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1429722903, "post_id": 29804023, "comment_id": 47736893, "body": "@WeatherVane the program crashes this way too but i can&#39;t figure out why."}], "answers": [{"comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1429725070, "post_id": 29805309, "comment_id": 47738414, "body": "BTW: the compiler warnings can be eliminated by declaring certain of the loop variables as &#39;size_t&#39; rather than &#39;int&#39;"}], "tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": true, "score": 2, "last_activity_date": 1429725485, "last_edit_date": 1429725485, "creation_date": 1429724985, "answer_id": 29805309, "question_id": 29804023, "link": "https://stackoverflow.com/questions/29804023/function-to-search-for-string-in-array-of-strings/29805309#29805309", "title": "Function to search for string in array of strings", "body": "<p>this line: </p>\n\n<pre><code>for(k=0;k&lt;strlen(lex[j])-1;k++)\n</code></pre>\n\n<p>is the problem.  </p>\n\n<pre><code>strlen(lex[0]) is 0\nstrlen(lex[0])-1 is -1 (0xFFFFFFFF in a 32 bit system)\nk starts at 0 and is incremented until it is equal to 0xFFFFFFFF\n</code></pre>\n\n<p>of course, k exceeds the bounds of lex[0] when k = 50.</p>\n\n<p>the result is undefined behaviour which leads to the seg fault event</p>\n\n<p>To determine all the above, I compiled/linked the program via gcc, with the -ggdb parameter.</p>\n\n<p>then I ran the program via 'gdb theprogram'</p>\n\n<pre><code>within gdb I entered\nbr main &lt;-- break point set\nrun\nc &lt;-- continue\nthe program then crashed with a seg fault event\nthen I entered\nbt  &lt;-- back trace\nthe bt showed me this line: 'if(word[i]!=lex[j][k] || word[i+1]!=lex[j] [k+1])'\nThen I entered\np k &lt;-- print variable k\n=6832   (which is WAY out of bounds)\n\nthen I entered\nrun\ny\nbr theprogram.c:41    (the line number from above) &lt;-- set another break epoint\nc\nthe program stopped at line 41\np j\n=0  ( this was the gdb response )\np k \n= 0\np i\n= 0\n\na little thinking, \nstepping though that inner loop using 'n' &lt;-- next\nand playing on gdb \nindicated that the problem was in line 42\nand resulted in revealing the root of the problem\n</code></pre>\n"}], "owner": {"reputation": 109, "user_id": 4775128, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/mWZiO.png?s=128&g=1", "display_name": "Shivalnu", "link": "https://stackoverflow.com/users/4775128/shivalnu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 0, "accepted_answer_id": 29805309, "answer_count": 1, "score": 1, "last_activity_date": 1429725485, "creation_date": 1429721306, "last_edit_date": 1429722002, "question_id": 29804023, "link": "https://stackoverflow.com/questions/29804023/function-to-search-for-string-in-array-of-strings", "title": "Function to search for string in array of strings", "body": "<p>I am trying to write a function that searches for the unique part(maximum two characters) of a string in an array of strings. Although <code>strstr</code> and <code>strchr</code> are not working and crash my program for some reason. So I have resorted to trying to create something that resembles their function.</p>\n\n<p>My question is this:<br>\nWhy is strstr not working (something like <code>strstr(lex[j],word)</code>) and what am I doing wrong here?</p>\n\n<p>Here is the code for the function that searches for two unique characters within an array of strings :</p>\n\n<pre><code>void convert(char word[])\n{\n    int i;\n\n    for (i = 0 ; i &lt;= strlen(word) ; i++)\n    {\n        if(word[i] &gt;= 65 &amp;&amp; word[i] &lt;= 90)\n        {\n            word[i] = word[i]+32;\n        }\n    }\n}\n\n\nint  twochar(char lex[50][50],char word[], int size,char temp[3])\n{\n    int i,j,k,count,totlen;\n    convert(word);\n\n    for (i = 0 ; i &lt; strlen(word) - 1 ; i++)\n    {\n        count = 0;\n        totlen = 0;\n        for(j = 0; j&lt;size; j++)\n        {\n            convert(lex[j]);\n            totlen += strlen(lex[j]) - 1;\n            for(k = 0 ; k &lt; strlen(lex[j]) - 1 ; k++)\n            {\n                if (word[i] != lex[j][k] || word[i+1] != lex[j][k + 1])\n                {\n                    count++;\n                }\n            }\n        }\n        if(count =  = totlen)\n        {\n            temp[0] = word[i];\n            temp[1] = word[i+1];\n        }\n    }\n}\n\n\n\nint main(int argc, char *argv[])\n{\n    char lex[50][50] =  {\"word1\",\"word2\",\"word3\",\"word4\" }, word[] = \"test\";\n    char p[3];\n\n    twochar(lex,word,4,p);\n    printf(\"%c%c\\n\",p[0],p[1]);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "printf", "malloc"], "comments": [{"owner": {"reputation": 1787, "user_id": 916549, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/yezKv.jpg?s=128&g=1", "display_name": "Sarang", "link": "https://stackoverflow.com/users/916549/sarang"}, "edited": false, "score": 4, "creation_date": 1429720935, "post_id": 29803880, "comment_id": 47735573, "body": "is string null terminated?"}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 3, "creation_date": 1429720954, "post_id": 29803880, "comment_id": 47735584, "body": "Does <code>binaryToString()</code> terminate the string properly?"}, {"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 3, "creation_date": 1429720955, "post_id": 29803880, "comment_id": 47735586, "body": "probably forgot a null terminator, allowing printf() to run &quot;past the end&quot; of the string."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 3, "creation_date": 1429720958, "post_id": 29803880, "comment_id": 47735587, "body": "This <code>char *str = ( char * ) malloc ( ( getLength( src ) + 1 ) * sizeof( char ) );</code> is unecessarily ugly. -&gt; <code>char *str = malloc(getLength(src) + 1);</code>"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1429720994, "post_id": 29803880, "comment_id": 47735608, "body": "And I am sure that you forgot the <code>nul</code> terminator, there is no other possible reason for such behavior. When you post a question, you must post code taht reproduces the problem, otherwise it&#39;s not possible to find out what is wrong, you didn&#39;t post the very important <code>binaryToString()</code>. Also, I assume that <code>string.h</code> is forbiden, because there exists <code>strlen()</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1429721501, "post_id": 29803880, "comment_id": 47735957, "body": "How is <code>str</code> populated?  Show code."}, {"owner": {"reputation": 3, "user_id": 4820475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e74cd2e8b7ca0dd3be8055c76721ed6?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Davidson", "link": "https://stackoverflow.com/users/4820475/eric-davidson"}, "edited": false, "score": 0, "creation_date": 1429721682, "post_id": 29803880, "comment_id": 47736067, "body": "You&#39;re all correct, I forgot to add the null terminator, thanks so much! I feel stupid."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1429721737, "post_id": 29803880, "comment_id": 47736106, "body": "@EricDavidson please delete the question."}], "answers": [{"comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1429722287, "post_id": 29804258, "comment_id": 47736475, "body": "This is very bad advice in so many ways, 1. <a href=\"http://stackoverflow.com/a/605858/1983495\">Do not cast the result of <code>malloc()</code></a>, 2. <code>sizeof(char) == 1</code> <b>by definition</b>. 3. Your <code>memset()</code> is completely unnecessary, if you are allocating <code>strLen</code> characters, just <code>str[strLen - 1] = &#39;\\0&#39;</code> is enough, using <code>memset()</code> for that might, hide bugs, when you try for example to debug the program with tools like <a href=\"http://www.valgrind.org\" rel=\"nofollow noreferrer\">valgrind</a>. 4. There exists <code>calloc()</code>. 5. Don&#39;t dereference the pointer if you didn&#39;t check for <code>NULL</code> yet."}], "tags": [], "owner": {"reputation": 304, "user_id": 3317290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cc70537b051140f9255bbc27244acdb?s=128&d=identicon&r=PG&f=1", "display_name": "Arite", "link": "https://stackoverflow.com/users/3317290/arite"}, "is_accepted": true, "score": 0, "last_activity_date": 1429723547, "last_edit_date": 1429723547, "creation_date": 1429721981, "answer_id": 29804258, "question_id": 29803880, "link": "https://stackoverflow.com/questions/29803880/weird-symbols-printed-at-end-of-string-c/29804258#29804258", "title": "Weird Symbols printed at end of string - C", "body": "<p>Strings are null terminated in C. When you <code>malloc()</code> memory, it will be filled with whatever was in the block previously.</p>\n\n<p><strike>One solution is to fill the buffer with the null character <code>\\0</code> via <code>memset()</code> (found in <code>string.h</code>) after using <code>malloc()</code> like so:</p>\n\n<pre><code>int strLen = getLength(src) + 1;\nchar *str = (char*)malloc(strLen * sizeof(char));\nmemset(str, '\\0', strLen); // Fill with null chars\n</code></pre>\n\n<p>Equally you could just write a <code>\\0</code> after the final character.</strike></p>\n\n<p><strong>EDIT:</strong> This is not good advice according to iharob's comment. Taking this into account, and given you know the length of the string:</p>\n\n<pre><code>int strLen = getLength(src) + 1;\nchar *str = calloc(strLen, sizeof(char)); // Allocate strLen * sizeof(char)\nif (str == NULL) {\n    // Error allocating str - handle error\n}\nstr[strLen - 1] = '\\0'; // zero-based, so char is after final character\n</code></pre>\n\n<p>Is a better solution.</p>\n"}], "owner": {"reputation": 3, "user_id": 4820475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e74cd2e8b7ca0dd3be8055c76721ed6?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Davidson", "link": "https://stackoverflow.com/users/4820475/eric-davidson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1903, "favorite_count": 0, "accepted_answer_id": 29804258, "answer_count": 1, "score": -3, "last_activity_date": 1429723547, "creation_date": 1429720864, "question_id": 29803880, "link": "https://stackoverflow.com/questions/29803880/weird-symbols-printed-at-end-of-string-c", "title": "Weird Symbols printed at end of string - C", "body": "<p>So, I've got a program that parses expressions in a line of text such as</p>\n\n<pre><code>11110000 &amp; 11001100 ;\n</code></pre>\n\n<p>and evaluates the binary results. My code is parsing correctly and evaluating correctly, but for two of my test inputs (including the one above) my printf is also printing these weird symbols after each run.</p>\n\n<pre><code>eos$ ./interpreter &lt; program02.txt\n11000000 +\neos$ ./interpreter &lt; program02.txt\n11000000 2\u00f1\neos$ ./interpreter &lt; program02.txt\n11000000 \"]\neos$ ./interpreter &lt; program02.txt\n11000000 \u00d2\u00d8\neos$ ./interpreter &lt; program02.txt\n11000000 \u00ca\neos$ ./interpreter &lt; program02.txt\n11000000 \u00f2J\n</code></pre>\n\n<p>The string is malloc'd like this</p>\n\n<pre><code>char *str = ( char * ) malloc ( ( getLength( src ) + 1 ) * sizeof( char ) );\n</code></pre>\n\n<p>And here is how the string is printed</p>\n\n<pre><code>char *str = binaryToString( val );\nprintf( \"%s\\n\", str );\n</code></pre>\n\n<p>Any help would be awesome! Thanks!</p>\n"}, {"tags": ["c", "data-structures", "avl-tree"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1429720606, "post_id": 29803750, "comment_id": 47735359, "body": "When posting code, please don&#39;t include line-numbers. Instead mark specific lines with comments."}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1429720652, "post_id": 29803750, "comment_id": 47735389, "body": "Please identify which part(s) of the code you are asking about."}, {"owner": {"reputation": 11, "user_id": 4820348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97f96171a249a4b758a4745332ab0aea?s=128&d=identicon&r=PG&f=1", "display_name": "nojihrb", "link": "https://stackoverflow.com/users/4820348/nojihrb"}, "reply_to_user": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1429721170, "post_id": 29803750, "comment_id": 47735718, "body": "@Scott Hunter just like the line 18, the X isn&#39;t equal to <code>T-&gt;left-&gt;Element</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "is_accepted": false, "score": 0, "last_activity_date": 1429722819, "creation_date": 1429722819, "answer_id": 29804560, "question_id": 29803750, "link": "https://stackoverflow.com/questions/29803750/avl-tree-insert-function/29804560#29804560", "title": "AVL tree insert function", "body": "<p>After line 18, <code>X</code> has been inserted into <code>T-&gt;Left</code>, but it may not (necessarily) be at the top of that tree.</p>\n"}], "owner": {"reputation": 11, "user_id": 4820348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97f96171a249a4b758a4745332ab0aea?s=128&d=identicon&r=PG&f=1", "display_name": "nojihrb", "link": "https://stackoverflow.com/users/4820348/nojihrb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1429722819, "creation_date": 1429720421, "last_edit_date": 1429720560, "question_id": 29803750, "link": "https://stackoverflow.com/questions/29803750/avl-tree-insert-function", "title": "AVL tree insert function", "body": "<pre><code>AvlTree\nInsert( ElementType X, AvlTree T)\n{\n  1   if( T == NULL)\n  2  {\n  3     /* Create and return a one-onde tree */\n  4      T = malloc( sizeof( struct AvlNode ) );\n  5      if( T == NULL )\n  6          FatalError( \"Out of space!!!\");\n  7      else\n  8     {\n  9         T-&gt;Element = X; T-&gt;Height = 0;\n 10         T-&gt;Left = T-&gt;Right = NULL;\n 11       }\n 12   }\n 13   else\n 14   if( X &lt; T-&gt;Element )\n 15   {\n 16       T-&gt;left = Insert(x, T-&gt;left );\n 17       if( Height( T-&gt;left ) - Height( T-&gt;Right ) == 2 )\n 18           if( X &lt; T-&gt;Left-&gt;Element )\n 19               T = SingleRotatewithLeft( T );\n 20           else\n 21               T = DoubleRotateWithLeft( T );\n 22    }\n 23    else\n 24    if( X &gt; T-&gt;Element )\n 25   {\n 26        T-&gt;Right = Insert( X, T-&gt;Right );\n 27        if( Height( T-&gt;Right ) - Height( T-&gt;Left ) == 2 )\n 28            if( X &gt; T-&gt;Right-&gt;Element )\n 29                T = SingleRotateWithRight( T );\n 30            else\n 31                T = DoubleRotateWithRight( T );\n 32    }\n 33    /* Else X is in the tree already; we'll do nothing */\n 34    T-&gt;Height = Max( Height( T-&gt;Left ), Height( T-&gt;Right ) ) + 1;\n 35    return T;\n}\n</code></pre>\n\n<p>why X isn't equal to <code>T-&gt;left-&gt;Element</code>, \nand how can X compare with <code>T-&gt;left-&gt;Element</code>\nthe X should be assign to the <code>T-&gt;left-Element</code>(when the <code>T-&gt;left = NULL</code>) </p>\n"}, {"tags": ["c", "linux"], "answers": [{"comments": [{"owner": {"reputation": 8218, "user_id": 2615940, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/9a6Qc.jpg?s=128&g=1", "display_name": "skrrgwasme", "link": "https://stackoverflow.com/users/2615940/skrrgwasme"}, "edited": false, "score": 0, "creation_date": 1429723149, "post_id": 29803669, "comment_id": 47737057, "body": "It sounds like a resounding <i>maybe</i>. I think it would be best to just avoid doing it. The main thread has to keep running anyway, since the callback is a new thread in the same process, so it would probably be safer to delete the timer from the main thread right before exiting. Good explanations though! You referred to some resources that I didn&#39;t think to look at."}, {"owner": {"reputation": 1308, "user_id": 5689220, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FipQW.png?s=128&g=1", "display_name": "villapx", "link": "https://stackoverflow.com/users/5689220/villapx"}, "edited": false, "score": 1, "creation_date": 1523453102, "post_id": 29803669, "comment_id": 86567708, "body": "The OP specifically asks about using <code>create_timer</code> with <code>SIGEV_THREAD</code>, which has different behavior (see <a href=\"https://stackoverflow.com/a/40491337/5689220\">my answer</a>)."}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": true, "score": 0, "last_activity_date": 1429720530, "last_edit_date": 1429720530, "creation_date": 1429720196, "answer_id": 29803669, "question_id": 29803394, "link": "https://stackoverflow.com/questions/29803394/is-it-okay-to-delete-a-posix-timer-in-the-event-handler-function/29803669#29803669", "title": "Is it okay to delete a POSIX timer in the event handler function?", "body": "<p>It looks that in principle it is not allowed to call <code>timer_create</code> or <code>timer_delete</code>, at least on Linux. <a href=\"http://man7.org/linux/man-pages/man7/signal.7.html\" rel=\"nofollow\">signal(7)</a> is only allowing <em>async-signal-safe</em> functions to be called directly or indirectly from a signal handler, and strangely <code>timer_create</code> and <code>timer_delete</code> is not listed amongst them (perhaps it is a typo and they both should be listed as async-signal-safe, since both <a href=\"http://man7.org/linux/man-pages/man2/timer_create.2.html\" rel=\"nofollow\">timer_create(2)</a> &amp; <a href=\"http://man7.org/linux/man-pages/man2/timer_delete.2.html\" rel=\"nofollow\">timer_delete(2)</a> are in section 2 of the man pages, and appear in <a href=\"http://man7.org/linux/man-pages/man2/syscalls.2.html\" rel=\"nofollow\">syscalls(2)</a>)</p>\n\n<p>Notice that POSIX <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/xsh_chap02_04.html#tag_02_04\" rel=\"nofollow\">signal concepts</a> page does not list <code>timer_create</code> as possible in a signal handler. I imagine that on some operating systems these timer functions might be implemented entirely in the C library (not in the kernel).</p>\n\n<p>My guess (since <code>timer_create</code> and <code>timer_delete</code> is a <a href=\"http://en.wikipedia.org/wiki/System_call\" rel=\"nofollow\"><em>syscall</em></a> <strong>on Linux</strong> listed in <code>&lt;asm/unistd.h&gt;</code>)  is that <em><code>timer_create</code> and <code>timer_delete</code></em> are in fact async-signal-safe so <em>can be called from a <strong>Linux</strong> signal handler</em>. This might be false on other POSIX implementations.</p>\n"}, {"tags": [], "owner": {"reputation": 1308, "user_id": 5689220, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FipQW.png?s=128&g=1", "display_name": "villapx", "link": "https://stackoverflow.com/users/5689220/villapx"}, "is_accepted": false, "score": 2, "last_activity_date": 1478620781, "creation_date": 1478620781, "answer_id": 40491337, "question_id": 29803394, "link": "https://stackoverflow.com/questions/29803394/is-it-okay-to-delete-a-posix-timer-in-the-event-handler-function/40491337#40491337", "title": "Is it okay to delete a POSIX timer in the event handler function?", "body": "<p>According to <a href=\"http://man7.org/linux/man-pages/man7/sigevent.7.html\" rel=\"nofollow noreferrer\"><code>sigevent(7)</code></a>, when you use <code>SIGEV_THREAD</code>, the callback is executed in the following way:</p>\n\n<blockquote>\n  <p>Notify the process by invoking <code>sigev_notify_function</code> \"as if\" it were\n  the start function of a new thread.  (Among the implementation\n  possibilities here are that each timer notification could result in\n  the creation of a new thread, or that a single thread is created to\n  receive all notifications.)</p>\n</blockquote>\n\n<p>So as far as you (the programmer) know, your notify function is being executed in the context of a new thread, <em>not</em> in the context of a standard signal handler routine that interrupts another thread's execution. Thus the rules for async-signal-safe functions do not apply, contrary to what was mentioned in Basile's answer, and so you can do anything your heart desires in your notify function when using <code>SIGEV_THREAD</code> with your timers. This includes calling <code>timer_delete</code> to delete the <code>timer_t</code>.</p>\n"}], "owner": {"reputation": 8218, "user_id": 2615940, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/9a6Qc.jpg?s=128&g=1", "display_name": "skrrgwasme", "link": "https://stackoverflow.com/users/2615940/skrrgwasme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1176, "favorite_count": 0, "accepted_answer_id": 29803669, "answer_count": 2, "score": 2, "last_activity_date": 1478620781, "creation_date": 1429719434, "last_edit_date": 1495540877, "question_id": 29803394, "link": "https://stackoverflow.com/questions/29803394/is-it-okay-to-delete-a-posix-timer-in-the-event-handler-function", "title": "Is it okay to delete a POSIX timer in the event handler function?", "body": "<h2>The Question</h2>\n\n<p>If I call <code>create_timer</code> with the <code>SIGEV_THREAD</code> constant stored in the <code>sigev_notify</code> field in my <code>sigevent</code> structure, then when the timer event happens, my <code>sigev_notify_function</code> callback will be called.</p>\n\n<p>Are there any hidden implications or undesirable side-effects to calling <code>timer_delete</code> <em>from within my callback function</em>?</p>\n\n<p><strong>Specific Concerns</strong></p>\n\n<p>My initial thought was that it should be fine. However, I don't fully understand the mechanics that are operating behind the scenes, and I'm concerned about there being proper cleanup of the callback's thread and handling of the signals if the timer and it's associated structures are removed before handling is complete.</p>\n\n<h2>Background</h2>\n\n<p>Another SO user asked <a href=\"https://stackoverflow.com/q/29799925/2615940\">this question</a>, which essentially says, \"do I really need to delete my timers after calling <code>timer_create</code>? My answer was a resounding <strong>yes</strong>. He then asked a follow-up question in the comments: \"is it okay to do that from the timer callback function?\" and I didn't have a good answer to that.</p>\n"}, {"tags": ["c", "bit-shift"], "comments": [{"owner": {"reputation": 12989, "user_id": 2994596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YU9Zw.png?s=128&g=1", "display_name": "SleuthEye", "link": "https://stackoverflow.com/users/2994596/sleutheye"}, "edited": false, "score": 1, "creation_date": 1429719598, "post_id": 29803345, "comment_id": 47734702, "body": "<code>(1&lt;&lt;33)</code> is computed using <code>int</code> type which on your system probably is only 32 bit."}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 2, "last_activity_date": 1429719586, "creation_date": 1429719586, "answer_id": 29803453, "question_id": 29803345, "link": "https://stackoverflow.com/questions/29803345/bit-shifting-by-an-integer-value/29803453#29803453", "title": "bit-shifting by an integer value", "body": "<p>All integer literal values are <code>int</code> type, unless you specify a prefix such as e.g. <code>1ULL</code>.</p>\n\n<p>That means that <code>1&lt;&lt;33</code> shifts a 32-bit signed value 33 steps. You need to do <code>1ULL &lt;&lt; 33</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 4817583, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3pcUP.jpg?s=128&g=1", "display_name": "Duc Vo", "link": "https://stackoverflow.com/users/4817583/duc-vo"}, "is_accepted": false, "score": 0, "last_activity_date": 1454660495, "last_edit_date": 1454660495, "creation_date": 1429721281, "answer_id": 29804012, "question_id": 29803345, "link": "https://stackoverflow.com/questions/29803345/bit-shifting-by-an-integer-value/29804012#29804012", "title": "bit-shifting by an integer value", "body": "<p>I think the problem is: constant 1 is casting to integer type (4 bytes 32 bits). However, you do shift left 33 bits (exceed integer type), in this case we should cast 1 to unsigned long long int (8 bytes = 64 bits) before doing shift left:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid main(){\n\n    unsigned long long int mem_addr = 0x7fff5a8487c0;\n\n    int byte_offset_bits = 2;\n    int block_offset_bits = 5;\n    int index_bits = 8;\n    int tag_bits = 33;\n    unsigned long long int one = 1;\n    unsigned long long int tag1 = (mem_addr&amp;(((one&lt;&lt;33)-one)&lt;&lt;(2+5+8)))&gt;&gt;(2+5+8);\n    unsigned long long int tag2 = (mem_addr&amp;(((one&lt;&lt;tag_bits)-one)&lt;&lt;(byte_offset_bits + block_offset_bits + index_bits)))&gt;&gt;(byte_offset_bits + block_offset_bits + index_bits);\n\n    printf(\"%s %llx\\n\", \"Tag 1:\", tag1);\n    printf(\"%s %llx\\n\", \"Tag 2:\", tag2);\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 4820217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86d1086f3ff597047e8dfe4df7d8fdd5?s=128&d=identicon&r=PG&f=1", "display_name": "job", "link": "https://stackoverflow.com/users/4820217/job"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "accepted_answer_id": 29803453, "answer_count": 2, "score": 2, "last_activity_date": 1454660495, "creation_date": 1429719244, "question_id": 29803345, "link": "https://stackoverflow.com/questions/29803345/bit-shifting-by-an-integer-value", "title": "bit-shifting by an integer value", "body": "<p>This code is for a cache simulator project - I am trying to extract certain bits from a memory address. When I attempt to use int variables to do the bit shifting, I end up with an incorrect result, but when I use the numbers directly, my result is correct. I've been looking all over for an answer to this, but I can't find one. What is my issue here?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid main(){\n\n    unsigned long long int mem_addr = 0x7fff5a8487c0;\n\n    int byte_offset_bits = 2;\n    int block_offset_bits = 5;\n    int index_bits = 8;\n    int tag_bits = 33;\n\n    unsigned long long int tag1 = (mem_addr&amp;(((1&lt;&lt;33)-1)&lt;&lt;(2+5+8)))&gt;&gt;(2+5+8);\n    unsigned long long int tag2 = (mem_addr&amp;(((1&lt;&lt;tag_bits)-1)&lt;&lt;(byte_offset_bits + block_offset_bits + index_bits)))&gt;&gt;(byte_offset_bits + block_offset_bits + index_bits);\n\n    printf(\"%s %llx\\n\", \"Tag 1:\", tag1);\n    printf(\"%s %llx\\n\", \"Tag 2:\", tag2);\n\n}\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>Tag 1: fffeb509\nTag 2: 1\n</code></pre>\n\n<p>I am also getting a warning for the line that computes tag1 correctly, which doesn't make sense to me, since tag1 is a 64-bit unsigned long long int, and I am only shifting by 48 bits:</p>\n\n<pre><code> warning: left shift count &gt;= width of type [enabled by default]\n</code></pre>\n\n<p>Thanks in advance for the help.</p>\n"}, {"tags": ["c", "arrays", "postgresql", "insert", "libpq"], "answers": [{"comments": [{"owner": {"reputation": 14704, "user_id": 908515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f1L9v.png?s=128&g=1", "display_name": "undur_gongor", "link": "https://stackoverflow.com/users/908515/undur-gongor"}, "edited": false, "score": 0, "creation_date": 1447967943, "post_id": 29812836, "comment_id": 55394627, "body": "The postgresql documentation (<a href=\"http://www.postgresql.org/docs/9.4/static/libpq-exec.html#LIBPQ-EXEC-MAIN\" rel=\"nofollow noreferrer\">postgresql.org/docs/9.4/static/libpq-exec.html#LIBPQ-EXEC-M&zwnj;&#8203;AIN</a>) says OIDs can be avoided even for binary data by suffixing the parameter symbol with the type (e.g. <code>$1::bigint</code>). Is this wrong?"}, {"owner": {"reputation": 257364, "user_id": 398670, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/85f50c23bb5e9dfb061af5032bfe8e65?s=128&d=identicon&r=PG", "display_name": "Craig Ringer", "link": "https://stackoverflow.com/users/398670/craig-ringer"}, "reply_to_user": {"reputation": 14704, "user_id": 908515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f1L9v.png?s=128&g=1", "display_name": "undur_gongor", "link": "https://stackoverflow.com/users/908515/undur-gongor"}, "edited": false, "score": 0, "creation_date": 1447976296, "post_id": 29812836, "comment_id": 55398544, "body": "@undur_gongor it is correct for text format. Not sure about binary."}], "tags": [], "owner": {"reputation": 257364, "user_id": 398670, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/85f50c23bb5e9dfb061af5032bfe8e65?s=128&d=identicon&r=PG", "display_name": "Craig Ringer", "link": "https://stackoverflow.com/users/398670/craig-ringer"}, "is_accepted": true, "score": 7, "last_activity_date": 1429759008, "last_edit_date": 1429759008, "creation_date": 1429758000, "answer_id": 29812836, "question_id": 29802669, "link": "https://stackoverflow.com/questions/29802669/inserting-integer-array-with-postgresql-in-c-libpq/29812836#29812836", "title": "Inserting integer array with postgresql in C (libpq)", "body": "<p><code>libpq</code>'s <code>PQexecParams</code> can accept values in text or binary form.</p>\n\n<p>For text values, you must <code>sprintf</code> the integer into a buffer that you put in your <code>char**</code> values array. This is usually how it's done. You can use text format with query parameters, there is no particular reason to fall back to interpolating the parameters into the SQL string yourself.</p>\n\n<p>If you want to use binary mode transfers, you must instead ensure the integer is the correct size for the target field, is in network byte order, and that you have specified the type OID. Use <code>htonl</code> (for <code>uint32_t</code>) or <code>htons</code> (for <code>uint16_t</code>) for that. It's fine to cast away signedness since you're just re-ordering the bytes.</p>\n\n<p>So:</p>\n\n<ul>\n<li>You <strong>cannot</strong> ignore the OID field if you're planning to use binary transfer</li>\n<li>Use <code>htonl</code>, don't brew your own byte-order conversion</li>\n<li>Your <code>values</code> array construction is wrong. You're putting <code>char**</code>s into an array of <code>char*</code> and casting away the wrong type. You want <code>&amp;val1[0]</code> or (equivalent in most/all real-world C implementations, but not technically the same per the spec) just <code>val1</code>, instead of <code>(char*)&amp;val1</code></li>\n<li>You cannot assume that the on-wire format of <code>integer[]</code> is the same as C's <code>int32_t[]</code>. You <strong>must</strong> pass the type OID <code>INT4ARRAYOID</code> (see <code>include/catalog/pg_type.h</code> or <code>select oid from pg_type where typname = '_int4'</code> - the internal type name of an array is <code>_</code> in front of its base type) and <strong>must</strong> construct a PostgreSQL array value compatible with the <code>typreceive</code> function in <code>pg_type</code> for that type (which is <code>array_recv</code>) if you intend to send in binary mode. In particular, <em>binary-format arrays have a header</em>. You cannot just leave out the header.</li>\n</ul>\n\n<p>In other words, the code is broken in multiple exciting ways and cannot possibly work as written.</p>\n\n<p>Really, there is <em>rarely any benefit in sending integers in binary mode</em>. Sending in text-mode is often actually faster because it's often more compact on the wire (small values). If you're going to use binary mode, you will need to understand how C represents integers, how network vs host byte order works, etc.</p>\n\n<p>Especially when working with arrays, text format is easier.</p>\n\n<p><code>libpq</code> could make this a lot easier than it presently does by offering good array construct / deconstruct functions for both text and binary arrays. Patches are, as always, welcome. Right now, <a href=\"http://libpqtypes.esilo.com/\" rel=\"noreferrer\">3rd party libraries like <code>libpqtypes</code></a> largely fill this role.</p>\n"}], "owner": {"reputation": 91, "user_id": 3448481, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1123485953/picture?type=large", "display_name": "Elamre", "link": "https://stackoverflow.com/users/3448481/elamre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2966, "favorite_count": 1, "accepted_answer_id": 29812836, "answer_count": 1, "score": 3, "last_activity_date": 1429759008, "creation_date": 1429717671, "last_edit_date": 1429757777, "question_id": 29802669, "link": "https://stackoverflow.com/questions/29802669/inserting-integer-array-with-postgresql-in-c-libpq", "title": "Inserting integer array with postgresql in C (libpq)", "body": "<p>I'm trying to post an integer array into my postgresql database. I'm aware that I could format everything as a string and then send that string as one SQL command. However, I believe the PQexecParams function should also bring some help. However, I'm kind of lost as how to use it.</p>\n\n<pre><code>    //we need to convert the number into network byte order\n    int val1 = 131;\n    int val2 = 2342;\n    int val3[5] = { 0, 7, 15, 31, 63 };\n    //set the values to use\n    const char *values[3] = { (char *) &amp;val1, (char *) &amp;val2, (char *) val3 };\n    //calculate the lengths of each of the values\n    int lengths[3] = { sizeof(val1), sizeof(val2), sizeof(val3) * 5 };\n    //state which parameters are binary\n    int binary[3] = { 1, 1, 1 };\n\n    PGresult *res = PQexecParams(conn, \"INSERT INTO family VALUES($1::int4, $2::int4, $3::INTEGER[])\", 3, //number of parameters\n            NULL, //ignore the Oid field\n            values, //values to substitute $1 and $2\n            lengths, //the lengths, in bytes, of each of the parameter values\n            binary, //whether the values are binary or not\n            0); //we want the result in text format\n</code></pre>\n\n<p>Yes this is copied from some tutorial.\nHowever this returns :</p>\n\n<pre><code> ERROR:  invalid array flags\n</code></pre>\n\n<p>Using a conventional method does work:</p>\n\n<pre><code>PQexec(conn, \"INSERT INTO family VALUES (2432, 31, '{0,1,2,3,4,5}')\");\n</code></pre>\n\n<p>Inserts data just fine, and I can read it out fine as well.</p>\n\n<p>Any help would be greatly appreciated! :)</p>\n"}, {"tags": ["c", "struct", "process", "pipe"], "comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1429717576, "post_id": 29802517, "comment_id": 47733170, "body": "This <code>sizeof(Str*)</code> looks bad."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1429717831, "post_id": 29802517, "comment_id": 47733383, "body": "Your code misses the relevant <code>#include</code>s."}], "answers": [{"comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1429717630, "post_id": 29802641, "comment_id": 47733212, "body": "Why not just <code>sizeof s</code>? This is less error-prine, in case the type of <code>s</code> changes."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1429717672, "post_id": 29802641, "comment_id": 47733252, "body": "I don&#39;t think the OP has posted real code, as <code>sizeof(Str *)</code> should not even compile."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1429717720, "post_id": 29802641, "comment_id": 47733297, "body": "@PaulR, <code>sizeof(Str *)</code> is a valid expression. It evaluates to the size of a pointer."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1429717810, "post_id": 29802641, "comment_id": 47733364, "body": "@RSahu: really ? <code>Str</code> is a struct - why would <code>Str *</code> be a pointer ?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1429717970, "post_id": 29802641, "comment_id": 47733482, "body": "@PaulR: You seem to be overlooking the leading <code>typedef</code>."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1429718115, "post_id": 29802641, "comment_id": 47733594, "body": "@PaulR: Have a break ... ;-)"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1429718152, "post_id": 29802641, "comment_id": 47733621, "body": "Thanks - I think I need one... ;-)"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1429718161, "post_id": 29802641, "comment_id": 47733625, "body": "@PaulR, <code>Str *</code> is a type, That&#39;s why you can use <code>sizeof(Str *)</code>."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1429718212, "post_id": 29802641, "comment_id": 47733664, "body": "@RSahu: thanks - I see it now - evidently I was suffering from Coders&#39; Block temporarily. ;-)"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 3, "last_activity_date": 1429717595, "creation_date": 1429717595, "answer_id": 29802641, "question_id": 29802517, "link": "https://stackoverflow.com/questions/29802517/sending-structure-through-pipe-without-losing-data/29802641#29802641", "title": "Sending structure through pipe without losing data", "body": "<pre><code>write(c2p[1], &amp;s, sizeof(Str*));\n</code></pre>\n\n<p>is not right. That would write only the number of bytes the size of a pointer. It should be</p>\n\n<pre><code>write(c2p[1], &amp;s, sizeof(Str)); // -- without the `*`. \n</code></pre>\n\n<p>Similarly, you need to use:</p>\n\n<pre><code>read(c2p[0], &amp;s, sizeof(Str));  // -- without the `*`. \n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 4723530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6e802364ad90162318d1356d6a4741d?s=128&d=identicon&r=PG&f=1", "display_name": "Horatiu", "link": "https://stackoverflow.com/users/4723530/horatiu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2881, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1429718683, "creation_date": 1429717263, "question_id": 29802517, "link": "https://stackoverflow.com/questions/29802517/sending-structure-through-pipe-without-losing-data", "title": "Sending structure through pipe without losing data", "body": "<p>I have this structure:</p>\n\n<pre><code>typedef struct {\n    int pid;\n    char arg[100];\n    int nr;\n} Str;\n</code></pre>\n\n<p>The code is something like this:</p>\n\n<pre><code>int main() {\n    int c2p[2];\n    pipe(c2p);\n    int f = fork();\n\n    if (f == 0) { // child\n        Str s;\n        s.pid = 1234;\n        strcpy(s.arg, \"abcdef\");\n        s.nr = 1;\n\n        close(c2p[0]);\n        write(c2p[1], &amp;s, sizeof(Str*));\n        close(c2p[1]);\n        exit(0);\n    }\n\n    // parent\n    wait(0);\n    close(c2p[1]);\n    Str s;\n    read(c2p[0], &amp;s, sizeof(Str*));\n    printf(\"pid: %d nr: %d arg: %s\", s.pid, s.nr, s.arg);\n    close(c2p[0]);\n    return 0;\n}\n</code></pre>\n\n<p>The output is something like this:</p>\n\n<pre><code>pid: 1234 nr: 0 arg: abc$%^&amp;\n</code></pre>\n\n<p>pid is always right, nr is always 0 and the fist few characters from arg are right followed by some random characters.</p>\n\n<p>I want to create a structure in the child process and then send the structure to the parent process through pipe.</p>\n\n<p>How can I send correctly this structure through pipe?</p>\n"}, {"tags": ["c++", "c", "pointers"], "comments": [{"owner": {"reputation": 2532, "user_id": 2139094, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7b7f096622f36595ba50f9d65a39508a?s=128&d=identicon&r=PG", "display_name": "mjs", "link": "https://stackoverflow.com/users/2139094/mjs"}, "edited": false, "score": 1, "creation_date": 1429718494, "post_id": 29802345, "comment_id": 47733896, "body": "This is clearly not a duplicate of the linked question."}, {"owner": {"reputation": 15679, "user_id": 369450, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/5cf82bfcd75a3bd40deaad83f7657c59?s=128&d=identicon&r=PG&f=1", "display_name": "All Workers Are Essential", "link": "https://stackoverflow.com/users/369450/all-workers-are-essential"}, "edited": false, "score": 0, "creation_date": 1429722153, "post_id": 29802345, "comment_id": 47736392, "body": "Isn&#39;t this a duplicate? Shouldn&#39;t <code>j = setValue(0); j++; *j = 7;</code> be equivalent to <code>*(++setValue(0)) = 7;</code> and not <code>*(setValue(0)++) = 7;</code> (note the pre vs post increments)."}, {"owner": {"reputation": 987, "user_id": 1677605, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f15fed496afc6c9f10025913c2b8884f?s=128&d=identicon&r=PG", "display_name": "xuma202", "link": "https://stackoverflow.com/users/1677605/xuma202"}, "edited": false, "score": 0, "creation_date": 1429723341, "post_id": 29802345, "comment_id": 47737174, "body": "You are right but but neither <code>*(++setValue(0)) = 7;</code> nor <code>*(setValue(0)++) = 7;</code> work as explained by @Eregrith What you mentioned was not meant to be the actual question but was a bug inside it"}], "answers": [{"comments": [{"owner": {"reputation": 987, "user_id": 1677605, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f15fed496afc6c9f10025913c2b8884f?s=128&d=identicon&r=PG", "display_name": "xuma202", "link": "https://stackoverflow.com/users/1677605/xuma202"}, "edited": false, "score": 0, "creation_date": 1429717667, "post_id": 29802417, "comment_id": 47733243, "body": "Thank you. I now noticed that with tweaking the function to return an int** One can use    *((*setValue(1))++) = 42;"}], "tags": [], "owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "is_accepted": true, "score": 5, "last_activity_date": 1429716984, "creation_date": 1429716984, "answer_id": 29802417, "question_id": 29802345, "link": "https://stackoverflow.com/questions/29802345/increment-pointer-returned-by-function/29802417#29802417", "title": "Increment pointer returned by function", "body": "<p>You can't call a unary operator (<code>++</code>) on something that is not a variable. <code>setValue(0)</code> is treated as a value.</p>\n\n<p>So,</p>\n\n<pre><code>*(setValue(0)++) = 42;\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>*(setValue(0) + 1) = 42;\n</code></pre>\n"}], "owner": {"reputation": 987, "user_id": 1677605, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f15fed496afc6c9f10025913c2b8884f?s=128&d=identicon&r=PG", "display_name": "xuma202", "link": "https://stackoverflow.com/users/1677605/xuma202"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 548, "favorite_count": 0, "accepted_answer_id": 29802417, "answer_count": 1, "score": 3, "last_activity_date": 1429723565, "creation_date": 1429716840, "last_edit_date": 1495542127, "question_id": 29802345, "link": "https://stackoverflow.com/questions/29802345/increment-pointer-returned-by-function", "title": "Increment pointer returned by function", "body": "<p>Hey I was experimenting a bit with C/C++ and pointers\n<a href=\"http://www.tutorialspoint.com/cplusplus/returning_values_by_reference.htm\" rel=\"nofollow noreferrer\">while reading stuff here</a></p>\n\n<p>I made myself a function to return a pointer to the int at some place in a global array.</p>\n\n<pre><code>int vals[] = { 5, 1, 45 };\n\nint *  setValue(int k) {\n    return &amp;vals[k];\n}\n</code></pre>\n\n<p>However I was able to do this</p>\n\n<pre><code>int* j = setValue(0);\nj++;\n*j = 7;\n</code></pre>\n\n<p>to manipulate the array</p>\n\n<p>but that:</p>\n\n<pre><code>*(++setValue(0)) = 42;\n</code></pre>\n\n<p>din't work.\nNotice however <code>*setValue(0) = 42;</code> works</p>\n\n<p>From what I understand I call the function and get some pointer I increment it to make it point to the 2nd element in my array. Lastly I deference the pointer and assign a new value to the integer it pointed to.</p>\n\n<p>I find C++ pointers and references can be somewhat confusing but maybe someone can explain me this behavior.</p>\n\n<p><strong>EDIT:</strong>\nThis question is NOT a duplicate of <a href=\"https://stackoverflow.com/questions/9298020/increment-preincrement-and-postincrement\">Increment, preincrement and postincrement</a></p>\n\n<p>because it is not about pre- vs. post-increment but rather about increment on pointers that are the return of a function.</p>\n\n<p><strong>EDIT2:</strong></p>\n\n<p>Tweaking the function</p>\n\n<pre><code>int **  setValue(int k) {\n    int* x = &amp;vals[k];\n    return &amp;x;\n}\n</code></pre>\n\n<p>You can use</p>\n\n<pre><code>*(++(*setValue(1))) = 42;\n</code></pre>\n"}, {"tags": ["c", "struct", "msp430"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1429716466, "post_id": 29802115, "comment_id": 47732359, "body": "in <code>motors</code>, there is no member named <code>enable_tx</code>. then?"}, {"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1429716517, "post_id": 29802115, "comment_id": 47732410, "body": "@SouravGhosh that&#39;s the question from OP. He wants to know how to add <a href=\"http://stackoverflow.com/questions/17052443/c-function-inside-struct\">functions inside structs</a>"}], "answers": [{"comments": [{"owner": {"reputation": 178, "user_id": 2529661, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3380d37850e0e46e979c0ac5bb669a5b?s=128&d=identicon&r=PG", "display_name": "gezzuzz", "link": "https://stackoverflow.com/users/2529661/gezzuzz"}, "edited": false, "score": 0, "creation_date": 1429719345, "post_id": 29802320, "comment_id": 47734516, "body": "Yep that was my problem.. i was still hoping to find a more elegant solution.. but this does work.  Thank a lot for pointing that out"}, {"owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "reply_to_user": {"reputation": 178, "user_id": 2529661, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3380d37850e0e46e979c0ac5bb669a5b?s=128&d=identicon&r=PG", "display_name": "gezzuzz", "link": "https://stackoverflow.com/users/2529661/gezzuzz"}, "edited": false, "score": 0, "creation_date": 1429727279, "post_id": 29802320, "comment_id": 47739852, "body": "@gezzuzz I&#39;m glad it worked, I have updated the answer with a more elegant solution."}], "tags": [], "owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "is_accepted": true, "score": 1, "last_activity_date": 1429727189, "last_edit_date": 1429727189, "creation_date": 1429716778, "answer_id": 29802320, "question_id": 29802115, "link": "https://stackoverflow.com/questions/29802115/assign-a-expression-to-a-typedef-struct-variable/29802320#29802320", "title": "assign a expression to a typedef struct variable", "body": "<p>I obviously can't test it myself, but I think the only error is</p>\n\n<pre><code>&amp;m[0].txPxOUT &amp;= ~m[0].txBITx;\n</code></pre>\n\n<p>which should be</p>\n\n<pre><code>*m[0].txPxOUT &amp;= ~m[0].txBITx;\n</code></pre>\n\n<p>Edit: You could put the code into a member function like this:</p>\n\n<pre><code>typedef struct\n{\n    ....\n    void disable_tx();\n} motors;\n\nvoid motors::disable_tx()\n{\n    *txPxOUT &amp;= ~txBITx;\n}\n</code></pre>\n\n<p>And call it like this:</p>\n\n<pre><code>m[0].disable_tx();\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 178, "user_id": 2529661, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3380d37850e0e46e979c0ac5bb669a5b?s=128&d=identicon&r=PG", "display_name": "gezzuzz", "link": "https://stackoverflow.com/users/2529661/gezzuzz"}, "edited": false, "score": 0, "creation_date": 1429717302, "post_id": 29802329, "comment_id": 47732974, "body": "instead on creating named functions for each one.. how can i just pas it an anonymous function.  something like \tm[0].disable_tx = (void){P1OUT &amp;= ~BIT1;};"}, {"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "reply_to_user": {"reputation": 178, "user_id": 2529661, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3380d37850e0e46e979c0ac5bb669a5b?s=128&d=identicon&r=PG", "display_name": "gezzuzz", "link": "https://stackoverflow.com/users/2529661/gezzuzz"}, "edited": false, "score": 0, "creation_date": 1429717630, "post_id": 29802329, "comment_id": 47733213, "body": "@gezzuzz You could have a look at <a href=\"http://en.wikipedia.org/wiki/Anonymous_function#C_.28non-standard_extension.29\" rel=\"nofollow noreferrer\">GCC anonymous functions</a> which are not part of standard C"}], "tags": [], "owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "is_accepted": false, "score": 0, "last_activity_date": 1429717713, "last_edit_date": 1429717713, "creation_date": 1429716804, "answer_id": 29802329, "question_id": 29802115, "link": "https://stackoverflow.com/questions/29802115/assign-a-expression-to-a-typedef-struct-variable/29802329#29802329", "title": "assign a expression to a typedef struct variable", "body": "<p>You can add function pointers to your struct and then call them.</p>\n\n<pre><code>extern motors m[10];\ntypedef struct\n{\n  unsigned char address;\n  unsigned int value;\n  unsigned int xdata[10];\n\n  void (*disable_tx)(void);\n} motors;\n\n[...]\n\nvoid disable_tx_1(void)\n{\n  P1OUT &amp;= ~BIT1;\n}\n\n[...]\n\nm[0].disable_tx = disable_tx_1\n\n[...]\n\nm[0].disable_tx();\n\n[...]\n</code></pre>\n\n<p>If you want to have a lambda-style function like the one in your question, you could have a look at <a href=\"http://en.wikipedia.org/wiki/Anonymous_function#C_.28non-standard_extension.29\" rel=\"nofollow\">GCC anonymous functions</a> or other means of doing anonymous functions in C.</p>\n"}], "owner": {"reputation": 178, "user_id": 2529661, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3380d37850e0e46e979c0ac5bb669a5b?s=128&d=identicon&r=PG", "display_name": "gezzuzz", "link": "https://stackoverflow.com/users/2529661/gezzuzz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 599, "favorite_count": 0, "accepted_answer_id": 29802320, "answer_count": 2, "score": 0, "last_activity_date": 1429727189, "creation_date": 1429716315, "question_id": 29802115, "link": "https://stackoverflow.com/questions/29802115/assign-a-expression-to-a-typedef-struct-variable", "title": "assign a expression to a typedef struct variable", "body": "<p>Sorry for the crappy title I Don't know how to ask what im looking for. Here is my problem. I have a msp430 processor connected to a bunch of transceivers. I have individual discrete outputs going to going to the re/de select of each transceivers. Normal I define the select of each chip like this</p>\n\n<pre><code>#define enable_port_rx  P1OUT &amp;= ~BIT2\n#define disable_port_rx P1OUT |= BIT2\n#define enable_port_tx  P1OUT |= BIT1\n#define disable_port_tx P1OUT &amp;= ~BIT1\n</code></pre>\n\n<p>I have a struct for each transceivers that i put in an array so that I can iterate though them with loops.</p>\n\n<pre><code>extern motors m[10];\ntypedef struct\n{\n    unsigned char address;\n    unsigned int value;\n    unsigned int xdata[10];\n} motors;\n</code></pre>\n\n<p>I want to be able to enable/disable rx/tx from the struct. \nI want to do something like this.</p>\n\n<pre><code>m[0].enable_tx = P1OUT |= BIT1;\nm[0].disable_tx = P1OUT &amp;= ~BIT1;\nm[1].enable_tx = P3OUT |= BIT2;\nm[1].disable_tx = P3OUT &amp;= ~BIT2;\n</code></pre>\n\n<p>so that i can call them when i need them..</p>\n\n<pre><code>m[0].disable_tx; //disable tx\nm[1].disable_tx; //disable tx\n</code></pre>\n\n<p>I thought something like this below would work. That is i saved that pointer to the register and the bit needed that i could access them when need. but this does not work.</p>\n\n<pre><code>//inside strut\nvolatile unsigned char *rxPxOUT;\nunsigned char rxBITx;\nvolatile unsigned char *txPxOUT;\nunsigned char txBITx;\n\n//setup\nm[0].txPxOUT=&amp;P1OUT;\nm[0].txBITx = BIT1;\n\n//function call\n&amp;m[0].txPxOUT &amp;= ~m[0].txBITx;\n</code></pre>\n\n<p>Thanks in advance </p>\n"}, {"tags": ["c", "loops", "pointers"], "comments": [{"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 0, "creation_date": 1429716284, "post_id": 29802063, "comment_id": 47732222, "body": "Is <a href=\"http://stackoverflow.com/questions/26431147/abort-trap-6-error-in-c\">this</a> from you too? The answer&#39;s accepted. The question does look similar but not the code"}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "reply_to_user": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 0, "creation_date": 1429716491, "post_id": 29802063, "comment_id": 47732389, "body": "@Eregrith That isn&#39;t the same."}, {"owner": {"reputation": 1, "user_id": 4820126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b25050013c1e88a43d8f2332a0bbd382?s=128&d=identicon&r=PG&f=1", "display_name": "Brikman23", "link": "https://stackoverflow.com/users/4820126/brikman23"}, "edited": false, "score": 0, "creation_date": 1429716549, "post_id": 29802063, "comment_id": 47732433, "body": "nope, that post is not mine...."}, {"owner": {"reputation": 1, "user_id": 4820126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b25050013c1e88a43d8f2332a0bbd382?s=128&d=identicon&r=PG&f=1", "display_name": "Brikman23", "link": "https://stackoverflow.com/users/4820126/brikman23"}, "edited": false, "score": 0, "creation_date": 1429716671, "post_id": 29802063, "comment_id": 47732507, "body": "any ideas to why I am getting this error?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1429717430, "post_id": 29802063, "comment_id": 47733069, "body": "Do you make sure the code is never fed a line of more then 49 <code>char</code>s long? Better change <code>fscanf(fp,&quot;%s&quot;,s)==1</code> to be <code>fscanf(fp,&quot;%49s&quot;,s)==1</code>."}, {"owner": {"reputation": 1, "user_id": 4820126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b25050013c1e88a43d8f2332a0bbd382?s=128&d=identicon&r=PG&f=1", "display_name": "Brikman23", "link": "https://stackoverflow.com/users/4820126/brikman23"}, "edited": false, "score": 0, "creation_date": 1429717605, "post_id": 29802063, "comment_id": 47733193, "body": "how would you initialize it? ...I am unsure"}, {"owner": {"reputation": 1, "user_id": 4820126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b25050013c1e88a43d8f2332a0bbd382?s=128&d=identicon&r=PG&f=1", "display_name": "Brikman23", "link": "https://stackoverflow.com/users/4820126/brikman23"}, "edited": false, "score": 0, "creation_date": 1429717744, "post_id": 29802063, "comment_id": 47733312, "body": "You got it ALK! The output is now correct! Thank you!"}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1429717920, "post_id": 29802063, "comment_id": 47733443, "body": "@Brikman23 only if the lines do not differ after the 49th char."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1429718644, "post_id": 29802063, "comment_id": 47734007, "body": "@Brikman23, and only if the most frequently occuring value is shorter than 50 chars."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1429719924, "post_id": 29802063, "comment_id": 47734912, "body": "the does not actually cleanly compile.  there are at least 3 warnings that need fixed.  the most obvious problems are the 3 comparisons between signed and unsigned values"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1429720158, "post_id": 29802063, "comment_id": 47735064, "body": "there are (at least) 3 magic numbers in the code .. 50, 10000, and 5381.  The should be #defined name (value)   where value is 50, 10000, and 5381.  where name is a meaningful name that indicates what the number means, in the context of the code."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1429720456, "post_id": 29802063, "comment_id": 47735274, "body": "regarding the line: &#39;while(fscanf(fp,&quot;%s&quot;,s)==1)&#39;  there is nothing limiting the length of the string being read.  Therefore buffer overflow can occur.  This would be undefined behaviour, possibly leading to a seg fault event.   suggest placing a length modifier in the &#39;%s&#39; input/conversion specifier."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1429720742, "post_id": 29802063, "comment_id": 47735450, "body": "these three lines: &#39;        for(i=0;i&lt;num;i++)         if(a[i]==hash_value)         break;&#39;   is difficult for us humans to read for several reasons, 1) braces would help clarify the code, 2) indentation would help clarify the code."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1429720973, "post_id": 29802063, "comment_id": 47735596, "body": "variable names should be meaningful, in the context where they are being used.  &#39;a&#39;, &#39;b&#39;, &#39;s&#39; are not meaningful variable names.  I,.E. they give no indication of what they contain nor their intended usage."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1429721628, "post_id": 29802063, "comment_id": 47736036, "body": "the posted code has a bug, wherein if more than one word has the same number of appearances, then the code only displays the first word encountered with that number of appearances.    Note: I&#39;m running Linux ubuntu 14.04 and the code ran fine (however, I did not have any words over 49 characters long"}], "owner": {"reputation": 1, "user_id": 4820126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b25050013c1e88a43d8f2332a0bbd382?s=128&d=identicon&r=PG&f=1", "display_name": "Brikman23", "link": "https://stackoverflow.com/users/4820126/brikman23"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 511, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1429716169, "creation_date": 1429716169, "question_id": 29802063, "link": "https://stackoverflow.com/questions/29802063/abort-trap-6-error-in-c", "title": "Abort trap: 6 error in C", "body": "<p>I have this code:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n\nunsigned long hash(char *str)\n{\n    unsigned long hash = 5381;\n    int c;\n\n    while ((c = *str++))\n        hash = ((hash &lt;&lt; 5) + hash) + c; /* hash * 33 + c */\n\n    return hash;\n}\nint main()\n{\n\n    char s[50],ans[50];\n\n    int max_freq = 0,num=0,hash_value,i;\n    unsigned long int a[10000],b[10000];\n\n\n    FILE *fp = fopen(\"/Users/Brikman23/Desktop/input.txt\",\"r\"); //remember to specify correct path of input file..\n\n    if (fp==NULL)\n    {\n        printf(\"Error: Input File not found..\");\n        return -1;\n    }\n\n    while(fscanf(fp,\"%s\",s)==1)\n    {\n        hash_value = hash(s);\n        for(i=0;i&lt;num;i++)\n        if(a[i]==hash_value)\n        break;\n\n        if(i==num)\n        {\n            b[num]=1;\n            a[num]=hash_value;\n\n            if(b[num]&gt;max_freq)\n            {\n                max_freq = b[num];\n                strcpy(ans,s);\n\n            }   \n\n            num++;  \n        }\n        else\n        {\n            b[i]++;\n            if(b[i]&gt;max_freq)\n            {\n                max_freq = b[i];\n                strcpy(ans,s);\n\n            }   \n\n        }   \n\n\n    }\n\n    printf(\"The word with the highest number of appearances is: %s\",ans);\n    printf(\"\\nNumber of appearances: %d\",max_freq);\n\n    return 0;\n\n}\n</code></pre>\n\n<p>when I compile this with gcc, it does not give me an error but the output always gives me Abort trap:6 when instead it should be giving me:</p>\n\n<p>The word with the highest number of appearances is:</p>\n\n<p>Number of appearances:</p>\n\n<p>I have looked at other posts but they have not been of help. Any help would be greatly appreciated.</p>\n"}, {"tags": ["c", "sockets", "network-programming", "qos"], "comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1429717063, "post_id": 29801881, "comment_id": 47732787, "body": "&quot;<i>should I use the list of TCP and UDP port numbers</i>&quot;: Without (trying to) inspect the packets&#39; payload you probably have no other possibility."}], "answers": [{"comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1429717310, "post_id": 29802487, "comment_id": 47732983, "body": "Option two is an expensive one. Also doing so might raise ethic objections."}, {"owner": {"reputation": 28330, "user_id": 298054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7dffcc86140441472cfb6119375a9d7?s=128&d=identicon&r=PG", "display_name": "jweyrich", "link": "https://stackoverflow.com/users/298054/jweyrich"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1429722755, "post_id": 29802487, "comment_id": 47736794, "body": "@alk: quite expensive indeed. As for the other point, while I agree, I must ask: How does a NGFW do this without raising ethic objections? The only answer I know (currently) is: User terms and conditions + privacy policy."}, {"owner": {"reputation": 1024, "user_id": 1459065, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0b4f22a418c18e4c2977dede2450e695?s=128&d=identicon&r=PG", "display_name": "elmazzun", "link": "https://stackoverflow.com/users/1459065/elmazzun"}, "edited": false, "score": 0, "creation_date": 1429738085, "post_id": 29802487, "comment_id": 47746467, "body": "Could you suggest me some interesting papers or docs about how IDS recognize protocol signatures? Sincerly, I don&#39;t know where to start."}, {"owner": {"reputation": 28330, "user_id": 298054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7dffcc86140441472cfb6119375a9d7?s=128&d=identicon&r=PG", "display_name": "jweyrich", "link": "https://stackoverflow.com/users/298054/jweyrich"}, "reply_to_user": {"reputation": 1024, "user_id": 1459065, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0b4f22a418c18e4c2977dede2450e695?s=128&d=identicon&r=PG", "display_name": "elmazzun", "link": "https://stackoverflow.com/users/1459065/elmazzun"}, "edited": false, "score": 0, "creation_date": 1429900906, "post_id": 29802487, "comment_id": 47836107, "body": "@elmazzun I don&#39;t recall any good papers/docs right now, but I&#39;d suggest looking into <a href=\"http://manual.snort.org/\" rel=\"nofollow noreferrer\">Snort&#39;s manual</a> or maybe <a href=\"https://www.snort.org/documents\" rel=\"nofollow noreferrer\">other Snort documents</a>"}, {"owner": {"reputation": 1024, "user_id": 1459065, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0b4f22a418c18e4c2977dede2450e695?s=128&d=identicon&r=PG", "display_name": "elmazzun", "link": "https://stackoverflow.com/users/1459065/elmazzun"}, "edited": false, "score": 0, "creation_date": 1429949794, "post_id": 29802487, "comment_id": 47850863, "body": "Thank you, I&#39;ll start from there."}], "tags": [], "owner": {"reputation": 28330, "user_id": 298054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7dffcc86140441472cfb6119375a9d7?s=128&d=identicon&r=PG", "display_name": "jweyrich", "link": "https://stackoverflow.com/users/298054/jweyrich"}, "is_accepted": true, "score": 2, "last_activity_date": 1429717454, "last_edit_date": 1429717454, "creation_date": 1429717168, "answer_id": 29802487, "question_id": 29801881, "link": "https://stackoverflow.com/questions/29801881/how-do-i-identify-the-source-of-a-udp-packet-in-an-access-point/29802487#29802487", "title": "How do I identify the source of a UDP packet in an access point?", "body": "<p>You cannot tell <em>for sure</em> which application sent a packet - Only the sender itself knows this. If I understand correctly, what you want is to detect which protocol is being used. Then you have 2 possibilities:</p>\n\n<ol>\n<li><p>Assume an application based on the destination port set on the TCP/UDP packet - the <a href=\"http://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers\" rel=\"nofollow\">list of TCP/UDP port numbers</a> or your <code>/etc/services</code> (if you're on Linux/Unix/OSX/etc) might be of help;</p></li>\n<li><p>Analyse the packet contents and match it against known protocol signatures (like an IDS does - see <a href=\"http://manual.snort.org/node28.html\" rel=\"nofollow\">Snort rules</a> for example). Note you may need some form of conntrack to make this work reliably;</p></li>\n</ol>\n"}], "owner": {"reputation": 1024, "user_id": 1459065, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0b4f22a418c18e4c2977dede2450e695?s=128&d=identicon&r=PG", "display_name": "elmazzun", "link": "https://stackoverflow.com/users/1459065/elmazzun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1047, "favorite_count": 0, "accepted_answer_id": 29802487, "answer_count": 1, "score": 2, "last_activity_date": 1429717454, "creation_date": 1429715631, "last_edit_date": 1429716510, "question_id": 29801881, "link": "https://stackoverflow.com/questions/29801881/how-do-i-identify-the-source-of-a-udp-packet-in-an-access-point", "title": "How do I identify the source of a UDP packet in an access point?", "body": "<p>I'm creating a kind of access point. </p>\n\n<p>I capture all packets, of all the types, from my machine, in order to prioritize them before forwarding them, according to the default Quality of Service (QoS) classes.</p>\n\n<p>By calling <code>socket</code> with the <code>ETH_P_ALL</code> parameter , I can get all incoming packets of any protocol type:</p>\n\n<pre><code>    if ((sockfd = socket(AF_PACKET, SOCK_RAW, htons(ETH_P_ALL))) == ERROR)  {\n        perror(\"socket\");\n        exit(1);\n    }\n</code></pre>\n\n<p>By using <code>ethhdr</code>, <code>iphdr</code>, <code>tcphdr</code> and <code>udphdr</code> structs I can't retrieve information on which application sent each packet.</p>\n\n<p>However, both Voip and SNMP use UDP, and I don't know which of the two sent me UDP package. </p>\n\n<p>I'd like to know which applications are sending the UDP packets, so I may follow the QoS classes and forward some packets (e.g. conversational voice) before others (e.g. e-mail).</p>\n\n<p>In order to recognize the protocol, should I use the list of TCP and UDP port numbers?</p>\n"}, {"tags": ["c", "struct", "scanf"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 3, "creation_date": 1429714856, "post_id": 29801540, "comment_id": 47731127, "body": "<code>if(scanf(&quot;%d %d\\n%d&quot;, &amp;n, &amp;c, &amp;sede) != 1)</code>  -&gt; <code>if(scanf(&quot;%d %d %d&quot;, &amp;n, &amp;c, &amp;sede) != 3)</code>?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1429714904, "post_id": 29801540, "comment_id": 47731156, "body": "Read more about <a href=\"http://en.cppreference.com/w/c/io/fscanf\" rel=\"nofollow noreferrer\"><code>scanf</code></a> and especially about what it returns."}, {"owner": {"reputation": 89, "user_id": 3547269, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6fb5935e14b73c6b2780f60ce41c1897?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel", "link": "https://stackoverflow.com/users/3547269/miguel"}, "edited": false, "score": 0, "creation_date": 1429717718, "post_id": 29801540, "comment_id": 47733295, "body": "@chux I edited the question, maybe I should put again the errors, sorry for that. The part of scanf returning errors I already know. My problem is that it only stores 0, as you can see in the output"}], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 3547269, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6fb5935e14b73c6b2780f60ce41c1897?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel", "link": "https://stackoverflow.com/users/3547269/miguel"}, "edited": false, "score": 0, "creation_date": 1429715116, "post_id": 29801609, "comment_id": 47731313, "body": "yeah I got that, what about the 0?"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 89, "user_id": 3547269, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6fb5935e14b73c6b2780f60ce41c1897?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel", "link": "https://stackoverflow.com/users/3547269/miguel"}, "edited": false, "score": 0, "creation_date": 1429715225, "post_id": 29801609, "comment_id": 47731386, "body": "@Miguel; I will answer that but what if you will ask about <code>-1</code>, <code>-2</code>, <code>4</code>, <code>5</code>?"}, {"owner": {"reputation": 89, "user_id": 3547269, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6fb5935e14b73c6b2780f60ce41c1897?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel", "link": "https://stackoverflow.com/users/3547269/miguel"}, "edited": false, "score": 0, "creation_date": 1429715495, "post_id": 29801609, "comment_id": 47731596, "body": "I&#39;m not understanding your question. The first three numbers are always positive. The only one that could be negative is w because it is the length of an edge."}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 0, "last_activity_date": 1429714931, "creation_date": 1429714931, "answer_id": 29801609, "question_id": 29801540, "link": "https://stackoverflow.com/questions/29801540/structure-not-storing-values-and-scanf-failing/29801609#29801609", "title": "Structure not storing values and scanf failing", "body": "<p><code>scanf(\"%d %d\\n%d\", &amp;n, &amp;c, &amp;sede)</code> will return <code>3</code> on successful scan and of course <code>3 != 1</code>. Same goes with <code>scanf(\"%d %d %d\", &amp;vertex-&gt;u, &amp;vertex-&gt;v, &amp;vertex-&gt;w)</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 89, "user_id": 3547269, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6fb5935e14b73c6b2780f60ce41c1897?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel", "link": "https://stackoverflow.com/users/3547269/miguel"}, "edited": false, "score": 0, "creation_date": 1429718030, "post_id": 29802599, "comment_id": 47733519, "body": "Why does that change my output. I understand that the first line would not be printed, but printing all to 0 i don&#39;t get that"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 89, "user_id": 3547269, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6fb5935e14b73c6b2780f60ce41c1897?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel", "link": "https://stackoverflow.com/users/3547269/miguel"}, "edited": false, "score": 1, "creation_date": 1429718758, "post_id": 29802599, "comment_id": 47734095, "body": "@Miguel Your code was printing <code>vertex-&gt;u</code> of the newly allocated <code>vertex</code> rather than the <code>vertex</code> in the preceding <code>scanf()</code>.  The printing of <code>0</code> happens to be what was in the newly allocated data,  it could have been any <code>int</code> - it is undefined behavior."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1429717502, "creation_date": 1429717502, "answer_id": 29802599, "question_id": 29801540, "link": "https://stackoverflow.com/questions/29801540/structure-not-storing-values-and-scanf-failing/29802599#29802599", "title": "Structure not storing values and scanf failing", "body": "<p>Mis-ordered code: Print <em>then</em> advance pointer with <code>vertex = vertex-&gt;next;</code>.</p>\n\n<pre><code>    // Add\n    printf(\"u: %d v: %d w: %d\\n\", vertex-&gt;u, vertex-&gt;v, vertex-&gt;w);\n\n    vertex-&gt;next = malloc(sizeof(struct info));\n    vertex = vertex-&gt;next;\n    // printf(\"u: %d v: %d w: %d\\n\", vertex-&gt;u, vertex-&gt;v, vertex-&gt;w);\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 3547269, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6fb5935e14b73c6b2780f60ce41c1897?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel", "link": "https://stackoverflow.com/users/3547269/miguel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 29802599, "answer_count": 2, "score": 2, "last_activity_date": 1429718109, "creation_date": 1429714746, "last_edit_date": 1429718109, "question_id": 29801540, "link": "https://stackoverflow.com/questions/29801540/structure-not-storing-values-and-scanf-failing", "title": "Structure not storing values and scanf failing", "body": "<p>I'm trying to run the following code with some input, and when the program ends it shows that <code>scanf</code> failed and my structure didn't save anything except zeros. What's wrong?</p>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define INF 2147483647;\n\ntypedef struct info{\n    int u, v, w;\n    struct info *next;\n}*Vertex;\n\nVertex vertex;\nint n, c, sede; \nint *distarr;\n\nint main(){\n    int i;\n\n    if(scanf(\"%d %d\\n%d\", &amp;n, &amp;c, &amp;sede) &lt; 0)\n        printf(\"first scanf failed\\n\");\n\n    distarr = malloc(sizeof(int) * (n + 1));\n    vertex = malloc(sizeof(struct info));\n\n    for(i=0; i&lt;c; i++){\n\n        if(scanf(\"%d %d %d\", &amp;vertex-&gt;u, &amp;vertex-&gt;v, &amp;vertex-&gt;w) &lt; 0)\n            printf(\"second scanf failed\\n\");\n\n        vertex-&gt;next = malloc(sizeof(struct info));\n        vertex = vertex-&gt;next;\n\n        printf(\"u: %d v: %d w: %d\\n\", vertex-&gt;u, vertex-&gt;v, vertex-&gt;w);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Input:</p>\n\n<pre><code>10 15\n6\n6 2 5\n6 7 -1\n8 5 0\n8 3 2\n5 10 0\n10 3 0\n3 4 4\n3 8 -1\n2 5 4\n2 10 5\n2 3 1\n2 9 3\n1 6 -1\n1 8 0\n1 10 3\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>u: 0 v: 0 w: 0\nu: 0 v: 0 w: 0\nu: 0 v: 0 w: 0\nu: 0 v: 0 w: 0\nu: 0 v: 0 w: 0\nu: 0 v: 0 w: 0\nu: 0 v: 0 w: 0\nu: 0 v: 0 w: 0\nu: 0 v: 0 w: 0\nu: 0 v: 0 w: 0\nu: 0 v: 0 w: 0\nu: 0 v: 0 w: 0\nu: 0 v: 0 w: 0\nu: 0 v: 0 w: 0\nu: 0 v: 0 w: 0\n</code></pre>\n\n<p>EDIT: I saw that my condition of scanf was wrong I've changed it, but i still don't understand what is happening to just store 0 (The Code and Output were edited)</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 1, "creation_date": 1429714631, "post_id": 29801449, "comment_id": 47730961, "body": "We are not here to do your homework for you."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1429714751, "post_id": 29801449, "comment_id": 47731045, "body": "[For Sayantan only] Nije koro bhai, bhul hole amra achi. [Try it yourself first, we&#39;ll be there to help you out if any issues]. :-)"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1429719409, "post_id": 29801449, "comment_id": 47734570, "body": "@Sayantan Dey What should the result be if the number consists only from one digit?"}, {"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1429806431, "post_id": 29801449, "comment_id": 47784916, "body": "@SayantanDey: just because it&#39;s easy for me doesn&#39;t mean we should do it for you. Part of being a student is LEARNING. If you just get everyone else to do your homework for you, then you learn nothing."}], "answers": [{"tags": [], "owner": {"reputation": 187, "user_id": 4689198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb535642d33ae7414220d808ea0577ba?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.Yellow", "link": "https://stackoverflow.com/users/4689198/mr-yellow"}, "is_accepted": false, "score": 0, "last_activity_date": 1429714989, "creation_date": 1429714989, "answer_id": 29801628, "question_id": 29801449, "link": "https://stackoverflow.com/questions/29801449/how-to-delete-the-first-digit-of-a-given-number/29801628#29801628", "title": "How to delete the first digit of a given number?", "body": "<p>you can divide the number so often by ten, until your number is &lt; 10.</p>\n\n<pre><code>1748/10 = 174\n174/10 = 17\n17/10 = 1\n</code></pre>\n\n<p>Now you know the iteration count 3 and you also have the 1 as multiplier and then you can use the following formula:<br>\nYourNumber - 1 (this 1 is the \"multiplier\") * 10^3 (the 3 is the \"iteration count\") = 748</p>\n"}, {"tags": [], "owner": {"reputation": 1779, "user_id": 3671272, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nK622.png?s=128&g=1", "display_name": "TheCrafter", "link": "https://stackoverflow.com/users/3671272/thecrafter"}, "is_accepted": false, "score": 0, "last_activity_date": 1429715151, "creation_date": 1429715151, "answer_id": 29801694, "question_id": 29801449, "link": "https://stackoverflow.com/questions/29801449/how-to-delete-the-first-digit-of-a-given-number/29801694#29801694", "title": "How to delete the first digit of a given number?", "body": "<p>You teacher probably gave you this homework. My answer would be this:</p>\n\n<pre><code>std::string myString = \"145\";\nint value = std::stoi(myString); //value = 145 \nstd::string answer = myString.substr(1, myString.size() - 2);\nint answerInt = std::stoid(answer);\n</code></pre>\n\n<p>It's probably not what he would expect but I always liked to troll my teachers! It should work.</p>\n"}, {"tags": [], "owner": {"reputation": 10297, "user_id": 2425366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5z1Nm.jpg?s=128&g=1", "display_name": "Shreevardhan", "link": "https://stackoverflow.com/users/2425366/shreevardhan"}, "is_accepted": true, "score": 1, "last_activity_date": 1435920113, "creation_date": 1435920113, "answer_id": 31204841, "question_id": 29801449, "link": "https://stackoverflow.com/questions/29801449/how-to-delete-the-first-digit-of-a-given-number/31204841#31204841", "title": "How to delete the first digit of a given number?", "body": "<p>A C++11 one-liner would be</p>\n\n<pre><code>int DELTOP(int x) {\n    return std::stoi(std::to_string(x).substr(1));\n}\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 4820032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CS79K.jpg?s=128&g=1", "display_name": "Sayantan Dey", "link": "https://stackoverflow.com/users/4820032/sayantan-dey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 388, "favorite_count": 0, "accepted_answer_id": 31204841, "answer_count": 3, "score": -4, "last_activity_date": 1435920113, "creation_date": 1429714544, "last_edit_date": 1435918094, "question_id": 29801449, "link": "https://stackoverflow.com/questions/29801449/how-to-delete-the-first-digit-of-a-given-number", "title": "How to delete the first digit of a given number?", "body": "<p>How can I delete the first digit of a given number using a user defined function (Suppose the function is <code>DELTOP</code>) ?</p>\n\n<p>For Ex.,</p>\n\n<pre><code>x=DELTOP(1748);\n</code></pre>\n\n<p>I want the value of <code>x</code> as <code>748</code>.</p>\n\n<p>Would anybody tell me how to write this function easily ?  </p>\n"}, {"tags": ["c++", "c", "encryption", "android-ndk"], "comments": [{"owner": {"reputation": 89, "user_id": 4261546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WC0Gh.png?s=128&g=1", "display_name": "RJButler", "link": "https://stackoverflow.com/users/4261546/rjbutler"}, "edited": false, "score": 0, "creation_date": 1430318936, "post_id": 29801425, "comment_id": 48015325, "body": "I found several examples of AES under C but couldnt see where the IV would go, I then found someone posted a compiled openSSL AES for android, plus a post using the AES here <a href=\"http://stackoverflow.com/questions/18152913/aes-aes-cbc-128-aes-cbc-192-aes-cbc-256-encryption-decryption-with-openssl-c\">link</a> however the example doesnt seem to work! I shall post what I have to check my code above"}], "answers": [{"comments": [{"owner": {"reputation": 3390, "user_id": 493423, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2b060ab5acda8695ad0afe5919e6f8f0?s=128&d=identicon&r=PG", "display_name": "Zoombie", "link": "https://stackoverflow.com/users/493423/zoombie"}, "edited": false, "score": 0, "creation_date": 1440337394, "post_id": 29951291, "comment_id": 52221227, "body": "i need similar thing for encryption, I am not very much experienced with OpenSSL or NDK either. Can you please share some link which shows some example of using OpenSSL library in JNI folder for Android NDK ? it will be very helpful for me."}], "tags": [], "owner": {"reputation": 89, "user_id": 4261546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WC0Gh.png?s=128&g=1", "display_name": "RJButler", "link": "https://stackoverflow.com/users/4261546/rjbutler"}, "is_accepted": true, "score": 3, "last_activity_date": 1430380152, "last_edit_date": 1430380152, "creation_date": 1430330924, "answer_id": 29951291, "question_id": 29801425, "link": "https://stackoverflow.com/questions/29801425/encryption-rijndael-cipher-with-c-c-in-android-ndk/29951291#29951291", "title": "Encryption (Rijndael Cipher) With C/C++ in Android NDK", "body": "<p><strong>SOLVED:</strong></p>\n\n<p>Issue is it appears the array which held the IV gets altered after the encryption so you need to reset back before you decrypt for the result</p>\n\n<p>Using the pre-built OpenSSL for Android you can find here <a href=\"https://github.com/emileb/OpenSSL-for-Android-Prebuilt\" rel=\"nofollow\">OpenSSL-for-Android-Prebuilt</a></p>\n\n<p>and the code above just remember to set the IV before each call to AES_cbc_encrypt.</p>\n"}, {"tags": [], "owner": {"reputation": 2983, "user_id": 7767664, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/32630cb48af30367a74442b541b5f94a?s=128&d=identicon&r=PG&f=1", "display_name": "user924", "link": "https://stackoverflow.com/users/7767664/user924"}, "is_accepted": false, "score": 2, "last_activity_date": 1559490540, "creation_date": 1559490540, "answer_id": 56416584, "question_id": 29801425, "link": "https://stackoverflow.com/questions/29801425/encryption-rijndael-cipher-with-c-c-in-android-ndk/56416584#56416584", "title": "Encryption (Rijndael Cipher) With C/C++ in Android NDK", "body": "<p>OpenSSL is quite a big library (if you care about APK size)</p>\n\n<p>You can use Tiny AES in C (can be used with C++) </p>\n\n<p>I have added it to Android project (CMake)</p>\n\n<p><a href=\"https://github.com/anonym24/Android-Tiny-AES-NDK\" rel=\"nofollow noreferrer\">https://github.com/anonym24/Android-Tiny-AES-NDK</a></p>\n"}], "owner": {"reputation": 89, "user_id": 4261546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WC0Gh.png?s=128&g=1", "display_name": "RJButler", "link": "https://stackoverflow.com/users/4261546/rjbutler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4097, "favorite_count": 0, "accepted_answer_id": 29951291, "answer_count": 2, "score": 2, "last_activity_date": 1559490540, "creation_date": 1429714489, "last_edit_date": 1450264623, "question_id": 29801425, "link": "https://stackoverflow.com/questions/29801425/encryption-rijndael-cipher-with-c-c-in-android-ndk", "title": "Encryption (Rijndael Cipher) With C/C++ in Android NDK", "body": "<p>I want to convert my C#(managed) decryption method into Android NDK, C/C++ (NO JAVA)</p>\n\n<p>I see there was crypto. on the JAVA side but I want to keep away from any JNI, and I also see there's mcrypt and crypt++ but cant find a compiled lib for android.</p>\n\n<p>Here an example in C# which I want to translate, to c/c++</p>\n\n<pre><code>    public byte[] DecryptBytes(byte[] encryptedBytes)           \n    {\n    RijndaelManaged RijndaelCipher = new RijndaelManaged();\n\n\n            RijndaelCipher.Mode = CipherMode.CBC;\n\n            ICryptoTransform Decryptor = RijndaelCipher.CreateDecryptor(Bytes32_KEY, Bytes16_IV);\n\n            MemoryStream memoryStream = new MemoryStream(encryptedBytes);\n            CryptoStream cryptoStream = new CryptoStream(memoryStream, Decryptor, CryptoStreamMode.Read);\n            byte[] plainBytes = new byte[encryptedBytes.Length];\n\n            int DecryptedCount = cryptoStream.Read(plainBytes, 0, plainBytes.Length);\n\n            memoryStream.Close();\n            cryptoStream.Close();\n\n            return plainBytes;\n\n    };\n</code></pre>\n\n<p><strong>UPDATE</strong>\nSo the best I've found so far is to use openSSL AES, I have downloaded a pre-compiled lib for Android, I'm just struggling to get it work with the example some already posted as working here is the c code example</p>\n\n<pre><code>void test_enc(){\n\n    int keylength = 256;\n\n    //  // 256bit KEY\n        uint8_t key[32] = { 0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07,\n            0x08, 0x09, 0x0A, 0x0B, 0x0C, 0x0D, 0x0E, 0x0F,\n            0x10, 0x11, 0x12, 0x13, 0x14, 0x15, 0x16, 0x17,\n            0x18, 0x19, 0x1A, 0x1B, 0x1C, 0x1D, 0x1E, 0x1F};\n\n        //128bit IV\n        uint8_t iv[16] = { 0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07,\n            0x08, 0x09, 0x0A, 0x0B, 0x0C, 0x0D, 0x0E, 0x0F};\n\n\n        //input data\n        uint8_t input[64] = { 0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07,\n            0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07,\n            0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07,\n            0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07,\n            0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07,\n            0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07,\n            0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07,\n            0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07};\n\n    size_t inputslength = 10;\n    int x;\n\n    uint8_t *aes_key = key;\n\n    uint8_t *aes_input = input;\n\n    uint8_t *iv_enc = iv;\n    uint8_t *iv_dec = iv;\n\n    // buffers for encryption and decryption\n    const size_t encslength = ((inputslength + AES_BLOCK_SIZE) / AES_BLOCK_SIZE) * AES_BLOCK_SIZE;\n    uint8_t *enc_out = (uint8_t*)malloc(sizeof(uint8_t) *encslength);\n    uint8_t *dec_out = (uint8_t*)malloc(sizeof(uint8_t) *inputslength);\n    memset(enc_out, 0, encslength);\n    memset(dec_out, 0, inputslength);\n\n    // so i can do with this aes-cbc-128 aes-cbc-192 aes-cbc-256\n    AES_KEY enc_key, dec_key;\n    AES_set_encrypt_key(aes_key, keylength, &amp;enc_key);\n    AES_cbc_encrypt(input, enc_out, inputslength, &amp;enc_key, iv_enc, AES_ENCRYPT);\n\n    AES_set_decrypt_key(aes_key, keylength, &amp;dec_key);  \n    AES_cbc_encrypt(enc_out, dec_out, encslength, &amp;dec_key, iv_dec, AES_DECRYPT);\n\n    LOGI(\"Before:\");\n    for(x=0;x&lt;inputslength;x++)\n        LOGI(\"%02x, \", input[x]);\n\n    LOGI(\"Encrypted:\");\n    for(x=0;x&lt;encslength;x++)\n        LOGI(\"%02x, \", enc_out[x]);\n\n    LOGI(\"Decrypted:\");\n    for(x=0;x&lt;encslength;x++)\n        LOGI(\"%02x, \", dec_out[x]);\n};\n</code></pre>\n\n<p>The encrypted bytes aren't the same as the c# and then the decrypt doesn't go back to the input, where have I gone wrong ?</p>\n"}, {"tags": ["c", "gcc", "macros", "clang", "c11"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1429715578, "post_id": 29801333, "comment_id": 47731654, "body": "1) <code>&quot;hello!&quot;</code> might match <code>char[7]</code> 2) <code>msg_none(_1)</code> but  <code>msg_none(void)</code> 3) <code>char* result = malloc(msglen + 3);</code> : <code>+3</code> should be <code>+4</code> for NUL."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1429716103, "post_id": 29801333, "comment_id": 47732068, "body": "<code>_Generic</code> GCC 4.9   <a href=\"https://gcc.gnu.org/wiki/C11Status\" rel=\"nofollow noreferrer\">C11Status</a>"}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1429740740, "post_id": 29801333, "comment_id": 47747746, "body": "@BLUEPIXY, today they shipped gcc 5.1, which has C11 (+gnu extensions) as a default."}, {"owner": {"reputation": 1159, "user_id": 2466987, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/irBJx.png?s=128&g=1", "display_name": "mucka", "link": "https://stackoverflow.com/users/2466987/mucka"}, "edited": false, "score": 0, "creation_date": 1429772216, "post_id": 29801333, "comment_id": 47758991, "body": "Sory, I actually used <code>printf(&quot;%s&quot;,msg((char*)&quot;hello!&quot;));</code> so it worked anyway, but <code>+0</code> solution from below solves even this problem."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1429716682, "post_id": 29801653, "comment_id": 47732514, "body": "&quot;define you own type&quot; for empty - nice solution!"}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1429716817, "post_id": 29801653, "comment_id": 47732606, "body": "@chux Thank you. I wish _Generics were more flexible."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1429717213, "post_id": 29801653, "comment_id": 47732907, "body": "sure you can pass zero or more arguments to a macro, see my answer"}], "tags": [], "owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "is_accepted": false, "score": 2, "last_activity_date": 1429718448, "last_edit_date": 1495542604, "creation_date": 1429715073, "answer_id": 29801653, "question_id": 29801333, "link": "https://stackoverflow.com/questions/29801333/add-zero-arguments-function-to-generic-macro/29801653#29801653", "title": "Add zero arguments function to _Generic macro", "body": "<p>Your problem is not directly related to _Generics. You simply defined you macro <code>#define msg(_1)</code> with an argument, therefore you have to pass an argument.</p>\n\n<p>If you don't rely on compiler extensions you cannot pass zero or more arguments to a _Generic macro. You will have to choose between zero or one arguments as shown <a href=\"https://stackoverflow.com/a/29802582/4082723\">here</a> or, 1 or more. </p>\n\n<p>This is my solution for any macro combination, but it involves a dummy argument. You can define you own type that will serve as an indicator of an emtpy macro</p>\n\n<pre><code>typedef struct\n{\n    int unused ;\n} emtpy ;\n\nconst empty msg_empty = { 0 } ;\n\nchar* msg_none(empty e)\n{\n    ( void )e ;\n    return moo_string(\"Have a nice day!\");\n}\n\n#define msg(_1) _Generic((_1), char*: msg_string, empty : msg_none)(_1)\n</code></pre>\n\n<p>And then call it with:</p>\n\n<pre><code>msg( msg_empty ) ;\n</code></pre>\n\n<p>Which will call the msg_none function.</p>\n"}, {"comments": [{"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 1, "creation_date": 1429717961, "post_id": 29802582, "comment_id": 47733479, "body": "Huh, I didn&#39;t know you could do that with _Generic. <code>(__VA_ARGS__+0)</code> this doesn&#39;t really work with more than one argument though."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1429718183, "post_id": 29802582, "comment_id": 47733640, "body": "But you did answer the question so...+1"}, {"owner": {"reputation": 1159, "user_id": 2466987, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/irBJx.png?s=128&g=1", "display_name": "mucka", "link": "https://stackoverflow.com/users/2466987/mucka"}, "edited": false, "score": 0, "creation_date": 1429772537, "post_id": 29802582, "comment_id": 47759203, "body": "Thank you very much ! This is exacly what I was lookign for, with <code>+0</code> the <code>printf(&quot;%s&quot;,msg((char*)&quot;hello!&quot;));</code> is reduced to <code>printf(&quot;%s&quot;,msg(&quot;hello!&quot;));</code>, zero argument case works and even <code>#define msg(_1) _Generic((_1+0), char*: msg_string, default: msg_none)(_1)</code> this particular syntax works."}], "tags": [], "owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "is_accepted": true, "score": 3, "last_activity_date": 1429717809, "last_edit_date": 1429717809, "creation_date": 1429717444, "answer_id": 29802582, "question_id": 29801333, "link": "https://stackoverflow.com/questions/29801333/add-zero-arguments-function-to-generic-macro/29802582#29802582", "title": "Add zero arguments function to _Generic macro", "body": "<p>C has variadic macros that may receive zero or more arguments</p>\n\n<pre><code>#define msg(...) _Generic((__VA_ARGS__+0), char*: msg_string, default: msg_none)(__VA_ARGS__)\n</code></pre>\n\n<p>here the <code>+0</code> in addition ensures that an array to pointer conversion is performed for your string argument, which you seem to assume.</p>\n\n<p>The later is important since gcc and clang currently differ in their behavior if the selection expression is an array.</p>\n\n<p><em>Edit:</em> You probably also would want your macro to work if someone passes in a <code>char const*</code> so you should add that case, too.</p>\n"}, {"tags": [], "owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "is_accepted": false, "score": 0, "last_activity_date": 1429727527, "last_edit_date": 1429727527, "creation_date": 1429725029, "answer_id": 29805323, "question_id": 29801333, "link": "https://stackoverflow.com/questions/29801333/add-zero-arguments-function-to-generic-macro/29805323#29805323", "title": "Add zero arguments function to _Generic macro", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define dummy void\n#define ARGS_AUX(_0, VAR, ...) VAR\n#define ARGS(...) ARGS_AUX(dummy, ##__VA_ARGS__, NULL) //gnu extensions\n#define MSG(var) (_Generic(var, char*: msg_string(var), default: msg_none()))\n#define msg(...) MSG(ARGS(__VA_ARGS__)) //MSG(NULL) when no argument\n\nchar *moo_string(const char *s){\n    return (char*)s;\n}\n\nchar* msg_none(void){\n    return moo_string(\"Have a nice day!\");\n}\n\nchar* msg_string(char* message){\n    int msglen = strlen(message);\n    char* result = malloc(msglen + 4);\n    sprintf(result, \"&lt;%s&gt;\\n\", message);\n    return result;\n}\n\nint main(void){\n    printf(\"%s\\n\", msg());//Have a nice day!\n    printf(\"%s\\n\", msg((char*)\"hello!\"));//&lt;hello!&gt;, type is char[7] when no cast\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1159, "user_id": 2466987, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/irBJx.png?s=128&g=1", "display_name": "mucka", "link": "https://stackoverflow.com/users/2466987/mucka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 606, "favorite_count": 0, "accepted_answer_id": 29802582, "answer_count": 3, "score": 7, "last_activity_date": 1429727527, "creation_date": 1429714284, "question_id": 29801333, "link": "https://stackoverflow.com/questions/29801333/add-zero-arguments-function-to-generic-macro", "title": "Add zero arguments function to _Generic macro", "body": "<p>I am trying to generate overloaded functions using _Generic macro in C11, and I have stopped on zero arguments function support, e.g:</p>\n\n<pre><code>#define msg(_1) _Generic((_1), char*: msg_string, default: msg_none)(_1)\n\nchar* msg_none(void){\n    return moo_string(\"Have a nice day!\");\n}\n\nchar* msg_string(char* message){\n    int msglen = strlen(message);\n    char* result = malloc(msglen + 3);\n    sprintf(result, \"&lt;%s&gt;\\n\", message);\n    return result;\n}\n</code></pre>\n\n<p>For now compiling and running:</p>\n\n<pre><code>printf(\"%s\",msg(\"hello!\"));\n</code></pre>\n\n<p>goes without any problem, but:</p>\n\n<pre><code>printf(\"%s\",msg());\n</code></pre>\n\n<p>throws error:</p>\n\n<pre><code>main.c:7:17: error: expected expression\nprintf(\"%s\",msg());\n</code></pre>\n\n<p>I am using:</p>\n\n<pre><code> clang --version\n clang version 3.5.0 (tags/RELEASE_350/final)\n Target: x86_64-pc-linux-gnu\n Thread model: posix\n</code></pre>\n\n<p>GCC throws:</p>\n\n<pre><code>main.c:7:5: warning: implicit declaration of function \u2018_Generic\u2019\n</code></pre>\n\n<p>so I understand _Generic is not supported this version of gcc:</p>\n\n<pre><code>gcc --version\ngcc (Gentoo 4.8.3 p1.1, pie-0.5.9) 4.8.3\n</code></pre>\n\n<p>Is my problem even solvable or I just overestimate capabilities of _Generic, or I just need to upgrade my compilers to use this options properly ?</p>\n"}, {"tags": ["c++", "c", "function", "return", "global-variables"], "comments": [{"owner": {"reputation": 9690, "user_id": 1707560, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/8VK4M.jpg?s=128&g=1", "display_name": "imreal", "link": "https://stackoverflow.com/users/1707560/imreal"}, "edited": false, "score": 0, "creation_date": 1429714382, "post_id": 29801289, "comment_id": 47730766, "body": "Do you mean without modifying <code>i</code>?"}, {"owner": {"reputation": 8116, "user_id": 815653, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/a2beceb77bdda94b8097c2c21f615442?s=128&d=identicon&r=PG", "display_name": "zell", "link": "https://stackoverflow.com/users/815653/zell"}, "reply_to_user": {"reputation": 9690, "user_id": 1707560, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/8VK4M.jpg?s=128&g=1", "display_name": "imreal", "link": "https://stackoverflow.com/users/1707560/imreal"}, "edited": false, "score": 0, "creation_date": 1429714550, "post_id": 29801289, "comment_id": 47730914, "body": "@imreal. Thanks.  I said &quot;without modifying the program foo.c&quot;."}, {"owner": {"reputation": 9690, "user_id": 1707560, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/8VK4M.jpg?s=128&g=1", "display_name": "imreal", "link": "https://stackoverflow.com/users/1707560/imreal"}, "edited": false, "score": 0, "creation_date": 1429714601, "post_id": 29801289, "comment_id": 47730941, "body": "I meant, without modifying the value of <code>i</code>?"}, {"owner": {"reputation": 8116, "user_id": 815653, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/a2beceb77bdda94b8097c2c21f615442?s=128&d=identicon&r=PG", "display_name": "zell", "link": "https://stackoverflow.com/users/815653/zell"}, "edited": false, "score": 1, "creation_date": 1429714772, "post_id": 29801289, "comment_id": 47731064, "body": "Hey, you, the downvoter,  a learner wants to learn."}, {"owner": {"reputation": 9631, "user_id": 258009, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1ccdf76b2fb6a2c5e3c64e686b092ff0?s=128&d=identicon&r=PG", "display_name": "Component 10", "link": "https://stackoverflow.com/users/258009/component-10"}, "edited": false, "score": 0, "creation_date": 1429714862, "post_id": 29801289, "comment_id": 47731134, "body": "Surely if it&#39;s a global you don&#39;t need to <i>retrieve</i> it per-se, you can just reference it since it has global scope?"}, {"owner": {"reputation": 8116, "user_id": 815653, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/a2beceb77bdda94b8097c2c21f615442?s=128&d=identicon&r=PG", "display_name": "zell", "link": "https://stackoverflow.com/users/815653/zell"}, "reply_to_user": {"reputation": 9631, "user_id": 258009, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1ccdf76b2fb6a2c5e3c64e686b092ff0?s=128&d=identicon&r=PG", "display_name": "Component 10", "link": "https://stackoverflow.com/users/258009/component-10"}, "edited": false, "score": 0, "creation_date": 1429715027, "post_id": 29801289, "comment_id": 47731242, "body": "@Component10 I did not know that we can retrieve that variable from another file. Thanks."}, {"owner": {"reputation": 9631, "user_id": 258009, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1ccdf76b2fb6a2c5e3c64e686b092ff0?s=128&d=identicon&r=PG", "display_name": "Component 10", "link": "https://stackoverflow.com/users/258009/component-10"}, "edited": false, "score": 0, "creation_date": 1429715283, "post_id": 29801289, "comment_id": 47731437, "body": "@zell Apologies, I did not realise that this was from another file. In that case Borgleaders suggestion is probably what you want in your other file."}, {"owner": {"reputation": 8116, "user_id": 815653, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/a2beceb77bdda94b8097c2c21f615442?s=128&d=identicon&r=PG", "display_name": "zell", "link": "https://stackoverflow.com/users/815653/zell"}, "reply_to_user": {"reputation": 9631, "user_id": 258009, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1ccdf76b2fb6a2c5e3c64e686b092ff0?s=128&d=identicon&r=PG", "display_name": "Component 10", "link": "https://stackoverflow.com/users/258009/component-10"}, "edited": false, "score": 0, "creation_date": 1429715983, "post_id": 29801289, "comment_id": 47731965, "body": "@Component10 Because we require foo.c be unchanged, the only way to retrieve the value of i is from another file. Thanks for your explanation."}], "answers": [{"comments": [{"owner": {"reputation": 8116, "user_id": 815653, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/a2beceb77bdda94b8097c2c21f615442?s=128&d=identicon&r=PG", "display_name": "zell", "link": "https://stackoverflow.com/users/815653/zell"}, "edited": false, "score": 0, "creation_date": 1429717902, "post_id": 29801385, "comment_id": 47733431, "body": "You might want to add &#39;return i&#39; at the end"}], "tags": [], "owner": {"reputation": 235784, "user_id": 673730, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5d1e4893fe7a566e6e4b90876b642163?s=128&d=identicon&r=PG", "display_name": "Luchian Grigore", "link": "https://stackoverflow.com/users/673730/luchian-grigore"}, "is_accepted": true, "score": 1, "last_activity_date": 1429714406, "creation_date": 1429714406, "answer_id": 29801385, "question_id": 29801289, "link": "https://stackoverflow.com/questions/29801289/retrieve-a-c-global-variable-from-a-program-other-than-where-the-variable-is-def/29801385#29801385", "title": "Retrieve a C global variable from a program other than where the variable is defined", "body": "<p><code>i</code> is already accessible from any other compilation unit, provided you declare it beforehand.</p>\n\n<p>You can just declare it and then access it:</p>\n\n<pre><code>extern int i;\nint foo2(/*type*/ x){\n  foo(x);\n  // i is available here\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 2, "last_activity_date": 1429854694, "last_edit_date": 1429854694, "creation_date": 1429714448, "answer_id": 29801403, "question_id": 29801289, "link": "https://stackoverflow.com/questions/29801289/retrieve-a-c-global-variable-from-a-program-other-than-where-the-variable-is-def/29801403#29801403", "title": "Retrieve a C global variable from a program other than where the variable is defined", "body": "<blockquote class=\"spoiler\">\n  <p> I believe, in your question, \"program\" reffers to \"function\"</p>\n</blockquote>\n\n<ol>\n<li><p>If the wrapper function is present in the same compilation unit (usually, source file), you can use <code>i</code> directly inside the wrapper function as mentioned below. <code>i</code> is a global.</p></li>\n<li><p>To make use of <code>i</code> from some other translation unit (ex. some other function present in some other source file), you can <code>extern</code> the declaration of the same variable and make use of that.</p>\n\n<pre><code>extern int i;   //extern declaration of `i` in some other file, \n                //where the wrapper function is present\n</code></pre></li>\n</ol>\n\n<p>After that,  you can always <em>copy</em> the value of <code>i</code> before operation and <code>return</code> that value. Once you keep a <em>copy</em> of the previous value, the changed value of <code>i</code> won't make impact there. Something like</p>\n\n<pre><code>int foo2(x){\n\n  int temp = i;\n  foo(x);\n  return temp;  //will return the value of i before calling foo()\n}\n</code></pre>\n"}], "owner": {"reputation": 8116, "user_id": 815653, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/a2beceb77bdda94b8097c2c21f615442?s=128&d=identicon&r=PG", "display_name": "zell", "link": "https://stackoverflow.com/users/815653/zell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 1, "accepted_answer_id": 29801385, "answer_count": 2, "score": -2, "last_activity_date": 1429854694, "creation_date": 1429714196, "last_edit_date": 1429718246, "question_id": 29801289, "link": "https://stackoverflow.com/questions/29801289/retrieve-a-c-global-variable-from-a-program-other-than-where-the-variable-is-def", "title": "Retrieve a C global variable from a program other than where the variable is defined", "body": "<p>Suppose I have a C program foo.c which uses a global variable 'i'</p>\n\n<pre><code>int i;\n\nfoo(x){\n  i = x*x;\n}\n</code></pre>\n\n<p>Wihtout modifying the program foo.c, is there a mechanism in C/C++ for us  retrieve the value of i for a given \u2018x\u2019, for example,  by devising a  C/C++ program that wraps foo.c like:</p>\n\n<pre><code>int foo2(x){\n  foo(x);\n  return the value of i stored in memory when computing foo(x);\n}\n</code></pre>\n\n<p>Thanks for your ideas.</p>\n"}, {"tags": ["c", "quicksort", "swap"], "comments": [{"owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "edited": false, "score": 5, "creation_date": 1429715923, "post_id": 29801254, "comment_id": 47731917, "body": "I think it&#39;s valuable life lesson. You&#39;re trying too hard to be over-smart in order to save 4 bytes on temporary variable. This shows that it&#39;s better to loose 4 bytes and have maintainable and <i>working</i> code."}], "answers": [{"tags": [], "owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "is_accepted": false, "score": 1, "last_activity_date": 1429714698, "last_edit_date": 1429714698, "creation_date": 1429714372, "answer_id": 29801367, "question_id": 29801254, "link": "https://stackoverflow.com/questions/29801254/strange-things-happen-when-swapping-two-vars-in-quicksort/29801367#29801367", "title": "Strange things happen when swapping two vars in QuickSort", "body": "<h3>Swap(...)</h3>\n\n<ul>\n<li>Signed integer overflow is undefined which can occur with sufficiently large <code>*x</code> and <code>*y</code>.</li>\n<li>Absolutely nobody can easily tell if the code implementing <code>swap()</code> is correct.</li>\n</ul>\n\n<h3>Partition(...)</h3>\n\n<ul>\n<li>If <code>i == j</code>, your swap() function will not work correctly. This is because inside <code>swap()</code> we will have <code>x == y</code> and your logic does not handle that case.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "reply_to_user": {"reputation": 197, "user_id": 4054572, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/dmtbd.jpg?s=128&g=1", "display_name": "Davide R.", "link": "https://stackoverflow.com/users/4054572/davide-r"}, "edited": false, "score": 0, "creation_date": 1429715761, "post_id": 29801551, "comment_id": 47731793, "body": "@David Ok. Was it the first swap that hit the same element then?"}, {"owner": {"reputation": 197, "user_id": 4054572, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/dmtbd.jpg?s=128&g=1", "display_name": "Davide R.", "link": "https://stackoverflow.com/users/4054572/davide-r"}, "edited": false, "score": 1, "creation_date": 1429732724, "post_id": 29801551, "comment_id": 47743298, "body": "Yes it was. Thanks again."}], "tags": [], "owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "is_accepted": true, "score": 5, "last_activity_date": 1429715946, "last_edit_date": 1429715946, "creation_date": 1429714770, "answer_id": 29801551, "question_id": 29801254, "link": "https://stackoverflow.com/questions/29801254/strange-things-happen-when-swapping-two-vars-in-quicksort/29801551#29801551", "title": "Strange things happen when swapping two vars in QuickSort", "body": "<p>Your swap function will not work if both pointers point to the same element. If they do the second step <code>*y = (*x) - (*y);</code> sets the element to 0, since it is equivalent to <code>*x = (*x) - (*x);</code></p>\n\n<p>The second swap function with the temp variable preserves the values.</p>\n\n<p>At a glance it looks like <code>swap(&amp;a[indice_pivot],&amp;a[dx]);</code> could be hitting the same element. You can use <code>assert( indice_pivot != dx )</code> to determine that( or of course put one in the swap function ).</p>\n"}], "owner": {"reputation": 197, "user_id": 4054572, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/dmtbd.jpg?s=128&g=1", "display_name": "Davide R.", "link": "https://stackoverflow.com/users/4054572/davide-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 1, "accepted_answer_id": 29801551, "answer_count": 2, "score": 7, "last_activity_date": 1429715946, "creation_date": 1429714094, "question_id": 29801254, "link": "https://stackoverflow.com/questions/29801254/strange-things-happen-when-swapping-two-vars-in-quicksort", "title": "Strange things happen when swapping two vars in QuickSort", "body": "<p>I'm implementing QuickSort in C.</p>\n\n<p>Here's my swap procedure:</p>\n\n<pre><code>void swap(int *x, int *y)\n{\n    *x += (*y);\n    *y = (*x) - (*y);\n    *x = (*x) - (*y);\n}\n</code></pre>\n\n<p>And here's my Partition procedure:</p>\n\n<pre><code>int partition(int a[], int sx, int dx)\n{\n    int indice_pivot = (rand()%(dx-sx+1))+sx;\n    int i = sx-1, j;\n\n    swap(&amp;a[indice_pivot],&amp;a[dx]);\n\n\n    for(j=sx;j&lt;dx;j++)\n    {\n        if(a[j] &lt;= a[dx])\n        {\n            i++;\n            swap(&amp;a[j],&amp;a[i]);\n        }\n    }\n\n    i++;\n    swap(&amp;a[i],&amp;a[dx]);\n\n    return i;\n}\n</code></pre>\n\n<p>The problem is that when swapping two variables, they magically (?) become 0. I did some debugging and everything seems working fine inside the swap procedure. But the array contains zeros at the end of some partitions (not all of them). \nThe strange thing is that if I replace the swap procedure with </p>\n\n<pre><code>void swap(int *x, int *y)\n{\n    int temp = *y;\n    *y = *x;\n    *x = temp;\n}\n</code></pre>\n\n<p>Everything works fine. Why?</p>\n"}, {"tags": ["c", "brute-force"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1429714231, "post_id": 29801243, "comment_id": 47730637, "body": "When posting code, please refrain from adding line-numbers. Instead mark out (with a comment for example) the lines that cause the problems you&#39;re having."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 1, "creation_date": 1429714310, "post_id": 29801243, "comment_id": 47730708, "body": "You are calling a function(<code>strcpy</code>) in file scope and that too, copying a string into a <code>char</code>. You have to pass two arguments to <code>pass_test</code> and you pass just one. You also copy a string into an uninitialized <code>char</code> pointer(<code>OP_PASS</code>)"}, {"owner": {"reputation": 123, "user_id": 4819908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d0929591a215b52f231f3015308781a?s=128&d=identicon&r=PG&f=1", "display_name": "Clock_9", "link": "https://stackoverflow.com/users/4819908/clock-9"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1429716098, "post_id": 29801243, "comment_id": 47732062, "body": "@CoolGuy why does the function &#39;pass_test&#39; requires 2 arguments ?"}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 1, "last_activity_date": 1429714305, "creation_date": 1429714305, "answer_id": 29801342, "question_id": 29801243, "link": "https://stackoverflow.com/questions/29801243/bruteforce-code-is-not-running/29801342#29801342", "title": "bruteforce-code is not running", "body": "<p><em>One</em> problem is that you can't have statements or free expression in the global scope.</p>\n\n<p>Another problem is that the <code>strcpy</code> function expects a <em>string</em> (i.e. a <code>char*</code>) as the destination, not a single <code>char</code>.</p>\n\n<p>You can solve both these problems by doing definition and initialization in one line:</p>\n\n<pre><code>char pass = 'm';\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 4819908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d0929591a215b52f231f3015308781a?s=128&d=identicon&r=PG&f=1", "display_name": "Clock_9", "link": "https://stackoverflow.com/users/4819908/clock-9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 29801342, "answer_count": 1, "score": 0, "last_activity_date": 1429714305, "creation_date": 1429714074, "question_id": 29801243, "link": "https://stackoverflow.com/questions/29801243/bruteforce-code-is-not-running", "title": "bruteforce-code is not running", "body": "<p>I tried to code a litle bruteforce programm. But i cant compile it. Its a really easy programmcode i think and thats the reason why its bug me so hard that it didnt compile. I searched for solutions but couldnt strike a bonanza...</p>\n\n<pre><code>`1 #include &lt;stdio.h&gt;\n 2 #include &lt;string.h&gt;\n 3 char pass;\n 4 strcpy(pass,\"m\");\n 5 int pass_test(int argc, char *argv[]){\n 6         char s_pass[2];\n 7         argv[0] = s_pass;\n 8         if (s_pass == pass){\n 9                 printf(\"=================\\n==Access gained==\\n=================\");\n10 }               \n11         else{\n12                 printf(\"sth. went wrong\");\n13 }               \n14 }\n15 int main(){\n16         char solved_pass[2];\n17         char *OP_ABC;\n18         int i, p, z;\n19         strcpy(OP_ABC, \"abcdefghijklmnopqrstuvwxyz\");\n20         if ((strlen(pass)) == 1){\n21                 for(i=0;i &lt; strlen(OP_ABC);i++){\n22                         pass_test(OP_ABC[i]);\n23 }                       \n24 }\n25         if (strlen(pass) == 2){\n26                 for(p=0;p &lt; strlen(OP_ABC);p++){\n27                         for(z=0;z &lt; strlen(OP_ABC);z++){\n28                                 OP_ABC[p] = solved_pass[0];\n29                                 OP_ABC[z] = solved_pass[1];\n30                                 pass_test(solved_pass);\n31 }                               \n32 }               \n33 }\n34 }`\n</code></pre>\n\n<p>this is what the compiler says </p>\n\n<p><code>\n    bruteforce.c:4:13: error: expected \u2018)\u2019 before string constant\n    bruteforce.c: In function \u2018pass_test\u2019:\n    bruteforce.c:8:13: warning: comparison between pointer and integer [enabled by default]\n    bruteforce.c: In function \u2018main\u2019:\n    bruteforce.c:20:2: warning: passing argument 1 of \u2018strlen\u2019 makes pointer from integer without a cast [enabled by default]\n    In file included from bruteforce.c:2:0:\n    /usr/include/string.h:399:15: note: expected \u2018const char *\u2019 but argument is of type \u2018char\u2019\n    bruteforce.c:22:4: error: too few arguments to function \u2018pass_test\u2019\n    bruteforce.c:5:5: note: declared here\n    bruteforce.c:25:2: warning: passing argument 1 of \u2018strlen\u2019 makes pointer from integer without a cast [enabled by default]\n    In file included from bruteforce.c:2:0:\n    /usr/include/string.h:399:15: note: expected \u2018const char *\u2019 but argument is of type \u2018char\u2019\n    bruteforce.c:30:5: warning: passing argument 1 of \u2018pass_test\u2019 makes integer from pointer without a cast [enabled by default]\n    bruteforce.c:5:5: note: expected \u2018int\u2019 but argument is of type \u2018char *\u2019\n    bruteforce.c:30:5: error: too few arguments to function \u2018pass_test\u2019\n    bruteforce.c:5:5: note: declared here</code></p>\n\n<p>Could somebody help me please ?</p>\n"}, {"tags": ["c++", "c", "windows", "device-driver", "hid"], "comments": [{"owner": {"reputation": 1, "user_id": 3052555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cb40b8a172ec3807eaa38f1ac2ae357?s=128&d=identicon&r=PG&f=1", "display_name": "starman", "link": "https://stackoverflow.com/users/3052555/starman"}, "edited": false, "score": 0, "creation_date": 1429713719, "post_id": 29800881, "comment_id": 47730168, "body": "here&#39;s the vmulti link to the source code online to see what I was talking about above: link here: <a href=\"https://code.google.com/p/vmulti/source/browse/test/testvmulti.c\" rel=\"nofollow noreferrer\">code.google.com/p/vmulti/source/browse/test/testvmulti.c</a>"}, {"owner": {"reputation": 1, "user_id": 3052555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cb40b8a172ec3807eaa38f1ac2ae357?s=128&d=identicon&r=PG&f=1", "display_name": "starman", "link": "https://stackoverflow.com/users/3052555/starman"}, "edited": false, "score": 0, "creation_date": 1431612565, "post_id": 29800881, "comment_id": 48580387, "body": "P.S. this is the descriptor tool I am using that was recommended by some of the Microsoft WDK forum staff: <a href=\"http://www.usb.org/developers/hidpage#HID\" rel=\"nofollow noreferrer\">usb.org/developers/hidpage#HID</a> Descriptor Tool."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 3052555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cb40b8a172ec3807eaa38f1ac2ae357?s=128&d=identicon&r=PG&f=1", "display_name": "starman", "link": "https://stackoverflow.com/users/3052555/starman"}, "edited": false, "score": 0, "creation_date": 1429827978, "post_id": 29822396, "comment_id": 47797660, "body": "thank you. I was trying to create the 4 mouse devices and have a control collection for each one or have a master control collection for sending data to/from 4 different mouse devices (I am needing to inject input though into the 4 lower mouse devices). Essentially, I use the windows.devices.humaninterface devices class which calls other win32 functions related to reading devices internally but it does not take a mouse device directly to read/write from. Note: I can successfully send input to the control collection and read it but not the mouse devices yet."}, {"owner": {"reputation": 1, "user_id": 3052555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cb40b8a172ec3807eaa38f1ac2ae357?s=128&d=identicon&r=PG&f=1", "display_name": "starman", "link": "https://stackoverflow.com/users/3052555/starman"}, "edited": false, "score": 0, "creation_date": 1429828055, "post_id": 29822396, "comment_id": 47797690, "body": "I will decode this and see what does and does not work and get back with you."}, {"owner": {"reputation": 1, "user_id": 3052555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cb40b8a172ec3807eaa38f1ac2ae357?s=128&d=identicon&r=PG&f=1", "display_name": "starman", "link": "https://stackoverflow.com/users/3052555/starman"}, "edited": false, "score": 0, "creation_date": 1429828211, "post_id": 29822396, "comment_id": 47797755, "body": "One more note: The reason for this is to emulate/simulated mouse devices but I need the control collection to pass data on down because win32 api&#39;s do not allow for this directly. I do not need the pointers because I am writing this code for combination with Multipoint mouse SDK and mouse mischief powerpoint add-on. I only need the drivers because I plan on combination with another device (Kinect, Smart boards, etc.)."}, {"owner": {"reputation": 1, "user_id": 3052555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cb40b8a172ec3807eaa38f1ac2ae357?s=128&d=identicon&r=PG&f=1", "display_name": "starman", "link": "https://stackoverflow.com/users/3052555/starman"}, "edited": false, "score": 0, "creation_date": 1429837167, "post_id": 29822396, "comment_id": 47800528, "body": "Can you please add a driver side code sample of WriteOutputReport function in the first link listed in my post? (I&#39;ll update with what I have tommorow) I am working on the code but if you have an example of the output the input report would probably be much easier."}, {"owner": {"reputation": 1255, "user_id": 797152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/589f919cfbda3d80cd71fa93e65afb10?s=128&d=identicon&r=PG", "display_name": "aja", "link": "https://stackoverflow.com/users/797152/aja"}, "reply_to_user": {"reputation": 1, "user_id": 3052555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cb40b8a172ec3807eaa38f1ac2ae357?s=128&d=identicon&r=PG&f=1", "display_name": "starman", "link": "https://stackoverflow.com/users/3052555/starman"}, "edited": false, "score": 0, "creation_date": 1429854182, "post_id": 29822396, "comment_id": 47805452, "body": "Sorry, I&#39;m not a Windows developer. I was interested in decoding HID report descriptors for a microcontroller protect a few years back and that&#39;s when I discovered how (hideously) complicated it was. When I finished the decoder I ran it against all the samples in the official spec ...  you&#39;d be surprised how many of the examples were flaky. No wonder people have so much trouble with HID."}, {"owner": {"reputation": 1, "user_id": 3052555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cb40b8a172ec3807eaa38f1ac2ae357?s=128&d=identicon&r=PG&f=1", "display_name": "starman", "link": "https://stackoverflow.com/users/3052555/starman"}, "edited": false, "score": 0, "creation_date": 1429887779, "post_id": 29822396, "comment_id": 47827871, "body": "I was able to get a first try at it and it appears it creates separate mouse devices in device manager. So, that may allow me to write to them separately but I get a device cannot start error. I am guessing it has to do with the report descriptor being improper somewhere. Its so close though. I&#39;ll upload my driver code so far to prevent you from having to make major changes. P.S. I have a usage and usage page code what would they be in this instance, so I can read/write to the mouse devices?"}, {"owner": {"reputation": 1, "user_id": 3052555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cb40b8a172ec3807eaa38f1ac2ae357?s=128&d=identicon&r=PG&f=1", "display_name": "starman", "link": "https://stackoverflow.com/users/3052555/starman"}, "edited": false, "score": 0, "creation_date": 1429888500, "post_id": 29822396, "comment_id": 47828382, "body": "here&#39;s a picture of what it looks like in device manager: <a href=\"https://social.msdn.microsoft.com/Forums/getfile/649536\" rel=\"nofollow noreferrer\">social.msdn.microsoft.com/Forums/getfile/649536</a>. Here&#39;s a link to the full source code I have right now: <a href=\"https://onedrive.live.com/redir?resid=28bae91ca075b1e5!4963&amp;authkey=!AMHtpjiBgI0PfZA&amp;ithint=file%2czip\" rel=\"nofollow noreferrer\">onedrive.live.com/&hellip;</a>"}, {"owner": {"reputation": 1255, "user_id": 797152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/589f919cfbda3d80cd71fa93e65afb10?s=128&d=identicon&r=PG", "display_name": "aja", "link": "https://stackoverflow.com/users/797152/aja"}, "reply_to_user": {"reputation": 1, "user_id": 3052555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cb40b8a172ec3807eaa38f1ac2ae357?s=128&d=identicon&r=PG&f=1", "display_name": "starman", "link": "https://stackoverflow.com/users/3052555/starman"}, "edited": false, "score": 0, "creation_date": 1429912893, "post_id": 29822396, "comment_id": 47842429, "body": "You need to use bit field declarations <a href=\"https://msdn.microsoft.com/en-us/library/ewwyfdbe.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/ewwyfdbe.aspx</a> for the mouse buttons and pad fields so that they match the report descriptor. You changed them to byte fields. The c structures must match the report descriptor."}, {"owner": {"reputation": 1, "user_id": 3052555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cb40b8a172ec3807eaa38f1ac2ae357?s=128&d=identicon&r=PG&f=1", "display_name": "starman", "link": "https://stackoverflow.com/users/3052555/starman"}, "edited": false, "score": 0, "creation_date": 1430869220, "post_id": 29822396, "comment_id": 48244819, "body": "Never mind, I get three mouse devices but they are not starting. Maybe, its something wrong with my driver code. Could it be the usage returned or the Report descriptor still?"}, {"owner": {"reputation": 1, "user_id": 3052555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cb40b8a172ec3807eaa38f1ac2ae357?s=128&d=identicon&r=PG&f=1", "display_name": "starman", "link": "https://stackoverflow.com/users/3052555/starman"}, "edited": false, "score": 0, "creation_date": 1430870953, "post_id": 29822396, "comment_id": 48245343, "body": "I think I realized why it was not working your descriptor is too big and it is trying to truncate it. Do you have this in actual C? I am trying to convert it to C and having problems."}, {"owner": {"reputation": 1255, "user_id": 797152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/589f919cfbda3d80cd71fa93e65afb10?s=128&d=identicon&r=PG", "display_name": "aja", "link": "https://stackoverflow.com/users/797152/aja"}, "reply_to_user": {"reputation": 1, "user_id": 3052555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cb40b8a172ec3807eaa38f1ac2ae357?s=128&d=identicon&r=PG&f=1", "display_name": "starman", "link": "https://stackoverflow.com/users/3052555/starman"}, "edited": false, "score": 0, "creation_date": 1430922228, "post_id": 29822396, "comment_id": 48272366, "body": "As I have already said, I&#39;m not a Windows programmer,  but I can see a simple problem with your C definitions. The report descriptor type is declared as &quot;typedef UCHAR HID_REPORT_DESCRIPTOR&quot; ... so you must initialize the array with a sequence of UCHAR (that is, 8-bit values). So where, for example, you have coded &quot;0x00FF&quot;, you need to code &quot;0x00, 0xFF&quot; instead (respecting the required little-endian byte order). Otherwise the compiler will silently truncate 0x00FF to a single byte with a value of 0xFF which will not be parsed correctly by the host."}, {"owner": {"reputation": 1, "user_id": 3052555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cb40b8a172ec3807eaa38f1ac2ae357?s=128&d=identicon&r=PG&f=1", "display_name": "starman", "link": "https://stackoverflow.com/users/3052555/starman"}, "edited": false, "score": 0, "creation_date": 1431085018, "post_id": 29822396, "comment_id": 48355281, "body": "Thanks, I will try that. It thought maybe it might be something simple. Most of the time when I have a problem its a easily solvable one and I only missed something. In this case, I am out of my comfort zone but I like learning new things."}, {"owner": {"reputation": 1, "user_id": 3052555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cb40b8a172ec3807eaa38f1ac2ae357?s=128&d=identicon&r=PG&f=1", "display_name": "starman", "link": "https://stackoverflow.com/users/3052555/starman"}, "edited": false, "score": 0, "creation_date": 1431390549, "post_id": 29822396, "comment_id": 48465374, "body": "Here&#39;s a picture after I performed your last suggestion: <a href=\"https://social.msdn.microsoft.com/Forums/getfile/655724\" rel=\"nofollow noreferrer\">social.msdn.microsoft.com/Forums/getfile/655724</a>. I believe I am still missing something in my report descriptor. I posted the updated report descriptor above."}, {"owner": {"reputation": 1, "user_id": 3052555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cb40b8a172ec3807eaa38f1ac2ae357?s=128&d=identicon&r=PG&f=1", "display_name": "starman", "link": "https://stackoverflow.com/users/3052555/starman"}, "edited": false, "score": 0, "creation_date": 1431620670, "post_id": 29822396, "comment_id": 48585870, "body": "P.S. here&#39;s my full source code for download if you wish to look at it and see if theirs anything I am doing wrong: <a href=\"https://kinectmultipoint.codeplex.com/releases/view/614518\" rel=\"nofollow noreferrer\">kinectmultipoint.codeplex.com/releases/view/614518</a>. I found that code sample in the documentation you posted. You can check my code but I have only made minor changes to accommodate your changes mentioned above in the answer."}, {"owner": {"reputation": 1, "user_id": 3052555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cb40b8a172ec3807eaa38f1ac2ae357?s=128&d=identicon&r=PG&f=1", "display_name": "starman", "link": "https://stackoverflow.com/users/3052555/starman"}, "edited": false, "score": 0, "creation_date": 1431622701, "post_id": 29822396, "comment_id": 48587097, "body": "what the heck I change it to one mouse device and the devices show up properly? Maybe its how you are ending the collections? You might need to clean up your answer a little and I think it will work. It seems something is missing or a end collection was not added."}, {"owner": {"reputation": 1, "user_id": 3052555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cb40b8a172ec3807eaa38f1ac2ae357?s=128&d=identicon&r=PG&f=1", "display_name": "starman", "link": "https://stackoverflow.com/users/3052555/starman"}, "edited": false, "score": 0, "creation_date": 1432398399, "post_id": 29822396, "comment_id": 48915953, "body": "After playing around with your answer it seems something is wrong with your data structure or I implemented it wrong. I cannot get data back but the data gets sent in an output report and vanishes. My guess is the data is never injected on the mouse device."}], "tags": [], "owner": {"reputation": 1255, "user_id": 797152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/589f919cfbda3d80cd71fa93e65afb10?s=128&d=identicon&r=PG", "display_name": "aja", "link": "https://stackoverflow.com/users/797152/aja"}, "is_accepted": false, "score": 0, "last_activity_date": 1429789314, "creation_date": 1429789314, "answer_id": 29822396, "question_id": 29800881, "link": "https://stackoverflow.com/questions/29800881/incorrect-report-descriptor-and-report-data-structure/29822396#29822396", "title": "Incorrect report descriptor and report data structure?", "body": "<p>It sounds like you are wanting to define a report descriptor to accommodate four physical mouse pointers (at least that is part of your question?). The HID report descriptor specification allows for the concept of \"Instances\", so I think trying something like the following report descriptor might be worth investigating. <strong>I have no idea whether it would work in practice</strong>, but it is based on a (rather flakey IMHO) example in \"Appendix A.5 Multiple Instances of a Control\" in the <a href=\"http://www.usb.org/developers/hidpage/Hut1_12v2.pdf\" rel=\"nofollow\">HID Usage Tables 1.12 specification</a>. </p>\n\n<p>As far as I can see there is no way to define an instance once and somehow generate four of them. You seem to have to duplicate the report descriptor for each instance.</p>\n\n<p>Worth a shot anyway.</p>\n\n<p>The following was produced by some code I wrote a while back called <a href=\"http://sourceforge.net/projects/hidrdd/\" rel=\"nofollow\">hidrdd</a> to help me decode HID report descriptors:</p>\n\n<pre><code>//--------------------------------------------------------------------------------\n// Decoded Application Collection\n//--------------------------------------------------------------------------------\n\n/*\n06 00FF      (GLOBAL) USAGE_PAGE         0xFF00 Vendor-defined \n09 01        (LOCAL)  USAGE              0xFF000001  \nA1 01        (MAIN)   COLLECTION         0x01 Application (Usage=0xFF000001: Page=Vendor-defined, Usage=, Type=)\n85 0F          (GLOBAL) REPORT_ID          0x0F (15) \n09 01          (LOCAL)  USAGE              0xFF000001  \n15 00          (GLOBAL) LOGICAL_MINIMUM    0x00 (0) &lt;-- Redundant: LOGICAL_MINIMUM is already 0\n26 FF00        (GLOBAL) LOGICAL_MAXIMUM    0x00FF (255) \n75 08          (GLOBAL) REPORT_SIZE        0x08 (8) Number of bits per field \n96 0900        (GLOBAL) REPORT_COUNT       0x0009 (9) Number of fields \nB1 00          (MAIN)   FEATURE            0x00000000 (9 fields x 8 bits) 0=Data 0=Array 0=Absolute 0=NoWrap 0=Linear 0=PrefState 0=NoNull 0=NonVolatile 0=Bitmap \n09 01          (LOCAL)  USAGE              0xFF000001  \n96 0100        (GLOBAL) REPORT_COUNT       0x0001 (1) Number of fields \n81 00          (MAIN)   INPUT              0x00000000 (1 field x 8 bits) 0=Data 0=Array 0=Absolute 0=Ignored 0=Ignored 0=PrefState 0=NoNull \n09 01          (LOCAL)  USAGE              0xFF000001  \n96 0700        (GLOBAL) REPORT_COUNT       0x0007 (7) Number of fields \n91 00          (MAIN)   OUTPUT             0x00000000 (7 fields x 8 bits) 0=Data 0=Array 0=Absolute 0=NoWrap 0=Linear 0=PrefState 0=NoNull 0=NonVolatile 0=Bitmap \nC0           (MAIN)   END_COLLECTION     Application\n*/\n\n//--------------------------------------------------------------------------------\n// Decoded Application Collection\n//--------------------------------------------------------------------------------\n\n/*\n05 01        (GLOBAL) USAGE_PAGE         0x0001 Generic Desktop Page \n09 02        (LOCAL)  USAGE              0x00010002 Mouse (CA=Application Collection) \nA1 01        (MAIN)   COLLECTION         0x01 Application (Usage=0x00010002: Page=Generic Desktop Page, Usage=Mouse, Type=CA)\n09 01          (LOCAL)  USAGE              0x00010001 Pointer (CP=Physical Collection) \nA1 02          (MAIN)   COLLECTION         0x02 Logical (Usage=0x00010001: Page=Generic Desktop Page, Usage=Pointer, Type=CP) &lt;-- Warning: USAGE type should be CL (Logical)\n05 0A            (GLOBAL) USAGE_PAGE         0x000A Ordinal Page \n09 01            (LOCAL)  USAGE              0x000A0001 Instance 1 (UM=Usage Modifier) \n85 01            (GLOBAL) REPORT_ID          0x01 (1) \nA1 00            (MAIN)   COLLECTION         0x00 Physical (Usage=0x000A0001: Page=Ordinal Page, Usage=Instance 1, Type=UM) &lt;-- Warning: USAGE type should be CP (Physical)\n05 09              (GLOBAL) USAGE_PAGE         0x0009 Button Page \n19 01              (LOCAL)  USAGE_MINIMUM      0x00090001 Button 1 Primary/trigger (MULTI=Selector, On/Off, Momentary, or One Shot) \n29 03              (LOCAL)  USAGE_MAXIMUM      0x00090003 Button 3 Tertiary (MULTI=Selector, On/Off, Momentary, or One Shot) \n15 00              (GLOBAL) LOGICAL_MINIMUM    0x00 (0) &lt;-- Redundant: LOGICAL_MINIMUM is already 0\n25 01              (GLOBAL) LOGICAL_MAXIMUM    0x01 (1) \n75 01              (GLOBAL) REPORT_SIZE        0x01 (1) Number of bits per field \n95 03              (GLOBAL) REPORT_COUNT       0x03 (3) Number of fields \n81 02              (MAIN)   INPUT              0x00000002 (3 fields x 1 bit) 0=Data 1=Variable 0=Absolute 0=NoWrap 0=Linear 0=PrefState 0=NoNull 0=NonVolatile 0=Bitmap \n95 05              (GLOBAL) REPORT_COUNT       0x05 (5) Number of fields \n81 03              (MAIN)   INPUT              0x00000003 (5 fields x 1 bit) 1=Constant 1=Variable 0=Absolute 0=NoWrap 0=Linear 0=PrefState 0=NoNull 0=NonVolatile 0=Bitmap \n05 01              (GLOBAL) USAGE_PAGE         0x0001 Generic Desktop Page \n09 30              (LOCAL)  USAGE              0x00010030 X (DV=Dynamic Value) \n09 31              (LOCAL)  USAGE              0x00010031 Y (DV=Dynamic Value) \n15 81              (GLOBAL) LOGICAL_MINIMUM    0x81 (-127) \n25 7F              (GLOBAL) LOGICAL_MAXIMUM    0x7F (127) \n75 08              (GLOBAL) REPORT_SIZE        0x08 (8) Number of bits per field \n95 02              (GLOBAL) REPORT_COUNT       0x02 (2) Number of fields \n81 06              (MAIN)   INPUT              0x00000006 (2 fields x 8 bits) 0=Data 1=Variable 1=Relative 0=NoWrap 0=Linear 0=PrefState 0=NoNull 0=NonVolatile 0=Bitmap \nC0               (MAIN)   END_COLLECTION     Physical\n05 0A            (GLOBAL) USAGE_PAGE         0x000A Ordinal Page \n09 02            (LOCAL)  USAGE              0x000A0002 Instance 2 (UM=Usage Modifier) \n85 02            (GLOBAL) REPORT_ID          0x02 (2) \nA1 00            (MAIN)   COLLECTION         0x00 Physical (Usage=0x000A0002: Page=Ordinal Page, Usage=Instance 2, Type=UM) &lt;-- Warning: USAGE type should be CP (Physical)\n05 09              (GLOBAL) USAGE_PAGE         0x0009 Button Page \n19 01              (LOCAL)  USAGE_MINIMUM      0x00090001 Button 1 Primary/trigger (MULTI=Selector, On/Off, Momentary, or One Shot) \n29 03              (LOCAL)  USAGE_MAXIMUM      0x00090003 Button 3 Tertiary (MULTI=Selector, On/Off, Momentary, or One Shot) \n15 00              (GLOBAL) LOGICAL_MINIMUM    0x00 (0) \n25 01              (GLOBAL) LOGICAL_MAXIMUM    0x01 (1) \n75 01              (GLOBAL) REPORT_SIZE        0x01 (1) Number of bits per field \n95 03              (GLOBAL) REPORT_COUNT       0x03 (3) Number of fields \n81 02              (MAIN)   INPUT              0x00000002 (3 fields x 1 bit) 0=Data 1=Variable 0=Absolute 0=NoWrap 0=Linear 0=PrefState 0=NoNull 0=NonVolatile 0=Bitmap \n95 05              (GLOBAL) REPORT_COUNT       0x05 (5) Number of fields \n81 03              (MAIN)   INPUT              0x00000003 (5 fields x 1 bit) 1=Constant 1=Variable 0=Absolute 0=NoWrap 0=Linear 0=PrefState 0=NoNull 0=NonVolatile 0=Bitmap \n05 01              (GLOBAL) USAGE_PAGE         0x0001 Generic Desktop Page \n09 30              (LOCAL)  USAGE              0x00010030 X (DV=Dynamic Value) \n09 31              (LOCAL)  USAGE              0x00010031 Y (DV=Dynamic Value) \n15 81              (GLOBAL) LOGICAL_MINIMUM    0x81 (-127) \n25 7F              (GLOBAL) LOGICAL_MAXIMUM    0x7F (127) \n75 08              (GLOBAL) REPORT_SIZE        0x08 (8) Number of bits per field \n95 02              (GLOBAL) REPORT_COUNT       0x02 (2) Number of fields \n81 06              (MAIN)   INPUT              0x00000006 (2 fields x 8 bits) 0=Data 1=Variable 1=Relative 0=NoWrap 0=Linear 0=PrefState 0=NoNull 0=NonVolatile 0=Bitmap \nC0               (MAIN)   END_COLLECTION     Physical\n05 0A            (GLOBAL) USAGE_PAGE         0x000A Ordinal Page \n09 03            (LOCAL)  USAGE              0x000A0003 Instance 3 (UM=Usage Modifier) \n85 03            (GLOBAL) REPORT_ID          0x03 (3) \nA1 00            (MAIN)   COLLECTION         0x00 Physical (Usage=0x000A0003: Page=Ordinal Page, Usage=Instance 3, Type=UM) &lt;-- Warning: USAGE type should be CP (Physical)\n05 09              (GLOBAL) USAGE_PAGE         0x0009 Button Page \n19 01              (LOCAL)  USAGE_MINIMUM      0x00090001 Button 1 Primary/trigger (MULTI=Selector, On/Off, Momentary, or One Shot) \n29 03              (LOCAL)  USAGE_MAXIMUM      0x00090003 Button 3 Tertiary (MULTI=Selector, On/Off, Momentary, or One Shot) \n15 00              (GLOBAL) LOGICAL_MINIMUM    0x00 (0) \n25 01              (GLOBAL) LOGICAL_MAXIMUM    0x01 (1) \n75 01              (GLOBAL) REPORT_SIZE        0x01 (1) Number of bits per field \n95 03              (GLOBAL) REPORT_COUNT       0x03 (3) Number of fields \n81 02              (MAIN)   INPUT              0x00000002 (3 fields x 1 bit) 0=Data 1=Variable 0=Absolute 0=NoWrap 0=Linear 0=PrefState 0=NoNull 0=NonVolatile 0=Bitmap \n95 05              (GLOBAL) REPORT_COUNT       0x05 (5) Number of fields \n81 03              (MAIN)   INPUT              0x00000003 (5 fields x 1 bit) 1=Constant 1=Variable 0=Absolute 0=NoWrap 0=Linear 0=PrefState 0=NoNull 0=NonVolatile 0=Bitmap \n05 01              (GLOBAL) USAGE_PAGE         0x0001 Generic Desktop Page \n09 30              (LOCAL)  USAGE              0x00010030 X (DV=Dynamic Value) \n09 31              (LOCAL)  USAGE              0x00010031 Y (DV=Dynamic Value) \n15 81              (GLOBAL) LOGICAL_MINIMUM    0x81 (-127) \n25 7F              (GLOBAL) LOGICAL_MAXIMUM    0x7F (127) \n75 08              (GLOBAL) REPORT_SIZE        0x08 (8) Number of bits per field \n95 02              (GLOBAL) REPORT_COUNT       0x02 (2) Number of fields \n81 06              (MAIN)   INPUT              0x00000006 (2 fields x 8 bits) 0=Data 1=Variable 1=Relative 0=NoWrap 0=Linear 0=PrefState 0=NoNull 0=NonVolatile 0=Bitmap \nC0               (MAIN)   END_COLLECTION     Physical\n05 0A            (GLOBAL) USAGE_PAGE         0x000A Ordinal Page \n09 04            (LOCAL)  USAGE              0x000A0004 Instance 4 (UM=Usage Modifier) \n85 04            (GLOBAL) REPORT_ID          0x04 (4) \nA1 00            (MAIN)   COLLECTION         0x00 Physical (Usage=0x000A0004: Page=Ordinal Page, Usage=Instance 4, Type=UM) &lt;-- Warning: USAGE type should be CP (Physical)\n05 09              (GLOBAL) USAGE_PAGE         0x0009 Button Page \n19 01              (LOCAL)  USAGE_MINIMUM      0x00090001 Button 1 Primary/trigger (MULTI=Selector, On/Off, Momentary, or One Shot) \n29 03              (LOCAL)  USAGE_MAXIMUM      0x00090003 Button 3 Tertiary (MULTI=Selector, On/Off, Momentary, or One Shot) \n15 00              (GLOBAL) LOGICAL_MINIMUM    0x00 (0) \n25 01              (GLOBAL) LOGICAL_MAXIMUM    0x01 (1) \n75 01              (GLOBAL) REPORT_SIZE        0x01 (1) Number of bits per field \n95 03              (GLOBAL) REPORT_COUNT       0x03 (3) Number of fields \n81 02              (MAIN)   INPUT              0x00000002 (3 fields x 1 bit) 0=Data 1=Variable 0=Absolute 0=NoWrap 0=Linear 0=PrefState 0=NoNull 0=NonVolatile 0=Bitmap \n95 05              (GLOBAL) REPORT_COUNT       0x05 (5) Number of fields \n81 03              (MAIN)   INPUT              0x00000003 (5 fields x 1 bit) 1=Constant 1=Variable 0=Absolute 0=NoWrap 0=Linear 0=PrefState 0=NoNull 0=NonVolatile 0=Bitmap \n05 01              (GLOBAL) USAGE_PAGE         0x0001 Generic Desktop Page \n09 30              (LOCAL)  USAGE              0x00010030 X (DV=Dynamic Value) \n09 31              (LOCAL)  USAGE              0x00010031 Y (DV=Dynamic Value) \n15 81              (GLOBAL) LOGICAL_MINIMUM    0x81 (-127) \n25 7F              (GLOBAL) LOGICAL_MAXIMUM    0x7F (127) \n75 08              (GLOBAL) REPORT_SIZE        0x08 (8) Number of bits per field \n95 02              (GLOBAL) REPORT_COUNT       0x02 (2) Number of fields \n81 06              (MAIN)   INPUT              0x00000006 (2 fields x 8 bits) 0=Data 1=Variable 1=Relative 0=NoWrap 0=Linear 0=PrefState 0=NoNull 0=NonVolatile 0=Bitmap \nC0               (MAIN)   END_COLLECTION     Physical\nC0             (MAIN)   END_COLLECTION     Logical\nC0           (MAIN)   END_COLLECTION     Application\n</code></pre>\n\n<p>This should correspond to C declarations like:</p>\n\n<pre><code>//--------------------------------------------------------------------------------\n// Vendor-defined featureReport 0F (Device &lt;-&gt; Host)\n//--------------------------------------------------------------------------------\n\ntypedef struct\n{\n  uint8_t  reportId;                                 // Report ID = 0x0F (15)\n  uint8_t  VEN_VendorDefined[9];                     // Value = 0 to 255\n} featureReport0F_t;\n\n\n//--------------------------------------------------------------------------------\n// Vendor-defined inputReport 0F (Device --&gt; Host)\n//--------------------------------------------------------------------------------\n\ntypedef struct\n{\n  uint8_t  reportId;                                 // Report ID = 0x0F (15)\n  uint8_t  VEN_VendorDefined;                        // Value = 0 to 255\n} inputReport0F_t;\n\n\n//--------------------------------------------------------------------------------\n// Vendor-defined outputReport 0F (Device &lt;-- Host)\n//--------------------------------------------------------------------------------\n\ntypedef struct\n{\n  uint8_t  reportId;                                 // Report ID = 0x0F (15)\n  uint8_t  VEN_VendorDefined[7];                     // Value = 0 to 255\n} outputReport0F_t;\n\n\n//--------------------------------------------------------------------------------\n// Button Page inputReport 01 (Device --&gt; Host)\n//--------------------------------------------------------------------------------\n\ntypedef struct\n{\n  uint8_t  reportId;                                 // Report ID = 0x01 (1)\n                                                     // Collection: Mouse Pointer Instance1\n  uint8_t  BTN_MousePointerInstance1Button1 : 1;     // Usage 0x00090001: Button 1 Primary/trigger, Value = 0 to 1\n  uint8_t  BTN_MousePointerInstance1Button2 : 1;     // Usage 0x00090002: Button 2 Secondary, Value = 0 to 1\n  uint8_t  BTN_MousePointerInstance1Button3 : 1;     // Usage 0x00090003: Button 3 Tertiary, Value = 0 to 1\n  uint8_t  : 1;                                      // Pad\n  uint8_t  : 1;                                      // Pad\n  uint8_t  : 1;                                      // Pad\n  uint8_t  : 1;                                      // Pad\n  uint8_t  : 1;                                      // Pad\n  int8_t   GD_MousePointerInstance1X;                // Usage 0x00010030: X, Value = -127 to 127\n  int8_t   GD_MousePointerInstance1Y;                // Usage 0x00010031: Y, Value = -127 to 127\n} inputReport01_t;\n\n\n//--------------------------------------------------------------------------------\n// Button Page inputReport 02 (Device --&gt; Host)\n//--------------------------------------------------------------------------------\n\ntypedef struct\n{\n  uint8_t  reportId;                                 // Report ID = 0x02 (2)\n                                                     // Collection: Mouse Pointer Instance2\n  uint8_t  BTN_MousePointerInstance2Button1 : 1;     // Usage 0x00090001: Button 1 Primary/trigger, Value = 0 to 1\n  uint8_t  BTN_MousePointerInstance2Button2 : 1;     // Usage 0x00090002: Button 2 Secondary, Value = 0 to 1\n  uint8_t  BTN_MousePointerInstance2Button3 : 1;     // Usage 0x00090003: Button 3 Tertiary, Value = 0 to 1\n  uint8_t  : 1;                                      // Pad\n  uint8_t  : 1;                                      // Pad\n  uint8_t  : 1;                                      // Pad\n  uint8_t  : 1;                                      // Pad\n  uint8_t  : 1;                                      // Pad\n  int8_t   GD_MousePointerInstance2X;                // Usage 0x00010030: X, Value = -127 to 127\n  int8_t   GD_MousePointerInstance2Y;                // Usage 0x00010031: Y, Value = -127 to 127\n} inputReport02_t;\n\n\n//--------------------------------------------------------------------------------\n// Button Page inputReport 03 (Device --&gt; Host)\n//--------------------------------------------------------------------------------\n\ntypedef struct\n{\n  uint8_t  reportId;                                 // Report ID = 0x03 (3)\n                                                     // Collection: Mouse Pointer Instance3\n  uint8_t  BTN_MousePointerInstance3Button1 : 1;     // Usage 0x00090001: Button 1 Primary/trigger, Value = 0 to 1\n  uint8_t  BTN_MousePointerInstance3Button2 : 1;     // Usage 0x00090002: Button 2 Secondary, Value = 0 to 1\n  uint8_t  BTN_MousePointerInstance3Button3 : 1;     // Usage 0x00090003: Button 3 Tertiary, Value = 0 to 1\n  uint8_t  : 1;                                      // Pad\n  uint8_t  : 1;                                      // Pad\n  uint8_t  : 1;                                      // Pad\n  uint8_t  : 1;                                      // Pad\n  uint8_t  : 1;                                      // Pad\n  int8_t   GD_MousePointerInstance3X;                // Usage 0x00010030: X, Value = -127 to 127\n  int8_t   GD_MousePointerInstance3Y;                // Usage 0x00010031: Y, Value = -127 to 127\n} inputReport03_t;\n\n\n//--------------------------------------------------------------------------------\n// Button Page inputReport 04 (Device --&gt; Host)\n//--------------------------------------------------------------------------------\n\ntypedef struct\n{\n  uint8_t  reportId;                                 // Report ID = 0x04 (4)\n                                                     // Collection: Mouse Pointer Instance4\n  uint8_t  BTN_MousePointerInstance4Button1 : 1;     // Usage 0x00090001: Button 1 Primary/trigger, Value = 0 to 1\n  uint8_t  BTN_MousePointerInstance4Button2 : 1;     // Usage 0x00090002: Button 2 Secondary, Value = 0 to 1\n  uint8_t  BTN_MousePointerInstance4Button3 : 1;     // Usage 0x00090003: Button 3 Tertiary, Value = 0 to 1\n  uint8_t  : 1;                                      // Pad\n  uint8_t  : 1;                                      // Pad\n  uint8_t  : 1;                                      // Pad\n  uint8_t  : 1;                                      // Pad\n  uint8_t  : 1;                                      // Pad\n  int8_t   GD_MousePointerInstance4X;                // Usage 0x00010030: X, Value = -127 to 127\n  int8_t   GD_MousePointerInstance4Y;                // Usage 0x00010031: Y, Value = -127 to 127\n} inputReport04_t;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 3052555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cb40b8a172ec3807eaa38f1ac2ae357?s=128&d=identicon&r=PG&f=1", "display_name": "starman", "link": "https://stackoverflow.com/users/3052555/starman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 506, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1431390766, "creation_date": 1429713276, "last_edit_date": 1431390766, "question_id": 29800881, "link": "https://stackoverflow.com/questions/29800881/incorrect-report-descriptor-and-report-data-structure", "title": "Incorrect report descriptor and report data structure?", "body": "<p>I am working on a HID report descriptor which I am using by modifying the sample code here:\n<a href=\"https://code.msdn.microsoft.com/WudfVhidmini-Sample-b304f83a/sourcecode?fileId=42918&amp;pathId=205101617\" rel=\"nofollow\">https://code.msdn.microsoft.com/WudfVhidmini-Sample-b304f83a/sourcecode?fileId=42918&amp;pathId=205101617</a> (the link opens the queue.cpp file which is where most of my read/write code for the driver is and the default hid report descriptor). My updated report descriptor I have so far in my driver is (as of 5/11/2015):</p>\n\n<pre><code>  HID_REPORT_DESCRIPTOR           G_DefaultReportDescriptor[] = {\n0x06, 0x00,0xFF,     // (GLOBAL) USAGE_PAGE         0xFF00 Vendor-defined\n0x09, 0x01,       // (LOCAL)  USAGE              0xFF000001\n0xA1, 0x01,        //(MAIN)   COLLECTION         0x01 Application (Usage=0xFF000001: Page=Vendor-defined, Usage=, Type=)\n0x85, 0x0F,         // (GLOBAL) REPORT_ID          0x0F (15)\n0x09, 0x01,         // (LOCAL)  USAGE              0xFF000001\n0x15, 0x00,        //  (GLOBAL) LOGICAL_MINIMUM    0x00 (0) &lt;-- Redundant: LOGICAL_MINIMUM is already 0\n0x26, 0xFF,0x00,      //  (GLOBAL) LOGICAL_MAXIMUM    0x00FF (255)\n0x75, 0x08,          //(GLOBAL) REPORT_SIZE        0x08 (8) Number of bits per field\n0x96, 0x09, 0x00,        //(GLOBAL) REPORT_COUNT       0x0009 (9) Number of fields\n0xB1, 0x00,         // (MAIN)   FEATURE            0x00000000 (9 fields x 8 bits) 0=Data 0=Array 0=Absolute 0=NoWrap 0=Linear 0=PrefState 0=NoNull 0=NonVolatile 0=Bitmap\n0x09, 0x01,         // (LOCAL)  USAGE              0xFF000001\n0x96, 0x01, 0x00,       // (GLOBAL) REPORT_COUNT       0x0001 (1) Number of fields\n0x81, 0x00,        //  (MAIN)   INPUT              0x00000000 (1 field x 8 bits) 0=Data 0=Array 0=Absolute 0=Ignored 0=Ignored 0=PrefState 0=NoNull\n0x09, 0x01,          //(LOCAL)  USAGE              0xFF000001\n0x96, 0x07, 0x00,       // (GLOBAL) REPORT_COUNT       0x0007 (7) Number of fields\n0x91, 0x00,        //  (MAIN)   OUTPUT             0x00000000 (7 fields x 8 bits) 0=Data 0=Array 0=Absolute 0=NoWrap 0=Linear 0=PrefState 0=NoNull 0=NonVolatile 0=Bitmap\n0xC0,          // (MAIN)   END_COLLECTION     Application\n0x05, 0x01,       // (GLOBAL) USAGE_PAGE         0x0001 Generic Desktop Page\n0x09, 0x02,       // (LOCAL)  USAGE              0x00010002 Mouse (CA=Application Collection)\n0xA1, 0x01,       // (MAIN)   COLLECTION         0x01 Application (Usage=0x00010002: Page=Generic Desktop Page, Usage=Mouse, Type=CA)\n0x09, 0x01,       // (LOCAL)  USAGE              0x00010001 Pointer (CP=Physical Collection)\n0xA1, 0x02,       // (MAIN)   COLLECTION         0x02 Logical (Usage=0x00010001: Page=Generic Desktop Page, Usage=Pointer, Type=CP) &lt;-- Warning: USAGE type should be CL (Logical)\n0x05, 0x0A,       // (GLOBAL) USAGE_PAGE         0x000A Ordinal Page\n0x09, 0x01,       // (LOCAL)  USAGE              0x000A0001 Instance 1 (UM=Usage Modifier)\n0x85, 0x01,       // (GLOBAL) REPORT_ID          0x01 (1)\n0xA1, 0x00,      //  (MAIN)   COLLECTION         0x00 Physical (Usage=0x000A0001: Page=Ordinal Page, Usage=Instance 1, Type=UM) &lt;-- Warning: USAGE type should be CP (Physical)\n0x05, 0x09,      //    (GLOBAL) USAGE_PAGE         0x0009 Button Page\n0x19, 0x01,      // (LOCAL)  USAGE_MINIMUM      0x00090001 Button 1 Primary/trigger (MULTI=Selector, On/Off, Momentary, or One Shot)\n0x29, 0x03,      //  (LOCAL)  USAGE_MAXIMUM      0x00090003 Button 3 Tertiary (MULTI=Selector, On/Off, Momentary, or One Shot)\n0x15, 0x00,     //  (GLOBAL) LOGICAL_MINIMUM    0x00 (0) &lt;-- Redundant: LOGICAL_MINIMUM is already 0\n0x25, 0x01,     //  (GLOBAL) LOGICAL_MAXIMUM    0x01 (1)\n0x75, 0x01,     //   (GLOBAL) REPORT_SIZE        0x01 (1) Number of bits per field\n0x95, 0x03,      //  (GLOBAL) REPORT_COUNT       0x03 (3) Number of fields\n0x81, 0x02,        // (MAIN)   INPUT              0x00000002 (3 fields x 1 bit) 0=Data 1=Variable 0=Absolute 0=NoWrap 0=Linear 0=PrefState 0=NoNull 0=NonVolatile 0=Bitmap\n0x95, 0x05,      //   (GLOBAL)REPORT_COUNT       0x05 (5) Number of fields\n0x81, 0x03,       //   (MAIN)INPUT              0x00000003 (5 fields x 1 bit) 1 = Constant 1 = Variable 0 = Absolute 0 = NoWrap 0 = Linear 0 = PrefState 0 = NoNull 0 = NonVolatile 0 = Bitmap\n0x05, 0x01,       //       (GLOBAL)USAGE_PAGE         0x0001 Generic Desktop Page\n0x09, 0x30,       //       (LOCAL)USAGE              0x00010030 X(DV = Dynamic Value)\n0x09, 0x31,       //       (LOCAL)USAGE              0x00010031 Y(DV = Dynamic Value)\n0x15, 0x81,       //      (GLOBAL)LOGICAL_MINIMUM    0x81 (-127)\n0x25, 0x7F,       //       (GLOBAL)LOGICAL_MAXIMUM    0x7F (127)\n0x75, 0x08,       //       (GLOBAL)REPORT_SIZE        0x08 (8) Number of bits per field\n0x95, 0x02,       //       (GLOBAL)REPORT_COUNT       0x02 (2) Number of fields\n0x81, 0x06,       //       (MAIN)INPUT              0x00000006 (2 fields x 8 bits) 0 = Data 1 = Variable 1 = Relative 0 = NoWrap 0 = Linear 0 = PrefState 0 = NoNull 0 = NonVolatile 0 = Bitmap\n0xC0,  // END_COLLECTION     Physical\n0x05, 0x0A,        //   (GLOBAL)USAGE_PAGE         0x000A Ordinal Page\n0x09, 0x02,         //   (LOCAL)USAGE              0x000A0002 Instance 2 (UM = Usage Modifier)\n0x85, 0x02,        //    (GLOBAL)REPORT_ID          0x02 (2)\n0xA1, 0x00,        //    (MAIN)COLLECTION         0x00 Physical(Usage = 0x000A0002: Page = Ordinal Page, Usage = Instance 2, Type = UM) &lt; --Warning: USAGE type should be CP(Physical)\n0x05, 0x09,         //     (GLOBAL)USAGE_PAGE         0x0009 Button Page\n0x19, 0x01,         //     (LOCAL)USAGE_MINIMUM      0x00090001 Button 1 Primary / trigger(MULTI = Selector, On / Off, Momentary, or One Shot)\n0x29, 0x03,         //     (LOCAL)USAGE_MAXIMUM      0x00090003 Button 3 Tertiary(MULTI = Selector, On / Off, Momentary, or One Shot)\n0x15, 0x00,       //       (GLOBAL)LOGICAL_MINIMUM    0x00 (0)\n0x25, 0x01,       //       (GLOBAL)LOGICAL_MAXIMUM    0x01 (1)\n0x75, 0x01,       //       (GLOBAL)REPORT_SIZE        0x01 (1) Number of bits per field\n0x95, 0x03,       //       (GLOBAL)REPORT_COUNT       0x03 (3) Number of fields\n0x81, 0x02,       //       (MAIN)INPUT              0x00000002 (3 fields x 1 bit) 0 = Data 1 = Variable 0 = Absolute 0 = NoWrap 0 = Linear 0 = PrefState 0 = NoNull 0 = NonVolatile 0 = Bitmap\n0x95, 0x05,       //       (GLOBAL)REPORT_COUNT       0x05 (5) Number of fields\n0x81, 0x03,       //       (MAIN)INPUT              0x00000003 (5 fields x 1 bit) 1 = Constant 1 = Variable 0 = Absolute 0 = NoWrap 0 = Linear 0 = PrefState 0 = NoNull 0 = NonVolatile 0 = Bitmap\n0x05, 0x01,       //       (GLOBAL)USAGE_PAGE         0x0001 Generic Desktop Page\n0x09, 0x30,       //       (LOCAL)USAGE              0x00010030 X(DV = Dynamic Value)\n0x09, 0x31,       //       (LOCAL)USAGE              0x00010031 Y(DV = Dynamic Value)\n0x15, 0x81,       //       (GLOBAL)LOGICAL_MINIMUM    0x81 (-127)\n0x25, 0x7F,       //       (GLOBAL)LOGICAL_MAXIMUM    0x7F (127)\n0x75, 0x08,       //       (GLOBAL)REPORT_SIZE        0x08 (8) Number of bits per field\n0x95, 0x02,       //       (GLOBAL)REPORT_COUNT       0x02 (2) Number of fields\n0x81, 0x06,           //   (MAIN)INPUT              0x00000006 (2 fields x 8 bits) 0 = Data 1 = Variable 1 = Relative 0 = NoWrap 0 = Linear 0 = PrefState 0 = NoNull 0 = NonVolatile 0 = Bitmap\n0xC0,       // END_COLLECTION     Physical\n0x05, 0x0A,         //   (GLOBAL)USAGE_PAGE         0x000A Ordinal Page\n0x09, 0x03,         //   (LOCAL)USAGE              0x000A0003 Instance 3 (UM = Usage Modifier)\n0x85, 0x03,         //   (GLOBAL)REPORT_ID          0x03 (3)\n0xA1, 0x00,           // (MAIN)COLLECTION         0x00 Physical(Usage = 0x000A0003: Page = Ordinal Page, Usage = Instance 3, Type = UM) &lt; --Warning: USAGE type should be CP(Physical)\n0x05, 0x09,           //   (GLOBAL)USAGE_PAGE         0x0009 Button Page\n0x19, 0x01,           //   (LOCAL)USAGE_MINIMUM      0x00090001 Button 1 Primary / trigger(MULTI = Selector, On / Off, Momentary, or One Shot)\n0x29, 0x03,           //   (LOCAL)USAGE_MAXIMUM      0x00090003 Button 3 Tertiary(MULTI = Selector, On / Off, Momentary, or One Shot)\n0x15, 0x00,             // (GLOBAL)LOGICAL_MINIMUM    0x00 (0)\n0x25, 0x01,             // (GLOBAL)LOGICAL_MAXIMUM    0x01 (1)\n0x75, 0x01,             // (GLOBAL)REPORT_SIZE        0x01 (1) Number of bits per field\n0x95, 0x03,             // (GLOBAL)REPORT_COUNT       0x03 (3) Number of fields\n0x81, 0x02,             // (MAIN)INPUT              0x00000002 (3 fields x 1 bit) 0 = Data 1 = Variable 0 = Absolute 0 = NoWrap 0 = Linear 0 = PrefState 0 = NoNull 0 = NonVolatile 0 = Bitmap\n0x95, 0x05,            //  (GLOBAL)REPORT_COUNT       0x05 (5) Number of fields\n0x81, 0x03,            //  (MAIN)INPUT              0x00000003 (5 fields x 1 bit) 1 = Constant 1 = Variable 0 = Absolute 0 = NoWrap 0 = Linear 0 = PrefState 0 = NoNull 0 = NonVolatile 0 = Bitmap\n0x05, 0x01,            //  (GLOBAL)USAGE_PAGE         0x0001 Generic Desktop Page\n0x09, 0x30,            //  (LOCAL)USAGE              0x00010030 X(DV = Dynamic Value)\n0x09, 0x31,            //  (LOCAL)USAGE              0x00010031 Y(DV = Dynamic Value)\n0x15, 0x81,            //  (GLOBAL)LOGICAL_MINIMUM    0x81 (-127)\n0x25, 0x7F,            //  (GLOBAL)LOGICAL_MAXIMUM    0x7F (127)\n0x75, 0x08,            //  (GLOBAL)REPORT_SIZE        0x08 (8) Number of bits per field\n0x95, 0x02,           //  (GLOBAL)REPORT_COUNT       0x02 (2) Number of fields\n0x81, 0x06,           //   (MAIN)INPUT              0x00000006 (2 fields x 8 bits) 0 = Data 1 = Variable 1 = Relative 0 = NoWrap 0 = Linear 0 = PrefState 0 = NoNull 0 = NonVolatile 0 = Bitmap\n0xC0,        //   END_COLLECTION     Physical\n0x05, 0x0A,           // (GLOBAL)USAGE_PAGE         0x000A Ordinal Page\n0x09, 0x04,          //  (LOCAL)USAGE              0x000A0004 Instance 4 (UM = Usage Modifier)\n0x85, 0x04,           // (GLOBAL)REPORT_ID          0x04 (4)\n0xA1, 0x00,           // (MAIN)COLLECTION         0x00 Physical(Usage = 0x000A0004: Page = Ordinal Page, Usage = Instance 4, Type = UM) &lt; --Warning: USAGE type should be CP(Physical)\n0x05, 0x09,             // (GLOBAL)USAGE_PAGE         0x0009 Button Page\n0x19, 0x01,            //  (LOCAL)USAGE_MINIMUM      0x00090001 Button 1 Primary / trigger(MULTI = Selector, On / Off, Momentary, or One Shot)\n0x29, 0x03,            //  (LOCAL)USAGE_MAXIMUM      0x00090003 Button 3 Tertiary(MULTI = Selector, On / Off, Momentary, or One Shot)\n0x15, 0x00,            //  (GLOBAL)LOGICAL_MINIMUM    0x00 (0)\n0x25, 0x01,            //  (GLOBAL)LOGICAL_MAXIMUM    0x01 (1)\n0x75, 0x01,            //  (GLOBAL)REPORT_SIZE        0x01 (1) Number of bits per field\n0x95, 0x03,             // (GLOBAL)REPORT_COUNT       0x03 (3) Number of fields\n0x81, 0x02,             // (MAIN)INPUT              0x00000002 (3 fields x 1 bit) 0 = Data 1 = Variable 0 = Absolute 0 = NoWrap 0 = Linear 0 = PrefState 0 = NoNull 0 = NonVolatile 0 = Bitmap\n0x95, 0x05,             // (GLOBAL)REPORT_COUNT       0x05 (5) Number of fields\n0x81, 0x03,            //  (MAIN)INPUT              0x00000003 (5 fields x 1 bit) 1 = Constant 1 = Variable 0 = Absolute 0 = NoWrap 0 = Linear 0 = PrefState 0 = NoNull 0 = NonVolatile 0 = Bitmap\n0x05, 0x01,            //  (GLOBAL)USAGE_PAGE         0x0001 Generic Desktop Page\n0x09, 0x30,            //  (LOCAL)USAGE              0x00010030 X(DV = Dynamic Value)\n0x09, 0x31,            //  (LOCAL)USAGE              0x00010031 Y(DV = Dynamic Value)\n0x15, 0x81,            //  (GLOBAL)LOGICAL_MINIMUM    0x81 (-127)\n0x25, 0x7F,            //  (GLOBAL)LOGICAL_MAXIMUM    0x7F (127)\n0x75, 0x08,            //  (GLOBAL)REPORT_SIZE        0x08 (8) Number of bits per field\n0x95, 0x02,           //   (GLOBAL)REPORT_COUNT       0x02 (2) Number of fields\n0x81, 0x06,           //   (MAIN)INPUT              0x00000006 (2 fields x 8 bits) 0 = Data 1 = Variable 1 = Relative 0 = NoWrap 0 = Linear 0 = PrefState 0 = NoNull 0 = NonVolatile 0 = Bitmap\n0xC0,        //   END_COLLECTION     Physical\n0xC0,  // END_COLLECTION     Logical\n0xC0,  // END_COLLECTION     Application\n};\n</code></pre>\n\n<p>Here's the default report structure that came with the sample I am currently using (until I figure what I can change in it):</p>\n\n<pre><code>typedef struct _HIDMINI_INPUT_REPORT {\n\n    UCHAR ReportId;   \n\n    UCHAR Data; \n\n} HIDMINI_INPUT_REPORT, *PHIDMINI_INPUT_REPORT;\n\n//\n// output to device from system\n//\ntypedef struct _HIDMINI_OUTPUT_REPORT {\n\n    UCHAR ReportId;   \n\n    UCHAR Data; \n\n    USHORT Pad1;\n\n    ULONG Pad2;\n\n} HIDMINI_OUTPUT_REPORT, *PHIDMINI_OUTPUT_REPORT;\n</code></pre>\n\n<p>My problem is 4 fold:</p>\n\n<ol>\n<li><p>I need to pass data down from the control collection (the first collection before start of mouse devices comment is reached) for 4 mouse devices  down into the mouse collections. How would I write a report descriptor to do this or do I need code to also do this? </p></li>\n<li><p>How would my report structure code look for reading/writing to the control structure from Windows.Devices.HumanInterfaceDevice?</p></li>\n<li><p>Should I send each report descriptor like vmulti does except all in one loop?</p></li>\n<li>How much of the above would be necessary if I was wanting to simulate/emulate mouse devices for multi-point mouse SDK or another multi mouse application? (sending input to the multi-mouse application)</li>\n</ol>\n\n<p>Note: I plan on using the <a href=\"http://%22https://msdn.microsoft.com/en-us/library/windows/apps/windows.devices.humaninterfacedevice.aspx%22\" rel=\"nofollow\" title=\"Windows.Device.HumanInterfaceDevice\">https://msdn.microsoft.com/en-us/library/windows/apps/windows.devices.humaninterfacedevice.aspx</a> class functions to read/write from the 4 mouse devices defined above and that is why I am going to all the trouble to figure out this stuff. But the class on msdn clearly states I cannot write to the mouse devices directly. If it were so, I would have not been writing here. <strong>In-case the question comes up: Yes, this is about injecting input into the mouse collections so I can get them to work with multi-mouse applications.</strong> The above link to WudfVhidmin-Sample is not my code but the sample I am using to write my driver.</p>\n\n<p>If I take out the part before the first end collection comment it creates three mouse devices but that's it.</p>\n"}, {"tags": ["c", "delphi", "types", "parameter-passing"], "comments": [{"owner": {"reputation": 58446, "user_id": 84704, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/aEXJK.png?s=128&g=1", "display_name": "Warren  P", "link": "https://stackoverflow.com/users/84704/warren-p"}, "edited": false, "score": 0, "creation_date": 1429724120, "post_id": 29800790, "comment_id": 47737722, "body": "This kind of thing gives me the willies. Whatever job the whole thing you&#39;re translating does, probably should be re-implemented in an object oriented way instead of trying to translate your C code directly.  Why would you want to keep doing all this voodoo pointer math if you don&#39;t have to? You really love the way C lets you shoot yourself in the foot in so few lines of code? Maybe you don&#39;t even have to translate this entire thing, just transliterate by using a different pattern, a different data structure, use a real data type or object instead of a low level memory buffer hack."}, {"owner": {"reputation": 69, "user_id": 4757767, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2VhmzlxORpw/AAAAAAAAAAI/AAAAAAAAN-U/dIeyte9EcDk/photo.jpg?sz=128", "display_name": "Stefan Badenhorst", "link": "https://stackoverflow.com/users/4757767/stefan-badenhorst"}, "reply_to_user": {"reputation": 58446, "user_id": 84704, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/aEXJK.png?s=128&g=1", "display_name": "Warren  P", "link": "https://stackoverflow.com/users/84704/warren-p"}, "edited": false, "score": 3, "creation_date": 1429732087, "post_id": 29800790, "comment_id": 47742894, "body": "Dear Warren.  The code I&#39;m translating is from a educational source that teaches low level voodoo memory buffer access specifically. The author states, that while he knows how to use higher order languages, this low level stuff is a dying art and he is teaching it. Later we will even do some assembly code. So while I know you mean well with your comment, in this case it is not applicable."}, {"owner": {"reputation": 58446, "user_id": 84704, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/aEXJK.png?s=128&g=1", "display_name": "Warren  P", "link": "https://stackoverflow.com/users/84704/warren-p"}, "edited": false, "score": 0, "creation_date": 1430236104, "post_id": 29800790, "comment_id": 47969664, "body": "Okay. Glad you are using your powers for good instead of for evil."}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 4757767, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2VhmzlxORpw/AAAAAAAAAAI/AAAAAAAAN-U/dIeyte9EcDk/photo.jpg?sz=128", "display_name": "Stefan Badenhorst", "link": "https://stackoverflow.com/users/4757767/stefan-badenhorst"}, "edited": false, "score": 0, "creation_date": 1429717109, "post_id": 29801214, "comment_id": 47732828, "body": "You are probably right. Do you have any idea how sizeOf works? Since there is not actual declaration I can find in System.pas, I&#39;m curious on how it would be declared."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "reply_to_user": {"reputation": 69, "user_id": 4757767, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2VhmzlxORpw/AAAAAAAAAAI/AAAAAAAAN-U/dIeyte9EcDk/photo.jpg?sz=128", "display_name": "Stefan Badenhorst", "link": "https://stackoverflow.com/users/4757767/stefan-badenhorst"}, "edited": false, "score": 0, "creation_date": 1429717286, "post_id": 29801214, "comment_id": 47732961, "body": "It&#39;s a compiler intrinsic, so there is no source for the function because it&#39;s not evaluated at runtime. The compiler knows what the type is, knows its size, and can evaluate the function at compile time. So <code>SizeOf(T)</code> is a constant."}], "tags": [], "owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "is_accepted": false, "score": 5, "last_activity_date": 1429776764, "last_edit_date": 1429776764, "creation_date": 1429714001, "answer_id": 29801214, "question_id": 29800790, "link": "https://stackoverflow.com/questions/29800790/delphi-how-to-pass-a-type-as-a-parameter/29801214#29801214", "title": "Delphi - How to pass a &#39;Type&#39; as a parameter", "body": "<p>The C code isn't passing a type to the function. The pre-processor is expanding the macro and computing the size. You can see that from the prototype of the function:</p>\n\n<pre><code>void *PushSize_(memory_arena *Arena, memory_index Size)\n</code></pre>\n\n<p>Since you don't have macros in Delphi, you cannot arrange a direct translation. Personally, if it were me I would not attempt to match the C code exactly. I'd pass the size and leave it to the caller to use <code>SizeOf</code>. I don't think that's a terrible burden. It still leaves you with something very close to a literal translation \u2013 all you are missing is the convenience macros.</p>\n\n<p>If you wanted to use generics, you could do so, but it would require you to use a static method. For instance:</p>\n\n<pre><code>type\n  TMyClass = class\n    class function PushSize(Arena: Pmemory_arena; Size: memory_index): Pointer; static;\n    class function PushStruct&lt;T&gt;(Arena: Pmemory_arena): Pointer; static;\n  end;\n....\nclass function TMyClass.PushSize(Arena: Pmemory_arena; Size: memory_index): Pointer;\nbegin\n  Result := ....;\nend;\n\nclass function TMyClass.PushStruct&lt;T&gt;(Arena: Pmemory_arena): Pointer;\nbegin\n  Result := PushSize(Arena, SizeOf(T));\nend;\n</code></pre>\n\n<p>If you want to return a typed pointer that would look like this:</p>\n\n<pre><code>type\n  TMyClass&lt;T&gt; = class\n    type P = ^ T;\n    class function PushSize(Arena: Pmemory_arena; Size: memory_index): Pointer; static;\n    class function PushStruct(Arena: Pmemory_arena): P; static;\n  end;\n....\nclass function TMyClass&lt;T&gt;.PushSize(Arena: Pmemory_arena; Size: memory_index): Pointer;\nbegin\n  Result := ....;\nend;\n\nclass function TMyClass&lt;T&gt;.PushStruct(Arena: Pmemory_arena): P;\nbegin\n  Result := PushSize(Arena, SizeOf(T));\nend;\n</code></pre>\n\n<p>Obviously you'd know what name to use instead of <code>TMyClass</code>!</p>\n\n<p>I'm not convinced that generics are a good fit here because I guess you are wanting as literal a translation as possible. I would not choose to use generics in this scenario.</p>\n"}, {"comments": [{"owner": {"reputation": 69, "user_id": 4757767, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2VhmzlxORpw/AAAAAAAAAAI/AAAAAAAAN-U/dIeyte9EcDk/photo.jpg?sz=128", "display_name": "Stefan Badenhorst", "link": "https://stackoverflow.com/users/4757767/stefan-badenhorst"}, "edited": false, "score": 0, "creation_date": 1429724168, "post_id": 29802762, "comment_id": 47737755, "body": "I have thought about that. It will be even better to use function overloading so you can keep using the same function name."}, {"owner": {"reputation": 36157, "user_id": 11480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9182f0122ecacfe240932552fe8ab70?s=128&d=identicon&r=PG", "display_name": "Ondrej Kelle", "link": "https://stackoverflow.com/users/11480/ondrej-kelle"}, "reply_to_user": {"reputation": 69, "user_id": 4757767, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2VhmzlxORpw/AAAAAAAAAAI/AAAAAAAAN-U/dIeyte9EcDk/photo.jpg?sz=128", "display_name": "Stefan Badenhorst", "link": "https://stackoverflow.com/users/4757767/stefan-badenhorst"}, "edited": false, "score": 0, "creation_date": 1429853669, "post_id": 29802762, "comment_id": 47805217, "body": "Good idea but then you have to use procedures with an out parameter because overloaded functions may not differ by return type only (that wouldn&#39;t compile). So you could have procedures like: <code>procedure PushStruct(Arena: PMemoryArena; out Struct: PMyRecord1); overload; procedure PushStruct(Arena: PMemoryArena; out Struct: PMyRecord2); overload; </code> etc."}, {"owner": {"reputation": 69, "user_id": 4757767, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2VhmzlxORpw/AAAAAAAAAAI/AAAAAAAAN-U/dIeyte9EcDk/photo.jpg?sz=128", "display_name": "Stefan Badenhorst", "link": "https://stackoverflow.com/users/4757767/stefan-badenhorst"}, "edited": false, "score": 0, "creation_date": 1429948808, "post_id": 29802762, "comment_id": 47850608, "body": "Yes, that is how I ended up implementing it."}], "tags": [], "owner": {"reputation": 36157, "user_id": 11480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9182f0122ecacfe240932552fe8ab70?s=128&d=identicon&r=PG", "display_name": "Ondrej Kelle", "link": "https://stackoverflow.com/users/11480/ondrej-kelle"}, "is_accepted": false, "score": 2, "last_activity_date": 1429717845, "creation_date": 1429717845, "answer_id": 29802762, "question_id": 29800790, "link": "https://stackoverflow.com/questions/29800790/delphi-how-to-pass-a-type-as-a-parameter/29802762#29802762", "title": "Delphi - How to pass a &#39;Type&#39; as a parameter", "body": "<p>You could \"expand the macros\" by simply declaring your own Push* funtions for each record type as needed:</p>\n\n<pre><code>type\n  // just guessing here...\n  PMemoryArena = ^TMemoryArena;\n  TMemoryArena = record\n    Base: Pointer;\n    Used: Cardinal;\n    Size: Cardinal;\n  end;\n  TMemoryIndex = Cardinal;\n  // 1st example record type\n  PMyRecord1 = ^TMyRecord1;\n  TMyRecord1 = record\n    I1: Integer;\n    I2: Integer;\n  end;\n  // 2nd example record type\n  PMyRecord2 = ^TMyRecord2;\n  TMyRecord2 = record\n    D1: Double;\n    D2: Double;\n  end;\n\nfunction PushSize_(Arena: PMemoryArena; Size: TMemoryIndex): Pointer; inline;\nbegin\n  Assert(Arena^.Used + Size &lt;= Arena^.Size);\n  Result := Pointer(NativeUInt(Arena^.Base) + Arena^.Used);\n  Inc(Arena^.Used, Size);\nend;\n\nfunction PushMyRecord1(Arena: PMemoryArena): PMyRecord1;\nbegin\n  Result := PMyRecord1(PushSize_(Arena, SizeOf(TMyRecord1)));\nend;\n\nfunction PushMyRecord2(Arena: PMemoryArena): PMyRecord2;\nbegin\n  Result := PMyRecord2(PushSize_(Arena, SizeOf(TMyRecord2)));\nend;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1429814524, "post_id": 29820723, "comment_id": 47790071, "body": "Well, if you look closely, the asker wants to call with different values of the size. Also, you know that sizeof(Arena) is just the size of a pointer?"}, {"owner": {"reputation": 5601, "user_id": 4796610, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cafea561ed0d577d23d6f0d18298e9ab?s=128&d=identicon&r=PG&f=1", "display_name": "Dsm", "link": "https://stackoverflow.com/users/4796610/dsm"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1430832938, "post_id": 29820723, "comment_id": 48223540, "body": "Yes, David - my mistake."}], "tags": [], "owner": {"reputation": 5601, "user_id": 4796610, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cafea561ed0d577d23d6f0d18298e9ab?s=128&d=identicon&r=PG&f=1", "display_name": "Dsm", "link": "https://stackoverflow.com/users/4796610/dsm"}, "is_accepted": false, "score": 0, "last_activity_date": 1429784868, "creation_date": 1429784868, "answer_id": 29820723, "question_id": 29800790, "link": "https://stackoverflow.com/questions/29800790/delphi-how-to-pass-a-type-as-a-parameter/29820723#29820723", "title": "Delphi - How to pass a &#39;Type&#39; as a parameter", "body": "<p>It does seem kind of unnecessary.</p>\n\n<p>why not, for example</p>\n\n<pre><code>function PushStruct(Arena : Pmemory_arena) : pointer;\nbegin \n    result := PushSize_(Arena, sizeof( Arena ));\nend;\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 4757767, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2VhmzlxORpw/AAAAAAAAAAI/AAAAAAAAN-U/dIeyte9EcDk/photo.jpg?sz=128", "display_name": "Stefan Badenhorst", "link": "https://stackoverflow.com/users/4757767/stefan-badenhorst"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1095, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1429784868, "creation_date": 1429713045, "question_id": 29800790, "link": "https://stackoverflow.com/questions/29800790/delphi-how-to-pass-a-type-as-a-parameter", "title": "Delphi - How to pass a &#39;Type&#39; as a parameter", "body": "<p>I would like to know if it is possible to pass a declared type (in this case a record) to my function. I would not even ask if it was not for the <code>SizeOf()</code> function, because it can take a type as a parameter.</p>\n\n<p>I'm translating code from C and I would like to keep it as close to the original as possible.\nThe C program declares PushArray and PushStruct as macros. Since Delphi does not have macro support, I'm trying to turn them into functions.</p>\n\n<p>I've googled this a bit and it seems that I could possible use generic types.\nLike <code>function PushStruct&lt;T&gt;(Arena : Pmemory_arena; dtype : &lt;T&gt;)</code> but you can only use this in an OOP type application.</p>\n\n<pre><code>function PushSize_(Arena : Pmemory_arena; Size : memory_index) : pointer;\nbegin\n    Assert((Arena^.Used + Size) &lt;= Arena^.Size);\n    Result := Arena^.Base + Arena^.Used;\n    Arena^.Used := Arena^.Used + Size;\nend;\n\nfunction PushStruct(Arena : Pmemory_arena; dtype : ?) : pointer;\nbegin \n    result := PushSize_(Arena, sizeof(dtype));\nend;\n\nfunction PushArray(Arena : Pmemory_arena; Count: uint32; dtype : ?) : pointer;\nbegin\n    result := PushSize_(Arena, (Count)*sizeof(dtype))\nend;\n</code></pre>\n\n<p>Here is the original C code:</p>\n\n<pre><code>#define PushStruct(Arena, type) (type *)PushSize_(Arena, sizeof(type))\n#define PushArray(Arena, Count, type) (type *)PushSize_(Arena, (Count)*sizeof(type))\nvoid *\nPushSize_(memory_arena *Arena, memory_index Size)\n{\n    Assert((Arena-&gt;Used + Size) &lt;= Arena-&gt;Size);\n    void *Result = Arena-&gt;Base + Arena-&gt;Used;\n    Arena-&gt;Used += Size;\n\n    return(Result);\n}\n</code></pre>\n"}, {"tags": ["c", "null", "dynamic-memory-allocation", "calloc"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1429712790, "post_id": 29800636, "comment_id": 47729267, "body": "<code>NULL</code> might not <code>0</code>(all bits are 0) as a representation."}, {"owner": {"reputation": 253206, "user_id": 12960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53d539b59c19087182f0b1c53bb52de?s=128&d=identicon&r=PG", "display_name": "Brian Agnew", "link": "https://stackoverflow.com/users/12960/brian-agnew"}, "edited": false, "score": 0, "creation_date": 1429712920, "post_id": 29800636, "comment_id": 47729406, "body": "Some interesting issues with implementation here - <a href=\"http://locklessinc.com/articles/calloc/\" rel=\"nofollow noreferrer\">locklessinc.com/articles/calloc</a>"}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "reply_to_user": {"reputation": 253206, "user_id": 12960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53d539b59c19087182f0b1c53bb52de?s=128&d=identicon&r=PG", "display_name": "Brian Agnew", "link": "https://stackoverflow.com/users/12960/brian-agnew"}, "edited": false, "score": 0, "creation_date": 1429713727, "post_id": 29800636, "comment_id": 47730178, "body": "@BrianAgnew Why doesn&#39;t OP in the article simply check for overflow with: <code>n &gt; SIZE_MAX&#47;size</code>"}, {"owner": {"reputation": 253206, "user_id": 12960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53d539b59c19087182f0b1c53bb52de?s=128&d=identicon&r=PG", "display_name": "Brian Agnew", "link": "https://stackoverflow.com/users/12960/brian-agnew"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1429714180, "post_id": 29800636, "comment_id": 47730592, "body": "@2501 - I don&#39;t know. Perhaps they&#39;re simply being concise for the purposes of the article"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1429716462, "post_id": 29800636, "comment_id": 47732356, "body": "What &quot;cells&quot;? The memory allocated <code>malloc</code> and <code>calloc</code> can be used to store objects of any type. Are you assuming the allocated space will be used to store pointer values?"}], "answers": [{"tags": [], "owner": {"reputation": 200780, "user_id": 116908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54d38793d7a407446999b33b81d607fd?s=128&d=identicon&r=PG", "display_name": "Carl Norum", "link": "https://stackoverflow.com/users/116908/carl-norum"}, "is_accepted": true, "score": 4, "last_activity_date": 1429712784, "creation_date": 1429712784, "answer_id": 29800695, "question_id": 29800636, "link": "https://stackoverflow.com/questions/29800636/calloc-and-null/29800695#29800695", "title": "calloc() and NULL", "body": "<p>No, they are not <em>always</em> equivalent, but on most popular machines you'll be fine. <code>calloc</code> writes a bit pattern of all-zeros to the allocated memory, but the null pointer value might not be all-bits-zero on some machines (or even just for some types on some machines).</p>\n\n<p>Check out the <a href=\"http://c-faq.com/~scs/cgi-bin/faqcat.cgi?sec=null\" rel=\"nofollow\">Null Pointers</a> section of the C FAQ for lots and lots of information.</p>\n"}, {"tags": [], "owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "is_accepted": false, "score": 2, "last_activity_date": 1429712805, "creation_date": 1429712805, "answer_id": 29800701, "question_id": 29800636, "link": "https://stackoverflow.com/questions/29800636/calloc-and-null/29800701#29800701", "title": "calloc() and NULL", "body": "<p>NULL isn't guaranteed to have all bits set to 0, even thought it always compares equal to the integer constant 0.</p>\n\n<p>Calloc will set all of the bits to 0 the same as a memset call would. It is permitted that the resulting value(s) will not compare equal to NULL.</p>\n\n<p>Therefore they are not equivalent.</p>\n"}], "owner": {"reputation": 920, "user_id": 4819884, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5b96c68654d5ecce5ace521d7371fec5?s=128&d=identicon&r=PG&f=1", "display_name": "yonyon100", "link": "https://stackoverflow.com/users/4819884/yonyon100"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2998, "favorite_count": 0, "accepted_answer_id": 29800695, "answer_count": 2, "score": 5, "last_activity_date": 1429712805, "creation_date": 1429712657, "question_id": 29800636, "link": "https://stackoverflow.com/questions/29800636/calloc-and-null", "title": "calloc() and NULL", "body": "<p>I know that calloc allocates memory and writes zeroes to each cell, so my question is:\nis there a difference between using calloc or using malloc and running over the cells writing NULL to them? Are the zeroes of calloc equivalent to NULL?</p>\n"}, {"tags": ["c", "pointers", "void-pointers"], "comments": [{"owner": {"reputation": 2532, "user_id": 2139094, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7b7f096622f36595ba50f9d65a39508a?s=128&d=identicon&r=PG", "display_name": "mjs", "link": "https://stackoverflow.com/users/2139094/mjs"}, "edited": false, "score": 4, "creation_date": 1429712480, "post_id": 29800256, "comment_id": 47728989, "body": "Umm.. isn&#39;t that what void* is for?"}, {"owner": {"reputation": 23294, "user_id": 6345, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1f5ce0fac6a8d23e6dced87ab200e669?s=128&d=identicon&r=PG", "display_name": "Johann Gerell", "link": "https://stackoverflow.com/users/6345/johann-gerell"}, "reply_to_user": {"reputation": 2532, "user_id": 2139094, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7b7f096622f36595ba50f9d65a39508a?s=128&d=identicon&r=PG", "display_name": "mjs", "link": "https://stackoverflow.com/users/2139094/mjs"}, "edited": false, "score": 1, "creation_date": 1429712744, "post_id": 29800256, "comment_id": 47729230, "body": "I don&#39;t want clients of this struct to ever think that the <i>pointee</i> value is of any interest whatsoever, and by making the field an <code>intptr_t</code> or <code>uintptr_t</code> I hope to make it clear that it&#39;s the <i>pointer</i> value itself that is interesting. Please let me know if I&#39;m barking up the wrong tree in reasoning like that :-)"}, {"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 2, "creation_date": 1429713735, "post_id": 29800256, "comment_id": 47730187, "body": "That&#39;s your interpretation: others might not even know what <code>intptr_t</code> is for. I&#39;d use a <code>void*</code> and a <i>comment</i>, to point out you only care about the memory address. Something like: <code>void *address; &#47;* We just care about the memory address *&#47;</code>."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1429715435, "post_id": 29800256, "comment_id": 47731546, "body": "@JohannGerell: As mjs says, that&#39;s exactly what <code>void*</code> is for. The integer types <code>intptr_t</code> and <code>uintptr_t</code> aren&#39;t even guaranteed to exist."}], "answers": [{"comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1429715626, "post_id": 29800314, "comment_id": 47731694, "body": "I worked on a Cray T90 running Unicos. <code>long*</code> and <code>char*</code> were the same size (64 bits), but <code>char*</code> used the high-order 3 bits to store a byte offset, since machine addresses pointed to 64-bit words (this was all managed in software). Was the older Y-MP different?"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1429715734, "post_id": 29800314, "comment_id": 47731768, "body": "I forgot the details, but casting (I forgot in what direction) <code>(char*)</code> to/from <code>(long*)</code> was an issue..."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 2, "creation_date": 1429716320, "post_id": 29800314, "comment_id": 47732248, "body": "On the T90, integer and pointer conversions just copied the bits. If a <code>char*</code> pointer has a non-zero offset, converting it to <code>long*</code> would yield an invalid pointer, since the 3 high-order bits would be part of the address (and the actual address space wasn&#39;t nearly that big). I once saw some code that computed the difference between two pointers by first converting them to integers; I pointed out that direct pointer subtraction is simpler and has the virtue of actually working."}, {"owner": {"reputation": 397, "user_id": 95089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5afa1cf67d736301b34ac54b45df95cb?s=128&d=identicon&r=PG", "display_name": "JimKleck", "link": "https://stackoverflow.com/users/95089/jimkleck"}, "edited": false, "score": 0, "creation_date": 1585264651, "post_id": 29800314, "comment_id": 107707405, "body": "It sounds like OP is treating the value as an opaque handle, in which case using (u)intptr_t rather than void * gives them the freedom of changing their implementation between ptr and array index without changing their API."}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": true, "score": 10, "last_activity_date": 1429712881, "last_edit_date": 1429712881, "creation_date": 1429711962, "answer_id": 29800314, "question_id": 29800256, "link": "https://stackoverflow.com/questions/29800256/when-is-uintptr-t-preferred-over-intptr-t/29800314#29800314", "title": "When is uintptr_t preferred over intptr_t?", "body": "<p>It is mostly a stylistic argument (an optimizing compiler would probably generate the same, or very similar, code). However, pointer compares may be a tricky issue.</p>\n\n<p><sup>Remember than in purely standard C pointer compare is roughly meaningful only for pointers to the <em>same</em> aggregate data. You are probably not allowed to compare two results from <code>malloc</code>, e.g. to keep a sorted array of pointers.</sup></p>\n\n<p>I would keep them as <code>void*</code>, or else as <code>uintptr_t</code>. The signed <code>intptr_t</code> has the inconvenience to seggregate negative and positive numbers, and where they are coming from significant application pointers, this is probably not welcome.</p>\n\n<p><sup>Notice that a <code>void*</code> cannot be dereferenced: as an <code>uintptr_t</code>, you <em>have</em> to cast it to do something useful with the data pointed by the address; however <code>void*</code> pointers can be passed to routines like <code>memset</code></sup></p>\n\n<p>PS. I am assuming an ordinary processor (e.g. some x86, PowerPC, ARM, ...) with a flat virtual address space. You could find exotic processors -some DSPs perhaps- with very significant differences (and perhaps on which <code>intptr_t</code> is not always meaningful; remember that on the 1990s <a href=\"http://en.wikipedia.org/wiki/Cray_Y-MP\" rel=\"noreferrer\">Cray Y-MP</a> supercomputers <code>sizeof(long*) != sizeof(char*)</code>; at that time <a href=\"http://en.wikipedia.org/wiki/C99\" rel=\"noreferrer\">C99</a> did not exist, and I am not sure its <code>&lt;stdint.h&gt;</code> could be meaningful on such machines)</p>\n"}, {"comments": [{"owner": {"reputation": 23294, "user_id": 6345, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1f5ce0fac6a8d23e6dced87ab200e669?s=128&d=identicon&r=PG", "display_name": "Johann Gerell", "link": "https://stackoverflow.com/users/6345/johann-gerell"}, "edited": false, "score": 0, "creation_date": 1429712794, "post_id": 29800328, "comment_id": 47729270, "body": "<i>&quot;That sounds very strange, since it&#39;s going to require casts&quot;</i> - well, yes. I don&#39;t want clients of this struct to ever think that the <i>pointee</i> value is of any interest whatsoever, and by making the field an <code>intptr_t</code> or <code>uintptr_t</code> I hope to make it clear that it&#39;s the <i>pointer</i> value itself that is interesting. Please let me know if I&#39;m barking up the wrong tree in reasoning like that :-)"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 23294, "user_id": 6345, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1f5ce0fac6a8d23e6dced87ab200e669?s=128&d=identicon&r=PG", "display_name": "Johann Gerell", "link": "https://stackoverflow.com/users/6345/johann-gerell"}, "edited": false, "score": 2, "creation_date": 1429712888, "post_id": 29800328, "comment_id": 47729373, "body": "@JohannGerell It&#39;s hard to be definitive, of course. But since the entire point of <code>void *</code> is that it can&#39;t be dereferenced since there&#39;s no type information about the pointee, I&#39;d say that&#39;s exactly what it communicates already."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1480852022, "post_id": 29800328, "comment_id": 69125777, "body": "you might need to use <code>intptr_t</code> to get <a href=\"http://stackoverflow.com/q/16198700/995714\">signed extension on x86_64 canonical addresses</a>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1537971676, "post_id": 29800328, "comment_id": 91979453, "body": "<code>void*</code> rather comes with a list of huge disadvantages. I&#39;ve posted an answer showing some of the most common causes for bugs."}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 10, "last_activity_date": 1429711987, "creation_date": 1429711987, "answer_id": 29800328, "question_id": 29800256, "link": "https://stackoverflow.com/questions/29800256/when-is-uintptr-t-preferred-over-intptr-t/29800328#29800328", "title": "When is uintptr_t preferred over intptr_t?", "body": "<p>That sounds very strange, since it's going to require casts. A <code>void *</code> in C has the huge advantage that it converts to/from other object pointer types without casts, which is way clean.</p>\n\n<p>That said <code>uintptr_t</code> might make sense if you want to do things to the bits of the pointer that you can't do as sensibly with a signed integer (such as shifting them to the right, for instance).</p>\n"}, {"tags": [], "owner": {"reputation": 375, "user_id": 2949652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff40cd0d3a4dc5c4d5b8725606ae0f7b?s=128&d=identicon&r=PG&f=1", "display_name": "user2949652", "link": "https://stackoverflow.com/users/2949652/user2949652"}, "is_accepted": false, "score": 3, "last_activity_date": 1487510462, "creation_date": 1487510462, "answer_id": 42327709, "question_id": 29800256, "link": "https://stackoverflow.com/questions/29800256/when-is-uintptr-t-preferred-over-intptr-t/42327709#42327709", "title": "When is uintptr_t preferred over intptr_t?", "body": "<p>If you want to manipulate the value arithmetically (e.g., to encrypt it), you have much more flexibility with an unsigned type (where arithmetic wraps around) than with a signed type (where arithmetic overflow gives undefined behavior).</p>\n"}, {"comments": [{"owner": {"reputation": 397, "user_id": 95089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5afa1cf67d736301b34ac54b45df95cb?s=128&d=identicon&r=PG", "display_name": "JimKleck", "link": "https://stackoverflow.com/users/95089/jimkleck"}, "edited": false, "score": 0, "creation_date": 1585264485, "post_id": 52519839, "comment_id": 107707366, "body": "Another consideration is when you are using the value as a handle and passing it around. With it defined as (u)intptr_t your local implementation can change from ptr to array index without changing the API."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 5, "last_activity_date": 1585292898, "last_edit_date": 1585292898, "creation_date": 1537971305, "answer_id": 52519839, "question_id": 29800256, "link": "https://stackoverflow.com/questions/29800256/when-is-uintptr-t-preferred-over-intptr-t/52519839#52519839", "title": "When is uintptr_t preferred over intptr_t?", "body": "<p>You should pick the type appropriate for the given system and program. Most of the time, pointers are positive address values, in which case <code>uintptr_t</code> is the correct type. But some systems use negative addresses as a way to express kernel space, as explained here: <a href=\"https://stackoverflow.com/questions/3304795/can-a-pointer-address-ever-be-negative\">Can a pointer (address) ever be negative?</a> This would be the reason why there are two different types.</p>\n\n<hr>\n\n<p>As for <code>(u)intptr_t</code> vs <code>void*</code> for a generic pointer type, the former is preferred in rugged, professional programs. There are many problems/bug sources associated with pointer types: </p>\n\n<ul>\n<li>All manner of different pointer types are most often not compatible with each other and cannot alias. This is a problem with object pointers as well as function pointers.</li>\n<li>You often have type qualifiers like <code>const</code>, which makes pointer conversions to/from that type questionable or poorly-defined.</li>\n<li>Conversions to/from <code>void*</code> and other pointer types happen implicitly, making it easy for bugs related to using the wrong pointer type to slip through unnoticed. This was fixed in C++, but remains a hazard in C. Take for example the old but classic \"I forgot to include stdlib.h while using malloc in C90\" bug.</li>\n<li>Performing arithmetic on a pointer comes with numerous pitfalls, because you can only safely do arithmetic on a pointer which points at an allocated array. However, one can often have a memory address for a lot of other reasons than pointing at an array, as anyone working with embedded systems knows.</li>\n<li>You <em>can't</em> even perform pointer arithmetic calculations on a <code>void*</code>. Doing so relies on non-standard compiler extensions.</li>\n</ul>\n\n<p>That being said, a whole lot of legacy code relies on <code>void</code> pointers, and it's perfectly fine to use them in a restricted context. Some examples would be canonical code relying on generic callback functions: <code>bsearch</code>, <code>qsort</code>, pthreads and similar.</p>\n\n<p>I would however not recommend to use <code>void</code> pointers when designing new C programs - they are, in my opinion, best regarded as a dangerous feature of the past. There exist better and safer methods of generic C programming nowadays, such as C11 <code>_Generic</code>, tricks using designated initializers, passing parameters as array pointers (to VLA), bounds-checking at compile time with <code>static_assert</code> etc. Some examples can be found in my answer here: <a href=\"https://stackoverflow.com/questions/43043246/how-to-create-type-safe-enums\">How to create type safe enums?</a>.</p>\n"}], "owner": {"reputation": 23294, "user_id": 6345, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1f5ce0fac6a8d23e6dced87ab200e669?s=128&d=identicon&r=PG", "display_name": "Johann Gerell", "link": "https://stackoverflow.com/users/6345/johann-gerell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8614, "favorite_count": 5, "accepted_answer_id": 29800314, "answer_count": 4, "score": 18, "last_activity_date": 1585292898, "creation_date": 1429711823, "question_id": 29800256, "link": "https://stackoverflow.com/questions/29800256/when-is-uintptr-t-preferred-over-intptr-t", "title": "When is uintptr_t preferred over intptr_t?", "body": "<p>Given the requirement that I need to store the value of a \"generic\" pointer in a struct and have no interest in the pointed-at memory itself, I find it more semantically correct to store it as an <code>intptr_t</code> than a <code>void*</code>. The question is whether a <code>uintptr_t</code> is better suited or not, and when one is preferred over the other in general?</p>\n"}, {"tags": ["c", "linux", "timer"], "answers": [{"comments": [{"owner": {"reputation": 775, "user_id": 4650806, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/797558543615184/picture?type=large", "display_name": "BEPP", "link": "https://stackoverflow.com/users/4650806/bepp"}, "edited": false, "score": 0, "creation_date": 1429712269, "post_id": 29800116, "comment_id": 47728824, "body": "deleting the timer inside the sigev_notify_function will be fine ? because just i want to delete after the callback is called."}, {"owner": {"reputation": 8218, "user_id": 2615940, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/9a6Qc.jpg?s=128&g=1", "display_name": "skrrgwasme", "link": "https://stackoverflow.com/users/2615940/skrrgwasme"}, "reply_to_user": {"reputation": 775, "user_id": 4650806, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/797558543615184/picture?type=large", "display_name": "BEPP", "link": "https://stackoverflow.com/users/4650806/bepp"}, "edited": false, "score": 0, "creation_date": 1429719544, "post_id": 29800116, "comment_id": 47734658, "body": "I don&#39;t think I really have a good answer for that. I&#39;ve opened a <a href=\"http://stackoverflow.com/q/29803394/2615940\">new question here</a> to try to find out."}, {"owner": {"reputation": 8218, "user_id": 2615940, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/9a6Qc.jpg?s=128&g=1", "display_name": "skrrgwasme", "link": "https://stackoverflow.com/users/2615940/skrrgwasme"}, "reply_to_user": {"reputation": 775, "user_id": 4650806, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/797558543615184/picture?type=large", "display_name": "BEPP", "link": "https://stackoverflow.com/users/4650806/bepp"}, "edited": false, "score": 0, "creation_date": 1429723246, "post_id": 29800116, "comment_id": 47737112, "body": "@NaveenKumar Take a look at my more formal response to your question. I needed some time to read and think about it, but I&#39;d ultimately recommend against deleting the timer from within your callback."}], "tags": [], "owner": {"reputation": 8218, "user_id": 2615940, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/9a6Qc.jpg?s=128&g=1", "display_name": "skrrgwasme", "link": "https://stackoverflow.com/users/2615940/skrrgwasme"}, "is_accepted": true, "score": 4, "last_activity_date": 1429722983, "last_edit_date": 1495535331, "creation_date": 1429711566, "answer_id": 29800116, "question_id": 29799925, "link": "https://stackoverflow.com/questions/29799925/does-timer-delete-need-to-be-called-to-delete-the-timer-every-time/29800116#29800116", "title": "Does timer_delete need to be called to delete the timer every time?", "body": "<p><strong>Yes, you need to explicitly delete the timer.</strong></p>\n\n<p>Take a look at the <a href=\"http://man7.org/linux/man-pages/man2/timer_create.2.html\" rel=\"nofollow noreferrer\">man(2) page for timer_create</a>. In the notes section (the third note, specifically), you'll see that every call to <code>timer_create</code> uses resources in the kernel, and the total number of timers, across <em>all</em> processes, that can be allocated by the kernel at once is limited.</p>\n\n<p>If you don't delete your timers, you will eventually run out of them and <em>any applications that need to allocate timers may fail.</em></p>\n\n<p>It's just like memory leaks - clean up the resources you use, or you'll eventually run out.</p>\n\n<p><strong>Reply to your follow-up question</strong><br>\nIn the comments below, you asked if it is okay to call <code>timer_delete</code> from inside your callback function. I was unsure of how to respond, so I opened <a href=\"https://stackoverflow.com/q/29803394/2615940\">question about it myself</a>. The answer seems to be <em>maybe</em>. You can try to experiment with it and see if it works, but I would recommend against it. I've never seen any code that deletes the timer from within the callback, and the idea of deallocating the timer resources before an event has finished being handled makes me nervous.</p>\n\n<p>Also, testing it may yield okay results sometimes, but have random failures since you're dealing with asynchronous events. Furthermore, your main program needs to be running until the callback completes anyway (they run in the same process, just different threads), so you may as well delete the timer in your main thread right before exiting. I think it's the safer solution, and will be easier to debug.</p>\n"}], "owner": {"reputation": 775, "user_id": 4650806, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/797558543615184/picture?type=large", "display_name": "BEPP", "link": "https://stackoverflow.com/users/4650806/bepp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2174, "favorite_count": 1, "accepted_answer_id": 29800116, "answer_count": 1, "score": 3, "last_activity_date": 1429725383, "creation_date": 1429711184, "last_edit_date": 1429725383, "question_id": 29799925, "link": "https://stackoverflow.com/questions/29799925/does-timer-delete-need-to-be-called-to-delete-the-timer-every-time", "title": "Does timer_delete need to be called to delete the timer every time?", "body": "<p>I used <code>timer_create()</code> in the following code. It will trigger the handler only once after 10 seconds. </p>\n\n<pre><code>struct itimerspec itimer = { { 0, 0 }, { 10, 0 } };\nstruct sigevent si;\n\nmemset (&amp;si, 0, sizeof (struct sigevent));\nsi.sigev_notify = SIGEV_THREAD;\nsi.sigev_notify_attributes = NULL;\nsi.sigev_notify_function = t;\n\nif (timer_create (CLOCK_REALTIME, &amp;si, &amp;timer) &lt; 0)\n{\n    fprintf (stderr, \"[%d]: %s\\n\", __LINE__, strerror (errno));\n    exit (errno);\n}\nif (timer_settime (timer, 0, &amp;itimer, NULL) &lt; 0)\n{\n    fprintf (stderr, \"[%d]: %s\\n\", __LINE__, strerror (errno));\n    exit (errno);\n}\n</code></pre>\n\n<p>My question is, after 10 seconds my handler got triggered - now do I have to delete the timer using <code>timer_delete()</code> before exiting the process? Or, since it is triggered only once, is there no need to delete it explicitly? </p>\n"}, {"tags": ["c", "arrays", "memory", "mpc"], "comments": [{"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 4, "creation_date": 1429711068, "post_id": 29799763, "comment_id": 47727777, "body": "the condition in your for loop should be <code>i&lt;N-2</code> instead of <code>i&lt;=N-2</code>."}, {"owner": {"reputation": 200780, "user_id": 116908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54d38793d7a407446999b33b81d607fd?s=128&d=identicon&r=PG", "display_name": "Carl Norum", "link": "https://stackoverflow.com/users/116908/carl-norum"}, "reply_to_user": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 3, "creation_date": 1429711104, "post_id": 29799763, "comment_id": 47727812, "body": "@mch - good catch; your comment should be an answer."}, {"owner": {"reputation": 395, "user_id": 2370871, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/cvIGf.jpg?s=128&g=1", "display_name": "Javier Garcia", "link": "https://stackoverflow.com/users/2370871/javier-garcia"}, "reply_to_user": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1429711383, "post_id": 29799763, "comment_id": 47728068, "body": "Thanks @mch! That solves the problem. So, what I&#39;m trying to do with my erroneous code is to store N-1 mpf_t&#39;s in a space that can only handle N-2 mpf_t&#39;s. I thought that this would&#39;ve produced a segmentation fault, or something like that."}], "answers": [{"comments": [{"owner": {"reputation": 395, "user_id": 2370871, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/cvIGf.jpg?s=128&g=1", "display_name": "Javier Garcia", "link": "https://stackoverflow.com/users/2370871/javier-garcia"}, "edited": false, "score": 0, "creation_date": 1429712839, "post_id": 29800442, "comment_id": 47729320, "body": "Thanks! I&#39;ll be more careful next time."}], "tags": [], "owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "is_accepted": true, "score": 2, "last_activity_date": 1429712255, "creation_date": 1429712255, "answer_id": 29800442, "question_id": 29799763, "link": "https://stackoverflow.com/questions/29799763/freeing-an-array-of-mpc-t-in-c/29800442#29800442", "title": "Freeing an array of mpc_t in C", "body": "<p>Your for loop breaks after <code>i == N-2</code>, but it should break before. The condition in your for loop should be <code>i&lt;N-2</code> instead of <code>i&lt;=N-2</code>.</p>\n\n<p>So you try to access memory, which is out of bounds. This leads to <code>undefined behaviour</code>, so anything can happen, including a segmentation fault, a free run time error or nothing.</p>\n"}], "owner": {"reputation": 395, "user_id": 2370871, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/cvIGf.jpg?s=128&g=1", "display_name": "Javier Garcia", "link": "https://stackoverflow.com/users/2370871/javier-garcia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 29800442, "answer_count": 1, "score": 1, "last_activity_date": 1591771089, "creation_date": 1429710826, "last_edit_date": 1591771089, "question_id": 29799763, "link": "https://stackoverflow.com/questions/29799763/freeing-an-array-of-mpc-t-in-c", "title": "Freeing an array of mpc_t in C", "body": "<p>I'm new to C programming and I couldn't find solution to my problem. Although the code works (I've been able to include it in other program), when it tries to free the memory assigned by calloc(), it returns the following error:</p>\n\n<pre><code>free(): invalid next size (normal):\n</code></pre>\n\n<p>followd by what appears to be a memory address. I'm using mpc libraries (for arbitrary precision complex numbers). This is the smallest program that repeats the error:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;gmp.h&gt;\n#include &lt;mpfr.h&gt;\n#include &lt;mpc.h&gt;\n\nint N = 10;\nint precision = 512;\n\nint main(void) {\n    mpc_t *dets2;\n    dets2 = (mpc_t*)calloc(N-2,sizeof(mpc_t));\n\n    for (int i = 0; i&lt;=N-2; i++) {\n        mpc_init2(dets2[i],512); //initialize all complex numbers\n        mpc_set_str(dets2[i],\"1\",0,MPFR_RNDN); //set all the numbers to one\n    }\n\n    free(dets2); //release the memory occupied by those numbers\n    return 0;\n}\n</code></pre>\n\n<p>Thanks for your help!</p>\n"}, {"tags": ["c", "network-programming", "protocols", "network-protocols", "bacnet"], "comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1429712513, "post_id": 29799211, "comment_id": 47729021, "body": "Here is a <b><i><a href=\"http://sourceforge.net/projects/bacnet/files/bacnet-tools/\" rel=\"nofollow noreferrer\">link to an example where BACnet client and server applications are included</a></i></b>"}], "answers": [{"comments": [{"owner": {"reputation": 283, "user_id": 3448291, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/IbOlb.jpg?s=128&g=1", "display_name": "PiggyGenius", "link": "https://stackoverflow.com/users/3448291/piggygenius"}, "edited": false, "score": 0, "creation_date": 1429773853, "post_id": 29804341, "comment_id": 47759987, "body": "Thank you very much for your answer and taking the time to help me. I already tried to use demo\\whois\\bacwi. This program tells me that there is 0 devices found. But when I checked the network with tcpdump, I saw that there was a message coming from my computer and going to the BACnet server. This BACnet server then sends 8 message (wrapped in UDP) to my machine to answer (there are 8 devices linked to my BACnet server) but the program bacwi doesn&#39;t seem to understand anything because it tells me no devices. I don&#39;t understand why and where the problem comes from."}], "tags": [], "owner": {"reputation": 194, "user_id": 1938795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77cec9132e7417ebe99f425811f71122?s=128&d=identicon&r=PG", "display_name": "Edward", "link": "https://stackoverflow.com/users/1938795/edward"}, "is_accepted": false, "score": 1, "last_activity_date": 1429722194, "creation_date": 1429722194, "answer_id": 29804341, "question_id": 29799211, "link": "https://stackoverflow.com/questions/29799211/how-to-create-a-bacnet-client-in-c/29804341#29804341", "title": "How to create a BACnet client in C", "body": "<p>I have used that stack and it is the best open source one you are going to find. If you cannot see anything using the <code>demo\\whois\\bacwi</code> example from that library, then there is something wrong with your setup. In particular, are you using IP? Are your BACnet client and BACnet server on <em>different</em> machines (they cannot be on the same without some serious tweaking)? Are the two machines on the same IP subnet? (They must be, once again, unless you do some serious tweaking (in this case, setting up BBMDs (BACnet Broadcast Management Devices))).</p>\n\n<p>You will also want to try the \"Read Property\" example (<code>demo\\readprop\\bacrp.exe</code>) to actually read a value from the server.</p>\n\n<p>If you are still stuck, then post your detailed problem at the link on Sourceforge, Steve, the author, is <em>very</em> responsive to questions.</p>\n"}, {"tags": [], "owner": {"reputation": 354, "user_id": 2891429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d744fbfebed04b33d31f0a54607f622?s=128&d=identicon&r=PG&f=1", "display_name": "newGuy", "link": "https://stackoverflow.com/users/2891429/newguy"}, "is_accepted": false, "score": 0, "last_activity_date": 1439557226, "creation_date": 1439557226, "answer_id": 32010758, "question_id": 29799211, "link": "https://stackoverflow.com/questions/29799211/how-to-create-a-bacnet-client-in-c/32010758#32010758", "title": "How to create a BACnet client in C", "body": "<p>I am currently using the stack - just started. I had a little trouble at first, not sure if my problem is the same but.. I basically am using some BAC components made from Schneider Electric (UNC-500) and an old un-supported platform (Niagara R2). On my laptop I created a host server and addressed it to a private LAN network between it and the UNC. My laptop was also using wifi, which was utilizing DHCP, so I had two separate interfaces going. This was my problem. I couldn't read or get 'I-AM' responses back from the UNC. As soon as I turned the WIFI off, I got the 'I-AM' broadcasts. Make sure that you are on the same network as your device, and that there are not other interfaces active. Maybe there is a way to assign the interface to use, IDK. I just started using it.  </p>\n"}], "owner": {"reputation": 283, "user_id": 3448291, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/IbOlb.jpg?s=128&g=1", "display_name": "PiggyGenius", "link": "https://stackoverflow.com/users/3448291/piggygenius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4366, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1439557226, "creation_date": 1429709575, "question_id": 29799211, "link": "https://stackoverflow.com/questions/29799211/how-to-create-a-bacnet-client-in-c", "title": "How to create a BACnet client in C", "body": "<p>I am trying to create a client in C that will talk with a BACnet server. This BACnet server is stored on an industrial device (CAN2GO) and I am not sure how I could talk with this device.</p>\n\n<p>I spent quite some time reading documentation for BACnet and I never found a clear example for a BACnet client. I already did some server and clients using TCP and UDP but I don't know how to start this BACnet client and I must say I am getting quite desperate.</p>\n\n<p>I found a library which seems to correspond to what I want which is called <a href=\"http://sourceforge.net/projects/bacnet/\" rel=\"nofollow\">BACnet protocol stack</a> but when I tried the whois exemple no device was found (I expected to found the bacnet server but maybe I shouldn't ?).</p>\n\n<p>So my question is : could you give me an exemple in C, or another language but C would be better, that would communicate with a BACnet server (nothing complicated just a question and analysing response). This example could be using the library I just wrote about or if you prefer another library I am of course open to everything. \nThank you very much for your time and answers.</p>\n"}, {"tags": ["c", "windows", "events", "etw"], "answers": [{"comments": [{"owner": {"reputation": 2601, "user_id": 127856, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e08a791622c69f2c329bcfde8de40759?s=128&d=identicon&r=PG", "display_name": "ALOToverflow", "link": "https://stackoverflow.com/users/127856/alotoverflow"}, "edited": false, "score": 0, "creation_date": 1434504032, "post_id": 30814039, "comment_id": 49802580, "body": "I need a C solution unfortunately."}], "tags": [], "owner": {"reputation": 4010, "user_id": 19407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7a5fd849317529c9eac6eea84c50f03?s=128&d=identicon&r=PG", "display_name": "Naveen", "link": "https://stackoverflow.com/users/19407/naveen"}, "is_accepted": false, "score": 0, "last_activity_date": 1434156143, "creation_date": 1434156143, "answer_id": 30814039, "question_id": 29798941, "link": "https://stackoverflow.com/questions/29798941/list-event-classes-for-etw-provider/30814039#30814039", "title": "List event classes for ETW provider", "body": "<p>Have you tried looking into <a href=\"https://www.nuget.org/packages/Microsoft.Diagnostics.Tracing.TraceEvent/\" rel=\"nofollow\">TraceEvent</a>?. It is not in C. It is managed code. But it is nice way to listen to the ETW events.</p>\n"}], "owner": {"reputation": 2601, "user_id": 127856, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e08a791622c69f2c329bcfde8de40759?s=128&d=identicon&r=PG", "display_name": "ALOToverflow", "link": "https://stackoverflow.com/users/127856/alotoverflow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 356, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1527730906, "creation_date": 1429708967, "last_edit_date": 1429710107, "question_id": 29798941, "link": "https://stackoverflow.com/questions/29798941/list-event-classes-for-etw-provider", "title": "List event classes for ETW provider", "body": "<p>I would like to implement an <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb968803(v=vs.85).aspx\" rel=\"nofollow\">ETW</a> consumer in <code>C</code> for events coming from the <code>Microsoft-Windows-TCPIP</code> provider. However, I fail to find the type of event this provider generates.</p>\n\n<p>I already did some similar work to consume events from <code>Microsoft-Windows-Kernel-*</code> (see <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa363691(v=vs.85).aspx\" rel=\"nofollow\">NT Kernel Logger</a>) , but the events sent from this provider were <em>decently</em> documented on MSDN (see documentation about <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa363784(v=vs.85).aspx\" rel=\"nofollow\">Enable Flags</a>).</p>\n\n<p>So I guess the real question is: how can I link an ETW provider to the type of events (we are talking about C structures here) that it generates and possibly vice-versa (if feasible at all)?</p>\n\n<p>Thanks!</p>\n\n<p><em>Edit 0</em>: I don't mind using other technologies to find the details about a class. For example, getting the details of the <code>Registry</code> class (for the NT Kernel Logger), one would use <code>powershell</code> and run the following command (note that you need the right namespace otherwise you won't get the right type):</p>\n\n<pre><code>$list = gwmi -namespace root\\wmi -Class Registry* -list\nforeach($element in $list) {\n   ([wmiclass]$element).gettext(\"mof\")\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "memory", "struct"], "comments": [{"owner": {"reputation": 35069, "user_id": 1324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883238a436c061eaf848af87b8fda561?s=128&d=identicon&r=PG", "display_name": "Paul Roub", "link": "https://stackoverflow.com/users/1324/paul-roub"}, "edited": false, "score": 3, "creation_date": 1429708913, "post_id": 29798894, "comment_id": 47725930, "body": "It will hold the values. And no, it does not differ between compilers."}, {"owner": {"reputation": 21641, "user_id": 96780, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PPilI.jpg?s=128&g=1", "display_name": "Daniel Daranas", "link": "https://stackoverflow.com/users/96780/daniel-daranas"}, "edited": false, "score": 1, "creation_date": 1429709085, "post_id": 29798894, "comment_id": 47726098, "body": "If it did hold just a pointer, where would the data be?"}, {"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 1, "creation_date": 1429709104, "post_id": 29798894, "comment_id": 47726115, "body": "arrays are not pointers. In some situations arrays decay to pointer. This is definitely not one of those situation."}, {"owner": {"reputation": 3196, "user_id": 2116766, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/a47f248d01775a3ebf5819dd9367a761?s=128&d=identicon&r=PG", "display_name": "Shanqing Cai", "link": "https://stackoverflow.com/users/2116766/shanqing-cai"}, "reply_to_user": {"reputation": 21641, "user_id": 96780, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PPilI.jpg?s=128&g=1", "display_name": "Daniel Daranas", "link": "https://stackoverflow.com/users/96780/daniel-daranas"}, "edited": false, "score": 0, "creation_date": 1429709218, "post_id": 29798894, "comment_id": 47726226, "body": "@DanielDaranas, I thought the data would be stored at the location pointed to by the pointer in the struct. Apparently this was wrong."}], "answers": [{"comments": [{"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 1, "creation_date": 1429710126, "post_id": 29799050, "comment_id": 47726965, "body": "Arrays cannot have padding bytes, structs can."}], "tags": [], "owner": {"reputation": 215710, "user_id": 134633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc6be45ddcfd038ba5e1e5fca319c7fa?s=128&d=identicon&r=PG", "display_name": "caf", "link": "https://stackoverflow.com/users/134633/caf"}, "is_accepted": true, "score": 9, "last_activity_date": 1429709538, "last_edit_date": 1429709538, "creation_date": 1429709195, "answer_id": 29799050, "question_id": 29798894, "link": "https://stackoverflow.com/questions/29798894/memory-layout-of-c-struct-with-arrays/29799050#29799050", "title": "Memory layout of C struct with arrays", "body": "<p>The struct contains the two values.  The memory layout is <code>.array1[0]</code>, followed by <code>.array1[1]</code>, optionally followed by some amount of padding.</p>\n\n<p>The padding is the only part that of this that can vary between compilers (although in practice, with the only member of the struct being an array there will almost certainly be no padding).</p>\n\n<p>Although you may have heard that an array in C is a pointer, that is not true - an array is an aggregate type consisting of all the member objects, just like a struct. It is just that in almost all expression contexts, an array evaluates to a pointer to its first member.</p>\n"}, {"tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 2, "last_activity_date": 1429709924, "last_edit_date": 1429709924, "creation_date": 1429709396, "answer_id": 29799138, "question_id": 29798894, "link": "https://stackoverflow.com/questions/29798894/memory-layout-of-c-struct-with-arrays/29799138#29799138", "title": "Memory layout of C struct with arrays", "body": "<p>The above structure declaration just inform the compiler that variables of that <code>struct</code> data structure type will take <code>sizeof(struct0_T)</code> bytes of memory and this memory will be allocated once a variable of that type will be instantiated.   </p>\n\n<pre><code>struct0_T s;\n</code></pre>\n\n<p>Now, <code>s</code> contains an array of two <code>doubles</code>. There will be no padding in this case.</p>\n"}], "owner": {"reputation": 3196, "user_id": 2116766, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/a47f248d01775a3ebf5819dd9367a761?s=128&d=identicon&r=PG", "display_name": "Shanqing Cai", "link": "https://stackoverflow.com/users/2116766/shanqing-cai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1612, "favorite_count": 1, "accepted_answer_id": 29799050, "answer_count": 2, "score": 7, "last_activity_date": 1429709924, "creation_date": 1429708861, "last_edit_date": 1429709022, "question_id": 29798894, "link": "https://stackoverflow.com/questions/29798894/memory-layout-of-c-struct-with-arrays", "title": "Memory layout of C struct with arrays", "body": "<p>Suppose I have a C struct defined as follows:</p>\n\n<pre><code>typedef struct \n{\n  double array1[2];\n} struct0_T;\n</code></pre>\n\n<p>How is the memory laid out? Is struct going to hold just a pointer or the value of the two doubles? Before I thought the struct holds a pointer, but today I found out (to my surprise) that the values are stored there. Does it vary between different compilers? </p>\n"}, {"tags": ["c", "8051"], "comments": [{"owner": {"reputation": 8289, "user_id": 31762, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8d966695b86efcb687c5e6a338542e32?s=128&d=identicon&r=PG", "display_name": "AnthonyLambert", "link": "https://stackoverflow.com/users/31762/anthonylambert"}, "edited": false, "score": 0, "creation_date": 1429707481, "post_id": 29797874, "comment_id": 47724736, "body": "eh? the comments already do that...."}, {"owner": {"reputation": 112, "user_id": 4590719, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/OH1xD.gif?s=128&g=1", "display_name": "guilemon", "link": "https://stackoverflow.com/users/4590719/guilemon"}, "reply_to_user": {"reputation": 8289, "user_id": 31762, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8d966695b86efcb687c5e6a338542e32?s=128&d=identicon&r=PG", "display_name": "AnthonyLambert", "link": "https://stackoverflow.com/users/31762/anthonylambert"}, "edited": false, "score": 0, "creation_date": 1429707696, "post_id": 29797874, "comment_id": 47724902, "body": "@AnthonyLambert i still don&#39;t get it. first time working with microcontrollers"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1429707773, "post_id": 29797874, "comment_id": 47724961, "body": "@kai: you probably should get somewhat familiar with microcontrollers and the C programming language before carrying on."}, {"owner": {"reputation": 8289, "user_id": 31762, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8d966695b86efcb687c5e6a338542e32?s=128&d=identicon&r=PG", "display_name": "AnthonyLambert", "link": "https://stackoverflow.com/users/31762/anthonylambert"}, "edited": false, "score": 0, "creation_date": 1429708340, "post_id": 29797874, "comment_id": 47730031, "body": "I search for &quot;8051 Microcontroller pdf&quot; and found this... maybe you should take a look <a href=\"http://www.iust.ac.ir/files/ee/pages/az/mazidi.pdf\" rel=\"nofollow noreferrer\">8051 Microcontroller Book</a> Then maybe you could come back with some questions."}, {"owner": {"reputation": 112, "user_id": 4590719, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/OH1xD.gif?s=128&g=1", "display_name": "guilemon", "link": "https://stackoverflow.com/users/4590719/guilemon"}, "edited": false, "score": 0, "creation_date": 1429708506, "post_id": 29797874, "comment_id": 47730032, "body": "thanks. will definitely go thru this"}], "answers": [{"tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": true, "score": 0, "last_activity_date": 1429707694, "creation_date": 1429707694, "answer_id": 29798408, "question_id": 29797874, "link": "https://stackoverflow.com/questions/29797874/translating-8051-microcontroller-c-code/29798408#29798408", "title": "Translating 8051 microcontroller C code", "body": "<p>Very hard to tell without context. I guess following:</p>\n\n<p>The <code>timer0</code> interrupt routine is called every 100th of a second. There it increments the <code>tick</code> counter which is reset to 0 as soon as it gets bigger than 3500. The <code>sec</code> counter seems to be a second counter as it is incremented every 100th call to <code>timer0</code> (which is called 100 times per second).</p>\n\n<p>The <code>extrint</code> seems to be called upon some external event. It just copies the actual value of <code>tick</code> into <code>bt</code> (presumably for some further processing) and resets <code>tick</code> to 0.</p>\n"}], "owner": {"reputation": 112, "user_id": 4590719, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/OH1xD.gif?s=128&g=1", "display_name": "guilemon", "link": "https://stackoverflow.com/users/4590719/guilemon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 0, "accepted_answer_id": 29798408, "answer_count": 1, "score": -2, "last_activity_date": 1429708439, "creation_date": 1429706377, "last_edit_date": 1429708439, "question_id": 29797874, "link": "https://stackoverflow.com/questions/29797874/translating-8051-microcontroller-c-code", "title": "Translating 8051 microcontroller C code", "body": "<pre><code>void extrint (void) interrupt 0 // external Interrupt to detect the heart pulse\n{\n  bt = tick;  // number of ticks are picked\n  tick = 0;   // reset for next counting\n}\n\nvoid timer0 (void) interrupt 1 using 1 // Timer 0 for one second time\n{\n  TH0 = 0xdc; // The value is taken for Ssc/100 at crystal 11.0592MHz\n  sec100++;   // It is incremented every Ssc/100 at crystal 11.0592MHz\n  tick++;     // This variable counts the time period of incoming pulse in Sec/100\n\n  if (tick &gt;= 3500)\n     {tick = 0;} // tick are limited to less than 255 for valid calculation\n\n   if (sec100 &gt;= 100) // 1 sec = sec100 * 100\n   {\n     sec++;\n     sec100=0;\n   }\n }\n</code></pre>\n\n<p>Can somebody explain me what the above code means and does. It was written for a 8051 microcontroller.</p>\n\n<p>i got it from here \n<a href=\"http://www.zembedded.com/heart-rate-beats-meter-with-microcontroller-at89c51-based-heartbeat-monitor/\" rel=\"nofollow\">http://www.zembedded.com/heart-rate-beats-meter-with-microcontroller-at89c51-based-heartbeat-monitor/</a></p>\n"}, {"tags": ["c", "posix", "freebsd", "posix-api"], "answers": [{"comments": [{"owner": {"reputation": 1837, "user_id": 936426, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/0d043fb94125cfac97996b5069b43a08?s=128&d=identicon&r=PG", "display_name": "M.K. aka Grisu", "link": "https://stackoverflow.com/users/936426/m-k-aka-grisu"}, "edited": false, "score": 0, "creation_date": 1429707465, "post_id": 29798084, "comment_id": 47724724, "body": "I tried replacing the <code>_POSIX_C_SOURCE</code> by <code>_XOPEN_SOURCE=500</code> and it works. But using <code>_XOPEN_SOURCE=600&#47;700</code> which corresponds to the POSIX 2001/2008 standard the same warning pops up again. Replacing it via <code>sysconf</code> is a workaround which does not solve the reason of the problem."}, {"owner": {"reputation": 14928, "user_id": 360695, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d2c44123afa326f8088914089161248e?s=128&d=identicon&r=PG", "display_name": "Dummy00001", "link": "https://stackoverflow.com/users/360695/dummy00001"}, "reply_to_user": {"reputation": 1837, "user_id": 936426, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/0d043fb94125cfac97996b5069b43a08?s=128&d=identicon&r=PG", "display_name": "M.K. aka Grisu", "link": "https://stackoverflow.com/users/936426/m-k-aka-grisu"}, "edited": false, "score": 0, "creation_date": 1429711296, "post_id": 29798084, "comment_id": 47727994, "body": "The <code>sysconf()</code> is not a workaround. It is part of POSIX - <code>getpagesize()</code> is not. If you want/need POSIX, then you have to use the <code>sysconf()</code>."}], "tags": [], "owner": {"reputation": 14928, "user_id": 360695, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d2c44123afa326f8088914089161248e?s=128&d=identicon&r=PG", "display_name": "Dummy00001", "link": "https://stackoverflow.com/users/360695/dummy00001"}, "is_accepted": true, "score": 2, "last_activity_date": 1429706878, "creation_date": 1429706878, "answer_id": 29798084, "question_id": 29797547, "link": "https://stackoverflow.com/questions/29797547/freebsd-implicit-declaration-of-getpagesize-with-posix-c-source-200809l-define/29798084#29798084", "title": "FreeBSD: Implicit declaration of getpagesize with _POSIX_C_SOURCE=200809L defined.", "body": "<p>(1) The <code>_POSIX_C_SOURCE</code> is a wrong define. You need the <code>_XOPEN_SOURCE</code>. For example:</p>\n\n<pre><code>cc -D_XOPEN_SOURCE=700 test.c \n</code></pre>\n\n<p>or </p>\n\n<pre><code>cc -D_XOPEN_SOURCE=600 test.c \n</code></pre>\n\n<p>The <code>600</code> and <code>700</code> signify version of the Single Unix Specification (SUS for short, aka Open Group Specification, aka POSIX) your application expects from the system library. <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap02.html\" rel=\"nofollow\">See here for the SUSv7.</a></p>\n\n<p>(2) BUT. That might still not work, because the <a href=\"https://www.freebsd.org/cgi/man.cgi?query=getpagesize&amp;apropos=0&amp;sektion=0&amp;manpath=FreeBSD%2010.1-RELEASE&amp;arch=default&amp;format=html\" rel=\"nofollow\"><code>getpagesize()</code></a> is a BSD-specific function, which actually might be hidden if you try to compile the file in the POSIX-compliance mode.</p>\n\n<p>Normally you need nothing special to get access to the BSD functions on a BSD system, but portable way is to provide the <code>_BSD_SOURCE</code> define.</p>\n\n<p>The more portable, POSIX-compliant way to get the page size is  <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/sysconf.html\" rel=\"nofollow\"><code>sysconf(_SC_PAGE_SIZE)</code></a> function. <a href=\"https://www.freebsd.org/cgi/man.cgi?query=sysconf&amp;apropos=0&amp;sektion=0&amp;manpath=FreeBSD%2010.1-RELEASE&amp;arch=default&amp;format=html\" rel=\"nofollow\">FreeBSD man page</a>.</p>\n\n<p>P.S. Do not have a BSD at hand to test it.</p>\n"}], "owner": {"reputation": 1837, "user_id": 936426, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/0d043fb94125cfac97996b5069b43a08?s=128&d=identicon&r=PG", "display_name": "M.K. aka Grisu", "link": "https://stackoverflow.com/users/936426/m-k-aka-grisu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1367, "favorite_count": 0, "accepted_answer_id": 29798084, "answer_count": 1, "score": 3, "last_activity_date": 1429706878, "creation_date": 1429705567, "question_id": 29797547, "link": "https://stackoverflow.com/questions/29797547/freebsd-implicit-declaration-of-getpagesize-with-posix-c-source-200809l-define", "title": "FreeBSD: Implicit declaration of getpagesize with _POSIX_C_SOURCE=200809L defined.", "body": "<p>I am currently porting some OS related function of a software project from Linux to FreeBSD. Thereby, I recognized the following problem using <code>getpagesize</code> if  <code>_POSIX_C_SOURCE=200809L</code>is defined on FreeBSD 10.1. </p>\n\n<p>I created a small test program </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\nint main(int argc, char **argv)\n{\n        int i = getpagesize(); \n\n        return 0;\n}\n</code></pre>\n\n<p>If I compile is using </p>\n\n<pre><code>cc test.c -o test \n</code></pre>\n\n<p>it compiles without any warnings. But if I define <code>_POSIX_C_SOURCE=200809L</code> (result of the proper POSIX definition of <code>getline</code> function which I need in other parts of the code) I get:</p>\n\n<pre><code>cc test.c -D_POSIX_C_SOURCE=200809L\ntest.c:5:10: warning: implicit declaration of function 'getpagesize' is invalid in C99 [-Wimplicit-function-declaration]\n        int i = getpagesize(); \n                ^\n</code></pre>\n\n<p>Although I included <code>unistd.h</code> as stated in the manpage of <code>getpagesize</code>. How can I make the code compiling without warnings with still defined <code>_POSIX_C_SOURCE</code>? </p>\n"}, {"tags": ["c", "input", "formatting", "scanf"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1429705353, "post_id": 29797394, "comment_id": 47722940, "body": "I hope that in your actual code you have actual variables as arguments, and not types. And unless you post <i>actual</i> and working code, together with the input, we will not really be able to help you."}, {"owner": {"reputation": 8876, "user_id": 1545171, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TiAiM.jpg?s=128&g=1", "display_name": "DrKoch", "link": "https://stackoverflow.com/users/1545171/drkoch"}, "edited": false, "score": 0, "creation_date": 1429705465, "post_id": 29797394, "comment_id": 47723038, "body": "Messages? Exceptions? Is one of your variables <code>i</code>?"}, {"owner": {"reputation": 153, "user_id": 4710237, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6578510b9e774a4dc029cd56270732ec?s=128&d=identicon&r=PG&f=1", "display_name": "LiquideX", "link": "https://stackoverflow.com/users/4710237/liquidex"}, "edited": false, "score": 0, "creation_date": 1429705528, "post_id": 29797394, "comment_id": 47723096, "body": "Yes i do have actual variables the types were just a place holders.Also this is the actual code...."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1429705556, "post_id": 29797394, "comment_id": 47723126, "body": "Please don&#39;t edit questions in a way that makes existing comments and answers invalid."}], "answers": [{"comments": [{"owner": {"reputation": 153, "user_id": 4710237, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6578510b9e774a4dc029cd56270732ec?s=128&d=identicon&r=PG&f=1", "display_name": "LiquideX", "link": "https://stackoverflow.com/users/4710237/liquidex"}, "edited": false, "score": 0, "creation_date": 1429705417, "post_id": 29797447, "comment_id": 47723004, "body": "the int, char, char, char are only placeholders i have  actual variables in the real code"}, {"owner": {"reputation": 153, "user_id": 4710237, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6578510b9e774a4dc029cd56270732ec?s=128&d=identicon&r=PG&f=1", "display_name": "LiquideX", "link": "https://stackoverflow.com/users/4710237/liquidex"}, "edited": false, "score": 1, "creation_date": 1429706262, "post_id": 29797447, "comment_id": 47723712, "body": "Thank you @Sourav Ghosh that was very helpful"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 3, "last_activity_date": 1429705794, "last_edit_date": 1429705794, "creation_date": 1429705338, "answer_id": 29797447, "question_id": 29797394, "link": "https://stackoverflow.com/questions/29797394/how-to-use-scanf-in-for-loop/29797447#29797447", "title": "How to use scanf in for loop", "body": "<p>Your usage of <code>scanf()</code> is wrong. You have to provide the <strong>pointer to the variable</strong> to store the value read by <code>scanf()</code>. You need to use it like below</p>\n\n<pre><code>for (int i = 1; i &lt;= 10; ++i) {\n    scanf(\"%c, %d, %d, %d\",&amp;charVar,&amp;intvar1,&amp;intVar2,&amp;intVar3);\n}\n</code></pre>\n\n<hr>\n\n<p>EDIT:</p>\n\n<p>Point 1: The supplied <em>format string</em> should <strong>exactly</strong> match with the input. Otherwise, <code>scanf()</code> will fail. If your input is not of format <code>(&lt;char&gt;, &lt;int&gt;....</code> , it will fail. Either of missing <code>(</code>, <code>)</code>, <code>,</code> will cause mismatch in the supplied format string with the input and make <code>scanf()</code> to stop scanning. It's strongly recommended to check the return value of <code>scanf()</code> to ensure it's success.</p>\n\n<p>Point 2: To avoid reading the <code>\\n</code> stored by previous ENTER&lt;\\kbd> key press, you should add a leading space before <code>%c</code>. So, you can use something like</p>\n\n<pre><code>scanf(\" %c, %d, %d, %d\",&amp;charVar,&amp;intvar1,&amp;intVar2,&amp;intVar3);\n       ^\n       |\n     Notice here\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 2, "last_activity_date": 1429705488, "creation_date": 1429705488, "answer_id": 29797512, "question_id": 29797394, "link": "https://stackoverflow.com/questions/29797394/how-to-use-scanf-in-for-loop/29797512#29797512", "title": "How to use scanf in for loop", "body": "<pre><code>scanf(\"(%c, %d, %d, %d)\",&amp;charvar,&amp;intvar1,&amp;intvar2,&amp;intvar3);\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>scanf(\" %c, %d, %d, %d\",&amp;charvar,&amp;intvar1,&amp;intvar2,&amp;intvar3);\n</code></pre>\n\n<p>Note the space before <code>%c</code> which ignores newline if it exists. If your input is not separated by commas</p>\n\n<pre><code>scanf(\" %c %d %d %d\",&amp;charvar,&amp;intvar1,&amp;intvar2,&amp;intvar3);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 160, "user_id": 4023641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2ccH9.jpg?s=128&g=1", "display_name": "Carlos Rodrigues", "link": "https://stackoverflow.com/users/4023641/carlos-rodrigues"}, "is_accepted": false, "score": 1, "last_activity_date": 1429706048, "creation_date": 1429706048, "answer_id": 29797744, "question_id": 29797394, "link": "https://stackoverflow.com/questions/29797394/how-to-use-scanf-in-for-loop/29797744#29797744", "title": "How to use scanf in for loop", "body": "<p>Like Sourav Ghosh and Gopi said, scanf will not work properly with this syntax</p>\n\n<pre><code>scanf(\"(%c, %d, %d, %d)\",&amp;char,&amp;int,&amp;int,&amp;int);\n</code></pre>\n\n<p>It should be</p>\n\n<pre><code>scanf(\"%c %d %d %d\",&amp;char,&amp;int,&amp;int,&amp;int);\n</code></pre>\n\n<p>But you can read a string first, and then use sscanf.</p>\n\n<p>Try this code:</p>\n\n<pre><code>char ch;\nint a, b, c, i;\n\nchar teste[256];\n\nfor(i=0;i&lt;10;i++){\n    fgets(teste, 256, stdin);\n    sscanf(teste, \"(%c, %d, %d, %d)\", &amp;ch, &amp;a, &amp;b, &amp;c);\n    printf(\"%c %d %d %d\\n\", ch, a, b, c);\n}\n</code></pre>\n"}], "owner": {"reputation": 153, "user_id": 4710237, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6578510b9e774a4dc029cd56270732ec?s=128&d=identicon&r=PG&f=1", "display_name": "LiquideX", "link": "https://stackoverflow.com/users/4710237/liquidex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10013, "favorite_count": 0, "accepted_answer_id": 29797447, "answer_count": 3, "score": 1, "last_activity_date": 1429713680, "creation_date": 1429705211, "last_edit_date": 1429713680, "question_id": 29797394, "link": "https://stackoverflow.com/questions/29797394/how-to-use-scanf-in-for-loop", "title": "How to use scanf in for loop", "body": "<p>Whenever i try to read input with</p>\n\n<pre><code>for (int i = 1; i &lt;= 10; ++i) {\n    scanf(\"(%c, %d, %d, %d)\",&amp;charv,&amp;intv1,&amp;intv2,&amp;intv3);\n}\n</code></pre>\n\n<p>I only get to <code>scanf()</code> once. What is the problem ?</p>\n\n<p>Input -> (P, 1, 2, 3)......(P, 2, 3, 12)</p>\n"}, {"tags": ["c", "variables", "definition", "variable-declaration"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1429704580, "post_id": 29797022, "comment_id": 47722320, "body": "Somewhat related, when you define a symbol which haven&#39;t been declared yet, you both declare and define the symbol."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 1, "creation_date": 1429704692, "post_id": 29797022, "comment_id": 47722413, "body": "C has the concept of <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.9.2\" rel=\"nofollow noreferrer\">tentative definition</a>."}, {"owner": {"reputation": 14704, "user_id": 908515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f1L9v.png?s=128&g=1", "display_name": "undur_gongor", "link": "https://stackoverflow.com/users/908515/undur-gongor"}, "edited": false, "score": 0, "creation_date": 1429705595, "post_id": 29797022, "comment_id": 47723155, "body": "Both lines are declarations. Both can be definitions (and usually are)."}], "answers": [{"comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1429704508, "post_id": 29797040, "comment_id": 47722262, "body": "And that of course implies that <i>both</i> lines of code in the question can be definitions."}], "tags": [], "owner": {"reputation": 21711, "user_id": 418729, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Vm1jt.jpg?s=128&g=1", "display_name": "Sadique", "link": "https://stackoverflow.com/users/418729/sadique"}, "is_accepted": false, "score": 4, "last_activity_date": 1429704620, "last_edit_date": 1429704620, "creation_date": 1429704372, "answer_id": 29797040, "question_id": 29797022, "link": "https://stackoverflow.com/questions/29797022/declaring-vs-defining-variables-in-c/29797040#29797040", "title": "Declaring vs defining variables in c", "body": "<p>Definition is when storage is allocated for a variable. Declaration does not imply storage has been allocated yet.</p>\n\n<p>A declaration is used in order to access functions or variables defined in different source files, or in a library. A mismatch between the definition type and the declaration type generates a compiler error.</p>\n\n<p>Here are some examples of declarations that are not definitions, in C:</p>\n\n<pre><code>extern char example1;\nextern int example2;\nvoid example3(void);\n</code></pre>\n\n<p>From the <a href=\"http://www.open-std.org/JTC1/SC22/WG14/www/docs/n1256.pdf\" rel=\"nofollow\">C standard (n1256)</a>:</p>\n\n<blockquote>\n<b>6.7 Declarations</b><br>\n...<br>\n5 A declaration specifies the interpretation and attributes of a set of identifiers. \n\n<br><br>A <b><em>definition</em></b> of an identifier is a declaration for that identifier that:\n<br>\n\u2014 for an object, causes storage to be reserved for that object;\n<br>\n\u2014 for a function, includes the function body;<sup>101)</sup><br>\n\u2014 for an enumeration constant or typedef name, is the (only) declaration of the\nidentifier.\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 3, "last_activity_date": 1429704792, "last_edit_date": 1429704792, "creation_date": 1429704387, "answer_id": 29797048, "question_id": 29797022, "link": "https://stackoverflow.com/questions/29797022/declaring-vs-defining-variables-in-c/29797048#29797048", "title": "Declaring vs defining variables in c", "body": "<blockquote>\n  <p><em>\"Does the compiler set aside memory for the declared (but not defined) variables?\"</em></p>\n</blockquote>\n\n<p>No. Compiler only allocates memory for (at time of) variable definition, not on variable declaration.</p>\n\n<p>You can better understand the logic using a simple analogy, multiple declaration is allowed for a single variable, but multiple definition is not.</p>\n"}, {"tags": [], "owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "is_accepted": true, "score": 2, "last_activity_date": 1429705428, "last_edit_date": 1429705428, "creation_date": 1429704453, "answer_id": 29797077, "question_id": 29797022, "link": "https://stackoverflow.com/questions/29797022/declaring-vs-defining-variables-in-c/29797077#29797077", "title": "Declaring vs defining variables in c", "body": "<blockquote>\n  <p>Does the compiler set aside memory for the declared (but not defined)\n  variables?</p>\n</blockquote>\n\n<p>No, compiler just take a note of this variable name and type. No memory is allocated for declaration.</p>\n\n<p><code>int i;</code> can behave as definition if <code>i</code> is used (not optimized out) and <a href=\"http://ideone.com/nNy1fu\" rel=\"nofollow\">no other definition</a> of <code>i</code> is present in any other compilation unit and storage will be reserved for it. (because storage is reserved for definitions)</p>\n"}], "owner": {"reputation": 1753, "user_id": 4637326, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/1093075744051398/picture?type=large", "display_name": "Radoslaw Krasimirow", "link": "https://stackoverflow.com/users/4637326/radoslaw-krasimirow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 316, "favorite_count": 0, "closed_date": 1429706054, "accepted_answer_id": 29797077, "answer_count": 3, "score": 2, "last_activity_date": 1429705571, "creation_date": 1429704317, "last_edit_date": 1429705571, "question_id": 29797022, "link": "https://stackoverflow.com/questions/29797022/declaring-vs-defining-variables-in-c", "closed_reason": "Duplicate", "title": "Declaring vs defining variables in c", "body": "<p>As I know this is a declaration:</p>\n\n<pre><code>int i;\n</code></pre>\n\n<p>and this is a definition:</p>\n\n<pre><code>int i = 10;\n</code></pre>\n\n<p>May be I am wrong I don't argue.</p>\n\n<p><strong>The question is</strong> Does the compiler set aside memory for the declared (but not defined) variables?</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 2, "creation_date": 1429704441, "post_id": 29796990, "comment_id": 47722197, "body": "Could you please define &quot;not effective&quot;?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1429704579, "post_id": 29796990, "comment_id": 47722317, "body": "Standard Warning : Please <a href=\"http://stackoverflow.com/q/605845/2173917\">do not cast</a> the return value of <code>malloc()</code> and family in <code>C</code>."}, {"owner": {"reputation": 11, "user_id": 4819281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04e86c8bf2649a1092b40cc1b54bad51?s=128&d=identicon&r=PG", "display_name": "Maksim Sukhanov", "link": "https://stackoverflow.com/users/4819281/maksim-sukhanov"}, "edited": false, "score": 0, "creation_date": 1429704854, "post_id": 29796990, "comment_id": 47722532, "body": "Sorry, <b>float</b>  array not int array."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1429704860, "post_id": 29796990, "comment_id": 47722537, "body": "Also, there is little reason to zero-fill an array who&#39;s content is about to be <i>completely</i> reassigned with value-overwrites (assuming that is the real unstated intention). <code>malloc(size * sizeof *dst)</code> should be sufficient. And you took the time to check <code>src</code> for <code>NULL</code>. May want to check <code>size</code> for <code>&gt; 0</code> (which should be <code>size_t</code> regardless)."}, {"owner": {"reputation": 11, "user_id": 4819281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04e86c8bf2649a1092b40cc1b54bad51?s=128&d=identicon&r=PG", "display_name": "Maksim Sukhanov", "link": "https://stackoverflow.com/users/4819281/maksim-sukhanov"}, "edited": false, "score": 0, "creation_date": 1429705016, "post_id": 29796990, "comment_id": 47722664, "body": "By &quot;not effective&quot; I mean that this very simple and naive and maybe there is another way."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1429705073, "post_id": 29796990, "comment_id": 47722703, "body": "@\u041c\u0430\u043a\u0441\u0438\u043c\u0421\u0443\u0445\u0430\u043d\u043e\u0432 This is the correct way. You&#39;re not just &quot;copying&quot; data; you&#39;re transforming <i>values</i>."}, {"owner": {"reputation": 11, "user_id": 4819281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04e86c8bf2649a1092b40cc1b54bad51?s=128&d=identicon&r=PG", "display_name": "Maksim Sukhanov", "link": "https://stackoverflow.com/users/4819281/maksim-sukhanov"}, "edited": false, "score": 1, "creation_date": 1429705075, "post_id": 29796990, "comment_id": 47722706, "body": "I am using Visual Studio, and it forces me to cast the result."}, {"owner": {"reputation": 11, "user_id": 4819281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04e86c8bf2649a1092b40cc1b54bad51?s=128&d=identicon&r=PG", "display_name": "Maksim Sukhanov", "link": "https://stackoverflow.com/users/4819281/maksim-sukhanov"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1429705194, "post_id": 29796990, "comment_id": 47722803, "body": "@WhozCraig Thank you."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1429707912, "post_id": 29796990, "comment_id": 47725070, "body": "Hmm, you say * Visual Studio ... forces .. to cast the result*. My own one does not. Wouldn&#39;t you source be a <code>cpp</code> file resulting in a C++ compilation ?"}, {"owner": {"reputation": 11, "user_id": 4819281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04e86c8bf2649a1092b40cc1b54bad51?s=128&d=identicon&r=PG", "display_name": "Maksim Sukhanov", "link": "https://stackoverflow.com/users/4819281/maksim-sukhanov"}, "reply_to_user": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1429708568, "post_id": 29796990, "comment_id": 47725627, "body": "@SergeBallesta My source file is <code>.cu</code>. I&#39;m using cuda and write in C."}, {"owner": {"reputation": 11, "user_id": 4819281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04e86c8bf2649a1092b40cc1b54bad51?s=128&d=identicon&r=PG", "display_name": "Maksim Sukhanov", "link": "https://stackoverflow.com/users/4819281/maksim-sukhanov"}, "reply_to_user": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1429708652, "post_id": 29796990, "comment_id": 47725706, "body": "@SergeBallesta My visual studio says: <code>error : a value of type &quot;void *&quot; cannot be assigned to an entity of type &quot;float *&quot;</code>"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1429710360, "post_id": 29796990, "comment_id": 47727163, "body": "I do not know cuda. But I suspect that MSVC compiles the file as if it was C++. Just try to put a class in it or a <code>new</code> , and I suppose it will compile it without any problem ... A C++ compiler almost accept a C source, the main difference being not allowing automatic cast  of pointer to any to <code>void *</code> and back."}, {"owner": {"reputation": 11, "user_id": 4819281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04e86c8bf2649a1092b40cc1b54bad51?s=128&d=identicon&r=PG", "display_name": "Maksim Sukhanov", "link": "https://stackoverflow.com/users/4819281/maksim-sukhanov"}, "reply_to_user": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1429710640, "post_id": 29796990, "comment_id": 47727421, "body": "@SergeBallesta Cuda project uses nvcc compiler, but yes it accepts C++ code. But still it throws error that I wrote above."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4819281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04e86c8bf2649a1092b40cc1b54bad51?s=128&d=identicon&r=PG", "display_name": "Maksim Sukhanov", "link": "https://stackoverflow.com/users/4819281/maksim-sukhanov"}, "edited": false, "score": 0, "creation_date": 1429709235, "post_id": 29798898, "comment_id": 47726243, "body": "Thank you. In the comments to question WhozCraig said the same way. I think this is true. Thank you I really appretiate your help."}], "tags": [], "owner": {"reputation": 2162, "user_id": 2534472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d8dce53c214aa63495ff868b09a1a4?s=128&d=identicon&r=PG", "display_name": "UniversE", "link": "https://stackoverflow.com/users/2534472/universe"}, "is_accepted": false, "score": 0, "last_activity_date": 1429708866, "creation_date": 1429708866, "answer_id": 29798898, "question_id": 29796990, "link": "https://stackoverflow.com/questions/29796990/copy-between-arrays-with-different-element-size-in-c/29798898#29798898", "title": "Copy between arrays with different element size in C", "body": "<p>You should write it like this (equivalent):</p>\n\n<pre><code>float *uint8_t_mas_to_float_mas(uint8_t *src, int size)\n{\n    if (!src)\n        return NULL;\n\n    float *dst = (float*)malloc(size*sizeof(float));\n\n    if (!dst)\n        return NULL;\n\n    for (int i = 0; i &lt; size; i++)\n        dst[i] = (float)src[i];\n\n    return dst;\n}\n</code></pre>\n\n<p>This is completely OK. Let the optimizer do it's job. The bottleneck is the <code>malloc</code> call - so you don't need to do anything here, unless you are copying millions of elements.</p>\n"}], "owner": {"reputation": 11, "user_id": 4819281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04e86c8bf2649a1092b40cc1b54bad51?s=128&d=identicon&r=PG", "display_name": "Maksim Sukhanov", "link": "https://stackoverflow.com/users/4819281/maksim-sukhanov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1429708866, "creation_date": 1429704249, "last_edit_date": 1429705569, "question_id": 29796990, "link": "https://stackoverflow.com/questions/29796990/copy-between-arrays-with-different-element-size-in-c", "title": "Copy between arrays with different element size in C", "body": "<p>I need to copy elements from uint8_t array to float array. </p>\n\n<p>I wrote simple function that came to my mind instantly.</p>\n\n<pre><code>float *uint8_t_mas_to_float_mas(uint8_t *src, int size)\n{\n    float *dst = NULL;\n    if (!src)\n        return NULL;\n\n    dst = (float*)calloc(size, sizeof(float));\n\n    if (!dst)\n        return NULL;\n\n    for (int i = 0; i &lt; size; i++)\n        dst[i] = (float)src[i];\n\n    return dst;\n}\n</code></pre>\n\n<p>But I think it's not effective and unfortunatelly I cant come up with something else.</p>\n\n<p>Can someone help?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c", "scanf"], "comments": [{"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 3, "creation_date": 1429703154, "post_id": 29796513, "comment_id": 47721057, "body": "You should use the preview feature to check your code is correctly inserted and readable. The preview is WYSIWYG so it&#39;s reliable"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1429703251, "post_id": 29796513, "comment_id": 47721141, "body": "For some specific input, please provide the expected and actua output. And please <i>please</i> format your code so it&#39;s readable, you <i>have</i> heard of indentation?"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1429703302, "post_id": 29796513, "comment_id": 47721199, "body": "What is your actual question? Please be (much) more specific than &quot;it&#39;s not working&quot;."}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 2, "creation_date": 1429703312, "post_id": 29796513, "comment_id": 47721213, "body": "I voted to close, because <i>Questions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. Questions without a clear problem statement are not useful to other readers. See: <a href=\"http://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example.</a></i>"}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1429703332, "post_id": 29796513, "comment_id": 47721234, "body": "also, take the time to format readably."}, {"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "reply_to_user": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1429703352, "post_id": 29796513, "comment_id": 47721250, "body": "@MarcusM&#252;ller You should include the link to your &quot;See:&quot;"}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "reply_to_user": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 0, "creation_date": 1429703400, "post_id": 29796513, "comment_id": 47721283, "body": "@Eregrith: good point; edited :)"}, {"owner": {"reputation": 59, "user_id": 3763574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/294565ca55fc4bf8e6eb9bac49bd1535?s=128&d=identicon&r=PG&f=1", "display_name": "Dikshant", "link": "https://stackoverflow.com/users/3763574/dikshant"}, "edited": false, "score": 0, "creation_date": 1429703558, "post_id": 29796513, "comment_id": 47721393, "body": "output is &quot;Nekaj ne delas prav&quot;,it is not taking input from scanf()."}, {"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 0, "creation_date": 1429703775, "post_id": 29796513, "comment_id": 47721596, "body": "@Dikshant have you tried <code>printf(&quot;You entered char [%c]\\n&quot;, op);</code> just by curiosity?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1429703788, "post_id": 29796513, "comment_id": 47721612, "body": "@Dikshant I&#39;ll bet anything that <code>scanf</code> reads input, but it&#39;s not the input you expect it to be. Please <b><i>edit the question</i></b> to show the actual input."}, {"owner": {"reputation": 59, "user_id": 3763574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/294565ca55fc4bf8e6eb9bac49bd1535?s=128&d=identicon&r=PG&f=1", "display_name": "Dikshant", "link": "https://stackoverflow.com/users/3763574/dikshant"}, "edited": false, "score": 0, "creation_date": 1429703845, "post_id": 29796513, "comment_id": 47721663, "body": "I think you all have read the problem and also punished me by down voting me.Now will you help me to find why this program is taking input istead of using scanf() and why it is giving drect default value as a output."}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1429704150, "post_id": 29796513, "comment_id": 47721932, "body": "why are you reading <code>r</code> from <code>stdin</code>? It is the result variable."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1429704197, "post_id": 29796513, "comment_id": 47721981, "body": "We have not only told you what the most likely problem is and how to solve it, we have also told you how to improve the question (also see <a href=\"http://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>) and you haven&#39;t done that. Neither have you acknowledged the solutions posted both as comments and as answers. Start by telling us the complete and actual input you enter to your program, then modify your code to see what <a href=\"http://en.cppreference.com/w/c/io/fscanf\" rel=\"nofollow noreferrer\"><code>scanf</code></a> returns and tell us that as well."}, {"owner": {"reputation": 59, "user_id": 3763574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/294565ca55fc4bf8e6eb9bac49bd1535?s=128&d=identicon&r=PG&f=1", "display_name": "Dikshant", "link": "https://stackoverflow.com/users/3763574/dikshant"}, "edited": false, "score": 0, "creation_date": 1429704901, "post_id": 29796513, "comment_id": 47722567, "body": "It is not taking any input ,it is just giving &quot;Nekaj ne delas prav&quot; as output and then program terminates"}], "answers": [{"tags": [], "owner": {"reputation": 3561, "user_id": 4743213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/729fe0ee6cf13e7d7a99191fe9ecf194?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul Mayani", "link": "https://stackoverflow.com/users/4743213/rahul-mayani"}, "is_accepted": false, "score": 1, "last_activity_date": 1429703674, "creation_date": 1429703674, "answer_id": 29796744, "question_id": 29796513, "link": "https://stackoverflow.com/questions/29796513/scanf-not-taking-input-from-console/29796744#29796744", "title": "scanf() not taking input from console", "body": "<p>Change:</p>\n\n<pre><code>scanf(\"%c\", myNothing);\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>scanf(\"%c\", &amp;myNothing);\n</code></pre>\n\n<p>Or better yet:</p>\n\n<pre><code>myNothing = getchar();\n</code></pre>\n\n<p>Also, make sure you have compiler warnings enabled.</p>\n"}, {"comments": [{"owner": {"reputation": 59, "user_id": 3763574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/294565ca55fc4bf8e6eb9bac49bd1535?s=128&d=identicon&r=PG&f=1", "display_name": "Dikshant", "link": "https://stackoverflow.com/users/3763574/dikshant"}, "edited": false, "score": 0, "creation_date": 1429704224, "post_id": 29796838, "comment_id": 47722006, "body": "I have already done that but still not working."}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1429704375, "post_id": 29796838, "comment_id": 47722130, "body": "are you sure that it is not working? <a href=\"https://ideone.com/aHcrZk\" rel=\"nofollow noreferrer\">ideone.com/aHcrZk</a>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 59, "user_id": 3763574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/294565ca55fc4bf8e6eb9bac49bd1535?s=128&d=identicon&r=PG&f=1", "display_name": "Dikshant", "link": "https://stackoverflow.com/users/3763574/dikshant"}, "edited": false, "score": 1, "creation_date": 1429704526, "post_id": 29796838, "comment_id": 47722277, "body": "@Dikshant what is your input? how you are providing the inputs?"}, {"owner": {"reputation": 59, "user_id": 3763574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/294565ca55fc4bf8e6eb9bac49bd1535?s=128&d=identicon&r=PG&f=1", "display_name": "Dikshant", "link": "https://stackoverflow.com/users/3763574/dikshant"}, "edited": false, "score": 0, "creation_date": 1429704835, "post_id": 29796838, "comment_id": 47722514, "body": "&quot;ya its not working,I am not able to provide input ,it just giving output as&quot;Nekaj ne delas prav&quot; and then program terminates."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 59, "user_id": 3763574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/294565ca55fc4bf8e6eb9bac49bd1535?s=128&d=identicon&r=PG&f=1", "display_name": "Dikshant", "link": "https://stackoverflow.com/users/3763574/dikshant"}, "edited": false, "score": 0, "creation_date": 1429705058, "post_id": 29796838, "comment_id": 47722690, "body": "@Dikshant That&#39;s strange !! How you are compiling your code and running your binary?"}, {"owner": {"reputation": 59, "user_id": 3763574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/294565ca55fc4bf8e6eb9bac49bd1535?s=128&d=identicon&r=PG&f=1", "display_name": "Dikshant", "link": "https://stackoverflow.com/users/3763574/dikshant"}, "edited": false, "score": 0, "creation_date": 1429705203, "post_id": 29796838, "comment_id": 47722811, "body": "&quot;I am using online compiler codepad.org&quot;"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 59, "user_id": 3763574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/294565ca55fc4bf8e6eb9bac49bd1535?s=128&d=identicon&r=PG&f=1", "display_name": "Dikshant", "link": "https://stackoverflow.com/users/3763574/dikshant"}, "edited": false, "score": 0, "creation_date": 1429706282, "post_id": 29796838, "comment_id": 47723729, "body": "@Dikshant that is because in codepad you don&#39;t have the option to provide the input. Try a better alternative, ideone.com. put your input in <code>stdin</code> field before running."}, {"owner": {"reputation": 59, "user_id": 3763574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/294565ca55fc4bf8e6eb9bac49bd1535?s=128&d=identicon&r=PG&f=1", "display_name": "Dikshant", "link": "https://stackoverflow.com/users/3763574/dikshant"}, "edited": false, "score": 0, "creation_date": 1429706775, "post_id": 29796838, "comment_id": 47724140, "body": "&quot;I also use ideone.com on your recommendation but still same same output.,not able to take input.I am not getting where i am going wrong.&quot;"}, {"owner": {"reputation": 59, "user_id": 3763574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/294565ca55fc4bf8e6eb9bac49bd1535?s=128&d=identicon&r=PG&f=1", "display_name": "Dikshant", "link": "https://stackoverflow.com/users/3763574/dikshant"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1429706816, "post_id": 29796838, "comment_id": 47724175, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/75937/discussion-between-dikshant-and-sourav-ghosh\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 4, "last_activity_date": 1429704973, "last_edit_date": 1429704973, "creation_date": 1429703875, "answer_id": 29796838, "question_id": 29796513, "link": "https://stackoverflow.com/questions/29796513/scanf-not-taking-input-from-console/29796838#29796838", "title": "scanf() not taking input from console", "body": "<p>In your code, please change</p>\n\n<pre><code>scanf(\"%f\",&amp;a);\nscanf(\"%c\",&amp;op);\nscanf(\"%f\",&amp;b);\nscanf(\"%f\",&amp;r);\n</code></pre>\n\n<p>to</p>\n\n<pre><code>scanf(\"%f\",&amp;a);\nscanf(\" %c\",&amp;op);  //notice here\nscanf(\"%f\",&amp;b);\nscanf(\"%f\",&amp;r);\n</code></pre>\n\n<p>Without the leading space before <code>%c</code>, the <code>\\n</code> stoted by previous <kbd>ENTER</kbd> key press after previous input, will be read and considered as valid input for <code>%c</code> format specifier. So, the second <code>scanf()</code> will not <em>ask</em> for seperate user input and the flow will continue to the third <code>scanf()</code>.</p>\n\n<p>The whitespace before <code>%c</code> will consume all leading whitespace like <code>char</code>s, including the <code>\\n</code> stoted by previous <kbd>ENTER</kbd> key press and will consider only a non-whitespace input.</p>\n\n<p>Note: </p>\n\n<ol>\n<li><p><code>%f</code> format specifier reads and <em>ignores</em> the leading <code>\\n</code>, so in that case, you don't need to provide the leading space before <code>%f</code> explicitly.</p></li>\n<li><p>The signature of <code>main()</code> is <code>int main(void)</code>.</p></li>\n</ol>\n"}], "owner": {"reputation": 59, "user_id": 3763574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/294565ca55fc4bf8e6eb9bac49bd1535?s=128&d=identicon&r=PG&f=1", "display_name": "Dikshant", "link": "https://stackoverflow.com/users/3763574/dikshant"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 496, "favorite_count": 0, "closed_date": 1429729658, "answer_count": 2, "score": -7, "last_activity_date": 1437761085, "creation_date": 1429703085, "last_edit_date": 1437761085, "question_id": 29796513, "link": "https://stackoverflow.com/questions/29796513/scanf-not-taking-input-from-console", "closed_reason": "Not suitable for this site", "title": "scanf() not taking input from console", "body": "<pre><code>#include&lt;stdio.h&gt; \n\nint main() {\n\n    float a, b, r;\n    char op;\n\n    scanf(\"%f\",&amp;a);\n    scanf(\"%c\",&amp;op);\n    scanf(\"%f\",&amp;b);\n    scanf(\"%f\",&amp;r);\n\n    switch(op) {\n\n        case '+':\n            r = a + b;\n            printf(\"%f\", r);\n        break;\n\n        case '-':\n            r = a - b;     \n            printf(\"%f\", r);     \n        break;\n\n        case '*':\n            r = a * b;    \n            printf(\"%f\", r);     \n        break;\n\n        case '/':\n            r = a / b;     \n            printf(\"%f\", r);     \n        break;\n\n        default:\n            printf (\"Nekaj ne delas prav\");\n\n    }\n\n    return 0;\n\n}\n</code></pre>\n\n<p>it is giving output </p>\n\n<blockquote>\n  <p>\"Nekaj ne delas prav\" </p>\n</blockquote>\n\n<p>and  not taking any input. instead of using 'scanf()'and why it directly gives default value as output instead of using switch statement.</p>\n"}, {"tags": ["c", "regex", "glib"], "comments": [{"owner": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 1, "creation_date": 1429703972, "post_id": 29796472, "comment_id": 47721774, "body": "What is the exact error you get?  I listened to a Gerald Celente interview on (King World News)[www.kingworldnews.com] last night ^ ^"}, {"owner": {"reputation": 30819, "user_id": 598420, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/P33jy.jpg?s=128&g=1", "display_name": "Anirudha", "link": "https://stackoverflow.com/users/598420/anirudha"}, "edited": false, "score": 0, "creation_date": 1429704286, "post_id": 29796472, "comment_id": 47722055, "body": "why not use a library like <code>GMime</code> and if you do want to retrieve MIME Content-type headers only why not a regex like this: <code>\\s+--[a-zA-Z0-9]+\\s+Content-Type:(.*)[\\r\\n]+</code>"}, {"owner": {"reputation": 955, "user_id": 1815342, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b28bf4861b7209ccfee83c67b82df343?s=128&d=identicon&r=PG", "display_name": "geraldCelente", "link": "https://stackoverflow.com/users/1815342/geraldcelente"}, "reply_to_user": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1429704781, "post_id": 29796472, "comment_id": 47722473, "body": "@TimBiegeleisen I do not get any error. Simply g_match_info_matches(match_info) evaluates to false and tthe while loop is never executed. Glad you like Gerald Celente :)"}, {"owner": {"reputation": 955, "user_id": 1815342, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b28bf4861b7209ccfee83c67b82df343?s=128&d=identicon&r=PG", "display_name": "geraldCelente", "link": "https://stackoverflow.com/users/1815342/geraldcelente"}, "reply_to_user": {"reputation": 30819, "user_id": 598420, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/P33jy.jpg?s=128&g=1", "display_name": "Anirudha", "link": "https://stackoverflow.com/users/598420/anirudha"}, "edited": false, "score": 0, "creation_date": 1429705262, "post_id": 29796472, "comment_id": 47722867, "body": "@Anirudha I am boud to use glib. It is a project requirement. Whell your suggested expression should work. However I need the regex to be 1. as flexible as possible in order to also match header not 100% conformant to the relevant RFC; 2. match as many headers as possible in one shot for the purpose of avoing false positive, such as chunck of message quoting some Mime Content-type headers... I cannot avoid this 100%, but I need to make it as hard as possible to happen."}, {"owner": {"reputation": 955, "user_id": 1815342, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b28bf4861b7209ccfee83c67b82df343?s=128&d=identicon&r=PG", "display_name": "geraldCelente", "link": "https://stackoverflow.com/users/1815342/geraldcelente"}, "edited": false, "score": 0, "creation_date": 1429705382, "post_id": 29796472, "comment_id": 47722965, "body": "To contributor suggestint to escape [\\x22], I will try, bear with me. The project takes some 20 minutes to compile. I don&#39;t know why by your comment strangely disappeared. Sorry..."}], "answers": [{"comments": [{"owner": {"reputation": 955, "user_id": 1815342, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b28bf4861b7209ccfee83c67b82df343?s=128&d=identicon&r=PG", "display_name": "geraldCelente", "link": "https://stackoverflow.com/users/1815342/geraldcelente"}, "edited": false, "score": 0, "creation_date": 1429716077, "post_id": 29797497, "comment_id": 47732048, "body": "Thanks, your answer did put me on the right track. Since &quot; is a reserved character, I used escaped it. Specifically I changed [\\x22] to [\\&quot;]. Thanks."}], "tags": [], "owner": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "is_accepted": true, "score": 1, "last_activity_date": 1429705451, "creation_date": 1429705451, "answer_id": 29797497, "question_id": 29796472, "link": "https://stackoverflow.com/questions/29796472/gregex-not-parsing-characters/29797497#29797497", "title": "gRegex not parsing &quot; characters", "body": "<p>Humor me and try this code:</p>\n\n<pre><code>regex = g_regex_new(\"((\\r\\n){2}((([--]{2,}[=][a-zA-Z0-9._]+)(\\r\\n)) ((((Content([\\x2D][a-zA-Z]+)+)[:]([\\x09\\x0C\\x20]*([a-zA-Z0-9\\x2D]+([\\x2F][a-zA-Z\\x2D]+)?)[;]?)(\\r\\n))([\\x09\\x0C\\x20]*[a-zA-Z]+[\\x09\\x0C\\x20]*[=][\\x22\\x22]?)))))\", 0, 0, NULL);\ng_regex_match(regex, SMTP_Message_string, 0, &amp;match_info);\n</code></pre>\n\n<p>If you look closely, I changed the end of your regex to <code>[\\x22\\x22]</code>.  My hunch is that the double quote is somehow reserved and it sees an open expression and is therefore failing.</p>\n"}], "owner": {"reputation": 955, "user_id": 1815342, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b28bf4861b7209ccfee83c67b82df343?s=128&d=identicon&r=PG", "display_name": "geraldCelente", "link": "https://stackoverflow.com/users/1815342/geraldcelente"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 29797497, "answer_count": 1, "score": 1, "last_activity_date": 1429705451, "creation_date": 1429702980, "last_edit_date": 1429704149, "question_id": 29796472, "link": "https://stackoverflow.com/questions/29796472/gregex-not-parsing-characters", "title": "gRegex not parsing &quot; characters", "body": "<p>I need to be able to extract Mime Content-Type headers from SMTP messages. For this purpose I am using the <code>g_regex</code> part of the <code>glib</code> library and I have created <a href=\"http://regexr.com/3as4j\" rel=\"nofollow\">this regular expression</a>.</p>\n\n<p>Note: In <code>g_regex</code> I changed <code>[\\s]</code> subpatterns to <code>(\\r\\n)</code> as the latter - with model Content-Type headers more precisely - are apparently not recognized by regexr. The resultant regex is </p>\n\n<pre><code>((\\r\\n){2}((([--]{2,}[=][a-zA-Z0-9._]+)(\\r\\n))((((Content([\\x2D][a-zA-Z]+)+)[:]([\\x09\\x0C\\x20]*([a-zA-Z0-9\\x2D]+([\\x2F][a-zA-Z\\x2D]+)?)[;]?)(\\r\\n))([\\x09\\x0C\\x20]*[a-zA-Z]+[\\x09\\x0C\\x20]*[=][\\x22]?[a-zA-Z\\x2D\\x2E]+[\\x22]?)?)(\\r\\n))+)(\\r\\n))\n</code></pre>\n\n<p>Please find my C code below:</p>\n\n<pre><code>GRegex *regex;\nGMatchInfo *match_infoX;\ngint start_content_pos, end_content_pos;\n\nregex = g_regex_new(\"((\\r\\n){2}((([--]{2,}[=][a-zA-Z0-9._]+)(\\r\\n))((((Content([\\x2D][a-zA-Z]+)+)[:]([\\x09\\x0C\\x20]*([a-zA-Z0-9\\x2D]+([\\x2F][a-zA-Z\\x2D]+)?)[;]?)(\\r\\n))([\\x09\\x0C\\x20]*[a-zA-Z]+[\\x09\\x0C\\x20]*[=][\\x22]?[a-zA-Z\\x2D\\x2E]+[\\x22]?)?)(\\r\\n))+)(\\r\\n))\", 0, 0, NULL);\ng_regex_match(regex, SMTP_Message_string, 0, &amp;match_info);\nwhile (g_match_info_matches(match_info))\n{\n    start_content_pos = end_content_pos = -1;\n\n    gchar *word = g_match_info_fetch(match_info, 0);\n    g_match_info_fetch_pos(match_infoX, 0, &amp;start_content_pos, &amp;end_content_pos);\n\n    g_print(\"Found: %s\\n\", word);\n    g_free(word);\n    g_match_info_next(match_info, NULL);\n}\ng_match_info_free(match_info);\ng_regex_unref(regex);\n</code></pre>\n\n<p>I have the following issue:</p>\n\n<p>For some strange reason the regular expression is working on regexr - link above - but is failing miserably with no apparent reason when used with <code>g_regex</code>. Specifically, in <code>g_regex</code> the subexpression </p>\n\n<pre><code>((\\r\\n){2}((([--]{2,}[=][a-zA-Z0-9._]+)(\\r\\n)) ((((Content([\\x2D][a-zA-Z]+)+)[:]([\\x09\\x0C\\x20]*([a-zA-Z0-9\\x2D]+([\\x2F][a-zA-Z\\x2D]+)?)[;]?)(\\r\\n))([\\x09\\x0C\\x20]*[a-zA-Z]+[\\x09\\x0C\\x20]*[=])))))\n</code></pre>\n\n<p>is working fine, but</p>\n\n<pre><code>((\\r\\n){2}((([--]{2,}[=][a-zA-Z0-9._]+)(\\r\\n)) ((((Content([\\x2D][a-zA-Z]+)+)[:]([\\x09\\x0C\\x20]*([a-zA-Z0-9\\x2D]+([\\x2F][a-zA-Z\\x2D]+)?)[;]?)(\\r\\n))([\\x09\\x0C\\x20]*[a-zA-Z]+[\\x09\\x0C\\x20]*[=][\\x22]?)))))\n</code></pre>\n\n<p>is not, which means the problem is in the <code>[\\x22]</code> - the <code>\"</code> character. I am unable to understand what is wrong. I have checked with a Hex veiwer, and the hex code is indeed <code>22</code>.</p>\n\n<p>Where is the problem? Might it be a glib bug or am I missing something?</p>\n"}, {"tags": ["c", "printf"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 16, "creation_date": 1429702801, "post_id": 29796371, "comment_id": 47720817, "body": "did you include <code>stdio.h</code>?"}, {"owner": {"reputation": 621, "user_id": 411339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2351e75c187c6fcb8dee93e62a9180a3?s=128&d=identicon&r=PG", "display_name": "Unavailable", "link": "https://stackoverflow.com/users/411339/unavailable"}, "edited": false, "score": 0, "creation_date": 1429702999, "post_id": 29796371, "comment_id": 47720948, "body": "You need to put &#39;\\\\&#39;  for the back slash."}, {"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 1, "creation_date": 1429703057, "post_id": 29796371, "comment_id": 47720990, "body": "<a href=\"https://www.google.fr/search?q=implicit+declaration+of+function+printf&amp;ie=utf-8&amp;oe=utf-8&amp;gws_rd=cr&amp;ei=dIk3VabNK4PVPLDegfgM\" rel=\"nofollow noreferrer\">Have you tried searching for an answer</a> before asking?"}, {"owner": {"reputation": 109, "user_id": 4666203, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/1297956246/picture?type=large", "display_name": "George Cavalevu", "link": "https://stackoverflow.com/users/4666203/george-cavalevu"}, "edited": false, "score": 0, "creation_date": 1429703373, "post_id": 29796371, "comment_id": 47721260, "body": "yes I have but it was not clear and abit confusing seeing that I have many slashes... most examples were only printing out one, this was a tricky example"}], "answers": [{"tags": [], "owner": {"reputation": 6532, "user_id": 919578, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/VaAKB.jpg?s=128&g=1", "display_name": "Benjy Kessler", "link": "https://stackoverflow.com/users/919578/benjy-kessler"}, "is_accepted": false, "score": 10, "last_activity_date": 1429702988, "last_edit_date": 1429702988, "creation_date": 1429702842, "answer_id": 29796411, "question_id": 29796371, "link": "https://stackoverflow.com/questions/29796371/how-to-print-out-a-slash-or-in-c/29796411#29796411", "title": "How to print out a slash (/ or \\) in C?", "body": "<p>You don't need to escape forward slash. </p>\n\n<p>This works for me:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n  printf(\"| /\\\\  /\\\\ |\");\n  printf(\"| \\\\/  \\\\/ |\");\n  return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 647, "user_id": 3813664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gES7u.jpg?s=128&g=1", "display_name": "Nils", "link": "https://stackoverflow.com/users/3813664/nils"}, "is_accepted": false, "score": 3, "last_activity_date": 1429706981, "last_edit_date": 1429706981, "creation_date": 1429704307, "answer_id": 29797015, "question_id": 29796371, "link": "https://stackoverflow.com/questions/29796371/how-to-print-out-a-slash-or-in-c/29797015#29797015", "title": "How to print out a slash (/ or \\) in C?", "body": "<p>You have to use \\ before backslash. Its separate the character.Like this</p>\n\n<pre><code>printf(\"| /\\\\  /\\\\ |\\n\");   \nprintf(\"| \\\\/  \\\\/ |\"); \n</code></pre>\n"}], "owner": {"reputation": 109, "user_id": 4666203, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/1297956246/picture?type=large", "display_name": "George Cavalevu", "link": "https://stackoverflow.com/users/4666203/george-cavalevu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51502, "favorite_count": 0, "answer_count": 2, "score": 5, "last_activity_date": 1429706981, "creation_date": 1429702736, "question_id": 29796371, "link": "https://stackoverflow.com/questions/29796371/how-to-print-out-a-slash-or-in-c", "title": "How to print out a slash (/ or \\) in C?", "body": "<p>I know this is a very silly and simple question but I've been trying to print out an image of a robot that should output this:</p>\n\n<pre><code>+----------+\n|          |\n| /\\    /\\ |\n| \\/    \\/ |\n|          |\n|  [-=-=-] |\n+----------+\n</code></pre>\n\n<p>The part I'm stuck on is printing out the eyes.\noriginally I coded:</p>\n\n<pre><code>printf(\"| /\\  /\\ |\");\nprintf(\"| \\/  \\/ |\");\n</code></pre>\n\n<p>but an error showed, so I remembered that you need to double slash so:</p>\n\n<pre><code>printf(\"| \\/\\\\  \\/\\\\ |\");\nprintf(\"| \\\\\\/  \\\\\\/ |\");\n</code></pre>\n\n<p>but an error saying implicit declaration of function printf is showing even after that?! I don't understand the error. Can someone explain how to fix this please?</p>\n"}, {"tags": ["c", "winapi", "driver", "wdk", "minifilter"], "comments": [{"owner": {"reputation": 158803, "user_id": 246342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8ba0aea3f521082f18dd7c186e7d4c3?s=128&d=identicon&r=PG", "display_name": "Alex K.", "link": "https://stackoverflow.com/users/246342/alex-k"}, "edited": false, "score": 1, "creation_date": 1429703379, "post_id": 29796200, "comment_id": 47721267, "body": "Probably a better way but FltParseFileNameInformation() to get the volume path, then a lookup from a list of the results of a call to  querydosdevice() for each getlogicaldrivestrings() - remembering the path may not have a corresponding physical drive letter"}], "answers": [{"comments": [{"owner": {"reputation": 252, "user_id": 4604440, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/dcdfa97f4aab31fe989c58fb95d1116c?s=128&d=identicon&r=PG&f=1", "display_name": "Digvijay Rathore", "link": "https://stackoverflow.com/users/4604440/digvijay-rathore"}, "edited": false, "score": 0, "creation_date": 1429779165, "post_id": 29815729, "comment_id": 47763419, "body": "Its for kmdf and umdf drivers I want same thing for Minifilter driver can you please help."}, {"owner": {"reputation": 136, "user_id": 1700783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a92003032212910c1dd34cf9f73a12c?s=128&d=identicon&r=PG", "display_name": "samjeba", "link": "https://stackoverflow.com/users/1700783/samjeba"}, "reply_to_user": {"reputation": 252, "user_id": 4604440, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/dcdfa97f4aab31fe989c58fb95d1116c?s=128&d=identicon&r=PG&f=1", "display_name": "Digvijay Rathore", "link": "https://stackoverflow.com/users/4604440/digvijay-rathore"}, "edited": false, "score": 0, "creation_date": 1429795760, "post_id": 29815729, "comment_id": 47776191, "body": "FltGetVolumeGuidName - function that been used is part of minifilter. Source:<a href=\"https://msdn.microsoft.com/en-us/library/windows/hardware/ff543230%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/hardware/&hellip;</a>"}], "tags": [], "owner": {"reputation": 136, "user_id": 1700783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a92003032212910c1dd34cf9f73a12c?s=128&d=identicon&r=PG", "display_name": "samjeba", "link": "https://stackoverflow.com/users/1700783/samjeba"}, "is_accepted": false, "score": 0, "last_activity_date": 1429771667, "creation_date": 1429771667, "answer_id": 29815729, "question_id": 29796200, "link": "https://stackoverflow.com/questions/29796200/get-file-path-in-minifilter-driver/29815729#29815729", "title": "Get file path in minifilter driver", "body": "<p>Here is the best solution, but its again not using Drive letter.But using Volume GUID</p>\n\n<p>more :\n<a href=\"https://www.osr.com/nt-insider/2014-issue2/drive-letter-alternatives/\" rel=\"nofollow\">https://www.osr.com/nt-insider/2014-issue2/drive-letter-alternatives/</a></p>\n"}, {"tags": [], "owner": {"reputation": 141, "user_id": 3418993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c260eef74f4a38ff669693f0dfa710d?s=128&d=identicon&r=PG&f=1", "display_name": "Digvijay Rathore", "link": "https://stackoverflow.com/users/3418993/digvijay-rathore"}, "is_accepted": true, "score": 0, "last_activity_date": 1437136851, "last_edit_date": 1437136851, "creation_date": 1430915404, "answer_id": 30076785, "question_id": 29796200, "link": "https://stackoverflow.com/questions/29796200/get-file-path-in-minifilter-driver/30076785#30076785", "title": "Get file path in minifilter driver", "body": "<pre><code>NameLength = (USHORT)dosName.MaximumLength + Data-&gt;Iopb-&gt;TargetFileObject-&gt;FileName.MaximumLength + 2;  \nNameBuffer = ExAllocatePoolWithTag(PagedPool,NameLength,NC_MAPPING_TAG);\nNameString.Length = 0;\nNameString.MaximumLength = NameLength;\nNameString.Buffer = NameBuffer;\nRtlCopyUnicodeString(&amp;NameString, &amp;dosName);\nRtlAppendUnicodeStringToString(&amp;NameString, &amp;Data-&gt;Iopb-&gt;TargetFileObject-&gt;FileName);\n</code></pre>\n"}], "owner": {"reputation": 252, "user_id": 4604440, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/dcdfa97f4aab31fe989c58fb95d1116c?s=128&d=identicon&r=PG&f=1", "display_name": "Digvijay Rathore", "link": "https://stackoverflow.com/users/4604440/digvijay-rathore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1679, "favorite_count": 2, "accepted_answer_id": 30076785, "answer_count": 2, "score": 5, "last_activity_date": 1437136851, "creation_date": 1429702306, "last_edit_date": 1429703391, "question_id": 29796200, "link": "https://stackoverflow.com/questions/29796200/get-file-path-in-minifilter-driver", "title": "Get file path in minifilter driver", "body": "<p>I've used the code below but it is giving me an result of file path.</p>\n\n<pre><code>status = FltGetFileNameInformation(Data,\n        FLT_FILE_NAME_OPENED |\n        FLT_FILE_NAME_QUERY_ALWAYS_ALLOW_CACHE_LOOKUP,\n        &amp;nameInfo);\n    DbgPrint(\"\\n Filename : %wZ\",&amp;nameInfo-&gt;Name);\n</code></pre>\n\n<pre>\n\\Device\\HarddiskVolume1\\Users\\filename.ext\n</pre>\n\n<p>But I want the file path as I</p>\n\n<pre>\nc:\\Users\\Filename.ext\n</pre>\n\n<p>How can I get this please help.</p>\n"}, {"tags": ["c", "linux", "sockets", "tcp", "network-programming"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1429702271, "post_id": 29796111, "comment_id": 47720405, "body": "You need to check what <code>recv</code> actually returns! What if the connection is closed? What if there&#39;s nothing to read currently (since you use the <code>MSG_DONTWAIT</code> flag)?"}, {"owner": {"reputation": 1419, "user_id": 2904103, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d4a83b767e6aa6f4ff7a55ff57b9e6a1?s=128&d=identicon&r=PG&f=1", "display_name": "Haswell", "link": "https://stackoverflow.com/users/2904103/haswell"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1429702511, "post_id": 29796111, "comment_id": 47720586, "body": "this check recv() &lt; 4 means that I have not received an entire integer right? but this check always succeeds so i always get 4 bytes."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1429702710, "post_id": 29796111, "comment_id": 47720756, "body": "But if it fails you don&#39;t know <i>why</i> it failed. It could be so simple as the data haven&#39;t arrived yet so <code>recv</code> returns <code>-1</code> and set <code>errno</code> to <code>EWOULDBLOCK</code>, but it&#39;s not really an errors because of the <code>MSG_DONTWAIT</code> flag."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1429702745, "post_id": 29796111, "comment_id": 47720781, "body": "Also, please update your question with expected <i>and</i> actual output. And with the data you&#39;re sending"}, {"owner": {"reputation": 621, "user_id": 411339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2351e75c187c6fcb8dee93e62a9180a3?s=128&d=identicon&r=PG", "display_name": "Unavailable", "link": "https://stackoverflow.com/users/411339/unavailable"}, "edited": false, "score": 1, "creation_date": 1429702778, "post_id": 29796111, "comment_id": 47720804, "body": "Your sending and receiving data methods seem open to possible failures. You should consider using select/poll mechanism for sequential read/write socket operations."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1429704202, "post_id": 29796111, "comment_id": 47721984, "body": "Are these sockets in blocking mode (the default)?"}, {"owner": {"reputation": 1419, "user_id": 2904103, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d4a83b767e6aa6f4ff7a55ff57b9e6a1?s=128&d=identicon&r=PG&f=1", "display_name": "Haswell", "link": "https://stackoverflow.com/users/2904103/haswell"}, "reply_to_user": {"reputation": 621, "user_id": 411339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2351e75c187c6fcb8dee93e62a9180a3?s=128&d=identicon&r=PG", "display_name": "Unavailable", "link": "https://stackoverflow.com/users/411339/unavailable"}, "edited": false, "score": 0, "creation_date": 1429705950, "post_id": 29796111, "comment_id": 47723454, "body": "@BoraBozkurt I did the same using select(sock+1, &amp;set, NULL,NULL,NULL); both places.  I get same result."}, {"owner": {"reputation": 621, "user_id": 411339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2351e75c187c6fcb8dee93e62a9180a3?s=128&d=identicon&r=PG", "display_name": "Unavailable", "link": "https://stackoverflow.com/users/411339/unavailable"}, "edited": false, "score": 0, "creation_date": 1429707018, "post_id": 29796111, "comment_id": 47724346, "body": "Check this out: <a href=\"http://stackoverflow.com/a/29670567/411339\">stackoverflow.com/a/29670567/411339</a>"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1429707881, "post_id": 29796111, "comment_id": 47725039, "body": "I&#39;m having difficulty believing in the reality of this problem. If the reads always return 4, which itself is unlikely, you will receive whatever four bytes were sent. Are you sure you aren&#39;t sending the zero you&#39;re worried about?"}, {"owner": {"reputation": 1419, "user_id": 2904103, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d4a83b767e6aa6f4ff7a55ff57b9e6a1?s=128&d=identicon&r=PG&f=1", "display_name": "Haswell", "link": "https://stackoverflow.com/users/2904103/haswell"}, "edited": false, "score": 0, "creation_date": 1429720808, "post_id": 29796111, "comment_id": 47735495, "body": "No. The client is in a loop...so it sends out commands to server at intervals of 5 secs...and this happens during those 2 commands in the above code. Right now the only work around i could come up is to close the connection from client and re establish it each and every time i have to send a command to server."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1429740067, "post_id": 29796111, "comment_id": 47747440, "body": "Where is the evidence that the server isn&#39;t sending the zero?"}], "answers": [{"comments": [{"owner": {"reputation": 28330, "user_id": 298054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7dffcc86140441472cfb6119375a9d7?s=128&d=identicon&r=PG", "display_name": "jweyrich", "link": "https://stackoverflow.com/users/298054/jweyrich"}, "reply_to_user": {"reputation": 1419, "user_id": 2904103, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d4a83b767e6aa6f4ff7a55ff57b9e6a1?s=128&d=identicon&r=PG&f=1", "display_name": "Haswell", "link": "https://stackoverflow.com/users/2904103/haswell"}, "edited": false, "score": 0, "creation_date": 1429705132, "post_id": 29796283, "comment_id": 47722750, "body": "Did update to include some details about what you should consider. If you need to send/recv an arbitrary amount of data each time, then you need a way to identify the start/end of each <i>command</i>."}], "tags": [], "owner": {"reputation": 28330, "user_id": 298054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7dffcc86140441472cfb6119375a9d7?s=128&d=identicon&r=PG", "display_name": "jweyrich", "link": "https://stackoverflow.com/users/298054/jweyrich"}, "is_accepted": true, "score": 0, "last_activity_date": 1431605647, "last_edit_date": 1431605647, "creation_date": 1429702489, "answer_id": 29796283, "question_id": 29796111, "link": "https://stackoverflow.com/questions/29796111/recv-does-not-get-value-from-network/29796283#29796283", "title": "recv() does not get value from network", "body": "<p>Your assumption is not wrong. It may be buffered. Also note that when the receiver reads data faster than the sender does send it, some <code>recv</code> calls may read no data since the sender did not send any data yet. That could be the cause of what you're describing.</p>\n\n<p><strong>UPDATE</strong>: If you plan to <strong>always</strong> send/receive the <strong>same amount of data</strong>, for example a 20-byte packet containing what you defined as a <em>command</em>, then you can wrap your <code>send</code> and <code>recv</code> in a loop. This loop will write (or read) a single command at a time. You <strong>cannot assume</strong> a call to <code>send</code> or <code>recv</code> will succeed, so you <strong>MUST check for errors</strong> as @Joachim mentioned in comments. Another thing to note is that <code>recv</code> MAY read less bytes than the specified, so you may have to read multiple times in order to receive the complete <em>command</em>. The same applies to <code>send</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 1419, "user_id": 2904103, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d4a83b767e6aa6f4ff7a55ff57b9e6a1?s=128&d=identicon&r=PG&f=1", "display_name": "Haswell", "link": "https://stackoverflow.com/users/2904103/haswell"}, "edited": false, "score": 0, "creation_date": 1429706061, "post_id": 29797124, "comment_id": 47723540, "body": "I did the same using select(sock+1, &amp;set, NULL,NULL,NULL); both places. I get same result."}, {"owner": {"reputation": 621, "user_id": 411339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2351e75c187c6fcb8dee93e62a9180a3?s=128&d=identicon&r=PG", "display_name": "Unavailable", "link": "https://stackoverflow.com/users/411339/unavailable"}, "reply_to_user": {"reputation": 1419, "user_id": 2904103, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d4a83b767e6aa6f4ff7a55ff57b9e6a1?s=128&d=identicon&r=PG&f=1", "display_name": "Haswell", "link": "https://stackoverflow.com/users/2904103/haswell"}, "edited": false, "score": 0, "creation_date": 1429706624, "post_id": 29797124, "comment_id": 47723997, "body": "You probably misused select function without setting the appropriate flags. Try using poll function, it is similar to select but much more convenient to use in some aspects. And please read and learn about this system call before using it properly and asking questions about it. <a href=\"http://man7.org/linux/man-pages/man2/poll.2.html\" rel=\"nofollow noreferrer\">man7.org/linux/man-pages/man2/poll.2.html</a>"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1429707783, "post_id": 29797124, "comment_id": 47724965, "body": "The <code>ioctl()</code> is pointless here. It&#39;s an extra system call for nothing, when <code>recv()</code> already tells you how many bytes it received. And more bytes could arrive between the <code>ioctl()</code> and the <code>recv().</code>"}, {"owner": {"reputation": 621, "user_id": 411339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2351e75c187c6fcb8dee93e62a9180a3?s=128&d=identicon&r=PG", "display_name": "Unavailable", "link": "https://stackoverflow.com/users/411339/unavailable"}, "edited": false, "score": 0, "creation_date": 1429709466, "post_id": 29797124, "comment_id": 47726445, "body": "You have made the same comment to my another answer, I replied you there too. Despite in this question the implementation is different, It is also not necessary to use recv call. It may be a socket read operation. The thing that I am pointing out is using polling mechanism (not using sleep between arbitrary socket operations) This method will be much more convenient. And if the socket is going to be read with read system call then using ioctl will be useful to check the amount of urgent data in the socket waiting to be retrieved."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1429740435, "post_id": 29797124, "comment_id": 47747601, "body": "It is necessary to use either <code>read()</code> or <code>recv()</code>. I didn&#39;t state otherwise. There is nothing in this question about urgent data. Your point escapes me."}], "tags": [], "owner": {"reputation": 621, "user_id": 411339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2351e75c187c6fcb8dee93e62a9180a3?s=128&d=identicon&r=PG", "display_name": "Unavailable", "link": "https://stackoverflow.com/users/411339/unavailable"}, "is_accepted": false, "score": 0, "last_activity_date": 1429704532, "creation_date": 1429704532, "answer_id": 29797124, "question_id": 29796111, "link": "https://stackoverflow.com/questions/29796111/recv-does-not-get-value-from-network/29797124#29797124", "title": "recv() does not get value from network", "body": "<p>You may use <strong>select/poll</strong> mechanism to check if there's new data has arrived to socket and waiting to be read properly. You can also check the amount of data has come to socket by invoking an <code>ioctl</code> call as the following:</p>\n\n<pre><code>{\n       int size = 0;\n\n       ioctl(socket, FIONREAD, &amp;size);\n\n       if(size &gt; 0)\n       {\n             // do recv operation(s)\n       }\n}\n</code></pre>\n"}], "owner": {"reputation": 1419, "user_id": 2904103, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d4a83b767e6aa6f4ff7a55ff57b9e6a1?s=128&d=identicon&r=PG&f=1", "display_name": "Haswell", "link": "https://stackoverflow.com/users/2904103/haswell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 29796283, "answer_count": 2, "score": 0, "last_activity_date": 1431605647, "creation_date": 1429702077, "last_edit_date": 1429703953, "question_id": 29796111, "link": "https://stackoverflow.com/questions/29796111/recv-does-not-get-value-from-network", "title": "recv() does not get value from network", "body": "<p>I Have a typical client server C socket program. </p>\n\n<pre><code>SERVER:\n            if(ndp.cmd == 11)\n            {   \n                //ack1 = 0;\n                puts(\"Query Command for Light 2\");\n                pthread_mutex_lock(&amp;lock);  \n                // ..Some critical stuff\n                pthread_mutex_unlock(&amp;lock);    \n                printf(\"ID: %d, Level: %d\\n\", new.address, new.level);\n                ack1 = new.level; //This result is showing correct on server\n                ack1 = htonl(ack1);\n                send(client_sock, &amp;ack1, sizeof(ack1), 0);              \n            }\n\nCLIENT:\n    printf(\"Query Actual level Light2\\n\");\n    dp.id = 2;dp.cmd = 11; dp.active = 0; dp.level = 0; dp.group = 0; \n    if( send(sock , &amp;dp , sizeof(dp) , 0) &lt; 0) { puts(\"Send failed\"); }\n    sleep(1);\n    ret = recv(sock , &amp;level1 , sizeof(level1) , 0);\n    printf(\"Number of bytes received: %d\\n\", ret); //Always gives 4\n    fflush(stdout);\n    printf(\"Light level %x\\n\", ntohl(level1) ); //This prints 0 (incorrect)\n    fflush(stdout);\n    sleep(5);\n\n\n    printf(\"Query Actual level Light2\\n\");\n    dp.id = 2;dp.cmd = 11; dp.active = 0; dp.level = 0; dp.group = 0; \n    if( send(sock , &amp;dp , sizeof(dp) , 0) &lt; 0) { puts(\"Send failed\"); }\n    sleep(1);\n    ret = recv(sock , &amp;level2 , sizeof(level2) , 0);\n    printf(\"Number of bytes received: %d\\n\", ret); // Always gives 4\n    fflush(stdout);\n    printf(\"Light level %x\\n\", ntohl(level2) ); //This prints correct value\n    fflush(stdout);\n    close(sock);\n\nExpected output:\nLight level 32 (hex value for 50);\nLight level 32\n\nActual output:\nLight level 0\nLight level 32\n</code></pre>\n\n<p>So the problem is on same requests, 1st send from server is not received by client, but next recv() gives correct value.</p>\n\n<p>Why is the data from 1st recv() getting lost, is it getting buffered and maybe I am getting the previous value in 2nd recv() ?</p>\n\n<p>Please help.</p>\n"}, {"tags": ["c", "2d", "fft"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1429705700, "post_id": 29796075, "comment_id": 47723237, "body": "You can implement a 2D FFT by taking 1D FFTs of all the rows followed by 1D FFTs of the columns. You might want to look at 2D FFT libraries such as FFTW though."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 4308884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/d9VG1.jpg?s=128&g=1", "display_name": "Andrew Sharpe", "link": "https://stackoverflow.com/users/4308884/andrew-sharpe"}, "edited": false, "score": 0, "creation_date": 1429720353, "post_id": 29798165, "comment_id": 47735199, "body": "Thanks, this is useful. I understand the procedure and seem to have made a 2D array now. Do you have any idea how to use the function I showed to operate only on one column or row of the 2D array so I implement the procedure?"}, {"owner": {"reputation": 224, "user_id": 4803759, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c01025a7d4adf63706288c660c58f9de?s=128&d=identicon&r=PG&f=1", "display_name": "lxg", "link": "https://stackoverflow.com/users/4803759/lxg"}, "reply_to_user": {"reputation": 41, "user_id": 4308884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/d9VG1.jpg?s=128&g=1", "display_name": "Andrew Sharpe", "link": "https://stackoverflow.com/users/4308884/andrew-sharpe"}, "edited": false, "score": 0, "creation_date": 1429869721, "post_id": 29798165, "comment_id": 47814905, "body": "Since the 2D array (note the complex type) is in row order, if you choose the first row then column scheme, the first each row 1D FFTs are easy; you need to just pass the address of each row and the length to the 1D FFT function, however, the following column FFTs are not ready; you can allocate a 1D array (note the complex type) with the size equal to the column length, copy the data of each colunmn into the array, perform the 1D FFT on the array data , and then copy the result back the column of the 2D array."}], "tags": [], "owner": {"reputation": 224, "user_id": 4803759, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c01025a7d4adf63706288c660c58f9de?s=128&d=identicon&r=PG&f=1", "display_name": "lxg", "link": "https://stackoverflow.com/users/4803759/lxg"}, "is_accepted": true, "score": 0, "last_activity_date": 1429707095, "creation_date": 1429707095, "answer_id": 29798165, "question_id": 29796075, "link": "https://stackoverflow.com/questions/29796075/implementation-of-fft-2d-array/29798165#29798165", "title": "Implementation of FFT 2D array", "body": "<p>Since the 1D FFT code are ready, you can construct the 2D FFT by Row-Column method, i.e., first perform the 1D FFT on each row then perform the 1D FFT on each column, or first perform the 1D FFT on each column then perform the 1D FFT on each row. This approach is based on the separable property of 2D FFT. Note that the 1D FFTs are in-place processing, that is, the data for the first 1D FFTs may be real type, but have become complex type for the second stage.</p>\n"}], "owner": {"reputation": 41, "user_id": 4308884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/d9VG1.jpg?s=128&g=1", "display_name": "Andrew Sharpe", "link": "https://stackoverflow.com/users/4308884/andrew-sharpe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1003, "favorite_count": 0, "accepted_answer_id": 29798165, "answer_count": 1, "score": 0, "last_activity_date": 1429707120, "creation_date": 1429701988, "last_edit_date": 1429707120, "question_id": 29796075, "link": "https://stackoverflow.com/questions/29796075/implementation-of-fft-2d-array", "title": "Implementation of FFT 2D array", "body": "<p>I'm using some C code currently to display evolution of solutions to the 1D Schrodinger equation using a Fourier method. </p>\n\n<p>This method uses an FFT algorithm from Numerical Recipes in C to calculate the second derivative (in k space) in the equation from the function values in a 1D column array as part of the process.</p>\n\n<p>I'd like to move into 2D solutions, which I guess would require a 2D array 'grid' for values of the function at those points.</p>\n\n<p>My questions are these: </p>\n\n<p>Can I still implement this same FFT on an NxN array? If so, how?</p>\n\n<p>Would I need a different FFT algorithm?</p>\n\n<p>Thanks.</p>\n\n<p>The source code I'm using for the FFT is:</p>\n\n<pre><code>void four1(double data[], int nn, int isign)\n{\n    int n, mmax, m, j, istep, i;\n    double wtemp, wr, wpr, wpi, wi, theta;\n    double tempr, tempi;\n\n    n = nn &lt;&lt; 1;\n    j = 1;\n    for (i = 1; i &lt; n; i += 2) {\n    if (j &gt; i) {\n        tempr = data[j];     data[j] = data[i];     data[i] = tempr;\n        tempr = data[j+1]; data[j+1] = data[i+1]; data[i+1] = tempr;\n    }\n    m = n &gt;&gt; 1;\n    while (m &gt;= 2 &amp;&amp; j &gt; m) {\n        j -= m;\n        m &gt;&gt;= 1;\n    }\n    j += m;\n    }\n    mmax = 2;\n    while (n &gt; mmax) {\n    istep = 2*mmax;\n    theta = TWOPI/(isign*mmax);\n    wtemp = sin(0.5*theta);\n    wpr = -2.0*wtemp*wtemp;\n    wpi = sin(theta);\n    wr = 1.0;\n    wi = 0.0;\n    for (m = 1; m &lt; mmax; m += 2) {\n        for (i = m; i &lt;= n; i += istep) {\n        j =i + mmax;\n        tempr = wr*data[j]   - wi*data[j+1];\n        tempi = wr*data[j+1] + wi*data[j];\n        data[j]   = data[i]   - tempr;\n        data[j+1] = data[i+1] - tempi;\n        data[i] += tempr;\n        data[i+1] += tempi;\n        }\n        wr = (wtemp = wr)*wpr - wi*wpi + wr;\n        wi = wi*wpr + wtemp*wpi + wi;\n    }\n    mmax = istep;\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "ncurses", "curses"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 4804303, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-q2j44i3oQWw/AAAAAAAAAAI/AAAAAAAAADw/G3O8mQE4t8I/photo.jpg?sz=128", "display_name": "Andrey Akimov", "link": "https://stackoverflow.com/users/4804303/andrey-akimov"}, "edited": false, "score": 0, "creation_date": 1429744753, "post_id": 29808513, "comment_id": 47749269, "body": "@TomasDickey, Yes, I started to realize it myself, but stumbled on a couple of points. However, thanks anyway. This is what I need."}], "tags": [], "owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "is_accepted": true, "score": 2, "last_activity_date": 1429735741, "creation_date": 1429735741, "answer_id": 29808513, "question_id": 29796066, "link": "https://stackoverflow.com/questions/29796066/ncurses-and-textbox/29808513#29808513", "title": "Ncurses and TextBox", "body": "<p><a href=\"http://invisible-island.net/ncurses/ncurses.html\" rel=\"nofollow\">ncurses</a> itself provides lower-level functions from which a \"textbox\" can be built.  For instance, the <a href=\"http://invisible-island.net/dialog/dialog.html\" rel=\"nofollow\"><code>dialog</code></a> and <a href=\"http://invisible-island.net/cdk/cdk.html\" rel=\"nofollow\"><code>cdk</code></a> libraries use (n)curses to provide these features.</p>\n"}], "owner": {"reputation": 35, "user_id": 4804303, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-q2j44i3oQWw/AAAAAAAAAAI/AAAAAAAAADw/G3O8mQE4t8I/photo.jpg?sz=128", "display_name": "Andrey Akimov", "link": "https://stackoverflow.com/users/4804303/andrey-akimov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1169, "favorite_count": 0, "accepted_answer_id": 29808513, "answer_count": 1, "score": 3, "last_activity_date": 1557093634, "creation_date": 1429701972, "last_edit_date": 1557093634, "question_id": 29796066, "link": "https://stackoverflow.com/questions/29796066/ncurses-and-textbox", "title": "Ncurses and TextBox", "body": "<p>Does something like TextBox exist in ncurses?</p>\n\n<p>Requirements to TextBox:</p>\n\n<ul>\n<li>ability to adequate handle KEY_DOWN, KEY_UP, KEY_LEFT, KEY_RIGHT, KEY_BACKSPACE, KEY_DC and other. </li>\n<li>adequate transfer lines.</li>\n<li>save, if you need, text in char* buffer.</li>\n</ul>\n"}, {"tags": ["c", "windows", "file"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1429701000, "post_id": 29795648, "comment_id": 47719447, "body": "Does <code>&quot;%temp%&quot;</code> give you a filename, with required permissions for requested operation?"}, {"owner": {"reputation": 448, "user_id": 3865455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01714f9f755bf08bbbb8917988d42477?s=128&d=identicon&r=PG&f=1", "display_name": "NotGI", "link": "https://stackoverflow.com/users/3865455/notgi"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1429701144, "post_id": 29795648, "comment_id": 47719560, "body": "I don&#39;t understand your question , can you rewrite that?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1429701507, "post_id": 29795648, "comment_id": 47719833, "body": "<code>fopen(&quot;%temp%&quot; , &quot;r&quot;)</code> will try to open a file called... well.. %temp%."}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 1, "creation_date": 1429701513, "post_id": 29795648, "comment_id": 47719838, "body": "See <a href=\"http://stackoverflow.com/questions/4788983/using-windows-environment-variable-in-native-code\" title=\"using windows environment variable in native code\">stackoverflow.com/questions/4788983/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1429701742, "post_id": 29795907, "comment_id": 47720003, "body": "<code>temp = &quot;C:\\\\Windows\\\\Temp&quot;;</code> is no good nowadays. It used to work under Windows 95/98 but from Windows 2000 on you cannot simply write into the C:\\Windows directory."}], "tags": [], "owner": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "is_accepted": true, "score": 3, "last_activity_date": 1429701774, "last_edit_date": 1429701774, "creation_date": 1429701593, "answer_id": 29795907, "question_id": 29795648, "link": "https://stackoverflow.com/questions/29795648/using-fopen-with-temp-system-variable/29795907#29795907", "title": "Using fopen with temp system variable", "body": "<p>No, you cannot do directly (unless you want to open file called <code>%temp</code>). There is a function <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms724265%28v=vs.85%29.aspx\" rel=\"nofollow\"><code>ExpandEnvironmentStrings</code></a> that does that:</p>\n\n<pre><code>char path[MAX_PATH];\nExpandEnvironmentStrings(\"%TEMP%\\\\tempfile\", path, MAX_PATH);\nfopen(path, \"r\");\n</code></pre>\n\n<p>You can do that manually -- in this case it can be more portable:</p>\n\n<pre><code>char path[MAX_PATH];\nconst char* temp = getenv(\"TEMP\");\n\nif(temp == NULL)\n    ; // Return an error or try to guess user's Temp \n      // directory with GetUserProfileDirectory or similiar functions\n\nsnprintf(path, MAX_PATH - 1, \"%s\\\\tempfile\", temp);\n\nfopen(path , \"r\");\n</code></pre>\n\n<p>But there is a <strong>cleaner</strong> option for your case -- <a href=\"https://msdn.microsoft.com/en-us/library/x8x7sakw.aspx\" rel=\"nofollow\"><code>tmpfile</code></a></p>\n"}, {"tags": [], "owner": {"reputation": 13852, "user_id": 468725, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/85a49cd89084e6512dee0f140e86d5b4?s=128&d=identicon&r=PG", "display_name": "Pavel P", "link": "https://stackoverflow.com/users/468725/pavel-p"}, "is_accepted": false, "score": 0, "last_activity_date": 1585647991, "creation_date": 1585647991, "answer_id": 60947654, "question_id": 29795648, "link": "https://stackoverflow.com/questions/29795648/using-fopen-with-temp-system-variable/60947654#60947654", "title": "Using fopen with temp system variable", "body": "<p>On Windows you can use <a href=\"https://docs.microsoft.com/en-us/windows/win32/api/fileapi/nf-fileapi-gettemppatha\" rel=\"nofollow noreferrer\">GetTempPath</a> function that simply expands your <code>%TEMP%</code> env variable.</p>\n\n<p>Note, that starting from C++17 you can use <a href=\"https://en.cppreference.com/w/cpp/filesystem/temp_directory_path\" rel=\"nofollow noreferrer\">std::filesystem::temp_directory_path</a></p>\n"}], "owner": {"reputation": 448, "user_id": 3865455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01714f9f755bf08bbbb8917988d42477?s=128&d=identicon&r=PG&f=1", "display_name": "NotGI", "link": "https://stackoverflow.com/users/3865455/notgi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1822, "favorite_count": 0, "accepted_answer_id": 29795907, "answer_count": 2, "score": 0, "last_activity_date": 1585647991, "creation_date": 1429700953, "question_id": 29795648, "link": "https://stackoverflow.com/questions/29795648/using-fopen-with-temp-system-variable", "title": "Using fopen with temp system variable", "body": "<p>I had some doubts about fopen...</p>\n\n<p>Can i perform the following?</p>\n\n<pre><code>fopen(\"%temp%\" , \"r\");\n</code></pre>\n\n<p>or do i need to use windows specific functions?</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 5, "creation_date": 1429701701, "post_id": 29795637, "comment_id": 47719973, "body": "You forgot to carry the one"}, {"owner": {"reputation": 4890, "user_id": 1563123, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/fJprA.jpg?s=128&g=1", "display_name": "Engine", "link": "https://stackoverflow.com/users/1563123/engine"}, "edited": false, "score": 0, "creation_date": 1429702323, "post_id": 29795637, "comment_id": 47720439, "body": "@ harold thanks for your answer, but what do you mean"}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 1, "creation_date": 1429703240, "post_id": 29795637, "comment_id": 47721126, "body": "The question would make sense if you asked how to shift it left by <b>an arbitrary number of bits</b>. If you just want to shift it all the way from the LSB to the MSB, then you can simply set <code>buffer[0] = 0x00</code> and <code>buffer[7] = 0x80</code>."}, {"owner": {"reputation": 4890, "user_id": 1563123, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/fJprA.jpg?s=128&g=1", "display_name": "Engine", "link": "https://stackoverflow.com/users/1563123/engine"}, "reply_to_user": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1429703388, "post_id": 29795637, "comment_id": 47721274, "body": "@barakmanos  I&#39;ve updated the question !"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1429705571, "post_id": 29795637, "comment_id": 47723139, "body": "@Engine: Please don&#39;t update your question so often. It is confusing and also might render some answers obsolete. Looking at the answers I see that it is not quite clear what you want: Do you want to implement a bit-shift across the byte buffer or do you simply want to loop through all 64 configurations that have a single bit set?"}, {"owner": {"reputation": 4890, "user_id": 1563123, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/fJprA.jpg?s=128&g=1", "display_name": "Engine", "link": "https://stackoverflow.com/users/1563123/engine"}, "edited": false, "score": 0, "creation_date": 1429705821, "post_id": 29795637, "comment_id": 47723338, "body": "@ M Oehm I want to shift 1 through 8 byte saved  in array, meaning I need 63 shifts"}], "answers": [{"comments": [{"owner": {"reputation": 108, "user_id": 4803014, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uYSpF.jpg?s=128&g=1", "display_name": "scorpGoku", "link": "https://stackoverflow.com/users/4803014/scorpgoku"}, "reply_to_user": {"reputation": 4890, "user_id": 1563123, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/fJprA.jpg?s=128&g=1", "display_name": "Engine", "link": "https://stackoverflow.com/users/1563123/engine"}, "edited": false, "score": 0, "creation_date": 1429703434, "post_id": 29796442, "comment_id": 47721297, "body": "Yes. These are some of the results: [0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x01] // Initial -&gt; [0x80 0x00 0x00 0x00 0x00 0x00 0x00 0x00] // Final  [0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x7F] // Initial -&gt; [0xFE 0x00 0x00 0x00 0x00 0x00 0x00 0x00] // Final  [0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x05] // Initial -&gt; [0xA0 0x00 0x00 0x00 0x00 0x00 0x00 0x00] // Final  [0x00 0x00 0x00 0x00 0x00 0x00 0x00 0xFF] // Initial -&gt; [0xFF 0x00 0x00 0x00 0x00 0x00 0x00 0x00] // Final"}, {"owner": {"reputation": 108, "user_id": 4803014, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uYSpF.jpg?s=128&g=1", "display_name": "scorpGoku", "link": "https://stackoverflow.com/users/4803014/scorpgoku"}, "reply_to_user": {"reputation": 4890, "user_id": 1563123, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/fJprA.jpg?s=128&g=1", "display_name": "Engine", "link": "https://stackoverflow.com/users/1563123/engine"}, "edited": false, "score": 0, "creation_date": 1429703773, "post_id": 29796442, "comment_id": 47721593, "body": "Sorry about my comment. All the formatting gets automatically removed."}, {"owner": {"reputation": 97034, "user_id": 427332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e11b58e11decc7b4c352d3ac3b2d0b90?s=128&d=identicon&r=PG", "display_name": "Tommy", "link": "https://stackoverflow.com/users/427332/tommy"}, "edited": false, "score": 0, "creation_date": 1429704511, "post_id": 29796442, "comment_id": 47722265, "body": "I interpreted the question differently to mean more like &quot;how can I perform a bit shift across an array as though it were a single integral&quot;, but I can see the logic in this code: shift the least significant byte until it has the most significant bit set, then swap it up to the most significant byte. That would shift from LSB to MSB more quickly than touching every bit in between if you know the interesting bits are initially confined to the least significant byte."}], "tags": [], "owner": {"reputation": 108, "user_id": 4803014, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uYSpF.jpg?s=128&g=1", "display_name": "scorpGoku", "link": "https://stackoverflow.com/users/4803014/scorpgoku"}, "is_accepted": false, "score": 0, "last_activity_date": 1429702910, "creation_date": 1429702910, "answer_id": 29796442, "question_id": 29795637, "link": "https://stackoverflow.com/questions/29795637/bit-shift-through-an-array/29796442#29796442", "title": "Bit shift through an array", "body": "<p>I'm not sure if this is what you want, but the following code does at least what was posed in the question:</p>\n\n<pre><code>uint8_t temp = buffer[0];\n\nprintf(\"Initial Buffer :\\n\");\nfor(int i = 0 ; i &lt; 8 ; i++)\n    printf(\"0x%X \", buffer[7-i]);\n\n// Left Shift until highest bit that is 1 is found\nwhile(!(temp &amp; 0x80))\n    temp = temp&lt;&lt;1;\n\n// Re-assignments\nbuffer[7] = temp;\nbuffer[0] = 0;\nprintf(\"\\nFinal Buffer :\\n\");\nfor(int i = 0 ; i &lt; 8 ; i++)\n    printf(\"0x%X \", buffer[7-i]);\n</code></pre>\n\n<p>In true sense, this is not \"shifting entirely through the buffer\", but if you could provide more details on what you wish to accomplish, this code could be modified accordingly.</p>\n"}, {"comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 1, "creation_date": 1429704129, "post_id": 29796887, "comment_id": 47721912, "body": "Yes, but <code>buffer[index]</code> should be something like <code>buffer[index &#47; 8]</code>, no? Or maybe even another special variable to complement the carry."}, {"owner": {"reputation": 97034, "user_id": 427332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e11b58e11decc7b4c352d3ac3b2d0b90?s=128&d=identicon&r=PG", "display_name": "Tommy", "link": "https://stackoverflow.com/users/427332/tommy"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1429704256, "post_id": 29796887, "comment_id": 47722029, "body": "Oh, yes, rather index should go up only to 8. A bad copy and paste, I&#39;m afraid. Corrected."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1429704430, "post_id": 29796887, "comment_id": 47722189, "body": "Thanks. But I think there&#39;s still an error: You should increment the <code>index</code> only if there is a carry. (The loop index seems to be independent from the <code>buffer</code> index.)"}, {"owner": {"reputation": 97034, "user_id": 427332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e11b58e11decc7b4c352d3ac3b2d0b90?s=128&d=identicon&r=PG", "display_name": "Tommy", "link": "https://stackoverflow.com/users/427332/tommy"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1429704572, "post_id": 29796887, "comment_id": 47722308, "body": "On the contrary, whether there&#39;s a carry or not should have no effect on <code>index</code>. The bit from the top of byte n goes into the bottom of byte n+1, whether it was a 1 or a 0."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1429704956, "post_id": 29796887, "comment_id": 47722615, "body": "I&#39;m not convinced. Try out your code and print the array. You&#39;ll see that you operate only on &#39; buffer[index]&#39;, whereas the carry should come from <code>buffer[index - 1]</code>. Also, when making the change, you changed the number of loop cycles from 64 to 8."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1429705408, "post_id": 29796887, "comment_id": 47722992, "body": "@Tommy: Okay, what your code does is to perform a single shift across the byte buffer. Sorry for my misconception. (I thought that the whole loop would pass the single one byte from LSB to MSB.)"}, {"owner": {"reputation": 4890, "user_id": 1563123, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/fJprA.jpg?s=128&g=1", "display_name": "Engine", "link": "https://stackoverflow.com/users/1563123/engine"}, "edited": false, "score": 0, "creation_date": 1429705497, "post_id": 29796887, "comment_id": 47723069, "body": "@Tommy I&#39;ve tried your answer but the result aren&#39;t correct"}, {"owner": {"reputation": 97034, "user_id": 427332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e11b58e11decc7b4c352d3ac3b2d0b90?s=128&d=identicon&r=PG", "display_name": "Tommy", "link": "https://stackoverflow.com/users/427332/tommy"}, "reply_to_user": {"reputation": 4890, "user_id": 1563123, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/fJprA.jpg?s=128&g=1", "display_name": "Engine", "link": "https://stackoverflow.com/users/1563123/engine"}, "edited": false, "score": 0, "creation_date": 1429707528, "post_id": 29796887, "comment_id": 47724778, "body": "@Engine I was looping the wrong way around. The least significant byte is on the right, not the left. A mental endianness fault. Fixed."}, {"owner": {"reputation": 4890, "user_id": 1563123, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/fJprA.jpg?s=128&g=1", "display_name": "Engine", "link": "https://stackoverflow.com/users/1563123/engine"}, "edited": false, "score": 0, "creation_date": 1429711261, "post_id": 29796887, "comment_id": 47727957, "body": "@Tommy thanks for the hint with the carry variable , I&#39;ve answered the question ! thanks a lof"}], "tags": [], "owner": {"reputation": 97034, "user_id": 427332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e11b58e11decc7b4c352d3ac3b2d0b90?s=128&d=identicon&r=PG", "display_name": "Tommy", "link": "https://stackoverflow.com/users/427332/tommy"}, "is_accepted": false, "score": 2, "last_activity_date": 1429707461, "last_edit_date": 1429707461, "creation_date": 1429703998, "answer_id": 29796887, "question_id": 29795637, "link": "https://stackoverflow.com/questions/29795637/bit-shift-through-an-array/29796887#29796887", "title": "Bit shift through an array", "body": "<p>As per harold's comment, just carry the 1. So, to shift one place:</p>\n\n<pre><code>uint8_t carry = 0;\nfor( index = 7 ; index &gt;= 0; index--){\n    uint8_t nextCarry = buffer[index] &gt;&gt; 7;\n    buffer[index] = (buffer[index] &lt;&lt; 1) | carry;\n    carry = nextCarry;\n}\n</code></pre>\n\n<p>EDIT: also, it strikes me that your CPU <strong>almost certainly has a native 64-bit type</strong>. In which case just use a <code>uint64_t</code> directly rather than an array of bytes and perform <code>variable &lt;&lt;= 1;</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 97034, "user_id": 427332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e11b58e11decc7b4c352d3ac3b2d0b90?s=128&d=identicon&r=PG", "display_name": "Tommy", "link": "https://stackoverflow.com/users/427332/tommy"}, "edited": false, "score": 1, "creation_date": 1429707620, "post_id": 29798191, "comment_id": 47724839, "body": "That makes an endianness assumption you might like to mention, especially as the original question is using a big-endian array but most CPUs are little endian nowadays."}], "tags": [], "owner": {"reputation": 2595, "user_id": 3897316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6cf468fea626f3aec65a199e2f67b309?s=128&d=identicon&r=PG&f=1", "display_name": "Degustaf", "link": "https://stackoverflow.com/users/3897316/degustaf"}, "is_accepted": false, "score": 0, "last_activity_date": 1429707801, "last_edit_date": 1429707801, "creation_date": 1429707169, "answer_id": 29798191, "question_id": 29795637, "link": "https://stackoverflow.com/questions/29795637/bit-shift-through-an-array/29798191#29798191", "title": "Bit shift through an array", "body": "<p>Since you are trying to treat your char array as a single 64 bit object, why not use an actual 64 bit object?</p>\n\n<pre><code>union\n{\n    char array[8];\n    uint64_t all;\n} data;\n\nint index = 0;\ndata.all = 0;\ndata.array[0] = 0x01;\n\nfor(index = 0; index &lt; 64; index++)\n{\n    data.all = data.all &lt;&lt; 1;\n}\n</code></pre>\n\n<p>Note that this assumes that you are working on a little endian machine.</p>\n"}, {"comments": [{"owner": {"reputation": 4890, "user_id": 1563123, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/fJprA.jpg?s=128&g=1", "display_name": "Engine", "link": "https://stackoverflow.com/users/1563123/engine"}, "edited": false, "score": 0, "creation_date": 1429711214, "post_id": 29798328, "comment_id": 47727915, "body": "your answer look pretty good I can&#39;t test now but when I do and it work  I will accept it"}, {"owner": {"reputation": 4890, "user_id": 1563123, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/fJprA.jpg?s=128&g=1", "display_name": "Engine", "link": "https://stackoverflow.com/users/1563123/engine"}, "edited": false, "score": 0, "creation_date": 1433163882, "post_id": 29798328, "comment_id": 49218542, "body": "thanks again for your help, and your answer is a way better than what I&#39;ve done !"}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 2, "last_activity_date": 1429707894, "last_edit_date": 1429707894, "creation_date": 1429707506, "answer_id": 29798328, "question_id": 29795637, "link": "https://stackoverflow.com/questions/29795637/bit-shift-through-an-array/29798328#29798328", "title": "Bit shift through an array", "body": "<p>What byte that is \"LS byte\" and which one that is \"MS byte\" is perhaps not obvious. An array of 8 characters is <em>always</em> allocated in memory like this:</p>\n\n<pre><code>LS address               MS address\nByte 0, ...              Byte 7\n</code></pre>\n\n<p>This is true for all CPUs. So the <code>0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x01</code> in your question doesn't make any sense: you have misunderstood how arrays are allocated in memory. What you have shown in your examples is how to take bit 0 in the ms byte and left shift it to bit 7 in the ls byte. Which probably doesn't make any sense.</p>\n\n<p><em>However</em>, if you would attempt to print this array as a 64 bit integer, the value <code>array[0]=1</code> would give you <code>0000000000000001</code> on a little endian machine, but <code>0100000000000000</code> on a big endian machine. But nothing in your question states that you want to print the array as a 64 bit value, so it is not clear what you are actually asking.</p>\n\n<p>Try this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n\n\ntypedef union\n{\n  uint8_t array[8];\n  uint64_t u64;\n} my_type;\n\nint main()\n{\n  my_type t = {0};\n  t.array[0] = 0x01;\n  // how the array is actually allocated:\n  for(int i=0; i&lt;8; i++) // 0100000000000000 on all machines\n  {\n    printf(\"%.2X\", t.array[i]);\n  }\n  printf(\"\\n\");\n\n  // how the array turns out when printed as a 64 bit int:\n  printf(\"%.16llX\\n\", t.u64); // 0000000000000001 little endian\n\n  // perhaps what you intended to do, on a little endian machine\n  t.u64 &lt;&lt;= 63;\n  printf(\"%.16llX\\n\", t.u64); // 8000000000000000 little endian\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4890, "user_id": 1563123, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/fJprA.jpg?s=128&g=1", "display_name": "Engine", "link": "https://stackoverflow.com/users/1563123/engine"}, "is_accepted": false, "score": 0, "last_activity_date": 1429709695, "creation_date": 1429709695, "answer_id": 29799272, "question_id": 29795637, "link": "https://stackoverflow.com/questions/29795637/bit-shift-through-an-array/29799272#29799272", "title": "Bit shift through an array", "body": "<p>So I've done it , maybe it's not the best way but it works, and if someone needs I'll be glade to share it :</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n\nint main (){\nuint8_t buffer[8];\nchar* pChar = buffer;\nuint8_t  carry  =0x01;\nint i = 0;\nshort lock [8];\n\n// Array  initialization\n\nfor ( i =0  ; i &lt;8; i++){\n   buffer[i] =0x00;\n   lock[i] = 0x00;\n}\n\npChar =buffer;\n\n\n\nfor( i = 0 ; i &lt; 64 ; i++){\n  *pChar = carry;\n  printf(\" 0x%2x   0x%2x   0x%2x  0x%2x  0x%2x 0x%2x 0x%2x  0x%2x \\n\",buffer[0], buffer[1],buffer[2],buffer[3], buffer[4], buffer[5], buffer[6], buffer[7]);\n   carry&lt;&lt;=1;\n  if( i&gt;=7 &amp;&amp; lock[0]==0){\n    *pChar = 0;\n    pChar++;\n    carry=0x01;\n    lock[0]=1;\n   }else if ( i&gt;=15 &amp;&amp; lock[1]==0) {\n     *pChar = 0;\n      pChar++;\n      carry=0x01;\n      lock[1]=1;\n    }else if( i&gt;= 23 &amp;&amp; lock[2]==0){\n     *pChar =0;\n      pChar++;\n      carry=0x01;\n      lock[2] =1;\n      }\n      else if( i&gt;= 31 &amp;&amp; lock[3]==0){\n        *pChar =0;\n         pChar++;\n         carry=0x01;\n         lock[3] =1;\n      }\n       else if( i&gt;=39 &amp;&amp; lock[4]==0){\n           *pChar =0;\n           pChar++;\n           carry=0x01;\n           lock[4] =1;\n       }\n         else if( i&gt;= 47 &amp;&amp; lock[5]==0){\n          *pChar =0;\n          pChar++;\n          carry=0x01;\n          lock[5] =1;\n         }\n        else if( i&gt;= 55 &amp;&amp; lock[6]==0){\n          *pChar =0;\n          pChar++;\n          carry=0x01;\n          lock[6] =1;\n        }\n\n\n\n}\n</code></pre>\n\n<p>thanks for your help ! </p>\n"}], "owner": {"reputation": 4890, "user_id": 1563123, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/fJprA.jpg?s=128&g=1", "display_name": "Engine", "link": "https://stackoverflow.com/users/1563123/engine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2077, "favorite_count": 0, "accepted_answer_id": 29798328, "answer_count": 5, "score": 1, "last_activity_date": 1429724295, "creation_date": 1429700929, "last_edit_date": 1429708159, "question_id": 29795637, "link": "https://stackoverflow.com/questions/29795637/bit-shift-through-an-array", "title": "Bit shift through an array", "body": "<p>Say we have 8 bytes saved in an array like: </p>\n\n<pre><code>char array[8];\n</code></pre>\n\n<p>All of them are set to zero:</p>\n\n<pre><code>for (i = 0; i &lt; 7; i++){\narray[i] = 0x00;\n}\n</code></pre>\n\n<p>How can shift a <code>1</code> from the first LSBit until the last MSBit like </p>\n\n<pre><code>0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x01\n0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x02\n0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x04\n0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x08\n0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x10\n</code></pre>\n\n<p>.....................................</p>\n\n<p>to </p>\n\n<pre><code>0x08 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n0x10 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n0x20 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n0x40 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n0x80 0x00 0x00 0x00 0x00 0x00 0x00 0x00\n</code></pre>\n\n<p>Here is what I've tried but the result isn't what I'm looking for: </p>\n\n<pre><code>    uint8_t buffer[8];\n\nint index = 0 ;\nfor ( index = 0; index &lt; 8; index++){\n        buffer[index] = 0x00;\n    } \n*buffer= 0x01;\nfor( index = 0 ; index &lt; 64; index++){\n        *buffer = *buffer&lt;&lt; 1 ;\n}\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Here is an example of what I get: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main (){\nchar buffer[2]={0x01, 0x00};\nint i ;\nfor( i = 0 ; i &lt; 12 ; i++){\n\n  printf(\"0x %2X    %x \\n\",buffer[0], buffer[1]);\n  *buffer &lt;&lt;= 1;\n  }\n\n}\n</code></pre>\n\n<p>And the output is:</p>\n\n<pre><code>0x  1    0\n0x  2    0\n0x  4    0\n0x  8    0\n0x 10    0\n0x 20    0\n0x 40    0\n0x FFFFFF80    0\n0x  0    0\n0x  0    0\n0x  0    0\n0x  0    0\n</code></pre>\n\n<p>I really don't understand the 0xFFFFFF80! </p>\n"}, {"tags": ["c", "macros", "makefile"], "answers": [{"comments": [{"owner": {"reputation": 19948, "user_id": 3150853, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/qIPrg.jpg?s=128&g=1", "display_name": "Jayesh Bhoi", "link": "https://stackoverflow.com/users/3150853/jayesh-bhoi"}, "edited": false, "score": 0, "creation_date": 1429702616, "post_id": 29795983, "comment_id": 47720665, "body": "I know this is the way.. but need to give makefile to customer and he/she just compile with different value of test macro. he/she haven&#39;t any rights to modify the makefile/source."}], "tags": [], "owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "is_accepted": false, "score": 3, "last_activity_date": 1429701760, "creation_date": 1429701760, "answer_id": 29795983, "question_id": 29795555, "link": "https://stackoverflow.com/questions/29795555/pass-macro-value-at-command-line/29795983#29795983", "title": "Pass macro value at command line", "body": "<p>Use <code>ifdef</code> instead - easier to use.</p>\n\n<p>i.e.</p>\n\n<pre><code>#ifdef TEST_MACRO\n....\n#else\n...\n#endif\n</code></pre>\n\n<p>Then compile with <code>-DTEST_MACRO</code> to add. To compile without do not use <code>-DTEST_MACRO</code></p>\n"}], "owner": {"reputation": 19948, "user_id": 3150853, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/qIPrg.jpg?s=128&g=1", "display_name": "Jayesh Bhoi", "link": "https://stackoverflow.com/users/3150853/jayesh-bhoi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 870, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1429701760, "creation_date": 1429700728, "question_id": 29795555, "link": "https://stackoverflow.com/questions/29795555/pass-macro-value-at-command-line", "title": "Pass macro value at command line", "body": "<p>Hi i have some code and compiled using make file.Let me see you peace of code in which i got trouble.</p>\n\n<pre><code>#if (TEST_MACRO == 1)\nprintf(\"Use test configuration\");\n//some code\n#else\nprintf(\"Use actual configuration\");\n//some code\n#endif\n</code></pre>\n\n<p>And in make file have added that macro using</p>\n\n<pre><code>CFLAGS = -DTEST_MACRO \n</code></pre>\n\n<p>Now I compiled program using </p>\n\n<pre><code>make mytarget TEST_MACRO=0\n</code></pre>\n\n<p>Then also it going to execute test configuration code.</p>\n\n<p>So my question is that is default value of macro in makefile is <strong>1</strong>?\nIf yes then how to make it <strong>0</strong>?</p>\n\n<p>I tried something like </p>\n\n<pre><code>CFLAGS = -DTEST_MACRO=0\n</code></pre>\n\n<p>But in this case it always going to execute actual configuration even i pass value <strong>1</strong>.</p>\n\n<p>Can any one help me?</p>\n"}, {"tags": ["c", "multithreading", "pthreads"], "comments": [{"owner": {"reputation": 153, "user_id": 3673851, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ca866e4766d3a0642a353f19f2c34be4?s=128&d=identicon&r=PG&f=1", "display_name": "divmermarlav", "link": "https://stackoverflow.com/users/3673851/divmermarlav"}, "edited": false, "score": 1, "creation_date": 1429700054, "post_id": 29795190, "comment_id": 47718715, "body": "I think <code>main</code> is ending before threads do, but can&#39;t figure out how to solve it"}, {"owner": {"reputation": 2346, "user_id": 2549281, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XpMre.jpg?s=128&g=1", "display_name": "Dabo", "link": "https://stackoverflow.com/users/2549281/dabo"}, "edited": false, "score": 0, "creation_date": 1429700140, "post_id": 29795190, "comment_id": 47718782, "body": "<code>pthread_join</code> will solve the issue, call it for each created thread in main"}, {"owner": {"reputation": 153, "user_id": 3673851, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ca866e4766d3a0642a353f19f2c34be4?s=128&d=identicon&r=PG&f=1", "display_name": "divmermarlav", "link": "https://stackoverflow.com/users/3673851/divmermarlav"}, "reply_to_user": {"reputation": 2346, "user_id": 2549281, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XpMre.jpg?s=128&g=1", "display_name": "Dabo", "link": "https://stackoverflow.com/users/2549281/dabo"}, "edited": false, "score": 0, "creation_date": 1429700283, "post_id": 29795190, "comment_id": 47718889, "body": "Is this necessary? Because I don&#39;t really need to join them, just that each one does its work"}, {"owner": {"reputation": 2346, "user_id": 2549281, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XpMre.jpg?s=128&g=1", "display_name": "Dabo", "link": "https://stackoverflow.com/users/2549281/dabo"}, "edited": false, "score": 0, "creation_date": 1429700358, "post_id": 29795190, "comment_id": 47718972, "body": "<code>pthread_join()</code> function is called to wait for the threads to complete. If main is done before threads are done, they will die before they finished their job"}, {"owner": {"reputation": 153, "user_id": 3673851, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ca866e4766d3a0642a353f19f2c34be4?s=128&d=identicon&r=PG&f=1", "display_name": "divmermarlav", "link": "https://stackoverflow.com/users/3673851/divmermarlav"}, "reply_to_user": {"reputation": 2346, "user_id": 2549281, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XpMre.jpg?s=128&g=1", "display_name": "Dabo", "link": "https://stackoverflow.com/users/2549281/dabo"}, "edited": false, "score": 0, "creation_date": 1429700475, "post_id": 29795190, "comment_id": 47719077, "body": "it works! Thanks. Post it as an answer and I will accept it. Could you please explain why is this necessary?"}], "answers": [{"comments": [{"owner": {"reputation": 153, "user_id": 3673851, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ca866e4766d3a0642a353f19f2c34be4?s=128&d=identicon&r=PG&f=1", "display_name": "divmermarlav", "link": "https://stackoverflow.com/users/3673851/divmermarlav"}, "edited": false, "score": 1, "creation_date": 1429700721, "post_id": 29795361, "comment_id": 47719230, "body": "since begginers as myself may see this, this is the code I added <code>for (i=0; i&lt;n_th; i++)      {pthread_join(threads[i], NULL);}</code>"}], "tags": [], "owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "is_accepted": false, "score": 4, "last_activity_date": 1429700195, "creation_date": 1429700195, "answer_id": 29795361, "question_id": 29795190, "link": "https://stackoverflow.com/questions/29795190/incorrect-output-of-code-after-using-pthreads/29795361#29795361", "title": "Incorrect output of code after using pthreads", "body": "<p>Your <code>main</code> is terminating before the other threads. <code>main</code> is special, as returning from it is equivalent to call <code>exit</code>.</p>\n\n<p>Either use <code>pthread_exit</code> to end <code>main</code> or use <code>pthread_join</code> to wait for the termination of the other threads.</p>\n"}, {"comments": [{"owner": {"reputation": 153, "user_id": 3673851, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ca866e4766d3a0642a353f19f2c34be4?s=128&d=identicon&r=PG&f=1", "display_name": "divmermarlav", "link": "https://stackoverflow.com/users/3673851/divmermarlav"}, "edited": false, "score": 2, "creation_date": 1429700811, "post_id": 29795495, "comment_id": 47719293, "body": "since begginers as myself may see this, this is the code I added <code>for (i=0; i&lt;n_th; i++)      {pthread_join(threads[i], NULL);}</code>"}], "tags": [], "owner": {"reputation": 2346, "user_id": 2549281, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XpMre.jpg?s=128&g=1", "display_name": "Dabo", "link": "https://stackoverflow.com/users/2549281/dabo"}, "is_accepted": true, "score": 1, "last_activity_date": 1429700565, "creation_date": 1429700565, "answer_id": 29795495, "question_id": 29795190, "link": "https://stackoverflow.com/questions/29795190/incorrect-output-of-code-after-using-pthreads/29795495#29795495", "title": "Incorrect output of code after using pthreads", "body": "<p><code>pthread_join</code> will solve the issue, call it for each created thread in main. <code>pthread_join()</code> function is called to wait for the threads to complete. If main is done before threads are done, they will die before they finished their job.</p>\n"}], "owner": {"reputation": 153, "user_id": 3673851, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ca866e4766d3a0642a353f19f2c34be4?s=128&d=identicon&r=PG&f=1", "display_name": "divmermarlav", "link": "https://stackoverflow.com/users/3673851/divmermarlav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 29795495, "answer_count": 2, "score": 1, "last_activity_date": 1429700565, "creation_date": 1429699747, "question_id": 29795190, "link": "https://stackoverflow.com/questions/29795190/incorrect-output-of-code-after-using-pthreads", "title": "Incorrect output of code after using pthreads", "body": "<p>I am working in some code trying to make it use threads, with little success. The code is as follows (using some online tuts)</p>\n\n<p>(1) Create an array to save arguments to pass to each thread. \n(2) The struct where thread args are stored \n(3) Function each thread executes \n(4) Main, where I create each pthread and pass args. <code>end</code> and <code>begin</code> are dummy <code>i</code> and <code>i+1</code> just for testing purposes.</p>\n\n<pre><code>#include &lt;pthread.h&gt;\nstruct thread_data* thread_data_array;\n\nstruct thread_data{\n   int  thread_id;\n   int  begin;\n   int  end;\n};\nvoid *proccessData(void *threadarg)\n{\n  struct thread_data *my_data = (struct thread_data *) threadarg;\n  int id = my_data-&gt;thread_id;\n  int start = my_data-&gt;begin;\n  int end = my_data-&gt;end;\n  printf(\"%s%d%s%d%s%d%s\",\"Process: Id \",id,\" begin: \",start,\" end: \",end,\"\\n\");\n\n  // Init\n  FILE* fileOut;\n  // do stuff\n  fileOut = fopen(someNameUsingId, \"w\");\n  // more stuff\n  fclose(fileOut);\n}\nint main(int argc, char **argv)\n{\n  int n_th = atoi(argv[1]);\n  thread_data_array = malloc(n_th*sizeof(struct thread_data));\n  pthread_t threads[n_th];\n  int i;\n\n  for (i=0; i&lt;n_th; i++)\n  {\n    thread_data_array[i].thread_id = i;\n    thread_data_array[i].begin = i;\n    thread_data_array[i].end = i+1;\n    pthread_create(&amp;threads[i], NULL, proccessData,(void *) &amp;thread_data_array[i]);\n  }\n}\n</code></pre>\n\n<p>What I am getting: Sometimes nothing is printed, Sometimes some ids are printed twice. Files are not created (one in every 5 lets say, files are created, and are empty)</p>\n\n<p>But using this in main works as I am expecting, id 1 from 0 to 1 is printed, id 2 from 1 to 2, and both files are created and have the right content</p>\n\n<pre><code>  thread_data_array[0].thread_id = 1;\n  thread_data_array[0].begin = 0;\n  thread_data_array[0].end = 1;\n  proccessData((void *) &amp;thread_data_array[0]);\n\n  thread_data_array[1].thread_id = 2;\n  thread_data_array[1].begin = 1;\n  thread_data_array[1].end = 2;\n  proccessData((void *) &amp;thread_data_array[1]);\n</code></pre>\n\n<p>Can someone point out what am I doing wrong, and how to solve it? </p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["c", "pointers", "redirect", "parent-child", "pipeline"], "comments": [{"owner": {"reputation": 2141, "user_id": 3710044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfd665eb6cb69cfcdbf5537974a78a17?s=128&d=identicon&r=PG&f=1", "display_name": "user3710044", "link": "https://stackoverflow.com/users/3710044/user3710044"}, "edited": false, "score": 0, "creation_date": 1429776177, "post_id": 29795095, "comment_id": 47761447, "body": "Okay, first impressions: You need <code>break;</code> instructions in your <code>switch</code> as <code>case</code> falls through in C. You have a <code>fork</code> in a loop without exiting the loop in the child. This will give you (order of) <code>number_of_children*number_of_children</code> processes not just a line."}, {"owner": {"reputation": 56, "user_id": 3551963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3GMFb.jpg?s=128&g=1", "display_name": "Davidaz", "link": "https://stackoverflow.com/users/3551963/davidaz"}, "reply_to_user": {"reputation": 2141, "user_id": 3710044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfd665eb6cb69cfcdbf5537974a78a17?s=128&d=identicon&r=PG&f=1", "display_name": "user3710044", "link": "https://stackoverflow.com/users/3710044/user3710044"}, "edited": false, "score": 0, "creation_date": 1429782087, "post_id": 29795095, "comment_id": 47765655, "body": "@user3710044 I commented the break thing. In my code every child ends on a execvp, and, in case it fails, returns an error, kills every child and makes an exit(1), so this is not the failure as every child ends exiting, making them impossible to go back to the for loop. I thought on a solution, but the sad thing is that it works on the paper but not in the computer haha. If I make it I&#39;ll post it, just in case somebody wonders if it can work (but it seems is not the case). Thank you!"}], "answers": [{"tags": [], "owner": {"reputation": 56, "user_id": 3551963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3GMFb.jpg?s=128&g=1", "display_name": "Davidaz", "link": "https://stackoverflow.com/users/3551963/davidaz"}, "is_accepted": true, "score": 0, "last_activity_date": 1430127731, "last_edit_date": 1430127731, "creation_date": 1429978957, "answer_id": 29867728, "question_id": 29795095, "link": "https://stackoverflow.com/questions/29795095/pipeline-idea-not-working-due-to-pointers-c/29867728#29867728", "title": "Pipeline idea not working due to pointers (C)", "body": "<p>Well, I finally made it, but changing the point of view and not working with any address overwrite, only playing with the iterations, in order always keep the record of one of the two pipes. I didn't really solve the address problem, but it works so, I'm satisfied. </p>\n\n<pre class=\"lang-c prettyprint-override\"><code>piping_function(int number_of_child){\n\n    int i;\n    int olddesc[2];\n    int newdesc[2]; //Here I create the descriptors of the pipes I'll use\n\n    //Now we'll start from the last pipe, so we can connect the parent to the first one and not connect the last child's output.\n    for(i = number_of_child - 1; i &gt;= 0; i--){\n        //Instead of changing addresses, I'll play with the \"i\"\n        if(i%2==0){\n            close(newdesc[0]); //We close the last descriptors \n            close(newdesc[1]);\n            pipe(newdesc); //And create a new pipe!\n        }\n        else{\n            close(olddesc[0]);\n            close(olddesc[1]);\n            pipe(oldesc);\n        }\n        chaddr[i] = fork();\n        switch(chaddr[i]){\n            case -1:\n                //Error trace\n            case 0:\n                if(i%2==0){\n                    dup2(newdesc[0],0); //Here I redirect the pipe who connect the previous child's pipe to the standard input\n                    if(i != number_of_child - 1)\n                        dup2(olddesc[1],1); //And here, except from the last child, I redirect the standard output to the pipe who will connect to the standard input of the next child\n                    close(newdesc[1]);\n                    close(olddesc[0]); //I close the descriptors I don't need    \n                }\n                else{\n                    dup2(olddesc[0],0); //Here I redirect the pipe who connect the previous child's pipe to the standard input\n                    if(i != number_of_child - 1)\n                        dup2(newdesc[1],1); //And here, except from the last child, I redirect the standard output to the pipe who will connect to the standard input of the next child\n                    close(olddesc[1]);\n                    close(newdesc[0]); //I close the descriptors I don't need\n                }\n                //Several child operations with standard input-output (end up exiting 0/1 after the pipeline is connected, so no child will create any child)\n            default:\n                if(i == 0)\n                    dup2(newdesc[1], 1); //I want the standard output of the principal proccess only on the first pipe\n                break;\n        }//End of switch\n    }//End of for\n    close(olddesc[0]);close(olddesc[1]);close(newdesc[0]);close(newdesc[1]); //I don't need these descriptors anymore, as they must be redirected to the standard's input/output of the process they need.\n}//End of function\n</code></pre>\n\n<p>*Edit:</p>\n\n<p>I don't think it's good to close always the descriptors, even without creating anything, I saw I left them this way on this piece of code, but in order to make it work correctly we should only close the descriptors when created so an if would be needed on every close.</p>\n"}], "owner": {"reputation": 56, "user_id": 3551963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3GMFb.jpg?s=128&g=1", "display_name": "Davidaz", "link": "https://stackoverflow.com/users/3551963/davidaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 2, "accepted_answer_id": 29867728, "answer_count": 1, "score": 1, "last_activity_date": 1430127731, "creation_date": 1429699514, "question_id": 29795095, "link": "https://stackoverflow.com/questions/29795095/pipeline-idea-not-working-due-to-pointers-c", "title": "Pipeline idea not working due to pointers (C)", "body": "<p>I was working on a little program I had to make some time ago, and I wanted to short it up.</p>\n\n<p>This little program was about one thread creating several child who would redirect their standard output/input one to another with pipes in order, except for the last child, who won't redirect it's standard output, like this.</p>\n\n<pre><code>Parent pipe  child1   pipe   child2  pipe   last child\n       __             __             __\nO-----|__|-----O-----|__|-----O-----|__|-----O -&gt; Stdout\n</code></pre>\n\n<p>First time I face this code, I made a matrix with a dimension of [n_child][2], and made a pipe from every position of that matrix, so it was very easy to connect every pipe to every child when needed. But now I want to try it only with 2 pipes, and \"playing\" with inheritance.</p>\n\n<p>Maybe I'm not explaining myself really well, so I think everything would be better understood with my code,so here we go. </p>\n\n<pre class=\"lang-c prettyprint-override\"><code>piping_function(int number_of_child){\n\n    int i;\n    int olddesc[2];\n    int newdesc[2]; //Here I create the descriptors of the pipes I'll use\n    int *olddir;\n    int *newdir;\n    if(pipe(olddesc)&lt;0 || pipe(newdesc) &lt; 0){  //I create the pipes\n        //Error \n    }\n    olddir = olddesc;\n    newdir = newdesc; //And attach the directions to the array's direction (we will see later why)\n    for(i = 0; i &lt; number_of_child; i++){\n        chaddr[i] = fork();\n        switch(chaddr[i]){\n            case -1:\n                //Error trace\n            case 0:\n                dup2(olddesc[0],0); //Here I redirect the pipe who connect the previous child's pipe to the standard input\n                if(i != number_of_child - 1)\n                    dup2(newdesc[1],1); //And here, except from the last child, I redirect the standard output to the pipe who will connect to the standard input of the next child\n                close(olddesc[0]);\n                close(newdesc[1]); //I close the descriptors I don't need\n                //Several child operations with standard input-output (end up returning 0/1 after the pipeline is connected, so no child will create any child)\n            default:\n                if(i == 0)\n                    dup2(olddesc[1], 1); //I want the standard output of the principal proccess only on the first pipe\n                olddir = newdir; //Here I would want the direction of the \"old\" pipe to be the direction of the \"new\" pipe, in order to achieve the pipeline\n                if(pipe(newdesc)&lt;0)\n                    //Error\n                break;\n        }//End of switch\n    }//End of for\n    close(olddesc[0]);close(olddesc[1]);close(newdesc[0]);close(newdesc[1]); //I don't need these descriptors anymore, as they must be redirected to the standard's input/output of the process they need.\n}//End of function\n</code></pre>\n\n<p>Well, there is my code. I think I can see the mistake I'm doing, when I make olddir be newdir, and create the pipe, I'm doing olddir to be also that new pipe right? So here comes my question:</p>\n\n<p>Is there any way to achieve that change? I mean, the thing I want is to equal olddir (who is the address of olddesc, right? so if I change that address olddesc's address will be also changed, right?) to newdir, in order to continue with the pipe I created before to redirect the standard output of the \"next\" child, but I also want newdir to be a NEW pipe. </p>\n\n<p>I don't really know if I explained myself right, I'm not a native speaker and it's a bit difficult to explain these kind of ideas in other language. Feel free to correct any grammar mistake, I'd appreciate it, and to ask any question about the code, as maybe I'm not giving the point I wanted to.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 25722, "user_id": 2192903, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/mNrNH.png?s=128&g=1", "display_name": "Arnaud Denoyelle", "link": "https://stackoverflow.com/users/2192903/arnaud-denoyelle"}, "edited": false, "score": 0, "creation_date": 1429699402, "post_id": 29794953, "comment_id": 47718218, "body": "Your program seems good. What is exactly your problem? If you want to return the most frequent character, you only have to change the last lines in order to keep track of it in the same time as you register the <code>max</code>. I would also recommend to avoid <code>for&#47;if</code> statements without curly brackets. This is evil and error prone."}, {"owner": {"reputation": 7193, "user_id": 1856325, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ZO1bm.png?s=128&g=1", "display_name": "FreeNickname", "link": "https://stackoverflow.com/users/1856325/freenickname"}, "edited": false, "score": 1, "creation_date": 1429701136, "post_id": 29794953, "comment_id": 47719554, "body": "Joe&#39;s answer is good. I just wanted to add that it&#39;s better to change <code>char frequency[26]</code> to <code>int frequency[26]</code>. Or even <code>long</code>. Otherwise the code won&#39;t work correctly if the input text contains more than 255 identical letters (for instance, 270 <code>A</code>s), because the counter will overflow."}, {"owner": {"reputation": 18759, "user_id": 2226988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6fbec3a71b2e95e4a6e41478deb379?s=128&d=identicon&r=PG", "display_name": "Tom Blodget", "link": "https://stackoverflow.com/users/2226988/tom-blodget"}, "edited": false, "score": 0, "creation_date": 1429747239, "post_id": 29794953, "comment_id": 47750128, "body": "There are lots of alphabetic characters other than A-Z and a-z. If your algorithm isn&#39;t intended to handle them, just abend, for example, <code>if (ch &gt; 127) return -2;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 205, "user_id": 4758587, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10203686253709055/picture?type=large", "display_name": "caddy-caddy", "link": "https://stackoverflow.com/users/4758587/caddy-caddy"}, "edited": false, "score": 0, "creation_date": 1429700722, "post_id": 29795066, "comment_id": 47719233, "body": "Thank you very much! Now it works fine until the function is tested with an empty file. Instead of returning 0 it returns &#39;A&#39;."}, {"owner": {"reputation": 42480, "user_id": 148423, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6ed1f9b5afd258d0b73ad1eae10ac384?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/148423/joe"}, "reply_to_user": {"reputation": 205, "user_id": 4758587, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10203686253709055/picture?type=large", "display_name": "caddy-caddy", "link": "https://stackoverflow.com/users/4758587/caddy-caddy"}, "edited": false, "score": 1, "creation_date": 1429700933, "post_id": 29795066, "comment_id": 47719394, "body": "Somehow you need to find a way to return from your function the information that there is no max character. One way is to return a special number, like <code>-1</code> to indicate this. I won&#39;t write the code for you! Why not think about setting <code>maxChar</code> to a special initial value, so if it never gets changed, you can tell. Or setting a boolean flag in the loop so you know if it ever runs."}], "tags": [], "owner": {"reputation": 42480, "user_id": 148423, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6ed1f9b5afd258d0b73ad1eae10ac384?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/148423/joe"}, "is_accepted": true, "score": 5, "last_activity_date": 1429700384, "last_edit_date": 1429700384, "creation_date": 1429699458, "answer_id": 29795066, "question_id": 29794953, "link": "https://stackoverflow.com/questions/29794953/finding-the-most-frequent-character-in-a-file-in-c/29795066#29795066", "title": "Finding the most frequent character in a file in C", "body": "<p>The variable <code>frequency</code> is indexed by the character code. So <code>frequency[0]</code> is 5, if there have been 5 'a's. </p>\n\n<p>In your code you are assigning the count to <code>max</code>, not the character code, so you're returning the count not the actual character.</p>\n\n<p>You need to store both the maximum frequency count and the character code that it referred to.</p>\n\n<p>I would fix this with:</p>\n\n<pre><code>int maxCount = 0;\nint maxChar = 0;\n// i = A to Z\nfor (int i = 0; i &lt;= 26; ++i)\n{\n  // if freq of this char is greater than the previous max freq\n  if (frequency[i] &gt; maxCount)\n  {\n      // store the value of the max freq\n      maxCount = frequency[i];\n\n      // store the char that had the max freq\n      maxChar = i;\n  }\n}\n\n// character codes are zero-based alphabet.\n// Add ASCII value of 'A' to turn back into a char code.\nreturn maxChar + 'A';\n</code></pre>\n\n<p>Note that I changed <code>int i = 1</code> to <code>int i = 0</code>. Starting at 1 would mean starting at <code>B</code>, which is a subtle bug you might not notice. Also, the loop should terminate at <code>&lt;= 26</code>, otherwise you'd miss out <code>Z</code> too.</p>\n\n<p>Note the braces. Your braces style (no braces for single-statement blocks) comes <em>very</em> highly un-recommended.</p>\n\n<p>Also, <code>i++</code> is more common than <code>++i</code> in cases like this. In this context it will make no difference, so would advise <code>i++</code>.</p>\n"}], "owner": {"reputation": 205, "user_id": 4758587, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10203686253709055/picture?type=large", "display_name": "caddy-caddy", "link": "https://stackoverflow.com/users/4758587/caddy-caddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1373, "favorite_count": 0, "accepted_answer_id": 29795066, "answer_count": 1, "score": 3, "last_activity_date": 1429700384, "creation_date": 1429699151, "last_edit_date": 1429699693, "question_id": 29794953, "link": "https://stackoverflow.com/questions/29794953/finding-the-most-frequent-character-in-a-file-in-c", "title": "Finding the most frequent character in a file in C", "body": "<p>I'm writing a function that finds the most common alphabetic character in a file. The function should ignore all characters other than alphabetic.</p>\n\n<p>At the moment I have the following:</p>\n\n<pre><code>int most_common(const char *filename)\n{\nchar frequency[26];\nint ch = 0;\n\nFILE *fileHandle;\nif((fileHandle = fopen(filename, \"r\")) == NULL){\n    return -1;\n}\n\nfor (ch = 0; ch &lt; 26; ch++)\n    frequency[ch] = 0;\n\nwhile(1){\n    ch = fgetc(fileHandle);\n    if (ch == EOF) break;\n\n    if ('a' &lt;= ch &amp;&amp; ch  &lt;= 'z')\n        frequency[ch - 'a']++;\n    else if ('A' &lt;= ch &amp;&amp; ch &lt;= 'Z')\n        frequency[ch - 'A']++;\n}\n\nint max = 0;\nfor (int i = 1; i &lt; 26; ++i)\n  if (frequency[i] &gt; frequency[max])\n      max = i;\n\nreturn max;\n}\n</code></pre>\n\n<p>Now the function returns how many times the most frequent letter occurred, not the character itself. I'm a bit lost, as I'm not sure if that's the way this function should look like at all. Does it make sense and how possibly can I fix the problem?</p>\n\n<p>I would really appreciate your help.</p>\n"}, {"tags": ["c", "pointers", "segmentation-fault"], "comments": [{"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 3, "creation_date": 1429698988, "post_id": 29794870, "comment_id": 47717886, "body": "This isn&#39;t java. ;-)"}, {"owner": {"reputation": 1016, "user_id": 3998205, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/44de281134f32f62678461168a20dfee?s=128&d=identicon&r=PG&f=1", "display_name": "java", "link": "https://stackoverflow.com/users/3998205/java"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1429699070, "post_id": 29794870, "comment_id": 47717946, "body": "@2501 - should I take a deep copy :-p"}, {"owner": {"reputation": 1800, "user_id": 4769313, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/gFISt.png?s=128&g=1", "display_name": "Sir Jo Black", "link": "https://stackoverflow.com/users/4769313/sir-jo-black"}, "edited": false, "score": 0, "creation_date": 1429699336, "post_id": 29794870, "comment_id": 47718157, "body": "Try: scanf(&quot; %d&quot;, &amp;nmbrOfUnits); The function scanf requires a pointer to the variable(s) in which the data that the user inputs will be written! (This I said is wrong ... I don&#39;t look at you code very good!)"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "reply_to_user": {"reputation": 1800, "user_id": 4769313, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/gFISt.png?s=128&g=1", "display_name": "Sir Jo Black", "link": "https://stackoverflow.com/users/4769313/sir-jo-black"}, "edited": false, "score": 1, "creation_date": 1429699401, "post_id": 29794870, "comment_id": 47718217, "body": "@SergioFormiggini , <code>nmbrOfUnits</code> <i>is</i> a pointer."}, {"owner": {"reputation": 1800, "user_id": 4769313, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/gFISt.png?s=128&g=1", "display_name": "Sir Jo Black", "link": "https://stackoverflow.com/users/4769313/sir-jo-black"}, "edited": false, "score": 0, "creation_date": 1429699502, "post_id": 29794870, "comment_id": 47718299, "body": "Ops ... Ok! I don&#39;t see that!!! ... Then the problem is that the pointers points nothing!!!!"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 1800, "user_id": 4769313, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/gFISt.png?s=128&g=1", "display_name": "Sir Jo Black", "link": "https://stackoverflow.com/users/4769313/sir-jo-black"}, "edited": false, "score": 1, "creation_date": 1429699550, "post_id": 29794870, "comment_id": 47718335, "body": "@SergioFormiggini; No. Pointer is pointing to a random location."}, {"owner": {"reputation": 1800, "user_id": 4769313, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/gFISt.png?s=128&g=1", "display_name": "Sir Jo Black", "link": "https://stackoverflow.com/users/4769313/sir-jo-black"}, "edited": false, "score": 0, "creation_date": 1429699607, "post_id": 29794870, "comment_id": 47718385, "body": "Yes ... Is true!!! Is pointing something in the air ;)"}, {"owner": {"reputation": 1800, "user_id": 4769313, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/gFISt.png?s=128&g=1", "display_name": "Sir Jo Black", "link": "https://stackoverflow.com/users/4769313/sir-jo-black"}, "edited": false, "score": 0, "creation_date": 1429699823, "post_id": 29794870, "comment_id": 47718551, "body": "I suggest to use: int nmbrOfUnits; and then input(&amp;nmbrOfUnits); ... If you need to use the pointer you have the reply in the answers you received!"}], "answers": [{"comments": [{"owner": {"reputation": 1016, "user_id": 3998205, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/44de281134f32f62678461168a20dfee?s=128&d=identicon&r=PG&f=1", "display_name": "java", "link": "https://stackoverflow.com/users/3998205/java"}, "edited": false, "score": 0, "creation_date": 1429699050, "post_id": 29794882, "comment_id": 47717932, "body": "i fixed it. Made i misstake - all the same theres a segmentation fault."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 1016, "user_id": 3998205, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/44de281134f32f62678461168a20dfee?s=128&d=identicon&r=PG&f=1", "display_name": "java", "link": "https://stackoverflow.com/users/3998205/java"}, "edited": false, "score": 0, "creation_date": 1429699838, "post_id": 29794882, "comment_id": 47718558, "body": "@java :-) the timestamp is in my favor."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 1, "creation_date": 1429699985, "post_id": 29794882, "comment_id": 47718664, "body": "Disagree with downvote. People should go through the question&#39;s edit history."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1429700174, "post_id": 29794882, "comment_id": 47718811, "body": "@2501; OK, now I see."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 2, "last_activity_date": 1429706550, "last_edit_date": 1429706550, "creation_date": 1429698980, "answer_id": 29794882, "question_id": 29794870, "link": "https://stackoverflow.com/questions/29794870/passing-a-pointer-to-scanf-produces-segmentation-fault/29794882#29794882", "title": "Passing a pointer to scanf() produces segmentation fault", "body": "<p>In your code</p>\n\n<pre><code> int *nmbrOfUnits = 0;\n</code></pre>\n\n<p>does not make <code>nmbrOfUnits</code> to point to a <em>valid</em> memory location to be <em>read from</em> or <em>write into</em>. To use properly, you need to allocate memory to the pointer first. You can do this two ways. </p>\n\n<ol>\n<li>Use dynamic memory allocation <a href=\"http://linux.die.net/man/3/malloc\" rel=\"nofollow\"><code>malloc()/calloc()</code></a></li>\n</ol>\n\n<p>Sample code:<sup><code>free()</code>ing part omitted</sup></p>\n\n<pre><code>int *nmbrOfUnits = malloc(sizeof(int));\n\n int * input(int *nmbrOfUnits) {\n        if (!nmbrOfUnits)\n        {\n              exit(-1);\n        }\n        printf(\"numnber if units: \");\n          scanf(\" %d\", nmbrOfUnits);\n\n        return nmbrOfUnits ;\n  } \n</code></pre>\n\n<ol start=\"2\">\n<li>assign the address of some compile time defined variable.</li>\n</ol>\n\n<p>Sample code:</p>\n\n<pre><code> int variable = 0;\n int *nmbrOfUnits = &amp;variable;\n</code></pre>\n\n<p>and then, pass it to other functions.</p>\n"}, {"tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 3, "last_activity_date": 1429699894, "last_edit_date": 1429699894, "creation_date": 1429699056, "answer_id": 29794905, "question_id": 29794870, "link": "https://stackoverflow.com/questions/29794870/passing-a-pointer-to-scanf-produces-segmentation-fault/29794905#29794905", "title": "Passing a pointer to scanf() produces segmentation fault", "body": "<p><code>nmbrOfUnits</code> in not initialized and therefore pointing to a random memory location. Writing to such location may lead to a program crash or it may behave erratically.\n You need to allocate memory first before writing to it.  </p>\n\n<pre><code>int *nmbrOfUnits = malloc(sizeof(int));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 5, "last_activity_date": 1429700681, "last_edit_date": 1429700681, "creation_date": 1429699100, "answer_id": 29794933, "question_id": 29794870, "link": "https://stackoverflow.com/questions/29794870/passing-a-pointer-to-scanf-produces-segmentation-fault/29794933#29794933", "title": "Passing a pointer to scanf() produces segmentation fault", "body": "<p>The pointer shall point to memory where the value will be written. For example</p>\n\n<pre><code> int *nmbrOfUnits = malloc( sizeof( int ) );\n</code></pre>\n\n<p>or</p>\n\n<pre><code> int x; \n int *nmbrOfUnits = &amp;x;\n</code></pre>\n\n<p>Another approach is to allow the function itself to allocate the mamory that will be pointed to by the pointer. For example</p>\n\n<pre><code>void input( int **nmbrOfUnits ) \n{\n    *nmbrOfUnits = malloc( sizeof( int ) );\n\n    if ( *nmbrOfUnits != NULL )\n    {\n        printf( \"numnber if units: \" );\n        scanf( \" %d\", *nmbrOfUnits );\n    }\n}\n\n//...\n\nint *nmbrOfUnits;\n//...\ninput( &amp;nmbrOfUnits );\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1055, "user_id": 3406936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2294a96c8fb728eca7525ea9de2e3e5?s=128&d=identicon&r=PG&f=1", "display_name": "Shlomi Agiv", "link": "https://stackoverflow.com/users/3406936/shlomi-agiv"}, "is_accepted": false, "score": 1, "last_activity_date": 1429701112, "last_edit_date": 1429701112, "creation_date": 1429699501, "answer_id": 29795085, "question_id": 29794870, "link": "https://stackoverflow.com/questions/29794870/passing-a-pointer-to-scanf-produces-segmentation-fault/29795085#29795085", "title": "Passing a pointer to scanf() produces segmentation fault", "body": "<p>you have two variables, both called nmbrOfUnits. This can cause a lot of confusion as to which var you're referring to.</p>\n\n<p>The right way to write it if you want the variable to be global is:</p>\n\n<pre><code>int g_nmbrOfUnits;\nvoid input(int *p_nmbrOfUnits) {\n    printf(\"numnber if units: \");  //typos in the original\n    scanf(\"%d\", p_nmbrOfUnits);\n}\n</code></pre>\n\n<p>and then in another function:</p>\n\n<pre><code>input(&amp;g_nmbrOfUnits);\n</code></pre>\n"}], "owner": {"reputation": 1016, "user_id": 3998205, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/44de281134f32f62678461168a20dfee?s=128&d=identicon&r=PG&f=1", "display_name": "java", "link": "https://stackoverflow.com/users/3998205/java"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "accepted_answer_id": 29794882, "answer_count": 4, "score": 0, "last_activity_date": 1429706550, "creation_date": 1429698944, "last_edit_date": 1429702490, "question_id": 29794870, "link": "https://stackoverflow.com/questions/29794870/passing-a-pointer-to-scanf-produces-segmentation-fault", "title": "Passing a pointer to scanf() produces segmentation fault", "body": "<p>What is wrong with this code?</p>\n\n<pre><code>void input(int *nmbrOfUnits);    \n\nint main() {  \n   int *nmbrOfUnits;\n   input(nmbrOfUnits);\n}\n\n void input(int *nmbrOfUnits) {\n        printf(\"numnber if units: \");\n          scanf(\" %d\", nmbrOfUnits);\n\n  }\n</code></pre>\n\n<p>edit: the variable is created in main and that should mean if main calls input the variable is not poped from the stack. Why should I allocate it on the heap?\nI pass a pointer and use it in scanf. Why do I get a segmentation fault here?</p>\n"}, {"tags": ["c", "arrays", "function", "pointers"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1429699089, "post_id": 29794831, "comment_id": 47717962, "body": "Did you mean to use untyped declarations? Generally you should use complete prototypes in C: <code>void funcBB(void)</code>, <code>void (*inst[X][Y])(void)</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1067, "user_id": 4769035, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/27f6dfcd5cee3d8f265be617bb83049e?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/4769035/alex"}, "edited": false, "score": 0, "creation_date": 1429699466, "post_id": 29794896, "comment_id": 47718266, "body": "[Facepalm] Right. I am not in any function currently, thanks :)"}], "tags": [], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": false, "score": 2, "last_activity_date": 1429699036, "creation_date": 1429699036, "answer_id": 29794896, "question_id": 29794831, "link": "https://stackoverflow.com/questions/29794831/can-not-fill-a-double-array-with-function-pointers/29794896#29794896", "title": "Can not fill a double array with function pointers", "body": "<p>A C program consists of a sequence of <em>declaration</em> statements only. Any other statements, including expression statements, are not permitted at the top level. (There is no control flow at the top level. Control starts by calling some function, usually <code>main</code>.)</p>\n\n<p>Move the assignment into a <em>function</em>:</p>\n\n<pre><code>void funcB8();\nvoid (*instr[256][257])();\n\nint main(void)\n{\n    instr[0xB8][256] = &amp;funcB8;\n}\n</code></pre>\n\n<p>Alternatively you can have an initializer in a declaration. For example:</p>\n\n<pre><code>int a[3] = { 1, 2, 3 };    // OK at top level\n</code></pre>\n\n<p>The values in the initializer are constant expressions, and thus they do not require any control flow.</p>\n"}, {"comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1429699327, "post_id": 29794963, "comment_id": 47718151, "body": "Ah, designated member initializers. Nice."}, {"owner": {"reputation": 1067, "user_id": 4769035, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/27f6dfcd5cee3d8f265be617bb83049e?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/4769035/alex"}, "edited": false, "score": 0, "creation_date": 1429699576, "post_id": 29794963, "comment_id": 47718363, "body": "Have not heard about such syntax before. Should be handy."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 1067, "user_id": 4769035, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/27f6dfcd5cee3d8f265be617bb83049e?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/4769035/alex"}, "edited": false, "score": 0, "creation_date": 1429701645, "post_id": 29794963, "comment_id": 47719929, "body": "@Alex: It&#39;s new in C99. If you&#39;re a hard-core traditionalist and only program in C89, you can&#39;t use it."}], "tags": [], "owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "is_accepted": true, "score": 3, "last_activity_date": 1429699176, "creation_date": 1429699176, "answer_id": 29794963, "question_id": 29794831, "link": "https://stackoverflow.com/questions/29794831/can-not-fill-a-double-array-with-function-pointers/29794963#29794963", "title": "Can not fill a double array with function pointers", "body": "<p>You can initialize the array at a specific index outside a function:</p>\n\n<pre><code>void (*instr[256][257])() = { [0xB8][256] = &amp;funcB8 };\n</code></pre>\n\n<p>or assign a value to the array, but to do that you have to do that in a function</p>\n"}], "owner": {"reputation": 1067, "user_id": 4769035, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/27f6dfcd5cee3d8f265be617bb83049e?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/4769035/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 29794963, "answer_count": 2, "score": -1, "last_activity_date": 1429699176, "creation_date": 1429698798, "question_id": 29794831, "link": "https://stackoverflow.com/questions/29794831/can-not-fill-a-double-array-with-function-pointers", "title": "Can not fill a double array with function pointers", "body": "<p>At the third line I get \"Expected a declaration\" for instr[0xB8][256]</p>\n\n<pre><code>void funcB8 ();\nvoid (*instr[256][257])();\ninstr[0xB8][256] = &amp;funcB8;\n</code></pre>\n"}, {"tags": ["c", "linux", "shell"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1429697994, "post_id": 29794295, "comment_id": 47717152, "body": "A shell is basically a command line interpreter."}, {"owner": {"reputation": 23, "user_id": 4455877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbfec14bf9c678163c675bd72a85ab2f?s=128&d=identicon&r=PG&f=1", "display_name": "George M", "link": "https://stackoverflow.com/users/4455877/george-m"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1429698166, "post_id": 29794295, "comment_id": 47717268, "body": "Yes, I realise that but it doesn&#39;t help me implement the code. Is it written,compiled and ran like a normal program? How do I make it run &quot;ls&quot;-like commands? I haven&#39;t understood the basic concepts of a shell."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1429698347, "post_id": 29794295, "comment_id": 47717408, "body": "It&#39;s a normal program. Basically it reads a line int o a buffer (e.g. with the <code>fgets</code> function) and then it will create a process corresponding to the content of the line. Reading <a href=\"http://stackoverflow.com/questions/5883462/linux-createprocess\">this SO topic</a> should give you some clues."}, {"owner": {"reputation": 799, "user_id": 3115917, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c6c7e0430e2f575128ceed4274d89963?s=128&d=identicon&r=PG", "display_name": "Slizzered", "link": "https://stackoverflow.com/users/3115917/slizzered"}, "edited": false, "score": 1, "creation_date": 1429698391, "post_id": 29794295, "comment_id": 47717452, "body": "A shell is a program that can read commands. Then, it executes these commands. <code>ls</code> is one of those commands. So basically, your task is to build a program that works like the a basic linux command line. This is written, compiled and run like a normal C-program. But when it runs, will ask the user for input and &quot;execute&quot; this input to do what the user tells it to do"}, {"owner": {"reputation": 23, "user_id": 4455877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbfec14bf9c678163c675bd72a85ab2f?s=128&d=identicon&r=PG&f=1", "display_name": "George M", "link": "https://stackoverflow.com/users/4455877/george-m"}, "edited": false, "score": 0, "creation_date": 1429699392, "post_id": 29794295, "comment_id": 47718203, "body": "Thanks, that was helpful! For the &quot;ls&quot; example, would I basically give the ls or any other command as an argument when running the program, then find this command with strtok() and exec() it?"}, {"owner": {"reputation": 799, "user_id": 3115917, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c6c7e0430e2f575128ceed4274d89963?s=128&d=identicon&r=PG", "display_name": "Slizzered", "link": "https://stackoverflow.com/users/3115917/slizzered"}, "edited": false, "score": 0, "creation_date": 1429700316, "post_id": 29794295, "comment_id": 47718927, "body": "Yes, in case of <code>ls</code> that will work. However, in a later lecture they might tell you to implement a mechanism similar to the pipe operator in <code>bash</code>, so you can forward the output of a command (e.g. <code>ls</code>) to another command. So the user could enter something like <code>ls | grep &quot;...&quot;</code> into your shell."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 4455877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbfec14bf9c678163c675bd72a85ab2f?s=128&d=identicon&r=PG&f=1", "display_name": "George M", "link": "https://stackoverflow.com/users/4455877/george-m"}, "edited": false, "score": 0, "creation_date": 1429702221, "post_id": 29795261, "comment_id": 47720373, "body": "Thank you very much, this has really helped me understand! One last question, the shell that I have to make is supposed to execute commands like ls, which is located in bin/ls iirc. So if it had to execute , say, five of these supposedly unknown to me commands(because the commands that will be run is up to the user), how will I pinpoint and execute them? Through if statements? I guess that this is impractical, and surely bad practice, as the commands are many for me to check each one."}], "tags": [], "owner": {"reputation": 2630, "user_id": 4065269, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/90c9cd69a6663c31758d6cd6043dfcc3?s=128&d=identicon&r=PG&f=1", "display_name": "sps", "link": "https://stackoverflow.com/users/4065269/sps"}, "is_accepted": true, "score": 0, "last_activity_date": 1429699952, "creation_date": 1429699952, "answer_id": 29795261, "question_id": 29794295, "link": "https://stackoverflow.com/questions/29794295/introduction-to-c-shells-in-linux/29795261#29795261", "title": "Introduction To C Shells in Linux", "body": "<p>Shell is a C program. So yes it is written,  compiled and run like a standard c program.  </p>\n\n<p>Also it is important to note that commands like <code>ls</code> , <code>wc</code> are also programs. So when we say \"run command ls\", we actually mean \" run the program whose name is ls\". </p>\n\n<p>Now this is the fun part:  There is a function called <code>exec( )</code> which helps a program run another program.  ( there is an entire family of exec functions)</p>\n\n<p>What shell does is this:</p>\n\n<ol>\n<li>Shell uses <code>fork ( )</code> syscall to create a child process. </li>\n<li>Once child process is created,  then, shell uses <code>exec ( )</code> function to make the child process run the desired command (desired program) ( ex: ls, wc).</li>\n<li>Shell uses <code>wait ( )</code> syscalls for the child ( and hence the command ) to complete.  </li>\n</ol>\n\n<p>What I described above is a very brief description.  And each of the above 3 steps may have one or more sub-steps.</p>\n\n<p>You can learn about fork( ) and exec ( ) and wait ( ) using the manual pages provided in linux.  </p>\n\n<p>Please type below command in your terminal to learn about these:</p>\n\n<pre><code>man 2 fork\nman 3 exec\nman 2 wait\n</code></pre>\n\n<p>These may clear some of your questions..</p>\n"}], "owner": {"reputation": 23, "user_id": 4455877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbfec14bf9c678163c675bd72a85ab2f?s=128&d=identicon&r=PG&f=1", "display_name": "George M", "link": "https://stackoverflow.com/users/4455877/george-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 29795261, "answer_count": 1, "score": -1, "last_activity_date": 1429699952, "creation_date": 1429697459, "last_edit_date": 1429697599, "question_id": 29794295, "link": "https://stackoverflow.com/questions/29794295/introduction-to-c-shells-in-linux", "title": "Introduction To C Shells in Linux", "body": "<p>I have some questions about the whole concept of Shells in the C language. For this semester we have to learn C but the teaching skills of the people in my uni aren't that great. So for the first assignment we have to create some shells. Don't get me wrong here, I love programming, I'm NOT asking you to complete my assignment, I just would like some help getting started because I'm kind of lost here. </p>\n\n<p>The first thing I have to do is create a Shell in C language (Different from linux shell scripts I think) and run it on a Ubuntu virtual machine. It's in the very early stages of C programming and we are being taught about the parent-child processes. I quote \"This shell, will accept simple single commands. Specifically, it </p>\n\n<p>a) will read the title of a program from the terminal, </p>\n\n<p>b) will create a new process to run the program that just got read and</p>\n\n<p>c) will wait for the process to end. </p>\n\n<p>Once the process is over it will read and execute the next command. For example, the shell will be able to run commands like \"ls\" \". This confuses me, as I don't understand what a shell is and what form it actually has, and reading about on the internet doesn't really help me. \n  So could you please show me how this should look like? I don't understand how it will run or how it will execute commands like ls. We have been instructed to use fork and strtok for the commands.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c", "multithreading"], "comments": [{"owner": {"reputation": 26962, "user_id": 62365, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ba579b23ef4515920a77366d520bf3c8?s=128&d=identicon&r=PG", "display_name": "Diego Sevilla", "link": "https://stackoverflow.com/users/62365/diego-sevilla"}, "edited": false, "score": 1, "creation_date": 1429697837, "post_id": 29794082, "comment_id": 47717041, "body": "You&#39;re refering in the latter statement to C++. One thing is that the C++ standard doesn&#39;t state it clearly. Another thing is OS handling threads and processes. When a process exists, all its threads (detached or not) are deleted."}], "answers": [{"comments": [{"owner": {"reputation": 1955, "user_id": 547695, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c9ce72cfcb6e6be10bd23d5324f1a74d?s=128&d=identicon&r=PG", "display_name": "Mihai Neacsu", "link": "https://stackoverflow.com/users/547695/mihai-neacsu"}, "edited": false, "score": 0, "creation_date": 1429697339, "post_id": 29794160, "comment_id": 47716657, "body": "Fair enough, Diego! It does work with sleep. But I thought the detached thread continues execution even after main ends, at least according to this: <a href=\"http://stackoverflow.com/questions/19744250/c11-what-happens-to-a-detached-thread-when-main-exits\" title=\"c11 what happens to a detached thread when main exits\">stackoverflow.com/questions/19744250/&hellip;</a>"}, {"owner": {"reputation": 26962, "user_id": 62365, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ba579b23ef4515920a77366d520bf3c8?s=128&d=identicon&r=PG", "display_name": "Diego Sevilla", "link": "https://stackoverflow.com/users/62365/diego-sevilla"}, "reply_to_user": {"reputation": 1955, "user_id": 547695, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c9ce72cfcb6e6be10bd23d5324f1a74d?s=128&d=identicon&r=PG", "display_name": "Mihai Neacsu", "link": "https://stackoverflow.com/users/547695/mihai-neacsu"}, "edited": false, "score": 1, "creation_date": 1429697665, "post_id": 29794160, "comment_id": 47716901, "body": "Look at this answer: <a href=\"http://stackoverflow.com/a/6043018/62365\">stackoverflow.com/a/6043018/62365</a> . When the &quot;process&quot; ends (via <code>exit()</code>), all the threads end, even detached ones. If you call <code>pthread_exit()</code> on the main thread, then the other thread will continue, but again, the program itself is still running. If you want to detach just a thread that continue execution, I think you&#39;ll better create a <code>fork()</code>."}], "tags": [], "owner": {"reputation": 26962, "user_id": 62365, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ba579b23ef4515920a77366d520bf3c8?s=128&d=identicon&r=PG", "display_name": "Diego Sevilla", "link": "https://stackoverflow.com/users/62365/diego-sevilla"}, "is_accepted": true, "score": 1, "last_activity_date": 1429697100, "creation_date": 1429697100, "answer_id": 29794160, "question_id": 29794082, "link": "https://stackoverflow.com/questions/29794082/second-detached-thread-doesnt-print-messages/29794160#29794160", "title": "Second detached thread doesn&#39;t print messages", "body": "<p>Maybe you're destryoing the detached thread too early? If you just create the thread and then destroy it, you don't give <code>printf</code> even time to execute. Try to add some sleep time after the thread creation in <code>main</code> and you'll see the output.</p>\n\n<p>When you add another <code>printf</code> in the main thread, you give the other thread time to execute before being destroyed.</p>\n"}, {"tags": [], "owner": {"reputation": 2118, "user_id": 3326555, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/hWWoI.jpg?s=128&g=1", "display_name": "Seema Kadavan", "link": "https://stackoverflow.com/users/3326555/seema-kadavan"}, "is_accepted": false, "score": 0, "last_activity_date": 1429697652, "last_edit_date": 1429697652, "creation_date": 1429697345, "answer_id": 29794254, "question_id": 29794082, "link": "https://stackoverflow.com/questions/29794082/second-detached-thread-doesnt-print-messages/29794254#29794254", "title": "Second detached thread doesn&#39;t print messages", "body": "<p>This might happen when your main thread exits before the newly created one gets time to print. Can be solved if the main thread waits till the other thread has completed the action. Use pthread_join for this.</p>\n\n<p>Try calling </p>\n\n<pre><code>pthread_join(client_thread, NULL);\n</code></pre>\n\n<p>before</p>\n\n<pre><code>pthread_attr_destroy(&amp;attr);\n</code></pre>\n\n<p>When you add another print statement in main thread, it actually keeps the main thread alive for more duration.</p>\n"}], "owner": {"reputation": 1955, "user_id": 547695, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c9ce72cfcb6e6be10bd23d5324f1a74d?s=128&d=identicon&r=PG", "display_name": "Mihai Neacsu", "link": "https://stackoverflow.com/users/547695/mihai-neacsu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 513, "favorite_count": 0, "accepted_answer_id": 29794160, "answer_count": 2, "score": 0, "last_activity_date": 1429697652, "creation_date": 1429696867, "last_edit_date": 1495542127, "question_id": 29794082, "link": "https://stackoverflow.com/questions/29794082/second-detached-thread-doesnt-print-messages", "title": "Second detached thread doesn&#39;t print messages", "body": "<p>Trying to set up a small client-server program. However, I've noticed output from the second thread doesn't get out printed.</p>\n\n<pre><code>void *ClientRoutine(void *args){\n    printf(\"Client thread created\\n\");\n\n    pthread_exit(NULL);\n}\n\nint main(int argc, char *argv[]){\n    pthread_t client_thread;\n    pthread_attr_t attr;\n\n     pthread_attr_init(&amp;attr);\n     pthread_attr_setdetachstate(&amp;attr, PTHREAD_CREATE_DETACHED);\n\n    if (pthread_create(&amp;client_thread, &amp;attr, &amp;ClientRoutine, NULL)) {\n        perror(\"Failed to create client thread\");\n        exit(-1);\n    }\n\n    pthread_attr_destroy(&amp;attr);\n\n    return 0;\n}\n</code></pre>\n\n<p>If I printf something in the main thread, the client's output finally shows up. Can anyone explain why this is happening?</p>\n\n<p><strong>LE</strong>: as some of you have suggested, this does happen because the main thread exits early. However, according to this: <a href=\"https://stackoverflow.com/questions/19744250/c11-what-happens-to-a-detached-thread-when-main-exits\">What happens to a detached thread when main() exits?</a>, the detached thread should continue execution even after main exits. Why does this happen?</p>\n"}, {"tags": ["c", "memory"], "answers": [{"comments": [{"owner": {"reputation": 9302, "user_id": 611116, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/uuQsM.jpg?s=128&g=1", "display_name": "OHL&#193;L&#193;", "link": "https://stackoverflow.com/users/611116/ohl%c3%81l%c3%81"}, "edited": false, "score": 0, "creation_date": 1429698741, "post_id": 29794043, "comment_id": 47717702, "body": "The solution is working, thanks. I am just wondering, the values is already a pointer, why is not updated?"}, {"owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "reply_to_user": {"reputation": 9302, "user_id": 611116, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/uuQsM.jpg?s=128&g=1", "display_name": "OHL&#193;L&#193;", "link": "https://stackoverflow.com/users/611116/ohl%c3%81l%c3%81"}, "edited": false, "score": 0, "creation_date": 1429699178, "post_id": 29794043, "comment_id": 47718039, "body": "The pointer is passed by value, inside <code>ReadData</code> you have the same &#39;value&#39; (address) than the pointer in <code>main</code> had, but it is a copy, so the pointer in <code>main</code> is not updated."}, {"owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "reply_to_user": {"reputation": 9302, "user_id": 611116, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/uuQsM.jpg?s=128&g=1", "display_name": "OHL&#193;L&#193;", "link": "https://stackoverflow.com/users/611116/ohl%c3%81l%c3%81"}, "edited": false, "score": 1, "creation_date": 1429699626, "post_id": 29794043, "comment_id": 47718401, "body": "Hmm, maybe this is clearer: If you would allocate memory in <code>main</code> and pass a pointer to <code>ReadData</code>, then you would see the changes made by <code>ReadData</code> to that memory in main. But here you&#39;re not changing the memory, you&#39;re changing the pointer itself (where it points to)."}], "tags": [], "owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "is_accepted": true, "score": 3, "last_activity_date": 1429696770, "creation_date": 1429696770, "answer_id": 29794043, "question_id": 29793863, "link": "https://stackoverflow.com/questions/29793863/how-can-be-retrieved-the-address-of-the-struct-array/29794043#29794043", "title": "How can be retrieved the address of the struct array?", "body": "<p>The problem is here:</p>\n\n<pre><code>int ReadData(char * filename, Flags* retv){\n    ....\n    retv = malloc(linenr * sizeof(Flags));    \n</code></pre>\n\n<p>The memory gets allocated correctly, but the pointer in <code>main</code> is not updated.</p>\n\n<pre><code>Flags * values;\n....\nlinenr = ReadData(\"test.txt\", values);\n</code></pre>\n\n<p>Change it to:</p>\n\n<pre><code>int ReadData(char * filename, Flags** retv){\n    ....\n    *retv = malloc(linenr * sizeof(Flags));    \n</code></pre>\n\n<p>and</p>\n\n<pre><code>Flags * values;\n....\nlinenr = ReadData(\"test.txt\", &amp;values);\n</code></pre>\n"}], "owner": {"reputation": 9302, "user_id": 611116, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/uuQsM.jpg?s=128&g=1", "display_name": "OHL&#193;L&#193;", "link": "https://stackoverflow.com/users/611116/ohl%c3%81l%c3%81"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 29794043, "answer_count": 1, "score": 1, "last_activity_date": 1429696770, "creation_date": 1429696406, "question_id": 29793863, "link": "https://stackoverflow.com/questions/29793863/how-can-be-retrieved-the-address-of-the-struct-array", "title": "How can be retrieved the address of the struct array?", "body": "<p>I am trying to read out a text file and store the data in a struct array, however I am getting a segmentation fault. This is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\ntypedef struct{\n    char name[24];\n    unsigned short value;\n}Flags;\n\nint ReadData(char * filename, Flags* retv){\n\n    //First getting the number of lines, this helps to allocate the memory for the struct    \n    char line[255];\n    int linenr = 0;    \n    char* token;    \n\n    FILE* myfile = fopen(filename, \"r\");\n    while(!feof(myfile))\n    {\n        char ch = fgetc(myfile);\n        if(ch == '\\n')\n        {\n            linenr++;\n        }\n    }\n    retv = malloc(linenr * sizeof(Flags));    \n    linenr = 0; \n\n    // Bring the file pointer to the beginning\n    rewind(myfile); \n\n    // Read data line by line\n    while (fgets(line, sizeof(line), myfile)) {                \n        token = strtok(line, \"=\"); \n        if (token != NULL){            \n            strcpy(retv[linenr].name, token);\n\n\n            // Getting the value\n            token = strtok(NULL, \"=\");\n            if (token != NULL)\n                retv[linenr].value = atoi(token);\n            else\n                retv[linenr].value = 0;\n\n            // Debugging\n#ifdef DEBUG           \n            printf(\"i: %d\\n\", linenr);\n            printf(\"Name: %s\\n\", retv[linenr].name);        \n            printf(\"Value: %d\\n\", retv[linenr].value);       \n#endif\n            linenr ++;         \n        }   \n    }\n\n    fclose(myfile);\n\n    return linenr;\n}\n\nint main(int argc, char const *argv[])\n{\n    Flags * values;\n    int linenr = 0;\n    int i;\n\n    // Read the data\n    linenr = ReadData(\"test.txt\", values);\n\n    // Some debugging\n    printf(\"Line number: %d\\n\", linenr);\n\n    for (i = 0; i &lt; linenr; i++)\n    {\n        printf(\"i: %d\\n\", i);\n        printf(\"Name: %s\\n\", values[i].name);\n        printf(\"Value: %d\\n\", values[i].value);\n    }    \n    free(values);\n    return 0;\n}\n</code></pre>\n\n<p>And the output is:</p>\n\n<pre><code>i: 0\nName: fa_flag \nValue: 0\ni: 1\nName: s2s_flag \nValue: 12\ni: 2\nName: torque_flag \nValue: 1\ni: 3\nName: torque_flag2 \nValue: 1\ni: 4\nName: torque_flag3 \nValue: 1\nLine number: 5\ni: 0\nName: (null)\nSegmentation fault (core dumped)\n</code></pre>\n\n<p>I couldn't figure it out where did I make the mistake.</p>\n"}]