[{"tags": ["c", "recursion"], "comments": [{"owner": {"reputation": 38430, "user_id": 429063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd38783123814dee889d28c991e56fb?s=128&d=identicon&r=PG", "display_name": "Chris Stratton", "link": "https://stackoverflow.com/users/429063/chris-stratton"}, "edited": false, "score": 2, "creation_date": 1571269552, "post_id": 58423013, "comment_id": 103188234, "body": "First you need to understand what a stack is.  Next you need to realize that your question is <i>unanswerable</i> without a number of details of the system and compiler."}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 1, "creation_date": 1571269684, "post_id": 58423013, "comment_id": 103188270, "body": "Try reading this excellent explanation of recursion: <a href=\"https://stackoverflow.com/a/37010/1212725\">stackoverflow.com/a/37010/1212725</a>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 1, "creation_date": 1571271258, "post_id": 58423013, "comment_id": 103188553, "body": "@bruceg This isn&#39;t tail-recursion."}, {"owner": {"reputation": 4900, "user_id": 1085937, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b66b1894c805a260947000d16658f845?s=128&d=identicon&r=PG", "display_name": "Jeeter", "link": "https://stackoverflow.com/users/1085937/jeeter"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1571272033, "post_id": 58423013, "comment_id": 103188711, "body": "@Barmar I agree, but the answer bruce linked shows recursion visually quite nicely"}], "answers": [{"tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 1, "last_activity_date": 1571271677, "creation_date": 1571271677, "answer_id": 58423239, "question_id": 58423013, "link": "https://stackoverflow.com/questions/58423013/c-recursion-memory/58423239#58423239", "title": "C Recursion &amp; Memory", "body": "<p>Each instance of <code>test</code> gets its own instance of <code>i</code>. When you call a function, the current execution environment of the current function is stored and the context is set up for the new function. When that new function returns, the context of the calling function is restored.</p>\n"}, {"tags": [], "owner": {"reputation": 106, "user_id": 7687952, "user_type": "registered", "profile_image": "https://graph.facebook.com/905945315/picture?type=large", "display_name": "Vinny", "link": "https://stackoverflow.com/users/7687952/vinny"}, "is_accepted": false, "score": 2, "last_activity_date": 1571279257, "creation_date": 1571279257, "answer_id": 58424025, "question_id": 58423013, "link": "https://stackoverflow.com/questions/58423013/c-recursion-memory/58424025#58424025", "title": "C Recursion &amp; Memory", "body": "<p>The 'stack' on modern CPU architectures is a region of memory (separate for each thread) that stores, among other things, the return address when a function call is made, function call parameters, non-static local variables (typically in that order, but not always). \nEvery time any function is called in C (and most modern languages), the return address (the address to jump to once the function about to be called finishes execution) is pushed onto the stack, and the stack pointer is incremented by the size of an address (assuming the stack grows up), then each function parameter is pushed onto the stack, and the stack pointer is again incremented by the size of each parameter. As each function local variable is allocated space, the stack pointer is incremented by the size of that variable as it is pushed onto the stack. When the function returns, the stack pointer is 'unwound' by the value of the size of each variable that was pushed onto the stack, as they are popped off of the stack. Next the function call parameters are popped from the stack, and again, the stack pointer is decremented by the size of each parameter. Finally, the function jumps to the return address that was originally pushed to the stack when the function was called, and it is popped, and the stack pointer is decremented by the size of an address. We are now ready to execute whatever code comes after the function call, and the stack pointer is right back where it was before the function call.</p>\n\n<p>In the case of recursive function calls, the return address, function call parameters, and function local variables are pushed onto the stack for each nested function call, but are not popped from the stack until the final recursive function call returns. They are popped off the stack in the opposite order they were pushed onto the stack (as stacks are by nature Last In First Out, LIFO, data structures).</p>\n\n<p>Assuming this is executing on a 32bit CPU, and an 'int' is 4 bytes, then the return address for each recursive function call, plus the one function parameter would get pushed onto the stack. At the greatest stack utilization, immediately before <code>test(0)</code> returns, we would have 6x recursive calls (for 5,4,3,2,1,0), and a 32 bit (4 byte) return address, plus a 4 byte parameter for each call, so 6 * (4 + 4) = 48 bytes.</p>\n"}], "owner": {"reputation": 21, "user_id": 12127314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cf78f6a7c339f0a557eda326330831e?s=128&d=identicon&r=PG&f=1", "display_name": "HelloWorld", "link": "https://stackoverflow.com/users/12127314/helloworld"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1571295073, "creation_date": 1571269405, "last_edit_date": 1571295073, "question_id": 58423013, "link": "https://stackoverflow.com/questions/58423013/c-recursion-memory", "title": "C Recursion &amp; Memory", "body": "<ol>\n<li><p>How does the computer saves each changed <code>'i'</code> value in the memory and prints them out?</p></li>\n<li><p>How many bytes are being used in this code? 24 bytes (i = 5, 4, 3, 2, 1, 0) or only 4 bytes?</p></li>\n</ol>\n\n<p>Following code prints: 1, 2, 3, 4, 5.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid test(int i)\n{\n    if (i == 0) return;\n    test(i - 1);\n    printf(\"%d\\n\", i);\n}\n\nint main(void)\n{\n    test(5);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", ".so", "gcovr"], "comments": [{"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 0, "creation_date": 1571302719, "post_id": 58422985, "comment_id": 103198352, "body": "Please don&#39;t use screenshots if you have text. Then I&#39;d like to ask you for a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. You don&#39;t want us to waste time writing all these files by hand, do you? Did you check if the generated gcda files include those for your library units, just in the &quot;wrong&quot; directory?"}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1571324719, "post_id": 58422985, "comment_id": 103211500, "body": "If no .gcda for the ProjectA files were created, that would mean that none of libprojecta&#39;s code was executed. This can happen e.g. with header-only libraries. If that&#39;s not the case, most likely you oversimplified the scenario and accidentally omitted some relevant details."}], "owner": {"reputation": 87, "user_id": 11649397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0301291ad644a2d9a8bfbb37e5e9b11a?s=128&d=identicon&r=PG&f=1", "display_name": "takanoha", "link": "https://stackoverflow.com/users/11649397/takanoha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571269111, "creation_date": 1571269111, "question_id": 58422985, "link": "https://stackoverflow.com/questions/58422985/gcovr-missing-gcda-files-after-executing-binary-that-is-linked-with-a-dynamical", "title": "gcovr missing .gcda files after executing binary that is linked with a dynamically linked shard object libraries (.so)", "body": "<p>I am trying to use <strong>gcovr</strong> on my linux project and have no luck getting .gcda files for the dynamic library after executing binary. </p>\n\n<p>I have a project called <strong>projectA</strong> which creates a library called <strong>libprojectA.so</strong> and the unit test project links <strong>libprojectA.so</strong>. The main goal here is that I want to see the code coverage of projectA functions invoked from the unit test binary <strong>UnitTestExecutable</strong>.</p>\n\n<p>I have such a directory structure:\n<a href=\"https://i.stack.imgur.com/SbHSR.png\" rel=\"nofollow noreferrer\">Project Structure</a></p>\n\n<p>This is the steps I followed to call <strong>gcovr</strong>.</p>\n\n<ol>\n<li><p>Build projectA with its Makefile</p>\n\n<ul>\n<li>Makefile has \"-fprofile-arcs -ftest-coverage -fPIC\"</li>\n<li>creates .o and .gcno inside .build directory</li>\n<li>creates dynamic library libprojectA.so</li>\n</ul></li>\n<li><p>Build unittest</p>\n\n<ul>\n<li>Makefile links libprojectA.so</li>\n<li>Makefile has \"-fprofile-arcs -ftest-coverage -fPIC\"</li>\n<li>creates .o and .gcno </li>\n<li>creates binary UnitTestExecutable</li>\n</ul></li>\n<li><p>Execute UnitTestExecutable</p>\n\n<ul>\n<li>creates .gcda files inside /unittest/*.gcda</li>\n<li>it doesn't create *.gcda inside /porjectA/ folder &lt;== this is the problem</li>\n</ul></li>\n<li><p>Call gcovr\ngcovr -v -r /projectA/ --html --html-details -o test-html-details.html --object-directory=/projectA/.build/</p>\n\n<p>Here it complains that it can't find *.gcda inside /projectA/.build/</p></li>\n</ol>\n\n<p>Could someone please help ?</p>\n\n<p>Thanks,</p>\n"}, {"tags": ["c", "arrays", "computer-science"], "comments": [{"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 3, "creation_date": 1571263581, "post_id": 58422252, "comment_id": 103186780, "body": "well for starters, <code>index1 + 1</code> doesn&#39;t update <code>index</code>. You need to change that to <code>index = index + 1</code> or <code>index++</code>. But please edit your question and provide an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">MCVE</a>. What&#39;s <code>playNum</code>, <code>marry</code>, <code>kids</code>, and <code>money</code>?"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1571263881, "post_id": 58422252, "comment_id": 103186871, "body": "<code>scanf</code> foible #7: <code>%c</code> is different.  You might just need to use <code>&quot; %c&quot;</code> (note the leading space)."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1571263889, "post_id": 58422252, "comment_id": 103186873, "body": "&quot;It compiles&quot; but not without warnings. MSVC says <i>&#39;+&#39;: operator has no effect; expected operator with side-effect</i>. It&#39;s still in the first loop, not having advanced the control varaible."}, {"owner": {"reputation": 83, "user_id": 12223447, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAj5GULbPNh3I-CVrPIaqAr-t1d6qvKgFTaLpuKjw=k-s128", "display_name": "Noah Howren", "link": "https://stackoverflow.com/users/12223447/noah-howren"}, "edited": false, "score": 0, "creation_date": 1571265025, "post_id": 58422252, "comment_id": 103187165, "body": "making the for loop have index1++ helped and so did &quot; %c&quot; with a space, thank you guys so much, this is my first post here and the help was amazing. You guys did in 20 minutes what I couldnt do for the past 3 days."}, {"owner": {"reputation": 45894, "user_id": 271415, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8648256cc53b261c5e1d266380a256fc?s=128&d=identicon&r=PG", "display_name": "jarmod", "link": "https://stackoverflow.com/users/271415/jarmod"}, "edited": false, "score": 0, "creation_date": 1571269038, "post_id": 58422252, "comment_id": 103188131, "body": "How to write a loop: <a href=\"https://www.tutorialspoint.com/cprogramming/c_for_loop.htm\" rel=\"nofollow noreferrer\">tutorialspoint.com/cprogramming/c_for_loop.htm</a>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1571280628, "post_id": 58422252, "comment_id": 103190348, "body": "OT: regarding: <code>scanf(&quot;%d&quot;, &amp;playNum);</code>  always check the returned value (not the parameter values)  (from any of the <code>scanf()</code> family of functions) to assure the operation was successful.  in this case, any returned value other than 1 indicates an error."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1571280711, "post_id": 58422252, "comment_id": 103190365, "body": "the posted code is missing the statement: <code>#include &lt;time.h&gt;</code> to expose the prototype for the <code>time()</code> function"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1571280824, "post_id": 58422252, "comment_id": 103190390, "body": "the <code>time()</code> function returns a <code>time_t</code> which is signed.  but <code>srand()</code> is expecting a <code>unsigned</code> value.  Suggest: <code>srand( (unsigned)time( NULL ) );</code>"}], "answers": [{"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1571280436, "creation_date": 1571280436, "answer_id": 58424160, "question_id": 58422252, "link": "https://stackoverflow.com/questions/58422252/variable-amount-of-input-on-the-same-line-in-c/58424160#58424160", "title": "Variable Amount of Input on the Same Line in C", "body": "<p>running the latest posted code through the <code>gcc</code> compiler results in:</p>\n\n<pre><code>gcc    -ggdb -Wall -Wextra -Wconversion -pedantic -std=gnu11  -c \"untitled.c\"  \nuntitled.c: In function \u2018main\u2019:\nuntitled.c:10:11: warning: implicit declaration of function \u2018time\u2019 [-Wimplicit-function-declaration]\n     srand(time(0));\n           ^~~~\nuntitled.c:10:11: warning: conversion to \u2018unsigned int\u2019 from \u2018int\u2019 may change the sign of the result [-Wsign-conversion]\nuntitled.c:21:47: warning: statement with no effect [-Wunused-value]\n     for (index1 = 0; index1 &lt; playNum; index1 + 1) {\n                                        ~~~~~~~^~~\nuntitled.c:26:47: warning: statement with no effect [-Wunused-value]\n     for (index2 = 0; index2 &lt; playNum; index2 + 1) {\n                                        ~~~~~~~^~~\nuntitled.c:31:47: warning: statement with no effect [-Wunused-value]\n     for (index3 = 0; index3 &lt; playNum; index3 + 1) {\n                                        ~~~~~~~^~~\nuntitled.c:5:36: warning: variable \u2018ranNum4\u2019 set but not used [-Wunused-but-set-variable]\n     int ranNum1, ranNum2, ranNum3, ranNum4, playNum, ranPlay;\n                                    ^~~~~~~\nuntitled.c:5:27: warning: variable \u2018ranNum3\u2019 set but not used [-Wunused-but-set-variable]\n     int ranNum1, ranNum2, ranNum3, ranNum4, playNum, ranPlay;\n                           ^~~~~~~\nuntitled.c:5:18: warning: variable \u2018ranNum2\u2019 set but not used [-Wunused-but-set-variable]\n     int ranNum1, ranNum2, ranNum3, ranNum4, playNum, ranPlay;\n                  ^~~~~~~\nuntitled.c:5:9: warning: variable \u2018ranNum1\u2019 set but not used [-Wunused-but-set-variable]\n     int ranNum1, ranNum2, ranNum3, ranNum4, playNum, ranPlay;\n         ^~~~~~~\nCompilation finished successfully.\n</code></pre>\n\n<p>Don't let that final message from the compiler: \"Compilation finished successfully.\"  fool you.  That is just the compiler saying that it implemented some kind (usually wrong) of work around for the problems in the code.</p>\n"}], "owner": {"reputation": 83, "user_id": 12223447, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAj5GULbPNh3I-CVrPIaqAr-t1d6qvKgFTaLpuKjw=k-s128", "display_name": "Noah Howren", "link": "https://stackoverflow.com/users/12223447/noah-howren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1571280436, "creation_date": 1571263378, "last_edit_date": 1571278759, "question_id": 58422252, "link": "https://stackoverflow.com/questions/58422252/variable-amount-of-input-on-the-same-line-in-c", "title": "Variable Amount of Input on the Same Line in C", "body": "<p>I have to scan the same line to get a variable amount of input (the user selects how many inputs they want to play with) for an array. I have to do it a character, an integer, and a floating-point. </p>\n\n<p>I have tried for loop and did different things with spaces with nested loops and statements inside of the foor loop but nothing is working. \n<em>edit</em> this isn't all of my code I added more of it so people have a better idea of what I'm trying to do.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main() {\n    int ranNum1, ranNum2, ranNum3, ranNum4, playNum, ranPlay;\n    int index1, index2, index3;\n\n    printf(\"How many choices do you want to play with? \");\n    scanf(\"%d\", &amp;playNum);\n    srand(time(0));\n    ranPlay = playNum + 1;\n    ranNum1 = rand() % ranPlay;\n    ranNum2 = rand() % ranPlay;\n    ranNum3 = rand() % ranPlay;\n    ranNum4 = rand() % 5;\n    int kids[playNum];\n    char marry [playNum];\n    float money [playNum];\n    printf(\"Who do you want to marry?\\n\");\n    printf(\"(enter %d first name initials) \", playNum);\n    for (index1 = 0; index1 &lt; playNum; index1 + 1) {\n        scanf(\"%c\", &amp;marry[index1]);\n    }\n    printf(\"How many kids do you want?\\n\");\n    printf(\"(enter %d whole numbers) \", playNum);\n    for (index2 = 0; index2 &lt; playNum; index2 + 1) {\n        scanf(\"%d\", &amp;kids[index2]);\n    }\n    printf(\"How much money do you want?\\n\");\n    printf(\"(enter %d decimal amounts) \", playNum);\n    for (index3 = 0; index3 &lt; playNum; index3 + 1) {\n        scanf(\"%f\", &amp;money[index3]);\n    }\n}\n</code></pre>\n\n<p>It compiles, it's just that when I run it it doesn't run right, when I input 3 characters and click enter, rather than printing the \"How many kids do you want?\" it just is blank.</p>\n"}, {"tags": ["c", "string", "windows"], "comments": [{"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 6, "creation_date": 1571260749, "post_id": 58421766, "comment_id": 103185856, "body": "Look up the definition of <code>LPCSTR</code> - I think you&#39;ll find that no conversion is required."}], "answers": [{"tags": [], "owner": {"reputation": 4660, "user_id": 12149471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bb9107b3d75e1de3585ba0f14e9d632?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas Wenzel", "link": "https://stackoverflow.com/users/12149471/andreas-wenzel"}, "is_accepted": false, "score": 2, "last_activity_date": 1571261520, "last_edit_date": 1571261520, "creation_date": 1571261213, "answer_id": 58421927, "question_id": 58421766, "link": "https://stackoverflow.com/questions/58421766/how-can-i-convert-c-string-to-lpcstr-on-windows/58421927#58421927", "title": "How can I convert C-String to LPCSTR on Windows", "body": "<p>According to <a href=\"https://docs.microsoft.com/en-us/windows/win32/winprog/windows-data-types\" rel=\"nofollow noreferrer\">this Microsoft documentation page</a>, LPCSTR is defined in WinNT.h as follows:</p>\n\n<pre><code>typedef __nullterminated CONST CHAR *LPCSTR;\n</code></pre>\n\n<p>This evaluates to <code>const char *</code>.</p>\n\n<p>So, you are essentially asking how to convert <code>const char*</code> to itself. In other words, the answer to your question is that no conversion is required.</p>\n\n<p>Regarding your question, there is no difference between C and C++. However, C++ offers additional ways of handling strings.</p>\n"}, {"tags": [], "owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "is_accepted": false, "score": 2, "last_activity_date": 1571262414, "creation_date": 1571262414, "answer_id": 58422095, "question_id": 58421766, "link": "https://stackoverflow.com/questions/58421766/how-can-i-convert-c-string-to-lpcstr-on-windows/58422095#58422095", "title": "How can I convert C-String to LPCSTR on Windows", "body": "<p>It is <code>GetFileAttributesA</code> (note the <code>A</code>) which uses <code>LPCSTR</code>. The wide character version is <code>GetFileAttributesW</code>, and its argument is <code>LPCWSTR</code>.   The generic name <code>GetFileAttributes</code> is a shim which will switch between these two functions at compile time; it is defined in terms of a <code>TCHAR</code> <code>typedef</code> (<code>const</code> strings of which are <code>LPCTSTR</code>). <code>TCHAR</code> switches between <code>CHAR</code> or <code>WCHAR</code> based on whether you build the program for Unicode support.</p>\n\n<p>If you have a <code>const char *</code> input intended to be passed to <code>GetFileAttributes</code> being compiled for Unicode, or to be passed to <code>GetFileAttributesW</code>, then a conversion is needed from byte string to wide string.</p>\n\n<p>It's best to avoid mixing wide and narrow strings in the entire program, if at all possible, to avoid the cumbersome conversions.</p>\n"}], "owner": {"reputation": 11251, "user_id": 3284878, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/d324c610856d2626e9b719eb4135b3cb?s=128&d=identicon&r=PG&f=1", "display_name": "Aviv Cohn", "link": "https://stackoverflow.com/users/3284878/aviv-cohn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1571262414, "creation_date": 1571260258, "last_edit_date": 1571261255, "question_id": 58421766, "link": "https://stackoverflow.com/questions/58421766/how-can-i-convert-c-string-to-lpcstr-on-windows", "title": "How can I convert C-String to LPCSTR on Windows", "body": "<p>In order to find if a file exists, I want to use the <code>GetFileAttributes</code> WinAPI function.</p>\n\n<p>The function accepts a <code>LPCSTR</code> argument. How can I convert my classic <code>const char*</code> string to this type?</p>\n\n<p>Please note, I'm using C, not C++. Is this the right way to go in C too?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 1, "creation_date": 1571260128, "post_id": 58421671, "comment_id": 103185635, "body": "You increment <code>i</code> by only 1 each iteration.  But if you print an N digit number, you need to increment by N."}], "answers": [{"comments": [{"owner": {"reputation": 1149, "user_id": 2472827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5rYY.jpg?s=128&g=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/2472827/neil"}, "edited": false, "score": 0, "creation_date": 1571266388, "post_id": 58421782, "comment_id": 103187519, "body": "I expect this to be faster then using <code>strcat</code> because <code>strcat</code> has to go through all the string each time."}], "tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": false, "score": 2, "last_activity_date": 1571260356, "creation_date": 1571260356, "answer_id": 58421782, "question_id": 58421671, "link": "https://stackoverflow.com/questions/58421671/digit-gets-cut-off-when-using-for-loop-to-save-number-in-character-array/58421782#58421782", "title": "Digit gets cut off when using for loop to save number in character array", "body": "<p><code>sprintf</code> returns the number of characters \"output\". Add the return value to <code>i</code> <em>instead</em> of just incrementing it by 1 in <code>i++</code>:</p>\n\n<pre><code>i += sprintf(&amp;res[i], \"%d\", ...);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "is_accepted": true, "score": 1, "last_activity_date": 1571260453, "creation_date": 1571260453, "answer_id": 58421802, "question_id": 58421671, "link": "https://stackoverflow.com/questions/58421671/digit-gets-cut-off-when-using-for-loop-to-save-number-in-character-array/58421802#58421802", "title": "Digit gets cut off when using for loop to save number in character array", "body": "<p>As pointed out in the comment, you are only incrementing the location of each number by 1, even though you may be printing a number with more than 1 digit. Try printing to a temporary string, then appending that to your 'answer:</p>\n\n<pre><code>char* pascal(int* n) {\n    int r = *n;\n    int t = 0;\n\n    char res[MAX] = \"\";\n\n    for (t = *n; t &gt;= 0; t--) {\n        char append[20]; // Assuming no more than 20 digits per number!\n        if (t == *n || t == 0) {\n            sprintf(append, \"%d\", 1);\n        }\n        else {\n            sprintf(append, \"%d\", fact(r) / (fact(t) * fact((r - t))));\n        }\n        strcat(res, append);\n    }\n\n    char* output = res;\n\n    return output;\n}\n</code></pre>\n\n<p>But, actually, the excellent answer given by <strong>Antii</strong> is perhaps simpler.</p>\n"}], "owner": {"reputation": 3, "user_id": 12223084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f3b4b8c82e6c5b18d095375566912c9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/12223084/adam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 58421802, "answer_count": 2, "score": 0, "last_activity_date": 1571262636, "creation_date": 1571259764, "last_edit_date": 1571262636, "question_id": 58421671, "link": "https://stackoverflow.com/questions/58421671/digit-gets-cut-off-when-using-for-loop-to-save-number-in-character-array", "title": "Digit gets cut off when using for loop to save number in character array", "body": "<p>I'm trying to make a function that calculates the rows of pascals triangle and to create a string that saves it. everything works fine until the columns include 2 digit numbers. Then, the second digit gets cut off. </p>\n\n<p>However, when I use the sprintf function seperately, without a for loop or a if else statement, the number gets saved correctly. </p>\n\n<pre><code>char* pascal( int* n ) {\n\n       int r = *n;\n       int t = 0;\n       int i;\n\n       char res[MAX];\n\n       for ( t = *n, i = 0; t &gt;= 0; t--, i++ ) {\n               if ( t == *n || t == 0 ) {\n                       sprintf(&amp;res[i], \"%d\", 1);\n               } else {\n                       sprintf(&amp;res[i], \"%d\", fact(r)/(fact(t) * fact((r - t)));\n               }\n         }\n\n         char* output = res;\n\n         return output;\n\n}\n</code></pre>\n\n<p>When I input 5 to the function I get:\n151151</p>\n\n<p>what I expect:\n15101051</p>\n\n<p>It's the same with every pascal row, that has colums that include numbers with 2 or more digits.</p>\n"}, {"tags": ["c", "inline"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 9, "creation_date": 1571259828, "post_id": 58421662, "comment_id": 103185547, "body": "Enable optimization and it probably will inline it."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1571260147, "post_id": 58421662, "comment_id": 103185644, "body": "..Probably even without marking it <code>inline</code>."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1571261865, "post_id": 58421662, "comment_id": 103186226, "body": "OT: regarding: <code>int value = strtol(argv[1], NULL, 0);</code>  10 Do not access beyond <code>argv[0]</code> with out first checking <code>argc</code> to assure the user actually entered the expected number of command line parameters  2) should check the error indication from <code>strtol()</code> to assure some number was actually input  3) <code>strtol()</code> returns a <code>long int</code>, not an <code>int</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1571262075, "post_id": 58421662, "comment_id": 103186304, "body": "the posted code does not compile!  The main reason is it is missing the statement: <code>#include &lt;string.h</code> to expose the prototype for the function: <code>strtol()</code>"}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1571272342, "post_id": 58421662, "comment_id": 103188768, "body": "<a href=\"https://gcc.gnu.org/onlinedocs/gcc/Inline.html\" rel=\"nofollow noreferrer\">gcc.gnu.org/onlinedocs/gcc/Inline.html</a>"}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1571272437, "post_id": 58421662, "comment_id": 103188783, "body": "Define function as <code>static inline int __attribute__((always_inline))func1(int a) {     return a*2; }</code> without any optimize inline func1 and objdump shows nothing"}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1571273361, "post_id": 58421662, "comment_id": 103188977, "body": "Enable optimization <code>gcc -Wall -o main main.c -O3</code> make func1 inline."}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1571273425, "post_id": 58421662, "comment_id": 103188988, "body": "Related: <a href=\"https://stackoverflow.com/questions/3800339/why-didnt-o3-gcc-optimization-inline-this-function\" title=\"why didnt o3 gcc optimization inline this function\">stackoverflow.com/questions/3800339/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 304, "user_id": 10124827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22adbe933ba29413ef64aac370adf743?s=128&d=identicon&r=PG&f=1", "display_name": "G&#225;bor", "link": "https://stackoverflow.com/users/10124827/g%c3%a1bor"}, "edited": false, "score": 0, "creation_date": 1571260852, "post_id": 58421727, "comment_id": 103185891, "body": "yes, I understand it is a suggestion only but what will be inlined if this simple function is not? And what is the reason for that this function is not got inlined?"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 304, "user_id": 10124827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22adbe933ba29413ef64aac370adf743?s=128&d=identicon&r=PG&f=1", "display_name": "G&#225;bor", "link": "https://stackoverflow.com/users/10124827/g%c3%a1bor"}, "edited": false, "score": 0, "creation_date": 1571261148, "post_id": 58421727, "comment_id": 103186009, "body": "@G&#225;bor The function didn&#39;t get inlined because the compiler you used, with the options you passed it, didn&#39;t inline it.  That&#39;s really the only &quot;why&quot; there is.  If you want a function inlined, you have to take care to use a compiler that inlines functions and use it with the arguments necessary to make the inlining you want actually happen.  Barmer got right to the point with the first comment."}], "tags": [], "owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": false, "score": 2, "last_activity_date": 1571260119, "creation_date": 1571260119, "answer_id": 58421727, "question_id": 58421662, "link": "https://stackoverflow.com/questions/58421662/why-the-following-function-is-not-getting-inlined/58421727#58421727", "title": "Why the following function is not getting inlined?", "body": "<p><code>inline</code> is literally a mere \"suggestion\".</p>\n\n<p>Per <a href=\"https://port70.net/~nsz/c/c11/n1570.html#6.7.4p6\" rel=\"nofollow noreferrer\"><strong>6.7.4 Function specifiers</strong>, paragraph 6 of the C standard</a>:</p>\n\n<blockquote>\n  <p>A function declared with an inline function specifier is an inline function. Making a function an inline function suggests that calls to the function be as fast as possible. The extent to which such suggestions are effective is implementation-defined.</p>\n</blockquote>\n\n<p>As <code>inline</code> is just a suggestion, a function with the <code>inline</code> specifier may or may not be inlined as the implementation determines.</p>\n"}, {"comments": [{"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 1, "creation_date": 1571271984, "post_id": 58423090, "comment_id": 103188702, "body": "see this about always inline <a href=\"https://stackoverflow.com/a/48212527/7508077\">stackoverflow.com/a/48212527/7508077</a>"}], "tags": [], "owner": {"reputation": 1149, "user_id": 2472827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5rYY.jpg?s=128&g=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/2472827/neil"}, "is_accepted": false, "score": 2, "last_activity_date": 1571270253, "creation_date": 1571270253, "answer_id": 58423090, "question_id": 58421662, "link": "https://stackoverflow.com/questions/58421662/why-the-following-function-is-not-getting-inlined/58423090#58423090", "title": "Why the following function is not getting inlined?", "body": "<p>I believe it is not inlined because one is not doing optimisation, (for debugging, I assume.) From <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Inline.html\" rel=\"nofollow noreferrer\">the GCC online docs</a>,</p>\n\n<blockquote>\n  <p>GCC does not inline any functions when not optimizing unless you specify the \u2018always_inline\u2019 attribute for the function</p>\n</blockquote>\n"}], "owner": {"reputation": 304, "user_id": 10124827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22adbe933ba29413ef64aac370adf743?s=128&d=identicon&r=PG&f=1", "display_name": "G&#225;bor", "link": "https://stackoverflow.com/users/10124827/g%c3%a1bor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1571274114, "creation_date": 1571259712, "last_edit_date": 1571274114, "question_id": 58421662, "link": "https://stackoverflow.com/questions/58421662/why-the-following-function-is-not-getting-inlined", "title": "Why the following function is not getting inlined?", "body": "<p>Can you please tell me why the following function func1 is not getting inlined?</p>\n\n<p><strong><em>Code</em></strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstatic inline int func1(int a) {\n    return a*2;\n}\n\nint main(int argc, char **argv) {\n\n    int value = strtol(argv[1], NULL, 0);\n\n    value = func1(value);\n\n    printf(\"value: %d\\n\", value);\n\n    return 0;\n}\n</code></pre>\n\n<p><strong><em>Run</em></strong></p>\n\n<pre><code>$ gcc -Wall -o main main.c\n$ objdump -D main | grep func1\n0000000000000700 &lt;func1&gt;:\n 742:   e8 b9 ff ff ff          callq  700 &lt;func1&gt;\n</code></pre>\n"}, {"tags": ["c", "scanf"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1571260982, "post_id": 58421661, "comment_id": 103185950, "body": "The loop <code>while (fscanf(fp, &quot;%d&quot;, ... ) == 1)</code> will continue to scan integers until the next string stops it. It will scan all four of those integers you show in the input file. So the following <code>%d</code> format scans won&#39;t read anything, and return <code>0</code>. Note that newlines and other white space characters are of <i>no consequence</i> to <code>scanf</code> when using <code>%d</code> and <code>%s</code> format specifiers."}, {"owner": {"reputation": 1, "user_id": 12197895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61133e822cd79af5842682f63795e028?s=128&d=identicon&r=PG&f=1", "display_name": "Bjarnen", "link": "https://stackoverflow.com/users/12197895/bjarnen"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1571261288, "post_id": 58421661, "comment_id": 103186068, "body": "Okay, yes that seems logical. But is there any way to make the fscanf stop at that new line, or modify the .txt file to read in correctly? I&#39;ve looked for hours for a solution to suing the fscanf this way."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1571261698, "post_id": 58421661, "comment_id": 103186186, "body": "Read each line with <code>fgets</code> then apply <code>sscanf</code> to that string. But if the format of the file is fixed, why do you have <code>while</code> loops for <code>%d</code>? One thing you can do, is to read the next character also, but it is an unreliable way (there might be a trailing space on a line). The sure way is to place the <i>number of elements</i> at the start of each batch."}, {"owner": {"reputation": 1, "user_id": 12197895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61133e822cd79af5842682f63795e028?s=128&d=identicon&r=PG&f=1", "display_name": "Bjarnen", "link": "https://stackoverflow.com/users/12197895/bjarnen"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1571262221, "post_id": 58421661, "comment_id": 103186353, "body": "In order to read the numbers i would have to change the array for those to <code>char</code>, which is not really what i would want. The reason for the <code>While</code> loops is to increase the number of an int in order to keep count on how many numbers i have read from text file to array. How would i do if i was to read next character to the <code>fscanf</code> ?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1571262412, "post_id": 58421661, "comment_id": 103186420, "body": "OT: regarding: <code>scanf(&quot; %s&quot;, lasFilnamn);</code> (and similar statements)  1) when calling any of the <code>scanf()</code> family of functions, always check the returned value (not the parameter values) to assure the operation was successful.  In the current cases, any returned value other than 1 indicates an error occurred.  2) when using the <code>%s</code> and/or <code>%[...]</code> input format specifiers, always include a MAX CHARACTERS modifier that is 1 less than the length of the input buffer because those specifiers always append a NUL byte to the input. This also avoid a buffer overflow and Undefined behavior"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1571262663, "post_id": 58421661, "comment_id": 103186489, "body": "OT: regarding: <code>fp = fopen(lasFilnamn, &quot;r&quot;);     if(fp!=NULL)</code>  the second statement should be checking for an error condition and if an error has occurred, then <code>{ perror( &quot;fopen failed&quot; );  exit( EXIT_FAILURE ); }</code> so both your error message and the text reason the system thinks the error occurred are output to <code>stderr</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1571262862, "post_id": 58421661, "comment_id": 103186560, "body": "OT:  for ease of readability and understanding: 1) use meaningful variable names.  Names like: <code>int f = 0;     int s = 0;     int nl = 0;</code> are meaningless, even in the current context"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1571262954, "post_id": 58421661, "comment_id": 103186588, "body": "when posting a question about a run time problem, as this question is doing, post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> so we can reproduce the problem and help you debug it."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1571263096, "post_id": 58421661, "comment_id": 103186634, "body": "the posted snippets of code contains no functions, is missing the needed header files, etc.  Post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> so we can help you"}, {"owner": {"reputation": 1, "user_id": 12197895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61133e822cd79af5842682f63795e028?s=128&d=identicon&r=PG&f=1", "display_name": "Bjarnen", "link": "https://stackoverflow.com/users/12197895/bjarnen"}, "edited": false, "score": 0, "creation_date": 1571263424, "post_id": 58421661, "comment_id": 103186744, "body": "I posted the full code which should be able to be executable for further examination:)"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 12197895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61133e822cd79af5842682f63795e028?s=128&d=identicon&r=PG&f=1", "display_name": "Bjarnen", "link": "https://stackoverflow.com/users/12197895/bjarnen"}, "edited": false, "score": 0, "creation_date": 1571295966, "post_id": 58424190, "comment_id": 103194837, "body": "That seems to work, but what if my .txt file would have varying number of ints on each row, i wouldn&#39;t constantly looke for two int on each row. How do i looka for a variable amount of ints on each row and save them?"}, {"owner": {"reputation": 106, "user_id": 7687952, "user_type": "registered", "profile_image": "https://graph.facebook.com/905945315/picture?type=large", "display_name": "Vinny", "link": "https://stackoverflow.com/users/7687952/vinny"}, "reply_to_user": {"reputation": 1, "user_id": 12197895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61133e822cd79af5842682f63795e028?s=128&d=identicon&r=PG&f=1", "display_name": "Bjarnen", "link": "https://stackoverflow.com/users/12197895/bjarnen"}, "edited": false, "score": 0, "creation_date": 1571373976, "post_id": 58424190, "comment_id": 103226941, "body": "You actually in that case would use a while loop like you originally had, with one specific addition:  <code>while ( fscanf ( fp, &quot; %d [^\\n]&quot;, &amp;lasLakemedelRegister[i].forpackningar[lasLakemedelRegister[&zwnj;&#8203;i].antalForpackninga&zwnj;&#8203;r]) == 1)  {     printf(&quot;aa &quot;);     lasLakemedelRegister[i].antalForpackningar++;  }  if ( fscanf ( fp, &quot; %d&quot;,  &amp;lasLakemedelRegister[i].forpackningar[lasLakemedelRegister[&zwnj;&#8203;i].antalForpackninga&zwnj;&#8203;r])  {     printf(&quot;aa &quot;);     lasLakemedelRegister[i].antalForpackningar++;  }</code>"}], "tags": [], "owner": {"reputation": 106, "user_id": 7687952, "user_type": "registered", "profile_image": "https://graph.facebook.com/905945315/picture?type=large", "display_name": "Vinny", "link": "https://stackoverflow.com/users/7687952/vinny"}, "is_accepted": false, "score": 0, "last_activity_date": 1571280679, "creation_date": 1571280679, "answer_id": 58424190, "question_id": 58421661, "link": "https://stackoverflow.com/questions/58421661/reading-text-file-with-fscanf-not-working-as-intended/58424190#58424190", "title": "Reading text file with fscanf not working as intended", "body": "<p>According to the C standard, fscanf, on success, will return the number of items read from the input stream (which can be less than the number requested if a read error occurs, or end of file is reached). If a read error occurs, or end of file is reached before any data is read, EOF is returned. </p>\n\n<p>So, as others have said, the following while loop will not stop at a newline character. It would only stop when the input stream encounters a non integer character or EOF is reached.</p>\n\n<pre><code>while (fscanf(fp, \"%d\", &amp;lasLakemedelRegister[i].forpackningar[lasLakemedelRegister[i].antalForpackningar]) == 1)\n{\n   printf(\"aa \");\n   lasLakemedelRegister[i].antalForpackningar++;                \n}\n</code></pre>\n\n<p>The proper way to read two numbers from an input stream using fscanf is as follows:</p>\n\n<pre><code>numIntsRead = fscanf(fp, \" %d %d\", &amp;intVar1, &amp;intVar2);\n// Use numIntsRead to ensure both numbers were actually read\n</code></pre>\n\n<p>You would want to drop the two while loops, and simply call the code above twice for each set of 2x ints to be read.</p>\n\n<p>P.S. Note the leading space in the format specifier. As per the standard, space in the format specifier can match <em>zero</em> or more white space characters in the input. This will ensure correct parsing if there is leading whitespace in the file.</p>\n"}], "owner": {"reputation": 1, "user_id": 12197895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61133e822cd79af5842682f63795e028?s=128&d=identicon&r=PG&f=1", "display_name": "Bjarnen", "link": "https://stackoverflow.com/users/12197895/bjarnen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1571280679, "creation_date": 1571259712, "last_edit_date": 1571263389, "question_id": 58421661, "link": "https://stackoverflow.com/questions/58421661/reading-text-file-with-fscanf-not-working-as-intended", "title": "Reading text file with fscanf not working as intended", "body": "<p>I ahve to read a file with numbers and as well as som text, but when i try to read each line of the file it skips the \\n after the first line of numbers and reads two lines as one instead of two seperate ones.</p>\n\n<p>I want to strictly use the fgets and the fscanf for this.</p>\n\n<pre><code>struct lakemedel\n{\n    char namn[MAXORD];\n    int forpackningar[PAKETSTORLEKAR];\n    int antalForpackningar;\n    int saldo[PAKETSTORLEKAR];\n    int antalSaldo;\n};\ntypedef struct lakemedel Lakemedel;\n\nLakemedel lakemedelRegister[MAXANTAL];\n\n    printf(\"Skriv in fil du vill anvanda: \");\n    scanf(\" %s\", lasFilnamn);\n    int i = 0;\n    int f = 0;\n    int s = 0;\n    int nl = 0;\n    FILE *fp;\n    fp = fopen(lasFilnamn, \"r\");\n    if(fp!=NULL)\n    {        \n        while(fscanf(fp,\"%s\", lasLakemedelRegister[i].namn)==1)\n        {\n            lasLakemedelRegister[i].antalForpackningar = 0;\n            lasLakemedelRegister[i].antalSaldo = 0;\n            printf(\"fff\");\n            while (fscanf(fp, \"%d\", &amp;lasLakemedelRegister[i].forpackningar[lasLakemedelRegister[i].antalForpackningar]) == 1)\n            {\n                printf(\"aaa\");\n                lasLakemedelRegister[i].antalForpackningar++;                \n            }\n            while (fscanf(fp, \"%d\", &amp;lasLakemedelRegister[i].saldo[lasLakemedelRegister[i].antalSaldo])==1)\n            {\n                lasLakemedelRegister[i].antalSaldo++;\n            }\n            /*for (lasLakemedelRegister[i].antalForpackningar = 0; lasLakemedelRegister[i].antalForpackningar == 1; lasLakemedelRegister[i].antalForpackningar++)\n            {            \n                fscanf(fp, \"%d\", &amp;lasLakemedelRegister[i].forpackningar[lasLakemedelRegister[i].antalForpackningar]);\n            }\n            for (lasLakemedelRegister[i].antalSaldo = 0; lasLakemedelRegister[i].antalSaldo &lt; PAKETSTORLEKAR; lasLakemedelRegister[i].antalSaldo++)\n            {            \n                fscanf(fp, \"%d\", &amp;lasLakemedelRegister[i].saldo[lasLakemedelRegister[i].antalSaldo]);\n            }*/\n            (*pAntalLakemedel)++;\n            i++;\n        }\n</code></pre>\n\n<p>Here's and exmaple of a file i want to read:</p>\n\n<pre><code>Hello\n25 40\n2 5\nHi\n85 41\n2 3\n</code></pre>\n\n<p>I expect each line if numbers to be read into an array, but the reason why it isn't done os because it jumps the newline character somehow and read until the next text line.</p>\n\n<p>Here's the full code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#define MAXANTAL 10000\n#define MAXORD 20\n#define PAKETSTORLEKAR 10\n#define FILNAMNSTORLEK 20\n\nstruct lakemedel\n{\n    char namn[MAXORD];\n    char forpackningar[PAKETSTORLEKAR];\n    int antalForpackningar;\n    char saldo[PAKETSTORLEKAR];\n    int antalSaldo;\n};\ntypedef struct lakemedel Lakemedel;\n\nvoid lasFil(Lakemedel lasLakemedelRegister[], int *pAntalLakemedel, char lasFilnamn[]);\nvoid skrivUt(Lakemedel skrivLakemedelRegister[], int pAntalLakemedel);\n\nint main()\n{\n    Lakemedel lakemedelRegister[MAXANTAL];\n    char filnamn[FILNAMNSTORLEK];\n    int antalLakemedel = 0;\n    int val;\n    lasFil(lakemedelRegister, &amp;antalLakemedel, filnamn);\n    //printf(\"%d\", lakemedelRegister[0].forpackningar[0]);\n    while (1 &amp;&amp; val != 8)\n    {   \n        printf(\"\\n\\n2-Skriva\\n8-Avsluta\\n\\n\");\n        scanf(\" %d\", &amp;val);\n        switch (val)\n        {\n        case 1: //Registrera\n            break;     \n        case 2: //Skriva ut\n            skrivUt(lakemedelRegister, antalLakemedel);\n            break;\n        case 3: //S\u00f6ka\n            break;\n        case 4: //L\u00e4gga till storlek\n            printf(\"hello\");\n            break;\n        case 5: //\u00c4ndra saldo f\u00f6r l\u00e4kemedel\n            printf(\"hello\");\n            break;\n        case 6: //Avregistrera l\u00e4kemedel\n            break;\n        case 7: //Varningar\n            printf(\"hello\");\n            break;\n        case 8: //Avslutar programmet\n            printf(\"Avslutar Programmet...\");\n            break;\n        default:\n            break;\n        } \n    }\n\n    return 0;\n}\n\nvoid lasFil(Lakemedel lasLakemedelRegister[], int *pAntalLakemedel, char lasFilnamn[])\n{\n    printf(\"Skriv in fil du vill anvanda: \");\n    scanf(\" %s\", lasFilnamn);\n    int i = 0;\n    FILE *fp;\n    fp = fopen(lasFilnamn, \"r\");\n    if(fp!=NULL)\n    {   \n        while(fscanf(fp,\"%s\", lasLakemedelRegister[i].namn)==1)\n        {\n            lasLakemedelRegister[i].antalForpackningar = 0;\n            lasLakemedelRegister[i].antalSaldo = 0;\n            printf(\"ff\");\n            while (fscanf(fp, \"%d\", &amp;lasLakemedelRegister[i].forpackningar[lasLakemedelRegister[i].antalForpackningar]) == 1)\n            {\n                printf(\"aa \");\n                lasLakemedelRegister[i].antalForpackningar++;                \n            }\n            while (fscanf(fp, \"%d\", &amp;lasLakemedelRegister[i].saldo[lasLakemedelRegister[i].antalSaldo])==1)\n            {\n                printf(\"gg \");\n                lasLakemedelRegister[i].antalSaldo++;\n            }\n            /*for (lasLakemedelRegister[i].antalForpackningar = 0; lasLakemedelRegister[i].antalForpackningar == 1; lasLakemedelRegister[i].antalForpackningar++)\n            {            \n                fscanf(fp, \"%d\", &amp;lasLakemedelRegister[i].forpackningar[lasLakemedelRegister[i].antalForpackningar]);\n            }\n            for (lasLakemedelRegister[i].antalSaldo = 0; lasLakemedelRegister[i].antalSaldo &lt; PAKETSTORLEKAR; lasLakemedelRegister[i].antalSaldo++)\n            {            \n                fscanf(fp, \"%d\", &amp;lasLakemedelRegister[i].saldo[lasLakemedelRegister[i].antalSaldo]);\n            }*/\n            (*pAntalLakemedel)++;\n            i++;\n        }\n    fclose(fp);\n    }\n        printf(\"\\n\\n%d\\n\", *pAntalLakemedel);\n        printf(\"%s\\n\",lasLakemedelRegister[0].namn);\n        printf(\"%d\\n\",lasLakemedelRegister[0].antalForpackningar);\n        printf(\"%d\\n\", lasLakemedelRegister[0].antalSaldo);\n}\n</code></pre>\n"}, {"tags": ["python", "c", "python-3.x", "scipy", "numba"], "comments": [{"owner": {"reputation": 451, "user_id": 4276112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/361b5255525c16f7049a5644295c7d2c?s=128&d=identicon&r=PG&f=1", "display_name": "mosegui", "link": "https://stackoverflow.com/users/4276112/mosegui"}, "reply_to_user": {"reputation": 18763, "user_id": 472495, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4rtxd.png?s=128&g=1", "display_name": "halfer", "link": "https://stackoverflow.com/users/472495/halfer"}, "edited": false, "score": 0, "creation_date": 1571823219, "post_id": 58421549, "comment_id": 103365176, "body": "Yes. In the meantime I got to understand that there is no such concept in C as a shaped array, so I would need to pass the array value-by-value, by occupying contiguous memory addresses just like the regular way the other scalar arguments are passed (packed in the form of the <code>xx</code> array) .  It would be nice if someone got some advice on how to implement this from the design perspective. Sticking to <code>numba</code> stays my preferred option. Thanks!"}, {"owner": {"reputation": 5208, "user_id": 4045774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c23c0c730b6a9cb71d1ce17838f2beb7?s=128&d=identicon&r=PG&f=1", "display_name": "max9111", "link": "https://stackoverflow.com/users/4045774/max9111"}, "edited": false, "score": 0, "creation_date": 1571992221, "post_id": 58421549, "comment_id": 103429291, "body": "Maybe it does make sense to ask this question (passing arguments to a compiled integrate func) in a more general way (eg. using C) at the scipy github site. If the problem is solved for plain C, it should be straight forward to do this using Numba."}, {"owner": {"reputation": 5208, "user_id": 4045774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c23c0c730b6a9cb71d1ce17838f2beb7?s=128&d=identicon&r=PG&f=1", "display_name": "max9111", "link": "https://stackoverflow.com/users/4045774/max9111"}, "edited": false, "score": 0, "creation_date": 1572168468, "post_id": 58421549, "comment_id": 103471305, "body": "Are your array sizes changing on every iteration? If not, you don&#39;t have to recompile the function on every call. I implemented &#39;jit_with_dummy_data&#39; to be called only once."}, {"owner": {"reputation": 451, "user_id": 4276112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/361b5255525c16f7049a5644295c7d2c?s=128&d=identicon&r=PG&f=1", "display_name": "mosegui", "link": "https://stackoverflow.com/users/4276112/mosegui"}, "reply_to_user": {"reputation": 5208, "user_id": 4045774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c23c0c730b6a9cb71d1ce17838f2beb7?s=128&d=identicon&r=PG&f=1", "display_name": "max9111", "link": "https://stackoverflow.com/users/4045774/max9111"}, "edited": false, "score": 0, "creation_date": 1572182106, "post_id": 58421549, "comment_id": 103474192, "body": "@max9111 NO they are not :D! You are right. I have been through your solution again and I see now I was not understanding it properly all involved concepts. Indeed I can build the <code>LowLevelCallable</code> once in the beginning (which adds about one second to the total calculation time) and then iterate faster with more efficient integration (which saves me about two seconds time). All in all, my overall calculation time got reduced to about the half!! (ca. two secs instead of four). Thank you very much!"}, {"owner": {"reputation": 5208, "user_id": 4045774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c23c0c730b6a9cb71d1ce17838f2beb7?s=128&d=identicon&r=PG&f=1", "display_name": "max9111", "link": "https://stackoverflow.com/users/4045774/max9111"}, "edited": false, "score": 0, "creation_date": 1572284701, "post_id": 58421549, "comment_id": 103504583, "body": "I have opened an issue on this topic at the Numba Github site. <a href=\"https://github.com/numba/numba/issues/4754\" rel=\"nofollow noreferrer\">github.com/numba/numba/issues/4754</a> Even if my solution works for you there should be an easy way to do this in a more general way (without recompilation if array shapes changes)."}, {"owner": {"reputation": 5208, "user_id": 4045774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c23c0c730b6a9cb71d1ce17838f2beb7?s=128&d=identicon&r=PG&f=1", "display_name": "max9111", "link": "https://stackoverflow.com/users/4045774/max9111"}, "edited": false, "score": 0, "creation_date": 1588692126, "post_id": 58421549, "comment_id": 108993122, "body": "I have added a version, which doesn&#39;t need recompilation if the array shape changes."}], "answers": [{"comments": [{"owner": {"reputation": 451, "user_id": 4276112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/361b5255525c16f7049a5644295c7d2c?s=128&d=identicon&r=PG&f=1", "display_name": "mosegui", "link": "https://stackoverflow.com/users/4276112/mosegui"}, "edited": false, "score": 0, "creation_date": 1572167477, "post_id": 58561573, "comment_id": 103471126, "body": "max9111 thank you very much for your time and help. Your solution worked. See my edit above."}], "tags": [], "owner": {"reputation": 5208, "user_id": 4045774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c23c0c730b6a9cb71d1ce17838f2beb7?s=128&d=identicon&r=PG&f=1", "display_name": "max9111", "link": "https://stackoverflow.com/users/4045774/max9111"}, "is_accepted": false, "score": 2, "last_activity_date": 1588692097, "last_edit_date": 1588692097, "creation_date": 1572017595, "answer_id": 58561573, "question_id": 58421549, "link": "https://stackoverflow.com/questions/58421549/passing-numpy-arrays-as-arguments-to-numba-cfunc/58561573#58561573", "title": "Passing NumPy arrays as arguments to numba.cfunc", "body": "<h2>You can use the user_data Input to pass arrays</h2>\n\n<p>As I understood the documentation of <a href=\"https://docs.scipy.org/doc/scipy/reference/generated/scipy.integrate.quad.html#scipy.integrate.quad\" rel=\"nofollow noreferrer\">scipy.integrate.quad</a> it isn't possible to pass arrays with the <code>args</code> parameter when using a <a href=\"https://docs.scipy.org/doc/scipy/reference/generated/scipy.LowLevelCallable.html#scipy.LowLevelCallable\" rel=\"nofollow noreferrer\">scipy.LowLevelCallable</a>, but you can pass abitrary user_data.</p>\n\n<p>In the following example I used this signature.</p>\n\n<blockquote>\n  <p>double func(double x, void *user_data) </p>\n</blockquote>\n\n<p><strong>Edit Arbitrary shapes of arrays without recompilation</strong></p>\n\n<p>Using this <a href=\"https://stackoverflow.com/a/61550054/4045774\">answer</a> it is also possible to compile the function once for arbitrary array shapes (only the number of dimensions is fixed).</p>\n\n<pre><code>import numpy as np\nimport numba as nb\nfrom numba import types\nfrom scipy import integrate, LowLevelCallable\nimport ctypes\n\n#Void Pointer from Int64\n@nb.extending.intrinsic\ndef address_as_void_pointer(typingctx, src):\n    \"\"\" returns a void pointer from a given memory address \"\"\"\n    from numba import types, cgutils\n    sig = types.voidptr(src)\n\n    def codegen(cgctx, builder, sig, args):\n        return builder.inttoptr(args[0], cgutils.voidptr_t)\n    return sig, codegen\n\ndef create_jit_integrand_function(integrand_function,args_dtype):\n    jitted_function = nb.njit(integrand_function)\n\n    #double func(double x, void *user_data)\n    @nb.cfunc(types.float64(types.float64,types.CPointer(args_dtype)))\n    def wrapped(x1,user_data_p):\n        #Array of structs\n        user_data = nb.carray(user_data_p, 1)\n\n        #Extract the data\n        x2=user_data[0].a\n        array1=nb.carray(address_as_void_pointer(user_data[0].foo_p),(user_data[0].foo_s1,user_data[0].foo_s2),dtype=np.float64)\n        array2=nb.carray(address_as_void_pointer(user_data[0].bar_p),(user_data[0].bar_s1,user_data[0].bar_s2),dtype=np.float64)\n\n        return jitted_function(x1, x2, array1, array2)\n    return wrapped\n\ndef function_using_arrays(x1, x2, array1, array2):\n    res1 = np.interp(x1, array1[0], array1[1])\n    res2 = np.interp(x2, array2[0], array2[1])\n\n    return res1 + res2\n\ndef do_integrate_w_arrays(func,args,lolim=0, hilim=1):\n    integrand_func=LowLevelCallable(func.ctypes,user_data=args.ctypes.data_as(ctypes.c_void_p))\n    return integrate.quad(integrand_func, lolim, hilim)\n\n#Define the datatype of the struct array\n#Pointers are not allowed, therefore we use int64\nargs_dtype = types.Record.make_c_struct([\n    ('a', types.float64),\n    ('foo_p',  types.int64),\n    ('foo_s1', types.int64),\n    ('foo_s2', types.int64),\n    ('bar_p',  types.int64),\n    ('bar_s1', types.int64),\n    ('bar_s2', types.int64),])\n\n#creating some sample data\n#The arrays must be c-contigous\n#To ensure that you can use np.ascontiguousarray\n\na=3\nfoo = np.ascontiguousarray(np.arange(200, dtype=np.float64).reshape(2, -1))\nbar = np.ascontiguousarray(np.arange(600, dtype=np.float64).reshape(2, -1))\n\n\nargs=np.array((a,foo.ctypes.data,foo.shape[0],foo.shape[1],\n                 bar.ctypes.data,bar.shape[0],bar.shape[1]),dtype=args_dtype)\n\n#compile the integration function (array-shapes are fixed)\n#There is only a structured array like args allowed\nfunc=create_jit_integrand_function(function_using_arrays,args_dtype)\n\n\nprint(do_integrate_w_arrays(func,args, lolim=0, hilim=1))\n</code></pre>\n\n<p><strong>Old version</strong></p>\n\n<p>As I am passing a <a href=\"https://docs.scipy.org/doc/numpy-1.15.0/user/basics.rec.html\" rel=\"nofollow noreferrer\">Structured array</a> a recompilation is needed if the array shapes or datatypes changes. This isn't a limitation of the API itself. \nThere must a way how to do this in an easier way (Maybe using Tuples?)</p>\n\n<p><strong>Implementation</strong></p>\n\n<pre><code>import numpy as np\nimport numba as nb\nfrom numba import types\nfrom scipy import integrate, LowLevelCallable\nimport ctypes\n\ndef create_jit_integrand_function(integrand_function,args,args_dtype):\n    jitted_function = nb.njit(integrand_function)\n\n    @nb.cfunc(types.float64(types.float64,types.CPointer(args_dtype)))\n    def wrapped(x1,user_data_p):\n        #Array of structs\n        user_data = nb.carray(user_data_p, 1)\n\n        #Extract the data\n        x2=user_data[0].a\n        array1=user_data[0].foo\n        array2=user_data[0].bar\n\n        return jitted_function(x1, x2, array1, array2)\n    return wrapped\n\ndef function_using_arrays(x1, x2, array1, array2):\n    res1 = np.interp(x1, array1[0], array1[1])\n    res2 = np.interp(x2, array2[0], array2[1])\n\n    return res1 + res2\n\ndef jit_with_dummy_data(args,args_dtype):\n    func=create_jit_integrand_function(function_using_arrays,args,args_dtype)\n    return func\n\ndef do_integrate_w_arrays(func,args,lolim=0, hilim=1):\n    integrand_func=LowLevelCallable(func.ctypes,user_data=args.ctypes.data_as(ctypes.c_void_p))\n    return integrate.quad(integrand_func, lolim, hilim)\n</code></pre>\n\n<p><strong>Using the Implementation</strong></p>\n\n<pre><code>#creating some sample data\na=3\nfoo = np.arange(200, dtype=np.float64).reshape(2, -1)\nbar = np.arange(600, dtype=np.float64).reshape(2, -1)\n\nargs_dtype = types.Record.make_c_struct([\n    ('a', types.float64),\n    ('foo', types.NestedArray(dtype=types.float64, shape=foo.shape)),\n    ('bar', types.NestedArray(dtype=types.float64, shape=bar.shape)),])\n\nargs=np.array((a,foo,bar),dtype=args_dtype)\n\n#compile the integration function (array-shapes are fixed)\n#There is only a structured array like args allowed\nfunc=jit_with_dummy_data(args,args_dtype)\n\n\nprint(do_integrate_w_arrays(func,args, lolim=0, hilim=1))\n</code></pre>\n"}], "owner": {"reputation": 451, "user_id": 4276112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/361b5255525c16f7049a5644295c7d2c?s=128&d=identicon&r=PG&f=1", "display_name": "mosegui", "link": "https://stackoverflow.com/users/4276112/mosegui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1234, "favorite_count": 3, "answer_count": 1, "score": 4, "last_activity_date": 1588692097, "creation_date": 1571259149, "last_edit_date": 1572184463, "question_id": 58421549, "link": "https://stackoverflow.com/questions/58421549/passing-numpy-arrays-as-arguments-to-numba-cfunc", "title": "Passing NumPy arrays as arguments to numba.cfunc", "body": "<p>I have been fighting with an issue that I am having trouble wrapping my head around, and therefore don't quite know how to start solving it. My experience in programming C is very limited and that is, I think, the reason for which I cannot make progress.</p>\n\n<p>I have some function that uses <code>numpy.interp</code> and <code>scipy.integrate.quad</code> to carry out a certain integral. Since I use <code>quad</code> for the integration, and according to its documentation:</p>\n\n<blockquote>\n  <p>A Python function or method to integrate. If <code>func</code> takes many\n  arguments, it is integrated along the axis corresponding to the first\n  argument.</p>\n  \n  <p>If the user desires improved integration performance, then <code>f</code> may be a\n  <code>scipy.LowLevelCallable</code> with one of the signatures:</p>\n\n<pre><code>double func(double x)\ndouble func(double x, void *user_data) \ndouble func(int n, double *xx) \ndouble func(int n, double *xx, void *user_data) \n</code></pre>\n  \n  <p>The user_data is the data contained in the <code>scipy.LowLevelCallable</code>. In the\n  call forms with <code>xx</code>, <code>n</code> is the length of\n  the <code>xx</code> array which contains <code>xx[0] == x</code> and the rest of the items are\n  numbers contained in the args argument of quad.</p>\n  \n  <p>In addition, certain ctypes call signatures are supported for backward\n  compatibility, but those should not be used in new code.</p>\n</blockquote>\n\n<p>I need to use the <code>scipy.LowLevelCallable</code> objects for speeding up my code, and I need to stick my function design to one of the above signatures. Moreover, since I do not want to be complicating the whole thing with C libraries and compilers, I want to solve this \"on the fly\" with the tools available from <code>numba</code>, in particular <code>numba.cfunc</code>, which allows me to by-pass the Python C API.</p>\n\n<p>I have been able to solve this for an integrand that takes as an input the integration variable and an arbitrary number of scalar parameters:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>    from scipy import integrate, LowLevelCallable\n    from numba import njit, cfunc\n    from numba.types import intc, float64, CPointer\n\n\n    def jit_integrand_function(integrand_function):\n        jitted_function = njit(integrand_function)\n\n        @cfunc(float64(intc, CPointer(float64)))\n        def wrapped(n, xx):\n            return jitted_function(xx[0], xx[1], xx[2], xx[3])\n        return LowLevelCallable(wrapped.ctypes)\n\n    @jit_integrand_function\n    def regular_function(x1, x2, x3, x4):\n        return x1 + x2 + x3 + x4\n\n    def do_integrate_wo_arrays(a, b, c, lolim=0, hilim=1):\n        return integrate.quad(regular_function, lolim, hilim, (a, b, c))\n\n    &gt;&gt;&gt; print(do_integrate_wo_arrays(1,2,3,lolim=2, hilim=10))\n    (96.0, 1.0658141036401503e-12)\n</code></pre>\n\n<p>This code works just fine. I am able to jit the integrand function and return the jitted function as a <code>LowLevelCallable</code> object. However, I actually need to pass to my integrand two <code>numpy.array</code>s, and the above construction breaks:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>    from scipy import integrate, LowLevelCallable\n    from numba import njit, cfunc\n    from numba.types import intc, float64, CPointer\n\n\n    def jit_integrand_function(integrand_function):\n        jitted_function = njit(integrand_function)\n\n        @cfunc(float64(intc, CPointer(float64)))\n        def wrapped(n, xx):\n            return jitted_function(xx[0], xx[1], xx[2], xx[3])\n        return LowLevelCallable(wrapped.ctypes)\n\n    @jit_integrand_function\n    def function_using_arrays(x1, x2, array1, array2):\n        res1 = np.interp(x1, array1[0], array1[1])\n        res2 = np.interp(x2, array2[0], array2[1])\n\n        return res1 + res2\n\n    def do_integrate_w_arrays(a, lolim=0, hilim=1):\n        foo = np.arange(20, dtype=np.float).reshape(2, -1)\n        bar = np.arange(60, dtype=np.float).reshape(2, -1)\n\n        return integrate.quad(function_using_arrays, lolim, hilim, (a, foo, bar))\n\n\n    &gt;&gt;&gt; print(do_integrate_w_arrays(3, lolim=2, hilim=10))\n    Traceback (most recent call last):\n      File \"C:\\ProgramData\\Miniconda3\\lib\\site-packages\\IPython\\core\\interactiveshell.py\", line 3267, in run_code\n        exec(code_obj, self.user_global_ns, self.user_ns)\n      File \"&lt;ipython-input-63-69c0074d4936&gt;\", line 1, in &lt;module&gt;\n        runfile('C:/Users/mosegui/Desktop/fos4x_pkg_develop/python-packages/fos4x_tec/fos4x_tec/test_scipy_numba.py', wdir='C:/Users/mosegui/Desktop/fos4x_pkg_develop/python-packages/fos4x_tec/fos4x_tec')\n      File \"C:\\Program Files\\JetBrains\\PyCharm Community Edition 2018.3.4\\helpers\\pydev\\_pydev_bundle\\pydev_umd.py\", line 197, in runfile\n        pydev_imports.execfile(filename, global_vars, local_vars)  # execute the script\n      File \"C:\\Program Files\\JetBrains\\PyCharm Community Edition 2018.3.4\\helpers\\pydev\\_pydev_imps\\_pydev_execfile.py\", line 18, in execfile\n        exec(compile(contents+\"\\n\", file, 'exec'), glob, loc)\n      File \"C:/Users/mosegui/Desktop/fos4x_pkg_develop/python-packages/fos4x_tec/fos4x_tec/test_scipy_numba.py\", line 29, in &lt;module&gt;\n        @jit_integrand_function\n      File \"C:/Users/mosegui/Desktop/fos4x_pkg_develop/python-packages/fos4x_tec/fos4x_tec/test_scipy_numba.py\", line 13, in jit_integrand_function\n        @cfunc(float64(intc, CPointer(float64)))\n      File \"C:\\Users\\mosegui\\AppData\\Roaming\\Python\\Python36\\site-packages\\numba\\decorators.py\", line 260, in wrapper\n        res.compile()\n      File \"C:\\Users\\mosegui\\AppData\\Roaming\\Python\\Python36\\site-packages\\numba\\compiler_lock.py\", line 32, in _acquire_compile_lock\n        return func(*args, **kwargs)\n      File \"C:\\Users\\mosegui\\AppData\\Roaming\\Python\\Python36\\site-packages\\numba\\ccallback.py\", line 69, in compile\n        cres = self._compile_uncached()\n      File \"C:\\Users\\mosegui\\AppData\\Roaming\\Python\\Python36\\site-packages\\numba\\ccallback.py\", line 82, in _compile_uncached\n        cres = self._compiler.compile(sig.args, sig.return_type)\n      File \"C:\\Users\\mosegui\\AppData\\Roaming\\Python\\Python36\\site-packages\\numba\\dispatcher.py\", line 81, in compile\n        raise retval\n      File \"C:\\Users\\mosegui\\AppData\\Roaming\\Python\\Python36\\site-packages\\numba\\dispatcher.py\", line 91, in _compile_cached\n        retval = self._compile_core(args, return_type)\n      File \"C:\\Users\\mosegui\\AppData\\Roaming\\Python\\Python36\\site-packages\\numba\\dispatcher.py\", line 109, in _compile_core\n        pipeline_class=self.pipeline_class)\n      File \"C:\\Users\\mosegui\\AppData\\Roaming\\Python\\Python36\\site-packages\\numba\\compiler.py\", line 528, in compile_extra\n        return pipeline.compile_extra(func)\n      File \"C:\\Users\\mosegui\\AppData\\Roaming\\Python\\Python36\\site-packages\\numba\\compiler.py\", line 326, in compile_extra\n        return self._compile_bytecode()\n      File \"C:\\Users\\mosegui\\AppData\\Roaming\\Python\\Python36\\site-packages\\numba\\compiler.py\", line 385, in _compile_bytecode\n        return self._compile_core()\n      File \"C:\\Users\\mosegui\\AppData\\Roaming\\Python\\Python36\\site-packages\\numba\\compiler.py\", line 365, in _compile_core\n        raise e\n      File \"C:\\Users\\mosegui\\AppData\\Roaming\\Python\\Python36\\site-packages\\numba\\compiler.py\", line 356, in _compile_core\n        pm.run(self.state)\n      File \"C:\\Users\\mosegui\\AppData\\Roaming\\Python\\Python36\\site-packages\\numba\\compiler_machinery.py\", line 328, in run\n        raise patched_exception\n      File \"C:\\Users\\mosegui\\AppData\\Roaming\\Python\\Python36\\site-packages\\numba\\compiler_machinery.py\", line 319, in run\n        self._runPass(idx, pass_inst, state)\n      File \"C:\\Users\\mosegui\\AppData\\Roaming\\Python\\Python36\\site-packages\\numba\\compiler_lock.py\", line 32, in _acquire_compile_lock\n        return func(*args, **kwargs)\n      File \"C:\\Users\\mosegui\\AppData\\Roaming\\Python\\Python36\\site-packages\\numba\\compiler_machinery.py\", line 281, in _runPass\n        mutated |= check(pss.run_pass, internal_state)\n      File \"C:\\Users\\mosegui\\AppData\\Roaming\\Python\\Python36\\site-packages\\numba\\compiler_machinery.py\", line 268, in check\n        mangled = func(compiler_state)\n      File \"C:\\Users\\mosegui\\AppData\\Roaming\\Python\\Python36\\site-packages\\numba\\typed_passes.py\", line 94, in run_pass\n        state.locals)\n      File \"C:\\Users\\mosegui\\AppData\\Roaming\\Python\\Python36\\site-packages\\numba\\typed_passes.py\", line 66, in type_inference_stage\n        infer.propagate()\n      File \"C:\\Users\\mosegui\\AppData\\Roaming\\Python\\Python36\\site-packages\\numba\\typeinfer.py\", line 951, in propagate\n        raise errors[0]\n    numba.errors.TypingError: Failed in nopython mode pipeline (step: nopython frontend)\n    Failed in nopython mode pipeline (step: nopython frontend)\n    Invalid use of Function(&lt;built-in function getitem&gt;) with argument(s) of type(s): (float64, Literal[int](0))\n     * parameterized\n    In definition 0:\n        All templates rejected with literals.\n    In definition 1:\n        All templates rejected without literals.\n    In definition 2:\n        All templates rejected with literals.\n    In definition 3:\n        All templates rejected without literals.\n    In definition 4:\n        All templates rejected with literals.\n    In definition 5:\n        All templates rejected without literals.\n    In definition 6:\n        All templates rejected with literals.\n    In definition 7:\n        All templates rejected without literals.\n    In definition 8:\n        All templates rejected with literals.\n    In definition 9:\n        All templates rejected without literals.\n    In definition 10:\n        All templates rejected with literals.\n    In definition 11:\n        All templates rejected without literals.\n    In definition 12:\n        All templates rejected with literals.\n    In definition 13:\n        All templates rejected without literals.\n    This error is usually caused by passing an argument of a type that is unsupported by the named function.\n    [1] During: typing of intrinsic-call at C:/Users/mosegui/Desktop/fos4x_pkg_develop/python-packages/fos4x_tec/fos4x_tec/test_scipy_numba.py (32)\n    [2] During: typing of static-get-item at C:/Users/mosegui/Desktop/fos4x_pkg_develop/python-packages/fos4x_tec/fos4x_tec/test_scipy_numba.py (32)\n    File \"test_scipy_numba.py\", line 32:\n    def diff_moment_edge(radius, alpha, chord_df, aerodyn_df):\n        &lt;source elided&gt;\n        # # calculate blade twist for radius\n        # sensor_twist = np.arctan((2 * rated_wind_speed) / (3 * rated_rotor_speed * (sensor_radius / 30.0) * radius)) * (180.0 / np.pi)\n        ^\n    [1] During: resolving callee type: type(CPUDispatcher(&lt;function function_using_arrays at 0x0000020C811827B8&gt;))\n    [2] During: typing of call at C:/Users/mosegui/Desktop/fos4x_pkg_develop/python-packages/fos4x_tec/fos4x_tec/test_scipy_numba.py (15)\n    [3] During: resolving callee type: type(CPUDispatcher(&lt;function function_using_arrays at 0x0000020C811827B8&gt;))\n    [4] During: typing of call at C:/Users/mosegui/Desktop/fos4x_pkg_develop/python-packages/fos4x_tec/fos4x_tec/test_scipy_numba.py (15)\n    File \"test_scipy_numba.py\", line 15:\n    def jit_integrand_function(integrand_function):\n        &lt;source elided&gt;\n        jitted_function = njit(integrand_function)\n     ^\n\n</code></pre>\n\n<p>Well now, obviously this doesn't work, because in this example I have not modified the design of the decorator. But that is exactly the core of my question: I do not fully understand this situation and therefore don't know how to modify the <code>cfunc</code> arguments for passing an array as parameter and still complying with the <code>scipy.integrate.quad</code> signature requirements. In the <code>numba</code> documentation that introduces <code>CPointers</code> there is an example of how to pass an array to a <code>numba.cfunc</code>:</p>\n\n<blockquote>\n  <p>Native platform ABIs as used by C or C++ don\u2019t have the notion of a\n  shaped array as in Numpy. One common solution is to pass a raw data\n  pointer and one or several size arguments (depending on\n  dimensionality). Numba must provide a way to rebuild an array view of\n  this data inside the callback.</p>\n  \n  <pre class=\"lang-py prettyprint-override\"><code>    from numba import cfunc, carray\n    from numba.types import float64, CPointer, void, intp\n\n    # A callback with the C signature `void(double *, double *, size_t)`\n\n    @cfunc(void(CPointer(float64), CPointer(float64), intp))\n    def invert(in_ptr, out_ptr, n):\n        in_ = carray(in_ptr, (n,))\n        out = carray(out_ptr, (n,))\n        for i in range(n):\n            out[i] = 1 / in_[i] ```\n</code></pre>\n</blockquote>\n\n<p>I somehow understand that the <code>CPointer</code> is used for building the array in C, as in the signature of my decorator example <code>CPointer(float64)</code> gathers all the floats passed as arguments and puts them into an array. However, I am still not able to put it together and see how I can use it for passing an array, not for making an array out of the collection of <code>float</code> arguments I pass.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>The answer by <code>@max9111</code> worked, in the sense that was able to pass to the <code>scipy.integrate.quad</code> a <code>LowLevelCallable</code> that improved the time efficiency of the calculation. This is very valuable, as now it is much clearer how management of memory addresses work in C. Even though the concept of structured array does not exist in native C, I can create a structured array in Python with data that C is going to store in a contiguous memory region and access it/point to it through a unique memory address. The mapping provided by the structured array allows for identifying the different components of that memory region.</p>\n\n<p>Even though the solution by <code>@max9111</code> works and solves the question I posted originally, from the Python perspective this approach introduces a certain overhead that, under certain conditions, might be more time consuming than the time gained by now calling the <code>scipy.integrate.quad</code> integration function via a <code>LowLevelCallable</code>. </p>\n\n<p>In my real case I am using the integration as a step of a two-dimensional optimization problem. Each step of the optimization requires to integrate twice, and the integral requires nine scalar parameters ad two arrays. As long as I have not been able to solve the integration via a <code>LowLevelCallable</code>, the only thing I could do to speed up the code was to simply <code>njit</code> the integrand function. And that worked decently even though the integration was still being fired via the Python API.</p>\n\n<p>In my case, implementing <code>@max9111</code>'s solution has greatly improved the efficiency in the integration time (from about 0.0009s per step to about 0.0005 ). Nevertheless, the step of creating the structured array, C-unpacking the data, pass it to the jitted integrand and return a <code>LowLevelCallable</code> has added an extra 0.3s on average per iteration, thereby worsening my situation.</p>\n\n<p>Here there is some toy code for showing how the <code>LowLevelCallable</code> approach becomes the worse option the more one goes for an iterative process:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>    import ctypes\n    import timeit\n\n    from tqdm import tqdm\n    import numpy as np\n    from scipy import integrate, LowLevelCallable\n    import numba as nb\n    from numba import types\n    import matplotlib.pyplot as plt\n\n\n    ##################################################\n    # creating some sample data and parameters\n    a = 3\n    foo = np.arange(200, dtype=np.float64).reshape(2, -1)\n    bar = np.arange(600, dtype=np.float64).reshape(2, -1)\n\n    lim1 = 0\n    lim2 = 1\n\n    @nb.njit\n    def function_using_arrays(x1, x2, array1, array2):\n        res1 = np.interp(x1, array1[0], array1[1])\n        res2 = np.interp(x2, array2[0], array2[1])\n\n        return res1 + res2\n\n\n    ##################################################\n    # JIT INTEGRAND\n\n    def do_integrate_w_arrays_jit(a, array1, array2, lolim=0, hilim=1):\n        return integrate.quad(function_using_arrays, lolim, hilim, (a, array1, array2))\n\n    def process_jit_integrand():\n        do_integrate_w_arrays_jit(a, foo, bar, lolim=lim1, hilim=lim2)\n\n\n    ##################################################\n    # LOWLEV CALLABLE\n\n    def create_jit_integrand_function(integrand_function,args,args_dtype):\n        @nb.cfunc(types.float64(types.float64,types.CPointer(args_dtype)))\n        def wrapped(x1,user_data_p):\n            #Array of structs\n            user_data = nb.carray(user_data_p, 1)\n\n            #Extract the data\n            x2=user_data[0].a\n            array1=user_data[0].foo\n            array2=user_data[0].bar\n\n            return integrand_function(x1, x2, array1, array2)\n        return wrapped\n\n\n    def do_integrate_w_arrays_lowlev(func,args,lolim=0, hilim=1):\n        integrand_func = LowLevelCallable(func.ctypes,user_data=args.ctypes.data_as(ctypes.c_void_p))\n        return integrate.quad(integrand_func, lolim, hilim)\n\n\n    def process_lowlev_callable():\n        args_dtype = types.Record.make_c_struct([\n            ('a', types.float64),\n            ('foo', types.NestedArray(dtype=types.float64, shape=foo.shape)),\n            ('bar', types.NestedArray(dtype=types.float64, shape=bar.shape)),])\n\n        args=np.array((a, foo, bar), dtype=args_dtype)\n\n        func = create_jit_integrand_function(function_using_arrays,args,args_dtype)\n\n        do_integrate_w_arrays_lowlev(func, args, lolim=0, hilim=1)\n\n\n    ##################################################\n\n    repetitions = range(100)\n\n    jit_integrand_delays = [timeit.timeit(stmt=process_jit_integrand, \n    number=repetition) for repetition in tqdm(repetitions)]\n    lowlev_callable_delays = [timeit.timeit(stmt=process_lowlev_callable, \n    number=repetition) for repetition in tqdm(repetitions)]\n\n    fig, ax = plt.subplots()\n    ax.plot(repetitions, jit_integrand_delays, label=\"jit_integrand\")\n    ax.plot(repetitions, lowlev_callable_delays, label=\"lowlev_callable\")\n    ax.set_xlabel('number of repetitions')\n    ax.set_ylabel('calculation time (s)')\n    ax.set_title(\"Comparison calculation time\")\n    plt.tight_layout()\n    plt.legend()\n    plt.savefig(f'calculation_time_comparison_{repetitions[-1]}_reps.png')\n</code></pre>\n\n<p>Here the two options (only jitting the integrand vs. <code>@max9111</code>'s solution) are compared. In a modified version of <code>@max9111</code>'s solution, I have permanently jitted the integrand function (<code>function_using_arrays</code>) and removed that step from <code>create_jit_integrand_function</code>, which reduces the \"overhead\" time by a neat 20%. Moreover, also for the sake of speed, I have suppressed the <code>jit_with_dummy_data</code> function and included its functionality in the body of <code>process_lowlev_callable</code>, basically for avoiding an unnecessary function call. Find in the following the calculation time for both solutions for a series of up to 100 cycles:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Kgvxn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Kgvxn.png\" alt=\"Calculation time ellapsed for only jitting the integrand vs building a LowLevelCallable\"></a> </p>\n\n<p>As you can see, if you are in an iterative process, the time saved in each single calculation (30+ %!!) does not pay off the overhead carried by the couple extra functions that you need to implement for building the LowLevelCallable (functions that are as well called iteratively and run over the Python C API).</p>\n\n<p>Bottom line: this solution is very good for reducing calculation time in one single very heavy integral, but just jitting the integrand seems to be better off when solving average integrals within an iterative process, since the extra functions required by the LowlevelCallable, that need to be called as much often as the integration itself, take their toll.</p>\n\n<p>Anyway, thank you very much. Even though this solution will not work for me, I learned valuable things and I consider my question solved.</p>\n\n<p><strong>EDIT 2:</strong></p>\n\n<p>I misunderstood parts of <code>@max9111</code>'s solution and the role played by the function <code>create_jit_integrand_function</code>, and I was wrongly compiling the <code>LowLevelCallable</code> in each step of my optimization (which I do not need to do beacuse, even though the parameters and arrays passed to the integral change each iteration, their shape, and therefore that of the C struct remains constant).</p>\n\n<p>The refactored version of the code from the above <strong>EDIT</strong> that makes sense:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>\n    import ctypes\n    import timeit\n\n    from tqdm import tqdm\n    import numpy as np\n    from scipy import integrate, LowLevelCallable\n    import numba as nb\n    from numba import types\n    import matplotlib.pyplot as plt\n\n\n    ##################################################\n    # creating some sample data and parameters\n    a = 3\n    foo = np.arange(200, dtype=np.float64).reshape(2, -1)\n    bar = np.arange(600, dtype=np.float64).reshape(2, -1)\n\n    lim1 = 0\n    lim2 = 1\n\n\n    def function_using_arrays(x1, x2, array1, array2):\n        res1 = np.interp(x1, array1[0], array1[1])\n        res2 = np.interp(x2, array2[0], array2[1])\n\n        return res1 + res2\n\n\n    ##################################################\n    # JIT INTEGRAND\n\n    def do_integrate_w_arrays_jit(a, array1, array2, lolim=0, hilim=1):\n        return integrate.quad(nb.njit(function_using_arrays), lolim, hilim, (a, array1, array2))\n\n    def process_jit_integrand():\n        do_integrate_w_arrays_jit(a, foo, bar, lolim=lim1, hilim=lim2)\n\n\n    ##################################################\n    # LOWLEV CALLABLE\n\n    def create_jit_integrand_function(integrand_function, args_dtype):\n        jitted_function = nb.njit(integrand_function)\n\n        @nb.cfunc(types.float64(types.float64,types.CPointer(args_dtype)))\n        def wrapped(x1,user_data_p):\n            #Array of structs\n            user_data = nb.carray(user_data_p, 1)\n\n            #Extract the data\n            x2=user_data[0].a\n            array1=user_data[0].foo\n            array2=user_data[0].bar\n\n            return jitted_function(x1, x2, array1, array2)\n        return wrapped\n\n\n    def do_integrate_w_arrays_lowlev(func,args,lolim=0, hilim=1):\n        integrand_func=LowLevelCallable(func.ctypes,user_data=args.ctypes.data_as(ctypes.c_void_p))\n        return integrate.quad(integrand_func, lolim, hilim)\n\n\n    def process_lowlev_callable():\n        do_integrate_w_arrays_lowlev(func, np.array((a, foo, bar), dtype=args_dtype), lolim=0, hilim=1)\n\n\n    ##################################################\n\n    repetitions = range(100)\n\n    jit_integrand_delays = [timeit.timeit(stmt=process_jit_integrand, number=repetition) for repetition in tqdm(repetitions)]\n\n\n    args_dtype = types.Record.make_c_struct([\n            ('a', types.float64),\n            ('foo', types.NestedArray(dtype=types.float64, shape=foo.shape)),\n            ('bar', types.NestedArray(dtype=types.float64, shape=bar.shape)),])\n    func = create_jit_integrand_function(function_using_arrays, args_dtype)\n\n\n    lowlev_callable_delays = [timeit.timeit(stmt=process_lowlev_callable, number=repetition) for repetition in tqdm(repetitions)]\n\n    fig, ax = plt.subplots()\n    ax.plot(repetitions, jit_integrand_delays, label=\"jit_integrand\")\n    ax.plot(repetitions, lowlev_callable_delays, label=\"lowlev_callable\")\n    ax.set_xlabel('number of repetitions')\n    ax.set_ylabel('calculation time (s)')\n    ax.set_title(\"Comparison calculation time\")\n    plt.tight_layout()\n    plt.legend()\n    plt.savefig(f'calculation_time_comparison_{repetitions[-1]}_reps.png')\n\n</code></pre>\n\n<p>In this configuration, the building of the <code>LowLevelCallable</code> (which indeed costs a bit of time) only has to be carried out once, and the overall process is orders of magnitude faster:</p>\n\n<p><a href=\"https://i.stack.imgur.com/80ANT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/80ANT.png\" alt=\"enter image description here\"></a></p>\n\n<p>and the close-up for the <code>lowlev_callable</code>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/PmlQf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PmlQf.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c", "static", "initialization"], "comments": [{"owner": {"reputation": 394, "user_id": 2023321, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1iHEw.jpg?s=128&g=1", "display_name": "Eduardo Fernandes", "link": "https://stackoverflow.com/users/2023321/eduardo-fernandes"}, "edited": false, "score": 1, "creation_date": 1571259607, "post_id": 58421537, "comment_id": 103185453, "body": "You should initiate your pointer to NULL, so, in the first call, you copy the string to your local variable, then, after that, you do not change its content anymore."}], "answers": [{"comments": [{"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 0, "creation_date": 1571259845, "post_id": 58421619, "comment_id": 103185553, "body": "It would be even better to explicitly initialize <code>toChange</code> to <code>NULL</code>! But I think this will be the default, anyway (<code>static</code> data default to zero, I think?)"}, {"owner": {"reputation": 394, "user_id": 2023321, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1iHEw.jpg?s=128&g=1", "display_name": "Eduardo Fernandes", "link": "https://stackoverflow.com/users/2023321/eduardo-fernandes"}, "edited": false, "score": 0, "creation_date": 1571260151, "post_id": 58421619, "comment_id": 103185648, "body": "I am not sure if every compiler initializes local variables to zero. I recommend you never count on that."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 394, "user_id": 2023321, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1iHEw.jpg?s=128&g=1", "display_name": "Eduardo Fernandes", "link": "https://stackoverflow.com/users/2023321/eduardo-fernandes"}, "edited": false, "score": 1, "creation_date": 1571260559, "post_id": 58421619, "comment_id": 103185777, "body": "@EduardoFernandes It is not just a local variable it is also a static variable and static variables are initialized by the compiler."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 2, "last_activity_date": 1571260067, "last_edit_date": 1571260067, "creation_date": 1571259504, "answer_id": 58421619, "question_id": 58421537, "link": "https://stackoverflow.com/questions/58421537/c-static-variables-on-function-inputs/58421619#58421619", "title": "C Static variables on function inputs", "body": "<p>Static variables shall be initialized by constant expressions.</p>\n\n<p>Write instead something like</p>\n\n<pre><code> int testFunc(char *toString) {\n    static char *toChange;\n    static int counter;\n\n    if ( toChange == NULL || toString == NULL ) \n    {\n        toChange = toString;\n        counter = 0;\n    } \n\n    toChange[counter] = 'A';\n    printf(\"String is being corrupted... %s\\n\", toChange);\n    counter++;\n\n    return 0;\n</code></pre>\n\n<p>}</p>\n"}, {"tags": [], "owner": {"reputation": 394, "user_id": 2023321, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1iHEw.jpg?s=128&g=1", "display_name": "Eduardo Fernandes", "link": "https://stackoverflow.com/users/2023321/eduardo-fernandes"}, "is_accepted": false, "score": 0, "last_activity_date": 1571260061, "creation_date": 1571260061, "answer_id": 58421721, "question_id": 58421537, "link": "https://stackoverflow.com/questions/58421537/c-static-variables-on-function-inputs/58421721#58421721", "title": "C Static variables on function inputs", "body": "<p>Do this:</p>\n\n<pre><code>int testFunc(char *toString) {\n    static char *toChange = NULL;\n    static int counter = 0;\n    if (toChange == NULL) {\n        toChange = (char*)malloc(strlen(toString) + 1);\n        memset(toChange, 0, strlen(toString) + 1);\n        strcpy(toChange, toString);\n    }\n    toChange[counter] = 'A';\n    printf(\"String is being corrupted... %s\\n\", toChange);\n    counter++;\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 11656914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b883f122d6ef724adabd9d93b1ee28f?s=128&d=identicon&r=PG&f=1", "display_name": "NotDuplicateSL", "link": "https://stackoverflow.com/users/11656914/notduplicatesl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 58421619, "answer_count": 2, "score": 1, "last_activity_date": 1571269449, "creation_date": 1571259082, "last_edit_date": 1571269449, "question_id": 58421537, "link": "https://stackoverflow.com/questions/58421537/c-static-variables-on-function-inputs", "title": "C Static variables on function inputs", "body": "<p>I'd like to save an input to a function and manipulate it across multiple calls. However, if I do the following...</p>\n\n<pre><code>int testFunc(char *toString) {\n        static char *toChange = toString;\n        static int counter = 0;\n\n        toChange[counter] = 'A';\n        printf(\"String is being corrupted... %s\\n\", toChange);\n        counter++;\n\n        return 0;\n}\n</code></pre>\n\n<p>I get an error saying that the input <code>toChange</code> cannot be set to a non-static variable. I have been trying to figure out how to get around this but I cannot find any answers. </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 367, "user_id": 10930163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a82a32b93373e472ee666e96b00d1b5?s=128&d=identicon&r=PG&f=1", "display_name": "anonmess", "link": "https://stackoverflow.com/users/10930163/anonmess"}, "edited": false, "score": 1, "creation_date": 1571258761, "post_id": 58421408, "comment_id": 103185099, "body": "Yes it is. Please expand on your question if you want any further assistance."}, {"owner": {"reputation": 9846, "user_id": 1745544, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/92a0f69d86d214e0cffceb76c6e3f09f?s=128&d=identicon&r=PG", "display_name": "OldProgrammer", "link": "https://stackoverflow.com/users/1745544/oldprogrammer"}, "edited": false, "score": 1, "creation_date": 1571258774, "post_id": 58421408, "comment_id": 103185102, "body": "Yes, it is possible."}, {"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 0, "creation_date": 1571258777, "post_id": 58421408, "comment_id": 103185103, "body": "Welcome to Stack Overflow! The short answer to your first question is: &quot;Yes, it&#39;s possible.&quot; However, if you want further help, then you should show us some sign of the effort you&#39;ve made so far."}], "answers": [{"comments": [{"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1571259754, "post_id": 58421513, "comment_id": 103185521, "body": "Aside from the fact that it is disputable if such requests as from the OP should be fulfilled, you could at least provide a clean c program (i.e. one that compiles, preferably without warnings)."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 1, "creation_date": 1571259804, "post_id": 58421513, "comment_id": 103185536, "body": "Small caveat: <code>rand() % LIMIT</code> is almost always unevenly distributed (although the effect is minimal with a rather small <code>LIMIT</code>)."}, {"owner": {"reputation": 9, "user_id": 11839113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65571710c6392b2a23fc448d84f27a44?s=128&d=identicon&r=PG&f=1", "display_name": "pchelper4", "link": "https://stackoverflow.com/users/11839113/pchelper4"}, "reply_to_user": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1571260325, "post_id": 58421513, "comment_id": 103185704, "body": "Good point, I didn&#39;t bother to check it before hand...it was a bit sloppy!"}, {"owner": {"reputation": 1149, "user_id": 2472827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5rYY.jpg?s=128&g=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/2472827/neil"}, "edited": false, "score": 0, "creation_date": 1571270732, "post_id": 58421513, "comment_id": 103188461, "body": "<code>myFunction(array)</code> and <code>myFunction(&amp;array[0])</code> both pass an <code>int *</code> and are the same, but <code>myFunction(&amp;array)</code> passes an <code>int **</code>."}, {"owner": {"reputation": 9, "user_id": 11839113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65571710c6392b2a23fc448d84f27a44?s=128&d=identicon&r=PG&f=1", "display_name": "pchelper4", "link": "https://stackoverflow.com/users/11839113/pchelper4"}, "edited": false, "score": 0, "creation_date": 1571271241, "post_id": 58421513, "comment_id": 103188549, "body": "That actually makes a lot of sense, thank you for pointing that out!"}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "reply_to_user": {"reputation": 1149, "user_id": 2472827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5rYY.jpg?s=128&g=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/2472827/neil"}, "edited": false, "score": 1, "creation_date": 1571273388, "post_id": 58421513, "comment_id": 103188981, "body": "@Neil - <code>myFunction(&amp;array)</code> will pass an <code>int (*)[50]</code>, not an <code>int **</code> -- very different"}, {"owner": {"reputation": 1957, "user_id": 12056564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ec003d02adbcf6a3065097f6f29fa29?s=128&d=identicon&r=PG&f=1", "display_name": "Gerd", "link": "https://stackoverflow.com/users/12056564/gerd"}, "edited": false, "score": 0, "creation_date": 1571301684, "post_id": 58421513, "comment_id": 103197746, "body": "I would suggest not to use the value <code>50</code> (for the array size) twice in the code, but rather define a constant for it."}, {"owner": {"reputation": 1149, "user_id": 2472827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5rYY.jpg?s=128&g=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/2472827/neil"}, "reply_to_user": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1571339953, "post_id": 58421513, "comment_id": 103218511, "body": "@ChrisDodd that&#39;s very true. Good call."}], "tags": [], "owner": {"reputation": 9, "user_id": 11839113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65571710c6392b2a23fc448d84f27a44?s=128&d=identicon&r=PG&f=1", "display_name": "pchelper4", "link": "https://stackoverflow.com/users/11839113/pchelper4"}, "is_accepted": false, "score": 0, "last_activity_date": 1571271280, "last_edit_date": 1571271280, "creation_date": 1571258956, "answer_id": 58421513, "question_id": 58421408, "link": "https://stackoverflow.com/questions/58421408/initializing-arrays-with-a-function/58421513#58421513", "title": "Initializing Arrays with a function", "body": "<pre><code> #include &lt;time.h&gt;  //time func for seed init\n #include &lt;stdlib.h&gt; //srand/rand funcs\n #include &lt;stdio.h&gt;  //Library for printf function\n #define LIMIT 100 \n\n void myFunction(int array[], int arrayIndexMaxSize){\n     for (int index = 0; index &lt; arrayIndexMaxSize; index++){\n         array[index] = rand() % LIMIT;   //Where limit is randomly produced from 0 - Limit inclusive\n         printf(\"array[%d] of arrayIndexMaxSize(%d) = %d\\n\", index, arrayIndexMaxSize, array[index]);  //prints out th$\n     }\n }\n\n void main(){\n     srand(time(0));  //initializes kinda random number generator\n     int array[50]; //If known at runtime or compile time, must be at block scope meaing inside {curly} braces of any$\n     myFunction(array, 50);\n }\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12197653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4da5640349ea39730646c09d75a91239?s=128&d=identicon&r=PG&f=1", "display_name": "Dummie1138", "link": "https://stackoverflow.com/users/12197653/dummie1138"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1571271280, "creation_date": 1571258517, "question_id": 58421408, "link": "https://stackoverflow.com/questions/58421408/initializing-arrays-with-a-function", "title": "Initializing Arrays with a function", "body": "<p>I'm trying to get an array to be initialized in a function. The initialized array should contain a set of random numbers within a certain range when working as intended. Is this possible in C?</p>\n"}, {"tags": ["c", "linux", "header", "include", "dirent.h"], "comments": [{"owner": {"reputation": 2682, "user_id": 7602551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e81b7fabc768e5360e25c5875f757883?s=128&d=identicon&r=PG&f=1", "display_name": "unlut", "link": "https://stackoverflow.com/users/7602551/unlut"}, "edited": false, "score": 1, "creation_date": 1571258042, "post_id": 58421292, "comment_id": 103184795, "body": "I think its a sarcasm, like why should we include limits.h and use an appropriate value instead of hardcoding 256 =)"}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "reply_to_user": {"reputation": 2682, "user_id": 7602551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e81b7fabc768e5360e25c5875f757883?s=128&d=identicon&r=PG&f=1", "display_name": "unlut", "link": "https://stackoverflow.com/users/7602551/unlut"}, "edited": false, "score": 0, "creation_date": 1571258340, "post_id": 58421292, "comment_id": 103184922, "body": "@unlut: It&#39;s not sarcasm."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1571259043, "post_id": 58421292, "comment_id": 103185216, "body": "it seems that filename length is universally 255 max: <a href=\"https://serverfault.com/a/9548\">serverfault.com/a/9548</a>"}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1571259284, "post_id": 58421292, "comment_id": 103185327, "body": "@Jean-Fran&#231;oisFabre Have a look at Reiser4... ;)"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1571259372, "post_id": 58421292, "comment_id": 103185361, "body": "of course, it&#39;s not guaranteed, but looks like it&#39;s enough for most names so the length stuck so indexing may hold on an unsigned char size? @Ctx. We can only guess here"}], "answers": [{"comments": [{"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 2, "creation_date": 1571258795, "post_id": 58421424, "comment_id": 103185107, "body": "This sounds plausible, but do you have any reference for these claims?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1571258913, "post_id": 58421424, "comment_id": 103185162, "body": "probably because there&#39;s a max file name len in limits.h"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1571259264, "post_id": 58421424, "comment_id": 103185319, "body": "I checked limits.h and included files and could not find a max filename len, though. But maybe it&#39;s somewhere and I didn&#39;t find it."}, {"owner": {"reputation": 2682, "user_id": 7602551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e81b7fabc768e5360e25c5875f757883?s=128&d=identicon&r=PG&f=1", "display_name": "unlut", "link": "https://stackoverflow.com/users/7602551/unlut"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1571259327, "post_id": 58421424, "comment_id": 103185344, "body": "@Jean-Fran&#231;oisFabre If you are using linux there is NAME_MAX in /usr/include/linux/limits.h NAME_MAX, but probably not cross-platform."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1571259397, "post_id": 58421424, "comment_id": 103185374, "body": "that would explain a lot. And anyway, the programmers <i>know</i> that the limit is 256. They just have to adapt it if the value changes in limits.h. After all a set of include files is a coherent whole. Maintanability issues aren&#39;t the priority"}, {"owner": {"reputation": 2682, "user_id": 7602551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e81b7fabc768e5360e25c5875f757883?s=128&d=identicon&r=PG&f=1", "display_name": "unlut", "link": "https://stackoverflow.com/users/7602551/unlut"}, "edited": false, "score": 0, "creation_date": 1571260368, "post_id": 58421424, "comment_id": 103185723, "body": "I think I finally understand what you mean, but can you show an example why would you want to use same name with a standard definition in your own definition?"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 2682, "user_id": 7602551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e81b7fabc768e5360e25c5875f757883?s=128&d=identicon&r=PG&f=1", "display_name": "unlut", "link": "https://stackoverflow.com/users/7602551/unlut"}, "edited": false, "score": 0, "creation_date": 1571260445, "post_id": 58421424, "comment_id": 103185746, "body": "@unlut <code>NAME_MAX</code> is not guaranteed to be defined.  <a href=\"https://pubs.opengroup.org/onlinepubs/009695399/basedefs/limits.h.html\" rel=\"nofollow noreferrer\">Per POSIX <code>&lt;limits.h&gt;</code></a>: &quot;A definition of one of the values <b>shall be omitted</b> from the <code>&lt;limits.h&gt;</code> header on specific implementations where the corresponding value is equal to or greater than the stated minimum, but where the value can vary depending on the file to which it is applied. ...  <code>NAME_MAX</code>...&quot;"}, {"owner": {"reputation": 2682, "user_id": 7602551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e81b7fabc768e5360e25c5875f757883?s=128&d=identicon&r=PG&f=1", "display_name": "unlut", "link": "https://stackoverflow.com/users/7602551/unlut"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1571260864, "post_id": 58421424, "comment_id": 103185899, "body": "@AndrewHenle Your quote does not explain why I can&#39;t include limits.h in dirent.h, or if does but I didn&#39;t understand can you explain?"}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "reply_to_user": {"reputation": 2682, "user_id": 7602551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e81b7fabc768e5360e25c5875f757883?s=128&d=identicon&r=PG&f=1", "display_name": "unlut", "link": "https://stackoverflow.com/users/7602551/unlut"}, "edited": false, "score": 3, "creation_date": 1571260952, "post_id": 58421424, "comment_id": 103185939, "body": "@unlut: Why it can&#39;t is covered here: <a href=\"https://pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html#tag_15_02_02\" rel=\"nofollow noreferrer\">pubs.opengroup.org/onlinepubs/9699919799/functions/&hellip;</a>"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 2682, "user_id": 7602551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e81b7fabc768e5360e25c5875f757883?s=128&d=identicon&r=PG&f=1", "display_name": "unlut", "link": "https://stackoverflow.com/users/7602551/unlut"}, "edited": false, "score": 0, "creation_date": 1571260966, "post_id": 58421424, "comment_id": 103185945, "body": "@unlut If <code>NAME_MAX</code> can&#39;t be guaranteed to be defined, there&#39;s no point in including <code>limits.h</code>."}, {"owner": {"reputation": 2682, "user_id": 7602551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e81b7fabc768e5360e25c5875f757883?s=128&d=identicon&r=PG&f=1", "display_name": "unlut", "link": "https://stackoverflow.com/users/7602551/unlut"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1571261085, "post_id": 58421424, "comment_id": 103185986, "body": "@AndrewHenle If NAME_MAX if defined you can use it, and if its not you can fall back to magic number 256."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 2682, "user_id": 7602551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e81b7fabc768e5360e25c5875f757883?s=128&d=identicon&r=PG&f=1", "display_name": "unlut", "link": "https://stackoverflow.com/users/7602551/unlut"}, "edited": false, "score": 0, "creation_date": 1571261262, "post_id": 58421424, "comment_id": 103186056, "body": "@unlut Well, as Linux supports filesystems with different maximum pathname lengths, <code>NAME_MAX</code> being defined would be a defect that shouldn&#39;t be counted on.  Again - no point."}, {"owner": {"reputation": 2682, "user_id": 7602551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e81b7fabc768e5360e25c5875f757883?s=128&d=identicon&r=PG&f=1", "display_name": "unlut", "link": "https://stackoverflow.com/users/7602551/unlut"}, "edited": false, "score": 0, "creation_date": 1571261373, "post_id": 58421424, "comment_id": 103186102, "body": "@R.. Thank you for the reference, does C standard also guarantee this or is this just a POSIX thing?"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 2682, "user_id": 7602551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e81b7fabc768e5360e25c5875f757883?s=128&d=identicon&r=PG&f=1", "display_name": "unlut", "link": "https://stackoverflow.com/users/7602551/unlut"}, "edited": false, "score": 0, "creation_date": 1571261573, "post_id": 58421424, "comment_id": 103186161, "body": "@unlut <code>NAME_MAX</code> does not exist in the C standard."}, {"owner": {"reputation": 2682, "user_id": 7602551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e81b7fabc768e5360e25c5875f757883?s=128&d=identicon&r=PG&f=1", "display_name": "unlut", "link": "https://stackoverflow.com/users/7602551/unlut"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1571261734, "post_id": 58421424, "comment_id": 103186195, "body": "@AndrewHenle I am not asking whether NAME_MAX is defined or not, but whether including a C header file must not define something reserved that belongs to another C header file."}, {"owner": {"reputation": 148, "user_id": 10059000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcb9e76f84bd927304f853f336da6dab?s=128&d=identicon&r=PG&f=1", "display_name": "sipihr", "link": "https://stackoverflow.com/users/10059000/sipihr"}, "edited": false, "score": 0, "creation_date": 1571262997, "post_id": 58421424, "comment_id": 103186601, "body": "@R.. I accepted this answer as correct. I am using VS Code as IDE. When I include only <code>dirent.h</code>, the helping window shows only the details of <code>d_name</code> when I hover the mouse on it. But when I also include <code>limits.h</code>, it shows <code>We must not include limits.h!</code> comment. I thought there is a header conflict and I shouldn&#39;t include <code>limits.h</code>. Now I understand why. I have never thought VS Code is that smart. Thank you."}], "tags": [], "owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "is_accepted": true, "score": 5, "last_activity_date": 1571258572, "creation_date": 1571258572, "answer_id": 58421424, "question_id": 58421292, "link": "https://stackoverflow.com/questions/58421292/why-does-it-say-we-must-not-include-limits-h-in-dirent-h/58421424#58421424", "title": "Why does it say &quot;We must not include limits.h!&quot; in dirent.h?", "body": "<p>Each standard header has a specification for what it exposes or may expose. <code>dirent.h</code> exposes <code>struct dirent</code>, <code>DIR</code>, and the relevant functions, and reserves names starting with <code>d_</code>. Some headers are also permitted but not required to expose things exposed by certain other headers; <code>dirent.h</code> is not one of these. So indirectly including <code>limits.h</code> would be a violation of the namespace and would break conforming programs that assume they can use names that <code>limits.h</code> would expose for their own identifiers.</p>\n"}, {"comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1571260601, "post_id": 58421651, "comment_id": 103185792, "body": "And as I noted above, POSIX specifies that <code>NAME_MAX</code> shall not be defined should there not be a fixed maximum file name length.  And Linux supports filesystems that have different filename lengths..."}], "tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": false, "score": 1, "last_activity_date": 1571260015, "last_edit_date": 1571260015, "creation_date": 1571259647, "answer_id": 58421651, "question_id": 58421292, "link": "https://stackoverflow.com/questions/58421292/why-does-it-say-we-must-not-include-limits-h-in-dirent-h/58421651#58421651", "title": "Why does it say &quot;We must not include limits.h!&quot; in dirent.h?", "body": "<p>The maximum number of characters in a file name (component) is <a href=\"https://pubs.opengroup.org/onlinepubs/009695399/basedefs/limits.h.html\" rel=\"nofollow noreferrer\"><code>NAME_MAX</code></a>. The number 256 equals <code>NAME_MAX + 1</code> (or is the maximum of that on any targeted system). Naturally using a bare magic number like this is generally frowned upon.</p>\n\n<p>But that macro is defined only in <code>&lt;limits.h&gt;</code>. It cannot be included in <code>&lt;dirent.h&gt;</code> because the latter is not supposed to define any of these macros.</p>\n"}, {"tags": [], "owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": false, "score": 1, "last_activity_date": 1571260927, "last_edit_date": 1592644375, "creation_date": 1571260927, "answer_id": 58421875, "question_id": 58421292, "link": "https://stackoverflow.com/questions/58421292/why-does-it-say-we-must-not-include-limits-h-in-dirent-h/58421875#58421875", "title": "Why does it say &quot;We must not include limits.h!&quot; in dirent.h?", "body": "<p>Additionally, values such as <code>NAME_MAX</code> may not be guaranteed to be defined.</p>\n<p>Per <a href=\"https://pubs.opengroup.org/onlinepubs/009695399/basedefs/limits.h.html\" rel=\"nofollow noreferrer\">POSIX <code>&lt;limits.h&gt;</code></a>(bolding mine):</p>\n<blockquote>\n<p>The values in the following list may be constants within an implementation or may vary from one pathname to another. For example, file systems or directories may have different characteristics.</p>\n<p>A definition of one of the values <strong>shall be omitted</strong> from the <code>&lt;limits.h&gt;</code> header on specific implementations where the corresponding value is equal to or greater than the stated minimum, but where the value can vary depending on the file to which it is applied. The actual value supported for a specific pathname shall be provided by the <code>pathconf()</code> function.</p>\n<p>...</p>\n<p><code>{PATH_MAX}</code></p>\n<p>Maximum number of bytes in a pathname, including the terminating null character.</p>\n<p>Minimum Acceptable Value: <code>{_POSIX_PATH_MAX}</code></p>\n<p>Minimum Acceptable Value: <code>{_XOPEN_PATH_MAX}</code></p>\n</blockquote>\n<p>As noted in the comments, Linux supports filesystems with different maximum pathname lengths.</p>\n"}], "owner": {"reputation": 148, "user_id": 10059000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcb9e76f84bd927304f853f336da6dab?s=128&d=identicon&r=PG&f=1", "display_name": "sipihr", "link": "https://stackoverflow.com/users/10059000/sipihr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 258, "favorite_count": 0, "accepted_answer_id": 58421424, "answer_count": 3, "score": 6, "last_activity_date": 1571260927, "creation_date": 1571257990, "question_id": 58421292, "link": "https://stackoverflow.com/questions/58421292/why-does-it-say-we-must-not-include-limits-h-in-dirent-h", "title": "Why does it say &quot;We must not include limits.h!&quot; in dirent.h?", "body": "<p>When we include <code>&lt;dirent.h&gt;</code> and <code>&lt;limits.h&gt;</code> to a c file, <code>dirent</code> structs' <code>d_name</code> variable shows <code>We must not include limits.h!</code> in the variable description in the ide. When I look at the file <em>/usr/include/x86_64-linux-gnu/bits/dirent.h</em> it contains the following code piece.</p>\n\n<pre><code>...\nstruct dirent\n  {\n#ifndef __USE_FILE_OFFSET64\n    __ino_t d_ino;\n    __off_t d_off;\n#else\n    __ino64_t d_ino;\n    __off64_t d_off;\n#endif\n    unsigned short int d_reclen;\n    unsigned char d_type;\n    char d_name[256];       /* We must not include limits.h! */\n  };\n...\n</code></pre>\n\n<p>My question is why we must not include <code>limits.h</code>. I've searched online, but I couldn't find any satisfying answer.</p>\n"}, {"tags": ["c", "cs50"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1571258391, "post_id": 58421273, "comment_id": 103184947, "body": "<code>f++</code> should be <code>f--</code> since you&#39;re counting down from <code>money</code> to <code>0</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1571258513, "post_id": 58421273, "comment_id": 103184992, "body": "What&#39;s the reason for the <code>f</code> loop in the first place?"}, {"owner": {"reputation": 11893, "user_id": 12098405, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C7IUyuZ5qqE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehqQyGdh463Xz2DY8S4TYPhnDvzA/photo.jpg?sz=128", "display_name": "dash-o", "link": "https://stackoverflow.com/users/12098405/dash-o"}, "edited": false, "score": 0, "creation_date": 1571259489, "post_id": 58421273, "comment_id": 103185414, "body": "What are the type of coins, q, d, n, p. On surface, coins is &#39;int&#39;, but is printed using &quot;%f&quot; ? The compiler should complain about this."}], "answers": [{"comments": [{"owner": {"reputation": 1957, "user_id": 12056564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ec003d02adbcf6a3065097f6f29fa29?s=128&d=identicon&r=PG&f=1", "display_name": "Gerd", "link": "https://stackoverflow.com/users/12056564/gerd"}, "edited": false, "score": 0, "creation_date": 1571302021, "post_id": 58421390, "comment_id": 103197957, "body": "I perfectly agree with the answer&#39;s last paragraph and recommend reading <a href=\"https://floating-point-gui.de\" rel=\"nofollow noreferrer\">this</a> and <a href=\"https://stackoverflow.com/questions/588004/is-floating-point-math-broken\">this</a> about the issues of floating-point arithmetics."}], "tags": [], "owner": {"reputation": 1340, "user_id": 7218062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0e0d5a2d3c49c93f1aafd67adaaca59?s=128&d=identicon&r=PG&f=1", "display_name": "jmq", "link": "https://stackoverflow.com/users/7218062/jmq"}, "is_accepted": false, "score": 0, "last_activity_date": 1571260994, "last_edit_date": 1571260994, "creation_date": 1571258445, "answer_id": 58421390, "question_id": 58421273, "link": "https://stackoverflow.com/questions/58421273/why-wont-the-number-of-coins-print/58421390#58421390", "title": "Why won&#39;t the number of coins print?", "body": "<p>Because you are using floats you may be hitting a rounding error and ending up with money having a value like .001.  This will cause you to enter the top level for loop again which will reset q,d,n, and p to 0.  It is much cleaner to use while loops:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nmain()\n{\n        int q = 0;\n        int d = 0;\n        int n = 0;\n        int p = 0;\n        float money = .34;  // test value\n        int coins;\n\n        while (money &gt;= .25)\n        {\n                money = money - .25;\n                q++;\n        } \n        while (money &gt;= .10)\n        {\n                money = money - .1;\n                d++;\n        } \n        while (money &gt;= .05)\n        {\n                money = money - .05;\n                n++;\n        } \n\n        while (money &gt;= .01)\n        {\n                money = money - .01;\n                p++;\n        }\n\n        coins = q+d+n+p;\n        printf(\"%d\", coins);  // Note that type was changed to int\n}\n</code></pre>\n\n<p>Note since this still uses floats you may get small rounding errors.  It would be better to count by cents using integers instead of floats to track a fraction of a dollar but I wanted to keep a style similar to yours.</p>\n"}], "owner": {"reputation": 1, "user_id": 12228919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1340d1dcbcac9d5d618dc8432854b6?s=128&d=identicon&r=PG&f=1", "display_name": "MasonTheDuke", "link": "https://stackoverflow.com/users/12228919/masontheduke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1571260994, "creation_date": 1571257921, "question_id": 58421273, "link": "https://stackoverflow.com/questions/58421273/why-wont-the-number-of-coins-print", "title": "Why won&#39;t the number of coins print?", "body": "<p>I am doing the Cash(less) problem in CS50 and my code will not print the number of coins that I have</p>\n\n<p>I tried moving print into a do while loop but that made it print forever.</p>\n\n<pre><code>do\n{\n    for(int f = money;f &gt;=0;f++)\n    {\n        for(q=0; money &gt;= .25;q++)\n         {\n             money = money - .25;\n         } \n        for(d=0; money &gt;= .10;d++)\n         {\n             money = money - .1;\n         } \n        for(n=0; money &gt;= .05;n++)\n         {\n             money = money - .05;\n         } \n        for(p=0; money &gt;= .01;p++)\n         {\n             money = money - .01;\n         } \n\n    }\n  }while(money&gt;=0);\n        coins = q+d+n+p;\n        printf(\"%f\", coins);\n</code></pre>\n\n<p>It should print the minimum number of coins required to return change to a customer based on the input they put in earlier in the code.</p>\n"}, {"tags": ["c", "fork", "exec", "named-pipes"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1571258465, "post_id": 58421237, "comment_id": 103184974, "body": "The parent doesn&#39;t open the command pipe FIFO until after the child has exited, at which point any data written to the FIFO by the child has been deleted.  The <code>fd = open(&quot;cmdpipe&quot;, 0777);</code> calls are abysmal \u2014 that looks like a set of permissions, but you&#39;ve passed where you need a mode such as <code>O_RDONLY</code> (in the parent; <code>O_WRONLY</code> in the child).  Also, <code>read()</code> does not null terminate data \u2014 your printing is dubious.  You need to check for errors, especially from <code>open()</code>."}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 1, "creation_date": 1571258644, "post_id": 58421237, "comment_id": 103185053, "body": "Check the return status of your calls.  I would expect that <code>open</code> would block until the parent opens the fifo for reading.  So if <code>open</code> is returning at all, it is probably returning an error....which you are ignoring."}, {"owner": {"reputation": 11, "user_id": 4480724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-f0UZuWtbLMk/AAAAAAAAAAI/AAAAAAAAAUo/H63oHiKU4rk/photo.jpg?sz=128", "display_name": "Joey Emanuele", "link": "https://stackoverflow.com/users/4480724/joey-emanuele"}, "edited": false, "score": 0, "creation_date": 1571263167, "post_id": 58421237, "comment_id": 103186652, "body": "Thanks for your answers, they were very helpful. I solved the problem by first having the parent create and open the pipe; then the parent waits for the child to open the pipe, redirect output to the pipe, execute the command; then the parent reads from the pipe and prints."}], "owner": {"reputation": 11, "user_id": 4480724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-f0UZuWtbLMk/AAAAAAAAAAI/AAAAAAAAAUo/H63oHiKU4rk/photo.jpg?sz=128", "display_name": "Joey Emanuele", "link": "https://stackoverflow.com/users/4480724/joey-emanuele"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 153, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1571257691, "creation_date": 1571257691, "question_id": 58421237, "link": "https://stackoverflow.com/questions/58421237/storing-output-of-linux-command-in-named-pipe", "title": "Storing output of Linux command in named pipe", "body": "<p>My goal is to take a command which is input by the user and execute it with a forked child process, but rather than have the child process print it to the screen, store the output in a named pipe and have the parent process display the output after the child process has completed.</p>\n\n<p>I'm attempting to do so by using dup2() to redirect standard output to the named pipe I've made, but the child process simply prints the output of the command and when attempting to read from the pipe in the parent process, I get the following error: </p>\n\n<p><strong>Error reading from pipe: Bad file descriptor</strong></p>\n\n<p>I've searched for similar questions on this site but have only found solutions for using regular pipes to store the output of exec(), and I wasn't able to adapt those solutions to named pipes. Here is my code:</p>\n\n<pre><code> #include &lt;stdio.h&gt;\n #include &lt;stdlib.h&gt;\n #include &lt;string.h&gt;\n #include &lt;unistd.h&gt;\n #include &lt;sys/types.h&gt;\n #include &lt;sys/stat.h&gt;\n\n #define CMDSIZE 50\n #define BUFSIZE 5000\n\nint main() {\n    char cmd[CMDSIZE], arg[CMDSIZE], buf[BUFSIZE];\n    int fd, n;\n    pid_t pid = fork();\n\n    if (pid &lt; 0) {\n        perror(\"Error creating process\");\n        return 1;\n    }\n    else if (pid == 0) {\n        printf(\"SHELL &gt; \");\n        fgets(buf, BUFSIZE, stdin);\n        sscanf(buf, \"%s %s\", cmd, arg);\n        memset(buf, 0, BUFSIZE);\n\n        printf(\"Working on request...\\n\");\n\n        unlink(\"cmdpipe\");\n        mkfifo(\"cmdpipe\", 0777);\n\n        fd = open(\"cmdpipe\", 0777);\n\n        dup2(fd, STDOUT_FILENO);\n        close(fd);\n\n        if (arg[0] == '\\0')\n            execlp(cmd, cmd, NULL);\n        else\n            execlp(cmd, cmd, arg, NULL);\n    }\n    else {\n        wait(NULL);\n\n        printf(\"...Output ready! Displaying now.\\n\");\n\n        fd = open(\"cmdpipe\", 0777);\n\n        if ((n = read(fd, buf, BUFSIZE)) &lt; 0) {\n            perror(\"Error reading from pipe\");\n            return n;\n        }\n\n        close(fd);\n        printf(\"%s\\n\", buf);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Thanks.</p>\n"}, {"tags": ["c", "audio", "wav"], "comments": [{"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1571259462, "post_id": 58421134, "comment_id": 103185404, "body": "use <a href=\"https://linux.die.net/man/3/atoi\" rel=\"nofollow noreferrer\">atoi</a> to convert a string to an integer (or better yet, something like <a href=\"https://linux.die.net/man/3/strtol\" rel=\"nofollow noreferrer\">strtol</a> since it does error checking and lets you specify a base)."}, {"owner": {"reputation": 19, "user_id": 8308933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eab1fed7d38d809745c1f602a0d9301c?s=128&d=identicon&r=PG&f=1", "display_name": "Labrockstar", "link": "https://stackoverflow.com/users/8308933/labrockstar"}, "reply_to_user": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1571260741, "post_id": 58421134, "comment_id": 103185848, "body": "@yano argv[3] is the delay in samples. It cannot be negative because the delay cannot be negative. The amplitude must be between 0 and 1."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1571262189, "post_id": 58421134, "comment_id": 103186341, "body": "yes my mistake, was miscounting arguments."}, {"owner": {"reputation": 22623, "user_id": 147175, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/PyWe3.jpg?s=128&g=1", "display_name": "Scott Stensland", "link": "https://stackoverflow.com/users/147175/scott-stensland"}, "edited": false, "score": 1, "creation_date": 1571262456, "post_id": 58421134, "comment_id": 103186428, "body": "a pop can be generated when the initial or final height of the raw audio curve is not zero ... meaning as the audio curve wobbles up and down from say +1 to -1 as it is generating audio this directly controls the output speaker physical position of the diaphragm  ... when the audio first starts this diaphragm is at rest which equates to the zero mark ...  if the audio starts at a value other than this zero there is a mismatch between the signal being sent to the speaker and the physical location of the speaker moving parts"}, {"owner": {"reputation": 19, "user_id": 8308933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eab1fed7d38d809745c1f602a0d9301c?s=128&d=identicon&r=PG&f=1", "display_name": "Labrockstar", "link": "https://stackoverflow.com/users/8308933/labrockstar"}, "edited": false, "score": 0, "creation_date": 1571269361, "post_id": 58421134, "comment_id": 103188186, "body": "I added a line to the code to set the amplitude of the first and last sample to 0, but the click is still there."}, {"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 0, "creation_date": 1571302998, "post_id": 58421134, "comment_id": 103198524, "body": "Well, you don&#39;t need a single 0 sample, but a raising or falling edge at a rate slow enough. Load your generated wave file into an audio editor like Audacity and look at the curve. You can compare it with the original wave file. Does the original click, too?"}], "owner": {"reputation": 19, "user_id": 8308933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eab1fed7d38d809745c1f602a0d9301c?s=128&d=identicon&r=PG&f=1", "display_name": "Labrockstar", "link": "https://stackoverflow.com/users/8308933/labrockstar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 129, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1571257217, "creation_date": 1571257217, "question_id": 58421134, "link": "https://stackoverflow.com/questions/58421134/why-is-there-a-clicking-sound-at-the-beginning-and-end-of-sounds-produced-by-my", "title": "Why is there a clicking sound at the beginning and end of sounds produced by my echo program?", "body": "<p>I have a program that creates an echo from a sound file and amplitude and delay (in samples) and writes it to a file. The problem is that at the beginning and end of the echo, there is a clicking noise. I don't know how to fix it.</p>\n\n<p>The program adds the original sound wave data with the delayed sound wave data. This is done under the assumption that the number of channels is always 2. The left and right channel is always present. The sound files I tested the program with have 2 channels. The sound files are always WAV files.</p>\n\n<p>The program is supposed to be started like this:\n./render_echo {input file name} {output file name} {delay in samples} {amplitude}</p>\n\n<p>Example:\n./render_echo sound1.wav sound2.wav 22050 0.4\nFor an echo with half second delay assuming sample rate is 44100. </p>\n\n<p>Echo program:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>int check_args(char* inputFile, char* outputFile, int delay, float amplitude){\n\n  if (inputFile == NULL){\n    printf(\"Error: improper input file name\\n\");\n    return 1;\n  }\n\n  if (outputFile == NULL){\n    printf(\"Error: improper output file name\\n\");\n    return 1;\n  }\n\n  if (delay &lt; 0){\n    printf(\"Error: delay cannot be negative\\n\");\n    return 1;\n  }\n\n  if (amplitude &lt;= 0.0 || amplitude &gt; 1.0){\n    printf(\"Error: amplitude must be between 0 and 1, exclusive.\\n\");\n    return 1;\n  }\n  return 0;\n}\n\n\n\nint main(int argc, char** argv){\n\n  //Check if the number of arguments equals 5\n  if (argc != 5){\n    printf(\"Error: wrong number of arguments\");\n    return 1;\n  }\n\n  //Make sure arguments are correct\n  char* inputFileName = argv[1];\n  char* outputFileName = argv[2];\n  float amplitude = atof(argv[4]);\n\n  if (check_args(inputFileName, outputFileName, atof(argv[3]), amplitude) == 1){\n    return 1;\n  }\n\n  //Delay is expressed in number of samples\n  unsigned monodelay = atof(argv[3]);\n  unsigned delay = monodelay*2;\n\n\n  //printf(\"amp %f\\n\", amplitude);\n\n  FILE *inputFile = fopen(inputFileName, \"rb\");\n  if (inputFile == NULL){\n    printf(\"Error: couldn't read file\\n\");\n    return 1;\n  }\n\n  //Read wave header\n  unsigned num_samples_input_monochannel;\n  read_wave_header(inputFile, &amp;num_samples_input_monochannel);\n  unsigned num_samples_input = 2*num_samples_input_monochannel;\n  //printf(\"Mono %u Dual %u\\n\", num_samples_input_monochannel, num_samples_input);\n\n  //Read wave data\n  int16_t input_wave[num_samples_input];\n  read_s16_buf(inputFile, input_wave, num_samples_input);\n\n  //New output file info\n  unsigned num_samples_output_monochannel = num_samples_input_monochannel + monodelay;\n  unsigned num_samples_output = num_samples_output_monochannel*2;\n  int16_t output_wave[num_samples_output];\n  memset(output_wave, 0, num_samples_output);\n\n  //New waves\n  int16_t input_wave_dual[2][num_samples_output_monochannel];\n  memset(input_wave_dual[0], 0, num_samples_output_monochannel);\n  memset(input_wave_dual[1], 0, num_samples_output_monochannel);\n\n  //Fill input_wave_dual\n  for (int i=0; i&lt;num_samples_input_monochannel; i++){\n    input_wave_dual[0][i] = input_wave[i*2]; //left channel\n    input_wave_dual[1][i] = input_wave[i*2 + 1]; //right channel\n  }\n\n  //Time delayed wave\n  int16_t delayed_wave_dual[2][num_samples_output_monochannel];\n  memset(delayed_wave_dual[0], 0, num_samples_output_monochannel);\n  memset(delayed_wave_dual[1], 0, num_samples_output_monochannel);\n\n  //Fill time delayed wave\n  for (int j=0; j&lt;num_samples_output_monochannel;j++){\n    delayed_wave_dual[0][monodelay+j-1] = input_wave_dual[0][j]*amplitude;\n    delayed_wave_dual[1][monodelay+j-1] = input_wave_dual[1][j]*amplitude;\n  }\n\n  //Add the two waves\n  for (int k=0; k&lt;num_samples_output_monochannel; k++){\n    for (int l=0; l&lt;2;l++){\n      //Temp input amplitude\n      int temp_i_a = input_wave_dual[l][k];\n      //Temp delay amplitude\n      int temp_d_a = delayed_wave_dual[l][k];\n      //Temp sum\n      int temp_sum = temp_i_a + temp_d_a;\n      if (temp_sum &gt; INT16_MAX){\n    temp_sum = INT16_MAX;\n      } else if (temp_sum &lt; INT16_MIN){\n    temp_sum = INT16_MIN;\n      }\n\n      output_wave[k*2 +l] = temp_sum;\n    }\n  }\n\n\n\n  //WRITE TO FILE\n  FILE *outputFile = fopen(outputFileName, \"wb+\");\n  if (outputFile == NULL){\n    printf(\"Error: could not write file\");\n    return 1;\n  }\n\n  write_wave_header(outputFile, num_samples_output_monochannel);\n\n  write_s16_buf(outputFile, output_wave, num_samples_output);\n\n  fclose(outputFile);\n  fclose(inputFile);\n\n  printf(\"Finished\\n\");\n\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "arrays", "random"], "comments": [{"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 2, "creation_date": 1571256060, "post_id": 58420853, "comment_id": 103183905, "body": "Yes, you could do that in either language. However, please start with the <a href=\"https://stackoverflow.com/tour\">tour</a> and read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1571256079, "post_id": 58420853, "comment_id": 103183917, "body": "First of all you need to realize that it is <i>not</i> random. And then you need to decide where you are &quot;sacrificing&quot; your randomness. For example you can generate n/2 random elements and then generate another n/2 elements while each one is the negation of the corresponding item from the random array."}, {"owner": {"reputation": 23662, "user_id": 380384, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/uT3JH.png?s=128&g=1", "display_name": "John Alexiou", "link": "https://stackoverflow.com/users/380384/john-alexiou"}, "edited": false, "score": 1, "creation_date": 1571256177, "post_id": 58420853, "comment_id": 103183964, "body": "Generate a random vector, and subtract the average value from each element."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 23662, "user_id": 380384, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/uT3JH.png?s=128&g=1", "display_name": "John Alexiou", "link": "https://stackoverflow.com/users/380384/john-alexiou"}, "edited": false, "score": 0, "creation_date": 1571256229, "post_id": 58420853, "comment_id": 103183990, "body": "@ja72 That could break the range requirement."}, {"owner": {"user_type": "does_not_exist", "display_name": "user11937721"}, "edited": false, "score": 5, "creation_date": 1571256370, "post_id": 58420853, "comment_id": 103184060, "body": "Normalization along multiple instances. If you want a sum-to-zero set of random numbers between -1 and 1, then you sum the negative numbers and normalize them to be equal to -1 total, then you sum the positive numbers and normalize them to +1. it sacrifices true randomness but they still maintain a pseudo-random nature, and the then-total of the vector would be zero. From you code, you would need to ensure that there is at least 1 negative and 1 positive number - otherwise it would throw a div0 error."}, {"owner": {"reputation": 6053, "user_id": 11336762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hGPr6.jpg?s=128&g=1", "display_name": "Roberto Caboni", "link": "https://stackoverflow.com/users/11336762/roberto-caboni"}, "edited": false, "score": 1, "creation_date": 1571256553, "post_id": 58420853, "comment_id": 103184132, "body": "Why don&#39;t you simply generate n-1 elements, calculate their sum and get the n-th element by changing the sign of the sum?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 6053, "user_id": 11336762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hGPr6.jpg?s=128&g=1", "display_name": "Roberto Caboni", "link": "https://stackoverflow.com/users/11336762/roberto-caboni"}, "edited": false, "score": 3, "creation_date": 1571256608, "post_id": 58420853, "comment_id": 103184152, "body": "@Cubo78 Can be out of range"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1571256652, "post_id": 58420853, "comment_id": 103184168, "body": "...or even in range but absurd compared with the others."}, {"owner": {"reputation": 81, "user_id": 10509291, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98xB7.jpg?s=128&g=1", "display_name": "Thales Carl", "link": "https://stackoverflow.com/users/10509291/thales-carl"}, "edited": false, "score": 0, "creation_date": 1571256726, "post_id": 58420853, "comment_id": 103184196, "body": "@Cryostasys it makes sense  and probably it will fit to my needs. Thanks for the idea."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1571256727, "post_id": 58420853, "comment_id": 103184197, "body": "@WeatherVane Why absurd? In any array satisfying the requirement any element equals <code>0-&lt;rest of elements&gt;</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1571256798, "post_id": 58420853, "comment_id": 103184231, "body": "@EugeneSh. at first I though you meant out of range of <code>float</code>."}, {"owner": {"reputation": 81, "user_id": 10509291, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98xB7.jpg?s=128&g=1", "display_name": "Thales Carl", "link": "https://stackoverflow.com/users/10509291/thales-carl"}, "reply_to_user": {"reputation": 6053, "user_id": 11336762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hGPr6.jpg?s=128&g=1", "display_name": "Roberto Caboni", "link": "https://stackoverflow.com/users/11336762/roberto-caboni"}, "edited": false, "score": 0, "creation_date": 1571256829, "post_id": 58420853, "comment_id": 103184245, "body": "@Cubo78 I was thinking about doing something like that. However this could make the last number far different from the others inside the array."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1571256855, "post_id": 58420853, "comment_id": 103184254, "body": "@ThalesCarl that is what I meant."}, {"owner": {"reputation": 23662, "user_id": 380384, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/uT3JH.png?s=128&g=1", "display_name": "John Alexiou", "link": "https://stackoverflow.com/users/380384/john-alexiou"}, "edited": false, "score": 0, "creation_date": 1571257226, "post_id": 58420853, "comment_id": 103184433, "body": "Do you want the sum to be <i>exactly</i> zero, or within some tolerance?"}, {"owner": {"reputation": 81, "user_id": 10509291, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98xB7.jpg?s=128&g=1", "display_name": "Thales Carl", "link": "https://stackoverflow.com/users/10509291/thales-carl"}, "reply_to_user": {"reputation": 23662, "user_id": 380384, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/uT3JH.png?s=128&g=1", "display_name": "John Alexiou", "link": "https://stackoverflow.com/users/380384/john-alexiou"}, "edited": false, "score": 0, "creation_date": 1571257601, "post_id": 58420853, "comment_id": 103184613, "body": "@ja72 The ideal scenario would be the sum is exactly zero since I am adding a random term in one equation that must get canceled in the end. However, I believe I can survive if the sum is around this value. Why?"}, {"owner": {"reputation": 6053, "user_id": 11336762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hGPr6.jpg?s=128&g=1", "display_name": "Roberto Caboni", "link": "https://stackoverflow.com/users/11336762/roberto-caboni"}, "edited": false, "score": 0, "creation_date": 1571257743, "post_id": 58420853, "comment_id": 103184672, "body": "Sorry, I actually forgot the range requirement. But I don&#39;t understand how a non uniform distribution would be against the requirements.. Anyway I have in mind some sort of algorithmic solution that imho would work, but I&#39;m afk, and writing it on my phone would be a pain.."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 3, "creation_date": 1571266193, "post_id": 58420853, "comment_id": 103187479, "body": "The space of possible answers when <code>n=3</code> is essentially the regular hexagon you get when slicing the cube with vertex coordinates at plus or minus one with the plane <code>x+y+z=0</code>. So how would you want the distribution on that hexagon to be? Proportional to area? Proportional to the volume of the original cube projected onto an area?"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1571270467, "post_id": 58420853, "comment_id": 103188413, "body": "@EugeneSh.: It is random. It is not uniformly distributed."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1571272243, "post_id": 58420853, "comment_id": 103188753, "body": "@EricPostpischil It is not only non-uniform, it is quite special. How would you call the distribution where each element is linearly depending on the others?"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1571273119, "post_id": 58420853, "comment_id": 103188939, "body": "You need to clarify the question, particularly the probability distribution desired. aschelpler\u2019s comment above is a good start. If you do not know what distribution you want, then explain why you want this."}, {"owner": {"reputation": 6053, "user_id": 11336762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hGPr6.jpg?s=128&g=1", "display_name": "Roberto Caboni", "link": "https://stackoverflow.com/users/11336762/roberto-caboni"}, "edited": false, "score": 0, "creation_date": 1571290063, "post_id": 58420853, "comment_id": 103192531, "body": "If the question doesn&#39;t mention a particular desired distribution ,  it means that&#39;s not any desired distribution. Random is random, and it is only limited by the capabiloty of generating a TRUE random number and by the requirements of the given range and the given sum. Stop."}, {"owner": {"reputation": 23662, "user_id": 380384, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/uT3JH.png?s=128&g=1", "display_name": "John Alexiou", "link": "https://stackoverflow.com/users/380384/john-alexiou"}, "edited": false, "score": 0, "creation_date": 1571313934, "post_id": 58420853, "comment_id": 103204926, "body": "This would make an awesome <a href=\"https://math.stackexchange.com\">Mathematics</a> question. Can you generate a flat random distribution with finite elements with sum zero and bounded?"}], "answers": [{"comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1571265945, "post_id": 58422276, "comment_id": 103187406, "body": "Note the distribution of <code>outArr[i]</code> is different from the distribution of <code>outArr[j]</code>."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 1, "creation_date": 1571266456, "post_id": 58422276, "comment_id": 103187533, "body": "It doesn&#39;t even cover the space. With <code>n==4</code>, you can&#39;t get results near <code>0.8, 0.8, -0.8, -0.8</code>."}, {"owner": {"reputation": 6053, "user_id": 11336762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hGPr6.jpg?s=128&g=1", "display_name": "Roberto Caboni", "link": "https://stackoverflow.com/users/11336762/roberto-caboni"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1571266504, "post_id": 58422276, "comment_id": 103187547, "body": "I&#39;m aware of it. But I think it is mainly due to the seed, which in my tests made me keet obtaining a value not far from the negative limit (and this caused the unnatural negative-positive alternance). Improving the seed initialization would improve for sure outArr[i] vs outArr[j] distribution too. But.. hey! It meets the requirements! :)"}, {"owner": {"reputation": 8402, "user_id": 4664415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hsfxj.jpg?s=128&g=1", "display_name": "mevets", "link": "https://stackoverflow.com/users/4664415/mevets"}, "edited": false, "score": 1, "creation_date": 1571267843, "post_id": 58422276, "comment_id": 103187832, "body": "I am not a math nerd; but I feel uneasy because your adjustment of min,max is based on history, thus you have added <i>memory</i> into the random number sequence.  Random is closed over linear operations, but is a memory-based operation actually linear?"}], "tags": [], "owner": {"reputation": 6053, "user_id": 11336762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hGPr6.jpg?s=128&g=1", "display_name": "Roberto Caboni", "link": "https://stackoverflow.com/users/11336762/roberto-caboni"}, "is_accepted": false, "score": 2, "last_activity_date": 1571266856, "last_edit_date": 1571266856, "creation_date": 1571263562, "answer_id": 58422276, "question_id": 58420853, "link": "https://stackoverflow.com/questions/58420853/how-to-generate-a-n-sized-random-float-array-that-sums-up-to-0-0/58422276#58422276", "title": "How to generate a n-sized random float array that sums up to 0.0?", "body": "<p>I figured out a solution to your problem. This is not perfect since its <em>randomness</em> is limited by the range requirement.</p>\n\n<p>The strategy is:</p>\n\n<ol>\n<li>Define a function able to generate a random float in a customizable range. No need to reinvent the wheel: I borrowed it from <a href=\"https://stackoverflow.com/a/44105089/11336762\">https://stackoverflow.com/a/44105089/11336762</a></li>\n<li>Malloc array (I omit pointer check in my example) and initialize the seed. In my example I just used current time but it can be improved</li>\n<li>For every element to be generated, pre-calculate random range. Given the i-th sum, make sure that the next sum is NEVER out of range: if the sum is positive, the range needs to be (-1,1-sum); if it is negative it the range needs to be (-1-sum,1)</li>\n<li>Do this until (n-1)th element. Last element must be directly assigned as the sum with the sign changed.</li>\n</ol>\n\n<pre><code>    #include&lt;stdio.h&gt;\n    #include&lt;stdlib.h&gt;\n    #include&lt;time.h&gt;\n\n    float float_rand( float min, float max )\n    {\n        float scale = rand() / (float) RAND_MAX; /* [0, 1.0] */\n        return min + scale * ( max - min );      /* [min, max] */\n    }\n\n    void main( int argc, char *argv[] )\n    {\n        if( argc == 2 )\n        {\n            int i, n = atoi ( argv[1] );\n            float *outArr = malloc( n * sizeof( float ) );\n            float sum = 0;\n\n            printf( \"Input value: %d\\n\\n\", n );\n\n            /* Initialize seed */\n            srand ( time( NULL ) );\n\n            for( i=0; i&lt;n-1; i++ )\n            {\n                /* Limit random generation range in order to make sure the next sum is  *\n                 * not outside (-1,1) range.                                            */\n                float min = (sum&lt;0? -1-sum : -1);\n                float max = (sum&gt;0? 1-sum : 1);\n\n                outArr[i] = float_rand( min, max );\n                sum += outArr[i];\n            }\n\n            /* Set last array element */\n            outArr[n-1] = -sum;\n\n            /* Print results */\n            sum=0;\n            for( i=0; i&lt;n; i++ )\n            {\n                sum += outArr[i];\n                printf( \"  outArr[%d]=%f \\t(sum=%f)\\n\", i, outArr[i], sum );\n            }\n\n            free( outArr );\n        }  \n        else\n        {\n          printf( \"Only a parameter allowed (integer N)\\n\" );\n        }\n    }\n</code></pre>\n\n<p>I tried it, and it works also when n=1. In case of n=0 a sanity check should be added to my example.</p>\n\n<p>Some output examples:</p>\n\n<p><strong>N=1:</strong></p>\n\n<pre><code>Input value: 1\n\n  outArr[0]=-0.000000   (sum=-0.000000)\n</code></pre>\n\n<p><strong>N=4</strong></p>\n\n<pre><code>Input value: 4\n\n  outArr[0]=-0.804071   (sum=-0.804071)\n  outArr[1]=0.810685    (sum=0.006614)\n  outArr[2]=-0.353444   (sum=-0.346830)\n  outArr[3]=0.346830    (sum=0.000000)\n</code></pre>\n\n<p><strong>N=8:</strong></p>\n\n<pre><code>Input value: 8\n\n  outArr[0]=-0.791314   (sum=-0.791314)\n  outArr[1]=0.800182    (sum=0.008867)\n  outArr[2]=-0.571293   (sum=-0.562426)\n  outArr[3]=0.293300    (sum=-0.269126)\n  outArr[4]=-0.082886   (sum=-0.352012)\n  outArr[5]=0.818639    (sum=0.466628)\n  outArr[6]=-0.301473   (sum=0.165155)\n  outArr[7]=-0.165155   (sum=0.000000)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "is_accepted": false, "score": -1, "last_activity_date": 1571269137, "creation_date": 1571269137, "answer_id": 58422987, "question_id": 58420853, "link": "https://stackoverflow.com/questions/58420853/how-to-generate-a-n-sized-random-float-array-that-sums-up-to-0-0/58422987#58422987", "title": "How to generate a n-sized random float array that sums up to 0.0?", "body": "<p>One option is to generate some samples and then scale their values around the average. In C++ it would be something like the following</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;random&gt;\n#include &lt;algorithm&gt;\n#include &lt;cmath&gt;\n\nint main()\n{\n    std::random_device rd;\n    std::seed_seq ss{rd(), rd(), rd(), rd()};\n    std::mt19937 gen{ss};\n\n    const int samples = 9;\n\n    // Generates the samples in [0, 2]\n    std::uniform_real_distribution dist(0.0, std::nextafter(2.0, 3.0));\n    std::vector&lt;double&gt; nums(samples);\n    double sum = 0.0;\n    for ( auto &amp; i : nums )\n    {\n        i = dist(gen);\n        sum += i;\n    }\n    double average = sum / samples;\n    double k = 1.0 / std::max(average, 2.0 - average);\n\n    // Transform the values (apart from the last) to meet the requirements\n    sum = 0.0;\n    for ( size_t i = 0; i &lt; nums.size() - 1; ++i )\n    {\n        nums[i] = (nums[i] - average) * k;\n        sum += nums[i];\n    };\n    // This trick (to ensure the needed precision) only works if the sum\n    // is always evaluated in the same order\n    nums.back() = 0.0 - sum;\n\n    sum = 0.0;\n    for ( size_t i = 0; i &lt; nums.size(); ++i )\n    {\n        sum += nums[i];\n        std::cout &lt;&lt; std::setw(10) &lt;&lt; std::fixed &lt;&lt; nums[i] &lt;&lt; '\\n';\n    }\n    if (sum != 0.0)\n        std::cout &lt;&lt; \"Failed.\\n\";\n}\n</code></pre>\n\n<p>Testable <a href=\"https://wandbox.org/permlink/tpXlmy6DHLKjzDZs\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 6053, "user_id": 11336762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hGPr6.jpg?s=128&g=1", "display_name": "Roberto Caboni", "link": "https://stackoverflow.com/users/11336762/roberto-caboni"}, "edited": false, "score": 0, "creation_date": 1571731165, "post_id": 58494458, "comment_id": 103327964, "body": "It seems that your solution generates values in a compressed range (near to 0). It&#39;s actually the opposite compared to my solution in which, I think due to random generator that always picks a first value near to the lower limit, oscillates near both limits."}], "tags": [], "owner": {"reputation": 81, "user_id": 10509291, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98xB7.jpg?s=128&g=1", "display_name": "Thales Carl", "link": "https://stackoverflow.com/users/10509291/thales-carl"}, "is_accepted": false, "score": 2, "last_activity_date": 1571693860, "creation_date": 1571693860, "answer_id": 58494458, "question_id": 58420853, "link": "https://stackoverflow.com/questions/58420853/how-to-generate-a-n-sized-random-float-array-that-sums-up-to-0-0/58494458#58494458", "title": "How to generate a n-sized random float array that sums up to 0.0?", "body": "<p>Thank you guys again for the help.</p>\n\n<p>So, based on the idea of <a href=\"https://stackoverflow.com/users/11937721/cryostasys\">Cryostasys</a> I developed the following C code to solve my problem:</p>\n\n<pre><code>#include &lt;stdio.h&gt;      /* printf, scanf, puts, NULL */\n#include &lt;stdlib.h&gt;     /* srand, rand */\n#include &lt;time.h&gt;       /* time */\n#include &lt;math.h&gt;\n\nint main()\n{\n    int arraySize = 10; //input value \n    double createdArray[arraySize]; //output value\n\n    double randomPositiveVector[arraySize];\n    double randomNegativeVector[arraySize];\n    double positiveSum = 0.;\n    double negativeSum = 0.;\n\n    srand(time(NULL)); //seed for random generation\n\n    for(int i = 0; i &lt; arraySize; ++i)\n    {\n        double randomNumber = -1.+2.*rand()/((double) RAND_MAX); //random in [-1.0,1.0]\n        printf(\"%f\\n\",randomNumber);\n        if(randomNumber &gt;=0)\n        {\n            randomPositiveVector[i] = randomNumber;\n            positiveSum += randomNumber;\n        }\n        else\n        {\n            randomNegativeVector[i] = randomNumber;\n            negativeSum += randomNumber;\n        }\n    }\n    if(positiveSum == 0. || negativeSum == 0.) printf(\"ERROR\\n\");\n\n    double positiveCoefficient =  1.0/positiveSum;\n    double negativeCoefficient = -1.0/negativeSum;\n    for(int i = 0; i &lt; arraySize; ++i)\n    {\n        randomPositiveVector[i] = positiveCoefficient * randomPositiveVector[i];\n        randomNegativeVector[i] = negativeCoefficient * randomNegativeVector[i];\n        if(fabs(randomPositiveVector[i]) &gt; 1e-6) //near to zero \n        {\n            createdArray[i] = randomPositiveVector[i];\n        }\n        else\n        {\n            createdArray[i] = randomNegativeVector[i];\n        }\n    }\n\n    for(int i = 0; i &lt; arraySize; ++i)\n    {\n        printf(\"createdArray[%d] = %9f\\n\",i,createdArray[i]);\n\n    }\n\n    return(0);\n}\n</code></pre>\n\n<p>Please note that the <em>randomness</em> of the values generated is decreased, as mentioned in the comments of the question. Also, the kind of random distribution is determined by the function that you use to generate the randomNumber above. In this case, I've used <code>rand()</code> from <code>stdlib.h</code> which is based on giving a seed to the function and it is going to generate a pseudo-random number. You could use a different option, for instance, <code>drand48()</code> from <code>stdlib.h</code> as well. </p>\n\n<p>Nevertheless, it is required that at least one positive and one negative value is generated in order to this code work. One verification step was added to the code, and if it reaches this condition one should run again the code or do something about. </p>\n\n<p>Output example (arraySize = 10):</p>\n\n<pre><code>createdArray[0] = -0.013824\ncreatedArray[1] =  0.359639\ncreatedArray[2] = -0.005851\ncreatedArray[3] =  0.126829\ncreatedArray[4] = -0.334745\ncreatedArray[5] = -0.473096\ncreatedArray[6] = -0.172484\ncreatedArray[7] =  0.249523\ncreatedArray[8] =  0.262370\ncreatedArray[9] =  0.001640\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 10509291, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98xB7.jpg?s=128&g=1", "display_name": "Thales Carl", "link": "https://stackoverflow.com/users/10509291/thales-carl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 749, "favorite_count": 1, "answer_count": 3, "score": 6, "last_activity_date": 1571693860, "creation_date": 1571255886, "last_edit_date": 1571267071, "question_id": 58420853, "link": "https://stackoverflow.com/questions/58420853/how-to-generate-a-n-sized-random-float-array-that-sums-up-to-0-0", "title": "How to generate a n-sized random float array that sums up to 0.0?", "body": "<p>Consider that I need a n-sized vector where each element is defined between [-1,1]. The element a[i] is a float generated by -1 + 2*rand(). I need a elegant way to ensure that the sum of the  elements of my array is equal to zero.</p>\n\n<p>I've found two possible solutions: </p>\n\n<p>The first one is this matlab function <a href=\"https://www.mathworks.com/matlabcentral/fileexchange/9700-random-vectors-with-fixed-sum\" rel=\"nofollow noreferrer\">https://www.mathworks.com/matlabcentral/fileexchange/9700-random-vectors-with-fixed-sum</a>. It has also a implementation in R, however it is too much work to implement it on C, since this function is used for a 2d array.</p>\n\n<p>The second one is provided in this thread here: <a href=\"https://stackoverflow.com/questions/24043060/generate-random-values-with-fixed-sum-in-c/24043223#24043223\">Generate random values with fixed sum in C++</a>. Essentially, the idea is to generate n numbers with a normal distribution then normalize them to with my sum. (I have implemented it using python bellow) for a vector with sum up to 1.0. It works for every sum value except for zero.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import random as rd\n\nmySum = 1;\nrandomVector = []\nrandomSum = 0\n\nfor i in range(7):\n    randomNumber = -1 + 2*rd.random()\n    randomVector.append(randomNumber)\n    randomSum  += randomNumber\n\ncoef = mySum/randomSum\nmyNewList = [j * coef for j in randomVector]\nnewsum = sum(myNewList)\n</code></pre>\n\n<p>So, is there a way to do that using C or C++? If you know a already implemented function it would be awesome. Thanks.</p>\n"}, {"tags": ["c", "windows", "kernel", "driver", "minifilter"], "answers": [{"tags": [], "owner": {"reputation": 181, "user_id": 11113972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/353bcb8cb129daab210802a273959ff9?s=128&d=identicon&r=PG&f=1", "display_name": "Eugene Muzychenko", "link": "https://stackoverflow.com/users/11113972/eugene-muzychenko"}, "is_accepted": true, "score": 3, "last_activity_date": 1571508881, "creation_date": 1571508881, "answer_id": 58466693, "question_id": 58420338, "link": "https://stackoverflow.com/questions/58420338/intercept-process-access-using-a-windows-minifilter-driver/58466693#58466693", "title": "Intercept Process Access using a Windows MiniFilter Driver", "body": "<p>Since the minifilter is a kernel module, you can use any routine exported by kernel/HAL or other kernel modules. For example, PsSetCreateProcessNotifyRoutine.</p>\n"}], "owner": {"reputation": 359, "user_id": 2409894, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/vmxZ8.gif?s=128&g=1", "display_name": "Flavio", "link": "https://stackoverflow.com/users/2409894/flavio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 353, "favorite_count": 2, "accepted_answer_id": 58466693, "answer_count": 1, "score": 2, "last_activity_date": 1571508881, "creation_date": 1571253606, "question_id": 58420338, "link": "https://stackoverflow.com/questions/58420338/intercept-process-access-using-a-windows-minifilter-driver", "title": "Intercept Process Access using a Windows MiniFilter Driver", "body": "<p>I am developing a security application which should monitor activity by any process.</p>\n\n<p>I successfully managed to intercept file access by installing a MiniFilter driver, thanks to the <a href=\"https://github.com/microsoft/Windows-driver-samples/tree/master/filesys/miniFilter/scanner\" rel=\"nofollow noreferrer\">MiniFilter sample provided by Microsoft on GitHub</a>.</p>\n\n<p>However, I did not find any documentation about how to intercept <strong>process</strong> creation/termination using a Minifilter.</p>\n\n<p>I would like to intercept new process creation by any parent process (which could use functions like CreateProcess, ShellExecute etc.).</p>\n\n<p>I would also like to intercept process termination signals (sent by APIs like <a href=\"https://docs.microsoft.com/en-us/windows/win32/api/processthreadsapi/nf-processthreadsapi-terminateprocess\" rel=\"nofollow noreferrer\">TerminateProcess</a>) to avoid my security program process to be killed by potential malware. </p>\n\n<p>At the moment I setup a callback function in my minifilter driver which successfully intercepts file I/O operations, as instructed by the Microsoft example:</p>\n\n<pre><code>FLT_POSTOP_CALLBACK_STATUS ScannerPostCreate (\n    _Inout_ PFLT_CALLBACK_DATA CallbackData,\n    _In_ PCFLT_RELATED_OBJECTS FltObjects,\n    _In_opt_ PVOID CompletionContext,\n    _In_ FLT_POST_OPERATION_FLAGS Flags\n    )\n</code></pre>\n\n<p>My question is, can I use the same callback function to intercept process access?\nOr, do I need to setup a different callback function, or use an entirely different method?</p>\n"}, {"tags": ["c", "binary-search-tree"], "comments": [{"owner": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "edited": false, "score": 2, "creation_date": 1571253112, "post_id": 58420187, "comment_id": 103182650, "body": "Please fix your code. It&#39;s unreadable."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1571253781, "post_id": 58420187, "comment_id": 103182925, "body": "Tip: Standard terminology is &quot;enqueue&quot; and &quot;dequeue&quot;, not &quot;insertq&quot; and &quot;pop&quot;"}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1571253831, "post_id": 58420187, "comment_id": 103182950, "body": "Tip: Both the &quot;then&quot; and the &quot;else&quot; part of the <code>if</code> statement in <code>inserq</code> are the same. No need for an <code>if</code> statement."}], "answers": [{"tags": [], "owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 0, "last_activity_date": 1571254503, "creation_date": 1571254503, "answer_id": 58420549, "question_id": 58420187, "link": "https://stackoverflow.com/questions/58420187/level-order-traversal-of-binary-search-tree/58420549#58420549", "title": "Level order traversal of binary search tree", "body": "<p>Right now, you insert at the head, and you remove at the head. This means you have a stack (last in, first out), not a queue (first in, first out).</p>\n\n<p>Add a <code>tail</code> pointer, and remove from the opposite end that you add. If you add at the head, remove from the tail, or vice-versa.</p>\n"}], "owner": {"reputation": 65, "user_id": 10075560, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dKfuA.jpg?s=128&g=1", "display_name": "Shashank Kumar Pandey", "link": "https://stackoverflow.com/users/10075560/shashank-kumar-pandey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 58420549, "answer_count": 1, "score": 0, "last_activity_date": 1571254503, "creation_date": 1571252994, "last_edit_date": 1571253524, "question_id": 58420187, "link": "https://stackoverflow.com/questions/58420187/level-order-traversal-of-binary-search-tree", "title": "Level order traversal of binary search tree", "body": "<p>I was trying to implement level order traversal of binary search tree using linked list implementation of queue.</p>\n\n<p>I have checked the binary search tree implementation and it is fine.\nThe linked list implementation of queue is also correct.\nHere i am trying to visit the node and enqueue its children to the queue.\nand then use the pop function to actually visit the node.</p>\n\n<p>This is being done via a recursive call in the end.\nWhen i run the following code i am getting the output in different order.</p>\n\n<pre><code>// Trees\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n//Node declaration for binary search tree\n\nstruct node \n{\nint data;\nstruct node *left;\nstruct node *right;\n};\n\n\n// LINKED LIST BASED IMPLEMENTATION OF QUEUE\n\nstruct qnode \n{\nstruct node *data;\nstruct qnode *next;\n};\n\n\n\nstruct qnode *head = NULL;\n\n\nvoid insertq (struct node *);   //This function enqueue node in the queue.\n\nstruct node *pop ();        // dequeue  function\n\n//The function declaration for level order traversal.\n\nvoid leorder ();\n\n\n\nstruct node *make (int);\nstruct node *insert (struct node *, int);\n\n\n\nvoid \nmain () \n{\n\n\n\nstruct node *root = NULL;\n\n\nroot = insert (root, 10);\n\n\nroot = insert (root, 9);\n\n\nroot = insert (root, 8);\n\n\nroot = insert (root, 5);\n\n\nroot = insert (root, 2);\n\n\nroot = insert (root, 4);\n\n\nroot = insert (root, 3);\n\n\nroot = insert (root, 6);\n\n\nroot = insert (root, 7);\n\n\nroot = insert (root, 1);\n\n\ninsertq (root);     //Insertion of first root.\n\n\nleorder ();\n\n\n} \n\n//The program that makes nodes for the bst.\n\nstruct node* make(int x){\nstruct node* temp = (struct node*)malloc(sizeof(struct node));\ntemp-&gt;data = x;\ntemp-&gt;left = NULL;\ntemp-&gt;right = NULL;\n\nreturn temp;\n};\n\n\n\n\n//The node insertion function.(BINARY SEARCH TREE)\n\nstruct node* insert(struct node* root,int x){\nif(root == NULL){\n    root = make(x);\n}\nelse{\nif(x &lt;= root-&gt;data){\n    root-&gt;left = insert(root-&gt;left,x);\n}\n\nelse{\n    root-&gt;right = insert(root-&gt;right,x);\n}}\nreturn root;\n}\n\n\n\n\n// This function will insert node in the queue.\n\nvoid insertq(struct node* x){\n\nif(head == NULL){\nstruct qnode* temp = (struct qnode*)malloc(sizeof(struct qnode));\ntemp-&gt;data = x;\ntemp-&gt;next = NULL;\nhead = temp;\n}\nelse{\nstruct qnode* temp = (struct qnode*)malloc(sizeof(struct qnode));\ntemp-&gt;data = x;\ntemp-&gt;next = head;\nhead = temp;\n}\n}\n\nstruct node* pop(){\nstruct node* r;\nif(head == NULL){\n    return NULL;\n}\nelse{\n struct qnode* pt;\n pt = head;\n head = head-&gt;next;\n r = pt-&gt;data;\n free(pt);\n return r;\n}\n}\n\n\n// dequeue function.\n\nstruct node* pop(){\nstruct node* r;\nif(head == NULL){\n    return NULL;\n}\nelse{\n struct qnode* pt;\n pt = head;\n head = head-&gt;next;\n r = pt-&gt;data;\n free(pt);\n return r;\n}\n}\n\n\n\n// Function to print tree in level order.\n\nvoid leorder(){\nstruct node* popped;\npopped = pop();\nprintf(\"%d \",popped-&gt;data);\nif(popped != NULL){\n    if(popped-&gt;left != NULL){\n        insertq(popped-&gt;left);\n    }\n\n    if(popped-&gt;right != NULL){\n        insertq(popped-&gt;right);\n    }\n    leorder();\n}\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "void-pointers"], "comments": [{"owner": {"reputation": 4859, "user_id": 7431860, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/P6Jko.jpg?s=128&g=1", "display_name": "Nick Reed", "link": "https://stackoverflow.com/users/7431860/nick-reed"}, "edited": false, "score": 2, "creation_date": 1571250897, "post_id": 58419675, "comment_id": 103181680, "body": "Please edit your question to include the exact error you&#39;re getting."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1571250982, "post_id": 58419675, "comment_id": 103181721, "body": "<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please. This snippet does not contain all of the required information."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1571250998, "post_id": 58419675, "comment_id": 103181733, "body": "Show the declaration of <code>element</code> and any other structures it refers to."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1571252411, "post_id": 58419675, "comment_id": 103182329, "body": "Please make an effort and format your code properly."}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1571254081, "post_id": 58419675, "comment_id": 103183065, "body": "It sounds like <code>Head-&gt;pData</code> is not a pointer.  It would be clear if you showed the definition of <code>struct element</code>."}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1571254138, "post_id": 58419675, "comment_id": 103183089, "body": "I would speculate you want <code>Head-&gt;pData.oTimeCreated</code>.  But that is pure speculation."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1571299944, "post_id": 58419675, "comment_id": 103196845, "body": "<code>void</code> clearly is no struct or union and does not have any member <code>oTimeCreated</code>. You need to cast to the real type behing that pointer."}], "answers": [{"tags": [], "owner": {"reputation": 91978, "user_id": 387076, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/cFyP6.jpg?s=128&g=1", "display_name": "Gilles &#39;SO- stop being evil&#39;", "link": "https://stackoverflow.com/users/387076/gilles-so-stop-being-evil"}, "is_accepted": true, "score": 0, "last_activity_date": 1571351014, "creation_date": 1571351014, "answer_id": 58441473, "question_id": 58419675, "link": "https://stackoverflow.com/questions/58419675/expression-must-have-pointer-to-struct-or-union-type/58441473#58441473", "title": "Expression must have pointer-to-struct-or-union type?", "body": "<p>The error is not about <code>Head</code>, it's about <code>Head-&gt;pData</code>. Pay close attention to the error message. With some compilers the error message clearly identifies a line but not the exact location within the line; if your compiler's errors aren't clear, you can get a more precise error location if you add line breaks and create more intermediate variables.</p>\n\n<pre><code>void *data = Head-&gt;pData;\nstruct timeval time_created = data-&gt;oTimeCreated;\nint responseTime = getDifferenceInMilliSeconds(time_created, start);\n</code></pre>\n\n<p>Note that to write the code this way, I had to give types to the intermediate expressions <code>Head-&gt;pData</code> and <code>data-&gt;oTimeCreated</code>. To figure out what types to give, I looked at the definitions of <code>struct element</code> and <code>struct process</code>.</p>\n\n<p>In particular, the type of <code>Head-&gt;pData</code> is <code>void*</code>. That's a pointer to an unspecified type. You can't dereference it, and in particular <code>data-&gt;oTimeCreated</code> results in a compilation error because <code>data</code> is not a pointer to a struct or a union. An unspecified type is not a struct or a union.</p>\n\n<p>C doesn't have <a href=\"https://en.wikipedia.org/wiki/Polymorphism_(computer_science)\" rel=\"nofollow noreferrer\">polymorphism</a> baked into the language. It allows polymorphism, via void pointers, but like with many things in C, you need to do some of the job yourself. C does not keep track of what the actual type of an object is if you only have a void pointer to it. You have to specify when you want to dereference the pointer, and you need to get it right, otherwise <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">anything can happen</a>.</p>\n\n<p>If you're sure that what you put in the list is a pointer to a <code>struct process</code> that's still valid, then convert or cast the void pointer to a pointer to a <code>struct process</code>. Here's an idiomatic way to do it:</p>\n\n<pre><code>struct process *head_process = Head-&gt;pData;\nrunPreemptiveJob(head_process, &amp;start, &amp;end);\nint responseTime = getDifferenceInMilliSeconds(head_process-&gt;oTimeCreated, start);\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 12228429, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDaED_hwEFkxNqSr4VwOs8x81SG_IfQSYkRYaiO_g=k-s128", "display_name": "Sunil Kothari", "link": "https://stackoverflow.com/users/12228429/sunil-kothari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1415, "favorite_count": 0, "accepted_answer_id": 58441473, "answer_count": 1, "score": 1, "last_activity_date": 1571351030, "creation_date": 1571250844, "last_edit_date": 1571351030, "question_id": 58419675, "link": "https://stackoverflow.com/questions/58419675/expression-must-have-pointer-to-struct-or-union-type", "title": "Expression must have pointer-to-struct-or-union type?", "body": "<p>Working with a linked list to extract data from the head of the list. The data is already set within the Head, but when I try to access it I get that error. Think there is an issue with pointers but I cannot work it out. </p>\n\n<pre><code>int main(int argc, char **argv)\n{\n    int i;\n\n    struct timeval start, end;\n    struct element *Head = NULL;\n    struct element *Tail = NULL;\n\n    //creating job queue\n    for (i = 0; i &lt; NUMBER_OF_JOBS; i++) {\n        addLast(generateProcess(), &amp;Head, &amp;Tail);\n    }\n\n    //go through job queue running processes and removing processes\n    while (Head) {\n        runPreemptiveJob(Head-&gt;pData, &amp;start, &amp;end);\n\n        int responseTime = getDifferenceInMilliSeconds(Head-&gt;pData-&gt;oTimeCreated, start);\n\n        printf(\"Response Time is: %d\\n\", responseTime);\n\n        Head = Head-&gt;pNext;\n    }\n}\n</code></pre>\n\n<p>I am expecting to be able to use the data in oTimeCreated by accessing it through the head element, which has a structure in its data field.</p>\n\n<p>The error is when calling the getDifferenceInMilliSeconds function: I get an error on the Head which says \"Expression must have pointer-to-struct-or-union type. </p>\n\n<p>Element is shown here:</p>\n\n<pre><code>struct element\n{\n    void * pData;\n    struct element * pNext;\n};\n</code></pre>\n\n<p>generateProcess() returns a struct process, as defined below:</p>\n\n<pre><code>struct process\n{\n    int iProcessId;\n    struct timeval oTimeCreated;\n    struct timeval oMostRecentTime; \n    int iInitialBurstTime;\n    int iPreviousBurstTime;\n    int iRemainingBurstTime;\n    int iPriority;\n};\n</code></pre>\n\n<p>In the main function, generateProcess() returns a pointer to a process. This pointer is put into the linked list, and so I am trying to access the oTimeCreated variable which is part of that struct which is the head of the list. </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 1, "creation_date": 1571250695, "post_id": 58419613, "comment_id": 103181564, "body": "Why can&#39;t you add more items?  What happens when you try?  What sequence of inputs did you provide that led up to the problem?"}, {"owner": {"reputation": 1340, "user_id": 7218062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0e0d5a2d3c49c93f1aafd67adaaca59?s=128&d=identicon&r=PG&f=1", "display_name": "jmq", "link": "https://stackoverflow.com/users/7218062/jmq"}, "edited": false, "score": 1, "creation_date": 1571250751, "post_id": 58419613, "comment_id": 103181594, "body": "Can you add the code for the Push() function to the question?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10568777"}, "reply_to_user": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1571250812, "post_id": 58419613, "comment_id": 103181633, "body": "@ScottHunter first, I use my push function. I input 1, 2, 3 ,4 ,5 in order and I can see the list with Display, but after I use pop, I just cant add again. It just doesnt add new items."}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 1, "creation_date": 1571250970, "post_id": 58419613, "comment_id": 103181711, "body": "Can you <code>Display</code> after <code>Pop</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10568777"}, "reply_to_user": {"reputation": 1340, "user_id": 7218062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0e0d5a2d3c49c93f1aafd67adaaca59?s=128&d=identicon&r=PG&f=1", "display_name": "jmq", "link": "https://stackoverflow.com/users/7218062/jmq"}, "edited": false, "score": 0, "creation_date": 1571251026, "post_id": 58419613, "comment_id": 103181748, "body": "@jmq Here you go, first I thought I was losing the first pointer of the list. But I couldn&#39;t figure it out completely"}], "answers": [{"tags": [], "owner": {"reputation": 1340, "user_id": 7218062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0e0d5a2d3c49c93f1aafd67adaaca59?s=128&d=identicon&r=PG&f=1", "display_name": "jmq", "link": "https://stackoverflow.com/users/7218062/jmq"}, "is_accepted": true, "score": 0, "last_activity_date": 1571251442, "last_edit_date": 1571251442, "creation_date": 1571251134, "answer_id": 58419743, "question_id": 58419613, "link": "https://stackoverflow.com/questions/58419613/i-cant-add-item-after-i-use-my-pop-function-in-my-linked-list/58419743#58419743", "title": "I cant add item after I use my pop() function in my Linked List", "body": "<p>In Pop() you never update last, so it still points to the deleted node.  When you push again you are linking the deleted node to the new node.</p>\n\n<pre><code>void Pop() {\n    node* walk = first;\n    node* deleted = NULL;\n\n    while (walk-&gt;next-&gt;next != NULL) {\n        walk = walk-&gt;next;\n    }\n\n    deleted = walk-&gt;next;\n    free(deleted);\n    walk-&gt;next = NULL;\n    last = walk;  // &lt;-- add this\n}\n</code></pre>\n\n<p>Also, Pop() will fail (and probably crash) if you only have one node in the list because walk->next->next will dereference a NULL pointer.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10568777"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 58419743, "answer_count": 1, "score": -2, "last_activity_date": 1572136440, "creation_date": 1571250574, "last_edit_date": 1572136440, "question_id": 58419613, "link": "https://stackoverflow.com/questions/58419613/i-cant-add-item-after-i-use-my-pop-function-in-my-linked-list", "title": "I cant add item after I use my pop() function in my Linked List", "body": "<p>Why the program doesn't add after pops the last item? There is something missing with pointers on these 2 functions</p>\n\n<p>First, I have defined a Node struct and named it <code>node</code>. Then created 2 pointers to point the first and the last one.</p>\n\n<pre><code>typedef struct Node {\n    int data;\n    struct Node* next;\n} node;\n\n\nnode* first = NULL, * last = NULL;\n</code></pre>\n\n<p>Here, Pop function. I have created a walk pointer. If the first node is going to be deleted, first will be pointed to NULL. Else, it will iterate to the last node and deallocates it.</p>\n\n<pre><code>void Pop() {\n\n    if (first == NULL) {\n        printf(\"\\n\\nLIST IS EMPTY\\n\\n\");\n    }\n    else if (first-&gt;next == NULL) {\n        node* temp = (node*)malloc(sizeof(node));\n\n        temp = first;\n        free(temp);\n        first = NULL;\n    }\n    else {\n        node* walk = first;\n\n        while (walk-&gt;next-&gt;next != NULL) {\n            walk = walk-&gt;next;\n        }\n\n        free(walk-&gt;next);\n\n        walk-&gt;next = NULL;\n\n    }\n\n}\n</code></pre>\n\n<p>Push function will create a node and add it to the list. If the list is empty, it will be pointed out by <code>first</code> and <code>last</code>, else it will be connected to the last node then it will become the <code>last</code> node.</p>\n\n<pre><code>void Push(int data) {\n    node* temp = (node*)malloc(sizeof(node));\n\n    temp-&gt;data = data;\n\n    if (first == NULL) {\n        first = temp;\n        temp-&gt;next = NULL;\n        last = first;\n    }\n    else {\n        last-&gt;next = temp;\n        last = last-&gt;next;\n        last-&gt;next = NULL;\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "adc", "stm32f4"], "comments": [{"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 1, "creation_date": 1571303452, "post_id": 58419485, "comment_id": 103198807, "body": "Does the ADC run in continuous conversion mode (or however it might be called)?  Else it runs in single conversion mode and you need to start it every time before polling for the end of the conversion."}, {"owner": {"reputation": 105, "user_id": 10718315, "user_type": "registered", "profile_image": "https://graph.facebook.com/1997168577032526/picture?type=large", "display_name": "Felipe Mateus", "link": "https://stackoverflow.com/users/10718315/felipe-mateus"}, "reply_to_user": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 0, "creation_date": 1571320806, "post_id": 58419485, "comment_id": 103209203, "body": "yes, I did this in the CubeMX, but even so I need to put the start of ADC inside the infinit loop and a Stop command to make it work."}, {"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 0, "creation_date": 1571341068, "post_id": 58419485, "comment_id": 103218955, "body": "OK, if you have a solution now, please write an answer and mark it to help others looking for it."}], "answers": [{"tags": [], "owner": {"reputation": 922, "user_id": 8653951, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LRbxO.jpg?s=128&g=1", "display_name": "theSealion", "link": "https://stackoverflow.com/users/8653951/thesealion"}, "is_accepted": true, "score": 1, "last_activity_date": 1571648044, "creation_date": 1571648044, "answer_id": 58482857, "question_id": 58419485, "link": "https://stackoverflow.com/questions/58419485/how-to-read-and-show-adc-value-of-stm32f4-using-hal-library/58482857#58482857", "title": "How to Read and Show ADC value of STM32F4 using HAL Library", "body": "<p>As an addition to the answer in the comments:</p>\n\n<p>The call to <code>HAL_ADC_PollForConversion(&amp;hadc1, 1000);</code> explicitly stops the conversion, even if continuous conversion is activated.</p>\n\n<p>If you you want/must wait for each conversion to get finished, you must restart the ADC with <code>HAL_ADC_Start(&amp;hadc1);</code> after waiting (and reading) for the result.</p>\n"}], "owner": {"reputation": 105, "user_id": 10718315, "user_type": "registered", "profile_image": "https://graph.facebook.com/1997168577032526/picture?type=large", "display_name": "Felipe Mateus", "link": "https://stackoverflow.com/users/10718315/felipe-mateus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 901, "favorite_count": 0, "accepted_answer_id": 58482857, "answer_count": 1, "score": 0, "last_activity_date": 1571657120, "creation_date": 1571250060, "last_edit_date": 1571657120, "question_id": 58419485, "link": "https://stackoverflow.com/questions/58419485/how-to-read-and-show-adc-value-of-stm32f4-using-hal-library", "title": "How to Read and Show ADC value of STM32F4 using HAL Library", "body": "<p>I have a code generated by STMCubeMX where I use the portal PA0 like ADC Input. I'm trying to read this input using HAL Library of STM in C and transmit the value to USB port using CDC. See the main, where i try to get the data and show this:</p>\n\n<pre><code>#include \"main.h\"\n#include \"usb_device.h\"\n#include \"usbd_cdc_if.h\"\n\nADC_HandleTypeDef hadc1;\nvoid SystemClock_Config(void);\nstatic void MX_ADC1_Init(void);\n\nint main(void)\n{\n    uint8_t buffer[8];\n\n    HAL_Init();\n    SystemClock_Config();\n    MX_USB_DEVICE_Init();\n    MX_ADC1_Init();\n\n    HAL_ADC_Start(&amp;hadc1);\n\n    while (1)\n    {\n        HAL_GPIO_TogglePin(GPIOC,GPIO_PIN_14);\n        HAL_ADC_PollForConversion(&amp;hadc1, 1000);\n        sprintf((char*)buffer,\"%d\\n\",(int)HAL_ADC_GetValue(&amp;hadc1));\n        //HAL_Delay(500);\n        CDC_Transmit_FS(buffer,8);\n    }\n}\n</code></pre>\n\n<p>Debugging the code I saw that function \"HAL_ADC_PollForConversion(&amp;hadc1, 1000)\" never returns \"HAL_OK\".\nIn the terminal, a single value appears.</p>\n\n<p>UPDATE</p>\n\n<p>Well, for the code works I have to put the \"Start\" of ADC inside of infinit loop and a call of \"Stop\" on the final of loop.\nPs: The Adc is running on continuous conversion mode.</p>\n\n<pre><code>int main(void)\n{\n    uint8_t buffer[8];\n\n    HAL_Init();\n    SystemClock_Config();\n    MX_USB_DEVICE_Init();\n    MX_ADC1_Init();\n\n    while (1)\n    {\n        HAL_ADC_Start(&amp;hadc1);\n        HAL_GPIO_TogglePin(GPIOC,GPIO_PIN_14);\n        HAL_ADC_PollForConversion(&amp;hadc1, 1000);\n        sprintf((char*)buffer,\"%d\\n\",(int)HAL_ADC_GetValue(&amp;hadc1));\n        //HAL_Delay(500);\n        CDC_Transmit_FS(buffer,8);\n        HAL_ADC_Stop(&amp;hadc1);\n}\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c", "pointers", "data-structures", "linked-list", "singly-linked-list"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 1, "creation_date": 1571249386, "post_id": 58419282, "comment_id": 103180999, "body": "I didn&#39;t look at all the code, but immediately saw this: <code>if(head==NULL) { head-&gt;data=newnode-&gt;data; }</code>. You are de-referencing a <code>NULL</code> pointer. You can&#39;t do that."}, {"owner": {"reputation": 21, "user_id": 11958531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fba6d4f62cfdfef933c7febf736100ea?s=128&d=identicon&r=PG&f=1", "display_name": "Syed Umair", "link": "https://stackoverflow.com/users/11958531/syed-umair"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1571249542, "post_id": 58419282, "comment_id": 103181063, "body": "How can I edit the code without deferencing  a NULL pointer"}, {"owner": {"reputation": 2445, "user_id": 4390699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4fe7d756a92a20b8b49b05cc0f1bb628?s=128&d=identicon&r=PG", "display_name": "Raman", "link": "https://stackoverflow.com/users/4390699/raman"}, "edited": false, "score": 0, "creation_date": 1571249652, "post_id": 58419282, "comment_id": 103181112, "body": "Just advice, try debugging tools for such errors (eg. Valgrind)."}, {"owner": {"reputation": 1340, "user_id": 7218062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0e0d5a2d3c49c93f1aafd67adaaca59?s=128&d=identicon&r=PG&f=1", "display_name": "jmq", "link": "https://stackoverflow.com/users/7218062/jmq"}, "edited": false, "score": 0, "creation_date": 1571249903, "post_id": 58419282, "comment_id": 103181224, "body": "Please clean up your warnings first.  You have some lines like &quot;head==NULL;&quot; which is not what you want.  This will fix some of your issues."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1571250031, "post_id": 58419282, "comment_id": 103181274, "body": "You probably want: <code>if (head == NULL) { head = newnode;}</code>"}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1571250454, "post_id": 58419282, "comment_id": 103181454, "body": "Also, in the future, if you want us to take the time to check your code then the least you can do is properly format it. There are online tools to help with this. <a href=\"http://prettyprinter.de/index.php\" rel=\"nofollow noreferrer\">prettyprinter</a> is one example."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1571250511, "post_id": 58419282, "comment_id": 103181474, "body": "You might also want to look up &quot;c switch case fall through&quot;."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1571250794, "post_id": 58419282, "comment_id": 103181625, "body": "Also, you don&#39;t allocate any memory for the nodes. <code>node newnode;...scanf(&quot;%d&quot;,&amp;newnode-&gt;data);</code> You are using an uninitialized pointer. See <a href=\"https://en.cppreference.com/w/c/memory/malloc\" rel=\"nofollow noreferrer\"><code>malloc()</code></a> and <a href=\"https://en.cppreference.com/w/c/memory/free\" rel=\"nofollow noreferrer\"><code>free()</code></a>"}, {"owner": {"reputation": 145, "user_id": 1472660, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/59614adb908eafe11cd1413546e9c6ea?s=128&d=identicon&r=PG", "display_name": "Andy Foster", "link": "https://stackoverflow.com/users/1472660/andy-foster"}, "edited": false, "score": 0, "creation_date": 1571251426, "post_id": 58419282, "comment_id": 103181927, "body": "<code>while(temp-&gt;next!=NULL &amp;&amp; count&lt;position);      {</code> is a problem"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 11958531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fba6d4f62cfdfef933c7febf736100ea?s=128&d=identicon&r=PG&f=1", "display_name": "Syed Umair", "link": "https://stackoverflow.com/users/11958531/syed-umair"}, "edited": false, "score": 0, "creation_date": 1571279910, "post_id": 58422116, "comment_id": 103190243, "body": "Thank you so much pchelper for taking your time out and helping me, I will surely implement everything and check if my code runs smoothly."}], "tags": [], "owner": {"reputation": 9, "user_id": 11839113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65571710c6392b2a23fc448d84f27a44?s=128&d=identicon&r=PG&f=1", "display_name": "pchelper4", "link": "https://stackoverflow.com/users/11839113/pchelper4"}, "is_accepted": true, "score": 0, "last_activity_date": 1571262922, "last_edit_date": 1571262922, "creation_date": 1571262579, "answer_id": 58422116, "question_id": 58419282, "link": "https://stackoverflow.com/questions/58419282/linked-list-operations-in-c-segmentation-error-core-dumped/58422116#58422116", "title": "Linked List Operations In C (Segmentation Error Core Dumped!)", "body": "<p>Off the cuff, your first function you may want to pass the head pointer as an argument to the function or have the return value be a node* so it is more versatile. Neither the head nor the temp were initialized which happens three ways: You assign an existing variable address to the pointer, you make a malloc call to assign storage, and the third way I cant remember, check out the resources below. They will help! You have allocated a pointer variable by declaring a local and global node*, they are compatible however you have not initialized either of them with a reference to another variable; you have simply declared them. A pointer must be initialized with a reference assignment to another address either from malloc, &amp;addressof, etc. Null simply marks them as bad pointers without throwing a segfault when tested. Think of it like a file name without any storage allocated...You can't save to it but its there. Since neither are initialized, when you try to assign to them, you get a memory error because no storage has been set aside yet. Which means...segfault! There are three components to a pointer superficially: [Pointer address for the alias/named region of storage/object|memory block reserved to hold whatever size you declare you need, in this case, you set that aside as such: head = malloc(sizeof(struct node *)), this allocates most likely an 8 byte address space which points a suitable region of storage->|*dereferenced value of the address the storage is reffering to]\nTry running gdb and setting a break on each of the two pointers in your first function. I hope that helps and hope I haven't given you bad advice... </p>\n\n<p>I struggled with these too quite a bit, here are some good resources that will be worth your time:</p>\n\n<p>Stanfor CS Library\n-CONCISELY covers pointers, linked lists, binary trees, debugging to find out exactly what line of code is generating your error;\n<a href=\"http://cslibrary.stanford.edu/\" rel=\"nofollow noreferrer\">http://cslibrary.stanford.edu/</a></p>\n"}], "owner": {"reputation": 21, "user_id": 11958531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fba6d4f62cfdfef933c7febf736100ea?s=128&d=identicon&r=PG&f=1", "display_name": "Syed Umair", "link": "https://stackoverflow.com/users/11958531/syed-umair"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 58422116, "answer_count": 1, "score": 1, "last_activity_date": 1571262922, "creation_date": 1571249227, "last_edit_date": 1571259053, "question_id": 58419282, "link": "https://stackoverflow.com/questions/58419282/linked-list-operations-in-c-segmentation-error-core-dumped", "title": "Linked List Operations In C (Segmentation Error Core Dumped!)", "body": "<p>I have been trying to implement Linked List operations in c from the past few days, but I keep stumbling upon the same error again and again which says \"Segmentation Error Core Dumped\". I'm not able to figure out what part of the logic is going wrong. It is strange as after resolving all the warnings and Errors the code just doesn't execute. It would also be great if someone points out to me if I am using a linked list and pointers correctly. My code seems to be huge to post but I just couldn't shorten it out. And again, I would be grateful to all those who can help me out and make this code more readable and reduce the ambiguities. </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nstruct nodes \n{\n    int data;\n    struct nodes* next; \n};\ntypedef struct nodes* node;\nnode head=NULL;\nvoid InsertFront()\n{\n    node temp=NULL;\n    printf(\"Enter The Value Of Node\\n\");\n    scanf(\"%d\",&amp;temp-&gt;data);\n    if(head==NULL)\n    {\n        head-&gt;data=temp-&gt;data;     \n    }\n    else\n    {\n        temp-&gt;next=head;\n        head=temp;\n    }\n}\n\nvoid InsertBack()\n{\n    node temp,newnode;\n    printf(\"Enter The Value Of Node\\n\");`enter code here`\n        scanf(\"%d\",&amp;newnode-&gt;data);\n    if(head==NULL)\n    {\n        head-&gt;data=newnode-&gt;data;\n    }\n    else\n    {\n        temp=head;\n        while(temp-&gt;next!=NULL)\n        {\n            temp=temp-&gt;next;\n        }\n        newnode=temp-&gt;next;\n    }    \n}\n\nvoid InsertPosition()\n{\n    node previousnode,newnode,nextnode,temp;\n    int position,count=0;\n    printf(\"Enter the Position At Which New Node Has To Be Inserted\");\n    scanf(\"%d\",&amp;position);\n    printf(\"Enter The Value Of Node\\n\");\n    scanf(\"%d\",&amp;newnode-&gt;data);\n    if(head==NULL)\n    {\n        head-&gt;data=newnode-&gt;data;\n    }\n    else\n    {\n        temp=head;\n        while(temp-&gt;next!=NULL &amp;&amp; count&lt;position);\n        {\n            previousnode=temp;\n            temp=temp-&gt;next;\n            count=count+1;\n            nextnode=temp;\n        }\n        previousnode-&gt;next=newnode;\n        newnode-&gt;next=nextnode;\n    }\n}\n\nvoid DeleteFront()\n{\n    node temp;\n    if(head-&gt;next==NULL)\n    {\n        head==NULL;\n    }\n    else\n    {\n        head-&gt;next=temp;\n        head=NULL;\n        head=temp;\n    }\n}\n\nvoid DeleteBack()\n{\n    node temp;\n    if(head-&gt;next==NULL)\n    {\n        head==NULL;\n    }\n    else\n    {\n        temp=head;\n        while(temp-&gt;next!=NULL)\n        {\n            temp=temp-&gt;next;\n        }\n        temp=NULL;\n    }\n}\n\nvoid DeletePosition()\n{\n    node temp,nextnode,deletenode;\n    int position,count=0;\n    printf(\"Enter The Position At Which The Node Has To Be Deleted\");\n    scanf(\"%d\",&amp;position);\n    if(head-&gt;next==NULL)\n    {\n        head==NULL;\n    }\n    else\n    {\n        temp=head;\n        while(temp-&gt;next!=NULL &amp;&amp; count!=position)\n        {\n            temp=temp-&gt;next;\n            count=count+1;\n        }\n        deletenode=temp-&gt;next;\n        nextnode=deletenode-&gt;next;\n        deletenode-&gt;next=NULL;\n        temp-&gt;next=nextnode;\n    }\n}\n\nvoid Display()\n{\n    node temp;\n    temp=head;\n    if(head==NULL)\n    {\n        printf(\"Linked List Seems To Be Empty\");\n    }\n    while(temp-&gt;next!=NULL)\n    {\n        printf(\"%d -&gt; \",temp-&gt;data);\n    }\n\n}\n\nint main()\n{ \n    int choice;\n    printf(\"\\nLINKED LIST OPERATIONS\\n\\n\");\n    printf(\"Select An Option\\n1 - Insert From Front\\t   2 - Insert From Back\\n3 - Insert At \n            A Position   4 - Delete At The Front\\n5 - Delete At The Back\\t   6 - Delete At A \n            Position\\n7 - Display\\t           8 - Exit\\n\\n\");\n    scanf(\"%d\",&amp;choice);\n    switch(choice)\n    {\n        case(1) :\n            {\n                InsertFront();\n            }\n        case(2) :\n            {\n                InsertBack();\n            }\n        case(3) :\n            {\n                InsertPosition();\n            }\n        case(4) :\n            {\n                DeleteFront();\n            }\n        case(5) :\n            {\n                DeleteBack();\n            }\n        case(6) :\n            {\n                DeletePosition();\n            }\n        case(7) :\n            {\n                Display();\n            }\n        case(8) :\n            {\n                exit(0);\n            }\n        default :\n            {\n                printf(\"Invalid Input\\n\");\n                exit(0);\n            }\n\n    }\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 4859, "user_id": 7431860, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/P6Jko.jpg?s=128&g=1", "display_name": "Nick Reed", "link": "https://stackoverflow.com/users/7431860/nick-reed"}, "edited": false, "score": 0, "creation_date": 1571249346, "post_id": 58419278, "comment_id": 103180986, "body": "<code>strncpy(operand, &amp;buffer[startOffset], i-startOffset);</code> Looks like it might be ill-formed - did you mean to do <code>strncpy(operand, &amp;buffer[startOffset], operand[i-startOffset]);</code>?"}, {"owner": {"reputation": 1980, "user_id": 11517179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zH4UW.gif?s=128&g=1", "display_name": "daShier", "link": "https://stackoverflow.com/users/11517179/dashier"}, "edited": false, "score": 0, "creation_date": 1571249546, "post_id": 58419278, "comment_id": 103181064, "body": "This also appears in error: <code>for(startOffset = i; startOffset -1 &gt;=0 &amp;&amp; isNumeric(buffer[startOffset-1]); </code> Your <code>for</code> loop ends with the <code>;</code> at the end of the line and assures that <code>StartOffset</code> is <code>-1</code> for the rest of your function (since you start with <code>i=0</code> in the <code>for</code> loop at the top."}, {"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 1, "creation_date": 1571251807, "post_id": 58419278, "comment_id": 103182100, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, the input you give, the expected output, and the output you got. Did you try to debug? On which line is the error thrown?"}, {"owner": {"reputation": 32686, "user_id": 10396, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ddbfebb47432f6599da361df6a135c7c?s=128&d=identicon&r=PG", "display_name": "AShelly", "link": "https://stackoverflow.com/users/10396/ashelly"}, "edited": false, "score": 0, "creation_date": 1571254625, "post_id": 58419278, "comment_id": 103183328, "body": "valgrind is a tool designed to answer these type of questions."}], "answers": [{"tags": [], "owner": {"reputation": 9, "user_id": 11839113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65571710c6392b2a23fc448d84f27a44?s=128&d=identicon&r=PG&f=1", "display_name": "pchelper4", "link": "https://stackoverflow.com/users/11839113/pchelper4"}, "is_accepted": false, "score": 0, "last_activity_date": 1571257778, "creation_date": 1571257778, "answer_id": 58421246, "question_id": 58419278, "link": "https://stackoverflow.com/questions/58419278/i-am-getting-segment-fault-error-in-this-function-can-someone-tell-why/58421246#58421246", "title": "I am getting segment fault error in this function. Can someone tell why?", "body": "<p>Compile your program with the debugger flag in gdb like this cc -g \"program name\". If you have command line arguments, for the program execute gdb --args progname arg2 ...</p>\n\n<p>It will load your program into a CLI utility which has the lines numbered. Type in 'break 32' for example and this will monitor variables on that line. At any rate, once you've compiled it with the debugger symbols and loaded it, type 'run' to start the program. If no break points are set or anything else funky, it will trigger the SEGV and tell you exactly which line of code triggered it. Run the debugger at least 3 times to make sure the segv fault is being triggered by the same line of code. Then check your memory bounds(is your array index outside of the allocated address space? You were tresspassing... Try inserting a printf line which prints off the array addresses and offset you are using to be sure your bounds aren't getting skewed; a side note, int conjunction with the gdb debugger using the breakpoint and typing 'step' on the CLI each time to step through each step, you can also at each step in your execution type in 'info locals' which will tell you the variables values in the stack space, i.e. your index variable value at each step. As an alternative to manually inserting printf lines) I am not a professional expert. It looks like continue on the 9th line is moot. Good luck!</p>\n"}], "owner": {"reputation": 11, "user_id": 12228339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c582a3f2c46a3b9f938663b4b41c69cd?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous", "link": "https://stackoverflow.com/users/12228339/anonymous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1571257778, "creation_date": 1571249214, "last_edit_date": 1571257357, "question_id": 58419278, "link": "https://stackoverflow.com/questions/58419278/i-am-getting-segment-fault-error-in-this-function-can-someone-tell-why", "title": "I am getting segment fault error in this function. Can someone tell why?", "body": "<p>I am getting segment fault error in this function. Can someone tell why?</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>/* Looks for an addition symbol \"+\" surrounded by two numbers, e.g. \"5+6\"\n   and, if found, adds the two numbers and replaces the addition subexpression \n   with the result (\"(5+6)*8\" becomes \"(11)*8\")--remember, you don't have\n   to worry about associativity! */\n</code></pre>\n\n<pre class=\"lang-c prettyprint-override\"><code>if (buffer[i] == '+') {\n    for (startOffset = i;\n         startOffset - 1 &gt;= 0 &amp;&amp; isNumeric(buffer[startOffset - 1]);\n         --startOffset)\n        ; // empty loop body\n    if (startOffset == i) // For further processing\n        continue;\n\n    for (remainderOffset = i;\n         remainderOffset + 1 &lt; bufferlen &amp;&amp; isNumeric(buffer[remainderOffset + 1]);\n         ++remainderOffset)\n        ; // empty loop body\n    if (remainderOffset == i)\n        continue;\n\n    strncpy(operand, &amp;buffer[startOffset], i - startOffset);\n    operand[i - startOffset] = '\\0';\n    string2int(value1, operand);\n\n    strncpy(operand, &amp;buffer[remainderOffset], remainderOffset - i);\n    operand[remainderOffset - i] = '\\0';\n    string2int(value2, operand);\n\n    sum = value1 + value2;\n    sprint(operand, \"%d\", sum);\n\n    operlength = strlen(operand);\n    strncpy(&amp;buffer[startOffset], operand, operlength);\n    strcpy(&amp;buffer[operlength], &amp;buffer[remainderOffset + 1]);\n\n    bufferlen = bufferlen - (remainderOffset - startOffset + 1) + operlength;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 4859, "user_id": 7431860, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/P6Jko.jpg?s=128&g=1", "display_name": "Nick Reed", "link": "https://stackoverflow.com/users/7431860/nick-reed"}, "edited": false, "score": 1, "creation_date": 1571248209, "post_id": 58418980, "comment_id": 103180497, "body": "This code doesn&#39;t compile. Is there more to it we aren&#39;t seeing?"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1571248273, "post_id": 58418980, "comment_id": 103180531, "body": "What of the following do you know/understand: effect of operator <code>&amp;</code>, effect of &quot;cast&quot; <code>(char*)</code>. That info is needed to gauge your level of knowledge and make a suitable answer."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1571248372, "post_id": 58418980, "comment_id": 103180580, "body": "The reason for the cast is because the variable is a different data type from the pointer."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1571248576, "post_id": 58418980, "comment_id": 103180664, "body": "The question as is asks for a pointer tutorial and is hence too broad. Please give more details of what you want explained and of what you already know. Then the question can be focused enough."}, {"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 0, "creation_date": 1571248586, "post_id": 58418980, "comment_id": 103180669, "body": "Please learn <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>. What specifically don&#39;t you understand?"}, {"owner": {"reputation": 1149, "user_id": 2472827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5rYY.jpg?s=128&g=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/2472827/neil"}, "edited": false, "score": 0, "creation_date": 1571271380, "post_id": 58418980, "comment_id": 103188580, "body": "<code>%p</code> and <code>(void *)</code> casts instead of <code>%u</code> would be more appropriate."}], "answers": [{"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 1, "last_activity_date": 1571252766, "creation_date": 1571252766, "answer_id": 58420128, "question_id": 58418980, "link": "https://stackoverflow.com/questions/58418980/what-did-those-expressions-do-ii-char-i-aa-char-a-in-the-below-pr/58420128#58420128", "title": "what did those expressions do ii = (char *)&amp;i ; aa= (char *)&amp;a ; in the below program?", "body": "<p>The expression <code>&amp;i</code> yields a value of type <code>int *</code> (pointer to <code>int</code>), which is the address of <code>i</code>.  Similarly, <code>&amp;a</code> yields a value of type <code>double *</code> (pointer to <code>double</code>).  </p>\n\n<p>With the exception of the <code>void *</code> type, C does not allow you to assign pointer values of one type to an object of a different pointer type - IOW, you can't assign a <code>int *</code> or a <code>double *</code> value to a <code>char *</code> object directly.  You must use a <em>cast expression</em> to tell the compiler to treat the value as a different type:</p>\n\n<pre><code>ii = (char *) &amp;i;\n</code></pre>\n\n<p>means \"treat the result of <code>&amp;i</code> as a pointer to <code>char</code> and assign the result to <code>ii</code>\".  The <code>(char *)</code> expression is a <em>cast</em>, and it tells the compiler to treat the value of the following expression as that type.  </p>\n\n<p>So, why would you want to do this?  </p>\n\n<p>Except for bitfields, any object can be mapped onto an array of <code>char</code> or <code>unsigned char</code> - IOW, the integer value <code>0x01234567</code> can be treated as the array of <code>char</code> values <code>{0x01, 0x23, 0x45, 0x67}</code>.  You can use this property perform some useful tests, or to determine how certain values are being represented.  For example, if you want to know if your system is big- or little-endian, you can take the <code>int</code> value <code>0x00000001</code>, treat it as an array of <code>char</code>, and test the 0'th and last elements:</p>\n\n<pre><code>int val = 0x00000001;        // assumes 32-bit integers!\nchar *varr = (char *) &amp;val;  // pretends val is an array of char\n\nif ( varr[0] == 0x01 )\n  // little endian\nelse if ( varr[ sizeof val - 1 ] == 0x01 )\n  // big endian\nelse\n  // something else\n</code></pre>\n\n<p>Note that casting pointer values to different types isn't necessarily <em>safe</em> - you can enable some truly nasty bugs by doing this.  </p>\n"}], "owner": {"reputation": 161, "user_id": 11822780, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4Inmtx0Gp2U/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rewzZXpYFo83N8R4pa5lFH8J21aXg/photo.jpg?sz=128", "display_name": "Raman Sharma", "link": "https://stackoverflow.com/users/11822780/raman-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1571252766, "creation_date": 1571247934, "last_edit_date": 1571249340, "question_id": 58418980, "link": "https://stackoverflow.com/questions/58418980/what-did-those-expressions-do-ii-char-i-aa-char-a-in-the-below-pr", "title": "what did those expressions do ii = (char *)&amp;i ; aa= (char *)&amp;a ; in the below program?", "body": "<p>I am trying to understand the concepts of pointer and i am stuck at this notation in line 6 and line 7 in the program. help me to understand this concept of pointer thanks in advance.<br>\ni am starting to learn basic of pointer in c and i am stuck with this expression</p>\n\n<pre><code>ii = (char *)&amp;i;\naa= (char *)&amp;a;\n</code></pre>\n\n<p>Full code:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\n   int i = 54; \n   float a = 3.14;\n   char *ii , *aa; //declaring ii and aa as chaacter pointer\n   ii = (char *)&amp;i;\n   aa= (char *)&amp;a;\n   printf(\"adress contained in ii = %u\",ii);\n   printf(\"adress contained in aa = %u\",aa);\n   printf(\"value at the adress contained in ii is %d \" , *ii);\n   printf(\"value at the adress contained in aa = %d \", *aa);\n   return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "json", "string", "arduino", "esp32"], "answers": [{"tags": [], "owner": {"reputation": 3224, "user_id": 2670348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff4b635f01c3129b3b3222a2930783f3?s=128&d=identicon&r=PG", "display_name": "romkey", "link": "https://stackoverflow.com/users/2670348/romkey"}, "is_accepted": true, "score": 3, "last_activity_date": 1571250039, "creation_date": 1571250039, "answer_id": 58419481, "question_id": 58418969, "link": "https://stackoverflow.com/questions/58418969/serialbt-readstring-save-as-string/58419481#58419481", "title": "SerialBT.readString() save as string", "body": "<p>Your first call to <code>SerialBT.readString()</code> consumes the available data. Your second call will not re-read the same string.</p>\n\n<p>Remove the line:</p>\n\n<pre><code>Serial.println(SerialBT.readString()); // this prints the message as well\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 9149836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4820f535b2568d383250a54a7c59339b?s=128&d=identicon&r=PG", "display_name": "amff", "link": "https://stackoverflow.com/users/9149836/amff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1290, "favorite_count": 0, "accepted_answer_id": 58419481, "answer_count": 1, "score": 1, "last_activity_date": 1571250039, "creation_date": 1571247898, "question_id": 58418969, "link": "https://stackoverflow.com/questions/58418969/serialbt-readstring-save-as-string", "title": "SerialBT.readString() save as string", "body": "<p>I'm sending a String from my android device to esp32, I want to store SerialBT.readString() value to a string variable, but it's stored as an empty string, what should I do?</p>\n\n<pre><code>if (SerialBT.available()) {\n    Serial.println(SerialBT.readString()); // this prints the message as well\n    String ts=SerialBT.readString();\n        Serial.println(ts); // prints nothing\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 3, "creation_date": 1571247877, "post_id": 58418938, "comment_id": 103180352, "body": "Use <code>calloc</code> instead of <code>malloc</code> and <code>memset</code>. It clears the memory for you."}, {"owner": {"reputation": 2445, "user_id": 4390699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4fe7d756a92a20b8b49b05cc0f1bb628?s=128&d=identicon&r=PG", "display_name": "Raman", "link": "https://stackoverflow.com/users/4390699/raman"}, "edited": false, "score": 1, "creation_date": 1571249193, "post_id": 58418938, "comment_id": 103180927, "body": "Moreover, if you want to allocate a 2D array dynamically that has contiguous memory. There are ways for that as well."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1571249401, "post_id": 58418938, "comment_id": 103181008, "body": "<code>a[0]</code> is only <code>sizeof(int)*aSize</code> bytes, you cannot <code>memset(a[0], 0, aSize*aSize*sizeof(int));</code>. There is no guarantee any of the blocks of memory for <code>a[0]</code> -&gt; <code>a[aSize-1]</code> are contiguous. There is no need to cast the return of <code>malloc</code>, it is unnecessary. See: <a href=\"http://stackoverflow.com/q/605845/995714\">Do I cast the result of malloc?</a>."}], "answers": [{"tags": [], "owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "is_accepted": true, "score": 2, "last_activity_date": 1571248153, "creation_date": 1571248153, "answer_id": 58419024, "question_id": 58418938, "link": "https://stackoverflow.com/questions/58418938/why-memset-init-partially/58419024#58419024", "title": "Why memset init partially?", "body": "<p>Your <code>memset</code> line assumes that the array of pointers created in your first <code>for</code> loop point to <strong>contiguous</strong> memory - that is, you assume that, for example, <code>a[1]</code> will point to the memory location immediately following the buffer pointed to by <code>a[0]</code>.</p>\n\n<p>However, there is no <strong><em>guarantee</em></strong> that this will be the case! As it happens, in some of your cases this is true but, ultimately, working on this assumption will cause <strong><em>Undefined Behaviour</em></strong>!</p>\n\n<p>To correct the problem, you should initialize each memory buffer separately; the simplest way would be to do it as your create each one:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;memory.h&gt;\n\nint main()\n{\n    int aSize = 3;\n    int **a = (int **)malloc(sizeof(int *)*aSize);\n    for (int i=0; i&lt;aSize; i++) {\n        a[i]=(int *)malloc(sizeof(int)*aSize);\n         memset(a[i], 0, aSize*sizeof(int)); // Set each buffer to all zeros here!\n    }\n\n//  memset(a[0], 0, aSize*aSize*sizeof(int)); // This will cause undefined behaviour\n\n    for (int i=0; i&lt;aSize; i++) {\n        for (int j=0; j&lt;aSize; j++) {\n            printf(\"%d \", a[i][j]);\n        }\n        printf(\"\\n\");\n    }\n}\n</code></pre>\n\n<p>Feel free to ask for further clarification and/or explanation.</p>\n"}, {"tags": [], "owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "is_accepted": false, "score": 3, "last_activity_date": 1571254447, "last_edit_date": 1571254447, "creation_date": 1571248166, "answer_id": 58419028, "question_id": 58418938, "link": "https://stackoverflow.com/questions/58418938/why-memset-init-partially/58419028#58419028", "title": "Why memset init partially?", "body": "<p>This cannot possibly work other than by amazing fluke:</p>\n\n<pre><code>memset(a[0], 0, aSize*aSize*sizeof(int));\n</code></pre>\n\n<p>You have simulated a multi-dimensional array by allocating a vector of pointers to separately allocated rows. But in the above expression, you're assuming that the memory is linear (allocated all in one piece). The <code>memset</code> writes beyond the end of the <code>a[0]</code> row, causing undefined behavior.</p>\n\n<p>The correct approach is to iterate over the array of pointers, and individually <code>memset</code> each row:</p>\n\n<pre><code>for (i = 0; i &lt; aSize; i++)\n   memset(a[i], 0, aSize * sizeof a[i]);\n</code></pre>\n\n<p>This <code>memset</code> action can be hoisted into the original loop which allocates the rows; moreover, <code>calloc</code> can be used instead of <code>malloc</code> to make the <code>memset</code> unnecessary.  (The C language requires that an all-zero bit memory pattern produces values of zero when interpreted as a numeric type such as <code>int</code> or <code>double</code>, so initializing numeric arrays to zero with <code>calloc</code> is type safe and portable.)</p>\n\n<p>Also, there is no <code>&lt;memory.h&gt;</code> header in standard C. The <code>malloc</code> function has been declared in <code>&lt;stdlib.h&gt;</code> since before C was first standardized in 1989.</p>\n"}], "owner": {"reputation": 343, "user_id": 7624033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbc953e4ff3857eb2a3d212dadb46eee?s=128&d=identicon&r=PG&f=1", "display_name": "caisil", "link": "https://stackoverflow.com/users/7624033/caisil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 58419024, "answer_count": 2, "score": 0, "last_activity_date": 1571271636, "creation_date": 1571247777, "last_edit_date": 1571271636, "question_id": 58418938, "link": "https://stackoverflow.com/questions/58418938/why-memset-init-partially", "title": "Why memset init partially?", "body": "<p>I'm trying to init a <code>int **a</code> with 0 by <code>memset</code>. But the result is some item is not zero.<br/>\n<strong>Source code</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;memory.h&gt;\n\nint main()\n{\n    int aSize = 3;\n    int **a = (int **)malloc(sizeof(int *)*aSize);\n    for (int i=0; i&lt;aSize; i++) {\n        a[i]=(int *)malloc(sizeof(int)*aSize);\n    }\n\n    memset(a[0], 0, aSize*aSize*sizeof(int));\n\n    for (int i=0; i&lt;aSize; i++) {\n        for (int j=0; j&lt;aSize; j++) {\n            printf(\"%d \", a[i][j]);\n        }\n        printf(\"\\n\");\n    }\n}\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>0 0 0 \n0 0 0 \n0 1610612736 0\n</code></pre>\n\n<hr>\n\n<p><strong>Update 1</strong></p>\n\n<p>I'm trying to <code>malloc</code> contiugous in two ways as suggested. But in method 2 a exception thrown when init array. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;strings.h&gt; // memset header changed\n// method 1\nint **a = malloc(sizeof(int *)*aSize);\nfor (int i=0; i&lt;aSize; i++) {\n    a[i]=malloc(sizeof(int)*aSize);\n    memset(a[i], 0, aSize*sizeof(int));\n}\n\nfor (int i=0; i&lt;aSize; i++) {\n    for (int j=0; j&lt;aSize; j++) {\n        printf(\"%d \", a[i][j]);\n    }\n    printf(\"\\n\");\n}\n\nfor (int i=0; i&lt;aSize; i++) {\n    free(a[i]);\n}\n\nfree(a);\n\n// method 2\na = malloc(sizeof(int *)*aSize + sizeof(int)*aSize);\nmemset(a[0], 0, aSize*aSize*sizeof(int)); // Exception: EXC_BAD_ACCESS (code=1, address=0x1c)\n</code></pre>\n"}, {"tags": ["python", "c", "file", "readfile", "pyclipper"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1571247776, "post_id": 58418898, "comment_id": 103180308, "body": "<code>CH_Opened</code> is a file object, you need to actually read from it, e.g.: <code>CH_Opened.readlines()</code>"}, {"owner": {"reputation": 11, "user_id": 12228160, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBwuxSVRVWD4W5n0fZpMVNVnp20w_jpmFuqIUxGbA=k-s128", "display_name": "Danny Huber", "link": "https://stackoverflow.com/users/12228160/danny-huber"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1571248195, "post_id": 58418898, "comment_id": 103180488, "body": "@UnholySheep Right, thank you. Once I fix that issue, and attempt to print again, I receive the following error: &quot; UnicodeDecodeError: &#39;charmap&#39; codec can&#39;t decode byte 0x8f in position 1483: character maps to &lt;undefined&gt; &quot;"}, {"owner": {"reputation": 11, "user_id": 12228160, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBwuxSVRVWD4W5n0fZpMVNVnp20w_jpmFuqIUxGbA=k-s128", "display_name": "Danny Huber", "link": "https://stackoverflow.com/users/12228160/danny-huber"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1571249744, "post_id": 58418898, "comment_id": 103181154, "body": "I believe this is an issue of Python not being able to properly decode the file type. I might just need to find the proper encoding format in order to open the file."}], "owner": {"reputation": 11, "user_id": 12228160, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBwuxSVRVWD4W5n0fZpMVNVnp20w_jpmFuqIUxGbA=k-s128", "display_name": "Danny Huber", "link": "https://stackoverflow.com/users/12228160/danny-huber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 131, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1571247798, "creation_date": 1571247582, "last_edit_date": 1571247798, "question_id": 58418898, "link": "https://stackoverflow.com/questions/58418898/opening-and-reading-clipper-header-ch-data-file-with-python-3-7", "title": "Opening and Reading clipper header (.CH) data file with python 3.7", "body": "<p>I am relatively new to python and am not even sure if this is at all possible as clipper header files are written entirely in C to my limited knowledge. I am hoping someone might have some idea of how to open a .CH file such as '''ECD1B.CH'''\nBelow is how the file is being opened:</p>\n\n<pre><code>    CH_File = glob.glob(folderView + \"**/*.CH\", recursive = True)\n    CH_File2 = CH_File[0]\n    print (CH_File2)\n    CH_Opened = open(CH_File2, 'r')\n    print (CH_Opened)\n</code></pre>\n\n<p>The following opened file that python prints is:</p>\n\n<blockquote>\n  <p>&lt;_io.TextIOWrapper name='C:\\Users\\342232\\Documents\\MATLAB\\10OCT19 Data Folders\n  BHP\\20SEPS36.D\\ECD1B.CH' mode='r' encoding='cp1252'></p>\n</blockquote>\n\n<p>Clearly, python was unable to print the actual content embedded in the file. I am wondering if this is even possible to open in python. I do have a friend that wrote code in Matlab that can open this file type. Open to any suggestions and thank you in advance. </p>\n"}, {"tags": ["c", "dynamic-memory-allocation"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1571247545, "post_id": 58418859, "comment_id": 103180226, "body": "Use <code>numofrows</code> instead of <code>11</code> when calling <code>malloc</code> to avoid slip-ups."}, {"owner": {"reputation": 25661, "user_id": 430766, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ee7e736eeb33c4b03d4a5e6e813a9abc?s=128&d=identicon&r=PG", "display_name": "bitmask", "link": "https://stackoverflow.com/users/430766/bitmask"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1571247642, "post_id": 58418859, "comment_id": 103180260, "body": "@tadman I think you mean <code>englength</code> instead of 11. @Georgia. Turn on all compiler warnings and you would have noticed this! <code>-Wall -Wextra -pedantic</code>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 25661, "user_id": 430766, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ee7e736eeb33c4b03d4a5e6e813a9abc?s=128&d=identicon&r=PG", "display_name": "bitmask", "link": "https://stackoverflow.com/users/430766/bitmask"}, "edited": false, "score": 0, "creation_date": 1571247699, "post_id": 58418859, "comment_id": 103180281, "body": "@bitmask In that case, <code>englength + 1</code> to accommodate the trailing NUL, if not a <code>strdup</code> call to avoid all that mess."}, {"owner": {"reputation": 25661, "user_id": 430766, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ee7e736eeb33c4b03d4a5e6e813a9abc?s=128&d=identicon&r=PG", "display_name": "bitmask", "link": "https://stackoverflow.com/users/430766/bitmask"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1571247736, "post_id": 58418859, "comment_id": 103180293, "body": "@tadman That&#39;s correct."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1571247793, "post_id": 58418859, "comment_id": 103180314, "body": "<code>rows[i] = malloc(11*sizeof(char));</code> -&gt; <code>rows[i] = malloc(englength + 1);</code> <b>Validate</b> EVERY allocation before using the block of memory, e.g. <code>if (rows[i] == NULL) { perror(&quot;malloc-rows[i]&quot;); exit (EXIT_FAILURE); }</code>"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 1, "creation_date": 1571247895, "post_id": 58418859, "comment_id": 103180358, "body": "You have two nested loops, but I think there should be only one loop over the rows. The index <code>i</code> corresponds to the line number. Now, you are copying the same word <code>numrows</code> times for each line you&#39;ve read."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1571247621, "post_id": 58418891, "comment_id": 103180254, "body": "There&#39;s also <a href=\"https://en.cppreference.com/w/c/io/puts\" rel=\"nofollow noreferrer\"><code>puts</code></a> if formatting doesn&#39;t matter."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 2, "creation_date": 1571247856, "post_id": 58418891, "comment_id": 103180345, "body": "Or <code>fputs</code> if you want newline control."}], "tags": [], "owner": {"reputation": 4859, "user_id": 7431860, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/P6Jko.jpg?s=128&g=1", "display_name": "Nick Reed", "link": "https://stackoverflow.com/users/7431860/nick-reed"}, "is_accepted": false, "score": 2, "last_activity_date": 1571247541, "creation_date": 1571247541, "answer_id": 58418891, "question_id": 58418859, "link": "https://stackoverflow.com/questions/58418859/why-dont-the-elements-stay-in-the-array/58418891#58418891", "title": "Why don&#39;t the elements stay in the array?", "body": "<p>Your statement <code>printf(rows[i]);</code> is badly formed. Try <code>printf(\"%s\", rows[i]);</code></p>\n"}, {"tags": [], "owner": {"reputation": 25661, "user_id": 430766, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ee7e736eeb33c4b03d4a5e6e813a9abc?s=128&d=identicon&r=PG", "display_name": "bitmask", "link": "https://stackoverflow.com/users/430766/bitmask"}, "is_accepted": true, "score": 0, "last_activity_date": 1571248431, "creation_date": 1571248431, "answer_id": 58419090, "question_id": 58418859, "link": "https://stackoverflow.com/questions/58418859/why-dont-the-elements-stay-in-the-array/58419090#58419090", "title": "Why don&#39;t the elements stay in the array?", "body": "<p>Make sure to write each new line into a new slot in the array. Later, when printing the array make sure not to read more lines than previously stored.</p>\n\n<p>This is a starting point for you, but there are several things more that could be improved.</p>\n\n<pre><code>  unsigned i = 0;\n  for (i = 0; i&lt;numofrows &amp;&amp; fgets(line, sizeof(line), infile) != NULL; ++i) {\n    char* english = strtok(line, search); //this is the word of the left column\n    unsigned englength=strlen(english);//the length of the word\n    rows[i] = malloc((englength+1)*sizeof(char));\n    strcpy(rows[i], english);\n  }\n  for(unsigned j=0;j&lt;i;j++){\n    printf(\"%s\\n\",rows[j]);\n  }\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 12228080, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCwBYEf_Fplo4ioOA6YSoiIy2H16dJDngGbcqx9=k-s128", "display_name": "Georgia Foukaridou", "link": "https://stackoverflow.com/users/12228080/georgia-foukaridou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 58419090, "answer_count": 2, "score": -1, "last_activity_date": 1571248431, "creation_date": 1571247413, "question_id": 58418859, "link": "https://stackoverflow.com/questions/58418859/why-dont-the-elements-stay-in-the-array", "title": "Why don&#39;t the elements stay in the array?", "body": "<p>In this code I am reading a file that consists of a number of rows. Each  row has 2 words, separated with \\t. While I am reading the file, I am creating a dynamically allocated table, that consists of the left column of words in the file. The problem is, the array rows appears to be correct only in the loops. When I try to print rows[i] outside the loops, the elements disappear. Sorry if I didn't explain very well, I am new to the C language..!</p>\n\n<pre><code>char line[21];\nint i=0;\nFILE *infile=fopen(\"words.txt\", \"r\");\nif(infile == NULL){\n    printf(\"The Input File is Null! Please Re-Run the program.\");   \n        return 1;             \n}\nint numofrows=11;\nchar **rows=malloc(sizeof(char*)*numofrows);\n//read the file\nwhile(fgets(line, sizeof(line), infile) != NULL) {\n    english = strtok(line, search); //this is the word of the left column\n    englength=strlen(english);//the length of the word\n    for(i=0;i&lt;numofrows;i++){\n        rows[i] = malloc(11*sizeof(char));\n        strcpy(rows[i], english);\n    }\n}\n        //this doesnt work     \n    for(i=0;i&lt;numofrows;i++){    \n            printf(rows[i]);\n        }\n</code></pre>\n\n<p>The last for loop should print each word in the array rows, instead, nothing is being printed.</p>\n"}, {"tags": ["c", "pointers", "swap"], "comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 1, "creation_date": 1571246476, "post_id": 58418567, "comment_id": 103179711, "body": "Turn warnings of your compiler on!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1531591"}, "edited": false, "score": 2, "creation_date": 1571246576, "post_id": 58418567, "comment_id": 103179770, "body": "Your func does nothing since you only update the (local) arguments. On a side note you assign q which is a char** with temp which is a char*"}, {"owner": {"reputation": 9, "user_id": 7637542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0e68b9db3f698d29f262128bef43405?s=128&d=identicon&r=PG&f=1", "display_name": "diamond_head", "link": "https://stackoverflow.com/users/7637542/diamond-head"}, "edited": false, "score": 0, "creation_date": 1571248228, "post_id": 58418567, "comment_id": 103180505, "body": "A few things I would like to point out: (i) As Paul Ogilvie points out my compiler is indeed throwing some warnings but this isn&#39;t some code that I am writing. This was a question in an exam and we had to trace the output. (ii) I have tried to do so in the image I attached. So it would be really cool if you can point out where am I going wrong with the image in reference. Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 1, "creation_date": 1571246763, "post_id": 58418669, "comment_id": 103179861, "body": "Your second sentence is confusing. Pointers are also variables and their values can also be swapped."}, {"owner": {"reputation": 4859, "user_id": 7431860, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/P6Jko.jpg?s=128&g=1", "display_name": "Nick Reed", "link": "https://stackoverflow.com/users/7431860/nick-reed"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1571246851, "post_id": 58418669, "comment_id": 103179909, "body": "Good point. I&#39;ll try and think of a less confusing way to rewrite it - I&#39;m open to suggestions if you have any."}, {"owner": {"reputation": 9, "user_id": 7637542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0e68b9db3f698d29f262128bef43405?s=128&d=identicon&r=PG&f=1", "display_name": "diamond_head", "link": "https://stackoverflow.com/users/7637542/diamond-head"}, "edited": false, "score": 0, "creation_date": 1571248391, "post_id": 58418669, "comment_id": 103180592, "body": "Thank you for that but I would really like to trace the &#39;faulty&#39; code rather than the correct code. If you look at the image I attached and point out where I am wrong then it would be great. (I think the second pointer &#39;q&#39; is really getting updated with the address of &#39;h&#39;)"}, {"owner": {"reputation": 4859, "user_id": 7431860, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/P6Jko.jpg?s=128&g=1", "display_name": "Nick Reed", "link": "https://stackoverflow.com/users/7431860/nick-reed"}, "edited": false, "score": 0, "creation_date": 1571248758, "post_id": 58418669, "comment_id": 103180747, "body": "The code is in error because the values you&#39;re sending are lost when the function goes out of scope. If you somehow managed to return the values, your code would have undefined behavior, since <code>p</code> would point to the location of the actual pointer address <code>q</code>, and <code>q</code> would point to the start of <code>p</code>&#39;s array."}, {"owner": {"reputation": 9, "user_id": 7637542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0e68b9db3f698d29f262128bef43405?s=128&d=identicon&r=PG&f=1", "display_name": "diamond_head", "link": "https://stackoverflow.com/users/7637542/diamond-head"}, "edited": false, "score": 0, "creation_date": 1571249614, "post_id": 58418669, "comment_id": 103181091, "body": "Got it. The &#39;p&#39; in the function is a local variable so any updation in it isn&#39;t reflected in the main func. The local q is a pointer to the pointer q in main but when the printf is being done in main it takes it&#39;s local q rather than the function&#39;s local q. I hope this is accurate."}], "tags": [], "owner": {"reputation": 4859, "user_id": 7431860, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/P6Jko.jpg?s=128&g=1", "display_name": "Nick Reed", "link": "https://stackoverflow.com/users/7431860/nick-reed"}, "is_accepted": false, "score": 2, "last_activity_date": 1571246784, "last_edit_date": 1571246784, "creation_date": 1571246583, "answer_id": 58418669, "question_id": 58418567, "link": "https://stackoverflow.com/questions/58418567/output-related-query-for-swapping-of-strings/58418669#58418669", "title": "Output related query for swapping of strings", "body": "<p>You're trying to pass by reference to swap the strings around, and are using pointers to do so - that's the correct way to do it! However, since this is a string in C, <em>your actual variables are pointers</em>. These pointer addresses are being passed (and swapped) by value. Indeed, if you place a print function inside <code>func</code>, you'll see that the strings are printed in the reverse order you're expecting.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>void func(char *p, char *q)\n{\n    char *temp = p;\n    p = q;\n    q = temp;\n    printf(\"%s, %s\", p, q);\n}\n\nint main()\n{\n    char *p =\"hello\";\n    char *q =\"world\";\n    func(p,q);\n    printf(\"%s, %s\", p, q);\n    return 0;\n}\n</code></pre>\n\n<p><code>world, hellohello, world</code></p>\n\n<p>If you want to swap two variables, you need only pass their pointers and swap them - but if you want to swap the <em>pointers themselves,</em> you need to pass references to the pointers.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n\nvoid func(char **p, char **q)\n{\n    char *temp = *p;\n    *p = *q;\n    *q = temp;\n}\n\nint main()\n{\n    char *p =\"hello\";\n    char *q =\"world\";\n    func(&amp;p,&amp;q);\n    printf(\"%s, %s\", p, q);\n    return 0;\n}\n</code></pre>\n\n<p><code>world, hello</code></p>\n\n<p><a href=\"https://repl.it/repls/SilverBonyProduct\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}], "owner": {"reputation": 9, "user_id": 7637542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0e68b9db3f698d29f262128bef43405?s=128&d=identicon&r=PG&f=1", "display_name": "diamond_head", "link": "https://stackoverflow.com/users/7637542/diamond-head"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1571246784, "creation_date": 1571246156, "question_id": 58418567, "link": "https://stackoverflow.com/questions/58418567/output-related-query-for-swapping-of-strings", "title": "Output related query for swapping of strings", "body": "<p>The output is \"hello, world\". I tried to map out what is happening in the code and have attached an image<a href=\"https://i.stack.imgur.com/uKQfM.jpg\" rel=\"nofollow noreferrer\"> showing what the function should be doing according to me</a>. However I don't understand why the final output is coming out like that.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid func(char *p, char **q)\n{\n    char *temp = p;\n    p = q;\n    q = temp;\n}\n\nint main()\n{\n    char *p =\"hello\";\n    char *q =\"world\";\n    func(p,&amp;q);\n    printf(\"%s, %s\", p, q);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "file"], "comments": [{"owner": {"reputation": 553, "user_id": 12114801, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I4WME.jpg?s=128&g=1", "display_name": "Sathvik", "link": "https://stackoverflow.com/users/12114801/sathvik"}, "edited": false, "score": 2, "creation_date": 1571246942, "post_id": 58417996, "comment_id": 103179950, "body": "The answer is -&gt; <a href=\"https://qr.ae/TWA98d\" rel=\"nofollow noreferrer\">qr.ae/TWA98d</a>  Reference while reading the blog Image-&gt;<a href=\"https://i.stack.imgur.com/e4xm6.jpg\" rel=\"nofollow noreferrer\">i.stack.imgur.com/e4xm6.jpg</a>"}], "owner": {"reputation": 553, "user_id": 12114801, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I4WME.jpg?s=128&g=1", "display_name": "Sathvik", "link": "https://stackoverflow.com/users/12114801/sathvik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "closed_date": 1571244332, "answer_count": 0, "score": 1, "last_activity_date": 1571244281, "creation_date": 1571243907, "last_edit_date": 1571244281, "question_id": 58417996, "link": "https://stackoverflow.com/questions/58417996/how-to-use-file-in-binary-and-text-mode-in-c", "closed_reason": "Duplicate", "title": "How to use FILE in binary and text mode in C", "body": "<p>Even in Binary or Text mode it is working(image,document,...). Then what is the real use of these mode and how to use them.  </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\nint main()\n{\n    FILE *fp;\n    unsigned char buffer[756396];  \n    fp=fopen(\"ref.jpg\",\"r\");    //rb\n    if(fp==NULL)\n    {\n        printf(\"File not present\");\n        exit(0);    \n    }\n    else\n        fread(buffer,sizeof(buffer),1,fp);  \n    fclose(fp);\n    fp=fopen(\"ref1.jpg\",\"w\");  //wb\n    if(fp==NULL)\n    {\n        printf(\"File can not be created\");\n        exit(0);    \n    }\n    else\n        fwrite(buffer,sizeof(buffer),1,fq);\n    fclose(fp);\n    return 0;\n}\n\n</code></pre>\n\n<p>output</p>\n\n<pre><code>Above code create a copy of an image\n</code></pre>\n\n<p>I want to know the real time application of where and when to use them.</p>\n"}, {"tags": ["c", "stack", "parentheses", "brackets"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1571243974, "post_id": 58417984, "comment_id": 103178617, "body": "[Tangent] Don&#39;t use <code>gets</code>.  It was deprecated and has since been removed from C and C++."}], "answers": [{"comments": [{"owner": {"reputation": 804, "user_id": 5893772, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/EATNh.png?s=128&g=1", "display_name": "Reticulated Spline", "link": "https://stackoverflow.com/users/5893772/reticulated-spline"}, "edited": false, "score": 0, "creation_date": 1571260725, "post_id": 58418472, "comment_id": 103185837, "body": "If OP were to use <code>malloc()</code>, is there really a benefit to freeing that memory before the program exits?"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "reply_to_user": {"reputation": 804, "user_id": 5893772, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/EATNh.png?s=128&g=1", "display_name": "Reticulated Spline", "link": "https://stackoverflow.com/users/5893772/reticulated-spline"}, "edited": false, "score": 1, "creation_date": 1571289748, "post_id": 58418472, "comment_id": 103192425, "body": "Well, the system should clean up the resources of course, but in my opnion that is bad practice. I think learners should make a habit of <code>free</code>ing allocated memory, <code>fclose</code>ing open files and so on. in C, you must manage the resources yourself, so better get used to it."}], "tags": [], "owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "is_accepted": false, "score": 1, "last_activity_date": 1571245795, "creation_date": 1571245795, "answer_id": 58418472, "question_id": 58417984, "link": "https://stackoverflow.com/questions/58417984/arrange-the-code-to-separate-functions-in-c/58418472#58418472", "title": "Arrange the code to separate functions in C", "body": "<p>You have two problems here:</p>\n\n<ul>\n<li><p>When you pass the stack structure to <code>Check</code>, the function sees a copy of the stack. Therefore, the changes you make are lost in <code>main</code> &ndash; they were only made to the copy. Pass a pointer to the structure, just as you have done for the functions for the stack operations. (Since the variable <code>stack</code> will then be a pointer in <code>Check</code>, you should pass <code>stack</code>, not <code>&amp;stack</code> to the stack functions.)</p></li>\n<li><p>The cases in a <code>switch</code> statement in C are not isolated. The execution will \"fall through\" to the next case if you don't end the code with <code>break</code> or <code>return</code>.</p></li>\n</ul>\n\n<p>Your check function could look like this:</p>\n\n<pre><code>void Check(char item, Stack *stack) {\n    switch (item) {\n    case '(': Push(stack, item); break;\n    case '[': Push(stack, item); break;\n    case '{': Push(stack, item); break;\n    case ')': if (Peek(stack) == '(') Pop(stack); break;\n    case ']': if (Peek(stack) == ']') Pop(stack); break;\n    case '}': if (Peek(stack) == '}') Pop(stack); break;\n    }\n}\n</code></pre>\n\n<p>and you call it from main like this:</p>\n\n<pre><code>Check(p, &amp;stack);\n</code></pre>\n\n<p>Further observations:</p>\n\n<ul>\n<li>A stack underflow should not cause an immediate exit of the program,. Instead, it should lead to a message that says that the equation is malformed.</li>\n<li>As noted in comments, don't use the unsafe and deprecated function <code>gets</code>. Use <code>fgets</code> instead.</li>\n<li>There's really no need to allocate a buffer of 100 chars on the heap with <code>malloc</code>. Just use an automatic array: <code>char equation[100];</code>. If you use <code>malloc</code>, you must also use <code>free</code> before you return from <code>main</code>.</li>\n</ul>\n"}], "owner": {"reputation": 21, "user_id": 11544899, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-k43QMl0XZuU/AAAAAAAAAAI/AAAAAAAABmY/UTr7bnM_-Rk/photo.jpg?sz=128", "display_name": "Mykola MASTEMA", "link": "https://stackoverflow.com/users/11544899/mykola-mastema"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1571686204, "creation_date": 1571243869, "last_edit_date": 1571686204, "question_id": 58417984, "link": "https://stackoverflow.com/questions/58417984/arrange-the-code-to-separate-functions-in-c", "title": "Arrange the code to separate functions in C", "body": "<p>I make my exercise at the University and here it is: \"Enter the equation, check if there is a bracket. If it is opening - push into a stack. If it is closing - check if the head element of the stack is opening brackets/parentheses. If the stack is empty, the equation is correct\". I made the code to check it in the main() function. But it is needed to check if the element of the equation is a bracket/parentheses in the first function and comparing with the next bracket/parentheses.</p>\n\n<p>Thanks a lot if you help me). CODE IS BELOW:</p>\n\n<pre><code>#include &lt;stdio.h&gt; &lt;stdlib.h&gt; &lt;string.h&gt;\n\n#define STACK_SIZE 20\n#define OVERFLOW -100\n#define UNDERFLOW -101\n\n///BEGIN DEFINING\ntypedef char C;\ntypedef struct Stack_tag {\n    C data[STACK_SIZE];\n    size_t size;\n} Stack;\n///END DEFINING\n\n///BEGIN STACK FUNCTIONS\nvoid Push(Stack* stack, const C value) {\n    if (stack-&gt;size &gt;= STACK_SIZE) exit(OVERFLOW);\n\n    stack-&gt;data[stack-&gt;size] = value;\n    stack-&gt;size++;\n}\n\nC Pop(Stack* stack) {\n    if (stack-&gt;size == 0) exit(UNDERFLOW);\n\n    stack-&gt;size--;\n    return stack-&gt;data[stack-&gt;size];\n}\n\nC Peek(const Stack* stack) {\n    if (stack-&gt;size &lt;= 0) exit(UNDERFLOW);\n    return stack-&gt;data[stack-&gt;size - 1];\n}\n\nvoid PrintStackValue(const C value) {\n    printf(\"%c\", value);\n}\n\nvoid PrintStack(const Stack* stack, void(*PrintStackValue)(const C)) {\n    int i, len = stack-&gt;size - 1;\n    printf(\"\\nStack %d\", stack-&gt;size);\n    for (i = 0; i &lt; len; i++) {\n        PrintStackValue(stack-&gt;data[i]);\n        printf(\" | \");\n    }\n    if (stack-&gt;size != 0) {\n        PrintStackValue(stack-&gt;data[i]);\n    }\n    printf(\"\\n\");\n}\n///END STACK FUNCTIONS\n\n///BEGIN OTHER FUNCTIONS\nchar isBr(char item) {\n    switch (item) {\n    case '(': return '(';\n    case ')': return ')';\n    case '[': return '[';\n    case ']': return ']';\n    case '{': return '{';\n    case '}': return '}';\n    default: return NULL;\n    }\n}\nvoid Check(char item, Stack stack) {\n    switch (item) {\n    case '(': Push(&amp;stack, item);\n    case '[': Push(&amp;stack, item);\n    case '{': Push(&amp;stack, item);\n    case ')': if (Peek(&amp;stack) == '(') Pop(&amp;stack);\n    case ']': if (Peek(&amp;stack) == ']') Pop(&amp;stack);\n    case '}': if (Peek(&amp;stack) == '}') Pop(&amp;stack);\n    }\n}\n///END OTHER FUNCTIONS\nint main()\n{\n    Stack stack;\n    stack.size = 0;\n    ///EQUATION\n    char* equation;\n    int i;\n    equation = (char*)malloc(100 * sizeof(char));\n    printf(\"Enter the Equation: \\n\");\n    gets(equation);\n    ///CHECKING PROCESS\n    ///TODO:\n    ///1) SEPARATE FUNCTIONS\n    for (i = 0; i &lt; strlen(equation); i++) {\n        /*\n        if (equation[i] == '(' || equation[i] == '{' || equation[i] == '[') {\n            Push(&amp;stack, equation[i]);\n        }\n        if (equation[i] == ')') {\n            if (Peek(&amp;stack) == '(') Pop(&amp;stack);\n        }\n        if (equation[i] == '}') {\n            if (Peek(&amp;stack) == '{') Pop(&amp;stack);\n        }\n        if (equation[i] == ']') {\n            if (Peek(&amp;stack) == '[') Pop(&amp;stack);\n        }\n        */\n        char p = isBr(equation[i]);\n        Check(p, stack);\n\n    }\n\n\n\n    ///PRINT THE RESULT\n    puts(stack.size == 0 ? \"FINE\" : \"NOOPE!!!\");\n    //PrintStack(&amp;stack, PrintStackValue);\n\n    return 0;\n}\n\n</code></pre>\n"}, {"tags": ["c", "visual-studio-2012"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1571243062, "post_id": 58417385, "comment_id": 103178159, "body": "By &quot;PC&quot; do you mean &quot;Windows&quot;? If so, what version?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1571243098, "post_id": 58417385, "comment_id": 103178177, "body": "Why MinGW and not Visual Studio Express if you want to write C code? Building C code is often non-trivial, so you&#39;ll either need to compose a <code>Makefile</code> or CMake equivalent, if not use an IDE like Visual Studio Express that can help you through the process of building a viable executable."}, {"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 0, "creation_date": 1571248925, "post_id": 58417385, "comment_id": 103180820, "body": "Welcome on SO! Please take the <a href=\"https://stackoverflow.com/tour\">tour</a>, learn <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>, and provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. In your case provide all that is necessary to repeat what you did. Especially <b>which</b> YouTube video? Please <a href=\"https://stackoverflow.com/posts/58417385/edit\">edit</a> your question with additional information, don&#39;t hide it in comments."}, {"owner": {"reputation": 39, "user_id": 11846132, "user_type": "registered", "profile_image": "https://graph.facebook.com/753583861764214/picture?type=large", "display_name": "Frank Filler", "link": "https://stackoverflow.com/users/11846132/frank-filler"}, "edited": false, "score": 0, "creation_date": 1571292359, "post_id": 58417385, "comment_id": 103193293, "body": "i&#39;m using win 10. The 1st run was a success"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1571293430, "post_id": 58417385, "comment_id": 103193712, "body": "Welcome to SO. I cannot find &quot;this error about access denied&quot;. The message you show indicates &quot;file not found&quot; which is not the same."}, {"owner": {"reputation": 39, "user_id": 11846132, "user_type": "registered", "profile_image": "https://graph.facebook.com/753583861764214/picture?type=large", "display_name": "Frank Filler", "link": "https://stackoverflow.com/users/11846132/frank-filler"}, "edited": false, "score": 0, "creation_date": 1571297605, "post_id": 58417385, "comment_id": 103195660, "body": "i think i posted the wrong line"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1571298908, "post_id": 58417385, "comment_id": 103196322, "body": "OK. That&#39;s a totally different story. In most cases your executable is already running and hence the file cannot be overwritten."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1571299611, "post_id": 58417385, "comment_id": 103196676, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/19855571/permission-denied-cannot-open-outputfile\">Permission denied - cannot open outputfile</a>"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1571299674, "post_id": 58417385, "comment_id": 103196705, "body": "Searching for &quot;[c] mingw32/bin/ld.exe: cannot open output file&quot; produces multiple results that are very near to your problem."}], "owner": {"reputation": 39, "user_id": 11846132, "user_type": "registered", "profile_image": "https://graph.facebook.com/753583861764214/picture?type=large", "display_name": "Frank Filler", "link": "https://stackoverflow.com/users/11846132/frank-filler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571298857, "creation_date": 1571241524, "last_edit_date": 1571298857, "question_id": 58417385, "link": "https://stackoverflow.com/questions/58417385/installing-gcc-on-a-pc-and-got-several-errors", "title": "Installing gcc on a PC and got several errors", "body": "<p>I've tried installing the gcc by my self. When i tried to run my C code using Visual Studio, several errors  are found. Any solution for my problem?</p>\n\n<p>i have installed MinGW and followed the instructions on youtube</p>\n\n<p>what i expect in the terminal is Hello World, what i got is this error about access denied \n// I'm using Win 10\n//The Youtube Video : <a href=\"https://youtu.be/mWzOu-_VNAk\" rel=\"nofollow noreferrer\">https://youtu.be/mWzOu-_VNAk</a></p>\n\n<hr>\n\n<p>PS</p>\n\n<pre><code>c:/mingw/bin/../lib/gcc/mingw32/8.2.0/../../../../mingw32/bin/ld.exe: cannot open output file Untitled-1.exe: Permission denied\ncollect2.exe: error: ld returned 1 exit status\nPS C:\\Users\\farhandika\\projects\\projects\\projects\\helloworld&gt;\n\n\n</code></pre>\n"}, {"tags": ["python", "c", "pointers", "global-variables", "ctypes"], "comments": [{"owner": {"reputation": 2500, "user_id": 10100272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca2b304071c78a2a5f90c6e6e10482d6?s=128&d=identicon&r=PG&f=1", "display_name": "MEdwin", "link": "https://stackoverflow.com/users/10100272/medwin"}, "edited": false, "score": 1, "creation_date": 1571241721, "post_id": 58417371, "comment_id": 103177562, "body": "it is explained here: <a href=\"https://docs.python.org/2/library/ctypes.html\" rel=\"nofollow noreferrer\">docs.python.org/2/library/ctypes.html</a>"}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 1, "creation_date": 1571243928, "post_id": 58417371, "comment_id": 103178591, "body": "You&#39;ll have to provide more than that (for example the way <i>N</i> is initialized in the library)."}], "answers": [{"comments": [{"owner": {"reputation": 1208, "user_id": 9104884, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sVPmy.png?s=128&g=1", "display_name": "Tropilio", "link": "https://stackoverflow.com/users/9104884/tropilio"}, "edited": false, "score": 0, "creation_date": 1571304960, "post_id": 58426774, "comment_id": 103199683, "body": "Thank you Mark! This works perfectly. Do you know by chance if it exists the equivalent in ctypes for a <code>fftw_complex</code> type of variable? Right now I am using a <code>c_double</code> to access a complex variable, and it works, but it doesn&#39;t feel right. Anyhow, thanks again for your complete answer."}, {"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "reply_to_user": {"reputation": 1208, "user_id": 9104884, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sVPmy.png?s=128&g=1", "display_name": "Tropilio", "link": "https://stackoverflow.com/users/9104884/tropilio"}, "edited": false, "score": 1, "creation_date": 1571305189, "post_id": 58426774, "comment_id": 103199818, "body": "@FrancescoBoccardo You could use <code>fftw_complex = c_double * 2</code> to represent that type, or declare <code>class fftw_complex(Structure): _fields_ = (&#39;real&#39;,c_double),(&#39;imag&#39;,c_double)</code> to access it more like a structure."}], "tags": [], "owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "is_accepted": true, "score": 1, "last_activity_date": 1571296122, "creation_date": 1571296122, "answer_id": 58426774, "question_id": 58417371, "link": "https://stackoverflow.com/questions/58417371/access-a-global-pointer-in-c-from-python-using-ctypes/58426774#58426774", "title": "Access a global pointer in C from python using ctypes", "body": "<p>Given this (Windows) DLL source:</p>\n\n<pre><code>int ints[10] = {1,2,3,4,5,6,7,8,9,10};\ndouble doubles[5] = {1.5,2.5,3.5,4.5,5.5};\n\n__declspec(dllexport) char* cp = \"hello, world!\";\n__declspec(dllexport) int* ip = ints;\n__declspec(dllexport) double* dp = doubles;\n</code></pre>\n\n<p>You can access these exported global variables with:</p>\n\n<pre><code>&gt;&gt;&gt; from ctypes import *\n&gt;&gt;&gt; dll = CDLL('./test')\n&gt;&gt;&gt; c_char_p.in_dll(dll,'cp').value\nb'hello, world!'\n&gt;&gt;&gt; POINTER(c_int).in_dll(dll,'ip').contents\nc_long(1)\n&gt;&gt;&gt; POINTER(c_int).in_dll(dll,'ip')[0]\n1\n&gt;&gt;&gt; POINTER(c_int).in_dll(dll,'ip')[1]\n2\n&gt;&gt;&gt; POINTER(c_int).in_dll(dll,'ip')[9]\n10\n&gt;&gt;&gt; POINTER(c_int).in_dll(dll,'ip')[10]   # Undefined behavior, past end of data.\n0\n&gt;&gt;&gt; POINTER(c_double).in_dll(dll,'dp')[0]\n1.5\n&gt;&gt;&gt; POINTER(c_double).in_dll(dll,'dp')[4]\n5.5\n&gt;&gt;&gt; POINTER(c_double).in_dll(dll,'dp')[5] # Also UB, past end of data.\n6.9532144253691e-310\n</code></pre>\n\n<p>To get a list, if you know the size:</p>\n\n<pre><code>&gt;&gt;&gt; list(POINTER(c_int * 10).in_dll(dll,'ip').contents)\n[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\n</code></pre>\n"}], "owner": {"reputation": 1208, "user_id": 9104884, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sVPmy.png?s=128&g=1", "display_name": "Tropilio", "link": "https://stackoverflow.com/users/9104884/tropilio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 58426774, "answer_count": 1, "score": 0, "last_activity_date": 1571306815, "creation_date": 1571241447, "last_edit_date": 1571306815, "question_id": 58417371, "link": "https://stackoverflow.com/questions/58417371/access-a-global-pointer-in-c-from-python-using-ctypes", "title": "Access a global pointer in C from python using ctypes", "body": "<p>I know that if I have a global variable (let's say a double called <em>N</em>) I can read it using:</p>\n\n<pre><code>from ctypes import c_double, CDLL\nc_lib = CDLL('path/to/library.so')\nN = c_double.in_dll(c_lib, \"N\").value\n</code></pre>\n\n<p>but what if my variable is a pointer? How can I read the contents of the pointer in to a python list?</p>\n\n<p>To be clearer, <em>N</em> is declared in the following way in the shared library:</p>\n\n<pre><code>double N = 420.69;\n</code></pre>\n"}, {"tags": ["c++", "c", "linux"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1571241466, "post_id": 58417324, "comment_id": 103177450, "body": "Compiling without errors most certainly does not mean that they&#39;re compatible... but yes, most headers that <i>can</i> be made compatible <i>are so</i> and those that aren&#39;t probably wouldn&#39;t become any better by wrapping them in <code>extern &quot;C&quot; {}</code>"}, {"owner": {"reputation": 1395, "user_id": 3808426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6388b9d4ea9d6e02525fa212aa9d817d?s=128&d=identicon&r=PG&f=1", "display_name": "Demosthenes", "link": "https://stackoverflow.com/users/3808426/demosthenes"}, "edited": false, "score": 2, "creation_date": 1571241758, "post_id": 58417324, "comment_id": 103177576, "body": "It&#39;s not a strict duplicate, but this is similar to <a href=\"https://stackoverflow.com/questions/8087438/do-i-need-an-extern-c-block-to-include-standard-c-headers\" title=\"do i need an extern c block to include standard c headers\">stackoverflow.com/questions/8087438/&hellip;</a>, which might give some insight."}, {"owner": {"reputation": 4425, "user_id": 5983841, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/GHJxG.jpg?s=128&g=1", "display_name": "Rick", "link": "https://stackoverflow.com/users/5983841/rick"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1571242002, "post_id": 58417324, "comment_id": 103177688, "body": "@AnttiHaapala Then what&#39;s the <b>best practice</b> I should have? Like I said, check those marcos first and then decide?"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1571242037, "post_id": 58417324, "comment_id": 103177710, "body": "All the POSIX headers will be fine. And for <code>GNU&#47;Linux</code> all system headers will be <code>C++</code> friendly. Third party libraries you will need to check. (eg <code>libffmpeg</code>)"}, {"owner": {"reputation": 4425, "user_id": 5983841, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/GHJxG.jpg?s=128&g=1", "display_name": "Rick", "link": "https://stackoverflow.com/users/5983841/rick"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1571242235, "post_id": 58417324, "comment_id": 103177805, "body": "@Galik Ok thanks. But to be curious, where did you know that &quot;for GNU/Linux all system headers will be C++ friendly.&quot;? I mean.. I was told by someone.. And I should have known that from the Internet. I&#39;ve almost finished reading <i>APUE</i> and it doesn&#39;t mention it at all!"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1571242335, "post_id": 58417324, "comment_id": 103177855, "body": "@Rick I am currently looking for documentation. But the <code>GNU</code> project that wrote the <code>GNU</code> operating system that runs on most Linux (desktop) implementations also wrote the <code>GNU C&#47;C++</code> compiler and their headers are naturally <code>C++</code> friendly."}, {"owner": {"reputation": 4425, "user_id": 5983841, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/GHJxG.jpg?s=128&g=1", "display_name": "Rick", "link": "https://stackoverflow.com/users/5983841/rick"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1571242704, "post_id": 58417324, "comment_id": 103178013, "body": "@Galik That deduction would be pretty hard for a newbie... I can&#39;t just persuade myself on everything by guessing. ;D (I know you are looking for documenation, thank you )"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1571243283, "post_id": 58417324, "comment_id": 103178265, "body": "@Rick Yes I see that. I am also pretty sure POSIX specifies that their headers should be C++ friendly (GNU OS is a POSIX implementation) but I&#39;m having trouble proving it :)"}, {"owner": {"reputation": 4425, "user_id": 5983841, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/GHJxG.jpg?s=128&g=1", "display_name": "Rick", "link": "https://stackoverflow.com/users/5983841/rick"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1571243475, "post_id": 58417324, "comment_id": 103178376, "body": "@Galik Ok got it. :) Told by 2 experts then a newbie can only take it as a yes. :). But is that true: &quot;You can actually break things doing that as some have C++ only exports&quot;, if I add extra <code>extern &quot;C&quot;</code> block? I saw opposite opinion here.. <a href=\"https://stackoverflow.com/a/8087530/5983841\">stackoverflow.com/a/8087530/5983841</a>"}, {"owner": {"reputation": 4425, "user_id": 5983841, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/GHJxG.jpg?s=128&g=1", "display_name": "Rick", "link": "https://stackoverflow.com/users/5983841/rick"}, "reply_to_user": {"reputation": 1395, "user_id": 3808426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6388b9d4ea9d6e02525fa212aa9d817d?s=128&d=identicon&r=PG&f=1", "display_name": "Demosthenes", "link": "https://stackoverflow.com/users/3808426/demosthenes"}, "edited": false, "score": 0, "creation_date": 1571243708, "post_id": 58417324, "comment_id": 103178482, "body": "@Demosthenes Thank you that&#39;s helpful."}], "owner": {"reputation": 4425, "user_id": 5983841, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/GHJxG.jpg?s=128&g=1", "display_name": "Rick", "link": "https://stackoverflow.com/users/5983841/rick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 136, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1571244222, "creation_date": 1571241278, "last_edit_date": 1571244222, "question_id": 58417324, "link": "https://stackoverflow.com/questions/58417324/are-most-linux-system-headers-c-compatiable", "title": "Are most linux system headers C++ compatiable?", "body": "<p>Are most linux system headers/API C++ compatiable?</p>\n\n<p>Today I was trying to do something like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nextern \"C\" {\n#include &lt;sys/socket.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;netdb.h&gt;\n}\n\n\nint main() {\n  //socket exercise\n}\n</code></pre>\n\n<p>Then I was told by a friend:</p>\n\n<blockquote>\n  <p>shouldn't even need to do that (<strong>the extra extern \"C\" {}</strong>) in most cases as they are system headers.<br>\n  try it first and then worry about it.<br>\n  don't assume system headers aren't compatible.<br>\n  You can actually break things doing that as some have C++ only exports</p>\n</blockquote>\n\n<p>Bu then I asked: </p>\n\n<blockquote>\n  <p>If I include a C library function and compile without error. Does it ensure that the library I included is C++ compatiable and then I can safely use it?</p>\n</blockquote>\n\n<p>The answer is: </p>\n\n<blockquote>\n  <p>No, there's no checking.</p>\n</blockquote>\n\n<hr>\n\n<p>So try it first --> no error --> doesn't ensure that it's C++ compatiable.</p>\n\n<p>Then what should I do for example with Linux system headers? Because I can't simply wrap the system headers with an extra <code>extern \"C\" {}</code> statement (\"I might actually break things doing that as some have C++ only exports\").</p>\n\n<p>So I need to check if there are <code>__BEGIN_DECLS</code> and <code>__END_DECLS</code> MARCOS defined in the system header file for each header file I use? If not, then I need to wrap it with <code>extern \"C\" {}</code>? Otherwise I just include it directly?</p>\n\n<p>FYI, <code>__BEGIN_DECLS</code> and <code>__END_DECLS</code> are defined as: </p>\n\n<pre><code># define __BEGIN_DECLS  extern \"C\" {\n# define __END_DECLS    }\n</code></pre>\n"}, {"tags": ["c", "bash", "gdb"], "comments": [{"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1571243098, "post_id": 58417264, "comment_id": 103178176, "body": "As I recall, doesn&#39;t gdb read commands from .gdbinit in the current working directory?"}], "answers": [{"comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1571242783, "post_id": 58417659, "comment_id": 103178049, "body": "The format can simply be <code>&#39;%s\\n&#39;</code>; <code>printf</code> itself will reuse the format until the arguments are exhausted."}, {"owner": {"reputation": 61700, "user_id": 5291015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZFijZ.jpg?s=128&g=1", "display_name": "Inian", "link": "https://stackoverflow.com/users/5291015/inian"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1571242863, "post_id": 58417659, "comment_id": 103178082, "body": "@chepner: Yes just wanted to be explicit with the args. But fewer seems neater"}, {"owner": {"reputation": 3243, "user_id": 5454400, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/50623f5ea714bc6271f9c34b13b090ab?s=128&d=identicon&r=PG&f=1", "display_name": "peachykeen", "link": "https://stackoverflow.com/users/5454400/peachykeen"}, "edited": false, "score": 0, "creation_date": 1571328691, "post_id": 58417659, "comment_id": 103213691, "body": "Thank you @Inian this solution is great. :)"}], "tags": [], "owner": {"reputation": 61700, "user_id": 5291015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZFijZ.jpg?s=128&g=1", "display_name": "Inian", "link": "https://stackoverflow.com/users/5291015/inian"}, "is_accepted": true, "score": 1, "last_activity_date": 1571242829, "last_edit_date": 1571242829, "creation_date": 1571242524, "answer_id": 58417659, "question_id": 58417264, "link": "https://stackoverflow.com/questions/58417264/scripting-a-repetitive-gdb-job/58417659#58417659", "title": "Scripting a repetitive gdb job", "body": "<p>You can just use a shell trick to pass multiple <code>gdb</code> commands in sequence, new-line separated to standard input of <code>gdb</code>, for it to consume. For e.g. for a single file just do</p>\n\n<pre><code>printf '%s\\n' 'b *0xdeadbeef' 'r &lt; file2' 'x/3a $esp' | gdb ./file1\n</code></pre>\n\n<p>For multiple input files, and feeding one file to <code>gdb</code> at a time, starting with name <code>file*</code>. Use an appropriate glob expression based on your actual filename </p>\n\n<pre><code>for file in file*; do\n    printf '%s\\n' 'b *0xdeadbeef' 'r &lt; file2' 'x/3a $esp' | gdb \"$file\"\ndone\n</code></pre>\n"}], "owner": {"reputation": 3243, "user_id": 5454400, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/50623f5ea714bc6271f9c34b13b090ab?s=128&d=identicon&r=PG&f=1", "display_name": "peachykeen", "link": "https://stackoverflow.com/users/5454400/peachykeen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 58417659, "answer_count": 1, "score": 0, "last_activity_date": 1571242829, "creation_date": 1571241103, "question_id": 58417264, "link": "https://stackoverflow.com/questions/58417264/scripting-a-repetitive-gdb-job", "title": "Scripting a repetitive gdb job", "body": "<p>I want to do the same repetitive job in gdb across a bunch of different files. Namely,</p>\n\n<pre><code>bash$ gdb ./file1\n\n... gdb starts up ...\n\ngdb$ b *0xdeadbeef\ngdb$ r &lt; file2\n\n... some output prints ...\n\ngdb$ x/3a $esp\n\n...  some addresses print ...\n</code></pre>\n\n<p>Is there some way I can script this? Starting up gdb via a script is easy, but passing commands to gdb and getting their output isn't obvious to me. Would I use redirection?</p>\n"}, {"tags": ["c", "function", "pointers", "initialization", "function-pointers"], "comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1571241075, "post_id": 58417160, "comment_id": 103177256, "body": "Typo: <code>int doubeInput (int* inputVal);</code> must be <code>doubleInput</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 12223759, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCaRnsJ-URqxq82yTpgHeQQ03rg3-vlewuqSk2s=k-s128", "display_name": "Grace Neumayer", "link": "https://stackoverflow.com/users/12223759/grace-neumayer"}, "edited": false, "score": 0, "creation_date": 1571240998, "post_id": 58417204, "comment_id": 103177218, "body": "ok that did get rid of those errors but now I&#39;m getting another [Warning] passing argument 1 of &#39;funPtrArr[choice]&#39; makes pointer from integer without a cast."}, {"owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "reply_to_user": {"reputation": 1, "user_id": 12223759, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCaRnsJ-URqxq82yTpgHeQQ03rg3-vlewuqSk2s=k-s128", "display_name": "Grace Neumayer", "link": "https://stackoverflow.com/users/12223759/grace-neumayer"}, "edited": false, "score": 0, "creation_date": 1571241121, "post_id": 58417204, "comment_id": 103177278, "body": "what is the type of <code>inputVal</code> in main()? If it&#39;s <code>int</code> you have to pass <code>&amp;inputVal</code>"}], "tags": [], "owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "is_accepted": false, "score": 2, "last_activity_date": 1571240876, "creation_date": 1571240876, "answer_id": 58417204, "question_id": 58417160, "link": "https://stackoverflow.com/questions/58417160/warning-initialization-from-incompatible-pointer-type-c-array-of-function-poin/58417204#58417204", "title": "warning initialization from incompatible pointer type - C array of function pointers", "body": "<pre><code>int (*funPtrArr[])(int) \n</code></pre>\n\n<p>declares an array of pointers to functions with an <code>int</code> parameter, but your functions have an <code>int *</code> parameter. \nSo the line should be  </p>\n\n<pre><code>int (*funPtrArr[])(int *)={doubleInput, squareInput, cubeInput};\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12223759, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCaRnsJ-URqxq82yTpgHeQQ03rg3-vlewuqSk2s=k-s128", "display_name": "Grace Neumayer", "link": "https://stackoverflow.com/users/12223759/grace-neumayer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1571240876, "creation_date": 1571240705, "question_id": 58417160, "link": "https://stackoverflow.com/questions/58417160/warning-initialization-from-incompatible-pointer-type-c-array-of-function-poin", "title": "warning initialization from incompatible pointer type - C array of function pointers", "body": "<p>I'm having trouble solving this warning</p>\n\n<p>here are my prototypes</p>\n\n<pre><code>int doubeInput (int* inputVal);\nint squareInput (int* inputVal);\nint cubeInput (int* inputVal);\n</code></pre>\n\n<p>the line that has the error is</p>\n\n<pre><code>int (*funPtrArr[])(int)={doubleInput, squareInput, cubeInput};\n</code></pre>\n\n<p>this line is in main</p>\n\n<pre><code>while (choice &gt;0 &amp;&amp; choice &lt;=3)\n    {\n        (*funPtrArr[choice])(inputVal); \n\n    }\n</code></pre>\n\n<p>and here are my functions</p>\n\n<pre><code>//function to perform the menu option 1,user input passed in\nint doubleInput (int* inputVal)\n{\n    //calculate double\n    int answer = (*inputVal) *= (2);\n    printf(\"%d x 2\", inputVal); \n\n    return (answer);\n}\n\n\n//function to perform the menu option 2,user input passed in\nint squareInput (int* inputVal)\n{\n    //calculate square\n    int answer = (*inputVal) *= (*inputVal);\n    printf(\"%d x %d\", inputVal, inputVal);\n\n    return (answer);\n\n}\n\n\n//function to perform the menu option 3,user input passed in\nint cubeInput (int* inputVal)\n{\n    //calculate cube\n    int answer = (*inputVal) *= (*inputVal) *= (*inputVal);\n    printf(\"%d ^ 3\", inputVal);\n\n    return (answer);\n}\n</code></pre>\n\n<p>I keep getting this error, I'm very new to C. My functions are not complete yet because I haven't been able to test them.\nplease help</p>\n"}, {"tags": ["c", "arrays", "pointers", "struct", "initialization"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 1, "creation_date": 1571240176, "post_id": 58416943, "comment_id": 103176783, "body": "Please post sample(s) of the actual errors."}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1571240383, "post_id": 58416943, "comment_id": 103176895, "body": "Also please show the context for this code (i.e. is it global? inside of a function? some of both?)."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1571241303, "post_id": 58416943, "comment_id": 103177370, "body": "aside from anything else, you need a semicolon at the end of your struct definition. It should be <code>struct Profile { .... };</code>"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 12227532, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCQ-UwKbmpmEnGew5EcRNGK-NU0affo-LT6DJYZYA=k-s128", "display_name": "Ben", "link": "https://stackoverflow.com/users/12227532/ben"}, "edited": false, "score": 0, "creation_date": 1571505925, "post_id": 58417176, "comment_id": 103267084, "body": "This was the answer I needed. Thank you Paul."}], "tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 0, "last_activity_date": 1571241881, "last_edit_date": 1571241881, "creation_date": 1571240754, "answer_id": 58417176, "question_id": 58416943, "link": "https://stackoverflow.com/questions/58416943/initializing-an-array-of-structure-objects-where-those-objects-were-previously/58417176#58417176", "title": "Initializing an array of structure objects, where those objects were previously stored in struct variables", "body": "<p>You try to initialize an array with the value of variables. That results in the error that the initializers are not constants. Instead, use:</p>\n\n<pre><code>struct Profile *profileArray[] = {&amp;defaultP, &amp;repeat3, &amp;shortPulse, &amp;shortPulseRepeat3, &amp;longPulse, &amp;longPulseRepeat3, &amp;custom};\n</code></pre>\n\n<p>Now it is an array of pointers to <code>Profile</code> structures.</p>\n\n<p>Note that operating on their values will now change the values in the original structs, for example:</p>\n\n<pre><code>profileArray[0]-&gt;numberOfPulses++;\n</code></pre>\n\n<p>changes the value of <code>defaultP.numberOfPulses</code></p>\n"}], "owner": {"reputation": 3, "user_id": 12227532, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCQ-UwKbmpmEnGew5EcRNGK-NU0affo-LT6DJYZYA=k-s128", "display_name": "Ben", "link": "https://stackoverflow.com/users/12227532/ben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1571241881, "creation_date": 1571239986, "question_id": 58416943, "link": "https://stackoverflow.com/questions/58416943/initializing-an-array-of-structure-objects-where-those-objects-were-previously", "title": "Initializing an array of structure objects, where those objects were previously stored in struct variables", "body": "<p>I defined a structure like so:</p>\n\n<pre><code>struct Profile { \nchar name[15]; // Name of profile for displaying to screen later\nint numberOfPulses;  // Number of pulses that will occur for one Profile run\nint lengthOfPulse;  // Length (uSec) of each pulse produced\nint timeBetweenPulses;  // Time (uSec) between consecutive pulse outputs\n}\n</code></pre>\n\n<p>Then, I create a number of objects of this structure type, storing each in an appropriate variable.</p>\n\n<pre><code>struct Profile defaultP = {\"Default\", 1, 100, 0}; \nstruct Profile repeat3 = {\"Repeat_3\", 3, 100, 2000};\nstruct Profile shortPulse = {\"Short_50us\", 1, 50, 0};\nstruct Profile shortPulseRepeat3 = {\"Sh_50_R3\", 3, 50, 2000};\nstruct Profile longPulse = {\"Single_300\", 1, 300, 0};\nstruct Profile longPulseRepeat3 = {\"Sin_300_R3\", 3, 300, 2000};\nstruct Profile custom = {\"Custom\", 1, 100, 0};\n</code></pre>\n\n<p>Last, I attempt to assign these variables to an array, and this is where I get many errors including mismatch of type and/or redefinition, etc.</p>\n\n<pre><code>struct Profile profileArray[] = {defaultP, repeat3, shortPulse, shortPulseRepeat3, longPulse, longPulseRepeat3, custom};\n</code></pre>\n\n<p>I don't really understand what I am doing wrong, but I am inexperienced and expect it is some sort of pointer issue.\nAn important note is that I <em>must</em> define my struct Profile variables individually as I did, because they are called later in the program.\nThanks.</p>\n"}, {"tags": ["c", "function", "recursion", "definition", "collatz"], "comments": [{"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 1, "creation_date": 1571239670, "post_id": 58416791, "comment_id": 103176515, "body": "The function has undefined behaviour. In some paths of execution it returns nothing."}, {"owner": {"reputation": 1004, "user_id": 2260920, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f48749f790c1e584732e81715f0940ac?s=128&d=identicon&r=PG&f=1", "display_name": "XPD", "link": "https://stackoverflow.com/users/2260920/xpd"}, "edited": false, "score": 0, "creation_date": 1571240098, "post_id": 58416791, "comment_id": 103176724, "body": "Remove last else if and replace it with if"}, {"owner": {"reputation": 10842, "user_id": 2164365, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/RKSgV.png?s=128&g=1", "display_name": "Abra", "link": "https://stackoverflow.com/users/2164365/abra"}, "edited": false, "score": 0, "creation_date": 1571240199, "post_id": 58416791, "comment_id": 103176795, "body": "In a recursive function - which your <code>collatzSequencer</code> function is - the <b><i>first</i></b> condition to check <b><i>must</i></b> be the terminating condition. In your function the recursion terminates when <code>n</code> equals 1. In the code you posted, that is the last condition but it needs to be the first."}], "answers": [{"tags": [], "owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "is_accepted": false, "score": 3, "last_activity_date": 1571240201, "last_edit_date": 1571240201, "creation_date": 1571239882, "answer_id": 58416901, "question_id": 58416791, "link": "https://stackoverflow.com/questions/58416791/main-function-does-not-call-collatzsequencer-function/58416901#58416901", "title": "main function does not call collatzSequencer function", "body": "<p>You are checking for three cases:</p>\n\n<pre><code>n % 2 == 0 (eg. n is Even)\nn % 2 == 1 (eg. n is Odd)\nn == 1  (eg. n is exactly ONE; this is also the only if-statement with a return)\n</code></pre>\n\n<p><strong><em>Except</em></strong>: value <code>1</code> is an <strong>ODD</strong> number, which is captured by the second case.</p>\n\n<p>Your code will <strong><em>never</em></strong> reach the <code>n==1</code> case, because when <code>n</code> is 1, it will <strong>always</strong> get captured by the Odd-value if-statement first.</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1571241003, "last_edit_date": 1571241003, "creation_date": 1571240336, "answer_id": 58417053, "question_id": 58416791, "link": "https://stackoverflow.com/questions/58416791/main-function-does-not-call-collatzsequencer-function/58417053#58417053", "title": "main function does not call collatzSequencer function", "body": "<p>The function has undefined behavior because it does not return anything when n % 2 is equal 0 or 1 and the last else-if statement is not reached by the function control.</p>\n\n<p>Moreover the variable <code>stepCounter</code> can have the maximum value of 1 because it is a local variable of the function that in each recursive call of the function is initialized by zero.</p>\n\n<pre><code>int stepCounter = 0;\n</code></pre>\n\n<p>The function can be defined the following way as it is shown in the demonstrative program</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nsize_t collatzSequencer( unsigned int n ) \n{\n    return  n &lt; 2 ? 0 : 1 + collatzSequencer( n % 2 == 0 ? n / 2 : 3 * n + 1 ); \n}\n\nint main(void) \n{\n    printf( \"%zu\\n\", collatzSequencer( 27 ) );\n\n    return 0;\n}\n</code></pre>\n\n<p>Its output is</p>\n\n<pre><code>111\n</code></pre>\n\n<p>as it is written in <a href=\"https://en.wikipedia.org/wiki/Collatz_conjecture\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Collatz_conjecture</a></p>\n"}], "owner": {"reputation": 45, "user_id": 12161249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc6e63b2077fd50ae745b36481d5ec69?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan Jerai", "link": "https://stackoverflow.com/users/12161249/jonathan-jerai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1571241003, "creation_date": 1571239458, "last_edit_date": 1571240497, "question_id": 58416791, "link": "https://stackoverflow.com/questions/58416791/main-function-does-not-call-collatzsequencer-function", "title": "main function does not call collatzSequencer function", "body": "<p>I am currently working on a project for college, first year computing class. With that being said, I am not asking for the answer, but I am asking more for some advice. In order to begin the project, I have decided to create a function called collatzSequencer that takes one argument type int. </p>\n\n<p>Here is my function prototype: </p>\n\n<pre><code>int collatzSequencer(int);\n</code></pre>\n\n<p>Here is my function definition: </p>\n\n<pre><code>int collatzSequencer(int n) {\n    int stepCounter = 0;\n    if (n % 2 == 0) {\n        stepCounter += 1;\n        collatzSequencer(n / 2);\n    }\n    else if (n % 2 == 1) {\n        stepCounter += 1;\n        collatzSequencer((3 * n) + 1);\n    }\n    else if (n == 1) {\n        printf(\"%d\\n\", n);\n        printf(\"%d\\n\", stepCounter);\n        return 0;\n</code></pre>\n\n<p>Here is where I call the function within my main function: </p>\n\n<pre><code>int main(int argc, char* argv[]) {\n    int num = 5;\n    collatzSequencer(num);\n    return 0;\n}\n</code></pre>\n\n<p>When I run my program, nothing happens and I exit with code 0. I have tried debugging my program, and I see that for some reason my IDE doesn't even run the collatzSequencer function when it is called. Although I am a beginner, I feel like I have enough knowledge to be able to find problems within only 48 lines of code, however I cannot find the issue here. Anyone have any ideas?</p>\n"}, {"tags": ["c", "parsing", "grammar", "yacc", "lex"], "answers": [{"comments": [{"owner": {"reputation": 109, "user_id": 12222101, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TGnJY.jpg?s=128&g=1", "display_name": "BoraKurucu", "link": "https://stackoverflow.com/users/12222101/borakurucu"}, "edited": false, "score": 0, "creation_date": 1571240324, "post_id": 58416747, "comment_id": 103176876, "body": "What is the use yylval in this program,question is this."}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "reply_to_user": {"reputation": 109, "user_id": 12222101, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TGnJY.jpg?s=128&g=1", "display_name": "BoraKurucu", "link": "https://stackoverflow.com/users/12222101/borakurucu"}, "edited": false, "score": 0, "creation_date": 1571262302, "post_id": 58416747, "comment_id": 103186377, "body": "@borakur: it&#39;s used to pass the semantic value of a token from the lexer to the parser."}], "tags": [], "owner": {"reputation": 294, "user_id": 2007980, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1gEDH.gif?s=128&g=1", "display_name": "schaiba", "link": "https://stackoverflow.com/users/2007980/schaiba"}, "is_accepted": false, "score": 0, "last_activity_date": 1571239323, "creation_date": 1571239323, "answer_id": 58416747, "question_id": 58416632, "link": "https://stackoverflow.com/questions/58416632/role-of-yylval-in-lex-and-yacc/58416747#58416747", "title": "Role of yylval in lex and yacc", "body": "<p>Taken from <a href=\"https://www.gnu.org/software/bison/manual/html_node/Token-Values.html\" rel=\"nofollow noreferrer\">here</a> (recommended reading) : </p>\n\n<blockquote>\n  <p>In an ordinary (nonreentrant) parser, the semantic value of the token\n  must be stored into the global variable yylval. When you are using\n  just one data type for semantic values, yylval has that type.</p>\n</blockquote>\n\n<p>Which means, values associated with a token are stored in that particular variable. </p>\n"}, {"tags": [], "owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "is_accepted": false, "score": 4, "last_activity_date": 1571262593, "creation_date": 1571262593, "answer_id": 58422121, "question_id": 58416632, "link": "https://stackoverflow.com/questions/58416632/role-of-yylval-in-lex-and-yacc/58422121#58422121", "title": "Role of yylval in lex and yacc", "body": "<p>The <code>yylval</code> global variable is used to pass the semantic value associated with a token from the lexer to the parser.  The semantic values of symbols are accessed in yacc actions as <code>$1</code>, <code>$2</code>, etc and are set for non-terminals by assigning to <code>$$</code>.  Terminals come from the lexer which needs some way of communicating the semantic value to the parser.  In a reentrant scanner, <code>yylval</code> generally becomes a reference argument to <code>yylex</code> rather than a global variable, but otherwise serves the same purpose.</p>\n\n<p>In your specific example, the token <code>INT</code> has a semantic value which is the value of the integer read.  Since there are no <code>%type</code>/<code>%union</code> declarations in the yacc code, the semantic values just get default <code>int</code> type, which is just fine for holding an integer value.</p>\n"}], "owner": {"reputation": 109, "user_id": 12222101, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TGnJY.jpg?s=128&g=1", "display_name": "BoraKurucu", "link": "https://stackoverflow.com/users/12222101/borakurucu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1894, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1571262593, "creation_date": 1571238936, "question_id": 58416632, "link": "https://stackoverflow.com/questions/58416632/role-of-yylval-in-lex-and-yacc", "title": "Role of yylval in lex and yacc", "body": "<p>I see a lot of examples where some pass the yytext to yylval while others do not.\nHere is a code for a simple adder in lex and yacc</p>\n\n<pre><code>/* add.l */\ndigit [0-9]\n%%\n{digit}+ {sscanf(yytext, \"%d\", &amp;yylval);\nreturn(INT);\n}\n\\+ return(PLUS);\n\\n return(NL);\n. ;\n%%\nint yywrap() { return 1; }\n</code></pre>\n\n<p>and</p>\n\n<pre><code>/* add.y */\n/* L = {INT PLUS INT NL} */\n%token INT PLUS NL\n%%\nadd: INT PLUS INT NL { printf(\"%d\\n\", $1 + $3);}\n%%\n#include \"lex.yy.c\"\nyyerror(char *s) { printf(\"%s\\n\", s); }\nmain() {\n return yyparse();\n}\n</code></pre>\n\n<p>I see no code like printf(yylval) etc. Why the code <code>sscanf(yytext, \"%d\", &amp;yylval)</code> exist here. Is yylval used here somehow,what happens if we don't add that line? When do we need to include such a line in lex?</p>\n"}, {"tags": ["c", "arrays", "debugging", "c-strings", "string-literals"], "comments": [{"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 1, "creation_date": 1571236799, "post_id": 58415845, "comment_id": 103174691, "body": "You have a definition of an array of char * named &quot;words&quot;, but are printing from a variable named keyWords.  Given your usage of <code>&amp;keyWords[i]</code>, one would assume that keyWords is of a different type. If keyWords is of the same type (array of char *), then surely the compiler warned you that you are using it incorrectly."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1571237586, "post_id": 58415845, "comment_id": 103175227, "body": "Now would be <b>good time</b> to find out <b>where your IDE/compiler spits out all those warnings</b>"}, {"owner": {"reputation": 32686, "user_id": 10396, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ddbfebb47432f6599da361df6a135c7c?s=128&d=identicon&r=PG", "display_name": "AShelly", "link": "https://stackoverflow.com/users/10396/ashelly"}, "edited": false, "score": 0, "creation_date": 1571344953, "post_id": 58415845, "comment_id": 103220570, "body": "For an explanation of what was actually happening,  see <a href=\"https://stackoverflow.com/a/7755280/10396\">stackoverflow.com/a/7755280/10396</a> and <a href=\"https://en.wikipedia.org/wiki/Endianness\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Endianness</a>"}], "answers": [{"comments": [{"owner": {"reputation": 207, "user_id": 9383107, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19Rmn.jpg?s=128&g=1", "display_name": "LtMuffin", "link": "https://stackoverflow.com/users/9383107/ltmuffin"}, "edited": false, "score": 0, "creation_date": 1571237861, "post_id": 58415891, "comment_id": 103175417, "body": "Didn&#39;t really need this <code>words[i] != NULL &amp;&amp;</code> but changing those single quotes to double quotes fixed it."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 3, "last_activity_date": 1571236926, "last_edit_date": 1571236926, "creation_date": 1571236618, "answer_id": 58415891, "question_id": 58415845, "link": "https://stackoverflow.com/questions/58415845/array-elements-being-printed-out-in-reverse/58415891#58415891", "title": "Array elements being printed out in reverse", "body": "<p>For starters use string literals instead of the character literals</p>\n\n<pre><code>const char *words[10] = {\"foo\", \"bar\", \"hello\", \"world\"};\n</code></pre>\n\n<p>Pay attention to that all elements of the array starting from the index 4 are initialized by null-pointers.</p>\n\n<p>And just use</p>\n\n<pre><code>for(int i = 0; words[i] != NULL &amp;&amp; i &lt; 10; i++) {\n        printf(\"Keywords: %s\\n\", keyWords[i]);\n                                 ^^^^^^^^ \n    }\n</code></pre>\n\n<p>Here is a demonstrative program</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) \n{\n    const char *words[10] = {\"foo\", \"bar\", \"hello\", \"world\"};\n\n    for ( size_t i = 0; words[i] != NULL &amp;&amp; i &lt; 10; i++ ) puts( words[i] );\n\n    return 0;\n}\n</code></pre>\n\n<p>Its output is</p>\n\n<pre><code>foo\nbar\nhello\nworld\n</code></pre>\n\n<p>Pay attention to that there is a typo in tour code snippet. Either use the name <code>words</code> or <code>keywords</code> for naming the array.</p>\n"}, {"comments": [{"owner": {"reputation": 57, "user_id": 10935093, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pmRyNyW01Oc/AAAAAAAAAAI/AAAAAAAAAr4/6dPveqj4uok/photo.jpg?sz=128", "display_name": "Diogo Cruz", "link": "https://stackoverflow.com/users/10935093/diogo-cruz"}, "edited": false, "score": 0, "creation_date": 1571237425, "post_id": 58415969, "comment_id": 103175107, "body": "on a side note, i don&#180;t recommend that you do i&lt;=9 when the array is , in this example, size=10. You should create a variable called size_array , initialize it as int size_array = sizeof(array) / sizeof(array[0]);  and in the for cycle, use for(i=0, i&lt;size_array; i++)"}], "tags": [], "owner": {"reputation": 57, "user_id": 10935093, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pmRyNyW01Oc/AAAAAAAAAAI/AAAAAAAAAr4/6dPveqj4uok/photo.jpg?sz=128", "display_name": "Diogo Cruz", "link": "https://stackoverflow.com/users/10935093/diogo-cruz"}, "is_accepted": false, "score": 0, "last_activity_date": 1571236866, "creation_date": 1571236866, "answer_id": 58415969, "question_id": 58415845, "link": "https://stackoverflow.com/questions/58415845/array-elements-being-printed-out-in-reverse/58415969#58415969", "title": "Array elements being printed out in reverse", "body": "<p>You should only use \"&amp;keywords\" when you're writing a scanf, not a printf.\nDo the following: </p>\n\n<pre><code>printf(\"Keywords: %s\\n\", keyWords[i]);\n</code></pre>\n"}], "owner": {"reputation": 207, "user_id": 9383107, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19Rmn.jpg?s=128&g=1", "display_name": "LtMuffin", "link": "https://stackoverflow.com/users/9383107/ltmuffin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 58415891, "answer_count": 2, "score": 0, "last_activity_date": 1571237928, "creation_date": 1571236497, "last_edit_date": 1571237928, "question_id": 58415845, "link": "https://stackoverflow.com/questions/58415845/array-elements-being-printed-out-in-reverse", "title": "Array elements being printed out in reverse", "body": "<p>I want to print out all elements from the array to debug my program.</p>\n\n<p>Here is the for loop to print out all elements of the array</p>\n\n<pre><code>for(int i = 0; i &lt;= 9; i++) {\n        printf(\"Words: %s\\n\", &amp;words[i]);\n    }\n</code></pre>\n\n<p>I have a header file that contains the <code>const char</code> array. This is required for a task.\nI know that its probably not good practice to put them in header files.</p>\n\n<pre><code>const char *words[10] = {'foo', 'bar', 'hello', 'world'};\n</code></pre>\n\n<p>My output when I run this code is very weird as it prints everything backwards.</p>\n\n<pre><code>Keywords: oof\nKeywords: rab\nKeywords: olleh\nKeywords: dlrow\n</code></pre>\n\n<p>Sometimes, it would even add random full stops at the end of each keyword.\nWhy is this? I have not written anything else but that.</p>\n"}, {"tags": ["c", "casting", "integer"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1571236390, "post_id": 58415764, "comment_id": 103174399, "body": "It changes the <i>context</i>, that is, what the value <i>means</i>. All computer data consists of a limited set of numbers, which have meaning in context. However it is rather different when casting, say, <code>int</code> to <code>float</code>, when the representation will change."}, {"owner": {"reputation": 1320, "user_id": 5495906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5b319c1b73d80f4155fbdd4fcb81525?s=128&d=identicon&r=PG&f=1", "display_name": "LegendofPedro", "link": "https://stackoverflow.com/users/5495906/legendofpedro"}, "edited": false, "score": 0, "creation_date": 1571236556, "post_id": 58415764, "comment_id": 103174523, "body": "Only an assignment would change a value. Casting from signed (2s-complement) to unsigned is an unsafe cast, and I think, implementation specific."}, {"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 0, "creation_date": 1571236729, "post_id": 58415764, "comment_id": 103174654, "body": "Possible duplicate? <a href=\"https://stackoverflow.com/questions/50605/signed-to-unsigned-conversion-in-c-is-it-always-safe\" title=\"signed to unsigned conversion in c is it always safe\">stackoverflow.com/questions/50605/&hellip;</a>"}, {"owner": {"reputation": 1701, "user_id": 5836577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/931236857b09c3b0aea0f29fb5a23cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Guillaume Petitjean", "link": "https://stackoverflow.com/users/5836577/guillaume-petitjean"}, "reply_to_user": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 0, "creation_date": 1571236778, "post_id": 58415764, "comment_id": 103174673, "body": "I&#39;ve read this post @Adrian but it is about explicit conversion"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 1320, "user_id": 5495906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5b319c1b73d80f4155fbdd4fcb81525?s=128&d=identicon&r=PG&f=1", "display_name": "LegendofPedro", "link": "https://stackoverflow.com/users/5495906/legendofpedro"}, "edited": false, "score": 1, "creation_date": 1571236831, "post_id": 58415764, "comment_id": 103174717, "body": "@LegendofPedro it would be safe with two <code>int</code> values which are known to be non-negative, and you want their sum without danger of <code>int</code> overflow."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1571237436, "post_id": 58415764, "comment_id": 103175112, "body": "@WeatherVane (and LegendofPedro): The cast is perfectly well-defined, without danger of overflow, regardless of the sign of the signed int going in."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1571240720, "post_id": 58415764, "comment_id": 103177075, "body": "@SteveSummit it might be well-defined, but is it useful? How does <code>(unsigned)-1</code>  not &quot;overflow&quot; in the usual sense of the word?"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1571242181, "post_id": 58415764, "comment_id": 103177783, "body": "@WeatherVane Ah, okay, I see your point.  To me it&#39;s &quot;useful&quot; in that it enables a bunch of shortcuts, although I guess those shortcuts are also arguably bad habits.  See also Antti Haapala&#39;s answer."}, {"owner": {"reputation": 1701, "user_id": 5836577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/931236857b09c3b0aea0f29fb5a23cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Guillaume Petitjean", "link": "https://stackoverflow.com/users/5836577/guillaume-petitjean"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1571297991, "post_id": 58415764, "comment_id": 103195856, "body": "@SteveSummit, I have to copy a signed int variable into an element of an array of unsigned int (buffer for transmission on a serial-like port). the data carried by this buffer can have different type and is interpreted by the destination. I know it sounds pretty obvious and I did this kind of stuff hundreds of times but when I started to wonder what is the best way to go, it ended being not so obvious after all :)"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1571309541, "post_id": 58415764, "comment_id": 103202362, "body": "@GuillaumePetitjean Treating data as unsigned for the purposes of data transmissions is one of the &quot;shortcuts&quot; I was referring to in my answer to Weather Vane.  Personally I think it&#39;s a fine technique, although I suppose there&#39;s a question of whether, on the other end, that unsigned int is guaranteed to be convertible back to the original signed int, especially if it had been negative."}, {"owner": {"reputation": 1701, "user_id": 5836577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/931236857b09c3b0aea0f29fb5a23cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Guillaume Petitjean", "link": "https://stackoverflow.com/users/5836577/guillaume-petitjean"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1571312042, "post_id": 58415764, "comment_id": 103203836, "body": "@SteveSummit, yes there are probably better ways to do that, like using unions of byte arrays and structures but this is how the software i&#39;m working on is designed."}], "answers": [{"tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": true, "score": 7, "last_activity_date": 1571297828, "last_edit_date": 1571297828, "creation_date": 1571236739, "answer_id": 58415934, "question_id": 58415764, "link": "https://stackoverflow.com/questions/58415764/does-signed-to-unsigned-casting-in-c-changes-the-bit-values/58415934#58415934", "title": "Does signed to unsigned casting in C changes the bit values", "body": "<p>Conversion from <code>signed int</code> to <code>unsigned int</code> does not change the bit representation <strong>in <a href=\"https://en.wikipedia.org/wiki/Two%27s_complement\" rel=\"nofollow noreferrer\">two\u2019s-complement C implementations</a></strong>, which are the most common, but will change the bit representation for negative numbers, including possible negative zeroes on <em>one\u2019s complement</em> or <em>sign-and-magnitude</em> systems. </p>\n\n<p>This is because the cast <code>(unsigned int) a</code> is <strong>not</strong> defined to retain the bits but the result is the <em>positive remainder</em> of dividing <code>a</code> by <code>UINT_MAX + 1</code> (or as the C standard (<a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.3.1.3p2\" rel=\"nofollow noreferrer\">C11 6.3.1.3p2)</a> says, </p>\n\n<blockquote>\n  <p>the value is converted by repeatedly adding or subtracting one more than the maximum value that can be represented in the new type until the value is in the range of the new type.</p>\n</blockquote>\n\n<p>The two\u2019s complement representation for negative numbers is the most commonly used representation for signed numbers <strong>exactly because</strong> it has this property of negative value <code>n</code> mapping to the same bit pattern as the mathematical value <code>n + UINT_MAX + 1</code> \u2013 it makes it possible to use the same machine instruction for signed and unsigned addition, and the negative numbers will work because of wraparound.</p>\n"}, {"comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1571270914, "post_id": 58415973, "comment_id": 103188490, "body": "You should express the rules in terms of a two\u2019s complement <i>C implementation</i>, not a two\u2019s complement <i>machine</i>. While C is generally intended to use features matching its target processor, the implementation has the ultimate say. If I write a C implementation with one\u2019s complement to support some ancient software I want to display in a computer museum, it is going to obey the one\u2019s complement rules even if the underlying machine is two\u2019s complement."}, {"owner": {"reputation": 1701, "user_id": 5836577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/931236857b09c3b0aea0f29fb5a23cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Guillaume Petitjean", "link": "https://stackoverflow.com/users/5836577/guillaume-petitjean"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1571297700, "post_id": 58415973, "comment_id": 103195717, "body": "@EricPostpischil are you aware of existing one&#39;s complement  <i>machines</i> ?"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 1701, "user_id": 5836577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/931236857b09c3b0aea0f29fb5a23cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Guillaume Petitjean", "link": "https://stackoverflow.com/users/5836577/guillaume-petitjean"}, "edited": false, "score": 0, "creation_date": 1571307942, "post_id": 58415973, "comment_id": 103201492, "body": "@GuillaumePetitjean: As I just stated, C may be implemented via software rather than hardware. Thus, the underlying machine is not the determining factor. So the existence of machines of any particular type is irrelevant. The rules stated in the C standard are clear: The behavior is defined by the C implementation, not by the hardware."}, {"owner": {"reputation": 1701, "user_id": 5836577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/931236857b09c3b0aea0f29fb5a23cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Guillaume Petitjean", "link": "https://stackoverflow.com/users/5836577/guillaume-petitjean"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1571312207, "post_id": 58415973, "comment_id": 103203933, "body": "I fully understoodd that @EricPostpischil. But I guess in practice it doesn&#39;t make sense to choose a 1&#39;s complement C implementation on a 2&#39;s complement machine. Just curious."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 1701, "user_id": 5836577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/931236857b09c3b0aea0f29fb5a23cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Guillaume Petitjean", "link": "https://stackoverflow.com/users/5836577/guillaume-petitjean"}, "edited": false, "score": 0, "creation_date": 1571312846, "post_id": 58415973, "comment_id": 103204303, "body": "@GuillaumePetitjean: Stating the behavior of C integers is determined by the machine is <b>false</b>. Stating the behavior of C integers is determined by the C implementation is <b>true</b>. It is that simple. One is true, the other is false, teaching students false statements is bad, and relying on false statements sometimes leads to errors in unexpected ways. C compilers have become increasingly aggressive about optimization, taking advantage of rules in the C standard even if they are not a direct outcome of the target hardware. There is no reason to make an incorrect statement here."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1571313013, "post_id": 58415973, "comment_id": 103204415, "body": "Really, the mindset of \u201cI know what the truth is, but this works. For me. In the circumstances I am familiar with. With current systems, neglecting any future possibilities. With current software, neglecting any future possibilities. Therefore, I will disregard the known truth and teach a falsehood.\u201d is incomprehensible. Nobody disputes the C standard says the behavior is defined by the <b>implementation</b> not by the <b>machine</b>. So there is no justification for stating otherwise. Teach the truth."}, {"owner": {"reputation": 1701, "user_id": 5836577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/931236857b09c3b0aea0f29fb5a23cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Guillaume Petitjean", "link": "https://stackoverflow.com/users/5836577/guillaume-petitjean"}, "edited": false, "score": 0, "creation_date": 1571313765, "post_id": 58415973, "comment_id": 103204826, "body": "What the f... ???  I didn&#39;t state anything, I just asked a simple question. What&#39;s the big deal ?"}, {"owner": {"reputation": 1701, "user_id": 5836577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/931236857b09c3b0aea0f29fb5a23cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Guillaume Petitjean", "link": "https://stackoverflow.com/users/5836577/guillaume-petitjean"}, "edited": false, "score": 0, "creation_date": 1571313889, "post_id": 58415973, "comment_id": 103204897, "body": "When I wrote &quot;are you aware of existing one&#39;s complement machines ?&quot; there was no irony whatsoever, it was a simple and real question"}, {"owner": {"reputation": 1701, "user_id": 5836577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/931236857b09c3b0aea0f29fb5a23cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Guillaume Petitjean", "link": "https://stackoverflow.com/users/5836577/guillaume-petitjean"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1571315360, "post_id": 58415973, "comment_id": 103205778, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/201021/discussion-between-guillaume-petitjean-and-eric-postpischil\">continue this discussion in chat</a>."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 1701, "user_id": 5836577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/931236857b09c3b0aea0f29fb5a23cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Guillaume Petitjean", "link": "https://stackoverflow.com/users/5836577/guillaume-petitjean"}, "edited": false, "score": 0, "creation_date": 1571316981, "post_id": 58415973, "comment_id": 103206837, "body": "@GuillaumePetitjean: I have no interest in discussing the existence, non-existence, or prevalence of one\u2019s complement machines. It is not relevant to the fact that the C standard states the choice of two\u2019s complement, one\u2019s complement, or sign and magnitude is implementation-defined. If you want to know about them, you can start with the <a href=\"https://en.wikipedia.org/wiki/Ones%27_complement\" rel=\"nofollow noreferrer\">Wikipedia article on one\u2019s complement</a>, which mentions both historic and current systems."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "reply_to_user": {"reputation": 1701, "user_id": 5836577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/931236857b09c3b0aea0f29fb5a23cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Guillaume Petitjean", "link": "https://stackoverflow.com/users/5836577/guillaume-petitjean"}, "edited": false, "score": 0, "creation_date": 1571320323, "post_id": 58415973, "comment_id": 103208940, "body": "@GuillaumePetitjean <i>it doesn&#39;t make sense to choose a 1&#39;s complement C implementation on a 2&#39;s complement machine</i>. Yes and no.  Various kinds of emulators and virtual machines are increasingly common.  I myself have contemplated writing an emulator to let me play with 1&#39;s complement and sign/magnitude arithmetic.  So I see Eric&#39;s point, although I&#39;m not as worried about the wording I used as he is.  (Among other things, there&#39;s probably not a bright line between am emulator you can write in software, and a virtual <i>machine</i>.)"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1571320447, "post_id": 58415973, "comment_id": 103209005, "body": "I didn&#39;t take your &quot;are you aware of any?&quot; question as ironic, but sometimes I do, because that kind of question is quite often a sign that someone is trying to rationalize some unnecessarily nonportable, machine-dependent (sorry, implementation-dependent) programming practice or another.  Those questions are a hot button for those of us who rail against such rationalization, so I quite understand @EricPostpischil &#39;s reaction."}, {"owner": {"reputation": 1701, "user_id": 5836577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/931236857b09c3b0aea0f29fb5a23cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Guillaume Petitjean", "link": "https://stackoverflow.com/users/5836577/guillaume-petitjean"}, "edited": false, "score": 0, "creation_date": 1571320816, "post_id": 58415973, "comment_id": 103209208, "body": "A lot of noise for nothing. And avoid witchunt please."}], "tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": false, "score": 2, "last_activity_date": 1571237691, "last_edit_date": 1571237691, "creation_date": 1571236868, "answer_id": 58415973, "question_id": 58415764, "link": "https://stackoverflow.com/questions/58415764/does-signed-to-unsigned-casting-in-c-changes-the-bit-values/58415973#58415973", "title": "Does signed to unsigned casting in C changes the bit values", "body": "<p>Casting from a signed to an unsigned integer is required to generate the correct arithmetic result (the same number), <em>modulo</em> the size of the unsigned integer, so to speak.  That is, after</p>\n\n<pre><code>int i = anything;\nunsigned int u = (unsigned int)i;\n</code></pre>\n\n<p>and on a machine with 32-bit ints, the requirement is that <code>u</code> is equal to <code>i</code>, modulo 2<sup>32</sup>.</p>\n\n<p>(We could also try to say that <code>u</code> receives the value <code>i % 0x100000000</code>, except it turns out that's not quite right, because the C rules say that when you divide a negative integer by a positive integer, you get a quotient rounded towards 0 and a negative remainder, which isn't the kind of modulus we want here.)</p>\n\n<p>If <code>i</code> is 0 or positive, it's not hard to see that <code>u</code> will have the same bit pattern.\nIf <code>i</code> is negative, <em>and</em> if you're on a 2's complement machine, it turns out the result is also guaranteed to have the same bit pattern.  (I'd love to present a nice proof of that result here, but I don't have time just now to try to construct it.)</p>\n\n<p>The vast majority of today's machines use 2's complement.  But if you were on a 1's complement or sign/magnitude machine, I'm pretty sure the bit patterns would not always be the same.</p>\n\n<p>So, bottom line, the sameness of the bit patterns is <em>not</em> guaranteed by the C Standard, but arises due to a combination of the C Standard's requirements, and the particulars of 2's complement arithmetic.</p>\n"}], "owner": {"reputation": 1701, "user_id": 5836577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/931236857b09c3b0aea0f29fb5a23cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Guillaume Petitjean", "link": "https://stackoverflow.com/users/5836577/guillaume-petitjean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 495, "favorite_count": 0, "accepted_answer_id": 58415934, "answer_count": 2, "score": 3, "last_activity_date": 1571297828, "creation_date": 1571236241, "question_id": 58415764, "link": "https://stackoverflow.com/questions/58415764/does-signed-to-unsigned-casting-in-c-changes-the-bit-values", "title": "Does signed to unsigned casting in C changes the bit values", "body": "<p>I've done some quick tests that a <code>signed int</code> to <code>unsigned int</code> cast in C does not change the bit values (on an online debugger). </p>\n\n<p>What I want to know is whether it is guaranteed by a C standard or just the common (but not 100% sure) behaviour ?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1571235874, "post_id": 58415571, "comment_id": 103174057, "body": "Please format your code properly. Readability is very important."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 0, "creation_date": 1571236973, "post_id": 58415571, "comment_id": 103174811, "body": "@Bodo, thanks for taking the time to make the edit. But do make sure you leave the code compilable."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1571237059, "post_id": 58415571, "comment_id": 103174868, "body": "BTW: it&#39;s not <i>overriding</i> but <i>shadowing</i>."}, {"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1571237240, "post_id": 58415571, "comment_id": 103174977, "body": "@Bathsheba The bug was already present in the original code. When editing for readability I don&#39;t see it as my responsibility to try and compile the code."}, {"owner": {"reputation": 1957, "user_id": 12056564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ec003d02adbcf6a3065097f6f29fa29?s=128&d=identicon&r=PG&f=1", "display_name": "Gerd", "link": "https://stackoverflow.com/users/12056564/gerd"}, "edited": false, "score": 0, "creation_date": 1571302612, "post_id": 58415571, "comment_id": 103198290, "body": "<a href=\"https://www.tutorialspoint.com/cprogramming/c_scope_rules.htm\" rel=\"nofollow noreferrer\">Here is some background</a> on the scope of variables."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 12227133, "user_type": "registered", "profile_image": "https://graph.facebook.com/1232170280303975/picture?type=large", "display_name": "Orfeas Chasaneas", "link": "https://stackoverflow.com/users/12227133/orfeas-chasaneas"}, "edited": false, "score": 0, "creation_date": 1571237289, "post_id": 58415609, "comment_id": 103175015, "body": "If the parameter y in f shadows the global y then why doesn&#39;t it shadow x as well? Or if it shadows y then why doesn&#39;t y take the value of 7+1 = 8? I may not make much sense because i am new in programming and i don&#39;t know the terminology and the processes really well."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 19, "user_id": 12227133, "user_type": "registered", "profile_image": "https://graph.facebook.com/1232170280303975/picture?type=large", "display_name": "Orfeas Chasaneas", "link": "https://stackoverflow.com/users/12227133/orfeas-chasaneas"}, "edited": false, "score": 0, "creation_date": 1571237379, "post_id": 58415609, "comment_id": 103175079, "body": "@OrfeasChasaneas: There&#39;s already a comprehensive answer to this (Vlad). Which part of that answer is not clear?"}, {"owner": {"reputation": 19, "user_id": 12227133, "user_type": "registered", "profile_image": "https://graph.facebook.com/1232170280303975/picture?type=large", "display_name": "Orfeas Chasaneas", "link": "https://stackoverflow.com/users/12227133/orfeas-chasaneas"}, "edited": false, "score": 0, "creation_date": 1571238039, "post_id": 58415609, "comment_id": 103175526, "body": "So let me tell you what i have understood. Because w is declared in main no matter what it will get the value that is assigned to it unaffected by the function f Then, x, will at first take the value 0 and then the value that is assigned to it in main which is 1. The f function will be applied to it so it will become 7. y is a little confusing to me since it is in function f so it should go from 1 to 1+7=8 and then printed. Or is it taking the value of z because f(z)? Finally z as it doesn&#39;t exist in the function f will just take the value assigned to it in main which is 1 and then printed"}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 5, "last_activity_date": 1571236875, "last_edit_date": 1571236875, "creation_date": 1571235782, "answer_id": 58415609, "question_id": 58415571, "link": "https://stackoverflow.com/questions/58415571/how-does-overriding-variables-actually-work/58415609#58415609", "title": "How does overriding variables actually work?", "body": "<p>The <code>w</code> at global scope is initialised automatically to 0.</p>\n\n<p>The <em>automatic</em> variables in <code>main</code> <em>shadow</em> the global ones <em>only</em> in <code>main</code>.</p>\n\n<p>The parameter <code>y</code> in <code>f</code> <em>shadows</em> the global <code>y</code>.</p>\n\n<p>(Note my careful use of terminology here; <em>shadowing</em> is the correct term - <em>overriding</em> is used to describe the substitution of one function for another in polymorphic programming.)</p>\n"}, {"comments": [{"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1571237036, "post_id": 58415707, "comment_id": 103174851, "body": "@OrfeasChasaneas The variable declared in an inner scope hides a variable with the same name in an outer scope. So you are right. w declared in main hides the global variable w in the block scope of main."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1571237399, "post_id": 58415707, "comment_id": 103175091, "body": "Nice and thorough, as usual ;-)"}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 3, "last_activity_date": 1571236051, "creation_date": 1571236051, "answer_id": 58415707, "question_id": 58415571, "link": "https://stackoverflow.com/questions/58415571/how-does-overriding-variables-actually-work/58415707#58415707", "title": "How does overriding variables actually work?", "body": "<p>In main there is declared only one local variable <code>w</code>.</p>\n\n<p>The global variables <code>x, y, z</code> are reinitialized in this statement</p>\n\n<pre><code>w = x = y = z = 1;\n</code></pre>\n\n<p>that is they are set to 1.</p>\n\n<p>Within the function</p>\n\n<pre><code>void f(int y){\nw += 5;\nx += 6;\ny + = 7;\n}\n</code></pre>\n\n<p>there are used all global variables including <code>w</code> and <code>x</code> and the parameter (local variable of the function) y.</p>\n\n<p>So w is set to 5, x is set to 7 ( 1 + 6 ) and the parameter y is set to 8 ( 1 + 7 ).</p>\n\n<p>Changing the parameter does not influence on the value of the global variable y.</p>\n\n<p>In this call in main</p>\n\n<pre><code>printf (\"%d %d %d %d\\n\", w, x, y, z);\n</code></pre>\n\n<p>there is used the local variable w that was early set to 1.</p>\n\n<p>SO the output will be</p>\n\n<pre><code>1 7 1 1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 413, "user_id": 1607083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3735081df3d7c74b561aad0ca7ae26aa?s=128&d=identicon&r=PG", "display_name": "Guillaume Kiz", "link": "https://stackoverflow.com/users/1607083/guillaume-kiz"}, "is_accepted": false, "score": 1, "last_activity_date": 1571237294, "last_edit_date": 1571237294, "creation_date": 1571237171, "answer_id": 58416071, "question_id": 58415571, "link": "https://stackoverflow.com/questions/58415571/how-does-overriding-variables-actually-work/58416071#58416071", "title": "How does overriding variables actually work?", "body": "<p>For W : since you defined a local variable int w the actions outside main doesn't affect its value</p>\n\n<p>For X : the variable is global and value is modified in main (1) then f(+6 => 7)</p>\n\n<p>For Y : since you defined a parameter named y in f() the global variable with the same name won't be used</p>\n\n<p>For Z : since your parameter is a int (and not a pointer) the modification on the parameter won't be kept once the treatment leaves f() (the parameter act as a copy z).</p>\n\n<p>The behavior is clearer if you write it like this : </p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint global_w, global_x, global_y, global_z = 10;\n\nvoid f(int param_y) {\n    global_w += 5;\n    global_x += 6;\n    param_y += 7;\n}\n\nint main(void) {\n    int local_w;\n\n    local_w = global_x = global_y = global_z = 1;\n    f(global_z);\n    printf (\"%d %d %d %d\\n\", local_w, global_x, global_y, global_z);\n    return 0; \n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": false, "score": 1, "last_activity_date": 1571238220, "creation_date": 1571238220, "answer_id": 58416411, "question_id": 58415571, "link": "https://stackoverflow.com/questions/58415571/how-does-overriding-variables-actually-work/58416411#58416411", "title": "How does overriding variables actually work?", "body": "<blockquote>\n  <p>I was expecting that the <code>f(z)</code> function would go to the would go to the <code>f</code> and increment increment <code>w</code> by 5, <code>x</code> by 6, <code>y</code> by 7 and <code>z</code> would stay 1 since all global variables are overwritten in the <code>main</code> function. </p>\n</blockquote>\n\n<p>Yes, this is <em>exactly</em> what is happening. You just need to find out <em>what is <code>w</code> and <code>y</code></em>. </p>\n\n<p>This is not called <strong>overriding</strong> but <strong>shadowing</strong>. You can make it visible with e.g. using GCC with <code>-Wshadow</code> argument (<a href=\"https://godbolt.org/z/NNMj8a\" rel=\"nofollow noreferrer\">Godbolt</a>):</p>\n\n<pre><code>&lt;source&gt;: In function 'f':\n\n&lt;source&gt;:4:12: warning: declaration of 'y' shadows a global declaration [-Wshadow]\n\n    4 | void f(int y){\n      |        ~~~~^\n\n&lt;source&gt;:2:11: note: shadowed declaration is here\n\n    2 | int w, x, y, z = 10;\n      |           ^\n\n&lt;source&gt;: In function 'main':\n\n&lt;source&gt;:11:9: warning: declaration of 'w' shadows a global declaration [-Wshadow]\n\n   11 |     int w;\n      |         ^\n\n&lt;source&gt;:2:5: note: shadowed declaration is here\n\n    2 | int w, x, y, z = 10;\n      |     ^\n\nCompiler returned: 0\n</code></pre>\n\n<p>The shadowing variable is present <em>only</em> in the scope where it is declared and after its declaration within that <em>scope</em> you can use that name refer to only that object, not the shadowed one.</p>\n"}], "owner": {"reputation": 19, "user_id": 12227133, "user_type": "registered", "profile_image": "https://graph.facebook.com/1232170280303975/picture?type=large", "display_name": "Orfeas Chasaneas", "link": "https://stackoverflow.com/users/12227133/orfeas-chasaneas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1571238220, "creation_date": 1571235642, "last_edit_date": 1571236981, "question_id": 58415571, "link": "https://stackoverflow.com/questions/58415571/how-does-overriding-variables-actually-work", "title": "How does overriding variables actually work?", "body": "<p>My teacher gave me some code and asked me what is printed but it includes overriding variables on some cases while on others it doesnt and it gets really confusing.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint w, x, y, z = 10;\n\nvoid f(int y){\n    w += 5;\n    x += 6;\n    y += 7;\n}\n\nint main(void) {\n    int w;\n    w = x = y = z = 1;\n\n    f(z);\n\n    printf (\"%d %d %d %d\\n\", w, x, y, z);\n\n    return 0;\n}\n</code></pre>\n\n<p>I was expecting that the <code>f(z)</code> function would go to the <code>void f</code> and increment <code>w</code> by 5, <code>x</code> by 6, <code>y</code> by 7 and <code>z</code> would stay 1 since all global variables are overwritten in the main function. </p>\n\n<p>It turns out though that the result is 1 7 1 1</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 1, "creation_date": 1571235337, "post_id": 58415456, "comment_id": 103173704, "body": "For starters this loop for(int i = 0; i &lt; sizeof(arr); i++) is invalid.:)"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 1, "creation_date": 1571235379, "post_id": 58415456, "comment_id": 103173737, "body": "@VladfromMoscow: Not necessarily given there&#39;s a hint the type is <code>char</code>."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1571235443, "post_id": 58415456, "comment_id": 103173772, "body": "@Bathsheba I did not pay attention to that the array is of characters.:)"}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1571235580, "post_id": 58415456, "comment_id": 103173872, "body": "<code>rand() % 255 </code> -&gt; <code>rand() % 255;</code>"}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1571236113, "post_id": 58415456, "comment_id": 103174211, "body": "@VladfromMoscow For that <code>sizeof(char) == 1</code> this loop is valid?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1571236252, "post_id": 58415456, "comment_id": 103174318, "body": "The second example will fill the whole array with the same value."}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "reply_to_user": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1571236362, "post_id": 58415456, "comment_id": 103174383, "body": "@EsmaeelE given a <code>char arr[N];</code>, <code>sizeof(arr)</code> is equal to <code>N</code>."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1571236491, "post_id": 58415456, "comment_id": 103174473, "body": "Things can go awry though due to pointer decay. Which is why I bury a &quot;necessarily&quot; in my first comment."}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1571236547, "post_id": 58415456, "comment_id": 103174512, "body": "@FredLarson, I know that but thanks for link. I want to ask Vlad <a href=\"https://stackoverflow.com/questions/58415456/c-rand-in-loop#comment103173704_58415456\">comment</a> is the loop valid as always <code>sizeof(char)==1</code>"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "reply_to_user": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1571236629, "post_id": 58415456, "comment_id": 103174576, "body": "@EsmaeelE: I think it&#39;s valid as long as <code>arr</code> is actually a <code>char</code> <i>array</i> and not a pointer or an array of another type."}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 1, "creation_date": 1571237519, "post_id": 58415456, "comment_id": 103175175, "body": "@FredLarson although that link works but specific link for sizeof in C is <a href=\"https://en.cppreference.com/w/c/language/sizeof\" rel=\"nofollow noreferrer\">this</a>"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "reply_to_user": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1571237921, "post_id": 58415456, "comment_id": 103175452, "body": "@EsmaeelE: Oops, quite right. Oddly, it appears my cppreference search didn&#39;t even give me the option for the C version."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1571238732, "post_id": 58415456, "comment_id": 103175958, "body": "There is shorter, call function <code>randomize(arr, sizeof(arr));</code>, you just need to write the function <code>randomize(unsigned char *, size_t)</code>."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 2, "creation_date": 1571241564, "post_id": 58415456, "comment_id": 103177494, "body": "ITYM <code>rand() % 256</code>, unless you don&#39;t want 255 to appear anywhere for some reason.  Actually, you really want <code>rand() % UCHAR_MAX</code> in a portable program."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "reply_to_user": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1571241598, "post_id": 58415456, "comment_id": 103177507, "body": "@EsmaeelE, <code>sizeof (char)</code> is always 1, since sizes are measured in units of <code>char</code>."}], "answers": [{"tags": [], "owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "is_accepted": false, "score": 1, "last_activity_date": 1571239442, "creation_date": 1571239442, "answer_id": 58416786, "question_id": 58415456, "link": "https://stackoverflow.com/questions/58415456/c-rand-in-loop/58416786#58416786", "title": "C - rand() in loop", "body": "<blockquote>\n  <p>Is there something shorter like maybe:</p>\n\n<pre>memset(arr, rand() % 255, sizeof(arr)); </pre>\n</blockquote>\n\n<p>That would be a bit too short, as it would fill the array with multiple copies of the same value.</p>\n\n<p>The former loop would be fine, assuming that you have declared <code>arr</code> as an array of <code>unsigned char</code> (note that <code>char</code> is signed in many environments, so that <code>rand() % 255</code> could overflow).</p>\n\n<p>If you want something shorter, you could just wrap the loop into a function (a simple one, there's no need to <a href=\"https://wandbox.org/permlink/0mJSgAbnm7pWtPtd\" rel=\"nofollow noreferrer\">overly complicate</a> things). </p>\n"}, {"tags": [], "owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "is_accepted": false, "score": 0, "last_activity_date": 1571240728, "creation_date": 1571240728, "answer_id": 58417169, "question_id": 58415456, "link": "https://stackoverflow.com/questions/58415456/c-rand-in-loop/58417169#58417169", "title": "C - rand() in loop", "body": "<p>Assuming</p>\n\n<ol>\n<li>your array has a multiple of 4 elements</li>\n<li>you want 7-bit randoms (0 to 127)</li>\n<li>your <code>rand()</code> function produces numbers between <code>0x0</code> and <code>0x7fffffff</code></li>\n<li>you can safely convert from <code>char*</code> to <code>uint32_t*</code></li>\n</ol>\n\n<pre><code>void fillrandom(char *dst, size_t len) {\n    for (int k = 0; k &lt; len; k += 4) {\n        *(uint32_t*)(dst+k) = rand() &amp; 0x7f7f7f7f; // fill 4 bytes at once\n    }\n}\n</code></pre>\n\n<p>Yes, too many assumptions!</p>\n\n<p><a href=\"https://ideone.com/7ILLp4\" rel=\"nofollow noreferrer\">https://ideone.com/7ILLp4</a></p>\n"}], "owner": {"reputation": 31, "user_id": 7468921, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V0VwS.jpg?s=128&g=1", "display_name": "pietjanssen", "link": "https://stackoverflow.com/users/7468921/pietjanssen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1571240728, "creation_date": 1571235261, "question_id": 58415456, "link": "https://stackoverflow.com/questions/58415456/c-rand-in-loop", "title": "C - rand() in loop", "body": "<p>I'd like to fill an array of characters with random characters.</p>\n\n<p>What I have right now: </p>\n\n<pre class=\"lang-c prettyprint-override\"><code>for(int i = 0; i &lt; sizeof(arr); i++)\n    {\n        arr[i] = rand() % 255        // Generate a random character\n    }\n</code></pre>\n\n<p>Is there something shorter like maybe:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>memset(arr, rand() % 255, sizeof(arr));\n</code></pre>\n"}, {"tags": ["c", "sockets", "visual-studio-code", "mingw"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1571267944, "post_id": 58415345, "comment_id": 103187863, "body": "If your compiler supports it, you can use <code>#pragma comment(lib, &quot;ws2_32.lib&quot;)</code> (or equivalent) directly in your code."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 11631938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c78ce6427613df88283b3513f1a0b0c9?s=128&d=identicon&r=PG&f=1", "display_name": "Robt800", "link": "https://stackoverflow.com/users/11631938/robt800"}, "edited": false, "score": 0, "creation_date": 1571237917, "post_id": 58415670, "comment_id": 103175450, "body": "Thanks for the reply.  I&#39;m using VSCode.  Its the <code>command line using GCC:</code> which I&#39;m struggling with - where would I access that? Thanks"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 31, "user_id": 11631938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c78ce6427613df88283b3513f1a0b0c9?s=128&d=identicon&r=PG&f=1", "display_name": "Robt800", "link": "https://stackoverflow.com/users/11631938/robt800"}, "edited": false, "score": 0, "creation_date": 1571238130, "post_id": 58415670, "comment_id": 103175578, "body": "Does the example line shown above help you figure it out?"}, {"owner": {"reputation": 31, "user_id": 11631938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c78ce6427613df88283b3513f1a0b0c9?s=128&d=identicon&r=PG&f=1", "display_name": "Robt800", "link": "https://stackoverflow.com/users/11631938/robt800"}, "edited": false, "score": 0, "creation_date": 1571238673, "post_id": 58415670, "comment_id": 103175926, "body": "right - so if I&#39;m following correctly the gcc commands can be simply entered into a normal windows command prompt.  If that&#39;s the case I&#39;ll have a play later tonight"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 31, "user_id": 11631938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c78ce6427613df88283b3513f1a0b0c9?s=128&d=identicon&r=PG&f=1", "display_name": "Robt800", "link": "https://stackoverflow.com/users/11631938/robt800"}, "edited": false, "score": 0, "creation_date": 1571238966, "post_id": 58415670, "comment_id": 103176100, "body": "Yes, that is what the <code>gcc</code> examples above are indicating.  (except that example is using a Linux path :). Windows of coarse will be something like <code>C:\\dir1\\dir2\\libname.lib</code>. Just verify the library exists on your system and enter actual path as shown.  Good luck."}], "tags": [], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "is_accepted": false, "score": 0, "last_activity_date": 1571239113, "last_edit_date": 1571239113, "creation_date": 1571235959, "answer_id": 58415670, "question_id": 58415345, "link": "https://stackoverflow.com/questions/58415345/c-programming-sockets-in-windows-winsock2-h-linking-libraries/58415670#58415670", "title": "C Programming sockets in windows - winsock2.h linking libraries?", "body": "<p>Using Cygwin as an environment to code is not recommenced. (<em><a href=\"https://www.quora.com/What-are-the-pros-and-cons-of-using-Cygwin-and-how-does-it-compare-to-running-Linux-in-a-virtual-machine\" rel=\"nofollow noreferrer\">See pros and cons of using Cygwin</a></em>.) Pick one environment or the other.  i.e. run <code>GCC</code> in either Windows or Linux, but not both.  <em><a href=\"http://www.codeblocks.org/\" rel=\"nofollow noreferrer\">Code::Blocks</a></em> comes bundled with <code>GCC</code>, and has versions that can be used in either Windows or Linux.    </p>\n\n<p>And yes, the error message <code>undefined reference to</code> indicates that although the header file is there, the library it refers to is not.  It needs to be linked using <code>Ws2_32.lib</code>.    </p>\n\n<p>If using the Code::Blocks IDE for example, the instruction for linking a library <em><a href=\"https://www.google.com/search?client=firefox-b-1-d&amp;q=How+to+link+a+libraray+in+Code%3A%3ABlocks\" rel=\"nofollow noreferrer\">are here</a></em>.  </p>\n\n<p>Or, from the command line using <code>GCC</code>:  </p>\n\n<blockquote>\n  <p>For example, if I have a library named libmine.so in\n  /home/newhall/lib/ then I'd do the following to link it into my\n  program:</p>\n</blockquote>\n\n<pre><code>   $ gcc -o myprog myprog.c  -L/home/newhall/lib -lmine  //Linux\n\n   C:\\&gt; gcc -o myprog myprog.c  -LC:\\home\\newhall\\lib -lmine  //Windows\n</code></pre>\n\n<p><em><a href=\"https://www.cs.swarthmore.edu/~newhall/unixhelp/howto_C_libraries.html\" rel=\"nofollow noreferrer\">...more on gcc command line here</a></em>. </p>\n"}, {"tags": [], "owner": {"reputation": 2599, "user_id": 5919934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fPhy9.png?s=128&g=1", "display_name": "Brecht Sanders", "link": "https://stackoverflow.com/users/5919934/brecht-sanders"}, "is_accepted": false, "score": 0, "last_activity_date": 1574679875, "creation_date": 1574679875, "answer_id": 59030338, "question_id": 58415345, "link": "https://stackoverflow.com/questions/58415345/c-programming-sockets-in-windows-winsock2-h-linking-libraries/59030338#59030338", "title": "C Programming sockets in windows - winsock2.h linking libraries?", "body": "<p>The line that links your code to a <code>.exe</code> file needs to include <code>-lws2_32</code> after the <code>.o</code> or <code>.c</code> file.\nSo in your case if your program is called <code>myprogram.c</code> you would need to run:</p>\n\n<pre><code>gcc -o myprogram.exe myprogram.c -lws2_32\n</code></pre>\n\n<p>or if you compile and link in seperate steps:</p>\n\n<pre><code>gcc -c -o myprogram.o myprogram.c\ngcc -o myprogram.exe myprogram.o -lws2_32\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 11631938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c78ce6427613df88283b3513f1a0b0c9?s=128&d=identicon&r=PG&f=1", "display_name": "Robt800", "link": "https://stackoverflow.com/users/11631938/robt800"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 519, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1574679875, "creation_date": 1571234889, "last_edit_date": 1571267892, "question_id": 58415345, "link": "https://stackoverflow.com/questions/58415345/c-programming-sockets-in-windows-winsock2-h-linking-libraries", "title": "C Programming sockets in windows - winsock2.h linking libraries?", "body": "<p>I am trying to build some Windows socket code using C.  I've started with the following basic code to initialize WinSock:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;winsock2.h&gt;\n#include &lt;stdio.h&gt;\n\nint main(int argc, char *argv[])\n{\n    WSADATA wsa;\n    SOCKET s;\n\n    printf(\"\\nInitialising Winsock...\");\n    if (WSAStartup(MAKEWORD(2,2),&amp;wsa) != 0)\n    {\n        printf(\"Failed. Error Code : %d\",WSAGetLastError());\n        return 1;\n    }\n\n    printf(\"Initialised.\\n\");\n};\n</code></pre>\n\n<p>When I run the code, I get errors such as:</p>\n\n<p><code>undefined reference to '__imp_WSAStartup'</code></p>\n\n<p>A quick google suggests this is to do with needing a library linking - <code>ws2_32</code>?</p>\n\n<p>I was using Cygwin, but apparently this is trying to mimic a POSIX environment in Windows and hence MinGW is much more suited in this instance.  Hence I've installed this and updated settings in VSCode to use it.</p>\n\n<p>Now my problem is, I'm not sure how to link the required library.  Do I do it within my program by adding some code?  Do I do it in some sort of separate terminal?</p>\n\n<p>This is all new to me.</p>\n"}, {"tags": ["c", "arrays", "string"], "comments": [{"owner": {"reputation": 1855, "user_id": 8012809, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/37901d8ffb790cc5514656611d079d5c?s=128&d=identicon&r=PG&f=1", "display_name": "A.Joly", "link": "https://stackoverflow.com/users/8012809/a-joly"}, "edited": false, "score": 0, "creation_date": 1571234948, "post_id": 58415293, "comment_id": 103173445, "body": "have you tried continuing your index ? ie. for (i=0 ...) followed by right[i] = &#39;-&#39; and then by for(i;i&lt;strlen(user_input);i++)  ? it&#39;s just an id at glance"}, {"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 0, "creation_date": 1571235205, "post_id": 58415293, "comment_id": 103173608, "body": "Why don&#39;t you just use <code>strncpy()</code> and set <code>&#39;\\0&#39;</code> at the end of the first string?"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1571238801, "post_id": 58415293, "comment_id": 103175997, "body": "it is not possible to do almost <i>anything</i> in C without pointers. There are pointers all over. In your code too."}], "answers": [{"tags": [], "owner": {"reputation": 2429, "user_id": 1098603, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/sb0id.png?s=128&g=1", "display_name": "Matthieu", "link": "https://stackoverflow.com/users/1098603/matthieu"}, "is_accepted": false, "score": 2, "last_activity_date": 1571235396, "last_edit_date": 1571235396, "creation_date": 1571235020, "answer_id": 58415377, "question_id": 58415293, "link": "https://stackoverflow.com/questions/58415293/how-do-i-split-a-string-in-half-without-using-pointers/58415377#58415377", "title": "How do I split a string in half without using pointers", "body": "<p>You have a problem in your last <code>for</code> that will never execute its body because you start from <code>lenght</code> <em>down to</em> <code>mid</code> but test \"while it's less than <code>mid</code>\" which is never true.</p>\n\n<p>Change it to:</p>\n\n<pre><code>for (i = lenght; i &gt;= mid; --i)\n</code></pre>\n\n<p>... and make sure you <em>include</em> <code>mid</code>, otherwise the middle character won't be displayed.</p>\n\n<p>Also, note that you don't really need to count backwards in that loop, which is the cause of the bug. You can do:</p>\n\n<pre><code>for (i = mid; i &lt; lenght; i++) \n</code></pre>\n\n<p>Finally, as noted by @Blaze in <a href=\"https://stackoverflow.com/a/58415415/1098603\">his answer</a>, you should fill in <code>right</code> at the proper offset by <em>subtracting</em> <code>mid</code> from the <code>i</code> index:</p>\n\n<pre><code>right[i-mid] = ...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2429, "user_id": 1098603, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/sb0id.png?s=128&g=1", "display_name": "Matthieu", "link": "https://stackoverflow.com/users/1098603/matthieu"}, "edited": false, "score": 1, "creation_date": 1571235345, "post_id": 58415415, "comment_id": 103173707, "body": "I oversaw <code>i-mid</code> too, +1"}], "tags": [], "owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "is_accepted": true, "score": 2, "last_activity_date": 1571235122, "creation_date": 1571235122, "answer_id": 58415415, "question_id": 58415293, "link": "https://stackoverflow.com/questions/58415293/how-do-i-split-a-string-in-half-without-using-pointers/58415415#58415415", "title": "How do I split a string in half without using pointers", "body": "<p>Consider this part:</p>\n\n<pre><code>for (i = lenght; i &lt; mid; --i) {\n    right[i] = user_input[i];\n}\n</code></pre>\n\n<p>What will the content of <code>right[0]</code> be in this case? You're copying the right part of the string, but to the wrong place. Try this instead:</p>\n\n<pre><code>for (i = mid; i &lt; lenght; i++) {\n    right[i-mid] = user_input[i];\n}\n</code></pre>\n\n<p>Also, you should null-terminate those arrays. All in all it should look like this:</p>\n\n<pre><code>for (i = 0; i &lt; mid; ++i) {\n    left[i] = user_input[i];\n}\nleft[mid] = '\\0';\nfor (i = mid; i &lt; lenght; i++) {\n    right[i-mid] = user_input[i];\n}\nright[i-mid] = '\\0';\nprintf(\"%s-%s\", left, right);\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 11011839, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PehIep6XGFY/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQM-qXIr4YVWIXBg6ZXSknkxIRUuyg/mo/photo.jpg?sz=128", "display_name": "Andres Hansen", "link": "https://stackoverflow.com/users/11011839/andres-hansen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 58415415, "answer_count": 2, "score": 1, "last_activity_date": 1571235396, "creation_date": 1571234734, "last_edit_date": 1571235356, "question_id": 58415293, "link": "https://stackoverflow.com/questions/58415293/how-do-i-split-a-string-in-half-without-using-pointers", "title": "How do I split a string in half without using pointers", "body": "<p>I want to type in a string, which always has a even amount of letters in it. I want it to print out the string but devide in half and connected with \"-\" in between. I manage to print out the first half of the word, but not the last one. </p>\n\n<p>I have tried and make a for loop that starts in the middle of the user_input and is supposed to put in each letter in the string \"right\".</p>\n\n<pre><code>int main() {\n\n    char user_input[STRING_LENGTH] = { 0 };\n    char left[STRING_LENGTH];\n    char right[STRING_LENGTH];\n\n    int lenght, mid, i;\n\n    printf(\"Please type in a string: \");\n\n    fgets(user_input, STRING_LENGTH, stdin);\n    user_input[strlen(user_input) - 1] = 0;\n\n    lenght = strlen(user_input);\n    mid = lenght/2;\n    for (i = 0; i &lt; mid; ++i) {\n        left[i] = user_input[i];\n    }\n\n    for (i = lenght; i &lt; mid; --i) {\n        right[i] = user_input[i];\n    }\n}\n</code></pre>\n\n<p>The expected result if input is 'airplane' would be 'airp - lane'.</p>\n"}, {"tags": ["c", "segmentation-fault", "clang"], "comments": [{"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 3, "creation_date": 1571234644, "post_id": 58415225, "comment_id": 103173222, "body": "Provide minimum compilable code."}, {"owner": {"reputation": 71, "user_id": 6501381, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/7c2f6c507b2b9afbebd8cb90c3466374?s=128&d=identicon&r=PG&f=1", "display_name": "GeorGios", "link": "https://stackoverflow.com/users/6501381/georgios"}, "reply_to_user": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1571234945, "post_id": 58415225, "comment_id": 103173442, "body": "My code also involves reading from two files. How could I include that as well?"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1571234967, "post_id": 58415225, "comment_id": 103173459, "body": "This partial code is hard to analyze. For exanple, <code>word</code> is probably a <code>char *</code> and if that&#39;s true the non-standard <code>print_char</code> takes a <code>char</code> or an <code>int</code> and <code>print_char(grid_char)</code> should at least raise a warning. You <i>did</i> compile with warnings on, did you?"}, {"owner": {"reputation": 1980, "user_id": 11517179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zH4UW.gif?s=128&g=1", "display_name": "daShier", "link": "https://stackoverflow.com/users/11517179/dashier"}, "edited": false, "score": 0, "creation_date": 1571234973, "post_id": 58415225, "comment_id": 103173461, "body": "I believe that <code>match_word = word;</code> should be <code>match_word = &amp;word;</code>, but I could be wrong because it&#39;s a little hard to follow."}, {"owner": {"reputation": 71, "user_id": 6501381, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/7c2f6c507b2b9afbebd8cb90c3466374?s=128&d=identicon&r=PG&f=1", "display_name": "GeorGios", "link": "https://stackoverflow.com/users/6501381/georgios"}, "edited": false, "score": 0, "creation_date": 1571235055, "post_id": 58415225, "comment_id": 103173516, "body": "How could I make the code easier to read? It reads from two files but I am not sure how I could include them."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1571235130, "post_id": 58415225, "comment_id": 103173564, "body": "What are <code>dictionary</code> and <code>dictionary_idx</code>?"}, {"owner": {"reputation": 71, "user_id": 6501381, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/7c2f6c507b2b9afbebd8cb90c3466374?s=128&d=identicon&r=PG&f=1", "display_name": "GeorGios", "link": "https://stackoverflow.com/users/6501381/georgios"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1571235194, "post_id": 58415225, "comment_id": 103173598, "body": "@MOehm I tried that and still doesn&#39;t work, I get a warning to add a &#39;&amp;&#39; before <code>grid[grid_clm + max_grid_length*match_row]</code> but I am not sure why it asks me to do so."}, {"owner": {"reputation": 71, "user_id": 6501381, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/7c2f6c507b2b9afbebd8cb90c3466374?s=128&d=identicon&r=PG&f=1", "display_name": "GeorGios", "link": "https://stackoverflow.com/users/6501381/georgios"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1571235226, "post_id": 58415225, "comment_id": 103173621, "body": "@PaulOgilvie sorry , I included these variables now"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1571235408, "post_id": 58415225, "comment_id": 103173755, "body": "<code>How could I make the code easier to read?</code> Start by rewriting all <code>where()</code> loops into <code>for()</code> loops."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1571235897, "post_id": 58415225, "comment_id": 103174066, "body": "<code>grid_char</code> is a <code>char *</code>, but <code>grid[...]</code> is a character, i.e. a very small integer. By saying <code>grid_char = grid[...]</code>, you make a pointer from that small integer, which is later interpreted as address. So the segmentation fault could happen here: <code>while(*word == *grid_char)</code>. Do as clang tells you and assign apointer to a pointer: <code>grid_char = &amp;grid[...]</code>."}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1571235945, "post_id": 58415225, "comment_id": 103174092, "body": "<code>char *word = dictionary + dictionary_idx[0];</code> Is UB, given that <code>dictionary_idx</code> is uninitialized. <code>grid_char = grid[grid_clm + max_grid_length*match_row];</code> Isn&#39;t <code>grid_char</code> a <code>char *</code>?"}, {"owner": {"reputation": 71, "user_id": 6501381, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/7c2f6c507b2b9afbebd8cb90c3466374?s=128&d=identicon&r=PG&f=1", "display_name": "GeorGios", "link": "https://stackoverflow.com/users/6501381/georgios"}, "reply_to_user": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1571236720, "post_id": 58415225, "comment_id": 103174647, "body": "@Bob__ Yes, grid_char is char *"}, {"owner": {"reputation": 71, "user_id": 6501381, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/7c2f6c507b2b9afbebd8cb90c3466374?s=128&d=identicon&r=PG&f=1", "display_name": "GeorGios", "link": "https://stackoverflow.com/users/6501381/georgios"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1571236777, "post_id": 58415225, "comment_id": 103174672, "body": "Thanks @MOehm, this solved my problem. I am assuming by adding the &amp; as clang proposes, it stores the reference of <code>grid[grid_clm + max_grid_length*match_row];</code> in grid_char."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1571237353, "post_id": 58415225, "comment_id": 103175059, "body": "<code>&amp;grid[i]</code> is a pointer to the char at index <code>i</code> in <code>grid</code>. Without the <code>&amp;</code>, <code>grid[i]</code> is the character at that position itself. Familiarize yourself with pointers. You will see them quite often in C. <code>:)</code>"}, {"owner": {"reputation": 71, "user_id": 6501381, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/7c2f6c507b2b9afbebd8cb90c3466374?s=128&d=identicon&r=PG&f=1", "display_name": "GeorGios", "link": "https://stackoverflow.com/users/6501381/georgios"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1571240114, "post_id": 58415225, "comment_id": 103176739, "body": "@MOehm Thanks for your explanation."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 12227024, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WAsrehCffGY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd9aCNDVv4e2DHhvK7dRmNM0NViHQ/photo.jpg?sz=128", "display_name": "Ivan Monroy", "link": "https://stackoverflow.com/users/12227024/ivan-monroy"}, "is_accepted": false, "score": 0, "last_activity_date": 1571237298, "creation_date": 1571237298, "answer_id": 58416114, "question_id": 58415225, "link": "https://stackoverflow.com/questions/58415225/c-runtime-error-segmentation-fault-how-to-remove-it/58416114#58416114", "title": "C runtime error &quot;Segmentation Fault&quot; - how to remove it?", "body": "<p>I think the problem is at the initialization of the char pointer grid_char, you are assigning a char value instead of a memory address. </p>\n"}], "owner": {"reputation": 71, "user_id": 6501381, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/7c2f6c507b2b9afbebd8cb90c3466374?s=128&d=identicon&r=PG&f=1", "display_name": "GeorGios", "link": "https://stackoverflow.com/users/6501381/georgios"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1571237298, "creation_date": 1571234549, "last_edit_date": 1571235283, "question_id": 58415225, "link": "https://stackoverflow.com/questions/58415225/c-runtime-error-segmentation-fault-how-to-remove-it", "title": "C runtime error &quot;Segmentation Fault&quot; - how to remove it?", "body": "<p>I am not sure why I am getting a segmentation fault in my code. However, I know that it occurs within the <code>while(*word == *grid_char)</code> block. I have also tries to remove the code within it and see what happens and I still get a segmentation fault error. However, If I remove that while loop completely, the error disappears. </p>\n\n<p>I know what seg fault is but I cannot understand why the error appears in this case. I also don't know how to debug it.</p>\n\n<p>Here is my code.</p>\n\n<pre><code>  char grid[(MAX_DIM_SIZE + 1) * MAX_DIM_SIZE + 1];\n  char dictionary[MAX_DICTIONARY_WORDS * (MAX_WORD_SIZE + 1 ) + 1 ];\n  int dictionary_idx[MAX_DICTIONARY_WORDS];\n\n  char *grid_char;\n  char *match_word;\n\n  int grid_idx = 0;\n  char *word = dictionary + dictionary_idx[0];\n  int word_found = 0;\n  int max_grid_height = row; // max y (max_grid_height) on grid\n  int row = 0;\n  int grid_clm = 0;\n\n  // print_char(grid[18]);\n\n  while (grid[grid_clm] != '\\n')\n  {\n    row = 0;\n\n    while(row &lt; max_grid_height)\n    {\n      word = dictionary + dictionary_idx[0]; //first char from dictionary ***\n\n\n      while(*word != '\\0')\n      {\n\n        // print_char(*word);\n\n        int match_row = row; // back to start point grid - using this to compare potential match\n        match_word = word; // back to start point dict - using this to compare potential match\n\n        grid_char = grid[grid_clm + max_grid_length*match_row];\n\n        print_char(grid_char);\n        print_char(*word);\n        print_char(*(match_word+1));\n        print_char(' ');\n\n        while(*word == *grid_char)\n        {\n          match_row++;\n          match_word++;\n\n          if ((*match_word == '\\n' || *match_word == '\\0'))\n          {\n            print_char('F');\n            continue;\n          }\n          if(match_row &gt;= max_grid_height){\n            break;\n          }\n\n          grid_char = grid[grid_clm + max_grid_length*match_row];\n        }\n\n        // next dictionary word\n        while(*word != '\\n' &amp;&amp; *word != '\\0'){\n          word++;\n\n        }\n        if (*word == '\\0'){\n          break;\n        }\n        word++;\n        // print_char(' ');\n\n      }\n      row++; //next grid row\n    }\n    grid_clm++; //next grid column\n  }\n</code></pre>\n"}, {"tags": ["c", "arrays", "string", "pointers"], "comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1571234274, "post_id": 58415067, "comment_id": 103172983, "body": "Change to <code>char *arr[] = {...</code> but note that the strings will now be lieals and read-only. You can copy them, but cannot change the original."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1571234485, "post_id": 58415067, "comment_id": 103173126, "body": "Are you sure that you want a fixed size 2D array for this and not just an array of pointers to strings of variable length?"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1571234720, "post_id": 58415067, "comment_id": 103173278, "body": "quote: &quot;I need the data to be in a pointer string array in order to make use of strcmp in my searching functions&quot; hmmm - what is wrong with <code>strcmp(arr[0], &quot;some string&quot;)</code>? Or <code>strcmp(arr[0], target[0])</code> ? I don&#39;t see why you would want to copy the array to &quot;another array&quot; in order to use <code>strcmp</code>. Seems an XY problem to me"}], "answers": [{"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 1, "last_activity_date": 1571234419, "last_edit_date": 1571234419, "creation_date": 1571234269, "answer_id": 58415124, "question_id": 58415067, "link": "https://stackoverflow.com/questions/58415067/need-to-copy-string-array-into-a-pointer-string-array/58415124#58415124", "title": "Need to copy string array into a pointer string array", "body": "<p>In this declaration</p>\n\n<pre><code>char *arry = (char* )malloc(n);\n</code></pre>\n\n<p>there is allocated only a buffer for n characters. </p>\n\n<p>What you want to do is</p>\n\n<pre><code>char ( *arry )[MAX_LEN] = (char* )malloc( sizeof( char[n][MAX_LEN] ) );\n</code></pre>\n\n<p>Another approach is the following.</p>\n\n<pre><code>char **arry = malloc( n * sizeof( char * ) );\n\nfor ( size_t i = 0; i &lt; n; i++ )\n{\n    arry[i] = malloc( sizeof( char[MAX_LEN] ) ); \n}\n</code></pre>\n\n<p>In any case you will need to free all allocated memory.</p>\n\n<p>In the first case you can just write</p>\n\n<pre><code>free( arry );\n</code></pre>\n\n<p>In the second case you have to write</p>\n\n<pre><code>for ( size_t i = 0; i &lt; n; i++ )\n{\n    free( arry[i] );\n}\n\nfree( arry );\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12226874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7769f5ed71d19d578db5ba934cf38a5?s=128&d=identicon&r=PG&f=1", "display_name": "sannic19", "link": "https://stackoverflow.com/users/12226874/sannic19"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 58415124, "answer_count": 1, "score": 0, "last_activity_date": 1571236374, "creation_date": 1571234105, "last_edit_date": 1571236374, "question_id": 58415067, "link": "https://stackoverflow.com/questions/58415067/need-to-copy-string-array-into-a-pointer-string-array", "title": "Need to copy string array into a pointer string array", "body": "<p>I am writing a program that takes in a string array and sorts it then uses searching functions to search for a target. The string array I have set up works for all my sorting functions but I need the data to be in a pointer string array in order to make use of strcmp in my searching functions. I've attached the most recent attempt in my main function. The rest of the main function includes the sorting and searching function but what I am posting only contains the initialization of the arrays and printing them out. In the actual program, it will be copying the contents from the sorted array after whichever sorting function the user chooses completes. I just want to find out how I would copy the contents.  </p>\n\n<pre class=\"lang-c prettyprint-override\"><code>int main(void) {\n    char arr[][MAX_LEN] = {\"AAAAA\", \"a\", \"AAA\", \"aaaa\", \"AAa\", \"AAAAa\", \"AAa\", \"A\", \"aa\", \"Aaa\"}; // initializes string array \n    char *target[] = {\"A\"};  //initializes target\n    int n = sizeof(arr)/sizeof(arr[0]);  // initializes n \n    char *arry = (char* )malloc(n); // initizlizes *arry\n    int i; \n\n    printf(\"Given string array is:\");\n    for (i = 0; i &lt; n; i++)\n        printf(\" %s \", arr[i]); // prints out arr\n\n    for (i = 0; i &lt; n; i++) { // this was my first attempt to copy arr into *arr. \n        strcpy(arry[i], arr[i]);\n\n        printf(\" %s \", arry[i]); // used for testing to see if copying worked.\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "led"], "comments": [{"owner": {"reputation": 109324, "user_id": 21926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6e61d47f9a6ec0a7a286835e51f3332?s=128&d=identicon&r=PG", "display_name": "Sean Bright", "link": "https://stackoverflow.com/users/21926/sean-bright"}, "edited": false, "score": 2, "creation_date": 1571234032, "post_id": 58414995, "comment_id": 103172799, "body": "Off-topic: Do you have a pull down resistor between the LED and ground?"}, {"owner": {"reputation": 11, "user_id": 6857495, "user_type": "registered", "profile_image": "https://graph.facebook.com/1053877971375628/picture?type=large", "display_name": "gewooneenventje", "link": "https://stackoverflow.com/users/6857495/gewooneenventje"}, "reply_to_user": {"reputation": 109324, "user_id": 21926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6e61d47f9a6ec0a7a286835e51f3332?s=128&d=identicon&r=PG", "display_name": "Sean Bright", "link": "https://stackoverflow.com/users/21926/sean-bright"}, "edited": false, "score": 0, "creation_date": 1571234233, "post_id": 58414995, "comment_id": 103172952, "body": "Yes, i have a 1k resistor before the led."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1571234235, "post_id": 58414995, "comment_id": 103172953, "body": "What LED, what system, what context? What are you even talking about?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 109324, "user_id": 21926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6e61d47f9a6ec0a7a286835e51f3332?s=128&d=identicon&r=PG", "display_name": "Sean Bright", "link": "https://stackoverflow.com/users/21926/sean-bright"}, "edited": false, "score": 0, "creation_date": 1571234317, "post_id": 58414995, "comment_id": 103173015, "body": "@Unimportant Why would a pull resistor do anything? It&#39;s gonna be an output. Do you mean series resistor?"}, {"owner": {"reputation": 109324, "user_id": 21926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6e61d47f9a6ec0a7a286835e51f3332?s=128&d=identicon&r=PG", "display_name": "Sean Bright", "link": "https://stackoverflow.com/users/21926/sean-bright"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1571234464, "post_id": 58414995, "comment_id": 103173107, "body": "@Lundin it&#39;s within the realm of possibility that I have no idea what I am talking about."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 109324, "user_id": 21926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6e61d47f9a6ec0a7a286835e51f3332?s=128&d=identicon&r=PG", "display_name": "Sean Bright", "link": "https://stackoverflow.com/users/21926/sean-bright"}, "edited": false, "score": 2, "creation_date": 1571234537, "post_id": 58414995, "comment_id": 103173163, "body": "@Unimportant Ok :) (This would be why we post these kind of questions at <a href=\"https://electronics.stackexchange.com\">electronics.stackexchange.com</a> and include a schematic!)"}, {"owner": {"reputation": 11, "user_id": 6857495, "user_type": "registered", "profile_image": "https://graph.facebook.com/1053877971375628/picture?type=large", "display_name": "gewooneenventje", "link": "https://stackoverflow.com/users/6857495/gewooneenventje"}, "edited": false, "score": 0, "creation_date": 1571234623, "post_id": 58414995, "comment_id": 103173215, "body": "It is a regular 2V red LED, i am working on the lead-off detection of my ECG PCB. When a electrode isn&#39;t connected correctly, the resistance will go up toggling a bit which i want to see using the led."}, {"owner": {"reputation": 11, "user_id": 6857495, "user_type": "registered", "profile_image": "https://graph.facebook.com/1053877971375628/picture?type=large", "display_name": "gewooneenventje", "link": "https://stackoverflow.com/users/6857495/gewooneenventje"}, "edited": false, "score": 0, "creation_date": 1571234679, "post_id": 58414995, "comment_id": 103173241, "body": "Okay thanks then i&#39;ll go there, I thought this was a software related issue"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1571235400, "post_id": 58414995, "comment_id": 103173749, "body": "If you only toggle the bit, how could you be sure to set it to 0 to switch LED off? Do you count how many time you toggle? Could anyone else call toggle function? Does the toggle function return some state? Nearly all inportant information is missing."}], "answers": [{"tags": [], "owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "is_accepted": false, "score": 0, "last_activity_date": 1571244300, "creation_date": 1571244300, "answer_id": 58418081, "question_id": 58414995, "link": "https://stackoverflow.com/questions/58414995/led-glows-brighter-instead-of-turning-off/58418081#58418081", "title": "LED glows brighter instead of turning off", "body": "<p>If it gets brighter, then before it was dimmer.  To dim an LED, one usually uses pulse-width modulation, which means the LED is being turned on and off very quickly.</p>\n\n<p>The following is speculation ...</p>\n\n<p>If the LED, as part of the PWM process, happens to be in the off state when you try to toggle it, then it will be turned on and the PWM operation (which might be managed for you by a library or interrupt handler) will be canceled.  Thus you see the LED at full brightness, which it brighter than it was.</p>\n"}], "owner": {"reputation": 11, "user_id": 6857495, "user_type": "registered", "profile_image": "https://graph.facebook.com/1053877971375628/picture?type=large", "display_name": "gewooneenventje", "link": "https://stackoverflow.com/users/6857495/gewooneenventje"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1571244300, "creation_date": 1571233937, "last_edit_date": 1571233987, "question_id": 58414995, "link": "https://stackoverflow.com/questions/58414995/led-glows-brighter-instead-of-turning-off", "title": "LED glows brighter instead of turning off", "body": "<p>I am reading a status word that consists of 24 bits, and want the LED to change corresponding to the value of the bit. I want the LED to fully turn off, but sometimes instead of turning off it gets brighter.</p>\n\n<p>I am using a simple pin toggle function to toggle the led</p>\n\n<pre><code>nrf_gpio_pin_toggle(LED_2);\n</code></pre>\n\n<p>Is it possible that the LED value resets to 0 but acctually stays on, making the LED brighter?</p>\n"}, {"tags": ["python", "c", "pip", "packaging", "python-packaging"], "comments": [{"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 0, "creation_date": 1571234301, "post_id": 58414957, "comment_id": 103172996, "body": "<a href=\"https://packaging.python.org/guides/packaging-binary-extensions/\" rel=\"nofollow noreferrer\">packaging.python.org/guides/packaging-binary-extensions</a>"}, {"owner": {"reputation": 10156, "user_id": 962190, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/sxvRS.png?s=128&g=1", "display_name": "Arne", "link": "https://stackoverflow.com/users/962190/arne"}, "edited": false, "score": 0, "creation_date": 1571296912, "post_id": 58414957, "comment_id": 103195280, "body": "do you have an index like pyPI that you will serve the package from, or how will users download/access the package?"}], "answers": [{"tags": [], "owner": {"reputation": 10156, "user_id": 962190, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/sxvRS.png?s=128&g=1", "display_name": "Arne", "link": "https://stackoverflow.com/users/962190/arne"}, "is_accepted": false, "score": 0, "last_activity_date": 1571300092, "last_edit_date": 1571300092, "creation_date": 1571298832, "answer_id": 58427594, "question_id": 58414957, "link": "https://stackoverflow.com/questions/58414957/how-to-include-files-downloadable-from-a-server-into-a-pip-installation/58427594#58427594", "title": "How to include files downloadable from a server into a pip installation?", "body": "<p>You are correct in most of your assumptions. You can offer a source distribution, or <code>sdist</code>, which requires build tools on the target machine in order to be installed. It is often uploaded as a fallback when the <a href=\"https://packaging.python.org/guides/distributing-packages-using-setuptools/#platform-wheels\" rel=\"nofollow noreferrer\">platform wheel</a> that you need doesn't exist, or if you want your users to be able to build it themselves.</p>\n\n<p>Speaking of wheels, that is the name of the current standard for binary python distributions, or <code>bdist</code>s. If your package contains code that needs to be compiled, wheels will end up being platform specific - depending on the used build system that can be <code>Linux</code>, <code>macOS</code>, or <code>Windows</code>. See for example the <a href=\"https://pypi.org/project/scikit-learn/#files\" rel=\"nofollow noreferrer\"><code>sklearn</code></a> entry on pyPI, which features one wheel per os for all supported python versions (plus 32/64 bit support, but that's another story).</p>\n\n<p>If you <a href=\"https://pypi.org/project/scikit-learn/#files\" rel=\"nofollow noreferrer\">specify an index</a> (or just <a href=\"https://pip.pypa.io/en/stable/reference/pip_wheel/#cmdoption-f\" rel=\"nofollow noreferrer\">a directory</a> that has the wheels in it) where pip should install from, it will automatically make sure that it downloads/installs the correct wheel, which avoids writing platform-specific code into your source code. The hard part is building the wheels.</p>\n\n<hr>\n\n<p>Related question:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/51527148/pip-install-and-platform-specific-wheels\">Pip install and platform specific wheels</a></li>\n<li><a href=\"https://stackoverflow.com/questions/31380578/how-to-avoid-building-c-library-with-my-python-package\">How to avoid building C library with my python package?</a> (ends up building platform specific wheels)</li>\n</ul>\n"}], "owner": {"reputation": 1, "user_id": 11399289, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1N77l7uRmSQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reeOdqRrezAMZwuLNaBN9H0fBOq3Q/mo/photo.jpg?sz=128", "display_name": "Ryszard Tuora", "link": "https://stackoverflow.com/users/11399289/ryszard-tuora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1571300092, "creation_date": 1571233817, "question_id": 58414957, "link": "https://stackoverflow.com/questions/58414957/how-to-include-files-downloadable-from-a-server-into-a-pip-installation", "title": "How to include files downloadable from a server into a pip installation?", "body": "<p>I want to create a pip-installable (this is important, we already have a mostly-working easy-install version, but we want to switch to PIP) python package, which is essentially a wrapper for some C functions. As I understand it, I cannot count on users having compilers installed (e.g. Windows), and so preferably I would precompile these files and upload them onto a server. What I would like, is PIP to download a suitable file (I would prefer if it wasn't necessary for all these files to come shipped with the package) during the installation. I've tried reading the docs, but failed to find any solutions for my problem there. Is PIP able to download a compiled C file from a server during the installation? If so, what is the course of action? Should I perhaps try to include a python script, to be run at installation, which would determine the OS and the architecture, and then access a specific link?</p>\n"}, {"tags": ["c++", "c", "gdb", "shared-libraries", "gnu"], "comments": [{"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1571233890, "post_id": 58414921, "comment_id": 103172701, "body": "What is the output of <code>(gdb) ptype mylibraryEntryPoint</code> and does it match the way you declared it in your source?"}, {"owner": {"reputation": 23, "user_id": 3857958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b81a3f6115c5f535cf90cf925ff97694?s=128&d=identicon&r=PG&f=1", "display_name": "sacket", "link": "https://stackoverflow.com/users/3857958/sacket"}, "reply_to_user": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1571234506, "post_id": 58414921, "comment_id": 103173141, "body": "yes it returns int value.   (gdb) ptype mylibraryEntryPoint() type = int"}, {"owner": {"reputation": 2286, "user_id": 3228495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e0163d41bd310e00b055618846734b0?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/3228495/andrew"}, "edited": false, "score": 1, "creation_date": 1571234928, "post_id": 58414921, "comment_id": 103173430, "body": "The return type for your function is <code>int</code>, which can be negative.  You might want to extend your question to explain what you are expecting the output to be and why.  The value you&#39;re seeing is whatever value your function returned, not something generated by GDB, as such the meaning is defined by your function."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1571235201, "post_id": 58414921, "comment_id": 103173604, "body": "It seems to be your library. What value do you return? What value did you expect to see?"}, {"owner": {"reputation": 23, "user_id": 3857958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b81a3f6115c5f535cf90cf925ff97694?s=128&d=identicon&r=PG&f=1", "display_name": "sacket", "link": "https://stackoverflow.com/users/3857958/sacket"}, "edited": false, "score": 0, "creation_date": 1571235691, "post_id": 58414921, "comment_id": 103173945, "body": "I am execting the function to be executed. (It prints some lines as well). Since it is returning negative value it is not really returned by my function, it is an error code of gdb. it tells gdb was unable to run the function."}, {"owner": {"reputation": 2286, "user_id": 3228495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e0163d41bd310e00b055618846734b0?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/3228495/andrew"}, "edited": false, "score": 0, "creation_date": 1571239231, "post_id": 58414921, "comment_id": 103176269, "body": "That&#39;s not how it works.  The value you see is what GDB thinks your function returned after it was called.  I guess depending on architecture GDB could be failing to extract the correct return value (probably unlikely for an int), or maybe there&#39;s something weird with the shared library not being loaded correctly, so it&#39;s not running the code you thought it was...  I&#39;d try <code>break mylibraryEntryPoint</code> then <code>call mylibraryEntryPoint ()</code>.  GDB should stop inside your function and you can step through.  If that doesn&#39;t work then I&#39;d double check the library has loaded correctly."}], "owner": {"reputation": 23, "user_id": 3857958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b81a3f6115c5f535cf90cf925ff97694?s=128&d=identicon&r=PG&f=1", "display_name": "sacket", "link": "https://stackoverflow.com/users/3857958/sacket"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571235795, "creation_date": 1571233692, "last_edit_date": 1571235795, "question_id": 58414921, "link": "https://stackoverflow.com/questions/58414921/gdb-call-returns-negative-value", "title": "gdb &#39;call&#39; returns negative value", "body": "<p>I am trying to load a shared library in gdb and invoke entry function call from gdb. \nFor example mylib.so has mylibraryEntryPoint() function. \nHowever, I am getting a negative output. I am curious what does this error code mean. </p>\n\n<pre><code>    (gdb) sharedlibrary /usr/home/mylib.so\n    Symbols already loaded for /usr/home/mylib.so\n    (gdb) call mylibraryEntryPoint()\n    $9 = -2048550400    // Here is the problem. \n\n</code></pre>\n\n<p>The strange part is this function call works on another Linux VM with same gdb version. \nI am expecting the function to be 'executed' on this machine. (It prints some lines as well). Since it is returning the negative value which is not really returned by my function, it is an error code of gdb. It tells gdb was unable to run the function.</p>\n"}, {"tags": ["c", "arrays", "struct"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 6, "creation_date": 1571232584, "post_id": 58414536, "comment_id": 103171869, "body": "What happened when you tried to compile code using this?"}, {"owner": {"reputation": 1811, "user_id": 12062404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7672893c82da1651cc0a83bb1c54b623?s=128&d=identicon&r=PG&f=1", "display_name": "gst", "link": "https://stackoverflow.com/users/12062404/gst"}, "edited": false, "score": 2, "creation_date": 1571232791, "post_id": 58414536, "comment_id": 103171992, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/9856045/initialize-values-of-array-in-a-struct\">Initialize values of array in a struct</a>"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1571232860, "post_id": 58414536, "comment_id": 103172049, "body": "Short answer: yes, you can define and use a <code>struct</code> like that."}, {"owner": {"reputation": 44734, "user_id": 964243, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/fL1rH.png?s=128&g=1", "display_name": "Boann", "link": "https://stackoverflow.com/users/964243/boann"}, "edited": false, "score": 0, "creation_date": 1571237252, "post_id": 58414536, "comment_id": 103174979, "body": "The word is &quot;medicine&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 12126917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c9855b2bc108036ec6cae5c68dac93d?s=128&d=identicon&r=PG&f=1", "display_name": "mrarray", "link": "https://stackoverflow.com/users/12126917/mrarray"}, "edited": false, "score": 0, "creation_date": 1571236112, "post_id": 58415300, "comment_id": 103174209, "body": "The user itself inputs which sizes they should come in and the balance of that size. So if i later want to limit each medecine to only 10 different sizes i can use the nbofsizes integer and limit it? Also why the second struct? Can i not add an array[1000] in int main and store all structs there? example medecine Medregister[1000]"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 1, "user_id": 12126917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c9855b2bc108036ec6cae5c68dac93d?s=128&d=identicon&r=PG&f=1", "display_name": "mrarray", "link": "https://stackoverflow.com/users/12126917/mrarray"}, "edited": false, "score": 0, "creation_date": 1571239576, "post_id": 58415300, "comment_id": 103176462, "body": "@mrarray yes, of course you can do that. Generally you can do a lot of things in C. From your questions I suppose you never opened your beginner&#39;s C text book. You should definitely do that."}, {"owner": {"reputation": 1, "user_id": 12126917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c9855b2bc108036ec6cae5c68dac93d?s=128&d=identicon&r=PG&f=1", "display_name": "mrarray", "link": "https://stackoverflow.com/users/12126917/mrarray"}, "edited": false, "score": 0, "creation_date": 1571243944, "post_id": 58415300, "comment_id": 103178600, "body": "Dont have one, just powerpoint from teachers lectures but they are hard to understand"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 1, "user_id": 12126917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c9855b2bc108036ec6cae5c68dac93d?s=128&d=identicon&r=PG&f=1", "display_name": "mrarray", "link": "https://stackoverflow.com/users/12126917/mrarray"}, "edited": false, "score": 0, "creation_date": 1571244101, "post_id": 58415300, "comment_id": 103178680, "body": "Then it&#39;s high time to get one."}, {"owner": {"reputation": 1, "user_id": 12126917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c9855b2bc108036ec6cae5c68dac93d?s=128&d=identicon&r=PG&f=1", "display_name": "mrarray", "link": "https://stackoverflow.com/users/12126917/mrarray"}, "edited": false, "score": 0, "creation_date": 1571250579, "post_id": 58415300, "comment_id": 103181509, "body": "do you have skype"}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 0, "last_activity_date": 1571234759, "creation_date": 1571234759, "answer_id": 58415300, "question_id": 58414536, "link": "https://stackoverflow.com/questions/58414536/can-you-have-an-array-in-a-struct/58415300#58415300", "title": "Can you have an array in a struct?", "body": "<p>Yes of course it will work.</p>\n\n<pre><code>struct medecine\n{ \n char name[WORDLENGTH];\n int nbofsizes;           //  this is missing (see explanation below)\n int size[10];\n int BalanceOfeachsize[10];\n}; \n\nstruct medecine pharmacy[1000]:   // pharmacy is an array of 1000 medecines\n</code></pre>\n\n<p>But you most likely need one more struct member that is the number of sizes, maybe some meds come only in 3 sizes, others in 2 etc.</p>\n"}], "owner": {"reputation": 1, "user_id": 12126917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c9855b2bc108036ec6cae5c68dac93d?s=128&d=identicon&r=PG&f=1", "display_name": "mrarray", "link": "https://stackoverflow.com/users/12126917/mrarray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": -10, "last_activity_date": 1571234759, "creation_date": 1571232497, "question_id": 58414536, "link": "https://stackoverflow.com/questions/58414536/can-you-have-an-array-in-a-struct", "title": "Can you have an array in a struct?", "body": "<p>So i am trying to make a code which lets the user register different medecines. Each medecine is gonna be a struct called medecine. The user can input the name of the medecine which is max 20 letters, the different sizes the medecine comes in, and how many there is of each size. I was thinking of something like this V. When i later want to use functions to store medecine input in a larg array which can hold 1000 medecines, is this gonna work ?</p>\n\n<pre><code>struct medecine\n{ \n char name[WORDLENGTH];\n int size[10];\n int BalanceOfeachsize[10];\n}; \n</code></pre>\n"}, {"tags": ["c", "minix"], "comments": [{"owner": {"reputation": 1980, "user_id": 11517179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zH4UW.gif?s=128&g=1", "display_name": "daShier", "link": "https://stackoverflow.com/users/11517179/dashier"}, "edited": false, "score": 0, "creation_date": 1571232388, "post_id": 58414440, "comment_id": 103171734, "body": "Where is <code>count</code> being initialized?"}, {"owner": {"reputation": 71, "user_id": 6217540, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/1133091263408553/picture?type=large", "display_name": "Fernando Gardeazabal", "link": "https://stackoverflow.com/users/6217540/fernando-gardeazabal"}, "reply_to_user": {"reputation": 1980, "user_id": 11517179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zH4UW.gif?s=128&g=1", "display_name": "daShier", "link": "https://stackoverflow.com/users/11517179/dashier"}, "edited": false, "score": 0, "creation_date": 1571232457, "post_id": 58414440, "comment_id": 103171784, "body": "@daShier out of the function , I just did not mention, and on the keyboard.h I have it like extern int cout;"}, {"owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 2, "creation_date": 1571233617, "post_id": 58414440, "comment_id": 103172520, "body": "So is <code>OK</code> equal to 1 or 0? You don&#39;t increment <code>count</code> if something other than <code>OK</code> is returned. Why do you need to return <code>count</code> if it&#39;s a global? But we&#39;d need to see more code to really investigate."}, {"owner": {"reputation": 71, "user_id": 6217540, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/1133091263408553/picture?type=large", "display_name": "Fernando Gardeazabal", "link": "https://stackoverflow.com/users/6217540/fernando-gardeazabal"}, "edited": false, "score": 0, "creation_date": 1571247599, "post_id": 58414440, "comment_id": 103180244, "body": "I don&#39;t have to actually return count, I can return one of the other functions since they return an integer.But they return 0 if it works,if it does not work  1.    So the OK is 0. I could change them to return the counter inside of it, instead of doing it on the keyboard.c  file which is not making it work."}, {"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 0, "creation_date": 1571250459, "post_id": 58414440, "comment_id": 103181457, "body": "The screenshot you provide shows 12 lines of output, and a count of 12. Why is this not correct? Please give us a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> accompanied with input, expected output and received output! BTW, you should copy text directly in your question instead of a screenshot."}, {"owner": {"reputation": 71, "user_id": 6217540, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/1133091263408553/picture?type=large", "display_name": "Fernando Gardeazabal", "link": "https://stackoverflow.com/users/6217540/fernando-gardeazabal"}, "edited": false, "score": 0, "creation_date": 1571254388, "post_id": 58414440, "comment_id": 103183209, "body": "I can&#39;t copy text from the minix virtual machine, sorry."}], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 6217540, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/1133091263408553/picture?type=large", "display_name": "Fernando Gardeazabal", "link": "https://stackoverflow.com/users/6217540/fernando-gardeazabal"}, "is_accepted": false, "score": 0, "last_activity_date": 1571690534, "creation_date": 1571690534, "answer_id": 58493855, "question_id": 58414440, "link": "https://stackoverflow.com/questions/58414440/cant-manage-to-count-the-right-number-of-times-i-call-a-function/58493855#58493855", "title": "Can&#39;t manage to count the right number of times I call a function", "body": "<p>The problem was that I was only adding to the counter when the function worked as expected, if it was called and gave an error, it would not count I just added the counter to the util_sys_inb:</p>\n\n<pre><code>uint32_t count = 0;\n\nint (util_sys_inb)(int port, uint8_t *value) {\n\n   uint32_t val;\n\n    if(sys_inb(port, &amp;val) != OK) return 1;\n\n      *value = (uint8_t)val;\n\n      count++;\n\n      return count;\n\n        }\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 6217540, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/1133091263408553/picture?type=large", "display_name": "Fernando Gardeazabal", "link": "https://stackoverflow.com/users/6217540/fernando-gardeazabal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1571690534, "creation_date": 1571232212, "question_id": 58414440, "link": "https://stackoverflow.com/questions/58414440/cant-manage-to-count-the-right-number-of-times-i-call-a-function", "title": "Can&#39;t manage to count the right number of times I call a function", "body": "<p>I once managed to return the function, and with that when I run the test it passed I Have this function on utils.c:</p>\n\n<pre><code>  int (util_sys_inb)(int port, uint8_t *value) {\n\n         uint32_t val;\n\n          if(sys_inb(port, &amp;val) != OK) return 1;\n\n          *value = (uint8_t)val;\n\n          return 0;\n\n         }\n</code></pre>\n\n<p>This one is just for wrapping up the function sys_inb(), because of the format of the argument.\nThen I need to get right the number of times that this is called.\nI have this other file : keyboard.c with a global variable, extern int count.</p>\n\n<p>with this function:</p>\n\n<pre><code>       int sys_inb_count(int port, uint8_t *value) {\n\nif(util_sys_inb(port,value)!=OK){ return 1;}\n\n      count++;\n\n      return count;\n\n   }\n</code></pre>\n\n<p>I got this right once, returning the value on the first function, but then I did something differently, and the tests were not able to pass anymore.\nAppreciate if you can help, me, I've been pulling my hair out.</p>\n\n<p>I tried, put the counter straight on the first function and it worked, but then I tried to do it again, and then I could not anymore.</p>\n\n<p>It compiles and runs but I get this:\n<a href=\"https://imgur.com/a/YZsd1Ok\" rel=\"nofollow noreferrer\">https://imgur.com/a/YZsd1Ok</a></p>\n"}, {"tags": ["c", "docker", "cmake", "libsodium"], "comments": [{"owner": {"reputation": 11727, "user_id": 3987854, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OV64v.jpg?s=128&g=1", "display_name": "squareskittles", "link": "https://stackoverflow.com/users/3987854/squareskittles"}, "edited": false, "score": 0, "creation_date": 1571232823, "post_id": 58414268, "comment_id": 103172016, "body": "It&#39;s possible that within <code>Findsodium.cmake</code>, the <code>find_package(PkgConfig QUIET)</code> call is failing (silently), which could explain why the <code>sodium_*</code> variables are not getting populated..."}, {"owner": {"reputation": 493, "user_id": 1764970, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4Jeu7.png?s=128&g=1", "display_name": "Yuri van Geffen", "link": "https://stackoverflow.com/users/1764970/yuri-van-geffen"}, "reply_to_user": {"reputation": 11727, "user_id": 3987854, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OV64v.jpg?s=128&g=1", "display_name": "squareskittles", "link": "https://stackoverflow.com/users/3987854/squareskittles"}, "edited": false, "score": 0, "creation_date": 1571239087, "post_id": 58414268, "comment_id": 103176174, "body": "That could be. Maybe the EDIT I added helps with understanding what&#39;s going wrong?"}], "answers": [{"comments": [{"owner": {"reputation": 493, "user_id": 1764970, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4Jeu7.png?s=128&g=1", "display_name": "Yuri van Geffen", "link": "https://stackoverflow.com/users/1764970/yuri-van-geffen"}, "edited": false, "score": 0, "creation_date": 1571239052, "post_id": 58414495, "comment_id": 103176146, "body": "Thanks for the comment, I added it to the list of installs and have a different error message. Unfortunately not a very helpful one to me. Could you see if it rings a bell? See EDIT in original question ^."}, {"owner": {"reputation": 493, "user_id": 1764970, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4Jeu7.png?s=128&g=1", "display_name": "Yuri van Geffen", "link": "https://stackoverflow.com/users/1764970/yuri-van-geffen"}, "edited": false, "score": 0, "creation_date": 1571239874, "post_id": 58414495, "comment_id": 103176614, "body": "A google search on the new error gave me the solution of adding <code>pkg-config</code> to the install list as well. This seems to work! Could you add that to your answer? Then I&#39;ll mark it as solution."}], "tags": [], "owner": {"reputation": 12307, "user_id": 8192635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcaf44c9ff9eeeb51fc78c816891d75a?s=128&d=identicon&r=PG&f=1", "display_name": "LinPy", "link": "https://stackoverflow.com/users/8192635/linpy"}, "is_accepted": true, "score": 4, "last_activity_date": 1571239932, "last_edit_date": 1571239932, "creation_date": 1571232362, "answer_id": 58414495, "question_id": 58414268, "link": "https://stackoverflow.com/questions/58414268/libsodium-dependency-in-cmake-doesnt-resolve-in-docker-container/58414495#58414495", "title": "LibSodium dependency in CMake doesn&#39;t resolve in Docker container", "body": "<p>add this to your <code>dockerfile</code>:</p>\n\n<pre><code>RUN apt-get install -y libsodium-dev pkg-config\n</code></pre>\n"}], "owner": {"reputation": 493, "user_id": 1764970, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4Jeu7.png?s=128&g=1", "display_name": "Yuri van Geffen", "link": "https://stackoverflow.com/users/1764970/yuri-van-geffen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 898, "favorite_count": 1, "accepted_answer_id": 58414495, "answer_count": 1, "score": 4, "last_activity_date": 1571239946, "creation_date": 1571231738, "last_edit_date": 1571239946, "question_id": 58414268, "link": "https://stackoverflow.com/questions/58414268/libsodium-dependency-in-cmake-doesnt-resolve-in-docker-container", "title": "LibSodium dependency in CMake doesn&#39;t resolve in Docker container", "body": "<p>I'm trying to build my C project using Docker and CMake. CMake'ing using <code>cmake . &amp;&amp; cmake --build .</code> works fine on my system (MacOS), using the following CMakeLists.txt:</p>\n\n<pre><code>cmake_minimum_required (VERSION 3.0)\nproject (PROJECTNAME)\n\n# Include libsodium\nlist(APPEND CMAKE_MODULE_PATH \"${CMAKE_CURRENT_LIST_DIR}/cmake/modules\")\nfind_package(sodium REQUIRED)\n\ninclude_directories(include)\nfile(GLOB SOURCES \"src/*.c\")\n\nset(LIBRARY_OUTPUT_PATH \"build\")\n\nadd_library(project STATIC ${SOURCES})\ntarget_link_libraries(project sodium)\n</code></pre>\n\n<p>The Findsodium.cmake, required by <code>find_package(sodium REQUIRED)\n</code> is a direct copy of the file on <a href=\"https://github.com/jedisct1/libsodium/blob/master/contrib/Findsodium.cmake\" rel=\"nofollow noreferrer\">the libsodium GitHub</a>.</p>\n\n<p>Now I'm trying to build this using <code>docker build</code> and the following Dockerfile (I know some packages it installs are redundant):</p>\n\n<pre><code>FROM ubuntu:16.04\nCOPY . /project\nRUN apt-get update &amp;&amp; apt-get -y install \\\n  build-essential \\\n  cmake \\\n  libsodium18 \\\n  curl\nRUN cd project &amp;&amp; cmake .\nRUN cmake --build .\n</code></pre>\n\n<p>Unfortunately this fails with the following message:</p>\n\n<pre><code>CMake Error at /usr/share/cmake-3.5/Modules/FindPackageHandleStandardArgs.cmake:148 (message):\n  Could NOT find sodium (missing: sodium_LIBRARY_RELEASE sodium_LIBRARY_DEBUG\n  sodium_INCLUDE_DIR)\nCall Stack (most recent call first):\n  /usr/share/cmake-3.5/Modules/FindPackageHandleStandardArgs.cmake:388 (_FPHSA_FAILURE_MESSAGE)\n  cmake/modules/Findsodium.cmake:226 (find_package_handle_standard_args)\n  CMakeLists.txt:8 (find_package)\n</code></pre>\n\n<p>When I run a normal docker container and perform the steps manually the same error is thrown. Somehow libsodium can not be located, even though it is properly installed:</p>\n\n<pre><code>$ ldconfig -p | grep sodium\nlibsodium.so.18 (libc6,x86-64) =&gt; /usr/lib/x86_64-linux-gnu/libsodium.so.18\n</code></pre>\n\n<p>Anyone with experience using <strong>Findsodium.cmake</strong> on Ubuntu, or other, that can give some insight?</p>\n\n<p><strong>EDIT</strong>: after the suggestion of LinPy I added <code>libsodium-dev</code> as a package to be installed and the error changes slightly:</p>\n\n<pre><code>CMake Error at /usr/share/cmake-3.5/Modules/FindPackageHandleStandardArgs.cmake:148 (message):\n  Could NOT find sodium (missing: sodium_LIBRARY_RELEASE\n  sodium_LIBRARY_DEBUG) (found version \"\n\n  #ifndef sodium_version_H\n\n  #define sodium_version_H\n\n\n\n  #include \"export.h\"\n\n\n\n  #define SODIUM_VERSION_STRING \"1.0.8\"\n\n  ...\n  ...\n\n  \")\nCall Stack (most recent call first):\n  /usr/share/cmake-3.5/Modules/FindPackageHandleStandardArgs.cmake:388 (_FPHSA_FAILURE_MESSAGE)\n  cmake/modules/Findsodium.cmake:226 (find_package_handle_standard_args)\n  CMakeLists.txt:8 (find_package)\n</code></pre>\n\n<p>It seems that some things could be found now, but not the debug and release library?</p>\n\n<p>Dockerfile looks like this now:</p>\n\n<pre><code>FROM ubuntu:16.04\nCOPY . /project\nRUN apt-get update &amp;&amp; apt-get -y install \\\n  build-essential \\\n  cmake \\\n  libsodium18 \\ # also tried it without this line\n  libsodium-dev \\\n  curl\nRUN cd project &amp;&amp; cmake .\nRUN cmake --build .\n</code></pre>\n\n<p><strong>EDIT 2</strong>: Adding <code>pkg-config</code> as well fixes the second error.</p>\n"}, {"tags": ["c", "linker-errors"], "comments": [{"owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 5, "creation_date": 1571231096, "post_id": 58414011, "comment_id": 103170927, "body": "Include <code>obj.h</code> in <code>main.c</code>, not <code>obj.c</code>."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1571231232, "post_id": 58414011, "comment_id": 103170999, "body": "Never include .c files."}, {"owner": {"reputation": 61, "user_id": 10692664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2cd4d8a260205cdd4d2303aab66cdf?s=128&d=identicon&r=PG&f=1", "display_name": "Sergey Teryan", "link": "https://stackoverflow.com/users/10692664/sergey-teryan"}, "reply_to_user": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 0, "creation_date": 1571231256, "post_id": 58414011, "comment_id": 103171014, "body": "@500-InternalServerError It&#39;s compiling now, but I can&#39;t even instantiate <code>struct obj</code>."}, {"owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 2, "creation_date": 1571231324, "post_id": 58414011, "comment_id": 103171048, "body": "Post another question."}, {"owner": {"reputation": 61, "user_id": 10692664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2cd4d8a260205cdd4d2303aab66cdf?s=128&d=identicon&r=PG&f=1", "display_name": "Sergey Teryan", "link": "https://stackoverflow.com/users/10692664/sergey-teryan"}, "reply_to_user": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 0, "creation_date": 1571232090, "post_id": 58414011, "comment_id": 103171553, "body": "@500-InternalServerError Do I do it like this: <code>void* obj = malloc(sizeof(obj_size())); \tobj_setid(obj, 5); \tprintf(&quot;%d\\n&quot;, obj_getid(obj)); \tfree(obj);</code>"}, {"owner": {"reputation": 8984, "user_id": 2485966, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dZj6A.jpg?s=128&g=1", "display_name": "Ruud Helderman", "link": "https://stackoverflow.com/users/2485966/ruud-helderman"}, "edited": false, "score": 0, "creation_date": 1571232466, "post_id": 58414011, "comment_id": 103171788, "body": "@SergeyTeryan You can find the rationale for the rate limit here: <a href=\"https://meta.stackoverflow.com/questions/256323/questions-are-now-rate-limited-to-1-per-90-minutes\" title=\"questions are now rate limited to 1 per 90 minutes\">meta.stackoverflow.com/questions/256323/&hellip;</a>"}, {"owner": {"reputation": 61, "user_id": 10692664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2cd4d8a260205cdd4d2303aab66cdf?s=128&d=identicon&r=PG&f=1", "display_name": "Sergey Teryan", "link": "https://stackoverflow.com/users/10692664/sergey-teryan"}, "reply_to_user": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 0, "creation_date": 1571232726, "post_id": 58414011, "comment_id": 103171951, "body": "@500-InternalServerError I&#39;ve been told to ask another one, so that rationale is apparently irrelevant to my case."}, {"owner": {"reputation": 8984, "user_id": 2485966, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dZj6A.jpg?s=128&g=1", "display_name": "Ruud Helderman", "link": "https://stackoverflow.com/users/2485966/ruud-helderman"}, "edited": false, "score": 0, "creation_date": 1571235366, "post_id": 58414011, "comment_id": 103173721, "body": "@SergeyTeryan Sorry for the misunderstanding. You can find a more thorough explanation here: <a href=\"https://meta.stackexchange.com/questions/222735/can-i-ask-only-one-question-per-post\" title=\"can i ask only one question per post\">meta.stackexchange.com/questions/222735/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "is_accepted": true, "score": 1, "last_activity_date": 1571250931, "creation_date": 1571250931, "answer_id": 58419699, "question_id": 58414011, "link": "https://stackoverflow.com/questions/58414011/linker-error-when-trying-to-implement-encapsulation-in-c/58419699#58419699", "title": "Linker error when trying to implement encapsulation in C", "body": "<p><em>Answering your question in its current state:</em></p>\n\n<p>Your error is to include \"obj.c\" instead of \"obj.h\".</p>\n\n<p>The <code>#include</code> directive works (shortly said) such as if the contents of the named file replaces the directive.</p>\n\n<p>If you compile \"main.c\" and \"obj.c\" you are giving everything in \"obj.c\" twice to the linker. That's why it gives you the error.</p>\n\n<hr>\n\n<p>You can edit your question to update it if you have new information.</p>\n"}], "owner": {"reputation": 61, "user_id": 10692664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2cd4d8a260205cdd4d2303aab66cdf?s=128&d=identicon&r=PG&f=1", "display_name": "Sergey Teryan", "link": "https://stackoverflow.com/users/10692664/sergey-teryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 58419699, "answer_count": 1, "score": 0, "last_activity_date": 1571250931, "creation_date": 1571231000, "question_id": 58414011, "link": "https://stackoverflow.com/questions/58414011/linker-error-when-trying-to-implement-encapsulation-in-c", "title": "Linker error when trying to implement encapsulation in C", "body": "<p>Consider these files:</p>\n\n<p>obj.h</p>\n\n<pre><code>#pragma once\nstruct obj;\n\nint obj_size(void);\nvoid obj_set_id(struct obj*, int);\nint get_obj_id(struct obj*);\n</code></pre>\n\n<p>obj.c</p>\n\n<pre><code>#include \"obj.h\"\n\n\nstruct obj\n{\n    int id;\n};\n\nint obj_size(void) {\n    return sizeof(struct obj);\n}\n\nvoid obj_setid(struct obj* o, int i) {\n    o-&gt;id = i;\n}\n\nint obj_getid(struct obj* o) {\n    return o-&gt;id;\n}\n</code></pre>\n\n<p>main.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"obj.c\"\n\nint main()\n{\n    puts(\"hello world\");\n}\n</code></pre>\n\n<p>As it turns out, this is the way to implement encapsulation in C (<a href=\"https://en.wikipedia.org/wiki/Opaque_pointer#C\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Opaque_pointer#C</a>). However when I try to compile that I get a linker error. These are Visual Studio's complaints: </p>\n\n<blockquote>\n  <p>Error LNK2005 _obj_getid already defined in obj.obj<br>\n  Error LNK2005 _obj_setid already defined in obj.obj<br>\n  Error LNK2005 _obj_size already defined in obj.obj<br>\n  Error LNK1169 one or more multiply defined symbols found</p>\n</blockquote>\n\n<p>It's set to compile as C code if anyone's wondering.</p>\n\n<p>These are the errors I get when I try to compile it with clang:</p>\n\n<pre><code>\ueea7 clang-7 -pthread -lm -o main main.c obj.c\n/tmp/obj-36b460.o: In function `obj_getid':\nobj.c:(.text+0x30): multiple definition of `obj_getid'\n/tmp/main-a2c3dc.o:main.c:(.text+0x30): first defined here\n/tmp/obj-36b460.o: In function `obj_setid':\nobj.c:(.text+0x10): multiple definition of `obj_setid'\n/tmp/main-a2c3dc.o:main.c:(.text+0x10): first defined here\n/tmp/obj-36b460.o: In function `obj_size':\nobj.c:(.text+0x0): multiple definition of `obj_size'\n/tmp/main-a2c3dc.o:main.c:(.text+0x0): first defined here\n/tmp/main-a2c3dc.o: In function `main':\nmain.c:(.text+0x59): undefined reference to `obj_set_id'\nclang-7: error: linker command failed with exit code 1 (use -v to see invocation)\ncompiler exit status 1\n</code></pre>\n\n<p>I've tried <code>extern</code>-ing the function declarations in <code>obj.h</code>, but that didn't work either. Same thing for <code>inline</code>-ing them. </p>\n"}, {"tags": ["c", "factorial"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1571229253, "post_id": 58413358, "comment_id": 103169774, "body": "&quot;using only main function&quot; and &quot;good solution&quot; are mutually exclusive."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1571229533, "post_id": 58413358, "comment_id": 103169937, "body": "<code>if (num &gt; 0)</code> should be changed to <code>while(num &gt; 1)</code> and knock out the recursion. And the recursion in the input loop. The entire program needs to be restructured."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1571229803, "post_id": 58413358, "comment_id": 103170120, "body": "Avoid calling <code>main()</code> recursively.   Everything you seek to do - including calculating the factorial of an entered value - can be done using loop constructs."}, {"owner": {"reputation": 11, "user_id": 12137580, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FBFi6SpeTH8/AAAAAAAAAAI/AAAAAAAAABY/jC0XvNhQGJU/photo.jpg=k-s128", "display_name": "piyush kumar", "link": "https://stackoverflow.com/users/12137580/piyush-kumar"}, "edited": false, "score": 0, "creation_date": 1571234145, "post_id": 58413358, "comment_id": 103172885, "body": "Ok but i want solution in which recursion is used and only in main function how to do that"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 12137580, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FBFi6SpeTH8/AAAAAAAAAAI/AAAAAAAAABY/jC0XvNhQGJU/photo.jpg=k-s128", "display_name": "piyush kumar", "link": "https://stackoverflow.com/users/12137580/piyush-kumar"}, "edited": false, "score": 0, "creation_date": 1571251197, "post_id": 58413486, "comment_id": 103181831, "body": "Want factorial program using recursion but only with calling main function and with do you want to continue options how to do it"}, {"owner": {"reputation": 141, "user_id": 8526217, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dFPZP.jpg?s=128&g=1", "display_name": "raphael martin", "link": "https://stackoverflow.com/users/8526217/raphael-martin"}, "reply_to_user": {"reputation": 11, "user_id": 12137580, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FBFi6SpeTH8/AAAAAAAAAAI/AAAAAAAAABY/jC0XvNhQGJU/photo.jpg=k-s128", "display_name": "piyush kumar", "link": "https://stackoverflow.com/users/12137580/piyush-kumar"}, "edited": false, "score": 0, "creation_date": 1571256408, "post_id": 58413486, "comment_id": 103184074, "body": "@piyushkumar yes but your recursive calling of main is ok in your if. The problem is the one in the do while. You should remove it"}], "tags": [], "owner": {"reputation": 141, "user_id": 8526217, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dFPZP.jpg?s=128&g=1", "display_name": "raphael martin", "link": "https://stackoverflow.com/users/8526217/raphael-martin"}, "is_accepted": false, "score": 0, "last_activity_date": 1571229358, "creation_date": 1571229358, "answer_id": 58413486, "question_id": 58413358, "link": "https://stackoverflow.com/questions/58413358/program-to-find-factorial-of-number-using-only-main-function/58413486#58413486", "title": "program to find factorial of number using only main function", "body": "<p>It asks again because you are calling recursively the main function in your do,while.\nNot sure what you wanted to do with this recursive calling but pretty sure you should remove this line.</p>\n\n<p>=> Remove \"main();\"</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 12137580, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FBFi6SpeTH8/AAAAAAAAAAI/AAAAAAAAABY/jC0XvNhQGJU/photo.jpg=k-s128", "display_name": "piyush kumar", "link": "https://stackoverflow.com/users/12137580/piyush-kumar"}, "edited": false, "score": 0, "creation_date": 1571240578, "post_id": 58413828, "comment_id": 103176997, "body": "I have to do with using recursion and only calling main function"}], "tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": false, "score": 1, "last_activity_date": 1571230468, "creation_date": 1571230468, "answer_id": 58413828, "question_id": 58413358, "link": "https://stackoverflow.com/questions/58413358/program-to-find-factorial-of-number-using-only-main-function/58413828#58413828", "title": "program to find factorial of number using only main function", "body": "<p>The recursive call of <code>main</code> is an absolute \"no go\". Never do that. Instead simply put the calculation of the factorial just after you have received the input.</p>\n\n<p>I'll not call it a good solution but the code below is close to your own code and avoids the recursive call of <code>main</code>.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\n    char ch;\n    int num;\n    unsigned long long int res;\n    int temp;\n\n    do\n    {\n        printf(\"Enter the value of Number:\");\n        if (scanf(\"%d\", &amp;num) != 1 || (num &lt; 0))\n        {\n            printf(\"Invalid input.\");\n            return 0;\n        }\n\n        // Calculate\n        temp = num;\n        res = 1;\n        while (num)\n        {\n          res = res * num;\n          num = num - 1;\n        }\n\n        printf(\"Factorial of %d is\\t:%llu\\n\", temp, res);\n        printf(\"Do you want to continue y/n :\");\n        scanf(\"\\n%c\", &amp;ch);\n\n    } while (ch == 'y' || ch == 'Y');\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 26, "user_id": 12175829, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBJiP1Hzphsmhtt8a013BWUBt4wOpe0rviFq0Ff=k-s128", "display_name": "Nitrafix", "link": "https://stackoverflow.com/users/12175829/nitrafix"}, "is_accepted": false, "score": 1, "last_activity_date": 1571230909, "creation_date": 1571230909, "answer_id": 58413982, "question_id": 58413358, "link": "https://stackoverflow.com/questions/58413358/program-to-find-factorial-of-number-using-only-main-function/58413982#58413982", "title": "program to find factorial of number using only main function", "body": "<p>Does the recursive call of \"main()\" stand for reset of the program?\nIf so, why are you not using a infinite loop to check for input and then in the body you do factorial computing, outputs, such as prints etc., and ending the program when not needed anymore with a certain input.\nI believe this should do the trick:</p>\n\n<pre><code>        do {\n        printf(\"Do you want to find a factorial? Y || y to continue\");\n        scanf(\"%c\", &amp;ch);\n        printf(\"Enter the value of Number:\");\n        scanf(\"%d\", &amp;num);\n\n//Here you do your factorial number computation and error checks\n\n    } while (ch == 'y' || ch == 'Y');\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 12137580, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FBFi6SpeTH8/AAAAAAAAAAI/AAAAAAAAABY/jC0XvNhQGJU/photo.jpg=k-s128", "display_name": "piyush kumar", "link": "https://stackoverflow.com/users/12137580/piyush-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 241, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1571230909, "creation_date": 1571228953, "last_edit_date": 1571229011, "question_id": 58413358, "link": "https://stackoverflow.com/questions/58413358/program-to-find-factorial-of-number-using-only-main-function", "title": "program to find factorial of number using only main function", "body": "<p>When i run this program it will give answer also but when selecting option n then it will again ask to enter options check it and provide good solution how it can be done</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\n    char ch;\n    static int count = 0;\n    static int num;\n    static unsigned long long int res;\n    static int temp;\n\n    if (count == 0)\n    {\n        printf(\"Enter the value of Number:\");\n        scanf(\"%d\", &amp;num);\n        if (num &lt; 0)\n        {\n            printf(\"Invalid input.\");\n            return 0;\n        }\n        temp = num;\n        res = 1;\n        count++;\n\n        do {\n            main();\n            printf(\"Factorial of %d is\\t:%llu\\n\", temp, res);\n            printf(\"Do you want to continue y/n :\");\n            scanf(\"\\n%c\", &amp;ch);\n\n        } while (ch == 'y' || ch == 'Y');\n    }\n\n    //Logic for recursive factorial function\n    if (num &gt; 0)\n    {\n        res = res * num;\n        num = num - 1;\n        main();\n    }\n    else\n    {\n        count = 0;\n    }\n    return 1;\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "if-statement"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1571227686, "post_id": 58412917, "comment_id": 103168892, "body": "I think you need <code>&amp;&amp;</code> instead of <code>||</code>."}, {"owner": {"reputation": 3723, "user_id": 1169091, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/5vE4L.jpg?s=128&g=1", "display_name": "nicomp", "link": "https://stackoverflow.com/users/1169091/nicomp"}, "edited": false, "score": 0, "creation_date": 1571227719, "post_id": 58412917, "comment_id": 103168915, "body": "All the || need to be &amp;&amp;"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 4, "creation_date": 1571227827, "post_id": 58412917, "comment_id": 103168965, "body": "Or use <code>!strchr(&quot;aeiou&quot;, *p)</code> instead of all those conditionals."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 1, "creation_date": 1571228000, "post_id": 58412917, "comment_id": 103169065, "body": "This has the <i><a href=\"https://stackoverflow.com/help/on-topic\">parts of a good question</a></i>. Why the down vote I wonder?"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 2, "creation_date": 1571228144, "post_id": 58412917, "comment_id": 103169148, "body": "<i>Or use <code>!strchr(&quot;aeiou&quot;, *p)</code>...</i>  That also has the advantage that the filter character(s) don&#39;t have to be hard coded."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1571228248, "post_id": 58412917, "comment_id": 103169215, "body": "@AndrewHenle you could hammer, I spent my cv already ^"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1571228601, "post_id": 58412917, "comment_id": 103169434, "body": "@ryyker not every umpteenth duplicate of the same question is worth keeping. Most notably the question listing says: <i>&quot;Questions about a problem that can no longer be reproduced or that was caused by a simple typographical error. <b>This can often be avoided by identifying and closely inspecting the shortest program necessary to reproduce the problem before posting.</b>&quot;</i> If the <code>if</code> condition does not behave as expected there would be substantially shorter <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> for the question. Note that the problem is exactly addressed in the <i>other</i> duplicate question which <i>too</i>, alike, &quot;uses a pointer&quot;."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1571228705, "post_id": 58412917, "comment_id": 103169491, "body": "@AnttiHaapala - you linked aclosed question, which in turn links a closed question.  If you follow the  <i>has an answer here</i> links, the first <i><a href=\"https://stackoverflow.com/questions/6115801/how-do-i-test-if-a-variable-does-not-equal-either-of-two-values\">non-closed question</a></i> is so far removed from this one as not to be recognized as the same topic, or even same language."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1571228747, "post_id": 58412917, "comment_id": 103169517, "body": "@ryyker but it <b>is</b> a duplicate. That&#39;s the question you should reopen, not this. It had better answers too."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1571229899, "post_id": 58412917, "comment_id": 103170186, "body": "Still, it&#39;s not very welcoming to shower a new user with downvotes. The question is well presented even if duplicates were not found."}], "answers": [{"tags": [], "owner": {"reputation": 2583, "user_id": 3202696, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/QmN8u.png?s=128&g=1", "display_name": "TobiSH", "link": "https://stackoverflow.com/users/3202696/tobish"}, "is_accepted": false, "score": 5, "last_activity_date": 1571227755, "creation_date": 1571227755, "answer_id": 58412976, "question_id": 58412917, "link": "https://stackoverflow.com/questions/58412917/how-to-delete-vowels-in-a-string-using-pointers/58412976#58412976", "title": "How to delete vowels in a string using pointers", "body": "<p>Check your if condition. It is always true. Use <code>&amp;&amp;</code> instead of <code>||</code>. In your example an 'e' does not equal an 'a' and so the condition becomes true and the char is added to the resulting string. Try this:</p>\n\n<p><code>if (*p != 'a' &amp;&amp; *p != 'e' &amp;&amp;*p != 'i' &amp;&amp; *p != 'o' &amp;&amp; *p != 'u')</code></p>\n"}, {"tags": [], "owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "is_accepted": false, "score": 6, "last_activity_date": 1571227819, "creation_date": 1571227819, "answer_id": 58412995, "question_id": 58412917, "link": "https://stackoverflow.com/questions/58412917/how-to-delete-vowels-in-a-string-using-pointers/58412995#58412995", "title": "How to delete vowels in a string using pointers", "body": "<p>This here:</p>\n\n<pre><code>if (*p != 'a' || *p != 'e' || *p != 'i' || *p != 'o' || *p != 'u')\n</code></pre>\n\n<p>Should be:</p>\n\n<pre><code>if (*p != 'a' &amp;&amp; *p != 'e' &amp;&amp; *p != 'i' &amp;&amp; *p != 'o' &amp;&amp; *p != 'u')\n</code></pre>\n\n<p>On a side note, you can leave out the <code>char *p, *q;</code> part. Just do it like this:</p>\n\n<pre><code>int main()\n{\n    char str1[10] = \"hello\";\n    char str2[10];\n    filter(str1, str2);\n    printf(\"%s\", str2);\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1571234285, "post_id": 58413805, "comment_id": 103172988, "body": "Are you sure with <code>aeioy</code>? Just asking, I do not write russian ...;)"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1571234365, "post_id": 58413805, "comment_id": 103173039, "body": "@alk It is a typo. But an English-spoken man said me that y can be considered as a vowel.:)"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1571246967, "post_id": 58413805, "comment_id": 103179967, "body": "As a memory device,  <i><a href=\"https://www.youtube.com/watch?v=1FLVzBjx0r0\" rel=\"nofollow noreferrer\">this may</a></i> (or may not) help. :)"}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1571234321, "last_edit_date": 1571234321, "creation_date": 1571230413, "answer_id": 58413805, "question_id": 58412917, "link": "https://stackoverflow.com/questions/58412917/how-to-delete-vowels-in-a-string-using-pointers/58413805#58413805", "title": "How to delete vowels in a string using pointers", "body": "<p>The condition</p>\n\n<pre><code>if (*p != 'a' || *p != 'e' || *p != 'i' || *p != 'o' || *p != 'u')\n</code></pre>\n\n<p>is wrong. For example when <code>*p</code> is equal to <code>'e'</code> that is when *p is a vowel the expression <code>*p != 'a'</code> yields true and this is the result of the full condition.</p>\n\n<p>You have to write the if statement like</p>\n\n<pre><code>if (*p != 'a' &amp;&amp; *p != 'e' &amp;&amp; *p != 'i' &amp;&amp; *p != 'o' &amp;&amp; *p != 'u')\n</code></pre>\n\n<p>or like</p>\n\n<pre><code>if ( ! ( *p == 'a' || *p == 'e' || *p = 'i' || *p != 'o' || *p != 'u') )\n</code></pre>\n\n<p>Also following the convention for the standard C string functions the function should return pointer to the result string. And the first parameter shall have the qualifier const because the pointed string is not changed in the function.</p>\n\n<p>Instead of using the long expression in the if condition you could use the standard C function <code>strchr</code> to check whether the pointed character is a vowel or not.</p>\n\n<p>Here is a demonstrative program that shows how the function can be defined.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nchar * filter( const char *p, char *q )\n{\n    const char *vowels = \"aeiou\";\n    char *result = q;\n\n    do\n    {\n        if ( *p == '\\0' || strchr( vowels, *p ) == NULL ) *q++ = *p;\n    } while ( *p++ );\n\n    return result;\n}\n\nint main(void) \n{\n    char *str1 = \"hello\";\n    char str2[10];\n\n    puts( filter( str1, str2 ) );\n\n    return 0;\n}\n</code></pre>\n\n<p>Its output is </p>\n\n<pre><code>hll\n</code></pre>\n\n<p>And you could modify the function in the way that it would skip an upper case vowels.</p>\n\n<p>For example</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n\nchar * filter( const char *p, char *q )\n{\n    const char *vowels = \"aeiou\";\n    char *result = q;\n\n    do\n    {\n        if ( *p == '\\0' || strchr( vowels, tolower( ( unsigned char )*p ) ) == NULL ) \n        {\n            *q++ = *p;\n        }           \n    } while ( *p++ );\n\n    return result;\n}\n\nint main(void) \n{\n    char *str1 = \"HELLO\";\n    char str2[10];\n\n    puts( filter( str1, str2 ) );\n\n    return 0;\n}\n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>HLL\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "is_accepted": false, "score": 0, "last_activity_date": 1571233141, "last_edit_date": 1571233141, "creation_date": 1571232556, "answer_id": 58414551, "question_id": 58412917, "link": "https://stackoverflow.com/questions/58412917/how-to-delete-vowels-in-a-string-using-pointers/58414551#58414551", "title": "How to delete vowels in a string using pointers", "body": "<p>The other answers all address the logic error clearly.<br>\nThis one simply offers a thought on readability or style. (and a small logic improvement.)   </p>\n\n<p>Constructs such as the one used in your code to produce a result can become large and distracting, making the flow of your code less readable.  Once the logic, and accuracy of a construct has been achieved, it is sometimes possible to move that code out of the main body, and replace it with something more readable that accomplishes the same thing.  for example, your code could be changed to: </p>\n\n<pre><code>    void filter (char *p, char *q)\n    {\n      while (*p != '\\0')\n        {\n          if (NOT_VOWEL(*p))\n        {\n          *q = *p;\n          q++;\n        }\n          p++;\n        }\n      *q = '\\0';\n    }\n</code></pre>\n\n<p>By using a <em><a href=\"https://gcc.gnu.org/onlinedocs/cpp/Macros.html\" rel=\"nofollow noreferrer\">C Macro</a></em>:</p>\n\n<p>Where the macro is defined as: </p>\n\n<pre><code>//either in a header file, or somewhere at \n//the top of of the .c file where it is used.\n#define NOT_VOWEL(x) (x != 'a' &amp;&amp; x != 'e' &amp;&amp; x != 'i' &amp;&amp; x != 'o' &amp;&amp; tolower(x) != 'u')  \n</code></pre>\n\n<p>Or, with a small improvement:</p>\n\n<pre><code>#define NOT_VOWEL(x) (tolower(x) != 'a' &amp;&amp; tolower(x) != 'e' &amp;&amp; tolower(x) != 'i' &amp;&amp; tolower(x) != 'o' &amp;&amp; tolower(x) != 'u')  \n</code></pre>\n\n<p>(Note, this variation of the macro includes the <em><a href=\"https://www.tutorialspoint.com/c_standard_library/c_function_tolower.htm\" rel=\"nofollow noreferrer\">tolower()</a></em> function, to exclude uppercase vowels as well.)</p>\n"}], "owner": {"reputation": 39, "user_id": 11538294, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-q8G4tbW2M8I/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rePV3qfCo5W8v2ChI7PFQwx77vcSQ/mo/photo.jpg?sz=128", "display_name": "Veera Sudhan", "link": "https://stackoverflow.com/users/11538294/veera-sudhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 255, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1571234321, "creation_date": 1571227560, "question_id": 58412917, "link": "https://stackoverflow.com/questions/58412917/how-to-delete-vowels-in-a-string-using-pointers", "title": "How to delete vowels in a string using pointers", "body": "<p>I want to delete vowels from a string and print the remaining. But my <em>if</em> condition doesn't behave as expected.</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n\n    void filter (char *p, char *q)\n    {\n      while (*p != '\\0')\n        {\n          if (*p != 'a' || *p != 'e' || *p != 'i' || *p != 'o' || *p != 'u')\n        {\n          *q = *p;\n          q++;\n        }\n          p++;\n        }\n      *q = '\\0';\n    }\n\n    int main ()\n    {\n      char str1[10] = \"hello\";\n      char str2[10];\n      char *p, *q;\n      p = &amp;str1[0];\n      q = &amp;str2[0];\n      filter (p, q);\n      printf (\"%s\", str2);\n      return 0;\n    }\n</code></pre>\n\n<p>I expect the output to be <strong>hll</strong> but the output was <strong>hello</strong>. I would like to know the reason for the mistake and the way to fix it. </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1571227290, "post_id": 58412706, "comment_id": 103168638, "body": "<a href=\"https://cdecl.org/\" rel=\"nofollow noreferrer\">cdecl.org</a> is your friend."}, {"owner": {"reputation": 1811, "user_id": 12062404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7672893c82da1651cc0a83bb1c54b623?s=128&d=identicon&r=PG&f=1", "display_name": "gst", "link": "https://stackoverflow.com/users/12062404/gst"}, "edited": false, "score": 0, "creation_date": 1571227348, "post_id": 58412706, "comment_id": 103168667, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/1143262/what-is-the-difference-between-const-int-const-int-const-and-int-const\">What is the difference between const int*, const int * const, and int const *?</a>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1571227378, "post_id": 58412706, "comment_id": 103168689, "body": "@hyde No, it is rather unfriendly. &quot;Syntax error&quot;."}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1571228139, "post_id": 58412706, "comment_id": 103169143, "body": "You are supposed to read it right to left, i.e. <code>const Foo_t *</code> or <code>Foo_t const *</code> is a &quot;pointer to const&quot;. And  <code>const Foo_t **</code> is a &quot;pointer to a pointer to const&quot;. It wouldn&#39;t make sense to use <code>Foo_t * const</code>, because nobody really cares if your function changes the value of <code>fooAPtr</code> internally."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1571228527, "post_id": 58412706, "comment_id": 103169383, "body": "@Lundin It&#39;s that evil <code>typedef</code>. For example <code>const struct Foo **fooBPtr;</code> works nicely."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1571252833, "post_id": 58412706, "comment_id": 103182524, "body": "@Lundin It seems to understand <code>static void doFoo(const struct Foo *, const struct Foo **);</code> so yeah some limitations."}], "answers": [{"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 1, "last_activity_date": 1571227318, "creation_date": 1571227318, "answer_id": 58412837, "question_id": 58412706, "link": "https://stackoverflow.com/questions/58412706/verify-proper-use-of-const-in-double-pointer-function-parameter/58412837#58412837", "title": "Verify proper use of const in double pointer function parameter", "body": "<p>The term \"constant pointer\" isn't helpful since it has multiple interpretations. </p>\n\n<ul>\n<li><code>fooAPtr</code> is a pointer to <em>read-only</em> data. The pointer itself can be changed.</li>\n<li><code>fooBPtr</code> is a pointer to pointer to <em>read-only</em> data. The pointer-to-pointer itself can be changed. The pointed-at pointer can be changed.</li>\n</ul>\n\n<p>Please note that <code>const</code> in this case sticks with the pointed-at data. It may be helpful to read the declarations from right to left.</p>\n\n<p>More info: <a href=\"https://stackoverflow.com/questions/1143262/what-is-the-difference-between-const-int-const-int-const-and-int-const\">What is the difference between const int*, const int * const, and int const *?</a></p>\n"}, {"tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": false, "score": 0, "last_activity_date": 1571227424, "creation_date": 1571227424, "answer_id": 58412866, "question_id": 58412706, "link": "https://stackoverflow.com/questions/58412706/verify-proper-use-of-const-in-double-pointer-function-parameter/58412866#58412866", "title": "Verify proper use of const in double pointer function parameter", "body": "<p><code>const Foo_t *fooAPtr</code> says <code>fooAPtr</code> points to a <code>const Foo_t</code>. So does <code>Foo_t const * fooAPtr</code>.</p>\n\n<p><code>Foo_t * const fooAPtr</code> says <code>fooAPtr</code> is <code>const</code> and points to <code>Foo_t</code>.</p>\n\n<p><code>const Foo_t **fooBPtr</code> says <code>fooBPtr</code> points to a pointer to a <code>const Foo_t</code>.</p>\n\n<p><code>foo_t const **fooBPtr</code> also says <code>fooBPtr</code> points to a pointer to a <code>const Foo_t</code>.</p>\n\n<p><code>foo_t * const *fooBPtr</code> says <code>fooBPtr</code> points to a <code>const</code> pointer to a <code>Foo_t</code>.</p>\n\n<p><code>Foo_t ** const fooBPtr</code> says <code>fooBPtr</code> is <code>const</code> and points to a pointer to a <code>Foo_t</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 2946, "user_id": 1254880, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/88115806b7eaa034f2040704798fd481?s=128&d=identicon&r=PG", "display_name": "Tarc", "link": "https://stackoverflow.com/users/1254880/tarc"}, "is_accepted": false, "score": 0, "last_activity_date": 1571227810, "creation_date": 1571227810, "answer_id": 58412993, "question_id": 58412706, "link": "https://stackoverflow.com/questions/58412706/verify-proper-use-of-const-in-double-pointer-function-parameter/58412993#58412993", "title": "Verify proper use of const in double pointer function parameter", "body": "<p>Actually, in both pointer declarations the <code>const</code> refers to the fact that the memory region occupied by the object of type <code>Foo_t</code> isn't allowed to change.</p>\n\n<ul>\n<li><code>const Foo_t *fooAPtr</code>: pointer to <code>const Foo_t</code>;</li>\n<li><code>const Foo_t **fooBPtr</code>: pointer to pointer to <code>const Foo_t</code>.</li>\n</ul>\n\n<p>If you'd like to turn into const the pointer to which <code>fooBPtr</code> points to, you'd have to change its declaration to:</p>\n\n<pre><code>const Foo_t * const * fooBPtr;\n</code></pre>\n"}], "owner": {"reputation": 139, "user_id": 1042402, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/hJixX.png?s=128&g=1", "display_name": "RobbyChaps", "link": "https://stackoverflow.com/users/1042402/robbychaps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 58412837, "answer_count": 3, "score": 1, "last_activity_date": 1571227810, "creation_date": 1571226948, "question_id": 58412706, "link": "https://stackoverflow.com/questions/58412706/verify-proper-use-of-const-in-double-pointer-function-parameter", "title": "Verify proper use of const in double pointer function parameter", "body": "<p>This question is based on the following C example, which I made for this post:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n\ntypedef struct \n{\n    uint32_t temp;\n    uint32_t temp2;\n} Foo_t;\n\nstatic void doFoo(const Foo_t *fooAPtr, const Foo_t **fooBPtr);\n\nstatic void doFoo(const Foo_t *fooAPtr, const Foo_t **fooBPtr)\n{\n    /* Assinging B to A just as an example */\n    *fooBPtr = fooAPtr;\n}\n\nint main()\n{\n    Foo_t fooA = {1, 2};\n    Foo_t *fooAPtr = &amp;fooA;\n    const Foo_t *fooBPtr = 0;\n\n    doFoo(fooAPtr, &amp;fooBPtr);\n\n    printf(\"\\n FooAPtr == %p, FooBPtr == %p \\n\", fooAPtr, fooBPtr);\n\n    printf(\"\\n FooAPtr == %i %i |_| FooBPtr == %i %i \\n\", fooAPtr-&gt;temp, fooAPtr-&gt;temp2, fooBPtr-&gt;temp, fooBPtr-&gt;temp2);\n\n    return 0;\n}\n</code></pre>\n\n<p>This code can be run at the link below:</p>\n\n<p><a href=\"https://onlinegdb.com/rJdHGFNYB\" rel=\"nofollow noreferrer\">https://onlinegdb.com/rJdHGFNYB</a></p>\n\n<p>I am questioning my pointer logic and wanted to verify my assumptions about the code. This is my interpretation of the doFoo() function above:</p>\n\n<blockquote>\n  <p>fooAPtr == A constant pointer, pointing to the memory location of a\n  structure of type Foo_t. The const denotes that the address of that\n  memory location should not be changed</p>\n  \n  <p>fooBPtr == A mutable pointer, pointing to an address that points to\n  the memory location of a Foo_t structure. The const denotes that the\n  address being pointed to cannot change?</p>\n</blockquote>\n\n<p>It\u2019s pathetic that I am asking this, but I can\u2019t wrap my head around the particular use case. The code works as expected, but that doesn\u2019t mean it\u2019s correct.</p>\n\n<p>So, the question is, is my interpretation of the pointer logic above correct? Specifically, my use of const, and the layers of indirection for fooBPtr. For context, the goal of doFoo() is to assign fooBPtr to fooAPtr via function parameters, not by returning anything.</p>\n"}, {"tags": ["c", "fork", "hierarchy"], "comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 2, "creation_date": 1571227130, "post_id": 58412439, "comment_id": 103168527, "body": "<code>counter</code> is not initialized."}], "answers": [{"comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1571228666, "post_id": 58412823, "comment_id": 103169462, "body": "How many lines do you expect to see when you pass a parameter of 5? I expect 5. How many do you actually see?"}, {"owner": {"reputation": 47, "user_id": 12172685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12433f08161e1d27ee9ca25c13d60bb0?s=128&d=identicon&r=PG&f=1", "display_name": "Dastru", "link": "https://stackoverflow.com/users/12172685/dastru"}, "edited": false, "score": 0, "creation_date": 1571233907, "post_id": 58412823, "comment_id": 103172711, "body": "Good afternoon. 5 lines would be the case for the example, and I can see 5 lines. Thanks for your answers John."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1571227665, "last_edit_date": 1571227665, "creation_date": 1571227288, "answer_id": 58412823, "question_id": 58412439, "link": "https://stackoverflow.com/questions/58412439/fork-code-not-working-as-expected-hierarchy-making/58412823#58412823", "title": "Fork() code not working as expected - Hierarchy making", "body": "<blockquote>\n  <p>With the following code (which happens to work exactly how I want with\n  a \"wait()\" call) states that all the child processes derive from the\n  same father, which I don't understand why it's happening.</p>\n</blockquote>\n\n<p>I don't see that in my tests, nor do I have any reason to expect that it's actually the case for you.  HOWEVER, it might <em>appear</em> to be the case for you if what you see is some or all of the child processes reporting process 1 as their parent.  That would happen if their original parent terminates before the child's <code>getppid()</code> call is handled.  Processes that are orphaned in that way inherit process 1 as their parent.  If the parent <code>wait()</code>s for the child to terminate first then that cannot happen, but if instead the parent terminates very soon after forking the child then that result is entirely plausible.</p>\n\n<p>Here's a variation on your loop that will report the original parent process ID in every case:</p>\n\n<pre><code>    pid_t my_pid = getpid();\n\n    for (i = 0; i &lt; lim; i++) {\n        result = fork();\n        if (result &lt; 0) {\n            printf(\"Call%d \\n\", counter); perror(\"Has failed!\");\n            exit(-1);\n        } else if (result) {\n            break; //Father process\n        } else {\n            pid_t ppid = my_pid;  // inherited from the parent\n            my_pid = getpid();\n            counter++;    //Child processes increment the counter\n            printf(\"Process%d, I am %d and my father: %d\\n\", counter, (int) my_pid, (int) ppid);\n        }\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "is_accepted": true, "score": 0, "last_activity_date": 1571228410, "last_edit_date": 1571228410, "creation_date": 1571228102, "answer_id": 58413090, "question_id": 58412439, "link": "https://stackoverflow.com/questions/58412439/fork-code-not-working-as-expected-hierarchy-making/58413090#58413090", "title": "Fork() code not working as expected - Hierarchy making", "body": "<p>You are missing a crucial function call.</p>\n\n<pre><code>    for (i = 0; i &lt; lim; i++) {\n        fflush(stdout);             // &lt;============== here\n        result = fork();\n</code></pre>\n\n<p>Without it, your <code>fork</code> duplicates parent's stdout buffer into the child process. This is why you are seeing parent process output repeated several times --- its children and grandchildren inherit the output buffer.</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/f0eada5cf4260a85\" rel=\"nofollow noreferrer\">Live demo</a> (with fixed formatting for your reading convenience).</p>\n"}], "owner": {"reputation": 47, "user_id": 12172685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12433f08161e1d27ee9ca25c13d60bb0?s=128&d=identicon&r=PG&f=1", "display_name": "Dastru", "link": "https://stackoverflow.com/users/12172685/dastru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 58413090, "answer_count": 2, "score": 0, "last_activity_date": 1571228410, "creation_date": 1571226047, "last_edit_date": 1571227041, "question_id": 58412439, "link": "https://stackoverflow.com/questions/58412439/fork-code-not-working-as-expected-hierarchy-making", "title": "Fork() code not working as expected - Hierarchy making", "body": "<p>Good afternoon.</p>\n\n<p>I am currently working on a C program that takes one and only one parameter which designates the number of \"child generation\"s to be created (the own father counts as 1 already). \"wait()\" system calls are not to be used for this exercise (the version with \"wait\" calls happens to work exactly as expected). </p>\n\n<p>For instance, the call $program 4 should generate a hierarchy like this:\nProcess A creates B \nProcess B creates C\nProcess C creates D</p>\n\n<p>The printed messages are not important, as they are merely orientative for the task. With the following code (which happens to work exactly how I want with a \"wait()\" call) states that all the child processes derive from the same father, which I don't understand why it's happening.  </p>\n\n<pre><code>#include &lt;unistd.h&gt;\n    #include &lt;stdlib.h&gt;\n    #include &lt;stdio.h&gt;\n\n    int main(int argc, char *argv[]) {\n    int counter; pid_t result; int i;\n\n    /*\n    We are going to create as many processes as indicated in argv[1] taking into account that the main father already counts as 1!\n    */\n    if (argc &gt; 2 || argc == 1) {puts(\"IMPOSSIBLE EXECUTION\\n\"); exit(-1);}\n    int lim = atoi(argv[1]);\n\n\n    //We eliminate the impossible cases\n    if (lim &lt; 1) {puts(\"IMPOSSIBLE EXECUTION\\n\"); exit(-1);}\n\n\n    if (lim == 1) {puts(\"The father himself constitutes a process all by his own, therefore:\\n\");\n    printf(\"Process%d, I'm %d and my father: %d\\n\", counter, getpid(), getppid());\n     }\n    else {\n        for (i = 0; i &lt; lim; i++) {\n            result = fork();\n            if (result &lt; 0) {\n                printf(\"Call%d \\n\", counter); perror(\"Has failed!\");\n                exit(-1);\n            }\n            else if (result) {\n                break; //Father process\n            }\n            else {\n                counter++;    //Child processes increment the counter\n                printf(\"Process%d, I am %d and my father: %d\\n\", counter, getpid(), getppid());\n            }\n        }\n    }\n</code></pre>\n\n<p>The hierarchy generated by the code above is not the one I expected...</p>\n\n<p>All help is greatly appreciated.\nThank you</p>\n"}, {"tags": ["c", "linux", "window", "x11"], "comments": [{"owner": {"reputation": 11893, "user_id": 12098405, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C7IUyuZ5qqE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehqQyGdh463Xz2DY8S4TYPhnDvzA/photo.jpg?sz=128", "display_name": "dash-o", "link": "https://stackoverflow.com/users/12098405/dash-o"}, "edited": false, "score": 1, "creation_date": 1571231345, "post_id": 58412238, "comment_id": 103171063, "body": "Two comments: 1. There is no XA_WM_TITLE (Do you mean XA_WM_NAME ?). Also note that X clients based on XDG will use NET_WM_NAME atom. Yu might have to query both to cover."}, {"owner": {"reputation": 11893, "user_id": 12098405, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C7IUyuZ5qqE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehqQyGdh463Xz2DY8S4TYPhnDvzA/photo.jpg?sz=128", "display_name": "dash-o", "link": "https://stackoverflow.com/users/12098405/dash-o"}, "edited": false, "score": 0, "creation_date": 1571231419, "post_id": 58412238, "comment_id": 103171108, "body": "Also note that XGetWindowProperty will return Success, even if no property is found. You will want to skip the result if XGetWindowProperty fail OR the data is null. Current code check for AND condition."}, {"owner": {"reputation": 319, "user_id": 2086511, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/327c8e6c4f5c762e7d5e225d84a10ee4?s=128&d=identicon&r=PG", "display_name": "kenn", "link": "https://stackoverflow.com/users/2086511/kenn"}, "reply_to_user": {"reputation": 11893, "user_id": 12098405, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C7IUyuZ5qqE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehqQyGdh463Xz2DY8S4TYPhnDvzA/photo.jpg?sz=128", "display_name": "dash-o", "link": "https://stackoverflow.com/users/12098405/dash-o"}, "edited": false, "score": 0, "creation_date": 1571231524, "post_id": 58412238, "comment_id": 103171187, "body": "@dash-o Thank you for responding. It&#39;s my confusion, I&#39;m sorry. I updated it."}, {"owner": {"reputation": 319, "user_id": 2086511, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/327c8e6c4f5c762e7d5e225d84a10ee4?s=128&d=identicon&r=PG", "display_name": "kenn", "link": "https://stackoverflow.com/users/2086511/kenn"}, "reply_to_user": {"reputation": 11893, "user_id": 12098405, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C7IUyuZ5qqE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehqQyGdh463Xz2DY8S4TYPhnDvzA/photo.jpg?sz=128", "display_name": "dash-o", "link": "https://stackoverflow.com/users/12098405/dash-o"}, "edited": false, "score": 0, "creation_date": 1571231739, "post_id": 58412238, "comment_id": 103171320, "body": "@dash-o But if I replace <code>XA_WM_CLASS</code>with <code>XA_WM_NAME</code> it prints the window name."}, {"owner": {"reputation": 11893, "user_id": 12098405, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C7IUyuZ5qqE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehqQyGdh463Xz2DY8S4TYPhnDvzA/photo.jpg?sz=128", "display_name": "dash-o", "link": "https://stackoverflow.com/users/12098405/dash-o"}, "edited": false, "score": 0, "creation_date": 1571571086, "post_id": 58412238, "comment_id": 103278322, "body": "Sorry for delay. Can you validate that your window (based on ID) has the X properties (WM_CLASS) you are looking for ? Use xprop -id &lt;NUMBER&gt;. This will give you an indication of the primary holder window. It is possible that the owner is a sub-window, and does not have a class. Usually, only top level application will set the WM_CLASS."}, {"owner": {"reputation": 319, "user_id": 2086511, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/327c8e6c4f5c762e7d5e225d84a10ee4?s=128&d=identicon&r=PG", "display_name": "kenn", "link": "https://stackoverflow.com/users/2086511/kenn"}, "reply_to_user": {"reputation": 11893, "user_id": 12098405, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C7IUyuZ5qqE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehqQyGdh463Xz2DY8S4TYPhnDvzA/photo.jpg?sz=128", "display_name": "dash-o", "link": "https://stackoverflow.com/users/12098405/dash-o"}, "edited": false, "score": 0, "creation_date": 1571597795, "post_id": 58412238, "comment_id": 103285252, "body": "I noticed that window id of the <code>XGetSelectionOwner</code> doesn&#39;t match to the xprop window id."}, {"owner": {"reputation": 11893, "user_id": 12098405, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C7IUyuZ5qqE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehqQyGdh463Xz2DY8S4TYPhnDvzA/photo.jpg?sz=128", "display_name": "dash-o", "link": "https://stackoverflow.com/users/12098405/dash-o"}, "edited": false, "score": 0, "creation_date": 1571617803, "post_id": 58412238, "comment_id": 103289215, "body": "You might want to try to walk the window tree (xwininfo -tree), to find out what is the relationship. It is possible that the selection owner window will not have a class."}, {"owner": {"reputation": 319, "user_id": 2086511, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/327c8e6c4f5c762e7d5e225d84a10ee4?s=128&d=identicon&r=PG", "display_name": "kenn", "link": "https://stackoverflow.com/users/2086511/kenn"}, "reply_to_user": {"reputation": 11893, "user_id": 12098405, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C7IUyuZ5qqE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehqQyGdh463Xz2DY8S4TYPhnDvzA/photo.jpg?sz=128", "display_name": "dash-o", "link": "https://stackoverflow.com/users/12098405/dash-o"}, "edited": false, "score": 0, "creation_date": 1571648499, "post_id": 58412238, "comment_id": 103297282, "body": "<code>xprop</code> doesn&#39;t list <code>WM_CLASS</code> property by window id."}], "owner": {"reputation": 319, "user_id": 2086511, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/327c8e6c4f5c762e7d5e225d84a10ee4?s=128&d=identicon&r=PG", "display_name": "kenn", "link": "https://stackoverflow.com/users/2086511/kenn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571648476, "creation_date": 1571225374, "last_edit_date": 1571648476, "question_id": 58412238, "link": "https://stackoverflow.com/questions/58412238/how-do-i-get-x11-xa-wm-class-for-xa-primary-owner", "title": "How do I get X11 XA_WM_CLASS for XA_PRIMARY owner?", "body": "<p>I want to get the class title of a window which owns the primary clipboard in X Window system.</p>\n\n<p>I have the following code:</p>\n\n<pre><code>#include &lt;X11/Xlib.h&gt;\n#include &lt;X11/Xatom.h&gt;\n#include &lt;X11/Xutil.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint\nmain(int argc, char **argv)\n{\nAtom real;\nunsigned char *data;\nint format;\nulong n, extra;\n\n\n  Display *dpy = XOpenDisplay(NULL);\n\n\n\n\n  // Get the selection window\n Window window = XGetSelectionOwner(dpy, XA_PRIMARY);\nprintf(\"%d\\n\", (unsigned)window);\n\n\n XGetWindowProperty(dpy,  window, XA_WM_NAME, 0, ~0, False,\n                        AnyPropertyType, &amp;real, &amp;format, &amp;n, &amp;extra,\n                        &amp;data) ;\n\n //     char *wm_class2 = data + strlen(data) + 1;\n  printf(\"%s\\n\", data);\n // printf(\"%s\\n\", wm_class2);\nreturn 0;\n}\n</code></pre>\n\n<p>While it works for <code>XA_WM_NAME</code>, it fails for <code>XA_WM_CLASS</code>.\nWould you please tell me what's wrong with it?</p>\n\n<p>EDIT:\n<code>xprop</code> doesn't list <code>WM_CLASS</code> property by window id.</p>\n\n<pre><code>xprop -id  94372511\n_NET_WM_ALLOWED_ACTIONS(ATOM) = _NET_WM_ACTION_MOVE, _NET_WM_ACTION_RESIZE, _NET_WM_ACTION_STICK, _NET_WM_ACTION_MINIMIZE, _NET_WM_ACTION_MAXIMIZE_HORZ, _NET_WM_ACTION_MAXIMIZE_VERT, _NET_WM_ACTION_FULLSCREEN, _NET_WM_ACTION_CLOSE, _NET_WM_ACTION_CHANGE_DESKTOP, _NET_WM_ACTION_ABOVE, _NET_WM_ACTION_BELOW\nWM_NAME(STRING) = \"Chromium clipboard\"\n</code></pre>\n"}, {"tags": ["c", "stdio"], "comments": [{"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 4, "creation_date": 1571225231, "post_id": 58412176, "comment_id": 103167440, "body": "<code>char ch[2];</code> can&#39;t hold a string like <code>sxdfvghujiuytredwsazxacdfv</code> (in fact, it can hold only only one character and the null terminator). Entering those big strings is undefined behavior, and segmentation faults are a common manifestation of UB."}, {"owner": {"reputation": 50872, "user_id": 523612, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ae512dd708a619496d36b1f681f95e0?s=128&d=identicon&r=PG", "display_name": "Karl Knechtel", "link": "https://stackoverflow.com/users/523612/karl-knechtel"}, "edited": false, "score": 2, "creation_date": 1571225367, "post_id": 58412176, "comment_id": 103167522, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/1621394/how-to-prevent-scanf-causing-a-buffer-overflow-in-c\">How to prevent scanf causing a buffer overflow in C?</a>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1571225523, "post_id": 58412176, "comment_id": 103167620, "body": "Strings in C are null terminated and that&#39;s that."}, {"owner": {"reputation": 553, "user_id": 12114801, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I4WME.jpg?s=128&g=1", "display_name": "Sathvik", "link": "https://stackoverflow.com/users/12114801/sathvik"}, "reply_to_user": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 0, "creation_date": 1571225541, "post_id": 58412176, "comment_id": 103167628, "body": "@Blaze try this code <a href=\"https://onlinegdb.com/SymqyYEYB\" rel=\"nofollow noreferrer\">onlinegdb.com/SymqyYEYB</a> see line 17 event though the buf size is 4 it is working"}, {"owner": {"reputation": 553, "user_id": 12114801, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I4WME.jpg?s=128&g=1", "display_name": "Sathvik", "link": "https://stackoverflow.com/users/12114801/sathvik"}, "reply_to_user": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 0, "creation_date": 1571226480, "post_id": 58412176, "comment_id": 103168174, "body": "@Blaze that&#39;s a wonderful example. Thanks :)"}], "answers": [{"tags": [], "owner": {"reputation": 7187, "user_id": 8890604, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bwv2A.jpg?s=128&g=1", "display_name": "David S", "link": "https://stackoverflow.com/users/8890604/david-s"}, "is_accepted": true, "score": 3, "last_activity_date": 1571225983, "creation_date": 1571225983, "answer_id": 58412416, "question_id": 58412176, "link": "https://stackoverflow.com/questions/58412176/how-character-array-works/58412416#58412416", "title": "How character array works", "body": "<p><strong>Regarding the first problem:</strong></p>\n\n<p>If you will debug the program you can easily see that the endless loop is cause because you overwrite the <code>i</code> not using the <code>scanf</code> properly, the fix for the second problem should fix that to.</p>\n\n<p><strong>Regarding the second problem:</strong></p>\n\n<p>You are using the <code>scanf</code> function, which isn't safe due to the fact that it reads the entire input from user regardless of the size of buffer you allocated (in your case <code>char ch[2]</code>.</p>\n\n<p>so although it does enters the entire string <code>sxdfvghujiuytredwsazxacdfv</code> to the <code>ch</code> it is obviously overflowing -> thus segmentation fault is inevitable.\nInstead use <code>scanf_s</code> and restrict the amount of characters to read.</p>\n\n<p><em>Note:</em></p>\n\n<p>If youll raise warning flags it should appear that <code>scanf</code> is problematic and unsafe</p>\n"}], "owner": {"reputation": 553, "user_id": 12114801, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I4WME.jpg?s=128&g=1", "display_name": "Sathvik", "link": "https://stackoverflow.com/users/12114801/sathvik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 58412416, "answer_count": 1, "score": 0, "last_activity_date": 1571225983, "creation_date": 1571225115, "question_id": 58412176, "link": "https://stackoverflow.com/questions/58412176/how-character-array-works", "title": "How character array works", "body": "<p>Try the below codes</p>\n\n<p><strong>Program1</strong></p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\n    int i=2;  //two times\n    while(i&gt;0)\n    {\n        char ch[2];  \n        scanf(\"%s\",ch);   \n        printf(\"%s\\n\",ch);\n        i--;\n     }\n    return 0;\n}\n</code></pre>\n\n<p>output (loop never terminate and take and print any length of string)</p>\n\n<pre><code>wdefgfvcdswdfetgyhujik\nwdefgfvcdswdfetgyhujik\nnbvewsq\nnbvewsq\nhgbvfdw\nhgbvfdw\nhbgfvedw\nhbgfvedw\ngfvdcwsq\ngfvdcwsq\n.\n.\n.\n</code></pre>\n\n<p>output(loop terminates when it take the valid set of string)</p>\n\n<pre><code>a\na\nb\nb\n</code></pre>\n\n<p><strong>program2</strong></p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\n    char ch[2]; \n    scanf(\"%s\",ch);   \n    printf(\"%s\\n\",ch);\n\n    return 0;\n}\n</code></pre>\n\n<p>output(How does it print and say Segmentation fault)</p>\n\n<pre><code>sxdfvghujiuytredwsazxacdfv\nsxdfvghujiuytredwsazxacdfv\nSegmentation fault\n\n</code></pre>\n"}, {"tags": ["c", "bash", "gcc", "gcc-warning", "kali-linux"], "comments": [{"owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 1, "creation_date": 1571223035, "post_id": 58411510, "comment_id": 103166249, "body": "Seems you broke your <code>gcc</code> program since you replaced the <code>&#47;usr&#47;bash&#47;gcc</code> file with <code>conio.h</code> file (you renamed that last file too)  You should reinstall <code>gcc</code>.  Since <a href=\"https://en.wikipedia.org/wiki/Conio.h\" rel=\"nofollow noreferrer\"><code>conio.h</code></a> comes from the MS-DOS world, your program will have difficulties to be compiled on your system. Consider to port it using other tools (like ncurses)"}, {"owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1571223300, "post_id": 58411510, "comment_id": 103166389, "body": "Maybe <code>&#47;usr&#47;bash&#47;gcc</code> was a symbolic link to the real <code>gcc</code> program file. In that case, you can try to find it and to restore the link. See <a href=\"https://linux.die.net/man/1/ln\" rel=\"nofollow noreferrer\"><code>ln</code></a> tool."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1571223403, "post_id": 58411510, "comment_id": 103166461, "body": "You could have just put the conio.h file in the same directory as your .c files. Now you have to reinstall your gcc. By the way, the conio.h you downloaded only works for C++, not for C."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 11309992, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OAZM6eCH15Y/AAAAAAAAAAI/AAAAAAAAAAc/SwQx-948UmM/photo.jpg?sz=128", "display_name": "thecow milk", "link": "https://stackoverflow.com/users/11309992/thecow-milk"}, "edited": false, "score": 0, "creation_date": 1571234503, "post_id": 58411698, "comment_id": 103173139, "body": "Hello, thanks for taking your time and answering my post. Well I tried it. Trying to fix it I did: apt-get remove --purge gcc and than apt-get install gcc but the thing. I will try to execute your suggested commands later since I&#39;m not in my laptop right now."}, {"owner": {"reputation": 31, "user_id": 11309992, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OAZM6eCH15Y/AAAAAAAAAAI/AAAAAAAAAAc/SwQx-948UmM/photo.jpg?sz=128", "display_name": "thecow milk", "link": "https://stackoverflow.com/users/11309992/thecow-milk"}, "edited": false, "score": 0, "creation_date": 1571238527, "post_id": 58411698, "comment_id": 103175825, "body": "I also read another stackoverflow post similar to this the link you provided and someone provided a link which I can download the conio.h library on sourceforge. I will update with link later."}], "tags": [], "owner": {"reputation": 1704, "user_id": 1213525, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/decdf57beb0dccf76b51098dcd956a4e?s=128&d=identicon&r=PG", "display_name": "Veda", "link": "https://stackoverflow.com/users/1213525/veda"}, "is_accepted": true, "score": 0, "last_activity_date": 1571223752, "last_edit_date": 1571223752, "creation_date": 1571223438, "answer_id": 58411698, "question_id": 58411510, "link": "https://stackoverflow.com/questions/58411510/gcc-not-compiling-in-linux/58411698#58411698", "title": "GCC Not Compiling in Linux", "body": "<p>Oh no! You removed the gcc binary (or symlink...) from your PC and replaced it with the header file.</p>\n\n<p>I would recommend to reinstall gcc first:</p>\n\n<pre><code>sudo apt-get install gcc --reinstall\n</code></pre>\n\n<p>Now just run gcc to see what it does:</p>\n\n<pre><code>gcc\n</code></pre>\n\n<p>It should say something like \"no input files\".</p>\n\n<p>Now about your conio problem, I suggest you read this stackoverflow question: <a href=\"https://stackoverflow.com/questions/8792317/why-cant-i-find-conio-h-on-linux\">Why can&#39;t I find &lt;conio.h&gt; on Linux?</a></p>\n"}], "owner": {"reputation": 31, "user_id": 11309992, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OAZM6eCH15Y/AAAAAAAAAAI/AAAAAAAAAAc/SwQx-948UmM/photo.jpg?sz=128", "display_name": "thecow milk", "link": "https://stackoverflow.com/users/11309992/thecow-milk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 565, "favorite_count": 0, "accepted_answer_id": 58411698, "answer_count": 1, "score": 0, "last_activity_date": 1590752153, "creation_date": 1571222852, "last_edit_date": 1590752153, "question_id": 58411510, "link": "https://stackoverflow.com/questions/58411510/gcc-not-compiling-in-linux", "title": "GCC Not Compiling in Linux", "body": "<p>I was making a c program that includes conio.h library but because I'm on a Debain Based OS, conio.h library is not there pre-installed so I have to search to internet and download it.</p>\n\n<p>After downloading it, I wanted to know the path of GCC to copy the file there because I thought that there was a folder named gcc where all headers file are stored. I searched in the internet to find its path and I saw a blog and they said to run \" which gcc \" to find it and after I ran it, I got \" /usr/bash/gcc \".</p>\n\n<p>Now I made \" cp conio.h /usr/bash/gcc \" but I always get this error if I want to compile any C file or even to get its version:</p>\n\n<p>\" /usr/bin/gcc: line 1: syntax error near unexpected token <code>('\n/usr/bin/gcc: line 1:</code>// Copyright (C) 2005  by Piotr He\ufffdka (piotr.helka@nd.e-wro.pl)'\n\"</p>\n\n<p>Every Help Would Be Very Appreciated!</p>\n\n<p>EDIT: I have solved this issue by copying another functioning <code>gcc</code> to the actual one. Even reinstalling won't work. Another way you can solve this, is by downloading a <code>binary of gcc</code> and then copy that binary to the place your old broken gcc is.</p>\n"}, {"tags": ["c", "memory", "struct"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1571222312, "post_id": 58411240, "comment_id": 103165864, "body": "What exactly is there on the address <code>0x18FF</code>? Some custom RAM? Why start at such a strange address? Where is the actual SPI data buffer? Also note that the line <code>static volatile can_message* buffers = 0x18FF;</code> is not even valid C, so your compiler is misconfigured."}, {"owner": {"reputation": 45, "user_id": 12178351, "user_type": "registered", "profile_image": "https://graph.facebook.com/2553865151508462/picture?type=large", "display_name": "Jonas Hjulstad", "link": "https://stackoverflow.com/users/12178351/jonas-hjulstad"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1571223322, "post_id": 58411240, "comment_id": 103166406, "body": "Address 0x18FF is part of an external configured with ATmega162&#39;s external memory interface. The &#39;CAN_message_get_from_MCP_buf(can_message, buffer)-function is currently working as it should. All lower-level operations have been tested"}, {"owner": {"reputation": 45, "user_id": 12178351, "user_type": "registered", "profile_image": "https://graph.facebook.com/2553865151508462/picture?type=large", "display_name": "Jonas Hjulstad", "link": "https://stackoverflow.com/users/12178351/jonas-hjulstad"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1571223433, "post_id": 58411240, "comment_id": 103166475, "body": "I did however notice that any buffers[i]-struct gets a totally different address than expected. It does not use the addresses following 0x18FF on the SRAM. Is there any way to change this?"}, {"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 0, "creation_date": 1571223906, "post_id": 58411240, "comment_id": 103166745, "body": "@JonasHjulstad Instead adding information in comments, <a href=\"https://stackoverflow.com/posts/58411240/edit\">edit</a> your question and write everything there. Please add comments in your code to mark the locations you refer to in your problem description, e.g. where the wrong ID is returned or where you find the wrong addresses. How do you see that the address is wrong? In a debugger? What address do you see?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1571224093, "post_id": 58411240, "comment_id": 103166836, "body": "I wouldn&#39;t rule out anything, including the external memory not working as it should. You can however start by making the code valid C <code>static volatile can_message* buffers = (volatile can_message*)0x18FF;</code>. Also the <code>buffers[message-&gt;id]</code> part seems fishy. Do you allocate one buffer per CAN identifier? What if the identifier is invalid?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1571224164, "post_id": 58411240, "comment_id": 103166866, "body": "Oh, also... are you using a standard C setup or a minimum setup? That is, do you know if <code>static</code> variables are initialized correctly to begin with?"}, {"owner": {"reputation": 45, "user_id": 12178351, "user_type": "registered", "profile_image": "https://graph.facebook.com/2553865151508462/picture?type=large", "display_name": "Jonas Hjulstad", "link": "https://stackoverflow.com/users/12178351/jonas-hjulstad"}, "edited": false, "score": 0, "creation_date": 1571224559, "post_id": 58411240, "comment_id": 103167091, "body": "There is one buffer per CAN identifier, which is supposed to be adjustable if any new identifiers should be added to the bus. Recasting 0x18FF did not solve the issue."}, {"owner": {"reputation": 45, "user_id": 12178351, "user_type": "registered", "profile_image": "https://graph.facebook.com/2553865151508462/picture?type=large", "display_name": "Jonas Hjulstad", "link": "https://stackoverflow.com/users/12178351/jonas-hjulstad"}, "edited": false, "score": 0, "creation_date": 1571224639, "post_id": 58411240, "comment_id": 103167124, "body": "The C setup is standard, I&#39;m not very good either memory allocation or static initialization, which probably is the reason to this issue"}, {"owner": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "edited": false, "score": 2, "creation_date": 1571224642, "post_id": 58411240, "comment_id": 103167127, "body": "please show more of your program. at least the parts that call <code>CAN_message_receive</code> and their logical place in the program flow."}], "answers": [{"comments": [{"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1571227719, "post_id": 58412410, "comment_id": 103168914, "body": "<code>&amp;buffers[i]</code> overflows when <code>i &gt;= CAN_MESSAGE_UNIQUE_IDS</code> (luckily you are not dereferencing it). And <code>&amp;buffers[i]</code> is not the address of <code>(char*)(0x18FF+i)</code>, the latter is accessing individual bytes. Are you sure that you don&#39;t have some sort of a library header for accessing this? Using hardcoded addresses like this is a disaster waiting to happen. Also, <code>sizeof(can_message)</code> isn&#39;t guaranteed to be <code>10</code> (it most likely is but you shouldn&#39;t guess. Also, certain <code>memcpy</code> implementations cast the pointers to <code>int*</code> in order to copy larger chunks when both addresses are aligned."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1571229140, "post_id": 58412410, "comment_id": 103169713, "body": "What do you mean &quot;solved&quot;? Weren&#39;t you supposed to use an external memory? This code uses internal <code>.bss</code>, not external memory."}, {"owner": {"reputation": 45, "user_id": 12178351, "user_type": "registered", "profile_image": "https://graph.facebook.com/2553865151508462/picture?type=large", "display_name": "Jonas Hjulstad", "link": "https://stackoverflow.com/users/12178351/jonas-hjulstad"}, "edited": false, "score": 0, "creation_date": 1571313934, "post_id": 58412410, "comment_id": 103204927, "body": "I went a bit back and forth with the printf-statement in order to see which addresses each individual struct ended up at, but I have no intention of leaving permanent in the code. I would (ideally) want to end up with the buffer stored in SRAM, but any solution works for now. Thanks for your replies, it was really helpful"}], "tags": [], "owner": {"reputation": 45, "user_id": 12178351, "user_type": "registered", "profile_image": "https://graph.facebook.com/2553865151508462/picture?type=large", "display_name": "Jonas Hjulstad", "link": "https://stackoverflow.com/users/12178351/jonas-hjulstad"}, "is_accepted": false, "score": 0, "last_activity_date": 1571225969, "creation_date": 1571225969, "answer_id": 58412410, "question_id": 58411240, "link": "https://stackoverflow.com/questions/58411240/struct-memory-allocation-issues-for-message-buffer/58412410#58412410", "title": "Struct memory allocation issues for message buffer", "body": "<p>Solved!\nPointer to buffers changed to buffer-array:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>int CAN_message_receive(can_message* message)\n{\n\n    static can_message buffers[CAN_MESSAGE_UNIQUE_IDS];\n    static int birth = 1;\n    if(birth)\n    {\n        for (int i; i &lt; CAN_MESSAGE_UNIQUE_IDS*10; i++)\n        {\n            *(char*)(0x18FF+i) = 0;\n            printf(\"buffers: %X\\n\", &amp;buffers[i]);\n        }\n        birth = 0;\n    }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 45, "user_id": 12178351, "user_type": "registered", "profile_image": "https://graph.facebook.com/2553865151508462/picture?type=large", "display_name": "Jonas Hjulstad", "link": "https://stackoverflow.com/users/12178351/jonas-hjulstad"}, "edited": false, "score": 0, "creation_date": 1571315453, "post_id": 58413181, "comment_id": 103205838, "body": "Setting the buffer as library-static instead of static inside a function seems nice, and I didn&#39;t even think of the read/write-protection. I will try this as soon as i can, thanks!"}], "tags": [], "owner": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "is_accepted": false, "score": 0, "last_activity_date": 1571228901, "last_edit_date": 1571228901, "creation_date": 1571228358, "answer_id": 58413181, "question_id": 58411240, "link": "https://stackoverflow.com/questions/58411240/struct-memory-allocation-issues-for-message-buffer/58413181#58413181", "title": "Struct memory allocation issues for message buffer", "body": "<p>I would strongly suggest to decouple the ISR logic with the programs own message cache logic. Also the initializing logic with the <code>birth</code> variable looks unnecessary. </p>\n\n<p>I would setup some ring buffer that the ISR can write messages to and from that the main code reads the data into the ID-lookup-buffer.</p>\n\n<p>This would ensure that message updates does not interfere with readouts (at least if you check the read/write indices to your ring buffer) and also eliminates the need to put Mutexes around your whole message buffer.</p>\n\n<p>Currently it smells very badly because of missing read/write synchronization.</p>\n\n<pre><code>// global\n#define CAN_MESSAGE_UNIQUE_IDS 50\nstatic can_message g_can_messagebuffers[CAN_MESSAGE_UNIQUE_IDS];\n\n#define MAX_RECEIVEBUFFER 8\nstatic volatile can_message g_can_ringbuffer[MAX_RECEIVEBUFFER];\nstatic volatile int g_can_ringbufferRead  = 0;\nstatic volatile int g_can_ringbufferWrite = 0;\n\n\n// called from ISR\nvoid GetNewMessages()\n{\n    // todo: check ring buffer overflow\n    can_message currentMessage;\n    CAN_message_get_from_MCP_buf(&amp;g_can_ringbuffer[g_can_ringbufferWrite], 0);\n    g_can_ringbufferWrite = (g_can_ringbufferWrite + 1) % MAX_RECEIVEBUFFER;\n\n    CAN_message_get_from_MCP_buf(&amp;g_can_ringbuffer[g_can_ringbufferWrite], 1);\n    g_can_ringbufferWrite = (g_can_ringbufferWrite + 1) % MAX_RECEIVEBUFFER;\n}\n\n\n// called from main loop\nvoid handleNewMessages()\n{\n  while(g_can_ringbufferRead  != g_can_ringbufferWrite){\n    const can_message* currentMessage = &amp;g_can_ringbuffer[g_can_ringbufferRead];\n    if(currentMessage-&gt;id &lt; CAN_MESSAGE_UNIQUE_IDS)\n    {\n      g_can_messagebuffers[currentMessage-&gt;id] = *currentMessage;\n    }        \n    g_can_ringbufferRead  = (g_can_ringbufferRead  + 1) % MAX_RECEIVEBUFFER;\n  }\n}\n\n// called from whoever wants to know\n// todo: \n//    really required a by value interface?\n//    would it not be sufficient to return a pointer and\n//    provide an additional interface to mark the message as used?\nint getMsg(can_message* message)\n{\n  if(buffers[message-&gt;id].id != 0)\n  {\n    printf(\"test\\n\");\n    *message =  &amp;g_can_messagebuffers[message-&gt;id];\n    g_can_messagebuffers[message-&gt;id].id = 0;\n    return 0;\n  }\n  return -1;\n}\n\n// alternative to above \nconst can_message* getMsg(int id)\n{\n  if(    (id &lt; CAN_MESSAGE_UNIQUE_IDS)\n      &amp;&amp; (g_can_messagebuffers[id] != 0))\n  {\n    return &amp;g_can_messagebuffers[id].id;\n  }\n  return NULL;\n}\n\nvoid invalidateMsg(int id)\n{\n  if(id &lt; CAN_MESSAGE_UNIQUE_IDS)\n  {\n     g_can_messagebuffers[id] = 0;\n  }\n}\n</code></pre>\n\n<p>edit:<br>\nafter your changes to an message array instead some strange pointer, there is also no need for the setup routine for this code.</p>\n\n<p>edit:<br>\nif your micro controller already has a buffer for received messages, then may be it is unnecessary at all to register a ISR and you could empty it from the mainloop directly into your own id-lookup buffer (assuming the mainloop is fast enough)</p>\n"}], "owner": {"reputation": 45, "user_id": 12178351, "user_type": "registered", "profile_image": "https://graph.facebook.com/2553865151508462/picture?type=large", "display_name": "Jonas Hjulstad", "link": "https://stackoverflow.com/users/12178351/jonas-hjulstad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1571228901, "creation_date": 1571221982, "last_edit_date": 1571225821, "question_id": 58411240, "link": "https://stackoverflow.com/questions/58411240/struct-memory-allocation-issues-for-message-buffer", "title": "Struct memory allocation issues for message buffer", "body": "<p>I'm trying to use static structs as a buffer for incoming messages, in order to avoid checking the buffer on the MCP2515-external unit. An ISR enters the function with a can_message* value 255 to actually read new messages from my MCP2515. \nOther applications register an ID in the message passed as argument, in order to check if the buffer holds any messages with the same value.\nThis returns wrong IDs, and the rest of the datafields are 0 and uninitialized. What is wrong?</p>\n\n<p>can_message struct:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>typedef struct \n{\n    uint8_t id;\n    uint8_t datalength;\n    uint8_t data[8];\n}can_message;\n</code></pre>\n\n<pre class=\"lang-c prettyprint-override\"><code>int CAN_message_receive(can_message* message)\n{\n\n    static volatile can_message* buffers = (volatile can_message*)0x18FF;\n    static int birth = 1;\n    if(birth)\n    {\n        for (int i; i &lt; CAN_MESSAGE_UNIQUE_IDS; i++)\n        {\n                        //These structs gets addresses outside SRAM\n            buffers[i] = (can_message){0,0,0};\n        }\n        birth = 0;\n    }\n\n    if (message == CAN_UPDATE_MESSAGES)\n    {\n        /* Sorts messages &lt;3 */\n        can_message currentMessage;\n                //These functions are working:\n        CAN_message_get_from_MCP_buf(&amp;currentMessage, 0);\n        buffers[currentMessage.id] = currentMessage;\n        CAN_message_get_from_MCP_buf(&amp;currentMessage, 1);\n        buffers[currentMessage.id] = currentMessage;\n\n\n        return 0;   //returns nothing !\n    }\n    if(buffers[message-&gt;id].id != 0)\n    {\n        printf(\"test\\n\");\n                //This copy gives wrong id and data:\n        memcpy(message, &amp;buffers[message-&gt;id], sizeof(can_message));\n        buffers[message-&gt;id].id = 0;\n        return 0;\n    }\n    return -1;\n} \n</code></pre>\n\n<p>Edit 1:\nI did however notice that any buffers[i]-struct gets a totally different address than expected. It does not use the addresses following 0x18FF on the SRAM. Is there any way to change this? </p>\n\n<p>Edit 2:\nThis is my main-loop:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>while (1) {\n\n//printf(\"tx buf ready: %d\\n\", MCP2515_TX_buf_empty(0));\n//CAN_Loopback_test();\n\n_delay_ms(500);\n        value = USART_ReadByte(0);\n        CAN_message_receive(&amp;msg);\n        printf(\"CAN_receive: ID: %d, datalength: %d, data: \\n\",msg.id);\n        for (int k; k &lt; msg.datalength; k++)\n        {\n            printf(\"%d, \",msg.data[k]);\n        }\n        printf(\"\\n\");\n\n    }\n</code></pre>\n\n<p>Edit 3: Changing the buffer-pointer to array solved the issue. (It does no longer use the SRAM, but whatever floats my boat)</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>int CAN_message_receive(can_message* message)\n{\n\n    static can_message buffers[CAN_MESSAGE_UNIQUE_IDS];\n    static int birth = 1;\n    if(birth)\n    {\n        for (int i; i &lt; CAN_MESSAGE_UNIQUE_IDS*10; i++)\n        {\n            *(char*)(0x18FF+i) = 0;\n            printf(\"buffers: %X\\n\", &amp;buffers[i]);\n        }\n        birth = 0;\n    }\n</code></pre>\n"}, {"tags": ["c", "debugging", "eclipse-cdt", "stm32", "simulator"], "comments": [{"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 1, "creation_date": 1571231807, "post_id": 58410738, "comment_id": 103171368, "body": "How does the simulator driver of IAR work? Is it an extra application that can be controlled by the driver? Is the driver documented? Can the driver be controlled in some way? Don&#39;t expect a general purpose Eclipse to talk to any other software right out of the box. You might like to look for a plugin for Eclipse. Did you ask IAR if they know about such a plugin? Why don&#39;t you simple use IAREW?"}, {"owner": {"reputation": 1, "user_id": 9921859, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-kQBEJXmNycw/AAAAAAAAAAI/AAAAAAAAAFI/ph6l9zBn-jc/photo.jpg?sz=128", "display_name": "Salar Yunis", "link": "https://stackoverflow.com/users/9921859/salar-yunis"}, "reply_to_user": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 0, "creation_date": 1571301810, "post_id": 58410738, "comment_id": 103197831, "body": "IAR EW uses a special simulator called c-spy debugger, it let&#39;s you choose your exact MCU board and it simulates its completely. this simulator driver is part of the IDE so it does not need any extra application to be installed. I will look for a way to integrate this c-spy simulator with eclipse."}, {"owner": {"reputation": 1701, "user_id": 5836577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/931236857b09c3b0aea0f29fb5a23cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Guillaume Petitjean", "link": "https://stackoverflow.com/users/5836577/guillaume-petitjean"}, "edited": false, "score": 0, "creation_date": 1571301987, "post_id": 58410738, "comment_id": 103197942, "body": "I&#39;ve heard of a STM32 Bluepill QEMU but never used it. Anyway, a STM32 real board is cheap, easy to get and fast to program (a Nucleo costs few dollars) so are you sure you really need a simulator ?"}, {"owner": {"reputation": 1701, "user_id": 5836577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/931236857b09c3b0aea0f29fb5a23cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Guillaume Petitjean", "link": "https://stackoverflow.com/users/5836577/guillaume-petitjean"}, "edited": false, "score": 1, "creation_date": 1571302055, "post_id": 58410738, "comment_id": 103197979, "body": "You will not go very far with your debug on a simulator: you will very quickly need real hardware interfaces, real peripherals, etc..."}, {"owner": {"reputation": 1, "user_id": 9921859, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-kQBEJXmNycw/AAAAAAAAAAI/AAAAAAAAAFI/ph6l9zBn-jc/photo.jpg?sz=128", "display_name": "Salar Yunis", "link": "https://stackoverflow.com/users/9921859/salar-yunis"}, "edited": false, "score": 0, "creation_date": 1571302222, "post_id": 58410738, "comment_id": 103198076, "body": "I have a couple of STM32 boards, but sometimes i need to check some piece of codes quickly and it would be very helpful to just simulate it before connecting the real hardware, it makes sense for many cases."}, {"owner": {"reputation": 1701, "user_id": 5836577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/931236857b09c3b0aea0f29fb5a23cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Guillaume Petitjean", "link": "https://stackoverflow.com/users/5836577/guillaume-petitjean"}, "edited": false, "score": 1, "creation_date": 1571303112, "post_id": 58410738, "comment_id": 103198586, "body": "Well my experience of simulators (on cortex M3 based MCUs) is that it is not very useful, unless you don&#39;t have real boards. Is it also usuallu very slow. So when you say &quot;I need to check quickly&quot; I don&#39;t see how it will be quicker with a simulator, when loading a software on a Nucleo takes a few seconds."}], "owner": {"reputation": 1, "user_id": 9921859, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-kQBEJXmNycw/AAAAAAAAAAI/AAAAAAAAAFI/ph6l9zBn-jc/photo.jpg?sz=128", "display_name": "Salar Yunis", "link": "https://stackoverflow.com/users/9921859/salar-yunis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 291, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571564935, "creation_date": 1571220298, "last_edit_date": 1571564935, "question_id": 58410738, "link": "https://stackoverflow.com/questions/58410738/debugging-a-code-with-a-board-simulator-in-eclipse-no-hardware", "title": "Debugging a code with a board simulator in Eclipse (no hardware)", "body": "<p>I'm using Eclipse IDE for debugging a code with an STM32 microcontroller, and looking for a way to simulate the MCU board and not need to connect and use the actual micrcontroller, it is very helpful to run simple codes and testing.</p>\n\n<p>I was using IAREW before and it is possible, it has an option for a simulator driver in the debugging tool and you can run and see the results normally as if the board is connected; i was wondering if it is also possible with Eclipse?</p>\n\n<p>In the Eclipse Debugger -> Debug probe, there are only 3 options which are ST-Link(GDB), J-Link and ST-LINK(Open-OCD); i'm new to Eclipse and couldn't figure out if it could be possible somehow by modifying something with one of those options.</p>\n\n<ul>\n<li>Update:</li>\n</ul>\n\n<p>I have found a kind of a solution, to add an extension to include the IAR EW debugger inside eclipse:\n<a href=\"http://eclipse-update.iar.com/plugin-manager-install.html\" rel=\"nofollow noreferrer\">http://eclipse-update.iar.com/plugin-manager-install.html</a></p>\n\n<p>It is not a good solution as both IDEs need to be installed, and the project need to be created specifically for IAR to use its simulator, so it is not possible to create an STM32 project and use the IAR simulator for debugging.</p>\n\n<p>Are there other solutions within eclipse, without using another IDE or an extesion?</p>\n"}, {"tags": ["c", "memory-management", "keil", "c51"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1571219803, "post_id": 58410541, "comment_id": 103164570, "body": "Not cecessarily, the compiler is free to arrange variables in memory in any order. Why do you care?"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1571219805, "post_id": 58410541, "comment_id": 103164571, "body": "Which problem do you want to solve with consecutive addresses?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1571219947, "post_id": 58410541, "comment_id": 103164660, "body": "Also read <a href=\"https://stackoverflow.com/questions/58405571/how-are-global-variables-stored-in-memory\">this SO article</a>"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1571219983, "post_id": 58410541, "comment_id": 103164677, "body": "You must not assume any special arrangement of variables in memory. Also if they were located at adjacent addresses, you would not gain anything. It is not legal to take address of one variables to access another variable."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1571220143, "post_id": 58410541, "comment_id": 103164774, "body": "A compiler might organise variables by type, when translating them from its internal representation to code. It might organise them alphanumerically within that."}, {"owner": {"reputation": 252, "user_id": 3212131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/158d742ee9ff0db7a791375d36679b13?s=128&d=identicon&r=PG", "display_name": "user9385381", "link": "https://stackoverflow.com/users/3212131/user9385381"}, "edited": false, "score": 0, "creation_date": 1571220163, "post_id": 58410541, "comment_id": 103164788, "body": "You should use a memory analyser such as CheatEngine to inspect your compiled program and confirm this yourself, however it may change once you recompile so this should only be used for dirty hacks."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 252, "user_id": 3212131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/158d742ee9ff0db7a791375d36679b13?s=128&d=identicon&r=PG", "display_name": "user9385381", "link": "https://stackoverflow.com/users/3212131/user9385381"}, "edited": false, "score": 0, "creation_date": 1571220198, "post_id": 58410541, "comment_id": 103164809, "body": "@user9385381 looking at the generated assembly code is much simpler than using CheatEngine and he is on a microcontroller, so CheatEngine doesn&#39;t apply anyway."}, {"owner": {"reputation": 252, "user_id": 3212131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/158d742ee9ff0db7a791375d36679b13?s=128&d=identicon&r=PG", "display_name": "user9385381", "link": "https://stackoverflow.com/users/3212131/user9385381"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1571220245, "post_id": 58410541, "comment_id": 103164841, "body": "@Jabberwocky That is absolutely subjective  EDIT: Oh nevermind didn&#39;t see the microcontroller thing"}, {"owner": {"reputation": 43, "user_id": 12077768, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDcDPgBMSgwH41ljIAz6I63T9qmPS1nkPm3bYy5cg=k-s128", "display_name": "bas knippels", "link": "https://stackoverflow.com/users/12077768/bas-knippels"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1571222237, "post_id": 58410541, "comment_id": 103165827, "body": "@Jabberwocky and Gerhadh I just happen to run into a very specific situation in which I could have used a pointer to adjust some variables... provided that the addresses were in order. But as it it appears that it would not be wise to assume that that is the case, I simply wrote a couple of lines more to achieve my goal. We are talking about just 8 bytes so it is not a big deal, but still it made us wonder."}], "answers": [{"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 1, "last_activity_date": 1571222610, "creation_date": 1571222610, "answer_id": 58411435, "question_id": 58410541, "link": "https://stackoverflow.com/questions/58410541/if-you-declare-severable-variables-in-order-will-they-have-incrementing-address/58411435#58411435", "title": "If you declare severable variables in order, will they have incrementing addresses", "body": "<blockquote>\n  <p>Will their addresses be incrementing and in the same order? as they are declared?</p>\n</blockquote>\n\n<p>No, you can't know or assume anything about this. They may be allocated in any order on the stack, or in registers, or not allocated at all. The only time when allocation order is guaranteed is when declaring arrays and structs.</p>\n\n<p>In addition, you can't use pointer arithmetic on anything that's not an array, or you risk running into various subtle undefined behavior bugs.</p>\n"}], "owner": {"reputation": 43, "user_id": 12077768, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDcDPgBMSgwH41ljIAz6I63T9qmPS1nkPm3bYy5cg=k-s128", "display_name": "bas knippels", "link": "https://stackoverflow.com/users/12077768/bas-knippels"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1571222610, "creation_date": 1571219674, "question_id": 58410541, "link": "https://stackoverflow.com/questions/58410541/if-you-declare-severable-variables-in-order-will-they-have-incrementing-address", "title": "If you declare severable variables in order, will they have incrementing addresses", "body": "<p>We have a c program with a lot of files and we are wondering one specific thing.</p>\n\n<p>We are compiling it with C51.</p>\n\n<p>If, lets say in one of the files, I declare a few variables like:</p>\n\n<pre><code>unsigned char xdata a;\nunsigned char xdata b;\n...\n//etc\nunsigned char xdata z;\n</code></pre>\n\n<p>Will their addresses be incrementing and in the same order? as they are declared?</p>\n\n<p>I realize that incrementing addresses can be achieved using arrays or structs or that I can assign fixed addresses of choice but that is not the question.</p>\n"}, {"tags": ["c", "node.js", "node-ffi"], "answers": [{"tags": [], "owner": {"reputation": 45, "user_id": 6498338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4bea804d70bd6024f91dd9cc72fe859?s=128&d=identicon&r=PG&f=1", "display_name": "wakeup", "link": "https://stackoverflow.com/users/6498338/wakeup"}, "is_accepted": true, "score": 0, "last_activity_date": 1571736419, "creation_date": 1571736419, "answer_id": 58501098, "question_id": 58410531, "link": "https://stackoverflow.com/questions/58410531/node-ffi-calling-c-dll-returning-a-pointer/58501098#58501098", "title": "Node-ffi calling c DLL returning a pointer", "body": "<p>I solved it. I just forgot to add </p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n</code></pre>\n\n<p>I didn't see the warning about it.</p>\n"}], "owner": {"reputation": 45, "user_id": 6498338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4bea804d70bd6024f91dd9cc72fe859?s=128&d=identicon&r=PG&f=1", "display_name": "wakeup", "link": "https://stackoverflow.com/users/6498338/wakeup"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 58501098, "answer_count": 1, "score": 0, "last_activity_date": 1571736419, "creation_date": 1571219632, "question_id": 58410531, "link": "https://stackoverflow.com/questions/58410531/node-ffi-calling-c-dll-returning-a-pointer", "title": "Node-ffi calling c DLL returning a pointer", "body": "<p>I'm trying a simple code to test if I know to return a pointer from a C DLL to be used in other functions of the DLL as a parameter. But something doesn't run</p>\n\n<p>C DLL code</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdint.h&gt;\n\n#if defined(WIN32) || defined(_WIN32)\n#define EXPORT __declspec(dllexport)\n#else\n#define EXPORT\n#endif\n\n\nEXPORT int* init() {\n    int *p = (int *)calloc(sizeof(int));\n    p[0]=33;\n    return p;\n}\n\n\nEXPORT int get(int* base) {\n\n\n  return *base;\n}\n</code></pre>\n\n<p>Code of my node application</p>\n\n<pre><code>var ffi = require('ffi');\nvar ref = require('ref')\n\n\nvar intPtr = ref.refType('int');\n\nvar libm = ffi.Library('./miffi', {\n    'init': [ intPtr, [ ] ],\n    'get': [ 'int', [  intPtr ] ],\n});\n\n\n\nvar idx = libm.init()\nconsole.log(\"I get id\" )\n\nconsole.log(libm.get(idx))\n</code></pre>\n\n<p>But doesn't show the first \"console.log\", although it doen't show any error. If I remove the line \"p[0]=33;\" I can see the first \"console.log\" although get doesn't run.</p>\n\n<p>Thanks a lot</p>\n"}, {"tags": ["c", "visual-studio-2019"], "comments": [{"owner": {"reputation": 243, "user_id": 11555499, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JG4Sr.jpg?s=128&g=1", "display_name": "joulev", "link": "https://stackoverflow.com/users/11555499/joulev"}, "edited": false, "score": 0, "creation_date": 1571217828, "post_id": 58409936, "comment_id": 103163479, "body": "This comment won&#39;t help but I am curious: why on earth is it required to use Visual Studio in a competition? One can use any IDE (s)he wants! Is there any sponsorship there?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1571217896, "post_id": 58409936, "comment_id": 103163516, "body": "You might want to organise one project in one folder, rather than jumble them up all in the same folder."}, {"owner": {"reputation": 13, "user_id": 12211556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66815335e026c6532ea1994917f9c27d?s=128&d=identicon&r=PG&f=1", "display_name": "unknownunknown", "link": "https://stackoverflow.com/users/12211556/unknownunknown"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1571219105, "post_id": 58409936, "comment_id": 103164222, "body": "@WeatherVane will try"}], "answers": [{"tags": [], "owner": {"reputation": 1417, "user_id": 716682, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/13cdb854a6ee1add60c3c754e3e056a3?s=128&d=identicon&r=PG", "display_name": "Pibben", "link": "https://stackoverflow.com/users/716682/pibben"}, "is_accepted": true, "score": 6, "last_activity_date": 1571218279, "creation_date": 1571218279, "answer_id": 58410123, "question_id": 58409936, "link": "https://stackoverflow.com/questions/58409936/how-do-i-compile-just-one-c-file-in-visual-studio-2019/58410123#58410123", "title": "How do I Compile Just One C File in Visual Studio 2019?", "body": "<p>You need to organize your code into <code>Projects</code> and <code>Solutions</code>. You use one <code>Project</code> per program you write and then group them in a <code>Solution</code>.</p>\n\n<p>Se the docs here: <a href=\"https://docs.microsoft.com/en-us/visualstudio/ide/solutions-and-projects-in-visual-studio?view=vs-2019\" rel=\"noreferrer\">https://docs.microsoft.com/en-us/visualstudio/ide/solutions-and-projects-in-visual-studio?view=vs-2019</a></p>\n"}], "owner": {"reputation": 13, "user_id": 12211556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66815335e026c6532ea1994917f9c27d?s=128&d=identicon&r=PG&f=1", "display_name": "unknownunknown", "link": "https://stackoverflow.com/users/12211556/unknownunknown"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1604, "favorite_count": 1, "accepted_answer_id": 58410123, "answer_count": 1, "score": 1, "last_activity_date": 1571218596, "creation_date": 1571217643, "last_edit_date": 1571218596, "question_id": 58409936, "link": "https://stackoverflow.com/questions/58409936/how-do-i-compile-just-one-c-file-in-visual-studio-2019", "title": "How do I Compile Just One C File in Visual Studio 2019?", "body": "<p>I don't have experience using Visual Studio. The university is conducting a C coding competition and forcing students to use Visual Studio. To practice I created 2 files: \"to print helloworld\", \"finding smallest in the array\". Visual studio builds ALL files and I want to create multiple files to save time and keep it ready to code but if I am working on one question and build it, all files get built. How to build one file? Please help.</p>\n"}, {"tags": ["c"], "owner": {"reputation": 31, "user_id": 11971817, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-vGzgoRTq0SI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdAzPQVRKmZxAoMGhB3ps3DZDmZ9w/mo/photo.jpg?sz=128", "display_name": "MegaOwIer", "link": "https://stackoverflow.com/users/11971817/megaowier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "closed_date": 1571217309, "answer_count": 0, "score": 1, "last_activity_date": 1571216838, "creation_date": 1571216838, "question_id": 58409678, "link": "https://stackoverflow.com/questions/58409678/how-do-scanf-and-printf-work-in-reading-and-writing-floating-points", "closed_reason": "Duplicate", "title": "How do scanf and printf work in reading and writing floating points?", "body": "<p>I just learned that floating points are stored according to IEEE754 in computers. But I wonder how do <code>scanf</code> and <code>printf</code> do to transform the data between a 64-bit binary (take <code>double</code> for example) string and a human-friendly decimal. </p>\n\n<p>Could someone please help me?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1571217593, "post_id": 58409670, "comment_id": 103163358, "body": "If the declaration in the .h file is <code>SCOPE void SD(void);</code> and the implementation in the .c file is <code>bool SD(void) {...}</code> then the declaration in the .h file is most likely wrong. Also it&#39;s unclear what <code>SCOPE</code> is here, it&#39;s defined elsewhere in some .h file, and it&#39;s not a C thing. The declaration in the .h file should probably be <code>SCOPE bool SD(void);</code>. Anyway, it&#39;s hard to answer this question because you don&#39;t provide much context information."}, {"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1571232328, "post_id": 58409670, "comment_id": 103171697, "body": "Please look for definitions of <code>SCOPE</code>, most probably lines like <code>#define SCOPE ...</code>, perhaps <code>#define SCOPE extern</code> and  <code>#define SCOPE &#47;*nothing*&#47;</code>. This was once en vogue but it&#39;s bad style. Post your findings by <a href=\"https://stackoverflow.com/posts/58409670/edit\">edit</a>ing your question. @Jabberwocky&#39;s analysis is correct, the declaration in the header file does not match the definition in the source file."}], "owner": {"reputation": 29, "user_id": 9653834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc315fc964a2a1cfcfde77716513a565?s=128&d=identicon&r=PG&f=1", "display_name": "SKmay", "link": "https://stackoverflow.com/users/9653834/skmay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571216815, "creation_date": 1571216815, "question_id": 58409670, "link": "https://stackoverflow.com/questions/58409670/use-of-scope-and-scope-void-in-c", "title": "use of &quot;SCOPE&quot; and &quot;SCOPE void&quot; in C", "body": "<p>I am new to C and would like to know what does these declaration means. </p>\n\n<pre><code>&gt; bool SD(void) {\n&gt;     if -statement \n&gt;      return(FALSE);\n&gt; \n&gt; else-statement\n&gt;     return(TRUE); }   /* end - SD (void): these are written  in .c file\n</code></pre>\n\n<p>however, in the .h file, there is declared also for SD function </p>\n\n<pre><code>SCOPE void SD(void) //in .h file \n</code></pre>\n\n<p>is there any difference in .c and .h file for declaring SD function? </p>\n\n<p>There is one SCOPE void declaration in .h file that, I didnt understand. May I ask what does it mean? </p>\n\n<pre><code>SCOPE void step(char dir);  //in .h file \n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 4, "creation_date": 1571215592, "post_id": 58409225, "comment_id": 103162275, "body": "<code>I am able to crack it uptill</code> - post your code. Please don&#39;t post images of text, the images don&#39;t get indexed by the search engine on this site. If you can, please use proper formatting styles and post text as text."}, {"owner": {"reputation": 2292, "user_id": 4502035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38a1b21c3e83f9d10aaa56c93f6150a?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas", "link": "https://stackoverflow.com/users/4502035/andreas"}, "edited": false, "score": 2, "creation_date": 1571215793, "post_id": 58409225, "comment_id": 103162392, "body": "The question doesn&#39;t appear to include any attempt at all to solve the problem. Please edit the question to show what you&#39;ve tried, and show a specific roadblock you&#39;re running into with <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>. For more information, please see <a href=\"https://stackoverflow.com/help/how-to-ask\">How to Ask</a>."}, {"owner": {"reputation": 131, "user_id": 8557287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab86d3c08d3d33c2a5f3d2cb5abbd12a?s=128&d=identicon&r=PG", "display_name": "aryan", "link": "https://stackoverflow.com/users/8557287/aryan"}, "edited": false, "score": 1, "creation_date": 1571215969, "post_id": 58409225, "comment_id": 103162487, "body": "I have now added my code."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1571216317, "post_id": 58409225, "comment_id": 103162699, "body": "&quot;I am not aware of the logic for implementing two pyramids side by side.&quot; They are almost the same as the pyramid at the top. There are up to <code>n</code> stars on each side of the bottom of figure. So until that point, output <code>n</code> spaces on each line. Then start printing stars and/or spaces."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1571216597, "post_id": 58409225, "comment_id": 103162844, "body": "Aside about <code>i&lt;=n-1;</code> This is harder to read than <code>i &lt; n;</code> and in some cases is <i>wrong</i>."}, {"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 0, "creation_date": 1571218916, "post_id": 58409225, "comment_id": 103164136, "body": "I suggest to use spaces instead of tabulators (<code>&#39;\\t&#39;</code>). Your code prints spaces between subsequent asterisks, e.g. <code>* * *</code> instead of <code>***</code>. Is this intentional? It would be better to show the user input and expected output <b>as text</b> (output formatted as a code block) in the question instead of using images."}], "answers": [{"tags": [], "owner": {"reputation": 219, "user_id": 8198361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6261d06afb1d50c3759e956bf36438f?s=128&d=identicon&r=PG", "display_name": "Lily AB", "link": "https://stackoverflow.com/users/8198361/lily-ab"}, "is_accepted": false, "score": 0, "last_activity_date": 1571283576, "creation_date": 1571283576, "answer_id": 58424561, "question_id": 58409225, "link": "https://stackoverflow.com/questions/58409225/printing-two-pyramids-side-by-side-ascii-graphics/58424561#58424561", "title": "Printing two pyramids side by side (ASCII graphics)", "body": "<p>Here's an attempt...</p>\n\n<p>Have used \"#define\"s for the characters to be printed.</p>\n\n<p>Have utilized three do-while loops to break the task of printing the top pyramid, the \"@\"s and the bottom pyramid.</p>\n\n<p>The solution would work for the examples provided or any \"Odd\" number, provided by the user.</p>\n\n<p>For even numbers,the solution needs to be worked upon(either ways the top of the pyramid would not align at the center for even numbers).</p>\n\n<p>Hope this is helpful.....feel free to play around with the code....</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define SPACE ' '\n#define STAR '*'\n#define AT '@'\n\n\nint main(){\n\n  int num = 7;//input from the user, have used 7 as an example\n\n  int total_hor_length = num * 3;//# of characters to be printed on each line\n  int i = num;\n  int j = 0;\n  while(i &gt; 0){//calculate the iterations\n    j++;        //required for top and bottom\n    i -= 2;     //Pyramids\n  }\n  int first_print = j; //# first loop iteration\n  int last_print = first_print; //# last loop iteration\n  int center_print = (num * 2 - 1)-(first_print + last_print);//# center loop\n  int pos = total_hor_length/2; //position of top of center pyramid\n  int count = 0;\n  int k;\n\n\n  i = 0;//re-initialize i for the first loop \n  //Logic for the Top Pyramid(first loop)\n  do{\n    for(k = 0;k &lt; total_hor_length;++k){ //for input \"n\"\n      if((k &lt; pos || k &gt; pos+count))     //by the time this loop finishes\n        printf(\"%c\",SPACE);              //pos will be \"n-1\"\n      else                               //and count will be \"n+1\"\n        printf(\"%c\",STAR);\n    }\n    putchar('\\n');\n    pos--;\n    count+=2;\n    i++;\n  }while( first_print &gt; i);\n\n i = 0;//re-initialize i for the center loop \n //Logic for the \"@\"s (second loop)\n do{\n   for(k = 0;k &lt; total_hor_length;++k){       //utilizing the values of \"count\"\n     if((k == count-1 || k == (count-1)+pos)) //and pos procured from the previous \n       printf(\"%c\",AT);                       //loop to print the \"@\"s\n     else\n       printf(\"%c\",SPACE);\n   }\n   putchar('\\n');\n   i++;\n }while(center_print &gt; i);\n\n i = 0;//re-initialize i for the center loop \n //Logic for the Bottom Pyramids (Last loop)\n do{\n   for(k = 0;k &lt; total_hor_length;++k){                                   \n     if(i == 0){\n       if((k &lt;= pos-i) || (k &gt; pos + num + i &amp;&amp; k &lt; total_hor_length - i))\n         printf(\"%c\",STAR);\n       else if(k == pos+1||k == pos+num) //printing the line containing\n         printf(\"%c\",AT);                // asterisk and \"@\" symbols\n       else\n         printf(\"%c\",SPACE);\n     }\n    else{\n      if((k &gt;= i &amp;&amp; k &lt;= pos-i) || (k &gt; pos + num + i &amp;&amp; k &lt; total_hor_length - i))\n       printf(\"%c\",STAR);    //printing the last lines\n      else\n       printf(\"%c\",SPACE);\n    }\n  }\n     putchar('\\n');\n     i++;\n }while(i &lt; last_print);\n\n}\n</code></pre>\n"}], "owner": {"reputation": 131, "user_id": 8557287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab86d3c08d3d33c2a5f3d2cb5abbd12a?s=128&d=identicon&r=PG", "display_name": "aryan", "link": "https://stackoverflow.com/users/8557287/aryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 123, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1571283576, "creation_date": 1571215447, "last_edit_date": 1571224535, "question_id": 58409225, "link": "https://stackoverflow.com/questions/58409225/printing-two-pyramids-side-by-side-ascii-graphics", "title": "Printing two pyramids side by side (ASCII graphics)", "body": "<p>I am able to crack it up till @symbol but not after that.</p>\n\n<p>I am not aware of logic for implementing two pyramids side by side.</p>\n\n<pre><code>int main()\n    {\n        int i, space, n, j, l, k=0;\n\n        printf(\"Enter number excluding 1 and -ve numbers: \");\n        scanf(\"%d\",&amp;n);\n\n        for(i=1; i&lt;=n-1; ++i, k=0)\n        {\n            for(j=0;j&lt;(n/2);j++)\n            {\n                printf(\"\\t\");\n            }\n            for(space=1; space&lt;=n-i; ++space)\n            {\n                printf(\"  \");\n            }\n\n            while(k != 2*i-1)\n            {\n                printf(\"* \");\n                ++k;\n            }//End of upper star pyramid \n            printf(\"\\n\");\n        }\n\n       //logic for @\n        for(j=1;j&lt;=(n-1);j++)\n            {\n                  for(l=0;l&lt;(n/2);l++)\n                {\n                    printf(\"\\t\");\n                }\n                for(l=1; l&lt;space; ++l)\n                {\n                    printf(\"  \");\n                }\n                printf(\"@\");\n                for(l=1; l&lt;=n; l++)\n                {\n                    printf(\" \");\n                }\n                printf(\"@\\n\");\n            }\n        //after that I dont know how to work with two different pyramids side by side\n        return 0;\n    }\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/04Guo.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/04Guo.jpg\" alt=\"Sample\"></a></p>\n"}, {"tags": ["c++", "c", "cppcheck"], "comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 1, "creation_date": 1571215940, "post_id": 58409223, "comment_id": 103162463, "body": "<code>not show #define</code> - please create an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">MCVE</a> - a minimal reproducible example, including steps on how did you created the custom rule? How did you add the custom rule? On what code did you test? Please including a smallest possible source code of your &quot;test project&quot; where the <code>#define</code> doesn&#39;t show."}, {"owner": {"reputation": 74, "user_id": 6511773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/454731cf159526b52bdc03704ceebbc6?s=128&d=identicon&r=PG&f=1", "display_name": "BulletRain", "link": "https://stackoverflow.com/users/6511773/bulletrain"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1571217066, "post_id": 58409223, "comment_id": 103163069, "body": "Thanks you for your comment. I have edit my question"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1571230920, "post_id": 58409223, "comment_id": 103170820, "body": "Why on earth would you not allow <code>#define</code>? How do you plan to write header guards without it?"}], "answers": [{"tags": [], "owner": {"reputation": 421, "user_id": 11521482, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QIrZ4uBKGpc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfy52SQZZoz_RBLxJ0jRvF-_uNwbQ/mo/photo.jpg?sz=128", "display_name": "Mathias Schmid", "link": "https://stackoverflow.com/users/11521482/mathias-schmid"}, "is_accepted": true, "score": 0, "last_activity_date": 1571266915, "creation_date": 1571266915, "answer_id": 58422735, "question_id": 58409223, "link": "https://stackoverflow.com/questions/58409223/cppcheck-rule-not-show-define-comment/58422735#58422735", "title": "CppCheck rule not show #define, comment", "body": "<p>The document <code>writing-rules-2.pdf</code> at <a href=\"https://sourceforge.net/projects/cppcheck/files/Articles/\" rel=\"nofollow noreferrer\">https://sourceforge.net/projects/cppcheck/files/Articles/</a> states: \"The Cppcheck data is preprocessed. There are no comments, #define, #include, etc.\"</p>\n\n<p>As an alternative you can create a XML dump using <code>cppcheck --dump yourfile.c</code> and post-process the dump e.g. by a Python script.\nThe <code>#define TEST 1</code> line of your example is then part of the <code>rawtokens</code> and <code>directivelist</code> section.\nSeveral Cppcheck addons do it this way (e.g. Python MISRA-C addon). See \"addons\" directory of Cppcheck at GitHub. Within this directory there is also a Python helper script <code>cppcheckdata.py</code> which reads a dump file and creates object lists for tokens, functions, etc. </p>\n"}], "owner": {"reputation": 74, "user_id": 6511773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/454731cf159526b52bdc03704ceebbc6?s=128&d=identicon&r=PG&f=1", "display_name": "BulletRain", "link": "https://stackoverflow.com/users/6511773/bulletrain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 58422735, "answer_count": 1, "score": 0, "last_activity_date": 1571266915, "creation_date": 1571215440, "last_edit_date": 1571216985, "question_id": 58409223, "link": "https://stackoverflow.com/questions/58409223/cppcheck-rule-not-show-define-comment", "title": "CppCheck rule not show #define, comment", "body": "<p>I'm create custom rule for cppCheck. When I create rule like not allow #define in project. But --rule=.+ not show #define in my test project. \nIs there any option or flag for cppcheck to show #define in my code ?</p>\n\n<p>my rule file:</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;rule version=\"1\"&gt;\n       &lt;pattern&gt;#define&lt;/pattern&gt;\n&lt;/rule&gt;\n</code></pre>\n\n<p>my example:</p>\n\n<pre><code>#define TEST 1\n\nint main() {\n    int a = TEST;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["python", "c"], "answers": [{"tags": [], "owner": {"reputation": 5818, "user_id": 389222, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/6e599629d5f058545c7ae84e7bdd3441?s=128&d=identicon&r=PG", "display_name": "Gilad Naaman", "link": "https://stackoverflow.com/users/389222/gilad-naaman"}, "is_accepted": true, "score": 1, "last_activity_date": 1571221827, "creation_date": 1571221827, "answer_id": 58411198, "question_id": 58408981, "link": "https://stackoverflow.com/questions/58408981/define-an-array-of-structs-using-hydras/58411198#58411198", "title": "Define an array of structs using hydras", "body": "<p>Sure, the second parameter of the array constructor is the type of the array.</p>\n\n<p>You can write <code>Array(3, packet_t)</code> and <code>Array(37, uint32_t)</code></p>\n"}], "owner": {"reputation": 1063, "user_id": 2836444, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3f050f3bfc552d963493568e70237dda?s=128&d=identicon&r=PG", "display_name": "gkpln3", "link": "https://stackoverflow.com/users/2836444/gkpln3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 58411198, "answer_count": 1, "score": 1, "last_activity_date": 1571221827, "creation_date": 1571214656, "question_id": 58408981, "link": "https://stackoverflow.com/questions/58408981/define-an-array-of-structs-using-hydras", "title": "Define an array of structs using hydras", "body": "<p>I am using <a href=\"https://pypi.org/project/Hydras/\" rel=\"nofollow noreferrer\">hydras</a> to convert my C structs to python structs, to be able to communicate between an embedded device running my C code and my python code using pyserial.</p>\n\n<p>My C struct looks like so:</p>\n\n<pre><code>typedef struct {\n    uint32_t packet_index;\n    uint32_t rssi;\n    uint32_t packet_data[37];\n} packet_t;\n\ntypedef struct {\n    float32_t total_average;\n    packet_t channel_packets[3];\n} message_t;\n</code></pre>\n\n<p>My python code:</p>\n\n<pre><code>from hydras import *\n\nclass packet_t(Struct):\n    pakcet_index = uint32_t\n    rssi = uint32_t\n    packet_data = Array(37)\n\nfloat32_t = Float\nclass message_t(Struct):\n    total_average = float32_t\n    channel_packets = Array(len(packet_t)*3) # TODO: Change\n</code></pre>\n\n<p>Is there any way I can define an array of packets without having to treat them as an arbitrary array?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c", "math.h"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1571214663, "post_id": 58408936, "comment_id": 103161741, "body": "Read about <a href=\"https://en.cppreference.com/w/c/language/conversion\" rel=\"nofollow noreferrer\"><i>implicit conversions</i></a>."}], "answers": [{"tags": [], "owner": {"reputation": 15, "user_id": 12212584, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EUNNu.png?s=128&g=1", "display_name": "k-var", "link": "https://stackoverflow.com/users/12212584/k-var"}, "is_accepted": false, "score": 0, "last_activity_date": 1571215809, "creation_date": 1571215809, "answer_id": 58409331, "question_id": 58408936, "link": "https://stackoverflow.com/questions/58408936/how-is-attributing-a-double-to-an-int-even-possible-in-this-case/58409331#58409331", "title": "How is attributing a double to an int even possible in this case?", "body": "<p>In an assignment, value of the right-hand side operand is implicitly converted into the type of left-hand side operand. That's how <code>floor(576.73 * 100) = 57673.0</code> became <code>57673</code>. C does this by taking the double value and ignoring (truncating) its fractional part.</p>\n"}, {"tags": [], "owner": {"reputation": 1206, "user_id": 4039619, "user_type": "registered", "accept_rate": 82, "profile_image": "https://lh3.googleusercontent.com/-TD1WY5pcbCc/AAAAAAAAAAI/AAAAAAAAAFE/mxlKAxe_A2Q/photo.jpg?sz=128", "display_name": "Sigve Karolius", "link": "https://stackoverflow.com/users/4039619/sigve-karolius"}, "is_accepted": false, "score": 0, "last_activity_date": 1571215921, "creation_date": 1571215921, "answer_id": 58409375, "question_id": 58408936, "link": "https://stackoverflow.com/questions/58408936/how-is-attributing-a-double-to-an-int-even-possible-in-this-case/58409375#58409375", "title": "How is attributing a double to an int even possible in this case?", "body": "<p>As mentioned in the comment what you are looking at is an <a href=\"https://www.geeksforgeeks.org/type-conversion-c/\" rel=\"nofollow noreferrer\">implicit</a>, or eqyivalently, automatic type conversion that is done by the compiler. The example below shows how you could perform the conversion explicitly, also called \"type casting\".</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nvoid f_to_i(float f);\n\nint main(int argc, char *argv)\n{\n  float fl = 576.73;\n  f_to_i(fl);\n}\n\nvoid f_to_i(float f)\n{\n  int i;\n  // Implicit Conversion\n  i = floor(f * 100);\n  printf(\"%d\\n\", i);\n  i = 0;\n  // Explicit Conversion\n  i = (int)floor(f * 100);\n  printf(\"%d\\n\", i);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 2, "last_activity_date": 1571216768, "creation_date": 1571216768, "answer_id": 58409659, "question_id": 58408936, "link": "https://stackoverflow.com/questions/58408936/how-is-attributing-a-double-to-an-int-even-possible-in-this-case/58409659#58409659", "title": "How is attributing a double to an int even possible in this case?", "body": "<p>This line <code>int myNewValue = floor(myValue * 100);</code> contains no less than 3 implicit conversions.</p>\n\n<ul>\n<li><p>In <code>myValue * 100</code>, the integer constant <code>100</code> is of type <code>int</code>. An implicit conversion known as <em>\"the usual arithmetic conversions\"</em> convert the <code>int</code> operand to <code>float</code>. The multiplication is carried out on <code>float</code> and the resulting type is <code>float</code>. See <a href=\"https://stackoverflow.com/questions/46073295/implicit-type-promotion-rules\">Implicit type promotion rules</a>.</p></li>\n<li><p>The <code>float</code> result from the previous calculation is converted to the type of the function's operand. Function parameters are implicitly converted \"as if by assignment\", converting the passed argument to the type of the parameter, in this case <code>double</code>.</p></li>\n<li><p>The result of <code>double</code> is converted by assignment to the type of the left operand <code>int</code>. If the <code>double</code> contains a value which can be represented by an <code>int</code>, this conversion is well-defined.</p></li>\n</ul>\n\n<p>So this is why it works, but relying on implicit conversions is often not a good idea, since the potential for accidental bugs is great. </p>\n"}], "owner": {"reputation": 35, "user_id": 3670722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdbbcb5f81a5b56cc8f1ff4b83261ca5?s=128&d=identicon&r=PG&f=1", "display_name": "user3670722", "link": "https://stackoverflow.com/users/3670722/user3670722"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1571216768, "creation_date": 1571214517, "question_id": 58408936, "link": "https://stackoverflow.com/questions/58408936/how-is-attributing-a-double-to-an-int-even-possible-in-this-case", "title": "How is attributing a double to an int even possible in this case?", "body": "<p>I just started learning C and I'm having trouble understanding why the following code even works at all:</p>\n\n<pre><code>void convertMyNumber (float myValue) {\n    int myNewValue = floor(myValue * 100);\n    printf(\"%d\", myNewValue);\n}\n</code></pre>\n\n<p>Looking at the documentation for math.h, it is stated that the <code>floor()</code> function takes a <code>double</code> as an argument, and also returns a <code>double</code>. So far so great, I just ran the above code and typed in <code>576.73</code> as the value for the <code>myValue</code> variable. Surprisingly (to me), it printed out exactly <code>57673</code> on the screen, and I'm finding it difficult to understand how it is possible that it was able to attribute the returning value of the <code>floor</code> function (a <code>double</code>) to <code>int myNewValue</code>.</p>\n"}, {"tags": ["android", "c++", "c", "tensorflow", "eigen"], "comments": [{"owner": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "edited": false, "score": 0, "creation_date": 1571226616, "post_id": 58408911, "comment_id": 103168242, "body": "This should be provided by a header like <code>arm_neon.h</code> and Eigen should only try to use it if vectorization is enabled. You should report a bug with your exact setup and a minimal example. You can also explicitly deactivate vectorization in Eigen by compiling with <code>-DEIGEN_DONT_VECTORIZE</code>."}, {"owner": {"reputation": 972, "user_id": 841249, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/ef25b6b98f3daecff84a0ef4e2fddb72?s=128&d=identicon&r=PG", "display_name": "Tickon", "link": "https://stackoverflow.com/users/841249/tickon"}, "reply_to_user": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "edited": false, "score": 0, "creation_date": 1571392265, "post_id": 58408911, "comment_id": 103234575, "body": "Thanks for your reply @ch but using -DEIGEN_DONT_VECTORIZE I get: &quot;tensorflow/lite/kernels/eigen_support.cc:36:1: error: division by zero is not a constant-expression&quot; I suppose I do need vectorize..."}], "answers": [{"tags": [], "owner": {"reputation": 67, "user_id": 8427489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7279317e64dbfcfd13e34c315a0bfb23?s=128&d=identicon&r=PG&f=1", "display_name": "Arnab Mitra", "link": "https://stackoverflow.com/users/8427489/arnab-mitra"}, "is_accepted": false, "score": 0, "last_activity_date": 1580883107, "creation_date": 1580883107, "answer_id": 60069905, "question_id": 58408911, "link": "https://stackoverflow.com/questions/58408911/how-to-fix-error-vreinterpretq-u32-f64-was-not-declared-in-this-scope-build/60069905#60069905", "title": "How to fix error: &#39;vreinterpretq_u32_f64&#39; was not declared in this scope - building with Eigen on Android", "body": "<p>It seems that <code>vreinterpretq_u32_f64</code> and <code>vreinterpretq_f64_u32</code> is not defined.<br>\nIf you look at <code>Eigen/src/Core/arch/NEON/PacketMath.h</code> line 604, <code>vreinterpretq_f64_u64</code> and <code>vreinterpretq_u64_f64</code> is defined.<br>\nConsidering vector width as 128bits, <code>vreinterpretq_u32_f64</code> should cast from f64x2 to u32x4, similarly for <code>vreinterpretq_f64_u32</code></p>\n\n<p>Just add this two definitions after line 604 in <code>Eigen/src/Core/arch/NEON/PacketMath.h</code></p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template &lt;typename T&gt; float64x2_t vreinterpretq_f64_u32(T a) { return (float64x2) a; }\ntemplate &lt;typename T&gt; uint32x4_t vreinterpretq_u32_f64(T a) { return (uint32x4) a; }\n</code></pre>\n\n<p>Hope this helps!</p>\n"}], "owner": {"reputation": 972, "user_id": 841249, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/ef25b6b98f3daecff84a0ef4e2fddb72?s=128&d=identicon&r=PG", "display_name": "Tickon", "link": "https://stackoverflow.com/users/841249/tickon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 146, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1580883107, "creation_date": 1571214416, "last_edit_date": 1571220637, "question_id": 58408911, "link": "https://stackoverflow.com/questions/58408911/how-to-fix-error-vreinterpretq-u32-f64-was-not-declared-in-this-scope-build", "title": "How to fix error: &#39;vreinterpretq_u32_f64&#39; was not declared in this scope - building with Eigen on Android", "body": "<p>I'm trying to build Tensorflow Lite for Android which has Eigen as dependencies.\nAnd during build I get this error:</p>\n\n<pre><code>   .../eigen/Eigen/src/Core/arch/NEON/Complex.h:383:83: error: 'vreinterpretq_u32_f64' was not declared in this scope\n   Packet2d eq_swapped = vreinterpretq_f64_u32(vrev64q_u32(vreinterpretq_u32_f64(eq)));\n                                                                                   ^\n</code></pre>\n\n<p>After some digging, I found out that:</p>\n\n<ol>\n<li>vreinterpretq_u32_f64 is indeed not defined within Eigen and that</li>\n<li>Eigen has only the standard library as dependency</li>\n</ol>\n\n<p>So where exactly does this function supposed to come from? (I do have the standard library included explicitly android-ndk-r17c/sources/cxx-stl/llvm-libc++) am I missing some includes?\nAnyone can help me shed some lights on this?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["php", "mysql", "c", "esp8266", "nodemcu"], "owner": {"reputation": 11, "user_id": 12205203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8a09140c3a21dc65ab73981f044c6e2?s=128&d=identicon&r=PG&f=1", "display_name": "Adib", "link": "https://stackoverflow.com/users/12205203/adib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1169, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1572776823, "creation_date": 1571213602, "question_id": 58408671, "link": "https://stackoverflow.com/questions/58408671/sending-nodemcu-esp8266s-sensor-data-to-mysql-using-xampp-and-phpmyadmin", "title": "Sending NodeMCU ESP8266&#39;s sensor data to MySQL using XAMPP and phpmyadmin", "body": "<p>I want to send my sensor data to my database.\nI have a problem that my database does not fetch the data from my sensor.\nI'm using the Nodemcu ESP8266 microcontroller and DHT11 sensor.\nI do not get any error. So, I didn't know why it's not working.\nCould you help me check my coding and why the sensor data not being inserted in XAMPP database? </p>\n\n<p>dht11.ino</p>\n\n<pre><code>#include &lt;ESP8266WiFi.h&gt;\n#include &lt;WiFiClient.h&gt; \n#include &lt;ESP8266WebServer.h&gt;\n#include &lt;ESP8266HTTPClient.h&gt;\n#include \"DHT.h\"\n\n#define DHTPIN D2\n#define DHTTYPE DHT11\n\nDHT dht (DHTPIN, DHTTYPE);\n\nconst char* ssid = \"ice-cream\";                  // Your wifi Name       \nconst char* password = \"15479313249\";          // Your wifi Password\n\nconst char *host = \"192.168.0.0\"; \n\nvoid setup() {\n\n  delay(1000);\n  pinMode(BUILTIN_LED, OUTPUT);\n  digitalWrite(BUILTIN_LED, HIGH);      // Initialize the Led_OnBoard pin as an output\n  Serial.begin(115200);\n  WiFi.mode(WIFI_OFF);        //Prevents reconnection issue (taking too long to connect)\n  delay(1000);\n  WiFi.mode(WIFI_STA);        //This line hides the viewing of ESP as wifi hotspot\n\n  WiFi.begin(ssid, password);     //Connect to your WiFi router\n  Serial.println(\"\");\n\n  Serial.print(\"Connecting\");\n  // Wait for connection\n  while (WiFi.status() != WL_CONNECTED) {\n    digitalWrite(BUILTIN_LED, LOW);\n    delay(250);\n    Serial.print(\".\");\n    digitalWrite(BUILTIN_LED, HIGH); \n    delay(250);\n  }\n\n  digitalWrite(BUILTIN_LED, HIGH);\n  //If connection successful show IP address in serial monitor\n  Serial.println(\"\");\n  Serial.println(\"Connected to Network/SSID\");\n  Serial.print(\"IP address: \");\n  Serial.println(WiFi.localIP());  //IP address assigned to your ESP\n}\n\nvoid loop() {\n\n  HTTPClient http;    //Declare object of class HTTPClient\n\n   float h = dht.readHumidity();\n   float t = dht.readTemperature();\n\n  String humid, temp;\n  humid = String (h);\n  temp = String (t);\n\n  http.begin(\"http://localhost/Nodemcu_db_record_view/InsertDB.php\");      \n\n  int httpCode_1 = http.POST(humid);\n  int httpCode_2 = http.POST(temp);\n  String payload = http.getString();    //Get the response payload\n\n  Serial.println(httpCode_1);\n  Serial.println(httpCode_2);\n  Serial.println(payload);    //Print request response payload\n\n  Serial.println(\"Humidity=\" + humid);\n  Serial.println(\"temperature=\" + temp);\n\n  http.end();  //Close connection\n\n  delay(4000);  \n  digitalWrite(BUILTIN_LED, LOW);\n  delay(6000);\n  digitalWrite(BUILTIN_LED, HIGH);\n}\n</code></pre>\n\n<p>InsertDB.php</p>\n\n<pre><code>&lt;?php\n    //Connect to database\n    $servername = \"localhost\";      \n    $username = \"root\";     \n    $password = \"\"; \n\n    // Create connection\n    $conn = mysqli_connect($hostname, $username, $password)or die(\"Could not connect\");\n    $db = mysqli_select_db( $conn,\"temphumidnew\")or die(\"Could not select database\");\n    // Check connection\n    if (mysqli_connect_errno())\n    {\n        echo \"Failed to connect to MySQL: \" . mysqli_connect_error();\n    }\n\n    //Get current date and time\n    date_default_timezone_set('Asia/Malaysia');\n    $date= date(\"Y-m-d\");\n    $time = date(\"H:i:s\");\n\n    $humid = $_POST['humid'];\n        $temp = $_POST['temp'];\n    $sql = \"INSERT INTO dht11 (humidity, temperature, time, date) VALUES ('$humid', '$temp', '$time', '$date')\"; //nodemcu_ldr_table = Youre_table_name\n        $result = mysqli_query( $conn,$sql) or die(\"Query failed\");\n\n         if ($result)\n         echo \" OK\";        \n\n        else\n         echo \"Problem occured !\";\n\n    mysqli_close($conn);\n?&gt;\n</code></pre>\n"}, {"tags": ["c", "loops", "series"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 4, "creation_date": 1571213663, "post_id": 58408643, "comment_id": 103161176, "body": "<code>(1 &#47; i)</code> takes place in integer arithmetic. You want 1.0 / i."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 1, "creation_date": 1571213664, "post_id": 58408643, "comment_id": 103161178, "body": "Welcome to SO. You are doing integer division here: <code>c=c+(1&#47;i);</code> For any value of <code>i</code> except <code>1</code> this will become <code>c+0</code>. Use <code>1.0&#47;i</code> instead."}, {"owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "edited": false, "score": 1, "creation_date": 1571213926, "post_id": 58408643, "comment_id": 103161325, "body": "You may want to use <code>double</code> rather than <code>float</code>, it tends to have better range and precision."}, {"owner": {"reputation": 127, "user_id": 12225107, "user_type": "registered", "profile_image": "https://graph.facebook.com/2411173469105624/picture?type=large", "display_name": "Chinmay Vemuri", "link": "https://stackoverflow.com/users/12225107/chinmay-vemuri"}, "edited": false, "score": 0, "creation_date": 1571303158, "post_id": 58408643, "comment_id": 103198613, "body": "Ok. I guess I need to revise data types first. BTW thanks for the suggestion, I changed every variable to float and I am getting the desired result."}], "answers": [{"tags": [], "owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "is_accepted": true, "score": 14, "last_activity_date": 1571213733, "creation_date": 1571213733, "answer_id": 58408697, "question_id": 58408643, "link": "https://stackoverflow.com/questions/58408643/series-1-1-3-1-5-upto-n-terms/58408697#58408697", "title": "Series: 1 + 1/3 + 1/5 +...upto N terms", "body": "<p>The problem in your code lies on this line:</p>\n\n<pre><code>c = c + (1/i);\n</code></pre>\n\n<p>Here, the operation performed inside the parentheses is <strong><em>integer</em></strong> division! So, when <code>i</code> has any value greater than <code>1</code>, the result will be zero. This zero is then converted to a float value.</p>\n\n<p>To force the compiler to use <strong><em>floating point</em></strong> division, use this:</p>\n\n<pre><code>c = c + (1.0/i);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "is_accepted": false, "score": 3, "last_activity_date": 1590274438, "last_edit_date": 1590274438, "creation_date": 1571215861, "answer_id": 58409350, "question_id": 58408643, "link": "https://stackoverflow.com/questions/58408643/series-1-1-3-1-5-upto-n-terms/58409350#58409350", "title": "Series: 1 + 1/3 + 1/5 +...upto N terms", "body": "<p>I agree with Adrian's answer.</p>\n\n<p>Another issue is because of the way floating point numbers are represented in a system when they are added in arbitrary order, precision can be lost.</p>\n\n<p>To have maximum precision, floating point numbers should be added from smallest first to largest last. </p>\n"}], "owner": {"reputation": 127, "user_id": 12225107, "user_type": "registered", "profile_image": "https://graph.facebook.com/2411173469105624/picture?type=large", "display_name": "Chinmay Vemuri", "link": "https://stackoverflow.com/users/12225107/chinmay-vemuri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 302, "favorite_count": 0, "accepted_answer_id": 58408697, "answer_count": 2, "score": 7, "last_activity_date": 1590274438, "creation_date": 1571213523, "last_edit_date": 1571217472, "question_id": 58408643, "link": "https://stackoverflow.com/questions/58408643/series-1-1-3-1-5-upto-n-terms", "title": "Series: 1 + 1/3 + 1/5 +...upto N terms", "body": "<p>I was recently asked this question in a programming test. I can't seem to understand why I am getting the answer '1'. I am a beginner in the <code>C</code> programming language.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\n    float c = 0;\n    int n, i = 1;\n    printf(\"Enter the number here: \");\n    n = getchar();\n    while (i &lt;= 2*n - 1)\n    {\n        c = c + (1/i);\n        i = i + 2;\n    }\n    printf(\"%f\", c);\n}\n</code></pre>\n\n<p>I have already tried using a <code>for</code> loop, but the answer remains the same. Any help would be appreciated!</p>\n"}, {"tags": ["c++", "c", "microcontroller", "gpio", "texas-instruments"], "comments": [{"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 0, "creation_date": 1571214198, "post_id": 58408466, "comment_id": 103161471, "body": "So your question is if <code>P2DIR|=0x08; P2OUT|=0x08;</code> is correct/sufficient to set pin P2.3? Did you measure the voltage directly at the GPIO pin? What hardware do you have between the GPIO pin and the Bluetooth module? Please <a href=\"https://stackoverflow.com/posts/58408466/edit\">edit</a> your question and add all relevant information there."}, {"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 0, "creation_date": 1571232484, "post_id": 58408466, "comment_id": 103171801, "body": "Are you sure your program jumps over the <code>while(1);</code>? You can move the instructions for P23 up to the beginning of <code>main()</code>."}], "owner": {"reputation": 1, "user_id": 12149105, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/def44a7677f53ac60f68181d3dfbdce4?s=128&d=identicon&r=PG&f=1", "display_name": "Ghanni", "link": "https://stackoverflow.com/users/12149105/ghanni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571215240, "creation_date": 1571212841, "last_edit_date": 1571215240, "question_id": 58408466, "link": "https://stackoverflow.com/questions/58408466/msp430f2418-unable-to-set-p2-3-pin-to-high", "title": "MSP430F2418: Unable to set P2.3 pin to high", "body": "<p>I am using MSO430F2418 for my project.  I am sending  Hello world message to Bluetooth module via UART pins. Also I need to set pin P2.3 to high to reset the Bluetooth. Unfortunately Im unable to set that perticuler pin to high. When I check the voltage at Reset pin  of Bluetooth it is low.</p>\n\n<p>You can see below two lines in my code. I have used these statements to set the P2.3. </p>\n\n<pre><code>P2DIR|=0x08;\nP2OUT|=0x08;\n</code></pre>\n\n<p>I have attached an image. There you can see the hardware. <a href=\"https://i.stack.imgur.com/eM0MA.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;msp430.h&gt;               \n\n\nconst char string[] = { \"Hello World\\r\\n\" };\nunsigned int i;\n\nint main(void){\n  WDTCTL = WDTPW + WDTHOLD;                 // Stop WDT\n\n  if (CALBC1_1MHZ==0xFF)                    // If calibration constant erased\n  {\n    while(1);                               // do not load, trap CPU!!\n  }\n\n  DCOCTL = 0;                               // Select lowest DCOx and MODx settings\n  BCSCTL1 = CALBC1_1MHZ;                    // Set DCO\n  DCOCTL = CALDCO_1MHZ;\n   P2DIR|=0x08;\n   P2OUT|=0x08;\n  P3SEL = 0x30;                             // P3.4,5 = USCI_A0 TXD/RXD\n  UCA0CTL1 |= UCSSEL_3;                     // SMCLK\n  UCA0BR0 = 8;                              // 1MHz 115200\n  UCA0BR1 = 0;                              // 1MHz 115200\n  UCA0MCTL = UCBRS2 + UCBRS1;               // Modulation UCBRSx = 5\n  UCA0CTL1 &amp;= ~UCSWRST;                     // **Initialize USCI state machine**\n // IE2 |= UCA0RXIE;                          // Enable USCI_A0 RX interrupt\n  IE2 |= UCA0TXIE;\n  __bis_SR_register(LPM0_bits + GIE);       // Enter LPM0, interrupts enabled\n}\n\n#pragma vector=USCIAB0TX_VECTOR\n__interrupt void USCI0TX_ISR(void)\n\n{\n        UCA0TXBUF = string[i++]; // TX next character\n       if (i == sizeof string - 1){ // TX over?\n        IE2 &amp;= ~UCA0TXIE; // Disable USCI_A0 TX interrupt\n       _delay_cycles(1000000);\n        i = 0;\n        IE2 |= UCA0TXIE; // Enable USCI_A0 TX interrupt\n       }\n }\n</code></pre>\n"}, {"tags": ["c", "lex", "lexical-analysis"], "answers": [{"comments": [{"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1571273608, "post_id": 58421716, "comment_id": 103189020, "body": "You probably also want a <code>.|\\n   ;</code> rule to ignore other characters rather than echoing them..."}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": false, "score": 0, "last_activity_date": 1582242080, "last_edit_date": 1582242080, "creation_date": 1571260030, "answer_id": 58421716, "question_id": 58408369, "link": "https://stackoverflow.com/questions/58408369/difference-between-writing-statements-in-definitions-and-in-rules-parts-in-lex/58421716#58421716", "title": "Difference between writing statements in definitions and in rules parts in lex", "body": "<p>Yes, order matters. But it's not the <code>#include</code> lines which are the issue here.</p>\n\n<p>Here's one correct way to write this program:</p>\n\n<pre><code>%option main\n/* The %{ and %} delimiters must be at the beginning of the line.\n   Lines between %{ and %} are copied verbatim into the generated\n   file, near to the beginning.\n*/\n%{ \n  #include &lt;stdio.h&gt; \n  #include &lt;string.h&gt;\n%} \n%%\n  /* These lines must be indented. Indented lines after the %% and\n   * before the first rule are inserted verbatim into the generated\n   * lexer right at the beginning of the definition of the function\n   * yylex. This lets you declare local variables, like nwords.\n   */\n  int nwords = 0;\n([a-zA-Z0-9])+    { ++nwords; }\n  /* Other rules go here. Every possible input should be matched by\n   * some rule.\n   */\n\n  /* At a minimum, you can ignore all unmatched characters\n   * using the following fall back (which should be the last rule).\n   */\n.|\\n              ;\n\n&lt;&lt;EOF&gt;&gt;           { printf(\"%d words found.\\n\", nwords);\n                    return 0; /* Let the caller know we're done */\n                  }\n</code></pre>\n\n<p>The <code>&lt;&lt;EOF&gt;&gt;</code> rule is needed here to print out the number of words, because <code>nwords</code> will not be available outside of <code>yylex</code>. An alternative is to make <code>nwords</code> a global variable, but global variables are usually considered a bad idea. (And anyway you are using <code>%option main</code>, which means that you're not going to write the <code>main()</code> function so there is no other logical place to report the word count.</p>\n\n<p>If you wanted to make <code>nwords</code> global, you would declare <code>nwords</code> in the <code>%{...%}</code> block, so that it is declared outside of any function.</p>\n\n<p>Flex lets you leave out <code>%{</code> and <code>%}</code> as long as the code to be inserted is indented. But that's quite fragile and will confuse many people reading your code; it's definitely recommended that you use the delimiters, and then you don't have to worry about whether the inserted code is indented or not.</p>\n"}], "owner": {"reputation": 109, "user_id": 12222101, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TGnJY.jpg?s=128&g=1", "display_name": "BoraKurucu", "link": "https://stackoverflow.com/users/12222101/borakurucu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1582242080, "creation_date": 1571212422, "last_edit_date": 1571305201, "question_id": 58408369, "link": "https://stackoverflow.com/questions/58408369/difference-between-writing-statements-in-definitions-and-in-rules-parts-in-lex", "title": "Difference between writing statements in definitions and in rules parts in lex", "body": "<p>I am new to lex. Assume the aim is to write a lex program to count the number of words. We should declare a int variable counter and increment it every time a words is seen. The question is what is the difference between these code samples:</p>\n\n<pre><code>%option main\n%{ \n#include&lt;stdio.h&gt; \n#include&lt;string.h&gt; \n             int i = 0;\n%} \n\n%%\n([a-zA-Z0-9])+    {i++;}\n%%\n</code></pre>\n\n<p>and</p>\n\n<pre><code>%option main\n%{ \n#include&lt;stdio.h&gt; \n#include&lt;string.h&gt; \n%} \n%%\n             int i = 0;\n([a-zA-Z0-9])+    {i++;}\n%%\n</code></pre>\n\n<p>and</p>\n\n<pre><code>%option main\n#include&lt;stdio.h&gt; \n#include&lt;string.h&gt; \n            int i = 0;\n%%\n([a-zA-Z0-9])+    {i++;}\n%%\n</code></pre>\n\n<p>Do the places of <code>#include&lt;stdio.h&gt; #include&lt;string.h&gt;</code> affect the code here?\nDoes the program change depending on the place we declare integer the variable <code>i</code>?</p>\n"}, {"tags": ["c", "embedded", "microcontroller", "stm32", "stm32f4"], "comments": [{"owner": {"reputation": 2568, "user_id": 8548828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C4qkl.png?s=128&g=1", "display_name": "Tarick Welling", "link": "https://stackoverflow.com/users/8548828/tarick-welling"}, "edited": false, "score": 0, "creation_date": 1571211145, "post_id": 58407974, "comment_id": 103159920, "body": "what libraries are you using? <code>SR</code> and <code>DR</code> are not from the HAL."}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 11858777, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Q8f9GDSSIA0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcw4ubmTvBX2yWm2dhCkxSyj77hEg/photo.jpg?sz=128", "display_name": "g.mezzina23", "link": "https://stackoverflow.com/users/11858777/g-mezzina23"}, "edited": false, "score": 0, "creation_date": 1571211725, "post_id": 58408079, "comment_id": 103160209, "body": "Ok sure, but in order to check that bit, he should set <code>RXNEIE=1</code> in the USART_CR1 register, but he didn&#39;t. I&#39;m right?"}, {"owner": {"reputation": 3435, "user_id": 2699113, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/94940a425c39618d108ce74cde4d3931?s=128&d=identicon&r=PG&f=1", "display_name": "user2699113", "link": "https://stackoverflow.com/users/2699113/user2699113"}, "reply_to_user": {"reputation": 75, "user_id": 11858777, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Q8f9GDSSIA0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcw4ubmTvBX2yWm2dhCkxSyj77hEg/photo.jpg?sz=128", "display_name": "g.mezzina23", "link": "https://stackoverflow.com/users/11858777/g-mezzina23"}, "edited": false, "score": 1, "creation_date": 1571211847, "post_id": 58408079, "comment_id": 103160265, "body": "No, RXNEIE should be set for generation of interrupt. But he doesn&#39;t use interrupts. He usess polling method."}], "tags": [], "owner": {"reputation": 3435, "user_id": 2699113, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/94940a425c39618d108ce74cde4d3931?s=128&d=identicon&r=PG&f=1", "display_name": "user2699113", "link": "https://stackoverflow.com/users/2699113/user2699113"}, "is_accepted": false, "score": 2, "last_activity_date": 1571211213, "creation_date": 1571211213, "answer_id": 58408079, "question_id": 58407974, "link": "https://stackoverflow.com/questions/58407974/usart-stm32f4xx-how-to-wait-until-character-arrives-on-status-register-usa/58408079#58408079", "title": "[USART - STM32F4xx]: How to wait until character arrives on Status Register (USART_SR)?", "body": "<p>He checks 0x20 because it is the RXNE (RX not empty) bit in Status Register.\nHe checks the bit5(RXNE) - not the value 0x20.</p>\n"}, {"comments": [{"owner": {"reputation": 75, "user_id": 11858777, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Q8f9GDSSIA0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcw4ubmTvBX2yWm2dhCkxSyj77hEg/photo.jpg?sz=128", "display_name": "g.mezzina23", "link": "https://stackoverflow.com/users/11858777/g-mezzina23"}, "edited": false, "score": 0, "creation_date": 1571211702, "post_id": 58408098, "comment_id": 103160196, "body": "Ok sure, but in order to check that bit, he should set <code>RXNEIE=1</code> in the USART_CR1 register, but he didn&#39;t. I&#39;m right?"}, {"owner": {"reputation": 75, "user_id": 11858777, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Q8f9GDSSIA0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcw4ubmTvBX2yWm2dhCkxSyj77hEg/photo.jpg?sz=128", "display_name": "g.mezzina23", "link": "https://stackoverflow.com/users/11858777/g-mezzina23"}, "edited": false, "score": 0, "creation_date": 1571212872, "post_id": 58408098, "comment_id": 103160769, "body": "No, I Think the user26etc. in the 2nd answer read the situation well: &quot;RXNEIE should be set for generation of interrupt. But he doesn&#39;t use interrupts. He usess polling method.&quot;"}], "tags": [], "owner": {"reputation": 1417, "user_id": 716682, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/13cdb854a6ee1add60c3c754e3e056a3?s=128&d=identicon&r=PG", "display_name": "Pibben", "link": "https://stackoverflow.com/users/716682/pibben"}, "is_accepted": true, "score": 2, "last_activity_date": 1571211267, "creation_date": 1571211267, "answer_id": 58408098, "question_id": 58407974, "link": "https://stackoverflow.com/questions/58407974/usart-stm32f4xx-how-to-wait-until-character-arrives-on-status-register-usa/58408098#58408098", "title": "[USART - STM32F4xx]: How to wait until character arrives on Status Register (USART_SR)?", "body": "<p>In the <code>while</code> loop you are waiting for the \"Read data register not empty\" bit to be set. This is bit number 5 and <code>1 &lt;&lt; 5</code> is equal to <code>0x0020</code>. You could equally have written:</p>\n\n<pre><code> while(!(USART2-&gt;SR &amp; (1 &lt;&lt; 5)) {}\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 11858777, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Q8f9GDSSIA0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcw4ubmTvBX2yWm2dhCkxSyj77hEg/photo.jpg?sz=128", "display_name": "g.mezzina23", "link": "https://stackoverflow.com/users/11858777/g-mezzina23"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 58408098, "answer_count": 2, "score": 1, "last_activity_date": 1571212008, "creation_date": 1571210887, "last_edit_date": 1571212008, "question_id": 58407974, "link": "https://stackoverflow.com/questions/58407974/usart-stm32f4xx-how-to-wait-until-character-arrives-on-status-register-usa", "title": "[USART - STM32F4xx]: How to wait until character arrives on Status Register (USART_SR)?", "body": "<p>I'm trying to realize a USART2_RX on a <a href=\"https://www.st.com/en/microcontrollers-microprocessors/stm32f411ve.html\" rel=\"nofollow noreferrer\">STM32F411VET</a>.</p>\n\n<p>During a video tutorial, I saw that the teacher use these statements to read data in data register:</p>\n\n<pre><code>char USART2_read(void){\n  while(!(USART2-&gt;SR &amp; 0x0020)) {}\n  return USART2-&gt;DR;\n}\n</code></pre>\n\n<p>Specifically, he uses </p>\n\n<pre><code>while(!(USART2-&gt;SR &amp; 0x0020)){}\n</code></pre>\n\n<p>to wait a char. But observing the <a href=\"https://www.st.com/content/ccc/resource/technical/document/reference_manual/9b/53/39/1c/f7/01/4a/79/DM00119316.pdf/files/DM00119316.pdf/jcr:content/translations/en.DM00119316.pdf\" rel=\"nofollow noreferrer\">Reference Manual</a>, it seems that the status register (USART_SR) is 0x0C0... in its reset form, so...</p>\n\n<p>Why we check that value (i.e., 0x0020)?</p>\n"}, {"tags": ["c", "clang", "compiler-optimization", "strict-aliasing", "restrict-qualifier"], "comments": [{"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 3, "creation_date": 1571214033, "post_id": 58407841, "comment_id": 103161387, "body": "<code>const</code> doesn&#39;t mean the value can&#39;t change; it means the value can&#39;t be changed using the <code>const</code> identifier. <code>int foo; int *a = &amp;foo; int const *b = &amp;foo; *a = 42 &#47;*ok*&#47;; *b = -1 &#47;*nope*&#47;;</code>"}, {"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "reply_to_user": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1571214918, "post_id": 58407841, "comment_id": 103161886, "body": "@pmg I meant that it cannot be changed by the <code>const event_t *</code> pointer. I&#39;ll add this clarification"}, {"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "reply_to_user": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1571991393, "post_id": 58407841, "comment_id": 103428947, "body": "@StaceyGirl Why did you remove your answer?"}, {"owner": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "edited": false, "score": 0, "creation_date": 1572025233, "post_id": 58407841, "comment_id": 103445267, "body": "@AlexLop. It wasn&#39;t the register pressure. This is visible from assembly for other architectures. I think you should examine the IR to figure out what is going on since it has explicit aliasing annotations (<code>!tbaa X</code>). I checked it and saw that Clang does event copying without TBAA annotation which can explain the value flush, but at the same time I saw different compiler configurations generate might <code>llvm.memcpy</code> calls WITH <code>!tbaa</code> metadata. I might try to check this later, can&#39;t write an answer from that."}, {"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "reply_to_user": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "edited": false, "score": 0, "creation_date": 1572032099, "post_id": 58407841, "comment_id": 103447994, "body": "@StaceyGirl Thanks! I appreciate it. Will wait for your input. Also note that it is possible to reproduce similar behavior on x86 architecture and it looks weird... <a href=\"https://godbolt.org/z/5OVBEy\" rel=\"nofollow noreferrer\">godbolt.org/z/5OVBEy</a>"}], "answers": [{"comments": [{"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 0, "creation_date": 1571211572, "post_id": 58408128, "comment_id": 103160144, "body": "&quot;That being said, the definition of quueue_is_full is visible and available to the compiler so it can ascertain it indeed does not.&quot; - not only that it is <i>just</i> visible, clang also inlines its content."}, {"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 0, "creation_date": 1571211875, "post_id": 58408128, "comment_id": 103160277, "body": "4 out of 25 assembly instructions are unneeded, also ldr/str instruction can take ~3 cycles on arm cortex-m3, compared to regular mov/add/and which take 1 cycle. Taking into consideration that <code>-O2</code> is provided, I wouldn&#39;t call it just &quot;missed opportunity&quot;"}], "tags": [], "owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "is_accepted": false, "score": 1, "last_activity_date": 1571211803, "last_edit_date": 1571211803, "creation_date": 1571211412, "answer_id": 58408128, "question_id": 58407841, "link": "https://stackoverflow.com/questions/58407841/does-clang-misunderstand-the-const-pointer-specifier/58408128#58408128", "title": "Does Clang misunderstand the &#39;const&#39; pointer specifier?", "body": "<p>As far as I can tell, yes, in your code <code>queue_ptr</code> pointee's contents cannot be modified. Is is it an optimization bug? It's a missed optimization opportunity, but I wouldn't call it a bug. It doesn't \"misunderstand\" const, it just doesn't have/doesn't do the necessary analyses to determine it cannot be modified for this specific scenario.</p>\n\n<p>As a side note: <code>queue_is_full(queue_ptr)</code> can modify the contents of <code>*queue_ptr</code> even if it has <code>const queue_t *const</code> param because it can legally cast away the constness since the original object is not const. That being said, the definition of <code>quueue_is_full</code> is visible and available to the compiler so it can ascertain it indeed does not.</p>\n"}, {"comments": [{"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 0, "creation_date": 1571216402, "post_id": 58409454, "comment_id": 103162746, "body": "But even if they point to the same location, the only action here is copy dword by dword, so how does it &quot;confuse&quot; the compiler?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 0, "creation_date": 1571216931, "post_id": 58409454, "comment_id": 103163005, "body": "@AlexLop. Because you can&#39;t usually copy an object to the address where it is already stored, or copy objects that overlap."}, {"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 0, "creation_date": 1571218036, "post_id": 58409454, "comment_id": 103163601, "body": "ok, I can understand that but I still don&#39;t get how it may impact the fields of completely different struct like <code>queue_t</code>? Why re-reading those fields?"}, {"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 0, "creation_date": 1571219522, "post_id": 58409454, "comment_id": 103164439, "body": "&quot;Const qualifiers don&#39;t really matter, because these were added by the function and the original type could be modifiable elsewhere.&quot; - This is true for many other cases even when a function gets a single pointer. But still the produced assembly doesn&#39;t always read, modify and immediately write back the value to the memory (unless it is <code>volatile</code>)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 0, "creation_date": 1571222134, "post_id": 58409454, "comment_id": 103165771, "body": "@AlexLop. The <code>*const</code> qualifier is coding style for the programmer, not to compiler. The compiler should be able to deduct if a pointer variable is modified or not inside the function, regardless of qualifiers."}, {"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 0, "creation_date": 1571222514, "post_id": 58409454, "comment_id": 103165964, "body": "I meant <code>const event_t *</code>, not <code>const *</code>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 0, "creation_date": 1571222894, "post_id": 58409454, "comment_id": 103166162, "body": "@AlexLop. At the line <code>queue_ptr-&gt;queue[queue_ptr-&gt;wr_idx++] = *event_ptr;</code> the compiler can&#39;t know if <code>queue_ptr-&gt;queue</code> is the same address as <code>event_ptr</code>. The const qualifiers are irrelevant."}, {"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 0, "creation_date": 1571223162, "post_id": 58409454, "comment_id": 103166313, "body": "And you want to say that this causes the compiler to reread everything after that point? Even it is irrelevant to <code>queue_ptr-&gt;queue</code> and <code>event_ptr</code>, like it is kind of a barrier?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 0, "creation_date": 1571223732, "post_id": 58409454, "comment_id": 103166649, "body": "@AlexLop. Since the compiler can&#39;t assume that it didn&#39;t change the original data, it has to re-read it. I can&#39;t reproduce your specific system but on x86 clang the <code>restict</code> made the difference that all variables could be kept in registers during the loop."}, {"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 0, "creation_date": 1571225068, "post_id": 58409454, "comment_id": 103167335, "body": "Right, I know that <code>restrict</code> fixes it. However, in what scenario assigning <code>event_t</code> to <code>queue_ptr-&gt;queue[...]</code> could affect the original values? In case <code>queue_ptr-&gt;queue</code> points to some location inside <code>*queue_ptr</code>? If yes, the <i>clang</i> is too protective because the same code without <code>restrict</code> compiled with <i>gcc</i> doesn&#39;t perform the re-reads..."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 0, "creation_date": 1571225431, "post_id": 58409454, "comment_id": 103167564, "body": "@AlexLop. It can&#39;t assume that writing to <code>queue_ptr-&gt;queue</code> won&#39;t change the contents of <code>event_ptr</code>. But yeah well it does seem like clang assumes that other unrelated members in the queue struct could be changed too because of writes to <code>queue_ptr-&gt;queue</code>. That seems a bit strange indeed."}, {"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 0, "creation_date": 1571226138, "post_id": 58409454, "comment_id": 103167945, "body": "Ohhh, now I see what you meant... I was talking about the fields of <code>queue_t</code> because they were re-read after the assignment. I agree that the compiler may assume that the content of <code>*event_ptr</code> could be changed but it rereads the fields of <code>*queue_ptr</code>, that&#39;s why I was confused..."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 2, "last_activity_date": 1571216135, "creation_date": 1571216135, "answer_id": 58409454, "question_id": 58407841, "link": "https://stackoverflow.com/questions/58407841/does-clang-misunderstand-the-const-pointer-specifier/58409454#58409454", "title": "Does Clang misunderstand the &#39;const&#39; pointer specifier?", "body": "<p>The <code>event_t</code> member of <code>queue_ptr</code> could point at the same memory as <code>event_ptr</code>. Compilers tend to produce less efficient code when they can't rule out that two pointers point at the same memory. So there's nothing strange with <code>restrict</code> leading to better code. </p>\n\n<p>Const qualifiers don't really matter, because these were added by the function and the original type could be modifiable elsewhere. In particular, the <code>* const</code> doesn't add anything because the pointer is already a local copy of the original pointer, so nobody including the caller cares if the function modifies that local copy or not.</p>\n\n<p>\"Strict aliasing\" rather refers to the cases where the compiler can cut corners like when assuming that a <code>uint16_t*</code> can't point at a <code>uint8_t*</code> etc. But in your case you have two completely compatible types, one of them is merely wrapped in an outer struct.</p>\n"}, {"comments": [{"owner": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "edited": false, "score": 0, "creation_date": 1571957406, "post_id": 58550055, "comment_id": 103420974, "body": "But <code>event_t</code> is not a member of <code>queue_t</code> (in the original example)."}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "reply_to_user": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "edited": false, "score": 0, "creation_date": 1571959354, "post_id": 58550055, "comment_id": 103421403, "body": "@StaceyGirl - true, but there are other reasons that cause this. I don&#39;t want to &quot;lawyer&quot; this, so I attached the list to the answer... One might argue that the <code>event_t</code> type is compatible enough to be considered for type punning (the <code>uint32_t</code> is padded, leaving the first two members aligned)... Others might note that any <code>char</code> pointer (or <code>uint8_t *</code>) is always considered a possible memory alias (in our case, <code>queue_ptr-&gt;wr_idx</code> points to an <code>unsigned char</code>, raising an &quot;aliasing&quot; flag)... who knows. I&#39;m not really getting into &quot;why they might alias&quot; as much as into the effects."}, {"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 0, "creation_date": 1571991317, "post_id": 58550055, "comment_id": 103428918, "body": "I don&#39;t think this is the case here... for example take a look at this reproduction of the issue with various cases: <a href=\"https://godbolt.org/z/5OVBEy\" rel=\"nofollow noreferrer\">godbolt.org/z/5OVBEy</a> - <code>f5</code> has no re-read while <code>f6</code> does"}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "reply_to_user": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 0, "creation_date": 1572050226, "post_id": 58550055, "comment_id": 103452407, "body": "@AlexLop. the examples you provided might not be relevant because the <code>char *</code> in <code>f5</code> isn&#39;t mutated (only the <code>int * </code> is mutated and it doesn&#39;t suffer from potential aliasing), while <code>f6</code> has an obvious strict aliasing concern."}], "tags": [], "owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "is_accepted": false, "score": 1, "last_activity_date": 1571959631, "last_edit_date": 1571959631, "creation_date": 1571956996, "answer_id": 58550055, "question_id": 58407841, "link": "https://stackoverflow.com/questions/58407841/does-clang-misunderstand-the-const-pointer-specifier/58550055#58550055", "title": "Does Clang misunderstand the &#39;const&#39; pointer specifier?", "body": "<p>As you know, your code appears to modify the data, invalidating the <code>const</code> state:</p>\n\n<pre><code>queue_ptr-&gt;num_of_items++; // this stores data in the memory\n</code></pre>\n\n<p>Without the <code>restrict</code> keyword, the compiler <strong>must</strong> assume that the two types might share the same memory space.</p>\n\n<p>This is required in the updated example because <code>event_t</code> is a member of <code>queue_t</code> and strict aliasing applies on:</p>\n\n<blockquote>\n  <p>... an aggregate or union type that includes one of the aforementioned types among its members (including, recursively, a member of a subaggregate or contained union), or...</p>\n</blockquote>\n\n<p>On the original example there are a number of reasons the types might be considered to alias, leading to the same result (i.e., the use of a <code>char</code> pointer and the fact that types might be considered compatible \"enough\" on some architectures if not all).</p>\n\n<p>Hence, the compiler is <em>required</em> to reload the memory after it was mutated to avoid possible conflicts.</p>\n\n<p>The <code>const</code> keyword doesn't really enter into this, because a mutation happens through a pointer that might point to the same memory address.</p>\n\n<p>(<strong>EDIT</strong>) For your convenience, here's the full rule regarding access to a variable:</p>\n\n<blockquote>\n  <p>An object shall have its stored value accessed only by an lvalue expression that has one of the following types (88):</p>\n  \n  <p>\u2014 a type compatible with the effective type of the object,</p>\n  \n  <p>\u2014 a qualified version of a type compatible with the effective type of the object,</p>\n  \n  <p>\u2014 a type that is the signed or unsigned type corresponding to the effective type of the object,</p>\n  \n  <p>\u2014 a type that is the signed or unsigned type corresponding to a qualified version of the effective type of the object,</p>\n  \n  <p>\u2014 an aggregate or union type that includes one of the aforementioned types among its members (including, recursively, a member of a subaggregate or contained union), or</p>\n  \n  <p>\u2014 a character type.</p>\n  \n  <p>(88) The intent of this list is to specify those circumstances in which an object may or may not be aliased.</p>\n</blockquote>\n\n<h3>P.S.</h3>\n\n<p>The <code>_t</code> suffix is <strong>reserved by POSIX</strong>. You might consider using a different suffix.</p>\n\n<p>It's common practice to use <code>_s</code> for structs and <code>_u</code> for unions.</p>\n"}, {"comments": [{"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 0, "creation_date": 1572124117, "post_id": 58574261, "comment_id": 103465552, "body": "Thanks! This looks much more satisfying answer that everything that was posted here previously. So why not always use <code>-Xclang -new-struct-path-tbaa</code> option? What are the advantages/disadvantages of it (or perhaps it should be a separate question here...)?"}, {"owner": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "reply_to_user": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 0, "creation_date": 1572337407, "post_id": 58574261, "comment_id": 103518507, "body": "@AlexLop. Don&#39;t forget to accept the answer if it answers the question (I think it does). Otherwise with lower number of upvotes on answers the bounty will expire and won&#39;t be granted to anyone."}, {"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "reply_to_user": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "edited": false, "score": 0, "creation_date": 1572339174, "post_id": 58574261, "comment_id": 103519193, "body": "@StaceyGirl Thanks Stacy, I agree this answers my question... not fully thought. I still don&#39;t see what I can learn from this for my programming/optimisations skills so that I could implement the most optimised code for infrastructure layers. Unless it is indeed can be categorised as a compiler &quot;issue&quot; which will be fixed in future releases and not related to my coding habits."}, {"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 0, "creation_date": 1572339695, "post_id": 58574261, "comment_id": 103519407, "body": "@chill could you please refer (or just mention) in your answer the following topics, so I could mark your answer as &quot;accepted&quot; : 1. How to prevent such re-reads in the future 2. What could be the downside of the flag you used to eliminate those re-reads."}, {"owner": {"reputation": 15557, "user_id": 390807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f64fce01ffa86130c3fae06b1fcadef?s=128&d=identicon&r=PG", "display_name": "chill", "link": "https://stackoverflow.com/users/390807/chill"}, "reply_to_user": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 0, "creation_date": 1572340809, "post_id": 58574261, "comment_id": 103519960, "body": "@AlexLop. I&#39;m afraid there&#39;s no general lesson to be learned in this case. In principle, the more information one is able to give the compiler - the better: things like <code>restrict</code>, strong typing (not gratuitous casts, type punning, etc), relevant function and variable attributes ... but not in this case, the original program already contained all the necessary information. It is just a compiler deficiency and the best way to tackle those is to raise awareness: ask on the mailing list and/or file bug reports."}, {"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 0, "creation_date": 1572341160, "post_id": 58574261, "comment_id": 103520140, "body": "Thanks @chill. Just add what you wrote in the latest comment to the answer itself. I&#39;ll accept it and switch to the email thread for more details."}, {"owner": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "reply_to_user": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 0, "creation_date": 1572341935, "post_id": 58574261, "comment_id": 103520539, "body": "@AlexLop. I think there is something to learn here: load early and store later. You should prefer loading all required member fields at the start and store them at the end. In you case you should have load <code>wr_ptr</code>, <code>num_of_items</code> in the beginning, modify them, them store them in the end. Compiler has much more guarantees about local variables (unless their address is taken). This is something that helps even when compiler would have to reload values."}, {"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "reply_to_user": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "edited": false, "score": 0, "creation_date": 1572343459, "post_id": 58574261, "comment_id": 103521401, "body": "@StaceyGirl right but that would look like an assembly C. <code>local_a = global_b; local_a++; global_b = local_a</code> instead of just <code>global_b++;</code>..."}], "tags": [], "owner": {"reputation": 15557, "user_id": 390807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f64fce01ffa86130c3fae06b1fcadef?s=128&d=identicon&r=PG", "display_name": "chill", "link": "https://stackoverflow.com/users/390807/chill"}, "is_accepted": true, "score": 2, "last_activity_date": 1572341271, "last_edit_date": 1572341271, "creation_date": 1572120007, "answer_id": 58574261, "question_id": 58407841, "link": "https://stackoverflow.com/questions/58407841/does-clang-misunderstand-the-const-pointer-specifier/58574261#58574261", "title": "Does Clang misunderstand the &#39;const&#39; pointer specifier?", "body": "<p>[talking about the original program]</p>\n\n<p>This is caused by deficiency in the TBAA metadata, generated by Clang.</p>\n\n<p>If you emit LLVM IR with <code>-S -emit-llvm</code> you'll see (snipped for brevity):</p>\n\n<pre><code>...\n\n  %9 = load i8, i8* %wr_idx, align 1, !tbaa !12\n  %10 = trunc i32 %8 to i8\n  %11 = add i8 %10, -1\n  %conv4 = and i8 %11, %9\n  store i8 %conv4, i8* %wr_idx, align 1, !tbaa !12\n  br label %return\n\n...\n\n!0 = !{i32 1, !\"wchar_size\", i32 4}\n!1 = !{i32 1, !\"min_enum_size\", i32 4}\n!2 = !{!\"clang version 10.0.0 (/home/chill/src/llvm-project 07da145039e1a6a688fb2ac2035b7c062cc9d47d)\"}\n!3 = !{!4, !9, i64 8}\n!4 = !{!\"queue\", !5, i64 0, !8, i64 4, !9, i64 8, !6, i64 10, !6, i64 11}\n!5 = !{!\"any pointer\", !6, i64 0}\n!6 = !{!\"omnipotent char\", !7, i64 0}\n!7 = !{!\"Simple C/C++ TBAA\"}\n!8 = !{!\"int\", !6, i64 0}\n!9 = !{!\"short\", !6, i64 0}\n!10 = !{!4, !8, i64 4}\n!11 = !{!4, !5, i64 0}\n!12 = !{!4, !6, i64 11}\n\n</code></pre>\n\n<p>See the TBAA metadata <code>!4</code>: this is the type descriptor for <code>queue_t</code> (btw, I added names to structs, e.g. <code>typedef struct queue ...</code>) you may see empty string there). Each element in the description corresponds to struct fields and look at <code>!5</code>, which is the <code>event_t *queue</code> field: it's \"any pointer\"! At this point we've lost all the information about the actual type of the pointer, which tells me the compiler would assume writes through this pointer can modify any memory object.</p>\n\n<p>That said, there's a new form for TBAA metadata, which is more precise (still has deficiencies, but for that later ...)</p>\n\n<p>Compile the original program with <code>-Xclang -new-struct-path-tbaa</code>. My exact command line was (and I've included <code>stddef.h</code> instead of <code>stdlib.h</code> since that development build with no libc):</p>\n\n<pre><code>./bin/clang -I lib/clang/10.0.0/include/ -target armv7m-eabi -O2 -Xclang -new-struct-path-tbaa  -S queue.c\n</code></pre>\n\n<p>The resulting assembly is (again, some fluff snipped):</p>\n\n<pre><code>queue_enqueue:\n    push    {r4, r5, r6, r7, lr}\n    add r7, sp, #12\n    str r11, [sp, #-4]!\n    ldrh    r3, [r0, #8]\n    ldr.w   r12, [r0, #4]\n    cmp r12, r3\n    bne .LBB0_2\n    movs    r0, #1\n    ldr r11, [sp], #4\n    pop {r4, r5, r6, r7, pc}\n.LBB0_2:\n    ldrb    r2, [r0, #11]                   ; load `wr_idx`\n    ldr.w   lr, [r0]                        ; load `queue` member\n    ldrd    r6, r1, [r1]                    ; load data pointed to by `event_ptr`\n    add.w   r5, lr, r2, lsl #3              ; compute address to store the event\n    str r1, [r5, #4]                        ; store `param`\n    adds    r1, r3, #1                      ; increment `num_of_items`\n    adds    r4, r2, #1                      ; increment `wr_idx`\n    str.w   r6, [lr, r2, lsl #3]            ; store `event_type`\n    strh    r1, [r0, #8]                    ; store new value for `num_of_items`\n    sub.w   r1, r12, #1                     ; compute size mask\n    ands    r1, r4                          ; bitwise and size mask with `wr_idx`\n    strb    r1, [r0, #11]                   ; store new value for `wr_idx`\n    movs    r0, #0\n    ldr r11, [sp], #4\n    pop {r4, r5, r6, r7, pc}\n</code></pre>\n\n<p>Looks good, isn't it! :D</p>\n\n<p>I mentioned earlier there are deficiencies with the \"new struct path\", but for that: on the mailing list.</p>\n\n<p>PS. I'm afraid there's no general lesson to be learned in this case. In principle, the more information one is able to give the compiler - the better: things like <code>restrict</code>, strong typing (not gratuitous casts, type punning, etc), relevant function and variable attributes ... but not in this case, the original program already contained all the necessary information. It is just a compiler deficiency and the best way to tackle those is to raise awareness: ask on the mailing list and/or file bug reports.</p>\n"}], "owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 423, "favorite_count": 0, "accepted_answer_id": 58574261, "answer_count": 4, "score": 1, "last_activity_date": 1572341271, "creation_date": 1571210449, "last_edit_date": 1572339350, "question_id": 58407841, "link": "https://stackoverflow.com/questions/58407841/does-clang-misunderstand-the-const-pointer-specifier", "title": "Does Clang misunderstand the &#39;const&#39; pointer specifier?", "body": "<p>In the code below I saw that clang fails to perform better optimisation without implicit <code>restrict</code> pointer specifier:</p>\n\n<pre><code>#include &lt;stdint.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdbool.h&gt;\n\ntypedef struct {\n    uint32_t        event_type;\n    uintptr_t       param;\n} event_t;\n\ntypedef struct\n{\n    event_t                     *queue;\n    size_t                      size;\n    uint16_t                    num_of_items;\n    uint8_t                     rd_idx;\n    uint8_t                     wr_idx;\n} queue_t;\n\nstatic bool queue_is_full(const queue_t *const queue_ptr)\n{\n    return queue_ptr-&gt;num_of_items == queue_ptr-&gt;size;\n}\n\nstatic size_t queue_get_size_mask(const queue_t *const queue_ptr)\n{\n    return queue_ptr-&gt;size - 1;\n}\n\nint queue_enqueue(queue_t *const queue_ptr, const event_t *const event_ptr)\n{\n    if(queue_is_full(queue_ptr))\n    {\n        return 1;\n    }\n\n    queue_ptr-&gt;queue[queue_ptr-&gt;wr_idx++] = *event_ptr;\n    queue_ptr-&gt;num_of_items++;\n    queue_ptr-&gt;wr_idx &amp;= queue_get_size_mask(queue_ptr);\n\n    return 0;\n}\n</code></pre>\n\n<p>I compiled this code with clang version <em>11.0.0 (clang-1100.0.32.5)</em></p>\n\n<pre><code>clang -O2 -arch armv7m -S test.c -o test.s\n</code></pre>\n\n<p>In the disassembled file I saw that the generated code re-reads the memory:</p>\n\n<pre><code>_queue_enqueue:\n        .cfi_startproc\n@ %bb.0:\n        ldrh    r2, [r0, #8]            ---&gt; reads the queue_ptr-&gt;num_of_items\n        ldr     r3, [r0, #4]            ---&gt; reads the queue_ptr-&gt;size\n        cmp     r3, r2\n        itt     eq\n        moveq   r0, #1\n        bxeq    lr\n        ldrb    r2, [r0, #11]           ---&gt; reads the queue_ptr-&gt;wr_idx\n        adds    r3, r2, #1\n        strb    r3, [r0, #11]           ---&gt; stores the queue_ptr-&gt;wr_idx + 1\n        ldr.w   r12, [r1]\n        ldr     r3, [r0]\n        ldr     r1, [r1, #4]\n        str.w   r12, [r3, r2, lsl #3]\n        add.w   r2, r3, r2, lsl #3\n        str     r1, [r2, #4]\n        ldrh    r1, [r0, #8]            ---&gt; !!! re-reads the queue_ptr-&gt;num_of_items\n        adds    r1, #1\n        strh    r1, [r0, #8]\n        ldrb    r1, [r0, #4]            ---&gt; !!! re-reads the queue_ptr-&gt;size (only the first byte)\n        ldrb    r2, [r0, #11]           ---&gt; !!! re-reads the queue_ptr-&gt;wr_idx\n        subs    r1, #1\n        ands    r1, r2\n        strb    r1, [r0, #11]           ---&gt; !!! stores the updated queue_ptr-&gt;wr_idx once again after applying the mask\n        movs    r0, #0\n        bx      lr\n        .cfi_endproc\n                                        @ -- End function\n</code></pre>\n\n<p>After adding the <code>restrict</code> keyword to the pointers, these unneeded re-reads just vanished:</p>\n\n<pre><code>int queue_enqueue(queue_t * restrict const queue_ptr, const event_t * restrict const event_ptr)\n</code></pre>\n\n<p>I know that in <em>clang</em>, by default <strong>strict aliasing is disabled</strong>. But in this case, <code>event_ptr</code> pointer is defined as <code>const</code> so its object's content cannot be modified by this pointer, thus it cannot affect the content to which <code>queue_ptr</code> points (assuming the case when the objects overlap in the memory), right?</p>\n\n<p>So is this a compiler optimisation bug or there is indeed some weird case when the object pointed by <code>queue_ptr</code> can be affected by <code>event_ptr</code> assuming this declaration:</p>\n\n<pre><code>int queue_enqueue(queue_t *const queue_ptr, const event_t *const event_ptr)\n</code></pre>\n\n<p>By the way, I tried to compile the same code for x86 target and inspected similar optimisation issue.</p>\n\n<hr>\n\n<p>The generated assembly <strong>with</strong> the <code>restrict</code> keyword, doesn't contain the re-reads:</p>\n\n<pre><code>_queue_enqueue:\n        .cfi_startproc\n@ %bb.0:\n        ldr     r3, [r0, #4]\n        ldrh    r2, [r0, #8]\n        cmp     r3, r2\n        itt     eq\n        moveq   r0, #1\n        bxeq    lr\n        push    {r4, r6, r7, lr}\n        .cfi_def_cfa_offset 16\n        .cfi_offset lr, -4\n        .cfi_offset r7, -8\n        .cfi_offset r6, -12\n        .cfi_offset r4, -16\n        add     r7, sp, #8\n        .cfi_def_cfa r7, 8\n        ldr.w   r12, [r1]\n        ldr.w   lr, [r1, #4]\n        ldrb    r1, [r0, #11]\n        ldr     r4, [r0]\n        subs    r3, #1\n        str.w   r12, [r4, r1, lsl #3]\n        add.w   r4, r4, r1, lsl #3\n        adds    r1, #1\n        ands    r1, r3\n        str.w   lr, [r4, #4]\n        strb    r1, [r0, #11]\n        adds    r1, r2, #1\n        strh    r1, [r0, #8]\n        movs    r0, #0\n        pop     {r4, r6, r7, pc}\n        .cfi_endproc\n                                        @ -- End function\n</code></pre>\n\n<hr>\n\n<p><strong>Addition:</strong></p>\n\n<p>After some discussion with Lundin in the comments to his <a href=\"https://stackoverflow.com/a/58409454/5218277\">answer</a>, I got the impression that the re-reads could be caused because the compiler would assume that <code>queue_ptr-&gt;queue</code> might potentially point to <code>*queue_ptr</code> itself. So I changed the <code>queue_t</code> struct to contain array instead of the pointer:</p>\n\n<pre><code>typedef struct\n{\n    event_t                     queue[256]; // changed from pointer to array with max size\n    size_t                      size;\n    uint16_t                    num_of_items;\n    uint8_t                     rd_idx;\n    uint8_t                     wr_idx;\n} queue_t;\n</code></pre>\n\n<p>However the re-reads remained as previously. I still can't understand what could make the compiler think that <code>queue_t</code> fields may be modified and thus require re-reads... The following declaration eliminates the re-reads:</p>\n\n<pre><code>int queue_enqueue(queue_t * restrict const queue_ptr, const event_t *const event_ptr)\n</code></pre>\n\n<p>But why <code>queue_ptr</code> has to be declared as <code>restrict</code> pointer to prevent the re-reads I don't understand (unless it is a compiler optimization \"bug\").</p>\n\n<p><strong>P.S.</strong></p>\n\n<p>I also couldn't find any link to file/report an issue on <em>clang</em> that doesn't cause the compiler to crash...</p>\n"}, {"tags": ["c", "sockets", "dns"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1571210205, "post_id": 58407714, "comment_id": 103159481, "body": "What is the other end doing? Are you sure it&#39;s sending a response? Is the request you send correct for what you&#39;re doing?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1571210287, "post_id": 58407714, "comment_id": 103159533, "body": "And why are you connecting to an UDP service? UDP is an <i>unconnected</i> protocol. For UDP you usually bind the local socket to a local address, and then use <code>sendto</code> and <code>recvfrom</code> to send and receive packets."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1571212216, "post_id": 58407714, "comment_id": 103160454, "body": "@Someprogrammerdude You can use <code>connect()</code> with a UDP socket; it sets the default address used when sending data via <code>write()</code>, <code>send()</code>, etc. syscalls that don&#39;t explicitly include an address. It also restricts the socket to only receiving datagrams from that address."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1571212236, "post_id": 58407714, "comment_id": 103160462, "body": "@Someprogrammerdude Re &quot;<i>And why are you connecting to an UDP service? UDP is an unconnected protocol.</i>&quot;, Nonetheless, <code>connect</code> has well-defined semantics for datagram protocols like UDP. It sets the default address for sending (allowing <code>send</code> to be used), and it limits from which address packets will be received."}, {"owner": {"reputation": 210, "user_id": 5838128, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh4.googleusercontent.com/-6cZHlgIgP0E/AAAAAAAAAAI/AAAAAAAAAEE/51L3zXf4Vro/photo.jpg?sz=128", "display_name": "Reshad", "link": "https://stackoverflow.com/users/5838128/reshad"}, "edited": false, "score": 0, "creation_date": 1571213929, "post_id": 58407714, "comment_id": 103161328, "body": "I am using UDP because the socket is connected to a DNS server"}, {"owner": {"reputation": 2798, "user_id": 4478544, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uPFEK.png?s=128&g=1", "display_name": "Zaboj Campula", "link": "https://stackoverflow.com/users/4478544/zaboj-campula"}, "edited": false, "score": 1, "creation_date": 1571214702, "post_id": 58407714, "comment_id": 103161761, "body": "What is content of the <code>buf</code>? Perhaps DNS server does not respond because the DNS query is not valid."}, {"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1571242324, "post_id": 58407714, "comment_id": 103177850, "body": "@Someprogrammerdude &quot;And why are you connecting to an UDP service?&quot; Because DNS is a protocol running on both (either of) UDP and TCP."}, {"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 1, "creation_date": 1571242376, "post_id": 58407714, "comment_id": 103177869, "body": "What happens if you try the same query from same host with another tool/client like <code>dig</code>? In your case, do you see the reply coming if you look at the network level (with <code>wireshark</code> or <code>tcpdump</code>)? You need to show the content of your &quot;buf&quot;, how do you generate it? Did you read RFC 1034 and 1035 multiple times to clearly understand how DNS packets are formed? For local developments you should install a local recursive DNS server open only to your host and debug your program towards it, it would be far simpler to look at what is happening on both ends that way."}], "answers": [{"tags": [], "owner": {"reputation": 210, "user_id": 5838128, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh4.googleusercontent.com/-6cZHlgIgP0E/AAAAAAAAAAI/AAAAAAAAAEE/51L3zXf4Vro/photo.jpg?sz=128", "display_name": "Reshad", "link": "https://stackoverflow.com/users/5838128/reshad"}, "is_accepted": true, "score": 0, "last_activity_date": 1571289333, "creation_date": 1571289333, "answer_id": 58425325, "question_id": 58407714, "link": "https://stackoverflow.com/questions/58407714/recv-function-gets-stuck-even-if-send-is-successfull/58425325#58425325", "title": "recv function gets stuck even if send is successfull", "body": "<p>I have solved the problem. the problem was in my dns header structure. I declared it like this</p>\n\n<pre><code>struct DNS_HEADER\n{\n    unsigned short id;\n\n    unsigned char qr :1;\n    unsigned char opcode :4;\n    unsigned char aa :1;\n    unsigned char tc: 1;\n    unsigned char rd: 1;\n    unsigned char ra: 1;\n    unsigned char z :3;\n    unsigned char rcode :4;\n\n    unsigned short qdcount;\n\n    unsigned short ancount;\n\n    unsigned short nscount;\n\n    unsigned short arcount;\n\n};\n</code></pre>\n\n<p>the problem here is that.the flag byets does not get converted in network byte order. when I rearranged the structure variables it workd.</p>\n\n<pre><code>struct DNS_HEADER\n{\n    unsigned short id; // identification number\n\n    unsigned char rd :1; // recursion desired\n    unsigned char tc :1; // truncated message\n    unsigned char aa :1; // authoritive answer\n    unsigned char opcode :4; // purpose of message\n    unsigned char qr :1; // query/response flag\n\n    unsigned char rcode :4; // response code\n    unsigned char cd :1; // checking disabled\n    unsigned char ad :1; // authenticated data\n    unsigned char z :1; // its z! reserved\n    unsigned char ra :1; // recursion available\n\n    unsigned short qdcount; // number of question entries\n    unsigned short ancount; // number of answer entries\n    unsigned short nscount; // number of authority entries\n    unsigned short arcount; // number of resource entries\n};\n</code></pre>\n"}], "owner": {"reputation": 210, "user_id": 5838128, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh4.googleusercontent.com/-6cZHlgIgP0E/AAAAAAAAAAI/AAAAAAAAAEE/51L3zXf4Vro/photo.jpg?sz=128", "display_name": "Reshad", "link": "https://stackoverflow.com/users/5838128/reshad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 58425325, "answer_count": 1, "score": 0, "last_activity_date": 1571289333, "creation_date": 1571210024, "question_id": 58407714, "link": "https://stackoverflow.com/questions/58407714/recv-function-gets-stuck-even-if-send-is-successfull", "title": "recv function gets stuck even if send is successfull", "body": "<p>I am trying to send dns query to a dns server.\neven though my send function is working but the recv function does not return any this.\nit does not give any error either.\nit gets stuck after the \"Receiving answer....\" line</p>\n\n<p>struct sockaddr_in dest;</p>\n\n<pre><code>dest.sin_family = AF_INET;\ndest.sin_port = htons(53);\ndest.sin_addr.s_addr = inet_addr(\"208.67.222.222\"); //dns servers\n\nint s;\ns = socket(AF_INET , SOCK_DGRAM , IPPROTO_UDP);\n\n\nint query_size=sizeof(struct DNS_HEADER) + (strlen((const char*)domain)+1) + 4;\nprintf(\"\\n\\nquery size - %d\",query_size);\n\nint cs=connect(s,(struct sockaddr*)&amp;dest,sizeof(dest));\nif(cs==0)\n{\n    printf(\"\\n\\nconnect success\\n\\n\");\n}\nprintf(\"\\nSending Packet...\");\nif( send(s,(char*)buf,query_size,0) &lt; 0)\n{\n    perror(\"sendto failed\");\n}\nprintf(\"Done\");\n\n//Receive the answer\ni = sizeof(struct sockaddr_in);\nprintf(\"\\nReceiving answer...\");\n\nif(recv(s,(char*)buf , 65536,0) &lt; 0)\n{\n    perror(\"recvfrom failed\");\n}\nprintf(\"Done\");\n</code></pre>\n"}, {"tags": ["c", "linux", "mount"], "comments": [{"owner": {"reputation": 1281, "user_id": 1356096, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YTexs.png?s=128&g=1", "display_name": "YesThatIsMyName", "link": "https://stackoverflow.com/users/1356096/yesthatismyname"}, "edited": false, "score": 2, "creation_date": 1571209754, "post_id": 58407406, "comment_id": 103159243, "body": "Check this out: <a href=\"https://stackoverflow.com/questions/3992171/how-do-i-programmatically-get-the-free-disk-space-for-a-directory-in-linux\" title=\"how do i programmatically get the free disk space for a directory in linux\">stackoverflow.com/questions/3992171/&hellip;</a>"}, {"owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1571209775, "post_id": 58407406, "comment_id": 103159253, "body": "You could inspect the original code: <a href=\"https://github.com/coreutils/coreutils/blob/master/src/df.c\" rel=\"nofollow noreferrer\">df.c</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2505, "user_id": 3118401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c066b73af214d8e7cf6b52f6ef75314a?s=128&d=identicon&r=PG", "display_name": "marcolz", "link": "https://stackoverflow.com/users/3118401/marcolz"}, "is_accepted": false, "score": 1, "last_activity_date": 1571209811, "creation_date": 1571209811, "answer_id": 58407647, "question_id": 58407406, "link": "https://stackoverflow.com/questions/58407406/c-linux-check-free-space-in-mount/58407647#58407647", "title": "C Linux Check free space in mount", "body": "<p>Have you checked the <a href=\"https://github.com/coreutils/coreutils/blob/master/src/df.c\" rel=\"nofollow noreferrer\">source of df from Coreutils</a>?</p>\n\n<p>It uses <code>statvfs()</code> from <a href=\"https://pubs.opengroup.org/onlinepubs/009695399/basedefs/sys/statvfs.h.html\" rel=\"nofollow noreferrer\"><code>sys/statvfs.h</code></a> on Linux as well as on other POSIX-like systems.</p>\n"}, {"tags": [], "owner": {"reputation": 1281, "user_id": 1356096, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YTexs.png?s=128&g=1", "display_name": "YesThatIsMyName", "link": "https://stackoverflow.com/users/1356096/yesthatismyname"}, "is_accepted": true, "score": 4, "last_activity_date": 1571210852, "last_edit_date": 1571210852, "creation_date": 1571209844, "answer_id": 58407659, "question_id": 58407406, "link": "https://stackoverflow.com/questions/58407406/c-linux-check-free-space-in-mount/58407659#58407659", "title": "C Linux Check free space in mount", "body": "<p>From <a href=\"https://www.systutorials.com/136585/how-to-get-available-filesystem-space-on-linux-a-c-function-and-a-cpp-example/\" rel=\"nofollow noreferrer\">here</a>:</p>\n\n<p>Use the <code>statvfs</code> API:</p>\n\n<pre><code>// header for statvfs\n#include &lt;sys/statvfs.h&gt;\n</code></pre>\n\n<p>and the prototype of the <code>statvfs</code> is</p>\n\n<pre><code>int statvfs(const char *path, struct statvfs *buf);\n</code></pre>\n\n<p>The results will be filled to the buf <code>statvfs</code> struct:</p>\n\n<pre><code>struct statvfs {\n    unsigned long  f_bsize;    /* filesystem block size */\n    unsigned long  f_frsize;   /* fragment size */\n    fsblkcnt_t     f_blocks;   /* size of fs in f_frsize units */\n    fsblkcnt_t     f_bfree;    /* # free blocks */\n    fsblkcnt_t     f_bavail;   /* # free blocks for unprivileged users */\n    fsfilcnt_t     f_files;    /* # inodes */\n    fsfilcnt_t     f_ffree;    /* # free inodes */\n    fsfilcnt_t     f_favail;   /* # free inodes for unprivileged users */\n    unsigned long  f_fsid;     /* filesystem ID */\n    unsigned long  f_flag;     /* mount flags */\n    unsigned long  f_namemax;  /* maximum filename length */\n};\n</code></pre>\n\n<p>The return type is:</p>\n\n<blockquote>\n  <p>On success, zero is returned.  On error, -1 is returned, and errno is\n  set appropriately.</p>\n</blockquote>\n\n<p>Also have a look at the <a href=\"http://man7.org/linux/man-pages/man3/statvfs.3.html\" rel=\"nofollow noreferrer\">man3</a> manpage of the <code>statvfs</code> command for more and detailed information.</p>\n"}], "owner": {"reputation": 141, "user_id": 12101637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45fcced12cca6cfdcdd11b93c1211eb6?s=128&d=identicon&r=PG&f=1", "display_name": "joif doi", "link": "https://stackoverflow.com/users/12101637/joif-doi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 58407659, "answer_count": 2, "score": 1, "last_activity_date": 1571210852, "creation_date": 1571208923, "last_edit_date": 1571209473, "question_id": 58407406, "link": "https://stackoverflow.com/questions/58407406/c-linux-check-free-space-in-mount", "title": "C Linux Check free space in mount", "body": "<p>When I running <code>df -h</code> I can see that in <code>/dev</code> I use 6M and the size is 40M , and Available size is 34M .</p>\n\n<p>How can I get this information with c code?</p>\n"}, {"tags": ["c", "unix", "pipe"], "comments": [{"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 0, "creation_date": 1571214502, "post_id": 58406943, "comment_id": 103161649, "body": "This looks very similar to question <a href=\"https://stackoverflow.com/questions/58374595\">stackoverflow.com/questions/58374595</a> you asked yesterday."}, {"owner": {"reputation": 35, "user_id": 8810757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1342aef556159f1881712457fa8207e9?s=128&d=identicon&r=PG&f=1", "display_name": "Karan Bijani", "link": "https://stackoverflow.com/users/8810757/karan-bijani"}, "reply_to_user": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 0, "creation_date": 1571220918, "post_id": 58406943, "comment_id": 103165194, "body": "@Bodo Yesterday I couldn&#39;t get the 2-level pipe to work, now I got it working and my code is quite different because of the loop. Now I need to get it working for more levels."}, {"owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "edited": false, "score": 0, "creation_date": 1571395084, "post_id": 58406943, "comment_id": 103236073, "body": "You don&#39;t have <i>to take the output of the first two commands and then reroute it to be the input of the third command</i> - you just have <i>to take the output of the</i> second."}], "answers": [{"tags": [], "owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "is_accepted": true, "score": 0, "last_activity_date": 1571410058, "last_edit_date": 1571410058, "creation_date": 1571408838, "answer_id": 58452865, "question_id": 58406943, "link": "https://stackoverflow.com/questions/58406943/multi-level-pipes-in-c/58452865#58452865", "title": "Multi-level pipes in C", "body": "<p>You see, treating the first and second command in different <code>if</code>/<code>else</code> blocks is not generalizable to more than two commands. Feasible is to treat the pipe commands and operations identically as far as possible and only add special conditions for the first and last:</p>\n\n<pre><code>    int i, in, out = dup(1);    // save standard output descriptor\n    for (i = 0; i &lt; x; i++)\n    {\n        int ps[2];\n        if (i &lt; x-1) pipe(ps);  // if not last in line, make a pipe\n        pid_t pid = fork();\n        if (pid == 0)\n        {\n            // if not first in line, connect standard input to pipe\n            if (i) dup2(in, 0), close(in);\n            // if not last in line, connect standard output to pipe\n            if (i &lt; x-1) dup2(ps[1], 1), close(ps[1]);\n            // if last in line, restore standard output to original\n            else dup2(out, 1), close(out);\n            char* strings[MAX_SEGMENT_LENGTH];\n            int y = 0;\n            int* numStrings = &amp;y;\n            tokenize(strings, segments[i], numStrings, \" \");\n            execvp(strings[0], strings);\n            exit(1);\n        }\n        if (i) close(in);\n        close(ps[1]);\n        in = ps[0]; // the current pipe's read end is the new input\n    }\n    close(out);\n    do ; while (wait(0) &gt; 0);\n\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 8810757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1342aef556159f1881712457fa8207e9?s=128&d=identicon&r=PG&f=1", "display_name": "Karan Bijani", "link": "https://stackoverflow.com/users/8810757/karan-bijani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 474, "favorite_count": 0, "accepted_answer_id": 58452865, "answer_count": 1, "score": 1, "last_activity_date": 1571410058, "creation_date": 1571207077, "question_id": 58406943, "link": "https://stackoverflow.com/questions/58406943/multi-level-pipes-in-c", "title": "Multi-level pipes in C", "body": "<p>I have to create a multi-level pipe in C that interprets Linux commands just like the Unix console. The code I have works for a 2-level pipe but I have to implement more (up to 16). The main problem here is I'm not sure how to take the output of the first two commands and then reroute it to be the input of the third command (etc. for the other levels). I know I need to use \"1\" of the first pipe and \"0\" of the second pipe since those are stdout and stdin respectively but I am unsure how to implement this in practice.</p>\n\n<pre><code>// tokenize is a separate function that uses strtok repeatedly on cmdline, setting the array \n// segments to the strings separated by | and numTokens to the number of commands\nchar* segments[MAX_PIPE_SEGMENTS];\nint x = 0;\nint* numTokens = &amp;x;\ntokenize(segments, cmdline, numTokens, \"|\");\n\n// the code for one command\nif (*numTokens == 1) {\n    pid_t pid = fork();\n    if (pid == 0) {\n        char* strings[MAX_SEGMENT_LENGTH];\n        int y = 0;\n        int* numStrings = &amp;y;\n        tokenize(strings, segments[0], numStrings, \" \");\n        execvp(strings[0], strings);\n    } else {\n        wait(0);\n        return;\n    }\n}\n\npid_t pid = fork();\nif (pid == 0) {\n    int i = 0;\n    for (i = 0; i &lt; *numTokens-1; i++) {\n        pid_t pid2 = fork();\n        if (pid2 == 0) {\n            int ps[2];\n            pipe(ps);\n            pid_t pid3 = fork();\n            if (pid3 == 0) {\n                close(1);\n                dup2(ps[1], 1);\n                close(ps[0]);\n                char* strings[MAX_SEGMENT_LENGTH];\n                int y = 0;\n                int* numStrings = &amp;y;\n                tokenize(strings, segments[i], numStrings, \" \");\n                execvp(strings[0], strings);\n            } else {\n                close(0);\n                dup2(ps[0], 0);\n                close(ps[1]);\n                wait(0);\n                char* strings[MAX_SEGMENT_LENGTH];\n                int y = 0;\n                int* numStrings = &amp;y;\n                tokenize(strings, segments[i+1], numStrings, \" \");\n                execvp(strings[0], strings);\n            }\n        } else {\n            wait(0);\n        }\n    }\n} else {\n    wait(0);\n    return;\n}\n</code></pre>\n"}, {"tags": ["c", "file", "io"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1571207952, "post_id": 58406820, "comment_id": 103158361, "body": "Please indent your code. You also need to check if <code>fopen </code>fails and act accordingly."}, {"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 1, "creation_date": 1571208007, "post_id": 58406820, "comment_id": 103158384, "body": "Do you want to have something like a 3 line ring buffer, i.e. always overwrite the oldest line? You should add an explanation to your table of numbers. I guess the numbers represent some input lines and the columns show the desired file contents after entering a new input line, right? There seems to be one column missing between <code>4 2 3</code> and <code>4 5 6</code>. Do the input lines have a fixed length? If not you cannot simply overwrite a single line in the file, you would have to rewrite the file at least starting from the new line. What should happen with existing file contents when the program starts?"}, {"owner": {"reputation": 67, "user_id": 8278425, "user_type": "registered", "profile_image": "https://graph.facebook.com/1133364903430703/picture?type=large", "display_name": "Miracle-", "link": "https://stackoverflow.com/users/8278425/miracle"}, "reply_to_user": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 0, "creation_date": 1571231925, "post_id": 58406820, "comment_id": 103171454, "body": "@Bodo. Sorry, just a typo in the example. Basically, I originally created a file. Then I take user input starting from 1, then 2, then 3, then 4 and so on... I want number 4 to replace the number 1, and as it keeps going on, the new user input will replace the oldest input."}, {"owner": {"reputation": 4566, "user_id": 453492, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7b45c33a5eda398febe496831ccaacb4?s=128&d=identicon&r=PG", "display_name": "Mario The Spoon", "link": "https://stackoverflow.com/users/453492/mario-the-spoon"}, "edited": false, "score": 0, "creation_date": 1571232540, "post_id": 58406820, "comment_id": 103171838, "body": "if the total filesize in reality is 300 bytes I would recommend reading writing the whole file since it is well below the block-size and it should not matter from performane reasons :-)"}, {"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 0, "creation_date": 1571234740, "post_id": 58406820, "comment_id": 103173296, "body": "@Miracle- Please <a href=\"https://stackoverflow.com/posts/58406820/edit\">edit</a> your question and add all information there instead of answering in comments. You did not answer all my questions. ._._._. I suggest to handle the ring buffer of input lines in memory, e.g. define an array of 3 pointers pointing to 3 <code>char</code> arrays to hold an input line each, put the input into the right input buffer and always overwrite the whole file with the contents of your in-memory data. Don&#39;t forget to <code>fflush</code> the file or switch off buffering before you start writing to the file. <code>ftruncate</code> the file after writing if the new output may be shorter than the old one"}], "owner": {"reputation": 67, "user_id": 8278425, "user_type": "registered", "profile_image": "https://graph.facebook.com/1133364903430703/picture?type=large", "display_name": "Miracle-", "link": "https://stackoverflow.com/users/8278425/miracle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571231815, "creation_date": 1571206477, "last_edit_date": 1571231815, "question_id": 58406820, "link": "https://stackoverflow.com/questions/58406820/how-to-keep-writing-to-the-file-and-updating-data-within-specfic-amounts-of-inpu", "title": "How to keep writing to the file and updating data within specfic amounts of input?", "body": "<p>So I want to keep updating my list within the most recent 3 inputs. I know if I use \"a+\", it will keep appending the input into the file and if I use \"w+\", it will overwrite it.</p>\n\n<p>I want to keep writing and updating with the most 3 recent inputs. For example:</p>\n\n<pre><code>1  1   1   4   4  7\n   2   2   2   5  5 \n       3   3   6  6\n</code></pre>\n\n<p>and so on...</p>\n\n<p>My attempt so far is only appending one after one. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main(){\n\nchar input[100];\nFILE * file;\n\nfor(int i =0; i &lt; 15; i++)\n {\n   printf(\"Enter your input: \");\n\n   file = fopen(\"myList.txt, \"a+\");\n   fgets(input, sizeof(input), stdin);\n   fputs(input, file);\n\n   fclose(file);\n\n }\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1571207136, "post_id": 58406785, "comment_id": 103158015, "body": "I discussed the underlying problem in a self-answered question <a href=\"https://stackoverflow.com/questions/33291624/why-do-arrays-in-c-decay-to-pointers\">here</a>."}], "answers": [{"comments": [{"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1571207028, "post_id": 58406825, "comment_id": 103157972, "body": "Which is why the declaration is exchangeable with <code>put_box(unsigned char space[][47][48])</code>, i.e. the first dimension can purely optionally be given but is entirely ignored.The code in the function does not know how many elements are following the first one."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 3, "last_activity_date": 1571206519, "creation_date": 1571206519, "answer_id": 58406825, "question_id": 58406785, "link": "https://stackoverflow.com/questions/58406785/3d-array-in-a-function/58406825#58406825", "title": "3D array in a function", "body": "<p>When you pass arrays to functions, they are passed as <em>pointers</em>. More specifically pointer to the arrays first element.</p>\n\n<p>So for the argument declaration <code>unsigned char space[241][47][48]</code> the compiler really sees it as <code>unsigned char (*space)[47][48]</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 6746, "user_id": 8185995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02d69271095c22ec7a2f5cad43ea3ac0?s=128&d=identicon&r=PG&f=1", "display_name": "robthebloke", "link": "https://stackoverflow.com/users/8185995/robthebloke"}, "is_accepted": false, "score": 2, "last_activity_date": 1571206594, "creation_date": 1571206594, "answer_id": 58406841, "question_id": 58406785, "link": "https://stackoverflow.com/questions/58406785/3d-array-in-a-function/58406841#58406841", "title": "3D array in a function", "body": "<p>Probably because the first array dimension is not part of the func prototype, so the debugger is likely to be looking at the first slice only. </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>void put_box(unsigned char space[][47][48], &lt;snip&gt; )\n</code></pre>\n\n<p>I'm guessing that if however you stick a breakpoint in this method, you'd see the full array (but you'll only see one slice when you step into put_box)</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int main()\n{\n  unsigned char space[99][47][48];\n  put_box(space, &lt;snip&gt;);\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12150051, "user_type": "registered", "profile_image": "https://graph.facebook.com/10221396501127527/picture?type=large", "display_name": "Mario Denkberg", "link": "https://stackoverflow.com/users/12150051/mario-denkberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1571210315, "creation_date": 1571206289, "last_edit_date": 1571210315, "question_id": 58406785, "link": "https://stackoverflow.com/questions/58406785/3d-array-in-a-function", "title": "3D array in a function", "body": "<p>I have a function in C that one of its arguments is 3D array.\nwhen I'm debugging its seems the VS see it as a 2D array, why is it?</p>\n\n<p>this is a program that helps to order goods in  containers (boxes).\nthis specific function is called when its known the this spot is ok to put' and it put it on the 3D matrix.the code:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>void put_box(unsigned char space[241][47][48], int x, int y, int  z, BOX box, int box_number) {\n    int i, j, k;\n    int top_stop;\n    //cheking if to mark all the hight\n    if (box.top)\n        top_stop = 48;\n    else\n        top_stop = box.height / 5;\n    // mark the box\n\n    for (i = x; i &lt; x + (box.length / 5); i++)\n        for (j = y; j &lt; y + (box.width / 5); j++)\n            for (k = z; k &lt; top_stop; k++)\n                space[i][j][k] = (unsigned char)box_number;\n\n}/*void put_box*/ \n</code></pre>\n\n<p>I expect to see on the locals window the 3D array but I see only 2.\nand its effect the writing to the matrix.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 3, "creation_date": 1571205043, "post_id": 58406493, "comment_id": 103157265, "body": "Which error do you get ? Please show a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "answers": [{"tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": false, "score": 5, "last_activity_date": 1571207952, "last_edit_date": 1571207952, "creation_date": 1571205459, "answer_id": 58406621, "question_id": 58406493, "link": "https://stackoverflow.com/questions/58406493/string-in-the-struct/58406621#58406621", "title": "String in the Struct", "body": "<p>Well, you can't.</p>\n\n<p>The general syntax</p>\n\n<pre><code> SomeArrayVariable = {1,2,3};\n</code></pre>\n\n<p>is valid only as initialization - not as assignment.</p>\n\n<p>Example:</p>\n\n<pre><code>int arr[3];\narr = {1, 2, 3}; // Error - invalid assignment\n\nint arr[3] = {1, 2, 3}; // Fine - valid initialization\n</code></pre>\n\n<p>Instead you can do:</p>\n\n<pre><code>VALUES.FirstValue[0] = 1;\nVALUES.FirstValue[1] = 2;\nVALUES.FirstValue[2] = 3;\n</code></pre>\n\n<p>or you can do like:</p>\n\n<pre><code>struct{\n  float FirstValue[TOTAL_NUMBER];\n  float LastValue[TOTAL_NUMBER];\n\n} VALUES = {{1, 2, 3}, {0, 0, 0}};\n</code></pre>\n\n<p>to make it an initialization.</p>\n\n<p>That said.. it's more common to make a typedef'ed struct and then make instances of that type where you need it. This will also allow you to use initialization. Like:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define TOTAL_NUMBER 3\n\ntypedef struct{\n  float FirstValue[TOTAL_NUMBER];\n  float LastValue[TOTAL_NUMBER];    \n} values_t;\n\nint main(void) {\n    values_t values = {{1,2,3}, {0, 0, 0}};\n    printf(\"%f\\n\", values.FirstValue[1]);\n    printf(\"%f\\n\", values.LastValue[1]);\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "is_accepted": true, "score": 1, "last_activity_date": 1571205659, "creation_date": 1571205659, "answer_id": 58406658, "question_id": 58406493, "link": "https://stackoverflow.com/questions/58406493/string-in-the-struct/58406658#58406658", "title": "String in the Struct", "body": "<p>You can't assign array as you do for normal variable.</p>\n\n<p>But you can use <code>memcpy</code> to copy the compound literals as below.</p>\n\n<pre><code>memcpy(VALUES.FirstValue, (float[]){1,2,3}, sizeof VALUES.FirstValue);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 535, "user_id": 10024802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/470ad9d816276f1dff22193ac0642b93?s=128&d=identicon&r=PG&f=1", "display_name": "CKocar", "link": "https://stackoverflow.com/users/10024802/ckocar"}, "edited": false, "score": 0, "creation_date": 1571209353, "post_id": 58407075, "comment_id": 103159045, "body": "@CKocar Works just fine. Added a complete code example."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": -1, "last_activity_date": 1571209337, "last_edit_date": 1571209337, "creation_date": 1571207635, "answer_id": 58407075, "question_id": 58406493, "link": "https://stackoverflow.com/questions/58406493/string-in-the-struct/58407075#58407075", "title": "String in the Struct", "body": "<p>You can overwrite previous struct values and set individual members by using <em>compound literals</em>:</p>\n\n<pre><code>typedef struct{\n  float FirstValue[3];\n  float LastValue[3];\n\n} VALUES;\n\nint main()\n{\n  VALUES v;\n  v = (VALUES) { .FirstValue = {1,2,3} };\n}\n</code></pre>\n\n<p>This is similar to <code>memset</code> all zeroes, followed by <code>memcpy</code>.</p>\n"}], "owner": {"reputation": 535, "user_id": 10024802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/470ad9d816276f1dff22193ac0642b93?s=128&d=identicon&r=PG&f=1", "display_name": "CKocar", "link": "https://stackoverflow.com/users/10024802/ckocar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 58406658, "answer_count": 3, "score": 1, "last_activity_date": 1571209337, "creation_date": 1571204849, "last_edit_date": 1571205887, "question_id": 58406493, "link": "https://stackoverflow.com/questions/58406493/string-in-the-struct", "title": "String in the Struct", "body": "<p>I have a problem and I couldn't find any solution about this. In the <code>example.h</code> I define the struct by this:</p>\n\n<pre><code>#define TOTAL_NUMBER 3\n\nstruct{\n  float FirstValue[TOTAL_NUMBER];\n  float LastValue[TOTAL_NUMBER];\n\n} VALUES;\n</code></pre>\n\n<p>And I want to use in the <em>example.c</em> like this. </p>\n\n<pre><code>VALUES.FirstValue={1,2,3} \n</code></pre>\n\n<p>But I have an error. How can I use like this in the <em>example.c</em> ?</p>\n\n<pre><code>VALUES.FirstValue={1,2,3} \n</code></pre>\n"}, {"tags": ["c", "taylor-series"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1571203367, "post_id": 58406123, "comment_id": 103156687, "body": "Note: <code>int factorial(int i)</code> likely only good to <code>i &lt;= 12</code> and <code>factorial(2*i)</code> only good to <code>i&lt;=6</code>.  Surely code loops too far."}, {"owner": {"reputation": 60686, "user_id": 277176, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2678da280c230bccef9781b8e5fbaf80?s=128&d=identicon&r=PG", "display_name": "Yakov Galka", "link": "https://stackoverflow.com/users/277176/yakov-galka"}, "edited": false, "score": 1, "creation_date": 1571203738, "post_id": 58406123, "comment_id": 103156803, "body": "There are a couple issues with this code; the series should start with i=0, and besides x=1 is a singularity of that function, which means that the series might have weird behavior with finite-precision arithmetic."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1571203739, "post_id": 58406123, "comment_id": 103156805, "body": "Re &quot;<i><code>int factorial(int i)</code> likely only good to <code>i &lt;= 12 </code></i>&quot;, If so, precalculating the values in an array would be smart."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "reply_to_user": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1571204153, "post_id": 58406123, "comment_id": 103156947, "body": "@ikegami: Preclaculating these values won&#39;t save you from numerical overflow. The usual approach is not to calculate each term of the series separately, but to calculate it from the previous term, so that he factorials and powers contribute only small factors. (But if you&#39;re ever going to use only the first 12 factorials, precalculating them might be a good idea.)"}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1571204249, "post_id": 58406123, "comment_id": 103156979, "body": "@M Oehm, The fact that the function shouldn&#39;t be used at all is not relevant to my comment. Maybe you meant to address the OP?"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "reply_to_user": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1571204605, "post_id": 58406123, "comment_id": 103157112, "body": "@ikegami: Maybe I didn&#39;t want to address you personally, but my comment was an addendum to your observation, because the overflow issue is there, smartly precalculated values or not."}], "answers": [{"tags": [], "owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "is_accepted": false, "score": 4, "last_activity_date": 1571215644, "last_edit_date": 1571215644, "creation_date": 1571213744, "answer_id": 58408701, "question_id": 58406123, "link": "https://stackoverflow.com/questions/58406123/why-using-the-taylor-series-formula-for-arcsin-converges-so-quickly-with-x-1/58408701#58408701", "title": "Why using the Taylor series formula for arcsin converges so quickly with x = 1", "body": "<p>The Taylor series for arscin is</p>\n\n<pre><code>arcsin(x) = sum n = 0; inf; (2*n)! / (4**n * (n!)**2 * (2*n + 1)) * x**(2*n + 1)\n</code></pre>\n\n<p>where <code>**</code> is the power operator and <code>!</code> denotes a factorial. As was already noted in comments, an <code>int</code> can represent factorials up to <code>12!</code> only; a 64-bit <code>long</code> can represent factorials up to <code>20!</code>. Since you use <code>(2*n)!</code>, these limits will be reached quickly.</p>\n\n<p>A better solution to this problem is not to calculate every term separately as given in the formula, but to evolve the term by calculating it from the previous term:</p>\n\n<pre><code>term(n + 1) = fact * term(n)\n</code></pre>\n\n<p>Since each term is one large factor, you can do that for each subfactor:</p>\n\n<pre><code>       2*(n + 1))!  =  (2*n)!         * (2*n + 1) * (2*n + 2)\n        4**(n + 1)  =  4**n           * 4\n     ((n + 1)!)**2  =  n!**2          * (n + 1)**2\n     2*(n + 1) + 1  =  2*(n + 1)      * (2*n + 3) / (2*n + 1)\nx**(2*(n + 1) + 1)  =  x**(2*n + 1)   * x**2\n</code></pre>\n\n<p>Putting all this together:</p>\n\n<pre><code>float res = x;        // first term ...\nfloat fact = x;       // ...equals the first factor\n\nfor (int n = 0; n &lt; nMax; n++) {\n    float old = res;\n\n    // calculate term(n + 1) as per the formulas above\n\n    fact *= (2*n + 1) * (2*n + 2);\n    fact /= 4.0 * (n + 1)*(n + 1) * (2*n + 3);\n    fact *= x * x * (2*n + 1);\n\n    res += fact;\n    if (res == old) break;\n\n    printf(\"[%d] %f\\n\", n, res);\n}  \n\nprintf(\"ref %f\\n\", asin(x));\n</code></pre>\n\n<p>(<code>FLT_EPSILON</code> is the granularity of floating-point numbers near 1.0. The terms are converging to zero, where the granularity is finer. I've tested whether adding the new term doesn't change the sum as a convergence criterion with a fixed maximum number of iterations, <code>nMax</code>.)</p>\n\n<p>This series does not converge well near \u00b11, where the slope of the function approaches infinity. By Stirling's approximation the nth term approximately equals <code>1/((2*n+1)*\u221a(\u03c0n))</code>, which converges very slowly. For the nth term to be less than <code>FLT_EPSILON</code>, n needs to be greater than 26000. Unfortunately, with that many summations, the finite precision of floating point numbers would prevent the series to converge to the correct answer.</p>\n"}], "owner": {"reputation": 1, "user_id": 12224061, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-z5llmTu5Ick/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hTYDWgzqCYwA9KFDNzfWPtMnHS9Q/mo/photo.jpg?sz=128", "display_name": "ImperialF7", "link": "https://stackoverflow.com/users/12224061/imperialf7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 309, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1571215644, "creation_date": 1571202692, "question_id": 58406123, "link": "https://stackoverflow.com/questions/58406123/why-using-the-taylor-series-formula-for-arcsin-converges-so-quickly-with-x-1", "title": "Why using the Taylor series formula for arcsin converges so quickly with x = 1", "body": "<p>I took this example from a video in youtube,  where a sen(x) is resolved using this approach, I just changed the formula to an arcsin(x).</p>\n\n<p>I am trying to figure out why this code is not working as expected:</p>\n\n<pre><code> #include &lt;stdio.h&gt;\n    //#include &lt;float.h&gt;\n    #include &lt;math.h&gt;\n\n    int factorial(int x)\n    {\n        int fac = 1;\n\n        while (x!=0)\n        {\n            fac= fac*x;\n            x--;\n        }\n        return fac;\n    }\n\n    int main()\n    {\n        int i;\n        float x, sum, divisor = 1, dividendo = 1,  temp;\n\n        printf(\"enter the value of X(in degrees): \");\n        scanf(\"%f\", &amp;x);\n        //x = x*3.141592/180;\n\n        sum = 0;\n        for(i=1; ; i++)\n        {\n            divisor = (factorial(2*i));\n            dividendo = (pow(4,(i)) * pow(factorial(i),2)*(2*i+1));\n            temp = (divisor/dividendo)*pow(x,(2*i+1));\n            if (temp &lt; FLT_EPSILON)\n                          break;\n            sum = sum + temp;\n            printf(\"our result = %f\\n\", sum);\n        }  \n        printf(\"reference = %f\\n\", asin(x));\n       // printf(\"our result = %f\\n\", sum);\n\n    }\n</code></pre>\n\n<p>Below is the result, and as you may see the output I get is far below from what is expected. the result printed comes from every iteration, and the reference is just to make a comparison between both outcomes.</p>\n\n<pre><code>enter the value of X(in degrees): 1\nour result = 0.166667\nour result = 0.241667\nour result = 0.286310\nour result = 0.316691\nour result = 0.339064\nour result = 0.356416\nour result = 0.356621\nour result = 0.356622\nour result = 0.356622\nour result = 0.356622\n**reference = 1.570796**\n</code></pre>\n"}, {"tags": ["c", "linux", "optimization", "global-variables", "objdump"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1571201542, "post_id": 58405786, "comment_id": 103156226, "body": "You can find all sorts of information about object code or executables from <code>objdump</code>, but it isn&#39;t essential to programming."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1571203640, "post_id": 58405786, "comment_id": 103156773, "body": "Wouldn&#39;t <code>valgrind</code> be a better choice?"}, {"owner": {"reputation": 561, "user_id": 5934085, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBBu3.jpg?s=128&g=1", "display_name": "T1412", "link": "https://stackoverflow.com/users/5934085/t1412"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1571204147, "post_id": 58405786, "comment_id": 103156943, "body": "@JonathanLeffler so If I only care about programming, I don&#39;t need care about objdump?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1571204954, "post_id": 58405786, "comment_id": 103157232, "body": "AFAIK objdump is not the right tool for the things you mention. Kind of like a fork is not the right tool for cutting down a tree."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1571209917, "post_id": 58405786, "comment_id": 103159313, "body": "Knowing about <code>objdump</code> can&#39;t be harmful, but I wouldn&#39;t regard it as crucial either.  I&#39;ve been programming a while \u2014 longer than <code>objdump</code> has been available \u2014 and I&#39;ve not needed to use it.  There might have been a few occasions where it would have been very useful, but not all that many.  Other people may have more use for it; they wouldn&#39;t necessarily be wrong.  For debugging memory corruption, I&#39;d probably use <a href=\"http://valgrind.org/\" rel=\"nofollow noreferrer\"><code>valgrind</code></a> first.  I avoid global variable buffer overflow by not having many global variables and being careful.  I let the compiler do code optimization."}], "owner": {"reputation": 561, "user_id": 5934085, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBBu3.jpg?s=128&g=1", "display_name": "T1412", "link": "https://stackoverflow.com/users/5934085/t1412"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571200205, "creation_date": 1571200205, "question_id": 58405786, "link": "https://stackoverflow.com/questions/58405786/what-is-advantage-of-objdump-in-programming", "title": "What is advantage of objdump in programming?", "body": "<p>I am learning about <strong>objdump</strong> and know basic about it. </p>\n\n<p><strong>Objdump</strong> displays information about one or more object files.</p>\n\n<p>Some people told me that we can using <strong>objdump</strong> to <strong>debug  memory corruption, avoid global variable buffer overflow, optimize code ...</strong> but I don't know how to use it to do that?</p>\n\n<p>Could you give me some examples for it?</p>\n"}, {"tags": ["c", "memory"], "comments": [{"owner": {"reputation": 2416, "user_id": 12188799, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-x2Us7lDjK_k/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdbvJBo6jnFH2eAReBMTWM_XkFHSw/photo.jpg?sz=128", "display_name": "Javier Silva Ort&#237;z", "link": "https://stackoverflow.com/users/12188799/javier-silva-ort%c3%adz"}, "edited": false, "score": 0, "creation_date": 1571199948, "post_id": 58405580, "comment_id": 103155900, "body": "Only the OS kernel knows where they are stored. Or perhaps do you executable file segments like .data and .rodata? Or do you mean whose in the heap and whose in the stack?"}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1571200164, "post_id": 58405580, "comment_id": 103155946, "body": "One normally talks about <a href=\"http://iso-9899.info/wiki/Storage_Duration\" rel=\"nofollow noreferrer\">storage duration</a>. Where stuff is actually stored is at least somewhat implementation-specific."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1571201675, "post_id": 58405580, "comment_id": 103156251, "body": "In C, <code>k</code> is just a restricted global variable (it can&#39;t be modified legitimately).  It might be stored in a read-only segment, but more likely won&#39;t be; it will probably be in the same segment as other global variables."}, {"owner": {"reputation": 4566, "user_id": 453492, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7b45c33a5eda398febe496831ccaacb4?s=128&d=identicon&r=PG", "display_name": "Mario The Spoon", "link": "https://stackoverflow.com/users/453492/mario-the-spoon"}, "edited": false, "score": 0, "creation_date": 1571203971, "post_id": 58405580, "comment_id": 103156879, "body": "Wouldn&#39;t k be optimized away by the compiler?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 4566, "user_id": 453492, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7b45c33a5eda398febe496831ccaacb4?s=128&d=identicon&r=PG", "display_name": "Mario The Spoon", "link": "https://stackoverflow.com/users/453492/mario-the-spoon"}, "edited": false, "score": 0, "creation_date": 1571208220, "post_id": 58405580, "comment_id": 103158490, "body": "@MarioTheSpoon yes, <code>k</code> might be optimized away because it&#39;s not used in the code here, but this depends on the compiler and on the compilation flags."}, {"owner": {"reputation": 127, "user_id": 11747173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f8296b8fed920d732f19ec7b7ad3ad6?s=128&d=identicon&r=PG&f=1", "display_name": "rohitt", "link": "https://stackoverflow.com/users/11747173/rohitt"}, "edited": false, "score": 0, "creation_date": 1571208313, "post_id": 58405580, "comment_id": 103158541, "body": "I know that global variables are stored in data segment while local ones are usually on stack segment. I&#39;m not sure about where the pointer variables and the constant variables are stored, and is for loop stored in text segment?"}], "answers": [{"tags": [], "owner": {"reputation": 241, "user_id": 5731628, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VjD-gt13QCQ/AAAAAAAAAAI/AAAAAAAAAHs/fb3YMM5Ta_c/photo.jpg?sz=128", "display_name": "c_mnon", "link": "https://stackoverflow.com/users/5731628/c-mnon"}, "is_accepted": false, "score": 1, "last_activity_date": 1571210420, "creation_date": 1571210420, "answer_id": 58407831, "question_id": 58405580, "link": "https://stackoverflow.com/questions/58405580/segments-for-variables-in-c-programs/58407831#58407831", "title": "Segments for variables in C programs?", "body": "<p>GCC would store constants in the text section.</p>\n"}], "owner": {"reputation": 127, "user_id": 11747173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f8296b8fed920d732f19ec7b7ad3ad6?s=128&d=identicon&r=PG&f=1", "display_name": "rohitt", "link": "https://stackoverflow.com/users/11747173/rohitt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1571210420, "creation_date": 1571198422, "last_edit_date": 1571201792, "question_id": 58405580, "link": "https://stackoverflow.com/questions/58405580/segments-for-variables-in-c-programs", "title": "Segments for variables in C programs?", "body": "<p>Where are each expression stored in memory? \nWhere would be constant variables stored?</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint a = 0;                   // initialized data segment\nchar arr[10] = \"hello\";      // initialized data segment\nconst int k = -1;            //\nint* gptr = &amp;a;              //\n\nint main()\n{\n    const int m = 31;        //\n    int n;                   //\n    int* ptr;                //\n    ptr = malloc(1024);      // heap segment\n\n    char* ptr2 = &amp;arr;       //\n\n    for(n = 0; n&lt;1024; ++n)  //\n        printf(\"%d \", n);    //\n}\n</code></pre>\n"}, {"tags": ["c", "global-variables", "objdump"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1571200187, "post_id": 58405571, "comment_id": 103155952, "body": "It&#39;s surprising, but not wrong, for the compiler to reorder the variables.  There is no requirement on the layout of global variables except they can&#39;t overlap in memory."}], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1571234172, "post_id": 58405623, "comment_id": 103172904, "body": "You can union type pun the struct with an array of <code>int[3]</code> and then assert that the struct and array are of the same size. It eliminates hypothetical padding and allows you do use the variables as an array."}], "tags": [], "owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "is_accepted": false, "score": 4, "last_activity_date": 1571199482, "last_edit_date": 1571199482, "creation_date": 1571198711, "answer_id": 58405623, "question_id": 58405571, "link": "https://stackoverflow.com/questions/58405571/how-are-global-variables-stored-in-memory/58405623#58405623", "title": "How are global variables stored in memory?", "body": "<blockquote>\n  <p>global variables should be stored in order g_a, g_b, g_c</p>\n</blockquote>\n\n<p>No, the order in which they're allocated to memory in no way affects whether or not they can be accessed.</p>\n\n<p>If you want them in a specific order, you can do that by putting them in a <code>struct</code> and declaring that, something like:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ntypedef struct {\n    int g_a;\n    int g_b;\n    int g_c;\n} tOrderGuaranteed;\n\ntOrderGuaranteed myStruct;\n\nint main()\n{\n    printf(\"Hello world\\n\");\n    // Use 'myStruct.g_a' rather than 'g_a'.\n    return 0;\n}\n</code></pre>\n\n<p>But, as stated, this doesn't seem to buy you much, especially since the compiler is free to insert padding as it sees fit, between and after those members.</p>\n\n<p>Provided you use <code>g_b</code> to access that (original non-struct) variable, and not some weird (undefined behaviour) variant like <code>*(&amp;g_a+1)</code>, your code will work fine regardless of how things are laid out in memory.</p>\n"}], "owner": {"reputation": 561, "user_id": 5934085, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBBu3.jpg?s=128&g=1", "display_name": "T1412", "link": "https://stackoverflow.com/users/5934085/t1412"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1571199482, "creation_date": 1571198297, "question_id": 58405571, "link": "https://stackoverflow.com/questions/58405571/how-are-global-variables-stored-in-memory", "title": "How are global variables stored in memory?", "body": "<p>I have code as follow:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint g_a;\nint g_b;\nint g_c;\n\nint main()\n{\n    printf(\"Hello world\\n\");\n    return 0;\n}\n</code></pre>\n\n<p>And build it with gcc</p>\n\n<pre><code>gcc -o global global.c\n</code></pre>\n\n<p>Finally, I use objdump to see address of global variables</p>\n\n<pre><code>objdump -t global\n</code></pre>\n\n<p>And see the result:</p>\n\n<pre><code>00004020 g_b\n00004024 g_a\n00004028 g_c\n</code></pre>\n\n<p>Why are global variables stored in addresses like above? I mean global variables should be stored in order g_a, g_b, g_c </p>\n"}, {"tags": ["c", "message-queue", "msgrcv"], "comments": [{"owner": {"reputation": 1980, "user_id": 11517179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zH4UW.gif?s=128&g=1", "display_name": "daShier", "link": "https://stackoverflow.com/users/11517179/dashier"}, "edited": false, "score": 0, "creation_date": 1571197387, "post_id": 58405438, "comment_id": 103155399, "body": "Please read: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">stackoverflow.com/help/minimal-reproducible-example</a>"}, {"owner": {"reputation": 91, "user_id": 4065588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09cb237f1b896216958e1c04ef5ff8ca?s=128&d=identicon&r=PG&f=1", "display_name": "Fairy", "link": "https://stackoverflow.com/users/4065588/fairy"}, "reply_to_user": {"reputation": 1980, "user_id": 11517179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zH4UW.gif?s=128&g=1", "display_name": "daShier", "link": "https://stackoverflow.com/users/11517179/dashier"}, "edited": false, "score": 0, "creation_date": 1571197837, "post_id": 58405438, "comment_id": 103155470, "body": "The only reason I removed the headers was because my code was getting too long and I wasn&#39;t able to post it. Also, This is the minimum I had to type to reproduce the problem."}, {"owner": {"reputation": 91, "user_id": 4065588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09cb237f1b896216958e1c04ef5ff8ca?s=128&d=identicon&r=PG&f=1", "display_name": "Fairy", "link": "https://stackoverflow.com/users/4065588/fairy"}, "reply_to_user": {"reputation": 1980, "user_id": 11517179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zH4UW.gif?s=128&g=1", "display_name": "daShier", "link": "https://stackoverflow.com/users/11517179/dashier"}, "edited": false, "score": 0, "creation_date": 1571197867, "post_id": 58405438, "comment_id": 103155475, "body": "These are the headers: # include &lt;unistd.h&gt; # include &lt;sys/types.h&gt; # include &lt;sys/stat.h&gt; # include &lt;fcntl.h&gt; # include &lt;time.h&gt; # include &lt;stdlib.h&gt; # include &lt;dirent.h&gt; # include &lt;stdio.h&gt; # include &lt;string.h&gt; # include &lt;getopt.h&gt; # include &lt;stdbool.h&gt; # include &lt;ctype.h&gt; # include &lt;sys/wait.h&gt; # include &lt;signal.h&gt; # include &lt;sys/mman.h&gt; # include &lt;sys/time.h&gt; # include &lt;stdint.h&gt; # include &lt;fcntl.h&gt; # include &lt;sys/shm.h&gt; # include &quot;shmemsem.h&quot; # include &lt;sys/ipc.h&gt; # include &lt;semaphore.h&gt; # include &lt;stdbool.h&gt; # include &lt;sys/ipc.h&gt; # include &lt;sys/msg.h&gt;"}], "owner": {"reputation": 91, "user_id": 4065588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09cb237f1b896216958e1c04ef5ff8ca?s=128&d=identicon&r=PG&f=1", "display_name": "Fairy", "link": "https://stackoverflow.com/users/4065588/fairy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571197332, "creation_date": 1571197332, "question_id": 58405438, "link": "https://stackoverflow.com/questions/58405438/message-queues-message-receive-gives-error-invalid-argument", "title": "Message queues message receive gives error invalid argument", "body": "<p>Very new to message queues and I am getting an error when I send a message from pikabo.c to master.c. I initially thought there was something wrong with my msgget() but master is able to send a message to pikabo.c and pikabo is able to read it.</p>\n\n<p>I'm writing these lines because otherwise my question is not posting. </p>\n\n<p>This is my code:\n<strong>master.c</strong></p>\n\n<pre><code>//global variables\nint shmid;\nint msgid;\nlong currentprocessPID;\nkey_t shmkey;\n\nstruct mesg_buffer {\n    long mesg_type;\n    int mesg_text[4];\n} message;\nvoid startprocess()\n{\n\n    int i;\n        pid_t pID = fork();\n        if (pID &lt; 0)\n        {\n            perror(\"Failed to fork:\");\n            exit(EXIT_FAILURE);\n        }\n        //launch user process and send a message to it using PID as msg type\n        else if (pID == 0)\n        {\n            static char *args[]={\"./pikabo\",NULL};\n            int status;\n            if(( status= (execv(args[0], args)))==-1)\n            {\n                perror(\"failed to execv\");\n                exit(EXIT_FAILURE);\n            }\n            else\n                printf(\"\\n message sent to user sucessfully\");\n        }\n        //send a message to user\n        currentprocessPID=pID;\n        message.mesg_type = currentprocessPID;\n        if( msgsnd(msgid, &amp;message, sizeof(message), 0)==-1)\n            perror(\"error in sending message to user process\");\n        else\n        {\n            printf(\"\\nmessage sent to process %ld\",currentprocessPID);\n            //do some stuff\n        }\n        //wait for a message back from user\n        if(msgrcv(msgid, &amp;message, sizeof(message), currentprocessPID, 0)==-1)\n            perror(\"error in recieving message from user process\");\n        else\n        {\n            printf(\"\\n%d process is done with its work\",message.mesg_text[0]);\n            int arg1=message.mesg_text[1];//cpu time used by the user process seconds\n            int arg2=message.mesg_text[2];//cpu time used by the user process nanoseconds\n        }\n}\nint main(int argc, char **argv)\n{      shmkey = ftok(\"makefile\",777);\n        if (shmkey == -1) {\n            perror(\"Ftok failed\");\n            exit(-1);\n        }\n        msgid = msgget(shmkey, 0666 | IPC_CREAT);\n        startprocess();\n    return 0;\n}\n</code></pre>\n\n<p><strong>pikabo.c</strong></p>\n\n<pre><code>int shmid;\nstruct mesg_buffer {\n    long mesg_type;\n    int mesg_text[4];\n} message;\nvoid main()\n{\n        long pid=getpid();\n        printf(\"\\n\\nhello from %d\",getpid());\n\n        key_t shmkey = ftok(\"makefile\",777);\n        if (shmkey == -1) {\n            perror(\"Ftok failed\");}\n        int msgid = msgget(shmkey, 0666 | IPC_CREAT);\n        while(1)\n            {\n                if(msgrcv(msgid, &amp;message, sizeof(message), getpid(), 0))\n                {\n                    printf(\"\\nDate received\");\n\n                        message.mesg_type = pid;\n                        message.mesg_text[0]=pid;\n                        message.mesg_text[1] = locals;\n                        message.mesg_text[2]=localn;\n                        message.mesg_text[3]=1;\n                        if( msgsnd(msgid, &amp;message, sizeof(message), 0)==-1)\n                            perror(\"error in sending message back\");\n                        exit(0);\n                }\n            }//endwhile\n        exit(0);\n}\n</code></pre>\n"}, {"tags": ["c"], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 3, "last_activity_date": 1571196657, "creation_date": 1571196657, "answer_id": 58405347, "question_id": 58405280, "link": "https://stackoverflow.com/questions/58405280/add-null-to-char-double-pointer/58405347#58405347", "title": "Add NULL to char double pointer", "body": "<p>For the last element in this list, you don't need to allocate any memory.  Just set it to NULL.  Also, be sure to add 1 to each of the <code>calloc</code> calls for the tokens to make room for the null terminating byte:</p>\n\n<pre><code>// Allocate space\nchar **argv_list = calloc(4, sizeof(char*));\nargv_list[0] = calloc(strlen(token1) + 1, sizeof(char));\nargv_list[1] = calloc(strlen(token2) + 1, sizeof(char));\nargv_list[2] = calloc(strlen(token3) + 1, sizeof(char));\nargv_list[3] = NULL;\n// Assign values\nstrcpy(argv_list[0], token1);\nstrcpy(argv_list[1], token2);\nstrcpy(argv_list[2], token3);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3901, "user_id": 5203853, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/fc13d83da1b2b866c973e239ea3b38d3?s=128&d=identicon&r=PG&f=1", "display_name": "Tom el Safadi", "link": "https://stackoverflow.com/users/5203853/tom-el-safadi"}, "edited": false, "score": 0, "creation_date": 1571196961, "post_id": 58405354, "comment_id": 103155306, "body": "Sorry, that was a typo, my bad! That worked, thank you!!"}, {"owner": {"reputation": 6746, "user_id": 8185995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02d69271095c22ec7a2f5cad43ea3ac0?s=128&d=identicon&r=PG&f=1", "display_name": "robthebloke", "link": "https://stackoverflow.com/users/8185995/robthebloke"}, "reply_to_user": {"reputation": 3901, "user_id": 5203853, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/fc13d83da1b2b866c973e239ea3b38d3?s=128&d=identicon&r=PG&f=1", "display_name": "Tom el Safadi", "link": "https://stackoverflow.com/users/5203853/tom-el-safadi"}, "edited": false, "score": 1, "creation_date": 1571197015, "post_id": 58405354, "comment_id": 103155318, "body": "Also note dbush&#39;s comment below - missing the extra char for the null terminator for each string."}, {"owner": {"reputation": 3901, "user_id": 5203853, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/fc13d83da1b2b866c973e239ea3b38d3?s=128&d=identicon&r=PG&f=1", "display_name": "Tom el Safadi", "link": "https://stackoverflow.com/users/5203853/tom-el-safadi"}, "edited": false, "score": 0, "creation_date": 1571197067, "post_id": 58405354, "comment_id": 103155329, "body": "Thanks for the hint, forgot to do that!"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1571206232, "post_id": 58405354, "comment_id": 103157696, "body": "@robthebloke: &quot;<i>missing the extra char for the null terminator</i>&quot; So why not at least fix it in your own answer?"}], "tags": [], "owner": {"reputation": 6746, "user_id": 8185995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02d69271095c22ec7a2f5cad43ea3ac0?s=128&d=identicon&r=PG&f=1", "display_name": "robthebloke", "link": "https://stackoverflow.com/users/8185995/robthebloke"}, "is_accepted": true, "score": 0, "last_activity_date": 1571196701, "creation_date": 1571196701, "answer_id": 58405354, "question_id": 58405280, "link": "https://stackoverflow.com/questions/58405280/add-null-to-char-double-pointer/58405354#58405354", "title": "Add NULL to char double pointer", "body": "<p>You're over complicating things I'd have said. Also worth noting that in your code you only initialise 1 of the 3 strings dues to always using argv_list[0]</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// Allocate space\nchar **argv_list = (char**)calloc(4, sizeof(char*));\nargv_list[0] = (char*)calloc(strlen(token1), sizeof(char));\nargv_list[1] = (char*)calloc(strlen(token2), sizeof(char));\nargv_list[2] = (char*)calloc(strlen(token3), sizeof(char));\nargv_list[3] = NULL;\n// Assign values\nstrcpy(argv_list[0], token1);\nstrcpy(argv_list[1], token2); //&lt; bug in your code here?\nstrcpy(argv_list[2], token3); //&lt; bug in your code here?\n</code></pre>\n"}], "owner": {"reputation": 3901, "user_id": 5203853, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/fc13d83da1b2b866c973e239ea3b38d3?s=128&d=identicon&r=PG&f=1", "display_name": "Tom el Safadi", "link": "https://stackoverflow.com/users/5203853/tom-el-safadi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 1, "accepted_answer_id": 58405354, "answer_count": 2, "score": 1, "last_activity_date": 1571196863, "creation_date": 1571196117, "last_edit_date": 1571196863, "question_id": 58405280, "link": "https://stackoverflow.com/questions/58405280/add-null-to-char-double-pointer", "title": "Add NULL to char double pointer", "body": "<p>I am using fork and <code>execvp(const char *path, char *const argv[]);</code> to run a child process. From the documentation it states that argv must be <code>NULL</code> terminated. However, I am unsure how to do this. Lets say I have an implementation like this (<strong>this is just for simplicity and demonstration!</strong>):</p>\n\n<pre><code>// Allocate space\nchar **argv_list = (char**)calloc(3, sizeof(char*));\nargv_list[0] = (char*)calloc(strlen(token1), sizeof(char));\nargv_list[1] = (char*)calloc(strlen(token2), sizeof(char));\nargv_list[2] = (char*)calloc(strlen(token3), sizeof(char));\n// Assign values\nstrcpy(argv_list[0], token1);\nstrcpy(argv_list[1], token2);\nstrcpy(argv_list[2], token3);\n</code></pre>\n\n<p>How would I add an additional <code>NULL</code> in the same style as above? With an array of pointers I would do it like this:</p>\n\n<pre><code>char *argv_list[] = {\"ls\", \"-l\", \"..\", NULL};\n</code></pre>\n\n<p>I tried it like this and it gave me a segmentation fault. Please le me know what I am doing wrong:</p>\n\n<pre><code>// Add NULL pointer\nargv_list = (char**)realloc(argv_list, (4 * sizeof(char*)));\nargv_list[3] = (char*)calloc(1, sizeof(NULL));\nstrcpy(argv_list[3], NULL);\n</code></pre>\n\n<p>Ps: Please don't tell me that there is a better way of doing this or my implementation is bad. I have to do it like above and this is just for simplicity. Thanks in advance!</p>\n"}, {"tags": ["c", "websocket", "tcp"], "comments": [{"owner": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 1, "creation_date": 1571205569, "post_id": 58405127, "comment_id": 103157458, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/54823923/http-client-receives-no-response-when-server-reads-only-headers-from-request\">Http client receives no response when server reads only headers from request</a>. In short: you need to actually read the full request in the server before you send the response."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1571268933, "post_id": 58405127, "comment_id": 103188116, "body": "@SteffenUllrich An HTTP server is allowed to send a response before fully reading the request, but it must be a properly formatted response, and only when sending a failure response (see <a href=\"https://tools.ietf.org/html/rfc2616#section-8.2.2\" rel=\"nofollow noreferrer\">RFC 2616 section 8.2.2</a>)."}, {"owner": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1571285451, "post_id": 58405127, "comment_id": 103191384, "body": "@RemyLebeau: ok, the more correct explanation is that the request should be read in full before closing the socket. This is also what the question I&#39;ve linked to shows."}], "answers": [{"tags": [], "owner": {"reputation": 1206, "user_id": 45679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8aa492aad65a8cf3202c55f64576fa23?s=128&d=identicon&r=PG", "display_name": "Gwyn Evans", "link": "https://stackoverflow.com/users/45679/gwyn-evans"}, "is_accepted": false, "score": 0, "last_activity_date": 1571196640, "creation_date": 1571196640, "answer_id": 58405346, "question_id": 58405127, "link": "https://stackoverflow.com/questions/58405127/simple-http-server-using-socket-programming-in-c-failed-on-chrome/58405346#58405346", "title": "Simple HTTP server using socket programming in C failed on Chrome", "body": "<p>I\u2019m afraid this isn\u2019t as tested as I\u2019d like it to be, but what strikes me is that you\u2019re not listening to the client before sending data to it. My hypothesis is that Chrome may be detecting that somehow so /maybe/ adding a receive might make a difference.</p>\n\n<p>To be sure though, you could try using Wireshark to monitor the request and compare with the traffic sent request to a full server, which should help diagnose differences.</p>\n"}, {"tags": [], "owner": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 3, "last_activity_date": 1571286447, "last_edit_date": 1571286447, "creation_date": 1571286067, "answer_id": 58424865, "question_id": 58405127, "link": "https://stackoverflow.com/questions/58405127/simple-http-server-using-socket-programming-in-c-failed-on-chrome/58424865#58424865", "title": "Simple HTTP server using socket programming in C failed on Chrome", "body": "<p>Such kind of problems typically occur when the server is closing the connection while there are still unread data from the client. In your case the server is closing the connection without reading the request from the client. But even if you've read the full request the problem might still happen since the client might have sent multiple requests (HTTP pipelining).</p>\n\n<p>The HTTP standard even has a recommendation how a proper close should be done and specifically addresses the problem you get. From <a href=\"https://tools.ietf.org/html/rfc7230#section-6.6\" rel=\"nofollow noreferrer\">RFC 7230 section 6.6 \"Tear-down\"</a>:</p>\n\n<blockquote>\n  <p>If a server performs an immediate close of a TCP connection, there is\n     a significant risk that the client will not be able to read the last\n     HTTP response.  If the server receives additional data from the\n     client on a fully closed connection, such as another request that was\n     sent by the client before receiving the server's response, <strong>the\n     server's TCP stack will send a reset packet to the client</strong>;\n     unfortunately, the reset packet might erase the client's\n     unacknowledged input buffers before they can be read and interpreted\n     by the client's HTTP parser.</p>\n  \n  <p><strong>To avoid the TCP reset problem, servers typically close a connection\n     in stages</strong>.  First, the server performs a half-close by closing only\n     the write side of the read/write connection.  <strong>The server then\n     continues to read from the connection until it receives a\n     corresponding close by the client</strong>, or until the server is reasonably\n     certain that its own TCP stack has received the client's\n     acknowledgement of the packet(s) containing the server's last\n     response.  Finally, the server fully closes the connection.</p>\n</blockquote>\n\n<p>Apart from that: it is strongly recommended (SHOULD in the standard) that you clearly mark the size of the body either by using a <code>Content-length</code> header or by using chunked transfer encoding - instead of just closing the connection. It is also strongly recommended that you signal the client that no more requests will be  accepted on this connection by adding a <code>Connection: close</code> header.</p>\n\n<p>In general: HTTP is way more complex then one might think just by looking at a few examples. <a href=\"https://tools.ietf.org/html/rfc7230\" rel=\"nofollow noreferrer\">There is a standard</a> which describes how clients and server should behave and there is a reason that this standard is long. Please follow it nevertheless if you intend to implement your own HTTP stack instead of just using existing implementations.</p>\n"}], "owner": {"reputation": 123, "user_id": 11117526, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-vTEAjiOITMw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd6NiW0oM0inFkFE_mUQwyYQtdPKg/mo/photo.jpg?sz=128", "display_name": "Kyle", "link": "https://stackoverflow.com/users/11117526/kyle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1384, "favorite_count": 0, "accepted_answer_id": 58424865, "answer_count": 2, "score": 1, "last_activity_date": 1571286447, "creation_date": 1571194795, "question_id": 58405127, "link": "https://stackoverflow.com/questions/58405127/simple-http-server-using-socket-programming-in-c-failed-on-chrome", "title": "Simple HTTP server using socket programming in C failed on Chrome", "body": "<p>I tried to write a simple http server using socket programming in C. I want to first try that the server could send back the HTML file without considering what kind of request is been received.</p>\n\n<p>Here's the header and the body :</p>\n\n<pre><code>char httpHeader[100000] = \n\"HTTP/1.1 200 OK\\r\\n\"\n\"Content-Type: text/html; charset=UTF-8\\r\\n\\r\\n\"\n\"&lt;!DOCTYPE html&gt;\\r\\n\"\n\"&lt;html&gt;&lt;head&gt;&lt;title&gt;Testing&lt;/title&gt;&lt;/head&gt;\\r\\n\"\n\"&lt;body&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/body&gt;&lt;html&gt;\\r\\n\";\n</code></pre>\n\n<p>Here's the procedure of sending package:</p>\n\n<pre><code>while(1) {\nif ( (connfd = accept(listenfd, NULL, NULL) ) &lt; 0 ) {\n    fprintf(stderr, \"accept error\\n\");\n    exit(EXIT_FAILURE);\n}\n\nif (send(connfd, httpHeader, sizeof(httpHeader), 0) == -1) {\n    fprintf(stderr, \"send error\\n\");\n    exit(EXIT_FAILURE);\n};\n\nif ( close(connfd) &lt; 0 ) {\n    fprintf(stderr, \"close error\\n\");\n    exit(EXIT_FAILURE);\n}\n}\n</code></pre>\n\n<p>I bind the socket on port 8080, and using telnet to test whether it's working or not. After running the server and send request by telnet in the same machine, the client side successfully receive the whole package without any error.</p>\n\n<p>But when I try to connect the server using Chrome, it failed. The GET error : \"net::ERR_CONNECTION_RESET 200 (OK)\" showed up. When I check the network session in DevTool, I saw that the response header is received by Chrome, showing \"HTTP/1.1 200 OK Content-Type: text/html; charset=UTF-8\", but did not see the HTML file.</p>\n\n<p>Is the header format wrong? I check the protocol again but not sure where I do wrong.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1571198294, "post_id": 58405069, "comment_id": 103155549, "body": "Since you are looping and wanting to find the first 4-comma-separated fields in each <i>line</i>, why not use a <i>line-oriented</i> input function like <code>fgets()</code> to read a line-at-a-time into a buffer and then iterate over each character in the buffer looking for your comma or newline. You can do it either way. In the case of <code>fgetc()</code> you will need to buffer the characters between delimiters anyway, you may as well read them into a buffer to begin with."}], "answers": [{"tags": [], "owner": {"reputation": 33, "user_id": 10541878, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WGXI3-2CanU/AAAAAAAAAAI/AAAAAAAAAA4/s1CgXX9c5NU/photo.jpg?sz=128", "display_name": "Samy Smart", "link": "https://stackoverflow.com/users/10541878/samy-smart"}, "is_accepted": false, "score": 0, "last_activity_date": 1571203637, "creation_date": 1571203637, "answer_id": 58406273, "question_id": 58405069, "link": "https://stackoverflow.com/questions/58405069/how-can-i-read-certain-parts-of-of-a-text-file-and-store-them-in-character-array/58406273#58406273", "title": "How can i read certain parts of of a text file and store them in character arrays to be compared?", "body": "<p>One way to solve this would be to make a 2dimensional array so a array of field and have an if in the loop that increments the variable that says which field array to use when there is a comma. You would end up with 5 char arrays that each have one field, and you'd have a \\n in the last one Wich you then need to remove.\nHope this helps</p>\n"}], "owner": {"reputation": 1, "user_id": 12132560, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-b5oDKk063cA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdsq0sJ1Hc6BhNlqILEndW8rFFYLA/photo.jpg?sz=128", "display_name": "daryl berry", "link": "https://stackoverflow.com/users/12132560/daryl-berry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1571203637, "creation_date": 1571194352, "question_id": 58405069, "link": "https://stackoverflow.com/questions/58405069/how-can-i-read-certain-parts-of-of-a-text-file-and-store-them-in-character-array", "title": "How can i read certain parts of of a text file and store them in character arrays to be compared?", "body": "<p>here is the part of the program that i am struggling with, \"You will need some kind of loop to read through the entries in a text file, for the 1st 4 fields in the text file, you will know that you are at the end of the field when you read a comma. For the last field in the text file, you will know you are at the end of the field when you read a newline.</p>\n\n<p>I did the program using functions from string.h but was challenged do the same program without the use of string.h and i am stuck at the loop part of this program.</p>\n\n<p>i know my loop is incorrect but i am having trouble figuring out the correct loop to use, any tips will be helpfully </p>\n\n<pre><code>do\n{\n    ch = fgetc(fout);\n    if(ch == EOF)\n    {\n        break;\n    }\n\n\n    field[x]=ch;//loads all the characters into the array\n\n    printf(\"%c\",field[x]);//printing \n    x++;\n\n}while(1);//infinite loop\n\nfclose(fout);\n</code></pre>\n"}, {"tags": ["c", "function", "compiler-errors", "function-prototypes"], "comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 2, "creation_date": 1571194472, "post_id": 58405062, "comment_id": 103154872, "body": "What difference do you see between <code>int doubleInput (int *)</code> and <code>int *doubeInput (int* inputVal)</code>?"}, {"owner": {"reputation": 1, "user_id": 12223759, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCaRnsJ-URqxq82yTpgHeQQ03rg3-vlewuqSk2s=k-s128", "display_name": "Grace Neumayer", "link": "https://stackoverflow.com/users/12223759/grace-neumayer"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1571194745, "post_id": 58405062, "comment_id": 103154915, "body": "the * before the doubleInput."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1571223435, "post_id": 58405062, "comment_id": 103166480, "body": "Okay, so remove it. That will fix the type conflict. You also have a typo in the function name. After that, you will find that <code>return (&quot;%d * 2&quot;,inputVal);</code> does not do any arithmetic. To deal with that, you should use a C textbook or tutorial."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1572279722, "post_id": 58405062, "comment_id": 103502199, "body": "You also have undefined behaviour. Printing a pointer requires format specifier <code>&quot;%p</code>, not <code>&quot;%d&quot;</code>. You probably want to print <code>*inputVal</code> instead of <code>inputVal</code> I suggest you should revisit the chapter about pointers in your tutorials."}], "owner": {"reputation": 1, "user_id": 12223759, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCaRnsJ-URqxq82yTpgHeQQ03rg3-vlewuqSk2s=k-s128", "display_name": "Grace Neumayer", "link": "https://stackoverflow.com/users/12223759/grace-neumayer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1572276857, "creation_date": 1571194303, "last_edit_date": 1572276857, "question_id": 58405062, "link": "https://stackoverflow.com/questions/58405062/error-conflicting-types-for-function-and-previous-declaration-of-function-was", "title": "ERROR: conflicting types for function, and previous declaration of function was here", "body": "<p>I am a very beginner level with coding. I have an error for each of my functions, my program is for a simple calculator and I'm still working on it, but I can't seem to get rid of the errors.</p>\n\n<p>here are my prototypes</p>\n\n<pre><code>  int doubleInput (int *);\nint squareInput (int *);\nint cubeInput (int *);\n</code></pre>\n\n<p>and my functions</p>\n\n<pre><code>int *doubeInput (int* inputVal)\n   {\n\n      printf(\"%d x 2\", inputVal); \n\n      return (\"%d * 2\",inputVal);\n   }\n\n\n  int *squareInput (int* inputVal)\n   {\n\n      printf(\"%d x %d\", inputVal, inputVal);\n\n      return (\"%d * %d\", inputVal, inputVal);\n\n   }\n\n\n  int *cubeInput (int* inputVal)\n   {\n\n      printf(\"%d ^ 3\", inputVal);\n\n      return (\"%d * %d * %d\", inputVal, inputVal, inputVal);\n   }\n</code></pre>\n\n<p>The same error comes up for each function.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1571194787, "post_id": 58405049, "comment_id": 103154919, "body": "You should enable warnings and read them. Compile with <code>-Wall</code>"}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1571195824, "post_id": 58405049, "comment_id": 103155105, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/46558406/c-recursive-function-palindrome\">C recursive function palindrome</a>"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1571198791, "post_id": 58405049, "comment_id": 103155665, "body": "Why not remove all space before you check? (you can copy to a separate buffer, just skip copying the spaces)"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 11444780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ead6210cbeaa5a28b69afaacc15d74bf?s=128&d=identicon&r=PG&f=1", "display_name": "nontype", "link": "https://stackoverflow.com/users/11444780/nontype"}, "edited": false, "score": 1, "creation_date": 1571199808, "post_id": 58405495, "comment_id": 103155865, "body": "so oddly enough I fixed that mistake but now I get a segmentation fault (core dump).  Not sure how changing &#39;Z&#39; to &#39;z&#39; makes my program try to access memory that is out of bounds."}, {"owner": {"reputation": 474, "user_id": 4007703, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jN2Pc.jpg?s=128&g=1", "display_name": "Somil  Garg", "link": "https://stackoverflow.com/users/4007703/somil-garg"}, "reply_to_user": {"reputation": 25, "user_id": 11444780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ead6210cbeaa5a28b69afaacc15d74bf?s=128&d=identicon&r=PG&f=1", "display_name": "nontype", "link": "https://stackoverflow.com/users/11444780/nontype"}, "edited": false, "score": 0, "creation_date": 1571216916, "post_id": 58405495, "comment_id": 103162999, "body": "You need to fix the recursion there is no need of the while loop over there. I have updated the code . Your current code keeps on checking only one condition."}], "tags": [], "owner": {"reputation": 474, "user_id": 4007703, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jN2Pc.jpg?s=128&g=1", "display_name": "Somil  Garg", "link": "https://stackoverflow.com/users/4007703/somil-garg"}, "is_accepted": false, "score": 1, "last_activity_date": 1571216988, "last_edit_date": 1571216988, "creation_date": 1571197785, "answer_id": 58405495, "question_id": 58405049, "link": "https://stackoverflow.com/questions/58405049/checking-non-symmetrical-palindrome/58405495#58405495", "title": "checking non symmetrical Palindrome", "body": "<p>You are checking for the uppercase character <strong>'Z'</strong> it should be:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint is_not_alnum(char c);\nint testPalindrome(const char string[], int begin, int end);\n\n\nint main (void)\n{\n    int n;\n    char temp;\n\n\n    printf(\"Enter the size of your string: \");\n\n    scanf(\"%d\" , &amp;n);\n\n    char string[n];\n\n    printf(\"Enter your string to check if it is a palindrome: \");\n    scanf(\"%c\",&amp;temp);\n    scanf(\"%[^\\n]\" , string);\n\n    if(testPalindrome(string, 0 , n - 1))\n        printf(\"\\\"%s\\\" is a Palindrome.\\n\" , string);\n    else\n        printf(\"\\\"%s\\\" is not a Palindrome.\\n\" , string);\n\n\n    //puts(\"\");\n\n    return(0);\n}\n\n//program only needs to worry about lowercase and 0-9 alphanumeric\nint is_not_alnum(char c)\n{\n    if( ((c &gt;= 'a') &amp;&amp; (c &lt;= 'z')) || ((c &gt;= '0') &amp;&amp; (c &lt;= '9')) )\n        return(0);\n    else\n        return(1);\n}\n\nint testPalindrome(const char string[], int begin, int end)\n{\n    if (begin &lt;= end)\n       return(1);\n\n    if(is_not_alnum(string[begin]))\n        begin++;\n    if(is_not_alnum(string[end]))\n        end--;\n\n    if(string[begin] == string[end])\n    {\n        return(testPalindrome(string , begin++ , end--));\n    }\n    else\n        return(0);\n\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 11444780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ead6210cbeaa5a28b69afaacc15d74bf?s=128&d=identicon&r=PG&f=1", "display_name": "nontype", "link": "https://stackoverflow.com/users/11444780/nontype"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1571216988, "creation_date": 1571194176, "last_edit_date": 1571198475, "question_id": 58405049, "link": "https://stackoverflow.com/questions/58405049/checking-non-symmetrical-palindrome", "title": "checking non symmetrical Palindrome", "body": "<p>I've written a program for a myprogramminglab assignment that is supposed to take a string input, check if its a palindrome, and output the result.</p>\n\n<p>What I have is working for everything but one test.  \"a man a plan a canal panama\" is a palindrome but my program is saying its not.  I think that it must be because the program compares the second blank space with the 'm' in 'panama'.</p>\n\n<p>On the flip side, \"able was i ere i saw elba\" is caught as a palindrome but I would guess that this is because it is symmetrical and skipping a white space on the left happens at the same time as skipping a white space on the right.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint is_not_alnum(char c);\nint testPalindrome(const char string[], int begin, int end);\n\n\nint main (void)\n{\n    int n;\n    char temp;\n\n\n    printf(\"Enter the size of your string: \");\n\n    scanf(\"%d\" , &amp;n);\n\n    char string[n];\n\n    printf(\"Enter your string to check if it is a palindrome: \");\n    scanf(\"%c\",&amp;temp);\n    scanf(\"%[^\\n]\" , string);\n\n    if(testPalindrome(string, 0 , n - 1))\n        printf(\"\\\"%s\\\" is a Palindrome.\\n\" , string);\n    else\n        printf(\"\\\"%s\\\" is not a Palindrome.\\n\" , string);\n\n\n    //puts(\"\");\n\n    return(0);\n}\n\n//program only needs to worry about lowercase and 0-9 alphanumeric\nint is_not_alnum(char c)\n{\n    if( ((c &gt;= 'a') &amp;&amp; (c &lt;= 'Z')) || ((c &gt;= '0') &amp;&amp; (c &lt;= '9')) )\n        return(0);\n    else\n        return(1);\n}\n\nint testPalindrome(const char string[], int begin, int end)\n{\n    while (begin &lt;= end)\n    {\n    if(is_not_alnum(string[begin]))\n        begin++;\n    if(is_not_alnum(string[end]))\n        end--;\n\n    if(string[begin] == string[end])\n    {\n        return(testPalindrome(string , begin++ , end--));\n        return(1);\n    }\n    else\n        return(0);\n    }\n}\n\n</code></pre>\n"}, {"tags": ["c", "postgresql"], "comments": [{"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1571192870, "post_id": 58404890, "comment_id": 103154601, "body": "A makefile has nothing to do with a debugger. A makefile controls how the executable file is built. A debugger steps through the code at runtime. One has nothing to do with the other."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 12076752, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sKrsAONmNb4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc4RYQHLlWuUHmg8E7ANArOME6J5A/photo.jpg?sz=128", "display_name": "Yessica Brinkmann", "link": "https://stackoverflow.com/users/12076752/yessica-brinkmann"}, "edited": false, "score": 0, "creation_date": 1571807144, "post_id": 58405547, "comment_id": 103358086, "body": "The problem was that I was printing the value of idxcd-&gt; varattnombres [i] as an integer value, with%d, when in fact I had to print it as a string value, with %s, that&#39;s why I was printing numerical values."}, {"owner": {"reputation": 125670, "user_id": 6464308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/12PVX.jpg?s=128&g=1", "display_name": "Laurenz Albe", "link": "https://stackoverflow.com/users/6464308/laurenz-albe"}, "reply_to_user": {"reputation": 23, "user_id": 12076752, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sKrsAONmNb4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc4RYQHLlWuUHmg8E7ANArOME6J5A/photo.jpg?sz=128", "display_name": "Yessica Brinkmann", "link": "https://stackoverflow.com/users/12076752/yessica-brinkmann"}, "edited": false, "score": 0, "creation_date": 1571808010, "post_id": 58405547, "comment_id": 103358291, "body": "Great to hear that you are making progress developing and debugging PostgreSQL code. I know from my own experience that embarrassingly trivial errors can baffle you for days."}], "tags": [], "owner": {"reputation": 125670, "user_id": 6464308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/12PVX.jpg?s=128&g=1", "display_name": "Laurenz Albe", "link": "https://stackoverflow.com/users/6464308/laurenz-albe"}, "is_accepted": true, "score": 1, "last_activity_date": 1571198160, "creation_date": 1571198160, "answer_id": 58405547, "question_id": 58404890, "link": "https://stackoverflow.com/questions/58404890/is-this-a-logic-error-or-what-happens-problem-with-foreach/58405547#58405547", "title": "Is this a logic error or what happens? Problem with foreach", "body": "<p>With the provided information it is impossible to pinpoint the error. Since the <code>foreach</code> loops through the list passed to your function, it depends on the caller of your function what values are in the list. Maybe you should start looking there.</p>\n\n<p>About attaching a debugger, which is unrelated to a <code>Makefile</code>:</p>\n\n<ul>\n<li><p>Make sure that you compile with the <code>-g</code> option. This happens automatically if you configured PostgreSQL <code>--enable-debug</code>.</p></li>\n<li><p>Put a <code>sleep(10)</code> at the beginning of your function.</p></li>\n<li><p>Start a PostgreSQL session and use <code>SELECT pg_backend_pid();</code> to get the backend process ID.</p></li>\n<li><p>Call your function and quickly attach the debugger with</p>\n\n<pre><code>gdb /path/to/postgres 12345\n</code></pre>\n\n<p>where 12345 is the backend process ID.</p></li>\n</ul>\n"}], "owner": {"reputation": 23, "user_id": 12076752, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sKrsAONmNb4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc4RYQHLlWuUHmg8E7ANArOME6J5A/photo.jpg?sz=128", "display_name": "Yessica Brinkmann", "link": "https://stackoverflow.com/users/12076752/yessica-brinkmann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "closed_date": 1571349645, "accepted_answer_id": 58405547, "answer_count": 1, "score": -1, "last_activity_date": 1571198160, "creation_date": 1571192614, "question_id": 58404890, "link": "https://stackoverflow.com/questions/58404890/is-this-a-logic-error-or-what-happens-problem-with-foreach", "closed_reason": "Not suitable for this site", "title": "Is this a logic error or what happens? Problem with foreach", "body": "<p>I have a function in c that runs on a Postgresql server called get_ndistinct that returns the statistical value of get_ndistinct for the columns of some tables in a Postgresql database.\nThe fact is that when the foreach is entered twice, the second time, the value loaded in idxcd-> varattnames [i] appears to me as a number, when in fact I should return a column name value. And the number that appears to me matches the value that is returned for get_ndistinct in the previous step of the cycle\u00bf? I really thought a lot and I don't understand why this happens. I don't know if it's a logic error of mine or what's happening. It's very strange, especially since the number coincides with the value returned in the previous step of the cycle ... that I don't know where or how it is loaded in idxcd-> varattnombre [i]\u00bf?\nTo use a debugger, I don't know if I can ... because I use a Makefile. I don't know if I can use debugger with Makefile, I'm new using Linux.\nI will greatly appreciate an answer please.\nMy source code is as follows:</p>\n\n<pre><code>/**\n * get_distinct\n *      for every candidate get an entry into IndexCandidate\n */\nstatic List*\nget_ndistinct( List* candidates )\n{\n    int proc;\n    StringInfoData  query;  /* string for Query */\n    StringInfoData  cols;   /* string for Columns */\n    Oid             advise_oid;\n    ListCell        *cell;\n    IndexCandidate* idxcd;\n\n\n    elog( DEBUG3, \"IND ADV: get_distinct: ENTER\" );\n\n\n\n    initStringInfo( &amp;query );\n    initStringInfo( &amp;cols );\n\n    foreach( cell, candidates ) /* foreach cell in candidates */\n    {\n        idxcd = (IndexCandidate*)lfirst( cell );\n\n        if (idxcd == NULL) {\n            elog( INFO, \"idxcd IS NULL\" );\n            continue; /* Or is that fatal enough to break instead? */\n        }\n\n        if (!idxcd-&gt;idxused)\n            continue;\n\n        int i;\n\n\n        /* pfree() the memory allocated for the previous candidate. FIXME: Avoid\n         * meddling with the internals of a StringInfo, and try to use an API.\n         */\n        if( cols.len &gt; 0 )\n        {\n            initStringInfo(&amp;cols);\n        } /*IF col.len&gt;0*/\n\n        if( query.len &gt; 0 )\n        {\n            initStringInfo(&amp;query);\n        } /*IF col.len&gt;0*/\n\n\n        appendStringInfo( &amp;query, \"select n_distinct from pg_stats where \");\n\n        for (i = 0; i &lt; idxcd-&gt;ncols; ++i)\n        {\n\n\n            appendStringInfo( &amp;cols, \"%s attname='%s'\", (i&gt;0?\" OR\":\"\"), idxcd-&gt;varattnombres[i]);\n\n\n        }/* foreach col in varattno*/\n\n\n        /* FIXME: Mention the column names explicitly after the table name. */\n        appendStringInfo( &amp;query, \"%s;\", cols.data);\n\n\n\n        if( query.len &gt; 0 ) /* if we generated any SQL */\n        {\n\n            if( SPI_connect() == SPI_OK_CONNECT )\n            {\n\n                if( SPI_execute( query.data, true, 0 ) != SPI_OK_SELECT )\n                        elog( WARNING, \"IND ADV: SPI_execute failed while select.\" );\n\n                else /* SPI_OK_SELECT*/\n                {\n\n                    proc=SPI_processed;\n                    TupleDesc tupdesc=SPI_tuptable-&gt;tupdesc;\n                    SPITupleTable *tuptable=SPI_tuptable;\n                    char buf[8192];\n                    int i,j;\n                    for(j=0;j&lt;proc;j++)\n                    {\n                        /*cada fila*/\n                        HeapTuple tuple=tuptable-&gt;vals[j];\n                        for (i=1,buf[0]=0;i&lt;=tupdesc-&gt;natts;i++)\n                        {\n                            /* cada columna de cada fila*/\n                            char *data;\n                            data=SPI_getvalue(tuple,tupdesc,i);\n                            idxcd-&gt;ndistinct[j]=data;\n\n                            snprintf(buf+strlen(buf),sizeof(buf)-strlen(buf),\"%s %s\",data,(i==tupdesc-&gt;natts)?\"\": \"|\");\n                        }\n\n                        elog(INFO,\"EXECQ:%s\",buf);  \n\n\n                    }\n\n                }\n\n\n                if( SPI_finish() != SPI_OK_FINISH )\n\n                    elog( WARNING, \"IND ADV: SPI_finish failed while select.\" );\n            }\n            else /* SPI_connect() != SPI_OK_CONNECT*/\n                elog( WARNING, \"IND ADV: SPI_connect failed while select.\" );\n        } /*if( query.len &gt; 0 ) if we generated any SQL */\n\n    } /* foreach cell in candidates */          \n\n        /* TODO: Propose to -hackers to introduce API to free a StringInfoData . */\n        if ( query.len &gt; 0 )\n            pfree( query.data );\n\n    elog( DEBUG3, \"IND ADV: select: EXIT\" );\n    return candidates;\n}\n</code></pre>\n"}, {"tags": ["c", "compiler-errors", "windows-xp", "visual-studio-2019"], "comments": [{"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1571204763, "post_id": 58404886, "comment_id": 103157166, "body": "<code>&#47;MT</code> is a compiler, not a linker option. Simply build your project in Release mode and install the necessary redistributable for XP?"}], "answers": [{"tags": [], "owner": {"reputation": 1233, "user_id": 11872808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29d7b759b09573f7750c178d99015eca?s=128&d=identicon&r=PG&f=1", "display_name": "Jeaninez - MSFT", "link": "https://stackoverflow.com/users/11872808/jeaninez-msft"}, "is_accepted": true, "score": 1, "last_activity_date": 1571214267, "creation_date": 1571214267, "answer_id": 58408869, "question_id": 58404886, "link": "https://stackoverflow.com/questions/58404886/link-fatal-error-lnk1146-no-argument-specified-with-option-mt/58408869#58408869", "title": "LINK : fatal error LNK1146: no argument specified with option &#39;/MT&#39;", "body": "<p>VCRUNTIME140d.dll is <a href=\"https://www.microsoft.com/en-us/download/details.aspx?id=48145\" rel=\"nofollow noreferrer\">Visual C++ Redistributable for Visual Studio 2015</a>.You need to download and install. And this is Debug versions of DLL. You must compile in Release mode.</p>\n"}], "owner": {"reputation": 45, "user_id": 2611441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab340d1abd472e79a583d46e22e8054e?s=128&d=identicon&r=PG&f=1", "display_name": "Meow", "link": "https://stackoverflow.com/users/2611441/meow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 412, "favorite_count": 0, "accepted_answer_id": 58408869, "answer_count": 1, "score": 1, "last_activity_date": 1571214267, "creation_date": 1571192564, "question_id": 58404886, "link": "https://stackoverflow.com/questions/58404886/link-fatal-error-lnk1146-no-argument-specified-with-option-mt", "title": "LINK : fatal error LNK1146: no argument specified with option &#39;/MT&#39;", "body": "<p>I'm using Visual Studio 2019 and trying to compile a program that was compatible with Windows XP 32-bit. </p>\n\n<p>When I first ran my .exe on my VM it said that it wasn't compatible with Win32.\nI've then changed the Platform Toolset to Visual Studio 2017 - Windows XP (v141_xp).\nNow it says I'm missing a VCRUNTIME140d.dll, and following instructions that said to change my Runtime Library to /MT I get the error stated in the title.</p>\n\n<p>Any suggestions would be very much appreciated.</p>\n"}, {"tags": ["c", "initialization", "storage-duration"], "comments": [{"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 1, "creation_date": 1571189783, "post_id": 58404458, "comment_id": 103154009, "body": "I suspect this might boil down to how such data is typically reserved in a program&#39;s data segment."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1571190097, "post_id": 58404458, "comment_id": 103154064, "body": "Actually, it&#39;s the <a href=\"https://en.wikipedia.org/wiki/.bss#BSS_in_C\" rel=\"nofollow noreferrer\">BSS segment</a>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1571192331, "post_id": 58404458, "comment_id": 103154515, "body": "&quot;gives all the <a href=\"https://en.wikiquote.org/wiki/Stan_Lee#Quotes\" rel=\"nofollow noreferrer\">responsibility</a> to the programmer&quot; --&gt; good."}], "answers": [{"comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1571193979, "post_id": 58404648, "comment_id": 103154783, "body": "Of course there is a run-time cost to initializing static objects. Setting memory to zero or other values is not free. It requires actual physical acton by the hardware. (Setting it to zero may have no <b>extra</b> cost if the operating system already does that for security/privacy protection, though.)"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 4, "last_activity_date": 1571190266, "creation_date": 1571190266, "answer_id": 58404648, "question_id": 58404458, "link": "https://stackoverflow.com/questions/58404458/why-are-objects-with-automatic-storage-not-zeroed-when-static-objects-are/58404648#58404648", "title": "Why are objects with automatic storage not zeroed when static objects are?", "body": "<p>In a word: <strong>efficiency</strong>.</p>\n\n<p>For static objects, they have full program lifetime and so their initial values are set at compile time meaning there's no runtime cost.  For automatic objects, they would need to be initialized every time they come into scope.  So unless they are explicitly initialized it would be a waste of processor cycles to do so.</p>\n\n<p>With regard to arrays as well as structs, an object is either initialized or it is not.  So if at least part of it is explicitly initialized the rest has to be initialized as well.  Presumably, this makes it easier for compilers to perform optimizations around uninitialized variables if it doesn't need to keep track of anything partially initialized.</p>\n"}], "owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 58404648, "answer_count": 1, "score": 3, "last_activity_date": 1571190266, "creation_date": 1571188558, "question_id": 58404458, "link": "https://stackoverflow.com/questions/58404458/why-are-objects-with-automatic-storage-not-zeroed-when-static-objects-are", "title": "Why are objects with automatic storage not zeroed when static objects are?", "body": "<p>In C, objects with automatic storage have an indeterminate value if they are not initialized, but static objects does not. From <a href=\"https://port70.net/~nsz/c/c11/n1570.html#6.7.9p10\" rel=\"nofollow noreferrer\">the standard</a>:</p>\n\n<blockquote>\n  <p>If an object that has automatic storage duration is not initialized explicitly, its value is indeterminate. If an object that has static or thread storage duration is not initialized explicitly, then:</p>\n  \n  <ul>\n  <li>if it has pointer type, it is initialized to a null pointer;</li>\n  <li>if it has arithmetic type, it is initialized to (positive or unsigned) zero;</li>\n  <li>if it is an aggregate, every member is initialized (recursively) according to these rules, and any padding is initialized to zero bits;</li>\n  <li>if it is a union, the first named member is initialized (recursively) according to these rules, and any padding is initialized to zero bits; </li>\n  </ul>\n</blockquote>\n\n<p>We all know that C is a pretty unforgiving language that gives all the responsibility to the programmer, so it makes me wonder a bit why they decided to zero initialize static objects. I also wonder why automatic arrays are completely zero initialized if and only if at least one element is manually initialized. But what makes me most curious is why they did not choose to do this either for everything or nothing.</p>\n\n<p>What is the rationale behind this?</p>\n"}, {"tags": ["c", "loops", "debugging", "dynamic-memory-allocation", "string-parsing"], "comments": [{"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 0, "creation_date": 1571184482, "post_id": 58404044, "comment_id": 103153029, "body": "That&#39;s just the <code>calloc</code> function&#39;s assembly. You can ignore it, it&#39;s pointless. Instead, use a real command-line debugger like <code>gdb</code>."}, {"owner": {"reputation": 15, "user_id": 9273687, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aNVse_vejMo/AAAAAAAAAAI/AAAAAAAAAhg/zaQfZnOxRHE/photo.jpg?sz=128", "display_name": "Jason", "link": "https://stackoverflow.com/users/9273687/jason"}, "reply_to_user": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 1, "creation_date": 1571184904, "post_id": 58404044, "comment_id": 103153126, "body": "@JL2210 Sorry I meant to say &quot;step over&quot; instead of &quot;step into&quot;. I used gdb and it didn&#39;t work either. Just edited my question."}, {"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 0, "creation_date": 1571184974, "post_id": 58404044, "comment_id": 103153141, "body": "Once you get <code>SIGTRAP</code>, type in <code>bt</code> or <code>continue</code>."}, {"owner": {"reputation": 15, "user_id": 9273687, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aNVse_vejMo/AAAAAAAAAAI/AAAAAAAAAhg/zaQfZnOxRHE/photo.jpg?sz=128", "display_name": "Jason", "link": "https://stackoverflow.com/users/9273687/jason"}, "reply_to_user": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 0, "creation_date": 1571185051, "post_id": 58404044, "comment_id": 103153149, "body": "@JL2210 It shows &quot;Backtrace stopped: previous frame identical to this frame (corrupt stack?)&quot;"}, {"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 0, "creation_date": 1571185126, "post_id": 58404044, "comment_id": 103153168, "body": "Looks like you&#39;re corrupting the stack. I have to go. Good night."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1571188030, "post_id": 58404044, "comment_id": 103153733, "body": "This isn&#39;t a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. We have no idea where <code>str</code> comes from, nor is it compilable on its own. You clearly have issues with <code>output</code> (which you allocate as if you mean to make a contiguous 2D array of <code>char</code>, but then use like an array of <code>char*</code>; <a href=\"https://stackoverflow.com/q/17477234/364696\">there&#39;s a difference</a>.), and don&#39;t understand the behavior of <code>strcpy</code> (<code>strcpy(target, target);</code> is violates the <code>strcpy</code> API requirements, which demand no overlap in arguments), but neither of those problems should cause stack corruption; you probably have yet more problems in the code you haven&#39;t shown"}, {"owner": {"reputation": 108, "user_id": 8961085, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-umFoDqrJUwg/AAAAAAAAAAI/AAAAAAAAAC8/sGDiw6lbbkA/photo.jpg?sz=128", "display_name": "MikeFromCanmore", "link": "https://stackoverflow.com/users/8961085/mikefromcanmore"}, "edited": false, "score": 0, "creation_date": 1571191311, "post_id": 58404044, "comment_id": 103154300, "body": "1) See the answer here for proper use of calloc for what you are trying to do: <a href=\"https://stackoverflow.com/questions/24345089/using-calloc-to-set-up-char-array-also-freeing-array-when-done\" title=\"using calloc to set up char array also freeing array when done\">stackoverflow.com/questions/24345089/&hellip;</a>.  2) Make sure &#39;str&#39; is null-terminated. Otherwise strlen will probably not return a correct value"}], "answers": [{"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 0, "last_activity_date": 1571198708, "last_edit_date": 1571198708, "creation_date": 1571192623, "answer_id": 58404892, "question_id": 58404044, "link": "https://stackoverflow.com/questions/58404044/dynamic-allocation-isnt-working-in-a-loop/58404892#58404892", "title": "Dynamic allocation isn&#39;t working in a loop", "body": "<p>(edit) indexing was OK. Couple of notes: <code>sizeof(char)</code> is always <code>1</code> -- just use <code>1</code>. Further, there is no need to cast the return of <code>malloc</code>, it is unnecessary. See: <a href=\"http://stackoverflow.com/q/605845/995714\">Do I cast the result of malloc?</a>. Additionally, how many times do you call <code>strlen(str)</code>? (hopefully optimization limits the loop condition to a single call, but you could potentially be calling <code>strlen(str)</code> for every iteration). Same with <code>endOfString = (i+1)==strlen(str)</code>. Save the length of the string before entering the loop and then just use the saved value to compare against.</p>\n\n<p>While you can count indexes as you have and loop character-by-character looking for delimiters, it is far more efficient to let <code>strchr (pointer, '|')</code> advance to the next delimiter (or return <code>NULL</code> indicating no more delimiters remain). Then rather than worrying about indexes, simply keep a pointer <code>p</code> and end-pointer <code>ep</code> to advance down the string, e.g.</p>\n\n<pre><code>#define NFIELDS 20\n...\nchar **splitstr (const char *s, const char delim, size_t *n)\n{\n    const char  *p = s,     /* pointer for parsing */\n                *ep = s;    /* end pointer for parsing */\n    *n = 0;                                 /* zero string counter */\n    while (*n &lt; NFIELDS &amp;&amp; *p) {            /* loop while less than NFIELDS */\n        size_t len;\n        if ((ep = strchr (p, delim)))       /* get pointer to delim */\n            len = ep - p;\n        else\n            len = strlen (p);               /* or get length of final string */\n        if (!(output[*n] = malloc (len + 1))) { /* allocated for string */\n        ...\n        memcpy (output[*n], p, len);        /* copy chars to output[n] */\n        output[(*n)++][len] = 0;            /* nul-terminate to make string */\n        if (!ep)                            /* if delim not found, last */\n            break;\n        p = ++ep;                           /* update p to 1-past delim */\n    }\n    ...\n</code></pre>\n\n<p>Adding appropriate error checking and returning the pointer to the allocated strings, you could do:</p>\n\n<pre><code>char **splitstr (const char *s, const char delim, size_t *n)\n{\n    const char  *p = s,     /* pointer for parsing */\n                *ep = s;    /* end pointer for parsing */\n    char **output = calloc (NFIELDS, sizeof *output);   /* pointer to output */\n\n    if (!output) {\n        perror (\"calloc-output\");\n        return NULL;\n    }\n\n    *n = 0;                                 /* zero string counter */\n    while (*n &lt; NFIELDS &amp;&amp; *p) {            /* loop while less than NFIELDS */\n        size_t len;\n        if ((ep = strchr (p, delim)))       /* get pointer to delim */\n            len = ep - p;\n        else\n            len = strlen (p);               /* or get length of final string */\n        if (!(output[*n] = malloc (len + 1))) { /* allocated for string */\n            perror (\"malloc-output[n]\");\n            while ((*n)--)          /* free prior allocations on failure */\n                free (output[*n]);\n            free(output);\n            return NULL;\n        }\n        memcpy (output[*n], p, len);        /* copy chars to output[n] */\n        output[(*n)++][len] = 0;            /* nul-terminate to make string */\n        if (!ep)                            /* if delim not found, last */\n            break;\n        p = ++ep;                           /* update p to 1-past delim */\n    }\n\n    return output;      /* return pointer to allocated strings */\n}\n</code></pre>\n\n<p>In your case a complete short example would be:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define NFIELDS 20\n#define MAXC  1024\n\nchar **splitstr (const char *s, const char delim, size_t *n)\n{\n    const char  *p = s,     /* pointer for parsing */\n                *ep = s;    /* end pointer for parsing */\n    char **output = calloc (NFIELDS, sizeof *output);   /* pointer to output */\n\n    if (!output) {\n        perror (\"calloc-output\");\n        return NULL;\n    }\n\n    *n = 0;                                 /* zero string counter */\n    while (*n &lt; NFIELDS &amp;&amp; *p) {            /* loop while less than NFIELDS */\n        size_t len;\n        if ((ep = strchr (p, delim)))       /* get pointer to delim */\n            len = ep - p;\n        else\n            len = strlen (p);               /* or get length of final string */\n        if (!(output[*n] = malloc (len + 1))) { /* allocated for string */\n            perror (\"malloc-output[n]\");\n            while ((*n)--)          /* free prior allocations on failure */\n                free (output[*n]);\n            free(output);\n            return NULL;\n        }\n        memcpy (output[*n], p, len);        /* copy chars to output[n] */\n        output[(*n)++][len] = 0;            /* nul-terminate to make string */\n        if (!ep)                            /* if delim not found, last */\n            break;\n        p = ++ep;                           /* update p to 1-past delim */\n    }\n\n    return output;      /* return pointer to allocated strings */\n}\n\nint main (void) {\n\n    char buf[MAXC],         /* buffer for input */\n        **output = NULL;    /* pointer to split/allocated strings */\n    size_t n = 0;           /* number of strings filled */\n\n    if (!fgets (buf, MAXC, stdin)) {    /* validate input */\n        fputs (\"error: invalid input.\\n\", stderr);\n        return 1;\n    }\n    buf[strcspn (buf, \"\\n\")] = 0;       /* trim newline from buf */\n    /* split buf into separate strings on '|' */\n    if (!(output = splitstr (buf, '|', &amp;n))) {\n        fputs (\"error: splitstr() failed.\\n\", stderr);\n        return 1;\n    }\n\n    for (size_t i = 0; i &lt; n; i++) {    /* loop outputting each &amp; free */\n        printf (\"output[%2zu]: %s\\n\", i, output[i]);\n        free (output[i]);   /* free strings */\n    }\n    free (output);          /* free pointers */\n}\n</code></pre>\n\n<p><strong>Example Use/Output</strong></p>\n\n<pre><code>$ echo \"abc|def||jk\" | ./bin/splitstr\noutput[ 0]: abc\noutput[ 1]: def\noutput[ 2]:\noutput[ 3]: jk\n</code></pre>\n\n<p><strong>Memory Use/Error Check</strong></p>\n\n<p>In any code you write that dynamically allocates memory, you have 2 <em>responsibilities</em> regarding any block of memory allocated: (1) <em>always preserve a pointer to the starting address</em> for the block of memory so, (2) it can be <em>freed</em> when it is no longer needed.</p>\n\n<p>It is imperative that you use a memory error checking program to insure you do not attempt to access memory or write beyond/outside the bounds of your allocated block, attempt to read or base a conditional jump on an uninitialized value, and finally, to confirm that you free all the memory you have allocated. </p>\n\n<p>For Linux <code>valgrind</code> is the normal choice. There are similar memory checkers for every platform. They are all simple to use, just run your program through it.</p>\n\n<pre><code>$ echo \"abc|def||jk\" | valgrind ./bin/splitstr\n==32024== Memcheck, a memory error detector\n==32024== Copyright (C) 2002-2015, and GNU GPL'd, by Julian Seward et al.\n==32024== Using Valgrind-3.12.0 and LibVEX; rerun with -h for copyright info\n==32024== Command: ./bin/splitstr\n==32024==\noutput[ 0]: abc\noutput[ 1]: def\noutput[ 2]:\noutput[ 3]: jk\n==32024==\n==32024== HEAP SUMMARY:\n==32024==     in use at exit: 0 bytes in 0 blocks\n==32024==   total heap usage: 5 allocs, 5 frees, 172 bytes allocated\n==32024==\n==32024== All heap blocks were freed -- no leaks are possible\n==32024==\n==32024== For counts of detected and suppressed errors, rerun with: -v\n==32024== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)\n</code></pre>\n\n<p>Always confirm that you have freed all memory you have allocated and that there are no memory errors.</p>\n\n<p>Look things over and let me know if you have further questions.</p>\n"}], "owner": {"reputation": 15, "user_id": 9273687, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aNVse_vejMo/AAAAAAAAAAI/AAAAAAAAAhg/zaQfZnOxRHE/photo.jpg?sz=128", "display_name": "Jason", "link": "https://stackoverflow.com/users/9273687/jason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 116, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1571248135, "creation_date": 1571184254, "last_edit_date": 1592644375, "question_id": 58404044, "link": "https://stackoverflow.com/questions/58404044/dynamic-allocation-isnt-working-in-a-loop", "title": "Dynamic allocation isn&#39;t working in a loop", "body": "<p>I'm trying to break a string <code>str</code> containing the bar symbol <code>|</code> into an array of strings(<code>output</code>), with the delimiter being <code>|</code>, which will not be included in the array of strings. There will be 20 elements in <code>output</code>. This code belongs to a function that will return <code>output</code> pointer, which is why I need dynamic allocation.</p>\n<p>I'm trying to do this <strong>without</strong> using the <code>sscanf()</code> function.</p>\n<p>Example: if <code>str</code> is <code>&quot;abc|def||jk&quot;</code> then this is what <code>output</code> should look like at the end (less than 20 elements for demonstration purpose):</p>\n<blockquote>\n<p>output[0]==&quot;abc&quot;</p>\n<p>output[1]==&quot;def&quot;</p>\n<p>output[2]==&quot;&quot;</p>\n<p>output[3]==&quot;jk&quot;</p>\n</blockquote>\n<p>However, I always get an error exit code, something like:</p>\n<blockquote>\n<p>Process finished with exit code -1073740940 (0xC0000374)</p>\n</blockquote>\n<p>When debugging I found out that the first string element is parsed correctly into <code>output</code>, but the second element is produced correctly sometimes, and other times I ran into trouble.</p>\n<p>Code below:</p>\n<pre><code>char **output = (char**) calloc(20, 20*sizeof(char));\nint begin = 0;\nint end = 1;\n// index that counts output element\nint arrayIndex = 0;\nint i;\nfor(i = 0; i &lt; strlen(str); i++) {\n    end = i;\n    bool endOfString = false;\n    // there is no '|' symbol at the end of the string\n    if (*(str+i) == '|' || (endOfString = (i+1)==strlen(str))) {\n        end = endOfString ? (end+1):end;\n\n        // problem here. Assembly code poped up when debugging (see image below)\n        char *target = (char*) calloc(end-begin+1, sizeof(char));\n\n        // give proper value to target\n        strcpy(target, str+begin);\n        *(target+end-begin) = '\\0';\n        *(output+arrayIndex) = target;\n        // increase proper indexes\n        begin = i + 1;\n        arrayIndex++;\n\n    }\n}\n</code></pre>\n<p>The worst of all is that I cannot debug it because a window with assembly code pops up the instance I step over the <code>calloc</code> function when debugging.\n<a href=\"https://i.stack.imgur.com/8afII.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8afII.png\" alt=\"Assembly code window\" /></a></p>\n<p>I used gdb too, but it didn't work:</p>\n<blockquote>\n<p>56             char <em>target = (char</em>) calloc(length, sizeof(char));</p>\n<p>(gdb) n</p>\n<p>warning: Critical error detected c0000374</p>\n<p>Thread 1 received signal SIGTRAP, Trace/breakpoint trap.</p>\n<p>0x00007ffded8191f3 in ?? ()</p>\n<p>(gdb) bt</p>\n<p>#0  0x00007ffded8191f3 in ?? ()</p>\n<p>Backtrace stopped: previous frame identical to this frame (corrupt stack?)</p>\n<p>(gdb) continue</p>\n<p>Continuing.</p>\n<p>gdb: unknown target exception 0xc0000374 at 0x7ffded819269</p>\n</blockquote>\n"}, {"tags": ["c"], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 4, "last_activity_date": 1571182014, "creation_date": 1571182014, "answer_id": 58403789, "question_id": 58403761, "link": "https://stackoverflow.com/questions/58403761/invalid-operands-to-binary-on-two-dimensional-array/58403789#58403789", "title": "Invalid operands to binary / on two-dimensional array", "body": "<pre><code>x[n]=b[n]/A[n,n];\n</code></pre>\n\n<p>This is not the proper syntax for indexing a 2D array.  The <code>,</code> here is actually the comma operator, which discards the left operand and evaluates to the right operand, so <code>A[n,n]</code> is the same as <code>A[n]</code>.  So then you're attempting to assign a 1D array of <code>float</code> to a <code>float</code> which is the error you're getting.</p>\n\n<p>What you want is:</p>\n\n<pre><code>x[n]=b[n]/A[n][n];\n</code></pre>\n\n<p>Do the same for other references of <code>A</code>.</p>\n"}], "owner": {"reputation": 45, "user_id": 11321850, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-s-7ApgxVMMc/AAAAAAAAAAI/AAAAAAAAAF4/vyn2HQPRr44/photo.jpg?sz=128", "display_name": "Lutfi Rahmatullah", "link": "https://stackoverflow.com/users/11321850/lutfi-rahmatullah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 58403789, "answer_count": 1, "score": 2, "last_activity_date": 1571182100, "creation_date": 1571181791, "last_edit_date": 1571182100, "question_id": 58403761, "link": "https://stackoverflow.com/questions/58403761/invalid-operands-to-binary-on-two-dimensional-array", "title": "Invalid operands to binary / on two-dimensional array", "body": "<p>I have a variable which is declared using a 'typedef' data type and it has array. when i do a operation divide (/) it says invalid operations. \nthis is the code sample :</p>\n\n<pre><code>const int n = 10;\ntypedef float matriks[100][100];\ntypedef float vektor[100];\n\nmatriks A;\nvektor b;\nvektor x;\nvoid Sulih_Mundur (matriks A, vektor b, int n, vektor x){\nint j,k;\n        float sigma;\n        x[n]=b[n]/A[n,n]; //error here\n        for(k=n-1;k&lt;1;k--){\n            sigma=0;\n            for(j=k+1;j&gt;=n;j++){\n                sigma=sigma+A[k,j]*x[j];\n            }\n            x[k]=(b[k]-sigma)/A[k,k];\n        }\n}\n</code></pre>\n\n<p>i got error on x[n]=b[n]/A[n,n] it says invalid operands / to binary (have float and float)\ni dont understand which one is the problem because i used the same data types there. and one integer variabel to access the array. thank you...</p>\n"}, {"tags": ["c", "scanf"], "answers": [{"tags": [], "owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "is_accepted": false, "score": 95, "last_activity_date": 1584895789, "last_edit_date": 1584895789, "creation_date": 1571179756, "answer_id": 58403538, "question_id": 58403537, "link": "https://stackoverflow.com/questions/58403537/what-can-i-use-for-input-conversion-instead-of-scanf/58403538#58403538", "title": "What can I use for input conversion instead of scanf?", "body": "<p>The most common ways of reading input are:</p>\n\n<ul>\n<li><p>using <code>fgets</code> with a fixed size, which is what is usually suggested, and</p></li>\n<li><p>using <code>fgetc</code>, which may be useful if you're only reading a single <code>char</code>.</p></li>\n</ul>\n\n<p>To convert the input, there are a variety of functions that you can use:</p>\n\n<ul>\n<li><p><code>strtoll</code>, to convert a string into an integer</p></li>\n<li><p><code>strtof</code>/<code>d</code>/<code>ld</code>, to convert a string into a floating-point number</p></li>\n<li><p><code>sscanf</code>, which is not <em>as</em> bad as simply using <code>scanf</code>, although it does have most of the downfalls mentioned below</p></li>\n<li><p>There are no good ways to parse a delimiter-separated input in plain ANSI C. Either use <code>strtok_r</code> from POSIX or <code>strtok</code>, which is not thread-safe. You could also <a href=\"https://github.com/JL2210/minilibc/raw/master/src/string/strtok_r.c\" rel=\"noreferrer\" title=\"My implementation of strtok_r\">roll your own</a> thread-safe variant using <code>strcspn</code> and <code>strspn</code>, as <code>strtok_r</code> doesn't involve any special OS support.</p></li>\n<li><p>It may be overkill, but you can use lexers and parsers (<code>flex</code> and <code>bison</code> being the most common examples).</p></li>\n<li><p>No conversion, simply just use the string</p></li>\n</ul>\n\n<hr>\n\n<p>Since I didn't go into exactly <em>why</em> <code>scanf</code> is bad in my question, I'll elaborate:</p>\n\n<ul>\n<li><p>With the conversion specifiers <code>%[...]</code> and <code>%c</code>, <code>scanf</code> does not eat up whitespace. This is apparently not widely known, as evidenced by the many duplicates of <a href=\"https://stackoverflow.com/questions/5240789/scanf-leaves-the-new-line-char-in-the-buffer\">this question</a>.</p></li>\n<li><p>There is some confusion about when to use the unary <code>&amp;</code> operator when referring to <code>scanf</code>'s arguments (specifically with strings).</p></li>\n<li><p>It's very easy to ignore the return value from <code>scanf</code>. This could easily cause undefined behavior from reading an uninitialized variable.</p></li>\n<li><p>It's very easy to forget to prevent buffer overflow in <code>scanf</code>. <code>scanf(\"%s\", str)</code> is just as bad as, if not worse than, <code>gets</code>.</p></li>\n<li><p>You cannot detect overflow when converting integers with <code>scanf</code>. <strong>In fact, overflow causes <a href=\"https://stackoverflow.com/questions/5240789/scanf-leaves-the-new-line-char-in-the-buffer\">undefined behavior</a> in these functions.</strong></p></li>\n</ul>\n\n<hr>\n"}, {"comments": [{"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1571243320, "post_id": 58403935, "comment_id": 103178287, "body": "<i>If you do not specify a field width</i>... - or a conversion suppression (e.g. <code>%*[%\\n]</code>, which is useful for dealing with overlong lines later in the answer)."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1571243572, "post_id": 58403935, "comment_id": 103178415, "body": "There is a way to get run-time specification of field widths, but it&#39;s not nice.  You end up having to construct the format string in your code (perhaps using <code>snprintf()</code>), ."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 5, "creation_date": 1571243670, "post_id": 58403935, "comment_id": 103178457, "body": "You&#39;ve made the most common mistake with <code>isspace()</code> there - it accepts <i>unsigned</i> characters represented as <code>int</code>, so you need to cast to <code>unsigned char</code> to avoid UB on platforms where <code>char</code> is signed."}], "tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 21, "last_activity_date": 1571183201, "creation_date": 1571183201, "answer_id": 58403935, "question_id": 58403537, "link": "https://stackoverflow.com/questions/58403537/what-can-i-use-for-input-conversion-instead-of-scanf/58403935#58403935", "title": "What can I use for input conversion instead of scanf?", "body": "<p><code>scanf</code> is awesome when you <em>know</em> your input is always well-structured and well-behaved. Otherwise...</p>\n\n<p>IMO, here are the biggest problems with <code>scanf</code>:</p>\n\n<ul>\n<li><p><strong>Risk of buffer overflow</strong> - if you do not specify a field width for the <code>%s</code> and <code>%[</code> conversion specifiers, you risk a buffer overflow (trying to read more input than a buffer is sized to hold).  Unfortunately, there's no good way to specify that as an argument (as with <code>printf</code>) - you have to either hardcode it as part of the conversion specifier or do some macro shenanigans.  </p></li>\n<li><p><strong>Accepts inputs that <em>should</em> be rejected</strong> - If you're reading an input with the <code>%d</code> conversion specifier and you type something like <code>12w4</code>, you would <em>expect</em> <code>scanf</code> to reject that input, but it doesn't - it successfully converts and assigns the <code>12</code>, leaving <code>w4</code> in the input stream to foul up the next read.</p></li>\n</ul>\n\n<p>So, what should you use instead?</p>\n\n<p>I usually recommend reading <em>all</em> interactive input as text using <code>fgets</code> - it allows you to specify a maximum number of characters to read at a time, so you can easily prevent buffer overflow:</p>\n\n<pre><code>char input[100];\nif ( !fgets( input, sizeof input, stdin ) )\n{\n  // error reading from input stream, handle as appropriate\n}\nelse\n{\n  // process input buffer\n}\n</code></pre>\n\n<p>One quirk of <code>fgets</code> is that it will store the trailing newline in the buffer if there's room, so you can do an easy check to see if someone typed in more input than you were expecting:</p>\n\n<pre><code>char *newline = strchr( input, '\\n' );\nif ( !newline )\n{\n  // input longer than we expected\n}\n</code></pre>\n\n<p>How you deal with that is up to you - you can either reject the whole input out of hand, and slurp up any remaining input with <code>getchar</code>:</p>\n\n<pre><code>while ( getchar() != '\\n' ) \n  ; // empty loop\n</code></pre>\n\n<p>Or you can process the input you got so far and read again.  It depends on the problem you're trying to solve.</p>\n\n<p>To <em>tokenize</em> the input (split it up based on one or more delimiters), you can use <code>strtok</code>, but beware - <code>strtok</code> modifies its input (it overwrites delimiters with the string terminator), and you can't preserve its state (i.e., you can't partially tokenize one string, then start to tokenize another, then pick up where you left off in the original string).  There's a variant, <code>strtok_s</code>, that preserves the state of the tokenizer, but AFAIK its implementation is optional (you'll need to check that <code>__STDC_LIB_EXT1__</code> is defined to see if it's available).  </p>\n\n<p>Once you've tokenized your input, if you need to convert strings to numbers (i.e., <code>\"1234\"</code> => <code>1234</code>), you have options.  <code>strtol</code> and <code>strtod</code> will convert string representations of integers and real numbers to their respective types.  They also allow you to catch the <code>12w4</code> issue I mentioned above - one of their arguments is a pointer to the first character <em>not</em> converted in the string:</p>\n\n<pre><code>char *text = \"12w4\";\nchar *chk;\nlong val;\nlong tmp = strtol( text, &amp;chk, 10 );\nif ( !isspace( *chk ) &amp;&amp; *chk != 0 )\n  // input is not a valid integer string, reject the entire input\nelse\n  val = tmp;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1571198933, "post_id": 58403955, "comment_id": 103155704, "body": "Note that <code>(r = sscanf(&quot;1 2 junk&quot;, &quot;%d%d&quot;, &amp;x, &amp;y)) != 2</code> does not detect as bad the trailing non-numeric text."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1571202362, "post_id": 58403955, "comment_id": 103156425, "body": "@chux Fixed %f%f. What do you mean with the first?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1571203104, "post_id": 58403955, "comment_id": 103156586, "body": "With <code>fgets()</code> of <code>&quot;1 2 junk&quot;</code>, <code>if((r = sscanf(buffer, &quot;%d%d&quot;, &amp;x, &amp;y)) != 2) {</code> does not report anything wrong with input even though it has &quot;junk&quot;."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1571203756, "post_id": 58403955, "comment_id": 103156809, "body": "@chux Ah, now I see. Well that was intentional."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1571203970, "post_id": 58403955, "comment_id": 103156878, "body": "@chux Well intentional was a bit of a stretch. It was more like that I did not care. It was easier to throw away whatever comes behind the numbers than doing extra checking. :)"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1571264937, "post_id": 58403955, "comment_id": 103187148, "body": "The reason there are no good functions for console I/O is that C89 deliberately avoided features that would not be universally supportable, and there is no requirement that C implementations (even hosted ones) have anything that even remotely resembles a console."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1571265115, "post_id": 58403955, "comment_id": 103187188, "body": "@supercat That sounds very plausible and is a very interesting thing. I might add it to the answer. Do you happen to have a source?"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1571265662, "post_id": 58403955, "comment_id": 103187339, "body": "@klutt: Compilers from Borland and Microsoft both included <code>getch()</code> which reads a character from the keyboard without echo, <code>getche()</code> which reads and echos a character, <code>putch()</code> which outputs a character to the screen, and <code>cprintf</code>, which sends a string to the screen; these functions are not affected by I/O redirection.  I think there was also a <code>cgets()</code> though I never used it."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1571294429, "post_id": 58403955, "comment_id": 103194140, "body": "@klutt: Search for &quot;C99 Rationale&quot; for information about why a lot of things in the Standard are as they are (it describes both C89 and C99).  A key thing to understand is that the authors of C89 were chartered with describing an existing language, rather than inventing features, so if different implementations used different ways of doing something, and not all implementations could support it, the Standard would simply ignore the issue on the assumption that because those that could meaningfully support it did so with no standard, they didn&#39;t need the Standard to tell them how to do so."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1571521245, "post_id": 58403955, "comment_id": 103270854, "body": "@klutt: Even just reading the first few parts of the Rationale give an impression of the language which isn&#39;t intended to make programmers jump through hoops to accomplish &quot;what needs to be done&quot;."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1571521344, "post_id": 58403955, "comment_id": 103270873, "body": "@supercat Yes, I agree about that. It&#39;s just that I prefer to give sources to claims."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1571602862, "post_id": 58403955, "comment_id": 103286516, "body": "@klutt: The fact that the Standard doesn&#39;t require that C implementations support any kind of console could be inferred by the lack of functions for that purpose.  I don&#39;t know any particular source for the fact that many pre-standard implementations supported console I/O, other than the documentation for them (which I don&#39;t have readily available).  It&#39;s too bad the Committee wasn&#39;t willing to &quot;invent&quot; some console functions that could be readily supportable on existing implementations with consoles merely by adding them to the library, since no pre-existing functions would be suitable."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1571603129, "post_id": 58403955, "comment_id": 103286585, "body": "@klutt: On a Unix system, it&#39;s necessary to switch the input stream to &quot;raw&quot; mode before characters are typed, making it impractical to support an Borland/MS-style <code>getch()</code>, but Unix allows <code>getchar()</code> to be used for either buffered or non-buffered input, depending upon the raw-mode setting.  Having a &quot;prepare for getch()&quot; function [which could be a no-op in MS-DOS], combined with <code>getch()</code> (which on some platforms would require &quot;preparation&quot;) would have allowed programs to support both kinds of console platforms."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1571655481, "post_id": 58403955, "comment_id": 103300610, "body": "<i><code>scanf</code> is intended to be used with perfectly formatted data</i> But even that&#39;s not true.  Besides the issue with &quot;junk&quot; as mentioned by @chux, there&#39;s also the fact that a format like <code>&quot;%d %d %d&quot;</code> is happy to read input from one, two, or three lines (or even more, if there are intervening blank lines), that there&#39;s no way to force (say) a two-line input by doing something like <code>&quot;%d\\n%d %d&quot;</code>, etc.  <code>scanf</code> might be appropriate for formatted <i>stream</i> input, but it&#39;s not at all good for anything line-based."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1571686768, "post_id": 58403955, "comment_id": 103316095, "body": "@SteveSummit: In general, &quot;perfectly&quot; formatted data will have known numbers of items per line. and <code>scanf</code> will be of marginal use when handling data that doesn&#39;t have known numbers of items per line.  What part of the statement are you disagreeing with?"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1571694924, "post_id": 58403955, "comment_id": 103318963, "body": "@supercat This comment box isn&#39;t big enough for a full answer, but it&#39;s kind of like the old joke, &quot;If we had some ham, we could make a ham sandwich... if we had some bread.&quot;  Your statement about <code>scanf</code> was partly true, but it didn&#39;t go far enough.  I&#39;d say: &quot;<code>scanf</code> is lousy for user input, because user input is unformatted, and <code>scanf</code> is designed for formatted input... but <code>scanf</code> is lousy for formatted input.&quot; (Because, among other things, it can be both too forgiving, and not forgiving enough.)"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1571760474, "post_id": 58403955, "comment_id": 103344521, "body": "@SteveSummit: In those cases where the format of the input is so strongly guaranteed that the programmer would genuinely not need to care about how code would process anything else, <code>scanf</code> would be usable.  Having standard library include a function that&#39;s about half the size <i>of an entire Pascal compiler with built-in IDE</i> just for the purpose of handling such rare cases seems a bit silly, but that doesn&#39;t mean the function is <i>completely</i> useless."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "reply_to_user": {"reputation": 8780, "user_id": 318716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2Jwj3.png?s=128&g=1", "display_name": "Joseph Quinsey", "link": "https://stackoverflow.com/users/318716/joseph-quinsey"}, "edited": false, "score": 1, "creation_date": 1614354576, "post_id": 58403955, "comment_id": 117368437, "body": "@JosephQuinsey Thanks"}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 1, "creation_date": 1614354606, "post_id": 58403955, "comment_id": 117368449, "body": "@chqrlie Nice. Updated"}], "tags": [], "owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "is_accepted": false, "score": 63, "last_activity_date": 1614354555, "last_edit_date": 1614354555, "creation_date": 1571183367, "answer_id": 58403955, "question_id": 58403537, "link": "https://stackoverflow.com/questions/58403537/what-can-i-use-for-input-conversion-instead-of-scanf/58403955#58403955", "title": "What can I use for input conversion instead of scanf?", "body": "<h1>TL;DR</h1>\n<p><code>fgets</code> is for getting the input. <code>sscanf</code> is for parsing it afterwards. <code>scanf</code> tries to do both at the same time. That's a recipe for trouble. Read first and parse later.</p>\n<h1>Why is <code>scanf</code> bad?</h1>\n<p>The main problem is that <code>scanf</code> was never intended to deal with user input. It's intended to be used with &quot;perfectly&quot; formatted data. I quoted the word &quot;perfectly&quot; because it's not completely true. But it is not designed to parse data that are as unreliable as user input. By nature, user input is not predictable. Users misunderstands instructions, makes typos, accidentally press enter before they are done etc. One might reasonably ask why a function that should not be used for user input reads from <code>stdin</code>. If you are an experienced *nix user the explanation will not come as a surprise but it might confuse Windows users. In *nix systems, it is very common to build programs that work via piping, which means that you send the output of one program to another by piping the <code>stdout</code> of the first program to the <code>stdin</code> of the second. This way, you can make sure that the output and input are predictable. During these circumstances, <code>scanf</code> actually works well. But when working with unpredictable input, you risk all sorts of trouble.</p>\n<p>So why aren't there any easy-to-use standard functions for user input? One can only guess here, but I assume that old hardcore C hackers simply thought that the existing functions were good enough, even though they are very clunky. Also, when you look at typical terminal applications they very rarely read user input from <code>stdin</code>. Most often you pass all the user input as command line arguments. Sure, there are exceptions, but for most applications, user input is a very minor thing.</p>\n<h1>So what can you do?</h1>\n<p>First of all, <code>gets</code> is NOT an alternative. It's dangerous and should NEVER be used. Read here why: <a href=\"https://stackoverflow.com/q/1694036/6699433\">Why is the gets function so dangerous that it should not be used?</a></p>\n<p>My favorite is <code>fgets</code> in combination with <code>sscanf</code>. I once wrote an answer about that, but I will re-post the complete code. Here is an example with decent (but not perfect) error checking and parsing. It's good enough for debugging purposes.</p>\n<blockquote>\n<h3>Note</h3>\n</blockquote>\n<blockquote>\n<p>I don't particularly like asking the user to input two different things on one single line. I only do that when they belong to each other in a natural way. Like for instance <code>printf(&quot;Enter the price in the format &lt;dollars&gt;.&lt;cent&gt;: &quot;); fgets(buffer, bsize, stdin);</code> and then use <code>sscanf(buffer &quot;%d.%d&quot;, &amp;dollar, &amp;cent)</code>. I would never do something like <code>printf(&quot;Enter height and base of the triangle: &quot;)</code>. The main point of using <code>fgets</code> below is to encapsulate the inputs to ensure that one input does not affect the next.</p>\n</blockquote>\n<pre><code>#define bsize 100\n\nvoid error_function(const char *buffer, int no_conversions) {\n        fprintf(stderr, &quot;An error occurred. You entered:\\n%s\\n&quot;, buffer);\n        fprintf(stderr, &quot;%d successful conversions&quot;, no_conversions);\n        exit(EXIT_FAILURE);\n}\n\nchar c, buffer[bsize];\nint x,y;\nfloat f, g;\nint r;\n\nprintf(&quot;Enter two integers: &quot;);\nfflush(stdout); // Make sure that the printf is executed before reading\nif(! fgets(buffer, bsize, stdin)) error_function(buffer, 0);\nif((r = sscanf(buffer, &quot;%d%d&quot;, &amp;x, &amp;y)) != 2) error_function(buffer, r);\n\n// Unless the input buffer was to small we can be sure that stdin is empty\n// when we come here.\nprintf(&quot;Enter two floats: &quot;);\nfflush(stdout);\nif(! fgets(buffer, bsize, stdin)) error_function(buffer, 0);\nif((r = sscanf(buffer, &quot;%f%f&quot;, &amp;f, &amp;g)) != 2) error_function(buffer, r);\n\n// Reading single characters can be especially tricky if the input buffer\n// is not emptied before. But since we're using fgets, we're safe.\nprintf(&quot;Enter a char: &quot;);\nfflush(stdout);\nif(! fgets(buffer, bsize, stdin)) error_function(buffer, 0);\nif((r = sscanf(buffer, &quot;%c&quot;, &amp;c)) != 1) error_function(buffer, r);\n\nprintf(&quot;You entered %d %d %f %c\\n&quot;, x, y, f, c);\n</code></pre>\n<blockquote>\n<p>If you do a lot of these, I could recommend creating a wrapper that always flushes:</p>\n<pre><code>int printfflush (const char *format, ...)\n{\n   va_list arg;\n   int done;\n   va_start (arg, format);\n   done = vfprintf (stdout, format, arg);\n   fflush(stdout);\n   va_end (arg);\n   return done;\n}\n</code></pre>\n</blockquote>\n<p>Doing like this will eliminate a common problem, which is the trailing newline that can mess with the nest input. But it has another issue, which is if the line is longer than <code>bsize</code>. You can check that with <code>if(buffer[strlen(buffer)-1] != '\\n')</code>. If you want to remove the newline, you can do that with <code>buffer[strcspn(buffer, &quot;\\n&quot;)] = 0</code>.</p>\n<p>In general, I would advise to not expect the user to enter input in some weird format that you should parse to different variables. If you want to assign the variables <code>height</code> and <code>width</code>, don't ask for both at the same time. Allow the user to press enter between them. Also, this approach is very natural in one sense. You will never get the input from <code>stdin</code> until you hit enter, so why not always read the whole line? Of course this can still lead to issues if the line is longer than the buffer. Did I remember to mention that user input is clunky in C? :)</p>\n<p>To avoid problems with lines longer than the buffer you can use a function that automatically allocates a buffer of appropriate size, you can use <code>getline()</code>. The drawback is that you will need to <code>free</code> the result afterwards. This function is not guaranteed to exist by the standard, but POSIX has it. You could also implement your own, or find one on SO. <a href=\"https://stackoverflow.com/q/16870485/6699433\">How can I read an input string of unknown length?</a></p>\n<h1>Stepping up the game</h1>\n<p>If you're serious about creating programs in C with user input, I would recommend having a look at a library like <code>ncurses</code>. Because then you likely also want to create applications with some terminal graphics. Unfortunately, you will lose some portability if you do that, but it gives you far better control of user input. For instance, it gives you the ability to read a key press instantly instead of waiting for the user to press enter.</p>\n<h1>Interesting reading</h1>\n<p>Here is a rant about <code>scanf</code>: <a href=\"https://web.archive.org/web/20201112034702/http://sekrit.de/webdocs/c/beginners-guide-away-from-scanf.html\" rel=\"nofollow noreferrer\">https://web.archive.org/web/20201112034702/http://sekrit.de/webdocs/c/beginners-guide-away-from-scanf.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 25733, "user_id": 559737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5de249db6565b87a2699e131974268a?s=128&d=identicon&r=PG", "display_name": "Brendan", "link": "https://stackoverflow.com/users/559737/brendan"}, "is_accepted": false, "score": 8, "last_activity_date": 1571199110, "last_edit_date": 1571199110, "creation_date": 1571196395, "answer_id": 58405311, "question_id": 58403537, "link": "https://stackoverflow.com/questions/58403537/what-can-i-use-for-input-conversion-instead-of-scanf/58405311#58405311", "title": "What can I use for input conversion instead of scanf?", "body": "<p>Let's state the requirements of parsing as:</p>\n\n<ul>\n<li><p>valid input must be accepted (and converted into some other form)</p></li>\n<li><p>invalid input must be rejected</p></li>\n<li><p><strong>when any input is rejected, it is necessary to provide the user with a descriptive message that explains (in clear \"easily understood by normal people who are not programmers\" language) why it was rejected (so that people can figure out how to fix the problem)</strong></p></li>\n</ul>\n\n<p>To keep things very simple, lets consider parsing a single simple decimal integer (that was typed in by the user) and nothing else. Possible reasons for the user's input to be rejected are:</p>\n\n<ul>\n<li>the input contained unacceptable characters</li>\n<li>the input represents a number that is lower than the accepted minimum</li>\n<li>the input represents a number that is higher than the accepted maximum</li>\n<li>the input represents a number that has a non-zero fractional part</li>\n</ul>\n\n<p>Let's also define \"input contained unacceptable characters\" properly; and say that:</p>\n\n<ul>\n<li>leading whitespace and trailing whitespace will be ignored (e.g. \"<br>\n5    \" will be treated as \"5\")</li>\n<li>zero or one decimal point is allowed (e.g. \"1234.\" and \"1234.000\" are both treated the same as \"1234\")</li>\n<li>there must be at least one digit (e.g. \".\" is rejected)</li>\n<li>no more than one decimal point is allowed (e.g. \"1.2.3\" is rejected)</li>\n<li>commas that are not between digits will be rejected (e.g. \",1234\" is rejected)</li>\n<li>commas that are after a decimal point will be rejected (e.g. \"1234.000,000\" is rejected)</li>\n<li>commas that are after another comma are rejected (e.g. \"1,,234\" is rejected)</li>\n<li>all other commas will be ignored (e.g. \"1,234\" will be treated as \"1234\")</li>\n<li>a minus sign that is not the first non-whitespace character is rejected</li>\n<li>a positive sign that is not the first non-whitespace character is rejected</li>\n</ul>\n\n<p>From this we can determine that the following error messages are needed:</p>\n\n<ul>\n<li>\"Unknown character at start of input\"</li>\n<li>\"Unknown character at end of input\"</li>\n<li>\"Unknown character in middle of input\"</li>\n<li>\"Number is too low (minimum is ....)\"</li>\n<li>\"Number is too high (maximum is ....)\"</li>\n<li>\"Number is not an integer\"</li>\n<li>\"Too many decimal points\"</li>\n<li>\"No decimal digits\"</li>\n<li>\"Bad comma at start of number\"</li>\n<li>\"Bad comma at end of number\"</li>\n<li>\"Bad comma in middle of number\"</li>\n<li>\"Bad comma after decimal point\"</li>\n</ul>\n\n<p>From this point we can see that a suitable function to convert a string into an integer would need to distinguish between very different types of errors; and that something like \"<code>scanf()</code>\" or \"<code>atoi()</code>\" or \"<code>strtoll()</code>\" is completely and utterly worthless because they fail to give you any indication of what was wrong with the input (and use a completely irrelevant and inappropriate definition of what is/isn't \"valid input\").</p>\n\n<p>Instead, lets start writing something that isn't useless:</p>\n\n<pre><code>char *convertStringToInteger(int *outValue, char *string, int minValue, int maxValue) {\n    return \"Code not implemented yet!\";\n}\n\nint main(int argc, char *argv[]) {\n    char *errorString;\n    int value;\n\n    if(argc &lt; 2) {\n        printf(\"ERROR: No command line argument.\\n\");\n        return EXIT_FAILURE;\n    }\n    errorString = convertStringToInteger(&amp;value, argv[1], -10, 2000);\n    if(errorString != NULL) {\n        printf(\"ERROR: %s\\n\", errorString);\n        return EXIT_FAILURE;\n    }\n    printf(\"SUCCESS: Your number is %d\\n\", value);\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p><strong>To meet the stated requirements; this <code>convertStringToInteger()</code> function is likely to end up being several hundred lines of code all by itself.</strong></p>\n\n<p>Now, this was just \"parsing a single simple decimal integer\". Imagine if you wanted to parse something complex; like a list of \"name, street address, phone number, email address\" structures; or maybe like a programming language. For these cases you might need to write thousands of lines of code to create a parse that isn't a crippled joke.</p>\n\n<p>In other words...</p>\n\n<blockquote>\n  <p>What can I use to parse input instead of scanf?</p>\n</blockquote>\n\n<p>Write (potentially thousands of lines) of code yourself, to suit your requirements.</p>\n"}, {"comments": [{"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1571243847, "post_id": 58405726, "comment_id": 103178552, "body": "Is there a good reason to write <code>sizeof (line)</code> rather than simply <code>sizeof line</code>?  The former makes it look like <code>line</code> is a type name!"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1571244497, "post_id": 58405726, "comment_id": 103178850, "body": "@TobySpeight A good reason? No, I doubt it.  The parentheses are my habit, because I can&#39;t be bothered to remember whether it&#39;s objects or type names they&#39;re required for, but many programmers leave them out when they can.  (To me it&#39;s a matter of personal preference and style, and a pretty minor one at that.)"}, {"owner": {"reputation": 90101, "user_id": 2509, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79ed928ca8b1ab9a637720bf0fb20732?s=128&d=identicon&r=PG&f=1", "display_name": "dmckee --- ex-moderator kitten", "link": "https://stackoverflow.com/users/2509/dmckee-ex-moderator-kitten"}, "edited": false, "score": 0, "creation_date": 1571245953, "post_id": 58405726, "comment_id": 103179511, "body": "+1 for using <code>sscanf</code> as a conversion engine but collecting (and possibly massaging) the input with a different tool. But maybe worth mentioning <code>getline</code> in taht context."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1571294644, "post_id": 58405726, "comment_id": 103194239, "body": "When you talk about &quot;<code>fscanf</code>&#39;s actual nuisances&quot;, do you mean <code>fgets</code>?  And nuisance #3 really irks me, especially given that <code>scanf</code> returns a useless pointer to the buffer rather than returning the number of characters input (which would make stripping off the newline much cleaner)."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1571299093, "post_id": 58405726, "comment_id": 103196412, "body": "Thanks for explanation of your <code>sizeof</code> style.  For me, remembering when you nee the parens is easy: I think of <code>(type)</code> as being like a cast without a value (because we&#39;re only interested in the type).  One other thing: you say that <code>strtok(line, &quot;\\n&quot;)</code> doesn&#39;t always work, but it&#39;s not obvious when it might not.  I&#39;m guessing you&#39;re thinking of the case where the line was longer than the buffer, so we have no newline, and <code>strtok()</code> returns null?  It&#39;s a real pity <code>fgets()</code> doesn&#39;t return a more useful value so we can know whether the newline is there or not."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1571299219, "post_id": 58405726, "comment_id": 103196478, "body": "I suppose one way to know whether the full line was read is to put a sentinel NUL at the end of the buffer, (at <code>line[(sizeof line) - 2]</code>).  If that&#39;s not a newline or NUL after reading, then we&#39;ve read a partial line."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1571309837, "post_id": 58405726, "comment_id": 103202563, "body": "@supercat I certainly did.  Fixed.  Thanks.  And #3 really annoys me, too.  (But when you talk about &quot;especially given that <code>scanf</code> returns&quot;, do you mean ... ? :-) )"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1571310205, "post_id": 58405726, "comment_id": 103202768, "body": "@TobySpeight I think I&#39;ve seen the <code>line[(sizeof line)-2]</code> trick suggested before.  (It&#39;d be &quot;a more efficient way to know whether the full line was read&quot;, of course, as we already have one way, albeit a less than perfectly efficient/convenient one.)"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1571310296, "post_id": 58405726, "comment_id": 103202821, "body": "@TobySpeight I didn&#39;t mention the <code>strtok</code> failure case because I don&#39;t remember it!  But there&#39;s another regular here on [c] -- perhaps chux -- who has mentioned it.  (Returning null isn&#39;t a problem, as we&#39;re ignoring the return value.)"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "reply_to_user": {"reputation": 90101, "user_id": 2509, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79ed928ca8b1ab9a637720bf0fb20732?s=128&d=identicon&r=PG&f=1", "display_name": "dmckee --- ex-moderator kitten", "link": "https://stackoverflow.com/users/2509/dmckee-ex-moderator-kitten"}, "edited": false, "score": 0, "creation_date": 1571310886, "post_id": 58405726, "comment_id": 103203169, "body": "@dmckee Meant to mention <code>getline</code>; thanks for the reminder."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1611610543, "post_id": 58405726, "comment_id": 116503141, "body": "@TobySpeight: <code>strtok(line, &quot;\\n&quot;);</code> does not work if the line has just a single <code>&#39;\\n&#39;</code> in it. This is a major problem! Furthermore <code>strtok()</code> has a side effect on a global hidden variable... Don&#39;t use this <i>tricky and bogus</i> way, and stay away from <code>strtok()</code> altogether."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1611663693, "post_id": 58405726, "comment_id": 116518146, "body": "@chqrlie Thank you very much for clarifying that, even over a year later, and I&#39;m sorry if I misremembered chux as you. :-)"}], "tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": false, "score": 9, "last_activity_date": 1611664509, "last_edit_date": 1611664509, "creation_date": 1571199701, "answer_id": 58405726, "question_id": 58403537, "link": "https://stackoverflow.com/questions/58403537/what-can-i-use-for-input-conversion-instead-of-scanf/58405726#58405726", "title": "What can I use for input conversion instead of scanf?", "body": "<p>In this answer I'm going to assume that you are reading and\ninterpreting <em>lines of text</em>.\nPerhaps you're prompting the user, who is typing something and\nhitting RETURN.  Or perhaps you're reading lines of structured\ntext from a data file of some kind.</p>\n<p>Since you're reading lines of text, it makes sense to organize\nyour code around a library function that reads, well, a line of\ntext.\nThe Standard function is <code>fgets()</code>, although there are others (including <a href=\"https://linux.die.net/man/3/getline\" rel=\"nofollow noreferrer\"><code>getline</code></a>).  And then the next step is to interpret\nthat line of text somehow.</p>\n<p>Here's the basic recipe for calling <code>fgets</code> to read a line of\ntext:</p>\n<pre><code>char line[512];\nprintf(&quot;type something:\\n&quot;);\nfgets(line, 512, stdin);\nprintf(&quot;you typed: %s&quot;, line);\n</code></pre>\n<p>This simply reads in one line of text and prints it back out.\nAs written it has a couple of limitations, which we'll get to in\na minute.  It also has a very great feature: that number 512 we\npassed as the second argument to <code>fgets</code> is the size of the array\n<code>line</code> we're asking <code>fgets</code> to read into.  This fact -- that we can\ntell <code>fgets</code> how much it's allowed to read -- means that we can\nbe sure that <code>fgets</code> won't overflow the array by reading too much\ninto it.</p>\n<p>So now we know how to read a line of text, but what if we really\nwanted to read an integer, or a floating-point number, or a\nsingle character, or a single word?  (That is, what if the\n<code>scanf</code> call we're trying to improve on had been using a format\nspecifier like <code>%d</code>, <code>%f</code>, <code>%c</code>, or <code>%s</code>?)</p>\n<p>It's easy to reinterpret a line of text -- a string -- as any of these things.\nTo convert a string to an integer, the simplest (though\nimperfect) way to do it is to call <code>atoi()</code>.\nTo convert to a floating-point number, there's <code>atof()</code>.\n(And there are also better ways, as we'll see in a minute.)\nHere's a very simple example:</p>\n<pre><code>printf(&quot;type an integer:\\n&quot;);\nfgets(line, 512, stdin);\nint i = atoi(line);\nprintf(&quot;type a floating-point number:\\n&quot;);\nfgets(line, 512, stdin);\nfloat f = atof(line);\nprintf(&quot;you typed %d and %f\\n&quot;, i, f);\n</code></pre>\n<p>If you wanted the user to type a single character (perhaps <code>y</code> or\n<code>n</code> as a yes/no response), you can literally just grab the first\ncharacter of the line, like this:</p>\n<pre><code>printf(&quot;type a character:\\n&quot;);\nfgets(line, 512, stdin);\nchar c = line[0];\nprintf(&quot;you typed %c\\n&quot;, c);\n</code></pre>\n<p>(This ignores, of course, the possibility that the user typed a\nmulti-character response; it quietly ignores any extra characters\nthat were typed.)</p>\n<p>Finally, if you wanted the user to type a string definitely <em>not</em> containing\nwhitespace, if you wanted to treat the input line</p>\n<pre><code>hello world!\n</code></pre>\n<p>as the string <code>&quot;hello&quot;</code> followed by something else (which is what\nthe <code>scanf</code> format <code>%s</code> would have done), well, in that case, I\nfibbed a little, it's not quite so easy to reinterpret the line\nin that way, after all, so the answer to that part of the question will have\nto wait for a bit.</p>\n<p>But first I want to go back to three things I skipped over.</p>\n<p>(1) We've been calling</p>\n<pre><code>fgets(line, 512, stdin);\n</code></pre>\n<p>to read into the array <code>line</code>, and where 512 is the size of the\narray <code>line</code> so <code>fgets</code> knows not to overflow it.  But to make\nsure that 512 is the right number (especially, to check if maybe\nsomeone tweaked the program to change the size), you have to read\nback to wherever <code>line</code> was declared.  That's a nuisance, so\nthere are two much better ways to keep the sizes in sync.\nYou could, (a) use the preprocessor to make a name for the size:</p>\n<pre><code>#define MAXLINE 512\nchar line[MAXLINE];\nfgets(line, MAXLINE, stdin);\n</code></pre>\n<p>Or, (b) use C's <code>sizeof</code> operator:</p>\n<pre><code>fgets(line, sizeof(line), stdin);\n</code></pre>\n<p>(2) The second problem is that we haven't been checking for\nerror.  When you're reading input, you should <em>always</em> check for\nthe possibility of error.  If for whatever reason <code>fgets</code> can't\nread the line of text you asked it to, it indicates this by\nreturning a null pointer.  So we should have been doing things like</p>\n<pre><code>printf(&quot;type something:\\n&quot;);\nif(fgets(line, 512, stdin) == NULL) {\n    printf(&quot;Well, never mind, then.\\n&quot;);\n    exit(1);\n}\n</code></pre>\n<p>Finally, there's the issue that in order to read a line of text,\n<code>fgets</code> reads characters and fills them into your array until it\nfinds the <code>\\n</code> character that terminates the line, <em>and it fills\nthe <code>\\n</code> character into your array, too</em>.  You can see this if\nyou modify our earlier example slightly:</p>\n<pre><code>printf(&quot;you typed: \\&quot;%s\\&quot;\\n&quot;, line);\n</code></pre>\n<p>If I run this and type &quot;Steve&quot; when it prompts me, it prints out</p>\n<pre><code>you typed: &quot;Steve\n&quot;\n</code></pre>\n<p>That <code>&quot;</code> on the second line is because the string it read and\nprinted back out was actually <code>&quot;Steve\\n&quot;</code>.</p>\n<p>Sometimes that extra newline doesn't matter (like when we called\n<code>atoi</code> or <code>atof</code>, since they both ignore any extra non-numeric\ninput after the number), but sometimes it matters a lot.  So\noften we'll want to strip that newline off.  There are several\nways to do that, which I'll get to in a minute.  (I know I've been\nsaying that a lot.  But I will get back to all those things, I promise.)</p>\n<p>At this point, you may be thinking: &quot;I thought you said <code>scanf</code>\nwas no good, and this other way would be so much better.\nBut <code>fgets</code> is starting to look like a nuisance.\nCalling <code>scanf</code> was <em>so easy</em>!  Can't I keep using it?&quot;</p>\n<p>Sure, you can keep using <code>scanf</code>, if you want.  (And for <em>really</em>\nsimple things, in some ways it is simpler.)  But, please, don't\ncome crying to me when it fails you due to one of its 17 quirks\nand foibles, or goes into an infinite loop because of input your\ndidn't expect, or when you can't figure out how to use it to do\nsomething more complicated.  And let's take a look at <code>fgets</code>'s\nactual nuisances:</p>\n<ol>\n<li><p>You always have to specify the array size.  Well, of course,\nthat's not a nuisance at all -- that's a feature, because buffer\noverflow is a Really Bad Thing.</p>\n</li>\n<li><p>You have to check the return value.  Actually, that's a wash,\nbecause to use <code>scanf</code> correctly, you have to check its return\nvalue, too.</p>\n</li>\n<li><p>You have to strip the <code>\\n</code> back off.  This is, I admit, a true\nnuisance.  I wish there were a Standard function I could point\nyou to that didn't have this little problem.  (Please nobody\nbring up <code>gets</code>.)  But compared to <code>scanf's</code> 17 different\nnuisances, I'll take this one nuisance of <code>fgets</code> any day.</p>\n</li>\n</ol>\n<p>So how <em>do</em> you strip that newline?  There are many ways:</p>\n<p>(a) Obvious way:</p>\n<pre><code>char *p = strchr(line, '\\n');\nif(p != NULL) *p = '\\0';\n</code></pre>\n<p>(b) Tricky &amp; compact way:</p>\n<pre><code>strtok(line, &quot;\\n&quot;);\n</code></pre>\n<p>Unfortunately this doesn't work quite right on empty lines.</p>\n<p>(c) Another compact and mildly obscure way:</p>\n<pre><code>line[strcspn(line, &quot;\\n&quot;)] = '\\0';\n</code></pre>\n<p>And there are other ways as well.  Me, I always just use (a), since it's simple &amp; obvious, if less than concise.\nSee <a href=\"https://stackoverflow.com/questions/2693776/removing-trailing-newline-character-from-fgets-input\">this question</a>, or <a href=\"https://stackoverflow.com/questions/65893145/why-should-strtokline-n-not-be-used-to-strip-the-newline-left-by-fgets\">this question</a>, for more (much more) on stripping the <code>\\n</code> from what <code>fgets</code> gives you.</p>\n<p>And now that that's out of the way, we can get back to another\nthing I skipped over: the imperfections of <code>atoi()</code> and <code>atof()</code>.\nThe problem with those is they don't give you any useful\nindication of success of success or failure: they quietly ignore\ntrailing nonnumeric input, and they quietly return 0 if there's\nno numeric input at all.  The preferred alternatives -- which\nalso have certain other advantages -- are <code>strtol</code> and <code>strtod</code>.\n<code>strtol</code> also lets you use a base other than 10, meaning you can\nget the effect of (among other things) <code>%o</code> or <code>%x</code> with <code>scanf</code>.\nBut showing how to use these functions correctly is a story in itself,\nand would be too much of a distraction from what is already turning\ninto a pretty fragmented narrative, so I'm not going to say\nanything more about them now.</p>\n<p>The rest of the main narrative concerns input you might be trying\nto parse that's more complicated than just a single number or\ncharacter.  What if you want to read a line containing two\nnumbers, or multiple whitespace-separated words, or specific\nframing punctuation?  That's where things get interesting, and\nwhere things were probably getting complicated if you were trying\nto do things using <code>scanf</code>, and where there are vastly more\noptions now that you've cleanly read one line of text using <code>fgets</code>,\nalthough the full story on all those options could probably fill\na book, so we're only going to be able to scratch the surface here.</p>\n<ol>\n<li><p>My favorite technique is to break the line up into\nwhitespace-separated &quot;words&quot;, then do something further with each\n&quot;word&quot;.  One principal Standard function for doing this is\n<code>strtok</code> (which also has its issues, and which also rates a whole\nseparate discussion).  My own preference is a dedicated function\nfor constructing an array of pointers to each broken-apart\n&quot;word&quot;, a function I describe in\n<a href=\"https://www.eskimo.com/%7Escs/cclass/notes/sx10h.html\" rel=\"nofollow noreferrer\">these course notes</a>.\nAt any rate, once you've got &quot;words&quot;, you can further process\neach one, perhaps with the same <code>atoi</code>/<code>atof</code>/<code>strtol</code>/<code>strtod</code>\nfunctions we've already looked at.</p>\n</li>\n<li><p>Paradoxically, even though we've been spending a fair amount of\ntime and effort here figuring out how to move away from <code>scanf</code>,\nanother fine way to deal with the line of text we just read with\n<code>fgets</code> is to pass it to <code>sscanf</code>.  In this way, you end up with\nmost of the advantages of <code>scanf</code>, but without most of the\ndisadvantages.</p>\n</li>\n<li><p>If your input syntax is particularly complicated, it might be appropriate to use a &quot;regexp&quot; library to parse it.</p>\n</li>\n<li><p>Finally, you can use whatever <em>ad hoc</em> parsing solutions suit\nyou.  You can move through the line a character at a time with a\n<code>char *</code> pointer checking for characters you expect.  Or you can\nsearch for specific characters using functions like <code>strchr</code> or <code>strrchr</code>,\nor <code>strspn</code> or <code>strcspn</code>, or <code>strpbrk</code>.  Or you can parse/convert\nand skip over groups of digit characters using the <code>strtol</code> or\n<code>strtod</code> functions that we skipped over earlier.</p>\n</li>\n</ol>\n<p>There's obviously much more that could be said, but hopefully\nthis introduction will get you started.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 9, "last_activity_date": 1571200093, "creation_date": 1571200093, "answer_id": 58405772, "question_id": 58403537, "link": "https://stackoverflow.com/questions/58403537/what-can-i-use-for-input-conversion-instead-of-scanf/58405772#58405772", "title": "What can I use for input conversion instead of scanf?", "body": "<blockquote>\n  <p>What can I use to parse input instead of scanf?</p>\n</blockquote>\n\n<p>Instead of <code>scanf(some_format, ...)</code>, consider <code>fgets()</code> with <code>sscanf(buffer, some_format_and %n, ...)</code></p>\n\n<p>By using <code>\" %n\"</code>, code can simply detect if <em>all</em> the format was successfully scanned and that no extra non-white-space junk was at the end.</p>\n\n<pre><code>// scanf(\"%d %f fred\", &amp;some_int, &amp;some_float);\n#define EXPECTED_LINE_MAX 100\nchar buffer[EXPECTED_LINE_MAX * 2];  // Suggest 2x, no real need to be stingy.\n\nif (fgets(buffer, sizeof buffer, stdin)) {\n  int n = 0;\n  // add -------------&gt;    \" %n\" \n  sscanf(buffer, \"%d %f fred %n\", &amp;some_int, &amp;some_float, &amp;n);\n  // Did scan complete, and to the end?\n  if (n &gt; 0 &amp;&amp; buffer[n] == '\\0') {\n    // success, use `some_int, some_float`\n  } else {\n    ; // Report bad input and handle desired.\n  }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 1, "creation_date": 1571345334, "post_id": 58414919, "comment_id": 103220735, "body": "A finite state machine may be overkill; easier ways to detect overflow in conversions (such as checking if <code>errno == EOVERFLOW</code> after using <code>strtoll</code>) are possible."}, {"owner": {"reputation": 215, "user_id": 4406754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/280c38f4cc343f0f3be19b35d2195c91?s=128&d=identicon&r=PG&f=1", "display_name": "jamesqf", "link": "https://stackoverflow.com/users/4406754/jamesqf"}, "edited": false, "score": 1, "creation_date": 1571366375, "post_id": 58414919, "comment_id": 103225536, "body": "Why would you code your own finite state machine, when flex makes writing them trivially simple?"}], "tags": [], "owner": {"reputation": 1, "user_id": 12226978, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/c9c9c02c05c8913372c1cddea9d09a55?s=128&d=identicon&r=PG", "display_name": "PMar", "link": "https://stackoverflow.com/users/12226978/pmar"}, "is_accepted": false, "score": -6, "last_activity_date": 1571323303, "last_edit_date": 1571323303, "creation_date": 1571233683, "answer_id": 58414919, "question_id": 58403537, "link": "https://stackoverflow.com/questions/58403537/what-can-i-use-for-input-conversion-instead-of-scanf/58414919#58414919", "title": "What can I use for input conversion instead of scanf?", "body": "<p>Other answers give the right low-level details, so I'll limit myself to a higher-level: First, analyse <em>what you expect</em> each input line to look like.  Try to describe the input with a formal syntax - with luck, you will find it can be described using a <em>regular grammar</em>, or at least a <em>context-free grammar</em>.  If a regular grammar suffices, then you can code up a <em>finite-state machine</em> which recognizes and interprets each command-line one character at a time.  Your code will then read a line (as explained in other replies), then scan the chars in the buffer through the state-machine.  At certain states you stop and convert the substring scanned thus far to a number or whatever.  You can probably 'roll your own' if it is this simple; if you find you require a full context-free grammar you are better off figuring out how to use existing parsing tools (re: <code>lex</code> and <code>yacc</code> or their variants).</p>\n"}, {"tags": [], "owner": {"reputation": 215, "user_id": 4406754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/280c38f4cc343f0f3be19b35d2195c91?s=128&d=identicon&r=PG&f=1", "display_name": "jamesqf", "link": "https://stackoverflow.com/users/4406754/jamesqf"}, "is_accepted": false, "score": 5, "last_activity_date": 1571342028, "last_edit_date": 1571342028, "creation_date": 1571251443, "answer_id": 58419818, "question_id": 58403537, "link": "https://stackoverflow.com/questions/58403537/what-can-i-use-for-input-conversion-instead-of-scanf/58419818#58419818", "title": "What can I use for input conversion instead of scanf?", "body": "<p>Here is an example of using <code>flex</code> to scan a simple input, in this case a file of ASCII floating point numbers that might be in either US (<code>n,nnn.dd</code>) or European (<code>n.nnn,dd</code>) formats. This is just copied from a much larger program, so there may be some unresolved references:</p>\n\n<pre><code>/* This scanner reads a file of numbers, expecting one number per line.  It  */\n/* allows for the use of European-style comma as decimal point.              */\n\n%{\n  #include &lt;stdlib.h&gt;\n  #include &lt;stdio.h&gt;\n  #include &lt;string.h&gt;\n  #ifdef WINDOWS\n    #include &lt;io.h&gt;\n  #endif\n  #include \"Point.h\"\n\n  #define YY_NO_UNPUT\n  #define YY_DECL int f_lex (double *val)\n\n  double atofEuro (char *);\n%}\n\n%option prefix=\"f_\"\n%option nounput\n%option noinput\n\nEURONUM [-+]?[0-9]*[,]?[0-9]+([eE][+-]?[0-9]+)?\nNUMBER  [-+]?[0-9]*[\\.]?[0-9]+([eE][+-]?[0-9]+)?\nWS      [ \\t\\x0d]\n\n%%\n\n[!@#%&amp;*/].*\\n\n\n^{WS}*{EURONUM}{WS}*  { *val = atofEuro (yytext); return (1); }\n^{WS}*{NUMBER}{WS}*   { *val = atof (yytext); return (1); }\n\n[\\n]\n.\n\n\n%%\n\n/*------------------------------------------------------------------------*/\n\nint scan_f (FILE *in, double *vals, int max)\n{\n  double *val;\n  int npts, rc;\n\n  f_in = in;\n  val  = vals;\n  npts = 0;\n  while (npts &lt; max)\n  {\n    rc = f_lex (val);\n\n    if (rc == 0)\n      break;\n    npts++;\n    val++;\n  }\n\n  return (npts);\n}\n\n/*------------------------------------------------------------------------*/\n\nint f_wrap ()\n{\n  return (1);\n}\n</code></pre>\n"}], "owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14394, "favorite_count": 32, "answer_count": 8, "score": 134, "last_activity_date": 1614354555, "creation_date": 1571179756, "last_edit_date": 1571245587, "question_id": 58403537, "link": "https://stackoverflow.com/questions/58403537/what-can-i-use-for-input-conversion-instead-of-scanf", "title": "What can I use for input conversion instead of scanf?", "body": "<p>I have very frequently seen people discouraging others from using <code>scanf</code> and saying that there are better alternatives. However, all I end up seeing is either <em>\"don't use <code>scanf</code>\"</em> or <em>\"here's a correct format string\"</em>, and never any examples of the <em>\"better alternatives\"</em> mentioned.</p>\n\n<p>For example, let's take this snippet of code:</p>\n\n<pre><code>scanf(\"%c\", &amp;c);\n</code></pre>\n\n<p>This reads the whitespace that was left in the input stream after the last conversion. The usual suggested solution to this is to use:</p>\n\n<pre><code>scanf(\" %c\", &amp;c);\n</code></pre>\n\n<p>or to not use <code>scanf</code>.</p>\n\n<p>Since <code>scanf</code> is bad, what are some ANSI C options for converting input formats that <code>scanf</code> can usually handle (such as integers, floating-point numbers, and strings) without using <code>scanf</code>?</p>\n"}]