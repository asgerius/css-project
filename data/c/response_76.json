[{"tags": ["c", "visual-studio", "visual-studio-2015", "compiler-warnings"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1466637838, "post_id": 37979740, "comment_id": 63405342, "body": "It&#39;s not an &quot;error&quot;, it&#39;s a <a href=\"https://msdn.microsoft.com/en-us/library/26kb9fy0.aspx\" rel=\"nofollow noreferrer\">warning</a>. You get it because you raised your warning level from default level 3 to level 4, which causes the compiler to emit more warnings. It&#39;s supposed to be a remainder that you have some arguments that you don&#39;t use, but it can safely be ignored."}, {"owner": {"reputation": 2762, "user_id": 1248889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8470e41590061cde2fef88fed25ac823?s=128&d=identicon&r=PG", "display_name": "Jonathan Gawrych", "link": "https://stackoverflow.com/users/1248889/jonathan-gawrych"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1466637953, "post_id": 37979740, "comment_id": 63405363, "body": "You&#39;re right. I knew it was a warning, so I&#39;m not sure why I incorrectly titled it &quot;error.&quot; I&#39;ve edited the original question to match."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1466639092, "post_id": 37979740, "comment_id": 63405665, "body": "To eliminate: <code>(void)argc;</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1466639235, "post_id": 37979740, "comment_id": 63405708, "body": "... or <code>int main(void)</code>"}, {"owner": {"reputation": 5541, "user_id": 4367864, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/mIepQ.png?s=128&g=1", "display_name": "PC Luddite", "link": "https://stackoverflow.com/users/4367864/pc-luddite"}, "edited": false, "score": 1, "creation_date": 1466639700, "post_id": 37979740, "comment_id": 63405799, "body": "Visual Studio is first and foremost a C++ compiler. I don&#39;t think there&#39;s a way to configure it to show only C warnings. Honestly, although I love Windows and Visual Studio, C compliance is not one of their strengths (unless you&#39;re coding in straight ansi-c). I always use gcc as my main C compiler."}, {"owner": {"reputation": 8978, "user_id": 2223579, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/wQuP6.jpg?s=128&g=1", "display_name": "BlackMamba", "link": "https://stackoverflow.com/users/2223579/blackmamba"}, "edited": false, "score": 0, "creation_date": 1466644091, "post_id": 37979740, "comment_id": 63406876, "body": "If you know <code>C4100</code> is a c++ warning, you can use <code>#pragma warning(push)  #pragma warning(disable:C4100)</code> ?"}], "answers": [{"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": true, "score": 1, "last_activity_date": 1466652706, "creation_date": 1466652706, "answer_id": 37981855, "question_id": 37979740, "link": "https://stackoverflow.com/questions/37979740/only-report-c-warnings-in-visual-studio/37981855#37981855", "title": "Only report C warnings in visual studio", "body": "<p>this is a C warning.</p>\n\n<p>It is saying that you have a parameter to a function that is not actually used within the function.</p>\n\n<p>Note: if the function is <code>main()</code>, then never assume anything about the parameters, especially the number of command line parameters.</p>\n\n<p>This means do not reference anything beyond <code>argv[0]</code> without first checking <code>argc</code> to assure that parameter actually exists.</p>\n"}], "owner": {"reputation": 2762, "user_id": 1248889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8470e41590061cde2fef88fed25ac823?s=128&d=identicon&r=PG", "display_name": "Jonathan Gawrych", "link": "https://stackoverflow.com/users/1248889/jonathan-gawrych"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 37981855, "answer_count": 1, "score": 0, "last_activity_date": 1466652706, "creation_date": 1466637368, "last_edit_date": 1495541776, "question_id": 37979740, "link": "https://stackoverflow.com/questions/37979740/only-report-c-warnings-in-visual-studio", "title": "Only report C warnings in visual studio", "body": "<p>I'm current working in a C project with visual studio (community 2015). I'm attempted to remove warnings from my project. Currently I'm getting the following warning:</p>\n\n<blockquote>\n  <p>C4100: 'argc': unreferenced formal parameter</p>\n</blockquote>\n\n<p>Searching on why I get this warning I found this stack overflow question:<br>\n<a href=\"https://stackoverflow.com/q/12181852/1248889\">Why the unnamed parameter warning discrepency between C and C++?</a></p>\n\n<p>From what I understand, this is a C++ warning, not a C warning, even though my file ends with a <code>.c</code> extension. Is there any setting in visual studio that restricts building warnings to just C?</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 13948, "user_id": 283342, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e3ef6dbec3a443e7cda5b5624311ca08?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/283342/adrian"}, "edited": false, "score": 4, "creation_date": 1466635356, "post_id": 37979389, "comment_id": 63404633, "body": "<a href=\"https://en.wikipedia.org/wiki/Bitwise_operations_in_C#Bitwise_AND_.22.26.22\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/&hellip;</a>"}, {"owner": {"reputation": 481, "user_id": 5916150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c209005186a84dd1820b220d7b78527e?s=128&d=identicon&r=PG&f=1", "display_name": "Arif Burhan", "link": "https://stackoverflow.com/users/5916150/arif-burhan"}, "edited": false, "score": 0, "creation_date": 1466635482, "post_id": 37979389, "comment_id": 63404678, "body": "A single ampersand is a bitwise AND operator in Boolean Algebra, often used as a bit-mask.  If you are unfamiliar with these concepts see google or wikipedia to explain them."}, {"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 2, "creation_date": 1466635811, "post_id": 37979389, "comment_id": 63404769, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/24836647/what-is-use-of-and-operator-in-c-language\">what is use of &amp;(AND) operator in C language?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6501432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7539740e309c30dee7da44cb7f1f2995?s=128&d=identicon&r=PG&f=1", "display_name": "arharris", "link": "https://stackoverflow.com/users/6501432/arharris"}, "edited": false, "score": 0, "creation_date": 1466635863, "post_id": 37979426, "comment_id": 63404778, "body": "Thanks! That makes sense now."}], "tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": true, "score": 2, "last_activity_date": 1466635475, "creation_date": 1466635475, "answer_id": 37979426, "question_id": 37979389, "link": "https://stackoverflow.com/questions/37979389/use-of-ampersands-in-c-if-statement-criteria/37979426#37979426", "title": "Use of ampersands in C if statement criteria", "body": "<p>It means <a href=\"https://en.wikipedia.org/wiki/Bitwise_operations_in_C#Bitwise_AND_.22.26.22\" rel=\"nofollow\">bitwise-and</a>. The value it's testing is a set of bit flags that can have one or more set. It's checking whether the <code>L_DOY</code> flag specifically is set, because bitwise-and keeps bits that appear in both operands, so 0b0101 &amp; 0b0011 would produce 0b0001 (the only bit set in both operands). Since <code>L_DOY</code> is only a single bit, the low bit, it's checking if that bit is set in <code>function</code>; it doesn't care if other bits are set, or not.</p>\n"}], "owner": {"reputation": 13, "user_id": 6501432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7539740e309c30dee7da44cb7f1f2995?s=128&d=identicon&r=PG&f=1", "display_name": "arharris", "link": "https://stackoverflow.com/users/6501432/arharris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 442, "favorite_count": 0, "accepted_answer_id": 37979426, "answer_count": 1, "score": -2, "last_activity_date": 1466635839, "creation_date": 1466635244, "question_id": 37979389, "link": "https://stackoverflow.com/questions/37979389/use-of-ampersands-in-c-if-statement-criteria", "title": "Use of ampersands in C if statement criteria", "body": "<p>I'm new to C, and am trying to make sense of some code from NREL <a href=\"http://rredc.nrel.gov/solar/codesandalgorithms/solpos/solpos.c\" rel=\"nofollow\">available here</a> so that I may program a similar function in R. Here's the part of the code I cannot seem to figure out:</p>\n\n<pre><code>long S_solpos (struct posdata *pdat)\n{\n\nif ( pdat-&gt;function &amp; L_DOY )\n    doy2dom( pdat );     \n}\n</code></pre>\n\n<p>In particular, what is the evaluation criteria asking in:</p>\n\n<pre><code>if ( pdat-&gt;function &amp; L_DOY )\n</code></pre>\n\n<p>I understand that pdat is a is a pointer to the posdata structure, and from the header file I know that that \"function\" is a variable in the posdata structure which contains various integer codes:</p>\n\n<pre><code>struct posdata\n{\nint   function;\n</code></pre>\n\n<p>and that L_DOY can be one such function:</p>\n\n<pre><code>/*Define the function codes*/\n#define L_DOY    0x0001\n#define L_GEOM   0x0002\n#define L_ZENETR 0x0004\n</code></pre>\n\n<p>I would assume that the if statement is checking whether the function variable within pdat corresponds to the code for L_DOY. However, I am still very new to C, and have been unable to find any examples or explanations that utilize the ampersand in an if statement like this.</p>\n\n<p>Thanks in advance for any help.</p>\n"}, {"tags": ["c", "for-loop", "strcpy"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 3, "creation_date": 1466635123, "post_id": 37979349, "comment_id": 63404567, "body": "Out-of-bounds write, undefined behavior."}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 2, "creation_date": 1466635199, "post_id": 37979349, "comment_id": 63404594, "body": "You are writing 14 characters (13 plus zero byte) to an array that only holds 10.  You&#39;re corrupting the stack and everything after that point is undefined behavior.  Pay closer attention!"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1466635624, "post_id": 37979349, "comment_id": 63404724, "body": "It&#39;s not really valid to explain <i>undefined behaviour</i> but it can be satisfying if it fits. <i>Possibly</i> when you began to use <code>i</code> it corrupted the string, which due to insufficient length, had overflowed into <code>i</code>."}, {"owner": {"reputation": 40, "user_id": 6487125, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157045016185564/picture?type=large", "display_name": "rayzor", "link": "https://stackoverflow.com/users/6487125/rayzor"}, "edited": false, "score": 1, "creation_date": 1466636363, "post_id": 37979349, "comment_id": 63404932, "body": "I appreciate the reply Weather.. Like I said, it is copied directly from the book and the printed result (in the book) was fine. So an error in the book it is. Granted I would&#39;ve liked to have picked up on that myself!"}], "answers": [{"comments": [{"owner": {"reputation": 40, "user_id": 6487125, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157045016185564/picture?type=large", "display_name": "rayzor", "link": "https://stackoverflow.com/users/6487125/rayzor"}, "edited": false, "score": 0, "creation_date": 1466637074, "post_id": 37979626, "comment_id": 63405143, "body": "Great. Thanks for the informative answer Mirakurun!"}, {"owner": {"reputation": 3849, "user_id": 6008453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3f29d4474cf818b192e452474933ef4c?s=128&d=identicon&r=PG&f=1", "display_name": "Mirakurun", "link": "https://stackoverflow.com/users/6008453/mirakurun"}, "reply_to_user": {"reputation": 40, "user_id": 6487125, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157045016185564/picture?type=large", "display_name": "rayzor", "link": "https://stackoverflow.com/users/6487125/rayzor"}, "edited": false, "score": 0, "creation_date": 1466637258, "post_id": 37979626, "comment_id": 63405185, "body": "You&#39;re welcome. If you&#39;re satisfied with the answer, you can accept it so the question gets answered for the future reference."}], "tags": [], "owner": {"reputation": 3849, "user_id": 6008453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3f29d4474cf818b192e452474933ef4c?s=128&d=identicon&r=PG&f=1", "display_name": "Mirakurun", "link": "https://stackoverflow.com/users/6008453/mirakurun"}, "is_accepted": true, "score": 0, "last_activity_date": 1466637339, "last_edit_date": 1466637339, "creation_date": 1466636610, "answer_id": 37979626, "question_id": 37979349, "link": "https://stackoverflow.com/questions/37979349/string-not-printing-correctly-in-for-loop-but-printing-okay-before/37979626#37979626", "title": "string not printing correctly in for loop but printing okay before", "body": "<p>Welcome to <code>StackOverflow</code>. The name of the site is the answer to your question. You are trying to store 14 characters into a string which can hold up to 10. Everything that happens after that is undefined behavior. </p>\n\n<p>What is undefined behavior?</p>\n\n<blockquote>\n  <p>Undefined behaviour is undefined. It may crash your program. It may do\n  nothing at all. It may do exactly what you expected. It may summon\n  nasal demons. It may delete all your files. The compiler is free to\n  emit whatever code it pleases (or none at all) when it encounters\n  undefined behaviour.</p>\n  \n  <p>Any instance of undefined behaviour causes the entire program to be\n  undefined - not just the operation that is undefined, so the compiler\n  may do whatever it wants to any part of your program. Including time\n  travel.</p>\n</blockquote>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Buffer_overflow\" rel=\"nofollow\">Read this</a></p>\n"}], "owner": {"reputation": 40, "user_id": 6487125, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157045016185564/picture?type=large", "display_name": "rayzor", "link": "https://stackoverflow.com/users/6487125/rayzor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "closed_date": 1466637408, "accepted_answer_id": 37979626, "answer_count": 1, "score": -1, "last_activity_date": 1466637339, "creation_date": 1466634987, "question_id": 37979349, "link": "https://stackoverflow.com/questions/37979349/string-not-printing-correctly-in-for-loop-but-printing-okay-before", "closed_reason": "Not suitable for this site", "title": "string not printing correctly in for loop but printing okay before", "body": "<p>I am working out of a textbook learning c. One of the exercises is literally copying the code from the book to demonstrate using scanf. It gets user input for how many times something should be printed. Using a for loop to print out the string, the final characters of the string seem to have gotten jumbled up. Please see below and any help would be appreciated. So far I have tried removing the '\\n' to see if maybe it is causing the issue. I have printed out the string before the loop to see if it is an error with the string but it seems to work fine outside the loop. Code below: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(void)\n{\n    char message[10];\n    int count, i;\n\n    strcpy(message, \"Hello, World!\");\n\n    printf(\"Repeat how many times? \");\n    scanf(\"%d\", &amp;count);\n\n    printf(\"%s\\n\", message);\n\n    for(i = 0; i &lt; count; ++i)\n    {\n        printf(\"%3d - %s\\n\", i, message);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Results:</p>\n\n<pre><code>Repeat how many times? 3\nHello, World!\n  0 - Hello, Wor\n  1 - Hello, Wor\n  2 - Hello, Wor\n</code></pre>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c", "grayscale", "yuv", "intel-ipp", "nv12-nv21"], "comments": [{"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 1, "creation_date": 1466631254, "post_id": 37978479, "comment_id": 63403226, "body": "I would use the full Y range from 0..255 with no conversion, since there&#39;s strong precedent for this practice even if it goes against the original definition of luma."}, {"owner": {"reputation": 185, "user_id": 615430, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffff9a6eda96897189a5b7bc2f15689f?s=128&d=identicon&r=PG", "display_name": "apalopohapa", "link": "https://stackoverflow.com/users/615430/apalopohapa"}, "edited": false, "score": 0, "creation_date": 1486809571, "post_id": 37978479, "comment_id": 71513379, "body": "Are you sure Media SDK doesn&#39;t accept gray8? What about <code>MFX_CHROMAFORMAT_MONOCHROME</code> ?"}, {"owner": {"reputation": 12209, "user_id": 4926757, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-jsLBa8e0dT0/AAAAAAAAAAI/AAAAAAAAAEc/YqNqYlsSjrU/photo.jpg?sz=128", "display_name": "Rotem", "link": "https://stackoverflow.com/users/4926757/rotem"}, "reply_to_user": {"reputation": 185, "user_id": 615430, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffff9a6eda96897189a5b7bc2f15689f?s=128&d=identicon&r=PG", "display_name": "apalopohapa", "link": "https://stackoverflow.com/users/615430/apalopohapa"}, "edited": false, "score": 0, "creation_date": 1486820140, "post_id": 37978479, "comment_id": 71516363, "body": "@apalopohapa No, I am not sure... As I recall when I used H.264 video encoder, the only suppored format (without using VPP color space conversion) was NV12."}], "answers": [{"tags": [], "owner": {"reputation": 12209, "user_id": 4926757, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-jsLBa8e0dT0/AAAAAAAAAAI/AAAAAAAAAEc/YqNqYlsSjrU/photo.jpg?sz=128", "display_name": "Rotem", "link": "https://stackoverflow.com/users/4926757/rotem"}, "is_accepted": false, "score": 0, "last_activity_date": 1560438996, "last_edit_date": 1560438996, "creation_date": 1466974651, "answer_id": 38043110, "question_id": 37978479, "link": "https://stackoverflow.com/questions/37978479/how-to-convert-8-bits-grayscale-image-to-nv12-limited-range-color-space-using/38043110#38043110", "title": "How to convert 8 bits Grayscale image to NV12 (limited range) color space using IPP", "body": "<p>I am adding an answer to my own question.<br>\nI hope to see a better answer...  </p>\n\n<p>I found a solution using two IPP functions:</p>\n\n<ul>\n<li><a href=\"https://software.intel.com/en-us/node/502099\" rel=\"nofollow noreferrer\">ippsMulC_8u_Sfs</a> - Multiplies each element of a vector by a constant value.</li>\n<li><a href=\"https://software.intel.com/en-us/node/502095\" rel=\"nofollow noreferrer\">ippsAddC_8u_ISfs</a> - Adds a constant value to each element of a vector.</li>\n</ul>\n\n<p>I selected functions that uses fixed point math, for better performance.  </p>\n\n<ul>\n<li>Fixed point implementation of <code>0.859</code> scaling is performed by expanding, scaling and shifting. Example: <code>b = (a*scale + (1&lt;&lt;7)) &gt;&gt; 8;</code> [When <code>scale</code> = <code>(0.859)*2^8</code>].<br>\n<code>val</code> parameter to <code>ippsMulC_8u_Sfs</code> set to <code>round(0.859*2^8)</code> = <code>220</code>.<br>\n<code>scaleFactor</code> parameter to <code>ippsMulC_8u_Sfs</code> set to <code>8</code> (divide the scaled result by <code>2^8</code>).</li>\n</ul>\n\n<p>Code sample:  </p>\n\n<pre><code>void GrayscaleToNV12(const unsigned char I[],\n                     int image_width,\n                     int image_height,\n                     unsigned char J[])\n{\n    IppStatus ipp_status;\n    const int image_size = image_width*image_height;\n\n    unsigned char *UV = &amp;J[image_size]; //In NV12 format, UV plane starts below Y.\n\n    const Ipp8u expanded_scaling = (Ipp8u)(0.859 * 256.0 + 0.5);\n\n    //J[x] = (expanded_scaling * I[x] + 128u) &gt;&gt; 8u;\n    ipp_status = ippsMulC_8u_Sfs(I,                 //const Ipp8u* pSrc,\n                                 expanded_scaling,  //Ipp8u val,\n                                 J,                 //Ipp8u* pDst,\n                                 image_size,        //int len,\n                                 8);                //int scaleFactor);\n\n    //Check ipp_status, and handle errors...\n\n    //J[x] += 16;\n    //ippsAddC_8u_ISfs is deprecated, I used it to keep the code simple.\n    ipp_status = ippsAddC_8u_ISfs(16,           //Ipp8u val, \n                                  J,            //Ipp8u* pSrcDst, \n                                  image_size,   //int len, \n                                  0);           //int scaleFactor);\n\n    //Check ipp_status, and handle errors...\n\n    //2. Fill all UV plane with 128 value - \"gray color\".\n    memset(UV, 128, image_width*image_height/2);\n}\n</code></pre>\n\n<hr>\n\n<p><em>Out of topic note:</em><br>\nThere is a way to mark a video stream as \"full range\" (where <code>Y</code> range is [0, 255] instead of [<code>16</code>, <code>235</code>], and <code>U</code>,<code>V</code> range is also [0, 255]).<br>\nUsing the \"full range\" standard allows placing <code>I</code> in place of <code>Y</code> (i.e <strong>Y = I</strong>).  </p>\n\n<p>Marking the stream as \"full range\" using Intel Media SDK, is possible (but not well documented).<br>\nMarking H.264 stream as \"full range\" requires to add pointer to <code>mfxExtBuffer **ExtParam</code> list (in structure <code>mfxVideoParam</code>):<br>\nA pointer to structure of type <code>mfxExtVideoSignalInfo</code> should be added with the following values:    </p>\n\n<pre><code>typedef struct {\n    mfxExtBuffer Header; //MFX_EXTBUFF_VIDEO_SIGNAL_INFO and sizeof(mfxExtVideoSignalInfo)\n    mfxU16 VideoFormat; //Most likely 5 (\"Unspecified video format\")\n    mfxU16 VideoFullRange; //1 (video_full_range_flag is equal to 1)\n    mfxU16 ColourDescriptionPresent; //0 (description_present_flag equal to 0)\n    mfxU16 ColourPrimaries; //0 (no affect when ColourDescriptionPresent = 0)\n    mfxU16 TransferCharacteristics; //0 (no affect when ColourDescriptionPresent = 0)\n    mfxU16 MatrixCoefficients; //0 (no affect when ColourDescriptionPresent = 0)\n} mfxExtVideoSignalInfo; \n</code></pre>\n\n<p><code>VideoFullRange = 1</code> is the only relevant parameter of setting \"full range\" video, but we must fill the entire structure.  </p>\n"}], "owner": {"reputation": 12209, "user_id": 4926757, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-jsLBa8e0dT0/AAAAAAAAAAI/AAAAAAAAAEc/YqNqYlsSjrU/photo.jpg?sz=128", "display_name": "Rotem", "link": "https://stackoverflow.com/users/4926757/rotem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1473, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1562419181, "creation_date": 1466630524, "last_edit_date": 1562419181, "question_id": 37978479, "link": "https://stackoverflow.com/questions/37978479/how-to-convert-8-bits-grayscale-image-to-nv12-limited-range-color-space-using", "title": "How to convert 8 bits Grayscale image to NV12 (limited range) color space using IPP", "body": "<p>Video encoders like Intel\u00ae Media SDK do not accept 8 bits Grayscale image as input format.<br>\n8 bits <a href=\"https://en.wikipedia.org/wiki/Grayscale\" rel=\"nofollow noreferrer\">Grayscale</a> format applies one byte per pixel in range [0, 255].  </p>\n\n<p>8 bits YUV format in the context of the question applies <a href=\"https://en.wikipedia.org/wiki/YCbCr\" rel=\"nofollow noreferrer\">YCbCr</a> (BT.601 or BT.709).<br>\nAlthough there is a full range YUV standard, the commonly used format is \"limited range\" YUV, where range of Y is [16, 235] and range of U,V is [16, 240].  </p>\n\n<p><a href=\"http://www.fourcc.org/yuv.php#NV12\" rel=\"nofollow noreferrer\">NV12 format</a> is the common input format in this case.<br>\nNV12 format is YUV 4:2:0 format ordered in memory with a Y plane first, followed by packed chroma samples in interleaved UV plane:<br>\n<code>YYYYYY</code><br>\n<code>YYYYYY</code><br>\n<code>UVUVUV</code>  </p>\n\n<p><a href=\"https://i.stack.imgur.com/0xKZb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0xKZb.png\" alt=\"enter image description here\"></a></p>\n\n<p>The Grayscale image will be referred as \"I plane\":<br>\n<code>IIIIII</code><br>\n<code>IIIIII</code>  </p>\n\n<p><a href=\"https://i.stack.imgur.com/IbFbp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IbFbp.png\" alt=\"enter image description here\"></a></p>\n\n<p>Setting the UV plane is simple: Set all U,V elements to 128 value.</p>\n\n<p>But what about the Y plane?  </p>\n\n<p>In case of full range YUV, we can simply put \"I plane\" as Y plane (i.e Y = I).  </p>\n\n<p>In case of \"limited\" YUV format, a transformation is required:<br>\nSetting R=G=B in the conversion formula results: <strong>Y = round(I*0.859 + 16).</strong></p>\n\n<p><strong>What is the efficient way to do the above conversion using <a href=\"https://software.intel.com/en-us/intel-ipp\" rel=\"nofollow noreferrer\">IPP</a>?</strong></p>\n"}, {"tags": ["c", "gdb", "c99"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1466630729, "post_id": 37978429, "comment_id": 63402985, "body": "<code>gdb</code> is using the debug information stored in your executable file in compile time. C runtime... guess what? is getting some information in runtime. But in this case it <i>is</i> a bit weird, as your array is not truly variable-length, as <code>m</code> is known in compile-time."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1466633930, "post_id": 37978429, "comment_id": 63404214, "body": "There is not &quot;runtime environment&quot; in C. Just some startup code which is inactive while <code>main</code> runs."}, {"owner": {"reputation": 873, "user_id": 5767184, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Hcgqj.jpg?s=128&g=1", "display_name": "viuser", "link": "https://stackoverflow.com/users/5767184/viuser"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1466634328, "post_id": 37978429, "comment_id": 63404348, "body": "@Olaf: depends on the definition of &quot;runtime environment&quot;."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1466634470, "post_id": 37978429, "comment_id": 63404396, "body": "@wolf-revo-cats: If you have a different one than normal programmers, feel free to state it. And please add a reference where the standard states something about such an environment."}, {"owner": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "edited": false, "score": 0, "creation_date": 1466634743, "post_id": 37978429, "comment_id": 63404456, "body": "@wolf-revo-cats: Apparently, the GDB 7.7 might have a bug, see updated answer. This still might be plenty of other reasons such as different DWARF format."}, {"owner": {"reputation": 873, "user_id": 5767184, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Hcgqj.jpg?s=128&g=1", "display_name": "viuser", "link": "https://stackoverflow.com/users/5767184/viuser"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1466636132, "post_id": 37978429, "comment_id": 63404863, "body": "@Olaf: I don&#39;t think that I use it differently. See <a href=\"http://stackoverflow.com/a/3900802/5767184\">here</a> for a definition. And, yes, the term &quot;runtime environment&quot; does not occur in the C11 standard. But that&#39;s also true for stack, heap."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1466638487, "post_id": 37978429, "comment_id": 63405510, "body": "@wolf-revo-cats: The reason there is no stack or heap in the standard is exactly the same as there is no runtime in the standard: none is mandatory to implement the language. The standard library is no run-time, simply because is is not required to implement the standard either (yes, there are required headers, but those doe not provide any code)."}], "answers": [{"comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1466631934, "post_id": 37978772, "comment_id": 63403519, "body": "The OP states &quot;<i>with GDB we set a breakpoint at the return line and run</i>&quot;...Can you show the output of <code>whatis b</code> in your run?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1466632244, "post_id": 37978772, "comment_id": 63403651, "body": "Right. In general, memory for the VLA can&#39;t be allocated until execution reaches the declaration, because it can depend on values that haven&#39;t been computed until that point. (A compiler is free to do the allocation early and/or with a compile-time computed size if it&#39;s able to. In this case, the VLA can be folded into the stack frame for the function call.)"}, {"owner": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1466632328, "post_id": 37978772, "comment_id": 63403691, "body": "@Eugene Sh.: Sure. I attached the output and &quot;soften&quot; my answer."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1466632354, "post_id": 37978772, "comment_id": 63403696, "body": "So we see that GDB knows that it is VLA, but can&#39;t tell it&#39;s dimensions. Do you get the same output <i>before</i> the VLA declaration? I guess you just have a different version of the GDB with the OP.."}, {"owner": {"reputation": 873, "user_id": 5767184, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Hcgqj.jpg?s=128&g=1", "display_name": "viuser", "link": "https://stackoverflow.com/users/5767184/viuser"}, "edited": false, "score": 0, "creation_date": 1466632595, "post_id": 37978772, "comment_id": 63403786, "body": "What version of GDB do you use?"}, {"owner": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1466632724, "post_id": 37978772, "comment_id": 63403830, "body": "@EugeneSh: It still the same, with both variable indices."}, {"owner": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "reply_to_user": {"reputation": 873, "user_id": 5767184, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Hcgqj.jpg?s=128&g=1", "display_name": "viuser", "link": "https://stackoverflow.com/users/5767184/viuser"}, "edited": false, "score": 0, "creation_date": 1466632730, "post_id": 37978772, "comment_id": 63403834, "body": "@wolf-revo-cats: It&#39;s GNU gdb 7.2. Could you specify yours version in question? It may be a discrepacy between two versions indeed."}, {"owner": {"reputation": 873, "user_id": 5767184, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Hcgqj.jpg?s=128&g=1", "display_name": "viuser", "link": "https://stackoverflow.com/users/5767184/viuser"}, "edited": false, "score": 0, "creation_date": 1466633120, "post_id": 37978772, "comment_id": 63403956, "body": "I use GDB 7.7, I did everything exactly as you said. But <code>p b</code> still just gives me the <i>address</i> of <code>b</code>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1466633277, "post_id": 37978772, "comment_id": 63404001, "body": "It could be the way it is compiled aswell"}], "tags": [], "owner": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "is_accepted": true, "score": 5, "last_activity_date": 1466635690, "last_edit_date": 1466635690, "creation_date": 1466631739, "answer_id": 37978772, "question_id": 37978429, "link": "https://stackoverflow.com/questions/37978429/c99-variable-length-arrays-in-gdb/37978772#37978772", "title": "C99 Variable length arrays in GDB", "body": "<p>The most obvious explanation would be that you have entered into <code>main</code>, but apparently have not reached VLA declaration.</p>\n\n<p>To cover this, the C11 (N1570) \u00a76.2.4/7 <em>Storage durations of objects</em> states that (emphasis mine):</p>\n\n<blockquote>\n  <p>For such an object that does have a variable length array type, its\n  lifetime extends <strong>from the declaration</strong> of the object until execution of\n  the program leaves the scope of the declaration.35)</p>\n</blockquote>\n\n<p>The remedy is to step up into the declaration of VLA (tested  with gcc 4.4.7 and gdb 7.2):</p>\n\n<pre><code>Breakpoint 1, main () at so.c:1\n1   int main(void){\n(gdb) s\n2     int a[3][3] = {1};\n(gdb) s\n3     int m = 3;\n(gdb) s\n5     int b[m][m];\n(gdb) s\n6     x = sizeof(b);\n(gdb) p b\n$5 = {{-1207961984, 0, 1114472}, {6381016, 6319652, -1073745804}, {6416216, 14, 129100401}}\ngdb) whatis b\ntype = int [variable][variable]\n</code></pre>\n\n<p>It may be also a discrepancy between <code>gdb</code> versions or some sort of bug, though the latter is always the last thing to consider.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>I have build gdb 7.7 (CentOS 6.8 32-bit) from <a href=\"http://ftp.gnu.org/gnu/gdb/\" rel=\"nofollow\">source</a> and it displays the address of <code>b</code> instead of array content, so I confirm that issue is with this specific version and consider it has a potential bug or misfeature.</p>\n\n<p>On the other hand, the latest version 7.11 behaves correctly.</p>\n\n<h3><code>GDB 7.7</code></h3>\n\n<pre><code>[grzegorz@centos workspace]$ gdb-7.7/gdb/gdb -q a.out \nReading symbols from a.out...done.\n(gdb) b main\nBreakpoint 1 at 0x80483ab: file so.c, line 1.\n(gdb) r\nStarting program: /home/grzegorz/workspace/a.out \n\nBreakpoint 1, main () at so.c:1\n1   int main(void){\n(gdb) s\n2     int a[3][3] = {1};\n(gdb) s\n3     int m = 3;\n(gdb) \n5     int b[m][m];\n(gdb) \n6     x = sizeof(b);\n(gdb) p b\n$1 = 0xbffff0c0\n</code></pre>\n\n<h3><code>GDB 7.11</code></h3>\n\n<pre><code>[grzegorz@centos workspace]$ gdb-7.11/gdb/gdb -q a.out \nReading symbols from a.out...done.\n(gdb) b main\nBreakpoint 1 at 0x80483ab: file so.c, line 1.\n(gdb) r\nStarting program: /home/grzegorz/workspace/a.out \n\nBreakpoint 1, main () at so.c:1\n1   int main(void){\n(gdb) s\n2     int a[3][3] = {1};\n(gdb) \n3     int m = 3;\n(gdb) \n5     int b[m][m];\n(gdb) \n6     x = sizeof(b);\n(gdb) p b\n$1 = {{-1207961984, 0, 1114472}, {6381016, 6319652, -1073745676}, {6416216, 14, 129100401}}\n</code></pre>\n\n<p>Moral story: Either upgrade or downgrade your version of <code>gdb</code> to get correct behaviour</p>\n"}], "owner": {"reputation": 873, "user_id": 5767184, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Hcgqj.jpg?s=128&g=1", "display_name": "viuser", "link": "https://stackoverflow.com/users/5767184/viuser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 353, "favorite_count": 0, "accepted_answer_id": 37978772, "answer_count": 1, "score": 2, "last_activity_date": 1466635690, "creation_date": 1466630359, "question_id": 37978429, "link": "https://stackoverflow.com/questions/37978429/c99-variable-length-arrays-in-gdb", "title": "C99 Variable length arrays in GDB", "body": "<p>At this simple C99-Code:</p>\n\n<pre><code>int main(void){\n  int a[3][3] = {1};\n  int m = 3;\n  int x;\n  int b[m][m];\n  x = sizeof(b);\n  b[0][0] = -1;\n  return 0;\n}\n</code></pre>\n\n<p>with GDB we set a breakpoint at the return line and run. Now let's look at the following:</p>\n\n<pre><code>(gdb) p a\n$1 = {{1, 0, 0}, {0, 0, 0}, {0, 0, 0}}\n(gdb) p b\n$2 = 0x7fffffffe3a0\n(gdb) p sizeof(a)\n$3 = 36\n(gdb) p sizeof(b)\n$4 = 0\n(gdb) p x\n$5 = 36\n(gdb) whatis a\ntype = int [3][3]\n(gdb) whatis b\ntype = int [][]\n(gdb) \n</code></pre>\n\n<p>I wonder how this does happen. The C runtime environment assumes that the type of b is <code>int [3][3]</code> (because <code>sizeof(b)</code> is 36), but GDB does not.</p>\n"}, {"tags": ["c", "switch-statement", "do-while"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 4, "creation_date": 1466630351, "post_id": 37978328, "comment_id": 63402826, "body": "Could you do it for the highest but can&#39;t for the lowest? Hm."}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 2, "last_activity_date": 1466630336, "creation_date": 1466630336, "answer_id": 37978420, "question_id": 37978328, "link": "https://stackoverflow.com/questions/37978328/what-can-i-do-to-make-it-so-my-programs-keeps-the-lowest-number-entered-in-a-swi/37978420#37978420", "title": "What can I do to make it so my programs keeps the lowest number entered in a switch in a do while loop?", "body": "<p>You can just use:</p>\n\n<pre><code>if (num &lt; low) {\n    low = num;\n}\n</code></pre>\n\n<p>The only problem is the first number. Since you initialize <code>low</code> to <code>0</code>, any positive number the user enters will not be lower than this. You need to treat the first number specially. You can check the value of <code>j</code> for this.</p>\n\n<p>Then in your <code>A</code> case, test this variable.</p>\n\n<pre><code>case 'A':\n    printf(\"Enter an Integer\\n\");\n    scanf(\"%i\", &amp;num);\n    j++;\n    sum = num + sum;\n\n    if (j == 1 || num &gt; high)\n        high = num;\n    if (j == 1 || num &lt; low)\n        low = num;\n\n    PAUSE;\n    break;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1466807253, "creation_date": 1466807253, "answer_id": 38022962, "question_id": 37978328, "link": "https://stackoverflow.com/questions/37978328/what-can-i-do-to-make-it-so-my-programs-keeps-the-lowest-number-entered-in-a-swi/38022962#38022962", "title": "What can I do to make it so my programs keeps the lowest number entered in a switch in a do while loop?", "body": "<p>proper initialization is mandatory. </p>\n\n<p>Suggest: </p>\n\n<p><code>high</code> should be initialized to INT_MIN. </p>\n\n<p><code>low</code> should be initialized to INT_MAX. </p>\n\n<p>Note: Those macros are found in stdint.h. </p>\n\n<p>then after the two lines: </p>\n\n<pre><code>if (num &gt; high) \n    high = num; \n</code></pre>\n\n<p>insert the two lines: </p>\n\n<pre><code>if(num &lt; low) \n    low = num;\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 6369189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f083b19973fc26f54eea4edd174546f5?s=128&d=identicon&r=PG&f=1", "display_name": "Pastelitos Slim", "link": "https://stackoverflow.com/users/6369189/pastelitos-slim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 37978420, "answer_count": 2, "score": 0, "last_activity_date": 1466807253, "creation_date": 1466630029, "question_id": 37978328, "link": "https://stackoverflow.com/questions/37978328/what-can-i-do-to-make-it-so-my-programs-keeps-the-lowest-number-entered-in-a-swi", "title": "What can I do to make it so my programs keeps the lowest number entered in a switch in a do while loop?", "body": "<p>I'm trying to get the numbers from the user, as many as they want to enter. In a menu. I have gotten everything I needed to do to work except for this lowest number thing. I'm not sure where to go from here. I don't know how I would get the number in the switch. </p>\n\n<pre><code>#define _CRT_SECURE_NO_WARNINGS\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#define PAUSE system(\"pause\")\n#define CLEAR system(\"cls\")\n\nmain() {\n    // Initialize variables\n    char choice;\n    int sum = 0;\n    int avg = 0;\n    int high = 0;\n    int low = 0;\n    int quit = 0;\n    int i = 0;\n    int num = 0;\n    int j = 0;\n    int prevNum;\n\n    do{\n        printf(\"What would you like to do\\n\"\n        \"A: enter an integer\\n\"\n        \"B: show sum\\n\" \n        \"C: Show average\\n\" \n        \"D: show Highest num\\n\" \n        \"E: Show lowest\\n\" \n        \"Q: quit\\n\");\n        scanf(\"%c\", &amp;choice);\n        CLEAR;\n\n    switch (choice) {\n    case 'A':\n        printf(\"Enter an Integer\\n\");\n        scanf(\"%i\", &amp;num);\n        j++;\n        sum = num + sum;\n\n        if (num &gt; high)\n            high = num;\n\n        PAUSE;\n        break;\n\n    case 'B':\n        printf(\"The sum of al numbers entered is %i\\n\", sum);\n        PAUSE;\n        break;\n\n    case 'C':\n        avg = sum / j;\n        printf(\"The average of all numbers entered is %i\\n\",avg);\n        PAUSE;\n        break;\n\n    case 'D':\n        printf(\"The Highest number entered is %i\\n\", high);\n        PAUSE;\n        break;\n\n    case 'E':\n\n        printf(\"The lowest number entered is %i\\n\", low);\n        PAUSE;\n        break;\n\n    case 'Q':\n        quit = 1;\n        break;\n\n\n    } // end switch\n\n } while (quit != 1);\n\nPAUSE;\n} // END MAIN\n</code></pre>\n"}, {"tags": ["c", "pointers", "struct"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 6469288, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6463f93c1ee17d72ccc4b7b01c74675f?s=128&d=identicon&r=PG&f=1", "display_name": "John Bauer", "link": "https://stackoverflow.com/users/6469288/john-bauer"}, "edited": false, "score": 0, "creation_date": 1466629136, "post_id": 37978013, "comment_id": 63402278, "body": "does that mean that <code>struct myStruct{ &#47;&#47;some data } *p;</code> is equivalent to <code>struct myStruct{ &#47;&#47;some data };</code>  followed by  <code>struct myStruct *p;</code> ?"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 3, "last_activity_date": 1466628948, "last_edit_date": 1466628948, "creation_date": 1466628591, "answer_id": 37978013, "question_id": 37977960, "link": "https://stackoverflow.com/questions/37977960/structure-definition-with-pointer/37978013#37978013", "title": "Structure definition with pointer", "body": "<p>In your code</p>\n\n<pre><code>struct myStruct{\n    //some data\n};\n</code></pre>\n\n<p>is the definition of the <code>struct</code>. There is no <em>variable</em> created with that data type.</p>\n\n<p>On the other hand,</p>\n\n<pre><code>struct myStruct{\n     //some data\n} *p;\n</code></pre>\n\n<p>is the definition of the <code>struct</code> as well as creating a variable <code>p</code> of type pointer-to-<code>struct</code>. After allocating memory to <code>p</code>, you can access the member variables using that pointer.</p>\n"}], "owner": {"reputation": 31, "user_id": 6469288, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6463f93c1ee17d72ccc4b7b01c74675f?s=128&d=identicon&r=PG&f=1", "display_name": "John Bauer", "link": "https://stackoverflow.com/users/6469288/john-bauer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 37978013, "answer_count": 1, "score": -2, "last_activity_date": 1466629202, "creation_date": 1466628368, "last_edit_date": 1466629202, "question_id": 37977960, "link": "https://stackoverflow.com/questions/37977960/structure-definition-with-pointer", "title": "Structure definition with pointer", "body": "<p>I'm practicing structures in C, and I come up with this doubt. Sometimes I see something like:</p>\n\n<pre><code>struct myStruct{\n     //some data\n} *p;\n</code></pre>\n\n<p>What does that pointer <code>p</code> means?</p>\n\n<p>How is that different from:</p>\n\n<pre><code>struct myStruct{\n    //some data\n};\n</code></pre>\n"}, {"tags": ["c", "bluetooth", "libusb-1.0", "hci"], "answers": [{"comments": [{"owner": {"reputation": 159, "user_id": 2468955, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/933dd5267a558fa998a8d339ea264aca?s=128&d=identicon&r=PG", "display_name": "Sandy", "link": "https://stackoverflow.com/users/2468955/sandy"}, "edited": false, "score": 0, "creation_date": 1467103644, "post_id": 38008893, "comment_id": 63580092, "body": "Thanks for information. I tried wit endpoint 0x00 and now I am able to write data (HCI commands) to connected device."}], "tags": [], "owner": {"reputation": 640, "user_id": 5546740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30a58700586445bfde9d07b64c6dd7f?s=128&d=identicon&r=PG&f=1", "display_name": "dryman", "link": "https://stackoverflow.com/users/5546740/dryman"}, "is_accepted": true, "score": 2, "last_activity_date": 1466756981, "creation_date": 1466756981, "answer_id": 38008893, "question_id": 37977806, "link": "https://stackoverflow.com/questions/37977806/writing-hci-command-to-usb-bt-dongle/38008893#38008893", "title": "Writing HCI command to USB BT Dongle", "body": "<p>Endpoint 0x00 is \"reserved\" for control transfer between host and device and as of the fact, that every device has to have this endpoint it has no endpoint descriptor. Althrough your host is using this endpoint to enumerate and configure your device you still have the possibility to use it for your communication. All you have to do is start a control transfer on the endpoint 0x00. You don't have to configure the device or claim an interface to do that but I recommend you do it anyway (may have certain advantages for speed and such).</p>\n"}], "owner": {"reputation": 159, "user_id": 2468955, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/933dd5267a558fa998a8d339ea264aca?s=128&d=identicon&r=PG", "display_name": "Sandy", "link": "https://stackoverflow.com/users/2468955/sandy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 741, "favorite_count": 1, "accepted_answer_id": 38008893, "answer_count": 1, "score": 0, "last_activity_date": 1466756981, "creation_date": 1466627706, "question_id": 37977806, "link": "https://stackoverflow.com/questions/37977806/writing-hci-command-to-usb-bt-dongle", "title": "Writing HCI command to USB BT Dongle", "body": "<p>My small project is to write HCI commands to Bluetooth USB dongle and get response for HCI commands.</p>\n\n<p>I could print all endpoints address of my USB Bluetooth dongle as below (using libusb). According to specification of the Bluetooth system Host Control Interface [Transport Layer], (section 2.1) endpoint address <code>0x00</code> is used for writing HCI commands. But I could not find endpoint address <code>0x00</code> in my Bluetooth dongle. </p>\n\n<pre><code>config[0]-&gt;interface[0]-&gt;altsetting[0]-&gt;endpoint[0]-&gt;bEndpointAddress=0x81 packetsize=16\nconfig[0]-&gt;interface[0]-&gt;altsetting[0]-&gt;endpoint[1]-&gt;bEndpointAddress=0x02 packetsize=64\nconfig[0]-&gt;interface[0]-&gt;altsetting[0]-&gt;endpoint[2]-&gt;bEndpointAddress=0x82 packetsize=64\nconfig[0]-&gt;interface[1]-&gt;altsetting[0]-&gt;endpoint[0]-&gt;bEndpointAddress=0x03 packetsize=0\nconfig[0]-&gt;interface[1]-&gt;altsetting[0]-&gt;endpoint[1]-&gt;bEndpointAddress=0x83 packetsize=0\nconfig[0]-&gt;interface[1]-&gt;altsetting[1]-&gt;endpoint[0]-&gt;bEndpointAddress=0x03 packetsize=9\nconfig[0]-&gt;interface[1]-&gt;altsetting[1]-&gt;endpoint[1]-&gt;bEndpointAddress=0x83 packetsize=9\nconfig[0]-&gt;interface[1]-&gt;altsetting[2]-&gt;endpoint[0]-&gt;bEndpointAddress=0x03 packetsize=17\nconfig[0]-&gt;interface[1]-&gt;altsetting[2]-&gt;endpoint[1]-&gt;bEndpointAddress=0x83 packetsize=17\nconfig[0]-&gt;interface[1]-&gt;altsetting[3]-&gt;endpoint[0]-&gt;bEndpointAddress=0x03 packetsize=25\nconfig[0]-&gt;interface[1]-&gt;altsetting[3]-&gt;endpoint[1]-&gt;bEndpointAddress=0x83 packetsize=25\nconfig[0]-&gt;interface[1]-&gt;altsetting[4]-&gt;endpoint[0]-&gt;bEndpointAddress=0x03 packetsize=33\nconfig[0]-&gt;interface[1]-&gt;altsetting[4]-&gt;endpoint[1]-&gt;bEndpointAddress=0x83 packetsize=33\nconfig[0]-&gt;interface[1]-&gt;altsetting[5]-&gt;endpoint[0]-&gt;bEndpointAddress=0x03 packetsize=49\nconfig[0]-&gt;interface[1]-&gt;altsetting[5]-&gt;endpoint[1]-&gt;bEndpointAddress=0x83 packetsize=49\n</code></pre>\n\n<ol>\n<li>Does this mean that, my Bluetooth dongle does not support sending HCI commands</li>\n<li>If yes, is there any alternative way to send HCI commands to my Bluetooth dongle</li>\n</ol>\n"}, {"tags": ["c", "backtracking"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1466628301, "post_id": 37977735, "comment_id": 63401866, "body": "You have some prints, so what do you see?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1466628314, "post_id": 37977735, "comment_id": 63401871, "body": "Meaningful variable and parameter names would go a long way toward making your code easy to understand."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1466628623, "post_id": 37977735, "comment_id": 63402020, "body": "Are you certain you are in an <i>infinite</i> loop, as opposed to simply a <i>long-running</i> loop?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1466628643, "post_id": 37977735, "comment_id": 63402031, "body": "The program prints a large amount of numbers which I did not wait to end. Are any solutions repeated? How many different paths are there in the exhaustive solution? <a href=\"http://www.borderschess.org/KTsimple.htm\" rel=\"nofollow noreferrer\">See this</a>"}, {"owner": {"reputation": 95, "user_id": 5031200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/733441419685d0d35ecbab84a3b04622?s=128&d=identicon&r=PG&f=1", "display_name": "tricoder", "link": "https://stackoverflow.com/users/5031200/tricoder"}, "edited": false, "score": 0, "creation_date": 1466628776, "post_id": 37977735, "comment_id": 63402093, "body": "I tried to trace the output , but its just going infinite and hard to trace. And I  will improve naming habit . Thanks for suggestion"}, {"owner": {"reputation": 95, "user_id": 5031200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/733441419685d0d35ecbab84a3b04622?s=128&d=identicon&r=PG&f=1", "display_name": "tricoder", "link": "https://stackoverflow.com/users/5031200/tricoder"}, "edited": false, "score": 0, "creation_date": 1466628852, "post_id": 37977735, "comment_id": 63402129, "body": "Yes I am sure I am in an infinite loop because i have used the x[] and y[] array same as some accepted answer ."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1466628997, "post_id": 37977735, "comment_id": 63402210, "body": "The code doesn&#39;t look like having any infinite loop (at least not obvious), so I would bet on a <i>very long</i> loop."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1466629232, "post_id": 37977735, "comment_id": 63402331, "body": "Ran for me and result is <code>1 16 7 26 11 14  :  34 25 12 15 6 27  :  17 2 33 8 13 10  :  32 35 24 21 28 5  :  23 18 3 30 9 20  :  36 31 22 19 4 29  : </code>  Try <code>n==5</code> <code>1 6 15 10 21  :  14 9 20 5 16  :  19 2 7 22 11  :  8 13 24 17 4  :  25 18 3 12 23  : </code>"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1466629261, "post_id": 37977735, "comment_id": 63402346, "body": "I am in no way seeing how the use of the <code>x</code> and <code>y</code> arrays bears on whether the program loops infinitely."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1466629481, "post_id": 37977735, "comment_id": 63402432, "body": "It ran for me, too."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1466629493, "post_id": 37977735, "comment_id": 63402437, "body": "As @chux: remove the two <code>printf</code> statements in <code>solvekt</code> and it solves almost immediately."}, {"owner": {"reputation": 95, "user_id": 5031200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/733441419685d0d35ecbab84a3b04622?s=128&d=identicon&r=PG&f=1", "display_name": "tricoder", "link": "https://stackoverflow.com/users/5031200/tricoder"}, "edited": false, "score": 0, "creation_date": 1466629662, "post_id": 37977735, "comment_id": 63402518, "body": "Got it now. Thanks n sorry for wasting everyone&#39;s time"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1466629860, "post_id": 37977735, "comment_id": 63402600, "body": "Iteration count = 248,169 for n=6. Iteration count = 8,250,733 for n=8.  Do not expect recursion depth to exceed <code>n*n</code>"}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1466630225, "post_id": 37978330, "comment_id": 63402755, "body": "With <code>n==5</code>, about 50x faster.  Start small and then walk up."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 3, "last_activity_date": 1466630038, "last_edit_date": 1495540729, "creation_date": 1466630038, "answer_id": 37978330, "question_id": 37977735, "link": "https://stackoverflow.com/questions/37977735/stuck-in-infinite-loop-in-knight-tour-backtracking/37978330#37978330", "title": "stuck in infinite loop in knight tour backtracking", "body": "<p>OP was impatient. Code is fine, just took a while.</p>\n\n<p>\"Are you certain you are in an infinite loop, as opposed to simply a long-running loop? \" <a href=\"https://stackoverflow.com/questions/37977735/stuck-in-infinite-loop-in-knight-tour-backtracking#comment63402020_37977735\">@John Bollinger</a> </p>\n\n<p>To run <em>faster</em>, omit debug prints  <a href=\"https://stackoverflow.com/questions/37977735/stuck-in-infinite-loop-in-knight-tour-backtracking#comment63402437_37977735\">@Weather Vane</a></p>\n"}], "owner": {"reputation": 95, "user_id": 5031200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/733441419685d0d35ecbab84a3b04622?s=128&d=identicon&r=PG&f=1", "display_name": "tricoder", "link": "https://stackoverflow.com/users/5031200/tricoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 37978330, "answer_count": 1, "score": 0, "last_activity_date": 1466630038, "creation_date": 1466627446, "question_id": 37977735, "link": "https://stackoverflow.com/questions/37977735/stuck-in-infinite-loop-in-knight-tour-backtracking", "title": "stuck in infinite loop in knight tour backtracking", "body": "<p>This code is stuck in an infinite loop in the knight tour problem which i am solving using backtracking. I have used <code>x[8] and y[8]</code> array to access possible moves in <code>8</code> directions. Also I have formed these <code>x</code> and <code>y</code> arrays same as an already solved answer. But still there is something I am missing and I cant understand what is going wrong.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint x[8] = {  2, 1, -1, -2, -2, -1,  1,  2 };\nint y[8] = {  1, 2,  2,  1, -1, -2, -2, -1 };\nint sol[100][100]={0};\nint isvalid(int i,int j,int n)\n{\n    if(i&gt;=0&amp;&amp;j&gt;=0&amp;&amp;i&lt;n&amp;&amp;j&lt;n)\n    {\n        if(sol[i][j]==0)\n        return 1;\n        else\n        return 0;\n    }\n    return 0;\n}\nint solvekt(int i,int j,int k,int n)\n{\n    printf(\"i=%d j=%d k=%d\\n\",i,j,k);\n    if(k==n*n+1)\n    return 1;\n    int m,i1,j1,ans=0;\n    for(m=0;m&lt;8;m++)\n    {\n        i1=i+x[m];\n        j1=j+y[m];\n        if(isvalid(i1,j1,n))\n        {\n            printf(\"i=%d j=%d i1=%d j1=%d k=%d\\n\",i,j,i1,j1,k);\n            sol[i1][j1]=k;\n            ans=solvekt(i1,j1,k+1,n);\n            if(ans)return 1;\n            else\n            sol[i1][j1]=0;\n         }\n    }\n    return 0;   \n }\nint main()\n{\n    int n=6,i,j;\n    sol[0][0]=1;\n    if(!solvekt(0,0,2,n))printf(\"not possible\\n\");\n    else\n    for(i=0;i&lt;n;i++)\n    {\n        for(j=0;j&lt;n;j++)\n        printf(\"%d \",sol[i][j]);\n        printf(\"\\n\");\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 777, "user_id": 6351637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cadf8318dd2fa53fc88c9adaa5b3e07b?s=128&d=identicon&r=PG&f=1", "display_name": "s7amuser", "link": "https://stackoverflow.com/users/6351637/s7amuser"}, "edited": false, "score": 3, "creation_date": 1466627465, "post_id": 37977697, "comment_id": 63401474, "body": "Try replacing the <code>-I&#47;opt&#47;X11&#47;include</code> and <code>xrna</code>, i.e. <code>&#47;usr&#47;bin&#47;gcc -g -o xrna -I&#47;opt&#47;X11&#47;include  xrna.o ...</code>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1466637897, "post_id": 37977697, "comment_id": 63405352, "body": "The <code>-o</code> option is immediately followed by the output file name; you chose to have the output go to <code>-I&#47;opt&#47;X11&#47;include</code> (which is pretty eccentric as a file name), and you said that one of the files it should work with (as an input) is called <code>xrna</code>.  If you&#39;d already compiled the program, you&#39;d have a different error, but the command line would be just as wrong.  You need <code>-o xrna -I&#47;opt&#47;X11&#47;include</code> or <code>-I&#47;opt&#47;X11&#47;include -o xrna</code> or some other variant."}], "answers": [{"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 1, "last_activity_date": 1466653098, "creation_date": 1466653098, "answer_id": 37981911, "question_id": 37977697, "link": "https://stackoverflow.com/questions/37977697/clang-error-no-such-file-or-directory-error/37981911#37981911", "title": "clang: error: no such file or directory error", "body": "<p>When using the <code>-o</code> option in a link statement, the very next entry has to be the name of the file to output, NOT some library option.</p>\n"}], "owner": {"reputation": 177, "user_id": 3489985, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/9a5aa0db9fd86c13966ccbc9d8df3007?s=128&d=identicon&r=PG&f=1", "display_name": "user3489985", "link": "https://stackoverflow.com/users/3489985/user3489985"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3006, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466653098, "creation_date": 1466627338, "last_edit_date": 1466627493, "question_id": 37977697, "link": "https://stackoverflow.com/questions/37977697/clang-error-no-such-file-or-directory-error", "title": "clang: error: no such file or directory error", "body": "<p>When I compiling my project, compiler threw this message:</p>\n\n<pre><code>if ( . != \".\" ) /bin/mv math3dgraphics.o . \n\nar rcv ./mathtools.a ./mathtools.o ./matrix.o ./matrixtools.o ./pscmds.o ./pccurvecmds.o ./math3dgraphics.o\nr - ./mathtools.o\nr - ./matrix.o\nr - ./matrixtools.o\nr - ./pscmds.o\nr - ./pccurvecmds.o\nr - ./math3dgraphics.o\nranlib ./mathtools.a\n/usr/bin/gcc -g -o -I/opt/X11/include xrna xrna.o xrnainit.o xrnatools.o xrnadisplay.o xrnamenu.o xrnalabels.o xrnalw.o xrnasstr.o xrnapccurve.o xrnatube.o xrnassymbols.o xrnatstr.o xrnabasepair.o xrnacon.o xrnathred.o xrnacolorwidget.o xrnastred.o xrnainquire.o tdhrefnuc.o xrnabuttonmenu.o grplinebuttonlist.o grplinefnclist.o grpparallelogrambuttonlist.o grpparallelogramfnclist.o grptextbuttonlist.o grptextfnclist.o grptrianglebuttonlist.o grptrianglefnclist.o grparcbuttonlist.o grparcfnclist.o grparrowbuttonlist.o grparrowfnclist.o transformbuttonlist.o transformfnclist.o xrnaprintbuttonlist.o xrnaprintfnclist.o xrnagraphics.o xrnaneutronmap.o xrnaalign.o helixtools.o helixio.o helixarc.o ./botif.a ./mathtools.a -DMATHHFILE='\"./mathtools.h\"' -L/opt/X11/lib -lX11 -lm -lg -lc -I/opt/X11/include\nclang: error: no such file or directory: 'xrna'\n\nmake[1]: *** [install] Error 1\n\nmake: *** [xrna] Error 2\n</code></pre>\n\n<p>What get me confused is that xrna is the executable file supposed to be generated, but why compiler say it's missing?</p>\n"}, {"tags": ["c", "function", "ide", "code-folding"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1466626395, "post_id": 37977387, "comment_id": 63400954, "body": "In C you cannot nest functions. Also MSVC gives <i>error C2449: found &#39;{&#39; at file scope (missing function header?)</i>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1466626398, "post_id": 37977387, "comment_id": 63400957, "body": "I don&#39;t think you can group top-level function definitions in a block. Blocks can only be used inside functions."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1466626451, "post_id": 37977387, "comment_id": 63400979, "body": "Maybe you should just split your project into multiple source files. Put all these functions in one file, and then you can work on a different file."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1466626617, "post_id": 37977387, "comment_id": 63401050, "body": "I think it&#39;s a question about IDE/editor. Which one are you using?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1466634363, "post_id": 37977387, "comment_id": 63404363, "body": "@NicolasCaous: Why do you expect two different languages provide the same features/semantics?"}], "answers": [{"tags": [], "owner": {"reputation": 1580, "user_id": 4242830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/K9nui.jpg?s=128&g=1", "display_name": "ryancdotnet", "link": "https://stackoverflow.com/users/4242830/ryancdotnet"}, "is_accepted": false, "score": 1, "last_activity_date": 1466626602, "creation_date": 1466626602, "answer_id": 37977471, "question_id": 37977387, "link": "https://stackoverflow.com/questions/37977387/how-to-group-several-functions-to-collapse-in-c/37977471#37977471", "title": "how to group several functions to collapse in C", "body": "<p>The feature you are talking about is <strong>Code Folding</strong> or <strong>Code Collapsing</strong>, and it is an IDE feature only, not specifically a language feature.</p>\n\n<p>Some IDE's will allow you to collapse methods automatically without any code changes. Visual Studio for .NET will let you add <code>#region</code> and <code>#endregion</code> to make a collapsible section of code (such as a group of Utility functions).</p>\n\n<p>Check your IDE's documentation to see if it supports Code Folding.</p>\n\n<p>More information can be found here:</p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Code_folding\" rel=\"nofollow\">Wikipedia: Code Folding</a></p>\n"}, {"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1466626750, "post_id": 37977480, "comment_id": 63401119, "body": "The link does not show those functions contained in a <code>{</code>block<code>}</code>"}, {"owner": {"reputation": 871, "user_id": 4304844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vSjQh.jpg?s=128&g=1", "display_name": "tsandy", "link": "https://stackoverflow.com/users/4304844/tsandy"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1466627899, "post_id": 37977480, "comment_id": 63401677, "body": "The question&#39;s a bit vague, but I think that OP simply wants to visually hide/collapse some code."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1466628109, "post_id": 37977480, "comment_id": 63401763, "body": "Fair enough. I don&#39;t use an IDE but perhaps you could correct OP&#39;s example?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1466630040, "post_id": 37977480, "comment_id": 63402679, "body": "@WeatherVane What do you think &quot;clear out the useless things on the screen while I&#39;m coding&quot; means, if not about code folding in the editor/IDE?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1466630280, "post_id": 37977480, "comment_id": 63402785, "body": "@Barmar plainly from your earlier comments you did not catch it either."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1466630466, "post_id": 37977480, "comment_id": 63402876, "body": "@WeatherVane I certainly did, I just didn&#39;t know that IDEs have ways of collapsing without reference to code blocks."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1466630595, "post_id": 37977480, "comment_id": 63402929, "body": "@Barmar that&#39;s a QED"}], "tags": [], "owner": {"reputation": 871, "user_id": 4304844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vSjQh.jpg?s=128&g=1", "display_name": "tsandy", "link": "https://stackoverflow.com/users/4304844/tsandy"}, "is_accepted": false, "score": 0, "last_activity_date": 1466626623, "creation_date": 1466626623, "answer_id": 37977480, "question_id": 37977387, "link": "https://stackoverflow.com/questions/37977387/how-to-group-several-functions-to-collapse-in-c/37977480#37977480", "title": "how to group several functions to collapse in C", "body": "<p>You can try <code>#pragma region</code> and <code>#pragma endregion</code> as explained <a href=\"https://msdn.microsoft.com/en-us/library/b6xkz944.aspx\" rel=\"nofollow\">here</a>. It works in Visual Studio and might work in other IDEs.</p>\n"}], "owner": {"reputation": 529, "user_id": 6501050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fa61b4fefda26c90064236b71922cb7?s=128&d=identicon&r=PG", "display_name": "Nicolas Caous", "link": "https://stackoverflow.com/users/6501050/nicolas-caous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 242, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1466630059, "creation_date": 1466626255, "last_edit_date": 1466630059, "question_id": 37977387, "link": "https://stackoverflow.com/questions/37977387/how-to-group-several-functions-to-collapse-in-c", "title": "how to group several functions to collapse in C", "body": "<p>i want to group a few functions (like methods in java packages) to clear out the useless things on the screen while i'm coding, so i tried this in basic C :</p>\n\n<pre><code>{ //these are the functions i want to collapse\n    void test1()\n    {\n    }\n\n    void test2()\n    {\n    }\n\n    void test3()\n    {\n    }\n}\n</code></pre>\n\n<p>and it did not worked, how can i do it?</p>\n"}, {"tags": ["c", "list"], "comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1466625454, "post_id": 37977129, "comment_id": 63400438, "body": "What is the switch for <code>case 11:</code>?"}, {"owner": {"reputation": 39, "user_id": 6450956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7d2c2d78ebc675e23923a7aa4cfd46e?s=128&d=identicon&r=PG&f=1", "display_name": "ewazdomu", "link": "https://stackoverflow.com/users/6450956/ewazdomu"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1466625916, "post_id": 37977129, "comment_id": 63400693, "body": "switch(w) \t\t{ \t\t\t \tcase 11:             printf(&quot;List is : %d\\n&quot;, isEmpty(&amp;list1));             break; }"}, {"owner": {"reputation": 378, "user_id": 5589918, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/IghGz.jpg?s=128&g=1", "display_name": "Da Mike", "link": "https://stackoverflow.com/users/5589918/da-mike"}, "edited": false, "score": 0, "creation_date": 1466625946, "post_id": 37977129, "comment_id": 63400710, "body": "Does the code compile? Do you get a runtime error? Or the program runs but doesn&#39;t do what you want?"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1466626024, "post_id": 37977129, "comment_id": 63400748, "body": "Have you put a break point on the switch to check that <code>w</code> is 11?"}, {"owner": {"reputation": 39, "user_id": 6450956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7d2c2d78ebc675e23923a7aa4cfd46e?s=128&d=identicon&r=PG&f=1", "display_name": "ewazdomu", "link": "https://stackoverflow.com/users/6450956/ewazdomu"}, "edited": false, "score": 0, "creation_date": 1466626065, "post_id": 37977129, "comment_id": 63400767, "body": "It compiles, no error. Program runs but when i write 11 (11 in switch)  program doesnt write anyhing"}, {"owner": {"reputation": 39, "user_id": 6450956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7d2c2d78ebc675e23923a7aa4cfd46e?s=128&d=identicon&r=PG&f=1", "display_name": "ewazdomu", "link": "https://stackoverflow.com/users/6450956/ewazdomu"}, "edited": false, "score": 0, "creation_date": 1466626204, "post_id": 37977129, "comment_id": 63400834, "body": "I use scanf(&quot;%d&quot;, &amp;w); to get w ; I have cases from 1 to 10 and they work, but this 11 doesnt"}, {"owner": {"reputation": 378, "user_id": 5589918, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/IghGz.jpg?s=128&g=1", "display_name": "Da Mike", "link": "https://stackoverflow.com/users/5589918/da-mike"}, "edited": false, "score": 1, "creation_date": 1466626251, "post_id": 37977129, "comment_id": 63400864, "body": "Maybe something happens and the execution doesn&#39;t go into the <code>case 11</code>.  Try putting a <code>printf(&quot;test\\n&quot;);</code> inside <code>case 11</code> and see what happens"}, {"owner": {"reputation": 39, "user_id": 6450956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7d2c2d78ebc675e23923a7aa4cfd46e?s=128&d=identicon&r=PG&f=1", "display_name": "ewazdomu", "link": "https://stackoverflow.com/users/6450956/ewazdomu"}, "edited": false, "score": 0, "creation_date": 1466626518, "post_id": 37977129, "comment_id": 63400998, "body": "I put it in case 11 and it doesnt work. no result"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 2, "creation_date": 1466626611, "post_id": 37977129, "comment_id": 63401044, "body": "<a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>"}, {"owner": {"reputation": 378, "user_id": 5589918, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/IghGz.jpg?s=128&g=1", "display_name": "Da Mike", "link": "https://stackoverflow.com/users/5589918/da-mike"}, "edited": false, "score": 1, "creation_date": 1466626645, "post_id": 37977129, "comment_id": 63401067, "body": "Well then it seems the problem probably isn&#39;t in your list code. That, or somehow you&#39;re invoking undefined behavior. Either way I don&#39;t think I can help you further, unless you post more of your code."}, {"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 0, "creation_date": 1466628036, "post_id": 37977129, "comment_id": 63401729, "body": "Not an answer but you can replace isEmpty with <code>return (l-&gt;head == NULL &amp;&amp; l-&gt;tail == NULL)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1362, "user_id": 6386250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/brwvr.jpg?s=128&g=1", "display_name": "Dr.Haimovitz", "link": "https://stackoverflow.com/users/6386250/dr-haimovitz"}, "is_accepted": false, "score": 1, "last_activity_date": 1466641002, "last_edit_date": 1466641002, "creation_date": 1466626818, "answer_id": 37977539, "question_id": 37977129, "link": "https://stackoverflow.com/questions/37977129/c-doubly-linked-list-isempty/37977539#37977539", "title": "C - Doubly linked list (isEmpty)", "body": "<p><code>list1</code> is a type so:  <code>printf(\"List is : %d\\n\", isEmpty(&amp;list1));</code>\nis meaningless,</p>\n\n<p>Try:</p>\n\n<pre><code>list1 l1;\n.\n.\n.\ncase 11:\n    printf(\"List is : %d\\n\", isEmpty(&amp;l1));\n    break;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 39, "user_id": 6450956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7d2c2d78ebc675e23923a7aa4cfd46e?s=128&d=identicon&r=PG&f=1", "display_name": "ewazdomu", "link": "https://stackoverflow.com/users/6450956/ewazdomu"}, "is_accepted": false, "score": 0, "last_activity_date": 1466627564, "creation_date": 1466627564, "answer_id": 37977766, "question_id": 37977129, "link": "https://stackoverflow.com/questions/37977129/c-doubly-linked-list-isempty/37977766#37977766", "title": "C - Doubly linked list (isEmpty)", "body": "<p>It was working but this messsage was disappearing after some milliseconds. I added <code>system(\"pause\");</code> and its working now.</p>\n"}, {"tags": [], "owner": {"reputation": 46, "user_id": 6394808, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-9EyDuHMIByE/AAAAAAAAAAI/AAAAAAAAACA/PcrmC_zgW_A/photo.jpg?sz=128", "display_name": "Sunil Nale", "link": "https://stackoverflow.com/users/6394808/sunil-nale"}, "is_accepted": false, "score": 0, "last_activity_date": 1466676917, "last_edit_date": 1466676917, "creation_date": 1466663361, "answer_id": 37983825, "question_id": 37977129, "link": "https://stackoverflow.com/questions/37977129/c-doubly-linked-list-isempty/37983825#37983825", "title": "C - Doubly linked list (isEmpty)", "body": "<p>You passing wrong parameter to the function. you should pass paramater to isEmpty() such as isEmpty(struct list* l) or isEmpty(list1* l)</p>\n\n<pre><code>     int isEmpty(struct list *l)          \n     {\n       if(l-&gt;head== NULL &amp;&amp; l-&gt;tail== NULL)\n           return 1;\n       else\n           return 0;\n     }\n</code></pre>\n\n<p>call the function as </p>\n\n<pre><code>         isEmpty(list1)\n</code></pre>\n\n<p>it gives correct result. </p>\n"}], "owner": {"reputation": 39, "user_id": 6450956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7d2c2d78ebc675e23923a7aa4cfd46e?s=128&d=identicon&r=PG&f=1", "display_name": "ewazdomu", "link": "https://stackoverflow.com/users/6450956/ewazdomu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1172, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1466676917, "creation_date": 1466625297, "question_id": 37977129, "link": "https://stackoverflow.com/questions/37977129/c-doubly-linked-list-isempty", "title": "C - Doubly linked list (isEmpty)", "body": "<p>I have doubly linked list and Ive made a function to check whether the list is empty or not.</p>\n\n<p>Function code:</p>\n\n<pre><code>int isEmpty(list *l)\n{\n    if(l-&gt;head== NULL &amp;&amp; l-&gt;tail== NULL)\n        return 1;\n    else\n        return 0;\n}\n</code></pre>\n\n<p>List</p>\n\n<pre><code>typedef struct list\n{\n    struct element *head;\n    struct element *tail;\n}list1;\n</code></pre>\n\n<p>and Im trying to use this function but there is nothing when i open console</p>\n\n<pre><code>case 11:\n            printf(\"List is : %d\\n\", isEmpty(&amp;list1));\n            break;\n</code></pre>\n"}, {"tags": ["c", "linked-list", "singly-linked-list", "relocation"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1466626257, "post_id": 37977119, "comment_id": 63400868, "body": "Start by fixing your warnings. Then post the code <i>in your question</i>. Links can die (and in fact, some actually count on it), making the question useless for future readers."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1466627118, "post_id": 37977119, "comment_id": 63401294, "body": "Great, but <a href=\"http://pastebin.com/hzixMP7u\" rel=\"nofollow noreferrer\">the warnings (and actually, errors) still persist</a>. You need to turn up your warning levels to pedantic levels on your compiler and address <i>all</i> the issues identified. Even then there are some things that the compiler will <i>not</i> catch, the error in your <code>freeVideo</code>, for example, which due to incorrect initialization, will not free anything except the first two nodes. A <b>debugger</b> seems ideal for solving these issues, including your infinite loop, and frankly that&#39;s the next step after fixing your warnings/errors."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1466653482, "post_id": 37977119, "comment_id": 63409037, "body": "in general, the kind of problem you state would be solved in three steps.  1) find the desired node  2) removed the node from the linked list (but keep the pointer to the node) 3) insert the node at the desired location.  (be sure to allow for first node, last node and similar edge cases."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1466653605, "post_id": 37977119, "comment_id": 63409065, "body": "why have two structs for a simple linked list.  Just make a new field in the first struct that is <code>struct Frame *next;</code>  and modify the code to match"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1466653856, "post_id": 37977119, "comment_id": 63409142, "body": "when calling any of the heap memory allocation functions: 1) always check (!=NULL) the returned value to assure the operation was successful. 2) the returned value has type: <code>void*</code> so can be assigned to any pointer.  Casting just clutters the code, making it more difficult to understand, debug, maintain."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1466654077, "post_id": 37977119, "comment_id": 63409206, "body": "when calling any of the <code>scanf()</code> family of functions: 1) always check the returned value (not the parameter value) to assure the operation was successful.  2) when using the &#39;%s&#39; format specifier, always use a max-length modifier so the user cannot overrun the input buffer.  Note: the max-length modifier has to be one less than the actual length of the input field because <code>scanf()</code> will append a NUL byte to the input"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1466654328, "post_id": 37977119, "comment_id": 63409288, "body": "when calling the <code>calloc()</code> function, the first parameter (a <code>size_t</code>) is the number of items to allocate and the second parameter (also a <code>size_t</code>) is the size of each item.  Please read the man page for calloc, the apply that knowledge to all your calls to <code>calloc()</code>"}], "answers": [{"tags": [], "owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "is_accepted": false, "score": 0, "last_activity_date": 1468587697, "creation_date": 1468587697, "answer_id": 38396818, "question_id": 37977119, "link": "https://stackoverflow.com/questions/37977119/relocating-a-node-in-a-singly-linked-list-creates-infinite-loop/38396818#38396818", "title": "Relocating a Node in a Singly Linked List Creates Infinite Loop", "body": "<p>Your code at the end of <code>changePlacement()</code> doesn't account for the case of <code>oldNode</code> and <code>newNode</code> being adjacent to each other, i. e. e. g. <code>nodeAfterNewNode = newNode-&gt;next</code> being identical to <code>oldNode</code>. (Besides it doesn't account for the case of not finding the name.) It is far easier to just exchange the <code>frame</code> pointers; change</p>\n\n<pre><code>    nodeAfterNewNode = newNode-&gt;next; //temporal variable that stores the node after the new node\n    prevOldNode-&gt;next = oldNode-&gt;next;\n    newNode-&gt;next = oldNode;\n\n    oldNode-&gt;next = nodeAfterNewNode;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>    if (!oldNode) return;   // wanted node name not found\n    frame_t *f = oldNode-&gt;frame;\n    oldNode-&gt;frame = newNode-&gt;frame;\n    newNode-&gt;frame = f;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6111870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef6487129a1d66cdd9248c2137b4c7a7?s=128&d=identicon&r=PG&f=1", "display_name": "ilanDazanashvili", "link": "https://stackoverflow.com/users/6111870/ilandazanashvili"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1468587697, "creation_date": 1466625265, "last_edit_date": 1466627240, "question_id": 37977119, "link": "https://stackoverflow.com/questions/37977119/relocating-a-node-in-a-singly-linked-list-creates-infinite-loop", "title": "Relocating a Node in a Singly Linked List Creates Infinite Loop", "body": "<p>In my homework I was asked to relocate a specific node by his name field to specific index. I'm having trouble to figure out why is my list becomes an infinite list. The problem is in the function \"changePlacement\" <br/>Example: <br/>Given linked list : 1->2->3->4 <br/>Output : 1->3->3->3... <br/>Expected output : 1->3->2->4</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nstruct Frame\n{\n    char            *name;\n    unsigned int    duration;\n    char            *path;  // may change to FILE*\n};\ntypedef struct Frame frame_t;\n\nstruct Link\n{\n    frame_t *frame;\n    struct Link *next;\n};\ntypedef struct Link link_t;\n\nint listLen = 0;\nlink_t* lastNode = NULL;\n\nvoid addFrame(link_t** list);\nvoid frameData(frame_t* frame);\nvoid freeVideo(link_t* video);\nvoid showList(link_t* list);\nvoid freeNode(link_t* list);\nvoid changePlacement(link_t** list, int newIndex, char* name);\n\nint main(void)\n{\n    link_t* video = NULL;\n    lastNode = video;\n    if (!video)\n    {\n        perror(video);\n    }\n    addFrame(&amp;video);\n    addFrame(&amp;video);\n    addFrame(&amp;video);\n    addFrame(&amp;video);\n\n    showList(video);\n    changePlacement(&amp;video, 2, \"3\");\n    showList(video);\n    printf(\"\\n\");\n    freeVideo(&amp;video);\n\n    _flushall();\n    getchar();\n    return 0;\n}\n\n\n\nvoid addFrame( link_t** video)\n{\n    char strTemp[200] = { 0 };\n\n    link_t* newFrame = (link_t*) calloc(1, sizeof(link_t));\n    newFrame-&gt;frame = (frame_t*) malloc(sizeof(frame_t));\n\n    printf(\"                  *** Creating new frame ***\\n\");\n    printf(\"Please insert a frame path:\\n\");\n    scanf(\" %s\", &amp;strTemp);\n    newFrame-&gt;frame-&gt;path = (char*) calloc(strnlen(strTemp, 200) + 1, sizeof(char));\n    strncpy(newFrame-&gt;frame-&gt;path, strTemp, strnlen(strTemp, 200));\n\n    printf(\"Please insert frame duration(in miliseconds):\\n\");\n    scanf(\" %d\", &amp;(newFrame-&gt;frame-&gt;duration));\n\n    printf(\"Please choose a name for that frame:\\n\");\n    scanf(\" %s\", &amp;strTemp);\n    newFrame-&gt;frame-&gt;name = (char*) calloc(strnlen(strTemp, 200) + 1, sizeof(char));\n    strncpy(newFrame-&gt;frame-&gt;name, strTemp, strnlen(strTemp, 200));\n\n    if (!(*video))\n    {\n        (*video) = newFrame;\n    }\n    else\n    {\n        lastNode-&gt;next = newFrame;\n    }\n    lastNode = newFrame;\n\n\n    ++listLen;\n}\n\n\n\n\nvoid freeVideo(link_t** video)\n{\n    link_t* currNode = NULL;\n    int loop = 0;\n\n    for (; currNode; currNode = *video) // set curr to head, stop if list empty.\n    {\n        // advance head to next element.\n        freeNode(currNode);\n        (*video) = (*video)-&gt;next; // delete saved pointer.\n    }\n    freeNode((*video)-&gt;next);\n    freeNode((*video));\n\n\n}\n\n\nvoid showList(link_t* list)\n{\n    printf(\"\\n\\t|Name\\t\\t|    Duration   |     Path\\n\");\n    printf(\"\\t+++++++++++++++++++++++++++++++++++++++++++++++\\n\");\n    for (;list; list = list-&gt;next)\n    {\n        printf(\"\\t|%10s\\t|%10d\\t|\\t%s\\n\", list-&gt;frame-&gt;name, list-&gt;frame-&gt;duration, list-&gt;frame-&gt;path);\n        printf(\"\\t+++++++++++++++++++++++++++++++++++++++++++++++\\n\");\n    }\n}\n\nvoid freeNode(link_t* node)\n{\n    free(node-&gt;frame-&gt;name);\n    free(node-&gt;frame-&gt;path);\n    free(node-&gt;frame);\n    free(node);\n}\n\nvoid changePlacement(link_t** list, int newIndex, char* name)\n{\n    link_t *prevOldNode = (*list), *prevTemp = NULL, *oldNode = NULL, *newNode = NULL;\n    link_t *temp = (*list), *PrevNewNode = NULL, *nodeAfterNewNode = NULL;\n    int currIndex = 0, i = 0, flag = 0;\n\n    while ((temp-&gt;next))\n    {\n        ++currIndex;\n        if (!strcmp(temp-&gt;frame-&gt;name, name)) //looking for the wanted node\n        {\n            oldNode = temp;\n            prevOldNode = prevTemp;\n        }\n        if (currIndex == newIndex)\n        {\n            PrevNewNode = prevTemp;\n            newNode = temp;\n        }\n        prevTemp = temp;\n        temp = temp-&gt;next;\n    }\n    nodeAfterNewNode = newNode-&gt;next; //temporal variable that stores the node after the new node\n    prevOldNode-&gt;next = oldNode-&gt;next;\n    newNode-&gt;next = oldNode;\n\n    oldNode-&gt;next = nodeAfterNewNode;\n}\n</code></pre>\n\n<p>Do you have any ideas after looking on my code? any help would be blessed </p>\n"}, {"tags": ["c", "winapi", "unicode"], "comments": [{"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1466625121, "post_id": 37976710, "comment_id": 63400268, "body": "You don&#39;t have a real problem, all characters can be represented with 16 bits.  Some just need two of them, that will not trip up your code."}, {"owner": {"reputation": 6668, "user_id": 1197719, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/a11ff3ed53b29c71863d5e0f740e9c1d?s=128&d=identicon&r=PG", "display_name": "Andreas", "link": "https://stackoverflow.com/users/1197719/andreas"}, "reply_to_user": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1466625413, "post_id": 37976710, "comment_id": 63400414, "body": "But AFAIU wcslen() returns the count of characters in a TSTR, so if there is a character which needs 32 bit in the TSTR (i.e. two 16bit pairs), wcslen() will still only return 1 and this will mess up my pointer arithmetics in the code I posted above."}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1466625527, "post_id": 37976710, "comment_id": 63400480, "body": "You <i>really</i> need to try this for yourself to see that this is not the case.  wcslen() counts wchar_t, not codepoints.  Turning wchar_t into a codepoint that represents a single glyph on the screen is the job of the text renderer.  It will quite often produce a single glyph from two wchar_t, even when they are not in the upper bit planes.  Happens for accented characters."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 2, "creation_date": 1466625636, "post_id": 37976710, "comment_id": 63400544, "body": "No, it won&#39;t. Like all string handling functions, <code>wcslen</code> returns numbers in multiples of code units. If a code point requires 2 code units to represent, <code>wcslen</code> will return 2."}], "answers": [{"comments": [{"owner": {"reputation": 6668, "user_id": 1197719, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/a11ff3ed53b29c71863d5e0f740e9c1d?s=128&d=identicon&r=PG", "display_name": "Andreas", "link": "https://stackoverflow.com/users/1197719/andreas"}, "edited": false, "score": 0, "creation_date": 1466684785, "post_id": 37979387, "comment_id": 63426846, "body": "What is so bad about using <code>TCHAR</code>? Isn&#39;t it simply mapped to <code>WCHAR</code> if <code>UNICODE</code> is defined? (which is the case in my program)"}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "reply_to_user": {"reputation": 6668, "user_id": 1197719, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/a11ff3ed53b29c71863d5e0f740e9c1d?s=128&d=identicon&r=PG", "display_name": "Andreas", "link": "https://stackoverflow.com/users/1197719/andreas"}, "edited": false, "score": 0, "creation_date": 1466690429, "post_id": 37979387, "comment_id": 63431306, "body": "That&#39;s correct. Using <code>TCHAR</code> and the other functions in <code>&lt;tchar.h&gt;</code> would be perfectly fine if you&#39;re building a Unicode application. What is <i>not</i> fine is casting it to <code>char</code>, @andreas."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 2, "last_activity_date": 1466635192, "creation_date": 1466635192, "answer_id": 37979387, "question_id": 37976710, "link": "https://stackoverflow.com/questions/37976710/iterating-over-all-files-in-ofn-allowmultiselect-with-unicode/37979387#37979387", "title": "Iterating over all files in OFN_ALLOWMULTISELECT with Unicode", "body": "<p>Your first example was on the right track, but has a couple of mistakes:</p>\n\n<ol>\n<li><p>your variable should be declared <code>WCHAR*</code> instead of <code>TCHAR*</code>.</p></li>\n<li><p><code>wprintf()</code> does not accept a <code>char*</code> format string as input, it takes a <code>wchar_t*</code> instead.</p></li>\n</ol>\n\n<p></p>\n\n<pre><code>WCHAR *tmp = ofn.lpStrFile + ofn.nFileOffset;\nwhile (*tmp)\n{\n    wprintf(L\"Got file: %s\\n\", tmp);\n    tmp += (wcslen(tmp) + 1);\n}\n</code></pre>\n\n<p>If you want to use <code>TCHAR</code> (and you really shouldn't, unless you need to support Win9x/ME), then it would look like this instead:</p>\n\n<pre><code>TCHAR *tmp = ofn.lpStrFile + ofn.nFileOffset;\nwhile (*tmp)\n{\n    _tprintf(_T(\"Got file: %s\\n\"), tmp);\n    tmp += (_tcslen(tmp) + 1);\n}\n</code></pre>\n\n<p>That being said, your understanding of <code>wcslen()</code> is wrong (but your use of it is correct).  In Windows, a Unicode string is encoded in UTF-16, where each <code>WCHAR</code> element is a UTF-16 <em>codeunit</em>.  <code>wcslen()</code> counts the number of <code>WCHAR</code> elements in the string, not the number of Unicode <em>codepoints</em> that they represent, like you are thinking.  So, if a given <em>codepoint</em> requires a UTF-16 surrogate pair, it will use two <code>WCHAR</code> elements in the string, and <code>wcslen()</code> will count 2 for it.  Otherwise, it will use 1 <code>WCHAR</code> and <code>wcslen()</code> will count 1 for it.</p>\n\n<p>The same is true for <code>strlen()</code> and MBCS strings, when a given Unicode codepoint is encoded using more than 1 codeunit (<code>char</code> element) in the string.</p>\n"}], "owner": {"reputation": 6668, "user_id": 1197719, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/a11ff3ed53b29c71863d5e0f740e9c1d?s=128&d=identicon&r=PG", "display_name": "Andreas", "link": "https://stackoverflow.com/users/1197719/andreas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 37979387, "answer_count": 1, "score": 0, "last_activity_date": 1466635192, "creation_date": 1466623741, "question_id": 37976710, "link": "https://stackoverflow.com/questions/37976710/iterating-over-all-files-in-ofn-allowmultiselect-with-unicode", "title": "Iterating over all files in OFN_ALLOWMULTISELECT with Unicode", "body": "<p>What is the recommended way of iterating over all files selected in an <code>OFN_ALLOWMULTISELECT</code> open file dialog with Unicode enabled?</p>\n\n<p>My first idea was something like this:</p>\n\n<pre><code>TCHAR *tmp = ofn.lpStrFile + ofn.nFileOffset;\n\nwhile(*tmp) {\n    wprintf(\"Got file: %s\\n\", tmp);\n    tmp += wcslen(tmp) + 1;\n}\n</code></pre>\n\n<p>But then it occurred to me that this won't work in case there are characters in the string buffer that can't be represented in 16 bits. So for a safe approach I'd first need to find out the byte length of the <code>tmp</code> <code>TCHAR</code> string, then cast the <code>TCHAR</code> pointer to <code>char</code> and add that byte length in each iteration. Something like this:</p>\n\n<pre><code>TCHAR *tmp = ofn.lpStrFile + ofn.nFileOffset;\n\nwhile(*tmp) {\n    wprintf(\"Got file: %s\\n\", tmp);\n    tmp = (TCHAR *) (((char *) tmp)) + get_byte_len_of_tstr(tmp));\n}\n</code></pre>\n\n<p>Note that <code>get_byte_len_of_tstr()</code> is just a placeholder for a function that would've to be written for this purpose. Since this approach looks somewhat clumsy, I'd first like to ask for some feedback whether this is really the way to go or whether I've missed or misunderstood something here...</p>\n"}, {"tags": ["c", "gcc", "optimization"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1466623425, "post_id": 37976563, "comment_id": 63399442, "body": "What is the question? You should decide on the tradeoff you are ready to make between the speed and the size. You can&#39;t have both in the same time."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1466623810, "post_id": 37976563, "comment_id": 63399621, "body": "Why is this tagged C++ when you are clearly just talking about C?"}, {"owner": {"reputation": 548, "user_id": 4996534, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/kX0gN.png?s=128&g=1", "display_name": "Rheatey Bash", "link": "https://stackoverflow.com/users/4996534/rheatey-bash"}, "edited": false, "score": 0, "creation_date": 1466625047, "post_id": 37976563, "comment_id": 63400231, "body": "There are some additional files which are written in c++."}, {"owner": {"reputation": 548, "user_id": 4996534, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/kX0gN.png?s=128&g=1", "display_name": "Rheatey Bash", "link": "https://stackoverflow.com/users/4996534/rheatey-bash"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1466625239, "post_id": 37976563, "comment_id": 63400325, "body": "@Eugene it is not always question of tradeoff. There must be some way which improves both"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1466625788, "post_id": 37976563, "comment_id": 63400631, "body": "@Stark Of course. But to some extent. You can&#39;t have both <i>maximally</i> optimized. You can have them <i>somewhat</i> optimized, this is why you have different optimization levels, otherwise it will just optimize everything even without asking you, as there wouldn&#39;t be any downsides."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1466625908, "post_id": 37976563, "comment_id": 63400688, "body": "Take a <code>for</code> loop as an example.  To conserve space the fewest number of statements are in the statement block.  However, each iteration causes the processor to transfer execution which costs extra performance points.  In the case of optimizing for speed, the <code>for</code> loop is <i>unrolled</i> so more statements are executed per iteration, reducing the number of execution transfers."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1466626068, "post_id": 37976563, "comment_id": 63400771, "body": "There are some optimizations which can reduce size and improve speed.  For example, replacing <code>pow(2.0, x)</code> with <code>1 &lt;&lt; x</code>, will reduce the size of the executable (by not calling a function or not needing the function) and increase the execution speed (because there is only 1 efficient instruction to execute)."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1466626209, "post_id": 37976563, "comment_id": 63400838, "body": "You may be able to optimize more than the compiler can.  For example, instead of floating point, consider using integers and performing <a href=\"https://en.wikipedia.org/wiki/Fixed-point_arithmetic\" rel=\"nofollow noreferrer\">Fixed Point Math</a>."}, {"owner": {"reputation": 548, "user_id": 4996534, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/kX0gN.png?s=128&g=1", "display_name": "Rheatey Bash", "link": "https://stackoverflow.com/users/4996534/rheatey-bash"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1466626215, "post_id": 37976563, "comment_id": 63400842, "body": "@Thomas Thanks,  Definitely it will help to gain some speed. I would modify for loops. And can you tell me about other options sach as placing function and data items on its own section"}, {"owner": {"reputation": 548, "user_id": 4996534, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/kX0gN.png?s=128&g=1", "display_name": "Rheatey Bash", "link": "https://stackoverflow.com/users/4996534/rheatey-bash"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1466626344, "post_id": 37976563, "comment_id": 63400930, "body": "@Thomas of course fixed point is best option but as I have already described I am using gls  library which is written in floating and double data type mostly.  For fixed point I have to convert it in fixed point."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1466626387, "post_id": 37976563, "comment_id": 63400951, "body": "Research &quot;Data Driven design&quot; and &quot;Data Cache Optimization&quot;.  A simple trick is to declare stuff as &quot;static const&quot; so that the compiler can access the data directly rather than making a local copy."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1466626563, "post_id": 37976563, "comment_id": 63401014, "body": "On one of my embedded systems, we used a Fixed Point denominator of 4096 (due to ADC counts).  This was the &quot;internal representation&quot;.  The Fixed Point would be converted during output to User or input From User.  Our ARM7 loved the integral data instructions.  I also moved data into a structure for better data cache line and that sped things up."}, {"owner": {"reputation": 548, "user_id": 4996534, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/kX0gN.png?s=128&g=1", "display_name": "Rheatey Bash", "link": "https://stackoverflow.com/users/4996534/rheatey-bash"}, "edited": false, "score": 0, "creation_date": 1466626651, "post_id": 37976563, "comment_id": 63401072, "body": "Other than GLS library I can convert all other functions in fixed point.  Is there any way to converting gls in fixed point library"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1466626699, "post_id": 37976563, "comment_id": 63401093, "body": "I find myself many times battling the compiler on optimization tricks.  Print the assembly language generated by the compiler.  Measure with an oscilloscope.  Many times you&#39;ll find that the compiler&#39;s optimal code is slightly more efficient that your implementation.  A few times, I&#39;ve noticed the compiler emitted code that doesn&#39;t work; so I simplify the high level language."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1466636834, "post_id": 37976563, "comment_id": 63405067, "body": "If you are interested in speed, use a profiler to tell you where things are &quot;slow&quot;.  If codesize is more a concern, then you need to look at your .map file to see where all you space is being used and work from there."}], "answers": [{"tags": [], "owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "is_accepted": true, "score": 1, "last_activity_date": 1466635499, "last_edit_date": 1466635499, "creation_date": 1466632925, "answer_id": 37979011, "question_id": 37976563, "link": "https://stackoverflow.com/questions/37976563/understanding-the-optimization-of-c-code-on-arm-platform-using-gcc-compiler/37979011#37979011", "title": "Understanding the Optimization of C code on ARM platform using GCC Compiler", "body": "<p>When using gcc to write code for embedded systems, it is important to note that unlike many embedded-systems compilers which allow storage may be written as one type and read as another, and will treat integer overflow in at least somewhat predictable fashion, code which relies upon such behaviors is apt to break when compiled with gcc unless compiled using <code>-fno-strict-aliasing</code> and <code>-fwrapv</code> flags.  For example, while the authors of the C Standard would have expected that the function</p>\n\n<pre><code>// Assume usmall is an unsigned value half the size of unsigned int\nunsigned multiply(usmall x, usmall y) { return x*y; }\n</code></pre>\n\n<p>should be safe on two's-complement hardware platforms with silent wraparound on overflow, they didn't <em>require</em> compilers to implement it that way (I think they probably didn't expect that anyone who was writing a compiler for such a platform would be so obtuse as to do otherwise unless emulating some other platform).  When compiled with gcc, however, that function may have unexpected side-effects.</p>\n\n<p>Likewise, on many compilers, given e.g.</p>\n\n<pre><code>struct widget_header {uint16_t length; uint8_t type_id;};\nstruct acme_widget {uint16_t length; uint8_t type_id; uint8_t dat[5];};\nstruct beta_widget {uint16_t length; uint8_t type_id; uint32_t foo;};\n</code></pre>\n\n<p>a pointer to any of those types could be cast to widget_header; code\ncould then look at the type_id field and cast to a more specific type.\nSuch techniques will not always work on gcc, however; even if a union\ndeclaration containing all three types is in scope, gcc will assume that\nan access to a field of one of those types cannot possibly modify the\ncorresponding field in any other.</p>\n\n<p>A more concrete example to show how gcc treats aliasing:</p>\n\n<pre><code>    struct s1 { int x; };\n    struct s2 { int x; };\n    union { struct s1 v1; struct s2 v2; } u;\n\n    static int peek(void *p)\n    {\n      struct s1 *p1 = (struct s1*)p;\n      return *(int*)&amp;p1-&gt;x;\n    }\n\n    static void setToFive(void *p)\n    {\n      struct s2 *p2 = (struct s2*)p;\n      *(int*)(&amp;p2-&gt;x) = 5;\n    }\n\n    static int test1a(void *p, void *q)\n    {\n      struct s1 *p1 = (struct s1*)p;\n      if (peek(p)!=23) return 0;\n      setToFive(q);\n      return peek(p);\n    }\n\n    int test1(void)\n    {\n      struct s2 v2 = {23};\n      u.v2 = v2;\n      return test1a(&amp;u.v1, &amp;u.v2);\n    }\n</code></pre>\n\n<p>ARM gcc 4.8.2 generates</p>\n\n<pre><code>test1:\n        movw    r3, #:lower16:u\n        movt    r3, #:upper16:u\n        movs    r2, #5\n        movs    r0, #23\n        str     r2, [r3]\n        bx      lr\n</code></pre>\n\n<p>which stores a 5 into \"u\" and then returns 23 (assuming that the second call to <code>peek</code> will return the same value as the first one, notwithstanding all of the pointer typecasts which should give a pretty clear indication to the compiler that something might possibly be aliased somewhere).</p>\n"}], "owner": {"reputation": 548, "user_id": 4996534, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/kX0gN.png?s=128&g=1", "display_name": "Rheatey Bash", "link": "https://stackoverflow.com/users/4996534/rheatey-bash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 692, "favorite_count": 1, "accepted_answer_id": 37979011, "answer_count": 1, "score": 0, "last_activity_date": 1466635499, "creation_date": 1466623213, "last_edit_date": 1592644375, "question_id": 37976563, "link": "https://stackoverflow.com/questions/37976563/understanding-the-optimization-of-c-code-on-arm-platform-using-gcc-compiler", "title": "Understanding the Optimization of C code on ARM platform using GCC Compiler", "body": "<p>I am doing c programming on ARM where memory footprint and speed both have a very tight constraint. I am using the GSL-2.1 library which has almost all functions in double but  my hardware doesn't have floating point on hardware so it is all doing in software. Therefore, it produces extra code size as well as reduces the speed of execution. My processor has 180KB SRAM and 1MB Flash. Now I want to improve speed as well as memory footprint so I looked into the IDE compiler settings and got following settings.</p>\n<p><a href=\"https://i.stack.imgur.com/IJZPR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IJZPR.png\" alt=\"enter image description here\" /></a></p>\n<p>I have read <a href=\"https://stackoverflow.com/questions/1778538/how-many-gcc-optimization-levels-are-there/30308151#30308151\">some thread</a> regarding optimization level on GCC but still here is some more settings which I did not get quite well. Can you please elaborate each settings wrt to GCC for ARM Cortex-M processors.</p>\n<p>Update:\nI have randomly checked/unchecked some boxes I did not get any difference in code size.</p>\n"}, {"tags": ["c", "multithreading", "pthreads"], "comments": [{"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1466623312, "post_id": 37976161, "comment_id": 63399377, "body": "This won&#39;t solve your problem but    1) don&#39;t cast the results of an <code>malloc()</code>    2) you never test the return value from your <code>malloc()</code> calls"}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1466623403, "post_id": 37976161, "comment_id": 63399431, "body": "Also, you can profile your code to find where it&#39;s spending most of it&#39;s time."}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 1, "creation_date": 1466624470, "post_id": 37976161, "comment_id": 63399938, "body": "Hav you counted how often your loop in <code>abc()</code> is being traversed altogether with aa = 1 and with aa = 2 (by any thread)? Once you have, come back and modify your question. Hint: Your threads don&#39;t <i>share</i> any work"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1466628223, "post_id": 37976161, "comment_id": 63401831, "body": "<code>rand()</code> is not thread-safe. Your program&#39;s behavior is undefined."}], "answers": [{"comments": [{"owner": {"reputation": 519, "user_id": 845961, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2649e7f23dba99c7b05feb542b216b36?s=128&d=identicon&r=PG", "display_name": "user12290", "link": "https://stackoverflow.com/users/845961/user12290"}, "edited": false, "score": 0, "creation_date": 1466650328, "post_id": 37978943, "comment_id": 63408309, "body": "Thanks. But (((double) N) * time(NULL) / (RAND_MAX + 1.0)) is not giving random values."}, {"owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "reply_to_user": {"reputation": 519, "user_id": 845961, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2649e7f23dba99c7b05feb542b216b36?s=128&d=identicon&r=PG", "display_name": "user12290", "link": "https://stackoverflow.com/users/845961/user12290"}, "edited": false, "score": 0, "creation_date": 1466653945, "post_id": 37978943, "comment_id": 63409163, "body": "@user12290 that was just for showing the problem of thread-safety. A thread-safe variant of <code>rand(3)</code> is <code>rand_r(3)</code> but that is obsolete since Posix-2008 so it is either one of <code>[delnmj]rand48_r(3)</code> or roll-your-own."}], "tags": [], "owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "is_accepted": true, "score": 1, "last_activity_date": 1466632613, "creation_date": 1466632613, "answer_id": 37978943, "question_id": 37976161, "link": "https://stackoverflow.com/questions/37976161/slow-in-multithread-programming-in-c-when-using-more-than-one-thread/37978943#37978943", "title": "Slow in multithread programming in C when using more than one thread", "body": "<p>I have to concur with EOF with this: the problem are the calls to <code>rand()</code>. If they get replaced with <code>time(NULL)</code> you will get what you expect.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;pthread.h&gt;\n#include &lt;time.h&gt;\n#include&lt;stdlib.h&gt;\n\n#define N 100\n#define LIMIT 5000000\n\nstatic unsigned long long *reg;\n\nvoid *abc(void *arg)\n{\n  //srand(time(NULL));\n  unsigned long long i, l, k;\n  unsigned char z;\n  int *limit_ptr = (int *) arg;\n  int i1 = *limit_ptr;\n\n  printf(\"Argument: i1=%d\\n\", i1);\n  k = 0;\n\n  for (l = 0; l &lt; LIMIT; l++) {\n    for (i = 0; i &lt; N; i++){\n      z = (((double) N) * time(NULL) / (RAND_MAX + 1.0));\n      k++;\n    }\n    z = (((double) N) * time(NULL) / (RAND_MAX + 1.0));\n    if (z == 0)\n      reg[i1]++;\n  }\n  printf(\"Loops of %d: %lld\\n\",i1, k);\n  // normal would be pthread_exit() but the linear timings would need\n  // their own function/ extra argument/needless complexity\n  return NULL;\n}\n\nint main(int argc, char **argv)\n{\n  int l;\n\n  struct timespec start, finish;\n  double elapsed_threaded, elapsed_linear;\n\n  int j1;\n  unsigned long long cc = 0;\n\n  int num_threads;\n\n  unsigned long long *b;\n\n  pthread_attr_t attr;\n\n  if(argc &gt; 1)\n    num_threads = atoi(argv[1]); // don't use atoi in production\n  else\n    num_threads = 2;\n\n  printf(\"# of threads: %d\\n\", num_threads);\n  // checks omitted here\n  reg = (unsigned long long *) malloc(num_threads * sizeof(unsigned long long));\n  b = (unsigned long long *) malloc(num_threads * sizeof(unsigned long long));\n\n  pthread_attr_init(&amp;attr);\n  pthread_attr_setdetachstate(&amp;attr, PTHREAD_CREATE_JOINABLE);\n\n  for (l = 0; l &lt; num_threads; l++)\n    reg[l] = 0;\n  pthread_t tid[num_threads];\n\n  for (j1 = 0; j1 &lt; num_threads; j1++)\n    b[j1] = j1;\n\n  clock_gettime(CLOCK_MONOTONIC, &amp;start);\n  for (j1 = 0; j1 &lt; num_threads; j1++) {\n    printf(\"Thread #%d started\\n\", j1);\n    // Check omitted\n    pthread_create(&amp;tid[j1], &amp;attr, abc, &amp;b[j1]);\n  }\n  for (j1 = 0; j1 &lt; num_threads; j1++) {\n    // Check omitted\n    pthread_join(tid[j1], NULL);\n    printf(\"Thread #%d joined\\n\", j1);\n  }\n  clock_gettime(CLOCK_MONOTONIC, &amp;finish);\n\n  for (j1 = 0; j1 &lt; num_threads; j1++)\n    cc = cc + reg[j1];\n\n  printf(\"%0.10f   %llu\\n\", (double) cc / (num_threads * LIMIT), cc);\n\n  elapsed_threaded = (finish.tv_sec - start.tv_sec);\n  elapsed_threaded += (finish.tv_nsec - start.tv_nsec) / 1000000000.0;\n\n  clock_gettime(CLOCK_MONOTONIC, &amp;start);\n  for (j1 = 0; j1 &lt; num_threads; j1++) {\n    abc(&amp;b[j1]);\n  }\n  clock_gettime(CLOCK_MONOTONIC, &amp;finish);\n  elapsed_linear = (finish.tv_sec - start.tv_sec);\n  elapsed_linear += (finish.tv_nsec - start.tv_nsec) / 1000000000.0;\n\n  printf(\"Time threaded: %0.10f\\nTime linear:   %0.10f\\nRelation %0.10f\\n\",\n           elapsed_threaded,elapsed_linear, elapsed_threaded/elapsed_linear);\n  pthread_exit(NULL);\n}\n</code></pre>\n\n<p>I cleaned it up a little bit (setting <code>PTHREAD_CREATE_JOINABLE</code> explicitely is probably redundant but check your implementation of pthread to be sure).</p>\n\n<p>Compiled with <code>gcc -W -Wall -O3 -g3  thread.c -o thread  -lpthread</code></p>\n\n<p>Results with</p>\n\n<pre><code>1 thread:\nTime threaded: 1.3713400890\nTime linear:   1.3394284740\nRelation 1.0238247996\n\n2 threads:\nTime threaded: 1.4989349930\nTime linear:   2.6568704750\nRelation 0.5641731530\n\n3 threads:\nTime threaded: 1.8101585490\nTime linear:   3.9965480710\nRelation 0.4529305082\n\n4 threads:\nTime threaded: 1.3974386710\nTime linear:   5.3152423440\nRelation 0.2629115627\n\n5 threads:\nTime threaded: 1.7717215210\nTime linear:   6.6438871330\nRelation 0.2666694189\n</code></pre>\n\n<p>You may guess now, how many cores my CPU has.</p>\n\n<p>PS: please implement <em>all</em> checks, even if you are experimenting, <em>especially</em> if you are experimenting.</p>\n"}], "owner": {"reputation": 519, "user_id": 845961, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2649e7f23dba99c7b05feb542b216b36?s=128&d=identicon&r=PG", "display_name": "user12290", "link": "https://stackoverflow.com/users/845961/user12290"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 37978943, "answer_count": 1, "score": 1, "last_activity_date": 1466733065, "creation_date": 1466621690, "last_edit_date": 1466733065, "question_id": 37976161, "link": "https://stackoverflow.com/questions/37976161/slow-in-multithread-programming-in-c-when-using-more-than-one-thread", "title": "Slow in multithread programming in C when using more than one thread", "body": "<p>I have written the following code. When I am using single thread (aa=1 in the code), it takes 11 seconds. But for aa=2, it takes 190 seconds. However my machine  has 4 cpus.  Will you kindly help me? I am compiling as </p>\n\n<p>gcc  Thread.c   -lpthread -O3</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;pthread.h&gt;\n#include &lt;time.h&gt;\n#include&lt;stdlib.h&gt;\n\n\n\n#define N 100\n\nint aa;\n\n\nunsigned long long *reg, *b;\n#define  LIMIT 5000000\n\n\n\n\nvoid *abc(void* arg){\n       srand(time(NULL));\n\n       unsigned long long i,l;\n       unsigned char   z,j;\n       int *limit_ptr=(int *)arg;\n       int i1=*limit_ptr;\n       printf(\"i1=%d\\n\",i1);\n       for(l=0;l&lt;LIMIT;l++){\n           for(i=0;i&lt;N;i++)\n               z=(((double) N)*rand()/(RAND_MAX+1.0));;\n\n           z = (((double) N)*rand()/(RAND_MAX+1.0));;\n\n           if(z==0)\n               reg[i1]++;\n\n        }           \n\n}\n\nint main(){\n\n    int l;\n    aa=2;\n    printf(\"%d  \\n\\n\",aa);\n    reg = (unsigned long long *) malloc(aa * sizeof(unsigned long long ));\n    b = (unsigned long long *) malloc(aa * sizeof(unsigned long long ));\n\n    struct timespec start, finish;\n    double elapsed;\n    clock_gettime(CLOCK_MONOTONIC, &amp;start);\n\n    for(l=0;l&lt;aa;l++)\n        reg[l]=0;\n    pthread_t tid[aa];\n\n    int j1;\n    unsigned long long  cc=0;\n\n\n\n    for(j1=0;j1&lt;aa;j1++)\n        b[j1]=j1;\n\n\n    for(j1=0;j1&lt;aa;j1++){\n\n        printf(\"%d\\n\", j1);\n        pthread_create(&amp;tid[j1],NULL,abc,&amp;b[j1]);\n    }\n//    \n\n    for(j1=0;j1&lt;aa;j1++){\n        pthread_join(tid[j1],NULL);\n        printf(\"%d\\n\", j1);\n    }\n\n    for(j1=0;j1&lt;aa;j1++)    \n        cc=cc+reg[j1]; \n\n\n    printf(\"%0.10f   %llu\\n\", (double)cc/(aa*LIMIT),cc);\n\n    clock_gettime(CLOCK_MONOTONIC, &amp;finish);\n    elapsed = (finish.tv_sec - start.tv_sec);\n    elapsed += (finish.tv_nsec - start.tv_nsec) / 1000000000.0;  \n\n    printf(\"Time=%0.10f\\n\", elapsed);  \n    pthread_exit(NULL);\n\n}\n</code></pre>\n\n<p>Based on suggestion, I have changed the code. Although execution time is ok now, but random number generation is not fine. Values of the array reg in the code are same. Please help me. </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;pthread.h&gt;\n#include &lt;time.h&gt;\n#include&lt;stdlib.h&gt;\n#include &lt;sched.h&gt;\n\n\n#define N 100\n#define aa 4\n\n\n\nunsigned long long *reg, *b;\n#define  LIMIT 5000000\n\nint rgen()\n{\n    int xi;\n    int seed;\n    struct drand48_data drand_buf;\n    double x;\n    static i;\n\n    if (i==0){\n        seed = time(NULL);\n        srand48_r(seed, &amp;drand_buf);\n        i = 10;\n    }\n\n    drand48_r (&amp;drand_buf, &amp;x);\n    xi = (int) (x * 100);      \n\n    return xi;\n}\n\n\nvoid *abc(void* arg){\n       int l,i, z;\n       int *limit_ptr = (int *) arg;\n       int i1 = *limit_ptr;\n\n       printf(\"i1=%d\\n\",i1);\n       for(l=0; l&lt;LIMIT; l++){\n                 for(i=0; i&lt;N; i++)\n                     z= rgen(i1);\n\n           if(z==0)\n               reg[i1]++;\n\n        }           \n\n}\n\nint main(){\n\nint l;\n\nprintf(\"%d  \\n\\n\",aa);\nreg = (unsigned long long *) malloc(aa * sizeof(unsigned long long ));\nb = (unsigned long long *) malloc(aa * sizeof(unsigned long long ));\n\nstruct timespec start, finish;\ndouble elapsed;\nclock_gettime(CLOCK_MONOTONIC, &amp;start);\n\nfor(l=0;l&lt;aa;l++)\n    reg[l]=0;\npthread_t tid[aa];\n\nint j1;\nunsigned long long  cc=0;\n\n\n\nfor(j1=0;j1&lt;aa;j1++)\n  b[j1]=j1;\n\n\nfor(j1=0;j1&lt;aa;j1++){\n\n    printf(\"%d\\n\", j1);\n    pthread_create(&amp;tid[j1],NULL,abc,&amp;b[j1]);\n}\n//    \n  printf(\"created threads\\n\"); \n  for(j1=0;j1&lt;aa;j1++){\n   pthread_join(tid[j1],NULL);\n   printf(\"%d\\n\", j1);\n   }\n\nfor(j1=0;j1&lt;aa;j1++)    \n  cc=cc+reg[j1]; \n\nprintf(\"\\n\");\nfor(j1=0;j1&lt;aa;j1++)   \n   printf(\"%llu   \", reg[j1]);\n\nprintf(\"\\n\");\n\nprintf(\"%0.10f   %llu\\n\", (double)cc/(aa*LIMIT),cc);\n\nclock_gettime(CLOCK_MONOTONIC, &amp;finish);\nelapsed = (finish.tv_sec - start.tv_sec);\nelapsed += (finish.tv_nsec - start.tv_nsec) / 1000000000.0;  \n\nprintf(\"Time=%0.10f\\n\", elapsed);  \npthread_exit(NULL);\n\n\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1466621710, "post_id": 37976119, "comment_id": 63398527, "body": "I doubt this compiles."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1466621806, "post_id": 37976119, "comment_id": 63398579, "body": "Is the snippet perhaps missing something between <code>}</code> and <code>[</code>?"}, {"owner": {"reputation": 452, "user_id": 3839114, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6fe72926252a830d61b9bebfb72fa245?s=128&d=identicon&r=PG&f=1", "display_name": "pixatlazaki", "link": "https://stackoverflow.com/users/3839114/pixatlazaki"}, "edited": false, "score": 0, "creation_date": 1466622176, "post_id": 37976119, "comment_id": 63398778, "body": "It&#39;s very possible it does not compile as C. I am actually reading through a custom data file but its syntax is designed to be as similar as possible to C&#39;s, motivating my post in the manner in which it is written. I apologize if this was troublesome/annoying to those looking at the question.  Thank you all for your help."}, {"owner": {"reputation": 452, "user_id": 3839114, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6fe72926252a830d61b9bebfb72fa245?s=128&d=identicon&r=PG&f=1", "display_name": "pixatlazaki", "link": "https://stackoverflow.com/users/3839114/pixatlazaki"}, "edited": false, "score": 0, "creation_date": 1466623455, "post_id": 37976119, "comment_id": 63399454, "body": "Noted and corrected."}], "answers": [{"comments": [{"owner": {"reputation": 16263, "user_id": 814761, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/030202f384a132247f144ee2b8f809ae?s=128&d=identicon&r=PG", "display_name": "Purag", "link": "https://stackoverflow.com/users/814761/purag"}, "edited": false, "score": 1, "creation_date": 1466622211, "post_id": 37976288, "comment_id": 63398799, "body": "Should also explain what it would do if valid."}, {"owner": {"reputation": 452, "user_id": 3839114, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6fe72926252a830d61b9bebfb72fa245?s=128&d=identicon&r=PG&f=1", "display_name": "pixatlazaki", "link": "https://stackoverflow.com/users/3839114/pixatlazaki"}, "edited": false, "score": 0, "creation_date": 1466622353, "post_id": 37976288, "comment_id": 63398888, "body": "I think in your edit you removed the very identifier that was missing."}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": true, "score": 3, "last_activity_date": 1466622283, "last_edit_date": 1466622283, "creation_date": 1466622118, "answer_id": 37976288, "question_id": 37976119, "link": "https://stackoverflow.com/questions/37976119/what-is-the-meaning-of-a-number-in-brackets-after-a-struct-declaration/37976288#37976288", "title": "What is the meaning of a number in brackets after a struct declaration?", "body": "<blockquote>\n  <p>What exactly does this do? Is this even proper C?  </p>\n</blockquote>\n\n<p>This is an ill formed code. Compiler will raise syntax error. There should be an identifier before <code>[123]</code>. </p>\n\n<pre><code>struct {\n    double a, b, c;\n} a[123];  \n</code></pre>\n\n<p>This will declare <code>a</code> as an array of 123 <code>struct { double a, b, c; }</code>.</p>\n"}], "owner": {"reputation": 452, "user_id": 3839114, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6fe72926252a830d61b9bebfb72fa245?s=128&d=identicon&r=PG&f=1", "display_name": "pixatlazaki", "link": "https://stackoverflow.com/users/3839114/pixatlazaki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "accepted_answer_id": 37976288, "answer_count": 1, "score": 3, "last_activity_date": 1466623434, "creation_date": 1466621553, "last_edit_date": 1466623434, "question_id": 37976119, "link": "https://stackoverflow.com/questions/37976119/what-is-the-meaning-of-a-number-in-brackets-after-a-struct-declaration", "title": "What is the meaning of a number in brackets after a struct declaration?", "body": "<p>I recently encountered text of the form</p>\n\n<pre><code>struct {\n    double a, b, c;\n}[123];\n</code></pre>\n\n<p>What exactly does this do? Is this even proper C?</p>\n"}, {"tags": ["c", "arduino", "at-command", "esp8266", "ends-with"], "comments": [{"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 1, "creation_date": 1466625300, "post_id": 37976049, "comment_id": 63400355, "body": "Most probably what you receive does not &quot;end with&quot; (<code>String::endsWith</code>) &quot;80&quot;, but instead with &quot;80&lt;CR&gt;&lt;LF&gt;&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 6500677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70e8234d922674cea8f58b0ba6ff5fe0?s=128&d=identicon&r=PG&f=1", "display_name": "AntInvent", "link": "https://stackoverflow.com/users/6500677/antinvent"}, "edited": false, "score": 0, "creation_date": 1466626247, "post_id": 37977157, "comment_id": 63400860, "body": "Many thanks for your response!  I still don&#39;t understand why it returns so soon though...  <code>&quot;This makes the waitForResponse function return whenever the UART (or some other serial IO buffer) is empty.&quot;</code>  If the buffer is empty, it does leave the loop BUT the loop is repeated again because it is within the timeout loop. Why wouldn&#39;t it catch the next characters that subsequently arrive in the timeout?"}, {"owner": {"reputation": 185743, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "reply_to_user": {"reputation": 85, "user_id": 6500677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70e8234d922674cea8f58b0ba6ff5fe0?s=128&d=identicon&r=PG&f=1", "display_name": "AntInvent", "link": "https://stackoverflow.com/users/6500677/antinvent"}, "edited": false, "score": 0, "creation_date": 1466626854, "post_id": 37977157, "comment_id": 63401159, "body": "@AntInvent that part is incorrect. It will continue looping until the timeout. The <code>endsWith</code> problem is genuine though. If you read more or less than one line (which you almost always will), then your logic will fail."}, {"owner": {"reputation": 23243, "user_id": 23118, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fab0965d392f9190012e9f8368c203d0?s=128&d=identicon&r=PG", "display_name": "hlovdal", "link": "https://stackoverflow.com/users/23118/hlovdal"}, "edited": false, "score": 0, "creation_date": 1466626918, "post_id": 37977157, "comment_id": 63401192, "body": "True, I missed that before starting to write an answer. You still should convert your code flow to parse everything line by line, otherwise your program will not handle cases where <code>AT+CIPSTART</code> returns <code>ERROR</code> etc."}, {"owner": {"reputation": 85, "user_id": 6500677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70e8234d922674cea8f58b0ba6ff5fe0?s=128&d=identicon&r=PG&f=1", "display_name": "AntInvent", "link": "https://stackoverflow.com/users/6500677/antinvent"}, "edited": false, "score": 0, "creation_date": 1466628507, "post_id": 37977157, "comment_id": 63401967, "body": "Ah ok, this is where I reach the limits of my understanding. Will String functions not handle multiple lines or is this issue specific to endsWith? I had assumed that the &quot;\\r\\n&quot;s would simply form part of the string as a whole. Thanks again"}, {"owner": {"reputation": 85, "user_id": 6500677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70e8234d922674cea8f58b0ba6ff5fe0?s=128&d=identicon&r=PG&f=1", "display_name": "AntInvent", "link": "https://stackoverflow.com/users/6500677/antinvent"}, "edited": false, "score": 0, "creation_date": 1466632988, "post_id": 37977157, "comment_id": 63403914, "body": "@hlovdal I have amended the code to parse one line at a time in a function that is called as long as the timeout hasn&#39;t been reached. The ESP doesn&#39;t appear to send a carriage return after its echo of the AT command so to test it I searched for 8 and 0 as the final two characters of the line and it successfully detected and printed that line to the serial monitor:"}, {"owner": {"reputation": 85, "user_id": 6500677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70e8234d922674cea8f58b0ba6ff5fe0?s=128&d=identicon&r=PG&f=1", "display_name": "AntInvent", "link": "https://stackoverflow.com/users/6500677/antinvent"}, "edited": false, "score": 0, "creation_date": 1466633109, "post_id": 37977157, "comment_id": 63403953, "body": "<code>OUTPUT:      c     lineRcvd = AT+CIPSTART=&quot;TCP&quot;,&quot;api.thingspeak.com&quot;,80 &#47;&#47; first readLine successful     readLine timed out! &#47;&#47; no further lines received so timed out      Cannot connect to ThingSpeak!               CONNECT          OK</code>  As you can see here the CONNECT and OK lines are still missed entirely. What could be blocking them from appearing in the software serial buffer before the timeout occurs? Sorry for the lack of line breaks and code, I can&#39;t figure out how to post it without splitting it over many comments..."}, {"owner": {"reputation": 85, "user_id": 6500677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70e8234d922674cea8f58b0ba6ff5fe0?s=128&d=identicon&r=PG&f=1", "display_name": "AntInvent", "link": "https://stackoverflow.com/users/6500677/antinvent"}, "edited": false, "score": 0, "creation_date": 1466635740, "post_id": 37977157, "comment_id": 63404756, "body": "@hlovdal Ok ignore all that, the code order mystery is solved... I had not appended \\r\\n to AT command I SENT to the ESP. I&#39;m not sure why that mattered or how the ESP then managed to respond anyway but once that was in the parsing function worked a treat. Now there&#39;s another error coming from the ESP relating to the parsing function itself but such is life..."}, {"owner": {"reputation": 23243, "user_id": 23118, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fab0965d392f9190012e9f8368c203d0?s=128&d=identicon&r=PG", "display_name": "hlovdal", "link": "https://stackoverflow.com/users/23118/hlovdal"}, "edited": false, "score": 0, "creation_date": 1466672218, "post_id": 37977157, "comment_id": 63417976, "body": "Notice that an AT command line should be terminated by <code>\\r</code> only and not <code>\\r\\n</code>, see <a href=\"http://stackoverflow.com/a/21503919/23118\">this answer</a> for details."}, {"owner": {"reputation": 5508, "user_id": 794749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pfE2l.jpg?s=128&g=1", "display_name": "gre_gor", "link": "https://stackoverflow.com/users/794749/gre-gor"}, "edited": false, "score": 0, "creation_date": 1466679582, "post_id": 37977157, "comment_id": 63423077, "body": "@hlovdal <a href=\"https://github.com/espressif/ESP8266_AT/wiki/AT_Description\" rel=\"nofollow noreferrer\">AT firmware on ESP8266 needs <code>\\r\\n</code> to end the command.</a>"}], "tags": [], "owner": {"reputation": 23243, "user_id": 23118, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fab0965d392f9190012e9f8368c203d0?s=128&d=identicon&r=PG", "display_name": "hlovdal", "link": "https://stackoverflow.com/users/23118/hlovdal"}, "is_accepted": true, "score": 0, "last_activity_date": 1466626589, "last_edit_date": 1495541775, "creation_date": 1466625440, "answer_id": 37977157, "question_id": 37976049, "link": "https://stackoverflow.com/questions/37976049/at-command-responses-understanding-order-of-code-execution-on-arduino/37977157#37977157", "title": "AT command responses (understanding order of code execution on Arduino)", "body": "<blockquote>\n  <p>Any idea why it returns before the full response is received (well within the timeout period)?</p>\n</blockquote>\n\n<p>Yes, your main problem is the following</p>\n\n<pre><code>if (ESP.available())\n</code></pre>\n\n<p>This makes the waitForResponse function return whenever the UART (or some other serial IO buffer) is empty - which is not what you want. What you want is to read from the serial port until you have received a line terminated with <code>\"\\r\\n\"</code>.</p>\n\n<blockquote>\n  <p>Is it something to do with the endsWith() function?</p>\n</blockquote>\n\n<p>Yes, that is an additional problem combined with <code>ESP.available</code> because you are attempting to match the end of a response line from the modem with what ever random data chopping occurs in the serial path. If you are extremely lucky this will be on line boundaries, but most likely not and you should not rely on that.</p>\n\n<p>This is a general protocol problem known as <a href=\"https://stackoverflow.com/search?tab=votes&amp;q=%22framing%22%20serial\">framing</a> that applies to any kind of asynchronous serial communication. For modem communications the framing characters are <code>\\r</code> and <code>\\n</code>.</p>\n\n<p>Do yourself a favour and implement a <code>readline</code> function that reads one by one character until it the previous character was <code>\\r</code> and the current character is <code>\\n</code> and then return everything it read so far.</p>\n\n<p>Then use that function exclusively<sup>1</sup> for reading modem response data. This applies both to <em>Intermediate result codes</em> like <code>CONNECT</code> as well as <em>Final result codes</em> (e.g. <code>OK</code> etc).\n\"Parsing\" the response lines can then be as simple as</p>\n\n<pre><code>if (responseLine.equals(\"CONNECT\\r\\n\")) ...\n</code></pre>\n\n<p>or</p>\n\n<pre><code>if (isFinalResultCode(responseLine)) ...\n</code></pre>\n\n<p>As I said <a href=\"https://stackoverflow.com/a/36899432/23118\">before</a>, <strong>the only correct way to process modem output is to divide the output into complete lines and iterate one full line at the time.</strong></p>\n\n<hr>\n\n<p><sup>1</sup>\nThe only exception is when parsing AT+CMGS response data.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6501670, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/567178e17c788d1624f23165df8952a5?s=128&d=identicon&r=PG", "display_name": "J-M-L", "link": "https://stackoverflow.com/users/6501670/j-m-l"}, "is_accepted": false, "score": 0, "last_activity_date": 1606736231, "last_edit_date": 1606736231, "creation_date": 1466639488, "answer_id": 37980038, "question_id": 37976049, "link": "https://stackoverflow.com/questions/37976049/at-command-responses-understanding-order-of-code-execution-on-arduino/37980038#37980038", "title": "AT command responses (understanding order of code execution on Arduino)", "body": "<p>Your <code>if</code> after the <code>while</code> <em>is</em> indeed wrong <em>because</em> you might have read more stuff back and thus you don't end with the target string even though &quot;ok&quot; was received.</p>\n<p>You should just test if responseBuffer ends <em>with</em> target <em>and</em> return true <em>only</em> when you receive a new character in the <code>while</code> loop and not after.\nAfter you have a timeout, just return false.</p>\n"}], "owner": {"reputation": 85, "user_id": 6500677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70e8234d922674cea8f58b0ba6ff5fe0?s=128&d=identicon&r=PG&f=1", "display_name": "AntInvent", "link": "https://stackoverflow.com/users/6500677/antinvent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1389, "favorite_count": 1, "accepted_answer_id": 37977157, "answer_count": 2, "score": 2, "last_activity_date": 1606736502, "creation_date": 1466621310, "last_edit_date": 1606736502, "question_id": 37976049, "link": "https://stackoverflow.com/questions/37976049/at-command-responses-understanding-order-of-code-execution-on-arduino", "title": "AT command responses (understanding order of code execution on Arduino)", "body": "<p>I'm sending AT commands to an <a href=\"https://en.wikipedia.org/wiki/ESP8266\" rel=\"nofollow noreferrer\">ESP8266</a> from an <a href=\"http://arduino.cc/en/Main/ArduinoBoardUno\" rel=\"nofollow noreferrer\">Arduino Uno</a>/Nano (ATmega328) and attempting to parse the end of the strings received in response to establish how the ESP reacted and whether it was successful (and whether it's ready to receive another command yet). I'm aware that parsing AT command responses has been discussed before here:</p>\n<p><em><a href=\"https://stackoverflow.com/questions/36884514/get-at-command-response\">Get AT command response</a></em></p>\n<p>But I have a specific issue not covered there that might also be of interest to other people on here...</p>\n<p>First, a function is called which sends the AT command to the ESP to connect to ThingSpeak (datalogging server). This works fine in manual mode and also connects when trying to parse the response, <em>but</em> it only parses the first line that comes back. For example, the expected output in the serial monitor would be:</p>\n<pre class=\"lang-none prettyprint-override\"><code>c\nAT+CIPSTART=&quot;TCP&quot;,&quot;api.thingspeak.com&quot;,80\nCONNECT\n\nOK\nConnected to ThingSpeak!\n</code></pre>\n<p>Where <code>c</code> is just the command character I type to initiate the connection.</p>\n<p>The actual response, however, is as follows:</p>\n<pre class=\"lang-none prettyprint-override\"><code>c\nAT+CIPSTART=&quot;TCP&quot;,&quot;api.thingspeak.com&quot;,80\nCannot connect to ThingSpeak!\n\n\nCONNECT\n\nOK\n</code></pre>\n<p>This means that the parsing function is ending before it receives the response... As shown in the code below, there is a 10 second timeout currently specified. Even with a 20 second timeout, the same thing happens, despite the fact that when executed manually, the response arrives in around one second.</p>\n<p>Just to test the parsing function, I tried searching for <code>&quot;80&quot;</code> and it returned true as this is found at the end of the first line of the response. Whether it searches for <code>&quot;OK&quot;</code> or <code>&quot;OK\\r\\n&quot;</code> the result is the same, it returns false and THEN the rest of the response is received.</p>\n<p>Here's the code:</p>\n<pre><code>boolean waitForResponse(String target, unsigned long timeout)\n{\n  unsigned long startTime = millis();\n  String responseBuffer;\n  char charIn;\n\n  // Keep checking for ESP response until timeout expires\n  while ((millis() - startTime) &lt; timeout)\n  {\n    if (ESP.available())\n    {\n      responseBuffer += ESP.read();\n    }\n  }\n  Serial.println(responseBuffer);\n\n  if (responseBuffer.endsWith(target))\n  {\n    return true;\n  } else {\n    return false;\n  }\n}\n\nvoid openCxn()\n{\n  ESP.print(&quot;AT+CIPSTART=\\&quot;TCP\\&quot;,\\&quot;api.thingspeak.com\\&quot;,80&quot;);\n  delay(500);\n  if (waitForResponse(&quot;80&quot;, 10000L))\n  {\n    Serial.println(&quot;Connected to ThingSpeak!&quot;);\n  } else {\n    Serial.println(&quot;Cannot connect to ThingSpeak!&quot;);\n  }\n}\n</code></pre>\n<p>Why does it return before the full response is received (well within the timeout period)? Is it something to do with the <code>endsWith()</code> function?</p>\n<p>Consequently, do you have any ideas of how to make it parse the entire response instead of just the first line?</p>\n<p>To reiterate, I am only interested in the end of the response (e.g. <code>&quot;OK&quot;</code> or <code>&quot;OK\\r\\n&quot;</code>).</p>\n"}, {"tags": ["c++", "c", "windows", "debugging", "winapi"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1466626926, "post_id": 37976044, "comment_id": 63401194, "body": "@alk: If those were soft/hard links, they&#39;d be user-visible."}, {"owner": {"reputation": 552, "user_id": 6500775, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6ce0d9d9a1e41be439a231c5674e5298?s=128&d=identicon&r=PG&f=1", "display_name": "Aviv", "link": "https://stackoverflow.com/users/6500775/aviv"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1466629557, "post_id": 37976044, "comment_id": 63402470, "body": "@alk, These are not links."}, {"owner": {"reputation": 5685, "user_id": 5240004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j8eFV.jpg?s=128&g=1", "display_name": "theB", "link": "https://stackoverflow.com/users/5240004/theb"}, "edited": false, "score": 1, "creation_date": 1466641105, "post_id": 37976044, "comment_id": 63406154, "body": "<code>dumpbin &#47;imports winword.exe</code> suggests that Office 2016 is using App-V"}, {"owner": {"reputation": 552, "user_id": 6500775, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6ce0d9d9a1e41be439a231c5674e5298?s=128&d=identicon&r=PG&f=1", "display_name": "Aviv", "link": "https://stackoverflow.com/users/6500775/aviv"}, "reply_to_user": {"reputation": 5685, "user_id": 5240004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j8eFV.jpg?s=128&g=1", "display_name": "theB", "link": "https://stackoverflow.com/users/5240004/theb"}, "edited": false, "score": 0, "creation_date": 1466670666, "post_id": 37976044, "comment_id": 63416891, "body": "@theB, How does process explorer get the correct path?"}], "answers": [{"comments": [{"owner": {"reputation": 552, "user_id": 6500775, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6ce0d9d9a1e41be439a231c5674e5298?s=128&d=identicon&r=PG&f=1", "display_name": "Aviv", "link": "https://stackoverflow.com/users/6500775/aviv"}, "edited": false, "score": 0, "creation_date": 1466686103, "post_id": 37992055, "comment_id": 63427783, "body": "will it be available only within the visualized process or other processes will be able to call it as well?"}, {"owner": {"reputation": 5685, "user_id": 5240004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j8eFV.jpg?s=128&g=1", "display_name": "theB", "link": "https://stackoverflow.com/users/5240004/theb"}, "reply_to_user": {"reputation": 552, "user_id": 6500775, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6ce0d9d9a1e41be439a231c5674e5298?s=128&d=identicon&r=PG&f=1", "display_name": "Aviv", "link": "https://stackoverflow.com/users/6500775/aviv"}, "edited": false, "score": 1, "creation_date": 1466686867, "post_id": 37992055, "comment_id": 63428369, "body": "I ran my test of that code in an independent scratch C++ conole application, without injecting a thread into the process. My install is a little different from yours, so there may be some unaccounted for edge cases, but it appears from experiments that Process Explorer is using this method, and all of the DLLs I get are physically present where reported."}, {"owner": {"reputation": 552, "user_id": 6500775, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6ce0d9d9a1e41be439a231c5674e5298?s=128&d=identicon&r=PG&f=1", "display_name": "Aviv", "link": "https://stackoverflow.com/users/6500775/aviv"}, "edited": false, "score": 0, "creation_date": 1466687329, "post_id": 37992055, "comment_id": 63428724, "body": "Thank you dude. You really helped me"}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1466691104, "post_id": 37992055, "comment_id": 63431841, "body": "Unrelated, but I am kind of shocked that Office is now using App-V. I can&#39;t think of a good reason why, can you? Probably something to do with licensing... Remember when Office used to be a suite of useful apps for doing productivity work?"}, {"owner": {"reputation": 5685, "user_id": 5240004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j8eFV.jpg?s=128&g=1", "display_name": "theB", "link": "https://stackoverflow.com/users/5240004/theb"}, "reply_to_user": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1466693035, "post_id": 37992055, "comment_id": 63433374, "body": "@CodyGray The only thing I can think of is that they&#39;re using App-V to abstract away the wierdness that comes from being both a store app and a shrinkwrap product. That said, I still think its a complicated solution to the problem. I&#39;d have thought just adding a module loader that uses an appropriately altered DLL search path would be enough."}, {"owner": {"reputation": 552, "user_id": 6500775, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6ce0d9d9a1e41be439a231c5674e5298?s=128&d=identicon&r=PG&f=1", "display_name": "Aviv", "link": "https://stackoverflow.com/users/6500775/aviv"}, "edited": false, "score": 0, "creation_date": 1466977615, "post_id": 37992055, "comment_id": 63526887, "body": "@theB, just tested your code and it did not manage to find those DLLs on 2016 office. Then I saw your side comment and realized you experienced the same issue. Do you know any possible way to overcome it?"}], "tags": [], "owner": {"reputation": 5685, "user_id": 5240004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j8eFV.jpg?s=128&g=1", "display_name": "theB", "link": "https://stackoverflow.com/users/5240004/theb"}, "is_accepted": true, "score": 3, "last_activity_date": 1466685939, "creation_date": 1466685939, "answer_id": 37992055, "question_id": 37976044, "link": "https://stackoverflow.com/questions/37976044/getting-processs-loaded-modules-which-does-not-really-exist/37992055#37992055", "title": "Getting process&#39;s loaded modules which does not really exist", "body": "<p>Office 2016 is using App-V to redirect and virtualize some of its paths. This complicates finding the DLLs a bit. Process Explorer is using a slightly more complicated<sup>1</sup> method for finding the DLLs. In general the process is:</p>\n\n<ol>\n<li>Create a Tool Help 32 snapshot, with the <code>TH32CS_SNAPMODULE</code> and <code>TH32CS_SNAPMODULE32</code> flags.</li>\n<li>Use <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms684218.aspx\" rel=\"nofollow\"><code>Module32First</code></a> and <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms684221.aspx\" rel=\"nofollow\"><code>Module32Next</code></a> to obtain information about the modules in the process.</li>\n<li>To resolve symbolic links, which on my Office 2016 are present for the App-V dlls, open the file, and use <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa364962.aspx\" rel=\"nofollow\"><code>GetFinalPathNameByHandle</code></a> to obtain the resolved path. (Note this will be the path including the leading <code>\\\\?\\</code> but that's easy enough to remove.)</li>\n</ol>\n\n<p>An example implementation:</p>\n\n<pre><code>// Obtain the Process ID however you like. I used GetWindowThreadProcessId.\nif (processId != 0)\n{\n    HANDLE snapshot = CreateToolhelp32Snapshot(TH32CS_SNAPMODULE | TH32CS_SNAPMODULE32, processId);\n    if (snapshot != INVALID_HANDLE_VALUE)\n    {\n        MODULEENTRY32W moduleInfo = { 0 };\n        moduleInfo.dwSize = sizeof(MODULEENTRY32W);\n\n        BOOL ok = Module32FirstW(snapshot, &amp;moduleInfo);\n        if (!ok)\n        {\n            // The read failed, handle the error here.\n        }\n        do\n        {\n            HANDLE hFile = CreateFileW(moduleInfo.szExePath, \n                                       0, \n                                       FILE_SHARE_READ | FILE_SHARE_WRITE | FILE_SHARE_DELETE, \n                                       NULL, \n                                       OPEN_EXISTING, \n                                       FILE_ATTRIBUTE_NORMAL, \n                                       NULL);\n            if (hFile)\n            {\n                WCHAR realPath[MAX_PATH];\n                DWORD result = GetFinalPathNameByHandleW(hFile, \n                                                         realPath, \n                                                         MAX_PATH, \n                                                         FILE_NAME_NORMALIZED);\n                if (result &gt; 0)\n                {\n                    wcout &lt;&lt; L\"Module: \" &lt;&lt; realPath &lt;&lt; endl;\n                }\n\n                CloseHandle(hFile);\n            }\n            else\n            {\n                wcout &lt;&lt; L\"Module Name: \" &lt;&lt; moduleInfo.szExePath &lt;&lt; endl;\n            }\n        } while (Module32NextW(snapshot, &amp;moduleInfo));\n\n        CloseHandle(snapshot);\n    }\n}\n</code></pre>\n\n<p><em><sup>1</sup> Note that Process Explorer was written by Sysinternals, and may be using lower level information. This method does resolve the DLLs on my 2016 install.</em></p>\n"}], "owner": {"reputation": 552, "user_id": 6500775, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6ce0d9d9a1e41be439a231c5674e5298?s=128&d=identicon&r=PG&f=1", "display_name": "Aviv", "link": "https://stackoverflow.com/users/6500775/aviv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1411, "favorite_count": 4, "accepted_answer_id": 37992055, "answer_count": 1, "score": 3, "last_activity_date": 1466685939, "creation_date": 1466621293, "last_edit_date": 1466641072, "question_id": 37976044, "link": "https://stackoverflow.com/questions/37976044/getting-processs-loaded-modules-which-does-not-really-exist", "title": "Getting process&#39;s loaded modules which does not really exist", "body": "<p>While examining Microsoft Word's loaded modules, I came across something very strange. I wrote a little program to output the location of all of the loaded DLLs. Here is the output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/2eWRp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2eWRp.png\" alt=\"Loaded modules using snapshot&#39;s WinApi\"></a></p>\n\n<p>When I try to find these modules on my PC, I couldn't find them at the given location, but in another location:</p>\n\n<p><a href=\"https://i.stack.imgur.com/6iemB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6iemB.png\" alt=\"The DLL&#39;s actual location\"></a></p>\n\n<p>I couldn't figure out why the paths of the DLLs are different, and I couldn't find anything related to it in Google either, although I suspect it has something to do with the VFS thing.</p>\n\n<p>That said, somehow Process Explorer manages to display the DLL's original location.</p>\n\n<p>Can someone tell me how Process Explorer does that, and how I can achieve the same result in my code?</p>\n\n<p><strong><em>--------------- EDIT ----------------</em></strong></p>\n\n<ol>\n<li><p>I have also tried to inject a DLL and walk the LDR of WINWORD but still I can't see the original DLLs location.</p></li>\n<li><p>Sysinternal's ListDlls utility doesn't show the original DLLs location also.\nAs for now, only Process Explorer shows the right location.</p></li>\n</ol>\n"}, {"tags": ["c", "linux", "sockets", "raw-ethernet"], "answers": [{"tags": [], "owner": {"reputation": 336, "user_id": 3958282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a431d445ae9c2f2c9eff5cf0a23feca?s=128&d=identicon&r=PG&f=1", "display_name": "Matt S", "link": "https://stackoverflow.com/users/3958282/matt-s"}, "is_accepted": true, "score": 6, "last_activity_date": 1564647758, "last_edit_date": 1564647758, "creation_date": 1466623845, "answer_id": 37976740, "question_id": 37976001, "link": "https://stackoverflow.com/questions/37976001/using-sendmsg-sendmmsg-with-raw-ethernet-frames/37976740#37976740", "title": "Using sendmsg/sendmmsg with raw ethernet frames", "body": "<p>I got this code to work after making a few adjustments.</p>\n\n<p>Instead of sending the address as a string of bytes as implied by the man page for <code>sendmsg()</code>, I used a <code>struct sockaddr_ll</code>. I also pointed the <code>iovec</code> at a buffer containing the complete Ethernet frame including headers. Why the man page explicitly specifies a <code>const struct sockaddr*</code> in the <code>sendto</code> prototype but a <code>void*</code> in the <code>msghdr</code> definition remains unknown to me.</p>\n\n<p>I added this code after the call to <code>socket()</code>:</p>\n\n<pre><code> 39         struct sockaddr_ll address;\n 40         struct ifreq    buffer;                                 // To get information with ioctl()\n 41         char            ifname[] = {\"eth0\"};\n 42         int             ifindex;                                // Interface index, from ioctl() call\n\n 57         memset(&amp;buffer, 0, sizeof(buffer));                     // Getting interface index value\n 58         strncpy(buffer.ifr_name, ifname, IFNAMSIZ);\n 59         ioctl(s, SIOCGIFINDEX, &amp;buffer);\n 60         ifindex = buffer.ifr_ifindex;\n 61\n 62         // Setup sockaddr_ll address\n 63         memset( (void*) &amp;address, 0, sizeof(address) );\n 64         address.sll_family = PF_PACKET;\n 65         address.sll_ifindex = ifindex;\n 66         address.sll_halen = ETH_ALEN;\n 67         memcpy( (void*) (address.sll_addr), (void*) dest, ETH_ALEN );\n</code></pre>\n\n<p>and replaced these lines of code for the msghdr struct assignment:</p>\n\n<pre><code> 81         msg.msg_name = &amp;address;\n 82         msg.msg_namelen = sizeof(address);\n</code></pre>\n"}], "owner": {"reputation": 336, "user_id": 3958282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a431d445ae9c2f2c9eff5cf0a23feca?s=128&d=identicon&r=PG&f=1", "display_name": "Matt S", "link": "https://stackoverflow.com/users/3958282/matt-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1943, "favorite_count": 0, "accepted_answer_id": 37976740, "answer_count": 1, "score": 5, "last_activity_date": 1564647758, "creation_date": 1466621108, "question_id": 37976001, "link": "https://stackoverflow.com/questions/37976001/using-sendmsg-sendmmsg-with-raw-ethernet-frames", "title": "Using sendmsg/sendmmsg with raw ethernet frames", "body": "<p>I'm trying to use C to send raw ethernet packets via sendmsg.  This code successfully opens a raw packet socket, attempts to fill a struct iovec with a single array of bytes (char message[]), then fills a struct msghdr with the destination address, the address length, and a pointer to the struct iovec containing the message. sendmsg() returns EINVAL for every call but I have no idea which arguments are invalid. (I've deleted some perror() calls to make this code simpler to read; the output is \"Invalid argument\".)</p>\n\n<p>I haven't been able to find any examples of how sendmsg() would work with raw sockets, but similar code using sendto() works as expected. In that code, I form the Ethernet frame explicitly, including headers and protocol information, but to my understanding that's not necessary with a sendmsg() call? I've also attempted to have message.iov_base point to a buffer containing that explicitly-formed Ethernet frame including the 14-byte header, but sendmsg() also balks at that.</p>\n\n<p>Can sendmsg() and sendmmsg() work with raw Ethernet frames? Is there something I'm missing about the iovec that is making it invalid? </p>\n\n<pre><code> 30 int main(void) {\n 32         unsigned char   dest[ETH_ALEN] = {0x11, 0x11, 0x11, 0x11, 0x11, 0x11}; // destination MAC address\n 33\n 34         // Socket variables\n 35         int             s;  \n 36         unsigned short  protocol = htons(ETH_P_802_EX1); \n 38 \n 39         // Message variables\n 40         char            message[] = {\"Test message. Test message. Test message!\\n\"};\n 41         size_t          msg_len = strlen(message) + 1;          // Message length includes null terminator\n 42         int             e;                                      // Error code\n 43         struct msghdr   msg;\n 44         struct iovec    msgvec;\n 45 \n 46         // Setup source-side socket\n 47         s = socket(AF_PACKET, SOCK_RAW, protocol);\n 48         if (s &lt; 0) { printf(\"%d: %s\\n\", errno, strerror(errno)); return EXIT_FAILURE; }\n 49 \n 50         msgvec.iov_base = message;\n 51         msgvec.iov_len = msg_len;\n 52         memset(&amp;msg, 0, sizeof(msg));\n 53         msg.msg_name = dest;\n 54         msg.msg_namelen = ETH_ALEN;\n 55         msg.msg_control = NULL;\n 56         msg.msg_controllen = 0;\n 57         msg.msg_flags = 0;\n 65         msg.msg_iov = &amp;msgvec;\n 66         msg.msg_iovlen = 1;\n 67 \n 68         for (int i=0; i&lt;10; i++) {\n 69                 e = sendmsg(s, &amp;msg, 0);\n 73         }\n 79         close(s);\n 80         return EXIT_SUCCESS;\n 81 }\n</code></pre>\n"}, {"tags": ["c", "arduino", "modbus", "modbus-tcp"], "answers": [{"tags": [], "owner": {"reputation": 781, "user_id": 1016246, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2659baeac9812530ec2e1160f29b29aa?s=128&d=identicon&r=PG", "display_name": "Illishar", "link": "https://stackoverflow.com/users/1016246/illishar"}, "is_accepted": false, "score": 1, "last_activity_date": 1466671311, "creation_date": 1466671311, "answer_id": 37986410, "question_id": 37975604, "link": "https://stackoverflow.com/questions/37975604/modbus-tcp-arduino/37986410#37986410", "title": "Modbus TCP - Arduino", "body": "<p>In general, when doing communication on any given line, file or media, you risk breaking up the data. Ethernet actually has a package size (MTU) that can/will be delivered unbroken. But that's another story. It'll be better if you deal with the issue, no matter protocol, hardware or platform. (Or at least be aware of it.)</p>\n\n<p>When you read your ModbusTCP, you should make something like the following pseudo:</p>\n\n<pre><code>//read all ModbusTCP header\nwhile less than 6 bytes received and not timed out and not error\n   read bytes\n\n//read data\ndata_length = modbustcp_header position 5 and 6\nwhile less than data_length and not timed out and not error\n   read bytes\n</code></pre>\n\n<p>The above function will collect the whole package, before \"releasing\" it to your engine. The algorithm will work for both sides of your setup. (Both the Texas hw and the PC.)</p>\n\n<p>You could also (most likely) fiddle with the TI TCP stack and make it return bigger blocks. And I guess this was what you were asking for. But again, I wouldn't recommend going down that road. </p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 6382625, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6fd467db2b3e05e28c680e35b4197f1a?s=128&d=identicon&r=PG&f=1", "display_name": "Pr_123", "link": "https://stackoverflow.com/users/6382625/pr-123"}, "is_accepted": false, "score": 0, "last_activity_date": 1466699848, "creation_date": 1466699848, "answer_id": 37997282, "question_id": 37975604, "link": "https://stackoverflow.com/questions/37975604/modbus-tcp-arduino/37997282#37997282", "title": "Modbus TCP - Arduino", "body": "<p>Thank you Illishar !</p>\n\n<p>I found a way to do it. In Arduino there is a client function, that could send the entire array without sending one value at a time.</p>\n\n<pre><code>byte command[17] = {0x00,0x01,0x00,0x00,0x00,0x0B,0x01,0x10,0x00,0x00,0x00,0x02,0x04,0x00,0x07,0x00,0x00};\n MbmClient.write(command,17);\n</code></pre>\n\n<p>This client.write(buffer,number of elements) helps me to send the entire content in a single packet. It works like a charm :)</p>\n"}], "owner": {"reputation": 31, "user_id": 6382625, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6fd467db2b3e05e28c680e35b4197f1a?s=128&d=identicon&r=PG&f=1", "display_name": "Pr_123", "link": "https://stackoverflow.com/users/6382625/pr-123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 262, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1466699848, "creation_date": 1466619750, "question_id": 37975604, "link": "https://stackoverflow.com/questions/37975604/modbus-tcp-arduino", "title": "Modbus TCP - Arduino", "body": "<p>I have to implement a Modbus TCP using a TI Launchpad board which is similar to Arduino. I have the following snippet.</p>\n\n<pre><code>MbmByteArray[0] = 0x00;\nMbmByteArray[1] = 0x01;\nMbmByteArray[2] = 0x00;\nMbmByteArray[3] = 0x00;\nMbmByteArray[4] = 0x00;\nMbmByteArray[5] = 0x0B;\nMbmByteArray[6] = 0x01;\nMbmByteArray[7] = 0x10;\nMbmByteArray[8] = 0x00;\nMbmByteArray[9] = 0x00;\nMbmByteArray[10] = 0x00;\nMbmByteArray[11] = 0x02;\nMbmByteArray[12] = 0x04;\nMbmByteArray[13] = 0x00;\nMbmByteArray[14] = 0x08;\nMbmByteArray[15] = 0x00;\nMbmByteArray[16] = 0x00;\n\nSerial.println(\"Written:\");\nfor(int i=0;i&lt;MbmByteArray[5]+6;i++) {\n  int a=0;\n  a = MbmClient.write(MbmByteArray[i]);\n  if(a)\n  {\n// if something is written to the client I check what it is !\n      Serial.println(MbmByteArray[i]);\n      }\n    }\n</code></pre>\n\n<p><a href=\"http://i.stack.imgur.com/0M7Mn.png\" rel=\"nofollow\">This is my client</a></p>\n\n<p>You can see that the bytes are not received continuously. But my entire array is like a command to the client. Is there anyway to get it this way :</p>\n\n<p>2016-06-17 14:28:00.252: Session created</p>\n\n<p>2016-06-17 14:28:00.254: Session opened</p>\n\n<p>2016-06-17 14:28:00.256: 17 bytes received</p>\n\n<blockquote>\n  <p>00 01 00 00 00 0B 01 10 00 00 00 02 04 00 07 00 00</p>\n</blockquote>\n\n<p>2016-06-17 14:28:00.269: 12 bytes sent</p>\n\n<p>&lt; 00 01 00 00 00 06 01 10 00 00 00 02</p>\n\n<p>Please help!</p>\n"}, {"tags": ["c", "pointers", "stack"], "comments": [{"owner": {"reputation": 13521, "user_id": 654953, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f6453f58b70e93dbfa8998b71a95bb09?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/654953/ryan"}, "edited": false, "score": 4, "creation_date": 1466619784, "post_id": 37975601, "comment_id": 63397474, "body": "It does nothing because you told the function to return if the value passed in is equal to <code>NULL</code>"}, {"owner": {"reputation": 199, "user_id": 4389543, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1351846580/picture?type=large", "display_name": "Costi Ivan", "link": "https://stackoverflow.com/users/4389543/costi-ivan"}, "reply_to_user": {"reputation": 13521, "user_id": 654953, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f6453f58b70e93dbfa8998b71a95bb09?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/654953/ryan"}, "edited": false, "score": 0, "creation_date": 1466620254, "post_id": 37975601, "comment_id": 63397738, "body": "@self argue please. Btw I removed that part and it still does not work"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1466620830, "post_id": 37975601, "comment_id": 63398069, "body": "This is not your problem, but why are you calling <code>free</code> on <code>prev-&gt;v</code> and <code>aux-&gt;v</code>? The <code>v</code> member isn&#39;t declared as a pointer to anything; are you assigning the result of <code>malloc</code> or <code>calloc</code> to it?"}, {"owner": {"reputation": 199, "user_id": 4389543, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1351846580/picture?type=large", "display_name": "Costi Ivan", "link": "https://stackoverflow.com/users/4389543/costi-ivan"}, "reply_to_user": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1466621169, "post_id": 37975601, "comment_id": 63398247, "body": "@JohnBode No , I&#39;m not. You are right. I removed it. But it still does not work properly.."}], "answers": [{"comments": [{"owner": {"reputation": 199, "user_id": 4389543, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1351846580/picture?type=large", "display_name": "Costi Ivan", "link": "https://stackoverflow.com/users/4389543/costi-ivan"}, "edited": false, "score": 0, "creation_date": 1466627325, "post_id": 37976524, "comment_id": 63401395, "body": "Thanks for your help John.I thought that using that chunk of code that you highlighted from my code will just free my stack..I did not know that this could cause &quot;undefined behavior&quot;...I completely forgot to paste the push function, sorry for that(I edited now). I knew about this technique that you showed me but I AM stubborn to find why it does not work the way I&#39;ve tried. If you have time to at least give me a hint I would be even more grateful."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 199, "user_id": 4389543, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1351846580/picture?type=large", "display_name": "Costi Ivan", "link": "https://stackoverflow.com/users/4389543/costi-ivan"}, "edited": false, "score": 0, "creation_date": 1466628464, "post_id": 37976524, "comment_id": 63401947, "body": "@CostiIvan: You say the <code>pop</code> function doesn&#39;t do anything; as written, it doesn&#39;t return any value or write any output to the console, so how are you determining that it isn&#39;t doing anything?  Are you tracing the execution with a debugger?  Are you checking the value of the <code>stack</code> pointer in whatever called <code>pop</code>?"}, {"owner": {"reputation": 199, "user_id": 4389543, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1351846580/picture?type=large", "display_name": "Costi Ivan", "link": "https://stackoverflow.com/users/4389543/costi-ivan"}, "edited": false, "score": 0, "creation_date": 1466629032, "post_id": 37976524, "comment_id": 63402228, "body": "I am checking the value whenever pop is called, yes. E.g. If I have 1 value in stack and I use pop() I either get that exatcly value, or a random value. If I have &gt;1 value using pop() has no effect..."}, {"owner": {"reputation": 199, "user_id": 4389543, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1351846580/picture?type=large", "display_name": "Costi Ivan", "link": "https://stackoverflow.com/users/4389543/costi-ivan"}, "edited": false, "score": 0, "creation_date": 1466665881, "post_id": 37976524, "comment_id": 63413881, "body": "John.... thank you a lot for taking the time to help me figure things out. Now I understand. Your help is highly appreciated."}], "tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": true, "score": 2, "last_activity_date": 1466633099, "last_edit_date": 1466633099, "creation_date": 1466623044, "answer_id": 37976524, "question_id": 37975601, "link": "https://stackoverflow.com/questions/37975601/pop-function-for-stack-in-c/37976524#37976524", "title": "Pop() function for stack in C", "body": "<p>It would help to see how you push items onto the stack.  If you're really calling <code>pop</code> without a <code>push</code> first, well, then it's not <em>supposed</em> to do anything, is it?</p>\n\n<p>This bit makes me nervous:</p>\n\n<pre><code>Node *aux,*prev;\nprev = *stack;\naux = prev-&gt;next;\nif(aux == NULL)\n{\n    free(prev);\n    return;\n}\n</code></pre>\n\n<p>You set <code>prev</code> to <code>*stack</code>, and if nothing follows <code>prev</code>, you free it.  Note that since <code>prev == *stack</code>, you've also freed <code>*stack</code>, so that pointer is now <em>invalid</em>.  If you try to access that pointer in your caller, you'll invoke Undefined Behavior.  </p>\n\n<p>It looks like you're making your list tail the top of the stack; I'm going to tell you right now that you will make your life <em>much</em> simpler if you make the list <em>head</em> the top of the stack, such that your pushes and pops look like the following:</p>\n\n<pre><code>bool push( Node **l, int val )\n{\n  Node *p = calloc( 1, sizeof *p );\n  if ( p )\n  {\n    p-&gt;v = val;\n    p-&gt;next = *l;   // set p to point to the current head of the list\n    *l = p;         // make p the new head of the list\n  }\n  return p != NULL;  // will return false if the calloc (and by extenion,\n}                    // the push operation) fails.  \n\nbool pop( Node **l, int *v )\n{\n  Node *p = *l;      // p points to head of list\n  if ( !p )\n    return false;\n\n  *v = p-&gt;val;     // get value in current node\n  *l = p-&gt;next;    // make the next element the new list head\n  p-&gt;next = NULL;  // sever the old list head\n  free( p );       // and deallocate it\n\n  return true;\n}\n</code></pre>\n\n<p>No list traversals, no need to keep track of current and previous nodes.  All you care about is the head node.  The statement <code>p-&gt;next = NULL;</code> isn't strictly necessary since we immediately free <code>p</code> afterwards.  I like it because it makes it obvious that we have <em>removed</em> <code>p</code> from the list, but if you don't want to spare the cycles, you can omit it.  </p>\n\n<p><strong>Edit</strong></p>\n\n<p>I was right to be nervous about that code. </p>\n\n<p>So here's basically what's happening - when you have exactly one item in the stack, you free the head of the list, <strong>but you don't update the value of the list pointer</strong> (<code>*stack</code> in the original code, <code>*l</code> in the latest edit).  The value of the <code>stack</code> variable in <code>main</code> is unchanged, and now it's <em>invalid</em> - the memory at that address is no longer allocated.  So the next time you call <code>push</code>, it sees that <code>*l</code> is not <code>NULL</code>, and attempts to traverse down the (non-existent) list.  </p>\n\n<p>At this point the behavior is undefined; literally <em>anything</em> can happen.  On my system after the first <code>push</code>, <code>stack</code> has the value <code>0x501010</code>.  I do a <code>pop</code>, which <code>free</code>s that memory, but doesn't change the value of <code>stack</code>.  On the next <code>push</code>, <code>*l</code> is not <code>NULL</code>, so I set <code>(*l)-&gt;next</code> to whatever <code>malloc</code> returns, which in my case is...<code>0x501010</code> again.  So <code>*l</code> is <code>0x501010</code>, and <code>(*l)-&gt;next</code> is <code>0x501010</code>.  If I try to push another item, I wind up in an infinite loop (<code>p</code> == <code>p-&gt;next</code>).  </p>\n\n<p>To fix this, you need to set the list pointer to <code>NULL</code> after you <code>free</code> it:</p>\n\n<pre><code>Node *aux,*prev;\nprev = *l;\naux = prev-&gt;next;\nif(aux == NULL)\n{\n    free(prev);\n    *l = NULL;\n    return;\n}\n</code></pre>\n"}], "owner": {"reputation": 199, "user_id": 4389543, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1351846580/picture?type=large", "display_name": "Costi Ivan", "link": "https://stackoverflow.com/users/4389543/costi-ivan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5256, "favorite_count": 0, "accepted_answer_id": 37976524, "answer_count": 1, "score": -4, "last_activity_date": 1466633099, "creation_date": 1466619727, "last_edit_date": 1466631472, "question_id": 37975601, "link": "https://stackoverflow.com/questions/37975601/pop-function-for-stack-in-c", "title": "Pop() function for stack in C", "body": "<p>I've been trying for some time now to make my pop() function work properly but some strange reason all it does is... nothing.\nHere is my Stack declaration &amp; function.L.E. I also added the push function.</p>\n\n<pre><code>typedef struct node\n{\n    int v;\n    struct node* next;\n}Node;\n\nvoid push(Node **l,int val)\n{\n    Node *p = (Node *)calloc(1,sizeof(Node));\n    p-&gt;v = val;\n    Node *aux=*l;\n    if(aux == NULL)\n    {\n        *l = p;\n        return;\n    }\n    while(aux-&gt;next != NULL)\n        aux = aux-&gt;next;\n    aux-&gt;next = p;\n}\n\nvoid pop(Node **l)\n{\n  if(*l != NULL)\n  {\n    Node *aux,*prev;\n    prev = *l;\n    aux = prev-&gt;next;\n    if(aux == NULL)\n      free(prev);\n    else\n    {\n      while(aux-&gt;next != NULL)\n      {\n         prev = aux;\n         aux = aux-&gt;next;\n      }\n      prev-&gt;next = NULL;\n      free(aux);\n    }\n  }\n}\n</code></pre>\n\n<p>And I call it with</p>\n\n<pre><code>Node *stack = NULL;\npop(&amp;stack);\n</code></pre>\n"}, {"tags": ["c", "linux", "terminal", "console", "printf"], "comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1466620035, "post_id": 37975528, "comment_id": 63397598, "body": "You wrote the daemon, or at least have access to its sources and are willing to touch them? If not you are wrong here at SO."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 2, "creation_date": 1466620182, "post_id": 37975528, "comment_id": 63397686, "body": "Fair enough ... ;-) start it with redirecting <code>stdout</code> to the bit-bucket: <code>.&#47;a.out 1&gt;&#47;dev&#47;null</code>"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 3, "creation_date": 1466620964, "post_id": 37975528, "comment_id": 63398139, "body": "A program intended for use exclusively as a daemon ought not to be outputting anything to its <code>stdout</code>, nor, as far as it is within its control, to <code>stderr</code>.  Direct output to a log file, or log via syslog."}], "owner": {"reputation": 39, "user_id": 6276298, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/1689360237997904/picture?type=large", "display_name": "Kumaran Ida", "link": "https://stackoverflow.com/users/6276298/kumaran-ida"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 354, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1466638993, "creation_date": 1466619485, "last_edit_date": 1466638993, "question_id": 37975528, "link": "https://stackoverflow.com/questions/37975528/how-to-stop-displaying-printf-of-a-particular-c-daemon-in-linux", "title": "How to stop displaying printf of a particular C daemon in Linux", "body": "<p>How can we stop displaying the <code>printf</code> output of a particular daemon on demand? By disabling a particular attribute, can I ignore <code>printf</code>? </p>\n"}, {"tags": ["c", "string", "arduino", "concatenation"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1466619265, "post_id": 37975438, "comment_id": 63397148, "body": "are you in need of <code>snprintf()</code>?"}, {"owner": {"reputation": 15, "user_id": 6500395, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6VxOyFzNwM4/AAAAAAAAAAI/AAAAAAAA5ak/kCiRV8OR3tU/photo.jpg?sz=128", "display_name": "hehxes", "link": "https://stackoverflow.com/users/6500395/hehxes"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1466620853, "post_id": 37975438, "comment_id": 63398086, "body": "yes, it seems so xD"}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1466619920, "post_id": 37975577, "comment_id": 63397542, "body": "Nice &quot;hint&quot; answer per OP request.  UV (Quibble: Disagree with &quot;&quot;strings ... usually terminated with a 0 byte&quot;.  In C, <i>strings always</i> end with a null character, else it is not a string.)"}, {"owner": {"reputation": 15, "user_id": 6500395, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6VxOyFzNwM4/AAAAAAAAAAI/AAAAAAAA5ak/kCiRV8OR3tU/photo.jpg?sz=128", "display_name": "hehxes", "link": "https://stackoverflow.com/users/6500395/hehxes"}, "edited": false, "score": 0, "creation_date": 1466620908, "post_id": 37975577, "comment_id": 63398106, "body": "Thanks for your help, my code does work now :) <code>if (status != 0) {           delay(status);           status = pressure.getPressure(P,T);                      const unsigned char P1 = pressure.getTemperature(P);           const unsigned char T1 = pressure.getTemperature(T);            char buffer [100];           byte data = snprintf(buffer, 100, &quot;temp=%T1&amp;pressure=%P1&quot;, T1, P1);                      httppost();           delay(1000);         }</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 15, "user_id": 6500395, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6VxOyFzNwM4/AAAAAAAAAAI/AAAAAAAA5ak/kCiRV8OR3tU/photo.jpg?sz=128", "display_name": "hehxes", "link": "https://stackoverflow.com/users/6500395/hehxes"}, "edited": false, "score": 0, "creation_date": 1466622299, "post_id": 37975577, "comment_id": 63398855, "body": "@hehxes  <code>&quot;temp=%T1&amp;pressure=%P1&quot;</code> is an unusual format.  Sure it works?"}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1466623106, "post_id": 37975577, "comment_id": 63399249, "body": "@chux: Yes, the C standard defines that const string literals that are not initializers always terminate with a 0 byte. However this <code>char hello[5] = &quot;hello&quot;;</code> is perfectly legal, but will not terminate with a 0 byte. As far as the standard library <code>str\u2026</code> functions is concerned this is not a string of course. The borders of what a string is and what not are a bit blurry. IMHO the use of the in-band signalling 0 byte terminator was one of the worse decisions in the C design process. Sure, having to drag around the length explicitly is annoying, but it would have prevented so many security bugs."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1466623590, "post_id": 37975577, "comment_id": 63399513, "body": "<code>&quot;hello&quot;</code> is a <i>string  literal</i>, not necessarily a <i>string</i>.  True C has blurry terminology."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1466623719, "post_id": 37975577, "comment_id": 63399585, "body": "Disagree with &quot;in-band signaling 0&quot; problem.  Pascal, came out not much later than C.  It used a string length.  Possible other languages used a string length.  C survived - they did not.  (Beta is better than VHS - but it died).  Had C used the &quot;better&quot; explicit length, we might be complaining about <code>D</code> today  and not the forgotten C.  The null character solution worked well for the time.  Yes it is cumbersome today.  I hope for a standard C UTF8 string solution with a explicit use length and buffer size."}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1466630377, "post_id": 37975577, "comment_id": 63402839, "body": "@chux: I think the reasons for Pascal&#39;s demise were not the way it managed strings. The main reasons would have been that there was only a single compiler of significance (Borland) and that the way in which libraries had to be packaged and distributed was kind of cumbersome. Add to that that modifying the underlying runtime system was impractical and which made it a poor fit for OS kernel development. Most runlevel low level stuff was hand written in assembly targeting the BIOS or the OS syscalls."}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1466630511, "post_id": 37975577, "comment_id": 63402892, "body": "@chux: that was kind of a blast from the past. Pascal was the first high level language I learnt and wrote quite a number of programs with (IIRC the first substancially complex program was a control system for my model railroad)."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1466630658, "post_id": 37975577, "comment_id": 63402953, "body": "@datenwolf I miss Borland turbo Pascal BCD floating point option.  It was not a single attribute that determines a products success, but the net of the various features - some good, some not-so-good.  OTOH anymore of a Turbo P love-fest and we&#39;ll need a room."}], "tags": [], "owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "is_accepted": true, "score": 2, "last_activity_date": 1466624533, "last_edit_date": 1466624533, "creation_date": 1466619635, "answer_id": 37975577, "question_id": 37975438, "link": "https://stackoverflow.com/questions/37975438/convert-const-char-to-binary-operator/37975577#37975577", "title": "Convert const char* to binary operator+", "body": "<p>Your problem is not one of data type conversion, but that in C the operator <code>+</code> is defined only for arithmetic operations (adding numbers, or adding an offset to a pointer).</p>\n\n<p>You're attempting to concatenate strings. There is no \"string\" type built into C. C \"strings\" are char arrays, usually terminated with a 0 byte. Arrays in C are fixed size and fixed allocation so there is no array \"concatenation\" operator in C.</p>\n\n<p>Operations on arrays, and thereby also on C \"strings\", are usually implemented through manipulation functions. In your particular case the usual approach is the use of a string formatting function of the <code>printf</code> family. You should look at <code>snprintf</code>.</p>\n"}], "owner": {"reputation": 15, "user_id": 6500395, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6VxOyFzNwM4/AAAAAAAAAAI/AAAAAAAA5ak/kCiRV8OR3tU/photo.jpg?sz=128", "display_name": "hehxes", "link": "https://stackoverflow.com/users/6500395/hehxes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 37975577, "answer_count": 1, "score": 1, "last_activity_date": 1466624533, "creation_date": 1466619207, "last_edit_date": 1466620950, "question_id": 37975438, "link": "https://stackoverflow.com/questions/37975438/convert-const-char-to-binary-operator", "title": "Convert const char* to binary operator+", "body": "<p>I'm stuck at trying to figure out the correct data types for <code>T1</code> and <code>P1</code> (see below).</p>\n\n<p>Compiler error:</p>\n\n<pre><code>weather_station_v1_2.ino:76:37: error: invalid operands of types \u2018const char*\u2019 and \u2018const char [11]\u2019 to binary \u2018operator+\u2019\n</code></pre>\n\n<p>The Code:</p>\n\n<pre><code>if (status != 0) {\n      delay(status);\n      status = pressure.getPressure(P,T);\n\n      const unsigned char P1 = pressure.getTemperature(P);\n      const unsigned char T1 = pressure.getTemperature(T);\n\n      byte data = \"temp\" + T1 + \"&amp;pressure=\" + P1;\n      httppost();\n      delay(1000);\n    }\n</code></pre>\n\n<p>At the end <code>data</code> will be send to a PHP server, but it has to follow the scheme <code>name1=value1&amp;name2=value2</code>.</p>\n\n<p>Would you be so nice and give me a hint about what I'm doing wrong?\nThanks</p>\n"}, {"tags": ["c++", "c", "linux", "gcc"], "comments": [{"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1466622091, "post_id": 37975178, "comment_id": 63398741, "body": "You had double dashes <code>configure: error: unrecognized option: --Wl,-rpath,&#47;home&#47;gccprefix&#47;lib64</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1156, "user_id": 4772791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e9e0e4bd022920a359eac1b22749ca6?s=128&d=identicon&r=PG&f=1", "display_name": "arsv", "link": "https://stackoverflow.com/users/4772791/arsv"}, "is_accepted": false, "score": 0, "last_activity_date": 1466638748, "last_edit_date": 1466638748, "creation_date": 1466637982, "answer_id": 37979846, "question_id": 37975178, "link": "https://stackoverflow.com/questions/37975178/linux-correct-syntax-to-pass-custom-directory-for-libstdc-so-6-via-config/37979846#37979846", "title": "linux correct syntax to pass custom directory for libstdc++.so.6 via config", "body": "<p>The correct syntax would be</p>\n\n<pre><code>./configure ... LDFLAGS=-Wl,-rpath=/home/gccprefix/lib64\n</code></pre>\n\n<p>Looking at the generated Makefiles, you could probably get away with CXXFLAGS but not with CFLAGS which are not used at all for a C++-only project.</p>\n\n<p>Note <code>CFLAGS=-fPIC CFLAGS=-Wfatal-errors CFLAGS=-I...</code> is pointless, only <code>-I...</code> will be passed to the compiler, and only to a C compiler. Try <code>CXXFLAGS=\"-fPIC -Wfatal-errors -I...\"</code> instead, making sure configure gets that as a single argument. Passing it via MYFLAGS probably won't work. </p>\n"}], "owner": {"reputation": 1973, "user_id": 1187098, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2c31da844ec3d4c6889e2dd5e9323037?s=128&d=identicon&r=PG", "display_name": "art vanderlay", "link": "https://stackoverflow.com/users/1187098/art-vanderlay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466638748, "creation_date": 1466618307, "last_edit_date": 1466620552, "question_id": 37975178, "link": "https://stackoverflow.com/questions/37975178/linux-correct-syntax-to-pass-custom-directory-for-libstdc-so-6-via-config", "title": "linux correct syntax to pass custom directory for libstdc++.so.6 via config", "body": "<p>I have a custom compiled gcc 5.4.0 with the following folder structure <code>/home/gccprefix/lib64/libstdc++.so.6</code>.</p>\n\n<p>So far compiling has been going well passing extra flags via configure such as <code>CC=/home/gccprfix/bin/gcc CFLAGS=-fPIC CFLAGS=-Wfatal-errors CFLAGS=-I/home/gccprefix/header/tr1</code>. </p>\n\n<p>But now I have it a problem compiling cairo with <code>/home/gccprefix/bin/ragel</code>. To compile I have a bash script with the flags allocated as a variable, such as </p>\n\n<pre><code>MYFLAGS=\"CC=/home/gccprfix/bin/gcc CFLAGS=-fPIC CFLAGS=-Wfatal-errors CFLAGS=-I/home/gccprefix/header/tr1\"\n.../configure ${MYFLAGS}\n</code></pre>\n\n<p>Ragel was compiled with the <code>/home/gccprefix/bin/gcc</code> as above with no errors.</p>\n\n<p>However during <code>make</code> for cairo, I get</p>\n\n<pre><code>ragel: /lib64/libstdc++.so.6: version `GLIBCXX_3.4.21' not found (required by ragel) \n</code></pre>\n\n<p>This is due to gcc finding the default <code>/usr/lib64/libstdc++.so.6</code>. So following several threads on SO I believe I need to extend the flags passed to configure.</p>\n\n<p>What is the correct syntax</p>\n\n<pre><code>`CFLAGS=-Wl,-rpath,/home/gccprefix/lib64`\n</code></pre>\n\n<p>or do I drop the <code>CFLAGS=</code></p>\n\n<pre><code>`-Wl,-rpath,/home/gccprefix/lib64` \n</code></pre>\n\n<p>Using the first option with <code>CFLAGS=</code> the new <code>libstdc++.so.6</code> is not passed and the same error occurs, using the send without a <code>CFLAGS</code> just gives an error </p>\n\n<pre><code>configure: error: unrecognized option: `--Wl,-rpath,/home/gccprefix/lib64'\n</code></pre>\n\n<p>So what prefix do I use?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1466616208, "post_id": 37974593, "comment_id": 63395379, "body": "Please <b><a href=\"https://stackoverflow.com/posts/37974593/edit\">edit</a></b> your question with a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> or <a href=\"http://sscce.org\" rel=\"nofollow noreferrer\">SSCCE (Short, Self Contained, Correct Example)</a>"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1466616492, "post_id": 37974593, "comment_id": 63395550, "body": "You want to implement you own compare callback function replacing <code>alphasort</code>. RTFM for <code>scandir()</code>."}, {"owner": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "edited": false, "score": 0, "creation_date": 1466616950, "post_id": 37974593, "comment_id": 63395831, "body": "Or you could just invert the order of items in the returned namelist array."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1466621284, "post_id": 37974850, "comment_id": 63398303, "body": "How about <code>alphasort(b, a);</code>?"}], "tags": [], "owner": {"reputation": 23069, "user_id": 156811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/380335e95e6be9740e56b64d667279b3?s=128&d=identicon&r=PG", "display_name": "Havenard", "link": "https://stackoverflow.com/users/156811/havenard"}, "is_accepted": true, "score": 3, "last_activity_date": 1466621452, "last_edit_date": 1466621452, "creation_date": 1466617164, "answer_id": 37974850, "question_id": 37974593, "link": "https://stackoverflow.com/questions/37974593/sort-files-in-descending-alphabetical-order/37974850#37974850", "title": "sort files in descending alphabetical order", "body": "<p>You just need to give <code>scandir()</code> a compare callback that does the negative of what <code>alphasort()</code> does. You can literally just negate <code>alphasort()</code> output:</p>\n\n<pre><code>int descalphasort(const struct dirent **a, const struct dirent **b)\n{\n    return - alphasort(a, b);\n}\n</code></pre>\n\n<p>Or as pointed out by @chux, invert the <code>alphasort()</code> parameters:</p>\n\n<pre><code>int descalphasort(const struct dirent **a, const struct dirent **b)\n{\n    return alphasort(b, a);\n}\n</code></pre>\n\n<p>And use <code>descalphasort</code> on your <code>scandir()</code> call instead of <code>alphasort</code>.</p>\n"}], "owner": {"reputation": 3493, "user_id": 1234137, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/5e3070c0e57f558da88f78534e5e0472?s=128&d=identicon&r=PG", "display_name": "peter", "link": "https://stackoverflow.com/users/1234137/peter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 584, "favorite_count": 0, "accepted_answer_id": 37974850, "answer_count": 1, "score": -2, "last_activity_date": 1466666922, "creation_date": 1466616146, "last_edit_date": 1466666922, "question_id": 37974593, "link": "https://stackoverflow.com/questions/37974593/sort-files-in-descending-alphabetical-order", "title": "sort files in descending alphabetical order", "body": "<p>I am trying to modify this file <a href=\"https://github.com/HaarigerHarald/omxiv/blob/master/omxiv.c\" rel=\"nofollow\">https://github.com/HaarigerHarald/omxiv/blob/master/omxiv.c</a>, I think it is function getImageFilesInDir. I need to change it so it will return back not files in directory in alphabetical ascending order but in alphabetical descending order (img05.png, img04.png, img03.png, img02.png, img01.png), so image viewer will show me the first image that file with the greatest number (in my case img05.png)</p>\n\n<p>I tried something like <code>for(i=0; i-1; i--)</code> but it did not help.\nAny idea please how to do it? </p>\n\n<pre><code>static int getImageFilesInDir(char ***list, const char* path){\n    struct dirent **namelist;\n    int imageNum;\n    imageNum = scandir(path, &amp;namelist, imageFilter, alphasort);\n    if (imageNum &lt; 0)\n        return imageNum;\n    else {\n        *list=malloc(sizeof(char*) *imageNum);\n        int i;\n        for(i=0; i&lt;imageNum; i++) {\n            if(strcmp(path, \".\") == 0 || strcmp(path, \"./\") == 0){\n                (*list)[i]= malloc(strlen(namelist[i]-&gt;d_name)+1);\n                strcpy((*list)[i], namelist[i]-&gt;d_name);\n            }else{\n                if(strrchr(path, '/')- path != strlen(path)-1){\n                    (*list)[i]= malloc(strlen(path)+strlen(namelist[i]-&gt;d_name)+2);\n                    strcpy((*list)[i],path);\n                    (*list)[i][strlen(path)]='/';\n                    strcpy((*list)[i]+strlen(path)+1,namelist[i]-&gt;d_name);\n                }else{\n                    (*list)[i]= malloc(strlen(path)+strlen(namelist[i]-&gt;d_name)+1);\n                    strcpy((*list)[i],path);\n                    strcpy((*list)[i]+strlen(path),namelist[i]-&gt;d_name);\n                }\n            }\n            free(namelist[i]);\n        }\n        free(namelist);\n    }\n    return imageNum;\n}\n</code></pre>\n\n<p>(This is my first touch with C)</p>\n"}, {"tags": ["c", "pipe", "fork"], "comments": [{"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 0, "creation_date": 1466621208, "post_id": 37974261, "comment_id": 63398269, "body": "Please fix your indentation. Experienced programmers generally always prefer to use proper indentation because it helps to visually identify the control flow and variable scope. You are asking for help, so it makes sense to do what you can to make it easier for others to help you."}, {"owner": {"reputation": 61, "user_id": 6237368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28ad3dedae2c52b7a88359cbab1ab448?s=128&d=identicon&r=PG&f=1", "display_name": "DavidCG", "link": "https://stackoverflow.com/users/6237368/davidcg"}, "reply_to_user": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 0, "creation_date": 1466622619, "post_id": 37974261, "comment_id": 63399014, "body": "I tried to do my best, but when I post the code here I have to manually put 4 spaces so the web recognize it like code, and the indentation becomes crazy. I would like to know if there is a way to mark part of the text like code and that the indentation stay like when I copy it from my file."}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 0, "creation_date": 1466622872, "post_id": 37974261, "comment_id": 63399123, "body": "Select your code and press the &quot;{}&quot; button in the editing toolbar (or as per the tooltip, press ctrl+K)."}, {"owner": {"reputation": 61, "user_id": 6237368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28ad3dedae2c52b7a88359cbab1ab448?s=128&d=identicon&r=PG&f=1", "display_name": "DavidCG", "link": "https://stackoverflow.com/users/6237368/davidcg"}, "reply_to_user": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 0, "creation_date": 1466630291, "post_id": 37974261, "comment_id": 63402795, "body": "Hey thank you so much. I did already a few questions here and didn&#39;t know how to fix that, so from now on I will be doing it right :)"}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 6237368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28ad3dedae2c52b7a88359cbab1ab448?s=128&d=identicon&r=PG&f=1", "display_name": "DavidCG", "link": "https://stackoverflow.com/users/6237368/davidcg"}, "edited": false, "score": 0, "creation_date": 1466619392, "post_id": 37975209, "comment_id": 63397219, "body": "Hey thank you so much for answer. Now I&#39;m a bit confused. I did that <code>for</code> (the one who makes the children) with the idea that the variable <code>i</code> was copied to the memory of children, so I can use it to recognice what children is it and use it when I read/write in the pipe (for example <code>pp[i][1]</code>). I think the father only close once the pipes with the <code>if(i==0)</code>, am I right? I&#39;m using that <code>for</code> too so I can create all the children."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 61, "user_id": 6237368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28ad3dedae2c52b7a88359cbab1ab448?s=128&d=identicon&r=PG&f=1", "display_name": "DavidCG", "link": "https://stackoverflow.com/users/6237368/davidcg"}, "edited": false, "score": 0, "creation_date": 1466620641, "post_id": 37975209, "comment_id": 63397963, "body": "I did not suggest getting rid of the <code>for</code> loop in which you create the children.  I suggested moving the code that closes all the pipe ends the parent doesn&#39;t need outside.  The <code>if (i == 0)</code> of course conditions the <code>close(pp[0][0])</code>, but only that.  The inner loop over <code>j</code> is executed for every <code>i</code>.  Since only the parent ever exits the loop, it would be much cleaner and less susceptible to error to simply handle the parent&#39;s pipe ends outside the loop."}, {"owner": {"reputation": 61, "user_id": 6237368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28ad3dedae2c52b7a88359cbab1ab448?s=128&d=identicon&r=PG&f=1", "display_name": "DavidCG", "link": "https://stackoverflow.com/users/6237368/davidcg"}, "edited": false, "score": 0, "creation_date": 1466626342, "post_id": 37975209, "comment_id": 63400928, "body": "Yes you are right, just moving outside that part of the code, works fine :) Thank you"}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 1, "last_activity_date": 1466618397, "creation_date": 1466618397, "answer_id": 37975209, "question_id": 37974261, "link": "https://stackoverflow.com/questions/37974261/pipes-between-more-than-2-children-fail-c/37975209#37975209", "title": "Pipes between more than 2 children fail - C", "body": "<p>You have several problems.</p>\n\n<ul>\n<li><p><code>int* pp[2]</code> doesn't mean what you think it means.  This is an array of two pointers to <code>int</code>, but what you appear to want is a pointer to an array of two <code>int</code>.  That would be <code>int (*pp)[2]</code>.  Your segmentation fault is likely related to this.</p></li>\n<li><p>having corrected the type of <code>pp</code>, you next must allocate it correctly; specifically, all in one chunk.  This is the cleanest way to accomplish that (note that there is no loop involved, and that the needed size is defined in terms of the size of the pointer's target):</p></li>\n</ul>\n\n\n\n<pre><code>    pp = malloc(childrens * sizeof(*pp));\n</code></pre>\n\n<p>If you want the parent to create all the pipes in advance then you do need to use a loop for that.</p>\n\n<ul>\n<li><p>The parent should close unused pipe ends once each, but you have it closing them once per child forked.  Move that out of the loop.</p></li>\n<li><p>Although C allows it, it is poor form to allow control to reach the closing bracket of <code>main()</code>.  Use a <code>return</code> statement or call <code>exit()</code> instead.</p></li>\n<li><p>You assume that your I/O will not split the data, so that single <code>write()</code> and <code>read()</code> calls are sufficient.  That will probably work for you, but it is not, in fact, reliable.  You should loop your <code>write()</code>s and <code>read()</code>s to transfer the full number of bytes via multiple calls when necessary.  Use the return values of these functions to help with this.</p></li>\n<li><p>The preceding implies that you need to communicate between processes how many bytes to read in any one message.  You could do that with a terminator (e.g. a newline or null byte), or by first sending a (fixed-size) integer that says how many characters follow in the same message.</p></li>\n</ul>\n"}], "owner": {"reputation": 61, "user_id": 6237368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28ad3dedae2c52b7a88359cbab1ab448?s=128&d=identicon&r=PG&f=1", "display_name": "DavidCG", "link": "https://stackoverflow.com/users/6237368/davidcg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 37975209, "answer_count": 1, "score": 0, "last_activity_date": 1466630231, "creation_date": 1466614850, "last_edit_date": 1466630231, "question_id": 37974261, "link": "https://stackoverflow.com/questions/37974261/pipes-between-more-than-2-children-fail-c", "title": "Pipes between more than 2 children fail - C", "body": "<p>How can I make functional pipes between 3 or more children?</p>\n\n<p>I use this command:</p>\n\n<p><code>./function n</code> with <code>n</code> the number of children.</p>\n\n<p>And the the father makes <code>n</code> pipes and <code>n</code> children.</p>\n\n<p>After that the children close the pipes they will not use.</p>\n\n<p>Then the father writes something in the first pipe, and the first children read it, and write it to the next pipe. The last child should write the content in the <code>stdout</code>.</p>\n\n<p>When I use only 1 child it works perfect. When I try to use 2 children, the last one reads from the pipe: -1 characters and when I try to use 3 children, I got segment violation and the code doesn't work.</p>\n\n<p>Hope you can help me, here is the code.</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/wait.h&gt;\n\nvoid use_pipes(int i);\nvoid write_father(void);\n\nint (*pp)[2];\nint childrens;\n\nint main(int argc, char* argv[]) {\n\n    childrens = atoi(argv[1]);\n    int p, i, j, aux;\n\n    printf(\"I'm the parent and i'm making %d childrens\\n\", childrens);\n    pp = malloc(sizeof (*pp) * childrens);\n    for (i = 0; i &lt; childrens; i++) {\n\n        if (pipe(pp[i]) &lt; 0) {\n            perror(\"Error in pipe()\");\n            exit(1);\n        }\n\n    }//for\n\n    for (i = 0; i &lt; childrens; i++) {\n        printf(\"I'm the parent pid: %d and I'm going to make the child n\u00ba: %d\\n\", getpid(), i);\n        p = fork();\n\n        switch (p) {\n            case -1:\n                printf(\"We couldn't make the child n\u00ba:%d\\n\", i);\n                exit(1);\n            case 0:\n                //printf(\"I'm n\u00ba: %d, and I start my code\\n\",i);\n\n                for (aux = 0; aux &lt; childrens; aux++) {\n                    if (aux == i) {\n                        //printf(\"I'm the children n\u00ba: %d and I'm going to close the pipe[%d] of writing\\n\", i,i);\n                        close(pp[i][1]);\n                    } else if (aux == i + 1) {\n                        //printf(\"I'm the children n\u00ba: %d and I'm going to close the pipe[%d] of reading\\n\", i,aux);\n                        close(pp[aux][0]);\n                    } else {\n                        //printf(\"I'm the children n\u00ba: %d and I'm going to close the pipe[%d]\\n\", i,aux);\n                        close(pp[aux][0]);\n                        close(pp[aux][1]);\n                    }\n                }//for\n\n                //printf(\"I finished to close my unused pipes\\n\");\n                use_pipes(i);\n                exit(0);\n\n            default:\n                break;\n        }//switch\n    }//for of fork\n    close(pp[0][0]);\n    for (j = 1; j &lt; childrens; j++) {\n        close(pp[j][0]);\n        close(pp[j][1]);\n\n    }//for\n    write_father();\n    int status;\n    for (i = 0; i &lt; childrens; i++) {\n        wait(&amp;status);\n    }\n\n}//main\n\nvoid write_father() {\n    int wroten;\n    char buffer[50] = \"Hello World\";\n    int len = strlen(buffer);\n    wroten = write(pp[0][1], buffer, len);\n    printf(\"The parent wrote: %d characters\\n\", wroten);\n}\n\nvoid use_pipes(int n_children) {\n    int readed;\n    char buffer [50];\n    readed = read(pp[n_children][0], buffer, sizeof (buffer));\n    printf(\"Children %d readed from pipe[%d][0]: %d characters\\n\", n_children, n_children, readed);\n    if (n_children != childrens - 1) {\n        printf(\"Children %d write in the pipe[%d][1]: %d characters\\n\", n_children, n_children + 1, readed);\n        write(pp[n_children + 1][1], buffer, readed);\n    } else\n        write(1, buffer, readed);\n}\n</code></pre>\n\n<p>EDIT: I posted the code that worked for me</p>\n"}, {"tags": ["android", "c", "gcc", "android-ndk", "linker"], "comments": [{"owner": {"reputation": 9869, "user_id": 1147688, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/c76a3f29c105a73c4060b3d1934ccd9a?s=128&d=identicon&r=PG", "display_name": "not2qubit", "link": "https://stackoverflow.com/users/1147688/not2qubit"}, "edited": false, "score": 0, "creation_date": 1485541776, "post_id": 37974228, "comment_id": 70983645, "body": "Please see my answer <a href=\"http://stackoverflow.com/a/41900551/1147688\">HERE</a> for a more comprehensive answer."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6710690, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/40a7c8044f4e67de541c0ce5ad3e94e6?s=128&d=identicon&r=PG", "display_name": "scdm", "link": "https://stackoverflow.com/users/6710690/scdm"}, "is_accepted": false, "score": 0, "last_activity_date": 1471029923, "creation_date": 1471029923, "answer_id": 38925186, "question_id": 37974228, "link": "https://stackoverflow.com/questions/37974228/ndk-pie-binary-showing-linker-warnings-at-runtime/38925186#38925186", "title": "NDK PIE binary showing linker warnings at runtime", "body": "<p>It's NDK 12b issue. Try build with NDK 11c, which have the same toolchain 4.9</p>\n"}], "owner": {"reputation": 108, "user_id": 1563399, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/73bc8657b905d4f2ab0be87b1650ae36?s=128&d=identicon&r=PG", "display_name": "luveti", "link": "https://stackoverflow.com/users/1563399/luveti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2548, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1472375997, "creation_date": 1466614751, "last_edit_date": 1495539968, "question_id": 37974228, "link": "https://stackoverflow.com/questions/37974228/ndk-pie-binary-showing-linker-warnings-at-runtime", "title": "NDK PIE binary showing linker warnings at runtime", "body": "<p>I'm having trouble getting an NDK PIE binary to not show linker warnings at runtime. I need the binary to only show the content printed out by my code, as it gets piped into another program.</p>\n\n<p>Here is my Android.mk file:</p>\n\n<pre><code>LOCAL_PATH := $(call my-dir)\n\ninclude $(CLEAR_VARS)\n\nLOCAL_CFLAGS += -fPIE\nLOCAL_LDFLAGS += -fPIE -pie\n\nLOCAL_MODULE    := test\nLOCAL_SRC_FILES := main.c\n\ninclude $(BUILD_EXECUTABLE)\n</code></pre>\n\n<p>And here is the source for main.c:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main (int argc, char** argv) {\n    printf(\"Hello World\\n\");\n    return 0;\n}\n</code></pre>\n\n<p>Running my program outputs this:</p>\n\n<pre><code>WARNING: linker: ./data/local/test: unused DT entry: type 0x6ffffffe arg 0x384\nWARNING: linker: ./data/local/test: unused DT entry: type 0x6fffffff arg 0x1\nHello world!\n</code></pre>\n\n<p>This question asked something very similar to my issue, but doesn't solve my problem:\n<a href=\"https://stackoverflow.com/q/33206409\">unused DT entry: type 0x1d arg</a></p>\n"}, {"tags": ["c", "arrays", "recursion"], "comments": [{"owner": {"reputation": 7, "user_id": 6500311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f89b79e847ade1a082aad9ad530d9ac0?s=128&d=identicon&r=PG&f=1", "display_name": "c_pro_no", "link": "https://stackoverflow.com/users/6500311/c-pro-no"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1466615137, "post_id": 37974088, "comment_id": 63394772, "body": "@PaulR  just added, thanks"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1466620186, "post_id": 37974088, "comment_id": 63397689, "body": "Posting the code in which &quot;currently having problems in getting all the combinations for comparison ...&quot; would help clarify your goal/issue."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1466620318, "post_id": 37974088, "comment_id": 63397770, "body": "It would make more sense if the signature was <code>int disjoint(const int a[],  int n1, const int b[], int n2)</code> and then drop &quot;no changing the array&quot;."}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1466626723, "post_id": 37974088, "comment_id": 63401104, "body": "How exactly is a number &quot;similar&quot; to another one? Do you mean &quot;equal&quot;? Or is &quot;11&quot; <i>similar</i> to &quot;111&quot;"}, {"owner": {"reputation": 7, "user_id": 6500311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f89b79e847ade1a082aad9ad530d9ac0?s=128&d=identicon&r=PG&f=1", "display_name": "c_pro_no", "link": "https://stackoverflow.com/users/6500311/c-pro-no"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1466668168, "post_id": 37974088, "comment_id": 63415352, "body": "@chux thanks but the signature is as I wrote it."}, {"owner": {"reputation": 7, "user_id": 6500311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f89b79e847ade1a082aad9ad530d9ac0?s=128&d=identicon&r=PG&f=1", "display_name": "c_pro_no", "link": "https://stackoverflow.com/users/6500311/c-pro-no"}, "reply_to_user": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1466668233, "post_id": 37974088, "comment_id": 63415379, "body": "@tofro in similar I mean equal."}, {"owner": {"reputation": 12533, "user_id": 931027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lWhaB.jpg?s=128&g=1", "display_name": "Kusalananda", "link": "https://stackoverflow.com/users/931027/kusalananda"}, "edited": false, "score": 0, "creation_date": 1466674159, "post_id": 37974088, "comment_id": 63419326, "body": "About your update: explain (show)."}], "answers": [{"comments": [{"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 1, "creation_date": 1466673750, "post_id": 37974372, "comment_id": 63419024, "body": "Positively agree to your last statement - Starting from scratch when doing recursion is way easier than trying to refactor an iterative solution."}], "tags": [], "owner": {"reputation": 12533, "user_id": 931027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lWhaB.jpg?s=128&g=1", "display_name": "Kusalananda", "link": "https://stackoverflow.com/users/931027/kusalananda"}, "is_accepted": false, "score": 2, "last_activity_date": 1466615714, "last_edit_date": 1466615714, "creation_date": 1466615274, "answer_id": 37974372, "question_id": 37974088, "link": "https://stackoverflow.com/questions/37974088/finding-if-two-arrays-have-common-numbers-using-recursion/37974372#37974372", "title": "Finding if two arrays have common numbers using recursion", "body": "<p>I'm not solving it for you but...</p>\n\n<p>Using pseudo-annotation: The arrays <code>a[0..n]</code> and <code>b[0..m]</code> are disjoint if <code>a[0] != b[0]</code> and if <code>a[1..n]</code> and <code>b[0..m]</code> are disjoint <em>and</em> <code>a[0..n]</code> and <code>b[1..m]</code> are disjoint.</p>\n\n<p>I <em>think</em> I got that right...</p>\n\n<p>Ok, another hint: One of the recursive calls might look like <code>disjoint(a + 1, n1 - 1, b, n2)</code></p>\n\n<p>When doing recursion, it's (at least for me) better to look at the problem and formulate the solution in terms of the problem itself, rather than writing an iterative solution and then trying to \"translate\" it.</p>\n"}], "owner": {"reputation": 7, "user_id": 6500311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f89b79e847ade1a082aad9ad530d9ac0?s=128&d=identicon&r=PG&f=1", "display_name": "c_pro_no", "link": "https://stackoverflow.com/users/6500311/c-pro-no"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1466668947, "creation_date": 1466614281, "last_edit_date": 1466668947, "question_id": 37974088, "link": "https://stackoverflow.com/questions/37974088/finding-if-two-arrays-have-common-numbers-using-recursion", "title": "Finding if two arrays have common numbers using recursion", "body": "<p>The question goes like this: \nwrite a recursive function that gets two positive int arrays and their sizes.\nThe function returns 0 if there is at least one common object and 1 if there isn't.</p>\n\n<pre><code>int disjoint(int a[], int n1, int b[], int n2)\n</code></pre>\n\n<p>The requirements are as follows:</p>\n\n<ul>\n<li>no helper functions</li>\n<li>no loops</li>\n<li>no changing the array</li>\n<li>only recursion</li>\n</ul>\n\n<p>I am currently having problems in getting all the combinations for comparison, in other words how to translate nested loops to recursion.</p>\n\n<p><strong><em>update</em></strong>\nthis one works but it makes unnecessary iterations.</p>\n\n<pre><code>int disjoint(int g1[], int n1 , int g2[], int n2 ){\nif(g1[0]==g2[0])return 0;\nif(n2-1&gt;0&amp;&amp;n1-1&gt;=0){\nreturn disjoint(g1+1,n1-1,g2,n2)*disjoint(g1,n1,g2+1,n2-1);\n}\nreturn 1;\n}\n</code></pre>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 4, "creation_date": 1466614111, "post_id": 37974005, "comment_id": 63394126, "body": "Hint: think about what <code>a[]</code> looks like in memory. (Also note that you appear to be running this program on a little endian architecture)."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1466614253, "post_id": 37974005, "comment_id": 63394199, "body": "<code>p+1</code> increments <code>p</code> by as many bytes the type it points is long."}, {"owner": {"reputation": 2988, "user_id": 452414, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rDMfs.png?s=128&g=1", "display_name": "babon", "link": "https://stackoverflow.com/users/452414/babon"}, "edited": false, "score": 0, "creation_date": 1466614632, "post_id": 37974005, "comment_id": 63394467, "body": "Another hint: consider doing a <code>sizeof()</code> for <code>int</code> and <code>char</code>"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1466614694, "post_id": 37974005, "comment_id": 63394518, "body": "<i>not understanding why 0 in the next printf</i> What were you expecting to see?"}, {"owner": {"reputation": 93, "user_id": 6304546, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2b2f376983ae98318c0df0664ab00e80?s=128&d=identicon&r=PG&f=1", "display_name": "gk123", "link": "https://stackoverflow.com/users/6304546/gk123"}, "edited": false, "score": 0, "creation_date": 1466614926, "post_id": 37974005, "comment_id": 63394670, "body": "Will the last printf extract 2 bytes from the location it is pointing to or 1 byte  ? I&#39;m on 16 bit compiler ?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1466618533, "post_id": 37974005, "comment_id": 63396741, "body": "<code>p=(int *)(p+1);</code> is undefined behavior (UB) as it can violate alignment requirements.  Code may crash"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1467015434, "post_id": 37974005, "comment_id": 63537048, "body": "To answer <i>&quot;What does this statement do ?&quot;</i>, print the address of <code>a[0]</code> through <code>a[2]</code> and then the address of <code>p</code> after <code>p=(int *)(p+1);</code>. by my guess it is <code>1 int</code> or <code>4-bytes</code> after <code>p</code>, or the equivalent of <code>a[3]</code> (which is beyond the end of your <code>a</code>)"}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 6304546, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2b2f376983ae98318c0df0664ab00e80?s=128&d=identicon&r=PG&f=1", "display_name": "gk123", "link": "https://stackoverflow.com/users/6304546/gk123"}, "edited": false, "score": 0, "creation_date": 1466615180, "post_id": 37974248, "comment_id": 63394806, "body": "I&#39;m running it on 16 bit compiler."}, {"owner": {"reputation": 93, "user_id": 6304546, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2b2f376983ae98318c0df0664ab00e80?s=128&d=identicon&r=PG&f=1", "display_name": "gk123", "link": "https://stackoverflow.com/users/6304546/gk123"}, "edited": false, "score": 0, "creation_date": 1466615425, "post_id": 37974248, "comment_id": 63394934, "body": "Won&#39;t the last printf extract 2 byte from the location it is pointing to ? I&#39;m little bit confused due to this line p=(int *)(p+1);"}, {"owner": {"reputation": 155, "user_id": 2317670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/717b9f03b17b636e2ff918d7d40bc92d?s=128&d=identicon&r=PG&f=1", "display_name": "carmiac", "link": "https://stackoverflow.com/users/2317670/carmiac"}, "reply_to_user": {"reputation": 93, "user_id": 6304546, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2b2f376983ae98318c0df0664ab00e80?s=128&d=identicon&r=PG&f=1", "display_name": "gk123", "link": "https://stackoverflow.com/users/6304546/gk123"}, "edited": false, "score": 1, "creation_date": 1466615637, "post_id": 37974248, "comment_id": 63395068, "body": "So, that line is a bit tricky. If it wasn&#39;t for the (int *) cast it would be obvious that it is just incrementing p to point to the next char. However, it looks like it might be doing something else due to the cast. Don&#39;t be fooled! Due to C&#39;s order of operations, the increment happens before the cast, which is then re-cast back to a char*. So, the cast in that line isn&#39;t doing anything."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 1, "creation_date": 1466666239, "post_id": 37974248, "comment_id": 63414116, "body": "Downvoted, because this answer doesn&#39;t tell that <code>p=(int *)(p+1);</code> is undefined behaviour."}], "tags": [], "owner": {"reputation": 155, "user_id": 2317670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/717b9f03b17b636e2ff918d7d40bc92d?s=128&d=identicon&r=PG&f=1", "display_name": "carmiac", "link": "https://stackoverflow.com/users/2317670/carmiac"}, "is_accepted": false, "score": 0, "last_activity_date": 1466618082, "last_edit_date": 1466618082, "creation_date": 1466614806, "answer_id": 37974248, "question_id": 37974005, "link": "https://stackoverflow.com/questions/37974005/typecasting-character-pointer-to-an-integer-pointer/37974248#37974248", "title": "Typecasting character pointer to an integer pointer", "body": "<p>This is a question about the width and endianness of <code>int</code>s and <code>char</code>s.</p>\n\n<p>If we assume that you are on a machine with 32 bit little-endian <code>int</code>s and 8 bit <code>char</code>s, then it looks like this in memory:</p>\n\n<pre><code>a[0]      a[1]      a[2]\n[2 0 0 0] [3 0 0 0] [4 0 0 0]\n</code></pre>\n\n<p>Where each printed character is 8 bits wide and each <code>[ ]</code> set is a 32 bit entry in <code>a</code>.</p>\n\n<p><code>p</code>, on the other hand, is a pointer to 8 bit <code>char</code>s. When <code>p</code> is set to point at <code>a[0]</code>, it points to the first 8 bit entry in <code>a</code>, which is <code>2</code>. The next 8 bit entry in a is the <code>0</code> just to the right of the <code>2</code>.</p>\n\n<p>If the machine you were working on had a different width or layout for <code>int</code>s, then the answer could be different.</p>\n\n<hr>\n\n<p>Update:</p>\n\n<p>Here is a in a 16bit little-endian <code>int</code> environment</p>\n\n<pre><code>a[0]  a[1]  a[2]\n[2 0] [3 0] [4 0]\n</code></pre>\n\n<p>And in a 32bit big-endian <code>int</code> environment</p>\n\n<pre><code>a[0]      a[1]      a[2]\n[0 0 0 2] [0 0 0 3] [0 0 0 4]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93, "user_id": 6304546, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2b2f376983ae98318c0df0664ab00e80?s=128&d=identicon&r=PG&f=1", "display_name": "gk123", "link": "https://stackoverflow.com/users/6304546/gk123"}, "edited": false, "score": 0, "creation_date": 1466615306, "post_id": 37974293, "comment_id": 63394871, "body": "How      p=(int <i>)(p+1);    p = (int</i>)p+1;   these two are different ?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 93, "user_id": 6304546, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2b2f376983ae98318c0df0664ab00e80?s=128&d=identicon&r=PG&f=1", "display_name": "gk123", "link": "https://stackoverflow.com/users/6304546/gk123"}, "edited": false, "score": 0, "creation_date": 1466615648, "post_id": 37974293, "comment_id": 63395074, "body": "@gk123, No. But <code>(int*)(p+1)</code> is different from <code>(int*)p+1</code>."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1466617291, "post_id": 37974293, "comment_id": 63396025, "body": "A &quot;<i>cast</i>&quot; is implicitly &quot;<i>explicit</i>&quot;. So yours is &quot;<i>explicit</i>&quot;ly explicit?;-) Still 1+, also for avoiding the so beloved phrase &quot;integer promotion&quot;."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1466617464, "post_id": 37974293, "comment_id": 63396149, "body": "@alk, <code>char* p = a;</code> is also a cast but it is implicit."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1466617487, "post_id": 37974293, "comment_id": 63396167, "body": "No, that&#39;s an implicit conversion. A cast is an explicit &quot;conversion&quot;, using the hammer, so to say, <i>make</i> it fit."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1466617699, "post_id": 37974293, "comment_id": 63396290, "body": "@alk, you&#39;re right. A language lawyer I am not :) :)"}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1466666117, "post_id": 37974293, "comment_id": 63414031, "body": "<i>&quot;That cast does not do anything.&quot;</i> Yes it does. It creates undefined behaviour. <code>p=(int *)(p+1);</code> and <code>p=p+1</code> are not indentical, as former breaks strict aliasing rules."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1466698347, "post_id": 37974293, "comment_id": 63437265, "body": "@user694733, UB due to strict aliasing rules arises only when the pointer is dereferenced, not due to just casting the pointer."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1467007659, "post_id": 37974293, "comment_id": 63533303, "body": "<code>int*</code> and <code>char*</code> doesn&#39;t have to have same representation. There is no guarantee that <code>int*</code> is able to store poorly aligned pointer. Implementation could crash at conversion, and at would be legal."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1467007909, "post_id": 37974293, "comment_id": 63533402, "body": "@user694733, I see your point. What I should have said is <i>&quot;That cast does not do anything useful.&quot;</i>"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": -1, "last_activity_date": 1467007806, "last_edit_date": 1467007806, "creation_date": 1466614968, "answer_id": 37974293, "question_id": 37974005, "link": "https://stackoverflow.com/questions/37974005/typecasting-character-pointer-to-an-integer-pointer/37974293#37974293", "title": "Typecasting character pointer to an integer pointer", "body": "<p>Judging by the use of the explicit cast <code>(int*)</code>, your expectation of what happens in the line</p>\n\n<pre><code>p=(int *)(p+1);//What does this statement do ?\n</code></pre>\n\n<p>is misguided. That cast does not do anything useful. It is as good as:</p>\n\n<pre><code>p = p+1;\n</code></pre>\n\n<p>If you want <code>p</code> to point to the next number in <code>a</code>, you will need to use:</p>\n\n<pre><code>p = (int*)p+1;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>p = a+1;\n</code></pre>\n\n<p>In a comment, you asked:</p>\n\n<blockquote>\n  <p>Will the last <code>printf</code> extract 2 bytes from the location it is pointing to or 1 byte ? I'm on 16 bit compiler ?</p>\n</blockquote>\n\n<p>Neither of the <code>printf</code> statements will extract 2 bytes.</p>\n\n<p>The <code>printf</code> statement</p>\n\n<pre><code>printf(\"%d \",*p);\n</code></pre>\n\n<p>is equivalent to:</p>\n\n<pre><code>char c = *p;        // Extract the char from p\nint i = c;          // Cast the char to an int\nprintf(\"%d\", i);    // Print the int\n</code></pre>\n\n<p>The output of the first <code>printf</code> call is <code>2</code> by coincidence -- a side effect of your platform being a little endian system. Had your platform been a big endian system, the output would have been <code>0</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 2, "last_activity_date": 1467010008, "creation_date": 1467010008, "answer_id": 38047467, "question_id": 37974005, "link": "https://stackoverflow.com/questions/37974005/typecasting-character-pointer-to-an-integer-pointer/38047467#38047467", "title": "Typecasting character pointer to an integer pointer", "body": "<p><code>p=(int *)(p+1);</code> is a <em>constraint violation</em>, because <code>int *</code> may not be assigned to <code>char *</code>.</p>\n\n<p>The compiler must issue a diagnostic message. The behaviour of any executable generated by a program with a constraint violation is undefined.</p>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 0, "last_activity_date": 1467017223, "creation_date": 1467017223, "answer_id": 38049486, "question_id": 37974005, "link": "https://stackoverflow.com/questions/37974005/typecasting-character-pointer-to-an-integer-pointer/38049486#38049486", "title": "Typecasting character pointer to an integer pointer", "body": "<p>There's so much wrong in that code.</p>\n\n<p>First of all, as pointed out in the answer by M.M, the code will not even compile without raising a diagnostic message from the compiler. If it does, your compiler is misconfigured or non-standard. Assigning a <code>int*</code> to a <code>char*</code> is not a valid form of assignment (see \"simple assignment\" 6.5.16.1). Neither is the opposite, <code>char *p=a;</code>.</p>\n\n<p>Even if the code was rewritten as valid C, for example like this:</p>\n\n<pre><code>int i = *((int*)(p+1));\n</code></pre>\n\n<p>it would still be highly questionable code. First of all, if this results in a misaligned access, the code might invoke undefined behavior (6.3.2.3/7). Second, such code would violate strict pointer aliasing and invoke undefined behavior for that reason too (6.5/7).</p>\n\n<p>And finally, given that <code>p</code> is a <code>char*</code>, the code <code>printf(\"%d\",*p);</code> invokes undefined behavior because <code>%d</code> is not a valid conversion specifier for character pointers (7.21.6.1/9).</p>\n\n<p>So there's no less than <strong>four</strong> possible cases of entirely different forms of undefined behavior in two rows of code... kind of impressive.</p>\n\n<hr>\n\n<p>Now, if we assume that your particular system does not have any issues with misaligned access and that you have some non-standard compiler which doesn't follow the rules of pointer aliasing...</p>\n\n<p>If so, on a 32 bit system, the array could get allocated in one of two possible ways:</p>\n\n<pre><code>02 00 00 00 03 00 00 00 04 00 00 00 // little endian\n00 00 00 02 00 00 00 03 00 00 00 04 // big endian\n</code></pre>\n\n<p>In that case your first printf would print 2 or 0, depending on system, since it points at the very first byte, and you print the pointed-at contents of that byte.</p>\n\n<p>If you then increment the char pointer by 1 and somehow manage to read the pointed-at contents as a 32 bit integer, you would get the data </p>\n\n<pre><code>00 00 00 03 // little endian\n00 00 02 00 // big endian\n</code></pre>\n\n<p>Which equals the decimal values 50331648 (little) and 512 (big) respectively. Now what you wish to prove with that, or how the whole algorithm would be meaningful, I have no idea. There's not much to learn from this practice, apart from studying the many ways that will cause this code to fail.</p>\n"}], "owner": {"reputation": 93, "user_id": 6304546, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2b2f376983ae98318c0df0664ab00e80?s=128&d=identicon&r=PG&f=1", "display_name": "gk123", "link": "https://stackoverflow.com/users/6304546/gk123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1467017223, "creation_date": 1466614023, "last_edit_date": 1466616205, "question_id": 37974005, "link": "https://stackoverflow.com/questions/37974005/typecasting-character-pointer-to-an-integer-pointer", "title": "Typecasting character pointer to an integer pointer", "body": "<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\n    int a[3]={2,3,4};\n    char *p=a;\n    printf(\"%d \",*p);\n\n    p=(int *)(p+1);//What does this statement do ?\n    printf(\"%d\",*p); //Will the pointer extract 2 bytes(16 bit compiler)or1?  \n\n    return 0;\n}\n</code></pre>\n\n<p>I'm getting output as 2 0 . I understood why the first printf is printing 2 but not understanding why 0 in the next printf ?\nIs it that if I want to jump so many bytes away then I should a pointer of that many bytes long ?</p>\n"}, {"tags": ["c", "char", "ascii"], "comments": [{"owner": {"reputation": 5868, "user_id": 3270037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6HVI4.png?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/3270037/nick"}, "edited": false, "score": 0, "creation_date": 1466613872, "post_id": 37973911, "comment_id": 63393976, "body": "These characters are control characters and are invisible, the bytes should remain in your buffer but you are unable to print them, try iterating though your buffer printing the byte values rather than characters."}, {"owner": {"reputation": 221545, "user_id": 535871, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/nhcvo.jpg?s=128&g=1", "display_name": "Ted Hopp", "link": "https://stackoverflow.com/users/535871/ted-hopp"}, "edited": false, "score": 0, "creation_date": 1466613893, "post_id": 37973911, "comment_id": 63393995, "body": "<i>&quot;Would it be accurate to say values under 0x20 simply are &quot;discarded&quot;?&quot;</i> -- No, that would be highly inaccurate. Values under 0x20 are perfectly fine as <code>char</code> values. Something else is going on in your code. When you say that the byte &quot;doesn&#39;t show up in the buffer&quot;, how are you determining this? What is in the buffer instead?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1466613893, "post_id": 37973911, "comment_id": 63393996, "body": "No they are probably not discarded, they are simply not displayed. Did you check the contents of the buffer e.g in hexadecimal ?"}, {"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1466613991, "post_id": 37973911, "comment_id": 63394055, "body": "how are you sending that command? using string functions may mangle it, since (as you&#39;re finding out), not all ascii chars are printable, and some have specific command/control meanings"}, {"owner": {"reputation": 109, "user_id": 4970248, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fa8c656f47ea64142c8382ce6604b2f0?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Wang", "link": "https://stackoverflow.com/users/4970248/justin-wang"}, "edited": false, "score": 0, "creation_date": 1466614184, "post_id": 37973911, "comment_id": 63394164, "body": "Ah ok, I was thinking of it completely wrong then. However, I&#39;m using <code>xil_printf</code> with a format of <code>0x%02x</code>, which should display right? And sorry, by &quot;doesn&#39;t show up&quot; I mean that nothing is printed out. That being said, I have a <code>for loop</code> like the example, which prints the <code>&quot;i&quot;</code> of the for loop, and if I send a 16 byte command, the <code>&quot;i&quot;</code> only goes up the 2-3 control bytes I send."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user824425"}, "edited": false, "score": 1, "creation_date": 1466614992, "post_id": 37973979, "comment_id": 63394706, "body": "They are still referred to as control characters in Unicode."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 1, "last_activity_date": 1466613929, "creation_date": 1466613929, "answer_id": 37973979, "question_id": 37973911, "link": "https://stackoverflow.com/questions/37973911/what-do-char-variables-with-values-lower-than-0x20-get-converted-to/37973979#37973979", "title": "What do char variables with values lower than 0x20 get converted to?", "body": "<p>They are not discarded but the thing you are outputting them to might treat them differently. For example 0x07 might cause you computer to beep.</p>\n\n<p>In the old 7 bit ascii days they were referred to as control characters.</p>\n"}], "owner": {"reputation": 109, "user_id": 4970248, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fa8c656f47ea64142c8382ce6604b2f0?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Wang", "link": "https://stackoverflow.com/users/4970248/justin-wang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 599, "favorite_count": 0, "accepted_answer_id": 37973979, "answer_count": 1, "score": 1, "last_activity_date": 1466615555, "creation_date": 1466613741, "last_edit_date": 1466615555, "question_id": 37973911, "link": "https://stackoverflow.com/questions/37973911/what-do-char-variables-with-values-lower-than-0x20-get-converted-to", "title": "What do char variables with values lower than 0x20 get converted to?", "body": "<p>I've been developing some c code that sends and receives command packets to an FPGA using a uart serial port. Essentially the code reads a byte at a time from the serial port and stores the values into a buffer.</p>\n\n<p>Example code (my code is fairly similar to this):</p>\n\n<pre><code>for (i = 0; i&lt;cmd_len; i++){\n   buf[i] = inbyte();\n</code></pre>\n\n<p>This is just a basic example to illustrate the idea, and isn't super indicative of my actual code. <code>inbyte()</code> comes from the Xilinx library, it just reads from a memory mapped register.</p>\n\n<p>The problem that I've run into is when I try to send a byte of the command that is under 0x20, the byte isn't printed out. Since my buffer is a char buffer, my guess is that since values below 0x20 on the ascii table aren't really characters, these bytes get discarded. I've also tried using uint8_t to no avail, and Xilinx's u8 expands to a unsigned char anyway.</p>\n\n<p>Would it be accurate to say values under 0x20 simply are \"discarded\"? If so, is there some way around this? Thanks.</p>\n\n<p>Additional info: I'm using teraterm to connect to a com port, and sending bin files to simulate the hex commands. </p>\n\n<p>Edit: I've printed out the buffer using hex formatting. However it seems the issue is with the receive. I've noticed is that the loop will only iterate for bytes above 0x20, e.g if I send a 16 byte command of 14 0x0's, the for loop will only iterate 2 times. My guess is that something occurs with the <code>inbyte()</code> function.</p>\n"}, {"tags": ["javascript", "php", "c", "time", "leap-second"], "comments": [{"owner": {"reputation": 1556, "user_id": 611716, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/f4i2e.jpg?s=128&g=1", "display_name": "Frecklefoot", "link": "https://stackoverflow.com/users/611716/frecklefoot"}, "edited": false, "score": 0, "creation_date": 1466613351, "post_id": 37973465, "comment_id": 63393681, "body": "Is accounting for leap seconds THAT important for your game? The last one happened in June 2015 and that was three years after the previous one. They can only occur twice a year. This is a pretty small edge case."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1466660799, "post_id": 37973465, "comment_id": 63411412, "body": "... and even, standard unix time takes those leap seconds into account.  This is the difference between UTC and atomic time.  The leap second must be considered only to correct to local time, and only in the time (one second) window it is adjusting.  Unix doesn&#39;t know about atomic time, so you can sleep with quietness."}, {"owner": {"reputation": 625, "user_id": 2156800, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2138dc35e64c74daf902e50bc74cdcf0?s=128&d=identicon&r=PG", "display_name": "Dex", "link": "https://stackoverflow.com/users/2156800/dex"}, "edited": false, "score": 0, "creation_date": 1466661869, "post_id": 37973465, "comment_id": 63411834, "body": "Thank you for your awnsers! Yes as I said for this use case it&#39;s probably not relevant but this is just a simple example:) But to provide a better use-case: In stocks exchange I think 1 second can make quite a difference since prices fluctuate quite heavily in a small time window."}], "answers": [{"comments": [{"owner": {"reputation": 625, "user_id": 2156800, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2138dc35e64c74daf902e50bc74cdcf0?s=128&d=identicon&r=PG", "display_name": "Dex", "link": "https://stackoverflow.com/users/2156800/dex"}, "edited": false, "score": 0, "creation_date": 1466661529, "post_id": 37974257, "comment_id": 63411704, "body": "Yes that&#39;s what I though as well using a timestamp, however the problem with leap seconds is that the OS will slow down the inner clock to align with the &#39;new&#39; UTC time when a leap second has occurred. So it&#39;s not immune to leap seconds as you claim, as far as I understand it. Which means (also with the timestamp) the time between second e.g.: 1.000.000 and 1.000.110 will in the actual time have been 111s! This is exactly what I was trying to fix or counteract without &#39;waisting&#39; cpu power"}], "tags": [], "owner": {"reputation": 1363, "user_id": 2792896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dbf65eb2ebc0d8dc5b8fb48ac825fed?s=128&d=identicon&r=PG&f=1", "display_name": "Arnial", "link": "https://stackoverflow.com/users/2792896/arnial"}, "is_accepted": false, "score": 2, "last_activity_date": 1466615137, "last_edit_date": 1466615137, "creation_date": 1466614831, "answer_id": 37974257, "question_id": 37973465, "link": "https://stackoverflow.com/questions/37973465/how-can-i-handle-a-leap-second-correctly-in-my-application/37974257#37974257", "title": "How can I handle a leap second correctly in my application", "body": "<p>You really should use timestamp here.</p>\n\n<p>Timestamps are just number of seconds (all seconds, doesn't matter leap or not) that pass from predefined date (called \"epoch\"). It's just a counter.</p>\n\n<p>It's immune to leap seconds, summer/winter time zone change and even insane government that change time zones border every year.</p>\n\n<p>With timestamp, you always can calculate what time is now in UTC, GMT and Europe/Moskow (with leap seconds and with out them, it depends on your tz_data configuration). Reverse operation some times impossible to do.</p>\n"}, {"tags": [], "owner": {"reputation": 141, "user_id": 6485388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/567688a10c83e89b4071d0a82d602323?s=128&d=identicon&r=PG&f=1", "display_name": "zayjuc", "link": "https://stackoverflow.com/users/6485388/zayjuc"}, "is_accepted": false, "score": 2, "last_activity_date": 1466615978, "creation_date": 1466615978, "answer_id": 37974538, "question_id": 37973465, "link": "https://stackoverflow.com/questions/37973465/how-can-i-handle-a-leap-second-correctly-in-my-application/37974538#37974538", "title": "How can I handle a leap second correctly in my application", "body": "<p>You cannot do that in javascript. There are no leap seconds in javascript. ECMAScript 5, section 15.9.1.1 says:</p>\n\n<blockquote>\n  <p>Time is measured in ECMAScript in milliseconds since 01 January, 1970 UTC. In time values leap seconds are ignored. It is assumed that there are exactly 86,400,000 milliseconds per day</p>\n</blockquote>\n\n<p>Time values aren't guaranteed to be monotonic, and when a leap second occurs, they most likely won't be. In POSIX, you could use <code>clock_gettime</code> with a <code>clk_id</code> of <code>CLOCK_MONOTONIC</code> (if <code>_POSIX_MONOTONIC_CLOCK</code> is defined).</p>\n"}, {"comments": [{"owner": {"reputation": 625, "user_id": 2156800, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2138dc35e64c74daf902e50bc74cdcf0?s=128&d=identicon&r=PG", "display_name": "Dex", "link": "https://stackoverflow.com/users/2156800/dex"}, "edited": false, "score": 0, "creation_date": 1466666291, "post_id": 37983659, "comment_id": 63414161, "body": "Hi Luis Colorado, thank you for your clear and extensive answer already a vote up. I deduced as you said that also your whole OS will work slower, so from you application&#39;s perspective nothing weird is happening and it will work fine during this peroid. My only concern is that in actual time you wait longer than expected, in my use case it&#39;s fairly irrelevant but in stock exchange I can image this having quite some implication due to fast changes in prices."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 625, "user_id": 2156800, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2138dc35e64c74daf902e50bc74cdcf0?s=128&d=identicon&r=PG", "display_name": "Dex", "link": "https://stackoverflow.com/users/2156800/dex"}, "edited": false, "score": 0, "creation_date": 1466684780, "post_id": 37983659, "comment_id": 63426838, "body": "Nope, What I said is that everywhere have accounted time the same as you.  You have a 100s delay time for a subject that last 101s.  But this happens all around the world.  So, your computer has not run slowlier, but everithing has behaved as if time had gone slower."}], "tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": true, "score": 5, "last_activity_date": 1466663236, "last_edit_date": 1466663236, "creation_date": 1466662594, "answer_id": 37983659, "question_id": 37973465, "link": "https://stackoverflow.com/questions/37973465/how-can-i-handle-a-leap-second-correctly-in-my-application/37983659#37983659", "title": "How can I handle a leap second correctly in my application", "body": "<p>UTC time differs from atomic time in preciselly those leap seconds.  Without a reference to atomic time, you cannot detect from only UTC when a leap second has been inserted.  This makes the time in UTC \"almost\" continous, because of these little jumps of more than 0.5s and less than 1.0s that happen to disturb the time, when they happen.  UTC is defined as such to conserve calendar time and match it with earth movement, but despite of this, it can be considered continous by simply ignoring these leap seconds.</p>\n\n<p>When a leap second is inserted, you simply note nothing in your clock, as only the atomic to utc clock difference has been corrected.  Only in the case you calculate planet or sattelite orbits, you have to correct to atomic clock, or you'll be inserting the whole leapsecond in your calculations (and make your orbits to change)  The actual effect is as UTC has been advanced one second by a phantom.  This only affects the numbering of seconds, that lose one more in the difference between atomic time and UTC.  But you notice nothing happening in your machine.  The difference in real time for timestamps that happen to be overlapped with the occurrence of the leap second are not affected, as the leap second insertion only affects the difference in numbering of atomic seconds and utc seconds.</p>\n\n<p>In the case you were to consider time that overlaps the leap second (for example, in the calculus of orbital parameters of some extraterrestrial vehicle), then you have to take this extra second (that has not been counted for in atomic clock and yes in UTC time) and add it to the interval, or your calculus will be incorrect.  But astrophysics always do their calculus using the right timescale, so don't hesitate about space rubbish falling on your head by mistake.</p>\n\n<p>If you use clock synchronization programs (like ntpd, for example) then the insertion of the leap second can happen in several ways:</p>\n\n<ul>\n<li><p>The second is inserted by adding one to the system clock at exactly the time of the leap clock insertion.  This makes weird things to happen, as timeout delays on these times are severely affected by the clock adjust that has been made.</p></li>\n<li><p>The clock is adjusted fast some time before the leap second (let's say two hours before) and adjusted normal again some time after the leap second. You'll have a continous scale of time, with seconds of a duration a little less than standard atomic time to adjust the time.</p></li>\n<li><p>Let the clock run.  The clock loop suddenly \"sees\" a one second offset between the reference (the \"new\" utc scale) and its internal clock, so it begins to correct it in a normal way (adjusting the clock speed).  This is the same as the previous one, but leads to more offset differences (one whole second against half for the previous point)</p></li>\n</ul>\n\n<p>I don't know at this moment if your clock synch application follows the first or the second approach.  At least in linux I think the one used is the second or the third, and normally you don't notice it.</p>\n\n<h1>NOTE</h1>\n\n<p>In the case you put as example, and supposing the worst case (the time synchronizes by making a step adjustment in the clock) you'll get the soldier created in 111s instead of 110s, but it is nothing to be worried upon, as <strong>everything</strong> in that lapse has happened in 111s instead of 110.  You'll get a <code>1.0%</code> more time to get your soldier, but everything has happened a <code>1.0%</code> slower in that same period, and your soldier has no actual penalties from other soldiers that happened to be conceived before or after the leap second.</p>\n\n<p>And finally, if you don't use time synchronization programs, your clock will suffer more from it's actual offset (the difference of your clock's time and the actual time), than from the drift of making step adjustments to it.</p>\n"}, {"tags": [], "owner": {"reputation": 570, "user_id": 1400079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b808b05efc6c36bfbd6f6cca2e615f7?s=128&d=identicon&r=PG", "display_name": "OCTAGRAM", "link": "https://stackoverflow.com/users/1400079/octagram"}, "is_accepted": false, "score": 1, "last_activity_date": 1481222447, "creation_date": 1481222447, "answer_id": 41046594, "question_id": 37973465, "link": "https://stackoverflow.com/questions/37973465/how-can-i-handle-a-leap-second-correctly-in-my-application/41046594#41046594", "title": "How can I handle a leap second correctly in my application", "body": "<p>Some RTLs support leap seconds. For instance, in Ada 2005 Ada.Calendar.Time supports leap seconds, although not obvious, only observable via child packages <a href=\"http://www.ada-auth.org/standards/12rm/html/RM-9-6-1.html#p12\" rel=\"nofollow noreferrer\" title=\"Ada.Calendar.* subpackages\">Ada.Calendar.Formatting and Ada.Calendar.Arithmetic</a>. Also, Ada.Calendar.Formatting.Image writes \":59\" for leap seconds and Ada.Calendar.Formatting.Value does not accept \":60\".</p>\n\n<p>In <a href=\"http://getadanow.com/\" rel=\"nofollow noreferrer\">the GNAT</a> targets not having native leap seconds support need \"-y\" binder key to turn it on. With this key I managed to work with leap seconds time even on Windows. I've made a <a href=\"https://bitbucket.org/OCTAGRAM/ada-calendar_conversions\" rel=\"nofollow noreferrer\" title=\"Ada-Calendar_Conversions @ BitBucket\">tiny library for conversion from UNIX time_t with or without leap seconds, and also formatting/parsing functions supporting leap seconds</a> to fully expose this feature of Ada standard. Of course, on Windows the inconsistency during the second is unavoidable, but difference between moments can be calculated properly, and operations on values obtained from elsewhere can be performed.</p>\n\n<p><a href=\"http://www.ada-auth.org/standards/12rm/html/RM-D-8.html\" rel=\"nofollow noreferrer\" title=\"Ada.Real_Time\">Monotonic time</a> should be used to avoid shocks during the process. It should be used anyway, since user can change clock time, or time can be adjusted by synchronization, something happening much more often and much less predictable than leap seconds.</p>\n\n<p>If you really need this, you can use the monotonic time to extrapolate the civilian one:</p>\n\n<pre><code>with Ada.Calendar;\nwith Ada.Real_Time;\n\n-- ...\n\n------------------------\n-- Extrapolated_Clock --\n------------------------\n\ntype Extrapolated_Clock is tagged record\n   C_Clock : Ada.Calendar.Time := Ada.Calendar.Clock;\n   RT_Clock : Ada.Real_Time.Time := Ada.Real_Time.Clock;\nend record;\n\nuse all type Ada.Calendar.Time;\nuse all type Ada.Real_Time.Time;\nuse all type Ada.Real_Time.Time_Span;\n\nprocedure Synchronize (Object : in out Extrapolated_Clock);\nfunction Extrapolate (Object : Extrapolated_Clock) return Ada.Calendar.Time is\n  (Object.C_Clock + To_Duration (Ada.Real_Time.Clock - Object.RT_Clock));\n\n-- ...\n\n------------------------------------\n-- Extrapolated_Clock.Synchronize --\n------------------------------------\n\nprocedure Synchronize (Object : in out Extrapolated_Clock) is\nbegin\n   Object.C_Clock := Ada.Calendar.Clock;\n   Object.RT_Clock := Ada.Real_Time.Clock;\nend Synchronize;\n</code></pre>\n\n<p>You might also need to make sure that captured moment of time can't be the leap second (the second after the captured one is not leap).</p>\n"}], "owner": {"reputation": 625, "user_id": 2156800, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2138dc35e64c74daf902e50bc74cdcf0?s=128&d=identicon&r=PG", "display_name": "Dex", "link": "https://stackoverflow.com/users/2156800/dex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1502, "favorite_count": 1, "accepted_answer_id": 37983659, "answer_count": 4, "score": 6, "last_activity_date": 1580983745, "creation_date": 1466612376, "last_edit_date": 1580983745, "question_id": 37973465, "link": "https://stackoverflow.com/questions/37973465/how-can-i-handle-a-leap-second-correctly-in-my-application", "title": "How can I handle a leap second correctly in my application", "body": "<p>I am creating applications and I'd like to know <strong>how</strong> I should/can handle a leap second. I'll try to describe the problem with a (hopefully) simple example situation. In this simple situation you could easily argue that an extra second of waiting time each +- 1.5 years may not be relevant but I still would sleep better knowing it works correctly/the way I want it too in 'all' situations :) </p>\n\n<hr>\n\n<h2>Situation</h2>\n\n<hr>\n\n<p><em>(We don't take any delays into account, so when a users presses a button it 'happens' immediately)</em></p>\n\n<p>You have a game in which you create soldiers.</p>\n\n<ul>\n<li>Each soldier takes 110 seconds to create.</li>\n<li>The users presses the button to create 1 soldier at <code>day 1 - 23:58:30</code></li>\n<li>The user then expects the soldiers to be created <code>110s</code> later. Trough a normal '<em>DateTime calculation</em>'  your application would end up with <code>day 2 - 00:00:20</code>.</li>\n</ul>\n\n<p>Now there happens to be a leap second between <code>day 1</code> and <code>day 2</code> --> <code>23:59:60</code>. Following this method the user will in actuality have waited <code>111s</code> for his soldier. </p>\n\n<p>I'd prefer to use the Unix timestamp. This way you only have to add <code>110s</code> to the current time in seconds. But as far as I know this doesn't take leap seconds into account either. You'd still end up waiting <code>111s</code> in the actual time.</p>\n\n<hr>\n\n<h2>Question</h2>\n\n<hr>\n\n<p><strong>What should I do to make sure a user or program is only waiting the time it should wait?</strong></p>\n\n<p><em>Is there a commonly used time stamp that does take leap seconds into account?</em></p>\n\n<p><em>Should I always check if a leap second is ocurring?</em> <em>(may cause a lot of \"waist\" of cpu power?)</em></p>\n\n<p>EDIT: \nI mostly work in Javascript (Node.js) but an example in C, php or Python will work fine too!</p>\n"}, {"tags": ["c++", "c", "build", "embedded", "code-duplication"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1466612431, "post_id": 37973363, "comment_id": 63393129, "body": "Most modern linkers get that optimized correctly anyways, I would simply ignore the SCA tools warnings for such case."}, {"owner": {"reputation": 27522, "user_id": 6394138, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/u64Lc.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6394138/leon"}, "edited": false, "score": 1, "creation_date": 1466612496, "post_id": 37973363, "comment_id": 63393173, "body": "The answer to this question explains that compilers can do such deduplication automatically: <a href=\"http://stackoverflow.com/questions/11399682/c-optimisation-of-string-literals\" title=\"c optimisation of string literals\">stackoverflow.com/questions/11399682/&hellip;</a>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 27522, "user_id": 6394138, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/u64Lc.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6394138/leon"}, "edited": false, "score": 0, "creation_date": 1466612572, "post_id": 37973363, "comment_id": 63393215, "body": "@Leon: Not a duplicate.  The text literals are not in a single file.  The issue also contains scoping."}, {"owner": {"reputation": 27522, "user_id": 6394138, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/u64Lc.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6394138/leon"}, "edited": false, "score": 2, "creation_date": 1466612809, "post_id": 37973363, "comment_id": 63393357, "body": "@ThomasMatthews I didn&#39;t mean that your question was a duplicate. Just wanted to provide some info."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1466612846, "post_id": 37973363, "comment_id": 63393374, "body": "The compiler will do constant folding and get rid of most (possibly all) the duplicates - across compilation units as well if you use LTO."}, {"owner": {"reputation": 27522, "user_id": 6394138, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/u64Lc.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6394138/leon"}, "edited": false, "score": 0, "creation_date": 1466613005, "post_id": 37973363, "comment_id": 63393476, "body": "@ThomasMatthews gcc can perform string literal merging across translation units (during the linking stage): <a href=\"http://stackoverflow.com/a/26279717/6394138\">stackoverflow.com/a/26279717/6394138</a>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 27522, "user_id": 6394138, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/u64Lc.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6394138/leon"}, "edited": false, "score": 0, "creation_date": 1466613166, "post_id": 37973363, "comment_id": 63393576, "body": "@Leon: That would not be gcc along, but requires support by the linker. (gcc is not a linker!)"}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1466613380, "post_id": 37973363, "comment_id": 63393703, "body": "Did you inspect the binary. Does it contain duplicates?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1466614150, "post_id": 37973363, "comment_id": 63394145, "body": "@2501: The library contains duplicate text literals."}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 2, "creation_date": 1466615271, "post_id": 37973363, "comment_id": 63394854, "body": "What about putting all the strings in one global extern array, and using an enum type to give meaningful names to the indices? (though it&#39;s not quite &quot;no global variables&quot;)"}, {"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1466616961, "post_id": 37973363, "comment_id": 63395834, "body": "Can you use <a href=\"https://www.gnu.org/software/libc/manual/html_node/Message-Translation.html\" rel=\"nofollow noreferrer\">message catalogs</a>?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1466619445, "post_id": 37973363, "comment_id": 63397252, "body": "@MarkPlotnick:  The IAR compiler is not supporting message catalogs; but the concept seems to be the same as a <i>getter</i> function."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1466678737, "post_id": 37973363, "comment_id": 63422535, "body": "Are you using both C and C++ <i>compilation</i> or rather C++ compilation of code that is also valid C?  If you use C++ compilation, then the code <i>is</i> C++ - (even if it is also valid C)."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1466719862, "post_id": 37973363, "comment_id": 63449497, "body": "There is no &quot;more C language than C++&quot;. They are different languages. Either you compile a compilation unit as C or as C++. If you mean &quot;C coding-style&quot;, it still would be C++ due to different semantics of identical syntax/grammar."}], "answers": [{"tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 0, "last_activity_date": 1466619229, "creation_date": 1466619229, "answer_id": 37975443, "question_id": 37973363, "link": "https://stackoverflow.com/questions/37973363/best-practice-consolidating-duplicate-text-literals-across-many-translation-un/37975443#37975443", "title": "Best Practice - Consolidating duplicate text literals across many translation units", "body": "<p>I think if the linker really does have a problem with de-duplication, I'd use static functions to deliver literal strings:</p>\n\n<pre><code>// header file\n\nstruct text\n{\n  static const char* hello_world();\n};\n\n\n// one source file\n// #include \"text.hpp\"\nconst char* text::hello_world() {\n  static const char _[] = \"Hello, World\";\n  return _;\n}\n\n\n\n// use case\n\n// #include \"text.hpp\"\n#include &lt;iostream&gt;\n\nint main()\n{\n  std::cout &lt;&lt; text::hello_world() &lt;&lt; std::endl;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 2, "last_activity_date": 1466662637, "creation_date": 1466662637, "answer_id": 37983664, "question_id": 37973363, "link": "https://stackoverflow.com/questions/37973363/best-practice-consolidating-duplicate-text-literals-across-many-translation-un/37983664#37983664", "title": "Best Practice - Consolidating duplicate text literals across many translation units", "body": "<p>If the concern is only about string literals, you shouldn't need to change your code.</p>\n\n<p>What you need to do is to investigate how to enable <em>string pooling</em> on your compiler. This is an optimizer option which goes looking for identical string literals throughout your program. If it finds that the very same literals are used twice, it will allocate both of them at the very same memory address. This <em>should</em> work across several translation units.</p>\n\n<p>(In GCC this is called <code>-fmerge-constants</code>. I don't know what it is called in IAR.)</p>\n"}], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 382, "favorite_count": 1, "accepted_answer_id": 37983664, "answer_count": 2, "score": 3, "last_activity_date": 1466662637, "creation_date": 1466612099, "last_edit_date": 1466614106, "question_id": 37973363, "link": "https://stackoverflow.com/questions/37973363/best-practice-consolidating-duplicate-text-literals-across-many-translation-un", "title": "Best Practice - Consolidating duplicate text literals across many translation units", "body": "<p>Our company's static analysis tool is stating that there are duplicated strings (text literals).  The issue is that they are spread across many translation units (source files).  </p>\n\n<p>For example, the string \"NULL console pointer\" exists 1 time in module_a.c, 5 times in module_b.c and 1 time in module_f.c.  </p>\n\n<p>We also have coding guidelines that state there is to be no global variables.  </p>\n\n<p>We are to prefer to have no variables in header files.  </p>\n\n<p>Our platform is an embedded system, so consolidation of constant text will provide room for other purposes (and make the program load faster). In other words, there should only be one instance of the text literal.</p>\n\n<p><strong>So, what is an efficient design or architecture for consolidating constant text literals across multiple translation units?</strong>  </p>\n\n<p>Is there a length limit where duplication is not worth consolidating (such as the string <code>\"\\r\\n\"</code>?</p>\n\n<p>We would prefer solutions that are performance efficient, such as preferring direct access over calling a <em>getter</em> function.  </p>\n\n<p><em>(Note: at this time, the text does not need to be translated into multiple languages.)</em>  </p>\n\n<p>Languages:  C and C++ (The code base is more C language than C++).<br>\nProcessor:  ARM Cortex A8<br>\nPlatform:   Embedded system, safety and quality and performance critical (medical device).<br>\nCompilers:  IAR Embedded Workbench (for ARM processor).  </p>\n\n<p><strong>Edit 1: Linker Not Consolidating</strong><br>\nI scanned the BIN file and it does contain multiple instances of \"NULL console pointer\".  </p>\n\n<p>The linker has the option \"Merge duplicate section\" and I checked that.  The binary still contains duplicates.  </p>\n"}, {"tags": ["c", "process", "sleep"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1466611911, "post_id": 37973236, "comment_id": 63392805, "body": "<code>char current_char</code> -&gt; <code>int current_char</code>! <code>fgetc</code> returns an <code>int</code>, not a <code>char</code> intentionally!"}, {"owner": {"reputation": 1555, "user_id": 6500085, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/8psiU.png?s=128&g=1", "display_name": "JarsOfJam-Scheduler", "link": "https://stackoverflow.com/users/6500085/jarsofjam-scheduler"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1466612199, "post_id": 37973236, "comment_id": 63392991, "body": "Thank you for your answer ! unfortunately it didn&#39;t solve my issue."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1466612991, "post_id": 37973236, "comment_id": 63393471, "body": "Comments are not answers. Please take the <a href=\"https://stackoverflow.com/tour\">tour</a> and see <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1466613769, "post_id": 37973236, "comment_id": 63393922, "body": "You want to remove the C++ <code>#include</code>s and add the appropriate C headers."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1466613847, "post_id": 37973236, "comment_id": 63393966, "body": "Also this <code>for(i;</code> is useless. Just delete this single <code>i</code>."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1466613966, "post_id": 37973236, "comment_id": 63394040, "body": "To see the characters appear as they get printed flush <code>stdout</code> after each print-statement and before the call to <code>sleep()</code> by adding a <code>fflush(stdout)</code>."}, {"owner": {"reputation": 1555, "user_id": 6500085, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/8psiU.png?s=128&g=1", "display_name": "JarsOfJam-Scheduler", "link": "https://stackoverflow.com/users/6500085/jarsofjam-scheduler"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1466620471, "post_id": 37973236, "comment_id": 63397858, "body": "Thank you @alk, with fflush it&#39;s a bit better. But for example, &#39;a&#39; appears only 2 times and not 4 times as indicated in the file. Edit : it&#39;s clear the parent process ends too quickly. But i wrote a &quot;wait(NULL)&quot; so it shouldn&#39;t."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1466620512, "post_id": 37973236, "comment_id": 63397875, "body": "What OS are you running?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1466620589, "post_id": 37973236, "comment_id": 63397929, "body": "Cannot reproduces this. After applying the minimal adjustments as mentioned above (especially also the one mentioned by <i>Olaf</i>), the code works fine here."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1466620657, "post_id": 37973236, "comment_id": 63397976, "body": "It should not matter when the parent process ends. After it read the whole file and spawned all its children its work is done."}, {"owner": {"reputation": 1555, "user_id": 6500085, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/8psiU.png?s=128&g=1", "display_name": "JarsOfJam-Scheduler", "link": "https://stackoverflow.com/users/6500085/jarsofjam-scheduler"}, "reply_to_user": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1466621031, "post_id": 37973236, "comment_id": 63398171, "body": "@stark : i&#39;m using KUbuntu in VirtualBox. VB is run in Windows 10."}, {"owner": {"reputation": 1555, "user_id": 6500085, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/8psiU.png?s=128&g=1", "display_name": "JarsOfJam-Scheduler", "link": "https://stackoverflow.com/users/6500085/jarsofjam-scheduler"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1466621115, "post_id": 37973236, "comment_id": 63398218, "body": "@alk : with this file, it seems to work : &#39;a 4 2&#39; and &#39;b 2 7&#39;. But for example with &#39;a 4 2&#39; and &#39;b 3 7&#39;, only 2 b are wrote."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1466621327, "post_id": 37973236, "comment_id": 63398318, "body": "Make sure sure input isn&#39;t in mult-byte character format. Count the characters and compare the number to the file&#39;s size. Add one or two for each newline."}, {"owner": {"reputation": 1555, "user_id": 6500085, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/8psiU.png?s=128&g=1", "display_name": "JarsOfJam-Scheduler", "link": "https://stackoverflow.com/users/6500085/jarsofjam-scheduler"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1466626180, "post_id": 37973236, "comment_id": 63400817, "body": "@alk : the file has a size of 11 bytes. The command &#39;wc&#39; returns : &#39;1 6 11 file.jobs&#39; (this file contains &#39;a 4 2&#39; and in the next line : &#39;b 3 7&#39;). I didn&#39;t understand your last sentence ?"}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1466626213, "post_id": 37973236, "comment_id": 63400841, "body": "If you are not allocating multiple cores in VirtualBox, then sleep will block everything.  Also not sure what fork does, since this is all running in a single Windows process."}, {"owner": {"reputation": 1555, "user_id": 6500085, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/8psiU.png?s=128&g=1", "display_name": "JarsOfJam-Scheduler", "link": "https://stackoverflow.com/users/6500085/jarsofjam-scheduler"}, "edited": false, "score": 0, "creation_date": 1466627462, "post_id": 37973236, "comment_id": 63401473, "body": "I found the solution to the problem. It&#39;s the wait(NULL), which must be replaced by &quot;while(wait(NULL) &gt; 0) {}&quot;. Thank you anyway !"}], "answers": [{"tags": [], "owner": {"reputation": 1555, "user_id": 6500085, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/8psiU.png?s=128&g=1", "display_name": "JarsOfJam-Scheduler", "link": "https://stackoverflow.com/users/6500085/jarsofjam-scheduler"}, "is_accepted": true, "score": 0, "last_activity_date": 1466631874, "creation_date": 1466631874, "answer_id": 37978802, "question_id": 37973236, "link": "https://stackoverflow.com/questions/37973236/my-function-sleep-blocks-the-others-processes/37978802#37978802", "title": "My function &#39;sleep&#39; blocks the others processes", "body": "<p>I found the solution to the problem. It's the 'wait(NULL)', which must be replaced by 'while(wait(NULL) > 0) {}'.</p>\n\n<p>So the source becomes :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;string.h&gt;\n\nint main(int argc, char* argv[]) {\n\n    pid_t pid;\n\n    FILE* file = fopen(argv[1], \"r\");\n    if(file == NULL) {\n        perror(\"Open\");\n        exit(EXIT_FAILURE);\n    }\n\n    // &lt;!-- The following vars are used for the reading of the file --&gt;\n    char current_char = 0;\n\n    char char_to_print; // ie. : the first file's column\n\n    char buffer_number_of_prints[592] = {0}; // ie. : the snd file's column\n    int i1 = 0; // Will be used to write in the previous buffer\n\n    char buffer_delay[592] = {0}; // ie. : the thd (and last) file's column\n    int i2 = 0;\n\n    int flag_column = 0; // 0 = first file's column, 1 = snd one, 2 = last one (precision : two columns are separated by a space)\n    // &lt;!-- ### --&gt;\n\n    while(current_char != EOF) {\n        current_char = (char) fgetc(file);\n\n        if(current_char != ' ') { // So current_char is : the char to type XOR The number of times XOR The delay XOR \\n\n            if(current_char == '\\n' || current_char == EOF) { // So we just read an entire line of the file : we have valued the var \"char_to_print\" + the 2 buffers\n                pid = fork(); // A new process is created and will do its job\n                if(pid != 0) { // So we just read an entire line + we are the parent process, SO : we re-init all the vars and we're going to read the next file's line\n                    flag_column = 0;\n                    memset(buffer_number_of_prints, 0, 592);\n                    i1 = 0;\n                    memset(buffer_delay, 0, 592);\n                    i2 = 0;\n                    continue; // We're going to read the next file's line\n\n                } else { // If the current process is a child, it has to do its job (ie. : printing the typed char with x delay and y times)\n                    int i = 0;\n                    int max = atoi(buffer_number_of_prints);\n                    int del = atoi(buffer_delay); // These two buffers have been filed by the parent process\n                    for(; i &lt; max; i++) {\n                        fprintf(stdout, \"%c \", char_to_print);\n                        fflush(stdout);\n\n                        if(i &lt; max-1) {\n                            sleep(del);\n                        }\n                    }\n                    return 0; // The process ended its job so we stop it\n\n                }\n            }\n\n            // If we are the parent process (the child ones have been stopped previously thanks to the instruction `return 0`), we fill the var `char_to_print` and the two buffers according to the value of the var `flag_column`\n            if(flag_column == 0) {\n                char_to_print = current_char;\n            } else if(flag_column == 1) {\n                buffer_number_of_prints[i1] = current_char;\n                i1++;\n            } else if(flag_column == 2) {\n                buffer_delay[i2] = current_char;\n                i2++;\n            }\n        }  else { // If we encounter a space in the reading of the file, it means we are changing of column : so we increment this var\n            flag_column++;\n        }\n    }\n\n    // The parent process closes the file's stream\n    if(fclose(file) != 0) {\n        perror(\"Close\");\n        exit(EXIT_FAILURE);\n    }\n\n    // Before ending, the parent process wait for its children ones\n    while(wait(NULL) &gt; 0) { ;; }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1555, "user_id": 6500085, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/8psiU.png?s=128&g=1", "display_name": "JarsOfJam-Scheduler", "link": "https://stackoverflow.com/users/6500085/jarsofjam-scheduler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 37978802, "answer_count": 1, "score": -1, "last_activity_date": 1466631874, "creation_date": 1466611684, "last_edit_date": 1466613275, "question_id": 37973236, "link": "https://stackoverflow.com/questions/37973236/my-function-sleep-blocks-the-others-processes", "title": "My function &#39;sleep&#39; blocks the others processes", "body": "<p>I have to create a program that displays characters several times with a delay between each character. You'll understand better thanks to the example I'm going to give you. Each display is done by a process, so the program is multi-processes and the displays are done in parallel.</p>\n\n<p>The data are saved into a file which contains the following lines:</p>\n\n<pre><code>a 4 2\nb 2 1\n</code></pre>\n\n<p>So, for <strong>example</strong>, the char 'a' is displayed 4 times with a delay of 2 seconds ; in parallel, 'b' is displayed 2 times with a delay of 1 second.</p>\n\n<p>The code I wrote compiles and can be executed without any error. But, with this file, it only displays 'bb'. If I delete 'sleep'-call, it displays correctly all the 'a' and 'b' (but without any delay).</p>\n\n<p>Thus, the 'sleep' function seems to allow only one process and stops the others. Do you know why ? I thought it would block only the calling-process.</p>\n\n<p>Here's my code.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;cstdlib&gt;\n#include &lt;cstring&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/wait.h&gt;\n\nint main(int argc, char* argv[]) {\n\n    pid_t pid;\n\n    FILE* file = fopen(argv[1], \"r\");\n    if(file == NULL) {\n        perror(\"Open\");\n        exit(EXIT_FAILURE);\n    }\n\n    // &lt;!-- The following vars are used for the reading of the file --&gt;\n    char current_char = 0;\n\n    char char_to_print; // ie. : the first file's column\n\n    char buffer_number_of_prints[592] = {0}; // ie. : the snd file's column\n    int i1 = 0; // Will be used to write in the previous buffer\n\n    char buffer_delay[592] = {0}; // ie. : the thd (and last) file's column\n    int i2 = 0;\n\n    int flag_column = 0; // 0 = first file's column, 1 = snd one, 2 = last one (precision : two columns are separated by a space)\n    // &lt;!-- ### --&gt;\n\n    while(current_char != EOF) {\n        current_char = fgetc(file);\n\n        if(current_char != ' ') { // So current_char is : the char to type XOR The number of times XOR The delay XOR \\n\n            if(current_char == '\\n' || current_char == EOF) { // So we just read an entire line of the file : we have valued the var \"char_to_print\" + the 2 buffers\n                pid = fork(); // A new process is created and will do its job\n                if(pid != 0) { // So we just read an entire line + we are the parent process , SO : we re-init all the vars and we're going to read the next file's line\n                    flag_column = 0;\n                    memset(buffer_number_of_prints, 0, 592);\n                    i1 = 0;\n                    memset(buffer_delay, 0, 592);\n                    i2 = 0;\n                    continue; // We're going to read the next file's line\n\n                } else { // If the current process is a child, it has to do its job (ie. : printing the typed char with x delay and y times)\n                    int i = 0;\n                    int max = atoi(buffer_number_of_prints);\n                    int del = atoi(buffer_delay); // These two buffers have been filed by the parent process\n                    for(i; i &lt; max; i++) {\n                        fprintf(stdout, \"%c\", char_to_print);\n                        sleep(del);\n                    }\n                    return 0; // The process ended its job so we stop it\n\n                }\n            }\n\n            // If we are the parent process (the child ones have been stopped previously thanks to the instruction `return 0`), we fill the var `char_to_print` and the two buffers according to the value of the var `flag_column`\n            if(flag_column == 0) {\n                char_to_print = current_char;\n            } else if(flag_column == 1) {\n                buffer_number_of_prints[i1] = current_char;\n                i1++;\n            } else if(flag_column == 2) {\n                buffer_delay[i2] = current_char;\n                i2++;\n            }\n        }  else { // If we encounter a space in the reading of the file, it means we are changing of column : so we increment this var\n            flag_column++;\n        }\n    }\n\n    // The parent process close the file's stream\n    if(fclose(file) != 0) {\n        perror(\"Close\");\n        exit(EXIT_FAILURE);\n    }\n\n    // Before ending, the parent process wait for its children ones\n    wait(NULL);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "sockets", "email", "smtp"], "comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1466611388, "post_id": 37973097, "comment_id": 63392453, "body": "1. You shouldn&#39;t use <code>gets()</code>, which has unavoidable risk of buffer overrun. 2. <code>fflush(stdin);</code> invokes <i>undefined behavior</i>, so do not use it. 3. You invoked <i>undefined behavor</i> by passing data having wrong type to <code>printf()</code>: <code>%ld</code> cals for <code>long</code>, but <code>iResult</code> has type <code>int</code>."}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 1, "creation_date": 1466611513, "post_id": 37973097, "comment_id": 63392535, "body": "The problem is because you connect the server, send something and receive something, then <i>you disconnect from the server and connect again</i>. Instead of that, proceed using current session without disconnectiong and reconnectiong."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1466612076, "post_id": 37973097, "comment_id": 63392907, "body": "You are also calling <code>WSAStartup()</code> and <code>WSACleanup()</code> on each loop iteration. They should only be called once, at program start and program end, respectively."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1466622145, "post_id": 37973097, "comment_id": 63398760, "body": "Error 10058 is <code>WSAESHUTDOWN</code>, which DOES NOT mean the <b>server</b> shut down the connection, it means <b>you</b> shut it down: &quot;<i>The socket has been shut down; it is not possible to send on a socket after <code>shutdown</code> has been invoked with <code>how</code> set to <code>SD_SEND</code> or <code>SD_BOTH</code></i>&quot;. If the <b>server</b> had shut down the connection, you would be getting a different error instead. In the code you have shown, <code>shutdown()</code> is commented out, so there is no possible way that <code>send()</code> can be failing with <code>WSAESHUTDOWN</code>."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1466622245, "post_id": 37973097, "comment_id": 63398817, "body": "That said, you are not breaking the loop if <code>recv()</code> fails. And your 2nd <code>printf()</code> when <code>iResult &gt; 0</code> is assuming that <code>recvbuf</code> is null-terminated, which is not actually the case. You need to take <code>iResult</code> into account, eg: <code>iResult = recv(ConnectSocket, recvbuf, recvbuflen-1, 0); ... recvbuf[iResult] = 0; printf(&quot;messaggio: %s\\n&quot;, recvbuf);</code> or <code>iResult = recv(ConnectSocket, recvbuf, recvbuflen, 0); ... printf(&quot;messaggio: %.*s\\n&quot;, iResult, recvbuf);</code>"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1466622438, "post_id": 37973097, "comment_id": 63398947, "body": "And don&#39;t forget that TCP is a byte stream, there is no guarantee that you will send an entire command in a single <code>send()</code> call, or that you will receive an entire response in a single <code>recv()</code> call. You have to keep sending until you have nothing left to send, and you have to keep reading until you encounter the <code>\\r\\n</code> that terminates each line. And you also have to take into account that an SMTP response may have multiple lines, so you have to actually parse the responses to detect that. The actual format of the responses is outlined in <a href=\"https://tools.ietf.org/html/rfc5321\" rel=\"nofollow noreferrer\">RFC 5321</a>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4983006"}, "edited": false, "score": 0, "creation_date": 1466628315, "post_id": 37973097, "comment_id": 63401873, "body": "thanks for that documentation, i managed to solve a lot of problems, i think this is the last one :)"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1466643528, "post_id": 37973097, "comment_id": 63406733, "body": "First, you did not correctly implement what I said, not even close. Your reading and sending logic is still very broken, even if you think it &quot;works&quot; (which it won&#39;t always). Second, <code>To:</code> is not a valid SMTP command, the correct command is <code>RCPT TO:</code>. Third, &quot;<i>Must issue a STARTTLS command first</i>&quot; is pretty self-explanatory. You have sent an SMTP command over an unsecure connection and the server requires it to be sent over a secure connection instead (like when sending authentication credentials in plain text)."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1466643696, "post_id": 37973097, "comment_id": 63406781, "body": "The <a href=\"https://tools.ietf.org/html/rfc3207\" rel=\"nofollow noreferrer\"><code>STARTTLS</code></a> command is used to activate a new SSL/TLS session to secure an unsecure connection. You can use libraries like OpenSSL, or Microsoft&#39;s SChannel API, to implement the actual SSL/TLS on your socket.  That is outside the scope of this question. If you want help with implementing SSL/TLS, there are plenty of books and tutorials on that subject."}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1466697337, "post_id": 37981744, "comment_id": 63436617, "body": "I made some adjustments to the code above, and now it works when I try it."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 0, "last_activity_date": 1466698276, "last_edit_date": 1466698276, "creation_date": 1466651976, "answer_id": 37981744, "question_id": 37973097, "link": "https://stackoverflow.com/questions/37973097/trying-to-talk-to-email-server-via-smtp-with-c-program/37981744#37981744", "title": "trying to talk to email server via SMTP with c program", "body": "<p>Your code logic is incomplete for an SMTP client.</p>\n\n<p>TCP is a byte stream.  There is no guarantee that you will be able to send an entire command in a single <code>send()</code> call, or that you will be able to receive an entire response in a single <code>recv()</code> call. You have to keep sending until you have nothing left to send, and you have to keep reading until there is nothing more to read.  Which, in the case of SMTP, means when you encounter the <code>\\r\\n</code> that terminates each line.</p>\n\n<p>Once you have your underlying socket I/O working, you are still not implementing the actual SMTP protocol.  You are just throwing arbitrary data at the server and reading whatever arbitrary data it returns.  SMTP has rules that you need to take into account.  For example, an SMTP server sends a greeting before accepting commands.  You are not reading that greeting.  Also, an SMTP response may have 1 or more lines, so you have to parse each line individually (the format is outlined in <a href=\"https://tools.ietf.org/html/rfc5321\" rel=\"nofollow\">RFC 5321</a>) to discover how many lines need to be read.  Keep reading until you encounter the last line of a response.  Don't send the next command until the previous response has been fully read (unless you want to implement <a href=\"https://tools.ietf.org/html/rfc2920\" rel=\"nofollow\">SMTP pipelining</a>, which I won't get into here).       </p>\n\n<p>As for the \"<em>Must issue a STARTTLS command first</em>\" error, that is pretty self-explanatory. You sent an SMTP command over an unsecure connection, but the server wants that command to be sent over a secure connection instead (such as when sending an <a href=\"https://tools.ietf.org/html/rfc4954\" rel=\"nofollow\"><code>AUTH</code></a> command containing authentication credentials in plain text).  The <a href=\"https://tools.ietf.org/html/rfc3207\" rel=\"nofollow\"><code>STARTTLS</code></a> command is used to activate a new SSL/TLS session to secure a connection that is currently unsecure.</p>\n\n<p>You can use libraries like <a href=\"https://www.openssl.org\" rel=\"nofollow\">OpenSSL</a>, or APIs like Microsoft's <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa380123.aspx\" rel=\"nofollow\">SChannel</a>, to implement the actual SSL/TLS on top of your socket. That is outside the scope of this question. If you want help with implementing SSL/TLS, there are plenty of books and tutorials on that subject.</p>\n\n<p>With all of that said, try something more like this instead:</p>\n\n<pre><code>#define WIN32_LEAN_AND_MEAN\n\n#include &lt;windows.h&gt;\n#include &lt;winsock2.h&gt;\n#include &lt;ws2tcpip.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\n#pragma comment(lib, \"ws2_32.lib\")\n#pragma command(lib, \"mswsock.lib\")\n//#pragma command(lib, \"advapi32.lib\")\n\n#define DEFAULT_BUFLEN 512\n\n#define DEFAULT_PORT \"25\"\n#define DEFAULT_ADDRESS \"smtp.live.com\"\n\nchar *recvbuf = NULL;\nint recvbuflen = 0;\nint recvbufused = 0;\n\nint sendData(SOCKET s, char *buffer, int buflen)\n{\n    int iResult;\n\n    while (buflen &gt; 0)\n    {\n        // TODO: if the connection is secure, encrypt the data being sent...\n\n        iResult = send(s, buffer, buflen, 0);\n        if (iResult == SOCKET_ERROR)\n        {\n            printf(\"send failed with error: %d\\n\", WSAGetLastError());\n            return -1;\n        }\n\n        buffer += iResult;\n        buflen -= iResult;\n    }\n\n    return 0;\n}\n\nint sendLine(SOCKET s, char *line)\n{\n    int iResult = sendData(s, line, strlen(line));\n    if (iResult == 0)\n        iResult = sendData(s, \"\\r\\n\", 2);\n    return iResult;\n}\n\nint readLine(SOCKET s, char **line)\n{\n    char buf[DEFAULT_BUFLEN];\n    int iResult;\n    int offset = 0, len, total;\n    char *p;\n\n    *line = NULL;\n\n    do\n    {\n        // check if the line terminator is already in the buffer\n        p = memchr(recvbuf+offset, '\\n', recvbufused-offset);\n        if (p != NULL)\n        {\n            ++p;\n            total = (p - recvbuf);\n\n            // check if the line terminator is actually \"\\r\\n\"\n            len = total - 1;\n            if ((len &gt; 0) &amp;&amp; (recvbuf[len-1] == '\\r'))\n                --len;\n\n            // extract the line and remove it from the buffer\n            *line = malloc(len+1);\n            if (*line == NULL)\n            {\n                printf(\"Unable to allocate memory! Bytes: %d\\n\", len+1);\n                return -1;\n            }\n\n            memcpy(*line, recvbuf, len);\n            (*line)[len] = 0;\n\n            memmove(recvbuf, recvbuf+total, recvbufused-total);\n            recvbufused -= total;\n\n            printf(\"%s\\n\", *line);\n            return len;\n        }\n\n        // line terminator is not in the buffer, keep reading\n\n        // do not search the buffer that was already searched\n        offset = recvbufused;\n\n        // read more data from the socket\n        iResult = recv(s, buf, sizeof(buf), 0);\n        if (iResult &lt;= 0)\n        {\n            if (iResult == 0)\n                printf(\"server closed the connection\\n\");\n            else\n                printf(\"recv failed with error: %d\\n\", WSAGetLastError());\n\n            break;\n        }\n\n        // TODO: if the connection is secure, decrypt the data that was received...\n\n        // if the buffer is too small for the new data, grow it\n        if ((recvbufused+iResult) &gt; recvbuflen)\n        {\n            len = (recvbufused+iResult) + DEFAULT_BUFLEN;\n            p = realloc(recvbuf, len);\n            if (p == NULL)\n            {\n                printf(\"Unable to allocate memory! Bytes: %d\\n\", len);\n                break;\n            }\n\n            recvbuf = p;\n            recvbuflen = len;\n        }\n\n        // now add the data to the buffer\n        memcpy(recvbuf+recvbufused, buf, iResult);\n        recvbufused += iResult;\n    }\n    while (1);\n\n    return -1;\n}\n\nint readResponse(SOCKET s)\n{\n    char *line, term[5];\n    int len, code = 0;\n\n    // read the first line\n    len = readLine(s, &amp;line);\n    if (len == -1)\n        return -1;\n\n    // check if the response has multiple lines\n    if ((len &gt; 3) &amp;&amp; (line[3] == '-'))\n    {\n        // keep reading until the last line is received\n        memcpy(term, line, 3);\n        term[3] = ' ';\n        term[4] = '\\0';\n\n        do\n        {\n            free(line);\n            len = readLine(s, &amp;line);\n            if (len == -1)\n                return -1;\n        }\n        while ((len &gt; 3) &amp;&amp; (strncmp(line, term, 4) != 0));\n    }\n\n    // now extract the response code and return it\n\n    if (len &gt; 3) line[3] = '\\0';\n    code = strtol(line, NULL, 10);\n    free(line);\n\n    if (code == 0)\n        return -1;\n\n    return code;\n}\n\nint __cdecl main(int argc, char **argv)\n{\n    WSADATA wsaData;\n    SOCKET ConnectSocket = INVALID_SOCKET;\n    struct addrinfo hints, *result, *ptr;\n    char messaggio[100];\n    int iResult;\n\n    // Initialize Winsock\n    iResult = WSAStartup(MAKEWORD(2,2), &amp;wsaData);\n    if (iResult != 0)\n    {\n        printf(\"WSAStartup failed with error: %d\\n\", iResult);\n        return 1;\n    }\n\n    ZeroMemory( &amp;hints, sizeof(hints) );\n    hints.ai_family = AF_UNSPEC;\n    hints.ai_socktype = SOCK_STREAM;\n    hints.ai_protocol = IPPROTO_TCP;\n\n    // Resolve the server address and port\n    iResult = getaddrinfo(DEFAULT_ADDRESS, DEFAULT_PORT, &amp;hints, &amp;result);\n    if (iResult != 0)\n    {\n        printf(\"getaddrinfo failed with error: %d\\n\", iResult);\n        WSACleanup();\n        return 1;\n    }\n\n    // Attempt to connect to an address until one succeeds\n    for(ptr=result; ptr != NULL; ptr=ptr-&gt;ai_next)\n    {\n        ConnectSocket = socket(ptr-&gt;ai_family, ptr-&gt;ai_socktype, ptr-&gt;ai_protocol);\n        if (ConnectSocket == INVALID_SOCKET)\n        {\n            printf(\"socket failed with error: %ld\\n\", WSAGetLastError());\n            break;\n        }\n\n        //Connect to server.\n        iResult = connect(ConnectSocket, ptr-&gt;ai_addr, ptr-&gt;ai_addrlen);\n        if (iResult == 0)\n            break;\n\n        closesocket(ConnectSocket);\n        ConnectSocket = INVALID_SOCKET;\n    }\n\n    freeaddrinfo(result);\n\n    if (ConnectSocket == INVALID_SOCKET)\n    {\n        printf(\"Unable to connect to server!\\n\");\n        WSACleanup();\n        return 1;\n    }\n\n    printf(\"Connected to server\\n\");\n\n    // read the greeting\n    iResult = readResponse(ConnectSocket);\n    if (iResult == 220)\n    {\n        do\n        {\n            // ask the user for a command\n            printf(\"messaggio: \");\n            if (!fgets(messaggio, sizeof(messaggio), stdin))\n                break;\n\n            // remove the line terminator if present\n            iResult = strlen(messaggio);\n            if ((iResult &gt; 0) &amp;&amp; (messaggio[iResult-1] == '\\n'))\n                messaggio[iResult-1] = '\\0';\n\n            // send the command\n            iResult = sendLine(ConnectSocket, messaggio);\n            if (iResult == -1)\n                break;\n\n            // read the response\n            iResult = readResponse(ConnectSocket);\n            if (iResult == -1)\n                break;\n\n            // need to stop now?\n            if (strcmp(messaggio, \"QUIT\") == 0)\n                break;\n\n            // need to turn on SSL/TLS now?\n            if ((strcmp(messaggio, \"STARTTLS\") == 0) &amp;&amp; (iResult == 220))\n            {\n                // TODO: activate SSL/TLS, stop if failed...\n            }\n        }\n        while(1);\n    }\n\n    shutdown(ConnectSocket, SD_SEND);\n    do\n    {\n        iResult = recv(ConnectSocket, messaggio, sizeof(messaggio), 0);\n    }\n    while (iResult &gt; 0);\n\n    closesocket(ConnectSocket);\n    WSACleanup();\n\n    free(recvbuf);\n\n    system(\"PAUSE\");\n    return 0;\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4983006"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1235, "favorite_count": 0, "accepted_answer_id": 37981744, "answer_count": 1, "score": 1, "last_activity_date": 1466698276, "creation_date": 1466611218, "last_edit_date": 1466643591, "question_id": 37973097, "link": "https://stackoverflow.com/questions/37973097/trying-to-talk-to-email-server-via-smtp-with-c-program", "title": "trying to talk to email server via SMTP with c program", "body": "<p>I'm trying to create a little C program that allow me to talk to mail server via smtp, I created this little program:</p>\n\n<pre><code>#define WIN32_LEAN_AND_MEAN\n\n#include &lt;windows.h&gt;\n#include &lt;winsock2.h&gt;\n#include &lt;ws2tcpip.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\n\n// Need to link with Ws2_32.lib, Mswsock.lib, and Advapi32.lib\n\n#define DEFAULT_BUFLEN 512\n#define DEFAULT_PORT \"25\"\n#define DEFAULT_ADDRESS \"smtp.live.com\"\nint __cdecl main(int argc, char **argv) \n{\n    WSADATA wsaData;\n    SOCKET ConnectSocket = INVALID_SOCKET;\n    struct addrinfo *result = NULL,\n                    *ptr = NULL,\n                    hints;\n    char messaggio[100];\n    char recvbuf[DEFAULT_BUFLEN];\n    int iResult;\n    int recvbuflen = DEFAULT_BUFLEN;\n\n    while(1){// Initialize Winsock\n        iResult = WSAStartup(MAKEWORD(2,2), &amp;wsaData);\n        if (iResult != 0) {\n            printf(\"WSAStartup failed with error: %d\\n\", iResult);\n            return 1;\n        }\n\n        ZeroMemory( &amp;hints, sizeof(hints) );\n        hints.ai_family = AF_UNSPEC;\n        hints.ai_socktype = SOCK_STREAM;\n        hints.ai_protocol = IPPROTO_TCP;\n\n        // Resolve the server address and port\n        iResult = getaddrinfo(DEFAULT_ADDRESS, DEFAULT_PORT, &amp;hints, &amp;result);\n        if ( iResult != 0 ) {\n            printf(\"getaddrinfo failed with error: %d\\n\", iResult);\n            WSACleanup();\n            return 1;\n        }\n\n    // Attempt to connect to an address until one succeeds\n        for(ptr=result; ptr != NULL ;ptr=ptr-&gt;ai_next) {\n\n            // Create a SOCKET for connecting to server\n            ConnectSocket = socket(ptr-&gt;ai_family, ptr-&gt;ai_socktype, \n                ptr-&gt;ai_protocol);\n            if (ConnectSocket == INVALID_SOCKET) {\n                printf(\"socket failed with error: %ld\\n\", WSAGetLastError());\n                WSACleanup();\n                return 1;\n            }\n\n            // Connect to server.\n            iResult = connect( ConnectSocket, ptr-&gt;ai_addr, (int)ptr-&gt;ai_addrlen);\n            if (iResult == SOCKET_ERROR) {\n                closesocket(ConnectSocket);\n                ConnectSocket = INVALID_SOCKET;\n                continue;\n            }\n            break;\n        }\n\n        freeaddrinfo(result);\n\n        if (ConnectSocket == INVALID_SOCKET) {\n            printf(\"Unable to connect to server!\\n\");\n            WSACleanup();\n            return 1;\n        }\n\n        printf(\"messaggio: \");\n        gets(messaggio);\n        fflush(stdin);\n        printf(\"%s\\n\", messaggio);\n        // Send an initial buffer\n        iResult = send( ConnectSocket, messaggio, (int)strlen(messaggio), 0 );\n        if (iResult == SOCKET_ERROR) {\n            printf(\"send failed with error: %d\\n\", WSAGetLastError());\n            closesocket(ConnectSocket);\n            WSACleanup();\n            return 1;\n        }\n\n        printf(\"Bytes Sent: %ld\\n\", iResult);\n\n        // shutdown the connection since no more data will be sent\n        iResult = shutdown(ConnectSocket, SD_SEND);\n        if (iResult == SOCKET_ERROR) {\n            printf(\"shutdown failed with error: %d\\n\", WSAGetLastError());\n            closesocket(ConnectSocket);\n            WSACleanup();\n            return 1;\n        }\n\n        // Receive until the peer closes the connection\n      //  do {\n\n            iResult = recv(ConnectSocket, recvbuf, recvbuflen, 0);\n                if ( iResult &gt; 0 ){\n                printf(\"Bytes received: %d\\n\", iResult);\n                printf(\"messaggio: %s\\n\", recvbuf);}\n            else if ( iResult == 0 )\n                printf(\"Connection closed\\n\");\n            else\n                printf(\"recv failed with error: %d\\n\", WSAGetLastError());\n       // } while( iResult &gt; 0 );\n        // cleanu\n        closesocket(ConnectSocket);\n        WSACleanup();\n    }\n    system(\"PAUSE\");\n    return 0;\n}\n</code></pre>\n\n<p>When I launch it, it does connect to the smtp server, then send the message (for example Hello message) and receive 220 reply code meaning that the services is ready. When I continue typing command it does continue to send me 220 code without going forward, and when I miss type a command it just crush.</p>\n\n<p>may any of you please help me?</p>\n\n<p>p.s. I take no credit for code, I just modified some socket client documentation of microsoft to talk to smtp.live.com and apparently it does work...</p>\n\n<hr>\n\n<p>[EDIT] x2:</p>\n\n<p>ok, thanks to Remy Lebeau i apparently managed to resolve those problem, hope this is the last one.</p>\n\n<p>edited code:</p>\n\n<pre><code>#define WIN32_LEAN_AND_MEAN\n\n#include &lt;windows.h&gt;\n#include &lt;winsock2.h&gt;\n#include &lt;ws2tcpip.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\n\n// Need to link with Ws2_32.lib, Mswsock.lib, and Advapi32.lib\n\n#define DEFAULT_BUFLEN 512\n#define DEFAULT_PORT \"25\"\n#define DEFAULT_ADDRESS \"smtp.live.com\"\n\nint __cdecl main(int argc, char **argv){\n    WSADATA wsaData;\n    SOCKET ConnectSocket = INVALID_SOCKET;\n    struct addrinfo *result = NULL,\n    *ptr = NULL,\n    hints;\n    char messaggio[100];\n    char recvbuf[DEFAULT_BUFLEN];\n    int iResult;\n    int recvbuflen = DEFAULT_BUFLEN;\n    int success = 1;\n\n    iResult = WSAStartup(MAKEWORD(2,2), &amp;wsaData); // Initialize Winsock\n    if (iResult != 0) {\n        printf(\"WSAStartup failed with error: %d\\n\", iResult);\n        return 1;\n    }\n\n    ZeroMemory( &amp;hints, sizeof(hints) );\n    hints.ai_family = AF_UNSPEC;\n    hints.ai_socktype = SOCK_STREAM;\n    hints.ai_protocol = IPPROTO_TCP;\n\n    iResult = getaddrinfo(DEFAULT_ADDRESS, DEFAULT_PORT, &amp;hints, &amp;result); // Resolve the server address and port\n    if ( iResult != 0 ) {\n        printf(\"getaddrinfo failed with error: %d\\n\", iResult);\n        WSACleanup();\n        return 1;\n    }\n\n    for(ptr=result; ptr != NULL ;ptr=ptr-&gt;ai_next) {  // Attempt to connect to an address until one succeeds\n\n        ConnectSocket = socket(ptr-&gt;ai_family, ptr-&gt;ai_socktype, ptr-&gt;ai_protocol);\n        if (ConnectSocket == INVALID_SOCKET) {\n            printf(\"socket failed with error: %ld\\n\", WSAGetLastError());\n            WSACleanup();\n            return 1;\n        }\n\n        iResult = connect( ConnectSocket, ptr-&gt;ai_addr, (int)ptr-&gt;ai_addrlen);  //Connect to server.\n        if (iResult == SOCKET_ERROR) {\n            closesocket(ConnectSocket);\n            ConnectSocket = INVALID_SOCKET;\n            continue;\n        }\n\n        break;\n    }\n\n    freeaddrinfo(result);\n\n    if (ConnectSocket == INVALID_SOCKET) {\n        printf(\"Unable to connect to server!\\n\");\n        WSACleanup();\n        return 1;\n    }\n\n    while(success){\n\n        printf(\"messaggio: \");\n        scanf(\" %[^\\n]\", messaggio);\n        printf(\"%s\\n\", messaggio);\n\n        iResult = send( ConnectSocket, strcat(messaggio,\"\\r\\n\"), (int)strlen(messaggio)+2, 0 );  //Send an initial buffer\n        if (iResult &lt; 0 || iResult == SOCKET_ERROR) {\n            printf(\"send failed with error: %d\\n\", WSAGetLastError());\n            closesocket(ConnectSocket);\n            WSACleanup();\n            system(\"PAUSE\");\n            return 1;\n        }\n        printf(\"Bytes Sent: %ld\\n\", iResult);\n\n        do{  //riceve tutto il possibile dal server\n            iResult = recv(ConnectSocket, recvbuf, recvbuflen-1, 0);\n            recvbuf[iResult]='\\0';\n            if ( iResult &gt; 0 ){\n                printf(\"Bytes received: %d\\n\", iResult);\n                printf(\"messaggio: %s\\n\", recvbuf);\n            }\n            else{\n                printf(\"recv failed with error: %d\\n\", WSAGetLastError());\n                success=0;\n            }\n        }while(recvbuf[iResult-3]=='\\r'&amp;&amp; recvbuf[iResult-2]=='\\n');\n\n        printf(\"stop receive\\n\");\n    }\n    iResult = shutdown(ConnectSocket, SD_SEND);\n    closesocket(ConnectSocket);\n    WSACleanup();\n    system(\"PAUSE\");\n    return 0;\n}\n</code></pre>\n\n<p>Now it does take my command and it does respond, i do <code>helo</code>, <code>mail from: &lt;mail&gt;</code> and <code>to: &lt;mail&gt;</code> and at this point it says: \"530 (code for auth problem) Must issue a STARTTLS command first.</p>\n\n<p>Is there a way to resolve this? i've to encode my sended command, is there a way to do this with winsock?</p>\n\n<p>Did i almost got the point of the problem or it isn't this the problem?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1466610692, "post_id": 37972848, "comment_id": 63391956, "body": "It &quot;works&quot; because you assign structures, which is allowed and effectively equivalent to the <code>memcpy</code> operation. The last sentence is lost in translation."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1466610723, "post_id": 37972848, "comment_id": 63391978, "body": "An expected output can be the result of undefined behavior. Simply put, you code doesn&#39;t &#39;work&#39;."}, {"owner": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "edited": false, "score": 0, "creation_date": 1466611000, "post_id": 37972848, "comment_id": 63392157, "body": "Also note that It &quot;works&quot; because the struct has only one field of type char array. Try to add another field in the structure."}, {"owner": {"reputation": 733, "user_id": 4224112, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/99108dc591ff29f0e0f5251e1072cac7?s=128&d=identicon&r=PG&f=1", "display_name": "cheroky", "link": "https://stackoverflow.com/users/4224112/cheroky"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1466611198, "post_id": 37972848, "comment_id": 63392308, "body": "@Eugene Sh: the assignment is equivalent to memcpy?"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1466611244, "post_id": 37972848, "comment_id": 63392341, "body": "@2501 - where is the UB?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1466611266, "post_id": 37972848, "comment_id": 63392355, "body": "@cheroky The assignment of a <i>structure</i> is equivalent to <code>memcpy</code> with the <code>sizeof</code> of that structure."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1466611323, "post_id": 37972848, "comment_id": 63392394, "body": "@2501 Actually I am failing to point at the concrete UB cause here. I think the aliasing is legal here.."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1466611396, "post_id": 37972848, "comment_id": 63392460, "body": "@EugeneSh. As it has been said many times, char can alias any type but not vice-versa. (I think I had this conversation with you before, if I&#39;m not mistaken.)"}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1466611549, "post_id": 37972848, "comment_id": 63392553, "body": "@pm100 <code>string</code> cannot alias <code>char[LEN]</code>. The types are not compatible =&gt; ub."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1466611969, "post_id": 37972848, "comment_id": 63392844, "body": "@EugeneSh. &quot;The assignment of a <code>structure</code> is equivalent to <code>memcpy</code> with the <code>sizeof</code> of that structure.&quot;  No, it is not.  Per <b>6.2.6.1 General</b>, paragraph 6 of the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">C Standard</a>: <i>When a value is stored in an object of structure or union type, including in a member object, the bytes of the object representation that correspond to any padding  bytes take unspecified values.</i>  The footnote to that - footnote 51 - specifically states:  <i>Thus, for example, structure assignment need not copy any padding bits.</i>"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1466611994, "post_id": 37972848, "comment_id": 63392864, "body": "@2501 Yeah, that was me. But I must admit I am still getting confused with it :)"}, {"owner": {"reputation": 9020, "user_id": 485088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d4c2e26c21ecd1e0565915687b8c092?s=128&d=identicon&r=PG", "display_name": "Tim \u010cas", "link": "https://stackoverflow.com/users/485088/tim-%c4%8cas"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1466612232, "post_id": 37972848, "comment_id": 63393012, "body": "@2501: Sort of. If the <code>char[LEN]</code> originated from a <code>string</code>, then it&#39;s safe to cast it back (it didn&#39;t here, but just saying). Whether that is an aliasing problem or some other problem is debatable, however."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "reply_to_user": {"reputation": 9020, "user_id": 485088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d4c2e26c21ecd1e0565915687b8c092?s=128&d=identicon&r=PG", "display_name": "Tim \u010cas", "link": "https://stackoverflow.com/users/485088/tim-%c4%8cas"}, "edited": false, "score": 0, "creation_date": 1466612704, "post_id": 37972848, "comment_id": 63393287, "body": "@Tim\u010cas Yes that would be fine, but that is a different case. They might be techically allowed to alias, but I think this is a defect and wasn&#39;t intended behavior. There are other problems, padding, alignment that make this ub. See: <a href=\"https://stackoverflow.com/questions/17384918/can-a-struct-alias-its-own-initial-and-only-member\" title=\"can a struct alias its own initial and only member\">stackoverflow.com/questions/17384918/&hellip;</a>"}, {"owner": {"reputation": 9020, "user_id": 485088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d4c2e26c21ecd1e0565915687b8c092?s=128&d=identicon&r=PG", "display_name": "Tim \u010cas", "link": "https://stackoverflow.com/users/485088/tim-%c4%8cas"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1466638681, "post_id": 37972848, "comment_id": 63405553, "body": "@2501: Not saying you&#39;re wrong generally, but it&#39;s definitely not padding &amp; alignment that would make it UB (since the struct would have the same alignment as its first datamember, and the same padding as its only datamember; without that guarantee, you couldn&#39;t cast from <code>string</code> to <code>char[LEN]</code> in the first place, and that <i>is</i> <b><i>explicitly</i></b> allowed!)."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "reply_to_user": {"reputation": 9020, "user_id": 485088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d4c2e26c21ecd1e0565915687b8c092?s=128&d=identicon&r=PG", "display_name": "Tim \u010cas", "link": "https://stackoverflow.com/users/485088/tim-%c4%8cas"}, "edited": false, "score": 0, "creation_date": 1466658250, "post_id": 37972848, "comment_id": 63410474, "body": "@Tim\u010cas C Standard doesn&#39;t guarantee that there is no padding in the struct, and it doesn&#39;t guarantee identical alignment for different types. The struct in this case may have different alignment requirements and may have padding."}, {"owner": {"reputation": 9020, "user_id": 485088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d4c2e26c21ecd1e0565915687b8c092?s=128&d=identicon&r=PG", "display_name": "Tim \u010cas", "link": "https://stackoverflow.com/users/485088/tim-%c4%8cas"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1466676937, "post_id": 37972848, "comment_id": 63421305, "body": "@2501: Sure, but there is <i>never</i> padding at the beginning. And because casting <code>string</code> to <code>char[LEN]</code> <i>is</i> allowed, it also needs to have compatible alignment requirements. See C99 (or C11) 6.5p7 and 6.7.2p13."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "reply_to_user": {"reputation": 9020, "user_id": 485088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d4c2e26c21ecd1e0565915687b8c092?s=128&d=identicon&r=PG", "display_name": "Tim \u010cas", "link": "https://stackoverflow.com/users/485088/tim-%c4%8cas"}, "edited": false, "score": 0, "creation_date": 1466750427, "post_id": 37972848, "comment_id": 63457447, "body": "@Tim\u010cas Padding may be at the end. 6.5p7 doesn&#39;t prohibit padding. Assuming that it does is not correct. 6.7.2p13 doesn&#39;t exist. You probably meant 6.7.2.1p13? The struct may have stricter alignment requirements. Anyway see the link I posted why you shouldn&#39;t do this in real code. If you&#39;re interested from a language perspective I have stated my opinion two comments up."}, {"owner": {"reputation": 9020, "user_id": 485088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d4c2e26c21ecd1e0565915687b8c092?s=128&d=identicon&r=PG", "display_name": "Tim \u010cas", "link": "https://stackoverflow.com/users/485088/tim-%c4%8cas"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1466767403, "post_id": 37972848, "comment_id": 63466844, "body": "@2501: Padding at the end does not influence accesses to the first (in this case only, but that&#39;s irrelevant) member of the struct. Only padding at the start of the struct matters (which is always <code>0</code>)."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "reply_to_user": {"reputation": 9020, "user_id": 485088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d4c2e26c21ecd1e0565915687b8c092?s=128&d=identicon&r=PG", "display_name": "Tim \u010cas", "link": "https://stackoverflow.com/users/485088/tim-%c4%8cas"}, "edited": false, "score": 0, "creation_date": 1466767757, "post_id": 37972848, "comment_id": 63467048, "body": "@Tim\u010cas Padding may be copied, since the array doesn&#39;t have padding, but is copied as a struct, copying reads and writes bytes out of bounds."}], "answers": [{"comments": [{"owner": {"reputation": 826, "user_id": 5698202, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HfozP.jpg?s=128&g=1", "display_name": "Abhirath Mahipal", "link": "https://stackoverflow.com/users/5698202/abhirath-mahipal"}, "edited": false, "score": 0, "creation_date": 1466611916, "post_id": 37973093, "comment_id": 63392810, "body": "Deleted the comment once I read Govind Parmar&#39;s answer about bits for padding that are frequently used in structs."}, {"owner": {"reputation": 826, "user_id": 5698202, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HfozP.jpg?s=128&g=1", "display_name": "Abhirath Mahipal", "link": "https://stackoverflow.com/users/5698202/abhirath-mahipal"}, "edited": false, "score": 0, "creation_date": 1466613766, "post_id": 37973093, "comment_id": 63393921, "body": "Your comment made absolute sense btw. I deleted my question before you answered."}], "tags": [], "owner": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "is_accepted": false, "score": 0, "last_activity_date": 1466611205, "last_edit_date": 1495540351, "creation_date": 1466611205, "answer_id": 37973093, "question_id": 37972848, "link": "https://stackoverflow.com/questions/37972848/assigning-to-an-array-by-casting-to-a-struct/37973093#37973093", "title": "Assigning to an array by casting to a struct", "body": "<p>As pointed out in the comments you are not assigning an array to another but you are assigning a struct to another by means of the cast.\nAssigning a struct result in copying all the elements (in case of a simple struct, see this <a href=\"https://stackoverflow.com/questions/9127246/copy-struct-to-struct-in-c\">post</a>). The code however it's really bad and you can break it by simply adding another field to the struct.</p>\n"}, {"comments": [{"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1466611784, "post_id": 37973173, "comment_id": 63392707, "body": "<code>(you can&#39;t even be sure that there won&#39;t be padding before the first variable in a struct)</code> yes, you can be sure, there are no padding bytes before the first member of a <code>struct</code> ( not the downvoter)"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1466612013, "post_id": 37973173, "comment_id": 63392874, "body": "I&#39;d be inclined to recommend <code>memcpy()</code> over an element-by-element <code>for</code> loop."}, {"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1466612139, "post_id": 37973173, "comment_id": 63392949, "body": "@JohnBollinger ha that slipped my mind... edited my post"}, {"owner": {"reputation": 2988, "user_id": 452414, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rDMfs.png?s=128&g=1", "display_name": "babon", "link": "https://stackoverflow.com/users/452414/babon"}, "edited": false, "score": 0, "creation_date": 1466612154, "post_id": 37973173, "comment_id": 63392960, "body": "I beg to differ, I think this particular piece of code will always print &quot;Hello World&quot; because you are laying down the bits after a cast to <code>(* string)</code>, which will always copy the 12 bytes to the address pointed by <code>buffer2</code>."}, {"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "reply_to_user": {"reputation": 2988, "user_id": 452414, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rDMfs.png?s=128&g=1", "display_name": "babon", "link": "https://stackoverflow.com/users/452414/babon"}, "edited": false, "score": 0, "creation_date": 1466612328, "post_id": 37973173, "comment_id": 63393070, "body": "@babon Yes but John&#39;s answer goes into detail about why this is a bad practice in general; using the standard C library functions is better"}, {"owner": {"reputation": 2988, "user_id": 452414, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rDMfs.png?s=128&g=1", "display_name": "babon", "link": "https://stackoverflow.com/users/452414/babon"}, "edited": false, "score": 0, "creation_date": 1466612471, "post_id": 37973173, "comment_id": 63393158, "body": "Yes, agreed. Writing code like this simply makes life harder for everyone."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 2988, "user_id": 452414, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rDMfs.png?s=128&g=1", "display_name": "babon", "link": "https://stackoverflow.com/users/452414/babon"}, "edited": false, "score": 0, "creation_date": 1466613287, "post_id": 37973173, "comment_id": 63393650, "body": "@babon, in practice, I think most C systems would produce a binary that prints &quot;Hello World&quot;.  You cannot rely on that, however, because by definition, you cannot reason about undefined behavior."}], "tags": [], "owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "is_accepted": false, "score": 0, "last_activity_date": 1466612058, "last_edit_date": 1466612058, "creation_date": 1466611468, "answer_id": 37973173, "question_id": 37972848, "link": "https://stackoverflow.com/questions/37972848/assigning-to-an-array-by-casting-to-a-struct/37973173#37973173", "title": "Assigning to an array by casting to a struct", "body": "<p>From your comment \"As far as I understand, I cannot assign one array to another.\" it seems that you created the struct to circumvent the inability to copy one string to another by casting your buffers to the struct in assignment.</p>\n\n<p>This happened to work this time, but it won't <em>always</em> work; structs often have padding and alignment bits between fields.</p>\n\n<p>If you want to copy one string to another in C, use the <code>strcpy</code> or <code>strncpy</code> functions (or, in the case of <code>wchar_t</code> type strings, <code>wcscpy</code> and <code>wcsncpy</code>).</p>\n\n<p>If you want to copy one array of an arbitrary type to another, use a <code>for</code> loop where you copy each index one by one, or the <code>memcpy</code> function.</p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 4, "last_activity_date": 1466612300, "last_edit_date": 1466612300, "creation_date": 1466611946, "answer_id": 37973307, "question_id": 37972848, "link": "https://stackoverflow.com/questions/37972848/assigning-to-an-array-by-casting-to-a-struct/37973307#37973307", "title": "Assigning to an array by casting to a struct", "body": "<p>C permits assigning one struct to another of the same type, and the semantics of doing so are defined in terms of the struct representation, as opposed to a member-by-member copy.  That a struct representation encompasses the representation of an array does not mean that assigning the value of a struct that contains an array to another struct violates C's prohibition against assigning one array to another.</p>\n\n<p>C furthermore guarantees that the address of the first member of a struct is the same as the address of the struct itself, and it permits object pointers to be cast among different pointer types.  In that case, the result of such a conversion is not guaranteed to be correctly aligned, and if it is not then dereferencing that result produces undefined behavior.</p>\n\n<p>On the other hand, the compiler is free to include trailing padding in struct representations.  Oftentimes that is done for alignment purposes.  If your compiler does that for your struct -- which it likely <em>will</em> do if it applies a 64-bit or greater alignment requirement to it -- then your assignment produces undefined behavior.  In that case, if it appears to work then that's because you got lucky.</p>\n\n<p>If, however, it turns out that neither of the above sources of undefined behavior applies, then it is indeed reasonable to expect the code to work as expected.  Inasmuch as it is tricky to predict whether that will be the case, however, you would be well advised to avoid code like this.</p>\n\n<p>A better question might be why C disallows array copying.  There are likely several reasons, but I think the deepest one is simply for consistency.  In almost all contexts, when an an expression or sub-expression evaluates to an array, that value <em>decays</em> to a pointer to the first array element.  That includes the subexpressions constituting the operands to an <code>=</code> operator.  So in normal C expressions, an array assignment would actually be a pointer assignment, and one that did not have the intended semantics. One would have had to carefully craft an appropriate special case for that situation in order to allow for array assignment.</p>\n"}], "owner": {"reputation": 733, "user_id": 4224112, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/99108dc591ff29f0e0f5251e1072cac7?s=128&d=identicon&r=PG&f=1", "display_name": "cheroky", "link": "https://stackoverflow.com/users/4224112/cheroky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 1, "accepted_answer_id": 37973307, "answer_count": 3, "score": 0, "last_activity_date": 1466612300, "creation_date": 1466610515, "last_edit_date": 1466610803, "question_id": 37972848, "link": "https://stackoverflow.com/questions/37972848/assigning-to-an-array-by-casting-to-a-struct", "title": "Assigning to an array by casting to a struct", "body": "<p>Why does the following code work?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define LEN 12\n\ntypedef struct\n{\n    char buffer[LEN];\n} string;\n\nint main()\n{\n    char buffer1[LEN] = \"Hello World\";\n    char buffer2[LEN];\n\n    *(string*)buffer2 = *(string*)buffer1;\n\n    printf(\"%s\",buffer2);\n    return 0;\n}\n</code></pre>\n\n<p>As far as I understand, I cannot assign one array to another.</p>\n"}, {"tags": ["c", "binary", "hex"], "comments": [{"owner": {"reputation": 13, "user_id": 3419585, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a86a8b854a84c681b697aece1298ff84?s=128&d=identicon&r=PG&f=1", "display_name": "user3419585", "link": "https://stackoverflow.com/users/3419585/user3419585"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1466609723, "post_id": 37972461, "comment_id": 63391269, "body": "Hi I have tried this <code>#define SECRET { 0x0b, 0x0b, 0x0b, 0x0b, 0x0b, 0x0b, 0x0b, 0x0b , 0x0b , 0x0b , 0x0b , 0x0b , 0x0b , 0x0b , 0x0b , 0x0b}</code> <code>unsigned char *key= SECRET;</code>  Not sure if this is correct"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 3419585, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a86a8b854a84c681b697aece1298ff84?s=128&d=identicon&r=PG&f=1", "display_name": "user3419585", "link": "https://stackoverflow.com/users/3419585/user3419585"}, "edited": false, "score": 0, "creation_date": 1466610231, "post_id": 37972680, "comment_id": 63391653, "body": "Thank you very much. Does this mean SECRET is defined as a null 16 byte binary value?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 13, "user_id": 3419585, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a86a8b854a84c681b697aece1298ff84?s=128&d=identicon&r=PG&f=1", "display_name": "user3419585", "link": "https://stackoverflow.com/users/3419585/user3419585"}, "edited": false, "score": 0, "creation_date": 1466610354, "post_id": 37972680, "comment_id": 63391734, "body": "@user3419585, Not sure what you mean by that."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 13, "user_id": 3419585, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a86a8b854a84c681b697aece1298ff84?s=128&d=identicon&r=PG&f=1", "display_name": "user3419585", "link": "https://stackoverflow.com/users/3419585/user3419585"}, "edited": false, "score": 0, "creation_date": 1466610484, "post_id": 37972680, "comment_id": 63391814, "body": "@user3419585, you are storing those bytes in <code>key</code>."}, {"owner": {"reputation": 13, "user_id": 3419585, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a86a8b854a84c681b697aece1298ff84?s=128&d=identicon&r=PG&f=1", "display_name": "user3419585", "link": "https://stackoverflow.com/users/3419585/user3419585"}, "edited": false, "score": 0, "creation_date": 1466610739, "post_id": 37972680, "comment_id": 63391987, "body": "@R Sahu. Sorry I know I&#39;m being very stupid but am I storing null bytes in <code>key</code>?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 13, "user_id": 3419585, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a86a8b854a84c681b697aece1298ff84?s=128&d=identicon&r=PG&f=1", "display_name": "user3419585", "link": "https://stackoverflow.com/users/3419585/user3419585"}, "edited": false, "score": 0, "creation_date": 1466610868, "post_id": 37972680, "comment_id": 63392075, "body": "@user3419585, no you are not storing null bytes in <code>key</code>. <code>key[0] = 0x0b</code>. <code>key[1] = 0x0b</code>, etc."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1466610247, "last_edit_date": 1466610247, "creation_date": 1466610023, "answer_id": 37972680, "question_id": 37972461, "link": "https://stackoverflow.com/questions/37972461/how-do-i-store-a-16-byte-binary-value-that-can-be-represented-as-a-32-hexadecima/37972680#37972680", "title": "How do I store a 16 byte binary value that can be represented as a 32 hexadecimal characters in an unsigned char* variable in C", "body": "<pre><code>#define SECRET { 0x0b, 0x0b, 0x0b, 0x0b, 0x0b, 0x0b, 0x0b, 0x0b , 0x0b , 0x0b , 0x0b , 0x0b , 0x0b , 0x0b , 0x0b , 0x0b}\nunsigned char* key = SECRET;\n</code></pre>\n\n<p>is not correct. You can use:</p>\n\n<pre><code>#define SECRET { 0x0b, 0x0b, 0x0b, 0x0b, 0x0b, 0x0b, 0x0b, 0x0b , 0x0b , 0x0b , 0x0b , 0x0b , 0x0b , 0x0b , 0x0b , 0x0b}\nunsigned char key[] = SECRET;  // Change key to an array.\n</code></pre>\n\n<p>If you must you use a pointer, you can create two variables.</p>\n\n<pre><code>#define SECRET { 0x0b, 0x0b, 0x0b, 0x0b, 0x0b, 0x0b, 0x0b, 0x0b , 0x0b , 0x0b , 0x0b , 0x0b , 0x0b , 0x0b , 0x0b , 0x0b}\nunsigned char key_array[] = SECRET;\nunsigned char* key =  key_array;\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 3419585, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a86a8b854a84c681b697aece1298ff84?s=128&d=identicon&r=PG&f=1", "display_name": "user3419585", "link": "https://stackoverflow.com/users/3419585/user3419585"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1466610247, "creation_date": 1466609453, "last_edit_date": 1466610146, "question_id": 37972461, "link": "https://stackoverflow.com/questions/37972461/how-do-i-store-a-16-byte-binary-value-that-can-be-represented-as-a-32-hexadecima", "title": "How do I store a 16 byte binary value that can be represented as a 32 hexadecimal characters in an unsigned char* variable in C", "body": "<p>I have this variable <code>unsigned char* key</code>  </p>\n\n<p>How do I store a 16 byte binary value that can be represented as 32 hexadecimal characters into this variable?</p>\n\n<p>I have tried:</p>\n\n<pre><code>#define SECRET { 0x0b, 0x0b, 0x0b, 0x0b, 0x0b, 0x0b, 0x0b, 0x0b , 0x0b , 0x0b , 0x0b , 0x0b , 0x0b , 0x0b , 0x0b , 0x0b}\nunsigned char* key = SECRET;\n</code></pre>\n\n<p>Not sure if this is correct.</p>\n"}, {"tags": ["c", "string", "constants"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 3, "creation_date": 1466609520, "post_id": 37972444, "comment_id": 63391118, "body": "You can copy the string. <a href=\"http://www.cplusplus.com/reference/cstring/strcpy/\" rel=\"nofollow noreferrer\">strcpy</a>"}, {"owner": {"reputation": 25137, "user_id": 4498831, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jDBV2.png?s=128&g=1", "display_name": "Boiethios", "link": "https://stackoverflow.com/users/4498831/boiethios"}, "edited": false, "score": 3, "creation_date": 1466609533, "post_id": 37972444, "comment_id": 63391130, "body": "<code>const char* string_b10_e2 = {&quot;base 10&quot;};</code> is not good"}, {"owner": {"reputation": 411, "user_id": 4121314, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LLSje.jpg?s=128&g=1", "display_name": "Niles", "link": "https://stackoverflow.com/users/4121314/niles"}, "edited": false, "score": 0, "creation_date": 1466609984, "post_id": 37972444, "comment_id": 63391453, "body": "<code>char * tempString = (char*) malloc(strlen(string_b10_e2)); strcpy(tempString,string_b10_e2);</code> Can&#39;t you use this?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1466610068, "post_id": 37972444, "comment_id": 63391532, "body": "C does not have a string type. <code>string_b10_e2</code> is not a string, but a pointer! What do you want to achieve? If you cannot answer that in an understandable way, please read a C book (pointers and array section and <code>string.h</code>)"}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "reply_to_user": {"reputation": 25137, "user_id": 4498831, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jDBV2.png?s=128&g=1", "display_name": "Boiethios", "link": "https://stackoverflow.com/users/4498831/boiethios"}, "edited": false, "score": 0, "creation_date": 1466610922, "post_id": 37972444, "comment_id": 63392107, "body": "@Boiethios Op&#39;s initialization is correct. Please read this: <a href=\"https://ideone.com/dGqc7i\" rel=\"nofollow noreferrer\">ideone.com/dGqc7i</a>"}, {"owner": {"reputation": 13, "user_id": 3443084, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/60c3dc88a3a414d1629bbf8234533538?s=128&d=identicon&r=PG&f=1", "display_name": "user3443084", "link": "https://stackoverflow.com/users/3443084/user3443084"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1466610993, "post_id": 37972444, "comment_id": 63392149, "body": "@Olaf Thanks for getting that to my notice, sorry about that. Yes I am aware C does not have string type and char* is the way to get string-like variables in C. I am modifying a code where I need to read values from constant pointers into another variable ."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1466611130, "post_id": 37972444, "comment_id": 63392247, "body": "@user3443084: No, it is not! A pointer is not an array s not a pointer. And a &quot;constant pointer&quot; (<code>char * const cp</code>) is something very different from what you ask for. Also note that C also does not have symbolic constants other than <i>enum-constants</i>."}, {"owner": {"reputation": 13, "user_id": 3443084, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/60c3dc88a3a414d1629bbf8234533538?s=128&d=identicon&r=PG&f=1", "display_name": "user3443084", "link": "https://stackoverflow.com/users/3443084/user3443084"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1466612153, "post_id": 37972444, "comment_id": 63392959, "body": "@Olaf Thanks! I do need to read the book for clarity. I guess I was trying to say how to get the string literal into another variable. Thanks!"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1466613093, "post_id": 37972444, "comment_id": 63393524, "body": "@user3443084: There are already many questions about <i>how to copy a string in C</i>. Why did none of them help?"}, {"owner": {"reputation": 25137, "user_id": 4498831, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jDBV2.png?s=128&g=1", "display_name": "Boiethios", "link": "https://stackoverflow.com/users/4498831/boiethios"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1466616163, "post_id": 37972444, "comment_id": 63395353, "body": "@2501 thanks for the link."}, {"owner": {"reputation": 13, "user_id": 3443084, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/60c3dc88a3a414d1629bbf8234533538?s=128&d=identicon&r=PG&f=1", "display_name": "user3443084", "link": "https://stackoverflow.com/users/3443084/user3443084"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1466616937, "post_id": 37972444, "comment_id": 63395824, "body": "@Olaf it is the usage of char* const that I am finding trouble with. Not just copy between two strings. Thanks!"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1466617478, "post_id": 37972444, "comment_id": 63396162, "body": "@user3443084: You confuse &quot;pointer to <code>const char</code>&quot; and &quot;<code>const</code> pointer to <code>char</code>&quot;. Your question is about the first."}, {"owner": {"reputation": 13, "user_id": 3443084, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/60c3dc88a3a414d1629bbf8234533538?s=128&d=identicon&r=PG&f=1", "display_name": "user3443084", "link": "https://stackoverflow.com/users/3443084/user3443084"}, "edited": false, "score": 0, "creation_date": 1466617820, "post_id": 37972444, "comment_id": 63396353, "body": "I am sorry ..yes your are right about that but my point is I am new to this concept and  I did research the site for related questions and none of them answered my question. Hence I posted a new one. Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "is_accepted": false, "score": 2, "last_activity_date": 1466612639, "last_edit_date": 1466612639, "creation_date": 1466609760, "answer_id": 37972579, "question_id": 37972444, "link": "https://stackoverflow.com/questions/37972444/read-string-constant-to-non-constant-variable-in-c/37972579#37972579", "title": "Read string constant to non constant variable in C", "body": "<blockquote>\n  <p>Is there a way to read the value \"base 10\" in a non constant string\n  variable?</p>\n</blockquote>\n\n<p>You can use an <code>union</code></p>\n\n<pre><code>union fake {\n    const char *as_const;\n    char *as_non_const;\n};\n\nunion fake x;\nx.as_const = string_b10_e2;\n</code></pre>\n\n<p>and then use <code>x.as_non_const</code>, but keep in mind that you can not modify his contents (it is still in a read only data segment)</p>\n"}, {"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1466610115, "post_id": 37972686, "comment_id": 63391565, "body": "Don&#39;t cast <code>void *</code> to pointers in C. And your code is a massive security risk if the original string is a variable/parameter."}, {"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1466610203, "post_id": 37972686, "comment_id": 63391635, "body": "@Olaf security risk? Please explain"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1466610234, "post_id": 37972686, "comment_id": 63391656, "body": "What happens if the original string has a length &gt;19?"}, {"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1466610290, "post_id": 37972686, "comment_id": 63391688, "body": "@Olaf in this case we&#39;re copying a string literal which we know for certain to have a length less than 19, not a variable, so we know that we won&#39;t hit that case."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1466610345, "post_id": 37972686, "comment_id": 63391727, "body": "Please read my first comment carefully. Especially the last part ... Alternatively, what happens if you edit the literal lateron? Redundancy is a root of all evil in C."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 1, "creation_date": 1466610406, "post_id": 37972686, "comment_id": 63391767, "body": "This code is also a huge security risk if it happened to use <code>gets</code>. Luckily it doesn&#39;t, so it isn&#39;t. Strawman argument is not an argument."}], "tags": [], "owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "is_accepted": false, "score": 2, "last_activity_date": 1466610136, "last_edit_date": 1466610136, "creation_date": 1466610039, "answer_id": 37972686, "question_id": 37972444, "link": "https://stackoverflow.com/questions/37972444/read-string-constant-to-non-constant-variable-in-c/37972686#37972686", "title": "Read string constant to non constant variable in C", "body": "<p>You cannot assign a string to a <code>char *</code> pointer after initialization using the conventional assignment operator.  </p>\n\n<p>You can, however, use the <code>strcpy</code> function. If you declare it as just a pointer instead of an array with fixed length, you also need to allocate memory for the string:</p>\n\n<pre><code>char *str = NULL;\nstr = malloc(20);\nif(str == NULL) return;\nstrcpy(str, \"Hello World!\\n\")\nprintf(\"%s\", str);\nfree(str);\nstr = NULL;\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 3443084, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/60c3dc88a3a414d1629bbf8234533538?s=128&d=identicon&r=PG&f=1", "display_name": "user3443084", "link": "https://stackoverflow.com/users/3443084/user3443084"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 924, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1466612639, "creation_date": 1466609425, "question_id": 37972444, "link": "https://stackoverflow.com/questions/37972444/read-string-constant-to-non-constant-variable-in-c", "title": "Read string constant to non constant variable in C", "body": "<pre><code>const char* string_b10_e2 = {\"base 10\"}; //base 10\n</code></pre>\n\n<p>Is there a way to read the value \"base 10\" in a non constant string variable?\nI know I CANNOT use a char*, like shown below</p>\n\n<pre><code>char * str,\nstr =  string_b10_e2; //not allowed\n</code></pre>\n\n<p>as it breaks the promise of keeping the string constant.<br>\nBut is there a way to read the value into a non-constant string?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1466608782, "post_id": 37972134, "comment_id": 63390590, "body": "You cannot <i>store</i> the macro <code>NULL</code> into an integer. And you should not store its value in an integer in general."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1466608834, "post_id": 37972134, "comment_id": 63390630, "body": "you need <code>rewind</code>."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1466609210, "post_id": 37972134, "comment_id": 63390903, "body": "and use <code>int **arr;</code> instaed of <code>int arr[100][100];</code>"}], "answers": [{"comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1466612027, "post_id": 37972264, "comment_id": 63392880, "body": "@&#208;iff&#235;\u0159&#235;\u0146t\u011e&#238;Rl Updated the code to handle <code>sscanf</code> not returning <code>2</code> differently. But you have to elaborate on what you mean be &quot;recording 1 with NULL&quot;.<code>NULL</code> is a null <b><i>pointer</i></b>, you should not assign it to an integer variable. And you should really try to think a little bit yourself, I really don&#39;t like writing your code for you, that won&#39;t make you actually <i>learn</i> anything but copy-pasting."}, {"owner": {"reputation": 39, "user_id": 4390122, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100003285910688/picture?type=large", "display_name": "&#208;iff&#235;\u0159&#235;\u0146t \u011e&#238;Rl", "link": "https://stackoverflow.com/users/4390122/%c3%90iff%c3%ab%c5%99%c3%ab%c5%86t-%c4%9e%c3%aerl"}, "edited": false, "score": 0, "creation_date": 1466613715, "post_id": 37972264, "comment_id": 63393880, "body": "i hope to get output matrix like that :  [ 1 100 ; 2 200 ; 3 300; 4 400 ; 1 NULL]; but anyway i will try to do"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1466619374, "post_id": 37972264, "comment_id": 63397212, "body": "Nice answer: minor question: Why use <code>if (res &lt;= 1 || res == EOF)</code> vs <code>if (res &lt;= 1)</code> or <code>if (res != 2)</code> or ...?  Some sort of clarity emphasizes?  Note: suggest <code>printf(&quot;Line %zu: %d %d\\n&quot;, ...</code>"}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 2, "last_activity_date": 1466611851, "last_edit_date": 1466611851, "creation_date": 1466608940, "answer_id": 37972264, "question_id": 37972134, "link": "https://stackoverflow.com/questions/37972134/read-a-file-and-save-as-a-matrix/37972264#37972264", "title": "read a file and save as a matrix", "body": "<p>Two major problems:</p>\n\n<p>The first is that the first loop will read <em>all</em> lines, even the one with the single number on the line. That means the lonely <code>fgets</code> call will not do anything, and more importantly that the value of <code>k</code> will be wrong.</p>\n\n<p>The second problem is that once you read all data from the file, you don't go back to the beginning of the file, instead you continue to try and read from beyond the end of the file.</p>\n\n<p>The first problem can be solve by skipping the second <code>fgets</code> call, and decreasing <code>k</code> by one.</p>\n\n<p>The second problem can be solved by calling <a href=\"http://en.cppreference.com/w/c/io/rewind\" rel=\"nofollow\"><code>rewind</code></a> after you counted the number of lines.</p>\n\n<hr>\n\n<p>Also when you actually read the numbers, you don't need the inner loop, just do e.g.</p>\n\n<pre><code>scanf(\"%d %d\", &amp;arr[i][0], &amp;arr[i][1]);\n</code></pre>\n\n<p>Actually, you don't need the first line-counting loop at all, you can do it all in a single loop, by using <code>fgets</code> and <code>sscanf</code> and then checking the return value of <code>sscanf</code>. So your program could look something like</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    int values[100][2];\n    FILE *input = fopen(\"file.txt\", \"r\");\n    size_t entries = 0;\n\n    if (input != NULL)\n    {\n        char buffer[40];\n        while (fgets(buffer, sizeof(buffer), input) != NULL &amp;&amp; entries &lt; 100)\n        {\n            int res = sscanf(buffer, \"%d %d\", &amp;values[entries][0], &amp;values[entries][1]);\n            if (res &lt;= 1 || res == EOF)\n            {\n                // Read the last line with only one number, or an error happened\n                values[entries][0] = 0;\n                values[entries][1] = 0;\n                break;\n            }\n\n            ++entries;\n        }\n\n        if (ferror(input))\n        {\n            printf(\"Error reading file\\n\");\n        }\n\n        fclose(input);\n    }\n\n    // All done, the number of \"records\" or \"entries\" is in the variable entries\n\n    // Example code: print the values\n    for (size_t i = 0; i &lt; entries; ++i)\n        printf(\"Line %d: %d %d\\n\", i + 1, values[i][0], values[i][1]); \n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 4390122, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100003285910688/picture?type=large", "display_name": "&#208;iff&#235;\u0159&#235;\u0146t \u011e&#238;Rl", "link": "https://stackoverflow.com/users/4390122/%c3%90iff%c3%ab%c5%99%c3%ab%c5%86t-%c4%9e%c3%aerl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 37972264, "answer_count": 1, "score": 0, "last_activity_date": 1466611851, "creation_date": 1466608634, "last_edit_date": 1466608713, "question_id": 37972134, "link": "https://stackoverflow.com/questions/37972134/read-a-file-and-save-as-a-matrix", "title": "read a file and save as a matrix", "body": "<p>i have a file like that : </p>\n\n<pre><code>1 100\n2 200\n3 300\n4 400\n1\n</code></pre>\n\n<p>i want to save it as a matrix and i want to save NULL if there is no second number ! </p>\n\n<p>i tried to write the program but it does not work correctly ! </p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main() {\nint k=0 ,i,j , arr[100][100];\nFILE *in= fopen(\"file.txt\",\"r\");\nchar line[1000]; \nwhile(fgets(line,1000,in) !=NULL) k++;\nfgets(line,1000,in);\nfor (i=0;i&lt;k;i++){\n    for (j=0;j&lt;2;j++){\n        int tmp ;\n        fscanf(in ,\"%d\", &amp;tmp) ;\n        arr[i][j] = tmp ;\n    }\n}\nfclose(in);\nreturn 0; } \n</code></pre>\n"}, {"tags": ["c", "types", "double"], "comments": [{"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 1, "creation_date": 1466608258, "post_id": 37971950, "comment_id": 63390234, "body": "Use <code>scanf(&quot;%lf&quot;, ...)</code>  for <code>double</code>s"}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 1, "creation_date": 1466608267, "post_id": 37971950, "comment_id": 63390245, "body": "<code>%f</code> in <code>printf()</code> prints a <code>double</code>, and <code>float</code> is promoted to <code>double</code> when passed to it.  However, <code>%f</code> for <code>scanf()</code> is for scanning <code>float</code>, and doesn&#39;t normally work for <code>double</code>... try <code>%lf</code>"}, {"owner": {"reputation": 67, "user_id": 5781713, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/DYKV1.jpg?s=128&g=1", "display_name": "Ricardo", "link": "https://stackoverflow.com/users/5781713/ricardo"}, "edited": false, "score": 0, "creation_date": 1466609042, "post_id": 37971950, "comment_id": 63390776, "body": "My book doesn&#39;t show this, but still is a good book for beginners in C. Thanks you guys and I&#39;m sorry for the duplicated question."}], "owner": {"reputation": 67, "user_id": 5781713, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/DYKV1.jpg?s=128&g=1", "display_name": "Ricardo", "link": "https://stackoverflow.com/users/5781713/ricardo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "closed_date": 1466608301, "answer_count": 0, "score": 0, "last_activity_date": 1466608122, "creation_date": 1466608122, "question_id": 37971950, "link": "https://stackoverflow.com/questions/37971950/strange-behavior-when-reading-and-writing-float-and-double-types-in-c", "closed_reason": "Duplicate", "title": "Strange behavior when reading and writing &quot;float&quot; and &quot;double&quot; types in C", "body": "<p>When I put 1 for example this return 1.000 (that's fine to me):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nmain()\n{\n    float num;\n\n    printf(\"Double: \");\n    scanf(\"%f\", &amp;num);\n\n    printf(\"%f\\n\", num);\n}\n</code></pre>\n\n<p>So, when I put 1 at this it returns 0.000. I don't understand because I used %f to read and write correctly. Can you guys explain me?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nmain()\n{\n    double num;\n\n    printf(\"Double: \");\n    scanf(\"%f\", &amp;num);\n\n    printf(\"%f\\n\", num);\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "scandir"], "comments": [{"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 1, "creation_date": 1466608696, "post_id": 37971949, "comment_id": 63390532, "body": "just <code>int filter(const struct dirent *entry)</code>... you pass a function pointer to <code>scandir()</code>, but the filter function itself isn&#39;t declared as a pointer."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1466609536, "post_id": 37971949, "comment_id": 63391135, "body": "<code>return entry</code> is not correct. The return type is <code>int</code>, so I assume you&#39;re supposed to return 0 or 1."}], "answers": [{"tags": [], "owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "is_accepted": true, "score": 3, "last_activity_date": 1466629515, "creation_date": 1466629515, "answer_id": 37978231, "question_id": 37971949, "link": "https://stackoverflow.com/questions/37971949/scandir-own-filter-function/37978231#37978231", "title": "Scandir Own filter function", "body": "<p>Have you considered taking a look at the <a href=\"http://man7.org/linux/man-pages/man3/scandir.3.html\" rel=\"nofollow\"><code>man 3 scandir</code></a> page?</p>\n\n<p>(I find the <a href=\"http://man7.org/linux/man-pages/index.html\" rel=\"nofollow\">Linux man-pages project</a> man pages most up-to-date for C library and system level programming.)</p>\n\n<p>If we have a function that needs the caller to specify a helper function our function should call to do some task, we declare it as a <em>function pointer</em>. In other words, while the prototype for the <code>scandir()</code> function is</p>\n\n<pre><code>int scandir(const char *dirp, struct dirent ***namelist,\n            int (*filter)(const struct dirent *),\n            int (*compar)(const struct dirent **, const struct dirent **));\n</code></pre>\n\n<p>the prototypes for the filter and comparison functions are actually</p>\n\n<pre><code>int myfilter(const struct dirent *);\nint mycompar(const struct dirent **, const struct dirent **);\n</code></pre>\n\n<p>Silly implementations for the functions (that do not fulfill your exercise requirements) could be for example</p>\n\n<pre><code>int myfilter(const struct dirent *entry)\n{\n    /* man 3 scandir says \"entries for which filter()\n     * returns nonzero are stored\".\n     *\n     * Since file names in Linux are multibyte strings,\n     * we use mbstowcs() to find out the length\n     * of the filename in characters.\n     *\n     * Note: strlen() tells the filename length in bytes,\n     *       not characters!\n    */\n    const size_t len = mbstowcs(NULL, entry-&gt;d_name, 0);\n\n    /* Keep filenames that are 3 or 7 characters long. */\n    return (len == 3) || (len == 7);\n}\n\nint mycompar(const struct dirent **entry1, const struct dirent **entry2)\n{\n    const size_t len1 = mbstowcs(NULL, (*entry1)-&gt;d_name, 0);\n    const size_t len2 = mbstowcs(NULL, (*entry2)-&gt;d_name, 0);\n\n    /* Compare by file name lengths (in characters),\n     * sorting shortest file names first. */\n    return (int)((ssize_t)len1 - (ssize_t)len2);\n}\n</code></pre>\n\n<p>When writing code using POSIX.1-2008, remember to add</p>\n\n<pre><code>#define _POSIX_C_SOURCE 200809L\n</code></pre>\n\n<p>before any <code>#include</code>s. To make your code work correctly in different environments (for example, counting <strong>characters</strong> instead of <strong>bytes</strong> in file names, in any Linux system around our world), also <code>#include &lt;locale.h&gt;</code>, and add</p>\n\n<pre><code>setlocale(LC_ALL, \"\");\n</code></pre>\n\n<p>in your <code>main()</code> before you read/scan or write/print anything. (Although there is lots more one <em>can</em> do to localize their programs even further, the above very often suffices. Processing text files should be done using wide strings (<code>L\"This is a \u03c9ide \u00a7tring lite\u211bal \ud83d\ude03\"</code>) and the <code>wchar_t</code> and <code>wint_t</code> types for strings and characters, with the wide string I/O functions. It isn't any more complex or hard to do right, than doing it in the idiotic <em>\"The twenty-seven ASCII letters are sufficient for everyone, even if it makes your name into a dirty word in your native language\"</em> way.</p>\n\n<p>If your teacher does not mention these, you should ask why. A program that cannot handle files or text <code>N\u00f6min\u00e4l \u00c4nim\u00e4l needs more \u20ac, and cowbell</code>, correctly, should not be acceptable in this day and age. There is no need to first learn <em>a wrong way</em> to do things before learning the right way, because the right way is just as easy as the wrong way is.</p>\n"}], "owner": {"reputation": 21, "user_id": 6499942, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-MikcU7agcXI/AAAAAAAAAAI/AAAAAAAAABk/VgZsm-UzaiY/photo.jpg?sz=128", "display_name": "Endryuzwa", "link": "https://stackoverflow.com/users/6499942/endryuzwa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1659, "favorite_count": 1, "accepted_answer_id": 37978231, "answer_count": 1, "score": 1, "last_activity_date": 1466629515, "creation_date": 1466608121, "last_edit_date": 1466608863, "question_id": 37971949, "link": "https://stackoverflow.com/questions/37971949/scandir-own-filter-function", "title": "Scandir Own filter function", "body": "<p>I must write  2 functions, filter - names > 5 chars  and I must sort them by types.</p>\n\n<p>Filtr function should look like this ?</p>\n\n<pre><code>int (* filter) (const struct dirent* entry) {\n\n    if ( (strlen(entry&gt;d_name) - 1 ) &gt; 5 ) {\n        return entry;\n    }\n}\n</code></pre>\n\n<p>How about sort, in dirent its dirent->d_type, but how to sort ?</p>\n"}, {"tags": ["c", "gdal"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1916651"}, "edited": false, "score": 1, "creation_date": 1466612543, "post_id": 37971557, "comment_id": 63393198, "body": "int is GDT_Int32.  Change your array to short, or your data type to GDT_Int32."}, {"owner": {"reputation": 123, "user_id": 3207092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c47996e7beb3b1e1472792b4f9ab3a06?s=128&d=identicon&r=PG&f=1", "display_name": "rbeucher", "link": "https://stackoverflow.com/users/3207092/rbeucher"}, "edited": false, "score": 0, "creation_date": 1466626678, "post_id": 37971557, "comment_id": 63401083, "body": "Isn&#39;t \u201cint&quot; 16 bits ?"}, {"owner": {"reputation": 123, "user_id": 3207092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c47996e7beb3b1e1472792b4f9ab3a06?s=128&d=identicon&r=PG&f=1", "display_name": "rbeucher", "link": "https://stackoverflow.com/users/3207092/rbeucher"}, "edited": false, "score": 0, "creation_date": 1466627093, "post_id": 37971557, "comment_id": 63401286, "body": "OK I thought int was 2 bytes by default but it actually depends on the implementation.  See <a href=\"https://stackoverflow.com/questions/3946268/is-int-by-default-long-int-in-c\" title=\"is int by default long int in c\">stackoverflow.com/questions/3946268/&hellip;</a>"}, {"owner": {"reputation": 123, "user_id": 3207092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c47996e7beb3b1e1472792b4f9ab3a06?s=128&d=identicon&r=PG&f=1", "display_name": "rbeucher", "link": "https://stackoverflow.com/users/3207092/rbeucher"}, "edited": false, "score": 0, "creation_date": 1466662880, "post_id": 37971557, "comment_id": 63412250, "body": "Actually it does not work. I have a raster with NaN values only..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1916651"}, "edited": false, "score": 0, "creation_date": 1466694522, "post_id": 37971557, "comment_id": 63434552, "body": "That maybe QGIS just misinterpreting the values.  Fiddle with the style, and load the &#39;actual&#39; min/max from the raster."}], "answers": [{"tags": [], "owner": {"reputation": 123, "user_id": 3207092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c47996e7beb3b1e1472792b4f9ab3a06?s=128&d=identicon&r=PG&f=1", "display_name": "rbeucher", "link": "https://stackoverflow.com/users/3207092/rbeucher"}, "is_accepted": true, "score": 1, "last_activity_date": 1466627315, "creation_date": 1466627315, "answer_id": 37977693, "question_id": 37971557, "link": "https://stackoverflow.com/questions/37971557/write-raster-using-gdal-c-api/37977693#37977693", "title": "Write Raster using GDAL C API", "body": "<p>The mistake comes from the fact that I was assuming that \"int\" was actually 2 bytes by default which is wrong. The size of int depends on the implementation. See <a href=\"https://stackoverflow.com/questions/3946268/is-int-by-default-long-int-in-c\">is int by default long int in C?</a></p>\n\n<p>See kyle comment</p>\n"}], "owner": {"reputation": 123, "user_id": 3207092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c47996e7beb3b1e1472792b4f9ab3a06?s=128&d=identicon&r=PG&f=1", "display_name": "rbeucher", "link": "https://stackoverflow.com/users/3207092/rbeucher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 402, "favorite_count": 0, "accepted_answer_id": 37977693, "answer_count": 1, "score": 0, "last_activity_date": 1466627315, "creation_date": 1466607055, "last_edit_date": 1466608161, "question_id": 37971557, "link": "https://stackoverflow.com/questions/37971557/write-raster-using-gdal-c-api", "title": "Write Raster using GDAL C API", "body": "<p>I am trying to get my head around the GDAL C API.\nI have some arrays which contains int, float or double values and when I try to dump them to a tiff file using GDALRasterIO I get raster with vertical band alternating with 0 values (uninitialised values I suspect...</p>\n\n<p>Here is a minimal example:</p>\n\n<pre><code>#include \"gdal.h\"\n\nvoid create_new_tiff(char * DstFilename, int nx, int ny);\n\nint main()\n{\nchar  filename[10] = \"test.tif\";\nint nx, ny;\n\nnx = 600;\nny = 500;\n\ncreate_new_tiff(filename, nx, ny);\n\nreturn 0;\n}\n</code></pre>\n\n<p>And the create_new_tiff function:</p>\n\n<pre><code>void create_new_tiff(char * DstFilename, int nx, int ny)\n{\n\nconst char *pszFormat = \"GTiff\";\nint test[nx*ny];\nGDALDatasetH hDstDS;\nGDALRasterBandH hBand;\nchar **papszOptions = NULL;\n\nGDALAllRegister();\nGDALDriverH hDriver = GDALGetDriverByName( pszFormat );\n\nhDstDS = GDALCreate( hDriver, DstFilename, nx, ny, 1, GDT_Int16, papszOptions);\nhBand = GDALGetRasterBand( hDstDS, 1 );\n\nfor(int i=0; i&lt;nx*ny; i++) test[i] = 4;\n\nCPLErr Err = GDALRasterIO( hBand, GF_Write, 0, 0, nx, ny, test, nx, ny, GDT_Int16, 0, 0);\nGDALClose( hDstDS );\n}\n</code></pre>\n\n<p>Looks like I am confusing data type but can't figure out what is wrong...</p>\n\n<p>Thanks</p>\n\n<p>PS: Here is what the raster looks like in QGis:</p>\n\n<p><a href=\"https://i.stack.imgur.com/EOQ5y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EOQ5y.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c", "windows", "python-2.7", "command-line", "arguments"], "answers": [{"comments": [{"owner": {"reputation": 424, "user_id": 5611722, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d2913abbdeff3605ecfe33b37a202d74?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/5611722/bob"}, "edited": false, "score": 0, "creation_date": 1466667460, "post_id": 37975852, "comment_id": 63414928, "body": "Works great! Thanks"}], "tags": [], "owner": {"reputation": 150862, "user_id": 790387, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/450fd2737dd0355700a574bd12842509?s=128&d=identicon&r=PG", "display_name": "Burhan Khalid", "link": "https://stackoverflow.com/users/790387/burhan-khalid"}, "is_accepted": true, "score": 1, "last_activity_date": 1466620569, "creation_date": 1466620569, "answer_id": 37975852, "question_id": 37971438, "link": "https://stackoverflow.com/questions/37971438/embedded-python-code-in-a-windows-shell-command/37975852#37975852", "title": "Embedded Python code in a Windows shell command", "body": "<p>Powershell supports the same format as bash, so you can do:</p>\n\n<pre><code>PS C:\\&gt; hello $(python -c \"print('Bob')\")\n</code></pre>\n\n<p>For <code>cmd.exe</code>, there is no such equivalent, but you can try this (untested):</p>\n\n<pre><code>C:\\&gt;FOR /F \"usebackq\" %x in (`python -c \"print('Bob')\"`) DO hello %x\n</code></pre>\n"}], "owner": {"reputation": 424, "user_id": 5611722, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d2913abbdeff3605ecfe33b37a202d74?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/5611722/bob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 37975852, "answer_count": 1, "score": 1, "last_activity_date": 1466675548, "creation_date": 1466606738, "last_edit_date": 1466675548, "question_id": 37971438, "link": "https://stackoverflow.com/questions/37971438/embedded-python-code-in-a-windows-shell-command", "title": "Embedded Python code in a Windows shell command", "body": "<p>How can I embed a small Python script into a Windows shell command to provide arguments to a program?</p>\n\n<p>Example:</p>\n\n<pre><code>C:\\&gt; hello Bob\nWelcome Bob!\n</code></pre>\n\n<p>What I need is something like this:</p>\n\n<pre><code>C:\\&gt; hello 'python -c print('Bob')'\nWelcome Bob!\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["c", "linux", "unix", "gcc"], "comments": [{"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 4, "creation_date": 1466606667, "post_id": 37971316, "comment_id": 63389037, "body": "The <a href=\"https://gcc.gnu.org/onlinedocs/gcc-6.1.0/gcc/Link-Options.html#Link-Options\" rel=\"nofollow noreferrer\">correct option</a> is <code>-lpt</code> (not <code>-libpt</code>)"}, {"owner": {"reputation": 367, "user_id": 5116657, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/c792862b7b807af5f8fe92d497367f41?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen Lasky", "link": "https://stackoverflow.com/users/5116657/stephen-lasky"}, "reply_to_user": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1466607412, "post_id": 37971316, "comment_id": 63389621, "body": "@pmg You are correct."}], "answers": [{"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 6, "last_activity_date": 1466606625, "creation_date": 1466606625, "answer_id": 37971388, "question_id": 37971316, "link": "https://stackoverflow.com/questions/37971316/gcc-link-library-in-same-folder-as-source-files/37971388#37971388", "title": "gcc: Link Library In Same Folder As Source Files", "body": "<p>You specify the directory to <code>-L</code> and the 'core' name to <code>-l</code>:</p>\n\n<pre><code>gcc -o test main.c IPT.c logitem_list.c -L . -lpt\n</code></pre>\n\n<p>When given <code>-l</code><em><code>pt</code></em>, the linker looks for <code>libpt.a</code> or <code>libpt.so</code> or equivalents (extensions like <code>.dylib</code> or <code>.sl</code> or <code>.dll</code> or <code>.lib</code> on other platforms).</p>\n\n<p>The <code>-L -./</code> is suggesting that the linker look in a directory called 'dash dot', which is unlikely to exist and isn't where <code>libpt.a</code> is found anyway.</p>\n"}, {"tags": [], "owner": {"reputation": 1231, "user_id": 1362309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1ef0e451a4f18f480b5f8537e04fc8d?s=128&d=identicon&r=PG", "display_name": "Taywee", "link": "https://stackoverflow.com/users/1362309/taywee"}, "is_accepted": false, "score": 2, "last_activity_date": 1466607347, "creation_date": 1466607347, "answer_id": 37971678, "question_id": 37971316, "link": "https://stackoverflow.com/questions/37971316/gcc-link-library-in-same-folder-as-source-files/37971678#37971678", "title": "gcc: Link Library In Same Folder As Source Files", "body": "<p>Because it's a static lib, you can also most easily just specify the file directly on the command line.  Remember that a static library is just an indexed archive of object files:</p>\n\n<pre><code>gcc -o test main.c IPT.c logitem_list.c ./libpt.a\n</code></pre>\n\n<p>You can also do this with shared libraries, but you probably shouldn't.</p>\n"}], "owner": {"reputation": 367, "user_id": 5116657, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/c792862b7b807af5f8fe92d497367f41?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen Lasky", "link": "https://stackoverflow.com/users/5116657/stephen-lasky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5718, "favorite_count": 1, "accepted_answer_id": 37971388, "answer_count": 2, "score": 6, "last_activity_date": 1466607347, "creation_date": 1466606413, "last_edit_date": 1466606829, "question_id": 37971316, "link": "https://stackoverflow.com/questions/37971316/gcc-link-library-in-same-folder-as-source-files", "title": "gcc: Link Library In Same Folder As Source Files", "body": "<p>I'm trying to compile a <strong>C</strong> project using <strong>gcc</strong>. All source files and the .a library file are <em>in the same folder</em>. How can I successfully compile the project?</p>\n\n<p><a href=\"https://i.stack.imgur.com/uvuhh.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/uvuhh.png\" alt=\"enter image description here\"></a></p>\n\n<p>I've tried:</p>\n\n<pre><code>gcc -o test main.c IPT.c logitem_list.c -L -./ -libpt\n</code></pre>\n\n<p>But I receieve error:</p>\n\n<pre><code>/usr/bin/ld: cannot find -libpt\ncollect2: error: ld returned 1 exit status\n</code></pre>\n"}, {"tags": ["c", "pointers", "struct"], "comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1466607633, "post_id": 37971299, "comment_id": 63389785, "body": "Your code doesn&#39;t make clear how you&#39;re using <code>volatile</code>.  But be aware it doesn&#39;t do what many think it does.  In fact, <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2006/n2016.html\" rel=\"nofollow noreferrer\">it&#39;s all but useless in actuality</a>."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 2, "creation_date": 1466607819, "post_id": 37971299, "comment_id": 63389917, "body": "Only things explicitly declared as <code>volatile</code> in the type specifier will be volatile. In the above case, <code>trial</code> and <code>*ptrToTrial</code> are volatile. <code>ptrToTrial-&gt;a2</code> is volatile as it is a member of a volatile struct. However <code>ptrToTrial-&gt;a2[0]</code> and <code>ptrToField[0]</code> (assuming those are valid) are not volatile."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1466631487, "post_id": 37971299, "comment_id": 63403337, "body": "&quot;And I use a volatile pointer to access this volatile struct.&quot; <code>volatile A_t *ptrToTrial = &amp;trial;</code>  --&gt; No, <code>ptrToTrial</code>  is not <code>volatile</code>, what it points to is <code>volatile</code>."}], "answers": [{"tags": [], "owner": {"reputation": 3740, "user_id": 1030870, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8f96f7ac4f0bf4c2421a9f58b6893400?s=128&d=identicon&r=PG", "display_name": "Mine", "link": "https://stackoverflow.com/users/1030870/mine"}, "is_accepted": false, "score": 1, "last_activity_date": 1466607568, "creation_date": 1466607568, "answer_id": 37971754, "question_id": 37971299, "link": "https://stackoverflow.com/questions/37971299/pointers-in-a-volatile-struct-in-c/37971754#37971754", "title": "pointers in a volatile struct in C", "body": "<p>Please be noted that <code>int *a2;</code> in your <code>struct A</code> is not volatile.\nSo</p>\n\n<pre><code>int *ptrToField = ptrToTrial-&gt;a2;\n</code></pre>\n\n<p><code>ptrToField</code> is not <code>volatile</code>.</p>\n\n<p><code>trailFunction(ptrToTrial)</code> gets error because the function <code>trailFunction</code> expects <code>A_t *trialptr</code>, but you pass <code>volatile A_t*</code>, it's obviously compile error.</p>\n\n<p>And finally:</p>\n\n<pre><code>function trialFunction(volatile A_t *trialptr)\n{\n     int *p = trialptr-&gt;a2;\n}\n</code></pre>\n\n<p>It's OK to compile, because <code>a2</code>'s type is <code>int*</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "edited": false, "score": 0, "creation_date": 1466612321, "post_id": 37971817, "comment_id": 63393066, "body": "&quot;<i>Have a nice day</i>&quot;? Are you sitting in a cafe ?"}, {"owner": {"reputation": 45, "user_id": 3714459, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/XcFBN.png?s=128&g=1", "display_name": "AkrogAmes", "link": "https://stackoverflow.com/users/3714459/akrogames"}, "reply_to_user": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "edited": false, "score": 0, "creation_date": 1466707529, "post_id": 37971817, "comment_id": 63443041, "body": "Yes ;)  <a href=\"http://images.fineartamerica.com/images-medium-large-5/have-a-nice-day-cafe-brian-wallace.jpg\" rel=\"nofollow noreferrer\">images.fineartamerica.com/images-medium-large-5/&hellip;</a>"}], "tags": [], "owner": {"reputation": 45, "user_id": 3714459, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/XcFBN.png?s=128&g=1", "display_name": "AkrogAmes", "link": "https://stackoverflow.com/users/3714459/akrogames"}, "is_accepted": false, "score": -1, "last_activity_date": 1466607722, "creation_date": 1466607722, "answer_id": 37971817, "question_id": 37971299, "link": "https://stackoverflow.com/questions/37971299/pointers-in-a-volatile-struct-in-c/37971817#37971817", "title": "pointers in a volatile struct in C", "body": "<p>My preferred placement is typically in the pointer declaration. That way, all of the registers in the struct will be treated, by the compiler, as volatile and yet it is possible to have other (e.g. RAM-based shadows) instances of said struct that are not volatile because they are not actually hardware registers underneath.</p>\n\n<p>I therefore advise you to use:</p>\n\n<pre><code>typedef volatile struct\n</code></pre>\n\n<p>Have a nice day</p>\n"}, {"comments": [{"owner": {"reputation": 99, "user_id": 5095718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d038156519990182097dac3fec2cd485?s=128&d=identicon&r=PG&f=1", "display_name": "Curious91", "link": "https://stackoverflow.com/users/5095718/curious91"}, "edited": false, "score": 0, "creation_date": 1466609365, "post_id": 37971976, "comment_id": 63391013, "body": "Makes sense. Thank you."}, {"owner": {"reputation": 99, "user_id": 5095718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d038156519990182097dac3fec2cd485?s=128&d=identicon&r=PG&f=1", "display_name": "Curious91", "link": "https://stackoverflow.com/users/5095718/curious91"}, "edited": false, "score": 0, "creation_date": 1466609696, "post_id": 37971976, "comment_id": 63391251, "body": "So wouldn&#39;t it always make sense to have a volatile pointer defined this way -    A_t volatile *ptrToTrial = &amp;trial; instead of volatile A_t *ptrToTrial = &amp;trial ?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 99, "user_id": 5095718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d038156519990182097dac3fec2cd485?s=128&d=identicon&r=PG&f=1", "display_name": "Curious91", "link": "https://stackoverflow.com/users/5095718/curious91"}, "edited": false, "score": 1, "creation_date": 1466609831, "post_id": 37971976, "comment_id": 63391350, "body": "@Curious91, <code>volatile int *</code> and <code>int volatile *</code> are spelled differently, but they are equivalent, just as <code>volatile int</code> and <code>int volatile</code> are equivalent.  This is the same as for the type qualifier <code>const</code>, which is a more common context for issues such as this to arise."}, {"owner": {"reputation": 99, "user_id": 5095718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d038156519990182097dac3fec2cd485?s=128&d=identicon&r=PG&f=1", "display_name": "Curious91", "link": "https://stackoverflow.com/users/5095718/curious91"}, "edited": false, "score": 0, "creation_date": 1466610013, "post_id": 37971976, "comment_id": 63391479, "body": "int volatile* means that the memory pointed to by the ptr could change, whereas volatile int* means that the pointer still points to the same memory but that the value stored in that memory could change. How are they equivalent?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 99, "user_id": 5095718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d038156519990182097dac3fec2cd485?s=128&d=identicon&r=PG&f=1", "display_name": "Curious91", "link": "https://stackoverflow.com/users/5095718/curious91"}, "edited": false, "score": 1, "creation_date": 1466610425, "post_id": 37971976, "comment_id": 63391783, "body": "@Curious91, you are simply mistaken.  Type qualifiers such as <code>volatile</code> may appear either before or after the type specifier to which they apply, thus <code>volatile int</code> is exactly the same thing as <code>int volatile</code>, and <code>volatile int *</code> is exactly the same thing as <code>int volatile *</code>.  The type <code>int volatile *</code> indicates a non-volatile pointer to a volatile <code>int</code>, just as <code>volatile int *</code> does.  For the qualifier to apply to the pointer itself instead of the pointed-to object, it must come after the <code>*</code>."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 3, "last_activity_date": 1466608201, "creation_date": 1466608201, "answer_id": 37971976, "question_id": 37971299, "link": "https://stackoverflow.com/questions/37971299/pointers-in-a-volatile-struct-in-c/37971976#37971976", "title": "pointers in a volatile struct in C", "body": "<blockquote>\n  <p>Should <code>ptrToField</code> be volatile as well?</p>\n</blockquote>\n\n<p>With your definition of <code>struct A</code>, the thing pointed to by member <code>a2</code> is not declared to be <code>volatile</code>.  That a given instance of <code>struct A</code> is <code>volatile</code> implies that its member <code>a2</code> (the pointer) is <code>volatile</code>, but <strong>not</strong> that the thing it points to is <code>volatile</code>.  This is the difference between <code>int * volatile</code> (equivalent to the actual case) and <code>volatile int *</code>.</p>\n\n<p>The initialization you describe ...</p>\n\n<pre><code>int *ptrToField = ptrToTrial-&gt;a2;\n</code></pre>\n\n<p>... initializes <code>ptrToField</code> with the value of <em>pointer</em> <code>ptrToTrial-&gt;a2</code>.  Because <code>ptrToTrial</code> points to a <code>volatile</code> object, the program must load the pointer (a member of that volatile object) from main memory.  Because the thing pointed to is not (declared to be) volatile, however, no information is lost and no (new) risk is inherent in declaring the type of <code>ptrToField</code>'s target as a plain <code>int</code>.  Certainly there is no advantage in declaring <code>ptrToField</code> itself as volatile.</p>\n\n<p>Do also note, in case it is unclear, that the name of your variable <code>ptrToField</code> is inconsistent with the use to which you put it.  You do not initialize it to point to a member of your <code>struct</code>; rather, you initialize it as a <em>copy</em> of a member of your <code>struct</code>. </p>\n\n<blockquote>\n  <p>Would the compiler know that <code>prtToField</code> is volatile without explicit mention because it is accessed through <code>ptrToTrial</code> which is volatile?</p>\n</blockquote>\n\n<p>It is not required to exercise any such knowledge it might have, and that knowledge in any case would be likely to be very limited in scope.  It knows how that variable was initialized, but it may be difficult to predict when and how its value might thereafter be modified.  In any case, any information not carried by the declared type of the variable is not relevant to the standard C semantics of your program.</p>\n\n<blockquote>\n  <p>Shouldn't the compiler also complain about the pointer p - because p is non-volatile and trialptr->a2 is volatile?</p>\n</blockquote>\n\n<p>No, because although <code>trialptr-&gt;a2</code> is volatile, there is no problem with reading its <em>value</em> (at some given point in time) and assigning that value to another variable.  Object values are bit patterns, they are neither volatile nor non-volatile -- that's a characteristic of their storage, as communicated via the lvalues by which they are accessed.</p>\n"}], "owner": {"reputation": 99, "user_id": 5095718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d038156519990182097dac3fec2cd485?s=128&d=identicon&r=PG&f=1", "display_name": "Curious91", "link": "https://stackoverflow.com/users/5095718/curious91"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 800, "favorite_count": 0, "answer_count": 3, "score": 9, "last_activity_date": 1466609166, "creation_date": 1466606383, "last_edit_date": 1466609166, "question_id": 37971299, "link": "https://stackoverflow.com/questions/37971299/pointers-in-a-volatile-struct-in-c", "title": "pointers in a volatile struct in C", "body": "<p>Say I have a struct</p>\n\n<pre><code>typedef struct A{\n\nint a1;\nint *a2;\n\n}A_t;\n</code></pre>\n\n<p>Now if I declare an instance of this struct to be volatile -</p>\n\n<pre><code>volatile A_t trial;\n</code></pre>\n\n<p>And I use a volatile pointer to access this volatile struct.</p>\n\n<pre><code>volatile A_t *ptrToTrial = &amp;trial;\n</code></pre>\n\n<p>If I try to do this:</p>\n\n<pre><code>int *ptrToField = ptrToTrial-&gt;a2;\n</code></pre>\n\n<p>Should <code>ptrToField</code> be volatile as well? Would the compiler know that <code>prtToField</code> is volatile without explicit mention because it is accessed through <code>ptrToTrial</code> which is volatile?</p>\n\n<p>Also if there is a function -</p>\n\n<pre><code>function trialFunction(A_t *trialptr)\n{\n     int *p = trialptr-&gt;a2;\n\n}\n</code></pre>\n\n<p>If we call this function with the volatile ptr declared above -</p>\n\n<pre><code>trailFunction(ptrToTrial)\n</code></pre>\n\n<p>I get an error: <code>volatile A_t* is incompatible with parameter of type A_t</code>.</p>\n\n<p>So if I change the function definition to include <code>volatile</code>, I do not see an error. </p>\n\n<pre><code>function trialFunction(volatile A_t *trialptr)\n{\n     int *p = trialptr-&gt;a2;\n\n}\n</code></pre>\n\n<p>Shouldn't the compiler also complain about the pointer <code>p</code> - because <code>p</code> is non-volatile and <code>trialptr-&gt;a2</code> is volatile?</p>\n"}, {"tags": ["c", "printf", "scanf"], "comments": [{"owner": {"reputation": 1220, "user_id": 2172854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hm0Q1.png?s=128&g=1", "display_name": "abhishek_naik", "link": "https://stackoverflow.com/users/2172854/abhishek-naik"}, "edited": false, "score": 4, "creation_date": 1466606421, "post_id": 37971284, "comment_id": 63388846, "body": "<code>A[i]</code> is undefined because <code>i</code> is uninitialized.  You should write <code>A[10]</code> instead."}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 2, "creation_date": 1466606472, "post_id": 37971284, "comment_id": 63388891, "body": "You should use standard <code>int main(void)</code> in hosted environment instead of <code>void main()</code>, which is illegal in C89 and implementation-defined in C99 or later, unless you have some special reason to use non-standard signature."}, {"owner": {"reputation": 111, "user_id": 5122664, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-iICTT0HmbI8/AAAAAAAAAAI/AAAAAAAAAf8/bNwMrVU8qjM/photo.jpg?sz=128", "display_name": "Vikranth Inti", "link": "https://stackoverflow.com/users/5122664/vikranth-inti"}, "edited": false, "score": 0, "creation_date": 1466606819, "post_id": 37971284, "comment_id": 63389153, "body": "The following replaced statement is working.   int i=0,A[i];"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1466606956, "post_id": 37971284, "comment_id": 63389263, "body": "<code>int i=0,A[i];</code> invokes undefined behavior.  Use <code>int i=10,A[i];</code> or better <code>int i; int  A[10];</code>"}, {"owner": {"reputation": 111, "user_id": 5122664, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-iICTT0HmbI8/AAAAAAAAAAI/AAAAAAAAAf8/bNwMrVU8qjM/photo.jpg?sz=128", "display_name": "Vikranth Inti", "link": "https://stackoverflow.com/users/5122664/vikranth-inti"}, "edited": false, "score": 0, "creation_date": 1466607325, "post_id": 37971284, "comment_id": 63389553, "body": "Both void main() and int main(void) functions take no arguments but  int main(void) also doesnt return any integer?"}, {"owner": {"reputation": 1220, "user_id": 2172854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hm0Q1.png?s=128&g=1", "display_name": "abhishek_naik", "link": "https://stackoverflow.com/users/2172854/abhishek-naik"}, "edited": false, "score": 0, "creation_date": 1466607407, "post_id": 37971284, "comment_id": 63389617, "body": "@VikranthInti, <code>int main(void)</code> does return an integer.  See, my code below, where I have included <code>return 0;</code> at the end to denote normal program termination."}, {"owner": {"reputation": 111, "user_id": 5122664, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-iICTT0HmbI8/AAAAAAAAAAI/AAAAAAAAAf8/bNwMrVU8qjM/photo.jpg?sz=128", "display_name": "Vikranth Inti", "link": "https://stackoverflow.com/users/5122664/vikranth-inti"}, "reply_to_user": {"reputation": 1220, "user_id": 2172854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hm0Q1.png?s=128&g=1", "display_name": "abhishek_naik", "link": "https://stackoverflow.com/users/2172854/abhishek-naik"}, "edited": false, "score": 0, "creation_date": 1466608256, "post_id": 37971284, "comment_id": 63390231, "body": "@BatCoder, I wish to know further the difference between both the ways, since coding could be done generally  in more than 1 way. As MikeCAT mentioned, is it the case with coding style and standards only?"}, {"owner": {"reputation": 111, "user_id": 5122664, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-iICTT0HmbI8/AAAAAAAAAAI/AAAAAAAAAf8/bNwMrVU8qjM/photo.jpg?sz=128", "display_name": "Vikranth Inti", "link": "https://stackoverflow.com/users/5122664/vikranth-inti"}, "reply_to_user": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1466608656, "post_id": 37971284, "comment_id": 63390509, "body": "@MikeCAT, I tried using void main() also and it is working. If it is illegal, it should show warning or error message. But the program is executing. Please help why does this happen."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1466611050, "post_id": 37971284, "comment_id": 63392190, "body": "@Vikranth Inti &quot; it should show warning or error message.&quot; --&gt; No.  As MikeCAT said, &quot; implementation-defined &quot; means it may work on you compiler/platform, but since it is non-standard, it may not work elsewhere."}], "answers": [{"tags": [], "owner": {"reputation": 1220, "user_id": 2172854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hm0Q1.png?s=128&g=1", "display_name": "abhishek_naik", "link": "https://stackoverflow.com/users/2172854/abhishek-naik"}, "is_accepted": true, "score": 4, "last_activity_date": 1466606658, "creation_date": 1466606658, "answer_id": 37971399, "question_id": 37971284, "link": "https://stackoverflow.com/questions/37971284/can-i-scan-and-print-integers-simultaneously-in-c/37971399#37971399", "title": "Can I scan and print integers simultaneously in C?", "body": "<p>In the code that you have posted, <code>A[i]</code> is undefined because <code>i</code> has not been initialized.  Besides, you need to make sure that the size of array <code>A[]</code> is <code>10</code> because you are iterating over <code>10</code> elements in your for loop.  Please refer the modified code below:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main()\n{\n    int i, A[10];\n    for(i=0;i&lt;10;i++)\n    {\n        scanf(\"%d\",&amp;A[i]);\n        printf(\" %d\",A[i]);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>In the above code, <code>A[10]</code> is an array of <code>10</code> elements.  Besides, note that the return type of <code>main()</code> is <code>int</code> (and not <code>void</code>).  Consequently, a statement <code>return 0</code> has been added at the bottom.</p>\n\n<p>Working code <a href=\"http://ideone.com/zDNUW5\" rel=\"nofollow\"><strong>here</strong></a>.</p>\n"}], "owner": {"reputation": 111, "user_id": 5122664, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-iICTT0HmbI8/AAAAAAAAAAI/AAAAAAAAAf8/bNwMrVU8qjM/photo.jpg?sz=128", "display_name": "Vikranth Inti", "link": "https://stackoverflow.com/users/5122664/vikranth-inti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 230, "favorite_count": 0, "accepted_answer_id": 37971399, "answer_count": 1, "score": 1, "last_activity_date": 1466606658, "creation_date": 1466606340, "question_id": 37971284, "link": "https://stackoverflow.com/questions/37971284/can-i-scan-and-print-integers-simultaneously-in-c", "title": "Can I scan and print integers simultaneously in C?", "body": "<p>While trying to use scanf and printf functions in C serially in a for loop, the program is closing. I am using CODE::BLOCKS on Windows 7. Following is the code. Why does this happen?</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nvoid main()\n{\n    int i,A[i];\n    for(i=0;i&lt;10;i++)\n    {\n        scanf(\"%d\",&amp;A[i]);\n        printf(\" %d\",A[i]);\n    }\n\n}\n</code></pre>\n"}, {"tags": ["c", "cmake"], "comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1466606153, "post_id": 37971179, "comment_id": 63388620, "body": "You will have to link the library to use functions from the library."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1466606326, "post_id": 37971179, "comment_id": 63388762, "body": "You probably need to add <code>-lid3v2</code> (meaning &quot;use code in the library id3v2&quot;) to the end of the compilation command. The compiler should be smart enough to find the library if it is properly installed. The complete compilation command would be something like <code>gcc -std=c99 -pedantic -Wall -o test.exe test.c -lid3v2</code>"}, {"owner": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "reply_to_user": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1466606503, "post_id": 37971179, "comment_id": 63388926, "body": "the .h file is NOT a library; it just contains the API for the library (it specifies the signature of all publicly available methods, structs, and macros in the library. You need to specify the library when you link the program. As @pmg mentioned, uses <code>-lid3vlib</code>  in the link command. You may need to include &#39;-Lxxx` before that if the library is not in the standard system library path, where &#39;xxx&#39; is the directory where you saved the library."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6275207, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76LGL.png?s=128&g=1", "display_name": "Pietro Carrara", "link": "https://stackoverflow.com/users/6275207/pietro-carrara"}, "edited": false, "score": 0, "creation_date": 1466636235, "post_id": 37971662, "comment_id": 63404895, "body": "Thanks, I compiled the lib into a .a file, but added the <code>-static-libgcc id3v2lib.a</code> command instead, as -L wasn&#39;t working."}], "tags": [], "owner": {"reputation": 26, "user_id": 5453989, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-xY74akIxZks/AAAAAAAAAAI/AAAAAAAAAD0/6Mj54fF2cAg/photo.jpg?sz=128", "display_name": "Christian Forler", "link": "https://stackoverflow.com/users/5453989/christian-forler"}, "is_accepted": true, "score": 0, "last_activity_date": 1466607307, "creation_date": 1466607307, "answer_id": 37971662, "question_id": 37971179, "link": "https://stackoverflow.com/questions/37971179/problems-installing-c-library/37971662#37971662", "title": "Problems Installing C Library", "body": "<p>Your IDE do not see the C-files (files with the ending .c) of the <code>id3v2lib</code>. This files reside in the <code>src</code> directory of the <code>id3v2lib</code>.</p>\n\n<p>The beginners approach is to add those C-files.</p>\n\n<p>The more advanced approach is to build the library and tell gcc the directory where the file <code>libid3v2.a</code> resides using the compilerflag -L.</p>\n\n<p><strong>Example</strong>: Lets assume that <code>D:\\foo\\libid3v2.a</code> is the compiled lib, than you have to add the following compiler option: <code>-LD:\\foo -lid3v2</code>.</p>\n\n<p>This behavior should be supported by your IDE.</p>\n"}], "owner": {"reputation": 13, "user_id": 6275207, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76LGL.png?s=128&g=1", "display_name": "Pietro Carrara", "link": "https://stackoverflow.com/users/6275207/pietro-carrara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "closed_date": 1466617580, "accepted_answer_id": 37971662, "answer_count": 1, "score": 1, "last_activity_date": 1466607307, "creation_date": 1466606069, "question_id": 37971179, "link": "https://stackoverflow.com/questions/37971179/problems-installing-c-library", "closed_reason": "Duplicate", "title": "Problems Installing C Library", "body": "<p>I am a begginer C programmer, and recently I have run into a problem that I was unable to solve.</p>\n\n<p>I am struggling to install and use this <a href=\"https://github.com/larsbs/id3v2lib\" rel=\"nofollow\">library</a> (wich is for id3 tag editing in mp3 files).</p>\n\n<p>I have already used other .h files in other codes, just by pasting the file in my /include directory.</p>\n\n<p>When I do this and put the #include &lt;id3v2lib.h&gt; everything is just fine, but when i call a function from within this library the compiler says it is a \"undefined reference\" (I think it is caused because I didn't installed the library propperly).</p>\n\n<p>On the GitHub page it is said that you would need to use cmake, but I am struggling with that too.</p>\n\n<p>I'm on windows 10x64, using Dev-cpp as my IDE, and gcc as the compiler.</p>\n\n<p>Can someone help me install this library? Thanks in advance.</p>\n"}, {"tags": ["c", "arrays", "string", "char"], "comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 6, "creation_date": 1466605916, "post_id": 37971106, "comment_id": 63388421, "body": "You cannot do that because each element of <code>char inputArray[]</code> is type <code>char</code> and it cannot store strings nor pointers to strings."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1466605927, "post_id": 37971106, "comment_id": 63388434, "body": "Please show your research effort till time. Please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> page first."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1466605934, "post_id": 37971106, "comment_id": 63388439, "body": "I&#39;m voting to close this question as off-topic because clearly a write my code request, not a question. Please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> page first. :)"}, {"owner": {"reputation": 3168, "user_id": 5558126, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/222b3385ea809d92778c8d79a0498115?s=128&d=identicon&r=PG&f=1", "display_name": "Pim verleg", "link": "https://stackoverflow.com/users/5558126/pim-verleg"}, "edited": false, "score": 0, "creation_date": 1466605944, "post_id": 37971106, "comment_id": 63388448, "body": "Thank you for your feedback, i always seek to improve myself!"}], "answers": [{"comments": [{"owner": {"reputation": 3168, "user_id": 5558126, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/222b3385ea809d92778c8d79a0498115?s=128&d=identicon&r=PG&f=1", "display_name": "Pim verleg", "link": "https://stackoverflow.com/users/5558126/pim-verleg"}, "edited": false, "score": 0, "creation_date": 1466607372, "post_id": 37971583, "comment_id": 63389590, "body": "That is what i wanted, i just have a hard time phrasing questions :-)"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 3168, "user_id": 5558126, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/222b3385ea809d92778c8d79a0498115?s=128&d=identicon&r=PG&f=1", "display_name": "Pim verleg", "link": "https://stackoverflow.com/users/5558126/pim-verleg"}, "edited": false, "score": 2, "creation_date": 1466607422, "post_id": 37971583, "comment_id": 63389629, "body": "@Peterverleg Take into account that the original array is changed by the function strtok. It inserted zero-characters in the string to split it in words.."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1466607491, "post_id": 37971583, "comment_id": 63389675, "body": "Maybe rather than traversing the input string twice it would be better to allocate space for <code>inputArray</code> as needed, inside the loop with the <code>strtok()</code> call."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1466607545, "post_id": 37971583, "comment_id": 63389715, "body": "@pmg When the memory will be reallocated each time in a loop."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 1, "creation_date": 1466607885, "post_id": 37971583, "comment_id": 63389967, "body": "I have a thing with VLA&#39;s. They tend to fail at the worst time (when the client tries a 2M long string). It takes a bit more management (keeping two counts of elements) to grow the array as needed for better safety."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 2, "last_activity_date": 1466607109, "creation_date": 1466607109, "answer_id": 37971583, "question_id": 37971106, "link": "https://stackoverflow.com/questions/37971106/convert-an-string-with-multiple-words-to-an-array-of-char/37971583#37971583", "title": "convert an string with multiple words to an array of char", "body": "<p>Either you do not know exactly what you want or you want the following:)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n\nint main(void) \n{\n    char input[] = \"this is an example\";\n\n    size_t n = 0;\n\n    for ( char *p = input; *p;  )\n    {\n        while ( isspace( ( unsigned char )*p ) ) ++p;\n\n        if ( *p )\n        {\n            ++n;\n            while ( *p &amp;&amp; !isspace( ( unsigned char )*p ) ) ++p;\n        }\n    }\n\n    char * inputArray[n];\n\n    size_t i = 0;\n    for ( char *p = strtok( input, \" \\t\" ); p != NULL; p = strtok( NULL, \" \\t\" ) ) inputArray[i++] = p;\n\n    for ( i = 0; i &lt; n; i++ ) puts( inputArray[i] );\n\n    return 0;\n}\n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>this\nis\nan\nexample\n</code></pre>\n"}], "owner": {"reputation": 3168, "user_id": 5558126, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/222b3385ea809d92778c8d79a0498115?s=128&d=identicon&r=PG&f=1", "display_name": "Pim verleg", "link": "https://stackoverflow.com/users/5558126/pim-verleg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 270, "favorite_count": 0, "accepted_answer_id": 37971583, "answer_count": 1, "score": -1, "last_activity_date": 1466607109, "creation_date": 1466605864, "question_id": 37971106, "link": "https://stackoverflow.com/questions/37971106/convert-an-string-with-multiple-words-to-an-array-of-char", "title": "convert an string with multiple words to an array of char", "body": "<p>Imagine I have the following string:</p>\n\n<pre><code>char input[] = \"this is an example\";\n</code></pre>\n\n<p>I want to take this string and make each word an entry in an array,\nhow could I get this into an array like this:</p>\n\n<pre><code>char inputArray[] = {\"this\",\"is\",\"an\",\"example\"};\n</code></pre>\n"}, {"tags": ["c", "command-line-interface", "command-line-arguments", "unistd.h"], "comments": [{"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1466606125, "post_id": 37971094, "comment_id": 63388595, "body": "why are you doing <code>argc -=</code>/<code>argv +=</code>? changing loop sentinels inside the loop is usually a bad idea."}, {"owner": {"reputation": 45, "user_id": 6482171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0193584501bd11e051020b998cbd6919?s=128&d=identicon&r=PG&f=1", "display_name": "Sudeep", "link": "https://stackoverflow.com/users/6482171/sudeep"}, "reply_to_user": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1466606450, "post_id": 37971094, "comment_id": 63388871, "body": "I don&#39;t think it&#39;s inside the loop."}, {"owner": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "edited": false, "score": 0, "creation_date": 1466606464, "post_id": 37971094, "comment_id": 63388884, "body": "Off topic : always put bracket (<code>{..}</code>) for control statements <a href=\"http://stackoverflow.com/questions/2125066/is-it-bad-practice-to-use-an-if-statement-without-brackets\">see here</a>. And take care about your indentation =&gt; we can think <code>argc -= optind;</code> and other lines are in the loop because they are indented like <code>switch</code> statement which is in loop"}, {"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1466606520, "post_id": 37971094, "comment_id": 63388937, "body": "ah yes. the indentation makes it look like it is. there&#39;s no <code>{}</code> on the while."}], "answers": [{"tags": [], "owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "is_accepted": true, "score": 4, "last_activity_date": 1467130829, "last_edit_date": 1467130829, "creation_date": 1466606786, "answer_id": 37971454, "question_id": 37971094, "link": "https://stackoverflow.com/questions/37971094/i-was-writing-this-code-for-a-pizza-delivery-system-when-run-from-the-command-p/37971454#37971454", "title": "I was writing this code for a pizza delivery system. When run from the command prompt it displayed an error. How should I run it?", "body": "<p>You've made five mistakes (two important, three less so) and one of the important mistakes is masking the other.</p>\n\n<pre><code>while(ch = getopt(argc, argv, \"d:t\") != EOF)\n</code></pre>\n\n<p>Important mistake #1: The <a href=\"https://en.wikipedia.org/wiki/Order_of_operations\" rel=\"nofollow\">operator precedence</a> of <code>=</code> is <em>lower</em> than <code>!=</code>, so this assigns the <em>result of the comparison</em> to <code>ch</code>, not the return value of <code>getopt</code> as you expected.  Less important mistake #1: <code>getopt</code> returns &minus;1 when it reaches the end of the options.  <code>EOF</code> is not necessarily equal to &minus;1.</p>\n\n<p>You should have written</p>\n\n<pre><code>while ((ch = getopt(argc, argv, \"d:t\")) != -1)\n</code></pre>\n\n<p>Now, when invoked as you described, in the first iteration the value returned from <code>getopt</code> will be <code>'d'</code>, which is not equal to <code>EOF</code> (nor to &minus;1), so the value assigned to <code>ch</code> will be the number 1 (also known as Control-A, or <code>U+0001 START OF HEADING</code>).  This number is not equal to either <code>'d'</code> or <code>'t'</code> (the C standard guarantees <code>0 &lt; 'a' &lt; 'b' &lt; 'c' &lt; 'd' &lt; ... &lt; 'z'</code>, so even if we don't assume ASCII, 1 could only ever be equal to <code>'a'</code>) so the <code>default</code> branch of the <code>switch</code> is taken, and we do this:</p>\n\n<pre><code>fprintf(stderr, \"Invalid option : %s\", optarg);\nreturn 1;\n</code></pre>\n\n<p>And here is important mistake 2: you should print <em><code>ch</code></em>, not <code>optarg</code>, when you get an invalid option.  <code>ch</code> is the option; <code>optarg</code> is the <em>argument</em> to the option, if any.  If you had printed <code>ch</code> you would have realized that the value in <code>ch</code> was not what you expected it to be.</p>\n\n<p>The other less important mistakes are</p>\n\n<pre><code>char ch;\n</code></pre>\n\n<p>This should be <code>int ch;</code>  Like in a <code>getchar</code> loop, the value returned from <code>getopt</code> when it reaches the end of the arguments is outside the range of <code>char</code>.</p>\n\n<pre><code>fprintf(stderr, \"Invalid option : %s\", optarg);\nprintf(\"To be delivered %s\", delivery);\n</code></pre>\n\n<p>Both of these need a <code>\\n</code> at the end of the string to be printed.</p>\n\n<p>In the original form of your question, your code was badly indented, but I suspect that was because you used 4 spaces for a single level of indentation and an 8-space-wide hard TAB for a second level; it is a long-standing bug in the Stack Overflow interface that this kind of code gets mangled when pasted into a question.  So it's not your fault.  (You should indent with spaces only, though.)  The more serious style problem with your code is that some of your single-statement loops have curly braces around them and some of them don't.  Whether or not one should put curly braces around single-statement blocks in C is one of the oldest <a href=\"http://c2.com/cgi/wiki?HolyWar\" rel=\"nofollow\">holy wars</a>; I personally think both sides are wrong, but never mind that; the important thing you should learn is, pick one style or the other and <em>stick to it consistently throughout your code</em>.</p>\n"}], "owner": {"reputation": 45, "user_id": 6482171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0193584501bd11e051020b998cbd6919?s=128&d=identicon&r=PG&f=1", "display_name": "Sudeep", "link": "https://stackoverflow.com/users/6482171/sudeep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 37971454, "answer_count": 1, "score": 0, "last_activity_date": 1467130829, "creation_date": 1466605820, "last_edit_date": 1466606676, "question_id": 37971094, "link": "https://stackoverflow.com/questions/37971094/i-was-writing-this-code-for-a-pizza-delivery-system-when-run-from-the-command-p", "title": "I was writing this code for a pizza delivery system. When run from the command prompt it displayed an error. How should I run it?", "body": "<p>I am building this pizza program using command-line arguments and interface. It should return the ingredients from the arguments. </p>\n\n<pre><code>#include&lt;stdlib.h&gt;\n#include&lt;stdio.h&gt;\n#include&lt;unistd.h&gt;\n\nint main(int argc, char *argv[])\n{\n    char *delivery = \"\";\n    int thick = 0;\n    int count = 0;\n    char ch;\n\n\n    while(ch = getopt(argc, argv, \"d:t\") != EOF)\n        switch(ch)\n        {\n            case 'd' :\n            delivery = optarg;\n            break;\n\n            case 't' :\n            thick = 1;\n            break;\n\n            default:\n            fprintf(stderr, \"Invalid option : %s\", optarg);\n            return 1;\n        }\n\n    argc -= optind;\n    argv += optind;\n\n    if(thick)\n        puts(\"thick crust\");\n\n    if(delivery[0])\n        printf(\"To be delivered %s\", delivery);\n\n    puts(\"ingredients :\");\n\n    for(count = 0; count&lt;argc; count++)\n    {\n        puts(argv[count]);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>When running this program using command prompt in windows as :</p>\n\n<blockquote>\n  <p>program -d now -t </p>\n</blockquote>\n\n<p>it was returning an error :</p>\n\n<blockquote>\n  <p>invalid option: now</p>\n</blockquote>\n\n<p>How should I run this program and why is this error showing?</p>\n"}, {"tags": ["c", "wsdl", "gsoap", "onvif"], "comments": [{"owner": {"reputation": 8777, "user_id": 3102264, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/G69VV.jpg?s=128&g=1", "display_name": "mpromonet", "link": "https://stackoverflow.com/users/3102264/mpromonet"}, "edited": false, "score": 0, "creation_date": 1466622384, "post_id": 37971086, "comment_id": 63398909, "body": "Probably a problem with your typemap.dat, because I run your commands successfully. Did you look to <a href=\"http://www.genivia.com/resources.html#How_do_I_use_gSOAP_with_the_ONVIF_specifications?\" rel=\"nofollow noreferrer\">gSOAP FAQ</a> ?"}, {"owner": {"reputation": 21, "user_id": 6499656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fdfdc8f63cad476f8e4be1f320d8c61?s=128&d=identicon&r=PG&f=1", "display_name": "samyh", "link": "https://stackoverflow.com/users/6499656/samyh"}, "reply_to_user": {"reputation": 8777, "user_id": 3102264, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/G69VV.jpg?s=128&g=1", "display_name": "mpromonet", "link": "https://stackoverflow.com/users/3102264/mpromonet"}, "edited": false, "score": 0, "creation_date": 1466672926, "post_id": 37971086, "comment_id": 63418463, "body": "Hi, I just looked in it, and I modified the typemap.dat file by adding the files that were not here, but It&#39;s always unsuccessful. I tried as well the commands that are proposed by the gSOAP FAQ but they don&#39;t work, can you help me to understand why?"}, {"owner": {"reputation": 21, "user_id": 6499656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fdfdc8f63cad476f8e4be1f320d8c61?s=128&d=identicon&r=PG&f=1", "display_name": "samyh", "link": "https://stackoverflow.com/users/6499656/samyh"}, "reply_to_user": {"reputation": 8777, "user_id": 3102264, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/G69VV.jpg?s=128&g=1", "display_name": "mpromonet", "link": "https://stackoverflow.com/users/3102264/mpromonet"}, "edited": false, "score": 0, "creation_date": 1466673171, "post_id": 37971086, "comment_id": 63418650, "body": "When I add the commands of the FAQ I get an empty header, he says that he cannot open the typemap.dat"}, {"owner": {"reputation": 8777, "user_id": 3102264, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/G69VV.jpg?s=128&g=1", "display_name": "mpromonet", "link": "https://stackoverflow.com/users/3102264/mpromonet"}, "edited": false, "score": 0, "creation_date": 1466704975, "post_id": 37971086, "comment_id": 63441384, "body": "Did you use an old version of gSOAP ? Using gSOAP 2.8.17r from Ubuntu 15.04, it works without customisation of typemap.dat. Perhaps it culd be helpful that you add wsdl2h"}], "answers": [{"tags": [], "owner": {"reputation": 1359, "user_id": 918860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/864a0d3b9707a632fd69a9f1c31e1824?s=128&d=identicon&r=PG&f=1", "display_name": "Dr. Alex RE", "link": "https://stackoverflow.com/users/918860/dr-alex-re"}, "is_accepted": false, "score": 0, "last_activity_date": 1467509586, "creation_date": 1467509586, "answer_id": 38165957, "question_id": 37971086, "link": "https://stackoverflow.com/questions/37971086/error-using-soapcpp2-with-an-onvif-header-file-generated-with-wsdl2h-gsoap-wit/38165957#38165957", "title": "Error using soapcpp2 with an ONVIF header file generated with wsdl2h ( GSOAP with linux )", "body": "<p>Make sure to use the <code>typemap.dat</code> that came with the gsoap 2.8.x distribution. This <code>typemap.dat</code> file includes the ONVIF bindings but also the WS-Addressing <code>wsa5.h</code> binding for the <code>EndpointReference</code> element:</p>\n\n<pre><code>#import \"wsa5.h\"\n...\nclass wsnt__NotificationMessageHolderType\n{ public:\n  /// Element reference \"http://docs.oasis-open.org/wsn/b-2:\"\"http://docs.oasis-open.org/wsn/b-2\":SubscriptionReference.\n    wsa5__EndpointReferenceType*         SubscriptionReference          0;\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6499656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fdfdc8f63cad476f8e4be1f320d8c61?s=128&d=identicon&r=PG&f=1", "display_name": "samyh", "link": "https://stackoverflow.com/users/6499656/samyh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 651, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1467509586, "creation_date": 1466605803, "last_edit_date": 1466621145, "question_id": 37971086, "link": "https://stackoverflow.com/questions/37971086/error-using-soapcpp2-with-an-onvif-header-file-generated-with-wsdl2h-gsoap-wit", "title": "Error using soapcpp2 with an ONVIF header file generated with wsdl2h ( GSOAP with linux )", "body": "<p>I'm trying to implement the onvif protocol on the camera side ( server ) with a microcontroller, without any implementation yet , I'm trying from the wsdl files of the onvif site ( such as <a href=\"http://www.onvif.org/ver10/device/wsdl/devicemgmt.wsdl\" rel=\"nofollow\">http://www.onvif.org/ver10/device/wsdl/devicemgmt.wsdl</a> ) to generate the headers and the implementation files.</p>\n\n<p>So I used gsoap , with the command <code>wsdl2h -c -o devicemgmt.h http://www.onvif.org/onvif/ver10/device/wsdl/devicemgmt.wsdl</code> , and it generates me the devicemgmt.h, Then when I do <code>soapcpp2 devicemgmt.h</code> I have </p>\n\n<pre><code>`devicemgmt.h(12328): syntax error\ndevicemgmt.h(12327): Syntax error: declaration expected\ndevicemgmt.h(12330): syntax error\ndevicemgmt.h(12329): Syntax error: declaration expected\ndevicemgmt.h(12332): syntax error\ndevicemgmt.h(12331): Syntax error: declaration expected\ndevicemgmt.h(12333): syntax error\ndevicemgmt.h(12339): Syntax error: declaration expected\ndevicemgmt.h(12342): syntax error\ndevicemgmt.h(12341): Syntax error: input before ; skipped\ndevicemgmt.h(12371): syntax error\ndevicemgmt.h(12370): Syntax error: declaration expected\ndevicemgmt.h(12373): syntax error\ndevicemgmt.h(12372): Syntax error: declaration expected\ndevicemgmt.h(12375): syntax error\ndevicemgmt.h(12374): Syntax error: declaration expected\ndevicemgmt.h(12377): syntax error\ndevicemgmt.h(12376): Syntax error: declaration expected\ndevicemgmt.h(12415): syntax error\ndevicemgmt.h(12414): Syntax error: declaration expected\ndevicemgmt.h(12417): syntax error\ndevicemgmt.h(12416): Syntax error: declaration expected\nCritical error: too many syntactic errors, bailing out`\n</code></pre>\n\n<p>Here is the oportion of the header file where the errors are occuring : </p>\n\n<pre><code> `/// \"http://docs.oasis-open.org/wsn/b-2\":NotificationMessageHolderType is a complexType.\nstruct ns4__NotificationMessageHolderType\n{\n/// Element reference \"http://docs.oasis-open.org/wsn/b-2\":SubscriptionReference.\n///JUST BELOW THATS THE LINE 12328 WHERE THE ERROR IS \nns1__EndpointReferenceType*          SubscriptionReference          0;  ///&lt; Optional element.\n    /// Element reference \"http://docs.oasis-open.org/wsn/b-2\":Topic.\n        struct ns4__TopicExpressionType*     Topic                          0;  ///&lt; Optional element.\n    /// Element reference \"http://docs.oasis-open.org/wsn/b-2\":ProducerReference.\n        ns1__EndpointReferenceType*          ProducerReference              0;  ///&lt; Optional element.\n        struct _ns4__NotificationMessageHolderType_Message\n        {\n    /// TODO: &lt;any namespace=\"##any\" minOccurs=\"1\" maxOccurs=\"1\"&gt;\n    /// TODO: Schema extensibility is user-definable.\n    ///       Consult the protocol documentation to change or insert declarations.\n    ///       Use wsdl2h option -x to remove this element.\n    ///       Use wsdl2h option -d for xsd__anyType DOM (soap_dom_element).\n        _XML                                 __any                         0;   ///&lt; Catch any element content in XML string.\n        }                                    Message                        1;  ///&lt; Required element.\n    };\n\n\n    /// Top-level root element \"http://docs.oasis-open.org/wsn/b-2\":NotificationProducerRP\n\n    /// \"http://docs.oasis-open.org/wsn/b-2\":NotificationProducerRP is a complexType.\n    struct _ns4__NotificationProducerRP\n    {\n    /// Size of the dynamic array of struct ns4__TopicExpressionType* is 0..unbounded\n       $int                                  __sizeTopicExpression          0;\n    /// Array struct ns4__TopicExpressionType* of length 0..unbounded\n        struct ns4__TopicExpressionType*     TopicExpression                0;\n    /// Element reference \"http://docs.oasis-open.org/wsn/b-2\":FixedTopicSet.\n        enum xsd__boolean*                   FixedTopicSet                  0;  ///&lt; Optional element.\n    /// Size of the dynamic array of xsd__anyURI* is 0..unbounded\n       $int                                  __sizeTopicExpressionDialect   0;\n    /// Array xsd__anyURI* of length 0..unbounded\n        xsd__anyURI*                         TopicExpressionDialect         0;\n    /// Element reference \"http://docs.oasis-open.org/wsn/t-1\":TopicSet.\n        struct ns7__TopicSetType*            ns7__TopicSet                  0;  ///&lt; Optional element.\n    };\n\n\n    /// Top-level root element \"http://docs.oasis-open.org/wsn/b-2\":SubscriptionManagerRP\n\n    /// \"http://docs.oasis-open.org/wsn/b-2\":SubscriptionManagerRP is a complexType.\n    struct _ns4__SubscriptionManagerRP\n    {\n    /// Element reference \"http://docs.oasis-open.org/wsn/b-2\":ConsumerReference.\n        ns1__EndpointReferenceType           ConsumerReference              1;  ///&lt; Required element.\n    /// Element reference \"http://docs.oasis-open.org/wsn/b-2\":Filter.\n        struct ns4__FilterType*              Filter                         0;  ///&lt; Optional element.\n    /// Element reference \"http://docs.oasis-open.org/wsn/b-2\":SubscriptionPolicy.\n        struct ns4__SubscriptionPolicyType*  SubscriptionPolicy             0;  ///&lt; Optional element.\n    /// Element reference \"http://docs.oasis-open.org/wsn/b-2\":CreationTime.\n        time_t*                              CreationTime                   0;  ///&lt; Optional element.\n    };\n\n\n    /// Top-level root element \"http://docs.oasis-open.org/wsn/b-2\":Notify\n\n    /// \"http://docs.oasis-open.org/wsn/b-2\":Notify is a complexType.\n    struct _ns4__Notify\n    {\n    /// Size of the dynamic array of struct ns4__NotificationMessageHolderType* is 1..unbounded\n       $int                                  __sizeNotificationMessage      1;\n    /// Array struct ns4__NotificationMessageHolderType* of length 1..unbounded\n        struct ns4__NotificationMessageHolderType*  NotificationMessage            1;\n    /// TODO: &lt;any namespace=\"##other\" minOccurs=\"0\" maxOccurs=\"unbounded\"&gt;\n    /// TODO: Schema extensibility is user-definable.\n    ///       Consult the protocol documentation to change or insert declarations.\n    ///       Use wsdl2h option -x to remove this element.\n    ///       Use wsdl2h option -d for xsd__anyType DOM (soap_dom_element).\n    /// Size of the array of XML or DOM nodes is 0..unbounded\n       $int                                  __size                        0;\n        _XML                                 __any                         0;   ///&lt; Catch any element content in XML string.\n    };\n\n\n    /// Top-level root element \"http://docs.oasis-open.org/wsn/b-2\":UseRaw\n\n    /// \"http://docs.oasis-open.org/wsn/b-2\":UseRaw is a complexType.\n    struct _ns4__UseRaw\n    {\n    };\n\n\n    /// Top-level root element \"http://docs.oasis-open.org/wsn/b-2\":Subscribe\n\n    /// \"http://docs.oasis-open.org/wsn/b-2\":Subscribe is a complexType.\n    struct _ns4__Subscribe\n    {\n    /// Element ConsumerReference of type \"http://www.w3.org/2005/08/addressing\":EndpointReferenceType.\n        ns1__EndpointReferenceType           ConsumerReference              1;  ///&lt; Required element.\n    /// Element Filter of type \"http://docs.oasis-open.org/wsn/b-2\":FilterType.\n        struct ns4__FilterType*              Filter                         0;  ///&lt; Optional element. `\n</code></pre>\n\n<p>Can someone help me please ? I don't know what to do , what's the problem with ns1__EndpointReferenceType and where is that syntaxe error ? what should I add to the Onvif headers if there is anything to add ?</p>\n"}, {"tags": ["c", "openmp"], "comments": [{"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1466616446, "post_id": 37970933, "comment_id": 63395518, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/37845291/openmp-outer-loop-private-or-shared\">OpenMP outer loop private or shared</a>"}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "reply_to_user": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1466667160, "post_id": 37970933, "comment_id": 63414741, "body": "@Zulan, it&#39;s not exactly a duplicate. There is a subtle difference in that in the first code example <code>i</code> is only private in the work sharing region otherwise it&#39;s still shared inside the parallel region.  The same goes for <code>j</code> in both examples. That&#39;s not a problem with the current code but it could create problems if the code relied on the value of <code>i</code> or <code>j</code> after the loops."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 6499634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6809922fb6d1876f26ccc37d7ec8f2b9?s=128&d=identicon&r=PG&f=1", "display_name": "Escadin", "link": "https://stackoverflow.com/users/6499634/escadin"}, "edited": false, "score": 0, "creation_date": 1466616137, "post_id": 37973401, "comment_id": 63395337, "body": "Thank you for reminding me of the curly brackets. This doesn&#39;t really answer my question though."}, {"owner": {"reputation": 9313, "user_id": 1957265, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b616537ad7664d6f0d24c2b6ff098098?s=128&d=identicon&r=PG", "display_name": "kangshiyin", "link": "https://stackoverflow.com/users/1957265/kangshiyin"}, "reply_to_user": {"reputation": 15, "user_id": 6499634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6809922fb6d1876f26ccc37d7ec8f2b9?s=128&d=identicon&r=PG&f=1", "display_name": "Escadin", "link": "https://stackoverflow.com/users/6499634/escadin"}, "edited": false, "score": 0, "creation_date": 1466617764, "post_id": 37973401, "comment_id": 63396328, "body": "@Escadin all your 4 for-loops will work as expected."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1466667253, "post_id": 37973401, "comment_id": 63414799, "body": "There is a difference. If you declare <code>i</code> private for the parallel region then it&#39;s private for the entire parallel region. Otherwise it&#39;s only private for the work sharing region."}, {"owner": {"reputation": 9313, "user_id": 1957265, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b616537ad7664d6f0d24c2b6ff098098?s=128&d=identicon&r=PG", "display_name": "kangshiyin", "link": "https://stackoverflow.com/users/1957265/kangshiyin"}, "reply_to_user": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1466668735, "post_id": 37973401, "comment_id": 63415653, "body": "@zboson you are right. but there&#39;s no code in the region that i is different. Maybe we need to change the question a little."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1466670904, "post_id": 37973401, "comment_id": 63417051, "body": "Well you could answer the OPs last sentence and question &quot;what behavior can I expect from i between the two for-loops?&quot;  It should be to show that it makes a difference if <code>i</code> is private or shared between the loops."}, {"owner": {"reputation": 15, "user_id": 6499634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6809922fb6d1876f26ccc37d7ec8f2b9?s=128&d=identicon&r=PG&f=1", "display_name": "Escadin", "link": "https://stackoverflow.com/users/6499634/escadin"}, "edited": false, "score": 0, "creation_date": 1466688550, "post_id": 37973401, "comment_id": 63429720, "body": "Regarding my first question:  I guess it&#39;s easier for me to imagine if I remind myself that openMP can schedule the team properly based on a private variable nomatter how it became private. The equivalent would be declaring i in the parallel loop itself which would obsviously work."}], "tags": [], "owner": {"reputation": 9313, "user_id": 1957265, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b616537ad7664d6f0d24c2b6ff098098?s=128&d=identicon&r=PG", "display_name": "kangshiyin", "link": "https://stackoverflow.com/users/1957265/kangshiyin"}, "is_accepted": false, "score": 0, "last_activity_date": 1466617745, "last_edit_date": 1495535645, "creation_date": 1466612213, "answer_id": 37973401, "question_id": 37970933, "link": "https://stackoverflow.com/questions/37970933/openmp-parallel-for-how-does-it-handle-previously-private-index/37973401#37973401", "title": "openmp parallel for - How does it handle previously private index?", "body": "<p>You second for-loop will not compile unless you change your code as</p>\n\n<pre><code>#pragma omp parallel\n{\n  #pragma omp for\n  for(i=0; i &lt; foo; i++)\n    work();\n\n  #pragma omp for private(j)\n  for(i=0; i &lt; foo; i++)\n    for(j=0, j &lt; foo; j++)\n      work();\n}\n</code></pre>\n\n<p>and </p>\n\n<pre><code>int i, j;\n#pragma omp parallel private(i)\n{\n  #pragma omp for\n  for(i=0; i &lt; foo; i++)\n    do();\n\n  #pragma omp for private(j)\n  for(i=0; i &lt; foo; i++)\n    for(j=0, j &lt; foo; j++)\n      work();\n}\n</code></pre>\n\n<p>It is now clear what scope the private <code>i</code> is.</p>\n\n<hr>\n\n<p>After the modification, all of the 4 for-loops will work as expected.</p>\n\n<blockquote>\n  <p>Will openMP still be able to schedule my threads based on i in parallel for loops and how?</p>\n</blockquote>\n\n<p>Yes, at each <code>#pragma omp for</code>, the private <code>i</code>s will be initialized properly and used in the parallel for.</p>\n\n<blockquote>\n  <p>If I don't make it private that way (see first code example) then what behavior can I expect from <code>i</code> between the two for-loops?</p>\n</blockquote>\n\n<p>The index in parallel for defined by <code>#pragma omp for</code> will always be private even if you declare it as shared. So your first code example still work.</p>\n\n<p>Actually it doesn't matter whether you declare <code>i</code> as private or not according to this answer.</p>\n\n<p><a href=\"https://stackoverflow.com/a/37845938/1957265\">https://stackoverflow.com/a/37845938/1957265</a></p>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 6499634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6809922fb6d1876f26ccc37d7ec8f2b9?s=128&d=identicon&r=PG&f=1", "display_name": "Escadin", "link": "https://stackoverflow.com/users/6499634/escadin"}, "edited": false, "score": 0, "creation_date": 1466688702, "post_id": 37986702, "comment_id": 63429865, "body": "Thank you. That example helped me understand how private and shared work in this example."}], "tags": [], "owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "is_accepted": true, "score": 1, "last_activity_date": 1466672022, "creation_date": 1466672022, "answer_id": 37986702, "question_id": 37970933, "link": "https://stackoverflow.com/questions/37970933/openmp-parallel-for-how-does-it-handle-previously-private-index/37986702#37986702", "title": "openmp parallel for - How does it handle previously private index?", "body": "<p>To answer your question</p>\n\n<blockquote>\n  <p>what behaviour can I expect from i between the two for-loops? </p>\n</blockquote>\n\n<p>In your first example <code>i</code> is only private in the work sharing region (in the for loops). Between the two work sharing regions it's still shared.  In the second example since you declared <code>i</code> private for the parallel region it's private everywhere.</p>\n\n<p>The is easy to show.</p>\n\n<pre><code>i = 1;\n#pragma omp parallel\n{\n    #pragma omp for\n    for(i=0; i&lt;10; i++);\n    i = 10;\n}\nprintf(\"%d\\n\", i);\n</code></pre>\n\n<p>This prints <code>10</code> because <code>i</code> is shared except in the work sharing region and every thread writes <code>10</code> to the shared <code>i</code>.</p>\n\n<p>However, </p>\n\n<pre><code>i = 1;\n#pragma omp parallel private(i)\n{\n    #pragma omp for\n    for(i=0; i&lt;10; i++);\n    i = 10;\n}\nprintf(\"%d\\n\", i);\n</code></pre>\n\n<p>prints <code>1</code> because <code>i</code> is private in the entire parallel region and does not modify the <code>i</code> outside of the parallel region.</p>\n\n<p>In your current code since you only use <code>i</code> in the work sharing region then it makes no difference but if used <code>i</code> not in a work sharing region between the loops it could make a difference.  This could lead to a subtle bug. Since you only use <code>i</code> in the work sharing region then I would suggest declaring <code>i</code> in the work sharing region using <code>for(int i=0; ...</code> or declare it private for the whole region.  The same goes for <code>j</code>.</p>\n"}], "owner": {"reputation": 15, "user_id": 6499634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6809922fb6d1876f26ccc37d7ec8f2b9?s=128&d=identicon&r=PG&f=1", "display_name": "Escadin", "link": "https://stackoverflow.com/users/6499634/escadin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 650, "favorite_count": 0, "accepted_answer_id": 37986702, "answer_count": 2, "score": 1, "last_activity_date": 1466688986, "creation_date": 1466605425, "last_edit_date": 1495540518, "question_id": 37970933, "link": "https://stackoverflow.com/questions/37970933/openmp-parallel-for-how-does-it-handle-previously-private-index", "title": "openmp parallel for - How does it handle previously private index?", "body": "<p>I have a parallel block containing 2 parallel for-loops:</p>\n\n<pre><code>    int i, j;\n    #pragma omp parallel\n    {\n      #pragma omp for\n      for(i=0; i &lt; foo; i++)\n        work();\n\n\n      #pragma omp for private(j)\n      for(i=0; i &lt; foo; i++)\n        for(j=0, j &lt; foo; j++)\n          work();\n    }\n</code></pre>\n\n<p>If I were to make it private like this:</p>\n\n<pre><code>int i, j;\n    #pragma omp parallel private(i)\n    {\n      #pragma omp for\n      for(i=0; i &lt; foo; i++)\n        work();\n\n\n      #pragma omp for private(j)\n      for(i=0; i &lt; foo; i++)\n        for(j=0, j &lt; foo; j++)\n          work();\n    }\n</code></pre>\n\n<p>Then I have NUM_THREADS amount of i copies. Will openMP still be able to schedule my threads based on i in parallel for loops and how? If I don't make it private that way (see first code example) then what behaviour can I expect from i between the two for-loops? </p>\n\n<p>It is not a <a href=\"https://stackoverflow.com/questions/37845291/openmp-outer-loop-private-or-shared\">duplicate</a> because I know you can usually let the parralel loop implicitly create a private version of i but I am more concerned about whether that works as expected with a variable that has been private before or has even been worked on before while being temporarily private.</p>\n"}, {"tags": ["c", "standards", "name-decoration"], "comments": [{"owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 0, "creation_date": 1466604607, "post_id": 37970360, "comment_id": 63387206, "body": "The term you are looking for is <a href=\"https://en.wikipedia.org/wiki/Name_mangling\" rel=\"nofollow noreferrer\">name mangling</a>."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 2, "creation_date": 1466604720, "post_id": 37970360, "comment_id": 63387299, "body": "No, only few implementations do that. For example, almost all ELF-based targets don&#39;t add an underscore to symbols."}], "answers": [{"tags": [], "owner": {"reputation": 22818, "user_id": 422797, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/1f20340416b67ca6567f7a3bfe612266?s=128&d=identicon&r=PG", "display_name": "Igor Skochinsky", "link": "https://stackoverflow.com/users/422797/igor-skochinsky"}, "is_accepted": false, "score": 0, "last_activity_date": 1509614564, "creation_date": 1509614564, "answer_id": 47071632, "question_id": 37970360, "link": "https://stackoverflow.com/questions/37970360/name-decoration-in-c/47071632#47071632", "title": "Name decoration in C", "body": "<p>I'm not sure about a \"standard\" but the prepended underscore seems to be a very common convention dating from the 1970s. From <a href=\"https://stackoverflow.com/questions/5908568/\">What is the reason function names are prefixed with an underscore by the compiler?</a>:</p>\n\n<blockquote>\n  <p>At the time that UNIX was rewritten in C in about 1974, its authors\n  already had extensive assember language libraries, and it was easier\n  to mangle the names of new C and C-compatible code than to go back and\n  fix all the existing code.</p>\n</blockquote>\n\n<p>It is required for C names if you want to interoperate with the Microsoft compilers on Windows (win32 only; win64 does not use decoration since it has only a single standard calling convention).</p>\n\n<p><a href=\"https://docs.microsoft.com/en-us/cpp/build/reference/decorated-names\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/cpp/build/reference/decorated-names</a></p>\n\n<p>See also: <a href=\"https://stackoverflow.com/questions/2627511/why-do-c-compilers-prepend-underscores-to-external-names\">Why do C compilers prepend underscores to external names?</a></p>\n"}], "owner": {"reputation": 1141, "user_id": 515212, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/th8Br.png?s=128&g=1", "display_name": "martinkunev", "link": "https://stackoverflow.com/users/515212/martinkunev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 432, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1509614564, "creation_date": 1466604093, "question_id": 37970360, "link": "https://stackoverflow.com/questions/37970360/name-decoration-in-c", "title": "Name decoration in C", "body": "<p>Does any standard mandate name decoration?</p>\n\n<p>As far as I know most (all?) conforming implementations add underscore prefix to the name of each exported symbol. Is this guaranteed by a C, POSIX or some other standard?</p>\n"}, {"tags": ["c", "makefile", "gnu-make"], "answers": [{"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1466606480, "post_id": 37971165, "comment_id": 63388899, "body": "I definitely approve of separating the <code>valgrind</code> run into a separate rule, but why not make it a rule for creating a <i>bona fide</i> file, such as one containing valgrind&#39;s output?  Or if you do not do that, then at least mark the <code>test_ex%</code> as <code>.PHONY</code>."}, {"owner": {"reputation": 14928, "user_id": 360695, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d2c44123afa326f8088914089161248e?s=128&d=identicon&r=PG", "display_name": "Dummy00001", "link": "https://stackoverflow.com/users/360695/dummy00001"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1466606803, "post_id": 37971165, "comment_id": 63389136, "body": "I&#39;m not making assumption about how OP uses the make or valgrind. I have focused only on the question asked: automating the compilation and testing of many files."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1466608597, "post_id": 37971165, "comment_id": 63390481, "body": "That&#39;s fine, but a target whose recipe does not generate the file designated by the target name should be declared <code>.PHONY</code>.  This has nothing to do with how the OP intends to use the <code>make</code> or <code>valgrind</code>, and everything to do with defining the correct semantics to <code>make</code>.  In particular, it&#39;s about what to do in the event that the build directory happens to contain a file with the same name as the target."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1466609687, "post_id": 37971165, "comment_id": 63391246, "body": "Your rules are missing prerequisites."}, {"owner": {"reputation": 14928, "user_id": 360695, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d2c44123afa326f8088914089161248e?s=128&d=identicon&r=PG", "display_name": "Dummy00001", "link": "https://stackoverflow.com/users/360695/dummy00001"}, "edited": false, "score": 0, "creation_date": 1466609700, "post_id": 37971165, "comment_id": 63391253, "body": "Unless the OP explicitly asks for it, I&#39;m not going to burden the answer with the banal nitpicks."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1466609763, "post_id": 37971165, "comment_id": 63391304, "body": "The files won&#39;t be updated. This is the main point of make. Op will be confused."}, {"owner": {"reputation": 14928, "user_id": 360695, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d2c44123afa326f8088914089161248e?s=128&d=identicon&r=PG", "display_name": "Dummy00001", "link": "https://stackoverflow.com/users/360695/dummy00001"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1466611208, "post_id": 37971165, "comment_id": 63392317, "body": "@JohnBollinger, btw, you can&#39;t add <code>test_ex*</code> targets to <code>.PHONY</code> since phony targets never match rules with <code>%</code>."}, {"owner": {"reputation": 187, "user_id": 5090577, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/09f862c692e1f2de71c2763b1c1d4d8f?s=128&d=identicon&r=PG&f=1", "display_name": "Computer Backup", "link": "https://stackoverflow.com/users/5090577/computer-backup"}, "edited": false, "score": 0, "creation_date": 1466613743, "post_id": 37971165, "comment_id": 63393897, "body": "@Dummy00001 what would you recommend?  I am working my way through Lean C The Hard Way and am saving each exercise in an appropriately named file.  What I want this to be able to do is remove all output files, build the files and test them with valgrind."}, {"owner": {"reputation": 897, "user_id": 3830887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aa739aedfb6760abc3605091e12810e?s=128&d=identicon&r=PG&f=1", "display_name": "TonyB", "link": "https://stackoverflow.com/users/3830887/tonyb"}, "edited": false, "score": 0, "creation_date": 1466658399, "post_id": 37971165, "comment_id": 63410521, "body": "I hate to mention it, but the compile line should mention CFLAGS:  as in      cc $(CFLAGS) $@.c -o $@"}, {"owner": {"reputation": 14928, "user_id": 360695, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d2c44123afa326f8088914089161248e?s=128&d=identicon&r=PG", "display_name": "Dummy00001", "link": "https://stackoverflow.com/users/360695/dummy00001"}, "reply_to_user": {"reputation": 187, "user_id": 5090577, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/09f862c692e1f2de71c2763b1c1d4d8f?s=128&d=identicon&r=PG&f=1", "display_name": "Computer Backup", "link": "https://stackoverflow.com/users/5090577/computer-backup"}, "edited": false, "score": 0, "creation_date": 1466668786, "post_id": 37971165, "comment_id": 63415685, "body": "@ComputerBackup, if you are still learning, then this would suffice. My personal way of learning is different: first study the underlaying concepts, then learn by doing. Small games are probably the most common starting point for many: learn coding while having some fun. There are plenty of books for the 2D game programming. You can pick many used ones very cheaply."}], "tags": [], "owner": {"reputation": 14928, "user_id": 360695, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d2c44123afa326f8088914089161248e?s=128&d=identicon&r=PG", "display_name": "Dummy00001", "link": "https://stackoverflow.com/users/360695/dummy00001"}, "is_accepted": true, "score": 5, "last_activity_date": 1466668871, "last_edit_date": 1466668871, "creation_date": 1466606032, "answer_id": 37971165, "question_id": 37970198, "link": "https://stackoverflow.com/questions/37970198/simplification-of-similar-commands-in-makefiles/37971165#37971165", "title": "Simplification of similar commands in Makefiles", "body": "<p>You do not necessarily need loops:</p>\n\n<pre><code>CFLAGS= -Wall -g\n\nALL_EX=ex1 ex2 ex3\n\nall: $(ALL_EX)\n\nex%: ex%.c\n    $(CC) $(CFLAGS) $@.c -o $@\n    valgrind ./$@\n\nclean: ; rm -f $(ALL_EX)\n</code></pre>\n\n<p>To add another test, all you need is to add another <code>exN</code> to the <code>ALL_EX</code> variable.</p>\n\n<p>Or alternatively, splitting the <code>valgrind</code> invocation from the compilation:</p>\n\n<pre><code>CFLAGS= -Wall -g\n\nALL_EX=ex1 ex2 ex3\nTEST_EX=$(ALL_EX:ex%=test_ex%)\n\nall: $(TEST_EX)\ncmp: $(ALL_EX)\n\nex%: ex%.c\n    $(CC) $(CFLAGS) $@.c -o $@\ntest_ex%: ex%\n    valgrind ./$&lt;\n\nclean: ; rm -f $(ALL_EX)\n</code></pre>\n\n<p>That way you would also avoid redundant recompilation of the <code>ex*.c</code> files. And most importantly: this way you can parallelize the compilation and the tests with the <code>make -j</code>.</p>\n"}], "owner": {"reputation": 187, "user_id": 5090577, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/09f862c692e1f2de71c2763b1c1d4d8f?s=128&d=identicon&r=PG&f=1", "display_name": "Computer Backup", "link": "https://stackoverflow.com/users/5090577/computer-backup"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 37971165, "answer_count": 1, "score": 0, "last_activity_date": 1466668871, "creation_date": 1466603689, "question_id": 37970198, "link": "https://stackoverflow.com/questions/37970198/simplification-of-similar-commands-in-makefiles", "title": "Simplification of similar commands in Makefiles", "body": "<p>I have a makefile:</p>\n\n<pre><code>CFLAGS= -Wall -g\n\nall: ex1.c \n    cc ex1.c -o ex1\n    valgrind ./ex1\n    cc ex2.c -o ex2\n    valgrind ./ex2\n    cc ex3.c -o ex3\n    valgrind ./ex3\n\nclean:\n    rm -f ex1\n    rm -f ex2\n    rm -f ex3\n</code></pre>\n\n<p>Is there any way of simplifying this so I do not have to add 3 lines per file (I am expecting ~50 files) and instead I can just insert a number and it will run the commands for that number of files?  All of the files will have the same naming scheme <code>/^ex\\d{1,}\\.c/</code> and are all in the same directory.</p>\n\n<p>Thank you for your help.</p>\n"}, {"tags": ["c", "stdio", "kernighan-and-ritchie"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1466603582, "post_id": 37970047, "comment_id": 63386241, "body": "For your reference <a href=\"http://man7.org/linux/man-pages/man3/getline.3.html\" rel=\"nofollow noreferrer\">this is the <code>getline</code></a> declared in <code>&lt;stdio.h&gt;</code>. As for your problem there is no solution other than to rename your function, you can not have two symbols with the same name and two differing declarations."}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 3, "creation_date": 1466603726, "post_id": 37970047, "comment_id": 63386383, "body": "You can change your operating system to a non-posix flavor or you can rename the function.  One of them is fastest."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1466603799, "post_id": 37970047, "comment_id": 63386458, "body": "1) C does not support <i>methods</i>, only <i>functions</i> 2) K&amp;R teaches an outdated, non-standard compliant version of the C language. Use a more recent book."}, {"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1466603862, "post_id": 37970047, "comment_id": 63386530, "body": "@Olaf is there a real difference between <i>method</i>s and <i>function</i>s? I&#39;ve generally heard that they were interchangeable."}, {"owner": {"reputation": 6951, "user_id": 3475381, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b6a1c5d19f4ae8c6a1dbf097487c96d7?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Sehgal", "link": "https://stackoverflow.com/users/3475381/gaurav-sehgal"}, "edited": false, "score": 0, "creation_date": 1466603884, "post_id": 37970047, "comment_id": 63386543, "body": "If this conflict exists then why is it in the book.Was&#39;t it tested before going into the book."}, {"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "reply_to_user": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1466603917, "post_id": 37970047, "comment_id": 63386574, "body": "@HansPassant is there anyway I can have my OS compile with a non-POSIX style compiler w/o changing my OS to a non-POSIX OS?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1466603925, "post_id": 37970047, "comment_id": 63386578, "body": "Don&#39;t use the same name as standard libray names. What is the problem with simply renaming that function, e.g. to <code>my_getline</code>?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 6951, "user_id": 3475381, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b6a1c5d19f4ae8c6a1dbf097487c96d7?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Sehgal", "link": "https://stackoverflow.com/users/3475381/gaurav-sehgal"}, "edited": false, "score": 1, "creation_date": 1466603953, "post_id": 37970047, "comment_id": 63386600, "body": "@GauravSehgal: 1) <code>getline</code> is POSIX, not C 2) K&amp;R is simply outdated."}, {"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1466603975, "post_id": 37970047, "comment_id": 63386621, "body": "@Olaf I know that&#39;s possible, that&#39;s not what I&#39;m asking. I&#39;m asking if there is a way to still call the function <code>getline</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1466603995, "post_id": 37970047, "comment_id": 63386640, "body": "@EliSadoff: That is a matter of the library, not the compiler. Just rename and stop trying to outsmart your toolchain!"}, {"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1466604082, "post_id": 37970047, "comment_id": 63386726, "body": "@xvan I&#39;m using the second edition. (ANSI-C)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1466604203, "post_id": 37970047, "comment_id": 63386842, "body": "@EliSadoff: C89/90 is not standard since 17 years now."}, {"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1466604244, "post_id": 37970047, "comment_id": 63386878, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/115315/discussion-between-eli-sadoff-and-olaf\">continue this discussion in chat</a>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1466604270, "post_id": 37970047, "comment_id": 63386910, "body": "CV for typo. Childish &quot;but I don&#39;t want to rename it&quot; leads nowhere."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1466604861, "post_id": 37970047, "comment_id": 63387428, "body": "And instead of <code>copy</code>, use <code>strcpy</code> or one of its relatives. If that is from the book: this is another example of outdated code, as <code>from</code> should be <code>const char from[]</code>. Today focus on programming has shifted twards quality. Even more for unsafe languages like C."}, {"owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "edited": false, "score": 0, "creation_date": 1466607649, "post_id": 37970047, "comment_id": 63389797, "body": "Why are you trying to learn C from a book published in 1988? It&#39;s a historical curiosity. Put it on a shelf and get a book that covers the modern language."}, {"owner": {"reputation": 4461, "user_id": 4424957, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W3oNL.jpg?s=128&g=1", "display_name": "Blackwood", "link": "https://stackoverflow.com/users/4424957/blackwood"}, "edited": false, "score": 0, "creation_date": 1466633783, "post_id": 37970047, "comment_id": 63404166, "body": "In my copy of Kernighan &amp; Ritchie (1st edition), the code in section 1.9 does not include the statement <code>#include &lt;stdio.h&gt;</code>. This is an early chapter in the book and I believe the authors are illustrating their point by including code that would become part of the standard libraries. Try compiling it without the <code>#include &lt;stdio.h&gt;</code> ."}], "answers": [{"comments": [{"owner": {"reputation": 6951, "user_id": 3475381, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b6a1c5d19f4ae8c6a1dbf097487c96d7?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Sehgal", "link": "https://stackoverflow.com/users/3475381/gaurav-sehgal"}, "edited": false, "score": 1, "creation_date": 1466603446, "post_id": 37970081, "comment_id": 63386112, "body": "The OP wants to know if he can avoid renaming <code>getline</code>."}, {"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1466603485, "post_id": 37970081, "comment_id": 63386157, "body": "I know that. I was asking if I can keep the definition of <code>getline</code> and somehow override <code>stdio.h</code>&#39;s definition."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1466604100, "post_id": 37970081, "comment_id": 63386744, "body": "<b>Never</b> declare functions of the standard library yourself! They might be actually macros, have implementation-specific attributes, etc. Use the standard headers. OP shall rename her function."}, {"owner": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1466604175, "post_id": 37970081, "comment_id": 63386812, "body": "@Olaf, this is a specific example and the only possible way to get what the op wants, not everything is black or white. It is clearly mentioned there"}, {"owner": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "reply_to_user": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1466604202, "post_id": 37970081, "comment_id": 63386841, "body": "@EliSadoff Does this answer your question Eli?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1466604394, "post_id": 37970081, "comment_id": 63387025, "body": "@IshayPeled: How does that change what I wrote in my comment?"}, {"owner": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1466604438, "post_id": 37970081, "comment_id": 63387060, "body": "@Olaf in the sense that I&#39;m mentioning the problem you mention, but not try to educate anyone..."}, {"owner": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "edited": false, "score": 0, "creation_date": 1466604634, "post_id": 37970081, "comment_id": 63387230, "body": "I wonder why I get so many downvotes. Granted, the first answer was wrong and I did not pay attention (that&#39;s why it was deleted). But why was this answer downvoted if it works and I haven&#39;t seen another possible solution here yet. It doesn&#39;t belong in the comment section, but it is really annoying."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1466605945, "post_id": 37970081, "comment_id": 63388450, "body": "@IshayPeled: My comment stated one reason: you teach bad practice and posibly break the interface on the target machine."}, {"owner": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "edited": false, "score": 0, "creation_date": 1466606018, "post_id": 37970081, "comment_id": 63388514, "body": "Let&#39;s agree I do not teach anything - only address problems. This is what stackoverflow is for."}], "tags": [], "owner": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "is_accepted": false, "score": -2, "last_activity_date": 1466603929, "last_edit_date": 1466603929, "creation_date": 1466603406, "answer_id": 37970081, "question_id": 37970047, "link": "https://stackoverflow.com/questions/37970047/kr-error-conflicting-method-definition/37970081#37970081", "title": "K&amp;R Error: conflicting method definition", "body": "<p>This approach avoids your problem by not including the problematic header. Rather, it copies all the declarations needed in your implementation locally.<br>\nThis is a very bad idea because the declarations of these functions may change without your knowledge in which case your code will pass or receive bad inputs</p>\n\n<pre><code>#define MAXLINE 1000    /* maximum input line size */\n\nint getline(char line[], int maxline);\nvoid copy(char to[], char from[]);\nint printf(const char *format, ...);\nint getchar(void);\n\n/* print longest input line */\nint main()\n{\n    int len;            /* current line length */\n    int max;            /* maximum length seen so far */\n    char line[MAXLINE];     /* current input line */\n    char longest[MAXLINE];  /* longest line saved here */\n\n    max = 0;\n    while ((len = getline(line, MAXLINE)) &gt; 0)\n        if (len &gt; max) {\n            max = len;\n            copy(longest, line);\n        }\n    if (max &gt; 0)    /* there was a line */\n        printf(\"%s\", longest);\n    return 0;\n}\n\n/* getline:  read a line int s, return length */\nint getline(char s[], int lim)\n{\n    int c, i;\n\n    for (i = 0; i&lt;lim-1 &amp;&amp; (c=getchar())!=-1 &amp;&amp; c!='\\n'; ++i)\n        s[i] = c;\n    if (c == '\\n') {\n        s[i] = c;\n        ++i;\n    }\n    s[i] = '\\0';\n    return i;\n}\n\n/* copy:  copy 'from' into 'to'; assume to is big enough */\nvoid copy(char to[], char from[])\n{\n    int i;\n\n    i = 0;\n    while ((to[i] = from[i]) != '\\0')\n        ++i;\n}\n</code></pre>\n\n<p>~                                         </p>\n"}, {"comments": [{"owner": {"reputation": 4011, "user_id": 1477064, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cd12123a743db34ac0b055a6fa736788?s=128&d=identicon&r=PG", "display_name": "xvan", "link": "https://stackoverflow.com/users/1477064/xvan"}, "reply_to_user": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1466604757, "post_id": 37970437, "comment_id": 63387336, "body": "What&#39;s your toolchain, the code compiles on (x86 gcc), tested multiple gcc versions from 4.8 to 6.1"}, {"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1466604924, "post_id": 37970437, "comment_id": 63387483, "body": "gcc: 4.2.1 and LLVM: 7.3.0"}, {"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1466605343, "post_id": 37970437, "comment_id": 63387861, "body": "I tried on my computer in both <code>gcc-4.8</code> and <code>gcc-6</code> but it still doesn&#39;t compile."}, {"owner": {"reputation": 4011, "user_id": 1477064, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cd12123a743db34ac0b055a6fa736788?s=128&d=identicon&r=PG", "display_name": "xvan", "link": "https://stackoverflow.com/users/1477064/xvan"}, "reply_to_user": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1466605347, "post_id": 37970437, "comment_id": 63387866, "body": "Try a newer compiler 4.2.1 is from 2008, I don&#39;t know the proper flags on that version, probably you need something else to explicitly disable posix, the earliest I was able to test on godbot is 4.4.7"}, {"owner": {"reputation": 4011, "user_id": 1477064, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cd12123a743db34ac0b055a6fa736788?s=128&d=identicon&r=PG", "display_name": "xvan", "link": "https://stackoverflow.com/users/1477064/xvan"}, "reply_to_user": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 1, "creation_date": 1466605538, "post_id": 37970437, "comment_id": 63388036, "body": "This is as far as I can help, something may be wrong with your toolchains. At least on linux x64, it works ok for me."}, {"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1466605579, "post_id": 37970437, "comment_id": 63388075, "body": "Thanks for your help! I&#39;m going to accept your answer because despite it not working for me, it seems like it should work."}], "tags": [], "owner": {"reputation": 4011, "user_id": 1477064, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cd12123a743db34ac0b055a6fa736788?s=128&d=identicon&r=PG", "display_name": "xvan", "link": "https://stackoverflow.com/users/1477064/xvan"}, "is_accepted": true, "score": 2, "last_activity_date": 1466604860, "last_edit_date": 1466604860, "creation_date": 1466604290, "answer_id": 37970437, "question_id": 37970047, "link": "https://stackoverflow.com/questions/37970047/kr-error-conflicting-method-definition/37970437#37970437", "title": "K&amp;R Error: conflicting method definition", "body": "<p>As @Olaf commented, <code>getline()</code> is standard POSIX,</p>\n\n<p>K&amp;R second edition is ansi 89 standard.</p>\n\n<p>Just compile in ansi mode, to prevent the collision with POSIX libraries:</p>\n\n<pre><code>gcc -ansi source.c\n</code></pre>\n\n<hr>\n\n<p>Edit:\n<a href=\"https://gcc.godbolt.org/#compilers:!%28%28compiler:g6,options:%27-ansi%27,sourcez:MQSwdgxgNgrgJgUwAQB4DOAXOID2A6ACwD4AoYRAM3GQFkBBADQBkBJAOQFEkBGABn6SCkAegBUSALYBDAB4gJMCUnAAHGBiRRqSNCABeyUcJIlwGgOYIMWsAgAUEAlIBOm6gG0AugBplYDdIyNggAlADcJABuOCBwSBA4KgCeDk6uGDhevo4uSBTOOBJe4SZiSCrOZpo4YJaYfmoawUhGJNLgdiEkAN4kQn5NCGBh/aNCZRAwzs5DTdpQQ%2BYYBC3G/VWBI2OjZYHyipqLyzoIQzo4ebmt/Tmuwe70zOwcnlvj4pPTsw3qbrarfSEt2qtQQmAejFYnFegjKUBqdTm/zQUkiCDiBAQMwBgMEgSQAF4kLwIv0AO4EEALJB2OwLMCEpCWazUOnUXyPKEcEIhJBEYldbbKCg0%2Bl8ySyXm9IX9fFE%2BmkmWCBLJOkIsEYXzBEpCgC%2BuOFNPx/N4vPeSGWWOQZKkaCQUj%2BhjW2wqZgodgARABSNAerXqzA6oQzDBTBkkkj6khlZnBABcghmUjiDuaVTQvhDYcOtWOrSqsdZwLQWQGbgkXWlQiqEF8IAiBooOFcdhAjJJyhQWgkAFpuEgAGQDmkQAnM26dEIAQgJHAA8gAxQfDiAzgDkAB0wGuRgBqXcgQXbEsgTyMiCKwQgEUOQlEzfbqUG/ons9Ei/PoT7%2BsG/Uv9ynoym68DuBpZs4DI/lGEyJEkCbxLBSBrvkhRrgMFxrhkO72mgaCKMgGTKHaABGIDmEgQw4DA5grK00SxAhqrAhkpbAihRSeJWBpVD%2B3HtpeSAUlSyC0ixgFEuxAGcUgM5IRuIFHmM34RLqQAA%29%29,filterAsm:%28commentOnly:!t,labels:!t%29,version:3\" rel=\"nofollow\">GodBot Link</a></p>\n"}], "owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "accepted_answer_id": 37970437, "answer_count": 2, "score": 2, "last_activity_date": 1466607239, "creation_date": 1466603307, "last_edit_date": 1466607239, "question_id": 37970047, "link": "https://stackoverflow.com/questions/37970047/kr-error-conflicting-method-definition", "title": "K&amp;R Error: conflicting method definition", "body": "<p>I am going through K&amp;R (2 ed.) to learn C as I've been trying to get a basis in lower-level languages to help my programming and also because I want to know C. The book is absolutely fantastic; however, a program they provided on pp. 29 (Sec 1.9 Character Arrays) does not compile. This is the code</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define MAXLINE 1000    /* maximum input line size */\n\nint getline(char line[], int maxline);\nvoid copy(char to[], char from[]);\n\n/* print longest input line */\nmain()\n{\n    int len;            /* current line length */\n    int max;            /* maximum length seen so far */\n    char line[MAXLINE];     /* current input line */\n    char longest[MAXLINE];  /* longest line saved here */\n\n    max = 0;\n    while ((len = getline(line, MAXLINE)) &gt; 0)\n        if (len &gt; max) {\n            max = len;\n            copy(longest, line);\n        }\n    if (max &gt; 0)    /* there was a line */\n        printf(\"%s\", longest);\n    return 0;\n}\n\n/* getline:  read a line int s, return length */\nint getline(char s[], int lim)\n{\n    int c, i;\n\n    for (i = 0; i&lt;lim-1 &amp;&amp; (c=getchar())!=EOF &amp;&amp; c!='\\n'; ++i)\n        s[i] = c;\n    if (c == '\\n') {\n        s[i] = c;\n        ++i;\n    }\n    s[i] = '\\0';\n    return i;\n}\n\n/* copy:  copy 'from' into 'to'; assume to is big enough */\nvoid copy(char to[], char from[])\n{\n    int i;\n\n    i = 0;\n    while ((to[i] = from[i]) != '\\0')\n        ++i;\n}\n</code></pre>\n\n<p>When I run <code>cc longest_line.c</code> (that's what I called it) I get an error that <code>getline</code> has conflicting definitions as it was already defined in <code>stdio.h</code>. My question is, how do I resolve this/can I resolve this without giving <code>getline</code> a different name?</p>\n"}, {"tags": ["c", "parallel-processing", "mpi"], "comments": [{"owner": {"reputation": 73919, "user_id": 44309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iL4TW.png?s=128&g=1", "display_name": "High Performance Mark", "link": "https://stackoverflow.com/users/44309/high-performance-mark"}, "edited": false, "score": 3, "creation_date": 1466604457, "post_id": 37970024, "comment_id": 63387076, "body": "If I enter the term <i>Jacobi Relaxation in MPI</i> into the search box of a widely used search engine the first hit I get is a tutorial (with solution), from an extremely reputable site, covering a simple Jacobi iteration.  That&#39;s probably a much better starting point for your work than asking this rather broad question here."}, {"owner": {"reputation": 349, "user_id": 6498993, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-RlWr3I8WlPw/AAAAAAAAAAI/AAAAAAAAABk/a693tVjPFBk/photo.jpg?sz=128", "display_name": "Vincent ROSSIGNOL", "link": "https://stackoverflow.com/users/6498993/vincent-rossignol"}, "reply_to_user": {"reputation": 73919, "user_id": 44309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iL4TW.png?s=128&g=1", "display_name": "High Performance Mark", "link": "https://stackoverflow.com/users/44309/high-performance-mark"}, "edited": false, "score": 0, "creation_date": 1466604685, "post_id": 37970024, "comment_id": 63387269, "body": "I saw this site. However, i don&#39;t think it&#39;s something working well if you want to create an array. It doesn&#39;t put all together the parts of the array created. Also, it&#39;s designed for 12x12 only. But i agree it&#39;s a nice starting point."}, {"owner": {"reputation": 8727, "user_id": 2999346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQ1wB.png?s=128&g=1", "display_name": "francis", "link": "https://stackoverflow.com/users/2999346/francis"}, "edited": false, "score": 0, "creation_date": 1466618456, "post_id": 37970024, "comment_id": 63396703, "body": "Welcome to Stackoverflow! You may be interested by the PETSc library. In particular, the function <a href=\"http://www.mcs.anl.gov/petsc/petsc-current/docs/manualpages/DM/DMDACreate2d.html#DMDACreate2d\" rel=\"nofollow noreferrer\"><code>DMDACreate2d()</code></a> creates a distributed array. For instance, see this <a href=\"http://www.mcs.anl.gov/petsc/petsc-current/src/ksp/ksp/examples/tutorials/ex29.c.html\" rel=\"nofollow noreferrer\">example</a> about inhomogeneous Laplacian.  Distributed arrays are very common in MPI programs. Indeed, it limits the volume of communications between nodes and it ensures a good balance of memory occupancy and CPU time between processes."}], "answers": [{"tags": [], "owner": {"reputation": 483, "user_id": 4775890, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/26ba77b7e154380c4bd69a1c105eb160?s=128&d=identicon&r=PG&f=1", "display_name": "Angelos", "link": "https://stackoverflow.com/users/4775890/angelos"}, "is_accepted": false, "score": 0, "last_activity_date": 1467338840, "creation_date": 1467338840, "answer_id": 38135917, "question_id": 37970024, "link": "https://stackoverflow.com/questions/37970024/jacobi-relaxation-in-mpi/38135917#38135917", "title": "Jacobi Relaxation in MPI", "body": "<p>Here is a code I had written for a similar case and you can use it for as a guide.</p>\n\n<pre><code>do {\n  iter++;\n\n  MPI_Irecv(&amp;old[1][0], 1, myHelloVector, nbrs[LEFT], 2, MPI_COMM_WORLD, \\\n            &amp;requestFourR[LEFT]); \n  MPI_Irecv(&amp;old[1][chunkSize[1]+1], 1, myHelloVector, nbrs[RIGHT], 1, \\\n            MPI_COMM_WORLD, &amp;requestFourR[RIGHT]); \n\n  MPI_Irecv(&amp;old[0][1], chunkSize[1], MPI_FLOAT, nbrs[UP], 4, \\\n            MPI_COMM_WORLD, &amp;requestFourR[UP]);\n  MPI_Irecv(&amp;old[chunkSize[0]+1][1], chunkSize[1], MPI_FLOAT, \\\n            nbrs[DOWN], 3, MPI_COMM_WORLD, &amp;requestFourR[DOWN]);\n\n  MPI_Issend(&amp;old[1][1], 1, myHelloVector, nbrs[LEFT], 1, \\\n            MPI_COMM_WORLD, &amp;requestFourS[LEFT]);     \n  MPI_Issend(&amp;old[1][chunkSize[1]], 1, myHelloVector, nbrs[RIGHT], 2, \\\n            MPI_COMM_WORLD, &amp;requestFourS[RIGHT]);\n\n  MPI_Issend(&amp;old[1][1], chunkSize[1], MPI_FLOAT, nbrs[UP], 3, \\\n            MPI_COMM_WORLD, &amp;requestFourS[UP]);\n  MPI_Issend(&amp;old[chunkSize[0]][1], chunkSize[1], MPI_FLOAT, nbrs[DOWN], 4, \\\n            MPI_COMM_WORLD, &amp;requestFourS[DOWN]);\n\n  calImage(old, new, edge, chunkSize[ROWS], chunkSize[COLS]);\n\n  for (itr = 0; itr &lt; 4; itr++) {\n    MPI_Waitany(4, &amp;requestFourR[0], &amp;index, &amp;status);\n    switch ( index ) {  /* status.MPI_TAG) */\n      case 0: /* RIGHT */\n              j = 1;\n              for (i = 2; i &lt; chunkSize[0]; i++) {\n                new[i][j] = 0.25f*(old[i-1][j]+old[i+1][j]+old[i][j-1]+ \\\n                          old[i][j+1] - edge[i][j]);\n              }\n              break;\n      case 1: /* LEFT */\n              j = chunkSize[1];\n              for (i = 2; i &lt; chunkSize[0]; i++) {\n                new[i][j] = 0.25f*(old[i-1][j]+old[i+1][j]+old[i][j-1]+ \\\n                          old[i][j+1] - edge[i][j]);\n              }\n              break;\n      case 2: /* DOWN */\n              i = 1;\n              for (j = 2; j &lt; chunkSize[1]; j++) {\n                new[i][j] = 0.25f*(old[i-1][j]+old[i+1][j]+old[i][j-1]+ \\\n                          old[i][j+1] - edge[i][j]);\n              }\n              break;\n      case 3: /* UP */\n              i = chunkSize[0];\n              for (j = 2; j &lt; chunkSize[1]; j++) {\n                new[i][j] = 0.25f*(old[i-1][j]+old[i+1][j]+old[i][j-1]+ \\\n                          old[i][j+1] - edge[i][j]);\n              }\n              break;\n    }\n  }\n\n  i = 1; j = 1;\n  new[i][j] = 0.25f*(old[i-1][j]+old[i+1][j]+old[i][j-1]+old[i][j+1] - \\\n              edge[i][j]);\n\n  i = 1; j = chunkSize[1];\n  new[i][j] = 0.25f*(old[i-1][j]+old[i+1][j]+old[i][j-1]+old[i][j+1] - \\\n              edge[i][j]);\n\n  i = chunkSize[0]; j = 1;\n  new[i][j] = 0.25f*(old[i-1][j]+old[i+1][j]+old[i][j-1]+old[i][j+1] - \\\n              edge[i][j]);\n\n  i = chunkSize[0]; j = chunkSize[1];\n  new[i][j] = 0.25f*(old[i-1][j]+old[i+1][j]+old[i][j-1]+old[i][j+1] - \\\n              edge[i][j]);\n\n  MPI_Waitall(4, requestFourS, statusS);\n\n  temp = old;\n  old = new;\n  new = temp;\n} while(your_stopping_condition);\n</code></pre>\n\n<p>calImage() function is doing the calculations that are not depended at the halo swap operation.</p>\n\n<pre><code>void calImage(float **image, float **newImage, float **edge, \\\n          int rows, int cols) {\n  int i, j;\n\n  for (i = 2; i &lt; rows; i++) {\n    for (j = 2; j &lt; cols; j++) {\n      newImage[i][j] = 0.25f * (image[i-1][j] \\\n                        + image[i+1][j] \\\n                        + image[i][j-1] \\\n                        + image[i][j+1] \\\n                        - edge[i][j]);\n    }\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 349, "user_id": 6498993, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-RlWr3I8WlPw/AAAAAAAAAAI/AAAAAAAAABk/a693tVjPFBk/photo.jpg?sz=128", "display_name": "Vincent ROSSIGNOL", "link": "https://stackoverflow.com/users/6498993/vincent-rossignol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 298, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1467338840, "creation_date": 1466603249, "question_id": 37970024, "link": "https://stackoverflow.com/questions/37970024/jacobi-relaxation-in-mpi", "title": "Jacobi Relaxation in MPI", "body": "<p>I created a question 1 hour ago but it wasn't well asked so I recreated one.</p>\n\n<p>I got a code that is Jacobi relaxation in C :</p>\n\n<pre><code>while ( error &gt; tol &amp;&amp; iter &lt; iter_max ) {\n    error = 0.0;\n\n    for( int j = 1; j &lt; n-1; j++)\n    {   \n        for( int i = 1; i &lt; m-1; i++ )\n        {   \n            Anew[j][i] = 0.25 * ( A[j][i+1] + A[j][i-1]\n                                + A[j-1][i] + A[j+1][i]);\n            error = fmax( error, fabs(Anew[j][i] - A[j][i]));\n        }\n    }\n\n    for( int j = 1; j &lt; n-1; j++)\n    {   \n        for( int i = 1; i &lt; m-1; i++ )\n        {   \n            A[j][i] = Anew[j][i];\n        }\n    }\n\n    if(iter % 100 == 0) printf(\"%5d, %0.6f\\n\", iter, error);\n\n    iter++;\n}\n</code></pre>\n\n<p>I run this with :</p>\n\n<ul>\n<li>arrays of 4096x4096</li>\n<li>iter_max = 1000</li>\n<li>error = 1.0e-6</li>\n<li>16 cores</li>\n</ul>\n\n<p>I have parallelized this code with OpenACC. Now, I want to use MPI to try to understand how it works. However, for first implementations I made, I haven't good results (new array is not well constructed). How can I parallelize this code section with MPI ?</p>\n"}, {"tags": ["c", "sqlite", "linker", "pthreads"], "comments": [{"owner": {"reputation": 1884, "user_id": 3078414, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b1180f5e68d3542488d66de14ff53964?s=128&d=identicon&r=PG&f=1", "display_name": "user3078414", "link": "https://stackoverflow.com/users/3078414/user3078414"}, "edited": false, "score": 0, "creation_date": 1466602970, "post_id": 37969545, "comment_id": 63385615, "body": "Probably a typo: put <code>-lpthread</code> instead of <code>-pthread</code> (missing <code>l</code>) into your <code>gcc</code> invocation command."}, {"owner": {"reputation": 4480, "user_id": 5595825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/185741aa854cd8ac5a7720f639cddbf8?s=128&d=identicon&r=PG&f=1", "display_name": "pah", "link": "https://stackoverflow.com/users/5595825/pah"}, "edited": false, "score": 0, "creation_date": 1466603296, "post_id": 37969545, "comment_id": 63385934, "body": "Issuing the command: <code>$ ldd sq</code> reveals any missing object? (as in, <code>not found</code>)?"}, {"owner": {"reputation": 342, "user_id": 5071313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-VjRd3caK_z8/AAAAAAAAAAI/AAAAAAAAAP8/LXAHpwQOYTA/photo.jpg?sz=128", "display_name": "mhk", "link": "https://stackoverflow.com/users/5071313/mhk"}, "edited": false, "score": 0, "creation_date": 1466603493, "post_id": 37969545, "comment_id": 63386166, "body": "I tested changing -pthread to -lpthread. same reuslt."}, {"owner": {"reputation": 342, "user_id": 5071313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-VjRd3caK_z8/AAAAAAAAAAI/AAAAAAAAAP8/LXAHpwQOYTA/photo.jpg?sz=128", "display_name": "mhk", "link": "https://stackoverflow.com/users/5071313/mhk"}, "reply_to_user": {"reputation": 4480, "user_id": 5595825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/185741aa854cd8ac5a7720f639cddbf8?s=128&d=identicon&r=PG&f=1", "display_name": "pah", "link": "https://stackoverflow.com/users/5595825/pah"}, "edited": false, "score": 0, "creation_date": 1466603676, "post_id": 37969545, "comment_id": 63386341, "body": "@threadp don&#39;t know what i must look for but this command prints instance of libraries used and there is no &#39;not found&#39; or similar commands."}, {"owner": {"reputation": 4480, "user_id": 5595825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/185741aa854cd8ac5a7720f639cddbf8?s=128&d=identicon&r=PG&f=1", "display_name": "pah", "link": "https://stackoverflow.com/users/5595825/pah"}, "edited": false, "score": 0, "creation_date": 1466604044, "post_id": 37969545, "comment_id": 63386687, "body": "@mhk ok, I guess sqlite is using one pthreads library, and <code>sq</code> is using another (i.e. different) pthreads library. Can you link your <code>sq</code> with -lpthread_db instead of -pthread ?"}, {"owner": {"reputation": 342, "user_id": 5071313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-VjRd3caK_z8/AAAAAAAAAAI/AAAAAAAAAP8/LXAHpwQOYTA/photo.jpg?sz=128", "display_name": "mhk", "link": "https://stackoverflow.com/users/5071313/mhk"}, "reply_to_user": {"reputation": 4480, "user_id": 5595825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/185741aa854cd8ac5a7720f639cddbf8?s=128&d=identicon&r=PG&f=1", "display_name": "pah", "link": "https://stackoverflow.com/users/5595825/pah"}, "edited": false, "score": 0, "creation_date": 1466605230, "post_id": 37969545, "comment_id": 63387766, "body": "@threadp compilation stops with: /usr/bin/ld: cannot find -lpthread_db  collect2: error: ld returned 1 exit status..."}, {"owner": {"reputation": 4480, "user_id": 5595825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/185741aa854cd8ac5a7720f639cddbf8?s=128&d=identicon&r=PG&f=1", "display_name": "pah", "link": "https://stackoverflow.com/users/5595825/pah"}, "edited": false, "score": 0, "creation_date": 1466605562, "post_id": 37969545, "comment_id": 63388061, "body": "@mhk Usually, a symbol lookup failure occurs when there&#39;s a library version mismatch (the library used to link the binary differs from the library used to load the binary). I&#39;m assuming you&#39;ve compiled the binary in the same system as you&#39;re trying to execute it, so this is a little bit odd. Have you more than one pthreads library installed on your system? Can you compare the libpthread.so.0 path from <code>ldd sq</code> and <code>ldd $(which sqlite3)</code>? Are they pointing to the same file? (anyway, since the <code>sq</code> binary is not being loaded by sqlite3, they&#39;re unrelated for sure, but we need to start somewhere)"}, {"owner": {"reputation": 342, "user_id": 5071313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-VjRd3caK_z8/AAAAAAAAAAI/AAAAAAAAAP8/LXAHpwQOYTA/photo.jpg?sz=128", "display_name": "mhk", "link": "https://stackoverflow.com/users/5071313/mhk"}, "reply_to_user": {"reputation": 4480, "user_id": 5595825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/185741aa854cd8ac5a7720f639cddbf8?s=128&d=identicon&r=PG&f=1", "display_name": "pah", "link": "https://stackoverflow.com/users/5595825/pah"}, "edited": false, "score": 0, "creation_date": 1466607187, "post_id": 37969545, "comment_id": 63389435, "body": "@threadp i tested ldd output and they points to same .so file. i don&#39;t know where to look for error..."}, {"owner": {"reputation": 4480, "user_id": 5595825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/185741aa854cd8ac5a7720f639cddbf8?s=128&d=identicon&r=PG&f=1", "display_name": "pah", "link": "https://stackoverflow.com/users/5595825/pah"}, "edited": false, "score": 0, "creation_date": 1466607767, "post_id": 37969545, "comment_id": 63389884, "body": "@mhk try to link your binary against the system libsqlite3 (as in, with -lsqlite3 flag). See if anything changes."}, {"owner": {"reputation": 342, "user_id": 5071313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-VjRd3caK_z8/AAAAAAAAAAI/AAAAAAAAAP8/LXAHpwQOYTA/photo.jpg?sz=128", "display_name": "mhk", "link": "https://stackoverflow.com/users/5071313/mhk"}, "reply_to_user": {"reputation": 4480, "user_id": 5595825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/185741aa854cd8ac5a7720f639cddbf8?s=128&d=identicon&r=PG&f=1", "display_name": "pah", "link": "https://stackoverflow.com/users/5595825/pah"}, "edited": false, "score": 0, "creation_date": 1466608944, "post_id": 37969545, "comment_id": 63390704, "body": "@threadp it stops with a segmentation fault after open() function backtraced to dl_lookup.c..."}, {"owner": {"reputation": 4480, "user_id": 5595825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/185741aa854cd8ac5a7720f639cddbf8?s=128&d=identicon&r=PG&f=1", "display_name": "pah", "link": "https://stackoverflow.com/users/5595825/pah"}, "edited": false, "score": 0, "creation_date": 1466609510, "post_id": 37969545, "comment_id": 63391108, "body": "@mhk Have you linked with <code>-lsqlite3 -ldl -pthread</code> (all 3 of them?)"}, {"owner": {"reputation": 342, "user_id": 5071313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-VjRd3caK_z8/AAAAAAAAAAI/AAAAAAAAAP8/LXAHpwQOYTA/photo.jpg?sz=128", "display_name": "mhk", "link": "https://stackoverflow.com/users/5071313/mhk"}, "reply_to_user": {"reputation": 4480, "user_id": 5595825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/185741aa854cd8ac5a7720f639cddbf8?s=128&d=identicon&r=PG&f=1", "display_name": "pah", "link": "https://stackoverflow.com/users/5595825/pah"}, "edited": false, "score": 0, "creation_date": 1466852498, "post_id": 37969545, "comment_id": 63495673, "body": "@threadp it is weird but changing **pointers to *pointers and adding &amp;s and... solved the problem"}, {"owner": {"reputation": 4480, "user_id": 5595825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/185741aa854cd8ac5a7720f639cddbf8?s=128&d=identicon&r=PG&f=1", "display_name": "pah", "link": "https://stackoverflow.com/users/5595825/pah"}, "edited": false, "score": 0, "creation_date": 1466864959, "post_id": 37969545, "comment_id": 63499171, "body": "@mhk It makes sense! These functions are expecting a pointer to be passed by reference and a double pointer was being used instead. That was causing undefined behaviour, so anything could happen. Sorry, but I never looked into the code itself to check if something was being corrupted. Anyway, thanks for the update and the answer for the question :)."}], "answers": [{"tags": [], "owner": {"reputation": 342, "user_id": 5071313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-VjRd3caK_z8/AAAAAAAAAAI/AAAAAAAAAP8/LXAHpwQOYTA/photo.jpg?sz=128", "display_name": "mhk", "link": "https://stackoverflow.com/users/5071313/mhk"}, "is_accepted": true, "score": 2, "last_activity_date": 1466852067, "creation_date": 1466852067, "answer_id": 38027693, "question_id": 37969545, "link": "https://stackoverflow.com/questions/37969545/sqlite-errorundefined-swmbolpthread-mutex-lock/38027693#38027693", "title": "sqlite error:undefined swmbol:pthread_mutex_lock", "body": "<p>I solved it. The error was because i used ** pointers when i replaced them with * pointers and changed the code accordingly everything seems to be right.</p>\n"}], "owner": {"reputation": 342, "user_id": 5071313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-VjRd3caK_z8/AAAAAAAAAAI/AAAAAAAAAP8/LXAHpwQOYTA/photo.jpg?sz=128", "display_name": "mhk", "link": "https://stackoverflow.com/users/5071313/mhk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "accepted_answer_id": 38027693, "answer_count": 1, "score": 1, "last_activity_date": 1466852067, "creation_date": 1466602084, "last_edit_date": 1466606932, "question_id": 37969545, "link": "https://stackoverflow.com/questions/37969545/sqlite-errorundefined-swmbolpthread-mutex-lock", "title": "sqlite error:undefined swmbol:pthread_mutex_lock", "body": "<p><br>\nI'm trying to learn sqlite c api and written some code to test multiple database connections to same db file. this files compiles with no error but when i run it i get:</p>\n\n<pre><code>./sq: symbol lookup error: ./sq: undefined symbol: pthread_mutex_lock, version GLIBC_2.2.5\n</code></pre>\n\n<p>here is the code:</p>\n\n<pre><code>#include \"../sqlite3.h\"\n\nint main()\n{\n    sqlite3 **my_db;\n    sqlite3 **my_db2;   \n    sqlite3_stmt **ppStmt;\n    sqlite3_stmt **ppStmt2;\n    int res;\n    double res2;\n    int rc;\n    char pzTail[100];\n    sqlite3_open(\"../test.db\", my_db); \n    sqlite3_open(\"../test.db\", my_db2);\n\n\n    sqlite3_prepare_v2(*my_db, \"select * from tbl1 where one='goog';\", 50, ppStmt, &amp;pzTail);\n    rc = sqlite3_step(*ppStmt);\n\n    if (rc != SQLITE_OK) {\n\n    fprintf(stderr, \"Failed to fetch data: %s\\n\", sqlite3_errmsg(my_db));\n    sqlite3_close(my_db);\n\n    return 1;\n    }  \n\n    res = sqlite3_column_int(*ppStmt, 1);\n    printf(\"we have %d\\n\",res);\n    sqlite3_step(*ppStmt);\n    res = sqlite3_column_int(*ppStmt, 1);\n    printf(\"we have %f\\n\",res);\n    sqlite3_step(*ppStmt);\n    res = sqlite3_column_int(*ppStmt, 1);\n    printf(\"we have %d\\n\",res);\n    sqlite3_finalize(*ppStmt);\n    sqlite3_close(*my_db);\n    return 0;\n}\n</code></pre>\n\n<p>When i run code without second sqlite3_open statement everything is right but when i add it,the error mentioned above appears at runtime and gdb shows this:</p>\n\n<pre><code>(gdb) run\nStarting program: .../sqlite-amalgamation3130000/playground/sq \ndl-debug.c:74: No such file or directory.\ndl-debug.c:74: No such file or directory.\ndl-debug.c:74: No such file or directory.\ndl-debug.c:74: No such file or directory.\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/lib/x86_64-linux-gnu/libthread_db.so.1\".\ndl-debug.c:74: No such file or directory.\ndl-debug.c:74: No such file or directory.\n(process 4636) exited with code 0177]\n</code></pre>\n\n<p>I compiled this code with a copy of sqlite_amalgamation source instead of systems installed sqlite library for some reason with this command:</p>\n\n<pre><code>gcc -g -I.. sqlite_c_api.c ../sqlite3.c -ldl -pthread -o sq\n</code></pre>\n\n<p>and i tried 'pthread_mutex_lock()' on some machine in some multi-threaded application before.<br>\nWhere is/are my mistake(s)?</p>\n"}, {"tags": ["c++", "c", "dll"], "comments": [{"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1466603293, "post_id": 37969538, "comment_id": 63385932, "body": "Too bad the OP will have no way to ascertain from the duplicate what the solution to her problem is given the complexity of the answer."}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1466603329, "post_id": 37969538, "comment_id": 63385971, "body": "You have the following in your <code>.h</code> file:  <code>extern              int     variableName;</code>   This file is included in each of your source files. So, you have declared them <code>extern</code> in all source files. At least one source file must leave out the <code>extern</code>, so you&#39;ll need to have a <code>#define</code> in one source file that removes the <code>extern</code>."}, {"owner": {"reputation": 3, "user_id": 4028684, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000020922962/picture?type=large", "display_name": "Colleen Kobe", "link": "https://stackoverflow.com/users/4028684/colleen-kobe"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1466604165, "post_id": 37969538, "comment_id": 63386802, "body": "@Sourav Ghosh: please provide a link to the post that my question is a duplicate of."}, {"owner": {"reputation": 456, "user_id": 5529678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d52fceadf783b1021718b90c86b53403?s=128&d=identicon&r=PG&f=1", "display_name": "sendaran", "link": "https://stackoverflow.com/users/5529678/sendaran"}, "edited": false, "score": 0, "creation_date": 1466604358, "post_id": 37969538, "comment_id": 63386988, "body": "See <a href=\"http://stackoverflow.com/questions/19373061/what-happens-to-global-and-static-variables-in-a-shared-library-when-it-is-dynam\">this question &amp; answer</a> for exporting global variables. Note the platform dependent territory."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1466605907, "post_id": 37969538, "comment_id": 63388410, "body": "@ColleenKobe See top of the post. Welcome. :)"}, {"owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "edited": false, "score": 0, "creation_date": 1466606053, "post_id": 37969538, "comment_id": 63388544, "body": "This cannot be quite your <i>real</i> code. In <code>g_memory.c</code>, the text ` G e t _ g _ C a r b o n` is not within comments and is not legal C. As your problem is a linkage problem, please post compilable source files from which you know it can be reproduced."}, {"owner": {"reputation": 3, "user_id": 4028684, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000020922962/picture?type=large", "display_name": "Colleen Kobe", "link": "https://stackoverflow.com/users/4028684/colleen-kobe"}, "reply_to_user": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1466608647, "post_id": 37969538, "comment_id": 63390505, "body": "@KevinDTimm, thanks.  I made the following changes.  I created a new file called g_constantsonly.h     I copied the #define statements in g_memory.h into g_constantsonly.h.  In g_memory.h:     I deleted the #define statements.     I added the statement:  <code>#include &quot;g_constantsonly.h&quot;</code>  In g_memory.c:     I deleted the statement: <code>#include &quot;g_memory.h&quot;</code>     I added the statement:  <code>#include &quot;g_constantsonly.h&quot;</code>  I did not modify main.cpp.  I &quot;clean&quot;ed the workspace and then ran a Rebuild. I&#39;m still getting the same undefined reference messages. :-("}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1466610971, "post_id": 37969538, "comment_id": 63392140, "body": "There&#39;s not room to help you here as your question was closed. If you read every word of the <code>duplicate</code> you will see what you&#39;re doing wrong. Essentially you need to have an <code>#define</code> that allows all files but one to have <code>extern</code> defined in your include file and then no <code>extern</code> in one source file.  Sorry - I know what I want to say but cannot elucidate in this format.  Search for a subset of your title using a search engine, you should be able to find a good example that way."}], "owner": {"reputation": 3, "user_id": 4028684, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000020922962/picture?type=large", "display_name": "Colleen Kobe", "link": "https://stackoverflow.com/users/4028684/colleen-kobe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "closed_date": 1466603131, "answer_count": 0, "score": 0, "last_activity_date": 1466602075, "creation_date": 1466602075, "question_id": 37969538, "link": "https://stackoverflow.com/questions/37969538/undefined-reference-errors-c-header-file-c-main-program", "closed_reason": "Duplicate", "title": "&quot;undefined reference&quot; Errors: C header file, C++ main program", "body": "<p>I have a CodeLite Workspace containing two projects.  The first project consists of one *.c and one *.h file.  They contain C-language global constants, variables, and functions.  This project is compiled into a dll.  The second project is a C++ main program.  It is compiled into an exe.  The main program references the variables and calls the functions in the dll.</p>\n\n<p>My problem is that I get \"undefined reference\" error messages for the variables, but not for the constants (#defines) and functions.  The constants and functions appear to be fine.  Why am I getting those errors for the variables, but not the constants and functions?  And how do I get rid of the errors?</p>\n\n<p>There are many posts on Stack Overflow and on the CodeLite forums from people with similar situations.  When I understand the answers to their posts, and I implement the solutions to those posts, either they don't fix my problem, or they make it worse.</p>\n\n<p>Here are my files and other data.</p>\n\n<p>Software Versions:</p>\n\n<pre><code>CodeLite: 9.1.8\ntdm-gcc: 5.1.0.3\nWindows 7: 6.1\nwxCrafter: 2.5\nwxWidgets: 3.1.0\n\nTarget platform: 32-bit\nTarget build: debug\n</code></pre>\n\n<p>g_memory.c</p>\n\n<pre><code>#include &lt;limits.h&gt;\n#include &lt;string.h&gt;\n#include \"g_memory.h\"\n\n// Set Up Compiler Options\n\n#define CALL_TYPE __stdcall\n\n#ifndef UNICODE\n#define UNICODE\n#endif\n\nint     g_Carbon;\nchar    g_Element_Name      [g_ST_LENGTH];\nint     g_Periodic_Table    [g_QTY_ELEMENTS];\n\n    // *************************************************************************\n    //                G e t _ g _ P e r i o d i c _ T a b l e\n    // *************************************************************************\nDllExport void  CALL_TYPE Get_g_Periodic_Table (int New_Values [], int Length)\n{\n    int i = 0;\n    for (i = 0; i &lt; Length; ++i)\n        New_Values [i] = g_Periodic_Table [i];\n}\nDllExport void  CALL_TYPE Set_g_Periodic_Table (int New_Values [], int Length)\n{\n    int i = 0;\n    for (i = 0; i &lt; Length; ++i)\n        g_Periodic_Table [i] = New_Values [i];\n}\n\n    // *************************************************************************\n    //                  G e t _ g _ E l e m e n t _ N a m e\n    // *************************************************************************\n// DllExport char  CALL_TYPE Get_g_Element_Name (void)               { return (g_Element_Name); }\n// DllExport void  CALL_TYPE Set_g_Element_Name (char * New_Value)   { g_Element_Name = New_Value; }\n//\n// char    g_Element_Name [g_ST_LENGTH];\n\n    // *************************************************************************\n                              G e t _ g _ C a r b o n\n    // *************************************************************************\nDllExport int   CALL_TYPE Get_g_Carbon  (void)          { return (g_Carbon); }\nDllExport void  CALL_TYPE Set_g_Carbon  (int New_Value) { g_Carbon = New_Value; }\n\n    // *************************************************************************\n    //                                 g _ S u m\n    // *************************************************************************\n\nDllExport   int CALL_TYPE   g_Sum  (int n1, int n2)\n{\n\n    int          Sum     = 0;\n    long long    l_Sum   = 0;\n\n    l_Sum   = (long long) n1 + (long long) n2;\n\n    if ((l_Sum &lt; INT_MIN) || (INT_MAX &lt; l_Sum))\n        Sum = 0;                        // out of range = true\n    else\n        Sum = (int) l_Sum;              // sum is in range\n\n    return (Sum);\n\n}\n\n    // *************************************************************************\n    //                          g _ I n i t i a l i z e\n    // *************************************************************************\n\nDllExport   int CALL_TYPE   g_Initialize  (int    *g_Carbon,\n                                           char    g_Element_Name         [],\n                                           int     Debug_ST_LENGTH,\n                                           int     g_Periodic_Table       [],\n                                           int     Periodic_Table_Length)\n{\n    int i = 0;\n\n    *g_Carbon   = 3;\n    memset  (g_Element_Name, '\\0', Debug_ST_LENGTH);\n    strcpy  (g_Element_Name, \"abc\");\n\n    for (i = 0; i &lt; Periodic_Table_Length; ++i)\n        g_Periodic_Table   [i] = i * 2 + 6;\n\n    return ((int) g_ZERO);\n}\n</code></pre>\n\n<p>g_memory.h</p>\n\n<pre><code>#ifndef G_MEMORY_H\n#define G_MEMORY_H\n\n#define DllImport  __declspec(dllimport)\n#define DllExport  __declspec(dllexport)\n#define CALL_TYPE  __stdcall\n\n#define g_ST_LENGTH       255\n#define g_QTY_ELEMENTS      5\n#define g_ZERO              0\n\n// Variable declarations. ------------------------------------------------------\nextern              int     g_Carbon;\nextern              char    g_Element_Name      [g_ST_LENGTH];\nextern              int     g_Periodic_Table    [g_QTY_ELEMENTS];\n\n// Function declarations. ------------------------------------------------------\n#ifdef __cplusplus\nextern \"C\"\n{\n#endif  // begin  C-language declarations\nextern  DllExport   int     CALL_TYPE g_Sum         (int n1, int n2);\n\nextern  DllExport   int     CALL_TYPE g_Initialize  (int    *g_Carbon,\n                                                     char    g_Element_Name         [],\n                                                     int     Debug_ST_LENGTH,\n                                                     int     g_Periodic_Table       [],\n                                                     int     Periodic_Table_Length);\n\nextern  DllExport   void    CALL_TYPE Get_g_Periodic_Table (int New_Values [], int Length);\nextern  DllExport   void    CALL_TYPE Set_g_Periodic_Table (int New_Values [], int Length);\n\nextern  DllExport   int     CALL_TYPE Get_g_Carbon      (void);\nextern  DllExport   void    CALL_TYPE Set_g_Carbon      (int New_Value);\n\n#ifdef __cplusplus\n}\n#endif  // end of C-language declarations\n\n#endif // G_MEMORY_H\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>#include &lt;limits.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include \"g_memory.h\"\n\nint main(int argc, char **argv)\n{\n\n    int A1  = g_ZERO;\n    int A2  = g_ZERO;\n    int i   = g_ZERO;\n    int rc  = g_ZERO;\n    int Sum = g_ZERO;\n\n    int local_Periodic_Table [g_QTY_ELEMENTS];\n\n    printf(\"You're doing great!!!\\n\");\n\n    // -------------------------------------------------------------------------\n    // Part 1: Testing the Variables and #defines.\n    // -------------------------------------------------------------------------\n    Set_g_Carbon (g_ZERO);\n    printf(\"\\nAFTER STEP 1: global variable g_Carbon  = %d (should be 0).\\n\", Get_g_Carbon());\n\n    rc =    g_Initialize  (&amp;g_Carbon,\n                            g_Element_Name,\n                            g_ST_LENGTH,\n                            g_Periodic_Table,\n                            g_QTY_ELEMENTS);\n\n    printf(\"\\nAFTER STEP 2: rc from g_Initialize = %d; global variable g_Carbon  = %d (should be 3).\\n\", rc, Get_g_Carbon());\n\n    for (i = 0; i &lt; g_QTY_ELEMENTS; ++i)\n    {\n        local_Periodic_Table [i] = g_QTY_ELEMENTS - i;\n        printf (\"             local_Periodic_Table [%d] = %d.\\n\", i, local_Periodic_Table [i]);\n    }\n\n    // Set the global array to the contents of the local array.\n    Set_g_Periodic_Table(local_Periodic_Table, g_QTY_ELEMENTS);\n\n    for (i = 0; i &lt; g_QTY_ELEMENTS; ++i)\n    {\n        g_Periodic_Table [i] = g_QTY_ELEMENTS - i;\n        printf (\"             g_Periodic_Table [%d]     = %d.\\n\", i, g_Periodic_Table [i]);\n    }\n\n    // Set the global array to the contents of the local array.\n    Set_g_Periodic_Table(local_Periodic_Table, g_QTY_ELEMENTS);\n    memset (local_Periodic_Table, 0, sizeof(int) * g_QTY_ELEMENTS);  // Clear the local array.\n    printf (\"\\nAfter clearing local_Periodic_Table to g_ZERO, here's what's in it:\\n\");\n    for (i = 0; i &lt; g_QTY_ELEMENTS; ++i)\n    {\n        printf (\"             local_Periodic_Table [%d] = %d.\\n\", i, local_Periodic_Table [i]);\n    }\n\n    // Put the global array contents into the local array.\n    Get_g_Periodic_Table(local_Periodic_Table, g_QTY_ELEMENTS);\n\n    printf (\"\\nAfter loading local_Periodic_Table with the contents of g_Periodic_Table, here's what's in local_Periodic_Table:\\n\");\n    for (i = 0; i &lt; g_QTY_ELEMENTS; ++i)\n    {\n        printf (\"             local_Periodic_Table [%d] = %d.\\n\", i, local_Periodic_Table [i]);\n    }\n\n    Set_g_Carbon (7);\n    printf(\"\\nAFTER STEP 3: global variable g_Carbon  = %d (should be  7).\\n\", Get_g_Carbon());\n\n    Set_g_Carbon (Get_g_Carbon() + 4);\n    printf(\"\\nAFTER STEP 4: global variable g_Carbon  = %d (should be 11).\\n\", Get_g_Carbon());\n\n//    g_Element_Name [0] = 'o';\n//    g_Element_Name [1] = 'k';\n//    g_Element_Name [2] = '!';\n//    g_Element_Name [3] = '\\0';\n//    printf(\"\\n\\nglobal variable g_Element_Name = &lt;%s&gt;.\\n\\n\", g_Element_Name);\n//    fflush(stdout);\n\n    // Part 2: Testing the function calls.\n\n    A1 =           5;\n    A2 =          11;\n    printf (\"--- Ordinary Math Check -------------------------------------\\n\");\n    Sum = g_Sum(A1, A2);\n    printf(\"%d + %d = %d\\n\\n\", A1, A2, Sum);\n\n    //  Underflow check 1: the sum == Minimum value (valid)\n    //\n    //  ---O==================================|---\n    //    min                                max\n\n    A1 = -INT_MAX;\n    A2 =       -1;\n    printf (\"--- Underflow Check 1: valid --------------------------------\\n\");\n    Sum = g_Sum(A1, A2);\n    printf(\"%d + %d = %d\\n\\n\", A1, A2, Sum);\n\n    //  Underflow check 2: the sum &lt; Minimum value (invalid)\n    //\n    //  --O|==================================|---\n    //    min                                max\n\n    A2 =       -2;\n    printf (\"--- Underflow Check 2: invalid ------------------------------\\n\");\n    Sum = g_Sum(A1, A2);\n    printf(\"%d + %d = %d\\n\\n\", A1, A2, Sum);\n\n    //  Overflow check 1: the sum == Maximum value (valid)\n    //\n    //  ---|==================================O---\n    //    min                                max\n\n    A1 =  INT_MAX;\n    A2 =        1;\n    printf (\"--- Overflow Check 1: valid ---------------------------------\\n\");\n    Sum = g_Sum(A1, A2);\n    printf(\"%d + %d = %d\\n\\n\", A1, A2, Sum);\n\n    //  Overflow check 2: the sum &gt; Maximum value (invalid)\n    //\n    //  ---|==================================|O--\n    //    min                                max\n\n    A2 =        2;\n    printf (\"--- Overflow Check 2: invalid -------------------------------\\n\");\n    Sum = g_Sum(A1, A2);\n    printf(\"%d + %d = %d\\n\\n\", A1, A2, Sum);\n\n    fflush(stdout);\n\n    return 0;\n}\n</code></pre>\n\n<p>Results of Compile and Link</p>\n\n<pre><code>C:\\Windows\\system32\\cmd.exe /C C:/TDM-GCC-32/bin/mingw32-make.exe -e -f  \"Globals.mk\"  MakeIntermediateDirs &amp;&amp; C:/TDM-GCC-32/bin/mingw32-make.exe -e -f  \"Globals.mk\"  all\n----------Building project:[ Globals - Debug ]----------\nC:/TDM-GCC-32/bin/gcc.exe -c  \"F:/Prototypes_CPP_Console_Only/GlobalVariableTests2/Globals/g_memory.c\" -g -O0 -Wall   -o ./Debug/g_memory.c.o -I. -I../include/ -I. -I../include/\ngcc -shared -fPIC -o ../RunFromHere/Globals.dll @\"Globals.txt\" -L. -L../RunFromHere/\n====0 errors, 0 warnings====\nC:\\Windows\\system32\\cmd.exe /C C:/TDM-GCC-32/bin/mingw32-make.exe -e -f  \"MainProg.mk\"  MakeIntermediateDirs &amp;&amp; C:/TDM-GCC-32/bin/mingw32-make.exe -e -f  \"MainProg.mk\"  all\n----------Building project:[ MainProg - Debug ]----------\nC:/TDM-GCC-32/bin/g++.exe  -c  \"F:/Prototypes_CPP_Console_Only/GlobalVariableTests2/MainProg/main.cpp\" -g -O0 -Wall   -o ./Debug/main.cpp.o -I. -I../include/ -I.\nC:/TDM-GCC-32/bin/mingw32-g++.exe -o ../RunFromHere/MainProg @\"MainProg.txt\" -L. -L../RunFromHere/ -L. -L../RunFromHere/  -lGlobals\n./Debug/main.cpp.o: In function `main':\nF:/Prototypes_CPP_Console_Only/GlobalVariableTests2/MainProg/main.cpp:29: undefined reference to `g_Periodic_Table'\nF:/Prototypes_CPP_Console_Only/GlobalVariableTests2/MainProg/main.cpp:29: undefined reference to `g_Element_Name'\nF:/Prototypes_CPP_Console_Only/GlobalVariableTests2/MainProg/main.cpp:29: undefined reference to `g_Carbon'\nF:/Prototypes_CPP_Console_Only/GlobalVariableTests2/MainProg/main.cpp:44: undefined reference to `g_Periodic_Table'\nF:/Prototypes_CPP_Console_Only/GlobalVariableTests2/MainProg/main.cpp:45: undefined reference to `g_Periodic_Table'\ncollect2.exe: error: ld returned 1 exit status\nmingw32-make.exe: *** [../RunFromHere/MainProg] Error 1\nMainProg.mk:81: recipe for target '../RunFromHere/MainProg' failed\n====5 errors, 0 warnings====\n</code></pre>\n\n<p>Thank you in advance!</p>\n"}, {"tags": ["c", "gcc", "gdb"], "comments": [{"owner": {"reputation": 1873, "user_id": 765294, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/99UFa.jpg?s=128&g=1", "display_name": "Will", "link": "https://stackoverflow.com/users/765294/will"}, "edited": false, "score": 5, "creation_date": 1466599657, "post_id": 37968398, "comment_id": 63382651, "body": "Hint: not 10 bytes, but 0x10 bytes."}, {"owner": {"reputation": 181, "user_id": 5380243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af96e5b08b4bca1ad3fa2bc9d36b94c7?s=128&d=identicon&r=PG&f=1", "display_name": "Carefullcars", "link": "https://stackoverflow.com/users/5380243/carefullcars"}, "reply_to_user": {"reputation": 1873, "user_id": 765294, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/99UFa.jpg?s=128&g=1", "display_name": "Will", "link": "https://stackoverflow.com/users/765294/will"}, "edited": false, "score": 0, "creation_date": 1466599817, "post_id": 37968398, "comment_id": 63382767, "body": "@Will oh, 16 bytes? I thought each char takes up  1 byte of memory not 2"}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1466600087, "post_id": 37968398, "comment_id": 63383015, "body": "It&#39;s hard to call it wrong since there&#39;s no standard for what&#39;s right."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1466600093, "post_id": 37968398, "comment_id": 63383022, "body": "Compiler can arrange local variables in function as it wishes. So, this test doesn&#39;t really tell you anything. Try comparing addresses to variables in  other functions."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1466600159, "post_id": 37968398, "comment_id": 63383084, "body": "@Carefullcars, what makes you think there&#39;s a stack?  If there is a stack, what makes you think there&#39;s a correct direction in which it should grow?  If there&#39;s a stack, what makes you think a function&#39;s local variables receive addresses as if they were pushed onto the stack in the order of their declaration?  <b><i>None</i></b> of that is mandated by C."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1466601040, "post_id": 37968398, "comment_id": 63383815, "body": "@Carefullcars because of <a href=\"http://stackoverflow.com/questions/672461/what-is-stack-alignment\"><i>alignment</i></a> in this case 16 bytes. If you change them to <code>char buffer_one[11];</code> you&#39;ll see they still take 16 bytes."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1466601905, "post_id": 37968398, "comment_id": 63384603, "body": "@Olaf, yes, that&#39;s part of what I said."}, {"owner": {"reputation": 181, "user_id": 5380243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af96e5b08b4bca1ad3fa2bc9d36b94c7?s=128&d=identicon&r=PG&f=1", "display_name": "Carefullcars", "link": "https://stackoverflow.com/users/5380243/carefullcars"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1466601911, "post_id": 37968398, "comment_id": 63384609, "body": "@JohnBollinger I read (assembly language for the x86 processor) and it told me as much..."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 1873, "user_id": 765294, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/99UFa.jpg?s=128&g=1", "display_name": "Will", "link": "https://stackoverflow.com/users/765294/will"}, "edited": false, "score": 0, "creation_date": 1466601913, "post_id": 37968398, "comment_id": 63384611, "body": "@Will: Which means writing the whole program would have to be in Assember. And local variables are typically not &quot;pushed&quot; onto the stack (even iff ther is a stack).  But all this completely depends on the target platform."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1466602275, "post_id": 37968398, "comment_id": 63384971, "body": "@Carefullcars, what part of your x86-assembly-reading skills inform you about how a C compiler is supposed to use the features of the hardware it is building for?  Your question presumes that there is a specific way it should do so, but nothing in the C language standard supports that proposition, neither in general nor in the specific details you are asking about."}, {"owner": {"reputation": 4480, "user_id": 5595825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/185741aa854cd8ac5a7720f639cddbf8?s=128&d=identicon&r=PG&f=1", "display_name": "pah", "link": "https://stackoverflow.com/users/5595825/pah"}, "edited": false, "score": 1, "creation_date": 1466602347, "post_id": 37968398, "comment_id": 63385043, "body": "Assuming an underlying x64 architecture and, in your case, the gcc compiler and a linux-based operating system, the stack is a <code>reverse access</code> data map. So the allocation will be performed towards the highest logical address, and the access will be performed towards the lowest logical address. Anyway, there&#39;s no concept of stack in C standards as far as I know."}], "answers": [{"comments": [{"owner": {"reputation": 181, "user_id": 5380243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af96e5b08b4bca1ad3fa2bc9d36b94c7?s=128&d=identicon&r=PG&f=1", "display_name": "Carefullcars", "link": "https://stackoverflow.com/users/5380243/carefullcars"}, "edited": false, "score": 0, "creation_date": 1466604933, "post_id": 37970255, "comment_id": 63387493, "body": "Great answer, clears up a lot! I was following books which implied that a C compiler will always add objects to the stack frame in the same way(probably for simplification). I guess i have to disassemble each C program if i really want to understand how it sets up stack frames(if the stack exists &lt;.&lt;)."}], "tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": true, "score": 4, "last_activity_date": 1466603852, "creation_date": 1466603852, "answer_id": 37970255, "question_id": 37968398, "link": "https://stackoverflow.com/questions/37968398/is-the-stack-growing-the-wrong-way-when-you-compile-c-code-with-gcc/37970255#37970255", "title": "Is the stack growing the wrong way when you compile C code with GCC", "body": "<p>Several things:</p>\n\n<ol>\n<li><p>The compiler is not required to lay out variables in the order in which they were declared (or any other specific order).  Members of a <code>struct</code> instance <em>are</em> laid out in the order declared, although there may be padding bytes between each member (see 2).  </p></li>\n<li><p>The platform may require that objects be aligned on specific addresses (for example, addresses that are evenly divisible by 8 or 16).  Thus, it's possible for there to be unused bytes between objects.  If the addresses of <code>buffer_one</code> and <code>buffer_two</code> differ by 16, that doesn't mean that the compiler set aside 16 bytes for <code>buffer_one</code>, it means there are 8 bytes of padding between the end of <code>buffer_one</code> and the beginning of <code>buffer_two</code>, and the behavior on attempting to read/write those bytes is undefined.  In practical terms, it means your code can tolerate a small buffer overflow in <code>buffer_one</code> with no ill effects, but you don't want to rely on that.    </p></li>\n<li><p>You cannot rely on the ordering between objects to be meaningful.  You certainly cannot rely on it being repeatable across implementations.  </p></li>\n<li><p>Although you'll be hard-pressed to find a C implementation that doesn't use one, the language definition doesn't <em>require</em> the use of a runtime stack, nor does it require that the stack grow upwards (towards increasing addresses) or downwards (towards decreasing addresses).  That's strictly an implementation detail.</p></li>\n</ol>\n"}], "owner": {"reputation": 181, "user_id": 5380243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af96e5b08b4bca1ad3fa2bc9d36b94c7?s=128&d=identicon&r=PG&f=1", "display_name": "Carefullcars", "link": "https://stackoverflow.com/users/5380243/carefullcars"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 1, "accepted_answer_id": 37970255, "answer_count": 1, "score": 0, "last_activity_date": 1466603852, "creation_date": 1466599411, "question_id": 37968398, "link": "https://stackoverflow.com/questions/37968398/is-the-stack-growing-the-wrong-way-when-you-compile-c-code-with-gcc", "title": "Is the stack growing the wrong way when you compile C code with GCC", "body": "<p>I have the following C code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\nint main(int argc, char *argv[]) {\n   int value = 5;\n   char buffer_one[8], buffer_two[8];\n   strcpy(buffer_one, \"one\"); /* Put \"one\" into buffer_one. */\n   strcpy(buffer_two, \"two\"); /* Put \"two\" into buffer_two. */\n\n   return 0;\n}\n</code></pre>\n\n<p>From my knowledge of the stack, the buffer_one array should start at a higher adress than the buffer_two array, since the stack grows towards lower adresse and buffer_two is at the top of the stack. However, when i compiler the code using gcc and use GDB to step through the code, it tells me that the opposite is true:<code></p>\n\n<pre><code>eman@eman:~/Documents/CFiles/bufferOverflow/source$ gcc -g -o example overflow_example.c \neman@eman:~/Documents/CFiles/bufferOverflow/source$ gdb -q example\nReading symbols from example...done.\n(gdb) list\n1   #include &lt;stdio.h&gt;\n2   #include &lt;string.h&gt;\n3   int main() {\n4   char buffer_one[8];\n5   char buffer_two[8];\n6   \n7   strcpy(buffer_one, \"one\"); /* Put \"one\" into buffer_one. */\n8   strcpy(buffer_two, \"two\"); /* Put \"two\" into buffer_two. */\n9   \n10  return 0;\n(gdb) break 9\nBreakpoint 1 at 0x400571: file overflow_example.c, line 9.\n(gdb) run\nStarting program: /home/eman/Documents/CFiles/bufferOverflow/source/example \n\nBreakpoint 1, main () at overflow_example.c:10\n10  return 0;\n(gdb) print &amp;buffer_one\n$1 = (char (*)[8]) 0x7fffffffdd50\n(gdb) print &amp;buffer_two\n$2 = (char (*)[8]) 0x7fffffffdd60\n(gdb) \n</code></pre>\n\n<p></code></p>\n\n<p>What is going on here? </p>\n\n<p>extra question: Why does the arrays take up 10 bytes when it is initialized with 8 bytes?</p>\n"}, {"tags": ["c", "linux-kernel", "kernel-module", "kbuild"], "answers": [{"comments": [{"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 0, "creation_date": 1466674674, "post_id": 37969191, "comment_id": 63419675, "body": "What?! Autotools are heavily rely on underneath libc. How can you use them with kernel without hacking themselves?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 0, "creation_date": 1466692218, "post_id": 37969191, "comment_id": 63432742, "body": "@AndyShevchenko, you might as well say &quot;<code>gcc</code> and <code>make</code> rely on libc, so how can you use them to build kernels?&quot;  The fact is that the Autoconf checks relevant to your problem rely on testing via the compiler, so, as I said, you simply need to ensure that the kernel headers it consults are the right ones.  Autoconf knows how to perform plenty of checks that don&#39;t make sense for a kernel build (e.g. library checks), but that does not mean you cannot use the checks that do make sense."}, {"owner": {"reputation": 3398, "user_id": 447503, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/0d7ec5ed7c7fa28d5b6b2a51d5803c9a?s=128&d=identicon&r=PG", "display_name": "basin", "link": "https://stackoverflow.com/users/447503/basin"}, "edited": false, "score": 0, "creation_date": 1468774308, "post_id": 37969191, "comment_id": 64253730, "body": "Although I don&#39;t like your presumption of my ignorance in the 1st paragraph @JohnBollinger, the rest of your answer makes sense. I&#39;ll accept it"}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 0, "last_activity_date": 1466601278, "creation_date": 1466601278, "answer_id": 37969191, "question_id": 37968134, "link": "https://stackoverflow.com/questions/37968134/proper-feature-checks-for-kernel-module-source-code/37969191#37969191", "title": "Proper feature checks for kernel module source code", "body": "<blockquote>\n  <p>How to write code that will check features, not version number? In a user-space program I would use autoconf macros <code>AC_CHECK_MEMBER</code>/<code>AC_CHECK_FUNC</code></p>\n</blockquote>\n\n<p>The standard preprocessor's capabilities are much less than some people seem to think.  It has no ability to do what you want directly.  Autoconf provides no magic in this regard, either; it simply performs tests at configuration time, often simply by checking whether the compiler accepts a given piece of code, and it communicates the results to the compiler largely by causing preprocessor macros to be defined. (And you are responsible for using those macros as needed in conditional tests much like the one in your example.)</p>\n\n<p>Since we're talking about Autoconf, however, as long as it runs against the kernel headers that correspond to the kernel you're building for, at least some Autoconf macros should work for you, and you should be able to write custom Autoconf tests for others.  Indeed, any issue that that the compiler can detect at build time, Autoconf should also be able to test for.</p>\n\n<p>Of course, there is also the option of giving the module builder the ability to indicate needed configuration details explicitly where a thorny issue such as this arises.  For example, adjust the feature selection macros to pay attention also to a symbol reserved for the builder to use to modulate the results.</p>\n"}], "owner": {"reputation": 3398, "user_id": 447503, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/0d7ec5ed7c7fa28d5b6b2a51d5803c9a?s=128&d=identicon&r=PG", "display_name": "basin", "link": "https://stackoverflow.com/users/447503/basin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 37969191, "answer_count": 1, "score": 1, "last_activity_date": 1466601278, "creation_date": 1466598811, "question_id": 37968134, "link": "https://stackoverflow.com/questions/37968134/proper-feature-checks-for-kernel-module-source-code", "title": "Proper feature checks for kernel module source code", "body": "<p><strong>Scenario 1:</strong> I'm trying to install <code>IBM</code> <code>GPFS</code> driver onto RHEL6 with a vanilla kernel 3.10 (actually, <code>kernel-lt</code> from Elrepo). The GPL part won't compile due to:</p>\n\n<ul>\n<li>Too many/too few arguments passed to function</li>\n<li>struct x has no such member</li>\n<li>type mismatch</li>\n</ul>\n\n<p>Their code compiles fine on stock RHEL/Suse kernels older or newer than mine, but fails here.</p>\n\n<p><strong>Scenario 2:</strong>\nI'm trying to compile the opensource <code>softiwarp</code> driver on <code>RHEL6</code> with stock kernel, but it fails with same errors as in scenario 1. However, it compiles fine on a vanilla kernel.</p>\n\n<p>This all is because their feature-check headers look like this:</p>\n\n<pre><code>#if LINUX_KERNEL_VERSION &gt;= 2061300\n#define FOO &lt;newer variant&gt;\n#else\n#define FOO &lt;older variant&gt;\n#endif\n</code></pre>\n\n<p>But RHEL and Suse have many backports and bugfixes, so their <code>3.10.101</code> is not the same as vanilla <code>3.10.101</code>.</p>\n\n<p>How to write code that will check <em>features</em>, not version number? In a user-space program I would use autoconf macros <code>AC_CHECK_MEMBER</code>/<code>AC_CHECK_FUNC</code></p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "edited": false, "score": 2, "creation_date": 1466598486, "post_id": 37967986, "comment_id": 63381741, "body": "What exactly does not work? Is there an error message or does the actual behaviour differ from the expected behaviour? Although not explicitly stated, from your  examples you seem to expect a factorization into prime numbers; is that the case?"}, {"owner": {"reputation": 2473, "user_id": 3360424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/053232b4741b328e70079b94c6d2fa73?s=128&d=identicon&r=PG&f=1", "display_name": "diidu", "link": "https://stackoverflow.com/users/3360424/diidu"}, "edited": false, "score": 0, "creation_date": 1466598793, "post_id": 37967986, "comment_id": 63381968, "body": "Your goal is a bit unclear. How would you do for example 9? would it be 3x3 or 9? In any case I would implement this with at least one subfunction and some recursive loops."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 4904144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb540f264b8d67a82b903353136e7cfa?s=128&d=identicon&r=PG&f=1", "display_name": "Zhou Jie", "link": "https://stackoverflow.com/users/4904144/zhou-jie"}, "edited": false, "score": 0, "creation_date": 1466646658, "post_id": 37968385, "comment_id": 63407474, "body": "thanks very much for your help. and I actually got it work."}], "tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": false, "score": 3, "last_activity_date": 1466603460, "last_edit_date": 1466603460, "creation_date": 1466599393, "answer_id": 37968385, "question_id": 37967986, "link": "https://stackoverflow.com/questions/37967986/integer-factorization-in-c-language/37968385#37968385", "title": "Integer factorization in C language", "body": "<p>What you can do to generate the output requested is, at least, </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define MAXNUM 1000\n\nint main()\n{\n    int num,numfordiv;\n    int div = 2;\n    for (num=2;num&lt;MAXNUM;num++)\n    {\n        printf(\"%d= \", num);\n        numfordiv = num;\n\n        div = 2;\n\n        while (numfordiv&gt;1)\n        {\n            if(numfordiv%div != 0)\n            {\n                div++;\n            }\n            else\n            {\n                numfordiv /= div;\n                printf(\"%d \",div);\n                if(numfordiv != 1)\n                {\n                    printf(\"x \");\n                }\n            }\n        }\n        printf(\"\\n\");\n    }\n    return 0;\n}\n</code></pre>\n\n<p>As you can see you need:</p>\n\n<ol>\n<li>An inner loop to loops on all possible dividers</li>\n<li>For each number you must reset your divider</li>\n<li>The modulo operation must be performed on the divided number</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": false, "score": 1, "last_activity_date": 1466604863, "last_edit_date": 1466604863, "creation_date": 1466604518, "answer_id": 37970529, "question_id": 37967986, "link": "https://stackoverflow.com/questions/37967986/integer-factorization-in-c-language/37970529#37970529", "title": "Integer factorization in C language", "body": "<p>The answer by @LP is nice and simple to understand.</p>\n\n<p>However, if performance matters it has a drawback for very high <code>MAXNUM</code> values. Since <code>div</code> is just incremented by one in the <code>while</code> loop, performance will be bad for high numbers as the code tests a lot of div-values that will fail. A simple example: There is no need for setting <code>div</code> to 4, 6, 8, 10, etc.</p>\n\n<p>Below is an example that will perform better for high numbers. The price is more complex code and more memory usage.</p>\n\n<p>The basic idea is to collect primes when detected and only set <code>div</code> to prime values so that the code skips a lot of numbers that will never pass the <code>%</code> test anyway.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define MAXNUM 200000000\n#define INCREASE_BY 1000\n\nint main()\n{\n    // Make array for collecting primes\n    int primes_array_size = INCREASE_BY;\n    int *primes = malloc(primes_array_size * sizeof(int));\n    if (primes == NULL)\n    {\n        printf(\"out of memory\\n\");\n        return 0;\n    }\n\n    // Add 2 as the first prime\n    primes[0] = 2;\n    int num_primes = 1;\n    int prime_pos = 0;\n\n    int num,numfordiv;\n    int div = 2;\n\n    for (num=2;num&lt;MAXNUM;num++)\n    {\n        div = primes[0];\n        prime_pos = 0;\n\n        printf(\"%d = \", num);\n        numfordiv = num;\n\n        while(numfordiv&gt;1)\n        {\n            if(numfordiv % div != 0)\n            {\n                // Goto next prime (if there are any)\n                ++prime_pos;\n                if (prime_pos &lt; num_primes)\n                {\n                    div = primes[prime_pos];\n                }\n                else\n                {\n                    // No more primes in the list\n                    break;\n                }\n            }\n            else\n            {\n                numfordiv = numfordiv / div;\n                printf(\"%d\",div);\n                if (numfordiv != 1) printf(\" x \");\n            }\n        }\n\n        if (numfordiv != 1)\n        {\n            // Found new prime - add it\n            primes[num_primes] = num;\n            ++num_primes;\n            printf(\"%d\",num);\n\n            if (num_primes == primes_array_size)\n            {\n                // Allocate more memory\n                primes_array_size = primes_array_size + INCREASE_BY;\n                int* tmp = realloc(primes, primes_array_size * sizeof(int));\n                if (tmp == NULL)\n                {\n                    printf(\"out of memory\\n\");\n                    free(primes);\n                    return 0;\n                }\n                primes = tmp;\n            }\n\n        }\n\n        printf(\"\\n\");\n    }\n\n    free(primes);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 4904144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb540f264b8d67a82b903353136e7cfa?s=128&d=identicon&r=PG&f=1", "display_name": "Zhou Jie", "link": "https://stackoverflow.com/users/4904144/zhou-jie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 362, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1466604863, "creation_date": 1466598383, "last_edit_date": 1466599273, "question_id": 37967986, "link": "https://stackoverflow.com/questions/37967986/integer-factorization-in-c-language", "title": "Integer factorization in C language", "body": "<p>I am making a program in C to make the output look like this:</p>\n\n<pre><code>2 = 2\n3 = 3\n4 = 2 x 2\n5 = 5\n6 = 2 x 3\n....\n102 = 2 x 3 x 17\n103 = 103\n104 = 2 x 2 x 2 x 13\n</code></pre>\n\n<p>I wrote the integer factorization code in the following way:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define MAXNUM 1000\n\nint main(){\nint num,numfordiv;\nint div = 2;\nfor (num=2;num&lt;MAXNUM;num++){\n    printf(\"%d=\", num);\n    numfordiv = num;\n    if(num%div != 0){\n        div = div+1;\n    }\n    else{\n        numfordiv = numfordiv / div;\n        printf(\"%d x \",div);\n        if(numfordiv == 1){\n            div = 2;\n        }\n    }\n}\nreturn 0;\n}\n</code></pre>\n\n<p>However, this does not work for unknown reason. Is there anything wrong with the loop?</p>\n"}, {"tags": ["c", "pointers", "stack"], "comments": [{"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 0, "creation_date": 1466597151, "post_id": 37967503, "comment_id": 63380781, "body": "What error do you get? Is it a compilation or a run-time error? Please <a href=\"https://stackoverflow.com/posts/37967503/edit\">edit</a> your question and include the error message."}, {"owner": {"reputation": 5767, "user_id": 27800, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f8d805c02bfa80a79df1381984ac5d3a?s=128&d=identicon&r=PG", "display_name": "Peter Miehle", "link": "https://stackoverflow.com/users/27800/peter-miehle"}, "edited": false, "score": 3, "creation_date": 1466597225, "post_id": 37967503, "comment_id": 63380840, "body": "your stack is a local variable, which will not change inside the scope push is called"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1466763534, "post_id": 37967503, "comment_id": 63464705, "body": "@Costi Ivan  I showed already in my answer how push and pop should look for the stack."}], "answers": [{"tags": [], "owner": {"reputation": 143, "user_id": 6471098, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209522082314197/picture?type=large", "display_name": "Trudeau Fernandes", "link": "https://stackoverflow.com/users/6471098/trudeau-fernandes"}, "is_accepted": false, "score": 0, "last_activity_date": 1466597348, "creation_date": 1466597348, "answer_id": 37967609, "question_id": 37967503, "link": "https://stackoverflow.com/questions/37967503/c-stack-push-function/37967609#37967609", "title": "C Stack push function", "body": "<p>You need to pass stack by reference:</p>\n\n<pre><code>void push(Node **stack,int val)\n{\n    Node *p = (Node *)calloc(1,sizeof(Node));\n    p-&gt;v = val;\n    Node *aux = *stack;\n    if(aux == NULL)\n    {\n        *stack = p;\n        return;\n    }\n    while(aux-&gt;next != NULL)\n        aux = aux-&gt;next;\n    aux-&gt;next = p;\n}\n</code></pre>\n\n<p>Andcall as push(&amp;stack,value)</p>\n"}, {"comments": [{"owner": {"reputation": 199, "user_id": 4389543, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1351846580/picture?type=large", "display_name": "Costi Ivan", "link": "https://stackoverflow.com/users/4389543/costi-ivan"}, "edited": false, "score": 0, "creation_date": 1466609138, "post_id": 37967621, "comment_id": 63390848, "body": "could you check my pop function, please ?"}, {"owner": {"reputation": 5767, "user_id": 27800, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f8d805c02bfa80a79df1381984ac5d3a?s=128&d=identicon&r=PG", "display_name": "Peter Miehle", "link": "https://stackoverflow.com/users/27800/peter-miehle"}, "reply_to_user": {"reputation": 199, "user_id": 4389543, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1351846580/picture?type=large", "display_name": "Costi Ivan", "link": "https://stackoverflow.com/users/4389543/costi-ivan"}, "edited": false, "score": 0, "creation_date": 1466610700, "post_id": 37967621, "comment_id": 63391960, "body": "@CostiIvan test-question: what happens iff you push() one element and then pop() it. (it should be empty, but when I look at your function, I believe it would not) you should write a function printStack(stack)"}, {"owner": {"reputation": 199, "user_id": 4389543, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1351846580/picture?type=large", "display_name": "Costi Ivan", "link": "https://stackoverflow.com/users/4389543/costi-ivan"}, "edited": false, "score": 0, "creation_date": 1466610932, "post_id": 37967621, "comment_id": 63392115, "body": "I did..pop() does nothing to my stack...I do not know why"}, {"owner": {"reputation": 5767, "user_id": 27800, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f8d805c02bfa80a79df1381984ac5d3a?s=128&d=identicon&r=PG", "display_name": "Peter Miehle", "link": "https://stackoverflow.com/users/27800/peter-miehle"}, "reply_to_user": {"reputation": 199, "user_id": 4389543, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1351846580/picture?type=large", "display_name": "Costi Ivan", "link": "https://stackoverflow.com/users/4389543/costi-ivan"}, "edited": false, "score": 0, "creation_date": 1466679233, "post_id": 37967621, "comment_id": 63422866, "body": "@CostiIvan same answer as in push(): you do not change <code>*l</code> (what an ugly name) if aux is null, <code>*l</code> must be set to null"}], "tags": [], "owner": {"reputation": 5767, "user_id": 27800, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f8d805c02bfa80a79df1381984ac5d3a?s=128&d=identicon&r=PG", "display_name": "Peter Miehle", "link": "https://stackoverflow.com/users/27800/peter-miehle"}, "is_accepted": false, "score": 1, "last_activity_date": 1466597373, "creation_date": 1466597373, "answer_id": 37967621, "question_id": 37967503, "link": "https://stackoverflow.com/questions/37967503/c-stack-push-function/37967621#37967621", "title": "C Stack push function", "body": "<p>your push function needs a pointer to a stack node.</p>\n\n<pre><code>void push(Node **stack, int val) {\n  ...\n  *stack = p;\n  ....\n}\n\npush(&amp;stack, value);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 12461, "user_id": 266487, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/585595b6a24df9b742ebc186788e9a8e?s=128&d=identicon&r=PG", "display_name": "harper", "link": "https://stackoverflow.com/users/266487/harper"}, "edited": false, "score": 0, "creation_date": 1466599485, "post_id": 37967696, "comment_id": 63382509, "body": "<code>calloc</code> initializes to zero. There is no need to explicitlely initialize <code>p-&gt;next</code> to NULL."}], "tags": [], "owner": {"reputation": 4425, "user_id": 6277831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c21010f99314f291650d4cd9e3b2735?s=128&d=identicon&r=PG", "display_name": "lostbard", "link": "https://stackoverflow.com/users/6277831/lostbard"}, "is_accepted": false, "score": 0, "last_activity_date": 1466597553, "creation_date": 1466597553, "answer_id": 37967696, "question_id": 37967503, "link": "https://stackoverflow.com/questions/37967503/c-stack-push-function/37967696#37967696", "title": "C Stack push function", "body": "<p>Remember to initialize the next field to NULL (p->next)</p>\n\n<p>Since stack is a pointer being passed to the push function, the pointer value changes in the function don't get reflected outside of the function.</p>\n\n<p>Ie: if in the push function, we set stack = something, the stack pointer outside the function wont be set to that.</p>\n\n<p>The way around that is either pass the stack in as a pointer to the pointer, then you can modify the pointer value)</p>\n\n<pre><code>void push(Node **stack,int val)\n{\n  Node *p = (Node *)calloc(1,sizeof(Node));\n  p-&gt;v = val;\n  p-&gt;next = NULL;\n  Node *aux = *stack;\n  if(aux == NULL)\n  {\n      *stack = p;\n      return;\n  }\n  while(aux-&gt;next != NULL)\n    aux = aux-&gt;next;\n  aux-&gt;next = p;\n}\n</code></pre>\n\n<p>Call it via:</p>\n\n<pre><code>push(&amp;stack, 10);\n</code></pre>\n\n<p>Or perhaps easier to understand for beginners, return the stack value from the push function.</p>\n\n<pre><code>Node * push(Node *stack,int val)\n{\n  Node *p = (Node *)calloc(1,sizeof(Node));\n  p-&gt;v = val;\n  p-&gt;next = NULL;\n  Node *aux = stack;\n  if(aux == NULL)\n  {\n    stack = p;\n    return stack;\n  }\n  while(aux-&gt;next != NULL)\n    aux = aux-&gt;next;\n  aux-&gt;next = p;\n\n  return stack;\n}\n</code></pre>\n\n<p>Call via:</p>\n\n<pre><code>stack = push(stack, 10);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 1, "last_activity_date": 1466599744, "last_edit_date": 1466599744, "creation_date": 1466599292, "answer_id": 37968345, "question_id": 37967503, "link": "https://stackoverflow.com/questions/37967503/c-stack-push-function/37968345#37968345", "title": "C Stack push function", "body": "<p>First of all stack is a data organization that satisfies the policy LIFO (Last Input First Output). That is a new data is added at the top of the stack and popped from the top of the stack.</p>\n\n<p>You should not add a loop to find the tail of the stack that to add a new data.</p>\n\n<p>And you need to pass the top of the stack by reference. Take into account that function parameters are its local variable. Thus in your function </p>\n\n<pre><code>void push(Node *stack,int val);\n</code></pre>\n\n<p>you are changing the local variable <code>stack</code> of the function that will be destroyed after exiting the function. The original argument will not be changed.</p>\n\n<p>Also the memory allocation can fail You should report an error some way.</p>\n\n<p>Here is a demonstrative program that shows how functions <code>push</code> and <code>pop</code> can be implemented</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct node\n{\n    int v;\n    struct node *next;\n} Node;\n\nint push( Node **stack, int val )\n{\n    Node *p = malloc( sizeof( Node ) );\n    int success = p != NULL;\n\n    if ( success )\n    {\n        p-&gt;v = val;\n        p-&gt;next = *stack;\n        *stack = p;\n    }\n\n    return success;\n}\n\nint pop( Node **stack, int *val )\n{\n    int success = *stack != NULL;\n\n    if ( success )\n    {\n        Node *p = *stack;\n        *stack = ( *stack )-&gt;next;\n        *val = p-&gt;v;\n        free( p );\n    }       \n\n    return success;\n}\n\nint main(void) \n{\n    const int N = 10;\n    Node *stack = NULL;\n\n    int i = 0;\n    int val;\n\n    while ( i &lt; N &amp;&amp; push( &amp;stack, i ) ) i++;\n\n    while ( i != 0 &amp;&amp; pop( &amp;stack, &amp;val ) ) printf( \"%d \", val );\n\n    printf( \"\\n\" );\n\n    return 0;\n}\n</code></pre>\n\n<p>Its output is</p>\n\n<pre><code>9 8 7 6 5 4 3 2 1 0 \n</code></pre>\n"}], "owner": {"reputation": 199, "user_id": 4389543, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1351846580/picture?type=large", "display_name": "Costi Ivan", "link": "https://stackoverflow.com/users/4389543/costi-ivan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7701, "favorite_count": 0, "accepted_answer_id": 37968345, "answer_count": 4, "score": 2, "last_activity_date": 1466604771, "creation_date": 1466597045, "last_edit_date": 1466604771, "question_id": 37967503, "link": "https://stackoverflow.com/questions/37967503/c-stack-push-function", "title": "C Stack push function", "body": "<p>I try to implement a stack in C but I get a very strange error. For some reason my push function does not work..</p>\n\n<pre><code>typedef struct node\n{\n    int v;\n    struct node* next;\n}Node;\n\nvoid push(Node *stack,int val)\n{\n    Node *p = (Node *)calloc(1,sizeof(Node));\n    p-&gt;v = val;\n    Node *aux = stack;\n    if(aux == NULL)\n    {\n        stack = p;\n        return;\n    }\n    while(aux-&gt;next != NULL)\n        aux = aux-&gt;next;\n    aux-&gt;next = p;\n}\n</code></pre>\n\n<p>I initialized my stack with NULL</p>\n\n<pre><code>Node *stack = NULL;\n</code></pre>\n\n<p>and I call the function something like this</p>\n\n<pre><code>push(stack,value)\n</code></pre>\n\n<p>L.E.\nI tried to create a pop function with parameter double pointer but the result is the same as for push.</p>\n\n<pre><code>void pop(Node **l)\n{\n    if((*l) == NULL)\n        return;\n    else\n    {\n\n        Node *aux,*prev;\n        prev = *l;\n        aux = prev-&gt;next;\n        if(aux == NULL)\n        {\n            free(prev-&gt;v);\n            free(prev);\n            return;\n        }\n        while(aux != NULL)\n        {\n            prev = aux;\n            aux = aux-&gt;next;\n        }\n        prev-&gt;next = NULL;\n        free(aux-&gt;v);\n        free(aux);\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "floating-point", "rounding", "infinite-loop"], "comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1466597329, "post_id": 37967477, "comment_id": 63380904, "body": "<code>while (change &gt; 0)</code> makes no sense. You&#39;ll get infinite loop doing rounding if condition is true. And no rounding at all if it&#39;s false. And rounding result is unused and thus lost."}, {"owner": {"reputation": 2728, "user_id": 5237611, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ef9dbabde19ea7759116c85eea13340a?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/5237611/michael"}, "edited": false, "score": 1, "creation_date": 1466597613, "post_id": 37967477, "comment_id": 63381118, "body": "Someone answered this here: <a href=\"http://stackoverflow.com/questions/1343890/rounding-number-to-2-decimal-places-in-c\" title=\"rounding number to 2 decimal places in c\">stackoverflow.com/questions/1343890/&hellip;</a>"}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1466599585, "post_id": 37967477, "comment_id": 63382596, "body": "Why would you round it to an int? Casting.478 to int gives you 0, because there is no integer value between 0 and 1."}, {"owner": {"reputation": 5754, "user_id": 2867061, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/cd59dfa471d99e7c625b5dcb191ec8ae?s=128&d=identicon&r=PG&f=1", "display_name": "user31264", "link": "https://stackoverflow.com/users/2867061/user31264"}, "edited": false, "score": 0, "creation_date": 1466601881, "post_id": 37967477, "comment_id": 63384576, "body": "Provide the minimal reproducible example.  If round works not as intended, remove anything not relevant to round.  Provide what do you receive, and what do you expect."}, {"owner": {"reputation": 5754, "user_id": 2867061, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/cd59dfa471d99e7c625b5dcb191ec8ae?s=128&d=identicon&r=PG&f=1", "display_name": "user31264", "link": "https://stackoverflow.com/users/2867061/user31264"}, "edited": false, "score": 0, "creation_date": 1466601994, "post_id": 37967477, "comment_id": 63384687, "body": "I see that your code contains bugs which has nothing to do with round.  It is your job to find them.  Debug your code."}, {"owner": {"reputation": 3761, "user_id": 3982001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Fabio says Reinstate Monica", "link": "https://stackoverflow.com/users/3982001/fabio-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1466602501, "post_id": 37967477, "comment_id": 63385198, "body": "Adding a couple of lines that explain what the program is meant to do, instead of letting us figure it out, would be nice. Ok, this is a very simple program, but it doesn&#39;t mean you have to make it harder for us. Also, read about a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 7, "user_id": 6489974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5226af6f1e3f32f0dc3f2a4695dd36c3?s=128&d=identicon&r=PG&f=1", "display_name": "TriggerFinger", "link": "https://stackoverflow.com/users/6489974/triggerfinger"}, "edited": false, "score": 0, "creation_date": 1466604386, "post_id": 37967477, "comment_id": 63387019, "body": "Really sorry i&#39;m frustrating you guys, i&#39;m pretty new to coding in C and just confused at the moment. I obviously haven&#39;t yet developed the mind set of a programmer but hopefully i&#39;ll get there. I&#39;ll edit in what its meant to do."}, {"owner": {"reputation": 7961, "user_id": 329801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a738a21eabcad64d71d7aeea53d84891?s=128&d=identicon&r=PG", "display_name": "thelaws", "link": "https://stackoverflow.com/users/329801/thelaws"}, "edited": false, "score": 0, "creation_date": 1466612132, "post_id": 37967477, "comment_id": 63392946, "body": "Please don&#39;t remove the entire body of your question. It makes the comments &amp; answers meaningless"}, {"owner": {"reputation": 7, "user_id": 6489974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5226af6f1e3f32f0dc3f2a4695dd36c3?s=128&d=identicon&r=PG&f=1", "display_name": "TriggerFinger", "link": "https://stackoverflow.com/users/6489974/triggerfinger"}, "edited": false, "score": 0, "creation_date": 1466681272, "post_id": 37967477, "comment_id": 63424247, "body": "Is it possible then to delete the post through mod intervention. The problem has been solved and I don&#39;t think that it&#39;ll serve any further purpose."}], "answers": [{"tags": [], "owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "is_accepted": true, "score": 1, "last_activity_date": 1466601986, "creation_date": 1466601986, "answer_id": 37969507, "question_id": 37967477, "link": "https://stackoverflow.com/questions/37967477/confused-with-why-code-not-running-correctly/37969507#37969507", "title": "Confused with why code not running correctly", "body": "<p>To my understanding, the part</p>\n\n<pre><code>while (change != 0)\n    change = change * 100;\n</code></pre>\n\n<p>is an infinite loop if it is started when <code>change</code> is nonzero. Depending on the platform, eventually <code>NaN</code> or positive infinity is reached by the multiplication, causing the loop to continue forever.</p>\n"}], "owner": {"reputation": 7, "user_id": 6489974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5226af6f1e3f32f0dc3f2a4695dd36c3?s=128&d=identicon&r=PG&f=1", "display_name": "TriggerFinger", "link": "https://stackoverflow.com/users/6489974/triggerfinger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 37969507, "answer_count": 1, "score": -3, "last_activity_date": 1466612072, "creation_date": 1466596979, "last_edit_date": 1466612072, "question_id": 37967477, "link": "https://stackoverflow.com/questions/37967477/confused-with-why-code-not-running-correctly", "title": "Confused with why code not running correctly", "body": "<p>**I've done a few changes and i'd just like to know if you can help me find out why it isn't running. When I run it the text is printed but the input never stops running. **\nThe program is meant to replicate(?) the greedy algorithm. It first asks the user how much change is owed and then provides the minimum number of coins with which said change can be made.</p>\n\n<p>I'd greatly appreciate any help you can give with my code.</p>\n\n<hr>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nint main(void)\n\n{\n    //declared variables\n    float change;\n    int num = 0;\n\n    // prompts for amount owed\n\n    printf(\"Please provide the amount owed: \");\n    change = GetFloat();\n    while (change != 0)\n\n        change = change * 100;\n    int owed = round(change);\n\n    {\n        // if statements for calculating number of coins required\n        if (owed &gt;= 25)\n        {\n            owed = owed - 25;\n            num ++;\n        }\n        if (owed &gt;= 10 &amp;&amp; owed &lt; 25)\n        {\n            owed = owed - 10;\n            num ++;\n        }\n        if (owed &gt;= 5 &amp;&amp; owed &lt; 10)\n        {\n            owed = owed - 5;\n            num ++;\n        }\n        if (owed &gt;= 1 &amp;&amp; owed &lt; 5)\n        {\n            owed = owed - 1;\n            num ++;\n        }\n    }\n    printf(\"%d\\n\", num);\n}\n</code></pre>\n\n<hr>\n\n<p>When I alter the while statement and comment out the 'change = change * 100;'\nit starts to work. However, in doing so the round function won't execute.</p>\n\n<pre><code>  change = GetFloat() * 100;\n    while (change != 0)\n\n    // change = change * 1000;\n    // int owed = round(change);\n</code></pre>\n"}, {"tags": ["c", "loops", "gcc", "compiler-optimization", "loop-unrolling"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1466597917, "post_id": 37967425, "comment_id": 63381311, "body": "The interesting thing, is that if you change the for condition to, e.g.,  <code>k &lt; 9</code> the unroll is no performed at all..."}, {"owner": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1466601740, "post_id": 37967425, "comment_id": 63384434, "body": "@LPS except for very small iteration like 2 or 3"}, {"owner": {"reputation": 275, "user_id": 4416573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07c563ec3d34520b416345f53682bca6?s=128&d=identicon&r=PG&f=1", "display_name": "surrz", "link": "https://stackoverflow.com/users/4416573/surrz"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1466601945, "post_id": 37967425, "comment_id": 63384643, "body": "@LPs using GCC 4.9.2 unrolling also works for less than 9 iterations <a href=\"https://godbolt.org/g/ZPlCP6\" rel=\"nofollow noreferrer\">godbolt.org/g/ZPlCP6</a>"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1466602160, "post_id": 37967425, "comment_id": 63384857, "body": "@surrz Yes, I was talking about GCC 5.1"}, {"owner": {"reputation": 458, "user_id": 2598455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c10292c97171ec40cfe485635be47a22?s=128&d=identicon&r=PG", "display_name": "Artur Kink", "link": "https://stackoverflow.com/users/2598455/artur-kink"}, "edited": false, "score": 0, "creation_date": 1466616184, "post_id": 37967425, "comment_id": 63395365, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/37964344/gcc-5-1-unroll-loops-completely\">GCC 5.1 unroll loops completely</a>"}, {"owner": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "reply_to_user": {"reputation": 458, "user_id": 2598455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c10292c97171ec40cfe485635be47a22?s=128&d=identicon&r=PG", "display_name": "Artur Kink", "link": "https://stackoverflow.com/users/2598455/artur-kink"}, "edited": false, "score": 0, "creation_date": 1466664598, "post_id": 37967425, "comment_id": 63413137, "body": "@ArturKink it&#39;s author&#39;s original post, which have been closed before beeing edited to match this one. And also, this topic doesn&#39;t have any solution"}, {"owner": {"reputation": 5315, "user_id": 3527464, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MRCc6.jpg?s=128&g=1", "display_name": "Pyves", "link": "https://stackoverflow.com/users/3527464/pyves"}, "edited": false, "score": 1, "creation_date": 1467927515, "post_id": 37967425, "comment_id": 63932458, "body": "@surrz : could you please either accept my answer or at least have some sort of reaction to it? It&#39;s as if you&#39;ve completely ignored it :-)"}], "answers": [{"tags": [], "owner": {"reputation": 5315, "user_id": 3527464, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MRCc6.jpg?s=128&g=1", "display_name": "Pyves", "link": "https://stackoverflow.com/users/3527464/pyves"}, "is_accepted": true, "score": 4, "last_activity_date": 1494620829, "last_edit_date": 1494620829, "creation_date": 1466874568, "answer_id": 38030919, "question_id": 37967425, "link": "https://stackoverflow.com/questions/37967425/gcc-5-1-loop-unrolling/38030919#38030919", "title": "GCC 5.1 Loop unrolling", "body": "<p>The flags and parameters you are using <strong>do not guarantee</strong> that the loops will be completely unrolled. The <a href=\"https://gcc.gnu.org/onlinedocs/gcc-5.1.0/gcc/Optimize-Options.html#Optimize-Options\" rel=\"nofollow noreferrer\">GCC documentation</a> states the following regarding the <code>-funroll-all-loops</code> flag you are using:</p>\n\n<blockquote>\n  <p>turns on complete loop peeling (i.e. complete removal of loops with a\n  small constant number of iterations)</p>\n</blockquote>\n\n<p>If the compiler decides that the number of iterations for a given piece of code is not \"a small constant\" (i.e. number is too high), it may only do partial peeling or unrolling as it has done here.  Furthermore, the <code>param</code> options you are using are only <strong>maximum values</strong>, but do not force complete unrolling for loops smaller than the set value. In other words, if a loop has more iterations than the maximum you have set, then the loop will not to be completely unrolled; but the inverse is not true.</p>\n\n<p><strong>Many factors</strong> are taken into account when doing optimisations. Here the bottleneck in your code is the call to <code>printf</code> function, and the compiler will probably take this into account when doing its cost calculations, or judge that the instruction size overhead for unrolling is too important. As you are nevertheless telling it to unroll loops, it seems to determine that the best solution is to transform the initial loop with 10 unrolls and a a jump.</p>\n\n<p>If you replace <code>printf</code> with something else, the compiler may <strong>optimise differently</strong>. For instance try replacing it with the following:</p>\n\n<pre><code>volatile int temp = k;\n</code></pre>\n\n<p>The loop with this new code snippet will be <strong>fully unrolled</strong> on the newer versions of GCC (and the older ones as well). Note that the volatile keyword is just a trick used so the compiler does not optimise out the loop completely.</p>\n\n<p>To sum up, to the best of my knowledge there is no way to force later versions of GCC to produce the same output.</p>\n\n<hr>\n\n<p>As a side note, from optimisation level <code>-O2</code> onwards and without any additional compiler flags, recent versions of Clang fully unroll your loop.</p>\n"}], "owner": {"reputation": 275, "user_id": 4416573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07c563ec3d34520b416345f53682bca6?s=128&d=identicon&r=PG&f=1", "display_name": "surrz", "link": "https://stackoverflow.com/users/4416573/surrz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 626, "favorite_count": 2, "accepted_answer_id": 38030919, "answer_count": 1, "score": 6, "last_activity_date": 1494620829, "creation_date": 1466596834, "last_edit_date": 1466769150, "question_id": 37967425, "link": "https://stackoverflow.com/questions/37967425/gcc-5-1-loop-unrolling", "title": "GCC 5.1 Loop unrolling", "body": "<p>Given the following code </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char **argv)\n{\n  int k = 0;\n  for( k = 0; k &lt; 20; ++k )\n  {\n    printf( \"%d\\n\", k ) ;\n  }\n}\n</code></pre>\n\n<p>Using GCC 5.1 or later with </p>\n\n<pre><code>-x c -std=c99 -O3 -funroll-all-loops --param max-completely-peeled-insns=1000 --param max-completely-peel-times=10000\n</code></pre>\n\n<p>does partially loop unrolling, it unrolls the loop ten times and then does a conditional jump.</p>\n\n<pre><code>.LC0:\n        .string \"%d\\n\"\nmain:\n        pushq   %rbx\n        xorl    %ebx, %ebx\n.L2:\n        movl    %ebx, %esi\n        movl    $.LC0, %edi\n        xorl    %eax, %eax\n        call    printf\n        leal    1(%rbx), %esi\n        movl    $.LC0, %edi\n        xorl    %eax, %eax\n        call    printf\n        leal    2(%rbx), %esi\n        movl    $.LC0, %edi\n        xorl    %eax, %eax\n        call    printf\n        leal    3(%rbx), %esi\n        movl    $.LC0, %edi\n        xorl    %eax, %eax\n        call    printf\n        leal    4(%rbx), %esi\n        movl    $.LC0, %edi\n        xorl    %eax, %eax\n        call    printf\n        leal    5(%rbx), %esi\n        movl    $.LC0, %edi\n        xorl    %eax, %eax\n        call    printf\n        leal    6(%rbx), %esi\n        movl    $.LC0, %edi\n        xorl    %eax, %eax\n        call    printf\n        leal    7(%rbx), %esi\n        movl    $.LC0, %edi\n        xorl    %eax, %eax\n        call    printf\n        leal    8(%rbx), %esi\n        movl    $.LC0, %edi\n        xorl    %eax, %eax\n        call    printf\n        leal    9(%rbx), %esi\n        xorl    %eax, %eax\n        movl    $.LC0, %edi\n        addl    $10, %ebx\n        call    printf\n        cmpl    $20, %ebx\n        jne     .L2\n        xorl    %eax, %eax\n        popq    %rbx\n        ret\n</code></pre>\n\n<p>But using older versions of GCC such as 4.9.2 creates the desired assemlby</p>\n\n<pre><code>.LC0:\n    .string \"%d\\n\"\nmain:\n    subq    $8, %rsp\n    xorl    %edx, %edx\n    movl    $.LC0, %esi\n    movl    $1, %edi\n    xorl    %eax, %eax\n    call    __printf_chk\n    movl    $1, %edx\n    movl    $.LC0, %esi\n    movl    $1, %edi\n    xorl    %eax, %eax\n    call    __printf_chk\n    movl    $2, %edx\n    movl    $.LC0, %esi\n    movl    $1, %edi\n    xorl    %eax, %eax\n    call    __printf_chk\n    movl    $3, %edx\n    movl    $.LC0, %esi\n    movl    $1, %edi\n    xorl    %eax, %eax\n    call    __printf_chk\n    movl    $4, %edx\n    movl    $.LC0, %esi\n    movl    $1, %edi\n    xorl    %eax, %eax\n    call    __printf_chk\n    movl    $5, %edx\n    movl    $.LC0, %esi\n    movl    $1, %edi\n    xorl    %eax, %eax\n    call    __printf_chk\n    movl    $6, %edx\n    movl    $.LC0, %esi\n    movl    $1, %edi\n    xorl    %eax, %eax\n    call    __printf_chk\n    movl    $7, %edx\n    movl    $.LC0, %esi\n    movl    $1, %edi\n    xorl    %eax, %eax\n    call    __printf_chk\n    movl    $8, %edx\n    movl    $.LC0, %esi\n    movl    $1, %edi\n    xorl    %eax, %eax\n    call    __printf_chk\n    movl    $9, %edx\n    movl    $.LC0, %esi\n    movl    $1, %edi\n    xorl    %eax, %eax\n    call    __printf_chk\n    movl    $10, %edx\n    movl    $.LC0, %esi\n    movl    $1, %edi\n    xorl    %eax, %eax\n    call    __printf_chk\n    movl    $11, %edx\n    movl    $.LC0, %esi\n    movl    $1, %edi\n    xorl    %eax, %eax\n    call    __printf_chk\n    movl    $12, %edx\n    movl    $.LC0, %esi\n    movl    $1, %edi\n    xorl    %eax, %eax\n    call    __printf_chk\n    movl    $13, %edx\n    movl    $.LC0, %esi\n    movl    $1, %edi\n    xorl    %eax, %eax\n    call    __printf_chk\n    movl    $14, %edx\n    movl    $.LC0, %esi\n    movl    $1, %edi\n    xorl    %eax, %eax\n    call    __printf_chk\n    movl    $15, %edx\n    movl    $.LC0, %esi\n    movl    $1, %edi\n    xorl    %eax, %eax\n    call    __printf_chk\n    movl    $16, %edx\n    movl    $.LC0, %esi\n    movl    $1, %edi\n    xorl    %eax, %eax\n    call    __printf_chk\n    movl    $17, %edx\n    movl    $.LC0, %esi\n    movl    $1, %edi\n    xorl    %eax, %eax\n    call    __printf_chk\n    movl    $18, %edx\n    movl    $.LC0, %esi\n    movl    $1, %edi\n    xorl    %eax, %eax\n    call    __printf_chk\n    movl    $19, %edx\n    movl    $.LC0, %esi\n    movl    $1, %edi\n    xorl    %eax, %eax\n    call    __printf_chk\n    xorl    %eax, %eax\n    addq    $8, %rsp\n    ret\n</code></pre>\n\n<p>It there a way to force the later versions of GCC to produce the same output?</p>\n\n<p>Using <a href=\"https://godbolt.org/g/D1AR6i\" rel=\"nofollow\">https://godbolt.org/g/D1AR6i</a> to produce the assembly</p>\n\n<p><strong>EDIT:</strong> No duplicated question, since the problem to completly unroll loops with later versions of GCC has not yet been solved. Passing <code>--param max-completely-peeled-insns=1000 --param max-completely-peel-times=10000</code> has not effects on the generated assembly using GCC >= 5.1</p>\n"}, {"tags": ["c++", "c", "arrays", "sizeof"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 6, "creation_date": 1466596495, "post_id": 37967274, "comment_id": 63380303, "body": "I would suggest you use a <code>std::vector&lt;std::vector&lt;std::string&gt;&gt;</code>."}, {"owner": {"reputation": 4802, "user_id": 3852968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e803f34d50b5355d8cf39bdb4ce2932?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/3852968/andrew"}, "edited": false, "score": 3, "creation_date": 1466596607, "post_id": 37967274, "comment_id": 63380382, "body": "You have tagged both C++ and C. Your code mixes C++ headers (<code>iostream</code>, <code>string</code>) and C functions (<code>printf, strcmp</code>). Please pick a single language."}, {"owner": {"reputation": 799, "user_id": 3190389, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/3yFmN.png?s=128&g=1", "display_name": "Wafeeq", "link": "https://stackoverflow.com/users/3190389/wafeeq"}, "edited": false, "score": 0, "creation_date": 1466597238, "post_id": 37967274, "comment_id": 63380851, "body": "what could be the Problem if we mix both languages? Compiler won&#39;t complain. Is there any risk? or it is just nice to have one language? c++ is super to c. Everything in c has been in c++ now."}, {"owner": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "reply_to_user": {"reputation": 799, "user_id": 3190389, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/3yFmN.png?s=128&g=1", "display_name": "Wafeeq", "link": "https://stackoverflow.com/users/3190389/wafeeq"}, "edited": false, "score": 2, "creation_date": 1466597607, "post_id": 37967274, "comment_id": 63381116, "body": "@GulluButt no. Valid C programms were not always valid C++ program even in 2000, and now there are way more differences."}, {"owner": {"reputation": 799, "user_id": 3190389, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/3yFmN.png?s=128&g=1", "display_name": "Wafeeq", "link": "https://stackoverflow.com/users/3190389/wafeeq"}, "reply_to_user": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "edited": false, "score": 0, "creation_date": 1466598733, "post_id": 37967274, "comment_id": 63381915, "body": "@Revolver_Ocelot what about Efficiency? I don&#39;t think so a valid program in c is not valid in c++ ? may be from Memory Management Point of view? efficency?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 799, "user_id": 3190389, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/3yFmN.png?s=128&g=1", "display_name": "Wafeeq", "link": "https://stackoverflow.com/users/3190389/wafeeq"}, "edited": false, "score": 0, "creation_date": 1466599221, "post_id": 37967274, "comment_id": 63382293, "body": "@GulluButt, more like from simple language rules point of view. Implicit casting from <code>void*</code> comes to mind. Which doesn&#39;t happen in <code>c++</code> and is <a href=\"http://stackoverflow.com/a/605858/817643\">good practice in <code>c</code></a>."}, {"owner": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "reply_to_user": {"reputation": 799, "user_id": 3190389, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/3yFmN.png?s=128&g=1", "display_name": "Wafeeq", "link": "https://stackoverflow.com/users/3190389/wafeeq"}, "edited": false, "score": 0, "creation_date": 1466599556, "post_id": 37967274, "comment_id": 63382565, "body": "@GulluButt <a href=\"http://coliru.stacked-crooked.com/a/1824c4f573dc9bf8\" rel=\"nofollow noreferrer\">Example of difference between implicit conversion rules</a>"}], "answers": [{"tags": [], "owner": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": true, "score": 4, "last_activity_date": 1466596586, "creation_date": 1466596586, "answer_id": 37967348, "question_id": 37967274, "link": "https://stackoverflow.com/questions/37967274/how-to-obtain-sizes-of-arrays-in-a-loop/37967348#37967348", "title": "How to obtain sizes of arrays in a loop", "body": "<p>As you are including <code>&lt;string&gt;</code> and <code>&lt;iostream&gt;</code> I assume that the question is about C++ and not C. To avoid all this complication, simply use containers. E.g:</p>\n\n<pre><code>#include &lt;vector&gt;\n\nstd::vector&lt;int&gt; vect = std::vector&lt;int&gt;(3,0);\nstd::cout &lt;&lt; vect.size() &lt;&lt; std::endl;           // prints 3\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7937, "user_id": 1866300, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/dab16abeddf6aa51bb13e7fe06d70b2c?s=128&d=identicon&r=PG", "display_name": "Serve Laurijssen", "link": "https://stackoverflow.com/users/1866300/serve-laurijssen"}, "is_accepted": false, "score": 2, "last_activity_date": 1466596742, "creation_date": 1466596742, "answer_id": 37967395, "question_id": 37967274, "link": "https://stackoverflow.com/questions/37967274/how-to-obtain-sizes-of-arrays-in-a-loop/37967395#37967395", "title": "How to obtain sizes of arrays in a loop", "body": "<p>One solution if you are coding in C is to terminate your array with a special item, like NULL</p>\n\n<pre><code>const char *books[] = { \"A\",\"B\",\"C\",\"D\", NULL };\n\nsize_t size(const char *arr[])\n{\n    const char **p = arr;\n\n    while (*p)\n    {\n        p++;\n    }\n\n    return p - arr;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1068, "user_id": 57140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6da10f3d496288a3eb7cf6ac03c225ed?s=128&d=identicon&r=PG", "display_name": "kwarnke", "link": "https://stackoverflow.com/users/57140/kwarnke"}, "is_accepted": false, "score": 0, "last_activity_date": 1466598861, "creation_date": 1466598861, "answer_id": 37968157, "question_id": 37967274, "link": "https://stackoverflow.com/questions/37967274/how-to-obtain-sizes-of-arrays-in-a-loop/37968157#37968157", "title": "How to obtain sizes of arrays in a loop", "body": "<p>You can specify the array size explizit:</p>\n\n<pre><code>size_t n, index[] = {ARRSIZE(books), ARRSIZE(resources), ARRSIZE(vehicles), ARRSIZE(vehicles)};\n</code></pre>\n\n<p>or if you want to avoid double typing you can you <a href=\"https://en.wikipedia.org/wiki/X_Macro\" rel=\"nofollow\">X-Macros</a> to roll out everything:</p>\n\n<pre><code>#define TBL      \\\n    X(books)     \\\n    X(resources) \\\n    X(vehicles)  \\\n    X(buildings)\n\n    const char **T[] = { \n#define X(x) x,\nTBL\n    };\n#undef X\n\n    size_t n, index[] = {\n#define X(x) ARRSIZE(x),\nTBL\n};\n</code></pre>\n\n<p>which produces the same. See <a href=\"http://www.tutorialspoint.com/compile_c_online.php?PID=0Bw_CjBb95KQMUTB2OWg3dnh0OTQ\" rel=\"nofollow\">Running Demo</a>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6274708"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "accepted_answer_id": 37967348, "answer_count": 3, "score": 0, "last_activity_date": 1466598861, "creation_date": 1466596338, "question_id": 37967274, "link": "https://stackoverflow.com/questions/37967274/how-to-obtain-sizes-of-arrays-in-a-loop", "title": "How to obtain sizes of arrays in a loop", "body": "<p>I am aligning several arrays in order and performing some sort of classification. I created an array to hold other arrays in order to simplify the operations that I want to perform.</p>\n\n<p>Sadly, my program crashed when I ran it and I went on to debug it to finally realize that the <code>sizeof</code> operator is giving me sizes of pointers and not arrays within the loop.So I resorted to the cumbersome solution and my program worked.</p>\n\n<p>How can I avoid this cumbersome method? I want to  calculate within a loop!</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\n#define ARRSIZE(X) sizeof(X) / sizeof(*X)\n\nint classify(const char *asset, const char ***T, size_t T_size, size_t *index);\n\nint main(void)\n{\n    const char *names[] = { \"book\",\"resources\",\"vehicles\",\"buildings\" };\n\n    const char *books[] = { \"A\",\"B\",\"C\",\"D\" };\n    const char *resources[] = { \"E\",\"F\",\"G\" };\n    const char *vehicles[] = { \"H\",\"I\",\"J\",\"K\",\"L\",\"M\" };\n    const char *buildings[] = { \"N\",\"O\",\"P\",\"Q\",\"R\",\"S\",\"T\",\"U\",\"V\" };\n\n    const char **T[] = { books,resources,vehicles,buildings };\n\n    size_t T_size = sizeof(T) / sizeof(*T);\n    size_t n, *index = new size_t[T_size];\n\n    /* This will yeild the size of pointers not arrays...\n        for (n = 0; n &lt; T_size; n++) {\n            index[n] = ARRSIZE(T[n]);\n        }\n    */\n\n    /* Cumbersome solution */\n    index[0] = ARRSIZE(books);\n    index[1] = ARRSIZE(resources);\n    index[2] = ARRSIZE(vehicles);\n    index[3] = ARRSIZE(buildings);\n\n    const char asset[] = \"L\";\n\n    int i = classify(asset, T, T_size, index);\n\n    if (i &lt; 0) {\n        printf(\"asset is alien !!!\\n\");\n    }\n    else {\n        printf(\"asset ---&gt; %s\\n\", names[i]);\n    }\n\n    delete index;\n    return 0;\n}\n\nint classify(const char *asset, const char ***T, size_t T_size, size_t *index)\n{\n    size_t x, y;\n\n    for (x = 0; x &lt; T_size; x++) {\n        for (y = 0; y &lt; index[x]; y++) {\n            if (strcmp(asset, T[x][y]) == 0) {\n                return x;\n            }\n        }\n    }\n    return -1;\n}\n</code></pre>\n"}, {"tags": ["c", "file", "fwrite", "fread", "fseek"], "comments": [{"owner": {"reputation": 1080, "user_id": 2703418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74877cfa0bb308d11f165a771a773ef0?s=128&d=identicon&r=PG&f=1", "display_name": "bzeaman", "link": "https://stackoverflow.com/users/2703418/bzeaman"}, "edited": false, "score": 1, "creation_date": 1466595742, "post_id": 37966944, "comment_id": 63379771, "body": "Please create an <i><a href=\"http://stackoverflow.com/help/mcve\">MCVE</a></i>"}, {"owner": {"reputation": 3, "user_id": 6488754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba1fef24d738a84f7eef989bb86901be?s=128&d=identicon&r=PG&f=1", "display_name": "Malgiolio", "link": "https://stackoverflow.com/users/6488754/malgiolio"}, "reply_to_user": {"reputation": 1080, "user_id": 2703418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74877cfa0bb308d11f165a771a773ef0?s=128&d=identicon&r=PG&f=1", "display_name": "bzeaman", "link": "https://stackoverflow.com/users/2703418/bzeaman"}, "edited": false, "score": 0, "creation_date": 1466595792, "post_id": 37966944, "comment_id": 63379812, "body": "I think is MCVE yet"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1466595886, "post_id": 37966944, "comment_id": 63379884, "body": "See <a href=\"http://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\">Why is \u201cwhile ( !feof (file) )\u201d always wrong?</a>.  You also fail to check any return values from <code>fwrite()</code> or <code>fread()</code> - and you also need to check the return value from <code>fclose()</code>.  How do you know the <code>fwrite()</code> calls succeeded?"}, {"owner": {"reputation": 777, "user_id": 6351637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cadf8318dd2fa53fc88c9adaa5b3e07b?s=128&d=identicon&r=PG&f=1", "display_name": "s7amuser", "link": "https://stackoverflow.com/users/6351637/s7amuser"}, "edited": false, "score": 1, "creation_date": 1466596276, "post_id": 37966944, "comment_id": 63380150, "body": "What is the purpose of <code>fseek(ptr, sizeof(Triangolo), SEEK_SET);</code>? This line causes you to skip the first triangle."}, {"owner": {"reputation": 3, "user_id": 6488754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba1fef24d738a84f7eef989bb86901be?s=128&d=identicon&r=PG&f=1", "display_name": "Malgiolio", "link": "https://stackoverflow.com/users/6488754/malgiolio"}, "reply_to_user": {"reputation": 777, "user_id": 6351637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cadf8318dd2fa53fc88c9adaa5b3e07b?s=128&d=identicon&r=PG&f=1", "display_name": "s7amuser", "link": "https://stackoverflow.com/users/6351637/s7amuser"}, "edited": false, "score": 0, "creation_date": 1466596499, "post_id": 37966944, "comment_id": 63380307, "body": "@s7amuser i thought that I could read the file from the start with that <code>fseek</code> . I try to delete it,but output is the same."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1466597230, "post_id": 37966944, "comment_id": 63380846, "body": "write <code>fclose</code> at <code>creaFileTriangoli</code>"}, {"owner": {"reputation": 3, "user_id": 6488754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba1fef24d738a84f7eef989bb86901be?s=128&d=identicon&r=PG&f=1", "display_name": "Malgiolio", "link": "https://stackoverflow.com/users/6488754/malgiolio"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1466597476, "post_id": 37966944, "comment_id": 63381001, "body": "@BLUEPIXY I do it, bur output is the same"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1466598399, "post_id": 37966944, "comment_id": 63381682, "body": "It seems to work correctly if you&#39;ve already fixed the place pointed out. Try the folder is not a root folder."}], "answers": [{"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 1, "last_activity_date": 1466597690, "creation_date": 1466597690, "answer_id": 37967733, "question_id": 37966944, "link": "https://stackoverflow.com/questions/37966944/why-fread-doesnt-work-right/37967733#37967733", "title": "Why fread doesn&#39;t work right?", "body": "<p>There are two errors in <code>stampaFileTriangolo</code>, the first is that you skip the first record by using <code>fseek</code>. Note that when a file is opened, the file pointer is at the start of the file, and after you use <code>fread</code>, the file pointer is advanced automatically. So you don't need to call <code>fseek</code> to read a file sequentially.</p>\n\n<p>The second is the abuse of <code>feof</code>, which does not do what many people think. It tells you <em>after</em> you have read beyond the file, not when there is no more data. I suggest using the return value from <code>fread</code> to control the loop, like this</p>\n\n<pre><code>void stampaFileTriangolo(char f[]){\n    FILE *ptr;\n    Triangolo t;\n    ptr = fopen(f, \"rb\");\n    if(ptr == NULL) {\n        printf(\"File inesistente.\\n\");\n    }\n    else {\n        while (fread(&amp;t, sizeof(Triangolo), 1, ptr) == 1) {\n            stampaTriangolo(t);\n        }\n        fclose(ptr);\n    }\n}\n</code></pre>\n\n<p>There is an error also in <code>creaFileTriangoli</code> - you have not closed the file. This may have caused you to think you needed an <code>fseek</code> here.</p>\n"}], "owner": {"reputation": 3, "user_id": 6488754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba1fef24d738a84f7eef989bb86901be?s=128&d=identicon&r=PG&f=1", "display_name": "Malgiolio", "link": "https://stackoverflow.com/users/6488754/malgiolio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 436, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466597690, "creation_date": 1466595540, "question_id": 37966944, "link": "https://stackoverflow.com/questions/37966944/why-fread-doesnt-work-right", "title": "Why fread doesn&#39;t work right?", "body": "<p>this program should take in input a number <code>n</code> and so create n triangles. After, I want to write this triangles in a file and to print this file on standard output. I don't understand why if I input <code>n</code> = <code>2</code> the program prints only one triangle's coordinates. Moreover if I input coordinates: <code>1.0,1.1-1.5,1.6-2.4,2.5</code> for the triangle's vertices, output is <code>2.4,2.5-0.0,0.0-0.0,0.0</code>. Can someome help me?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n\ntypedef struct{\n\n    float x;\n    float y;\n\n} Punto;\n\ntypedef struct{\n\n    Punto p1;\n    Punto p2;\n    Punto p3;\n\n} Triangolo;\n\nPunto creaPunto();\nvoid creaTriangolo(Triangolo *);\nvoid stampaPunto(Punto);\nvoid stampaTriangolo(Triangolo);\nvoid creaFileTriangoli(char[], int);\nvoid stampaFileTriangolo(char[]);\n\nPunto creaPunto(){\n\n    Punto p;\n\n    printf(\"Inserire la coordinata x: \");\n    scanf(\"%f\", &amp;p.x);\n    printf(\"Inserire la coordinata y: \");\n    scanf(\"%f\", &amp;p.y);\n\n    return p;\n}\nvoid creaTriangolo(Triangolo *t){\n\n    printf(\"Triangolo.\\n\");\n\n    printf(\"Vertice p1:\\n\");\n    t-&gt;p1 = creaPunto();\n    printf(\"Vertice p2:\\n\");\n    t-&gt;p2 = creaPunto();\n    printf(\"Vertice p3:\\n\");\n    t-&gt;p3 = creaPunto();\n}\n\n\nvoid stampaPunto(Punto v){\n\n    printf(\"Coordinata x: %f\\n\", v.x);\n    printf(\"Coordinata y: %f\\n\", v.y);\n}\n\nvoid stampaTriangolo(Triangolo t){\n\n    printf(\"Triangolo\\n\");\n    printf(\"Vertice p1:\\n\");\n    stampaPunto(t.p1);\n    printf(\"Vertice p2:\\n\");\n    stampaPunto(t.p2);\n    printf(\"Vertice p3:\\n\");\n    stampaPunto(t.p3);\n}\n\nvoid creaFileTriangoli(char f[], int n){\n\n    FILE *ptr;\n    Triangolo t;\n    int i;\n\n    ptr = fopen(f, \"wb\");\n\n    if(ptr == NULL){\n\n        printf(\"File inesistente.\\n\");\n    }\n    else{\n\n        for(i=0; i&lt;n; i++){\n\n            creaTriangolo(&amp;t);\n            fwrite(&amp;t, sizeof(Triangolo), 1, ptr);\n        }\n    }\n}\n\n\nvoid stampaFileTriangolo(char f[]){\n\n    FILE *ptr;\n    Triangolo t;\n\n    ptr = fopen(f, \"rb\");\n\n    if(ptr == NULL){\n\n        printf(\"File inesistente.\\n\");\n    }\n    else{\n\n        fseek(ptr, sizeof(Triangolo), SEEK_SET);\n\n        while(!feof(ptr)){\n\n\n            fread(&amp;t, sizeof(Triangolo), 1, ptr);\n            stampaTriangolo(t);\n\n        }\n\n        fclose(ptr);\n\n    }\n\n}\n\nint main(int argc, char *argv[]) {\n\n    FILE *ptr;\n    char f[300] = \"C:\\\\sole.dat\";\n    Triangolo t;\n    int n;\n    float perimetro;\n\n    printf(\"Inserire il numero di triangoli da analizzare: \");\n    scanf(\"%d\", &amp;n);\n\n    creaFileTriangoli(f,n);\n    stampaFileTriangolo(f);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "if-statement", "operators"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1466595154, "post_id": 37966766, "comment_id": 63379369, "body": "You mind creating an <a href=\"http://stackoverflow.com/help/mcve\"><b><i>MCVE</i></b></a>?"}, {"owner": {"reputation": 182833, "user_id": 2970947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HAq55.png?s=128&g=1", "display_name": "Elliott Frisch", "link": "https://stackoverflow.com/users/2970947/elliott-frisch"}, "edited": false, "score": 1, "creation_date": 1466595285, "post_id": 37966766, "comment_id": 63379456, "body": "<code>(enum_1 || enum_2)</code> produces a bool."}, {"owner": {"reputation": 1560, "user_id": 4303216, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-crjc3oGU_5c/AAAAAAAAAAI/AAAAAAAAADc/BTLu8OHFfRM/photo.jpg?sz=128", "display_name": "sameera sy", "link": "https://stackoverflow.com/users/4303216/sameera-sy"}, "edited": false, "score": 1, "creation_date": 1466595295, "post_id": 37966766, "comment_id": 63379459, "body": "your comparison is wrong. check @tkausl &#39;s answer"}], "answers": [{"comments": [{"owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "edited": false, "score": 0, "creation_date": 1466595249, "post_id": 37966817, "comment_id": 63379427, "body": "oh... (enum_1 || enum_2) will result in 1 because it is true?"}, {"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "reply_to_user": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "edited": false, "score": 1, "creation_date": 1466595440, "post_id": 37966817, "comment_id": 63379554, "body": "Yes, if one of both enums is non-zero then this will always be 1."}], "tags": [], "owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "is_accepted": true, "score": 4, "last_activity_date": 1466595207, "creation_date": 1466595207, "answer_id": 37966817, "question_id": 37966766, "link": "https://stackoverflow.com/questions/37966766/unexpected-behaviour-although-condition-is-true-the-part-is-not-executed/37966817#37966817", "title": "?: unexpected behaviour - although condition is true, the ? part is not executed", "body": "<p>You are not comparing <code>var_1</code> to <code>enum_1</code>, neither to <code>enum_2</code> but to <code>(enum_1 || enum_2)</code>, you probably want <code>(var_1 == enum_1 || var_1 == enum_2)</code></p>\n"}, {"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 1, "last_activity_date": 1466595350, "creation_date": 1466595350, "answer_id": 37966857, "question_id": 37966766, "link": "https://stackoverflow.com/questions/37966766/unexpected-behaviour-although-condition-is-true-the-part-is-not-executed/37966857#37966857", "title": "?: unexpected behaviour - although condition is true, the ? part is not executed", "body": "<p><code>enum1</code> is 0, and <code>enum2</code> is 1 (the defaults if you don't explicitly specify the enum values).</p>\n\n<p><code>So (var_1 == (enum_1 || enum_2))</code> evaluates to </p>\n\n<p><code>(0 == (0 || 1))</code> which is equivalent to</p>\n\n<p><code>(0 == 1)</code> which is 0.</p>\n\n<p>So the expression evaluates to the second part of the ternary, as you observe.</p>\n\n<p>Did you want <code>var_1 == enum_1 || var_1 == enum_2</code>?</p>\n"}, {"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1466595554, "post_id": 37966930, "comment_id": 63379637, "body": "&quot;is probably implemented&quot;. Actually is <b>definitely</b> implemented."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1466595679, "post_id": 37966930, "comment_id": 63379720, "body": "@Bathsheba If the header (and the enum definition) is really written that way, then yes. I prefer keeping it generic, as above reasoning also holds if they&#39;ve different values associated."}, {"owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1466595858, "post_id": 37966930, "comment_id": 63379865, "body": "@Bathsheba in this example it is definitely implemented as 0 and 1, but this is just an example. in my real code, both of the enums I use are bigger than 0 so it would be implemented as (true || true) as Daniel suspected"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1466596472, "post_id": 37966930, "comment_id": 63380289, "body": "Formally it&#39;s 1 || 1 in C - in <code>int</code> types, (and true | true in C++)."}], "tags": [], "owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "is_accepted": false, "score": 1, "last_activity_date": 1466596610, "last_edit_date": 1466596610, "creation_date": 1466595508, "answer_id": 37966930, "question_id": 37966766, "link": "https://stackoverflow.com/questions/37966766/unexpected-behaviour-although-condition-is-true-the-part-is-not-executed/37966930#37966930", "title": "?: unexpected behaviour - although condition is true, the ? part is not executed", "body": "<pre><code>var_1 == (enum_1 \n                || enum_2)\n</code></pre>\n\n<p><code>enum_1</code> is probably implemented as 0, <code>enum_2</code> as 1. Thus </p>\n\n<pre><code>(enum_1 || enum_2)\n</code></pre>\n\n<p>is basically (<code>#include &lt;stdbool.h&gt;</code> for readability)</p>\n\n<pre><code>(false || true)\n</code></pre>\n\n<p>and thus <code>true</code>, which is - as integer - represented as <code>1</code>. So</p>\n\n<pre><code>var_1 == 1\n</code></pre>\n\n<p>with <code>var_1</code> having the value <code>enum_1</code> (which is probably 0) is <strong>false</strong>.</p>\n\n<p>You want</p>\n\n<pre><code>(var_1 == enum_1) || (var_1 == enum_2)\n</code></pre>\n\n<p>as condition.</p>\n"}], "owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 37966817, "answer_count": 3, "score": 0, "last_activity_date": 1466596610, "creation_date": 1466595076, "last_edit_date": 1466595613, "question_id": 37966766, "link": "https://stackoverflow.com/questions/37966766/unexpected-behaviour-although-condition-is-true-the-part-is-not-executed", "title": "?: unexpected behaviour - although condition is true, the ? part is not executed", "body": "<p>Consider this code:</p>\n\n<pre><code>// Example program\n#include &lt;stdio.h&gt;\n\ntypedef enum{\n  enum_1,\n  enum_2\n}my_enum;\n/* \n * this is not how the function works but when I debug \n * it will always returns enum_1 (verified when using the debugger)\n * so I hope this is enough\n */    \nint fun_1(int arg_1){return enum_1;} \nconst int const_1 = 10;\nconst int const_2 = 20;\nint main()\n{\n    int arg_1 = 0;\n\n    int var_1 = fun_1(arg_1);\n\n    int var_2 = (var_1 == (enum_1 \n                    || enum_2))\n                    ? const_1*10     // I expect this result\n                    : const_2*10;    // instead I get this. why?\n    printf(\"%d\\n\" , var_2);\n\n    if(var_1==enum_1)\n        var_2 = const_1*10;          // here it works fine        \n    printf(\"%d\\n\" , var_2);\n\n    return 0;\n}\n</code></pre>\n\n<p>I'm debugging this code, and var_1 is expected to get the value of enum_1. It does, but somehow the \"? :\" operator does not give me the expected result - it does not assign <code>const_1*10</code> to <code>var_2</code> but <code>const_2*10</code>. When I move along in the debug and go to the if statement I get the expected result. Why is that?</p>\n\n<p>I'm using windriver workbench on windows 8.1</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I changed the example to a runnable version, and as mentioned by tkausl, the problem was using <code>(var_1 == (enum_1 || enum_2))</code> instead of <code>(var_1 == enum_1 ||  var_1 == enum_2))</code></p>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1466594277, "post_id": 37966396, "comment_id": 63378845, "body": "<code>books</code> has local scope inside <code>addBookInfo</code>, so is stack allocated. You cannot export stack allocated var address..."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1466594356, "post_id": 37966396, "comment_id": 63378882, "body": "Is the variable <code>book</code> inside the <code>main</code> function supposed to be a single <code>library</code> structure, or is it supposed to be an array of <code>library</code> structures?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1466594457, "post_id": 37966396, "comment_id": 63378946, "body": "By the way, if you are supposed to have an array of <code>library</code> structures, isn&#39;t the names a little bit misleading? Shouldn&#39;t the structure be named <code>book</code> and the array be named <code>library</code>?"}, {"owner": {"reputation": 21, "user_id": 2650443, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/edb4cef6de69679d1ea3b2af3e8c9d45?s=128&d=identicon&r=PG", "display_name": "user2650443", "link": "https://stackoverflow.com/users/2650443/user2650443"}, "edited": false, "score": 0, "creation_date": 1466594547, "post_id": 37966396, "comment_id": 63379001, "body": "book (in the main)  is an array of pointers."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1466594630, "post_id": 37966396, "comment_id": 63379042, "body": "Weel but you allocate it with <code>sizeof(library)</code> but should be,a t least, <code>malloc(sizeof(library*)* num_of_elements)</code>"}, {"owner": {"reputation": 21, "user_id": 2650443, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/edb4cef6de69679d1ea3b2af3e8c9d45?s=128&d=identicon&r=PG", "display_name": "user2650443", "link": "https://stackoverflow.com/users/2650443/user2650443"}, "edited": false, "score": 0, "creation_date": 1466595119, "post_id": 37966396, "comment_id": 63379347, "body": "ok thanks!!  I think that\u2019s the first mistake. But still the printf at case 1 is giving the correct value , but printf at case 2 is 00.000, as i commented!!"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 2650443, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/edb4cef6de69679d1ea3b2af3e8c9d45?s=128&d=identicon&r=PG", "display_name": "user2650443", "link": "https://stackoverflow.com/users/2650443/user2650443"}, "edited": false, "score": 0, "creation_date": 1466604168, "post_id": 37966903, "comment_id": 63386807, "body": "thank you ..! Thats correct my next task is on llinked list!! thank you very much it worked!!"}], "tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": true, "score": 0, "last_activity_date": 1466596443, "last_edit_date": 1466596443, "creation_date": 1466595448, "answer_id": 37966903, "question_id": 37966396, "link": "https://stackoverflow.com/questions/37966396/passing-array-of-structure-pointers-to-a-function/37966903#37966903", "title": "passing array of structure pointers to a function", "body": "<p>Lots of problems.</p>\n\n<p>1) You want to create an array of library into main function, so you should have, at least:</p>\n\n<pre><code>#define BOOK_ARRAY_ELEMS 100\nlibrary **book= malloc(sizeof(library*)*BOOK_ARRAY_ELEMS);\nif (book == NULL)\n{\n    exit(1);\n}\n</code></pre>\n\n<p>2) <code>books</code> has local scope inside <code>addBookInfo</code>, so is stack allocated. You     cannot export stack allocated var address. You can use malloc to create that kind of variable.</p>\n\n<p>3) You are using a global value <code>count</code> to count inserted book, so you can use it to point the correct element of your array.</p>\n\n<pre><code>void addBookInfo(library **book )\n{\n    library *books = malloc(sizeof(library));\n\n    if (books != NULL)\n    {\n        printf(\"Enter Book details...\\n\");\n        printf(\"Enter Book name \\n\");\n        scanf(\"%s\", &amp;books-&gt;bookTitle[0]);\n        printf(\"Enter author name\\n\");\n        scanf(\"%s\", &amp;books-&gt;authorName[0]);\n        printf(\"Enter the price \\n\");\n        scanf(\"%f\",&amp;books-&gt;price);\n        books-&gt;availability=true;\n        book[count]=books;\n\n        count++;\n    }\n    else\n    {\n        fprintf(stderr, \"Error allocating book\\n\");\n        exit(1);\n    }\n}\n\nvoid displayBookInfo(library**book)\n{\n    int i;\n    printf(\"Display info of all the books\\n\");\n    for(i=0;i&lt;count;i++)\n    {\n        printf(\"%f,\", book[i]-&gt;price);\n    }\n\n    printf(\"\\n\");\n}\n</code></pre>\n\n<p>Don't forget to free all <code>malloc</code>ated variables, so case 7</p>\n\n<pre><code>                        case 7 :\n                        {\n                            printf(\" EXITING...\");\n                            for (i=0; i&lt;count; i++)\n                            {\n                                free(book[i]);\n                            }\n                            free(book);\n                            exit(0);\n                        }\n                        break;\n</code></pre>\n\n<p><strong>BTW I guess you are trying to achieve a concatenated list, that is another long story....</strong></p>\n"}], "owner": {"reputation": 21, "user_id": 2650443, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/edb4cef6de69679d1ea3b2af3e8c9d45?s=128&d=identicon&r=PG", "display_name": "user2650443", "link": "https://stackoverflow.com/users/2650443/user2650443"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 37966903, "answer_count": 1, "score": 0, "last_activity_date": 1466596443, "creation_date": 1466594049, "last_edit_date": 1466594233, "question_id": 37966396, "link": "https://stackoverflow.com/questions/37966396/passing-array-of-structure-pointers-to-a-function", "title": "passing array of structure pointers to a function", "body": "<p>Following is the code of a library management system using data structures.\nthe first function is to add a book. and the second is to display all the books. I am able to input the data , and also return the data from addBookInfo() function. But when sending the data( in case 2 of switch statement) it is giving price as 00.000. Please help me to correct the mistake. </p>\n\n<pre><code> #include&lt;stdio.h&gt;\n    #include&lt;string.h&gt;\n    #include&lt;stdbool.h&gt;\n    #include&lt;stdlib.h&gt;\n    #define MAXCHAR 100\n\n\n\n    typedef struct library\n    {\n            char bookTitle[MAXCHAR];\n            char authorName[MAXCHAR];\n            float price;\n            bool availability;\n    }library;\n\n\n    void addBookInfo(library**book);\n    void displayBookInfo(library**);\n    //void authorName();\n    //void displayTitle();\n    //void numberOfBooks();\n    int count;\n\n\n    int main()\n    {\n            int num,i;\n            int select;\n            library **book=(library**)malloc(sizeof(library));\n     //       library** temp;\n    //      library *Head=(library*)malloc(sizeof(library));\n    //      *book = Head;\n\n            while(1)\n            {\n                    printf (\"\\n1. Add book info.\\n 2.Display Book Info\\n 3.List all the books of a given author \\n 4.List the title of the given book\\n\");\n\n    //////////////          printf(\"5. List the count of the books in the library \\\u0146 7. Exit\\n\");\n                    printf(\"Select an option\\n\");\n                    scanf(\"%d\",&amp;select);\n\n                    switch (select)\n                    {\n                            case 1 :addBookInfo(book);\n                                    printf(\"%f...\",book[0]-&gt;price); //Works price getting displayed\n                                   break;\n\n                            case 2 :\n    //                              \n                                    printf(\"++++%f++++\",book[0]-&gt;price); //not working price showing as 00.000\n                                    displayBookInfo(book);\n                    //              printf(\"++++%f++++\",book[0]-&gt;price);\n                                    break;\n                    /*\n                            case 3 :\n                                    break;\n\n                            case 4 :\n                                    break;\n\n                            case 5 :\n                                    break;\n\n                            case 6 :\n                                    break;\n                    */\n                            case 7 :printf(\" EXITING...\");\n                                    exit(0);\n                                    break;\n\n                             default : printf(\" invalid number \\n \");\n                    }\n\n            }\n            return 0;\n\n\n\n    }\n\n\n    void addBookInfo(library **book )\n    {\n\n            library books;\n            //library **book=(library**)malloc(sizeof(library)); \n            printf(\"Enter Book details...\\n\");\n            printf(\"Enter Book name \\n\");\n            scanf(\"%s\",books.bookTitle);\n            printf(\"Enter author name\\n\");\n            scanf(\"%s\",books.authorName);\n            printf(\"Enter the price \\n\");\n            scanf(\"%f\",&amp;books.price);\n            books.availability=true;\n            *book=&amp;books;\n            *book++;\n\n            count++;\n    //      printf(\"%f\",book[0]-&gt;price);\n    //      return book;\n    }\n\n    void displayBookInfo(library**book)\n    {\n            int i;\n            printf(\"Display info of all the books\\n\");\n            for(i=0;i&lt;count;i++)\n            {\n                    printf(\"%f\\n,\",book[0]-&gt;price);// not working price showing as 00.000 or segmentation fault \n\n            }\n    }\n</code></pre>\n"}, {"tags": ["c", "memory-management", "macros", "c-preprocessor"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1466592703, "post_id": 37965817, "comment_id": 63377788, "body": "You&#39;ll need a <code>get_constant()</code> function for the library. Macros are gone after the first step of the build."}, {"owner": {"reputation": 192, "user_id": 1061968, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/27c3693457ccc62cea73832d69e7b847?s=128&d=identicon&r=PG", "display_name": "Dipankar Saha", "link": "https://stackoverflow.com/users/1061968/dipankar-saha"}, "reply_to_user": {"reputation": 11220, "user_id": 2609288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3634e5c231c72e362f00ae39b637734f?s=128&d=identicon&r=PG", "display_name": "Baldrick", "link": "https://stackoverflow.com/users/2609288/baldrick"}, "edited": false, "score": 0, "creation_date": 1466596598, "post_id": 37965817, "comment_id": 63380377, "body": "Thanks @Baldrick. It worked the way I wanted."}], "answers": [{"comments": [{"owner": {"reputation": 192, "user_id": 1061968, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/27c3693457ccc62cea73832d69e7b847?s=128&d=identicon&r=PG", "display_name": "Dipankar Saha", "link": "https://stackoverflow.com/users/1061968/dipankar-saha"}, "edited": false, "score": 0, "creation_date": 1466594830, "post_id": 37965862, "comment_id": 63379172, "body": "This is something not to let the outsider know so sharing header may not work for me. Only if developer wants to know the value should be able to get the value with running anything other prog."}], "tags": [], "owner": {"reputation": 777, "user_id": 6351637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cadf8318dd2fa53fc88c9adaa5b3e07b?s=128&d=identicon&r=PG&f=1", "display_name": "s7amuser", "link": "https://stackoverflow.com/users/6351637/s7amuser"}, "is_accepted": false, "score": 3, "last_activity_date": 1466592656, "creation_date": 1466592656, "answer_id": 37965862, "question_id": 37965817, "link": "https://stackoverflow.com/questions/37965817/is-there-a-way-to-get-the-macro-value-for-a-given-library/37965862#37965862", "title": "Is there a way to get the macro value for a given library", "body": "<p>You can define the constant in a header file and supply that header with the library.</p>\n"}, {"comments": [{"owner": {"reputation": 12461, "user_id": 266487, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/585595b6a24df9b742ebc186788e9a8e?s=128&d=identicon&r=PG", "display_name": "harper", "link": "https://stackoverflow.com/users/266487/harper"}, "edited": false, "score": 0, "creation_date": 1466594117, "post_id": 37966289, "comment_id": 63378742, "body": "Open Source is a kind of distribution of software. Designing an interface is programming technik. Don&#39;t mix both because it would confuse readers. -- But if you think you can provide the source code to the reader then you failed to provide an interface."}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "reply_to_user": {"reputation": 12461, "user_id": 266487, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/585595b6a24df9b742ebc186788e9a8e?s=128&d=identicon&r=PG", "display_name": "harper", "link": "https://stackoverflow.com/users/266487/harper"}, "edited": false, "score": 0, "creation_date": 1466594220, "post_id": 37966289, "comment_id": 63378811, "body": "@harper Making the library open source would allow users to find constant names, however, which is what OP wants"}, {"owner": {"reputation": 12461, "user_id": 266487, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/585595b6a24df9b742ebc186788e9a8e?s=128&d=identicon&r=PG", "display_name": "harper", "link": "https://stackoverflow.com/users/266487/harper"}, "edited": false, "score": 0, "creation_date": 1466677103, "post_id": 37966289, "comment_id": 63421449, "body": "Open Source is a relegion that requires to make your work public. There are other possibiliies to provide source code to the customer. Defining the version in the header is a more sensible option."}], "tags": [], "owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "is_accepted": false, "score": 1, "last_activity_date": 1466593786, "creation_date": 1466593786, "answer_id": 37966289, "question_id": 37965817, "link": "https://stackoverflow.com/questions/37965817/is-there-a-way-to-get-the-macro-value-for-a-given-library/37966289#37966289", "title": "Is there a way to get the macro value for a given library", "body": "<p>There are ways to do that:</p>\n\n<ul>\n<li>Define the constant in a header file to the library and distribute it with the library</li>\n<li>Make the library some form of open source</li>\n<li>Write a dedicated <code>get_constant</code> function that returns the value</li>\n</ul>\n\n<p>Its worth noting that Macros are always sheer text replacement. So after compile time you won't even know they were there.</p>\n"}], "owner": {"reputation": 192, "user_id": 1061968, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/27c3693457ccc62cea73832d69e7b847?s=128&d=identicon&r=PG", "display_name": "Dipankar Saha", "link": "https://stackoverflow.com/users/1061968/dipankar-saha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "closed_date": 1466603263, "answer_count": 2, "score": 0, "last_activity_date": 1469378785, "creation_date": 1466592551, "last_edit_date": 1469378785, "question_id": 37965817, "link": "https://stackoverflow.com/questions/37965817/is-there-a-way-to-get-the-macro-value-for-a-given-library", "closed_reason": "Duplicate", "title": "Is there a way to get the macro value for a given library", "body": "<p>I have situation as below:</p>\n\n<pre><code>#define CONSTANT 123\nfoo()\n{\n...\n}\n</code></pre>\n\n<p>Using the above code, after creating the library lets say test.so, how can get to know the CONSTANT macro value from the library? Is there any way?</p>\n"}, {"tags": ["c++", "c", "kernighan-and-ritchie"], "comments": [{"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 0, "creation_date": 1466593052, "post_id": 37965521, "comment_id": 63378054, "body": "You are casting <code>ULONG_MAX</code> to <code>unsigned</code>, which is not large enough to hold the value (on your system). No cast is necessary."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1466659748, "post_id": 37965521, "comment_id": 63410978, "body": "Sorry, why do you tag this question as c++ when you are citing K&amp;R examples?  Please, don&#39;t mesh languages.  Take the c++ tag off from here, please."}], "answers": [{"comments": [{"owner": {"reputation": 44, "user_id": 4328517, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_It2CxHIW-c/AAAAAAAAAAI/AAAAAAAAADE/jl6OTVBq39s/photo.jpg?sz=128", "display_name": "hsuyaa", "link": "https://stackoverflow.com/users/4328517/hsuyaa"}, "edited": false, "score": 0, "creation_date": 1466592229, "post_id": 37965578, "comment_id": 63377460, "body": "Ok, but then why am I getting the 32 bit value for the unsigned long?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 44, "user_id": 4328517, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_It2CxHIW-c/AAAAAAAAAAI/AAAAAAAAADE/jl6OTVBq39s/photo.jpg?sz=128", "display_name": "hsuyaa", "link": "https://stackoverflow.com/users/4328517/hsuyaa"}, "edited": false, "score": 1, "creation_date": 1466592295, "post_id": 37965578, "comment_id": 63377504, "body": "@hsuyaa Because you cast it to an <code>unsigned int</code> (<code>unsigned</code> is short for <code>unsigned int</code> because <code>int</code> is the &quot;default&quot; integer type), which is typically 32 bits. If you want an <code>unsigned long</code> you should cast it as such."}, {"owner": {"reputation": 44, "user_id": 4328517, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_It2CxHIW-c/AAAAAAAAAAI/AAAAAAAAADE/jl6OTVBq39s/photo.jpg?sz=128", "display_name": "hsuyaa", "link": "https://stackoverflow.com/users/4328517/hsuyaa"}, "edited": false, "score": 0, "creation_date": 1466592453, "post_id": 37965578, "comment_id": 63377618, "body": "Thanks!   Can we cast the result to the unsigned long?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 44, "user_id": 4328517, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_It2CxHIW-c/AAAAAAAAAAI/AAAAAAAAADE/jl6OTVBq39s/photo.jpg?sz=128", "display_name": "hsuyaa", "link": "https://stackoverflow.com/users/4328517/hsuyaa"}, "edited": false, "score": 0, "creation_date": 1466592721, "post_id": 37965578, "comment_id": 63377805, "body": "@hsuyaa Yes you should."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "reply_to_user": {"reputation": 44, "user_id": 4328517, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_It2CxHIW-c/AAAAAAAAAAI/AAAAAAAAADE/jl6OTVBq39s/photo.jpg?sz=128", "display_name": "hsuyaa", "link": "https://stackoverflow.com/users/4328517/hsuyaa"}, "edited": false, "score": 1, "creation_date": 1466597059, "post_id": 37965578, "comment_id": 63380706, "body": "@hsuyaa, You&#39;re also using <code>%lu</code> to print the <code>unsigned</code> instead of <code>%u</code>, so it&#39;s anyone&#39;s guess what will happen. I recommend <a href=\"http://coliru.stacked-crooked.com/a/0782f0e1be47972d\" rel=\"nofollow noreferrer\">compiler warnings</a>."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 2, "last_activity_date": 1466591941, "creation_date": 1466591941, "answer_id": 37965578, "question_id": 37965521, "link": "https://stackoverflow.com/questions/37965521/example-2-1-kr-wrong-symbolic-constants-value-for-long-min-and-long-max/37965578#37965578", "title": "Example 2.1, K&amp;R: Wrong symbolic constants value for LONG_MIN and LONG_MAX?", "body": "<p>The size of types are variable. A <code>long</code> is <em>at least</em> 32 bits (which gives the +-2 billion range), but it's allowed to be larger. On a 64 bit system it might, for example, be 64 bits.</p>\n\n<p>A <code>long long</code> must be at least 64 bits, but may of course be larger.</p>\n\n<p>These sizes depend on the underlying hardware platform <em>and</em> the compiler. For example on Windows 64-bit system using GCC then <code>long</code> is 64 bits but using the Visual C++ compiler <code>long</code> is \"only\" 32 bits.</p>\n\n<p>Read more about <a href=\"http://en.cppreference.com/w/c/language/arithmetic_types#Integer_types\" rel=\"nofollow\">integer types in this reference</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1466592870, "post_id": 37965633, "comment_id": 63377921, "body": "It&#39;s also curious that MSVC has <code>#define LONG_MIN (-2147483647L - 1)</code> which is done that way to prevent the compiler complaining about <code>2147483648L</code> being out of range (before the negation)."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1466593116, "post_id": 37965633, "comment_id": 63378098, "body": "@WeatherVane Well I guess that&#39;s yet another design flaw in C... there exist no negative literals before you apply the unary minus operator on them."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 2, "last_activity_date": 1466592065, "creation_date": 1466592065, "answer_id": 37965633, "question_id": 37965521, "link": "https://stackoverflow.com/questions/37965521/example-2-1-kr-wrong-symbolic-constants-value-for-long-min-and-long-max/37965633#37965633", "title": "Example 2.1, K&amp;R: Wrong symbolic constants value for LONG_MIN and LONG_MAX?", "body": "<p>Obviously <code>long</code> is 64 bits on your system.</p>\n\n<p>The C standard specifies <em>minimum limits</em> for integer types. Meaning that for example LONG_MAX has to be <em>at least</em> <code>2 147 483 647</code>, but it could be larger.</p>\n\n<p>As a side note, this is a bug: <code>(unsigned)ULONG_MAX</code>. Should be unsigned long.</p>\n\n<hr>\n\n<p>One interesting curiousity: note for example that LONG_MIN has to be at least <code>-2 147 483 647</code>. But even on a regular 32 bit two complement system, it never has that value!<br>\nIt has the value <code>-2 147 483 648</code>. This is done intentionally to allow one's complement and sign &amp; magnitude systems.</p>\n"}, {"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 0, "last_activity_date": 1466592805, "creation_date": 1466592805, "answer_id": 37965910, "question_id": 37965521, "link": "https://stackoverflow.com/questions/37965521/example-2-1-kr-wrong-symbolic-constants-value-for-long-min-and-long-max/37965910#37965910", "title": "Example 2.1, K&amp;R: Wrong symbolic constants value for LONG_MIN and LONG_MAX?", "body": "<p>It's what it says.</p>\n\n<blockquote>\n<pre><code>Minimum Acceptable Value: +2 147 483 647\n</code></pre>\n</blockquote>\n\n<p>The \"minimum acceptable value\" for <code>LONG_MAX</code> is that. Your value for <code>LONG_MAX</code> (because your system is 64-bit) is higher.</p>\n\n<p>So there's no problem.</p>\n"}], "owner": {"reputation": 44, "user_id": 4328517, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_It2CxHIW-c/AAAAAAAAAAI/AAAAAAAAADE/jl6OTVBq39s/photo.jpg?sz=128", "display_name": "hsuyaa", "link": "https://stackoverflow.com/users/4328517/hsuyaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1466592805, "creation_date": 1466591790, "last_edit_date": 1466592301, "question_id": 37965521, "link": "https://stackoverflow.com/questions/37965521/example-2-1-kr-wrong-symbolic-constants-value-for-long-min-and-long-max", "title": "Example 2.1, K&amp;R: Wrong symbolic constants value for LONG_MIN and LONG_MAX?", "body": "<p>This is the code which I use to find the symbolic constant values for LONG</p>\n\n<pre><code>   #include &lt;limits.h&gt;     //These header files contains the symbolic constants\n   #include &lt;float.h&gt;      //for different datatypes\n\n   #include &lt;stdio.h&gt;\n\n    int main(void){\n\n            printf(\"\\tMininum numeric value for long type: %ld\\n\", LONG_MIN);\n            printf(\"\\tMaximum numeric value for long type: %ld\\n\", LONG_MAX);\n\n            printf(\"\\tMaximum numeric value for unsigned long type: %lu\\n\", (unsigned)ULONG_MAX);\n    return 0;\n   }  \n</code></pre>\n\n<p>Output which I get is:</p>\n\n<pre><code>  Mininum numeric value for long type: -9223372036854775808\n  Maximum numeric value for long type: 9223372036854775807\n  Maximum numeric value for unsigned long type: 4294967295\n</code></pre>\n\n<p>But if see the limits.h from the man page. These are the symbolic constants for <code>LONG_MIN</code>, <code>LONG_MAX</code>, <code>LLONG_MIN</code> and <code>LLONG_MAX</code> from the <code>limits.h</code> file in my system.</p>\n\n<pre><code>  {LONG_MIN}\n          Minimum value of type long.\n          Maximum Acceptable Value: -2 147 483 647\n\n  {LONG_MAX}\n          Maximum value of a long.\n          Minimum Acceptable Value: +2 147 483 647\n\n  {LLONG_MIN}\n          Minimum value of type long long.\n          Maximum Acceptable Value: -9223372036854775807\n\n  {LLONG_MAX}\n          Maximum value of type long long.\n          Minimum Acceptable Value: +9223372036854775807\n</code></pre>\n\n<p>As if, the program is giving me the values from Long long symbolic constants.</p>\n\n<p>Why is this happening?</p>\n"}, {"tags": ["c", "pointers", "char", "printf", "malloc"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1466590136, "post_id": 37964882, "comment_id": 63376124, "body": "<a href=\"http://stackoverflow.com/q/605845/2173917\">Please see this discussion on why not to cast the return value of <code>malloc()</code> and family in <code>C</code>.</a>."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1466590222, "post_id": 37964882, "comment_id": 63376200, "body": "Can&#39;t compile this."}, {"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1466590272, "post_id": 37964882, "comment_id": 63376227, "body": "You are allocating (malloc) space for a char-pointer, why?"}, {"owner": {"reputation": 129, "user_id": 5353113, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a1b75928f020d05a16c6eada14fa8ed2?s=128&d=identicon&r=PG&f=1", "display_name": "PythonNoob", "link": "https://stackoverflow.com/users/5353113/pythonnoob"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1466590431, "post_id": 37964882, "comment_id": 63376309, "body": "@SouravGhosh : I didn&#39;t get it. My problem is bit different here. Instead of char/string if I have floats in the column and I do the same operation. It works fine. without errors in compilation or printf."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 4, "creation_date": 1466590693, "post_id": 37964882, "comment_id": 63376464, "body": "It this the actual code or something you made up for posting on SO? Because the compiler error doesn&#39;t match the posted code. Also, the obvious compiler errors in this code (<code>void main</code>) makes me think this is some artificial stuff you just made up, and not the real code."}, {"owner": {"reputation": 129, "user_id": 5353113, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a1b75928f020d05a16c6eada14fa8ed2?s=128&d=identicon&r=PG&f=1", "display_name": "PythonNoob", "link": "https://stackoverflow.com/users/5353113/pythonnoob"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1466590995, "post_id": 37964882, "comment_id": 63376654, "body": "@Lundin: I didn&#39;t actually copy paste it but I wrote it seeing the terminal. There might be some typos. But I guess I am looking for more substantial error than missing braces after &quot;void main&quot;."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 3, "creation_date": 1466591386, "post_id": 37964882, "comment_id": 63376923, "body": "@PythonNoob: then <i>copy and paste</i> the code, don&#39;t type it over. How can anyone help you find actual errors when we can&#39;t see what other typos you made?"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1466591455, "post_id": 37964882, "comment_id": 63376961, "body": "<a href=\"http://stackoverflow.com/q/605845/995714\">Don&#39;t cast the result of <code>malloc</code> in C</a>"}, {"owner": {"reputation": 129, "user_id": 5353113, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a1b75928f020d05a16c6eada14fa8ed2?s=128&d=identicon&r=PG&f=1", "display_name": "PythonNoob", "link": "https://stackoverflow.com/users/5353113/pythonnoob"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1466591877, "post_id": 37964882, "comment_id": 63377218, "body": "@MartijnPieters If I was well versed in C, I wouldn&#39;t care for the typos of the person asking question. Especially if the person has mentioned that he has typed the code and what he is looking for is not the errors from the typos but the actual use of malloc, pointers etc. Anyways, that was rude."}, {"owner": {"reputation": 1068, "user_id": 57140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6da10f3d496288a3eb7cf6ac03c225ed?s=128&d=identicon&r=PG", "display_name": "kwarnke", "link": "https://stackoverflow.com/users/57140/kwarnke"}, "edited": false, "score": 0, "creation_date": 1466591987, "post_id": 37964882, "comment_id": 63377294, "body": "You need a 2d array to hold the results, see possible solution <a href=\"http://www.tutorialspoint.com/compile_c_online.php?PID=0Bw_CjBb95KQMZEpKSndTV3ZHQVU\" rel=\"nofollow noreferrer\">tutorialspoint.com/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 5353113, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a1b75928f020d05a16c6eada14fa8ed2?s=128&d=identicon&r=PG&f=1", "display_name": "PythonNoob", "link": "https://stackoverflow.com/users/5353113/pythonnoob"}, "edited": false, "score": 0, "creation_date": 1466590609, "post_id": 37964986, "comment_id": 63376412, "body": "Thanks for pointing that out. I am multiplying which I forgot to mention in the code. Anyways the problem still persists."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1466590673, "last_edit_date": 1466590673, "creation_date": 1466590385, "answer_id": 37964986, "question_id": 37964882, "link": "https://stackoverflow.com/questions/37964882/malloc-for-char-pointers-and-printf/37964986#37964986", "title": "malloc for char pointers and printf", "body": "<p>First of all,</p>\n\n<pre><code> atm=(char*)malloc(sizeof (char*));\n</code></pre>\n\n<p>does not do what you think it <em>does</em>. It only allocates a memory enough o hold a <code>char *</code>, that's also wrongly.</p>\n\n<p>You need to allocate a size of <code>n * sizeof(char)</code>, where, <code>n</code> == number of <code>char</code>s. Now, <code>sizeof(char) == 1</code> being guaranteed by C standard, your statement can be reduced to</p>\n\n<pre><code>atm = malloc(requiredsize);\nres= malloc(requiredsize);\n</code></pre>\n\n<p>After that, you should check for the success of <code>malloc()</code> call to prevent UB from accessing NULL pointer.</p>\n\n<p>But then, you'll be overwriting <code>atm</code> and <code>res</code> in every call to <code>fgets()</code> and <code>fscanf()</code>. You seem to need an array of pointers, not a simple pointer to get the job done.</p>\n"}, {"comments": [{"owner": {"reputation": 129, "user_id": 5353113, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a1b75928f020d05a16c6eada14fa8ed2?s=128&d=identicon&r=PG&f=1", "display_name": "PythonNoob", "link": "https://stackoverflow.com/users/5353113/pythonnoob"}, "edited": false, "score": 0, "creation_date": 1466591303, "post_id": 37965101, "comment_id": 63376864, "body": "Thannks thats helpful. So what should be used in place of <code>fscanf</code> ?"}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "reply_to_user": {"reputation": 129, "user_id": 5353113, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a1b75928f020d05a16c6eada14fa8ed2?s=128&d=identicon&r=PG&f=1", "display_name": "PythonNoob", "link": "https://stackoverflow.com/users/5353113/pythonnoob"}, "edited": false, "score": 1, "creation_date": 1466591702, "post_id": 37965101, "comment_id": 63377088, "body": "@PythonNoob you would think that C might include a convient way to read variable-length strings from a file, but that is not the case. You can use <code>getline</code> if it is available on your platform (and then munge the result into two separate strings). TBH this deserves a separate question."}, {"owner": {"reputation": 129, "user_id": 5353113, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a1b75928f020d05a16c6eada14fa8ed2?s=128&d=identicon&r=PG&f=1", "display_name": "PythonNoob", "link": "https://stackoverflow.com/users/5353113/pythonnoob"}, "edited": false, "score": 0, "creation_date": 1466647619, "post_id": 37965101, "comment_id": 63407676, "body": "I tried the code you suggested and it didnt work. No compilation errors but gives &quot;segmentation fault&quot; upon execution."}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "reply_to_user": {"reputation": 129, "user_id": 5353113, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a1b75928f020d05a16c6eada14fa8ed2?s=128&d=identicon&r=PG&f=1", "display_name": "PythonNoob", "link": "https://stackoverflow.com/users/5353113/pythonnoob"}, "edited": false, "score": 0, "creation_date": 1466669462, "post_id": 37965101, "comment_id": 63416097, "body": "@PythonNoob well, there are bugs in your code; quite a few. But you say you didn&#39;t paste the exact code; I don&#39;t know which are typos and which are real. You&#39;re not resetting the value of <code>i</code> before the second <code>while</code> loop. You&#39;re using <code>fgets</code> and then <code>fscanf</code>, which doesn&#39;t make sense; perhaps you should use <code>sscanf</code> to scan the buffer that you&#39;ve already read via <code>fgets</code>. Seriously, ask another question, and post your <i>exact</i> code."}], "tags": [], "owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "is_accepted": false, "score": 1, "last_activity_date": 1466591014, "last_edit_date": 1466591014, "creation_date": 1466590685, "answer_id": 37965101, "question_id": 37964882, "link": "https://stackoverflow.com/questions/37964882/malloc-for-char-pointers-and-printf/37965101#37965101", "title": "malloc for char pointers and printf", "body": "<p>If <code>atm</code> and <code>res</code> are pointers to arrays of <code>char *</code>, which seems like the intention, then they should be declared as such:</p>\n\n<pre><code>char **atm,**res;\n</code></pre>\n\n<p>You then need to allocate storage for <em>each</em> string, as well as the array as a whole:</p>\n\n<pre><code> while(fgets(buff,sizeof (buff),fp)!=NULL){\n     atm[i] = malloc(200); // choose a suitable maximum size\n     res[i] = malloc(200);\n     fscanf(fp,\"%s %s\",atm[i],res[i]);\n     i++;\n }\n</code></pre>\n\n<p>This much more closely matches your intention - I think.</p>\n\n<p>It's not particularly good practice, however. Using <code>fscanf</code> with <code>%s</code>, there is no guarantee that the string you read won't be longer than what you've allocated (I think you can use a width specifier to limit what it reads, eg <code>%100s</code>, but that limits how much is read as well as how much is stored). You should also check the return from <code>malloc</code> in each case to make sure it was successful.</p>\n"}], "owner": {"reputation": 129, "user_id": 5353113, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a1b75928f020d05a16c6eada14fa8ed2?s=128&d=identicon&r=PG&f=1", "display_name": "PythonNoob", "link": "https://stackoverflow.com/users/5353113/pythonnoob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1825, "favorite_count": 0, "closed_date": 1466591395, "answer_count": 2, "score": -3, "last_activity_date": 1466591014, "creation_date": 1466590094, "last_edit_date": 1466590542, "question_id": 37964882, "link": "https://stackoverflow.com/questions/37964882/malloc-for-char-pointers-and-printf", "closed_reason": "Not suitable for this site", "title": "malloc for char pointers and printf", "body": "<p>I have a file which looks like following:</p>\n\n<pre><code> ATOM          HIS\n ATOM          TRP\n ATOM          PHE\n</code></pre>\n\n<p>I want to print the first column, following is my C-code:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#includ&lt;stdlib.h&gt;\nvoid main\n{\n     FILE *fp;\n     fp=fopen(\"xyz\",\"r\");\n     char *atm,*res;\n     char buff[200];\n     while(fgets(buff,sizeof (buff),fp)!=NULL){\n                    i++;\n     }\n     rewind(fp);\n     atm=(char*)malloc(i * sizeof (char*));\n     res=(char*)malloc(i * sizeof (char*));\n     while(fgets(buff,sizeof (buff),fp)!=NULL){\n               fscanf(fp,\"%s %s\",&amp;atm[i],&amp;res[i]);\n               i++;\n     }\n     for(j=0;j&lt;i;j++){\n             printf(\"%s\\n\",atm);\n     }\n</code></pre>\n\n<p>I would expect the following output:</p>\n\n<pre><code>ATOM\nATOM\nATOM\n</code></pre>\n\n<p>But it doesn't compile and says that:</p>\n\n<pre><code> warning: format \u2018%s\u2019 expects argument of type \u2018char *\u2019, but argument 2 has type \u2018int\u2019\n</code></pre>\n\n<p>hence in <code>printf</code> statement I have added <code>&amp;</code> to <code>atm</code> (i.e &amp;atm instead of atm). In this case the code compiles well but gives the following output:</p>\n\n<p><code>AAAAAAAAAAAAAAAATOM\n AAAAAAAAAATOM\n AAAAAAAATOM</code></p>\n\n<p>I will appreciate any suggestion regarding this. </p>\n"}, {"tags": ["c", "loops", "for-loop", "srand"], "comments": [{"owner": {"reputation": 3813, "user_id": 6290553, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZvOsJ.jpg?s=128&g=1", "display_name": "Raktim Biswas", "link": "https://stackoverflow.com/users/6290553/raktim-biswas"}, "edited": false, "score": 4, "creation_date": 1466589469, "post_id": 37964472, "comment_id": 63375691, "body": "omit the <code>col++;</code> inside the loop or just modify this line <code>for (col=1; col&lt;=10; col++)</code> to <code>for (col=1; col&lt;=10; )</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6498474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3593f51f9f3dfac419e9253062563a96?s=128&d=identicon&r=PG&f=1", "display_name": "CrushClaw", "link": "https://stackoverflow.com/users/6498474/crushclaw"}, "edited": false, "score": 0, "creation_date": 1466590819, "post_id": 37964528, "comment_id": 63376543, "body": "Thanks mate and excuse me for this noob question and the other noob questions to come"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 3, "last_activity_date": 1466589977, "last_edit_date": 1466589977, "creation_date": 1466589220, "answer_id": 37964528, "question_id": 37964472, "link": "https://stackoverflow.com/questions/37964472/loop-iterating-only-through-half-of-the-elements/37964528#37964528", "title": "Loop iterating only through half of the elements", "body": "<p>Because, you are doing <code>col++</code> <strong>twice</strong>, once in the loop body, and once in the post-loop statement.</p>\n\n<pre><code>for (col=1; col&lt;=10; col++)   //...................(i)\n                    ^^^^^^^\n</code></pre>\n\n<p>and</p>\n\n<pre><code>r = rand() % 11;\nprintf(\"%d\\n\", r);\ncol++;                       //.....................(ii)\n^^^^^\n</code></pre>\n\n<p>So, for a single iteration, <code>col</code> gets incremented <em>twice</em>, iteration count gets halved. </p>\n\n<p>Remove either of the statements.</p>\n"}, {"tags": [], "owner": {"reputation": 1427, "user_id": 5624602, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ca1e4cf5aa20f7f5b921f3d2eb95220b?s=128&d=identicon&r=PG&f=1", "display_name": "STF", "link": "https://stackoverflow.com/users/5624602/stf"}, "is_accepted": false, "score": 0, "last_activity_date": 1466689304, "last_edit_date": 1466689304, "creation_date": 1466589250, "answer_id": 37964539, "question_id": 37964472, "link": "https://stackoverflow.com/questions/37964472/loop-iterating-only-through-half-of-the-elements/37964539#37964539", "title": "Loop iterating only through half of the elements", "body": "<p>You have made a mistake - you don't need to write the <code>col++</code> twice!!</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;time.h&gt;\n\nint main(){\n\n    int r, col;\n\n    srand((unsigned)time(NULL));\n\n    for (col=1; col&lt;=10; col++){\n\n        r = rand() % 11;\n        printf(\"%d\\n\", r);\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 87, "user_id": 6386218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad0d3cb9b60dbbbf6ebfaad936fbcdb0?s=128&d=identicon&r=PG&f=1", "display_name": "Beka", "link": "https://stackoverflow.com/users/6386218/beka"}, "is_accepted": false, "score": 0, "last_activity_date": 1466592710, "creation_date": 1466592710, "answer_id": 37965878, "question_id": 37964472, "link": "https://stackoverflow.com/questions/37964472/loop-iterating-only-through-half-of-the-elements/37965878#37965878", "title": "Loop iterating only through half of the elements", "body": "<p>Double col++. \"for\" loop statement include three expressions.\nFirst is called once at beginning. Usually used for counter initialization.\nSecond is loop continue condition check. Called before every iteration. If result of expression false loop will be stopped.\nThird part called after every iteration. Usually used for counter increment.</p>\n\n<p>If you used col++ in the \"for\" and want \"col\" to be incremented by 1 every iteration you don't execute col++ in the loop body.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n   #include&lt;stdlib.h&gt;\n   #include&lt;time.h&gt;\n\n   int main(){\n\n   int r, col;\n\n   srand((unsigned)time(NULL));\n\n   for (col=1; col&lt;=10; col++){\n\n   r = rand() % 11;\n   printf(\"%d\\n\", r);\n   //col++;\n\n   }\n  return 0;\n  }\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6498474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3593f51f9f3dfac419e9253062563a96?s=128&d=identicon&r=PG&f=1", "display_name": "CrushClaw", "link": "https://stackoverflow.com/users/6498474/crushclaw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 37964528, "answer_count": 3, "score": -2, "last_activity_date": 1466689304, "creation_date": 1466589107, "last_edit_date": 1466591048, "question_id": 37964472, "link": "https://stackoverflow.com/questions/37964472/loop-iterating-only-through-half-of-the-elements", "title": "Loop iterating only through half of the elements", "body": "<p>Here is my code. My question is, why does it keep printing only 5 numbers? Why won't it print 10 like it's supposed to?</p>\n\n<pre><code>   #include&lt;stdio.h&gt;\n   #include&lt;stdlib.h&gt;\n   #include&lt;time.h&gt;\n\n   int main(){\n\n   int r, col;\n\n   srand((unsigned)time(NULL));\n\n   for (col=1; col&lt;=10; col++){\n\n   r = rand() % 11;\n   printf(\"%d\\n\", r);\n   col++;\n\n   }\n  return 0;\n  }\n</code></pre>\n"}, {"tags": ["c", "sorting", "quicksort"], "comments": [{"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 2, "creation_date": 1466588756, "post_id": 37964257, "comment_id": 63375167, "body": "Wrong answer means -1, is it? Or 42?"}, {"owner": {"reputation": 1692, "user_id": 3567987, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/76baf53b56d492314d02f39fc4da878e?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/3567987/thomas"}, "edited": false, "score": 0, "creation_date": 1466589657, "post_id": 37964257, "comment_id": 63375825, "body": "btw: quicksort is an inplace algorithm, so you can let it run on your array you don&#39;t need to copy everything"}, {"owner": {"reputation": 13, "user_id": 6498417, "user_type": "registered", "profile_image": "https://graph.facebook.com/1102605796464939/picture?type=large", "display_name": "Ashutosh Jha", "link": "https://stackoverflow.com/users/6498417/ashutosh-jha"}, "edited": false, "score": 0, "creation_date": 1466590932, "post_id": 37964257, "comment_id": 63376606, "body": "I uploaded the wrong code earlier. I am so so sorry."}, {"owner": {"reputation": 13, "user_id": 6498417, "user_type": "registered", "profile_image": "https://graph.facebook.com/1102605796464939/picture?type=large", "display_name": "Ashutosh Jha", "link": "https://stackoverflow.com/users/6498417/ashutosh-jha"}, "edited": false, "score": 0, "creation_date": 1466590955, "post_id": 37964257, "comment_id": 63376626, "body": "Please look at the present version of the code and see if you can find any mistakes"}], "answers": [{"tags": [], "owner": {"reputation": 1692, "user_id": 3567987, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/76baf53b56d492314d02f39fc4da878e?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/3567987/thomas"}, "is_accepted": true, "score": 0, "last_activity_date": 1466593624, "last_edit_date": 1466593624, "creation_date": 1466589262, "answer_id": 37964543, "question_id": 37964257, "link": "https://stackoverflow.com/questions/37964257/counting-comparisions-in-quicksort-wrong-answer/37964543#37964543", "title": "Counting Comparisions in Quicksort: Wrong answer", "body": "<p>this part is wrong:</p>\n\n<pre><code>for(k=begin+1;k&lt;=end;k++)\n{\n    if(A[k]&gt;A[pivot])\n    {\n        x++;\n        B[j]=A[k];\n        j--;\n    }\n    else\n    {\n        x++;\n        B[i]=A[k];\n        i++;\n    }\n}\n</code></pre>\n\n<p>you don't have to go from begin till end. you only should go from begin till i>j.</p>\n\n<p>see link: <a href=\"https://en.wikipedia.org/wiki/Quicksort\" rel=\"nofollow\">https://en.wikipedia.org/wiki/Quicksort</a></p>\n\n<p>there the interesting lines are:</p>\n\n<pre><code>do\n    i := i + 1\nwhile A[i] &lt; pivot\ndo\n    j := j \u2013 1\nwhile A[j] &gt; pivot\nif i &gt;= j then\n    return j\nswap A[i] with A[j]\n</code></pre>\n\n<p><strong>c / c++</strong></p>\n\n<pre><code>i = begin;\nj = end;\nwhile(true)\n{\n    while(i&lt; end &amp;&amp; A[i] &lt; A[pivot])\n    {\n        i++;\n    }\n    while(j&gt; begin &amp;&amp; A[j] &gt;= A[pivot])\n    {\n        j--;\n    }\n    if(i&lt;j)\n    {\n        int temp = A[i]; //std::swap(A[i],A[j]);\n        A[i] = A[j];\n        A[j] = temp;\n    else\n    {\n       break;\n    }\n}\n</code></pre>\n\n<p>In this code I don't use B because quicksort is an \"inplace\" algorithm and because of that we don't need to save the result into a different array</p>\n"}], "owner": {"reputation": 13, "user_id": 6498417, "user_type": "registered", "profile_image": "https://graph.facebook.com/1102605796464939/picture?type=large", "display_name": "Ashutosh Jha", "link": "https://stackoverflow.com/users/6498417/ashutosh-jha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 37964543, "answer_count": 1, "score": 0, "last_activity_date": 1466596773, "creation_date": 1466588589, "last_edit_date": 1466596773, "question_id": 37964257, "link": "https://stackoverflow.com/questions/37964257/counting-comparisions-in-quicksort-wrong-answer", "title": "Counting Comparisions in Quicksort: Wrong answer", "body": "<p>I have written code to compute the number of comparisons done in QuickSort.</p>\n\n<p>The algorithm increases the count of comparisons by m-1 whenever a quicksort is performed on an array of length m (Since pivot will be compared with everything other than itself).</p>\n\n<p>The choice of the pivot is always the first element of the array.</p>\n\n<p>When I try to use it on an array of 10000 entries, it is giving me a wrong answer.</p>\n\n<p>A correct answer is supposed to be <strong>162085</strong>.</p>\n\n<p>The link to the dataset is given below:\n<a href=\"https://drive.google.com/file/d/0B0D_kFnzj_RrYm9NT0lrM3JfN2c/view?usp=sharing\" rel=\"nofollow\">https://drive.google.com/file/d/0B0D_kFnzj_RrYm9NT0lrM3JfN2c/view?usp=sharing</a></p>\n\n<p>The total comparisons are stored in x.</p>\n\n<pre><code> #include&lt;stdio.h&gt;\n  long long x=0;\n  int size=10000;\n  int A[10000];\n  int B[10000];\n\n  void quicksort(int A[],int begin,int end)\n  {\n  if(begin&lt;end){\n  int i=begin;\n  int j=end;\n  int k;\n  int pivot=begin;\n\n  for(k=begin+1;k&lt;=end;k++)\n  {\n  if(A[k]&gt;A[pivot])\n  {\n  x++;\n  B[j]=A[k];\n  j--;\n  }\n  else\n  {\n  x++;\n  B[i]=A[k];\n  i++;\n  }\n  }\n\n  B[i]=A[pivot];\n\n  for(k=begin;k&lt;=end;k++)\n  {\n  A[k]=B[k];\n  }\n\n  quicksort(A,begin,i-1);\n  quicksort(A,i+1,end);\n  }\n  else\n  {\n  if((end-begin)==1) x++;\n  }\n  }\n\n  int main()\n  {\n\n  FILE *myFile;\n  myFile = fopen(\"QuickSort.txt\", \"r\");\n\n\n  int i;\n  for (i = 0; i &lt; 10000; i++)\n  {\n  fscanf(myFile, \"%d\", &amp;A[i]);\n  }\n\n  quicksort(A,0,size-1);\n\n  for(i=0;i&lt;size;i++)\n  {\n  printf(\"%d\\n\",A[i]);\n  }\n\n  printf(\"%lld\",x);\n  }\n</code></pre>\n"}, {"tags": ["c", "linux", "unix", "sungridengine"], "comments": [{"owner": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "edited": false, "score": 2, "creation_date": 1466591162, "post_id": 37963985, "comment_id": 63376763, "body": "I don&#39;t think it&#39;s possible with <code>qstat</code>. Never done but perhaps you can try with a shell script that runs <code>ssh &lt;nodes&gt; ps  -fp &lt;pid&gt;</code> on the nodes on which your job is running. (Actually I never thought that it was possible to monitor the state of a process via argv)"}, {"owner": {"reputation": 2408, "user_id": 704265, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6509f143119b40d9e09eedd49903866b?s=128&d=identicon&r=PG", "display_name": "Finch_Powers", "link": "https://stackoverflow.com/users/704265/finch-powers"}, "edited": false, "score": 1, "creation_date": 1466608793, "post_id": 37963985, "comment_id": 63390599, "body": "I would give it a shot with qrsh instead of qsub since the former is interactive. Even then I don&#39;t expect it to work as it&#39;s unlikely the job executor pings back its caller to update the arguments it was given."}], "owner": {"reputation": 175, "user_id": 6327836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b03070f09af2e7c6037bd4ae7f0caf9?s=128&d=identicon&r=PG", "display_name": "cmmnn", "link": "https://stackoverflow.com/users/6327836/cmmnn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1466587922, "creation_date": 1466587922, "question_id": 37963985, "link": "https://stackoverflow.com/questions/37963985/showing-content-of-argv1-when-submitting-job-with-sge", "title": "Showing content of argv[1] when submitting job with SGE", "body": "<p>Running a program locally I often write a short info about the program state into <code>argv[1]</code> (i.e.: 15/100) to estimate how long my program will keep running.\nI can then observe the content of <code>argv[1]</code> via <code>top -c</code></p>\n\n<p>Is there an equivalent tool to see the content of <code>argv[1]</code> when submitting a job via <code>qsub</code>?\nI did not find an option for <code>qstat</code>, that does what I want.</p>\n"}, {"tags": ["c", "c-preprocessor", "header-files"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6252578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38c6628a9f66b2edb894c46ce7ea9652?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/6252578/thomas"}, "edited": false, "score": 0, "creation_date": 1466595248, "post_id": 37966103, "comment_id": 63379424, "body": "Yes, you could add all c.-files into one, but these are more clearly why they are divided into parts. It makes it all more organised. Although the header files, are not in my opinion not a good organised system in the code. Generally the code itself is also quite messy. There are directives like #define inside the .c-file for example. As well as many variables..."}], "tags": [], "owner": {"reputation": 87, "user_id": 6386218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad0d3cb9b60dbbbf6ebfaad936fbcdb0?s=128&d=identicon&r=PG&f=1", "display_name": "Beka", "link": "https://stackoverflow.com/users/6386218/beka"}, "is_accepted": false, "score": 1, "last_activity_date": 1466593351, "creation_date": 1466593351, "answer_id": 37966103, "question_id": 37963795, "link": "https://stackoverflow.com/questions/37963795/can-i-use-only-one-header-for-a-bigger-application/37966103#37966103", "title": "Can I use only one header for a bigger application?", "body": "<p>Don't think that this is good idea.</p>\n\n<p>You also can combine all 60 <code>.c</code> files into one file. But, there are a lot of reasons of this source and header files structure. You should make try to understand the project structure.</p>\n"}, {"tags": [], "owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "is_accepted": false, "score": 0, "last_activity_date": 1466597318, "creation_date": 1466597318, "answer_id": 37967599, "question_id": 37963795, "link": "https://stackoverflow.com/questions/37963795/can-i-use-only-one-header-for-a-bigger-application/37967599#37967599", "title": "Can I use only one header for a bigger application?", "body": "<blockquote>\n  <p>Are there any down sides doing thing this way?</p>\n</blockquote>\n\n<p>Compilation time may increase, especially if the resulting monolithic header file is large.</p>\n\n<p>Also, there is a small risk of name collisions. A header might declare some function, and one of the source files (which doesn't currently include that header) might have a <code>static</code> function with the same name - this will cause a compilation problem. Similarly a source file might define a type for internal use, with a name of a type that is defined differently in a header file.</p>\n"}, {"tags": [], "owner": {"reputation": 781, "user_id": 1016246, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2659baeac9812530ec2e1160f29b29aa?s=128&d=identicon&r=PG", "display_name": "Illishar", "link": "https://stackoverflow.com/users/1016246/illishar"}, "is_accepted": false, "score": 1, "last_activity_date": 1466673587, "creation_date": 1466673587, "answer_id": 37987331, "question_id": 37963795, "link": "https://stackoverflow.com/questions/37963795/can-i-use-only-one-header-for-a-bigger-application/37987331#37987331", "title": "Can I use only one header for a bigger application?", "body": "<p>Well written c code, is arranged like a pyramid, with the main file in the top. Dependencies (function calls, enums, consts, etc.) will run downward in the pyramid. Never upward. This will help you maintain, extend and test your code in the future. </p>\n\n<p>If you collapse all your header files, you'll also collapse the pyramid. You might as well, collapse the c-files as well then.</p>\n\n<p>Header files are (generally) meant for the exposed parts of a given module. Eg. these will contain \"public functions\", \"public consts\" etc. Code like \"private consts\", \"private macros\" etc. are better kept in the c-file. This is why your c-files contains \"#defines\".</p>\n\n<p>To me your code sounds like well written code. Eg. headers for each file (pyramid possible), small headers containing only exposed code. </p>\n\n<p>Be careful that you don't destroy more than you add.</p>\n"}], "owner": {"reputation": 1, "user_id": 6252578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38c6628a9f66b2edb894c46ce7ea9652?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/6252578/thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1466673587, "creation_date": 1466587418, "last_edit_date": 1466591165, "question_id": 37963795, "link": "https://stackoverflow.com/questions/37963795/can-i-use-only-one-header-for-a-bigger-application", "title": "Can I use only one header for a bigger application?", "body": "<p>I am a newbie, and got access to a quite complex source code created by a team from the 90s who were all experienced and worked much together. The source code consists of about 60 different <code>.c</code> files which include even more header files, and most of these consist of only a few lines of code. One included file defines the <code>main</code> function in on of the header, while the others consist of directives like <code>#define</code>, <code>#include</code>, <code>#if</code> (<code>#endif</code>), <code>#else</code>, <code>#undef</code>, <code>#pragma</code> etc. At well as some structures (<code>struct</code>). Also you find an <code>enum</code> (which is more or less the same as a <code>#define</code>), <code>const</code> and some variables like <code>char</code>, <code>int</code>, <code>short</code>, <code>long</code>, <code>float</code>, <code>double</code> etc.</p>\n\n<p>None of these will be used unless the <code>.c</code> files actually need them. As most of the <code>.c</code> files include many of these header files, it is hard to keep track of them. My idea is to put all the header files together into one single header file I will call <code>Unihead.h</code>. In case I want to do any changes I have to check up to 15 different header files in order to find the issue. I cannot see the benefit of that many header files. As I know it is normal to have a header to each source file (like <code>Soccer.c</code> would have a header called <code>Soccer.h</code>). If I got one header file I can a simple search and find what I look for more effectively, making the process much smoother in my opinion. Are there any down sides doing thing this way? (I will add comments to keep track anyway too)</p>\n"}, {"tags": ["c", "struct", "printing", "insert", "linked-list"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1466585806, "post_id": 37963090, "comment_id": 63373024, "body": "<code>p-&gt;frame-&gt;name = namearray;</code> --&gt; <code>p-&gt;frame-&gt;name = strdup(namearray);</code> ditto."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1466585904, "post_id": 37963090, "comment_id": 63373095, "body": "...and <code>free</code> all dynamic allocated vars (<code>malloc</code>/<code>strdup</code> )"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1466586058, "post_id": 37963090, "comment_id": 63373214, "body": "also <code>struct Link* insert(struct Link *n3);</code> bad prototype."}, {"owner": {"reputation": 23, "user_id": 5798202, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f098e65e8e1e88e034008000cc3ad65d?s=128&d=identicon&r=PG&f=1", "display_name": "danielwinzard", "link": "https://stackoverflow.com/users/5798202/danielwinzard"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1466586151, "post_id": 37963090, "comment_id": 63373285, "body": "@BLUEPIXY        i tried and it showed me a error :Error\t4\terror C4996: &#39;strdup&#39;: The POSIX name for this item is deprecated. Instead, use the ISO C++ conformant name: _strdup. See online help for details.\tc:\\users\\user\\documents\\visual studio 2013\\projects\\projecterino\\projecterino\\01.c\t74\t1\tprojecteri&zwnj;&#8203;no"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1466586305, "post_id": 37963090, "comment_id": 63373405, "body": "<code>char *strdup(const char *str){ char *dup = malloc(strlen(str)+1); if(dup)  strcpy(dup, str);  return dup;}</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1466586374, "post_id": 37963090, "comment_id": 63373460, "body": "also <code>head = (*head)-&gt;next;</code> and <code>return 1;</code>(void function)  are wrong."}, {"owner": {"reputation": 23, "user_id": 5798202, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f098e65e8e1e88e034008000cc3ad65d?s=128&d=identicon&r=PG&f=1", "display_name": "danielwinzard", "link": "https://stackoverflow.com/users/5798202/danielwinzard"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1466586536, "post_id": 37963090, "comment_id": 63373570, "body": "@BLUEPIXY ty its working"}], "owner": {"reputation": 23, "user_id": 5798202, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f098e65e8e1e88e034008000cc3ad65d?s=128&d=identicon&r=PG&f=1", "display_name": "danielwinzard", "link": "https://stackoverflow.com/users/5798202/danielwinzard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1039, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1466585642, "creation_date": 1466585642, "question_id": 37963090, "link": "https://stackoverflow.com/questions/37963090/printing-the-nodes-in-linked-list-in-c", "title": "printing the nodes in linked list in c", "body": "<p>here is  a program which  inserting 2 names 2 paths and 2 duration s into linked list (struct of linked lists) , printing them and swapping between them when the duration of the first node is 8. \nbut when the program printing the nodes its prints from all of the nodes the name and the path of the last node \nplease help me </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nstruct Frame\n{\n    char            *name;\n    unsigned int    duration;\n    char            *path;  // may change to FILE*\n}*n3;\n\ntypedef struct Frame frame_t;\n\nstruct Link\n{\n    frame_t *frame;\n    struct Link *next;\n}*n ;\n\ntypedef struct Link link_t;\n\nstruct Link* insert(struct Link *n3);\nvoid print(struct Link* head, int flag);\nvoid swap(struct Link **head, int value);\n\n#define MAX_PATH_SIZE (256)\n#define MAX_NAME_SIZE (50)\n\nint main()\n{\n    struct Link* head = NULL;\n    int flag = 0;\n    int num = 0;\n    char namearray[MAX_NAME_SIZE] = { 0 };\n    char patharray[MAX_PATH_SIZE] = { 0 };\n    printf(\"1\\n\");\n    printf(\"\\n\");\n    for (int i = 0; i &lt; 2; i++)\n    {\n        printf(\"Enter a number you want to insert - \");\n        scanf(\"%d\", &amp;num);\n        printf(\"\\nEnter the name -  \");\n        scanf(\"%s\", &amp;namearray);\n        printf(\"\\nEnter the path - \");\n        scanf(\"%s\", &amp;patharray);\n        printf(\"\\n\");\n        head = insert(head,num,namearray,patharray);\n    }\n    print(head, flag);\n    swap(&amp;head, 8);\n\n\n    printf(\"1\\n\");\n    system(\"pause\");\n    return 0;\n}\n\nstruct Link *insert(struct Link *p, int n, char namearray[MAX_NAME_SIZE], char patharray[MAX_PATH_SIZE]) //insert func\n{\n    struct node *temp;\n    if (p == NULL) //if the node is empty\n    {\n        p = (struct Link *)malloc(sizeof(struct Link)); //gives memory to the node\n        p-&gt;frame = (struct Frame *)malloc(sizeof(struct Frame));\n        if (p == NULL)\n        {\n            printf(\"Error\\n\");\n        }\n        else\n        {\n            printf(\"The number added to the end of the list\\n\");\n        }\n        p-&gt;frame-&gt;duration = n; //its runing untill the node item is NULL\n        p-&gt;frame-&gt;name = namearray;\n        p-&gt;frame-&gt;path = patharray;\n        p-&gt;next = NULL;\n    }\n    else\n    {\n        p-&gt;next = insert(p-&gt;next, n , namearray , patharray);/* the while loop replaced by\n                                     recursive call */\n    }\n    return (p);\n}\n\nvoid print(struct Link* head , int flag)//print func\n{\n    if (head == NULL &amp;&amp; flag == 0) //if the node is empty\n    {\n        printf(\"The list is empty\\n\");\n        return 1;\n    }\n    if (head == NULL &amp;&amp; flag != 0) //if the node isnt empty but we are in the NULL (last) item of the node\n    {\n        printf(\"\\n\");\n        printf(\"the nodes of the list printed\\n\");\n        return;\n    }\n    printf(\"%d  \", head-&gt;frame-&gt;duration);//prints the currect item\n    printf(\"\\n\");\n    printf(\"%s  \", head-&gt;frame-&gt;name);//prints the currect item\n    printf(\"\\n\");\n    printf(\"%s  \", head-&gt;frame-&gt;path);//prints the currect item\n    printf(\"\\n\");\n    print(head-&gt;next, ++flag);//calls the func recursevly\n    return 1;\n}\n\nvoid swap(struct Link **head, int value)\n{\n    while (*head &amp;&amp; (*head)-&gt;frame-&gt;duration != value)\n    {\n        head = (*head)-&gt;next;\n    }\n\n    if (*head &amp;&amp; (*head)-&gt;next)\n    {\n        struct list *next = (*head)-&gt;next-&gt;next;\n        (*head)-&gt;next-&gt;next = *head;\n        *head = (*head)-&gt;next;\n        (*head)-&gt;next-&gt;next = next;\n    }\n}\n</code></pre>\n\n<p>here is the print : \n<a href=\"http://i.stack.imgur.com/tRl9Q.png\" rel=\"nofollow\">the print of the program</a></p>\n"}, {"tags": ["c", "azure", "cross-compiling", "beagleboneblack", "azure-iot-hub"], "comments": [{"owner": {"reputation": 1080, "user_id": 2703418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74877cfa0bb308d11f165a771a773ef0?s=128&d=identicon&r=PG&f=1", "display_name": "bzeaman", "link": "https://stackoverflow.com/users/2703418/bzeaman"}, "edited": false, "score": 0, "creation_date": 1466582472, "post_id": 37961900, "comment_id": 63370971, "body": "These errors are run-time, right? I&#39;ve come across these errors too and for me it meant what it said: it couldn&#39;t verify the SSL certificate. I&#39;m not sure if you can reach these services through a browser like Chrome, but if you can, you can check if Chrome gives you the same warning about the certificate."}, {"owner": {"reputation": 1080, "user_id": 2703418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74877cfa0bb308d11f165a771a773ef0?s=128&d=identicon&r=PG&f=1", "display_name": "bzeaman", "link": "https://stackoverflow.com/users/2703418/bzeaman"}, "edited": false, "score": 0, "creation_date": 1466582530, "post_id": 37961900, "comment_id": 63371005, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/17084886/ssl-error-routinesssl3-get-server-certificatecertificate-verify-failed\">SSL error : routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed</a>"}, {"owner": {"reputation": 111, "user_id": 6319705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b4a6331e5e763512cd38ad2d8336eca?s=128&d=identicon&r=PG&f=1", "display_name": "Manoj", "link": "https://stackoverflow.com/users/6319705/manoj"}, "reply_to_user": {"reputation": 1080, "user_id": 2703418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74877cfa0bb308d11f165a771a773ef0?s=128&d=identicon&r=PG&f=1", "display_name": "bzeaman", "link": "https://stackoverflow.com/users/2703418/bzeaman"}, "edited": false, "score": 0, "creation_date": 1466589723, "post_id": 37961900, "comment_id": 63375873, "body": "@bzeaman Yup. the errors are during runtime. I can&#39;t reach these services from browser as this is an MQTT broker over TCP. But i validated the same code built on ubuntu with gcc, and successfully connected to Azure.  And for my question suspected as duplicate see my post edit, and that link doesn&#39;t answer my problem."}], "answers": [{"tags": [], "owner": {"reputation": 111, "user_id": 6319705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b4a6331e5e763512cd38ad2d8336eca?s=128&d=identicon&r=PG&f=1", "display_name": "Manoj", "link": "https://stackoverflow.com/users/6319705/manoj"}, "is_accepted": false, "score": 0, "last_activity_date": 1467106626, "creation_date": 1467106626, "answer_id": 38072481, "question_id": 37961900, "link": "https://stackoverflow.com/questions/37961900/paho-mqtt-c-client-connection-with-azure-iot-hub-on-beaglebone-black/38072481#38072481", "title": "Paho MQTT C Client connection with azure IoT-Hub on Beaglebone Black", "body": "<p>I resolved the issue.<br>\nI obtained the server certificate from command line in .crt format and saved to /usr/local/share/ca-certificates/ folder.  </p>\n\n<pre><code>openssl s_client -showcerts -connect server.edu:443 &lt;/dev/null 2&gt;/dev/null|openssl x509 -outform DER &gt;mycertfile.crt \n</code></pre>\n\n<p>Then I updated the trust store certificates to add the above downloaded certificate,  </p>\n\n<pre><code>update-ca-certificates\n</code></pre>\n\n<p>After updating i refered the ca-certificates file in my code,  </p>\n\n<pre><code>conn_opts.ssl-&gt;trustStore = \"/etc/ssl/certs/ca-certificates.crt\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 288, "user_id": 8876218, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-l6Yf2GsEdyo/AAAAAAAAAAI/AAAAAAAAAAw/_4lZB5uyM0s/photo.jpg?sz=128", "display_name": "Yi Zhong - MSFT", "link": "https://stackoverflow.com/users/8876218/yi-zhong-msft"}, "is_accepted": false, "score": 1, "last_activity_date": 1512069423, "creation_date": 1512069423, "answer_id": 47581027, "question_id": 37961900, "link": "https://stackoverflow.com/questions/37961900/paho-mqtt-c-client-connection-with-azure-iot-hub-on-beaglebone-black/47581027#47581027", "title": "Paho MQTT C Client connection with azure IoT-Hub on Beaglebone Black", "body": "<p>Have you considered using Azure IoT SDKs for connection to IoT Hub?  Debian is supported out-of-box and complexity with establishing the connection is abstracted.  You can read this <a href=\"https://azure.microsoft.com/en-us/blog/benefits-of-using-the-azure-iot-sdks-in-your-azure-iot-solution/\" rel=\"nofollow noreferrer\">blog</a> for the benefits of using the SDKs.</p>\n"}], "owner": {"reputation": 111, "user_id": 6319705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b4a6331e5e763512cd38ad2d8336eca?s=128&d=identicon&r=PG&f=1", "display_name": "Manoj", "link": "https://stackoverflow.com/users/6319705/manoj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1610, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1512069423, "creation_date": 1466582242, "last_edit_date": 1495535348, "question_id": 37961900, "link": "https://stackoverflow.com/questions/37961900/paho-mqtt-c-client-connection-with-azure-iot-hub-on-beaglebone-black", "title": "Paho MQTT C Client connection with azure IoT-Hub on Beaglebone Black", "body": "<p>I am trying to connect with Azure IoT-Hub with MQTT and send and receive messages using Paho C Client from Beaglebone black (OS: Debian Wheezy). I'm using eclipse CDT on Ubuntu machine to develop my application and deploy/debug remotely.</p>\n\n<p>When i run the application on my native ubuntu machine (Compiled with gcc), Azure connection is success and i'm able to send packets.</p>\n\n<p>I crosscompiled the OPENSSL as specified <a href=\"https://how-to-build-for-arm.wikispaces.com/openssl\" rel=\"nofollow noreferrer\">here</a> and copied the appropriate directories in \"/usr/arm-linux-gnueabihf\" folder. But when I compile with arm-linux-gnueabihf-gcc-4.7 and remote debug on my beaglebone black (With gdb-multiarch) i'm getting the following error in my output console:</p>\n\n<pre><code>3068126320:error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed:s3_clnt.c:1185:\n3068126320:error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed:s3_clnt.c:1185:\nFailed to connect, return code -1\n</code></pre>\n\n<p>Please help me to resolve this issue.Thanks.  </p>\n\n<p><strong>Edit: Suspected link - Reg:</strong> The error in the suspected duplicate <a href=\"https://stackoverflow.com/questions/17084886/ssl-error-routinesssl3-get-server-certificatecertificate-verify-failed\">link</a> is same, but the OPENSSL error there is due to expired certificate. But in my case its during MQTT connection with azure &amp; BBB. And moreover there is no answer for my question in that link. As per that link there is no point in disabling the certificate verification when we opt for SSL/TLS secured connection.  </p>\n\n<p>My code:</p>\n\n<pre><code>#include \"stdio.h\"\n#include \"stdlib.h\"\n#include \"string.h\"\n#include \"MQTTClient.h\"\n#define PAYLOAD     \"Hello World!\"\n#define QOS         1\n#define TIMEOUT     10000L\n#define TOPIC1       \"devices/Manoj_Test/messages/events/\"\n#define ADDRESS     \"ssl://xxxxxxxx.azure-devices.net:8883\"\n#define CLIENTID1    \"Manoj_Test\"\n\nint main(void)\n{\nMQTTClient client;\nMQTTClient_connectOptions conn_opts = MQTTClient_connectOptions_initializer;\nMQTTClient_message pubmsg = MQTTClient_message_initializer;\nMQTTClient_deliveryToken token;\nint rc1;\n\nMQTTClient_create(&amp;client, ADDRESS, CLIENTID1, 1, NULL);\nconn_opts.cleansession = 1;\nconn_opts.username = \"xxxxxxxx.azure-devices.net/Manoj_Test\";\nconn_opts.password = \"SharedAccessSignature sr=xxxxxxxx.azure-devices.net%2fdevices%2fManoj_Test&amp;sig=GyizT%2b7uyIpOkMJjTfN%2fpOZh9CnuQedNB%2bre2NrL1Kg%3d&amp;se=1496395529\";\n\n\n MQTTClient_setCallbacks(client, NULL, connlost, msgarrvd, delivered);\n\n\nif ((rc1 = MQTTClient_connect(client, &amp;conn_opts)) != MQTTCLIENT_SUCCESS)\n{\n    printf(\"Failed to connect, return code %d\\n\", rc1);\n    exit(-1);\n}\n\nMQTTClient_subscribe(client, TOPIC, QOS);\nwhile(1)\n{\n    pubmsg.payload = PAYLOAD;\n    pubmsg.payloadlen = strlen(PAYLOAD);\n    pubmsg.qos = 1;\n    pubmsg.retained = 0;\n    MQTTClient_publishMessage(client, TOPIC1, &amp;pubmsg, &amp;token);\n    printf(\"Waiting for up to %d seconds for publication of %s\\non topic %s for client with ClientID: %s\\n\", (int)(TIMEOUT/1000), PAYLOAD, TOPIC1, CLIENTID1);\n    rc1 = MQTTClient_waitForCompletion(client, token, TIMEOUT);\n    printf(\"Message with delivery token %d delivered\\n\", token);\n    usleep(100000);\n}\nMQTTClient_disconnect(client, 10000);\nMQTTClient_destroy(&amp;client);\nreturn rc1;\n}\n</code></pre>\n"}, {"tags": ["html", "c", "linux", "image", "http"], "comments": [{"owner": {"reputation": 30796, "user_id": 1145666, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/rXvMA.jpg?s=128&g=1", "display_name": "Bart Friederichs", "link": "https://stackoverflow.com/users/1145666/bart-friederichs"}, "edited": false, "score": 2, "creation_date": 1466582008, "post_id": 37961744, "comment_id": 63370696, "body": "What&#39;s the problem of a 512 byte header? I reckon your image data is way more than that."}, {"owner": {"reputation": 611, "user_id": 4003134, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8c6129c1b2c7851c62d6152fe4572d0a?s=128&d=identicon&r=PG&f=1", "display_name": "x y", "link": "https://stackoverflow.com/users/4003134/x-y"}, "reply_to_user": {"reputation": 30796, "user_id": 1145666, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/rXvMA.jpg?s=128&g=1", "display_name": "Bart Friederichs", "link": "https://stackoverflow.com/users/1145666/bart-friederichs"}, "edited": false, "score": 0, "creation_date": 1466582246, "post_id": 37961744, "comment_id": 63370834, "body": "Not really, image size varies from 16x16 up to 64x64"}], "answers": [{"comments": [{"owner": {"reputation": 611, "user_id": 4003134, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8c6129c1b2c7851c62d6152fe4572d0a?s=128&d=identicon&r=PG&f=1", "display_name": "x y", "link": "https://stackoverflow.com/users/4003134/x-y"}, "edited": false, "score": 0, "creation_date": 1466583008, "post_id": 37961884, "comment_id": 63371279, "body": "That&#39;s it. I found <a href=\"http://stackoverflow.com/questions/11004868/creating-a-bmp-file-bitmap-in-c\">this code snippet</a> which solves my problem. Thank you for pointing me in the right direction."}], "tags": [], "owner": {"reputation": 1080, "user_id": 2703418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74877cfa0bb308d11f165a771a773ef0?s=128&d=identicon&r=PG&f=1", "display_name": "bzeaman", "link": "https://stackoverflow.com/users/2703418/bzeaman"}, "is_accepted": true, "score": 3, "last_activity_date": 1466582203, "creation_date": 1466582203, "answer_id": 37961884, "question_id": 37961744, "link": "https://stackoverflow.com/questions/37961744/how-to-display-a-raw-rgb-image-in-html/37961884#37961884", "title": "How to display a raw rgb image in HTML", "body": "<p>I would recommend using the <a href=\"https://en.wikipedia.org/wiki/BMP_file_format\" rel=\"nofollow\">BMP format</a>. As far as I can tell it adds a header of something like 50 bytes.</p>\n\n<p>The BMP format is simple too, it just exists of plain pixel data in the format you want. If you're concerned about the header size of the file, you're not going to get much less than BMP.</p>\n"}], "owner": {"reputation": 611, "user_id": 4003134, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8c6129c1b2c7851c62d6152fe4572d0a?s=128&d=identicon&r=PG&f=1", "display_name": "x y", "link": "https://stackoverflow.com/users/4003134/x-y"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1643, "favorite_count": 0, "accepted_answer_id": 37961884, "answer_count": 1, "score": 3, "last_activity_date": 1466582203, "creation_date": 1466581772, "question_id": 37961744, "link": "https://stackoverflow.com/questions/37961744/how-to-display-a-raw-rgb-image-in-html", "title": "How to display a raw rgb image in HTML", "body": "<p>I have a small C based camera app on Linux with a built-in microhttpd webserver that provides captured jpegs to webclients. </p>\n\n<p>That works well, as the camera does jpg encoding, but as a further option, I need to alter image pixels at server side. So over another camera interface I get the 3 channel rbg image buffer and the question is, which image format do I need in order to display that pixeldata as an image in HTML using e.g. </p>\n\n<pre><code>&lt;img src=\"/pixeldata\"/&gt;\n</code></pre>\n\n<p>? I prefer not to use an overbloated image lib to create a png or similar, so my 1st idea was to use</p>\n\n<pre><code>Content-Type: image/rgb\n</code></pre>\n\n<p>, which is the SGI rgb image format, but as I found out, it adds a 512! byte header just to essentially tell image width, height, number of channels... So my challenge is:</p>\n\n<ul>\n<li>how to wrap the raw pixel data into a simple image header</li>\n<li>preferably in plain C, without adding a large image lib to my camera project</li>\n<li>to make it displayable in HTML on firefox, crome, ie ..</li>\n</ul>\n\n<p>Thanks </p>\n"}, {"tags": ["c", "r", "dll", "fortran", "load"], "comments": [{"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1466580543, "post_id": 37961219, "comment_id": 63369766, "body": "You may be missing a <code>&quot;</code> in your call. Try <code>dyn.load(&quot;2dll.dll&quot;)</code>"}, {"owner": {"reputation": 89, "user_id": 4693828, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/138e12d3d8474c900c4d6eb3b52f3632?s=128&d=identicon&r=PG&f=1", "display_name": "Smrow", "link": "https://stackoverflow.com/users/4693828/smrow"}, "reply_to_user": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1467189204, "post_id": 37961219, "comment_id": 63623619, "body": "Finally got it to work, by deleting all Definitions and make the code as simple as possible."}], "answers": [{"tags": [], "owner": {"reputation": 58770, "user_id": 4891738, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kE2lh.jpg?s=128&g=1", "display_name": "\u674e\u54f2\u6e90", "link": "https://stackoverflow.com/users/4891738/%e6%9d%8e%e5%93%b2%e6%ba%90"}, "is_accepted": true, "score": 3, "last_activity_date": 1466588274, "last_edit_date": 1495541373, "creation_date": 1466582164, "answer_id": 37961867, "question_id": 37961219, "link": "https://stackoverflow.com/questions/37961219/c-returns-me-an-empty-list/37961867#37961867", "title": ".C() returns me an empty list", "body": "<p>Why did not you pass any arguments to your C function <code>dll_function</code>? When you use <code>.C()</code>, you have to pass function arguments as a list. <code>.C()</code> will return modified list. So, If you pass in nothing, you get nothing.</p>\n\n<p>What does your C function <code>dll_function</code> looks like? Note that:</p>\n\n<ol>\n<li><code>dll_function</code> must be a <code>void</code> C function, with no return values. If this function should return something, it must return by modifying function arguments;</li>\n<li>all function arguments of <code>dll_function</code> must be pointers.</li>\n</ol>\n\n<hr>\n\n<p><strong>Follow-up</strong></p>\n\n<blockquote>\n  <p>The dll_function is only to test if I can get access to it.</p>\n</blockquote>\n\n<p>You can use <code>is.loaded()</code> after <code>dyn.load()</code> to test whether you have access to the C function:</p>\n\n<pre><code>dyn.load(\"dll.dll\")\nis.loaded(\"dll_function\")  ## TRUE\n</code></pre>\n\n<p>Note that, <code>is.loaded</code> takes C function name, while <code>dyn.load()</code> takes <code>.dll</code> name. In general you can have multiple functions in a single <code>.dll</code> file. You can use <code>is.loaded()</code> to check either of them, to test whether shared library has been loaded successfully.</p>\n\n<blockquote>\n  <p>So if I want it to return something, I should give it an argument (of same type?)?</p>\n</blockquote>\n\n<p>Yes. The other answer here does give a toy example. You can have a look at <a href=\"https://stackoverflow.com/a/37655028/4891738\">this answer</a> I made half a month ago. At the bottom there is a summary of variable type.</p>\n"}, {"comments": [{"owner": {"reputation": 7333, "user_id": 2032478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/627342e0ca0cf27489b54a97a1100744?s=128&d=identicon&r=PG", "display_name": "Jan van der Laan", "link": "https://stackoverflow.com/users/2032478/jan-van-der-laan"}, "reply_to_user": {"reputation": 58770, "user_id": 4891738, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kE2lh.jpg?s=128&g=1", "display_name": "\u674e\u54f2\u6e90", "link": "https://stackoverflow.com/users/4891738/%e6%9d%8e%e5%93%b2%e6%ba%90"}, "edited": false, "score": 0, "creation_date": 1466586265, "post_id": 37962846, "comment_id": 63373372, "body": "@ZheyuanLi Thought about adding it as an edit to your answer, but it seemed a bit too large for an edit."}], "tags": [], "owner": {"reputation": 7333, "user_id": 2032478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/627342e0ca0cf27489b54a97a1100744?s=128&d=identicon&r=PG", "display_name": "Jan van der Laan", "link": "https://stackoverflow.com/users/2032478/jan-van-der-laan"}, "is_accepted": false, "score": 0, "last_activity_date": 1466586312, "last_edit_date": 1466586312, "creation_date": 1466584996, "answer_id": 37962846, "question_id": 37961219, "link": "https://stackoverflow.com/questions/37961219/c-returns-me-an-empty-list/37962846#37962846", "title": ".C() returns me an empty list", "body": "<p>When using <code>.C</code>, the extra arguments passed to <code>.C</code> are copied and passed on as pointers to the called c-function. This function can then modify the data pointer to by the pointers. The return value of the function is ignored by <code>.C</code>. So, you c-function should look something like:</p>\n\n<pre><code>void dll_function(int* result) {\n  /* Do some complicated computation that results in 1955 */\n  (*result) = 1955;\n}\n</code></pre>\n\n<p>And your call from R:</p>\n\n<pre><code>.C(\"dll_function\", integer(1))\n</code></pre>\n\n<p>An example with input (this calculates the sum of an integer vector; this example assumes that there are no missing values in vector):</p>\n\n<pre><code>void dll_function2(int* result, int* vector, int* length) {\n  int sum = 0;\n  for (int i = 0; i &lt; (*length); ++i, ++vector) {\n    sum += (*vector)\n  }\n  (*result) = sum;\n}\n</code></pre>\n\n<p>Called from R:</p>\n\n<pre><code>x &lt;- c(1000, 900, 55)\n.C(\"dll_function2\", integer(1), as.integer(x), length(x))[[1]]\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 4693828, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/138e12d3d8474c900c4d6eb3b52f3632?s=128&d=identicon&r=PG&f=1", "display_name": "Smrow", "link": "https://stackoverflow.com/users/4693828/smrow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 290, "favorite_count": 0, "accepted_answer_id": 37961867, "answer_count": 2, "score": 0, "last_activity_date": 1467031053, "creation_date": 1466580321, "last_edit_date": 1467031053, "question_id": 37961219, "link": "https://stackoverflow.com/questions/37961219/c-returns-me-an-empty-list", "title": ".C() returns me an empty list", "body": "<p>I'm a beginner in R and I'm trying to load a <code>.dll</code> file, named <code>dll.dll</code>, that's written in C, into R. It seems to work, now I want to use the functions that are stored in the <code>.dll</code> file and I encounter problems. </p>\n\n<p>I've searched for a solution or other method in manuals, here and on google. Would be very thankful if I could get a suggestion of what to use or any idea! </p>\n\n<p>My code: </p>\n\n<pre><code>setwd(\"C:/Users/MyUser/R\")\ndyn.load(\"dll.dll\")\nis.loaded(\"DLL_FUNK\") \n# For some reason True with capital letters, not in lower case\noutput &lt;- .C(\"DLL_FUNK\", in9 = as.integer(7))\n#output # R Crashes before I can write this.\n# R Crashes\n# In outdata.txt: \"in-value=   139375128\"\n</code></pre>\n\n<p>The function should return a number, 1955. But I can't seem to get to that value. What am I doing wrong? </p>\n\n<p>Update with code (Fortran runned as C), this is the code in dll.dll: </p>\n\n<pre><code>subroutine  dll_funk(in9) \nimplicit none\n\n!+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\n!***      Declarations: variables, functions\n!+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\ninteger(4) :: in9\n!integer :: in9\n\n\n! Definitions of variables in the external function calls\n!!dec$ attributes c,alias :'dll_funk' :: dll_funk \n!dec$ attributes dllexport            :: dll_funk\n!dec$ attributes value                :: in9\n\nopen(194,file='outdata.txt')\nwrite(194,*) 'in-value=', in9\n! in9 = 1955\nclose(194)\n\nend subroutine\n!end function \n</code></pre>\n\n<p>So now when it runs, R crashes but before it writes to my file (outdata.txt) but it't not my number, maybe some kind of address...</p>\n\n<p>Another question, do you recommend me to run the code with .C and from C run the Fortran code or is it better to run it with .Fortran with only Fortran code? \nIt seems like .Fortran have problem handling strings, or that's what I understood from: <a href=\"https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Interface-functions-_002eC-and-_002eFortran\" rel=\"nofollow\">Interface func .C and .Fortran</a></p>\n"}, {"tags": ["c++", "c", "go", "gccgo"], "comments": [{"owner": {"reputation": 10492, "user_id": 603688, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1058344e1b119c4d9dd3aedc5456277b?s=128&d=identicon&r=PG", "display_name": "Dan", "link": "https://stackoverflow.com/users/603688/dan"}, "edited": false, "score": 1, "creation_date": 1466578311, "post_id": 37960425, "comment_id": 63368324, "body": "Most likely just for reusability. Almost every major library (not to mention OS) has a C binding, so having the ability to call C from your language is a big win for the language&#39;s adoption."}], "answers": [{"tags": [], "owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "is_accepted": false, "score": 1, "last_activity_date": 1466580768, "creation_date": 1466580768, "answer_id": 37961395, "question_id": 37960425, "link": "https://stackoverflow.com/questions/37960425/using-c-in-a-go-application-for-performance/37961395#37961395", "title": "Using C(++) in a Go application for performance", "body": "<p>Unless a C library does a lot of work in one call I wouldn't write C code just for performance. I consider cgo to only be for interfacing with old code.</p>\n\n<p>The reason is the cgo overhead. Currently function calls into cgo functions are <a href=\"https://github.com/art4711/cgo_overhead\" rel=\"nofollow\">between 50 and 100 times slower than function calls to Go code</a>. The overhead of cgo function calls is shocking.</p>\n"}, {"comments": [{"owner": {"reputation": 3895, "user_id": 3169754, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/sP8Pj.png?s=128&g=1", "display_name": "gavv", "link": "https://stackoverflow.com/users/3169754/gavv"}, "edited": false, "score": 0, "creation_date": 1466584272, "post_id": 37961486, "comment_id": 63372056, "body": "&quot;Go has to suspend its runtime in certain ways to call C functions&quot; -- is it documented/discussed somewhere? See also <a href=\"http://stackoverflow.com/a/37962500/3169754\">my answer</a> and <a href=\"https://groups.google.com/forum/#!topic/golang-nuts/RTtMsgZi88Q\" rel=\"nofollow noreferrer\">this thread</a>."}, {"owner": {"reputation": 3895, "user_id": 3169754, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/sP8Pj.png?s=128&g=1", "display_name": "gavv", "link": "https://stackoverflow.com/users/3169754/gavv"}, "edited": false, "score": 0, "creation_date": 1466584493, "post_id": 37961486, "comment_id": 63372194, "body": "I can&#39;t find any evidence that runtime is suspended. I&#39;m probably missing something."}, {"owner": {"reputation": 17491, "user_id": 901827, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/86a6acccf7e8dbe398ebda4f8524ed50?s=128&d=identicon&r=PG", "display_name": "LinearZoetrope", "link": "https://stackoverflow.com/users/901827/linearzoetrope"}, "reply_to_user": {"reputation": 3895, "user_id": 3169754, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/sP8Pj.png?s=128&g=1", "display_name": "gavv", "link": "https://stackoverflow.com/users/3169754/gavv"}, "edited": false, "score": 1, "creation_date": 1466584665, "post_id": 37961486, "comment_id": 63372293, "body": "@g-v It&#39;s one of those things that constantly in flux with new Go versions. I think Go used to have to outright pause the garbage collector and other things. It looks like nowadays it mostly has to record a ton of metadata to accommodate the different calling convention:  <a href=\"http://dave.cheney.net/2016/01/18/cgo-is-not-go\" rel=\"nofollow noreferrer\">dave.cheney.net/2016/01/18/cgo-is-not-go</a>  Also, it can&#39;t interrupt and reschedule the goroutine on another thread while it&#39;s in C code, which is absolute can and does do, often for performance reasons, in GO code."}, {"owner": {"reputation": 3895, "user_id": 3169754, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/sP8Pj.png?s=128&g=1", "display_name": "gavv", "link": "https://stackoverflow.com/users/3169754/gavv"}, "edited": false, "score": 0, "creation_date": 1466585187, "post_id": 37961486, "comment_id": 63372604, "body": "Thanks for the link. So there is a stack switch and inefficient data exchange, not a runtime suspension. Looks sensible."}, {"owner": {"reputation": 3895, "user_id": 3169754, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/sP8Pj.png?s=128&g=1", "display_name": "gavv", "link": "https://stackoverflow.com/users/3169754/gavv"}, "edited": false, "score": 0, "creation_date": 1466585274, "post_id": 37961486, "comment_id": 63372675, "body": "&quot;Also, it can&#39;t interrupt and reschedule the goroutine on another thread while it&#39;s in C code, which is absolute can and does do, often for performance reasons, in GO code&quot; - Yes, this is quite obvious."}, {"owner": {"reputation": 3895, "user_id": 3169754, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/sP8Pj.png?s=128&g=1", "display_name": "gavv", "link": "https://stackoverflow.com/users/3169754/gavv"}, "edited": false, "score": 1, "creation_date": 1466585897, "post_id": 37961486, "comment_id": 63373090, "body": "&quot;because you can write assembly that Go can use without suspending its runtime&quot; -- you probably would like to fix wording here too"}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1466618563, "post_id": 37961486, "comment_id": 63396757, "body": "@jsor: a cgo call takes an OS thread, which does not count against GOMAXPROCS, therefore doesn&#39;t block execution of any other goroutines. Besides the initial overhead of the stack switch in the cgo call, there is no performance penalty for executing C code."}], "tags": [], "owner": {"reputation": 17491, "user_id": 901827, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/86a6acccf7e8dbe398ebda4f8524ed50?s=128&d=identicon&r=PG", "display_name": "LinearZoetrope", "link": "https://stackoverflow.com/users/901827/linearzoetrope"}, "is_accepted": true, "score": 11, "last_activity_date": 1466591417, "last_edit_date": 1466591417, "creation_date": 1466581036, "answer_id": 37961486, "question_id": 37960425, "link": "https://stackoverflow.com/questions/37960425/using-c-in-a-go-application-for-performance/37961486#37961486", "title": "Using C(++) in a Go application for performance", "body": "<p>Cgo is fairly slow, because Go has to <a href=\"http://dave.cheney.net/2016/01/18/cgo-is-not-go\" rel=\"noreferrer\">mess with its runtime and calling conventions</a> in certain ways to call C functions. The only place it's really worth it is cases where the compute time significantly dwarfs <a href=\"https://github.com/art4711/cgo_overhead\" rel=\"noreferrer\">this cost</a>. It's similar to parallel, distributed, GPU and so on programming, albeit with slightly lower startup costs.</p>\n\n<p>Assembly is much better, because you can write assembly that uses Go's calling convention, and is otherwise treated like native Go code, but assembly is far less portable, harder to read, and more maintenance heavy. In fact, the Go standard library writes some of the <code>math</code> and <code>big</code> packages in Plan 9-style assembly.</p>\n\n<p><a href=\"https://github.com/gonum\" rel=\"noreferrer\">Gonum</a> is an example of both of these. It uses common assembly for some functions that can be done more quickly that way, but it also leverages blas and lapack engines. It does provide a <code>Go-blas</code> implementation, but C-blas (which is usually ultimately Fortran-blas) is faster, and for large matrix computations almost always dwarfs the cost of leaving Go.</p>\n\n<p>Generally, you want to avoid cgo when possible. Only use it when significant computation time is needed, <em>or</em> you need to interact with things that would be non-trivial to interact with in pure Go, such as graphics or audio drivers, or accessing common libraries like OpenCV. Even then, if you really care about performance, where possible it may be worth it to implement some sort of \"call pooling\" where you can schedule multiple calls from the Go side and execute them all at once with a single context switch to C.</p>\n\n<p>Edit: As for C++, there are some significant issues. It can be difficult to wrap certain libraries without several layers of abstraction (since cgo cannot handle included C++ headers properly). In addition, C++ classes with destructors can't really be returned by value and have to be allocated on the heap. Since Go doesn't allow for deterministic finalization of resources, you <strong>must</strong> provide a function to explicitly free memory, and the Go user must remember to free the resource. (There is a function you may read about in the documentation called <code>runtime.SetFinalizer</code> but I can't say I've ever seen anyone use it, and the documentation itself comes with a bunch of caveats)</p>\n\n<p>Functionality such as <code>defer</code> makes this more manageable, but it ruins a lot of things like RAII which make modern C++ practices safer.</p>\n"}], "owner": {"reputation": 3339, "user_id": 1374987, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/jmuPH.png?s=128&g=1", "display_name": "PentaKon", "link": "https://stackoverflow.com/users/1374987/pentakon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3215, "favorite_count": 3, "accepted_answer_id": 37961486, "answer_count": 2, "score": 9, "last_activity_date": 1575815692, "creation_date": 1466577850, "last_edit_date": 1575815692, "question_id": 37960425, "link": "https://stackoverflow.com/questions/37960425/using-c-in-a-go-application-for-performance", "title": "Using C(++) in a Go application for performance", "body": "<p>I've started studying Go a couple of days ago and came by its CGO thing and the gccgo compiler. From my understanding this allows a Go program to compile using the Go compiler and compile C libraries using a C compiler and reference those libraries from inside a Go program. This is really interesting to me because this allows us to leverage C's performance (if needed) from our main program with little overhead.</p>\n\n<p>However I'm not sure how little that is, so I'm asking here: </p>\n\n<p>Are there cases where you would create a C library just to use it from inside your Go application? Or is this feature only to facilitate re-usability of existing C code?</p>\n\n<p>P.S: I think at the moment CGO doesn't support C++ but there was a post here of someone that was able to wrap C++ code using C functions and call them successfully.</p>\n"}, {"tags": ["c++", "c", "ellipsis", "variadic-functions", "unused-variables"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1466577532, "post_id": 37960305, "comment_id": 63367867, "body": "Unclear to me: are you trying to define an empty macro?"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 1, "creation_date": 1466577848, "post_id": 37960305, "comment_id": 63368049, "body": "Can you show the code &amp; macro definition producing the error, as well as the exact error text?"}], "answers": [{"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 0, "last_activity_date": 1466578879, "last_edit_date": 1495542259, "creation_date": 1466577728, "answer_id": 37960390, "question_id": 37960305, "link": "https://stackoverflow.com/questions/37960305/how-to-declare-ellipsis-defined-va-list-unused/37960390#37960390", "title": "how to declare ellipsis defined va_list unused", "body": "<p>You might have</p>\n\n<pre><code>#ifdef NDEBUG\n#define LOGD(...) do {} while(0)\n#else\n#define LOGD(...) do {rtt_printf(TERMINAL_DEBUG, ##__VA_ARGS__); \\\n                      } while(0)\n#endif\n</code></pre>\n\n<p>following the convention on <code>NDEBUG</code> used by <a href=\"http://man7.org/linux/man-pages/man3/assert.3.html\" rel=\"nofollow noreferrer\">assert(3)</a></p>\n\n<p>If you want to use the arguments to make your compiler happy and have it check the arguments, you could try (in the <code>NDEBUG</code> case)</p>\n\n<pre><code>#define LOGD(...) do { if (false) printf(__VA_ARGS__); }while(0)\n</code></pre>\n\n<p>So the <a href=\"https://en.wikipedia.org/wiki/Optimizing_compiler\" rel=\"nofollow noreferrer\">optimizing compiler</a> won't emit any call to <code>printf</code> (if using <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a>, be sure to pass <code>-Wall -O2</code> at least to <code>g++</code>)</p>\n\n<p>BTW, I would suggest instead (for the debugging case without <code>NDEBUG</code>):</p>\n\n<pre><code>#define LOGD(Fmt,...) do { rtt_printf(TERMINAL_DEBUG, \"%s:%d \" Fmt \"\\n\", \\\n                                      __FILE__, __LINE__, ##_VA_ARGS); } while(0)\n</code></pre>\n\n<p>then use <code>LOGD(\"x=%d\", x)</code> in your code. This would show the source line position.</p>\n\n<p>At last, in genuine C++11, you'll better use output streams from <a href=\"http://en.cppreference.com/w/cpp/header/ostream\" rel=\"nofollow noreferrer\"><code>&lt;ostream&gt;</code></a> and code (for the debugging case):</p>\n\n<pre><code>#define LOGOUTD(Out) do {std::clog &lt;&lt; __FILE__ &lt;&lt; \":\" &lt;&lt; __LINE__ \\\n                         &lt;&lt; \" \" &lt;&lt; Out &lt;&lt; std::endl;}while(0)\n</code></pre>\n\n<p>and later use <code>LOGOUTD(\"x=\"&lt;&lt;x)</code>. Then, if you have defined appropriate <code>std::ostream&amp; operator &lt;&lt; (std::ostream&amp;, const Foo&amp;)</code> for your class <code>Foo</code>, you could have <code>x</code> being an instance of it.</p>\n\n<p>PS. See <a href=\"https://stackoverflow.com/a/154264/841108\">this</a> for the explanation about <code>do{</code>...<code>}while(0)</code> in macros.</p>\n"}], "owner": {"reputation": 347, "user_id": 1268966, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/aee782dae6b534f89b2a06e1bf002da0?s=128&d=identicon&r=PG", "display_name": "arapEST", "link": "https://stackoverflow.com/users/1268966/arapest"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 260, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1466578879, "creation_date": 1466577372, "last_edit_date": 1466577491, "question_id": 37960305, "link": "https://stackoverflow.com/questions/37960305/how-to-declare-ellipsis-defined-va-list-unused", "title": "how to declare ellipsis defined va_list unused", "body": "<p>I am dealing with the log macros that are defined something like:</p>\n\n<pre><code>#define LOGD(...)         rtt_printf(TERMINAL_DEBUG, ##__VA_ARGS__)\n#define LOGV(...)         rtt_printf(TERMINAL_NORMAL, ##__VA_ARGS__)\n</code></pre>\n\n<p>It is all good, but I would like to disable debug logs for release build. But since I am using <code>-Werror</code> and <code>-Wall</code> I simply get errors when I define <strong>LOGD</strong> without the <strong>rtt_printf()</strong>. Is there any way at all (more dynamic way) other than explicitly declaring <strong>(void)var;</strong> before the LOG call to suppress the unused parameter warnings?</p>\n"}, {"tags": ["c", "fixed-point"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 8, "creation_date": 1466576997, "post_id": 37960184, "comment_id": 63367581, "body": "<code>Uint16</code> is a 16 bits unsigned integer ( no decimals...), so what is not clear???...."}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 5, "creation_date": 1466577135, "post_id": 37960184, "comment_id": 63367644, "body": "You have <i>a lot</i> of misconceptions."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 3, "creation_date": 1466577189, "post_id": 37960184, "comment_id": 63367670, "body": "Uint16 is not a fixed-point type in the common sense."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1466582129, "post_id": 37960184, "comment_id": 63370766, "body": "You are trying to put a 0.25 (floating point) into an 16 bit integer, 025 simply gets rounded to 0 and you get 0 in <code>A</code> which is expected."}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 1, "creation_date": 1466615636, "post_id": 37960184, "comment_id": 63395066, "body": "I feel bad because this question get downvoted simply because people don&#39;t understand fixed point. Fixed point numbers are integers to machines and are usually <code>typedef</code> as existing integer types. For beginners I recommend TI&#39;s IQMath library. As you get more informed you can look for IQMath source code and use some lower level functions. The IQMath API is not perfect, e.g. IQ_N_div function does not handle the case when the input and outputs are different Q but the lower level implementation does."}, {"owner": {"reputation": 3, "user_id": 6497516, "user_type": "registered", "profile_image": "https://graph.facebook.com/1758691367750927/picture?type=large", "display_name": "Joe Bingham", "link": "https://stackoverflow.com/users/6497516/joe-bingham"}, "edited": false, "score": 0, "creation_date": 1466644339, "post_id": 37960184, "comment_id": 63406923, "body": "I do appreciate the feedback !! I was scratching my head over this issue and now I realize that I was using an integer instead of float . Now my code runs fine !!"}], "answers": [{"tags": [], "owner": {"reputation": 781, "user_id": 1016246, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2659baeac9812530ec2e1160f29b29aa?s=128&d=identicon&r=PG", "display_name": "Illishar", "link": "https://stackoverflow.com/users/1016246/illishar"}, "is_accepted": true, "score": -1, "last_activity_date": 1466586102, "creation_date": 1466586102, "answer_id": 37963277, "question_id": 37960184, "link": "https://stackoverflow.com/questions/37960184/c-language-fixed-point-math/37963277#37963277", "title": "C Language Fixed Point Math", "body": "<p>Try with this code instead:</p>\n\n<pre><code>float A;\n\nmain()\n{\n    A = .25;\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 6497516, "user_type": "registered", "profile_image": "https://graph.facebook.com/1758691367750927/picture?type=large", "display_name": "Joe Bingham", "link": "https://stackoverflow.com/users/6497516/joe-bingham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 385, "favorite_count": 0, "accepted_answer_id": 37963277, "answer_count": 1, "score": -4, "last_activity_date": 1466586102, "creation_date": 1466576913, "last_edit_date": 1466577224, "question_id": 37960184, "link": "https://stackoverflow.com/questions/37960184/c-language-fixed-point-math", "title": "C Language Fixed Point Math", "body": "<p>I am familiar with the Arduino programming tools but have relatively small experience with embedded programming. When using decimal numbers in the Arduino I never had any issues, so when I recently started playing around with TI's Launchpad F28069M(TMS320F28069M Chip), I was surprised that my math was not yielding my expected results. While doing research, I realized that the TI chip has a fixed point processor which may explain why my decimals are being truncated to 0. (See brief code example)</p>\n\n<p>My questions are the following:</p>\n\n<ol>\n<li>How should I declare decimal numbers in my code?</li>\n<li>Should I use TI's IQ math?</li>\n<li>Why was I able to declare and perform math functions with decimal numbers in the Arduino without any issue?</li>\n</ol>\n\n<p>My Code</p>\n\n<pre><code>Uint16 A;\n\nmain()\n{\n    A = .25;\n}\n</code></pre>\n\n<p>Result from Expression Window in TI's CCS:\n<a href=\"https://i.stack.imgur.com/LJIFt.png\" rel=\"nofollow noreferrer\">Expression Window CCS</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/LJIFt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LJIFt.png\" alt=\"Expression Window CCS\"></a></p>\n"}, {"tags": ["c", "sockets", "network-programming"], "answers": [{"tags": [], "owner": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "is_accepted": false, "score": 0, "last_activity_date": 1466574922, "creation_date": 1466574922, "answer_id": 37959648, "question_id": 37959585, "link": "https://stackoverflow.com/questions/37959585/what-happened-on-freeaddrinfo-called/37959648#37959648", "title": "What happened on freeaddrinfo called?", "body": "<p>It's no different than what happens when you use free - the pointer still points to the same address yet the actual memory is not allocated. The reason this isn't a simple free call is that you're actually free'ing a list of resources. From the manual:</p>\n\n<blockquote>\n  <p>The freeaddrinfo() function frees the memory that was allocated for\n  the dynamically allocated linked list res.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 1418404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6316b6d253f684920a5786c4b5d9cad?s=128&d=identicon&r=PG", "display_name": "user1418404", "link": "https://stackoverflow.com/users/1418404/user1418404"}, "edited": false, "score": 0, "creation_date": 1466575988, "post_id": 37959658, "comment_id": 63367019, "body": "Yes!Yes!! The pointer is remain the pointer. Even the <code>*p</code> is null. Thank you!"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1466623066, "post_id": 37959658, "comment_id": 63399231, "body": "<code>*p</code> is not guaranteed to be NULL after <code>freeaddrinfo()</code> is called. If <code>*p</code> is getting NULL&#39;ed then that is a side effect of the memory manager that allocated and is freeing <code>serveinfo</code>. Some memory managers <i>do</i> zero out memory when freeing it (or even fill it with special values like <code>0xcdcdcdcd</code> or <code>0xbaadfood</code> to aid debugging), but you can&#39;t rely on that behavior in your code."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 2, "last_activity_date": 1466574961, "creation_date": 1466574961, "answer_id": 37959658, "question_id": 37959585, "link": "https://stackoverflow.com/questions/37959585/what-happened-on-freeaddrinfo-called/37959658#37959658", "title": "What happened on freeaddrinfo called?", "body": "<p>After the loop the pointer <code>p</code> either points to the <code>addrinfo</code> structure that was used to successfully create and bind the socket, or it will be <code>NULL</code> if none of the structures could be used.</p>\n\n<p>That the <code>freeaddrinfo</code> was called between the loop and the check doesn't matter, because you don't dereference the variable <code>p</code>, you only check if it's a null-pointer or not.</p>\n\n<p>However, if you try to dereference <code>p</code> after the call to <code>freeaddrinfo</code> then you would try to access memory no longer allocated to you, and you will have <em>undefined behavior</em>.</p>\n\n<p>The <code>freeaddrinfo</code> call doesn't change any of your variables, it can't. If you have a pointer allocated with <code>malloc</code> and then you call <code>free</code> with that variable, it doesn't set the variable to <code>NULL</code>, nor could it set any other variable pointing to the same memory to <code>NULL</code>. Read more about <em>passing argument by value</em> and <em>emulating pass by reference in c</em> to learn more about why.</p>\n"}], "owner": {"reputation": 43, "user_id": 1418404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6316b6d253f684920a5786c4b5d9cad?s=128&d=identicon&r=PG", "display_name": "user1418404", "link": "https://stackoverflow.com/users/1418404/user1418404"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1663, "favorite_count": 0, "accepted_answer_id": 37959658, "answer_count": 2, "score": 3, "last_activity_date": 1466574961, "creation_date": 1466574719, "question_id": 37959585, "link": "https://stackoverflow.com/questions/37959585/what-happened-on-freeaddrinfo-called", "title": "What happened on freeaddrinfo called?", "body": "<p>I'm learning network programming by following the <a href=\"http://beej.us/guide/bgnet/output/html/singlepage/bgnet.html#simpleserver\" rel=\"nofollow\">Beej's Guide to Network Programming</a> article. There is an example: </p>\n\n<pre><code>struct addrinfo hints, *servinfo, *p;\n\nif ((rv = getaddrinfo(NULL, PORT, &amp;hints, &amp;servinfo)) != 0) {\n    fprintf(stderr, \"getaddrinfo: %s\\n\", gai_strerror(rv));\n    return 1;\n}\n\n// loop through all the results and bind to the first we can\nfor(p = servinfo; p != NULL; p = p-&gt;ai_next) {\n    //socket(...)\n    //bind(...)\n    break;\n}\n\nfreeaddrinfo(servinfo); // all done with this structure\n\nif (p == NULL)  {\n    fprintf(stderr, \"server: failed to bind\\n\");\n    exit(1);\n}\n</code></pre>\n\n<p>After <code>bind()</code>, <code>freeaddrinfo()</code> is called. I think the <code>servinfo</code> link list should be NULL now, and also the pointer <code>p</code> should be NULL, but no, <code>p</code> is not NULL and the code works well.</p>\n\n<p>I want to know why the <code>p</code> is not null after calling <code>freeaddrinfo</code> ?</p>\n"}, {"tags": ["c", "eof"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1466574451, "post_id": 37959469, "comment_id": 63366259, "body": "This actually has nothing to do with your program or the implementation of <code>getchar</code>. Instead it&#39;s the terminal program which handles <code>CTRL-D</code> and closing the input stream."}, {"owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "edited": false, "score": 0, "creation_date": 1466574816, "post_id": 37959469, "comment_id": 63366446, "body": "Related question : <a href=\"http://stackoverflow.com/questions/21260674/why-do-i-need-to-type-ctrl-d-twice-to-mark-end-of-file\" title=\"why do i need to type ctrl d twice to mark end of file\">stackoverflow.com/questions/21260674/&hellip;</a>"}, {"owner": {"reputation": 325, "user_id": 5962381, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ea180246665cdc8bef129295de0debc8?s=128&d=identicon&r=PG&f=1", "display_name": "Hells Guardian", "link": "https://stackoverflow.com/users/5962381/hells-guardian"}, "edited": false, "score": 0, "creation_date": 1466575033, "post_id": 37959469, "comment_id": 63366539, "body": "@PaulHankin I need to enter it 3 times at the end of the line. I don&#39;t quite understand why. Also, which aspect of the code do you think is incorrect?"}, {"owner": {"reputation": 325, "user_id": 5962381, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ea180246665cdc8bef129295de0debc8?s=128&d=identicon&r=PG&f=1", "display_name": "Hells Guardian", "link": "https://stackoverflow.com/users/5962381/hells-guardian"}, "reply_to_user": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "edited": false, "score": 1, "creation_date": 1466575711, "post_id": 37959469, "comment_id": 63366895, "body": "@Rxmsc I understand that but I&#39;d like to know why I need to enter Ctrl + D three times."}], "owner": {"reputation": 325, "user_id": 5962381, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ea180246665cdc8bef129295de0debc8?s=128&d=identicon&r=PG&f=1", "display_name": "Hells Guardian", "link": "https://stackoverflow.com/users/5962381/hells-guardian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1897, "favorite_count": 1, "closed_date": 1466574739, "answer_count": 0, "score": 2, "last_activity_date": 1511883666, "creation_date": 1466574270, "last_edit_date": 1511883666, "question_id": 37959469, "link": "https://stackoverflow.com/questions/37959469/understanding-how-eof-and-ctrl-d-work", "closed_reason": "Duplicate", "title": "Understanding how EOF and Ctrl + D work", "body": "<p>I am reading The C Programming Language (K&amp;R). I am trying to understand how EOF works and I believe that upon encountering <kbd>Ctrl</kbd> + <kbd>D</kbd> at the beginning of a line, EOF is triggered. However at the end of a line, it requires the user to enter <kbd>Ctrl</kbd> +<kbd> D </kbd>twice. First to flush the input and the second to trigger EOF.</p>\n\n<p>The following program reads input lines from the console and prints the longest. I don't understand why I have to enter <kbd>Ctrl</kbd> + <kbd>D</kbd> <strong>thrice</strong> to trigger EOF.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define MAXLINE 1000\n\nint getline(char[]);\nvoid copy(char[], char[]);\n\nint main()\n{\n    int len, max;\n\n    char line[MAXLINE];\n    char longest[MAXLINE];\n\n    max = 0;\n\n    while( (len = getline(line)) &gt; 0)\n        if(len &gt; max)\n        {\n            max = len;\n            copy(longest, line);\n        }\n\n    if(max &gt; 0)\n        printf(\"%s\", longest);\n    return 0;\n\n}\n\nint getline(char line[])\n{\n    int c, i;\n    i = 0;\n\n    for(i = 0; i &lt; MAXLINE - 1 &amp;&amp; (c = getchar())!=EOF &amp;&amp; c!='\\n'; ++i )\n        line[i] = c;\n    if(c == '\\n')\n    {\n        line[i] = c;\n        ++i;\n    }\n    line[i] = '\\0';\n    return i;\n}\n\nvoid copy(char to[], char from[])\n{\n    int i = 0;\n\n    while( (to[i] = from[i]) != '\\0')\n        ++i;\n}   \n</code></pre>\n"}, {"tags": ["android", "c", "android-ndk"], "comments": [{"owner": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "edited": false, "score": 0, "creation_date": 1466574127, "post_id": 37959067, "comment_id": 63366128, "body": "Do you know where the crash occurs?"}, {"owner": {"reputation": 684, "user_id": 1947877, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Z9H2t.jpg?s=128&g=1", "display_name": "Sanidhya Kumar", "link": "https://stackoverflow.com/users/1947877/sanidhya-kumar"}, "reply_to_user": {"reputation": 2592, "user_id": 2963819, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bcc08ce2a4490cf3496020812fe10ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Ishay Peled", "link": "https://stackoverflow.com/users/2963819/ishay-peled"}, "edited": false, "score": 0, "creation_date": 1466594111, "post_id": 37959067, "comment_id": 63378735, "body": "Somewhere in this method mapping(env,imagearr,n, m,r,orig_x,orig_y,cur_x,cur_y);"}, {"owner": {"reputation": 7617, "user_id": 2878070, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42b5fba5761d7e519d05b642be0b2e14?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/2878070/sergio"}, "edited": false, "score": 0, "creation_date": 1466594226, "post_id": 37959067, "comment_id": 63378815, "body": "@sanidhya09 Could you provide crash trace from device&#39;s logcat?"}, {"owner": {"reputation": 684, "user_id": 1947877, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Z9H2t.jpg?s=128&g=1", "display_name": "Sanidhya Kumar", "link": "https://stackoverflow.com/users/1947877/sanidhya-kumar"}, "reply_to_user": {"reputation": 7617, "user_id": 2878070, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42b5fba5761d7e519d05b642be0b2e14?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/2878070/sergio"}, "edited": false, "score": 0, "creation_date": 1466595136, "post_id": 37959067, "comment_id": 63379359, "body": "@Serhio just this single line i get in crash Fatal signal 11 (SIGSEGV), code 2 at tid(9854213). If you want i can provide a sample app on github by tomorrow."}], "answers": [{"tags": [], "owner": {"reputation": 684, "user_id": 1947877, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Z9H2t.jpg?s=128&g=1", "display_name": "Sanidhya Kumar", "link": "https://stackoverflow.com/users/1947877/sanidhya-kumar"}, "is_accepted": false, "score": 1, "last_activity_date": 1466608228, "creation_date": 1466608228, "answer_id": 37971984, "question_id": 37959067, "link": "https://stackoverflow.com/questions/37959067/ndk-code-crashing-in-few-htc-lollipop-devices-and-few-other-devices-by-giving-fa/37971984#37971984", "title": "NDK Code crashing in few HTC lollipop devices and few other devices by giving Fatal signal 11 (SIGSEGV), code 2", "body": "<p>I just updated my build.gradle settings ndk configuration and it started to work in every device.</p>\n\n<pre><code>ndk {\n            moduleName \"native\"\n            toolchain \"clang\"\n            toolchainVersion \"3.5\"\n            CFlags.add(\"-DCUSTOM_DEFINE\")\n            cppFlags.add(\"-DCUSTOM_DEFINE\")\n            ldFlags.add(\"-L/custom/lib/path\")\n            ldLibs.add(\"log\")\n            stl \"stlport_static\"\n        }\n</code></pre>\n"}], "owner": {"reputation": 684, "user_id": 1947877, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Z9H2t.jpg?s=128&g=1", "display_name": "Sanidhya Kumar", "link": "https://stackoverflow.com/users/1947877/sanidhya-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1466608228, "creation_date": 1466572509, "question_id": 37959067, "link": "https://stackoverflow.com/questions/37959067/ndk-code-crashing-in-few-htc-lollipop-devices-and-few-other-devices-by-giving-fa", "title": "NDK Code crashing in few HTC lollipop devices and few other devices by giving Fatal signal 11 (SIGSEGV), code 2", "body": "<p>Below code is used to scale the image border by dragging the edges. It works fine in Moto X, nexus 5x, few other devices and emulators. But it crashes on HTC ONE(Lollipop 5.0.2) and few other devices too. I think this is due to heavy graphics processing. Please some help me in providing the fix.</p>\n\n<blockquote>\n  <p>This is the C Code.</p>\n</blockquote>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;jni.h&gt;\n#include &lt;math.h&gt;\n#include &lt;malloc.h&gt;\n#include &lt;android/log.h&gt;\n#include &lt;assert.h&gt;\n#include &lt;android/bitmap.h&gt;\n//#include &lt;asm/io.h&gt;\n#define LOG_TAG \"System.out\"\n#define LOGD(...) __android_log_print(ANDROID_LOG_DEBUG, LOG_TAG, __VA_ARGS__)\n#define LOGI(...) __android_log_print(ANDROID_LOG_INFO, LOG_TAG, __VA_ARGS__)\n\nint *colorRed;\nint *colorGreen;\nint *colorBlue;\nint *colorsP;\n\nint *colorAlpha;\nint _width,_height;\njintArray imagecolors;\n\n\nstatic long SinXDivX_Table_8[(2&lt;&lt;8)+1];\ndouble MySin(double x){\n     double absx;\n     absx = x;\n     if(x&lt;0) absx = -x;\n\n     double x2 = absx*absx;\n     double x3 = x2*absx;\n     if(absx&lt;1)    return (1-2*x2+x3);\n     else if(absx&lt;2) return (4-8*absx+5*x2-x3);\n     else return 0;\n}\n\nint getAlpha(int i, int j) {\n    return (*(colorsP+j*_width+i) &gt;&gt; 24)&amp;0xFF;\n}\n\nint getRedColor(int i,int j){\n\n    //return *(colorRed+j*_width+i);\n    return (*(colorsP+j*_width+i) &gt;&gt; 16)&amp;0xFF;\n}\n\nint getGreenColor(int i,int j){\n    //return *(colorGreen+j*_width+i);\n    return (*(colorsP+j*_width+i) &gt;&gt; 8)&amp;0xFF;\n}\n\nint getBlueColor(int i,int j){\n    //return *(colorBlue+j*_width+i);\n    return (*(colorsP+j*_width+i))&amp;0xFF;\n}\n\n    /**\n     * \ufffd\u00f5\ufffdx*x+y*y\ufffd\ufffd\u05b5\n     * @param x\n     * @param y\n     * @return\n     */\n double hypotsq(double x,double y){\n        return x*x+y*y;\n    }\n\nvoid mapping(JNIEnv *env,jintArray image,int x,int y,double max_dist,\n                       double orig_x,double orig_y,double cur_x,double cur_y){\n          // if(mode == 120){\n            float u = 0,v = 0;\n            float fu = x,fv = y;\n            double dx = x - orig_x;\n            double dy = y - orig_y;\n            long i,j;\n            int i1,j1,_i,_j,i2,j2;\n            float du;\n            float dv;\n            int colorpix = 0;\n            int red,green,blue,alpha;\n            double max_dist_sq = max_dist*max_dist;\n            double mou_dx = cur_x - orig_x;\n            //\ufffd\ufffd\ufffd\ufffd-------^_^\n            mou_dx = mou_dx/4;\n            //--------------\n            double mou_dy = cur_y - orig_y;\n            //\ufffd\ufffd\ufffd\ufffd-------^_^\n            mou_dy = mou_dy/4;\n            //-----------\n            if(dx &gt; -max_dist&amp;&amp;dx&lt;max_dist&amp;&amp;dy&gt;-max_dist&amp;&amp;dy&lt;max_dist){\n                double rsq = hypotsq(dx, dy);\n                if(rsq &lt; max_dist_sq){\n                        //\u03bb\ufffd\ufffd\n                        double msq = hypotsq(dx - mou_dx,dy - mou_dy);\n                        double edge_dist = max_dist_sq - rsq;\n                        double a = edge_dist/(edge_dist + msq);\n                        a *=a;\n                        fu -= a*mou_dx; //\u04f3\ufffd\ufffd\ufffd\u0138\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\n                        fv -= a*mou_dy; //\u04f3\ufffd\ufffd\ufffd\u0138\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\n\n                    u = fu;\n                    v = fv;\n                    {\n                    u = u&lt;(_width-1)?u:(_width-1);\n                    v = v&lt;(_height-1)?v:(_height-1);\n\n                    u = u&gt;0?u:0;\n                    v = v&gt;0?v:0;\n                    }\n    //              i = (int)u; //\ufffd\ufffd\u04e6\u0534\u037c\ufffd\ufffdX\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\n    //              j = (int)v; //\ufffd\ufffd\u04e6\u0534\u037c\ufffd\ufffdY\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\n    //              du = u-i;//\u0421\ufffd\ufffd\ufffd\u3cbf\ufffd\ufffd\n    //              dv = v-j;//\u0421\ufffd\ufffd\ufffd\u3cbf\ufffd\ufffd\n                    long intu = (long)(u*(1 &lt;&lt; 16)); //\ufffd\u0174\ufffd\n                    long intv = (long)(v*(1 &lt;&lt; 16)); //\ufffd\u0174\ufffd\n\n                    i = intu &gt;&gt; 16; //\u023b\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u0421\ufffd\u00f5\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\n                    j = intv &gt;&gt; 16; //\u023b\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u0421\ufffd\u00f5\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\n\n                    long idu = (intu &amp; 0xFFFF)&gt;&gt; 8;  //\ufffd\u00f5\ufffd\u0421\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\n                    long idv = (intv &amp; 0xFFFF)&gt;&gt; 8;  //\ufffd\u00f5\ufffd\u0421\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\n\n                    long _idu = (256-idu);     //\ufffd\u0d71\ufffd\ufffd\u00fb\ufffd\u0174\ufffd\u01f0\ufffd\ufffd(1-du)\u05ae\ufffd\ufffd\ufffd\n                    long _idv = (256-idv);\n\n                    i1 = (i+1)&lt;(_width-1)?(i+1):(_width-1);//Math.min(i+1, width-1);\n                    j1 = (j+1)&lt;(_height-1)?(j+1):(_height-1);//Math.min(j+1, height-1);\n                    //*******************************************\u02eb\ufffd\ufffd\ufffd\u0532\ufffd\u05b5\ufffd\u3de8***************************************************//\n                    alpha = (_idu*_idv*getAlpha(i, j)+_idu*idv*getAlpha(i, j1)+\n                             idu*_idv*getAlpha(i1, j)+idu*idv*getAlpha(i1,j1))&gt;&gt;16;\n\n                    red = (_idu*_idv*getRedColor(i, j)+_idu*idv*getRedColor(i, j1)+\n                            idu*_idv*getRedColor(i1, j)+idu*idv*getRedColor(i1,j1))&gt;&gt;16;\n\n                    green = (_idu*_idv*getGreenColor(i, j)+_idu*idv*getGreenColor(i, j1)+\n                            idu*_idv*getGreenColor(i1, j)+idu*idv*getGreenColor(i1,j1))&gt;&gt;16;\n\n                    blue = (_idu*_idv*getBlueColor(i, j)+_idu*idv*getBlueColor(i, j1)+\n                            idu*_idv*getBlueColor(i1, j)+idu*idv*getBlueColor(i1,j1))&gt;&gt;16;\n\n                    //*******************************************\ufffd\ufffd\ufffd\u03be\ufffd\ufffd\ufffd\ufffd\u05b5\ufffd\u3de8****************************************************//\n                    int red3, green3, blue3, alpha3;\n                    i2 = (i+2)&lt;(_width-1)?(i+2):(_width-1);\n                    j2 = (j+2)&lt;(_height-1)?(j+2):(_height-1);\n                    _i = (i-1)&gt;0?(i-1):0;\n                    _j = (j-1)&gt;0?(j-1):0;\n                    long A[4] = {SinXDivX_Table_8[(1&lt;&lt;8)+idu],SinXDivX_Table_8[idu+0],SinXDivX_Table_8[(1&lt;&lt;8)-idu],SinXDivX_Table_8[(2&lt;&lt;8)-idu]};\n                    long C[4] = {SinXDivX_Table_8[(1&lt;&lt;8)+idv],\n                                   SinXDivX_Table_8[idv+0],\n                                   SinXDivX_Table_8[(1&lt;&lt;8)-idv],\n                                   SinXDivX_Table_8[(2&lt;&lt;8)-idv]};\n\n                    int alphaB[16] = {getAlpha(_i, _j),  getAlpha(_i,j), getAlpha(_i,j1),  getAlpha(_i,j2),\n                                      getAlpha(i,_j),    getAlpha(i,j),  getAlpha(i,j1),   getAlpha(i,j2),\n                                      getAlpha(i1,_j),   getAlpha(i1,j), getAlpha(i1,j1),  getAlpha(i1,j2),\n                                      getAlpha(i2,_j),   getAlpha(i2,j), getAlpha(i2,j1),  getAlpha(i2,j2)};\n                    double aA_B[4] = {(A[0]*alphaB[0]+A[1]*alphaB[4]+A[2]*alphaB[8]+A[3]*alphaB[12]),\n                                      (A[0]*alphaB[1]+A[1]*alphaB[5]+A[2]*alphaB[9]+A[3]*alphaB[13]),\n                                      (A[0]*alphaB[2]+A[1]*alphaB[6]+A[2]*alphaB[10]+A[3]*alphaB[14]),\n                                      (A[0]*alphaB[3]+A[1]*alphaB[7]+A[2]*alphaB[11]+A[3]*alphaB[15])};\n                    alpha3 = (int)(aA_B[0]*C[0]+aA_B[1]*C[1]+aA_B[2]*C[2]+aA_B[3]*C[3])&gt;&gt;16;\n\n                    //\ufffd\ufffd\u026b\n                    int redB[16] = {getRedColor(_i, _j),  getRedColor(_i,j), getRedColor(_i,j1),  getRedColor(_i,j2),\n                                       getRedColor(i,_j),    getRedColor(i,j),  getRedColor(i,j1),   getRedColor(i,j2),\n                                       getRedColor(i1,_j),   getRedColor(i1,j), getRedColor(i1,j1),  getRedColor(i1,j2),\n                                       getRedColor(i2,_j),   getRedColor(i2,j), getRedColor(i2,j1),  getRedColor(i2,j2)};\n\n                    double A_B[4] = {(A[0]*redB[0]+A[1]*redB[4]+A[2]*redB[8]+A[3]*redB[12]),\n                                      (A[0]*redB[1]+A[1]*redB[5]+A[2]*redB[9]+A[3]*redB[13]),\n                                      (A[0]*redB[2]+A[1]*redB[6]+A[2]*redB[10]+A[3]*redB[14]),\n                                      (A[0]*redB[3]+A[1]*redB[7]+A[2]*redB[11]+A[3]*redB[15])};\n                    red3 = (int)(A_B[0]*C[0]+A_B[1]*C[1]+A_B[2]*C[2]+A_B[3]*C[3])&gt;&gt;16;\n                    //\ufffd\ufffd\u026b\n                    int greenB[16] = {getGreenColor(_i, _j),  getGreenColor(_i,j), getGreenColor(_i,j1),  getGreenColor(_i,j2),\n                                         getGreenColor(i,_j),    getGreenColor(i,j),  getGreenColor(i,j1),   getGreenColor(i,j2),\n                                         getGreenColor(i1,_j),   getGreenColor(i1,j), getGreenColor(i1,j1),  getGreenColor(i1,j2),\n                                         getGreenColor(i2,_j),   getGreenColor(i2,j), getGreenColor(i2,j1),  getGreenColor(i2,j2)};\n                    double gA_B[4] = {(A[0]*greenB[0]+A[1]*greenB[4]+A[2]*greenB[8]+A[3]*greenB[12]),\n                                      (A[0]*greenB[1]+A[1]*greenB[5]+A[2]*greenB[9]+A[3]*greenB[13]),\n                                      (A[0]*greenB[2]+A[1]*greenB[6]+A[2]*greenB[10]+A[3]*greenB[14]),\n                                      (A[0]*greenB[3]+A[1]*greenB[7]+A[2]*greenB[11]+A[3]*greenB[15])};\n                    green3 = (int)(gA_B[0]*C[0]+gA_B[1]*C[1]+gA_B[2]*C[2]+gA_B[3]*C[3])&gt;&gt;16;\n                    //\ufffd\ufffd\u026b\n                    int blueB[16] = {getBlueColor(_i, _j),  getBlueColor(_i,j), getBlueColor(_i,j1),  getBlueColor(_i,j2),\n                                        getBlueColor(i,_j),    getBlueColor(i,j),  getBlueColor(i,j1),   getBlueColor(i,j2),\n                                        getBlueColor(i1,_j),   getBlueColor(i1,j), getBlueColor(i1,j1),  getBlueColor(i1,j2),\n                                        getBlueColor(i2,_j),   getBlueColor(i2,j), getBlueColor(i2,j1),  getBlueColor(i2,j2)};\n                    double bA_B[4] = {(A[0]*blueB[0]+A[1]*blueB[4]+A[2]*blueB[8]+A[3]*blueB[12]),\n                                      (A[0]*blueB[1]+A[1]*blueB[5]+A[2]*blueB[9]+A[3]*blueB[13]),\n                                      (A[0]*blueB[2]+A[1]*blueB[6]+A[2]*blueB[10]+A[3]*blueB[14]),\n                                      (A[0]*blueB[3]+A[1]*blueB[7]+A[2]*blueB[11]+A[3]*blueB[15])};\n                    blue3 = (int)(bA_B[0]*C[0]+bA_B[1]*C[1]+bA_B[2]*C[2]+bA_B[3]*C[3])&gt;&gt;16;\n\n                    //**************************************************************************************************************//\n                    //**************************************************************************************************************//\n                    //\u03aa\ufffd\u02f5\u00f5\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u023a\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u04bb\ufffd\ufffd\ufffd\u0436\u03e3\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u06bb\ufffd\u0421\ufffd\ufffd\u0133\ufffd\ufffd\u05b5\ufffd\ufffd\ufffd\ufffd\u02eb\ufffd\ufffd\ufffd\ufffd\ufffd\u3de8\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u05b5\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u03be\ufffd\ufffd\ufffd\u3de8\ufffd\u00f5\ufffd\ufffd\ufffd\u05b5\n                    if(alpha3&lt;0||red3&lt;0||green3&lt;0||blue3&lt;0||alpha3&gt;255||red3&gt;255||green3&gt;255||blue3&gt;255){\n                        colorpix = (alpha &lt;&lt; 24)|(red &lt;&lt; 16)|(green &lt;&lt; 8)|blue;\n                    }else{\n                        colorpix = (alpha3 &lt;&lt; 24)|(red3 &lt;&lt; 16)|(green3 &lt;&lt; 8)|blue3;\n                    }\n                //LOGI(\"c---&gt; ca = %d\",);\n                (*env)-&gt;SetIntArrayRegion(env,image,(int) (y*_width + x),1,&amp;colorpix);\n                }\n            }\n\n}\n\nJNIEXPORT jintArray JNICALL Java_com_test_mypicture_ui_WarpView_warpPhotoFromC\n  (JNIEnv * env, jobject obj, jintArray imagearr, jint height, jint width, jdouble r,\n                        jdouble orig_x, jdouble orig_y, jdouble cur_x, jdouble cur_y){\n//\ufffd\ufffd\u02bc\ufffd\ufffd\ufffd\u026b\ufffd\ufffd\ufffd\ufffd\n\n    int len = (*env)-&gt;GetArrayLength(env,imagearr);\n\n    int* color = (*env)-&gt;GetIntArrayElements(env,imagearr,0);\n\n    int colors[len];\n\n    int colorsOr[len];\n\n    _width = width;\n    _height = height;\n\n    int i = 0;\n    for(;i&lt;len;i++){\n        int colorpix = *(color+i);//\ufffd\ufffd\u01f0\ufffd\ufffd\ufffd\ufffd\u05b5\n        colors[i] = colorpix;\n    }\n    colorsP = &amp;colors[0];\n    //\u0164\ufffd\ufffd\u037c\u01ac\ufffd\ufffd\u04f3\ufffd\ufffd\n\n    int or_x = (orig_x-r)&gt;0?(orig_x-r):0;//(int) Math.max((orig_x-r), 0);\n    int or_y = (orig_y-r)&gt;0?(orig_y-r):0;//(int) Math.max((orig_y-r), 0);\n\n    int max_x = (orig_x+r)&lt;width?(orig_x+r):width;//(int) Math.min((orig_x+r), width);\n    int max_y = (orig_y+r)&lt;height?(orig_y+r):height;//(int) Math.min((orig_y+r), height);\n    int m = or_y;\n    for(;m&lt;max_y;m++){\n        int n = or_x;\n                for(;n&lt;max_x;n++){\n                    mapping(env,imagearr,n, m,r,orig_x,orig_y,cur_x,cur_y);\n            }\n     }\n    return imagecolors;\n}\n//\ufffd\ufffd\u02bc\ufffd\ufffd\ufffd\ufffd\ufffd\u04b1\ufffd\nJNIEXPORT jint JNICALL Java_com_test_mypicture_MainActivity_initArray\n  (JNIEnv * env, jobject obj){\n        long k;\n        for (k = 0;k&lt;=(2&lt;&lt;8);++k){\n            SinXDivX_Table_8[k]=(long)(0.5+256*MySin(k*(1.0/(256))))*1;\n        }\n        return 0;\n}\n</code></pre>\n\n<blockquote>\n  <p>This is Java Code from where i invoke the C method.</p>\n</blockquote>\n\n<p>package com.test.mypicture.ui;</p>\n\n<pre><code>import com.test.mypicture.R;\n\nimport android.content.Context;\nimport android.graphics.Bitmap;\nimport android.graphics.Canvas;\nimport android.graphics.Paint;\nimport android.graphics.RectF;\nimport android.util.AttributeSet;\nimport android.view.MotionEvent;\nimport android.view.View;\n\npublic class WarpView extends View {\n    static{\n        System.loadLibrary(\"Warp\");\n    }\n    public native int[] warpPhotoFromC(int[] image,int height,int width,double max_dist,\n                                      double orig_x,double orig_y,double cur_x,double cur_y);\n\n    private Bitmap mBmp;    // original bitmap\n    private Bitmap newBmp;  // ARGB_8888 bitmap\n    private int[] image;    // array of pixels\n    private int[] colorR;\n    private int[] colorG;\n    private int[] colorB;\n    private boolean fg = true;\n\n    private static final int DEFAULT_PAINT_FLAGS =\n            Paint.FILTER_BITMAP_FLAG | Paint.DITHER_FLAG;\n    Paint mPaint = new Paint(DEFAULT_PAINT_FLAGS);\n\n\n    public static int HWPPQ = 110; \n    public static int MMQFJ = 120;  \n\n    private int MODE = MMQFJ;\n    private double orig_x, orig_y;\n    private double mou_dx,mou_dy;\n    private double max_dist;\n    private int width;  // image width\n    private int height; // image height\n\n    private float scale;\n    private RectF dest;\n    private double move_x,move_y;\n    private int dist = (int) getResources().getDimension(R.dimen.max_dist);\n\n\n    public WarpView(Context context) {\n        super(context);\n    }\n\n    public WarpView(Context context, AttributeSet attrs) {\n        super(context, attrs);\n        //setLayerType(View.LAYER_TYPE_SOFTWARE, null);\n        dest = new RectF(0,0,0,0);\n    }\n\n    @Override\n    protected void onDraw(Canvas canvas) {\n        //super.onDraw(canvas);\n        if(fg){\n            int viewWidth = getWidth();\n            int viewHeight = getHeight();\n            float scale1 = (float)width/(float)viewWidth;\n            float scale2 = (float)height/(float)viewHeight;\n            scale = scale1&gt;scale2?scale1:scale2;\n            float wscale = width / scale;\n            float hscale = height / scale;\n            int xoffset = (viewWidth-(int)wscale)/2;\n            int yoffset = (viewHeight-(int)hscale)/2;\n            dest.set(xoffset, yoffset, (int)wscale+xoffset, (int)hscale+yoffset);// = new RectF(xoffset, yoffset, (int) (width/scale)+xoffset, (int) (height/scale)+yoffset);\n\n            canvas.drawBitmap(mBmp, null, dest, mPaint);\n\n        }else{\n            canvas.drawBitmap(newBmp,null, dest, mPaint);\n        }\n    }\n\n    @Override\n    public boolean onTouchEvent(MotionEvent event) {\n\n        switch(event.getAction()){\n        case MotionEvent.ACTION_DOWN:\n            orig_x = event.getX();\n            orig_y = event.getY();\n            orig_x = (orig_x-dest.left)*scale;\n            orig_y = (orig_y-dest.top)*scale;\n\n            break;\n        case MotionEvent.ACTION_MOVE:\n                max_dist = dist*scale;//Math.hypot(mou_dx, mou_dy);\n                if(event.getAction() != 1){\n\n\n                    //int m = event.getHistorySize();\n\n                    move_x = event.getX();\n                    move_y = event.getY();\n\n                    move_x = (move_x-dest.left)*scale;\n                    move_y = (move_y-dest.top)*scale;\n\n//                  if(m &gt; 0){\n//                      int i2 = m + -1;\n//                      orig_x = (event.getHistoricalX(i2) - dest.left)*scale;\n//                      orig_y = (event.getHistoricalY(i2) - dest.top)*scale;\n//                  }\n                    if(move_x &gt;=0 &amp;&amp; move_y &gt;= 0){\n                        warpPhotoFromC(image,height,width,max_dist,orig_x,orig_y,move_x,move_y);\n\n                        newBmp.setPixels(image, 0, width, 0, 0, width, height);\n                        fg = false;\n                    }\n                }\n                orig_x = move_x;\n                orig_y = move_y;\n\n            break;\n        case MotionEvent.ACTION_UP:\n            break;\n        }\n        invalidate();\n        return true;\n    }\n    public void setWarpBitmap(Bitmap bmp){\n        fg = true;\n        mBmp = bmp;\n        width = bmp.getWidth();\n        height = bmp.getHeight();\n        newBmp = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888/*Bitmap.Config.RGB_565*/);\n        image = new int[width*height];\n\n        mBmp.getPixels(image, 0, width, 0, 0, width, height);\n        newBmp.setPixels(image, 0, width, 0, 0, width, height);\n        //super.setImageBitmap(mBmp);\n    }\n    public void setMode(int mode){\n        this.MODE = mode;\n    }\n\n    public Bitmap getWrapBitmap(){\n        return newBmp;\n    }\n\n}\n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1466571922, "post_id": 37958922, "comment_id": 63365291, "body": "I&#39;m not a C developer, but I happen to mostly know the answer to your question.  Strictly speaking, assigning <code>array[7]</code> in an array of size 7 is wrong, but it may be tolerated at runtime.  As @Mohit mentioned, this operation is not well defined, and you don&#39;t know what outcome it could have."}, {"owner": {"reputation": 91, "user_id": 6460660, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-5fXFJbYxa6w/AAAAAAAAAAI/AAAAAAAAABk/EOasSBkg6c8/photo.jpg?sz=128", "display_name": "Azhagu Surya", "link": "https://stackoverflow.com/users/6460660/azhagu-surya"}, "reply_to_user": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1466572513, "post_id": 37958922, "comment_id": 63365523, "body": "but it shows exact ouput."}, {"owner": {"reputation": 91, "user_id": 6460660, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-5fXFJbYxa6w/AAAAAAAAAAI/AAAAAAAAABk/EOasSBkg6c8/photo.jpg?sz=128", "display_name": "Azhagu Surya", "link": "https://stackoverflow.com/users/6460660/azhagu-surya"}, "reply_to_user": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1466572529, "post_id": 37958922, "comment_id": 63365530, "body": "please go to this link,"}, {"owner": {"reputation": 91, "user_id": 6460660, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-5fXFJbYxa6w/AAAAAAAAAAI/AAAAAAAAABk/EOasSBkg6c8/photo.jpg?sz=128", "display_name": "Azhagu Surya", "link": "https://stackoverflow.com/users/6460660/azhagu-surya"}, "reply_to_user": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1466572535, "post_id": 37958922, "comment_id": 63365532, "body": "<a href=\"http://code.geeksforgeeks.org/index.php\" rel=\"nofollow noreferrer\">code.geeksforgeeks.org/index.php</a>"}, {"owner": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 1, "creation_date": 1466572599, "post_id": 37958922, "comment_id": 63365553, "body": "It may work, it may partially work, or you may get a segmentation fault.  Think of accessing an array outside of bounds in C as driving drunk without wearing a seatbelt.  You may careen down the road and reach home, oblivious to the peril, or you may get into an accident.  Best practice is not to do it :-)"}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1466572748, "post_id": 37958922, "comment_id": 63365595, "body": "@AzhaguSurya The link you post you should check it as it does not have any code related to this . And second thing , it could work as you expected as it is undefined behaviour . And compiler will not warn you about this ."}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 6460660, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-5fXFJbYxa6w/AAAAAAAAAAI/AAAAAAAAABk/EOasSBkg6c8/photo.jpg?sz=128", "display_name": "Azhagu Surya", "link": "https://stackoverflow.com/users/6460660/azhagu-surya"}, "edited": false, "score": 0, "creation_date": 1466572327, "post_id": 37958935, "comment_id": 63365448, "body": "pleae go to this link, i am really getiing confused, the program doesnt show any error or warning msgs reagrading that issues...."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 91, "user_id": 6460660, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-5fXFJbYxa6w/AAAAAAAAAAI/AAAAAAAAABk/EOasSBkg6c8/photo.jpg?sz=128", "display_name": "Azhagu Surya", "link": "https://stackoverflow.com/users/6460660/azhagu-surya"}, "edited": false, "score": 0, "creation_date": 1466574126, "post_id": 37958935, "comment_id": 63366125, "body": "@AzhaguSurya You&#39;re assuming there should be an error or warning message. Some compilers will be nice and give you a warning <i>if</i> they can figure out there&#39;s a problem, but most won&#39;t. Also your link doesn&#39;t go to any code."}, {"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1466574510, "post_id": 37958935, "comment_id": 63366292, "body": "<a href=\"http://stackoverflow.com/questions/37942101/why-doesnt-the-compiler-warn-you-if-there-is-possible-undefined-behaviour/37942242#37942242\">Undefined behaviour may or may not result in warnings</a>. It is like if one jumps with parachute, he will be saved. If he jumps without one, the behaviour is undefined. Sometimes he may survive, and sometime not. Or may be the shock may convert him into a superhuman (who knows)"}], "tags": [], "owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "is_accepted": false, "score": 5, "last_activity_date": 1466571856, "last_edit_date": 1495540350, "creation_date": 1466571856, "answer_id": 37958935, "question_id": 37958922, "link": "https://stackoverflow.com/questions/37958922/was-it-possible-to-access-the-array-element-of-its-own-size/37958935#37958935", "title": "Was it possible to access the array element of its own size?", "body": "<p>No, accessing the element beyond the array bound is undefined behaviour. Taking address of the element 1 beyond last array element is well defined.</p>\n\n<p>To understand the implications, consider reading <a href=\"https://stackoverflow.com/questions/15646973/how-dangerous-is-it-to-access-an-array-out-of-bounds\">How dangerous is it to access an array out of bounds?</a></p>\n"}, {"tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": false, "score": 3, "last_activity_date": 1466572365, "creation_date": 1466572365, "answer_id": 37959039, "question_id": 37958922, "link": "https://stackoverflow.com/questions/37958922/was-it-possible-to-access-the-array-element-of-its-own-size/37959039#37959039", "title": "Was it possible to access the array element of its own size?", "body": "<p>You answer your own question -</p>\n\n<blockquote>\n  <p>was it ever possible to store any value in array[7]? But the array indexes start from 0 and end with 6, when length is is 7</p>\n</blockquote>\n\n<p>As you see for array of length <code>7</code> , possible indexes are from <code>0</code> to <code>6</code>.  Array is allocated that much memory on stack. If you try to access <code>array[7]</code> then you would be accessing memory past the array which is un-initialized and un-authorized and will cause <em>undefined behaviour</em>.</p>\n"}, {"tags": [], "owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "is_accepted": true, "score": 3, "last_activity_date": 1466573055, "creation_date": 1466573055, "answer_id": 37959188, "question_id": 37958922, "link": "https://stackoverflow.com/questions/37958922/was-it-possible-to-access-the-array-element-of-its-own-size/37959188#37959188", "title": "Was it possible to access the array element of its own size?", "body": "<p>No, You are only allowed to access elements with indexes from <code>0</code> up to <code>size-1</code>. Anything outside of that range causes undefined behavior. If the index was near the range, most probably you read your own program's memory. If the index was largely out of range, most probably your program will be killed by the operating system.</p>\n"}, {"tags": [], "owner": {"reputation": 458, "user_id": 5013959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cb39ec525ee580f1182bbfec3c38b39?s=128&d=identicon&r=PG&f=1", "display_name": "KKastaneda", "link": "https://stackoverflow.com/users/5013959/kkastaneda"}, "is_accepted": false, "score": 1, "last_activity_date": 1466581424, "creation_date": 1466581424, "answer_id": 37961634, "question_id": 37958922, "link": "https://stackoverflow.com/questions/37958922/was-it-possible-to-access-the-array-element-of-its-own-size/37961634#37961634", "title": "Was it possible to access the array element of its own size?", "body": "<p><b>Never try to access out-of-bounds array elements. It has undefined behavior.</b><br/></p>\n\n<p>Though, if you are a damn crazy man, you may try something like this:</p>\n\n<pre><code>int ar[7];\nint tmp = ar[7];\nar[7] = 8;\nstd::cout &lt;&lt; ar[7] &lt;&lt; std::endl; // the output is 8, as you can guess\nar[7] = tmp;\n</code></pre>\n\n<p>If you are <i>lucky enough</i>, this will not cause any error, since you put the initial value of <code>ar[7]</code> back. If you don't, MSVS, in the end of the function, will generate a runtime error with the message:<br/><br/><i>Stack around the variable 'ar' was corrupted</i><br/><br/>Don't know about other compilers.</p>\n"}, {"tags": [], "owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "is_accepted": false, "score": 0, "last_activity_date": 1466699060, "creation_date": 1466699060, "answer_id": 37997024, "question_id": 37958922, "link": "https://stackoverflow.com/questions/37958922/was-it-possible-to-access-the-array-element-of-its-own-size/37997024#37997024", "title": "Was it possible to access the array element of its own size?", "body": "<p>Given <code>char foo[4]</code>, memory will be allocated like this:</p>\n\n<pre><code>foo+0  foo+1  foo+2  foo+3  foo+4\n  |      |      |      |      |\n  |first |second|third |fourth|\n</code></pre>\n\n<p>with the first element nestled between <code>foo+0</code> and <code>foo+1</code>, the second between <code>foo+1,</code> and <code>foo+2</code>, the third between <code>foo+2</code> and <code>foo+3</code>, and the fourth between <code>foo+3</code> and <code>foo+4</code>.  The address <code>foo+4</code> is a perfectly fine address, but the fourth element <em>immediately precedes</em> it (likewise the first element is immediately before <code>foo+1</code>, the second before <code>foo+2</code>, and the third before <code>foo+3</code>.</p>\n\n<p>Most code identifies elements by their starting address, but sometimes it may be useful to have code which operates upon the element immediately preceding a pointer.  For example, if a software-stack pointer points at the next location where an item should be written, then popping the stack should return the item <em>before</em> the address given by that pointer.  If the stack used byte-sized objects and was initialized to <code>foo</code>, then after four single-byte items have been pushed the pointer would be equal to <code>foo+4</code>, indicating that the next item to be popped should be the fourth one.</p>\n"}], "owner": {"reputation": 91, "user_id": 6460660, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-5fXFJbYxa6w/AAAAAAAAAAI/AAAAAAAAABk/EOasSBkg6c8/photo.jpg?sz=128", "display_name": "Azhagu Surya", "link": "https://stackoverflow.com/users/6460660/azhagu-surya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 1, "accepted_answer_id": 37959188, "answer_count": 5, "score": 1, "last_activity_date": 1466699060, "creation_date": 1466571751, "last_edit_date": 1466572058, "question_id": 37958922, "link": "https://stackoverflow.com/questions/37958922/was-it-possible-to-access-the-array-element-of-its-own-size", "title": "Was it possible to access the array element of its own size?", "body": "<p>Can we access the m<sup>th</sup> array element, if it has m elements?\nI mean that, if the array has 7 elements, was it ever possible to store any value in array[7]?\nBut the array indexes start from 0 and end with 6, when length is is 7.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "edited": false, "score": 3, "creation_date": 1466570362, "post_id": 37958658, "comment_id": 63364803, "body": "What is your question?"}, {"owner": {"reputation": 3, "user_id": 6497241, "user_type": "registered", "profile_image": "https://graph.facebook.com/1377054712310589/picture?type=large", "display_name": "Robert Michael Lim", "link": "https://stackoverflow.com/users/6497241/robert-michael-lim"}, "edited": false, "score": 0, "creation_date": 1466570701, "post_id": 37958658, "comment_id": 63364892, "body": "Oops, edited the body. Thank you"}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1466570959, "post_id": 37958658, "comment_id": 63364971, "body": "Can you assume the common elements are in the same order in both lists?"}, {"owner": {"reputation": 3, "user_id": 6497241, "user_type": "registered", "profile_image": "https://graph.facebook.com/1377054712310589/picture?type=large", "display_name": "Robert Michael Lim", "link": "https://stackoverflow.com/users/6497241/robert-michael-lim"}, "edited": false, "score": 0, "creation_date": 1466571103, "post_id": 37958658, "comment_id": 63365019, "body": "Yes, you can assume that. But what if it is not in the proper order?"}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1466571173, "post_id": 37958658, "comment_id": 63365035, "body": "If they&#39;re not in the same order, then you may return false even if all of A is in B (but in a different order).  But requiring the order to be the same does make sense, since in that sense A is truly a sublist of B."}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1466571326, "post_id": 37958658, "comment_id": 63365082, "body": "Ok, so can there be gaps in B?  For instance, if A is (1, 2, 3) and B is (10, 1, 11, 2, 12, 3, 13), does that count as A being a subset?"}, {"owner": {"reputation": 3, "user_id": 6497241, "user_type": "registered", "profile_image": "https://graph.facebook.com/1377054712310589/picture?type=large", "display_name": "Robert Michael Lim", "link": "https://stackoverflow.com/users/6497241/robert-michael-lim"}, "edited": false, "score": 0, "creation_date": 1466571458, "post_id": 37958658, "comment_id": 63365124, "body": "So that means that I should arrange the both lists in the same order?"}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 1, "creation_date": 1466571640, "post_id": 37958658, "comment_id": 63365179, "body": "I asked a specific question.  A is (1, 2, 3) and B is (10, 1, 11, 2, 12, 3, 13).  Do you want TRUE or FALSE?  It sounds like you haven&#39;t yet figured out what functionality you want?"}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1466572774, "post_id": 37958658, "comment_id": 63365600, "body": "The problem statement is very, very incomplete, and OP doesn&#39;t seem to be able to answer very specific questions about the desired functionality.  Voting to close on the grounds that it&#39;s unclear what&#39;s being asked."}, {"owner": {"reputation": 1632, "user_id": 1137382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b70bf08ba67ec43e13287b989ac566b8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Hewitt", "link": "https://stackoverflow.com/users/1137382/jim-hewitt"}, "reply_to_user": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1466573296, "post_id": 37958658, "comment_id": 63365771, "body": "@TomKarzes - Please reconsider.  I actually think you were helping him flesh out some of the issues.  Maybe the initial problem definition wasn&#39;t well defined."}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "reply_to_user": {"reputation": 1632, "user_id": 1137382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b70bf08ba67ec43e13287b989ac566b8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Hewitt", "link": "https://stackoverflow.com/users/1137382/jim-hewitt"}, "edited": false, "score": 0, "creation_date": 1466573823, "post_id": 37958658, "comment_id": 63365998, "body": "@Jim I agree, but then OP stopped responding altogether.  The question was posted prematurely and cannot be answered because OP doesn&#39;t know what he wants it to do.  I&#39;d be happy help by asking questions that will pinpoint it, and in fact I already have, but they have gone unanswered.  So it&#39;s a dead thread.  If OP responds later, and edits the post to clarify it, then I&#39;ll retract it."}, {"owner": {"reputation": 1632, "user_id": 1137382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b70bf08ba67ec43e13287b989ac566b8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Hewitt", "link": "https://stackoverflow.com/users/1137382/jim-hewitt"}, "reply_to_user": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1466573947, "post_id": 37958658, "comment_id": 63366045, "body": "@TomKarzes Fair enough."}, {"owner": {"reputation": 1632, "user_id": 1137382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b70bf08ba67ec43e13287b989ac566b8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Hewitt", "link": "https://stackoverflow.com/users/1137382/jim-hewitt"}, "edited": false, "score": 0, "creation_date": 1466574127, "post_id": 37958658, "comment_id": 63366127, "body": "@Robert - Please re-submit your question.  You&#39;ll need to address the issues Tom raised and make a decision on the whether the lists are ordered or not."}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "reply_to_user": {"reputation": 1632, "user_id": 1137382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b70bf08ba67ec43e13287b989ac566b8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Hewitt", "link": "https://stackoverflow.com/users/1137382/jim-hewitt"}, "edited": false, "score": 0, "creation_date": 1466574185, "post_id": 37958658, "comment_id": 63366153, "body": "@Jim It&#39;s too late.  OP has stopped reading comments and in fact has accepted an answer that has bugs which I explained very clearly in comments."}], "answers": [{"comments": [{"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1466571250, "post_id": 37958806, "comment_id": 63365066, "body": "This doesn&#39;t solve the problem.  It needs to check the list values.  You can&#39;t assume that the nodes are shared."}, {"owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "reply_to_user": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1466571367, "post_id": 37958806, "comment_id": 63365091, "body": "if the address <code>A</code> is found in list <code>B</code> the rest of the members have to be shared until NULL."}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1466571413, "post_id": 37958806, "comment_id": 63365108, "body": "Yes, but if it&#39;s not then you&#39;ll report a false failure.  All this is doing is checking if A is a shared tail of B.  Different problem."}, {"owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "reply_to_user": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1466572136, "post_id": 37958806, "comment_id": 63365373, "body": "Is there any way that A can be a subset without being a shared tail?"}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1466572526, "post_id": 37958806, "comment_id": 63365528, "body": "Of course.  Here&#39;s a very clear example.  A is (1, 2, 3) and B is (10, 1, 2, 3, 11)  A is a subset B.  They share no nodes.  In fact, B could simply be a copy of A and your solution would still fail."}], "tags": [], "owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "is_accepted": false, "score": 0, "last_activity_date": 1466572094, "last_edit_date": 1466572094, "creation_date": 1466571138, "answer_id": 37958806, "question_id": 37958658, "link": "https://stackoverflow.com/questions/37958658/how-to-check-if-it-is-a-subset-with-linked-lists-in-c/37958806#37958806", "title": "How to check if it is a subset with linked lists in C", "body": "<p>A linked list <code>A</code> will be a subset of <code>B</code> if, as you loop through the list B, you will find the address A somewhere within. Once the address <code>A</code> is found, the rest of the lists will be identical. So, you only need to search in one loop for this address <code>A</code></p>\n\n<p>It is better to compare pointers rather than data as data of two nodes can be same, but the addresses will be different.</p>\n\n<p>Code is below.</p>\n\n<pre><code>boolean compareList(LIST A, LIST B)\n{\n  LIST p;\n  boolean checker=FALSE;\n  for(p=B;p!=NULL;p=p-&gt;next)\n  {\n    if (p == A)\n    {\n      checker = TRUE;\n      break;\n    }\n  }\n\n  return checker;\n} \n</code></pre>\n\n<p>In response to Tom's comments --</p>\n\n<p>Consider </p>\n\n<pre><code>List B -&gt; B1 -&gt; B2 -&gt; B3 -&gt; B4 -&gt; B5 -&gt; B6 -&gt; ...\nlist A -&gt; A1 -&gt; A2 -&gt; A3 -&gt; ..\n</code></pre>\n\n<p>Now if, </p>\n\n<pre><code>A == B3, then it follows that,\nA1 == B4,\nA2 == B5 and so on..\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1466572677, "post_id": 37959042, "comment_id": 63365573, "body": "This disregards order, which it sounded like OP cared about (although OP doesn&#39;t seem to understand the problem).  But this answer will fail if A contains duplicates that are not duplicated in B.  Example:  A is (1, 2, 2, 3) and B is (1, 2, 3).  I would not consider A to be a subset of B in this case.  But the problem statement is very incomplete so it&#39;s not clear what OP wants.  That&#39;s why no answer is really possible for now."}], "tags": [], "owner": {"reputation": 1422, "user_id": 4538770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adfd2f0b91001372439c7e23c60e4c52?s=128&d=identicon&r=PG", "display_name": "Jo&#235;l Hecht", "link": "https://stackoverflow.com/users/4538770/jo%c3%abl-hecht"}, "is_accepted": true, "score": 0, "last_activity_date": 1466572387, "creation_date": 1466572387, "answer_id": 37959042, "question_id": 37958658, "link": "https://stackoverflow.com/questions/37958658/how-to-check-if-it-is-a-subset-with-linked-lists-in-c/37959042#37959042", "title": "How to check if it is a subset with linked lists in C", "body": "<p>For each element of A you have to test if it is present in B. If ever only one element of A is not in B, just return FALSE.\nYour code needed only a few modifications:</p>\n\n<pre><code>boolean compareList(LIST A, LIST B)\n{\n    LIST p, q;\n\n    for(p=A;p!=NULL;p=p-&gt;next){\n        for(q=B;q!=NULL;q=q-&gt;next){\n            if(q-&gt;data==p-&gt;data)\n                break; // The element is found, no need to go further in B\n        }\n        if (q == NULL) // At least one element of A is not in B\n            return FALSE;\n    }\n\n    return TRUE;\n} \n</code></pre>\n\n<p>Note: in your code you use <code>-&gt;data</code> as a member of <code>LIST</code>. Your struct typedef is named <code>List</code> and has no <code>data</code> member :)</p>\n"}], "owner": {"reputation": 3, "user_id": 6497241, "user_type": "registered", "profile_image": "https://graph.facebook.com/1377054712310589/picture?type=large", "display_name": "Robert Michael Lim", "link": "https://stackoverflow.com/users/6497241/robert-michael-lim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 834, "favorite_count": 0, "accepted_answer_id": 37959042, "answer_count": 2, "score": -1, "last_activity_date": 1466574221, "creation_date": 1466570236, "last_edit_date": 1466574221, "question_id": 37958658, "link": "https://stackoverflow.com/questions/37958658/how-to-check-if-it-is-a-subset-with-linked-lists-in-c", "title": "How to check if it is a subset with linked lists in C", "body": "<p>Good day everyone! This is my First time posting in Stack Overflow and I am quite enjoying my stay here.</p>\n\n<p>So this function will return TRUE if the linked list A is a subset of linked list B.</p>\n\n<p>But it seems that it only changes the boolean value if it is done checking the first node. How do I make it check all of it? The lists are in proper order.</p>\n\n<pre><code>    boolean compareList(LIST A, LIST B)\n{\n    LIST p, q;\n    boolean checker=FALSE;\n    for(p=A;p!=NULL;p=p-&gt;next){\n        for(q=B;q!=NULL;q=q-&gt;next){\n            if(q-&gt;data==p-&gt;data){\n                checker=TRUE;\n                break;\n            }\n        }\n    }\n\n    return checker;\n} \n</code></pre>\n\n<p>And this is the structure datatype: </p>\n\n<pre><code>    typedef struct node{\n    int num;\n    struct node *next;\n}*List;\n</code></pre>\n\n<p>Thank you and have a good day, Stack Overflow!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1466569929, "post_id": 37958585, "comment_id": 63364704, "body": "Please learn how to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a> and show it to us. Also please <a href=\"http://stackoverflow.com/help/how-to-ask\">read about how to ask good questions</a>."}, {"owner": {"reputation": 6951, "user_id": 3475381, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b6a1c5d19f4ae8c6a1dbf097487c96d7?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Sehgal", "link": "https://stackoverflow.com/users/3475381/gaurav-sehgal"}, "edited": false, "score": 0, "creation_date": 1466570096, "post_id": 37958585, "comment_id": 63364740, "body": "You cannot force the user to enter integers.You can only request him and later check whether user complied or not."}, {"owner": {"reputation": 11, "user_id": 6491873, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206264316626731/picture?type=large", "display_name": "Yeo Meng Hwee", "link": "https://stackoverflow.com/users/6491873/yeo-meng-hwee"}, "edited": false, "score": 0, "creation_date": 1466570190, "post_id": 37958585, "comment_id": 63364760, "body": "Yes I mean to check for a specific array for integers in a string?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1466592779, "post_id": 37958585, "comment_id": 63377848, "body": "The custom practice for fail-safe console input is to always use <code>fgets()</code> and read the input as a string. You can then sanity-check the input and block invalid data. Once you have verified that the input is ok, you can convert it to integer or whatever data type you like."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6491873, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206264316626731/picture?type=large", "display_name": "Yeo Meng Hwee", "link": "https://stackoverflow.com/users/6491873/yeo-meng-hwee"}, "edited": false, "score": 0, "creation_date": 1466584464, "post_id": 37962176, "comment_id": 63372175, "body": "I not sure can I check if boolean for c programming?"}, {"owner": {"reputation": 94, "user_id": 6482571, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FAZQL.jpg?s=128&g=1", "display_name": "Daniyal Javaid", "link": "https://stackoverflow.com/users/6482571/daniyal-javaid"}, "reply_to_user": {"reputation": 11, "user_id": 6491873, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206264316626731/picture?type=large", "display_name": "Yeo Meng Hwee", "link": "https://stackoverflow.com/users/6491873/yeo-meng-hwee"}, "edited": false, "score": 0, "creation_date": 1466585330, "post_id": 37962176, "comment_id": 63372711, "body": "this code is for only 1st and last char to be alphabets, if u want the complete code (1st and last must be alphabets and all middle must be digits), I can provide you , well that is simple enough you can try first"}, {"owner": {"reputation": 11, "user_id": 6491873, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206264316626731/picture?type=large", "display_name": "Yeo Meng Hwee", "link": "https://stackoverflow.com/users/6491873/yeo-meng-hwee"}, "edited": false, "score": 0, "creation_date": 1466587945, "post_id": 37962176, "comment_id": 63374576, "body": "Ok I give it a try first"}], "tags": [], "owner": {"reputation": 94, "user_id": 6482571, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FAZQL.jpg?s=128&g=1", "display_name": "Daniyal Javaid", "link": "https://stackoverflow.com/users/6482571/daniyal-javaid"}, "is_accepted": false, "score": 0, "last_activity_date": 1466582973, "creation_date": 1466582973, "answer_id": 37962176, "question_id": 37958585, "link": "https://stackoverflow.com/questions/37958585/how-to-force-user-to-insert-only-numbers-in-a-string-if-i-force-the-first-and-th/37962176#37962176", "title": "How to force user to insert only numbers in a string if I force the first and the last to be letters in a 10 length string? Example S2351566A", "body": "<p>if only 1st and last elements must be characters , then u can try this,\nbut if u want 1st and last element to be char and all middle to be digits then add another if statement after first \"if\"</p>\n\n<p>boolean b=false;</p>\n\n<p>while(b!=true){</p>\n\n<p>take input in ch[10];</p>\n\n<p>if(ch[0]>='A'&amp;&amp;ch[0]&lt;='Z' &amp;&amp; ch[9]>='A'&amp;&amp;ch[0]&lt;='9'){</p>\n\n<p>//means 1st and last are char</p>\n\n<p>b=true;//will break because of this\n}</p>\n\n<p>else {</p>\n\n<p>print f(\"Wrong input, enter again\");</p>\n\n<p>b=false;}</p>\n\n<p>}\n//this will run until user does not give correct input</p>\n"}], "owner": {"reputation": 11, "user_id": 6491873, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206264316626731/picture?type=large", "display_name": "Yeo Meng Hwee", "link": "https://stackoverflow.com/users/6491873/yeo-meng-hwee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466582973, "creation_date": 1466569797, "last_edit_date": 1466571118, "question_id": 37958585, "link": "https://stackoverflow.com/questions/37958585/how-to-force-user-to-insert-only-numbers-in-a-string-if-i-force-the-first-and-th", "title": "How to force user to insert only numbers in a string if I force the first and the last to be letters in a 10 length string? Example S2351566A", "body": "<pre><code>Int char10];// length of string \n{\n   if (!isalpha(str[0]) || !isalpha(str[8]))// force 1st and last array to be alphabet\n    { \n        printf(\"invalid input\\n\"); exit(1); // invalid \n    }\n}\n</code></pre>\n"}, {"tags": ["c", "function", "return-value", "return-type"], "comments": [{"owner": {"reputation": 2917, "user_id": 4031604, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d800dd437bdbb2645b3c71236583fd?s=128&d=identicon&r=PG&f=1", "display_name": "AnArrayOfFunctions", "link": "https://stackoverflow.com/users/4031604/anarrayoffunctions"}, "edited": false, "score": 1, "creation_date": 1466569646, "post_id": 37958511, "comment_id": 63364626, "body": "If you doesn&#39;t specify declaration type it&#39;s defaulted to <code>int</code>. But I guess the compiler would have gave you the same information in the form of a warning if you have tried compiling some test code."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1466569777, "post_id": 37958511, "comment_id": 63364671, "body": "If you read <a href=\"http://en.cppreference.com/w/c/language/function_definition#Notes\" rel=\"nofollow noreferrer\">the notes in this reference</a>, it will tell you that return type was optional in the C89 standard (and earlier)"}], "answers": [{"tags": [], "owner": {"reputation": 435637, "user_id": 367273, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f1ed2b0c87f602ef30229f5c4b04eff6?s=128&d=identicon&r=PG", "display_name": "NPE", "link": "https://stackoverflow.com/users/367273/npe"}, "is_accepted": true, "score": 3, "last_activity_date": 1466569768, "creation_date": 1466569768, "answer_id": 37958574, "question_id": 37958511, "link": "https://stackoverflow.com/questions/37958511/is-it-okay-to-specify-return-type-in-function-prototype-and-not-in-function-defi/37958574#37958574", "title": "Is it okay to specify return type in function prototype and not in function definition in c?", "body": "<p>You have to specify the return type in both, and the return types have to match.</p>\n\n<p>As a special case, in earlier versions of C you could omit the return type if it were <code>int</code>, but this is no longer allowed (as of C99).</p>\n"}], "owner": {"reputation": 13, "user_id": 6497220, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4TAf8j20psE/AAAAAAAAAAI/AAAAAAAACc8/QSec8IUAvjc/photo.jpg?sz=128", "display_name": "Pratik Velhal", "link": "https://stackoverflow.com/users/6497220/pratik-velhal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 37958574, "answer_count": 1, "score": -1, "last_activity_date": 1466569768, "creation_date": 1466569387, "question_id": 37958511, "link": "https://stackoverflow.com/questions/37958511/is-it-okay-to-specify-return-type-in-function-prototype-and-not-in-function-defi", "title": "Is it okay to specify return type in function prototype and not in function definition in c?", "body": "<p>Can we specify the return type in just the function declaration and not in the function definition or does it have to be there in both ?</p>\n"}, {"tags": ["c", "algorithm", "gps", "point-in-polygon"], "comments": [{"owner": {"reputation": 808, "user_id": 1965803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LkQUn.jpg?s=128&g=1", "display_name": "Eddy_Em", "link": "https://stackoverflow.com/users/1965803/eddy-em"}, "edited": false, "score": 1, "creation_date": 1466577692, "post_id": 37958440, "comment_id": 63367948, "body": "long 51.5074? Sure???"}, {"owner": {"reputation": 1065, "user_id": 3845747, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9u54v.jpg?s=128&g=1", "display_name": "MrPickles", "link": "https://stackoverflow.com/users/3845747/mrpickles"}, "reply_to_user": {"reputation": 808, "user_id": 1965803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LkQUn.jpg?s=128&g=1", "display_name": "Eddy_Em", "link": "https://stackoverflow.com/users/1965803/eddy-em"}, "edited": false, "score": 0, "creation_date": 1466587993, "post_id": 37958440, "comment_id": 63374608, "body": "What&#39;s wrong with that?"}, {"owner": {"reputation": 808, "user_id": 1965803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LkQUn.jpg?s=128&g=1", "display_name": "Eddy_Em", "link": "https://stackoverflow.com/users/1965803/eddy-em"}, "edited": false, "score": 0, "creation_date": 1466595431, "post_id": 37958440, "comment_id": 63379545, "body": "&quot;long&quot; is an integer type, not floating point!"}], "answers": [{"comments": [{"owner": {"reputation": 1065, "user_id": 3845747, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9u54v.jpg?s=128&g=1", "display_name": "MrPickles", "link": "https://stackoverflow.com/users/3845747/mrpickles"}, "edited": false, "score": 0, "creation_date": 1466591228, "post_id": 37960627, "comment_id": 63376809, "body": "So would I just make a check whether the longitude is greater than zero or less than zero and handle the case, accordingly?"}, {"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "reply_to_user": {"reputation": 1065, "user_id": 3845747, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9u54v.jpg?s=128&g=1", "display_name": "MrPickles", "link": "https://stackoverflow.com/users/3845747/mrpickles"}, "edited": false, "score": 0, "creation_date": 1466591313, "post_id": 37960627, "comment_id": 63376870, "body": "First ask yourself how you will represent such a window."}, {"owner": {"reputation": 1065, "user_id": 3845747, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9u54v.jpg?s=128&g=1", "display_name": "MrPickles", "link": "https://stackoverflow.com/users/3845747/mrpickles"}, "edited": false, "score": 0, "creation_date": 1466591349, "post_id": 37960627, "comment_id": 63376897, "body": "I can&#39;t just represent it using two points (lower left and upper right) like I&#39;ve been doing?"}, {"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "reply_to_user": {"reputation": 1065, "user_id": 3845747, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9u54v.jpg?s=128&g=1", "display_name": "MrPickles", "link": "https://stackoverflow.com/users/3845747/mrpickles"}, "edited": false, "score": 0, "creation_date": 1466591451, "post_id": 37960627, "comment_id": 63376959, "body": "Mh, how you do you distinguish from the plain rectangle with the same corners ?"}, {"owner": {"reputation": 1065, "user_id": 3845747, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9u54v.jpg?s=128&g=1", "display_name": "MrPickles", "link": "https://stackoverflow.com/users/3845747/mrpickles"}, "edited": false, "score": 0, "creation_date": 1466591769, "post_id": 37960627, "comment_id": 63377141, "body": "Still struggling to find the coordinates that break it.  For example, (51, -180) = lower left, (52, 180) = upper right and (51.5, -179) = point_that_lies_in_rect returns true...which is correct.  Do you have a point that will break this?"}, {"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "reply_to_user": {"reputation": 1065, "user_id": 3845747, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9u54v.jpg?s=128&g=1", "display_name": "MrPickles", "link": "https://stackoverflow.com/users/3845747/mrpickles"}, "edited": false, "score": 0, "creation_date": 1466591977, "post_id": 37960627, "comment_id": 63377288, "body": "@MrPickles: following your convention (except that you didn&#39;t answer my question), this window accepts all longitudes, so no surprise it returns true."}, {"owner": {"reputation": 1065, "user_id": 3845747, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9u54v.jpg?s=128&g=1", "display_name": "MrPickles", "link": "https://stackoverflow.com/users/3845747/mrpickles"}, "edited": false, "score": 0, "creation_date": 1466592066, "post_id": 37960627, "comment_id": 63377352, "body": "It would return false if longitude (point_to_be_found) = 181."}, {"owner": {"reputation": 1065, "user_id": 3845747, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9u54v.jpg?s=128&g=1", "display_name": "MrPickles", "link": "https://stackoverflow.com/users/3845747/mrpickles"}, "edited": false, "score": 0, "creation_date": 1466592283, "post_id": 37960627, "comment_id": 63377494, "body": "Yes, it looks like the func handles that case correctly unless I&#39;m missing something."}, {"owner": {"reputation": 1065, "user_id": 3845747, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9u54v.jpg?s=128&g=1", "display_name": "MrPickles", "link": "https://stackoverflow.com/users/3845747/mrpickles"}, "edited": false, "score": 0, "creation_date": 1466592543, "post_id": 37960627, "comment_id": 63377684, "body": "I ran it through my test case...you&#39;ve yet to provide a point that breaks the func."}, {"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "reply_to_user": {"reputation": 1065, "user_id": 3845747, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9u54v.jpg?s=128&g=1", "display_name": "MrPickles", "link": "https://stackoverflow.com/users/3845747/mrpickles"}, "edited": false, "score": 0, "creation_date": 1466592576, "post_id": 37960627, "comment_id": 63377708, "body": "@MrPickles Good luck."}], "tags": [], "owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "is_accepted": false, "score": 1, "last_activity_date": 1466578496, "creation_date": 1466578496, "answer_id": 37960627, "question_id": 37958440, "link": "https://stackoverflow.com/questions/37958440/c-edge-cases-for-finding-point-within-rectangle-prime-meridian-equator-etc/37960627#37960627", "title": "C: Edge cases for finding point within rectangle (Prime meridian, equator, etc)?", "body": "<p>Problems arise with a window like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Lub5F.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Lub5F.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 1065, "user_id": 3845747, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9u54v.jpg?s=128&g=1", "display_name": "MrPickles", "link": "https://stackoverflow.com/users/3845747/mrpickles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1466578496, "creation_date": 1466568876, "last_edit_date": 1466569409, "question_id": 37958440, "link": "https://stackoverflow.com/questions/37958440/c-edge-cases-for-finding-point-within-rectangle-prime-meridian-equator-etc", "title": "C: Edge cases for finding point within rectangle (Prime meridian, equator, etc)?", "body": "<p>Finding a point-in-a-polygon is a common problem, however, I don't understand why many have made edge cases for the prime meridian, equator and international date line.  Don't the negative values for points west of the prime meridian and positive values for points east of the prime meridian take care of any problems?</p>\n\n<p>The function below tries to see if a point exists within a rectangle (i.e. it uses two points to determine the rectangle).  It doesn't make any checks for the prime meridian or equator and so far I have yet to find a single edge case that my function fails on.  Am I missing something or have many programmers unnecessarily tried to deal with this edge case?</p>\n\n<p>Can anyone find any edge cases where the following function would return true/false when it should have returned vice versa?  I'm assuming if someone does find one it'd deal with a point in between the prime meridian, equator or international date line.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdbool.h&gt;\n\ntypedef struct point_s\n{\n  long latitude;\n  long longitude;\n} point_t;\n\nbool find_point_on_plane(point_t *, point_t *, point_t *);\nint main(int argc, char * argv[])\n{\n  point_t * london    = (point_t *) malloc(sizeof(point_t));\n  point_t * cambridge = (point_t *) malloc(sizeof(point_t));\n  point_t * x         = (point_t *) malloc(sizeof(point_t));\n\n  london-&gt;latitude  = 51.5074;\n  london-&gt;longitude = -.1278; \n  cambridge-&gt;latitude  = 52.2053;\n  cambridge-&gt;longitude  = 0.1218;\n  x-&gt;latitude  = 52.0;\n  x-&gt;longitude = 0.0;\n\n  find_point_on_plane(london, cambridge, x) ? printf(\"True.\\n\") : printf(\"False.\\n\"); \n  return 0;\n}\n\nbool find_point_on_plane(point_t * lower_left, point_t * upper_right, point_t * x)\n{\n    if(x-&gt;latitude &lt;= upper_right-&gt;latitude &amp;&amp;\n       x-&gt;latitude &gt;= lower_left-&gt;latitude  &amp;&amp;\n       x-&gt;longitude &lt;= upper_right-&gt;longitude &amp;&amp;\n       x-&gt;longitude &gt;= lower_left-&gt;longitude)\n    {\n        return true;\n    }\n    return false;\n}\n</code></pre>\n"}, {"tags": ["c", "type-conversion", "intrinsics", "xeon-phi", "avx512"], "comments": [{"owner": {"reputation": 1807, "user_id": 1900441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa3540494c1cb556bf1f517992b172fe?s=128&d=identicon&r=PG", "display_name": "Jim Cownie", "link": "https://stackoverflow.com/users/1900441/jim-cownie"}, "edited": false, "score": 2, "creation_date": 1466600905, "post_id": 37958328, "comment_id": 63383700, "body": "Please remove KNL from your title. You are not asking about KNL (Knights Landing),  but (as you make clear elsewhere) Knights Corner (KNC)."}], "owner": {"reputation": 631, "user_id": 1649948, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5a42795ba591110c540563b1b396f2df?s=128&d=identicon&r=PG", "display_name": "user1649948", "link": "https://stackoverflow.com/users/1649948/user1649948"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1481118733, "creation_date": 1466568069, "last_edit_date": 1481118733, "question_id": 37958328, "link": "https://stackoverflow.com/questions/37958328/convert-8-bit-unsigned-integer-to-from-float-on-intel-knights-corner-knc-xeon", "title": "convert 8-bit unsigned integer to/from float on Intel Knights Corner (KNC, Xeon Phi Gen 1)", "body": "<p>I'm making a program for the Knights Corner (KNC) cpu to execute. It seems to have a prototype of AVX512 as its instruction set, but I could find no indication on the Intel Intrinsic Guide for conversion between various integer widths. </p>\n\n<p>Specifically, I'm trying to convert 8-bit integers (unsigned) into 32-bit integers so I can operate on them with KNC. How can I do this on KNC? Is there some equivalent to AVX512-F's <code>_mm512_cvtepu8_epi32()</code> to go from 8-bit to 32-bit and <code>_mm512_cvtu[s]epi32_epi8()</code> to go from 32-bit back to 8-bit?</p>\n"}, {"tags": ["c", "memory", "valgrind", "gmp"], "comments": [{"owner": {"reputation": 321, "user_id": 5046743, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-VydY1c0coOU/AAAAAAAAAAI/AAAAAAAABDA/tuXFbRJ3tpU/photo.jpg?sz=128", "display_name": "Poptart", "link": "https://stackoverflow.com/users/5046743/poptart"}, "edited": false, "score": 0, "creation_date": 1466691446, "post_id": 37958270, "comment_id": 63432118, "body": "Paul Zimmermann states, &quot; Fast multiplication algorithms like FFT imply a larger memory usage. Very roughly for a n x n product, you need two buffers of size about 4n, thus the extra memory usage is 8n (in addition to the space needed for the inputs and outputs)&quot; in <a href=\"https://gmplib.org/list-archives/gmp-discuss/2016-June/006009.html\" rel=\"nofollow noreferrer\">gmplib.org/list-archives/gmp-discuss/2016-June/006009.html</a> which gives a nice estimate of memory usage by large input multiplication."}], "owner": {"reputation": 321, "user_id": 5046743, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-VydY1c0coOU/AAAAAAAAAAI/AAAAAAAABDA/tuXFbRJ3tpU/photo.jpg?sz=128", "display_name": "Poptart", "link": "https://stackoverflow.com/users/5046743/poptart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1466575409, "creation_date": 1466567655, "last_edit_date": 1466575409, "question_id": 37958270, "link": "https://stackoverflow.com/questions/37958270/gnu-mp-temporary-scratch-memory-usage", "title": "GNU MP Temporary/Scratch Memory Usage", "body": "<p>I've been trying to measure how much temporary memory GNU MP is using with valgrind's massif tool with the option <code>--stacks=yes</code>. Valgrind is reporting 0 heap usage throughout the entire program and only stack usage.</p>\n\n<p>In order to measure temporary memory usage, I've tried reconfiguring GMP MP Library by switching <code>--enable-alloca</code> from <code>yes</code> to <code>no</code> to shift the temporary memory onto the heap instead of stack, but it doesn't seem to result in any significant differences in stack usage data outputted by massif. </p>\n\n<p>My peak physical RAM usage when I run my particular program is 3 times as large as the input and output combined, and I'm simply multiplying integers. This leads me to suspect that scratch/temporary space is a large portion of the RAM usage. How can I best profile temporary memory usage continuously throughout the running of the program?</p>\n"}, {"tags": ["c", "linux", "gcc", "android-ndk"], "comments": [{"owner": {"reputation": 21, "user_id": 6497055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b7a17c223b1ef75bf9343f918f6ad30?s=128&d=identicon&r=PG&f=1", "display_name": "Starsky", "link": "https://stackoverflow.com/users/6497055/starsky"}, "edited": false, "score": 0, "creation_date": 1466566601, "post_id": 37958100, "comment_id": 63363871, "body": "#include &lt;stdio.h&gt;  int main(void)  { \tprintf(&quot;Hello world!\\n&quot;); \treturn 0; }"}, {"owner": {"reputation": 830, "user_id": 2165524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xg2Jb.jpg?s=128&g=1", "display_name": "&#181;tex", "link": "https://stackoverflow.com/users/2165524/%c2%b5tex"}, "edited": false, "score": 0, "creation_date": 1466569609, "post_id": 37958100, "comment_id": 63364613, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/14307611/problems-compiling-object-using-arm-linux-androideabi-gcc\" title=\"problems compiling object using arm linux androideabi gcc\">stackoverflow.com/questions/14307611/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 6497055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b7a17c223b1ef75bf9343f918f6ad30?s=128&d=identicon&r=PG&f=1", "display_name": "Starsky", "link": "https://stackoverflow.com/users/6497055/starsky"}, "edited": false, "score": 0, "creation_date": 1466574088, "post_id": 37958827, "comment_id": 63366107, "body": "I work on putty, make whole android project is OK, in BoardConfig.mk, CROSS_COMPILE := prebuilts/gcc/linux-x86/arm/arm-eabi-4.6/bin/arm-eabi-."}, {"owner": {"reputation": 21, "user_id": 6497055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b7a17c223b1ef75bf9343f918f6ad30?s=128&d=identicon&r=PG&f=1", "display_name": "Starsky", "link": "https://stackoverflow.com/users/6497055/starsky"}, "edited": false, "score": 0, "creation_date": 1466574771, "post_id": 37958827, "comment_id": 63366420, "body": "If  I just run gcc text.c -o hello, there is no problem"}, {"owner": {"reputation": 8053, "user_id": 292502, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/PVqCK.jpg?s=128&g=1", "display_name": "Csaba Toth", "link": "https://stackoverflow.com/users/292502/csaba-toth"}, "edited": false, "score": 0, "creation_date": 1585548988, "post_id": 37958827, "comment_id": 107788007, "body": "It doesn&#39;t seem to be a <code>gcc-arm-linux-androideabi</code> package any more. It seems like it was a one-off for 16.04 LTS Xenial? I need it though now."}], "tags": [], "owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "is_accepted": false, "score": 0, "last_activity_date": 1466571259, "creation_date": 1466571259, "answer_id": 37958827, "question_id": 37958100, "link": "https://stackoverflow.com/questions/37958100/arm-linux-androideabi-gcc-no-such-file/37958827#37958827", "title": "arm-linux-androideabi-gcc no such file", "body": "<p>You need to install pre-requested package using below command,</p>\n\n<pre><code>sudo apt-get install gcc-arm-linux-androideabi\n</code></pre>\n\n<p>then run the </p>\n\n<pre><code>arm-linux-androideabi-gcc --sysroot=/opt/android/android-ndk-r9c/platforms/android-19/arch-arm -o test lin.c\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6497055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b7a17c223b1ef75bf9343f918f6ad30?s=128&d=identicon&r=PG&f=1", "display_name": "Starsky", "link": "https://stackoverflow.com/users/6497055/starsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 4308, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1466571259, "creation_date": 1466566535, "last_edit_date": 1466566749, "question_id": 37958100, "link": "https://stackoverflow.com/questions/37958100/arm-linux-androideabi-gcc-no-such-file", "title": "arm-linux-androideabi-gcc no such file", "body": "<p>test.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) \n{\n\n    printf(\"Hello world!\\n\");\n\n\n    return 0;\n\n}\n</code></pre>\n\n<p>then,</p>\n\n<pre><code>prebuilts/gcc/linux-x86/arm/arm-linux-androideabi-4.6/bin/arm-linux-androideabi-gcc test.c -o hello\n\ntest.c:1:19: fatal error: stdio.h: No such file or directory\n</code></pre>\n\n<p>how to use this gcc in android project? </p>\n\n<p>add systoot?</p>\n\n<p>I try </p>\n\n<pre><code>prebuilts/gcc/linux-x86/arm/arm-linux-androideabi-4.6/bin/arm-linux-androideabi-gcc --sysroot=bionic/libc/arch-arm test.c -o hello\n</code></pre>\n\n<p>but get the same result:</p>\n\n<pre><code>test.c:1:19: fatal error: stdio.h: No such file or directory\n</code></pre>\n\n<p>please help !</p>\n"}, {"tags": ["c", "pointers", "for-loop", "increment"], "answers": [{"comments": [{"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 3560, "user_id": 5550963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7jAip.png?s=128&g=1", "display_name": "CEPB", "link": "https://stackoverflow.com/users/5550963/cepb"}, "edited": false, "score": 1, "creation_date": 1466566540, "post_id": 37957989, "comment_id": 63363855, "body": "@GRC It works perfectly, as long as you null-terminate the string (<a href=\"http://ideone.com/CPjKdn\" rel=\"nofollow noreferrer\">demo</a>)."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 3560, "user_id": 5550963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7jAip.png?s=128&g=1", "display_name": "CEPB", "link": "https://stackoverflow.com/users/5550963/cepb"}, "edited": false, "score": 1, "creation_date": 1466568054, "post_id": 37957989, "comment_id": 63364205, "body": "@GRC Your function works perfectly, too (<a href=\"http://ideone.com/XCYxQ1\" rel=\"nofollow noreferrer\">demo</a>)."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 4, "last_activity_date": 1466565816, "creation_date": 1466565816, "answer_id": 37957989, "question_id": 37957929, "link": "https://stackoverflow.com/questions/37957929/incrementing-pointer-vs-adding-to-the-pointer/37957989#37957989", "title": "Incrementing pointer vs. adding to the pointer", "body": "<p>Assuming that <code>i</code> is initialized to zero before the loop, the two loops are equivalent.</p>\n\n<p>However, assuming that <code>len</code> represents the length of the buffer pointed to by <code>s</code>, both fragments contain undefined behavior: when <code>i</code> reaches <code>len</code>, the assignment to <code>*(s+i)</code> is done <em>before</em> <code>i</code> is checked for overrun. That is why the <code>i &lt; len</code> check must be moved to the front of the condition:</p>\n\n<pre><code>for (i = 0 ; i &lt; len &amp;&amp; (*(s + i) = getchar()) != EOF &amp;&amp; *(s + i) != '\\n' ; ++i) {\n    ...\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 1220, "user_id": 2172854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hm0Q1.png?s=128&g=1", "display_name": "abhishek_naik", "link": "https://stackoverflow.com/users/2172854/abhishek-naik"}, "edited": false, "score": 1, "creation_date": 1466568790, "post_id": 37958298, "comment_id": 63364388, "body": "@BatCoder This is correct, loop body is supposed to be empty."}], "tags": [], "owner": {"reputation": 1474, "user_id": 6497083, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/1I9Cr.jpg?s=128&g=1", "display_name": "Shubham Jain", "link": "https://stackoverflow.com/users/6497083/shubham-jain"}, "is_accepted": false, "score": 1, "last_activity_date": 1466568481, "last_edit_date": 1466568481, "creation_date": 1466567871, "answer_id": 37958298, "question_id": 37957929, "link": "https://stackoverflow.com/questions/37957929/incrementing-pointer-vs-adding-to-the-pointer/37958298#37958298", "title": "Incrementing pointer vs. adding to the pointer", "body": "<p>Well I tried both loop statements and it works fine. I don't see a problem in the statements (apart from ordering of boolean expressions). Please post more code.</p>\n\n<pre><code>char s[10];\nint len = 9;\nint i = 0;\nfor (;i&lt;len &amp;&amp; (*(s + i) = getchar()) != EOF &amp;&amp; *(s + i) != '\\n';++i);\ns[i] = 0;\nprintf(\"%s\\n\",s);\n</code></pre>\n\n<p>Well, when I press Ctrl+D after typing in some characters, they are printed back.</p>\n"}, {"comments": [{"owner": {"reputation": 3560, "user_id": 5550963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7jAip.png?s=128&g=1", "display_name": "CEPB", "link": "https://stackoverflow.com/users/5550963/cepb"}, "edited": false, "score": 0, "creation_date": 1522881257, "post_id": 37964910, "comment_id": 86332672, "body": "@Lunda Thank you for your help, I know my code is one of those that you are never suppose to use but it is great learning experience. This question is real example of what obscure code and tiredness can do :)."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1531665181, "post_id": 37964910, "comment_id": 89671221, "body": "On top of of being readable, this version also silently fixes the common beginner&#39;s EOF-will-not-be-detected-corretly-as-getchars-result-is-assi&zwnj;&#8203;gned-to-a-char-where&zwnj;&#8203;as-it-returns-int-by&zwnj;&#8203;-intention bug."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 2, "last_activity_date": 1466590154, "creation_date": 1466590154, "answer_id": 37964910, "question_id": 37957929, "link": "https://stackoverflow.com/questions/37957929/incrementing-pointer-vs-adding-to-the-pointer/37964910#37964910", "title": "Incrementing pointer vs. adding to the pointer", "body": "<p>The core problem is that your code is so needlessly obscure, so you can't easily tell what it does. I think dasblinkenlight's answer points out the specific bug.</p>\n\n<p>Consider writing readable code where the loop is trivial. Write code where it is perfectly clear what side effects there are and when they are executed/sequenced in relation to each other:</p>\n\n<pre><code>size_t i;\nfor(i=0; i&lt;len; i++)\n{\n  int ch = getchar();\n  if(ch == EOF || ch == '\\n')\n  {\n    break;\n  }\n\n  s[i] = (char)ch;\n}\n\ns[i] = '\\0';\n</code></pre>\n\n<p>As a bonus, the compiler might be able to generate more cache-friendly code out of this, so this might also be faster than what you had.</p>\n"}], "owner": {"reputation": 3560, "user_id": 5550963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7jAip.png?s=128&g=1", "display_name": "CEPB", "link": "https://stackoverflow.com/users/5550963/cepb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "closed_date": 1493478610, "accepted_answer_id": 37957989, "answer_count": 3, "score": -1, "last_activity_date": 1551030319, "creation_date": 1466565441, "last_edit_date": 1551030319, "question_id": 37957929, "link": "https://stackoverflow.com/questions/37957929/incrementing-pointer-vs-adding-to-the-pointer", "closed_reason": "Not suitable for this site", "title": "Incrementing pointer vs. adding to the pointer", "body": "<p>I have a bit of a dilemma here, I have two codes and one works perfectly while second one does not:</p>\n\n<pre><code>for (;(*(s + i) = getchar()) != EOF &amp;&amp; *(s + i) != '\\n' &amp;&amp; i &lt; len; ++i)\n</code></pre>\n\n<p>does not work at all. While this one works:</p>\n\n<pre><code> for(;(*s = getchar()) != EOF &amp;&amp; *s != '\\n' &amp;&amp; i &lt; len; ++i, ++s);\n s -= i;\n</code></pre>\n\n<p>I do not understand why first one is not working at all?</p>\n\n<p>EDIT:\nI am using gcc on linux machine and when I press CTL + D first example does not react at all.</p>\n\n<p>Here is full code:</p>\n\n<pre><code>int getLine (char *s, int len) {\n   int i = 0;\n   printf(\"IN\");\n\n   for (i = 0 ; i &lt; len &amp;&amp; (*(s + i) = getchar()) != EOF &amp;&amp; *(s + i) != '\\n' ; ++i) {              \n      printf(\"INIT\");\n   }   \n\n   *(s + i) = '\\0';\n   return i;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 3, "creation_date": 1466560266, "post_id": 37957171, "comment_id": 63362412, "body": "If you&#39;re anticipating being linked to malicious code, then you&#39;ve already lost. Avoiding mistakes is one thing, but malicious code that you hand execution to already has what it needs; if you do weird stuff to deny it access to specific data in memory, it can just undo that. The solution is: Don&#39;t link to untrusted code."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1466561227, "post_id": 37957171, "comment_id": 63362635, "body": "There&#39;s no way to restrict <code>foo</code>. You can tell <code>foo</code> what the valid area is, but that&#39;s all."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1466563247, "post_id": 37957171, "comment_id": 63363115, "body": "You might want to learn about the differences between <i>processes</i> and <i>threads</i> and why these two still exist in parallel."}, {"owner": {"reputation": 1268, "user_id": 1475411, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YP52h.png?s=128&g=1", "display_name": "MNS", "link": "https://stackoverflow.com/users/1475411/mns"}, "edited": false, "score": 0, "creation_date": 1466569286, "post_id": 37957171, "comment_id": 63364522, "body": "@QiZhang Which platform your are working on?"}, {"owner": {"reputation": 439, "user_id": 6438341, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/1181377385240542/picture?type=large", "display_name": "Qi Zhang", "link": "https://stackoverflow.com/users/6438341/qi-zhang"}, "reply_to_user": {"reputation": 1268, "user_id": 1475411, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YP52h.png?s=128&g=1", "display_name": "MNS", "link": "https://stackoverflow.com/users/1475411/mns"}, "edited": false, "score": 0, "creation_date": 1466569396, "post_id": 37957171, "comment_id": 63364554, "body": "@MNS I am working on Linux."}, {"owner": {"reputation": 1268, "user_id": 1475411, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YP52h.png?s=128&g=1", "display_name": "MNS", "link": "https://stackoverflow.com/users/1475411/mns"}, "edited": false, "score": 0, "creation_date": 1466571813, "post_id": 37957171, "comment_id": 63365243, "body": "@QiZhang Consider using <code>mprotect</code> as explained <a href=\"http://linux.die.net/man/2/mprotect\" rel=\"nofollow noreferrer\">here</a>"}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1466563363, "post_id": 37957227, "comment_id": 63363135, "body": "That is not exactly what OP asks for and does not answer the question. Maybe that is some plug-in."}, {"owner": {"reputation": 439, "user_id": 6438341, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/1181377385240542/picture?type=large", "display_name": "Qi Zhang", "link": "https://stackoverflow.com/users/6438341/qi-zhang"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1466566323, "post_id": 37957227, "comment_id": 63363799, "body": "@Olaf what does OP mean, btw?"}, {"owner": {"reputation": 26730, "user_id": 303363, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ByQP5.jpg?s=128&g=1", "display_name": "Susam Pal", "link": "https://stackoverflow.com/users/303363/susam-pal"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1466568523, "post_id": 37957227, "comment_id": 63364322, "body": "@Olaf The OP wants to know how to restrict <code>foo()</code> to accessing only the 1024 bytes allocated for it. My answer answers that this cannot be done in the strictest sense and adds some commentary about how this is usually done with careful coding and using only trusted third-party code. I see no mention of plug-ins in the question, although I tried to address the possibility of <code>foo()</code> coming from third-party code. What do you think the OP is asking? Why don&#39;t you add your own answer that you believe answers what the OP is asking?"}, {"owner": {"reputation": 12072, "user_id": 1630963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97c2d181ef6bbb9eee0c4033561c3891?s=128&d=identicon&r=PG", "display_name": "enhzflep", "link": "https://stackoverflow.com/users/1630963/enhzflep"}, "reply_to_user": {"reputation": 439, "user_id": 6438341, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/1181377385240542/picture?type=large", "display_name": "Qi Zhang", "link": "https://stackoverflow.com/users/6438341/qi-zhang"}, "edited": false, "score": 1, "creation_date": 1466570817, "post_id": 37957227, "comment_id": 63364924, "body": "@QiZhang - OP is short for Original Poster (the person that originally posted the question)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1466601299, "post_id": 37957227, "comment_id": 63384036, "body": "@SusamPal: OP apparently asks about protection against malicious code, i.e. code that intentionally does harm, not friendly code. Your answer is pointless, as it just states common programming practice."}], "tags": [], "owner": {"reputation": 26730, "user_id": 303363, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ByQP5.jpg?s=128&g=1", "display_name": "Susam Pal", "link": "https://stackoverflow.com/users/303363/susam-pal"}, "is_accepted": true, "score": 2, "last_activity_date": 1466603086, "last_edit_date": 1466603086, "creation_date": 1466560005, "answer_id": 37957227, "question_id": 37957171, "link": "https://stackoverflow.com/questions/37957171/how-to-prevent-a-malicious-function-from-accessing-the-heap-memory-that-it-is-no/37957227#37957227", "title": "How to prevent a malicious function from accessing the heap memory that it is not expected to access?", "body": "<p>No, there is no way to restrict <code>foo()</code> to accessing only the 1024 bytes allocated for it. A malicious function can always <em>attempt</em> to access past the buffer allocated for it. Some damage it may cause (such as denial-of-service attack by crashing the main service) can be limited by ensuring that <code>foo()</code> is called in a separate process as a user with limited privilege (see <a href=\"https://en.wikipedia.org/wiki/Principle_of_least_privilege\" rel=\"nofollow\">POLA</a>).</p>\n\n<p>However, the restriction to access only a limited amount of buffer is usually implemented with the following measures where we assume that <code>foo()</code> is ready to cooperate with its caller. These measures are pointless if <code>foo()</code> is intentionally trying to do harm.</p>\n\n<ol>\n<li>Pass the size around: Pass the size of the allocated buffer to the function <code>foo()</code>.</li>\n<li>Code carefully: Write the function <code>foo()</code> carefully such that it respects the size of the allocated buffer passed to it and never accesses memory beyond this allocated buffer.</li>\n<li>Link to trusted code only: If <code>foo()</code> belongs to a third-party code, ensure that the third-party code can be trusted.</li>\n</ol>\n\n<p>For example,</p>\n\n<pre><code>void foo(char *p, size_t size){\n    /* printf(\"value of (p + 2048) is %x\\n\", *(p + 2048)); */\n    /* Ensure that this function does not access memory only between\n       p[0] and p[size - 1], inclusive. */ \n}\n\nvoid main(void){\n     size_t size = 1024;\n     char *p = malloc(size);\n\n     foo(p, size);\n}\n</code></pre>\n\n<p>There are only two situations when the function <code>foo()</code> may act maliciously.</p>\n\n<ol>\n<li>Function <code>foo()</code> relies on external input to decide the memory location to be accessed and that external input can somehow cause <code>foo()</code> to access memory beyond <code>p[size - 1]</code>. This is <a href=\"https://en.wikipedia.org/wiki/Buffer_overflow\" rel=\"nofollow\">buffer overflow</a> and needs to be avoided by input validation (code carefully; see point 2 above).</li>\n<li>The function <code>foo()</code> comes from another library that you do not trust. Using a library that you do not trust is a bad idea anyway. That library could do things far more worse than buffer overflow. So one has to ensure that the library is good and behaves well before using it. One must never link to an untrusted library (link to trusted code only; see point 3 above).</li>\n</ol>\n"}], "owner": {"reputation": 439, "user_id": 6438341, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/1181377385240542/picture?type=large", "display_name": "Qi Zhang", "link": "https://stackoverflow.com/users/6438341/qi-zhang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 37957227, "answer_count": 1, "score": 2, "last_activity_date": 1466603086, "creation_date": 1466559484, "question_id": 37957171, "link": "https://stackoverflow.com/questions/37957171/how-to-prevent-a-malicious-function-from-accessing-the-heap-memory-that-it-is-no", "title": "How to prevent a malicious function from accessing the heap memory that it is not expected to access?", "body": "<p>For a given process, the heap space is shared among all the functions, which can result in some security concerns. In the following code, for example, the function <em>main()</em> is expecting the function <em>foo()</em> to only access the 1024 bytes allocated to <em>p</em>. But the function <em>foo()</em>, if it is malicious, can access the memory out of that range.</p>\n\n<p>One of the approaches to prevent this from happening is to restrict <em>foo()</em> to only access the 1024 bytes allocated to <em>p</em>. Is it necessary to do this? If yes, how can we implement this capability, or is there any other approach to achieve this goal?</p>\n\n<pre><code>void foo(char *p){\n     printf(\"value of (p + 2048) is %x\\n\", *(p + 2048));\n}\n\nvoid main(void){\n     size_t size = 1024;\n     char *p = malloc(size);\n\n     foo(p);\n}\n</code></pre>\n"}, {"tags": ["c", "regex"], "comments": [{"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1466556052, "post_id": 37956719, "comment_id": 63361538, "body": "I am guessing a <code>\\d</code> would match a <code>d</code>?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1466556235, "post_id": 37956719, "comment_id": 63361575, "body": "I haven&#39;t found anything that says libc doesn&#39;t support <a href=\"http://www.regular-expressions.info/shorthand.html\" rel=\"nofollow noreferrer\"><b>Shorthand Character Classes</b></a>."}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1466558954, "post_id": 37956719, "comment_id": 63362130, "body": "One of the nice things about regular expressions is that there are so many flavors to choose from."}], "answers": [{"comments": [{"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "reply_to_user": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1466558487, "post_id": 37956908, "comment_id": 63362043, "body": "@TomKarzes: <a href=\"https://github.com/bminor/glibc/blob/2a69f853c03034c2e383e0f9c35b5402ce8b5473/posix/regcomp.c#L1787-L1910\" rel=\"nofollow noreferrer\">glibc supports <code>\\s</code> and <code>\\w</code> but not <code>\\d</code></a>. Mystery solved. Anyway it&#39;s still non-standard syntax."}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "reply_to_user": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1466559066, "post_id": 37956908, "comment_id": 63362159, "body": "@TomKarzes: <code>REG_EXTENDED</code> enables extended regular expression (ERE), which is what I was quoting above.  Of course any particular implementation can extend things to provide any sematics for anything the spec says is undefined."}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1466559397, "post_id": 37956908, "comment_id": 63362226, "body": "Alan Moore pointed out that it looks like OP is getting the <a href=\"http://www.regular-expressions.info/gnu.html\" rel=\"nofollow noreferrer\">GNU ERE extensions</a>, which include <code>\\w</code> and <code>\\s</code> but not <code>\\d</code>."}], "tags": [], "owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "is_accepted": false, "score": 0, "last_activity_date": 1466557078, "creation_date": 1466557078, "answer_id": 37956908, "question_id": 37956719, "link": "https://stackoverflow.com/questions/37956719/when-using-regex-in-c-d-does-not-work-but-0-9-does/37956908#37956908", "title": "When using regex in C, \\d does not work but [0-9] does", "body": "<p>According to the <a href=\"http://pubs.opengroup.org/onlinepubs/009696899/basedefs/xbd_chap09.html\" rel=\"nofollow\">POSIX regular expression</a> spec:</p>\n\n<blockquote>\n  <p>An ordinary character is any character in the supported character set, except for the ERE special characters listed in ERE Special Characters. The interpretation of an ordinary character preceded by a backslash ( '\\' ) is undefined.</p>\n</blockquote>\n\n<p>So the only characters that can legally follow a <code>\\</code> are:</p>\n\n<pre><code>\\^    \\.    \\[    \\$    \\(    \\)    \\|\n\\*    \\+    \\?    \\{    \\\\\n</code></pre>\n\n<p>all of which match the escaped character literally.  Trying to use any of of the other <a href=\"http://www.pcre.org/\" rel=\"nofollow\">PCRE</a> extensions may not work.</p>\n"}, {"tags": [], "owner": {"reputation": 4425, "user_id": 6277831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c21010f99314f291650d4cd9e3b2735?s=128&d=identicon&r=PG", "display_name": "lostbard", "link": "https://stackoverflow.com/users/6277831/lostbard"}, "is_accepted": false, "score": 1, "last_activity_date": 1466557537, "creation_date": 1466557537, "answer_id": 37956964, "question_id": 37956719, "link": "https://stackoverflow.com/questions/37956719/when-using-regex-in-c-d-does-not-work-but-0-9-does/37956964#37956964", "title": "When using regex in C, \\d does not work but [0-9] does", "body": "<p>\\d is a perl and vim character class.</p>\n\n<p>Use instead:</p>\n\n<pre><code> const char *rstr = \"^[[:digit:]]+\\\\s+\\\\w+\\\\s+[[:digit:]]+\\\\s+\\\\w+$\"; \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "edited": false, "score": 0, "creation_date": 1466559457, "post_id": 37957074, "comment_id": 63362237, "body": "Quick Note: regular spaces should still work, so the pattern could be shortened perhaps to <code>^[[:digit:]]+ +[[:alpha:]]+ +[[:digit:]]+ +[[:alpha:]]+$</code>"}, {"owner": {"reputation": 43, "user_id": 6494818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff8134c9e5dceed6f7fe3c24533d649a?s=128&d=identicon&r=PG&f=1", "display_name": "piedog", "link": "https://stackoverflow.com/users/6494818/piedog"}, "edited": false, "score": 0, "creation_date": 1466606541, "post_id": 37957074, "comment_id": 63388952, "body": "Thanks for this example. When I tried this earlier I used single brackets which seemed to me what the table on <a href=\"https://en.wikipedia.org/wiki/Regular_expression#Character_classes\" rel=\"nofollow noreferrer\">POSIX Character_classes</a> indicated. Also, I would have used a literal space except that I wanted to allow for tabs."}], "tags": [], "owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "is_accepted": false, "score": 3, "last_activity_date": 1466558574, "creation_date": 1466558574, "answer_id": 37957074, "question_id": 37956719, "link": "https://stackoverflow.com/questions/37956719/when-using-regex-in-c-d-does-not-work-but-0-9-does/37957074#37957074", "title": "When using regex in C, \\d does not work but [0-9] does", "body": "<p>Trying either pattern in a strictly POSIX environment will likely end up having no matches; if you want to make the pattern truly POSIX compatible use all bracket expressions:</p>\n\n<pre><code>const char *rstr = \"^[[:digit:]]+[[:space:]]+[[:alpha:]]+[[:space:]]+[[:digit:]]+[[:space:]]+[[:alpha:]]+$\";\n</code></pre>\n\n<p>\u21b3 <a href=\"https://en.wikipedia.org/wiki/Regular_expression#Character_classes\" rel=\"nofollow\">POSIX Character_classes</a></p>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 6494818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff8134c9e5dceed6f7fe3c24533d649a?s=128&d=identicon&r=PG&f=1", "display_name": "piedog", "link": "https://stackoverflow.com/users/6494818/piedog"}, "edited": false, "score": 0, "creation_date": 1466605674, "post_id": 37957082, "comment_id": 63388177, "body": "Thanks for pointing this out. I overlooked the absence of \\d and \\D on that page."}], "tags": [], "owner": {"reputation": 68253, "user_id": 20938, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CuXSm.jpg?s=128&g=1", "display_name": "Alan Moore", "link": "https://stackoverflow.com/users/20938/alan-moore"}, "is_accepted": true, "score": 6, "last_activity_date": 1466558639, "creation_date": 1466558639, "answer_id": 37957082, "question_id": 37956719, "link": "https://stackoverflow.com/questions/37956719/when-using-regex-in-c-d-does-not-work-but-0-9-does/37957082#37957082", "title": "When using regex in C, \\d does not work but [0-9] does", "body": "<p>The regex flavor you're using is GNU ERE, which is similar to POSIX ERE, but with a few extra features.  Among these are support for the character class shorthands <code>\\s</code>, <code>\\S</code>, <code>\\w</code> and <code>\\W</code>, but <em>not</em> <code>\\d</code> and <code>\\D</code>.  You can find more info <a href=\"http://www.regular-expressions.info/gnu.html\">here</a>.</p>\n"}], "owner": {"reputation": 43, "user_id": 6494818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff8134c9e5dceed6f7fe3c24533d649a?s=128&d=identicon&r=PG&f=1", "display_name": "piedog", "link": "https://stackoverflow.com/users/6494818/piedog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1431, "favorite_count": 1, "accepted_answer_id": 37957082, "answer_count": 4, "score": 4, "last_activity_date": 1466627856, "creation_date": 1466555346, "last_edit_date": 1466627856, "question_id": 37956719, "link": "https://stackoverflow.com/questions/37956719/when-using-regex-in-c-d-does-not-work-but-0-9-does", "title": "When using regex in C, \\d does not work but [0-9] does", "body": "<p>I do not understand why the regex pattern containing the <code>\\d</code> character class does not work but <code>[0-9]</code> does. Character classes, such as <code>\\s</code> (whitespace characters) and <code>\\w</code> (word characters), do work. My compiler is gcc (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3. I am using the C regular expression library.</p>\n\n<p>Why doesn't <code>\\d</code> work?</p>\n\n<p>Text string:</p>\n\n<pre><code>const char *text = \"148  apples    5 oranges\";\n</code></pre>\n\n<p>For the above text string, this regex does not match:</p>\n\n<pre><code>const char *rstr = \"^\\\\d+\\\\s+\\\\w+\\\\s+\\\\d+\\\\s+\\\\w+$\";\n</code></pre>\n\n<p>This regex matches when using [0-9] instead of \\d:</p>\n\n<pre><code>const char *rstr = \"^[0-9]+\\\\s+\\\\w+\\\\s+[0-9]+\\\\s+\\\\w+$\";\n\n\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;regex.h&gt;\n\n#define N_MATCHES  30\n\n//   output from gcc --version: gcc (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3\n//   compile command used:  gcc -o tstc_regex tstc_regex.c\n\nconst char *text = \"148  apples    5 oranges\";\n  const char *rstr = \"^[0-9]+\\\\s+\\\\w+\\\\s+[0-9]+\\\\s+\\\\w+$\";    // finds match\n//const char *rstr = \"^\\\\d+\\\\s+\\\\w+\\\\s+\\\\d+\\\\s+\\\\w+$\";        // does not find match\n\nint main(int argc, char**argv)\n{\n    regex_t   rgx;\n    regmatch_t   matches[N_MATCHES];\n    int status;\n    status = regcomp(&amp;rgx, rstr, REG_EXTENDED | REG_NEWLINE);\n    if (status != 0) {\n        fprintf(stdout, \"regcomp error: %d\\n\", status);\n        return 1;\n    }\n    status = regexec(&amp;rgx, text, N_MATCHES, matches, 0);\n    if (status == REG_NOMATCH) {\n        fprintf(stdout, \"regexec result: REG_NOMATCH (%d)\\n\", status);\n    }\n    else if (status != 0) {\n        fprintf(stdout, \"regexec error: %d\\n\", status);\n        return 1;\n    }\n    else {\n        fprintf(stdout, \"regexec match found: %d\\n\", status);\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "nested-loops"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 2, "creation_date": 1466554272, "post_id": 37956558, "comment_id": 63361139, "body": "What is the question?  If there is a problem w/ your code, what is it?  And why do you bother with a <code>while</code> loop if it unconditionally <code>break</code>s?"}, {"owner": {"reputation": 7, "user_id": 5964413, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/fc78131744bd8f5f512237e105043a4c?s=128&d=identicon&r=PG&f=1", "display_name": "Taylor Jane", "link": "https://stackoverflow.com/users/5964413/taylor-jane"}, "reply_to_user": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1466554388, "post_id": 37956558, "comment_id": 63361169, "body": "I don&#39;t honestly know, I&#39;m not sure how to format it using a different loop."}, {"owner": {"reputation": 17226, "user_id": 5038107, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ZVMs.jpg?s=128&g=1", "display_name": "HubertL", "link": "https://stackoverflow.com/users/5038107/hubertl"}, "edited": false, "score": 0, "creation_date": 1466554536, "post_id": 37956558, "comment_id": 63361214, "body": "use <code>if</code>instead of <code>while</code>"}, {"owner": {"reputation": 145, "user_id": 2624808, "user_type": "registered", "profile_image": "https://graph.facebook.com/1357740553/picture?type=large", "display_name": "James H", "link": "https://stackoverflow.com/users/2624808/james-h"}, "edited": false, "score": 0, "creation_date": 1466554751, "post_id": 37956558, "comment_id": 63361272, "body": "No need for a loop on the first loop, use an <code>if</code> condition instead"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1466555744, "post_id": 37956558, "comment_id": 63361468, "body": "Suggest you use a debugger. That&#39;s the perfect tool for helping you understand the execution path of your program."}], "answers": [{"tags": [], "owner": {"reputation": 484, "user_id": 6490242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26613036fd92e6ee9e1ce9b64037069d?s=128&d=identicon&r=PG&f=1", "display_name": "Twinkle", "link": "https://stackoverflow.com/users/6490242/twinkle"}, "is_accepted": false, "score": 0, "last_activity_date": 1466557427, "creation_date": 1466557427, "answer_id": 37956948, "question_id": 37956558, "link": "https://stackoverflow.com/questions/37956558/printing-even-odd-on-respective-lines/37956948#37956948", "title": "Printing even/odd on respective lines", "body": "<p>Use if instead of while and put brackets to define precedence.</p>\n\n<pre><code>    If ((patternCounter&gt;2) &amp;&amp;     (patternCounter%2==0))\n    {\n        printf(\"*even*\\n\");\n        break;\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 0, "last_activity_date": 1466562999, "creation_date": 1466562999, "answer_id": 37957616, "question_id": 37956558, "link": "https://stackoverflow.com/questions/37956558/printing-even-odd-on-respective-lines/37957616#37957616", "title": "Printing even/odd on respective lines", "body": "<p>Your question is a bit unclear in exactly what you are attempting to do, other than <em>\"Using 6 for width, and 15 for height I need a TOTAL of 15 lines, no more and no less.</em>\" From what I gather, correct me if I'm wrong, but you want to take values for <code>width</code> and <code>height</code> and for the <em>first two</em> and <em>last two</em> lines in your range of <em>height</em> you want to print nothing. For each line in between, if the index is <em>even</em> you want to print <code>\"even\"</code> if the line index is <em>odd</em>, you want to print <code>width</code> <code>'*'s</code> for that line.</p>\n\n<p>There are a number of different ways to sort out the logic. However, a few notes. First, always (<em>always</em>) validate <em>user input</em>. When using the <code>scanf</code> family of functions, at minimum, check the <code>return</code> to insure the expected number of conversions successfully took place. For example:</p>\n\n<pre><code>printf (\"enter a number: \");\n    if (scanf (\" %d\", &amp;width) != 1) {\n        fprintf (stderr, \"error: invalid input (width).\\n\");\n        return 1;\n    }\n</code></pre>\n\n<p>While you are free to take user input when needed, in practice, needed values are generally passed as <em>arguments</em>. That is what the <code>int argc</code> and <code>char **argv</code> are for in <code>int main (int argc, char **argv)</code>. Take user input when needed, pass values to functions as arguments when possible.</p>\n\n<p>On to the logic. If I understand the goal correctly, then regardless the logic will boil down to iterating over the range of <em>height</em> and taking an appropriate action based on the height index for each. \n(<em>note:</em> in your example, you can iterate <code>for (x = 1; x &lt;= height; ...)</code> but generally in C, you will see the iteration <code>for (x = 0; x &lt; height; ...)</code>. both are 100% correct and you are free to iterate from any value to any value, but be aware that all arrays, etc.. are <em>zero based</em> making the <code>0 &lt; x &lt; height</code> the natural iteration for a range)</p>\n\n<p>As you iterate over each line index, there are three basic conditions you want to check. The first being \"<em>am I the first two or last two lines?</em>\". If so, you want to do nothing and <code>continue</code> to the next heither index (the example below just shows the index and outputs <code>&lt;noprint&gt;</code> for that line. You next check will be to check whether the index is <em>even</em>. If so, you simply print <code>\"even\"</code> and <code>continue</code> to the next index.</p>\n\n<p>(<em>note:</em> the simplest check is <code>index &amp; 1</code> -- if bit <code>0</code> is <code>1</code> the number is <code>odd</code>, consider binary for <code>2</code> (<code>10</code>) when anded with <code>1</code> the result is <code>0</code>, and for <code>3</code> (<code>11</code>) the result is <code>1</code>, so your test for even is simply <code>if ((index &amp; 1) == 0)</code> <code>index</code> is <em>even</em>)</p>\n\n<p>The last action you will take (if you haven't <em>continued</em> to the next index) is simply to output <code>width</code> <code>'*'s</code> before going to the next index. </p>\n\n<p>(<em>note:</em> when ouputting a single character alone, do not call the variadic <code>printf</code> function when all that is needed is outputting a single character. That is like using sledge-hammer as a fly-swatter. Simply use <code>putchar</code> or <code>fputc</code> instead.)</p>\n\n<p>With that, you could do something similar to the following.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nenum { MAXW = 6, MAXH = 15 };       /* constants for width/height */\n\nint main (int argc, char **argv) {\n\n    int w = argc &gt; 1 ? atoi (argv[1]) : MAXW, /* take values from arguments */\n        h = argc &gt; 2 ? atoi (argv[2]) : MAXH, /* use MAXW/MAXH for defaults */\n        i, j;\n\n    if (w &lt; 0) w = -w;              /* prevent negative values */\n    if (h &lt; 0) h = -h;\n\n    for (i = 0; i &lt; h; i++)         /* for each line */\n    {\n        printf (\"%2d : \", i);       /* line index (adjust by 1 if desired */\n\n        if (i &lt; 2 || i &gt; h - 3) {   /* skip 2 on either end of range */\n            printf (\"&lt;noprint&gt;\\n\");\n            continue;\n        }\n\n        if ((i &amp; 1) == 0) {         /* if even (LSB = 0) */\n            printf (\"even\\n\");\n            continue;\n        }\n\n        for (j = 0; j &lt; w; j++)     /* otherwise 1 '*' per-width */\n            putchar ('*');\n        putchar ('\\n');\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Example Use/Output</strong></p>\n\n<p>For height in the range of <code>0 - 4</code>, <code>&lt;noprint&gt;</code> is all that is output (showing omitting the first and last 2 lines on either end of range)</p>\n\n<pre><code>$ ./bin/evenstar 6 4\n 0 : &lt;noprint&gt;\n 1 : &lt;noprint&gt;\n 2 : &lt;noprint&gt;\n 3 : &lt;noprint&gt;\n</code></pre>\n\n<p>For any range <code>&gt; 4</code> if the line index is <code>even</code> print <code>even</code>, otherwise print <em>width</em> <code>'*'s</code>, e.g</p>\n\n<pre><code> $ ./bin/evenstar 6 7\n 0 : &lt;noprint&gt;\n 1 : &lt;noprint&gt;\n 2 : even\n 3 : ******\n 4 : even\n 5 : &lt;noprint&gt;\n 6 : &lt;noprint&gt;\n</code></pre>\n\n<p>For your example of <code>w = 6</code> and <code>h = 15</code>:</p>\n\n<pre><code>$ ./bin/evenstar\n 0 : &lt;noprint&gt;\n 1 : &lt;noprint&gt;\n 2 : even\n 3 : ******\n 4 : even\n 5 : ******\n 6 : even\n 7 : ******\n 8 : even\n 9 : ******\n10 : even\n11 : ******\n12 : even\n13 : &lt;noprint&gt;\n14 : &lt;noprint&gt;\n</code></pre>\n\n<p>In addition to the <code>if</code> statement logic above, you could also use a <code>switch</code> statement to take appropriate action for each value of the height index. Although here, a simple <code>if</code> is probably your best bet. Look it over and let me know if you have any questions or if I've understood what you were trying to accomplish correctly. If not, just let me know and I'm happy to help further.</p>\n"}], "owner": {"reputation": 7, "user_id": 5964413, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/fc78131744bd8f5f512237e105043a4c?s=128&d=identicon&r=PG&f=1", "display_name": "Taylor Jane", "link": "https://stackoverflow.com/users/5964413/taylor-jane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1466562999, "creation_date": 1466554161, "last_edit_date": 1466554369, "question_id": 37956558, "link": "https://stackoverflow.com/questions/37956558/printing-even-odd-on-respective-lines", "title": "Printing even/odd on respective lines", "body": "<p>I'm trying to print the word * even * on only even lines WITHOUT including the first and second lines (and eventually without the final two lines), but it's printing 15 lines and then randomly throughout it prints an * even *. Using 6 for width, and 15 for height I need a TOTAL of 15 lines, no more and no less. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main ()\n{\nint heightCounter, height, width, widthCounter, patternCounter;\n\npatternCounter=0;\n\nprintf(\"enter a number\\n\");\n    scanf(\"%d\", &amp;width);\n\nprintf(\"enter a number\\n\");\n    scanf(\"%d\", &amp;height);\n\nfor (heightCounter=1; heightCounter&lt;=height; heightCounter++)\n{\n    patternCounter++;\n\n    while (patternCounter&gt;2 &amp;&amp; patternCounter%2==0)\n    {\n        printf(\"*even*\\n\");\n        break;\n    }\n\n\n    for (widthCounter=1; widthCounter&lt;=width; widthCounter++)\n    {\n        printf(\"*\");\n\n    }\n\nprintf(\"\\n\");\n}\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 4, "creation_date": 1466552084, "post_id": 37956228, "comment_id": 63360633, "body": "<code>*c1++ = &#39;\\0&#39;;</code> doesn&#39;t do what you think it does."}, {"owner": {"reputation": 944, "user_id": 1499575, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/82374abfce29c20a6f214de4fa2226f5?s=128&d=identicon&r=PG", "display_name": "mreff555", "link": "https://stackoverflow.com/users/1499575/mreff555"}, "reply_to_user": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1466552285, "post_id": 37956228, "comment_id": 63360669, "body": "Doh! I think I just got it. Since it&#39;s a char, not an int, it&#39;s only advancing one byte."}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1466553089, "post_id": 37956228, "comment_id": 63360872, "body": "This code exhibits undefined behavior.  The call to <code>strncpy</code> copies the first three characters of <code>c</code> to <code>c1</code>, but it does <i>not</i> null-terminate the result.  So the string pointed to by <code>c1</code> may or may not be properly terminated.  Don&#39;t do it.  In your case, it <i>happened</i> to have a null byte where you needed it, but you can&#39;t rely on that."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1466553101, "post_id": 37956228, "comment_id": 63360877, "body": "This code has an error.  Since c is longer than3, stncpy will not add a null terminator."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1466553910, "post_id": 37956228, "comment_id": 63361052, "body": "<code>c1++</code> don&#39;t alter a pointer that you (should) <code>free</code>."}, {"owner": {"reputation": 944, "user_id": 1499575, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/82374abfce29c20a6f214de4fa2226f5?s=128&d=identicon&r=PG", "display_name": "mreff555", "link": "https://stackoverflow.com/users/1499575/mreff555"}, "edited": false, "score": 0, "creation_date": 1466554180, "post_id": 37956228, "comment_id": 63361118, "body": "Tom, Weather Vane, I think you guys are missing the point. I realize pointers should be free in production code, but since this is a main function which abruptly ends I think it should be ok. Tom, I know the first print statement is not null terminated, but if you read the statement associated with the supplied code you will realize what I am trying to do is determine the best way to do that."}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1466555840, "post_id": 37956228, "comment_id": 63361491, "body": "<code>c1</code> is never guaranteed to be null-terminated in either <code>printf</code>.  You need to add <code>c1[3] = &#39;\\0&#39;;</code> before or after the call to <code>strncpy</code>.  The answer you accepted is blatantly incorrect in its claim that <code>strncpy</code> will add a null byte that was not present in the source string.  You just need to read the man page for <code>strncpy</code>.  It&#39;s also trivial to test, since the <code>strncpy</code> call doesn&#39;t touch <code>c1[3]</code> at all."}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1466556030, "post_id": 37956228, "comment_id": 63361530, "body": "Adding <code>c1[3] = &#39;\\0&#39;;</code> is guaranteed to solve the problem, since either a null byte was copied from <code>c</code> earlier in the string, or else it wasn&#39;t in which case this fixes it."}], "answers": [{"comments": [{"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1466555180, "post_id": 37956332, "comment_id": 63361357, "body": "This is incorrect.  <code>strncpy</code> does <i>not</i> insert a terminating null byte unless it was copied from the original string.  The call to <code>strncpy</code> will not write more than 3 bytes of <code>c1</code>.  The code posted by OP exhibits <i>undefined behavior</i>, since there is no guarantee that <code>c1</code> is properly terminated.  Look at the man page for <code>strncpy</code>."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "reply_to_user": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1466555399, "post_id": 37956332, "comment_id": 63361406, "body": "Hmm. I thought strncpy did add the zero. I&#39;ll look at it more closely."}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1466555613, "post_id": 37956332, "comment_id": 63361446, "body": "It&#39;s very clear from the man page.  If you want to test it, add <code>c1[3] = &#39;x&#39;;</code> before the call to <code>strncpy</code>.  You will see the <code>x</code> appear in the output, which contradicts your claim."}], "tags": [], "owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "is_accepted": true, "score": 1, "last_activity_date": 1466623555, "last_edit_date": 1466623555, "creation_date": 1466552741, "answer_id": 37956332, "question_id": 37956228, "link": "https://stackoverflow.com/questions/37956228/understanding-pointers-and-null-terminating-strings/37956332#37956332", "title": "understanding pointers and null terminating strings", "body": "<p>This line:</p>\n\n<pre><code>*c1++ = '\\0';\n</code></pre>\n\n<p>does:</p>\n\n<ol>\n<li><p>Evaluate the variable <code>c1</code>. It's a pointer to an allocated block of 4 bytes.</p></li>\n<li><p>De-reference the pointer with <code>*</code>, which is now the first byte pointed to by <code>c1</code>.</p></li>\n<li><p>Assign the value <code>'\\0'</code> to that byte, overwriting the <code>'1'</code> that was there.</p></li>\n<li><p>Add 1 to <code>c1</code>. Now it points to the second byte of those 4 you allocated, which contains a <code>'2'</code>.</p></li>\n</ol>\n\n<p>Later, when you print <code>c1</code> as a string, it starts at the <code>2</code> where you left it, and ends at the terminating <code>'\\0'</code> that just happened to be in the last byte of your allocated region that never got set.</p>\n"}], "owner": {"reputation": 944, "user_id": 1499575, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/82374abfce29c20a6f214de4fa2226f5?s=128&d=identicon&r=PG", "display_name": "mreff555", "link": "https://stackoverflow.com/users/1499575/mreff555"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 37956332, "answer_count": 1, "score": -4, "last_activity_date": 1466623555, "creation_date": 1466551988, "last_edit_date": 1495539857, "question_id": 37956228, "link": "https://stackoverflow.com/questions/37956228/understanding-pointers-and-null-terminating-strings", "title": "understanding pointers and null terminating strings", "body": "<p>I am fairly novice to c/c++ and I was trying to determine the best way to terminate a string when I ran across <a href=\"https://stackoverflow.com/questions/2911089/null-terminating-a-string\">this.</a></p>\n\n<p>I think I understand whats going on with incrementing a pointer and dereferencing it to a value of '\\0'. The problem is, when I do it it doesn't work.</p>\n\n<pre><code>    int main()\n{\n    const char* c = \"1234567890\";\n    char* c1 = (char*) malloc(sizeof(char)*4);\n    strncpy( c1, c, 3 );\n    printf( \"%s\\n\",c1 );\n    *c1++ = '\\0';\n    printf( \"%s\\n\",c1 );\n}\n</code></pre>\n\n<p>The output is\n123\n23</p>\n\n<p>It appears that the null value is being dropped at the beginning of the string as opposed to immediately after. Why?</p>\n"}, {"tags": ["c", "gcc", "x86-64", "inline-assembly", "att"], "comments": [{"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 1, "creation_date": 1466552035, "post_id": 37956211, "comment_id": 63360619, "body": "If using extended assembler templates (ones with input, output, clobbers etc) then you need to prepend an extra <code>%</code> on the register names. maybe try <code>%%rcx</code>. Since you overwrite RCX and it doesn&#39;t appear as an output operand it needs to be listed in the clobber list."}, {"owner": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "reply_to_user": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1466552201, "post_id": 37956211, "comment_id": 63360652, "body": "@MichaelPetch, Good point on the clobber. Unfortunately, when I do <code>%%rcx</code>, I get <code>operand type mismatch for &#39;movq&#39;</code>."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1466552400, "post_id": 37956211, "comment_id": 63360701, "body": "Yes that will likely be because <code>count</code> is a 32 bit integer and the assembler template chose a 32-bit register (like <code>eax</code>) for substitution. You can over ride <code>%0</code> to use the 64-bit register by placing <code>q</code> after the <code>%</code> so something like <code>movq %q0, %%rcx;</code>"}, {"owner": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "reply_to_user": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1466552551, "post_id": 37956211, "comment_id": 63360735, "body": "@MichaelPetch, That appears to do the trick. Thanks!"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1466582693, "post_id": 37956211, "comment_id": 63371096, "body": "See also <a href=\"http://stackoverflow.com/questions/34520013/using-base-pointer-register-in-c-inline-asm/34522750#34522750\">the bottom of this answer</a> for info on using GNU C inline asm to make code that doesn&#39;t suck (e.g. <code>movq</code> inside the template instead of using operand constraints to ask the compiler to set it up for you).  It&#39;s really hard to get it correct while constraining the optimizer as little as possible, and it still can&#39;t do things like constant propagation through inline asm.  So it&#39;s usually best to tweak the C to hand-hold the compiler to good asm, instead of using inline asm."}], "answers": [{"comments": [{"owner": {"reputation": 6093, "user_id": 2189500, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/109f747845a9ce762a1fff72eb8cf6f3?s=128&d=identicon&r=PG", "display_name": "David Wohlferd", "link": "https://stackoverflow.com/users/2189500/david-wohlferd"}, "edited": false, "score": 2, "creation_date": 1466560101, "post_id": 37956967, "comment_id": 63362382, "body": "An excellent treatise.  The only other points I might have added are 1) consider using symbolic names to make the assembler code easier to read. 2) inline asm is fun, interesting, challenging, educational, and a bad idea in production code. I just always say that since <i>this</i> guy might not have heard it yet. 3) &quot;cc&quot; clobber. 4) Since <code>dummy</code> is probably not used, volatile is probably a good idea to keep the optimizer from discarding the entire thing as dead code."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "reply_to_user": {"reputation": 6093, "user_id": 2189500, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/109f747845a9ce762a1fff72eb8cf6f3?s=128&d=identicon&r=PG", "display_name": "David Wohlferd", "link": "https://stackoverflow.com/users/2189500/david-wohlferd"}, "edited": false, "score": 0, "creation_date": 1466560508, "post_id": 37956967, "comment_id": 63362467, "body": "@DavidWohlferd Regarding 2: I can just link to another answer that discusses that, Regarding point 3: Is it no longer the case that <i>GCC</i> assumes &quot;cc&quot; is clobbered in extended assembler templates? Regarding 4: That is true, I had assumed though that the code was somehow a minimal example. I&#39;ll add the volatile since if he wants to observe the generated code it might be better if there was some ;-)"}, {"owner": {"reputation": 6093, "user_id": 2189500, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/109f747845a9ce762a1fff72eb8cf6f3?s=128&d=identicon&r=PG", "display_name": "David Wohlferd", "link": "https://stackoverflow.com/users/2189500/david-wohlferd"}, "edited": false, "score": 0, "creation_date": 1466561911, "post_id": 37956967, "comment_id": 63362824, "body": "2: It&#39;s clear that the OP intent here was education, but it&#39;s easy for something like this to grow or someone else to be inspired, etc.  3: There&#39;s a fine line here: gcc <i>does</i> clobber cc on i386.  However (despite my efforts), this is not a documented/supported feature, so in theory it can&#39;t be depended upon.  In reality, I can&#39;t see it ever changing, so it is <i>probably</i> safe, but adding it is still good self-documentation. 4: Umm, shouldn&#39;t that be <code>asm volatile</code>?"}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "reply_to_user": {"reputation": 6093, "user_id": 2189500, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/109f747845a9ce762a1fff72eb8cf6f3?s=128&d=identicon&r=PG", "display_name": "David Wohlferd", "link": "https://stackoverflow.com/users/2189500/david-wohlferd"}, "edited": false, "score": 0, "creation_date": 1466563210, "post_id": 37956967, "comment_id": 63363109, "body": "@DavidWohlferd Regarding <i>CC</i>, reasonable/fair comment. I won&#39;t update the answer in that regard. I seem to recall in documentation many moons ago that on intel x86 targets <i>cc</i> was implied clobber. Highly doubt they would alter the behavior. If I were a <i>GCC</i> dev might create a mechanism to propagate certain flags out of the template with a different mechanism. Think GCC 6.1 add some new template enhancements to support that idea."}, {"owner": {"reputation": 6093, "user_id": 2189500, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/109f747845a9ce762a1fff72eb8cf6f3?s=128&d=identicon&r=PG", "display_name": "David Wohlferd", "link": "https://stackoverflow.com/users/2189500/david-wohlferd"}, "edited": false, "score": 0, "creation_date": 1466567918, "post_id": 37956967, "comment_id": 63364171, "body": "cc: I know gcc&#39;s inline asm docs as well as the guy who wrote them (/s) and there is no mention of an implied cc clobber. Doesn&#39;t mean you didn&#39;t read it somewhere else though and I agree a change is unlikely.  And yes they did add the ability to <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html#FlagOutputOperands\" rel=\"nofollow noreferrer\">output flags</a> in v6.0.  After you read that, answer me this: If you are outputting flags, would you expect cc to be required?  Or forbidden?  The answer may surprise you..."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "reply_to_user": {"reputation": 6093, "user_id": 2189500, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/109f747845a9ce762a1fff72eb8cf6f3?s=128&d=identicon&r=PG", "display_name": "David Wohlferd", "link": "https://stackoverflow.com/users/2189500/david-wohlferd"}, "edited": false, "score": 0, "creation_date": 1466569553, "post_id": 37956967, "comment_id": 63364599, "body": "When I said many moons ago I&#39;m thinking early 2000s, it wasn&#39;t recent and it may have been reading source code. As for <code>&quot;cc&quot;</code> being required, probably debatable with the new output constraints. I&#39;d probably side with not being required (on intel x86 targets) since I&#39;m still of the opinion it has been implied for many years. There is probably a pile of code out there that assumes the same. If &quot;cc&quot; in the clobbers (or without it) has the same meaning now, one could argue that it shouldn&#39;t be changed."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "reply_to_user": {"reputation": 6093, "user_id": 2189500, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/109f747845a9ce762a1fff72eb8cf6f3?s=128&d=identicon&r=PG", "display_name": "David Wohlferd", "link": "https://stackoverflow.com/users/2189500/david-wohlferd"}, "edited": false, "score": 0, "creation_date": 1466569847, "post_id": 37956967, "comment_id": 63364688, "body": "I think that the poor documentation over the years (I&#39;m talking starting in 2000) surrounding extended assembler templates has come back to bite the project in the ass on stuff like this. It doesn&#39;t help that I use to read the Linux kernel and wonder what a particular constraint was when it wasn&#39;t documented by GCC at all. Had there been concrete documentation 15+ years ago, or a document about best practices may it would be different story now."}, {"owner": {"reputation": 6093, "user_id": 2189500, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/109f747845a9ce762a1fff72eb8cf6f3?s=128&d=identicon&r=PG", "display_name": "David Wohlferd", "link": "https://stackoverflow.com/users/2189500/david-wohlferd"}, "edited": false, "score": 0, "creation_date": 1466571223, "post_id": 37956967, "comment_id": 63365056, "body": "The source code definitely says that re cc, so maybe. But IMO, if it isn&#39;t &#39;implied&#39; in the docs, it&#39;s not canon. As for outputs, this is a new feature. We could have gone either way. Since the docs already say &quot;Clobber descriptions may not in any way overlap with an input or output operand,&quot; I tried to go with &quot;forbidden.&quot;  But they refused the code change to limit it to one or the other, or even to add text to the docs.  So the answer is you can do either. 10 years downstream, 1/2 will be using each, preventing any mods. While it may never matter in this instance, the mindset makes me crazy."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "reply_to_user": {"reputation": 6093, "user_id": 2189500, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/109f747845a9ce762a1fff72eb8cf6f3?s=128&d=identicon&r=PG", "display_name": "David Wohlferd", "link": "https://stackoverflow.com/users/2189500/david-wohlferd"}, "edited": false, "score": 0, "creation_date": 1466571429, "post_id": 37956967, "comment_id": 63365116, "body": "If there is bad documentation which there was early on, and the only place to find out in the source code, then IMHO the source code (inline comments) is canon in the absence of reasonable documentation. I might have a much different opinion of the matter if I started developing in the past few years. Maybe at a compiler option to switch between different semantics regarding <code>cc</code> in general (defaulting of course to what is currently actually done, and limiting issues with legacy code). But likely people won&#39;t turn the option on anyway lol"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1466582418, "post_id": 37956967, "comment_id": 63370930, "body": "<code>&quot;+rm&quot;(count)</code> is a bad idea.  You definitely want to compiler to put your loop counter in a register, so you should use a <code>&quot;+r&quot;</code> constraint.  If you want to avoid clobbering the original value of the variable, use a scratch variable.  (This is always possible in GNU C, even in a macro, using a <code>do { } while(0)</code> construct.)"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1466584111, "post_id": 37956967, "comment_id": 63371953, "body": "@MichaelPetch: If the count value was already in memory (e.g. a function arg on the stack), I wouldn&#39;t be surprised to see the compiler just leave it there.  It would only load it ahead of time if it wanted the value in a register after the asm statement.  It doesn&#39;t assume that you&#39;re going to touch the operand multiple times.  If the asm statement was <code>asm(&quot;andl $0x1234, %0&quot; : &quot;+rm&quot;(foo))</code>, a memory operand would be the correct choice even with no register pressure, and I assume that&#39;s what you&#39;d get.  If it&#39;s a tight loop, spilling anything else is probably better."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1466584464, "post_id": 37956967, "comment_id": 63372173, "body": "re: dummy variable: Your <code>dummy</code> didn&#39;t avoid the <code>mov</code> in asm, which is the whole point of the exercise IMO.  I meant do <code>dummy = count</code> in C, and then using a <code>&quot;+r&quot;</code> constraint.  It&#39;s almost always sub-optimal to have a <code>mov</code> as the first or last instruction of an inline asm statement, and usually easy to avoid."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1466585342, "post_id": 37956967, "comment_id": 63372720, "body": "I think my comment is enough here.  I&#39;ve written enough about how to write good inline asm in other places.  re: downvotes, I only get bothered by downvotes with no explanation.  I&#39;ve had downvotes for reasons I disagree with, but that were explained, and I&#39;m fine with that.  This answer doesn&#39;t deserve a downvote, though; it&#39;s pretty good and explains what&#39;s going on."}], "tags": [], "owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "is_accepted": true, "score": 7, "last_activity_date": 1466566197, "last_edit_date": 1466566197, "creation_date": 1466557557, "answer_id": 37956967, "question_id": 37956211, "link": "https://stackoverflow.com/questions/37956211/how-do-i-pass-inputs-into-extended-asm/37956967#37956967", "title": "How do I pass inputs into extended asm?", "body": "<p>If using extended assembler templates (ones with input, output, clobbers etc) then you need to prepend an extra <code>%</code> on the register names inside the template. <code>%%rcx</code> in this case. This will solve the issue related to this error:</p>\n\n<blockquote>\n  <p>error: invalid 'asm': operand number missing after %-letter</p>\n</blockquote>\n\n<p>This will present a new problem. You'll receive an error similar to:</p>\n\n<blockquote>\n  <p>operand type mismatch for 'movq'</p>\n</blockquote>\n\n<p>The issue is that <code>\"r\"(count)</code> input constraint tells the compiler that it should pick a register that will contain the value in <code>count</code>. Since count is defined as an <code>int</code> type, it will choose a 32-bit register. For sake of argument assume it chooses <em>EAX</em>. After substitution it would have tried to generate this instruction:</p>\n\n<pre><code>movq %eax, %rcx\n</code></pre>\n\n<p>You can't use <code>movq</code> to move the contents of a 32-bit register to a 64-bit register and thus the error. The better choice is to use <em>ECX</em> as the target so that both will be of the same type. Revised code would look like:</p>\n\n<pre><code>asm(\"mov %0, %%ecx;\"                         \n    \"startofloop: ; \"                    \n    \"sub $0x1, %%ecx; \"                   \n    \"jne startofloop; \":: \"r\"(count));\n</code></pre>\n\n<p>Alternatively you could have chosen to use an input operand of <code>\"ri\"(count)</code>. This would allow the compiler to choose either a register or an immediate value. On a higher optimization level (<code>-O1</code>, <code>-O2</code>) it will likely determine in this case that <code>count</code> remains constant (100000000) and generate code like:</p>\n\n<pre><code>mov $100000000, %ecx                         \nstartofloop:\nsub $0x1, %ecx\njne startofloop\n</code></pre>\n\n<p>Rather than being forced to place 100000000 into a register and copy it to <em>ECX</em> it can use an immediate value instead.</p>\n\n<hr>\n\n<p>A serious problem in your template is that you destroy the contents of <em>ECX</em> but <em>GCC</em> has no knowledge of this. <em>GCC</em> doesn't actually parse the instructions inside the template to determine what the code does. It has no idea you have clobbered <em>ECX</em>. The compiler may rely on <em>ECX</em> having the same value before and after the template. If you destroy a register not referenced in the output operands, you must explicitly list it in the clobber list. Something like this would work:</p>\n\n<pre><code>asm(\"mov %0, %%ecx;\"                         \n    \"startofloop: ; \"                    \n    \"sub $0x1, %%ecx; \"                   \n    \"jne startofloop; \":: \"ri\"(count) : \"rcx\");\n</code></pre>\n\n<p>Now <em>GCC</em> knows it can't rely on the value in <em>RCX</em> being the same value before and after the template is executed.</p>\n\n<p>Rather than using a fixed register as your internal counter, you can get <em>GCC</em> to pick something that is available. Doing this will mean we don't need the clobber anymore. You can create a dummy variable (a temporary) that can be used to count with. To avoid this code being optimized out altogether we can use the <code>volatile</code> attribute on the assembler template. This isn't required when the assembler template has no output operands. Code like this would work:</p>\n\n<pre><code>int count=100000000\nint dummy;\nasm volatile(\"mov %1, %0;\"                         \n    \"startofloop: ; \"                    \n    \"sub $0x1, %0; \"                   \n    \"jne startofloop; \":\"=rm\"(dummy): \"ri\"(count));\n</code></pre>\n\n<p>The <code>=rm</code> output constraint says that either a memory location or a register can be used for this operand. Giving the choice to the compiler allows the opportunity to generate better code. At an optimization level of <code>-O1</code> you would likely find the code generated would look like:</p>\n\n<pre><code>mov    $0x5f5e100,%ebx\nstartofloop:\nsub    $0x1,%ebx\njne    startofloop\n</code></pre>\n\n<p>In this case the compiler chose to use an immediate operand for count ($0x5f5e100 = $100000000). The <code>dummy</code> variable was optimized down to the register <em>EBX</em>.</p>\n\n<p>There are other tricks you can do to improve the template. One can read more about extended assembler templates in the <a href=\"https://gcc.gnu.org/onlinedocs/gcc-4.8.5/gcc/Extended-Asm.html#Extended-Asm\" rel=\"nofollow\">GNU documentation</a></p>\n\n<hr>\n\n<p>Your code appeared to preserve the value in variable <code>count</code>. If it wasn't a requirement for <code>count</code> to have the same value before the template is executed you could use <code>count</code> for both input and output. That code could look like:</p>\n\n<pre><code>asm volatile(\"startofloop: ; \"\n    \"sub $0x1, %0; \"\n    \"jne startofloop; \":\"+rm\"(count): );\n</code></pre>\n\n<p><code>+rm</code> means that the output operand is also being used as an input operand. In this case <code>count</code> should always be zero when finished.</p>\n\n<hr>\n\n<p>If you use the <em>GCC</em> <code>-S</code> option to output the generated assembly code then you may wish to alter your template so the output looks cleaner. Rather than using a <code>;</code> (semicolon) use <code>\\n\\t</code> instead. This will break up the assembler template into multiple lines and add indentation. An example:</p>\n\n<pre><code>asm volatile(\"mov %1, %0\\n\\t\"                         \n    \"startofloop:\\n\\t\"                    \n    \"sub $0x1, %0\\n\\t\"                   \n    \"jne startofloop\\n\\t\":\"=rm\"(dummy): \"ri\"(count));\n</code></pre>\n\n<hr>\n\n<p>Generally speaking, you shouldn't use inline assembler templates unless you have no alternative. Code it in <em>C</em> and guide the compiler to output the assembler you want, or use compiler intrinsics if need be. Inline assembler should be used as a last resort, or if your homework demands it. David Wohlferd wrote a <a href=\"https://gcc.gnu.org/wiki/DontUseInlineAsm\" rel=\"nofollow\">Wiki article</a> on the subject.</p>\n"}], "owner": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1351, "favorite_count": 0, "accepted_answer_id": 37956967, "answer_count": 1, "score": 3, "last_activity_date": 1466566197, "creation_date": 1466551869, "last_edit_date": 1495535645, "question_id": 37956211, "link": "https://stackoverflow.com/questions/37956211/how-do-i-pass-inputs-into-extended-asm", "title": "How do I pass inputs into extended asm?", "body": "<p>Consider this code, from my <a href=\"https://stackoverflow.com/questions/37955538/segfault-on-movq-instruction\">earlier question</a>.</p>\n\n<pre><code>int main(){\n    asm(\"movq $100000000, %rcx;\"\n            \"startofloop: ; \"\n            \"sub $0x1, %rcx; \"\n            \"jne startofloop; \");\n}\n</code></pre>\n\n<p>I would like to make number of iterations of the loop a C variable, so I tried the following after reading <a href=\"http://asm.sourceforge.net/articles/rmiyagi-inline-asm.txt\" rel=\"nofollow noreferrer\">this document</a>.</p>\n\n<pre><code>int main(){                                      \n    int count = 100000000;                       \n    asm(\"movq %0, %rcx;\"                         \n            \"startofloop: ; \"                    \n            \"sub $0x1, %rcx; \"                   \n            \"jne startofloop; \":: \"r\"(count));   \n}                                                \n</code></pre>\n\n<p>Unfortunately, this fails to compile, and breaks with the following error.</p>\n\n<pre><code>asm_fail.c: In function \u2018main\u2019:\nasm_fail.c:3:5: error: invalid 'asm': operand number missing after %-letter\n     asm(\"movq %0, %rcx;\"\n     ^\nasm_fail.c:3:5: error: invalid 'asm': operand number missing after %-letter\n</code></pre>\n\n<p>What is the correct way to pass the value of the C variable into the assembly?</p>\n"}, {"tags": ["c", "opencv", "caffe"], "comments": [{"owner": {"reputation": 2475, "user_id": 6327365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vlpxf.png?s=128&g=1", "display_name": "grochmal", "link": "https://stackoverflow.com/users/6327365/grochmal"}, "edited": false, "score": 0, "creation_date": 1466552307, "post_id": 37956202, "comment_id": 63360675, "body": "Which version of: caffe, opencv, OS (yeah we can guess it is a Mac from the error but which Mac OSX)?  What commands did you use?  What documentation are you following?"}, {"owner": {"reputation": 11, "user_id": 6496557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/476be25578b534138ab960edc915c6e7?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Pardo", "link": "https://stackoverflow.com/users/6496557/alejandro-pardo"}, "reply_to_user": {"reputation": 2475, "user_id": 6327365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vlpxf.png?s=128&g=1", "display_name": "grochmal", "link": "https://stackoverflow.com/users/6327365/grochmal"}, "edited": false, "score": 0, "creation_date": 1466690675, "post_id": 37956202, "comment_id": 63431500, "body": "I&#39;m using OSX el capitan and followings the instruction of Caffe home page. <a href=\"http://caffe.berkeleyvision.org/install_osx.html\" rel=\"nofollow noreferrer\">caffe.berkeleyvision.org/install_osx.html</a>. Open CV was installed following the same instructions of caffe installation."}], "owner": {"reputation": 11, "user_id": 6496557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/476be25578b534138ab960edc915c6e7?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Pardo", "link": "https://stackoverflow.com/users/6496557/alejandro-pardo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 580, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1466863145, "creation_date": 1466551794, "last_edit_date": 1466863145, "question_id": 37956202, "link": "https://stackoverflow.com/questions/37956202/incompatible-library-version-libopencv-highgui-2-4-dylib-requires-version-13-0", "title": "Incompatible library version: libopencv_highgui.2.4.dylib requires version 13.0.0 or later, but libjpeg.8.dylib provides version 9.0.0", "body": "<p>Im trying to run the runtest of caffe to complete the instalattion, but I get the following message:</p>\n\n<p><strong>dyld: Library not loaded: /usr/local/opt/jpeg/lib/libjpeg.8.dylib\n  Referenced from: /usr/local/opt/opencv/lib/libopencv_highgui.2.4.dylib\n  Reason: Incompatible library version: libopencv_highgui.2.4.dylib requires version 13.0.0 or later, but libjpeg.8.dylib provides version 9.0.0\nmake: *</strong> **[runtest] Trace/BPT trap: 5****</p>\n\n<p>I'm using OSX el capitan and following the instructions of Caffe home page. caffe.berkeleyvision.org/install_osx.html. Open CV was installed following the same instructions of caffe installation.\nCan anybody help me?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c", "sockets", "interface"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1466561357, "post_id": 37956191, "comment_id": 63362667, "body": "XY problem? If you want a socket for local communication only, why do you use AF_INET socket at all?"}], "answers": [{"comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1466554331, "post_id": 37956328, "comment_id": 63361154, "body": "He said he wanted to bind to the interface, not to the address. What about 127.0.0.2, which is also loopback."}, {"owner": {"reputation": 1530, "user_id": 397281, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/aef925582e22377fb6a3a1c242268574?s=128&d=identicon&r=PG", "display_name": "motoku", "link": "https://stackoverflow.com/users/397281/motoku"}, "edited": false, "score": 0, "creation_date": 1466558473, "post_id": 37956328, "comment_id": 63362039, "body": "This answer does not solve my problem. I can still detect the socket from other interfaces."}], "tags": [], "owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "is_accepted": true, "score": 2, "last_activity_date": 1466583446, "last_edit_date": 1466583446, "creation_date": 1466552696, "answer_id": 37956328, "question_id": 37956191, "link": "https://stackoverflow.com/questions/37956191/binding-socket-to-specific-interface/37956328#37956328", "title": "binding socket to specific interface", "body": "<p>You wrote:</p>\n\n<blockquote>\n  <p>I am trying to bind a socket to the specific (loopback) interface</p>\n</blockquote>\n\n<p>but you coded:</p>\n\n<pre><code>addr.sin_addr.s_addr = INADDR_ANY;\n</code></pre>\n\n<p><code>INADDR_ANY</code> (0.0.0.0) is <em>not</em> the loopback interface. You need to change it to <code>INADDR_LOOPBACK</code> (127.0.0.1) instead:</p>\n\n<pre><code>addr.sin_addr.s_addr = htons(INADDR_LOOPBACK);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1530, "user_id": 397281, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/aef925582e22377fb6a3a1c242268574?s=128&d=identicon&r=PG", "display_name": "motoku", "link": "https://stackoverflow.com/users/397281/motoku"}, "is_accepted": false, "score": 0, "last_activity_date": 1466561149, "creation_date": 1466561149, "answer_id": 37957381, "question_id": 37956191, "link": "https://stackoverflow.com/questions/37956191/binding-socket-to-specific-interface/37957381#37957381", "title": "binding socket to specific interface", "body": "<p>It seems <code>nmap</code> was ignoring the interface switch, and routing its probes through the loopback interface anyway. Passing my LAN address as the target instead of <code>localhost</code>, and my LAN interface as the interface argument to <code>nmap</code> produced the intended result of the socket being invisible to outside the local host with the following source code:</p>\n\n<pre><code>int bind_lo(int port) {\n        int rv;\n        const char iface[] = \"lo\";\n        struct sockaddr_in addr;\n        rv = socket(AF_INET, SOCK_STREAM, 0);\n        if (rv &lt; 0) return -1;\n        bzero((char *) &amp;addr, sizeof(addr));\n        addr.sin_family = AF_INET;\n        addr.sin_addr.s_addr = htonl(INADDR_LOOPBACK);\n        addr.sin_port = htons(port);\n        if (bind(rv, (struct sockaddr *) &amp;addr, sizeof(addr)) &lt; 0)\n                return -2;\n        if (setsockopt(rv, SOL_SOCKET, SO_BINDTODEVICE, iface, strlen(iface) + 1) &lt; 0) {\n                return -3;\n        }\n        return rv;\n}\n</code></pre>\n"}], "owner": {"reputation": 1530, "user_id": 397281, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/aef925582e22377fb6a3a1c242268574?s=128&d=identicon&r=PG", "display_name": "motoku", "link": "https://stackoverflow.com/users/397281/motoku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1599, "favorite_count": 0, "accepted_answer_id": 37956328, "answer_count": 2, "score": 0, "last_activity_date": 1466583446, "creation_date": 1466551733, "last_edit_date": 1466560546, "question_id": 37956191, "link": "https://stackoverflow.com/questions/37956191/binding-socket-to-specific-interface", "title": "binding socket to specific interface", "body": "<p>I am trying to bind a socket to the specific (loopback) interface <code>lo</code> to prevent outside traffic from interfering with it:</p>\n\n<pre><code>int bind_socket(uint8_t *iface, uint8_t port) {\n        int rv;\n        struct sockaddr_in addr;\n        rv = socket(AF_INET, SOCK_STREAM, 0);\n        if (rv &lt; 0) return -1;\n        if (setsockopt(rv, SOL_SOCKET, SO_BINDTODEVICE, iface, strlen(iface)) &lt; 0) {\n                return -2;\n        }\n        bzero((char *) &amp;addr, sizeof(addr));\n        addr.sin_family = AF_INET;\n        addr.sin_addr.s_addr = INADDR_ANY;\n        addr.sin_port = htons(port);\n        if (bind(rv, (struct sockaddr *) &amp;addr, sizeof(addr)) &lt; 0)\n                return -3;\n        return rv;\n}\n\n...\n\nint ss;\nss = bind_socket(\"lo\", 100);\n</code></pre>\n\n<p>However, if I run <code>nmap localhost -e wlpXsX</code>, I should not be getting output indicating the socket is available through that interface. It is instead being reported as available; and I can't seem to be able to deduce why. Why is this interface globally available with a program designed to make it unavailable to all other interfaces?</p>\n"}]