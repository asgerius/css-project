[{"tags": ["c"], "comments": [{"owner": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "edited": false, "score": 0, "creation_date": 1505347203, "post_id": 46208480, "comment_id": 79380308, "body": "What is your question?"}, {"owner": {"reputation": 93172, "user_id": 1734130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AZ5Sn.png?s=128&g=1", "display_name": "mvp", "link": "https://stackoverflow.com/users/1734130/mvp"}, "edited": false, "score": 1, "creation_date": 1505347233, "post_id": 46208480, "comment_id": 79380313, "body": "While this is all possible, perhaps you are using wrong language. If you used Python or Perl, it would be trivial task. E.g. solution using awk is: <code>awk &#39;{print $4, $1, $2, $3}&#39; &lt; input.txt</code>"}, {"owner": {"reputation": 41, "user_id": 6901907, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cf70451df5b654a500f26aeefddbd9fc?s=128&d=identicon&r=PG&f=1", "display_name": "tx203141", "link": "https://stackoverflow.com/users/6901907/tx203141"}, "edited": false, "score": 0, "creation_date": 1505347372, "post_id": 46208480, "comment_id": 79380351, "body": "sorry zerkms I edited the post!"}, {"owner": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 0, "creation_date": 1505347492, "post_id": 46208480, "comment_id": 79380381, "body": "Is the &quot;example output&quot; what you <i>want</i> to get or what you <i>actually</i> get?"}, {"owner": {"reputation": 4946, "user_id": 2656614, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/rJz0Z.png?s=128&g=1", "display_name": "Addison", "link": "https://stackoverflow.com/users/2656614/addison"}, "edited": false, "score": 1, "creation_date": 1505347668, "post_id": 46208480, "comment_id": 79380431, "body": "Consider refactoring the feof check. <a href=\"https://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\">See this question</a>"}, {"owner": {"reputation": 41, "user_id": 6901907, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cf70451df5b654a500f26aeefddbd9fc?s=128&d=identicon&r=PG&f=1", "display_name": "tx203141", "link": "https://stackoverflow.com/users/6901907/tx203141"}, "edited": false, "score": 0, "creation_date": 1505347727, "post_id": 46208480, "comment_id": 79380445, "body": "the example output is what I want to get"}, {"owner": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 0, "creation_date": 1505347778, "post_id": 46208480, "comment_id": 79380460, "body": "Ok, and what do you actually get?"}, {"owner": {"reputation": 41, "user_id": 6901907, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cf70451df5b654a500f26aeefddbd9fc?s=128&d=identicon&r=PG&f=1", "display_name": "tx203141", "link": "https://stackoverflow.com/users/6901907/tx203141"}, "edited": false, "score": 0, "creation_date": 1505347824, "post_id": 46208480, "comment_id": 79380469, "body": "The program does not compile and at the beginning of my attempts it printed 0&#39;s very rapidly"}, {"owner": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 0, "creation_date": 1505347876, "post_id": 46208480, "comment_id": 79380483, "body": "<a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">ericlippert.com/2014/03/05/how-to-debug-small-programs</a>"}, {"owner": {"reputation": 876, "user_id": 129686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9af4cb49c97162d6be3ea8c6ca90a46?s=128&d=identicon&r=PG", "display_name": "Tyler Szabo", "link": "https://stackoverflow.com/users/129686/tyler-szabo"}, "edited": false, "score": 1, "creation_date": 1505348277, "post_id": 46208480, "comment_id": 79380588, "body": "A lot of weird stuff going on here; <code>fPointer</code> is undefined, you probably want to use <code>pFileCust</code>; <code>fscanf</code> should be taking your file handle as 1st argument, then format, then your variables. <code>fprintf</code> should be either <code>STDOUT</code>. Your variable will need to be defined before <code>fscanf</code>. Finally <code>name</code> and <code>sport</code> aren&#39;t integers in your example but you&#39;re using <code>int</code> type."}, {"owner": {"reputation": 4946, "user_id": 2656614, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/rJz0Z.png?s=128&g=1", "display_name": "Addison", "link": "https://stackoverflow.com/users/2656614/addison"}, "edited": false, "score": 0, "creation_date": 1505348939, "post_id": 46208480, "comment_id": 79380748, "body": "I made a <a href=\"https://onlinegdb.com/B1h8hSwc-\" rel=\"nofollow noreferrer\">bit of a template</a> for you. This might be a better starting place for you @tx203141. Consider using <code>strtok</code>, or maybe even <code>sscanf</code> to split. Alternately, you could read using <code>fscanf</code>?"}, {"owner": {"reputation": 41, "user_id": 6901907, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cf70451df5b654a500f26aeefddbd9fc?s=128&d=identicon&r=PG&f=1", "display_name": "tx203141", "link": "https://stackoverflow.com/users/6901907/tx203141"}, "edited": false, "score": 0, "creation_date": 1505349449, "post_id": 46208480, "comment_id": 79380860, "body": "I would love to be able to use strtok effectively I have seen that all over the place for help with this task but I am not sure how to use it correctly, especially after reading in the file"}], "answers": [{"tags": [], "owner": {"reputation": 10300, "user_id": 2469027, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b62ce55f4f1a0eff6775e7863850a912?s=128&d=identicon&r=PG", "display_name": "Edward Karak", "link": "https://stackoverflow.com/users/2469027/edward-karak"}, "is_accepted": false, "score": 0, "last_activity_date": 1505348974, "creation_date": 1505348974, "answer_id": 46208730, "question_id": 46208480, "link": "https://stackoverflow.com/questions/46208480/split-parse-a-string-after-reading-a-text-file/46208730#46208730", "title": "Split/Parse a String after reading a Text File?", "body": "<p>Each line in your file corresponds to a record. Each series of consecutive non-whitespace characters corresponds to a field in the current record. Accordingly, </p>\n\n<pre><code>/* getrecord: read next record on fp */\nchar *getrecord(FILE *fp)\n{\n    assert(fp);\n\n    char *line = malloc(MAXLINE);\n    if (line != NULL)\n        if (fgets(line, MAXLINE, fp) != NULL)\n            return line;\n\n    return NULL;\n}\n\n/* getfield: read next field in record */\nchar *getfield(const char *record, int *pos)\n{\n    assert(record &amp;&amp; pos);\n\n    char *record;\n    int ret;\n\n    if ((record = malloc(MAXRECORD)) != NULL) {\n        ret = sscanf(record + *pos, \"%s\", record);\n        if (ret == 1)\n            return record;\n    }\n    return NULL;\n}\n</code></pre>\n\n<p>While each function does not appear to do much work, separating your business logic from record/field reading has real benefits. It allows extensibility (for example you can add error handling to these routines). You can also make more sense of your code. Now you can write your <code>main</code> function which will use this pair of calls.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1505358826, "post_id": 46208781, "comment_id": 79382948, "body": "<code>fscanf(pFileCust, &quot;%d %99s %99s %99s&quot;, ...) == 4</code> would be more robust."}], "tags": [], "owner": {"reputation": 353, "user_id": 1335475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77ef4c4df7698aec60571fd46af35cc0?s=128&d=identicon&r=PG", "display_name": "Blunt Jackson", "link": "https://stackoverflow.com/users/1335475/blunt-jackson"}, "is_accepted": false, "score": 0, "last_activity_date": 1505349422, "creation_date": 1505349422, "answer_id": 46208781, "question_id": 46208480, "link": "https://stackoverflow.com/questions/46208480/split-parse-a-string-after-reading-a-text-file/46208781#46208781", "title": "Split/Parse a String after reading a Text File?", "body": "<p>Here is a simple adaptation of your code that (a) compiles, and (b) generates the output that you desire.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n  FILE *pFileCust = fopen(\"Athletes.txt\", \"r\");\n  char first_name[100], last_name[100], sport[100];\n  int id;\n\n  while (fscanf(pFileCust, \"%d %s %s %s\", &amp;id, first_name, last_name, sport) != EOF) {\n    printf(\"%s %d %s %s\\n\", sport, id, first_name, last_name);\n\n  }\n\n  fclose(pFileCust);\n  return 0;\n}\n</code></pre>\n\n<p>One of the key things your app was missing was anything assigning values to your variables; your fscanf was not doing anything (if it even compiled). fscanf is not a very GOOD way to parse text, it's not very robust. But for the principle of understanding how variables are assigned, please look carefully at that, and in particular understand why the id has an ampersand in front of it. Also, make sure you understand why I used both a first name and a last name.</p>\n"}], "owner": {"reputation": 41, "user_id": 6901907, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cf70451df5b654a500f26aeefddbd9fc?s=128&d=identicon&r=PG&f=1", "display_name": "tx203141", "link": "https://stackoverflow.com/users/6901907/tx203141"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1505349422, "creation_date": 1505347103, "last_edit_date": 1505347702, "question_id": 46208480, "link": "https://stackoverflow.com/questions/46208480/split-parse-a-string-after-reading-a-text-file", "title": "Split/Parse a String after reading a Text File?", "body": "<p>I am trying to simply read in a basic text file, split each line into separate strings and rearrange/copy them onto a new text file. Is there any simple way to split and identify these strings to be added to a new file at the end of processing the lines? </p>\n\n<p>My code so far:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n    FILE *pFileCust\n    fPointer = fopen(\"Athletes.txt\", \"r\");\n    char singleLine[150];\n\n    while (!feof(pFileCust)){\n        fscanf(singleLine, 150);\n        int id, name, sport;\n        fprintf(%d[0,6], %s[8,15], %s[16,22], id, name, sport);\n    }\n\n    fclose(fPointer);\n    return 0;\n}\n</code></pre>\n\n<p>Example Text File to be read into the program:</p>\n\n<pre><code>88888 John Doe Tennis\n99999 Jane Smith Softball\n</code></pre>\n\n<p>Example Output that I am trying to achieve.</p>\n\n<pre><code>Tennis 88888 John Doe\nSoftball 99999 Jane Smith\n</code></pre>\n"}, {"tags": ["c", "memory-leaks"], "comments": [{"owner": {"reputation": 831, "user_id": 3789324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Pxqcq.jpg?s=128&g=1", "display_name": "auserdude", "link": "https://stackoverflow.com/users/3789324/auserdude"}, "edited": false, "score": 0, "creation_date": 1505343719, "post_id": 46208047, "comment_id": 79379440, "body": "Aren&#39;t you returning the address of x in foo1?!"}, {"owner": {"reputation": 1209, "user_id": 721826, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cUJaQ.png?s=128&g=1", "display_name": "hsmiths", "link": "https://stackoverflow.com/users/721826/hsmiths"}, "edited": false, "score": 0, "creation_date": 1505343768, "post_id": 46208047, "comment_id": 79379455, "body": "You are referencing an out-of-scope local variable, which could cause an exception and is generally bad practice. I don&#39;t see where memory would &quot;leak&quot;. Perhaps this would be categorized as access-after-free."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1505343790, "post_id": 46208047, "comment_id": 79379465, "body": "There can be no memory leaks in a program without <code>malloc()</code> or a lower level allocation function like <code>sbrk()</code>."}, {"owner": {"reputation": 831, "user_id": 3789324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Pxqcq.jpg?s=128&g=1", "display_name": "auserdude", "link": "https://stackoverflow.com/users/3789324/auserdude"}, "edited": false, "score": 0, "creation_date": 1505343849, "post_id": 46208047, "comment_id": 79379482, "body": "The issue is that you are returning a pointer to <code>x</code> in <code>foo1</code> but x has scope only within <code>foo1</code>"}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1505344384, "post_id": 46208047, "comment_id": 79379624, "body": "This is no <i>memory leak</i>. A memory leak occurs when you <code>malloc</code>, but then neglect to <code>free</code>. What you&#39;re doing is <i>accessing an object after it&#39;s been destroyed</i>, and is <b>very different</b>. May I suggest that you stop guessing and start reading?"}], "answers": [{"tags": [], "owner": {"reputation": 831, "user_id": 3789324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Pxqcq.jpg?s=128&g=1", "display_name": "auserdude", "link": "https://stackoverflow.com/users/3789324/auserdude"}, "is_accepted": false, "score": 1, "last_activity_date": 1505343939, "creation_date": 1505343939, "answer_id": 46208098, "question_id": 46208047, "link": "https://stackoverflow.com/questions/46208047/issues-with-an-example-of-memory-leak/46208098#46208098", "title": "Issues with an example of memory leak", "body": "<p>In your function <code>foo1</code></p>\n\n<pre><code>int* foo1(int a, int b)\n{\n   int *ptr, x;\n\n   ptr = &amp;x;\n   x = a * b;\n   return ptr;\n}\n</code></pre>\n\n<p>You are returning the address of <code>x</code> but this variable's scope is within the function <code>foo1</code>. Once this function returns and you dereference the pointer to <code>x</code> you are basically accessing an unscoped variable. </p>\n\n<p>This results in an <strong>unpredictable</strong> behavior.</p>\n"}], "owner": {"reputation": 1, "user_id": 8605924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20a9e84048428d982545baa0991d491b?s=128&d=identicon&r=PG&f=1", "display_name": "ddej", "link": "https://stackoverflow.com/users/8605924/ddej"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "closed_date": 1505344646, "answer_count": 1, "score": -1, "last_activity_date": 1505344578, "creation_date": 1505343515, "last_edit_date": 1505344578, "question_id": 46208047, "link": "https://stackoverflow.com/questions/46208047/issues-with-an-example-of-memory-leak", "closed_reason": "Duplicate", "title": "Issues with an example of memory leak", "body": "<p>This line of code below is an example of a potential memory leak we have been going over in class.</p>\n\n<p>I cannot follow the code logically to get the output. </p>\n\n<p>When I go through it line by line I think that the output should be <code>\"Sucess!! val1 -&gt; 10, val2 -&gt; 10\"</code> but the actual output when I run the code is <code>\"Abort System - ERROR!! val1 -&gt; 10, val2 -&gt; 108\"</code>. </p>\n\n<p>It appears that when <code>foo2</code> gets called the second time it overwrites the first element in the array with a value of 100. </p>\n\n<p>I guess what I am not understanding is how the <code>int x</code> in <code>foo1</code> is linked to the array <code>int x[10]</code> in <code>foo2</code>. Shouldn't these not be linked to each other since they are both locally declared?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n\nint* foo1(int a, int b)\n{\n   int *ptr, x;\n\n   ptr = &amp;x;\n   x = a * b;\n   return ptr;\n}\n\nint foo2(int a, int b)\n{\n   int i, c, x[10];\n\n   for (i=0; i &lt; 10; i++) x[i] = 100;\n\n   c = a + b;\n   return c;\n}\n\n\nint main(void)\n{\n   int *ptr;\n   int i, val;\n   int val1, val2;\n\n   for (i = 1; i &lt;= 2; i++) \n   {\n      if (i % 2) {\n         val = foo2(3, 5);\n         ptr = foo1(1, 2);\n         val1 = val + *ptr;\n      }\n      else {\n         ptr = foo1(1, 2);\n         val = foo2(3, 5);\n         val2 = val + *ptr;\n      }\n   }\n\n   if (val1 != val2) {\n      printf(\"Abort System - ERROR!!\\n\");\n   }\n   else {\n      printf(\"Sucess!!\\n\");\n   }\n   printf(\"val1 -&gt; %i, val2 -&gt; %i\\n\", val1, val2);\n\n   return 0;  \n}\n</code></pre>\n"}, {"tags": ["c++", "c", "buffer"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1505342135, "post_id": 46207765, "comment_id": 79378978, "body": "<code>fflush(stdin)</code> only works on buffered input streams (like disk files), it does not work on pipes and terminals.  In C++, you can use <code>std::cin.ignore()</code> to ignore buffered unread input, eg: <code>std::cin.ignore(std::numeric_limits&lt;std::streamsize&gt;::max(), &#39;\\n&#39;)</code>"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1505343437, "post_id": 46207765, "comment_id": 79379366, "body": "@Remy: Doesn&#39;t <code>std::cin.ignore</code> also ignore unread input not yet buffered, until it finds the delimiter character?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1505343684, "post_id": 46207765, "comment_id": 79379429, "body": "@rici: yes. To clear just the previously buffered data, you would likely have to access <code>std::cin</code>&#39;s underlying <code>streambuf</code> object directly and read from it until it has nothing to read without going back to the terminal for more data."}, {"owner": {"reputation": 1, "user_id": 8173903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b86cf69235ee615263917bb688ad16a?s=128&d=identicon&r=PG&f=1", "display_name": "Wesley Alves", "link": "https://stackoverflow.com/users/8173903/wesley-alves"}, "edited": false, "score": 0, "creation_date": 1505343692, "post_id": 46207765, "comment_id": 79379433, "body": "And for C, what is the solution?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1505344003, "post_id": 46207765, "comment_id": 79379528, "body": "@WesleyAlves: There isn&#39;t really a cross-platform solution. There is <code>fpurge()</code> on Linux, but no equivalent on Windows (unless you count <code>FlushConsoleInputBuffer()</code>, which flushes what the user has already typed in the console that hasn&#39;t been read in by your app yet). You could try using <code>freopen()</code> to close and reopen stdin, if your compiler&#39;s RTL implements it."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1505344322, "post_id": 46207765, "comment_id": 79379606, "body": "There are also <code>ioctl</code> invocations you can use on Unix/Linux to clear the terminal input buffer (if it&#39;s terminal input you care about, naturally)."}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1505344822, "post_id": 46207765, "comment_id": 79379726, "body": "@RemyLebeau I think what you meant to write is along the lines of &quot;<code>fflush</code> is only guaranteed to <i>do anything</i> for files with which the last operation was a write&quot;... Please tell me you meant to write that, right?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1505347127, "post_id": 46207765, "comment_id": 79380278, "body": "@Sebivor: <code>fflush()</code> is defined only for output streams, not input streams.  However, Linux does implement <code>fflush()</code> for input streams of seekable files."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1505368788, "post_id": 46207765, "comment_id": 79386049, "body": "@RemyLebeau as of POSIX.1-2008, fflush() is defined to remove unread characters from an input stream."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1519769445, "post_id": 46207765, "comment_id": 85042752, "body": "The buffer is provided by the operating system so you can&#39;t do anything with it independent of the operating system..."}], "answers": [{"comments": [{"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1505344827, "post_id": 46208114, "comment_id": 79379727, "body": "Nitpick: that would be line feed, not carriage return (which is <code>\\r</code>)."}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "reply_to_user": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1505345069, "post_id": 46208114, "comment_id": 79379788, "body": "@NominalAnimal Right back at ya, <code>&#39;\\n&#39;</code> in C isn&#39;t required to be a line feed; in fact, the character &quot;line feed&quot; isn&#39;t required to exist (though oddly enough, carriage returns are required). The C standard describes characters with the value <code>&#39;\\n&#39;</code> as &quot;newline characters&quot;..."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "reply_to_user": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1505345539, "post_id": 46208114, "comment_id": 79379894, "body": "@Sebivor: Wrong. <code>\\n</code> in C is &quot;newline&quot;, and <code>\\r</code> is &quot;carriage return&quot;, according to C11 5.2.2p2. However, Unicode and ASCII call <code>\\n</code> line feed. That said, I do prefer &quot;newline&quot; over &quot;line feed&quot; myself."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1505345544, "post_id": 46208114, "comment_id": 79379896, "body": "I learned my terminology from 80s micros (yeah, I&#39;m that old) and they consistently called it a &quot;carriage return,&quot; because everyone writing the documentation was familiar with mechanical typewriters.  &quot;Newline&quot; is perhaps the better term in the context of C, though."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1505346503, "post_id": 46208114, "comment_id": 79380114, "body": "Yes, I fully agree, <i>newline</i> is the best term here for <code>&#39;\\n&#39;</code>. This is quite a complex set of details, when one gets to the OS level, and that&#39;s the only reason I bothered with the nitpick. For example, in POSIXy systems the pseudoterminal layer (tty/pty) maps the <code>\\n</code> (<i>newline</i>) output by programs to <code>\\r\\n</code> (<i>carriage return</i> followed by <i>linefeed</i>) by default (<code>ONLCR</code> termios flag is set by default). There is a clear layer boundary, and when using e.g. curses or &quot;raw&quot; terminal (or writing a master!), this often surprises programmers. Exact terms help with untangling this mess, I believe."}], "tags": [], "owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "is_accepted": true, "score": 1, "last_activity_date": 1519767684, "last_edit_date": 1519767684, "creation_date": 1505344090, "answer_id": 46208114, "question_id": 46207765, "link": "https://stackoverflow.com/questions/46207765/clear-buffer-independent-of-the-operating-system/46208114#46208114", "title": "Clear buffer independent of the operating system", "body": "<p>Depending on what you mean by \"clear the standard input buffer\", this may do:</p>\n\n<pre><code>int c;\ndo c = getchar(); while (c != EOF &amp;&amp; c != '\\n');\n</code></pre>\n\n<p>This absorbs up to EOF or a newline, whichever comes first.</p>\n\n<p>The main situation where this wouldn't be what you want is if you don't want it to maybe block until the user presses Enter.  In that case, you're SOL; there is no universal mechanism.</p>\n"}], "owner": {"reputation": 1, "user_id": 8173903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b86cf69235ee615263917bb688ad16a?s=128&d=identicon&r=PG&f=1", "display_name": "Wesley Alves", "link": "https://stackoverflow.com/users/8173903/wesley-alves"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 46208114, "answer_count": 1, "score": 0, "last_activity_date": 1519767684, "creation_date": 1505341898, "question_id": 46207765, "link": "https://stackoverflow.com/questions/46207765/clear-buffer-independent-of-the-operating-system", "title": "Clear buffer independent of the operating system", "body": "<p>I'd like to know how I can do to clear the standard input buffer, regardless of the operating system I'm using.\nI know that in Windows I can use <code>fflush</code> and Linux <code>fpurge</code>, but I would like a single solution that works for both (does not necessarily have to be a function).</p>\n"}, {"tags": ["c", "gcc", "assembly", "gnu-assembler"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1505342714, "post_id": 46207750, "comment_id": 79379160, "body": "I guess you should use <b><code>-m32</code>...</b>"}, {"owner": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "edited": false, "score": 1, "creation_date": 1505348903, "post_id": 46207750, "comment_id": 79380740, "body": "Don&#39;t change 32b to 64b while you are just learning, it takes usually lot more effort than just replacing registers, in this particular case the <code>int 0x80</code> shouldn&#39;t be used in 64b, and there&#39;s no simple replacement. The proper <code>syscall</code> can replace that <code>int 0x80</code>, but it will expect different arguments, so you still need to rewrite it all. So your effort to work with 32b binaries to follow the book is good decision, porting 32b to 64b target platform requires quite some experience and time."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "edited": false, "score": 0, "creation_date": 1505429583, "post_id": 46207750, "comment_id": 79422524, "body": "@Ped7g: Also important, you can&#39;t safely <code>push</code> / <code>pop</code> from inline asm in 64-bit code, because that clobbers the red-zone.  <a href=\"https://stackoverflow.com/questions/34520013/using-base-pointer-register-in-c-inline-asm\" title=\"using base pointer register in c inline asm\">stackoverflow.com/questions/34520013/&hellip;</a>.  For <code>int $0x80</code> in 64-bit mode, see <a href=\"https://stackoverflow.com/questions/46087730/what-happens-if-you-use-the-32-bit-int-0x80-linux-abi-in-64-bit-code\" title=\"what happens if you use the 32 bit int 0x80 linux abi in 64 bit code\">stackoverflow.com/questions/46087730/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 410, "user_id": 5310022, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh4.googleusercontent.com/-ggTujJV2j18/AAAAAAAAAAI/AAAAAAAAAUU/Mg_IHUv7264/photo.jpg?sz=128", "display_name": "Willdorf", "link": "https://stackoverflow.com/users/5310022/willdorf"}, "is_accepted": true, "score": 3, "last_activity_date": 1505343458, "creation_date": 1505343458, "answer_id": 46208041, "question_id": 46207750, "link": "https://stackoverflow.com/questions/46207750/how-to-compile-a-c-program-which-contains-32bit-asm-into-o-file/46208041#46208041", "title": "How to Compile a C program which contains 32bit asm into .o file?", "body": "<p>Use <code>gcc -m32 -c evil_puts.c -o evil_puts.o</code></p>\n\n<p>You're getting that error because you don't have the 32-bit libraries installed.</p>\n\n<p>If using Ubuntu:</p>\n\n<p><code>sudo apt-get install gcc-multilib</code></p>\n"}, {"tags": [], "owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "is_accepted": false, "score": 1, "last_activity_date": 1505345830, "creation_date": 1505345830, "answer_id": 46208332, "question_id": 46207750, "link": "https://stackoverflow.com/questions/46207750/how-to-compile-a-c-program-which-contains-32bit-asm-into-o-file/46208332#46208332", "title": "How to Compile a C program which contains 32bit asm into .o file?", "body": "<p>Knowledge specific to 32-bit x86 is of limited usefulness these days since basically everybody has switched to 64-bit (this is a good thing - 32-bit has a lot of register pressure and address space pressure).</p>\n\n<p>Luckily, you don't actually need any asm for what you're doing. I've also made a couple sanity fixes:</p>\n\n<pre><code>#define _GNU_SOURCE\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/syscall.h&gt;\n\n#define write_str(fd, s) my_write(fd, s, strlen(s))\nstatic ssize_t my_write(int fd, const void *buf, size_t count)\n{\n    return syscall(SYS_write, (long)fd, (long)buf, (long)count);\n}\n\nint puts(const char *s __attribute__((unused)))\n{\n    write_str(STDOUT_FILENO, \"HAHA puts() has been hijacked!\\n\");\n    return strlen(s) + 1;\n}\n</code></pre>\n\n<p>I'm not sure exactly why you're avoiding <code>write(2)</code>. But if you really need to avoid <code>syscall(2)</code> as well, it will still be far easier to implement that single function in assembly than write assembly <em>everywhere</em>.</p>\n"}], "owner": {"reputation": 127, "user_id": 8340857, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8c04cc726e9708c29920e8afb5548e9?s=128&d=identicon&r=PG&f=1", "display_name": "digitalXmage", "link": "https://stackoverflow.com/users/8340857/digitalxmage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 727, "favorite_count": 0, "accepted_answer_id": 46208041, "answer_count": 2, "score": 1, "last_activity_date": 1505345830, "creation_date": 1505341823, "last_edit_date": 1505342996, "question_id": 46207750, "link": "https://stackoverflow.com/questions/46207750/how-to-compile-a-c-program-which-contains-32bit-asm-into-o-file", "title": "How to Compile a C program which contains 32bit asm into .o file?", "body": "<p><strong>Introduction</strong></p>\n\n<p>I'm following through the book \"<em>Learning Linux Binary Analysis</em>\". I have some experience working with 32 bit assembly and C (however still consider myself a novice). However I'm having trouble and confusion of how to compile a c program , which contains 32 bit assembly into an object file .o. So im guessing this is just a compilation issue on my part.</p>\n\n<p><em>The Source code is for part of an example of code injection-based binary patching.</em></p>\n\n<p><strong>Source Code</strong></p>\n\n<pre><code>#include &lt;sys/syscall.h&gt;\nint _write (int fd, void *buf, int count)\n{\n  long ret;\n  __asm__ __volatile__ (\"pushl %%ebx\\n\\t\"\n  \"movl %%esi,%%ebx\\n\\t\"\n  \"int $0x80\\n\\t\"\"popl %%ebx\":\"=a\" (ret)\n                          :\"0\" (SYS_write), \"S\" ((long) fd),\n  \"c\" ((long) buf), \"d\" ((long) count));\n    if (ret &gt;= 0) {\n        return (int) ret;\n }\n return -1;\n}\nint evil_puts(void)\n{\n        _write(1, \"HAHA puts() has been hijacked!\\n\", 31);\n}\n</code></pre>\n\n<p><strong>The problem</strong></p>\n\n<p>I attempt to compile evil_puts.c into .o file. Which will then be used later for injection into another simple program.</p>\n\n<pre><code>gcc -c evil_puts.c\n</code></pre>\n\n<blockquote>\n  <p>evil_puts.c: Assembler messages:</p>\n  \n  <p>evil_puts.c:5: Error: invalid instruction suffix for `push'</p>\n  \n  <p>evil_puts.c:8: Error: invalid instruction suffix for `pop'</p>\n</blockquote>\n\n<p>I've received this before when working with 32 assembly with gas. And to solve this i put the '-32' flag when compiling and linking. Which i'm guessing is the problem? however not completely sure, and don't have an idea of how to compile it in 32 bit with C and gcc if that's the case?</p>\n\n<p>I also attempted to change it to 64bit to see if it would work, by replacing 'l' of every command to 'q' and changing the registers to begin with 'r'. which seems to work. However the book uses 32 bit. So i wish to keep it that way. Any ideas? Sorry if this is a really basic question.</p>\n\n<p>Also tried '-m32' but receive this:</p>\n\n<blockquote>\n  <p>fatal error: sys/syscall.h: No such file or directory</p>\n</blockquote>\n"}, {"tags": ["c", "pointers", "pointer-arithmetic"], "comments": [{"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 2, "creation_date": 1505340531, "post_id": 46207516, "comment_id": 79378449, "body": "Welcome to Stack Overflow. Please spend some time taking the <a href=\"https://stackoverflow.com/tour\">tour</a> and reading through the <a href=\"https://stackoverflow.com/help\">help center</a> pages, especially <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>, before posting your next question here. We&#39;re not a tutorial or homework completion service. Good luck."}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1505340726, "post_id": 46207516, "comment_id": 79378526, "body": "You are not supposed to understand this code.  Nobody does.  Be sure to delete it from your machine so it can do no more harm."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1505340911, "post_id": 46207516, "comment_id": 79378593, "body": "Reading of <b>any</b> C book or tutorial will make it clear. But not watching the YT."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1505341137, "post_id": 46207516, "comment_id": 79378665, "body": "Before <code>doSomethingELSE(w+1);</code> add <code>printf(&quot;Before &lt;%s&gt; &lt;%s&gt;\\n&quot;, w, s);</code>   After  <code>doSomethingELSE(w+1);</code> add <code>printf(&quot;After &lt;%s&gt;\\n&quot;, w);</code> and try running again."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1505342511, "post_id": 46207516, "comment_id": 79379104, "body": "<b>how it will know when to stop</b> It stops when it does <code>if (*w == 0) return;</code> That happens when <code>w</code> points to the end of the string."}], "answers": [{"tags": [], "owner": {"reputation": 1149, "user_id": 2472827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5rYY.jpg?s=128&g=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/2472827/neil"}, "is_accepted": true, "score": 0, "last_activity_date": 1505347350, "creation_date": 1505347350, "answer_id": 46208515, "question_id": 46207516, "link": "https://stackoverflow.com/questions/46207516/pointer-arithmetics-and-char-array/46208515#46208515", "title": "Pointer Arithmetics and Char array", "body": "<p>The recursive function calls stop after <code>doSomethingELSE(w+1)</code> gets \"bcdfb\", \"cdfb\", \"dfb\", \"fb\", \"b\", \"\" -> <code>if(w[0] == '\\0') return</code>. This places an execution stack of function calls for each <code>char</code>, going backwards. The <code>static</code> variable <code>s</code> goes forward. After cleaning-up, it is more clear what happens:</p>\n\n<pre><code>#include &lt;stdio.h&gt; /* printf */\n#include &lt;string.h&gt; /* strlen */\n\n/* prototype */\nvoid swapConsectutiveLetters(char * word);\n\n/** Provides a word. */\nint main(void) {\n    char word[10] = \"abcdfb\";\n    swapConsectutiveLetters(word);\n    printf(\"%s\", word);\n    return 0;\n}\n\n/** Detects consecutive letters occurring in the n-th from first,\n last and swaps them. */\nvoid swapConsectutiveLetters(char * word) {\n    char * end;\n    /* Do nothing: null, empty, or 1-char string. */\n    if(!word || word[0] == '\\0' || word[1] == '\\0') return;\n    /* Obtain a pointer to the end of the string. */\n    end = word + strlen(word) - 1;\n    /* Swaps consecutive letters. */\n    do {\n        if(end[0] - word[0] == 1) {\n            char temp = word[0];\n            word[0]   = end[0];\n            end[0]    = temp;\n        }\n    } while(++word &lt; --end);\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8605838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26fc3d7b2f5629cbf7fc866e70570f81?s=128&d=identicon&r=PG&f=1", "display_name": "palser", "link": "https://stackoverflow.com/users/8605838/palser"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "closed_date": 1505341679, "accepted_answer_id": 46208515, "answer_count": 1, "score": -3, "last_activity_date": 1505347350, "creation_date": 1505340333, "last_edit_date": 1505340807, "question_id": 46207516, "link": "https://stackoverflow.com/questions/46207516/pointer-arithmetics-and-char-array", "closed_reason": "Needs details or clarity", "title": "Pointer Arithmetics and Char array", "body": "<p>I am having trouble understanding the following code. Although I tried to debug it for some time it seems that I can't understand the exact mechanics of the code and I am feeling stuck. Any help will be deeply appreciated.</p>\n\n<p>edit: Well my problem is mostly located on the recursive function and how it will know when to stop calling it self.</p>\n\n<pre><code>int main(){\n  char word[10]=\"abcdfb\";\n  doSomethingELSE(word);\n  printf(\"%s\",word);\n  return 0;\n}\n\nvoid doSomethingELSE(char * w){\n  static char * s =NULL;\n  char t;\n  if(!s){\n    s=w;\n  }\n  if(*w==0)return;\n  doSomethingELSE(w+1);\n  if(s&gt;w)return;\n  if(*w -*s==1){\n    t=*s;\n    *s=*w;\n    *w=t;\n  }\n\n  s++;\n  return;\n}\n</code></pre>\n"}, {"tags": ["c", "cs50"], "comments": [{"owner": {"reputation": 112977, "user_id": 390278, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/84715fec547362389d02f5be0ed12814?s=128&d=identicon&r=PG", "display_name": "Jeff Mercado", "link": "https://stackoverflow.com/users/390278/jeff-mercado"}, "edited": false, "score": 1, "creation_date": 1505340176, "post_id": 46207446, "comment_id": 79378318, "body": "null terminator"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1505340268, "post_id": 46207446, "comment_id": 79378345, "body": "<code>if (!(name[0] &gt;= &#39;A&#39; &amp;&amp; name[0] &lt;= &#39;Z&#39;))</code> should be <code>if (name[0] &gt;= &#39;a&#39; &amp;&amp; name[0] &lt;= &#39;z&#39;)</code> (subject to continuous alphabet coding). Consider using <code>islower(name[0])</code>."}, {"owner": {"reputation": 41, "user_id": 6011209, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205982729909133/picture?type=large", "display_name": "Kaue Pacheco", "link": "https://stackoverflow.com/users/6011209/kaue-pacheco"}, "reply_to_user": {"reputation": 112977, "user_id": 390278, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/84715fec547362389d02f5be0ed12814?s=128&d=identicon&r=PG", "display_name": "Jeff Mercado", "link": "https://stackoverflow.com/users/390278/jeff-mercado"}, "edited": false, "score": 0, "creation_date": 1505379126, "post_id": 46207446, "comment_id": 79391800, "body": "@JeffMercado can you elaborate?"}, {"owner": {"reputation": 41, "user_id": 6011209, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205982729909133/picture?type=large", "display_name": "Kaue Pacheco", "link": "https://stackoverflow.com/users/6011209/kaue-pacheco"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1505379321, "post_id": 46207446, "comment_id": 79391937, "body": "@WeatherVane thank you for your reply!"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 6011209, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205982729909133/picture?type=large", "display_name": "Kaue Pacheco", "link": "https://stackoverflow.com/users/6011209/kaue-pacheco"}, "edited": false, "score": 0, "creation_date": 1505379572, "post_id": 46207668, "comment_id": 79392123, "body": "It worked, but I still didn`t really get it why. Could you elaborate? Thank you"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 41, "user_id": 6011209, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205982729909133/picture?type=large", "display_name": "Kaue Pacheco", "link": "https://stackoverflow.com/users/6011209/kaue-pacheco"}, "edited": false, "score": 0, "creation_date": 1505380298, "post_id": 46207668, "comment_id": 79392616, "body": "you need 0 at the end of the string to be a C string."}, {"owner": {"reputation": 41, "user_id": 6011209, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205982729909133/picture?type=large", "display_name": "Kaue Pacheco", "link": "https://stackoverflow.com/users/6011209/kaue-pacheco"}, "edited": false, "score": 0, "creation_date": 1505425992, "post_id": 46207668, "comment_id": 79421392, "body": "Got it, but what is the output ]A?"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 41, "user_id": 6011209, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205982729909133/picture?type=large", "display_name": "Kaue Pacheco", "link": "https://stackoverflow.com/users/6011209/kaue-pacheco"}, "edited": false, "score": 0, "creation_date": 1505427256, "post_id": 46207668, "comment_id": 79421857, "body": "it can anyting - it is just something left in the memory. UB"}], "tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": true, "score": 1, "last_activity_date": 1505341255, "creation_date": 1505341255, "answer_id": 46207668, "question_id": 46207446, "link": "https://stackoverflow.com/questions/46207446/why-my-program-outputs-weird-characteres/46207668#46207668", "title": "Why my program outputs weird characteres?", "body": "<p>add the </p>\n\n<p><code>initials[index] = 0;</code> before the <code>printf</code>. You do not terminate your char array with zero. The C string a number of chars with the zero at the end</p>\n"}], "owner": {"reputation": 41, "user_id": 6011209, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205982729909133/picture?type=large", "display_name": "Kaue Pacheco", "link": "https://stackoverflow.com/users/6011209/kaue-pacheco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 46207668, "answer_count": 1, "score": -1, "last_activity_date": 1505349205, "creation_date": 1505339912, "last_edit_date": 1505349205, "question_id": 46207446, "link": "https://stackoverflow.com/questions/46207446/why-my-program-outputs-weird-characteres", "title": "Why my program outputs weird characteres?", "body": "<p>When I use 3 or more names my programs outputs weird characters.</p>\n\n<p>When I use 2 is totally fine, when I use a lot of spaces is all good as well.</p>\n\n<p>But when I try\n   kaue  rodrigo   pacheco\nThe output is:\nKRP]A</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;cs50.h&gt;\n#include &lt;string.h&gt;\n\nint main(void)\n{\nstring name = get_string(\"What is your name?\\n\");\n\n// initiate array that will contain all the initials\nchar initials[10];\n\n// initials index\nint index = 0;\n\n// if first character is not a space then append to initials\nif (name[0] != 32)\n{\n        // if the character is not between A-Z\n        if (!(name[0] &gt;= 'A' &amp;&amp; name[0] &lt;= 'Z'))\n        {\n            // transform it in uppercase\n            name[0] = name[0] - 32;\n        }\n        // append the character into initials array\n        initials[index] = name[0];\n        // keep track on how many were done\n        index++;\n}\n\n\n// iterate through the user input\nfor (int i = 1; i &lt; strlen(name); i++) \n{\n    if ((name[i] != 32) &amp;&amp; (name[i - 1] == 32))\n    {\n        // if the character after the blankspace is not between A-Z\n        if (!(name[i] &gt;= 'A' &amp;&amp; name[i] &lt;= 'Z'))\n        {\n            // transform it in uppercase\n            name[i] = name[i] - 32;\n        }\n        // append the character into initials array\n        initials[index] = name[i];\n        // keep track on how many were done\n        index++;\n    }\n}\n// end result, prints all initials uppercase\nprintf(\"%s\\n\", initials);\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c", "gcc", "assembly", "x86", "inline-assembly"], "comments": [{"owner": {"reputation": 6093, "user_id": 2189500, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/109f747845a9ce762a1fff72eb8cf6f3?s=128&d=identicon&r=PG", "display_name": "David Wohlferd", "link": "https://stackoverflow.com/users/2189500/david-wohlferd"}, "edited": false, "score": 3, "creation_date": 1505340921, "post_id": 46206719, "comment_id": 79378597, "body": "<code>mov %%edx, %0</code> So... you are moving the (undefined) contents of edx to the (read only) variable %0?  By default gcc uses att syntax, which is (usually) the reverse of intel syntax."}, {"owner": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "edited": false, "score": 0, "creation_date": 1505341071, "post_id": 46206719, "comment_id": 79378647, "body": "That first assembly should not work either. If it prints 1, it must be some accident."}, {"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1505347321, "post_id": 46206719, "comment_id": 79380338, "body": "You have UB if you don&#39;t specify <code>&quot;memory&quot;</code> in the clobber list."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 1, "creation_date": 1505356273, "post_id": 46206719, "comment_id": 79382363, "body": "To me it almost seems you may not realize that in AT&amp;T syntax that source and destination are reversed. Source is the first operand and destination is the second (Intel syntax is opposite)"}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "reply_to_user": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1505356664, "post_id": 46206719, "comment_id": 79382452, "body": "Depends on which case you are referring to @o11c : <code>__asm__ __volatile__ (&quot;mov %[mem], %%edx&quot;:[mem] &quot;=m&quot; (y)::);</code>wouldn&#39;t require it but <code>__asm__ __volatile__ (&quot;mov (%0), %%edx;&quot;:&quot;+r&quot; (y)::);</code> would (There are other issues though in those two inline assembly templates though. There is also a dereference missing on <code>&quot;=m&quot; (y)</code>. Think he was going for <code>&quot;=m&quot; (*y)</code>"}, {"owner": {"reputation": 21, "user_id": 8605562, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_fIzjUjV7cg/AAAAAAAAAAI/AAAAAAAAAtA/mJzLSTYrlHw/photo.jpg?sz=128", "display_name": "Dan Pesce", "link": "https://stackoverflow.com/users/8605562/dan-pesce"}, "reply_to_user": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1505398527, "post_id": 46206719, "comment_id": 79405728, "body": "Thanks Micheal and @o11c! Your suggestions worked for both lines. I don&#39;t see any difference when adjusting for intel/att syntax though."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 1, "creation_date": 1505411685, "post_id": 46206719, "comment_id": 79414392, "body": "It really is unclear what you are trying to do. are you trying to get the value in <i>EDX</i> and palce it into a memory location or the other way around?"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1505430062, "post_id": 46206719, "comment_id": 79422637, "body": "@Dan: I think you need to read some inline asm tutorials / guides.  See <a href=\"https://stackoverflow.com/tags/inline-assembly/info\">stackoverflow.com/tags/inline-assembly/info</a> for some links.  For example, you&#39;re writing to <code>%0</code> after telling the compiler it&#39;s an input operand, or reading an output-only (<code>&quot;=r&quot;</code>) operand.  So nothing you&#39;re doing makes any sense.  Neither does hoping the compiler doesn&#39;t touch <code>%edx</code> between two separate <code>__asm__</code> statements."}, {"owner": {"reputation": 21, "user_id": 8605562, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_fIzjUjV7cg/AAAAAAAAAAI/AAAAAAAAAtA/mJzLSTYrlHw/photo.jpg?sz=128", "display_name": "Dan Pesce", "link": "https://stackoverflow.com/users/8605562/dan-pesce"}, "reply_to_user": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1505491344, "post_id": 46206719, "comment_id": 79451025, "body": "@MichaelPetch I&#39;m just testing out the functionality of the gcc inline assembly function, placing a value into <code>edx</code> and then placing the value of <code>edx</code> into a different variable, both with direct reference and by passing a pointer, no real application."}, {"owner": {"reputation": 21, "user_id": 8605562, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_fIzjUjV7cg/AAAAAAAAAAI/AAAAAAAAAtA/mJzLSTYrlHw/photo.jpg?sz=128", "display_name": "Dan Pesce", "link": "https://stackoverflow.com/users/8605562/dan-pesce"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1505491592, "post_id": 46206719, "comment_id": 79451148, "body": "@PeterCordes I&#39;m pretty sure the <b>volatile</b> flag will make sure the instructions are placed in their respective positions in code, so the <code>edx</code> register shouldn&#39;t be touched between instructions. Also, for the line you&#39;re referencing, I am getting output from the reg, not input, notice the argument positioning <code>&quot;mov %0, %%edx;&quot;:&quot;=r&quot; (x)::</code>"}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1505491963, "post_id": 46206719, "comment_id": 79451347, "body": "@DanPesce : <code>__asm__ __volatile__ (&quot;mov $3, %%edx\\n\\tmov %%edx, %[mem]&quot;:[mem] &quot;=m&quot; (*y)::&quot;edx&quot;);</code> would be an example using your method of moving  a value (3 in this case) into <i>EDX</i> and then moving it to a memory address. I&#39;m not suggesting this is ideal, but i think it is close to what you are looking for with your thinking."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 1, "creation_date": 1505492488, "post_id": 46206719, "comment_id": 79451645, "body": "@DanPesce : <code>volatile</code> won&#39;t guarantee that inline assembly will appear in the order they are present in the code if the inline assembly statements have no dependencies in common. It may well be the compiler will generate them in that order, but that shouldn&#39;t be assumed. If you want to guarantee order of successive inline <code>asm</code> statements you can place more than one instruction in the template similar to what I did with the example above. i separate each instruction with <code>\\n\\t</code>. You could also use a <code>;</code> to separate instructions. <code>\\n\\t</code> makes assembly output cleaner if you use GCC&#39;s <code>-S</code>option"}, {"owner": {"reputation": 2978, "user_id": 904148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cf9d0b9f5d61826525247bd5b79cdc0?s=128&d=identicon&r=PG", "display_name": "Timothy Baldwin", "link": "https://stackoverflow.com/users/904148/timothy-baldwin"}, "edited": false, "score": 0, "creation_date": 1510011144, "post_id": 46206719, "comment_id": 81245467, "body": "<code>volatile</code> does guarantee execution order of ask statements. What it does not guarantee is the absence of intervening code, textual order and memory address order."}], "answers": [{"tags": [], "owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": false, "score": 0, "last_activity_date": 1505514026, "creation_date": 1505514026, "answer_id": 46248157, "question_id": 46206719, "link": "https://stackoverflow.com/questions/46206719/gcc-inline-assembler-using-memory-references/46248157#46248157", "title": "GCC inline assembler using memory references", "body": "<blockquote>\n  <p>I am getting output from the reg, not input, notice the argument positioning <code>\"mov %0, %%edx;\":\"=r\" (x)::</code></p>\n</blockquote>\n\n<p>You're confused about input/output terminology.</p>\n\n<p>An output operand is an output <em>from the <code>asm</code> statement</em>, <em>into</em> a register chosen by the compiler (for the <code>\"=r\"</code> case).</p>\n\n<p>When you use <code>\"=m\"</code>, the compiler will make <code>%0</code> a memory operand.</p>\n\n<p>Or if you used <code>\"=a\"</code>, <code>%0</code> would be <code>%eax</code>, and the compiler would assume that the value of the C variable <code>x</code> is now in <code>%eax</code>.</p>\n\n<hr>\n\n<p>In AT&amp;T syntax, the destination operand is the last operand.  I think you do know this, but I think you have input/output backwards.</p>\n"}], "owner": {"reputation": 21, "user_id": 8605562, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_fIzjUjV7cg/AAAAAAAAAAI/AAAAAAAAAtA/mJzLSTYrlHw/photo.jpg?sz=128", "display_name": "Dan Pesce", "link": "https://stackoverflow.com/users/8605562/dan-pesce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1111, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1505514026, "creation_date": 1505336230, "last_edit_date": 1505429945, "question_id": 46206719, "link": "https://stackoverflow.com/questions/46206719/gcc-inline-assembler-using-memory-references", "title": "GCC inline assembler using memory references", "body": "<p>I'm trying to write an inline assembly instruction that will load a variable with the contents of a register by using a pointer to that variable instead of a direct reference.</p>\n\n<p>The code using a direct reference works fine and it looks like this:</p>\n\n<pre><code>int x;\nint *y = &amp;x;\nint z = 1;\n\n__asm__ __volatile__ (\"mov %%edx, %0;\"::\"r\"(z):);\n__asm__ __volatile__ (\"mov %0, %%edx;\":\"=r\" (x)::); \nprintf(\"\\n%x\\n\", x);\n</code></pre>\n\n<p>disasm:</p>\n\n<pre><code>0x000000000040052d &lt;+0&gt;:     push   %rbp  \n0x000000000040052e &lt;+1&gt;:     mov    %rsp,%rbp                                          \n0x0000000000400531 &lt;+4&gt;:     sub    $0x10,%rsp                                         \n0x0000000000400535 &lt;+8&gt;:     lea    -0x10(%rbp),%rax                                   \n0x0000000000400539 &lt;+12&gt;:    mov    %rax,-0x8(%rbp)                                    \n0x000000000040053d &lt;+16&gt;:    movl   $0x1,-0xc(%rbp)                                    \n0x0000000000400544 &lt;+23&gt;:    mov    -0xc(%rbp),%eax                                    \n0x0000000000400547 &lt;+26&gt;:    mov    %edx,%eax                                          \n0x0000000000400549 &lt;+28&gt;:    mov    %eax,%edx                                          \n0x000000000040054b &lt;+30&gt;:    mov    %eax,-0x10(%rbp)                                   \n0x000000000040054e &lt;+33&gt;:    mov    -0x10(%rbp),%eax                                   \n0x0000000000400551 &lt;+36&gt;:    mov    %eax,%esi                                          \n0x0000000000400553 &lt;+38&gt;:    mov    $0x4005f4,%edi                                     \n0x0000000000400558 &lt;+43&gt;:    mov    $0x0,%eax                                          \n0x000000000040055d &lt;+48&gt;:    callq  0x400410 &lt;printf@plt&gt;                              \n0x0000000000400562 &lt;+53&gt;:    mov    $0x0,%eax                                          \n0x0000000000400567 &lt;+58&gt;:    leaveq       \n0x0000000000400568 &lt;+59&gt;:    retq      \n</code></pre>\n\n<p>and it outputs 1 as expected</p>\n\n<p>The pointer version looks like this:</p>\n\n<pre><code>int x;\nint *y = &amp;x;\nint z = 1;\n\n__asm__ __volatile__ (\"mov %%edx, %0;\"::\"r\"(z):);\n__asm__ __volatile__ (\"mov (%0), %%edx;\":\"+r\" (y)::);\n//or\n__asm__ __volatile__ (\"mov %[mem], %%edx\":[mem] \"=m\" (y)::);\nprintf(\"\\n%x\\n\", x);\n</code></pre>\n\n<p>disasm:</p>\n\n<pre><code>0x000000000040052d &lt;+0&gt;:     push   %rbp\n0x000000000040052e &lt;+1&gt;:     mov    %rsp,%rbp\n0x0000000000400531 &lt;+4&gt;:     sub    $0x10,%rsp\n0x0000000000400535 &lt;+8&gt;:     lea    -0x10(%rbp),%rax\n0x0000000000400539 &lt;+12&gt;:    mov    %rax,-0x8(%rbp)\n0x000000000040053d &lt;+16&gt;:    movl   $0x1,-0xc(%rbp)\n0x0000000000400544 &lt;+23&gt;:    mov    -0xc(%rbp),%eax\n0x0000000000400547 &lt;+26&gt;:    mov    %edx,%eax\n0x0000000000400549 &lt;+28&gt;:    mov    -0x8(%rbp),%edx\n0x000000000040054c &lt;+31&gt;:    mov    -0x10(%rbp),%eax\n0x000000000040054f &lt;+34&gt;:    mov    %eax,%esi\n0x0000000000400551 &lt;+36&gt;:    mov    $0x4005f4,%edi\n0x0000000000400556 &lt;+41&gt;:    mov    $0x0,%eax\n0x000000000040055b &lt;+46&gt;:    callq  0x400410 &lt;printf@plt&gt;\n0x0000000000400560 &lt;+51&gt;:    mov    $0x0,%eax\n0x0000000000400565 &lt;+56&gt;:    leaveq \n0x0000000000400566 &lt;+57&gt;:    retq   \n</code></pre>\n\n<p>This prints a non-deterministic integer every time (i.e bb524b90 15979050). When run in gdb it prints the same integer (ffffe2f0) every time, which doesn't change based on the value of z. Does anyone have an idea what causes this?</p>\n"}, {"tags": ["c", "header", "string.h"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1505334602, "post_id": 46206316, "comment_id": 79376006, "body": "Generally, the good practice would be to include all and only the headers in the file requiring them directly."}], "answers": [{"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 3, "last_activity_date": 1505334956, "creation_date": 1505334956, "answer_id": 46206414, "question_id": 46206316, "link": "https://stackoverflow.com/questions/46206316/string-h-header-in-the-file-with-the-function-main/46206414#46206414", "title": "string.h header in the file with the function main", "body": "<p>If the translation unit containing the function main does not use the function <code>strcmp</code> or any other declaration from the header <code>&lt;string.h&gt;</code> then inclusion of the header in this translation unit is redundant and only confuses readers.</p>\n"}], "owner": {"reputation": 43, "user_id": 8605536, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QCd73.jpg?s=128&g=1", "display_name": "mariofp77", "link": "https://stackoverflow.com/users/8605536/mariofp77"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1505334956, "creation_date": 1505334522, "question_id": 46206316, "link": "https://stackoverflow.com/questions/46206316/string-h-header-in-the-file-with-the-function-main", "title": "string.h header in the file with the function main", "body": "<p>I have a program with several .c and .h files.\nIn one of the .c files I am using the function strcmp(). I am adding in this file the header for string.h</p>\n\n<p>Is the string.h header in the file with the function main also required?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c", "file", "printf", "scanf"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1505332943, "post_id": 46205927, "comment_id": 79375165, "body": "the inner loop prints linefeed many times. Strange."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1505333967, "post_id": 46205927, "comment_id": 79375707, "body": "Going to the first line of code. The first space before <code>%d</code> does not skip the <code>&quot;P3&quot;</code> text. The second space is irrelevant since most format specifiers including <code>%d</code> skip whitespace such as newline anyway (a common trap: not <code>%c</code>). But I am mystified why you subsequently use <code>%c</code> when integer data is supplied. When the input is <code>&quot;255&quot;</code> format <code>%c</code> will read <code>&#39;2&#39;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 7763, "user_id": 5924721, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LWjjj.png?s=128&g=1", "display_name": "Frank Puffer", "link": "https://stackoverflow.com/users/5924721/frank-puffer"}, "reply_to_user": {"reputation": 75, "user_id": 8595085, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ee7e975ab053dc61bfe2b71679684adc?s=128&d=identicon&r=PG&f=1", "display_name": "compute", "link": "https://stackoverflow.com/users/8595085/compute"}, "edited": false, "score": 1, "creation_date": 1505334652, "post_id": 46206193, "comment_id": 79376031, "body": "@compute: No, as far as I can see your question has not been updated."}], "tags": [], "owner": {"reputation": 7763, "user_id": 5924721, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LWjjj.png?s=128&g=1", "display_name": "Frank Puffer", "link": "https://stackoverflow.com/users/5924721/frank-puffer"}, "is_accepted": true, "score": 1, "last_activity_date": 1505334564, "last_edit_date": 1505334564, "creation_date": 1505333984, "answer_id": 46206193, "question_id": 46205927, "link": "https://stackoverflow.com/questions/46205927/ppm-scanning-and-printing/46206193#46206193", "title": "PPM scanning and printing", "body": "<p>There are a number of errors in your code:</p>\n\n<ol>\n<li>You only scan <code>input</code> once. Therefore all of your pixels will have the same value. You probably want to call <code>scanf</code> in the inner loop.</li>\n<li>The format specifier <code>%c</code> only reads in one character and not a number. You should use <code>%d</code> even though the range of your pixel values fits within a byte.</li>\n<li>As already mentioned, the inner loop prints nothing but linefeeds. This belongs into the outer loop.</li>\n<li>The <code>print</code> should be called in the inner loop but with different arguments unless you want to write black and white images only: <code>printf(\"%d %d %d \", r, g, b);</code>. Again you need to use <code>%d</code> instead of <code>%c</code>.</li>\n<li>As mentioned in another comment, you need to skip the \"P3\" in the header. You could modify your first line to <code>scanf(\"%*s %d %d %d\", &amp;width, &amp;height, &amp;depth);</code>. The '%*s' reads a string without assigning it to a variable.</li>\n</ol>\n"}], "owner": {"reputation": 75, "user_id": 8595085, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ee7e975ab053dc61bfe2b71679684adc?s=128&d=identicon&r=PG&f=1", "display_name": "compute", "link": "https://stackoverflow.com/users/8595085/compute"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 268, "favorite_count": 0, "accepted_answer_id": 46206193, "answer_count": 1, "score": 0, "last_activity_date": 1505334564, "creation_date": 1505332827, "question_id": 46205927, "link": "https://stackoverflow.com/questions/46205927/ppm-scanning-and-printing", "title": "PPM scanning and printing", "body": "<p>I want to scan in documents from a file of type .ppm which are image files but follows the following data structure</p>\n\n<pre><code>P3\n4 4\n255\n255 255   0 255 255   0 255 255   0 255 255   0 \n255 255   0 255   0   0 128 128 128 255 255   0 \n255 255   0   0 255   0   0   0 255 255 255   0 \n255 255   0 255 255   0 255 255   0 255 255   0 \n</code></pre>\n\n<p>Every 3 integers mark a column so after the first 3 lines, this marks a pattern of a 4x4 table as indicated on the second line.</p>\n\n<p>My first step is to read in a file like this where the height and width can vary and then reprint it in the exact format using scanf and printf.</p>\n\n<p>My attempt at this is as follows:</p>\n\n<pre><code>scanf(\" %d%d %d\", &amp;width, &amp;height, &amp;depth);\nprintf(\"P3\\n%d %d\\n %d\\n\", width, height, depth);\n\n   while(scanf(\"%c\", &amp;input) &gt;= 1) {\n        for (int i = 0; i &lt; width; i++) {\n            printf(\"%c %c %c \", input, input, input);\n            for (int j = 0; j &lt; height; j++) {\n                printf(\"\\n\");\n            }\n        }\n    }\n</code></pre>\n\n<p>Any idea what I am missing?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1505338328, "post_id": 46205900, "comment_id": 79377677, "body": "That&#39;s defined by the language. As you tagged C, what about your favourite C book is unclear? What did you not find in the standard? For C and without details this can be wrong. And there is nothing casted! Conversion/coercion is not the same as casting."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1505340577, "post_id": 46205900, "comment_id": 79378465, "body": "Finally, we have a special flavor of unhelpful comments back..."}, {"owner": {"reputation": 66, "user_id": 8202311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfffbffe1508009f8739cc4cab955e04?s=128&d=identicon&r=PG", "display_name": "Rixium", "link": "https://stackoverflow.com/users/8202311/rixium"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1505341005, "post_id": 46205900, "comment_id": 79378624, "body": "@Olaf I was assuming it was related to C as the book uses C to talk about Computer Science concepts. I apologise if it doesn&#39;t make sense.  The book is &quot;Computer Systems: A programmers perspective&quot;. He mentions that adding suffix &#39;u&#39; creates an unsigned constant."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1505348359, "post_id": 46205900, "comment_id": 79380607, "body": "Well, dump that book. The concepts of C are not universally applicable to programming. If you want to learn C, get a proper C book; I&#39;d not trust anything this book contains if it already goes wrong here."}], "answers": [{"tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 2, "last_activity_date": 1505333162, "creation_date": 1505333162, "answer_id": 46206003, "question_id": 46205900, "link": "https://stackoverflow.com/questions/46205900/signed-to-unsigned-with-subtraction/46206003#46206003", "title": "Signed to unsigned with subtraction", "body": "<p>Both are promoted to unsigned and <code>-2147483647-1U == 0x8000000</code>, <code>(unsigned)-2147483647 == 0x80000001</code>. </p>\n\n<p><code>0x8000000 &lt; 0x8000001</code> is <code>true</code></p>\n\n<p>same with signed only</p>\n\n<pre><code>-2147483647-1 == `-2147483648`\n-2147483648 &lt; -2147483647\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 66, "user_id": 8202311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfffbffe1508009f8739cc4cab955e04?s=128&d=identicon&r=PG", "display_name": "Rixium", "link": "https://stackoverflow.com/users/8202311/rixium"}, "edited": false, "score": 1, "creation_date": 1505336117, "post_id": 46206017, "comment_id": 79376718, "body": "Thank you. It makes sense when I calculate the unsigned values before the subtraction. I did it with a smaller value on paper and I can see how it works. Thank you."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 5, "last_activity_date": 1505351554, "last_edit_date": 1505351554, "creation_date": 1505333252, "answer_id": 46206017, "question_id": 46205900, "link": "https://stackoverflow.com/questions/46205900/signed-to-unsigned-with-subtraction/46206017#46206017", "title": "Signed to unsigned with subtraction", "body": "<blockquote>\n  <p>The first number is therefore -2147483648 after subtraction</p>\n</blockquote>\n\n<p>Not quite.  The conversion to <code>unsigned</code> happens first.  With mixed <code>int/unsigned</code> math, the <code>int</code> is converted to an <code>unsigned</code>.</p>\n\n<p>Subtracting 2 <code>unsigned</code> results in an <code>unsigned</code>  and an <code>unsigned</code> is never negative.</p>\n\n<hr>\n\n<p>Assume 32-bit or wider <code>unsigned/int</code></p>\n\n<p><code>-2147483647-1U</code> is a <em>int</em> minus an <em>unsigned</em>, so <code>-2147483647</code> is converted to  <code>unsigned 2147483649</code> and the difference is <code>unsigned 2147483648</code>.  Now an <em>unsigned</em> is compare to an <code>int</code>, so the <code>int</code> is converted to <code>unsigned 2147483649</code>.  The left is less than the right, so the result is true.</p>\n\n<hr>\n\n<p>[Edit]</p>\n\n<p>Assume narrower than 32-bit <code>unsigned/int</code>, yet <code>long</code> uses the common 2's complement encoding.  Often seen in embedded 8/16-bit processors in 2017.</p>\n\n<p><code>-2147483647-1U</code> is a <em>long</em> minus a narrower <em>unsigned</em>, so <code>-2147483647</code> remains a <code>long</code> and <code>1U</code> is converted to  <code>int 1</code> and the difference is <code>long -2147483648</code>.  Now an <code>long</code> is compare to an <code>long</code>.  The left is less than the right, so the result is true.</p>\n"}, {"comments": [{"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 1, "creation_date": 1505334254, "post_id": 46206020, "comment_id": 79375861, "body": "IMO for the beginners standard is too hermetic and difficult to understand. From my experience in the hackspace - reading the standard makes more mess than eve less precise but more understandable answer"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 3, "creation_date": 1505334437, "post_id": 46206020, "comment_id": 79375941, "body": "@PeterJ_01 I agree with you, but a credible reference is needed when giving an answer. Also we are not just saying &quot;go and read the standard&quot;, but giving the relevant parts of it and trying to explain it if it is particularly obscure (which is not the case here I believe).."}, {"owner": {"reputation": 66, "user_id": 8202311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfffbffe1508009f8739cc4cab955e04?s=128&d=identicon&r=PG", "display_name": "Rixium", "link": "https://stackoverflow.com/users/8202311/rixium"}, "edited": false, "score": 1, "creation_date": 1505336313, "post_id": 46206020, "comment_id": 79376823, "body": "I wont be reading the entire text just yet but what you posted was relevant and helped me understand. Thanks."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1505338724, "post_id": 46206020, "comment_id": 79377841, "body": "With more than 32 bits for <code>int</code> both are converted to <code>int</code>; no unsigned involved."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1505338824, "post_id": 46206020, "comment_id": 79377871, "body": "@Olaf I am taking OP&#39;s remark in the question &quot;(in 32-bit)&quot; as an assumption of <code>int</code> being 32 bit."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1505339066, "post_id": 46206020, "comment_id": 79377960, "body": "@Olaf BTW, isn&#39;t the rank of <code>-2147483647</code> and of <code>1U</code> the same for any bitness of int?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1505339087, "post_id": 46206020, "comment_id": 79377969, "body": "@EugeneSh.: Hmm, \u2026 even then, I&#39;m not exactly sure. Did you consider all possible encodings for example?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1505339225, "post_id": 46206020, "comment_id": 79378027, "body": "@EugeneSh.: Not if <code>int</code> is &lt; 32 bits. Then <code>-214\u2026</code> is <code>long</code> and <code>1U</code> <code>uinsigned int</code>. But I had to think about it to see all variants. What confuses me is OP seeming to take C&#39;s rules as common for all languages. There is no indication he read a C book in the text, just CS. He could not be more wrong. I removed the CS tag to make the question more clear. Not sure that&#39;s what he means, though. IMO he needs to read a good (better?!) C book."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1505339357, "post_id": 46206020, "comment_id": 79378075, "body": "Right... it could be <code>long</code>.. I guess I will just add an assumption rather than expand on it in the answer."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1505339413, "post_id": 46206020, "comment_id": 79378091, "body": "@EugeneSh.: Be careful with assumptions; I&#39;m watching - you know me well ;-))"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1505339523, "post_id": 46206020, "comment_id": 79378130, "body": "@EugeneSh.: There might even be 16 bit <code>int</code> and 64 bit <code>long</code>. What now? (I know about DSPs with 24 bit <code>int</code> and 48 bit <code>long</code>, a similar problem)."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1505339770, "post_id": 46206020, "comment_id": 79378211, "body": "@Olaf Same, no?  The negative constant will be <code>long</code>"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1505339940, "post_id": 46206020, "comment_id": 79378253, "body": "@Olaf I guess this problem could be removed if the question stated <code>INT_MIN-1U &lt; INT_MIN</code>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1505340101, "post_id": 46206020, "comment_id": 79378295, "body": "@EugeneSh.: I had to think it over for all border-cases. That&#39;s not what I consider &quot;interesting&quot; and &quot;fun&quot;. Actually, I find such expressions problematic and try to avoid them like hell. Luckily they rarely pop up if you have all code in your hands and use correct types."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1505340183, "post_id": 46206020, "comment_id": 79378319, "body": "That could cause even more trouble. ANyway, I&#39;ll leave it here, too late for such stuff. (heck, that might be one of the few true cases a unit-test makes sense)."}], "tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": true, "score": 6, "last_activity_date": 1505339570, "last_edit_date": 1505339570, "creation_date": 1505333266, "answer_id": 46206020, "question_id": 46205900, "link": "https://stackoverflow.com/questions/46205900/signed-to-unsigned-with-subtraction/46206020#46206020", "title": "Signed to unsigned with subtraction", "body": "<blockquote>\n  <p>The first number is therefore -2147483648 after subtraction and then\n  converted to unsigned, or does that unsigned conversion happen prior\n  to the subtraction?</p>\n</blockquote>\n\n<p>The latter is true. According to <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.3.1.8\" rel=\"nofollow noreferrer\">C11 Standard \"6.3.1.8 Usual arithmetic conversions\"</a>:</p>\n\n<blockquote>\n  <p>...Otherwise, if the operand that has unsigned integer type has rank\n  greater or equal to the rank of the type of the other operand, then\n  the operand with signed integer type is converted to the type of the\n  operand with unsigned integer type.</p>\n</blockquote>\n\n<p>So, <em>all</em> of the operands, both the ones for subtraction and for the comparison are converted to unsigned.</p>\n\n<p><strong>P.S.</strong> For completeness, the conversion procedure is described in <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.3.1.3p2\" rel=\"nofollow noreferrer\">\"6.3.1.3 Signed and unsigned integers\"</a> :</p>\n\n<blockquote>\n  <p>... if the new type is unsigned, the value is converted by\n  repeatedly adding or subtracting one more than the maximum value that\n  can be represented in the new type until the value is in the range of\n  the new type.</p>\n</blockquote>\n\n<p><strong>P.P.S.</strong> The answer is assuming <code>int</code> being 32-bit long. If it is less than that, then the negative constant <code>-2147483647</code> will have type <code>long</code> which is higher rank than <code>unsigned int</code>, which is <code>1U</code> and then the above will not apply and no conversion will be performed (thanks @Olaf for pointing out).</p>\n"}, {"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1505348620, "post_id": 46206926, "comment_id": 79380667, "body": "Reinterpretion of a signed as unsigned is only straight-forward for 2&#39;s complement representation. OP did not make clear he is about that. As the book he uses is about CS <b>in general</b> and C does allow for two other representations, it is not really that easy."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1505369333, "post_id": 46206926, "comment_id": 79386284, "body": "@Olaf Well, I have started the answer with the general rules. I&#39;m only using the two&#39;s complement example to explain the rules."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1505385234, "post_id": 46206926, "comment_id": 79396074, "body": "You shoul point that out and that it is not the only representation - not even for C."}], "tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": false, "score": 1, "last_activity_date": 1505385465, "last_edit_date": 1505385465, "creation_date": 1505337214, "answer_id": 46206926, "question_id": 46205900, "link": "https://stackoverflow.com/questions/46205900/signed-to-unsigned-with-subtraction/46206926#46206926", "title": "Signed to unsigned with subtraction", "body": "<p>It's really quite simple.\nAccording to <a href=\"http://6.3.1.8%20Usual%20arithmetic%20conversions\" rel=\"nofollow noreferrer\">6.3.1.8 Usual arithmetic conversions</a> if an <code>int</code> meets an <code>unsigned int</code> in an operation, the operands are both converted to <code>unsigned int</code>.</p>\n\n<p>The conversion formalized as <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.3.1.3p2\" rel=\"nofollow noreferrer\">repeatedly adding or subtracting one more than maximum value that can be represented in the new type</a> really describes how natural signed/unsigned reinterpretation works in <a href=\"https://en.wikipedia.org/wiki/Two%27s_complement\" rel=\"nofollow noreferrer\">two's complement</a> arithmetic (the most common way, though not the only way, to represent signed integers in hardware).</p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Two%27s_complement\" rel=\"nofollow noreferrer\">Two's complement</a> arithmetic on a 32 bit signed number works as follows:</p>\n\n<ul>\n<li>the most significant bit, if set, stands for -2^31</li>\n<li>the rest stand for themselves</li>\n</ul>\n\n<p><code>-2147483647</code> is therefore <code>2^31+1 == 0b10000000000000000000000000000001</code>.\nNow since it comes into a subtraction operation with <code>1U</code> (<code>0b00000000000000000000000000000001</code>), you should convert it to a <code>uint32_t</code> number by repeatedly adding or subtracting <code>UINT32_MAX+1 == 2^32</code>, which after overflow will result in the same binary representation (the rules, I suppose, were made so that the bits could be straightforwardly reinterpreted on 2's complement (most common) platforms), and subtracting <code>1U</code> from it will straightforwardly yield \n<code>0b10000000000000000000000000000000 == 2^31</code>, which is less than <code>2^31+1</code>.</p>\n"}], "owner": {"reputation": 66, "user_id": 8202311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfffbffe1508009f8739cc4cab955e04?s=128&d=identicon&r=PG", "display_name": "Rixium", "link": "https://stackoverflow.com/users/8202311/rixium"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 315, "favorite_count": 2, "accepted_answer_id": 46206020, "answer_count": 4, "score": 3, "last_activity_date": 1505385465, "creation_date": 1505332702, "last_edit_date": 1505338548, "question_id": 46205900, "link": "https://stackoverflow.com/questions/46205900/signed-to-unsigned-with-subtraction", "title": "Signed to unsigned with subtraction", "body": "<p>I've recently decided to make the leap and read through a bunch of computer science books to better equip myself for the future.</p>\n\n<p>At the moment I'm reading through converting signed to unsigned decimals. I understand the majority if it (hopefully it becomes easier to eventually), but struggling with the following (in 32-bit):</p>\n\n<p>-2147483647-1U &lt; -2147483647</p>\n\n<p>According the book, this evaluates to true. There's a bit about this that I'm still struggling with as I cant see why it evaluates to this.</p>\n\n<p>With my understanding, I know that they are both converted to unsigned values in this calculation due to the first number being cast as unsigned. The first number is therefore -2147483648 after subtraction and then converted to unsigned, or does that unsigned conversion happen prior to the subtraction?</p>\n\n<p>Sorry for the lengthy post, just trying to get my head around understanding this.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1505332759, "post_id": 46205870, "comment_id": 79375078, "body": "<code>typedef struct {</code>  You need tag name.--&gt; <code>typedef struct  node {</code>"}, {"owner": {"reputation": 35, "user_id": 7528536, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d96acf5cd379be216ed21c141c35ce84?s=128&d=identicon&r=PG&f=1", "display_name": "codie", "link": "https://stackoverflow.com/users/7528536/codie"}, "edited": false, "score": 0, "creation_date": 1505332819, "post_id": 46205870, "comment_id": 79375107, "body": "@Debug obviously i tried to find error,but failed to do so thats why i asked here :)"}, {"owner": {"reputation": 35, "user_id": 7528536, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d96acf5cd379be216ed21c141c35ce84?s=128&d=identicon&r=PG&f=1", "display_name": "codie", "link": "https://stackoverflow.com/users/7528536/codie"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1505333154, "post_id": 46205870, "comment_id": 79375269, "body": "@BLUEPIXY thnx sir code worked i just did what you said but instead if i write typedef struct list(or any other name) ,then i am still getting the same error.why?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1505333712, "post_id": 46205870, "comment_id": 79375560, "body": "Because it shows (anonymous or) another structure."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1505333859, "post_id": 46205870, "comment_id": 79375651, "body": "<code>tagless</code> or <code>with no tag</code>. Definitely no the anonymous."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1505335640, "post_id": 46205870, "comment_id": 79376464, "body": "example of <i>anonymous structure</i> 6.7.2.1 Structure and union specifiers p19 EXAMPLE 1."}, {"owner": {"reputation": 35, "user_id": 7528536, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d96acf5cd379be216ed21c141c35ce84?s=128&d=identicon&r=PG&f=1", "display_name": "codie", "link": "https://stackoverflow.com/users/7528536/codie"}, "edited": false, "score": 0, "creation_date": 1505336015, "post_id": 46205870, "comment_id": 79376661, "body": "thnx sir i got it i have just updated the code can you please tell me why the  given line is printing twice after first time."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1505337475, "post_id": 46205870, "comment_id": 79377339, "body": "Your question is unclear, but probably <code>scanf(&quot;%c&quot;,&amp;x);</code> The second time this receive a newline. --&gt; <code>scanf(&quot; %c&quot;,&amp;x);</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1505337738, "post_id": 46205870, "comment_id": 79377438, "body": "In SO, you should not change such a question. This is because the existing answer will not make sense. Please make another question."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 7528536, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d96acf5cd379be216ed21c141c35ce84?s=128&d=identicon&r=PG&f=1", "display_name": "codie", "link": "https://stackoverflow.com/users/7528536/codie"}, "edited": false, "score": 0, "creation_date": 1505335891, "post_id": 46206062, "comment_id": 79376591, "body": "thnx i got it but now there is one last problem.Can you please see the updated code :)"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 35, "user_id": 7528536, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d96acf5cd379be216ed21c141c35ce84?s=128&d=identicon&r=PG&f=1", "display_name": "codie", "link": "https://stackoverflow.com/users/7528536/codie"}, "edited": false, "score": 1, "creation_date": 1505336082, "post_id": 46206062, "comment_id": 79376697, "body": "@codie It is a bad idea to change the original question entirely because this will confuse readers o the question and answers. It is better to ask a new question."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 35, "user_id": 7528536, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d96acf5cd379be216ed21c141c35ce84?s=128&d=identicon&r=PG&f=1", "display_name": "codie", "link": "https://stackoverflow.com/users/7528536/codie"}, "edited": false, "score": 0, "creation_date": 1505336354, "post_id": 46206062, "comment_id": 79376841, "body": "@codie As for your new question then use a blank before format conversion scanf(&quot; %c&quot;,&amp;x);"}, {"owner": {"reputation": 35, "user_id": 7528536, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d96acf5cd379be216ed21c141c35ce84?s=128&d=identicon&r=PG&f=1", "display_name": "codie", "link": "https://stackoverflow.com/users/7528536/codie"}, "edited": false, "score": 0, "creation_date": 1505336683, "post_id": 46206062, "comment_id": 79376991, "body": "thank you sir error is fixed but can you please explain what was the problem."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 35, "user_id": 7528536, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d96acf5cd379be216ed21c141c35ce84?s=128&d=identicon&r=PG&f=1", "display_name": "codie", "link": "https://stackoverflow.com/users/7528536/codie"}, "edited": false, "score": 0, "creation_date": 1505336990, "post_id": 46206062, "comment_id": 79377139, "body": "@codie The function reads all character including new line characters if the blank is absent. So the function read the character that corresponds to the entered Enter key."}, {"owner": {"reputation": 35, "user_id": 7528536, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d96acf5cd379be216ed21c141c35ce84?s=128&d=identicon&r=PG&f=1", "display_name": "codie", "link": "https://stackoverflow.com/users/7528536/codie"}, "edited": false, "score": 0, "creation_date": 1505337749, "post_id": 46206062, "comment_id": 79377450, "body": "ok sir.I guess it has something related to buffer.You mean the Enter key was got stored in computers memory and scanf read it.right? I used fflush(stdin) and I guess it is also used to clear buffer but it is not working.why?"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 35, "user_id": 7528536, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d96acf5cd379be216ed21c141c35ce84?s=128&d=identicon&r=PG&f=1", "display_name": "codie", "link": "https://stackoverflow.com/users/7528536/codie"}, "edited": false, "score": 1, "creation_date": 1505338047, "post_id": 46206062, "comment_id": 79377567, "body": "@codie fflush( stdin ) has undefined behavior."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1505334627, "last_edit_date": 1505334627, "creation_date": 1505333433, "answer_id": 46206062, "question_id": 46205870, "link": "https://stackoverflow.com/questions/46205870/first-time-creating-stack-one-line-is-printing-twice-why/46206062#46206062", "title": "First time creating Stack.One line is printing twice.Why?", "body": "<p>In this typedef declaration</p>\n\n<pre><code>typedef struct {\n  int a;\n struct node* next;\n}node;\n</code></pre>\n\n<p>there are declared two types. The first one is an unnamed structure type that gets the typedef name <code>node</code>. The second one is the incomplete <code>struct node</code> declared within the unnamed structure.</p>\n\n<p>As result for example in this statement in the function <code>insert</code></p>\n\n<pre><code>temp-&gt;next=s;\n</code></pre>\n\n<p>there is an attempt to assign a pointer of the type <code>node</code> that is <code>s</code>  to a pointer of the type <code>struct node</code> that is <code>temp-&gt;next</code> and there is no implicit conversion from one pointer to another.</p>\n\n<p>You should rewrite the typedef the following way</p>\n\n<pre><code>typedef struct node {\n  int a;\n struct node* next;\n}node;\n</code></pre>\n\n<p>In this case the names <code>struct node</code> and <code>node</code> refer to the same entity.</p>\n\n<p>Pay attention to that this function</p>\n\n<pre><code>node* create(node* s)\n{\n  s=NULL;\n  printf(\"\\n Empty stack is created\");\n  return s;\n}\n</code></pre>\n\n<p>does not make sense, In fact the parameter is redundant. You can just write</p>\n\n<pre><code>node* create( void )\n{\n  printf(\"\\n Empty stack is created\");\n  return NULL;\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>void create(node **s)\n{\n  *s = NULL;\n  printf(\"\\n Empty stack is created\");\n}\n</code></pre>\n\n<p>Also this function</p>\n\n<pre><code>node* delete(node* s)\n{\n  node* s1;\n  if(s==NULL)\n  {\n  printf(\"trying to delete from empty list\");\n  }\n  else\n  {\n   s1=s-&gt;next;\n   printf(\"element deleted is %d\",s-&gt;a);\n   s-&gt;next=NULL;\n   free(s);\n   }\n  return s1;\n}\n</code></pre>\n\n<p>has undefined behavior because it return uninitialized pointer <code>s1</code> when <code>s</code> is equal to <code>NULL</code>.</p>\n\n<p>And you have to use the return value of the function delete that is this call</p>\n\n<pre><code>delete(top);\n</code></pre>\n\n<p>is incorrect because the original pointer <code>top</code> was not changed. </p>\n"}], "owner": {"reputation": 35, "user_id": 7528536, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d96acf5cd379be216ed21c141c35ce84?s=128&d=identicon&r=PG&f=1", "display_name": "codie", "link": "https://stackoverflow.com/users/7528536/codie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1505336449, "creation_date": 1505332607, "last_edit_date": 1505336449, "question_id": 46205870, "link": "https://stackoverflow.com/questions/46205870/first-time-creating-stack-one-line-is-printing-twice-why", "title": "First time creating Stack.One line is printing twice.Why?", "body": "<p>I have updated the previous code as you said but there is one last problem.\nI don't know why there is a line which keeps on printing twice when I run the code.</p>\n\n<p>And the line is:</p>\n\n<pre><code>printf(\"\\nEnter values of x:\");\n</code></pre>\n\n<p>And the code is:</p>\n\n<pre><code>   #include &lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\ntypedef struct node{\n  int a;\n struct node* next;\n}node;\n\nnode* create(node* s)\n{\n  s=NULL;\n  printf(\"\\n Empty stack is created\\n\");\n  return s;\n}\n\nnode* insert(node* s,int x)\n{\n  if (s==NULL)\n  {\n  s=malloc(sizeof(node));\n  s-&gt;a=x;\n  s-&gt;next=NULL;\n  }\n\n  else\n  {\n    node* temp=malloc(sizeof(node));\n    temp-&gt;a=x;\n    temp-&gt;next=s;\n    s=temp;\n  }\n  return s;\n}\nnode* print(node* s)\n{\n  while(s!=NULL)\n  {\n    printf(\"%d\",s-&gt;a);\n    s=s-&gt;next;\n  }\n  return s;\n}\nnode* delete(node* s)\n{\n  node* s1;\n  if(s==NULL)\n  {\n  printf(\"trying to delete from empty list\");\n  }\n  else\n  {\n   s1=s-&gt;next;\n   printf(\"element deleted is %d\",s-&gt;a);\n   s-&gt;next=NULL;\n   free(s);\n   }\n  return s1;\n}\nnode* delete(node*s);\nnode* insert(node*s,int x);\nnode* create(node* s);\nnode* print(node* s);\nint main()\n{\nnode* top;\ntop=create(top);\nchar x;\nint val;\nwhile(1)\n{\n\n  printf(\"\\nEnter values of x:\");\n  scanf(\"%c\",&amp;x);\n  switch(x)\n  {\n  case 'I':\n  {\n    printf(\"\\nPlease enter value to be inserted\\n\");\n    scanf(\"%d\",&amp;val);\n    top=insert(top,val);\n    break;\n  }\n  case 'D':\n  {\n    delete(top);\n    break;\n  }\n  case 'P':\n  {\n    top=print(top);\n  }\n  case 'E':\n  {\n      return 0;\n  }\n}\n}\n}\n</code></pre>\n"}, {"tags": ["c", "gcc", "clang", "strict-aliasing"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1505337727, "post_id": 46205744, "comment_id": 79377430, "body": "If code was <code>unsigned x</code> instead of <code>unsigned short x</code>, do you see the same problem?"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1505338265, "post_id": 46205744, "comment_id": 79377654, "body": "@chux: Yes.  An earlier version of the code also tested copying the bytes of an object to two variables of type <code>unsigned char</code> and then writing them back (which compilers don&#39;t support either) and it was more convenient to do that with two bytes than four.  The problem is that the compiler completely optimizes out the operations on <code>p3</code> and loses the aliasing-related information provided thereby."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1505338514, "post_id": 46205744, "comment_id": 79377756, "body": "I suspected <code>unsigned</code> would fail in a like-wise manner as <code>unsigned short</code>.  With <code>unsigned</code>, we can set aside any of the <i>usual promotions</i> issues - which <i>shouldn&#39;t</i> affect this,."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1505339815, "post_id": 46205744, "comment_id": 79378223, "body": "@chux: While <code>unsigned short</code> could promote as either <code>int</code> or <code>unsigned</code>, coercion of values 32767u and below to <code>int</code> is fully defined by the Standard on all implementations."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1505877832, "post_id": 46205744, "comment_id": 79587269, "body": "An example of potential &quot;strict aliasing&quot; issue without a type pun!"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 1, "creation_date": 1507228645, "post_id": 46205744, "comment_id": 80138255, "body": "@curiousguy: I just posted another nasty one which involves reordering of memory <i>writes</i>, rather than ordering of reads vs writes.  The latter one I found particularly curious because it doesn&#39;t involve a compiler optimizing out a read and write that should have forced the order of some other reads and writes, but was adjusted so that what should be a conditional write gets turned into an unconditional write with a conditionally-chosen value."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1509266850, "post_id": 46205744, "comment_id": 80943338, "body": "You might also be interested in compiling the program with <code>-fsanitize=undefined</code> and see what UBSan alerts to. You have to run your program with its test data because UBSan is a realtime checker. It does not produce false positives."}], "answers": [{"comments": [{"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1505336959, "post_id": 46206684, "comment_id": 79377122, "body": "I think the fundamental problem which seems to hit a lot of compilers is that their intermediate code lacks instructions that would force a compiler to act as though it might access to any arbitrary object of type T, without the code actually performing such an access.  Having a compiler generate machine code which actually read and wrote via <code>p3</code> would be silly, but I don&#39;t think the compilers&#39; intermediate code has any other way of expressing the Standard-mandated semantics."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1505337540, "post_id": 46206684, "comment_id": 79377367, "body": "If code does something with p3 that would require a compiler to actually perform the accesses, the compilers will have no problems recognizing the aliasing. The problem arises if the compiler decides to optimize code which shouldn&#39;t generate any machine instructions but would affect objects&#39; effective types or active members.  Similar problems occur when using <code>char</code>-type accesses.  Proponents of strict aliasing claim the solution to aliasing issues is to use character-pointers or unions, but that won&#39;t help if compilers optimize out such things."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1505339760, "post_id": 46206684, "comment_id": 79378208, "body": "@supercat you can find many of those optimisation traps examples in the net."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 2, "creation_date": 1505340122, "post_id": 46206684, "comment_id": 79378306, "body": "@PeterJ_01: From what I&#39;ve seen, most such examples involve code which might, using a sufficiently-twisted interpretation of the Standard, be viewed as invoking UB.  My goal here is to have an example whose behavior is clearly, unambiguously, and undeniably defined by the Standard."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1505340787, "post_id": 46206684, "comment_id": 79378542, "body": "@supercat you have decided to allow optimisations, you should understand the effects, or compile with the optimistions disabled"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1505342767, "post_id": 46206684, "comment_id": 79379171, "body": "@PeterJ_01: The authors of gcc claim that any code which fails because of their optimizations is &quot;broken&quot;, and cite the Standard as justification for that view."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1505343380, "post_id": 46206684, "comment_id": 79379351, "body": "@supercat if you think it the optimiser bug just report it. You can also stop using gcc &amp; clang"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 2, "creation_date": 1505345277, "post_id": 46206684, "comment_id": 79379836, "body": "@PeterJ_01: It&#39;s not just gcc and clang.  Many compilers on godbolt behave the same way, which would suggest that the behavior is by design, which makes me wonder if compiler writers are interpreting the Standard in such a way as to justify their behavior."}, {"owner": {"reputation": 2976, "user_id": 2958774, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/d2cf682c1744c34aecd5804b144b0d75?s=128&d=identicon&r=PG&f=1", "display_name": "Myria", "link": "https://stackoverflow.com/users/2958774/myria"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1505426506, "post_id": 46206684, "comment_id": 79421596, "body": "@supercat Have you filed a GCC and Clang bug for this? If you don&#39;t want to, I could do that."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1505426841, "post_id": 46206684, "comment_id": 79421699, "body": "@Myria: Please do.  The problem goes far beyond those.  Of all the compilers I tested on godbolt with type-based aliasing enabled (for some I couldn&#39;t figure out how to enable it), only icc worked correctly."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1505485085, "post_id": 46206684, "comment_id": 79447362, "body": "@Myria I uv&#39;d as your argumentation makes sense, but yet I have doubts when not referring to the <b>C</b> standard. See my answer for an attempted interpretation that&#39;s consistent with observed compiler behavior (up for discussion) :)"}, {"owner": {"reputation": 2976, "user_id": 2958774, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/d2cf682c1744c34aecd5804b144b0d75?s=128&d=identicon&r=PG&f=1", "display_name": "Myria", "link": "https://stackoverflow.com/users/2958774/myria"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1505512862, "post_id": 46206684, "comment_id": 79460214, "body": "@supercat I filed bugs with GCC and Clang about this, using your code."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 1, "creation_date": 1505683028, "post_id": 46206684, "comment_id": 79500412, "body": "@Myria: Incidentally, while the particular example was contrived to show the problem as simply as possible, the problem could plausibly occur in real-world code.  For example, if code examines an array element, uses a loop to convert everything in the array to another type with the same representation, acts upon some things as that new type, and then uses another loop to convert everything back, the loops that do the conversion may get optimized out.  I think the problem is that the Standard describes Effective Types in terms of objects rather than lvalues, but there&#39;s no way..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1505683417, "post_id": 46206684, "comment_id": 79500509, "body": "...that gcc or clang can represent the notion of &quot;This code changes the Effective Type of an X to Y, and that X might, but need not be, the same X identified by some other lvalue&quot; except by physically reading the object as type X and writing it as type Y."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1506793480, "post_id": 46206684, "comment_id": 79965134, "body": "@Myria: Have you heard anything in reply to either bug report?"}, {"owner": {"reputation": 2976, "user_id": 2958774, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/d2cf682c1744c34aecd5804b144b0d75?s=128&d=identicon&r=PG&f=1", "display_name": "Myria", "link": "https://stackoverflow.com/users/2958774/myria"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1507083760, "post_id": 46206684, "comment_id": 80066080, "body": "@supercat <a href=\"https://bugs.llvm.org/show_bug.cgi?id=34632\" rel=\"nofollow noreferrer\">bugs.llvm.org/show_bug.cgi?id=34632</a> <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=82224\" rel=\"nofollow noreferrer\">gcc.gnu.org/bugzilla/show_bug.cgi?id=82224</a>"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1507094329, "post_id": 46206684, "comment_id": 80068795, "body": "@Myria: I&#39;m puzzled by why the people on those lists find certain things no difficult.  With regard to the Common Initial Sequence rule, for example, say that any access to a struct which is part of a complete union type declaration <i>which is visible at the point of access</i> is presumed capable of accessing CIS members of other types in that union.  I&#39;m not sure why people think that would require knowing every type that anyone might declare anyplace."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1507094632, "post_id": 46206684, "comment_id": 80068909, "body": "@Myria: As for the specific issue, I think the best remedy would be to have the Standard recognize distinct aliasing modes, one of which would make Effective Types permanent and don&#39;t allow union members to have their address taken (specify <code>[]</code> as operators that can act on arrays without them decomposing into pointer types), one of which would require that all accesses be treated as <code>volatile</code>, and some of which would fall between those extremes.  C is used for so many purposes that any single set of rules that tries to serve them all will, at best, serve them all badly."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1507095455, "post_id": 46206684, "comment_id": 80069184, "body": "@Myria: I&#39;d enjoy sharing what suspect would, if recognized, become the most popular aliasing mode--one that would be easier to describe unambiguously than the present rules, support most code that would presently require <code>-fno-strict-aliasing</code>, and yet still allow the majority of the optimizations that are now possible and many others that <i>aren&#39;t</i>,"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1507228723, "post_id": 46206684, "comment_id": 80138295, "body": "@Myria: I just posted another question which I think may represent a different bug in gcc (one which clang doesn&#39;t share)."}], "tags": [], "owner": {"reputation": 2976, "user_id": 2958774, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/d2cf682c1744c34aecd5804b144b0d75?s=128&d=identicon&r=PG&f=1", "display_name": "Myria", "link": "https://stackoverflow.com/users/2958774/myria"}, "is_accepted": true, "score": 10, "last_activity_date": 1505336075, "creation_date": 1505336075, "answer_id": 46206684, "question_id": 46205744, "link": "https://stackoverflow.com/questions/46205744/is-this-use-of-unions-strictly-conforming/46206684#46206684", "title": "Is this use of unions strictly conforming?", "body": "<p>I believe that your code is conformant, and there is a flaw with the <code>-fstrict-aliasing</code> mode of GCC and Clang.</p>\n\n<p>I cannot find the right part of the C standard, but the same problem happens when compiling your code in C++ mode for me, and I did find the relevant passages of the C++ Standard.</p>\n\n<p>In the C++ standard, [class.union]/5 defines what happens when operator <code>=</code> is used on a union access expression.  The C++ Standard states that when a union is involved in the member access expression of the built-in operator <code>=</code>, the active member of the union is changed to the member involved in the expression (if the type has a trivial constructor, but because this is C code, it does have a trivial constructor).</p>\n\n<p>Note that <code>write_s2x</code> <em>cannot</em> change the active member of the union, because a union is not involved in the assignment expression.  Your code does not assume that this happens, so it's OK.</p>\n\n<p>Even if I use placement <code>new</code> to explicitly change which union member is active, which ought to be a hint to the compiler that the active member changed, GCC still generates code that outputs <code>4321</code>.</p>\n\n<p>This looks like a bug with GCC and Clang assuming that the switching of active union member cannot happen here, because they fail to recognize the possibility of <code>p1</code>, <code>p2</code> and <code>p3</code> all pointing to the same object.</p>\n\n<p>GCC and Clang (and pretty much every other compiler) support an extension to C/C++ where you can read an inactive member of a union (getting whatever potentially garbage value as a result), but only if you do this access in a member access expression involving the union.  <em>If</em> <code>v1</code> were not the active member, <code>read_s1x</code> would not be defined behavior under this implementation-specific rule, because the union is not within the member access expression.  But because <code>v1</code> is the active member, that shouldn't matter.</p>\n\n<p>This is a complicated case, and I hope that my analysis is correct, as someone who isn't a compiler maintainer or a member of one of the committees.</p>\n"}, {"comments": [{"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 1, "creation_date": 1505339995, "post_id": 46207332, "comment_id": 79378268, "body": "Certainly making the code more complicated would result in compilers processing it correctly.  I see nothing in the Standard that would allow conforming compilers to require such useless code, however, and question the sanity of an optimizer requiring programmers to add code they know to be useless."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 1, "creation_date": 1505340417, "post_id": 46207332, "comment_id": 79378405, "body": "@supercat using this login any optimisation which changes or reduces the code (for example not calling the function) is not conforming. This is the trap - all local variables, no use of any of them etc. Writing the code this way and allowing the optimisation, programmer should take into considerations those effects."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1505340511, "post_id": 46207332, "comment_id": 79378444, "body": "Change your code to: <code>int test(union s1s2 *p1, union s1s2 *p2, union s1s2 *p3) {   if (read_s1x(&amp;p1-&gt;v1))   {     unsigned short temp;     temp = p3-&gt;v1.x;     p3-&gt;v2.x = temp;     write_s2x(&amp;p2-&gt;v2,1234);     temp = p3-&gt;v2.x;     p3-&gt;v1.x = temp;     printf(&quot;%d\\n&quot;,p3-&gt;v2.x);   }   return read_s1x(&amp;p1-&gt;v1); }</code>"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1505344895, "post_id": 46207332, "comment_id": 79379744, "body": "The program I posted was deliberately contrived to &quot;bait&quot; compilers into making illegitimate optimizations, but that doesn&#39;t make their optimizations conforming.  If compiler writers wanted to specify that certain optimizations make code non-conforming, and accept that incompatibility with such optimizations doesn&#39;t mean code is &quot;broken&quot;, but merely means that the code and optimizer aren&#39;t suited for each other, that would be fine, though a better compiler should try to maximize compatibility with existing code."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1505345483, "post_id": 46207332, "comment_id": 79379879, "body": "@supercat I know that is the intentional abuse :). No one sane would not write something like this. What is the actual reason of the post? Bug report? Something else. The logical answer is: ant code optimisations may have possible some side effects and the programmer should have it in mind."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 1, "creation_date": 1505347087, "post_id": 46207332, "comment_id": 79380267, "body": "The question is whether there is anything in the Standard that would justify the behavior which seems to be widespread, or whether the parts of the Standard relating to aliasing should be viewed as meaningless since nobody follows them anyway?"}], "tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": -2, "last_activity_date": 1505339308, "creation_date": 1505339308, "answer_id": 46207332, "question_id": 46205744, "link": "https://stackoverflow.com/questions/46205744/is-this-use-of-unions-strictly-conforming/46207332#46207332", "title": "Is this use of unions strictly conforming?", "body": "<p>It is not about conforming or not conforming - it one of the optimisation \"traps\". All of your data structures have been optimised out and you pass the same pointer to optimised out data so the the execution tree is reduced to simple printf of the value. </p>\n\n<pre><code>  sub rsp, 8\n  mov esi, 4321\n  mov edi, OFFSET FLAT:.LC0\n  xor eax, eax\n  call printf\n  xor eax, eax\n  add rsp, 8\n  ret\n</code></pre>\n\n<p>to change it you need to make this \"transfer\" function to be side effect prone and force the real assignments. It will force optimizer to not reduce those nodes in the execution tree: </p>\n\n<pre><code>int test(union s1s2 *p1, union s1s2 *p2, volatile union s1s2 *p3)\n/* ....*/\n\nmain:\n  sub rsp, 8\n  mov esi, 1234\n  mov edi, OFFSET FLAT:.LC0\n  xor eax, eax\n  call printf\n  xor eax, eax\n  add rsp, 8\n  ret\n</code></pre>\n\n<p>it is quite trivial test just artificially made a bit more complicated. </p>\n"}, {"comments": [{"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 1, "creation_date": 1505487789, "post_id": 46241648, "comment_id": 79449015, "body": "Applying the <code>&amp;</code> operator to a structure or union member yields a pointer of that member type.  Further, if a structure or union member is an array, it would be impossible to do anything with that member <i>except</i> by using a pointer of its constituent type.  While I suppose one could read the Standard in such fashion as to say that applying the address-of operator to a struct or union member will yield a pointer that can&#39;t actually be used for any purpose unless it is first converted to a character type, it would seem more reasonable to allow implementations to treat the result of..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1505487969, "post_id": 46241648, "comment_id": 79449127, "body": "...the <code>&amp;</code> operator as having a type which was incompatible with any pointer type other than <code>void*</code> unless it was applied to a member of character type (in which case it would naturally yield <code>char*</code>).  As it happens, though, while I haven&#39;t tested all of them on all compilers, other means of controlling Effective Types (such as reading all of the individual bytes of an object to discrete objects of type <code>unsigned char</code> and then writing all of the individual bytes of the object) also fail on gcc and clang.  I think the problem is that compilers lack any concept of code that might..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1505487997, "post_id": 46241648, "comment_id": 79449148, "body": "...change the Effective Type of an object, or the active member of a union, but which doesn&#39;t require generating any actual machine-code loads or stores."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 4, "last_activity_date": 1505484702, "creation_date": 1505484702, "answer_id": 46241648, "question_id": 46205744, "link": "https://stackoverflow.com/questions/46205744/is-this-use-of-unions-strictly-conforming/46241648#46241648", "title": "Is this use of unions strictly conforming?", "body": "<p>With a <em>strict</em> interpretation of the standard, this code might be <em>not conforming</em>. Let's focus on the text of the well-known <strong>\u00a76.5p7</strong>:</p>\n\n<blockquote>\n  <p>An object shall have its stored value accessed only by an lvalue expression that has one of\n  the following types:<br>\n  \u2014  a type compatible with the effective type of the object,<br>\n  \u2014  a qualified version of a type compatible with the effective type of the object,<br>\n  \u2014  a type  that  is  the  signed  or  unsigned  type  corresponding  to  the  effective  type  of  the\n  object,<br>\n  \u2014  a type that is the signed or unsigned type corresponding to a qualified version of the\n  effective type of the object,<br>\n  \u2014  <strong>an aggregate  or  union  type  that  includes  one  of  the  aforementioned  types</strong>  among  its\n  members (including, recursively, a member of a subaggregate or contained union), or<br>\n  \u2014  a character type.</p>\n</blockquote>\n\n<p>(emphasis mine)</p>\n\n<p>Your functions <code>read_s1x()</code> and <code>write_s2x()</code> do the <strong>opposite</strong> of what I marked bold above <em>in the context of your whole code</em>. With just this paragraph, you could conclude that it's not allowed: A pointer to <code>union s1s2</code> would be allowed to alias a pointer to <code>struct s1</code>, but not vice versa.</p>\n\n<p>This interpretation of course would mean that the code must work as intended if you \"inline\" these functions manually in your <code>test()</code>. This is indeed the case here with gcc 6.2 for <code>i686-w64-mingw32</code>.</p>\n\n<hr>\n\n<p>Adding two arguments in favor of the strict interpretation presented above:</p>\n\n<ul>\n<li><p>While it's always allowed to alias any pointer with <code>char *</code>, a character array can't be aliased by any other type.</p></li>\n<li><p>Considering the (here unrelated) <strong>\u00a76.5.2.3p6</strong>:</p>\n\n<blockquote>\n  <p>One special guarantee is made in order to simplify the use of unions: if a union contains\n  several  structures  that  share  a  common  initial  sequence  (see  below),  and  if  the  union\n  object  currently  contains  one  of  these  structures,  it  is  permitted  to  inspect  the  common\n  initial part of any of them <strong>anywhere that a declaration of the completed type of the union\n  is  visible.</strong> </p>\n</blockquote>\n\n<p>(again emphasis mine) -- the typical interpretation is that <em>being visible</em> means directly in the scope of the function in question, not \"somewhere in the translation unit\" ... so this guarantee doesn't include a function that takes a pointer to one of the <code>struct</code>s that's a member of the <code>union</code>.</p></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 1, "creation_date": 1509115244, "post_id": 46968235, "comment_id": 80902796, "body": "Note that my example, the only takes the address of a union member after having written <i>that member</i>, and abandons that pointer before writing another member.  The problem is that gcc and clang both try to apply two conflicting optimizations: omitting the code which would read one union member and then write the exact same bit pattern to another would be a fine optimization in isolation, but trips up later optimizations. What&#39;s tragic is that the authors of the C Standard didn&#39;t better state the notion that compilers may generally assume there&#39;s no aliasing <i>when there&#39;s no evidence of it</i>..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1509115379, "post_id": 46968235, "comment_id": 80902885, "body": "...but that quality compilers should not be oblivious to evidence of aliasing in useful cases.  While the Standard doesn&#39;t explicitly say that taking the address of a union member (&quot;active&quot; or not) should be recognized as evidence of aliasing, the most likely reason is that they thought it was <i>obvious</i>.  If the compiler recognized the act of taking union members&#39; addresses as evidence of aliasing, the omission of the read-write sequence wouldn&#39;t matter."}, {"owner": {"reputation": 1242, "user_id": 4845608, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/8k6sK.png?s=128&g=1", "display_name": "walkerlala", "link": "https://stackoverflow.com/users/4845608/walkerlala"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1509205227, "post_id": 46968235, "comment_id": 80929544, "body": "@supercat you are taking the address of a member of a union (i.e., address of a &quot;struct s2&quot; out of a &quot;union s1s2&quot;), and that is illegal according to the example provided above."}, {"owner": {"reputation": 1242, "user_id": 4845608, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/8k6sK.png?s=128&g=1", "display_name": "walkerlala", "link": "https://stackoverflow.com/users/4845608/walkerlala"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1509205435, "post_id": 46968235, "comment_id": 80929617, "body": "@supercat I read almost all comments you provided in other answer but still I am not clear what you are arguing for. What is your point? Do you think that both gcc and clang are doing the wrong thing? Or you are just blaming the C standard?"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1509208046, "post_id": 46968235, "comment_id": 80930400, "body": "The behavior of clang and gcc is unambiguously non-conforming here.  Further, the published Rationale for the Standard explicitly states that rather than trying to mandate everything needed to make an implementation useful, it expects that if implementations do what&#39;s required by the Standard they will naturally do the <i>other</i> things necessary to make them useful.  For an implementation to efficiently uphold the Standard, it must have a way of accommodating actions that might change the active type of a union or the Effective Type of storage, without knowing whether the action..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1509208967, "post_id": 46968235, "comment_id": 80930683, "body": "...would actually change it or not.  An implementation with that ability could most easily uphold the Standard by simply treating address-of-union-member as having such semantics.  I don&#39;t think the authors of the Standard considered the possibility that implementations might seek to avoid doing so and instead use more complicated and less useful ways of meeting the Standard&#39;s requirements."}], "tags": [], "owner": {"reputation": 1242, "user_id": 4845608, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/8k6sK.png?s=128&g=1", "display_name": "walkerlala", "link": "https://stackoverflow.com/users/4845608/walkerlala"}, "is_accepted": false, "score": 0, "last_activity_date": 1509083070, "creation_date": 1509083070, "answer_id": 46968235, "question_id": 46205744, "link": "https://stackoverflow.com/questions/46205744/is-this-use-of-unions-strictly-conforming/46968235#46968235", "title": "Is this use of unions strictly conforming?", "body": "<p>I didn't read the standard, but playing with pointers in a strict-aliasing mode (ie, using <code>-fstrict-alising</code>) is dangerous. See the <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html\" rel=\"nofollow noreferrer\">gcc online doc</a>:</p>\n\n<blockquote>\n  <p>Pay special attention to code like this:</p>\n</blockquote>\n\n<pre><code>union a_union {\n  int i;\n  double d;\n};\n\nint f() {\n  union a_union t;\n  t.d = 3.0;\n  return t.i;\n}\n</code></pre>\n\n<blockquote>\n  <p>The practice of reading from a different union member than the one most recently written to (called <code>type-punning</code>) is common. Even with <code>-fstrict-aliasing</code>, type-punning is allowed, provided the memory is accessed through the union type. So, the code above works as expected. See Structures unions enumerations and bit-fields implementation. However, this code might not:</p>\n</blockquote>\n\n<pre><code>int f() {\n   union a_union t;\n   int* ip;\n   t.d = 3.0;\n   ip = &amp;t.i;\n   return *ip;\n}\n</code></pre>\n\n<blockquote>\n  <p>Similarly, access by taking the address, casting the resulting pointer and dereferencing the result has undefined behavior, even if the cast uses a union type, e.g.:</p>\n</blockquote>\n\n<pre><code>int f() {\n  double d = 3.0;\n  return ((union a_union *) &amp;d)-&gt;i;\n}\n</code></pre>\n\n<blockquote>\n  <p>The <code>-fstrict-aliasing</code> option is enabled at levels -O2, -O3, -Os.</p>\n</blockquote>\n\n<p>Found anything similar in the second example huh?</p>\n"}], "owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 810, "favorite_count": 7, "accepted_answer_id": 46206684, "answer_count": 4, "score": 19, "last_activity_date": 1509083070, "creation_date": 1505332153, "last_edit_date": 1505340189, "question_id": 46205744, "link": "https://stackoverflow.com/questions/46205744/is-this-use-of-unions-strictly-conforming", "title": "Is this use of unions strictly conforming?", "body": "<p>Given the code:</p>\n\n<pre><code>struct s1 {unsigned short x;};\nstruct s2 {unsigned short x;};\nunion s1s2 { struct s1 v1; struct s2 v2; };\n\nstatic int read_s1x(struct s1 *p) { return p-&gt;x; }\nstatic void write_s2x(struct s2 *p, int v) { p-&gt;x=v;}\n\nint test(union s1s2 *p1, union s1s2 *p2, union s1s2 *p3)\n{\n  if (read_s1x(&amp;p1-&gt;v1))\n  {\n    unsigned short temp;\n    temp = p3-&gt;v1.x;\n    p3-&gt;v2.x = temp;\n    write_s2x(&amp;p2-&gt;v2,1234);\n    temp = p3-&gt;v2.x;\n    p3-&gt;v1.x = temp;\n  }\n  return read_s1x(&amp;p1-&gt;v1);\n}\nint test2(int x)\n{\n  union s1s2 q[2];\n  q-&gt;v1.x = 4321;\n  return test(q,q+x,q+x);\n}\n#include &lt;stdio.h&gt;\nint main(void)\n{\n  printf(\"%d\\n\",test2(0));\n}\n</code></pre>\n\n<p>There exists one union object in the entire program--<code>q</code>.  Its active member is set to <code>v1</code>, and then to <code>v2</code>, and then to <code>v1</code> again.  Code only uses the address-of operator on <code>q.v1</code>, or the resulting pointer, when that member is active, and likewise <code>q.v2</code>.  Since <code>p1</code>, <code>p2</code>, and <code>p3</code> are all the same type, it should be perfectly legal to use <code>p3-&gt;v1</code> to access <code>p1-&gt;v1</code>, and <code>p3-&gt;v2</code> to access <code>p2-&gt;v2</code>.</p>\n\n<p>I don't see anything that would justify a compiler failing to output 1234, but many compilers including clang and gcc generate code that outputs 4321.  I think what's going on is that they decide that the operations on p3 won't actually change the contents of any bits in memory, they can just be ignored altogether, but I don't see anything in the Standard that would justify ignoring the fact that <code>p3</code> is used to copy data from <code>p1-&gt;v1</code> to <code>p2-&gt;v2</code> and vice versa.</p>\n\n<p>Is there anything in the Standard that would justify such behavior, or are compilers simply not following it?</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 91778, "user_id": 354577, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dI6cA.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/354577/chris"}, "edited": false, "score": 1, "creation_date": 1505336758, "post_id": 46205028, "comment_id": 79377028, "body": "Please read <a href=\"https://meta.stackoverflow.com/q/284236/354577\">Why is &quot;Can someone help me?&quot; not an actual question?</a> The <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> page has tips for asking effective questions."}, {"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 0, "creation_date": 1505336839, "post_id": 46205028, "comment_id": 79377067, "body": "You need to allocate q so that it points to some memory."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1505337203, "post_id": 46205028, "comment_id": 79377218, "body": "<code>void main()</code> is wrong, <code>main</code> should return an <code>int</code>. <code>&lt;conio.h&gt;</code>, <code>clrscr()</code> and <code>getch()</code> are not part of the C language. C doesn&#39;t have magic strings that automatically grow in size as you access them, so <code>q</code> is not one of those. Always enable the highest level of warnings for your compiler and treat them as errors."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1505338217, "post_id": 46205028, "comment_id": 79377623, "body": "<code>q</code> has never been assigned/initialized.  So<code>*q</code> is attempting to de-reference an unknown value.  <code>q</code> needs assignment."}], "answers": [{"comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1505337229, "post_id": 46205174, "comment_id": 79377229, "body": "Why is this any better?"}, {"owner": {"reputation": 1, "user_id": 8111884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c08833d5d69304a161ee66e444f3a2e0?s=128&d=identicon&r=PG&f=1", "display_name": "Kashif999", "link": "https://stackoverflow.com/users/8111884/kashif999"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1505338126, "post_id": 46205174, "comment_id": 79377589, "body": "Because it prints q as you check through the string. Your original code prints q once whereas the way you have written the code, you need to print q as you check the string. Try it. I believe it will work."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1505338352, "post_id": 46205174, "comment_id": 79377690, "body": "<code>q</code> has never been assigned/initialized.  <code>*q</code> is UB.  <code>puts(q);</code> is too late to help in any way.  Unless <code>q</code> has a valid value, <code>puts(q);</code> itself is UB too."}, {"owner": {"reputation": 13, "user_id": 8605115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65eb6533548d4343033a51a183cf06ca?s=128&d=identicon&r=PG&f=1", "display_name": "Shivank Kashyap", "link": "https://stackoverflow.com/users/8605115/shivank-kashyap"}, "edited": false, "score": 0, "creation_date": 1506359788, "post_id": 46205174, "comment_id": 79778975, "body": "Ya I got it puts(q) will print from &#39;/0&#39; .that&#39;s why it&#39;s not printing anything.there should be  another pointer that will be pointing to start of q."}], "tags": [], "owner": {"reputation": 1, "user_id": 8111884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c08833d5d69304a161ee66e444f3a2e0?s=128&d=identicon&r=PG&f=1", "display_name": "Kashif999", "link": "https://stackoverflow.com/users/8111884/kashif999"}, "is_accepted": false, "score": -1, "last_activity_date": 1505329842, "creation_date": 1505329842, "answer_id": 46205174, "question_id": 46205028, "link": "https://stackoverflow.com/questions/46205028/can-anyone-help-me-with-this-code/46205174#46205174", "title": "Can anyone help me with this code?", "body": "<p>Try this</p>\n\n<pre><code>else   \n      {      \n        *q=*str;  \n         puts(q);\n         str++;\n         q++; \n      }\n }\n *q='\\0';\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 50, "user_id": 3578364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2adc4fbe4c7aff7f696c9f117fe4dd8a?s=128&d=identicon&r=PG&f=1", "display_name": "potterman28wxcv", "link": "https://stackoverflow.com/users/3578364/potterman28wxcv"}, "is_accepted": true, "score": 0, "last_activity_date": 1505340230, "creation_date": 1505340230, "answer_id": 46207505, "question_id": 46205028, "link": "https://stackoverflow.com/questions/46205028/can-anyone-help-me-with-this-code/46207505#46207505", "title": "Can anyone help me with this code?", "body": "<p>If I understand correctly, you want to transform <code>\"shivank\"</code> into <code>\"shvnk\"</code>, and store it in a seperate string to print it later.</p>\n\n<p>You have to allocate this memory somewhere. Just working with pointers won't do the work - at the very best, you could change <code>str</code> to point to a different beginning of the string: <code>\"hivank\"</code>, <code>\"ivank\"</code>, <code>\"vank\"</code> etc.. are all possible to get using only pointer arithmetics, but that's about it.</p>\n\n<p>I would recommend you use <code>char</code> arrays instead of using string constants:</p>\n\n<pre><code>char str[] = \"shivank\";\nchar modified_str[10]; // enough memory to store the modified string\n</code></pre>\n\n<p>The advantage of using arrays is that you can modify them like this example:</p>\n\n<pre><code>modified_str[0] = str[0];\n</code></pre>\n\n<p>(this is just an example that copies the first letter of <code>str</code> into the first letter of <code>modified_str</code>)</p>\n\n<p>Then you could read the characters of your <code>str</code> string one by one, and only copy the non-vowels to <code>modified_str</code>. Don't forget to end your <code>modified_str</code> by a '\\0'.</p>\n"}], "owner": {"reputation": 13, "user_id": 8605115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65eb6533548d4343033a51a183cf06ca?s=128&d=identicon&r=PG&f=1", "display_name": "Shivank Kashyap", "link": "https://stackoverflow.com/users/8605115/shivank-kashyap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 46207505, "answer_count": 2, "score": -1, "last_activity_date": 1505340230, "creation_date": 1505329277, "last_edit_date": 1505336758, "question_id": 46205028, "link": "https://stackoverflow.com/questions/46205028/can-anyone-help-me-with-this-code", "title": "Can anyone help me with this code?", "body": "<p>I think my logic is correct but it's not printing anything. The code is to eliminate the vowel from a string and then display it.  </p>\n\n<pre><code> #include&lt;stdio.h&gt;\n #include&lt;conio.h&gt; \n void main()\n  { \n   char *str=\"shivank\"; \n   int i,len;\n   char *q; \n   clrscr();  \n   len=strlen(str);\n    for(i=0;i&lt;=len;i++)\n     {   \n        if((*str=='a')||(*str=='e')||(*str=='i')||(*str=='o')||(*str=='u')) \n           str++;     \n        else if(*str=='\\0')       \n            break;   \n        else   \n          {      \n            *q=*str;  \n             str++;\n             q++; \n          }\n     }\n     *q='\\0';\n     puts(q);  \n     getch(); \n   } \n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 952, "user_id": 5548598, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46ca4f3bb8b45761077cbfd9a6e9d0cf?s=128&d=identicon&r=PG&f=1", "display_name": "Taelsin", "link": "https://stackoverflow.com/users/5548598/taelsin"}, "edited": false, "score": 1, "creation_date": 1505328001, "post_id": 46204631, "comment_id": 79372540, "body": "Out of curiosity, what does your data look like? Is it all integers as your <code>fscanf</code> suggests?"}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 4, "creation_date": 1505328100, "post_id": 46204631, "comment_id": 79372594, "body": "You could read string from file using <code>fgets</code> (insted of using <code>feof</code> use return of <code>fgets</code> in loop condition) and then use <a href=\"http://www.cplusplus.com/reference/cstdio/sscanf/\" rel=\"nofollow noreferrer\"><code>sscanf</code></a>."}, {"owner": {"reputation": 41, "user_id": 6901907, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cf70451df5b654a500f26aeefddbd9fc?s=128&d=identicon&r=PG&f=1", "display_name": "tx203141", "link": "https://stackoverflow.com/users/6901907/tx203141"}, "edited": false, "score": 0, "creation_date": 1505328197, "post_id": 46204631, "comment_id": 79372649, "body": "Essentially, I&#39;m trying to read a line of text consisting of a set of integers and two separate sets of characters and rearrange them in a new file. So I thought there might be a way to actually split/parse each string, assign them to a variable, and rearrange them."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 6, "creation_date": 1505328487, "post_id": 46204631, "comment_id": 79372841, "body": "Read about why <a href=\"https://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\"><code>while (!feof(fp)) {}</code> is always wrong</a>. An example of input and expected output would be helpful."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 1, "creation_date": 1505328761, "post_id": 46204631, "comment_id": 79372971, "body": "Note that, if end-of-file is reached with the call to <code>fscanf()</code>, the <code>printf()</code> is executed anyway. And the return value from the call to <code>fscanf()</code> is not checked; if input is not as expected, there is no code to handle the problem."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1505329553, "post_id": 46204631, "comment_id": 79373394, "body": "Please post (by editing the question) an example input file of a few lines, and the desired output for each line. I see you don&#39;t use <code>char singleLine[150];</code> so your intentions are unclear. Did you want code written for you?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1505331203, "post_id": 46204631, "comment_id": 79374290, "body": "&quot;I understand how to read in a text file and scan/print the entire file&quot; and <code>while (!feof(fPointer)){         fscanf(fPointer, &quot;%d&quot;, &amp;id); ...</code> leaves doubts given that code is not testing the return value of <code>fscanf()</code>.  Better to use <code>while (fgets(buf, sizeof buf, fPointer)) { user_code_to_process_string_into_tokens(buf); }</code>"}, {"owner": {"reputation": 41, "user_id": 6901907, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cf70451df5b654a500f26aeefddbd9fc?s=128&d=identicon&r=PG&f=1", "display_name": "tx203141", "link": "https://stackoverflow.com/users/6901907/tx203141"}, "edited": false, "score": 0, "creation_date": 1505348184, "post_id": 46204631, "comment_id": 79380566, "body": "Chux I think this is helping in the right direction. Can fgets be followed by fputs to rearrrange newly assigned striings?"}], "answers": [{"tags": [], "owner": {"reputation": 476, "user_id": 6824359, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GCaZl8DeEJE/AAAAAAAAAAI/AAAAAAAAAqg/JLtHx2OuQE8/photo.jpg?sz=128", "display_name": "krpra", "link": "https://stackoverflow.com/users/6824359/krpra"}, "is_accepted": false, "score": 0, "last_activity_date": 1505330017, "creation_date": 1505330017, "answer_id": 46205224, "question_id": 46204631, "link": "https://stackoverflow.com/questions/46204631/how-to-split-strings-with-fgets-or-fscanf-in-c/46205224#46205224", "title": "How to Split strings with fgets or fscanf in C?", "body": "<p>you can use a library function <code>strtok(str,chrs)</code> function.\nA sequence of calls of <code>strtok(str,chrs)</code> splits <code>str</code> into tokens, each delimited by a character from <code>chrs</code>.</p>\n\n<p>The first call in a sequence is a non Null <code>str</code>.It finds the first token in <code>str</code> consisting of chars not int <code>chrs</code>;it terminates that by overwrtting the next characters of <code>str</code> by <code>\\0</code> and return pointer to <code>token</code>. Each subsequent call,indicated by a <code>NULL</code> value of <code>str</code>,retuens a pointer to next such <code>token</code>, searching from just past the end of privious one.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1505331324, "post_id": 46205507, "comment_id": 79374362, "body": "Consider closing the file before re-opening it. -- better, just <code>rewind()</code> and not re-open."}], "tags": [], "owner": {"reputation": 300, "user_id": 8462383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9ba140e56921c40c3c96c83e01009ee?s=128&d=identicon&r=PG&f=1", "display_name": "Fabio", "link": "https://stackoverflow.com/users/8462383/fabio"}, "is_accepted": false, "score": 0, "last_activity_date": 1505331478, "last_edit_date": 1505331478, "creation_date": 1505331140, "answer_id": 46205507, "question_id": 46204631, "link": "https://stackoverflow.com/questions/46204631/how-to-split-strings-with-fgets-or-fscanf-in-c/46205507#46205507", "title": "How to Split strings with fgets or fscanf in C?", "body": "<p>You should post an example of the input file so that you can help in more detail.\nI've seen you've also entered a string, I guess you want to fill in with something but you did not specify that.\nIf you wanted to treat the file as a list of numbers, the sample of the code might be the following.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    FILE *infile;\n    char buf[100];\n    int len_file=0;\n\n    if(!(infile = fopen(\"p1customer.txt\", \"r\"))) { /*checks the correct opening of the file*/\n        printf(\"Error in open p1customer.txt\\n\");\n        return 1;\n    }\n\n    while(fgets(buf,sizeof(buf),infile)!=NULL) /*check the lenght of the file (number of row) */\n        len_file++;\n\n    int id[len_file];\n    int i=0;\n\n    rewind(infile);\n\n    while(fgets(buf,sizeof(buf),infile)!=NULL) {\n        sscanf(buf,\"%i\",&amp;id[i]);\n        i++;\n    }\n\n    for(i=0;i&lt;len_file;i++)\n        printf(\"%i\\n\",id[i]);\n\n    fclose(infile);\n\n    return 0;\n}\n</code></pre>\n\n<p>If you want to treat the file as an indefinite list of numbers on each row separated by a space, you can use the parsing of the string by using in the sscanf formatting <code>%31[^ ]</code>which has the task of reading the number until it encounters a space, also you can add a variable that is incremented for each char/number read.\nThen you can refine the code by checking if there are any characters in the line using the <code>isalpha</code> function in the <code>ctype.h</code> library to see if there are any characters and then insert them into a string until you find the termination character <code>'\\ 0'</code>.</p>\n\n<p>The possibilities are infinite so it would useful have the input file, when you provided it, i'll update the answer.</p>\n"}], "owner": {"reputation": 41, "user_id": 6901907, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cf70451df5b654a500f26aeefddbd9fc?s=128&d=identicon&r=PG&f=1", "display_name": "tx203141", "link": "https://stackoverflow.com/users/6901907/tx203141"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1656, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1505459894, "creation_date": 1505327736, "last_edit_date": 1505345770, "question_id": 46204631, "link": "https://stackoverflow.com/questions/46204631/how-to-split-strings-with-fgets-or-fscanf-in-c", "title": "How to Split strings with fgets or fscanf in C?", "body": "<p>I understand how to read in a text file and scan/print the entire file, but how can a line be split into several strings? Also, can variables be assigned to those strings to be called later?\nMy code so far:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n    FILE *fPointer;\n    fPointer = fopen(\"p1customer.txt\", \"r\");\n    char singleLine[150];\n    int id;\n\n\n    while (!feof(fPointer)){\n        fscanf(fPointer, \"%d\", &amp;id);\n        printf(\"%d\",id);\n\n    }\n\n    fclose(fPointer);\n    return 0;   \n}\n</code></pre>\n\n<p>Example Text File to be read:\n99999 John Doe Basketball</p>\n\n<p>Example Output:\nJohn Doe has ID number 99999 and plays Basketball</p>\n\n<p>I am attempting to split/tokenize those strings and assign them variables (IDnumber, Name, Sport) and print the output in a new file.</p>\n"}, {"tags": ["c", "for-loop"], "comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 3, "creation_date": 1505325632, "post_id": 46204056, "comment_id": 79371178, "body": "Do you get warnings when you compile? You should: <code>&quot;a&quot;</code> in double quotes is a string literal of type <code>char *</code>. You want a single char in  single quotes: <code>&#39;a&#39;</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1505339728, "post_id": 46204056, "comment_id": 79378197, "body": "@TravisAlexanderTerrell Good compilers will warn about such problems like <code>string[j] == &quot;a&quot;</code>.  Save time, enable all compiler warnings."}], "answers": [{"comments": [{"owner": {"reputation": 34704, "user_id": 1746118, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/a4a3P.png?s=128&g=1", "display_name": "Naman", "link": "https://stackoverflow.com/users/1746118/naman"}, "edited": false, "score": 1, "creation_date": 1505329202, "post_id": 46204096, "comment_id": 79373215, "body": "reasons to downvote?"}, {"owner": {"reputation": 73, "user_id": 7530425, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/718484435668/picture?type=large", "display_name": "Travis Alexander Terrell", "link": "https://stackoverflow.com/users/7530425/travis-alexander-terrell"}, "edited": false, "score": 0, "creation_date": 1505330217, "post_id": 46204096, "comment_id": 79373735, "body": "Yeah why is this question being down-voted I did research and didn&#39;t find my answer.  I didn&#39;t realize the difference between single and double quotes which isn&#39;t something I have encountered in other languages where single and double quotes can be interchangeable to some extent."}], "tags": [], "owner": {"reputation": 34704, "user_id": 1746118, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/a4a3P.png?s=128&g=1", "display_name": "Naman", "link": "https://stackoverflow.com/users/1746118/naman"}, "is_accepted": true, "score": 4, "last_activity_date": 1505325648, "creation_date": 1505325648, "answer_id": 46204096, "question_id": 46204056, "link": "https://stackoverflow.com/questions/46204056/how-to-find-a-character-in-a-sentence-c-language/46204096#46204096", "title": "How to find a character in a sentence C language", "body": "<p>You can change</p>\n\n<pre><code>if (string[j] == \"a\") {\n  printf(\"%d %c\\n\", j, string[j]);\n}\n</code></pre>\n\n<p>to </p>\n\n<pre><code>if (string[j] == 'a') {\n  printf(\"%d %c\\n\", j, string[j]);\n}\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 7530425, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/718484435668/picture?type=large", "display_name": "Travis Alexander Terrell", "link": "https://stackoverflow.com/users/7530425/travis-alexander-terrell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "closed_date": 1505325612, "accepted_answer_id": 46204096, "answer_count": 1, "score": 0, "last_activity_date": 1505331033, "creation_date": 1505325516, "last_edit_date": 1505331033, "question_id": 46204056, "link": "https://stackoverflow.com/questions/46204056/how-to-find-a-character-in-a-sentence-c-language", "closed_reason": "Duplicate", "title": "How to find a character in a sentence C language", "body": "<p>I am having trouble with my code being new to C.  I am simply trying to get this program to print the index where string[j] = \"a\".  If I take out the if statement, the program will flawlessly print out all the index positions, but it doesn't work with the if statement.  It is very simple for me to do this in other languages.  How do you achieve this in C?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(int argc, char **argv) {\n    char string[100] = \"Smart Guy\";\n\n    for(int j = 0; j &lt; strlen(string); j++) {\n        if (string[j] == \"a\") {\n            printf(\"%d %c\\n\", j, string[j]);\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "opengl", "glfw", "cursor-position", "setwindowpos"], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 8562090, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jPXzU.png?s=128&g=1", "display_name": "Keyboard Princess", "link": "https://stackoverflow.com/users/8562090/keyboard-princess"}, "edited": false, "score": 0, "creation_date": 1505332583, "post_id": 46205247, "comment_id": 79374988, "body": "Thank  you for the detailed answer! This is definitely the core solution to the problem. However it only fixed the issue partly, and the jitter was still present, but at least it followed the cursor better."}], "tags": [], "owner": {"reputation": 34158, "user_id": 7203016, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ybAMw.png?s=128&g=1", "display_name": "K. A. Buhr", "link": "https://stackoverflow.com/users/7203016/k-a-buhr"}, "is_accepted": true, "score": 4, "last_activity_date": 1505330471, "last_edit_date": 1505330471, "creation_date": 1505330099, "answer_id": 46205247, "question_id": 46203809, "link": "https://stackoverflow.com/questions/46203809/glfw-mouse-event-lag-with-window-drag/46205247#46205247", "title": "GLFW Mouse event lag with window drag", "body": "<p>I suspect your problem is that the <code>cursor_pos_callback</code> receives the cursor position <em>relative to the window</em> and moving the window has an immediate effect on that position.</p>\n\n<p>Suppose you are moving the cursor diagonally at a constant rate.  If, over one tick, the cursor moves from relative position (100,100) to (105,105), you calculate <code>delta_x=5</code> and <code>delta_y=5</code>.  You then move the window.  The process of moving the window then instantaneously changes the relative coordinates from (105,105) back to (100,100), and on the next tick, even though you've moved to position (110,110) relative to the original window location, you are only at <em>relative</em> position (105,105) with respect to the new window location, so you calculate <code>delta_x=0</code> and <code>delta_y=0</code> from your previous position (plus some random jittery noise) even though you've actually moved an addition 5 units along each axis.</p>\n\n<p>Instead, modify your algorithm to maintain a constant relative cursor position.  On the drag start, store the relative cursor position (say (100,100)).  Now, at each tick, calculate where you need to position the window to move the cursor back to that fixed, relative position.  So, if the cursor has moved to (112,108), move the window by (+12,+8) to put the cursor back at (100,100).  At a later tick, if the cursor has moved to (108,106), don't try to calculate a delta from (112,108); instead, compare it to the original (100,100) starting point and move the window by (+8,+6).  It would be something like the following:</p>\n\n<pre><code>cursor_pos_callback(GLFWwindow *win, double xpos, double ypos) {\n\n  // update window position\n  if (window_drag_active) {\n     int delta_x = xpos - window_drag_starting_xpos;\n     int delta_y = ypos - window_drag_starting_ypos;\n     int x,y;\n     glfwGetWindowPos(window, &amp;x, &amp;y);\n     glfwSetWindowPos(window, x + delta_x, y + delta_y);\n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 85, "user_id": 8562090, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jPXzU.png?s=128&g=1", "display_name": "Keyboard Princess", "link": "https://stackoverflow.com/users/8562090/keyboard-princess"}, "is_accepted": false, "score": 3, "last_activity_date": 1505333231, "last_edit_date": 1505333231, "creation_date": 1505332880, "answer_id": 46205940, "question_id": 46203809, "link": "https://stackoverflow.com/questions/46203809/glfw-mouse-event-lag-with-window-drag/46205940#46205940", "title": "GLFW Mouse event lag with window drag", "body": "<p>I marked the other answer as the accepted solution, as it's true that you need to record the initial starting cursor position (relative to the window) and use that to calculate the deltas.</p>\n\n<p>However doing that only provided half of the solution.\nI still experienced some major jumping and shooting across the screen when dragging! </p>\n\n<p>In the end I found out that this sync issue was from where I was setting the new window position.</p>\n\n<p><strong>To get rid of any lag completely, and ensure window + cursor are synced up</strong>, you <strong>must</strong> do the <code>glfwGetWindowPos()</code> and <code>glfwSetWindowPos()</code> at the same time <strong>inside of the render loop!</strong></p>\n\n<p>Doing so inside of the callback will result in jitter with positions becoming out of sync. So I believe part of the solution is also making sure to keep window + cursor in sync as much as possible.</p>\n\n<p>Here is a minimal example, that I came to (many thanks to K.A. Buhr!)</p>\n\n<pre><code>#include &lt;math.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#include &lt;GLFW/glfw3.h&gt;\n\nstatic double cursor_pos_x = 0;\nstatic double cursor_pos_y = 0;\nstatic double delta_x = 0;\nstatic double delta_y = 0;\n\nstatic int window_drag_active = 0;\n\nstatic void mouse_button_callback(GLFWwindow *window, int button, int action,\n                              int mods) {\n    if (button == GLFW_MOUSE_BUTTON_LEFT &amp;&amp; action == GLFW_PRESS) {\n        window_drag_active = 1;\n        double x, y;\n        glfwGetCursorPos(window, &amp;x, &amp;y);\n        cursor_pos_x = floor(x);\n        cursor_pos_y = floor(y);\n    }\n    if (button == GLFW_MOUSE_BUTTON_LEFT &amp;&amp; action == GLFW_RELEASE) {\n        window_drag_active = 0;\n    }\n}\n\nint main() {\n    glfwInit();\n\n    GLFWwindow *win = glfwCreateWindow(400, 500, \"Drag Example\", NULL, NULL);\n\n    glfwSetMouseButtonCallback(win, mouse_button_callback);\n    glfwMakeContextCurrent(win);\n\n    while (!glfwWindowShouldClose(win)) {\n    glfwWaitEvents();\n\n    if (window_drag_active) {\n        double xpos, ypos;\n        glfwGetCursorPos(win, &amp;xpos, &amp;ypos);\n        delta_x = xpos - cursor_pos_x;\n        delta_y = ypos - cursor_pos_y;\n\n        int x, y;\n        glfwGetWindowPos(win, &amp;x, &amp;y);\n        glfwSetWindowPos(win, x + delta_x, y + delta_y);\n    }\n\n    glfwSwapBuffers(win);\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 8562090, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jPXzU.png?s=128&g=1", "display_name": "Keyboard Princess", "link": "https://stackoverflow.com/users/8562090/keyboard-princess"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 996, "favorite_count": 0, "accepted_answer_id": 46205247, "answer_count": 2, "score": 3, "last_activity_date": 1505333231, "creation_date": 1505324585, "last_edit_date": 1505327865, "question_id": 46203809, "link": "https://stackoverflow.com/questions/46203809/glfw-mouse-event-lag-with-window-drag", "title": "GLFW Mouse event lag with window drag", "body": "<p>I am trying to drag an undecorated window in GLFW but am encountering some event lag, even though I am using <code>glfwWaitEvents()</code></p>\n\n<p>I have a cursor position callback, and a simple loop:</p>\n\n<pre><code>// register a cursor position callback\nglfwSetCursorPosCallback(win, cursor_pos_callback);\n\n// then loop..\nwhile(!glfwWindowShouldClose(win)) {\n  glfwWaitEvents();\n  ... some rendering...\n  glfwSwapBuffers(win);\n}\n</code></pre>\n\n<p>My cursor callback does some simple tracking of the deltas and updates window position.</p>\n\n<pre><code>cursor_pos_callback(GLFWwindow *win, double xpos, double ypos) {\n  // figure out delta_x and delta_y based on cursor previous position\n  int delta_x, delta_y;\n\n  // update window position\n  if (window_drag_active) {\n     int x,y;\n     glfwGetWindowPos(window, &amp;x, &amp;y);\n     glfwSetWindowPos(window, x + delta_x, y + delta_y);\n  }\n}\n</code></pre>\n\n<p>Here is what the deltas look like <strong>when I'm dragging in a straight line</strong></p>\n\n<pre><code>delta_x:  10    delta_y:   0    |    xpos:   649    ypos: 55\ndelta_x:   5    delta_y:  -1    |    xpos:   654    ypos: 54\ndelta_x:   5    delta_y:   3    |    xpos:   659    ypos: 57\ndelta_x:   5    delta_y:   2    |    xpos:   664    ypos: 59\ndelta_x:  -5    delta_y:  -2    |    xpos:   659    ypos: 57\ndelta_x:   4    delta_y:   0    |    xpos:   663    ypos: 57\ndelta_x:   2    delta_y:   0    |    xpos:   665    ypos: 57\ndelta_x:  -3    delta_y:  -3    |    xpos:   662    ypos: 54\ndelta_x:   2    delta_y:   1    |    xpos:   664    ypos: 55\ndelta_x:   2    delta_y:   0    |    xpos:   666    ypos: 55\ndelta_x:   3    delta_y:   2    |    xpos:   669    ypos: 57\ndelta_x:   1    delta_y:  -1    |    xpos:   670    ypos: 56\ndelta_x:   2    delta_y:  -1    |    xpos:   672    ypos: 55\ndelta_x:   7    delta_y:   3    |    xpos:   679    ypos: 58\ndelta_x:   2    delta_y:  -1    |    xpos:   681    ypos: 57\ndelta_x:  -2    delta_y:  -3    |    xpos:   679    ypos: 54\ndelta_x:   0    delta_y:  -2    |    xpos:   679    ypos: 52\ndelta_x:   3    delta_y:   3    |    xpos:   682    ypos: 55\ndelta_x:  -5    delta_y:  -3    |    xpos:   677    ypos: 52\n</code></pre>\n\n<p>The <code>xpos</code> increments as it should, then every so often it goes backwards (stale event?)</p>\n\n<p>Maybe my window movement is not synced up with the cursor?</p>\n\n<p><strong>The result is the when I drag the window, it shakes violently and I can barely move it anywhere...</strong></p>\n\n<hr>\n\n<p>Update: I have also tried moving the <code>glfwSetWindowPos</code> logic into the main loop as well with no success\u2014I still get the same shaking and stuttering.</p>\n\n<hr>\n\n<p>Update: When I comment out the <code>glfwSetWindowPos()</code> the window no longer moves <em>(of course)</em> but the event stream is now consistent.</p>\n\n<p>This leads me to think that the moving of the window, when done quickly is causing the jerking motion (ie. 2 steps forward, 1 step backwards).</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1505324595, "post_id": 46203770, "comment_id": 79370561, "body": "Use <code>strcmp</code> instead of <code>==</code>. <code>key==&quot;pos_ref&quot;</code> --&gt; <code>strcmp(key, &quot;pos_ref&quot;)==0</code>"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1505325377, "post_id": 46203770, "comment_id": 79371041, "body": "&quot;not robust&quot;... as in? Use <code>sscanf</code>, it cannot be worse than this."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1505327954, "post_id": 46203770, "comment_id": 79372516, "body": "&#39;Lets assume the normal format of rx_buff is &quot;key,value&quot;.&#39; - is that reasonable?  I ask because developers often seem to do really odd stuff, like assuming that one read from a stream will return one, complete &#39;message&#39; as posted at the peer."}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1505329649, "post_id": 46203770, "comment_id": 79373448, "body": "What does &quot;robust&quot; mean? What if you send <code>&quot;pos_ref,1234,&quot;</code>, but only receive <code>&quot;pos_ref,134,&quot;</code>? How will you know this happened? What if you don&#39;t receive the final terminator? Will you have a timeout? What if two messages get &quot;stuck&quot; together? What if you don&#39;t receive a certain message at all? Can you detect this situation? Can you request a message again? How does the sender know that you received the messages? If the protocol is not robust, no implementation will save it. The message should at least start with a cookie, have a length and a checksum, possibly also a message counter."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 8594790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5590ce0373d1f8e543f5f83a4847062?s=128&d=identicon&r=PG&f=1", "display_name": "Streiff", "link": "https://stackoverflow.com/users/8594790/streiff"}, "is_accepted": false, "score": 0, "last_activity_date": 1505325821, "creation_date": 1505325821, "answer_id": 46204135, "question_id": 46203770, "link": "https://stackoverflow.com/questions/46203770/split-string-to-key-value-pair-in-c/46204135#46204135", "title": "Split string to key-value-pair in C", "body": "<p>You could use sscanf for this.</p>\n\n<pre><code>  char input[] = \"test,1.01\";\n  float val;\n  char *key = malloc(strlen(input));\n\n  if(sscanf(input, \"%[^,],%f\", key, &amp;val) == 2) {\n     printf(\"%s %f\\n\", key, val);\n  }\n</code></pre>\n"}], "owner": {"reputation": 383, "user_id": 4974456, "user_type": "registered", "accept_rate": 16, "profile_image": "https://www.gravatar.com/avatar/445e9aa149534bebeb1daa83315edb5c?s=128&d=identicon&r=PG&f=1", "display_name": "HansPeterLoft", "link": "https://stackoverflow.com/users/4974456/hanspeterloft"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 528, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1505325821, "creation_date": 1505324466, "last_edit_date": 1505325750, "question_id": 46203770, "link": "https://stackoverflow.com/questions/46203770/split-string-to-key-value-pair-in-c", "title": "Split string to key-value-pair in C", "body": "<p>I get a string over the UART to a microcontroller and need to split it\ninto a key value pair. It must be robust to false commands. What I have tried so far ist the following, but this is neither robust nor does it work. Any suggestions?</p>\n\n<p>Lets assume the normal format of rx_buff is \"key,value\".</p>\n\n<pre><code>void setCommand() {\n    token=strtok(rx_buff,\",\");\n    strcpy(key, token);\n    token=strtok(NULL,\",\");\n    strcpy(val, token);\n\n    if(key==\"pos_ref\") { //ofc I cannot compare a string like that\n        pos_ref=atof(val);\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "mutex", "semaphore", "producer-consumer"], "comments": [{"owner": {"reputation": 916, "user_id": 4121965, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ed23d9f7bf180f9632e5f2de23264c4f?s=128&d=identicon&r=PG", "display_name": "fpes", "link": "https://stackoverflow.com/users/4121965/fpes"}, "edited": false, "score": 1, "creation_date": 1505325449, "post_id": 46203689, "comment_id": 79371088, "body": "Have you considered using condition variables? I&#39;m gussing you dont want to look at solutions to this problem and want to solve them yourself. Check out pthread_cond_wait/pthread_cond_signal. This would help with what you are doing I think."}, {"owner": {"reputation": 150, "user_id": 3921481, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100002495012421/picture?type=large", "display_name": "Maarten Arits", "link": "https://stackoverflow.com/users/3921481/maarten-arits"}, "edited": false, "score": 1, "creation_date": 1505326375, "post_id": 46203689, "comment_id": 79371572, "body": "why do you need semaphores? If there is only 1 threat that writes and 1 that reads you are fine. You only need to make sure that only if the write is completed the read is able to read. Incrementing the length should be the last stap."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1505328060, "post_id": 46203689, "comment_id": 79372577, "body": "&#39;if (queueLength&lt;1)&#39; NO!  TOCTTOU disaster."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "reply_to_user": {"reputation": 150, "user_id": 3921481, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100002495012421/picture?type=large", "display_name": "Maarten Arits", "link": "https://stackoverflow.com/users/3921481/maarten-arits"}, "edited": false, "score": 0, "creation_date": 1505328277, "post_id": 46203689, "comment_id": 79372699, "body": "@MaartenArits he uses a semaphore to count the items in the queue.  If there is no semaphore, what will the consumer wait on if there is no items in the queue?"}, {"owner": {"reputation": 150, "user_id": 3921481, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100002495012421/picture?type=large", "display_name": "Maarten Arits", "link": "https://stackoverflow.com/users/3921481/maarten-arits"}, "edited": false, "score": 0, "creation_date": 1505328725, "post_id": 46203689, "comment_id": 79372959, "body": "True, you could use signals for that but semaphores work just as well than"}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1505335910, "post_id": 46203689, "comment_id": 79376603, "body": "Never ever use <code>sem_wait</code> without checking for the return value. This call can be interrupted, e.g when there is IO, so you always <i>must</i> check if the wait was successful."}, {"owner": {"reputation": 158, "user_id": 8214254, "user_type": "registered", "profile_image": "https://graph.facebook.com/1837851636230765/picture?type=large", "display_name": "Utkarsh Agarwal", "link": "https://stackoverflow.com/users/8214254/utkarsh-agarwal"}, "reply_to_user": {"reputation": 916, "user_id": 4121965, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ed23d9f7bf180f9632e5f2de23264c4f?s=128&d=identicon&r=PG", "display_name": "fpes", "link": "https://stackoverflow.com/users/4121965/fpes"}, "edited": false, "score": 0, "creation_date": 1505398637, "post_id": 46203689, "comment_id": 79405811, "body": "@FrancoSolleza Yeah, I am trying to understand what goes wrong here, because the logic seemed correct from a layman&#39;s point of view. Thanks, i&#39;ll read up on pthread_cond."}, {"owner": {"reputation": 158, "user_id": 8214254, "user_type": "registered", "profile_image": "https://graph.facebook.com/1837851636230765/picture?type=large", "display_name": "Utkarsh Agarwal", "link": "https://stackoverflow.com/users/8214254/utkarsh-agarwal"}, "reply_to_user": {"reputation": 150, "user_id": 3921481, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100002495012421/picture?type=large", "display_name": "Maarten Arits", "link": "https://stackoverflow.com/users/3921481/maarten-arits"}, "edited": false, "score": 0, "creation_date": 1505398836, "post_id": 46203689, "comment_id": 79405973, "body": "@maarten I understand semaphores may not be needed, but the main purpose here for me was to understand and implement semaphores. :)"}, {"owner": {"reputation": 158, "user_id": 8214254, "user_type": "registered", "profile_image": "https://graph.facebook.com/1837851636230765/picture?type=large", "display_name": "Utkarsh Agarwal", "link": "https://stackoverflow.com/users/8214254/utkarsh-agarwal"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1505399024, "post_id": 46203689, "comment_id": 79406118, "body": "@martin Even I thought there was something wrong between <code>if (queueLength&lt;1)</code> and<code>mutex_lock</code> , but can you please elaborate what could exactly be happening ?"}], "answers": [{"comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1505328109, "post_id": 46204198, "comment_id": 79372598, "body": "&#39;if (queueLength &lt; 1)&#39; - redundant, since that condition is not possible."}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1505328580, "post_id": 46204198, "comment_id": 79372894, "body": "@MartinJames: you&#39;re right, my bad, it&#39;s redundant with OP&#39;s code. If there were multiple producers/consumers, the check (inside the mutex) would be necessary, but then again having a <code>for</code> loop in the consumer wouldn&#39;t make sense."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1505329796, "post_id": 46204198, "comment_id": 79373515, "body": "No - even with multiple producers/consumers, one semaphore and one mutex is sufficient for an unbounded P-C queue without any queue checking.  Preventing overflow of a bounded queue would require another semaphore or some other design that prevents queue overflow, (I only use unbounded queues:)."}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1505330846, "post_id": 46204198, "comment_id": 79374078, "body": "@MartinJames: yeah, you&#39;re right again, I guess it&#39;s time to go to sleep."}, {"owner": {"reputation": 158, "user_id": 8214254, "user_type": "registered", "profile_image": "https://graph.facebook.com/1837851636230765/picture?type=large", "display_name": "Utkarsh Agarwal", "link": "https://stackoverflow.com/users/8214254/utkarsh-agarwal"}, "edited": false, "score": 0, "creation_date": 1505400344, "post_id": 46204198, "comment_id": 79407125, "body": "I was under the impression that I&#39;m decrementing the semaphore each time an iteration of the consumer runs. didn&#39;t realise it&#39;s only happening when the <code>queueLength</code> becomes 0. With the edit that you mentioned, in its current implementation is my code free from any possible errors?"}, {"owner": {"reputation": 158, "user_id": 8214254, "user_type": "registered", "profile_image": "https://graph.facebook.com/1837851636230765/picture?type=large", "display_name": "Utkarsh Agarwal", "link": "https://stackoverflow.com/users/8214254/utkarsh-agarwal"}, "edited": false, "score": 0, "creation_date": 1505400475, "post_id": 46204198, "comment_id": 79407223, "body": "That was a noob-error, implementing a queue named array as a stack, but let&#39;s assume that the consumer here wants to have the freshest items first."}, {"owner": {"reputation": 158, "user_id": 8214254, "user_type": "registered", "profile_image": "https://graph.facebook.com/1837851636230765/picture?type=large", "display_name": "Utkarsh Agarwal", "link": "https://stackoverflow.com/users/8214254/utkarsh-agarwal"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1505400637, "post_id": 46204198, "comment_id": 79407341, "body": "@martin I understand now that the condition <code>if (queueLength &lt; 1)</code> is redundant. Thanks."}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "reply_to_user": {"reputation": 158, "user_id": 8214254, "user_type": "registered", "profile_image": "https://graph.facebook.com/1837851636230765/picture?type=large", "display_name": "Utkarsh Agarwal", "link": "https://stackoverflow.com/users/8214254/utkarsh-agarwal"}, "edited": false, "score": 0, "creation_date": 1505401258, "post_id": 46204198, "comment_id": 79407796, "body": "@UtkarshAgarwal: I will add some comments later today or tomorrow, I am in a bit of a rush right now."}, {"owner": {"reputation": 158, "user_id": 8214254, "user_type": "registered", "profile_image": "https://graph.facebook.com/1837851636230765/picture?type=large", "display_name": "Utkarsh Agarwal", "link": "https://stackoverflow.com/users/8214254/utkarsh-agarwal"}, "edited": false, "score": 0, "creation_date": 1505401507, "post_id": 46204198, "comment_id": 79407962, "body": "@Groo No problem sir, anytime. Eagerly waiting to learn anything new. Semaphores seem a very interesting topic to me anyway."}], "tags": [], "owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "is_accepted": true, "score": 0, "last_activity_date": 1505400664, "last_edit_date": 1505400664, "creation_date": 1505326094, "answer_id": 46204198, "question_id": 46203689, "link": "https://stackoverflow.com/questions/46203689/producer-consumer-implementation-using-semaphores-and-mutex-locks-in-c/46204198#46204198", "title": "Producer-Consumer implementation using semaphores and mutex locks in C", "body": "<p>By the time your consumer thread starts, semaphore has already been signaled, and <code>queueLength</code> is larger than zero. Your consumer thread will immediately start dequeueing (since <code>queueLength</code> isn't zero), until it reaches zero.</p>\n\n<p>As soon as the queue is depleted, in the next consumer loop iteration (with <code>queueLength == 0</code>), it will enter the <code>if</code> clause and try to wait on the semaphore (which has been already signaled), and acquire the lock immediately. </p>\n\n<p>So the semaphore cannot be inside the <code>if</code> condition, meaning you could use something like:</p>\n\n<pre><code>for ( int i=0; i&lt;50; i++ )\n{\n    int item;\n\n    // wait for signal\n    sem_wait(&amp;semaphore);\n\n    pthread_mutex_lock( &amp;mutex );\n    item = queue[--queueLength];\n    pthread_mutex_unlock( &amp;mutex );\n    printf(\"Received %i\\n\", item);\n}\n</code></pre>\n\n<p>My suggestion (if this is your actual problem) would be to create a simple circular buffer instead. If implemented properly (i.e. only a single producer, single consumer, if the producer only moves the <code>head</code>, and the consumer only moves the <code>tail</code>, and presuming both variables are <code>int</code> or smaller -- i.e. can be read and written atomically), you won't need the <code>mutex</code> at all (only the semaphore for signalization).</p>\n\n<p>The array named <code>queue</code> in your example is actually a <em>stack</em> (LIFO), which is unusual in producer/consumer patterns where you usually want to dequeue and process oldest items first.</p>\n"}], "owner": {"reputation": 158, "user_id": 8214254, "user_type": "registered", "profile_image": "https://graph.facebook.com/1837851636230765/picture?type=large", "display_name": "Utkarsh Agarwal", "link": "https://stackoverflow.com/users/8214254/utkarsh-agarwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1892, "favorite_count": 0, "accepted_answer_id": 46204198, "answer_count": 1, "score": 1, "last_activity_date": 1505400664, "creation_date": 1505324156, "question_id": 46203689, "link": "https://stackoverflow.com/questions/46203689/producer-consumer-implementation-using-semaphores-and-mutex-locks-in-c", "title": "Producer-Consumer implementation using semaphores and mutex locks in C", "body": "<p>I am using the following code to to implement a basic prod-consumer problem in C. On rare occasions though, i'm getting wrong outputs such as mentioned below.</p>\n\n<p>The Received value reaches 0, but when it reaches 0 when there are still producer cycles to be left, then the receiver keeps getting 0 values and the output goes awry. </p>\n\n<p>Please help me understand what is wrong with my code. Thanks.</p>\n\n<p><strong>C CODE:</strong></p>\n\n<pre><code>#include &lt;pthread.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;semaphore.h&gt;\nsem_t semaphore;\npthread_mutex_t mutex = PTHREAD_MUTEX_INITIALIZER;\nint queue[50];\nint queueLength;\nvoid *producer( void * param)\n{\n    for ( int i=0; i&lt;50; i++ )\n    {\n        // Add item to queue\n        pthread_mutex_lock( &amp;mutex );\n        queue[ queueLength++ ] = i;\n        printf(\"Sent %d\\n\", i);\n        pthread_mutex_unlock( &amp;mutex );\n        // Signal semaphore\n\n        sem_post( &amp;semaphore );\n    }\n}\nvoid *consumer(void * param)\n{\n    for ( int i=0; i&lt;50; i++ )\n    {\n        int item;\n        // Wait if nothing in queue\n        if (queueLength&lt;1) { sem_wait(&amp;semaphore); }\n        pthread_mutex_lock( &amp;mutex );\n        item = queue[ -- queueLength ];\n        pthread_mutex_unlock( &amp;mutex );\n        printf(\"Received %i\\n\", item);\n    }\n}\nint main()\n{\n    pthread_t threads[2];\n    sem_init( &amp;semaphore, 0, 1 );\n    pthread_create( &amp;threads[0], 0, producer, 0 );\n    pthread_create( &amp;threads[1], 0, consumer, 0 );\n    pthread_join( threads[0], 0 );\n    pthread_join( threads[1], 0 );\n    sem_destroy( &amp;semaphore );\n}\n</code></pre>\n\n<p><strong>Wrong Output:</strong></p>\n\n<pre><code>Sent 0\nSent 1\nSent 2\nSent 3\nSent 4\nSent 5\nSent 6\nSent 7\nSent 8\nSent 9\nSent 10\nSent 11\nSent 12\nSent 13\nSent 14\nSent 15\nSent 16\nSent 17\nSent 18\nSent 19\nSent 20\nSent 21\nSent 22\nSent 23\nSent 24\nSent 25\nSent 26\nSent 27\nSent 28\nReceived 28\nReceived 27\nReceived 26\nReceived 25\nReceived 24\nReceived 23\nReceived 22\nReceived 21\nReceived 20\nReceived 19\nReceived 18\nReceived 17\nReceived 16\nReceived 15\nReceived 14\nReceived 13\nReceived 12\nReceived 11\nReceived 10\nReceived 9\nReceived 8\nReceived 7\nReceived 6\nReceived 5\nReceived 4\nReceived 3\nReceived 2\nReceived 1\nReceived 0\nReceived 0\nReceived 0\nReceived 0\nReceived 0\nReceived 0\nReceived 0\nReceived 0\nReceived -8\nReceived 0\nReceived 0\nReceived 0\nReceived 0\nReceived 0\nReceived 0\nReceived 0\nReceived 0\nReceived 0\nReceived 0\nReceived 0\nReceived 0\nReceived 1\nSent 29\nSent 30\nSent 31\nSent 32\nSent 33\nSent 34\nSent 35\nSent 36\nSent 37\nSent 38\nSent 39\nSent 40\nSent 41\nSent 42\nSent 43\nSent 44\nSent 45\nSent 46\nSent 47\nSent 48\nSent 49\n</code></pre>\n"}, {"tags": ["c", "pointers", "linked-list"], "comments": [{"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 1, "creation_date": 1505322238, "post_id": 46203165, "comment_id": 79369257, "body": "Really, this is your best Question? -&gt; <code>why is this code working  </code>"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1505322356, "post_id": 46203165, "comment_id": 79369332, "body": "Explicitly unremembering would waste CPU cycles. Don&#39;t rely on undefined behaviour."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1505322382, "post_id": 46203165, "comment_id": 79369344, "body": "Please <b><i>properly</i></b> indent your code. Machine (Compiler) can read and compile anything, but for humans, it needs to make a little <i>sense</i> while reading a block of text as <i>code</i>."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1505322415, "post_id": 46203165, "comment_id": 79369363, "body": "<a href=\"https://stackoverflow.com/q/605845/2173917\">Please see this discussion on why not to cast the return value of malloc() and family in C..</a>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1505322445, "post_id": 46203165, "comment_id": 79369384, "body": "It is preferred if you can post separate questions instead of combining your questions into one. That way, it helps the people answering your question and also others hunting for at least one of your questions. Thanks!"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 1, "creation_date": 1505322493, "post_id": 46203165, "comment_id": 79369419, "body": "in <code>void cr(ode**p)</code> you should check <code>a</code> because is used uninitialized. --&gt;&gt; <code>a-&gt;data=2;</code>. What happens if  <code>temp != NULL</code> ?"}], "answers": [{"tags": [], "owner": {"reputation": 38, "user_id": 8690567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/632ac1c7cb696828471eb86619b784b7?s=128&d=identicon&r=PG", "display_name": "Ararararagi", "link": "https://stackoverflow.com/users/8690567/ararararagi"}, "is_accepted": false, "score": 0, "last_activity_date": 1506643002, "creation_date": 1506643002, "answer_id": 46479890, "question_id": 46203165, "link": "https://stackoverflow.com/questions/46203165/can-pointers-exist-outside-their-scope/46479890#46479890", "title": "can pointers exist outside their scope", "body": "<p>When you don't assign any value to a local variable (in this case we're talking about <code>a</code>) the program will behave in an unpredictable way, thus we say <em>undefined behavior</em>. This means that your program work correctly just by chance, and you should <strong>always</strong> remember to <strong>assign</strong> values before using the variables.</p>\n\n<p>In particular, in this case I can guess why it's working every time you run it, and it has to do with how function calls work in C. Let me explain.</p>\n\n<p>When we make a call to a function, a new <em>frame</em> (layer) in the <strong>stack</strong> (a place in memory where local variables and other \"local-ish\" things are stored). As you can expect from what I just said, a stack is organized in layers. Let me expose an example.</p>\n\n<p>If in a particular function called George() I declare and use 2 local variables</p>\n\n<pre><code>int George(){\n    int a;\n    int b;\n    a = 5;\n    return 0;\n}\n</code></pre>\n\n<p>the compiler will know that space for 2 variables is needed, so when I call the function it will reserve space for those 2 local variables to be stored. The new stack frame will be something like:</p>\n\n<pre><code>| 'a': ____ | &lt;-- 4 bytes space for variable a\n| 'b': ____ | &lt;-- 4 bytes space for variable b\n|-----------|\n</code></pre>\n\n<p>(While keeping in mind that this is not a realistic representation of the stack, it's good enough to explain what's going on)</p>\n\n<p>Those spaces reserved for the values of the variables are <strong>NOT</strong> set to a default value, they contain what there was in memory before (and right now we can't make any guess).</p>\n\n<p>When I call this function from another function (i.e. <code>main</code>) a stack frame with that shape will be added (<code>push</code>) to the stack:</p>\n\n<pre><code>int main(){\n    int hello = 7;\n    int hey;\n    hey = George(); // Here we make the function call\n    return 0;\n}\n</code></pre>\n\n<p>The stack will then be something like:</p>\n\n<pre><code>STACK:\n    | 'a': ____    | &lt;- 'George' stack frame, containing\n    | 'b': ____    |    local variables of George\n    |--------------|\n    | 'hello': 7   | &lt;- 'main' stack frame, containing\n    | 'hey': ____  |    local variables of main\n    |--------------|\n</code></pre>\n\n<p>After the 3rd line of George, just before the return, the stack will be:</p>\n\n<pre><code> STACK:\n      | 'a': 5       | &lt;- Variable a has been set to 5\n      | 'b': ____    |    \n      |--------------|\n      | 'hello': 7   | \n      | 'hey': ____  |   \n      |--------------|\n</code></pre>\n\n<p>and then there will be a <code>return</code>. Here, the stack is <code>pop</code>'d, which means a frame is deleted (we are returning in the <code>main</code> function \"domain\", so we discard local variables of George).</p>\n\n<pre><code>STACK:\n    | 'hello': 7   | &lt;- 'main' stack frame, with hey replaced with\n    | 'hey': 0     |    George return value (0)\n    |--------------|\n</code></pre>\n\n<p>And everything works fine, <strong>BUT</strong> the memory we pop'd just right now is not set to 0 or some other default value. It stays like that until some other program overrides it. Which means that, while we are not using those values anymore, they're <strong>probably</strong> still there.</p>\n\n<p>In this state, if we call George another time, we will have our stack pushed another time:</p>\n\n<pre><code> STACK:\n      | 'a': ____    | &lt;- 'a' address is in the same position\n      | 'b': ____    |    where there was the 'a' in the previous\n      |--------------|    function call to Giorgio\n      | 'hello': 7   | \n      | 'hey': ____  |   \n      |--------------|\n</code></pre>\n\n<p>In this state, if we don't assign any value to <code>a</code> it will (probably) contain the value that the <code>a</code> had on the previous function call, because the 'new' <code>a</code> has the same address of the 'previous' <code>a</code>, because the function called is the same and there was no other function call in between that could override the previous value. If we do so, before we assign any value to the new local variable <code>a</code>, it contains <code>5</code>.</p>\n\n<p>The same happens to your program when you run</p>\n\n<pre><code>cr(&amp;head);\ncr(&amp;head);\n</code></pre>\n\n<p>twice, one before the other. The value of your local variable <code>a</code> is probably kept unchanged.</p>\n\n<p>Anyway, explanation apart, NEVER use this kind of behaviors in your code. This is a very very bad way of programming, and the outcome is usually unpredictable.</p>\n\n<p>I hope my explanation was not too bad.</p>\n"}], "owner": {"reputation": 1, "user_id": 8550804, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f635031ff765f86de89310076af1c191?s=128&d=identicon&r=PG&f=1", "display_name": "ozzy ", "link": "https://stackoverflow.com/users/8550804/ozzy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 1, "answer_count": 1, "score": -7, "last_activity_date": 1506643002, "creation_date": 1505322104, "last_edit_date": 1505322899, "question_id": 46203165, "link": "https://stackoverflow.com/questions/46203165/can-pointers-exist-outside-their-scope", "title": "can pointers exist outside their scope", "body": "<ol>\n<li><p>why does the pointer \"a\" points to the correct location when i call the function for the second time</p></li>\n<li><p>because during the second function call to \"cr\" the statements in the if block will not be executed so how the hell does the pointer \"a\" remember its previous location even though its not a static variable    </p></li>\n</ol>\n\n<p>code:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\n#include&lt;stdlib.h&gt;\n\ntypedef struct heavy{\n    int data;\n    struct heavy *nxt;\n}ode;\n\nvoid cr(ode**);\nvoid prin(ode*);\n\nint main()\n{\n    ode*head=NULL;\n    cr(&amp;head);cr(&amp;head);\n    prin(head);\n    getch();\n    return 0;\n}\n\nvoid cr(ode**p)\n{\n    ode*temp,*a;\n    temp=*p;\n\n    if(temp==NULL)\n    {\n        a=(ode*)malloc(sizeof(ode));\n        a-&gt;data=1;\n        a-&gt;nxt=(ode*)malloc(sizeof(ode));\n        *p=a;\n        a=a-&gt;nxt;\n        a-&gt;nxt=NULL;\n    }else{\n        a-&gt;data=2;\n        a-&gt;nxt=NULL;\n    }\n}\n\nvoid prin(ode*head)\n{\n    if(head==NULL)\n        printf(\"list is empty\");\n    while(head!=NULL)\n    {\n        printf(\"%d\",head-&gt;data);\n        head=head-&gt;nxt;\n    }\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 4, "creation_date": 1505320031, "post_id": 46202536, "comment_id": 79367985, "body": "Your struct name is <code>nodo</code> and you declare <code>node</code>."}, {"owner": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "edited": false, "score": 0, "creation_date": 1505320267, "post_id": 46202536, "comment_id": 79368112, "body": "This is a simple typographical error, so it should be closed."}], "answers": [{"comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1505320161, "post_id": 46202557, "comment_id": 79368049, "body": "your answer is just code with no explanation as to why you&#39;ve changed what you&#39;ve changed"}], "tags": [], "owner": {"reputation": 5773, "user_id": 3525545, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rge03.jpg?s=128&g=1", "display_name": "Mahonri Moriancumer", "link": "https://stackoverflow.com/users/3525545/mahonri-moriancumer"}, "is_accepted": false, "score": -1, "last_activity_date": 1505320415, "last_edit_date": 1505320415, "creation_date": 1505319994, "answer_id": 46202557, "question_id": 46202536, "link": "https://stackoverflow.com/questions/46202536/error-unknown-type-name-node/46202557#46202557", "title": "error: unknown type name &#39;node&#39;", "body": "<pre><code>typedef struct nodo\n{\n    int info;\n    struct nodo *sig; // Rather than: node *sig;\n} nodeL;\n</code></pre>\n\n<p>It looks like your structure name <code>node</code> is what you are referencing inside the structure.  <code>nodo</code> not <code>node</code>.</p>\n\n<p>Perhaps there is a mis-understanding that <code>nodo</code> (or <code>node</code>) is a C type. It is not a type.  However <code>struct nodo</code> is defined in the question code. </p>\n"}, {"tags": [], "owner": {"reputation": 182, "user_id": 8547802, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dcBka.jpg?s=128&g=1", "display_name": "Gabriel Magri", "link": "https://stackoverflow.com/users/8547802/gabriel-magri"}, "is_accepted": false, "score": 2, "last_activity_date": 1505320670, "creation_date": 1505320670, "answer_id": 46202768, "question_id": 46202536, "link": "https://stackoverflow.com/questions/46202536/error-unknown-type-name-node/46202768#46202768", "title": "error: unknown type name &#39;node&#39;", "body": "<p>You must keep in mind that C compiler don't know what is node or nodo (you typed it wrong in the struct name probably), it's not a C primary type.\nAt this point nodo is a struct type and you must \"say\" it to the compiler, like:</p>\n\n<pre><code>typedef struct nodo\n{\n    int info;\n    struct nodo *sig; \n} nodeL;\n</code></pre>\n\n<p>The atribute <code>nodo *sig;</code> inside the struct declares a member sig that is a defined pointer to the struct type.</p>\n"}], "owner": {"reputation": 814, "user_id": 2352665, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b7eaa37741dcbba9e1e8afcec8ef49b2?s=128&d=identicon&r=PG", "display_name": "Alejandro Caro", "link": "https://stackoverflow.com/users/2352665/alejandro-caro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3069, "favorite_count": 0, "closed_date": 1505320802, "answer_count": 2, "score": -3, "last_activity_date": 1505335336, "creation_date": 1505319928, "last_edit_date": 1505335336, "question_id": 46202536, "link": "https://stackoverflow.com/questions/46202536/error-unknown-type-name-node", "closed_reason": "Not suitable for this site", "title": "error: unknown type name &#39;node&#39;", "body": "<p>I am declaring a node, but throws the following error</p>\n\n<blockquote>\n  <p>error: unknown type name 'node'</p>\n</blockquote>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ntypedef struct node\n{\n    int info;\n    node *sig; //&lt;-- error: unknown type name 'node'\n} nodeL;\n\nint main(void) {\n    nodeL n;\n    printf(\"%x\\n\", n.info);\n\n    return 0;\n}\n</code></pre>\n\n<p>How can I solve it?</p>\n"}, {"tags": ["c", "encryption"], "comments": [{"owner": {"reputation": 2525, "user_id": 5402881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbd67023a48b626fa1595d8d5cf8404e?s=128&d=identicon&r=PG&f=1", "display_name": "yacc", "link": "https://stackoverflow.com/users/5402881/yacc"}, "edited": false, "score": 1, "creation_date": 1505320301, "post_id": 46202474, "comment_id": 79368138, "body": "Your input buffer is empty (not initialized). From where do you want to get the clear text?"}], "answers": [{"tags": [], "owner": {"reputation": 2525, "user_id": 5402881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbd67023a48b626fa1595d8d5cf8404e?s=128&d=identicon&r=PG&f=1", "display_name": "yacc", "link": "https://stackoverflow.com/users/5402881/yacc"}, "is_accepted": false, "score": 0, "last_activity_date": 1505320804, "creation_date": 1505320804, "answer_id": 46202805, "question_id": 46202474, "link": "https://stackoverflow.com/questions/46202474/cipher-in-c-program-doesnt-change-text-file/46202805#46202805", "title": "Cipher in C program doesn&#39;t change text file", "body": "<p>Your input buffer is never initialized. Add this after file open:</p>\n\n<pre><code>fgets(file, MAXSIZE, File);\n/* todo: check for error */\n</code></pre>\n\n<p>If you want to overwrite the message, use <code>rewind(File)</code>.\nAnd write a newline when you're done.</p>\n"}, {"tags": [], "owner": {"reputation": 4703, "user_id": 5375464, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3292ca87ff6c766b75dbe4b2ea0831da?s=128&d=identicon&r=PG&f=1", "display_name": "J...S", "link": "https://stackoverflow.com/users/5375464/j-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1505328286, "last_edit_date": 1505328286, "creation_date": 1505325546, "answer_id": 46204066, "question_id": 46202474, "link": "https://stackoverflow.com/questions/46202474/cipher-in-c-program-doesnt-change-text-file/46204066#46204066", "title": "Cipher in C program doesn&#39;t change text file", "body": "<p>In function <code>Encrypt()</code>, after opening the file you haven't actually read data from the file into the string <code>file</code>.</p>\n\n<p>You could use <code>fgets()</code> to read from the open file into the string <code>file</code> like </p>\n\n<pre><code>fgets(file, sizeof(file), File);\n</code></pre>\n\n<p>It should be noted that <code>fgets()</code> will read in the trailing <code>\\n</code> to the string.</p>\n\n<p>After reading the line the file pointer would've advanced and you need to get it back to its original position before writing.</p>\n\n<p>You could save the current position in a variable, read from file and set the file pointer back using the saved value with <code>fseek()</code>.</p>\n\n<pre><code>long currentPos=ftell(File);\nfgets(file, MAXSIZE, File);\nfseek(File, currentPos, 0);\n</code></pre>\n\n<p>Also, instead of the multiple <code>if</code>s, it would be better to <code>else if</code>s after the first <code>if</code>.\nIn this way, the <code>if</code>s after the matched <code>if</code> needn't be examined.</p>\n\n<p>Or you could do away with all those annoying <code>if</code>s and do something like</p>\n\n<pre><code>char original[]=\"abcdefghijklmnoqrstuvwxyz\";\nchar translation[]=\"FGZVABGXEJIKOVUYNPRCQTDSH\";\nfor(j=0; translation[j]!='\\0'; ++j)\n{\n    if(file[i]==original[j])\n    {\n        file[i]=translation[j];\n        fputc(file[i], File);\n    }\n}\n</code></pre>\n\n<p>And the use of <code>system(\"pause\")</code> is not considered a good practice. See <a href=\"https://stackoverflow.com/questions/1107705/systempause-why-is-it-wrong\">here</a>.</p>\n"}], "owner": {"reputation": 19, "user_id": 8276842, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ScY8F1oHQcs/AAAAAAAAAAI/AAAAAAAAAjo/pWY2KWtQtxQ/photo.jpg?sz=128", "display_name": "Szmonoloza Szmonoloza", "link": "https://stackoverflow.com/users/8276842/szmonoloza-szmonoloza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1505328286, "creation_date": 1505319729, "last_edit_date": 1505326620, "question_id": 46202474, "link": "https://stackoverflow.com/questions/46202474/cipher-in-c-program-doesnt-change-text-file", "title": "Cipher in C program doesn&#39;t change text file", "body": "<p>In this program, I've used the simple substitution cipher on a text file named \"message\" in the same folder as the program. However when I run it, the message doesn't change from \"abcdefg\". I've looked at the code numerous times but I don't see the problem, maybe I'm just a amateur in C. Anything to help is much appreciated. Thanks!</p>\n\n<pre><code>#define _CRT_SECURE_NO_WARNINGS\n#include &lt;stdio.h&gt;    \n#include &lt;stdlib.h&gt;   \n\nconst int MAXSIZE = 50;\nvoid Encrypt(FILE *File, char file[MAXSIZE], int i)  \n{\n    File = fopen(\"message.txt\", \"r+\");    \n\n    for (i = 0; i &lt; 6; i++)\n    {\n\n        if (file[i] == 'a')\n        {\n            file[i] = 'F';\n            fputc(file[i], File);\n        }\n\n        if (file[i] == 'b')\n\n        {\n            file[i] = 'G';\n            fputc(file[i], File);\n        }\n\n        if (file[i] == 'c')\n        {\n            file[i] = 'Z';\n            fputc(file[i], File);\n        }\n\n        if (file[i] == 'd')\n        {\n            file[i] = 'V';\n            fputc(file[i], File);\n        }\n\n\n        if (file[i] == 'e')\n        {\n            file[i] = 'A';\n            fputc(file[i], File);\n        }\n\n\n        if (file[i] == 'f')\n        {\n            file[i] = 'B';\n            fputc(file[i], File);\n        }\n\n\n        if (file[i] == 'g')\n        {\n            file[i] = 'G';\n            fputc(file[i], File);\n        }\n\n\n        if (file[i] == 'h')\n        {\n            file[i] = 'X';\n            fputc(file[i], File);\n        }\n\n        if (file[i] == 'i')\n        {\n            file[i] = 'E';\n            fputc(file[i], File);\n        }\n\n        if (file[i] == 'j')\n        {\n            file[i] = 'J';\n            fputc(file[i], File);\n        }\n\n        if (file[i] == 'k')\n        {\n            file[i] = 'I';\n            fputc(file[i], File);\n        }\n\n        if (file[i] == 'l')\n        {\n            file[i] = 'K';\n            fputc(file[i], File);\n        }\n\n        if (file[i] == 'm')\n        {\n            file[i] = 'O';\n            fputc(file[i], File);\n        }\n\n\n        if (file[i] == 'n')\n        {\n            file[i] = 'V';\n            fputc(file[i], File);\n        }\n\n        if (file[i] == 'o')\n        {\n            file[i] = 'U';\n            fputc(file[i], File);\n        }\n\n        if (file[i] == 'q')\n        {\n            file[i] = 'Y';\n            fputc(file[i], File);\n        }\n\n        if (file[i] == 'r')\n        {\n            file[i] = 'N';\n            fputc(file[i], File);\n        }\n\n\n        if (file[i] == 's')\n        {\n            file[i] = 'P';\n            fputc(file[i], File);\n        }\n\n\n        if (file[i] == 't')\n        {\n            file[i] = 'R';\n            fputc(file[i], File);\n        }\n\n\n        if (file[i] == 'u')\n        {\n            file[i] = 'C';\n            fputc(file[i], File);\n        }\n\n\n        if (file[i] == 'v')\n        {\n            file[i] = 'Q';\n            fputc(file[i], File);\n        }\n\n\n        if (file[i] == 'w')\n        {\n            file[i] = 'T';\n            fputc(file[i], File);\n        }\n\n\n        if (file[i] == 'x')\n        {\n            file[i] = 'D';\n            fputc(file[i], File);\n        }\n\n\n        if (file[i] == 'y')\n        {\n            file[i] = 'S';\n            fputc(file[i], File);\n        }\n\n\n        if (file[i] == 'z')\n        {\n            file[i] = 'H';\n            fputc(file[i], File);\n        }\n    }\n\n    printf(\"Check the file for encrypted message!\\n\\n\");\n\n    fclose(File);\n    return;\n}\n\nint main()\n{\n    int i = 0;\n    char file[MAXSIZE];\n    FILE *File = 0;\n\n    Encrypt(File, file, i);   \n\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "recursion", "tree"], "comments": [{"owner": {"reputation": 985, "user_id": 6531241, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/XySrX.jpg?s=128&g=1", "display_name": "Karim Manaouil", "link": "https://stackoverflow.com/users/6531241/karim-manaouil"}, "edited": false, "score": 0, "creation_date": 1505319051, "post_id": 46201826, "comment_id": 79367409, "body": "For a way to return the new address, you can use a wrapper function that calls the recursive <code>prune_tree</code> &amp; returns the new root. And then the wrapper function will be called  instead of the original <code>prune_tree</code>."}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 6072864, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/091da849f1ba091343016612f2efd4ab?s=128&d=identicon&r=PG", "display_name": "user178831", "link": "https://stackoverflow.com/users/6072864/user178831"}, "edited": false, "score": 0, "creation_date": 1505319505, "post_id": 46202328, "comment_id": 79367684, "body": "Thank you. After calling this function, will root = new_root, or will I have to set it to such afterwards?"}, {"owner": {"reputation": 150, "user_id": 3921481, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100002495012421/picture?type=large", "display_name": "Maarten Arits", "link": "https://stackoverflow.com/users/3921481/maarten-arits"}, "edited": false, "score": 0, "creation_date": 1505320010, "post_id": 46202328, "comment_id": 79367969, "body": "don&#39;t you need to free up the memory allocated by the old tree elements that are no longer in the tree?"}, {"owner": {"reputation": 985, "user_id": 6531241, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/XySrX.jpg?s=128&g=1", "display_name": "Karim Manaouil", "link": "https://stackoverflow.com/users/6531241/karim-manaouil"}, "reply_to_user": {"reputation": 49, "user_id": 6072864, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/091da849f1ba091343016612f2efd4ab?s=128&d=identicon&r=PG", "display_name": "user178831", "link": "https://stackoverflow.com/users/6072864/user178831"}, "edited": false, "score": 0, "creation_date": 1505320353, "post_id": 46202328, "comment_id": 79368168, "body": "@user178831 No, <code>root != new_root</code>. This function does excatly what you did but only protects the new root&#39;s sub tree from removal in contract to what you did. So you need to do it afterwards in a wrapper function: <code>void wrapper_func(node **root, node *new_root){ prune_tree(root, new_root); *root = new_root; }</code>"}, {"owner": {"reputation": 985, "user_id": 6531241, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/XySrX.jpg?s=128&g=1", "display_name": "Karim Manaouil", "link": "https://stackoverflow.com/users/6531241/karim-manaouil"}, "edited": false, "score": 0, "creation_date": 1505320414, "post_id": 46202328, "comment_id": 79368205, "body": "&amp; then call <code>wrapper_func</code> (From <code>main</code> or elsewhere) whenever you want to set the new root."}, {"owner": {"reputation": 49, "user_id": 6072864, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/091da849f1ba091343016612f2efd4ab?s=128&d=identicon&r=PG", "display_name": "user178831", "link": "https://stackoverflow.com/users/6072864/user178831"}, "edited": false, "score": 0, "creation_date": 1505320626, "post_id": 46202328, "comment_id": 79368321, "body": "I see. I&#39;m not 100% sure of this yet, but from testing it out, it seems like this function might not get rid of new_root&#39;s siblings (nexts) or their children."}, {"owner": {"reputation": 985, "user_id": 6531241, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/XySrX.jpg?s=128&g=1", "display_name": "Karim Manaouil", "link": "https://stackoverflow.com/users/6531241/karim-manaouil"}, "reply_to_user": {"reputation": 49, "user_id": 6072864, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/091da849f1ba091343016612f2efd4ab?s=128&d=identicon&r=PG", "display_name": "user178831", "link": "https://stackoverflow.com/users/6072864/user178831"}, "edited": false, "score": 0, "creation_date": 1505325698, "post_id": 46202328, "comment_id": 79371212, "body": "@user178831 Yes, it is true i didn&#39;t notice that so quickly. The traversal stops whenever it reaches <code>new_root</code> because the function return before moving any further."}, {"owner": {"reputation": 49, "user_id": 6072864, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/091da849f1ba091343016612f2efd4ab?s=128&d=identicon&r=PG", "display_name": "user178831", "link": "https://stackoverflow.com/users/6072864/user178831"}, "edited": false, "score": 0, "creation_date": 1505326491, "post_id": 46202328, "comment_id": 79371646, "body": "I posted an answer to my own question based off of @chqrlie&#39;s answer. I think it works..."}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 0, "last_activity_date": 1505349758, "last_edit_date": 1505349758, "creation_date": 1505319262, "answer_id": 46202328, "question_id": 46201826, "link": "https://stackoverflow.com/questions/46201826/changing-root-of-tree-and-pruning/46202328#46202328", "title": "Changing root of tree and pruning", "body": "<p>Your approach does not work as you will be deallocating the new root itself. You only stop on nodes whose <code>parent</code> is the new root.</p>\n\n<p>Here is a corrected version:</p>\n\n<pre><code>void prune_tree(node **root, node *new_root) {\n    if (*root == NULL)\n        return;\n    if (*root == new_root) {\n        (*root)-&gt;parent = NULL;\n        return;\n    }\n    prune_tree(&amp;(*root)-&gt;child, new_root);\n    prune_tree(&amp;(*root)-&gt;next, new_root);\n    free(*root);\n    *root = NULL;\n}\n</code></pre>\n\n<p>You will still need to update the root of the tree to <code>new_root</code> after calling this function with its address:</p>\n\n<pre><code>prune_tree(&amp;root, new_root);\nroot = new_root;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 985, "user_id": 6531241, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/XySrX.jpg?s=128&g=1", "display_name": "Karim Manaouil", "link": "https://stackoverflow.com/users/6531241/karim-manaouil"}, "edited": false, "score": 0, "creation_date": 1505320128, "post_id": 46202374, "comment_id": 79368035, "body": "This is logically similar to OP&#39;s recursive function and it must be wrong because you will eventually remove the new root&#39;s node."}, {"owner": {"reputation": 150, "user_id": 3921481, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100002495012421/picture?type=large", "display_name": "Maarten Arits", "link": "https://stackoverflow.com/users/3921481/maarten-arits"}, "reply_to_user": {"reputation": 985, "user_id": 6531241, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/XySrX.jpg?s=128&g=1", "display_name": "Karim Manaouil", "link": "https://stackoverflow.com/users/6531241/karim-manaouil"}, "edited": false, "score": 0, "creation_date": 1505322430, "post_id": 46202374, "comment_id": 79369374, "body": "i fixed it, you can remove the whole tree by setting node to NULL"}, {"owner": {"reputation": 985, "user_id": 6531241, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/XySrX.jpg?s=128&g=1", "display_name": "Karim Manaouil", "link": "https://stackoverflow.com/users/6531241/karim-manaouil"}, "edited": false, "score": 0, "creation_date": 1505327072, "post_id": 46202374, "comment_id": 79372004, "body": "Unfortunately, there is a problem with this updated answer as pointed to by OP. The traversal stops after reaching <code>new_root</code>. A new correct answer was added. Waiting for user @chqrlie to also approve changes for a better code version."}], "tags": [], "owner": {"reputation": 150, "user_id": 3921481, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100002495012421/picture?type=large", "display_name": "Maarten Arits", "link": "https://stackoverflow.com/users/3921481/maarten-arits"}, "is_accepted": false, "score": 0, "last_activity_date": 1505322705, "last_edit_date": 1505322705, "creation_date": 1505319411, "answer_id": 46202374, "question_id": 46201826, "link": "https://stackoverflow.com/questions/46201826/changing-root-of-tree-and-pruning/46202374#46202374", "title": "Changing root of tree and pruning", "body": "<p>a recursive function would be perfect for this.</p>\n\n<p>what you basically want to do (assuming there are no loops in the tree) is remove all the siblings of the new root, al their children and parents and al the parents of the root.</p>\n\n<p>an algorithm could be:</p>\n\n<pre><code>typedef struct node {\n    int ID;\n    struct node *child;\n    struct node *sibling;\n    struct node *parent;\n} node;\n\nvoid remove_node(struct node* node, struct node* root)\n{\n    if(node-&gt;parent != NULL)\n        remove_node(node-&gt;parent, new_root)\n\n    if(node-&gt;sibling != NULL)\n        remove_node(node-&gt;sibling, new_root)\n\n    if((node-&gt;child != NULL) &amp;&amp; (node-&gt;child != root))\n        remove_node(node-&gt;sibling, new_root)\n\n    free(node)\n}\n\nvoid prune_tree(node **root, node *new_root) {\n    *root = new_root\n    remove_node(new_root-&gt;parent);\n    remove_node(new_root-&gt;sibling);\n}\n</code></pre>\n\n<p>assumptions:</p>\n\n<ul>\n<li>new_root is in the tree</li>\n<li>no loops in the tree</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 985, "user_id": 6531241, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/XySrX.jpg?s=128&g=1", "display_name": "Karim Manaouil", "link": "https://stackoverflow.com/users/6531241/karim-manaouil"}, "edited": false, "score": 0, "creation_date": 1505326774, "post_id": 46204311, "comment_id": 79371834, "body": "The changes i suggested to @chqrlie&#39;s answer are logically equivalent to this but in more elegant way and without code redundancy. you could get ride of that ugly <code>if else</code> thing you did there because of that useless <code>del</code> variable. If @chqrlie approves the changes i suggested, you will see a better code."}], "tags": [], "owner": {"reputation": 49, "user_id": 6072864, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/091da849f1ba091343016612f2efd4ab?s=128&d=identicon&r=PG", "display_name": "user178831", "link": "https://stackoverflow.com/users/6072864/user178831"}, "is_accepted": false, "score": 0, "last_activity_date": 1505326438, "creation_date": 1505326438, "answer_id": 46204311, "question_id": 46201826, "link": "https://stackoverflow.com/questions/46201826/changing-root-of-tree-and-pruning/46204311#46204311", "title": "Changing root of tree and pruning", "body": "<p>I think I found a solution...</p>\n\n<pre><code>void prune_tree(node** root, node* new_root)\n{\n    bool del = true;\n\n    if (*root == NULL)\n        return;\n\n    if (*root == new_root) {\n        del = false;\n    }\n\n    if (del){\n        prune_tree(&amp;(*root)-&gt;child, new_root);\n        prune_tree(&amp;(*root)-&gt;next, new_root);\n        free(*root);\n        *root = NULL;\n    }\n    else{\n        prune_tree(&amp;(*root)-&gt;next, new_root);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 6072864, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/091da849f1ba091343016612f2efd4ab?s=128&d=identicon&r=PG", "display_name": "user178831", "link": "https://stackoverflow.com/users/6072864/user178831"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 473, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1505349758, "creation_date": 1505317606, "last_edit_date": 1505319362, "question_id": 46201826, "link": "https://stackoverflow.com/questions/46201826/changing-root-of-tree-and-pruning", "title": "Changing root of tree and pruning", "body": "<p>I have an n-ary tree structure like what's explained in the answer <a href=\"http://stackoverflow.com/questions/29122456/how-to-create-a-n-ary-tree-in-c\">here</a>:</p>\n\n<pre><code>typedef struct node {\n    int ID;\n    struct node *child;   // points to (first) child\n    struct node *next;    // points to next node at same level (sibling)\n    struct node *parent;  // points to parent\n} node;\n</code></pre>\n\n<p>Nodes are created using <code>malloc</code>. </p>\n\n<p>I want to write a function that will change the root of the tree to another (specified) node, and deallocate the memory of all the nodes that - because of the change of root - are no longer part of the tree (i.e. if a node can't be tracked back via parents to the new root, it should be set to <code>NULL</code> and its memory should be deallocated). </p>\n\n<p>For instance, if this is my tree:</p>\n\n<pre><code>      1           \n     / \\\n    2   3        \n   / \\    \\\n  4  5     6      \n / \\\n7   8     \n</code></pre>\n\n<p>and I want to change the root from 1 to 3, then after calling the prune_tree function, the root will be 3 and the memory of every node other than 3 and 6 will have been deallocated.</p>\n\n<p>The closest I have come to solving my problem involves this function:</p>\n\n<pre><code>void prune_tree(node **root, node *new_root) {\n    if (*root == NULL || (*root)-&gt;parent == new_root)\n        return;\n\n    prune_tree(&amp;((*root)-&gt;child), new_root);\n    prune_tree(&amp;((*root)-&gt;next), new_root);\n\n    free(*root);\n    *root = NULL;\n}\n</code></pre>\n\n<p>and after calling this function I set </p>\n\n<pre><code>root = new_root;\n</code></pre>\n\n<p>I got here mostly by trial and error; in fact I'm not even sure why this works most of the time I test it. It also adds what's probably an unnecessary step of having to set the root to the new root address after calling the function. I assume there's a way I can modify the root address in the function, or return the new root address.</p>\n\n<p>I would think I don't need to worry about memory usage since the function is deallocating memory, but a time-efficient function is preferable. I'm not sure if that means I should steer away from recursion or not...</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 947, "user_id": 1053944, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/363b1bb1c9cd90a0ae14ace401289dbd?s=128&d=identicon&r=PG", "display_name": "morcillo", "link": "https://stackoverflow.com/users/1053944/morcillo"}, "edited": false, "score": 0, "creation_date": 1505317873, "post_id": 46201778, "comment_id": 79366655, "body": "If you try compiling it you&#39;ll probably get a few warnings telling you that you are calling an implicit function or something like that ... by putting extern on the file using rhe function then the linker KNOWS that it needas to link to that function ... that&#39;s why you sometimes create the prototypes for the functions in a header file ... so you include the header and the linker knows how to link everything ... have you lloked at queel_solar&#39;s code? it has a quite interesting use of extern and typedefs for creating an API"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 947, "user_id": 1053944, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/363b1bb1c9cd90a0ae14ace401289dbd?s=128&d=identicon&r=PG", "display_name": "morcillo", "link": "https://stackoverflow.com/users/1053944/morcillo"}, "edited": false, "score": 0, "creation_date": 1505318551, "post_id": 46201778, "comment_id": 79367107, "body": "@morcillo: Using a name without preceeding declaration is not allowed."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1505318688, "post_id": 46201778, "comment_id": 79367192, "body": "That&#39;s bad practice, but valid. <code>extern</code> is not required for a declaration, but  there are errors not recognised is you don&#39;t. Sems like some author(s) just copy/pasted and were a bit lazy not adding <code>extern</code>."}, {"owner": {"reputation": 947, "user_id": 1053944, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/363b1bb1c9cd90a0ae14ace401289dbd?s=128&d=identicon&r=PG", "display_name": "morcillo", "link": "https://stackoverflow.com/users/1053944/morcillo"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1505319360, "post_id": 46201778, "comment_id": 79367615, "body": "@Olaf good to know, so let if you don&#39;t mind I&#39;ll use this oportunity to learn. Does that mean that when I call a function without a prototype in a header or an extern and my compiler gives me a warning about it, but still links to the correct function ... then that&#39;s just the compiler that works that way? sorry for pestering you in the comment section"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 947, "user_id": 1053944, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/363b1bb1c9cd90a0ae14ace401289dbd?s=128&d=identicon&r=PG", "display_name": "morcillo", "link": "https://stackoverflow.com/users/1053944/morcillo"}, "edited": false, "score": 0, "creation_date": 1505321553, "post_id": 46201778, "comment_id": 79368897, "body": "@morcillo: You should learn what headers are and what not. It is completely irelevant if something is in an included header or pasted in the orinal text. And you have to have a function declared before you can use it. That is not related to the use of storage class specifiers. All this will be explained in a good C book. I&#39;d strongly recommend to get one if you are not sure. As a sidenote: a compiler does not link."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1505321595, "post_id": 46201778, "comment_id": 79368921, "body": "A singular advantage to using <code>extern</code> before a function declaration is textual.  I find it easier to find that header&#39;s functions/objects via a &quot;extern&quot; search.  As with such optional adornments, best to follow your group&#39;s coding standard concerning this issue."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1505321651, "post_id": 46201778, "comment_id": 79368949, "body": "@chux: It also reports if you have an <code>extern</code> declared function later <code>static</code> specified."}], "answers": [{"tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 1, "last_activity_date": 1505319343, "creation_date": 1505319343, "answer_id": 46202350, "question_id": 46201778, "link": "https://stackoverflow.com/questions/46201778/is-there-any-purpose-in-declaring-extern-on-specific-functions-only-then-not-on/46202350#46202350", "title": "Is there any purpose in declaring extern on specific functions only, then not on others (for compatibility)?", "body": "<blockquote>\n  <p>is this just an inconsistency or is it for some sort of (old) compiler compatibility reason?</p>\n</blockquote>\n\n<p>It's certainly an inconsistency in coding style. But this is harmless since both are equivalent.\nThe presence or absence of <code>extern</code> keyword for function declarations makes no difference - <code>extern</code> is optional for function declarations.</p>\n\n<hr>\n\n<p>On the other hand, <em>not</em> providing any declaration can lead to subtle bugs such as implicit function declarations (by the way,implicit declarations are not valid since C99 - <a href=\"https://stackoverflow.com/q/434763/1275169\">Are prototypes required for all functions in C89, C90 or C99?</a>) if the function defined in one compilation unit is used in other compilation unit(s). Using a header file to provide declarations across multiple compilation units is the common practice.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8585867"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 46202350, "answer_count": 1, "score": 3, "last_activity_date": 1505319343, "creation_date": 1505317450, "question_id": 46201778, "link": "https://stackoverflow.com/questions/46201778/is-there-any-purpose-in-declaring-extern-on-specific-functions-only-then-not-on", "title": "Is there any purpose in declaring extern on specific functions only, then not on others (for compatibility)?", "body": "<p>As I understand it, function prototypes are intrinsically <code>extern</code> and adding the keyword to them will not change functionality. I was looking at the source code for the Linux Kernel and came across the following:</p>\n\n<pre><code>extern bool console_suspend_enabled;\n\n/* Suspend and resume console messages over PM events */\nextern void suspend_console(void);\nextern void resume_console(void);\n\nint mda_console_init(void);\nvoid prom_con_init(void);\n\nvoid vcs_make_sysfs(int index);\nvoid vcs_remove_sysfs(int index);\n</code></pre>\n\n<p>As you can see, some functions have <code>extern</code> prefixed and some do not. This seemed to be present in a number of header files across the project making me wonder: is this just an inconsistency or is it for some sort of (old) compiler compatibility reason?</p>\n\n<p>Source: <a href=\"https://github.com/torvalds/linux/blob/master/include/linux/console.h#L188\" rel=\"nofollow noreferrer\">https://github.com/torvalds/linux/blob/master/include/linux/console.h#L188</a></p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 2, "creation_date": 1505316722, "post_id": 46201450, "comment_id": 79365829, "body": "1. Read the documentation carefully. 2. Print out <code>errno</code> and if possible <code>strerror(errno)</code>, what does it say? 3. Why do you think <code>.&#47;child</code> should be passed to <code>execvp()</code>? 3. What should the second paramter be? 4. Did you read the documentation? I don&#39;t think you did, because you would know what the 2nd parameter should be. Don&#39;t take bad, but please read the documentation before asking."}, {"owner": {"reputation": 2611, "user_id": 2319299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ad0ca993033b3191db773253a5a7cd6?s=128&d=identicon&r=PG", "display_name": "Matteo Ragni", "link": "https://stackoverflow.com/users/2319299/matteo-ragni"}, "edited": false, "score": 1, "creation_date": 1505316877, "post_id": 46201450, "comment_id": 79365935, "body": "It can be improvable (a lot of warnings by the compiler for the main...), but for me the code works."}, {"owner": {"reputation": 421, "user_id": 6703342, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9f1d3bdb1efccfb178568f7a251ef545?s=128&d=identicon&r=PG&f=1", "display_name": "Rubiks", "link": "https://stackoverflow.com/users/6703342/rubiks"}, "edited": false, "score": 0, "creation_date": 1505318636, "post_id": 46201450, "comment_id": 79367164, "body": "Can you think of any reason why it doesn&#39;t work for me? The child program never executes."}, {"owner": {"reputation": 2611, "user_id": 2319299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ad0ca993033b3191db773253a5a7cd6?s=128&d=identicon&r=PG", "display_name": "Matteo Ragni", "link": "https://stackoverflow.com/users/2319299/matteo-ragni"}, "edited": false, "score": 0, "creation_date": 1505318836, "post_id": 46201450, "comment_id": 79367282, "body": "But... is <code>child</code> in the same directory of the <code>main</code> executable (the one that forks)?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1505360204, "post_id": 46201450, "comment_id": 79383274, "body": "It is very unlikely that the &#39;code works&#39;.  the parameters to <code>execvp()</code> are not correct."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1505360452, "post_id": 46201450, "comment_id": 79383323, "body": "the function: <code>execvp()</code> does not return unless there is an error.  So no need to be checking the returned value.  infact, after the call there should be exactly two statements. <code>perror( &quot;execvp failed&quot; );  exit( EXIT_FAILURE );</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1505360586, "post_id": 46201450, "comment_id": 79383368, "body": "the function: <code>getpid()</code>  and the definition for <code>pid_t</code> are in the header file: <code>unistd.h</code>  which your code fails to include"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1505360681, "post_id": 46201450, "comment_id": 79383394, "body": "it is a very poor programming practice to <code>#include</code> header files those contents are not used.  Both the posted programs have: <code>#include &lt;string.h&gt;</code>  but nothing is used from the header file"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1505360719, "post_id": 46201450, "comment_id": 79383404, "body": "When the parameters from <code>main()</code> are not used, then the signature should be: <code>int main( void )</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1505360934, "post_id": 46201450, "comment_id": 79383461, "body": "regarding: <code>printf (&quot;Im the child&quot;);</code> the stream: <code>stdout</code> is buffered, so nothing is actually displayed on the users&#39; terminal until either: 1) an input statement is executed, 2) the buffer overflows 3) the statement <code>fflush( stdout );</code> is executed or 4)  a newline sequence is output or 5) the program exits. In this case, appending <code>\\n</code> to the end of the format string will fix the problem."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1505361105, "post_id": 46201450, "comment_id": 79383499, "body": "regarding: <code>printf(&quot;Execution failed&quot;);</code> 1) see my prior comment about stdout being buffered 2) error messages should be output to <code>stderr</code>, not <code>stdout</code> Suggest using: <code>perror( &quot;Execution failed&quot; );</code>  which will output the enclosed text and the matching text. selected by the current value of <code>errno</code>"}], "answers": [{"tags": [], "owner": {"reputation": 2611, "user_id": 2319299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ad0ca993033b3191db773253a5a7cd6?s=128&d=identicon&r=PG", "display_name": "Matteo Ragni", "link": "https://stackoverflow.com/users/2319299/matteo-ragni"}, "is_accepted": true, "score": 1, "last_activity_date": 1505321929, "last_edit_date": 1505321929, "creation_date": 1505319003, "answer_id": 46202261, "question_id": 46201450, "link": "https://stackoverflow.com/questions/46201450/cant-get-execvp-to-execute-file/46202261#46202261", "title": "Can&#39;t get execvp to execute file", "body": "<p>I actually don't know what you are doing wrong. After a copy and a compilation (and several warning complains) your code runs fine (GCC 7.2).</p>\n\n<p>Obviously, child must be in the same working directory in which you run your main executable (the one that forks).</p>\n\n<p>But probably I would write that code in this way, but I'm not an expert in forking:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;errno.h&gt;\n\nextern int errno;\n\nint main () {\n  pid_t pid = fork();\n\n  if (pid &lt; 0) {\n    fprintf(stderr, \"%s\\n\", strerror(errno));\n    return 1;\n  }\n\n  if (pid == 0) {\n   int ret = execl(\"./child\", \"\", (char *)NULL);\n   if(ret &lt; 0) {\n     fprintf(stderr, \"%s\\n\", strerror(errno));\n     return 1;\n   }\n  } else {\n    wait(NULL);\n  }\n  return 0;\n}\n</code></pre>\n\n<p>At least it tells you which error <code>execl</code> has encountered.</p>\n"}], "owner": {"reputation": 421, "user_id": 6703342, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9f1d3bdb1efccfb178568f7a251ef545?s=128&d=identicon&r=PG&f=1", "display_name": "Rubiks", "link": "https://stackoverflow.com/users/6703342/rubiks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 663, "favorite_count": 1, "accepted_answer_id": 46202261, "answer_count": 1, "score": 0, "last_activity_date": 1505321929, "creation_date": 1505316576, "last_edit_date": 1505317041, "question_id": 46201450, "link": "https://stackoverflow.com/questions/46201450/cant-get-execvp-to-execute-file", "title": "Can&#39;t get execvp to execute file", "body": "<p>I am trying to write a program that will fork, then open a file and execute it. The file it should execute is called child and it has been compiled. When I type ./child, it runs. However, when I run this program it does not execute the child program and I am prompted with the error message I put in \"Execution failed\". What I am doing wrong?</p>\n\n<p>This is my parent class</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/wait.h&gt;\n\n\n\nint main (int argc, char **argv)\n{ \n\npid_t parent = getpid();\npid_t pid = fork();\n\n\nif (pid == -1)\n{\n// error, failed to fork()\n} \nelse if (pid &gt; 0)\n{\nint status;\n waitpid(pid, &amp;status, 0);\n}\nelse \n{\n\nint var = execvp(\"./child\", NULL);\n\nif(var &lt; 0)\n{\n    printf(\"Execution failed\");\n}\n\n}\nexit(0);   // exec never returns\n}\n</code></pre>\n\n<p>This is the child</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n\nint main (int argc, char **argv)\n{   \nprintf (\"Im the child\");\nexit (0);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 2, "creation_date": 1505316465, "post_id": 46201378, "comment_id": 79365598, "body": "Debugger..........."}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1505316472, "post_id": 46201378, "comment_id": 79365606, "body": "Your indentation is all over the place, fix that first."}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1505316490, "post_id": 46201378, "comment_id": 79365619, "body": "And there is no C/C++, what language are you using?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1505316529, "post_id": 46201378, "comment_id": 79365646, "body": "Welcome to Stack Overflow! It sounds like you may need to learn how to use a debugger to step through your code. With a good debugger, you can execute your program line by line and see where it is deviating from what you expect. This is an essential tool if you are going to do any programming. Further reading: <a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>"}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1505316934, "post_id": 46201378, "comment_id": 79365971, "body": "<i>can i declare <code>while(temp = num)</code></i>  You can but it would not work. The <code>while</code> loop would never end. Or never start if <code>num == 0</code>."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8604235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fbcf6893f8325130c143ad32e0ba2d3?s=128&d=identicon&r=PG&f=1", "display_name": "IronVergil", "link": "https://stackoverflow.com/users/8604235/ironvergil"}, "edited": false, "score": 0, "creation_date": 1505320735, "post_id": 46202345, "comment_id": 79368386, "body": "using the debugger solved the problem thank you . If I add temp=num in the while() it made it endles"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "reply_to_user": {"reputation": 11, "user_id": 8604235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fbcf6893f8325130c143ad32e0ba2d3?s=128&d=identicon&r=PG&f=1", "display_name": "IronVergil", "link": "https://stackoverflow.com/users/8604235/ironvergil"}, "edited": false, "score": 0, "creation_date": 1505320881, "post_id": 46202345, "comment_id": 79368471, "body": "@IronVergil do you understand why <code>while(temp=num)</code> is an infinite loop in your case?"}], "tags": [], "owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "is_accepted": false, "score": 0, "last_activity_date": 1505319321, "creation_date": 1505319321, "answer_id": 46202345, "question_id": 46201378, "link": "https://stackoverflow.com/questions/46201378/while-loop-and-palindrome-of-a-number-in-a-given-range/46202345#46202345", "title": "While loop and palindrome of a number in a given range", "body": "<p>Your program likely isn't printing because you do not ever print the newline character <code>\\n</code> which will flush the buffer to stdout, nor are you manually flushing with <code>fflush()</code>. I would try flushing at the end of your loop, or if you do in fact need a new line, just print a new line with <code>printf(\"\\n\");</code></p>\n\n<p>In regards to setting temp = num at the start of your <code>while-loop</code>, you probably want to use another <code>for-loop</code> such as <code>for (temp = num; temp; temp/=10)</code>.</p>\n\n<p>Putting it all together, the tail end of your program may look like this:</p>\n\n<pre><code>for (num = min; num &lt;= max; num++)\n{\n    sum = 0;\n    for (temp = num; temp; temp/=10)\n    {\n        r = temp % 10;\n        sum = sum * 10 + r;\n    }\n    if (num == sum)\n        printf(\"%d \", num);\n}\nfflush(stdout);\nreturn 0;\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8604235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fbcf6893f8325130c143ad32e0ba2d3?s=128&d=identicon&r=PG&f=1", "display_name": "IronVergil", "link": "https://stackoverflow.com/users/8604235/ironvergil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 264, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1505319321, "creation_date": 1505316410, "last_edit_date": 1505317156, "question_id": 46201378, "link": "https://stackoverflow.com/questions/46201378/while-loop-and-palindrome-of-a-number-in-a-given-range", "title": "While loop and palindrome of a number in a given range", "body": "<p>In the following program  can i declare while(temp = num) instead of declaring temp=num; at first . I did try that the program executed without any errors but didnt print the values , I want to know why ?</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main()\n{\n    int num, r, sum, temp;\n    int min, max;\n\n    printf(\"Enter the minimum range: \"); // take minimum value to start\n    scanf(\"%d\", &amp;min);\n\n    printf(\"Enter the maximum range: \"); // max value to start`**enter code here**`\n    scanf(\"%d\", &amp;max);\n\n    printf(\"Palindrome numbers in given range are: \");\n    for (num = min; num &lt;= max; num++)\n    {\n        temp = num;\n        sum = 0;\n        while (temp)\n        {\n            r = temp % 10;\n            temp = temp / 10;\n            sum = sum * 10 + r;\n        }\n        if (num == sum)\n            printf(\"%d \", num);\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "data-structures", "queue"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 2, "creation_date": 1505319219, "post_id": 46201220, "comment_id": 79367522, "body": "If there&#39;s a problem with how you&#39;re initialising the queue surely we&#39;d need to see the <code>init</code> function that does that?"}, {"owner": {"reputation": 155, "user_id": 5783373, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4c3fe6cdd952a1496f843b3ecefa09b7?s=128&d=identicon&r=PG&f=1", "display_name": "Sri2110", "link": "https://stackoverflow.com/users/5783373/sri2110"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1505328179, "post_id": 46201220, "comment_id": 79372640, "body": "Yes, init function initializes the front and rear of queue with -1. I could not find whats wrong in it. Little help would be appreciated. @ChrisTurner"}], "answers": [{"comments": [{"owner": {"reputation": 155, "user_id": 5783373, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4c3fe6cdd952a1496f843b3ecefa09b7?s=128&d=identicon&r=PG&f=1", "display_name": "Sri2110", "link": "https://stackoverflow.com/users/5783373/sri2110"}, "edited": false, "score": 0, "creation_date": 1505382029, "post_id": 46207470, "comment_id": 79393884, "body": "Thanks @CostantinoGrana. This was the issue, &quot;pass the function the pointer itself, so q instead of &amp;q&quot;. Now the issue is completely resolved and its working fine."}, {"owner": {"reputation": 1975, "user_id": 6070341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHHZU.png?s=128&g=1", "display_name": "Costantino Grana", "link": "https://stackoverflow.com/users/6070341/costantino-grana"}, "reply_to_user": {"reputation": 155, "user_id": 5783373, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4c3fe6cdd952a1496f843b3ecefa09b7?s=128&d=identicon&r=PG&f=1", "display_name": "Sri2110", "link": "https://stackoverflow.com/users/5783373/sri2110"}, "edited": false, "score": 0, "creation_date": 1505407615, "post_id": 46207470, "comment_id": 79412046, "body": "@AspiringCoderNeo, if the answer is useful, mark it as so, so that other people is notified."}], "tags": [], "owner": {"reputation": 1975, "user_id": 6070341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHHZU.png?s=128&g=1", "display_name": "Costantino Grana", "link": "https://stackoverflow.com/users/6070341/costantino-grana"}, "is_accepted": false, "score": 1, "last_activity_date": 1505340052, "creation_date": 1505340052, "answer_id": 46207470, "question_id": 46201220, "link": "https://stackoverflow.com/questions/46201220/circular-queue-operations-using-array/46207470#46207470", "title": "Circular Queue Operations Using Array", "body": "<p>Your <code>print()</code> function always prints <code>q-&gt;data[q-&gt;r]</code> as its last operation. This makes no sense when your queue is empty. Maybe you can avoid it like this:</p>\n\n<pre><code>void print(myQueue *q)\n{\n    if (empty(q))\n      return;\n\n    int i;\n    for(i=q-&gt;f;i!=q-&gt;r;i=(i+1)%maxsize)\n    {\n        printf(\"%d\\n\",q-&gt;data[i]);\n    }\n    printf(\"%d\\n\",q-&gt;data[q-&gt;r]);\n}\n</code></pre>\n\n<p>Anyway there are many more problems with your code, which I doubt it is compiling correctly. Just as an example, the function <code>enqueue()</code> receives a parameter of type <code>myQueue*</code>. Then it provides function empty with the address of it, but this is wrong. you have to pass the function the pointer itself, so <code>q</code> instead of <code>&amp;q</code>. The same mistake is repeated over and over again.</p>\n"}, {"tags": [], "owner": {"reputation": 155, "user_id": 5783373, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4c3fe6cdd952a1496f843b3ecefa09b7?s=128&d=identicon&r=PG&f=1", "display_name": "Sri2110", "link": "https://stackoverflow.com/users/5783373/sri2110"}, "is_accepted": true, "score": 0, "last_activity_date": 1505382676, "creation_date": 1505382676, "answer_id": 46215881, "question_id": 46201220, "link": "https://stackoverflow.com/questions/46201220/circular-queue-operations-using-array/46215881#46215881", "title": "Circular Queue Operations Using Array", "body": "<blockquote>\n  <p>1st Code Snippet requiring change:</p>\n</blockquote>\n\n<pre><code>void enqueue(myQueue *q,int num)\n{\n</code></pre>\n\n<blockquote>\n  <p>The below line is changed.</p>\n</blockquote>\n\n<pre><code>    if(empty(q)==1)\n     {\n      q-&gt;f=0;\n      q-&gt;r=0;\n     }\n    else\n     {\n      q-&gt;r=(q-&gt;r+1)%maxsize;\n     }\n q-&gt;data[q-&gt;r]=num;\n printf(\"\\n%d is enqueued\\n\",q-&gt;data[q-&gt;r]);\n}\n</code></pre>\n\n<blockquote>\n  <p>2nd code snippet requiring changed:</p>\n</blockquote>\n\n<pre><code>void dequeue(myQueue *q)\n {\n  int del_num;\n  del_num=q-&gt;data[q-&gt;f];\n  if(q-&gt;f==q-&gt;r)\n   {\n</code></pre>\n\n<blockquote>\n  <p>Line below is changed.</p>\n</blockquote>\n\n<pre><code>    init(q);\n   }\n  else\n   {  //To move front to the next position in the circular array.\n    q-&gt;f=(q-&gt;f+1)%maxsize;\n   }\n   printf(\"\\n%d is dequeued\\n\",del_num);\n }\n</code></pre>\n\n<blockquote>\n  <p>3rd snippet requiring change:</p>\n</blockquote>\n\n<pre><code>void print(myQueue *q)\n {\n  int i;\n</code></pre>\n\n<blockquote>\n  <p>Line below is changed.</p>\n</blockquote>\n\n<pre><code>  if(empty(q))\n  {\n    printf(\"Queue empty\");\n    exit(0);\n  }\n  else\n  {\n   printf(\"Printing current queue: \\n\");\n   for(i=q-&gt;f;i!=q-&gt;r;i=(i+1)%maxsize)\n   {\n    printf(\"%d\\n\",q-&gt;data[i]);\n   }\n   printf(\"%d\\n\",q-&gt;data[q-&gt;r]);\n  }\n }\n</code></pre>\n\n<blockquote>\n  <p>That makes it perfectly alright. :)</p>\n</blockquote>\n"}], "owner": {"reputation": 155, "user_id": 5783373, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4c3fe6cdd952a1496f843b3ecefa09b7?s=128&d=identicon&r=PG&f=1", "display_name": "Sri2110", "link": "https://stackoverflow.com/users/5783373/sri2110"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 843, "favorite_count": 0, "accepted_answer_id": 46215881, "answer_count": 2, "score": 0, "last_activity_date": 1505382676, "creation_date": 1505315936, "last_edit_date": 1592644375, "question_id": 46201220, "link": "https://stackoverflow.com/questions/46201220/circular-queue-operations-using-array", "title": "Circular Queue Operations Using Array", "body": "<blockquote>\n<p>Code shows basic operations on Circular Queue.</p>\n</blockquote>\n<pre><code>#define maxsize 10\ntypedef struct queue\n{\n    int data[maxsize];\n    int f,r;\n}myQueue;\nmyQueue q;  \n\nvoid init(myQueue *q);\nint full(myQueue *q);\nint empty(myQueue *q);\nvoid enqueue(myQueue *q,int num);\nvoid dequeue(myQueue *q);\nvoid print(myQueue *q);\n\nvoid main()\n{\n    init(&amp;q);\n    int op;\n    do\n    {\n        printf(&quot;\\nCircular queue operations: Press:\\n&quot;);\n        printf(&quot;1 for enqueue\\n&quot;);\n        printf(&quot;2 for dequeue\\n&quot;);\n        printf(&quot;3 to print Circular Queue\\n&quot;);\n\n        int num,choice;\n        printf(&quot;\\nEnter choice:\\n&quot;);\n        scanf(&quot;%d&quot;,&amp;choice);\n        switch(choice)\n        {\n             case 1: printf(&quot;Enter number to insert :\\n&quot;);\n                     scanf(&quot;%d&quot;,&amp;num);\n                     if(full(&amp;q))\n                     {\n                         printf(&quot;\\nQueue is full\\n&quot;);\n                         exit(0);\n                     }\n                     enqueue(&amp;q,num);\n                     break;\n             case 2: if(empty(&amp;q))\n                     {\n                         printf(&quot;\\nQueue is empty\\n&quot;);\n                         exit(0);\n                     }\n                     dequeue(&amp;q);\n                     break;\n             case 3: printf(&quot;Printing current queue: \\n&quot;);\n                     print(&amp;q);\n                     break;\n             default:break;\n        }\n        printf(&quot;Press 1 to continue or 0 to exit:\\n&quot;);\n        scanf(&quot;%d&quot;,&amp;op);\n    }\n    while(op);\n}\n\nvoid init(myQueue *q)\n{\n    q-&gt;f=-1;\n    q-&gt;r=-1;\n}\n\nint full(myQueue *q)\n{\n    if((q-&gt;r+1)%maxsize==q-&gt;f)\n    {\n        return 1;\n    }\n    else\n        return 0;\n}\n\nint empty(myQueue *q)\n{\n    if(q-&gt;r==-1)\n    {\n        return 1;\n    }\n    else\n        return 0;\n}   \n</code></pre>\n<blockquote>\n<p>enqueue function is used to add the elements into queue.</p>\n</blockquote>\n<pre><code>void enqueue(myQueue *q,int num)\n{\n    if(empty(&amp;q))\n    {\n        q-&gt;f=0;\n        q-&gt;r=0;\n    }\n    else\n    {\n        q-&gt;r=(q-&gt;r+1)%maxsize;\n    }\n    q-&gt;data[q-&gt;r]=num;\n    printf(&quot;\\n%d is enqueued\\n&quot;,q-&gt;data[q-&gt;r]);\n}\n</code></pre>\n<blockquote>\n<p>Dequeue function is used to delete elements from the stack.</p>\n</blockquote>\n<pre><code>void dequeue(myQueue *q)\n{\n    int del_num;\n    del_num=q-&gt;data[q-&gt;f];\n    if(q-&gt;f==q-&gt;r)\n    {\n        init(&amp;q);\n    }\n    else\n    {  //To move front to the next position in the circular array.\n        q-&gt;f=(q-&gt;f+1)%maxsize;\n    }\n    printf(&quot;\\n%d is dequeued\\n&quot;,del_num);\n}\n\nvoid print(myQueue *q)\n{\n    int i;\n    for(i=q-&gt;f;i!=q-&gt;r;i=(i+1)%maxsize)\n    {\n        printf(&quot;%d\\n&quot;,q-&gt;data[i]);\n    }\n    printf(&quot;%d\\n&quot;,q-&gt;data[q-&gt;r]);\n}\n    \n</code></pre>\n<blockquote>\n<p>Issue: Circular queue is automatically enqueuing the 0 element in it initially.\nHowever, rest of the operations are working just fine.</p>\n<p>I am not able to identify, why it is automatically inserting 0 in the circular queue, without me enqueuing it.</p>\n</blockquote>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1505313671, "post_id": 46200413, "comment_id": 79363588, "body": "and what is the result you&#39;re getting? seems to work for me (I replaced the random by <code>444444</code> to see clearly"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1505313968, "post_id": 46200413, "comment_id": 79363815, "body": "Your cast to <code>int *</code> invokes undefined behaviour. Why don&#39;t you use 2D indexing? nd format this mess properly. It is newr unreadable."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1505314057, "post_id": 46200413, "comment_id": 79363890, "body": "@Olaf: I wouldn&#39;t say so. As opposed to array of pointers, 2D arrays are contiguous. Casting to <code>int *</code> is okay."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1505314271, "post_id": 46200413, "comment_id": 79364061, "body": "@Jean-Fran&#231;oisFabre: Please read the standard. It clearly violates effective type (aka strict aliasing) rule. Things would be different for a proper expression yielding <code>int *</code>!"}, {"owner": {"reputation": 1, "user_id": 8603930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EmkGM.png?s=128&g=1", "display_name": "Nick O.", "link": "https://stackoverflow.com/users/8603930/nick-o"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1505314570, "post_id": 46200413, "comment_id": 79364279, "body": "@Jean-Fran&#231;oisFabre : Thanks, but it only fills the 2nd column with random. I wanted to fill it with 0. And by setting j=1;j&lt;25;j=j+5 , i also filled with 0 all the other columns."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1505314725, "post_id": 46200413, "comment_id": 79364425, "body": "@Olaf okay. So how do you propose to cast <code>b</code> to a 1D pointer properly? I can&#39;t seem to find a way."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1505314959, "post_id": 46200413, "comment_id": 79364571, "body": "@Jean-Fran&#231;oisFabre Why cast at all?? Never ever cast if there is a compliant way without. Think what the line is soppused to do. <b>Thhen</b> how it can be achieved. The solution is very obvious, just step back."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1505315000, "post_id": 46200413, "comment_id": 79364594, "body": "@Olaf: 1D array isn&#39;t useful here. I didn&#39;t understand that at first. I changed my answer. Not sure it is very useful now."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1505315084, "post_id": 46200413, "comment_id": 79364653, "body": "@Jean-Fran&#231;oisFabre That&#39;s another issue, yes. But even iff, there was a way (I dont see it makes much sense in good code unless you use <code>mem*</code>, though). Just use nested loops and leave optimisations to the compiler. It might even generate code for a single loop. But after all, it** knows what it does."}], "answers": [{"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 1, "last_activity_date": 1505314962, "last_edit_date": 1505314962, "creation_date": 1505313831, "answer_id": 46200523, "question_id": 46200413, "link": "https://stackoverflow.com/questions/46200413/how-do-i-fill-specific-columns-in-a-mutlidimensional-array-in-c/46200523#46200523", "title": "How do i fill specific columns in a mutlidimensional array in C?", "body": "<p>your loop is filling random numbers every other value, since you're incrementing by 2, in the \"flattened\" array. You can't keep track of the current row or column like this (or you have to use modulo, well, better stick to the 2D array in that case...)</p>\n\n<p>The simplest way is to pick one column out of two, for each row (drop this 1D pointer idea that isn't useful here)</p>\n\n<pre><code> for (i=0;i&lt;5;i++)\n {\n    for (j=0;j&lt;5;j+=2)\n    {\n       b[i][j] = 44444; // let's fix the value just to see clearly\n    }\n }\n</code></pre>\n\n<p>I've made the test (and fixed the value so I see what's modified):</p>\n\n<pre><code>44444   0       44444   0       44444\n44444   0       44444   0       44444\n44444   0       44444   0       44444\n44444   0       44444   0       44444\n44444   0       44444   0       44444\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8603930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EmkGM.png?s=128&g=1", "display_name": "Nick O.", "link": "https://stackoverflow.com/users/8603930/nick-o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 46200523, "answer_count": 1, "score": -3, "last_activity_date": 1505316047, "creation_date": 1505313561, "last_edit_date": 1505316047, "question_id": 46200413, "link": "https://stackoverflow.com/questions/46200413/how-do-i-fill-specific-columns-in-a-mutlidimensional-array-in-c", "title": "How do i fill specific columns in a mutlidimensional array in C?", "body": "<p>I want to fill the 2nd and 4th columns with zeros. I have achieved this so far, but i can't figure out why. In main i tried to fill the whole array with zeros. In random1 i tried to fill specific cells with random numbers. I used the <code>for (j=0;j&lt;25;j=j+2)</code> in order to fill every second column with the random numbers, but still haven't achieved it. Can anyone help? Thanks in advance!</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\n//int random1 (int );\n\nint random1 (int b[5][5])\n{\n   int i,j;\n   int *onedim = (int *)b; \n   srand(time(NULL));  \n   for (j = 0; j &lt; 25; j = j + 2)\n       onedim[j] = rand() % 19 - 9; \n   for (i = 0; i &lt; 5; i++)\n   {\n       for(j = 0; j &lt; 5; j++)\n       {\n           printf(\"%d\\t\", b[i][j]);\n       }\n       printf(\"\\n\");   \n   }\n   return 0;\n}\n\nint main (int argc, char **argv)\n{\n    int i, j;\n    int a[5][5];\n    for(i = 0; i &lt; 5; i++)\n        for(j = 0; j &lt; 5; j++)\n        {\n            a[i][j] = 0;\n        }\n    random1(a);\n    return(EXIT_SUCCESS);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1505313605, "post_id": 46200402, "comment_id": 79363537, "body": "C? C#? Neither are scripts. Or the mysterious #C is?"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1505313754, "post_id": 46200402, "comment_id": 79363659, "body": "You should show the script in your question. I won&#39;t call a C or C# source file a script (and you need also to show how exactly you have compiled it). So <b>edit your question</b> (source code lines need to be prefixed by four spaces) to improve it a lot"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 2, "creation_date": 1505313840, "post_id": 46200402, "comment_id": 79363719, "body": "This question has nothing to do with <a href=\"https://stackoverflow.com/questions/tagged/c\">c</a>, it&#39;s a ubuntu specific question. Please read about <a href=\"http://www.devdungeon.com/content/creating-systemd-service-files\" rel=\"nofollow noreferrer\">systemd services</a>. Also, there are no <a href=\"https://stackoverflow.com/questions/tagged/c\">c</a> scripts, <a href=\"https://stackoverflow.com/questions/tagged/c\">c</a> is a compiled language. And a &quot;<i>startup</i>&quot; program can be in principle, any executable file, whether it&#39;s a shell script or a compiled c program. Also, C# if that&#39;s what you mean is a Windows specific language, it can work on linux AFAIK but it&#39;s not very common to see C# programs on linux."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1505313856, "post_id": 46200402, "comment_id": 79363730, "body": "C is not a scripting language, so can&#39;t be. I did not find a tag for &quot;#C&quot;. Is that some new scripting variant of C#? Some replacement for VBA?"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1505313949, "post_id": 46200402, "comment_id": 79363800, "body": "@Olaf: With <a href=\"https://en.wikipedia.org/wiki/Tiny_C_Compiler\" rel=\"nofollow noreferrer\">TinyC</a> compiler, you can (or could) write a script in C (starting with <code>#!&#47;usr&#47;bin&#47;tcc -run</code>..) but of course I don&#39;t recommend doing that"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1505314176, "post_id": 46200402, "comment_id": 79363984, "body": "@BasileStarynkevitch: It still would be a program, as much as Python is a full programing language. The difference is whether the code is stand-along (or just run by the interpreter) or loaded for a larger program. Hence Sconstruct files for SCons are scripts, despite being Python code, while SCOns itself is a program."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1505314233, "post_id": 46200402, "comment_id": 79364034, "body": "@Olaf: It  depends upon how you define a script (or a scripting language). YMMV. For example, I believe that both <a href=\"https://www.gnu.org/software/bash/\" rel=\"nofollow noreferrer\">bash</a> and <a href=\"https://scsh.net/\" rel=\"nofollow noreferrer\">scsh</a> are used as scripting language (but the later is much closer to what you call a programming language)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1505314427, "post_id": 46200402, "comment_id": 79364166, "body": "@BasileStarynkevitch yes, but the standalone criterion with only a runtime sounds reasonable. Even when compiled most languages have some runtime, including C (crt). For interpreted languages, that would be the interpreter."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1505314465, "post_id": 46200402, "comment_id": 79364198, "body": "And what about SBCL ?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1505314621, "post_id": 46200402, "comment_id": 79364321, "body": "Idk this language. If the criterionms apply, it might be. Oh, I forgot the most important: Turing-completeness, of course. I&#39;m open for a better def, though. I&#39;m just cery clear about C and Python, Ruby, etc. being PLs."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1505379625, "post_id": 46200402, "comment_id": 79392161, "body": "Even with the edit, the question remains unclear. Perhaps editing your <a href=\"http://man7.org/linux/man-pages/man5/crontab.5.html\" rel=\"nofollow noreferrer\">crontab</a> with a <code>@reboot</code> entry could be enough. BTW, I would recommend using <a href=\"http://man7.org/linux/man-pages/man3/syslog.3.html\" rel=\"nofollow noreferrer\">syslog</a> in your C program (because its <i>stdout</i> is likely to be lost, e.g. to <code>&#47;dev&#47;null</code> ....). Read also <a href=\"http://advancedlinuxprogramming.com/\" rel=\"nofollow noreferrer\">advancedlinuxprogramming.com</a> to get a better understanding"}], "answers": [{"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 2, "last_activity_date": 1505400188, "last_edit_date": 1505400188, "creation_date": 1505380260, "answer_id": 46214975, "question_id": 46200402, "link": "https://stackoverflow.com/questions/46200402/run-a-c-program-at-startup-red-pitaya/46214975#46214975", "title": "run a C program at startup [Red Pitaya]", "body": "<p>There are several ways to have a program running at startup, and it depends upon your <a href=\"https://en.wikipedia.org/wiki/Init\" rel=\"nofollow noreferrer\">init</a> subsystem (are you using <a href=\"https://en.wikipedia.org/wiki/Systemd\" rel=\"nofollow noreferrer\">systemd</a> or a SysV-style init?).</p>\n\n<p>BTW, a source program in C is not a <a href=\"https://en.wikipedia.org/wiki/Scripting_language\" rel=\"nofollow noreferrer\">script</a> and you generally compile it (using <code>gcc -Wall -Wextra -g</code>) into some <a href=\"https://en.wikipedia.org/wiki/Executable\" rel=\"nofollow noreferrer\">executable</a>. In your case, you probably want to set up its <a href=\"https://en.wikipedia.org/wiki/Rpath\" rel=\"nofollow noreferrer\">rpath</a> at build time (in particular to avoid the <code>LD_LIBRARY_PATH</code> madness), perhaps by passing something like <code>-Wl,-rpath,/opt/redpitaya/lib</code> to your linking <code>gcc</code> command. </p>\n\n<p>Perhaps a  <a href=\"http://man7.org/linux/man-pages/man5/crontab.5.html\" rel=\"nofollow noreferrer\">crontab(5)</a> entry with <code>@reboot</code>  could be enough.</p>\n\n<p>Whatever way you are starting your program at startup time, it generally is the case that its <em>stdin</em>, <em>stdout</em>, <em>stderr</em> streams are redirected (e.g. to <code>/dev/null</code>, see <a href=\"http://man7.org/linux/man-pages/man4/null.4.html\" rel=\"nofollow noreferrer\">null(4)</a>) or not available. So it is likely that your <code>printf</code> output go nowhere. You might redirect stdout in your script, and I would recommend using <a href=\"http://man7.org/linux/man-pages/man3/syslog.3.html\" rel=\"nofollow noreferrer\">syslog(3)</a> in your C program, and <a href=\"http://man7.org/linux/man-pages/man1/logger.1.html\" rel=\"nofollow noreferrer\">logger(1)</a> in your shell script (then look also into some <code>*.log</code> file under <code>/var/log/</code>). BTW, its environment is not the same as in some interactive shell (see <a href=\"http://man7.org/linux/man-pages/man7/environ.7.html\" rel=\"nofollow noreferrer\">environ(7)</a>...), so your program is probably failing very early (perhaps at dynamic linking time, see <a href=\"http://man7.org/linux/man-pages/man8/ld-linux.8.html\" rel=\"nofollow noreferrer\">ld-linux.so(8)</a>, since  <code>LD_LIBRARY_PATH</code> might not be set to what you want it to be...).</p>\n\n<p>You should consider handing program arguments in your C program (perhaps with <a href=\"http://man7.org/linux/man-pages/man3/getopt_long.3.html\" rel=\"nofollow noreferrer\">getopt_long(3)</a>) and might perhaps have some option (e.g. <code>--daemonize</code>)  which would call <a href=\"http://man7.org/linux/man-pages/man3/daemon.3.html\" rel=\"nofollow noreferrer\">daemon(3)</a>.</p>\n\n<p>You certainly should read <a href=\"http://advancedlinuxprogramming.com/\" rel=\"nofollow noreferrer\"><em>Advanced Linux Programming</em></a> or something similar.</p>\n\n<p>I recommend to first be able to successfully build then run some \"hello-world\" like program at startup which uses <a href=\"http://man7.org/linux/man-pages/man3/syslog.3.html\" rel=\"nofollow noreferrer\">syslog(3)</a>. Later on, you could improve that program to make it work with your Red Pitaya thing.</p>\n"}], "owner": {"reputation": 1, "user_id": 8591667, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9beRR.jpg?s=128&g=1", "display_name": "urih", "link": "https://stackoverflow.com/users/8591667/urih"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 614, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1505400188, "creation_date": 1505313526, "last_edit_date": 1505385348, "question_id": 46200402, "link": "https://stackoverflow.com/questions/46200402/run-a-c-program-at-startup-red-pitaya", "title": "run a C program at startup [Red Pitaya]", "body": "<p>I have a C program that needs to run when I turn on my machine (Red Pitaya).\nthe beginning of the program presented here: </p>\n\n<pre><code>//my_test program\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include \"redpitaya/rp.h\"\n\nint main(int argc, char **argv){\n\n    int jj=1;\n\nwhile(1) {\n\nprintf(\"Ready for experiment number %i\\n\",jj);\n\n    int i, D;\n    int32_t TrigDly;\n</code></pre>\n\n<p>and so on...</p>\n\n<p>the program is executable with a run.sh file called <code>uri_test.sh</code>, that contains the following:</p>\n\n<pre><code>cat /opt/redpitaya/fpga/fpga_0.94.bit&gt;/dev/xdevcfg\nLD_LIBRARY_PATH=/opt/redpitaya/lib ./my_test\n</code></pre>\n\n<p>both files are located in a directory under /root. the program is working perfectly when run manually on PuTTY terminal-</p>\n\n<pre><code>/RedPitaya/Examples/C/Uri# ./my_test\n</code></pre>\n\n<p>or</p>\n\n<pre><code>/RedPitaya/Examples/C/Uri# ./uri_test.sh\n</code></pre>\n\n<p>I tried to follow the solution presented here : </p>\n\n<p><a href=\"https://askubuntu.com/questions/9853/how-can-i-make-rc-local-run-on-startup\">https://askubuntu.com/questions/9853/how-can-i-make-rc-local-run-on-startup</a></p>\n\n<p>without success. \nany suggestions? Thank you.</p>\n"}, {"tags": ["c", "mutex", "shared-memory"], "comments": [{"owner": {"reputation": 434, "user_id": 2735402, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iuaLK.png?s=128&g=1", "display_name": "flederwiesel", "link": "https://stackoverflow.com/users/2735402/flederwiesel"}, "edited": false, "score": 4, "creation_date": 1505312591, "post_id": 46199982, "comment_id": 79362793, "body": "Aren&#39;t pthreads for <i>thread</i> synchronisation - instead of processes? I think you should use other means of locking here (semaphores i.e)."}, {"owner": {"reputation": 1252, "user_id": 5057449, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e61f47a00cc4f5402872e1bdfb6e967d?s=128&d=identicon&r=PG&f=1", "display_name": "GPS", "link": "https://stackoverflow.com/users/5057449/gps"}, "edited": false, "score": 0, "creation_date": 1505313677, "post_id": 46199982, "comment_id": 79363593, "body": "See this: <a href=\"https://stackoverflow.com/a/2390670/694576\">stackoverflow.com/a/2390670/694576</a>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1505315297, "post_id": 46199982, "comment_id": 79364777, "body": "Where do you initialize the mutex?"}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 1, "creation_date": 1505316113, "post_id": 46199982, "comment_id": 79365330, "body": "Are you expecting two different anonymous mmaps to point to the same memory?"}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1505322418, "post_id": 46199982, "comment_id": 79369367, "body": "Not only the mutex must be initialized, special care must also be taken that it might be shared between processes and not only threads. Read the man page for <code>pthread_mutex_init</code> and <code>pthread_mutex_attr_setpshared</code>."}], "owner": {"reputation": 16, "user_id": 8072670, "user_type": "registered", "profile_image": "https://graph.facebook.com/1548429401865755/picture?type=large", "display_name": "Cristobal Eyzaguirre", "link": "https://stackoverflow.com/users/8072670/cristobal-eyzaguirre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 216, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1505312346, "creation_date": 1505312346, "question_id": 46199982, "link": "https://stackoverflow.com/questions/46199982/shared-memory-mutex-bug-in-c", "title": "Shared memory mutex bug in C", "body": "<p>When running this code the mutex (stored in shared memory between processes) permits the print to run twice.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;sys/mman.h&gt;\n\nint main(){\n    int* shared = mmap(NULL, sizeof(int), PROT_READ | PROT_WRITE, MAP_ANON | MAP_SHARED, -1, 0);\n    pthread_mutex_t* mutex = mmap(NULL, sizeof(pthread_mutex_t), PROT_READ | PROT_WRITE, MAP_ANON | MAP_SHARED, -1, 0);\n\n    int cores = 2;\n    int is_son = 0;\n    for (int core=0; core&lt;cores; core++){\n        if (!fork()){   // is son\n            is_son++;\n            printf(\"new son\\n\");\n            break;\n        }\n    }\n    if (is_son){    // only run if is son\n        printf(\"got here\\n\");\n        pthread_mutex_lock(mutex);\n        if (!*shared){\n            *shared = 1;\n            printf(\"is in (should only print once)\\n\");\n        }\n        pthread_mutex_unlock(mutex);\n        printf(\"left\\n\");\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Example output of wrong behaviour:\n<a href=\"https://i.stack.imgur.com/IRhQ0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IRhQ0.png\" alt=\"Example output of wrong behaviour\"></a></p>\n\n<p>Explanation of the code:\nWe store in shared memory a boolean called shared and a mutex.\nTwo slave processes are created. Both try to run the print function, but only one should be permitted to do so.\nThe mutex is there so only one can enter the protected code at a time, and change shared's value to one, so that the next cant enter.</p>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1505311709, "post_id": 46199653, "comment_id": 79362084, "body": "I guess it was just one of these design decision that were taken for the &quot;why not?&quot; reason."}, {"owner": {"reputation": 883, "user_id": 2662833, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f1151e7fb82fac61494f2f36a3a04ddd?s=128&d=identicon&r=PG", "display_name": "user2662833", "link": "https://stackoverflow.com/users/2662833/user2662833"}, "edited": false, "score": 0, "creation_date": 1505312019, "post_id": 46199653, "comment_id": 79362318, "body": "As far as I know, pointing beyond the last element isn&#39;t inherently an error either. I mean using clang, I can run <code>int main (void) { int hi[3] = {1, 2, 3}; printf(&quot;%d&quot;, hi[9]); }</code> and it will just point to the spot of memory that is 9 * sizeof(int) right of the current position. Some runners have safeguards against this and will throw an error if unallocated memory is accessed, but that depends on your platform."}, {"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "reply_to_user": {"reputation": 883, "user_id": 2662833, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f1151e7fb82fac61494f2f36a3a04ddd?s=128&d=identicon&r=PG", "display_name": "user2662833", "link": "https://stackoverflow.com/users/2662833/user2662833"}, "edited": false, "score": 1, "creation_date": 1505312083, "post_id": 46199653, "comment_id": 79362373, "body": "@user2662833: Your code is undefined behavior, and so is pointing to one before the beginning of an array.  Such code can&#39;t be trusted to do (or not do) anything."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 883, "user_id": 2662833, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f1151e7fb82fac61494f2f36a3a04ddd?s=128&d=identicon&r=PG", "display_name": "user2662833", "link": "https://stackoverflow.com/users/2662833/user2662833"}, "edited": false, "score": 1, "creation_date": 1505312136, "post_id": 46199653, "comment_id": 79362420, "body": "@user2662833 I guess the question here is about pointer arithmetic rules, which state that if a result of such an arithmetic is a pointer outside an object or one element past it&#39;s end, the behavior is undefined. It i not even talking about dereferencing."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 883, "user_id": 2662833, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f1151e7fb82fac61494f2f36a3a04ddd?s=128&d=identicon&r=PG", "display_name": "user2662833", "link": "https://stackoverflow.com/users/2662833/user2662833"}, "edited": false, "score": 1, "creation_date": 1505312166, "post_id": 46199653, "comment_id": 79362450, "body": "@user2662833 Your example invokes undefined behavior. &quot;Seems to work fine&quot; is one form of undefined behavior. For example, if there happens to be a variable there at <code>hi[9]</code> and you modify it by an array out of bounds access, the compiler is free to assume that the array is not modified (even though you just did that) and optimize the code accordingly, leading to very strange bugs."}, {"owner": {"reputation": 89, "user_id": 2422332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cd48a6e11ab4a0909373a898e1f9e2f?s=128&d=identicon&r=PG", "display_name": "Pablo M. S. Farias", "link": "https://stackoverflow.com/users/2422332/pablo-m-s-farias"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1505312283, "post_id": 46199653, "comment_id": 79362536, "body": "@EugeneSh., I understand that traversing an array backwards is (much) less common than doing it forwards, but it is useful nevertheless. Since it is a matter of symmetry, it surprises me that this is not allowed in the language."}, {"owner": {"reputation": 883, "user_id": 2662833, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f1151e7fb82fac61494f2f36a3a04ddd?s=128&d=identicon&r=PG", "display_name": "user2662833", "link": "https://stackoverflow.com/users/2662833/user2662833"}, "edited": false, "score": 0, "creation_date": 1505312309, "post_id": 46199653, "comment_id": 79362559, "body": "Yep I realise it&#39;s undefined behaviour; but I&#39;m just stating that it won&#39;t cause an error on all systems. Basically, any area outside the three allocated ints isn&#39;t guaranteed to contain anything in particular."}, {"owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "reply_to_user": {"reputation": 883, "user_id": 2662833, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f1151e7fb82fac61494f2f36a3a04ddd?s=128&d=identicon&r=PG", "display_name": "user2662833", "link": "https://stackoverflow.com/users/2662833/user2662833"}, "edited": false, "score": 1, "creation_date": 1505312376, "post_id": 46199653, "comment_id": 79362617, "body": "@user2662833 if it would cause error on all systems, it wouldn&#39;t be <i>undefined</i> behavior."}, {"owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "edited": false, "score": 1, "creation_date": 1505312530, "post_id": 46199653, "comment_id": 79362727, "body": "@PabloM.S.Farias what if you end up with negative value? (fairly improbable, I know)"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 5, "creation_date": 1505312551, "post_id": 46199653, "comment_id": 79362752, "body": "A one-past-last pointer points to the byte right next after the last byte of the array. A one-before-first pointer would point to <code>sizeof element</code>th byte before the first byte of the array. Arrays may be located at the very beginning of memory or segment, so your pointer subtraction will overflow and comparisons will be off. In order to prevent that you would have to reserve an entire element worth of bytes, which is not acceptable as far as C goes. You can decide you want an extra element and declare the array accordingly, but C won&#39;t force it on you."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1505312607, "post_id": 46199653, "comment_id": 79362809, "body": "Seg faults etc is not the only problem that out of bounds could cause. Example: <code>int array[2]; int x=0; array[2] = 1; if(x!=0) { do_stuff(); }</code>. The compiler is free to optimize away the call to <code>do_stuff()</code> since it can deduce that <code>x</code> was never changed by your program. Even if <code>array[2]</code> happened to actually write to the memory location of <code>x</code>. This is because <code>array</code> does not alias <code>x</code>, the compiler will regard them as unrelated variables. GCC in particular is known to often make such assumptions."}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 1, "creation_date": 1505317034, "post_id": 46199653, "comment_id": 79366041, "body": "For the compiler it&#39;s quite easy to add a bit of headroom or alignment at the end of an array to allow beyond-limits-access. It is relatively impossible to do the same at the beginning (as the first element of the array may be required to use the first address of an enclosing data structure or even at the beginning of an allocated page)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1505326477, "post_id": 46199653, "comment_id": 79371638, "body": "@n.m. Your comment is worthy of an answer - very good reasoning."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1505328853, "post_id": 46199653, "comment_id": 79373006, "body": "One can also approach the asymmetry this way. A pointer points to the beginning (the first byte) of an object, not to its end. Incrementing a pointer is akin to sweeping it across the pointed-to object. A symmetric construct would be an anti-pointer that points to the last byte of an object. But we don&#39;t really need this: instead of an anti-pointer we can use <code>pointer+1</code> that points to the beginning of the next object, or one byte past the end of the array."}], "answers": [{"comments": [{"owner": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 2, "creation_date": 1505311922, "post_id": 46199810, "comment_id": 79362244, "body": "No common situation, you can easily contrive to come up with some situation in which it makes some amount of sense."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 0, "creation_date": 1505312075, "post_id": 46199810, "comment_id": 79362365, "body": "@pvg Not really, since the memory layout is only guaranteed to be contiguous for arrays (not guaranteed for structs etc). The only time it would make sense to access one item before would be a 2D array, but then you&#39;d rather do that by accessing the last item of the previous array, instead of the &quot;[-1]&quot; index."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 3, "creation_date": 1505312219, "post_id": 46199810, "comment_id": 79362483, "body": "This pattern was invented way before C++ or STL, and most probably will stay here long after C++ and STL both hit the dustbin of history."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 5, "creation_date": 1505312223, "post_id": 46199810, "comment_id": 79362486, "body": "It would be possible to write a loop that iterates in reverse over elements of an array, in which case (to use the same loop construct) the end pointer would be one before the start of the array.   However, use cases involving iterating over an array in reverse order are less common than iterating forward."}, {"owner": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 2, "creation_date": 1505312224, "post_id": 46199810, "comment_id": 79362487, "body": "You can just switch the direction of traversal of your own example."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1505312883, "post_id": 46199810, "comment_id": 79363007, "body": "And maybe that&#39;s a good thing that we can&#39;t iterate backwards. Because I&#39;m not so sure that backwards iteration would necessarily be as effective as forwards iteration, as far as cache memories go."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1505313058, "post_id": 46199810, "comment_id": 79363129, "body": "Oh btw, the backwards version of the above is <i>not</i> <code>for(int* i=end; i!=begin; i--)</code> but rather <code>for(int* i=end-1; i!=begin-1; i--)</code>. Why you would have a need to write such ugly code is not obvious. This whole pattern can always be replaced with an integer offset too."}, {"owner": {"reputation": 89, "user_id": 2422332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cd48a6e11ab4a0909373a898e1f9e2f?s=128&d=identicon&r=PG", "display_name": "Pablo M. S. Farias", "link": "https://stackoverflow.com/users/2422332/pablo-m-s-farias"}, "edited": false, "score": 0, "creation_date": 1505313842, "post_id": 46199810, "comment_id": 79363721, "body": "@Lundin, please consider the following code: <code>for (int *i = array + n - 1; array &lt;= i; --i) ...</code>. I understand that this is not the backwards version of the loop you mentioned in your answer. However, it is (in my opinion) a perfectly useful backwards loop."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1505316942, "post_id": 46199810, "comment_id": 79365974, "body": "Backwards loops are not uncommon, expecially when managing lists."}, {"owner": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 1, "creation_date": 1505318372, "post_id": 46199810, "comment_id": 79366998, "body": "Your caches example is just begging the question. Caches tend to work like that because sequential forward access is a common and important case. Your claim is that there is <i>no</i> situation the reverse could possibly be useful and that&#39;s just not the true. This is largely a matter of convenience and supporting typical use, not some inherent computational principle."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1505329181, "post_id": 46199810, "comment_id": 79373205, "body": "A loop up from 0 to &#39;SomeList.length-1&#39; will fail if some code in the loop deletes the item at the current index, (maybe it matches some search criterion), because the loop will run off the end of the now-shorter list.  A loop down from &#39;SomeList.length-1&#39; to 0 is safe in that scenario because the end index, (0), does not change during the loop - the next index is always valid even if the current item is deleted."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 2, "last_activity_date": 1505311831, "creation_date": 1505311831, "answer_id": 46199810, "question_id": 46199653, "link": "https://stackoverflow.com/questions/46199653/why-is-pointing-to-one-before-the-first-element-of-an-array-not-allowed-in-c/46199810#46199810", "title": "Why is pointing to one before the first element of an array not allowed in C?", "body": "<p>The rationale why it is allowed to point one past the array in the first place, is to enable certain kinds of \"C++/STL-ish\" programming patterns:</p>\n\n<pre><code>int array [n] = ...;\nint* begin = array;\nint* end = array + n;\n\nfor(int* i=begin; i!=end; i++)\n...\n</code></pre>\n\n<p>For situations like the one above it makes sense to point one item past the array. But of course it does not make sense to actually access that item - which would be undefined behavior.</p>\n\n<p>So the above is a special case. However, there exists no situation where it makes sense to point one item <em>before</em> the array.</p>\n"}, {"tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": false, "score": 3, "last_activity_date": 1505315265, "creation_date": 1505315265, "answer_id": 46200994, "question_id": 46199653, "link": "https://stackoverflow.com/questions/46199653/why-is-pointing-to-one-before-the-first-element-of-an-array-not-allowed-in-c/46200994#46200994", "title": "Why is pointing to one before the first element of an array not allowed in C?", "body": "<p>I'm not sure that it's the rationale, but in practice you would need to either </p>\n\n<ul>\n<li>throw away the relational operators on pointers (due to wraparound), or </li>\n<li>require that no objects of size X be stored at an address less than X, or </li>\n<li>cut the available memory in half (due to negative addresses).  </li>\n</ul>\n\n<p>Neither option is very pleasant.</p>\n"}, {"tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": true, "score": 3, "last_activity_date": 1505316400, "creation_date": 1505316400, "answer_id": 46201372, "question_id": 46199653, "link": "https://stackoverflow.com/questions/46199653/why-is-pointing-to-one-before-the-first-element-of-an-array-not-allowed-in-c/46201372#46201372", "title": "Why is pointing to one before the first element of an array not allowed in C?", "body": "<p>The topic \"a pointer is allowed to point to any element of an array\" has been part of the C language for a very long time; it can already be found in the <a href=\"http://read.pudn.com/downloads133/doc/565041/ANSI_ISO%2B9899-1990%2B[1].pdf\" rel=\"nofollow noreferrer\">ANSI-C standard / C89</a> (cf. section 6.3.6 Additive operators, page 46f), which already mentions that within this range implementations must prevent arithmetic overflows. Therein, at the end of page 47, one can also find a footnote that explains the rational behind it:</p>\n\n<blockquote>\n  <p>Another way to approach pointer arithmetic is to first convert the\n  pointer(s) to character pointers: In this scheme the integral\n  expression added to or subtracted from the converted pointer is first\n  multiplied by the size of the object originally pointed to and the\n  resulting pointer is converted back to the original type. For pointer\n  subtraction the result of the difference between the character\n  pointers is similarly divided by the size of the object originally\n  pointed to.</p>\n  \n  <p><strong>When viewed in this way, implementations need only provide one extra\n  byte (which may overlap another object in the program) just after the\n  end of the object in order to satisfy the \"one past the last element\"\n  requirement</strong>.</p>\n</blockquote>\n\n<p>Therefrom we may deduce that the reason is preventing arithmetic overflows, which an implementation <em>must</em> avoid in the range of an array and one past (but which obviously <em>does not need to be guaranteed</em> for an element one before the first element of an array).</p>\n\n<p>Why not one before - is probably (I have no proof for that) connected with the fact that pointers ranges could be limited to particular memory segments, and placing objects at the begin of a memory segment together with arithmetics like \"one before the first element\" could lead to an overflow. I'd say statement  <em>\"implementations need only provide one extra byte (which may overlap another object in the program) just after the end of the object\"</em> is a clear indicator supporting this assumption, as the standard at this time explicitly addressed the \"one extra byte\"-topic at the end but did not suggest something similar for the begin of memory segments.</p>\n"}], "owner": {"reputation": 89, "user_id": 2422332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cd48a6e11ab4a0909373a898e1f9e2f?s=128&d=identicon&r=PG", "display_name": "Pablo M. S. Farias", "link": "https://stackoverflow.com/users/2422332/pablo-m-s-farias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 295, "favorite_count": 0, "accepted_answer_id": 46201372, "answer_count": 3, "score": 5, "last_activity_date": 1505316400, "creation_date": 1505311380, "last_edit_date": 1505311499, "question_id": 46199653, "link": "https://stackoverflow.com/questions/46199653/why-is-pointing-to-one-before-the-first-element-of-an-array-not-allowed-in-c", "title": "Why is pointing to one before the first element of an array not allowed in C?", "body": "<p>In C, a pointer is allowed to point to any element of an array, as well as to one past the last element of the array; pointing to beyond this is undefined behavior (C11 standard, \u00a76.5.6, paragraph 8). </p>\n\n<p>However, why is pointing to one before the first element of an array not similarly allowed?</p>\n\n<p>P.S: I know that, in order to circumvent the above restriction, one can sometimes declare an array 1 unit larger than needed, then use only positions from 1 on to store elements, and finally leave position 0 just as a guarantee that traversing the array backwards will be safe. However, sometimes we must use an array as given, and then the problem of pointing to one before the first element remains.</p>\n"}, {"tags": ["c", "vigenere"], "answers": [{"comments": [{"owner": {"reputation": 311, "user_id": 7903273, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kaxgf37WHxE/AAAAAAAAAAI/AAAAAAAAAQE/M1z-OwPKYLk/photo.jpg?sz=128", "display_name": "Akshay Prabhakar", "link": "https://stackoverflow.com/users/7903273/akshay-prabhakar"}, "edited": false, "score": 0, "creation_date": 1505316566, "post_id": 46200894, "comment_id": 79365677, "body": "Thanks for the response, I have updated the code as per your suggestion. But i don&#39;t find any luck. Can you please let me know what else needs to be done."}, {"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "reply_to_user": {"reputation": 311, "user_id": 7903273, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kaxgf37WHxE/AAAAAAAAAAI/AAAAAAAAAQE/M1z-OwPKYLk/photo.jpg?sz=128", "display_name": "Akshay Prabhakar", "link": "https://stackoverflow.com/users/7903273/akshay-prabhakar"}, "edited": false, "score": 0, "creation_date": 1505317537, "post_id": 46200894, "comment_id": 79366408, "body": "Oh, right. You need to put <code>\\n</code> at the end of your <code>printf()</code> statements in <code>server.c</code>. The console output is line buffered, so nothing will appear in the console until you send a line break."}, {"owner": {"reputation": 311, "user_id": 7903273, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kaxgf37WHxE/AAAAAAAAAAI/AAAAAAAAAQE/M1z-OwPKYLk/photo.jpg?sz=128", "display_name": "Akshay Prabhakar", "link": "https://stackoverflow.com/users/7903273/akshay-prabhakar"}, "edited": false, "score": 0, "creation_date": 1505317774, "post_id": 46200894, "comment_id": 79366577, "body": "Okay, For better help can you please comment me out in which line do i need to do this ?"}], "tags": [], "owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "is_accepted": false, "score": 4, "last_activity_date": 1505314982, "creation_date": 1505314982, "answer_id": 46200894, "question_id": 46199607, "link": "https://stackoverflow.com/questions/46199607/vigen%c3%a8re-cipher-issue-in-c/46200894#46200894", "title": "Vigen&#232;re cipher, Issue in C", "body": "<p>Both your programs initialize the <code>newKey[]</code> array with an undefined length:</p>\n\n<pre><code>int msgLen;          // Value of msgLen is undefined\nchar newKey[msgLen]; // How big is newKey[]???\n</code></pre>\n\n<p>As always, this sort of problem could be identified by taking some simple steps:</p>\n\n<ol>\n<li><p>Get your compiler to report as many problems as possible</p>\n\n<p>Add <code>-Wall</code> (or better still, <code>-Wall -Werror</code>) to the command line arguments when compiling your code. This will inform you about potential errors in your code.</p></li>\n<li><p>Learn how to use a debugger</p>\n\n<p>Tools like <a href=\"https://www.gnu.org/software/gdb/\" rel=\"nofollow noreferrer\">gdb</a> can often help you identify and fix problems much faster than posting code at Stack Overflow.</p></li>\n</ol>\n"}], "owner": {"reputation": 311, "user_id": 7903273, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kaxgf37WHxE/AAAAAAAAAAI/AAAAAAAAAQE/M1z-OwPKYLk/photo.jpg?sz=128", "display_name": "Akshay Prabhakar", "link": "https://stackoverflow.com/users/7903273/akshay-prabhakar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1505316679, "creation_date": 1505311251, "last_edit_date": 1505316679, "question_id": 46199607, "link": "https://stackoverflow.com/questions/46199607/vigen%c3%a8re-cipher-issue-in-c", "title": "Vigen&#232;re cipher, Issue in C", "body": "<p>I am working on C program in vigenere ciphere in  client and Server socket programming.</p>\n\n<p>My Client End file :</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n#include&lt;stdio.h&gt; //printf\n#include&lt;string.h&gt;    //strlen\n#include&lt;sys/socket.h&gt;    //socket\n#include&lt;arpa/inet.h&gt; //inet_addr\n\nint main(int argc , char *argv[])\n{\n    int sock,i,j,msgLen,keyLen;\n    struct sockaddr_in server;\n    char message[1000] , server_reply[2000],ch,key[10],newKey[msgLen], encryptedMsg[msgLen];\n\n\n    //Create socket\n    sock = socket(AF_INET , SOCK_STREAM , 0);\n    if (sock == -1)\n    {\n        printf(\"Could not create socket\");\n    }\n    puts(\"Socket created\");\n\n    server.sin_addr.s_addr = inet_addr(\"127.0.0.1\");\n    server.sin_family = AF_INET;\n    server.sin_port = htons( 8888 );\n\n    //Connect to remote server\n    if (connect(sock , (struct sockaddr *)&amp;server , sizeof(server)) &lt; 0)\n    {\n        perror(\"connect failed. Error\");\n        return 1;\n    }\n\n    puts(\"Connected\\n\");\n\n    //keep communicating with server\n    while(1)\n    {       \n        printf(\"Enter a message to encrypt :\");\n        scanf(\"%s\",message);\n        printf(\"enter key to be added :\");\n        scanf(\"%s\",key);\n\n        msgLen = strlen(message); \n        keyLen = strlen(key);\n\n        //generating new key\n        for(i = 0, j = 0; i &lt; msgLen; ++i, ++j){\n            if(j == keyLen)\n                j = 0;\n\n            newKey[i] = key[j];\n        }\n\n        newKey[i] = '\\0';\n        printf(\"\\nNew Generated Key: %s\", newKey);\n\n        //encryption\n        for(i = 0; i &lt; msgLen; ++i)\n            encryptedMsg[i] = ((message[i] + newKey[i]) % 26) + 'A';\n\n        encryptedMsg[i] = '\\0';\n\n\n        printf(\"\\nEncrypted Message: %s\\n\", encryptedMsg);\n\n\n        //   puts(\"connected\");    \n\n\n        //Send some data\n        if( send(sock , encryptedMsg , strlen(message) , 0) &lt; 0)\n        {\n            puts(\"Send failed\");\n            return 1;\n        }\n\n    }     \n    close(sock);\n    return 0;\n}\n</code></pre>\n\n<p>And Here is the Server File.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;    //strlen\n#include&lt;sys/socket.h&gt;\n#include&lt;arpa/inet.h&gt; //inet_addr\n#include&lt;unistd.h&gt;    //write\n\nint main(int argc , char *argv[])\n{\n    int socket_desc , client_sock , c , read_size,i,j,msgLen,keyLen;\n    struct sockaddr_in server , client;\n    char client_message[2000],key[10],ch,newKey[msgLen],decryptedMsg[msgLen];\n\n    //Create socket\n    socket_desc = socket(AF_INET , SOCK_STREAM , 0);\n    if (socket_desc == -1)\n    {\n        printf(\"Could not create socket\");\n    }\n    puts(\"Socket created\");\n\n    //Prepare the sockaddr_in structure\n    server.sin_family = AF_INET;\n    server.sin_addr.s_addr = INADDR_ANY;\n    server.sin_port = htons( 8888 );\n\n    //Bind\n    if( bind(socket_desc,(struct sockaddr *)&amp;server , sizeof(server)) &lt; 0)\n    {\n        //print the error message\n        perror(\"bind failed. Error\");\n        return 1;\n    }\n    puts(\"bind done\");\n\n    //Listen\n    listen(socket_desc , 3);\n\n    //Accept and incoming connection\n    puts(\"Waiting for incoming connections...\");\n    c = sizeof(struct sockaddr_in);\n\n    //accept connection from an incoming client\n    client_sock = accept(socket_desc, (struct sockaddr *)&amp;client, (socklen_t*)&amp;c);\n    if (client_sock &lt; 0)\n    {\n        perror(\"accept failed\");\n        return 1;\n    }\n    puts(\"Connection accepted\");\n\n    //Receive a message from client\n    while( (read_size = recv(client_sock , client_message , 2000 , 0)) &gt; 0 )\n    {\n        printf(\"encrypted message from client :\");\n        puts(client_message);\n        printf(\"enter key to be subtract :\");\n        scanf(\"%s\",key);\n        msgLen = strlen(client_message);keyLen = strlen(key);\n\n        //generating new key\n        for(i = 0, j = 0; i &lt; msgLen; ++i, ++j){\n            if(j == keyLen)\n                j = 0;\n\n            newKey[i] = key[j];\n        }\n\n        newKey[i] = '\\0';\n        printf(\"New Generated Key: %s\", newKey);\n        //decryption\n        for(i = 0; i &lt; msgLen; ++i)\n           decryptedMsg[i] = (((client_message[i] - newKey[i]) + 26) % 26) + 'A';\n\n        decryptedMsg[i] = '\\0';\n\n        printf(\"Decrypted Message: %s\", decryptedMsg);\n    }\n\n    if(read_size == 0)\n    {\n        puts(\"Client disconnected\");\n        fflush(stdout);\n    }\n    else if(read_size == -1)\n    {\n        perror(\"recv failed\");\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>When we send message from client end to server end it transfers the message to server end and when the key is entered to the server end nothing is happening.</p>\n\n<p>Can anybody help ?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 2, "creation_date": 1505311331, "post_id": 46199507, "comment_id": 79361858, "body": "The entire idea of building an <code>int32_t</code> out of four <code>uint8_t</code>s is already implementation-defined. The results are different on a two&#39;s-complement system, a ones-complement system, and a sign-magnitude system. So the question is already implementation-defined. Not surprising that the answer is too. If you want the four <code>uint8_t</code>s to be treated as two&#39;s-complement, then you need to construct the <code>int32_t</code> in that manner (test the sign bit, etc.)"}, {"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 0, "creation_date": 1505313057, "post_id": 46199507, "comment_id": 79363128, "body": "Are you asking how best to implement the function?  If so, what is its signature supposed to be?   Or are you asking how best to test the function?"}, {"owner": {"reputation": 4245, "user_id": 3613657, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/16dbb100614d9c85c0a1689ef29f5f43?s=128&d=identicon&r=PG&f=1", "display_name": "Mathieu Border&#233;", "link": "https://stackoverflow.com/users/3613657/mathieu-border%c3%a9"}, "edited": false, "score": 0, "creation_date": 1505313351, "post_id": 46199507, "comment_id": 79363344, "body": "Both really. The signature can be thought of as <code>int32_t fun(uint8_t data[4])</code>. two&#39;s-complement may be assumed. At the moment it&#39;s implemented like in the question. This code runs on x86-64 and Armv7-A architectures."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 2, "creation_date": 1505313565, "post_id": 46199507, "comment_id": 79363505, "body": "@RaymondChen The stdint.h types are <i>guaranteed</i> to be 2&#39;s complement. So your comment is incorrect."}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1505320312, "post_id": 46199507, "comment_id": 79368145, "body": "@Lundin I stand corrected. Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1505324713, "post_id": 46200621, "comment_id": 79370634, "body": "Technically, it will still fall foul of C11 &#167;6.3.1.3 paragraph 3 when you do the <code>res |= (int32_t) ((uint32_t)b1 &lt;&lt; 24);</code> step. (Also there is a typo in the placement of the semicolon in your line of code.)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1505370669, "post_id": 46200621, "comment_id": 79386922, "body": "@IanAbbott Yes but that&#39;s not an issue. Implementation-defined there means &quot;like 2&#39;s complement or other signedness formats&quot;. Which doesn&#39;t apply to <code>int32_t</code>, which is guaranteed to be in 2&#39;s complement. To my knowledge, there exist no 2&#39;s complement system in the real world which will do the conversion differently than a raw translation of the binary into 2&#39;s complement. There is absolutely no reason why &quot;an implementation-defined signal&quot; would be raised - that refers to systems with trap representations. At any rate, the alternative is code with explicit or latent UB."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1505401703, "post_id": 46200621, "comment_id": 79408089, "body": "That&#39;s why I prefixed my reply with &quot;Technically,&quot;."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 3, "last_activity_date": 1505314095, "creation_date": 1505314095, "answer_id": 46200621, "question_id": 46199507, "link": "https://stackoverflow.com/questions/46199507/build-int32-t-from-4-uint8-t-values/46200621#46200621", "title": "build int32_t from 4 uint8_t values", "body": "<p>This is pretty much the best way, except you should have a cast to <code>uint32_t</code> on every line, to avoid implicit conversions and signedness issues.</p>\n\n<p>The main concern here is that performing bit-wise operations on signed operands tends to invoke poorly-defined behavior. In particular, look out for this:</p>\n\n<ul>\n<li>Left-shifting a bit into the sign bit of a signed number invokes undefined behavior. This includes shifting more bits than the type can hold.</li>\n<li>Left-shifting a signed variable which has a negative value invokes undefined behavior.</li>\n<li>Right-shifting a signed variable which has a negative value invokes implementation-defined behavior (you end up with either arithmetic or logical shift).</li>\n</ul>\n\n<p>These concerns can all be avoided by making sure that you always shift using an unsigned type, like a <code>uint32_t</code>. For example: </p>\n\n<pre><code>res |= (int32_t) ((uint32_t)b1 &lt;&lt; 8;)\n</code></pre>\n\n<p>The above code is rugged and good practice, since it doesn't contain any implicit promotions.</p>\n\n<hr>\n\n<ul>\n<li>Endianess is no concern in this case since you use bit shifts. Had you used any other method (type punning, pointer arithmetic etc) it would have been a concern.</li>\n<li>Signedness format is no concern in this case. The <code>stdint.h</code> types are guaranteed to use 2's complement. They will never use 1's complement or sign &amp; magnitude.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1505371194, "post_id": 46201386, "comment_id": 79387226, "body": "This is a bad ideas since they introduce reliance on endianess. This is worse than what the OP already got. Serialization of data is another, not necessarily related topic."}, {"owner": {"reputation": 243, "user_id": 8401410, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8FC4M.png?s=128&g=1", "display_name": "grambo", "link": "https://stackoverflow.com/users/8401410/grambo"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1505392173, "post_id": 46201386, "comment_id": 79400800, "body": "I wouldn&#39;t say it introduces endianness, your processor vendor did that!  The byte shifting certainly works for small ints to big ints, but if you have a float, double or other struct, this is a great way to tear it apart byte by byte.."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1505399188, "post_id": 46201386, "comment_id": 79406277, "body": "That would be why I wrote <i>reliance</i> on endianess. Writing endianess-dependent code when you could as well have written endianess-independent code is simply bad programming. <i>Particularly</i> in embedded systems where you are more likely to encounter different endianess in different MCUs (and on top of that different <i>protocol</i> endianess in communication protocols)."}, {"owner": {"reputation": 243, "user_id": 8401410, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8FC4M.png?s=128&g=1", "display_name": "grambo", "link": "https://stackoverflow.com/users/8401410/grambo"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1505399815, "post_id": 46201386, "comment_id": 79406742, "body": "@Lundin I totally understand that point of view...  how would you move an IEEE-754 single precision float across an 8-bit serial line?  Protocol is 8-bit big endian, code has to run on 16-bit little endian, and 8-bit little endian.  I&#39;ve always had to have a &quot;.h&quot; file somewhere that described the hardware and lets me trigger #if statements per architecture for the byte arrangements.  I&#39;m all ears if there&#39;s a way around that."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1505400061, "post_id": 46201386, "comment_id": 79406921, "body": "Whenever dealing with more than one byte and there is an endianess issue, you use bit shifts. For example <code>u32 = (uint32_t)byte &lt;&lt; 24</code> is guaranteed to write to the most significant byte of the u32, no matter endianess.That is, byte 0 for big endian or byte 3 for little endian. No need for compiler switches - the code is portable."}, {"owner": {"reputation": 243, "user_id": 8401410, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8FC4M.png?s=128&g=1", "display_name": "grambo", "link": "https://stackoverflow.com/users/8401410/grambo"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1505402605, "post_id": 46201386, "comment_id": 79408742, "body": "so for a float, you would have a (float) cast after the reassembly?  OK, but I&#39;d be curious to see some execution speed comparisons on 8, 16 and 32 bit architectures...  the pre-compiler switches should be faster executing, especially on an 8- and 16-bit machines."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1505402907, "post_id": 46201386, "comment_id": 79408987, "body": "Bit shifts are usually among the fastest instructions, though the compiler is hopefully smart enough to replace them with byte copy instructions if those would be faster on a given CPU."}], "tags": [], "owner": {"reputation": 243, "user_id": 8401410, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8FC4M.png?s=128&g=1", "display_name": "grambo", "link": "https://stackoverflow.com/users/8401410/grambo"}, "is_accepted": true, "score": 2, "last_activity_date": 1505316426, "creation_date": 1505316426, "answer_id": 46201386, "question_id": 46199507, "link": "https://stackoverflow.com/questions/46199507/build-int32-t-from-4-uint8-t-values/46201386#46201386", "title": "build int32_t from 4 uint8_t values", "body": "<pre><code>typedef union\n{\n    uint32_t  u32;\n    int32_t   i32;\n    float     f;\n    uint16_t  u16[2];\n    int16_t   i16[2];\n    uint8_t   u8[4];\n    int8_t    i8[4];\n    char      c[4];\n} any32;\n</code></pre>\n\n<p>I keep that in my back pocket for all of my embedded system projects.  Aside from needing to understand the endian-ness of your system, you can build the 32bit values rather easily from 8bit pieces.  This is very useful if you are shuttling out bytes on a serial line or I2C or SPI.  It's also useful if you are working with 8.24 (or 16.16 or 24.8) fixed point math.  I generally supplement this with some #defines to help with any endian headaches:</p>\n\n<pre><code>//!\\todo add 16-bit boundary endian-ness options\n#if (__LITTLE_ENDIAN)\n #define FP_824_INTEGER  (3)\n #define FP_824_FRAC_HI  (2)\n #define FP_824_FRAC_MID (1)\n #define FP_824_FRAC_LOW (0)\n#elif (__BIG_ENDIAN)\n #define FP_824_INTEGER  (0)\n #define FP_824_FRAC_HI  (1)\n #define FP_824_FRAC_MID (2)\n #define FP_824_FRAC_LOW (3)\n#else\n #error undefined endian implementation\n#endif\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1505370878, "post_id": 46204575, "comment_id": 79387027, "body": "Implicitly there <i>are</i> rules for how the conversion is done, namely a translation of the raw binary into 2&#39;s complement. This is how every system in the real world works. There is no need for strange checks against integer limits - simply rely on the fact that the code will run on real-world computers. A CPU does not know what makes the binary in a memory area signed or unsigned."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1505401902, "post_id": 46204575, "comment_id": 79408242, "body": "@Lundin: Yes, under real-world assumptions, the above mucking around to avoid IDB is unnecessary, but I wanted to give an answer that avoided IDB."}], "tags": [], "owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "is_accepted": false, "score": 1, "last_activity_date": 1505328656, "last_edit_date": 1505328656, "creation_date": 1505327528, "answer_id": 46204575, "question_id": 46199507, "link": "https://stackoverflow.com/questions/46199507/build-int32-t-from-4-uint8-t-values/46204575#46204575", "title": "build int32_t from 4 uint8_t values", "body": "<p>If the implementation supports <code>int32_t</code>, <code>uint32_t</code>, and <code>uint8_t</code>, the following is guaranteed to have no implementation-defined values, or to raise an implementation-defined signal (see C11 \u00a76.3.1.3):</p>\n\n<pre><code>#include &lt;stdint.h&gt;\n\nvoid foo(void)\n{\n    uint8_t b0 = 0xef;\n    uint8_t b1 = 0xbe;\n    uint8_t b2 = 0xad;\n    uint8_t b3 = 0xde;\n    uint32_t ures = b0 | ((uint32_t)b1 &lt;&lt; 8) |\n                    ((uint32_t)b2 &lt;&lt; 16) | ((uint32_t)b3 &lt;&lt; 24);\n    // Avoid implementation-defined value or signal...\n    int32_t sres = (ures &lt; (uint32_t)INT32_MIN) ?\n                   (int32_t)ures : INT32_MIN + (int32_t)(ures &amp; INT32_MAX);\n}\n</code></pre>\n\n<p>The fixed-width signed integer types are guaranteed to have a 2's complement representation, but have no specific rules for converting out-of-range values (unlike the unsigned fixed-width integer types).</p>\n\n<p><strong>EDIT</strong>: Perhaps <code>(ures &lt;= INT32_MAX)</code> would be more intuitive than <code>(ures &lt; (uint32_t)INT32_MIN)</code> in the above code.</p>\n"}], "owner": {"reputation": 4245, "user_id": 3613657, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/16dbb100614d9c85c0a1689ef29f5f43?s=128&d=identicon&r=PG&f=1", "display_name": "Mathieu Border&#233;", "link": "https://stackoverflow.com/users/3613657/mathieu-border%c3%a9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1255, "favorite_count": 0, "accepted_answer_id": 46201386, "answer_count": 3, "score": 3, "last_activity_date": 1505328656, "creation_date": 1505310976, "question_id": 46199507, "link": "https://stackoverflow.com/questions/46199507/build-int32-t-from-4-uint8-t-values", "title": "build int32_t from 4 uint8_t values", "body": "<p>I have a function which constructs an <code>int32_t</code> from 4 <code>uint8_t</code> values and use the following test to have some confidence that my results are what they're expected to be because I'm depending on (what I believe is) Implementation Defined Behaviour. </p>\n\n<p>Does it make sense what I'm doing?\nAre there better ways to construct the int32_t?</p>\n\n<pre><code>int32_t expected = -1;\nint32_t res = 0;\nuint8_t b0 = 0xFF;\nuint8_t b1 = 0xFF;\nuint8_t b2 = 0xFF;\nuint8_t b3 = 0xFF;                                                      \nres |= b0;                                            \nres |= b1 &lt;&lt; 8;                                                   \nres |= b2 &lt;&lt; 16;\n/* This is IDB, this value cannot be represented in int32_t */\nres |= ((uint32_t) b3) &lt;&lt; 24;                                                       \nck_assert(res == expected); \n</code></pre>\n"}, {"tags": ["c", "arrays", "macros"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1505310444, "post_id": 46199237, "comment_id": 79361181, "body": "Iterate though a macro? What do you mean? Anyway, I highly doubt you can. The macro &quot;names&quot; exist only before the preprocessing stage."}, {"owner": {"reputation": 4073, "user_id": 152, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXFHS.jpg?s=128&g=1", "display_name": "Jonesinator", "link": "https://stackoverflow.com/users/152/jonesinator"}, "edited": false, "score": 0, "creation_date": 1505311125, "post_id": 46199237, "comment_id": 79361712, "body": "The <a href=\"http://www.boost.org/doc/libs/1_63_0/libs/preprocessor/doc/index.html\" rel=\"nofollow noreferrer\">boost preprocessor library</a> can perform some types of iteration using the preprocessor. It doesn&#39;t seem to fit what you&#39;re doing directly, but it&#39;s possible you could change your approach to use the library. We really need more detail in your question to give you useful information."}], "answers": [{"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 0, "last_activity_date": 1505311339, "creation_date": 1505311339, "answer_id": 46199642, "question_id": 46199237, "link": "https://stackoverflow.com/questions/46199237/storing-inputs-to-a-macro-in-an-array-c/46199642#46199642", "title": "Storing inputs to a macro in an array (C)", "body": "<p>It's not entirely clear what you are asking, but it sounds a lot like you are looking for the \"X macros\" pattern:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n// list of data\n#define NAME_LIST \\\n  X(foo)          \\\n  X(bar)          \\\n  X(hello)        \\\n  X(world)\n\n\n// whatever you are actually using these for, maybe an enum or variable names?\ntypedef enum  \n{\n  // temporarily define the meaning of \"X\" for all data in the list:\n  #define X(name) PRE_##name##_POST,\n    NAME_LIST\n  #undef X // always undef when done\n} whatever_t;\n\n\n// helper macro to print the name of the enum    \n#define STRINGIFY(str) #str\n\n\nint main()\n{\n  #define X(name) printf(\"%s %d\\n\", STRINGIFY(PRE_##name##_POST), PRE_##name##_POST);\n    NAME_LIST\n  #undef X\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>PRE_foo_POST 0\nPRE_bar_POST 1\nPRE_hello_POST 2\nPRE_world_POST 3\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 7647963, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5cc740efba42e47a73be1c325a0ec401?s=128&d=identicon&r=PG&f=1", "display_name": "KAM", "link": "https://stackoverflow.com/users/7647963/kam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1505311339, "creation_date": 1505310225, "question_id": 46199237, "link": "https://stackoverflow.com/questions/46199237/storing-inputs-to-a-macro-in-an-array-c", "title": "Storing inputs to a macro in an array (C)", "body": "<p>I have defined a macros as shown below.</p>\n\n<pre><code>#define NAME_OUT(name_in)  PRE_##name_in##_POST\n</code></pre>\n\n<p>I would like to iterate through this macro using names i have defined in a table/array.  Is it possible to do something like this?  If so how would I do this?  </p>\n\n<p>NOTE:  The above example is for illustrative purposes only :)</p>\n"}, {"tags": ["c", "opencv", "haar-classifier", "vivado-hls"], "owner": {"reputation": 359, "user_id": 4457885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2e114290945520c759a4869dc4ee6fc?s=128&d=identicon&r=PG&f=1", "display_name": "Human", "link": "https://stackoverflow.com/users/4457885/human"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 699, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1507563425, "creation_date": 1505309594, "last_edit_date": 1507563425, "question_id": 46199006, "link": "https://stackoverflow.com/questions/46199006/implementing-object-detection-like-opencv", "title": "implementing object detection like openCV", "body": "<p>I'm trying to implement the Viola-Jones algorithm for object detection using Haar cascades (like openCV's implementation) in C, to detect faces. I writing the C code in a Vivado HLS compatible way, so I can port the the implementation to an FPGA. My main goal is to learn as much as possible, rather than just getting it to work. I would also appreciate any help with improving my question.</p>\n\n<p>I basically started reading G. Bradski's <a href=\"https://books.google.se/books?id=seAgiOfu2EIC\" rel=\"nofollow noreferrer\">Learning openCV</a>, watched some online tutorials and got started writing the code. Sure enough its not detecting faces and I don't know why. At this point I care more about understanding my mistakes rather than beeing able to detect faces.</p>\n\n<h1>My Implementation Steps</h1>\n\n<p>I'm not sure how much detail is appropriate, but to keep it short:</p>\n\n<ul>\n<li>Extracting Haar cascade data from <a href=\"https://github.com/opencv/opencv/blob/bfb12acde6fc5b5b247bab2f7e2c6733ca3e73a6/data/haarcascades/haarcascade_frontalface_default.xml\" rel=\"nofollow noreferrer\">haarcascade_frontalface_default.xml</a> to C readable structures (huge arrays)</li>\n<li>Writing a function to create an integral image of any given 8bit greyscale image of size 24x24 (same size as listed in the cascade)</li>\n<li>Applying knowledge from this <a href=\"https://stackoverflow.com/a/34897460/4457885\">great post</a> to make the necessary calculations</li>\n</ul>\n\n<h1>My Testing Scheme</h1>\n\n<ul>\n<li>Implementing a python script to detect faces using the openCV library with the same Haar cascade as mentioned above to create golden data, a detected face is cut out (ensuring 24x24 size) from the image and stored.</li>\n<li>Stored images are converted to one dimensional C arrays, containing pixel values row-wise: <code>img = {row0col0, row0col1, row1col0, row1col1, ... }</code></li>\n<li>integral image is calculated and face detection applied</li>\n</ul>\n\n<h1>Result</h1>\n\n<ul>\n<li>Faces pass only 6 from 25 stages of the Haar cascade and are therefore not detected by my implementation, where I know they should have been detected since the python script with openCV and the same Haar cascade did indeed detect them.</li>\n</ul>\n\n<h1>My Code</h1>\n\n<pre><code> /*\n * This is detectFace.c\n */\n\n#include &lt;stdio.h&gt;\n#include \"detectFace.h\"\n\n// define constants based on Haar cascade in use\n// Each feature is made of max 3 rects\n//#define FEAT_NO 1     // max no. of features (= 2912 for face_default.xml)\n#define RECTS_IN_FEAT 3 // max no. of rect's per feature\n//#define INTS_IN_RECT 5    // no. of int's needed to describe a rect\n// each node has one feature (bijective relation) and three doubles\n#define STAGE_NO 25 // no. of stages\n#define NODE_NO 211 // no of nodes per stage, corresponds to FEAT_NO since each Node has always one feature in haarcascade_frontalface_default.xml\n//#define ELMNT_IN_NODE 3   // no. of doubles needed to describe a node\n\n// constants for frame size\n#define WIN_WIDTH 24 // width = height =24\n\n//int detectFace(int features[FEAT_NO][RECTS_IN_FEAT][INTS_IN_RECT], double stages[STAGE_NO][NODE_NO][ELMNT_IN_NODE], double stageThresh[STAGE_NO], int ii[24][24]){\nint detectFace(\n    int ii[576],\n    int stageNum,\n    int stageOrga[25],\n    float stageThresholds[25],\n    float nodes[8739],\n    int featOrga[2913],\n    int rectangles[6383][5])\n{\n    int passedStages = 0; // number of stages passed in this run\n    int faceDetected = 0; // turns to 1 if face is detected and to 0 if its not detected\n    // Debug:\n    int nodesUsed = 0; // number of floats out of nodes[] processed, use to skip to the unprocessed floats\n    int rectsUsed = 0; // number of rects processed\n    int droppedInStage0 = 0;\n\n    // loop through all stages\n    int i;\ndetectFace_label1:\n    for (i = 0; i &lt; STAGE_NO; i++)\n    {\n        double tmp = 0.0;           //variable to accumulate node-values, to then compare to stage threshold\n        int nodeNum = stageOrga[i]; // get number of nodes for this stage from stageOrga using stage index i\n        // loop through nodes inside each stage\n        // NOTE: it is assumed that each node maps to one corresponding feature. Ex: node[0] has feat[0) and node[1] has feat[1]\n        // because this is how it is written in the haarcascade_frontalface_default.xml\n        int j;\n    detectFace_label0:\n        for (j = 0; j &lt; NODE_NO; j++)\n        {\n            // a node is defined by 3 values:\n            double nodeThresh = nodes[nodesUsed]; // the first value is the node threshold\n            double lValue = nodes[nodesUsed + 1]; // the second value is the left value\n            double rValue = nodes[nodesUsed + 2]; // the third value is the right value\n            int sum = 0;                          // contains the weighted value of rectangles in one Haar feature\n            // loop through rect's in a feature, some have 2 and some have 3 rect's.\n            // Each node always refers to one feature in a way that node0 maps to feature0 and node1 to feature1 (The XML file is build like that)\n            //int rectNum = featOrga[j]; // get number of rects for current feature using current node index j\n            int k;\n        detectFace_label2:\n            for (k = 0; k &lt; RECTS_IN_FEAT; k++)\n            {\n                int x = 0, y = 0, width = 0, height = 0, weight = 0, coordUpL = 0, coordUpR = 0, coordDownL = 0, coordDownR = 0;\n\n                // a rect is defined by 5 values:\n                x = rectangles[rectsUsed][0];      // the first value is the x coordinate of the top left corner pixel\n                y = rectangles[rectsUsed][1];      // the second value is the y coordinate of the top left corner pixel\n                width = rectangles[rectsUsed][2];  // the third value is the width of the current rectangle\n                height = rectangles[rectsUsed][3]; // the fourth value is the height of this rectangle\n                weight = rectangles[rectsUsed][4]; // the fifth value is the weight of this rectangle\n\n                // calculating 1-Dim index for points of interest. Formula: index = width * row + column, assuming values are stored in row order\n                coordUpL = ((WIN_WIDTH * y) - WIN_WIDTH) + (x - 1);\n                coordUpR = coordUpL + width;\n                coordDownL = coordUpL + (height * WIN_WIDTH);\n                coordDownR = coordDownL + width;\n\n                // calculate the area sum according to Viola-Jones\n                //sum += (ii[x][y] + ii[x+width][y+height] - ii[x][y+height] - ii[x+width][y]) * weight;\n                sum += (ii[coordUpL] + ii[coordDownR] - ii[coordUpR] - ii[coordDownL]) * weight;\n                // Debug: counting the number of actual rectangles used\n                rectsUsed++; //\n            }\n            // decide whether the result of the feature calculation reaches the node threshold\n            if (sum &lt; nodeThresh)\n            {\n                tmp += lValue; // add left value to tmp if node threshold was not reached\n            }\n            else\n            {\n                tmp += rValue; // // add right value to tmp if node threshold was reached\n            }\n            nodesUsed = nodesUsed + 3; // one node is processed, increase nodesUsed by number of floats needed to represent a node (3)\u00ac\n        }\n        //########  at this point we went through each node in the current stage #######\n        // check if threshold of current stage was reached\n        if (tmp &lt; stageThresholds[i])\n        {\n            faceDetected = 0; // if any stage threshold is not reached the operation is done and no face is present\n            // Debug: show in which stage the frame was dropped\n            printf(\"Face detection failed in stage %d \\n\", i);\n            //i = stageNum;         // breaks out this loop, because i is supposed to stay smaller than STAGE_NO\n        }\n        else\n        {\n            passedStages++; // stage threshold is reached, therefore passedStages will count up\n        }\n    }\n    //########  at this point we went through all stages ###############################\n    //----------------------------------------------------------------------------------\n    // if the number of passed stages reaches the total number of stages, a face is detected\n    if (passedStages == stageNum)\n    {\n        faceDetected = 1; // one symbolizes that the input is a face\n    }\n    else\n    {\n        faceDetected = 0; // zero symbolizes that the input is not a face\n    };\n    return faceDetected;\n}\n</code></pre>\n"}, {"tags": ["c#", "c"], "comments": [{"owner": {"reputation": 22777, "user_id": 133203, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Fp3hB.jpg?s=128&g=1", "display_name": "Federico klez Culloca", "link": "https://stackoverflow.com/users/133203/federico-klez-culloca"}, "edited": false, "score": 1, "creation_date": 1505308718, "post_id": 46198618, "comment_id": 79359825, "body": "Is it possible for the C and C# program to load the offset at runtime? If so, put it in a configuration file and load it at runtime."}, {"owner": {"reputation": 28373, "user_id": 5015238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8790f8091d3c6c58fd45664a165117a?s=128&d=identicon&r=PG", "display_name": "jdweng", "link": "https://stackoverflow.com/users/5015238/jdweng"}, "edited": false, "score": 0, "creation_date": 1505309494, "post_id": 46198618, "comment_id": 79360462, "body": "See msdn : <a href=\"https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/preprocessor-directives/preprocessor-if\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/dotnet/csharp/language-reference/&hellip;</a>"}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1505309778, "post_id": 46198618, "comment_id": 79360670, "body": "It is easy to do with C++/CLI, not with C#.  Beyond a config file, you could consider writing these offsets in the MMF, at the start of the view at a well-known location (like 0).  Kinda of the point of shared memory :)"}, {"owner": {"reputation": 18719, "user_id": 1997232, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/y6na2.png?s=128&g=1", "display_name": "Sinatr", "link": "https://stackoverflow.com/users/1997232/sinatr"}, "edited": false, "score": 2, "creation_date": 1505310882, "post_id": 46198618, "comment_id": 79361545, "body": "Since you have sources of c-project, the easiest is to use T4 templates to generate cs-files from h-files, e.g. static classes with constants. You will have to write T4 once and maintain only header file."}, {"owner": {"reputation": 610493, "user_id": 88656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fbdff3ffb6f111d172759b4f05bea0e?s=128&d=identicon&r=PG", "display_name": "Eric Lippert", "link": "https://stackoverflow.com/users/88656/eric-lippert"}, "edited": false, "score": 1, "creation_date": 1505311402, "post_id": 46198618, "comment_id": 79361903, "body": "Write a parser for .h files in C#; include it in your C# project, use the .h file as a config file."}], "answers": [{"tags": [], "owner": {"reputation": 3984, "user_id": 164344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c978ca7e1c3da231710b8c114009faa5?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/164344/tim"}, "is_accepted": true, "score": 1, "last_activity_date": 1505342020, "creation_date": 1505342020, "answer_id": 46207790, "question_id": 46198618, "link": "https://stackoverflow.com/questions/46198618/does-c-feature-a-include-equivalent-for-def-constants/46207790#46207790", "title": "Does C# feature a #include equivalent for #def constants?", "body": "<p><a href=\"https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/preprocessor-directives/preprocessor-define\" rel=\"nofollow noreferrer\">The short answer is no</a>:</p>\n\n<blockquote>\n  <p>The <code>#define</code> directive cannot be used to declare constant values as\n  is typically done in C and C++. Constants in C# are best defined as\n  static members of a class or struct. If you have several such\n  constants, consider creating a separate \"Constants\" class to hold\n  them.</p>\n</blockquote>\n\n<p>You could do something like this:</p>\n\n<p>constants.cs:</p>\n\n<pre><code>#if __STDC__\n#define public\n#else\nnamespace foo\n{\n    class Constants {\n#endif\n\npublic const int VAR_1 = 0x2000;\n\n#if __STDC__\n#undef public\n#else\n    }\n}\n#endif\n</code></pre>\n\n<p>main.c:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"constants.cs\"\n\nint main(void)\n{\n    printf(\"%d\\n\", VAR_1);\n    return 0;\n}\n</code></pre>\n\n<p>Program.cs:</p>\n\n<pre><code>using System;\nnamespace foo\n{\n    class Program\n    {\n        static void Main(string[] args)\n        {\n            Console.WriteLine(Constants.VAR_1);\n        }\n    }\n}\n</code></pre>\n\n<p>This results in:</p>\n\n<pre><code>$ gcc -Wall -Wpedantic main.c &amp;&amp; ./a.out \n8192\n$ dotnet run\n8192\n</code></pre>\n\n<p>This is using <code>const int</code> instead of <code>#define</code> in C, but that may be a tradeoff that you are willing to make.</p>\n"}], "owner": {"reputation": 3336, "user_id": 2649384, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/07fcf64005a81f4b34618c50a15f2b20?s=128&d=identicon&r=PG", "display_name": "Izzo", "link": "https://stackoverflow.com/users/2649384/izzo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 46207790, "answer_count": 1, "score": 2, "last_activity_date": 1505342020, "creation_date": 1505308527, "question_id": 46198618, "link": "https://stackoverflow.com/questions/46198618/does-c-feature-a-include-equivalent-for-def-constants", "title": "Does C# feature a #include equivalent for #def constants?", "body": "<p>Before people tear this question apart, I'll explain what I'm trying to do.</p>\n\n<p>I currently have a C program that has access to shared memory. The C program navigates this shared memory via #defined offsets. Example:</p>\n\n<pre><code>#define VAR_1 0x2000\n</code></pre>\n\n<p>Now I have a C# program that displays data from this shared memory. I'm trying to determine how I can use the #defines that my C program uses and let my C# program also reference them.</p>\n\n<p>I'm trying to avoid needing to maintain two files that contain these definitions. </p>\n\n<p>Thus, is there any way for a C# program to use #defines from a .h file?</p>\n\n<p>Thanks,</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 1, "creation_date": 1505304659, "post_id": 46197162, "comment_id": 79356715, "body": "A function name followed by <code>()</code> means calling a function. A function name without <code>()</code> means the function address."}, {"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 0, "creation_date": 1505304753, "post_id": 46197162, "comment_id": 79356787, "body": "I don&#39;t understand what you&#39;re trying to do here, but <code>&amp;display(system)</code> is asking C to provide you with the address of the return value from a function called <code>display</code>. However, this value is returned in a processor register; it doesn&#39;t have an address at all. So the line <code>test.function = &amp;display(system);</code> makes no sense."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1505305450, "post_id": 46197162, "comment_id": 79357276, "body": "@Johnny S  Write test.function = **********display;"}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 8526343, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/473d7a5afef04d5cea70f7aded28173a?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny  S", "link": "https://stackoverflow.com/users/8526343/johnny-s"}, "edited": false, "score": 0, "creation_date": 1505305562, "post_id": 46197284, "comment_id": 79357382, "body": "thanks, when i try to call it later on i get the following message, what have done wrong this time -  &quot;passing argument 1 of \u2018test-&gt;function\u2019 from incompatible pointer type&quot; i am calling it by this code snippet; test.function(system)"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 37, "user_id": 8526343, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/473d7a5afef04d5cea70f7aded28173a?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny  S", "link": "https://stackoverflow.com/users/8526343/johnny-s"}, "edited": false, "score": 0, "creation_date": 1505305739, "post_id": 46197284, "comment_id": 79357521, "body": "@JohnnyS And what is <code>system</code>? It&#39;s a shady variable name, since it shadows <a href=\"https://linux.die.net/man/3/system\" rel=\"nofollow noreferrer\">the standard function of the same name</a> which might lead to trouble."}, {"owner": {"reputation": 37, "user_id": 8526343, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/473d7a5afef04d5cea70f7aded28173a?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny  S", "link": "https://stackoverflow.com/users/8526343/johnny-s"}, "edited": false, "score": 0, "creation_date": 1505305937, "post_id": 46197284, "comment_id": 79357669, "body": "i read that  &quot;typedef void (*MenuFunction)(VmSystem *);&quot; the second () is the input for the function so it was just a name for VmSystem however i am probably wrong"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 37, "user_id": 8526343, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/473d7a5afef04d5cea70f7aded28173a?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny  S", "link": "https://stackoverflow.com/users/8526343/johnny-s"}, "edited": false, "score": 0, "creation_date": 1505306153, "post_id": 46197284, "comment_id": 79357833, "body": "@JohnnyS No, that&#39;s right, the function needs a pointer to a <code>VmSystem</code>."}, {"owner": {"reputation": 37, "user_id": 8526343, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/473d7a5afef04d5cea70f7aded28173a?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny  S", "link": "https://stackoverflow.com/users/8526343/johnny-s"}, "edited": false, "score": 0, "creation_date": 1505306775, "post_id": 46197284, "comment_id": 79358313, "body": "Any idea how to call the function later on in my code? i have tried test.function(system); and it wont work. :("}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 37, "user_id": 8526343, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/473d7a5afef04d5cea70f7aded28173a?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny  S", "link": "https://stackoverflow.com/users/8526343/johnny-s"}, "edited": false, "score": 0, "creation_date": 1505307287, "post_id": 46197284, "comment_id": 79358703, "body": "@JohnnyS Yes, but I don&#39;t know the type of your variable <code>system</code>, or how to create an instance of <code>VmSystem</code>, so I can&#39;t write that code. You need to provide more context."}, {"owner": {"reputation": 37, "user_id": 8526343, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/473d7a5afef04d5cea70f7aded28173a?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny  S", "link": "https://stackoverflow.com/users/8526343/johnny-s"}, "edited": false, "score": 0, "creation_date": 1505307637, "post_id": 46197284, "comment_id": 79358968, "body": "can you provide me with the general use case then, and i&#39;ll try to do it system has already been created and just gets passed around the program @unwind"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "reply_to_user": {"reputation": 37, "user_id": 8526343, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/473d7a5afef04d5cea70f7aded28173a?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny  S", "link": "https://stackoverflow.com/users/8526343/johnny-s"}, "edited": false, "score": 0, "creation_date": 1505307950, "post_id": 46197284, "comment_id": 79359232, "body": "@JohnnyS You need to show a bit more code. Where do you define <code>system</code> and how do you use it. Our crystall balls are a bit blurred at the moment."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "reply_to_user": {"reputation": 37, "user_id": 8526343, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/473d7a5afef04d5cea70f7aded28173a?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny  S", "link": "https://stackoverflow.com/users/8526343/johnny-s"}, "edited": false, "score": 0, "creation_date": 1505308010, "post_id": 46197284, "comment_id": 79359273, "body": "@JohnnyS Already the comments to your question ask you about a &quot;Minimum <b>Complete</b> Verifiable Example&quot;"}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": true, "score": 5, "last_activity_date": 1505304822, "creation_date": 1505304822, "answer_id": 46197284, "question_id": 46197162, "link": "https://stackoverflow.com/questions/46197162/lvalue-required-as-unary-operand-in-c-function-pointer/46197284#46197284", "title": "lvalue required as unary \u2018&amp;\u2019 operand in c function pointer", "body": "<p>You meant:</p>\n\n<pre><code>test.function = display;\n</code></pre>\n\n<p>The <code>()</code> after <code>display</code> means to call that function. Just <code>display</code> will evaluate to a pointer to the function. There is no need for <code>&amp;display</code>.</p>\n"}], "owner": {"reputation": 37, "user_id": 8526343, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/473d7a5afef04d5cea70f7aded28173a?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny  S", "link": "https://stackoverflow.com/users/8526343/johnny-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 613, "favorite_count": 0, "accepted_answer_id": 46197284, "answer_count": 1, "score": -2, "last_activity_date": 1505307968, "creation_date": 1505304476, "last_edit_date": 1505307968, "question_id": 46197162, "link": "https://stackoverflow.com/questions/46197162/lvalue-required-as-unary-operand-in-c-function-pointer", "title": "lvalue required as unary \u2018&amp;\u2019 operand in c function pointer", "body": "<p>My code is below and problem is also explained below with why the <code>lvalue</code> is happening;</p>\n\n<pre><code>typedef struct test_item\n{\n    char id[MENU_NAME_LEN + NULL_SPACE];\n    MenuFunction function;\n} test_item; \n</code></pre>\n\n<p>and</p>\n\n<pre><code> typedef void (*MenuFunction)(VmSystem *);\n</code></pre>\n\n<p>and </p>\n\n<pre><code>void display(VmSystem * system)\n{\n    printf(\"test\");\n}\n</code></pre>\n\n<p>I am able to assign the ID with what I want however when i try to assign the function pointer I get the following error <code>lvalue</code> required as unary <code>&amp;</code> operand</p>\n\n<pre><code>test_item test;\ntest.function = &amp;display(system);\n</code></pre>\n"}, {"tags": ["c", "bit-manipulation"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 8, "creation_date": 1505303388, "post_id": 46196752, "comment_id": 79355844, "body": "Does the function <i>work</i>? Does it do what it&#39;s supposed to do? Then try to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>, and post it at <a href=\"http://codereview.stackexchange.com/\">codereview.stackexchange.com</a>"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 4, "creation_date": 1505303455, "post_id": 46196752, "comment_id": 79355886, "body": "use <i>unsigned int x</i>, then it certainly is not negative..."}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 3, "creation_date": 1505303542, "post_id": 46196752, "comment_id": 79355938, "body": "Usual rules of thumb are: 1) do not mix <code>signed</code> and <code>unsigned</code>, and 2) use <code>unsigned</code> for bitwise operations."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1505303945, "post_id": 46196752, "comment_id": 79356228, "body": "What&#39;s the expected range for <code>x</code>? <code>32</code>? Or platform dependent? Does it even make sense to provide an <code>x</code> &gt; <code>8 * sizeof A</code>? Shouldn&#39;t this test be rather an <code>assert((x &gt;= 0) &amp;&amp; (x &lt; 8 * sizeof A))</code>? You need to give us more details."}, {"owner": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "edited": false, "score": 0, "creation_date": 1505304032, "post_id": 46196752, "comment_id": 79356278, "body": "More efficient about what : code size ? time of execution ? readability ?"}, {"owner": {"reputation": 8833, "user_id": 337149, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3bbd41f2b74254f902cfe20acef9030b?s=128&d=identicon&r=PG", "display_name": "August Karlstrom", "link": "https://stackoverflow.com/users/337149/august-karlstrom"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1505304070, "post_id": 46196752, "comment_id": 79356304, "body": "@AnttiHaapala Unfortunately, in my situation I cannot change the signature of the function <i>Contains</i>."}, {"owner": {"reputation": 8833, "user_id": 337149, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3bbd41f2b74254f902cfe20acef9030b?s=128&d=identicon&r=PG", "display_name": "August Karlstrom", "link": "https://stackoverflow.com/users/337149/august-karlstrom"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1505304205, "post_id": 46196752, "comment_id": 79356402, "body": "@MichaelWalz Doesn&#39;t the question say &quot;all values of x&quot; (this means any value of type int)."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1505304236, "post_id": 46196752, "comment_id": 79356423, "body": "So it is optimal then, but not portable. You need to use <code>CHAR_BIT</code> and find out the number of value bits in <code>unsigned int</code>."}, {"owner": {"reputation": 8833, "user_id": 337149, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3bbd41f2b74254f902cfe20acef9030b?s=128&d=identicon&r=PG", "display_name": "August Karlstrom", "link": "https://stackoverflow.com/users/337149/august-karlstrom"}, "reply_to_user": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "edited": false, "score": 0, "creation_date": 1505304294, "post_id": 46196752, "comment_id": 79356467, "body": "@Garf365 More efficient in terms of execution speed."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1505304444, "post_id": 46196752, "comment_id": 79356572, "body": "@AugustKarlstrom the processor doesn&#39;t execute C code. The processor executes machine code that the C compiler produces."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1505304726, "post_id": 46196752, "comment_id": 79356767, "body": "&quot;To handle&quot; is a bit vague. For instance you could do <code>return (A &amp; (1u &lt;&lt; (x &amp; ((CHAR_BIT * sizeof A) - 1)))) != 0;</code>, which simply defines <code>x</code> to only matter in the least-significant <code>CHAR_BIT * sizeof A</code> bits. Is that &quot;handling&quot;? it?"}, {"owner": {"reputation": 8833, "user_id": 337149, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3bbd41f2b74254f902cfe20acef9030b?s=128&d=identicon&r=PG", "display_name": "August Karlstrom", "link": "https://stackoverflow.com/users/337149/august-karlstrom"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1505304767, "post_id": 46196752, "comment_id": 79356797, "body": "@AnttiHaapala You don&#39;t know which CPU I use ;-)"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1505304800, "post_id": 46196752, "comment_id": 79356818, "body": "C is a very abstract specification that provides almost no efficiency guarantees. You can only talk about efficiency when a specific execution environment is assumed (compiler, OS, hardware)."}, {"owner": {"reputation": 8833, "user_id": 337149, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3bbd41f2b74254f902cfe20acef9030b?s=128&d=identicon&r=PG", "display_name": "August Karlstrom", "link": "https://stackoverflow.com/users/337149/august-karlstrom"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1505304929, "post_id": 46196752, "comment_id": 79356921, "body": "@n.m. Then it is probably best to keep it as it is and let the optimizer decide what to do with it."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1505305112, "post_id": 46196752, "comment_id": 79357028, "body": "If you want execution speed, the function should be inlined. So, at least make it static."}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 1, "creation_date": 1505306221, "post_id": 46196752, "comment_id": 79357876, "body": "Most likely, it won&#39;t make a difference (here is a <a href=\"https://godbolt.org/g/xL6YK4\" rel=\"nofollow noreferrer\">gcc comparison</a> between your code and the <a href=\"https://stackoverflow.com/a/46197199/69809\">answer by @user694733</a> below, gcc and clang seem to be smart enough to see that <code>(x &lt; 8 * sizeof A)</code> already covers the case when <code>x</code> is negative."}], "answers": [{"comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "reply_to_user": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 1, "creation_date": 1505305432, "post_id": 46197199, "comment_id": 79357268, "body": "@Groo Adding <code>UINT_MAX + 1</code> to any negative value will always be larger than INT_MAX. For example, 16-bit values: <code>-32768 + 65536 = 32768</code>"}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1505305537, "post_id": 46197199, "comment_id": 79357358, "body": "You&#39;re right, I was just about to delete the comment. Ironically, <code>(x &lt; 32u)</code> will convert <code>x</code> to unsigned before making the comparison, anyway."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "reply_to_user": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 1, "creation_date": 1505306986, "post_id": 46197199, "comment_id": 79358489, "body": "@Groo Good point. Though there is a possibility that conversion won&#39;t happen if <code>sizeof(int) &gt; sizeof(size_t)</code>. But I don&#39;t know if such machine exists in real life."}], "tags": [], "owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "is_accepted": false, "score": 1, "last_activity_date": 1505304586, "creation_date": 1505304586, "answer_id": 46197199, "question_id": 46196752, "link": "https://stackoverflow.com/questions/46196752/bitset-membership-function/46197199#46197199", "title": "Bitset membership function", "body": "<p>You can skip lower bound check if <code>x</code> is unsigned.</p>\n\n<p>From N1570:</p>\n\n<blockquote>\n  <h3>6.3.1.3 Signed and unsigned integers</h3>\n  \n  <ol>\n  <li>When a value with integer type is converted to another integer type other than _Bool, if\n  the value can be represented by the new type, it is unchanged.</li>\n  <li>Otherwise, if the new type is unsigned, the value is converted by repeatedly adding or\n  subtracting one more than the maximum value that can be represented in the new type\n  until the value is in the range of the new type. <sup>60)</sup></li>\n  </ol>\n</blockquote>\n\n<pre><code>unsigned int y = x;  // Wrap around if x is negative\nreturn (y &lt; CHAR_BIT * sizeof A) &amp;&amp; (1u &lt;&lt; y &amp; A) != 0;\n</code></pre>\n\n<p>Not sure if this really brings any meaningful improvement though. Check your compiler output to make sure.</p>\n"}], "owner": {"reputation": 8833, "user_id": 337149, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3bbd41f2b74254f902cfe20acef9030b?s=128&d=identicon&r=PG", "display_name": "August Karlstrom", "link": "https://stackoverflow.com/users/337149/august-karlstrom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "closed_date": 1505310779, "answer_count": 1, "score": -2, "last_activity_date": 1505304586, "creation_date": 1505303303, "question_id": 46196752, "link": "https://stackoverflow.com/questions/46196752/bitset-membership-function", "closed_reason": "Needs details or clarity", "title": "Bitset membership function", "body": "<p>I'm writing a bitset membership predicate which should handle all values of x:</p>\n\n<pre><code>int Contains(unsigned int A, int x)\n{\n    return (x &gt;= 0) &amp;&amp; (x &lt; 8 * sizeof A) &amp;&amp; (((1u &lt;&lt; x) &amp; A) != 0);\n}\n</code></pre>\n\n<p>Is there a more efficient implementation?</p>\n"}, {"tags": ["c", "linux", "linux-kernel"], "owner": {"reputation": 11, "user_id": 5558246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06292fae67c1e9eab04a2d6f483a87ff?s=128&d=identicon&r=PG&f=1", "display_name": "DmBad", "link": "https://stackoverflow.com/users/5558246/dmbad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 221, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1505303215, "creation_date": 1505303215, "question_id": 46196724, "link": "https://stackoverflow.com/questions/46196724/using-one-linux-kernel-for-2-devices-with-fit-image", "title": "Using one Linux kernel for 2 devices with FIT image", "body": "<p>I want to use one embedded Linux kernel for 2 devices, I build this kernel with mkimage tool and rules in .dts file. Devices differs load and entry points. But u-boot doesn't use load and entry point addresses from configuration, only from kernel section. As result 2 big size data files (fully identical) are included into resulting .dtb file. It's inefficient. Can I transfer correct values from configuration to kernel sections? Or use links to single binary from both kernel sections?</p>\n\n<p>Thank you in advance,\nDmytro Badekha.</p>\n\n<p>Content of ITS file:</p>\n\n<pre><code>/dts-v1/;\n\n/ {\ndescription = \"ARM FIT (Flattened Image Tree)\";\n#address-cells = &lt;1&gt;;\n\nimages {\n    kernel@1 {\n        description = \"ARM OpenWrt Linux-3.14.77\";\n        data = /incbin/(\"./Image.gz\");\n        type = \"kernel\";\n        arch = \"arm\";\n        os = \"linux\";\n        compression = \"gzip\";\n        load = &lt;0x42208000&gt;;\n        entry = &lt;0x42208000&gt;;\n        hash@1 {\n            algo = \"crc32\";\n        };\n        hash@2 {\n            algo = \"sha1\";\n        };\n    };\n\n    kernel@2 {\n        description = \"ARM OpenWrt Linux-3.14.77\";\n        data = /incbin/(\"./Image.gz\");\n        type = \"kernel\";\n        arch = \"arm\";\n        os = \"linux\";\n        compression = \"gzip\";\n        load = &lt;0x80208000&gt;;\n        entry = &lt;0x80208000&gt;;\n        hash@1 {\n            algo = \"crc32\";\n        };\n        hash@2 {\n            algo = \"sha1\";\n        };\n    };\n\n    fdt@v3.0-ap160 {\n        description = \"ARM OpenWrt qcom-ipq806x-akxx device tree blob\";\n        data = /incbin/(\"./qcom-ipq8064-v3.0-ap160.dtb.gz\");\n        type = \"flat_dt\";\n        arch = \"arm\";\n        compression = \"gzip\";\n        load = &lt;0x43F00000&gt;;\n        hash@1 {\n            algo = \"crc32\";\n        };\n        hash@2 {\n            algo = \"sha1\";\n        };\n    };\n\n    fdt@ap.dk04.1-c4 {\n        description = \"ARM OpenWrt qcom-ipq40xx-ap.dkxx device tree blob\";\n        data = /incbin/(\"./qcom-ipq40xx-ap.dk04.1-c4.dtb\");\n        type = \"flat_dt\";\n        arch = \"arm\";\n        compression = \"none\";\n        hash@1 {\n            algo = \"crc32\";\n        };\n        hash@2 {\n            algo = \"sha1\";\n        };\n    };\n};\n\nconfigurations {\n    default = \"config@v3.0-ap160\";\n\n    config@v3.0-ap160 {\n        description = \"OpenWrt\";\n        kernel = \"kernel@1\";\n        fdt = \"fdt@v3.0-ap160\";\n    };\n\n    config@ap.dk04.1-c4 {\n        description = \"OpenWrt\";\n        kernel = \"kernel@2\";\n        fdt = \"fdt@ap.dk04.1-c4\";\n    };\n\n};\n</code></pre>\n\n<p>};</p>\n"}, {"tags": ["c", "node.js", "pipe", "stdout", "stdin"], "answers": [{"comments": [{"owner": {"reputation": 341, "user_id": 1205285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9901bbcd3e75f370bde99bf84ab2788?s=128&d=identicon&r=PG&f=1", "display_name": "Gary Ott", "link": "https://stackoverflow.com/users/1205285/gary-ott"}, "edited": false, "score": 0, "creation_date": 1505307084, "post_id": 46197212, "comment_id": 79358554, "body": "Thank you! This seems to be nine tenths of the problem. I was unaware it could behave differently on the terminal and was convinced the problem was within my Node script. I was looking in completely the wrong place."}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1505304632, "creation_date": 1505304632, "answer_id": 46197212, "question_id": 46195785, "link": "https://stackoverflow.com/questions/46195785/how-to-send-to-stdin-and-receive-from-stdout-of-c-program-from-node-js/46197212#46197212", "title": "How to send to stdin and receive from stdout of C program from Node.js?", "body": "<p>When <code>stdout</code> is not connected to a terminal it is block-buffered. That means the output is not going to be flushed until the buffer fills up or the application terminates.</p>\n\n<p>Add <code>fflush(stdout)</code> after <code>fprintf</code> in you C application.</p>\n"}], "owner": {"reputation": 341, "user_id": 1205285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9901bbcd3e75f370bde99bf84ab2788?s=128&d=identicon&r=PG&f=1", "display_name": "Gary Ott", "link": "https://stackoverflow.com/users/1205285/gary-ott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 792, "favorite_count": 0, "accepted_answer_id": 46197212, "answer_count": 1, "score": 0, "last_activity_date": 1505304632, "creation_date": 1505300476, "last_edit_date": 1505303780, "question_id": 46195785, "link": "https://stackoverflow.com/questions/46195785/how-to-send-to-stdin-and-receive-from-stdout-of-c-program-from-node-js", "title": "How to send to stdin and receive from stdout of C program from Node.js?", "body": "<p>A colleague and I need to interface his C program and my Node.js script. I'm attempting to prove the concept of using stdio to pass messages between the two and so far, the concept isn't proven! The node script starts the executable as a child process on initialisation but then fails to send or receive data. </p>\n\n<p>I have written a very simple C program that echos to stdout whatever it receives on stdin. I'm not a C programmer so hopefully I haven't done anything too shocking in 16 lines :p :</p>\n\n<p><strong>stream_echo.c:</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define BUFFER_SIZE 255\n\nint main(void) {\n\n    char * buffer = calloc(BUFFER_SIZE, 1);\n\n    while(fgets(buffer, BUFFER_SIZE, stdin) != NULL) {\n\n        //Echo back on stdout:\n        fprintf(stdout, \"echo: %s\", buffer);\n    }\n}\n</code></pre>\n\n<p>And testing in the console shows it working as expected:\n<a href=\"https://i.stack.imgur.com/8RAGw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8RAGw.png\" alt=\"stream_echo.c running in terminal window\"></a></p>\n\n<p>The node.js script that calls this executable is as follows:</p>\n\n<p><strong>child_stdio.js</strong></p>\n\n<pre><code>(function() {\n    \"use strict\";\n\n    var jcp = require(\"child_process\").spawn(\"./stream_echo\", [], {\n            detached: false,\n            stdio: \"pipe\"\n        }),\n\n        counter = 0,\n\n        timer,\n\n        sendData = function() {\n            console.log(\"In sendData. Connected: \" + jcp.connected);\n\n            counter += 1;\n            jcp.stdin.write(\"This is data \" + counter + \"\\r\\n\");\n\n            timer = setTimeout(sendData, 2000);\n        };\n\n\n    //******** STDIN ********\n    jcp.stdin.on(\"close\", (data) =&gt; {\n        console.log(\"stdin closed.\");\n        if (timer) {\n            clearTimeout(timer);\n        }\n    });\n\n\n    //******** STDOUT ********\n    jcp.stdout.on(\"data\", (data) =&gt; {\n        console.log(\"stdout: \" + data);\n    });\n\n    jcp.stdout.on(\"close\", (data) =&gt; {\n        console.log(\"stdout closed.\");\n    });\n\n\n    //******** STDERR ********\n    jcp.stderr.on(\"data\", (data) =&gt; {\n        console.log(\"stderr: \" + data);\n    });\n\n    jcp.stderr.on(\"close\", (data) =&gt; {\n        console.log(\"stderr closed.\");\n    });\n\n\n    //******** PROCESS ********\n    jcp.on(\"close\", (code, signal) =&gt; {\n        console.log(\"Child process closed.\\nCode: \" + code + \"\\nSignal: \" + signal);\n    });\n\n    jcp.on(\"exit\", (code, signal) =&gt; {\n        console.log(\"Child process exited.\\nCode: \" + code + \"\\nSignal: \" + signal);\n    });\n\n    jcp.on(\"disconnect\", () =&gt; {\n        console.log(\"Child process disconnected.\");\n    });\n\n    console.log(\"jcp.pid: \" + jcp.pid);\n    console.log(\"Connected: \" + jcp.connected);\n    console.log(\"Calling sendData for the first time....\");\n    sendData();\n\n}());\n</code></pre>\n\n<p>When I run this script, multiple attempts to send data to the child process are made and no errors are reported (despite the <code>connected</code> property of the process being false) but no messages are received back either. When I kill the child process, the stream close events and process close events are triggered and the script gracefully terminates.</p>\n\n<p><a href=\"https://i.stack.imgur.com/sNgOp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sNgOp.png\" alt=\"Execution of child_stdio.js\"></a></p>\n\n<p>I don't understand why <code>connected</code> is false but the close events trigger. I feel this is a major clue.</p>\n\n<p>Can anyone tell me what many hours trawling the Internet cannot?</p>\n"}, {"tags": ["c", "file", "append", "fopen"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1505302576, "post_id": 46195596, "comment_id": 79355273, "body": "Please don&#39;t post pictures of text"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1505321713, "post_id": 46195596, "comment_id": 79368973, "body": "The casts of the variable defined as <code>FILE*fp;</code> using <code>(FILE *)fp</code> are &quot;harmless&quot; but ludicrous."}], "answers": [{"tags": [], "owner": {"reputation": 2525, "user_id": 5402881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbd67023a48b626fa1595d8d5cf8404e?s=128&d=identicon&r=PG&f=1", "display_name": "yacc", "link": "https://stackoverflow.com/users/5402881/yacc"}, "is_accepted": false, "score": 0, "last_activity_date": 1505300665, "creation_date": 1505300665, "answer_id": 46195851, "question_id": 46195596, "link": "https://stackoverflow.com/questions/46195596/c-programming-with-files-in-different-modes/46195851#46195851", "title": "C programming with files in different modes?", "body": "<p>The C library function <code>char *fgets(char *str, int n, FILE *stream)</code> reads a line from the specified stream and stores it into the string pointed to by str. It stops when either (n-1) characters are read, the newline character is read, or the end-of-file is reached, whichever comes first.</p>\n\n<p>This is why the last part of your code shows only the first line of the file. And the reason why you don't get an output for the <code>printf(\"After append %s\\n\",buff);</code> is that the file pointer is located at <code>EOF</code> at this time.</p>\n\n<p>When you <code>cat</code> the file you'll see that all the lines are there.</p>\n"}], "owner": {"reputation": 11, "user_id": 4825394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9536776065ceec50c5c81a43b33d7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/4825394/anonymous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1505300665, "creation_date": 1505299892, "last_edit_date": 1505300314, "question_id": 46195596, "link": "https://stackoverflow.com/questions/46195596/c-programming-with-files-in-different-modes", "title": "C programming with files in different modes?", "body": "<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\n    FILE *fp;\n    char buff[255];\n\n    fp=fopen(\"test.txt\",\"w\");\n\n    printf(\"File test.txt in w mode\\n\");\n    fprintf(fp,\"Template string 1:\\n\");\n\n    fputs(\"Template string 2:\",fp);\n    printf(\"File test.txt is created at local path\\n\\n\");\n    fclose(fp);\n\n    fp=fopen(\"test.txt\",\"r\");\n    printf(\"\\n\\nFile test.txt in r mode\\n\");\n    fscanf(fp,\"%s\",buff);\n    printf(\"The content of the file test.txt using fscanf() is:\\n%s\\n\",buff);\n\n    fgets(buff,255,(FILE *)fp);\n    printf(\"The content of the file test.txt using fgets() is :\\n%s\\n\",buff);\n\n    fgets(buff,255,(FILE *)fp);\n    printf(\"The content of the file using fgets() is :\\n%s\\n\",buff);\n    fclose(fp);\n\n    fp=fopen(\"test.txt\",\"a\");\n    printf(\"\\n\\nFile test.txt in a mode\\n\");\n    fprintf(fp,\"Template String 3:\\n\");\n    fgets(buff,255,(FILE *)fp);\n    printf(\"After append %s\\n\",buff);\n    fclose(fp);\n\n    fp=fopen(\"test.txt\",\"r+\");\n    printf(\"File test.txt in r+ mode\\n\");\n    fgets(buff,255,(FILE *)fp);\n    printf(\"\\n\\nThe content of the file test.txt in r+ mode is:\\n%s\\n\",buff);\n    fclose(fp);\n}\n</code></pre>\n\n<p>I have the above code which i understood. I have a doubt that when i append the string \"Template string 3:\" my fp adds the content to file <code>test.txt</code> at the end of the file and after adding fp should points to the end of file(i hope) but if i use <code>fgets</code> to read the content of the file from fp to the buff what it should have. Can anyone explain what is that happening at this point of time.</p>\n\n<p><a href=\"https://i.stack.imgur.com/jwUBI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jwUBI.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c", "parsing", "config", "file-read"], "comments": [{"owner": {"reputation": 215, "user_id": 4402533, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh6.googleusercontent.com/-relZttXASy8/AAAAAAAAAAI/AAAAAAAAAAA/k2Rz4TVka3w/photo.jpg?sz=128", "display_name": "Pramod Yadav", "link": "https://stackoverflow.com/users/4402533/pramod-yadav"}, "edited": false, "score": 0, "creation_date": 1505297881, "post_id": 46194642, "comment_id": 79351987, "body": "Please explain your question properly and more precisely. Let us know, what exactly you want"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 2, "creation_date": 1505298227, "post_id": 46194642, "comment_id": 79352278, "body": "Small program, little input data, ... Perfect place to start learning how to debug your programs."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1505298369, "post_id": 46194642, "comment_id": 79352396, "body": "<i>The compare allways failes</i> : Comparison with <code>Test</code> is successful and <code>1234</code> is obtained. <a href=\"https://wandbox.org/permlink/dxtr7QzBkcljNlbc\" rel=\"nofollow noreferrer\">DEMO</a>"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1505298413, "post_id": 46194642, "comment_id": 79352411, "body": "You shouldn&#39;t have your variables CAPITALIZED like that as they look like constants rather than variables"}, {"owner": {"reputation": 375, "user_id": 5802653, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/cc6949d1ad72620fc2e81eb3f8e5fdd6?s=128&d=identicon&r=PG&f=1", "display_name": "Oliver Strong", "link": "https://stackoverflow.com/users/5802653/oliver-strong"}, "edited": false, "score": 0, "creation_date": 1505514950, "post_id": 46194642, "comment_id": 79460793, "body": "Thank you BLUEPIXY the problem was in the gcc options."}], "answers": [{"tags": [], "owner": {"reputation": 375, "user_id": 5802653, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/cc6949d1ad72620fc2e81eb3f8e5fdd6?s=128&d=identicon&r=PG&f=1", "display_name": "Oliver Strong", "link": "https://stackoverflow.com/users/5802653/oliver-strong"}, "is_accepted": true, "score": 0, "last_activity_date": 1515130436, "last_edit_date": 1515130436, "creation_date": 1515123285, "answer_id": 48106874, "question_id": 46194642, "link": "https://stackoverflow.com/questions/46194642/config-file-parsing-string-matching-error-in-c/48106874#48106874", "title": "Config file parsing string matching error in c", "body": "<p>Thanks to BLUEPIXY and the demo they created this problem has been solved. The issue was in the gcc comiler options I had forgotten -std=99 somehow this caused the program to behave correctly.</p>\n"}], "owner": {"reputation": 375, "user_id": 5802653, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/cc6949d1ad72620fc2e81eb3f8e5fdd6?s=128&d=identicon&r=PG&f=1", "display_name": "Oliver Strong", "link": "https://stackoverflow.com/users/5802653/oliver-strong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 48106874, "answer_count": 1, "score": 0, "last_activity_date": 1515130436, "creation_date": 1505297158, "last_edit_date": 1505298589, "question_id": 46194642, "link": "https://stackoverflow.com/questions/46194642/config-file-parsing-string-matching-error-in-c", "title": "Config file parsing string matching error in c", "body": "<p>While I am aware there are libraries for config file parsing I have tried to write my own implementation. The problem is that I can find the config option but comparing the string before the delimeter failes when I try to compare it with the thing I am searching for. I need to comare it with the thing I am searching for becasue my program allows things like Test2 and Test3 because it cannot check if there are characters before or after the word Test. The compare allways failes and I cannot figure out why.\nHere is my code:</p>\n\n<p>Main.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid Parser(char *CONFIG_FILE, int *P_VALUE, char *STRING_TO_LOOK_FOR);\n\nint main(){\n    int VALUE;\n    Parser(\"config.txt\", &amp;VALUE, \"Test\");\n    printf(\"%d \\n\", VALUE);\n}\n</code></pre>\n\n<p>Parser.c:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nvoid Parser(char *CONFIG_FILE, int *P_VALUE, char *STRING_TO_LOOK_FOR){\n    FILE *FP=fopen(CONFIG_FILE,\"a+\");\n    char TMP[256]={0x0};\n    int i = 1;\n    while(FP!=NULL &amp;&amp; fgets(TMP, sizeof(TMP), FP)!=NULL){ //Loop through every line\n        i=i+1; //Increment the line number\n        if (strstr(TMP, STRING_TO_LOOK_FOR)){ //Is the term im looking for in this line\n            char *NAME_OF_CONFIG_STR = strtok(TMP, \"= \"); //look for delimiter\n            char *STRVALUE = strtok(NULL, \"= \"); //Get everything past the delimiter\n            char *P_PTR;\n            char *pos;\n            if ((pos=strchr(NAME_OF_CONFIG_STR, '\\n')) != NULL){ //attempt remove \\n doesn't work\n                *pos = '\\0';\n            }\n\n            if(strcmp(STRING_TO_LOOK_FOR, NAME_OF_CONFIG_STR) == 0){ //try to check the two are the same\n                *P_VALUE = strtol(STRVALUE, &amp;P_PTR, 10); //Returns an integer to main of the value\n            }\n        }\n    }\n    if(FP != NULL){\n        fclose(FP);\n    }\n}\n</code></pre>\n\n<p>config.txt:</p>\n\n<pre><code>Test= 1234\nTest2= 5678\nTest3= 9012\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1505297178, "post_id": 46194593, "comment_id": 79351475, "body": "What is your input? What is your output? What is your <i>expected</i>  output? Please <a href=\"https://stackoverflow.com/posts/46194593/edit\">edit</a>  your question and make that clear."}, {"owner": {"reputation": 77, "user_id": 8026603, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10213229531438724/picture?type=large", "display_name": "Alviss Min", "link": "https://stackoverflow.com/users/8026603/alviss-min"}, "edited": false, "score": 0, "creation_date": 1505298176, "post_id": 46194593, "comment_id": 79352242, "body": "Thanks alot. it works now with strcpy. :D Thanks again"}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 8026603, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10213229531438724/picture?type=large", "display_name": "Alviss Min", "link": "https://stackoverflow.com/users/8026603/alviss-min"}, "edited": false, "score": 0, "creation_date": 1505298173, "post_id": 46194681, "comment_id": 79352230, "body": "Thanks alot. it works now! :D"}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 1, "creation_date": 1505298934, "post_id": 46194681, "comment_id": 79352759, "body": "<code>strncpy</code> is for copying fixed length character arrays. As such each answer that suggest that function <i>must always</i> warn about its flakey zero termination behaviour. It&#39;s not an issue with code in question, but may be when code is modified later on."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1505301389, "post_id": 46194681, "comment_id": 79354438, "body": "Indeed. <code>strncpy</code> is a dangerous function and should not be used. In particular we shouldn&#39;t recommend it to beginners. Use <code>strcpy</code> or <code>memcpy</code> instead. <a href=\"https://stackoverflow.com/questions/2114896/why-are-strlcpy-and-strlcat-considered-insecure\" title=\"why are strlcpy and strlcat considered insecure\">stackoverflow.com/questions/2114896/&hellip;</a>"}, {"owner": {"reputation": 68808, "user_id": 718618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9878e99dc2bbd256050b7dc4ffea820b?s=128&d=identicon&r=PG", "display_name": "C&#233;dric Julien", "link": "https://stackoverflow.com/users/718618/c%c3%a9dric-julien"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1505305631, "post_id": 46194681, "comment_id": 79357438, "body": "@Lundin I updated with use of strcpy :)"}], "tags": [], "owner": {"reputation": 68808, "user_id": 718618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9878e99dc2bbd256050b7dc4ffea820b?s=128&d=identicon&r=PG", "display_name": "C&#233;dric Julien", "link": "https://stackoverflow.com/users/718618/c%c3%a9dric-julien"}, "is_accepted": true, "score": 1, "last_activity_date": 1505305552, "last_edit_date": 1505305552, "creation_date": 1505297287, "answer_id": 46194681, "question_id": 46194593, "link": "https://stackoverflow.com/questions/46194593/char-array-is-not-working-properly-as-it-should-c-programming/46194681#46194681", "title": "char Array is not working properly as it should ( C programming )", "body": "<p>When you do <code>B[string] = buffer</code>you do not copy the string, you just make a copy of the pointer, you should use <a href=\"http://man7.org/linux/man-pages/man3/strcpy.3.html\" rel=\"nofollow noreferrer\">strcpy()</a>.</p>\n\n<p>Assuming that your string is always <code>\\0</code> terminated, something like that should work <code>strcpy(B[i], buffer);</code></p>\n"}], "owner": {"reputation": 77, "user_id": 8026603, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10213229531438724/picture?type=large", "display_name": "Alviss Min", "link": "https://stackoverflow.com/users/8026603/alviss-min"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "closed_date": 1505301315, "accepted_answer_id": 46194681, "answer_count": 1, "score": 1, "last_activity_date": 1505305552, "creation_date": 1505297043, "last_edit_date": 1505297744, "question_id": 46194593, "link": "https://stackoverflow.com/questions/46194593/char-array-is-not-working-properly-as-it-should-c-programming", "closed_reason": "Duplicate", "title": "char Array is not working properly as it should ( C programming )", "body": "<pre><code>#define OK 0\n#define MAXSTRING 200\n#define NUMBER 10\n#define MALLOC_ERROR 2\n\nint main(int argc, char** argv) {\n\n    char **B = (char**)malloc(sizeof(char*)*NUMBER);\n    char buffer[MAXSTRING];\n    int i, strings = 0, arraysize = NUMBER;\n\n    if (( B = ( char**)malloc(sizeof(char*)*NUMBER))==NULL) {\n        printf(\"initial malloc error\\n\");\n        fflush(stdout);\n        exit(MALLOC_ERROR);\n    }\n\n    for(int i = 0; i&lt; NUMBER; i++) {\n        B[i] = (char*)malloc(sizeof(char)*MAXSTRING);\n    }\n    while((fgets(buffer,MAXSTRING,stdin))!=NULL) {\n        /*\n            if(strings+1&gt;arraysize)\n            {\n                arraysize = 2*arraysize;\n                B=realloc(B,(arraysize)*sizeof(char*));\n            }\n        */\n        buffer[strlen(buffer)-1]='\\0';\n        B[strings] = buffer;\n        printf(\"%s \\n\", buffer);\n        strings++;\n    }\n\n\n    printf(\"Read %d strings:\\n\", strings);\n    for (i = 0; i&lt;strings ; i++) {\n      printf(\"\\t%s\\t %d\\n\", B[i], (int)strlen(B[i]));\n    }\n    return 0;\n}\n</code></pre>\n\n<p>When i tried to print the B[i] from the loop,it just outputs the last input of the stdin in all of its positions. I tried testing with normal for loop and it somehow works, but i do not know the cause of the problem. Thanks for the help!! For example, i put \"giraffe\" as first input, another input \"eat\", last input\"leaves\", the loop of B[i] only outputs \"leaves\"</p>\n"}, {"tags": ["c", "pointers", "malloc"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1505297105, "post_id": 46194499, "comment_id": 79351423, "body": "&quot;Correct values&quot; is a concept defined by <i>you</i>. So we can&#39;t tell you if it&#39;s correct. You did do the right thing by initializing it after allocating it, however."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1505301602, "post_id": 46194499, "comment_id": 79354578, "body": "You need to show how you call the function and how the <code>sys</code> variable is declared, or nobody will be able to answer the question. Also it isn&#39;t clear what &quot;safe values&quot; means, that&#39;s something on the application level."}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 2, "last_activity_date": 1505297186, "last_edit_date": 1505297186, "creation_date": 1505297068, "answer_id": 46194600, "question_id": 46194499, "link": "https://stackoverflow.com/questions/46194499/how-to-initialize-struct-to-safe-values/46194600#46194600", "title": "How to initialize struct to safe values", "body": "<p>In your code, <code>list</code> is a variable of type <code>List *</code>. For a pointer to <code>List</code> type, the required memory is of the size of type <code>List</code>, not a pointer-to-<code>List</code>.</p>\n\n<p>So, the problem is</p>\n\n<pre><code>    malloc(sizeof(list));\n</code></pre>\n\n<p>allocates way less memory than expected. You need</p>\n\n<pre><code>    malloc(sizeof *list); // same as malloc(sizeof(List));\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 8526343, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/473d7a5afef04d5cea70f7aded28173a?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny  S", "link": "https://stackoverflow.com/users/8526343/johnny-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1505299246, "creation_date": 1505296783, "last_edit_date": 1505299246, "question_id": 46194499, "link": "https://stackoverflow.com/questions/46194499/how-to-initialize-struct-to-safe-values", "title": "How to initialize struct to safe values", "body": "<p>I have a function which needs to initialize a struct to a known safe state. the following code what i have done so far, i dont think this correct or maybe, however how do i correctly intialize the struct to safe values, as it needs to passed around the rest of my code;</p>\n\n<pre><code>Boolean sysON(FooSystem * sys) {\n    List * list = malloc(sizeof(list));\n\n    sys-&gt;cash[0].denom = 1;\n    sys-&gt;cash[1].denom = 1;\n    sys-&gt;cash[2].denom = 1;\n    sys-&gt;cash[3].denom = 1;\n    sys-&gt;cash[4].denom = 1;\n    ...\n\n    sys-&gt;list = list;\n    sys-&gt;stockFileName = \"bar.dat\";\n\n    return FALSE;\n} \n</code></pre>\n\n<p>the struct is;</p>\n\n<pre><code>typedef struct Foo_system {\n    Coin cash[8];\n    List * list;\n    const char * coinFileName;\n} FooSystem;\n</code></pre>\n\n<p>or instead should i be malloc(sizeof(foo)) all of the variables in the sysON function? </p>\n\n<p><strong>EDIT</strong></p>\n\n<p>when i have more than 4 of the following pices of code it crashs my program;</p>\n\n<pre><code>  sys-&gt;cash[0].denom = 1;\n  ...\n  sys-&gt;cash[4].denom = 1;\n</code></pre>\n\n<p>my program crashs and i recieve the following error - \n<strong>* Error in `./vm': munmap_chunk(): invalid pointer: 0x0000000000d0c030 *</strong>\n Found out what my problem was, as persons said below i wasnt allocating enough memory.</p>\n"}, {"tags": ["c", "stm32f4discovery", "adc"], "comments": [{"owner": {"reputation": 1741, "user_id": 2487023, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b43fedcd2290573209fdc2a0cc0c03fd?s=128&d=identicon&r=PG", "display_name": "koalo", "link": "https://stackoverflow.com/users/2487023/koalo"}, "edited": false, "score": 0, "creation_date": 1505294143, "post_id": 46193441, "comment_id": 79349182, "body": "What does a connected multimeter show when pushing?"}, {"owner": {"reputation": 1, "user_id": 7764944, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hXCz0j8zFHo/AAAAAAAAAAI/AAAAAAAAA1M/Tyvajfa3v0o/photo.jpg?sz=128", "display_name": "radipta ady", "link": "https://stackoverflow.com/users/7764944/radipta-ady"}, "reply_to_user": {"reputation": 1741, "user_id": 2487023, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b43fedcd2290573209fdc2a0cc0c03fd?s=128&d=identicon&r=PG", "display_name": "koalo", "link": "https://stackoverflow.com/users/2487023/koalo"}, "edited": false, "score": 0, "creation_date": 1505295240, "post_id": 46193441, "comment_id": 79350022, "body": "when pushing from minimal to max, at some 75% of the analog angle it gave me 1023 and after that decreasing to 760 until 100% max angle"}, {"owner": {"reputation": 1741, "user_id": 2487023, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b43fedcd2290573209fdc2a0cc0c03fd?s=128&d=identicon&r=PG", "display_name": "koalo", "link": "https://stackoverflow.com/users/2487023/koalo"}, "edited": false, "score": 0, "creation_date": 1505295553, "post_id": 46193441, "comment_id": 79350259, "body": "The multimeter gave you 1023 V?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 1741, "user_id": 2487023, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b43fedcd2290573209fdc2a0cc0c03fd?s=128&d=identicon&r=PG", "display_name": "koalo", "link": "https://stackoverflow.com/users/2487023/koalo"}, "edited": false, "score": 0, "creation_date": 1505295612, "post_id": 46193441, "comment_id": 79350306, "body": "@koalo <i>Obviously</i> the OP means the ADC read value..."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1505295670, "post_id": 46193441, "comment_id": 79350346, "body": "Stupid question but did you set the STM32F up to use 10 bit reads? Otherwise you should obviously divide by 4096 and not 1024, since the STM32F seems to have a 12 bit ADC."}, {"owner": {"reputation": 1741, "user_id": 2487023, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b43fedcd2290573209fdc2a0cc0c03fd?s=128&d=identicon&r=PG", "display_name": "koalo", "link": "https://stackoverflow.com/users/2487023/koalo"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1505296016, "post_id": 46193441, "comment_id": 79350601, "body": "@Lundin and obviously I meant the voltage in my clarification comment so that we are able to verify his conversion and rule out any problems with the electronics"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 1741, "user_id": 2487023, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b43fedcd2290573209fdc2a0cc0c03fd?s=128&d=identicon&r=PG", "display_name": "koalo", "link": "https://stackoverflow.com/users/2487023/koalo"}, "edited": false, "score": 0, "creation_date": 1505296291, "post_id": 46193441, "comment_id": 79350787, "body": "@koalo If the OP measure 1024V on their evaluation board, then it means that the board is completely fried and that they must be programming sitting inside some power station where such exotic voltages are available."}, {"owner": {"reputation": 1, "user_id": 7764944, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hXCz0j8zFHo/AAAAAAAAAAI/AAAAAAAAA1M/Tyvajfa3v0o/photo.jpg?sz=128", "display_name": "radipta ady", "link": "https://stackoverflow.com/users/7764944/radipta-ady"}, "reply_to_user": {"reputation": 1741, "user_id": 2487023, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b43fedcd2290573209fdc2a0cc0c03fd?s=128&d=identicon&r=PG", "display_name": "koalo", "link": "https://stackoverflow.com/users/2487023/koalo"}, "edited": false, "score": 0, "creation_date": 1505296515, "post_id": 46193441, "comment_id": 79350976, "body": "@koalo there is nothing to do with electronic, the joystick work well when I use it with arduino"}, {"owner": {"reputation": 1, "user_id": 7764944, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hXCz0j8zFHo/AAAAAAAAAAI/AAAAAAAAA1M/Tyvajfa3v0o/photo.jpg?sz=128", "display_name": "radipta ady", "link": "https://stackoverflow.com/users/7764944/radipta-ady"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1505296569, "post_id": 46193441, "comment_id": 79351009, "body": "@Lundin I&#39;ve set the STM32F4 to use 10bit reads in this line: ADC_InitStructure.ADC_Resolution = ADC_Resolution_10b;"}], "owner": {"reputation": 1, "user_id": 7764944, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hXCz0j8zFHo/AAAAAAAAAAI/AAAAAAAAA1M/Tyvajfa3v0o/photo.jpg?sz=128", "display_name": "radipta ady", "link": "https://stackoverflow.com/users/7764944/radipta-ady"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1505296416, "creation_date": 1505293979, "last_edit_date": 1505296416, "question_id": 46193441, "link": "https://stackoverflow.com/questions/46193441/incorrect-joystick-sensor-data-when-access-it-using-stm32f4-discovery", "title": "incorrect joystick sensor data when access it using STM32F4 discovery", "body": "<p>I want to access joystick sensor data using 10bit ADC2 and ADC3 of stm32f4 discovery by divide the two variable resistor data as X and Y. All I want is when when I pull the analog maximally, the Y ADC data shows 0 and when I push the analog, it shows 1024 value. and for X data uses the same analogy. when I use arduino it did great and the data was good. the middle position of the analog gave me value around 512. But it did not go well when I use stm32f4 discovery. the middle value gave me around 810 and value when i push maximally the data get weird and it shows around 769. both X and Y gave me the same behavior.</p>\n\n<pre><code>void ADCinit_SoftTrigger()      //configurations of adc(sensor) reader\n{\n   GPIO_InitTypeDef GPIO_InitStructure;\n   ADC_InitTypeDef  ADC_InitStructure;\n   ADC_CommonInitTypeDef ADC_CommonInitStructure;\n\n   RCC_APB2PeriphClockCmd(RCC_APB2Periph_ADC2 | RCC_APB2Periph_ADC3, ENABLE);\n   RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOA, ENABLE);\n\n   GPIO_InitStructure.GPIO_Pin = GPIO_Pin_2 | GPIO_Pin_3;\n   GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AN;\n   GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_NOPULL;\n\n   GPIO_Init(GPIOA, &amp;GPIO_InitStructure);\n\n   ADC_CommonInitStructure.ADC_Mode = ADC_DualMode_RegSimult;\n   ADC_CommonInitStructure.ADC_Prescaler = ADC_Prescaler_Div2;\n   ADC_CommonInitStructure.ADC_DMAAccessMode = ADC_DMAAccessMode_Disabled;\n   ADC_CommonInit(&amp;ADC_CommonInitStructure); //\n\n   ADC_InitStructure.ADC_Resolution = ADC_Resolution_10b;\n   ADC_InitStructure.ADC_ScanConvMode = DISABLE;\n   ADC_InitStructure.ADC_ContinuousConvMode = DISABLE;\n   ADC_InitStructure.ADC_ExternalTrigConvEdge = ADC_ExternalTrigConvEdge_None;\n   ADC_InitStructure.ADC_ExternalTrigConv = ADC_ExternalTrigConv_T1_CC1;\n   ADC_InitStructure.ADC_DataAlign = ADC_DataAlign_Right;\n   ADC_InitStructure.ADC_NbrOfConversion = 1;\n   ADC_Init(ADC2, &amp;ADC_InitStructure);\n\n   ADC_RegularChannelConfig(ADC2, ADC_Channel_2, 1, ADC_SampleTime_3Cycles);\n   ADC_Init(ADC3, &amp;ADC_InitStructure);\n   ADC_RegularChannelConfig(ADC3, ADC_Channel_3, 1, ADC_SampleTime_3Cycles);\n\n   ADC_Cmd(ADC2, ENABLE);\n   ADC_Cmd(ADC3, ENABLE);\n}\n\nuint16_t ADC_read(ADC_TypeDef* ADCX,uint8_t channel,uint8_t ADC_SampleTime)\n{\n   ADC_RegularChannelConfig(ADCX,channel,1,ADC_SampleTime); \n   ADC_SoftwareStartConv(ADCX);\n   while(ADC_GetFlagStatus(ADCX, ADC_FLAG_EOC)==0);\n   return ADC_GetConversionValue(ADCX);\n}\n\nvoid read_sensor()\n{\n  x=ADC_read(ADC2,ADC_Channel_2,ADC_SampleTime_144Cycles); //pin A2\n  y=ADC_read(ADC3,ADC_Channel_3,ADC_SampleTime_144Cycles); //pin A3\n\n  sprintf(bufADC,\"\\nX : %d     Y : %d\",x, y );\n  USART_puts(bufADC);\n} \n</code></pre>\n"}, {"tags": ["c", "dll", "dlopen", "physfs"], "comments": [{"owner": {"reputation": 14872, "user_id": 3919155, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3034f14bf0b65847592b2c2e08b9253e?s=128&d=identicon&r=PG&f=1", "display_name": "jotik", "link": "https://stackoverflow.com/users/3919155/jotik"}, "edited": false, "score": 1, "creation_date": 1505292464, "post_id": 46192846, "comment_id": 79347976, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/5053664/dlopen-from-memory\">dlopen from memory?</a>"}, {"owner": {"reputation": 142, "user_id": 7079243, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-b2jpXOCEEIg/AAAAAAAAAAI/AAAAAAABYjE/-JPaE-lmXu8/photo.jpg?sz=128", "display_name": "Stephanus Tavilrond", "link": "https://stackoverflow.com/users/7079243/stephanus-tavilrond"}, "reply_to_user": {"reputation": 14872, "user_id": 3919155, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3034f14bf0b65847592b2c2e08b9253e?s=128&d=identicon&r=PG&f=1", "display_name": "jotik", "link": "https://stackoverflow.com/users/3919155/jotik"}, "edited": false, "score": 0, "creation_date": 1505292617, "post_id": 46192846, "comment_id": 79348064, "body": "Only halfway. I only require loading form memory, due to the usage of PhysFS. And because I need to somehow dlsym the functions."}, {"owner": {"reputation": 7698, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1505292656, "post_id": 46192846, "comment_id": 79348089, "body": "@StephanusTavilrond Don&#39;t use it then?"}, {"owner": {"reputation": 142, "user_id": 7079243, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-b2jpXOCEEIg/AAAAAAAAAAI/AAAAAAABYjE/-JPaE-lmXu8/photo.jpg?sz=128", "display_name": "Stephanus Tavilrond", "link": "https://stackoverflow.com/users/7079243/stephanus-tavilrond"}, "edited": false, "score": 0, "creation_date": 1505292707, "post_id": 46192846, "comment_id": 79348119, "body": "Not-using PhysFS is not an option. It is the necessity of making it modder-friendly."}, {"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "edited": false, "score": 0, "creation_date": 1505292920, "post_id": 46192846, "comment_id": 79348253, "body": "C++ or C - pick one."}, {"owner": {"reputation": 142, "user_id": 7079243, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-b2jpXOCEEIg/AAAAAAAAAAI/AAAAAAABYjE/-JPaE-lmXu8/photo.jpg?sz=128", "display_name": "Stephanus Tavilrond", "link": "https://stackoverflow.com/users/7079243/stephanus-tavilrond"}, "edited": false, "score": 0, "creation_date": 1505293021, "post_id": 46192846, "comment_id": 79348329, "body": "I&#39;m not sure if that&#39;s very relevant, but if I must choose, I say C. PhysFS is written in C, the Lua library is written in C. All the functions I register to Lua must have a C linkage (no C++ name mangling)."}, {"owner": {"reputation": 142, "user_id": 7079243, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-b2jpXOCEEIg/AAAAAAAAAAI/AAAAAAABYjE/-JPaE-lmXu8/photo.jpg?sz=128", "display_name": "Stephanus Tavilrond", "link": "https://stackoverflow.com/users/7079243/stephanus-tavilrond"}, "edited": false, "score": 0, "creation_date": 1505294811, "post_id": 46192846, "comment_id": 79349683, "body": "Silly me... I didn&#39;t realize that I can just create the temporary file in /tmp, fill it with zeroes, then mmap it, use PHYSFS_read write onto it, flush, and then load it with dlopen. Somewhat more elegant (and possibly less roundabout) than just using fopen, PHYSFS_read into a malloc-d memory (or C++ char vector), and then fwrite, fclose and dlopen."}], "owner": {"reputation": 142, "user_id": 7079243, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-b2jpXOCEEIg/AAAAAAAAAAI/AAAAAAABYjE/-JPaE-lmXu8/photo.jpg?sz=128", "display_name": "Stephanus Tavilrond", "link": "https://stackoverflow.com/users/7079243/stephanus-tavilrond"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 215, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1505293496, "creation_date": 1505292152, "last_edit_date": 1505293496, "question_id": 46192846, "link": "https://stackoverflow.com/questions/46192846/how-to-load-a-dynamically-library-via-physfs", "title": "How to load a dynamically library via PhysFS?", "body": "<p>Here's my predicament: I am using <a href=\"https://icculus.org/physfs/\" rel=\"nofollow noreferrer\">PhysFS</a>, which allows me to treat multiple directories and archives as one virtual directory. This is for a video game in the future, which I intend to make modder-friendly. PhysFS is the best way to make it modding-friendly.</p>\n\n<p>At the same time, I also intend to use a script-extender of a sort that dnyamically loads libraries and registers them in Lua. <a href=\"https://github.com/Metalhead33/LuaModulaLoader\" rel=\"nofollow noreferrer\">I already created a crude, makeshift, largerly proof-of-concept Lua script extender</a>.</p>\n\n<p>So what is my issue? My issue is that <em>dlopen / LoadLibrary</em> only works with files on a real filesystem. And I want to load via PhysFS. I load the file via PHYSFS_openRead, then use PHYSFS_read to load the file's full content into a memory buffer.</p>\n\n<p>Some people suggested loading the <em>.so / .dll</em> file into the memory from PhysFS, and then writing it out to /tmp in Linux, or C:\\temp in Windows, and then dlopen-ing it. <strong>But I don't think that's a very elegant way to do it.</strong></p>\n\n<p>So... any other ideas? I did look into <a href=\"https://en.wikipedia.org/wiki/Mmap\" rel=\"nofollow noreferrer\">mmap</a> and thought maybe I could manually load the ELF file <em>(on Linux)</em> and somehow manually extract the functions, and finally register them for Lua, but so far, <a href=\"https://bitbucket.org/metalhead33foundation/elfload/src\" rel=\"nofollow noreferrer\">all I could produce was a program that gave me information about the elf</a>.</p>\n\n<p>People said that I should look into <a href=\"https://www.gnu.org/software/libjit/\" rel=\"nofollow noreferrer\">LibJIT</a>, but I'm not exactly sure how that would help me.</p>\n\n<p>So what should I do? How do I load a library into memory via PhysFS, and use an <strong>alternative to dlopen</strong> to... dlsym the functions out of it?</p>\n\n<p><em>Please don't suggest dlopen, unless you genuinely suggest that I write out the file temporarily.</em></p>\n\n<p><strong>My question is largerly: how do I link? How do I get the functions out of the library which I already have in memory? And why do some people suggest <a href=\"https://www.gnu.org/software/libjit/\" rel=\"nofollow noreferrer\">LibJIT</a> to me?</strong></p>\n"}, {"tags": ["c", "pointers"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 8585342, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FcRvN.jpg?s=128&g=1", "display_name": "\u041a\u0430\u0442\u044f", "link": "https://stackoverflow.com/users/8585342/%d0%9a%d0%b0%d1%82%d1%8f"}, "edited": false, "score": 0, "creation_date": 1505292095, "post_id": 46192756, "comment_id": 79347722, "body": "ah ok, i was not quit sure what was causing the warning and how i was supposed to resolve the issue. thank you"}], "tags": [], "owner": {"reputation": 7371, "user_id": 1510211, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4acda0216d7fd2ea07c31c0cfc53a714?s=128&d=identicon&r=PG", "display_name": "Shachar Shemesh", "link": "https://stackoverflow.com/users/1510211/shachar-shemesh"}, "is_accepted": true, "score": 2, "last_activity_date": 1505291889, "creation_date": 1505291889, "answer_id": 46192756, "question_id": 46192440, "link": "https://stackoverflow.com/questions/46192440/cast-to-pointer-from-integer-of-different-size/46192756#46192756", "title": "cast to pointer from integer of different size", "body": "<p>I fail to see what the question might be that is not answered by the compiler warning. You've got a variable \"i\" of type <code>int</code> (32 bit on 64 bit platforms), shadowing another variable called \"i\" in the main program.</p>\n\n<p>You're casting the <code>int</code> variable to <code>void*</code>, and the compiler says you can't do that, because you are 32 bit short. Rename one of the two variables called <code>i</code> in your program to resolve.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user8293581"}, "is_accepted": false, "score": 0, "last_activity_date": 1505360130, "creation_date": 1505360130, "answer_id": 46210111, "question_id": 46192440, "link": "https://stackoverflow.com/questions/46192440/cast-to-pointer-from-integer-of-different-size/46210111#46210111", "title": "cast to pointer from integer of different size", "body": "<p>You\u2019re getting the warning because the variable \u201ci\u201d is declared twice in the same scope. The memory address of \u2018i\u2019 in your loop doesn\u2019t change so what do you need the pointer outside the loop for? </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main (void) {\n    for (int i = 75; i &lt; 75 + 26; i++) {\n        printf(\"Char= %c    ASCII = %i    hex = %x    pointer = %p  \\n\", i, i, i , &amp;i );\n    }\n   return(0);\n}\n</code></pre>\n\n<p>or yet still if you still want to have two variables.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint i;\nint *j = &amp;i;\n\nint main (void) {\nfor ( i = 75; i &lt; 75 + 26; i++) {\n    printf(\"Char= %c    ASCII = %i    hex = %x    pointer = %p  \\n\", i, i, i , (void *)j );\n}\nreturn(0);\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 8585342, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FcRvN.jpg?s=128&g=1", "display_name": "\u041a\u0430\u0442\u044f", "link": "https://stackoverflow.com/users/8585342/%d0%9a%d0%b0%d1%82%d1%8f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 928, "favorite_count": 0, "accepted_answer_id": 46192756, "answer_count": 2, "score": 0, "last_activity_date": 1505360130, "creation_date": 1505290808, "last_edit_date": 1505293730, "question_id": 46192440, "link": "https://stackoverflow.com/questions/46192440/cast-to-pointer-from-integer-of-different-size", "title": "cast to pointer from integer of different size", "body": "<p><strong>I keep getting this warning</strong></p>\n\n<blockquote>\n  <p>c:9:80: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]</p>\n  \n  <p>printf(\"Char= %c    ASCII = %i    hex = %x    pointer = %p  \\n\", i, i, i , (void*)i );</p>\n</blockquote>\n\n<p>Code                                                                    </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main (void) {\n    int *i;\n    for (int i = 75; i &lt; 75 + 26; i++) {\n        printf(\"Char= %c    ASCII = %i    hex = %x    pointer = %p  \\n\", i, i, i , (void*)i ); \n    }\n    return(0); \n} \n</code></pre>\n"}, {"tags": ["c"], "owner": {"reputation": 11, "user_id": 8513853, "user_type": "registered", "profile_image": "https://graph.facebook.com/1406074409509103/picture?type=large", "display_name": "\uae40\ud558\uc900", "link": "https://stackoverflow.com/users/8513853/%ea%b9%80%ed%95%98%ec%a4%80"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1505289857, "creation_date": 1505289857, "question_id": 46192124, "link": "https://stackoverflow.com/questions/46192124/csapp-iterative-echo-serverclient-code", "title": "CSAPP iterative echo server&amp;client code", "body": "<p>Are there someone who studied CSAPP iterative echo server code?</p>\n\n<p>I'm sorry that I cannot provide you a full code..</p>\n\n<pre><code>Rio_written(clientfd, buf, strlen(buf));\nRio_readlineb(&amp;rio, buf, MAXLINE);\n</code></pre>\n\n<p>in this client code, why why we can write like this? I mean \ndoes this code ensures sequence of writing and reading from the server?</p>\n"}, {"tags": ["c", "hash"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 9, "creation_date": 1505289761, "post_id": 46192045, "comment_id": 79346183, "body": "No, it&#39;s not a security hole. You need to store the salt to be able to hash the next input and compare it. The point of salt is to force an attacker to process each password individually, not to be a secret. You&#39;ve broken that by using the same salt for everything; it should be random. See e.g. <a href=\"https://security.stackexchange.com/questions/51959/why-are-salted-hashes-more-secure-for-password-storage\" title=\"why are salted hashes more secure for password storage\">security.stackexchange.com/questions/51959/&hellip;</a>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1505289772, "post_id": 46192045, "comment_id": 79346188, "body": "Kind of important note: The <code>crypt</code> function is not part of the C standard. It&#39;s part of the <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/crypt.html\" rel=\"nofollow noreferrer\">POSIX standard</a>."}, {"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 0, "creation_date": 1505290082, "post_id": 46192045, "comment_id": 79346404, "body": "The salt does <b>not</b> have to be kept secret see: <a href=\"https://stackoverflow.com/questions/213380/the-necessity-of-hiding-the-salt-for-a-hash\">The necessity of hiding the salt for a hash</a>."}, {"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1505347082, "post_id": 46192045, "comment_id": 79380265, "body": "Ow, please don&#39;t use the <code>crypt()</code> function anymore, it uses an insecure algorithm. Use argon2 or one of its few serious competitors."}], "answers": [{"tags": [], "owner": {"reputation": 5721, "user_id": 3823831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e10a2607a7827988b6ac570fe168e02a?s=128&d=identicon&r=PG", "display_name": "TheGreatContini", "link": "https://stackoverflow.com/users/3823831/thegreatcontini"}, "is_accepted": false, "score": 2, "last_activity_date": 1505342435, "last_edit_date": 1505342435, "creation_date": 1505297452, "answer_id": 46194742, "question_id": 46192045, "link": "https://stackoverflow.com/questions/46192045/why-salt-is-included-in-hash-with-c-crypt-function/46194742#46194742", "title": "Why salt is included in hash with c crypt function", "body": "<p>Read <a href=\"https://spqr.eecs.umich.edu/courses/cs660sp11/papers/10.1.1.128.1635.pdf\" rel=\"nofollow noreferrer\">section 3</a> from the researchers who originally proposed it. It says what @jonrsharpe said in the comment above, but always nice to get the original source (emphasis mine):</p>\n\n<blockquote>\n  <p>The key search technique is still likely to turn up a few passwords\n  when it is used on a large collection of passwords, and it seemed wise\n  to make this task as difficult as possible.  To this end, <strong>when a\n  password is first entered, the password program obtains a 12-bit\n  random number</strong> (by reading the real-time clock) <strong>and appends this to\n  the password typed in by the user.  The concatenated string is\n  encrypted and both the 12-bit random quantity (called the salt) and\n  the 64-bit result of the encryption are entered into the password\n  file</strong>.</p>\n  \n  <p><strong>When the user later logs in to the system, the 12-bit quantity is extracted from the password file and appended to the typed password. \n  The encrypted result is required, as before, to be the same as the\n  remaining 64 bits in the password file</strong>.  This modification does not\n  increase the task of finding any individual password, starting from\n  scratch, but now the work of testing a given character string against\n  a large collection of encrypted passwords has been multiplied by 4,096\n  (2^12).  The reason for this is that there are 4,096 encrypted versions\n  of each password and one of them has been picked more or less at\n  random by the system.</p>\n  \n  <p>With this modification, it is likely that the bad guy can spend days\n  of computer time trying to find a password on a system with hundreds\n  of passwords, and find none at all.  More important is the fact that\n  it becomes impractical to prepare an encrypted dictionary in advance. \n  Such an encrypted dictionary could be used to crack new passwords in\n  milliseconds when they appear.</p>\n  \n  <p>There is a (not inadvertent) side effect of this modification.  It\n  becomes nearly impossible to find out whether a person with passwords\n  on two or more systems has used the same password on all of them,\n  unless you already know that.</p>\n</blockquote>\n"}], "owner": {"reputation": 5894, "user_id": 4746206, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/aeb5a68770c5420348fb112d7e082436?s=128&d=identicon&r=PG&f=1", "display_name": "Bob5421", "link": "https://stackoverflow.com/users/4746206/bob5421"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 590, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1505342435, "creation_date": 1505289630, "last_edit_date": 1505292029, "question_id": 46192045, "link": "https://stackoverflow.com/questions/46192045/why-salt-is-included-in-hash-with-c-crypt-function", "title": "Why salt is included in hash with c crypt function", "body": "<p>Look at this very basic c program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;crypt.h&gt;\n\nint main (int argc, char *argv[]) \n{\n    char pid[16];\n    int id;\n    for (id = 0;  id &lt; 100; id++) \n    {\n       snprintf(pid, sizeof(pid), \"%i\", id);\n       printf(\"%s %s\\n\",pid, crypt(pid, \"$1$awesome\"));\n    }\n}\n</code></pre>\n\n<p>Here is the output on linux system:</p>\n\n<pre><code>0 $1$awesome$cVjo4Ue9HeJs7sStMTm6v.\n1 $1$awesome$6.658tD5uVqwQJ6/S8Mc71\n2 $1$awesome$bKavcHTWRGnlTgP.zTZhO.\n3 $1$awesome$ZlBH.fgxGrfw/naq38hyv.\n4 $1$awesome$aQCliN7gPud1PC07Vri.y1\n5 $1$awesome$EewcRVU39I/n0uMGaDxCN0\n6 $1$awesome$fKMRDZaa5wra4G8xy9.m0/\n7 $1$awesome$AqJ0SmXImg.xcUg/Yh/ov.\n8 $1$awesome$bT3Wq9QORw1dnNZFZmVBk.\n9 $1$awesome$4uM8mfZGdj2zeZ/CP/GSz1\n10 $1$awesome$Gsa/ilcFg1LRl2dqNhgXg0\n</code></pre>\n\n<p>I do not understand why the salt is visible on the output.\nI have tried to compile the same program on Mac OS X and I did not see the salt in the hash.\nIsn't it a security hole? We should not see the salt in clear in the hash ?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "c", "http", "mongoose-web-server"], "answers": [{"comments": [{"owner": {"reputation": 1586, "user_id": 6225741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7f147a4cf533863ff2f12762e3c6192?s=128&d=identicon&r=PG", "display_name": "Nayfe", "link": "https://stackoverflow.com/users/6225741/nayfe"}, "edited": false, "score": 0, "creation_date": 1513154759, "post_id": 47788749, "comment_id": 82538624, "body": "It says fossa is merged back to mongoose."}, {"owner": {"reputation": 2147, "user_id": 6422656, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/znJD6.jpg?s=128&g=1", "display_name": "Ram Koti", "link": "https://stackoverflow.com/users/6422656/ram-koti"}, "edited": false, "score": 0, "creation_date": 1513155821, "post_id": 47788749, "comment_id": 82539241, "body": "While this link may answer the question, it is better to include the essential parts of the answer here and provide the link for reference. Link-only answers can become invalid if the linked page changes"}], "tags": [], "owner": {"reputation": 1, "user_id": 9092794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O7ICz.png?s=128&g=1", "display_name": "Shunmuga", "link": "https://stackoverflow.com/users/9092794/shunmuga"}, "is_accepted": false, "score": 0, "last_activity_date": 1513314752, "last_edit_date": 1513314752, "creation_date": 1513154526, "answer_id": 47788749, "question_id": 46191554, "link": "https://stackoverflow.com/questions/46191554/mongoose-is-blocking-other-requests-and-processing-them-one-by-one/47788749#47788749", "title": "Mongoose is blocking other requests and processing them one by one", "body": "<p>Please check <a href=\"https://github.com/cesanta/fossa\" rel=\"nofollow noreferrer\">https://github.com/cesanta/fossa</a> for multithreading based webserver</p>\n\n<p>We need to call the below statement(marked as bold) after initialising the module</p>\n\n<p>{\n...</p>\n\n<p>ns_mgr_init(&amp;mgr, NULL);</p>\n\n<p>nc = ns_bind(&amp;mgr, s_http_port, ev_handler);</p>\n\n<p>ns_set_protocol_http_websocket(nc);</p>\n\n<p><strong>ns_enable_multithreading(nc);</strong></p>\n\n<p>...}</p>\n\n<p>Don't forget to enable the define NS_ENABLE_THREADS in compilation flag</p>\n"}], "owner": {"reputation": 3136, "user_id": 733417, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/dcf41e51e47135a6c9e2b2865de99ced?s=128&d=identicon&r=PG", "display_name": "amone", "link": "https://stackoverflow.com/users/733417/amone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 451, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1513314752, "creation_date": 1505288149, "last_edit_date": 1505288371, "question_id": 46191554, "link": "https://stackoverflow.com/questions/46191554/mongoose-is-blocking-other-requests-and-processing-them-one-by-one", "title": "Mongoose is blocking other requests and processing them one by one", "body": "<p>I tried to run \"restful_server\" example under the \"examples\". ev_handler function processes all requests one by one so a request has to wait until the prior request has been completed.</p>\n\n<pre><code>/*\n * Copyright (c) 2014 Cesanta Software Limited\n * All rights reserved\n */\n\n#include \"mongoose.h\"\n#include &lt;unistd.h&gt;\n\nstatic const char *s_http_port = \"8004\";\nstatic struct mg_serve_http_opts s_http_server_opts;\n\nstatic void handle_sum_call(struct mg_connection *nc, struct http_message *hm) {\n  char n1[100], n2[100];\n  double result;\n\n  /* Get form variables */\n  mg_get_http_var(&amp;hm-&gt;body, \"n1\", n1, sizeof(n1));\n  mg_get_http_var(&amp;hm-&gt;body, \"n2\", n2, sizeof(n2));\n\n    int n2s = (int) strtod(n2, NULL);\n    if(n2s == 100){\n        while(n2s == 100){\n            n2s = 100;  \n        }\n    }\n\n  /* Send headers */\n  mg_printf(nc, \"%s\", \"HTTP/1.1 200 OK\\r\\nTransfer-Encoding: chunked\\r\\n\\r\\n\");\n\n  /* Compute the result and send it back as a JSON object */\n  result = strtod(n1, NULL) + strtod(n2, NULL);\n  mg_printf_http_chunk(nc, \"{ \\\"result\\\": %lf }\", result);\n  mg_send_http_chunk(nc, \"\", 0); /* Send empty chunk, the end of response */\n}\n\nstatic void ev_handler(struct mg_connection *nc, int ev, void *ev_data) {\n  struct http_message *hm = (struct http_message *) ev_data;\n\n  switch (ev) {\n    case MG_EV_HTTP_REQUEST:\n      if (mg_vcmp(&amp;hm-&gt;uri, \"/api/v1/sum\") == 0) {\n        handle_sum_call(nc, hm); /* Handle RESTful call */\n      } else if (mg_vcmp(&amp;hm-&gt;uri, \"/printcontent\") == 0) {\n        char buf[100] = {0};\n        memcpy(buf, hm-&gt;body.p,\n               sizeof(buf) - 1 &lt; hm-&gt;body.len ? sizeof(buf) - 1 : hm-&gt;body.len);\n        printf(\"%s\\n\", buf);\n      } else {\n        mg_serve_http(nc, hm, s_http_server_opts); /* Serve static content */\n      }\n      break;\n    default:\n      break;\n  }\n}\n\nint main(int argc, char *argv[]) {\n  struct mg_mgr mgr;\n  struct mg_connection *nc;\n  struct mg_bind_opts bind_opts;\n  int i;\n  char *cp;\n  const char *err_str;\n#if MG_ENABLE_SSL\n  const char *ssl_cert = NULL;\n#endif\n\n  mg_mgr_init(&amp;mgr, NULL);\n\n  /* Use current binary directory as document root */\n  if (argc &gt; 0 &amp;&amp; ((cp = strrchr(argv[0], DIRSEP)) != NULL)) {\n    *cp = '\\0';\n    s_http_server_opts.document_root = argv[0];\n  }\n\n  /* Process command line options to customize HTTP server */\n  for (i = 1; i &lt; argc; i++) {\n    if (strcmp(argv[i], \"-D\") == 0 &amp;&amp; i + 1 &lt; argc) {\n      mgr.hexdump_file = argv[++i];\n    } else if (strcmp(argv[i], \"-d\") == 0 &amp;&amp; i + 1 &lt; argc) {\n      s_http_server_opts.document_root = argv[++i];\n    } else if (strcmp(argv[i], \"-p\") == 0 &amp;&amp; i + 1 &lt; argc) {\n      s_http_port = argv[++i];\n    } else if (strcmp(argv[i], \"-a\") == 0 &amp;&amp; i + 1 &lt; argc) {\n      s_http_server_opts.auth_domain = argv[++i];\n#if MG_ENABLE_JAVASCRIPT\n    } else if (strcmp(argv[i], \"-j\") == 0 &amp;&amp; i + 1 &lt; argc) {\n      const char *init_file = argv[++i];\n      mg_enable_javascript(&amp;mgr, v7_create(), init_file);\n#endif\n    } else if (strcmp(argv[i], \"-P\") == 0 &amp;&amp; i + 1 &lt; argc) {\n      s_http_server_opts.global_auth_file = argv[++i];\n    } else if (strcmp(argv[i], \"-A\") == 0 &amp;&amp; i + 1 &lt; argc) {\n      s_http_server_opts.per_directory_auth_file = argv[++i];\n    } else if (strcmp(argv[i], \"-r\") == 0 &amp;&amp; i + 1 &lt; argc) {\n      s_http_server_opts.url_rewrites = argv[++i];\n#if MG_ENABLE_HTTP_CGI\n    } else if (strcmp(argv[i], \"-i\") == 0 &amp;&amp; i + 1 &lt; argc) {\n      s_http_server_opts.cgi_interpreter = argv[++i];\n#endif\n#if MG_ENABLE_SSL\n    } else if (strcmp(argv[i], \"-s\") == 0 &amp;&amp; i + 1 &lt; argc) {\n      ssl_cert = argv[++i];\n#endif\n    } else {\n      fprintf(stderr, \"Unknown option: [%s]\\n\", argv[i]);\n      exit(1);\n    }\n  }\n\n  /* Set HTTP server options */\n  memset(&amp;bind_opts, 0, sizeof(bind_opts));\n  bind_opts.error_string = &amp;err_str;\n#if MG_ENABLE_SSL\n  if (ssl_cert != NULL) {\n    bind_opts.ssl_cert = ssl_cert;\n  }\n#endif\n  nc = mg_bind_opt(&amp;mgr, s_http_port, ev_handler, bind_opts);\n  if (nc == NULL) {\n    fprintf(stderr, \"Error starting server on port %s: %s\\n\", s_http_port,\n            *bind_opts.error_string);\n    exit(1);\n  }\n\n  mg_set_protocol_http_websocket(nc);\n  s_http_server_opts.enable_directory_listing = \"yes\";\n\n  printf(\"Starting RESTful server on port %s, serving %s\\n\", s_http_port,\n         s_http_server_opts.document_root);\n  for (;;) {\n    mg_mgr_poll(&amp;mgr, 1000);\n  }\n  mg_mgr_free(&amp;mgr);\n\n  return 0;\n}\n</code></pre>\n\n<p>I've also tried this by adding a sleep function into handle_sum_call.</p>\n\n<pre><code>static void handle_sum_call(struct mg_connection *nc, struct http_message *hm) {\n  char n1[100], n2[100];\n  double result;\n\n  /* Get form variables */\n  mg_get_http_var(&amp;hm-&gt;body, \"n1\", n1, sizeof(n1));\n  mg_get_http_var(&amp;hm-&gt;body, \"n2\", n2, sizeof(n2));\n\n    int n2s = (int) strtod(n2, NULL);\n    if(n2s == 100){\n        sleep(6000);\n    }\n\n  /* Send headers */\n  mg_printf(nc, \"%s\", \"HTTP/1.1 200 OK\\r\\nTransfer-Encoding: chunked\\r\\n\\r\\n\");\n\n  /* Compute the result and send it back as a JSON object */\n  result = strtod(n1, NULL) + strtod(n2, NULL);\n  mg_printf_http_chunk(nc, \"{ \\\"result\\\": %lf }\", result);\n  mg_send_http_chunk(nc, \"\", 0); /* Send empty chunk, the end of response */\n}\n</code></pre>\n\n<p>I was planning to use mongoose to create a simple web application that will be used by a 10-20 users (not too much). It says that it is asynchronous and non-blocking? Am I doing something wrong?</p>\n"}, {"tags": ["c++", "ios", "c", "xcode", "macos"], "comments": [{"owner": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "edited": false, "score": 0, "creation_date": 1505308006, "post_id": 46191386, "comment_id": 79359268, "body": "have you tried  <code>export x</code>"}, {"owner": {"reputation": 3214, "user_id": 4333809, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eb246fedefccc8b02a3efb989143d3b9?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar81", "link": "https://stackoverflow.com/users/4333809/zohar81"}, "reply_to_user": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "edited": false, "score": 0, "creation_date": 1505311396, "post_id": 46191386, "comment_id": 79361899, "body": "Unfortunately, I cannot find any way to define a global environment variable In Xcode that will be accessible to all build phases."}], "answers": [{"tags": [], "owner": {"reputation": 3214, "user_id": 4333809, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eb246fedefccc8b02a3efb989143d3b9?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar81", "link": "https://stackoverflow.com/users/4333809/zohar81"}, "is_accepted": false, "score": 1, "last_activity_date": 1505387559, "creation_date": 1505387559, "answer_id": 46217577, "question_id": 46191386, "link": "https://stackoverflow.com/questions/46191386/pass-value-from-run-script-in-xcode-to-compilation/46217577#46217577", "title": "Pass value from run-script in Xcode to compilation", "body": "<p>Ok, so I haven't found exactly what I was needed, but here's a nice workaround. </p>\n\n<p>Instead of passing macro definitions via the compilation command , it's possible to create an output header file from the preceding \"run script\" phase with all the necessary definitions which will be inserted to this header from the script. </p>\n\n<p>This \"tells\" the next build phases (compile sources) that the file can be included although it's not yet existing.</p>\n\n<p>During compilation, we first conduct \"run script\" and the file is created under <code>$(DERIVED_FILE_DIR)/myheader.h</code>, ready to be included while running the compilation itself on the source file. </p>\n\n<p><a href=\"https://i.stack.imgur.com/XruuJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XruuJ.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 3214, "user_id": 4333809, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eb246fedefccc8b02a3efb989143d3b9?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar81", "link": "https://stackoverflow.com/users/4333809/zohar81"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 408, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1505387559, "creation_date": 1505287612, "question_id": 46191386, "link": "https://stackoverflow.com/questions/46191386/pass-value-from-run-script-in-xcode-to-compilation", "title": "Pass value from run-script in Xcode to compilation", "body": "<p>Is it possible to define a new environment variable in X code, and pass it as a flag when compiling source C/C++ file in Xcode ?</p>\n\n<p>I've tried to add \"Run script\" phase prior to \"Compile Sources\" in my project \"Build Phases\" </p>\n\n<p>Here's the script I run, where I get the value of 'X': </p>\n\n<p><a href=\"https://i.stack.imgur.com/y2SgA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/y2SgA.png\" alt=\"enter image description here\"></a></p>\n\n<p>And in \"Compile Sources\" I've added 'X' to \"Other C Flags\" </p>\n\n<p><a href=\"https://i.stack.imgur.com/4hN10.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4hN10.png\" alt=\"enter image description here\"></a></p>\n\n<p>But unfortunately, X is undefined in this scope, so X_FOR_APP is empty. What am I doing wrong here? </p>\n"}, {"tags": ["c", "arrays", "string", "pointers"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 8, "creation_date": 1505286255, "post_id": 46190920, "comment_id": 79343993, "body": "If you increase the array size to 4 and add a NUL character, it already is a string."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1505286263, "post_id": 46190920, "comment_id": 79344001, "body": "In C a &quot;string&quot; is simply an array of characters terminated by a zero."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1505286758, "post_id": 46190920, "comment_id": 79344273, "body": "like <a href=\"https://ideone.com/c7ezOI\" rel=\"nofollow noreferrer\">this</a>"}, {"owner": {"reputation": 363, "user_id": 4636686, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3H6bg.jpg?s=128&g=1", "display_name": "Louis Parkin", "link": "https://stackoverflow.com/users/4636686/louis-parkin"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1505286873, "post_id": 46190920, "comment_id": 79344367, "body": "@StoryTeller I believe there is one more tiny difference in the question, as asked, being that in the first, it is a fixed length of C type char[], and the second is a unknown length of C type char*  I would advise against using the second allocation, as it is a STRING LITERAL (automatically null-terminated, and supposed to be const in nature)  Rather declare char* variable and malloc for the size needed.  And note these are two distinct data types.  They can under certain circumstances be used interchangeably, but they are not synonym."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8409190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30e2fd4501d0b2ec5ba13b52221e51bf?s=128&d=identicon&r=PG&f=1", "display_name": "exsk", "link": "https://stackoverflow.com/users/8409190/exsk"}, "edited": false, "score": 0, "creation_date": 1505286494, "post_id": 46190961, "comment_id": 79344131, "body": "So as long as I add the null terminator at the end of my array, I can treat is as a string and pass it into functions such as printf(&quot;%s&quot;, array);  ???"}, {"owner": {"reputation": 12119, "user_id": 5265292, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/0b9b1031971201aa02e13287af690946?s=128&d=identicon&r=PG&f=1", "display_name": "grek40", "link": "https://stackoverflow.com/users/5265292/grek40"}, "reply_to_user": {"reputation": 11, "user_id": 8409190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30e2fd4501d0b2ec5ba13b52221e51bf?s=128&d=identicon&r=PG&f=1", "display_name": "exsk", "link": "https://stackoverflow.com/users/8409190/exsk"}, "edited": false, "score": 2, "creation_date": 1505286520, "post_id": 46190961, "comment_id": 79344148, "body": "yes exactly, thats it"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 11, "user_id": 8409190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30e2fd4501d0b2ec5ba13b52221e51bf?s=128&d=identicon&r=PG&f=1", "display_name": "exsk", "link": "https://stackoverflow.com/users/8409190/exsk"}, "edited": false, "score": 4, "creation_date": 1505286713, "post_id": 46190961, "comment_id": 79344249, "body": "@declanpearson - It&#39;s not that you <i>can treat it</i> as a string. <b>It is</b> a string as defined by C."}, {"owner": {"reputation": 12119, "user_id": 5265292, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/0b9b1031971201aa02e13287af690946?s=128&d=identicon&r=PG&f=1", "display_name": "grek40", "link": "https://stackoverflow.com/users/5265292/grek40"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1505286871, "post_id": 46190961, "comment_id": 79344365, "body": "@StoryTeller yes, thats more accurate. More details about this topic might be found here <a href=\"https://stackoverflow.com/questions/12203339/c-string-definition-in-c-c\" title=\"c string definition in c c\">stackoverflow.com/questions/12203339/c-string-definition-in-&zwnj;&#8203;c-c</a> for anyone who wants to understand and not just make it work somehow"}], "tags": [], "owner": {"reputation": 12119, "user_id": 5265292, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/0b9b1031971201aa02e13287af690946?s=128&d=identicon&r=PG&f=1", "display_name": "grek40", "link": "https://stackoverflow.com/users/5265292/grek40"}, "is_accepted": false, "score": 4, "last_activity_date": 1505286262, "creation_date": 1505286262, "answer_id": 46190961, "question_id": 46190920, "link": "https://stackoverflow.com/questions/46190920/how-do-i-convert-a-char-array-to-a-string-in-c/46190961#46190961", "title": "How do I convert a char array to a string in C?", "body": "<p>Just add a zero-delimiter</p>\n\n<pre><code>char array[4] = {'1', 'a', '/', '\\0'};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": true, "score": 4, "last_activity_date": 1505286336, "creation_date": 1505286336, "answer_id": 46190986, "question_id": 46190920, "link": "https://stackoverflow.com/questions/46190920/how-do-i-convert-a-char-array-to-a-string-in-c/46190986#46190986", "title": "How do I convert a char array to a string in C?", "body": "<p>Declare your array like this  </p>\n\n<pre><code>char array[] = {'1', 'a', '/', '\\0'};  \n</code></pre>\n\n<p>or   </p>\n\n<pre><code>char array[] = \"1a/\";\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1505287006, "post_id": 46191100, "comment_id": 79344452, "body": "I see what you are saying, but you really need to reword &quot;<i>a char array and a char pointer are mostly the same</i>&quot;. Even qualified with <i>mostly</i>, that is more not-true than true. (the <code>memset</code>, <code>memcpy</code> example may be a bit over the OP&#39;s head if they are just now asking about <i>char array/string</i> differences <code>:)</code>"}, {"owner": {"reputation": 363, "user_id": 4636686, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3H6bg.jpg?s=128&g=1", "display_name": "Louis Parkin", "link": "https://stackoverflow.com/users/4636686/louis-parkin"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1505287410, "post_id": 46191100, "comment_id": 79344740, "body": "@DavidC.Rankin please give it another once-over (I made an edit to the part you found to be lacking)"}, {"owner": {"reputation": 363, "user_id": 4636686, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3H6bg.jpg?s=128&g=1", "display_name": "Louis Parkin", "link": "https://stackoverflow.com/users/4636686/louis-parkin"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1505287760, "post_id": 46191100, "comment_id": 79344951, "body": "Also, @DavidC.Rankin, I find that, the more information one provides in an answer, the more you enable a person to figure things out on their own. So yes, it is probably a little overkill, but I would find an answer like this much more useful in the long run than other answers that just tell you what to do without telling you why you are doing it."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1505288612, "post_id": 46191100, "comment_id": 79345509, "body": "The only problem is that a <i>character array</i> and a <i>pointer</i> are two completely separate and distinct variable types in C. An array is a distinct object with all elements guaranteed sequential in memory. An array will be converted to a pointer to its first element when passed as a parameter to a function (and technically on access). While a pointer can point to any element of an array, there is no guarantee that any two pointers are sequential in memory. You can use pointer arithmetic to access sequential values in memory, but that is as far as it goes."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 1, "creation_date": 1505294747, "post_id": 46191100, "comment_id": 79349633, "body": "1) <code>char[]</code> and <code>char *</code> are not at all the same; arrays <i>decay</i> to pointers to their first elements (in most expressions), which makes arrays <i>seem</i> to behave as pointers at times, but the distinction is important. 2) Strings are null-terminated character arrays, period. This is true even for string literals. A pointer may point to a string (more precisely, to its first element), but a pointer is not a string. There is a loose way in which people sometimes refer to such a pointer as a string, but for learners we must be very careful."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1505294803, "post_id": 46191100, "comment_id": 79349673, "body": "3) Suggest changing: &quot;strlen can only be used on null-terminated char* strings&quot; --&gt; &quot;<code>strlen()</code> can only be used on strings&quot;, since strings are <i>always</i> null-terminated, and &quot;<code>char*</code> strings&quot; has no meaning, unless you mean that <code>strlen()</code> can only be used on pointers to strings (which is false, since a string, i.e., a null-terminated character array which will decay to a pointer to the first element of the string in the function call, can be provided as an argument to <code>strlen()</code>)."}], "tags": [], "owner": {"reputation": 363, "user_id": 4636686, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3H6bg.jpg?s=128&g=1", "display_name": "Louis Parkin", "link": "https://stackoverflow.com/users/4636686/louis-parkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1505287124, "last_edit_date": 1505287124, "creation_date": 1505286706, "answer_id": 46191100, "question_id": 46190920, "link": "https://stackoverflow.com/questions/46190920/how-do-i-convert-a-char-array-to-a-string-in-c/46191100#46191100", "title": "How do I convert a char array to a string in C?", "body": "<p>First of all, a char array and a char pointer are mostly the same, can at times be used interchangeably, but ultimately, a char[] has a known size, making it possible to use the sizeof() function, whereas char* just points to the first address of contiguous memory of unknown length, so sizeof will return whatever your default size for integers are (4 on 32-bit systems, 8 on 64-bit systems) to indicate the size required to store an address.  </p>\n\n<p>But generally the rule with strings are that they have to be null-terminated, so it doesn't matter if you use char[] or char*. See examples below.</p>\n\n<pre><code>char array[4] = {'1', 'a', '/', 0};\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>char string[4];\nmemset(&amp;string[0], 0x00, sizeof(string));\nmemcpy(&amp;string[0], &amp;array[0], 3);\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>char* string;\nstring = malloc(sizeof(array)+1);\nmemset(&amp;string[0], 0x00, sizeof(array)+1);\nmemcpy(&amp;string[0], &amp;array[0], sizeof(array));\n</code></pre>\n\n<p>and then passing the string as a char* is as simple as:</p>\n\n<pre><code>void foo (char* bar, int n)\n{\n  // do something with bar\n}\n</code></pre>\n\n<p>and call it as</p>\n\n<pre><code>foo(&amp;string[0], strlen(string));\n</code></pre>\n\n<p>Important to note, strlen can only be used on null-terminated char* strings.</p>\n\n<p>If you have any questions, feel free to ask.</p>\n"}], "owner": {"reputation": 11, "user_id": 8409190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30e2fd4501d0b2ec5ba13b52221e51bf?s=128&d=identicon&r=PG&f=1", "display_name": "exsk", "link": "https://stackoverflow.com/users/8409190/exsk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 18179, "favorite_count": 0, "closed_date": 1505288166, "accepted_answer_id": 46190986, "answer_count": 3, "score": 0, "last_activity_date": 1505290638, "creation_date": 1505286095, "last_edit_date": 1505290638, "question_id": 46190920, "link": "https://stackoverflow.com/questions/46190920/how-do-i-convert-a-char-array-to-a-string-in-c", "closed_reason": "Duplicate", "title": "How do I convert a char array to a string in C?", "body": "<p>I want to convert my char array to a string so I can pass it into a function. Say if I have this:</p>\n\n<pre><code>char array[3] = {'1', 'a', '/'};\n</code></pre>\n\n<p>and I want to convert it to </p>\n\n<pre><code>char *string = \"1a/\";\n</code></pre>\n\n<p>Do I just add a NULL terminator on the end?</p>\n"}, {"tags": ["c", "for-loop"], "comments": [{"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1505284223, "post_id": 46190253, "comment_id": 79342732, "body": "That&#39;s a single line for your compiler."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 4, "creation_date": 1505284457, "post_id": 46190253, "comment_id": 79342862, "body": "I hope the interview went bad because, trust me, you don&#39;t want that job. If they couldn&#39;t come up with better interview questions, then it suggests they are a bunch of amateurs."}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1505284650, "post_id": 46190253, "comment_id": 79342979, "body": "In most contexts, C treats a line break no differently from any other white space character (such as a space).  Exceptions would be inside quoted strings, preprocessor directives, etc."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 2, "creation_date": 1505286397, "post_id": 46190253, "comment_id": 79344071, "body": "It&#39;s odd that the candidate didn&#39;t say &quot;replace the loop body with a function call&quot;."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1505288635, "post_id": 46190253, "comment_id": 79345517, "body": "The real answer would be &quot;While it is possible in C, No, this cannot be done in a way that wouldn&#39;t be slammed right in my face by any sane reviewer&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 4293, "user_id": 7035151, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ce9aa200c854d26a2cd263f6fc8c24eb?s=128&d=identicon&r=PG&f=1", "display_name": "Jayesh", "link": "https://stackoverflow.com/users/7035151/jayesh"}, "edited": false, "score": 1, "creation_date": 1505284397, "post_id": 46190341, "comment_id": 79342826, "body": "@Jayesh - NO! I wrote as much at the end."}], "tags": [], "owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": false, "score": 3, "last_activity_date": 1505284370, "last_edit_date": 1505284370, "creation_date": 1505284226, "answer_id": 46190341, "question_id": 46190253, "link": "https://stackoverflow.com/questions/46190253/multiple-statements-of-for-loop-without-block/46190341#46190341", "title": "Multiple statements of &quot;for&quot; loop without block", "body": "<p>It doesn't matter how many lines there are. What matters is whether or not there is single statement. And statements are delimited by a semi-colon (<code>;</code>).</p>\n\n<p>Lexically, C code ignores white-spaces that aren't needed to separate tokens. So this multi-line statement:</p>\n\n<pre><code>printf(\"%d \", t1),\nnextTerm = t1 + t2,\nt1 = t2,\nt2 = nextTerm;\n</code></pre>\n\n<p>Is the same as though it was written in a single line:</p>\n\n<pre><code>printf(\"%d \", t1), nextTerm = t1 + t2, t1 = t2, t2 = nextTerm;\n</code></pre>\n\n<p>But while this may feel clever, don't write code like this. It's an exercise in obfuscation.</p>\n"}, {"comments": [{"owner": {"reputation": 3619, "user_id": 7831383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TtBVh.jpg?s=128&g=1", "display_name": "Rafalon", "link": "https://stackoverflow.com/users/7831383/rafalon"}, "edited": false, "score": 2, "creation_date": 1505285200, "post_id": 46190347, "comment_id": 79343310, "body": "Might be worth adding a link to an explanation of this &quot;Apple gotofail&quot; -&gt; <a href=\"https://nakedsecurity.sophos.com/2014/02/24/anatomy-of-a-goto-fail-apples-ssl-bug-explained-plus-an-unofficial-patch/\" rel=\"nofollow noreferrer\">nakedsecurity.sophos.com/2014/02/24/&hellip;</a>  / or post the code of it and explain it in your answer"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 3619, "user_id": 7831383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TtBVh.jpg?s=128&g=1", "display_name": "Rafalon", "link": "https://stackoverflow.com/users/7831383/rafalon"}, "edited": false, "score": 0, "creation_date": 1505285618, "post_id": 46190347, "comment_id": 79343588, "body": "@Rafalon Nah it was just an anecdote, it is not what the question is about."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 5, "last_activity_date": 1505284248, "creation_date": 1505284248, "answer_id": 46190347, "question_id": 46190253, "link": "https://stackoverflow.com/questions/46190253/multiple-statements-of-for-loop-without-block/46190347#46190347", "title": "Multiple statements of &quot;for&quot; loop without block", "body": "<p>This <em>is</em> a single line statement, formatted over several lines.</p>\n\n<p>It is complete nonsense to use the comma operator like this. Removing the block fills no purpose what so ever - it just makes your code more dangerous and harder to read, for absolutely nothing gained. Use semicolons.  </p>\n\n<p><em>Always</em> use a compound statement after a loop. <em>Even</em> if there is just one single statement inside the loop - one of the most expensive bugs in history, \"the Apple gotofail\" was caused by lax use of braces.</p>\n"}, {"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1505286346, "post_id": 46190397, "comment_id": 79344047, "body": "I actually quite that style since it tells you there is nothing funky going on in the loop body (<code>break</code>, <code>continue</code>, &amp;c.)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1505288110, "post_id": 46190397, "comment_id": 79345180, "body": "Why not use this instead? <code>#define FOO(x) for(in??=??=x i=0;!prin??=??=x??=??=f(&quot;%d &quot;,x??=??=1,nex??=??=x??=??=Term=x??=??=1+x??=??=2)|i&lt;10;x??=&zwnj;&#8203;??=1=x??=??=2,x??=??&zwnj;&#8203;=2=nex??=??=x??=??=T&zwnj;&#8203;erm,i++)??&lt;??&gt;</code>. Call as <code>FOO(t);</code>. Output: <code>1 1 2 3 5 8 13 21 34 55 89</code> (Fibonacci sequence)"}], "tags": [], "owner": {"reputation": 12557, "user_id": 1270789, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FXwoB.png?s=128&g=1", "display_name": "Ken Y-N", "link": "https://stackoverflow.com/users/1270789/ken-y-n"}, "is_accepted": true, "score": 6, "last_activity_date": 1505284419, "creation_date": 1505284419, "answer_id": 46190397, "question_id": 46190253, "link": "https://stackoverflow.com/questions/46190253/multiple-statements-of-for-loop-without-block/46190397#46190397", "title": "Multiple statements of &quot;for&quot; loop without block", "body": "<p>Note, <strong>don't ever</strong> write code like the above or like I am about to do!</p>\n\n<p>You have an answer about multiple lines, but the other question about another way to write this is:</p>\n\n<pre><code>for(int i= 0; i &lt; 10; nextTerm = t1 + t2,\n                      t1 = t2,\n                      t2 = nextTerm,\n                      i++)\n    printf(\"%d \", t1);\n</code></pre>\n\n<p>Or even, taken to the extreme...</p>\n\n<pre><code>for(int i= 0; i &lt; 10; printf(\"%d \", t1),\n                      nextTerm = t1 + t2,\n                      t1 = t2,\n                      t2 = nextTerm,\n                      i++)\n    /* Hey, empty loop! */;\n</code></pre>\n"}], "owner": {"reputation": 4293, "user_id": 7035151, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ce9aa200c854d26a2cd263f6fc8c24eb?s=128&d=identicon&r=PG&f=1", "display_name": "Jayesh", "link": "https://stackoverflow.com/users/7035151/jayesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 1, "accepted_answer_id": 46190397, "answer_count": 3, "score": -2, "last_activity_date": 1505284734, "creation_date": 1505283964, "last_edit_date": 1505284734, "question_id": 46190253, "link": "https://stackoverflow.com/questions/46190253/multiple-statements-of-for-loop-without-block", "title": "Multiple statements of &quot;for&quot; loop without block", "body": "<p>Following code snippet was given to me in an interview and asked me, is it possible to evaluate all the statements of for loop without block?</p>\n\n<pre><code>int i, n, t1 = 0, t2 = 1, nextTerm;\n\nfor(int i= 0; i &lt; 10; i++)\n{\n    printf(\"%d \", t1);\n    nextTerm = t1 + t2;\n    t1 = t2;\n    t2 = nextTerm;\n}\n</code></pre>\n\n<p>I asked him, I think not possible to evaluate multiple statements of for loop without block. But, my friend told me, It is possible using <strong>comma</strong> operator, like this :</p>\n\n<pre><code>int i, n, t1 = 0, t2 = 1, nextTerm;\n\nfor(int i= 0; i &lt; 10; i++)\n    printf(\"%d \", t1),\n    nextTerm = t1 + t2,\n    t1 = t2,\n    t2 = nextTerm;\n</code></pre>\n\n<p>I know <code>comma</code> operator how to work for single line statement. But i wondering how to work <code>comma</code> operator for multiple line?</p>\n\n<p>Also, Is there any other way to do this task?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1505283680, "post_id": 46190127, "comment_id": 79342466, "body": "Is it not <i>you</i> who enter a newline to end the input? That newline is going to be hard for your program to remove, since it&#39;s not actually printed by your program, but instead is handled by the terminal or console program. Instead I suggest a different strategy: Print the actual input as well as the normal input, all on its own line."}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 3485187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d177dfe81993e11fb59da63d713df5a?s=128&d=identicon&r=PG&f=1", "display_name": "Freeman", "link": "https://stackoverflow.com/users/3485187/freeman"}, "is_accepted": false, "score": 0, "last_activity_date": 1505285200, "last_edit_date": 1505285200, "creation_date": 1505284123, "answer_id": 46190301, "question_id": 46190127, "link": "https://stackoverflow.com/questions/46190127/how-to-remove-newline-in-tabular-addition/46190301#46190301", "title": "How to remove newline in tabular addition", "body": "<p>I think you've mixed the concept of input &amp; output. Actually in your code, you had only output:</p>\n\n<p><code>&gt;     4     7      10</code></p>\n\n<p>try replace this code with your inner while loop, then pipe the standard out to another file, check the results and you will understand.</p>\n\n<pre><code>while (counter &lt;=4){\n     printf(\"%d\\t\", number);\n     number += 3;\n     counter++;\n}\n</code></pre>\n\n<p><code>./your_program &gt; output_file</code></p>\n"}], "owner": {"reputation": 113, "user_id": 8589924, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208989683008688/picture?type=large", "display_name": "Benedict Aaron Tjandra", "link": "https://stackoverflow.com/users/8589924/benedict-aaron-tjandra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1505285384, "creation_date": 1505283495, "last_edit_date": 1592644375, "question_id": 46190127, "link": "https://stackoverflow.com/questions/46190127/how-to-remove-newline-in-tabular-addition", "title": "How to remove newline in tabular addition", "body": "<p>When executing this code, additions are separated by a newline each time I enter a value. So for example:</p>\n<blockquote>\n<pre><code>1\n\n     4     7      10\n</code></pre>\n</blockquote>\n<p>I reckon this is caused by the scanf() inputting a new line. How do you write the following code such that</p>\n<pre><code>  1    4     7     10\n</code></pre>\n<p>is printed?</p>\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    int number;\n    int counter = 1;\n    printf(&quot;A\\tA+3\\tA+6\\tA+9\\n&quot;);\n    scanf (&quot;%d&quot;, &amp;number);\n    while (number != -1) {\n        while (counter &lt;=3) {\n            number += 3;\n            printf(&quot;\\t%d&quot;, number);\n            counter++;\n        }\n        printf(&quot;\\n&quot;);\n        scanf (&quot;%d&quot;, &amp;number);\n        counter = 1;\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "printf"], "comments": [{"owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "edited": false, "score": 4, "creation_date": 1505283117, "post_id": 46190031, "comment_id": 79342185, "body": "Why &amp; in printf??"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1505283154, "post_id": 46190031, "comment_id": 79342204, "body": "You pass addresses to <code>printf</code>. Don&#39;t just copy from <code>scanf</code>. Read the specification."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1505283445, "post_id": 46190031, "comment_id": 79342348, "body": "In the future when posting a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>, please copy-paste some working code instead of retyping it into the question. If you retype then it can lead you to add other unrelated errors and problems, like you have done with the unterminated string. Or maybe even fix the problem you ask about, without realizing it."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1505283749, "post_id": 46190031, "comment_id": 79342493, "body": "The function <code>scanf</code> returns some value. You should not just ignore it. Check it to verify how many parameters were parsed."}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 2, "last_activity_date": 1505283250, "creation_date": 1505283250, "answer_id": 46190079, "question_id": 46190031, "link": "https://stackoverflow.com/questions/46190031/storing-floating-point-numbers-in-struct-in-c/46190079#46190079", "title": "Storing floating point numbers in struct in C", "body": "<p>The <a href=\"http://en.cppreference.com/w/c/io/fscanf\" rel=\"nofollow noreferrer\"><code>scanf</code> family</a> of functions needs pointers so it knows where to store the results.</p>\n\n<p>The <a href=\"http://en.cppreference.com/w/c/io/fprintf\" rel=\"nofollow noreferrer\"><code>printf</code> family</a> of functions prints <strong><em>values</em></strong>, so it does not need pointers.</p>\n\n<p>When you have a mismatch between <code>printf</code> format specification and argument, then it leads to <em>undefined behavior</em>.</p>\n\n<p>So the simple solution is to not use the address-of operator <code>&amp;</code> for the arguments in your <code>printf</code> call.</p>\n"}], "owner": {"reputation": 71, "user_id": 8573872, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10212267263149889/picture?type=large", "display_name": "Manan Vora", "link": "https://stackoverflow.com/users/8573872/manan-vora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 962, "favorite_count": 0, "accepted_answer_id": 46190079, "answer_count": 1, "score": -2, "last_activity_date": 1505283438, "creation_date": 1505282992, "last_edit_date": 1505283297, "question_id": 46190031, "link": "https://stackoverflow.com/questions/46190031/storing-floating-point-numbers-in-struct-in-c", "title": "Storing floating point numbers in struct in C", "body": "<p>I created a struct variable. An example of this is:</p>\n\n<pre><code>    struct numbers\n    {\n        float start;\n        float end;\n        int middle;\n    }values;\n\n    int main()\n    {\n        scanf(\"%f %f %d\", &amp;values.start, &amp;values.end, &amp;values.middle);\n        printf(\"%f %f %d, &amp;values.start, &amp;values.end, &amp;values.middle);\n    } \n</code></pre>\n\n<p>When I try to read values into these variables through user input, such as \"0 5.8 3\". When I try to print, it looks like this</p>\n\n<p>0.000000 0.0000000 -26148776 (The last number changes everytime I run the program, and the rest remain as 0)</p>\n\n<p>How can I fix this issue?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c", "testing", "parasoft"], "answers": [{"comments": [{"owner": {"reputation": 2436, "user_id": 6900838, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-vT_oqxXXH9o/AAAAAAAAAAI/AAAAAAAAAIU/0d4XZ9GEmb8/photo.jpg?sz=128", "display_name": "Alperen", "link": "https://stackoverflow.com/users/6900838/alperen"}, "edited": false, "score": 0, "creation_date": 1505482878, "post_id": 46239679, "comment_id": 79445715, "body": "Thanks for your answer, parasoft is not a reputed topic. Answers are worth a piece of gold. I couldn&#39;t find cpptesttrace. There are cpptest and cpptestscan. Could they be? I use an old version of parasoft."}], "tags": [], "owner": {"reputation": 236, "user_id": 888126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5f0d61f8d1b700606436c765052d072?s=128&d=identicon&r=PG", "display_name": "szmyru - Irek Sz.", "link": "https://stackoverflow.com/users/888126/szmyru-irek-sz"}, "is_accepted": false, "score": 0, "last_activity_date": 1506410161, "last_edit_date": 1506410161, "creation_date": 1505478719, "answer_id": 46239679, "question_id": 46189980, "link": "https://stackoverflow.com/questions/46189980/how-to-create-build-data-file-bdf-in-parasoft/46239679#46239679", "title": "How to create build data file (bdf) in Parasoft?", "body": "<p>Using make files is not mandatory.\nParasoft C++test has a tool called '<strong>cpptesttrace</strong>', that monitors build process and collects compiler invocations to create BDF file.<br>\ncpptesttrace can be used with any build process, be it make, shell script, or even build in the IDE (last resort if no command line build is available).</p>\n\n<p>How cpptesttrace works:</p>\n\n<ul>\n<li>you simply need to prefix your original build command line with 'cpptesttrace' and perhaps a couple options, and run your normal build</li>\n<li>make sure to run full rebuild (e.g. 'make clean all') to make sure BDF contains information about all sources belonging to your build, and how they are compiled</li>\n<li>cpptesttrace has a built-in set of supported compilers, and you can see compiler executable patterns by running 'cpptesttrace --cpptesttraceHelp'.  In case your GNU GCC compiler name is \"unusual\", you can redefine pattern cpptesttrace is looking for. </li>\n<li>in case of trouble, you can always contact Parasoft Support</li>\n</ul>\n\n<p><em>Example 1:</em></p>\n\n<p>I will give a make file example :), but it could be scons, jam, or Python script, or .bat:\nAssume, my <em>full</em> build is done like this:</p>\n\n<pre><code> make clean all\n</code></pre>\n\n<p>I can run the build as follow, using cpptesttrace:\n    cpptesttrace make clean all\nThis will monitor the whole build and create a BDF file from the run.</p>\n\n<p><em>Example 2:</em></p>\n\n<p>If your build is multi-level process with script or make changing folders along the way, it might be good to tell cpptesttrace an absolute location for the BDF.   Extending the above example, we could run:</p>\n\n<pre><code>cpptesttrace --cpptesttraceOutputFile=`pwd`/cpptest.bdf  make clean all\n</code></pre>\n\n<p>which will make sure that BDF path is absolute, no matter on which source tree level cpptesttrace is called.</p>\n"}, {"comments": [{"owner": {"reputation": 2436, "user_id": 6900838, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-vT_oqxXXH9o/AAAAAAAAAAI/AAAAAAAAAIU/0d4XZ9GEmb8/photo.jpg?sz=128", "display_name": "Alperen", "link": "https://stackoverflow.com/users/6900838/alperen"}, "edited": false, "score": 0, "creation_date": 1506408570, "post_id": 46275670, "comment_id": 79796362, "body": "Thanks a lot. These explanations enlightened me."}, {"owner": {"reputation": 2436, "user_id": 6900838, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-vT_oqxXXH9o/AAAAAAAAAAI/AAAAAAAAAIU/0d4XZ9GEmb8/photo.jpg?sz=128", "display_name": "Alperen", "link": "https://stackoverflow.com/users/6900838/alperen"}, "edited": false, "score": 0, "creation_date": 1506512782, "post_id": 46275670, "comment_id": 79849717, "body": "I have 2 project to use Parasoft. Your answer is so helpful for both. One them is perfectly works, but I have a problem at the other one. It still fails and gives parsing error in some files. I examined those files and I found out that they are all included same header in common, but Parasoft IDE gives &quot;Unresolved inclusion&quot; error. This project builds properly in its own IDE. And, I used the bdf file which is created by this build process. Because of this common header file is in include directories, build process works fine in its own IDE. Why doesn&#39;t that work?"}, {"owner": {"reputation": 2436, "user_id": 6900838, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-vT_oqxXXH9o/AAAAAAAAAAI/AAAAAAAAAIU/0d4XZ9GEmb8/photo.jpg?sz=128", "display_name": "Alperen", "link": "https://stackoverflow.com/users/6900838/alperen"}, "edited": false, "score": 0, "creation_date": 1506512989, "post_id": 46275670, "comment_id": 79849839, "body": "Also, I can see the related include directory in the bdf file. And, this header file has no C file, because it consists of some simple definitions. Let say its name is &quot;asd.h&quot;, then, there is no &quot;asd.o&quot; word in the bdf file."}], "tags": [], "owner": {"reputation": 236, "user_id": 888126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5f0d61f8d1b700606436c765052d072?s=128&d=identicon&r=PG", "display_name": "szmyru - Irek Sz.", "link": "https://stackoverflow.com/users/888126/szmyru-irek-sz"}, "is_accepted": true, "score": 4, "last_activity_date": 1505726465, "last_edit_date": 1505726465, "creation_date": 1505726153, "answer_id": 46275670, "question_id": 46189980, "link": "https://stackoverflow.com/questions/46189980/how-to-create-build-data-file-bdf-in-parasoft/46275670#46275670", "title": "How to create build data file (bdf) in Parasoft?", "body": "<blockquote>\n  <p>Thanks for your answer, parasoft is not a reputed topic. \n  Answers are worth a piece of gold. I couldn't find cpptesttrace. \n  There are cpptest and cpptestscan. Could they be? I use an old version of parasoft. </p>\n</blockquote>\n\n<p>You are correct.  'cpptesttrace' was added in Parasoft C++test version 9.4 (mid-2012), so likely you are using version 9.2 or earlier, where only 'cpptestscan' was present.</p>\n\n<p>BTW, here is quick explanation of programs inside C++test standalone installation (not Visual Studio plugin):</p>\n\n<ul>\n<li>cpptest - starts C++test GUI (Eclipse-based) usually for interactive work on a desktop</li>\n<li>cpptestcli - C++test command line driver used to automate static analyses, e.g. running as a Jenkins job, </li>\n<li>cpptestscan - used as a prefix to compiler command line to capture a single compilation information and add it to a BDF file</li>\n<li>cpptesttrace - (since Parasoft C++test 9.4) used as a prefix to build command line, to capture all compilation commands and save in a BDF file</li>\n</ul>\n\n<p>The main difference between cpptestscan and cpptesttrace is that:</p>\n\n<ul>\n<li>cpptestscan had to be prepended to each compilation command line. This means, cpptestscan could capture single compilation only, and save one at a time into a BDF.  This was done typically by overwriting make CC or CXX variable (specifying the compiler, e.g. \"cpptestscan g++ -c foo.c -o foo.o\").    </li>\n<li>cpptestrace was meant to be prepended once to the entire build command, and it tracked child processes invoked by the build command.  Record of all processes recognized as compiler invocations were stored in a BDF.</li>\n</ul>\n\n<p>cpptestscan was fine if makefile or a build script was flexible enough to allow overwriting compiler at the command line, e.g.</p>\n\n<pre><code>make CXX=\"cpptestscan g++\" CC=\"cpptestscan gcc\"\n</code></pre>\n\n<p>It is typically possible with make-based projects.  As of custom or auto-generated build scripts, all bets are off.  Often, the only option was to modify project build scripts, which people are usually nervous about.\nIn such cases cpptesttrace can help, because it is completely non-intrusive, and can capture build information from almost any build process.</p>\n\n<p>Going back to the original question of this post, if you have multiple projects:</p>\n\n<ul>\n<li>using cpptestscan, you would need to somehow prefix compiler with cpptestscan in each projects' build scripts to create corresponding BDF</li>\n<li>using cpptesttrace, you could run build for each project adding cpptesttrace in front of each projects' build command to create corresponding BDF\nThe latter is often easier, but you would need newer C++test (the latest version is 10.3).</li>\n</ul>\n\n<p>I hope that helps.\nBTW: Check with Parasoft if you could upgrade your C++test.</p>\n"}], "owner": {"reputation": 2436, "user_id": 6900838, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-vT_oqxXXH9o/AAAAAAAAAAI/AAAAAAAAAIU/0d4XZ9GEmb8/photo.jpg?sz=128", "display_name": "Alperen", "link": "https://stackoverflow.com/users/6900838/alperen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1705, "favorite_count": 0, "accepted_answer_id": 46275670, "answer_count": 2, "score": 1, "last_activity_date": 1570047540, "creation_date": 1505282714, "last_edit_date": 1570047540, "question_id": 46189980, "link": "https://stackoverflow.com/questions/46189980/how-to-create-build-data-file-bdf-in-parasoft", "title": "How to create build data file (bdf) in Parasoft?", "body": "<p>I am trying to use Parasoft C/C++ Test to check \"Coding Standards\" with static tests. I found only \"How to create bdf in Makefile projects\" section in the Parasoft user guide.</p>\n\n<p>How can I create a bdf for every project? Is it mandatory to use makefile project ?</p>\n"}, {"tags": ["c++", "c", "function", "floating-point", "printf"], "comments": [{"owner": {"reputation": 7698, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 1, "creation_date": 1505283142, "post_id": 46189910, "comment_id": 79342198, "body": "<i>&quot;Or is that method bullet proof&quot;</i> No, it isn&#39;t (still same as it was yesterday)."}, {"owner": {"reputation": 9090, "user_id": 8379597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/12eJq.png?s=128&g=1", "display_name": "jq170727", "link": "https://stackoverflow.com/users/8379597/jq170727"}, "edited": false, "score": 3, "creation_date": 1505283186, "post_id": 46189910, "comment_id": 79342217, "body": "<a href=\"http://en.cppreference.com/w/cpp/numeric/math/signbit\" rel=\"nofollow noreferrer\">std::signbit</a> &quot;This function detects the sign bit of zeroes, infinities, and NaNs. Along with std::copysign, std::signbit is one of the only two portable ways to examine the sign of a NaN.&quot;"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1505283397, "post_id": 46189910, "comment_id": 79342322, "body": "I have a strange feeling of deja vu"}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1505283804, "post_id": 46189910, "comment_id": 79342517, "body": "I remember seeing this as an example of trolling colleagues"}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 3, "creation_date": 1505284041, "post_id": 46189910, "comment_id": 79342630, "body": "Was it a test to reveal if the reviewers were paying attention?"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1505284239, "post_id": 46189910, "comment_id": 79342738, "body": "Please define &quot;negative&quot;.... what about <code>NaN</code>s? Read <a href=\"http://floating-point-gui.de/\" rel=\"nofollow noreferrer\">floating-point-gui.de</a>"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1505287491, "post_id": 46189910, "comment_id": 79344802, "body": "Negative usual number, like the score of the question @BasileStarynkevitch! =) Maybe my question pollutes SO, thus should be deleted... user0042, no it&#39;s not, look twice."}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 0, "creation_date": 1505295416, "post_id": 46189910, "comment_id": 79350165, "body": "&quot;but I am just curious for this one&quot;. It&#39;s a bit hard to ignore how terribly bad this is. A bit like: &quot;Apart from that Mrs Lincoln, how did you enjoy the play?&quot;"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1505325093, "post_id": 46189910, "comment_id": 79370889, "body": "<code>char p[2]; snprintf(p, sizeof p, &quot;%f&quot;, arg); return p[0] == &#39;-&#39;;</code> is sufficient to handle the buffer size issue."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 0, "creation_date": 1505284874, "post_id": 46190383, "comment_id": 79343118, "body": "Sine and sign are two very different things :) But I do not understand why you bring up <code>%+f</code> at all. A <code>-</code> sign gets printed regardless, and that&#39;s the only thing that gets checked, right?"}, {"owner": {"reputation": 709, "user_id": 6098461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/086035aa7aca916c4bc31b2f04811e49?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/6098461/mikhail"}, "edited": false, "score": 0, "creation_date": 1505285220, "post_id": 46190383, "comment_id": 79343329, "body": "@hvd, you are right, <code>-</code> should be output regardless, I added it rather for convenience. <code>+</code> could be used if you&#39;d like to compare <code>p[0]</code> with <code>+</code> for example."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 3, "creation_date": 1505285353, "post_id": 46190383, "comment_id": 79343419, "body": "Unfortunately, like many things in C, testing doesn&#39;t prove anything. I would not expect this to be reliable way on different systems, especially in the case of negative nan."}, {"owner": {"reputation": 709, "user_id": 6098461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/086035aa7aca916c4bc31b2f04811e49?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/6098461/mikhail"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1505285978, "post_id": 46190383, "comment_id": 79343821, "body": "@user694733, agree about nan, it can be compiler/architecture/... dependent. I don&#39;t know any documentation about it. But it would be weird  if it did not work for &quot;normal&quot; floats."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 0, "creation_date": 1505287417, "post_id": 46190383, "comment_id": 79344747, "body": "@Mikhail the question is heavily downvoted. Do you think I should delete it? I mean it may polute SO..."}, {"owner": {"reputation": 709, "user_id": 6098461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/086035aa7aca916c4bc31b2f04811e49?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/6098461/mikhail"}, "reply_to_user": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 1, "creation_date": 1505287720, "post_id": 46190383, "comment_id": 79344931, "body": "@gsamaras, As you wish, I will not feel upset :) True, that the question is not extremely useful in practice, but at the same time I don&#39;t think it is completely useless."}], "tags": [], "owner": {"reputation": 709, "user_id": 6098461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/086035aa7aca916c4bc31b2f04811e49?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/6098461/mikhail"}, "is_accepted": true, "score": 2, "last_activity_date": 1505286062, "last_edit_date": 1505286062, "creation_date": 1505284361, "answer_id": 46190383, "question_id": 46189910, "link": "https://stackoverflow.com/questions/46189910/weird-method-to-check-if-a-float-number-is-negative/46190383#46190383", "title": "Weird method to check if a float number is negative", "body": "<p>You can use <code>%+f</code> to make sure the sign (<code>+</code> or <code>-</code>) is output (though <code>-</code> will be output regardless). So I think it is guaranteed for normal float values.</p>\n\n<p>My only concern was about special values: inf and nan. So I've added printing <code>p</code> to the output and made an experiment. Here is what I've got with gcc 6.3:</p>\n\n<pre><code>printf(\"IsNegative: %d\\n\", isNegative(+1.0/+0.0));\nprintf(\"IsNegative: %d\\n\", isNegative(-1.0/+0.0));\nprintf(\"IsNegative: %d\\n\", isNegative(+0.0/+0.0));\nprintf(\"IsNegative: %d\\n\", isNegative(+0.0/-0.0));\nprintf(\"IsNegative: %d\\n\", isNegative(-0.0/+0.0));\nprintf(\"IsNegative: %d\\n\", isNegative(-0.0/-0.0));\n</code></pre>\n\n<p>Results:</p>\n\n<pre><code>p = +inf\nIsNegative: 0\np = -inf\nIsNegative: 1\np = -nan\nIsNegative: 1\np = -nan\nIsNegative: 1\np = -nan\nIsNegative: 1\np = -nan\nIsNegative: 1\n</code></pre>\n\n<p>The result only looks strange for nan, apart from that the method should work.</p>\n"}], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 602, "favorite_count": 0, "accepted_answer_id": 46190383, "answer_count": 1, "score": 0, "last_activity_date": 1505286062, "creation_date": 1505282446, "last_edit_date": 1505282782, "question_id": 46189910, "link": "https://stackoverflow.com/questions/46189910/weird-method-to-check-if-a-float-number-is-negative", "title": "Weird method to check if a float number is negative", "body": "<p>In a C++ project, I saw this:</p>\n\n<pre><code>#include &lt;cstdlib&gt;\n#include &lt;cstdio&gt;\n\nstatic int isNegative(float arg)\n{\n    char p[20]; // Assume 20 is enough\n    sprintf(p, \"%f\", arg);\n    return p[0] == '-';\n}\n\nint main()\n{\n    printf(\"%d\\n\", isNegative(-1));\n}\n</code></pre>\n\n<p>I heard that <a href=\"http://www.cplusplus.com/reference/cstdio/sprintf/\" rel=\"nofollow noreferrer\"><code>sprintf()</code></a> might be problematic, since it may cause the negative sign to be gone when written to <code>p</code>. Is that true? Or is that method bullet proof (but awfully bad practice)?</p>\n\n<hr>\n\n<p>PS: Ignore the corner case of <code>-0</code>. Focus on <code>sprintf()</code>. I know that much better solutions exist, but I am just curious for this one. People from C are also welcomed to help.</p>\n"}, {"tags": ["c", "struct"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1505282506, "post_id": 46189856, "comment_id": 79341926, "body": "It also depends on where the variable is defined. If it&#39;s a global variable, you don&#39;t have to to any explicit initialization, as it will be &quot;cleared&quot; anyway. If it&#39;s a local (automatic) variable then method 1 is the natural way to initialize it, followed by method 3. Method 2 could possibly be optimized into method 3 by the compiler, but if not then involves both an initialization of a dummy temporary structure followed by a copy. I suggest you look at the generated (and optimized) assembly code for all three alternatives and compare them."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 1, "creation_date": 1505303256, "post_id": 46189856, "comment_id": 79355746, "body": "1  and 2 are different from 3. <code>{0}</code> will always set pointers to <code>NULL</code>, where as <code>memset</code> doesn&#39;t if representation of null pointer is not all bits zero on given system."}], "answers": [{"comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1505306504, "post_id": 46189891, "comment_id": 79358091, "body": "<i>If you care that much, benchmark your code.</i>  That probably belongs as a separate answer, in a giant red flashing font.  I&#39;d vote it up... ;-)"}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": true, "score": 9, "last_activity_date": 1505308584, "last_edit_date": 1505308584, "creation_date": 1505282359, "answer_id": 46189891, "question_id": 46189856, "link": "https://stackoverflow.com/questions/46189856/speed-of-memset-vs-direct-assignment-to-zero/46189891#46189891", "title": "Speed of memset Vs direct assignment to zero", "body": "<p>It is a quality of implementation issue.</p>\n\n<p><sup>(BTW, in pure theory, an implementation might have a <code>NULL</code> pointer which is not an all zero bits word; for such cases the semantics of your \u00a73 is different than those of \u00a71 or \u00a72; but in practice, most common processors today have a linear virtual address space and have their <code>NULL</code> pointer be a word of all zero bits)</sup> </p>\n\n<p>Recent <a href=\"http://gcc.gnu.org\" rel=\"nofollow noreferrer\">GCC</a> compilers (at least on usual x86-64 processors), with optimizations enabled (e.g. <code>gcc -O2</code>) are likely to produce the <em>same</em> (or very similar) machine code (because <code>memset</code> gets expanded as <code>__builtin_memset</code> which gets specifically compiled and often inlined), so using <code>memset</code> is <em>not</em> slower in practice (and could even become faster because of vectorization, e.g. <a href=\"https://en.wikipedia.org/wiki/Advanced_Vector_Extensions\" rel=\"nofollow noreferrer\">AVX</a> machine instructions)</p>\n\n<p>You could look at the assembler code produced with e.g. <code>gcc -S -fverbose-asm -O2 -march=native</code></p>\n\n<p><sup>(in some cases, notably when <code>struct xyz</code> has hundreds of fields, the compiler would even synthesize a call to <code>memset</code> for your case 1 and 2!)</sup></p>\n\n<blockquote>\n  <p>In general, will initialization by method 1 or 2 above be faster than method 3? </p>\n</blockquote>\n\n<p>In practice the answer is generally no (so prefer the most <em>readable</em> approach). If you care that much, benchmark your code.</p>\n\n<p><sup>(don't forget that development time also costs money; in many cases your human time is worth more than the few CPU nanoseconds you might win, and generally won't)</sup></p>\n"}], "owner": {"reputation": 151, "user_id": 3017124, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9c997c34113ab4fdde0299b0e01b7dcb?s=128&d=identicon&r=PG&f=1", "display_name": "LML", "link": "https://stackoverflow.com/users/3017124/lml"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1199, "favorite_count": 1, "accepted_answer_id": 46189891, "answer_count": 1, "score": 3, "last_activity_date": 1505308584, "creation_date": 1505282170, "last_edit_date": 1505282787, "question_id": 46189856, "link": "https://stackoverflow.com/questions/46189856/speed-of-memset-vs-direct-assignment-to-zero", "title": "Speed of memset Vs direct assignment to zero", "body": "<p>Please consider a struct definition below.</p>\n\n<pre><code>struct xyz {\n  char a;\n  void *ptr;\n  uint16_t num1;\n  uint32_t num2;\n  uint64_t num3;\n};\n</code></pre>\n\n<p>I can initialize an instance of this structure to zero in one of 3 ways as below.</p>\n\n<ol>\n<li><p>At time of declaration</p>\n\n<pre><code>struct xyz instance = { 0 };\n</code></pre></li>\n<li><p>Sometime after declaring it using the C-99 feature.</p>\n\n<pre><code>instance = (const struct xyz) { 0 };\n</code></pre></li>\n</ol>\n\n<p>3.<code>memset (&amp;instance, 0, sizeof (struct xyz));</code></p>\n\n<p>A typical C struct could have some padding added by the compiler for alignment purpose.\nSo memset will initialize the padding bytes also to zero.</p>\n\n<p>My question is:</p>\n\n<p>In general, will initialization by method 1 or 2 above be faster than method 3?\nIt doesn't matter how many CPU cycles are saved, I am just curious if 1 &amp; 2 are faster than 3 or not.</p>\n"}, {"tags": ["c", "function", "header", "undefined"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1505281992, "post_id": 46189767, "comment_id": 79341713, "body": "I know of no platform or framework where functions like that are standard. Where did you get the header file from? How did you learn about it? What is it named? Please give us more details."}, {"owner": {"reputation": 45, "user_id": 8577724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6412f9bd978321e7a6011abe80416fa3?s=128&d=identicon&r=PG&f=1", "display_name": "kimokono", "link": "https://stackoverflow.com/users/8577724/kimokono"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1505282366, "post_id": 46189767, "comment_id": 79341865, "body": "I am trying to analyze the OpenOCD code. the header I am talking about is available in this link <a href=\"https://github.com/ntfreak/openocd/blob/master/src/helper/command.h\" rel=\"nofollow noreferrer\">github.com/ntfreak/openocd/blob/master/src/helper/command.h</a> and the definition of these functions are not available anywhere else in the openocd code"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1505282683, "post_id": 46189767, "comment_id": 79342003, "body": "You <i>did</i> look in the <a href=\"https://github.com/ntfreak/openocd/blob/master/src/helper/command.c\" rel=\"nofollow noreferrer\"><code>command.c</code></a> source file?"}, {"owner": {"reputation": 739, "user_id": 8281970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/abHXs.jpg?s=128&g=1", "display_name": "Ketan Mukadam", "link": "https://stackoverflow.com/users/8281970/ketan-mukadam"}, "edited": false, "score": 4, "creation_date": 1505282711, "post_id": 46189767, "comment_id": 79342012, "body": "I think these are defined in <code>command.c</code> via macro definition of DEFINE_PARSE_NUM_TYPE. So for example <code>DEFINE_PARSE_NUM_TYPE(_ulong, unsigned long, strtoul, 0, ULONG_MAX)</code> this should define parse_ulong."}], "owner": {"reputation": 45, "user_id": 8577724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6412f9bd978321e7a6011abe80416fa3?s=128&d=identicon&r=PG&f=1", "display_name": "kimokono", "link": "https://stackoverflow.com/users/8577724/kimokono"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1505413522, "creation_date": 1505281806, "last_edit_date": 1505413522, "question_id": 46189767, "link": "https://stackoverflow.com/questions/46189767/parse-long-declared-in-header-but-not-defined", "title": "parse_long declared in header but not defined", "body": "<p>I have few parsing functions declared in a header, but I couldn't find their definitions anywhere in the code. I could find calls, but no definitions. Are they part of some predefined library? I tried to google that but nothing related came up. </p>\n\n<p>Functions such as: </p>\n\n<pre><code>int parse_ulong(const char *str, unsigned long *ul);\nint parse_long(const char *str, long *ul);\nint parse_u32(const char *str, uint32_t *ul);\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1505279862, "post_id": 46189198, "comment_id": 79340942, "body": "<i>&quot;I do not know what is wrong with this part of the code&quot;</i> - We&#39;re not mind readers. How can we possibly know what is <i>wrong</i> with this code when you never told intended behavior is <i>right</i>? We could <i>guess</i>, but that isn&#39;t what this site is about. <a href=\"https://stackoverflow.com/posts/46189198/edit\">Your post needs updating</a> to include the intended behavior, the actual (wrong) behavior, how they are different, and any additional info required to reproduce the problem (like input data, etc). <a href=\"https://stackoverflow.com/help/mcve\">minimal, <b>complete</b> example</a> demonstrating wrong behavior is ideal."}], "answers": [{"comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 3, "creation_date": 1505279545, "post_id": 46189219, "comment_id": 79340819, "body": "Equally important,  A newline will terminate the loop, but no matter what was read, it is <i>lost</i>. Loop continuation only means whatever it was, it wasn&#39;t a newline. Further, <code>getchar()</code> is <i>likely</i> reading from <code>stdin</code>, while the statements inside appear only interested in file IO. Needless to say, this loop is flat-out-odd. <code>getchar()</code> is <i>likely</i> wrong, in favor of <code>fgetc</code> on one of the files (likely <code>arch</code>)"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1505282151, "post_id": 46189219, "comment_id": 79341782, "body": "Note that on traditional versions of Unix, or on Linux when the input comes from a file and not a terminal, EOF would cause the <code>while (getchar() != &#39;\\n&#39;)</code> loop to spin its wheels indefinitely.  The loop should take care of EOF too: <code>int c; while ((c = getchar()) != EOF &amp;&amp; c != &#39;\\n&#39;) ...</code> and the return value from the <code>fscanf()</code> call should be be checked too.  And <a href=\"http://stackoverflow.com/questions/5431941/while-feof-file-is-always-wrong\"><code>while (!feof(file))</code> is always wrong</a>."}], "tags": [], "owner": {"reputation": 42880, "user_id": 982161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/kutcC.png?s=128&g=1", "display_name": "\u03a6Xoc\u0119 \uc6c3 \u041fepe&#250;pa \u30c4", "link": "https://stackoverflow.com/users/982161/%ce%a6xoc%c4%99-%ec%9b%83-%d0%9fepe%c3%bapa-%e3%83%84"}, "is_accepted": false, "score": 1, "last_activity_date": 1505279687, "last_edit_date": 1505279687, "creation_date": 1505279104, "answer_id": 46189219, "question_id": 46189198, "link": "https://stackoverflow.com/questions/46189198/i-do-not-know-if-im-doing-the-code-right-i-have-read-that-while-feof-arch/46189219#46189219", "title": "I do not know if I&#39;m doing the code right. I have read that while (! feof (arch)) is always wrong", "body": "<p>This means:</p>\n\n<pre><code>while(getchar()!='\\n')\n</code></pre>\n\n<p>you are reading a file char by char BUT you are not interested in the newLine character <strong>\\n</strong></p>\n\n<hr>\n\n<p>as aside note this important comment from @WhozCraig</p>\n\n<blockquote>\n  <p>Equally important, A newline will terminate the loop, but no matter\n  what was read, it is lost. Loop continuation only means whatever it\n  was, it wasn't a newline. Further, getchar() is likely reading from\n  stdin, while the statements inside appear only interested in file IO.\n  Needless to say, this loop is flat-out-odd.</p>\n</blockquote>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8601143"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1505420008, "creation_date": 1505278979, "last_edit_date": 1505420008, "question_id": 46189198, "link": "https://stackoverflow.com/questions/46189198/i-do-not-know-if-im-doing-the-code-right-i-have-read-that-while-feof-arch", "title": "I do not know if I&#39;m doing the code right. I have read that while (! feof (arch)) is always wrong", "body": "<p>The idea is to create a database for students' grades but I do not know what is wrong in this code</p>\n\n<pre><code>char bas;\nchar cadena[100];\nFILE *arch, *pagC;\nint c;\narch=fopen(\"alumnos.txt\",\"r\");\npagC=fopen(\"calificaciones.html\",\"w\");\n/*html tags for a table*/\nwhile(!feof(arch))         \n{\n    fprintf(pagC,\"&lt;TR&gt;\");\n    while(c!='\\n')                                  \n    {\n        fscanf(arch,\"%[^:]%c\",cadena,&amp;bas);    \n        fprintf(pagC,\"&lt;TD&gt;%s&lt;/TD&gt;\",cadena);\n    }\n    fprintf(pagC,\"&lt;/TR&gt; \\n\");\n}\nfprintf(pagC,\"&lt;/TABLE&gt; &lt;/CENTER&gt; &lt;/BODY&gt; &lt;/HTML&gt;\");\nfclose(pagC);\nfclose(arch);\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1505278046, "post_id": 46188944, "comment_id": 79340351, "body": "<code>768</code>:<code>0x0300</code>."}, {"owner": {"reputation": 6177, "user_id": 4948889, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/7f1b540c13a4b2663a9bf668f6a50145?s=128&d=identicon&r=PG", "display_name": "Jaffer Wilson", "link": "https://stackoverflow.com/users/4948889/jaffer-wilson"}, "edited": false, "score": 0, "creation_date": 1505278096, "post_id": 46188944, "comment_id": 79340375, "body": "Had you copied this code from somewhere and asking us why the code isn&#39;t working?"}, {"owner": {"reputation": 1, "user_id": 8397308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77b4eae6e3ce6c09ee0847cd71f50c99?s=128&d=identicon&r=PG&f=1", "display_name": "saurabh.hmr009", "link": "https://stackoverflow.com/users/8397308/saurabh-hmr009"}, "edited": false, "score": 0, "creation_date": 1505280069, "post_id": 46188944, "comment_id": 79341008, "body": "its was an interview question , which someone asked to me yesterday.So not copied from any site(According to me at least)."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8397308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77b4eae6e3ce6c09ee0847cd71f50c99?s=128&d=identicon&r=PG&f=1", "display_name": "saurabh.hmr009", "link": "https://stackoverflow.com/users/8397308/saurabh-hmr009"}, "edited": false, "score": 0, "creation_date": 1505280108, "post_id": 46189093, "comment_id": 79341027, "body": "Thank you for the answer, I got things now."}], "tags": [], "owner": {"reputation": 3794, "user_id": 7256714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adeb98b0e8995d8576ad5f66c0f982e5?s=128&d=identicon&r=PG&f=1", "display_name": "Pras", "link": "https://stackoverflow.com/users/7256714/pras"}, "is_accepted": true, "score": 0, "last_activity_date": 1505278396, "creation_date": 1505278396, "answer_id": 46189093, "question_id": 46188944, "link": "https://stackoverflow.com/questions/46188944/cant-understand-the-output-of-a-program/46189093#46189093", "title": "Can&#39;t understand the output of a program", "body": "<p>You have stored 768 in first member of struct st, so address at start of struct has 0x00000300(considering 4 bytes of int) in memory, when viewed as little endian stream it will look as 0x00030000</p>\n\n<p>You have stored its pointer in ptr which is char * which now points to value 0x00, ++ptr will point to next value ie 0x03</p>\n"}], "owner": {"reputation": 1, "user_id": 8397308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77b4eae6e3ce6c09ee0847cd71f50c99?s=128&d=identicon&r=PG&f=1", "display_name": "saurabh.hmr009", "link": "https://stackoverflow.com/users/8397308/saurabh-hmr009"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 46189093, "answer_count": 1, "score": -2, "last_activity_date": 1505278396, "creation_date": 1505277490, "question_id": 46188944, "link": "https://stackoverflow.com/questions/46188944/cant-understand-the-output-of-a-program", "title": "Can&#39;t understand the output of a program", "body": "<p>can anyone tell me why this program is printing 3 as the output or tell the functionality of the program.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nstruct st\n{\n        int a;\n        int b;\n};\nvoid func(struct st*);\n\nint main()\n{\n        struct st ab={128,768};\n        struct st *pq=&amp;ab;\n        func(pq);\n        return 0;\n}\n\nvoid func(struct st *p)\n{\n        char *pt;\n        p-&gt;a=768;\n        p-&gt;b=128;\n        pt=(char*)p;\n        printf(\"----%d\\n\",*(++pt));\n}\n</code></pre>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1505284802, "post_id": 46188937, "comment_id": 79343068, "body": "This might answer the question: <a href=\"https://stackoverflow.com/questions/6893285/why-do-function-pointer-definitions-work-with-any-number-of-ampersands-or-as\">Why do function pointer definitions work with any number of ampersands &#39;&amp;&#39; or asterisks &#39;*&#39;?</a>."}], "answers": [{"comments": [{"owner": {"reputation": 26, "user_id": 5745431, "user_type": "registered", "profile_image": "https://graph.facebook.com/847175642094252/picture?type=large", "display_name": "Steven  Shang", "link": "https://stackoverflow.com/users/5745431/steven-shang"}, "edited": false, "score": 0, "creation_date": 1505278961, "post_id": 46188956, "comment_id": 79340628, "body": "so essentially &amp;function and function would both give the same address of the function right?"}, {"owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "reply_to_user": {"reputation": 26, "user_id": 5745431, "user_type": "registered", "profile_image": "https://graph.facebook.com/847175642094252/picture?type=large", "display_name": "Steven  Shang", "link": "https://stackoverflow.com/users/5745431/steven-shang"}, "edited": false, "score": 0, "creation_date": 1505279001, "post_id": 46188956, "comment_id": 79340640, "body": "@StevenShang, yes."}], "tags": [], "owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "is_accepted": true, "score": 3, "last_activity_date": 1505350268, "last_edit_date": 1505350268, "creation_date": 1505277552, "answer_id": 46188956, "question_id": 46188937, "link": "https://stackoverflow.com/questions/46188937/whats-the-conventional-way-of-assigning-a-function-pointer-in-c/46188956#46188956", "title": "What&#39;s the conventional way of assigning a function pointer in C", "body": "<p>Neither matter, functions decay to function pointers. As with all things that don't matter, pick one and stick to it.</p>\n\n<p>Additionally, there is no stylistic requirement that you call functions with <code>(*myFunc)(input)</code> if you get them with <code>&amp;function</code>. There is no fundamental issue with getting function pointers using <code>myFunc = &amp;function</code> and then writing <code>myFunc(input)</code>, or getting function pointers with <code>myFunc = function</code> and then writing <code>(*myFunc)(input)</code>.</p>\n\n<p>Fun fact: the language never treats a function call as a call to a function value. Functions always undergo decay to a function pointer type, and the function pointer is what is called. In other words:</p>\n\n<pre><code>puts(\"hello world!\");\n</code></pre>\n\n<p>is <a href=\"https://godbolt.org/g/kuF9Zb\" rel=\"nofollow noreferrer\">implicitly converted to</a>:</p>\n\n<pre><code>((int (*)(const char*))&amp;puts)(\"hello world!\");\n</code></pre>\n\n<p>and so <code>(*myFunc)(input)</code> would, similarly, resolve to <code>((void (*)(int))&amp;*myFunc)(input)</code>, which seems a bit silly, but unless you care deeply about the abstract syntax tree view of your program, as we said before, it doesn't matter. It does the exact same thing.</p>\n"}], "owner": {"reputation": 26, "user_id": 5745431, "user_type": "registered", "profile_image": "https://graph.facebook.com/847175642094252/picture?type=large", "display_name": "Steven  Shang", "link": "https://stackoverflow.com/users/5745431/steven-shang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 46188956, "answer_count": 1, "score": 1, "last_activity_date": 1505350268, "creation_date": 1505277441, "question_id": 46188937, "link": "https://stackoverflow.com/questions/46188937/whats-the-conventional-way-of-assigning-a-function-pointer-in-c", "title": "What&#39;s the conventional way of assigning a function pointer in C", "body": "<p><strong>Suppose I have a function pointer, What's the more conventional way of assigning a function to it?</strong></p>\n\n<p><code>void (*myFunc)(void*)</code></p>\n\n<p>1) Use &amp; to get function's address, and dereference to invoke.</p>\n\n<p><code>myFunc = &amp;function;</code></p>\n\n<p><code>(*myFunc)(input);</code></p>\n\n<p>Or</p>\n\n<p>2) Use function's name directly, and invoke without dereferencing.</p>\n\n<p><code>myFunc = function;</code></p>\n\n<p><code>myFunc(input);</code></p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 12557, "user_id": 1270789, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FXwoB.png?s=128&g=1", "display_name": "Ken Y-N", "link": "https://stackoverflow.com/users/1270789/ken-y-n"}, "edited": false, "score": 0, "creation_date": 1505276885, "post_id": 46188829, "comment_id": 79340027, "body": "Why don&#39;t you try exactly like your <code>strncpy</code> argument? (Also, what is the point of <code>i</code>, and your <code>while</code> loop looks rather wonky like it&#39;s trying to be a <code>for</code>, but it will only execute once - you want <code>for (int cur = 0; cur &lt; 500; cur += 50)</code>.) (And also use <code>strcpy</code> instead of <code>strncpy</code> as you copy from off the end of the <code>token</code> string, which is undefined behaviour.)"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1505277091, "post_id": 46188829, "comment_id": 79340082, "body": "Why don&#39;t you use a <code>for</code> loop or declare <code>cur</code> <i>before</i> <code>while</code> ?"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1505277159, "post_id": 46188829, "comment_id": 79340102, "body": "BTW compile with all warnings &amp; debug info (<code>gcc -Wall -Wextra -g</code> with <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a>...) and <b>use the debugger</b> <code>gdb</code>"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1505277286, "post_id": 46188829, "comment_id": 79340140, "body": "At last, your <code>tmp</code> is probably declared with the wrong type. Consider using some <code>struct</code> with a <a href=\"https://en.wikipedia.org/wiki/Flexible_array_member\" rel=\"nofollow noreferrer\">flexible array member</a>. You certainly should spend several days reading a good C programming book. If you insist on keeping such types, draw on a board a picture of your memory zone."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1505277581, "post_id": 46188829, "comment_id": 79340234, "body": "<code>for(int cur = 0, cur &lt; 500,cur += 50){</code> --&gt; <code>for(int cur = 0; cur &lt; 500; cur += 50){</code>,   <code>printf(&quot;--- %s\\n&quot;, &amp;tmp[cur]); </code>"}], "answers": [{"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1505280814, "post_id": 46188978, "comment_id": 79341266, "body": "Only thing you missed was the link to <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\"><b>How to debug small programs</b></a> and advice to <i>&quot;talk to the duck&quot;</i>... Really, it helps <code>:)</code>"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1505280862, "post_id": 46188978, "comment_id": 79341287, "body": "I just mentionned the duck"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1505285214, "post_id": 46188978, "comment_id": 79343325, "body": "I already vote, I tried again and it tried to take it back <code>:)</code>"}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 1, "last_activity_date": 1505281333, "last_edit_date": 1505281333, "creation_date": 1505277700, "answer_id": 46188978, "question_id": 46188829, "link": "https://stackoverflow.com/questions/46188829/how-to-print-the-values-stores-in-a-calloc-pointer-c/46188978#46188978", "title": "how to print the values stores in a calloc pointer (c)", "body": "<blockquote>\n<pre><code>for(int cur = 0, cur &lt; 500,cur += 50){\n</code></pre>\n</blockquote>\n\n<p>This is wrong. The commas <code>,</code> should probably be semicolons <code>;</code> and you are unwittingly and incorrectly using the <a href=\"https://en.wikipedia.org/wiki/Comma_operator\" rel=\"nofollow noreferrer\">comma operator</a></p>\n\n<blockquote>\n  <p>Now I have a pointer with several values stored</p>\n</blockquote>\n\n<p>Please define appropriate types. I don't see several \"values\" stored in your pointer.</p>\n\n<p>However, you could see that pointer as (pointing to) an array of 500 <code>char</code>-s. Then <code>%s</code> is wrong in your <code>printf</code> (you might use <code>%c</code>).</p>\n\n<p>Recommendations:</p>\n\n<ul>\n<li><p>spend several days reading some good C programming book. I'm even tempted to suggest taking a few weeks to read <a href=\"https://mitpress.mit.edu/sicp/\" rel=\"nofollow noreferrer\">SICP</a> (an excellent introduction to programming, which does not use C) and practice, before learning C (which is a difficult programming language).</p></li>\n<li><p>specify\u00a0(on paper, in English or in your native language), what your code is supposed to do, as precisely as possible.</p></li>\n<li><p>read carefully and several times some reference for <em>every</em> function that you are using notably <a href=\"http://en.cppreference.com/w/c/memory/calloc\" rel=\"nofollow noreferrer\">calloc</a>, <a href=\"http://en.cppreference.com/w/c/string/byte/strncpy\" rel=\"nofollow noreferrer\">strncpy</a>, <a href=\"http://en.cppreference.com/w/c/io/fprintf\" rel=\"nofollow noreferrer\">printf</a></p></li>\n<li><p>read more about <a href=\"https://en.wikipedia.org/wiki/Pointer_(computer_programming)\" rel=\"nofollow noreferrer\">pointers</a> and pointer <a href=\"http://en.cppreference.com/w/c/language/operator_arithmetic\" rel=\"nofollow noreferrer\">arithmetic</a> and <a href=\"https://en.wikipedia.org/wiki/C_dynamic_memory_allocation\" rel=\"nofollow noreferrer\">C dynamic memory allocation</a>.</p></li>\n<li><p>compile with all warnings and debug info, e.g. <code>gcc -Wall -Wextra -g</code> with <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a></p></li>\n<li><p>throw your code away, rewrite it entirely (till you get no warnings at all), use <a href=\"https://en.wikipedia.org/wiki/Rubber_duck_debugging\" rel=\"nofollow noreferrer\">rubber duck debugging</a>; read about how to <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">debug small programs</a></p></li>\n<li><p>draw on a board the picture of your memory (with arrows for pointers, and boxes for locations)</p></li>\n<li><p>use a debugger e.g. <code>gdb</code> to run your code step by step and query the program's state, thus understanding precisely what is happening in your process.</p></li>\n<li><p>study -for inspiration- the source code of some <em>existing</em> <a href=\"https://en.wikipedia.org/wiki/Free_software\" rel=\"nofollow noreferrer\">free software</a> (e.g. on <a href=\"http://github.com/\" rel=\"nofollow noreferrer\">github</a>)</p></li>\n</ul>\n\n<blockquote>\n  <p>What should I do print out the value one by one?</p>\n</blockquote>\n\n<p>You first need to understand and define the <a href=\"https://en.wikipedia.org/wiki/Type_system\" rel=\"nofollow noreferrer\"><em>types</em></a> involved. Perhaps you want arrays (of what type?) or <code>struct</code>-s (with what fields and types), maybe ending with some <a href=\"https://en.wikipedia.org/wiki/Flexible_array_member\" rel=\"nofollow noreferrer\">flexible array member</a> </p>\n\n<blockquote>\n  <p>I dont know how to jump or read to the next value</p>\n</blockquote>\n\n<p>You never explained (and probably did not understood) what \"values\" of what type do you have in mind. So jumping to the next one is meaningless (without expliciting values and types).</p>\n\n<p>Perhaps you are confused about what strings are in C. Read a good book. Understand what is <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>.</p>\n\n<p>Maybe you want some array of</p>\n\n<pre><code>struct yourstruct {\n   char name[50];\n};\n</code></pre>\n\n<p>type. But then your code is wrong! E.g. it would start with</p>\n\n<pre><code>struct yourstruct *p = calloc(10, sizeof(struct yourstruct));\nif (!p) { perror(\"calloc failed\"); exit(EXIT_FAILURE); };\n</code></pre>\n\n<p>(when using dynamic memory allocation with <code>calloc</code> or <code>malloc</code> you should check against failure)</p>\n"}, {"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 2, "last_activity_date": 1505279963, "creation_date": 1505279963, "answer_id": 46189386, "question_id": 46188829, "link": "https://stackoverflow.com/questions/46188829/how-to-print-the-values-stores-in-a-calloc-pointer-c/46189386#46189386", "title": "how to print the values stores in a calloc pointer (c)", "body": "<p>Since you copied null-terminated values into the array using (the corrected code):</p>\n\n<pre><code>for (int cur = 0; cur &lt; 500; cur += 50)\n    strncpy(&amp;tmp[cur], token, 50);\n</code></pre>\n\n<p>You can print the values using:</p>\n\n<pre><code>for (int cur = 0; cur &lt; 500; cur += 50)\n    printf(\"--- %s\\n\", &amp;tmp[cur]);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 1, "last_activity_date": 1505286792, "last_edit_date": 1505286792, "creation_date": 1505285773, "answer_id": 46190817, "question_id": 46188829, "link": "https://stackoverflow.com/questions/46188829/how-to-print-the-values-stores-in-a-calloc-pointer-c/46190817#46190817", "title": "how to print the values stores in a calloc pointer (c)", "body": "<blockquote>\n  <p>I dont know how to jump or read to the next value, and keeping reading\n  until the whole pointer is printed.</p>\n</blockquote>\n\n<p>Well, you have made that more difficult on yourself than it needs to be. Why? <em>Jumping</em> or <em>reading</em> the next value in a block of memory is generally handled with <em>pointer arithmetic</em> or <em>array indexing</em> (which itself is just a convenient form of <em>pointer arithmetic</em>).</p>\n\n<p>The <em>jump</em> or <em>offset</em> of sequential values stored in an array or block of memory is generally controlled by the <em>type</em> (e.g. <code>char</code>, <code>int</code>, <code>struct foo</code>, etc..). It need not be that way (as you can see in the other answers), but it is set up to work that way by default.</p>\n\n<p>Each <em>type</em> has a size (in number of bytes), e.g. <code>sizeof (char) = 1</code>, <code>sizeof (int) = 4</code> (generally), <code>sizeof (char *) = sizeof (a pointer)</code> (which is generally <code>8</code> on x86_64 or <code>4</code> on x86. The <em>type size</em> controls the jump or offset to the next value, e.g.</p>\n\n<pre><code>size_t n = 10;\nint *intarray = calloc (n, sizeof *intarray); /* allocates space for 10 ints */\nfor (int i = 0; i &lt; 10; i++)                  /* fill array, 0, 10, 20, ... 90 */ \n    intarray[i] = i * 10;\n</code></pre>\n\n<p>By declaring <code>intarray</code> as type <code>int</code>, the compiler knows that <code>intarray + 1</code> is the address for the 2nd value (e.g. <code>10</code>) and <code>intarray + 2</code> is the value of the 3rd (<code>20</code>), and so on. <strong>Note</strong>, it is up to YOU to not exceed the memory bounds, e.g. <code>intarray + 9</code> is the 10th value (OK), <code>intarray + 10</code> is beyond the end of the block of memory allocated and invokes (<em>Undefined Behavior</em>).</p>\n\n<p><em>Pointer Arithmetic</em> provides another easy means of jumping from one value in memory to the next. Again, this works based on <em>type size</em>.</p>\n\n<p><strong>NOTE:</strong> you must always preserve a pointer to the beginning of the allocated block of memory so it can be freed later, so to jump to each of the values in <code>intarray</code>, either use <em>array indexing</em>, e.g., <code>intarray[i]</code>, or declare a second pointer to the beginning and use it for pointer arithmetic, e.g.</p>\n\n<pre><code>...\nint *p = intarray;\nsize_t i = 0;\n\nwhile (i &lt; n) {                                 /* loop to do this 10 times */\n    printf (\"value[%zu] : %d\\n\", i, *p);        /* print the value stored at p */\n    p++;                                        /* increment p to point to next */\n}\n</code></pre>\n\n<p><strong>Also note:</strong> all values must be initialized before you attempt to access them. (which since you used <code>calloc</code> you are safe - as all bytes were initialized to zero). However, when using <code>malloc</code>, the memory is uninitialized.</p>\n\n<p>Array indexing and pointer arithmetic work for all types, even defined types like <code>struct foo { int a; int b; };</code>. Here, the compiler knows the size for <code>sizeof (struct foo)</code>, so you can use a pointer to <code>foo</code> just the same as you would use a pointer to <code>int</code> (or <code>char</code>, etc..)</p>\n\n<p>Where you have made things hard on yourself is your are attempting to store a <em>string</em> (of size <code>0-49</code> chars) at intervals of <code>50</code> within <code>tmp</code>. While this is perfectly fine, the compiler cannot help you and you cannot use pointer arithmetic or array indexing (unless you roll-your-own) -- because <strong>you made up the type</strong> <code>char + 50</code>. </p>\n\n<p>Now you can use a statically declared 2D array (e.g. <code>char tmp[10][50]</code>) to let the compiler help you. Then you can use indexing (e.g. <code>tmp[0], tmp[1], ...</code> or you can declare a pointer to array of 50 chars and you can use pointer arithmetic (e.g. <code>char (*p)[50] = tmp;</code> and then <code>p++</code> to get to the 2nd, etc..</p>\n\n<p>(<strong>note:</strong> the parenthesis around <code>(*p)</code> are required due to C-Operator Precedence, without the parens you create an <em>array of pointers to char</em> (50 of them) instead of creating a <em>pointer to array</em>)</p>\n\n<p>You can also dynamically allocate memory for any number of 50-char blocks. For example to do what you intended to do (in one big block), but telling the compiler that you want 50-char blocks (instead of one 500-char block that you have to invent indexing for), you can simply do:</p>\n\n<pre><code>char (*tmp)[50];                 /* 'pointer-to-array 50, type char' */\ntmp = calloc (n, sizeof *tmp);   /* allocate storage for 10 tmp */\n</code></pre>\n\n<p>Now you can simply use either array indexing, or pointer arithmetic to fill and iterate over the words stored within each 50-char block in <code>tmp</code>.</p>\n\n<p>To put the whole thing together, let's take two examples. The first will create an array of 10 blocks of memory (50-chars each) and using array indexing to fill and iterate over the contents of <code>tmp</code>, the second creates the same block of memory, but will use only pointers and a counter. (both examples do the exact same thing):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define NWRDS 10    /* number of words */\n#define MAXC  50    /* max chars per-word */\n\nint main (void) {\n\n    size_t n = 0;                       /* number of words */\n    char (*tmp)[MAXC];                  /* 'pointer-to-array 50, type char' */\n    tmp = calloc (NWRDS, sizeof *tmp);  /* allocate storage for 10 tmp */\n\n    if (tmp == NULL)                    /* validate all memory allocations */\n        exit (EXIT_FAILURE);\n\n    strcpy (tmp[n], \"my dog has fleas.\");  /* copy stuff to first 3 blocks */\n    n++;\n    strcpy (tmp[n], \"my cat has none.\");\n    n++;\n    strcpy (tmp[n], \"... lucky cat...\");\n    n++;\n\n    for (size_t i = 0; i &lt; n; i++)\n        printf (\"tmp[%zu] : %s\\n\", i, tmp[i]);\n\n    free (tmp);                 /* dont' forget to free what you allocate */\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Example Use/Output</strong></p>\n\n<pre><code>$ ./bin/ptr2array\ntmp[0] : my dog has fleas.\ntmp[1] : my cat has none.\ntmp[2] : ... lucky cat...\n</code></pre>\n\n<p><strong>Memory Use/Error Check</strong></p>\n\n<p>In any code you write that dynamically allocates memory, you have 2 <em>responsibilities</em> regarding any block of memory allocated: (1) <em>always preserve a pointer to the starting address</em> for the block of memory so, (2) it can be <em>freed</em> when it is no longer needed.</p>\n\n<p>It is imperative that you use a memory error checking program to insure you do not attempt to write beyond/outside the bounds of your allocated block of memory, attempt to read or base a conditional jump on an uninitialized value, and finally, to confirm that you free all the memory you have allocated. </p>\n\n<p>For Linux <code>valgrind</code> is the normal choice. There are similar memory checkers for every platform. They are all simple to use, just run your program through it.</p>\n\n<pre><code>$ valgrind ./bin/ptr2array\n==6010== Memcheck, a memory error detector\n==6010== Copyright (C) 2002-2015, and GNU GPL'd, by Julian Seward et al.\n==6010== Using Valgrind-3.11.0 and LibVEX; rerun with -h for copyright info\n==6010== Command: ./bin/ptr2array\n==6010==\ntmp[0] : my dog has fleas.\ntmp[1] : my cat has none.\ntmp[2] : ... lucky cat...\n==6010==\n==6010== HEAP SUMMARY:\n==6010==     in use at exit: 0 bytes in 0 blocks\n==6010==   total heap usage: 1 allocs, 1 frees, 500 bytes allocated\n==6010==\n==6010== All heap blocks were freed -- no leaks are possible\n==6010==\n==6010== For counts of detected and suppressed errors, rerun with: -v\n==6010== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)\n</code></pre>\n\n<p><strong>Note:</strong> exactly <code>500</code> bytes were allocated, just as you intended.</p>\n\n<p>Always confirm that you have freed all memory you have allocated and that there are no memory errors.</p>\n\n<p>Now, let's do the same thing again, using only pointers and a counter,</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define NWRDS 10    /* number of words */\n#define MAXC  50    /* max chars per-word */\n\nint main (void) {\n\n    size_t n = 0;                       /* simple counter */\n    char (*tmp)[MAXC], (*p)[MAXC],      /* 'pointer-to-array 50, type char' */\n        (*p2)[MAXC];                   /* (3 of them) */\n    tmp = calloc (NWRDS, sizeof *tmp);  /* allocate storage for 10 tmp */\n\n    if (tmp == NULL)                    /* validate all memory allocations */\n        exit (EXIT_FAILURE);\n\n    p = p2 = tmp;                       /* set all pointers equal to tmp */\n\n    strcpy (*p++, \"my dog has fleas.\"); /* copy stuff to first 3 blocks */\n    strcpy (*p++, \"my cat has none.\");\n    strcpy (*p++, \"... lucky cat...\");\n\n    while (p2 &lt; p)\n        printf (\"tmp[%zu] : %s\\n\", n++, *p2++);\n\n    free (tmp);                 /* dont' forget to free what you allocate */\n\n    return 0;\n}\n</code></pre>\n\n<p>(output and memory check are the same)</p>\n\n<p>While your question was basic, it is deceptively basic, because it implicates the fundamental concepts of indexing, pointer arithmetic and how both are tied directly to the <em>type</em> of values being handled. Also note, you can also declare <code>tmp</code> as <code>char **tmp;</code> and first allocate <code>10</code> pointers (e.g. <code>tmp = calloc (10, sizeof *tmp);)</code> and then allocate, copy each string as you go, (e.g. <code>tmp[n++] = strdup (\"my dog has fleas.\");</code> You are then resposible for freeing each individual word and then the pointers when you are done (that example is left for another day)</p>\n\n<p>Hopefully this helps. Let me know if you have any further questions.</p>\n"}], "owner": {"reputation": 31, "user_id": 8544691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4adc22640550e5e7d6cc8a3e9ab6961?s=128&d=identicon&r=PG&f=1", "display_name": "jiaru zhu", "link": "https://stackoverflow.com/users/8544691/jiaru-zhu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 817, "favorite_count": 0, "accepted_answer_id": 46189386, "answer_count": 3, "score": -2, "last_activity_date": 1505286792, "creation_date": 1505276676, "last_edit_date": 1505277216, "question_id": 46188829, "link": "https://stackoverflow.com/questions/46188829/how-to-print-the-values-stores-in-a-calloc-pointer-c", "title": "how to print the values stores in a calloc pointer (c)", "body": "<p>Suppose I have a Pointer looks like:</p>\n\n<pre><code>char *tmp = calloc(1, 500);\n</code></pre>\n\n<p>Then I signed the value into the pointer:</p>\n\n<pre><code>char *token = \"star\";\nfor(int cur = 0, cur &lt; 500,cur += 50){\n       strncpy(&amp;tmp[cur], token, 50);//each 50 units will get a value\n\n}\n</code></pre>\n\n<p>Now I have a pointer with several values stored. What should I do print out the value one by one?  </p>\n\n<pre><code>printf(\"--- %s\\n\", tmp); // this seems can only print the first one\n</code></pre>\n\n<p>I dont know how to jump or read to the next value, and keeping reading until the whole pointer is printed.</p>\n"}, {"tags": ["c", "switch-statement", "getopt"], "comments": [{"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1505274147, "post_id": 46188458, "comment_id": 79339366, "body": "You might take alook at this: <a href=\"https://www.gnu.org/software/libc/manual/html_node/Example-of-Getopt.html#Example-of-Getopt\" rel=\"nofollow noreferrer\">gnu.org/software/libc/manual/html_node/&hellip;</a>"}, {"owner": {"reputation": 23331, "user_id": 134252, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/azWjr.png?s=128&g=1", "display_name": "Dolda2000", "link": "https://stackoverflow.com/users/134252/dolda2000"}, "edited": false, "score": 0, "creation_date": 1505274207, "post_id": 46188458, "comment_id": 79339376, "body": "Seems to work perfectly well for me. Please post your test-case."}, {"owner": {"reputation": 117, "user_id": 8391313, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sgVQDaV-dwY/AAAAAAAAAAI/AAAAAAAAMQg/Uv71PqqGgIQ/photo.jpg?sz=128", "display_name": "John", "link": "https://stackoverflow.com/users/8391313/john"}, "edited": false, "score": 0, "creation_date": 1505274333, "post_id": 46188458, "comment_id": 79339403, "body": "My test case would be ./program_name d"}, {"owner": {"reputation": 23331, "user_id": 134252, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/azWjr.png?s=128&g=1", "display_name": "Dolda2000", "link": "https://stackoverflow.com/users/134252/dolda2000"}, "edited": false, "score": 0, "creation_date": 1505274334, "post_id": 46188458, "comment_id": 79339404, "body": "Just in case you&#39;re just being bit by <code>stdout</code> buffering somehow, please add <code>\\n</code> to the end of all your <code>printf</code> strings."}, {"owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "edited": false, "score": 0, "creation_date": 1505274357, "post_id": 46188458, "comment_id": 79339410, "body": "@John: <code>d</code> isn&#39;t a flag. Try: <code>.&#47;program_name -r -s foo -p</code>"}, {"owner": {"reputation": 23331, "user_id": 134252, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/azWjr.png?s=128&g=1", "display_name": "Dolda2000", "link": "https://stackoverflow.com/users/134252/dolda2000"}, "edited": false, "score": 0, "creation_date": 1505274371, "post_id": 46188458, "comment_id": 79339412, "body": "@John: There are no options in that test case, though, so it would be expected that it doesn&#39;t enter the <code>while</code> loop body with that test case."}, {"owner": {"reputation": 117, "user_id": 8391313, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sgVQDaV-dwY/AAAAAAAAAAI/AAAAAAAAMQg/Uv71PqqGgIQ/photo.jpg?sz=128", "display_name": "John", "link": "https://stackoverflow.com/users/8391313/john"}, "reply_to_user": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "edited": false, "score": 0, "creation_date": 1505274578, "post_id": 46188458, "comment_id": 79339467, "body": "@BillLynch thanks, got it working. I didn&#39;t realize getopt only accepted flags"}], "answers": [{"tags": [], "owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "is_accepted": true, "score": 0, "last_activity_date": 1505274650, "creation_date": 1505274650, "answer_id": 46188551, "question_id": 46188458, "link": "https://stackoverflow.com/questions/46188458/c-getopt-switch-while-loop-and-default-case-for-invalid-options/46188551#46188551", "title": "C - getopt switch while loop and default case for invalid options", "body": "<p>From the comments:</p>\n\n<blockquote>\n  <p><code>./program_name d</code> doesn't have a flag. Try: ./program_name -r -s foo -p</p>\n</blockquote>\n\n<p>You could also print the remaining options that weren't parsed via:</p>\n\n<pre><code>for (int i = optind; i &lt; argc; i++) {\n    printf(\"remaining argument[%d]: %s\\n\", i, argv[i]);\n}\n</code></pre>\n"}], "owner": {"reputation": 117, "user_id": 8391313, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sgVQDaV-dwY/AAAAAAAAAAI/AAAAAAAAMQg/Uv71PqqGgIQ/photo.jpg?sz=128", "display_name": "John", "link": "https://stackoverflow.com/users/8391313/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 702, "favorite_count": 0, "accepted_answer_id": 46188551, "answer_count": 1, "score": 0, "last_activity_date": 1505274650, "creation_date": 1505273899, "question_id": 46188458, "link": "https://stackoverflow.com/questions/46188458/c-getopt-switch-while-loop-and-default-case-for-invalid-options", "title": "C - getopt switch while loop and default case for invalid options", "body": "<p>I want to get the program to hit the default case if an invalid option/command is typed, but it doesn't even enter the while loop. I'm wondering what I'm doing wrong, and what I would need to change to get it working, it only works if a correct case is used. :)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;getopt.h&gt;\n#include &lt;string.h&gt;\nint main (int argc, char *argv[]){\n\nconst char *optstring = \"rs:pih\";\nchar option;\n\nwhile ((option = getopt(argc, argv, optstring)) != EOF) {\n\nprintf(\"I'm in the while loop!\");\n\n    switch (option) {\n        case 'r':\n            break;\n        case 's':\n            printf(\"Second Argument: %s\", optarg);\n            break;\n        case 'p':\n            printf(\"p\");\n            break;\n        case 'i':\n            printf(\"i\");\n            break;\n        case 'h':\n            printf(\"h\");\n            break;\n        default:\n            printf(\"nothing\");\n\n    }\n\n }\n\n return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "loops", "for-loop", "break"], "comments": [{"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 4, "creation_date": 1505272394, "post_id": 46188237, "comment_id": 79339028, "body": "Debug it!. At a guess <code>caracter_valido</code> is not 0 anymore..."}, {"owner": {"reputation": 3516, "user_id": 7240790, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gnqtK.jpg?s=128&g=1", "display_name": "3stud1ant3", "link": "https://stackoverflow.com/users/7240790/3stud1ant3"}, "edited": false, "score": 1, "creation_date": 1505272434, "post_id": 46188237, "comment_id": 79339038, "body": "I think you dont need <code>break</code> after <code>default</code> case"}, {"owner": {"reputation": 4682, "user_id": 360270, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/1gH9s.jpg?s=128&g=1", "display_name": "starmole", "link": "https://stackoverflow.com/users/360270/starmole"}, "reply_to_user": {"reputation": 3516, "user_id": 7240790, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gnqtK.jpg?s=128&g=1", "display_name": "3stud1ant3", "link": "https://stackoverflow.com/users/7240790/3stud1ant3"}, "edited": false, "score": 2, "creation_date": 1505272849, "post_id": 46188237, "comment_id": 79339114, "body": "@3stud1ant3 it&#39;s good practice though! if somebody adds a case after it would fall through"}, {"owner": {"reputation": 11, "user_id": 8600819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a22e3791c8c66423622ec8e481dfeb8?s=128&d=identicon&r=PG&f=1", "display_name": "Cyber02", "link": "https://stackoverflow.com/users/8600819/cyber02"}, "reply_to_user": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 0, "creation_date": 1505272981, "post_id": 46188237, "comment_id": 79339135, "body": "@John3136 That was it. So silly of me. I had to rewrite the code because i didn&#39;t save and i messed up. I wanted to solve this quickly. Thank you"}, {"owner": {"reputation": 3516, "user_id": 7240790, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gnqtK.jpg?s=128&g=1", "display_name": "3stud1ant3", "link": "https://stackoverflow.com/users/7240790/3stud1ant3"}, "reply_to_user": {"reputation": 4682, "user_id": 360270, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/1gH9s.jpg?s=128&g=1", "display_name": "starmole", "link": "https://stackoverflow.com/users/360270/starmole"}, "edited": false, "score": 0, "creation_date": 1505273187, "post_id": 46188237, "comment_id": 79339171, "body": "@starmole thanks for your suggestion, but I have a question that wont it be bad practise if someone defines a case after <code>default</code> since it is meant to be the last case"}, {"owner": {"reputation": 4682, "user_id": 360270, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/1gH9s.jpg?s=128&g=1", "display_name": "starmole", "link": "https://stackoverflow.com/users/360270/starmole"}, "reply_to_user": {"reputation": 3516, "user_id": 7240790, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gnqtK.jpg?s=128&g=1", "display_name": "3stud1ant3", "link": "https://stackoverflow.com/users/7240790/3stud1ant3"}, "edited": false, "score": 5, "creation_date": 1505273702, "post_id": 46188237, "comment_id": 79339269, "body": "@3stud1ant3: default does not have to be the last case! there can be crazy switch statements that handle a couple of case and break, then default with fall through. Not code anybody should write! But I have fixed bugs like that in production before. No break after default, and somebody just adds another case after default... so now i religiously put a break after default."}], "owner": {"reputation": 11, "user_id": 8600819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a22e3791c8c66423622ec8e481dfeb8?s=128&d=identicon&r=PG&f=1", "display_name": "Cyber02", "link": "https://stackoverflow.com/users/8600819/cyber02"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1505272176, "creation_date": 1505272176, "question_id": 46188237, "link": "https://stackoverflow.com/questions/46188237/break-of-for-loop-after-switch-c", "title": "Break of FOR loop after switch - C", "body": "<pre><code>int realizar_reparaciones(int naves_a_reparar, int repuestos_laser, int repuestos_escudos, int repuestos_compensadores){\nint caracter_valido = 0;\nchar reparacion_necesaria;\nint naves_con_alambre = 0;\nint contador_laser = 0;\nint contador_escudo = 0;\nprintf (\"A continuaci\u00f3n deber\u00e1 ingresar uno de los siguientes valores por nave: L (Generador L\u00e1ser) o E (Generador de escudo deflector)\\n\");\nfor (int i = 1; i &lt;= naves_a_reparar; i = i + 1){\n    while (caracter_valido == 0){\n        printf (\"Ingrese la reparaci\u00f3n que hay que realizarle a la nave %d: \", i);\n        scanf (\" %c\", &amp;reparacion_necesaria);\n        switch (reparacion_necesaria){\n            case 'L': \n                if (repuestos_laser == 0){\n                    naves_con_alambre = naves_con_alambre + 1;\n                } else {\n                    repuestos_laser = repuestos_laser - 1;\n                    contador_laser = contador_laser + 1;\n                }\n                caracter_valido = 1;\n            break;\n            case 'E': \n                if (repuestos_escudos == 0){\n                    naves_con_alambre = naves_con_alambre + 1;\n                } else {\n                    repuestos_escudos = repuestos_escudos - 1;\n                    contador_escudo = contador_escudo + 1;\n                }\n                caracter_valido = 1;\n            break;\n            default: \n                printf (\"Ingrese unicamente alguno de los caracteres previamente mencionados\\n\");\n            break;\n        }\n    }\n}\nprintf (\"Se utilizaron %d generadores l\u00e1ser\\n\", contador_laser);\nprintf (\"Se utilizaron %d generadores de escudos deflectores\\n\", contador_escudo);\nprintf (\"Se utilizaron %d compensadores de aceleracion\\n\", contador_compensador);\nreturn naves_con_alambre;\n</code></pre>\n\n<p>I have this function in C. i can only get the FOR to run once even if \"naves_a_reparar\" is 30 or any high number. After that, it goes out of the FOR loop and function ends. Why is this happening?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2928, "user_id": 5927758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QmcMj.png?s=128&g=1", "display_name": "Mitch", "link": "https://stackoverflow.com/users/5927758/mitch"}, "edited": false, "score": 0, "creation_date": 1505273229, "post_id": 46188235, "comment_id": 79339176, "body": "first and foremost you need to create a file pointer and then use fopen()"}, {"owner": {"reputation": 491, "user_id": 8509272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/487ff5fe4697aeb326fa5092ef38f116?s=128&d=identicon&r=PG&f=1", "display_name": "savram", "link": "https://stackoverflow.com/users/8509272/savram"}, "edited": false, "score": 1, "creation_date": 1505273394, "post_id": 46188235, "comment_id": 79339206, "body": "Post the code instead of linking an image to it"}, {"owner": {"reputation": 23331, "user_id": 134252, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/azWjr.png?s=128&g=1", "display_name": "Dolda2000", "link": "https://stackoverflow.com/users/134252/dolda2000"}, "reply_to_user": {"reputation": 2928, "user_id": 5927758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QmcMj.png?s=128&g=1", "display_name": "Mitch", "link": "https://stackoverflow.com/users/5927758/mitch"}, "edited": false, "score": 0, "creation_date": 1505274880, "post_id": 46188235, "comment_id": 79339534, "body": "@Mitchel0022: Why would that be necessary if OP just wants to read from <code>stdin</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 23331, "user_id": 134252, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/azWjr.png?s=128&g=1", "display_name": "Dolda2000", "link": "https://stackoverflow.com/users/134252/dolda2000"}, "edited": false, "score": 0, "creation_date": 1505275203, "post_id": 46188569, "comment_id": 79339609, "body": "Instead of <code>int c = &#39;\\n&#39;; &#47;&#47; force entry into loop</code>, I would perhaps argue that a <code>do {} while()</code> loop would be nicer."}, {"owner": {"reputation": 23331, "user_id": 134252, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/azWjr.png?s=128&g=1", "display_name": "Dolda2000", "link": "https://stackoverflow.com/users/134252/dolda2000"}, "reply_to_user": {"reputation": 11, "user_id": 7840432, "user_type": "registered", "profile_image": "https://graph.facebook.com/1937643509804300/picture?type=large", "display_name": "Hu Yunfei", "link": "https://stackoverflow.com/users/7840432/hu-yunfei"}, "edited": false, "score": 0, "creation_date": 1505275388, "post_id": 46188569, "comment_id": 79339643, "body": "@HuYunfei: If you found the answer helpful, you may want to not only accept it, but also upvote it. It&#39;s the common etiquette unless you have reason not to."}, {"owner": {"reputation": 11, "user_id": 7840432, "user_type": "registered", "profile_image": "https://graph.facebook.com/1937643509804300/picture?type=large", "display_name": "Hu Yunfei", "link": "https://stackoverflow.com/users/7840432/hu-yunfei"}, "edited": false, "score": 0, "creation_date": 1505277065, "post_id": 46188569, "comment_id": 79340076, "body": "Definitely do that"}], "tags": [], "owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "is_accepted": true, "score": 2, "last_activity_date": 1505275170, "last_edit_date": 1505275170, "creation_date": 1505274775, "answer_id": 46188569, "question_id": 46188235, "link": "https://stackoverflow.com/questions/46188235/i-want-to-read-a-file-from-stdin-and-read-each-line-into-a-string-and-only-use-g/46188569#46188569", "title": "I want to read a file from stdin and read each line into a string and only use getchar", "body": "<p>Since your code basically handles characters until it reaches end of line or end of file, you can simply put <em>another</em> loop around it to do each line.</p>\n\n<p>That would go something like:</p>\n\n<pre><code>int c = '\\n'; // force entry into loop\nwhile (c != EOF) {\n    int i = 0;\n    char line[1000];\n    while ((c = getchar()) != EOF &amp;&amp; c != '\\n') {\n        line[i] = c; // should really check for buffer overflow here.\n        i++;\n    }\n    line[i] = '\\0'; // and here.\n    printf (\"%s\\n\", line);\n    printf (\"%lu\\n\", strlen (line));\n}\n</code></pre>\n\n<p>Alternatively, you could just process all characters one by one, doing special handling for end of line (again, you should avoid buffer overflow, and you should probably move the common code into a function):</p>\n\n<pre><code>int c, i = 0;\nchar line[1000];\nwhile ((c = getchar()) != EOF) {\n    // Newline is special, print and reset.\n\n    if (c == '\\n') {\n        line[i] = '\\0';\n        printf (\"%s\\n\", line);\n        printf (\"%lu\\n\", strlen (line));\n        i = 0;\n    } else {\n        line[i] = c;\n        i++;\n    }\n}\n// If data at end without newline.\n\nif (i != 0) {\n    line[i] = '\\0';\n    printf (\"%s\\n\", line);\n    printf (\"%lu\\n\", strlen (line));\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7840432, "user_type": "registered", "profile_image": "https://graph.facebook.com/1937643509804300/picture?type=large", "display_name": "Hu Yunfei", "link": "https://stackoverflow.com/users/7840432/hu-yunfei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 46188569, "answer_count": 1, "score": 0, "last_activity_date": 1505275170, "creation_date": 1505272172, "last_edit_date": 1505275088, "question_id": 46188235, "link": "https://stackoverflow.com/questions/46188235/i-want-to-read-a-file-from-stdin-and-read-each-line-into-a-string-and-only-use-g", "title": "I want to read a file from stdin and read each line into a string and only use getchar", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint mygetchar();\n\nint main(){\n    mygetchar();\n}\n\nint mygetchar(){\n    int c, i = 0;\n    char line[1000];\n    while ((c = getchar()) != EOF &amp;&amp; c != '\\n'){\n        line[i] = c;\n        i++;\n    }\n    line[i] = '\\0';\n    printf(\"%s\\n\", line);\n    printf(\"%lu\\n\", strlen(line));\n    return 0;\n}\n</code></pre>\n\n<p>please see the picture of my code, my code can only come out with one string and one line of a file, but I want store each line of the file as a string and count their length and I can't use fgets, I can only use the getchar function, please help, thanks a lot. </p>\n"}, {"tags": ["java", "python", "c", "programming-languages", "immutability"], "comments": [{"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 2, "creation_date": 1505271960, "post_id": 46188189, "comment_id": 79338936, "body": "<code>Why can we modify the value of an element of an array and string literals in C</code> You can&#39;t modify a string literal in C. It&#39;s a literal. You can modify arrays though."}, {"owner": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "edited": false, "score": 0, "creation_date": 1505272018, "post_id": 46188189, "comment_id": 79338950, "body": "&quot;Why can we modify the value of an element of an array and string literals in C, while we can&#39;t modify an item in a string in Python?&quot; Why should C and Python be the same? If all languages were the same, there would be no point in there being different languages."}, {"owner": {"reputation": 14624, "user_id": 5588279, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/31a5c0b08beca9ebc2c1d5e60ba691d7?s=128&d=identicon&r=PG&f=1", "display_name": "Sraw", "link": "https://stackoverflow.com/users/5588279/sraw"}, "edited": false, "score": 0, "creation_date": 1505272345, "post_id": 46188189, "comment_id": 79339013, "body": "How could you modify string literals in C?"}, {"owner": {"reputation": 29824, "user_id": 2464386, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/508c3cc96cdca194c0204f1f7c2758e0?s=128&d=identicon&r=PG", "display_name": "ajb", "link": "https://stackoverflow.com/users/2464386/ajb"}, "reply_to_user": {"reputation": 14624, "user_id": 5588279, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/31a5c0b08beca9ebc2c1d5e60ba691d7?s=128&d=identicon&r=PG&f=1", "display_name": "Sraw", "link": "https://stackoverflow.com/users/5588279/sraw"}, "edited": false, "score": 0, "creation_date": 1505273682, "post_id": 46188189, "comment_id": 79339265, "body": "@Sraw The language will let you say <code>char *s = &quot;abcde&quot;; s[1] = &#39;x&#39;;</code>.  What this does depends on the machine architecture.  The machines we&#39;re used to working with support virtual memory and let you mark blocks as read-only, in which case the compiler should put the string literal in a read-only area, and <code>s[1] = &#39;x&#39;</code> will likely crash the program.  But I&#39;ve worked with embedded systems that don&#39;t have this capability.  So you would end up with <code>&quot;axcde&quot;</code> in memory."}], "answers": [{"comments": [{"owner": {"reputation": 29824, "user_id": 2464386, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/508c3cc96cdca194c0204f1f7c2758e0?s=128&d=identicon&r=PG", "display_name": "ajb", "link": "https://stackoverflow.com/users/2464386/ajb"}, "edited": false, "score": 0, "creation_date": 1505273738, "post_id": 46188344, "comment_id": 79339280, "body": "You <i>may</i> be able to modify string literals in C, depending on what kind of machine you&#39;re running on.  Please see my above comment.  <code>*b = &#39;l&#39;</code> in your example is legal, but on most machines it will fault when you try to run it."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1505274064, "post_id": 46188344, "comment_id": 79339345, "body": "&quot;the address the array holds&quot; is nonsensical, the array does not hold an address."}], "tags": [], "owner": {"reputation": 491, "user_id": 8509272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/487ff5fe4697aeb326fa5092ef38f116?s=128&d=identicon&r=PG&f=1", "display_name": "savram", "link": "https://stackoverflow.com/users/8509272/savram"}, "is_accepted": false, "score": 1, "last_activity_date": 1505272992, "creation_date": 1505272992, "answer_id": 46188344, "question_id": 46188189, "link": "https://stackoverflow.com/questions/46188189/does-nonmodifiable-in-c-mean-the-same-as-immutable-in-other-programming-lang/46188344#46188344", "title": "Does &quot;nonmodifiable&quot; in C mean the same as &quot;immutable&quot; in other programming languages?", "body": "<blockquote>\n  <p>Does \"nonmodifiable\" in C mean the same as \"immutable\" in programming\n  languages (e.g. Python, Java, and functional languages)?</p>\n</blockquote>\n\n<p>Yes.</p>\n\n<blockquote>\n  <p>In programming language design, does \"nonmodifiable\" and \"immutable\"\n  of an array imply the same for its elements/items?</p>\n</blockquote>\n\n<p>No. Arrays are immutable in the sense that you can not modify the address it stores, which points to the first element of the sequence. You can, however, modify the elements of the array.</p>\n\n<blockquote>\n  <p>Why can we modify the value of an element of an array and string\n  literals in C</p>\n</blockquote>\n\n<p>Stop right there. You can't modify string literals in C. You can modify the address of the string, but not the string itself.</p>\n\n<p>Here's a little program to demonstrate the difference between arrays and string literals:</p>\n\n<pre><code>int main(){\n  char* a = \"somestring\";\n  char* b = \"oldstring\";\n  char c[] = \"somestring2\";\n  b = a;//OK, you modified the address. Now it stores the address of the first char from string a\n  *b = 'l';//not OK, you modified the string(its first character)\n  c = a;//not ok, you're changing the address the array holds\n  *c = 'j';//OK, modifying array's elements(first char)\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 156458, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/3PCjR.png?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/156458/tim"}, "edited": false, "score": 0, "creation_date": 1505526448, "post_id": 46188617, "comment_id": 79462892, "body": "Thanks for the link. I would say that a memory place can be interpreted as objects of different types <code>int</code> and <code>const int</code> which have different mutability."}], "tags": [], "owner": {"reputation": 29824, "user_id": 2464386, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/508c3cc96cdca194c0204f1f7c2758e0?s=128&d=identicon&r=PG", "display_name": "ajb", "link": "https://stackoverflow.com/users/2464386/ajb"}, "is_accepted": true, "score": 1, "last_activity_date": 1505275121, "creation_date": 1505275121, "answer_id": 46188617, "question_id": 46188189, "link": "https://stackoverflow.com/questions/46188189/does-nonmodifiable-in-c-mean-the-same-as-immutable-in-other-programming-lang/46188617#46188617", "title": "Does &quot;nonmodifiable&quot; in C mean the same as &quot;immutable&quot; in other programming languages?", "body": "<p>Based on the way you worded the question--referring to \"nonmodifiable lvalues\"--I think the answer is: no, nonmodifiable isn't the same as immutable, at least in the context of the book you're reading.  \"Immutable\" is a property of objects in object-oriented languages.  (In C, I think a <code>const</code> object would also be considered immutable.)  \"lvalue\" has more to do with how the compiler classifies an expression.  The way I understand it, an \"lvalue\" is an expression that refers to an object, and an \"rvalue\" isn't.  You can't put an rvalue on the left side of an assignment.  Most lvalues can be assigned to, but some can't.  A string literal is considered an lvalue, according to the language rules, but you can't say <code>\"abc\" = \"xyz\";</code>.  That's why it's considered a nonmodifiable lvalue.</p>\n\n<p><a href=\"http://ieng9.ucsd.edu/~cs30x/Non-modifiable%20Lvalues.htm\" rel=\"nofollow noreferrer\">http://ieng9.ucsd.edu/~cs30x/Non-modifiable%20Lvalues.htm</a> does a good job of explaining this.  Among other things, the author says</p>\n\n<blockquote>\n  <p>Notice that I did not say a non-modifiable lvalue refers to an object\n  that you can't modify-I said you can't use the lvalue to modify the\n  object.</p>\n</blockquote>\n\n<p>C will actually let you modify anything, if you know how to do it.  If something in C can't be modified, it's because the hardware and/or operating system won't let you.  If you're running on a embedded system that doesn't have a built-in way of preventing writes to a range of memory, then you can modify anything including your own code.  The point here is that nothing in C makes it illegal to try to modify a string literal.</p>\n\n<p>In Java and Python, by contrast, strings are objects, and as such the only operations you can perform on them are the ones defined for the string class.  And those classes simply don't provide methods that allow you to modify the strings.  That's what is meant by immutable.  It's a term that applies to objects, while your use of \"nonmodifiable\" really applies only to certain syntactical categories of expressions.  So you can't really equate the two at all.</p>\n"}], "owner": {"reputation": 1, "user_id": 156458, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/3PCjR.png?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/156458/tim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 46188617, "answer_count": 2, "score": 0, "last_activity_date": 1505275121, "creation_date": 1505271863, "last_edit_date": 1505272044, "question_id": 46188189, "link": "https://stackoverflow.com/questions/46188189/does-nonmodifiable-in-c-mean-the-same-as-immutable-in-other-programming-lang", "title": "Does &quot;nonmodifiable&quot; in C mean the same as &quot;immutable&quot; in other programming languages?", "body": "<p>From C in a Nutshell, arrays and string literals are nonmodifiable lvalues.</p>\n\n<p>Does \"nonmodifiable\" in C mean the same as \"immutable\" in programming languages (e.g. Python, Java, and functional languages)?</p>\n\n<p>In programming language design, does \"nonmodifiable\" and \"immutable\" of an array imply the same for its elements/items?</p>\n\n<p>Why can we modify the value of an element of an array and string literals in C, while we can't modify an item in a string in Python?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2928, "user_id": 5927758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QmcMj.png?s=128&g=1", "display_name": "Mitch", "link": "https://stackoverflow.com/users/5927758/mitch"}, "edited": false, "score": 1, "creation_date": 1505271904, "post_id": 46188177, "comment_id": 79338919, "body": "x is undefined, im assuming you wanted scanf(&quot;%d&quot;, &amp;x) not &amp;n"}, {"owner": {"reputation": 2928, "user_id": 5927758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QmcMj.png?s=128&g=1", "display_name": "Mitch", "link": "https://stackoverflow.com/users/5927758/mitch"}, "edited": false, "score": 3, "creation_date": 1505272087, "post_id": 46188177, "comment_id": 79338962, "body": "what is the purpose of <code>(x&lt;=1)&amp;&amp;(x&gt;=1000)&amp;&amp;(x=(!(n)));</code> ?"}, {"owner": {"reputation": 2928, "user_id": 5927758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QmcMj.png?s=128&g=1", "display_name": "Mitch", "link": "https://stackoverflow.com/users/5927758/mitch"}, "edited": false, "score": 1, "creation_date": 1505272159, "post_id": 46188177, "comment_id": 79338978, "body": "how can x be both less than 1 and greater than 1000?"}, {"owner": {"reputation": 215, "user_id": 4402533, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh6.googleusercontent.com/-relZttXASy8/AAAAAAAAAAI/AAAAAAAAAAA/k2Rz4TVka3w/photo.jpg?sz=128", "display_name": "Pramod Yadav", "link": "https://stackoverflow.com/users/4402533/pramod-yadav"}, "edited": false, "score": 0, "creation_date": 1505272184, "post_id": 46188177, "comment_id": 79338979, "body": "You are not assigning the value to x, it will be garbage, we cannot predict the value of x and output"}, {"owner": {"reputation": 323, "user_id": 8600762, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8305d61a9eef56b9b79702390a6d655f?s=128&d=identicon&r=PG&f=1", "display_name": "Barry B Benson", "link": "https://stackoverflow.com/users/8600762/barry-b-benson"}, "edited": false, "score": 0, "creation_date": 1505272379, "post_id": 46188177, "comment_id": 79339025, "body": "i was trying to write a range for x between 1 and a 1000, but excluding the number the user has input"}, {"owner": {"reputation": 2928, "user_id": 5927758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QmcMj.png?s=128&g=1", "display_name": "Mitch", "link": "https://stackoverflow.com/users/5927758/mitch"}, "edited": false, "score": 0, "creation_date": 1505272682, "post_id": 46188177, "comment_id": 79339092, "body": "there is quite a few issues with this code. I would recommend starting with looking at how to format a for loop, then looking at the modulo operator. If you are familiar with prime numbers this should give you a good foundation of how you can solve this problem"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1505275716, "post_id": 46188177, "comment_id": 79339713, "body": "Search like <code>isPrime</code> in this site."}, {"owner": {"reputation": 323, "user_id": 8600762, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8305d61a9eef56b9b79702390a6d655f?s=128&d=identicon&r=PG&f=1", "display_name": "Barry B Benson", "link": "https://stackoverflow.com/users/8600762/barry-b-benson"}, "edited": false, "score": 0, "creation_date": 1505288093, "post_id": 46188177, "comment_id": 79345167, "body": "Thanks, i will look into these"}], "answers": [{"tags": [], "owner": {"reputation": 2928, "user_id": 5927758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QmcMj.png?s=128&g=1", "display_name": "Mitch", "link": "https://stackoverflow.com/users/5927758/mitch"}, "is_accepted": false, "score": 0, "last_activity_date": 1505272433, "creation_date": 1505272433, "answer_id": 46188262, "question_id": 46188177, "link": "https://stackoverflow.com/questions/46188177/checking-for-a-prime-number-through-user-input-in-a-given-range-in-c/46188262#46188262", "title": "Checking for a prime number through user input in a given range in C", "body": "<p>I believe the intent of this <code>if((n/1)&amp;&amp;(n/n)&amp;&amp;(!(n/x)))</code> statement is saying \"if n is divisible by one and if n is divisible by n and if n is not divisible by x\" however this is not how we express these ideas in C. Look at the % or modulo operator and see if you can figure out how we can express these ideas using logic  </p>\n"}], "owner": {"reputation": 323, "user_id": 8600762, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8305d61a9eef56b9b79702390a6d655f?s=128&d=identicon&r=PG&f=1", "display_name": "Barry B Benson", "link": "https://stackoverflow.com/users/8600762/barry-b-benson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1505276693, "creation_date": 1505271740, "last_edit_date": 1505276693, "question_id": 46188177, "link": "https://stackoverflow.com/questions/46188177/checking-for-a-prime-number-through-user-input-in-a-given-range-in-c", "title": "Checking for a prime number through user input in a given range in C", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n  int n=0;\n  int x;\n  printf(\"Please enter a number:\");\n  scanf(\"%d\", &amp;n);\n  (x&lt;=1)&amp;&amp;(x&gt;=1000)&amp;&amp;(x=(!(n)));\n  if((n/1)&amp;&amp;(n/n)&amp;&amp;(!(n/x)))\n  {\n    printf(\"P\\n\");\n  }\n  else\n  {\n    printf(\"C\\n\");\n  }\n  system(\"pause\");\n  return 0;\n}\n</code></pre>\n\n<p>My code keeps outputting \"P\" from the if statement when run, can anyone explain why? Is there a way to make the code work with just if and else functions? If so please help</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 8686, "user_id": 268025, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb39f8801f5c6b47bab7d5e91bf513f4?s=128&d=identicon&r=PG", "display_name": "tangrs", "link": "https://stackoverflow.com/users/268025/tangrs"}, "edited": false, "score": 0, "creation_date": 1505271436, "post_id": 46188106, "comment_id": 79338826, "body": "What does your current attempt look like? You should post your code since <code>argv[i]</code> could mean anything."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 3, "creation_date": 1505271467, "post_id": 46188106, "comment_id": 79338834, "body": "The code you mentioned you wrote? If you post it as part of your question (don&#39;t forget to format it), we can probably tell you where things are wrong, and how to correct them. Don&#39;t forget to include <i>all</i> the error messages <i>verbatim</i>, and point out which parts of them you don&#39;t seem to understand."}, {"owner": {"reputation": 23331, "user_id": 134252, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/azWjr.png?s=128&g=1", "display_name": "Dolda2000", "link": "https://stackoverflow.com/users/134252/dolda2000"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1505271577, "post_id": 46188106, "comment_id": 79338855, "body": "@WhozCraig: On the contrary, the failure mode is completely obvious from the question, in which case I for one don&#39;t mind the odd question that isn&#39;t just a code dump."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8600769"}, "edited": false, "score": 0, "creation_date": 1505272265, "post_id": 46188143, "comment_id": 79338994, "body": "Thank you that was really helpful. Is it by any chance possible to iterate over each character using getchar? I know we can use it when the input is using scanf but can it be used for command line inputs?"}, {"owner": {"reputation": 23331, "user_id": 134252, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/azWjr.png?s=128&g=1", "display_name": "Dolda2000", "link": "https://stackoverflow.com/users/134252/dolda2000"}, "edited": false, "score": 0, "creation_date": 1505272335, "post_id": 46188143, "comment_id": 79339012, "body": "@Khalid: No, <code>getchar</code> is for I/O, but there&#39;s really no need. Strings are just <code>char</code> arrays, so you can iterate over them just like you do with the arguments themselves. <code>argv[0][0]</code> is the first character of the first string in <code>argv</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8600769"}, "edited": false, "score": 0, "creation_date": 1505272481, "post_id": 46188143, "comment_id": 79339050, "body": "Okay. Thank you so very much for such prompt replies."}], "tags": [], "owner": {"reputation": 23331, "user_id": 134252, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/azWjr.png?s=128&g=1", "display_name": "Dolda2000", "link": "https://stackoverflow.com/users/134252/dolda2000"}, "is_accepted": true, "score": 0, "last_activity_date": 1505271795, "last_edit_date": 1505271795, "creation_date": 1505271484, "answer_id": 46188143, "question_id": 46188106, "link": "https://stackoverflow.com/questions/46188106/how-to-check-if-command-line-arguments-are-lower-case-alphabetic-and-the-sort/46188143#46188143", "title": "How to check if command line arguments are lower case/ alphabetic and the sort?", "body": "<p><code>islower()</code> checks the case of a single character, whereas <code>argv</code> is a <code>char **</code> variable, meaning that <code>argv[i]</code> is a string (a <code>char *</code>), not a character. Thus, to check whether a particular argument is lower-case, you need to iterate over the characters in it to check each one.</p>\n\n<p>Which is also the meaning of the warning message you mention. Since the argument to <code>islower()</code> is an <code>int</code> (a single character), and you pass it a pointer (that is, <code>argv[i]</code>, which is a <code>char *</code>), the compiler implicitly casts that pointer to the <code>int</code> that <code>islower()</code> requires, which is seldom intended behavior.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8600769"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 227, "favorite_count": 0, "accepted_answer_id": 46188143, "answer_count": 1, "score": 0, "last_activity_date": 1505272665, "creation_date": 1505271273, "last_edit_date": 1505272665, "question_id": 46188106, "link": "https://stackoverflow.com/questions/46188106/how-to-check-if-command-line-arguments-are-lower-case-alphabetic-and-the-sort", "title": "How to check if command line arguments are lower case/ alphabetic and the sort?", "body": "<p>I am really new to C programming (have previously done python and this is quite a difficult transition). I have been given a task to check the command line arguments and those which are not lower case alphabetic or numeric should be printed out with a given statement.</p>\n\n<p>I have tried using a for loop and tried checking <code>islower</code> for <code>argv[i]</code> but that just crashes my program. The compiler gives this warning:</p>\n\n<blockquote>\n  <p>passing argument 1 of 'islower' makes integer from pointer without a cast</p>\n</blockquote>\n\n<p>Can someone please give a general idea without actually typing out the code? Please do no type the code as I really want to do this myself (and also might get into trouble for plagiarism). </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 21, "user_id": 8600766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0eb01c0d05a3af52dbe62b3b1034bcf?s=128&d=identicon&r=PG&f=1", "display_name": "Girraj Gupta", "link": "https://stackoverflow.com/users/8600766/girraj-gupta"}, "edited": false, "score": 0, "creation_date": 1505271242, "post_id": 46188077, "comment_id": 79338794, "body": "sorry in first loop actually it is boolvar++ not boolvar--"}, {"owner": {"reputation": 2928, "user_id": 5927758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QmcMj.png?s=128&g=1", "display_name": "Mitch", "link": "https://stackoverflow.com/users/5927758/mitch"}, "edited": false, "score": 0, "creation_date": 1505271399, "post_id": 46188077, "comment_id": 79338821, "body": "please edit this so its reflected in the question"}, {"owner": {"reputation": 2397, "user_id": 227491, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f031e9e9b7476fc5d3674fe4a9c59ef2?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/227491/peter"}, "edited": false, "score": 1, "creation_date": 1505271463, "post_id": 46188077, "comment_id": 79338830, "body": "Decrementing a _Bool value in C++ doesn&#39;t appear to be defined, which means the behavior you&#39;re seeing is likely to be (very) dependent on your C compiler: <a href=\"http://en.cppreference.com/w/cpp/language/operator_incdec\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/operator_incdec</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2397, "user_id": 227491, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f031e9e9b7476fc5d3674fe4a9c59ef2?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/227491/peter"}, "is_accepted": false, "score": 0, "last_activity_date": 1505271665, "creation_date": 1505271665, "answer_id": 46188169, "question_id": 46188077, "link": "https://stackoverflow.com/questions/46188077/how-is-this-boolean-value-change/46188169#46188169", "title": "how is this boolean value change", "body": "<p>A now-deprecated feature of the ++ operator in versions of C++ prior to C++ 17 was to set a Boolean value to true; This appears to be what is happening in your first loop (after you fixed it). The -- operator doesn't appear to be officially defined for Boolean values, but I'm guessing the second loop your C compiler is simply using the parity (even vs. odd) of an underlying integer-like type to decide whether the Boolean value is true or false. See: <a href=\"http://en.cppreference.com/w/cpp/language/operator_incdec\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/language/operator_incdec</a></p>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 2608755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4aeef21d01dd653a2a8ce55d7bf6272?s=128&d=identicon&r=PG", "display_name": "user2608755", "link": "https://stackoverflow.com/users/2608755/user2608755"}, "is_accepted": false, "score": 0, "last_activity_date": 1505284203, "creation_date": 1505284203, "answer_id": 46190336, "question_id": 46188077, "link": "https://stackoverflow.com/questions/46188077/how-is-this-boolean-value-change/46190336#46190336", "title": "how is this boolean value change", "body": "<p>For boolean incrementing is similar to a or operation being performed so every time it is one.</p>\n\n<p>While decrementing bool in second loop first time print will be 1\nNext 1-1 = 0\nNext 0-1 = -1 (Since bool is a single byte and no sign bit it will ignore the sign) so it will again print 1\nThis goes on for the loop</p>\n\n<p>Hope i gave you the answer</p>\n"}], "owner": {"reputation": 21, "user_id": 8600766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0eb01c0d05a3af52dbe62b3b1034bcf?s=128&d=identicon&r=PG&f=1", "display_name": "Girraj Gupta", "link": "https://stackoverflow.com/users/8600766/girraj-gupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1505284203, "creation_date": 1505271046, "last_edit_date": 1505275998, "question_id": 46188077, "link": "https://stackoverflow.com/questions/46188077/how-is-this-boolean-value-change", "title": "how is this boolean value change", "body": "<pre><code>// c program to represent boolean values\n\n#include&lt;stdio.h&gt;\n\nint main()\n{\n    _Bool boolvar=0;\n    int i;\n\n    printf(\"the value of _Bool is\");\n\n    for(i=0;i&lt;5;i++)\n    {\n        printf(\"boolvar=%i\\n\",boolvar);\n        boolvar++;\n    }\n    printf(\"\\n\");\n\n    for (i=5;i&lt;10;i++)\n    {\n        printf(\"boolvar=%i\\n\",boolvar);\n        boolvar--;\n    }\n}\n</code></pre>\n\n<p>I made this program and get <code>1 1 1 1 1</code> for my first loop and <code>10101</code> for second loop. Why does this boolean value fluctuate in second loop while I get only 11111 in first?</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 4, "creation_date": 1505271157, "post_id": 46188068, "comment_id": 79338775, "body": "If <code>s</code> and <code>t</code> are null-terminated strings, you\u2019ll have to loop until the null terminator, yes. If you prefer, you can call <code>strlen()</code> to do that for you. It might feel wrong, but\u2026 them\u2019s the breaks!"}, {"owner": {"reputation": 12328, "user_id": 34426, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3fyBN.jpg?s=128&g=1", "display_name": "Dan Fego", "link": "https://stackoverflow.com/users/34426/dan-fego"}, "edited": false, "score": 2, "creation_date": 1505271188, "post_id": 46188068, "comment_id": 79338780, "body": "&quot;...but that seems cumbersome&quot; -- welcome to C. :)"}], "answers": [{"tags": [], "owner": {"reputation": 491, "user_id": 8509272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/487ff5fe4697aeb326fa5092ef38f116?s=128&d=identicon&r=PG&f=1", "display_name": "savram", "link": "https://stackoverflow.com/users/8509272/savram"}, "is_accepted": true, "score": 3, "last_activity_date": 1505271543, "creation_date": 1505271543, "answer_id": 46188154, "question_id": 46188068, "link": "https://stackoverflow.com/questions/46188068/calling-a-function-int-strrindexchar-s-char-t-without-passing-the-size-pa/46188154#46188154", "title": "calling a function int strrindex(char s[], char t[]) without passing the size parameter in c", "body": "<blockquote>\n  <p>Is there any simpler way to accomplish this?</p>\n</blockquote>\n\n<p>No. You can use <code>strlen()</code> to do that for you, but it's doing the same thing under the hood.</p>\n"}], "owner": {"reputation": 101, "user_id": 6890735, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/13982685ca77eeb79ad00024cafaf423?s=128&d=identicon&r=PG&f=1", "display_name": "Sam K9", "link": "https://stackoverflow.com/users/6890735/sam-k9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 46188154, "answer_count": 1, "score": 2, "last_activity_date": 1505271543, "creation_date": 1505270971, "question_id": 46188068, "link": "https://stackoverflow.com/questions/46188068/calling-a-function-int-strrindexchar-s-char-t-without-passing-the-size-pa", "title": "calling a function int strrindex(char s[], char t[]) without passing the size parameter in c", "body": "<p>My professor wants us to create this method:</p>\n\n<pre><code>int strrindex(char s[], char t[])\n</code></pre>\n\n<p>in a separate file from main and have it return the index of the right-most occurrence of t in s. My first thought was to traverse the array from right to left, find the first occurrence of t[0] and then check if the rest of the sequence matches, if not continue searching right to left for the next character that matches t[0]. Easy enough except I can't get the size of the array since it was passed as a parameter and is now a pointer so I don't know what to put in the for loop to loop through the array. Similar questions suggest passing the size as a param but the param list must be char s[] and char t[] for this assignment. </p>\n\n<p>So my question is how can I do get the size of the array without changing the param list? My only other idea would be to first find the size by looping from the start of the array and finding the '\\0' character but that seems cumbersome and inelegant. Is there any simpler way to accomplish this?</p>\n"}, {"tags": ["c", "embedded", "i2c", "atmega"], "comments": [{"owner": {"reputation": 38430, "user_id": 429063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd38783123814dee889d28c991e56fb?s=128&d=identicon&r=PG", "display_name": "Chris Stratton", "link": "https://stackoverflow.com/users/429063/chris-stratton"}, "edited": false, "score": 1, "creation_date": 1505274860, "post_id": 46187947, "comment_id": 79339526, "body": "Without intending to push you towards <i>using</i> Arduino <i>in your application</i> you might see if you could temporarily get some Arduino PCA9685 example (such as Adafruit&#39;s) to <i>momentarily</i> run in order to validate your hadware connections - you might also in the process discover something overlooked."}, {"owner": {"reputation": 393, "user_id": 2536897, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MEzQX.jpg?s=128&g=1", "display_name": "Wezley", "link": "https://stackoverflow.com/users/2536897/wezley"}, "reply_to_user": {"reputation": 38430, "user_id": 429063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd38783123814dee889d28c991e56fb?s=128&d=identicon&r=PG", "display_name": "Chris Stratton", "link": "https://stackoverflow.com/users/429063/chris-stratton"}, "edited": false, "score": 0, "creation_date": 1505275430, "post_id": 46187947, "comment_id": 79339653, "body": "Unfortunately I don&#39;t have an arduino to work with at the moment. I&#39;m almost positive everything is hooked up correctly. I&#39;m assuming my I2C code is fine? I&#39;ll try with another I2C device to see if something on my micro controller isn&#39;t working right."}, {"owner": {"reputation": 38430, "user_id": 429063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd38783123814dee889d28c991e56fb?s=128&d=identicon&r=PG", "display_name": "Chris Stratton", "link": "https://stackoverflow.com/users/429063/chris-stratton"}, "edited": false, "score": 0, "creation_date": 1505275738, "post_id": 46187947, "comment_id": 79339716, "body": "I mean run an Arduino test program on your present ATmega168 MCU to see what you can learn from it, then revert to using your custom code.  You don&#39;t even need the bootloader for this, you can let the Arduino download fail after making a hex file and flash that by whatever method you are currently using.  That said, get some cheap Arduino clones especially of the miniature breadboardable variety - even if you never intend to touch their software stack, they are about the cheapest ATmega development boards around."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1505296044, "post_id": 46187947, "comment_id": 79350619, "body": "If you aren&#39;t sure if the error is caused by hardware or software, it is better to ask at <a href=\"https://electronics.stackexchange.com/\">electronics.stackexchange.com</a> instead. Provide a simple schematic if possible."}], "owner": {"reputation": 393, "user_id": 2536897, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MEzQX.jpg?s=128&g=1", "display_name": "Wezley", "link": "https://stackoverflow.com/users/2536897/wezley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 912, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1505270853, "creation_date": 1505270083, "last_edit_date": 1505270853, "question_id": 46187947, "link": "https://stackoverflow.com/questions/46187947/i2c-not-working-with-pca9685", "title": "I2C Not working with PCA9685", "body": "<p>I'm using an Atmega168 I'm attempting to use I2C with my PCA9685 Servo driver.</p>\n\n<p>I'm using this I2C library: <a href=\"https://github.com/g4lvanix/I2C-master-lib\" rel=\"nofollow noreferrer\">https://github.com/g4lvanix/I2C-master-lib</a></p>\n\n<p>I'm attempting to start the I2C connection with my PCA9685 (Address: 0x41).</p>\n\n<p>For some reason the I2C Library is bouncing back an error because the acknowledge bit isn't being sent. What is wrong here? My SDA and SCL pins are hooked up to 10k pull up resistors, and they are connected to the PCA9685 correctly. Yet it still isn't working. Could it be my PCA9685 chip? I also know the address is 0x41 because I manually bridged an address connection to assign that address.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;avr/io.h&gt;\n#include &lt;util/delay.h&gt;\n#include &lt;avr/interrupt.h&gt;\n#include &lt;avr/power.h&gt;\n#include \"i2c.h\"\n\n#define SERVO_MIN 1000\n#define SERVO_MAX 2000\n#define SERVO_MID 1500\n\n#define PCA9685_ADDR 0x40\n\n#define PCA9685_MODE1 0x0\n\n#define LED0_ON_L 0x6\n#define LED0_ON_H 0x7\n#define LED0_OFF_L 0x8\n#define LED0_OFF_H 0x9\n\n#define LED      PB0\n#define LED_DDR  DDRB\n#define LED_PORT PORTB\n\n#define DELAYTIME 200\n\n#define setBit(sfr, bit)     (_SFR_BYTE(sfr) |= (1 &lt;&lt; bit))\n#define clearBit(sfr, bit)   (_SFR_BYTE(sfr) &amp;= ~(1 &lt;&lt; bit))\n#define toggleBit(sfr, bit)  (_SFR_BYTE(sfr) ^= (1 &lt;&lt; bit))\n\n\nvoid setupController();\nvoid setServo(uint8_t id, uint8_t start, uint8_t stop);\nint main(void)\n{\n  setBit(LED_DDR, LED);\n  clock_prescale_set(clock_div_1);\n  i2c_init();\n  uint8_t err = i2c_start(0x41);\n\n  while(err == 1) {\n    setBit(LED_PORT, LED);\n    uint8_t err = i2c_start(0x41);\n\n  }\n  clearBit(LED_PORT, LED);\n  while(1) {\n\n}\n  return 0;\n}\n</code></pre>\n\n<p>Thank you in advance!</p>\n"}, {"tags": ["c", "data-structures", "linked-list"], "answers": [{"tags": [], "owner": {"reputation": 10774, "user_id": 4419802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d0f1bd19b8b8481b6b3e812691c1ccb?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/4419802/matt"}, "is_accepted": false, "score": 0, "last_activity_date": 1505300608, "creation_date": 1505300608, "answer_id": 46195833, "question_id": 46187786, "link": "https://stackoverflow.com/questions/46187786/changing-functions-signatures-and-its-parameters-list-to-node/46195833#46195833", "title": "Changing functions signatures and its parameters: list* to node*", "body": "<p>You don't need <code>LIST</code> at all, use only <code>NODE</code> instead. This makes your code much easier.</p>\n\n<p>But, alternatively, if you really wish it, you can introduce a bunch of \"thin wrappers\", sort of</p>\n\n<pre><code>void decodeList(LIST *l)\n{\n    if (l != 0)\n        decodeNode(l-&gt;first);\n}\n</code></pre>\n\n<p>BTW. Also in the case of switching to C++ you'll have the opportunity to use inline and overloaded functions, which makes it to look more natural, e.g.:</p>\n\n<pre><code>inline void decode(LIST&amp; l) { decode(l.first); }\n</code></pre>\n\n<p>Unfortunately, with plain C you can't use overloading, so you have to use different names for the functions.</p>\n"}], "owner": {"reputation": 344, "user_id": 6328506, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/1ejFX.jpg?s=128&g=1", "display_name": "CaioIgnm", "link": "https://stackoverflow.com/users/6328506/caioignm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1505300608, "creation_date": 1505268715, "last_edit_date": 1505299395, "question_id": 46187786, "link": "https://stackoverflow.com/questions/46187786/changing-functions-signatures-and-its-parameters-list-to-node", "title": "Changing functions signatures and its parameters: list* to node*", "body": "<p>I am creating a program that inverts the non-vowel sequences of a word represented by a list that is singly linked, without head and without sentinel. In other words, each node in the list has a letter field. My program has to invert the non-vowel sequences (spaces, consonants, dots and commas) from this list without modifying the original list.</p>\n\n<p>The algorithm itself is ready and working. My problem lies in <strong>how to transform <code>LIST*</code> functions into <code>NODE*</code> type functions.</strong> For example, <code>LIST* toCloneList(LIST* l)</code> must be <code>NODE* toCloneList(NODE* p)</code> and <code>void decode(LIST* answer)</code>must be <code>NODE* decode(NODE* answer)</code>.</p>\n\n<pre><code>LIST* toCloneList(LIST* l){\n  LIST* answer = malloc(sizeof(LIST));\n\n  NODE *current = l-&gt;first;\n  NODE *previous = NULL; \n\n  while(current){ \n    NODE *newnd = (NODE*) malloc(sizeof(NODE));\n    newnd-&gt;letter = current-&gt;letter;\n    newnd-&gt;next = NULL;\n\n    if (previous == NULL){ \n        answer-&gt;first = newnd;\n    }\n    else { \n        previous-&gt;next = current;\n    }\n\n    previous = newnd;\n    current = current-&gt;next;\n  }\n\n  return answer;\n}\n\nvoid invert(LIST* answer){\n\n    NODE* actual = answer-&gt;first;\n    answer-&gt;first = NULL;\n\n    while (actual != NULL){ \n        NODE* current = actual; \n        actual = actual-&gt;next; \n\n\n        current-&gt;next = answer-&gt;first; \n        answer-&gt;first = current; \n    }\n}\n\nvoid decode(LIST* answer) {\n    NODE* fNv = NULL; //first non-vowel found\n    NODE* lNv = NULL;  //last non-vowel found\n\n    NODE* current = answer-&gt;first; \n    NODE* previous = NULL;\n\n    while (current != NULL) {\n\n        /* While current points to a non-vowel. */\n        if (checkSequence(current)) {\n            fNv = current;\n\n            /* Searches the last non-vowel case in the list. */\n            while (current-&gt;next != NULL &amp;&amp; checkSequence(current-&gt;next)) {\n              current = current-&gt;next;\n            }\n\n            /* When the next letter is a vowel, then the end of the non-vowel sequence is reached. */\n            lNv = current;\n\n            /* If there is a non-vowel sequence, in other words, fNv and lNv do not point to the same element, then the position change must be performed. */\n            if (fNv != lNv) {\n                /* Calls a recursive function to perform the change of positions without having to create a new list. */\n\n                NODE* k = lNv-&gt;next;\n\n                invertNvs(fNv-&gt;next, fNv, lNv);\n\n                fNv-&gt;next = k;\n\n                if (previous == NULL){\n                    answer-&gt;first = lNv;\n                }\n                else {\n                    previous-&gt;next = lNv;\n                }\n\n                current = fNv;\n            }\n        }\n        previous = current;\n        current = current-&gt;next;\n    }\n}\n</code></pre>\n\n<p>The program should work for calls like this:</p>\n\n<pre><code>NODE* test = null;\ntest = decode(p);\n</code></pre>\n\n<p>Full code- <a href=\"https://repl.it/LAuW/0\" rel=\"nofollow noreferrer\">https://repl.it/LAuW/0</a></p>\n"}, {"tags": ["c", "sorting", "mergesort"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1505265631, "post_id": 46187315, "comment_id": 79337536, "body": "<code>int n = sizeof(arr)&#47;sizeof(arr[0]);</code> is <code>int n = sizeof(int *)&#47;sizeof(int);</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1505265851, "post_id": 46187315, "comment_id": 79337587, "body": "<code>int L[n1], R[n2];</code> They consume stacks on every call. An array that is too large can not be secured."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1505550874, "post_id": 46187315, "comment_id": 79467284, "body": "C is not the same as C++ (so the C++ tag is wrong)"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1505550957, "post_id": 46187315, "comment_id": 79467296, "body": "Compile with all warnings &amp; debug info (<code>gcc -Wall -Wextra -g</code> with <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a>). Then <b>use the debugger</b> <code>gdb</code> to understand what is happening."}], "answers": [{"comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1505551024, "post_id": 46189563, "comment_id": 79467316, "body": "That code won&#39;t even compile. You cannot initialize a global variable with a <code>malloc</code> expression (outside of any routine) and you should not cast the result of <code>malloc</code> in C."}], "tags": [], "owner": {"reputation": 3568, "user_id": 5811973, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/B4tie.jpg?s=128&g=1", "display_name": "Ishpreet", "link": "https://stackoverflow.com/users/5811973/ishpreet"}, "is_accepted": false, "score": -1, "last_activity_date": 1505672422, "last_edit_date": 1505672422, "creation_date": 1505280884, "answer_id": 46189563, "question_id": 46187315, "link": "https://stackoverflow.com/questions/46187315/why-is-this-program-giving-a-stack-overflow/46189563#46189563", "title": "Why is this program giving a stack overflow?", "body": "<p>You are declaring the <strong>L</strong> and <strong>R</strong> array's locally (inside the <code>merge</code> function). They consume stack on every function call. You should initialize them globally so that they can be stored on the heap. Also, you should declare just one array (like <strong>temp_arr</strong> in the below code) as there's no need for two separate arrays like <strong>L</strong> and <strong>R</strong>.</p>\n\n<p>See <a href=\"https://stackoverflow.com/questions/3113668/location-of-pointers-and-global-variables-in-c\">Local vs Global variable storage</a></p>\n\n<p>You can improve your merge function to this:</p>\n\n<pre><code>int temp_arr[500000];   // Global declaration\nvoid merge(int arr[], int l, int m, int r)\n{\n    int i=l, j=m+1, k=l;\n    while(i&lt;=m &amp;&amp; j&lt;=r)\n    {\n        if(arr[i]&lt;arr[j])\n            temp_arr[++k] = arr[++i];\n        else temp_arr[++k] = arr[++j];\n    }\n    while(i&lt;=m)\n        temp_arr[++k] = arr[++i];\n    while(j&lt;=r)\n        temp_arr[++k] = arr[++j];\n    i = l;\n    while(i&lt;=r)\n        arr[i] = temp_arr[++i];  // Storing stored array in arr\n}\n</code></pre>\n"}], "owner": {"reputation": 463, "user_id": 7018546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/297cde92fa2cd497d0df89c6c08796f6?s=128&d=identicon&r=PG&f=1", "display_name": "Kashif Faraz Shamsi", "link": "https://stackoverflow.com/users/7018546/kashif-faraz-shamsi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 208, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1505672422, "creation_date": 1505264523, "last_edit_date": 1505551016, "question_id": 46187315, "link": "https://stackoverflow.com/questions/46187315/why-is-this-program-giving-a-stack-overflow", "title": "Why is this program giving a stack overflow?", "body": "<p>My C merge code works when I initialize the array globally at the top of the program until the stack overflows.  I'm trying to initialize the array with <a href=\"http://en.cppreference.com/w/c/memory/malloc\" rel=\"nofollow noreferrer\">malloc</a>, but when I do, the code will only read in two integers and stop running.</p>\n\n<p>This program pulls random numbers from a file called alg.txt and then sorts them. Again, the code works (up until 500k integers) when defining z at the top of the program to the number of integers to be sorted, and declaring the array globally to be equal to arr[z]. How do I figure out what is going on?</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint count = 0;\nvoid merge(int arr[], int l, int m, int r)\n{\n    int i, j, k;\n    int n1 = m - l + 1;\n    int n2 =  r - m;\n\n    int L[n1], R[n2];\n\n    for (i = 0; i &lt; n1; i++)\n        L[i] = arr[l + i];\n        count++;\n\n    for (j = 0; j &lt; n2; j++)\n        R[j] = arr[m + 1+ j];\n        count++;\n\n    i = 0;\n    j = 0;\n    k = l;\n    while (i &lt; n1 &amp;&amp; j &lt; n2)\n    {\n        if (L[i] &lt;= R[j])\n        {\n            arr[k] = L[i];\n            i++;\n            count++;\n        }\n        else\n        {\n            arr[k] = R[j];\n            j++;\n            count++;\n        }\n        k++;\n        count++;\n    }\n\n    while (i &lt; n1)\n    {\n        arr[k] = L[i];\n        i++;\n        k++;\n        count++;\n    }\n\n    while (j &lt; n2)\n    {\n        arr[k] = R[j];\n        j++;\n        k++;\n        count++;\n    }\n}\n\nvoid mergeSort(int arr[], int l, int r)\n{\n    if (l &lt; r)\n    {\n        int m = l+(r-l)/2;\n\n        mergeSort(arr, l, m);\n        mergeSort(arr, m+1, r);\n\n        merge(arr, l, m, r);\n    }\n}\n\nvoid printArray(int A[], int size)\n{\n    int i;\n    for (i=0; i &lt; size; i++)\n        printf(\"%d \", A[i]);\n    printf(\"\\n\");\n}\n\nint main()\n{\n    int i;\n    FILE *myFile;\n    myFile = fopen(\"alg.txt\", \"r\");\n\n    int z;\n    printf(\"Enter the size of the array: \");\n    scanf(\"%d\", &amp;z);\n    int *arr = (int *)malloc(z*sizeof(int));\n    int n = sizeof(arr)/sizeof(arr[0]);\n    for(i=0; i &lt; z; i++)\n    {\n        fscanf(myFile, \"%d,\", &amp;arr[i]);\n    }\n\n    mergeSort(arr, 0, n - 1);\n\n    printf(\"\\nSorted array is \\n\");\n    printArray(arr, n);\n    printf(\"count is %d\\n\", count);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "variables", "macros"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1505265158, "post_id": 46187294, "comment_id": 79337428, "body": "Double tagging for two different languages, highly unreadable code, no clear explanaition, use of names tarting with two underscores (reserved for the implementation) \u2026 What do you want to accomplish? Don&#39;t get too fancy with macros, you will eventaully end up in macro hell. You wrote that code, so you tell what it is supposed to do and what does not work."}, {"owner": {"reputation": 1791, "user_id": 794606, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9a1d5c337bdddae373bbdcb92fdb7077?s=128&d=identicon&r=PG", "display_name": "Jacek Cz", "link": "https://stackoverflow.com/users/794606/jacek-cz"}, "edited": false, "score": 0, "creation_date": 1505265340, "post_id": 46187294, "comment_id": 79337469, "body": "C++ has ideal things for such task: inline functions (modern C too)"}, {"owner": {"reputation": 25, "user_id": 4639129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/553aab0952f3e06feb8e141bf1f06d15?s=128&d=identicon&r=PG&f=1", "display_name": "chan hong Park", "link": "https://stackoverflow.com/users/4639129/chan-hong-park"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1505265381, "post_id": 46187294, "comment_id": 79337481, "body": "Thank you @Olaf. And Sorry for my code. I just made a testing code to explain. I will fix the code to make more clear. Thank you for your advice."}, {"owner": {"reputation": 25, "user_id": 4639129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/553aab0952f3e06feb8e141bf1f06d15?s=128&d=identicon&r=PG&f=1", "display_name": "chan hong Park", "link": "https://stackoverflow.com/users/4639129/chan-hong-park"}, "reply_to_user": {"reputation": 1791, "user_id": 794606, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9a1d5c337bdddae373bbdcb92fdb7077?s=128&d=identicon&r=PG", "display_name": "Jacek Cz", "link": "https://stackoverflow.com/users/794606/jacek-cz"}, "edited": false, "score": 0, "creation_date": 1505265474, "post_id": 46187294, "comment_id": 79337506, "body": "@JacekCz Thanks for your advice. I will use inline instead of macro. But i wanna know why this thing is happened. My knowledge is getting messed. :-)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 1791, "user_id": 794606, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9a1d5c337bdddae373bbdcb92fdb7077?s=128&d=identicon&r=PG", "display_name": "Jacek Cz", "link": "https://stackoverflow.com/users/794606/jacek-cz"}, "edited": false, "score": 0, "creation_date": 1505265723, "post_id": 46187294, "comment_id": 79337554, "body": "@JacekCz: <code>inline</code> functions are just a hint; the compiler is free to ignore it. Modern compilers will inline at theior own disretion and heuristics, they mostly ignore <code>inline</code>. With LTO it has become mostly obsolete (at the costs of increased build-times, though, but that is normally done for release only anyway."}, {"owner": {"reputation": 25, "user_id": 4639129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/553aab0952f3e06feb8e141bf1f06d15?s=128&d=identicon&r=PG&f=1", "display_name": "chan hong Park", "link": "https://stackoverflow.com/users/4639129/chan-hong-park"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1505265826, "post_id": 46187294, "comment_id": 79337579, "body": "@Olaf: Well the purpose of this code to check if I can use same named variable at outside of macro. I thought the trace log of Macro Test 1 and Test 2 were same, but it wasn&#39;t."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1505265924, "post_id": 46187294, "comment_id": 79337597, "body": "@chanhongPark: Actually that&#39;s what you are asking. So it cannot be the purpose of that code! The purnpose of that code seems to be the to obfuscate your code."}, {"owner": {"reputation": 25, "user_id": 4639129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/553aab0952f3e06feb8e141bf1f06d15?s=128&d=identicon&r=PG&f=1", "display_name": "chan hong Park", "link": "https://stackoverflow.com/users/4639129/chan-hong-park"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1505266210, "post_id": 46187294, "comment_id": 79337668, "body": "@Olaf Sorry for what I make you feel uncomfortable. I will rewrite the code simple."}, {"owner": {"reputation": 4535, "user_id": 3478852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vzDyD.jpg?s=128&g=1", "display_name": "Nisse Engstr&#246;m", "link": "https://stackoverflow.com/users/3478852/nisse-engstr%c3%b6m"}, "edited": false, "score": 0, "creation_date": 1505406669, "post_id": 46187294, "comment_id": 79411466, "body": "I&#39;m voting to reopen this question because it contains everything needed to answer it. It&#39;s just that nobody was able to figure it out until now."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 4639129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/553aab0952f3e06feb8e141bf1f06d15?s=128&d=identicon&r=PG&f=1", "display_name": "chan hong Park", "link": "https://stackoverflow.com/users/4639129/chan-hong-park"}, "edited": false, "score": 0, "creation_date": 1505279274, "post_id": 46188731, "comment_id": 79340729, "body": "Thank you Nisse for your advice. I edited the code on your advice and I posted it again. Unfortunately, the result is still same. Is there anything what I missunderstand?"}, {"owner": {"reputation": 4535, "user_id": 3478852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vzDyD.jpg?s=128&g=1", "display_name": "Nisse Engstr&#246;m", "link": "https://stackoverflow.com/users/3478852/nisse-engstr%c3%b6m"}, "reply_to_user": {"reputation": 25, "user_id": 4639129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/553aab0952f3e06feb8e141bf1f06d15?s=128&d=identicon&r=PG&f=1", "display_name": "chan hong Park", "link": "https://stackoverflow.com/users/4639129/chan-hong-park"}, "edited": false, "score": 0, "creation_date": 1505284629, "post_id": 46188731, "comment_id": 79342961, "body": "Your current code passes too many values to <code>printf()</code>. Your previous version passed pointers using the wrong format specifier (<code>&quot;%p&quot;, (void)&amp;nCount</code> is one possible solution)."}, {"owner": {"reputation": 4535, "user_id": 3478852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vzDyD.jpg?s=128&g=1", "display_name": "Nisse Engstr&#246;m", "link": "https://stackoverflow.com/users/3478852/nisse-engstr%c3%b6m"}, "reply_to_user": {"reputation": 25, "user_id": 4639129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/553aab0952f3e06feb8e141bf1f06d15?s=128&d=identicon&r=PG&f=1", "display_name": "chan hong Park", "link": "https://stackoverflow.com/users/4639129/chan-hong-park"}, "edited": false, "score": 0, "creation_date": 1505406416, "post_id": 46188731, "comment_id": 79411318, "body": "@chanhongPark: I figured it out and rewrote my answer."}, {"owner": {"reputation": 25, "user_id": 4639129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/553aab0952f3e06feb8e141bf1f06d15?s=128&d=identicon&r=PG&f=1", "display_name": "chan hong Park", "link": "https://stackoverflow.com/users/4639129/chan-hong-park"}, "edited": false, "score": 0, "creation_date": 1505433720, "post_id": 46188731, "comment_id": 79423546, "body": "Thank you very much. Now I clearly understand. Thank you!"}], "tags": [], "owner": {"reputation": 4535, "user_id": 3478852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vzDyD.jpg?s=128&g=1", "display_name": "Nisse Engstr&#246;m", "link": "https://stackoverflow.com/users/3478852/nisse-engstr%c3%b6m"}, "is_accepted": true, "score": 0, "last_activity_date": 1505448362, "last_edit_date": 1505448362, "creation_date": 1505275842, "answer_id": 46188731, "question_id": 46187294, "link": "https://stackoverflow.com/questions/46187294/can-i-use-same-variable-name-in-macro/46188731#46188731", "title": "Can I use same variable name in macro", "body": "<p>Here's what happens:</p>\n\n<p><strong>Macro 1:</strong></p>\n\n<p>When the compiler expands</p>\n\n<pre><code>TEST_MACRO_1(nCount);  // Macro 1\n</code></pre>\n\n<p>it replaces every instance of <code>size</code> in the macro's replacement list with <code>nCount</code>. This is the result (after adding linebreaks and indenting it for readability):</p>\n\n<pre><code>int nCount = 10;\n{\n    if(0 &lt; nCount)\n    {\n        int nCount = 5;\n        printf(\"[MACRO_1] size = %d / nCount = %d, (0x%x)\\n\", (int)nCount, nCount, &amp;nCount);\n    }\n}\n</code></pre>\n\n<p>As you can see, the inner <code>nCount</code> shadows the outer and the code prints 5 instead of 10.</p>\n\n<p><strong>Macro 2:</strong></p>\n\n<p>Similarly, when the compiler expands</p>\n\n<pre><code>TEST_MACRO_2(nCount);  // Macro 2\n</code></pre>\n\n<p><code>size</code> is again replaced with <code>nCount</code> and the result becomes:</p>\n\n<pre><code>int nCount = 10;\n\n/* expansion of Macro 1 */\n\n{\n    if(0 &lt; nCount)\n    {\n        int nCount2 = 5;\n        printf(\"[MACRO_2] size = %d / nCount = %d, (0x%x)\\n\", (int)nCount, nCount2, &amp;nCount2);\n    }\n}\n</code></pre>\n\n<p>Here, the inner variable is <code>nCount2</code>, so nothing is being shadowed and the code prints the outer <code>nCount</code> which is 10.</p>\n"}], "owner": {"reputation": 25, "user_id": 4639129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/553aab0952f3e06feb8e141bf1f06d15?s=128&d=identicon&r=PG&f=1", "display_name": "chan hong Park", "link": "https://stackoverflow.com/users/4639129/chan-hong-park"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 468, "favorite_count": 0, "closed_date": 1505291199, "accepted_answer_id": 46188731, "answer_count": 1, "score": -2, "last_activity_date": 1505448362, "creation_date": 1505264332, "last_edit_date": 1505407239, "question_id": 46187294, "link": "https://stackoverflow.com/questions/46187294/can-i-use-same-variable-name-in-macro", "closed_reason": "Not suitable for this site", "title": "Can I use same variable name in macro", "body": "<p>I wrote a code like below.</p>\n\n<p>Test Macro 1 uses a variable which has same name (<code>nCount</code>) from what it is called.\nAnd Test Macro 2 uses a different named variable.</p>\n\n<p>I thought the variable of Macro 1 is regarded as different one, because it is packed by square brackets.</p>\n\n<p>But the value of variable in function is change to macro's value.\n(You can see the result in tracelog result.)</p>\n\n<p>On the other hand, the Macro 2 which uses different named variable is ok.</p>\n\n<p>Could somebody explain why this thing is happening?</p>\n\n<pre><code>=====================Trace Log======================================\n[MACRO_1] size = 5 / nCount = 5, (0x2b9d84) \n[MACRO_2] size = 10 / nCount = 5, (0x2b9da4) \n</code></pre>\n\n<p>(I thought size value in Macro 1 was also 10, but it was 5)</p>\n\n<p>Source code:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\n#define TEST_MACRO_1(size)      \\\n{                               \\\n    if(0 &lt; size)                \\\n    {                           \\\n        int nCount = 5;         \\\n        printf(\"[MACRO_1] size = %d / nCount = %d, (0x%x)\\n\", (int)size, nCount, &amp;nCount);  \\\n    }                           \\\n}\n\n#define TEST_MACRO_2(size)      \\\n{                               \\\n    if(0 &lt; size)                \\\n    {                           \\\n        int nCount2 = 5;        \\\n        printf(\"[MACRO_2] size = %d / nCount = %d, (0x%x)\\n\", (int)size, nCount2, &amp;nCount2);  \\      \n    }                           \\\n}\n\nint main()\n{\n    int nCount = 10;\n\n    TEST_MACRO_1(nCount);  // Macro 1\n    TEST_MACRO_2(nCount);  // Macro 2\n}\n</code></pre>\n"}, {"tags": ["c", "command"], "comments": [{"owner": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 0, "creation_date": 1505259272, "post_id": 46186618, "comment_id": 79336211, "body": "What&#39;s with everyone using <code>system</code> for everything instead of the proper calls? <a href=\"http://man7.org/linux/man-pages/man2/chdir.2.html\" rel=\"nofollow noreferrer\"><code>man chdir</code></a>"}, {"owner": {"reputation": 13, "user_id": 8600293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5942445d5d2582bdafacbc0df08dccef?s=128&d=identicon&r=PG&f=1", "display_name": "Rubin Dack", "link": "https://stackoverflow.com/users/8600293/rubin-dack"}, "reply_to_user": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 0, "creation_date": 1505259334, "post_id": 46186618, "comment_id": 79336226, "body": "hmm it&#39;s interesting, is there not a way to do this with system? I will check the link thank you @spectras"}, {"owner": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 1, "creation_date": 1505259490, "post_id": 46186618, "comment_id": 79336267, "body": "It&#39;s just that <code>system</code> is a hack, no serious program should use it like, ever. It spawns one or more external processes, initializes them, makes them parse the command and run it, then waits for OS to clean them up, all of which are heavy operations, while your program can perfectly do the job, swiftly and efficiently by just directly using the actual calls that the program you start ends up doing anyway. Not to mention it&#39;s inherently not cross-platform (depends on which commands are available) and might easily misbehave (what if I copy a virus under name <code>cd.exe</code> next to your program?)"}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 1, "creation_date": 1505259665, "post_id": 46186618, "comment_id": 79336315, "body": "In your case, you probably want <code>SetCurrentDirectory</code>."}, {"owner": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 0, "creation_date": 1505259736, "post_id": 46186618, "comment_id": 79336343, "body": "As for the actual reason what you do does not work, well since it spawns an external process, it is the external process that changes directory, not yours. Yours waits until the external process has started, changed its own current directory, completed and then resumes."}, {"owner": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 0, "creation_date": 1505259964, "post_id": 46186618, "comment_id": 79336391, "body": "(by the way, <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa365530(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>SetCurrentDirectory()</code></a> is the windows pendant of the <code>chdir()</code> function I linked, jxh is right, since you&#39;re on windows it&#39;s the one you probably want :) )."}, {"owner": {"reputation": 13, "user_id": 8600293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5942445d5d2582bdafacbc0df08dccef?s=128&d=identicon&r=PG&f=1", "display_name": "Rubin Dack", "link": "https://stackoverflow.com/users/8600293/rubin-dack"}, "reply_to_user": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 0, "creation_date": 1505260069, "post_id": 46186618, "comment_id": 79336421, "body": "Nice, function :) I definitely would make a use of it. Thanks @spectras"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1505263326, "post_id": 46186618, "comment_id": 79337056, "body": "@RubinDack: no, DONT make use of it. If you have to mess around with the calling process&#39;s CWD then you are doing things the wrong way. NEVER rely on relative file paths, ALWAYS use absolute paths."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1505263340, "post_id": 46186618, "comment_id": 79337059, "body": "<code>system</code> calls the shell. It is not a programming problem if you run a normal shell command."}, {"owner": {"reputation": 86, "user_id": 5183508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/384ee53211f7c02460c90621257870b5?s=128&d=identicon&r=PG&f=1", "display_name": "DiegoSunDevil", "link": "https://stackoverflow.com/users/5183508/diegosundevil"}, "edited": false, "score": 0, "creation_date": 1505264499, "post_id": 46186618, "comment_id": 79337294, "body": "I think you want to pass in &quot;cd ..&quot;, not &quot;cd..&quot; The lack of a space likely causes the command to fail.  You can check the return code of system to see if it succeeded. <a href=\"http://man7.org/linux/man-pages/man3/system.3.html\" rel=\"nofollow noreferrer\">man7.org/linux/man-pages/man3/system.3.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 350, "user_id": 8050974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30d8efdc7f72ebd41632b161bd4a59ec?s=128&d=identicon&r=PG&f=1", "display_name": "WangYang", "link": "https://stackoverflow.com/users/8050974/wangyang"}, "is_accepted": false, "score": 0, "last_activity_date": 1505266938, "creation_date": 1505266938, "answer_id": 46187591, "question_id": 46186618, "link": "https://stackoverflow.com/questions/46186618/c-program-changing-directories/46187591#46187591", "title": "C program changing directories", "body": "<p>The Linux system function named 'chdir' you can use in your program . 'chidr' could change the program current directory when program is running.</p>\n\n<p>The program will be a process of the linux when it is running. The system will copy the environment variables to this process. In these environment variables, a variable named PWD remains the current directory path of the process. Thus you can use the following program to show the value of all environment variables:</p>\n\n<pre><code>   #include &lt;stdlib.h&gt;\n   #include &lt;stdio.h&gt;\n   extern char **environ;\n   int main()\n   {\n       char **env = environ;\n      //show the current directory path\n      printf(\"PWD: %s\\n\", getenv(\"PWD\"));\n      //show all environment variables.\n       while(*env)\n       {\n           printf(\"%s\\n\",*env);\n           env++;\n       }\n    return 0;\n   }\n</code></pre>\n\n<p>Thus you can change the value of the variable \"PWD\" by calling the system function named \"chdir\" and show the current path by calling the system function named \"getenv\".\nIn addition, you can show the detail information of environment variables by using the following shell commond:</p>\n\n<pre><code>man 7 environ\n</code></pre>\n\n<p>If you don't know how to use the \"chdir\" function, you can use the following shell common line to get help:</p>\n\n<pre><code>man chdir\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8600293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5942445d5d2582bdafacbc0df08dccef?s=128&d=identicon&r=PG&f=1", "display_name": "Rubin Dack", "link": "https://stackoverflow.com/users/8600293/rubin-dack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 498, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1505266938, "creation_date": 1505258351, "last_edit_date": 1505263272, "question_id": 46186618, "link": "https://stackoverflow.com/questions/46186618/c-program-changing-directories", "title": "C program changing directories", "body": "<p>Hello I am writing a C program, I am new to it, I use <code>system</code> to run commands but whenever I type in <code>cd..</code> it shows the correct directory but it always stays there.</p>\n\n<pre><code>int main(){\n\nchar command[20];\n\n    while(1){\n       scanf(\"%s\", &amp;command); //typing in cd..\n       //it returns \"C:\\Program Files (x86)\\Google\\Drive\\\"\n       system(command);\n    }\n}\n</code></pre>\n\n<p>I type in the same again it still seems to be in the same directory. How do I change directories in C using <code>system</code>?</p>\n"}, {"tags": ["c", "xcode", "cunit"], "owner": {"reputation": 2696, "user_id": 1304700, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Ys2gR.png?s=128&g=1", "display_name": "A. K. M. Tariqul Islam", "link": "https://stackoverflow.com/users/1304700/a-k-m-tariqul-islam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 165, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1505258348, "creation_date": 1505258348, "question_id": 46186617, "link": "https://stackoverflow.com/questions/46186617/run-cunit-in-xcode", "title": "Run CUnit in XCode", "body": "<p>I want to learn CUnit from the beginning. As I use macOS I don't want to install other IDEs like netbeans. I want to install CUnit and start learning it using XCode. How can I install CUnit for XCode?</p>\n"}, {"tags": ["c", "gcc", "assembly"], "comments": [{"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 4, "creation_date": 1505258462, "post_id": 46186592, "comment_id": 79336009, "body": "You need to double the <code>%</code> that is <code>%%rdx</code>. It&#39;s a bad idea though, you should use a <code>&quot;d&quot;</code> constraint instead. Rule of thumb: if you write <code>mov</code> in inline asm, you are probably doing something wrong."}, {"owner": {"reputation": 5355, "user_id": 377022, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/c11c7cc23517cf5f043b51fc7914049a?s=128&d=identicon&r=PG", "display_name": "Jason Gross", "link": "https://stackoverflow.com/users/377022/jason-gross"}, "reply_to_user": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 0, "creation_date": 1505258835, "post_id": 46186592, "comment_id": 79336106, "body": "Oooh, thanks!  <code>%%</code> works, if you write this as an answer, I&#39;ll accept it.  Why should I use a <code>&quot;d&quot;</code> constraint, though?  I&#39;m seeing if I can match the performance of hand-written assembly by using my own script for register allocation and instruction scheduling (because gcc isn&#39;t good enough), and across the ~175 lines of assembly it generates, there&#39;s no single value that &quot;lives&quot; in <code>rdx</code>; things keep getting swapped into and out of <code>rdx</code> depending on which things need to be multiplied.  And I also need a <code>mov</code> to save <code>rbp</code> at the beginning, because I need 15 registers to not spill anything"}, {"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 2, "creation_date": 1505258925, "post_id": 46186592, "comment_id": 79336128, "body": "In general you use inline assembly for inlining, and then it&#39;s better to inform the compiler so it can do clever stuff instead of forcing possibly unnecessary data movement. You might be doing something special where this doesn&#39;t apply, but then chances are you should use separate assembly module."}, {"owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1505259020, "post_id": 46186592, "comment_id": 79336158, "body": "@JasonGross Given the <code>d</code> constraint, the compiler may choose registers for other instructions so that the result is in the right register ahead of time. (Also, if you don&#39;t constrain the registers, you&#39;ll get an error if the compiler happens to choose <code>rdx</code> anyway, because you can&#39;t <code>mov rdx, rdx</code>.)"}, {"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "reply_to_user": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1505260191, "post_id": 46186592, "comment_id": 79336451, "body": "@duskwuff you <b>can</b> <code>mov rdx, rdx</code> it&#39;s just a waste of resources :) Also, the clobber prohibits the compiler from picking <code>rdx</code>."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1505262899, "post_id": 46186592, "comment_id": 79336974, "body": "If the first or last instruction of an inline-asm statement is a <code>mov</code>, usually you&#39;re doing it wrong and should write better operand constraints.  See the <a href=\"https://stackoverflow.com/tags/inline-assembly/info\">inline-assembly tag wiki</a>.  Or better, let the compiler use <code>mulx</code> for you by compiling that function with <code>-mbmi2</code>.  (e.g. with <code>__attribute__((target(&quot;-mbmi2&quot;) ))</code> or something if you need it in the same compilation unit as other functions.)"}], "owner": {"reputation": 5355, "user_id": 377022, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/c11c7cc23517cf5f043b51fc7914049a?s=128&d=identicon&r=PG", "display_name": "Jason Gross", "link": "https://stackoverflow.com/users/377022/jason-gross"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 208, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1505258137, "creation_date": 1505258137, "question_id": 46186592, "link": "https://stackoverflow.com/questions/46186592/how-do-i-refer-to-literal-registers-in-gcc-inline-assembly-in-att-syntax", "title": "How do I refer to literal registers in gcc inline assembly in AT&amp;T syntax?", "body": "<p>I am trying to refer to register literals; I need this because I want to use instructions like <code>mulx</code> which require one of their inputs to be in <code>rdx</code>.</p>\n\n<p>I've tried this:</p>\n\n<pre><code>#include &lt;stdint.h&gt;\n\nint main() {\n  uint64_t x = 15, y = 3, z, w;\n  asm (\"mov %[x], rdx\\t\\n\"\n       \"mulx %[y], %[z], %[w]\\t\\n\"\n       : [z] \"=&amp;r\" (z), [w] \"=&amp;r\" (w)\n       : [x] \"r\" (x), [y] \"r\" (y)\n       : \"rdx\"\n       );\n  return z + w;\n}\n</code></pre>\n\n<p>which only works with <code>-masm=intel</code> and otherwise gives </p>\n\n<pre>\n$ gcc  foo.c\n/tmp/ccGealWM.o: In function `main':\nfoo.c:(.text+0x20): undefined reference to `rdx'\ncollect2: error: ld returned 1 exit status\n</pre>\n\n<p>and I've tried</p>\n\n<pre><code>#include &lt;stdint.h&gt;\n\nint main() {\n  uint64_t x = 15, y = 3, z, w;\n  asm (\"mov %[x], %rdx\\t\\n\"\n       \"mulx %[y], %[z], %[w]\\t\\n\"\n       : [z] \"=&amp;r\" (z), [w] \"=&amp;r\" (w)\n       : [x] \"r\" (x), [y] \"r\" (y)\n       : \"rdx\"\n       );\n  return z + w;\n}\n</code></pre>\n\n<p>which gives</p>\n\n<pre>\n$ gcc  foo.c\nfoo.c: In function \u2018main\u2019:\nfoo.c:5:7: error: invalid 'asm': operand number missing after %-letter\n       asm (\"mov %[x], %rdx\\t\\n\"\n       ^\n</pre>\n"}, {"tags": ["c", "gcc", "assembly", "arm", "cortex-m3"], "comments": [{"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 1, "creation_date": 1505259710, "post_id": 46186563, "comment_id": 79336330, "body": "What is the probelem? What is not pushes on the stack? parameters - they are passed if possible via the registers. <code>bl</code> - calls the function."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 1, "creation_date": 1505260072, "post_id": 46186563, "comment_id": 79336422, "body": "PS Stop analizing the generated code. Firstly because you do not understand it, secondly because compiler is very good in the code generation and you can be sure the the generated code is ok. If something does not work - it is your code, not the compiler"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1505263085, "post_id": 46186563, "comment_id": 79337005, "body": "You&#39;re compiling with optimizations disabled, so the asm is ugly and hard to read (lots of store/reload).  Use <code>-Og</code> or <code>-O1</code> at least."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1505263616, "post_id": 46186563, "comment_id": 79337121, "body": "Please provide a reference to the C standard or the AAPCS document requiring there has to be a stack and there has to pushed something somehwere. Documents are available freely online."}, {"owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1505273887, "post_id": 46186563, "comment_id": 79339305, "body": "@Olaf The C standard may not explicitly specify a stack, but the ARM Cortex-M platform certainly does\u2026"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 1, "creation_date": 1505298687, "post_id": 46186563, "comment_id": 79352589, "body": "@duskwuff: So I learned a wrong meaning for the word &quot;<b>and</b>&quot;? Like in &quot;\u2026 requiring there has to be a stack <b>and</b> there has to (be) pushed something \u2026&quot;? If you be so kind to point me at a reliable resource for the definition of that word? Thank you in advance."}], "answers": [{"comments": [{"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1505347278, "post_id": 46188481, "comment_id": 79380324, "body": "I dont see that yet we dont have the values for address 0x00000000, 0x00000004 which are all that are needed to boot. (technically 0x00000004 is all that is needed).. Main starts at 0x10 which is interesting, but the key word for booting success or not is not shown.  granted after you get past reset I would bet there are other problems..."}, {"owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "reply_to_user": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1505347442, "post_id": 46188481, "comment_id": 79380366, "body": "@old_timer With no data explicitly placed at the reset vector, though, chances are that it doesn&#39;t point to the <code>main</code> function. It could be pointing to the <code>0x0000_001a</code> address implicated in the PC trace, for instance."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1505348310, "post_id": 46188481, "comment_id": 79380596, "body": "understood, but there isnt enough info to know for sure what is really going on."}, {"owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "reply_to_user": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1505355284, "post_id": 46188481, "comment_id": 79382143, "body": "@old_timer We certainly can&#39;t tell <i>exactly</i> what&#39;s going on, but the fact that there&#39;s code located where the vector table is supposed to be will definitely cause problems."}, {"owner": {"reputation": 1469, "user_id": 2105592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e0660c06174e5479ed2c6dcda818d0f?s=128&d=identicon&r=PG", "display_name": "Sean Houlihane", "link": "https://stackoverflow.com/users/2105592/sean-houlihane"}, "edited": false, "score": 0, "creation_date": 1505464679, "post_id": 46188481, "comment_id": 79433791, "body": "Unaligned stack pointer (0x00000000 value) might fault too. I know X there doesn&#39;t help..."}], "tags": [], "owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": false, "score": 1, "last_activity_date": 1505274005, "creation_date": 1505274005, "answer_id": 46188481, "question_id": 46186563, "link": "https://stackoverflow.com/questions/46186563/c-function-from-main-is-not-pushing-on-stack-in-arm/46188481#46188481", "title": "C function from main is not pushing on stack in arm", "body": "<p>Your application is missing an interrupt table. As a result, the processor is reading instructions as interrupt vectors, and faulting repeatedly as those instructions cannot be interpreted as invalid addresses.</p>\n\n<p>Use the support files from the <a href=\"http://www.st.com/content/st_com/en/products/embedded-software/mcus-embedded-software/stm32-embedded-software/stm32-standard-peripheral-libraries/stsw-stm32077.html\" rel=\"nofollow noreferrer\">STM32L1xx standard peripheral library</a> to generate an appropriate linker script and interrupt table.</p>\n"}, {"comments": [{"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1505349333, "post_id": 46208731, "comment_id": 79380834, "body": "the stm32 logic maps 0x08000000 to 0x00000000 so that your application program will flash the 0x08000011 or whatever your reset vector is, will then take you to the real address.  not uncommon in microcontrollers to have the boot/vector area remappable..."}], "tags": [], "owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "is_accepted": false, "score": 3, "last_activity_date": 1505530340, "last_edit_date": 1505530340, "creation_date": 1505348980, "answer_id": 46208731, "question_id": 46186563, "link": "https://stackoverflow.com/questions/46186563/c-function-from-main-is-not-pushing-on-stack-in-arm/46208731#46208731", "title": "C function from main is not pushing on stack in arm", "body": "<p>A very simple completely working example:</p>\n\n<p>vectors.s</p>\n\n<pre><code>.thumb\n\n.globl _start\n_start:\n\n.word 0x20001000\n.word reset\n\n.thumb_func\nreset:\n    bl centry\ndone: b done\n</code></pre>\n\n<p>so.c</p>\n\n<pre><code>unsigned int fun ( unsigned int );\nunsigned int centry ( void )\n{\n    return(fun(5)+1);\n}\n</code></pre>\n\n<p>fun.c</p>\n\n<pre><code>unsigned int fun ( unsigned int x )\n{\n    return(x+1);\n}\n</code></pre>\n\n<p>flash.ld</p>\n\n<pre><code>MEMORY\n{\n    rom : ORIGIN = 0x00000000, LENGTH = 0x1000\n}\n\nSECTIONS\n{\n    .text : { *(.text*) } &gt; rom\n    .rodata : { *(.rodata*) } &gt; rom\n}\n</code></pre>\n\n<p>build</p>\n\n<pre><code>arm-none-eabi-as --warn --fatal-warnings -mcpu=cortex-m0 vectors.s -o vectors.o\narm-none-eabi-gcc -Wall -Werror -O2 -nostdlib -nostartfiles -ffreestanding  -mcpu=cortex-m0 -mthumb -c so.c -o so.o\narm-none-eabi-gcc -Wall -Werror -O2 -nostdlib -nostartfiles -ffreestanding  -mcpu=cortex-m0 -mthumb -c fun.c -o fun.o\narm-none-eabi-ld -o so.elf -T flash.ld vectors.o so.o fun.o\narm-none-eabi-objdump -D so.elf &gt; so.list\narm-none-eabi-objcopy so.elf so.bin -O binary\n</code></pre>\n\n<p>the whole program</p>\n\n<pre><code>00000000 &lt;_start&gt;:\n   0:   20001000    andcs   r1, r0, r0\n   4:   00000009    andeq   r0, r0, r9\n\n00000008 &lt;reset&gt;:\n   8:   f000 f802   bl  10 &lt;centry&gt;\n\n0000000c &lt;done&gt;:\n   c:   e7fe        b.n c &lt;done&gt;\n    ...\n\n00000010 &lt;centry&gt;:\n  10:   b510        push    {r4, lr}\n  12:   2005        movs    r0, #5\n  14:   f000 f802   bl  1c &lt;fun&gt;\n  18:   3001        adds    r0, #1\n  1a:   bd10        pop {r4, pc}\n\n0000001c &lt;fun&gt;:\n  1c:   3001        adds    r0, #1\n  1e:   4770        bx  lr\n</code></pre>\n\n<p>a simulation of the program:</p>\n\n<pre><code>read32(0x00000000)=0x20001000\nread32(0x00000004)=0x00000009\n--- 0x00000008: 0xF000 \n--- 0x0000000A: 0xF802 bl 0x0000000F\n--- 0x00000010: 0xB510 push {r4,lr}\nwrite32(0x20000FF8,0x00000000)\nwrite32(0x20000FFC,0x0000000D)\n--- 0x00000012: 0x2005 movs r0,#0x05\n--- 0x00000014: 0xF000 \n--- 0x00000016: 0xF802 bl 0x0000001B\n--- 0x0000001C: 0x3001 adds r0,#0x01\n--- 0x0000001E: 0x4770 bx r14\n--- 0x00000018: 0x3001 adds r0,#0x01\n--- 0x0000001A: 0xBD10 pop {r4,pc}\nread32(0x20000FF8)=0x00000000\nread32(0x20000FFC)=0x0000000D\n--- 0x0000000C: 0xE7FE b 0x0000000B\n--- 0x0000000C: 0xE7FE b 0x0000000B\n--- 0x0000000C: 0xE7FE b 0x0000000B\n--- 0x0000000C: 0xE7FE b 0x0000000B\n--- 0x0000000C: 0xE7FE b 0x0000000B\n--- 0x0000000C: 0xE7FE b 0x0000000B\n--- 0x0000000C: 0xE7FE b 0x0000000B\n--- 0x0000000C: 0xE7FE b 0x0000000B\n--- 0x0000000C: 0xE7FE b 0x0000000B\n--- 0x0000000C: 0xE7FE b 0x0000000B\n</code></pre>\n\n<p>sure it is a somewhat useless program but it demonstrates booting and calling functions (the function address does not show up on the stack, when you do a call (bl) the r14 gets the return address and r15 gets the address to branch to.  if you have nested functions like centry (the C entry point main() is not an important function name you can call your entry point whatever you want so long as your bootstrap matches) calling fun, then you need to preserve the return address however you choose, typically save it on the stack.  r4 is being pushed just to keep the stack aligned on a 64 bit boundary per the abi.</p>\n\n<p>for your system you would set the linker script for 0x08000000 normally (stm32).  </p>\n\n<p>What we are missing from you is the beginning of your binary, can you do a hexdump of the memory image/binary showing the handfuls of byte before main including the first few instructions of main?</p>\n\n<p>If a bare metal program doesnt do the simplest boot steps right, the first thing you do is to examine the binary where the entry point or vector table is depending on the architecture and see that you built it right.</p>\n\n<p>In this case in my example this is a cortex-m so the stack pointer initialization value (if you choose to use it) is at 0x00000000, you can put anything there and then simply write over the sp if you want, your choice...then address 0x00000004 is the reset vector which is the address of the code to handle the reset with the lsbit set to indicate thumb mode.</p>\n\n<p>so 0x00000008|1 = 0x00000009.</p>\n\n<p>If you dont have</p>\n\n<p>0x2000xxxx\n0x00000011</p>\n\n<p>then your processor is not going to boot right.  I am so much in the habit of using 0x08000000 that I dont remember if 0x00000000 works for an stm, it in theory should...but depends on how you are loading the flash and what mode/state the chip is in at that time.</p>\n\n<p>you might need to link for 0x08000000 and at a minimum if nothing else changed </p>\n\n<p>0x2000xxxx\n0x08000011</p>\n\n<p>as the first two word in your binary/memory image.</p>\n\n<p>EDIT</p>\n\n<p>note you can make a single binary that can be entered both with a vector or a bootloader</p>\n\n<pre><code>.thumb\n\n.thumb_func\n.global _start\n_start:\nbl reset\n.word _start\nreset:\n    ldr r0,stacktop\n    mov sp,r0\n    bl notmain\n    b hang\n.thumb_func\nhang:   b .\n.align \nstacktop: .word 0x20001000\n</code></pre>\n\n<p>placing a branch (well bl to fill the space) in the stack address spot then loading the stack pointer later.</p>\n\n<p>Or use a branch</p>\n\n<pre><code>.thumb\n\n.thumb_func\n.global _start\n_start:\nb reset\nnop\n.word _start\nreset:\n    ldr r0,stacktop\n    mov sp,r0\n    bl notmain\n    b hang\n.thumb_func\nhang:   b .\n.align\nstacktop: .word 0x20001000\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 8600221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444492fd9837878727619961955ca7ac?s=128&d=identicon&r=PG&f=1", "display_name": "saurav", "link": "https://stackoverflow.com/users/8600221/saurav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 339, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1505530340, "creation_date": 1505257880, "last_edit_date": 1505272291, "question_id": 46186563, "link": "https://stackoverflow.com/questions/46186563/c-function-from-main-is-not-pushing-on-stack-in-arm", "title": "C function from main is not pushing on stack in arm", "body": "<p>I am executing C code for arm cortex-m3 for stm32l152C-discovery board but I observed that the function call from main is not getting pushed into the stack. I have analyzed the asm code of this source but I find it is OK. To understand better, please look the asm code generated for C code here:</p>\n\n<pre><code>main.elf:     file format elf32-littlearm\n\n*SYMBOL TABLE:\n00000010 l    d  .text  00000000 .text\n00000000 l    d  .debug_info    00000000 .debug_info\n00000000 l    d  .debug_abbrev  00000000 .debug_abbrev\n00000000 l    d  .debug_aranges 00000000 .debug_aranges\n00000000 l    d  .debug_line    00000000 .debug_line\n00000000 l    d  .debug_str 00000000 .debug_str\n00000000 l    d  .comment   00000000 .comment\n00000000 l    d  .ARM.attributes    00000000 .ARM.attributes\n00000000 l    d  .debug_frame   00000000 .debug_frame\n00000000 l    df *ABS*  00000000 main.c\n00000000 l    df *ABS*  00000000 clock.c\n20004ffc g       .text  00000000 _STACKTOP\n**00000028 g     F .text    000000e0 SystemClock_Config**\n20000000 g       .text  00000000 _DATA_BEGIN\n20000000 g       .text  00000000 _HEAP\n**00000010 g     F .text    00000016 main**\n20000000 g       .text  00000000 _BSS_END\n00000108 g       .text  00000000 _DATAI_BEGIN\n20000000 g       .text  00000000 _BSS_BEGIN\n00000108 g       .text  00000000 _DATAI_END\n20000000 g       .text  00000000 _DATA_END\nDisassembly of section .text:\n00000010 &lt;main&gt;:\n\n#define LL_GPIO_MODE_OUTPUT    1\n\nvoid SystemInit() ;\nint main()\n{\n  10:   b580        push    {r7, lr}\n  12:   b082        sub sp, #8\n  14:   af00        add r7, sp, #0\n    int i = 0;\n  16:   2300        movs    r3, #0\n  18:   607b        str r3, [r7, #4]\n  SystemClock_Config(); \n  **1a: f000 f805   bl  28 &lt;SystemClock_Config&gt;\n    for(;;)\n        i++;\n  1e:   687b        ldr r3, [r7, #4]\n  20:   3301        adds    r3, #1**\n  22:   607b        str r3, [r7, #4]\n  24:   e7fb        b.n 1e &lt;main+0xe&gt;\n\n}\n00000028 &lt;SystemClock_Config&gt;:\n  *            PLLDIV                         = 3\n  *            Flash Latency(WS)              = 1\n  * @retval None\n  */\nvoid SystemClock_Config(void)\n{\n  28:   b480        push    {r7}\n  2a:   af00        add r7, sp, #0\n  SET_BIT(FLASH-&gt;ACR, FLASH_ACR_ACC64);\n  2c:   4a33        ldr r2, [pc, #204]  ; (fc &lt;SystemClock_Config+0xd4&gt;)\n  2e:   4b33        ldr r3, [pc, #204]  ; (fc &lt;SystemClock_Config+0xd4&gt;)\n  30:   681b        ldr r3, [r3, #0]\n  32:   f043 0304   orr.w   r3, r3, #4\n  36:   6013        str r3, [r2, #0]\n  MODIFY_REG(FLASH-&gt;ACR, FLASH_ACR_LATENCY, LL_FLASH_LATENCY_1);\n  38:   4a30        ldr r2, [pc, #192]  ; (fc &lt;SystemClock_Config+0xd4&gt;)\n  3a:   4b30        ldr r3, [pc, #192]  ; (fc &lt;SystemClock_Config+0xd4&gt;)\n  3c:   681b        ldr r3, [r3, #0]\n  3e:   f043 0301   orr.w   r3, r3, #1\n  42:   6013        str r3, [r2, #0]*\n}\n</code></pre>\n\n<p>the execution loops around 0x1a, 0x1c, 0x1e, 0x20 in PC register. </p>\n\n<pre><code>halted: PC: 0x0000001a\nhalted: PC: 0x0000001c\nhalted: PC: 0x0000001e\nhalted: PC: 0x00000020\nhalted: PC: 0x0000001a\nhalted: PC: 0x0000001c\nhalted: PC: 0x0000001e\nhalted: PC: 0x00000020\nhalted: PC: 0x0000001a\nhalted: PC: 0x0000001c\nhalted: PC: 0x0000001e\nhalted: PC: 0x00000020\n</code></pre>\n\n<p>It should jump to 0x28 (SystemClock_Config) at 0x1a. </p>\n"}, {"tags": ["c", "gcc", "macros"], "answers": [{"comments": [{"owner": {"reputation": 341, "user_id": 1627775, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/df5443f2aae0439ee33b2b832578b7f9?s=128&d=identicon&r=PG", "display_name": "ph1ash", "link": "https://stackoverflow.com/users/1627775/ph1ash"}, "edited": false, "score": 0, "creation_date": 1505257393, "post_id": 46186452, "comment_id": 79335777, "body": "Does that mean that if I wanted the &#39;e&#39; in &#39;temp&#39; to become a token, I could segment it like so - t##e##mp?"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "reply_to_user": {"reputation": 341, "user_id": 1627775, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/df5443f2aae0439ee33b2b832578b7f9?s=128&d=identicon&r=PG", "display_name": "ph1ash", "link": "https://stackoverflow.com/users/1627775/ph1ash"}, "edited": false, "score": 1, "creation_date": 1505257559, "post_id": 46186452, "comment_id": 79335814, "body": "@ph1ash, Almost, but <code>e</code> is already a parameter, so it would be replaced. That is, for the call <code>VALUE_ENTRY(1, 2, 3, 4, 5, 6, 7)</code>, <code>t##e##mp</code> would produce <code>t5mp</code>."}], "tags": [], "owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "is_accepted": true, "score": 6, "last_activity_date": 1505257592, "last_edit_date": 1505257592, "creation_date": 1505256979, "answer_id": 46186452, "question_id": 46186427, "link": "https://stackoverflow.com/questions/46186427/how-does-the-c-pre-proccesor-know-what-to-expand-and-what-not-to/46186452#46186452", "title": "How does the C pre-proccesor know what to expand and what not to?", "body": "<p>The preprocessor works on tokens. <code>e</code> by itself is a token, whereas the <code>e</code> in <code>temp</code> is just a character that's part of the larger <code>temp</code> token. <code>##</code> applies only to tokens.</p>\n\n<p>Furthermore, pasting must produce a single token. Therefore, pasting <code>.</code> and <code>a</code> is not valid; <code>temp.a##e</code> is correct, and pastes <code>a</code> and <code>e</code> to form <code>temp.&lt;a&gt;&lt;e&gt;</code>, where <code>&lt;a&gt;</code> and <code>&lt;e&gt;</code> are the replacement texts of <code>a</code> and <code>e</code>.</p>\n"}], "owner": {"reputation": 341, "user_id": 1627775, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/df5443f2aae0439ee33b2b832578b7f9?s=128&d=identicon&r=PG", "display_name": "ph1ash", "link": "https://stackoverflow.com/users/1627775/ph1ash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 1, "accepted_answer_id": 46186452, "answer_count": 1, "score": 4, "last_activity_date": 1505257592, "creation_date": 1505256777, "question_id": 46186427, "link": "https://stackoverflow.com/questions/46186427/how-does-the-c-pre-proccesor-know-what-to-expand-and-what-not-to", "title": "How does the C pre-proccesor know what to expand and what not to?", "body": "<p>Let's say we have a macro defined as such</p>\n\n<pre><code>#define VALUE_ENTRY(a, b, c, d, e, f, g) \\\n    case E_##a##e: temp.a##e = d; break;\n</code></pre>\n\n<p>How does the pre-processor know that the 'e' in 'temp' shouldn't be expanded? Is it due to not having <code>##</code> in front of the 'e'?</p>\n\n<p>Also, should <code>temp.a##e</code> be <code>temp.##a##e</code>?</p>\n"}, {"tags": ["c", "qsort"], "comments": [{"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 1, "creation_date": 1505255070, "post_id": 46186138, "comment_id": 79335197, "body": "You are only sorting the first 6 elements."}, {"owner": {"reputation": 1, "user_id": 6391956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99a3e49e706b1611ae1cea6d51e5af34?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Yu", "link": "https://stackoverflow.com/users/6391956/peter-yu"}, "reply_to_user": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1505255071, "post_id": 46186138, "comment_id": 79335198, "body": "Problem has been solved."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1505255296, "post_id": 46186138, "comment_id": 79335255, "body": "Note: To avoid <code>int</code> overflow and handle all <code>int</code>, use <code>(orderA-&gt;price &gt; orderB-&gt;price) - (orderA-&gt;price &lt; orderB-&gt;price)</code> rather than <code>orderA-&gt;price - orderB-&gt;price</code>"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1505255399, "post_id": 46186138, "comment_id": 79335284, "body": "Problem made readily apparently once you move the declaration of <code>i</code> to be integral to the first for-loop. <a href=\"http://coliru.stacked-crooked.com/a/22b202ca672b4ff8\" rel=\"nofollow noreferrer\">See it here</a>."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1505256591, "post_id": 46186138, "comment_id": 79335582, "body": "<a href=\"https://stackoverflow.com/q/10996418/315052\">Your comparison function may overflow.</a>"}], "answers": [{"tags": [], "owner": {"reputation": 491, "user_id": 8509272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/487ff5fe4697aeb326fa5092ef38f116?s=128&d=identicon&r=PG&f=1", "display_name": "savram", "link": "https://stackoverflow.com/users/8509272/savram"}, "is_accepted": false, "score": 2, "last_activity_date": 1505254995, "creation_date": 1505254995, "answer_id": 46186177, "question_id": 46186138, "link": "https://stackoverflow.com/questions/46186138/how-to-use-qsort-in-an-array-structure-in-c-language/46186177#46186177", "title": "How to use qsort() in an array structure in C language", "body": "<p>After sorting, change</p>\n\n<pre><code>printf (\"Order id = %d Price = %d Test = %d\\n\",list[n].id, list[n].price, list[i].test); \n</code></pre>\n\n<p>to</p>\n\n<pre><code>printf (\"Order id = %d Price = %d Test = %d\\n\",list[n].id, list[n].price, list[n].test);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6391956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99a3e49e706b1611ae1cea6d51e5af34?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Yu", "link": "https://stackoverflow.com/users/6391956/peter-yu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "closed_date": 1505255404, "answer_count": 1, "score": -5, "last_activity_date": 1505254995, "creation_date": 1505254773, "question_id": 46186138, "link": "https://stackoverflow.com/questions/46186138/how-to-use-qsort-in-an-array-structure-in-c-language", "closed_reason": "Not suitable for this site", "title": "How to use qsort() in an array structure in C language", "body": "<p>I am trying to use qsort() to sort the price in a structure. After the sorting, one of the element (test) in the structure becomes 0. Can you tell me why and how to solve it?</p>\n\n<p>Thanks!</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct {\n    int price;\n    int test;\n    int id;\n} order;\norder list[10];\nint i = 0;\n\nint compare (const void * a, const void * b)\n{\n\n  order *orderA = (order *)a;\n  order *orderB = (order *)b;\n\n  return ( orderA-&gt;price - orderB-&gt;price );\n}\n\nint main ()\n{\n    srand ( time(NULL) );\n\n    printf(\"Before sorting\\n\");\n    for(i=0; i&lt;10; i++){ \n        list[i].price = rand()%10;\n        list[i].test = rand()%10;\n        list[i].id = i; \n        printf (\"Order id = %d Price = %d Test = %d\\n\",list[i].id, list[i].price, list[i].test);           \n    }\n    printf(\"AFTER sorting\\n\");\n    int n;\n    qsort (list, 6, sizeof(order), compare);\n    for (n=0; n&lt;10; n++)\n         printf (\"Order id = %d Price = %d Test = %d\\n\",list[n].id, list[n].price, list[i].test);          \n    return 0;\n}\n</code></pre>\n\n<p>The output are:</p>\n\n<blockquote>\n  <p>Before sorting<br>\n  Order id = 0 Price = 4 Test = 2<br>\n  Order id = 1 Price = 9 Test = 3<br>\n  Order id = 2 Price = 5 Test = 0<br>\n  Order id = 3 Price = 2 Test = 8<br>\n  Order id = 4 Price = 8 Test = 5<br>\n  Order id = 5 Price = 7 Test = 4<br>\n  Order id = 6 Price = 9 Test = 3<br>\n  Order id = 7 Price = 1 Test = 1<br>\n  Order id = 8 Price = 8 Test = 4<br>\n  Order id = 9 Price = 3 Test = 3<br>\n  AFTER sorting<br>\n  Order id = 3 Price = 2 Test = 0<br>\n  Order id = 0 Price = 4 Test = 0<br>\n  Order id = 2 Price = 5 Test = 0<br>\n  Order id = 5 Price = 7 Test = 0<br>\n  Order id = 4 Price = 8 Test = 0<br>\n  Order id = 1 Price = 9 Test = 0<br>\n  Order id = 6 Price = 9 Test = 0<br>\n  Order id = 7 Price = 1 Test = 0<br>\n  Order id = 8 Price = 8 Test = 0<br>\n  Order id = 9 Price = 3 Test = 0</p>\n</blockquote>\n"}, {"tags": ["c", "powerpc", "altivec"], "comments": [{"owner": {"reputation": 1776, "user_id": 285759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b643b8e2268b4b02fcee9bf0fa3c0b7?s=128&d=identicon&r=PG", "display_name": "Jeremy Kerr", "link": "https://stackoverflow.com/users/285759/jeremy-kerr"}, "edited": false, "score": 0, "creation_date": 1505269631, "post_id": 46185876, "comment_id": 79338461, "body": "oh, are you trying to load 1 into each vector slot? or only one?"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 1776, "user_id": 285759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b643b8e2268b4b02fcee9bf0fa3c0b7?s=128&d=identicon&r=PG", "display_name": "Jeremy Kerr", "link": "https://stackoverflow.com/users/285759/jeremy-kerr"}, "edited": false, "score": 0, "creation_date": 1505274902, "post_id": 46185876, "comment_id": 79339541, "body": "@Jeremy - Just one; not one splat&#39;d.The problem I am having is, we have to handle the endian conversions manually. See, for example, <a href=\"https://github.com/weidai11/cryptopp/blob/master/rijndael-simd.cpp#L1152\" rel=\"nofollow noreferrer\"><code>rijndael.cpp</code> : 1152</a>. I&#39;d like something less complex and more intuitive, like the statement that does not compile."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 1776, "user_id": 285759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b643b8e2268b4b02fcee9bf0fa3c0b7?s=128&d=identicon&r=PG", "display_name": "Jeremy Kerr", "link": "https://stackoverflow.com/users/285759/jeremy-kerr"}, "edited": false, "score": 0, "creation_date": 1505276047, "post_id": 46185876, "comment_id": 79339805, "body": "@Jeremy - Believe it or not, I spent 6 hours tracking down a single failed self test in AES/CTR mode. It was because I wanted <code>VectorType one = 1;</code> so I wrote <code>VectorType one = {1};</code>. It worked fine on a little endian Linux machine, but failed on a big endian AIX machine. Now I want to add a control that avoids the problem. This question is trying to find the control I can place so the problem does not surface in the future."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 1776, "user_id": 285759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b643b8e2268b4b02fcee9bf0fa3c0b7?s=128&d=identicon&r=PG", "display_name": "Jeremy Kerr", "link": "https://stackoverflow.com/users/285759/jeremy-kerr"}, "edited": false, "score": 0, "creation_date": 1505276058, "post_id": 46185876, "comment_id": 79339807, "body": "Don&#39;t laugh at the value one. It was the real value that caused the problem. And don&#39;t laugh about the six hours, either. We&#39;ve got half-working debuggers on AIX and Linux. And AIX seems to be completely missing some tools, like a disassembler, so I can examine the object files offline. Its a very miserable experience."}, {"owner": {"reputation": 1776, "user_id": 285759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b643b8e2268b4b02fcee9bf0fa3c0b7?s=128&d=identicon&r=PG", "display_name": "Jeremy Kerr", "link": "https://stackoverflow.com/users/285759/jeremy-kerr"}, "edited": false, "score": 0, "creation_date": 1505278466, "post_id": 46185876, "comment_id": 79340485, "body": "So are you looking to treat the entire vector as a 128-bit value, or are you just needing a specific slot initialised?"}, {"owner": {"reputation": 341, "user_id": 8311639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c56b4e25d73662bad7049f0fa75a0150?s=128&d=identicon&r=PG&f=1", "display_name": "Rafik Zurob", "link": "https://stackoverflow.com/users/8311639/rafik-zurob"}, "edited": false, "score": 1, "creation_date": 1505357850, "post_id": 46185876, "comment_id": 79382727, "body": "@jww Regarding disassemblers on AIX:  The XL compilers can generate assembly files instead of object files via the <a href=\"https://www.ibm.com/support/knowledgecenter/SSGH3R_13.1.0/com.ibm.xlcpp131.aix.doc/compiler_ref/opt_s_upper.html\" rel=\"nofollow noreferrer\">-S</a> option.  You can also get pseudo assembly in a listing file (*.lst) via the -qlist option.  Finally, the XL compilers ship with a <code>dis</code> tool in the <code>&#47;opt&#47;IBM&#47;*&#47;exe&#47;</code> directory.  For example, <code>dis a.out</code> creates <code>a.out.s</code>."}, {"owner": {"reputation": 678, "user_id": 7710354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f2611c4267a7cbd227e43d6c522160d?s=128&d=identicon&r=PG&f=1", "display_name": "Nicole Trudeau", "link": "https://stackoverflow.com/users/7710354/nicole-trudeau"}, "edited": false, "score": 0, "creation_date": 1505512769, "post_id": 46185876, "comment_id": 79460194, "body": "@jww Thanks for your kind comments. Re: &quot;What&#39;s not apparent is, XL C/C++ supports all data arrangements and has a rich API set.&quot;, if we could ask a favour, what could we improve in our documentation to help others realize this in the future?"}], "answers": [{"tags": [], "owner": {"reputation": 1776, "user_id": 285759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b643b8e2268b4b02fcee9bf0fa3c0b7?s=128&d=identicon&r=PG", "display_name": "Jeremy Kerr", "link": "https://stackoverflow.com/users/285759/jeremy-kerr"}, "is_accepted": false, "score": 2, "last_activity_date": 1505269576, "creation_date": 1505269576, "answer_id": 46187879, "question_id": 46185876, "link": "https://stackoverflow.com/questions/46185876/how-to-load-a-small-constant-into-a-vector/46187879#46187879", "title": "How to load a small constant into a vector?", "body": "<p>Your example of</p>\n\n<pre><code>VectorType one = 1;\n</code></pre>\n\n<p>is trying to assign a scalar to a vector. Try using a vector instead. For a 16-char vector, this would be:</p>\n\n<pre><code>vector char one = {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1};\n</code></pre>\n\n<p>gcc-4.8 seems to compile this okay; I don't have a LE 4.8 handy, but works for big-endian at least:</p>\n\n<pre><code>   0:   10 41 03 0c     vspltisb v2,1\n</code></pre>\n\n<p>LE with gcc-5 works fine too.</p>\n\n<pre><code>   0:   0c 03 41 10     vspltisb v2,1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 341, "user_id": 8311639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c56b4e25d73662bad7049f0fa75a0150?s=128&d=identicon&r=PG&f=1", "display_name": "Rafik Zurob", "link": "https://stackoverflow.com/users/8311639/rafik-zurob"}, "is_accepted": false, "score": 2, "last_activity_date": 1505358820, "creation_date": 1505358820, "answer_id": 46209928, "question_id": 46185876, "link": "https://stackoverflow.com/questions/46185876/how-to-load-a-small-constant-into-a-vector/46209928#46209928", "title": "How to load a small constant into a vector?", "body": "<p>You might want to check the BCD_INIT example <a href=\"https://www.ibm.com/developerworks/library/l-ibm-xl-c-cpp-compiler/index.html\" rel=\"nofollow noreferrer\">here</a>.  It uses a macro to reverse the vector initialization.</p>\n\n<p>Regarding vec_reve:  It's syntactic sugar for vec_perm.  You can implement it as an inline function in a header or as a library function and use it for compilers that don't have it.</p>\n"}], "owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1505358820, "creation_date": 1505253242, "last_edit_date": 1505268808, "question_id": 46185876, "link": "https://stackoverflow.com/questions/46185876/how-to-load-a-small-constant-into-a-vector", "title": "How to load a small constant into a vector?", "body": "<p>Please forgive my ignorance with the question below. We are supporting GCC 4.8 (and above) and IBM XL C/C++ 12 (and above). We are also supporting big and little-endian on AIX and Linux. The compilers and platforms have made the code fairly messy.</p>\n\n<p>We want to load the constant <code>1</code> into a VSX register. This is the code we've been able to craft, but it seems wrong because its so complex. The macros <code>XLC_VERSION</code>, <code>GCC_VERSION</code> and <code>LITTLE_ENDIAN</code> have their customary meanings, so the additional preprocessor macros that lead to them have been omitted.</p>\n\n<pre><code>typedef __vector unsigned char      uint8x16_p8;\ntypedef __vector unsigned long long uint64x2_p8;\n\n#if defined(XLC_VERSION)\n    typedef uint8x16_p8 VectorType;\n#elif defined(GCC_VERSION)\n    typedef uint64x2_p8 VectorType;\n#endif\n\n#if defined(LITTLE_ENDIAN)\n    const VectorType one = {1};\n#else\n    const VectorType one = (VectorType)((uint64x2_p8){0,1});\n#endif\n</code></pre>\n\n<p>What's not apparent is, XL C/C++ supports all data arrangements and has a rich API set. The IBM compiler is a breeze to work with (when its not producing warnings and errors that are hard to understand).</p>\n\n<p>GCC going back to 4.8 only supports the 64x2 arrangement and it only has a subset of the APIs. For example, GCC is missing IBM APIs for the 8x16 arrangement and GCC does not have <code>vec_reve</code> (which would make endian reversal easy).</p>\n\n<p>What I really want to do is something like this and have it \"just work\" everywhere, but it fails to compile:</p>\n\n<pre><code>VectorType one = 1;\n</code></pre>\n\n<p>Is there a less complex way to load a small constant into a vector register?</p>\n"}, {"tags": ["c", "macros", "warnings", "g-code"], "comments": [{"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 4, "creation_date": 1505255944, "post_id": 46185868, "comment_id": 79335427, "body": "It is just a very old chunk of code, RS-274 goes back to 1980.  The author(s) were not yet using a C compiler that was that picky.  None were back then.  I recognize the programming style, the authors had a background in Algol or Pascal.  Not quite gone yet, today the type of a string literal is still char*, the macros are still partly covered by iso646.h.  Pascal did not have a dangling else problem, if-then-else was a single statement that was terminated by a semi-colon."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1505256324, "post_id": 46185868, "comment_id": 79335516, "body": "I don&#39;t know what settings you enabled, but literal strings have the type <code>char *</code>."}, {"owner": {"reputation": 5417, "user_id": 1823524, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/uScxd.jpg?s=128&g=1", "display_name": "Amomum", "link": "https://stackoverflow.com/users/1823524/amomum"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1505256930, "post_id": 46185868, "comment_id": 79335670, "body": "@AnttiHaapala I think I used g++ to compile that bit, so it&#39;s actually a C++ warning."}, {"owner": {"reputation": 5417, "user_id": 1823524, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/uScxd.jpg?s=128&g=1", "display_name": "Amomum", "link": "https://stackoverflow.com/users/1823524/amomum"}, "reply_to_user": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1505257048, "post_id": 46185868, "comment_id": 79335702, "body": "@HansPassant can you please make your comment an answer so I can accept it?"}, {"owner": {"reputation": 5417, "user_id": 1823524, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/uScxd.jpg?s=128&g=1", "display_name": "Amomum", "link": "https://stackoverflow.com/users/1823524/amomum"}, "reply_to_user": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1505337398, "post_id": 46185868, "comment_id": 79377304, "body": "@HansPassant interestingly enough, report that I mentioned, is dated year 2000."}], "answers": [{"tags": [], "owner": {"reputation": 7672, "user_id": 4999991, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/y69di.png?s=128&g=1", "display_name": "Foad", "link": "https://stackoverflow.com/users/4999991/foad"}, "is_accepted": false, "score": 1, "last_activity_date": 1554495920, "creation_date": 1554495920, "answer_id": 55542872, "question_id": 46185868, "link": "https://stackoverflow.com/questions/46185868/why-nist-rs274ngc-g-code-interpreter-uses-this-code-style/55542872#55542872", "title": "Why NIST RS274NGC G-Code Interpreter uses this code style?", "body": "<p>Well actually if you look at this from the computer science or mathematical point of view of its time, it makes sense. The \"C\" syntax is noways so mainstream that we don't even think about it. But back then <code>=</code> was equal, and it still is in mathematical context. Using <code>=</code> as the assignment operator is a bizarre and rather confusing choice. Novice programmers sometimes confuse it with the mathematical equal. In contrast, R uses <code>&lt;-</code> or <code>-&gt;</code>, Maxima and Modelica use <code>:=</code>, which are all languages designed by mathematicians. <code>and</code>, <code>or</code>, <code>not</code> and <code>is</code> are also pretty good choices, which are for example used in Python. From programing point of view using pre-processing macros in this way is horrible idea, but if you think about the rationale, it is actually <code>C</code> to be blamed.</p>\n"}, {"comments": [{"owner": {"reputation": 5417, "user_id": 1823524, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/uScxd.jpg?s=128&g=1", "display_name": "Amomum", "link": "https://stackoverflow.com/users/1823524/amomum"}, "edited": false, "score": 0, "creation_date": 1575112821, "post_id": 59113604, "comment_id": 104461552, "body": "I just wasn&#39;t expecting such an old piece of code from the document dated &#39;Aug. 17, 2000&#39; :) And I usually enable <code>-Wall -Wextra -Wpedantic</code>."}, {"owner": {"reputation": 945, "user_id": 382458, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6a1abc11b3d1e432758d39dfd7c69a20?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/382458/mark"}, "reply_to_user": {"reputation": 5417, "user_id": 1823524, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/uScxd.jpg?s=128&g=1", "display_name": "Amomum", "link": "https://stackoverflow.com/users/1823524/amomum"}, "edited": false, "score": 0, "creation_date": 1577899153, "post_id": 59113604, "comment_id": 105277568, "body": "Ah, yeah. I&#39;ve seen some other code from NIST that also used dated techniques. Staying up-to-date on best practices doesn&#39;t seem to be a priority."}], "tags": [], "owner": {"reputation": 945, "user_id": 382458, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6a1abc11b3d1e432758d39dfd7c69a20?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/382458/mark"}, "is_accepted": true, "score": 2, "last_activity_date": 1575093203, "last_edit_date": 1592644375, "creation_date": 1575093203, "answer_id": 59113604, "question_id": 46185868, "link": "https://stackoverflow.com/questions/46185868/why-nist-rs274ngc-g-code-interpreter-uses-this-code-style/59113604#59113604", "title": "Why NIST RS274NGC G-Code Interpreter uses this code style?", "body": "<p>As Hans and Foad point out, this was the norm back then. It's referred to as <code>K&amp;R C</code>, after the inventors of the language, Brian Kernighan and Dennis Ritchie. (Note that K&amp;R C can also refer to a formatting style they popularized while writing the first book about the language.)</p>\n<p>K&amp;R C was quite forgiving of things that a compiler in C99 or C11 mode would treat as UB (undefined behavior) or a flat-out syntax error, such as defining a function taking args without specifying the types of the args. Back then, such a function was assumed to take int args.</p>\n<p>IIRC the first major overhaul of the language was ANSI C '89; computer power, compilers, and the popularity of the language had changed drastically between its invention and that standardization.</p>\n<p>If antiquated C interests you, you may wish to look at the source of the Bourne shell. Quoting Wikipedia's <a href=\"https://en.wikipedia.org/wiki/Bourne_shell#Features_of_the_original_version\" rel=\"nofollow noreferrer\">Bourne Shell</a> article:</p>\n<blockquote>\n<p>Stephen Bourne's coding style was influenced by his experience with the ALGOL 68C compiler ...</p>\n<p>... Bourne took advantage of some macros to give the C source code an ALGOL 68 flavor. These macros (along with the finger command distributed in Unix version 4.2BSD) inspired the IOCCC \u2013 International Obfuscated C Code Contest.</p>\n</blockquote>\n<p>An actual example of the code can be found on <a href=\"https://research.swtch.com/shmacro\" rel=\"nofollow noreferrer\">rsc's site</a>, and (what I assume is) complete source can be found <a href=\"https://minnie.tuhs.org/cgi-bin/utree.pl?file=V7/usr/src/cmd/sh\" rel=\"nofollow noreferrer\">here</a>.</p>\n<hr />\n<p>By the way, if you think the number of warnings you got is a lot, you should try turning on additional warnings. There are plenty that are reliable and useful but aren't on by default, though I don't have an up-to-date list of them. <code>-Wall</code> <code>-Wextra</code> would be a decent start.</p>\n"}], "owner": {"reputation": 5417, "user_id": 1823524, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/uScxd.jpg?s=128&g=1", "display_name": "Amomum", "link": "https://stackoverflow.com/users/1823524/amomum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 507, "favorite_count": 0, "accepted_answer_id": 59113604, "answer_count": 2, "score": 1, "last_activity_date": 1575093203, "creation_date": 1505253170, "last_edit_date": 1592644375, "question_id": 46185868, "link": "https://stackoverflow.com/questions/46185868/why-nist-rs274ngc-g-code-interpreter-uses-this-code-style", "title": "Why NIST RS274NGC G-Code Interpreter uses this code style?", "body": "<p>I just compiled <a href=\"http://ws680.nist.gov/publication/get_pdf.cfm?pub_id=823374\" rel=\"nofollow noreferrer\">NIST RS274NGC G-Code Interpreter </a> and saw unbelievable 890 warnings from gcc.</p>\n<p>200 of them were caused by this array:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>char * _rs274ngc_errors[] = {\n/*   0 */ &quot;No error&quot;,\n/*   1 */ &quot;No error&quot;,\n/*   2 */ &quot;No error&quot;,\n/*   3 */ &quot;No error&quot;,\n/*   4 */ &quot;A file is already open&quot;, // rs274ngc_open\n&lt;...&gt;\n</code></pre>\n<p>which, according to my basic understanding, should be <code>const char *</code>.</p>\n<p>Then I saw these macros (they actually appear several times in different .cc files):</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>#define AND              &amp;&amp;\n#define IS               ==\n#define ISNT             !=\n#define MAX(x, y)        ((x) &gt; (y) ? (x) : (y))\n#define NOT              !\n#define OR               ||\n#define SET_TO           =\n</code></pre>\n<p>Then I saw a lot of warnings <code>suggest braces around empty body in an 'else' statement [-Wempty-body]</code> caused by really strange control flow altering macros like this (yes, with dangling else!):</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>#define PRINT0(control) if (1)                        \\\n          {fprintf(_outfile, &quot;%5d \\n&quot;, _line_number++); \\\n           print_nc_line_number();                    \\\n           fprintf(_outfile, control);                \\\n          } else\n</code></pre>\n<p>Report suggests that</p>\n<blockquote>\n<p>A.5 Interpreter Bugs</p>\n<p>The Interpreter has no known bugs</p>\n</blockquote>\n<p>All of that makes me wonder - why is it written so <em>strangely</em>? I can understand macros like PRINT0 - error handling in C can be a real pain - but why would anyone use <code>SET_TO</code> instead of <code>=</code>?</p>\n<p>I can believe that all this code was generated but couldn't it be generated in warning-free way?</p>\n<p>I'm not an expert in any way, I'm just really curious.</p>\n"}, {"tags": ["c", "gcc", "assembly"], "comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 2, "creation_date": 1505252773, "post_id": 46185788, "comment_id": 79334429, "body": "The operands are the wrong way round. Also, why are you writing inline assembly?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1505253036, "post_id": 46185788, "comment_id": 79334532, "body": "See <a href=\"http://x86asm.net/articles/working-with-big-numbers-using-x86-instructions/\" rel=\"nofollow noreferrer\">Working with Big Numbers Using x86 Instructions</a>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1505253298, "post_id": 46185788, "comment_id": 79334645, "body": "Minor points: <code>#include &lt;what??&gt;</code>, and <code>int main()</code> is returning <code>uint64_t</code>."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1505254427, "post_id": 46185788, "comment_id": 79335009, "body": "@WeatherVane: returning an <code>uint64_t</code> is not a problem, it gets implicitly converted to <code>int</code> on return, so, as long as it doesn&#39;t overflow the range of <code>int</code> it&#39;s all fine."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1505255228, "post_id": 46185788, "comment_id": 79335232, "body": "@MatteoItalia yes all is fine unless... I now regret pointing out a problem which you say isn&#39;t a problem. Unless it overflows the range of <code>int</code>."}, {"owner": {"reputation": 5355, "user_id": 377022, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/c11c7cc23517cf5f043b51fc7914049a?s=128&d=identicon&r=PG", "display_name": "Jason Gross", "link": "https://stackoverflow.com/users/377022/jason-gross"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1505257515, "post_id": 46185788, "comment_id": 79335803, "body": "@WeatherVane Ah, apparently you can&#39;t use <code>#include</code> in a <code>&lt;pre&gt;</code> block (without mangling code?), because it&#39;ll treat the library as an html tag"}, {"owner": {"reputation": 5355, "user_id": 377022, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/c11c7cc23517cf5f043b51fc7914049a?s=128&d=identicon&r=PG", "display_name": "Jason Gross", "link": "https://stackoverflow.com/users/377022/jason-gross"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1505257578, "post_id": 46185788, "comment_id": 79335816, "body": "@fuz The inputs are not the wrong way around; I&#39;ve passed <code>-masm=intel</code>.  I&#39;ve updated the question title to make this more clear."}, {"owner": {"reputation": 5355, "user_id": 377022, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/c11c7cc23517cf5f043b51fc7914049a?s=128&d=identicon&r=PG", "display_name": "Jason Gross", "link": "https://stackoverflow.com/users/377022/jason-gross"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1505258543, "post_id": 46185788, "comment_id": 79336039, "body": "And, @fuz, I&#39;m writing inline assembly because I&#39;m working on a straight-line optimizing C compiler specifically for low-level cryptographic primitives, and the our current benchmarking framework drops in the parts of the crypto operations that we haven&#39;t synthesized yet from curve25519-donna by agl, in C.  gcc isn&#39;t good enough to get the performance we&#39;re aiming to match.  (It&#39;s also really bad at handling carry bits from <code>_addcarryx_u64</code> and co.)"}], "answers": [{"comments": [{"owner": {"reputation": 5355, "user_id": 377022, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/c11c7cc23517cf5f043b51fc7914049a?s=128&d=identicon&r=PG", "display_name": "Jason Gross", "link": "https://stackoverflow.com/users/377022/jason-gross"}, "edited": false, "score": 0, "creation_date": 1505258322, "post_id": 46185989, "comment_id": 79335979, "body": "The documentation you link says, of <code>-masm</code>, &quot;Also affects which dialect is used for basic asm (see Basic Asm) and extended asm (see Extended Asm).&quot;.  In any case, swapping the order only works if I drop <code>-masm=intel</code>, which I can&#39;t do unless it&#39;s possible to refer to literal registers in AT&amp;T syntax, which I haven&#39;t figured out how to do yet (see <a href=\"https://stackoverflow.com/questions/46186592/how-do-i-refer-to-literal-registers-in-gcc-inline-assembly-in-att-syntax\" title=\"how do i refer to literal registers in gcc inline assembly in att syntax\">stackoverflow.com/questions/46186592/&hellip;</a>).  I&#39;ve updated the question title here to explicitly ask about Intel syntax."}, {"owner": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "reply_to_user": {"reputation": 5355, "user_id": 377022, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/c11c7cc23517cf5f043b51fc7914049a?s=128&d=identicon&r=PG", "display_name": "Jason Gross", "link": "https://stackoverflow.com/users/377022/jason-gross"}, "edited": false, "score": 0, "creation_date": 1505259071, "post_id": 46185989, "comment_id": 79336169, "body": "@JasonGross: seem to be right ; I&#39;ve updated my answer. Personally, I&#39;d like to advise not to use Intel syntax to avoid confusion."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 5355, "user_id": 377022, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/c11c7cc23517cf5f043b51fc7914049a?s=128&d=identicon&r=PG", "display_name": "Jason Gross", "link": "https://stackoverflow.com/users/377022/jason-gross"}, "edited": false, "score": 2, "creation_date": 1505260577, "post_id": 46185989, "comment_id": 79336538, "body": "Yup, it&#39;s usually a bad plan to use <code>-masm=intel</code> with inline-asm, but it works if you&#39;re consistent.  If you do write your asm for it, then you have to require it.  @JasonGross: You can write <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html#Multiple-assembler-dialects-in-asm-templates\" rel=\"nofollow noreferrer\">alternatives</a> for ATT/Intel, like <code>asm(&quot;{shr $4,%[v] | shr %[v], 4}\\n&quot; : ...);</code> so your inline-asm works both ways, but that just gets into a huge mess and isn&#39;t worth it unless you&#39;re writing something for a header file to be used in multiple projects. (And then, <a href=\"https://gcc.gnu.org/wiki/DontUseInlineAsm\" rel=\"nofollow noreferrer\">gcc.gnu.org/wiki/DontUseInlineAsm</a>)"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1505262729, "post_id": 46185989, "comment_id": 79336943, "body": "Added an answer with that, and showing how to have the shift-count come from a C variable as an immediate or <code>cl</code>."}], "tags": [], "owner": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "is_accepted": true, "score": 6, "last_activity_date": 1505259013, "last_edit_date": 1505259013, "creation_date": 1505253870, "answer_id": 46185989, "question_id": 46185788, "link": "https://stackoverflow.com/questions/46185788/how-can-i-pass-an-immediate-value-to-shr-in-assembly-in-intel-syntax/46185989#46185989", "title": "How can I pass an immediate value to shr in assembly in Intel syntax?", "body": "<p>You're using guides with <em>Intel</em> assembly syntax. GNU assembly (GAS) uses <em>AT&amp;T</em> syntax which has inverse order of operands. Changing their order seem to be doing fine:</p>\n\n<pre><code>uint64_t v = 0xffff;\nasm (\"shr $0x04, %[v]\\n\"\n   : [v] \"+r\" (v)\n   :\n   : \"cc\"\n   );\nprintf(\"%llx\", v);        // 0xfff\n</code></pre>\n\n<p>(you can also replace <code>shr</code> with <code>shrq</code> to make usage of 64-bit operand explicit)</p>\n\n<p>If you still want to use Intel syntax as you do with <code>-masm=intel</code>, you have to drop dollar sign from immediate value:</p>\n\n<pre><code>asm (\"shr %[v], 4\\n\"\n     ...)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": false, "score": 2, "last_activity_date": 1505262695, "creation_date": 1505262695, "answer_id": 46187097, "question_id": 46185788, "link": "https://stackoverflow.com/questions/46185788/how-can-i-pass-an-immediate-value-to-shr-in-assembly-in-intel-syntax/46187097#46187097", "title": "How can I pass an immediate value to shr in assembly in Intel syntax?", "body": "<p>If you use <code>-masm=intel</code>, it activates <code>.intel_syntax noprefix</code>.  Immediates no longer take <code>$</code> prefixes.  (But for addresses, you need <code>OFFSET symbol</code>).  Anyway, don't use the <code>$</code>.</p>\n\n<p>Obviously if you <em>just</em> wanted a shift, you should do it with C instead of inline asm <a href=\"https://gcc.gnu.org/wiki/DontUseInlineAsm\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/wiki/DontUseInlineAsm</a>.  (You can mask the shift count to avoid UB with shift counts that are too high, like for rotates: <a href=\"https://stackoverflow.com/questions/776508/best-practices-for-circular-shift-rotate-operations-in-c\">Best practices for circular shift (rotate) operations in C++</a>)</p>\n\n<hr>\n\n<p>But if you want to use it as part of something that needs to be inline asm, then you can do it this way to allow the rotate count to be a variable (in <code>cl</code>) or constant (immediate) from C.  I used a <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Machine-Constraints.html\" rel=\"nofollow noreferrer\"><code>\"cJ\"</code> constraint</a> to allow a <code>0-63</code> immediate operand (<code>J</code>), or a register operand in <code>rcx/ecx/cx/cl</code> (<code>c</code> constraint).  (specifically in <code>cl</code>, because I cast to <code>(uint8_t)</code>.</p>\n\n<p>Also, I used a <code>b</code> modifier to override the size, in case you wanted to use the whole <code>rcx</code> as a named input for something else before you get to the shift.  (See <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html\" rel=\"nofollow noreferrer\">6.45.2.8 x86 Operand Modifiers in the gcc docs</a>).</p>\n\n<p>See also the <a href=\"/questions/tagged/inline-assembly\" class=\"post-tag\" title=\"show questions tagged &#39;inline-assembly&#39;\" rel=\"tag\">inline-assembly</a> tag wiki for some guides.</p>\n\n<p>I used <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html#Multiple-assembler-dialects-in-asm-templates\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html#Multiple-assembler-dialects-in-asm-templates</a> to let this compile and assemble correctly with AT&amp;T or Intel syntax mode.</p>\n\n<p>On the <a href=\"https://gcc.godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(j:1,source:&#39;%23include+%3Cstdint.h%3E%0A%0A//+can+use+SHRX+with+BMI2+available.++And+can+optimize+much+better%0Auint64_t+shr_variable_purec(uint64_t+v,+unsigned+c)+%7B%0A++++//c+%26%3D+63%3B++//+optional,+compiles+to+zero+instructions+on+x86+because+shr+and+shrx+already+do+this.%0A++++return+v+%3E%3E+c%3B%0A%7D%0A%0A%0Astatic+inline+uint64_t+shr+(uint64_t+v,+unsigned+c)%0A%7B%0A++++//+%25b%5Bc%5D+is+cl+even+if+%25%5Bc%5D+is+ecx+or+whatever.%0A++++asm+(%22shr++%7B%25b%5Bc%5D,%25%5Bv%5D+%7C+%25%5Bv%5D,%25b%5Bc%5D%7D%22%0A+++++++++:+%5Bv%5D+%22%2Br%22+(v)+%0A+++++++++:+%5Bc%5D+%22cJ%22+((uint8_t)c))%3B++//+the+cast+gets+this+to+use+cl%0A++++return+v%3B%0A%7D%0Auint64_t+shr_variable(uint64_t+v,+int+c)+%7B%0A++++return+shr(v,+c)%3B%0A%7D%0A%0Auint64_t+shr_const(uint64_t+v)+%7B%0A++++return+shr(v,+13)%3B%0A%7D%0A%0A%0A&#39;),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;C%2B%2B+source+%231&#39;,t:&#39;0&#39;)),k:44.568868980963046,l:&#39;4&#39;,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;),(g:!((g:!((h:compiler,i:(compiler:g72,filters:(b:&#39;0&#39;,commentOnly:&#39;0&#39;,directives:&#39;0&#39;,intel:&#39;0&#39;),options:&#39;-xc+-std%3Dgnu11+-O3+-march%3Dhaswell&#39;,source:1),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;x86-64+gcc+7.2+(Editor+%231,+Compiler+%231)&#39;,t:&#39;0&#39;)),k:44.68896831906139,l:&#39;4&#39;,m:44.23578508085551,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;),(g:!((h:compiler,i:(compiler:clang500,filters:(b:&#39;0&#39;,commentOnly:&#39;0&#39;,directives:&#39;0&#39;),options:&#39;-xc+-std%3Dgnu11+-O3+-march%3Dhaswell&#39;,source:1),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;x86-64+clang+5.0.0+(Editor+%231,+Compiler+%232)&#39;,t:&#39;0&#39;)),header:(),l:&#39;4&#39;,m:40.27996762452276,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;),(g:!((h:output,i:(compiler:2,editor:1),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;%232+with+x86-64+clang+5.0.0&#39;,t:&#39;0&#39;)),l:&#39;4&#39;,m:15.484247294621733,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;)),k:55.43113101903696,l:&#39;3&#39;,n:&#39;0&#39;,o:&#39;&#39;,t:&#39;0&#39;)),l:&#39;2&#39;,n:&#39;0&#39;,o:&#39;&#39;,t:&#39;0&#39;)),version:4\" rel=\"nofollow noreferrer\">Godbolt compiler explorer</a>, you can see this works with gcc, but clang doesn't work correctly with <code>-masm=intel</code> for inline-asm.  It still substitutes in <code>%rdi</code> instead of <code>rdi</code> and fails to assemble.</p>\n\n<pre><code>static inline uint64_t shr (uint64_t v, unsigned c)\n{\n    // %b[c] is cl even if %[c] is ecx or whatever.\n    asm (\"shr  {%b[c],%[v] | %[v],%b[c]}\"\n         : [v] \"+r\" (v) \n         : [c] \"cJ\" ((uint8_t)c));  // the cast gets this to use cl\n    return v;\n}\n\nuint64_t shr_variable(uint64_t v, int c) {\n    return shr(v, c);\n}\n\n    mov     rax, rdi\n    mov     ecx, esi\n    shr   rax,cl\n    ret\n\n\nuint64_t shr_const(uint64_t v) {\n    return shr(v, 13);\n}\n\n    mov     rax, rdi\n    shr   rax,13\n    ret\n</code></pre>\n\n<p>Compare this with pure C, with <code>-march=haswell</code>:</p>\n\n<pre><code>// can use SHRX with BMI2 available.  And can optimize much better\nuint64_t shr_variable_purec(uint64_t v, unsigned c) {\n    //c &amp;= 63;  // optional, compiles to zero instructions on x86 because shr and shrx already do this.\n    return v &gt;&gt; c;\n}\n\n    shrx    rax, rdi, rsi\n    ret\n</code></pre>\n"}], "owner": {"reputation": 5355, "user_id": 377022, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/c11c7cc23517cf5f043b51fc7914049a?s=128&d=identicon&r=PG", "display_name": "Jason Gross", "link": "https://stackoverflow.com/users/377022/jason-gross"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1095, "favorite_count": 0, "accepted_answer_id": 46185989, "answer_count": 2, "score": 2, "last_activity_date": 1505262695, "creation_date": 1505252679, "last_edit_date": 1505257456, "question_id": 46185788, "link": "https://stackoverflow.com/questions/46185788/how-can-i-pass-an-immediate-value-to-shr-in-assembly-in-intel-syntax", "title": "How can I pass an immediate value to shr in assembly in Intel syntax?", "body": "<p>According to both <a href=\"http://www.felixcloutier.com/x86/SAL:SAR:SHL:SHR.html\" rel=\"nofollow noreferrer\">this reference</a> and <a href=\"http://agner.org/optimize/instruction_tables.pdf\" rel=\"nofollow noreferrer\">this reference</a>, the <code>shr</code> instruction supports shifting by either <code>1</code>, by the <code>CL</code> registers, and by an immediate value.  However, I cannot seem to get the immediate value to work; when I have this code:</p>\n\n<pre><code>#include &lt;stdint.h&gt;\n\nint main() {\n  uint64_t v = 15;\n  asm (\"shr %[v], $0x04\\t\\n\"\n       : [v] \"+r\" (v)\n       :\n       : \"cc\"\n       );\n  return v;\n}\n</code></pre>\n\n<p>I get this error message:</p>\n\n<pre>\n$ gcc -masm=intel foo.c\nfoo.c: Assembler messages:\nfoo.c:5: Error: operand size mismatch for `shr'\n</pre>\n\n<p>How can I pass an immediate value to <code>shr</code> (without loading it into <code>CL</code>, which I care about because I'm optimizing for the register pressure bottleneck).</p>\n"}, {"tags": ["c", "types", "casting", "bit-manipulation"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1505250922, "post_id": 46185410, "comment_id": 79333699, "body": "It looks like was taken from somewhere in the middle of an actual question..."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1505251076, "post_id": 46185410, "comment_id": 79333755, "body": "So what is your problem? Wht did you find out? What is <b>specifically</b> unclear? Why don&#39;t you use standard fixed-width types? What is your platform? What does your implemention specify for conversion unsigned to signed?"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1505251428, "post_id": 46185410, "comment_id": 79333869, "body": "signed shifts are: right - implementation defined, left - UB. So the guy who wrote it just made sure to have bitwise left shift."}, {"owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1505251518, "post_id": 46185410, "comment_id": 79333909, "body": "Actually left-shifting is only UB when the first operand is negative. @PeterJ_01"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "edited": false, "score": 0, "creation_date": 1505252076, "post_id": 46185410, "comment_id": 79334146, "body": "@alain so in general it is if you do not check the sign of the shifted object."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1505255317, "post_id": 46185410, "comment_id": 79335257, "body": "@PeterJ_01: signed left shifts are not UB in general. And right shifts are not implementation defined in general either. If you can ensure the value is not too large, there is no problem at all."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1505256009, "post_id": 46185410, "comment_id": 79335438, "body": "@Olaf bravo :). In general if one does not check for sign of the object, then cant safely use shift operands. And that is the reason of the cast to the unsigned. Context of the answer matters my friend. Otherwise any comment is just a nitpick"}, {"owner": {"reputation": 1, "user_id": 8599964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bde3a55fea912ed2763fc970a8fd8c1?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas J", "link": "https://stackoverflow.com/users/8599964/thomas-j"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1505306078, "post_id": 46185410, "comment_id": 79357779, "body": "@Olaf, This is an embedded system. I don&#39;t know what the conversion from unsigned to signed should be. I&#39;ve inherited this code, and I&#39;m trying to understand why this is being done."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1505306324, "post_id": 46185410, "comment_id": 79357945, "body": "@ThomasJ: As the phrase implies, <i>implementation dfined behaviour</i> has to be defined by the implementation. Read the documentation of your tool chain. If they don&#39;t, they are not compliant and you should cget a guarantee from the vendor if that is commercial. gcc for instance <b>does</b> have a page for this."}, {"owner": {"reputation": 1, "user_id": 8599964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bde3a55fea912ed2763fc970a8fd8c1?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas J", "link": "https://stackoverflow.com/users/8599964/thomas-j"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1505306342, "post_id": 46185410, "comment_id": 79357963, "body": "@PeterJ_01, So, going from signed to unsigned, I understand you lose your sign bit. I&#39;m not sure I understand why that would work when you don&#39;t know if the value is positive or negative, which goes back to the question, of why you want to bitshift."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1505306726, "post_id": 46185410, "comment_id": 79358280, "body": "@ThomasJ: No, you don&#39;t &quot;loose&quot; the sign-bit. The value is just converted. This is well defined by the standard and effectively behaves like re-interpreting a two&#39;s complement representation of the signed value as an unsigned value. Truncation is implementation if both have the same width. On 2&#39;s complement architectures this will not require any additional instructions."}, {"owner": {"reputation": 1, "user_id": 8599964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bde3a55fea912ed2763fc970a8fd8c1?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas J", "link": "https://stackoverflow.com/users/8599964/thomas-j"}, "edited": false, "score": 0, "creation_date": 1505308400, "post_id": 46185410, "comment_id": 79359608, "body": "Added some clarification, hopefully my question is more clear now."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1505310334, "post_id": 46185410, "comment_id": 79361106, "body": "<code>((sint32) (((sint32) negativeLimitValue) &lt;&lt; 9))))</code> The casts just don&#39;t make  sense. The code looks strange; why don&#39;t you just multiply with <code>1&lt;&lt;9</code>? Leave optimisations to the compiler. That way it is guaranteed to maintain the sign. You did not clarify anything. Ask the author this site is not for speculating about every &quot;strange&quot; (to not be offending to the author) code. Is that even C code?? <code>Boolean</code>??"}, {"owner": {"reputation": 1, "user_id": 8599964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bde3a55fea912ed2763fc970a8fd8c1?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas J", "link": "https://stackoverflow.com/users/8599964/thomas-j"}, "edited": false, "score": 0, "creation_date": 1505318772, "post_id": 46185410, "comment_id": 79367244, "body": "I don&#39;t know who the author is. Yes, it is c, I&#39;ve given you as much information as I have. I don&#39;t even know who the original author of the code is, and the people I work with that I have asked, so far don&#39;t know why it&#39;s done either. Lastly, I assumed it was a basic embedded code trick. I had no way of knowing before posting that there was anything strange about the code."}], "owner": {"reputation": 1, "user_id": 8599964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bde3a55fea912ed2763fc970a8fd8c1?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas J", "link": "https://stackoverflow.com/users/8599964/thomas-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 150, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1505540394, "creation_date": 1505250858, "last_edit_date": 1505309115, "question_id": 46185410, "link": "https://stackoverflow.com/questions/46185410/left-shift-and-cast-to-unsigned-back-to-signed", "title": "Left shift and cast to unsigned back to signed", "body": "<p>Can somebody explain why you would want to do the below? For sake of argument ErrorAssignment is also of type sint32</p>\n\n<p><strong>Question:</strong></p>\n\n<p><strong>What is the purpose of casting to unsigned, doing a left bitshift and then casting back to a signed datatype?</strong></p>\n\n<ul>\n<li><p>sint32 is a signed 32 bit integer</p></li>\n<li><p>uint32 is an unsigned 32 bit integer </p></li>\n</ul>\n\n<hr>\n\n<pre><code>ErrorAssignment = ((sint32) (( (uint32) DemandError) &lt;&lt; 9))\n</code></pre>\n\n<p><strong>Edit 1: The above actually comes from a comparison that ultimately becomes a truth value. See the below code for a more complete description</strong></p>\n\n<pre><code>sint32 valueOutCompare;\nuint8  aCompareValue;\nBoolean isValueTrue;\nsint32 positiveLimitValue = 50;\nsint32 negativeLimitValue = -50;\n\nisValueTrue = ( (valueOutCompare &gt; ((sint32) (((uint32)positiveLimitValue&lt;&lt; 9)))\n                 ||     ((valueOutCompare  &lt; ((sint32) (((sint32) negativeLimitValue) &lt;&lt; 9)))) );\n</code></pre>\n"}, {"tags": ["c", "string", "undefined-behavior"], "comments": [{"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 2, "creation_date": 1505250500, "post_id": 46185247, "comment_id": 79333518, "body": "sounds like your string isn&#39;t <code>NUL</code> terminated. Try changing to <code>char myString[72] = { 0 };</code> This will initialize all members of the array to 0 (the <code>NUL</code> string terminator in <code>c</code>),, and assuming your functions are working correctly and not overwriting the bounds of the array minus 1, there should be at least one 0 left in the array. <code>printf</code> will keep on printing until it finds a <code>\\0</code>."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 2, "creation_date": 1505250562, "post_id": 46185247, "comment_id": 79333548, "body": "NUL terminator missing, at a guess.  Nearly always is."}, {"owner": {"reputation": 85, "user_id": 8444745, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VhSczASwonA/AAAAAAAAAAI/AAAAAAAAAz0/3SFQ4_fi4bM/photo.jpg?sz=128", "display_name": "blabla444", "link": "https://stackoverflow.com/users/8444745/blabla444"}, "edited": false, "score": 0, "creation_date": 1505250585, "post_id": 46185247, "comment_id": 79333561, "body": "Thankyou SO much guys it works!"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1505251636, "post_id": 46185247, "comment_id": 79333967, "body": "One real suggestion: why are you trying to do string-intensive operations with the one popular language least suited to the job, if not to torture yourself?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1505252676, "post_id": 46185247, "comment_id": 79334392, "body": "Note <code>s</code> servess no useful purpose in the format.   Suggest <code>scanf(&quot;%71[^\\n]&quot;, myString);</code>  Add width, drop s"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1505253006, "post_id": 46185247, "comment_id": 79334522, "body": "The <code>char myString[72] = { 0 };</code> idea will work for output that is 71 characters or less.  Yet long input could cause the output to attempt to form a string exceeding 71+1 (for the null character).  Pre-filling an array with zero is not fundamentally addressing the issue of appending a null character and insuring that the array is not overrun."}], "owner": {"reputation": 85, "user_id": 8444745, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VhSczASwonA/AAAAAAAAAAI/AAAAAAAAAz0/3SFQ4_fi4bM/photo.jpg?sz=128", "display_name": "blabla444", "link": "https://stackoverflow.com/users/8444745/blabla444"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 116, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1505250197, "creation_date": 1505250026, "last_edit_date": 1505250197, "question_id": 46185247, "link": "https://stackoverflow.com/questions/46185247/strange-string-output", "title": "Strange string output", "body": "<p>I am learning C and I don't understand the output I get when printing the string myString after the calls to functions ayInFrontOfConsonant() and replaceChars(). The goal of this stage of the exercise is that the user can input a string. The string should then be printed like this: all lower case vowels should be replaced with the letter 'a' and in front of each word that starts with a consonant the letter \"ay\" should be added. When I enter the string \"I like writing C code\" the output should be: \"I aylaka aywrating ayC aycada\". I am getting this output however at the end of this string I am getting some strange symbols. It is like it is the 72 characters of the string and some of these characters are random in memory. </p>\n\n<p>I would really appreciate any help you can provide.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\nvoid insertChar(char *str, char aChar, int index)\n{\n    int i=0;\n    for(i=strlen(str);i&gt;=index;i--)          //sizeof of strlen???\n    {\n        str[i]=str[i-1];\n    }\n    str[index]=aChar;\n}\n\n\nvoid ayInFrontOfConsonant(char *str)\n{\n    char *consonants=\"bcdfghjklmnpqrstvwxyzBCDFGHJKLMNPQRSTVWXYZ\";\n    int i=0,j=0;\n    for ( i = 0;i&lt;strlen(str) ; i++)                 \n    {\n        for ( j = 0; j &lt; strlen(consonants); j++)\n        {\n            if (str[i] == consonants[j] &amp;&amp; i==0)       \n            {\n                insertChar(str, 'y', i);\n                insertChar(str,'a',i);\n                break;\n            }\n            else if(i!=0 &amp;&amp; str[i-1]==' ' &amp;&amp; str[i] == consonants[j])    \n            {\n                printf(\"i=%d\\n\",i);\n                insertChar(str, 'y', i);\n                insertChar(str,'a',i);\n                break;\n            }\n        }\n    }\n}\n\nint replaceChars(char str[], char sChar[], char rChar)\n{\n    int cnt=0,i=0,j=0;\n    for(i=0;i&lt;strlen(str);i++)\n    {\n        for(j=0;j&lt;strlen(sChar);j++)\n        {\n            if(str[i]==sChar[j])\n            {\n                str[i]=rChar;\n                cnt++;\n            }\n        }\n    }\n    return cnt;\n}\n\n\nint main()\n{\n    printf(\"** Welcome to the Double Dutch game **\\n\");\n    char myString[72];\n    printf(\"Please enter a string: \");\n    scanf(\"%[^\\n]s\", myString);\n    replaceChars(myString, \"eiou\", 'a');\n    ayInFrontOfConsonant(myString);\n    printf(\"Double dutch traslation: %s\\n\",myString);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "ubuntu"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1505248366, "post_id": 46184858, "comment_id": 79332516, "body": "Your program is not doing anything, so this variable is probably optimized away."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1505248532, "post_id": 46184858, "comment_id": 79332599, "body": "You pose the question as if the sizes of the various segments are fully determined by the source code alone.  In fact, the compiler and (especially) linker have a great deal of latitude in this area."}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1505248750, "post_id": 46184858, "comment_id": 79332678, "body": "What compiler flags did you use? And what does <code>objdump -x a.out</code> say?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1505249001, "post_id": 46184858, "comment_id": 79332809, "body": "<code>main()</code> - that&#39;s not valid C since 18 years. Get a more recent book. And ask your teacher for help with your homework."}, {"owner": {"reputation": 3954, "user_id": 3137388, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/98f780bca09821cbd63d84b8d6e028df?s=128&d=identicon&r=PG&f=1", "display_name": "kadina", "link": "https://stackoverflow.com/users/3137388/kadina"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1505249249, "post_id": 46184858, "comment_id": 79332923, "body": "@Olaf : This is not homework. I am trying to see the sizes for different variables. I hope just main() is fine for testing."}, {"owner": {"reputation": 491, "user_id": 8509272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/487ff5fe4697aeb326fa5092ef38f116?s=128&d=identicon&r=PG&f=1", "display_name": "savram", "link": "https://stackoverflow.com/users/8509272/savram"}, "edited": false, "score": 1, "creation_date": 1505249501, "post_id": 46184858, "comment_id": 79333035, "body": "Your question doesn&#39;t have a definite answer, it&#39;s just the way the compiler works. Different compilers could give you different results. On your first example, the compiler decided to give BSS 8 bytes because reasons. On the second, it allocates the variable on the data segment and gives BSS 4 bytes. Maybe it has a thing for the BSS segment? You know what I would do...put those programs on a debugger and break on the BSS segment."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1505249556, "post_id": 46184858, "comment_id": 79333062, "body": "@kadina: Undefined behaviour. Use a modern compiler with standard C (for gcc: <code>-std=c11</code> or <code>gnu11</code>), this should not compile cleanly Also follow <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>, you missed relevant information."}], "answers": [{"comments": [{"owner": {"reputation": 3954, "user_id": 3137388, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/98f780bca09821cbd63d84b8d6e028df?s=128&d=identicon&r=PG&f=1", "display_name": "kadina", "link": "https://stackoverflow.com/users/3137388/kadina"}, "edited": false, "score": 0, "creation_date": 1505267665, "post_id": 46186268, "comment_id": 79337999, "body": "Thanks SnickySnacks. I will stop by your desk tomorrow."}, {"owner": {"reputation": 1215, "user_id": 1380954, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0de0c23d97c75300e32f8494b1485fb8?s=128&d=identicon&r=PG", "display_name": "selfboot", "link": "https://stackoverflow.com/users/1380954/selfboot"}, "edited": false, "score": 0, "creation_date": 1552549853, "post_id": 46186268, "comment_id": 97053903, "body": "Where do you know that?  And why data + bss will always be divisible by 8."}, {"owner": {"reputation": 46, "user_id": 8600175, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213035180088686/picture?type=large", "display_name": "SnickySnacks", "link": "https://stackoverflow.com/users/8600175/snickysnacks"}, "edited": false, "score": 0, "creation_date": 1557874657, "post_id": 46186268, "comment_id": 98909952, "body": "Mostly just experimenting. Every other 4-byte variable you add in his example would increase bss by 8, which suggests that it allocates 8 bytes at a time.  0 variables: 544/8 1 initialized variable: 548/4 2 initialized variables: 552/8 2 initialized, 1 uninitialized variables: 552/8 2 initialized, 2 uninitialized variables: 552/16 2 initialized, 3 uninitialized variables: 552/16 2 initialized, 4 uninitialized variables: 552/24  etc."}], "tags": [], "owner": {"reputation": 46, "user_id": 8600175, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213035180088686/picture?type=large", "display_name": "SnickySnacks", "link": "https://stackoverflow.com/users/8600175/snickysnacks"}, "is_accepted": true, "score": 3, "last_activity_date": 1505255688, "creation_date": 1505255688, "answer_id": 46186268, "question_id": 46184858, "link": "https://stackoverflow.com/questions/46184858/why-bss-value-shown-by-size-command-doesnt-increase-even-after-adding-uninitial/46186268#46186268", "title": "why bss value shown by size command doesn&#39;t increase even after adding uninitialized global variable?", "body": "<p>this is your coworker. You left before I could tell you your answers.</p>\n\n<blockquote>\n  <p>1) Why bss is 8 bytes for first program even though there are no\n  uninitialized global or static variables?</p>\n</blockquote>\n\n<p>I don't have a clear answer for this. I suspect the compiler is using 4 bytes for something and because the data segment is already 69*8 = 552, it has to allocate a full 8 bytes for the bss. </p>\n\n<blockquote>\n  <p>2) Why bss is reduced to 4 bytes when I added initialized global\n  variable in second program?</p>\n</blockquote>\n\n<p>data + bss will always be divisible by 8. Because your program only needs 4 bytes for the variable, the compiler takes the unused bytes from bss into the data segment.</p>\n\n<blockquote>\n  <p>3) Why bss is showing 8 bytes for the third program? </p>\n</blockquote>\n\n<p>This goes back to 1 and 2, when you aren't initializing your variable it is getting put in bss. bss at this point has 2 (\"a\" + an internal compiler variable) variables in it. You can test this by adding additional uninitialized variables. Every other variable you add (starting with the first, if bss was 4) will increase bss by 8.</p>\n\n<blockquote>\n  <p>4) What are dec and hex in the output given by size command?</p>\n</blockquote>\n\n<p>data + text + bss = dec, same value in hex</p>\n\n<p>Hope this helps. \nSwing by my desk if you'd like to know more.</p>\n"}], "owner": {"reputation": 3954, "user_id": 3137388, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/98f780bca09821cbd63d84b8d6e028df?s=128&d=identicon&r=PG&f=1", "display_name": "kadina", "link": "https://stackoverflow.com/users/3137388/kadina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 216, "favorite_count": 2, "accepted_answer_id": 46186268, "answer_count": 1, "score": 2, "last_activity_date": 1505255688, "creation_date": 1505248229, "last_edit_date": 1505249325, "question_id": 46184858, "link": "https://stackoverflow.com/questions/46184858/why-bss-value-shown-by-size-command-doesnt-increase-even-after-adding-uninitial", "title": "why bss value shown by size command doesn&#39;t increase even after adding uninitialized global variable?", "body": "<p>I am using ubuntu 64 bit and I am trying to find the size of bss for various variables as below.</p>\n\n<p><strong>first program:</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\nmain()\n{\n}\n</code></pre>\n\n<p>size command is giving below result for the executable generated by above program.</p>\n\n<pre><code>text       data     bss     dec     hex filename\n1115        552       8    1675     68b a.out\n</code></pre>\n\n<p><strong>second program:</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint a = 10;\nmain()\n{\n}\n</code></pre>\n\n<p>size command is giving below result for the executable generated by above program.</p>\n\n<pre><code>text       data     bss     dec     hex filename\n1115        556       4    1675     68b a.out\n</code></pre>\n\n<p>third program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint a;\nmain()\n{\n}\n</code></pre>\n\n<p>size command is giving below result for the executable generated by above program.</p>\n\n<pre><code>text       data     bss     dec     hex filename\n1115        552       8    1675     68b a.out\n</code></pre>\n\n<p>Note:</p>\n\n<p>I haven't used any flags while compiling.</p>\n\n<p>could some one please clairfy below questions?</p>\n\n<pre><code>1) Why bss is 8 bytes for first program even though there are no uninitialized global or static variables?\n2) Why bss is reduced to 4 bytes when I added initialized global variable in second program?\n3) Why bss is showing 8 bytes for the third program?\n4) What are dec and hex in the output given by size command?\n</code></pre>\n"}, {"tags": ["c", "gcc", "struct"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1505246013, "post_id": 46184319, "comment_id": 79331503, "body": "There is no defaulting from other values. One of the fields in <code>mp_obj_type_t</code> is a pointer and it is initialized with a pointer value."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1505246149, "post_id": 46184319, "comment_id": 79331561, "body": "It&#39;s the same as: <code>void * p = &amp;p;</code>"}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1505246365, "post_id": 46184319, "comment_id": 79331658, "body": "@melpomene to be clear: you&#39;re saying the first statement <code>{&amp;mp_type_type}</code> is merely being assigned to the first member of the type <code>struct _mp_obj_type_t</code> ?"}, {"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1505246514, "post_id": 46184319, "comment_id": 79331726, "body": "What is the definition of the <code>struct _mp_obj_type_t</code> ? This appears to be creating a struct which contains a pointer to itself for some use. I am curious how this is being used and why there is this kind of pointer to self. I can&#39;t think of why this particular self referencing object would be useful but that is probably due to a lack of imagination on my part."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1505246516, "post_id": 46184319, "comment_id": 79331728, "body": "@Adrian Well, presumably the first member is another struct, hence the additional braces."}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "reply_to_user": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1505246653, "post_id": 46184319, "comment_id": 79331779, "body": "@RichardChambers I updated with definitions. Yes it all makes sense now."}, {"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1505247658, "post_id": 46184319, "comment_id": 79332231, "body": "Looks to me like they are doing a kind of object oriented, inheritance type of construct using C. So they begin with a base object shared by all objects and then this base object is extended to provide additional functionality. So this first <code>struct</code> member is a kind of virtual method table."}], "answers": [{"tags": [], "owner": {"reputation": 2991, "user_id": 3877787, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DPxhf.jpg?s=128&g=1", "display_name": "Zalman Stern", "link": "https://stackoverflow.com/users/3877787/zalman-stern"}, "is_accepted": false, "score": 0, "last_activity_date": 1505321510, "last_edit_date": 1505321510, "creation_date": 1505247126, "answer_id": 46184637, "question_id": 46184319, "link": "https://stackoverflow.com/questions/46184319/c-struct-initialization-done-recursively/46184637#46184637", "title": "C struct initialization done &quot;recursively&quot;", "body": "<p>Objects in this system (MicroPython) start with a pointer to their type. MicroPython Types are represented as objects of type mp_type_type. An mp_type_type is a type itself so its type field points to itself. (Concept is perhaps best illustrated in the Smalltalk literature. cf: <a href=\"http://pharo.gforge.inria.fr/PBE1/PBE1ch14.html\" rel=\"nofollow noreferrer\">http://pharo.gforge.inria.fr/PBE1/PBE1ch14.html</a> perhaps.)</p>\n"}, {"tags": [], "owner": {"reputation": 20315, "user_id": 963881, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e82a2a2b9ddf6fb580a9c34b2eca65f4?s=128&d=identicon&r=PG&f=1", "display_name": "syntagma", "link": "https://stackoverflow.com/users/963881/syntagma"}, "is_accepted": true, "score": 2, "last_activity_date": 1505247649, "creation_date": 1505247649, "answer_id": 46184736, "question_id": 46184319, "link": "https://stackoverflow.com/questions/46184319/c-struct-initialization-done-recursively/46184736#46184736", "title": "C struct initialization done &quot;recursively&quot;", "body": "<h3>Self-referencing structs in C</h3>\n\n<p>The MicroPython's code you are quoting is simply creating a self-referential struct instance, which is perfectly fine in C. Consider this example, which is pretty much you example stripped of some unnecessary parts:</p>\n\n<pre><code>#include \"stdio.h\"\n\n// const base\nstruct A {\n    const struct A* base;\n};\n\n// non-const base\nstruct B {\n    const struct B* base;\n};\n\nconst struct A a = { &amp;a };\n\nconst struct B b = { &amp;b };\n\nint main() {\n    printf(\"%p %p\\n\", (void*) &amp;a, (void*)a.base);\n    printf(\"%p %p\\n\", (void*) &amp;b, (void*)b.base);\n    return 0;\n}\n</code></pre>\n\n<h3>Specific use in the instantiation of <code>mp_obj_type_t</code> structs in MicroPython's code</h3>\n\n<p>MicroPython project is using <code>base</code> pointer to implement <em>(multiple) inheritance</em> in Python. The <code>base</code> reference is a pointer to another type which is a base type (\"parent\" in the type hierarchy), looking at the <a href=\"https://github.com/micropython/micropython/blob/master/py/obj.h#L473\" rel=\"nofollow noreferrer\">definition of this struct</a>:</p>\n\n<pre><code>struct _mp_obj_type_t {\n    // A type is an object so must start with this entry, which points to mp_type_type.\n    mp_obj_base_t base;\n   // .. many more fields\n}\n</code></pre>\n\n<p>The case you are mentioning is <code>mp_type_type</code> const variable seems to be base type of all types, thus the self-reference but it makes much more sense when you look at the types that \"inherit\" from <code>mp_type_type</code>, like <code>pyb_led_type</code>:</p>\n\n<pre><code>const mp_obj_type_t pyb_led_type = {\n    { &amp;mp_type_type },\n    .name = MP_QSTR_LED,\n    .print = led_obj_print,\n    .make_new = led_obj_make_new,\n    .locals_dict = (mp_obj_t)&amp;led_locals_dict, };\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": -1, "last_activity_date": 1505249439, "creation_date": 1505249439, "answer_id": 46185123, "question_id": 46184319, "link": "https://stackoverflow.com/questions/46184319/c-struct-initialization-done-recursively/46185123#46185123", "title": "C struct initialization done &quot;recursively&quot;", "body": "<blockquote>\n<pre><code>const mp_obj_type_t mp_type_type = { // &lt;-- SAME SYMBOL DEFINED HERE . . .\n    { &amp;mp_type_type }, // &lt;-- IS USED HERE\n    .name = MP_QSTR_type,\n</code></pre>\n</blockquote>\n\n<p>...</p>\n\n<blockquote>\n<pre><code>};\n</code></pre>\n  \n  <p>The fields specified by . I understand (see link in first\n  sentence).</p>\n  \n  <p>But about the \"recursive\" initialization?</p>\n</blockquote>\n\n<p>There nothing there that could reasonably be characterized as recursive initialization.  That would be initializing an object or one of its members with the <em>value</em> of that object, which C indeed forbids, but no such thing is in evidence.</p>\n\n<p>Your example shows a member of an object being initialized with the <em>address</em> of that object (that's what the <code>&amp;</code> operator computes).  The address of an object does not depend in any way on that object's value, and it can safely be computed before the object is initialized.  Such practice is not even all that uncommon, in a general sense, though it is unusual specifically to initialize part of an object with a pointer to that object.</p>\n"}], "owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 535, "favorite_count": 0, "accepted_answer_id": 46184736, "answer_count": 3, "score": 5, "last_activity_date": 1505395920, "creation_date": 1505245819, "last_edit_date": 1505395920, "question_id": 46184319, "link": "https://stackoverflow.com/questions/46184319/c-struct-initialization-done-recursively", "title": "C struct initialization done &quot;recursively&quot;", "body": "<p>I've newly come across an example of C-struct initialization that was explained by <a href=\"https://stackoverflow.com/questions/1601201/c-struct-initialization-using-labels-it-works-but-how-documentation\">this question</a>.</p>\n\n<p>What I don't understand is what appears to be recursive definition; this is from <a href=\"https://github.com/micropython/micropython/blob/v1.9.1/py/objtype.c\" rel=\"nofollow noreferrer\">MicroPython/objtype.c</a></p>\n\n<pre><code>typedef struct _mp_obj_type_t mp_obj_type_t;\n\nconst mp_obj_type_t mp_type_type = { // &lt;-- SAME SYMBOL DEFINED HERE . . .\n    { &amp;mp_type_type }, // &lt;-- IS USED HERE\n    .name = MP_QSTR_type,\n    .print = type_print,\n    .make_new = type_make_new,\n    .call = type_call,\n    .unary_op = mp_generic_unary_op,\n    .attr = type_attr,\n};\n</code></pre>\n\n<p>The fields specified by <code>.&lt;some_field&gt;</code> I understand (see link in first sentence).</p>\n\n<p>But about the \"recursive\" initialization?</p>\n\n<p>There are other instances in the <a href=\"https://github.com/micropython/micropython/blob/v1.9.1/teensy/led.c\" rel=\"nofollow noreferrer\">MicroPython code</a> that use this syntax:</p>\n\n<pre><code>const mp_obj_type_t pyb_led_type = {\n    { &amp;mp_type_type }, &lt;-- SAME SYMBOL AS ABOVE\n    .name = MP_QSTR_LED,\n    .print = led_obj_print,\n    .make_new = led_obj_make_new,\n    .locals_dict = (mp_obj_t)&amp;led_locals_dict,\n};\n</code></pre>\n\n<p>This makes more sense: the struct <code>pyb_led_type</code> is initialized with defaults set in struct <code>mp_type_type</code> and certain fields are changed from the default.</p>\n\n<p>But what about <code>const mp_obj_type_t mp_type_type</code>?</p>\n\n<p><em>The struct <code>mp_type_type</code> is defaulted to the values of . . . struct <code>mp_type_type</code> . . . ???</em></p>\n\n<p>The pre-processed output is identical to <code>.c</code>.</p>\n\n<p>What's going on here?  </p>\n\n<p>Here's few fields of the struct</p>\n\n<pre><code>struct _mp_obj_type_t {\n    // A type is an object so must start with this entry, which points to mp_type_type.\n    mp_obj_base_t base;\n\n    // The name of this type.\n    qstr name;\n\n    // Corresponds to __repr__ and __str__ special methods.\n    mp_print_fun_t print;\n\n    ...\n};\nstruct _mp_obj_base_t {\n    const mp_obj_type_t *type MICROPY_OBJ_BASE_ALIGNMENT;\n};\ntypedef struct _mp_obj_base_t mp_obj_base_t;\n</code></pre>\n"}, {"tags": ["python", "c", "linux", "python-module", "cpython"], "comments": [{"owner": {"reputation": 11277, "user_id": 3657941, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/304d8d4cceca5f9ce2383ff97b53e36b?s=128&d=identicon&r=PG&f=1", "display_name": "David Cullen", "link": "https://stackoverflow.com/users/3657941/david-cullen"}, "edited": false, "score": 0, "creation_date": 1505249898, "post_id": 46184261, "comment_id": 79333247, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/655163/convert-a-static-library-to-a-shared-library\">Convert a Static Library to a Shared Library?</a>"}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 2, "creation_date": 1505252507, "post_id": 46184261, "comment_id": 79334332, "body": "The python extension module must be a shared .so, but it can include code from statically linked libraries (.a). Fortunately, those are different files, so they can be static when you compile them. If they are built as .so files, then you will need to have them available. Python finds the extension, which you import, on the PYTHONPATH. Then the operating system finds the other so dependencies according to however your OS loads dependent .so files (e.g. LD_LIBRARY_PATH)"}, {"owner": {"reputation": 1123, "user_id": 5818762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36b261581f443ed63d0d832102936ad7?s=128&d=identicon&r=PG&f=1", "display_name": "id01", "link": "https://stackoverflow.com/users/5818762/id01"}, "edited": false, "score": 0, "creation_date": 1509592691, "post_id": 46184261, "comment_id": 81082102, "body": "This works, but seems to require you to download the source code of all the libraries you have and compile them to .a files, or find the .a files in your current install. Is there a better way?"}], "owner": {"reputation": 1123, "user_id": 5818762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36b261581f443ed63d0d832102936ad7?s=128&d=identicon&r=PG&f=1", "display_name": "id01", "link": "https://stackoverflow.com/users/5818762/id01"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 844, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1505256134, "creation_date": 1505245565, "last_edit_date": 1505256134, "question_id": 46184261, "link": "https://stackoverflow.com/questions/46184261/how-to-create-a-static-python-so-module", "title": "How to create a static Python .so module?", "body": "<p>I'm trying to create a Python module for Cpython. The C is compiled with some libraries as a -shared .so file. However, I want to include the dependencies inside the .so file to make it more portable. Compiling it into a static .a file doesn't work because it cannot be dynamically loaded, and I can't specify both -static and -shared when compiling the same file. So how do I go about creating a shared object with libraries statically included using gcc? There has to be a way other than downloading the dependency headers into the directory.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c", "operators", "equality", "integer-promotion"], "comments": [{"owner": {"reputation": 476, "user_id": 6824359, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GCaZl8DeEJE/AAAAAAAAAAI/AAAAAAAAAqg/JLtHx2OuQE8/photo.jpg?sz=128", "display_name": "krpra", "link": "https://stackoverflow.com/users/6824359/krpra"}, "edited": false, "score": 1, "creation_date": 1505244851, "post_id": 46184024, "comment_id": 79330939, "body": "read a good C book and learn about memory representation of different data types and difference between <code>signed</code> and <code>unsigned</code> data types"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 3, "creation_date": 1505245162, "post_id": 46184024, "comment_id": 79331095, "body": "&quot;<i>Different</i>&quot; really?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1505248212, "post_id": 46184024, "comment_id": 79332450, "body": "&quot;what is the value for a and b&quot; could have been easily investigated with <code>printf(&quot;a=%d,b=%d&quot;,a,b);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1505247863, "post_id": 46184154, "comment_id": 79332314, "body": "The signed character became -5 before <code>if (a == b)</code>, but at <code>char a = 0xfb;</code> time."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1505251837, "post_id": 46184154, "comment_id": 79334055, "body": "In a manner of speaking, yes. The single byte 0xFB is properly interpreted as -5 even as stored in one byte. Which is why, after the promotion is done, it is physically expanded to 0xFFFFFFFB, while the other is physically expanded to 0x000000FB."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1505255086, "post_id": 46184154, "comment_id": 79335201, "body": "<i>Which is why, after the promotion is done, it is physically expanded to 0xFFFFFFFB</i> maybe, maybe not. The behavior does not depend on the size of <code>int</code> nor on the representation of integers in memory. Storing <code>0xfb</code> to a signed 8-bit <code>char</code> has implementation defined behavior, which in most current architectures will mean storing <code>-5</code>, the rest is fully defined on all architectures."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1505260339, "post_id": 46184154, "comment_id": 79336490, "body": "Yes, I&#39;m assuming a lot of things, like 2s-complement binary, and 32-bit ints, etc., that are probably true for the questioner. But as always, C is free to do it a different way if it can."}], "tags": [], "owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "is_accepted": false, "score": 6, "last_activity_date": 1505245144, "creation_date": 1505245144, "answer_id": 46184154, "question_id": 46184024, "link": "https://stackoverflow.com/questions/46184024/different-data-types-signed-and-unsigned/46184154#46184154", "title": "Different Data Types - Signed and Unsigned", "body": "<p>The line <code>if (a == b)</code>... promotes the characters to integers before comparison, so the signedness of the character affects how that happens. The unsigned character 0xFB becomes the integer 251; the signed character 0xFB becomes the integer -5. Thus, they are unequal.</p>\n"}, {"tags": [], "owner": {"reputation": 476, "user_id": 6824359, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GCaZl8DeEJE/AAAAAAAAAAI/AAAAAAAAAqg/JLtHx2OuQE8/photo.jpg?sz=128", "display_name": "krpra", "link": "https://stackoverflow.com/users/6824359/krpra"}, "is_accepted": false, "score": 0, "last_activity_date": 1505245233, "creation_date": 1505245233, "answer_id": 46184174, "question_id": 46184024, "link": "https://stackoverflow.com/questions/46184024/different-data-types-signed-and-unsigned/46184174#46184174", "title": "Different Data Types - Signed and Unsigned", "body": "<p><code>char</code> stores from -128 to 127 and <code>unsigned char</code> stores from 0 to 255.\nand <code>0xfb</code> represents 251 in decimal which is beyond the limit of <code>char a</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1505248071, "post_id": 46184393, "comment_id": 79332398, "body": "Best answer so far as it addresses  that <code>a = 0xfb;</code> has implementation defined behavior."}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 4, "last_activity_date": 1505246485, "last_edit_date": 1505246485, "creation_date": 1505246126, "answer_id": 46184393, "question_id": 46184024, "link": "https://stackoverflow.com/questions/46184024/different-data-types-signed-and-unsigned/46184393#46184393", "title": "Different Data Types - Signed and Unsigned", "body": "<p>There are 2 cases to consider:</p>\n\n<ul>\n<li>if the <code>char</code> type is unsigned by default, both <code>a</code> and <code>b</code> are assigned the value <code>251</code> and the program will print <code>Same</code>.</li>\n<li>if the <code>char</code> type is signed by default, which is alas the most common case, the definition <code>char a = 0xfb;</code> has implementation defined behavior as <code>0xfb</code> (<code>251</code> in decimal) is probably out of range for the <code>char</code> type (typically <code>-128</code> to <code>127</code>). Most likely the value <code>-5</code> will be stored into <code>a</code> and <code>a == b</code> evaluates to <code>0</code> as both arguments are promoted to <code>int</code> before the comparison, hence <code>-5 == 251</code> will be false.</li>\n</ul>\n\n<p>The behavior of <code>printf(\"a=%c,b=%c\", a, b);</code> is also system dependent as the non ASCII characters <code>-5</code> and <code>251</code> may print in unexpected ways if at all. Note however that both will print the same as the <code>%c</code> format specifies that the argument is converted to <code>unsigned char</code> before printing. It would be safer and more explicit to try <code>printf(\"a=%d, b=%d\\n\", a, b);</code></p>\n\n<p>With gcc or clang, you can try recompiling your program with <code>-funsigned-char</code> to see how the behavior will differ.</p>\n"}, {"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1505246749, "post_id": 46184398, "comment_id": 79331818, "body": "<i>As result the operands have different values due to the difference in the binary representation.</i> more precisely due to the difference in the interpretation of the binary representation."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1505246443, "last_edit_date": 1505246443, "creation_date": 1505246134, "answer_id": 46184398, "question_id": 46184024, "link": "https://stackoverflow.com/questions/46184024/different-data-types-signed-and-unsigned/46184398#46184398", "title": "Different Data Types - Signed and Unsigned", "body": "<p>According to the C Standard (6.5.9 Equality operators)</p>\n\n<blockquote>\n  <p>4 If both of the operands have arithmetic type, <strong>the usual arithmetic\n  conversions are performed</strong>....</p>\n</blockquote>\n\n<p>The usual arithmetic conversions include the integer promotions.</p>\n\n<p>From the C Standard (6.3.1.1 Boolean, characters, and integers)</p>\n\n<blockquote>\n  <p>2 The following may be used in an expression wherever an int or\n  unsigned int may be used:\n      ...</p>\n  \n  <p>If an int can represent all values of the original type (as restricted\n  by the width, for a bit-field), the value is converted to an int;\n  otherwise, it is converted to an unsigned int. <strong>These are called the\n  integer promotions</strong>.58) All other types are unchanged by the integer\n  promotions.</p>\n</blockquote>\n\n<p>So in this equality expression</p>\n\n<pre><code>a == b\n</code></pre>\n\n<p>the both operands are converted to the type <code>int</code>. The signed operand ( provided that the type <code>char</code> behaves as the type <code>signed char</code>) is converted to the type <code>int</code> by means of propagating the sign bit.</p>\n\n<p>As result the operands have different values due to the difference in the binary representation.</p>\n\n<p>If the type <code>char</code> behaves as the type <code>unsigned char</code> (for example by setting a corresponding option of the compiler) then evidently the operands will be equal.</p>\n"}], "owner": {"reputation": 33, "user_id": 8599615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c50da9eafc3f428178263c80c0fd0ce2?s=128&d=identicon&r=PG&f=1", "display_name": "NithinR", "link": "https://stackoverflow.com/users/8599615/nithinr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 0, "accepted_answer_id": 46184393, "answer_count": 4, "score": 2, "last_activity_date": 1505246508, "creation_date": 1505244593, "last_edit_date": 1505246508, "question_id": 46184024, "link": "https://stackoverflow.com/questions/46184024/different-data-types-signed-and-unsigned", "title": "Different Data Types - Signed and Unsigned", "body": "<p>I just executed the following code</p>\n\n<pre><code>main()\n{\n   char a = 0xfb;\n   unsigned char b = 0xfb;\n   printf(\"a=%c,b=%c\",a,b);\n   if(a==b) {\n     printf(\"\\nSame\");\n   }\n   else {\n     printf(\"\\nNot Same\");\n   }\n}\n</code></pre>\n\n<p>For this code I got the answer as </p>\n\n<p>a=? b=?</p>\n\n<p>Different </p>\n\n<p>Why don't I get Same, and what is the value for a and b?</p>\n"}, {"tags": ["c", "borland-c++"], "comments": [{"owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "edited": false, "score": 0, "creation_date": 1505245158, "post_id": 46183857, "comment_id": 79331093, "body": "This may help, it seems like  an identical question except it&#39;s for C. printf is a C function so I&#39;m not sure if this will help. <a href=\"https://stackoverflow.com/questions/9225567/how-to-print-a-int64-t-type-in-c\" title=\"how to print a int64 t type in c\">stackoverflow.com/questions/9225567/&hellip;</a>"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1505247793, "post_id": 46183857, "comment_id": 79332290, "body": "I would suggest something which is less than 16 years old"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1505250218, "post_id": 46183857, "comment_id": 79333401, "body": "Answers to the other question say to use <code>%I64d</code> or <code>%lld</code>, but C++Builder actually uses <code>%Ld</code> for its int64 support in <code>printf()</code> (and <code>scanf()</code>). See <a href=\"http://docwiki.embarcadero.com/RADStudio/en/Printf_Format_Specifiers\" rel=\"nofollow noreferrer\">Embarcadero&#39;s documentation</a>"}], "owner": {"reputation": 17, "user_id": 7186543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5581a77bf2bb85a5e5b03ae0ac7dda2?s=128&d=identicon&r=PG&f=1", "display_name": "gonskabalbinka", "link": "https://stackoverflow.com/users/7186543/gonskabalbinka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 193, "favorite_count": 0, "closed_date": 1505248333, "answer_count": 0, "score": 0, "last_activity_date": 1505245539, "creation_date": 1505243783, "last_edit_date": 1505245539, "question_id": 46183857, "link": "https://stackoverflow.com/questions/46183857/int64-t-in-printf-function-borland-c-builder-6", "closed_reason": "Duplicate", "title": "int64_t in printf function borland c++ builder 6", "body": "<p>How to print int64_t type variable in function printf(). I use Borland C++ Builder 6.0, but I write small application in C. Is there any way to do this?</p>\n"}, {"tags": ["c", "pointers", "struct"], "answers": [{"comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 2, "creation_date": 1505243902, "post_id": 46183879, "comment_id": 79330519, "body": "in that case you don&#39;t even need to provide it, since it immediately follows."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1505244004, "post_id": 46183879, "comment_id": 79330562, "body": "@Jean-Fran&#231;oisFabre Right, but does no harm, either. :)"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1505244059, "post_id": 46183879, "comment_id": 79330577, "body": "@SouravGhosh sure. I&#39;m sure having seen this as a duplicate somewhere (NMDV BTW)"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 4, "last_activity_date": 1505244381, "last_edit_date": 1505244381, "creation_date": 1505243875, "answer_id": 46183879, "question_id": 46183844, "link": "https://stackoverflow.com/questions/46183844/struct-pointer-passed-into-function-in-c-does-not-work-even-after-forward-declar/46183879#46183879", "title": "Struct pointer passed into function in C does not work even after forward declaration", "body": "<p>The forward declaration of the <code>gothru</code> function contains the structure type as one of the parameter, so, you need to move the forward declaration for <code>gothru</code> after the structure definition. </p>\n\n<p>Otherwise, the function argument (type) is not known in the forward declaration time.</p>\n\n<p>Something like</p>\n\n<pre><code>struct node {\n    int data; //data in current node\n    struct node * next; //pointer to the next node\n};\n\nvoid gothru(struct node * Root);  // struct node is known to compiler now\n</code></pre>\n\n<p>should solve the problem.</p>\n"}, {"tags": [], "owner": {"reputation": 43502, "user_id": 377953, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hm9UN.jpg?s=128&g=1", "display_name": "taskinoor", "link": "https://stackoverflow.com/users/377953/taskinoor"}, "is_accepted": false, "score": 1, "last_activity_date": 1505245079, "last_edit_date": 1505245079, "creation_date": 1505244652, "answer_id": 46184040, "question_id": 46183844, "link": "https://stackoverflow.com/questions/46183844/struct-pointer-passed-into-function-in-c-does-not-work-even-after-forward-declar/46184040#46184040", "title": "Struct pointer passed into function in C does not work even after forward declaration", "body": "<p>Using gcc we get this if we try to compile your code:</p>\n\n<pre><code>vagrant@dev-box:~/tests$ gcc test.c\ntest.c:4:20: warning: \u2018struct node\u2019 declared inside parameter list [enabled by default]\n void gothru(struct node * Root);\n                    ^\ntest.c:4:20: warning: its scope is only this definition or declaration, which is probably not what you want [enabled by default]\ntest.c:11:6: error: conflicting types for \u2018gothru\u2019\n void gothru(struct node * Root){\n      ^\ntest.c:4:6: note: previous declaration of \u2018gothru\u2019 was here\n void gothru(struct node * Root);\n      ^\n</code></pre>\n\n<p>The warning that is shown first is crucial to understanding what is going on here. Here, <code>struct node</code> is first declared inside the function prototype and it's scope is just that line. But it declares the function. Now after defining the <code>struct node</code> you encounter the function definition but in this line <code>struct node</code> means something different from the local <code>struct node</code> encountered in first prototype. And that's why you are getting a conflicting type for the function.</p>\n\n<p>The solution is as already pointed by @SouravGhosh's answer, i.e. to move the structure definition before the function prototype.</p>\n"}], "owner": {"reputation": 377, "user_id": 2551765, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/t1UAx.jpg?s=128&g=1", "display_name": "ragzputin", "link": "https://stackoverflow.com/users/2551765/ragzputin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 0, "accepted_answer_id": 46183879, "answer_count": 2, "score": 1, "last_activity_date": 1505245079, "creation_date": 1505243741, "last_edit_date": 1505244147, "question_id": 46183844, "link": "https://stackoverflow.com/questions/46183844/struct-pointer-passed-into-function-in-c-does-not-work-even-after-forward-declar", "title": "Struct pointer passed into function in C does not work even after forward declaration", "body": "<p>I'm new to C and am learning linked lists. I am using Code Blocks IDE on Linux Mint with a GCC compiler. I am trying to pass in a struct pointer to a function that can help me traverse the the linked list. Here is my present code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid gothru(struct node * Root);\n\nstruct node {\n    int data; //data in current node\n    struct node * next; //pointer to the next node\n};\n\nvoid gothru(struct node * Root){\n    struct node * conductor; //this pointer will be used to traverse the linked list\n    conductor = Root; //conductor will start at the Node\n\n    /* Conductor traverses through the linked list */\n    if(conductor != NULL){\n        while(conductor-&gt;next != NULL){\n            printf(\"%d-&gt;\",conductor-&gt;data);\n            conductor = conductor-&gt;next; /*if current position of conductor is not pointing to\n                                           end of linked list, then go to the next node */\n        }\n        printf(\"%d-&gt;\",conductor-&gt;data);\n    }\n\n    printf(\"\\n\");\n\n    if (conductor == NULL){\n        printf(\"Out of memory!\");\n    }\n\n    free(conductor);\n}\n\nint main()\n{\n    struct node * root; //first node\n\n    root = malloc(sizeof(*root)); //allocate some memory to the root node\n\n    root-&gt;next = NULL; //set the next node of root to a null/dummy pointer\n    root-&gt;data = 12; //data at first node (root) is 12\n\n    gothru(root); //traverse linked list\n\n\n    return 0;\n}\n</code></pre>\n\n<p>Now, I have forward declared my function at the top with the exact same format as when the function is first initialized. But still, I'm getting the following error:</p>\n\n<blockquote>\n  <p>|11|error: conflicting types for \u2018gothru\u2019</p>\n</blockquote>\n\n<p>I have tried changing the argument for my \"gothru\" function to simple variables in which case it works. But the minute I change back to a pointer to the struct, it gives me this error.</p>\n\n<p>Previous answers in Stackoverflow say that we need to forward declare our functions to clear this error. I did exactly that, but it still does not work. Any solutions?</p>\n"}, {"tags": ["c", "algorithm", "geometry"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1505242152, "post_id": 46183467, "comment_id": 79329758, "body": "Are you using Notepad as your code editor? Otherwise I don&#39;t see a good reason for such a flat indentation."}, {"owner": {"reputation": 1, "user_id": 7425787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec36d79ce4e45c4728f2abecfd776685?s=128&d=identicon&r=PG&f=1", "display_name": "user7425787", "link": "https://stackoverflow.com/users/7425787/user7425787"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1505242263, "post_id": 46183467, "comment_id": 79329824, "body": "sorry for the indentation , I was in a hurry"}, {"owner": {"reputation": 36328, "user_id": 5483526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec50563f80bacd2a7fed69bd31d0c810?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Timmermans", "link": "https://stackoverflow.com/users/5483526/matt-timmermans"}, "edited": false, "score": 0, "creation_date": 1505245295, "post_id": 46183467, "comment_id": 79331154, "body": "If the arguments to putpixel() are x, y, color, then you are mixing up x and y in a lot of the calls."}], "answers": [{"tags": [], "owner": {"reputation": 393, "user_id": 5556374, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/01a810abccc0afb6dedcdcf7f645260e?s=128&d=identicon&r=PG&f=1", "display_name": "I.Omar", "link": "https://stackoverflow.com/users/5556374/i-omar"}, "is_accepted": false, "score": 0, "last_activity_date": 1506362762, "last_edit_date": 1506362762, "creation_date": 1506362005, "answer_id": 46411315, "question_id": 46183467, "link": "https://stackoverflow.com/questions/46183467/midpoint-circle-algorithm-not-working-for-unequal-center-coordinates/46411315#46411315", "title": "Midpoint Circle algorithm not working for unequal center coordinates", "body": "<p>The result from that is inconsistent as y won't start correctly for any float and d aswell.</p>\n\n<pre><code>y=r;\nd=1.25-r;\n</code></pre>\n\n<p>Why are you using float type in integer based algorithm and with pixel as the unit?</p>\n\n<p>change</p>\n\n<pre><code>d=1.25-r;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>d=1-r;\n</code></pre>\n\n<p>and all float type to int type.</p>\n\n<p>as the incrementation is by 1/-1</p>\n"}], "owner": {"reputation": 1, "user_id": 7425787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec36d79ce4e45c4728f2abecfd776685?s=128&d=identicon&r=PG&f=1", "display_name": "user7425787", "link": "https://stackoverflow.com/users/7425787/user7425787"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1506362762, "creation_date": 1505242016, "last_edit_date": 1505242469, "question_id": 46183467, "link": "https://stackoverflow.com/questions/46183467/midpoint-circle-algorithm-not-working-for-unequal-center-coordinates", "title": "Midpoint Circle algorithm not working for unequal center coordinates", "body": "<p>My midpoint circle algorithm C Program is given below:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\n#include&lt;graphics.h&gt;\n#include&lt;math.h&gt;\n\nvoid cir(int,int,float);\nvoid main()\n{\n    int gd=DETECT;\n    int gm=DETECT;\n    int x1,y1;\n    float r;\n    initgraph(&amp;gd,&amp;gm,\"C:\\\\TurboC3\\\\BGI\");\n    printf(\"\\nenter the cordinates of center: \");\n    scanf(\"%d\",&amp;x1);\n    scanf(\"%d\",&amp;y1);\n    printf(\"\\nenter the radius : \");\n    scanf(\"%f\",&amp;r);\n    cir(x1,y1,r);\n    getch();\n    closegraph();\n}\n\nvoid cir(int x1,int y1,float r)\n{\n    int x,y;\n    float d;\n    x=0;\n    y=r;\n    d=1.25-r;\n    putpixel(x1+x,y1+y,RED);\n    putpixel(y1+y,x1+x,RED);\n    putpixel(y1+y,x1-x,RED);\n    putpixel(x1+x,y1-y,RED);\n    putpixel(x1-x,y1-y,RED);\n    putpixel(y1-y,x1-x,RED);\n    putpixel(y1-y,x1+x,RED);\n    putpixel(x1-x,y1+y,RED);\n    while(x&lt;y){\n\n        if(d&lt;0){\n            x=x+1;\n            d=d+2*x+1;\n        }else{\n            x=x+1;\n            y=y-1;\n            d=d+2*(x-y)+1;\n        }\n        putpixel(x1+x,y1+y,RED);\n        putpixel(y1+y,x1+x,RED);\n        putpixel(y1+y,x1-x,RED);\n        putpixel(x1+x,y1-y,RED);\n        putpixel(x1-x,y1-y,RED);\n        putpixel(y1-y,x1-x,RED);\n        putpixel(y1-y,x1+x,RED);\n        putpixel(x1-x,y1+y,RED);\n    }\n}\n</code></pre>\n\n<p>When I provide center coordinates as <code>(200,200)</code> the output is a perfect circle but when I provide any other coordinate where <code>(Y&lt;X)</code> example <code>(200,140)</code> the output is not a perfect circle.\nPlease suggest if any changes is needed in my code.</p>\n\n<p>cir function implements midpoint circle algorithm.\nDoes midpoint algorithm only works for equal center coordinates</p>\n"}, {"tags": ["c", "algorithm", "textures", "mesh", "uv-mapping"], "answers": [{"tags": [], "owner": {"reputation": 66, "user_id": 4626918, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-VODc5ozv9To/AAAAAAAAAAI/AAAAAAAAAG0/Pva8MZ1Tc_k/photo.jpg?sz=128", "display_name": "Andrey", "link": "https://stackoverflow.com/users/4626918/andrey"}, "is_accepted": false, "score": 2, "last_activity_date": 1509787100, "creation_date": 1509787100, "answer_id": 47109228, "question_id": 46183402, "link": "https://stackoverflow.com/questions/46183402/lscm-implementation-by-opennl-shows-overlapping-triangles-in-its-uv-mapping/47109228#47109228", "title": "LSCM implementation by OpenNL shows overlapping triangles in its UV mapping", "body": "<p>It seems that the implementation of this algorithm without segmentation and packing, it's only LSCM solver. Try InstantUV SDK instead or implement the algorithm yourself. more about LSCM here: <a href=\"https://members.loria.fr/Bruno.Levy/papers/LSCM_SIGGRAPH_2002.pdf\" rel=\"nofollow noreferrer\">https://members.loria.fr/Bruno.Levy/papers/LSCM_SIGGRAPH_2002.pdf</a></p>\n"}], "owner": {"reputation": 2530, "user_id": 395131, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/KWhe2.png?s=128&g=1", "display_name": "Tahlil", "link": "https://stackoverflow.com/users/395131/tahlil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1509787100, "creation_date": 1505241792, "last_edit_date": 1505978135, "question_id": 46183402, "link": "https://stackoverflow.com/questions/46183402/lscm-implementation-by-opennl-shows-overlapping-triangles-in-its-uv-mapping", "title": "LSCM implementation by OpenNL shows overlapping triangles in its UV mapping", "body": "<p>I am using the <a href=\"https://gforge.inria.fr/frs/download.php/file/36769/LSCM.cpp\" rel=\"nofollow noreferrer\" title=\"LSCM.CPP\">Least square conformal map</a> algorithm implemented by opennl without any change. With the spectral mode of the algorithm I get overlapping triangles in the UV mapping. For a cone triangulated object, it shows the following output,</p>\n\n<p><a href=\"https://i.stack.imgur.com/QeXM9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QeXM9.png\" alt=\"enter image description here\"></a></p>\n\n<p>Where the output should be something like this,</p>\n\n<p><a href=\"https://i.stack.imgur.com/iAYQl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iAYQl.png\" alt=\"enter image description here\"></a></p>\n\n<p>I went through the code and paper. Frankly I didn't understand the math behind the implementation and for that I could not find why this is happening. The cone object is <a href=\"https://drive.google.com/open?id=0BxNUble4n6TlQ1FpMHA1ODhpOGs\" rel=\"nofollow noreferrer\">here</a></p>\n\n<pre><code># This file uses centimeters as units for non-parametric coordinates.\n\nmtllib cone_triangulated.mtl\ng default\nv 5.440012 -1.000000 -0.309017\nv 5.297973 -1.000000 -0.587786\nv 5.076741 -1.000000 -0.809017\nv 4.797972 -1.000000 -0.951057\nv 4.488955 -1.000000 -1.000000\nv 4.179938 -1.000000 -0.951057\nv 3.901170 -1.000000 -0.809017\nv 3.679938 -1.000000 -0.587785\nv 3.537898 -1.000000 -0.309017\nv 3.488955 -1.000000 0.000000\nv 3.537898 -1.000000 0.309017\nv 3.679938 -1.000000 0.587785\nv 3.901170 -1.000000 0.809017\nv 4.179938 -1.000000 0.951057\nv 4.488955 -1.000000 1.000000\nv 4.797972 -1.000000 0.951057\nv 5.076741 -1.000000 0.809017\nv 5.297972 -1.000000 0.587785\nv 5.440012 -1.000000 0.309017\nv 5.488955 -1.000000 0.000000\nv 4.488955 1.000000 0.000000\nvt 0.710013 0.000454\nvt 0.773162 0.000454\nvt 0.640012 0.453512\nvt 0.823278 0.000454\nvt 0.640012 0.000454\nvt 0.570010 0.000454\nvt 0.506861 0.000454\nvt 0.456745 0.000454\nvt 0.413641 0.454510\nvt 0.476790 0.454510\nvt 0.546791 0.907569\nvt 0.546791 0.454510\nvt 0.363525 0.454510\nvt 0.616793 0.454510\nvt 0.679942 0.454510\nvt 0.730058 0.454510\nvt 0.442471 0.156982\nvt 0.453558 0.226983\nvt 0.442471 0.296985\nvt 0.410295 0.360134\nvt 0.360180 0.410249\nvt 0.297030 0.442425\nvt 0.227029 0.453512\nvt 0.157028 0.442425\nvt 0.093878 0.410249\nvt 0.043763 0.360134\nvt 0.011587 0.296985\nvt 0.000500 0.226983\nvt 0.011587 0.156982\nvt 0.043763 0.093832\nvt 0.093878 0.043717\nvt 0.157027 0.011541\nvt 0.227029 0.000454\nvt 0.297030 0.011541\nvt 0.360180 0.043717\nvt 0.410295 0.093832\nvt 0.999501 0.907569\nvt 0.936351 0.907569\nvt 0.866350 0.454510\nvt 0.866350 0.907569\nvt 0.796348 0.907569\nvt 0.733199 0.907569\nvt 0.094082 0.454510\nvt 0.157231 0.454510\nvt 0.227233 0.907569\nvt 0.227233 0.454510\nvt 0.297234 0.454510\nvt 0.360383 0.454510\nvn 0.000000 -1.000000 0.000000\nvn 0.000000 -1.000000 0.000000\nvn 0.000000 -1.000000 0.000000\nvn 0.000000 -1.000000 0.000000\nvn 0.000000 -1.000000 0.000000\nvn 0.000000 -1.000000 0.000000\nvn 0.000000 -1.000000 -0.000000\nvn 0.000000 -1.000000 -0.000000\nvn 0.000000 -1.000000 0.000000\nvn 0.000000 -1.000000 0.000000\nvn 0.000000 -1.000000 0.000000\nvn 0.000000 -1.000000 0.000000\nvn 0.000000 -1.000000 0.000000\nvn 0.000000 -1.000000 0.000000\nvn 0.000000 -1.000000 0.000000\nvn 0.000000 -1.000000 0.000000\nvn 0.000000 -1.000000 0.000000\nvn 0.000000 -1.000000 0.000000\nvn 0.000000 -1.000000 0.000000\nvn 0.000000 -1.000000 0.000000\nvn 0.850651 0.447214 -0.276392\nvn 0.723607 0.447214 -0.525731\nvn 0.000000 1.000000 -0.000005\nvn 0.525731 0.447214 -0.723607\nvn 0.276393 0.447214 -0.850651\nvn -0.000000 0.447214 -0.894427\nvn -0.276393 0.447214 -0.850651\nvn -0.525731 0.447214 -0.723607\nvn -0.723607 0.447214 -0.525731\nvn -0.850651 0.447214 -0.276393\nvn -0.894427 0.447214 0.000000\nvn -0.850651 0.447214 0.276393\nvn -0.723607 0.447214 0.525731\nvn -0.525731 0.447214 0.723607\nvn -0.276393 0.447214 0.850651\nvn 0.000000 0.447214 0.894427\nvn 0.276393 0.447214 0.850651\nvn 0.525731 0.447214 0.723607\nvn 0.723607 0.447214 0.525731\nvn 0.850651 0.447214 0.276393\nvn 0.894427 0.447214 0.000001\ns 1\ng pasted__pCone1 group1\nusemtl initialShadingGroup\nf 1/17/1 20/18/2 2/36/3\nf 20/18/2 19/19/4 2/36/3\nf 19/19/4 18/20/5 2/36/3\nf 18/20/5 17/21/6 2/36/3\nf 17/21/6 16/22/7 2/36/3\nf 16/22/7 15/23/8 2/36/3\nf 15/23/8 14/24/9 2/36/3\nf 14/24/9 13/25/10 2/36/3\nf 13/25/10 12/26/11 2/36/3\nf 12/26/11 11/27/12 2/36/3\nf 11/27/12 10/28/13 2/36/3\nf 10/28/13 9/29/14 2/36/3\nf 9/29/14 8/30/15 2/36/3\nf 8/30/15 7/31/16 2/36/3\nf 7/31/16 6/32/17 2/36/3\nf 6/32/17 5/33/18 2/36/3\nf 5/33/18 4/34/19 2/36/3\nf 4/34/19 3/35/20 2/36/3\ns 2\nf 1/1/21 2/2/22 21/3/23\nf 2/2/22 3/4/24 21/3/23\nf 3/37/24 4/38/25 21/39/23\nf 4/38/25 5/40/26 21/39/23\nf 5/40/26 6/41/27 21/39/23\nf 6/41/27 7/42/28 21/39/23\nf 7/13/28 8/9/29 21/11/23\nf 8/9/29 9/10/30 21/11/23\nf 9/10/30 10/12/31 21/11/23\nf 10/12/31 11/14/32 21/11/23\nf 11/14/32 12/15/33 21/11/23\nf 12/15/33 13/16/34 21/11/23\nf 13/43/34 14/44/35 21/45/23\nf 14/44/35 15/46/36 21/45/23\nf 15/46/36 16/47/37 21/45/23\nf 16/47/37 17/48/38 21/45/23\nf 17/8/38 18/7/39 21/3/23\nf 18/7/39 19/6/40 21/3/23\nf 19/6/40 20/5/41 21/3/23\nf 20/5/41 1/1/21 21/3/23\ng default\nv 5.440012 -1.000000 -0.309017\nv 5.297973 -1.000000 -0.587786\nv 5.076741 -1.000000 -0.809017\nv 4.797972 -1.000000 -0.951057\nv 4.488955 -1.000000 -1.000000\nv 4.179938 -1.000000 -0.951057\nv 3.901170 -1.000000 -0.809017\nv 3.679938 -1.000000 -0.587785\nv 3.537898 -1.000000 -0.309017\nv 3.488955 -1.000000 0.000000\nv 3.537898 -1.000000 0.309017\nv 3.679938 -1.000000 0.587785\nv 3.901170 -1.000000 0.809017\nv 4.179938 -1.000000 0.951057\nv 4.488955 -1.000000 1.000000\nv 4.797972 -1.000000 0.951057\nv 5.076741 -1.000000 0.809017\nv 5.297972 -1.000000 0.587785\nv 5.440012 -1.000000 0.309017\nv 5.488955 -1.000000 0.000000\nv 4.488955 1.000000 0.000000\nvt 0.710013 0.000454\nvt 0.773162 0.000454\nvt 0.640012 0.453512\nvt 0.823278 0.000454\nvt 0.640012 0.000454\nvt 0.570010 0.000454\nvt 0.506861 0.000454\nvt 0.456745 0.000454\nvt 0.413641 0.454510\nvt 0.476790 0.454510\nvt 0.546791 0.907569\nvt 0.546791 0.454510\nvt 0.363525 0.454510\nvt 0.616793 0.454510\nvt 0.679942 0.454510\nvt 0.730058 0.454510\nvt 0.442471 0.156982\nvt 0.453558 0.226983\nvt 0.442471 0.296985\nvt 0.410295 0.360134\nvt 0.360180 0.410249\nvt 0.297030 0.442425\nvt 0.227029 0.453512\nvt 0.157028 0.442425\nvt 0.093878 0.410249\nvt 0.043763 0.360134\nvt 0.011587 0.296985\nvt 0.000500 0.226983\nvt 0.011587 0.156982\nvt 0.043763 0.093832\nvt 0.093878 0.043717\nvt 0.157027 0.011541\nvt 0.227029 0.000454\nvt 0.297030 0.011541\nvt 0.360180 0.043717\nvt 0.410295 0.093832\nvt 0.999501 0.907569\nvt 0.936351 0.907569\nvt 0.866350 0.454510\nvt 0.866350 0.907569\nvt 0.796348 0.907569\nvt 0.733199 0.907569\nvt 0.094082 0.454510\nvt 0.157231 0.454510\nvt 0.227233 0.907569\nvt 0.227233 0.454510\nvt 0.297234 0.454510\nvt 0.360383 0.454510\nvn 0.000000 -1.000000 0.000000\nvn 0.000000 -1.000000 0.000000\nvn 0.000000 -1.000000 0.000000\nvn 0.000000 -1.000000 0.000000\nvn 0.000000 -1.000000 0.000000\nvn 0.000000 -1.000000 0.000000\nvn 0.000000 -1.000000 -0.000000\nvn 0.000000 -1.000000 -0.000000\nvn 0.000000 -1.000000 0.000000\nvn 0.000000 -1.000000 0.000000\nvn 0.000000 -1.000000 0.000000\nvn 0.000000 -1.000000 0.000000\nvn 0.000000 -1.000000 0.000000\nvn 0.000000 -1.000000 0.000000\nvn 0.000000 -1.000000 0.000000\nvn 0.000000 -1.000000 0.000000\nvn 0.000000 -1.000000 0.000000\nvn 0.000000 -1.000000 0.000000\nvn 0.000000 -1.000000 0.000000\nvn 0.000000 -1.000000 0.000000\nvn 0.850651 0.447214 -0.276392\nvn 0.723607 0.447214 -0.525731\nvn 0.000000 1.000000 -0.000005\nvn 0.525731 0.447214 -0.723607\nvn 0.276393 0.447214 -0.850651\nvn -0.000000 0.447214 -0.894427\nvn -0.276393 0.447214 -0.850651\nvn -0.525731 0.447214 -0.723607\nvn -0.723607 0.447214 -0.525731\nvn -0.850651 0.447214 -0.276393\nvn -0.894427 0.447214 0.000000\nvn -0.850651 0.447214 0.276393\nvn -0.723607 0.447214 0.525731\nvn -0.525731 0.447214 0.723607\nvn -0.276393 0.447214 0.850651\nvn 0.000000 0.447214 0.894427\nvn 0.276393 0.447214 0.850651\nvn 0.525731 0.447214 0.723607\nvn 0.723607 0.447214 0.525731\nvn 0.850651 0.447214 0.276393\nvn 0.894427 0.447214 0.000001\ns 1\ng pasted__pCone1 group1\nf 22/65/42 41/66/43 23/84/44\nf 41/66/43 40/67/45 23/84/44\nf 40/67/45 39/68/46 23/84/44\nf 39/68/46 38/69/47 23/84/44\nf 38/69/47 37/70/48 23/84/44\nf 37/70/48 36/71/49 23/84/44\nf 36/71/49 35/72/50 23/84/44\nf 35/72/50 34/73/51 23/84/44\nf 34/73/51 33/74/52 23/84/44\nf 33/74/52 32/75/53 23/84/44\nf 32/75/53 31/76/54 23/84/44\nf 31/76/54 30/77/55 23/84/44\nf 30/77/55 29/78/56 23/84/44\nf 29/78/56 28/79/57 23/84/44\nf 28/79/57 27/80/58 23/84/44\nf 27/80/58 26/81/59 23/84/44\nf 26/81/59 25/82/60 23/84/44\nf 25/82/60 24/83/61 23/84/44\ns 2\nf 22/49/62 23/50/63 42/51/64\nf 23/50/63 24/52/65 42/51/64\nf 24/85/65 25/86/66 42/87/64\nf 25/86/66 26/88/67 42/87/64\nf 26/88/67 27/89/68 42/87/64\nf 27/89/68 28/90/69 42/87/64\nf 28/61/69 29/57/70 42/59/64\nf 29/57/70 30/58/71 42/59/64\nf 30/58/71 31/60/72 42/59/64\nf 31/60/72 32/62/73 42/59/64\nf 32/62/73 33/63/74 42/59/64\nf 33/63/74 34/64/75 42/59/64\nf 34/91/75 35/92/76 42/93/64\nf 35/92/76 36/94/77 42/93/64\nf 36/94/77 37/95/78 42/93/64\nf 37/95/78 38/96/79 42/93/64\nf 38/56/79 39/55/80 42/51/64\nf 39/55/80 40/54/81 42/51/64\nf 40/54/81 41/53/82 42/51/64\nf 41/53/82 22/49/62 42/51/64\n</code></pre>\n\n<p>and the output object is <a href=\"https://drive.google.com/open?id=0BxNUble4n6TlWGpMd181OVRmazQ\" rel=\"nofollow noreferrer\">here</a></p>\n\n<pre><code>v 5.44001 -1 -0.309017\nv 5.29797 -1 -0.587786\nv 5.07674 -1 -0.809017\nv 4.79797 -1 -0.951057\nv 4.48895 -1 -1\nv 4.17994 -1 -0.951057\nv 3.90117 -1 -0.809017\nv 3.67994 -1 -0.587785\nv 3.5379 -1 -0.309017\nv 3.48895 -1 0\nv 3.5379 -1 0.309017\nv 3.67994 -1 0.587785\nv 3.90117 -1 0.809017\nv 4.17994 -1 0.951057\nv 4.48895 -1 1\nv 4.79797 -1 0.951057\nv 5.07674 -1 0.809017\nv 5.29797 -1 0.587785\nv 5.44001 -1 0.309017\nv 5.48895 -1 0\nv 4.48895 1 0\nv 5.44001 -1 -0.309017\nv 5.29797 -1 -0.587786\nv 5.07674 -1 -0.809017\nv 4.79797 -1 -0.951057\nv 4.48895 -1 -1\nv 4.17994 -1 -0.951057\nv 3.90117 -1 -0.809017\nv 3.67994 -1 -0.587785\nv 3.5379 -1 -0.309017\nv 3.48895 -1 0\nv 3.5379 -1 0.309017\nv 3.67994 -1 0.587785\nv 3.90117 -1 0.809017\nv 4.17994 -1 0.951057\nv 4.48895 -1 1\nv 4.79797 -1 0.951057\nv 5.07674 -1 0.809017\nv 5.29797 -1 0.587785\nv 5.44001 -1 0.309017\nv 5.48895 -1 0\nv 4.48895 1 0\nvt 0.800609 0.153437\nvt 0.853187 0.342951\nvt 0.97054 0.500774\nvt 0.982749 0.680535\nvt 0.904224 0.836086\nvt 0.768956 0.942029\nvt 0.610931 0.994182\nvt 0.454482 1\nvt 0.313817 0.969889\nvt 0.196085 0.912795\nvt 0.104498 0.83501\nvt 0.0405186 0.740541\nvt 0.00520155 0.63205\nvt 0 0.512002\nvt 0.027181 0.384009\nvt 0.0897402 0.254473\nvt 0.190352 0.134527\nvt 0.328514 0.0417729\nvt 0.495176 0\nvt 0.666179 0.0334716\nvt 0.440147 0.545027\nvt 0.662707 0.392667\nvt 0.667107 0.492235\nvt 0.707101 0.583524\nvt 0.692675 0.673683\nvt 0.636199 0.741562\nvt 0.557346 0.778488\nvt 0.473376 0.786261\nvt 0.395457 0.771332\nvt 0.32942 0.740458\nvt 0.277778 0.698867\nvt 0.241401 0.650034\nvt 0.220556 0.596104\nvt 0.215461 0.53851\nvt 0.226552 0.478636\nvt 0.254538 0.418524\nvt 0.30017 0.361675\nvt 0.363502 0.313891\nvt 0.442283 0.283808\nvt 0.529337 0.282144\nvt 0.609973 0.31813\nvt 0.440147 0.545027\nf 1/1 20/20 2/2 \nf 20/20 19/19 2/2 \nf 19/19 18/18 2/2 \nf 18/18 17/17 2/2 \nf 17/17 16/16 2/2 \nf 16/16 15/15 2/2 \nf 15/15 14/14 2/2 \nf 14/14 13/13 2/2 \nf 13/13 12/12 2/2 \nf 12/12 11/11 2/2 \nf 11/11 10/10 2/2 \nf 10/10 9/9 2/2 \nf 9/9 8/8 2/2 \nf 8/8 7/7 2/2 \nf 7/7 6/6 2/2 \nf 6/6 5/5 2/2 \nf 5/5 4/4 2/2 \nf 4/4 3/3 2/2 \nf 1/1 2/2 21/21 \nf 2/2 3/3 21/21 \nf 3/3 4/4 21/21 \nf 4/4 5/5 21/21 \nf 5/5 6/6 21/21 \nf 6/6 7/7 21/21 \nf 7/7 8/8 21/21 \nf 8/8 9/9 21/21 \nf 9/9 10/10 21/21 \nf 10/10 11/11 21/21 \nf 11/11 12/12 21/21 \nf 12/12 13/13 21/21 \nf 13/13 14/14 21/21 \nf 14/14 15/15 21/21 \nf 15/15 16/16 21/21 \nf 16/16 17/17 21/21 \nf 17/17 18/18 21/21 \nf 18/18 19/19 21/21 \nf 19/19 20/20 21/21 \nf 20/20 1/1 21/21 \nf 22/22 41/41 23/23 \nf 41/41 40/40 23/23 \nf 40/40 39/39 23/23 \nf 39/39 38/38 23/23 \nf 38/38 37/37 23/23 \nf 37/37 36/36 23/23 \nf 36/36 35/35 23/23 \nf 35/35 34/34 23/23 \nf 34/34 33/33 23/23 \nf 33/33 32/32 23/23 \nf 32/32 31/31 23/23 \nf 31/31 30/30 23/23 \nf 30/30 29/29 23/23 \nf 29/29 28/28 23/23 \nf 28/28 27/27 23/23 \nf 27/27 26/26 23/23 \nf 26/26 25/25 23/23 \nf 25/25 24/24 23/23 \nf 22/22 23/23 42/42 \nf 23/23 24/24 42/42 \nf 24/24 25/25 42/42 \nf 25/25 26/26 42/42 \nf 26/26 27/27 42/42 \nf 27/27 28/28 42/42 \nf 28/28 29/29 42/42 \nf 29/29 30/30 42/42 \nf 30/30 31/31 42/42 \nf 31/31 32/32 42/42 \nf 32/32 33/33 42/42 \nf 33/33 34/34 42/42 \nf 34/34 35/35 42/42 \nf 35/35 36/36 42/42 \nf 36/36 37/37 42/42 \nf 37/37 38/38 42/42 \nf 38/38 39/39 42/42 \nf 39/39 40/40 42/42 \nf 40/40 41/41 42/42 \nf 41/41 22/22 42/42 \n</code></pre>\n"}, {"tags": ["c", "linux", "file", "process", "pipe"], "comments": [{"owner": {"reputation": 39539, "user_id": 153430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a446e1fd338fb334fa68b3f7470cd65b?s=128&d=identicon&r=PG", "display_name": "Jim Lewis", "link": "https://stackoverflow.com/users/153430/jim-lewis"}, "edited": false, "score": 1, "creation_date": 1505241989, "post_id": 46183204, "comment_id": 79329661, "body": "If <code>write()</code> fails, it will set <code>errno</code> to a value that can be decoded with <code>strerror()</code> to tell you what went wrong."}, {"owner": {"reputation": 173, "user_id": 4178517, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100003101255168/picture?type=large", "display_name": "Otniel Mercea", "link": "https://stackoverflow.com/users/4178517/otniel-mercea"}, "reply_to_user": {"reputation": 39539, "user_id": 153430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a446e1fd338fb334fa68b3f7470cd65b?s=128&d=identicon&r=PG", "display_name": "Jim Lewis", "link": "https://stackoverflow.com/users/153430/jim-lewis"}, "edited": false, "score": 0, "creation_date": 1505242795, "post_id": 46183204, "comment_id": 79330053, "body": "it return -1 in write"}, {"owner": {"reputation": 39539, "user_id": 153430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a446e1fd338fb334fa68b3f7470cd65b?s=128&d=identicon&r=PG", "display_name": "Jim Lewis", "link": "https://stackoverflow.com/users/153430/jim-lewis"}, "edited": false, "score": 1, "creation_date": 1505256258, "post_id": 46183204, "comment_id": 79335500, "body": "<code>errno</code> is not the same as the return value. It&#39;s more like a global variable, that many C library routines use to indicate why an operation failed. A return of -1 tells you &quot;it failed&quot;, the  <code>errno</code> (and the string it decodes to in <code>strerror()</code> ) tells you <i>why</i>."}, {"owner": {"reputation": 86, "user_id": 5183508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/384ee53211f7c02460c90621257870b5?s=128&d=identicon&r=PG&f=1", "display_name": "DiegoSunDevil", "link": "https://stackoverflow.com/users/5183508/diegosundevil"}, "edited": false, "score": 0, "creation_date": 1505265098, "post_id": 46183204, "comment_id": 79337416, "body": "Looks like the file was closed - <code>close(pfd[1]);</code>, then you try to write to it - <code>write(pfd[1],&amp;c,1));</code>"}, {"owner": {"reputation": 173, "user_id": 4178517, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100003101255168/picture?type=large", "display_name": "Otniel Mercea", "link": "https://stackoverflow.com/users/4178517/otniel-mercea"}, "edited": false, "score": 0, "creation_date": 1505322218, "post_id": 46183204, "comment_id": 79369245, "body": "it was the descriptor of the pipe wrong.problem solved"}], "owner": {"reputation": 173, "user_id": 4178517, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100003101255168/picture?type=large", "display_name": "Otniel Mercea", "link": "https://stackoverflow.com/users/4178517/otniel-mercea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1505240855, "creation_date": 1505240855, "question_id": 46183204, "link": "https://stackoverflow.com/questions/46183204/linux-pipes-communication", "title": "Linux pipes communication", "body": "<p>I have the following program</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nFILE *f;   \nint main()\n{\nint pfd[2];\nint pfd1[2];\nint pfd2[2];\nint pid1;\nint pid2;\n\npipe(pfd);\npipe(pfd1);\nif(pfd&lt;0||pfd1&lt;0)\n{\n  printf(\"Eroare la crearea pipe-ului\\n\");\n  exit(1);\n}\n\nf=fopen(\"date\",\"r\");\npid1=fork();\n\nif(pid1==0){\n\n    close(pfd[1]);\n    close(pfd1[0]);\n    char c;\n    int rd;\n    while((rd=read(pfd[0],&amp;c,1))&gt;0){\n\n         printf(\"%c\",c);\n         if(c&gt;='A'&amp;&amp;c&lt;='Z') {printf(\" mare \");printf(\"%d:\",write(pfd[1],&amp;c,1));}\n\n    }\n    close(pfd1[1]);\n    close(pfd[0]);\n    exit(0);\n}\n\npid2=fork();\n\n if(pid2==0){\n\n    close(pfd1[1]);\n    close(pfd[0]);\n    close(pfd[1]);\n    char c;\n    int rd=read(pfd1[0],&amp;c,1);\n    while((rd=read(pfd1[0],&amp;c,1))&gt;0){\n\n        printf(\"-2-%c\",c);\n\n    }\n    close(pfd1[0]);\n\n    exit(0);\n\n}\n if(pid1&gt;0&amp;&amp;pid2&gt;0){\n    close(pfd[0]);\n    close(pfd1[1]);\n    close(pfd1[0]);\n    while(!feof(f)){\n        char c;\n        fscanf(f,\"%c\",&amp;c);\n        if(feof(f)) break;\n        write(pfd[1],&amp;c,1);\n    }\n    close(pfd[1]);\n\n}\n</code></pre>\n\n<p>}\nWhat it does is it reads from a file and then sends the characters to the first children and that children extracts uppercase letters and sends them to the second children. Everything works fine if i send all characters but when i want to send only uppercase write functions return -1. My question is why this is happening?</p>\n"}, {"tags": ["c++", "c", "exception", "gcc"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 8, "creation_date": 1505240259, "post_id": 46183007, "comment_id": 79328817, "body": "&quot;appears to work (not tested)&quot; - hmmmmm. Do you expect <i>us</i> to test <i>for you</i>? Couldn&#39;t you have done that little bit yourself, up-front? I don&#39;t think it&#39;s too much to ask that <i>you</i> test <i>your</i> stuff before asking..."}, {"owner": {"reputation": 5309, "user_id": 877329, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0b5c9fa7b8fa8139c1330b5fbbd5f934?s=128&d=identicon&r=PG", "display_name": "user877329", "link": "https://stackoverflow.com/users/877329/user877329"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1505240349, "post_id": 46183007, "comment_id": 79328857, "body": "@JesperJuhl, sure, but identical assembly should be fine (if it is not a linker issue)"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 6, "creation_date": 1505240417, "post_id": 46183007, "comment_id": 79328888, "body": "<code>*When* does a C++ exception blow up C code</code> before the code is used in production, but only if you&#39;re lucky."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1505240463, "post_id": 46183007, "comment_id": 79328909, "body": "Your godbolt view is suppressing all the interesting assembly output..."}, {"owner": {"reputation": 5309, "user_id": 877329, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0b5c9fa7b8fa8139c1330b5fbbd5f934?s=128&d=identicon&r=PG", "display_name": "user877329", "link": "https://stackoverflow.com/users/877329/user877329"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1505240996, "post_id": 46183007, "comment_id": 79329164, "body": "@KerrekSB, but if I disable &quot;Filter all assembler directives&quot;, I get tons of debug information that makes it impossible to comprehend."}, {"owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "edited": false, "score": 0, "creation_date": 1505243007, "post_id": 46183007, "comment_id": 79330136, "body": "You don&#39;t have any exception handling code in your source code above, so why would expect the assembly to be different?"}, {"owner": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "edited": false, "score": 2, "creation_date": 1505243145, "post_id": 46183007, "comment_id": 79330195, "body": "<i>Don&#39;t do this</i>. Even when you manage to solve the issue of propagating the exceptions, you can&#39;t guarantee that arbitrary C code will free resources correctly when an exception is thrown. Instead, you can try passing a <code>std::exception_ptr</code> to the upper layers and rethrow it there."}, {"owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "edited": false, "score": 0, "creation_date": 1505243445, "post_id": 46183007, "comment_id": 79330320, "body": "To add to that: <a href=\"https://www.safaribooksonline.com/library/view/c-coding-standards/0321113586/ch63.html\" rel=\"nofollow noreferrer\">Don&#39;t allow exceptions to propagate across module boundries</a>"}, {"owner": {"reputation": 5309, "user_id": 877329, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0b5c9fa7b8fa8139c1330b5fbbd5f934?s=128&d=identicon&r=PG", "display_name": "user877329", "link": "https://stackoverflow.com/users/877329/user877329"}, "reply_to_user": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "edited": false, "score": 0, "creation_date": 1505243677, "post_id": 46183007, "comment_id": 79330430, "body": "@milleniumbug I said *the resource management is handled by the client, so there should be no resources to free from the C code."}, {"owner": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "edited": false, "score": 0, "creation_date": 1505243843, "post_id": 46183007, "comment_id": 79330487, "body": "The only way you can guarantee if an external library doesn&#39;t allocate resources internally is to audit it (and every new release) or write it yourself. This doesn&#39;t seem to be the case for neither GTK or glib."}, {"owner": {"reputation": 5309, "user_id": 877329, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0b5c9fa7b8fa8139c1330b5fbbd5f934?s=128&d=identicon&r=PG", "display_name": "user877329", "link": "https://stackoverflow.com/users/877329/user877329"}, "reply_to_user": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "edited": false, "score": 0, "creation_date": 1505244208, "post_id": 46183007, "comment_id": 79330645, "body": "@milleniumbug Yes, but resource allocation alone cannot <i>block</i> the exception. I was asking for why propagation brakes. Also I ask because: I want to write a library usable from C, but do not want the caller to have to catch exceptions inside its callbacks."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1505244467, "post_id": 46183007, "comment_id": 79330757, "body": "@user877329 <i>but do not want the caller to have to catch exceptions inside its callbacks.</i> Then your library simply <b>CAN NOT</b> throw any exceptions - you have no control over what users of your library can do, so there&#39;s no way you can guarantee they&#39;ll use a compiler that documents and guarantees what you want (if such a compiler even exists....)  Because if the compiler doesn&#39;t actually document the behavior you desire, the next simple update may very well break everything."}], "answers": [{"comments": [{"owner": {"reputation": 5309, "user_id": 877329, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0b5c9fa7b8fa8139c1330b5fbbd5f934?s=128&d=identicon&r=PG", "display_name": "user877329", "link": "https://stackoverflow.com/users/877329/user877329"}, "edited": false, "score": 0, "creation_date": 1505243885, "post_id": 46183588, "comment_id": 79330512, "body": "Though this is a good answer, I am asking for GCC specific details. But if this applies, I guess that <code>-fexceptions</code> flag reserves some space, that otherwise would have been useable."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 5309, "user_id": 877329, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0b5c9fa7b8fa8139c1330b5fbbd5f934?s=128&d=identicon&r=PG", "display_name": "user877329", "link": "https://stackoverflow.com/users/877329/user877329"}, "edited": false, "score": 0, "creation_date": 1505244735, "post_id": 46183588, "comment_id": 79330892, "body": "@user877329 I don&#39;t think you mentioned in the question that you&#39;re asking about GCC specific details."}, {"owner": {"reputation": 5309, "user_id": 877329, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0b5c9fa7b8fa8139c1330b5fbbd5f934?s=128&d=identicon&r=PG", "display_name": "user877329", "link": "https://stackoverflow.com/users/877329/user877329"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1505279509, "post_id": 46183588, "comment_id": 79340802, "body": "@user2079303 Read the tags"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 5309, "user_id": 877329, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0b5c9fa7b8fa8139c1330b5fbbd5f934?s=128&d=identicon&r=PG", "display_name": "user877329", "link": "https://stackoverflow.com/users/877329/user877329"}, "edited": false, "score": 0, "creation_date": 1505291643, "post_id": 46183588, "comment_id": 79347432, "body": "@user877329 I&#39;ve read the tags and I&#39;ve seen that you&#39;ve tagged gcc. That tells me that gcc is somehow related to your question, but you haven&#39;t explained how it is relevant (until your comment to this answer)."}], "tags": [], "owner": {"reputation": 11532, "user_id": 5129715, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/320498457784a3110f3e256745a9a927?s=128&d=identicon&r=PG&f=1", "display_name": "mksteve", "link": "https://stackoverflow.com/users/5129715/mksteve"}, "is_accepted": true, "score": 8, "last_activity_date": 1505285038, "last_edit_date": 1505285038, "creation_date": 1505242614, "answer_id": 46183588, "question_id": 46183007, "link": "https://stackoverflow.com/questions/46183007/when-does-a-c-exception-blow-up-c-code/46183588#46183588", "title": "*When* does a C++ exception blow up C code", "body": "<p>The problem with this question, is it asks what is the defined behavior for an undefined result.</p>\n\n<p>The C standard does not describe the behavior when an exception is thrown through a C function, because it shouldn't happen.</p>\n\n<p>The C++ standard does not explain the mechanism for an uncaught exception dropping through a C function because it shouldn't happen.</p>\n\n<h2>A practical example</h2>\n\n<p>Windows  Visual C++ uses the fs: segment register for thread local storage, and a particular slot in the thread-local data segment to create a linked list of catch frames.</p>\n\n<p>When a C++ exception is thrown, the linked list is inspected for destructors of stack objects, and a suitable catch frame.</p>\n\n<p>The C compiler may not be aware of the C++ usage of these resources, and be able to re-use the slots for a different purpose.  If the slots are used for an incompatible function, then a crash will happen.</p>\n\n<p>A particular platform and compiler may support this, but you would be at the whim of the platform for such.</p>\n\n<p>gcc is a C compiler, so does not throw exceptions.  It can create code which is exception aware as it supports <code>-fexception</code>.</p>\n\n<p><a href=\"https://gcc.gnu.org/onlinedocs/libstdc++/manual/using_exceptions.html\" rel=\"nofollow noreferrer\">gnu compiler : using exceptions </a> suggests compiling the C code with -fexceptions and says</p>\n\n<blockquote>\n  <p>In particular, unwinding into a frame with no exception handling data will cause a runtime abort.</p>\n</blockquote>\n\n<p>Although the context of that statement does not describe whether that is due to being debugged clause, or due to the exception mechanism identifying an illegal state and causing an abort.</p>\n\n<p>The actual implementation would be hardware and OS specific, which is not specified in the question, and for a specific answer, these should be specified.</p>\n\n<ul>\n<li>C++ does not have a compatibility ABI.  Calling through C++ objects compiled with different compilers does not give a guarantee of working.</li>\n<li>exceptions thrown between different modules is not recommended, as even the implementation on a compiler has produced code which is not intra-version compatible.</li>\n<li>Assuming that you have control over both the C and C++ code, ensure the C is safe by enabling the exceptions and possibly compiling the C as C++ (with an <code>extern \"C\"</code> wrapper, ensuring it is a fully C++ compilation unit.</li>\n</ul>\n"}], "owner": {"reputation": 5309, "user_id": 877329, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0b5c9fa7b8fa8139c1330b5fbbd5f934?s=128&d=identicon&r=PG", "display_name": "user877329", "link": "https://stackoverflow.com/users/877329/user877329"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 261, "favorite_count": 0, "accepted_answer_id": 46183588, "answer_count": 1, "score": 3, "last_activity_date": 1505285038, "creation_date": 1505240002, "last_edit_date": 1505243984, "question_id": 46183007, "link": "https://stackoverflow.com/questions/46183007/when-does-a-c-exception-blow-up-c-code", "title": "*When* does a C++ exception blow up C code", "body": "<p>Ok, so I need <code>-fexceptions</code> to allow a C++ exception to propagate through C code. I tried to compare the results from both C++ and C, and, from what I can tell, the compiled routines are <em>identical</em> at the assembly, even without that option [1]. Here is the test:</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n\ntypedef int (*Callback)(void* param,void* buffer,int n);\n\nvoid write_wrapper(int fd,const void* buffer,int n)\n{\n    const char* temp=(const char*)buffer;\n    while(n!=0)\n        {\n        int k=write(fd,temp,n);\n        n-=k;\n        temp+=k;\n        }\n}\n\nint test(Callback cb,void* cb_param)\n{\n    char buffer[1024];\n    int n=0;\n    do\n        {\n        n=cb(cb_param,buffer,1024);\n        write_wrapper(STDOUT_FILENO,buffer,n);\n        }\n    while(n!=1024);\n}\n\nint test2(Callback cb,void* cb_param)\n{\nchar more_stack_space_please[1024]={0};\ncb(cb_param,more_stack_space_please,1024);\nwrite_wrapper(STDOUT_FILENO,more_stack_space_please,1024);\ntest(cb,cb_param);\n}\n</code></pre>\n\n<p>Here, it is up to the caller to free resources, so there should be no leak even though the callback function throws an exception.</p>\n\n<p>Even though this example appears to work (tested with simple C++ driver)</p>\n\n<pre><code>#include \"lib.h\"\n#include &lt;cstdio&gt;\n\nclass Resource\n    {\n    public:\n        Resource()\n            {fprintf(stderr,\"A Resource\\n\");}\n\n        ~Resource()\n            {fprintf(stderr,\"Not a Resource\\n\");}\n    };\n\nint main()\n    {\n    try\n        {\n        Resource foo;\n        test([](void* cb_param,void* buffer, int n)-&gt;int\n            {\n            Resource bar;\n            throw \"test\";\n            },nullptr);\n        test2([](void* cb_param,void* buffer, int n)-&gt;int\n            {\n            throw \"test2\";\n            },nullptr);\n        }\n    catch(const char* err)\n        {\n        fprintf(stderr,\"Error: %s\\n\",err);\n        return -1;\n        }\n    return 0;\n    }\n</code></pre>\n\n<p>, I have got uncaught exception errors from GTK callbacks. My thoughts:</p>\n\n<ul>\n<li>GTK is a shared library, so maybe it only affects the linker, and not the code generator</li>\n<li>GTK (and GLib) contains a lot strange hacks, that may screw things up</li>\n</ul>\n\n<p>[1] <a href=\"https://godbolt.org/g/HfSnjB\" rel=\"nofollow noreferrer\">https://godbolt.org/g/HfSnjB</a></p>\n"}, {"tags": ["c", "eclipse", "mingw", "mqtt", "paho"], "comments": [{"owner": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "edited": false, "score": 0, "creation_date": 1505238193, "post_id": 46182477, "comment_id": 79327843, "body": "This question is already answered here <a href=\"https://stackoverflow.com/questions/32005906/example-mqtt-client-code-not-working-c\" title=\"example mqtt client code not working c\">stackoverflow.com/questions/32005906/&hellip;</a>"}, {"owner": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "edited": false, "score": 0, "creation_date": 1505238202, "post_id": 46182477, "comment_id": 79327849, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/32005906/example-mqtt-client-code-not-working-c\">Example MQTT Client Code not working C</a>"}, {"owner": {"reputation": 45, "user_id": 2136465, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cde499865ec2ddfe0e872f011dc13418?s=128&d=identicon&r=PG", "display_name": "MChawa", "link": "https://stackoverflow.com/users/2136465/mchawa"}, "reply_to_user": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "edited": false, "score": 0, "creation_date": 1505238521, "post_id": 46182477, "comment_id": 79328018, "body": "Not really a duplicate , I already linked it and it&#39;s not working , please check the picture attached."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1505238739, "post_id": 46182477, "comment_id": 79328127, "body": "Why do you have <i>all of them</i>, that doesn&#39;t look right?"}, {"owner": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "edited": false, "score": 0, "creation_date": 1505238855, "post_id": 46182477, "comment_id": 79328173, "body": "Try removing every other library except -lpaho-mqtt3c"}, {"owner": {"reputation": 45, "user_id": 2136465, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cde499865ec2ddfe0e872f011dc13418?s=128&d=identicon&r=PG", "display_name": "MChawa", "link": "https://stackoverflow.com/users/2136465/mchawa"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1505238872, "post_id": 46182477, "comment_id": 79328181, "body": "@AnttiHaapala Can you tell me what should I remove/have ? This is how i did it on linux and it was working correctly there"}, {"owner": {"reputation": 45, "user_id": 2136465, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cde499865ec2ddfe0e872f011dc13418?s=128&d=identicon&r=PG", "display_name": "MChawa", "link": "https://stackoverflow.com/users/2136465/mchawa"}, "reply_to_user": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "edited": false, "score": 0, "creation_date": 1505238975, "post_id": 46182477, "comment_id": 79328236, "body": "@AhmedMasud , I just tried it and i get the same result."}, {"owner": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "edited": false, "score": 0, "creation_date": 1505239073, "post_id": 46182477, "comment_id": 79328275, "body": "ah i see it, make sure that -L (specifying the path) is RIGHT BEFORE the -l with no other parameters in between so the command line for linking should look something like: <code>gcc -o MQTT_C_Client.exe &quot;src\\\\main.o&quot; -LE:\\\\WS\\MQTT_C_Client\\libs&quot; -lpaho-mqtt3c</code>"}], "answers": [{"tags": [], "owner": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "is_accepted": false, "score": 0, "last_activity_date": 1505239803, "creation_date": 1505239803, "answer_id": 46182951, "question_id": 46182477, "link": "https://stackoverflow.com/questions/46182477/how-to-install-eclipse-paho-c/46182951#46182951", "title": "How to install Eclipse Paho C", "body": "<h2>This is a possible reason for the error. (may not be the right solution depending on the underlying linker)</h2>\n\n<p>It's the position of <code>-L</code> relative to <code>-l</code> that's giving you trouble (I had been a bit careless in my observation).  From the gcc manpage:</p>\n\n<blockquote>\n  <p>You can mix options and other arguments.  For the most part, the order you use doesn't matter.  Order does matter when you\n         use several options of the same kind; for example, if you specify <strong>-L</strong> more than once, the directories are searched in the\n         order specified.  Also, the placement of the <strong>-l</strong> option is significant.</p>\n</blockquote>\n\n<p>It may make a difference depending on the underlying linker how the -L library searches are scoped.  Try to make sure that -L and -l are next to each other without any other directly linked object paths separating them.</p>\n\n<p>So for example, </p>\n\n<pre><code> gcc -o myprog main.o foo.o bar.o -L/some/path -L/some/other/path -la -lb \n</code></pre>\n\n<p>is okay </p>\n\n<p>However,</p>\n\n<pre><code>gcc -o myprog main.o -L/some/path foo.o bar.o -L/some/other/path -la -lb \n</code></pre>\n\n<p>is not.</p>\n"}, {"tags": [], "owner": {"reputation": 45, "user_id": 2136465, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cde499865ec2ddfe0e872f011dc13418?s=128&d=identicon&r=PG", "display_name": "MChawa", "link": "https://stackoverflow.com/users/2136465/mchawa"}, "is_accepted": true, "score": 0, "last_activity_date": 1505740594, "creation_date": 1505740594, "answer_id": 46280291, "question_id": 46182477, "link": "https://stackoverflow.com/questions/46182477/how-to-install-eclipse-paho-c/46280291#46280291", "title": "How to install Eclipse Paho C", "body": "<p>I solved the issue by building the libraries on Windows using Cygwin and used the generated libraries.</p>\n"}], "owner": {"reputation": 45, "user_id": 2136465, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cde499865ec2ddfe0e872f011dc13418?s=128&d=identicon&r=PG", "display_name": "MChawa", "link": "https://stackoverflow.com/users/2136465/mchawa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 608, "favorite_count": 0, "accepted_answer_id": 46280291, "answer_count": 2, "score": 0, "last_activity_date": 1505740594, "creation_date": 1505237868, "last_edit_date": 1505238785, "question_id": 46182477, "link": "https://stackoverflow.com/questions/46182477/how-to-install-eclipse-paho-c", "title": "How to install Eclipse Paho C", "body": "<p>I'm trying to run a simple client program using Eclipse Paho C inside Eclipse.</p>\n\n<p>I did the following:<br>\n1) Create new project<br>\n2) Copy \"include\" folder and \"lib\" folder to the project directory<br>\n3) Add \"include\" folder directory to the includes path<br>\n4) Link the libraries with the linker as shown in the image below</p>\n\n<p><a href=\"https://image.ibb.co/byAPYa/Capture.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://image.ibb.co/byAPYa/Capture.jpg\" alt=\"Project Configuration\"></a></p>\n\n<p>However when I build the following code :</p>\n\n<pre><code>#include \"stdio.h\"\n#include \"stdlib.h\"\n#include \"string.h\"\n#include \"MQTTClient.h\"\n\n#define ADDRESS     \"tcp://localhost:1883\"\n#define CLIENTID    \"ExampleClientPub\"\n#define TOPIC       \"MQTT Examples\"\n#define PAYLOAD     \"Hello World!\"\n#define QOS         1\n#define TIMEOUT     10000L\n\nint main(int argc, char* argv[])\n{\n    MQTTClient client;\n    MQTTClient_connectOptions conn_opts = MQTTClient_connectOptions_initializer;\n    MQTTClient_message pubmsg = MQTTClient_message_initializer;\n    MQTTClient_deliveryToken token;\n    int rc;\n\n    MQTTClient_create(&amp;client, ADDRESS, CLIENTID,\n        MQTTCLIENT_PERSISTENCE_NONE, NULL);\n    conn_opts.keepAliveInterval = 20;\n    conn_opts.cleansession = 1;\n\n    if ((rc = MQTTClient_connect(client, &amp;conn_opts)) != MQTTCLIENT_SUCCESS)\n    {\n        printf(\"Failed to connect, return code %d\\n\", rc);\n        exit(-1);\n    }\n    pubmsg.payload = PAYLOAD;\n    pubmsg.payloadlen = strlen(PAYLOAD);\n    pubmsg.qos = QOS;\n    pubmsg.retained = 0;\n    MQTTClient_publishMessage(client, TOPIC, &amp;pubmsg, &amp;token);\n    printf(\"Waiting for up to %d seconds for publication of %s\\n\"\n            \"on topic %s for client with ClientID: %s\\n\",\n            (int)(TIMEOUT/1000), PAYLOAD, TOPIC, CLIENTID);\n    rc = MQTTClient_waitForCompletion(client, token, TIMEOUT);\n    printf(\"Message with delivery token %d delivered\\n\", token);\n    MQTTClient_disconnect(client, 10000);\n    MQTTClient_destroy(&amp;client);\n    return rc;\n}\n</code></pre>\n\n<p>I get the following:</p>\n\n<pre><code>19:31:16 **** Rebuild of configuration Debug for project MQTT_C_Client ****\nInfo: Internal Builder is used for build\ngcc \"-IE:\\\\WS\\\\MQTT_C_Client\\\\includes\" -O0 -g3 -Wall -c -fmessage-length=0 -o \"src\\\\main.o\" \"..\\\\src\\\\main.c\" \ngcc \"-LE:\\\\WS\\\\MQTT_C_Client\\\\libs\" -o MQTT_C_Client.exe \"src\\\\main.o\" -lpaho-mqtt3a -lpaho-mqtt3as -lpaho-mqtt3c -lpaho-mqtt3cs \nsrc\\main.o: In function `main':\nE:\\WS\\MQTT_C_Client\\Debug/../src/main.c:29: undefined reference to `MQTTClient_create'\nE:\\WS\\MQTT_C_Client\\Debug/../src/main.c:34: undefined reference to `MQTTClient_connect'\nE:\\WS\\MQTT_C_Client\\Debug/../src/main.c:43: undefined reference to `MQTTClient_publishMessage'\nE:\\WS\\MQTT_C_Client\\Debug/../src/main.c:47: undefined reference to `MQTTClient_waitForCompletion'\nE:\\WS\\MQTT_C_Client\\Debug/../src/main.c:49: undefined reference to `MQTTClient_disconnect'\nE:\\WS\\MQTT_C_Client\\Debug/../src/main.c:50: undefined reference to `MQTTClient_destroy'\ncollect2.exe: error: ld returned 1 exit status\n\n19:31:29 Build Finished (took 12s.643ms)\n</code></pre>\n\n<p>Any idea what am I missing ?</p>\n"}, {"tags": ["c", "algorithm"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1505236799, "post_id": 46182199, "comment_id": 79327165, "body": "How about a naive approach at the very least? Check every number if is satisfying the condition."}, {"owner": {"reputation": 1451, "user_id": 7615877, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AbOhS.jpg?s=128&g=1", "display_name": "akshayk07", "link": "https://stackoverflow.com/users/7615877/akshayk07"}, "edited": false, "score": 4, "creation_date": 1505236932, "post_id": 46182199, "comment_id": 79327231, "body": "SO is not for doing your homework for you."}], "answers": [{"tags": [], "owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "is_accepted": false, "score": 3, "last_activity_date": 1505637726, "last_edit_date": 1505637726, "creation_date": 1505239629, "answer_id": 46182917, "question_id": 46182199, "link": "https://stackoverflow.com/questions/46182199/how-to-generate-numbers-upto-18-digits-sum-of-whose-reciprocals-is-a-whole-numb/46182917#46182917", "title": "How to generate numbers upto 18 digits, sum of whose reciprocals is a whole number", "body": "<p>Some thoughts to get you started:</p>\n\n<ul>\n<li>Your number can't contain zeros.</li>\n<li>You can always add ones to a valid number and it will still be valid.</li>\n<li>You don't need to generate numbers. Generate lists of digits instead. If you keep the list in ascending order, you will automatically solve to problem of how to eliminate permutations.</li>\n<li>Each of the true fractions 1/2 to 1/9 can be represented as an expanded  fraction with the common denominator 2520.</li>\n</ul>\n\n<p>So the following approach might work:</p>\n\n<ul>\n<li>Start with an empty array and the sum 0.</li>\n<li>Now call your generating function recursively. In each recursion, check wether the sum is divisible by 2520 without remainder. If so, print that number, and also print all numbers padded with ones at the front until you have 18 digits. So for 236 print 236, 1236, 11236 and so on until 111&thinsp;111&thinsp;111&thinsp;111&thinsp;111&thinsp;236.</li>\n<li>If your array has length 18, don't recurse further. Otherwise, call your function after adding each of the digits 2 to 9 to your list, but don't use digits that are smaller than the last digit in the list to keep the list sorted.</li>\n<li>Don't recalculate the sum, but instead keep a running sum: When you recurse, add the corresponding numerator to the sum: 1260 for 2, 840 for 3, 630 for 4 and so on.</li>\n</ul>\n\n<p>This bottom-up approach is a lot faster than examining all possible numbers. The following program will print all 14,137 valid numbers (unordered, i.e. in order of generation) in the fraction of a second:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\n#define NDIGIT 18\n\nvoid rec(int set[], int n, int sum)\n{\n    static int num[10] = {\n        0, 2520, 1260, 840, 630, 504, 420, 360, 315, 280\n    };\n\n    if (sum % 2520 == 0) {\n        for (int j = 0; j &lt; NDIGIT - n + 1; j++) {\n            for (int i = 0; i &lt; j; i++) putchar('1');\n            for (int i = 0; i &lt; n; i++) putchar(set[i] + '0');\n            putchar('\\n');\n        }\n    }\n\n    if (n &lt; NDIGIT) {\n        int i0 = n ? set[n - 1] : 2;\n\n        for (int i = i0; i &lt; 10; i++) {\n            set[n] = i;\n            rec(set, n + 1, sum + num[i]);\n        }\n    }\n}\n\nint main()\n{\n    int set[NDIGIT];\n\n    rec(set, 0, 0);\n\n    return 0;\n}\n</code></pre>\n\n<p>If you need sorted output, convert the <code>set</code> to a long integer, perhaps <code>uint64_t</code> from <code>&lt;stdint.h&gt;</code> and store it in an array instead of printing them right away. Then sort the array and print the numbers.</p>\n"}, {"tags": [], "owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "is_accepted": false, "score": 1, "last_activity_date": 1505246537, "last_edit_date": 1505246537, "creation_date": 1505244805, "answer_id": 46184075, "question_id": 46182199, "link": "https://stackoverflow.com/questions/46182199/how-to-generate-numbers-upto-18-digits-sum-of-whose-reciprocals-is-a-whole-numb/46184075#46184075", "title": "How to generate numbers upto 18 digits, sum of whose reciprocals is a whole number", "body": "<p>First, you have nine possible digits (because <code>0</code> does not lead to a valid fraction), whose reciprocals have a common divisor 2\u00d72\u00d72\u00d73\u00d73\u00d75\u00d77 = 2520:</p>\n\n<pre><code>1 -&gt; 1/1 = 2520/2520\n2 -&gt; 1/2 = 1260/2520\n3 -&gt; 1/3 =  840/2520\n4 -&gt; 1/4 =  630/2520\n5 -&gt; 1/5 =  504/2520\n6 -&gt; 1/6 =  420/2520\n7 -&gt; 1/7 =  360/2520\n8 -&gt; 1/8 =  315/2520\n9 -&gt; 1/9 =  280/2520\n</code></pre>\n\n<p>Therefore, we can use <code>x/2520</code> to describe the exact value of such sum. The sum is an integer, if and only if <code>x</code> is a multiple of <code>2520</code>. We can use the <a href=\"https://en.wikipedia.org/wiki/Modulo_operation\" rel=\"nofollow noreferrer\">modulo operator</a> for this: if <code>x % 2520 == 0</code>, the fraction x/2520 represents an integer.</p>\n\n<p>In practice, we don't need to represent the value of the fraction at all, we only need to remember the numerator modulo 2520, <code>x % 2520</code>!</p>\n\n<p>Let's look at the algorithm that checks whether the sum of the reciprocals of each digits is a whole number, in pseudocode:</p>\n\n<pre><code>Constant Array  per_digit_2520[10] = {\n    0,    /* 0 -&gt; 0/1 =    0/2520 */\n    2520, /* 1 -&gt; 1/1 = 2520/2520 */\n    1260, /* 2 -&gt; 1/2 = 1260/2520 */\n    840,  /* 3 -&gt; 1/3 =  840/2520 */\n    630,  /* 4 -&gt; 1/4 =  630/2520 */\n    504,  /* 5 -&gt; 1/5 =  504/2520 */\n    420,  /* 6 -&gt; 1/6 =  420/2520 */\n    360,  /* 7 -&gt; 1/7 =  360/2520 */\n    315,  /* 8 -&gt; 1/8 =  315/2520 */\n    280,  /* 9 -&gt; 1/9 =  280/2520 */\n}\n\nFunction corresponds_to_whole_fraction(digits):\n    Let remain = 0\n\n    For each digit d in digits:\n        remain = (remain + per_digit_2520[d]) % 2520 \n    End For\n\n    If remain == 0:\n        Return \"Yes, the digits represent a whole fraction\"\n    Else:\n        Return \"No, the digits do not represent a whole fraction\"\n    Fi\n\nEnd Function\n</code></pre>\n\n<p>In the loop above, you can also check if digit <code>d</code> is zero, and if so, reject the set of digits.</p>\n\n<p>By writing the above, we can immediately notice that because the order of the fractions in the sum does not change the sum, all combinations of a number yield the exact same sum of reciprocal digit fractions.</p>\n\n<p>In other words, if 236 yields a whole sum (it does, because 1/2 + 1/3 + 1/6 = (1260 + 840 + 420)/2520 = 2520/2520 = 1), then also 326, 362, 623, and 632 yield the same sum. Each number is an unique <a href=\"https://en.wikipedia.org/wiki/Permutation\" rel=\"nofollow noreferrer\">permutation</a> of the set of digits. To explore permutations further, we need to look at <a href=\"https://en.wikipedia.org/wiki/Combinatorics\" rel=\"nofollow noreferrer\">combinatorics</a>.</p>\n\n<p>Fortunately, the <code>corresponds_to_whole_fraction()</code> is simple enough that it is reasonable to generate the desired numbers by generating ordinary numbers, either sequentially or with a random number generator (for numbers with up to 18 digits, I recommend <a href=\"https://en.wikipedia.org/wiki/Xorshift#xorshift.2A\" rel=\"nofollow noreferrer\">xorshift64star()</a>, since 2<sup>64</sup> > 10<sup>18</sup>). </p>\n\n<p>Let's consider the sequential case:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;inttypes.h&gt;\n#include &lt;stdio.h&gt;\n\nconst unsigned int num_2520[10] = {\n    0, 2520, 1260, 840, 630, 504, 420, 360, 315, 280\n};\n\nint is_acceptable(uint64_t value)\n{\n    unsigned int  remain = 0;\n\n    if (!value)\n        return 0;\n\n    while (value &gt; 0) {\n       const unsigned int  digit = value % 10;\n\n       if (!digit)\n           return 0;\n\n       value /= 10;\n       remain = (remain + num_2520[digit]) % 2520;\n    }\n\n    return (remain == 0);\n}\n\nuint64_t next_number(uint64_t previous)\n{\n    while (++previous)\n        if (is_acceptable(previous))\n            return previous;\n\n    return 0;\n}\n\nint main(void)\n{\n    uint64_t  value = 0;\n\n    while (1) {\n        value = next_number(value);\n        if (!value)\n            break;\n\n        printf(\"%\" PRIu64 \"\\n\", value);\n    }\n\n    /* Never reached */\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>The above program prints all numbers between <code>1</code> and 2<sup>64</sup>-1 = <code>18446744073709551615</code>, inclusive, whose sum of reciprocal digits is a whole number. There are too many of them for anyone to wait long enough for all of them to be printed.</p>\n\n<p>The density is about 0.05% - 0.1% around ten digits, i.e. on average, every one-thousandth (or one two-thousandth) number is acceptable (although there is a lot of variation). So, if you start from a random number, you might wish to check the consecutive numbers starting at that random number, rather than try all new random numbers each time (because random number generators are not very fast in the first place).</p>\n\n<p>If you wanted to limit the above to 18-digit numbers, start with <code>uint64_t value = UINT64_C(99999999999999999);</code> (seventeen nines), and replace the <code>if (!value)</code> with <code>if (value &gt; UINT64_C(999999999999999999))</code> (eighteen nines).</p>\n"}], "owner": {"reputation": 9, "user_id": 8596084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf66e580092f65ec2b80315722896b36?s=128&d=identicon&r=PG&f=1", "display_name": "Yash", "link": "https://stackoverflow.com/users/8596084/yash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "closed_date": 1505243938, "answer_count": 2, "score": -6, "last_activity_date": 1505637726, "creation_date": 1505236688, "question_id": 46182199, "link": "https://stackoverflow.com/questions/46182199/how-to-generate-numbers-upto-18-digits-sum-of-whose-reciprocals-is-a-whole-numb", "closed_reason": "Needs more focus", "title": "How to generate numbers upto 18 digits, sum of whose reciprocals is a whole number", "body": "<p>I am looking for a way to generate a series of numbers whose sum of reciprocals is a whole number? </p>\n\n<p>For eg - 11  (1/1 + 1/1 = 2 is a whole number), 122 (1/1+1/2+1/2 is a whole number), 236 (1/2 + 1/3 + 1/6 is a whole number)\nand likewise.</p>\n\n<p>Also I want to avoid repeat of same combination or permutation of digits. For example, if 122 is printed, I don't want to print 212 and 221.</p>\n\n<p>I want to know how to approach this problem </p>\n"}, {"tags": ["c", "file"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1505236763, "post_id": 46182058, "comment_id": 79327152, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. While I&#39;m, happy to see a beginner using the correct type for a matrix: a 2D array, you could make your life easier if you used a pointer to a 1D array, though. I sometime answered such questions already, you might want to check my profile::answers."}, {"owner": {"reputation": 476, "user_id": 6824359, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GCaZl8DeEJE/AAAAAAAAAAI/AAAAAAAAAqg/JLtHx2OuQE8/photo.jpg?sz=128", "display_name": "krpra", "link": "https://stackoverflow.com/users/6824359/krpra"}, "edited": false, "score": 0, "creation_date": 1505237168, "post_id": 46182058, "comment_id": 79327343, "body": "You did not allocate <code>memory</code> for <code>line</code> that&#39;s why program is crashing, first allocate memory to store the <code>string</code> in <code>line</code>."}, {"owner": {"reputation": 335, "user_id": 5513902, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc64ae929f2dcff6720c1e76e8b7c5be?s=128&d=identicon&r=PG&f=1", "display_name": "M.O.", "link": "https://stackoverflow.com/users/5513902/m-o"}, "edited": false, "score": 0, "creation_date": 1505237346, "post_id": 46182058, "comment_id": 79327440, "body": "Ok I put the whole code now, at least now if anyone wants to run it they wont have to create a file (the code creates it)."}, {"owner": {"reputation": 335, "user_id": 5513902, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc64ae929f2dcff6720c1e76e8b7c5be?s=128&d=identicon&r=PG&f=1", "display_name": "M.O.", "link": "https://stackoverflow.com/users/5513902/m-o"}, "reply_to_user": {"reputation": 476, "user_id": 6824359, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GCaZl8DeEJE/AAAAAAAAAAI/AAAAAAAAAqg/JLtHx2OuQE8/photo.jpg?sz=128", "display_name": "krpra", "link": "https://stackoverflow.com/users/6824359/krpra"}, "edited": false, "score": 0, "creation_date": 1505237560, "post_id": 46182058, "comment_id": 79327548, "body": "@krpra, why do you say it&#39;s crashing if there is no error? And not sure what you are saying with I first have to allocate memory to store the string, can you be more specific please."}, {"owner": {"reputation": 476, "user_id": 6824359, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GCaZl8DeEJE/AAAAAAAAAAI/AAAAAAAAAqg/JLtHx2OuQE8/photo.jpg?sz=128", "display_name": "krpra", "link": "https://stackoverflow.com/users/6824359/krpra"}, "edited": false, "score": 0, "creation_date": 1505244079, "post_id": 46182058, "comment_id": 79330585, "body": "your code has <code>char * line=NULL</code> when you are passing <code>line</code> in <code>getline()</code> it is still pointing to <code>NULL</code>,when <code>getline()</code> copies the string in <code>line</code> it does not find any space for storing, either you call <code>malloc</code> to allocate memory or declare <code>array</code> of <code>char</code> of reasonable length"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 476, "user_id": 6824359, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GCaZl8DeEJE/AAAAAAAAAAI/AAAAAAAAAqg/JLtHx2OuQE8/photo.jpg?sz=128", "display_name": "krpra", "link": "https://stackoverflow.com/users/6824359/krpra"}, "edited": false, "score": 1, "creation_date": 1505245596, "post_id": 46182058, "comment_id": 79331297, "body": "@krpra No. Please <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/getdelim.html\" rel=\"nofollow noreferrer\">RTF <code>getline()</code> M</a>  <i>If <code>*lineptr</code> is a null pointer or if the object pointed to by <code>*lineptr</code> is of insufficient size, an object shall be allocated as if by <code>malloc()</code> or the object shall be reallocated as if by <code>realloc()</code>, respectively, such that the object is large enough to hold the characters to be written to it</i>"}], "answers": [{"comments": [{"owner": {"reputation": 335, "user_id": 5513902, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc64ae929f2dcff6720c1e76e8b7c5be?s=128&d=identicon&r=PG&f=1", "display_name": "M.O.", "link": "https://stackoverflow.com/users/5513902/m-o"}, "edited": false, "score": 0, "creation_date": 1505245130, "post_id": 46184060, "comment_id": 79331079, "body": "Thanks! The space is how they are separated and it is in &quot; ,.-&quot;. Someone else had answered saying that allocating the string should fix it and proposed initializing the string as <code>char * line= (char *)malloc( 100 * sizeof(char));</code> which I did and nothing changed."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1505245837, "post_id": 46184060, "comment_id": 79331409, "body": "<i>you should initialize the string line with &quot;&quot;, not null.</i> Not correct.  The use of <code>line</code>, <code>len</code>, and <code>getline()</code> in the posted code is correct. See <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/getdelim.html\" rel=\"nofollow noreferrer\">pubs.opengroup.org/onlinepubs/9699919799/functions/&hellip;</a>  The name of the variable used to store the result - <code>read</code> - could be better as it conflicts with the POSIX <code>read()</code> function, but that&#39;s not incorrect, either, even if it might be confusing in some ways."}, {"owner": {"reputation": 146, "user_id": 8125573, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h6JUR.jpg?s=128&g=1", "display_name": "Rafael Coelho", "link": "https://stackoverflow.com/users/8125573/rafael-coelho"}, "edited": false, "score": 0, "creation_date": 1505266830, "post_id": 46184060, "comment_id": 79337811, "body": "If the space is what you use as a separator, you have to use &quot; &quot; in strtok function, not &quot; ,.-&quot;. I tested here and worked just fine."}], "tags": [], "owner": {"reputation": 146, "user_id": 8125573, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h6JUR.jpg?s=128&g=1", "display_name": "Rafael Coelho", "link": "https://stackoverflow.com/users/8125573/rafael-coelho"}, "is_accepted": false, "score": -1, "last_activity_date": 1505266996, "last_edit_date": 1505266996, "creation_date": 1505244747, "answer_id": 46184060, "question_id": 46182058, "link": "https://stackoverflow.com/questions/46182058/line-from-file-isnt-reading-after-using-pointer-inside-the-loop/46184060#46184060", "title": "Line from file isn&#39;t reading after using pointer inside the loop", "body": "<p>You have a lot of errors:</p>\n\n<ul>\n<li>your string to break the numbers os the matrix are not inserted when you create the matrix: \" ,.-\". These must be inserted to be used in strtok function.</li>\n<li>should be &amp;&amp; instead of &amp; in while statement</li>\n<li>you have an extra } at the end of file.</li>\n<li>both whiles to create the matrix should start at 0 and go to nmatrix with &lt; symbol.</li>\n<li><p>you should initialize the string line with \"\", not null.</p>\n\n<p>int main(){</p>\n\n<pre><code>FILE *f;\nint nmatrix=3;\nint nmax=3;\nint number, count, count2, i, j;\nsrand(time(NULL));\nsize_t len = 0;\nssize_t read;\nchar * line = \"\";\nchar * pch;\nint ia;\nint (*B)[nmatrix][nmatrix] = malloc(nmatrix * nmatrix * sizeof(int));\nwhile(nmatrix&lt;=nmax){\n    // Creation of Matrix\n    f = fopen(\"matrix.txt\", \"w\");\n    for(count = 0; count &lt; nmatrix; count ++){\n        for(count2 = 0; count2 &lt; nmatrix; count2 ++){\n            number = rand()%9;\n            fprintf(f, \"%s%d \", \" \", number);\n        }\n        fprintf(f, \"%s\\n\", \" \");\n    }\n    fclose(f);\n\n    // Reading Matrix\n    f = fopen(\"matrix.txt\", \"r\");\n    i=0;\n    while((read = getline(&amp;line, &amp;len, f)) != -1) {\n        printf(\"%s\\n\", line);\n        pch = strtok(line,\" \");\n        j=0;\n        while (pch != NULL &amp;&amp; j &lt; nmatrix){\n            ia= (int)*pch-48;\n            *B[i][j]= ia;\n            pch = strtok(NULL, \" \");\n            j=j+1;\n        }\n        i=i+1;\n    }\n    fclose(f);\n\n    nmatrix=nmatrix+1;\n}\nreturn 0;\n</code></pre>\n\n<p>}</p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 94, "user_id": 3638688, "user_type": "registered", "profile_image": "https://graph.facebook.com/1233218060/picture?type=large", "display_name": "biznetix", "link": "https://stackoverflow.com/users/3638688/biznetix"}, "is_accepted": false, "score": 0, "last_activity_date": 1505247921, "creation_date": 1505247921, "answer_id": 46184793, "question_id": 46182058, "link": "https://stackoverflow.com/questions/46182058/line-from-file-isnt-reading-after-using-pointer-inside-the-loop/46184793#46184793", "title": "Line from file isn&#39;t reading after using pointer inside the loop", "body": "<p>You had a couple of issues.  You were using &amp; instead of &amp;&amp; (not really affecting it, but still wrong) and you had your pointer wrong in the assignment. I changed the output to display what is stored in the matrix, instead of the read line.\n       <code>*B[i][j]= ia;</code> needs to be <code>(*B)[i][j]= ia;</code></p>\n\n<pre><code>   // Reading Matrix\n    f = fopen(\"matrix.txt\", \"r\");\n    i=0;\n    while((read = getline(&amp;line, &amp;len, f)) != -1) {\n        pch = strtok(line,\" ,.-\");\n        j=0;\n        while (pch != NULL &amp;&amp; j&lt;nmatrix){\n            printf(\"\\n%d %d :\", i, j);\n            ia= (int)*pch-48;\n            (*B)[i][j]= ia;\n            printf(\"%d\\n\", (*B)[i][j]);\n            pch = strtok(NULL,\" ,.-\");\n            j=j+1;\n        }\n        i=i+1;\n    }\n    fclose(f);\n</code></pre>\n"}], "owner": {"reputation": 335, "user_id": 5513902, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc64ae929f2dcff6720c1e76e8b7c5be?s=128&d=identicon&r=PG&f=1", "display_name": "M.O.", "link": "https://stackoverflow.com/users/5513902/m-o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1505266996, "creation_date": 1505236122, "last_edit_date": 1505237305, "question_id": 46182058, "link": "https://stackoverflow.com/questions/46182058/line-from-file-isnt-reading-after-using-pointer-inside-the-loop", "title": "Line from file isn&#39;t reading after using pointer inside the loop", "body": "<p>So I am trying to read a matrix from a file (I am sure there are better ways to do it than how I am doing it). I had a hard time figuring out how to read each word from the file (meaning each entry of the matrix) so decided to read each line and use something I found here in stackexchange called <code>strtok</code>. </p>\n\n<p>The inside of my <code>main()</code> looks like this</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;string.h&gt;\n#include &lt;malloc.h&gt;\n#include &lt;time.h&gt;\n#include &lt;string.h&gt;\n\nint main(){\n    FILE *f;\n    int nmatrix=3;\n    int nmax=3;\n    int something;\n    int number, count, count2, i, j;\n    srand(time(NULL));\n    size_t len = 0;\n    ssize_t read;\n    char * line = NULL;\n    char * pch;\n    int ia;\n    int (*B)[nmatrix][nmatrix] = malloc(nmatrix * nmatrix * sizeof(int));\n\n\n    while(nmatrix&lt;=nmax){\n        // Creation of Matrix\n        f = fopen(\"matrix.txt\", \"w\");\n        for(count = 1; count &lt;= nmatrix; count ++){\n            for(count2 = 1; count2 &lt;= nmatrix; count2 ++){\n                number = rand()%9;\n                fprintf(f, \"%s%d \", \" \", number);\n            }\n            fprintf(f, \"%s\\n\", \" \");\n        }\n        fclose(f);\n\n        // Reading Matrix\n        f = fopen(\"matrix.txt\", \"r\");\n        i=0;\n        while((read = getline(&amp;line, &amp;len, f)) != -1) {\n            printf(\"%s\\n\", line);\n            pch = strtok(line,\" ,.-\");\n            j=0;\n            while (pch != NULL &amp; j&lt;nmatrix){\n                ia= (int)*pch-48;\n                *B[i][j]= ia;\n                pch = strtok(NULL, \" ,.-\");\n                j=j+1;\n            }\n            i=i+1;\n        }\n        fclose(f);\n\n        nmatrix=nmatrix+1;\n    }\n\n\n    return 0;\n}\n</code></pre>\n\n<p>The first output in terminal is if the line  <code>*B[i][j]= ia;</code> is erased, and the second with it. The first ouput reads all the lines in the file and the second doesnt read the last. Why? (The output looks different cuz the matrices are generated at random).</p>\n\n<p>Thanks in advance\n<a href=\"https://i.stack.imgur.com/pwNmC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pwNmC.png\" alt=\"enter image description here\"></a></p>\n\n<p>I am fairly new to everything, specially pointers so if anything is not used correctly I'd appreciate the comment. </p>\n"}, {"tags": ["c++", "c", "compiler-optimization", "libv8"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 4, "creation_date": 1505235854, "post_id": 46181926, "comment_id": 79326722, "body": "Um, <code>strip</code>? <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/utilities/strip.html\" rel=\"nofollow noreferrer\">pubs.opengroup.org/onlinepubs/9699919799/utilities/strip.htm&zwnj;&#8203;l</a>"}, {"owner": {"reputation": 113, "user_id": 3070367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e79d8539b03c424013c704fb8e27bad5?s=128&d=identicon&r=PG&f=1", "display_name": "Ala&#39;a .H", "link": "https://stackoverflow.com/users/3070367/alaa-h"}, "edited": false, "score": 0, "creation_date": 1505243017, "post_id": 46181926, "comment_id": 79330140, "body": "mmm .. this solution is not for windows."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1505243412, "post_id": 46181926, "comment_id": 79330302, "body": "I use strip on Windows all the time."}, {"owner": {"reputation": 113, "user_id": 3070367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e79d8539b03c424013c704fb8e27bad5?s=128&d=identicon&r=PG&f=1", "display_name": "Ala&#39;a .H", "link": "https://stackoverflow.com/users/3070367/alaa-h"}, "edited": false, "score": 0, "creation_date": 1505244422, "post_id": 46181926, "comment_id": 79330739, "body": "does it work with exported symbols"}, {"owner": {"reputation": 113, "user_id": 3070367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e79d8539b03c424013c704fb8e27bad5?s=128&d=identicon&r=PG&f=1", "display_name": "Ala&#39;a .H", "link": "https://stackoverflow.com/users/3070367/alaa-h"}, "edited": false, "score": 0, "creation_date": 1505244645, "post_id": 46181926, "comment_id": 79330847, "body": "what I need is a way to tell the linker to ignore exporting symbols from included static library and let the link to deside where its needed or not and never link them."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1505246298, "post_id": 46181926, "comment_id": 79331632, "body": "static libraries don&#39;t export symbols, they are simply concatenations of object files."}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1505246844, "post_id": 46181926, "comment_id": 79331856, "body": "Are you sure your problem is the exports and not debug symbols? What does <code>dumpbin &#47;exports</code> say?"}, {"owner": {"reputation": 113, "user_id": 3070367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e79d8539b03c424013c704fb8e27bad5?s=128&d=identicon&r=PG&f=1", "display_name": "Ala&#39;a .H", "link": "https://stackoverflow.com/users/3070367/alaa-h"}, "edited": false, "score": 0, "creation_date": 1505252843, "post_id": 46181926, "comment_id": 79334456, "body": "sure .. my exe (for now) just uses helloworld example .. and includes v8 static libraries .. after building all v8 api function even unsef functions are exported"}, {"owner": {"reputation": 113, "user_id": 3070367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e79d8539b03c424013c704fb8e27bad5?s=128&d=identicon&r=PG&f=1", "display_name": "Ala&#39;a .H", "link": "https://stackoverflow.com/users/3070367/alaa-h"}, "edited": false, "score": 0, "creation_date": 1505252899, "post_id": 46181926, "comment_id": 79334472, "body": "@NeilButterworth any function marked with _declspec even in static lib will be exported"}], "owner": {"reputation": 113, "user_id": 3070367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e79d8539b03c424013c704fb8e27bad5?s=128&d=identicon&r=PG&f=1", "display_name": "Ala&#39;a .H", "link": "https://stackoverflow.com/users/3070367/alaa-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 634, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1505243100, "creation_date": 1505235562, "last_edit_date": 1505243100, "question_id": 46181926, "link": "https://stackoverflow.com/questions/46181926/stripremove-exported-symbols-from-static-lib", "title": "Strip(remove) exported symbols from static lib", "body": "<p>I am embedding v8 in my exe and it's built as a static library, the result is an exe file after full optimization both in compiling and linking.\nThe total exe size is about 13MB .. I noticed that most of the v8 APIs are exported symbols in my exe. </p>\n\n<p>an exported symbol in msvc can be marked with <code>_declspe(expot)</code> modifier</p>\n\n<pre><code>_declspec(export) type Name([args..]);\n</code></pre>\n\n<p>So, what flags can I use to stop and strip unused methods and symbols from being linked and exported?</p>\n\n<p>my main goal is to reduce the size of the final exe file.</p>\n"}, {"tags": ["c", "linux", "mmap"], "comments": [{"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1505238204, "post_id": 46181888, "comment_id": 79327851, "body": "Did you try <code>MAP_ANONYMOUS</code> instead of a file?"}, {"owner": {"reputation": 23, "user_id": 8598932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfc9e0f49cf65cdc45e612427c0f717d?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/8598932/nathan"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1505286134, "post_id": 46181888, "comment_id": 79343921, "body": "@rici: No, as I precisely want the mapping to be backed by larger storage.  If I had to use anonymous mapping I could just create objects the regular way."}, {"owner": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "edited": false, "score": 0, "creation_date": 1505286824, "post_id": 46181888, "comment_id": 79344329, "body": "@Nathan: <code>MAP_ANONYMOUS</code> is backed by swap partitions."}, {"owner": {"reputation": 23, "user_id": 8598932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfc9e0f49cf65cdc45e612427c0f717d?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/8598932/nathan"}, "reply_to_user": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "edited": false, "score": 0, "creation_date": 1505287481, "post_id": 46181888, "comment_id": 79344796, "body": "@myaut: good point.  I\u2019ll look into it."}, {"owner": {"reputation": 23, "user_id": 8598932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfc9e0f49cf65cdc45e612427c0f717d?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/8598932/nathan"}, "reply_to_user": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "edited": false, "score": 0, "creation_date": 1505287992, "post_id": 46181888, "comment_id": 79345098, "body": "@myaut: I just realized this would be a little more involved than I first thought: this is because I resize and remap if the mapping turns out to be too small.  Before I dig into this too much: any anonymous mapping swapped out before other core memory?  I.e. is there a real advantage to using it instead of just allocating objects in core?"}, {"owner": {"reputation": 7371, "user_id": 1510211, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4acda0216d7fd2ea07c31c0cfc53a714?s=128&d=identicon&r=PG", "display_name": "Shachar Shemesh", "link": "https://stackoverflow.com/users/1510211/shachar-shemesh"}, "edited": false, "score": 0, "creation_date": 1505289704, "post_id": 46181888, "comment_id": 79346139, "body": "@Nathan likely no. Linux treats anonymous mapping the same it treats anything else. The main advantage is that once your refcount goes to zero, the pages are immediately released."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 8598932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfc9e0f49cf65cdc45e612427c0f717d?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/8598932/nathan"}, "edited": false, "score": 0, "creation_date": 1505290427, "post_id": 46192151, "comment_id": 79346622, "body": "That looks like a really nice solution, thanks!  I\u2019ve changed by code to use /dev/shm/ as the directory and running the program right now.  It seems that it immediately allocated some swap storage although there is still memory available, but it also doesn\u2019t seem to be a problem.  I\u2019ll let it run for a large enough input and mark your answer as correct if all goes well."}, {"owner": {"reputation": 388, "user_id": 1837180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18fe85729faf7b6fdebef7f8d079a174?s=128&d=identicon&r=PG", "display_name": "gonzo", "link": "https://stackoverflow.com/users/1837180/gonzo"}, "edited": false, "score": 0, "creation_date": 1616871113, "post_id": 46192151, "comment_id": 118141105, "body": "This solution is completely untenable as munmap and MADV_DONTNEED behaves exactly the same, freeing <i>all</i> pages and not just the dirty ones"}, {"owner": {"reputation": 7371, "user_id": 1510211, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4acda0216d7fd2ea07c31c0cfc53a714?s=128&d=identicon&r=PG", "display_name": "Shachar Shemesh", "link": "https://stackoverflow.com/users/1510211/shachar-shemesh"}, "edited": false, "score": 0, "creation_date": 1616912190, "post_id": 46192151, "comment_id": 118147986, "body": "OP describes behavior that directly contradicts your assertion. I also don&#39;t think you understand what &quot;untenable&quot; means."}], "tags": [], "owner": {"reputation": 7371, "user_id": 1510211, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4acda0216d7fd2ea07c31c0cfc53a714?s=128&d=identicon&r=PG", "display_name": "Shachar Shemesh", "link": "https://stackoverflow.com/users/1510211/shachar-shemesh"}, "is_accepted": true, "score": 0, "last_activity_date": 1505289937, "creation_date": 1505289937, "answer_id": 46192151, "question_id": 46181888, "link": "https://stackoverflow.com/questions/46181888/is-it-possible-to-discard-dirty-pages-on-a-shared-mapping/46192151#46192151", "title": "Is it possible to discard dirty pages on a shared mapping?", "body": "<p>Going over the comments, it appears that using the swap is fine for your needs as an alternative to file storage. If that's the case, I think your best bet is to use a file, as you've done, on a tmpfs partition. The best tmpfs partition to use for that purpose is at <code>/dev/shm</code>.</p>\n\n<p>Just open a file in <code>/dev/shm</code>, truncate it to the size you need, mmap it and unlink, precisely like you've already done. /dev/shm uses the main memory as it's \"backing store\", but that will get swapped out if memory is short.</p>\n\n<p>The advantage of using the swap is that no force flush will happen to pages that still fit in memory at the point the program exists. Immediately after, these pages are immediately recognized as unneeded, and discarded. This should solve your problem while still allowing you to resize etc.</p>\n\n<p>It has the extra benefit of requiring almost no change to your current code :-)</p>\n"}], "owner": {"reputation": 23, "user_id": 8598932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfc9e0f49cf65cdc45e612427c0f717d?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/8598932/nathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "accepted_answer_id": 46192151, "answer_count": 1, "score": 0, "last_activity_date": 1505289937, "creation_date": 1505235375, "last_edit_date": 1505288570, "question_id": 46181888, "link": "https://stackoverflow.com/questions/46181888/is-it-possible-to-discard-dirty-pages-on-a-shared-mapping", "title": "Is it possible to discard dirty pages on a shared mapping?", "body": "<p>The program I\u2019m working on needs to save some information on every item of its\ninput.  As the number of items to be processed will be huge, I cannot keep the\ndata in memory (I iterate over the input in a first pass and record the\ninformation).  </p>\n\n<p>I want to place the extra data into virtual memory, but would like it to go to\ndisk when memory becomes scarce (that\u2019s /when/, not /if/.  It will become scarce).</p>\n\n<p>Currently I create a sparse file of (hopefully) appropriate size, <code>mmap</code> the whole\nthing, close and unlike the file afterwards.  The reason I unlink the file is that I\ndon\u2019t need the information as soon as the program quits.</p>\n\n<p>The program can now happily read and write to the mapped region, all is well.</p>\n\n<p>Until the program exists.  Then the kernel starts to write all this now useless\ndata to disk, although the file is no longer open or linked.  I first thought\nthat the kernel would realize that the data is no longer accessible, but\napparently not.  So I first included a call to <code>madvise</code> with <code>MDV_REMOVE</code> at\nthe end of the program, and as that didn\u2019t help, I also added <code>MDV_DONTNEED</code> as\nwell.  Both didn\u2019t help with my problem.</p>\n\n<p>The worst thing is that this blocks my machine as every write any other program\nmakes (like my text editor) has to wait for this long running write to complete.</p>\n\n<p>Is there any way to convince the kernel to not write this data to disk?</p>\n"}]